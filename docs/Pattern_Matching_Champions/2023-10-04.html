<!DOCTYPE html><html><head>
  <title>Pattern Matching Champions on 2023-10-04</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "Pattern Matching Champions";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">Pattern Matching Champions<br>2023-10-04<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2023-10-03" class="nav-link"><span>prev</span></a>
<a href="2023-10-05" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search Pattern Matching Champions">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Oct 03 2023 17:00:53 GMT-0700 (Pacific Daylight Time)">00:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I think this is relevant if it's <em>easy</em> to write code like that and there is <em>benefit</em> to doing it, such that we can expect it to be a somewhat common pattern among authors. If it's just <em>possible</em> but <em>fairly silly</em> to write such code, then so long as the behavior is well-defined and not too surprising it's not something we need to worry about, imo. People can do <em>lots</em> of very silly things in their code; this is far from the only place where authors can nest to ridiculous degrees if they feel like it, and make their code hard to understand.</blockquote></mx-reply>I don't really understand how to interact with this group when the response to my concerns is to pretend they don't exist</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Oct 03 2023 17:02:00 GMT-0700 (Pacific Daylight Time)">00:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">Tweeting "have you tried just not writing bad code?" is already not going to be a way to win friends when we're talking about _existing_ features </td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Oct 03 2023 17:02:07 GMT-0700 (Pacific Daylight Time)">00:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">I'm not doing that? I'm providing my own reasoning.</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue Oct 03 2023 17:02:21 GMT-0700 (Pacific Daylight Time)">00:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">This is a new feature; it needs to justify its own existence</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Tue Oct 03 2023 17:03:39 GMT-0700 (Pacific Daylight Time)">00:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Like, I provided significant qualifications to my statement. I think they all apply here, and justify my judgement that is okay. If you disagree, feel free to say why! Especially if you feel any of my assumptions don't hold, or perhaps don't hold as strongly as I might think they do.</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Tue Oct 03 2023 17:07:06 GMT-0700 (Pacific Daylight Time)">00:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">An issue is that I think your objection, as stated, is a fully general counter argument to any new feature that can be nested; you can always sufficiently nest it to make it unreadable. Thus my qualifications about when I think your (valid!) concern applies, and why I think this situation doesn't meet those criteria.</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Tue Oct 03 2023 17:07:20 GMT-0700 (Pacific Daylight Time)">00:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">I said it was extremely easy to write code that's very hard to read. This is literally part of my _initial reaction_. I'm not looking for edge cases, I'm literally just spelling out the basic facts of what this does to JS.</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Tue Oct 03 2023 17:07:39 GMT-0700 (Pacific Daylight Time)">00:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">This is all brand new to me; I am your eyes before plenary shuts you down</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Tue Oct 03 2023 17:09:14 GMT-0700 (Pacific Daylight Time)">00:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">Like, my expressions of reservation during plenary this past week were all met with "oh, I'll be harsher if you're not willing"</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Tue Oct 03 2023 17:10:06 GMT-0700 (Pacific Daylight Time)">00:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Yup, and my counter was that I don't *currently* believe that the problematic code you gave an example of is actually a realistic thing someone will write. I could be wrong; a semi-realistic example would help. </td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Tue Oct 03 2023 17:12:41 GMT-0700 (Pacific Daylight Time)">00:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">With sufficient elision, it's similarly easy to show short code that puts an IIAFE inside the default argument value of the arglist of another IIAFE, for example, which is practically unreadable with only one level of nesting. We don't judge that to be a concern tho, because it's rare and not particularly helpful vs the more readable ways to write that code.</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Tue Oct 03 2023 17:13:14 GMT-0700 (Pacific Daylight Time)">00:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">But there are other examples one can raise for various features that are realistic *and* similarly unreadable, and that's a problem to address </td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Tue Oct 03 2023 17:13:22 GMT-0700 (Pacific Daylight Time)">00:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">So the specifics matter, is what I'm saying</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Tue Oct 03 2023 17:15:38 GMT-0700 (Pacific Daylight Time)">00:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">Sure but I pointed out a basic fact -- `if (...)` would now be two totally different constructs, which not only can appear adjacently but the new one is also nestable -- and there is strong interest in having me not say that but no interest in being like, "oh yes, we _could_ come up with a terrible example, couldn't we"</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Tue Oct 03 2023 17:18:02 GMT-0700 (Pacific Daylight Time)">00:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">Seems like we're only looking for people to nod and agree</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Tue Oct 03 2023 17:39:53 GMT-0700 (Pacific Daylight Time)">00:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i think itâ€™s extremely important to unbox primitives by default; itâ€™s a mistake the language makes that so difficult already.</blockquote></mx-reply>but nobody really use them right? boxed primitives</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Tue Oct 03 2023 17:40:13 GMT-0700 (Pacific Daylight Time)">00:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">Not on purpose, but way more than people realize by accident.</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Tue Oct 03 2023 17:40:53 GMT-0700 (Pacific Daylight Time)">00:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">My goal here is to absorb those accidents and be able to write code that pretends boxed primitives doesnâ€™t exist, and <em>still works with them</em>, something thatâ€™s quite difficult today.</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Tue Oct 03 2023 17:51:06 GMT-0700 (Pacific Daylight Time)">00:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> My goal here is to absorb those accidents and be able to write code that pretends boxed primitives doesnâ€™t exist, and <em>still works with them</em>, something thatâ€™s quite difficult today.</blockquote></mx-reply>Having <code>x is String</code> work for both boxed and unboxed primitives is fine. I'm not sure how valuable <code>x is String(let y)</code> is though. If you are writing that you are definitely <em>not</em> pretending boxed primitives don't exist.</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Tue Oct 03 2023 18:06:35 GMT-0700 (Pacific Daylight Time)">01:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i agree thereâ€™s no value there. However that seems like an unavoidable thing to fall out of the proposalâ€™s semantics, and not a harmful one since itâ€™ll be rare (unless it slows down normal usage, ofc)</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Tue Oct 03 2023 18:38:15 GMT-0700 (Pacific Daylight Time)">01:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell"><p>So what's getting totally lost is why we want the things that we want.</p>
<p><code>is</code> feels like "<em>huh? this is not the proposal I showed up for? we're here to make a better <code>switch</code>, not to pull a bait-and-switch</em>", yet wanting <code>if (x is Some(let v))</code> makes a lot of sense. Simultaneously though, it's clear that for the general POJO situation, <code>if (let { foo } = x)</code> would integrate better into the language.</p>
<p>Indeed, the temperature of the committee that I was experiencing last week is that having "pattern matching has a solution for that!" come up in the discussion of a half-dozen disparate proposals is a <em>worrying</em> signal, that the feature has grown unreasonably large.</p>
<p>Although I was thinking yesterday that the spelling <code>if</code> is more of an issue than whether it's a pattern, this may have been mistaken. If <code>if</code> is a guard then it feels more natural to exclude it from <code>is</code>, which makes my largest concerns disappear. I believe strongly that patterns should be as simple as possible -- it's not even clear to me that <code>and</code> is a good idea; the thing that we really <em>need</em> it for is a way to connect a binding to a pattern that's going to use that binding, yet ironically that's exactly the case where <code>and</code> is not the most intuitive keyword to read.</p>
</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Tue Oct 03 2023 18:55:47 GMT-0700 (Pacific Daylight Time)">01:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>So what's getting totally lost is why we want the things that we want.</p>
<p><code>is</code> feels like "<em>huh? this is not the proposal I showed up for? we're here to make a better <code>switch</code>, not to pull a bait-and-switch</em>", yet wanting <code>if (x is Some(let v))</code> makes a lot of sense. Simultaneously though, it's clear that for the general POJO situation, <code>if (let { foo } = x)</code> would integrate better into the language.</p>
<p>Indeed, the temperature of the committee that I was experiencing last week is that having "pattern matching has a solution for that!" come up in the discussion of a half-dozen disparate proposals is a <em>worrying</em> signal, that the feature has grown unreasonably large.</p>
<p>Although I was thinking yesterday that the spelling <code>if</code> is more of an issue than whether it's a pattern, this may have been mistaken. If <code>if</code> is a guard then it feels more natural to exclude it from <code>is</code>, which makes my largest concerns disappear. I believe strongly that patterns should be as simple as possible -- it's not even clear to me that <code>and</code> is a good idea; the thing that we really <em>need</em> it for is a way to connect a binding to a pattern that's going to use that binding, yet ironically that's exactly the case where <code>and</code> is not the most intuitive keyword to read.</p>
</blockquote></mx-reply>half a dozen sounds high? I recall mentioning it in relation to the negated <code>in</code>/<code>instanceof</code> proposal, which I had mentioned here in advance of plenary. I don't recall much more than that.</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Tue Oct 03 2023 18:56:39 GMT-0700 (Pacific Daylight Time)">01:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><code>if (let { foo } = x)</code> may align with existing destructuring, but existing destructuring cannot be easily extended into a full pattern matching mechanism.</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Tue Oct 03 2023 18:58:03 GMT-0700 (Pacific Daylight Time)">01:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I also don't have a strong opinion on whether <code>if</code> should be excluded from <code>is</code>, only that if we have <code>if</code> patterns, then we shouldn't differ in what is allowed in the Pattern syntax between <code>if</code> and <code>match</code>.</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Tue Oct 03 2023 18:58:34 GMT-0700 (Pacific Daylight Time)">01:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">"half-dozen" might be rounding up ðŸ˜… but I mean it in terms of folks' perception, regardless of the precise reality</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Tue Oct 03 2023 18:59:45 GMT-0700 (Pacific Daylight Time)">01:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">If anything, I feel that <code>is not</code> is far more palatable than <code>!in</code> and <code>!instanceof</code>, though that comes from a position of trying not to clash with TypeScript syntax if possible.</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Tue Oct 03 2023 19:00:33 GMT-0700 (Pacific Daylight Time)">02:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Also, <code>if (let { foo } = x)</code> doesn't really work if it's not actually doing pattern matching. There's no condition in that case.</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Tue Oct 03 2023 19:01:23 GMT-0700 (Pacific Daylight Time)">02:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">it may be the case that destructuring can't be extending into pattern matching, but what I'm saying is that we have a great language without pattern matching which wants for an if-let construct</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Tue Oct 03 2023 19:01:59 GMT-0700 (Pacific Daylight Time)">02:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">to introduce not destructuring but instead a "competitor" to it in that space feels like the language is attacking itself</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Tue Oct 03 2023 19:02:00 GMT-0700 (Pacific Daylight Time)">02:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I believe we have a great language which wants for a pattern matching mechanism. </td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Tue Oct 03 2023 19:02:55 GMT-0700 (Pacific Daylight Time)">02:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">There are so many things pattern matching can tie into with future proposals that can build upon it. A standalone <code>if let</code> mechanism is almost a throwaway feature. It doesn't add any other intrinsic value.</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Tue Oct 03 2023 19:04:11 GMT-0700 (Pacific Daylight Time)">02:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Pattern matching is a boon for FP-style development and is a vast improvement in terms of expressivity and usability of the language, especially with a cohesive syntax.</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Tue Oct 03 2023 19:05:09 GMT-0700 (Pacific Daylight Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">If anything, I see "this could be accomplished with pattern matching" to be an indication that we're on the path to getting this right. Not in a "shoehorn everything into pattern syntax" way, but in a "natural progression of the feature and its capabilities" way.</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Tue Oct 03 2023 19:07:04 GMT-0700 (Pacific Daylight Time)">02:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> There are so many things pattern matching can tie into with future proposals that can build upon it. A standalone <code>if let</code> mechanism is almost a throwaway feature. It doesn't add any other intrinsic value.</blockquote></mx-reply>that's a very difficult philosophy for me to relate to ðŸ˜“ ideally we'd never need to add anything to the language because it would already be enough. <code>if</code>-<code>let</code> is a simple extension of what we already have which adds value without introducing any worries about the ship capsizing</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Tue Oct 03 2023 19:07:21 GMT-0700 (Pacific Daylight Time)">02:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">If anything, I find it regrettable that destructuring was defined to be so loose in how it handles patterns, which makes it very difficult to extend into a full blown pattern matching mechanism.</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Tue Oct 03 2023 19:08:00 GMT-0700 (Pacific Daylight Time)">02:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I don't see how <code>if let</code> is useful <em>without</em> pattern matching to go with it.</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Tue Oct 03 2023 19:10:58 GMT-0700 (Pacific Daylight Time)">02:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I don't see JS as 100% done. It is merely "sufficient". There are far too many rough edges and improvements that can be made in the developer experience. Why add <code>class</code> when <code>function</code> and <code>prototype</code> are sufficient? Why add <code>let</code> when <code>var</code> is sufficient?</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Tue Oct 03 2023 19:11:40 GMT-0700 (Pacific Daylight Time)">02:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">That said, I'm not advocating for everything under the sun to be included in JS.</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Tue Oct 03 2023 19:12:00 GMT-0700 (Pacific Daylight Time)">02:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I'm advocating for features that provide a tangible benefit to a sizable population of JS users.</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Tue Oct 03 2023 19:13:21 GMT-0700 (Pacific Daylight Time)">02:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I advocated for class decorators to improve the developer experience for OOP devs. I have advocated for pattern matching to improve the experience for FP devs. </td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Tue Oct 03 2023 19:14:20 GMT-0700 (Pacific Daylight Time)">02:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I'm advocating for shared structs to improve the runtime capabilities for large applications like Office Web Apps, Google Docs, Teams, etc., that sorely need improvements in multithreading.</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Tue Oct 03 2023 19:16:36 GMT-0700 (Pacific Daylight Time)">02:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Yes, pattern matching is a fairly large feature, but I'd argue its more than worth its weight in complexity. I can guarantee I am going to reach for pattern matching about 100x more often than I would <code>Temporal</code>, or <code>bigint</code>.</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Tue Oct 03 2023 19:19:08 GMT-0700 (Pacific Daylight Time)">02:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">And despite using the phrase "complexity", I don't find it to be too complex either. Once you have a grasp of the basics of pattern matching, each feature is complementary with the others.</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Tue Oct 03 2023 19:19:38 GMT-0700 (Pacific Daylight Time)">02:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">This is where I found <code>${}</code> and <code>let when</code> to be so jarring, they felt out of place compared to other constructs.</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Tue Oct 03 2023 19:24:35 GMT-0700 (Pacific Daylight Time)">02:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>with pattern matching, you can start simply and build:</p>
<ul>
<li><code>v is String</code> to perform a simple type test</li>
<li><code>v is String or Number</code> to perform test two types</li>
<li><code>v is "foo" or "bar" or 1</code> to test specific values</li>
<li><code>v is { x: Number, y: Number }</code> to test shapes</li>
<li><code>match (v) { ... }</code> to test multiple branches</li>
<li><code>match (v) { { x: let x, y: let y }: ... }</code> to pull an POJO apart</li>
<li><code>match (v) { Point(let x, let y): ... }</code> to pull a class apart</li>
<li>etc.</li>
</ul>
</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Tue Oct 03 2023 19:25:32 GMT-0700 (Pacific Daylight Time)">02:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">By the time you get to the 3rd bullet point, you've already been introduced to <code>or</code>. <code>and</code>, <code>not</code>, and <code>()</code> aren't a huge leap beyond that if you're familiar with <code>||</code>, <code>&amp;&amp;</code>, and <code>!</code>.</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Tue Oct 03 2023 19:32:12 GMT-0700 (Pacific Daylight Time)">02:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I could agree that <code>if</code> patterns are slightly out of step with the rest of the proposal, compared to an <code>if</code> clause. However, having them be patterns makes them more generally useful. With an <code>if</code> clause, you have to spend time and energy rearranging your pattern to satisfy the runtime requirements of a trailing <code>if</code> (which I described a few days ago), while having <code>if</code> available as a pattern allows you to keep those (hopefully few) occurrences local to the subpattern that needs them. I hope, though, that the pattern matching syntax itself is expressive enough so as to avoid needing to lean on <code>if</code> except for the narrowest of corner cases.</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Tue Oct 03 2023 19:37:46 GMT-0700 (Pacific Daylight Time)">02:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>For example: if we do not support relational patterns, you're more likely to need to lean on <code>if</code> to perform relational tests, like:</p>
<pre><code>match (p) {
  Point(let x, let y) if (x &gt; 0 &amp;&amp; y &gt; 0): "positive x, positive y";
  Point(let x, let y) if (x &gt; 0 &amp;&amp; y &lt; 0): "positive x, negative y";
  Point(let x, let y) if (x &lt; 0 &amp;&amp; y &gt; 0): ...;
  Point(let x, let y) if (x &lt; 0 &amp;&amp; y &lt; 0): ...;
  ...
}
</code></pre>
<p>While relational patterns would remove that need here:</p>
<pre><code>match (p) {
  Point(&gt; 0, &gt; 0): "positive x, positive y";
  Point(&gt; 0, &lt; 0): "positive x, negative y";
  Point(&lt; 0, &gt; 0): ...;
  Point(&lt; 0, &lt; 0): ...;
  ...
}

</code></pre>
<p>The more expressive the pattern syntax, the less likely you'll actually see <code>if (x is ... if (y))</code> in actual code since you won't need that escape hatch.</p>
</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Tue Oct 03 2023 19:41:07 GMT-0700 (Pacific Daylight Time)">02:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">And that's what <code>if</code> patterns are: an escape hatch. Something you should hopefully never need to reach for.</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Tue Oct 03 2023 19:46:13 GMT-0700 (Pacific Daylight Time)">02:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">And if <code>if</code> patterns exist and are disagreeable in some places, they can be called out by linters or by syntax highlighters to indicate their unique nature, to call attention to the use of the escape hatch. If you've seen a <code>if</code> pattern, does that mean a lack of expressivity in pattern matching? Does that mean you should restructure your input to improve its matchability? Does that mean you're trying to do something too complicated and you should refactor to multiple statements? Any one, or all of these could apply.</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Tue Oct 03 2023 21:27:24 GMT-0700 (Pacific Daylight Time)">04:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">ðŸ¤” should we discuss it on the pattern matching repo? that's more accessible to the whole community </td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Tue Oct 03 2023 21:41:31 GMT-0700 (Pacific Daylight Time)">04:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">Sure. My hope was that having a "sidebar" would improve communication but that hasn't worked out well; I've mostly felt very stressed out about having to be the lone dissenter</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Tue Oct 03 2023 21:43:58 GMT-0700 (Pacific Daylight Time)">04:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">you can publish it on GitHub, maybe there are other guys objecting to this, don't feel too stressed ðŸ‘€</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Tue Oct 03 2023 23:24:22 GMT-0700 (Pacific Daylight Time)">06:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>So what's getting totally lost is why we want the things that we want.</p>
<p><code>is</code> feels like "<em>huh? this is not the proposal I showed up for? we're here to make a better <code>switch</code>, not to pull a bait-and-switch</em>", yet wanting <code>if (x is Some(let v))</code> makes a lot of sense. Simultaneously though, it's clear that for the general POJO situation, <code>if (let { foo } = x)</code> would integrate better into the language.</p>
<p>Indeed, the temperature of the committee that I was experiencing last week is that having "pattern matching has a solution for that!" come up in the discussion of a half-dozen disparate proposals is a <em>worrying</em> signal, that the feature has grown unreasonably large.</p>
<p>Although I was thinking yesterday that the spelling <code>if</code> is more of an issue than whether it's a pattern, this may have been mistaken. If <code>if</code> is a guard then it feels more natural to exclude it from <code>is</code>, which makes my largest concerns disappear. I believe strongly that patterns should be as simple as possible -- it's not even clear to me that <code>and</code> is a good idea; the thing that we really <em>need</em> it for is a way to connect a binding to a pattern that's going to use that binding, yet ironically that's exactly the case where <code>and</code> is not the most intuitive keyword to read.</p>
</blockquote></mx-reply>it's not a bait and switch; we got feedback from SM that we <em>can't</em> do a better switch unless we build it iteratively, and <code>is</code> makes perfect sense for that</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Tue Oct 03 2023 23:25:31 GMT-0700 (Pacific Daylight Time)">06:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> ðŸ¤” should we discuss it on the pattern matching repo? that's more accessible to the whole community </blockquote></mx-reply>i don't think more cooks will make for a better broth</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Tue Oct 03 2023 23:46:49 GMT-0700 (Pacific Daylight Time)">06:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">right, I understand that that's where <code>is</code> came from</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Tue Oct 03 2023 23:50:11 GMT-0700 (Pacific Daylight Time)">06:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">the irony is that a <code>match</code> statement creates a clearly delineated space in which new stuff can exist without threatening old stuff</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Tue Oct 03 2023 23:57:37 GMT-0700 (Pacific Daylight Time)">06:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">as soon as you spill out of those braces and introduce patterns as a first-class concept, we now have to worry about interactions of patterns with literally everything else in the language, which is a <em>gigantic</em> expansion of scope</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Wed Oct 04 2023 00:15:51 GMT-0700 (Pacific Daylight Time)">07:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">this means that it's now far harder to reason about the totality of implications at hand, and I'm not totally clear whether SM is supportive of the place we've ended up, even if they encouraged proceeding in this general direction</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Wed Oct 04 2023 00:20:04 GMT-0700 (Pacific Daylight Time)">07:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell"><p>because I expressed this worry out loud to various people at plenary, and everyone I talked to made me feel like my worry was, if anything, tame</p>
<p>(tame, because what I'm trying so hard to protect is <em>existing JS</em>; I <em>am</em> supportive of having a <code>match</code> statement, which is not a given!)</p>
</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Wed Oct 04 2023 02:02:53 GMT-0700 (Pacific Daylight Time)">09:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i'm a bit confused about the implication of "protecting"; nothing we do here will break existing JS, it's just about existing developers' expectations and intuition, and the likelihood of bugs in both use and refactors, no?</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Wed Oct 04 2023 09:02:36 GMT-0700 (Pacific Daylight Time)">16:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">just a meta-comment: i would say currently SpiderMonkey as a whole does not have a fully formed position; I've been attending the meeting to try to provide early forms of feedback such that if we do ultimately conclude we support the proposal, we think the proposal will be in a shape that we can implement with less challenges. As the PR comes together, I'll eventually try to get more of the team to sit down and actually ponder the proposal in more detail. 

My -personal- feelings are extremely mixed here. Interaction with the champions group has generally helped convince me of various pieces, but my natural inclination tends much closer to r.kirsling. </td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Wed Oct 04 2023 09:50:41 GMT-0700 (Pacific Daylight Time)">16:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Seems like we're only looking for people to nod and agree</blockquote></mx-reply>This is an extremely bad read of our response to your feedback. I'm not sure how to restate it; I think I've been as clear as possible that your feedback was acknowledged, but we decided not to take action on it, and I gave the exact reasons why we decided that. I understand if you <em>disagree</em> with our conclusion, but casting that as us <em>ignoring</em> your feedback is simple wrong, and frankly a bit insulting. I'm not sure how I'm supposed to accept your feedback if the only allowed response is "we agree completely and have changed the proposal accordingly".</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Wed Oct 04 2023 09:51:31 GMT-0700 (Pacific Daylight Time)">16:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">And if you think I'm not being kind with that interpretation of your statements, well, same.</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Wed Oct 04 2023 09:58:52 GMT-0700 (Pacific Daylight Time)">16:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">I understand the frustration of being a dissenter among a group of supporters, but that is still a valuable position to take. But this proposal has been pulled in many, many directions by various people over the year+ it's been worked on; it absolutely can't satisfy everyone, and there are <em>strictly contradictory</em> desires for how it should look among the champions. We'll end up with something that will make everyone at least slightly unhappy vs their ideal version, guaranteed, but with luck we'll all be overall satisfied with the results.</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Wed Oct 04 2023 10:00:45 GMT-0700 (Pacific Daylight Time)">17:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">(Like, I still feel <em>very</em> strongly that losing <code>${...}</code> patterns is a big blow; it prevents us from generating on-the-fly matchers like <code>${caseless("foo-bar")}</code> to match the string "foo-bar" ignoring ascii case. Currently we can only dynamically generate matchers <em>if they're expressible as a regex literal</em>, which is is a funky restriction. But enough people pushed back on this that I dropped it for now; the rest of the proposal is still valuable and powerful and we can always revisit this in the future.)</td></tr>

</tbody></table></div></div></div>
</body></html>