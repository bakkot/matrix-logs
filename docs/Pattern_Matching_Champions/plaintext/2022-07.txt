2022-07-05
[19:10:40.0385] <Jack Works>
should we try to advance to stage 2? next meeting only have 5 days to the deadline

[08:00:48.0533] <ljharb>
that would be great if we have sufficient spec text

[09:06:05.0541] <Jack Works>
> <@jackworks:matrix.org> Missing parts:
> Static Semantics (including early errors, BoundName stuff)
> @@matcher
> Builtin matchers

ðŸ‘†

[09:06:45.0103] <Jack Works>
but I guess built-in matchers will be hard to specify

[09:30:42.0169] <ljharb>
i don't think most of them will be

[09:31:08.0949] <ljharb>
eg, Boolean's matcher is "does it have a [[BooleanData]] internal slot", etc

[09:31:22.0492] <ljharb>
the only one that's tricky will be the error subclasses, because those will be like "has a [[ErrorData]] internal slot, and also "constructor is %TypeError%" or something

[09:31:38.0476] <Jack Works>
brand check is a big topic in tc39

[09:31:49.0650] <ljharb>
we do brand checks all over the place

[09:32:13.0854] <ljharb>
 * the only one that's tricky will be the error subclasses, because those will be like "has a [[ErrorData]] internal slot, and also "constructor is %TypeError%" or something

[09:32:20.0329] <ljharb>
like, a ton of places

[09:39:09.0672] <Jack Works>
Do we have a list of early errors? 

[09:41:26.0076] <ljharb>
"everything that's invalid syntax" :-p i don't think we made a concrete list

[09:59:27.0148] <Jack Works>
> <@ljharb:matrix.org> "everything that's invalid syntax" :-p i don't think we made a concrete list

I mean, for example, the top level identifier pattern can only appear at most once and at the end

[10:00:07.0139] <ljharb>
that's probably one of the few that we're artificially applying (as opposed to, falls out of the syntax)


2022-07-06
[06:52:00.0177] <Jack Works>
ðŸ‘€ we only have 3 days until deadline. do we want to advance it?

[07:53:26.0816] <ljharb>
i still say yes :-) what more do we think we need in the spec text for it to be sufficient?

[07:57:52.0088] <Jack Works>
early errors. I think a non-normative list will be enough, we can normatively specify it later.

[09:10:38.0300] <ljharb>
what early errors are there besides the "fake else must be in the else position" one?

[09:14:30.0955] <Jack Works>
> <@ljharb:matrix.org> what early errors are there besides the "fake else must be in the else position" one?

I don't know, this is why I need help ðŸ˜‚

[09:15:06.0551] <ljharb>
lol

[09:15:13.0123] <ljharb>
maybe let's just make the list of 1 right now?

[09:15:22.0546] <ljharb>
the spec doesn't have to be perfect, just initial


2022-07-07
[22:47:49.0608] <Jack Works>
Oh I remember

[22:48:02.0216] <Jack Works>
pattern `a | b & c` is an early error

[02:38:37.0678] <Jack Works>
ok I believe the spec is mostly completed

[02:38:46.0616] <Jack Works>
added early errors & built-in matchers

[02:39:03.0330] <Jack Works>
https://tc39.es/proposal-pattern-matching/

[02:56:19.0410] <Jack Works>
The built in matchers are very problematic. I believe it will be a blocker of this proposal. 

[02:57:15.0229] <Jack Works>
Problems:
subclassing Error, Map, Array, Set
Promise
AsyncFunction/AsyncGeneratorFunction

[02:57:46.0044] <Jack Works>
Also, the wrapper object of primitive types

[07:14:11.0869] <ljharb>
subclasses will have the right internal slot

[07:14:20.0761] <ljharb>
as do boxed primitives

[07:14:24.0616] <ljharb>
* as do boxed primitives

[07:14:36.0938] <ljharb>
Iâ€™m not sure why itâ€™ll be difficult; Iâ€™ll try to make a PR today

[16:04:51.0519] <ljharb>
k, i've pushed up a bunch of spec fixes; i'm working on the builtin matchers now


2022-07-08
[20:44:56.0556] <ljharb>
i filed https://github.com/tc39/proposal-pattern-matching/pull/263 - i'm going to merge it later this evening if anyone wants to comment in the meantime, and then i'll file the relevant issues and add the agenda item for stage 2. (we can always retract the request later)

[22:22:35.0397] <ljharb>
ok - i've merged that PR, and updated https://github.com/tc39/proposal-pattern-matching/issues/175 to point to the 5 open questions, all of which i consider stage 2 concerns. there's 3 spec TODO comments for me that i'll get to in the coming days. If there's additional TODOs, please file an issue, or, push up an editor's emu-note with a TODO in it.

i've also added "pattern matching for stage 2" to the agenda with a 60 minute timebox, with me to present. Please directly push up a change to the agenda if you'd like to help me present, and please discuss here if the timebox should be longer or shorter.

[22:23:15.0488] <ljharb>
anyone who wants to volunteer to make the slides would also help me out; i'm much better at battledecks then i am at making content :-) (cc mpcsh)

[23:07:29.0811] <Jack Works>
> <@ljharb:matrix.org> i filed https://github.com/tc39/proposal-pattern-matching/pull/263 - i'm going to merge it later this evening if anyone wants to comment in the meantime, and then i'll file the relevant issues and add the agenda item for stage 2. (we can always retract the request later)

I see the new spec it's better!

[23:22:36.0186] <ljharb>
awesome, thanks!

[23:47:23.0123] <Jack Works>
I think we can reuse the slide last presented

[00:15:26.0558] <ljharb>
i was hoping so, with minor edits, and Iâ€™ll do that if nobody gives me anything better :-)

