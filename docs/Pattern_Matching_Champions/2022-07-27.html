<!DOCTYPE html><html><head>
  <title>Pattern Matching Champions on 2022-07-27</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "Pattern Matching Champions";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">Pattern Matching Champions<br>2022-07-27<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-07-26" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search Pattern Matching Champions">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Jul 26 2022 17:09:19 GMT-0700 (Pacific Daylight Time)">00:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">(Or accommodate let-when now; it looks cool and the semantics seem pretty trivial (just don't leak bindings out of the pattern). It would mean a bigger feature, by definition, but if it helps motivate the layering to make the feature <em>feel</em> like it's made of smaller bits, that's fine with me.)</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Jul 26 2022 17:42:40 GMT-0700 (Pacific Daylight Time)">00:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> It does just keep boggling me that our proposal is more or less equivalent to the first three other pattern-matching features I could think of first but something about how we present it, I guess, keeps making people think it's uber-complicated.</blockquote></mx-reply>to be totally clear, I don't think it's complicated <em>as a pattern-matching construct</em>, I think the concern is with incorporating it into one's understanding of JS as a language</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Jul 26 2022 17:42:55 GMT-0700 (Pacific Daylight Time)">00:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">it would very much be <em>worse</em> if it were in strong conflict with prior art</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue Jul 26 2022 17:44:24 GMT-0700 (Pacific Daylight Time)">00:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">I guess? I don't see why JS is special here to have patterns be a foreign concept - every other language in our prior art list is more or less equivalent to JS (in the ways that are relevant here) and incorporate patterns (generally with extremely similar pattern syntaxes) just fine.</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Tue Jul 26 2022 17:44:50 GMT-0700 (Pacific Daylight Time)">00:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">I mean, if people believe that other language's pattern-matching features are <em>also</em> overly-complex, then fair cop I guess, but I haven't been given that impression yet.</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Tue Jul 26 2022 17:45:55 GMT-0700 (Pacific Daylight Time)">00:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Reading between the lines of Yulia's proposal, it seems her objection is that the pattern syntax is special-cased to just the match expression, when it could be useful elsewhere - and that's some <em>very</em> reasonable feedback I'd like to incorporate, as I outlined above.</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Tue Jul 26 2022 17:46:43 GMT-0700 (Pacific Daylight Time)">00:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">tbh my biggest qualm was the pin operator and that's gone now so</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Tue Jul 26 2022 17:46:57 GMT-0700 (Pacific Daylight Time)">00:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Allowing a destructuring pattern to be followed by a <code>when(...)</code>, incorporating the pattern syntax into the destructuring syntax, sounds great and useful.</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Tue Jul 26 2022 17:47:07 GMT-0700 (Pacific Daylight Time)">00:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">I think <code>${}</code> is nicely javascripty</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Tue Jul 26 2022 17:49:00 GMT-0700 (Pacific Daylight Time)">00:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">And allowing <code>when()</code> to <em>be</em> a destructuring pattern on its own, to establish the bindings at that level (usable, then, as <code>let when(...) = x</code>, or in for-of, or in arglists) makes <em>even more</em> sense, since it's actually a new feature (<code>let x when(...) = x</code> is syntax sugar for <code>let x = match(x) { when(...): x; default: {} };</code> - I think it justifies itself on the saved syntax weight, but it is just sugar).</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Tue Jul 26 2022 17:51:54 GMT-0700 (Pacific Daylight Time)">00:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">(All this taken straight from Yulia's proposal, just with the assumption that we use the existing proposal's pattern syntax since it avoids the issues I pointed out.)</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Tue Jul 26 2022 18:09:44 GMT-0700 (Pacific Daylight Time)">01:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I have a few issues with the <code>let when</code> syntax, though I wrote that up in the gist I posted earlier. While I like the idea of composability, I find the specific syntax presented to be confusing in places as it doesn't align with existing JS syntax.</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Tue Jul 26 2022 18:15:52 GMT-0700 (Pacific Daylight Time)">01:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> And allowing <code>when()</code> to <em>be</em> a destructuring pattern on its own, to establish the bindings at that level (usable, then, as <code>let when(...) = x</code>, or in for-of, or in arglists) makes <em>even more</em> sense, since it's actually a new feature (<code>let x when(...) = x</code> is syntax sugar for <code>let x = match(x) { when(...): x; default: {} };</code> - I think it justifies itself on the saved syntax weight, but it is just sugar).</blockquote></mx-reply>This desugaring is something I'm concerned about. It seems to work fine for <code>let x when... </code> and <code>let { x } when...</code>, but doesn't work with <code>let [x] when...</code>. I'd much rather we throw an error in the <code>default:</code> case</td></tr>

</tbody></table></div></div></div>
</body></html>