<!DOCTYPE html><html><head>
  <title>Pattern Matching Champions on 2024-09-25</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "Pattern Matching Champions";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">Pattern Matching Champions<br>2024-09-25<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2024-09-24" class="nav-link"><span>prev</span></a>
<a href="2024-09-26" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search Pattern Matching Champions">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Sep 24 2024 17:46:33 GMT-0700 (Pacific Daylight Time)">00:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">My preference was to drop it, I'm not sure where others stand</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Sep 24 2024 18:06:43 GMT-0700 (Pacific Daylight Time)">01:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">aight, first draft is <a href="https://docs.google.com/presentation/d/1ckdNcRpzMB7oV91k98gNkXxVtwkzqIv0vALPffSaU44/edit?usp=sharing">https://docs.google.com/presentation/d/1ckdNcRpzMB7oV91k98gNkXxVtwkzqIv0vALPffSaU44/edit?usp=sharing</a></td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Sep 24 2024 18:06:50 GMT-0700 (Pacific Daylight Time)">01:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">i'm assuming "no <code>when</code>"</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue Sep 24 2024 18:12:22 GMT-0700 (Pacific Daylight Time)">01:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">new slogan: "no when, no how"</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Tue Sep 24 2024 21:25:13 GMT-0700 (Pacific Daylight Time)">04:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">my strong preference is to keep it</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Tue Sep 24 2024 21:25:24 GMT-0700 (Pacific Daylight Time)">04:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">explicit &gt; implicit</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Tue Sep 24 2024 21:25:48 GMT-0700 (Pacific Daylight Time)">04:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">but for stage 2 i'm content saying "we'll decide to keep or drop the <code>when</code> prefix before stage 2.7"</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Tue Sep 24 2024 21:26:33 GMT-0700 (Pacific Daylight Time)">04:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">slide 4, <code>undefined</code> literal - <code>null</code> is always a literal, no exceptions, no matter what we decide</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Tue Sep 24 2024 21:27:07 GMT-0700 (Pacific Daylight Time)">04:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">oh oof, we decided not to make undefined and the non-finites special?</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Tue Sep 24 2024 21:27:39 GMT-0700 (Pacific Daylight Time)">04:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">when you say <code>ident</code>, let's say <code>Identifier</code> in backticks, to be explicit about the grammar production</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Tue Sep 24 2024 21:28:48 GMT-0700 (Pacific Daylight Time)">04:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">for slide 6, falsiness implying "no match" is fine, and a <em>primitive</em> truthy value implying "match" is fine, but an object should be the <code>{ matched: boolean, value: unknown }</code> schema, yes?</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Tue Sep 24 2024 21:29:31 GMT-0700 (Pacific Daylight Time)">04:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">for slide 7, this is wrong - it needs to check for <code>Object(3)</code> - ie, boxed numbers - also, same for all primitive wrappers. <code>typeof</code> only detects primitives.</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Tue Sep 24 2024 21:30:39 GMT-0700 (Pacific Daylight Time)">04:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">slides 14 and 15 should reference caching, even though it's explained on slide 18</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Tue Sep 24 2024 21:30:44 GMT-0700 (Pacific Daylight Time)">04:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">globally, <code>s/falsey/falsy</code></td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Tue Sep 24 2024 21:32:33 GMT-0700 (Pacific Daylight Time)">04:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i'd love more elaboration on slide 17 also</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Tue Sep 24 2024 21:32:43 GMT-0700 (Pacific Daylight Time)">04:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">overall, awesome, this is a great first draft :-)</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Tue Sep 24 2024 21:44:12 GMT-0700 (Pacific Daylight Time)">04:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i'm assuming "no <code>when</code>"</blockquote></mx-reply>current spec is no when</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Tue Sep 24 2024 21:44:34 GMT-0700 (Pacific Daylight Time)">04:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">üëç</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Tue Sep 24 2024 21:44:49 GMT-0700 (Pacific Daylight Time)">04:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Examples in the readme are still all over, wasn't 100% sure</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Tue Sep 24 2024 21:44:52 GMT-0700 (Pacific Daylight Time)">04:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">I'll fix</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Tue Sep 24 2024 21:47:03 GMT-0700 (Pacific Daylight Time)">04:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> for slide 6, falsiness implying "no match" is fine, and a <em>primitive</em> truthy value implying "match" is fine, but an object should be the <code>{ matched: boolean, value: unknown }</code> schema, yes?</blockquote></mx-reply>Nah, remember we changed the model to let you tell which mode you're in (bool or arglist); in the bool mode it's just being a bool that matters, and in the list mode we expect a list but allow for bools</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Tue Sep 24 2024 21:47:32 GMT-0700 (Pacific Daylight Time)">04:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">hm, ok</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Tue Sep 24 2024 21:49:09 GMT-0700 (Pacific Daylight Time)">04:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> slide 4, <code>undefined</code> literal - <code>null</code> is always a literal, no exceptions</blockquote></mx-reply>currently in the spec, <code>undefined</code> is not a literal, it will find the "undefined" variable which might be shadowed. if we have concensus that this should not be like this, plz open an issue and I'll fix the spec</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Tue Sep 24 2024 21:50:05 GMT-0700 (Pacific Daylight Time)">04:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">originally we had <code>undefined</code>, <code>Infinity</code>, and <code>NaN</code> as "special", where they'd never be identifiers and always refer to the intuitive values</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Tue Sep 24 2024 21:51:29 GMT-0700 (Pacific Daylight Time)">04:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><blockquote><p>Any non-reserved ident sequence, with dots and/or square brackets.</p></blockquote><p>We have a little bit more than that. <code>this</code>, <code>MetaProperty</code>, <code>super</code> and <code>PrivateIdentifier</code> can also involve this. (see <code>PatternMatchingMemberExpression</code>)</p></td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Tue Sep 24 2024 21:54:00 GMT-0700 (Pacific Daylight Time)">04:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><p>slide 6</p><blockquote><p>Function is invoked with (subject, {matchType:‚Äúboolean‚Äù}).</p></blockquote><p>it's <code>f(subject, hint, receiver)</code> right now. e.g. <code>f(subject, "boolean", thisValue)</code></p></td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Tue Sep 24 2024 21:55:20 GMT-0700 (Pacific Daylight Time)">04:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">slide 7: actually we unbox boxed primitives (<a href="https://tc39.es/proposal-pattern-matching/#sec-number-%symbol.custommatcher%">https://tc39.es/proposal-pattern-matching/#sec-number-%symbol.custommatcher%</a> )</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Tue Sep 24 2024 21:56:51 GMT-0700 (Pacific Daylight Time)">04:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">side 8: I think it's better to add <code>hint, receiver</code> to match the spec <a href="https://tc39.es/proposal-pattern-matching/#sec-function.prototype-%symbol.custommatcher%">https://tc39.es/proposal-pattern-matching/#sec-function.prototype-%symbol.custommatcher%</a></td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Tue Sep 24 2024 22:06:47 GMT-0700 (Pacific Daylight Time)">05:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><blockquote><p>If return value is <code>true</code> (not truthy!), same as returning <code>[]</code>.</p></blockquote><p>slide 16. we don't have this in the spec, and I think this behavior might be a footgun. if a function returns <code>true</code>, you should use it like <code>f: ...</code>. Use it like <code>f(...): ...</code> is always an error</p><p>current in spec: <a href="https://tc39.es/proposal-pattern-matching/#sec-invoke-custom-matcher">https://tc39.es/proposal-pattern-matching/#sec-invoke-custom-matcher</a></p></td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Tue Sep 24 2024 22:10:28 GMT-0700 (Pacific Daylight Time)">05:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">I see the example of this in slide 17. it might be OK if it looks better, but still, it's not in the spec. please open an issue if we think this is OK and I'll add it into the spec.</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Wed Sep 25 2024 09:20:56 GMT-0700 (Pacific Daylight Time)">16:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Oh, that's definitely been explicitly discussed in the past.</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Wed Sep 25 2024 09:21:28 GMT-0700 (Pacific Daylight Time)">16:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">But hm, I'm probably fine with restricting it.</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Wed Sep 25 2024 10:10:12 GMT-0700 (Pacific Daylight Time)">17:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i'd love more elaboration on slide 17 also</blockquote></mx-reply>What sort of elaboration are you thinking of? In the slide itself (there's not really much space) or just in speaker notes?</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Wed Sep 25 2024 10:10:55 GMT-0700 (Pacific Daylight Time)">17:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">like "matches" and "doesn't match", i'm pretty confused about why some of those are</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Wed Sep 25 2024 10:44:41 GMT-0700 (Pacific Daylight Time)">17:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Okay, I've addressed all of the feedback.</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Wed Sep 25 2024 10:45:03 GMT-0700 (Pacific Daylight Time)">17:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">ljharb</span>: I've rewritten slide 17 a decent bit, is it clearer or do you still want more details in the notes?</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Wed Sep 25 2024 10:46:38 GMT-0700 (Pacific Daylight Time)">17:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Now let me go rewrite the README, it's so inconsistent with both itself and the spec text proposal</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Wed Sep 25 2024 10:57:46 GMT-0700 (Pacific Daylight Time)">17:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">so why does <code>Option.Some</code> match 5, but <code>Option.some()</code> does not?</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Wed Sep 25 2024 10:58:25 GMT-0700 (Pacific Daylight Time)">17:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">also, in the second example, what happens with <code>Option.None(undefined)</code>? is that different than <code>Option.None()</code>?</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Wed Sep 25 2024 11:02:58 GMT-0700 (Pacific Daylight Time)">18:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell"><code>Option.Some</code> is doing a boolean check - per the impl, it just verifies the type is right (which is the expected pattern for most custom matchers in boolean context). Option.Some() is doing a list check - the impl returns a <code>[s.v]</code> array, and the arglist (equivalent to a <code>[]</code> matcher) doesn't match it.</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Wed Sep 25 2024 11:04:03 GMT-0700 (Pacific Daylight Time)">18:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Similarly, <code>Option.None(undefined)</code> wouldn't match, because the impl returns a <code>[]</code> value, which doesn't match a <code>[undefined]</code> pattern.</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Wed Sep 25 2024 12:41:14 GMT-0700 (Pacific Daylight Time)">19:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>Slide 4: use of <code>-</code> as separator in</p>
<blockquote>
<p>0/+0/-0 only exception - 0 compares with SameValueZero</p>
</blockquote>
<p>Is mildly confusing as it could be read as <code>-0</code>. I suggest changing this to an em-dash or using <code>:</code></p>
</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Wed Sep 25 2024 12:44:15 GMT-0700 (Pacific Daylight Time)">19:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> originally we had <code>undefined</code>, <code>Infinity</code>, and <code>NaN</code> as "special", where they'd never be identifiers and always refer to the intuitive values</blockquote></mx-reply>I'm not a fan of changing scoping semantics to be out of line from the rest of the language as it breaks intuition in other ways and prevents host emulation (i.e., what if someone wants to create a <code>Compartment</code> that replaces the global <code>Infinity</code> or <code>NaN</code> in some fashion).</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Wed Sep 25 2024 12:46:12 GMT-0700 (Pacific Daylight Time)">19:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">aha ok thanks</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Wed Sep 25 2024 12:46:41 GMT-0700 (Pacific Daylight Time)">19:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i think that's a weirdness of extractors then, that only adding <code>()</code> drastically changes the meaning of the pattern, but i suppose it's true in JS too</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Wed Sep 25 2024 12:50:24 GMT-0700 (Pacific Daylight Time)">19:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Not a weirdness, IMO. To extract you must have something to destructure and match against. <code>foo is Bar()</code> would expect the custom match result to yield zero elements, so <code>true</code> is not a reasonable result to match against.</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Wed Sep 25 2024 12:54:12 GMT-0700 (Pacific Daylight Time)">19:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">TabAtkins</span>: I'd recommend you move custom matcher slides closer to the end so that we don't end up stuck on that topic before we've provided context about the rest of the pattern syntax and matching behavior. If you want to reference how <code>match (x) { Number: ... }</code> works, I'd do it in a more hand-wavy way and just say that we'll come back to that later in the slides.</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Wed Sep 25 2024 13:06:33 GMT-0700 (Pacific Daylight Time)">20:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>IMO, a good topic order for these slides might be:</p>
<ol>
<li><code>match</code> syntax overview</li>
<li>Literal constant patterns (i.e., "Primitive Patterns")</li>
<li>Reference patterns (variable references and member references)</li>
<li>Object patterns</li>
<li>Array patterns</li>
<li>Discards/<code>void</code> patterns</li>
<li>Extractors</li>
<li>Combinator patterns (and/or/not/parens)</li>
<li>Variable declaration patterns (i.e., <code>let</code>/<code>const</code>/<code>var</code>) - calling them "Binding Patterns" is mildly confusing as JS already has something else called a binding pattern</li>
<li><code>if</code> patterns</li>
<li>Semantics of custom matchers</li>
<li>Future syntax</li>
</ol>
<p>This order progressively builds in complexity while leveraging key information from previous slides. For example <code>if</code> patterns really need <code>and</code> to be meaningful. Oftentimes, so do <code>let</code> patterns.</p>
</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Wed Sep 25 2024 13:09:25 GMT-0700 (Pacific Daylight Time)">20:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">On slide 20, you have <code>match (Option.Some(5))</code> and <code>match (Option.None())</code>. Since you have defined these as <code>class</code> definitions, these examples would throw at runtime. They should read <code>match (new Option.Some(5))</code> and <code>match (new Option.None())</code>. the latter of which is somewhat unfortunate since you only really want a singleton instance of <code>None</code>.</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Wed Sep 25 2024 13:13:51 GMT-0700 (Pacific Daylight Time)">20:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Also, the definition itself throws at runtime because you don't call <code>super()</code>.</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Wed Sep 25 2024 13:14:07 GMT-0700 (Pacific Daylight Time)">20:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>IMO, a good topic order for these slides might be:</p>
<ol>
<li><code>match</code> syntax overview</li>
<li>Literal constant patterns (i.e., "Primitive Patterns")</li>
<li>Reference patterns (variable references and member references)</li>
<li>Object patterns</li>
<li>Array patterns</li>
<li>Discards/<code>void</code> patterns</li>
<li>Extractors</li>
<li>Combinator patterns (and/or/not/parens)</li>
<li>Variable declaration patterns (i.e., <code>let</code>/<code>const</code>/<code>var</code>) - calling them "Binding Patterns" is mildly confusing as JS already has something else called a binding pattern</li>
<li><code>if</code> patterns</li>
<li>Semantics of custom matchers</li>
<li>Future syntax</li>
</ol>
<p>This order progressively builds in complexity while leveraging key information from previous slides. For example <code>if</code> patterns really need <code>and</code> to be meaningful. Oftentimes, so do <code>let</code> patterns.</p>
</blockquote></mx-reply>Makes sense, especially since the current custom matcher slides end up having to care about the extractor details too.</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Wed Sep 25 2024 13:16:36 GMT-0700 (Pacific Daylight Time)">20:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Tho I think variable declarations needs to be earlier; I need them in several other examples. I think the use of combinators is obvious enough to use them ahead of time without comment.</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Wed Sep 25 2024 13:20:40 GMT-0700 (Pacific Daylight Time)">20:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>Here's another way to write <code>Option</code> that lets you avoid having to write <code>new</code> in the <code>match</code> examples:</p>
<pre><code class="language-js">class Option {
    static #none = new this();
    #value;
    constructor(value) { this.#value = value; }
    static Some(value) { return new Option(value); }
    static None() { return Option.#none; }
    static {
        this.Some[Symbol.customMatcher] = function (s, hint) {
            if (s &amp;&amp; #value in s &amp;&amp; s !== Option.#none) {
                return hint === "boolean" ? true : [s.#value];
            }
            return false;
        };
        this.None[Symbol.customMatcher] = function (s, hint) {
            if (s === Option.#none) {
                return hint === "boolean" ? true : [];
            }
            return false;
        };
    }
}
</code></pre>
</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Wed Sep 25 2024 13:29:33 GMT-0700 (Pacific Daylight Time)">20:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I think you should rename the "Variable Patterns" slide. You're using "Variable" here while talking about an <code>IdentifierReference</code>, while I'd more equate "Variable" to <code>let</code>/<code>const</code>/<code>var</code> patterns</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Wed Sep 25 2024 13:30:45 GMT-0700 (Pacific Daylight Time)">20:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">IMO, "Reference Patterns" is probably a more correct description for the audience since it involves multiple things that produce the <code>Reference Record</code> specification type (identifier references and property references)</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Wed Sep 25 2024 13:42:37 GMT-0700 (Pacific Daylight Time)">20:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">In slide 17 you say "specified length", which might be conflated with <code>array.length</code>. I'd suggest you either use "same number of elements" and "match the corresponding elements" or something to the effect of "Matches if the sub-patterns match corresponding elements in the subject, with no more and no fewer elements".</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Wed Sep 25 2024 13:45:06 GMT-0700 (Pacific Daylight Time)">20:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">In slide 18, you say "Not strict" but I think "Not exhaustive" might be better given that "strict" has other connotations in JS.</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Wed Sep 25 2024 13:47:05 GMT-0700 (Pacific Daylight Time)">20:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Also, as mentioned above, in slide 19 "Extractor Patterns", <code>true</code> is not the same as <code>[]</code>. Honestly I'd rather a custom matcher throw if you use it as an extractor and it wasn't written to be used in that fashion.</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Wed Sep 25 2024 13:49:32 GMT-0700 (Pacific Daylight Time)">20:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">On Slide 21 "Caching of Subject Parts", you have "Object patterns similar cache". I think you meant "similarly", but I would just remove the word altogether.</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Wed Sep 25 2024 13:52:01 GMT-0700 (Pacific Daylight Time)">20:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Makes sense, especially since the current custom matcher slides end up having to care about the extractor details too.</blockquote></mx-reply>thinking about it, you mention combinators when talking about caching. It might be better to move combinators up before object and array patterns since you can use examples like <code>"apple" or "banana"</code> without needing to dig into other complexity.</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Wed Sep 25 2024 13:56:46 GMT-0700 (Pacific Daylight Time)">20:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">For example, you can describe <code>or</code> simply with <code>"apple" or "banana"</code>, <code>not</code> simply with <code>not String</code>, and <code>and</code> simply by building on <code>not</code> with <code>String and not "apple"</code></td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Wed Sep 25 2024 14:00:00 GMT-0700 (Pacific Daylight Time)">21:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">We may also want to describe <code>or</code>, <code>and</code>, and <code>not</code> as "Disjunction", "Conjunction", and "Negation" patterns, but that's my personal preference.</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Wed Sep 25 2024 14:00:17 GMT-0700 (Pacific Daylight Time)">21:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">And "Parentheses" as "Grouping Patterns"</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Wed Sep 25 2024 14:01:21 GMT-0700 (Pacific Daylight Time)">21:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Also, "Comparison Patterns" might be more aptly described as "Relational Patterns" as they mostly cover relational expressions and that is what is often used as the terminology in prior art.</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Wed Sep 25 2024 14:07:55 GMT-0700 (Pacific Daylight Time)">21:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">In "Compact Object Pattern Cases", I'm not bullish on <code>{ a }</code> meaning "equivalent to <code>{ a: void }</code>" as that would break from how shorthand assignments work in object literals, assignment patterns, and binding patterns. One might expect <code>{ a }</code> to mean <code>{ a: a }</code>, just as <code>{ let a }</code> means <code>{ a: let a }</code>. It may not be convenient, but it would be consistent.</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Wed Sep 25 2024 14:25:19 GMT-0700 (Pacific Daylight Time)">21:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I'm not a fan of changing scoping semantics to be out of line from the rest of the language as it breaks intuition in other ways and prevents host emulation (i.e., what if someone wants to create a <code>Compartment</code> that replaces the global <code>Infinity</code> or <code>NaN</code> in some fashion).</blockquote></mx-reply>anybody who wants to change the meaning of those things is a bad person and should feel bad</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Wed Sep 25 2024 14:26:27 GMT-0700 (Pacific Daylight Time)">21:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">like i can't even conceive of a valid use case for it</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Wed Sep 25 2024 14:28:20 GMT-0700 (Pacific Daylight Time)">21:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Maybe so, but we still shouldn't break lexical scoping behavior for one feature, that just makes things more complex and a source of confusion for users. If its a bad enough problem that it needs fixing, we should find a way to fix it consistently.</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Wed Sep 25 2024 14:28:59 GMT-0700 (Pacific Daylight Time)">21:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">in general i'm in favor of consistency, but just like with coercion, and a number of other things, we shouldn't keep making new things bad just because we can't fix the existing badness</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Wed Sep 25 2024 14:29:44 GMT-0700 (Pacific Daylight Time)">21:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">it would make things more complex for engines and tooling, surely. but i do not believe it'd confuse anyone (the ability to redefine them is what's confusing)</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Wed Sep 25 2024 14:30:35 GMT-0700 (Pacific Daylight Time)">21:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">This one seems like borrowing trouble. If no one is shadowing <code>undefined</code>, <code>Infinity</code>, and <code>NaN</code> today because its a bad practice, then fixing this here does nothing. If people are shadowing those things, then shame on them for doing that and we shouldn't go out of our way to fix it for that narrow case.</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Wed Sep 25 2024 14:31:50 GMT-0700 (Pacific Daylight Time)">21:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">If they're shadowing for a reason, then don't break that reasoning. If they're shadowing by mistake, then they will likely have other problems besides <code>match</code>. Its just not worth borrowing trouble, IMO.</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Wed Sep 25 2024 14:32:08 GMT-0700 (Pacific Daylight Time)">21:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">it's not just about them tho</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Wed Sep 25 2024 14:32:24 GMT-0700 (Pacific Daylight Time)">21:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">basically every application runs third-party code. that code could mistakenly or intentionally redefine those things.</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Wed Sep 25 2024 14:33:13 GMT-0700 (Pacific Daylight Time)">21:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">that's more of an argument for sandboxing and <code>Compartment</code> than it is for changing behavior here.</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Wed Sep 25 2024 14:39:26 GMT-0700 (Pacific Daylight Time)">21:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">We could always investigate specifying <code>undefined</code>, <code>Infinity</code>, and <code>NaN</code> as immutable globals. No package that redeclares them with a value that isn't the original value is likely to be doing anything good. That would address the global concern, and third party code can't shadow a global in your own code, aside from <code>eval</code>.</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Wed Sep 25 2024 14:40:59 GMT-0700 (Pacific Daylight Time)">21:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">true</td></tr>

</tbody></table></div></div></div>
</body></html>