<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>TC39 Test262 Maintainers on 2026-02-11</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "TC39 Test262 Maintainers";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">TC39 Test262 Maintainers<br>2026-02-11<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2026-02-09" class="nav-link"><span>prev</span></a>
<a href="2026-02-12" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search TC39 Test262 Maintainers">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed Feb 11 2026 04:13:17 GMT-0800 (Pacific Standard Time)">12:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@caiolima:igalia.com">Caio Lima</span>&gt;</div></td><td class="msg-cell">Hi all, I just opened a PR to test Promise.prototype pollution combined with <code>import.defer</code> here <a href="https://github.com/tc39/test262/pull/4918">https://github.com/tc39/test262/pull/4918</a>. It still need to be discussed on plenary, but I'd like to get some early feedback from you regarding the way I'm testing <code>Promise.prototype.then</code> there, since I'm feeling it's a bit hacky right now. Since I'm polluting <code>.then</code>, If I do <code>import.defer(...).then(ns =&gt; { ... })</code>, this will cause the new defined <code>.then</code> function to be called and it will increase <code>thenCallCount</code>. Because of this, I took the direction to save built-in <code>Promise.prototype.then</code> to <code>originalThen</code> and use <code><a href="http://originalThen.call">originalThen.call</a></code> to chain promises. I can think in a couple of alternatives for it, like checking if <code>thenCount == 1</code> and keep using <code>.then</code>, or having a <code>Promise.prototype.originalThen</code>, to avoid <code><a href="http://originalThen.call">originalThen.call</a></code>. Do you have an opinion about it?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Feb 11 2026 13:00:39 GMT-0800 (Pacific Standard Time)">21:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">IMO each test file can basically pollute whatever it wants, the priority should be on making the test understandable (for reviewers, and for implementations debugging why it doesn't pass) and removing as much complexity as possible (less code, fewer hidden bugs)</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed Feb 11 2026 14:29:17 GMT-0800 (Pacific Standard Time)">22:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">personally i would <em>prefer</em> if each file cleaned up after itself, and i think that's much better for test design. however, that is extremely not the case rn and so it's fine.</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Feb 11 2026 14:32:07 GMT-0800 (Pacific Standard Time)">22:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">Yeah, I try to make sure that any new tests that I add, clean up after themselves</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Feb 11 2026 14:32:44 GMT-0800 (Pacific Standard Time)">22:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">But as for what exactly gets polluted in what way, you have free rein</td></tr>

</tbody></table></div></div></div>
</body></html>