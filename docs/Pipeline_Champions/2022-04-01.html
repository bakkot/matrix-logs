<!DOCTYPE html><html><head>
  <title>Pipeline Champions on 2022-04-01</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "Pipeline Champions";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">Pipeline Champions<br>2022-04-01<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-03-31" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search Pipeline Champions">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Fri Apr 01 2022 07:56:43 GMT-0700 (Pacific Daylight Time)">14:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell"><p>There are vague future plans for object-literal decorators like <code>@(d) { x: 0 }</code>. So:</p>
<pre><code class="language-js">x |&gt; @(d)
{ x: 0 }
</code></pre>
<p>…also needs to be future proofed with an early error. We presumably should do the same with array literals. (And tuple/record literals when they come.)</p>
<p>Blocks are fine.</p>
<pre><code class="language-js">x |&gt; @(d)
{ 0 }
</code></pre>
<p>…only has one reasonable interpretation (as <code>x |&gt; @(d); { 0 }</code>).</p>
<p>I don’t think there’s anything else on the expression level that might get decorated…Maybe identifiers? Right now there are only plans for parameter identifiers so maybe we also ban this too:</p>
<pre><code class="language-js">x |&gt; @(d)
y
</code></pre>
<p>…or maybe ban any DecoratorList Expression immediately following <code>|&gt;</code>.</p></td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Fri Apr 01 2022 08:01:30 GMT-0700 (Pacific Daylight Time)">15:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">So the plan is to use a cover grammar ShortCircuitExpression <code>|&gt;</code> CoverPipeBodyOrDecoratedExpression. PipeBody is the usual. DecoratedExpression is something like DecoratorList Expression. It’s an early error if DecoratedExpression covers CoverPipeBodyOrDecoratedExpression.</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Fri Apr 01 2022 08:02:12 GMT-0700 (Pacific Daylight Time)">15:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">I have heard about obejct property decorators, but never about decorators for the whole object. It can just be a function call?</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Fri Apr 01 2022 08:02:31 GMT-0700 (Pacific Daylight Time)">15:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">Not sure. Take a look at <a href="https://github.com/tc39/proposal-decorators/blob/master/EXTENSIONS.md#object-literal-and-property-decorators-and-annotations">https://github.com/tc39/proposal-decorators/blob/master/EXTENSIONS.md#object-literal-and-property-decorators-and-annotations</a>.</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Fri Apr 01 2022 08:04:00 GMT-0700 (Pacific Daylight Time)">15:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@pokute:matrix.org">pokute</span>&gt;</div></td><td class="msg-cell">It feels a bit that pipeline is taking into account other possible proposals in a way that many other proposals don't.</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Fri Apr 01 2022 08:04:51 GMT-0700 (Pacific Daylight Time)">15:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">Since (if?) we’re going with <code>@</code> as the topic reference, I think it’s reasonable to try to future proof against any potential future conflict with future decorator extensions.</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Fri Apr 01 2022 08:05:03 GMT-0700 (Pacific Daylight Time)">15:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">The only proposal that that pipe has to be careful about is decorators.</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Fri Apr 01 2022 08:05:39 GMT-0700 (Pacific Daylight Time)">15:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@pokute:matrix.org">pokute</span>&gt;</div></td><td class="msg-cell">It though that we have to be careful about infix operators too.</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Fri Apr 01 2022 08:05:51 GMT-0700 (Pacific Daylight Time)">15:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">(…Well, I guess there’s the dataflow stuff in general. Like how pipe will not advance unless bind-this advances. But I’m talking about syntax only.)</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Fri Apr 01 2022 08:06:27 GMT-0700 (Pacific Daylight Time)">15:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> It though that we have to be careful about infix operators too.</blockquote></mx-reply>I don’t think we have to be careful about future non-identifier infix operators. It’s future infix operators that have to be careful of pipe (or specifically of the <code>@</code> topic). And those future proposals will be able to use some simple lookahead rules when they get proposed (<a href="https://github.com/tc39/proposal-pipeline-operator/issues/91#issuecomment-1085006912">https://github.com/tc39/proposal-pipeline-operator/issues/91#issuecomment-1085006912</a>), and it should be fine.</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Fri Apr 01 2022 08:08:20 GMT-0700 (Pacific Daylight Time)">15:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">I wish we could just ban ASI after pipes</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Fri Apr 01 2022 08:08:34 GMT-0700 (Pacific Daylight Time)">15:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">If that would be enough</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Fri Apr 01 2022 08:09:09 GMT-0700 (Pacific Daylight Time)">15:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">I’ll think about if we can do that instead.</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Fri Apr 01 2022 08:10:04 GMT-0700 (Pacific Daylight Time)">15:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">But the problem isn’t that ASI is happening. It’s that developers might expect ASI to happen when it wouldn’t.</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Fri Apr 01 2022 08:10:59 GMT-0700 (Pacific Daylight Time)">15:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell"><pre><code class="language-js">x |&gt; @(d)
class C {}
</code></pre>
<p>Here, ASI would <em>not</em> happen. It would be equivalent to:</p>
<pre><code class="language-js">x |&gt; (@(d) class C {})
</code></pre>
<p>But a developer might expect ASI to happen, as if it were:</p>
<pre><code class="language-js">x |&gt; @(d); class C {}
</code></pre></td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Fri Apr 01 2022 08:11:48 GMT-0700 (Pacific Daylight Time)">15:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Well, that's the same expectation in
```
a = b
[c].map(f)
```</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Fri Apr 01 2022 08:12:06 GMT-0700 (Pacific Daylight Time)">15:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">If you use ASI, learn it and don't complain 🤷</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Fri Apr 01 2022 08:12:11 GMT-0700 (Pacific Daylight Time)">15:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">Yes, that is true, heh.</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Fri Apr 01 2022 08:12:26 GMT-0700 (Pacific Daylight Time)">15:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">But there is also future-proofing.</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Fri Apr 01 2022 08:12:36 GMT-0700 (Pacific Daylight Time)">15:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell"><pre><code class="language-js">x |&gt; @(d)
{ a: 0 }
</code></pre></td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Fri Apr 01 2022 08:12:54 GMT-0700 (Pacific Daylight Time)">15:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">ASI <em>does</em> happen…until object-literal decorators get added.</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Fri Apr 01 2022 08:12:55 GMT-0700 (Pacific Daylight Time)">15:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">We could ask to the other delegates if anyone feels like all those decorators extensions are a possibility on the future</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Fri Apr 01 2022 08:14:03 GMT-0700 (Pacific Daylight Time)">15:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">I think it’s reasonable to just ban PipeExpression : ShortCircuitExpression <code>|&gt;</code> DecoratorList Expression.<br>
Come to think of it, we probably don’t even need a cover grammar.</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Fri Apr 01 2022 08:14:30 GMT-0700 (Pacific Daylight Time)">15:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">That's a great idea</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Fri Apr 01 2022 08:15:21 GMT-0700 (Pacific Daylight Time)">15:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@pokute:matrix.org">pokute</span>&gt;</div></td><td class="msg-cell">That's always a pipe token, never decorator (missing parens I think)</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Fri Apr 01 2022 08:16:29 GMT-0700 (Pacific Daylight Time)">15:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I think it’s reasonable to just ban PipeExpression : ShortCircuitExpression <code>|&gt;</code> DecoratorList Expression.<br>
Come to think of it, we probably don’t even need a cover grammar.</blockquote></mx-reply><pre><code>PipeExpression :
  ShortCircuitExpression `|&gt;` PipeBody
  ShortCircuitExpression `|&gt;` DecoratorList [lookahead ∉ {`class`}] Expression
</code></pre>
<p>It is a Syntax Error if PipeBody covers DecoratorList <code>class</code> BindingIdentifier? ClassTail.<br>
It is a Syntax Error if PipeExpression covers ShortCircuitExpression <code>|&gt;</code> DecoratorList Expression.</p></td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Fri Apr 01 2022 08:17:20 GMT-0700 (Pacific Daylight Time)">15:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> That's always a pipe token, never decorator (missing parens I think)</blockquote></mx-reply>It is currently two statements because PipeBody will only parse up to a valid expression, and <code>@d { a: 0 }</code> is not a valid expression…until, in the future, they add object-literal decorators. Then <code>@d { a: 0 }</code> suddenly becomes a valid expression.</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Fri Apr 01 2022 08:18:09 GMT-0700 (Pacific Daylight Time)">15:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@pokute:matrix.org">pokute</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> It is currently two statements because PipeBody will only parse up to a valid expression, and <code>@d { a: 0 }</code> is not a valid expression…until, in the future, they add object-literal decorators. Then <code>@d { a: 0 }</code> suddenly becomes a valid expression.</blockquote></mx-reply>Aren't decorators illegal in pipe body unless inside parens?</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Fri Apr 01 2022 08:19:17 GMT-0700 (Pacific Daylight Time)">15:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@pokute:matrix.org">pokute</span>&gt;</div></td><td class="msg-cell">Or did I just mess up everything in my mind? :-)</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Fri Apr 01 2022 08:20:23 GMT-0700 (Pacific Daylight Time)">15:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Aren't decorators illegal in pipe body unless inside parens?</blockquote></mx-reply><p>Right now, the plan is:</p>
<pre><code class="language-js">x |&gt; @(foo) class { x = @ }
</code></pre>
<p>…is illegal.</p>
<pre><code class="language-js">x |&gt; (@(foo) class { x = @ })
</code></pre>
<p>…is legal.</p>
<pre><code class="language-js">x |&gt; (() =&gt; @(foo) class { x = @ })
</code></pre>
<p>…is legal.</p>
<pre><code class="language-js">x |&gt; do { @(foo) class { x = @ }; }
</code></pre>
<p>…is legal.</p></td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Fri Apr 01 2022 08:20:57 GMT-0700 (Pacific Daylight Time)">15:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">The plan is that, if PipeBody covers a decorated class, then it is an early error.</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Fri Apr 01 2022 08:21:43 GMT-0700 (Pacific Daylight Time)">15:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">But we also need to cover for future cases that are not yet covered by PipeBody because they are not yet valid expressions (like <code>@(foo) function () {}</code> or <code>@(foo) { a: 0 }</code>).</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Fri Apr 01 2022 08:22:21 GMT-0700 (Pacific Daylight Time)">15:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">And, as usual, developers should be discouraged from putting any decorators inside pipe bodies anyway…</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Fri Apr 01 2022 08:24:00 GMT-0700 (Pacific Daylight Time)">15:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@pokute:matrix.org">pokute</span>&gt;</div></td><td class="msg-cell">I would expect that <code>x |&gt; (@(d) { a: 0 })</code> to be a minimal valid usage.</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Fri Apr 01 2022 08:24:44 GMT-0700 (Pacific Daylight Time)">15:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@pokute:matrix.org">pokute</span>&gt;</div></td><td class="msg-cell">Could we expect that infix operators to always be in <code>x infixOp y</code> form and never in <code>x (infixOp) y</code>?</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Fri Apr 01 2022 08:25:27 GMT-0700 (Pacific Daylight Time)">15:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I would expect that <code>x |&gt; (@(d) { a: 0 })</code> to be a minimal valid usage.</blockquote></mx-reply>That would also be valid.</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Fri Apr 01 2022 08:25:31 GMT-0700 (Pacific Daylight Time)">15:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@pokute:matrix.org">pokute</span>&gt;</div></td><td class="msg-cell">Parens aren't really needed since you shouldn't ever use expressions as infix operators (IMO)</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Fri Apr 01 2022 08:26:36 GMT-0700 (Pacific Daylight Time)">15:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Could we expect that infix operators to always be in <code>x infixOp y</code> form and never in <code>x (infixOp) y</code>?</blockquote></mx-reply>Even if we added an <code>infixOp</code> (where <code>infixOp</code> is already a valid identifier), then we could just ban <code>@ infixOp operand</code>.</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Fri Apr 01 2022 08:27:46 GMT-0700 (Pacific Daylight Time)">15:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">Or, rather, we would make <code>@ infixOp operand</code> always mean a decorated operand, not “topic <code>infixOp</code> operand”.</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Fri Apr 01 2022 08:32:44 GMT-0700 (Pacific Daylight Time)">15:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> It feels a bit that pipeline is taking into account other possible proposals in a way that many other proposals don't.</blockquote></mx-reply>every proposal should, and I’m not aware of any that knowingly don’t</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Fri Apr 01 2022 08:32:49 GMT-0700 (Pacific Daylight Time)">15:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@pokute:matrix.org">pokute</span>&gt;</div></td><td class="msg-cell">Ok, here's another wild scenario that I haven't seen mentioned yet: <code>class foo extends Date |&gt; (@dateDecorator(@)) { ... }</code></td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Fri Apr 01 2022 08:33:35 GMT-0700 (Pacific Daylight Time)">15:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">~~That should just be <code>class foo extends (Date |&gt; (dateDecorator(@))) { … }</code>, unless I’m missing something.~~ I misread this example.</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Fri Apr 01 2022 08:33:35 GMT-0700 (Pacific Daylight Time)">15:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@pokute:matrix.org">pokute</span>&gt;</div></td><td class="msg-cell">Should this be possible, any problems?</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Fri Apr 01 2022 08:37:44 GMT-0700 (Pacific Daylight Time)">15:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@pokute:matrix.org">pokute</span>&gt;</div></td><td class="msg-cell">I've seen at least one person who's really interested in using pipelines in <code>extends</code> part and I don't recall anyone discussing it yet. Now when using <code>@</code> topic token, it would be better to probe if anyone can spot any problems arising due to decorators with it.</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Fri Apr 01 2022 08:39:34 GMT-0700 (Pacific Daylight Time)">15:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">I don’t think it should be a problem at all, but let us know if you find one.</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Fri Apr 01 2022 08:42:08 GMT-0700 (Pacific Daylight Time)">15:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@pokute:matrix.org">pokute</span>&gt;</div></td><td class="msg-cell">Actually, I think it probably is just impossible. I don't think <code>Date |&gt; (@dateDecorator(@))</code> is valid anyway.</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Fri Apr 01 2022 08:42:39 GMT-0700 (Pacific Daylight Time)">15:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">Oh wait, I misread your original example.</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Fri Apr 01 2022 08:42:41 GMT-0700 (Pacific Daylight Time)">15:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">Yes, that is not valid.</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Fri Apr 01 2022 08:42:54 GMT-0700 (Pacific Daylight Time)">15:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@pokute:matrix.org">pokute</span>&gt;</div></td><td class="msg-cell">Maybe <code>Date |&gt; dateDecorator(@)</code> is</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Fri Apr 01 2022 08:42:58 GMT-0700 (Pacific Daylight Time)">15:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">Because <code>@dateDecorator(Date)</code> is not an expression; it is a decorator.</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Fri Apr 01 2022 08:43:15 GMT-0700 (Pacific Daylight Time)">15:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">You would want <code>@(Date |&gt; dateDecorator(@))</code>.</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Fri Apr 01 2022 08:48:07 GMT-0700 (Pacific Daylight Time)">15:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@pokute:matrix.org">pokute</span>&gt;</div></td><td class="msg-cell">One possible partial solution would be to never allow decorator extensions proposals from using <code>@decoratorFun &lt;thing&gt;</code> for anything where <code>decoratorFun(&lt;thing&gt;)</code> works as ergonomically.</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Fri Apr 01 2022 08:48:59 GMT-0700 (Pacific Daylight Time)">15:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@pokute:matrix.org">pokute</span>&gt;</div></td><td class="msg-cell">&lt;thing&gt; that wouldn't support <code>@decoratorFun</code> could include object literal likes, arraylikes and functions.</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Fri Apr 01 2022 08:50:04 GMT-0700 (Pacific Daylight Time)">15:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@pokute:matrix.org">pokute</span>&gt;</div></td><td class="msg-cell">While code blocks &amp; do expressions would support <code>@decoratorFun { return 0; }</code></td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Fri Apr 01 2022 08:51:26 GMT-0700 (Pacific Daylight Time)">15:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@pokute:matrix.org">pokute</span>&gt;</div></td><td class="msg-cell">It might be that <code>@decoratorFun class ...</code> is already a precedent that makes this difficult.</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Fri Apr 01 2022 08:59:02 GMT-0700 (Pacific Daylight Time)">15:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@pokute:matrix.org">pokute</span>&gt;</div></td><td class="msg-cell">🚎 Maybe we could've forgotten the prefix decorators alltogether and instead have <code>class A { function b() {} |@&gt; methodDecorator } |@&gt; classDecorator</code>, but I guess we're too late.</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Fri Apr 01 2022 09:03:20 GMT-0700 (Pacific Daylight Time)">16:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@pokute:matrix.org">pokute</span>&gt;</div></td><td class="msg-cell">Alarmingly, it's starting to make more and more sense to me.</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Fri Apr 01 2022 09:46:14 GMT-0700 (Pacific Daylight Time)">16:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">FYI: <a href="https://github.com/tc39/proposal-pipeline-operator/pull/268">https://github.com/tc39/proposal-pipeline-operator/pull/268</a></td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Fri Apr 01 2022 09:50:41 GMT-0700 (Pacific Daylight Time)">16:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@rbuckton:matrix.org">rbuckton (OOF thru Apr. 1st)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> One possible partial solution would be to never allow decorator extensions proposals from using <code>@decoratorFun &lt;thing&gt;</code> for anything where <code>decoratorFun(&lt;thing&gt;)</code> works as ergonomically.</blockquote></mx-reply><code>@dec</code> and <code>@dec()</code> aren't synonymous. The 1st is a decorator, the 2nd is a decorator factory</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Fri Apr 01 2022 09:52:12 GMT-0700 (Pacific Daylight Time)">16:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@rbuckton:matrix.org">rbuckton (OOF thru Apr. 1st)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> 🚎 Maybe we could've forgotten the prefix decorators alltogether and instead have <code>class A { function b() {} |@&gt; methodDecorator } |@&gt; classDecorator</code>, but I guess we're too late.</blockquote></mx-reply>Please no</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Fri Apr 01 2022 09:56:35 GMT-0700 (Pacific Daylight Time)">16:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@rbuckton:matrix.org">rbuckton (OOF thru Apr. 1st)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> &lt;thing&gt; that wouldn't support <code>@decoratorFun</code> could include object literal likes, arraylikes and functions.</blockquote></mx-reply>Definitely want functions to work in the future. We spent multiple plenary meetings discussing the possibility of decorating many other things as well. I'd rather not have pipeline derail decorators, and I'm more and more concerned that using <code>@</code> is a very future hostile hazard considering the very valid use cases for decorated functions, structs, and enums (assuming the latter two also end up with expression forms), plus any other future syntax.</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Fri Apr 01 2022 09:57:37 GMT-0700 (Pacific Daylight Time)">16:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@rbuckton:matrix.org">rbuckton (OOF thru Apr. 1st)</span>&gt;</div></td><td class="msg-cell">This is making me less and less convinced that <code>@</code> is viable every time I think about it. It feels like we're cooking up future hazards for the convenience of a single character token. I'd rather see pipeline use <code>@@</code> or <code>##</code> than have this hazard</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Fri Apr 01 2022 10:01:03 GMT-0700 (Pacific Daylight Time)">17:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@pokute:matrix.org">pokute</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <code>@dec</code> and <code>@dec()</code> aren't synonymous. The 1st is a decorator, the 2nd is a decorator factory</blockquote></mx-reply>The latter example, <code>decoratorfun(&lt;thing&gt;)</code> was missing <code>@</code> deliberately. Admittedly I'm not sure if it would work the same during runtime for all those examples (object literals, functions) and whether engine implementors want to be sure that nothing can touch the intermediary form.</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Fri Apr 01 2022 10:01:05 GMT-0700 (Pacific Daylight Time)">17:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell"><p>Check the specification and see what you think. It has a bunch of future proofing that (hopefully) covers any possible decorator expression.</p>
<p>If you find a concerning example, then put it here and we’ll take a look.<br>Developers should not be putting decorators in pipes anyway.</p>
</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Fri Apr 01 2022 10:02:25 GMT-0700 (Pacific Daylight Time)">17:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@rbuckton:matrix.org">rbuckton (OOF thru Apr. 1st)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>Check the specification and see what you think. I think the future proofing should be okay.</p>
<p>If you find a concerning example, then put it here and we’ll take a look.<br>Developers should not be putting decorators in pipes anyway.</p></blockquote></mx-reply>I agree, but it's not the <em>intentional</em> use of decorators in pipes I'm worried about, it's the <em>unintentional</em> use.</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Fri Apr 01 2022 10:02:56 GMT-0700 (Pacific Daylight Time)">17:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@rbuckton:matrix.org">rbuckton (OOF thru Apr. 1st)</span>&gt;</div></td><td class="msg-cell">I'm in an airport now, I'll read through the spec tonight.</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Fri Apr 01 2022 10:03:53 GMT-0700 (Pacific Daylight Time)">17:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell"><p>The spec does also try to prevent unintentional use of decorators, making things like the following an early error:</p>
<pre><code class="language-js">// Syntax Error: Pipe body does not contain topic reference;
// pipe body cannot be unparenthesized decorated expression.
x |&gt; @(foo)
{ x: 0 };
</code></pre>
<p>Thank you for looking!</p>
</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Fri Apr 01 2022 10:14:13 GMT-0700 (Pacific Daylight Time)">17:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">rbuckton (OOF thru Apr. 1st)</span>: FYI, I just found a typo in the pull request; just force pushed, so go refresh in case you’re looking at it already.</td></tr>

</tbody></table></div></div></div>
</body></html>