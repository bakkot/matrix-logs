<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>TC39 Decimal_Amount on 2026-02-25</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "TC39 Decimal_Amount";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">TC39 Decimal_Amount<br>2026-02-25<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2026-02-24" class="nav-link"><span>prev</span></a>
<a href="2026-02-26" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search TC39 Decimal_Amount">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed Feb 25 2026 04:27:46 GMT-0800 (Pacific Standard Time)">12:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@eemeli:mozilla.org">eemeli</span>&gt;</div></td><td class="msg-cell"><p><span class="nick-11">Richard Gibson</span>: Just to make sure I understand <a href="https://github.com/tc39/proposal-intl-keep-trailing-zeros/pull/10#issuecomment-3949688212">this comment</a> right, do you mean that you'd prefer the following formatting results?</p>
<pre><code>let sf = new Intl.NumberFormat('en', { notation: 'scientific' })
sf.format('101')  // '1.01E2'
sf.format('100')  // '1E2'
sf.format('1.00') // '1.00E0'
</code></pre>
<p>If so, I don't think I agree, as I think the trailing zeros of <code>'100'</code> should also be retained. Note that this only affects formatting with scientific or engineering notation, as those are the only cases where we might end up formatting trailing zeros that are parts of the integer in the input as fractional zeros of the output.</p>
</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Feb 25 2026 08:25:21 GMT-0800 (Pacific Standard Time)">16:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@gibson042:matrix.org">Richard Gibson</span>&gt;</div></td><td class="msg-cell">yes, that is what I mean. There is ambiguity regarding zeros in <code>"100"</code>, but the conventions with which I'm familiar treat them as insignificant (as described in material from e.g. <a href="https://www.sigfigscalculator.com/articles/significant-figures-rules.php#title:~:text=Rule%204%20%2D%20final%20or%20trailing%20zeroes%20are%20significant%20only%20after%20a%20decimal%20point">Significant Figures Calculator</a>, <a href="https://ccnmtl.columbia.edu/projects/mmt/frontiers/web/chapter_5/6665.html#:~:text=Trailing%20zeros%20in%20a%20whole%20number%20with%20no%20decimal%20shown%20are%20NOT%20significant">Columbia University</a>, <a href="https://www.chem.tamu.edu/class/fyp/mathrev/mr-sigfg.html#:~:text=x%20102-,Trailing%20zeros%20are%20significant%20only%20if%20the%20decimal%20point%20is%20specified,-.">Texas A&amp;M University</a>, and <a href="https://en.khanacademy.org/science/grade-11-physics-snc-aligned/x1d0fed5276339e80:measurements/x1d0fed5276339e80:analyzing-accuracy-precision-and-derived-quantity-uncertainties/v/more-on-significant-figures">Khan Academy</a>)</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed Feb 25 2026 08:29:44 GMT-0800 (Pacific Standard Time)">16:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@gibson042:matrix.org">Richard Gibson</span>&gt;</div></td><td class="msg-cell">but further note that specific rules regarding disambiguation of trailing zeros are independent of the main point about how the spec should internally represent string-based decimals. Treating integer zeros as significant would change only the second data row of that table, from ["d₁…dₖ", x + s] (<em>d × 10^(x + s)</em>) to ["d₁…dₖ0₁…0ₛ", x] (<em>(d × 10^s) × 10^x</em>).</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Feb 25 2026 11:01:34 GMT-0800 (Pacific Standard Time)">19:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@eemeli:mozilla.org">eemeli</span>&gt;</div></td><td class="msg-cell"><p>While I agree that there is some ambiguity here, we do also have a convention on this directly within ECMA-262:</p>
<pre><code>(100).toPrecision(1) // '1e+2'
(100).toPrecision(3) // '100'
</code></pre>
<p>As I see it, we should follow the existing spec precedent, especially as this only impacts the results when formatting with scientific or engineering notation.</p>
</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Feb 25 2026 11:02:50 GMT-0800 (Pacific Standard Time)">19:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@gibson042:matrix.org">Richard Gibson</span>&gt;</div></td><td class="msg-cell">I don't think that is a relevant precedent</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Feb 25 2026 11:08:53 GMT-0800 (Pacific Standard Time)">19:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@eemeli:mozilla.org">eemeli</span>&gt;</div></td><td class="msg-cell">Context here is that I'm currently working on an update to the proposal's PR #10 that'll disregard the exponent in the string digits calculation, along with any and all leading zeros. This will match your latest proposal pretty closely, only diverging by considering "100" and "1.00" as belonging to the same sequence, as you put it.</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Feb 25 2026 11:11:33 GMT-0800 (Pacific Standard Time)">19:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@eemeli:mozilla.org">eemeli</span>&gt;</div></td><td class="msg-cell">My own sense here is that this understanding is more useful, as it's easier to get the ignore-integral-trailing-zeros behaviour by wrapping the formattable numeric string in <code>Number()</code>.</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed Feb 25 2026 11:15:55 GMT-0800 (Pacific Standard Time)">19:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@eemeli:mozilla.org">eemeli</span>&gt;</div></td><td class="msg-cell">If we understood <code>"100"</code> to have only one significant digit, you'd need to transform it as <code>Number("100").toExponential(2)</code> to ensure that it's parsed as having three significant digits.</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed Feb 25 2026 11:19:45 GMT-0800 (Pacific Standard Time)">19:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@eemeli:mozilla.org">eemeli</span>&gt;</div></td><td class="msg-cell"><p>I think it would also mean that we'd want to do this to ensure that round-tripping was not lossy, while keeping the value as simple as possible:</p>
<pre><code>let a = new Amount(100, { significantDigits: 3 })
a.value // '1.00e+2'

let b = new Amount(101, { significantDigits: 3 })
b.value // '101'
</code></pre>
<p>That seems unnecessarily clumsy?</p>
</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed Feb 25 2026 11:22:15 GMT-0800 (Pacific Standard Time)">19:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@eemeli:mozilla.org">eemeli</span>&gt;</div></td><td class="msg-cell">(yes, that's mixing in Amount stuff with keep-trailing-zeros, but I'm pretty sure we want those to match each others' logics)</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed Feb 25 2026 11:28:19 GMT-0800 (Pacific Standard Time)">19:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@eemeli:mozilla.org">eemeli</span>&gt;</div></td><td class="msg-cell"><p>And that then loops us back to <code>Number.p.toPrecision()</code>, as a consideration of 100 as having one significant digit would mean that</p>
<pre><code>n.toPrecision(p)
</code></pre>
<p>and</p>
<pre><code>new Amount(n, { significantDigits: p }).value
</code></pre>
<p>would not always be equal for Number values of <code>n</code>.</p>
</td></tr>

</tbody></table></div></div></div>
</body></html>