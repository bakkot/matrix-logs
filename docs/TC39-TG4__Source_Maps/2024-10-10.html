<!DOCTYPE html><html><head>
  <title>TC39-TG4_ Source Maps on 2024-10-10</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "TC39-TG4_ Source Maps";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">TC39-TG4_ Source Maps<br>2024-10-10<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2024-10-09" class="nav-link"><span>prev</span></a>
<a href="2024-10-18" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search TC39-TG4_ Source Maps">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed Oct 09 2024 20:57:46 GMT-0700 (Pacific Daylight Time)">03:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Justin Ridgewell</span>: can you help me explain Mark's security concern from lunch? I understand it at a high level but I'm struggling to come up with a code example testing our regex</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Oct 09 2024 21:12:46 GMT-0700 (Pacific Daylight Time)">04:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Mark is concerned with a <code data-md="`">//# sourceMappingUrl=‚Ä¶</code> comment being detected when it‚Äôs in fact a template string: <a href="https://gist.github.com/jridgewell/40dc4e3f43928ecdc2c48b7d6b1c1798">https://gist.github.com/jridgewell/40dc4e3f43928ecdc2c48b7d6b1c1798</a></td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed Oct 09 2024 21:21:24 GMT-0700 (Pacific Daylight Time)">04:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@szuend:matrix.org">Simon Z√ºnd</span>&gt;</div></td><td class="msg-cell">Isn't this addressed in the spec?</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Oct 09 2024 21:21:54 GMT-0700 (Pacific Daylight Time)">04:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">the concern was about the "without parsing" mode</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Oct 09 2024 21:37:48 GMT-0700 (Pacific Daylight Time)">04:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell"><p>Please correct me if I'm wrong here but Mark's concern seems to be:</p>
<ol>
<li>True with the current regex</li>
<li>Impossible to fix with just a regular expression?</li>
<li>Very likely has been true forever in IDEs and other "non parsing" source map users</li>
</ol>
</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Oct 09 2024 21:38:40 GMT-0700 (Pacific Daylight Time)">04:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">Side note: Could we do something weird like specify that "If you don't parse for the magic comment, you can only fetch local or encoded source maps, not go out to the network"?</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Oct 09 2024 21:40:00 GMT-0700 (Pacific Daylight Time)">04:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@gibson042:matrix.org">Richard Gibson</span>&gt;</div></td><td class="msg-cell">if it's only about template literals then it <em>can</em> be fixed by something like a regular expression, but probably shouldn't be</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed Oct 09 2024 21:40:14 GMT-0700 (Pacific Daylight Time)">04:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">sorry to interrupt, but we are still good for this topic next?  (and after the break)</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed Oct 09 2024 21:40:31 GMT-0700 (Pacific Daylight Time)">04:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> sorry to interrupt, but we are still good for this topic next?  (and after the break)</blockquote></mx-reply>I think yes, but if it's ok, it may exceed the 5 minute limit?</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed Oct 09 2024 21:40:37 GMT-0700 (Pacific Daylight Time)">04:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">yeah</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed Oct 09 2024 21:40:40 GMT-0700 (Pacific Daylight Time)">04:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">not a problem</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed Oct 09 2024 22:35:34 GMT-0700 (Pacific Daylight Time)">05:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell"><p>ok so, just chatting with <span class="nick-1">Justin Ridgewell</span> . I'm still not sure that tricking devtools into a network request for a sourceMappingURL in a template literal is any worse than just sticking a malicious URL in a normal sourceMappingURL but it seems like we could easily fix this case by changing our non-parser requirements to:</p>
<ol>
<li>Start at end of file</li>
<li>While last line starts with "//#" and also line does not contain a "`"</li>
<li>Check for comment, if not found, move up a line</li>
</ol>
</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed Oct 09 2024 22:39:19 GMT-0700 (Pacific Daylight Time)">05:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@gibson042:matrix.org">Richard Gibson</span>&gt;</div></td><td class="msg-cell">that doesn't even work for <a href="https://tc39.es/source-map/2024/#example-5b7659a8">https://tc39.es/source-map/2024/#example-5b7659a8</a> AFAICT</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Wed Oct 09 2024 22:39:58 GMT-0700 (Pacific Daylight Time)">05:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">Since the last line contains a ` we would bail out in that case</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed Oct 09 2024 22:41:05 GMT-0700 (Pacific Daylight Time)">05:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Mark approves of our solution</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed Oct 09 2024 22:42:24 GMT-0700 (Pacific Daylight Time)">05:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">He also exlpained his exploit case: in hardened JS the program could have locked down network access. But because dev tools is external to the program, it could be tricked into performing a fetch in an otherwise locked down environment</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Wed Oct 09 2024 22:44:09 GMT-0700 (Pacific Daylight Time)">05:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">ahhhhh yes ok makes sense... we could add a note about this in the spec!</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Wed Oct 09 2024 22:47:08 GMT-0700 (Pacific Daylight Time)">05:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>that doesn't even work for <a href="https://tc39.es/source-map/2024/#example-5b7659a8">https://tc39.es/source-map/2024/#example-5b7659a8</a> AFAICT</blockquote></mx-reply>Mark‚Äôs proposed change makes that case not find a source map</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Wed Oct 09 2024 22:47:12 GMT-0700 (Pacific Daylight Time)">05:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@gibson042:matrix.org">Richard Gibson</span>&gt;</div></td><td class="msg-cell"><p>note that the WHATWG URL spec will accept ` inside URLs like <a href="https://example.com/`/">https://example.com/`/</a></p>
<pre><code>https://example.com/`/
</code></pre>
</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Wed Oct 09 2024 22:47:27 GMT-0700 (Pacific Daylight Time)">05:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Yes, but they are invalid in a base64 data URI</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Wed Oct 09 2024 22:47:54 GMT-0700 (Pacific Daylight Time)">05:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Can we weaken requirements for tools, or say we don‚Äôt have an answer?</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Wed Oct 09 2024 23:09:21 GMT-0700 (Pacific Daylight Time)">06:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Mark accepts no normative changes, we‚Äôll only state that<br><ol data-md="1" start="1"><li><p>Parsing is always preferred</p></li><li><p>Non-parsing is non-normative, and has an explicit note that there is a bug</p></li><li><p>A note that we will fix the bug in a future proposal</p></li></ol></td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Wed Oct 09 2024 23:16:12 GMT-0700 (Pacific Daylight Time)">06:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">We are (conditionally) approved!! Thank you all so much for the help and flexibility and expertise this week. I love this group!</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Wed Oct 09 2024 23:16:56 GMT-0700 (Pacific Daylight Time)">06:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@nribaudo:igalia.com">Nic</span>&gt;</div></td><td class="msg-cell">To clarify, the regex-based parsing remains (removing it would be normative!), but with a note that we will need to tweak it</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Wed Oct 09 2024 23:17:05 GMT-0700 (Pacific Daylight Time)">06:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">Stressful but so glad for all the feedback from Mark/Justin/Nic/Richard and all! I feel like this week will lead to a much better TG4 specification.</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Wed Oct 09 2024 23:20:17 GMT-0700 (Pacific Daylight Time)">06:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@szuend:matrix.org">Simon Z√ºnd</span>&gt;</div></td><td class="msg-cell">Thank you everyone who was in Tokyo and pushed this forward :) Especially Jon for presenting :) Congrats everyone!</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Wed Oct 09 2024 23:21:13 GMT-0700 (Pacific Daylight Time)">06:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">üëèüëèüëèüëèüëèüëèüëè</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Thu Oct 10 2024 02:17:43 GMT-0700 (Pacific Daylight Time)">09:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@nribaudo:igalia.com">Nic</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/tc39/source-map/pull/137">https://github.com/tc39/source-map/pull/137</a> please take a look :)</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Thu Oct 10 2024 02:20:23 GMT-0700 (Pacific Daylight Time)">09:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">Do we want to say anything more specific about non parsing bad, parsing good</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Thu Oct 10 2024 02:20:35 GMT-0700 (Pacific Daylight Time)">09:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">Sorry for brevity on phone</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Thu Oct 10 2024 02:24:55 GMT-0700 (Pacific Daylight Time)">09:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@nribaudo:igalia.com">Nic</span>&gt;</div></td><td class="msg-cell">No -- if we encourage people to only do one thing, then tools that do the other thing would be more vulnerable to the problem because it's even more likely that checkers would miss it. We should instead make sure that checkers check both for now.

Also, eventually the goal is to let tools keep using either approach, we just need to make sure that they lead to the same result.</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Thu Oct 10 2024 02:26:07 GMT-0700 (Pacific Daylight Time)">09:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">Thank you</td></tr>

</tbody></table></div></div></div>
</body></html>