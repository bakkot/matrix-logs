<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>TC39-TG4_ Source Maps on 2025-04-14</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "TC39-TG4_ Source Maps";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">TC39-TG4_ Source Maps<br>2025-04-14<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2025-04-13" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search TC39-TG4_ Source Maps">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Sun Apr 13 2025 21:00:00 GMT-0700 (Pacific Daylight Time)">04:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@szuend:matrix.org">Simon ZÃ¼nd</span>&gt;</div></td><td class="msg-cell">Chrome attempts to load the source map via the inspected page itself at first. So if the page fails to <code>fetch</code> the source map, so will Chrome DevTools</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Mon Apr 14 2025 00:52:38 GMT-0700 (Pacific Daylight Time)">07:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@43081j:matrix.org">James</span>&gt;</div></td><td class="msg-cell">interesting. the error isn't of any use really ("unexpected error" or some such thing). but im guessing its a cross-origin thing then</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Mon Apr 14 2025 00:54:40 GMT-0700 (Pacific Daylight Time)">07:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@43081j:matrix.org">James</span>&gt;</div></td><td class="msg-cell">in this case im also using devtools for node, so there is no 'page'. not sure what the rules are then, i.e. what is the origin etc</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Mon Apr 14 2025 00:58:30 GMT-0700 (Pacific Daylight Time)">07:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@43081j:matrix.org">James</span>&gt;</div></td><td class="msg-cell">i imagine debug IDs will make this a lot easier one day if someone hosts a server to look them up ðŸ˜…</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Mon Apr 14 2025 01:03:51 GMT-0700 (Pacific Daylight Time)">08:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@nribaudo:igalia.com">Nic</span>&gt;</div></td><td class="msg-cell">The problems that debug IDs are solving is distinguishing two different source maps that are hosted at the same URL (for example, because you updated your code and rebuild the source map). With the default devtools behavior, if you are already including the version of the file in the URL you are fetching then also having the ID is probably not super helpful.</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Mon Apr 14 2025 01:04:18 GMT-0700 (Pacific Daylight Time)">08:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@nribaudo:igalia.com">Nic</span>&gt;</div></td><td class="msg-cell">If Chrome devtools have problems fetching those source maps however, you might take a look at the extensions API mentioned in <a href="https://github.com/tc39/ecma426/issues/185">https://github.com/tc39/ecma426/issues/185</a></td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Mon Apr 14 2025 01:04:32 GMT-0700 (Pacific Daylight Time)">08:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@nribaudo:igalia.com">Nic</span>&gt;</div></td><td class="msg-cell">It's possible you might just do the fetching by yourself through a browser extension&nbsp;</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Mon Apr 14 2025 01:05:04 GMT-0700 (Pacific Daylight Time)">08:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@nribaudo:igalia.com">Nic</span>&gt;</div></td><td class="msg-cell">What's asked in the last question there seems to be exactly what you are trying to do</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Mon Apr 14 2025 01:10:31 GMT-0700 (Pacific Daylight Time)">08:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@43081j:matrix.org">James</span>&gt;</div></td><td class="msg-cell">pretty much. we have a tool now which transforms sourcemap urls to CDN hosted ones. if devtools were capable of loading them, all would be solved (and made easier one day by standards ideally)</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Mon Apr 14 2025 01:12:06 GMT-0700 (Pacific Daylight Time)">08:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@43081j:matrix.org">James</span>&gt;</div></td><td class="msg-cell">ill see if i can pester someone who knows more about node devtools than i do. i.e. any limits on requests etc, what origin it is</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Mon Apr 14 2025 01:55:06 GMT-0700 (Pacific Daylight Time)">08:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@szuend:matrix.org">Simon ZÃ¼nd</span>&gt;</div></td><td class="msg-cell">DevTools basically first attempts to call the <code>Network.loadNetworkResource</code> CDP method <a href="https://chromedevtools.github.io/devtools-protocol/tot/Network/#method-loadNetworkResource">https://chromedevtools.github.io/devtools-protocol/tot/Network/#method-loadNetworkResource</a></td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Mon Apr 14 2025 01:55:14 GMT-0700 (Pacific Daylight Time)">08:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@szuend:matrix.org">Simon ZÃ¼nd</span>&gt;</div></td><td class="msg-cell">So it depends whether Node implements that or not</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Mon Apr 14 2025 01:55:43 GMT-0700 (Pacific Daylight Time)">08:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@szuend:matrix.org">Simon ZÃ¼nd</span>&gt;</div></td><td class="msg-cell">If that fails, we try a different approach by attempting to fetch it ourselves but with some of the target permissions applied</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Mon Apr 14 2025 01:55:49 GMT-0700 (Pacific Daylight Time)">08:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@szuend:matrix.org">Simon ZÃ¼nd</span>&gt;</div></td><td class="msg-cell">Let me dig up the code</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Mon Apr 14 2025 01:56:37 GMT-0700 (Pacific Daylight Time)">08:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@szuend:matrix.org">Simon ZÃ¼nd</span>&gt;</div></td><td class="msg-cell"><a href="https://source.chromium.org/chromium/chromium/src/+/main:chrome/browser/devtools/devtools_ui_bindings.cc;l=1116;drc=e005c381337ad6a2312cafa0202f80b7950afbe1">https://source.chromium.org/chromium/chromium/src/+/main:chrome/browser/devtools/devtools_ui_bindings.cc;l=1116;drc=e005c381337ad6a2312cafa0202f80b7950afbe1</a></td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Mon Apr 14 2025 01:56:48 GMT-0700 (Pacific Daylight Time)">08:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@szuend:matrix.org">Simon ZÃ¼nd</span>&gt;</div></td><td class="msg-cell">That is the fallback if going through the inspected page fails</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Mon Apr 14 2025 01:57:03 GMT-0700 (Pacific Daylight Time)">08:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@szuend:matrix.org">Simon ZÃ¼nd</span>&gt;</div></td><td class="msg-cell">e.g. DevTools can load source maps from <code>file:///</code> URLs and it uses the fallback for that</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Mon Apr 14 2025 01:57:27 GMT-0700 (Pacific Daylight Time)">08:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@szuend:matrix.org">Simon ZÃ¼nd</span>&gt;</div></td><td class="msg-cell">I imagine that because Node.js only recently started implementing the CDP <code>Network</code> domain, we always used the fallback for node.js debugging</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Mon Apr 14 2025 02:01:27 GMT-0700 (Pacific Daylight Time)">09:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@szuend:matrix.org">Simon ZÃ¼nd</span>&gt;</div></td><td class="msg-cell">Note that cross-origin source maps are somewhat common, but the server serving the source maps needs to have CORS configured to allow fetching from cross-origins</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Mon Apr 14 2025 02:04:11 GMT-0700 (Pacific Daylight Time)">09:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@43081j:matrix.org">James</span>&gt;</div></td><td class="msg-cell">so its possible node/devtools just never attempts to load external maps? thanks so much for the info too. was looking for that c file for a while ðŸ˜…</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Mon Apr 14 2025 02:06:44 GMT-0700 (Pacific Daylight Time)">09:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@43081j:matrix.org">James</span>&gt;</div></td><td class="msg-cell">i basically get the same error as these folks:
<a href="https://github.com/Adobe-CEP/CEP-Resources/issues/448">https://github.com/Adobe-CEP/CEP-Resources/issues/448</a>

and yes im currently using jsdelivr which has the right CORS headers, content type, etc. but this error makes it seem more like devtools just isn't even trying to request it in the first place</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Mon Apr 14 2025 02:09:00 GMT-0700 (Pacific Daylight Time)">09:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@43081j:matrix.org">James</span>&gt;</div></td><td class="msg-cell">once i get this working, longer term it does feel like we should have a standard symbol server some day. one of the various orgs would need to own/host it, but it'd get rid of the need for anyone shipping sourcemaps anymore</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Mon Apr 14 2025 02:09:25 GMT-0700 (Pacific Daylight Time)">09:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@43081j:matrix.org">James</span>&gt;</div></td><td class="msg-cell">im kinda hacking around it by hosting them on npm under a special tag, but i can see a future where there's an actual sourcemap server somewhere</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Mon Apr 14 2025 03:40:49 GMT-0700 (Pacific Daylight Time)">10:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@szuend:matrix.org">Simon ZÃ¼nd</span>&gt;</div></td><td class="msg-cell">If you have a small repro, feel free to file a bug on <a href="http://crbug.com">crbug.com</a>. I can take a look at why DevTools fails to fetch the source map.</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Mon Apr 14 2025 03:43:38 GMT-0700 (Pacific Daylight Time)">10:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@szuend:matrix.org">Simon ZÃ¼nd</span>&gt;</div></td><td class="msg-cell">Ah, note that remote debugging is different depending on how DevTools is opened. The fallback path only exists if you use a "real" Chrome DevTools opened either via right-click "inspect" or via <code>chrome://inspect</code>. Otherwise the fallback path doesn't exist.</td></tr>

</tbody></table></div></div></div>
</body></html>