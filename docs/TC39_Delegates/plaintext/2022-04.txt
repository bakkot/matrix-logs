2022-04-01
[20:55:09.0684] <jschoi>
Probably not, but just in case…
Is there a way for ecmarkup to become aware of definitions from Ecma262 pull requests? I want a proposal spec to refer to the Decorator productions from #2417—and I want to suppress the grammar-shape errors resulting from the spec referring to those productions.

[21:02:37.0396] <jschoi>
* Probably not, but just in case…
Is there a way for ecmarkup to become aware of definitions from Ecma262 pull requests? I want a proposal spec to refer to the Decorator productions from #2417—and I want to prevent the grammar-shape errors resulting from the spec referring to those productions.

[21:15:42.0453] <bakkot>
jschoi: check out the pr, run `ecmarkup --verbose --write-biblio whatever.json spec.html > /dev/null`; this will produce a `whatever.json` biblio file. in your proposal, do `ecmarkup --load-biblio ./whatever.json your-proposal.html`.

[21:16:09.0033] <bakkot>
that said I am halfway through making a breaking change to the biblio format so you might want to wait a couple days

[21:16:21.0122] <bakkot>
 * jschoi: check out the pr, run `ecmarkup --verbose --write-biblio whatever.json spec.html > /dev/null`; this will produce a `whatever.json` biblio file. in your proposal, do `ecmarkup --load-biblio ./whatever.json your-proposal.html`.

[21:16:54.0710] <bakkot>
(the `./` is import because otherwise ecmarkup will attempt to load a node module named `whatever.json` which is not the thing you want)

[21:17:24.0349] <bakkot>
this requires a recent (v10/v11) version of ecmarkup, I should mention

[21:17:45.0353] <bakkot>
uh, but that might not actually fix your problem

[21:18:00.0025] <bakkot>
because some of the checks are from grammarkdown, which doesn't really know about the biblio

[21:20:23.0621] <jschoi>
Thank you very much! I think the PR’s biblio file will be sufficient. Looking forward to the biblio-format upgrade. 

[21:20:46.0989] <bakkot>
it is just a small tweak to make it better for other tooling: https://github.com/tc39/ecmarkup/pull/425

[21:21:03.0960] <jschoi>
This will be a v12?

[21:21:18.0841] <bakkot>
https://github.com/tc39/ecmarkup/releases/tag/v12.0.0

[21:21:36.0504] <bakkot>
but there's a bug to do with https://github.com/tc39/ecmarkup/pull/426 that I gotta fix before this is actually usable

[21:21:41.0717] <bakkot>
so stick with 11 for now

[07:20:50.0355] <ryzokuken>
https://twitter.com/DasSurma/status/1509835337295609865

[07:25:17.0923] <Ashley Claymore>
The different between imports and destructuring seems to come up more 

[07:25:43.0276] <nicolo-ribaudo>
That's not imports and destructuring, but imports vs exports!

[07:27:00.0686] <nicolo-ribaudo>
 * That's not imports and destructuring, but imports vs exports

[07:27:04.0410] <nicolo-ribaudo>
 * That's not imports and destructuring, but imports vs exports!

[07:28:23.0469] <Ashley Claymore>
yes, I mean how default is treated different here:

`import x from "path"`
And 
`const x = v`;

when 

`import {x} from "path"`
and
`const {x} = v;`

[07:28:39.0564] <guybedford>
This was also discussed via https://github.com/tc39/notes/blob/main/meetings/2016-11/nov-29.md#12iid-proposal-to-reform-the-spec-to-include-default-export-in-export--from-module around creating an aliasing pattern (since redirects have instancing issues)

[07:28:53.0681] <Ashley Claymore>
I find more people get confused about that, vs using `export *`

[07:29:16.0126] <guybedford>
it could be worth considering an `export **` in future, bradleymeck previously suggested that alternative

[07:30:17.0915] <Ashley Claymore>
the default export can always be chosen explicitly right; just requires a second import 

[07:30:25.0927] <nicolo-ribaudo>
Yes

[07:30:26.0288] <Ashley Claymore>
Or am I missing something?

[07:30:37.0023] <Ashley Claymore>
* Or am I missing something?

[07:31:07.0821] <Ashley Claymore>
* yes, I mean how default is treated different here:

`import x from "path"`
And 
`const x = v`;

compared to here:

`import {x} from "path"`
and
`const {x} = v;`

[07:42:21.0899] <jschoi>
There’s no formal specification yet for function decorators, right? Are there plans to allow arrow functions to be decorated? 

[07:44:15.0729] <nicolo-ribaudo>
I don't think there is even a proposal yet, it's mostly a desire

[07:44:32.0112] <nicolo-ribaudo>
(btw, we created a decorators room if you are interested)

[08:35:05.0326] <ljharb>
There’s a proposal for export default from, so you could do `export default, * from ‘f’` - still stage 1

[08:46:42.0963] <Rob Palmer>
I'm assuming you need to know if the target has a default, else that will early error. 

[09:38:40.0601] <ljharb>
ah true, that's a good point

[09:38:52.0093] <ljharb>
altho tbf i'd hope you do always know what you're re-exporting :-)

[10:03:37.0168] <Rob Palmer>
I tripped up on this when trying to create a monorepo build tool using ES modules as redirects for inter-package links. It was annoying that those link modules could not be stable, and instead needed to be regenerated based on the target's content. 

[10:05:12.0749] <bakkot>
yeah, I generally feel like `export *` is only useful for glue code, and the glue code should not need to be updated when the thing it's re-exporting is updated; that's the whole point of it

