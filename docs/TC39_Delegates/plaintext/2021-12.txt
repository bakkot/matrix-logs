2021-12-02
[22:25:38.0679] <ljharb>
Justin Ridgewell: it doesn't seem like there's any test262 PR yet for array grouping, am i missing it?

[12:54:23.0354] <Justin Ridgewell>
Correct

[12:54:54.0368] <Justin Ridgewell>
I think @yulia volunteered a her grad students to write them?

[13:18:07.0917] <ljharb>
i was going to crib them for my polyfill packages, but ended up writing my own (but they won't be pushed up til stage 3, which hopefully is this month)

[13:52:50.0980] <mpcsh>
how does one create a meeting on 8x8.vc under the /tc39 slug? we have 8x8.vc/tc39/inclusion, so I know it's possible; I'd like to make one for the pattern matching champions' call

[13:53:14.0345] <mpcsh>
(cc Rob Palmer who I thiiink has been managing 8x8?)

[15:20:56.0063] <Rob Palmer>
8x8 has many mysteries. For me, it seems I can just use any name under the TC39 space. So you could try making one up. If that does not work I can make you an admin to see if that makes a difference. 

[15:43:30.0490] <mpcsh>
> <@robpalme:matrix.org> 8x8 has many mysteries. For me, it seems I can just use any name under the TC39 space. So you could try making one up. If that does not work I can make you an admin to see if that makes a difference.

yeah I did try just visiting `8x8.vc/tc39/pattern-matching` and got a 404. got your invite link though, thank you!


2021-12-03
[01:32:41.0595] <yulia>
ljharb maybe we can combine efforts (but i want them to write their own)

[01:32:49.0416] <yulia>
I will see where they are with them today

[01:33:09.0991] <yulia>
but we don't have to exclusively use the students tests

[11:04:24.0309] <ljharb>
test262 tests aren‚Äôt quite as easy to write as tape tests :-p but I‚Äôll def review what they put up to make sure I‚Äôm not missing anything


2021-12-07
[15:48:16.0325] <ljharb>
Ashley Claymore:  lol that `with` is a keyword is making the polyfill more annoying, so i should have thought of that before making the unscopables PR


2021-12-08
[16:36:15.0545] <Mathieu Hofman>
Trying to unscope `with` is pretty meta.

[21:15:31.0940] <Ashley Claymore>
> <@ljharb:matrix.org> Ashley Claymore:  lol that `with` is a keyword is making the polyfill more annoying, so i should have thought of that before making the unscopables PR

Ha! Yeah I only noticed because the find/replace method rename introduced a syntax error into the test https://github.com/tc39/proposal-change-array-by-copy/blob/77494051d1fca9f1ee878ae567f89e79af636609/polyfill.test.js#L135
tdd spec writing ftw

[06:57:47.0277] <nicolo-ribaudo>
I uploaded a new version of the Records and Tuples slides, so if anyone already read them you might want to quickly read them again (I only changed the wording of some concepts, but the contents are the same; also, I flipped the "decision tree").

[07:01:02.0146] <nicolo-ribaudo>
 * I uploaded a new version of the Records and Tuples slides, so if anyone already read them you might want to quickly read them again (I only changed the wording of some concepts, but the contents are the same; also, I flipped the "decision tree").


2021-12-09
[08:22:53.0560] <Rob Palmer>
The Ecma GA has acknowledged Aki  with an Ecma Recognition award for her contributions serving as Chair for three years  üéâ

[08:25:37.0700] <Rob Palmer>
Andr√© Bargull was also acknowleged with an Ecma Recognition award for his contributions to the quality of the JavaScript language over 7 years  üéâ

[08:41:53.0674] <Rob Palmer>
(thanks to Yulia for pulling together the evidence for these awards, and the contributors who passed on feedback)


2021-12-12
[09:05:12.0669] <ljharb>
https://es.discourse.group/t/atomics-wait-waitasync-as-native-settimeout/1120 seems interesting; cc erights - would it maybe be possible to specify setTimeout in the language?

[09:06:06.0860] <Jack Works>
> <@ljharb:matrix.org> https://es.discourse.group/t/atomics-wait-waitasync-as-native-settimeout/1120 seems interesting; cc erights - would it maybe be possible to specify setTimeout in the language?

I thought that idea was already rejected

[09:08:28.0006] <Jack Works>
This post is interesting but it requires SAB and worker (?) so it isn't so useful

[09:19:14.0444] <ljharb>
It doesn‚Äôt appear to require a worker

[09:20:16.0563] <ljharb>
it was rejected for a number of reasons, but one was that there‚Äôs no concept of time like this in the spec - but if Atomics.waitAsync already provided it - iow, if setTimeout can be polyfilled without using new Date/Date.now, and with only things in 262 - I‚Äôm not sure what the remaining reasons would be to reject it.

[09:22:07.0586] <Jack Works>
So his polyfill dont need current thread to be blockable? 

[09:22:33.0626] <Jack Works>
And is Atomics normative optional? 

[09:24:25.0556] <bakkot>
`waitAysnc` works on the main thread, yeah; that's the point of it

[09:24:51.0376] <bakkot>
and no, atomics is not normative optional

[09:26:00.0502] <Jack Works>
Hmm. SAB is normative optional and Atomics only works with SAB, is that true? 

[09:30:44.0870] <bakkot>
SAB is not exactly normative optional, though it's complicated

[09:31:45.0878] <bakkot>
the "SharedArrayBuffer" property of the global object is normative optional in hosts which do not provide multithreading, and that's the only built-in way to get access to a SAB in ES, but other hosts provide other mechanisms to get at it

[09:32:12.0497] <bakkot>
also the only reason we made that change was web-compat when everyone turned off SABs for a while because of spectre

[09:34:53.0872] <Jack Works>
Is there any case that SAB is not exposed on global but will be returned by a host API? 

[09:35:31.0684] <bakkot>
yes, let me dig it up

[09:36:13.0227] <bakkot>
`new WebAssembly.Memory({ shared:true, initial:0, maximum:0 }).buffer.constructor`

[09:36:33.0885] <Jack Works>
And it can be called to create new SAB? 

[09:36:33.0945] <bakkot>
works even when multithreading is disabled

[09:36:38.0594] <bakkot>
yes

[09:36:46.0550] <Jack Works>
It's crazy

[09:37:17.0598] <Jack Works>
Then what's the meaning of hiding it... 

[09:37:39.0497] <bakkot>
web compat

[09:37:41.0741] <bakkot>
like I said

[09:38:10.0161] <bakkot>
a lot of code assumes that if the SAB constructor was present then they could do multithreading, and had a fallback for when it was not available

[09:38:18.0868] <bakkot>
 * a lot of code assumes that if the SAB constructor was present then they could do multithreading, and had a fallback for when it was not available

[09:38:38.0185] <bakkot>
so when browsers turned of multithreading, for spectre, they needed to also remove the SAB property of the global

[09:38:46.0632] <bakkot>
note that just getting an SAB doesn't give you the ability to do multithreading

[09:38:56.0896] <Jack Works>
I mean, if they want to hide SAB, why not hide it completely but leave an escape path in WebAssembly

[09:39:03.0798] <bakkot>
they don't want to hide SAB

[09:39:14.0211] <bakkot>
that was not the goal

[09:40:00.0323] <bakkot>
the goal was, "remove multithreading, and do not break websites which assume that the existence of the SAB property on the global implies the ability to do multithreading"

[09:40:27.0470] <Jack Works>
Isn't Shared WebAssembly memory is used for multithreading? 

[09:40:37.0640] <bakkot>
(sorry, and by "multithreading" I mean specifically "multhreaded access to shared memory", not just the ability to spawn workers)

[09:40:55.0488] <bakkot>
yes, but what browsers did is disabled the ability to pass a SAB between workers

[09:41:20.0982] <bakkot>
if you can't pass an SAB between workers, you don't have shared memory

[09:41:51.0693] <bakkot>
but the WASM api is spec'd to be backed by an SAB regardless of whether multithreading is enabled

[09:42:42.0012] <Jack Works>
Aren't WebAssembly also affected by spectre when necessary methods provided? 

[09:44:08.0627] <bakkot>
if the necessary methods (i.e. the ability to use multithreaded access to shared memory to make a high-res timer) are provided, yes

[09:44:50.0757] <bakkot>
but I believe this ability is not provided in the relevant case

[09:45:25.0549] <bakkot>
you can read more of the discussion in https://github.com/whatwg/html/issues/4175, 
https://github.com/whatwg/html/issues/3740,
https://github.com/tc39/ecma262/issues/1435, https://github.com/tc39/ecma262/pull/1903

[09:45:26.0565] <Jack Works>
Okay I guess I understand what happened to SAB now... 

[09:47:23.0817] <Jack Works>
So back to Atomics was added, how the committee decided about adding a clock API? Was there any security concerns raised? Is that possible to add things like Promise.timeout?

[09:48:05.0421] <bakkot>
honestly I think people may have just not noticed at the time waitAsync was being added

[09:48:45.0262] <bakkot>
unfortunately it's hard to get in touch with erights, short of making a proposal and bringing it to plenary

[09:48:56.0146] <bakkot>
I think it's worth a shot

[09:49:24.0332] <Jack Works>
üò∞

[09:50:36.0477] <bakkot>
oh, or just asking him during plenary, at the lunch break

[09:50:39.0268] <bakkot>
that's what I usually do

[10:00:40.0857] <devsnek>
I'm down for timers in the stdlib

[10:06:04.0510] <bakkot>
`let delay = ms => new Promise(res => setTimeout(res, ms))` is one of those incantations I put at the top of many of my scripts; would be nice to not do that

[10:09:00.0506] <bakkot>
though looking around some, it seems like chrome (or at least Domenic) is of the opinion that it would need to be in HTML instead of ES and also that it would need to have AbortController integration: https://github.com/whatwg/html/issues/617#issuecomment-702774052

[10:09:05.0587] <bakkot>
so I guess it's not gonna happen anyway

[10:09:06.0084] <bakkot>
sigh

[10:09:58.0196] <devsnek>
don't worry in 15 years half of html will be merged with 262

[10:10:43.0697] <bakkot>
that is gonna depend highly on the specifics of the individuals working on these specs in the next decade, is my feeling

[10:11:28.0058] <bakkot>
though, abortcontroller is probably the thing most likely to end up in 262, I guess

[11:18:55.0177] <bterlson>
I like Ron's proposal around this personally. A protocol would be useful.

[11:20:24.0947] <bterlson>
cancelSignal and dispose would be so nice in my world

[11:59:05.0222] <rbuckton>
A protocol is the most flexible approach, but I've been getting push back against it in favor of a host hook instead. 


2021-12-13
[22:52:42.0133] <ljharb>
abortcontroller is grossly named and should never be in 262

[22:55:38.0779] <legendecas>
> <@ljharb:matrix.org> abortcontroller is grossly named and should never be in 262

That's a strong word, could you elaborate why do you think so?

[22:56:31.0929] <ljharb>
i mean, one big part of it is that a past delegate has insisted that it inherit from DOMException, and DOMException categorically doesn't belong in 262 - and the alternative, a host-defined exception type, is imo way too much nonportable determinism to put in the spec

[22:57:35.0453] <ljharb>
there's more to my opinion but i don't think i want to write about it further in a public setting

[23:19:56.0406] <legendecas>
Thanks for sharing the thoughts!

[23:40:01.0412] <Jack Works>
and we also don't have EventTarget yet.

[08:59:40.0840] <Michael Ficarra>
are there really 2 delegates named Sebastian McKenzie (SMK and SME)?

[09:25:29.0364] <devsnek>
i think that's the same person

[09:26:23.0531] <Michael Ficarra>
if it is, can we remove one of their abbreviations?

[09:46:11.0730] <shu>
i don't recall our ever having done that before so there's no procedure AFAIK

[09:46:39.0244] <shu>
it seems reasonable for to reach out to them with a reasonable deadline (1mo?) and then make an arbitrary decision after that if no resopnse

[10:39:54.0749] <ljharb>
https://github.com/tc39/notes/pull/135 added SME recently, and i think they haven't spoken at a meeting since then, so i think you could just revert that PR now?

[10:41:10.0313] <Rob Palmer>
my bad - I will revert

[10:44:59.0585] <Rob Palmer>
Please could I get a review:  https://github.com/tc39/notes/pull/173


2021-12-14
[18:31:35.0347] <Mathieu Hofman>
> <@bakkot:matrix.org> honestly I think people may have just not noticed at the time waitAsync was being added

I think you're right, it might be one of those things that slipped through.

First, my understanding is that `waitAsync` is still at Stage 3. And while `Atomics` is not normative optional, it relies on `SharedArrayBuffer`, for which the constructor being added to the global object is currently normative optional. That means from an ECMA262 point of view, even when `waitAsync` reaches stage 4, the host is not obligated to offer a clock API, as it can simply deny SAB.

Now I'd go even further, and say there is a way to reconcile a clock API with the requirement some environments have to not allow time measurement of any sort. Let's assume a clock API is modeled like `waitAsync`, i.e. the host resolves a promise after a certain time has elapsed. The promise job queue works by requiring the host to eventually execute promise jobs in the same order as they were enqueued. There is no requirement that the host must instantly make forward progress in processing the promise queue. What a host (or virtualization of one) can do is stop processing any more promise jobs until the wait time has elapsed, then enqueue the resolution of the clock promise. As long as the program doesn't have another way to observe the elapsing of time, that behavior is entirely within spec.

That means that without a `Date` or other API which reveals elapsing time, then a `Promise.timeout = () => Promise.resolve().then(() => {})` would be spec compliant (modulo ordering of multiple `Promise.timeout` calls with different timeout values within the same synchronous execution, or infinite timeouts). You can even fake the value of `Date` based on the clock API (e.g. with all code executing "instantly" until it reaches a wait).

Now of course that doesn't mean all code using a clock API would be compatible with such behavior, as some would expect consistent forward progress to continue during the wait time. I'd argue however such code would be prone to async race conditions.

[18:39:28.0019] <Mathieu Hofman>
And of course some programs would expect the Web behavior of `setTimeout` which drains the promise job queue before processing I/O jobs (which clocks are)

[19:28:09.0868] <shu>
Mathieu Hofman: `Atomics` relies on SABs only for `wait` and `waitAsync`. the rest was made to work with ABs (not that there's a way to observe that it's atomic with a single thread of execution)

[19:28:39.0448] <shu>
but your point still stands for `wait` that even if it isn't explicitly marked as normative optional, the fact that SABs can be denied makes it so in practice

[19:29:17.0002] <shu>
actually, i take that back

[19:29:46.0599] <shu>
there is a way to observe something is atomic with a single thread of execution, if you count looking at compiled code output in your model of observability, to see that there's never any unfriendly reorderings

[19:31:05.0155] <Mathieu Hofman>
> looking at compiled code output in your model of observability

My model of observability is the program at runtime, so I don't think that counts?

[19:31:11.0774] <Mathieu Hofman>
 * > looking at compiled code output in your model of observability

My model of observability is the program at runtime, so I don't think that counts?

[19:33:04.0386] <shu>
anyway i'm missing the broader context

[19:33:14.0231] <shu>
you want to add a clock API? or just thinking through the exercise?

[19:34:19.0037] <Mathieu Hofman>
Thinking through the exercise since people were asking why not if there is `waitAsync`. Also justifying why the presence of `waitAsync` is not such a problem

[19:36:56.0450] <shu>
it's not a problem for the web platform at least because the timeout value is pretty detached from wall clock time in when the promise handler gets run

[19:37:20.0372] <shu>
the extent to which it is it not a problem for mark is, i suspect, along the lines of what kevin said :)

[19:37:29.0854] <shu>
 * the extent to which it is it not a problem for mark is, i suspect, along the lines of what kevin said :)

[19:44:57.0543] <Mathieu Hofman>
Right, and I'm arguing that you can, according to the way job enqueuing is specified, offer a clock API to "schedule" future promise resolutions that does not in fact allow the program to observe time passing or how complex the code executed in-between was, as long as there is not an independent way to observe time passing.

[19:46:23.0214] <shu>
i'm inclined to agree at first blush

[07:57:15.0316] <Rob Palmer>
TC39 plenary meeting begins in two hours time.  Details are [here.](https://github.com/tc39/Reflector/issues/402)

[08:51:11.0455] <yulia>
Aki: Rob Palmer bterlson hey folks -- i have someone who would like to be at the regexp set notation presentation but... they can't make it from 11 - 12... which is exactly when mattias wants to present

[08:51:22.0070] <yulia>
is there a chance (i know this is slim) to do it during lunch?

[09:02:59.0540] <bterlson>
This will not be possible unfortunately,  it's a locked item and others might not be able to attend if we move it now. 

[09:09:07.0295] <yulia>
ok, no problem, thanks!

[09:34:49.0329] <Rob Palmer>
if anyone feels like being the first guinea pig to try the sign-in process and meeting password, please follow the link in [the reflector post.](https://github.com/tc39/Reflector/issues/402) and let me know how it goes - I am in the room.

And a reminder:  please don't post the URLs to anything privileged here like the sign-in form - it gets logged!  Only the Reflector post is safe.

[09:35:08.0544] <jschoi>
I already did the form, and it seemingly worked for me.

[09:36:44.0739] <Rob Palmer>
Nicolo has proven the sign-in works!

[09:48:06.0761] <nicolo-ribaudo>
When will the next meetings be added to the calendar?

[09:52:11.0245] <ljharb>
the google calendar? i can add them now

[09:52:45.0247] <nicolo-ribaudo>
Yes that one, thanks!

[09:57:38.0901] <Rob Palmer>
We are starting the meeting in 3 minutes.  So far 13 people have joined.

[10:00:41.0068] <ljharb>
nicolo-ribaudo: calendar's updated with all scheduled dates. lmk if you (or anyone) wants to be added to the event so it pops up automatically on your own calendar

[10:00:51.0436] <ljharb>
 * nicolo-ribaudo: calendar's updated with all scheduled dates. lmk if you (or anyone) wants to be added to the event so it pops up automatically on your own calendar

[10:03:38.0108] <Robin Ricard>
No bot, no note takers

[10:04:11.0674] <Robin Ricard>
ot active thanks bakkot 

[10:04:38.0662] <ljharb>
Aki: it's now 1.5 hours (i updated the draft schedule to remove an item that was deferred on the agenda)

[10:04:53.0632] <ljharb>
 * Aki: it's now 1.5 hours (i updated the draft schedule to remove an item that was deferred on the agenda)

[10:05:51.0978] <rkirsling>
Rob Palmer: ironically, your display name is just an email address :P but it does make the affiliation clear

[10:06:08.0722] <rkirsling>
 * Rob Palmer: ironically, your display name is just an email address :P but it does make the affiliation clear

[10:06:11.0704] <rkirsling>
 * .

[10:10:12.0578] <rkirsling>
always is amusing how recognizable everyone is in kid form

[10:14:53.0657] <bterlson>
Nostalgia: that computer I was using was a pentium 150MHz overclocked to 166MHz with dual voodoo 2 graphics cards

[10:15:39.0835] <rkirsling>
I once had _a_ voodoo 2, but it was in a PowerPC

[10:23:24.0586] <rkirsling>
good clap UI

[10:23:35.0008] <bterlson>
lol the clapping crashed my browser

[10:26:25.0861] <bakkot>
_excellent_ clapping ui, if you clap hard enough it causes audience members to pass out

[10:38:52.0339] <bterlson>
Way to go editors, these changes are really cool. Love to see more "spec as an app" features.

[10:39:33.0653] <shu>
get ready for launch of ecma262+

[10:40:05.0412] <Michael Ficarra>
bterlson: can't wait to show you what the research group from KAIST has been working on at the next meeting

[10:40:17.0154] <rickbutton>
very excited for that Michael Ficarra 

[10:40:22.0161] <bterlson>
Coming in 2022: meta262

[10:40:30.0937] <Michael Ficarra>
among other things ,they are generating a reference implementation from the spec

[10:40:34.0661] <bterlson>
> <@michaelficarra:matrix.org> bterlson: can't wait to show you what the research group from KAIST has been working on at the next meeting

oooo I can't wait

[10:40:49.0436] <shu>
does the ecma IPR prohibit TCs from charging for premium subscriptions

[10:41:02.0235] <ryzokuken>
would folks be interested in a #test262:matrix.org room in this space?

[10:41:51.0679] <ljharb>
bterlson:  fwiw i refreshed and it still says test262 status

[10:42:42.0496] <bterlson>
it was on that item

[10:42:46.0311] <bterlson>
 * it was on that item

[10:42:54.0564] <bterlson>
rob was a few items back

[10:43:00.0930] <bterlson>
everyone should see that we're on item 7

[10:46:00.0064] <ljharb>
looks good to me now, thanks

[10:48:17.0803] <bterlson>
It feels like Rob's websocket got dropped. I blame Bloomberg's firewall.

[10:51:28.0702] <Rob Palmer>
i'm not behind a firewall!

[10:52:02.0057] <bterlson>
* that you know of

[11:17:02.0712] <Michael Ficarra>
what's wrong with setting a precedent of not changing the meaning of `\d`, `\w`, and `\b`?

[11:17:12.0755] <Michael Ficarra>
 * what's wrong with setting a precedent of not changing the meaning of `\d`, `\w`, and `\b`?

[11:17:23.0980] <Michael Ficarra>
I think that's the right precedent to set

[11:18:40.0613] <jschoi>
I recall that Perl¬†6 / Rakudo includes escape sequences for both ASCII digits, word characters, etc. and full-Unicode digits, word characters, etc.

[11:18:45.0048] <jschoi>
And maybe Perl¬†5 now too.

[11:19:09.0093] <bakkot>
for the notes, who's speaking?

[11:19:19.0173] <bakkot>
 * for the notes, who's speaking?

[11:19:32.0700] <bakkot>
apparently MDS, thanks to whoever put that in

[11:21:16.0460] <jschoi>
 * I recall that Perl¬†6 / Rakudo includes escape sequences for both ASCII digits, word characters, etc. and full-Unicode digits, word characters, etc.‚Äîin the same regex mode.

[11:21:17.0552] <Michael Ficarra>
nope, it is MED (Mark E Davis)

[11:21:25.0486] <Michael Ficarra>
MDS isn't assigned to anyone

[11:21:30.0530] <Robin Ricard>
updating my delegates.txt pr

[11:21:37.0099] <bakkot>
I feel like JS people generally don't assume things will change out from under them

[11:22:00.0510] <Michael Ficarra>
tip for note takers: if you don't know an abbreviation, just leave it empty or write the full name until we get the right one

[11:22:11.0329] <jschoi>
Is there precedent for ‚Äústability policies‚Äù in the spec?

[11:22:41.0811] <jschoi>
Like https://www.unicode.org/policies/stability_policy.html, but for Ecma-262.

[11:22:52.0504] <jschoi>
 * Like https://www.unicode.org/policies/stability_policy.html, but for Ecma-262.

[11:23:07.0997] <bakkot>
the policy is "we won't break the web"

[11:23:17.0938] <bakkot>
no more, no less

[11:23:26.0986] <jschoi>
Yeah, so no precedent for formal stability policies.

[11:23:30.0601] <bakkot>
yeah

[11:23:53.0766] <jschoi>
I figure that Mark Davis is coming from that sort of Unicode-stability-policy mindset.

[11:24:07.0318] <jschoi>
Just guessing though.

[11:24:12.0403] <Michael Ficarra>
the presence of a stability policy implies there is some instability somewhere

[11:25:10.0337] <bakkot>
there is, sometimes we add new properties to things and somethings that breaks things

[11:25:29.0287] <bakkot>
if we could say "please do not assume the absence of properties on built-ins" that would be nice

[11:25:37.0662] <bakkot>
but it's not really a policy because we'll still back things out if someone does

[11:26:46.0770] <Michael Ficarra>
sounds like 100% stability (modulo observability) to me

[11:27:16.0393] <bakkot>
sometimes we're still willing to break stuff if it's only a small fraction of things or the need is sufficiently great, though

[11:27:20.0626] <jschoi>
Related: https://matrixlogs.bakkot.com/WHATWG/2021-11-11#L29

[11:27:21.0159] <bakkot>
e.g. we backed out SAB

[11:27:35.0744] <jschoi>
Like extending addEventListener‚Äôs third argument and XMLHttpRequest‚Äôs send.

[11:27:37.0946] <jschoi>
 * Like addEventListener‚Äôs third argument.

[11:28:45.0008] <jschoi>
 * Like extending addEventListener‚Äôs third argument and XMLHttpRequest‚Äôs send.

[11:28:47.0806] <jschoi>
Also see also https://github.com/tc39/proposal-bigint-math/issues/17#issuecomment-966426554.

[11:29:26.0196] <jschoi>
Then again, smooshgate.
Anyways, no Unicode-style formal stability policy right now‚Ä¶and maybe there can‚Äôt be.

[11:30:27.0998] <bakkot>
yeah, there can't be, really

[11:32:36.0432] <jschoi>
 * Related from HTML‚Äôs side of not breaking the web: https://matrixlogs.bakkot.com/WHATWG/2021-11-11#L29

[11:33:01.0231] <Michael Ficarra>
RIP smooshMap, the best method name ever

[11:37:00.0650] <bakkot>
you have write access to 262, you could make it happen

[11:38:01.0754] <bterlson>
Rick Waldron: are you ready to go with shadow realm after Array Grouping?

[11:38:14.0515] <bterlson>
we may have enough time to fit in a 10 minute item

[11:44:11.0053] <rbuckton>
`groupByIntoMap`?

[11:44:51.0003] <TabAtkins>
Justin Ridgewell: having the README contain at least a skeleton of all the proposed methods would be nice, as would having a link to the rendered spec in the README. I didn't realize `groupByMap()` was in the proposal at all.

[11:45:19.0206] <TabAtkins>
`groupForByIntoOverMap`

[11:45:40.0264] <Kris Kowal>
I like *ToMap on the toString precedent

[11:47:04.0245] <bakkot>
oh, `toString` is a great example

[11:47:11.0096] <rbuckton>
`groupBy(..., collector)` where `collector` is something like `{ create(), add(...), finish() }`? I think it was considered and abandoned (or delayed) by the iterator helpers proposal.

[11:48:10.0430] <rbuckton>
Or `groupBy(...) -> GroupedIterator` where `GroupedIterator` has `.toObject(), .toMap()` and is iterable for `[key, values]`

[11:50:12.0670] <TabAtkins>
I don't think the default function being an indirection object would be good, but we can extend the method to allow a collector later.

[11:52:20.0296] <Michael Ficarra>
rbuckton: https://matrixlogs.bakkot.com/TC39_Delegates/2021-08-31#L558-L561

[11:53:04.0987] <Michael Ficarra>
rbuckton: I plan to introduce a proposal for a builder protocol, and it will be pull, not push, for that reason

[11:53:48.0732] <rbuckton>
A `Map` builder is essentially `new Map(iterable)` though? 

[11:54:15.0551] <Michael Ficarra>
yes because Map is simple

[12:04:23.0655] <bakkot>
Rick Waldron: deleted my queue item, it was "sounds good as a follow up, want to confirm no compat risk because it's not primitive" - just want to confirm that trying to share a SAB right now will necessarily throw

[12:05:01.0972] <shu>
yeah

[12:05:05.0687] <shu>
like any other non-callable object

[12:05:17.0820] <shu>
 * like any other non-callable object

[12:05:36.0218] <shu>
so what you want is to wrap your SAB in a callable proxy!

[12:06:48.0551] <Rick Waldron>
> <@bakkot:matrix.org> Rick Waldron: deleted my queue item, it was "sounds good as a follow up, want to confirm no compat risk because it's not primitive" - just want to confirm that trying to share a SAB right now will necessarily throw

Yeah, it will 100%

[12:45:21.0428] <ljharb>
Justin Ridgewell: did you delete that twitter account you made once upon a time?

[12:56:58.0783] <Justin Ridgewell>
Shhh, I don't have a twitter.

[12:57:18.0000] <Justin Ridgewell>
I use that for DMs at conferences and lurking only, I never post.

[12:58:07.0490] <Rick Waldron>
bterlson: in the future, you could go with a 4 minute warning. https://www.youtube.com/watch?v=6eyUrpOl40k

[12:59:10.0972] <ljharb>
> <@jridgewell:matrix.org> Shhh, I don't have a twitter.

lol i was trying to credit you for array grouping but couldn't remember or locate the username :-p

[13:01:07.0139] <Justin Ridgewell>
I've seen some just use my real name when tweeting, but don't feel like you need to credit me

[13:01:36.0831] <Justin Ridgewell>
Essentially I only recognize my GH handle as a public account

[13:01:38.0937] <ljharb>
real names aren't as idiomatic and quippy ¬Ø\\\_(„ÉÑ)_/¬Ø

[13:01:42.0534] <ljharb>
 * real names aren't as idiomatic and quippy ¬Ø\\\_(„ÉÑ)_/¬Ø

[13:04:14.0934] <ljharb>
msaboff: can you mute jitsi?

[13:14:29.0228] <ljharb>
i'd prefer it go in "notational conventions" or something, so it's in the actual spec

[13:35:49.0643] <ljharb>
what is the "m" in "Chrome m99"?

[13:37:52.0294] <jschoi>
I will note that ‚Äúdocumenting invariants‚Äù _is_ sort of formally stating something about stability in the specification. Although it‚Äôs not quite as all-encompassing as a Unicode-style full stability policy.

[13:38:05.0627] <jschoi>
 * I will note that ‚Äúdocumenting invariants‚Äù _is_ sort of formally stating something about stability in the specification. Although it‚Äôs not quite as all-encompassing as a Unicode-style full stability policy.

[13:38:47.0944] <ljharb>
sffc: is that wind chimes?

[13:43:05.0203] <sffc>
yeah, sorry, is it too loud?  I'm sitting outside and it's windy

[13:43:19.0508] <yulia>
jschoi: would you be ready to go next?

[13:43:45.0913] <ljharb>
> <@sffc:mozilla.org> yeah, sorry, is it too loud?  I'm sitting outside and it's windy

nah i was just curious. i could still hear you fine :-)

[13:44:17.0989] <yulia>
also ptomato would you be ready after?

[13:44:45.0077] <ptomato>
sure, I think I can make that work

[13:45:54.0905] <yulia>
ill just wait to see if jschoi is ready as the next presenter... else i might rely on you going really soon

[13:46:08.0164] <jschoi>
yulia: I am ready.

[13:46:28.0367] <yulia>
cool

[14:01:24.0181] <Kris Kowal>
The measure of my support for Array.fromAsync is that I hope it gets to stage 4 as fast or faster than Error cause :-)

[14:05:07.0956] <bakkot>
whoops, posted in the wrong channel, but

[14:05:12.0509] <bakkot>
there is no Set.from or Map.fromEntries

[14:06:10.0349] <ljharb>
Mathieu Hofman: it awaits the entry, why would it await either the key or the value (ie, it would take in an async iterable of entries)

[14:06:32.0294] <ljharb>
 * Mathieu Hofman: it awaits the entry, why would it await either the key or the value (ie, it would take in an async iterable of entries)

[14:06:59.0179] <bakkot>
that is not obviously the right thing, to me

[14:07:12.0568] <Mathieu Hofman>
Awaiting an entry would rarely be valuable

[14:07:16.0720] <ljharb>
all the more reason to have it be a separate proposal :-)

[14:07:39.0326] <Mathieu Hofman>
awating a value would more often be useful, but I've heard of use cases wanting to await the key as well

[14:09:19.0704] <Mathieu Hofman>
agreed, and that's why I wanted to avoid looping in anything entries related in this proposal, too many questions to resolve

[14:10:50.0032] <bakkot>
my laptop just crashed

[14:10:52.0648] <bakkot>
so notes bot is down

[14:10:57.0719] <ljharb>
https://github.com/tc39/proposal-setmap-offrom (cc erights )

[14:13:07.0438] <ljharb>
 * https://github.com/tc39/proposal-setmap-offrom (cc @erights)

[14:13:20.0274] <ljharb>
 * https://github.com/tc39/proposal-setmap-offrom (cc erights )

[14:13:33.0477] <yulia>
Justin Ridgewell: 

[14:13:40.0625] <yulia>
are you available to go next?

[14:13:47.0578] <Justin Ridgewell>
Sure

[14:14:03.0594] <Justin Ridgewell>
When does today's session end?

[14:14:14.0970] <Michael Ficarra>
46 minutes

[14:15:02.0108] <bakkot>
notes bot should be back up

[14:15:24.0453] <yulia>
nicolo-ribaudo: do you still need morre note takers?

[14:15:35.0473] <nicolo-ribaudo>
No, it's working now!

[14:15:38.0868] <yulia>
cool

[14:22:24.0647] <Kris Kowal>
The time of the Temporal proposal has changed, and the slides are arriving after they‚Äôre presented. Coincidence!?¬†ü§î

[14:24:21.0902] <bakkot>
wait, instant doesn't require a timezone? I know it doesn't carry one, but doesn't instant need to know the offset in the string to figure out what instant it actually represents?

[14:24:32.0805] <bakkot>
I guess I can go read the docs...

[14:30:13.0399] <yulia>
aight, who else wants to go next, chris garrett ? or rbuckton ?

[14:30:41.0545] <yulia>
I don't know if chris is in this chat..

[14:30:52.0358] <ptomato>
bakkot: it requires a "Z" or a UTC offset like "+03:00" but it doesn't require a name

[14:30:55.0030] <yulia>
so, rbuckton would you be able to fill the last 15 min?

[14:31:02.0949] <rbuckton>
I can go. 

[14:31:14.0869] <yulia>
great, thank you

[14:31:23.0893] <bakkot>
ptomato: I think the example in the slides was `2021-12-14T10:00[Mars/Olympus_Mons]` which has neither, no?

[14:31:28.0047] <bakkot>
or maybe the parser in my head is broken

[14:31:31.0485] <bakkot>
or I misread

[14:32:21.0735] <bakkot>
oh, it's on the slide twice, and the second time has a Z

[14:32:22.0703] <ptomato>
oh, let me double check

[14:32:25.0616] <bakkot>
ok

[14:34:01.0230] <ptomato>
ah, right, `2021-12-14T10:00[America/Vancouver]` without Z or UTC offset is a valid string for ZonedDateTime, meaning "that wall-clock time in that time zone". but it is not valid for Instant

[14:35:11.0516] <bakkot>
and contrariwise `2021-12-14T10:00[Mars/Olympus_Mons]` without Z is valid for... I guess PlainDateTime? but neither ZonedDateTime (because unknown time zone) or Instant (because no Z or known time zone)

[14:35:28.0404] <bakkot>
I was just confused by it being different in the two places it appeared on the slide

[14:35:30.0604] <bakkot>
wait, three places

[14:35:30.0920] <ptomato>
correct

[14:41:32.0617] <danielrosenwasser>
üëç with how confusing cover grammars are to understand during implementation

[14:42:02.0264] <bakkot>
cover grammars are closer to how you'd implement though, I think

[14:42:13.0010] <bterlson>
I feel like the cover grammar is useful for implementers, otherwise you don't know what to speculatively parse to avoid unbounded lookahead? What  syntax is valid in the cover feels hard and possibly error prone to recover given just a token to lookahead for?

[14:42:13.0124] <danielrosenwasser>
Depends on the implementation

[14:42:23.0505] <bakkot>
does anyone have an implementation which is not recursive descent?

[14:42:42.0613] <yulia>
we have the parser generator to a table but we aren't shipping it

[14:43:21.0007] <yulia>
our production parser is recursive descent

[14:43:25.0569] <danielrosenwasser>
So IIRC, for our object literals we do a cover grammar implementation, and for arrow functions we use a speculative parse / unbounded lookahead

[14:43:39.0494] <danielrosenwasser>
 * So IIRC, for our object literals we do a cover grammar implementation, and for arrow functions we use a speculative parse / unbounded lookahead

[14:43:49.0058] <danielrosenwasser>
But we are not an engine team

[14:44:02.0634] <nicolo-ribaudo>
Babel uses a cover gammar both for objects and for arrows. Being able to follow the spec helps with implementation correctness.

[14:44:25.0688] <bakkot>
danielrosenwasser: is your impl public? I'd enjoy looking at it probably

[14:44:34.0290] <danielrosenwasser>
> <@bakkot:matrix.org> danielrosenwasser: is your impl public? I'd enjoy looking at it probably

lol no you wouldn't

[14:44:46.0542] <danielrosenwasser>
it's gross and awful

[14:44:47.0551] <shu>
danielrosenwasser: i specifically didn't say engine team for that reason :)

[14:44:49.0683] <yulia>
 * we have the parser generator to a table but we aren't shipping it

[14:44:51.0019] <danielrosenwasser>
https://github.com/microsoft/TypeScript/blob/main/src/compiler/parser.ts

[14:44:53.0869] <bakkot>
I chose to be maintainer of the JS spec, I like gazing into the abyss :P

[14:47:08.0716] <danielrosenwasser>
https://github.com/microsoft/TypeScript/blob/main/src/compiler/parser.ts#L4502

This is the start of the abyss. Keep in mind we have to parse out annotations

[14:47:22.0516] <danielrosenwasser>
Feel free to DM me complaints

[14:47:58.0857] <bakkot>
oh I've read this before

[14:48:00.0326] <bakkot>
I forget why

[14:48:20.0794] <bterlson>
parser.ts is hardly an abyss

[14:48:33.0710] <bterlson>
I mean, if it is, I don't know what that makes checker.ts

[14:49:32.0767] <danielrosenwasser>
> <@bakkot:matrix.org> I forget why

There was one time where we were the odd-one-out of parsing and it was because every other implementation had a parsing bug

[14:50:00.0398] <bakkot>
yeah I've filed a few bugs with the parser

[14:51:41.0751] <danielrosenwasser>
> <@bterlson:matrix.org> I mean, if it is, I don't know what that makes checker.ts

<3 checker.ts

[14:52:02.0564] <danielrosenwasser>
Ctrl+F any function name you need and you immediately find it

[14:52:39.0017] <danielrosenwasser>
(quarter-joking)

[14:53:05.0052] <yulia>
this sounds like my workflow

[14:55:52.0988] <shu>
a ridiculous workflow i actually like is jumping-to-definition ecma262 source: Ctrl+F AbstractOperationName<space>(

[14:56:45.0535] <danielrosenwasser>
it would be nice if the spec had an easy way to Ctrl+F in specific ways for this

[14:57:01.0943] <shu>
in the rendered version, you mean?

[14:57:12.0573] <yulia>
i find the above is really useful -- i use it all the time as well

[14:57:21.0407] <danielrosenwasser>
Yeah - I don't want to load the page, but IIRC abstract operations don't have an easy way to Ctrl+F similarly

[14:57:30.0346] <danielrosenwasser>
 * Yeah - I don't want to load the page, but IIRC abstract operations don't have an easy way to Ctrl+F similarly

[14:57:51.0829] <shu>
yeah that'd be nice

[14:57:56.0452] <shu>
though the searchbar is pretty good

[14:58:26.0919] <ptomato>
I was just thinking the other day that a keyboard shortcut to jump focus to the searchbar would be nice

[14:58:46.0042] <yulia>
wait doesn't tab work?

[14:59:03.0537] <bakkot>
`/`

[14:59:04.0300] <ptomato>
so it does!

[14:59:09.0980] <danielrosenwasser>
`/`! TIL

[14:59:31.0091] <danielrosenwasser>
 * `/`! TIL

[14:59:45.0661] <danielrosenwasser>
Don't know why I didn't think to try that

[14:59:50.0698] <ptomato>
apparently I should've just asked here earlier üòõ

[14:59:58.0221] <yulia>
oh nice, `/`

[15:00:56.0271] <shu>
there is a sliver of truth in what Ron says about some things being obscure _and_ consistent cross-languages. in my wheelhouse, memory ordering names mean more or less the same thing

[15:01:09.0092] <shu>
whether that applies to regular expressions though, my hunch is no?

