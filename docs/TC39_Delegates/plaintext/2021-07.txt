2021-07-01

2021-07-02

2021-07-03

2021-07-04

2021-07-05

2021-07-06

2021-07-07

2021-07-08
[18:09:04.0013] <bakkot>
ljharb: the github pages deploy seems to be broken

[18:09:25.0852] <bakkot>
seems to be hitting https://github.com/tc39/ecma262/blob/f4694412639e19acab2c0dd5baac247aa7d7a889/scripts/auto-deploy.sh#L6-L7

[07:45:15.0204] <yulia>
is dan clark one matrix?


2021-07-09
[20:02:59.0496] <Aki>
yulia: https://matrix.to/#/@dandclark:matrix.org


2021-07-10

2021-07-11
[12:08:34.0233] <Aki>
Richard Gibson leobalter who's doing the 402 update?

[12:10:27.0457] <Aki>
is anyone giving a test262 update?

[12:10:59.0122] <ryzokuken>
cc sffc 


2021-07-12
[18:26:55.0897] <justingrant>
In case anyone wants to figure out when the plenary meeting is in their own time zone (accurately adjusting for DST, of course!), I heard there's a cool ECMAScript API you can use for that. üòÄ  

Just go to https://tc39.es/proposal-temporal/docs/ and open the devtools console in the browser. Just substitute your own time zone and optionally how long after the start of the meeting.

```
Temporal.ZonedDateTime.from('2021-07-13T10:00[Asia/Tokyo]')
  .withTimeZone('America/Los_Angeles')
  .add({minutes: 160})
// => 2021-07-12T20:40:00-07:00[America/Los_Angeles]
```


[18:29:30.0256] <ryzokuken>
justingrant can you use `Temporal.now.timeZone()` instead? 

[18:29:52.0546] <justingrant>
Oh, good point!  I'll edit.

[18:29:58.0101] <ryzokuken>
üòá

[18:31:02.0529] <justingrant>
 * In case anyone wants to figure out when the plenary meeting is in their own time zone (accurately adjusting for DST, of course!), I heard there's a cool ECMAScript API you can use for that. üòÄ

Just go to https://tc39.es/proposal-temporal/docs/ and open the devtools console in the browser. Optionally, you can add some time after the start of the meeting.
```
Temporal.ZonedDateTime.from('2021-07-13T10:00[Asia/Tokyo]')
  .withTimeZone(Temporal.now.timeZone()) // your system time zone
  .add({minutes: 160})
// => 2021-07-12T20:40:00-07:00[America/Los_Angeles]
```

[08:44:45.0069] <sffc>
ryzokuken is giving the 402 update

[11:09:17.0525] <yulia>
iain: hello, 

[11:09:25.0217] <iain>
Hello!


2021-07-13
[18:06:26.0560] <bakkot>
tcq is back! ü•≥

[18:10:05.0201] <bterlson>
Yes sorry about TCQ friends. Freak accident combined with paternity leave was a bad combo :-P

[18:12:14.0011] <Justin Ridgewell>
Can an admin update the Reflector link in the room description?

[18:12:14.0620] <Justin Ridgewell>
https://github.com/tc39/Reflector/issues/380

[18:12:49.0901] <littledan>
bterlson: Congrats on paternity!

[18:20:47.0713] <littledan>
Does anyone know what the current status of archival is, in terms of whether we're managing to archive everything in our GitHub org, and how to access the archives?

[18:34:31.0785] <ryzokuken>
why are there multiple JSON standards? I thought ECMA-404 was the "canonical" JSON standard but apparently IETF has its own JSON?

[18:35:24.0592] <littledan>
everyone considers their own standard canonical!

[18:35:59.0357] <ryzokuken>
well, let me rephrase, I thought JSON was TC39's domain...

[18:36:04.0855] <ryzokuken>
https://datatracker.ietf.org/doc/html/rfc8259 btw

[18:36:15.0574] <ljharb>
a musical canon of standards / a round of JSON?

[18:36:42.0852] <ljharb>
 * a musical canon of standards / a round of JSON?

[18:37:29.0282] <bterlson>
I see them as complimentary standards. ECMA402 is very conservative, describes syntax mechanically, doesn't add much editorial fluff or advisory information

[18:37:33.0036] <ryzokuken>
wonder if there's any difference between the two standards: if the IETF standard is a subset/profile then I guess that's not _that_ unexpected.

[18:37:57.0016] <bterlson>
I use 8259 when I need to show people why it's a bad idea to use the complete grammar in ECMA-404

[18:38:06.0137] <bterlson>
 * I see them as complimentary standards. ECMA404 is very conservative, describes syntax mechanically, doesn't add much editorial fluff or advisory information

[18:38:16.0203] <HE Shi-Jun>
JSON is cross language/platform :)

[18:38:53.0763] <bterlson>
e.g. if you expect precision greater than IEEE754 doubles, , you're going to have a bad time, and RFC8259 helpfully calls that out

[18:39:49.0187] <ryzokuken>
thanks for pointing out the differences. Is something on that published somewhere? (maybe you should write something, it'll be useful üôà)

[18:40:33.0034] <ryzokuken>
but I generally expected the IETF standard to be more... concise. This is definitely a fun data point!

[18:43:37.0212] <ryzokuken>
the next IETF meeting (november 2021) is supposed to be in-person...

[18:43:44.0653] <bterlson>
You can ctrl+f rfc8259 for the phrase "interoperable in the sense that" to see the places where IETF suggested you avoid some corner of JSON

[18:43:46.0187] <Richard Gibson>
https://datatracker.ietf.org/doc/html/rfc8259#section-1.2 includes explicit reconciliation:
> The reference to ECMA-404 in the previous sentence is normative, not with the usual meaning that implementors need to consult it in order to understand this document, but to emphasize that there are no inconsistencies in the definition of the term "JSON text" in any of its specifications... If there is a difference found between them, ECMA and the IETF will work together to update both documents.

[18:43:52.0802] <HE Shi-Jun>
Yeah, JSON itself do not support specific type, there is always confusion/complain about int64

[18:44:39.0796] <ryzokuken>
> <@bterlson:matrix.org> You can ctrl+f rfc8259 for the phrase "interoperable in the sense that" to see the places where IETF suggested you avoid some corner of JSON

neat, thanks!

[18:44:52.0424] <HE Shi-Jun>
We also have the trouble of serialization of BigInt/Date/etc.

[18:45:26.0113] <ryzokuken>
HE Shi-Jun: what's wrong with ISO8601/RFC3339 for Date serialization?

[18:45:49.0443] <bterlson>
One problem we run in to is you need to know schema to know whether to treat a string value as a date value

[18:46:09.0198] <HE Shi-Jun>
The problem is you don't know whether it's a date value or string :playful:

[18:46:18.0339] <bterlson>
implementations which detect date-like strings and convert to date types have been highly problematic in the past

[18:47:24.0772] <bterlson>
int64 has similar problems - there is no good option. You encode as a number literal and lose precision as the json document traverses a JS runtime. Or you encode as a string and you either need schema or users have to deal with converting to int64 themselves.

[18:47:37.0041] <bterlson>
 * int64 has similar problems - there is no good option. You encode as a number literal and lose precision as the json document traverses a JS runtime. Or you encode as a string and you either need schema or users have to deal with converting to int64 themselves.

[18:47:41.0042] <HE Shi-Jun>
Previously I wrote a JSON hint proposal ( https://gist.github.com/hax/5691ca8acdf9179e63043857cdc3616b ) to solve the problem in general , does anyone interest in that?

[18:47:57.0683] <ryzokuken>
> <@haxjs:matrix.org> Previously I wrote a JSON hint proposal ( https://gist.github.com/hax/5691ca8acdf9179e63043857cdc3616b ) to solve the problem in general , does anyone interest in that?

that does sound cool, thanks

[18:48:33.0167] <ryzokuken>
well I dunno what's so wrong assuming valid ISO8601 strings were dates? but I might be missing something here

[18:48:57.0690] <bterlson>
There are many problems üòÅ

[18:49:12.0895] <bterlson>
For example, performance - you are now attempting to parse every string field.

[18:49:44.0397] <ryzokuken>
well, I'm running a regex over every field

[18:49:47.0258] <bterlson>
also, it can become unpredictable what the type of a field actually is - if I so happen to have data that matches the ISO8601 grammar, all of a sudden things are dates, but if not, its strings.

[18:49:54.0956] <ryzokuken>
and parsing if it matches the regex

[18:50:29.0066] <ryzokuken>
hm, that's fair. I guess you can assume strings and let users deal with things as they want

[18:50:43.0951] <bterlson>
I think when you know schema, the practice is fine (we do it all the time in Azure), but it gets messy when dealing with schemaless json

[18:51:31.0398] <ryzokuken>
sounds fair

[18:51:40.0621] <ryzokuken>
You should be able to know _where_ the dates are. Any combing through should be done explicitly by the user if needed...

[18:52:35.0642] <bterlson>
yeah I think that's right

[19:08:17.0093] <littledan>
Leo says he is stepping away and has no update

[19:08:33.0711] <littledan>
(for test262)

[19:08:58.0113] <littledan>
 * Leo says he is stepping away for dinner and has no update

[19:16:56.0910] <leobalter>
Thank you! I'm back now!

[19:20:13.0353] <littledan>
we're going to be hearing from someone from the LF on this topic too, right?

[19:20:23.0582] <ryzokuken>
I think so

[19:20:33.0195] <ryzokuken>
Rob asked them to present to us and they gladly agreed

[19:21:39.0349] <Aki>
Yeah but I don't think we ever got confirmation

[19:22:02.0001] <littledan>
hmm, are they not in the call?

[19:22:12.0087] <littledan>
Do you know who was going to give the update, so we can try to ping them?

[19:22:29.0113] <littledan>
I'm afraid this presentation isn't explaining things very clearly

[19:22:29.0970] <ryzokuken>
I think I recall Mike Dolan...

[19:23:21.0328] <littledan>
OK, Mike Dolan doesn't seem to be here

[19:23:37.0977] <bakkot>
does anyone know what acryonym he keeps saying

[19:23:42.0694] <bakkot>
"GDF"? "TGF"?

[19:23:48.0354] <HE Shi-Jun>
JDF

[19:23:48.0661] <ryzokuken>
JDF

[19:23:59.0567] <ryzokuken>
yeah I don't think anyone from LF ended up making it... maybe we can end this one early and come back to it later?

[19:24:00.0199] <HE Shi-Jun>
but I also want to ask what is JDF

[19:24:16.0256] <Aki>
JDF https://duckduckgo.com/?q=jdf+foundation

[19:24:27.0331] <devsnek>
uvenile Diabetes Research Foundation

[19:24:28.0699] <Aki>
sorry i didn't mean to drop a ddg link

[19:24:30.0484] <devsnek>
 * Juvenile Diabetes Research Foundation

[19:24:33.0426] <ljharb>
https://www.jointdevelopment.org/ ?

[19:24:34.0380] <Aki>
that was a mistake

[19:24:44.0253] <Aki>
yes that ljharb 

[19:24:55.0346] <Aki>
i just didn't remember their domain

[19:26:10.0649] <littledan>
OK, could the chairs figure out who from the LF we can invite to clarify all of these things?

[19:26:27.0663] <littledan>
I think Rob was leading this previously, and tried to set up that someone could attend to explain

[19:26:59.0097] <littledan>
I think the LF proposal is good, and I'm really confused about why Istvan is casting all this doubt on it.

[19:27:05.0782] <Aki>
I'll see if i can get ahold of Mike

[19:27:11.0031] <Aki>
yeah

[19:27:12.0885] <Aki>
about that

[19:27:39.0118] <Aki>
anyway fwiw this will be a GA vote, tc39 has very little sway in whether it happens or not

[19:27:48.0890] <shu>
this is too much inside baseball for SDO politics, can we get a champion for either side to explain implications for TC39's working mode?

[19:28:04.0673] <shu>
changes to IPR stuff makes me wary

[19:28:41.0140] <ryzokuken>
shu: my understanding is that they do not want to change the IPR, on the contrary, they want to be able to veto changes to the IPR policy

[19:28:55.0059] <shu>
that is a change to the process

[19:29:07.0252] <ryzokuken>
(because they value the status quo)

[19:29:09.0486] <shu>
that veto power is a special power given to LF over other members

[19:29:11.0329] <littledan>
the idea is just to make sure that we keep the IPR policy open

[19:29:14.0680] <shu>
i do not understand that change

[19:29:48.0594] <littledan>
I think the LF partnership would be very valuable, and we should discuss it further with them. I am not sure if Istvan is the best person to explain this to TC39.

[19:29:51.0672] <ryzokuken>
> <@shuyuguo:matrix.org> that veto power is a special power given to LF over other members

It is. I proposed allowing all members to be able to veto that, since it's so central to how we work...

[19:29:53.0550] <Aki>
TC39 is a special snowflake in SDO world, because we work so openly

[19:29:58.0624] <Aki>
that is what LF is interested in

[19:30:02.0580] <Aki>
our open standards work

[19:30:51.0592] <ryzokuken>
> <@dehrenberg:igalia.com> the idea is just to make sure that we keep the IPR policy open

that's precisely it

[19:31:19.0941] <shu>
i am not so much concerned with the intentions that are expressed but with the material implications

[19:31:38.0835] <devsnek>
they want the power to veto future changes that ecma may want to make?

[19:31:43.0679] <shu>
that's my reading

[19:32:24.0365] <littledan>
I'll just give my comments here in Matrix

[19:32:54.0629] <ryzokuken>
in the exact words, "for decisions that require a supermajority" so mostly just changes to the IPR policy and the bylaws IIUC

[19:33:09.0297] <ptomato>
this isn't public, as far as I understand - could a mod redact the discussion about it in TDZ?

[19:33:34.0260] <littledan>
I really strongly support this partnership. The Linux Foundation can help bring lots of extra interesting work to Ecma, and they can bring technical and administrative support to TC39. We've lacked all of those from Ecma so far.

[19:34:05.0113] <littledan>
> <@pchimento:igalia.com> this isn't public, as far as I understand - could a mod redact the discussion about it in TDZ?

This channel is all publicly readable

[19:34:20.0536] <ryzokuken>
also the logs are public

[19:34:26.0198] <ryzokuken>
also I think the agenda is public?

[19:35:19.0769] <devsnek>
istvan disclosed the topic and his slides on github at least

[19:35:28.0596] <ptomato>
oh, ok

[19:35:48.0298] <Aki>
yeah i don't think it's a secret. there's a difference between "not public" and "private" i guess

[19:38:53.0367] <littledan>
I'm not sure that what Waldemar is saying is correct.

[19:39:21.0845] <littledan>
anyway the GA doesn't play any role in our actual working mode going towards Stage 4

[19:40:19.0217] <ljharb>
under what circumstances would the GA not rubberstamp our standard every year anyways?

[19:40:25.0769] <littledan>
yeah, exactly

[19:40:53.0102] <shu>
i still do not understand why they want a veto

[19:40:57.0037] <littledan>
I think we should just expect to see a better level of support once the LF is involved, without any real upsets or surprises

[19:41:12.0812] <Aki>
they don't want us to turn into every other SDO

[19:41:18.0072] <ljharb>
shu: my reading is that they want to prevent the ecma GA from making disruptive changes in some scary possible future

[19:41:26.0977] <littledan>
shu: The idea was to bring LF people here for this topic. I guess we had some kind of coordination error. Hopefully we can ask them these questions tomorrow.

[19:41:31.0664] <shu>
so join as a voting member, and vote?

[19:41:46.0893] <shu>
like what is the manifest problem in the current process that requires a veto to safeguard?

[19:42:09.0269] <littledan>
Isabelle says that about literally every document btw (that they are not final and they are incomplete)

[19:42:34.0538] <ryzokuken>
> <@shuyuguo:matrix.org> like what is the manifest problem in the current process that requires a veto to safeguard?

I agree with that assessment fwiw. I think a better approach can be worked out.

[19:42:53.0570] <littledan>
well, let's hear from LF before drawing a conclusion, they must have had a reason

[19:43:05.0091] <ryzokuken>
but that has nothing to do with the engagement in general. These implementation details can be ironed out.

[19:45:30.0540] <littledan>
I think Istvan's analysis is unfair and not well-informed.

[19:46:39.0535] <Michael Ficarra>
FYI I did a side-by-side of the video call and the notes document, and it makes jumping in and out of note-taking SO much easier

[19:46:54.0270] <Michael Ficarra>
I highly recommend it for anyone who is note-taking-curious

[19:47:24.0021] <Michael Ficarra>
(it's possible everyone already does this and I am just late to the party)

[19:47:31.0181] <ljharb>
can someone advance tcq?

[19:47:34.0644] <waldemar>
littledan's criticism is not helpful here. Istvan is one of the most informed here.

[19:47:58.0883] <Aki>
working on it

[19:48:25.0697] <devsnek>
tcq does not match presentation

[19:49:17.0259] <Aki>
yes it does

[19:49:38.0838] <littledan>
I'm a bit baffled about how Istvan said he didn't understand the motivation for the partnership, when this was very clearly explained in the GA slides.

[19:51:01.0354] <ryzokuken>
This discussion is not very fruitful without someone from LF or Jochen here to correct our misunderstandings. Let's try to get them to attend on a later slot and then return to this?

[19:51:04.0774] <waldemar>
littledan: No it wasn't. In fact, I've heard a lot of false claims made about the motivation.

[19:51:30.0666] <waldemar>
Blatantly false.

[19:52:01.0762] <shu>
littledan: to me, the issue is there is a jarring divide between what's said, e.g. "we'll give you more resources, tooling, support, and it'll be great" and what's formally proposed (by-law changes, veto powers), and i'd rather go by what is formally proposed

[19:52:33.0867] <littledan>
For Ecma, the LF can bring more work items and technical/organizational services. For the LF, Ecma can give it this additional service (standardization) for its various projects.

[19:52:51.0848] <littledan>
(that's the motivation, not the bylaws details, which we'll just have to have LF people here to explain)

[19:53:13.0752] <littledan>
I imagine that the LF wants to make sure that Ecma doesn't become closed, that it retains its current openness

[19:54:20.0104] <bterlson>
maybe missing something obvious: why keep the note about the extends clause? Without designing to extend via subclassing, the fact that an identifier can appear in extends doesn't seem very interesting?

[19:56:05.0578] <shu>
bterlson: i think the "it won't throw" part seems reasonable to call out

[19:56:06.0590] <waldemar>
What the LF said during the GA is that they're doing this because they wanted an office in Switzerland.

[19:56:13.0062] <shu>
coming from other OO languages, one might think some built-ins are final

[19:56:38.0360] <HE Shi-Jun>
Actually nothing is final in ES?

[19:56:45.0559] <bterlson>
I suppose

[19:57:06.0550] <devsnek>
if its a living spec that means it can die

[19:58:47.0877] <HE Shi-Jun>
As allen explained, this term is used to denote that if you extend it, it keep some invariant. If we remove that, should we add some other text to keep such information?

[19:59:22.0633] <shu>
HE Shi-Jun: we are, we're replacing it in the PR with just "it works with the extends clause" or something to that effect, too lazy to copy out the exact language right now

[19:59:38.0895] <HE Shi-Jun>
Great! Thank you!

[20:35:57.0532] <Richard Gibson>
I don't even see value in that... isn't it true of *every* constructor that it works with `extends`?

[20:36:20.0400] <ryzokuken>
no, some specifically don't.

[20:37:48.0295] <ryzokuken>
Symbol doesn't, IIUC

[20:39:16.0833] <ryzokuken>
hm, I might be wrong, it's not triggering an error but IIRC it's not designed to be subclassable, right?

[20:41:57.0083] <bakkot>
Richard Gibson: yes, and we will have that text on every constructor

[20:42:01.0273] <bakkot>
we have a fair bit of boilerplate

[20:42:03.0590] <bakkot>
seems fine

[20:42:24.0565] <bakkot>
(to be clear we _currently_ have that text on every constructor, and are not proposing to remove it)

[20:45:03.0468] <ljharb>
> <@usharma:igalia.com> hm, I might be wrong, it's not triggering an error but IIRC it's not designed to be subclassable, right?

`new class extends Symbol {}` does throw tho.

[20:46:04.0523] <ryzokuken>
ah, I was just doing `class MySymbol extends Symbol { }`

[20:46:12.0717] <ryzokuken>
trying to construct it does fail

[20:46:19.0352] <ryzokuken>
`Uncaught TypeError: Symbol is not a constructor`

[20:46:50.0494] <bterlson>
Does Symbol have the note since it can appear in an extends clause without throwing? üòÅ

[20:47:23.0899] <devsnek>
> may be used as the value of an extends clause of a class definition but a super call to it will cause an exception.

[20:47:51.0403] <devsnek>
we are nothing if not thorough 

[20:50:49.0974] <Richard Gibson>
I'm just saying I would also support further removal of the "may be used as the value of an `extends` clause of a class definition" text as well. It's not misleading in the same way as the "designed to be subclassable text", it's just of dubious value.

[20:51:02.0658] <Richard Gibson>
 * I'm just saying I would also support further removal of the "may be used as the value of an `extends` clause of a class definition" text as well. It's not misleading in the same way as the "designed to be subclassable" text, it's just of dubious value.

[20:56:21.0696] <ljharb>
i think it's of value in the places where it makes sense, but the primitive constructors are not those places

[21:05:44.0263] <shu>
how fascinating

[21:06:26.0695] <bakkot>
non-contiguous weekends, fun

[21:06:34.0276] <bakkot>
something to add to "falsehoods programmers believe about time"

[21:07:49.0035] <shu>
indeed

[21:09:38.0585] <bakkot>
can someone put the conclusion in the notes

[21:09:43.0150] <bakkot>
I couldn't actually follow what the ask was

[21:11:01.0809] <ryzokuken>
bakkot: consensus on excluding "search" and "standard" from collations getter

[21:11:12.0758] <bakkot>
please put in notes

[21:18:18.0752] <ryzokuken>
> <@bakkot:matrix.org> please put in notes

done

[21:46:08.0344] <ryzokuken>
> <@bakkot:matrix.org> something to add to "falsehoods programmers believe about time"

https://yourcalendricalfallacyis.com/

[21:52:42.0287] <bakkot>
not clear to me that the thing Shane mentions would address Yulia's concern at all

[21:53:57.0176] <shu>
i have trouble understanding the specificity of Yulia's concern

[21:55:30.0116] <shu>
oh i see, iain is explaining, this is helpful

[21:56:17.0923] <ljharb>
seems to me like the hazard already exists tho, if any browser actually did the thing they're worried about?

[21:57:35.0349] <ryzokuken>
yeah, we need a normative PR to ECMA-402 to address the root cause

[21:59:53.0875] <ryzokuken>
what's needed is a centralized source-of-truth for these supported values that the different constructors draw from/check against

[22:01:31.0165] <littledan>
hello, yes, I'm around to chat about HTML integration if needed. You can find the PR at https://github.com/whatwg/html/pull/5339

[22:05:41.0373] <bakkot>
Did I understand correctly that the set of names to be made available in new realms is supposed to be resolved during stage 3?

[22:05:52.0849] <bakkot>
because that really does not seem like something which is appropriate to stage 3 to me

[22:06:17.0175] <littledan>
the set of things that HTML will expose. Each environment can choose its own.

[22:07:07.0688] <littledan>
the JS builtins are all available (unless an environment goes and deletes them)

[22:07:54.0640] <leobalter>
MM has this answer always ready 

[22:07:58.0900] <leobalter>
I love to hear this again

[22:08:25.0312] <littledan>
arguably, the HTML folks could be the ones to propose the exact list. We've done some research into possible dividing lines and how they would work out, but we haven't driven to the point of consensus on any particular one yet.

[22:09:07.0755] <bakkot>
I cannot imagine WHATWG coming up with any answer other than "literally all of them", from my experience with WHATWG

[22:09:35.0274] <littledan>
well, that's not where the conversation is with WHATWG right now. I think everyone agrees that, like workers, it is a place where only some of the things should be exposed

[22:09:57.0438] <littledan>
so the idea is that WebIDL would have notation like [Exposed=Realm] to opt in to interfaces showing up in realms

[22:10:00.0223] <shu>
i have the opposite intuition, especially with prior art with restricted global scopes like workers as dan says

[22:10:10.0218] <leobalter>
bakkot I can answer that if you bring it to the queue, but it's hard for me to multitask right now

[22:10:16.0044] <leobalter>
 * bakkot:  I can answer that if you bring it to the queue, but it's hard for me to multitask right now

[22:10:24.0194] <bakkot>
ugh sorry I've been trying to take notes

[22:10:27.0988] <littledan>
The specification on the JS side imposes restrictions on the capabilities that globals in realms can expose

[22:10:32.0827] <bakkot>
POO: more note takers

[22:10:38.0430] <bakkot>
can someone TCQ that

[22:12:27.0032] <bakkot>
> <@shuyuguo:matrix.org> i have the opposite intuition, especially with prior art with restricted global scopes like workers as dan says

that's reasonable. so I guess not all of them, but rather "all but an explicitly omitted subset"

[22:15:34.0995] <shu>
what's the phrase jack is saying?

[22:15:40.0537] <shu>
i heard "hyper graph membrane"?

[22:16:00.0607] <leobalter>
bakkot: one thing from the ES draft: the realms API require the globalThis to be an ordinary object and all the properties must be configurable

[22:16:14.0693] <devsnek>
i'm still really salty about not even having opt in object sharing

[22:17:22.0194] <shu>
i... cannot follow this conversation

[22:19:09.0336] <ljharb>
it's a very complicated realm (sorry sorry sorry)

[22:20:17.0512] <devsnek>
i don't know where the queue is

[22:20:33.0352] <ryzokuken>
the queue is up-to-date

[22:20:37.0550] <ljharb>
tcq link is in the reflector (https://github.com/tc39/Reflector/issues/380)

[22:20:44.0681] <ljharb>
 * it's in the reflector (https://github.com/tc39/Reflector/issues/380)

[22:20:47.0208] <devsnek>
i mean on tcq

[22:20:52.0970] <ljharb>
 * tcq link is in the reflector (https://github.com/tc39/Reflector/issues/380)

[22:20:55.0322] <devsnek>
jack works is speaking rn?

[22:21:39.0416] <devsnek>
yea sorry for the confusion, i already had tcq open

[22:21:42.0915] <ryzokuken>
yeah but they skipped their own item üòÖ

[22:21:47.0405] <devsnek>
was just trying to figure out who was speaking

[22:23:59.0755] <Jack Works>
> <@shuyuguo:matrix.org> i heard "hyper graph membrane"?

yes

[22:25:43.0101] <shu>
thanks

[22:26:34.0682] <Jack Works>
> <@ljharb:matrix.org> it's a very complicated realm (sorry sorry sorry)

üòÇ yeah, a complicated kind of membrane, but it is useful when doing permission controls

[22:27:00.0191] <Jack Works>
it's a bit like what Firefox implemented in web extension (X-Ray vision to C++ objects)

[22:27:22.0792] <ljharb>
Jack Works: apologies, i was making a pun about the topic of membranes/realms being complicated :-) should have done it in TDZ

[22:27:38.0072] <ljharb>
 * Jack Works: apologies, i was making a pun about the overarching topic of membranes/realms being complicated :-) should have done it in TDZ

[22:35:07.0382] <littledan>
As Mark said, "The callable boundary meets the use cases that most of us have in mind"--This is what I was trying to get at. It's iterating to meet the previously articulated goals.

[22:35:34.0929] <ljharb>
"most of us" may apply to the champion group, but does not necessarily apply to the entire committee, nor to the users who have been hoping for Realms for half a decade

[22:35:43.0422] <ljharb>
 * "most of us" may apply to the champion group, but does not necessarily apply to the entire committee, nor to the users who have been hoping for (object-sharing) Realms for half a decade

[22:35:50.0832] <littledan>
(sorry for interrupting; Leo is making a good point)

[22:38:38.0193] <Jack Works>
it looks like different targets are conflicting

[22:39:18.0322] <Jack Works>
virtualization wants clean realm, security wants absolute boundary

[22:39:44.0895] <littledan>
I don't see a conflict, they're just different feature requests

[22:39:55.0073] <Jack Works>
and other cases want direct object sharing and vendor-modified realm

[22:40:20.0408] <littledan>
This Realms proposal does not make the Node.js vm module obsolete. That doesn't make it unmotivated.

[22:40:53.0569] <Jack Works>
yeah but vm module only available on Node

[22:41:19.0766] <Jack Works>
using iframe is awkward cause there are unremovable things like location

[22:43:04.0704] <shu>
agree with dan here, the shape of the counterargument from jordan and gus seems to be, "the old proposal solved what i wanted to do as well, and this new proposal reduced the scope, so i'd rather this not move forward because it'd preclude what i want with direct object access"

[22:43:14.0098] <devsnek>
i cannot understand how someone could block having an option

[22:43:29.0000] <shu>
but this proposal moving forward doesn't remove the objection with direct object access

[22:43:35.0359] <devsnek>
like what concern drives that

[22:43:38.0925] <shu>
devsnek: mark explained it

[22:44:02.0328] <devsnek>
mark explained why `unsafeObjectSharing` option is bad? i must've missed it

[22:44:46.0176] <Jack Works>
+1, I've proposed to give developers choices but not accepted by the champion

[22:44:49.0623] <shu>
that the value for building in an isolation into the platform as a safeguard against a footgun is that it's not escapable

[22:45:06.0789] <devsnek>
escapable by who

[22:45:11.0226] <shu>
if you make it escapable, we shouldn't really take the time and effort to build the isolation into the platform

[22:45:13.0358] <shu>
by the developer

[22:45:17.0963] <littledan>
Making a new Realm is just a very bad way to get a fresh copy of built-in functions. It's not going to be very easy to optimize to make way too many Realms, and it will create things in the wrong Realm.

[22:45:19.0282] <devsnek>
is the developer gpt3?

[22:45:26.0512] <shu>
what?

[22:45:29.0647] <Jack Works>
We can made isolation _by default_ but leave a escape path

[22:45:32.0962] <devsnek>
who is accidentally typing out `allowUnsafeObjects: true` in their code

[22:45:38.0921] <shu>
not accidentally

[22:45:51.0484] <shu>
consciously choosing it without understanding the consequences

[22:46:02.0298] <shu>
or being overconfident in their userland isolation library

[22:46:06.0562] <littledan>
Sorry, is arguing points in writing not sufficiently open? Didn't we have a big thread about this all?

[22:46:32.0497] <devsnek>
that seems pretty condescending :/

[22:46:42.0113] <devsnek>
littledan it may have been

[22:46:45.0093] <shu>
sorry, something i said is condescending?

[22:46:59.0374] <Jack Works>
> <@dehrenberg:igalia.com> Sorry, is arguing points in writing not sufficiently open? Didn't we have a big thread about this all?

actually I think all things we discussed here is discussed in the thread, there isn't really new things üòÇ

[22:47:07.0503] <leobalter>
As Greg is next in the queue: `Greg Whitworth (GCW)` (cc bakkot )

[22:47:19.0876] <devsnek>
assuming that developers can't  make informed decisions and tc39 needs to hold their hand through using realms "safely"

[22:47:54.0968] <devsnek>
 * assuming that developers can't  make informed decisions and tc39 needs to hold their hand through using realms "safely"

[22:47:59.0807] <ryzokuken>
what about malicious developers running scripts on a secure platform though?

[22:48:01.0655] <shu>
it's not pure assumption, this was informed by enthusiasm from some Google internal folks as well as others on Twitter who were excited to use the previous Realm proposal to run untrusted code

[22:48:06.0557] <ryzokuken>
or running untrusted scripts?

[22:48:10.0962] <shu>
thinking it was a lightweight sandbox

[22:48:49.0982] <devsnek>
if you leave the "thisBreaksTheSandboxAllowObjects" option unspecified it apparently is a lightweight sandbox

[22:49:07.0210] <devsnek>
i would be fine with the option being called that

[22:49:47.0108] <Jack Works>
anyone I'm natural on the isolated version, the things I worried about is how to pass ArrayBuffer

[22:49:59.0746] <devsnek>
> <@usharma:igalia.com> what about malicious developers running scripts on a secure platform though?

if the malicious person is outside the realm what does any of this matter anyway

[22:53:10.0918] <Jack Works>
(A random footgun.png)

[22:53:16.0695] <ryzokuken>
the malicious code is inside but direct object access allows them to access globals from the outside

[22:53:40.0158] <devsnek>
don't enable the option for malicious code

[22:56:02.0339] <ryzokuken>
bakkot: ping

[22:56:28.0951] <bakkot>
sorry, another 500

[22:56:32.0752] <bakkot>
restarted

[22:56:46.0302] <Josh Blaney>
it's back!!

[22:56:47.0725] <Josh Blaney>
thanks!

[22:56:55.0852] <Josh Blaney>
I didn't have TCQ open, sorry I jumped right in

[22:57:00.0764] <littledan>
given the really short schedule, maybe we can have an overflow item (of an hour or two?)

[22:57:13.0555] <littledan>
> <@joshbdev:matrix.org> I didn't have TCQ open, sorry I jumped right in

that's OK, notetakers have priority

[22:57:30.0700] <bakkot>
(it's actually the google docs API which is 500'ing, not as I previously claimed the google speech API)

[22:58:02.0404] <ryzokuken>
> <@dehrenberg:igalia.com> given the really short schedule, maybe we can have an overflow item (of an hour or two?)

I'll ask at the end if folks are okay with that

[22:59:22.0229] <HE Shi-Jun>
Because this is a very complicated topic, could we have a summary about the argument if we decide to continute the topic tommorow?

[23:05:58.0729] <leobalter>
HE Shi-Jun: this is related to the slide 6 https://docs.google.com/presentation/d/1MgrUnQH25gDVosKnH10n9n9msvrLkdaHI0taQgOWRcs/edit#slide=id.ge435a9058a_0_563 

but I'd leave the summarization open 

[23:11:31.0173] <HE Shi-Jun>
Thank you.

[06:06:29.0156] <Jamie Kyle>
It looks like the sign-in form on the meeting logistics issue is pointing to the May meeting https://github.com/tc39/Reflector/issues/380

[06:07:08.0455] <Jamie Kyle>
Does anyone have the actual link to join the meeting?

[06:42:01.0454] <littledan>
It's the same as the one that form gives you


2021-07-14
[17:47:18.0551] <littledan>
I am having more trouble than I expected being awake for TC39, so I will skip the first half of the day, and be present in the second half. Thanks for understanding.

[17:59:59.0077] <bakkot>
ljharb: my computer started freezing as soon as you started addressing me so I have absolutely no idea what you said

[18:00:21.0085] <ljharb>
bakkot: ah np, was just casually mentioning that https://github.com/tc39/ecma262/pull/2125 is ready to go once you and/or shu have signed off on it :-)

[18:00:29.0224] <bakkot>
gotcha, thanks

[18:02:01.0048] <ljharb>
my presentation: https://github.com/tc39/proposal-private-fields-in-in/issues/7

[18:02:19.0598] <devsnek>
imagine, `__proto__` outside of annex b

[18:02:43.0697] <shu>
haha dang, jmdyck said he wants to stop thinking about this

[18:02:57.0684] <shu>
he is usually indefatigable

[18:12:34.0127] <bakkot>
for the notes, who is speaking?

[18:12:42.0846] <ryzokuken>
Dan Clark?

[18:12:52.0981] <Michael Ficarra>
bakkot: DDC

[18:13:50.0629] <leobalter>
ryzokuken: I just want to confirm - and inform - the Realms champions will be available tomorrow for the overflow time, but some people won't be available tonight

[18:14:30.0715] <Aki>
oh that's helpful info

[18:14:40.0794] <Aki>
leobalter: i was just about to attempt to squeeze it in later today

[18:15:15.0080] <leobalter>
Thanks, Aki ! By the end of the meeting yesterday we said Wednesday and Caridy won't be able to attend today/tonight

[18:15:17.0130] <ryzokuken>
leobalter: thanks for letting us know!

[18:15:39.0243] <leobalter>
and by Wednesday we mean the 3rd day of the meetings

[18:15:46.0843] <Aki>
w/th

[18:16:10.0699] <Aki>
leobalter: after lunch, right?

[18:17:13.0168] <leobalter>
Let me confirm with Caridy, because I'm guessing the first time available would be doable

[18:17:47.0149] <Aki>
okay. i just had y'all's scheduling constraints

[18:19:50.0415] <leobalter>
Aki: Caridy is available after 11PM East Time (3rd day)... this should be the lunch time 

[18:31:43.0329] <Tierney Cyren>
FWIW I agree with @shu

[18:31:54.0860] <Tierney Cyren>
damn it 

[18:31:55.0686] <Tierney Cyren>
I'm still not used to the autocomplete

[18:32:07.0479] <devsnek>
what is the host hook on this slide for?

[18:32:08.0099] <Tierney Cyren>
I think allowing some JavaScript assertion is important

[18:33:34.0424] <Tierney Cyren>
I got this book at a thrift store when I was a kid

[18:33:42.0255] <Tierney Cyren>
this was in like 2009 or something

[18:33:51.0208] <Tierney Cyren>
JScript always stuck in my head after that

[18:34:17.0590] <devsnek>
ohno

[18:36:18.0082] <devsnek>
decorators? in *my* javascript?

[18:37:22.0185] <ljharb>
üí© queue advance?

[18:38:55.0163] <bterlson>
queue advanced, thanks and sorry

[18:53:28.0011] <HE Shi-Jun>
the example code is leaking privates...

[18:53:57.0633] <ljharb>
intentionally, sure

[18:54:28.0516] <HE Shi-Jun>
no, i mean it's only want to leak to test, but actually someone can get it

[18:55:10.0502] <devsnek>
i think he means, now everything that is not the test can use it too

[18:55:28.0110] <devsnek>
but that's because they stored it on metadata

[18:55:36.0672] <ljharb>
true, because symbols are public

[18:55:43.0054] <devsnek>
if you stored it somewhere else, like in the test library, it wouldn't be leaked

[18:55:48.0849] <HE Shi-Jun>
So it's a bat example...

[18:55:52.0308] <HE Shi-Jun>
bad example

[18:55:58.0400] <devsnek>
ü§∑‚Äç‚ôÄÔ∏è

[18:59:28.0552] <HE Shi-Jun>
devsnek: So we should fix the example to store it in somewhere else, or people may just copy the example code in the proposal repo :)

[19:02:00.0809] <HE Shi-Jun>
I remember rbuckton have a similar proposal (but different syntax) for auto accessor?

[19:04:32.0025] <leobalter>
We are a bit faster compared to the initial schedule, I believe it's good if we want to extend time to clear out questions about Decorators

[19:04:58.0025] <leobalter>
as in, saving from time when it's eventually presented for Stage 3

[19:05:39.0249] <bakkot>
ljharb: you can just have a different private field that you check, surely?

[19:05:55.0061] <ljharb>
objects can be partially populated with fields.

[19:06:00.0002] <bakkot>
meh

[19:06:03.0995] <bakkot>
technically true, not super relevant

[19:06:04.0379] <devsnek>
lol

[19:06:14.0467] <bakkot>
just put the field next to the accessor, now both must exist or neither do

[19:06:18.0228] <ljharb>
there's also value in being able to be explicit instead of dancing around what i'm trying to check

[19:06:28.0868] <bakkot>
sorry, for the notes, who just talked?

[19:06:48.0748] <HE Shi-Jun>
bakkot: seems not a good code style :)

[19:07:06.0730] <bakkot>
eh, checking in general seems like not good code style

[19:07:12.0780] <Tierney Cyren>
sounds like a good ESLint contribution :P

[19:07:19.0499] <bakkot>
just do the thing and if people misuse your class they get an error, it's fine

[19:07:44.0132] <bakkot>
static methods should check

[19:07:46.0334] <bakkot>
but not `this`

[19:07:51.0771] <ljharb>
lol that is a subjective debate that probably isn't productive to have, but suffice to say that is not a universal api design principle in userland

[19:07:52.0472] <HE Shi-Jun>
so if auto accessor i think we should use class brand check (class.hasInstance proposal)

[19:08:19.0828] <bakkot>
**for the notes, who just talked**?

[19:08:27.0790] <bakkot>
ah, rgn, thanks whoever put that in

[19:08:34.0674] <Josh Blaney>
richard gibson, I was looking

[19:11:57.0971] <devsnek>
-2 points for not using .js.org

[19:12:30.0932] <Tierney Cyren>
it would be nice if that was in a more neutral home

[19:12:37.0880] <Tierney Cyren>
(js.org)

[19:14:50.0488] <Richard Gibson>
shu: when you take the questions back, please make sure to ask about interleaved vs. at-the-end initializers

[19:15:20.0338] <shu>
Richard Gibson: specifically, if we would have concerns with making `addInitializer` unconditionally available if they were all at the end?

[19:15:34.0842] <Richard Gibson>
correct

[19:15:43.0740] <shu>
roger

[19:15:50.0255] <shu>
that feels okay to me

[19:16:15.0243] <Richard Gibson>
it may not fly for other reasons, but I am still interested in the answer

[19:16:23.0243] <shu>
i can't speak to if the use cases `@init` is supposed to solve still work fine with all-at-the-end

[19:16:29.0295] <shu>
but impl wise seems fine

[19:16:40.0394] <Richard Gibson>
right, exactly

[19:16:54.0303] <ljharb>
my `@bound` use cases do require it be interleaved

[19:16:57.0185] <devsnek>
initializers at the end feels weird in the case of multiple decorators

[19:17:08.0086] <ljharb>
so that number 2 can store a bound reference to number 1, eg

[19:18:51.0616] <bakkot>
Justin Ridgewell: this actually identical to the find/findLast precedent

[19:21:33.0860] <Richard Gibson>
@ljhar

[19:21:47.0623] <Richard Gibson>
 * @ljharb: how would that break down with at-the-end evaluation?

[19:21:55.0635] <ryzokuken>
bterlson: Aki  could you give the delegate role to dcrousso ?

[19:22:14.0982] <Richard Gibson>
or rather, at-the-beginning so it can be accessed _in_ the constructor

[19:24:08.0726] <devsnek>
someone needs to be muted

[19:24:10.0670] <ljharb>
Richard Gibson: `class C { @init:bound x() {} foo = this.x; }` - now, on a `const i = new C()`, `i.foo` is an unbound `x` if not interleaved

[19:25:08.0112] <Richard Gibson>
ack, thanks

[19:25:18.0681] <leobalter>
"any objections?"

_almost silence but background noise that sounds like hammering_

[19:25:35.0168] <ljharb>
ok to interrupt and ask if the mic gain can be turned down?

[19:25:37.0073] <leobalter>
 * "any objections?"

_almost silence but background noise that sounds like hammering_

[19:25:38.0861] <Michael Ficarra>
ow my ears

[19:25:54.0436] <devsnek>
is philip making popcorn

[19:26:32.0253] <Michael Ficarra>
so much better, thanks

[19:26:54.0813] <devsnek>
`setTimeout` with a capital T

[19:27:10.0443] <devsnek>
oh just namespaces

[19:28:40.0196] <devsnek>
for anyone else who is curious https://gc.gy/93934712.png

[19:33:07.0682] <Jamie Kyle>
Sorry if I misunderstood, ljharb you were saying capital implied constructor? What about Math/Reflect/etc?

[19:33:37.0335] <ljharb>
Jamie Kyle: a nested one implies constructor to me. `Math.Foo` would imply the same to me. top-level is fine as a "namespace or constructor"

[19:33:48.0257] <ptomato>
leobalter: https://github.com/tc39/proposal-temporal/issues/1583 is the context

[19:34:12.0643] <leobalter>
Thank you!

[19:34:22.0534] <devsnek>
shu coming in with the good logic

[19:34:27.0392] <devsnek>
i can't argue with that

[19:34:36.0648] <devsnek>
although i prefer the aesthetics of lowercase

[19:35:48.0865] <Jamie Kyle>
I agree that `Temporal.now` feels like a method to me, especially with `Date.now()`

[19:37:11.0384] <HE Shi-Jun>
If `Temporal.Now`, I think many would use `new Temporal.Now()` , is that allowed?

[19:37:22.0667] <ljharb>
that's my confusion argument; and no, that would throw too

[19:37:28.0362] <ljharb>
since this is just a normal object.

[19:37:46.0102] <HE Shi-Jun>
so I will like to support `Temporal.now()`  :)

[19:38:15.0436] <devsnek>
i don't think people will do that

[19:39:39.0214] <HE Shi-Jun>
devsnek: Not sure, could we have research on such things?

[19:39:57.0426] <Jamie Kyle>
The only things I've seen in the JS community with regards to nested namespaces is capitalizing them. Such as in https://www.typescriptlang.org/docs/handbook/namespaces.html

```
namespace Shapes {
  export namespace Polygons {
    export class Triangle {}
    export class Square {}
  }
}
```

[19:40:09.0600] <ljharb>
i don't think people will do either `Temporal.now()` or `new Temporal.Now()` - and if they do, they'd only do it once. so i don't think that's an important point either way.

[19:40:26.0444] <bakkot>
e.g.

```
const NodeTypes = {
  element: 1,
  text: 3,
}
```
or whatever

[19:40:31.0465] <Jack Works>
anyway typescript will stop me when I call API in a wrong way, but yes Temporal.now looks like Date.now

[19:40:39.0885] <ljharb>
> <@jamiebuilds:matrix.org> The only things I've seen in the JS community with regards to nested namespaces is capitalizing them. Such as in https://www.typescriptlang.org/docs/handbook/namespaces.html
> 
> ```
> namespace Shapes {
>   export namespace Polygons {
>     export class Triangle {}
>     export class Square {}
>   }
> }
> ```

that's typescript syntax, not JS syntax tho

[19:41:09.0288] <devsnek>
i think we should just ask if anyone would block the current naming since its current

[19:41:32.0273] <Jamie Kyle>
Its just a clear place where I can see people naming things explicitly like this

[19:41:52.0881] <Jamie Kyle>
There are lots of other examples. i.e. `React.PropTypes`

[19:41:54.0248] <ljharb>
i've seen and written plenty of code naming these things with lowercase on nested things also.

[19:42:16.0102] <ljharb>
and a react component has `.propTypes`; react itself isn't even consistent there.

[19:42:29.0664] <Jamie Kyle>
Not a namespace!

[19:43:40.0046] <HE Shi-Jun>
To me, Temporal.now is more like globalThis.parseInt , not React.PropTypes :)

[19:44:04.0507] <Jamie Kyle>
parseInt is a function though?

[19:44:06.0174] <bakkot>
> <@haxjs:matrix.org> To me, Temporal.now is more like globalThis.parseInt , not React.PropTypes :)

Temporal.now isn't callable, though

[19:46:19.0656] <bakkot>
syg: can you fix up the last thing you said in the notes, bot mangled it and I missed it

[19:46:29.0664] <HE Shi-Jun>
oh! I made mistake! So i slightly support Temporal.Now now :)

[19:47:21.0402] <devsnek>
i'm very sad about this topic, now i'll never be able to propose `array.forEach((v) => { if (c(v)) Array.forEach.break() })`

[19:48:03.0011] <Jamie Kyle>
twitter poll https://twitter.com/buildsghost/status/1415140845058023429

[19:48:23.0749] <Michael Ficarra>
which is more effective at dooming your agenda item? "this is universal truth and should be completely uncontroversial" or "this should be quick"?

[19:48:34.0373] <HE Shi-Jun>
`Array.forEach.break()` sounds interesting üòÄ

[19:49:32.0617] <devsnek>
yeah strong block on both points

[19:49:36.0965] <devsnek>
:^)

[19:50:06.0818] <Jack Works>
does `Intl` have nested namespace

[19:50:19.0248] <devsnek>
no

[19:50:25.0221] <Jack Works>
iirc `Intl` has lots of uppercase in their API

[19:50:41.0641] <Jamie Kyle>
they are all constructors

[19:50:44.0407] <devsnek>
intl has only one level before a function

[19:50:47.0609] <legendecas>
what if `array.forEach((v) => { if (c(v)) SomeFunctionThatWillCallArrayForEachBreak() })`?

[19:50:56.0517] <devsnek>
they're either `Intl.Constructor` or `Intl.callable()`

[19:51:21.0794] <devsnek>
 * they're either `Intl.Constructor` or `Intl.callable`

[19:51:37.0694] <ljharb>
tbh "nested namespace" is so rare a thing that i very much doubt this precedent will be needed in the future (altho setting one either way is obv good)

[19:51:49.0803] <HE Shi-Jun>
legendecas: I guess break? though it seems very magical

[19:52:13.0694] <devsnek>
"until someone proposes call/cc"

[19:52:16.0339] <devsnek>
is this a challenge

[19:52:18.0610] <Michael Ficarra>
legendecas: that's not a break completion though

[19:55:52.0885] <ljharb>
iain: re Math, i do not believe so

[19:56:14.0838] <ljharb>
iirc Compartments has a very very short list of things to virtualize per compartment, and i suspect Temporal.now, Date, and Function are the main ones

[19:56:44.0492] <legendecas>
> <@michaelficarra:matrix.org> legendecas: that's not a break completion though

then it will not be doomed by the proposed limitation?

[19:56:45.0682] <iain>
Sorry, maybe Date is a better example there

[19:56:59.0240] <ljharb>
that's a constructor tho

[19:57:03.0348] <Michael Ficarra>
legendecas: nope, you can implement that with normal completions

[19:57:24.0335] <iain>
Ah, good point

[20:03:12.0468] <shu>
for these aesthetic guidance things where people's intuition differ

[20:03:17.0416] <shu>
i'd like to see the temperature check

[20:03:25.0204] <devsnek>
ye

[20:03:46.0305] <ptomato>
agreed! the best temperature check I had previously, was the thread that I linked above, which is not a large sample size

[20:06:19.0888] <bakkot>
oh yeah I forgot we had that feature!

[20:06:26.0140] <bakkot>
this seems like a good use case for temperature check

[20:15:13.0205] <ptomato>
one meeting with tcq-in-spreadsheet and we're back in the dark ages üòÇ

[20:18:26.0444] <Jamie Kyle>
Just to share some results from searching in the community. Looking through all of the library/framework APIs which are documented by TypeScript in the DefinitelyTyped repository. You can find lots of examples of nested namespaces using both lowercase/capitalized naming: https://sourcegraph.com/search?q=context:global+repo:DefinitelyTyped/DefinitelyTyped+namespace+%5Ba-zA-Z0-9%5D%2B%5C.%5Ba-zA-Z0-9%5D%2B.*%5C%7B%24&patternType=regexp

[20:19:02.0464] <devsnek>
whoa

[20:19:05.0636] <devsnek>
code search

[20:19:31.0613] <ryzokuken>
the evidence says that the evidence is inconclusive

[20:19:56.0224] <devsnek>
what does copilot say i wonder

[20:20:15.0905] <Jamie Kyle>
I would say that the community not having consensus just means that it definitely should not block Temporal moving forward with .now

[20:20:23.0974] <bakkot>
I like shu's argument about, it probably shouldn't matter whether it's nested or not

[20:20:42.0905] <bakkot>
so if we'd capitalize it if it was `globalThis.Now`, we should capitalize it when it's `globalThis.Temporal.Now`

[20:20:45.0295] <devsnek>
https://gc.gy/93937845.png

[20:21:05.0461] <ryzokuken>
that's cheating

[20:21:12.0792] <ryzokuken>
they probably trained it on our code too

[20:21:23.0050] <devsnek>
if they had, it would not be `function() {`

[20:21:34.0359] <Jamie Kyle>
They are just on an outdated proposal

[20:21:37.0993] <devsnek>
lol

[20:21:45.0739] <ryzokuken>
lol exactly my point

[20:21:50.0462] <ryzokuken>
I wrote the old version

[20:22:11.0470] <ryzokuken>
`now` and `parse` were top level functions on `Temporal`

[20:22:41.0033] <bakkot>
> <@jamiebuilds:matrix.org> Just to share some results from searching in the community. Looking through all of the library/framework APIs which are documented by TypeScript in the DefinitelyTyped repository. You can find lots of examples of nested namespaces using both lowercase/capitalized naming: https://sourcegraph.com/search?q=context:global+repo:DefinitelyTyped/DefinitelyTyped+namespace+%5Ba-zA-Z0-9%5D%2B%5C.%5Ba-zA-Z0-9%5D%2B.*%5C%7B%24&patternType=regexp

This actually looks pretty clear to me: if the _outer_ namespace is capitalized, so is the inner one, in almost all of these examples

[20:22:55.0588] <bakkot>
(and conversely)

[20:23:13.0891] <devsnek>
https://gc.gy/93937990.png

[20:23:24.0228] <bakkot>
I did say "almost"

[20:23:31.0719] <devsnek>
lol i like this one https://gc.gy/93938007.png

[20:25:54.0354] <Jamie Kyle>
155 results for `Capital.lowercase`

[20:26:41.0714] <devsnek>
how many of them start with a character with no case mapping

[20:26:58.0590] <Jamie Kyle>
uhh, whats that regex

[20:27:13.0695] <devsnek>
`[^\p{Upper}\p{Lower}]` i think?

[20:27:50.0657] <Jamie Kyle>
:(

[20:27:53.0637] <devsnek>
lol

[20:28:01.0002] <ptomato>
I think I change my preference to `Temporal.ùí©ow`

[20:28:15.0082] <ryzokuken>
btw, as I mentioned before, I think `Now` is a better choice in this specific case because of the precedent set by `Date.now` and everything else in this space

[20:28:18.0613] <Jamie Kyle>
`Temporal.√ëow`

[20:28:47.0560] <Hemanth H.M>
.now or Never 

[20:29:09.0073] <Jamie Kyle>
`Temporal.LikeWhatEvenIsNowWhenYouThinkAboutIt`

[20:29:11.0469] <devsnek>
Temporal.Never

[20:29:13.0707] <bakkot>
`500+ results for Capital.Capital, 142 for Capital.lower`

[20:29:27.0525] <bakkot>
 * 500+ results for `Upper.Upper`, 142 for `Upper.lower`

[20:30:14.0970] <Jamie Kyle>
> <@bakkot:matrix.org> 500+ results for `Upper.Upper`, 142 for `Upper.lower`

Do you have case-sensitive enabled, I'm getting 194 for `Upper.Upper`?

[20:30:20.0624] <Hemanth H.M>
Jamie Kyle deep philosophy! Reminded me of George Carlin üòÖ

[20:30:36.0838] <bakkot>
> <@jamiebuilds:matrix.org> Do you have case-sensitive enabled, I'm getting 194 for `Upper.Upper`?

oh lol I did not

[20:30:41.0043] <devsnek>
:O

[20:30:46.0690] <ryzokuken>
`Temporal.Current`

[20:31:11.0848] <devsnek>
`Temporal.üÜï`

[20:31:20.0066] <ptomato>
ok, that's the best one

[20:31:23.0959] <devsnek>
whoa i've never seen something render an emoji inverted before

[20:31:24.0516] <ptomato>
I change my preference to that

[20:31:35.0101] <ryzokuken>
unicode moment

[20:31:42.0409] <ryzokuken>
oh wait this is #delegates

[20:31:52.0350] <ryzokuken>
let's go to #tdz?

[20:34:28.0772] <Jamie Kyle>
Aside: I found sourcegraph really useful to find people who were doing stuff with my `Object.hasOwn` proposal, I'd highly recommend it when looking for community members doing stuff https://sourcegraph.com/search?q=context:global+Object%5C.hasOwn%5B%5EP%5D&patternType=regexp&case=yes

[20:41:46.0009] <ljharb>
tbh i'd be interested to see non-typescript results, since TS will be overly skewed by java/C# idioms

[20:43:44.0105] <Jamie Kyle>
I mean this repo is entirely dedicated to documenting APIs that are not written in TS

[20:44:23.0816] <ljharb>
lots of the types get names that never exist in the original JS

[20:46:30.0429] <Jamie Kyle>
If you click through the results, you can see most of them are documenting runtime constants/functions/classes that exist

[20:46:55.0662] <Jamie Kyle>
I'm not saying its perfect, but its a pretty good signal

[20:47:07.0591] <ljharb>
sure, but that's why i'd want to see the pure JS results - they'd contain all those without the skewed results from the TS-only names.

[20:47:58.0291] <devsnek>
can't you put `lang:javascript`

[20:48:21.0931] <Jamie Kyle>
Yeah but `namespace` doesn't exist so what would you search for

[20:49:07.0628] <Jamie Kyle>
I think the only conclusion thats ever going to be drawn here though is that the community has not clearly established a pattern one way or the other

[20:49:48.0222] <Jamie Kyle>
I think its a plus one to "not blocking on this"

[20:50:02.0197] <ljharb>
which imo kind of precludes using other langs/userland as an argument; also "confusion" since it can cut either way - so we're probably left with aesthetics, which is shaky ground to make precedent, or block a proposal, on

[20:50:23.0561] <ljharb>
 * which imo kind of precludes using other langs/userland as an argument; also "confusion" since it can cut either way - so we're probably left with aesthetics, which is shaky ground to make precedent, or block a proposal, on

[20:51:14.0830] <Jamie Kyle>
lol but what will twitter think if JS isn't AESTHETIC?

[20:51:55.0687] <ljharb>
it'll always be aesthetic if you ask the right subset of people :-p

[20:53:12.0643] <ryzokuken>
we don't need to please everyone, just people who strongly believe in the JS aesthetic üòÄ 

[20:54:17.0965] <Jamie Kyle>
tell that to all the people who yelled at me for writing a blog post explaining the `#privateMember` syntax!

[20:54:37.0836] <ptomato>
just to reiterate, no proposal is being blocked on this

[20:54:41.0226] <ryzokuken>
the internet is... the internet

[20:55:44.0227] <devsnek>
i still don't like private fields

[20:55:56.0299] <devsnek>
and it's all your fault jamie 

[20:56:09.0181] <Jamie Kyle>
:O

[20:56:20.0124] <devsnek>
(/s)

[20:56:27.0218] <bakkot>
private fields are extremely #aesthetic

[20:56:33.0400] <devsnek>
i do wish we did the symbol thing though

[20:57:33.0831] <bakkot>
I'm gonna not touch that

[20:57:49.0150] <devsnek>
lol

[20:57:58.0920] <ljharb>
because it's not reachable, or because you aren't going to reify your response

[20:58:26.0614] <Jamie Kyle>
booo

[21:06:04.0053] <Jamie Kyle>
I like "Concept Proposal" its very clear to me

[21:07:22.0789] <HE Shi-Jun>
Is strawperson stage 0 or stage 1?

[21:07:56.0469] <ryzokuken>
stage 0

[21:08:17.0843] <devsnek>
"proposal" is stage 1

[21:08:49.0506] <ryzokuken>
idea, proposal, draft and well... stage 4

[21:08:55.0150] <ljharb>
what about "prototype", that's not overloaded at all

[21:08:56.0886] <littledan>
well, I guess I shared ljharb 's impression that, sure, you can refer to stages by these names, but they don't really have official names. Anyway, we throw around the term "strawperson" a lot and I like the idea of replacing it by "concept"

[21:09:16.0698] <devsnek>
the names are from https://tc39.es/process-document/

[21:09:24.0822] <HE Shi-Jun>
maybe just "idea"?

[21:09:26.0822] <ryzokuken>
prototype sounds like later stage to me

[21:09:29.0298] <ptomato>
"stub" as suggested in one of the screenshotted tweets might meet this concern from Chip?

[21:09:32.0927] <ryzokuken>
yeah, I like "idea"

[21:09:49.0858] <littledan>
> <@devsnek:matrix.org> the names are from https://tc39.es/process-document/

Yeah, I know... I still didn't think of them as the names of the stages though, somehow...

[21:09:53.0803] <littledan>
(never mind)

[21:10:02.0564] <devsnek>
yeah i don't think anyone really does

[21:10:10.0333] <devsnek>
we could just remove them

[21:10:16.0288] <devsnek>
yep lol

[21:10:49.0404] <HE Shi-Jun>
Agree to remove it.

[21:10:51.0594] <Jamie Kyle>
Stage 0-4 seem decently well taught in the community already

[21:10:51.0894] <HE Shi-Jun>
Actually chinese TC39 guys rarely use "strawperson" , we just use "stage X".

[21:10:55.0914] <ryzokuken>
I like the words, they are more understandable to people who aren't as active in the space

[21:11:06.0684] <littledan>
I think we can just rapidly agree that renaming this term (which we do use a lot) to "concept" is good

[21:11:07.0973] <ryzokuken>
Stage 3 means nothing to a regular JS developer

[21:11:13.0136] <devsnek>
find me a person who uses "proposal" to refer to only stage 1

[21:11:49.0379] <ljharb>
yes but i don't think that's nearly as true as it was a few years ago. but also the stage names mean little to them as well

[21:12:31.0553] <ljharb>
> <@usharma:igalia.com> Stage 3 means nothing to a regular JS developer

 * yes but i don't think that's nearly as true as it was a few years ago. but also the stage names mean little to them as well

[21:12:50.0994] <Aki>
https://tc39.es/process-document/

[21:13:21.0420] <littledan>
Hmm, I do think we should adopt "concept" informally, even if we take out this column

[21:13:41.0583] <ljharb>
do we even use the term "strawperson" informally tho?

[21:13:59.0217] <ptomato>
I have heard others use it in plenary, yes

[21:14:06.0210] <littledan>
well, I try to avoid it, since it's obscure, but in general yeah, it's a piece of jargon we throw around all the time

[21:14:34.0888] <ptomato>
https://github.com/tc39/notes/search?q=strawperson

[21:14:48.0709] <devsnek>
shane going for the nuclear option üëÄ

[21:14:50.0379] <ptomato>
apparently not very often!

[21:15:04.0954] <Jamie Kyle>
"Stage 0-4" are used all over the place in tools

[21:15:22.0791] <littledan>
counterpoint: https://github.com/tc39/notes/search?q=strawman

[21:15:52.0691] <Hemanth H.M>
https://tc39.es/process-document/

[21:18:58.0279] <Aki>
after shane we're at time

[21:20:38.0518] <HE Shi-Jun>
number is much general than word. It's very hard for us to know what "proposal"/"draft" stage is much bigger :)  personally i use the chinese translation of "proposal"/"draft" for any stage < 4 ...  :P

[21:21:01.0992] <Jamie Kyle>
Referring to stage 0 stuff as "proposal" is already the norm in the community https://twitter.com/search?q=tc39%20stage%200%20proposal&src=typed_query

[21:21:28.0131] <Jamie Kyle>
I see a few of yalls names in there ü§ê

[21:21:33.0090] <Hemanth H.M>
Stage-0 can be Proposal? 

[21:21:40.0740] <ljharb>
they're all proposals tho

[21:21:55.0430] <ljharb>
change the number in that search and there'll be results for all of them, i'd suspect

[21:22:11.0315] <Aki>
> <@jamiebuilds:matrix.org> Referring to stage 0 stuff as "proposal" is already the norm in the community https://twitter.com/search?q=tc39%20stage%200%20proposal&src=typed_query

lol touch√©

[21:22:59.0426] <Jamie Kyle>
what is a temp check?

[21:23:00.0286] <HE Shi-Jun>
what the icon means?

[21:23:39.0714] <devsnek>
> <@jamiebuilds:matrix.org> what is a temp check?

these buttons https://gc.gy/93941620.png

[21:23:42.0178] <HE Shi-Jun>
I support remove names at all, not sure which emojo i should choose

[21:23:56.0176] <ptomato>
there are descriptions above each emoji button?

[21:24:02.0207] <ljharb>
btw i refreshed tcq and my temp check vanished (cc @bterlson)

[21:24:41.0260] <Jamie Kyle>
ljharb: just to note, I can see yours 

[21:24:50.0620] <waldemar>
Can we please get a SYMMETRIC temperature check?

[21:24:53.0058] <ljharb>
thanks, i assumed so since i'd clicked it first

[21:25:12.0857] <waldemar>
Having several "yes" choices but only one "no" choice is too biased.

[21:25:43.0026] <waldemar>
And it leads to ambiguities like what we just encountered.

[21:26:19.0995] <ryzokuken>
> <@waldemarh:matrix.org> Having several "yes" choices but only one "no" choice is too biased.

I agree. There should be a stronger "no" choice too IMO.

[21:26:39.0805] <Aki>
> <@waldemarh:matrix.org> And it leads to ambiguities like what we just encountered.

its ambiguity is why i don't want to use it.

[21:26:56.0373] <ryzokuken>
(in this case nobody would have picked that one, but in some cases I suppose they would)

[21:27:07.0208] <waldemar>
Other committees use SF, F, Neutral, A, SA

[21:28:02.0171] <bakkot>
Yeah, we kind of use it for different things sometimes

[21:28:07.0923] <bakkot>
for something like this it should definitely be symmetric

[21:28:18.0173] <Aki>
i accidentally skipped shane in the queue, sorry

[21:28:27.0517] <ryzokuken>
I don't need to speak

[21:28:47.0793] <HE Shi-Jun>
It seems most time we need a poll which could have more clear text for each choice.

[21:30:03.0929] <devsnek>
queue is on the wrong item

[21:30:58.0648] <Aki>
no it's not

[21:32:43.0008] <Jamie Kyle>
+1 I want this a lot

[21:37:29.0847] <ryzokuken>
what's wrong with base64 as spec'd in https://datatracker.ietf.org/doc/html/rfc4648 ?

[21:37:51.0798] <ryzokuken>
oh wait, it specs both urlsafe and not

[21:37:54.0442] <Aki>
my mic just crashed

[21:38:02.0115] <devsnek>
ryzokuken you just got played

[21:38:06.0915] <Aki>
ü§¶üèª‚Äç‚ôÄÔ∏è

[21:38:15.0515] <ryzokuken>
but we can choose one, I'd prefer urlsafe

[21:38:22.0578] <Aki>
ryzokuken: ‚òùÔ∏è

[21:38:26.0397] <Aki>
a little help

[21:38:27.0782] <ryzokuken>
since JS is so strongly tied to the web

[21:38:30.0232] <ryzokuken>
Aki: got this

[21:39:51.0509] <Michael Ficarra>
not-takers: if you don't know someone's initialism, either write their full name or look it up in delegates.txt

[21:39:56.0164] <Michael Ficarra>
please don't just make a guess at it

[21:40:11.0444] <Michael Ficarra>
 * note-takers: if you don't know someone's initialism, either write their full name or look it up in delegates.txt

[21:41:32.0143] <Justin Ridgewell>
Aki: Can you advance the queue to devsnek's topic

[21:41:55.0395] <ryzokuken>
Justin Ridgewell: need to go for the clarifying questions first, otherwise we'd lose them

[21:42:31.0514] <Aki>
uhh no but

[21:42:34.0263] <Aki>
did i fix it?

[21:42:40.0272] <Justin Ridgewell>
devsnek: There was a discussion about `TextEncoder`, but it was blocked because it's already standardized by HTML

[21:42:58.0294] <devsnek>
can we just move that into our spec then

[21:43:02.0583] <ryzokuken>
oh you did

[21:43:04.0006] <devsnek>
i'm tired of it being slow

[21:43:13.0550] <ryzokuken>
I just realized that we can move stuff up and down, sorry my bad

[21:43:20.0902] <Justin Ridgewell>
The objector said that would be very rude of us to do.

[21:44:00.0430] <devsnek>
so whatwg is against moving textencoder to tc39?

[21:44:19.0816] <Justin Ridgewell>
¬Ø\_(„ÉÑ)_/¬Ø

[21:44:31.0305] <Justin Ridgewell>
This was several years ago at this point

[21:49:23.0487] <HE Shi-Jun>
many time , u need buffer.tobase64Buffer() ...

[21:49:57.0632] <HE Shi-Jun>
now people have to write new TextEncoder('utf8').encode(buffer.toBase64()) ...

[21:51:00.0120] <HE Shi-Jun>
I hope engine at least could optimize that usage.

[21:51:13.0642] <ptomato>
FWIW, moving TextEncoder/TextDecoder to 262 would be quite helpful to all the software that embeds a JS engine, such as GNOME, or 0AD

[21:51:36.0631] <ptomato>
(or, at least, I can say that for GNOME it would, just assuming about the others)

[21:51:37.0357] <ryzokuken>
and Node

[21:51:39.0242] <HE Shi-Jun>
both node.js/deno implemeneted TextEncoder/TextDecoder

[21:51:44.0971] <ryzokuken>
yeah

[21:51:49.0690] <devsnek>
its slower than it should be though

[21:52:11.0121] <ptomato>
GNOME is implementing it as well, but it would be nice to delete that code

[21:53:13.0947] <HE Shi-Jun>
Actually it's hard to say the platforms implementation TextEncoder/TextDecoder are all same and correct :)

[21:53:31.0286] <Michael Ficarra>
I'm surprised to hear anyone say this doesn't meet the bar for usefulness

[21:53:46.0958] <ryzokuken>
another reason why `TextEncoder` should be in the engine

[21:54:01.0228] <littledan>
Temporal has lots of complexity; I'm not sure where the line should be for complexity and the standard library.

[21:54:12.0361] <legendecas>
> <@haxjs:matrix.org> Actually it's hard to say the platforms implementation TextEncoder/TextDecoder are all same and correct :)

IIUC that is what wpt is trying to achieve

[21:54:35.0136] <ryzokuken>
legendecas: but non-web hosts don't run WPT, right?

[21:54:41.0860] <devsnek>
wpt is useless because they refuse to write tests in a way that can be used by non-web hosts easily

[21:54:43.0801] <ryzokuken>
I think Node was planning to, atleast partially

[21:54:43.0823] <legendecas>
node.js do

[21:54:48.0570] <ryzokuken>
yeah

[21:54:58.0379] <devsnek>
node.js can barely run a very small subset of wpt tests

[21:55:11.0411] <devsnek>
using a very complex test harness that took a long time to implement 

[21:55:16.0067] <Michael Ficarra>
we've used WPT in a non-web context with some success FWIW

[21:55:55.0488] <littledan>
yeah I like the idea of implementing web APIs outside of the web, sharing tests, etc

[21:55:56.0995] <Jamie Kyle>
There are plenty of JS features I've needed to create my own versions of, but that doesn't detract from the usefulness of having a version of them in the language

[21:56:28.0550] <leobalter>
I might not be able to be in the call for the rest of day, but I register here that I'm in sync with littledan's presentation and I strongly support the Module Blocks/fragments proposal. It is an amazing opportunity to explore with Realms but also without it. There is much to config and many realms we use today at Salesforce. If we have module blocks, this will be a considerable removal of network requests. Think about configuration that needs to be loaded per realm and out application uses many many many realms. Bundling still requires code injection so Module Blocks allows a much smoother configuration for us.

[21:56:39.0147] <ryzokuken>
> <@jamiebuilds:matrix.org> There are plenty of JS features I've needed to create my own versions of, but that doesn't detract from the usefulness of having a version of them in the language

this

[21:57:12.0122] <devsnek>
uuid was blocked from being in stdlib

[21:57:52.0642] <HE Shi-Jun>
oh? is uuid blocked? ... what a pity

[21:58:02.0497] <ryzokuken>
indeed

[21:58:06.0379] <Michael Ficarra>
devsnek: it wasn't blocked, the champion felt it was faster to go through a different SDO

[21:58:13.0740] <devsnek>
oh, interesting

[21:58:21.0683] <ryzokuken>
well, I do believe that in this case it makes more sense to be in `WebCrypto`

[21:58:26.0892] <Michael Ficarra>
which is a bummer

[21:58:29.0105] <shu>
it was actually faster, it wasn't just they felt it was faster

[21:59:14.0191] <littledan>
well, Intl was faster to do in TC39, when the web community shut it down initially

[21:59:18.0694] <littledan>
there's no consistent pattern here

[21:59:35.0735] <littledan>
there are lots of things that we manage to do pretty fast in TC39

[21:59:45.0229] <littledan>
I don't think we would've done crypto faster, though

[21:59:55.0196] <ryzokuken>
does WICG qualify as an SDO? I don't think you need to do any consensus-building there?

[22:00:17.0992] <HE Shi-Jun>
WICG is only community group?

[22:00:30.0714] <devsnek>
i think we should make a "javascript but for real platforms" spec, sort of like wasi, where it has all the useful apis we don't allow into js because of its abstract target

[22:00:49.0379] <littledan>
 * well, Intl was faster to do in TC39, when the web standards community shut it down initially

[22:01:25.0139] <ljharb>
i thought the issue with uuid was that folks on TC39 actively blocked adding anything that's in WebCrypto to the language?

[22:02:21.0215] <Jamie Kyle>
I just want to reiterate my support for this proposal. I think its very useful, and I'd be happy for it to have options. I think in general we should support adding more Clearly Useful Things to JS

[22:03:52.0686] <HE Shi-Jun>
I think we all agree adding useful things , the problem is how to define "useful" :)

[22:04:21.0497] <Jamie Kyle>
I dont think the pushback was that it was not useful

[22:11:35.0461] <devsnek>
i think that's still statically verifiable in the split form

[22:12:17.0391] <bakkot>
> <@haxjs:matrix.org> many time , u need buffer.tobase64Buffer() ...

fwiw I don't think I've ever needed this personally

[22:13:26.0939] <devsnek>
a buffer where the bytes are numbers representing ascii characters of base64?

[22:13:59.0223] <HE Shi-Jun>
ok i should say "some time" not "many time" :)

[22:14:00.0823] <bakkot>
> <@usharma:igalia.com> but we can choose one, I'd prefer urlsafe

since this is mostly used for communicating with other applications, and other languages default to plain (not url) base64, I'm opposed

[22:14:27.0935] <ryzokuken>
oh, fair point

[22:15:50.0750] <devsnek>
the queue is behind

[22:16:46.0755] <ryzokuken>
devsnek: fixed

[22:17:24.0248] <leobalter>
Why my topic was removed?

[22:17:33.0383] <leobalter>
Adding it again

[22:18:29.0997] <Aki>
oops. i accidentally nexted you

[22:18:32.0639] <Aki>
my b

[22:18:43.0644] <leobalter>
now Mark's topic seems to be gone :) 

[22:18:50.0790] <Michael Ficarra>
leobalter: you're on the queue twice

[22:18:57.0127] <ryzokuken>
I see all topics

[22:19:07.0029] <ryzokuken>
2 by leo 2 by mark 1 by hax

[22:19:14.0447] <Michael Ficarra>
same ryzokuken 

[22:19:32.0820] <devsnek>
one by snek one by daniel

[22:19:43.0426] <Aki>
i screwed up. everyone refresh

[22:19:44.0406] <ryzokuken>
...and counting

[22:19:48.0021] <Aki>
sorry i broke it

[22:20:19.0925] <ryzokuken>
fwiw, it feels like cheating since I work with Dan, but strong +1 from me too üòÄ 

[22:20:53.0713] <HE Shi-Jun>
can module variable be passed to other functions?

[22:21:19.0988] <devsnek>
yes, there was an example in the presentation passing it to `new Worker()`

[22:21:43.0455] <HE Shi-Jun>
so u could also return a module variable from another function?

[22:21:52.0634] <devsnek>
its a value yes

[22:23:47.0551] <leobalter>
Michael Ficarra: tcq seemed broken, perhaps? The first topic I added was gone, same with Mark, I added it again after it disappeared for me.

[22:24:05.0974] <Michael Ficarra>
leobalter: try refreshing next time that happens

[22:25:42.0591] <leobalter>
well, I've never seen that issue before. I thought someone deleted it so I added again as I wanted to add it before the queue got crowded.

[22:25:50.0260] <leobalter>
I'll surely try a refresh next time

[22:27:41.0376] <Aki>
ten minutes

[22:28:40.0276] <HE Shi-Jun>
it seems I was skipped in the queue :)

[22:29:51.0887] <HE Shi-Jun>
Anyway, my question is about could I write code like "function x() { return module {} }; const m = x(); import {} from m;"  I suppose it should not allowed?

[22:30:39.0669] <devsnek>
that would not work, static imports happen before evaluation

[22:30:55.0456] <devsnek>
you could use dynamic import though

[22:31:14.0786] <devsnek>
 * that would not work, static imports happen before evaluation

[22:33:09.0322] <HE Shi-Jun>
yeah I guess it should not allowed , but it's a little weird that `module m{}; import x from m` works but `let m = module m{}; import x from m` not.

[22:33:18.0132] <danielrosenwasser>
"Strong support MICROPHONE EMOJI - he must really want to speak!" - Aki

[22:33:42.0390] <Aki>
hahahaha

[22:34:45.0629] <leobalter>
Aki: can we do a temperature check? Assuming Daniel is ok with that

[22:35:02.0878] <devsnek>
> <@haxjs:matrix.org> yeah I guess it should not allowed , but it's a little weird that `module m{}; import x from m` works but `let m = module m{}; import x from m` not.

if you never write imports below the top of the file its not a problem :P

[22:35:04.0602] <HE Shi-Jun>
it's like to say, `let m = module {}` suddenly make `m` become dynamic :)

[22:35:38.0766] <HE Shi-Jun>
devsnek: import/export could be everywhere...

[22:35:46.0416] <devsnek>
yeah but they're always hoisted

[22:36:09.0806] <bakkot>
fwiw, that does kind of already happen with functions:

```
f();
function f(){} // works
```

```
f();
let f = function f(){} // fails
```

[22:36:15.0713] <bakkot>
so there is at least a little precedent

[22:36:16.0483] <leobalter>
phoddie: I can see 2 entries from you on the queue, first is "Like this direction."

[22:36:23.0129] <leobalter>
is this the one missing for you?

[22:36:34.0649] <leobalter>
(I just learned that a refresh should bring it back)

[22:37:09.0755] <devsnek>
i feel like this proposal could be a cool opportunity to introduce nested import syntax

[22:37:14.0811] <Jamie Kyle>
I would really like to see some syntax like what exists in Rust to import from the enclosing "parent" module
```rs
#[cfg(test)]
mod tests {
  use super::*;
}
```

[22:37:25.0745] <devsnek>
`import { react: { useState } } from 'bundle'`

[22:37:30.0844] <HE Shi-Jun>
@bakkot I think it's a differnt problem. we can remove the inner `f` or `m`

[22:37:34.0811] <devsnek>
 * `import { react: { useState } } from 'bundle'`

[22:38:07.0185] <devsnek>
> <@jamiebuilds:matrix.org> I would really like to see some syntax like what exists in Rust to import from the enclosing "parent" module
> ```rs
> #[cfg(test)]
> mod tests {
>   use super::*;
> }
> ```

this is mentioned in an issue on the repo iirc

[22:38:35.0059] <Jamie Kyle>
devsnek:  Yeah I raised it :P

[22:38:47.0450] <HE Shi-Jun>
@devsnek do we really need nested import? consider we have the url syntax which already have nested path for module...

[22:38:51.0657] <Jamie Kyle>
https://github.com/tc39/proposal-js-module-blocks/issues/34

[22:39:09.0286] <devsnek>
oh on the other proposal repo

[22:40:10.0281] <leobalter>
phoddie: YES!

[22:40:13.0224] <leobalter>
dormant modules

[22:40:27.0630] <leobalter>
they are statically parsed, but runtime evaluated on demand

[22:40:34.0874] <devsnek>
> <@haxjs:matrix.org> @devsnek do we really need nested import? consider we have the url syntax which already have nested path for module...

it gets rid of string syntax, i don't want to think about which slash to use 

[22:41:39.0085] <Jamie Kyle>
littledan: thank you for pursuing this!

[22:42:10.0854] <Aki>
I STILL THINK ABOUT THIS CONVERSATION ALL THE TIME

[22:42:14.0921] <HE Shi-Jun>
`import {x: {y: {z}}} from 'module'` vs `import z from 'module/x/y'` , seems no much difference :P

[22:42:19.0728] <Aki>
december 2019

[22:42:23.0000] <Aki>
salesforce

[22:42:24.0624] <Aki>
fltering

[22:42:37.0724] <devsnek>
lol

[22:42:58.0694] <Aki>
like literally last week i was thinking about this

[22:43:09.0221] <devsnek>
so glad we're finally going to be getting array filtering in js

[22:43:16.0338] <Aki>
-_-

[22:43:21.0372] <devsnek>
oh this isn't tdz oops

[22:44:25.0786] <HE Shi-Jun>
About the array empty slot issue previously mentioned, it seems `filterReject` should follow `filter`(which skip the empty slots) but not sure about the `groupBy`.

[22:44:47.0070] <Hemanth H.M>
/me remembers stating the coffee filter example üòÖ

[22:45:04.0733] <ljharb>
why `filterReject` instead of just `reject`?

[22:45:51.0833] <HE Shi-Jun>
ljharb: I don't know. It's the naming bikeshed issue. Actually I don't like `reject` or `filterReject` because it make me confused with promise reject...

[22:46:01.0544] <Jamie Kyle>
I am used to the name reject cause of https://docs-lodash.com/v4/reject/

[22:46:11.0171] <ljharb>
also ruby

[22:47:05.0888] <HE Shi-Jun>
Personally I prefer `filterOut` or `filterNot`(which is used by kotlin)

[22:47:14.0394] <Jamie Kyle>
Should groupBy() return a Map?

[22:47:29.0550] <ljharb>
i'd prefer a null object over a map

[22:47:32.0194] <ptomato>
is "people who are like me" an unchangeable designation? personally I had the wrong intuition about "filter" the first time I encountered it (not in JS) but quickly got used to it

[22:48:23.0063] <HE Shi-Jun>
ptomato: So it's a stage 1 issue, and i remember we already had 40 mins arguments in stage 1 meeting...

[22:48:46.0323] <Jamie Kyle>
> <@ljharb:matrix.org> i'd prefer a null object over a map

I find it really weird to stringify the return value of `groupBy()` to get `{ true: [...], false: [...] }`

[22:49:11.0452] <ljharb>
i'd expect people do do `condition ? 'yes' : 'no'` or similar tho, rather than relying on that

[22:49:35.0753] <Jamie Kyle>
Why should it be limited to stringifiable objects though?

[22:49:42.0762] <Jamie Kyle>
 * Why should it be limited to stringifiable values though?

[22:50:37.0714] <ljharb>
fair point, i'd expect returning a symbol to work too (for the object case)

[22:51:03.0658] <ljharb>
 * fair point, i'd expect returning a symbol to work too (for the object case)

[22:51:11.0654] <devsnek>
objects can have symbol keys jordan

[22:51:12.0914] <ljharb>
in general tho maps/set aren't sufficiently useful due to their lack of tons of helper methods

[22:51:22.0216] <ljharb>
 * in general tho maps/set aren't sufficiently useful due to their lack of tons of helper methods

[22:51:49.0610] <Jamie Kyle>
well we should definitely fix that!

[22:52:11.0985] <bakkot>
holes = undefined here

[22:52:23.0112] <Hemanth H.M>
/me got on to a tangent over array comprehensions


[22:52:28.0578] <devsnek>
groupby = runs?

[22:52:42.0844] <shu>
apparently it is in python

[22:52:47.0106] <bakkot>
I prefer objects because getting things from them is much more convenient

[22:53:14.0960] <bakkot>
in particular `let { a, b } = list.groupBy(whatever)` is nice with objects, does not work with Map

[22:53:29.0717] <devsnek>
skip the holes!

[22:53:56.0536] <iain>
Rust's [group_by](https://docs.rs/itertools/0.8.0/itertools/trait.Itertools.html#method.group_by) (in itertools) also does runs

[22:54:07.0163] <shu>
could bikeshed the name

[22:54:53.0687] <shu>
i believe it is what non-programmers call "sorting"

[22:54:57.0817] <shu>
so maybe sort2

[22:55:01.0904] <devsnek>
lol

[22:57:21.0239] <bakkot>
for the notes, who is speaking?

[22:57:29.0301] <bakkot>
got it thanks

[22:57:32.0625] <danielrosenwasser>
`groupBy` is only useful for a subset of keys which seems like a problem. Cute for `partition` and works almost well with static type systems, but very inconsistent with broader use-cases that other languages implement for `groupBy`

[22:59:55.0209] <devsnek>
my tcq doesn't match what's on the screen

[23:00:00.0204] <devsnek>
reloading doesn't fix

[23:00:21.0182] <danielrosenwasser>
 * `groupBy` returning an object is only useful for a subset of keys which seems like a problem. Cute for `partition` and works almost well with static type systems, but very inconsistent with broader use-cases that other languages implement for `groupBy`

[23:00:31.0773] <iain>
Mine matches

[23:00:43.0001] <ryzokuken>
mine too

[23:00:52.0607] <Hemanth H.M>
I resonate strongly with Michale 

[23:00:53.0155] <danielrosenwasser>
 * `groupBy` returning an object is only useful for object keys (obviously I guess) which seems like a problem. Cute for `partition` and works almost well with static type systems, but very inconsistent with broader use-cases that other languages implement for `groupBy`

[23:01:37.0867] <Jamie Kyle>
I agree that `select` would have been a better name for filter which would have made a `reject` method intuitive. But he combination of `filter+reject/out` feels like more mental overhead for me to sort out, it has a double negative feel to it to me that I'd second guess all the time

[23:04:38.0161] <danielrosenwasser>
I agree with that ^ but I also feel like there is a legitimate use-case for some sort of rejection filter. I think we've had to write a `not` helper function so we can write `.filter(not(someFunc))`

[23:04:57.0017] <Hemanth H.M>
 * I resonate strongly with Michael

[23:06:50.0317] <ljharb>
what about `Map.groupBy(iterable, callback)` versus `Object.groupBy(iterableOrArraylike, callback)`?

[23:07:09.0928] <Jamie Kyle>
iain:  Yeah... Based on some of discussions elsewhere though, I feel like we overestimate the problem of two methods on different objects doing different things as a serious source of confusion for users

[23:07:24.0873] <Jamie Kyle>
 * iain:  Yeah... Based on some of discussions elsewhere though, I feel like we overestimate the problem of two similarly named methods on different objects doing different things as a serious source of confusion for users

[23:07:31.0659] <Hemanth H.M>
or as Daniel mentioned, if we have a `not` function, we could says odd = not(isEven); and then filter on odd

[23:07:55.0528] <Michael Ficarra>
ljharb: can't do an iterable, only finite structures

[23:07:57.0693] <Jamie Kyle>
A `not` global sounds hard to add

[23:08:39.0266] <ljharb>
> <@michaelficarra:matrix.org> ljharb: can't do an iterable, only finite structures

why?

[23:08:50.0641] <ljharb>
if it's infinite then it'd loop forever, which is what happens almost everywhere if you have an infinite iterator anyways

[23:08:56.0630] <Hemanth H.M>
I guess, they meant a local function in that example and not a global `not`

[23:09:26.0275] <ljharb>
 * if it's infinite then it'd loop forever, which is what happens almost everywhere if you have an infinite iterator anyways\

[23:09:27.0730] <ljharb>
 * if it's infinite then it'd loop forever, which is what happens almost everywhere if you have an infinite iterator anyways

[23:09:29.0672] <Michael Ficarra>
ljharb: because groupBy on infinite structures is commonly understood to have the Python/Haskell semantics discussed earlier

[23:10:33.0786] <ljharb>
meh, ok

[23:11:48.0391] <HE Shi-Jun>
filter(not(x)) not really solve the original motivation (though I don't strongly support that)

[23:11:52.0692] <ljharb>
aki++

[23:12:05.0855] <Hemanth H.M>
`reject` conflicting with `Promise.reject` is a legit concern

[23:12:14.0525] <Hemanth H.M>
 * `reject` conflicting with `Promise.reject` is a legit concern

[23:13:15.0370] <littledan>
I don't think it's useful to be so particular about Stage 1 requirements

[23:13:30.0576] <Hemanth H.M>
Stage - 0 is an idea
Stage - 1 defining the problem
Stage - 2 defining the solution

^ sounds good?

[23:13:44.0865] <littledan>
(contradicting myself, I do think an explainer is a requirement for a Stage 1 proposal)

[23:13:51.0253] <ljharb>
stage 1 also means that TC39 wants to keep discussing/solving the problem

[23:14:06.0606] <devsnek>
> <@hemanth.hm:matrix.org> Stage - 0 is an idea
> Stage - 1 defining the problem
> Stage - 2 defining the solution
> 
> ^ sounds good?

+1

[23:14:11.0483] <Jamie Kyle>
When I was exploring the name `Object.has` vs `Object.hasOwn` I did an exploration into methods named the same thing on different objects in 262+web apis, there are a number of examples, and I could not find any confusion about them on github or stack overflow. I really don't think there's an issue with `Promise.reject` and `Array#reject` being named the same thing

[23:15:34.0918] <littledan>
wasn't handling of non-property-keys an open question for groupBy?

[23:15:56.0854] <littledan>
I agreed with Mark's point that R&T interaction is important

[23:15:56.0885] <HE Shi-Jun>
Jamie Kyle: It may be a unnecessary burden for newbie, and especially for non-English speakers.

[23:16:54.0996] <Hemanth H.M>
2019 December notes on array select-reject for stage-1 ->  https://github.com/tc39/notes/blob/master/meetings/2019-12/december-4.md#array-selectreject-for-stage-1

[23:17:05.0754] <ljharb>
Justin Ridgewell: once you name and make a repo for groupBy please hmu so i can update the proposals table

[23:17:38.0640] <littledan>
+1 to Mark's and ptomato 's comment about being unenthused about filterReject

[23:17:41.0111] <HE Shi-Jun>
Jamie Kyle:  especially Object.has/keys would have a subtle semantic difference with Map/Set.has/keys (even it may not cause many problems in practice)

[23:18:04.0275] <Jamie Kyle>
To be clear I'm not proposing renaming hasOwn to has again

[23:19:13.0669] <devsnek>
Object.has implies it returns a list of `ha` that the object contains

[23:19:17.0002] <Jamie Kyle>
But there are examples of identically named methods that do distinct things already and I dont see confusion about it

[23:20:31.0706] <danielrosenwasser>
Yeah, I don't have a strong opinion on the name, but `Math.log` and `console.log` have different contextual meanings. `Promise.reject` doesn't really throw a wrench in anything here.

[23:20:35.0433] <littledan>
module fragments might not be needed for tomorrow btw

[23:20:48.0064] <littledan>
I guess I was asking for an extension because I misunderstood the state of the queue

[23:20:58.0654] <littledan>
 * I guess I was asking for an extension because I misunderstood the state of the queue

[23:21:52.0603] <danielrosenwasser>
I guess this is relevant again https://twitter.com/drosenwasser/status/1139665079324925952

[23:23:29.0582] <HE Shi-Jun>
danielrosenwasser: sometimes it's unavoidable... but if we can we should avoid such things I believe. And `console.log` is not TC39 specced :)

[23:24:28.0887] <Jamie Kyle>
Name a javascript developer that doesnt use console.log :P 

[23:25:54.0449] <danielrosenwasser>
HE Shi-Jun: So you're saying my proposal to add `log10`, `log2` and `log1p` would be better in WHATWG? üòÑ

[23:26:06.0603] <danielrosenwasser>
 * HE Shi-Jun: So you're saying my proposal to add `log10`, `log2` and `log1p` to `console` would be better in WHATWG? üòÑ

[23:27:57.0294] <danielrosenwasser>
Okay no more jokes, have a good night/day everyone!

[23:55:12.0298] <HE Shi-Jun>
> <@jamiebuilds:matrix.org> Name a javascript developer that doesnt use console.log :P

One interesting thing is when i use eshost/jshost I always feel the pain that there are no console.log at all :( it make me remember my IE6 days.

[00:05:36.0639] <HE Shi-Jun>
I have been asked a question about proper tail call and I need some help.

[00:05:50.0232] <HE Shi-Jun>
ProJS 4th edition 4 has a chapter introduce proper tail call  which was added in ES6, and the book says that closure can't get PTC, but I can't find it in the spec (maybe I missed it) and it seems safari (the only engine implement PTC) also don't have such limitation.

[00:06:51.0951] <HE Shi-Jun>
Is that the error of the book?

[00:13:53.0799] <bakkot>
The spec definitely doesn't make mention of such a restriction, so I think the book is wrong.

[00:14:06.0851] <bakkot>
I'm also having a hard time coming up with an example where it would even be observable.

[00:14:39.0157] <iain>
The comment in the example says that closures are not supported, but if you read the text above, it says "the tail call function is not a closure *that refers to variables in the outer function's scope*"

[00:16:20.0018] <Aki>
apologies in advance, incoming noise. i've tested the API as far as i can on a test channel, now i need to do it on this channel oh god i hope i don't break it

[00:18:04.0551] <Aki>
well that was an unexpected outcome

[00:29:03.0065] <HE Shi-Jun>
> <@bakkot:matrix.org> I'm also having a hard time coming up with an example where it would even be observable.

You can observe that by throwing an `new Error` and check the `error.stack` to see whether the caller is in the stack. Though `stack` is not specced so hard to say whether it reflect the truth.

[00:31:21.0101] <HE Shi-Jun>
(BTW, this is also a reason that I prefer STC than PTC, because PTC may affect the error stack by accident and cause error collection and unification issue in real world.)

[00:31:58.0761] <ryzokuken>
> <@akirose:matrix.org> well that was an unexpected outcome

wait, did it work or not?

[00:32:11.0628] <Aki>
both?

[00:32:16.0488] <ryzokuken>
hah

[00:32:20.0380] <ryzokuken>
schrodingers room

[00:33:07.0689] <Aki>
i was running a PUT to update perms on the room, apparently i can't reduce perms of someone equal to me, which makes sense i guess

[08:22:08.0961] <Richard Gibson>
this was fun... turns out that JSC tokenizes non-ASCII non-Latin1 WhiteSpace characters after a regular expression literal as part of its flags, and XS doesn't recognize them as WhiteSpace at all
* https://bugs.webkit.org/show_bug.cgi?id=227944
* https://github.com/Moddable-OpenSource/moddable/issues/665

[08:33:17.0969] <bakkot>
fun

[08:33:23.0322] <bakkot>
sounds like a good test262 test

[09:01:56.0928] <devsnek>
scary

[09:10:35.0643] <phoddie>
Richard, thanks for the excellent report. Much appreciated. Must not have been caught by test262 (not in our  list of known RegExp issues).

[10:07:58.0447] <Richard Gibson>
yep. I opened a Test262 issue, and will try to fix it now

[10:30:49.0919] <Richard Gibson>
leobalter: would you have any time to help me understand best practices for the above?

[12:01:52.0481] <bakkot>
shu: a passing thought: now that resizable buffers has exposed the notion of detaching buffers to non-threaded code, maybe buffer.toBase64 should have an option to detach the original buffer as well

[13:23:40.0106] <leobalter>
Richard Gibson: link?

[13:23:46.0246] <leobalter>
or let me find it...

[13:29:57.0509] <leobalter>
ok, I agree with phoddie , the report is great! We have tests in Test262 for whitespace and LT but most of them are actual characters instead of escapes or string evaluation.

In this case, one test file with all the cases would blow without proper information, so I'd split into several files, each one for each character.

[13:32:47.0124] <Richard Gibson>
right, I want to know where in the repo structure to do that and what the files should look like. I'm assuming this will be templated

[13:34:12.0689] <leobalter>
I sse some files just use the escaped character, which might help the generation

[13:34:22.0210] <leobalter>
like `var\u000Ax;`

[13:35:52.0149] <leobalter>
My first guess would be to use `test/language/literals/regexp` but I wonder if that's more related to ASI or something else. I need to re read the original issue

[13:36:41.0617] <Richard Gibson>
it's related to properly recognizing _WhiteSpace_ and _LineTerminator_ as insignificant in the stream of input elements, specifically after a regular expression literal

[13:38:35.0085] <leobalter>
this folder should be fine... see `regexp-first-char-no-line-separator.js` in there

[13:38:55.0053] <leobalter>
it treats <LS> inside, so we can extend texts for <LS> outside

[14:02:02.0947] <leobalter>
Richard Gibson: I created a stub here but it's been too long I don't use the generation tool. Python is not happy about it. I'll send some code if I get it running 

[14:05:52.0414] <Richard Gibson>
basically, I want help so that I can contribute more meaningfully for this and other issues. Right now I don't understand best practices well enough to do so.

[15:53:34.0087] <shu>
bakkot: re: detaching original buffer, what's the use case there to detach?

[15:54:54.0805] <bakkot>
just so that you don't have to keep both in memory


2021-07-15
[17:59:25.0372] <Aki>
is 8x8 down?

[18:00:14.0928] <Bradford Smith>
it's working for about 16 of us :)

[18:02:04.0632] <ryzokuken>
(I did it yesterday)

[18:02:37.0098] <ryzokuken>
had initially done just two days since we'd expected this one to run for just two days

[18:02:53.0367] <devsnek>
its working for me

[18:13:02.0649] <ljharb>
sffc: 262 has "extended mathematical values", in case you want to define "intl math values" as "extended with NaN and -0"

[18:14:32.0941] <ljharb>
 * sffc: fwiw 262 has "extended mathematical values", in case you want to define "intl math values" as "extended with NaN and -0" https://tc39.es/ecma262/#sec-mathematical-operations 

[18:17:16.0905] <littledan>
+1 for Stage 3

[18:17:32.0176] <ryzokuken>
I cannot unmute, sorry üòÖ

[18:24:55.0610] <Aki>
can i take a quick moment to appreciate sffc 's boundless positivity when presenting to the committee

[18:52:59.0776] <leobalter>
Aki bterlson I'll let you know asap when Caridy is back.

[18:53:57.0882] <Bradford Smith>
+1 for pattern matching from me - I would have come this last time, but was on vacation

[18:54:18.0439] <ljharb>
Michael Ficarra bakkot : 2360 or 545 first?

[18:54:48.0536] <ljharb>
 * Michael Ficarra bakkot : 2360 or 1554 or 545 first? (since 545 is big and there may be conflicts)

[18:54:55.0020] <Michael Ficarra>
ljharb: they should be able to go in in any order

