2025-11-03
[14:27:20.0064] <bakkot>
nicolo-ribaudo: re https://bugzilla.mozilla.org/show_bug.cgi?id=1950211, the "Don't call well-known Symbol methods for RegExp on primitive values", I'm having trouble inferring the status from the bug tracker. Did FF ship? Or just ship telemetry? And is there telemetry?

[14:27:40.0138] <bakkot>
Looks like V8 implemented without a flag and will just ship it whenever main makes it up to stable for them

[14:27:52.0235] <bakkot>
same in webkit

[14:28:01.0474] <bakkot>
not sure if this means we should land the PR or wait for FF

[14:34:14.0067] <nicolo-ribaudo>
I don't remember, I'll get an answer in the next days

[15:20:58.0959] <nicolo-ribaudo>
* I don't remember, I'll get you an answer in the next days


2025-11-04
[06:38:54.0687] <dminor>
It looks like we just shipped the telemetry. I think at this point if webkit and v8 are shipping, we should just remove the telemetry and ship the change.
nicolo-ribaudo do you want to make the updates, or would you like me to take it over?

[06:44:47.0645] <bakkot>
I don't know if either of the other browsers are shipping to stable, to be clear

[06:47:08.0460] <nicolo-ribaudo>
> <@dminor:mozilla.org> It looks like we just shipped the telemetry. I think at this point if webkit and v8 are shipping, we should just remove the telemetry and ship the change.
> nicolo-ribaudo do you want to make the updates, or would you like me to take it over?

Mh yeah it looks like I ended up not finishing that patch because somebody was refactoring the same code at the same time ðŸ˜…

I am not able to type for a few weeks, please go ahead :) I'd be curious to see the telemetry data we have so far

[07:12:02.0835] <dminor>
bakkot: do you have links handy for the webkit and v8 changes? It would be helpful for coordinating shipping.

[07:13:36.0272] <bakkot>
Linked from the ecma262 issue iirc, I can dig them up when I'm at a computer next

[07:13:49.0298] <bakkot>
Or the pr rather 

[07:16:42.0512] <dminor>
Got them, thanks!

[09:02:09.0545] <guybedford>
There's an interesting discussion here on native error objects in Wasm - https://github.com/WebAssembly/custom-descriptors/issues/80.

The driving motivation is Wasm GC objects being used as throwable errors, by being able to somehow relate the Wasm GC error object's descriptor to make it a real error object. This discussion comes under the proposal umbrella of turning "opaque" GC objects into real objects with descriptors.

In particular the `Symbol.underlyingError` could be interesting to get feedback for from a TC39 perspective.

[09:10:06.0769] <Michael Ficarra>
@guybedford:matrix.org There's still time to add discussion items to the agenda for the next TC39 meeting.

[09:10:51.0781] <guybedford>
I'm not personally involved in the above discussion, I'm posting here in the hopes more folks can take these discussions on!

[09:15:56.0262] <Michael Ficarra>
my reading of this is that it would only affect debugger behaviour, which 262 does not constrain

[09:16:38.0684] <bakkot>
It is an interesting question how hosts should expose their own well known symbols though

[09:18:03.0749] <Michael Ficarra>
TG4 probably has a lot of the interested parties. This person may want to make a presentation to them. Not sure what TC39 could do about it though.

[10:57:20.0741] <guybedford>
The root problem is basically subclassing Error for Wasm GC objects, which is currently off the table as something in Wasm explicitly.

[10:57:39.0297] <guybedford>
so if non-Error objects might be able to define a symbol or otherwise to get error-level treatment

[11:37:31.0123] <Mathieu Hofman>
Haven't read the thread yet, but why not create an Error at the wasm boundary, with a `cause` being the wasm opaque object ?

[14:27:17.0261] <bakkot>
Wasm GC objects can be passed around to and from JS FFIs. Is the idea that you'd wrap every FFI call which involved a Wasm GC object to inspect the object and determine if you should substitute a wrapper?

[14:27:26.0678] <bakkot>
I think that would work but it's probably prohibitively expensive

[14:27:37.0964] <bakkot>
(possibly I am not understanding the suggestion)


2025-11-05
[18:00:52.0180] <Mathieu Hofman>
are wasm opaque objects exposed directly to JS code? My impression was that there is currently glue code to wrap those. Now of course we could ask the question for when wasm objects are no longer opaque and gain prototypes, and possibly own props. My concern is that I don't want to introduce yet another "kind" of Error that all error aware code out there needs to recognize (not just debuggers). We have Error instances, and I guess we're also getting objects extended with `Error.captureStackTrace`.

[18:03:20.0600] <Mathieu Hofman>
especially now that we have `Error.isError`, I think it'd be a mistake to introduce something that isn't an error but behaves like one. It's already unfortunate enough we have to standardize captureStackTrace

[18:19:01.0275] <guybedford>
Mathieu Hofman: the wasm custom descriptors proposal turns the opaque objects directly into objects with descriptors allowing getters and setters etc.

[18:19:34.0448] <guybedford>
they thus effectively become resource types, backed by a wasm gc managed struct or array

[18:23:15.0327] <guybedford>
I'd have thought the solution though would be to call out to `wrapErr(scalaErr) => Object.assign(new Error(), { gcError: scalaErr })` through to JS when there is an error to have a JS error type wrapping a scala error type instead of the converse, but I haven't thought about it deeply enough to have a strong opinion

[18:32:22.0332] <Mathieu Hofman>
Right, even with custom descriptors support, this is effectively purpose built glue code creating JS objects to expose wasm things. In that case, I would find it natural to create a `new Error()` and define on it a `cause: wasmThrowable` property.


2025-11-10
[11:47:37.0414] <rbuckton>
Would it be possible to get some folks from the runtimes that have implemented Explicit Resource Management to help finish the reviews on the remaining Test262 PRs? I've been trying to get some eyes on these three PRs for a few months, but the Test262 maintainers seem to be spread very thin:
- https://github.com/tc39/test262/pull/4482
- https://github.com/tc39/test262/pull/4480
- https://github.com/tc39/test262/pull/4478



2025-11-11
[18:41:01.0566] <bakkot>
nicolo-ribaudo: thanks for putting together slides for the export-\*-as PR. while we're here, I noticed in https://tc39.es/ecma262/multipage/ecmascript-language-scripts-and-modules.html#sec-resolveexport step 9.e.iii.1 that it says "Assert: There is more than one \* import that includes the requested name". That should be "\* _export_", surely, yes?

[19:16:06.0464] <nicolo-ribaudo>
Yep you are right

[19:57:03.0310] <arai>
I'm testing on SpiderMonkey.  there's some issue with the expectation around how "asyncTest" should interact with "negative".  not yet sure if it's on our side or in the test side

[19:58:41.0470] <arai>
also there are 3 tests that expects behavior before https://github.com/rbuckton/ecma262/pull/14 , for using in switch

[20:03:05.0224] <bakkot>
ljharb: I am confused by https://github.com/tc39/agendas/commit/61962210dd2547d194eae2bb9cdf8669421a4f98; when did this get stage 2.7 and where are the tests for it?

[20:04:18.0749] <rbuckton>
Thanks, I'll take a look tomorrow

[20:21:14.0703] <arai>
added comments to the PRs

[20:23:09.0662] <ljharb>
Oh youâ€™re right, my bad. Iâ€™ll revert that commit. Itâ€™s 2 and Iâ€™m going for 2.7

[20:24:08.0211] <ljharb>
not sure why i got confused there

[09:58:59.0418] <Ashley Claymore>
If anyone wanted to ask questions about Composites ahead of plenary I'll be dialed into the legacy "R&T Monthly" zoom call on the [TC39 events calendar](https://github.com/tc39/Reflector/issues/290) that starts in one hour from now (19:00 UTC)

[14:28:37.0062] <rbuckton>
Thanks. These should all be addressed now


2025-11-12
[01:20:39.0089] <nicolo-ribaudo>
ljharb It was MF from my laptop :)


2025-11-16
[17:49:16.0609] <Chris de Almeida>
draft schedule is up!  see Reflector issue for link:  https://github.com/tc39/Reflector/issues/564

[17:56:23.0320] <nicolo-ribaudo>
Day 1 afternoon there are a bunch of stage 4 advancements and my low priority topic. I wonder if we could squeeze some time off the advancements (that tend to be very quick), and replace my low priority topic with a different 30 min one?

I'm very happy to present, but I'm feeling a bit like I'm wasting time by presenting it when there are things currently scheduled to overflow ðŸ˜…

[18:04:26.0957] <Chris de Almeida>
sounds like you are volunteering to move your topic to the bottom of schedule priority.  we can certainly do that 

[18:04:46.0391] <nicolo-ribaudo>
Well it was already marked as low priority in the agenda

[18:04:53.0948] <nicolo-ribaudo>
I mean the one about other module stuff on the web

[18:05:12.0855] <nicolo-ribaudo>
Which is just an informative topic, not something for our specs

[21:48:54.0041] <Christian Ulbrich>
Is https://tcq.app working for anyone? It seems to be _broken on my side of the internet_ 

[21:51:06.0919] <Chris de Almeida>
internal server error  ðŸ˜­

[21:56:30.0700] <Chris de Almeida>
`/summon` bterlson 

[22:18:04.0512] <Christian Ulbrich>
Chris de Almeida: Didn't know you were here in person. :)

[22:29:50.0706] <nicolo-ribaudo>
Can we try with the V2 this time? ðŸ˜…

[22:37:50.0011] <Chris de Almeida>
we just might!  Christian and I are trying to reproduce the bugs we found from using it last time and we can't reproduce...  

[23:49:04.0085] <Rob Palmer>
Brian is also debugging TCQ: Legendary Edition

[23:54:24.0546] <Christian Ulbrich>
Rob Palmer: If you could get him, to give away the stats of his setup (VM cpu cores, ram size), I could reproduce this at least as an approximation. I very very highly assume, that there are various race conditions in his original code (that TCQ reloaded, simply re-uses) - having an environment that is more close to his original, might "solve" the currently reported bugs for TCQ reloaded, which we could not reproduce now.

[02:41:38.0295] <Rob Palmer>
It's hosted on app service D1 plan, 1GB ram, some slice of a vcpu not sure if multicore


2025-11-17
[23:41:50.0160] <Christian Ulbrich>
Rob Palmer: <del>I quadrupled</del> (always wanted use that word) QUAD DAMAGE  the resources for https://staging.tcq-reloaded.com and after some small tests, I will deploy prod too this evening (during the Karaoke night, when I know you are not needing TCQ :D).

[00:50:06.0889] <Justin Ridgewell>
Ashley Claymore: https://github.com/tc39/proposal-string-dedent/issues/75

[13:16:31.0949] <shu>
> Now of course we could ask the question for when wasm objects are no longer opaque and gain prototypes
that would be with https://github.com/WebAssembly/custom-descriptors

[15:27:20.0905] <bakkot>
Chris de Almeida: I am on the agenda as the last slot for today; per my schedule constraints I can't be present after 1600 (ideally 1500). could I be moved to a later day?

[15:27:32.0393] <bakkot>
if not it's not an urgent item and can get removed

[15:28:35.0360] <nicolo-ribaudo>
If you want we can swap our slots

[15:29:08.0745] <nicolo-ribaudo>
(the export defer one)

[15:30:10.0253] <bakkot>
I'm hoping a later day works anyway because I am sick today and may not be up to presenting that item today


2025-11-18
[16:47:36.0895] <snek>
is tcq still dead?

[16:47:58.0216] <snek>
i guess the website is still intermittent 

[16:49:22.0385] <snek>
ah i see a link was posted mere moments ago

[17:00:59.0720] <bakkot>
meeting is starting, for anyone else who is remote and not paying enough attention to the clock

[17:02:13.0249] <ptomato>
I must be blind, but I can't find the google form to get the video chat link?

[17:02:38.0885] <ryzokuken>
https://github.com/tc39/Reflector/issues/564

[17:03:03.0170] <nicolo-ribaudo>
You are the second person asking, we should make it more visible in the issue 

[17:03:06.0529] <bakkot>
it is under the "Video Conference" heading

[17:03:11.0683] <bakkot>
in said thread

[17:04:00.0376] <rkirsling>
woot woot another japan meeting begins

[17:04:43.0570] <Michael Ficarra>
break at 10:00?

[17:06:30.0628] <rkirsling>
who doesn't love starting with a break

[17:22:15.0555] <Chris de Almeida>
sorry about that, I will fix

[17:23:11.0808] <Chris de Almeida>
TCQ is buggy af.. I am struggling

[17:23:51.0431] <Chris de Almeida>
1. move agenda topic
2. wait
3. reload page
4. hope the item is where it's supposed to be
5. GOTO 1

[17:29:16.0764] <Michael Ficarra>
lol `[[IsLockFree1]]` would be a little silly

[17:29:40.0335] <Justin Ridgewell>
What was the change in the copyright?

[17:29:57.0062] <Justin Ridgewell>
Comparing 262â€™s and 426â€™s copyright text, it looks the same.

[17:30:00.0940] <Michael Ficarra>
the copyright notice was just some random copyright text that we have no idea where it came from

[17:30:04.0573] <ryzokuken>
we hadn't used the alternate copyright for either standard

[17:30:20.0025] <Michael Ficarra>
@justingrant:matrix.org are you comparing the yearly releases or the editors' drafts?

[17:30:39.0391] <Michael Ficarra>
we've already updated the editors' drafts

[17:30:51.0542] <nicolo-ribaudo>
Shhhh we are dealing with it, Aki noticed one second after saying yes

[17:30:55.0423] <jkup>
426 is also incorrect 

[17:31:00.0478] <Justin Ridgewell>
Comparing the published specs

[17:31:07.0701] <Justin Ridgewell>
@nicol

[17:31:16.0808] <Justin Ridgewell>
* @nicolo-ribaudo:matrix.org just said it was already correct

[17:31:56.0662] <Aki>
https://github.com/tc39/agendas/blob/main/2025/tc39-2025-049-Rev1.pdf

[17:31:59.0106] <Aki>
I was wrong

[17:32:02.0648] <Aki>
it's is wrong

[17:33:00.0886] <Rob Palmer>
You are welcome to prepare another vote.  I think we could get through it very quickly.

[17:33:03.0964] <Aki>
that's the wrong link

[17:33:09.0547] <Aki>
https://github.com/tc39/ecma426/pull/237

[17:33:57.0452] <rkirsling>
if my work focus hadn't changed, I would be likely interested in editor group :-/ (but then timezones would also be messy)

[17:35:44.0764] <bakkot>
https://github.com/tc39/ecma262/pull/3701

[17:35:51.0752] <Justin Ridgewell>
Diff:

[17:39:10.0485] <nicolo-ribaudo>
It would be a very uncontroversial vote, but given it's not urgent maybe we should wait until next time? I assume the same things I said about stage advancement materials also apply to votes materials

[17:39:46.0810] <nicolo-ribaudo>
(I would be happy to "vote" yes now though)

[17:40:28.0128] <Aki>
I actually just turned the PR to a draft bc I want Samina's eyes on it before I change anything formal.

[17:42:06.0436] <Ashley Claymore>
`[[IsLockFreeToo]]`

[17:56:00.0761] <danielrosenwasser>
Is this only an error if a named export is requested, or if the module in question is imported?

[17:56:30.0647] <danielrosenwasser>
* Is this only an error if there's an ambiguous named import, or if the module in question imports two conflicting bindings?

[17:56:43.0969] <bakkot>
only if you actually request the name

[17:56:57.0196] <rkirsling>
ruh roh engine262

[17:56:58.0239] <danielrosenwasser>
This is actually news to me

[17:57:37.0446] <bakkot>
ambiguous exports like this are actually stripped from namespace exports, which is fun too

[17:58:44.0108] <bakkot>
ljharb: note the `export * from` in `//library`

[17:58:50.0003] <bakkot>
it is exporting all bindings from both left and right

[17:58:58.0238] <bakkot>
but both of those export a `ns` binding

[18:00:31.0556] <Ashley Claymore>
I'm pleased we at least chose to drop clashing export * rather than something more fun like "first one wins"

[18:01:56.0656] <eemeli>
Do I understand right that we have yet another concept of equality defined by multi-path-importability?

[18:02:48.0444] <bakkot>
sort of! but it applies only to bindings, not to values

[18:04:12.0601] <eemeli>
So like, _really_ equal.

[18:04:13.0894] <nicolo-ribaudo>
What if it exported a live array of all the values

[18:05:20.0888] <Andreu Botella (ðŸ•‘ JST, at TC39)>
cue adding quadruple equals to the language for stage 1

[18:05:39.0199] <eemeli>
Hey, you said it, I only thought about it.

[18:08:14.0706] <ljharb>
there's lots of equality symbols we could add! `â‰… â‰Œ â‰”` etc

[18:09:13.0958] <rkirsling>
puttin' the https://en.wikipedia.org/wiki/J_(programming_language) in JS

[18:09:22.0476] <Andreu Botella (ðŸ•‘ JST, at TC39)>
hamburger operator

[18:09:28.0368] <Andreu Botella (ðŸ•‘ JST, at TC39)>
oh, forgot this wasn't the temporal dead zone

[18:09:38.0086] <ljharb>
â˜° ftw

[18:09:49.0156] <ljharb>
* â˜° ftw (i have that one on autocomplete)

[18:09:51.0792] <rkirsling>
oh wait J is APL-like but ASCII

[18:09:56.0686] <rkirsling>
RIP my joke

[18:09:59.0576] <ljharb>
* â˜° ftw (i have that one on autocomplete, i'm incapable of typing the name of that sandwich now)

[18:12:59.0565] <Chris de Almeida>
it's do be like the sometimes

[18:13:11.0818] <Chris de Almeida>
* it's do be like that sometimes

[18:13:19.0567] <James M Snell>
Unicode U+2630 ... so close ... if only it had been U+2620

[18:13:27.0388] <bakkot>
is the thing being described here fuzzing or something else?

[18:14:20.0050] <bakkot>
I guess it's not quite fuzzing in that there is no randomness?

[18:14:24.0385] <nicolo-ribaudo>
If I understand correctly it's doing all possible combinations of some things, deterministically 

[18:15:46.0672] <Richard Gibson>
are you really into the I Ching?

[18:16:31.0077] <ljharb>
lol nah it's the trendy menu icon on mobile apps before it was a grid of 9 squares

[18:18:19.0600] <bakkot>
we are very efficient this morning

[18:19:31.0751] <Richard Gibson>
right, I would describe it as a kind of metamorphic testing

[18:21:32.0520] <ptomato>
agreed, not fuzzing, though related I guess?

[18:27:18.0242] <bakkot>
return override does not add internal slots

[18:27:25.0690] <bakkot>
and cannot be used to add internal slots

[18:27:34.0745] <bakkot>
it can be used to add private fields, but those are slightly different

[18:28:36.0356] <bakkot>
all objects are created with an internal slot which stores a list of their private fields; that list is what gets updated when fields are added to an object, rather than the object itself getting a new slot

[18:30:25.0421] <Michael Ficarra>
thank you, I was trying to look through the spec to confirm that claim

[18:34:15.0293] <Michael Ficarra>
I think it's just editorial though and we would just stick the slot on every object in MakeBasicObject

[18:34:47.0525] <Michael Ficarra>
we wouldn't do a new thing (adding an internal slot to an object after its creation) unless we really had to

[18:43:09.0578] <Jake Archibald>
The title of this is incorrect on https://github.com/tc39/agendas/blob/main/2025/11.md "Into Locale Info API for Stage 4" - it made it hard for me to find

[18:43:52.0849] <Jake Archibald>
https://github.com/tc39/agendas/pull/2011

[18:46:09.0397] <rkirsling>
Frank's art is very intimidating

[18:46:17.0646] <rkirsling>
* Frank's art is very intimidating :D

[18:50:28.0516] <Christian Ulbrich>
Clearly van gogh.

[18:51:41.0162] <Mathieu Hofman>
Just reviewing the note, the transcription today is missing quite a bit.

[18:52:03.0166] <jkup>
Does it require a point of order or is it ok now?

[18:53:33.0449] <Mathieu Hofman>
I'm not paying close attention  enough, was just reviewing what I had said

[18:55:21.0517] <rkirsling>
tfw _too_ efficient

[19:38:24.0837] <Chris de Almeida>
we are making good time thus far and have already been able to move some overflow topics into the schedule

consequently, topics have been shuffled around quite a bit, so please consult for the latest information

[20:13:09.0081] <Aki>
I have been wondering what the use case is here

[20:14:59.0575] <Richard Gibson>
for `maximumFractionDigits`?

[20:17:53.0171] <Mathieu Hofman>
Not plenary related. Is there a way we could set proposal repos so that any tc39 member could create and push to branches (and probably branch protection to only allow direct push to main for champions). Would really love to avoid forking for simple contributions.

[20:19:04.0647] <Aki>
no sorry I think i was lagging a bit behind, it was a curiosity around trailing zeroes from the user code perspective. not meaningful for this technical discussion.

