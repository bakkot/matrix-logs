2025-12-01
[01:01:24.0231] <Aki>
Happy Monday, delegates! Just a few days before the notes deadline. that means reviewing the transcript of what you said and editing for accuracy, making sure links to proposals and slides are present and accurate, and recording a summary of the presentation/conversation as well as any decisions the committee reached at the conclusion.


2025-12-03
[11:04:33.0531] <bakkot>
RCE in react server apparently arising from proto pollution

gotta start encouraging people to put `delete Object.prototype.__proto__` at the top of all their files I guess

[11:51:46.0623] <nicolo-ribaudo>
Gotta suggest a CSP to remove it, it's normative optional anyway 

[11:59:32.0009] <bakkot>
https://github.com/tc39/proposal-symbol-proto had something like that, although much more complex

[11:59:38.0328] <bakkot>
though in this case it was server-side

[12:00:17.0121] <bakkot>
(and node _does_ have `--disable-proto`, though no one uses it)

[12:07:17.0697] <Michael Ficarra>
If you could teach them to do this, you could teach them to not use objects as maps. Unfortunately, "we can teach them" as a strategy has never worked out once in my life.

[12:07:35.0842] <bakkot>
one of those things is a lot easier to teach!

[12:08:32.0274] <kriskowal>
yeah, and JSON makes a lie of ‚Äúdon‚Äôt use objects for maps‚Äù every time.

[12:17:04.0891] <ptomato>
so does the performance of using objects for maps

[12:54:20.0943] <Rob Palmer>
In the most recent meeting there was some advocacy for using objects as maps. Is this evidence against that? 

[12:56:23.0339] <bakkot>
if you're going to use an object as a map, you _must_ use `__proto__: null` when creating it, that's all

[12:56:55.0135] <bakkot>
the language does this, e.g. in RegExp groups or `groupBy`

[12:57:23.0154] <kriskowal>
However, JSON.parse, creator of many objects-as-maps, not so much.

[12:58:04.0227] <bakkot>
alas

[12:59:51.0270] <Rob Palmer>
Where is JSON.parse2

[14:19:39.0176] <Chris de Almeida>
seek the null prototype reviver 

[14:30:33.0896] <bakkot>
that reminds me, there was a suggestion at some point to add an option `proto` parameter to `Object.fromEntries`

[14:30:37.0171] <bakkot>
though possibly it should accept only the value `null`

[14:32:23.0475] <Michael Ficarra>
just prepend your entries with `["__proto__", null]` üòú

[14:34:08.0063] <bakkot>
ah yes, the bad old days of object initialization triggering setters from the prototype

[15:11:27.0563] <Michael Ficarra>
speaking of bad old days and object prototypes, does anyone else remember how in ES3 a named function expression (but not an anonymous function) would add an object with Object.prototype to the scope chain?

[15:12:39.0609] <Michael Ficarra>
* speaking of bad old days and object prototypes, does anyone else remember how in ES3 a named function expression (but not an anonymous function) would add an object with Object.prototype as its [[Prototype]] to the scope chain?

[15:13:33.0663] <Michael Ficarra>
at least one engine had actually implemented this literally (Opera I think?) and it was hilarious


2025-12-04
[13:59:29.0429] <bakkot>
James M Snell jkup Richard Gibson Mathieu Hofman Andreu Botella rbuckton  as people who expressed interest in improvements AbortController, want to make sure you've all seen https://github.com/whatwg/dom/pull/1425

[14:00:38.0805] <bakkot>
which I am now seeing was discussed at WHATNOT this week; sad that I missed that. didn't get a notification for it being added to the agenda I guess. though per the notes nicolo-ribaudo participated at least

[14:05:32.0081] <bakkot>
* which I am now seeing was discussed at WHATNOT last week; sad that I missed that. didn't get a notification for it being added to the agenda I guess. though per the notes nicolo-ribaudo participated at least

[14:05:47.0902] <jkup>
I missed this. Thanks for the ping!

[15:39:24.0360] <Justin Ridgewell>
@danielrosenwasser:matrix.org Can I convince you to reverse https://github.com/microsoft/TypeScript/issues/51789? It‚Äôs trivial for you to implement, and prevents a lot of headache with https://github.com/tc39/proposal-string-dedent/issues/75

[15:41:17.0638] <danielrosenwasser>
I don't follow, we won't be emitting to ES5 in the next version of TS, so freezing behavior will be the default

[15:41:27.0541] <Justin Ridgewell>
For this version of TS

[15:41:36.0228] <Justin Ridgewell>
Not everyone is going to immediately upgrade

[15:41:50.0458] <Justin Ridgewell>
This is the last chance to fix a headache before we have to get everyone to switch

[15:52:51.0956] <danielrosenwasser>
We definitely can't change 5.9's behavior in a patch release, we don't plan on a 5.10, and 6.0 will have a min-target of ES2015. I wish we'd done it sooner already, but at this point if you need to use this library in ES5 the answer might be Babel for emit.

[15:53:01.0533] <danielrosenwasser>
* We definitely can't change 5.9's behavior in a patch release, we don't plan on a 5.10, and 6.0 will have a min-target of ES2015. I wish we'd done it sooner, but at this point if you need to use this library in ES5 the answer might be Babel for emit.

[15:55:37.0935] <bakkot>
it's going to be a language feature, not a library...


2025-12-05
[16:00:59.0970] <Justin Ridgewell>
Exactly, this is the main blocker for the proposal. I couldn‚Äôt get agreement to cache unfrozen template strings arrays, and TS is the biggest hurdle because it‚Äôs always unfrozen.

[16:05:51.0455] <danielrosenwasser>
So you're saying that this proposal cannot proceed with its strategy because there will be too many people depending on TS5.9 because they target ES5, but who want to use a polyfill or target a modern runtime?

[16:06:15.0623] <danielrosenwasser>
* So you're saying that this proposal cannot proceed with its strategy because there will be too many people depending on TS5.9 because they target ES5, but who want to use a polyfill or target a modern runtime with `String.dedent`?

[16:12:18.0903] <bakkot>
Strictly speaking it _can_ proceed, it's just that such people will get subtly wrong behavior if they try to use `String.dedent`

[16:15:23.0276] <danielrosenwasser>
I would advise us to ignore the spec divergence from TypeScript 5.9 and older in this case. By the time `String.dedent` is stage 4, it's likely that TS6 will be the latest stable version. 

[16:17:50.0879] <Justin Ridgewell>
Ideally, we‚Äôd be able to cache any arrays, and it wouldn‚Äôt be an issue. But if the committe decides we can only cache frozen arrays, people stuck on 5.9 will get much worse performance for common tagged templates and probably not realize it.

[00:53:58.0896] <Aki>
can someone nudge Ruben to document his summaries/conclusions? I'll be  working on this in a few hours.

