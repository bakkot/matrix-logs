<!DOCTYPE html><html><head>
  <title>TC39 Delegates on 2022-12-01</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "TC39 Delegates";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">TC39 Delegates<br>2022-12-01<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-11-30" class="nav-link"><span>prev</span></a>
<a href="2022-12-02" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search TC39 Delegates">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Thu Dec 01 2022 01:00:41 GMT-0800 (Pacific Standard Time)">09:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">what is the last item scheduled for today?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Thu Dec 01 2022 01:03:59 GMT-0800 (Pacific Standard Time)">09:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">ShadowRealm</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Thu Dec 01 2022 01:04:20 GMT-0800 (Pacific Standard Time)">09:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">but it may move slightly if time magically opens up</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Thu Dec 01 2022 01:05:19 GMT-0800 (Pacific Standard Time)">09:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i should like to be present for shadowrealms but tbqh i don't know if i'll be able to stay awake until then</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Thu Dec 01 2022 01:08:43 GMT-0800 (Pacific Standard Time)">09:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"> * can someone let me in to the meet? <span class="nick-13">Rob Palmer</span> <span class="nick-3">ryzokuken</span> <span class="nick-5">bterlson</span></td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Thu Dec 01 2022 01:09:42 GMT-0800 (Pacific Standard Time)">09:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: can you add <code>amazing iterator</code> -&gt; <code>async iterator</code>?</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Thu Dec 01 2022 01:19:01 GMT-0800 (Pacific Standard Time)">09:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><span class="nick-5">bterlson</span>: advance queue?</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Thu Dec 01 2022 01:23:17 GMT-0800 (Pacific Standard Time)">09:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">As Michael Saboff said, please add your name, abbreviation and organization to today's meeting notes.  Link here:  <a href="https://github.com/tc39/Reflector/issues/446">https://github.com/tc39/Reflector/issues/446</a></td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Thu Dec 01 2022 01:24:41 GMT-0800 (Pacific Standard Time)">09:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">Please could everyone avoid sharing direct URLs to our notes or meeting URLs in this publicly logged room.  These are all linked from the Reflector post so that they are kept private.</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Thu Dec 01 2022 01:28:35 GMT-0800 (Pacific Standard Time)">09:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">already 15 min ahead!</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Thu Dec 01 2022 01:37:47 GMT-0800 (Pacific Standard Time)">09:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">Wouldn't this be also the first time, that we would have a ~<em>keyword</em>~operator being extended / giving a <code>.</code> ? <code>await</code> is not a normal function but sth. <em>magical</em> like <code>delete</code>?</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Thu Dec 01 2022 01:38:14 GMT-0800 (Pacific Standard Time)">09:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">no, we have <code><a href="http://new.target">new.target</a></code></td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Thu Dec 01 2022 01:38:16 GMT-0800 (Pacific Standard Time)">09:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">and <code>super.whatever</code></td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Thu Dec 01 2022 01:38:24 GMT-0800 (Pacific Standard Time)">09:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">and <code>import.meta</code></td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Thu Dec 01 2022 01:38:29 GMT-0800 (Pacific Standard Time)">09:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">metaproperties are already A Thing</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Thu Dec 01 2022 01:40:01 GMT-0800 (Pacific Standard Time)">09:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell"><code>super.whatever</code> is used like a <em>magical</em> <strong>function</strong> and <code><a href="http://new.target">new.target</a></code> is a <em>magical</em> <strong>property</strong>. <code>import.meta</code> a <em>magical</em> <strong>global</strong>.</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Thu Dec 01 2022 01:40:21 GMT-0800 (Pacific Standard Time)">09:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">speaking of research -- anyone wanna take over running that call?</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Thu Dec 01 2022 01:42:11 GMT-0800 (Pacific Standard Time)">09:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">I can relate to the idea of hiding Promises, but it would come at the cost of having - IMO - at the cost of another magical thing, that we do not have so far.</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Thu Dec 01 2022 01:44:40 GMT-0800 (Pacific Standard Time)">09:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">it could be an <code>awaitAll</code> keyword and it'd be the same</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Thu Dec 01 2022 01:44:44 GMT-0800 (Pacific Standard Time)">09:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">we have issues with sound in the room?</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Thu Dec 01 2022 01:44:58 GMT-0800 (Pacific Standard Time)">09:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><code>await.all</code> isn't magical, it's just a way to nest keywords under keyords in this case</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Thu Dec 01 2022 01:44:58 GMT-0800 (Pacific Standard Time)">09:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><code>await.all [a, b, c]</code> just doesn't seem that different from <code>await Promise.all([a, b, c])</code> to me</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Thu Dec 01 2022 01:45:00 GMT-0800 (Pacific Standard Time)">09:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">async/await isn't about hiding promises. It's about taking continuation passing style code and allowing you to write it as linear code so that you can maintain the benefit of existing control flow constructs like <code>continue</code>/<code>break</code>/<code>return</code>/<code>yield</code>.</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Thu Dec 01 2022 01:45:20 GMT-0800 (Pacific Standard Time)">09:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">what is being highlighted right now is the issue of breaking consistency in a language -- new developers will have a hard time keeping two things in mind</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Thu Dec 01 2022 01:45:30 GMT-0800 (Pacific Standard Time)">09:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <code>await.all [a, b, c]</code> just doesn't seem that different from <code>await Promise.all([a, b, c])</code> to me</blockquote></mx-reply>sure, i do the latter all the time, but in my experience devs in fact consider those quite different, and avoid the latter in favor of <code>await a; await b; await c</code> <em>constantly</em></td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Thu Dec 01 2022 01:45:31 GMT-0800 (Pacific Standard Time)">09:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">I would question teaching async/await before promises for this reason</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Thu Dec 01 2022 01:45:45 GMT-0800 (Pacific Standard Time)">09:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">i don't think the solution here is syntax</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Thu Dec 01 2022 01:46:00 GMT-0800 (Pacific Standard Time)">09:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">In other words, is there so far any <code>await</code>-like thing with a <code>.</code>?</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Thu Dec 01 2022 01:46:18 GMT-0800 (Pacific Standard Time)">09:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">Christian Ulbrich</span>: no, in that respect it'd be something new, but almost every new syntax feature has that :-)</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Thu Dec 01 2022 01:46:30 GMT-0800 (Pacific Standard Time)">09:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">yulia</span>: i totally agree this doesn't fix the education problem. to me it's fixing an ergonomics problem.</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Thu Dec 01 2022 01:46:33 GMT-0800 (Pacific Standard Time)">09:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@alex.vincent:matrix.org">Alex Vincent</span>&gt;</div></td><td class="msg-cell">DevMo has a great example of how to do promises in sequence via Array.prototype.reduce</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Thu Dec 01 2022 01:46:36 GMT-0800 (Pacific Standard Time)">09:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">ljharb</span> I definitely see people do <code>await a; await b; await c</code> over <code>await Promise.all</code> but I have generally assumed it was because of thinking serially rather than because of wanting to avoid <code>Promise</code>?</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Thu Dec 01 2022 01:46:46 GMT-0800 (Pacific Standard Time)">09:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-10">yulia</span>: i totally agree this doesn't fix the education problem. to me it's fixing an ergonomics problem.</blockquote></mx-reply>the ergonomics issue is relying on learners to make its poinit</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Thu Dec 01 2022 01:46:48 GMT-0800 (Pacific Standard Time)">09:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">"wanting to avoid <code>Promise</code>" seems like a problem we should not be trying to solve for them</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Thu Dec 01 2022 01:46:49 GMT-0800 (Pacific Standard Time)">09:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">you just did so as well</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Thu Dec 01 2022 01:46:55 GMT-0800 (Pacific Standard Time)">09:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@kriskowal:matrix.org">Kris Kowal</span>&gt;</div></td><td class="msg-cell">I imagine <code>for await all</code> would take a lot of pressure off of <code>await.all</code>.</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Thu Dec 01 2022 01:46:57 GMT-0800 (Pacific Standard Time)">09:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">i don't agree that this is a solution</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Thu Dec 01 2022 01:47:02 GMT-0800 (Pacific Standard Time)">09:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-6">ljharb</span> I definitely see people do <code>await a; await b; await c</code> over <code>await Promise.all</code> but I have generally assumed it was because of thinking serially rather than because of wanting to avoid <code>Promise</code>?</blockquote></mx-reply>my experience is that most of the time they don't need to be serial, and that they didn't want to deal with the ceremony of Promise.all</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Thu Dec 01 2022 01:47:12 GMT-0800 (Pacific Standard Time)">09:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">Motivate a change to "unconfuse" developers from Promises by adding a totally new syntax, should be well-thought of.</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Thu Dec 01 2022 01:47:13 GMT-0800 (Pacific Standard Time)">09:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-6">ljharb</span> I definitely see people do <code>await a; await b; await c</code> over <code>await Promise.all</code> but I have generally assumed it was because of thinking serially rather than because of wanting to avoid <code>Promise</code>?</blockquote></mx-reply>this rings true to me</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Thu Dec 01 2022 01:48:00 GMT-0800 (Pacific Standard Time)">09:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i reckon beginners are not at a place that <em>would</em> reach for parallel combinators but for a more discoverable way to do so, like syntax, or something</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Thu Dec 01 2022 01:48:08 GMT-0800 (Pacific Standard Time)">09:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">they're just not at a place to reason about things in parallel</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Thu Dec 01 2022 01:48:21 GMT-0800 (Pacific Standard Time)">09:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">Concerning the hiding motivation, it actually is a problem that have all the time with junior developers, they already do not know, that they are using promises...</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Thu Dec 01 2022 01:48:49 GMT-0800 (Pacific Standard Time)">09:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@kriskowal:matrix.org">Kris Kowal</span>&gt;</div></td><td class="msg-cell">I agree with @yulia that promises should be taught before async/await. I agree with <span class="nick-15">rbuckton</span> that the latter is not to hide the former.</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Thu Dec 01 2022 01:49:11 GMT-0800 (Pacific Standard Time)">09:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@haxjs:matrix.org">HE Shi-Jun</span>&gt;</div></td><td class="msg-cell">if the main problem is await all, should we only add <code>await.all</code> without <code>await.race</code> and others? Or even just introduce a special syntax (eg. <code>await* promises</code>)?</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Thu Dec 01 2022 01:49:15 GMT-0800 (Pacific Standard Time)">09:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">first we must teach one of the First Mistakes -- the existence of the microtask queue</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Thu Dec 01 2022 01:49:22 GMT-0800 (Pacific Standard Time)">09:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">shu</span>: The whole Playwright API is heavily <em>async</em>...</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Thu Dec 01 2022 01:49:48 GMT-0800 (Pacific Standard Time)">09:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">Christian Ulbrich</span>: sorry what's the context of that comment? i don't know what that means</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Thu Dec 01 2022 01:51:06 GMT-0800 (Pacific Standard Time)">09:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> if the main problem is await all, should we only add <code>await.all</code> without <code>await.race</code> and others? Or even just introduce a special syntax (eg. <code>await* promises</code>)?</blockquote></mx-reply>that would still be better than the status quo, but i think that'd be an unfortunate inconsistency</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Thu Dec 01 2022 01:51:43 GMT-0800 (Pacific Standard Time)">09:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@alex.vincent:matrix.org">Alex Vincent</span>&gt;</div></td><td class="msg-cell">"do nothing" is always an option.</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Thu Dec 01 2022 01:51:46 GMT-0800 (Pacific Standard Time)">09:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@haxjs:matrix.org">HE Shi-Jun</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">ljharb</span>: if syntax, there is no inconsistency?</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Thu Dec 01 2022 01:52:37 GMT-0800 (Pacific Standard Time)">09:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">the inconsistency would be 3 of the promise combinators lacking syntax, but 1 having it</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Thu Dec 01 2022 01:55:21 GMT-0800 (Pacific Standard Time)">09:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@haxjs:matrix.org">HE Shi-Jun</span>&gt;</div></td><td class="msg-cell">I mean, if 80% usage of combinators is just Promsie.all, is it ok to only add syntax for it?</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Thu Dec 01 2022 01:58:15 GMT-0800 (Pacific Standard Time)">09:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">should we only add a subset of + - * /, because some of them get more usage than the others?</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Thu Dec 01 2022 01:58:45 GMT-0800 (Pacific Standard Time)">09:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">i remain adamant that consistency is important for learnability of a language, 20% is a pretty big chunk, but i think we are  just pulling numbers from the air right now. </td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Thu Dec 01 2022 02:00:02 GMT-0800 (Pacific Standard Time)">10:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> speaking of research -- anyone wanna take over running that call?</blockquote></mx-reply>Sad to see you cannot attend</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Thu Dec 01 2022 02:00:17 GMT-0800 (Pacific Standard Time)">10:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Sad to see you cannot attend</blockquote></mx-reply>wanna take over?</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Thu Dec 01 2022 02:00:38 GMT-0800 (Pacific Standard Time)">10:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">you can bug felienne</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Thu Dec 01 2022 02:00:55 GMT-0800 (Pacific Standard Time)">10:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">or we can go without a research call for a while</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Thu Dec 01 2022 02:10:05 GMT-0800 (Pacific Standard Time)">10:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><span class="nick-5">bterlson</span>: it'd be really helpful to plan my sleep if the hackmd could be updated with an estimated plan for the rest of the day üôè</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Thu Dec 01 2022 02:10:42 GMT-0800 (Pacific Standard Time)">10:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> they're just not at a place to reason about things in parallel</blockquote></mx-reply>Sounds true. For beginners they need to be taught to be aware of parallel. But for me, I sometimes drop parallelism because I'm lazy to write Promise.all()</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Thu Dec 01 2022 02:11:35 GMT-0800 (Pacific Standard Time)">10:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">ljharb</span>: hackmd is constantly kept as up to date as we can make it - as we approach the end of the meeting it generally becomes more reliable as uncertainty decreases</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Thu Dec 01 2022 02:11:46 GMT-0800 (Pacific Standard Time)">10:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@kriskowal:matrix.org">Kris Kowal</span>&gt;</div></td><td class="msg-cell">I think Promise.all is the tip of the lazy iceberg. To go from lazy about parallelism to rigorous usually means converting a for loop to a map, or accumulating an array of promises in a for loop.</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Thu Dec 01 2022 02:11:50 GMT-0800 (Pacific Standard Time)">10:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">thanks, appreciate whatever you can do!</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Thu Dec 01 2022 02:12:32 GMT-0800 (Pacific Standard Time)">10:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">Jack Works</span>: have you tried to use editor abbreviations?</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Thu Dec 01 2022 02:12:36 GMT-0800 (Pacific Standard Time)">10:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> "do nothing" is always an option.</blockquote></mx-reply>I'm prepared and think it's ok if the committee dont like this idea</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Thu Dec 01 2022 02:12:53 GMT-0800 (Pacific Standard Time)">10:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">like this seems like an easier problem to solve than through the language</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Thu Dec 01 2022 02:13:15 GMT-0800 (Pacific Standard Time)">10:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@kriskowal:matrix.org">Kris Kowal</span>&gt;</div></td><td class="msg-cell">A much bolder improvement would be parallel for await loops.</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Thu Dec 01 2022 02:15:12 GMT-0800 (Pacific Standard Time)">10:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> should we only add a subset of + - * /, because some of them get more usage than the others?</blockquote></mx-reply>OOT: imo some operators (| &amp; %) do not deserve a single character operator because they're not used so often (than || &amp;&amp;)</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Thu Dec 01 2022 02:15:58 GMT-0800 (Pacific Standard Time)">10:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> OOT: imo some operators (| &amp; %) do not deserve a single character operator because they're not used so often (than || &amp;&amp;)</blockquote></mx-reply>As someone that does a fair amount of bit twiddling, I disagree</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Thu Dec 01 2022 02:16:25 GMT-0800 (Pacific Standard Time)">10:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@kriskowal:matrix.org">Kris Kowal</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> OOT: imo some operators (| &amp; %) do not deserve a single character operator because they're not used so often (than || &amp;&amp;)</blockquote></mx-reply>K&amp;R‚Äôs Regret. They got to bitwise first.</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Thu Dec 01 2022 02:16:32 GMT-0800 (Pacific Standard Time)">10:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sffc:mozilla.org">sffc</span>&gt;</div></td><td class="msg-cell">I would like 10 minutes of plenary time to discuss an additional question regarding Intl NumberFormat v3. I have added a slide at the end of the deck I used on Tuesday</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Thu Dec 01 2022 02:16:42 GMT-0800 (Pacific Standard Time)">10:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> wanna take over?</blockquote></mx-reply>I have little knowledge about how to do research... I can join the meeting but I don't think I can take the charge üëÄ</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Thu Dec 01 2022 02:16:53 GMT-0800 (Pacific Standard Time)">10:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@apaprocki:matrix.org">apaprocki</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">sffc</span>: have you proposed strings for the eras anywhere?</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Thu Dec 01 2022 02:17:06 GMT-0800 (Pacific Standard Time)">10:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">i think the only person who really knows what they are doing is felienne</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Thu Dec 01 2022 02:19:13 GMT-0800 (Pacific Standard Time)">10:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i know how to confirm my priors and ignore counter evidence</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Thu Dec 01 2022 02:19:32 GMT-0800 (Pacific Standard Time)">10:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-4">Jack Works</span>: have you tried to use editor abbreviations?</blockquote></mx-reply>Oh</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Thu Dec 01 2022 02:20:55 GMT-0800 (Pacific Standard Time)">10:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">One of the main pain point is when I'm using for...of loop and I want to use await in the loop body</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Thu Dec 01 2022 02:20:57 GMT-0800 (Pacific Standard Time)">10:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i know how to confirm my priors and ignore counter evidence</blockquote></mx-reply>sounds like ‚ú®science‚ú®</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Thu Dec 01 2022 02:21:05 GMT-0800 (Pacific Standard Time)">10:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sffc:mozilla.org">sffc</span>&gt;</div></td><td class="msg-cell"><span class="nick-11">apaprocki</span>: All context and work on this should be available on the proposal repository; e.g. <a href="https://github.com/FrankYFTang/proposal-intl-era-monthcode/issues/1">https://github.com/FrankYFTang/proposal-intl-era-monthcode/issues/1</a> ... my colleague Manish has a proposal that has been presented to CLDR. There is still room to evolve before they are written down. Would like your feedback if interested!</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Thu Dec 01 2022 02:21:09 GMT-0800 (Pacific Standard Time)">10:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> One of the main pain point is when I'm using for...of loop and I want to use await in the loop body</blockquote></mx-reply>Does anyone have the same feeling about this?</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Thu Dec 01 2022 02:22:33 GMT-0800 (Pacific Standard Time)">10:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">slides aren't showing on meet</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Thu Dec 01 2022 02:22:36 GMT-0800 (Pacific Standard Time)">10:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">blank screen</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Thu Dec 01 2022 02:22:46 GMT-0800 (Pacific Standard Time)">10:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@haxjs:matrix.org">HE Shi-Jun</span>&gt;</div></td><td class="msg-cell">I can't see the slide</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Thu Dec 01 2022 02:26:19 GMT-0800 (Pacific Standard Time)">10:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">* you don't need to understand what membrane is to know the motivation of this proposal</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Thu Dec 01 2022 02:26:57 GMT-0800 (Pacific Standard Time)">10:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">TLDR: we have tons of revocable Proxies and we need to revoke them in an ergonomic way. </td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Thu Dec 01 2022 02:28:28 GMT-0800 (Pacific Standard Time)">10:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">I mean you kind of do if you've never encountered proxy revocation before (I merely know that it's a thing that exists that I've not needed to investigate to any depth)</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Thu Dec 01 2022 02:30:09 GMT-0800 (Pacific Standard Time)">10:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><p>today:</p>
<pre><code class="language-js">for (const p of proxiesToRevoke) revokerMap.get(p)()
</code></pre>
<p>You need to store tons of revoker functions and call them one by one</p>
</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Thu Dec 01 2022 02:31:56 GMT-0800 (Pacific Standard Time)">10:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>I'm curious if <code>DisposableStack</code> can help here, either:</p>
<pre><code class="language-js">const { proxy, revoke } = Proxy.revocable(...);
stack.defer(revoke);
return proxy;

// later

stack.dispose(); // mass revocation
</code></pre>
<p>Or make the return value of <code>Proxy.revocable</code> itself a disposable.</p>
</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Thu Dec 01 2022 02:32:59 GMT-0800 (Pacific Standard Time)">10:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">Cannot help.</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Thu Dec 01 2022 02:33:20 GMT-0800 (Pacific Standard Time)">10:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">Proxy does not have a prototype to store @@disposable</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Thu Dec 01 2022 02:33:32 GMT-0800 (Pacific Standard Time)">10:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I'm not sure how I see how</td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Thu Dec 01 2022 02:34:17 GMT-0800 (Pacific Standard Time)">10:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">the confusing name of <code>defer</code> aside, that seems like it'd work</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Thu Dec 01 2022 02:34:31 GMT-0800 (Pacific Standard Time)">10:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">Is the memory argument really so strong?</td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Thu Dec 01 2022 02:35:39 GMT-0800 (Pacific Standard Time)">10:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">I don't think we need to determine whether DisposableStack would be sufficient today</td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Thu Dec 01 2022 02:35:57 GMT-0800 (Pacific Standard Time)">10:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">this can reach stage 1 and later we don't advance to stage 2 because we realise DisposableStack is a fine solution</td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Thu Dec 01 2022 02:36:08 GMT-0800 (Pacific Standard Time)">10:36</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span></div></td><td class="msg-cell">has never <em>revoked</em> a proxy, why would I? I want all of them to go through <strong>my</strong> <em>proxy</em> :)</td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Thu Dec 01 2022 02:37:12 GMT-0800 (Pacific Standard Time)">10:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@haxjs:matrix.org">HE Shi-Jun</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Proxy does not have a prototype to store @@disposable</blockquote></mx-reply>DisposableStack defer still could work</td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Thu Dec 01 2022 02:37:49 GMT-0800 (Pacific Standard Time)">10:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">And I meant that its not the proxy that is disposable, but the <code>{ proxy, revoke }</code> object</td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Thu Dec 01 2022 02:38:30 GMT-0800 (Pacific Standard Time)">10:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@haxjs:matrix.org">HE Shi-Jun</span>&gt;</div></td><td class="msg-cell">I think DisposableStack could work, but the proposed api seems much easy to use.</td></tr>
  <tr class="msg" id="L100"><td class="ts-cell"><a class="ts" href="#L100" alt="Thu Dec 01 2022 02:39:06 GMT-0800 (Pacific Standard Time)">10:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">I also had the <a href="https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal">https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal</a> in mind...</td></tr>
  <tr class="msg" id="L101"><td class="ts-cell"><a class="ts" href="#L101" alt="Thu Dec 01 2022 02:40:31 GMT-0800 (Pacific Standard Time)">10:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@haxjs:matrix.org">HE Shi-Jun</span>&gt;</div></td><td class="msg-cell">yeah, cross realm seems a requirement of this proposal?</td></tr>
  <tr class="msg" id="L102"><td class="ts-cell"><a class="ts" href="#L102" alt="Thu Dec 01 2022 02:41:14 GMT-0800 (Pacific Standard Time)">10:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">I think wrapped revokers could also be optimized in theory, but would any engine realistically perform all these optimizations?</td></tr>
  <tr class="msg" id="L103"><td class="ts-cell"><a class="ts" href="#L103" alt="Thu Dec 01 2022 02:42:20 GMT-0800 (Pacific Standard Time)">10:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">Proxies now have some heavy uses... they are used by recent Vue3 and libs implementing <em>immutability</em>.</td></tr>
  <tr class="msg" id="L104"><td class="ts-cell"><a class="ts" href="#L104" alt="Thu Dec 01 2022 02:42:45 GMT-0800 (Pacific Standard Time)">10:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">I still wonder though, whether they are actually <em>revoking</em> their Proxies...</td></tr>
  <tr class="msg" id="L105"><td class="ts-cell"><a class="ts" href="#L105" alt="Thu Dec 01 2022 02:42:59 GMT-0800 (Pacific Standard Time)">10:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@haxjs:matrix.org">HE Shi-Jun</span>&gt;</div></td><td class="msg-cell">Not sure whether Vue3/Mobx use revoke...</td></tr>
  <tr class="msg" id="L106"><td class="ts-cell"><a class="ts" href="#L106" alt="Thu Dec 01 2022 02:43:01 GMT-0800 (Pacific Standard Time)">10:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">hard to disagree with shu here as my point above was that I've never actually <em>used</em> a Proxy, let alone thought about revoking one</td></tr>
  <tr class="msg" id="L107"><td class="ts-cell"><a class="ts" href="#L107" alt="Thu Dec 01 2022 02:43:38 GMT-0800 (Pacific Standard Time)">10:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">you may not have used one directly, but lots of libraries / frameworks do leverage them under the hood</td></tr>
  <tr class="msg" id="L108"><td class="ts-cell"><a class="ts" href="#L108" alt="Thu Dec 01 2022 02:43:45 GMT-0800 (Pacific Standard Time)">10:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">(not that I'm objecting to anything :P my point above was that without membranes, there isn't an obvious context of usage)</td></tr>
  <tr class="msg" id="L109"><td class="ts-cell"><a class="ts" href="#L109" alt="Thu Dec 01 2022 02:44:16 GMT-0800 (Pacific Standard Time)">10:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> yeah, cross realm seems a requirement of this proposal?</blockquote></mx-reply>don't know maybe we need ask <span class="nick-10">caridy</span></td></tr>
  <tr class="msg" id="L110"><td class="ts-cell"><a class="ts" href="#L110" alt="Thu Dec 01 2022 02:44:24 GMT-0800 (Pacific Standard Time)">10:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">I would like to see usage numbers from web browsers (which do not cover the usages in non browser environments)</td></tr>
  <tr class="msg" id="L111"><td class="ts-cell"><a class="ts" href="#L111" alt="Thu Dec 01 2022 02:44:42 GMT-0800 (Pacific Standard Time)">10:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> And I meant that its not the proxy that is disposable, but the <code>{ proxy, revoke }</code> object</blockquote></mx-reply>oh that works.</td></tr>
  <tr class="msg" id="L112"><td class="ts-cell"><a class="ts" href="#L112" alt="Thu Dec 01 2022 02:45:05 GMT-0800 (Pacific Standard Time)">10:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">Membranes are just a mental model around Proxies. There are many use cases for Proxies, it does not matter, whether they are actually membranes. </td></tr>
  <tr class="msg" id="L113"><td class="ts-cell"><a class="ts" href="#L113" alt="Thu Dec 01 2022 02:47:49 GMT-0800 (Pacific Standard Time)">10:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">Vue is proxying objects to implement immutability?</td></tr>
  <tr class="msg" id="L114"><td class="ts-cell"><a class="ts" href="#L114" alt="Thu Dec 01 2022 02:47:52 GMT-0800 (Pacific Standard Time)">10:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">they expect this to be performant?</td></tr>
  <tr class="msg" id="L115"><td class="ts-cell"><a class="ts" href="#L115" alt="Thu Dec 01 2022 02:48:21 GMT-0800 (Pacific Standard Time)">10:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">@shu They use it to implement reactivity.</td></tr>
  <tr class="msg" id="L116"><td class="ts-cell"><a class="ts" href="#L116" alt="Thu Dec 01 2022 02:48:40 GMT-0800 (Pacific Standard Time)">10:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@haxjs:matrix.org">HE Shi-Jun</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Vue is proxying objects to implement immutability?</blockquote></mx-reply>Not immutablitity, but use proxy for reactivity</td></tr>
  <tr class="msg" id="L117"><td class="ts-cell"><a class="ts" href="#L117" alt="Thu Dec 01 2022 02:49:11 GMT-0800 (Pacific Standard Time)">10:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">I have skimmed through the source, looks like they never revoke them.</td></tr>
  <tr class="msg" id="L118"><td class="ts-cell"><a class="ts" href="#L118" alt="Thu Dec 01 2022 02:49:19 GMT-0800 (Pacific Standard Time)">10:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">interesting, i see</td></tr>
  <tr class="msg" id="L119"><td class="ts-cell"><a class="ts" href="#L119" alt="Thu Dec 01 2022 02:49:32 GMT-0800 (Pacific Standard Time)">10:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><pre><code class="language-js">const disposable = new DisposableStack()
function createProxy() {
    const {proxy, revoke} = Proxy.revocable(...)
    disposable.defer(revoke)
    return proxy
    // at this point, revoke only hold by the DisposableStack.
    // engine can GC `revoke` and knowing the Proxy is being revoked after the DisposableStack disposes
}
</code></pre>
</td></tr>
  <tr class="msg" id="L120"><td class="ts-cell"><a class="ts" href="#L120" alt="Thu Dec 01 2022 02:51:35 GMT-0800 (Pacific Standard Time)">10:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">so do we have a non-theoretical go-to use case of revocation then?</td></tr>
  <tr class="msg" id="L121"><td class="ts-cell"><a class="ts" href="#L121" alt="Thu Dec 01 2022 02:52:19 GMT-0800 (Pacific Standard Time)">10:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">rkirsling</span>: So far not, because at least Vue, does not seem to use <em>revocation</em></td></tr>
  <tr class="msg" id="L122"><td class="ts-cell"><a class="ts" href="#L122" alt="Thu Dec 01 2022 02:52:28 GMT-0800 (Pacific Standard Time)">10:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">Jack Works</span>: according to the definition of liveness, clearing out the proxy target is not necessary, as the target's identity would be unobservable to the program through the proxy already</td></tr>
  <tr class="msg" id="L123"><td class="ts-cell"><a class="ts" href="#L123" alt="Thu Dec 01 2022 02:52:30 GMT-0800 (Pacific Standard Time)">10:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <pre><code class="language-js">const disposable = new DisposableStack()
function createProxy() {
    const {proxy, revoke} = Proxy.revocable(...)
    disposable.defer(revoke)
    return proxy
    // at this point, revoke only hold by the DisposableStack.
    // engine can GC `revoke` and knowing the Proxy is being revoked after the DisposableStack disposes
}
</code></pre>
</blockquote></mx-reply>I mean, something like <code>new Proxy(target, handlers, { revocationStack: disposables })</code> might be feasible, but prefer this approach in general</td></tr>
  <tr class="msg" id="L124"><td class="ts-cell"><a class="ts" href="#L124" alt="Thu Dec 01 2022 02:53:51 GMT-0800 (Pacific Standard Time)">10:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-4">Jack Works</span>: according to the definition of liveness, clearing out the proxy target is not necessary, as the target's identity would be unobservable to the program through the proxy already</blockquote></mx-reply>the [[ProxyHandler]] might get access to [[ProxyTarget]] when the internal slot is called right</td></tr>
  <tr class="msg" id="L125"><td class="ts-cell"><a class="ts" href="#L125" alt="Thu Dec 01 2022 02:54:01 GMT-0800 (Pacific Standard Time)">10:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> so do we have a non-theoretical go-to use case of revocation then?</blockquote></mx-reply>membranes are not theoretical</td></tr>
  <tr class="msg" id="L126"><td class="ts-cell"><a class="ts" href="#L126" alt="Thu Dec 01 2022 02:55:06 GMT-0800 (Pacific Standard Time)">10:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> the [[ProxyHandler]] might get access to [[ProxyTarget]] when the internal slot is called right</blockquote></mx-reply>but if the proxy is revoked, the proxy handler would never be invoked with the target anymore</td></tr>
  <tr class="msg" id="L127"><td class="ts-cell"><a class="ts" href="#L127" alt="Thu Dec 01 2022 02:57:17 GMT-0800 (Pacific Standard Time)">10:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">An editor note might suffice to make it clear that once revoked, the proxy target's identity will no longer be observable by the program through the handler / proxy</td></tr>
  <tr class="msg" id="L128"><td class="ts-cell"><a class="ts" href="#L128" alt="Thu Dec 01 2022 02:57:47 GMT-0800 (Pacific Standard Time)">10:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell">Thanks <span class="nick-5">bterlson</span>!! üëè</td></tr>
  <tr class="msg" id="L129"><td class="ts-cell"><a class="ts" href="#L129" alt="Thu Dec 01 2022 02:59:01 GMT-0800 (Pacific Standard Time)">10:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">We will resume at 13:00 (62mins time)</td></tr>
  <tr class="msg" id="L130"><td class="ts-cell"><a class="ts" href="#L130" alt="Thu Dec 01 2022 02:59:14 GMT-0800 (Pacific Standard Time)">10:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">I <em>assume</em> that SalesForce' whole <a href="https://developer.salesforce.com/docs/component-library/documentation/en/lwc/lwc.security_locker_service">LightningLocker</a> stuff being based on Proxies, they are also using <em>revocation</em></td></tr>
  <tr class="msg" id="L131"><td class="ts-cell"><a class="ts" href="#L131" alt="Thu Dec 01 2022 02:59:35 GMT-0800 (Pacific Standard Time)">10:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">if anyone here is on the typescript team and needs something to do over lunch I have a small QoL PR <a href="https://github.com/microsoft/TypeScript/pull/51457">https://github.com/microsoft/TypeScript/pull/51457</a></td></tr>
  <tr class="msg" id="L132"><td class="ts-cell"><a class="ts" href="#L132" alt="Thu Dec 01 2022 03:00:00 GMT-0800 (Pacific Standard Time)">11:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">I'm realising now that I have a LOT of tests to write for iterator helpers in test262...</td></tr>
  <tr class="msg" id="L133"><td class="ts-cell"><a class="ts" href="#L133" alt="Thu Dec 01 2022 03:00:20 GMT-0800 (Pacific Standard Time)">11:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">btw, link to the thread asking for a TG3 chair that I mentioned: <a href="https://github.com/tc39/Reflector/issues/450">https://github.com/tc39/Reflector/issues/450</a></td></tr>
  <tr class="msg" id="L134"><td class="ts-cell"><a class="ts" href="#L134" alt="Thu Dec 01 2022 03:00:25 GMT-0800 (Pacific Standard Time)">11:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">yeah set methods will be fun too</td></tr>
  <tr class="msg" id="L135"><td class="ts-cell"><a class="ts" href="#L135" alt="Thu Dec 01 2022 03:01:17 GMT-0800 (Pacific Standard Time)">11:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">üôè hopefully a helpful community member will just do it before I get around to it</td></tr>
  <tr class="msg" id="L136"><td class="ts-cell"><a class="ts" href="#L136" alt="Thu Dec 01 2022 03:08:25 GMT-0800 (Pacific Standard Time)">11:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i'm going to sleep because i'm sick and exhausted, but for Resource Management, i still think <a href="https://github.com/tc39/proposal-explicit-resource-management/issues/102">https://github.com/tc39/proposal-explicit-resource-management/issues/102</a> is not resolved, and i think any stage 3 for it needs to be conditional on coming to consensus on that. i hope my absence won't mean my concerns are overlooked (assuming that it otherwise would get stage 3, ofc)</td></tr>
  <tr class="msg" id="L137"><td class="ts-cell"><a class="ts" href="#L137" alt="Thu Dec 01 2022 03:09:53 GMT-0800 (Pacific Standard Time)">11:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">ljharb</span>: is there a summary of your concern?</td></tr>
  <tr class="msg" id="L138"><td class="ts-cell"><a class="ts" href="#L138" alt="Thu Dec 01 2022 03:10:03 GMT-0800 (Pacific Standard Time)">11:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">or can ron characterize it accurately?</td></tr>
  <tr class="msg" id="L139"><td class="ts-cell"><a class="ts" href="#L139" alt="Thu Dec 01 2022 03:13:32 GMT-0800 (Pacific Standard Time)">11:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">IIRC, it's in regards to argument ordering of the <code>adopt</code> method, and thus it's existence entirely</td></tr>
  <tr class="msg" id="L140"><td class="ts-cell"><a class="ts" href="#L140" alt="Thu Dec 01 2022 03:15:30 GMT-0800 (Pacific Standard Time)">11:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I can add a note to the slides to call this out</td></tr>
  <tr class="msg" id="L141"><td class="ts-cell"><a class="ts" href="#L141" alt="Thu Dec 01 2022 03:17:08 GMT-0800 (Pacific Standard Time)">11:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">great, thanks</td></tr>
  <tr class="msg" id="L142"><td class="ts-cell"><a class="ts" href="#L142" alt="Thu Dec 01 2022 03:21:55 GMT-0800 (Pacific Standard Time)">11:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@alex.vincent:matrix.org">Alex Vincent</span>&gt;</div></td><td class="msg-cell">I missed a key point in my presentation:  when we revoke a proxy, the <em>underlying slots</em> are nullified, but the <em>proxy itself</em> remains part of the object graph it lives in.  You can't do anything with the proxy, but it's still there because (probably) something else refers to it.  The revocation of an object graph, and of proxies pointing to it, means the original objects in that object graph can be gc'd.  The proxies themselves are still reachable</td></tr>
  <tr class="msg" id="L143"><td class="ts-cell"><a class="ts" href="#L143" alt="Thu Dec 01 2022 03:57:06 GMT-0800 (Pacific Standard Time)">11:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@alex.vincent:matrix.org">Alex Vincent</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">ljharb</span>: <span class="nick-13">Rob Palmer</span> per the proposals index, I have transferred my GitHub repo to tc39-transfer.</td></tr>
  <tr class="msg" id="L144"><td class="ts-cell"><a class="ts" href="#L144" alt="Thu Dec 01 2022 04:03:58 GMT-0800 (Pacific Standard Time)">12:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">Markm is still having trouble joining</td></tr>
  <tr class="msg" id="L145"><td class="ts-cell"><a class="ts" href="#L145" alt="Thu Dec 01 2022 04:04:22 GMT-0800 (Pacific Standard Time)">12:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">tell him to try again</td></tr>
  <tr class="msg" id="L146"><td class="ts-cell"><a class="ts" href="#L146" alt="Thu Dec 01 2022 04:04:32 GMT-0800 (Pacific Standard Time)">12:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">I think I have admin rights to let people in now</td></tr>
  <tr class="msg" id="L147"><td class="ts-cell"><a class="ts" href="#L147" alt="Thu Dec 01 2022 04:04:50 GMT-0800 (Pacific Standard Time)">12:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">He did</td></tr>
  <tr class="msg" id="L148"><td class="ts-cell"><a class="ts" href="#L148" alt="Thu Dec 01 2022 04:05:37 GMT-0800 (Pacific Standard Time)">12:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">Thanks!</td></tr>
  <tr class="msg" id="L149"><td class="ts-cell"><a class="ts" href="#L149" alt="Thu Dec 01 2022 04:06:29 GMT-0800 (Pacific Standard Time)">12:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">It wasn't me - I suspect Yulia has done it</td></tr>
  <tr class="msg" id="L150"><td class="ts-cell"><a class="ts" href="#L150" alt="Thu Dec 01 2022 04:06:36 GMT-0800 (Pacific Standard Time)">12:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">nope -- it was ujjwal</td></tr>
  <tr class="msg" id="L151"><td class="ts-cell"><a class="ts" href="#L151" alt="Thu Dec 01 2022 04:06:38 GMT-0800 (Pacific Standard Time)">12:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">i don't have rights either</td></tr>
  <tr class="msg" id="L152"><td class="ts-cell"><a class="ts" href="#L152" alt="Thu Dec 01 2022 04:06:58 GMT-0800 (Pacific Standard Time)">12:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">from the shadows</td></tr>
  <tr class="msg" id="L153"><td class="ts-cell"><a class="ts" href="#L153" alt="Thu Dec 01 2022 04:07:43 GMT-0800 (Pacific Standard Time)">12:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">Permissions fixed</td></tr>
  <tr class="msg" id="L154"><td class="ts-cell"><a class="ts" href="#L154" alt="Thu Dec 01 2022 04:08:09 GMT-0800 (Pacific Standard Time)">12:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I missed a key point in my presentation:  when we revoke a proxy, the <em>underlying slots</em> are nullified, but the <em>proxy itself</em> remains part of the object graph it lives in.  You can't do anything with the proxy, but it's still there because (probably) something else refers to it.  The revocation of an object graph, and of proxies pointing to it, means the original objects in that object graph can be gc'd.  The proxies themselves are still reachable</blockquote></mx-reply>As I mentioned above, explicitly emptying the slots is not actually necessary to make the targets eligible for collection once the proxy is revoked</td></tr>
  <tr class="msg" id="L155"><td class="ts-cell"><a class="ts" href="#L155" alt="Thu Dec 01 2022 04:21:01 GMT-0800 (Pacific Standard Time)">12:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">dumb question about this -- this would still be usable with streams in spite of the lack of async or no?</td></tr>
  <tr class="msg" id="L156"><td class="ts-cell"><a class="ts" href="#L156" alt="Thu Dec 01 2022 04:22:17 GMT-0800 (Pacific Standard Time)">12:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">yulia</span>: basically no</td></tr>
  <tr class="msg" id="L157"><td class="ts-cell"><a class="ts" href="#L157" alt="Thu Dec 01 2022 04:22:41 GMT-0800 (Pacific Standard Time)">12:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">if the dispose method is async you need the async syntax, which is not in this version of the proposal</td></tr>
  <tr class="msg" id="L158"><td class="ts-cell"><a class="ts" href="#L158" alt="Thu Dec 01 2022 04:22:45 GMT-0800 (Pacific Standard Time)">12:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">what are current use cases that would be directly impacted here? </td></tr>
  <tr class="msg" id="L159"><td class="ts-cell"><a class="ts" href="#L159" alt="Thu Dec 01 2022 04:22:48 GMT-0800 (Pacific Standard Time)">12:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">and stream.cancel is async</td></tr>
  <tr class="msg" id="L160"><td class="ts-cell"><a class="ts" href="#L160" alt="Thu Dec 01 2022 04:24:00 GMT-0800 (Pacific Standard Time)">12:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/tc39/proposal-explicit-resource-management/#relation-to-dom-apis">https://github.com/tc39/proposal-explicit-resource-management/#relation-to-dom-apis</a> has a list</td></tr>
  <tr class="msg" id="L161"><td class="ts-cell"><a class="ts" href="#L161" alt="Thu Dec 01 2022 04:24:00 GMT-0800 (Pacific Standard Time)">12:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">I'm aware of the the atomic locking/unlocking behavior, but i think this is also in support of the shared structs proposal?</td></tr>
  <tr class="msg" id="L162"><td class="ts-cell"><a class="ts" href="#L162" alt="Thu Dec 01 2022 04:24:12 GMT-0800 (Pacific Standard Time)">12:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">about half of which is sync stuff</td></tr>
  <tr class="msg" id="L163"><td class="ts-cell"><a class="ts" href="#L163" alt="Thu Dec 01 2022 04:24:20 GMT-0800 (Pacific Standard Time)">12:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">ah great thanks</td></tr>
  <tr class="msg" id="L164"><td class="ts-cell"><a class="ts" href="#L164" alt="Thu Dec 01 2022 04:24:39 GMT-0800 (Pacific Standard Time)">12:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">also I really like <a href="https://github.com/whatwg/html/issues/8557#issuecomment-1331448189">https://github.com/whatwg/html/issues/8557#issuecomment-1331448189</a></td></tr>
  <tr class="msg" id="L165"><td class="ts-cell"><a class="ts" href="#L165" alt="Thu Dec 01 2022 04:25:17 GMT-0800 (Pacific Standard Time)">12:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">thanks, that is useful</td></tr>
  <tr class="msg" id="L166"><td class="ts-cell"><a class="ts" href="#L166" alt="Thu Dec 01 2022 04:32:14 GMT-0800 (Pacific Standard Time)">12:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> also I really like <a href="https://github.com/whatwg/html/issues/8557#issuecomment-1331448189">https://github.com/whatwg/html/issues/8557#issuecomment-1331448189</a></blockquote></mx-reply><p>adding in do-expressions to this would be nice, for ensuring the cancelation happens asap.</p>
<pre><code>const pages = do {
  using controller = new AbortController.AutoAbort();
  await Promise.all(urls.map(url =&gt; fetch(url, { signal: controller.signal }));
};
... // more logic and awaits follow
</code></pre>
</td></tr>
  <tr class="msg" id="L167"><td class="ts-cell"><a class="ts" href="#L167" alt="Thu Dec 01 2022 04:32:42 GMT-0800 (Pacific Standard Time)">12:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">Ashley Claymore</span>: that doesn't actually end up making any difference</td></tr>
  <tr class="msg" id="L168"><td class="ts-cell"><a class="ts" href="#L168" alt="Thu Dec 01 2022 04:33:00 GMT-0800 (Pacific Standard Time)">12:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">ah yes, Im thinking of Promise.race</td></tr>
  <tr class="msg" id="L169"><td class="ts-cell"><a class="ts" href="#L169" alt="Thu Dec 01 2022 04:33:06 GMT-0800 (Pacific Standard Time)">12:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">where it would</td></tr>
  <tr class="msg" id="L170"><td class="ts-cell"><a class="ts" href="#L170" alt="Thu Dec 01 2022 04:33:50 GMT-0800 (Pacific Standard Time)">12:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">ah, yeah</td></tr>
  <tr class="msg" id="L171"><td class="ts-cell"><a class="ts" href="#L171" alt="Thu Dec 01 2022 04:47:53 GMT-0800 (Pacific Standard Time)">12:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">Rob Palmer</span>: is VERY quiet</td></tr>
  <tr class="msg" id="L172"><td class="ts-cell"><a class="ts" href="#L172" alt="Thu Dec 01 2022 04:57:43 GMT-0800 (Pacific Standard Time)">12:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I should say also that I do not at all agree with markm's opinion that <code>{ using async x = y }</code> causing an <code>await</code> at block exit is a problem</td></tr>
  <tr class="msg" id="L173"><td class="ts-cell"><a class="ts" href="#L173" alt="Thu Dec 01 2022 04:57:51 GMT-0800 (Pacific Standard Time)">12:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I would much prefer to just use that syntax</td></tr>
  <tr class="msg" id="L174"><td class="ts-cell"><a class="ts" href="#L174" alt="Thu Dec 01 2022 04:59:11 GMT-0800 (Pacific Standard Time)">12:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">it's not like it's super nested - the <code>using</code> statement is necessarily at the same level as the block where the <code>await</code> will happen; even if it's in the middle of the block, being at the top level of the block means it is inherently not that obscure</td></tr>
  <tr class="msg" id="L175"><td class="ts-cell"><a class="ts" href="#L175" alt="Thu Dec 01 2022 05:00:59 GMT-0800 (Pacific Standard Time)">13:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@kriskowal:matrix.org">Kris Kowal</span>&gt;</div></td><td class="msg-cell">I tend to agree. Maybe I can help convince markm.</td></tr>
  <tr class="msg" id="L176"><td class="ts-cell"><a class="ts" href="#L176" alt="Thu Dec 01 2022 05:02:37 GMT-0800 (Pacific Standard Time)">13:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">+1 the partial class initialization thing is a pretty good motivation imo</td></tr>
  <tr class="msg" id="L177"><td class="ts-cell"><a class="ts" href="#L177" alt="Thu Dec 01 2022 05:08:48 GMT-0800 (Pacific Standard Time)">13:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: in that short example maybe, but 1) currently all interleaving points within an async function are marked with <code>await</code>, and 2) with a block populated with other statements, the <code>using async</code> would not be as visible</td></tr>
  <tr class="msg" id="L178"><td class="ts-cell"><a class="ts" href="#L178" alt="Thu Dec 01 2022 05:10:32 GMT-0800 (Pacific Standard Time)">13:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I really don't think it would be hard to see the <code>using async</code>, and I consider it to be a sufficient marker of the interleaving point</td></tr>
  <tr class="msg" id="L179"><td class="ts-cell"><a class="ts" href="#L179" alt="Thu Dec 01 2022 05:10:48 GMT-0800 (Pacific Standard Time)">13:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">we have found nested async interleaving to be a footgun today, and we're considering any further unclear interleaving as very undesirable</td></tr>
  <tr class="msg" id="L180"><td class="ts-cell"><a class="ts" href="#L180" alt="Thu Dec 01 2022 05:11:19 GMT-0800 (Pacific Standard Time)">13:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I consider making <code>using async</code> harder to use very undesirable</td></tr>
  <tr class="msg" id="L181"><td class="ts-cell"><a class="ts" href="#L181" alt="Thu Dec 01 2022 05:11:24 GMT-0800 (Pacific Standard Time)">13:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell"><code>async</code> is not a marker of interleaving. <code>await</code> is</td></tr>
  <tr class="msg" id="L182"><td class="ts-cell"><a class="ts" href="#L182" alt="Thu Dec 01 2022 05:11:26 GMT-0800 (Pacific Standard Time)">13:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">wait i don't understand why "async" isn't a clear indication of an interleaving point?</td></tr>
  <tr class="msg" id="L183"><td class="ts-cell"><a class="ts" href="#L183" alt="Thu Dec 01 2022 05:12:11 GMT-0800 (Pacific Standard Time)">13:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">well it's a marker that the thing contains interleaving points?</td></tr>
  <tr class="msg" id="L184"><td class="ts-cell"><a class="ts" href="#L184" alt="Thu Dec 01 2022 05:12:13 GMT-0800 (Pacific Standard Time)">13:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">async is a declaration that the thing has asynchronous behavior (returns a promise)</td></tr>
  <tr class="msg" id="L185"><td class="ts-cell"><a class="ts" href="#L185" alt="Thu Dec 01 2022 05:12:22 GMT-0800 (Pacific Standard Time)">13:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">yes, you're declaring a thing that can contain interleaving points</td></tr>
  <tr class="msg" id="L186"><td class="ts-cell"><a class="ts" href="#L186" alt="Thu Dec 01 2022 05:12:40 GMT-0800 (Pacific Standard Time)">13:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sffc:mozilla.org">sffc</span>&gt;</div></td><td class="msg-cell">Congratulations <span class="nick-15">rbuckton</span> on Stage 3! I'm looking forward to <em>using</em> the proposal in the wild üòÄ</td></tr>
  <tr class="msg" id="L187"><td class="ts-cell"><a class="ts" href="#L187" alt="Thu Dec 01 2022 05:12:45 GMT-0800 (Pacific Standard Time)">13:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">no you're declaring it returns a promise</td></tr>
  <tr class="msg" id="L188"><td class="ts-cell"><a class="ts" href="#L188" alt="Thu Dec 01 2022 05:12:51 GMT-0800 (Pacific Standard Time)">13:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">await is the interleaving</td></tr>
  <tr class="msg" id="L189"><td class="ts-cell"><a class="ts" href="#L189" alt="Thu Dec 01 2022 05:13:02 GMT-0800 (Pacific Standard Time)">13:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@eemeli:mozilla.org">eemeli</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">rbuckton</span>: I would still appreciate seeing what your PluginHost example would look like if DisposableStack was not available.</td></tr>
  <tr class="msg" id="L190"><td class="ts-cell"><a class="ts" href="#L190" alt="Thu Dec 01 2022 05:13:25 GMT-0800 (Pacific Standard Time)">13:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@caridy:matrix.org">caridy</span>&gt;</div></td><td class="msg-cell">trying to join the call! can someone let me in?</td></tr>
  <tr class="msg" id="L191"><td class="ts-cell"><a class="ts" href="#L191" alt="Thu Dec 01 2022 05:13:48 GMT-0800 (Pacific Standard Time)">13:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">Mathieu Hofman</span>: I just don't think the "it has to be exactly the <code>await</code> keyword, and not the <code>async</code> keyword" is a rule which is important</td></tr>
  <tr class="msg" id="L192"><td class="ts-cell"><a class="ts" href="#L192" alt="Thu Dec 01 2022 05:13:54 GMT-0800 (Pacific Standard Time)">13:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">who is that rule for?</td></tr>
  <tr class="msg" id="L193"><td class="ts-cell"><a class="ts" href="#L193" alt="Thu Dec 01 2022 05:14:31 GMT-0800 (Pacific Standard Time)">13:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">for people reading / auditing a piece of code</td></tr>
  <tr class="msg" id="L194"><td class="ts-cell"><a class="ts" href="#L194" alt="Thu Dec 01 2022 05:14:36 GMT-0800 (Pacific Standard Time)">13:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">right but like</td></tr>
  <tr class="msg" id="L195"><td class="ts-cell"><a class="ts" href="#L195" alt="Thu Dec 01 2022 05:14:41 GMT-0800 (Pacific Standard Time)">13:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">why is <code>async</code> not sufficient for those people</td></tr>
  <tr class="msg" id="L196"><td class="ts-cell"><a class="ts" href="#L196" alt="Thu Dec 01 2022 05:14:50 GMT-0800 (Pacific Standard Time)">13:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">more specifically why is <code>using async</code> insufficient</td></tr>
  <tr class="msg" id="L197"><td class="ts-cell"><a class="ts" href="#L197" alt="Thu Dec 01 2022 05:14:52 GMT-0800 (Pacific Standard Time)">13:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">because that's what async means today?</td></tr>
  <tr class="msg" id="L198"><td class="ts-cell"><a class="ts" href="#L198" alt="Thu Dec 01 2022 05:14:55 GMT-0800 (Pacific Standard Time)">13:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">treat it as a lexeme</td></tr>
  <tr class="msg" id="L199"><td class="ts-cell"><a class="ts" href="#L199" alt="Thu Dec 01 2022 05:14:59 GMT-0800 (Pacific Standard Time)">13:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">people are smart and adaptable</td></tr>
  <tr class="msg" id="L200"><td class="ts-cell"><a class="ts" href="#L200" alt="Thu Dec 01 2022 05:15:00 GMT-0800 (Pacific Standard Time)">13:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> wait i don't understand why "async" isn't a clear indication of an interleaving point?</blockquote></mx-reply>It's something <span class="nick-13">erights</span> wants to make very clear in the language, that <code>await</code> and <code>yield</code> are the <em>only</em> way to indicate interleaving points. <code>async</code> does not, since you must <code>await</code> the result of the async function to observe the result.</td></tr>
  <tr class="msg" id="L201"><td class="ts-cell"><a class="ts" href="#L201" alt="Thu Dec 01 2022 05:15:11 GMT-0800 (Pacific Standard Time)">13:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">yeah, what shu said</td></tr>
  <tr class="msg" id="L202"><td class="ts-cell"><a class="ts" href="#L202" alt="Thu Dec 01 2022 05:15:17 GMT-0800 (Pacific Standard Time)">13:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">right and I'm disagreeing with <span class="nick-13">erights</span></td></tr>
  <tr class="msg" id="L203"><td class="ts-cell"><a class="ts" href="#L203" alt="Thu Dec 01 2022 05:15:30 GMT-0800 (Pacific Standard Time)">13:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> people are smart and adaptable</blockquote></mx-reply>you put more trust in people than I do</td></tr>
  <tr class="msg" id="L204"><td class="ts-cell"><a class="ts" href="#L204" alt="Thu Dec 01 2022 05:15:30 GMT-0800 (Pacific Standard Time)">13:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I think <code>using async</code> being a new way to indicate an interleaving point is not a problem</td></tr>
  <tr class="msg" id="L205"><td class="ts-cell"><a class="ts" href="#L205" alt="Thu Dec 01 2022 05:15:31 GMT-0800 (Pacific Standard Time)">13:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">it's fine</td></tr>
  <tr class="msg" id="L206"><td class="ts-cell"><a class="ts" href="#L206" alt="Thu Dec 01 2022 05:15:35 GMT-0800 (Pacific Standard Time)">13:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">like this strikes me as "we must ship my mental model or we ship nothing", which doesn't seem great?</td></tr>
  <tr class="msg" id="L207"><td class="ts-cell"><a class="ts" href="#L207" alt="Thu Dec 01 2022 05:15:53 GMT-0800 (Pacific Standard Time)">13:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@caridy:matrix.org">caridy</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">Rob Palmer</span>: can you help? trying to join the call.</td></tr>
  <tr class="msg" id="L208"><td class="ts-cell"><a class="ts" href="#L208" alt="Thu Dec 01 2022 05:16:10 GMT-0800 (Pacific Standard Time)">13:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">I don't see why we're so willing to throw away the consistency of the language we have today</td></tr>
  <tr class="msg" id="L209"><td class="ts-cell"><a class="ts" href="#L209" alt="Thu Dec 01 2022 05:16:30 GMT-0800 (Pacific Standard Time)">13:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@caridy:matrix.org">caridy</span>&gt;</div></td><td class="msg-cell">thanks</td></tr>
  <tr class="msg" id="L210"><td class="ts-cell"><a class="ts" href="#L210" alt="Thu Dec 01 2022 05:16:31 GMT-0800 (Pacific Standard Time)">13:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">done</td></tr>
  <tr class="msg" id="L211"><td class="ts-cell"><a class="ts" href="#L211" alt="Thu Dec 01 2022 05:16:42 GMT-0800 (Pacific Standard Time)">13:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">because it's not an important consistency, especially when weighed against the cost of only being able to put <code>using async</code> inside <code>if</code> statements</td></tr>
  <tr class="msg" id="L212"><td class="ts-cell"><a class="ts" href="#L212" alt="Thu Dec 01 2022 05:16:49 GMT-0800 (Pacific Standard Time)">13:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">the second thing is much, much more important</td></tr>
  <tr class="msg" id="L213"><td class="ts-cell"><a class="ts" href="#L213" alt="Thu Dec 01 2022 05:17:03 GMT-0800 (Pacific Standard Time)">13:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> right and I'm disagreeing with <span class="nick-13">erights</span></blockquote></mx-reply><p>The relevant discussion can be found in <a href="https://github.com/tc39/proposal-explicit-resource-management/issues/101">https://github.com/tc39/proposal-explicit-resource-management/issues/101</a>. This argument has been explicitly called out here:</p>
<ul>
<li><a href="https://github.com/tc39/proposal-explicit-resource-management/issues/101#issuecomment-1320609180">https://github.com/tc39/proposal-explicit-resource-management/issues/101#issuecomment-1320609180</a></li>
<li><a href="https://github.com/tc39/proposal-explicit-resource-management/issues/101#issuecomment-1320789790">https://github.com/tc39/proposal-explicit-resource-management/issues/101#issuecomment-1320789790</a></li>
</ul>
</td></tr>
  <tr class="msg" id="L214"><td class="ts-cell"><a class="ts" href="#L214" alt="Thu Dec 01 2022 05:17:31 GMT-0800 (Pacific Standard Time)">13:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">in general there are many surface consistency things we ought to trade off against other things</td></tr>
  <tr class="msg" id="L215"><td class="ts-cell"><a class="ts" href="#L215" alt="Thu Dec 01 2022 05:17:40 GMT-0800 (Pacific Standard Time)">13:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">argument order and coercion order and so forth is often another one</td></tr>
  <tr class="msg" id="L216"><td class="ts-cell"><a class="ts" href="#L216" alt="Thu Dec 01 2022 05:17:41 GMT-0800 (Pacific Standard Time)">13:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">we consider <code>await</code> in conditional statements to be a footgun, so that doesn't have much weight in our opinion</td></tr>
  <tr class="msg" id="L217"><td class="ts-cell"><a class="ts" href="#L217" alt="Thu Dec 01 2022 05:17:46 GMT-0800 (Pacific Standard Time)">13:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">well</td></tr>
  <tr class="msg" id="L218"><td class="ts-cell"><a class="ts" href="#L218" alt="Thu Dec 01 2022 05:17:50 GMT-0800 (Pacific Standard Time)">13:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">that's...</td></tr>
  <tr class="msg" id="L219"><td class="ts-cell"><a class="ts" href="#L219" alt="Thu Dec 01 2022 05:17:52 GMT-0800 (Pacific Standard Time)">13:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">uh.</td></tr>
  <tr class="msg" id="L220"><td class="ts-cell"><a class="ts" href="#L220" alt="Thu Dec 01 2022 05:17:57 GMT-0800 (Pacific Standard Time)">13:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">not an opinion I agree with.</td></tr>
  <tr class="msg" id="L221"><td class="ts-cell"><a class="ts" href="#L221" alt="Thu Dec 01 2022 05:18:23 GMT-0800 (Pacific Standard Time)">13:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">well my response to that is, sorry you don't get to ship an implicit linter in the language</td></tr>
  <tr class="msg" id="L222"><td class="ts-cell"><a class="ts" href="#L222" alt="Thu Dec 01 2022 05:18:24 GMT-0800 (Pacific Standard Time)">13:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">you are welcome to not put <code>await</code> in conditional statements but I really do not approve of you designing the language to stop me from doing it</td></tr>
  <tr class="msg" id="L223"><td class="ts-cell"><a class="ts" href="#L223" alt="Thu Dec 01 2022 05:18:28 GMT-0800 (Pacific Standard Time)">13:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">yes</td></tr>
  <tr class="msg" id="L224"><td class="ts-cell"><a class="ts" href="#L224" alt="Thu Dec 01 2022 05:18:45 GMT-0800 (Pacific Standard Time)">13:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I don't understand that position either. <code>await</code> in a conditional doesn't "release zalgo", so such a constraint seems confusing.</td></tr>
  <tr class="msg" id="L225"><td class="ts-cell"><a class="ts" href="#L225" alt="Thu Dec 01 2022 05:18:46 GMT-0800 (Pacific Standard Time)">13:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">right, I think we fundamentally disagree with the ability to reason about interleaving points. I don't see why an explicit block marker is so onerous</td></tr>
  <tr class="msg" id="L226"><td class="ts-cell"><a class="ts" href="#L226" alt="Thu Dec 01 2022 05:19:43 GMT-0800 (Pacific Standard Time)">13:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I don't understand that position either. <code>await</code> in a conditional doesn't "release zalgo", so such a constraint seems confusing.</blockquote></mx-reply>it actually does because of the current unsafety of <code>PromiseResolve</code></td></tr>
  <tr class="msg" id="L227"><td class="ts-cell"><a class="ts" href="#L227" alt="Thu Dec 01 2022 05:19:46 GMT-0800 (Pacific Standard Time)">13:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> well my response to that is, sorry you don't get to ship an implicit linter in the language</blockquote></mx-reply><code>??</code> would like to disagree with you. I was not in favor of requiring parens to disambiguate with <code>||</code> and <code>&amp;&amp;</code> given clear precedence rules, but here we are.</td></tr>
  <tr class="msg" id="L228"><td class="ts-cell"><a class="ts" href="#L228" alt="Thu Dec 01 2022 05:20:38 GMT-0800 (Pacific Standard Time)">13:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">No, "releasing zalgo" is writing an API such that <em>consumers</em> cannot safely reason over whether that API will execute synchronously or asynchronously.</td></tr>
  <tr class="msg" id="L229"><td class="ts-cell"><a class="ts" href="#L229" alt="Thu Dec 01 2022 05:21:39 GMT-0800 (Pacific Standard Time)">13:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">If the function is async, it will always <em>complete</em> in a later turn, but will start executing in <em>this turn</em>.</td></tr>
  <tr class="msg" id="L230"><td class="ts-cell"><a class="ts" href="#L230" alt="Thu Dec 01 2022 05:21:43 GMT-0800 (Pacific Standard Time)">13:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">Mathieu Hofman</span> I think that most people have not found <code>await</code> in conditional statements to actually be a problem. so I think if you are reasoning about your code in a way where it is a problem, the appropriate way for you to enforce that is by writing your own linting rules, which forbid <em>both</em> <code>await</code> in conditional statements <em>and</em> <code>using async</code> in blocks, and let the rest of us have both of those things</td></tr>
  <tr class="msg" id="L231"><td class="ts-cell"><a class="ts" href="#L231" alt="Thu Dec 01 2022 05:23:06 GMT-0800 (Pacific Standard Time)">13:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">anyway, I think we deviated a little, and the conditional thing is not that relevant to this discussion. <code>async using</code> is a declaration that the value has an async behavior. It does nothing to indicate that there will later, at the end of the current scope, be an interleaving point, which are today all marked with an explicit <code>await</code> keyword</td></tr>
  <tr class="msg" id="L232"><td class="ts-cell"><a class="ts" href="#L232" alt="Thu Dec 01 2022 05:23:25 GMT-0800 (Pacific Standard Time)">13:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">it's a new piece of syntax, and you have to learn what it means</td></tr>
  <tr class="msg" id="L233"><td class="ts-cell"><a class="ts" href="#L233" alt="Thu Dec 01 2022 05:23:30 GMT-0800 (Pacific Standard Time)">13:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-2">Mathieu Hofman</span> I think that most people have not found <code>await</code> in conditional statements to actually be a problem. so I think if you are reasoning about your code in a way where it is a problem, the appropriate way for you to enforce that is by writing your own linting rules, which forbid <em>both</em> <code>await</code> in conditional statements <em>and</em> <code>using async</code> in blocks, and let the rest of us have both of those things</blockquote></mx-reply>we have</td></tr>
  <tr class="msg" id="L234"><td class="ts-cell"><a class="ts" href="#L234" alt="Thu Dec 01 2022 05:23:30 GMT-0800 (Pacific Standard Time)">13:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I really don't think it's that hard to learn</td></tr>
  <tr class="msg" id="L235"><td class="ts-cell"><a class="ts" href="#L235" alt="Thu Dec 01 2022 05:24:25 GMT-0800 (Pacific Standard Time)">13:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">Mathieu Hofman</span>: I accept that you have, but stand by my statement, and my position that the appropriate resolution for you is to have lint rules which enforce the stronger invariants that you apparently need; most people, in my experience, do not need them, so we should not bake them into the language.</td></tr>
  <tr class="msg" id="L236"><td class="ts-cell"><a class="ts" href="#L236" alt="Thu Dec 01 2022 05:26:09 GMT-0800 (Pacific Standard Time)">13:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">again I'm simply asking for the language to stay consistent with itself and mark interleaving points at the location of interleaving</td></tr>
  <tr class="msg" id="L237"><td class="ts-cell"><a class="ts" href="#L237" alt="Thu Dec 01 2022 05:26:31 GMT-0800 (Pacific Standard Time)">13:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">and I'm saying I don't think that consistency is worth the cost of making <code>using async</code> harder to use.</td></tr>
  <tr class="msg" id="L238"><td class="ts-cell"><a class="ts" href="#L238" alt="Thu Dec 01 2022 05:26:48 GMT-0800 (Pacific Standard Time)">13:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">given that it is, in my opinion, really not that hard to learn what <code>using async</code> does.</td></tr>
  <tr class="msg" id="L239"><td class="ts-cell"><a class="ts" href="#L239" alt="Thu Dec 01 2022 05:27:09 GMT-0800 (Pacific Standard Time)">13:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">what's insane to me is that adding a <code>async using</code> statement to a plain block introduces an interleaving point at a distance</td></tr>
  <tr class="msg" id="L240"><td class="ts-cell"><a class="ts" href="#L240" alt="Thu Dec 01 2022 05:27:15 GMT-0800 (Pacific Standard Time)">13:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-2">Mathieu Hofman</span>: I accept that you have, but stand by my statement, and my position that the appropriate resolution for you is to have lint rules which enforce the stronger invariants that you apparently need; most people, in my experience, do not need them, so we should not bake them into the language.</blockquote></mx-reply>My first response years ago to <span class="nick-13">erights</span> 's concern about explicit <code>await</code> was to use linter to require something like <code>// await using</code> at the end of a block, but that didn't seem to be sufficient at the time.</td></tr>
  <tr class="msg" id="L241"><td class="ts-cell"><a class="ts" href="#L241" alt="Thu Dec 01 2022 05:27:26 GMT-0800 (Pacific Standard Time)">13:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">it's a refactor hazard</td></tr>
  <tr class="msg" id="L242"><td class="ts-cell"><a class="ts" href="#L242" alt="Thu Dec 01 2022 05:27:45 GMT-0800 (Pacific Standard Time)">13:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">it does not seem like any more of a refactoring hazard than the sync call to <code>Symbol.dispose()</code> is</td></tr>
  <tr class="msg" id="L243"><td class="ts-cell"><a class="ts" href="#L243" alt="Thu Dec 01 2022 05:27:50 GMT-0800 (Pacific Standard Time)">13:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">or at least not very much more</td></tr>
  <tr class="msg" id="L244"><td class="ts-cell"><a class="ts" href="#L244" alt="Thu Dec 01 2022 05:28:05 GMT-0800 (Pacific Standard Time)">13:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">let's take a step back, what is the thing that you are doing that makes you care so much about interleave points?</td></tr>
  <tr class="msg" id="L245"><td class="ts-cell"><a class="ts" href="#L245" alt="Thu Dec 01 2022 05:29:36 GMT-0800 (Pacific Standard Time)">13:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">being able to reason when your synchronous execution has been interrupted, and thus your state may have gotten mutated.</td></tr>
  <tr class="msg" id="L246"><td class="ts-cell"><a class="ts" href="#L246" alt="Thu Dec 01 2022 05:30:00 GMT-0800 (Pacific Standard Time)">13:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">why is that not a concern with sync dispose</td></tr>
  <tr class="msg" id="L247"><td class="ts-cell"><a class="ts" href="#L247" alt="Thu Dec 01 2022 05:30:38 GMT-0800 (Pacific Standard Time)">13:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Any time you run code you run the risk of side effects. <code>+value</code> can have side effects. An implicit <code>await</code> would have side effects, but that's far easier to run into than a side-effecty <code>+value</code> or the like.<br>If you're writing code where an implicit async interleaving point could be a problem (i.e., potential state mutations in closed-over code), you have the same problem with any <code>await</code> and would likely need to use some type of async coordination primitive to synchronize access.</td></tr>
  <tr class="msg" id="L248"><td class="ts-cell"><a class="ts" href="#L248" alt="Thu Dec 01 2022 05:31:09 GMT-0800 (Pacific Standard Time)">13:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">like i agree this is a problem, which is why i added "can call user code", but that's not specific to async</td></tr>
  <tr class="msg" id="L249"><td class="ts-cell"><a class="ts" href="#L249" alt="Thu Dec 01 2022 05:31:21 GMT-0800 (Pacific Standard Time)">13:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">One point in the favor of the explicit marker is that its harder to recognize you might need to coordinate access if the interleave point is implicit.</td></tr>
  <tr class="msg" id="L250"><td class="ts-cell"><a class="ts" href="#L250" alt="Thu Dec 01 2022 05:31:25 GMT-0800 (Pacific Standard Time)">13:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">because you control the resource and what it does. You do not control what other promise jobs may have done if suspended</td></tr>
  <tr class="msg" id="L251"><td class="ts-cell"><a class="ts" href="#L251" alt="Thu Dec 01 2022 05:31:44 GMT-0800 (Pacific Standard Time)">13:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">"you control the resource" is in practice, not true</td></tr>
  <tr class="msg" id="L252"><td class="ts-cell"><a class="ts" href="#L252" alt="Thu Dec 01 2022 05:32:43 GMT-0800 (Pacific Standard Time)">13:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">some thought for the current problem:</td></tr>
  <tr class="msg" id="L253"><td class="ts-cell"><a class="ts" href="#L253" alt="Thu Dec 01 2022 05:32:48 GMT-0800 (Pacific Standard Time)">13:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I attempted to make the point that a declaration like <code>async using x = ...</code> would be sufficient to indicate such coordination might be necessary.</td></tr>
  <tr class="msg" id="L254"><td class="ts-cell"><a class="ts" href="#L254" alt="Thu Dec 01 2022 05:32:59 GMT-0800 (Pacific Standard Time)">13:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><code>worker.addModule(module {}, import.meta.url)</code></td></tr>
  <tr class="msg" id="L255"><td class="ts-cell"><a class="ts" href="#L255" alt="Thu Dec 01 2022 05:33:28 GMT-0800 (Pacific Standard Time)">13:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">if your model allows you to trust all the objects you invoke synchronously, you don't have to worry about synchronous re-entrancy</td></tr>
  <tr class="msg" id="L256"><td class="ts-cell"><a class="ts" href="#L256" alt="Thu Dec 01 2022 05:35:07 GMT-0800 (Pacific Standard Time)">13:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I think the subset of programs in which people are sufficiently careful that they are able to make and maintain an accurate model which allows them to trust all the objects they invoke synchronously, but where the code is being read so quickly that <code>using async</code> does not suffice as a marker of an interleaving point, is quite small</td></tr>
  <tr class="msg" id="L257"><td class="ts-cell"><a class="ts" href="#L257" alt="Thu Dec 01 2022 05:35:25 GMT-0800 (Pacific Standard Time)">13:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i daresay that subset of programs is exceedingly small</td></tr>
  <tr class="msg" id="L258"><td class="ts-cell"><a class="ts" href="#L258" alt="Thu Dec 01 2022 05:36:15 GMT-0800 (Pacific Standard Time)">13:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">Mathieu Hofman</span>: ISTM your position is predicated on a very opinionated environment that does not generalize, and thus should not be baked into the language</td></tr>
  <tr class="msg" id="L259"><td class="ts-cell"><a class="ts" href="#L259" alt="Thu Dec 01 2022 05:40:48 GMT-0800 (Pacific Standard Time)">13:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@bradfordcsmith:matrix.org">Bradford Smith</span>&gt;</div></td><td class="msg-cell">Could someone let me back into the meeting? (My internet cut out, so I got dropped.)</td></tr>
  <tr class="msg" id="L260"><td class="ts-cell"><a class="ts" href="#L260" alt="Thu Dec 01 2022 05:41:54 GMT-0800 (Pacific Standard Time)">13:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@bradfordcsmith:matrix.org">Bradford Smith</span>&gt;</div></td><td class="msg-cell">thx</td></tr>
  <tr class="msg" id="L261"><td class="ts-cell"><a class="ts" href="#L261" alt="Thu Dec 01 2022 05:45:13 GMT-0800 (Pacific Standard Time)">13:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">a heads up:  we are overrunning in this session.  therefore it is possible the meeting may end 15 minutes late in order to give shadow realms the full 60mins</td></tr>
  <tr class="msg" id="L262"><td class="ts-cell"><a class="ts" href="#L262" alt="Thu Dec 01 2022 05:46:51 GMT-0800 (Pacific Standard Time)">13:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <code>??</code> would like to disagree with you. I was not in favor of requiring parens to disambiguate with <code>||</code> and <code>&amp;&amp;</code> given clear precedence rules, but here we are.</blockquote></mx-reply>(btw ~3 years in since stage 4 and it turns out nobody cares)</td></tr>
  <tr class="msg" id="L263"><td class="ts-cell"><a class="ts" href="#L263" alt="Thu Dec 01 2022 05:47:34 GMT-0800 (Pacific Standard Time)">13:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">hm that's a good data point</td></tr>
  <tr class="msg" id="L264"><td class="ts-cell"><a class="ts" href="#L264" alt="Thu Dec 01 2022 05:48:06 GMT-0800 (Pacific Standard Time)">13:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I get frustrated by it every now and then.</td></tr>
  <tr class="msg" id="L265"><td class="ts-cell"><a class="ts" href="#L265" alt="Thu Dec 01 2022 05:48:18 GMT-0800 (Pacific Standard Time)">13:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">So the number is non-zero, even if close to zero.</td></tr>
  <tr class="msg" id="L266"><td class="ts-cell"><a class="ts" href="#L266" alt="Thu Dec 01 2022 05:51:39 GMT-0800 (Pacific Standard Time)">13:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">Let it be known that Ron runs into it :D</td></tr>
  <tr class="msg" id="L267"><td class="ts-cell"><a class="ts" href="#L267" alt="Thu Dec 01 2022 05:55:49 GMT-0800 (Pacific Standard Time)">13:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">did iterator helpers get stage 3?</td></tr>
  <tr class="msg" id="L268"><td class="ts-cell"><a class="ts" href="#L268" alt="Thu Dec 01 2022 05:56:35 GMT-0800 (Pacific Standard Time)">13:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-7">snek</span>: yes it did!</td></tr>
  <tr class="msg" id="L269"><td class="ts-cell"><a class="ts" href="#L269" alt="Thu Dec 01 2022 05:56:43 GMT-0800 (Pacific Standard Time)">13:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell"><a href="https://twitter.com/robpalmer2/status/1598248214750191616?s=20&amp;t=6pFlDUfZtj5hXI1s5l9ohw">https://twitter.com/robpalmer2/status/1598248214750191616?s=20&amp;t=6pFlDUfZtj5hXI1s5l9ohw</a></td></tr>
  <tr class="msg" id="L270"><td class="ts-cell"><a class="ts" href="#L270" alt="Thu Dec 01 2022 05:56:49 GMT-0800 (Pacific Standard Time)">13:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">hypeeee</td></tr>
  <tr class="msg" id="L271"><td class="ts-cell"><a class="ts" href="#L271" alt="Thu Dec 01 2022 05:56:52 GMT-0800 (Pacific Standard Time)">13:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-7">snek</span>: <a href="https://mastodon.social/@robpalmer/109437830520093382">https://mastodon.social/@robpalmer/109437830520093382</a></td></tr>
  <tr class="msg" id="L272"><td class="ts-cell"><a class="ts" href="#L272" alt="Thu Dec 01 2022 05:57:25 GMT-0800 (Pacific Standard Time)">13:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">ooo now which one do I click on</td></tr>
  <tr class="msg" id="L273"><td class="ts-cell"><a class="ts" href="#L273" alt="Thu Dec 01 2022 06:00:48 GMT-0800 (Pacific Standard Time)">14:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Justin Ridgewell</span>: I want to push back on the statement that module expressions are not useful without module declarations. I would argue that module expressions have very strong motivation, separate from motivation for module declaration.</td></tr>
  <tr class="msg" id="L274"><td class="ts-cell"><a class="ts" href="#L274" alt="Thu Dec 01 2022 06:01:26 GMT-0800 (Pacific Standard Time)">14:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Motivations aside, there is so much shared between them its difficult to talk about them independently.</td></tr>
  <tr class="msg" id="L275"><td class="ts-cell"><a class="ts" href="#L275" alt="Thu Dec 01 2022 06:01:46 GMT-0800 (Pacific Standard Time)">14:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Motivations aside, there is so much shared between them its difficult to talk about them independently.</blockquote></mx-reply>I think it is reasonable to talk about expressions without declarations, but not the other way around.</td></tr>
  <tr class="msg" id="L276"><td class="ts-cell"><a class="ts" href="#L276" alt="Thu Dec 01 2022 06:01:48 GMT-0800 (Pacific Standard Time)">14:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@caridy:matrix.org">caridy</span>&gt;</div></td><td class="msg-cell">the fact that the expressions cannot be used to import from, is sufficient for me to keep them independently.</td></tr>
  <tr class="msg" id="L277"><td class="ts-cell"><a class="ts" href="#L277" alt="Thu Dec 01 2022 06:02:19 GMT-0800 (Pacific Standard Time)">14:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I think it is reasonable to talk about expressions without declarations, but not the other way around.</blockquote></mx-reply>Reason being that there is a future where expressions get shipped, but not module declarations.</td></tr>
  <tr class="msg" id="L278"><td class="ts-cell"><a class="ts" href="#L278" alt="Thu Dec 01 2022 06:02:28 GMT-0800 (Pacific Standard Time)">14:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell">One can exist and be useful without the other</td></tr>
  <tr class="msg" id="L279"><td class="ts-cell"><a class="ts" href="#L279" alt="Thu Dec 01 2022 06:04:10 GMT-0800 (Pacific Standard Time)">14:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rpamely:matrix.org">Robert Pamely</span>&gt;</div></td><td class="msg-cell">Are nested modules scoped to within the parent module?</td></tr>
  <tr class="msg" id="L280"><td class="ts-cell"><a class="ts" href="#L280" alt="Thu Dec 01 2022 06:04:16 GMT-0800 (Pacific Standard Time)">14:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Are nested modules scoped to within the parent module?</blockquote></mx-reply>Yes</td></tr>
  <tr class="msg" id="L281"><td class="ts-cell"><a class="ts" href="#L281" alt="Thu Dec 01 2022 06:04:32 GMT-0800 (Pacific Standard Time)">14:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell">Unless you explicitly export them</td></tr>
  <tr class="msg" id="L282"><td class="ts-cell"><a class="ts" href="#L282" alt="Thu Dec 01 2022 06:05:06 GMT-0800 (Pacific Standard Time)">14:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">the real reason those proposals are separated IMO because they're initially separated presented to the committee (and back to days they're stage 0, they don't looks similar too much)</td></tr>
  <tr class="msg" id="L283"><td class="ts-cell"><a class="ts" href="#L283" alt="Thu Dec 01 2022 06:05:43 GMT-0800 (Pacific Standard Time)">14:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rpamely:matrix.org">Robert Pamely</span>&gt;</div></td><td class="msg-cell">Are modules independently cachable in browsers? If Site A serves lodash, can Site B use that?</td></tr>
  <tr class="msg" id="L284"><td class="ts-cell"><a class="ts" href="#L284" alt="Thu Dec 01 2022 06:06:00 GMT-0800 (Pacific Standard Time)">14:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Are modules independently cachable in browsers? If Site A serves lodash, can Site B use that?</blockquote></mx-reply>nowadays I believe answer is not</td></tr>
  <tr class="msg" id="L285"><td class="ts-cell"><a class="ts" href="#L285" alt="Thu Dec 01 2022 06:06:05 GMT-0800 (Pacific Standard Time)">14:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><p>Ie:</p>
<pre><code class="language-ts">module foo {
  module bar {}
  export module baz {}
}

import bar; // Linking error
import baz; // Linking error

import { baz } from foo;
import baz; // Success!
</code></pre>
</td></tr>
  <tr class="msg" id="L286"><td class="ts-cell"><a class="ts" href="#L286" alt="Thu Dec 01 2022 06:06:18 GMT-0800 (Pacific Standard Time)">14:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">I've heard browsers are shipping cross-site cache isolation to prevent tracking</td></tr>
  <tr class="msg" id="L287"><td class="ts-cell"><a class="ts" href="#L287" alt="Thu Dec 01 2022 06:07:00 GMT-0800 (Pacific Standard Time)">14:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">besides, practically speaking, due to the widespread use of bundlers it's not very likely</td></tr>
  <tr class="msg" id="L288"><td class="ts-cell"><a class="ts" href="#L288" alt="Thu Dec 01 2022 06:07:22 GMT-0800 (Pacific Standard Time)">14:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">everyone bundles their own React ü§î</td></tr>
  <tr class="msg" id="L289"><td class="ts-cell"><a class="ts" href="#L289" alt="Thu Dec 01 2022 06:07:54 GMT-0800 (Pacific Standard Time)">14:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rpamely:matrix.org">Robert Pamely</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> besides, practically speaking, due to the widespread use of bundlers it's not very likely</blockquote></mx-reply>Right, but with module declarations you can now cache module based on some other identifier than URL</td></tr>
  <tr class="msg" id="L290"><td class="ts-cell"><a class="ts" href="#L290" alt="Thu Dec 01 2022 06:07:59 GMT-0800 (Pacific Standard Time)">14:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rpamely:matrix.org">Robert Pamely</span>&gt;</div></td><td class="msg-cell">so bundled modules could be cached</td></tr>
  <tr class="msg" id="L291"><td class="ts-cell"><a class="ts" href="#L291" alt="Thu Dec 01 2022 06:08:08 GMT-0800 (Pacific Standard Time)">14:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rpamely:matrix.org">Robert Pamely</span>&gt;</div></td><td class="msg-cell">security concerns aside</td></tr>
  <tr class="msg" id="L292"><td class="ts-cell"><a class="ts" href="#L292" alt="Thu Dec 01 2022 06:09:48 GMT-0800 (Pacific Standard Time)">14:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> so bundled modules could be cached</blockquote></mx-reply>I strongly against to serialize a ModuleSource and store it on the disk for security reasons. üÜó post message to Worker ‚õî store it in indexedDB and read it in the future</td></tr>
  <tr class="msg" id="L293"><td class="ts-cell"><a class="ts" href="#L293" alt="Thu Dec 01 2022 06:10:31 GMT-0800 (Pacific Standard Time)">14:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">if we allowed over the wire or on disk serialization of module expressions we'd need a formal binary AST</td></tr>
  <tr class="msg" id="L294"><td class="ts-cell"><a class="ts" href="#L294" alt="Thu Dec 01 2022 06:11:03 GMT-0800 (Pacific Standard Time)">14:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> if we allowed over the wire or on disk serialization of module expressions we'd need a formal binary AST</blockquote></mx-reply>indexedDB does not show developers how data is stored so that's pure implementation detail.</td></tr>
  <tr class="msg" id="L295"><td class="ts-cell"><a class="ts" href="#L295" alt="Thu Dec 01 2022 06:11:30 GMT-0800 (Pacific Standard Time)">14:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rpamely:matrix.org">Robert Pamely</span>&gt;</div></td><td class="msg-cell">Why is it any different than caching the react source from a CDN, if you cache the react source from a bundled site?</td></tr>
  <tr class="msg" id="L296"><td class="ts-cell"><a class="ts" href="#L296" alt="Thu Dec 01 2022 06:11:52 GMT-0800 (Pacific Standard Time)">14:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rpamely:matrix.org">Robert Pamely</span>&gt;</div></td><td class="msg-cell">(I'm thinking out loud here)</td></tr>
  <tr class="msg" id="L297"><td class="ts-cell"><a class="ts" href="#L297" alt="Thu Dec 01 2022 06:13:16 GMT-0800 (Pacific Standard Time)">14:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@kriskowal:matrix.org">Kris Kowal</span>&gt;</div></td><td class="msg-cell">I‚Äôm reasonably certain that module declarations would break new Module((module {}).source), which is key to user composition of module graphs.</td></tr>
  <tr class="msg" id="L298"><td class="ts-cell"><a class="ts" href="#L298" alt="Thu Dec 01 2022 06:13:23 GMT-0800 (Pacific Standard Time)">14:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Right, but with module declarations you can now cache module based on some other identifier than URL</blockquote></mx-reply>yes! I wonder if this has interesting implications for, say, ad-blocking.</td></tr>
  <tr class="msg" id="L299"><td class="ts-cell"><a class="ts" href="#L299" alt="Thu Dec 01 2022 06:14:19 GMT-0800 (Pacific Standard Time)">14:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Why is it any different than caching the react source from a CDN, if you cache the react source from a bundled site?</blockquote></mx-reply>there is no longer caching from CDNs <a href="https://github.com/whatwg/fetch/issues/904">https://github.com/whatwg/fetch/issues/904</a></td></tr>
  <tr class="msg" id="L300"><td class="ts-cell"><a class="ts" href="#L300" alt="Thu Dec 01 2022 06:14:24 GMT-0800 (Pacific Standard Time)">14:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell"><p>I'm not huge on needing a separate namespace per module (or bit per value) to track which exports are <em>module</em> exports that can be imported from vs. not</p>
<p>This blog post comes to mind <a href="https://gbracha.blogspot.com/2014/09/a-domain-of-shadows.html">https://gbracha.blogspot.com/2014/09/a-domain-of-shadows.html</a></p>
</td></tr>
  <tr class="msg" id="L301"><td class="ts-cell"><a class="ts" href="#L301" alt="Thu Dec 01 2022 06:16:29 GMT-0800 (Pacific Standard Time)">14:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@kriskowal:matrix.org">Kris Kowal</span>&gt;</div></td><td class="msg-cell">Module declarations/expressions won‚Äôt compose because a module graph that consists of declarations coming from different module files cannot be consolidated into a single module handler, for the purposes of resolving stringly named module specifiers on their various referrers.</td></tr>
  <tr class="msg" id="L302"><td class="ts-cell"><a class="ts" href="#L302" alt="Thu Dec 01 2022 06:16:42 GMT-0800 (Pacific Standard Time)">14:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Curious about static importability and portability of <code>import module foo from ...</code> and <code>module bar { import foo; }</code>. Is that valid?</td></tr>
  <tr class="msg" id="L303"><td class="ts-cell"><a class="ts" href="#L303" alt="Thu Dec 01 2022 06:17:20 GMT-0800 (Pacific Standard Time)">14:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rpamely:matrix.org">Robert Pamely</span>&gt;</div></td><td class="msg-cell">If I'm reading this correctly, the concern was that CDN sources were manipulated to add tracking code in them that got loaded into every site that uses them?</td></tr>
  <tr class="msg" id="L304"><td class="ts-cell"><a class="ts" href="#L304" alt="Thu Dec 01 2022 06:17:49 GMT-0800 (Pacific Standard Time)">14:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell">aren't module declarations top level only?</td></tr>
  <tr class="msg" id="L305"><td class="ts-cell"><a class="ts" href="#L305" alt="Thu Dec 01 2022 06:17:59 GMT-0800 (Pacific Standard Time)">14:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@caridy:matrix.org">caridy</span>&gt;</div></td><td class="msg-cell">Slides: <a href="https://docs.google.com/presentation/d/183cYPeUjhzVRuZ0O-gwXqp6KtFYxxhgYodbr7XNo_9o/edit">https://docs.google.com/presentation/d/183cYPeUjhzVRuZ0O-gwXqp6KtFYxxhgYodbr7XNo_9o/edit</a></td></tr>
  <tr class="msg" id="L306"><td class="ts-cell"><a class="ts" href="#L306" alt="Thu Dec 01 2022 06:18:15 GMT-0800 (Pacific Standard Time)">14:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>And what about:</p>
<pre><code class="language-js">const x = module { }
const y = module { import x; }
</code></pre>
<p>There is so much inconsistency with the "two worlds" approach that breaks the decl/expr equivalence of function and class</p>
</td></tr>
  <tr class="msg" id="L307"><td class="ts-cell"><a class="ts" href="#L307" alt="Thu Dec 01 2022 06:18:48 GMT-0800 (Pacific Standard Time)">14:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> aren't module declarations top level only?</blockquote></mx-reply><p>The proposal as it is now allows you to do something like this:</p>
<pre><code class="language-js">{
  module x {}
  await import(module { import x });
}
</code></pre>
</td></tr>
  <tr class="msg" id="L308"><td class="ts-cell"><a class="ts" href="#L308" alt="Thu Dec 01 2022 06:19:14 GMT-0800 (Pacific Standard Time)">14:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell">thanks for the info</td></tr>
  <tr class="msg" id="L309"><td class="ts-cell"><a class="ts" href="#L309" alt="Thu Dec 01 2022 06:19:19 GMT-0800 (Pacific Standard Time)">14:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">That's specific to just that case, not a general solution.</td></tr>
  <tr class="msg" id="L310"><td class="ts-cell"><a class="ts" href="#L310" alt="Thu Dec 01 2022 06:19:22 GMT-0800 (Pacific Standard Time)">14:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@kriskowal:matrix.org">Kris Kowal</span>&gt;</div></td><td class="msg-cell">My other concern is that differentiating lexical and stringy module specifiers will be used to distinguish which modules should be serialized from which should be resolved from a remote worker‚Äôs import hooks, and will have ramifications on whether instances are shared. That‚Äôll herd the module ecosystem in a weird direction, where portable libraries will generally have to export a module expression/declaration in order to give the user the choice of whether to link lazily or eagerly.</td></tr>
  <tr class="msg" id="L311"><td class="ts-cell"><a class="ts" href="#L311" alt="Thu Dec 01 2022 06:19:28 GMT-0800 (Pacific Standard Time)">14:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>And what about:</p>
<pre><code class="language-js">const x = module { }
const y = module { import x; }
</code></pre>
<p>There is so much inconsistency with the "two worlds" approach that breaks the decl/expr equivalence of function and class</p>
</blockquote></mx-reply>What would you expect to happen here if instead of <code>const x</code> you had a <code>let x</code>, that is later reassigned?</td></tr>
  <tr class="msg" id="L312"><td class="ts-cell"><a class="ts" href="#L312" alt="Thu Dec 01 2022 06:19:50 GMT-0800 (Pacific Standard Time)">14:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">You could be importing a <code>module</code> dynamically from another module that exports it, but can't reference it in another <code>module</code> expression.</td></tr>
  <tr class="msg" id="L313"><td class="ts-cell"><a class="ts" href="#L313" alt="Thu Dec 01 2022 06:19:52 GMT-0800 (Pacific Standard Time)">14:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Robert Pamely</span>: no, the concern is, my site can tell you've visited another site by timing whether loading a resource which is also loaded by that site is cache-hit or not</td></tr>
  <tr class="msg" id="L314"><td class="ts-cell"><a class="ts" href="#L314" alt="Thu Dec 01 2022 06:19:57 GMT-0800 (Pacific Standard Time)">14:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/shivanigithub/http-cache-partitioning">https://github.com/shivanigithub/http-cache-partitioning</a> has a better explainer I think</td></tr>
  <tr class="msg" id="L315"><td class="ts-cell"><a class="ts" href="#L315" alt="Thu Dec 01 2022 06:19:58 GMT-0800 (Pacific Standard Time)">14:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell">I think it may be a reasonable to investigate using a seperate identifier namespace to clarify the difference between "regular values" and "module values". For example <code>module $foo {}; import $foo;</code></td></tr>
  <tr class="msg" id="L316"><td class="ts-cell"><a class="ts" href="#L316" alt="Thu Dec 01 2022 06:20:38 GMT-0800 (Pacific Standard Time)">14:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I think it may be a reasonable to investigate using a seperate identifier namespace to clarify the difference between "regular values" and "module values". For example <code>module $foo {}; import $foo;</code></blockquote></mx-reply>but module declarations should be able to <code>import($foo)</code></td></tr>
  <tr class="msg" id="L317"><td class="ts-cell"><a class="ts" href="#L317" alt="Thu Dec 01 2022 06:20:48 GMT-0800 (Pacific Standard Time)">14:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">so there is no need to separate a new namespace</td></tr>
  <tr class="msg" id="L318"><td class="ts-cell"><a class="ts" href="#L318" alt="Thu Dec 01 2022 06:20:59 GMT-0800 (Pacific Standard Time)">14:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Curious about static importability and portability of <code>import module foo from ...</code> and <code>module bar { import foo; }</code>. Is that valid?</blockquote></mx-reply>There is no spec text for this yet, but if import reflection reifies to a <code>Module</code> object it can be easily made to work.</td></tr>
  <tr class="msg" id="L319"><td class="ts-cell"><a class="ts" href="#L319" alt="Thu Dec 01 2022 06:21:15 GMT-0800 (Pacific Standard Time)">14:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">we can think of, some values are just available eariler, before the execute</td></tr>
  <tr class="msg" id="L320"><td class="ts-cell"><a class="ts" href="#L320" alt="Thu Dec 01 2022 06:21:26 GMT-0800 (Pacific Standard Time)">14:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><pre><code class="language-js">// foo.js
export module A { }

// bar.js
export function maybeDoAThing() {
  const A = await import("./foo.js").A;
  const B = module { import A };
  new Worker(B).postMessage(...);
}
</code></pre>
</td></tr>
  <tr class="msg" id="L321"><td class="ts-cell"><a class="ts" href="#L321" alt="Thu Dec 01 2022 06:21:36 GMT-0800 (Pacific Standard Time)">14:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> we can think of, some values are just available eariler, before the execute</blockquote></mx-reply>this is difficult to explain to users though. using a separate namespace would make this clear</td></tr>
  <tr class="msg" id="L322"><td class="ts-cell"><a class="ts" href="#L322" alt="Thu Dec 01 2022 06:22:05 GMT-0800 (Pacific Standard Time)">14:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <pre><code class="language-js">// foo.js
export module A { }

// bar.js
export function maybeDoAThing() {
  const A = await import("./foo.js").A;
  const B = module { import A };
  new Worker(B).postMessage(...);
}
</code></pre>
</blockquote></mx-reply>I believe this is a link error.</td></tr>
  <tr class="msg" id="L323"><td class="ts-cell"><a class="ts" href="#L323" alt="Thu Dec 01 2022 06:22:29 GMT-0800 (Pacific Standard Time)">14:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><p>it's difficult to explain why this is the case:</p>
<pre><code class="language-js">const a = module {};
module b {};
import a; // link error
import b; // fine
</code></pre>
</td></tr>
  <tr class="msg" id="L324"><td class="ts-cell"><a class="ts" href="#L324" alt="Thu Dec 01 2022 06:22:31 GMT-0800 (Pacific Standard Time)">14:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">My point is that the "2nd world" approach makes module decls and module expressions inconsistent.</td></tr>
  <tr class="msg" id="L325"><td class="ts-cell"><a class="ts" href="#L325" alt="Thu Dec 01 2022 06:22:41 GMT-0800 (Pacific Standard Time)">14:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">That's a refactoring hazard.</td></tr>
  <tr class="msg" id="L326"><td class="ts-cell"><a class="ts" href="#L326" alt="Thu Dec 01 2022 06:23:04 GMT-0800 (Pacific Standard Time)">14:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell">Module expressions and declarations are among the most important changes coming to ECMAScript that positively affects web developers and code bundling in order to encourage a better usage of ES modules. I hope TC39 can dedicate more time for those topics in order to advance them without taking years.</td></tr>
  <tr class="msg" id="L327"><td class="ts-cell"><a class="ts" href="#L327" alt="Thu Dec 01 2022 06:23:15 GMT-0800 (Pacific Standard Time)">14:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>it's difficult to explain why this is the case:</p>
<pre><code class="language-js">const a = module {};
module b {};
import a; // link error
import b; // fine
</code></pre>
</blockquote></mx-reply>so maybe we can also accept <code>const ident = module {}</code>. no more complex</td></tr>
  <tr class="msg" id="L328"><td class="ts-cell"><a class="ts" href="#L328" alt="Thu Dec 01 2022 06:23:40 GMT-0800 (Pacific Standard Time)">14:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><p>Thanks for the example, the only way it could work with this proposal is something like this (!!! semantics are different, but the intention is the same):</p>
<pre><code class="language-js">// foo.js
export module A { }

// bar.js
export function maybeDoAThing() {
  const B = module { import { A } from "./foo.js"; import A };
  new Worker(B).postMessage(...);
}

</code></pre>
<p>It's worth investigating when modules should "capture" available modules from the other scope, but it would still only allow capturing other modules and not generic values.</p>
</td></tr>
  <tr class="msg" id="L329"><td class="ts-cell"><a class="ts" href="#L329" alt="Thu Dec 01 2022 06:23:58 GMT-0800 (Pacific Standard Time)">14:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> so maybe we can also accept <code>const ident = module {}</code>. no more complex</blockquote></mx-reply>we can't hoist const bindings though. module declarations only work statically, because they are hoisted</td></tr>
  <tr class="msg" id="L330"><td class="ts-cell"><a class="ts" href="#L330" alt="Thu Dec 01 2022 06:24:31 GMT-0800 (Pacific Standard Time)">14:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I think if we have two things called <code>module</code> where there is a declaration and an expression version, then what they contain and how they handle scoping should be consistent.</td></tr>
  <tr class="msg" id="L331"><td class="ts-cell"><a class="ts" href="#L331" alt="Thu Dec 01 2022 06:25:20 GMT-0800 (Pacific Standard Time)">14:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">shu</span>: currently the message and name access is specced to be non-observable, which mimics FF, but if there's an argument for otherwise, we could spec to always perform a Get</td></tr>
  <tr class="msg" id="L332"><td class="ts-cell"><a class="ts" href="#L332" alt="Thu Dec 01 2022 06:25:23 GMT-0800 (Pacific Standard Time)">14:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I think if we have two things called <code>module</code> where there is a declaration and an expression version, then what they contain and how they handle scoping should be consistent.</blockquote></mx-reply>Well, your examples are about scoping of module declarations and const declarations</td></tr>
  <tr class="msg" id="L333"><td class="ts-cell"><a class="ts" href="#L333" alt="Thu Dec 01 2022 06:25:51 GMT-0800 (Pacific Standard Time)">14:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <pre><code class="language-js">// foo.js
export module A { }

// bar.js
export function maybeDoAThing() {
  const A = await import("./foo.js").A;
  const B = module { import A };
  new Worker(B).postMessage(...);
}
</code></pre>
</blockquote></mx-reply><p>Some thought:</p>
<p>Link of module B in your example can be deferred to when <code>maybeDoAThing</code> is called. When the expression is evaluated, it checks if <code>A</code> is a Module and if it is a constant binding, if not, it failed to evaluate.</p>
</td></tr>
  <tr class="msg" id="L334"><td class="ts-cell"><a class="ts" href="#L334" alt="Thu Dec 01 2022 06:27:19 GMT-0800 (Pacific Standard Time)">14:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Well, your examples are about scoping of module declarations and const declarations</blockquote></mx-reply>Yes, because that could be a real use case. If you can dynamically import a module expression, then you can do so conditionally.</td></tr>
  <tr class="msg" id="L335"><td class="ts-cell"><a class="ts" href="#L335" alt="Thu Dec 01 2022 06:27:26 GMT-0800 (Pacific Standard Time)">14:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">uhhh censoring error stacks is already a proposal</td></tr>
  <tr class="msg" id="L336"><td class="ts-cell"><a class="ts" href="#L336" alt="Thu Dec 01 2022 06:30:18 GMT-0800 (Pacific Standard Time)">14:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: <code>user land -&gt; userland</code></td></tr>
  <tr class="msg" id="L337"><td class="ts-cell"><a class="ts" href="#L337" alt="Thu Dec 01 2022 06:31:10 GMT-0800 (Pacific Standard Time)">14:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>Some thought:</p>
<p>Link of module B in your example can be deferred to when <code>maybeDoAThing</code> is called. When the expression is evaluated, it checks if <code>A</code> is a Module and if it is a constant binding, if not, it failed to evaluate.</p>
</blockquote></mx-reply>Perhaps? This goes to my point about closures. You might, for example need to indicate if a given binding/value is either transparently serializable, replaceable (such as globals), or banned (i.e., non-serializable, non-global).</td></tr>
  <tr class="msg" id="L338"><td class="ts-cell"><a class="ts" href="#L338" alt="Thu Dec 01 2022 06:34:28 GMT-0800 (Pacific Standard Time)">14:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>Accessing a serializable or replaceable binding in a module would be fine, but other bindings would not. There's a circularity issue there though:</p>
<pre><code class="language-js">const a = module { export function f() { return import(b); } };
const b = module { export function g() { return import(a); } };
</code></pre>
<p>This seems like a perfectly reasonable case, but you can't eagerly serialize <code>b</code> because it's not defined. You'd have to defer such serialization until it is needed, so you would again have to capture all bindings.</p>
</td></tr>
  <tr class="msg" id="L339"><td class="ts-cell"><a class="ts" href="#L339" alt="Thu Dec 01 2022 06:36:44 GMT-0800 (Pacific Standard Time)">14:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell"><code>a</code> and <code>b</code> aren't capturable in that example though, right?</td></tr>
  <tr class="msg" id="L340"><td class="ts-cell"><a class="ts" href="#L340" alt="Thu Dec 01 2022 06:37:07 GMT-0800 (Pacific Standard Time)">14:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <code>a</code> and <code>b</code> aren't capturable in that example though, right?</blockquote></mx-reply>My contention is that they should be.</td></tr>
  <tr class="msg" id="L341"><td class="ts-cell"><a class="ts" href="#L341" alt="Thu Dec 01 2022 06:38:08 GMT-0800 (Pacific Standard Time)">14:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>Accessing a serializable or replaceable binding in a module would be fine, but other bindings would not. There's a circularity issue there though:</p>
<pre><code class="language-js">const a = module { export function f() { return import(b); } };
const b = module { export function g() { return import(a); } };
</code></pre>
<p>This seems like a perfectly reasonable case, but you can't eagerly serialize <code>b</code> because it's not defined. You'd have to defer such serialization until it is needed, so you would again have to capture all bindings.</p>
</blockquote></mx-reply>I agree this becomes messy... <code>b</code> and <code>a</code> will be looked up in the global object of it's evaluator instead of links to the module</td></tr>
  <tr class="msg" id="L342"><td class="ts-cell"><a class="ts" href="#L342" alt="Thu Dec 01 2022 06:38:18 GMT-0800 (Pacific Standard Time)">14:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">It would be extremely inconsistent if you cannot model with module expressions the same thing you can model with module declarations. This seems like a major stumbling block for adopters.</td></tr>
  <tr class="msg" id="L343"><td class="ts-cell"><a class="ts" href="#L343" alt="Thu Dec 01 2022 06:38:26 GMT-0800 (Pacific Standard Time)">14:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell"><p>oh, because they <em>would</em> be valid if it was written as</p>
<pre><code>module a { export function f() { return import(b); } };
module b { export function g() { return import(a); } };
</code></pre>
</td></tr>
  <tr class="msg" id="L344"><td class="ts-cell"><a class="ts" href="#L344" alt="Thu Dec 01 2022 06:38:27 GMT-0800 (Pacific Standard Time)">14:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@apaprocki:matrix.org">apaprocki</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Justin Ridgewell</span>: they don't want <code>if (runningInShadowRealm)</code></td></tr>
  <tr class="msg" id="L345"><td class="ts-cell"><a class="ts" href="#L345" alt="Thu Dec 01 2022 06:38:45 GMT-0800 (Pacific Standard Time)">14:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">wait...is <strong><em>that</em></strong> true though?</td></tr>
  <tr class="msg" id="L346"><td class="ts-cell"><a class="ts" href="#L346" alt="Thu Dec 01 2022 06:39:09 GMT-0800 (Pacific Standard Time)">14:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">If it isn't then we don't have the same kind of decl/expr parity that function and class have.</td></tr>
  <tr class="msg" id="L347"><td class="ts-cell"><a class="ts" href="#L347" alt="Thu Dec 01 2022 06:39:13 GMT-0800 (Pacific Standard Time)">14:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>oh, because they <em>would</em> be valid if it was written as</p>
<pre><code>module a { export function f() { return import(b); } };
module b { export function g() { return import(a); } };
</code></pre>
</blockquote></mx-reply>Yes, this would be valid</td></tr>
  <tr class="msg" id="L348"><td class="ts-cell"><a class="ts" href="#L348" alt="Thu Dec 01 2022 06:39:50 GMT-0800 (Pacific Standard Time)">14:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I'd almost prefer just having module declarations over having both, if only to prevent potential confusion by adopters due to the inconsistency.</td></tr>
  <tr class="msg" id="L349"><td class="ts-cell"><a class="ts" href="#L349" alt="Thu Dec 01 2022 06:39:55 GMT-0800 (Pacific Standard Time)">14:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> If it isn't then we don't have the same kind of decl/expr parity that function and class have.</blockquote></mx-reply>Functions already don't have parity - they have different scoping rules. Only classes can be transparently replaced with <code>let className = class { ...</code></td></tr>
  <tr class="msg" id="L350"><td class="ts-cell"><a class="ts" href="#L350" alt="Thu Dec 01 2022 06:40:17 GMT-0800 (Pacific Standard Time)">14:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">So if you're running <code>a</code> in a context where <code>globalThis.b</code> exists, then a captured <code>b</code> takes precedence?</td></tr>
  <tr class="msg" id="L351"><td class="ts-cell"><a class="ts" href="#L351" alt="Thu Dec 01 2022 06:42:45 GMT-0800 (Pacific Standard Time)">14:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Functions already don't have parity - they have different scoping rules. Only classes can be transparently replaced with <code>let className = class { ...</code></blockquote></mx-reply>The difference in outer scoping is that a function declaration is hoisted, while a class has TDZ.</td></tr>
  <tr class="msg" id="L352"><td class="ts-cell"><a class="ts" href="#L352" alt="Thu Dec 01 2022 06:42:53 GMT-0800 (Pacific Standard Time)">14:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">we could just advance the error stacks proposal...</td></tr>
  <tr class="msg" id="L353"><td class="ts-cell"><a class="ts" href="#L353" alt="Thu Dec 01 2022 06:43:42 GMT-0800 (Pacific Standard Time)">14:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">this would be a very small change on top of that</td></tr>
  <tr class="msg" id="L354"><td class="ts-cell"><a class="ts" href="#L354" alt="Thu Dec 01 2022 06:49:50 GMT-0800 (Pacific Standard Time)">14:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><p>If you have this code:</p>
<pre><code class="language-js">module a { let b = getAModule(); await import(b); };
module b { await import(a); };
</code></pre>
<p>the dynamic <code>import(b)</code> imports the result of <code>getAModule</code> and not the outer declaration. That looks expected.</p>
<p>In this case:</p>
<pre><code class="language-js">module a { globalThis.b = getAModule(); await import(b); };
module b { await import(a); };
</code></pre>
<p>I see that it would be confusing, since <code>globalThis.b =</code> might be lexically somewhere else and not discoverable.</p>
<p>How would you feel if bindings of module declarations where not captured, but only statically importable?</p>
<pre><code class="language-js">module a {}
module b { import a; } // ok
</code></pre>
<pre><code class="language-js">module a {}
module b { console.log(a); } // ReferenceError: as every other type of bindings, you cannot capture bindings from the outer scope. You can only use them in import specifiers, which is not a generic "binding usage" position
</code></pre>
<p>Note: the current spec text throws the ReferenceError in this case, but just because it was easier to specify. We didn't have a reason to do one thing or the other, but this possible confusion seems to indicate what we should keep the error.</p>
</td></tr>
  <tr class="msg" id="L355"><td class="ts-cell"><a class="ts" href="#L355" alt="Thu Dec 01 2022 06:51:58 GMT-0800 (Pacific Standard Time)">14:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">this sounds like a topic for TG3...</td></tr>
  <tr class="msg" id="L356"><td class="ts-cell"><a class="ts" href="#L356" alt="Thu Dec 01 2022 06:52:44 GMT-0800 (Pacific Standard Time)">14:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">I'm not convinced by the hopelessness being expressed</td></tr>
  <tr class="msg" id="L357"><td class="ts-cell"><a class="ts" href="#L357" alt="Thu Dec 01 2022 06:53:13 GMT-0800 (Pacific Standard Time)">14:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@apaprocki:matrix.org">apaprocki</span>&gt;</div></td><td class="msg-cell">Is this the only way that script can determine it's running in a shadow realm?</td></tr>
  <tr class="msg" id="L358"><td class="ts-cell"><a class="ts" href="#L358" alt="Thu Dec 01 2022 06:53:25 GMT-0800 (Pacific Standard Time)">14:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@apaprocki:matrix.org">apaprocki</span>&gt;</div></td><td class="msg-cell">(currently known)</td></tr>
  <tr class="msg" id="L359"><td class="ts-cell"><a class="ts" href="#L359" alt="Thu Dec 01 2022 06:53:49 GMT-0800 (Pacific Standard Time)">14:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">I mean it's non-standard, there could be non-standard "amIRunningInAShadowReam" function</td></tr>
  <tr class="msg" id="L360"><td class="ts-cell"><a class="ts" href="#L360" alt="Thu Dec 01 2022 06:57:06 GMT-0800 (Pacific Standard Time)">14:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">(thanks btw <span class="nick-5">danielrosenwasser</span> and <span class="nick-15">rbuckton</span> for explaining your concerns with clear code examples!)</td></tr>
  <tr class="msg" id="L361"><td class="ts-cell"><a class="ts" href="#L361" alt="Thu Dec 01 2022 06:59:29 GMT-0800 (Pacific Standard Time)">14:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>If you have this code:</p>
<pre><code class="language-js">module a { let b = getAModule(); await import(b); };
module b { await import(a); };
</code></pre>
<p>the dynamic <code>import(b)</code> imports the result of <code>getAModule</code> and not the outer declaration. That looks expected.</p>
<p>In this case:</p>
<pre><code class="language-js">module a { globalThis.b = getAModule(); await import(b); };
module b { await import(a); };
</code></pre>
<p>I see that it would be confusing, since <code>globalThis.b =</code> might be lexically somewhere else and not discoverable.</p>
<p>How would you feel if bindings of module declarations where not captured, but only statically importable?</p>
<pre><code class="language-js">module a {}
module b { import a; } // ok
</code></pre>
<pre><code class="language-js">module a {}
module b { console.log(a); } // ReferenceError: as every other type of bindings, you cannot capture bindings from the outer scope. You can only use them in import specifiers, which is not a generic "binding usage" position
</code></pre>
<p>Note: the current spec text throws the ReferenceError in this case, but just because it was easier to specify. We didn't have a reason to do one thing or the other, but this possible confusion seems to indicate what we should keep the error.</p>
</blockquote></mx-reply>I think if we had module declarations, I would prefer the "do not implicitly capture" behavior, but it feels like that defeats a lot of what would make them "special". I'm not sure if that's the right answer, but I found the current behavior confusing because my mental model was "modules capture <em>nothing</em>"</td></tr>
  <tr class="msg" id="L362"><td class="ts-cell"><a class="ts" href="#L362" alt="Thu Dec 01 2022 06:59:49 GMT-0800 (Pacific Standard Time)">14:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@apaprocki:matrix.org">apaprocki</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I mean it's non-standard, there could be non-standard "amIRunningInAShadowReam" function</blockquote></mx-reply>Shipping a standard "amIRunningInAShadowRealm" would be the most extreme form of telling people script can change its behavior based upon how it is run, as opposed to relying on them reading spec text, implementation recommendation, or whatever it is called.</td></tr>
  <tr class="msg" id="L363"><td class="ts-cell"><a class="ts" href="#L363" alt="Thu Dec 01 2022 07:02:19 GMT-0800 (Pacific Standard Time)">15:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">Here is the open issue about invariants: <a href="https://github.com/tc39/proposal-shadowrealm/issues/324">https://github.com/tc39/proposal-shadowrealm/issues/324</a></td></tr>
  <tr class="msg" id="L364"><td class="ts-cell"><a class="ts" href="#L364" alt="Thu Dec 01 2022 07:04:13 GMT-0800 (Pacific Standard Time)">15:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@caridy:matrix.org">caridy</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> we could just advance the error stacks proposal...</blockquote></mx-reply>perfect, I will drop the ball into that bucket by opening an issue there :)</td></tr>
  <tr class="msg" id="L365"><td class="ts-cell"><a class="ts" href="#L365" alt="Thu Dec 01 2022 07:05:33 GMT-0800 (Pacific Standard Time)">15:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">i had enough in me to stay awake until 7, barely, but I am very close to falling asleep before we finish this item</td></tr>
  <tr class="msg" id="L366"><td class="ts-cell"><a class="ts" href="#L366" alt="Thu Dec 01 2022 07:06:24 GMT-0800 (Pacific Standard Time)">15:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">commiserations to everyone who ended up in the overflow</td></tr>
  <tr class="msg" id="L367"><td class="ts-cell"><a class="ts" href="#L367" alt="Thu Dec 01 2022 08:49:51 GMT-0800 (Pacific Standard Time)">16:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Could a chair help me by finishing the transfer of <a href="https://github.com/tc39-transfer/proposal-async-explicit-resource-management">https://github.com/tc39-transfer/proposal-async-explicit-resource-management</a> to the tc39 org to help with the async resource management split?</td></tr>
  <tr class="msg" id="L368"><td class="ts-cell"><a class="ts" href="#L368" alt="Thu Dec 01 2022 11:42:05 GMT-0800 (Pacific Standard Time)">19:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Could a chair help me by finishing the transfer of <a href="https://github.com/tc39-transfer/proposal-async-explicit-resource-management">https://github.com/tc39-transfer/proposal-async-explicit-resource-management</a> to the tc39 org to help with the async resource management split?</blockquote></mx-reply>I still need owner access so that I can make changes to Settings and set up CI/publishing for the rendered spec.</td></tr>
  <tr class="msg" id="L369"><td class="ts-cell"><a class="ts" href="#L369" alt="Thu Dec 01 2022 12:00:06 GMT-0800 (Pacific Standard Time)">20:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">rbuckton</span>: done</td></tr>
  <tr class="msg" id="L370"><td class="ts-cell"><a class="ts" href="#L370" alt="Thu Dec 01 2022 12:01:37 GMT-0800 (Pacific Standard Time)">20:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Thanks!</td></tr>
  <tr class="msg" id="L371"><td class="ts-cell"><a class="ts" href="#L371" alt="Thu Dec 01 2022 13:59:06 GMT-0800 (Pacific Standard Time)">21:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I think if we had module declarations, I would prefer the "do not implicitly capture" behavior, but it feels like that defeats a lot of what would make them "special". I'm not sure if that's the right answer, but I found the current behavior confusing because my mental model was "modules capture <em>nothing</em>"</blockquote></mx-reply><p>Honestly it sounds like we're starting to get at, module fragments should be in a separate namespace. Neither variables nor strings, but a secret third thing. As an obviously unusable strawman, let's say they begin with <code>##</code> :). So the example would be:</p>
<pre><code class="language-js">module ##a { let b = getAModule(); await import(b); /* obviously targets the lexically scoped variable */ }
module ##b { import ##a; /* obviously targets the module declaration */ }
</code></pre>
</td></tr>
  <tr class="msg" id="L372"><td class="ts-cell"><a class="ts" href="#L372" alt="Thu Dec 01 2022 13:59:40 GMT-0800 (Pacific Standard Time)">21:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">this separate namespace could actually be usable in expression context (to get the Module object), just not the opposite: it would be impossible to make a runtime variable with the same name</td></tr>
  <tr class="msg" id="L373"><td class="ts-cell"><a class="ts" href="#L373" alt="Thu Dec 01 2022 14:00:02 GMT-0800 (Pacific Standard Time)">22:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">so then we'd have a clear explanation: <code>module { }</code> closes over just the <code>##xyz</code> values, and nothing else</td></tr>
  <tr class="msg" id="L374"><td class="ts-cell"><a class="ts" href="#L374" alt="Thu Dec 01 2022 14:01:17 GMT-0800 (Pacific Standard Time)">22:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><p>remember that we previously rejected strings specifiers for a couple reasons:</p>
<ul>
<li>We wanted to leave 100% of the string specifier space to hosts. For example, we definitely didn't want to steal the fragment space of URLs, which already has other semantics.</li>
<li>At the same time, we wanted module declarations to have well-defined, reliable, host-independent semantics</li>
</ul>
</td></tr>
  <tr class="msg" id="L375"><td class="ts-cell"><a class="ts" href="#L375" alt="Thu Dec 01 2022 14:03:35 GMT-0800 (Pacific Standard Time)">22:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@alex.vincent:matrix.org">Alex Vincent</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">rbuckton</span>: I do want to confer with you sometime in December (but not in the next few days) about the resource management, cancellation, and proxy revocation proposals.  Do you attend SES's strategy sessions occasionally?</td></tr>
  <tr class="msg" id="L376"><td class="ts-cell"><a class="ts" href="#L376" alt="Thu Dec 01 2022 14:24:06 GMT-0800 (Pacific Standard Time)">22:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">oof - a parallel namespace gives me all sorts of bad feelings. the committee reacted pretty strongly against that with hax's extensions proposal too, iirc</td></tr>
  <tr class="msg" id="L377"><td class="ts-cell"><a class="ts" href="#L377" alt="Thu Dec 01 2022 14:25:12 GMT-0800 (Pacific Standard Time)">22:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">well, we made a separate namespace for private names :) Arguably the specifiers already <em>are</em> a separate namespace, as well. I think the viability depends a lot on if we can come up with an agreeable syntax.</td></tr>
  <tr class="msg" id="L378"><td class="ts-cell"><a class="ts" href="#L378" alt="Thu Dec 01 2022 14:26:04 GMT-0800 (Pacific Standard Time)">22:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">also it depends whether a proposal "pays for itself" (introducing a significant enough new capability) and meets developer expectations (For extensions, I think developers hope it will magically work with <code>x.y()</code>)</td></tr>
  <tr class="msg" id="L379"><td class="ts-cell"><a class="ts" href="#L379" alt="Thu Dec 01 2022 14:29:22 GMT-0800 (Pacific Standard Time)">22:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i would think dev expectations of module fragments/blocks is that they either capture everything, like a function, or nothing at all (in which case the way to "pass in" something would be like in php's <code>using</code> declaration on closures)</td></tr>
  <tr class="msg" id="L380"><td class="ts-cell"><a class="ts" href="#L380" alt="Thu Dec 01 2022 14:32:45 GMT-0800 (Pacific Standard Time)">22:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Yeah, another way around this is another top-level production/mimetype (like web bundles, but it has to be processable just by the JS engine). That introduces other issues, though.</td></tr>
  <tr class="msg" id="L381"><td class="ts-cell"><a class="ts" href="#L381" alt="Thu Dec 01 2022 14:33:44 GMT-0800 (Pacific Standard Time)">22:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i would think dev expectations of module fragments/blocks is that they either capture everything, like a function, or nothing at all (in which case the way to "pass in" something would be like in php's <code>using</code> declaration on closures)</blockquote></mx-reply>Honestly I don't understand how you arrived at such a strong analysis of developer expectations so quickly.</td></tr>
  <tr class="msg" id="L382"><td class="ts-cell"><a class="ts" href="#L382" alt="Thu Dec 01 2022 14:34:03 GMT-0800 (Pacific Standard Time)">22:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">"would think" is particularly strong?</td></tr>
  <tr class="msg" id="L383"><td class="ts-cell"><a class="ts" href="#L383" alt="Thu Dec 01 2022 14:34:16 GMT-0800 (Pacific Standard Time)">22:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">never mind</td></tr>
  <tr class="msg" id="L384"><td class="ts-cell"><a class="ts" href="#L384" alt="Thu Dec 01 2022 14:35:13 GMT-0800 (Pacific Standard Time)">22:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i would also think that any of us that have extensive experience interacting with devs in general would indeed have some sense, immediately, of what might be suitable, even tho more research is always helpful</td></tr>

</tbody></table></div></div></div>
</body></html>