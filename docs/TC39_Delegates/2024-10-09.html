<!DOCTYPE html><html><head>
  <title>TC39 Delegates on 2024-10-09</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "TC39 Delegates";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">TC39 Delegates<br>2024-10-09<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2024-10-08" class="nav-link"><span>prev</span></a>
<a href="2024-10-10" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search TC39 Delegates">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Oct 08 2024 18:05:15 GMT-0700 (Pacific Daylight Time)">01:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">please add yourself to the attendees list at the top of today's notes doc.  (and yesterday's if you missed).  thank you üôè</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Oct 08 2024 18:27:21 GMT-0700 (Pacific Daylight Time)">01:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">I captured the queue</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Oct 08 2024 18:30:26 GMT-0700 (Pacific Daylight Time)">01:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">7 years, wow</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue Oct 08 2024 18:39:14 GMT-0700 (Pacific Daylight Time)">01:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">Fun co-incidence. The 'toSorted' spec bug was caught by a Japanese developer</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Tue Oct 08 2024 18:41:35 GMT-0700 (Pacific Daylight Time)">01:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">"Summing a list is a very common operation and is one of the few remaining use cases for Array.prototype.reduce."</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Tue Oct 08 2024 18:41:46 GMT-0700 (Pacific Daylight Time)">01:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">are we going to discouraging use of [].reduce?</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Tue Oct 08 2024 18:43:01 GMT-0700 (Pacific Daylight Time)">01:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">no, because you don't necessarily want the new behavior</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Tue Oct 08 2024 18:43:22 GMT-0700 (Pacific Daylight Time)">01:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">The reduce will be faster still, right?</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Tue Oct 08 2024 18:44:10 GMT-0700 (Pacific Daylight Time)">01:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">@jkup</span> an equivalent loop will, at least</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Tue Oct 08 2024 18:44:19 GMT-0700 (Pacific Daylight Time)">01:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">but you REALLY don't want to do that</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Tue Oct 08 2024 18:44:41 GMT-0700 (Pacific Daylight Time)">01:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">your result can accumulate a ton of error</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Tue Oct 08 2024 18:44:43 GMT-0700 (Pacific Daylight Time)">01:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">the wording sounds like reduce is a bad thing (actually yes in most cases it <em>reduce</em> the code readability)</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Tue Oct 08 2024 18:45:48 GMT-0700 (Pacific Daylight Time)">01:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">but I'm not expecting that we should have a proposal to solve "the few remaining use cases of reduce", other motivations are ok thou</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Tue Oct 08 2024 18:46:27 GMT-0700 (Pacific Daylight Time)">01:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> but you REALLY don't want to do that</blockquote></mx-reply>I mean, in a specific case you might know that you're just adding e.g. a couple dozen single-digit ints or something though</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Tue Oct 08 2024 18:46:42 GMT-0700 (Pacific Daylight Time)">01:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">just depends on the guarantees you're working with</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Tue Oct 08 2024 18:47:07 GMT-0700 (Pacific Daylight Time)">01:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">did you know reduce is pronounced re-doo-che</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Tue Oct 08 2024 18:47:27 GMT-0700 (Pacific Daylight Time)">01:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">@rkirsling</span> if the number of values you're summing is small enough, the difference in perf between compensated and uncompensated is negligible anyway</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Tue Oct 08 2024 18:47:38 GMT-0700 (Pacific Daylight Time)">01:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">touch√©!</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Tue Oct 08 2024 18:47:57 GMT-0700 (Pacific Daylight Time)">01:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">and once it gets large enough to care about perf, you should also care about error accumulation</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Tue Oct 08 2024 18:47:59 GMT-0700 (Pacific Daylight Time)">01:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> did you know reduce is pronounced re-doo-che</blockquote></mx-reply>not re-diu-s, or it's a ghoti joke?</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Tue Oct 08 2024 18:48:49 GMT-0700 (Pacific Daylight Time)">01:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">it is neither, it's just a "let's pronounce this word in a silly way" joke</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Tue Oct 08 2024 18:49:32 GMT-0700 (Pacific Daylight Time)">01:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">...the silly way in this case being like Italian, presumably :D</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Tue Oct 08 2024 18:53:36 GMT-0700 (Pacific Daylight Time)">01:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">the contents of the schedule may have shifted in flight.  presenters please review and let us know if any issues</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Tue Oct 08 2024 18:54:49 GMT-0700 (Pacific Daylight Time)">01:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> The reduce will be faster still, right?</blockquote></mx-reply>I would guess this will actually be faster because the reduce has to do callbacks. at least in the case where the engine knows it's a list of numbers already, <code>sumPrecise</code> can avoid a lot of work, which may make up for the difference</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Tue Oct 08 2024 18:58:01 GMT-0700 (Pacific Daylight Time)">01:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell">I feel <code>setdefault</code> is ok. Not sure why people prefer callback...</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Tue Oct 08 2024 18:58:15 GMT-0700 (Pacific Daylight Time)">01:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">because sometimes the default is expensive to compute.</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Tue Oct 08 2024 18:58:18 GMT-0700 (Pacific Daylight Time)">01:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">the callback can be lifted outside a loop, I'm not too worried about it</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Tue Oct 08 2024 18:58:19 GMT-0700 (Pacific Daylight Time)">01:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><code>getOrSet</code></td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Tue Oct 08 2024 18:58:55 GMT-0700 (Pacific Daylight Time)">01:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">it's true that people <em>can</em> avoid re-creating the callback, but they're not going to</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Tue Oct 08 2024 18:58:59 GMT-0700 (Pacific Daylight Time)">01:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">yeah</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Tue Oct 08 2024 18:59:00 GMT-0700 (Pacific Daylight Time)">01:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i am also skeptical that prepending <code>() =&gt;</code> would have a noticeable perf hit, but have no way to argue that</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Tue Oct 08 2024 18:59:14 GMT-0700 (Pacific Daylight Time)">01:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">allocating throwaway closures is a lot more expensive than <code>0</code></td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Tue Oct 08 2024 18:59:16 GMT-0700 (Pacific Daylight Time)">01:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">it will have a noticeable perf hit in a hot loop for sure?</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Tue Oct 08 2024 18:59:20 GMT-0700 (Pacific Daylight Time)">01:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">allocation + call</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Tue Oct 08 2024 18:59:34 GMT-0700 (Pacific Daylight Time)">01:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> allocating throwaway closures is a lot more expensive than <code>0</code></blockquote></mx-reply><pre><code>function returnZero() { return 0; }
</code></pre>
</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Tue Oct 08 2024 18:59:45 GMT-0700 (Pacific Daylight Time)">01:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">yeah people aren't gonna do that, i agree with kevin there</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Tue Oct 08 2024 18:59:48 GMT-0700 (Pacific Daylight Time)">01:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">people will write ()=&gt;0</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Tue Oct 08 2024 18:59:53 GMT-0700 (Pacific Daylight Time)">01:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">100% of the time</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Tue Oct 08 2024 18:59:56 GMT-0700 (Pacific Daylight Time)">01:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-5">@shu</span> <span class="nick-6">@bakkot</span> when it's <code data-md="`">[]</code>, you're creating tons of thrown-away arrays instead of just not calling a callback</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Tue Oct 08 2024 19:00:08 GMT-0700 (Pacific Daylight Time)">02:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">when what is []?</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Tue Oct 08 2024 19:00:08 GMT-0700 (Pacific Daylight Time)">02:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">but at least you don't have to call anything</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Tue Oct 08 2024 19:00:19 GMT-0700 (Pacific Daylight Time)">02:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">in Iterator.concat the throwaway arrays were supposed to be nbd</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Tue Oct 08 2024 19:00:20 GMT-0700 (Pacific Daylight Time)">02:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> when what is []?</blockquote></mx-reply>when that's the default value</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Tue Oct 08 2024 19:00:24 GMT-0700 (Pacific Daylight Time)">02:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">people who care about perf already know to lift regexps outside of loops for example, this is the same thing</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Tue Oct 08 2024 19:00:27 GMT-0700 (Pacific Daylight Time)">02:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> because sometimes the default is expensive to compute.</blockquote></mx-reply>But current <code>map.set</code> has similar issue?</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Tue Oct 08 2024 19:00:29 GMT-0700 (Pacific Daylight Time)">02:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">if the default value is [], presumably you want a different empty array?</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Tue Oct 08 2024 19:00:55 GMT-0700 (Pacific Daylight Time)">02:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> But current <code>map.set</code> has similar issue?</blockquote></mx-reply>currently you'd have to do your own has/get/set, and the set would be conditionally evaluated, so it'd always be the same as a callback (or better)</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Tue Oct 08 2024 19:01:01 GMT-0700 (Pacific Daylight Time)">02:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>in Iterator.concat the throwaway arrays were supposed to be nbd</blockquote></mx-reply>we're talking about vastly different numbers of throwaway arrays here</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Tue Oct 08 2024 19:01:07 GMT-0700 (Pacific Daylight Time)">02:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> if the default value is [], presumably you want a different empty array?</blockquote></mx-reply>map.setdefault(key, []) already give u a diff empty array?</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Tue Oct 08 2024 19:01:19 GMT-0700 (Pacific Daylight Time)">02:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">yes</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Tue Oct 08 2024 19:01:28 GMT-0700 (Pacific Daylight Time)">02:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">that's why i don't understand michael's point</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Tue Oct 08 2024 19:01:28 GMT-0700 (Pacific Daylight Time)">02:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@eli-grey:matrix.org">Eli Grey</span>&gt;</div></td><td class="msg-cell">insert should be the value and use a getter for the function use case in emplace imo</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Tue Oct 08 2024 19:01:35 GMT-0700 (Pacific Daylight Time)">02:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">you <em>can't</em> have a single [] be the default</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Tue Oct 08 2024 19:01:39 GMT-0700 (Pacific Daylight Time)">02:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">unless you have copy-on-write []</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Tue Oct 08 2024 19:01:59 GMT-0700 (Pacific Daylight Time)">02:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-5">@shu</span> I'm talking about doing this operation in a loop</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Tue Oct 08 2024 19:02:14 GMT-0700 (Pacific Daylight Time)">02:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">how can you lift out a default [] out of a loop?</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Tue Oct 08 2024 19:02:25 GMT-0700 (Pacific Daylight Time)">02:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">you want all the default empty arrays to be the literal same array object, which can be mutated?</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Tue Oct 08 2024 19:02:35 GMT-0700 (Pacific Daylight Time)">02:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-5">@shu</span> you can't, that's the point, you make it a callback and lift that out</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Tue Oct 08 2024 19:02:43 GMT-0700 (Pacific Daylight Time)">02:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">wat</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Tue Oct 08 2024 19:02:48 GMT-0700 (Pacific Daylight Time)">02:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">why would you make a callback at all</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Tue Oct 08 2024 19:02:55 GMT-0700 (Pacific Daylight Time)">02:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">setdefault(k, []) does the right thing?</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Tue Oct 08 2024 19:03:27 GMT-0700 (Pacific Daylight Time)">02:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-5">@shu</span> it would be more performant</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Tue Oct 08 2024 19:03:34 GMT-0700 (Pacific Daylight Time)">02:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><em>what</em></td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Tue Oct 08 2024 19:03:48 GMT-0700 (Pacific Daylight Time)">02:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><p>(joke) I guess we have to materialize ParseNode.</p><pre><code class="language-js">.emplace(key, complexExpression)
function emplace(key, value) {
    if (!this.has(key)) this.set(key, eval value);
    return this.get(key)
}
</code></pre></td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Tue Oct 08 2024 19:03:52 GMT-0700 (Pacific Daylight Time)">02:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">are you saying doing a call on a const function that returns [] is faster than directly passing in []?</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Tue Oct 08 2024 19:03:55 GMT-0700 (Pacific Daylight Time)">02:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">a shared callback that is almost never called is more performant than tons of empty arrays that end up getting GC'd</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Tue Oct 08 2024 19:04:13 GMT-0700 (Pacific Daylight Time)">02:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">oh, i see, i missed the assumption that it's rarely a hit</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Tue Oct 08 2024 19:04:20 GMT-0700 (Pacific Daylight Time)">02:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">or, rarely a miss</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Tue Oct 08 2024 19:04:40 GMT-0700 (Pacific Daylight Time)">02:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">that depends on whether your loop mostly hits or mostly misses, right?</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Tue Oct 08 2024 19:04:47 GMT-0700 (Pacific Daylight Time)">02:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">that's the benefit of using a callback in the API as well; that the default fn would almost never be called, for when it's expensive</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Tue Oct 08 2024 19:04:51 GMT-0700 (Pacific Daylight Time)">02:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">correct <span class="nick-5">@shu</span></td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Tue Oct 08 2024 19:05:04 GMT-0700 (Pacific Daylight Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">but a callback version would be more expensive when it is mostly misses</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Tue Oct 08 2024 19:05:09 GMT-0700 (Pacific Daylight Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">so it 'just depends'</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Tue Oct 08 2024 19:05:09 GMT-0700 (Pacific Daylight Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">well, what react do is good, but bad</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Tue Oct 08 2024 19:05:22 GMT-0700 (Pacific Daylight Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">they call it when it is a function</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Tue Oct 08 2024 19:05:23 GMT-0700 (Pacific Daylight Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell">Is it not possible to do both?</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Tue Oct 08 2024 19:05:29 GMT-0700 (Pacific Daylight Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">@ljharb</span> they're worried that people will write the callback inline so instead we'll be creating tons of fresh functions that need to get GC'd</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Tue Oct 08 2024 19:05:36 GMT-0700 (Pacific Daylight Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Is it not possible to do both?</blockquote></mx-reply>like react do to <code>useState</code></td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Tue Oct 08 2024 19:05:44 GMT-0700 (Pacific Daylight Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">both is good</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Tue Oct 08 2024 19:05:46 GMT-0700 (Pacific Daylight Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">most cases it's good, some cases it's footgun</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Tue Oct 08 2024 19:05:50 GMT-0700 (Pacific Daylight Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">yeah i'm fine with both</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Tue Oct 08 2024 19:05:52 GMT-0700 (Pacific Daylight Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell">I can‚Äôt attend tonight, just following chat</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Tue Oct 08 2024 19:05:59 GMT-0700 (Pacific Daylight Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">I'm fine with both</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Tue Oct 08 2024 19:06:00 GMT-0700 (Pacific Daylight Time)">02:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">both is fine too</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Tue Oct 08 2024 19:06:01 GMT-0700 (Pacific Daylight Time)">02:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell">I guess I should say allow either</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Tue Oct 08 2024 19:06:09 GMT-0700 (Pacific Daylight Time)">02:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">computeIfAbsentViaThisCallbackHere</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Tue Oct 08 2024 19:06:27 GMT-0700 (Pacific Daylight Time)">02:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i've called it <code>getOrSetIfAbsent</code> before but that name is horrible</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Tue Oct 08 2024 19:06:45 GMT-0700 (Pacific Daylight Time)">02:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">is that in Java‚Ñ¢Ô∏è 23?</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Tue Oct 08 2024 19:06:48 GMT-0700 (Pacific Daylight Time)">02:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I like <code>getOrInit</code> or <code>getOrInsert</code></td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Tue Oct 08 2024 19:06:52 GMT-0700 (Pacific Daylight Time)">02:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">maybe getOrSetIfAbsentOrPresent</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Tue Oct 08 2024 19:07:02 GMT-0700 (Pacific Daylight Time)">02:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">the callback one is <code>computeIfAbsent</code> in java, which... works...</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Tue Oct 08 2024 19:07:19 GMT-0700 (Pacific Daylight Time)">02:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><code>getWhenHasOrSetFromCallbackAndFinallyGetAgain</code></td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Tue Oct 08 2024 19:07:37 GMT-0700 (Pacific Daylight Time)">02:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell">I just meant the arg can be either a value or a function to return the value</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Tue Oct 08 2024 19:07:55 GMT-0700 (Pacific Daylight Time)">02:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell">Obviously an issue if the value you want is a function</td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Tue Oct 08 2024 19:08:01 GMT-0700 (Pacific Daylight Time)">02:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I just meant the arg can be either a value or a function to return the value</blockquote></mx-reply>yes, react do this and sometimes it's a footgun</td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Tue Oct 08 2024 19:08:09 GMT-0700 (Pacific Daylight Time)">02:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">oh, absolutely not that</td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Tue Oct 08 2024 19:08:16 GMT-0700 (Pacific Daylight Time)">02:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">functions are valid values to store in a map</td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Tue Oct 08 2024 19:08:19 GMT-0700 (Pacific Daylight Time)">02:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell">java have both:<code>putIfAbsent</code> ( = python setdefault), <code>computeIfAbsent</code> is callback version.</td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Tue Oct 08 2024 19:08:29 GMT-0700 (Pacific Daylight Time)">02:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell">But yeah emplace and emplaceWith</td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Tue Oct 08 2024 19:08:33 GMT-0700 (Pacific Daylight Time)">02:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell">Is better</td></tr>
  <tr class="msg" id="L100"><td class="ts-cell"><a class="ts" href="#L100" alt="Tue Oct 08 2024 19:08:38 GMT-0700 (Pacific Daylight Time)">02:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> functions are valid values to store in a map</blockquote></mx-reply>hIGh oRDeR functions obviously</td></tr>
  <tr class="msg" id="L101"><td class="ts-cell"><a class="ts" href="#L101" alt="Tue Oct 08 2024 19:08:42 GMT-0700 (Pacific Daylight Time)">02:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>I just meant the arg can be either a value or a function to return the value</blockquote></mx-reply>WHY DO PEOPLE KEEP DOING THIS TO THEMSELVES?!</td></tr>
  <tr class="msg" id="L102"><td class="ts-cell"><a class="ts" href="#L102" alt="Tue Oct 08 2024 19:09:03 GMT-0700 (Pacific Daylight Time)">02:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> WHY DO PEOPLE KEEP DOING THIS TO THEMSELVES?!</blockquote></mx-reply>Yeah I thought of this after the fact</td></tr>
  <tr class="msg" id="L103"><td class="ts-cell"><a class="ts" href="#L103" alt="Tue Oct 08 2024 19:09:22 GMT-0700 (Pacific Daylight Time)">02:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">when you're in react and <code>useState</code> value might be a function, you do <code>useState(() =&gt; fn)</code></td></tr>
  <tr class="msg" id="L104"><td class="ts-cell"><a class="ts" href="#L104" alt="Tue Oct 08 2024 19:09:55 GMT-0700 (Pacific Daylight Time)">02:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell">But other languages aren‚Äôt afraid of having separate methods/functions for value args and function args</td></tr>
  <tr class="msg" id="L105"><td class="ts-cell"><a class="ts" href="#L105" alt="Tue Oct 08 2024 19:10:14 GMT-0700 (Pacific Daylight Time)">02:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">how do you like extractors</td></tr>
  <tr class="msg" id="L106"><td class="ts-cell"><a class="ts" href="#L106" alt="Tue Oct 08 2024 19:10:20 GMT-0700 (Pacific Daylight Time)">02:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> java have both:<code>putIfAbsent</code> ( = python setdefault), <code>computeIfAbsent</code> is callback version.</blockquote></mx-reply>I don't like <code>putIfAbsent</code> because it doesn't suggest that it gives you the current value in the case that it's present</td></tr>
  <tr class="msg" id="L107"><td class="ts-cell"><a class="ts" href="#L107" alt="Tue Oct 08 2024 19:10:49 GMT-0700 (Pacific Daylight Time)">02:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><code>computeIfAbsent</code> doesn't really either but I guess it's more obviously going to return <em>something</em> because "compute" suggests returning something</td></tr>
  <tr class="msg" id="L108"><td class="ts-cell"><a class="ts" href="#L108" alt="Tue Oct 08 2024 19:10:57 GMT-0700 (Pacific Daylight Time)">02:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell">Go for instance has many doSomething(arg1, value) doSomethingFunc(arg1, fn) pairs</td></tr>
  <tr class="msg" id="L109"><td class="ts-cell"><a class="ts" href="#L109" alt="Tue Oct 08 2024 19:11:34 GMT-0700 (Pacific Daylight Time)">02:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">in ruby i think you'd have it take a block vs take a function, but most langs don't have blocks like that iirc</td></tr>
  <tr class="msg" id="L110"><td class="ts-cell"><a class="ts" href="#L110" alt="Tue Oct 08 2024 19:11:36 GMT-0700 (Pacific Daylight Time)">02:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell">The naming doesn‚Äôt align obviously with ES style, but the pairing is fine and easy to grok</td></tr>
  <tr class="msg" id="L111"><td class="ts-cell"><a class="ts" href="#L111" alt="Tue Oct 08 2024 19:12:00 GMT-0700 (Pacific Daylight Time)">02:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">well naming is that hard, let's call it <code>Map.prototype['007ae09e-b0e5-4939-b6f0-210e46f70538']</code></td></tr>
  <tr class="msg" id="L112"><td class="ts-cell"><a class="ts" href="#L112" alt="Tue Oct 08 2024 19:12:30 GMT-0700 (Pacific Daylight Time)">02:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@eli-grey:matrix.org">Eli Grey</span>&gt;</div></td><td class="msg-cell">getters are good for this</td></tr>
  <tr class="msg" id="L113"><td class="ts-cell"><a class="ts" href="#L113" alt="Tue Oct 08 2024 19:12:43 GMT-0700 (Pacific Daylight Time)">02:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell">setDefault and setDefaultWith</td></tr>
  <tr class="msg" id="L114"><td class="ts-cell"><a class="ts" href="#L114" alt="Tue Oct 08 2024 19:13:03 GMT-0700 (Pacific Daylight Time)">02:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> well naming is that hard, let's call it <code>Map.prototype['007ae09e-b0e5-4939-b6f0-210e46f70538']</code></blockquote></mx-reply>advantage of this is that people will inevitably alias that string to something useful, and then we can just look at whatever name people are actually using</td></tr>
  <tr class="msg" id="L115"><td class="ts-cell"><a class="ts" href="#L115" alt="Tue Oct 08 2024 19:13:15 GMT-0700 (Pacific Daylight Time)">02:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">lol</td></tr>
  <tr class="msg" id="L116"><td class="ts-cell"><a class="ts" href="#L116" alt="Tue Oct 08 2024 19:13:21 GMT-0700 (Pacific Daylight Time)">02:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> advantage of this is that people will inevitably alias that string to something useful, and then we can just look at whatever name people are actually using</blockquote></mx-reply>Pave the cow paths indeed</td></tr>
  <tr class="msg" id="L117"><td class="ts-cell"><a class="ts" href="#L117" alt="Tue Oct 08 2024 19:13:25 GMT-0700 (Pacific Daylight Time)">02:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">"delegated bikeshedding"</td></tr>
  <tr class="msg" id="L118"><td class="ts-cell"><a class="ts" href="#L118" alt="Tue Oct 08 2024 19:13:41 GMT-0700 (Pacific Daylight Time)">02:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">"the masses have spoken"</td></tr>
  <tr class="msg" id="L119"><td class="ts-cell"><a class="ts" href="#L119" alt="Tue Oct 08 2024 19:13:56 GMT-0700 (Pacific Daylight Time)">02:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell">I think we have a new standard for APIs we can‚Äôt name</td></tr>
  <tr class="msg" id="L120"><td class="ts-cell"><a class="ts" href="#L120" alt="Tue Oct 08 2024 19:13:58 GMT-0700 (Pacific Daylight Time)">02:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> advantage of this is that people will inevitably alias that string to something useful, and then we can just look at whatever name people are actually using</blockquote></mx-reply>this reminds me, does delegate investigated similar utilities on npm?</td></tr>
  <tr class="msg" id="L121"><td class="ts-cell"><a class="ts" href="#L121" alt="Tue Oct 08 2024 19:14:13 GMT-0700 (Pacific Daylight Time)">02:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell">Someone will still be mad about the UUID we chose</td></tr>
  <tr class="msg" id="L122"><td class="ts-cell"><a class="ts" href="#L122" alt="Tue Oct 08 2024 19:14:51 GMT-0700 (Pacific Daylight Time)">02:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <code>computeIfAbsent</code> doesn't really either but I guess it's more obviously going to return <em>something</em> because "compute" suggests returning something</blockquote></mx-reply>So it's just naming issue? To be honest, in many cases I always expect <code>Map.set</code> would return the value instead of the map itself ü§®</td></tr>
  <tr class="msg" id="L123"><td class="ts-cell"><a class="ts" href="#L123" alt="Tue Oct 08 2024 19:15:15 GMT-0700 (Pacific Daylight Time)">02:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>this reminds me, does delegate investigated similar utilities on npm?</blockquote></mx-reply>I think people mostly just do this pattern inline rather than rely on an npm package for it</td></tr>
  <tr class="msg" id="L124"><td class="ts-cell"><a class="ts" href="#L124" alt="Tue Oct 08 2024 19:15:34 GMT-0700 (Pacific Daylight Time)">02:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Someone will still be mad about the UUID we chose</blockquote></mx-reply>map['2024-10-09T02:14:57.500Z'](key, value)</td></tr>
  <tr class="msg" id="L125"><td class="ts-cell"><a class="ts" href="#L125" alt="Tue Oct 08 2024 19:15:59 GMT-0700 (Pacific Daylight Time)">02:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I think people mostly just do this pattern inline rather than rely on an npm package for it</blockquote></mx-reply>yes I write this inline, but we have <code>is-odd</code> on npm so definitely we'll have emplace on npm</td></tr>
  <tr class="msg" id="L126"><td class="ts-cell"><a class="ts" href="#L126" alt="Tue Oct 08 2024 19:16:07 GMT-0700 (Pacific Daylight Time)">02:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> in ruby i think you'd have it take a block vs take a function, but most langs don't have blocks like that iirc</blockquote></mx-reply>Really hope JS can have block. Does "Block param" proposal still alive?</td></tr>
  <tr class="msg" id="L127"><td class="ts-cell"><a class="ts" href="#L127" alt="Tue Oct 08 2024 19:16:16 GMT-0700 (Pacific Daylight Time)">02:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">not that i know of</td></tr>
  <tr class="msg" id="L128"><td class="ts-cell"><a class="ts" href="#L128" alt="Tue Oct 08 2024 19:16:43 GMT-0700 (Pacific Daylight Time)">02:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Really hope JS can have block. Does "Block param" proposal still alive?</blockquote></mx-reply>realize a block is also a kind of "function"</td></tr>
  <tr class="msg" id="L129"><td class="ts-cell"><a class="ts" href="#L129" alt="Tue Oct 08 2024 19:16:56 GMT-0700 (Pacific Daylight Time)">02:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">it contains context and can be executed right?</td></tr>
  <tr class="msg" id="L130"><td class="ts-cell"><a class="ts" href="#L130" alt="Tue Oct 08 2024 19:17:01 GMT-0700 (Pacific Daylight Time)">02:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Really hope JS can have block. Does "Block param" proposal still alive?</blockquote></mx-reply>Neither a ruby or smalltalk guy, what‚Äôs the advantage of blocks?</td></tr>
  <tr class="msg" id="L131"><td class="ts-cell"><a class="ts" href="#L131" alt="Tue Oct 08 2024 19:18:06 GMT-0700 (Pacific Daylight Time)">02:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Neither a ruby or smalltalk guy, what‚Äôs the advantage of blocks?</blockquote></mx-reply><p>IMO mostly syntax sugar, may look like</p><pre><code class="language-js">x.map { it + 1 }
</code></pre></td></tr>
  <tr class="msg" id="L132"><td class="ts-cell"><a class="ts" href="#L132" alt="Tue Oct 08 2024 19:18:43 GMT-0700 (Pacific Daylight Time)">02:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>IMO mostly syntax sugar, may look like</p><pre><code class="language-js">x.map { it + 1 }
</code></pre></blockquote></mx-reply>Ah shorthand a la Kotlin, Scala, etc</td></tr>
  <tr class="msg" id="L133"><td class="ts-cell"><a class="ts" href="#L133" alt="Tue Oct 08 2024 19:21:17 GMT-0700 (Pacific Daylight Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">but it doesn't have a function stack frame/overhead, ideally</td></tr>
  <tr class="msg" id="L134"><td class="ts-cell"><a class="ts" href="#L134" alt="Tue Oct 08 2024 19:21:24 GMT-0700 (Pacific Daylight Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell">The difference between the arrow function and real block may be the real block might support non-local jump (I believe block param proposal has the issue to discuss that, also do expression proposal)</td></tr>
  <tr class="msg" id="L135"><td class="ts-cell"><a class="ts" href="#L135" alt="Tue Oct 08 2024 19:22:45 GMT-0700 (Pacific Daylight Time)">02:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> but it doesn't have a function stack frame/overhead, ideally</blockquote></mx-reply>How do you close over then?  Or can it not?</td></tr>
  <tr class="msg" id="L136"><td class="ts-cell"><a class="ts" href="#L136" alt="Tue Oct 08 2024 19:23:02 GMT-0700 (Pacific Daylight Time)">02:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">it does close over things, true</td></tr>
  <tr class="msg" id="L137"><td class="ts-cell"><a class="ts" href="#L137" alt="Tue Oct 08 2024 19:23:25 GMT-0700 (Pacific Daylight Time)">02:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> The difference between the arrow function and real block may be the real block might support non-local jump (I believe block param proposal has the issue to discuss that, also do expression proposal)</blockquote></mx-reply>non-local jump sound worse</td></tr>
  <tr class="msg" id="L138"><td class="ts-cell"><a class="ts" href="#L138" alt="Tue Oct 08 2024 19:24:03 GMT-0700 (Pacific Daylight Time)">02:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell">In Kotlin { it + 1 } just desugars to (X) -&gt; X + 1</td></tr>
  <tr class="msg" id="L139"><td class="ts-cell"><a class="ts" href="#L139" alt="Tue Oct 08 2024 19:24:41 GMT-0700 (Pacific Daylight Time)">02:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>non-local jump sound worse</blockquote></mx-reply>tell that to the people who want do expressions to have it</td></tr>
  <tr class="msg" id="L140"><td class="ts-cell"><a class="ts" href="#L140" alt="Tue Oct 08 2024 19:25:11 GMT-0700 (Pacific Daylight Time)">02:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">huh apparently safari tech preview is already shipping Math.sumPrecise, nice</td></tr>
  <tr class="msg" id="L141"><td class="ts-cell"><a class="ts" href="#L141" alt="Tue Oct 08 2024 19:25:21 GMT-0700 (Pacific Daylight Time)">02:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">unfortunately a port of my dumb polyfill to C++ instead of something faster</td></tr>
  <tr class="msg" id="L142"><td class="ts-cell"><a class="ts" href="#L142" alt="Tue Oct 08 2024 19:25:48 GMT-0700 (Pacific Daylight Time)">02:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> tell that to the people who want do expressions to have it</blockquote></mx-reply>I also against do expression with <code>return/break/continue</code></td></tr>
  <tr class="msg" id="L143"><td class="ts-cell"><a class="ts" href="#L143" alt="Tue Oct 08 2024 19:25:59 GMT-0700 (Pacific Daylight Time)">02:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> non-local jump sound worse</blockquote></mx-reply>maybe i am wrong about that. I mean something like <code><a href="http://a.map">a.map</a> {  if (it != null) compute(it); else break }</code></td></tr>
  <tr class="msg" id="L144"><td class="ts-cell"><a class="ts" href="#L144" alt="Tue Oct 08 2024 19:26:16 GMT-0700 (Pacific Daylight Time)">02:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I also against do expression with <code>return/break/continue</code></blockquote></mx-reply>But it's useful in many cases.</td></tr>
  <tr class="msg" id="L145"><td class="ts-cell"><a class="ts" href="#L145" alt="Tue Oct 08 2024 19:26:21 GMT-0700 (Pacific Daylight Time)">02:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> unfortunately a port of my dumb polyfill to C++ instead of something faster</blockquote></mx-reply>(apparently the library I linked fails some of my tests; I'll need to try it and see if it can be fixed)</td></tr>
  <tr class="msg" id="L146"><td class="ts-cell"><a class="ts" href="#L146" alt="Tue Oct 08 2024 19:26:23 GMT-0700 (Pacific Daylight Time)">02:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>I also against do expression with <code>return/break/continue</code></blockquote></mx-reply>yes but unfortunately there's people who are adamant that it allow them</td></tr>
  <tr class="msg" id="L147"><td class="ts-cell"><a class="ts" href="#L147" alt="Tue Oct 08 2024 19:26:35 GMT-0700 (Pacific Daylight Time)">02:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">also they don't have a fast-path for "array of all numbers" which, I don't know if JSC has a concept of "array of all numbers"</td></tr>
  <tr class="msg" id="L148"><td class="ts-cell"><a class="ts" href="#L148" alt="Tue Oct 08 2024 19:26:59 GMT-0700 (Pacific Daylight Time)">02:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> maybe i am wrong about that. I mean something like <code><a href="http://a.map">a.map</a> {  if (it != null) compute(it); else break }</code></blockquote></mx-reply>So you want a loop, but make it feel functional?</td></tr>
  <tr class="msg" id="L149"><td class="ts-cell"><a class="ts" href="#L149" alt="Tue Oct 08 2024 19:27:05 GMT-0700 (Pacific Daylight Time)">02:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">(sumPrecise was designed to avoid any user code in the hot loop specifically so that you could have that optimization)</td></tr>
  <tr class="msg" id="L150"><td class="ts-cell"><a class="ts" href="#L150" alt="Tue Oct 08 2024 19:27:22 GMT-0700 (Pacific Daylight Time)">02:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">this is a very good question and a very good answer</td></tr>
  <tr class="msg" id="L151"><td class="ts-cell"><a class="ts" href="#L151" alt="Tue Oct 08 2024 19:28:41 GMT-0700 (Pacific Daylight Time)">02:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>So you want a loop, but make it feel functional?</blockquote></mx-reply>more like "you want reduce but you want to call it map"</td></tr>
  <tr class="msg" id="L152"><td class="ts-cell"><a class="ts" href="#L152" alt="Tue Oct 08 2024 19:29:31 GMT-0700 (Pacific Daylight Time)">02:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> So you want a loop, but make it feel functional?</blockquote></mx-reply>As I understand, block param proposal has the motivation to make JS more DSL friendly. As such motivate, I say yes.</td></tr>
  <tr class="msg" id="L153"><td class="ts-cell"><a class="ts" href="#L153" alt="Tue Oct 08 2024 19:30:01 GMT-0700 (Pacific Daylight Time)">02:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><pre><code class="language-js">const { id: Number(id) } = JSON.parse(str)
</code></pre></td></tr>
  <tr class="msg" id="L154"><td class="ts-cell"><a class="ts" href="#L154" alt="Tue Oct 08 2024 19:30:22 GMT-0700 (Pacific Daylight Time)">02:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">ljharb</span>: help me understand better stack trace there?  that sounds harder to debug</td></tr>
  <tr class="msg" id="L155"><td class="ts-cell"><a class="ts" href="#L155" alt="Tue Oct 08 2024 19:31:06 GMT-0700 (Pacific Daylight Time)">02:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">currently it gives a stack trace that points to the validation function, and then below that, the validator callsite. there's a possibility for a clearer error imo that points to the function signature and references extractors in the message</td></tr>
  <tr class="msg" id="L156"><td class="ts-cell"><a class="ts" href="#L156" alt="Tue Oct 08 2024 19:31:21 GMT-0700 (Pacific Daylight Time)">02:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">hmm</td></tr>
  <tr class="msg" id="L157"><td class="ts-cell"><a class="ts" href="#L157" alt="Tue Oct 08 2024 19:31:25 GMT-0700 (Pacific Daylight Time)">02:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> As I understand, block param proposal has the motivation to make JS more DSL friendly. As such motivate, I say yes.</blockquote></mx-reply>I‚Äôm all for desugaring syntax, but I don‚Äôt want to get to F# computed expressions levels of complexity</td></tr>
  <tr class="msg" id="L158"><td class="ts-cell"><a class="ts" href="#L158" alt="Tue Oct 08 2024 19:33:07 GMT-0700 (Pacific Daylight Time)">02:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> more like "you want reduce but you want to call it map"</blockquote></mx-reply>If only name issue, let's change <code>map</code> to something else , eg. <code>collect</code>? üòÇ</td></tr>
  <tr class="msg" id="L159"><td class="ts-cell"><a class="ts" href="#L159" alt="Tue Oct 08 2024 19:39:13 GMT-0700 (Pacific Daylight Time)">02:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell">Is it just me (not on the call), but when the chat dies out suddenly, do you wonder if Matrix just tipped over or was there a break?</td></tr>
  <tr class="msg" id="L160"><td class="ts-cell"><a class="ts" href="#L160" alt="Tue Oct 08 2024 19:41:15 GMT-0700 (Pacific Daylight Time)">02:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">or everyone is paying real close attention to the slides...</td></tr>
  <tr class="msg" id="L161"><td class="ts-cell"><a class="ts" href="#L161" alt="Tue Oct 08 2024 19:41:28 GMT-0700 (Pacific Daylight Time)">02:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">Syntactically correct TypeScript will emit JS even if the type checks fail.  (And sometimes it will emit JS even if the syntax is invalid.)</td></tr>
  <tr class="msg" id="L162"><td class="ts-cell"><a class="ts" href="#L162" alt="Tue Oct 08 2024 19:42:46 GMT-0700 (Pacific Daylight Time)">02:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">right</td></tr>
  <tr class="msg" id="L163"><td class="ts-cell"><a class="ts" href="#L163" alt="Tue Oct 08 2024 19:42:54 GMT-0700 (Pacific Daylight Time)">02:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">but that doesn't conflict with what i'm asking</td></tr>
  <tr class="msg" id="L164"><td class="ts-cell"><a class="ts" href="#L164" alt="Tue Oct 08 2024 19:46:46 GMT-0700 (Pacific Daylight Time)">02:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Syntactically correct TypeScript will emit JS even if the type checks fail.  (And sometimes it will emit JS even if the syntax is invalid.)</blockquote></mx-reply>yeah , last week someone tell me it's surprise to see <code>import {x} "path"</code> (missing <code>from</code>) still work in ts...</td></tr>
  <tr class="msg" id="L165"><td class="ts-cell"><a class="ts" href="#L165" alt="Tue Oct 08 2024 19:47:22 GMT-0700 (Pacific Daylight Time)">02:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">My favourite is automatic brace insertion in ts.</td></tr>
  <tr class="msg" id="L166"><td class="ts-cell"><a class="ts" href="#L166" alt="Tue Oct 08 2024 19:47:36 GMT-0700 (Pacific Daylight Time)">02:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@canadahonk:matrix.org">canadahonk</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> My favourite is automatic brace insertion in ts.</blockquote></mx-reply>what</td></tr>
  <tr class="msg" id="L167"><td class="ts-cell"><a class="ts" href="#L167" alt="Tue Oct 08 2024 19:48:10 GMT-0700 (Pacific Daylight Time)">02:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">(sorry this is a distraction from current topic - it should be in TDZ)</td></tr>
  <tr class="msg" id="L168"><td class="ts-cell"><a class="ts" href="#L168" alt="Tue Oct 08 2024 19:48:14 GMT-0700 (Pacific Daylight Time)">02:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell"><p>if you write</p>
<pre><code>if (x) {
//forgot a brace here
</code></pre>
<p>TypeScript gracefully recovers parsing, tells you you forgot a brace, and just re-prints it the right way</p>
<pre><code>if (x) {
}
</code></pre>
</td></tr>
  <tr class="msg" id="L169"><td class="ts-cell"><a class="ts" href="#L169" alt="Tue Oct 08 2024 19:48:24 GMT-0700 (Pacific Daylight Time)">02:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> My favourite is automatic brace insertion in ts.</blockquote></mx-reply>Not the ABI we are looking for</td></tr>
  <tr class="msg" id="L170"><td class="ts-cell"><a class="ts" href="#L170" alt="Tue Oct 08 2024 19:57:46 GMT-0700 (Pacific Daylight Time)">02:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell"><p>Found this one recently. TS supports Python scoping</p>
<pre><code>function f() {
    if (true)
        type s = string;
        console.log("s" as s);
}
</code></pre>
</td></tr>
  <tr class="msg" id="L171"><td class="ts-cell"><a class="ts" href="#L171" alt="Tue Oct 08 2024 19:58:49 GMT-0700 (Pacific Daylight Time)">02:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>Found this one recently. TS supports Python scoping</p>
<pre><code>function f() {
    if (true)
        type s = string;
        console.log("s" as s);
}
</code></pre>
</blockquote></mx-reply>Can you file a bug?</td></tr>
  <tr class="msg" id="L172"><td class="ts-cell"><a class="ts" href="#L172" alt="Tue Oct 08 2024 19:59:24 GMT-0700 (Pacific Daylight Time)">02:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">Or I'll file a bug if I can</td></tr>
  <tr class="msg" id="L173"><td class="ts-cell"><a class="ts" href="#L173" alt="Tue Oct 08 2024 19:59:31 GMT-0700 (Pacific Daylight Time)">02:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">Either way nice find!</td></tr>
  <tr class="msg" id="L174"><td class="ts-cell"><a class="ts" href="#L174" alt="Tue Oct 08 2024 20:00:37 GMT-0700 (Pacific Daylight Time)">03:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">will do!</td></tr>
  <tr class="msg" id="L175"><td class="ts-cell"><a class="ts" href="#L175" alt="Tue Oct 08 2024 20:01:23 GMT-0700 (Pacific Daylight Time)">03:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">.... what do you even do about that case</td></tr>
  <tr class="msg" id="L176"><td class="ts-cell"><a class="ts" href="#L176" alt="Tue Oct 08 2024 20:01:37 GMT-0700 (Pacific Daylight Time)">03:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">parse error, I guess?</td></tr>
  <tr class="msg" id="L177"><td class="ts-cell"><a class="ts" href="#L177" alt="Tue Oct 08 2024 20:02:13 GMT-0700 (Pacific Daylight Time)">03:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">possibly - we'd probably do it at checking, it gets treated more like an early error</td></tr>
  <tr class="msg" id="L178"><td class="ts-cell"><a class="ts" href="#L178" alt="Tue Oct 08 2024 20:02:42 GMT-0700 (Pacific Daylight Time)">03:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">it's a graceful parser</td></tr>
  <tr class="msg" id="L179"><td class="ts-cell"><a class="ts" href="#L179" alt="Tue Oct 08 2024 20:02:50 GMT-0700 (Pacific Daylight Time)">03:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Seems like we should have more discussions in TC39 about the architectures of various implementations, both tools and native</td></tr>
  <tr class="msg" id="L180"><td class="ts-cell"><a class="ts" href="#L180" alt="Tue Oct 08 2024 20:03:13 GMT-0700 (Pacific Daylight Time)">03:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Like presentations explaining this</td></tr>
  <tr class="msg" id="L181"><td class="ts-cell"><a class="ts" href="#L181" alt="Tue Oct 08 2024 20:04:09 GMT-0700 (Pacific Daylight Time)">03:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-5">@danielrosenwasser</span> allow it, add a grammar alternative like <code data-md="`">Statement : TypeDeclaration Statement</code></td></tr>
  <tr class="msg" id="L182"><td class="ts-cell"><a class="ts" href="#L182" alt="Tue Oct 08 2024 20:04:26 GMT-0700 (Pacific Daylight Time)">03:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">lmao</td></tr>
  <tr class="msg" id="L183"><td class="ts-cell"><a class="ts" href="#L183" alt="Tue Oct 08 2024 20:04:39 GMT-0700 (Pacific Daylight Time)">03:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">üòêÔ∏è this is my serious face</td></tr>
  <tr class="msg" id="L184"><td class="ts-cell"><a class="ts" href="#L184" alt="Tue Oct 08 2024 20:04:55 GMT-0700 (Pacific Daylight Time)">03:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">Statement ::
  Statement Statement</td></tr>
  <tr class="msg" id="L185"><td class="ts-cell"><a class="ts" href="#L185" alt="Tue Oct 08 2024 20:06:00 GMT-0700 (Pacific Daylight Time)">03:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">Likewise, I think it could be helpful to see concretely what the performance concerns are, why certain optimizations are difficult for engine implementers, etc.</td></tr>
  <tr class="msg" id="L186"><td class="ts-cell"><a class="ts" href="#L186" alt="Tue Oct 08 2024 20:06:53 GMT-0700 (Pacific Daylight Time)">03:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Yeah this feature is as expensive as a method call + array destructuring; I understand the concern about array destructuring being expensive but I don‚Äôt know what else engines are imagining that tools would do</td></tr>
  <tr class="msg" id="L187"><td class="ts-cell"><a class="ts" href="#L187" alt="Tue Oct 08 2024 20:07:38 GMT-0700 (Pacific Daylight Time)">03:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">I dont think we should block all features where people have posited impractical optimizations. We certainly would not have done iterator helpers if that were a requirement</td></tr>
  <tr class="msg" id="L188"><td class="ts-cell"><a class="ts" href="#L188" alt="Tue Oct 08 2024 20:08:13 GMT-0700 (Pacific Daylight Time)">03:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Can you file a bug?</blockquote></mx-reply><a href="https://github.com/microsoft/TypeScript/issues/60175">https://github.com/microsoft/TypeScript/issues/60175</a></td></tr>
  <tr class="msg" id="L189"><td class="ts-cell"><a class="ts" href="#L189" alt="Tue Oct 08 2024 20:10:03 GMT-0700 (Pacific Daylight Time)">03:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">But I think there's a legitimate "pit of despair" concern. Like imagine you are writing a tool that you want to be reasonably fast and you posit that pattern matching should be as fast as a <code>switch</code> on the class or something like that</td></tr>
  <tr class="msg" id="L190"><td class="ts-cell"><a class="ts" href="#L190" alt="Tue Oct 08 2024 20:20:53 GMT-0700 (Pacific Daylight Time)">03:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">I think the concern here is that we're (potentially) offering a very clean but expensive abstraction/idiom that people are trained from other languages to be zero-cost.</td></tr>
  <tr class="msg" id="L191"><td class="ts-cell"><a class="ts" href="#L191" alt="Tue Oct 08 2024 20:21:28 GMT-0700 (Pacific Daylight Time)">03:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">If this idiom is no worse in terms of performance than what people would do otherwise then I'm not concerned</td></tr>
  <tr class="msg" id="L192"><td class="ts-cell"><a class="ts" href="#L192" alt="Tue Oct 08 2024 20:22:54 GMT-0700 (Pacific Daylight Time)">03:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">But I think adding or encouraging idioms that have known to be bad performance isn't in browser user's interest and that's what I'm trying to reflect.</td></tr>
  <tr class="msg" id="L193"><td class="ts-cell"><a class="ts" href="#L193" alt="Tue Oct 08 2024 20:23:07 GMT-0700 (Pacific Daylight Time)">03:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Summary has been added.</td></tr>
  <tr class="msg" id="L194"><td class="ts-cell"><a class="ts" href="#L194" alt="Tue Oct 08 2024 20:24:17 GMT-0700 (Pacific Daylight Time)">03:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> If this idiom is no worse in terms of performance than what people would do otherwise then I'm not concerned</blockquote></mx-reply>The expectation is that <code>const Point(x, y) = p</code> is no more expensive than <code>const [x, y] = Point[Symbol.customMatcher](p, "list")</code></td></tr>
  <tr class="msg" id="L195"><td class="ts-cell"><a class="ts" href="#L195" alt="Tue Oct 08 2024 20:25:06 GMT-0700 (Pacific Daylight Time)">03:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">though if we end up not finding a solution to iterator destructuring performance and end up going with array-as-object destructuring, <code>const Point(x, y) = p</code> is potentially <em>faster</em></td></tr>
  <tr class="msg" id="L196"><td class="ts-cell"><a class="ts" href="#L196" alt="Tue Oct 08 2024 20:25:18 GMT-0700 (Pacific Daylight Time)">03:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">But it might be more expensive than: <code>if (p instanceof Point) { let x = p.x; let y = p.y ...}</code></td></tr>
  <tr class="msg" id="L197"><td class="ts-cell"><a class="ts" href="#L197" alt="Tue Oct 08 2024 20:25:43 GMT-0700 (Pacific Daylight Time)">03:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">So that's the bar to compare against</td></tr>
  <tr class="msg" id="L198"><td class="ts-cell"><a class="ts" href="#L198" alt="Tue Oct 08 2024 20:27:10 GMT-0700 (Pacific Daylight Time)">03:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">And devs just might structure their code differently without this, potentially in a way that's more performant. I'm saying that I want to be convinced they're not.</td></tr>
  <tr class="msg" id="L199"><td class="ts-cell"><a class="ts" href="#L199" alt="Tue Oct 08 2024 20:27:21 GMT-0700 (Pacific Daylight Time)">03:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">That doesn't have the expressivity we're seeking. The motivations include custom validation.</td></tr>
  <tr class="msg" id="L200"><td class="ts-cell"><a class="ts" href="#L200" alt="Tue Oct 08 2024 20:27:54 GMT-0700 (Pacific Daylight Time)">03:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">The <code>Point</code> example from my slides used brand checking via private names</td></tr>
  <tr class="msg" id="L201"><td class="ts-cell"><a class="ts" href="#L201" alt="Tue Oct 08 2024 20:28:04 GMT-0700 (Pacific Daylight Time)">03:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">That's a bummer and I would like to have that validation too but not really my concern, unfortunately.</td></tr>
  <tr class="msg" id="L202"><td class="ts-cell"><a class="ts" href="#L202" alt="Tue Oct 08 2024 20:28:42 GMT-0700 (Pacific Daylight Time)">03:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">I understand the performance concern ‚Äúthis will encourage people to use more array destructuring‚Äù. There are a number of possible remedies to that</td></tr>
  <tr class="msg" id="L203"><td class="ts-cell"><a class="ts" href="#L203" alt="Tue Oct 08 2024 20:30:03 GMT-0700 (Pacific Daylight Time)">03:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">One is using this alternative Array-like destructuring semantics, as Ron mentioned. If we want to avoid the allocation altogether, we could also limit extractors to a single argument, and then any nested array destructuring would be explicit.</td></tr>
  <tr class="msg" id="L204"><td class="ts-cell"><a class="ts" href="#L204" alt="Tue Oct 08 2024 20:30:34 GMT-0700 (Pacific Daylight Time)">03:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">It's not just the array destructuring although that's part of the concern. It's if the idiom makes sense as a whole.</td></tr>
  <tr class="msg" id="L205"><td class="ts-cell"><a class="ts" href="#L205" alt="Tue Oct 08 2024 20:30:49 GMT-0700 (Pacific Daylight Time)">03:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">The discussion got a bit abstract as to which performance concerns people had. What other ones were there apart from array destructuring cost?</td></tr>
  <tr class="msg" id="L206"><td class="ts-cell"><a class="ts" href="#L206" alt="Tue Oct 08 2024 20:31:34 GMT-0700 (Pacific Daylight Time)">03:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Or whether the idiom makes sense‚Ä¶ it is really common across languages and I have found it useful, so I am wondering if people can make their concerns more concrete.</td></tr>
  <tr class="msg" id="L207"><td class="ts-cell"><a class="ts" href="#L207" alt="Tue Oct 08 2024 20:32:02 GMT-0700 (Pacific Daylight Time)">03:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">What other dynamic languages have this?</td></tr>
  <tr class="msg" id="L208"><td class="ts-cell"><a class="ts" href="#L208" alt="Tue Oct 08 2024 20:32:15 GMT-0700 (Pacific Daylight Time)">03:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Pattern matching/extractors are definitely not linked to static typing. Python and Racket have versions</td></tr>
  <tr class="msg" id="L209"><td class="ts-cell"><a class="ts" href="#L209" alt="Tue Oct 08 2024 20:32:25 GMT-0700 (Pacific Daylight Time)">03:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Python, though they do something slightly different that the pattern matching champions group does not agree with.</td></tr>
  <tr class="msg" id="L210"><td class="ts-cell"><a class="ts" href="#L210" alt="Tue Oct 08 2024 20:32:37 GMT-0700 (Pacific Daylight Time)">03:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">It is just random cultural history that they are linked to functional/statically typed languages</td></tr>
  <tr class="msg" id="L211"><td class="ts-cell"><a class="ts" href="#L211" alt="Tue Oct 08 2024 20:33:03 GMT-0700 (Pacific Daylight Time)">03:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Erlang is dynamically typed and does tons of pattern matching</td></tr>
  <tr class="msg" id="L212"><td class="ts-cell"><a class="ts" href="#L212" alt="Tue Oct 08 2024 20:33:38 GMT-0700 (Pacific Daylight Time)">03:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Prolog for that matter, untyped and the ancestor of a lot of these ideas</td></tr>
  <tr class="msg" id="L213"><td class="ts-cell"><a class="ts" href="#L213" alt="Tue Oct 08 2024 20:35:10 GMT-0700 (Pacific Daylight Time)">03:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Elixir <a href="https://hexdocs.pm/elixir/pattern-matching.html#the-match-operator">https://hexdocs.pm/elixir/pattern-matching.html#the-match-operator</a></td></tr>
  <tr class="msg" id="L214"><td class="ts-cell"><a class="ts" href="#L214" alt="Tue Oct 08 2024 20:35:31 GMT-0700 (Pacific Daylight Time)">03:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">But are those idioms performant in those languages? Or are they just a cost people are willing to pay for convenience? </td></tr>
  <tr class="msg" id="L215"><td class="ts-cell"><a class="ts" href="#L215" alt="Tue Oct 08 2024 20:35:59 GMT-0700 (Pacific Daylight Time)">03:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Its not really a static vs dynamic language feature. C# uses <code>Deconstruct()</code> for custom extraction, and static type information to do overload disambiguation and argument matching, but compared to this the main difference is that C# uses <code>out</code> parameters, which we don't have, rather than something like iterator destructuring.</td></tr>
  <tr class="msg" id="L216"><td class="ts-cell"><a class="ts" href="#L216" alt="Tue Oct 08 2024 20:37:03 GMT-0700 (Pacific Daylight Time)">03:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">I'm not debating the convenience of the idiom. Only its potential performance impact with use.</td></tr>
  <tr class="msg" id="L217"><td class="ts-cell"><a class="ts" href="#L217" alt="Tue Oct 08 2024 20:38:13 GMT-0700 (Pacific Daylight Time)">03:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">I haven‚Äôt heard anyone talk about pattern matching as an expensive feature outside of the array destructuring issue in any other language. Some functional statically typed languages do fancy things optimizing trees of conditionals for pattern matching but others don‚Äôt.</td></tr>
  <tr class="msg" id="L218"><td class="ts-cell"><a class="ts" href="#L218" alt="Tue Oct 08 2024 20:38:44 GMT-0700 (Pacific Daylight Time)">03:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">The pattern matching proposal has some interesting mechanisms it plans to employ related to caching that have the side benefit of improving performance in a disjunction or multiple match-legs.</td></tr>
  <tr class="msg" id="L219"><td class="ts-cell"><a class="ts" href="#L219" alt="Tue Oct 08 2024 20:39:17 GMT-0700 (Pacific Daylight Time)">03:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Then that should make proving it's performant easy!</td></tr>
  <tr class="msg" id="L220"><td class="ts-cell"><a class="ts" href="#L220" alt="Tue Oct 08 2024 20:39:48 GMT-0700 (Pacific Daylight Time)">03:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">I'm not saying it's not performant only that I'd like to see non-trivial real world use cases benchmarked.</td></tr>
  <tr class="msg" id="L221"><td class="ts-cell"><a class="ts" href="#L221" alt="Tue Oct 08 2024 20:39:50 GMT-0700 (Pacific Daylight Time)">03:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>So in pattern matching something like :</p>
<pre><code class="language-js">match (x) {
  Point(0, 0): ...,
  Point(&gt;0, 0): ...,
}
</code></pre>
<p>could potentially only evaluate the custom matcher once and reuse the extracted elements on both match legs.</p>
</td></tr>
  <tr class="msg" id="L222"><td class="ts-cell"><a class="ts" href="#L222" alt="Tue Oct 08 2024 20:40:35 GMT-0700 (Pacific Daylight Time)">03:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Ruby pattern matching: <a href="https://docs.ruby-lang.org/en/master/syntax/pattern_matching_rdoc.html">https://docs.ruby-lang.org/en/master/syntax/pattern_matching_rdoc.html</a></td></tr>
  <tr class="msg" id="L223"><td class="ts-cell"><a class="ts" href="#L223" alt="Tue Oct 08 2024 20:42:23 GMT-0700 (Pacific Daylight Time)">03:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I'm not saying it's not performant only that I'd like to see non-trivial real world use cases benchmarked.</blockquote></mx-reply>Yeah this is a reasonable and good request but to be able to do it, it would help to understand what people think could go wrong. Ron has posited some possible complex optimizations but those cases could be optimized or made slower with or without pattern matching.</td></tr>
  <tr class="msg" id="L224"><td class="ts-cell"><a class="ts" href="#L224" alt="Tue Oct 08 2024 20:42:25 GMT-0700 (Pacific Daylight Time)">03:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Pattern matching caching is something I'm <em>not</em> looking forward to desugaring mostly due to the emit size of the desugaring. I'm hoping I can stash a lot of it in emit helpers in <code>tslib</code> to cut down on bundle size.</td></tr>
  <tr class="msg" id="L225"><td class="ts-cell"><a class="ts" href="#L225" alt="Tue Oct 08 2024 20:44:12 GMT-0700 (Pacific Daylight Time)">03:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>So in pattern matching something like :</p>
<pre><code class="language-js">match (x) {
  Point(0, 0): ...,
  Point(&gt;0, 0): ...,
}
</code></pre>
<p>could potentially only evaluate the custom matcher once and reuse the extracted elements on both match legs.</p>
</blockquote></mx-reply>I guess this is something we will debate in the broader pattern matching proposal. I was hoping we wouldn‚Äôt do the kind of complex caching that some versions of pattern matching had‚Äîthis might add more cost than value, given that it has to be deterministic and consistent</td></tr>
  <tr class="msg" id="L226"><td class="ts-cell"><a class="ts" href="#L226" alt="Tue Oct 08 2024 20:44:43 GMT-0700 (Pacific Daylight Time)">03:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">And the &gt;0 syntax is a whole other topic!</td></tr>
  <tr class="msg" id="L227"><td class="ts-cell"><a class="ts" href="#L227" alt="Tue Oct 08 2024 20:45:02 GMT-0700 (Pacific Daylight Time)">03:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">It's not part of the core proposal, to be clear. Its something I'd like to see but we're pushing it to a follow-on.</td></tr>
  <tr class="msg" id="L228"><td class="ts-cell"><a class="ts" href="#L228" alt="Tue Oct 08 2024 20:45:16 GMT-0700 (Pacific Daylight Time)">03:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">It's extremely useful in C#</td></tr>
  <tr class="msg" id="L229"><td class="ts-cell"><a class="ts" href="#L229" alt="Tue Oct 08 2024 20:50:32 GMT-0700 (Pacific Daylight Time)">03:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">If array destructuring is expensive and impractical to optimize, should we in TC39 be discouraging its use? For example, by encouraging transpilers to transform it into object destructuring (treating it as array-like)?</td></tr>
  <tr class="msg" id="L230"><td class="ts-cell"><a class="ts" href="#L230" alt="Tue Oct 08 2024 20:51:18 GMT-0700 (Pacific Daylight Time)">03:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">I don‚Äôt like this idea personally but if this is such a big problem that we can‚Äôt build other features on it‚Ä¶</td></tr>
  <tr class="msg" id="L231"><td class="ts-cell"><a class="ts" href="#L231" alt="Tue Oct 08 2024 21:00:21 GMT-0700 (Pacific Daylight Time)">04:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">yes, code which cares about performance does specifically write <code>{ 0: foo, 1: bar } =</code> instead of <code>[foo, bar] =</code></td></tr>
  <tr class="msg" id="L232"><td class="ts-cell"><a class="ts" href="#L232" alt="Tue Oct 08 2024 21:00:31 GMT-0700 (Pacific Daylight Time)">04:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">transpilers can't do this without type information</td></tr>
  <tr class="msg" id="L233"><td class="ts-cell"><a class="ts" href="#L233" alt="Tue Oct 08 2024 21:01:00 GMT-0700 (Pacific Daylight Time)">04:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">I wonder if it be web-compat, and also more performant, to change iterator destructuring to be specced as property access if the RHS passes <code>Array.isArray</code> ? i.e. assume the array's iterator will be the default one</td></tr>
  <tr class="msg" id="L234"><td class="ts-cell"><a class="ts" href="#L234" alt="Tue Oct 08 2024 21:01:45 GMT-0700 (Pacific Daylight Time)">04:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">It's significantly faster to do <code>const { 0: x, 1: setX } = useState()</code> in React, but its rare to see that done.</td></tr>
  <tr class="msg" id="L235"><td class="ts-cell"><a class="ts" href="#L235" alt="Tue Oct 08 2024 21:02:08 GMT-0700 (Pacific Daylight Time)">04:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">That's an interesting idea! No idea if it's compatible though.</td></tr>
  <tr class="msg" id="L236"><td class="ts-cell"><a class="ts" href="#L236" alt="Tue Oct 08 2024 21:02:18 GMT-0700 (Pacific Daylight Time)">04:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I wonder if it be web-compat, and also more performant, to change iterator destructuring to be specced as property access if the RHS passes <code>Array.isArray</code> ? i.e. assume the array's iterator will be the default one</blockquote></mx-reply>... tempting... and I would guess probably compatible?</td></tr>
  <tr class="msg" id="L237"><td class="ts-cell"><a class="ts" href="#L237" alt="Tue Oct 08 2024 21:02:44 GMT-0700 (Pacific Daylight Time)">04:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">though it might need to be "<code>isArray</code> and also not a proxy", potentially</td></tr>
  <tr class="msg" id="L238"><td class="ts-cell"><a class="ts" href="#L238" alt="Tue Oct 08 2024 21:02:50 GMT-0700 (Pacific Daylight Time)">04:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">proxies :(</td></tr>
  <tr class="msg" id="L239"><td class="ts-cell"><a class="ts" href="#L239" alt="Tue Oct 08 2024 21:03:00 GMT-0700 (Pacific Daylight Time)">04:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@canadahonk:matrix.org">canadahonk</span>&gt;</div></td><td class="msg-cell">I do basically this internally (sorry spec)</td></tr>
  <tr class="msg" id="L240"><td class="ts-cell"><a class="ts" href="#L240" alt="Tue Oct 08 2024 21:04:02 GMT-0700 (Pacific Daylight Time)">04:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@canadahonk:matrix.org">canadahonk</span>&gt;</div></td><td class="msg-cell">it definitely fails some test262 tests though</td></tr>
  <tr class="msg" id="L241"><td class="ts-cell"><a class="ts" href="#L241" alt="Tue Oct 08 2024 21:04:34 GMT-0700 (Pacific Daylight Time)">04:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">How many people use <code>for..of</code> over arrays today? I assume that still isn't optimized for Array vs other iterators.</td></tr>
  <tr class="msg" id="L242"><td class="ts-cell"><a class="ts" href="#L242" alt="Tue Oct 08 2024 21:05:34 GMT-0700 (Pacific Daylight Time)">04:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I am almost certain that's optimized in JSC, at least</td></tr>
  <tr class="msg" id="L243"><td class="ts-cell"><a class="ts" href="#L243" alt="Tue Oct 08 2024 21:05:49 GMT-0700 (Pacific Daylight Time)">04:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">and would kind of expect it to be in V8 but it's been a while since I looked</td></tr>
  <tr class="msg" id="L244"><td class="ts-cell"><a class="ts" href="#L244" alt="Tue Oct 08 2024 21:05:57 GMT-0700 (Pacific Daylight Time)">04:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">we suck at it still i think</td></tr>
  <tr class="msg" id="L245"><td class="ts-cell"><a class="ts" href="#L245" alt="Tue Oct 08 2024 21:06:22 GMT-0700 (Pacific Daylight Time)">04:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">If you can optimize <code>for..of</code> why not <code>const [x, y] =</code>?</td></tr>
  <tr class="msg" id="L246"><td class="ts-cell"><a class="ts" href="#L246" alt="Tue Oct 08 2024 21:07:43 GMT-0700 (Pacific Daylight Time)">04:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">we can do <em>something</em> for <code>const [x,y]</code> probably, but it's not going to be parity with object destructuring, will have a perf cliff for non-Arrays and a bunch of other bailout paths (which is also a increased attack surface)</td></tr>
  <tr class="msg" id="L247"><td class="ts-cell"><a class="ts" href="#L247" alt="Tue Oct 08 2024 21:07:56 GMT-0700 (Pacific Daylight Time)">04:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">there're a lot of undesirables hidden behind "why not optimize this other pattern"</td></tr>
  <tr class="msg" id="L248"><td class="ts-cell"><a class="ts" href="#L248" alt="Tue Oct 08 2024 21:09:25 GMT-0700 (Pacific Daylight Time)">04:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I expect most destructuring is array to array, but I don't have metrics to back that up.</td></tr>
  <tr class="msg" id="L249"><td class="ts-cell"><a class="ts" href="#L249" alt="Tue Oct 08 2024 21:09:54 GMT-0700 (Pacific Daylight Time)">04:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I'd be perfectly happy with Array being fast and other iterators being slower, since the alternative is both are slower.</td></tr>
  <tr class="msg" id="L250"><td class="ts-cell"><a class="ts" href="#L250" alt="Tue Oct 08 2024 21:10:43 GMT-0700 (Pacific Daylight Time)">04:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">yeah i agree it's worth optimizing that?</td></tr>
  <tr class="msg" id="L251"><td class="ts-cell"><a class="ts" href="#L251" alt="Tue Oct 08 2024 21:10:48 GMT-0700 (Pacific Daylight Time)">04:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">React alone should be enough of a reason to optimize array to array destructuring, but I'm working on some benchmarking to get an understanding of the actual effect it has.</td></tr>
  <tr class="msg" id="L252"><td class="ts-cell"><a class="ts" href="#L252" alt="Tue Oct 08 2024 21:11:02 GMT-0700 (Pacific Daylight Time)">04:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">It is very optimized in JSC (modulo the iterator object itself being allocated)</td></tr>
  <tr class="msg" id="L253"><td class="ts-cell"><a class="ts" href="#L253" alt="Tue Oct 08 2024 21:11:25 GMT-0700 (Pacific Daylight Time)">04:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">I thought V8 had already done that</td></tr>
  <tr class="msg" id="L254"><td class="ts-cell"><a class="ts" href="#L254" alt="Tue Oct 08 2024 21:11:40 GMT-0700 (Pacific Daylight Time)">04:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@justingrant:matrix.org">justingrant</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> 7 years, wow</blockquote></mx-reply>You think it's wow from the outside, imagine feeling those years from the inside!  Although I only joined the Temporal champion 4.5 years ago so I'm still a fresh n00b. üòÄ</td></tr>
  <tr class="msg" id="L255"><td class="ts-cell"><a class="ts" href="#L255" alt="Tue Oct 08 2024 21:11:43 GMT-0700 (Pacific Daylight Time)">04:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i don't actually know, lemme see</td></tr>
  <tr class="msg" id="L256"><td class="ts-cell"><a class="ts" href="#L256" alt="Tue Oct 08 2024 21:11:44 GMT-0700 (Pacific Daylight Time)">04:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Yes they can‚Äîtsc does it in some emit modes unconditionally! (When emitting es5)</td></tr>
  <tr class="msg" id="L257"><td class="ts-cell"><a class="ts" href="#L257" alt="Tue Oct 08 2024 21:12:03 GMT-0700 (Pacific Daylight Time)">04:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">sorry, without also breaking some other code</td></tr>
  <tr class="msg" id="L258"><td class="ts-cell"><a class="ts" href="#L258" alt="Tue Oct 08 2024 21:12:07 GMT-0700 (Pacific Daylight Time)">04:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> How many people use <code>for..of</code> over arrays today? I assume that still isn't optimized for Array vs other iterators.</blockquote></mx-reply>almost all of my code is <code>for..of</code> even it might be slow. readibility &gt; performance when the code is not in a hot path</td></tr>
  <tr class="msg" id="L259"><td class="ts-cell"><a class="ts" href="#L259" alt="Tue Oct 08 2024 21:12:11 GMT-0700 (Pacific Daylight Time)">04:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell"><a href="https://docs.google.com/document/d/1hWb-lQW4NSG9yRpyyiAA_9Ktytd5lypLnVLhPX9vamE/edit?tab=t.0#heading=h.9ss45aibqpw2">https://docs.google.com/document/d/1hWb-lQW4NSG9yRpyyiAA_9Ktytd5lypLnVLhPX9vamE/edit?tab=t.0#heading=h.9ss45aibqpw2</a></td></tr>
  <tr class="msg" id="L260"><td class="ts-cell"><a class="ts" href="#L260" alt="Tue Oct 08 2024 21:12:16 GMT-0700 (Pacific Daylight Time)">04:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">TSC only does that for <code>--target ES5</code> where there is no expectation of <code>Symbol.iterator</code>.</td></tr>
  <tr class="msg" id="L261"><td class="ts-cell"><a class="ts" href="#L261" alt="Tue Oct 08 2024 21:12:37 GMT-0700 (Pacific Daylight Time)">04:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> sorry, without also breaking some other code</blockquote></mx-reply>If you care about breaking other code, then you might need runtime support to check that no one messed with Array.prototype</td></tr>
  <tr class="msg" id="L262"><td class="ts-cell"><a class="ts" href="#L262" alt="Tue Oct 08 2024 21:12:39 GMT-0700 (Pacific Daylight Time)">04:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">And we have <code>--downevelIteration</code> to emulate actual ES2015+ semantics.</td></tr>
  <tr class="msg" id="L263"><td class="ts-cell"><a class="ts" href="#L263" alt="Tue Oct 08 2024 21:13:22 GMT-0700 (Pacific Daylight Time)">04:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Yes sorry that wasn‚Äôt meant as a tsc critique</td></tr>
  <tr class="msg" id="L264"><td class="ts-cell"><a class="ts" href="#L264" alt="Tue Oct 08 2024 21:13:59 GMT-0700 (Pacific Daylight Time)">04:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">But generally: if we want transpilers to do unsound things (like around TDZ) that is something we as a committee can say</td></tr>
  <tr class="msg" id="L265"><td class="ts-cell"><a class="ts" href="#L265" alt="Tue Oct 08 2024 21:14:14 GMT-0700 (Pacific Daylight Time)">04:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Even in the <code>--downlevelIteration</code> case we use a runtime helper to emulate an iterator over an array, rather than bake that into the actual loop.</td></tr>
  <tr class="msg" id="L266"><td class="ts-cell"><a class="ts" href="#L266" alt="Tue Oct 08 2024 21:14:30 GMT-0700 (Pacific Daylight Time)">04:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">so the emit remains the same regardless as to the type of the iterated object</td></tr>
  <tr class="msg" id="L267"><td class="ts-cell"><a class="ts" href="#L267" alt="Tue Oct 08 2024 21:14:41 GMT-0700 (Pacific Daylight Time)">04:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <a href="https://docs.google.com/document/d/1hWb-lQW4NSG9yRpyyiAA_9Ktytd5lypLnVLhPX9vamE/edit?tab=t.0#heading=h.9ss45aibqpw2">https://docs.google.com/document/d/1hWb-lQW4NSG9yRpyyiAA_9Ktytd5lypLnVLhPX9vamE/edit?tab=t.0#heading=h.9ss45aibqpw2</a></blockquote></mx-reply>oh cool. looks like we didn't actually land any of the talked about solutions though? the bytecode still looks pretty bad to me</td></tr>
  <tr class="msg" id="L268"><td class="ts-cell"><a class="ts" href="#L268" alt="Tue Oct 08 2024 21:14:48 GMT-0700 (Pacific Daylight Time)">04:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">I dunno if we should do such unsound downlevelings but I don‚Äôt know what else would actually meet what the browsers seem to be expecting</td></tr>
  <tr class="msg" id="L269"><td class="ts-cell"><a class="ts" href="#L269" alt="Tue Oct 08 2024 21:14:59 GMT-0700 (Pacific Daylight Time)">04:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">the quickest way to make sure that happens is to make it show up in speedometer or the new jetstream</td></tr>
  <tr class="msg" id="L270"><td class="ts-cell"><a class="ts" href="#L270" alt="Tue Oct 08 2024 21:15:12 GMT-0700 (Pacific Daylight Time)">04:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell"><p>is it a really bad idea to have a 3rd form of destructuring for array-like?</p>
<pre><code>const |a, b, c| = multiReturnFunction(); // probably a better token is available
// is
const { 0: a, 1: b, 2: c } = multiReturnFunction();
</code></pre>
</td></tr>
  <tr class="msg" id="L271"><td class="ts-cell"><a class="ts" href="#L271" alt="Tue Oct 08 2024 21:16:28 GMT-0700 (Pacific Daylight Time)">04:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> The expectation is that <code>const Point(x, y) = p</code> is no more expensive than <code>const [x, y] = Point[Symbol.customMatcher](p, "list")</code></blockquote></mx-reply>Sorry getting back to this but while yes <code>const Point(x, y) = p</code> isn't more expensive than that <code>const Optional.Some(Point.2D(x, y)) = o</code> would likely decode to 20-30 byte codes in JSC</td></tr>
  <tr class="msg" id="L272"><td class="ts-cell"><a class="ts" href="#L272" alt="Tue Oct 08 2024 21:16:33 GMT-0700 (Pacific Daylight Time)">04:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><code>let |a, </code> is ambiguous</td></tr>
  <tr class="msg" id="L273"><td class="ts-cell"><a class="ts" href="#L273" alt="Tue Oct 08 2024 21:17:07 GMT-0700 (Pacific Daylight Time)">04:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">one R&amp;T design was <code>[| a, b, c |]</code>, maybe could be more like that?</td></tr>
  <tr class="msg" id="L274"><td class="ts-cell"><a class="ts" href="#L274" alt="Tue Oct 08 2024 21:18:05 GMT-0700 (Pacific Daylight Time)">04:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Sorry getting back to this but while yes <code>const Point(x, y) = p</code> isn't more expensive than that <code>const Optional.Some(Point.2D(x, y)) = o</code> would likely decode to 20-30 byte codes in JSC</blockquote></mx-reply>why not to <code>const [x, y] = Optional.some[Symbol.customMatcher](Point[Symbol.customMatcher](p, 'list'), 'list');</code>?</td></tr>
  <tr class="msg" id="L275"><td class="ts-cell"><a class="ts" href="#L275" alt="Tue Oct 08 2024 21:18:30 GMT-0700 (Pacific Daylight Time)">04:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i'll be somewhat blunt: i continue to see the line of argument from extractor-proponents to be "for these technical reasons it's unrealistic to do this in tools"

that's fine! but that doesn't imply "engines will do it"</td></tr>
  <tr class="msg" id="L276"><td class="ts-cell"><a class="ts" href="#L276" alt="Tue Oct 08 2024 21:18:55 GMT-0700 (Pacific Daylight Time)">04:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i think the counterfactual that "people will write things that are even slower" is also just not true in this case, because pattern matching and extractors don't exist?</td></tr>
  <tr class="msg" id="L277"><td class="ts-cell"><a class="ts" href="#L277" alt="Tue Oct 08 2024 21:19:08 GMT-0700 (Pacific Daylight Time)">04:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">the things those will be used for are already done, just in other ways</td></tr>
  <tr class="msg" id="L278"><td class="ts-cell"><a class="ts" href="#L278" alt="Tue Oct 08 2024 21:19:19 GMT-0700 (Pacific Daylight Time)">04:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">and if they don't want to write that verbose example that jordan posted above, that's good! the grossness of the example correlates with the slowness</td></tr>
  <tr class="msg" id="L279"><td class="ts-cell"><a class="ts" href="#L279" alt="Tue Oct 08 2024 21:19:31 GMT-0700 (Pacific Daylight Time)">04:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">pattern matching is done with function calls and if/else and/or switch, extractors with separate function calls</td></tr>
  <tr class="msg" id="L280"><td class="ts-cell"><a class="ts" href="#L280" alt="Tue Oct 08 2024 21:19:39 GMT-0700 (Pacific Daylight Time)">04:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">that seems good to me</td></tr>
  <tr class="msg" id="L281"><td class="ts-cell"><a class="ts" href="#L281" alt="Tue Oct 08 2024 21:19:47 GMT-0700 (Pacific Daylight Time)">04:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">their verbosity gives a hint to the work they're doing</td></tr>
  <tr class="msg" id="L282"><td class="ts-cell"><a class="ts" href="#L282" alt="Tue Oct 08 2024 21:20:15 GMT-0700 (Pacific Daylight Time)">04:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i'm not sure the point of programming languages is to have verbosity correlate to cost?</td></tr>
  <tr class="msg" id="L283"><td class="ts-cell"><a class="ts" href="#L283" alt="Tue Oct 08 2024 21:20:18 GMT-0700 (Pacific Daylight Time)">04:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i'll be somewhat blunt: i continue to see the line of argument from extractor-proponents to be "for these technical reasons it's unrealistic to do this in tools"<br><br>that's fine! but that doesn't imply "engines will do it"</blockquote></mx-reply>Extractors are actually something that would be easy to do in Babel, just not fast/small</td></tr>
  <tr class="msg" id="L284"><td class="ts-cell"><a class="ts" href="#L284" alt="Tue Oct 08 2024 21:20:22 GMT-0700 (Pacific Daylight Time)">04:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Pattern matching results in far more readable code than the current approach.</td></tr>
  <tr class="msg" id="L285"><td class="ts-cell"><a class="ts" href="#L285" alt="Tue Oct 08 2024 21:20:33 GMT-0700 (Pacific Daylight Time)">04:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">if a terser and more readable thing can be a near zero-cost abstraction, that's great</td></tr>
  <tr class="msg" id="L286"><td class="ts-cell"><a class="ts" href="#L286" alt="Tue Oct 08 2024 21:20:39 GMT-0700 (Pacific Daylight Time)">04:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">The verbosity makes it harder to reason over.</td></tr>
  <tr class="msg" id="L287"><td class="ts-cell"><a class="ts" href="#L287" alt="Tue Oct 08 2024 21:20:45 GMT-0700 (Pacific Daylight Time)">04:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">if it can't be, we gave our position yesterday on the cost to users</td></tr>
  <tr class="msg" id="L288"><td class="ts-cell"><a class="ts" href="#L288" alt="Tue Oct 08 2024 21:21:20 GMT-0700 (Pacific Daylight Time)">04:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@bradfordcsmith:matrix.org">Bradford Smith</span>&gt;</div></td><td class="msg-cell">My concern with Extractors is that they seem overly clever to me. They hide what's happening from the developer too much, leading them to incorrect ideas about how expensive they are.</td></tr>
  <tr class="msg" id="L289"><td class="ts-cell"><a class="ts" href="#L289" alt="Tue Oct 08 2024 21:21:29 GMT-0700 (Pacific Daylight Time)">04:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i'm not sure the point of programming languages is to have verbosity correlate to cost?</blockquote></mx-reply>the point of programming languages is to write applications that have some value to users of the applications</td></tr>
  <tr class="msg" id="L290"><td class="ts-cell"><a class="ts" href="#L290" alt="Tue Oct 08 2024 21:21:33 GMT-0700 (Pacific Daylight Time)">04:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">indeed</td></tr>
  <tr class="msg" id="L291"><td class="ts-cell"><a class="ts" href="#L291" alt="Tue Oct 08 2024 21:21:38 GMT-0700 (Pacific Daylight Time)">04:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">pattern matching can be more efficient than the alternative if we have sufficient caching and reuse across multiple branches of the pattern.</td></tr>
  <tr class="msg" id="L292"><td class="ts-cell"><a class="ts" href="#L292" alt="Tue Oct 08 2024 21:21:39 GMT-0700 (Pacific Daylight Time)">04:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell"><p>Sure but that's still 48 byte codes in JSC today:</p>
<pre><code>[x, y] = Optional.some[Symbol.customMatcher](Point[Symbol.customMatcher](p, 'list'), 'list');
&lt;global&gt;#BS5CtO:[0x130538130-&gt;0x10e071188, NoneGlobal, 265]: 48 instructions (0 16-bit instructions, 0 32-bit instructions, 27 instructions with metadata); 361 bytes (96 metadata bytes); 1 parameter(s); 20 callee register(s); 5 variable(s); scope at loc4

bb#1
Predecessors: [ ]
[   0] enter
[   1] mov                dst:loc5, src:Undefined(const0)
[   4] resolve_scope      dst:loc7, scope:loc4, var:0, resolveType:GlobalProperty, localScopeDepth:0
[  11] get_from_scope     dst:loc8, scope:loc7, var:0, getPutInfo:2048&lt;ThrowIfNotFound|GlobalProperty|NotInitialization|NotStrictMode&gt;, localScopeDepth:0, offset:0, valueProfile:1
[  20] get_by_id          dst:loc6, base:loc8, property:1, valueProfile:2
[  26] resolve_scope      dst:loc8, scope:loc4, var:2, resolveType:GlobalProperty, localScopeDepth:0
[  33] get_from_scope     dst:loc9, scope:loc8, var:2, getPutInfo:2048&lt;ThrowIfNotFound|GlobalProperty|NotInitialization|NotStrictMode&gt;, localScopeDepth:0, offset:0, valueProfile:3
[  42] get_by_id          dst:loc7, base:loc9, property:3, valueProfile:4
[  48] get_by_val         dst:loc5, base:loc6, property:loc7, valueProfile:5
[  54] mov                dst:loc10, src:loc6
[  57] resolve_scope      dst:loc11, scope:loc4, var:4, resolveType:GlobalProperty, localScopeDepth:0
[  64] get_from_scope     dst:loc11, scope:loc11, var:4, getPutInfo:2048&lt;ThrowIfNotFound|GlobalProperty|NotInitialization|NotStrictMode&gt;, localScopeDepth:0, offset:0, valueProfile:6
[  73] resolve_scope      dst:loc13, scope:loc4, var:2, resolveType:GlobalProperty, localScopeDepth:0
[  80] get_from_scope     dst:loc14, scope:loc13, var:2, getPutInfo:2048&lt;ThrowIfNotFound|GlobalProperty|NotInitialization|NotStrictMode&gt;, localScopeDepth:0, offset:0, valueProfile:7
[  89] get_by_id          dst:loc12, base:loc14, property:3, valueProfile:8
[  95] get_by_val         dst:loc9, base:loc11, property:loc12, valueProfile:9
[ 101] mov                dst:loc14, src:loc11
[ 104] resolve_scope      dst:loc13, scope:loc4, var:5, resolveType:GlobalProperty, localScopeDepth:0
[ 111] get_from_scope     dst:loc13, scope:loc13, var:5, getPutInfo:2048&lt;ThrowIfNotFound|GlobalProperty|NotInitialization|NotStrictMode&gt;, localScopeDepth:0, offset:0, valueProfile:10
[ 120] mov                dst:loc12, src:String (atomic),8Bit:(1),length:(4): list, StructureID: 16976(const1)
[ 123] call               dst:loc9, callee:loc9, argc:3, argv:20, valueProfile:11
[ 130] mov                dst:loc8, src:String (atomic),8Bit:(1),length:(4): list, StructureID: 16976(const1)
[ 133] call               dst:loc5, callee:loc5, argc:3, argv:16, valueProfile:12
[ 140] get_by_id          dst:loc8, base:loc5, property:6, valueProfile:13
[ 146] mov                dst:loc10, src:loc5
[ 149] iterator_open      iterator:loc6, next:loc7, symbolIterator:loc8, iterable:loc10, stackOffset:16, iterableValueProfile:14, iteratorValueProfile:15, nextValueProfile:16
[ 159] mov                dst:loc10, src:loc6
[ 162] iterator_next      done:loc8, value:loc9, iterable:loc5, next:loc7, iterator:loc10, stackOffset:16, nextResultValueProfile:17, doneValueProfile:18, valueValueProfile:19
[ 173] jfalse             condition:loc8, targetLabel:6(-&gt;179)
Successors: [ #3 #2 ]

bb#2
Predecessors: [ #1 ]
[ 176] mov                dst:loc9, src:Undefined(const0)
Successors: [ #3 ]

bb#3
Predecessors: [ #1 #2 ]
[ 179] resolve_scope      dst:loc10, scope:loc4, var:7, resolveType:GlobalProperty, localScopeDepth:0
[ 186] put_to_scope       scope:loc10, var:7, value:loc9, getPutInfo:1050624&lt;DoNotThrowIfNotFound|GlobalProperty|NotInitialization|NotStrictMode&gt;, symbolTableOrScopeDepth:0, offset:0
[ 194] jtrue              condition:loc8, targetLabel:20(-&gt;214)
Successors: [ #5 #4 ]

bb#4
Predecessors: [ #3 ]
[ 197] mov                dst:loc10, src:loc6
[ 200] iterator_next      done:loc8, value:loc9, iterable:loc5, next:loc7, iterator:loc10, stackOffset:16, nextResultValueProfile:20, doneValueProfile:21, valueValueProfile:22
[ 211] jfalse             condition:loc8, targetLabel:6(-&gt;217)
Successors: [ #6 #5 ]

bb#5
Predecessors: [ #3 #4 ]
[ 214] mov                dst:loc9, src:Undefined(const0)
Successors: [ #6 ]

bb#6
Predecessors: [ #4 #5 ]
[ 217] resolve_scope      dst:loc10, scope:loc4, var:8, resolveType:GlobalProperty, localScopeDepth:0
[ 224] put_to_scope       scope:loc10, var:8, value:loc9, getPutInfo:1050624&lt;DoNotThrowIfNotFound|GlobalProperty|NotInitialization|NotStrictMode&gt;, symbolTableOrScopeDepth:0, offset:0
[ 232] jtrue              condition:loc8, targetLabel:31(-&gt;263)
Successors: [ #10 #7 ]

bb#7
Predecessors: [ #6 ]
[ 235] get_by_id          dst:loc9, base:loc6, property:9, valueProfile:23
[ 241] jundefined_or_null value:loc9, targetLabel:22(-&gt;263)
Successors: [ #10 #8 ]

bb#8
Predecessors: [ #7 ]
[ 244] mov                dst:loc12, src:loc6
[ 247] call               dst:loc10, callee:loc9, argc:1, argv:18, valueProfile:24
[ 254] is_object          dst:loc13, operand:loc10
[ 257] jtrue              condition:loc13, targetLabel:6(-&gt;263)
Successors: [ #10 #9 ]

bb#9
Predecessors: [ #8 ]
[ 260] throw_static_error message:String (atomic),8Bit:(1),length:(43): Iterator result interface is not an object., StructureID: 16976(const2), errorType:TypeError
Successors: [ ]

bb#10
Predecessors: [ #6 #7 #8 ]
[ 263] end                value:loc5
Successors: [ ]


Identifiers:
  id0 = Optional
  id1 = some
  id2 = Symbol
  id3 = customMatcher
  id4 = Point
  id5 = p
  id6 = Symbol.iterator
  id7 = x
  id8 = y
  id9 = return

Constants:
   k0 = Undefined
   k1 = String (atomic),8Bit:(1),length:(4): list, StructureID: 16976
   k2 = String (atomic),8Bit:(1),length:(43): Iterator result interface is not an object., StructureID: 16976
</code></pre>
</td></tr>
  <tr class="msg" id="L293"><td class="ts-cell"><a class="ts" href="#L293" alt="Tue Oct 08 2024 21:21:50 GMT-0700 (Pacific Daylight Time)">04:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">and readable code correlates to that value, imo often more highly than the performance of that application</td></tr>
  <tr class="msg" id="L294"><td class="ts-cell"><a class="ts" href="#L294" alt="Tue Oct 08 2024 21:21:59 GMT-0700 (Pacific Daylight Time)">04:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i disagree <em>so</em> strongly on that point</td></tr>
  <tr class="msg" id="L295"><td class="ts-cell"><a class="ts" href="#L295" alt="Tue Oct 08 2024 21:22:04 GMT-0700 (Pacific Daylight Time)">04:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">that is clear :-)</td></tr>
  <tr class="msg" id="L296"><td class="ts-cell"><a class="ts" href="#L296" alt="Tue Oct 08 2024 21:23:09 GMT-0700 (Pacific Daylight Time)">04:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I might believe that claim in C, which is hard to write correctly and where bugs can do arbitrarily bad things, but I certainly do not agree with that claim for web apps written in JS</td></tr>
  <tr class="msg" id="L297"><td class="ts-cell"><a class="ts" href="#L297" alt="Tue Oct 08 2024 21:24:04 GMT-0700 (Pacific Daylight Time)">04:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I might believe that claim in C, which is hard to write correctly and where bugs can do arbitrarily bad things, but I certainly do not agree with that claim for web apps written in JS</blockquote></mx-reply>Are you agreeing with Jordan or Shu? lol</td></tr>
  <tr class="msg" id="L298"><td class="ts-cell"><a class="ts" href="#L298" alt="Tue Oct 08 2024 21:24:07 GMT-0700 (Pacific Daylight Time)">04:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">it's not a claim that it's always the case, to be clear, and obv <em>some</em> threshold of slowness will always cancel out the other benefits.</td></tr>
  <tr class="msg" id="L299"><td class="ts-cell"><a class="ts" href="#L299" alt="Tue Oct 08 2024 21:24:37 GMT-0700 (Pacific Daylight Time)">04:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Which is a <em>lot</em> by JSC standards</td></tr>
  <tr class="msg" id="L300"><td class="ts-cell"><a class="ts" href="#L300" alt="Tue Oct 08 2024 21:24:52 GMT-0700 (Pacific Daylight Time)">04:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">This function would be invalid for inlining from one binding alone</td></tr>
  <tr class="msg" id="L301"><td class="ts-cell"><a class="ts" href="#L301" alt="Tue Oct 08 2024 21:25:27 GMT-0700 (Pacific Daylight Time)">04:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I am agreeing with shu</td></tr>
  <tr class="msg" id="L302"><td class="ts-cell"><a class="ts" href="#L302" alt="Tue Oct 08 2024 21:26:16 GMT-0700 (Pacific Daylight Time)">04:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I think that webapps being slow is the cause of much more pain than webapps being unclear to their maintainers</td></tr>
  <tr class="msg" id="L303"><td class="ts-cell"><a class="ts" href="#L303" alt="Tue Oct 08 2024 21:26:50 GMT-0700 (Pacific Daylight Time)">04:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> why not to <code>const [x, y] = Optional.some[Symbol.customMatcher](Point[Symbol.customMatcher](p, 'list'), 'list');</code>?</blockquote></mx-reply>Pulling this into the main channel. This would be sufficiently complex (48 byte codes) that this would be no longer considered for inlining under JSC's current heuristic.</td></tr>
  <tr class="msg" id="L304"><td class="ts-cell"><a class="ts" href="#L304" alt="Tue Oct 08 2024 21:27:03 GMT-0700 (Pacific Daylight Time)">04:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">From one statement</td></tr>
  <tr class="msg" id="L305"><td class="ts-cell"><a class="ts" href="#L305" alt="Tue Oct 08 2024 21:27:50 GMT-0700 (Pacific Daylight Time)">04:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Which I <em>don't</em> think devs would expect</td></tr>
  <tr class="msg" id="L306"><td class="ts-cell"><a class="ts" href="#L306" alt="Tue Oct 08 2024 21:28:20 GMT-0700 (Pacific Daylight Time)">04:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">JSC inlining is limited to the statement level?</td></tr>
  <tr class="msg" id="L307"><td class="ts-cell"><a class="ts" href="#L307" alt="Tue Oct 08 2024 21:28:38 GMT-0700 (Pacific Daylight Time)">04:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">It's limited by the number of bytes in the instruction stream</td></tr>
  <tr class="msg" id="L308"><td class="ts-cell"><a class="ts" href="#L308" alt="Tue Oct 08 2024 21:28:58 GMT-0700 (Pacific Daylight Time)">04:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">IIRC, it's 170 bytes</td></tr>
  <tr class="msg" id="L309"><td class="ts-cell"><a class="ts" href="#L309" alt="Tue Oct 08 2024 21:30:32 GMT-0700 (Pacific Daylight Time)">04:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote><p>is it a really bad idea to have a 3rd form of destructuring for array-like?</p>
<pre><code>const |a, b, c| = multiReturnFunction(); // probably a better token is available
// is
const { 0: a, 1: b, 2: c } = multiReturnFunction();
</code></pre>
</blockquote></mx-reply><code data-md="`">const Array(a, b, c) = ...</code>?</td></tr>
  <tr class="msg" id="L310"><td class="ts-cell"><a class="ts" href="#L310" alt="Tue Oct 08 2024 21:31:09 GMT-0700 (Pacific Daylight Time)">04:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">If extractors end up needing to use array-as-object destructuring, then yeah, that's a possibility.</td></tr>
  <tr class="msg" id="L311"><td class="ts-cell"><a class="ts" href="#L311" alt="Tue Oct 08 2024 21:33:01 GMT-0700 (Pacific Daylight Time)">04:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">A lot of that is resolving the various properties needed though not the array destructuring</td></tr>
  <tr class="msg" id="L312"><td class="ts-cell"><a class="ts" href="#L312" alt="Tue Oct 08 2024 21:34:15 GMT-0700 (Pacific Daylight Time)">04:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">I encourage you to look at that bytecode sequence and <em>really</em> think about all the subtle work that has to happen to resolve that binding.</td></tr>
  <tr class="msg" id="L313"><td class="ts-cell"><a class="ts" href="#L313" alt="Tue Oct 08 2024 21:35:24 GMT-0700 (Pacific Daylight Time)">04:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i feel like folks haven't really internalized the "complexity is moved, not removed" point we tried to make yet</td></tr>
  <tr class="msg" id="L314"><td class="ts-cell"><a class="ts" href="#L314" alt="Tue Oct 08 2024 21:36:18 GMT-0700 (Pacific Daylight Time)">04:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">And the bytecode for <code>const [[[x, y]]] = foo</code> given it results in three lookups to <code>Symbol.iterator</code>? I understand extractors do that as well, I'm just curious.</td></tr>
  <tr class="msg" id="L315"><td class="ts-cell"><a class="ts" href="#L315" alt="Tue Oct 08 2024 21:36:36 GMT-0700 (Pacific Daylight Time)">04:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-5">@shu</span> this could literally be a special form that <i data-md="*">does</i> remove the complexity, different from <code data-md="`">const window.Array(a, b, c) = ...</code></td></tr>
  <tr class="msg" id="L316"><td class="ts-cell"><a class="ts" href="#L316" alt="Tue Oct 08 2024 21:37:02 GMT-0700 (Pacific Daylight Time)">04:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell"><p>const [[[x, y]]] = foo<br>&lt;global&gt;#CzC5ob:[0x130538220-&gt;0x10e071488, NoneGlobal, 285]: 59 instructions (0 16-bit instructions, 0 32-bit instructions, 22 instructions with metadata); 381 bytes (96 metadata bytes); 1 parameter(s); 26 callee register(s); 5 variable(s); scope at loc4</p>
<p>bb#1<br>Predecessors: [ ]<br>[   0] enter<br>[   1] mov                dst:loc5, src:Undefined(const0)<br>[   4] resolve_scope      dst:loc6, scope:loc4, var:0, resolveType:GlobalProperty, localScopeDepth:0<br>[  11] get_from_scope     dst:loc6, scope:loc6, var:0, getPutInfo:2048&lt;ThrowIfNotFound|GlobalProperty|NotInitialization|NotStrictMode&gt;, localScopeDepth:0, offset:0, valueProfile:1<br>[  20] get_by_id          dst:loc9, base:loc6, property:1, valueProfile:2<br>[  26] mov                dst:loc10, src:loc6<br>[  29] iterator_open      iterator:loc7, next:loc8, symbolIterator:loc9, iterable:loc10, stackOffset:16, iterableValueProfile:3, iteratorValueProfile:4, nextValueProfile:5<br>[  39] mov                dst:loc12, src:loc7<br>[  42] iterator_next      done:loc9, value:loc10, iterable:loc6, next:loc8, iterator:loc12, stackOffset:18, nextResultValueProfile:6, doneValueProfile:7, valueValueProfile:8<br>[  53] jfalse             condition:loc9, targetLabel:6(-&gt;59)<br>Successors: [ #3 #2 ]</p>
<p>bb#2<br>Predecessors: [ #1 ]<br>[  56] mov                dst:loc10, src:Undefined(const0)<br>Successors: [ #3 ]</p>
<p>bb#3<br>Predecessors: [ #1 #2 ]<br>[  59] get_by_id          dst:loc13, base:loc10, property:1, valueProfile:9<br>[  65] mov                dst:loc14, src:loc10<br>[  68] iterator_open      iterator:loc11, next:loc12, symbolIterator:loc13, iterable:loc14, stackOffset:20, iterableValueProfile:10, iteratorValueProfile:11, nextValueProfile:12<br>[  78] mov                dst:loc16, src:loc11<br>[  81] iterator_next      done:loc13, value:loc14, iterable:loc10, next:loc12, iterator:loc16, stackOffset:22, nextResultValueProfile:13, doneValueProfile:14, valueValueProfile:15<br>[  92] jfalse             condition:loc13, targetLabel:6(-&gt;98)<br>Successors: [ #5 #4 ]</p>
<p>bb#4<br>Predecessors: [ #3 ]<br>[  95] mov                dst:loc14, src:Undefined(const0)<br>Successors: [ #5 ]</p>
<p>bb#5<br>Predecessors: [ #3 #4 ]<br>[  98] get_by_id          dst:loc17, base:loc14, property:1, valueProfile:16<br>[ 104] mov                dst:loc18, src:loc14<br>[ 107] iterator_open      iterator:loc15, next:loc16, symbolIterator:loc17, iterable:loc18, stackOffset:24, iterableValueProfile:17, iteratorValueProfile:18, nextValueProfile:19<br>[ 117] mov                dst:loc20, src:loc15<br>[ 120] iterator_next      done:loc17, value:loc18, iterable:loc14, next:loc16, iterator:loc20, stackOffset:26, nextResultValueProfile:20, doneValueProfile:21, valueValueProfile:22<br>[ 131] jfalse             condition:loc17, targetLabel:6(-&gt;137)<br>Successors: [ #7 #6 ]</p>
<p>bb#6<br>Predecessors: [ #5 ]<br>[ 134] mov                dst:loc18, src:Undefined(const0)<br>Successors: [ #7 ]</p>
<p>bb#7<br>Predecessors: [ #5 #6 ]<br>[ 137] resolve_scope      dst:loc19, scope:loc4, var:2, resolveType:GlobalProperty, localScopeDepth:0<br>[ 144] put_to_scope       scope:loc19, var:2, value:loc18, getPutInfo:1049600&lt;DoNotThrowIfNotFound|GlobalProperty|ConstInitialization|NotStrictMode&gt;, symbolTableOrScopeDepth:0, offset:0<br>[ 152] jtrue              condition:loc17, targetLabel:20(-&gt;172)<br>Successors: [ #9 #8 ]</p>
<p>bb#8<br>Predecessors: [ #7 ]<br>[ 155] mov                dst:loc20, src:loc15<br>[ 158] iterator_next      done:loc17, value:loc18, iterable:loc14, next:loc16, iterator:loc20, stackOffset:26, nextResultValueProfile:23, doneValueProfile:24, valueValueProfile:25<br>[ 169] jfalse             condition:loc17, targetLabel:6(-&gt;175)<br>Successors: [ #10 #9 ]</p>
<p>bb#9<br>Predecessors: [ #7 #8 ]<br>[ 172] mov                dst:loc18, src:Undefined(const0)<br>Successors: [ #10 ]</p>
<p>bb#10<br>Predecessors: [ #8 #9 ]<br>[ 175] resolve_scope      dst:loc19, scope:loc4, var:3, resolveType:GlobalProperty, localScopeDepth:0<br>[ 182] put_to_scope       scope:loc19, var:3, value:loc18, getPutInfo:1049600&lt;DoNotThrowIfNotFound|GlobalProperty|ConstInitialization|NotStrictMode&gt;, symbolTableOrScopeDepth:0, offset:0<br>[ 190] jtrue              condition:loc17, targetLabel:31(-&gt;221)<br>Successors: [ #14 #11 ]</p>
<p>bb#11<br>Predecessors: [ #10 ]<br>[ 193] get_by_id          dst:loc18, base:loc15, property:4, valueProfile:26<br>[ 199] jundefined_or_null value:loc18, targetLabel:22(-&gt;221)<br>Successors: [ #14 #12 ]</p>
<p>bb#12<br>Predecessors: [ #11 ]<br>[ 202] mov                dst:loc20, src:loc15<br>[ 205] call               dst:loc19, callee:loc18, argc:1, argv:26, valueProfile:27<br>[ 212] is_object          dst:loc21, operand:loc19<br>[ 215] jtrue              condition:loc21, targetLabel:6(-&gt;221)<br>Successors: [ #14 #13 ]</p>
<p>bb#13<br>Predecessors: [ #12 ]<br>[ 218] throw_static_error message:String (atomic),8Bit:(1),length:(43): Iterator result interface is not an object., StructureID: 16976(const1), errorType:TypeError<br>Successors: [ ]</p>
<p>bb#14<br>Predecessors: [ #10 #11 #12 ]<br>[ 221] jtrue              condition:loc13, targetLabel:31(-&gt;252)<br>Successors: [ #18 #15 ]</p>
<p>bb#15<br>Predecessors: [ #14 ]<br>[ 224] get_by_id          dst:loc14, base:loc11, property:4, valueProfile:28<br>[ 230] jundefined_or_null value:loc14, targetLabel:22(-&gt;252)<br>Successors: [ #18 #16 ]</p>
<p>bb#16<br>Predecessors: [ #15 ]<br>[ 233] mov                dst:loc16, src:loc11<br>[ 236] call               dst:loc15, callee:loc14, argc:1, argv:22, valueProfile:29<br>[ 243] is_object          dst:loc17, operand:loc15<br>[ 246] jtrue              condition:loc17, targetLabel:6(-&gt;252)<br>Successors: [ #18 #17 ]</p>
<p>bb#17<br>Predecessors: [ #16 ]<br>[ 249] throw_static_error message:String (atomic),8Bit:(1),length:(43): Iterator result interface is not an object., StructureID: 16976(const1), errorType:TypeError<br>Successors: [ ]</p>
<p>bb#18<br>Predecessors: [ #14 #15 #16 ]<br>[ 252] jtrue              condition:loc9, targetLabel:31(-&gt;283)<br>Successors: [ #22 #19 ]</p>
<p>bb#19<br>Predecessors: [ #18 ]<br>[ 255] get_by_id          dst:loc10, base:loc7, property:4, valueProfile:30<br>[ 261] jundefined_or_null value:loc10, targetLabel:22(-&gt;283)<br>Successors: [ #22 #20 ]</p>
<p>bb#20<br>Predecessors: [ #19 ]<br>[ 264] mov                dst:loc12, src:loc7<br>[ 267] call               dst:loc11, callee:loc10, argc:1, argv:18, valueProfile:31<br>[ 274] is_object          dst:loc13, operand:loc11<br>[ 277] jtrue              condition:loc13, targetLabel:6(-&gt;283)<br>Successors: [ #22 #21 ]</p>
<p>bb#21<br>Predecessors: [ #20 ]<br>[ 280] throw_static_error message:String (atomic),8Bit:(1),length:(43): Iterator result interface is not an object., StructureID: 16976(const1), errorType:TypeError<br>Successors: [ ]</p>
<p>bb#22<br>Predecessors: [ #18 #19 #20 ]<br>[ 283] end                value:loc5<br>Successors: [ ]</p>
<p>Identifiers:<br>id0 = foo<br>id1 = Symbol.iterator<br>id2 = x<br>id3 = y<br>id4 = return</p>
<p>Constants:<br>k0 = Undefined<br>k1 = String (atomic),8Bit:(1),length:(43): Iterator result interface is not an object., StructureID: 16976</p>
</td></tr>
  <tr class="msg" id="L317"><td class="ts-cell"><a class="ts" href="#L317" alt="Tue Oct 08 2024 21:37:43 GMT-0700 (Pacific Daylight Time)">04:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">please don't dump walls of text into Matrix, make a gist or something</td></tr>
  <tr class="msg" id="L318"><td class="ts-cell"><a class="ts" href="#L318" alt="Tue Oct 08 2024 21:38:44 GMT-0700 (Pacific Daylight Time)">04:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">I put it in a thread for that reason?</td></tr>
  <tr class="msg" id="L319"><td class="ts-cell"><a class="ts" href="#L319" alt="Tue Oct 08 2024 21:39:30 GMT-0700 (Pacific Daylight Time)">04:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Does the bytecode for the <code>Optional.some[Symbol.customMatcher]</code> include the cost of looking up <code>customMatcher</code> on Symbol? A native implementation would be able to avoid that because it would be using a known symbol.</td></tr>
  <tr class="msg" id="L320"><td class="ts-cell"><a class="ts" href="#L320" alt="Tue Oct 08 2024 21:39:56 GMT-0700 (Pacific Daylight Time)">04:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>I put it in a thread for that reason?</blockquote></mx-reply>oh I think my client doesn't do threads</td></tr>
  <tr class="msg" id="L321"><td class="ts-cell"><a class="ts" href="#L321" alt="Tue Oct 08 2024 21:40:33 GMT-0700 (Pacific Daylight Time)">04:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> oh I think my client doesn't do threads</blockquote></mx-reply>Ah fair, sorry. I assumed that was the standard.</td></tr>
  <tr class="msg" id="L322"><td class="ts-cell"><a class="ts" href="#L322" alt="Tue Oct 08 2024 21:40:43 GMT-0700 (Pacific Daylight Time)">04:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> and readable code correlates to that value, imo often more highly than the performance of that application</blockquote></mx-reply>I agree with Jordan, extractor give u a simple abstraction and shorter code. such feature will improve the code quality generally (not only perf, but also many other aspects).</td></tr>
  <tr class="msg" id="L323"><td class="ts-cell"><a class="ts" href="#L323" alt="Tue Oct 08 2024 21:40:47 GMT-0700 (Pacific Daylight Time)">04:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Does the bytecode for the <code>Optional.some[Symbol.customMatcher]</code> include the cost of looking up <code>customMatcher</code> on Symbol? A native implementation would be able to avoid that because it would be using a known symbol.</blockquote></mx-reply>that's just 1~3 steps i guess</td></tr>
  <tr class="msg" id="L324"><td class="ts-cell"><a class="ts" href="#L324" alt="Tue Oct 08 2024 21:40:51 GMT-0700 (Pacific Daylight Time)">04:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Sure, that would be avoided but that's not too much of the code generated</td></tr>
  <tr class="msg" id="L325"><td class="ts-cell"><a class="ts" href="#L325" alt="Tue Oct 08 2024 21:46:01 GMT-0700 (Pacific Daylight Time)">04:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">I think the browser vendors are pushing back on the idea that it gives you perf</td></tr>
  <tr class="msg" id="L326"><td class="ts-cell"><a class="ts" href="#L326" alt="Tue Oct 08 2024 21:46:19 GMT-0700 (Pacific Daylight Time)">04:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">It's not a magic box where things become faster because you want it to</td></tr>
  <tr class="msg" id="L327"><td class="ts-cell"><a class="ts" href="#L327" alt="Tue Oct 08 2024 21:46:44 GMT-0700 (Pacific Daylight Time)">04:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">At least extractors are not a hidden cost you stumble into, unlike getters/setters or let/const TDZ. You don't pay the cost if you don't use extractors, and so long as developers are aware of the cost (and that cost is not absurdly high), developers can balance the pros and cons and fall back to existing behaviors for high performance scenarios. I think part of concern is that developers might blindly adopt extractors without considering the cost?</td></tr>
  <tr class="msg" id="L328"><td class="ts-cell"><a class="ts" href="#L328" alt="Tue Oct 08 2024 21:46:45 GMT-0700 (Pacific Daylight Time)">04:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>oh I think my client doesn't do threads</blockquote></mx-reply>Cinny shows ‚Äúthreaded reply‚Äù under the username</td></tr>
  <tr class="msg" id="L329"><td class="ts-cell"><a class="ts" href="#L329" alt="Tue Oct 08 2024 21:46:59 GMT-0700 (Pacific Daylight Time)">04:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i think extractors are <em>totally</em> a hidden cost</td></tr>
  <tr class="msg" id="L330"><td class="ts-cell"><a class="ts" href="#L330" alt="Tue Oct 08 2024 21:47:24 GMT-0700 (Pacific Daylight Time)">04:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> At least extractors are not a hidden cost you stumble into, unlike getters/setters or let/const TDZ. You don't pay the cost if you don't use extractors, and so long as developers are aware of the cost (and that cost is not absurdly high), developers can balance the pros and cons and fall back to existing behaviors for high performance scenarios. I think part of concern is that developers might blindly adopt extractors without considering the cost?</blockquote></mx-reply>extractors are quite similar to let/const, they hide the cost of the operation behind what looks like light weight syntax</td></tr>
  <tr class="msg" id="L331"><td class="ts-cell"><a class="ts" href="#L331" alt="Tue Oct 08 2024 21:47:43 GMT-0700 (Pacific Daylight Time)">04:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">here's a really simple, clean looking code (multiple delegates have said as such, <strong>i</strong> also think it looks very clean and nice) that hides a pretty expensive operation that doesn't exist in other languages that inspired this feature!</td></tr>
  <tr class="msg" id="L332"><td class="ts-cell"><a class="ts" href="#L332" alt="Tue Oct 08 2024 21:47:55 GMT-0700 (Pacific Daylight Time)">04:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">@yulia</span> no more so than positional destructuring</td></tr>
  <tr class="msg" id="L333"><td class="ts-cell"><a class="ts" href="#L333" alt="Tue Oct 08 2024 21:47:56 GMT-0700 (Pacific Daylight Time)">04:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Yeah the syntax is üíØ hiding the cost! That's exactly what I was trying to show!</td></tr>
  <tr class="msg" id="L334"><td class="ts-cell"><a class="ts" href="#L334" alt="Tue Oct 08 2024 21:47:59 GMT-0700 (Pacific Daylight Time)">04:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">The syntax looks like a function call, part of the benefit of that is that the expectation is that it will have the cost of a function call.</td></tr>
  <tr class="msg" id="L335"><td class="ts-cell"><a class="ts" href="#L335" alt="Tue Oct 08 2024 21:48:20 GMT-0700 (Pacific Daylight Time)">04:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">do you think a rust or haskell programmer look at pattern matching and think that's a function call?</td></tr>
  <tr class="msg" id="L336"><td class="ts-cell"><a class="ts" href="#L336" alt="Tue Oct 08 2024 21:48:34 GMT-0700 (Pacific Daylight Time)">04:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@canadahonk:matrix.org">canadahonk</span>&gt;</div></td><td class="msg-cell">couldn't the same be said with array destructuring?</td></tr>
  <tr class="msg" id="L337"><td class="ts-cell"><a class="ts" href="#L337" alt="Tue Oct 08 2024 21:48:39 GMT-0700 (Pacific Daylight Time)">04:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">yes</td></tr>
  <tr class="msg" id="L338"><td class="ts-cell"><a class="ts" href="#L338" alt="Tue Oct 08 2024 21:48:40 GMT-0700 (Pacific Daylight Time)">04:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">yeah?</td></tr>
  <tr class="msg" id="L339"><td class="ts-cell"><a class="ts" href="#L339" alt="Tue Oct 08 2024 21:48:41 GMT-0700 (Pacific Daylight Time)">04:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">yes, </td></tr>
  <tr class="msg" id="L340"><td class="ts-cell"><a class="ts" href="#L340" alt="Tue Oct 08 2024 21:48:43 GMT-0700 (Pacific Daylight Time)">04:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">array destructuring is terrible</td></tr>
  <tr class="msg" id="L341"><td class="ts-cell"><a class="ts" href="#L341" alt="Tue Oct 08 2024 21:48:44 GMT-0700 (Pacific Daylight Time)">04:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@canadahonk:matrix.org">canadahonk</span>&gt;</div></td><td class="msg-cell">welp</td></tr>
  <tr class="msg" id="L342"><td class="ts-cell"><a class="ts" href="#L342" alt="Tue Oct 08 2024 21:48:50 GMT-0700 (Pacific Daylight Time)">04:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-12">@yulia</span> no more so than positional destructuring</blockquote></mx-reply>Sure and I think engines would consider that was a mistake</td></tr>
  <tr class="msg" id="L343"><td class="ts-cell"><a class="ts" href="#L343" alt="Tue Oct 08 2024 21:48:51 GMT-0700 (Pacific Daylight Time)">04:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell">A function calling is also a very simple syntax (and can hide cost). I don't see there is any diff.</td></tr>
  <tr class="msg" id="L344"><td class="ts-cell"><a class="ts" href="#L344" alt="Tue Oct 08 2024 21:49:39 GMT-0700 (Pacific Daylight Time)">04:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">In every language a function call is a significant cost</td></tr>
  <tr class="msg" id="L345"><td class="ts-cell"><a class="ts" href="#L345" alt="Tue Oct 08 2024 21:50:06 GMT-0700 (Pacific Daylight Time)">04:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Maybe if you're clever you can get the compiler to remove a lot of that but IMO devs know that's on them to verify</td></tr>
  <tr class="msg" id="L346"><td class="ts-cell"><a class="ts" href="#L346" alt="Tue Oct 08 2024 21:50:21 GMT-0700 (Pacific Daylight Time)">04:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@akirose:matrix.org">Aki</span>&gt;</div></td><td class="msg-cell">"other parts of the web platform" /me perks up</td></tr>
  <tr class="msg" id="L347"><td class="ts-cell"><a class="ts" href="#L347" alt="Tue Oct 08 2024 21:50:39 GMT-0700 (Pacific Daylight Time)">04:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">the good parts or... ?</td></tr>
  <tr class="msg" id="L348"><td class="ts-cell"><a class="ts" href="#L348" alt="Tue Oct 08 2024 21:51:12 GMT-0700 (Pacific Daylight Time)">04:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@marjakh:matrix.org">Marja H√∂ltt√§</span>&gt;</div></td><td class="msg-cell">function calls and things like array destructing / extractors are also completely different levels of fundamental; can't really imagine a modern language without functions, but the other 2 are much more optional</td></tr>
  <tr class="msg" id="L349"><td class="ts-cell"><a class="ts" href="#L349" alt="Tue Oct 08 2024 21:51:26 GMT-0700 (Pacific Daylight Time)">04:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">amusing overload of "javascript core" lol</td></tr>
  <tr class="msg" id="L350"><td class="ts-cell"><a class="ts" href="#L350" alt="Tue Oct 08 2024 21:51:34 GMT-0700 (Pacific Daylight Time)">04:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">(yes it was clear in context hehe)</td></tr>
  <tr class="msg" id="L351"><td class="ts-cell"><a class="ts" href="#L351" alt="Tue Oct 08 2024 21:51:38 GMT-0700 (Pacific Daylight Time)">04:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Yeah, I got really confused for a sec lol</td></tr>
  <tr class="msg" id="L352"><td class="ts-cell"><a class="ts" href="#L352" alt="Tue Oct 08 2024 21:51:39 GMT-0700 (Pacific Daylight Time)">04:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">sooorrryyyy my brain is so dead</td></tr>
  <tr class="msg" id="L353"><td class="ts-cell"><a class="ts" href="#L353" alt="Tue Oct 08 2024 21:51:45 GMT-0700 (Pacific Daylight Time)">04:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Maybe if you're clever you can get the compiler to remove a lot of that but IMO devs know that's on them to verify</blockquote></mx-reply>If they're expected to know that <code>const p = Point(x, y)</code> has a cost, they won't be expected to know that <code>const Point(x, y) = p</code> does as well?</td></tr>
  <tr class="msg" id="L354"><td class="ts-cell"><a class="ts" href="#L354" alt="Tue Oct 08 2024 21:51:48 GMT-0700 (Pacific Daylight Time)">04:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@bradfordcsmith:matrix.org">Bradford Smith</span>&gt;</div></td><td class="msg-cell">Also, there is no restriction in the Extractors proposal on just how expensive that function may be. It could do anything. The examples assume they will always "undo" a constructor call, but there's no reason to believe it would stay restricted to that in practice.</td></tr>
  <tr class="msg" id="L355"><td class="ts-cell"><a class="ts" href="#L355" alt="Tue Oct 08 2024 21:52:14 GMT-0700 (Pacific Daylight Time)">04:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">That's part of the reason for the duality of the syntax. Extraction mirrors application.</td></tr>
  <tr class="msg" id="L356"><td class="ts-cell"><a class="ts" href="#L356" alt="Tue Oct 08 2024 21:52:44 GMT-0700 (Pacific Daylight Time)">04:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@bradfordcsmith:matrix.org">Bradford Smith</span>&gt;</div></td><td class="msg-cell">only by convention, though. It's not enforceable.</td></tr>
  <tr class="msg" id="L357"><td class="ts-cell"><a class="ts" href="#L357" alt="Tue Oct 08 2024 21:52:57 GMT-0700 (Pacific Daylight Time)">04:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">application can be arbitrarily expensive because its user code. Extraction can be arbitrarily expensive because its user code.</td></tr>
  <tr class="msg" id="L358"><td class="ts-cell"><a class="ts" href="#L358" alt="Tue Oct 08 2024 21:53:21 GMT-0700 (Pacific Daylight Time)">04:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">No because other bindings in the language don't have a cost. let/const is a great example of this in the sense that people didn't expect there would be a cost there.</td></tr>
  <tr class="msg" id="L359"><td class="ts-cell"><a class="ts" href="#L359" alt="Tue Oct 08 2024 21:53:45 GMT-0700 (Pacific Daylight Time)">04:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell">If a specific extracting logic is complex and cost , then it always there, people just write it in some other form, and generally speaking, average programmers normally write much slower code repeatly and every place. On the other side, extractor allow senior programmer factor the logic and do optimization in single place and provide other an easy to adoption syntax. </td></tr>
  <tr class="msg" id="L360"><td class="ts-cell"><a class="ts" href="#L360" alt="Tue Oct 08 2024 21:53:59 GMT-0700 (Pacific Daylight Time)">04:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@bradfordcsmith:matrix.org">Bradford Smith</span>&gt;</div></td><td class="msg-cell">My point is, part of the assumption of improved readability is assuming that the feature will be used in a particular way. I expect it would be abused to make code "magically" shorter.</td></tr>
  <tr class="msg" id="L361"><td class="ts-cell"><a class="ts" href="#L361" alt="Tue Oct 08 2024 21:54:01 GMT-0700 (Pacific Daylight Time)">04:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">ngl if I'm in JS author mode, my brain wants to view destructuring as zero-cost</td></tr>
  <tr class="msg" id="L362"><td class="ts-cell"><a class="ts" href="#L362" alt="Tue Oct 08 2024 21:54:24 GMT-0700 (Pacific Daylight Time)">04:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> No because other bindings in the language don't have a cost. let/const is a great example of this in the sense that people didn't expect there would be a cost there.</blockquote></mx-reply>Yes they do, <code>const [x, y]</code> has a cost. Extractors have an obvious cost because they are explicitly designed to run user code, that's the whole point.</td></tr>
  <tr class="msg" id="L363"><td class="ts-cell"><a class="ts" href="#L363" alt="Tue Oct 08 2024 21:55:13 GMT-0700 (Pacific Daylight Time)">04:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">I think it's non-obvious. Maybe this would be worth a developer study?</td></tr>
  <tr class="msg" id="L364"><td class="ts-cell"><a class="ts" href="#L364" alt="Tue Oct 08 2024 21:55:50 GMT-0700 (Pacific Daylight Time)">04:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Most developers don't think about iteration cost when they use <code>const [x, y]</code> because the possibility of iteration being expensive is hidden on the RHS, not the LHS. Extractors put that cost in your face by being on the LHS.</td></tr>
  <tr class="msg" id="L365"><td class="ts-cell"><a class="ts" href="#L365" alt="Tue Oct 08 2024 21:55:57 GMT-0700 (Pacific Daylight Time)">04:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> ngl if I'm in JS author mode, my brain wants to view destructuring as zero-cost</blockquote></mx-reply>I only expect builtin syntax like object destructuing and array destructing to be fast enough. But extractor means custom matcher and it just like function, and I don't expect it is zero cost.</td></tr>
  <tr class="msg" id="L366"><td class="ts-cell"><a class="ts" href="#L366" alt="Tue Oct 08 2024 21:55:59 GMT-0700 (Pacific Daylight Time)">04:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">IIRC, Mozilla (not asking them to do it again) did this in the past and it revealed a lot of interesting insights.</td></tr>
  <tr class="msg" id="L367"><td class="ts-cell"><a class="ts" href="#L367" alt="Tue Oct 08 2024 21:57:39 GMT-0700 (Pacific Daylight Time)">04:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">(we did what now?)</td></tr>
  <tr class="msg" id="L368"><td class="ts-cell"><a class="ts" href="#L368" alt="Tue Oct 08 2024 21:58:08 GMT-0700 (Pacific Daylight Time)">04:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">... user study? yeah thats something we have a whole TG for please get in touch!</td></tr>
  <tr class="msg" id="L369"><td class="ts-cell"><a class="ts" href="#L369" alt="Tue Oct 08 2024 21:58:17 GMT-0700 (Pacific Daylight Time)">04:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">user study for this hidden cost question</td></tr>
  <tr class="msg" id="L370"><td class="ts-cell"><a class="ts" href="#L370" alt="Tue Oct 08 2024 21:58:20 GMT-0700 (Pacific Daylight Time)">04:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">we can get students to do it</td></tr>
  <tr class="msg" id="L371"><td class="ts-cell"><a class="ts" href="#L371" alt="Tue Oct 08 2024 21:58:34 GMT-0700 (Pacific Daylight Time)">04:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">(im not doing it, no time these days, but there are eager folks)</td></tr>
  <tr class="msg" id="L372"><td class="ts-cell"><a class="ts" href="#L372" alt="Tue Oct 08 2024 21:59:12 GMT-0700 (Pacific Daylight Time)">04:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">That could be very helpful, though I'm not sure how to get that process started.</td></tr>
  <tr class="msg" id="L373"><td class="ts-cell"><a class="ts" href="#L373" alt="Tue Oct 08 2024 21:59:45 GMT-0700 (Pacific Daylight Time)">04:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">you can make an issue in <a href="https://github.com/tc39/tg5/issues">https://github.com/tc39/tg5/issues</a> or add it here: <a href="https://github.com/tc39/tg5/issues/29">https://github.com/tc39/tg5/issues/29</a></td></tr>
  <tr class="msg" id="L374"><td class="ts-cell"><a class="ts" href="#L374" alt="Tue Oct 08 2024 22:00:06 GMT-0700 (Pacific Daylight Time)">05:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">then at our next meeting we will bring it up as a request for help from the committee, and we will see if one of the universities wants to take it up</td></tr>
  <tr class="msg" id="L375"><td class="ts-cell"><a class="ts" href="#L375" alt="Tue Oct 08 2024 22:02:29 GMT-0700 (Pacific Daylight Time)">05:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Thanks, I'll look into this after plenary.</td></tr>
  <tr class="msg" id="L376"><td class="ts-cell"><a class="ts" href="#L376" alt="Tue Oct 08 2024 22:07:22 GMT-0700 (Pacific Daylight Time)">05:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">hot take: I'm kinda okay with engine divergence on stupid stuff that nobody should ever be observing</td></tr>
  <tr class="msg" id="L377"><td class="ts-cell"><a class="ts" href="#L377" alt="Tue Oct 08 2024 22:07:28 GMT-0700 (Pacific Daylight Time)">05:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">maybe that's a lukewarm take, I dunno</td></tr>
  <tr class="msg" id="L378"><td class="ts-cell"><a class="ts" href="#L378" alt="Tue Oct 08 2024 22:08:28 GMT-0700 (Pacific Daylight Time)">05:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">it's like natural fuzz testing of apps</td></tr>
  <tr class="msg" id="L379"><td class="ts-cell"><a class="ts" href="#L379" alt="Tue Oct 08 2024 22:14:25 GMT-0700 (Pacific Daylight Time)">05:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i think this is a ArrayBuffer-specific thing</td></tr>
  <tr class="msg" id="L380"><td class="ts-cell"><a class="ts" href="#L380" alt="Tue Oct 08 2024 22:14:36 GMT-0700 (Pacific Daylight Time)">05:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">like in general deviance is particularly bad for AB and TAs because of the whole Khronos thing</td></tr>
  <tr class="msg" id="L381"><td class="ts-cell"><a class="ts" href="#L381" alt="Tue Oct 08 2024 22:15:58 GMT-0700 (Pacific Daylight Time)">05:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Only stage 4 candidate of the day, there were like 4 yesterday</td></tr>
  <tr class="msg" id="L382"><td class="ts-cell"><a class="ts" href="#L382" alt="Tue Oct 08 2024 22:16:04 GMT-0700 (Pacific Daylight Time)">05:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Yeah AB is a pants on head crazy place</td></tr>
  <tr class="msg" id="L383"><td class="ts-cell"><a class="ts" href="#L383" alt="Tue Oct 08 2024 22:16:27 GMT-0700 (Pacific Daylight Time)">05:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">detach all the things</td></tr>
  <tr class="msg" id="L384"><td class="ts-cell"><a class="ts" href="#L384" alt="Tue Oct 08 2024 22:16:28 GMT-0700 (Pacific Daylight Time)">05:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">in particular that bug from the presentation is because what used to be a ToInteger changed to a ToIndex sometime in 2016</td></tr>
  <tr class="msg" id="L385"><td class="ts-cell"><a class="ts" href="#L385" alt="Tue Oct 08 2024 22:16:43 GMT-0700 (Pacific Daylight Time)">05:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/tc39/ecma262/pull/410">https://github.com/tc39/ecma262/pull/410</a></td></tr>
  <tr class="msg" id="L386"><td class="ts-cell"><a class="ts" href="#L386" alt="Tue Oct 08 2024 22:16:52 GMT-0700 (Pacific Daylight Time)">05:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Only stage 4 candidate of the day, there were like 4 yesterday</blockquote></mx-reply>it's the last one remaining for this meeting, is what I meant</td></tr>
  <tr class="msg" id="L387"><td class="ts-cell"><a class="ts" href="#L387" alt="Tue Oct 08 2024 22:17:04 GMT-0700 (Pacific Daylight Time)">05:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">like, it looks like SM was intimately involved with that PR at the time, which is probably why they're compliant</td></tr>
  <tr class="msg" id="L388"><td class="ts-cell"><a class="ts" href="#L388" alt="Tue Oct 08 2024 22:17:11 GMT-0700 (Pacific Daylight Time)">05:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">and this just never got implemented in JSC and V8 for whatever reason at the time</td></tr>
  <tr class="msg" id="L389"><td class="ts-cell"><a class="ts" href="#L389" alt="Tue Oct 08 2024 22:17:56 GMT-0700 (Pacific Daylight Time)">05:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> hot take: I'm kinda okay with engine divergence on stupid stuff that nobody should ever be observing</blockquote></mx-reply>yeah, experience with ABs and TAs show that this is surprisingly robust?</td></tr>
  <tr class="msg" id="L390"><td class="ts-cell"><a class="ts" href="#L390" alt="Tue Oct 08 2024 22:22:45 GMT-0700 (Pacific Daylight Time)">05:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">I was talking with an MDN writer -- I think we should make MDN a stage 4 requirement. MDN is very happy to write docs by themselves, but we don't really have a process to coordinate. Their current process is "regularly check what Firefox implements", which means that sometimes Stage 4 proposals (thus, meant to be used by developers) have no docs</td></tr>
  <tr class="msg" id="L391"><td class="ts-cell"><a class="ts" href="#L391" alt="Tue Oct 08 2024 22:23:29 GMT-0700 (Pacific Daylight Time)">05:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">we have a meta issue for all tc39 proposals</td></tr>
  <tr class="msg" id="L392"><td class="ts-cell"><a class="ts" href="#L392" alt="Tue Oct 08 2024 22:23:44 GMT-0700 (Pacific Daylight Time)">05:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1435811">https://bugzilla.mozilla.org/show_bug.cgi?id=1435811</a></td></tr>
  <tr class="msg" id="L393"><td class="ts-cell"><a class="ts" href="#L393" alt="Tue Oct 08 2024 22:23:58 GMT-0700 (Pacific Daylight Time)">05:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">and each proposal (now) has a meta that documentation watches</td></tr>
  <tr class="msg" id="L394"><td class="ts-cell"><a class="ts" href="#L394" alt="Tue Oct 08 2024 22:24:41 GMT-0700 (Pacific Daylight Time)">05:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I was talking with an MDN writer -- I think we should make MDN a stage 4 requirement. MDN is very happy to write docs by themselves, but we don't really have a process to coordinate. Their current process is "regularly check what Firefox implements", which means that sometimes Stage 4 proposals (thus, meant to be used by developers) have no docs</blockquote></mx-reply>it has come up a few times in the past before but TG2 already does this</td></tr>
  <tr class="msg" id="L395"><td class="ts-cell"><a class="ts" href="#L395" alt="Tue Oct 08 2024 22:24:43 GMT-0700 (Pacific Daylight Time)">05:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>I was talking with an MDN writer -- I think we should make MDN a stage 4 requirement. MDN is very happy to write docs by themselves, but we don't really have a process to coordinate. Their current process is "regularly check what Firefox implements", which means that sometimes Stage 4 proposals (thus, meant to be used by developers) have no docs</blockquote></mx-reply>we can't make something a requirement if it is entirely out of our control</td></tr>
  <tr class="msg" id="L396"><td class="ts-cell"><a class="ts" href="#L396" alt="Tue Oct 08 2024 22:24:46 GMT-0700 (Pacific Daylight Time)">05:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">and not at Stage 4</td></tr>
  <tr class="msg" id="L397"><td class="ts-cell"><a class="ts" href="#L397" alt="Tue Oct 08 2024 22:25:14 GMT-0700 (Pacific Daylight Time)">05:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">so yeah this is not unprecedented and we just need to bring it to agenda to get into the process doc I guess</td></tr>
  <tr class="msg" id="L398"><td class="ts-cell"><a class="ts" href="#L398" alt="Tue Oct 08 2024 22:25:36 GMT-0700 (Pacific Daylight Time)">05:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@abotella:igalia.com">Andreu Botella (at TC39, üïê JST)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> we can't make something a requirement if it is entirely out of our control</blockquote></mx-reply>MDN is a github repo</td></tr>
  <tr class="msg" id="L399"><td class="ts-cell"><a class="ts" href="#L399" alt="Tue Oct 08 2024 22:25:38 GMT-0700 (Pacific Daylight Time)">05:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> and each proposal (now) has a meta that documentation watches</blockquote></mx-reply>From what I understood, the problem is that it's still Firefox-centric. The ideal time to write docs is after that one implementation ships, and before stage 4. From Firefox's issue tracker, you can either get notified when a proposal reaches stage 3 (too early) or when Firerfox implements it (sometimes too late)</td></tr>
  <tr class="msg" id="L400"><td class="ts-cell"><a class="ts" href="#L400" alt="Tue Oct 08 2024 22:26:05 GMT-0700 (Pacific Daylight Time)">05:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">yep, thats true -- was giving some insight about how the process currently works</td></tr>
  <tr class="msg" id="L401"><td class="ts-cell"><a class="ts" href="#L401" alt="Tue Oct 08 2024 22:26:17 GMT-0700 (Pacific Daylight Time)">05:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">we don't actually tell MDN what to write about, and sometimes they write docs before we ship</td></tr>
  <tr class="msg" id="L402"><td class="ts-cell"><a class="ts" href="#L402" alt="Tue Oct 08 2024 22:26:28 GMT-0700 (Pacific Daylight Time)">05:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> we can't make something a requirement if it is entirely out of our control</blockquote></mx-reply>True, their recommendation was actually "require that MDN folks have been notified in advance so that they can make sure to prioritise docs"</td></tr>
  <tr class="msg" id="L403"><td class="ts-cell"><a class="ts" href="#L403" alt="Tue Oct 08 2024 22:26:29 GMT-0700 (Pacific Daylight Time)">05:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">they just watch that issue for upcoming topics</td></tr>
  <tr class="msg" id="L404"><td class="ts-cell"><a class="ts" href="#L404" alt="Tue Oct 08 2024 22:26:44 GMT-0700 (Pacific Daylight Time)">05:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">and we have a meta issue for every proposal at stage 3</td></tr>
  <tr class="msg" id="L405"><td class="ts-cell"><a class="ts" href="#L405" alt="Tue Oct 08 2024 22:27:02 GMT-0700 (Pacific Daylight Time)">05:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>True, their recommendation was actually "require that MDN folks have been notified in advance so that they can make sure to prioritise docs"</blockquote></mx-reply>that's fine by me</td></tr>
  <tr class="msg" id="L406"><td class="ts-cell"><a class="ts" href="#L406" alt="Tue Oct 08 2024 22:27:34 GMT-0700 (Pacific Daylight Time)">05:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">while I very much want the docs, I am wary of asking more from proposal champions</td></tr>
  <tr class="msg" id="L407"><td class="ts-cell"><a class="ts" href="#L407" alt="Tue Oct 08 2024 22:27:38 GMT-0700 (Pacific Daylight Time)">05:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>MDN is a github repo</blockquote></mx-reply>I am not an expert in the kinds of things that go into writing user-facing documentation</td></tr>
  <tr class="msg" id="L408"><td class="ts-cell"><a class="ts" href="#L408" alt="Tue Oct 08 2024 22:28:03 GMT-0700 (Pacific Daylight Time)">05:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> while I very much want the docs, I am wary of asking more from proposal champions</blockquote></mx-reply>They are not asking us to write docs for them (they are technical writers, it's their job!), just to coordinate better</td></tr>
  <tr class="msg" id="L409"><td class="ts-cell"><a class="ts" href="#L409" alt="Tue Oct 08 2024 22:28:35 GMT-0700 (Pacific Daylight Time)">05:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">then it doesn't seem like we can require it</td></tr>
  <tr class="msg" id="L410"><td class="ts-cell"><a class="ts" href="#L410" alt="Tue Oct 08 2024 22:28:59 GMT-0700 (Pacific Daylight Time)">05:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Well, HTML for example requires that a docs issue must have been opened before merging the change to the spec</td></tr>
  <tr class="msg" id="L411"><td class="ts-cell"><a class="ts" href="#L411" alt="Tue Oct 08 2024 22:29:30 GMT-0700 (Pacific Daylight Time)">05:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell"><span class="nick-9">nicolo-ribaudo</span>: which proposals were missed?</td></tr>
  <tr class="msg" id="L412"><td class="ts-cell"><a class="ts" href="#L412" alt="Tue Oct 08 2024 22:29:32 GMT-0700 (Pacific Daylight Time)">05:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">yeah I am fine with asking for an issue to be opened or something akin to that</td></tr>
  <tr class="msg" id="L413"><td class="ts-cell"><a class="ts" href="#L413" alt="Tue Oct 08 2024 22:30:45 GMT-0700 (Pacific Daylight Time)">05:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">I am fine with the spirit of it, but I hesitate to codify something 3rd party.  but if everyone supports it, I won't get in the way</td></tr>
  <tr class="msg" id="L414"><td class="ts-cell"><a class="ts" href="#L414" alt="Tue Oct 08 2024 22:30:46 GMT-0700 (Pacific Daylight Time)">05:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-9">nicolo-ribaudo</span>: which proposals were missed?</blockquote></mx-reply>Recent examples were symbols as weakmap keys and regexp v mode</td></tr>
  <tr class="msg" id="L415"><td class="ts-cell"><a class="ts" href="#L415" alt="Tue Oct 08 2024 22:31:10 GMT-0700 (Pacific Daylight Time)">05:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">a coworker and I tried to get ahead of the game with Temporal docs for MDN, back when the proposal went to stage 3. it was a frustrating experience because it was blocked for months on getting a Temporal key into the browser compatibility data repo. I had to conclude that the process wasn't really navigable for outsiders. I don't think we can really require it from our side</td></tr>
  <tr class="msg" id="L416"><td class="ts-cell"><a class="ts" href="#L416" alt="Tue Oct 08 2024 22:32:03 GMT-0700 (Pacific Daylight Time)">05:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><p><span class="nick-10">waldemar</span>: it's not a full pre-parse phase, it's an eager, regular parse phase. pre-parse = parse for syntax errors, do not generate an AST, do not generate bytecode. regular parse = parse, generate an AST, and bytecode.</p>
<p>since pre-parse is default, it turns out slower for a function that's immediately executed to first pre-parse, then to do a full parse. so this is a hint to say "skip that initial pre-parse, because it's gonna be called immediately"</p>
</td></tr>
  <tr class="msg" id="L417"><td class="ts-cell"><a class="ts" href="#L417" alt="Tue Oct 08 2024 22:33:39 GMT-0700 (Pacific Daylight Time)">05:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">ah, i completely anticipated the wrong question <span class="nick-10">waldemar</span>, apologies</td></tr>
  <tr class="msg" id="L418"><td class="ts-cell"><a class="ts" href="#L418" alt="Tue Oct 08 2024 22:45:18 GMT-0700 (Pacific Daylight Time)">05:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">‚ö†Ô∏è Remember that this room is public </td></tr>
  <tr class="msg" id="L419"><td class="ts-cell"><a class="ts" href="#L419" alt="Tue Oct 08 2024 22:45:38 GMT-0700 (Pacific Daylight Time)">05:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">yes, do not discuss topic here, or anywhere in matrix for that matter</td></tr>
  <tr class="msg" id="L420"><td class="ts-cell"><a class="ts" href="#L420" alt="Tue Oct 08 2024 22:46:05 GMT-0700 (Pacific Daylight Time)">05:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@akirose:matrix.org">Aki</span>&gt;</div></td><td class="msg-cell"><code>/set mode +m</code></td></tr>
  <tr class="msg" id="L421"><td class="ts-cell"><a class="ts" href="#L421" alt="Tue Oct 08 2024 22:47:17 GMT-0700 (Pacific Daylight Time)">05:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">Due to explicit lazy-loading, our system lends itself to loading code that is highly likely to be executed.  Prior to us rolling out client-side code-caching, we found maximal PIFEs sped up app load times.  The marginal cost of the unnecessary preparse was costing a lot (&gt;100ms.). I believe the need for those legacy-style hints went away after we switch to bytecode caching with high hit rates (90%+ of modules hit the cache).  But for cache misses, I would expect the source hints to still be valuable.</td></tr>
  <tr class="msg" id="L422"><td class="ts-cell"><a class="ts" href="#L422" alt="Tue Oct 08 2024 22:48:22 GMT-0700 (Pacific Daylight Time)">05:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">what is the point of <code>void</code> there (this question should be separate from the topic, I assume)</td></tr>
  <tr class="msg" id="L423"><td class="ts-cell"><a class="ts" href="#L423" alt="Tue Oct 08 2024 22:53:38 GMT-0700 (Pacific Daylight Time)">05:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> what is the point of <code>void</code> there (this question should be separate from the topic, I assume)</blockquote></mx-reply>just ignore the value?</td></tr>
  <tr class="msg" id="L424"><td class="ts-cell"><a class="ts" href="#L424" alt="Tue Oct 08 2024 22:54:00 GMT-0700 (Pacific Daylight Time)">05:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">yeah, I guess so</td></tr>
  <tr class="msg" id="L425"><td class="ts-cell"><a class="ts" href="#L425" alt="Tue Oct 08 2024 22:54:20 GMT-0700 (Pacific Daylight Time)">05:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell">what's the behavior of<code>seal</code> and <code>freeze</code> on resizeable typed array?</td></tr>
  <tr class="msg" id="L426"><td class="ts-cell"><a class="ts" href="#L426" alt="Tue Oct 08 2024 22:54:34 GMT-0700 (Pacific Daylight Time)">05:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell">I remember <code>freeze</code> just throw?</td></tr>
  <tr class="msg" id="L427"><td class="ts-cell"><a class="ts" href="#L427" alt="Tue Oct 08 2024 22:55:10 GMT-0700 (Pacific Daylight Time)">05:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell">so another option is just throw?</td></tr>
  <tr class="msg" id="L428"><td class="ts-cell"><a class="ts" href="#L428" alt="Tue Oct 08 2024 22:57:51 GMT-0700 (Pacific Daylight Time)">05:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">ü§´</td></tr>
  <tr class="msg" id="L429"><td class="ts-cell"><a class="ts" href="#L429" alt="Tue Oct 08 2024 23:29:29 GMT-0700 (Pacific Daylight Time)">06:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> what is the point of <code>void</code> there (this question should be separate from the topic, I assume)</blockquote></mx-reply>how topical!</td></tr>
  <tr class="msg" id="L430"><td class="ts-cell"><a class="ts" href="#L430" alt="Tue Oct 08 2024 23:34:38 GMT-0700 (Pacific Daylight Time)">06:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">hah!</td></tr>
  <tr class="msg" id="L431"><td class="ts-cell"><a class="ts" href="#L431" alt="Tue Oct 08 2024 23:34:50 GMT-0700 (Pacific Daylight Time)">06:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">I just couldn't wait ;)</td></tr>
  <tr class="msg" id="L432"><td class="ts-cell"><a class="ts" href="#L432" alt="Tue Oct 08 2024 23:35:42 GMT-0700 (Pacific Daylight Time)">06:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">that'd be an awfully large needs-consensus PR methinks</td></tr>
  <tr class="msg" id="L433"><td class="ts-cell"><a class="ts" href="#L433" alt="Tue Oct 08 2024 23:36:37 GMT-0700 (Pacific Daylight Time)">06:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">yeah there's no way that could be done as a needs-consensus PR</td></tr>
  <tr class="msg" id="L434"><td class="ts-cell"><a class="ts" href="#L434" alt="Tue Oct 08 2024 23:47:34 GMT-0700 (Pacific Daylight Time)">06:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">it‚Äôs not just linters: if you use VS Code, then you will immediately get things marked if they are unused, kinda like a soft error, and with void, you wouldn‚Äôt get it marked. I guess tools could learn a convention like _a and do the same.</td></tr>
  <tr class="msg" id="L435"><td class="ts-cell"><a class="ts" href="#L435" alt="Tue Oct 08 2024 23:49:22 GMT-0700 (Pacific Daylight Time)">06:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">TS also warns on it unless you follow their nonconfigurable convention</td></tr>
  <tr class="msg" id="L436"><td class="ts-cell"><a class="ts" href="#L436" alt="Tue Oct 08 2024 23:50:42 GMT-0700 (Pacific Daylight Time)">06:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">All of this shows that we made a mistake in the design of using</td></tr>
  <tr class="msg" id="L437"><td class="ts-cell"><a class="ts" href="#L437" alt="Tue Oct 08 2024 23:53:26 GMT-0700 (Pacific Daylight Time)">06:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">this is what pattern matching explained why a <code>void</code> is better</td></tr>
  <tr class="msg" id="L438"><td class="ts-cell"><a class="ts" href="#L438" alt="Tue Oct 08 2024 23:54:27 GMT-0700 (Pacific Daylight Time)">06:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell">Though I guess pattern matching could still make <code>_</code> special case, make it work like <code>Any</code> pattern.</td></tr>
  <tr class="msg" id="L439"><td class="ts-cell"><a class="ts" href="#L439" alt="Tue Oct 08 2024 23:54:48 GMT-0700 (Pacific Daylight Time)">06:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> All of this shows that we made a mistake in the design of using</blockquote></mx-reply>What mistake?</td></tr>
  <tr class="msg" id="L440"><td class="ts-cell"><a class="ts" href="#L440" alt="Tue Oct 08 2024 23:54:57 GMT-0700 (Pacific Daylight Time)">06:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><p>for pattern mathcing currently the following works:</p><pre><code class="language-js">when { x: let _ }: // unused _
when { let x }:  // unused x
when has 'x': // test 'x' in subject (a possibly extension)
</code></pre></td></tr>
  <tr class="msg" id="L441"><td class="ts-cell"><a class="ts" href="#L441" alt="Tue Oct 08 2024 23:56:38 GMT-0700 (Pacific Daylight Time)">06:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell">how <code>when has 'x'</code> work for multiple property?</td></tr>
  <tr class="msg" id="L442"><td class="ts-cell"><a class="ts" href="#L442" alt="Tue Oct 08 2024 23:56:53 GMT-0700 (Pacific Daylight Time)">06:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><pre><code class="language-js">when has 'x' and has 'y'
</code></pre></td></tr>
  <tr class="msg" id="L443"><td class="ts-cell"><a class="ts" href="#L443" alt="Tue Oct 08 2024 23:56:54 GMT-0700 (Pacific Daylight Time)">06:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> What mistake?</blockquote></mx-reply>Using <code>using ID = ...</code> instead of something else (example: <code>using { expression }</code>)</td></tr>
  <tr class="msg" id="L444"><td class="ts-cell"><a class="ts" href="#L444" alt="Tue Oct 08 2024 23:57:18 GMT-0700 (Pacific Daylight Time)">06:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <pre><code class="language-js">when has 'x' and has 'y'
</code></pre></blockquote></mx-reply>Not bad üôÑ</td></tr>
  <tr class="msg" id="L445"><td class="ts-cell"><a class="ts" href="#L445" alt="Tue Oct 08 2024 23:57:34 GMT-0700 (Pacific Daylight Time)">06:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><p>or</p><pre><code class="language-js">when { let something } and has 'x': ...
</code></pre></td></tr>
  <tr class="msg" id="L446"><td class="ts-cell"><a class="ts" href="#L446" alt="Tue Oct 08 2024 23:58:16 GMT-0700 (Pacific Daylight Time)">06:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Using <code>using ID = ...</code> instead of something else (example: <code>using { expression }</code>)</blockquote></mx-reply>I remember ron mentioned some reasons why not do that , but I can't recall</td></tr>
  <tr class="msg" id="L447"><td class="ts-cell"><a class="ts" href="#L447" alt="Tue Oct 08 2024 23:58:16 GMT-0700 (Pacific Daylight Time)">06:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">note <code>{ let x }</code> and <code>has 'x'</code> are both additional feature and may not exist in the final version. see <a href="https://tc39.es/proposal-pattern-matching/">https://tc39.es/proposal-pattern-matching/</a> for details</td></tr>
  <tr class="msg" id="L448"><td class="ts-cell"><a class="ts" href="#L448" alt="Tue Oct 08 2024 23:59:34 GMT-0700 (Pacific Daylight Time)">06:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><pre><code class="language-js">when [let _, let _2, let _3, let x]: ...
when [void, void, void, let x]: ...
when [,,, let x]: ...
</code></pre></td></tr>
  <tr class="msg" id="L449"><td class="ts-cell"><a class="ts" href="#L449" alt="Tue Oct 08 2024 23:59:57 GMT-0700 (Pacific Daylight Time)">06:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell">Consider pattern match is new syntax, we always can make <code>when { x: _ }</code> work, (at least work if there is no <code>_</code> binding exist?)</td></tr>
  <tr class="msg" id="L450"><td class="ts-cell"><a class="ts" href="#L450" alt="Tue Oct 08 2024 23:59:57 GMT-0700 (Pacific Daylight Time)">06:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">This proposal is good. I hope we do it.</td></tr>
  <tr class="msg" id="L451"><td class="ts-cell"><a class="ts" href="#L451" alt="Wed Oct 09 2024 00:00:12 GMT-0700 (Pacific Daylight Time)">07:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">I wonder how browsers feel about this, if they want it to be a desugaring</td></tr>
  <tr class="msg" id="L452"><td class="ts-cell"><a class="ts" href="#L452" alt="Wed Oct 09 2024 00:00:16 GMT-0700 (Pacific Daylight Time)">07:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Consider pattern match is new syntax, we always can make <code>when { x: _ }</code> work, (at least work if there is no <code>_</code> binding exist?)</blockquote></mx-reply>it would be very bad if it sometimes was a binding and sometimes was a discard</td></tr>
  <tr class="msg" id="L453"><td class="ts-cell"><a class="ts" href="#L453" alt="Wed Oct 09 2024 00:00:23 GMT-0700 (Pacific Daylight Time)">07:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Consider pattern match is new syntax, we always can make <code>when { x: _ }</code> work, (at least work if there is no <code>_</code> binding exist?)</blockquote></mx-reply>this is one of the possible solution what suggested in this discarding proposal</td></tr>
  <tr class="msg" id="L454"><td class="ts-cell"><a class="ts" href="#L454" alt="Wed Oct 09 2024 00:01:10 GMT-0700 (Pacific Daylight Time)">07:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> it would be very bad if it sometimes was a binding and sometimes was a discard</blockquote></mx-reply>I agree, but <code>_</code> is special case. (it's already special in practice)</td></tr>
  <tr class="msg" id="L455"><td class="ts-cell"><a class="ts" href="#L455" alt="Wed Oct 09 2024 00:01:33 GMT-0700 (Pacific Daylight Time)">07:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">the contention on the discard bindings proposal is that some think it is, and some think it's not. i think it's not. some people definitely <em>treat</em> it as if it's special, is all.</td></tr>
  <tr class="msg" id="L456"><td class="ts-cell"><a class="ts" href="#L456" alt="Wed Oct 09 2024 00:01:45 GMT-0700 (Pacific Daylight Time)">07:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Ron mentioned  that <code data-md="`">when { x: y } =&gt; ‚Ä¶</code> means that it‚Äôs matching that the object has the structure <code data-md="`">{x}</code> and <code data-md="`">x</code>‚Äôs current value is equal to <code data-md="`">y</code>. Rust doesn‚Äôt have that, it only matches structure and extracts values, you use an additional <code data-md="`">when { x } if (x === y) =&gt; ‚Ä¶</code> to specify an exact value.</td></tr>
  <tr class="msg" id="L457"><td class="ts-cell"><a class="ts" href="#L457" alt="Wed Oct 09 2024 00:02:02 GMT-0700 (Pacific Daylight Time)">07:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Ron mentioned  that <code data-md="`">when { x: y } =&gt; ‚Ä¶</code> means that it‚Äôs matching that the object has the structure <code data-md="`">{x}</code> and <code data-md="`">x</code>‚Äôs current value is equal to <code data-md="`">y</code>. Rust doesn‚Äôt have that, it only matches structure and extracts values, you use an additional <code data-md="`">when { x } if (x === y) =&gt; ‚Ä¶</code> to specify an exact value.</blockquote></mx-reply><p>FWIW</p>
<p><a href="https://x.com/pcwalton/status/1359970388839550976">https://x.com/pcwalton/status/1359970388839550976</a><br><a href="https://x.com/UINT_MIN/status/1359977668460957696">https://x.com/UINT_MIN/status/1359977668460957696</a></p>
</td></tr>
  <tr class="msg" id="L458"><td class="ts-cell"><a class="ts" href="#L458" alt="Wed Oct 09 2024 00:02:12 GMT-0700 (Pacific Daylight Time)">07:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">I just haven‚Äôt seen the _otherString pattern in enough cases where it felt like something someone actually wanted to write</td></tr>
  <tr class="msg" id="L459"><td class="ts-cell"><a class="ts" href="#L459" alt="Wed Oct 09 2024 00:02:14 GMT-0700 (Pacific Daylight Time)">07:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">If JS didn't have two popular libraries regularly aliased as <code>_</code>, I'd say sure let's special case it. but unfortunately, we do.</td></tr>
  <tr class="msg" id="L460"><td class="ts-cell"><a class="ts" href="#L460" alt="Wed Oct 09 2024 00:02:35 GMT-0700 (Pacific Daylight Time)">07:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I wonder how browsers feel about this, if they want it to be a desugaring</blockquote></mx-reply>for me personally the complexity is pretty low unless i'm missing the parser work needed to resolve ambiguities</td></tr>
  <tr class="msg" id="L461"><td class="ts-cell"><a class="ts" href="#L461" alt="Wed Oct 09 2024 00:02:51 GMT-0700 (Pacific Daylight Time)">07:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">personally i think it is not necessary at all but i won't fight against it</td></tr>
  <tr class="msg" id="L462"><td class="ts-cell"><a class="ts" href="#L462" alt="Wed Oct 09 2024 00:03:07 GMT-0700 (Pacific Daylight Time)">07:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">happy to take devs at their word here</td></tr>
  <tr class="msg" id="L463"><td class="ts-cell"><a class="ts" href="#L463" alt="Wed Oct 09 2024 00:03:08 GMT-0700 (Pacific Daylight Time)">07:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">yeah this looks pretty minor to me as well</td></tr>
  <tr class="msg" id="L464"><td class="ts-cell"><a class="ts" href="#L464" alt="Wed Oct 09 2024 00:03:09 GMT-0700 (Pacific Daylight Time)">07:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> If JS didn't have two popular libraries regularly aliased as <code>_</code>, I'd say sure let's special case it. but unfortunately, we do.</blockquote></mx-reply>but I think most people do not use <code>_</code> as the alias in recent years I guess?</td></tr>
  <tr class="msg" id="L465"><td class="ts-cell"><a class="ts" href="#L465" alt="Wed Oct 09 2024 00:03:14 GMT-0700 (Pacific Daylight Time)">07:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> for me personally the complexity is pretty low unless i'm missing the parser work needed to resolve ambiguities</blockquote></mx-reply>This is really helpful to understand: it is a cost/benefit tradeoff, and here the cost is low</td></tr>
  <tr class="msg" id="L466"><td class="ts-cell"><a class="ts" href="#L466" alt="Wed Oct 09 2024 00:03:30 GMT-0700 (Pacific Daylight Time)">07:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> but I think most people do not use <code>_</code> as the alias in recent years I guess?</blockquote></mx-reply>tons of people still do for underscore/lodash, at least</td></tr>
  <tr class="msg" id="L467"><td class="ts-cell"><a class="ts" href="#L467" alt="Wed Oct 09 2024 00:03:31 GMT-0700 (Pacific Daylight Time)">07:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">it's always a cost/benefit tradeoff</td></tr>
  <tr class="msg" id="L468"><td class="ts-cell"><a class="ts" href="#L468" alt="Wed Oct 09 2024 00:03:43 GMT-0700 (Pacific Daylight Time)">07:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">like if there's no cost ot make devs happier, why wouldn't we?</td></tr>
  <tr class="msg" id="L469"><td class="ts-cell"><a class="ts" href="#L469" alt="Wed Oct 09 2024 00:03:52 GMT-0700 (Pacific Daylight Time)">07:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote><p>FWIW</p>
<p><a href="https://x.com/pcwalton/status/1359970388839550976">https://x.com/pcwalton/status/1359970388839550976</a><br><a href="https://x.com/UINT_MIN/status/1359977668460957696">https://x.com/UINT_MIN/status/1359977668460957696</a></p>
</blockquote></mx-reply>I‚Äôm missing context, what are they trying to say?</td></tr>
  <tr class="msg" id="L470"><td class="ts-cell"><a class="ts" href="#L470" alt="Wed Oct 09 2024 00:03:55 GMT-0700 (Pacific Daylight Time)">07:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Regarding Rust pattern matching. Rust knows statically whether a RHS in a pattern is an existing binding or a new binding, JS does not. Any code could introduce a new global that could change the meaning of something like <code>match (value) { { x: x, y: y }: ... }</code></td></tr>
  <tr class="msg" id="L471"><td class="ts-cell"><a class="ts" href="#L471" alt="Wed Oct 09 2024 00:04:01 GMT-0700 (Pacific Daylight Time)">07:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Why would it make devs happier if they are all using tools?</td></tr>
  <tr class="msg" id="L472"><td class="ts-cell"><a class="ts" href="#L472" alt="Wed Oct 09 2024 00:04:18 GMT-0700 (Pacific Daylight Time)">07:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Well I hate devs personally :P</td></tr>
  <tr class="msg" id="L473"><td class="ts-cell"><a class="ts" href="#L473" alt="Wed Oct 09 2024 00:04:47 GMT-0700 (Pacific Daylight Time)">07:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">well i do also respect the haters</td></tr>
  <tr class="msg" id="L474"><td class="ts-cell"><a class="ts" href="#L474" alt="Wed Oct 09 2024 00:04:49 GMT-0700 (Pacific Daylight Time)">07:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Because JS cannot determine this statically, the pattern matching proposal says an identifier in a pattern is <em>always</em> a reference. If you intend it to be a declaration, you must use <code>let</code>/<code>const</code>/<code>var</code> to declare it.</td></tr>
  <tr class="msg" id="L475"><td class="ts-cell"><a class="ts" href="#L475" alt="Wed Oct 09 2024 00:05:21 GMT-0700 (Pacific Daylight Time)">07:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>Regarding Rust pattern matching. Rust knows statically whether a RHS in a pattern is an existing binding or a new binding, JS does not. Any code could introduce a new global that could change the meaning of something like <code>match (value) { { x: x, y: y }: ... }</code></blockquote></mx-reply>Because your patten matching means something different than Rust's.</td></tr>
  <tr class="msg" id="L476"><td class="ts-cell"><a class="ts" href="#L476" alt="Wed Oct 09 2024 00:05:30 GMT-0700 (Pacific Daylight Time)">07:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>So you would write</p>
<pre><code class="language-js">match (value) {
  { x: let x, y: let y }: doSomething(x, y),
}
</code></pre>
</td></tr>
  <tr class="msg" id="L477"><td class="ts-cell"><a class="ts" href="#L477" alt="Wed Oct 09 2024 00:05:38 GMT-0700 (Pacific Daylight Time)">07:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> tons of people still do for underscore/lodash, at least</blockquote></mx-reply>Not sure about it. I think people use <code>_</code> or <code>$</code> in no module era (before commonjs), it seems become less and less after we adopt modules, especially esm.</td></tr>
  <tr class="msg" id="L478"><td class="ts-cell"><a class="ts" href="#L478" alt="Wed Oct 09 2024 00:06:08 GMT-0700 (Pacific Daylight Time)">07:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">The context is that you have a choice in pattern matching on whether a bare identifier denotes a new binding, or an existing binding to be checked against</td></tr>
  <tr class="msg" id="L479"><td class="ts-cell"><a class="ts" href="#L479" alt="Wed Oct 09 2024 00:06:27 GMT-0700 (Pacific Daylight Time)">07:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Regarding Rust pattern matching. Rust knows statically whether a RHS in a pattern is an existing binding or a new binding, JS does not. Any code could introduce a new global that could change the meaning of something like <code>match (value) { { x: x, y: y }: ... }</code></blockquote></mx-reply><p>In rust it's just syntax-based, right? i.e. in this case you are introducing a new binding <code>x</code>:</p>
<pre><code class="language-rust">fn main() {
    let x = 42;
    let y = Some(3);
    match y {
        Some(x) =&gt; println!("Some"),
        _ =&gt; println!("Other")
    }
}
</code></pre>
</td></tr>
  <tr class="msg" id="L480"><td class="ts-cell"><a class="ts" href="#L480" alt="Wed Oct 09 2024 00:06:29 GMT-0700 (Pacific Daylight Time)">07:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Because your patten matching means something different than Rust's.</blockquote></mx-reply>It only really differs in how bindings are declared, by necessity.</td></tr>
  <tr class="msg" id="L481"><td class="ts-cell"><a class="ts" href="#L481" alt="Wed Oct 09 2024 00:06:59 GMT-0700 (Pacific Daylight Time)">07:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Not sure about it. I think people use <code>_</code> or <code>$</code> in no module era (before commonjs), it seems become less and less after we adopt modules, especially esm.</blockquote></mx-reply>123K results on github alone <a href="https://github.com/search?q=%22import+*+as+_+from+%27lodash%27%22&amp;type=code">https://github.com/search?q=%22import+*+as+_+from+%27lodash%27%22&amp;type=code</a></td></tr>
  <tr class="msg" id="L482"><td class="ts-cell"><a class="ts" href="#L482" alt="Wed Oct 09 2024 00:07:32 GMT-0700 (Pacific Daylight Time)">07:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote><p>In rust it's just syntax-based, right? i.e. in this case you are introducing a new binding <code>x</code>:</p>
<pre><code class="language-rust">fn main() {
    let x = 42;
    let y = Some(3);
    match y {
        Some(x) =&gt; println!("Some"),
        _ =&gt; println!("Other")
    }
}
</code></pre>
</blockquote></mx-reply>You are always introducing a new binding <code data-md="`">x</code>, you are never matching a value <code data-md="`">y === Some(x)</code></td></tr>
  <tr class="msg" id="L483"><td class="ts-cell"><a class="ts" href="#L483" alt="Wed Oct 09 2024 00:08:03 GMT-0700 (Pacific Daylight Time)">07:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">To match a value, you use an <code data-md="`">if</code> check on the case</td></tr>
  <tr class="msg" id="L484"><td class="ts-cell"><a class="ts" href="#L484" alt="Wed Oct 09 2024 00:08:22 GMT-0700 (Pacific Daylight Time)">07:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>In rust it's just syntax-based, right? i.e. in this case you are introducing a new binding <code>x</code>:</p>
<pre><code class="language-rust">fn main() {
    let x = 42;
    let y = Some(3);
    match y {
        Some(x) =&gt; println!("Some"),
        _ =&gt; println!("Other")
    }
}
</code></pre>
</blockquote></mx-reply><code>Some(x):</code> may seem obvious, but what about just <code>{ x: Number }</code>. Should I be declaring a new variable named <code>Number</code> or referencing the <code>Number</code> constructor?</td></tr>
  <tr class="msg" id="L485"><td class="ts-cell"><a class="ts" href="#L485" alt="Wed Oct 09 2024 00:08:35 GMT-0700 (Pacific Daylight Time)">07:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> yeah this looks pretty minor to me as well</blockquote></mx-reply>would there be any (tiny) advantage to engines, to immediately know the binding is a discard as opposed to discovering that only once the parse finished? Potentially keeping the set of names to track smaller</td></tr>
  <tr class="msg" id="L486"><td class="ts-cell"><a class="ts" href="#L486" alt="Wed Oct 09 2024 00:08:41 GMT-0700 (Pacific Daylight Time)">07:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> 123K results on github alone <a href="https://github.com/search?q=%22import+*+as+_+from+%27lodash%27%22&amp;type=code">https://github.com/search?q=%22import+*+as+_+from+%27lodash%27%22&amp;type=code</a></blockquote></mx-reply>ok, let me write a bot to send PRs üòÇ</td></tr>
  <tr class="msg" id="L487"><td class="ts-cell"><a class="ts" href="#L487" alt="Wed Oct 09 2024 00:08:55 GMT-0700 (Pacific Daylight Time)">07:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">lol, careful github doesn't autoban you :-p</td></tr>
  <tr class="msg" id="L488"><td class="ts-cell"><a class="ts" href="#L488" alt="Wed Oct 09 2024 00:09:22 GMT-0700 (Pacific Daylight Time)">07:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> would there be any (tiny) advantage to engines, to immediately know the binding is a discard as opposed to discovering that only once the parse finished? Potentially keeping the set of names to track smaller</blockquote></mx-reply>Do implementations need to declare the number of locals within a function? That increases the memory size of a function at runtime.</td></tr>
  <tr class="msg" id="L489"><td class="ts-cell"><a class="ts" href="#L489" alt="Wed Oct 09 2024 00:09:28 GMT-0700 (Pacific Daylight Time)">07:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> would there be any (tiny) advantage to engines, to immediately know the binding is a discard as opposed to discovering that only once the parse finished? Potentially keeping the set of names to track smaller</blockquote></mx-reply>erm. maybe i am sleep deprived, how would we do this before parse?</td></tr>
  <tr class="msg" id="L490"><td class="ts-cell"><a class="ts" href="#L490" alt="Wed Oct 09 2024 00:09:37 GMT-0700 (Pacific Daylight Time)">07:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">yep (we do anyway)</td></tr>
  <tr class="msg" id="L491"><td class="ts-cell"><a class="ts" href="#L491" alt="Wed Oct 09 2024 00:10:09 GMT-0700 (Pacific Daylight Time)">07:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">So yes, there is probably a tiny benefit to implementations since they don't need to hold onto a local for those variables.</td></tr>
  <tr class="msg" id="L492"><td class="ts-cell"><a class="ts" href="#L492" alt="Wed Oct 09 2024 00:10:29 GMT-0700 (Pacific Daylight Time)">07:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">The spec text also skips adding a binding.</td></tr>
  <tr class="msg" id="L493"><td class="ts-cell"><a class="ts" href="#L493" alt="Wed Oct 09 2024 00:10:38 GMT-0700 (Pacific Daylight Time)">07:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">I was thinking 'during the parse', rather than 'before the parse'</td></tr>
  <tr class="msg" id="L494"><td class="ts-cell"><a class="ts" href="#L494" alt="Wed Oct 09 2024 00:11:36 GMT-0700 (Pacific Daylight Time)">07:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Can anyone on the call hear the room?</td></tr>
  <tr class="msg" id="L495"><td class="ts-cell"><a class="ts" href="#L495" alt="Wed Oct 09 2024 00:11:41 GMT-0700 (Pacific Daylight Time)">07:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell"><em>thinking</em></td></tr>
  <tr class="msg" id="L496"><td class="ts-cell"><a class="ts" href="#L496" alt="Wed Oct 09 2024 00:11:44 GMT-0700 (Pacific Daylight Time)">07:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">For a <code>using</code> you still need to basically keep the "discarded" value around until the end of the scope, so even if it's not identifiable by a variable name, some work needs to happen.</td></tr>
  <tr class="msg" id="L497"><td class="ts-cell"><a class="ts" href="#L497" alt="Wed Oct 09 2024 00:12:27 GMT-0700 (Pacific Daylight Time)">07:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">(right?)</td></tr>
  <tr class="msg" id="L498"><td class="ts-cell"><a class="ts" href="#L498" alt="Wed Oct 09 2024 00:12:37 GMT-0700 (Pacific Daylight Time)">07:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">shu</span> It's what the user reads in the callback of the event listener</td></tr>
  <tr class="msg" id="L499"><td class="ts-cell"><a class="ts" href="#L499" alt="Wed Oct 09 2024 00:12:46 GMT-0700 (Pacific Daylight Time)">07:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> For a <code>using</code> you still need to basically keep the "discarded" value around until the end of the scope, so even if it's not identifiable by a variable name, some work needs to happen.</blockquote></mx-reply>For a <code>using</code>, there are two memory locations that hold the value. One is in the environment record for later disposal, the other is in the variable binding itself.</td></tr>
  <tr class="msg" id="L500"><td class="ts-cell"><a class="ts" href="#L500" alt="Wed Oct 09 2024 00:12:54 GMT-0700 (Pacific Daylight Time)">07:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">you would still do the whole parse before constructing the necessary stuff for the script's representation. so this wouldn't be a benefit during parse i think... i don't recall the details of the proposal right now -- if a const binding is void is that name disallowed in the function? im not sure it would help, that might just be more stuff to track and then throw errors on</td></tr>
  <tr class="msg" id="L501"><td class="ts-cell"><a class="ts" href="#L501" alt="Wed Oct 09 2024 00:13:04 GMT-0700 (Pacific Daylight Time)">07:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-8">shu</span> It's what the user reads in the callback of the event listener</blockquote></mx-reply>so "nullable" on that slide means "could be null in the case there was no JS code that triggered the dispatch"</td></tr>
  <tr class="msg" id="L502"><td class="ts-cell"><a class="ts" href="#L502" alt="Wed Oct 09 2024 00:13:17 GMT-0700 (Pacific Daylight Time)">07:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">you'd still have to do the full parse. but, we could discard it as part of our count of things that are local to the function, thats true</td></tr>
  <tr class="msg" id="L503"><td class="ts-cell"><a class="ts" href="#L503" alt="Wed Oct 09 2024 00:13:24 GMT-0700 (Pacific Daylight Time)">07:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">i don't think its a huge improvement </td></tr>
  <tr class="msg" id="L504"><td class="ts-cell"><a class="ts" href="#L504" alt="Wed Oct 09 2024 00:13:32 GMT-0700 (Pacific Daylight Time)">07:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Is there time for a timebox extension? This proposal deserves a bit of discussion</td></tr>
  <tr class="msg" id="L505"><td class="ts-cell"><a class="ts" href="#L505" alt="Wed Oct 09 2024 00:14:07 GMT-0700 (Pacific Daylight Time)">07:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">yes</td></tr>
  <tr class="msg" id="L506"><td class="ts-cell"><a class="ts" href="#L506" alt="Wed Oct 09 2024 00:14:31 GMT-0700 (Pacific Daylight Time)">07:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">yeah it should've been given a bigger timebox to begin with</td></tr>
  <tr class="msg" id="L507"><td class="ts-cell"><a class="ts" href="#L507" alt="Wed Oct 09 2024 00:14:35 GMT-0700 (Pacific Daylight Time)">07:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><pre><code class="language-js">
x.run("registration", () =&gt; {
  addEventListener("foo", () =&gt; { x.get() })
});

x.run("dispatch", () =&gt; {
dispatchEvent("foo")
})
</code></pre>
</td></tr>
  <tr class="msg" id="L508"><td class="ts-cell"><a class="ts" href="#L508" alt="Wed Oct 09 2024 00:14:46 GMT-0700 (Pacific Daylight Time)">07:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">^ example of the two contexts</td></tr>
  <tr class="msg" id="L509"><td class="ts-cell"><a class="ts" href="#L509" alt="Wed Oct 09 2024 00:15:02 GMT-0700 (Pacific Daylight Time)">07:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">If the dispatch happens from user interaction, than that's null</td></tr>
  <tr class="msg" id="L510"><td class="ts-cell"><a class="ts" href="#L510" alt="Wed Oct 09 2024 00:15:10 GMT-0700 (Pacific Daylight Time)">07:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">If it's from JS code, there is something</td></tr>
  <tr class="msg" id="L511"><td class="ts-cell"><a class="ts" href="#L511" alt="Wed Oct 09 2024 00:15:17 GMT-0700 (Pacific Daylight Time)">07:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">uh i forget the signature for run()</td></tr>
  <tr class="msg" id="L512"><td class="ts-cell"><a class="ts" href="#L512" alt="Wed Oct 09 2024 00:16:11 GMT-0700 (Pacific Daylight Time)">07:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>uh i forget the signature for run()</blockquote></mx-reply>The first param is the new internal value of the async var, the second is a callback that is invoked immedaitely. When the callback returns, the internal value is reset to the previous value.</td></tr>
  <tr class="msg" id="L513"><td class="ts-cell"><a class="ts" href="#L513" alt="Wed Oct 09 2024 00:18:44 GMT-0700 (Pacific Daylight Time)">07:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">hello everyone, I am your ersatz chair for the next 5 min</td></tr>
  <tr class="msg" id="L514"><td class="ts-cell"><a class="ts" href="#L514" alt="Wed Oct 09 2024 00:21:00 GMT-0700 (Pacific Daylight Time)">07:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">chair relinquished</td></tr>
  <tr class="msg" id="L515"><td class="ts-cell"><a class="ts" href="#L515" alt="Wed Oct 09 2024 00:21:03 GMT-0700 (Pacific Daylight Time)">07:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">you had a good run </td></tr>
  <tr class="msg" id="L516"><td class="ts-cell"><a class="ts" href="#L516" alt="Wed Oct 09 2024 00:31:49 GMT-0700 (Pacific Daylight Time)">07:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">For whoever can speak to Mark: I can come to TG3 next week if we don't get to your TCQ topic</td></tr>
  <tr class="msg" id="L517"><td class="ts-cell"><a class="ts" href="#L517" alt="Wed Oct 09 2024 00:32:29 GMT-0700 (Pacific Daylight Time)">07:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@akirose:matrix.org">Aki</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">ljharb</span>: ‚òùÔ∏è</td></tr>
  <tr class="msg" id="L518"><td class="ts-cell"><a class="ts" href="#L518" alt="Wed Oct 09 2024 00:34:36 GMT-0700 (Pacific Daylight Time)">07:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">Did the call drop remotely?</td></tr>
  <tr class="msg" id="L519"><td class="ts-cell"><a class="ts" href="#L519" alt="Wed Oct 09 2024 00:35:01 GMT-0700 (Pacific Daylight Time)">07:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">It was you in the room having problems</td></tr>
  <tr class="msg" id="L520"><td class="ts-cell"><a class="ts" href="#L520" alt="Wed Oct 09 2024 00:35:04 GMT-0700 (Pacific Daylight Time)">07:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">I could hear Mark well</td></tr>
  <tr class="msg" id="L521"><td class="ts-cell"><a class="ts" href="#L521" alt="Wed Oct 09 2024 00:47:14 GMT-0700 (Pacific Daylight Time)">07:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@akirose:matrix.org">Aki</span>&gt;</div></td><td class="msg-cell">while we're between agenda items: i'm looking for an example of a small proposal focussed on developer ergonomics that went through the stage process pretty smoothly in the past few years</td></tr>
  <tr class="msg" id="L522"><td class="ts-cell"><a class="ts" href="#L522" alt="Wed Oct 09 2024 00:48:47 GMT-0700 (Pacific Daylight Time)">07:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">I think Promise.try flew through pretty quick</td></tr>
  <tr class="msg" id="L523"><td class="ts-cell"><a class="ts" href="#L523" alt="Wed Oct 09 2024 00:48:53 GMT-0700 (Pacific Daylight Time)">07:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">Promise.withResolvers</td></tr>
  <tr class="msg" id="L524"><td class="ts-cell"><a class="ts" href="#L524" alt="Wed Oct 09 2024 00:49:34 GMT-0700 (Pacific Daylight Time)">07:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I think Promise.try flew through pretty quick</blockquote></mx-reply>8 years according to the champion</td></tr>
  <tr class="msg" id="L525"><td class="ts-cell"><a class="ts" href="#L525" alt="Wed Oct 09 2024 00:49:43 GMT-0700 (Pacific Daylight Time)">07:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">oops</td></tr>
  <tr class="msg" id="L526"><td class="ts-cell"><a class="ts" href="#L526" alt="Wed Oct 09 2024 00:50:00 GMT-0700 (Pacific Daylight Time)">07:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> 8 years according to the champion</blockquote></mx-reply>8 smooth years though</td></tr>
  <tr class="msg" id="L527"><td class="ts-cell"><a class="ts" href="#L527" alt="Wed Oct 09 2024 00:50:01 GMT-0700 (Pacific Daylight Time)">07:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">totally missed that part somehow lol</td></tr>
  <tr class="msg" id="L528"><td class="ts-cell"><a class="ts" href="#L528" alt="Wed Oct 09 2024 00:50:02 GMT-0700 (Pacific Daylight Time)">07:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">To be fair it has been at stage 1 for 7 of those 8 years</td></tr>
  <tr class="msg" id="L529"><td class="ts-cell"><a class="ts" href="#L529" alt="Wed Oct 09 2024 00:51:29 GMT-0700 (Pacific Daylight Time)">07:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">stage 2 to 4 was indeed smooth</td></tr>
  <tr class="msg" id="L530"><td class="ts-cell"><a class="ts" href="#L530" alt="Wed Oct 09 2024 00:51:33 GMT-0700 (Pacific Daylight Time)">07:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">1 to 2 was a beast tho</td></tr>
  <tr class="msg" id="L531"><td class="ts-cell"><a class="ts" href="#L531" alt="Wed Oct 09 2024 00:55:10 GMT-0700 (Pacific Daylight Time)">07:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">"gently unsure" is such a great phrasing</td></tr>
  <tr class="msg" id="L532"><td class="ts-cell"><a class="ts" href="#L532" alt="Wed Oct 09 2024 01:00:29 GMT-0700 (Pacific Daylight Time)">08:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">in general, for API features that are purely motivated by convenience, i'd like us to take a bigger scope view and do some prioritization</td></tr>
  <tr class="msg" id="L533"><td class="ts-cell"><a class="ts" href="#L533" alt="Wed Oct 09 2024 01:00:49 GMT-0700 (Pacific Daylight Time)">08:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">michael has followed a program of 'make iterators more helpful', which i personally agree is well motivated</td></tr>
  <tr class="msg" id="L534"><td class="ts-cell"><a class="ts" href="#L534" alt="Wed Oct 09 2024 01:01:08 GMT-0700 (Pacific Daylight Time)">08:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">but i do regularly hear the deficiency of the JS stdlib</td></tr>
  <tr class="msg" id="L535"><td class="ts-cell"><a class="ts" href="#L535" alt="Wed Oct 09 2024 01:02:09 GMT-0700 (Pacific Daylight Time)">08:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">to take a personal pet peeve: we don't have some pretty basic data structures, like Queue, and people are using arrays to poorly emulate. how does something like that weigh against 'make iterators even more helpful'</td></tr>
  <tr class="msg" id="L536"><td class="ts-cell"><a class="ts" href="#L536" alt="Wed Oct 09 2024 01:02:49 GMT-0700 (Pacific Daylight Time)">08:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">yeah, thats a good question</td></tr>
  <tr class="msg" id="L537"><td class="ts-cell"><a class="ts" href="#L537" alt="Wed Oct 09 2024 01:03:43 GMT-0700 (Pacific Daylight Time)">08:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">is that a true statement? I have always viewed the push/pop/shift/unshift methods to imply that arrays simply <em>are</em> stacks or queues or whatever</td></tr>
  <tr class="msg" id="L538"><td class="ts-cell"><a class="ts" href="#L538" alt="Wed Oct 09 2024 01:04:24 GMT-0700 (Pacific Daylight Time)">08:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">arrays are sadly queues, and stacks, and lists, all at once</td></tr>
  <tr class="msg" id="L539"><td class="ts-cell"><a class="ts" href="#L539" alt="Wed Oct 09 2024 01:04:37 GMT-0700 (Pacific Daylight Time)">08:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">there are crimes being done in the engine to support the expected algorithmic complexity of queue vs stack vs random-access arrays</td></tr>
  <tr class="msg" id="L540"><td class="ts-cell"><a class="ts" href="#L540" alt="Wed Oct 09 2024 01:04:42 GMT-0700 (Pacific Daylight Time)">08:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">that's what i meant by "poorly emulate" above</td></tr>
  <tr class="msg" id="L541"><td class="ts-cell"><a class="ts" href="#L541" alt="Wed Oct 09 2024 01:04:59 GMT-0700 (Pacific Daylight Time)">08:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">also MultiMaps!</td></tr>
  <tr class="msg" id="L542"><td class="ts-cell"><a class="ts" href="#L542" alt="Wed Oct 09 2024 01:05:00 GMT-0700 (Pacific Daylight Time)">08:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">yes, you can use them as such, but we'd also like have data structures fit for purpose</td></tr>
  <tr class="msg" id="L543"><td class="ts-cell"><a class="ts" href="#L543" alt="Wed Oct 09 2024 01:05:18 GMT-0700 (Pacific Daylight Time)">08:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">please someone give us MultiMaps</td></tr>
  <tr class="msg" id="L544"><td class="ts-cell"><a class="ts" href="#L544" alt="Wed Oct 09 2024 01:05:19 GMT-0700 (Pacific Daylight Time)">08:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">it might be a bit late</td></tr>
  <tr class="msg" id="L545"><td class="ts-cell"><a class="ts" href="#L545" alt="Wed Oct 09 2024 01:05:36 GMT-0700 (Pacific Daylight Time)">08:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">relative to which it would seem needlessly Java-like to demand a Queue or Stack class... but then that could <em>also</em> have been an argument against Map (wrt Object), so</td></tr>
  <tr class="msg" id="L546"><td class="ts-cell"><a class="ts" href="#L546" alt="Wed Oct 09 2024 01:05:37 GMT-0700 (Pacific Daylight Time)">08:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> please someone give us MultiMaps</blockquote></mx-reply>Is it the compositeKey proposal Ashley is working on?</td></tr>
  <tr class="msg" id="L547"><td class="ts-cell"><a class="ts" href="#L547" alt="Wed Oct 09 2024 01:05:58 GMT-0700 (Pacific Daylight Time)">08:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">maybe the times have simply changed on me</td></tr>
  <tr class="msg" id="L548"><td class="ts-cell"><a class="ts" href="#L548" alt="Wed Oct 09 2024 01:06:07 GMT-0700 (Pacific Daylight Time)">08:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Oh no it's something else</td></tr>
  <tr class="msg" id="L549"><td class="ts-cell"><a class="ts" href="#L549" alt="Wed Oct 09 2024 01:08:31 GMT-0700 (Pacific Daylight Time)">08:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">I was distracted</td></tr>
  <tr class="msg" id="L550"><td class="ts-cell"><a class="ts" href="#L550" alt="Wed Oct 09 2024 01:08:39 GMT-0700 (Pacific Daylight Time)">08:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">What's happening now? Are done?</td></tr>
  <tr class="msg" id="L551"><td class="ts-cell"><a class="ts" href="#L551" alt="Wed Oct 09 2024 01:08:52 GMT-0700 (Pacific Daylight Time)">08:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@legendecas:matrix.org">Chengzhong Wu</span>&gt;</div></td><td class="msg-cell">Restricting subclassing support in built-in methods: Telemetry Results (Firefox) Update</td></tr>
  <tr class="msg" id="L552"><td class="ts-cell"><a class="ts" href="#L552" alt="Wed Oct 09 2024 01:08:55 GMT-0700 (Pacific Daylight Time)">08:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">no, we're doing yulia's update on killing species</td></tr>
  <tr class="msg" id="L553"><td class="ts-cell"><a class="ts" href="#L553" alt="Wed Oct 09 2024 01:09:00 GMT-0700 (Pacific Daylight Time)">08:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Yulia is presenting subclassing</td></tr>
  <tr class="msg" id="L554"><td class="ts-cell"><a class="ts" href="#L554" alt="Wed Oct 09 2024 01:09:02 GMT-0700 (Pacific Daylight Time)">08:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i should've named the proposal Extinction</td></tr>
  <tr class="msg" id="L555"><td class="ts-cell"><a class="ts" href="#L555" alt="Wed Oct 09 2024 01:09:02 GMT-0700 (Pacific Daylight Time)">08:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Oh ok thanks to who spoke</td></tr>
  <tr class="msg" id="L556"><td class="ts-cell"><a class="ts" href="#L556" alt="Wed Oct 09 2024 01:09:23 GMT-0700 (Pacific Daylight Time)">08:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@legendecas:matrix.org">Chengzhong Wu</span>&gt;</div></td><td class="msg-cell">20min</td></tr>
  <tr class="msg" id="L557"><td class="ts-cell"><a class="ts" href="#L557" alt="Wed Oct 09 2024 01:13:53 GMT-0700 (Pacific Daylight Time)">08:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I use <code>Symbol.species</code> for Array subclasses when I don't want <code>.map</code>/<code>.filter</code> to produce an instance of the subclass because the constructor parameters differ.</td></tr>
  <tr class="msg" id="L558"><td class="ts-cell"><a class="ts" href="#L558" alt="Wed Oct 09 2024 01:14:33 GMT-0700 (Pacific Daylight Time)">08:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Without it I have to override map, filter, slice, et al and provide my own implementation.</td></tr>
  <tr class="msg" id="L559"><td class="ts-cell"><a class="ts" href="#L559" alt="Wed Oct 09 2024 01:14:47 GMT-0700 (Pacific Daylight Time)">08:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">that seems better</td></tr>
  <tr class="msg" id="L560"><td class="ts-cell"><a class="ts" href="#L560" alt="Wed Oct 09 2024 01:14:58 GMT-0700 (Pacific Daylight Time)">08:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Not really.</td></tr>
  <tr class="msg" id="L561"><td class="ts-cell"><a class="ts" href="#L561" alt="Wed Oct 09 2024 01:15:32 GMT-0700 (Pacific Daylight Time)">08:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">if we hadn't of done Symbol.species, wouldn't you have gotten your desired behaviour by default?</td></tr>
  <tr class="msg" id="L562"><td class="ts-cell"><a class="ts" href="#L562" alt="Wed Oct 09 2024 01:16:06 GMT-0700 (Pacific Daylight Time)">08:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">It's not that I need <code>Symbol.species</code>. It's that I need some way to tell the superclass to just produce <code>Array</code> and not my subclass.</td></tr>
  <tr class="msg" id="L563"><td class="ts-cell"><a class="ts" href="#L563" alt="Wed Oct 09 2024 01:17:06 GMT-0700 (Pacific Daylight Time)">08:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Yes, if we didn't have symbol.species and the default behavior was not to try to produce an instance from the current constructor, that would have been acceptable.</td></tr>
  <tr class="msg" id="L564"><td class="ts-cell"><a class="ts" href="#L564" alt="Wed Oct 09 2024 01:18:01 GMT-0700 (Pacific Daylight Time)">08:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">This is what we do in the new Array methods</td></tr>
  <tr class="msg" id="L565"><td class="ts-cell"><a class="ts" href="#L565" alt="Wed Oct 09 2024 01:18:29 GMT-0700 (Pacific Daylight Time)">08:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">XRegExp was a big source of type 4 stuff</td></tr>
  <tr class="msg" id="L566"><td class="ts-cell"><a class="ts" href="#L566" alt="Wed Oct 09 2024 01:18:34 GMT-0700 (Pacific Daylight Time)">08:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">But if you unship Symbol.species you need to choose whether to only return <code>Array</code> instances or to only return <code>this.constructor</code> instances. The question is who are you breaking by choosing one or the other.</td></tr>
  <tr class="msg" id="L567"><td class="ts-cell"><a class="ts" href="#L567" alt="Wed Oct 09 2024 01:19:02 GMT-0700 (Pacific Daylight Time)">08:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">I feel that "Yeah" very hard</td></tr>
  <tr class="msg" id="L568"><td class="ts-cell"><a class="ts" href="#L568" alt="Wed Oct 09 2024 01:19:14 GMT-0700 (Pacific Daylight Time)">08:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell"><pre><code>class MyArray extends Array {}
new MyArray().toSorted() instanceof MyArray; // false
</code></pre>
</td></tr>
  <tr class="msg" id="L569"><td class="ts-cell"><a class="ts" href="#L569" alt="Wed Oct 09 2024 01:21:15 GMT-0700 (Pacific Daylight Time)">08:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> But if you unship Symbol.species you need to choose whether to only return <code>Array</code> instances or to only return <code>this.constructor</code> instances. The question is who are you breaking by choosing one or the other.</blockquote></mx-reply>Yeah I suspect that Array and maybe Promise are more real than RegExp‚Äîmore plausible to have not-just-polyfill usages</td></tr>
  <tr class="msg" id="L570"><td class="ts-cell"><a class="ts" href="#L570" alt="Wed Oct 09 2024 01:21:15 GMT-0700 (Pacific Daylight Time)">08:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Essentially, I only use Symbol.species to work around the existence of Symbol.species.</td></tr>
  <tr class="msg" id="L571"><td class="ts-cell"><a class="ts" href="#L571" alt="Wed Oct 09 2024 01:22:16 GMT-0700 (Pacific Daylight Time)">08:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Can we use AI to filter those cases</td></tr>
  <tr class="msg" id="L572"><td class="ts-cell"><a class="ts" href="#L572" alt="Wed Oct 09 2024 01:22:26 GMT-0700 (Pacific Daylight Time)">08:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Google is already shipping it in the browser</td></tr>
  <tr class="msg" id="L573"><td class="ts-cell"><a class="ts" href="#L573" alt="Wed Oct 09 2024 01:22:36 GMT-0700 (Pacific Daylight Time)">08:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">It can run in the background and check all the loaded pages :)</td></tr>
  <tr class="msg" id="L574"><td class="ts-cell"><a class="ts" href="#L574" alt="Wed Oct 09 2024 01:22:41 GMT-0700 (Pacific Daylight Time)">08:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I have no intuition as to how many people are subclassing <code>Array</code> and it actually matters that <code>.map()</code> et al produce a subclass. These implementations wouldn't be overriding <code>Symbol.species</code>, just using the default behavior.</td></tr>
  <tr class="msg" id="L575"><td class="ts-cell"><a class="ts" href="#L575" alt="Wed Oct 09 2024 01:27:04 GMT-0700 (Pacific Daylight Time)">08:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Yah, Type II Array uses are probably genuine</td></tr>
  <tr class="msg" id="L576"><td class="ts-cell"><a class="ts" href="#L576" alt="Wed Oct 09 2024 01:27:19 GMT-0700 (Pacific Daylight Time)">08:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">It‚Äôs just too simple for a web dev to have written</td></tr>
  <tr class="msg" id="L577"><td class="ts-cell"><a class="ts" href="#L577" alt="Wed Oct 09 2024 01:29:38 GMT-0700 (Pacific Daylight Time)">08:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>Historically we've had two opposing positions on subclassing and overriding methods:</p>
<ol>
<li>Overriding methods is bad because anyone can call <code><a href="http://superclass.prototype.method.call">superclass.prototype.method.call</a>(subclassinstance)</code> and ignore any behavior imposed by the subclass. The suggested solution was to somehow bake this information into the instance. Using <code>Symbol.species</code> falls under this category</li>
<li>Don't use <code>Symbol.species</code> and instead override methods.</li>
</ol>
</td></tr>
  <tr class="msg" id="L578"><td class="ts-cell"><a class="ts" href="#L578" alt="Wed Oct 09 2024 01:30:27 GMT-0700 (Pacific Daylight Time)">08:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">For example, (1) was the approach considered for things like customizing keying for <code>Map</code>/<code>Set</code>.</td></tr>
  <tr class="msg" id="L579"><td class="ts-cell"><a class="ts" href="#L579" alt="Wed Oct 09 2024 01:31:31 GMT-0700 (Pacific Daylight Time)">08:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">1 and 2 aren't polar opposites, but they do cross purposes wrt Symbol.species and how/when to handle subclass construction for results.</td></tr>
  <tr class="msg" id="L580"><td class="ts-cell"><a class="ts" href="#L580" alt="Wed Oct 09 2024 01:33:12 GMT-0700 (Pacific Daylight Time)">08:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">A third approach is wrapping, but you cant wrap an <code>Array</code> due to its exotic nature.</td></tr>
  <tr class="msg" id="L581"><td class="ts-cell"><a class="ts" href="#L581" alt="Wed Oct 09 2024 01:34:43 GMT-0700 (Pacific Daylight Time)">08:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">(at least, not without a <code>Proxy</code>, which is hard to get right and slow)</td></tr>
  <tr class="msg" id="L582"><td class="ts-cell"><a class="ts" href="#L582" alt="Wed Oct 09 2024 01:50:31 GMT-0700 (Pacific Daylight Time)">08:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><code>Symbol.species</code> provide a hook which just like protected member in OOP. Compare to other protocol I don't think it's inevitable evil. My question is why it's a static property? If it's a instance property, would it be better for the engines?</td></tr>
  <tr class="msg" id="L583"><td class="ts-cell"><a class="ts" href="#L583" alt="Wed Oct 09 2024 02:55:10 GMT-0700 (Pacific Daylight Time)">09:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell"><p>I think the thing missed in this discussion is that in languages that do a ton of this, and where it‚Äôs fast (zero cost-ish or better) the extraction requires no function call or hidden user code.  It‚Äôs literally the same lookups and comparisons you can see in the patterns and possibly some branch caching.</p>
<p>If we got rid of Extractors with custom user code, 90% of concerns over hidden perf costs go away</p></td></tr>
  <tr class="msg" id="L584"><td class="ts-cell"><a class="ts" href="#L584" alt="Wed Oct 09 2024 04:56:56 GMT-0700 (Pacific Daylight Time)">11:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@aardvark179:matrix.org">Duncan MacGregor</span>&gt;</div></td><td class="msg-cell">Did the "Next meeting host and logistics" agenda item get cut, or was it simply not minuted? I don't see it in the day 1 notes.</td></tr>
  <tr class="msg" id="L585"><td class="ts-cell"><a class="ts" href="#L585" alt="Wed Oct 09 2024 16:12:25 GMT-0700 (Pacific Daylight Time)">23:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Did the "Next meeting host and logistics" agenda item get cut, or was it simply not minuted? I don't see it in the day 1 notes.</blockquote></mx-reply>It was briefly mentioned.</td></tr>

</tbody></table></div></div></div>
</body></html>