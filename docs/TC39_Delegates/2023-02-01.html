<!DOCTYPE html><html><head>
  <title>TC39 Delegates on 2023-02-01</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "TC39 Delegates";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">TC39 Delegates<br>2023-02-01<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2023-01-31" class="nav-link"><span>prev</span></a>
<a href="2023-02-02" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search TC39 Delegates">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Jan 31 2023 16:14:11 GMT-0800 (Pacific Standard Time)">00:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">reading through it, it kind of seems like the conclusion of this page is roughly identical (modulo placeholder choice, perhaps) to the JS proposal?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Jan 31 2023 17:42:22 GMT-0800 (Pacific Standard Time)">01:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Huh, I assumed that the range operator| was supposed to subsume pipeline</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Jan 31 2023 20:17:21 GMT-0800 (Pacific Standard Time)">04:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell"><blockquote>
<p>"Scala is unique in that it only provides _, but that placeholder refers to a different parameter on each use. So _ &gt; _ is a binary predicate that checks if the first parameter is greater than the second. Boost.HOF does the same with its unnamed placeholders [boost.hof.unnamed]."</p>
</blockquote></td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue Jan 31 2023 20:17:26 GMT-0800 (Pacific Standard Time)">04:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">Wild!</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Tue Jan 31 2023 20:19:41 GMT-0800 (Pacific Standard Time)">04:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">honestly kinda like scala's <code>_</code></td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Tue Jan 31 2023 20:32:18 GMT-0800 (Pacific Standard Time)">04:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> honestly kinda like scala's <code>_</code></blockquote></mx-reply>I mean, PFA would do this with <code>?</code>, though doing that with operators required other syntax.</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Tue Jan 31 2023 21:15:31 GMT-0800 (Pacific Standard Time)">05:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Notes editors: let’s remember to remove the &gt;&gt; and add a blank line between different speakers (and text that you want to render in different paragraphs in general). I did this for some topics but I think we can also do it on-line as well.</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Tue Jan 31 2023 22:10:40 GMT-0800 (Pacific Standard Time)">06:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">scala has something like 18 meanings for <code>_</code>, it's very confusing until you've internalized all the relevant contexts</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed Feb 01 2023 00:50:16 GMT-0800 (Pacific Standard Time)">08:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@pipobscure:matrix.org">pipobscure</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> At least wikipedia article also use ID as the abbr for identifier or identity ( <a href="https://en.wikipedia.org/wiki/Identifier">https://en.wikipedia.org/wiki/Identifier</a> )</blockquote></mx-reply>What are you talking about?</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed Feb 01 2023 00:50:43 GMT-0800 (Pacific Standard Time)">08:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@pipobscure:matrix.org">pipobscure</span>&gt;</div></td><td class="msg-cell">So wikipedia is probably not a good source to go for here.</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed Feb 01 2023 01:27:58 GMT-0800 (Pacific Standard Time)">09:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell"><code>_ ? _ : _</code></td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed Feb 01 2023 03:04:01 GMT-0800 (Pacific Standard Time)">11:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@eemeli:mozilla.org">eemeli</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> at any rate i feel very strongly against "Id" but "identifier" or "code" seem fine to me</blockquote></mx-reply><span class="nick-6">ljharb</span>: Could you clarify how you feel about "ID", an acronym of "identity document"?</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed Feb 01 2023 04:32:39 GMT-0800 (Pacific Standard Time)">12:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">This <em>should</em> now be OK for day 1 &amp; 2.</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Wed Feb 01 2023 04:33:56 GMT-0800 (Pacific Standard Time)">12:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">I think we should also keep the practice of starting every paragraph with the acronym, even if it's a continuation of the current speaker. To make it super clear that it is a continuation and not a missing acronym.</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed Feb 01 2023 05:44:57 GMT-0800 (Pacific Standard Time)">13:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@haxjs:matrix.org">HE Shi-Jun</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> What are you talking about?</blockquote></mx-reply>check the page history, someone changed ID to Id yesterday. 🫥</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed Feb 01 2023 05:46:33 GMT-0800 (Pacific Standard Time)">13:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I think we should also keep the practice of starting every paragraph with the acronym, even if it's a continuation of the current speaker. To make it super clear that it is a continuation and not a missing acronym.</blockquote></mx-reply>Good point, we usually do that and I hadn’t made that fix</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Wed Feb 01 2023 05:53:11 GMT-0800 (Pacific Standard Time)">13:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell">One point to note there, the transcriptionist introduces many unnecessary or unnatural newlines

This affects the grammar checking a lot, and is very tedious to clean up(and sometimes to even notice)</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Wed Feb 01 2023 06:00:43 GMT-0800 (Pacific Standard Time)">14:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">yep hopefully that can get sorted at some point. I would say "surely that is an easy part of the software to change" but we all know not to assume the ease of making code changes to software :D</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Wed Feb 01 2023 06:02:12 GMT-0800 (Pacific Standard Time)">14:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">a post-meeting script that replaces newlines where the previous line has text which does not end in punctuation might cover the majority of the occurrences.</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Wed Feb 01 2023 06:03:04 GMT-0800 (Pacific Standard Time)">14:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Yes, we complained about these new lines to the transcriptionist, and I will also follow up with the company after this meeting to see if there is any possible fix.</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Wed Feb 01 2023 06:05:21 GMT-0800 (Pacific Standard Time)">14:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@pipobscure:matrix.org">pipobscure</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> check the page history, someone changed ID to Id yesterday. 🫥</blockquote></mx-reply>Sorry if that wasn’t clear from the tone. That was me in order to point out how unreliable Wikipedia is for topics where there is controversy. It’s ok as a lookup for common knowledge stuff, but wherever there is ongoing discussion wikipedia is useless.</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Wed Feb 01 2023 06:06:53 GMT-0800 (Pacific Standard Time)">14:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@pipobscure:matrix.org">pipobscure</span>&gt;</div></td><td class="msg-cell">Even years of interwebs experience still let me forget that tone doesn’t always translate well. /blush</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Wed Feb 01 2023 06:11:38 GMT-0800 (Pacific Standard Time)">14:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Yeah I am pretty baffled, what does vandalizing Wikipedia have to do with what we are discussing?</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Wed Feb 01 2023 06:13:36 GMT-0800 (Pacific Standard Time)">14:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@pipobscure:matrix.org">pipobscure</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Yeah I am pretty baffled, what does vandalizing Wikipedia have to do with what we are discussing?</blockquote></mx-reply><p>I resent that (vandalizing?). That was an entirely valid edit. Also you do have to explain why the change is an improvement. So…</p>
<p>But it does go to show that some sources (i.e. wikipedia) can’t really be valid precedent in this argument.</p></td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Wed Feb 01 2023 06:15:44 GMT-0800 (Pacific Standard Time)">14:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">OK, I think we all know Wikipedia can be edited… not sure what that proves</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Wed Feb 01 2023 06:16:18 GMT-0800 (Pacific Standard Time)">14:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">The bigger point here is, we should be able to collectively bikeshed something and be able to draw a conclusion based on treating all delegates as equal and respecting all the points raised. This is what we are having trouble doing here.</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Wed Feb 01 2023 06:21:25 GMT-0800 (Pacific Standard Time)">14:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">I think our unanimity model is getting a little frustrating here because folks feel like threats of blocks are being used in a way that makes other delegates feel like their point will be ignored (which would violate the original goal of our consensus-seeking in the first place). This equality/inclusion/process question is a bigger issue than the actual contents of the arguments (since anything will work technically).</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Wed Feb 01 2023 06:51:13 GMT-0800 (Pacific Standard Time)">14:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell">Luckily we could ensure that doesn't happen. Scala evolves with a very different process</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Wed Feb 01 2023 06:51:21 GMT-0800 (Pacific Standard Time)">14:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell">And values different things</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Wed Feb 01 2023 06:52:07 GMT-0800 (Pacific Standard Time)">14:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell">But as someone who wrote it in some capacity professionally for four years, the _ seems like a more natural  placeholder</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Wed Feb 01 2023 06:55:11 GMT-0800 (Pacific Standard Time)">14:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell">Compiled languages have it so much easier in many ways...</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Wed Feb 01 2023 07:00:19 GMT-0800 (Pacific Standard Time)">15:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@msaboff:matrix.org">msaboff</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I think our unanimity model is getting a little frustrating here because folks feel like threats of blocks are being used in a way that makes other delegates feel like their point will be ignored (which would violate the original goal of our consensus-seeking in the first place). This equality/inclusion/process question is a bigger issue than the actual contents of the arguments (since anything will work technically).</blockquote></mx-reply>I would support the change to a consensus model that doesn't require 100% agreement.  I don't like that one veto stops something.</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Wed Feb 01 2023 07:01:28 GMT-0800 (Pacific Standard Time)">15:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@msaboff:matrix.org">msaboff</span>&gt;</div></td><td class="msg-cell">I think all other TC's use a true consensus model.</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Wed Feb 01 2023 07:10:41 GMT-0800 (Pacific Standard Time)">15:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell">It feels like there needs to be a very clear model of what kind of dissent and by how many parties constitutes a breakage of consensus. </td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Wed Feb 01 2023 07:14:26 GMT-0800 (Pacific Standard Time)">15:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">re: async contexts, I am assuming that the behavior is, whenever a function is scheduled to be run on a subsequent microtask tick or turn of the event loop, the host is required to snapshot the current async context bits and then restore them before running the function?</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Wed Feb 01 2023 07:14:42 GMT-0800 (Pacific Standard Time)">15:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@haxjs:matrix.org">HE Shi-Jun</span>&gt;</div></td><td class="msg-cell">If not one, how many? To be honest, I feel the problem is not 100% or 80%.</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Wed Feb 01 2023 07:14:43 GMT-0800 (Pacific Standard Time)">15:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">i.e. this isn't just for literal <code>async</code> but also for stuff like <code>addEventListener</code>?</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Wed Feb 01 2023 07:14:57 GMT-0800 (Pacific Standard Time)">15:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I would support the change to a consensus model that doesn't require 100% agreement.  I don't like that one veto stops something.</blockquote></mx-reply>I agree. The failure mode we have is very unfortunate, and this case highlights it. I think this indicates a need for us to reconsider our process.</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Wed Feb 01 2023 07:15:08 GMT-0800 (Pacific Standard Time)">15:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">though event listeners are kind of an odd case, because they run <em>sync</em> if you dispatch an event manually, so I'm not totally clear what's supposed to happen there...</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Wed Feb 01 2023 07:15:19 GMT-0800 (Pacific Standard Time)">15:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@benjamn:matrix.org">Ben Newman (Apollo, @benjamn on GH)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> re: async contexts, I am assuming that the behavior is, whenever a function is scheduled to be run on a subsequent microtask tick or turn of the event loop, the host is required to snapshot the current async context bits and then restore them before running the function?</blockquote></mx-reply>yes, there will be a responsibility for the host environment to make sure the event-scheduling APIs it introduces (like <code>setTimeout</code>) use something similar to <code>AsyncContext.wrap</code> for their callbacks</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Wed Feb 01 2023 07:15:23 GMT-0800 (Pacific Standard Time)">15:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: that's been my understanding as well</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Wed Feb 01 2023 07:15:38 GMT-0800 (Pacific Standard Time)">15:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i'm kind of confused by justin's example saying the propagation point is at the await pause</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Wed Feb 01 2023 07:15:43 GMT-0800 (Pacific Standard Time)">15:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">there is a decent list of proposals that were blocked by a lone objector, including some of the folks discussing changing the process here, fwiw. would we revist all of those if there were a process change?</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Wed Feb 01 2023 07:15:49 GMT-0800 (Pacific Standard Time)">15:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">it can't work if it's <em>just</em> promise reactions</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Wed Feb 01 2023 07:16:04 GMT-0800 (Pacific Standard Time)">15:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@benjamn:matrix.org">Ben Newman (Apollo, @benjamn on GH)</span>&gt;</div></td><td class="msg-cell">right, but those are the hardest to polyfill</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Wed Feb 01 2023 07:16:38 GMT-0800 (Pacific Standard Time)">15:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i'm kind of confused by justin's example saying the propagation point is at the await pause</blockquote></mx-reply>the await pause is the point where you are scheduling a thing to be run on a subsequent tick, so that seems consistent?</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Wed Feb 01 2023 07:16:55 GMT-0800 (Pacific Standard Time)">15:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: that's the second one, i thought there was a handler scheduled earlier</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Wed Feb 01 2023 07:16:59 GMT-0800 (Pacific Standard Time)">15:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i might be mixing slides?</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Wed Feb 01 2023 07:17:22 GMT-0800 (Pacific Standard Time)">15:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">anyway my point is just the host hooks i added for incumbent are only for JS callbacks</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Wed Feb 01 2023 07:17:31 GMT-0800 (Pacific Standard Time)">15:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">this needs host event loop hook-ins as well</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Wed Feb 01 2023 07:18:17 GMT-0800 (Pacific Standard Time)">15:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">indeed, as this slide is saying</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Wed Feb 01 2023 07:19:02 GMT-0800 (Pacific Standard Time)">15:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I will ask the question about event listener dispatch I guess</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Wed Feb 01 2023 07:19:20 GMT-0800 (Pacific Standard Time)">15:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@benjamn:matrix.org">Ben Newman (Apollo, @benjamn on GH)</span>&gt;</div></td><td class="msg-cell">are folks here aware of the V8 methods <code>v8::Context::{Get,Set}ContinuationPreservedEmbedderData</code>?</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Wed Feb 01 2023 07:19:40 GMT-0800 (Pacific Standard Time)">15:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">that's not quite enough</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Wed Feb 01 2023 07:19:52 GMT-0800 (Pacific Standard Time)">15:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">we have that, yes, but you need more muxing</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Wed Feb 01 2023 07:19:53 GMT-0800 (Pacific Standard Time)">15:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@benjamn:matrix.org">Ben Newman (Apollo, @benjamn on GH)</span>&gt;</div></td><td class="msg-cell">I know, but I'm trying to gauge context</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Wed Feb 01 2023 07:20:00 GMT-0800 (Pacific Standard Time)">15:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I will ask the question about event listener dispatch I guess</blockquote></mx-reply>good to ask. Though presumably all APIs could be wrapped in userland anyway. So technically nothing also stopping hosts doing that?</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Wed Feb 01 2023 07:21:09 GMT-0800 (Pacific Standard Time)">15:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">Ashley Claymore</span>: the event listener question is less "how is this implemented" and more "what is the thing you want here" - I'm trying to get at the mental model, not the implementation</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Wed Feb 01 2023 07:21:38 GMT-0800 (Pacific Standard Time)">15:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">I disagree with Justin's example: i think web platform built-ins should do the <code>wrap</code> for you. It's more like if you have JS code which queues callbacks, that you want <code>wrap</code>.</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Wed Feb 01 2023 07:22:07 GMT-0800 (Pacific Standard Time)">15:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@benjamn:matrix.org">Ben Newman (Apollo, @benjamn on GH)</span>&gt;</div></td><td class="msg-cell">that becomes a lot easier if/once <code>AsyncWrap</code> is standardized</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Wed Feb 01 2023 07:22:15 GMT-0800 (Pacific Standard Time)">15:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@legendecas:matrix.org">Chengzhong Wu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-4">Ashley Claymore</span>: the event listener question is less "how is this implemented" and more "what is the thing you want here" - I'm trying to get at the mental model, not the implementation</blockquote></mx-reply><a href="https://github.com/legendecas/proposal-async-context/issues/19">https://github.com/legendecas/proposal-async-context/issues/19</a> many events are emitted by runtimes asynchronously</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Wed Feb 01 2023 07:22:43 GMT-0800 (Pacific Standard Time)">15:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> that becomes a lot easier if/once <code>AsyncWrap</code> is standardized</blockquote></mx-reply>Yes, obviously the platform can't do anything if we don't add AsyncContext :) I was just nit-picking</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Wed Feb 01 2023 07:22:53 GMT-0800 (Pacific Standard Time)">15:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-7">Chengzhong Wu</span>: right, and others are emitted synchronously (e.g. by a manual <code>dispatchEvent</code>)</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Wed Feb 01 2023 07:24:00 GMT-0800 (Pacific Standard Time)">15:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">so: if you register an event listener while within an async context, and then an event is dispatched async by the browser, presumably you want the listener to see the original context. but what if the event is dispatched sync, by <code>dispatchEvent</code>? sync dispatch is basically just a weird sort of function call, so it seems like it's the <em>current</em> context, not the original one?</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Wed Feb 01 2023 07:24:10 GMT-0800 (Pacific Standard Time)">15:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">not clear to me which context you want there</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Wed Feb 01 2023 07:25:09 GMT-0800 (Pacific Standard Time)">15:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Unfortunately the answer might depend on the event</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Wed Feb 01 2023 07:25:10 GMT-0800 (Pacific Standard Time)">15:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@benjamn:matrix.org">Ben Newman (Apollo, @benjamn on GH)</span>&gt;</div></td><td class="msg-cell">sync function calls should just inherit the current context, leading to the same behavior? (pls clarify)</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Wed Feb 01 2023 07:25:25 GMT-0800 (Pacific Standard Time)">15:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">and there may be up to three answers for different task types</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Wed Feb 01 2023 07:25:40 GMT-0800 (Pacific Standard Time)">15:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">this would be part of the DOM/HTML/Node.js integration with AsyncContext</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Wed Feb 01 2023 07:25:42 GMT-0800 (Pacific Standard Time)">15:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@legendecas:matrix.org">Chengzhong Wu</span>&gt;</div></td><td class="msg-cell">Yeah, that's the point of an alternative option <code>captureAsyncContext</code> of <code>addEventListener</code></td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Wed Feb 01 2023 07:25:47 GMT-0800 (Pacific Standard Time)">15:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> sync function calls should just inherit the current context, leading to the same behavior? (pls clarify)</blockquote></mx-reply>sorry: the same behavior as what?</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Wed Feb 01 2023 07:26:11 GMT-0800 (Pacific Standard Time)">15:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Yeah, that's the point of an alternative option <code>captureAsyncContext</code> of <code>addEventListener</code></blockquote></mx-reply>well, there are separate questions about whether we want to give programmatic control, and what the default should be for each event.</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Wed Feb 01 2023 07:26:14 GMT-0800 (Pacific Standard Time)">15:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@benjamn:matrix.org">Ben Newman (Apollo, @benjamn on GH)</span>&gt;</div></td><td class="msg-cell">the event should be dispatched with the context you bound/wrapped, whether that happens synchronously or async</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Wed Feb 01 2023 07:26:40 GMT-0800 (Pacific Standard Time)">15:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> the event should be dispatched with the context you bound/wrapped, whether that happens synchronously or async</blockquote></mx-reply>this is definitely sometimes not true. It is really not the right answer for the unhandled rejection event, for example (we are discussing this in an issue)</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Wed Feb 01 2023 07:26:54 GMT-0800 (Pacific Standard Time)">15:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">I think we have to look event by event to figure this out</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Wed Feb 01 2023 07:27:01 GMT-0800 (Pacific Standard Time)">15:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@benjamn:matrix.org">Ben Newman (Apollo, @benjamn on GH)</span>&gt;</div></td><td class="msg-cell">sorry I think we must be talking past each other or about slightly different things</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Wed Feb 01 2023 07:27:05 GMT-0800 (Pacific Standard Time)">15:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> the event should be dispatched with the context you bound/wrapped, whether that happens synchronously or async</blockquote></mx-reply>I guess I don't know what those words mean</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Wed Feb 01 2023 07:30:53 GMT-0800 (Pacific Standard Time)">15:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell">calling a wrapped synchronous function would also let you change a context synchronously</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Wed Feb 01 2023 07:30:58 GMT-0800 (Pacific Standard Time)">15:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">OK I think I understand now</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Wed Feb 01 2023 07:35:16 GMT-0800 (Pacific Standard Time)">15:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">the fact that not all callbacks will necessarily automatically inherit the context in which the callback was added (depending on the API which adds the callback) is a little bit awkward, since the whole point of this is that you want to define a context which is available when your callback runs <em>even though your callback is getting registered to run by code you don't control</em></td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Wed Feb 01 2023 07:35:18 GMT-0800 (Pacific Standard Time)">15:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">is there any precedent for an API like this?</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Wed Feb 01 2023 07:35:31 GMT-0800 (Pacific Standard Time)">15:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">it's a stage 2 concern, but I'm very skeptical that this is the right representation</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Wed Feb 01 2023 07:38:42 GMT-0800 (Pacific Standard Time)">15:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@legendecas:matrix.org">Chengzhong Wu</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/legendecas/proposal-async-context#prior-arts">https://github.com/legendecas/proposal-async-context#prior-arts</a></td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Wed Feb 01 2023 07:39:05 GMT-0800 (Pacific Standard Time)">15:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@legendecas:matrix.org">Chengzhong Wu</span>&gt;</div></td><td class="msg-cell">These are javascript precedents. C# also implements similar APIs</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Wed Feb 01 2023 07:39:20 GMT-0800 (Pacific Standard Time)">15:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">Reactivity libraries with dependency tracking like SolidJS also have similar though more domain specific APIs</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Wed Feb 01 2023 07:39:46 GMT-0800 (Pacific Standard Time)">15:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@legendecas:matrix.org">Chengzhong Wu</span>&gt;</div></td><td class="msg-cell"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.asynclocal-1?view=net-7.0">https://learn.microsoft.com/en-us/dotnet/api/system.threading.asynclocal-1?view=net-7.0</a></td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Wed Feb 01 2023 07:41:53 GMT-0800 (Pacific Standard Time)">15:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">here's the link from Mark from the jitsi chat: <a href="https://github.com/endojs/endo/blob/markm-fluid-scopes/packages/eventual-send/src/async-contexts/6-async-context-transpose.js">https://github.com/endojs/endo/blob/markm-fluid-scopes/packages/eventual-send/src/async-contexts/6-async-context-transpose.js</a></td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Wed Feb 01 2023 07:42:32 GMT-0800 (Pacific Standard Time)">15:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">thanks for the links, <span class="nick-7">Chengzhong Wu</span> and <span class="nick-4">Ashley Claymore</span></td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Wed Feb 01 2023 07:42:36 GMT-0800 (Pacific Standard Time)">15:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> the fact that not all callbacks will necessarily automatically inherit the context in which the callback was added (depending on the API which adds the callback) is a little bit awkward, since the whole point of this is that you want to define a context which is available when your callback runs <em>even though your callback is getting registered to run by code you don't control</em></blockquote></mx-reply>thinking about this more, I guess the fix is, if you are passing a context to someone else you manually <code>.wrap</code> the function first</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Wed Feb 01 2023 07:42:36 GMT-0800 (Pacific Standard Time)">15:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">I have no idea how a JS engine would implement that super fancy context splitting that Shu was alluding to</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Wed Feb 01 2023 07:42:49 GMT-0800 (Pacific Standard Time)">15:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">this is a bit distinct from weak maps/references</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Wed Feb 01 2023 07:43:08 GMT-0800 (Pacific Standard Time)">15:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">always impressed by all JS engines' optimization ideas</td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Wed Feb 01 2023 07:44:32 GMT-0800 (Pacific Standard Time)">15:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">Someone might be able to get a published paper out of optimizing this :D</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Wed Feb 01 2023 07:45:23 GMT-0800 (Pacific Standard Time)">15:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">"This one weird trick to get zero overhead async contexts" </td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Wed Feb 01 2023 07:46:24 GMT-0800 (Pacific Standard Time)">15:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">v8 has zero overhead async contexts</td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Wed Feb 01 2023 07:46:27 GMT-0800 (Pacific Standard Time)">15:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">thinking about this even more, I am tempted to say that automatic wrapping happens <em>only</em> when you can't do it yourself, i.e. only for syntactic <code>yield</code> and <code>await</code> (and friends, like <code>using await</code>, of course) - in every other case (including manual calls to <code>.then</code>) you can just wrap the continuation yourself, and not have to worry about whether the scheduler you're using happens to do wrapping for you</td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Wed Feb 01 2023 07:46:30 GMT-0800 (Pacific Standard Time)">15:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">the trick is that sometimes you can't get the stack!</td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Wed Feb 01 2023 07:47:41 GMT-0800 (Pacific Standard Time)">15:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/wintercg/proposal-common-minimum-api/blob/main/asynclocalstorage.md">https://github.com/wintercg/proposal-common-minimum-api/blob/main/asynclocalstorage.md</a></td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Wed Feb 01 2023 07:48:36 GMT-0800 (Pacific Standard Time)">15:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> thinking about this even more, I am tempted to say that automatic wrapping happens <em>only</em> when you can't do it yourself, i.e. only for syntactic <code>yield</code> and <code>await</code> (and friends, like <code>using await</code>, of course) - in every other case (including manual calls to <code>.then</code>) you can just wrap the continuation yourself, and not have to worry about whether the scheduler you're using happens to do wrapping for you</blockquote></mx-reply>I mostly agree, with the exception of <code>.then</code>. The biggest problem with context passing and Promises is that you would need to potentially wrap <em>every</em> <code>.then</code> callback in the event one of them throws. This is far more arduous than wrapping the single entrypoint of an event handler.</td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Wed Feb 01 2023 07:48:57 GMT-0800 (Pacific Standard Time)">15:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">If it works with <code>await</code>, it should work with <code>.then</code> on native <code>Promise</code> implementations.</td></tr>
  <tr class="msg" id="L100"><td class="ts-cell"><a class="ts" href="#L100" alt="Wed Feb 01 2023 07:49:29 GMT-0800 (Pacific Standard Time)">15:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I mostly agree, with the exception of <code>.then</code>. The biggest problem with context passing and Promises is that you would need to potentially wrap <em>every</em> <code>.then</code> callback in the event one of them throws. This is far more arduous than wrapping the single entrypoint of an event handler.</blockquote></mx-reply>only if you have a bunch of <code>.then</code> calls, which isn't so common, and even then if you factor out a helper to do the wrapping it seems not so arduous?</td></tr>
  <tr class="msg" id="L101"><td class="ts-cell"><a class="ts" href="#L101" alt="Wed Feb 01 2023 07:49:42 GMT-0800 (Pacific Standard Time)">15:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">but I am maybe open to it; something to talk about more</td></tr>
  <tr class="msg" id="L102"><td class="ts-cell"><a class="ts" href="#L102" alt="Wed Feb 01 2023 07:50:11 GMT-0800 (Pacific Standard Time)">15:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I disagree. If you are still using <code>.then</code> today when async/await exists, you are likely doing something far more complex than a single <code>.then</code> continuation.</td></tr>
  <tr class="msg" id="L103"><td class="ts-cell"><a class="ts" href="#L103" alt="Wed Feb 01 2023 07:50:32 GMT-0800 (Pacific Standard Time)">15:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">tons of people do that with fetch - <code>await fetch(…).then(x =&gt; x.json())</code></td></tr>
  <tr class="msg" id="L104"><td class="ts-cell"><a class="ts" href="#L104" alt="Wed Feb 01 2023 07:50:37 GMT-0800 (Pacific Standard Time)">15:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">it's pretty common</td></tr>
  <tr class="msg" id="L105"><td class="ts-cell"><a class="ts" href="#L105" alt="Wed Feb 01 2023 07:51:01 GMT-0800 (Pacific Standard Time)">15:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I am OK with the people doing the <code>fetch</code> thing having to refactor their code or do a manual wrap</td></tr>
  <tr class="msg" id="L106"><td class="ts-cell"><a class="ts" href="#L106" alt="Wed Feb 01 2023 07:51:08 GMT-0800 (Pacific Standard Time)">15:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">but yes sometimes things get more complicated</td></tr>
  <tr class="msg" id="L107"><td class="ts-cell"><a class="ts" href="#L107" alt="Wed Feb 01 2023 07:52:29 GMT-0800 (Pacific Standard Time)">15:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i haven't been following, but it seems pretty important to preserve the sugar-ness of await over promises.</td></tr>
  <tr class="msg" id="L108"><td class="ts-cell"><a class="ts" href="#L108" alt="Wed Feb 01 2023 07:52:35 GMT-0800 (Pacific Standard Time)">15:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">my main concern with automatically wrapping in <code>.then</code> is, the rule "you have to wrap any callback, whereas syntactic continuations get wrapped for you" is much easier to learn than "Promise.then automatically wraps, but [some other subset of schedulers] does not"</td></tr>
  <tr class="msg" id="L109"><td class="ts-cell"><a class="ts" href="#L109" alt="Wed Feb 01 2023 07:53:05 GMT-0800 (Pacific Standard Time)">15:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i haven't been following, but it seems pretty important to preserve the sugar-ness of await over promises.</blockquote></mx-reply>it's still preserved either way, the sugar just gets a little more complicated</td></tr>
  <tr class="msg" id="L110"><td class="ts-cell"><a class="ts" href="#L110" alt="Wed Feb 01 2023 07:53:10 GMT-0800 (Pacific Standard Time)">15:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">in the <code>.json</code> case, it will probably be fine that it doesn't keep the context, unless <code>.json</code> has been patched</td></tr>
  <tr class="msg" id="L111"><td class="ts-cell"><a class="ts" href="#L111" alt="Wed Feb 01 2023 07:53:19 GMT-0800 (Pacific Standard Time)">15:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">oohh I think I like that WinterCG proposed API better</td></tr>
  <tr class="msg" id="L112"><td class="ts-cell"><a class="ts" href="#L112" alt="Wed Feb 01 2023 07:53:33 GMT-0800 (Pacific Standard Time)">15:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">that's fine as long as the non-await usage isn't made more complicated - altho i guess it might be in order to use the new functionality without the sugar, as is the case with <code>class</code></td></tr>
  <tr class="msg" id="L113"><td class="ts-cell"><a class="ts" href="#L113" alt="Wed Feb 01 2023 07:53:45 GMT-0800 (Pacific Standard Time)">15:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Can someone link to the YouTube playlist?</td></tr>
  <tr class="msg" id="L114"><td class="ts-cell"><a class="ts" href="#L114" alt="Wed Feb 01 2023 07:53:48 GMT-0800 (Pacific Standard Time)">15:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">for the minutes</td></tr>
  <tr class="msg" id="L115"><td class="ts-cell"><a class="ts" href="#L115" alt="Wed Feb 01 2023 07:54:10 GMT-0800 (Pacific Standard Time)">15:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">It will also be difficult to explain why <code>await x; doSomethingWithContext()</code> would work, but <code>x.then(() =&gt; doSomethingWithContext())</code> wouldn't. Especially when many editors have refactorings for that, which now become potentially unsafe operations.</td></tr>
  <tr class="msg" id="L116"><td class="ts-cell"><a class="ts" href="#L116" alt="Wed Feb 01 2023 07:55:11 GMT-0800 (Pacific Standard Time)">15:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> It will also be difficult to explain why <code>await x; doSomethingWithContext()</code> would work, but <code>x.then(() =&gt; doSomethingWithContext())</code> wouldn't. Especially when many editors have refactorings for that, which now become potentially unsafe operations.</blockquote></mx-reply>that seems pretty straightforward to explain, for people using async contexts? "if you pass a callback, you need to wrap it" is not a hard rule to learn</td></tr>
  <tr class="msg" id="L117"><td class="ts-cell"><a class="ts" href="#L117" alt="Wed Feb 01 2023 07:55:31 GMT-0800 (Pacific Standard Time)">15:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">and if you're <em>not</em> using an async context in your own function body you don't need to learn anything</td></tr>
  <tr class="msg" id="L118"><td class="ts-cell"><a class="ts" href="#L118" alt="Wed Feb 01 2023 07:55:50 GMT-0800 (Pacific Standard Time)">15:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Can someone link to the YouTube playlist?</blockquote></mx-reply>done</td></tr>
  <tr class="msg" id="L119"><td class="ts-cell"><a class="ts" href="#L119" alt="Wed Feb 01 2023 07:56:19 GMT-0800 (Pacific Standard Time)">15:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">I appreciate the investigation into performance from v8 and the security review from SES. From our side, we see use cases for this but need to do a more thorough review. No outstanding concerns from us right now</td></tr>
  <tr class="msg" id="L120"><td class="ts-cell"><a class="ts" href="#L120" alt="Wed Feb 01 2023 07:56:26 GMT-0800 (Pacific Standard Time)">15:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">what is mark talking about?</td></tr>
  <tr class="msg" id="L121"><td class="ts-cell"><a class="ts" href="#L121" alt="Wed Feb 01 2023 07:56:36 GMT-0800 (Pacific Standard Time)">15:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">is this the AsyncContext spec draft or 262?</td></tr>
  <tr class="msg" id="L122"><td class="ts-cell"><a class="ts" href="#L122" alt="Wed Feb 01 2023 07:58:06 GMT-0800 (Pacific Standard Time)">15:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">the other side of this, it will be difficult to explain why <code>x.then(doSomethingWithContext)</code> would work, but <code>setTimeout(doSomethingWithContext)</code> would not. so that implies <code>setTimeout</code> needs to automatically wrap as well. and then now you have the same problem but with <code>s/setTimeout/setEventListener/</code>, and so on</td></tr>
  <tr class="msg" id="L123"><td class="ts-cell"><a class="ts" href="#L123" alt="Wed Feb 01 2023 07:58:21 GMT-0800 (Pacific Standard Time)">15:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">This becomes one more thing to consider when wrapping code in an <code>AsyncContext</code>, especially if that code calls into a third-party package that might use <code>.then</code>.</td></tr>
  <tr class="msg" id="L124"><td class="ts-cell"><a class="ts" href="#L124" alt="Wed Feb 01 2023 07:58:50 GMT-0800 (Pacific Standard Time)">15:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">since this is only stage 1, can we word the proposal (in its repo and the proposals list) in terms that don't lock us into any API decisions? something like "hooks for associating state with async call stack frames"?</td></tr>
  <tr class="msg" id="L125"><td class="ts-cell"><a class="ts" href="#L125" alt="Wed Feb 01 2023 07:59:16 GMT-0800 (Pacific Standard Time)">15:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> the other side of this, it will be difficult to explain why <code>x.then(doSomethingWithContext)</code> would work, but <code>setTimeout(doSomethingWithContext)</code> would not. so that implies <code>setTimeout</code> needs to automatically wrap as well. and then now you have the same problem but with <code>s/setTimeout/setEventListener/</code>, and so on</blockquote></mx-reply>IIRC, <code>setTimeout</code>, <code>setImmediate</code>, <code>process.nextTick</code> were discussed in the slides as other potential places to automatically flow state.</td></tr>
  <tr class="msg" id="L126"><td class="ts-cell"><a class="ts" href="#L126" alt="Wed Feb 01 2023 07:59:40 GMT-0800 (Pacific Standard Time)">15:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> This becomes one more thing to consider when wrapping code in an <code>AsyncContext</code>, especially if that code calls into a third-party package that might use <code>.then</code>.</blockquote></mx-reply>does it? if you pass a callback to the library you need to wrap it. but you need to <em>anyway</em> because the third-party package might schedule the callback to get called in some way <em>other than</em> <code>.then</code>, like event listener dispatch or something.</td></tr>
  <tr class="msg" id="L127"><td class="ts-cell"><a class="ts" href="#L127" alt="Wed Feb 01 2023 07:59:46 GMT-0800 (Pacific Standard Time)">15:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Justin Ridgewell</span>: ^</td></tr>
  <tr class="msg" id="L128"><td class="ts-cell"><a class="ts" href="#L128" alt="Wed Feb 01 2023 08:00:10 GMT-0800 (Pacific Standard Time)">16:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">i.e., if you're passing a callback to another library, you need to wrap it anyway, because you can't trust that the library is going to do the scheduling using one of the automatically-wrapping APIs

(or even schedule it at all - some libraries do deliberately invoke zalgo)</td></tr>
  <tr class="msg" id="L129"><td class="ts-cell"><a class="ts" href="#L129" alt="Wed Feb 01 2023 08:00:20 GMT-0800 (Pacific Standard Time)">16:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">so making the rule "you always need to wrap callbacks" is much simpler</td></tr>
  <tr class="msg" id="L130"><td class="ts-cell"><a class="ts" href="#L130" alt="Wed Feb 01 2023 08:02:09 GMT-0800 (Pacific Standard Time)">16:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> so making the rule "you always need to wrap callbacks" is much simpler</blockquote></mx-reply>I don't agree its simpler. Simpler is not having to wrap callbacks for things that are, categorically, async continuations.</td></tr>
  <tr class="msg" id="L131"><td class="ts-cell"><a class="ts" href="#L131" alt="Wed Feb 01 2023 08:02:58 GMT-0800 (Pacific Standard Time)">16:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">if you are passing a callback to another library, you don't know that it's categorically an async continuation.</td></tr>
  <tr class="msg" id="L132"><td class="ts-cell"><a class="ts" href="#L132" alt="Wed Feb 01 2023 08:03:14 GMT-0800 (Pacific Standard Time)">16:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">it's just a callback. whether it's an async continuation depends on how <em>that library</em> consumes the callback.</td></tr>
  <tr class="msg" id="L133"><td class="ts-cell"><a class="ts" href="#L133" alt="Wed Feb 01 2023 08:03:47 GMT-0800 (Pacific Standard Time)">16:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">so if you want to preserve the async context, you need to mark it as an async continuation, by wrapping it</td></tr>
  <tr class="msg" id="L134"><td class="ts-cell"><a class="ts" href="#L134" alt="Wed Feb 01 2023 08:03:52 GMT-0800 (Pacific Standard Time)">16:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Simpler is knowing that <code>asyncIterable[Symbol.asyncIterator]().map(element =&gt; { /*has outer context*/ })</code> will work, but since there's no explicit <code>await</code>, how would I know?</td></tr>
  <tr class="msg" id="L135"><td class="ts-cell"><a class="ts" href="#L135" alt="Wed Feb 01 2023 08:06:01 GMT-0800 (Pacific Standard Time)">16:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">Regardless of whether <code>.then</code> automatically wraps, I could write a <code>Symbol.asyncIterator</code> implementation that does not in fact wrap the callback using the top-of-stack callback; that's up to the implementation of <code>Symbol.asyncIterator</code>.</td></tr>
  <tr class="msg" id="L136"><td class="ts-cell"><a class="ts" href="#L136" alt="Wed Feb 01 2023 08:06:06 GMT-0800 (Pacific Standard Time)">16:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I also think not supporting this in <code>.then</code> would make it far less useful to quite a few of the use cases this is intended to support.</td></tr>
  <tr class="msg" id="L137"><td class="ts-cell"><a class="ts" href="#L137" alt="Wed Feb 01 2023 08:06:41 GMT-0800 (Pacific Standard Time)">16:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I'm pointing at the async iterator helpers proposal's built-in capabilities here.</td></tr>
  <tr class="msg" id="L138"><td class="ts-cell"><a class="ts" href="#L138" alt="Wed Feb 01 2023 08:07:34 GMT-0800 (Pacific Standard Time)">16:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">Right, but my point is that the async iterable is something someone hands you, and you can't trust that it's only going to use the scheduling APIs you expect it to on the way to its ultimate call to <code>Promise.prototype.then</code>.</td></tr>
  <tr class="msg" id="L139"><td class="ts-cell"><a class="ts" href="#L139" alt="Wed Feb 01 2023 08:08:26 GMT-0800 (Pacific Standard Time)">16:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">And the whole point of this API is that you shouldn't have to coordinate with other people's code about how they choose to schedule your callback. If you could coordinate, you could just have the other code thread the state through.</td></tr>
  <tr class="msg" id="L140"><td class="ts-cell"><a class="ts" href="#L140" alt="Wed Feb 01 2023 08:09:29 GMT-0800 (Pacific Standard Time)">16:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">There was some fascinating investigation into a sort of "borrowing" model for ArrayBuffers in <a href="https://gist.github.com/domenic/a9343fa787ba54b4ba3a60882c49cc32#file-readme-md">https://gist.github.com/domenic/a9343fa787ba54b4ba3a60882c49cc32#file-readme-md</a></td></tr>
  <tr class="msg" id="L141"><td class="ts-cell"><a class="ts" href="#L141" alt="Wed Feb 01 2023 08:09:42 GMT-0800 (Pacific Standard Time)">16:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">Which is why I think we should not encourage you to write patterns which rely on other people's code using particular APIs to do scheduling.</td></tr>
  <tr class="msg" id="L142"><td class="ts-cell"><a class="ts" href="#L142" alt="Wed Feb 01 2023 08:10:08 GMT-0800 (Pacific Standard Time)">16:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">i.e., we should not make some APIs do wrapping of callbacks automatically.</td></tr>
  <tr class="msg" id="L143"><td class="ts-cell"><a class="ts" href="#L143" alt="Wed Feb 01 2023 08:10:39 GMT-0800 (Pacific Standard Time)">16:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">This is a different primitive; it couldn't be implemented in <code>transfer</code>. It'd be better IMO. Anyway, done is better than perfect, we already had Stage 3 on this current thread</td></tr>
  <tr class="msg" id="L144"><td class="ts-cell"><a class="ts" href="#L144" alt="Wed Feb 01 2023 08:10:55 GMT-0800 (Pacific Standard Time)">16:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i.e., we should not make some APIs do wrapping of callbacks automatically.</blockquote></mx-reply>huh, have you considered arguing this to the Node.js APM ecosystem?</td></tr>
  <tr class="msg" id="L145"><td class="ts-cell"><a class="ts" href="#L145" alt="Wed Feb 01 2023 08:11:25 GMT-0800 (Pacific Standard Time)">16:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">littledan</span>: nope</td></tr>
  <tr class="msg" id="L146"><td class="ts-cell"><a class="ts" href="#L146" alt="Wed Feb 01 2023 08:11:43 GMT-0800 (Pacific Standard Time)">16:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">well... I think the implicit wrapping is just a sort of requirement to make any of this work in practice.</td></tr>
  <tr class="msg" id="L147"><td class="ts-cell"><a class="ts" href="#L147" alt="Wed Feb 01 2023 08:11:51 GMT-0800 (Pacific Standard Time)">16:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@legendecas:matrix.org">Chengzhong Wu</span>&gt;</div></td><td class="msg-cell">It's still stated as possible solution in the readme.</td></tr>
  <tr class="msg" id="L148"><td class="ts-cell"><a class="ts" href="#L148" alt="Wed Feb 01 2023 08:12:03 GMT-0800 (Pacific Standard Time)">16:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">implicit wrapping of syntactic <code>await</code>/<code>yield</code> continuations, absolutely</td></tr>
  <tr class="msg" id="L149"><td class="ts-cell"><a class="ts" href="#L149" alt="Wed Feb 01 2023 08:12:18 GMT-0800 (Pacific Standard Time)">16:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">implicit wrapping of explicit callbacks, I don't see it. you can wrap those yourself.</td></tr>
  <tr class="msg" id="L150"><td class="ts-cell"><a class="ts" href="#L150" alt="Wed Feb 01 2023 08:13:31 GMT-0800 (Pacific Standard Time)">16:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">I think it'd be worth looking at existing use cases to see whether your suggestion would be viable...</td></tr>
  <tr class="msg" id="L151"><td class="ts-cell"><a class="ts" href="#L151" alt="Wed Feb 01 2023 08:13:37 GMT-0800 (Pacific Standard Time)">16:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">indeed you <em>have to</em> wrap those yourself if the callback is going to thread through someone else's code, because you can't trust that they're going to do the scheduling using one of those automatically wrapping APIs</td></tr>
  <tr class="msg" id="L152"><td class="ts-cell"><a class="ts" href="#L152" alt="Wed Feb 01 2023 08:13:45 GMT-0800 (Pacific Standard Time)">16:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">I mean, cases, where this is already deployed</td></tr>
  <tr class="msg" id="L153"><td class="ts-cell"><a class="ts" href="#L153" alt="Wed Feb 01 2023 08:14:00 GMT-0800 (Pacific Standard Time)">16:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><code>yield</code> is something we'll need to discuss: <a href="https://github.com/legendecas/proposal-async-context/issues/18">https://github.com/legendecas/proposal-async-context/issues/18</a></td></tr>
  <tr class="msg" id="L154"><td class="ts-cell"><a class="ts" href="#L154" alt="Wed Feb 01 2023 08:14:24 GMT-0800 (Pacific Standard Time)">16:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">For <code>await</code> and <code>Promise.p.then</code>, I think we have to do them automatically</td></tr>
  <tr class="msg" id="L155"><td class="ts-cell"><a class="ts" href="#L155" alt="Wed Feb 01 2023 08:14:36 GMT-0800 (Pacific Standard Time)">16:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><code>await</code> should just be a sytnax on top of promises</td></tr>
  <tr class="msg" id="L156"><td class="ts-cell"><a class="ts" href="#L156" alt="Wed Feb 01 2023 08:14:56 GMT-0800 (Pacific Standard Time)">16:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">(And also if you force me to take away the fast path for <code>await promise</code> because I have to patch <code>.then</code>, I will riot)</td></tr>
  <tr class="msg" id="L157"><td class="ts-cell"><a class="ts" href="#L157" alt="Wed Feb 01 2023 08:14:57 GMT-0800 (Pacific Standard Time)">16:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">I think bakkot's arguments would need to be made to host environments, since we just don't own much of what would need to make these decisions</td></tr>
  <tr class="msg" id="L158"><td class="ts-cell"><a class="ts" href="#L158" alt="Wed Feb 01 2023 08:15:13 GMT-0800 (Pacific Standard Time)">16:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> (And also if you force me to take away the fast path for <code>await promise</code> because I have to patch <code>.then</code>, I will riot)</blockquote></mx-reply>My point is that you don't have to patch <code>.then</code></td></tr>
  <tr class="msg" id="L159"><td class="ts-cell"><a class="ts" href="#L159" alt="Wed Feb 01 2023 08:15:21 GMT-0800 (Pacific Standard Time)">16:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">As the platform, I do</td></tr>
  <tr class="msg" id="L160"><td class="ts-cell"><a class="ts" href="#L160" alt="Wed Feb 01 2023 08:15:25 GMT-0800 (Pacific Standard Time)">16:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">... why?</td></tr>
  <tr class="msg" id="L161"><td class="ts-cell"><a class="ts" href="#L161" alt="Wed Feb 01 2023 08:15:35 GMT-0800 (Pacific Standard Time)">16:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">Assuming there's implicit wrapping in syntactic <code>await</code>s</td></tr>
  <tr class="msg" id="L162"><td class="ts-cell"><a class="ts" href="#L162" alt="Wed Feb 01 2023 08:15:41 GMT-0800 (Pacific Standard Time)">16:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">The whole <code>console.log</code> use case in the slides</td></tr>
  <tr class="msg" id="L163"><td class="ts-cell"><a class="ts" href="#L163" alt="Wed Feb 01 2023 08:15:53 GMT-0800 (Pacific Standard Time)">16:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Assuming there's implicit wrapping in syntactic <code>await</code>s</blockquote></mx-reply>sure, I agree, in theory we could fork the semantics here</td></tr>
  <tr class="msg" id="L164"><td class="ts-cell"><a class="ts" href="#L164" alt="Wed Feb 01 2023 08:15:57 GMT-0800 (Pacific Standard Time)">16:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">I have to preserve across any promise usage, because anything else will break an important API for us</td></tr>
  <tr class="msg" id="L165"><td class="ts-cell"><a class="ts" href="#L165" alt="Wed Feb 01 2023 08:16:00 GMT-0800 (Pacific Standard Time)">16:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">what I don't understand is the motivation</td></tr>
  <tr class="msg" id="L166"><td class="ts-cell"><a class="ts" href="#L166" alt="Wed Feb 01 2023 08:16:11 GMT-0800 (Pacific Standard Time)">16:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I have to preserve across any promise usage, because anything else will break an important API for us</blockquote></mx-reply>I think bakkot is saying, you could go patch that</td></tr>
  <tr class="msg" id="L167"><td class="ts-cell"><a class="ts" href="#L167" alt="Wed Feb 01 2023 08:16:21 GMT-0800 (Pacific Standard Time)">16:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I have to preserve across any promise usage, because anything else will break an important API for us</blockquote></mx-reply>Can you give an example?</td></tr>
  <tr class="msg" id="L168"><td class="ts-cell"><a class="ts" href="#L168" alt="Wed Feb 01 2023 08:16:22 GMT-0800 (Pacific Standard Time)">16:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">I think he's saying I don't</td></tr>
  <tr class="msg" id="L169"><td class="ts-cell"><a class="ts" href="#L169" alt="Wed Feb 01 2023 08:16:50 GMT-0800 (Pacific Standard Time)">16:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">by "you" I mean, either the program or the Vercel environment</td></tr>
  <tr class="msg" id="L170"><td class="ts-cell"><a class="ts" href="#L170" alt="Wed Feb 01 2023 08:17:02 GMT-0800 (Pacific Standard Time)">16:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Vercel's platform</td></tr>
  <tr class="msg" id="L171"><td class="ts-cell"><a class="ts" href="#L171" alt="Wed Feb 01 2023 08:17:05 GMT-0800 (Pacific Standard Time)">16:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><a href="https://docs.google.com/presentation/d/1yw4d0ca6v2Z2Vmrnac9E9XJFlC872LDQ4GFR17QdRzk/edit#slide=id.g18e6eaa50e1_0_164">https://docs.google.com/presentation/d/1yw4d0ca6v2Z2Vmrnac9E9XJFlC872LDQ4GFR17QdRzk/edit#slide=id.g18e6eaa50e1_0_164</a></td></tr>
  <tr class="msg" id="L172"><td class="ts-cell"><a class="ts" href="#L172" alt="Wed Feb 01 2023 08:17:16 GMT-0800 (Pacific Standard Time)">16:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">I have to preserve this start time across any user code  per request</td></tr>
  <tr class="msg" id="L173"><td class="ts-cell"><a class="ts" href="#L173" alt="Wed Feb 01 2023 08:17:24 GMT-0800 (Pacific Standard Time)">16:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Let's slow down; I think you're talking past each other</td></tr>
  <tr class="msg" id="L174"><td class="ts-cell"><a class="ts" href="#L174" alt="Wed Feb 01 2023 08:17:34 GMT-0800 (Pacific Standard Time)">16:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">It doesn't matter if they use <code>setTimeout</code>, <code>p.then()</code>, or <code>await</code>, it's all got to work</td></tr>
  <tr class="msg" id="L175"><td class="ts-cell"><a class="ts" href="#L175" alt="Wed Feb 01 2023 08:18:15 GMT-0800 (Pacific Standard Time)">16:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Justin Ridgewell</span>: right, and that would still work?</td></tr>
  <tr class="msg" id="L176"><td class="ts-cell"><a class="ts" href="#L176" alt="Wed Feb 01 2023 08:18:16 GMT-0800 (Pacific Standard Time)">16:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I am confused</td></tr>
  <tr class="msg" id="L177"><td class="ts-cell"><a class="ts" href="#L177" alt="Wed Feb 01 2023 08:18:35 GMT-0800 (Pacific Standard Time)">16:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">You need to wrap your handlers before you hand them to other people</td></tr>
  <tr class="msg" id="L178"><td class="ts-cell"><a class="ts" href="#L178" alt="Wed Feb 01 2023 08:18:47 GMT-0800 (Pacific Standard Time)">16:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">How? If I force my users to wrap their <code>p.then()</code> callbacks, then it's not seamlessly working</td></tr>
  <tr class="msg" id="L179"><td class="ts-cell"><a class="ts" href="#L179" alt="Wed Feb 01 2023 08:18:49 GMT-0800 (Pacific Standard Time)">16:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">and as long as you do that, the handlers run in your context, regardless of how other people are scheduling them to run</td></tr>
  <tr class="msg" id="L180"><td class="ts-cell"><a class="ts" href="#L180" alt="Wed Feb 01 2023 08:19:18 GMT-0800 (Pacific Standard Time)">16:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><code>console.log</code> isn't a callback I pass around, it exists in the global scope</td></tr>
  <tr class="msg" id="L181"><td class="ts-cell"><a class="ts" href="#L181" alt="Wed Feb 01 2023 08:19:57 GMT-0800 (Pacific Standard Time)">16:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">I can't wrap it per requests, because the global value would change per request</td></tr>
  <tr class="msg" id="L182"><td class="ts-cell"><a class="ts" href="#L182" alt="Wed Feb 01 2023 08:20:16 GMT-0800 (Pacific Standard Time)">16:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">They don't store an access to the current value, they just access the property on the shared <code>console</code> object</td></tr>
  <tr class="msg" id="L183"><td class="ts-cell"><a class="ts" href="#L183" alt="Wed Feb 01 2023 08:20:18 GMT-0800 (Pacific Standard Time)">16:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> You need to wrap your handlers before you hand them to other people</blockquote></mx-reply>If you automatically associate context for .then, you are saving users a significant amount of complexity and boilerplate. If you are calling into questionable code, the presence of automatic context copying doesn't prevent you from manually wrapping the callback yourself.</td></tr>
  <tr class="msg" id="L184"><td class="ts-cell"><a class="ts" href="#L184" alt="Wed Feb 01 2023 08:21:12 GMT-0800 (Pacific Standard Time)">16:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Justin Ridgewell</span>: oh, sorry, I missed that it is crucial to this example that you are patching global state and expecting that to be respected. I am not convinced that's something worth designing for.</td></tr>
  <tr class="msg" id="L185"><td class="ts-cell"><a class="ts" href="#L185" alt="Wed Feb 01 2023 08:21:54 GMT-0800 (Pacific Standard Time)">16:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> If you automatically associate context for .then, you are saving users a significant amount of complexity and boilerplate. If you are calling into questionable code, the presence of automatic context copying doesn't prevent you from manually wrapping the callback yourself.</blockquote></mx-reply>"calling into questionable code" meaning calling into... any code?</td></tr>
  <tr class="msg" id="L186"><td class="ts-cell"><a class="ts" href="#L186" alt="Wed Feb 01 2023 08:22:55 GMT-0800 (Pacific Standard Time)">16:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">if you aren't calling into other people's code, you don't need async contexts at all. and if you are, you need to wrap. I don't see how any work is saved here.</td></tr>
  <tr class="msg" id="L187"><td class="ts-cell"><a class="ts" href="#L187" alt="Wed Feb 01 2023 08:23:40 GMT-0800 (Pacific Standard Time)">16:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">Other use cases are distributed trace, where request handlers are, eventually, resolved by combing other requests.  That's not 'global state' like <code>console.log</code>, but still a global singleton to make a request</td></tr>
  <tr class="msg" id="L188"><td class="ts-cell"><a class="ts" href="#L188" alt="Wed Feb 01 2023 08:24:12 GMT-0800 (Pacific Standard Time)">16:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><blockquote>
<p>I am not convinced that's something worth designing for.</p>
</blockquote>
<p>This would be a significant change from the way Node works, and would be a huge burden</p>
</td></tr>
  <tr class="msg" id="L189"><td class="ts-cell"><a class="ts" href="#L189" alt="Wed Feb 01 2023 08:24:22 GMT-0800 (Pacific Standard Time)">16:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">And it's also going to force me out of my promise fast path</td></tr>
  <tr class="msg" id="L190"><td class="ts-cell"><a class="ts" href="#L190" alt="Wed Feb 01 2023 08:24:36 GMT-0800 (Pacific Standard Time)">16:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">My two proposals won't play nice with each other</td></tr>
  <tr class="msg" id="L191"><td class="ts-cell"><a class="ts" href="#L191" alt="Wed Feb 01 2023 08:24:41 GMT-0800 (Pacific Standard Time)">16:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I can't wrap it per requests, because the global value would change per request</blockquote></mx-reply>hm, also, I'm confused about this example. assuming that <code>addEventListener</code> doesn't automatically wrap callbacks passed to it, how does this work if the dev code, instead of using <code>await</code>, had added an event listener which would do the <code>console.log</code> at some later time?</td></tr>
  <tr class="msg" id="L192"><td class="ts-cell"><a class="ts" href="#L192" alt="Wed Feb 01 2023 08:24:56 GMT-0800 (Pacific Standard Time)">16:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">I think <code>transferAndFixLength</code> is better than <code>transferToFixedLength</code></td></tr>
  <tr class="msg" id="L193"><td class="ts-cell"><a class="ts" href="#L193" alt="Wed Feb 01 2023 08:24:58 GMT-0800 (Pacific Standard Time)">16:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">I think it has to work for promises</td></tr>
  <tr class="msg" id="L194"><td class="ts-cell"><a class="ts" href="#L194" alt="Wed Feb 01 2023 08:25:33 GMT-0800 (Pacific Standard Time)">16:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I think <code>transferAndFixLength</code> is better than <code>transferToFixedLength</code></blockquote></mx-reply>"fix" as a verb there is pretty overloaded</td></tr>
  <tr class="msg" id="L195"><td class="ts-cell"><a class="ts" href="#L195" alt="Wed Feb 01 2023 08:25:38 GMT-0800 (Pacific Standard Time)">16:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> "calling into questionable code" meaning calling into... any code?</blockquote></mx-reply>I don't believe people should or do compose code in a perfectly defensive way all the time</td></tr>
  <tr class="msg" id="L196"><td class="ts-cell"><a class="ts" href="#L196" alt="Wed Feb 01 2023 08:25:57 GMT-0800 (Pacific Standard Time)">16:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Devs cannot escape our context on our platform, so any future point in which they would trigger an event listener would already have restored the request context</td></tr>
  <tr class="msg" id="L197"><td class="ts-cell"><a class="ts" href="#L197" alt="Wed Feb 01 2023 08:26:08 GMT-0800 (Pacific Standard Time)">16:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">the same overload as <code>Fixed</code>, no?</td></tr>
  <tr class="msg" id="L198"><td class="ts-cell"><a class="ts" href="#L198" alt="Wed Feb 01 2023 08:26:13 GMT-0800 (Pacific Standard Time)">16:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">littledan</span>: while true, I also believe that a refactoring from scheduling with promises to scheduling with some other mechanism should be transparent to consumers of your code.</td></tr>
  <tr class="msg" id="L199"><td class="ts-cell"><a class="ts" href="#L199" alt="Wed Feb 01 2023 08:26:25 GMT-0800 (Pacific Standard Time)">16:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">yeah, Bloomberg's use case also has requirements that we strictly not allow "escape".</td></tr>
  <tr class="msg" id="L200"><td class="ts-cell"><a class="ts" href="#L200" alt="Wed Feb 01 2023 08:26:28 GMT-0800 (Pacific Standard Time)">16:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">that is, we should not design the language such that such a refactoring is by-default not transparent.</td></tr>
  <tr class="msg" id="L201"><td class="ts-cell"><a class="ts" href="#L201" alt="Wed Feb 01 2023 08:26:50 GMT-0800 (Pacific Standard Time)">16:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">In APMs OTOH, they would simply not work if everyone had to update all of their code... they are just based around implicit wrapping</td></tr>
  <tr class="msg" id="L202"><td class="ts-cell"><a class="ts" href="#L202" alt="Wed Feb 01 2023 08:27:03 GMT-0800 (Pacific Standard Time)">16:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">like, this was proven out historically, leading to its development</td></tr>
  <tr class="msg" id="L203"><td class="ts-cell"><a class="ts" href="#L203" alt="Wed Feb 01 2023 08:27:39 GMT-0800 (Pacific Standard Time)">16:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">APMs have used decorators in the past to get around that though</td></tr>
  <tr class="msg" id="L204"><td class="ts-cell"><a class="ts" href="#L204" alt="Wed Feb 01 2023 08:28:07 GMT-0800 (Pacific Standard Time)">16:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">shu</span>: please try to give a little more time between a name change and a stage 3 advancement next time; we may have been able to come up with a better name if we had more time</td></tr>
  <tr class="msg" id="L205"><td class="ts-cell"><a class="ts" href="#L205" alt="Wed Feb 01 2023 08:28:08 GMT-0800 (Pacific Standard Time)">16:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">well, although that'd still need changes</td></tr>
  <tr class="msg" id="L206"><td class="ts-cell"><a class="ts" href="#L206" alt="Wed Feb 01 2023 08:28:09 GMT-0800 (Pacific Standard Time)">16:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Devs cannot escape our context on our platform, so any future point in which they would trigger an event listener would already have restored the request context</blockquote></mx-reply>If you hand your callback to someone else, and there is literally no way they could schedule the callback to run with a different context than the one which existed when you handed the callback to them, I am also fine with that</td></tr>
  <tr class="msg" id="L207"><td class="ts-cell"><a class="ts" href="#L207" alt="Wed Feb 01 2023 08:28:36 GMT-0800 (Pacific Standard Time)">16:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-8">shu</span>: please try to give a little more time between a name change and a stage 3 advancement next time; we may have been able to come up with a better name if we had more time</blockquote></mx-reply>Why didn't you put yourself on the queue?</td></tr>
  <tr class="msg" id="L208"><td class="ts-cell"><a class="ts" href="#L208" alt="Wed Feb 01 2023 08:28:40 GMT-0800 (Pacific Standard Time)">16:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">but that does lock us into, <em>every</em> way of scheduling a task in the host must automatically wrap the callback passed to that context</td></tr>
  <tr class="msg" id="L209"><td class="ts-cell"><a class="ts" href="#L209" alt="Wed Feb 01 2023 08:28:40 GMT-0800 (Pacific Standard Time)">16:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">Michael Ficarra</span>: technically there wasn't a name change</td></tr>
  <tr class="msg" id="L210"><td class="ts-cell"><a class="ts" href="#L210" alt="Wed Feb 01 2023 08:28:46 GMT-0800 (Pacific Standard Time)">16:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">littledan</span>: because it didn't matter enough</td></tr>
  <tr class="msg" id="L211"><td class="ts-cell"><a class="ts" href="#L211" alt="Wed Feb 01 2023 08:28:52 GMT-0800 (Pacific Standard Time)">16:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">eventListener, unhandled promise handler, everything</td></tr>
  <tr class="msg" id="L212"><td class="ts-cell"><a class="ts" href="#L212" alt="Wed Feb 01 2023 08:29:12 GMT-0800 (Pacific Standard Time)">16:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@legendecas:matrix.org">Chengzhong Wu</span>&gt;</div></td><td class="msg-cell">you can AsyncContext.wrap the callback in such case</td></tr>
  <tr class="msg" id="L213"><td class="ts-cell"><a class="ts" href="#L213" alt="Wed Feb 01 2023 08:29:21 GMT-0800 (Pacific Standard Time)">16:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-7">Chengzhong Wu</span>: well, that's my argument</td></tr>
  <tr class="msg" id="L214"><td class="ts-cell"><a class="ts" href="#L214" alt="Wed Feb 01 2023 08:29:39 GMT-0800 (Pacific Standard Time)">16:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">if some ways of scheduling require you to wrap, they all should</td></tr>
  <tr class="msg" id="L215"><td class="ts-cell"><a class="ts" href="#L215" alt="Wed Feb 01 2023 08:29:49 GMT-0800 (Pacific Standard Time)">16:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">but if no ways of scheduling require you to wrap, that's fine too</td></tr>
  <tr class="msg" id="L216"><td class="ts-cell"><a class="ts" href="#L216" alt="Wed Feb 01 2023 08:30:02 GMT-0800 (Pacific Standard Time)">16:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Promises are a way for our users to later schedule a task, we do not control where they create promises or where the chain <code>.then()</code></td></tr>
  <tr class="msg" id="L217"><td class="ts-cell"><a class="ts" href="#L217" alt="Wed Feb 01 2023 08:30:03 GMT-0800 (Pacific Standard Time)">16:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">Michael Ficarra</span>: <code>transfer</code> was always named transfer, but because of the "preserve resizability" semantics change, to get the original "fixed length" behavior, i added a new method</td></tr>
  <tr class="msg" id="L218"><td class="ts-cell"><a class="ts" href="#L218" alt="Wed Feb 01 2023 08:30:04 GMT-0800 (Pacific Standard Time)">16:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I am just not enthusiastic about <em>some</em> callback-taking scheduling APIs wrapping</td></tr>
  <tr class="msg" id="L219"><td class="ts-cell"><a class="ts" href="#L219" alt="Wed Feb 01 2023 08:30:08 GMT-0800 (Pacific Standard Time)">16:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@legendecas:matrix.org">Chengzhong Wu</span>&gt;</div></td><td class="msg-cell">But the default behavior can be that people can get the host defined context when using host apis.</td></tr>
  <tr class="msg" id="L220"><td class="ts-cell"><a class="ts" href="#L220" alt="Wed Feb 01 2023 08:30:18 GMT-0800 (Pacific Standard Time)">16:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">this meeting is the first meeting i presented the new method</td></tr>
  <tr class="msg" id="L221"><td class="ts-cell"><a class="ts" href="#L221" alt="Wed Feb 01 2023 08:30:28 GMT-0800 (Pacific Standard Time)">16:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">So in order for us to guarantee they cannot escape our context, the <code>promise.then()</code> must preserve context</td></tr>
  <tr class="msg" id="L222"><td class="ts-cell"><a class="ts" href="#L222" alt="Wed Feb 01 2023 08:30:30 GMT-0800 (Pacific Standard Time)">16:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">littledan</span>: I don't think we need to introduce a formal process around it. If I think the name was <em>bad</em> I would have blocked advancement.</td></tr>
  <tr class="msg" id="L223"><td class="ts-cell"><a class="ts" href="#L223" alt="Wed Feb 01 2023 08:30:36 GMT-0800 (Pacific Standard Time)">16:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-10">littledan</span>: because it didn't matter enough</blockquote></mx-reply>OK, in this case, I don't see your advice for waiting more for Stage 3 as something actionable for me if I ran into a simlar case</td></tr>
  <tr class="msg" id="L224"><td class="ts-cell"><a class="ts" href="#L224" alt="Wed Feb 01 2023 08:30:44 GMT-0800 (Pacific Standard Time)">16:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Things that obviously schedule an async task should preserve async context</td></tr>
  <tr class="msg" id="L225"><td class="ts-cell"><a class="ts" href="#L225" alt="Wed Feb 01 2023 08:30:44 GMT-0800 (Pacific Standard Time)">16:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">shu</span>: true, but I had reviewed the proposal with the earlier name</td></tr>
  <tr class="msg" id="L226"><td class="ts-cell"><a class="ts" href="#L226" alt="Wed Feb 01 2023 08:31:04 GMT-0800 (Pacific Standard Time)">16:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> So in order for us to guarantee they cannot escape our context, the <code>promise.then()</code> must preserve context</blockquote></mx-reply>yes, and also every other possible way of scheduling a callback</td></tr>
  <tr class="msg" id="L227"><td class="ts-cell"><a class="ts" href="#L227" alt="Wed Feb 01 2023 08:31:04 GMT-0800 (Pacific Standard Time)">16:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">Michael Ficarra</span>: yeah also fair, it was kind of last minute there</td></tr>
  <tr class="msg" id="L228"><td class="ts-cell"><a class="ts" href="#L228" alt="Wed Feb 01 2023 08:31:05 GMT-0800 (Pacific Standard Time)">16:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">which I am fine with, if it's viable</td></tr>
  <tr class="msg" id="L229"><td class="ts-cell"><a class="ts" href="#L229" alt="Wed Feb 01 2023 08:31:07 GMT-0800 (Pacific Standard Time)">16:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Michael, this is exactly what we introduced the "note dissent that's non-blocking" part for</td></tr>
  <tr class="msg" id="L230"><td class="ts-cell"><a class="ts" href="#L230" alt="Wed Feb 01 2023 08:31:07 GMT-0800 (Pacific Standard Time)">16:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">Note: Summary needs writing for previous item</td></tr>
  <tr class="msg" id="L231"><td class="ts-cell"><a class="ts" href="#L231" alt="Wed Feb 01 2023 08:31:24 GMT-0800 (Pacific Standard Time)">16:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> yes, and also every other possible way of scheduling a callback</blockquote></mx-reply>I agree, that's the behavior that I want</td></tr>
  <tr class="msg" id="L232"><td class="ts-cell"><a class="ts" href="#L232" alt="Wed Feb 01 2023 08:31:25 GMT-0800 (Pacific Standard Time)">16:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Michael, this is exactly what we introduced the "note dissent that's non-blocking" part for</blockquote></mx-reply>so I'm wondering what's not going to work about that</td></tr>
  <tr class="msg" id="L233"><td class="ts-cell"><a class="ts" href="#L233" alt="Wed Feb 01 2023 08:31:47 GMT-0800 (Pacific Standard Time)">16:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Key word is <em>scheduling</em> here</td></tr>
  <tr class="msg" id="L234"><td class="ts-cell"><a class="ts" href="#L234" alt="Wed Feb 01 2023 08:31:59 GMT-0800 (Pacific Standard Time)">16:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">"addEventListener" counts as scheduling, of course</td></tr>
  <tr class="msg" id="L235"><td class="ts-cell"><a class="ts" href="#L235" alt="Wed Feb 01 2023 08:32:01 GMT-0800 (Pacific Standard Time)">16:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">and <code>onMessage</code></td></tr>
  <tr class="msg" id="L236"><td class="ts-cell"><a class="ts" href="#L236" alt="Wed Feb 01 2023 08:32:04 GMT-0800 (Pacific Standard Time)">16:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">It doesn't</td></tr>
  <tr class="msg" id="L237"><td class="ts-cell"><a class="ts" href="#L237" alt="Wed Feb 01 2023 08:32:17 GMT-0800 (Pacific Standard Time)">16:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">There's not obvious point where the callback would be invoked</td></tr>
  <tr class="msg" id="L238"><td class="ts-cell"><a class="ts" href="#L238" alt="Wed Feb 01 2023 08:32:17 GMT-0800 (Pacific Standard Time)">16:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">ok then I don't understand what you're saying</td></tr>
  <tr class="msg" id="L239"><td class="ts-cell"><a class="ts" href="#L239" alt="Wed Feb 01 2023 08:32:53 GMT-0800 (Pacific Standard Time)">16:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I can make a thing which looks exactly like a promise but which uses <code>addEventListener</code> to schedule the callback to run</td></tr>
  <tr class="msg" id="L240"><td class="ts-cell"><a class="ts" href="#L240" alt="Wed Feb 01 2023 08:32:54 GMT-0800 (Pacific Standard Time)">16:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> so I'm wondering what's not going to work about that</blockquote></mx-reply>To me, the value of advancing today outweighed the value of potentially coming up with a slightly better name. If it had not, I would have spoken up formally.</td></tr>
  <tr class="msg" id="L241"><td class="ts-cell"><a class="ts" href="#L241" alt="Wed Feb 01 2023 08:32:57 GMT-0800 (Pacific Standard Time)">16:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><code>await</code> schedules a task to happen as soon as the promise settles (same for <code>.then()</code>), <code>setTimeout</code> schedules to run after X ms, etc</td></tr>
  <tr class="msg" id="L242"><td class="ts-cell"><a class="ts" href="#L242" alt="Wed Feb 01 2023 08:32:59 GMT-0800 (Pacific Standard Time)">16:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">there is no fundamental difference btween these things</td></tr>
  <tr class="msg" id="L243"><td class="ts-cell"><a class="ts" href="#L243" alt="Wed Feb 01 2023 08:33:19 GMT-0800 (Pacific Standard Time)">16:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">There is</td></tr>
  <tr class="msg" id="L244"><td class="ts-cell"><a class="ts" href="#L244" alt="Wed Feb 01 2023 08:33:35 GMT-0800 (Pacific Standard Time)">16:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">It exists only in imperative user code, not as part of the language</td></tr>
  <tr class="msg" id="L245"><td class="ts-cell"><a class="ts" href="#L245" alt="Wed Feb 01 2023 08:33:50 GMT-0800 (Pacific Standard Time)">16:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">What is "it" in that sentence?</td></tr>
  <tr class="msg" id="L246"><td class="ts-cell"><a class="ts" href="#L246" alt="Wed Feb 01 2023 08:34:10 GMT-0800 (Pacific Standard Time)">16:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Whatever calls your registered listener</td></tr>
  <tr class="msg" id="L247"><td class="ts-cell"><a class="ts" href="#L247" alt="Wed Feb 01 2023 08:34:59 GMT-0800 (Pacific Standard Time)">16:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">"this callback gets called when the user clicks a button" is exactly the same kind of thing as "this callback gets called when the network request completes [and therefore settles the <code>fetch</code> promise]"</td></tr>
  <tr class="msg" id="L248"><td class="ts-cell"><a class="ts" href="#L248" alt="Wed Feb 01 2023 08:35:38 GMT-0800 (Pacific Standard Time)">16:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">like, <code>XMLHttpRequest</code>'s <code>onload</code> is not a different kind of thing from <code>fetch</code>'s <code>.then</code></td></tr>
  <tr class="msg" id="L249"><td class="ts-cell"><a class="ts" href="#L249" alt="Wed Feb 01 2023 08:35:49 GMT-0800 (Pacific Standard Time)">16:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">That invocation isn't done automatically per the scheduling</td></tr>
  <tr class="msg" id="L250"><td class="ts-cell"><a class="ts" href="#L250" alt="Wed Feb 01 2023 08:36:11 GMT-0800 (Pacific Standard Time)">16:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Node has a long history of how this works, and I'm really hesitant to break with their precedent</td></tr>
  <tr class="msg" id="L251"><td class="ts-cell"><a class="ts" href="#L251" alt="Wed Feb 01 2023 08:36:40 GMT-0800 (Pacific Standard Time)">16:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">If there is a meaningful difference between <code>XMLHttpRequest</code>'s <code>onload</code> and <code>fetch</code>'s <code>.then</code>, I am not yet seeing it</td></tr>
  <tr class="msg" id="L252"><td class="ts-cell"><a class="ts" href="#L252" alt="Wed Feb 01 2023 08:37:14 GMT-0800 (Pacific Standard Time)">16:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">and in the absence of such a difference, I do not think those should behave differently wrt AsyncContext</td></tr>
  <tr class="msg" id="L253"><td class="ts-cell"><a class="ts" href="#L253" alt="Wed Feb 01 2023 08:37:40 GMT-0800 (Pacific Standard Time)">16:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I am OK with both "both of those APIs wrap" and "neither API wraps", but not only one of them doing so</td></tr>
  <tr class="msg" id="L254"><td class="ts-cell"><a class="ts" href="#L254" alt="Wed Feb 01 2023 08:38:28 GMT-0800 (Pacific Standard Time)">16:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">The difference is the promise instance?</td></tr>
  <tr class="msg" id="L255"><td class="ts-cell"><a class="ts" href="#L255" alt="Wed Feb 01 2023 08:38:33 GMT-0800 (Pacific Standard Time)">16:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I could see the point that <code>setImmediate</code>, <code>setTimeout</code>, <code>setInterval</code>, and even <code>process.nextTick</code> not automatically flow context, but <code>AsyncContext</code> is an async control-flow capability. <code>await</code> and <code>then</code> are explicitly async control-flow operations. The Timers API's aren't <em>precisely</em> async control flow, though async control flow has been implemented on top of them in the past.</td></tr>
  <tr class="msg" id="L256"><td class="ts-cell"><a class="ts" href="#L256" alt="Wed Feb 01 2023 08:38:36 GMT-0800 (Pacific Standard Time)">16:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">The fact that it exists in ecma262</td></tr>
  <tr class="msg" id="L257"><td class="ts-cell"><a class="ts" href="#L257" alt="Wed Feb 01 2023 08:39:29 GMT-0800 (Pacific Standard Time)">16:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">The internal event listener that fetch uses doesn't need extra work, because the promise it returns is responsible for scheduling continuations</td></tr>
  <tr class="msg" id="L258"><td class="ts-cell"><a class="ts" href="#L258" alt="Wed Feb 01 2023 08:39:29 GMT-0800 (Pacific Standard Time)">16:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">Why are promise instances relevant?</td></tr>
  <tr class="msg" id="L259"><td class="ts-cell"><a class="ts" href="#L259" alt="Wed Feb 01 2023 08:39:30 GMT-0800 (Pacific Standard Time)">16:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I'm fairly certain <code>AsyncContext</code> must <em>at least</em> support both <code>await</code> and <code>.then</code> to be truly viable.</td></tr>
  <tr class="msg" id="L260"><td class="ts-cell"><a class="ts" href="#L260" alt="Wed Feb 01 2023 08:40:14 GMT-0800 (Pacific Standard Time)">16:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">Why is "it exists in ecma262" relevant, or even something you could reasonably ask a developer to know?</td></tr>
  <tr class="msg" id="L261"><td class="ts-cell"><a class="ts" href="#L261" alt="Wed Feb 01 2023 08:40:16 GMT-0800 (Pacific Standard Time)">16:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Why are promise instances relevant?</blockquote></mx-reply>Promise instances are reified async control flow operations.</td></tr>
  <tr class="msg" id="L262"><td class="ts-cell"><a class="ts" href="#L262" alt="Wed Feb 01 2023 08:40:46 GMT-0800 (Pacific Standard Time)">16:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">More to the point: <span class="nick-1">Justin Ridgewell</span> , you said that for your abstraction to work, there <em>must</em> not be a way to escape the context. if <code>onload</code> is a way to escape the context, then... ???</td></tr>
  <tr class="msg" id="L263"><td class="ts-cell"><a class="ts" href="#L263" alt="Wed Feb 01 2023 08:40:48 GMT-0800 (Pacific Standard Time)">16:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">That's a great way to put it</td></tr>
  <tr class="msg" id="L264"><td class="ts-cell"><a class="ts" href="#L264" alt="Wed Feb 01 2023 08:40:58 GMT-0800 (Pacific Standard Time)">16:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">so are callbacks!</td></tr>
  <tr class="msg" id="L265"><td class="ts-cell"><a class="ts" href="#L265" alt="Wed Feb 01 2023 08:41:24 GMT-0800 (Pacific Standard Time)">16:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">"Promises are sugar for callbacks" is at least as important as "await is sugar for Promises"</td></tr>
  <tr class="msg" id="L266"><td class="ts-cell"><a class="ts" href="#L266" alt="Wed Feb 01 2023 08:41:29 GMT-0800 (Pacific Standard Time)">16:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Callbacks aren't <em>explicitly</em> async control flow.</td></tr>
  <tr class="msg" id="L267"><td class="ts-cell"><a class="ts" href="#L267" alt="Wed Feb 01 2023 08:41:58 GMT-0800 (Pacific Standard Time)">16:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> "Promises are sugar for callbacks" is at least as important as "await is sugar for Promises"</blockquote></mx-reply>That's a false equivalence. Promises are sugar for CPS, of which callbacks are a part, not the entirety.</td></tr>
  <tr class="msg" id="L268"><td class="ts-cell"><a class="ts" href="#L268" alt="Wed Feb 01 2023 08:42:27 GMT-0800 (Pacific Standard Time)">16:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">Sure, sugar for CPS, then. But <code>onload</code> is CPS also.</td></tr>
  <tr class="msg" id="L269"><td class="ts-cell"><a class="ts" href="#L269" alt="Wed Feb 01 2023 08:42:48 GMT-0800 (Pacific Standard Time)">16:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">No, onload is reactivity. It isn't expressly intended to solve async control-flow.</td></tr>
  <tr class="msg" id="L270"><td class="ts-cell"><a class="ts" href="#L270" alt="Wed Feb 01 2023 08:43:08 GMT-0800 (Pacific Standard Time)">16:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I do not understand the distinction you're drawing here.</td></tr>
  <tr class="msg" id="L271"><td class="ts-cell"><a class="ts" href="#L271" alt="Wed Feb 01 2023 08:43:12 GMT-0800 (Pacific Standard Time)">16:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><code>Promise</code> is expressly intended to solve async control flow.</td></tr>
  <tr class="msg" id="L272"><td class="ts-cell"><a class="ts" href="#L272" alt="Wed Feb 01 2023 08:44:24 GMT-0800 (Pacific Standard Time)">16:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">backing up a step from whether something is or is not "explicitly" async control flow, my position is that it is not reasonable to ask developers to intuit that XHR's <code>.onload</code> is a fundamentally different <em>kind of thing</em> than <code>fetch</code>'s <code>.then</code>, especially since we've spent most of the last decade going around telling everyone that the latter is sugar for the former.</td></tr>
  <tr class="msg" id="L273"><td class="ts-cell"><a class="ts" href="#L273" alt="Wed Feb 01 2023 08:44:41 GMT-0800 (Pacific Standard Time)">16:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">so I am not OK with designs which require developers to intuit this difference.</td></tr>
  <tr class="msg" id="L274"><td class="ts-cell"><a class="ts" href="#L274" alt="Wed Feb 01 2023 08:45:33 GMT-0800 (Pacific Standard Time)">16:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">ljharb</span>: I'd like to try to have a call to resolve the <code>Id</code> issue, are you available during the break today?</td></tr>
  <tr class="msg" id="L275"><td class="ts-cell"><a class="ts" href="#L275" alt="Wed Feb 01 2023 08:45:40 GMT-0800 (Pacific Standard Time)">16:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">but I am OK with both possible designs which treat those as the same kind of thing - making <code>onload</code> wrap, or making <code>then</code> not wrap.</td></tr>
  <tr class="msg" id="L276"><td class="ts-cell"><a class="ts" href="#L276" alt="Wed Feb 01 2023 08:45:57 GMT-0800 (Pacific Standard Time)">16:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I think your definition of CPS is is <em>far</em> more broad than what is generally accepted.</td></tr>
  <tr class="msg" id="L277"><td class="ts-cell"><a class="ts" href="#L277" alt="Wed Feb 01 2023 08:46:11 GMT-0800 (Pacific Standard Time)">16:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">again, I am not super committed to the definition of terms here.</td></tr>
  <tr class="msg" id="L278"><td class="ts-cell"><a class="ts" href="#L278" alt="Wed Feb 01 2023 08:46:40 GMT-0800 (Pacific Standard Time)">16:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-6">ljharb</span>: I'd like to try to have a call to resolve the <code>Id</code> issue, are you available during the break today?</blockquote></mx-reply>absolutely, thanks</td></tr>
  <tr class="msg" id="L279"><td class="ts-cell"><a class="ts" href="#L279" alt="Wed Feb 01 2023 08:46:42 GMT-0800 (Pacific Standard Time)">16:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">the thing which is important to me is the bit about whether or not developer should know to treat <code>.onload</code> as a different kind of thing from <code>.then</code></td></tr>
  <tr class="msg" id="L280"><td class="ts-cell"><a class="ts" href="#L280" alt="Wed Feb 01 2023 08:46:57 GMT-0800 (Pacific Standard Time)">16:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">and, specifically, whether developers <em>who aren't doing anything with async contexts at all</em> should have to know that</td></tr>
  <tr class="msg" id="L281"><td class="ts-cell"><a class="ts" href="#L281" alt="Wed Feb 01 2023 08:47:10 GMT-0800 (Pacific Standard Time)">16:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I think that whether <code>onload</code> should wrap should be up to WHATWG. TC39 doesn't spec <code>onload</code>, however. What we do specify is <code>Promise</code>.</td></tr>
  <tr class="msg" id="L282"><td class="ts-cell"><a class="ts" href="#L282" alt="Wed Feb 01 2023 08:47:45 GMT-0800 (Pacific Standard Time)">16:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> absolutely, thanks</blockquote></mx-reply>can we aim for the first half of the break?</td></tr>
  <tr class="msg" id="L283"><td class="ts-cell"><a class="ts" href="#L283" alt="Wed Feb 01 2023 08:47:47 GMT-0800 (Pacific Standard Time)">16:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">refactoring my library from <code>fetch</code> to <code>XHR</code> should not break <em>consumers</em> of my library just because they happened to be using async contexts.</td></tr>
  <tr class="msg" id="L284"><td class="ts-cell"><a class="ts" href="#L284" alt="Wed Feb 01 2023 08:48:16 GMT-0800 (Pacific Standard Time)">16:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">yup, just shoot me a link, i'm open</td></tr>
  <tr class="msg" id="L285"><td class="ts-cell"><a class="ts" href="#L285" alt="Wed Feb 01 2023 08:48:34 GMT-0800 (Pacific Standard Time)">16:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">That would already have consequences</td></tr>
  <tr class="msg" id="L286"><td class="ts-cell"><a class="ts" href="#L286" alt="Wed Feb 01 2023 08:50:03 GMT-0800 (Pacific Standard Time)">16:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">For example, you would have to manually handle error propagation. If not, then there are observable differences in whether that error is a rejection, an unhandled promise rejection, or some other host-defined error-handling mechanism.</td></tr>
  <tr class="msg" id="L287"><td class="ts-cell"><a class="ts" href="#L287" alt="Wed Feb 01 2023 08:51:25 GMT-0800 (Pacific Standard Time)">16:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">By using <code>Promise</code>, you get a lot of async control flow functionality for free. Automatically flowing an <code>AsyncContext</code> across async control flow is more free functionality.</td></tr>
  <tr class="msg" id="L288"><td class="ts-cell"><a class="ts" href="#L288" alt="Wed Feb 01 2023 08:51:29 GMT-0800 (Pacific Standard Time)">16:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">OK, so assume I am manually handling error propagation.</td></tr>
  <tr class="msg" id="L289"><td class="ts-cell"><a class="ts" href="#L289" alt="Wed Feb 01 2023 08:52:07 GMT-0800 (Pacific Standard Time)">16:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">You, as the library author, could also manually <code>AsyncContext.wrap</code> the incoming callback to support context flow.</td></tr>
  <tr class="msg" id="L290"><td class="ts-cell"><a class="ts" href="#L290" alt="Wed Feb 01 2023 08:52:09 GMT-0800 (Pacific Standard Time)">16:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">As the library implementor, I should not have to care about whether or not I am flowing an <code>AsyncContext</code>. That is, as I understand it, literally the entire point of this feature.</td></tr>
  <tr class="msg" id="L291"><td class="ts-cell"><a class="ts" href="#L291" alt="Wed Feb 01 2023 08:52:54 GMT-0800 (Pacific Standard Time)">16:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">I've created <a href="https://meet.jit.si/identifier">https://meet.jit.si/identifier</a>. not all the champions will be there but Justin, Richard, and I will</td></tr>
  <tr class="msg" id="L292"><td class="ts-cell"><a class="ts" href="#L292" alt="Wed Feb 01 2023 08:54:52 GMT-0800 (Pacific Standard Time)">16:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Please join the fun AsyncContext discussion at #tc39-async-context:<a href="http://matrix.org">matrix.org</a> !</td></tr>
  <tr class="msg" id="L293"><td class="ts-cell"><a class="ts" href="#L293" alt="Wed Feb 01 2023 08:55:48 GMT-0800 (Pacific Standard Time)">16:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> As the library implementor, I should not have to care about whether or not I am flowing an <code>AsyncContext</code>. That is, as I understand it, literally the entire point of this feature.</blockquote></mx-reply>That's not entirely true. If you, as a library author, are using language-specified async control flow capabilities (<code>await</code>, <code>Promise</code>, <code>AsyncContext</code>), then yes it should be transparent. As a library author you should also be able to explicitly escape the current context, which is also achievable with <code>AsyncContext.wrap</code>.</td></tr>
  <tr class="msg" id="L294"><td class="ts-cell"><a class="ts" href="#L294" alt="Wed Feb 01 2023 08:57:08 GMT-0800 (Pacific Standard Time)">16:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">In fact, if you were wrapping your XHR <code>onload</code> in a <code>new Promise(...)</code>, having <code>.then</code> do async control flow for you would be a win, because you still get <code>AsyncContext</code> flow for free.</td></tr>
  <tr class="msg" id="L295"><td class="ts-cell"><a class="ts" href="#L295" alt="Wed Feb 01 2023 08:57:25 GMT-0800 (Pacific Standard Time)">16:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">littledan</span>: MatrixError: [403] You are not invited to this room. (<a href="https://matrix-client.matrix.org/_matrix/client/r0/join/%23tc39-async-context%3Amatrix.org">https://matrix-client.matrix.org/_matrix/client/r0/join/%23tc39-async-context%3Amatrix.org</a>)  🥺</td></tr>
  <tr class="msg" id="L296"><td class="ts-cell"><a class="ts" href="#L296" alt="Wed Feb 01 2023 08:57:31 GMT-0800 (Pacific Standard Time)">16:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">The thing that <span class="nick-1">Justin Ridgewell</span> said earlier was that they are trying to "guarantee they cannot escape our context"</td></tr>
  <tr class="msg" id="L297"><td class="ts-cell"><a class="ts" href="#L297" alt="Wed Feb 01 2023 08:57:58 GMT-0800 (Pacific Standard Time)">16:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">which means that "some subset of things will preserve the context transparently" is not good enough</td></tr>
  <tr class="msg" id="L298"><td class="ts-cell"><a class="ts" href="#L298" alt="Wed Feb 01 2023 09:00:39 GMT-0800 (Pacific Standard Time)">17:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">I think it will always be possible for a library to run a callback in a pre-captured context? but the user can always wrap their callback to force it back.</td></tr>
  <tr class="msg" id="L299"><td class="ts-cell"><a class="ts" href="#L299" alt="Wed Feb 01 2023 09:00:56 GMT-0800 (Pacific Standard Time)">17:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> which means that "some subset of things will preserve the context transparently" is not good enough</blockquote></mx-reply>I'm not refuting that. My position is that <code>await</code> and <code>Promise</code> must support automatic flow <em>at a minimum</em> to be viable.</td></tr>
  <tr class="msg" id="L300"><td class="ts-cell"><a class="ts" href="#L300" alt="Wed Feb 01 2023 09:01:16 GMT-0800 (Pacific Standard Time)">17:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">It means any API or syntactic surface the user code has available to them cannot allow them to escape an AsyncContext that was created when invoking the user code the first time</td></tr>
  <tr class="msg" id="L301"><td class="ts-cell"><a class="ts" href="#L301" alt="Wed Feb 01 2023 09:01:35 GMT-0800 (Pacific Standard Time)">17:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I am still confused about what you mean by "viable", since, while I grant that those are <em>necessary</em> for the thing Justing wants, they are certainly not <em>sufficient</em></td></tr>
  <tr class="msg" id="L302"><td class="ts-cell"><a class="ts" href="#L302" alt="Wed Feb 01 2023 09:01:42 GMT-0800 (Pacific Standard Time)">17:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">built-ins like Promise and syntax like await must preserve this</td></tr>
  <tr class="msg" id="L303"><td class="ts-cell"><a class="ts" href="#L303" alt="Wed Feb 01 2023 09:01:47 GMT-0800 (Pacific Standard Time)">17:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">by "viable" do you mean something like "convenient"?</td></tr>
  <tr class="msg" id="L304"><td class="ts-cell"><a class="ts" href="#L304" alt="Wed Feb 01 2023 09:01:53 GMT-0800 (Pacific Standard Time)">17:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Please join the fun AsyncContext discussion at #tc39-async-context:<a href="http://matrix.org">matrix.org</a> !</blockquote></mx-reply>I think we need to transfer it to the TC39 space first, then open up registrations to any space members</td></tr>
  <tr class="msg" id="L305"><td class="ts-cell"><a class="ts" href="#L305" alt="Wed Feb 01 2023 09:01:55 GMT-0800 (Pacific Standard Time)">17:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-10">littledan</span>: MatrixError: [403] You are not invited to this room. (<a href="https://matrix-client.matrix.org/_matrix/client/r0/join/%23tc39-async-context%3Amatrix.org">https://matrix-client.matrix.org/_matrix/client/r0/join/%23tc39-async-context%3Amatrix.org</a>)  🥺</blockquote></mx-reply>Sorry about that, please try again</td></tr>
  <tr class="msg" id="L306"><td class="ts-cell"><a class="ts" href="#L306" alt="Wed Feb 01 2023 09:02:06 GMT-0800 (Pacific Standard Time)">17:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I think we need to transfer it to the TC39 space first, then open up registrations to any space members</blockquote></mx-reply>no, you literally just left it private</td></tr>
  <tr class="msg" id="L307"><td class="ts-cell"><a class="ts" href="#L307" alt="Wed Feb 01 2023 09:02:29 GMT-0800 (Pacific Standard Time)">17:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">the only other feature in the language async calling is FinalizationRegistry callbacks, which should also capture at creation</td></tr>
  <tr class="msg" id="L308"><td class="ts-cell"><a class="ts" href="#L308" alt="Wed Feb 01 2023 09:02:44 GMT-0800 (Pacific Standard Time)">17:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> built-ins like Promise and syntax like await must preserve this</blockquote></mx-reply>no one should have to know that XHR or setTimeout are not "built in" in the same sense that Promise is</td></tr>
  <tr class="msg" id="L309"><td class="ts-cell"><a class="ts" href="#L309" alt="Wed Feb 01 2023 09:02:48 GMT-0800 (Pacific Standard Time)">17:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">anything else is a host API, that can be virtualized by the environment executing the user code</td></tr>
  <tr class="msg" id="L310"><td class="ts-cell"><a class="ts" href="#L310" alt="Wed Feb 01 2023 09:03:29 GMT-0800 (Pacific Standard Time)">17:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">I'm not asking that they do, I'm saying the onus is on the host to preserve this guarantee, whatever "host" is (virtual or browser, etc.)</td></tr>
  <tr class="msg" id="L311"><td class="ts-cell"><a class="ts" href="#L311" alt="Wed Feb 01 2023 09:04:45 GMT-0800 (Pacific Standard Time)">17:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">If we want it to be a guarantee we can write it down, but it sounds like the designers of the feature do not think it should be a guarantee, so I don't understand the model we're going for here</td></tr>
  <tr class="msg" id="L312"><td class="ts-cell"><a class="ts" href="#L312" alt="Wed Feb 01 2023 09:04:46 GMT-0800 (Pacific Standard Time)">17:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> by "viable" do you mean something like "convenient"?</blockquote></mx-reply>No, I mean an <code>AsyncContext</code> that doesn't support <code>.then</code> would not be useful for my purposes and I don't know that I would be willing to support Stage 2 without it. Limiting it only to <code>await</code> makes it barely usable and results in a terrible DX for the most common case outside of <code>await</code> itself.</td></tr>
  <tr class="msg" id="L313"><td class="ts-cell"><a class="ts" href="#L313" alt="Wed Feb 01 2023 09:05:14 GMT-0800 (Pacific Standard Time)">17:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">How can we transfer #tc39-async-context:<a href="http://matrix.org">matrix.org</a> to the TC39 space?</td></tr>
  <tr class="msg" id="L314"><td class="ts-cell"><a class="ts" href="#L314" alt="Wed Feb 01 2023 09:05:25 GMT-0800 (Pacific Standard Time)">17:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i think i can do it if you add me as an admin to the channel</td></tr>
  <tr class="msg" id="L315"><td class="ts-cell"><a class="ts" href="#L315" alt="Wed Feb 01 2023 09:06:04 GMT-0800 (Pacific Standard Time)">17:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Done</td></tr>
  <tr class="msg" id="L316"><td class="ts-cell"><a class="ts" href="#L316" alt="Wed Feb 01 2023 09:07:17 GMT-0800 (Pacific Standard Time)">17:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> No, I mean an <code>AsyncContext</code> that doesn't support <code>.then</code> would not be useful for my purposes and I don't know that I would be willing to support Stage 2 without it. Limiting it only to <code>await</code> makes it barely usable and results in a terrible DX for the most common case outside of <code>await</code> itself.</blockquote></mx-reply>that is: the thing you mean is "without this it will be too inconvenient to be practical", not "without this it will lack some guarantee I rely on", right?</td></tr>
  <tr class="msg" id="L317"><td class="ts-cell"><a class="ts" href="#L317" alt="Wed Feb 01 2023 09:07:20 GMT-0800 (Pacific Standard Time)">17:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">give me a bit, i should have it done by 10</td></tr>
  <tr class="msg" id="L318"><td class="ts-cell"><a class="ts" href="#L318" alt="Wed Feb 01 2023 09:08:43 GMT-0800 (Pacific Standard Time)">17:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I am open to arguments of that form, but those would incline me in the direction of making it a requirement for hosts that <em>any</em> method of registering a callback which might get run out of the current microtask tick must wrap the callback with the async context which was present when the callback was registered</td></tr>
  <tr class="msg" id="L319"><td class="ts-cell"><a class="ts" href="#L319" alt="Wed Feb 01 2023 09:08:54 GMT-0800 (Pacific Standard Time)">17:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">(like I said, I'm ok with "all" or "none", just not "some")</td></tr>
  <tr class="msg" id="L320"><td class="ts-cell"><a class="ts" href="#L320" alt="Wed Feb 01 2023 09:10:04 GMT-0800 (Pacific Standard Time)">17:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> that is: the thing you mean is "without this it will be too inconvenient to be practical", not "without this it will lack some guarantee I rely on", right?</blockquote></mx-reply>Then yes. Requiring manual wrap for <code>.then</code> is too inconvenient to be practical, and too confusing for users who have been told for years that <code>async</code>/<code>await</code> is a syntactic transformation over <code>.then</code>. Adding something new to <code>await</code> would break that mental model.</td></tr>
  <tr class="msg" id="L321"><td class="ts-cell"><a class="ts" href="#L321" alt="Wed Feb 01 2023 09:10:17 GMT-0800 (Pacific Standard Time)">17:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Who has permissions to add rooms to the TC39 space?</td></tr>
  <tr class="msg" id="L322"><td class="ts-cell"><a class="ts" href="#L322" alt="Wed Feb 01 2023 09:10:23 GMT-0800 (Pacific Standard Time)">17:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">We'd like to add the existing async context room</td></tr>
  <tr class="msg" id="L323"><td class="ts-cell"><a class="ts" href="#L323" alt="Wed Feb 01 2023 09:11:08 GMT-0800 (Pacific Standard Time)">17:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Jordan said he'd do it just above</td></tr>
  <tr class="msg" id="L324"><td class="ts-cell"><a class="ts" href="#L324" alt="Wed Feb 01 2023 09:12:30 GMT-0800 (Pacific Standard Time)">17:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">(I wouldn't mind if all delegates had these sorts of permissions)</td></tr>
  <tr class="msg" id="L325"><td class="ts-cell"><a class="ts" href="#L325" alt="Wed Feb 01 2023 09:13:02 GMT-0800 (Pacific Standard Time)">17:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">sorry, I had missed this comment. thanks, Jordan!</td></tr>
  <tr class="msg" id="L326"><td class="ts-cell"><a class="ts" href="#L326" alt="Wed Feb 01 2023 09:14:04 GMT-0800 (Pacific Standard Time)">17:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> (like I said, I'm ok with "all" or "none", just not "some")</blockquote></mx-reply>I don't imagine "all" is practical either, not without running afoul of <span class="nick-8">shu</span>'s performance concerns. My position is that it should be considered on a case-by-case basis by hosts whether async context should automatically flow. Perhaps we can provide guidance on what cases make sense, but I'm not sure we could mandate "all".</td></tr>
  <tr class="msg" id="L327"><td class="ts-cell"><a class="ts" href="#L327" alt="Wed Feb 01 2023 09:15:39 GMT-0800 (Pacific Standard Time)">17:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">But within ECMA-262, it should <em>at least</em> flow through the built-in control-flow objects we have (namely built-in <code>Promise</code> and <code>Generator</code> objects).</td></tr>
  <tr class="msg" id="L328"><td class="ts-cell"><a class="ts" href="#L328" alt="Wed Feb 01 2023 09:18:58 GMT-0800 (Pacific Standard Time)">17:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">If we can't mandate "all", we can't do the "cannot escape context" thing Justin said is a requirement</td></tr>
  <tr class="msg" id="L329"><td class="ts-cell"><a class="ts" href="#L329" alt="Wed Feb 01 2023 09:19:39 GMT-0800 (Pacific Standard Time)">17:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">"cannot escape the context" is something which a particular <em>environment</em> can give semantics to</td></tr>
  <tr class="msg" id="L330"><td class="ts-cell"><a class="ts" href="#L330" alt="Wed Feb 01 2023 09:19:44 GMT-0800 (Pacific Standard Time)">17:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">it is not a meaningful thing at our level</td></tr>
  <tr class="msg" id="L331"><td class="ts-cell"><a class="ts" href="#L331" alt="Wed Feb 01 2023 09:19:56 GMT-0800 (Pacific Standard Time)">17:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">we just have a couple cases to decide on</td></tr>
  <tr class="msg" id="L332"><td class="ts-cell"><a class="ts" href="#L332" alt="Wed Feb 01 2023 09:20:16 GMT-0800 (Pacific Standard Time)">17:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">it is certainly meaningful within Bloomberg, and has been implemented with this case-by-case approach</td></tr>
  <tr class="msg" id="L333"><td class="ts-cell"><a class="ts" href="#L333" alt="Wed Feb 01 2023 09:21:05 GMT-0800 (Pacific Standard Time)">17:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">If we're not worried about whether or not it's <em>possible</em> to escape the context, then it's just a question of ergonomics, and that's something which we can discuss - I continue to be of the opinion that requiring <em>every library author in the world</em> to think about AsyncContexts is worse ergonomics than making people who are doing fancy things with <code>.then</code> <em>and also</em> with AsyncContexts think about AsyncContexts.</td></tr>
  <tr class="msg" id="L334"><td class="ts-cell"><a class="ts" href="#L334" alt="Wed Feb 01 2023 09:21:59 GMT-0800 (Pacific Standard Time)">17:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I am a lot more OK with making people who are explicitly using AsyncContexts think about them than making everyone else think about them.</td></tr>
  <tr class="msg" id="L335"><td class="ts-cell"><a class="ts" href="#L335" alt="Wed Feb 01 2023 09:22:34 GMT-0800 (Pacific Standard Time)">17:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I am a lot more OK with making people who are explicitly using AsyncContexts think about them than making everyone else think about them.</blockquote></mx-reply>This just isn't the way they are used; the AsyncContext flows through a whole environment automatically and this is the entire point.</td></tr>
  <tr class="msg" id="L336"><td class="ts-cell"><a class="ts" href="#L336" alt="Wed Feb 01 2023 09:22:58 GMT-0800 (Pacific Standard Time)">17:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> If we can't mandate "all", we can't do the "cannot escape context" thing Justin said is a requirement</blockquote></mx-reply>Our platform only has so many ways for devs to do async tasks, so just having <code>await</code>/<code>Promise</code>/<code>setTimeout</code>/<code>setInterval</code> is sufficient for us to guarantee our platform contexts is preserved</td></tr>
  <tr class="msg" id="L337"><td class="ts-cell"><a class="ts" href="#L337" alt="Wed Feb 01 2023 09:23:12 GMT-0800 (Pacific Standard Time)">17:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">The dev could have their own contexts inside ours, but it'd be impossible for them to escape ours</td></tr>
  <tr class="msg" id="L338"><td class="ts-cell"><a class="ts" href="#L338" alt="Wed Feb 01 2023 09:24:01 GMT-0800 (Pacific Standard Time)">17:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> This just isn't the way they are used; the AsyncContext flows through a whole environment automatically and this is the entire point.</blockquote></mx-reply>Only if we require of hosts that every mechanism of scheduling callbacks flows AsyncContexts, including event listeners and unhandled promise rejection handlers and so on.</td></tr>
  <tr class="msg" id="L339"><td class="ts-cell"><a class="ts" href="#L339" alt="Wed Feb 01 2023 09:24:39 GMT-0800 (Pacific Standard Time)">17:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">it's not something we require, it's something we allow</td></tr>
  <tr class="msg" id="L340"><td class="ts-cell"><a class="ts" href="#L340" alt="Wed Feb 01 2023 09:24:40 GMT-0800 (Pacific Standard Time)">17:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">That's what I keep saying - if it is in fact a requirement that it flows through the whole environment automatically, then the <em>ergonomic</em> differences between Promise.prototype.then and addEventListener just aren't relevant.</td></tr>
  <tr class="msg" id="L341"><td class="ts-cell"><a class="ts" href="#L341" alt="Wed Feb 01 2023 09:25:09 GMT-0800 (Pacific Standard Time)">17:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">maybe we should shift this conversation to the AsyncContext room?</td></tr>
  <tr class="msg" id="L342"><td class="ts-cell"><a class="ts" href="#L342" alt="Wed Feb 01 2023 09:25:15 GMT-0800 (Pacific Standard Time)">17:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">And if it's not a requirement that the context flows automatically, then library authors now have to think about async contexts all the time.</td></tr>
  <tr class="msg" id="L343"><td class="ts-cell"><a class="ts" href="#L343" alt="Wed Feb 01 2023 09:25:16 GMT-0800 (Pacific Standard Time)">17:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">Sure.</td></tr>
  <tr class="msg" id="L344"><td class="ts-cell"><a class="ts" href="#L344" alt="Wed Feb 01 2023 09:25:31 GMT-0800 (Pacific Standard Time)">17:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I also opened <a href="https://github.com/legendecas/proposal-async-context/issues/22">https://github.com/legendecas/proposal-async-context/issues/22</a> for anyone who wants to follow along.</td></tr>
  <tr class="msg" id="L345"><td class="ts-cell"><a class="ts" href="#L345" alt="Wed Feb 01 2023 09:26:59 GMT-0800 (Pacific Standard Time)">17:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> And if it's not a requirement that the context flows automatically, then library authors now have to think about async contexts all the time.</blockquote></mx-reply>Yes. Actually, having just one mechanism here as opposed to several should simplify things for library authors who are already living this reality in environments with a version of this feature.</td></tr>
  <tr class="msg" id="L346"><td class="ts-cell"><a class="ts" href="#L346" alt="Wed Feb 01 2023 09:28:04 GMT-0800 (Pacific Standard Time)">17:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">Let's continue the conversation in the async contexts room?</td></tr>
  <tr class="msg" id="L347"><td class="ts-cell"><a class="ts" href="#L347" alt="Wed Feb 01 2023 09:28:38 GMT-0800 (Pacific Standard Time)">17:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Also, as <code>AsyncDisposableStack</code> is another case of a reified async control-flow mechanism (representing an imperative version of <code>using await</code>), I would also expect that the async context would automatically flow to the registered <code>[Symbol.dispose]()</code> method or <code>adopt</code>/<code>defer</code> callbacks when the stack itself is disposed.</td></tr>
  <tr class="msg" id="L348"><td class="ts-cell"><a class="ts" href="#L348" alt="Wed Feb 01 2023 09:29:49 GMT-0800 (Pacific Standard Time)">17:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">Not when the stack is disposed manually, surely?</td></tr>
  <tr class="msg" id="L349"><td class="ts-cell"><a class="ts" href="#L349" alt="Wed Feb 01 2023 09:43:37 GMT-0800 (Pacific Standard Time)">17:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Why would that not be the case? That would certainly be the case if calling <code>dispose()</code> on the synchronous <code>DisposableStack</code>, would it not?</td></tr>
  <tr class="msg" id="L350"><td class="ts-cell"><a class="ts" href="#L350" alt="Wed Feb 01 2023 09:58:08 GMT-0800 (Pacific Standard Time)">17:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Though it could be that the automatic capture might need to occur at the point the resource is registered. I admit, it is something that will need to be investigated.</td></tr>
  <tr class="msg" id="L351"><td class="ts-cell"><a class="ts" href="#L351" alt="Wed Feb 01 2023 10:02:17 GMT-0800 (Pacific Standard Time)">18:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">My connection may have dropped</td></tr>
  <tr class="msg" id="L352"><td class="ts-cell"><a class="ts" href="#L352" alt="Wed Feb 01 2023 10:03:06 GMT-0800 (Pacific Standard Time)">18:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Sorry, it looks like I just lost my internet connection</td></tr>
  <tr class="msg" id="L353"><td class="ts-cell"><a class="ts" href="#L353" alt="Wed Feb 01 2023 10:03:31 GMT-0800 (Pacific Standard Time)">18:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">rbuckton</span>: would you be able to reconnect?</td></tr>
  <tr class="msg" id="L354"><td class="ts-cell"><a class="ts" href="#L354" alt="Wed Feb 01 2023 10:05:24 GMT-0800 (Pacific Standard Time)">18:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I just restarted the router and am waiting for a connection</td></tr>
  <tr class="msg" id="L355"><td class="ts-cell"><a class="ts" href="#L355" alt="Wed Feb 01 2023 10:05:58 GMT-0800 (Pacific Standard Time)">18:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">It does not look like it will be back up quickly. I can try to connect from my phone if someone else can run the slides</td></tr>
  <tr class="msg" id="L356"><td class="ts-cell"><a class="ts" href="#L356" alt="Wed Feb 01 2023 10:11:20 GMT-0800 (Pacific Standard Time)">18:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><a href="https://tc39.es/proposal-symbol-predicates/">https://tc39.es/proposal-symbol-predicates/</a></td></tr>
  <tr class="msg" id="L357"><td class="ts-cell"><a class="ts" href="#L357" alt="Wed Feb 01 2023 10:17:00 GMT-0800 (Pacific Standard Time)">18:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@msaboff:matrix.org">msaboff</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">Rob Palmer</span>: Is there a plan to come back to the demoting import assertions to stage 2 in this meeting?</td></tr>
  <tr class="msg" id="L358"><td class="ts-cell"><a class="ts" href="#L358" alt="Wed Feb 01 2023 10:19:50 GMT-0800 (Pacific Standard Time)">18:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">msaboff</span>: We want to discuss import assertions tomorrow, but we're still drafting what would be proposed.</td></tr>
  <tr class="msg" id="L359"><td class="ts-cell"><a class="ts" href="#L359" alt="Wed Feb 01 2023 10:20:09 GMT-0800 (Pacific Standard Time)">18:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@haxjs:matrix.org">HE Shi-Jun</span>&gt;</div></td><td class="msg-cell">can't see the screen, is that only me?</td></tr>
  <tr class="msg" id="L360"><td class="ts-cell"><a class="ts" href="#L360" alt="Wed Feb 01 2023 10:21:00 GMT-0800 (Pacific Standard Time)">18:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I am now back online, my apologies for the interruption.</td></tr>
  <tr class="msg" id="L361"><td class="ts-cell"><a class="ts" href="#L361" alt="Wed Feb 01 2023 10:21:10 GMT-0800 (Pacific Standard Time)">18:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">I can see</td></tr>
  <tr class="msg" id="L362"><td class="ts-cell"><a class="ts" href="#L362" alt="Wed Feb 01 2023 10:21:42 GMT-0800 (Pacific Standard Time)">18:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@haxjs:matrix.org">HE Shi-Jun</span>&gt;</div></td><td class="msg-cell">reconnected and now i also see</td></tr>
  <tr class="msg" id="L363"><td class="ts-cell"><a class="ts" href="#L363" alt="Wed Feb 01 2023 10:24:56 GMT-0800 (Pacific Standard Time)">18:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">shu</span>: current semantics is the class declaration is decorated, and potentially replaced, affecting both the local and exported binding.</td></tr>
  <tr class="msg" id="L364"><td class="ts-cell"><a class="ts" href="#L364" alt="Wed Feb 01 2023 10:25:09 GMT-0800 (Pacific Standard Time)">18:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">then what's the footgun?</td></tr>
  <tr class="msg" id="L365"><td class="ts-cell"><a class="ts" href="#L365" alt="Wed Feb 01 2023 10:25:24 GMT-0800 (Pacific Standard Time)">18:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">the footgun as daniel says depends on the local being undecorated but the export being decorated</td></tr>
  <tr class="msg" id="L366"><td class="ts-cell"><a class="ts" href="#L366" alt="Wed Feb 01 2023 10:25:41 GMT-0800 (Pacific Standard Time)">18:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">The biggest reason why we did not change this back in stage two was the potential do decorate <em>both</em> the export <em>and</em> the class separately.</td></tr>
  <tr class="msg" id="L367"><td class="ts-cell"><a class="ts" href="#L367" alt="Wed Feb 01 2023 10:25:59 GMT-0800 (Pacific Standard Time)">18:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">oh okay i think i get it, let me try</td></tr>
  <tr class="msg" id="L368"><td class="ts-cell"><a class="ts" href="#L368" alt="Wed Feb 01 2023 10:26:27 GMT-0800 (Pacific Standard Time)">18:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">the reason we have export-decorator ordering is for the <em>possibility</em> of distinguishing decorated export-only or decorated local-only</td></tr>
  <tr class="msg" id="L369"><td class="ts-cell"><a class="ts" href="#L369" alt="Wed Feb 01 2023 10:26:32 GMT-0800 (Pacific Standard Time)">18:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">do you figure I could write a codemod to move the <code>export</code> keyword before the decorators before this topic finishes while also fixing up the notes</td></tr>
  <tr class="msg" id="L370"><td class="ts-cell"><a class="ts" href="#L370" alt="Wed Feb 01 2023 10:26:34 GMT-0800 (Pacific Standard Time)">18:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">it can't be that hard</td></tr>
  <tr class="msg" id="L371"><td class="ts-cell"><a class="ts" href="#L371" alt="Wed Feb 01 2023 10:26:43 GMT-0800 (Pacific Standard Time)">18:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">and you're saying, not only is there no demand for that distinguishing, it is a footgun to distinguish</td></tr>
  <tr class="msg" id="L372"><td class="ts-cell"><a class="ts" href="#L372" alt="Wed Feb 01 2023 10:26:56 GMT-0800 (Pacific Standard Time)">18:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">The investigation I did into "export decorators" led to the conclusion that it isn't something that could have any kind of meaningful semantics.</td></tr>
  <tr class="msg" id="L373"><td class="ts-cell"><a class="ts" href="#L373" alt="Wed Feb 01 2023 10:27:01 GMT-0800 (Pacific Standard Time)">18:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Yes.</td></tr>
  <tr class="msg" id="L374"><td class="ts-cell"><a class="ts" href="#L374" alt="Wed Feb 01 2023 10:27:41 GMT-0800 (Pacific Standard Time)">18:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">that's not the only reason tho. it's also because of some who believe the decorator "should" come next to the thing it's decorating, instead of an unrelated keyword being injected between them</td></tr>
  <tr class="msg" id="L375"><td class="ts-cell"><a class="ts" href="#L375" alt="Wed Feb 01 2023 10:28:16 GMT-0800 (Pacific Standard Time)">18:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">in GNOME, we had a strong use case for the local binding being the decorated class, not the undecorated one. although we seem to have managed to rewrite things so it doesn't matter. I gave more details in <a href="https://github.com/tc39/proposal-decorators/issues/441">https://github.com/tc39/proposal-decorators/issues/441</a></td></tr>
  <tr class="msg" id="L376"><td class="ts-cell"><a class="ts" href="#L376" alt="Wed Feb 01 2023 10:29:10 GMT-0800 (Pacific Standard Time)">18:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">by the local binding, do you mean the binding within the class?</td></tr>
  <tr class="msg" id="L377"><td class="ts-cell"><a class="ts" href="#L377" alt="Wed Feb 01 2023 10:29:23 GMT-0800 (Pacific Standard Time)">18:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">littledan</span>: no, the unexported binding</td></tr>
  <tr class="msg" id="L378"><td class="ts-cell"><a class="ts" href="#L378" alt="Wed Feb 01 2023 10:29:25 GMT-0800 (Pacific Standard Time)">18:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">within the module</td></tr>
  <tr class="msg" id="L379"><td class="ts-cell"><a class="ts" href="#L379" alt="Wed Feb 01 2023 10:29:43 GMT-0800 (Pacific Standard Time)">18:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-10">littledan</span>: no, the unexported binding</blockquote></mx-reply>yeah I guess that part is clear</td></tr>
  <tr class="msg" id="L380"><td class="ts-cell"><a class="ts" href="#L380" alt="Wed Feb 01 2023 10:29:55 GMT-0800 (Pacific Standard Time)">18:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I assumed the binding would be decorated either way, and "export decorators" would be decorators that applied specifically <em>to exports</em> in some way</td></tr>
  <tr class="msg" id="L381"><td class="ts-cell"><a class="ts" href="#L381" alt="Wed Feb 01 2023 10:30:11 GMT-0800 (Pacific Standard Time)">18:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@gibson042:matrix.org">Richard Gibson</span>&gt;</div></td><td class="msg-cell">yes, that</td></tr>
  <tr class="msg" id="L382"><td class="ts-cell"><a class="ts" href="#L382" alt="Wed Feb 01 2023 10:30:11 GMT-0800 (Pacific Standard Time)">18:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">okay i just don't have an intuition here</td></tr>
  <tr class="msg" id="L383"><td class="ts-cell"><a class="ts" href="#L383" alt="Wed Feb 01 2023 10:30:22 GMT-0800 (Pacific Standard Time)">18:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: ah okay</td></tr>
  <tr class="msg" id="L384"><td class="ts-cell"><a class="ts" href="#L384" alt="Wed Feb 01 2023 10:31:07 GMT-0800 (Pacific Standard Time)">18:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">oh, I meant the binding within the class. disregard my comment then</td></tr>
  <tr class="msg" id="L385"><td class="ts-cell"><a class="ts" href="#L385" alt="Wed Feb 01 2023 10:31:09 GMT-0800 (Pacific Standard Time)">18:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">We definitely had at least 8 months of plenary discussion about decorator/export ordering</td></tr>
  <tr class="msg" id="L386"><td class="ts-cell"><a class="ts" href="#L386" alt="Wed Feb 01 2023 10:31:21 GMT-0800 (Pacific Standard Time)">18:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">in addition to the breakout groups that Jordan mentions</td></tr>
  <tr class="msg" id="L387"><td class="ts-cell"><a class="ts" href="#L387" alt="Wed Feb 01 2023 10:31:33 GMT-0800 (Pacific Standard Time)">18:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">and in addition to extensive discussion in the regular decorator calls</td></tr>
  <tr class="msg" id="L388"><td class="ts-cell"><a class="ts" href="#L388" alt="Wed Feb 01 2023 10:31:37 GMT-0800 (Pacific Standard Time)">18:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i remember the breakout yes</td></tr>
  <tr class="msg" id="L389"><td class="ts-cell"><a class="ts" href="#L389" alt="Wed Feb 01 2023 10:32:13 GMT-0800 (Pacific Standard Time)">18:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">That doesn't mean it's bad to bring up!</td></tr>
  <tr class="msg" id="L390"><td class="ts-cell"><a class="ts" href="#L390" alt="Wed Feb 01 2023 10:32:14 GMT-0800 (Pacific Standard Time)">18:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I assumed the binding would be decorated either way, and "export decorators" would be decorators that applied specifically <em>to exports</em> in some way</blockquote></mx-reply>(e.g. as jrl says on the queue, make the binding writable from the outside which would be kind of neat I guess)</td></tr>
  <tr class="msg" id="L391"><td class="ts-cell"><a class="ts" href="#L391" alt="Wed Feb 01 2023 10:33:08 GMT-0800 (Pacific Standard Time)">18:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">man I don't care that much about this question but the idea that <code>export</code> is the same kind of thing as <code>async</code> is <em>wild</em> to me</td></tr>
  <tr class="msg" id="L392"><td class="ts-cell"><a class="ts" href="#L392" alt="Wed Feb 01 2023 10:33:15 GMT-0800 (Pacific Standard Time)">18:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell">what happens to export default? </td></tr>
  <tr class="msg" id="L393"><td class="ts-cell"><a class="ts" href="#L393" alt="Wed Feb 01 2023 10:33:29 GMT-0800 (Pacific Standard Time)">18:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">rbuckton</span>: ^^</td></tr>
  <tr class="msg" id="L394"><td class="ts-cell"><a class="ts" href="#L394" alt="Wed Feb 01 2023 10:33:50 GMT-0800 (Pacific Standard Time)">18:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><code>@dec export default class {}</code></td></tr>
  <tr class="msg" id="L395"><td class="ts-cell"><a class="ts" href="#L395" alt="Wed Feb 01 2023 10:33:51 GMT-0800 (Pacific Standard Time)">18:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Justin Ridgewell</span>: it's a strawperson (meaning in the hypothetical sense) footgun</td></tr>
  <tr class="msg" id="L396"><td class="ts-cell"><a class="ts" href="#L396" alt="Wed Feb 01 2023 10:34:11 GMT-0800 (Pacific Standard Time)">18:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">like, nothing has this footgun today, but if we started distinguishing semantics depending on where the decorator appears, then it becomes a footgun</td></tr>
  <tr class="msg" id="L397"><td class="ts-cell"><a class="ts" href="#L397" alt="Wed Feb 01 2023 10:35:39 GMT-0800 (Pacific Standard Time)">18:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">does anyone know offhand of a library which is using <code>@dec export class {}</code> style decorators so I can develop my codemod against it</td></tr>
  <tr class="msg" id="L398"><td class="ts-cell"><a class="ts" href="#L398" alt="Wed Feb 01 2023 10:36:08 GMT-0800 (Pacific Standard Time)">18:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: it's a good question, i added a q item</td></tr>
  <tr class="msg" id="L399"><td class="ts-cell"><a class="ts" href="#L399" alt="Wed Feb 01 2023 10:36:15 GMT-0800 (Pacific Standard Time)">18:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell">is anyone actually advocating for the distinct semantics? Or is this just about syntax placement?</td></tr>
  <tr class="msg" id="L400"><td class="ts-cell"><a class="ts" href="#L400" alt="Wed Feb 01 2023 10:38:11 GMT-0800 (Pacific Standard Time)">18:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><code>nest</code>, apparently</td></tr>
  <tr class="msg" id="L401"><td class="ts-cell"><a class="ts" href="#L401" alt="Wed Feb 01 2023 10:38:16 GMT-0800 (Pacific Standard Time)">18:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/nestjs/nest">https://github.com/nestjs/nest</a></td></tr>
  <tr class="msg" id="L402"><td class="ts-cell"><a class="ts" href="#L402" alt="Wed Feb 01 2023 10:38:17 GMT-0800 (Pacific Standard Time)">18:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> is anyone actually advocating for the distinct semantics? Or is this just about syntax placement?</blockquote></mx-reply>We are stating that the one major reason that changing the syntax was blocked some time back was to allow for the potential of "export decorators", which we do not believe to be a viable option. If that is no longer a blocking concern, then we want to discuss changing the ordering.</td></tr>
  <tr class="msg" id="L403"><td class="ts-cell"><a class="ts" href="#L403" alt="Wed Feb 01 2023 10:38:41 GMT-0800 (Pacific Standard Time)">18:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Fwiw, Babel's most used decorators versions is the "legacy" one, which has decorators before <code>export</code>. The new versions have a <code>decoratorsBeforeExport</code> option to choose, and according to GitHub search it's set to <code>true</code> and <code>false</code> more or less the same number of times</td></tr>
  <tr class="msg" id="L404"><td class="ts-cell"><a class="ts" href="#L404" alt="Wed Feb 01 2023 10:38:51 GMT-0800 (Pacific Standard Time)">18:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/nestjs/nest/blob/master/sample/33-graphql-mercurius/src/app.module.ts">https://github.com/nestjs/nest/blob/master/sample/33-graphql-mercurius/src/app.module.ts</a></td></tr>
  <tr class="msg" id="L405"><td class="ts-cell"><a class="ts" href="#L405" alt="Wed Feb 01 2023 10:39:01 GMT-0800 (Pacific Standard Time)">18:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell">Thanks for the clarification, <span class="nick-15">rbuckton</span>. So this seems like only about syntax ergonomics</td></tr>
  <tr class="msg" id="L406"><td class="ts-cell"><a class="ts" href="#L406" alt="Wed Feb 01 2023 10:39:24 GMT-0800 (Pacific Standard Time)">18:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/search?q=decoratorsBeforeExport%3A+true&amp;type=code">https://github.com/search?q=decoratorsBeforeExport%3A+true&amp;type=code</a> and <a href="https://github.com/search?q=decoratorsBeforeExport%3A+false&amp;type=code">https://github.com/search?q=decoratorsBeforeExport%3A+false&amp;type=code</a></td></tr>
  <tr class="msg" id="L407"><td class="ts-cell"><a class="ts" href="#L407" alt="Wed Feb 01 2023 10:39:33 GMT-0800 (Pacific Standard Time)">18:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">wait what</td></tr>
  <tr class="msg" id="L408"><td class="ts-cell"><a class="ts" href="#L408" alt="Wed Feb 01 2023 10:39:44 GMT-0800 (Pacific Standard Time)">18:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">that it's set the same number of times is a pretty strong counterargument to "nobody's demanded a different ordering in 8 years" imo</td></tr>
  <tr class="msg" id="L409"><td class="ts-cell"><a class="ts" href="#L409" alt="Wed Feb 01 2023 10:39:57 GMT-0800 (Pacific Standard Time)">18:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i... would've figured we definitely don't have appetite to add keywords for such scoped semantics like "writable namespace exports"?</td></tr>
  <tr class="msg" id="L410"><td class="ts-cell"><a class="ts" href="#L410" alt="Wed Feb 01 2023 10:40:57 GMT-0800 (Pacific Standard Time)">18:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">"we want syntax for more static analyzability" is pretty true of a lot of things that don't meet the syntax bar, no?</td></tr>
  <tr class="msg" id="L411"><td class="ts-cell"><a class="ts" href="#L411" alt="Wed Feb 01 2023 10:41:08 GMT-0800 (Pacific Standard Time)">18:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><p>Well, but most people are using the legacy version that <em>only</em> supports decorators before exports.</p>
<p>I'm saying this based on how much issues/discussions we get about decorators, but also searching for <code>babel legacy: true</code> on GitHub gives a lot of results -- <a href="https://github.com/search?q=babel+legacy%3A+true&amp;type=code">https://github.com/search?q=babel+legacy%3A+true&amp;type=code</a></p>
</td></tr>
  <tr class="msg" id="L412"><td class="ts-cell"><a class="ts" href="#L412" alt="Wed Feb 01 2023 10:41:32 GMT-0800 (Pacific Standard Time)">18:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">all decorators</td></tr>
  <tr class="msg" id="L413"><td class="ts-cell"><a class="ts" href="#L413" alt="Wed Feb 01 2023 10:41:34 GMT-0800 (Pacific Standard Time)">18:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">regarding Symbol predicates: i'd love some committee feedback on <a href="https://github.com/tc39/proposal-symbol-predicates/issues/9">https://github.com/tc39/proposal-symbol-predicates/issues/9</a>. Namely, to me, a predicate never throws and only returns a boolean - and in this case, eg "isRegisteredSymbol" is asking "is this a symbol and also a registered one". michael seems to read it as asking "is this symbol a registered symbol", implying it should throw on non-symbols.

does anyone have thoughts on this? Please add them to the issue!</td></tr>
  <tr class="msg" id="L414"><td class="ts-cell"><a class="ts" href="#L414" alt="Wed Feb 01 2023 10:41:35 GMT-0800 (Pacific Standard Time)">18:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">all decorators meet that bar</td></tr>
  <tr class="msg" id="L415"><td class="ts-cell"><a class="ts" href="#L415" alt="Wed Feb 01 2023 10:41:51 GMT-0800 (Pacific Standard Time)">18:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">oh sure. most people don't have the choice tho</td></tr>
  <tr class="msg" id="L416"><td class="ts-cell"><a class="ts" href="#L416" alt="Wed Feb 01 2023 10:42:02 GMT-0800 (Pacific Standard Time)">18:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">it's telling that when <em>given</em> the choice, it's about an even split</td></tr>
  <tr class="msg" id="L417"><td class="ts-cell"><a class="ts" href="#L417" alt="Wed Feb 01 2023 10:46:13 GMT-0800 (Pacific Standard Time)">18:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">side question: in matrix, now that there are threads, how do i find threads i have unread messages in?</td></tr>
  <tr class="msg" id="L418"><td class="ts-cell"><a class="ts" href="#L418" alt="Wed Feb 01 2023 10:46:28 GMT-0800 (Pacific Standard Time)">18:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">my answer so far is, scroll</td></tr>
  <tr class="msg" id="L419"><td class="ts-cell"><a class="ts" href="#L419" alt="Wed Feb 01 2023 10:46:31 GMT-0800 (Pacific Standard Time)">18:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">I was trying to do this same thing!</td></tr>
  <tr class="msg" id="L420"><td class="ts-cell"><a class="ts" href="#L420" alt="Wed Feb 01 2023 10:46:32 GMT-0800 (Pacific Standard Time)">18:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">which is not... ideal</td></tr>
  <tr class="msg" id="L421"><td class="ts-cell"><a class="ts" href="#L421" alt="Wed Feb 01 2023 10:46:46 GMT-0800 (Pacific Standard Time)">18:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">well guess some messages are staying unread</td></tr>
  <tr class="msg" id="L422"><td class="ts-cell"><a class="ts" href="#L422" alt="Wed Feb 01 2023 10:47:05 GMT-0800 (Pacific Standard Time)">18:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">oh I think I just figured it out</td></tr>
  <tr class="msg" id="L423"><td class="ts-cell"><a class="ts" href="#L423" alt="Wed Feb 01 2023 10:47:41 GMT-0800 (Pacific Standard Time)">18:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">close any open thread if you have one open, then click this button:</td></tr>
  <tr class="msg" id="L424"><td class="ts-cell"><a class="ts" href="#L424" alt="Wed Feb 01 2023 10:47:41 GMT-0800 (Pacific Standard Time)">18:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Click the thread icon in the top right of the app</td></tr>
  <tr class="msg" id="L425"><td class="ts-cell"><a class="ts" href="#L425" alt="Wed Feb 01 2023 10:47:48 GMT-0800 (Pacific Standard Time)">18:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">in the top right</td></tr>
  <tr class="msg" id="L426"><td class="ts-cell"><a class="ts" href="#L426" alt="Wed Feb 01 2023 10:48:03 GMT-0800 (Pacific Standard Time)">18:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">ooo</td></tr>
  <tr class="msg" id="L427"><td class="ts-cell"><a class="ts" href="#L427" alt="Wed Feb 01 2023 10:48:08 GMT-0800 (Pacific Standard Time)">18:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i can click on <code>&lt; Threads</code></td></tr>
  <tr class="msg" id="L428"><td class="ts-cell"><a class="ts" href="#L428" alt="Wed Feb 01 2023 10:48:21 GMT-0800 (Pacific Standard Time)">18:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@gibson042:matrix.org">Richard Gibson</span>&gt;</div></td><td class="msg-cell">and when you still can't find it, right click on the room and Mark as read</td></tr>
  <tr class="msg" id="L429"><td class="ts-cell"><a class="ts" href="#L429" alt="Wed Feb 01 2023 10:49:34 GMT-0800 (Pacific Standard Time)">18:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">there's also a "back" left chevron in the upper left corner of a thread window that takes you there</td></tr>
  <tr class="msg" id="L430"><td class="ts-cell"><a class="ts" href="#L430" alt="Wed Feb 01 2023 10:49:35 GMT-0800 (Pacific Standard Time)">18:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">oh, also this is helpful:</td></tr>
  <tr class="msg" id="L431"><td class="ts-cell"><a class="ts" href="#L431" alt="Wed Feb 01 2023 10:50:08 GMT-0800 (Pacific Standard Time)">18:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">the default seems to list every thread, which I can't imagine wanting</td></tr>
  <tr class="msg" id="L432"><td class="ts-cell"><a class="ts" href="#L432" alt="Wed Feb 01 2023 10:51:28 GMT-0800 (Pacific Standard Time)">18:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I see this in Element: </td></tr>
  <tr class="msg" id="L433"><td class="ts-cell"><a class="ts" href="#L433" alt="Wed Feb 01 2023 10:51:30 GMT-0800 (Pacific Standard Time)">18:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">ugh, it doesn't remember that preference though</td></tr>
  <tr class="msg" id="L434"><td class="ts-cell"><a class="ts" href="#L434" alt="Wed Feb 01 2023 10:51:38 GMT-0800 (Pacific Standard Time)">18:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell">Option 2 kills the idea of distinct semantics. Syntax positioning can eventually be set as a linter preference for consistency within user code.</td></tr>
  <tr class="msg" id="L435"><td class="ts-cell"><a class="ts" href="#L435" alt="Wed Feb 01 2023 10:51:55 GMT-0800 (Pacific Standard Time)">18:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell">I really like option 2 for this reason.</td></tr>
  <tr class="msg" id="L436"><td class="ts-cell"><a class="ts" href="#L436" alt="Wed Feb 01 2023 10:52:05 GMT-0800 (Pacific Standard Time)">18:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">not to me in this context, where "fixed" is much more likely to mean "unchanging" than "no longer broken"</td></tr>
  <tr class="msg" id="L437"><td class="ts-cell"><a class="ts" href="#L437" alt="Wed Feb 01 2023 10:52:26 GMT-0800 (Pacific Standard Time)">18:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">option 2, however, ensures burden on linters/formatters, and creates style debates, forever</td></tr>
  <tr class="msg" id="L438"><td class="ts-cell"><a class="ts" href="#L438" alt="Wed Feb 01 2023 10:52:58 GMT-0800 (Pacific Standard Time)">18:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">but... it's the same word</td></tr>
  <tr class="msg" id="L439"><td class="ts-cell"><a class="ts" href="#L439" alt="Wed Feb 01 2023 10:53:50 GMT-0800 (Pacific Standard Time)">18:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">the tense makes the difference to me</td></tr>
  <tr class="msg" id="L440"><td class="ts-cell"><a class="ts" href="#L440" alt="Wed Feb 01 2023 10:54:09 GMT-0800 (Pacific Standard Time)">18:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">ok here is a codemod to go from TS-style to ES-style placement <a href="https://github.com/bakkot/export-decorated-class-codemod">https://github.com/bakkot/export-decorated-class-codemod</a></td></tr>
  <tr class="msg" id="L441"><td class="ts-cell"><a class="ts" href="#L441" alt="Wed Feb 01 2023 10:54:13 GMT-0800 (Pacific Standard Time)">18:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">especially in programming, where (it seems to me that) "fix" is relatively rare but "fixed" is relatively common</td></tr>
  <tr class="msg" id="L442"><td class="ts-cell"><a class="ts" href="#L442" alt="Wed Feb 01 2023 10:54:17 GMT-0800 (Pacific Standard Time)">18:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">thank you to whoever has been fixing the notes while I looked away to write this</td></tr>
  <tr class="msg" id="L443"><td class="ts-cell"><a class="ts" href="#L443" alt="Wed Feb 01 2023 10:54:40 GMT-0800 (Pacific Standard Time)">18:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: you were supposed to do both at the same time!</td></tr>
  <tr class="msg" id="L444"><td class="ts-cell"><a class="ts" href="#L444" alt="Wed Feb 01 2023 10:54:49 GMT-0800 (Pacific Standard Time)">18:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I was doing some amount of it</td></tr>
  <tr class="msg" id="L445"><td class="ts-cell"><a class="ts" href="#L445" alt="Wed Feb 01 2023 10:54:52 GMT-0800 (Pacific Standard Time)">18:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">but then kind of forgot</td></tr>
  <tr class="msg" id="L446"><td class="ts-cell"><a class="ts" href="#L446" alt="Wed Feb 01 2023 10:55:38 GMT-0800 (Pacific Standard Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">there's also <a href="https://hackage.haskell.org/package/base-4.17.0.0/docs/Data-Function.html#v:fix">https://hackage.haskell.org/package/base-4.17.0.0/docs/Data-Function.html#v:fix</a></td></tr>
  <tr class="msg" id="L447"><td class="ts-cell"><a class="ts" href="#L447" alt="Wed Feb 01 2023 10:56:55 GMT-0800 (Pacific Standard Time)">18:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><code>export default class C {}</code> is a default export and a <code>C</code> class declaration.</td></tr>
  <tr class="msg" id="L448"><td class="ts-cell"><a class="ts" href="#L448" alt="Wed Feb 01 2023 10:57:09 GMT-0800 (Pacific Standard Time)">18:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><code>export default (class C {})</code> is a default export for an expression</td></tr>
  <tr class="msg" id="L449"><td class="ts-cell"><a class="ts" href="#L449" alt="Wed Feb 01 2023 10:57:11 GMT-0800 (Pacific Standard Time)">18:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i think <code>transferAndFixLength</code> makes it sound like it does a transfer, then does an operation to turn a resizable buffer into a fixed length one</td></tr>
  <tr class="msg" id="L450"><td class="ts-cell"><a class="ts" href="#L450" alt="Wed Feb 01 2023 10:57:27 GMT-0800 (Pacific Standard Time)">18:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">I'm off for the evening, if anyone has any concerns or wants to get a Mozilla opinion, we have <span class="nick-4">iain</span> taking over for the last hour! (acronym is IID)</td></tr>
  <tr class="msg" id="L451"><td class="ts-cell"><a class="ts" href="#L451" alt="Wed Feb 01 2023 10:57:31 GMT-0800 (Pacific Standard Time)">18:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">but that "fixing the length" operation isn't something that exists</td></tr>
  <tr class="msg" id="L452"><td class="ts-cell"><a class="ts" href="#L452" alt="Wed Feb 01 2023 10:57:38 GMT-0800 (Pacific Standard Time)">18:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell"><p>option 1 is really nice to avoid confusion from <code>export</code> vs <code>export default</code>. The @decorator will always be placed without confusion.</p>
<p><span class="nick-6">ljharb</span> the style discussion burden option 2 seems not enough for me to object. It's already in the nature of the language</p>
</td></tr>
  <tr class="msg" id="L453"><td class="ts-cell"><a class="ts" href="#L453" alt="Wed Feb 01 2023 10:57:45 GMT-0800 (Pacific Standard Time)">18:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">also it may be ambiguous between what length you're fixing</td></tr>
  <tr class="msg" id="L454"><td class="ts-cell"><a class="ts" href="#L454" alt="Wed Feb 01 2023 10:57:48 GMT-0800 (Pacific Standard Time)">18:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">the receiver or the return value</td></tr>
  <tr class="msg" id="L455"><td class="ts-cell"><a class="ts" href="#L455" alt="Wed Feb 01 2023 10:58:27 GMT-0800 (Pacific Standard Time)">18:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">rbuckton</span>: what about <code>export default class {}</code>?</td></tr>
  <tr class="msg" id="L456"><td class="ts-cell"><a class="ts" href="#L456" alt="Wed Feb 01 2023 10:58:33 GMT-0800 (Pacific Standard Time)">18:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@haxjs:matrix.org">HE Shi-Jun</span>&gt;</div></td><td class="msg-cell">prefer option 1</td></tr>
  <tr class="msg" id="L457"><td class="ts-cell"><a class="ts" href="#L457" alt="Wed Feb 01 2023 10:58:39 GMT-0800 (Pacific Standard Time)">18:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-15">rbuckton</span>: what about <code>export default class {}</code>?</blockquote></mx-reply>declaration</td></tr>
  <tr class="msg" id="L458"><td class="ts-cell"><a class="ts" href="#L458" alt="Wed Feb 01 2023 10:58:45 GMT-0800 (Pacific Standard Time)">18:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">with what binding name, "default"?</td></tr>
  <tr class="msg" id="L459"><td class="ts-cell"><a class="ts" href="#L459" alt="Wed Feb 01 2023 10:58:46 GMT-0800 (Pacific Standard Time)">18:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">With option 1 (decorators only before export), would <code>export default @dec class A {}</code> be a valid export of a class expression?</td></tr>
  <tr class="msg" id="L460"><td class="ts-cell"><a class="ts" href="#L460" alt="Wed Feb 01 2023 10:59:04 GMT-0800 (Pacific Standard Time)">18:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">and what about <code>export default @noopDecorator class {}</code>?</td></tr>
  <tr class="msg" id="L461"><td class="ts-cell"><a class="ts" href="#L461" alt="Wed Feb 01 2023 10:59:12 GMT-0800 (Pacific Standard Time)">18:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> With option 1 (decorators only before export), would <code>export default @dec class A {}</code> be a valid export of a class expression?</blockquote></mx-reply>oh god</td></tr>
  <tr class="msg" id="L462"><td class="ts-cell"><a class="ts" href="#L462" alt="Wed Feb 01 2023 10:59:18 GMT-0800 (Pacific Standard Time)">18:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">It creates an export binding named <code>default</code>, as evidenced by <code>import { default as Foo } from "module"</code></td></tr>
  <tr class="msg" id="L463"><td class="ts-cell"><a class="ts" href="#L463" alt="Wed Feb 01 2023 10:59:27 GMT-0800 (Pacific Standard Time)">18:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> With option 1 (decorators only before export), would <code>export default @dec class A {}</code> be a valid export of a class expression?</blockquote></mx-reply>I guess we would need a lookahead restriction to disallow it</td></tr>
  <tr class="msg" id="L464"><td class="ts-cell"><a class="ts" href="#L464" alt="Wed Feb 01 2023 10:59:38 GMT-0800 (Pacific Standard Time)">18:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">We would disallow that and require parens. or at least, that would be my preference</td></tr>
  <tr class="msg" id="L465"><td class="ts-cell"><a class="ts" href="#L465" alt="Wed Feb 01 2023 10:59:57 GMT-0800 (Pacific Standard Time)">18:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Someone is typing very loudly</td></tr>
  <tr class="msg" id="L466"><td class="ts-cell"><a class="ts" href="#L466" alt="Wed Feb 01 2023 11:00:06 GMT-0800 (Pacific Standard Time)">19:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">sorry, that was me</td></tr>
  <tr class="msg" id="L467"><td class="ts-cell"><a class="ts" href="#L467" alt="Wed Feb 01 2023 11:00:12 GMT-0800 (Pacific Standard Time)">19:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> and what about <code>export default @noopDecorator class {}</code>?</blockquote></mx-reply>This is very much a declaration. This is clear in the decorator spec.</td></tr>
  <tr class="msg" id="L468"><td class="ts-cell"><a class="ts" href="#L468" alt="Wed Feb 01 2023 11:00:15 GMT-0800 (Pacific Standard Time)">19:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I guess we already lookahead prevent <code>class</code> and <code>function</code> in that position, so adding decorators there is presumably easy</td></tr>
  <tr class="msg" id="L469"><td class="ts-cell"><a class="ts" href="#L469" alt="Wed Feb 01 2023 11:00:43 GMT-0800 (Pacific Standard Time)">19:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> This is very much a declaration. This is clear in the decorator spec.</blockquote></mx-reply>and it makes a local binding <code>default</code>?</td></tr>
  <tr class="msg" id="L470"><td class="ts-cell"><a class="ts" href="#L470" alt="Wed Feb 01 2023 11:00:55 GMT-0800 (Pacific Standard Time)">19:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">no you don't get a local binding from anonymous classes</td></tr>
  <tr class="msg" id="L471"><td class="ts-cell"><a class="ts" href="#L471" alt="Wed Feb 01 2023 11:01:15 GMT-0800 (Pacific Standard Time)">19:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">with or without decorators, <code>export class {}</code> has no user-observable local binding</td></tr>
  <tr class="msg" id="L472"><td class="ts-cell"><a class="ts" href="#L472" alt="Wed Feb 01 2023 11:01:41 GMT-0800 (Pacific Standard Time)">19:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">ryzokuken</span>: can we do a heat check for both options?</td></tr>
  <tr class="msg" id="L473"><td class="ts-cell"><a class="ts" href="#L473" alt="Wed Feb 01 2023 11:02:43 GMT-0800 (Pacific Standard Time)">19:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">interesting</td></tr>
  <tr class="msg" id="L474"><td class="ts-cell"><a class="ts" href="#L474" alt="Wed Feb 01 2023 11:02:44 GMT-0800 (Pacific Standard Time)">19:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> with or without decorators, <code>export class {}</code> has no user-observable local binding</blockquote></mx-reply><code>export class {}</code> without either <code>default</code> or a name is illegal</td></tr>
  <tr class="msg" id="L475"><td class="ts-cell"><a class="ts" href="#L475" alt="Wed Feb 01 2023 11:02:59 GMT-0800 (Pacific Standard Time)">19:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">the thing I didn't like about the name we went with is that it feels like it drops off without mentioning a noun</td></tr>
  <tr class="msg" id="L476"><td class="ts-cell"><a class="ts" href="#L476" alt="Wed Feb 01 2023 11:03:05 GMT-0800 (Pacific Standard Time)">19:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">We will need very clear wording for a temp check.</td></tr>
  <tr class="msg" id="L477"><td class="ts-cell"><a class="ts" href="#L477" alt="Wed Feb 01 2023 11:03:06 GMT-0800 (Pacific Standard Time)">19:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">sorry, <code>export default class {}</code>, of course</td></tr>
  <tr class="msg" id="L478"><td class="ts-cell"><a class="ts" href="#L478" alt="Wed Feb 01 2023 11:03:17 GMT-0800 (Pacific Standard Time)">19:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">"transferTo" needs to be followed by a thing</td></tr>
  <tr class="msg" id="L479"><td class="ts-cell"><a class="ts" href="#L479" alt="Wed Feb 01 2023 11:03:21 GMT-0800 (Pacific Standard Time)">19:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">but it's missing a thing</td></tr>
  <tr class="msg" id="L480"><td class="ts-cell"><a class="ts" href="#L480" alt="Wed Feb 01 2023 11:03:33 GMT-0800 (Pacific Standard Time)">19:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-3">ryzokuken</span>: can we do a heat check for both options?</blockquote></mx-reply>We have 3 options</td></tr>
  <tr class="msg" id="L481"><td class="ts-cell"><a class="ts" href="#L481" alt="Wed Feb 01 2023 11:03:56 GMT-0800 (Pacific Standard Time)">19:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">hey now, my codemod is correct</td></tr>
  <tr class="msg" id="L482"><td class="ts-cell"><a class="ts" href="#L482" alt="Wed Feb 01 2023 11:03:57 GMT-0800 (Pacific Standard Time)">19:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">we'd need a well-defined problem statement for a temp check</td></tr>
  <tr class="msg" id="L483"><td class="ts-cell"><a class="ts" href="#L483" alt="Wed Feb 01 2023 11:03:58 GMT-0800 (Pacific Standard Time)">19:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">it keeps trivia</td></tr>
  <tr class="msg" id="L484"><td class="ts-cell"><a class="ts" href="#L484" alt="Wed Feb 01 2023 11:04:06 GMT-0800 (Pacific Standard Time)">19:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> We will need very clear wording for a temp check.</blockquote></mx-reply>I'd like to hear how people support or object to Option 1 and Option 2. The XOR might be discussed after?</td></tr>
  <tr class="msg" id="L485"><td class="ts-cell"><a class="ts" href="#L485" alt="Wed Feb 01 2023 11:04:13 GMT-0800 (Pacific Standard Time)">19:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">it keeps every single character that was in the source</td></tr>
  <tr class="msg" id="L486"><td class="ts-cell"><a class="ts" href="#L486" alt="Wed Feb 01 2023 11:04:15 GMT-0800 (Pacific Standard Time)">19:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">just moves them around</td></tr>
  <tr class="msg" id="L487"><td class="ts-cell"><a class="ts" href="#L487" alt="Wed Feb 01 2023 11:04:34 GMT-0800 (Pacific Standard Time)">19:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">writing correct codemods is not that hard</td></tr>
  <tr class="msg" id="L488"><td class="ts-cell"><a class="ts" href="#L488" alt="Wed Feb 01 2023 11:05:05 GMT-0800 (Pacific Standard Time)">19:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">Please phrase the question as a temp-check compatible question.  

<a href="https://github.com/tc39/how-we-work/blob/main/presenting.md#temperature-checks">https://github.com/tc39/how-we-work/blob/main/presenting.md#temperature-checks</a></td></tr>
  <tr class="msg" id="L489"><td class="ts-cell"><a class="ts" href="#L489" alt="Wed Feb 01 2023 11:05:33 GMT-0800 (Pacific Standard Time)">19:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">Do you want multiple temp checks?</td></tr>
  <tr class="msg" id="L490"><td class="ts-cell"><a class="ts" href="#L490" alt="Wed Feb 01 2023 11:05:48 GMT-0800 (Pacific Standard Time)">19:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell">multiple, for each option proposed</td></tr>
  <tr class="msg" id="L491"><td class="ts-cell"><a class="ts" href="#L491" alt="Wed Feb 01 2023 11:06:10 GMT-0800 (Pacific Standard Time)">19:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">presumably TS could retain the ability to parse decorator-before-export, and give a specific helpful message in that case too telling them how to fix it?</td></tr>
  <tr class="msg" id="L492"><td class="ts-cell"><a class="ts" href="#L492" alt="Wed Feb 01 2023 11:06:13 GMT-0800 (Pacific Standard Time)">19:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell">The goal is to help me identify what concerns are counted as strong objections</td></tr>
  <tr class="msg" id="L493"><td class="ts-cell"><a class="ts" href="#L493" alt="Wed Feb 01 2023 11:06:43 GMT-0800 (Pacific Standard Time)">19:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">Mark has already said he is strongly opposed to Option 1</td></tr>
  <tr class="msg" id="L494"><td class="ts-cell"><a class="ts" href="#L494" alt="Wed Feb 01 2023 11:07:32 GMT-0800 (Pacific Standard Time)">19:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">hm, i just got booted from the meeting, is that just me? (probably just me)</td></tr>
  <tr class="msg" id="L495"><td class="ts-cell"><a class="ts" href="#L495" alt="Wed Feb 01 2023 11:07:51 GMT-0800 (Pacific Standard Time)">19:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">could you try reconnecting?</td></tr>
  <tr class="msg" id="L496"><td class="ts-cell"><a class="ts" href="#L496" alt="Wed Feb 01 2023 11:08:01 GMT-0800 (Pacific Standard Time)">19:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">nah it was just my local internet. comcast fun times.</td></tr>
  <tr class="msg" id="L497"><td class="ts-cell"><a class="ts" href="#L497" alt="Wed Feb 01 2023 11:08:03 GMT-0800 (Pacific Standard Time)">19:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell">and Mark seems to be ok with Option 2.

Perhaps the heat check might just aim to this option</td></tr>
  <tr class="msg" id="L498"><td class="ts-cell"><a class="ts" href="#L498" alt="Wed Feb 01 2023 11:09:04 GMT-0800 (Pacific Standard Time)">19:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">Rob Palmer</span> <span class="nick-3">ryzokuken</span> if the TS team is fine, can we just do a temp check for support/objection to Option 2?</td></tr>
  <tr class="msg" id="L499"><td class="ts-cell"><a class="ts" href="#L499" alt="Wed Feb 01 2023 11:09:12 GMT-0800 (Pacific Standard Time)">19:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I also apologize for the keyboard noise. I thought Jitsi had NVidia Broadcast set for my input audio, which normally filters that out, but it was not.</td></tr>
  <tr class="msg" id="L500"><td class="ts-cell"><a class="ts" href="#L500" alt="Wed Feb 01 2023 11:09:20 GMT-0800 (Pacific Standard Time)">19:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">we don't have time for it now</td></tr>
  <tr class="msg" id="L501"><td class="ts-cell"><a class="ts" href="#L501" alt="Wed Feb 01 2023 11:09:44 GMT-0800 (Pacific Standard Time)">19:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell">this would be a very valuable information from this discussion</td></tr>
  <tr class="msg" id="L502"><td class="ts-cell"><a class="ts" href="#L502" alt="Wed Feb 01 2023 11:10:12 GMT-0800 (Pacific Standard Time)">19:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell">leaving a workable path to move it forward</td></tr>
  <tr class="msg" id="L503"><td class="ts-cell"><a class="ts" href="#L503" alt="Wed Feb 01 2023 11:10:25 GMT-0800 (Pacific Standard Time)">19:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><span class="nick-5">leobalter</span>: You still haven't formed a clear question for the temperature check</td></tr>
  <tr class="msg" id="L504"><td class="ts-cell"><a class="ts" href="#L504" alt="Wed Feb 01 2023 11:10:31 GMT-0800 (Pacific Standard Time)">19:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell">I did</td></tr>
  <tr class="msg" id="L505"><td class="ts-cell"><a class="ts" href="#L505" alt="Wed Feb 01 2023 11:12:13 GMT-0800 (Pacific Standard Time)">19:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">We'll do the temp check tomorrow.  I encourage the champions (and everyone) to read the guidance on how to request and frame temp checks.  We have repeatedly had problems when people request them on-the-fly.  It is much better to pre-plan them.

<a href="https://github.com/tc39/how-we-work/blob/main/presenting.md#temperature-checks">https://github.com/tc39/how-we-work/blob/main/presenting.md#temperature-checks</a></td></tr>
  <tr class="msg" id="L506"><td class="ts-cell"><a class="ts" href="#L506" alt="Wed Feb 01 2023 11:12:26 GMT-0800 (Pacific Standard Time)">19:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@pzura:matrix.org">pzuraq</span>&gt;</div></td><td class="msg-cell">re: the migration path, there are going to be some decorators which cannot be migrated 1-1 is the core issue. The new spec is just less powerful than the old one in some core ways. In these cases, it's likely that teams will try to migrate in parts, and possibly use both specs in different files (using a pragma to distinguish which spec to use)</td></tr>
  <tr class="msg" id="L507"><td class="ts-cell"><a class="ts" href="#L507" alt="Wed Feb 01 2023 11:12:44 GMT-0800 (Pacific Standard Time)">19:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@pzura:matrix.org">pzuraq</span>&gt;</div></td><td class="msg-cell">depending on the size of the codebase, of course</td></tr>
  <tr class="msg" id="L508"><td class="ts-cell"><a class="ts" href="#L508" alt="Wed Feb 01 2023 11:13:17 GMT-0800 (Pacific Standard Time)">19:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">Yeah, but you can codemod one file at a time, surely</td></tr>
  <tr class="msg" id="L509"><td class="ts-cell"><a class="ts" href="#L509" alt="Wed Feb 01 2023 11:13:31 GMT-0800 (Pacific Standard Time)">19:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@pzura:matrix.org">pzuraq</span>&gt;</div></td><td class="msg-cell">minimizing syntax changes minimizes the number of files that <em>need</em> a pragma, because files when the syntax is the same can feature detect based on usage</td></tr>
  <tr class="msg" id="L510"><td class="ts-cell"><a class="ts" href="#L510" alt="Wed Feb 01 2023 11:13:34 GMT-0800 (Pacific Standard Time)">19:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">so is that an argument that this particular ordering is better served by codemods, or not by codemods and by changing the language...?</td></tr>
  <tr class="msg" id="L511"><td class="ts-cell"><a class="ts" href="#L511" alt="Wed Feb 01 2023 11:13:42 GMT-0800 (Pacific Standard Time)">19:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">Rob Palmer</span>: I'm sorry about the last minute request. I did a quick read on the doc. I'm not the one proposing the change, so I'll drop my requests anyway.</td></tr>
  <tr class="msg" id="L512"><td class="ts-cell"><a class="ts" href="#L512" alt="Wed Feb 01 2023 11:14:13 GMT-0800 (Pacific Standard Time)">19:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@pzura:matrix.org">pzuraq</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: some of these changes will not be codemoddable</td></tr>
  <tr class="msg" id="L513"><td class="ts-cell"><a class="ts" href="#L513" alt="Wed Feb 01 2023 11:14:33 GMT-0800 (Pacific Standard Time)">19:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">pzuraq</span>: the only change we're discussing is syntax, which is definitely codemoddable</td></tr>
  <tr class="msg" id="L514"><td class="ts-cell"><a class="ts" href="#L514" alt="Wed Feb 01 2023 11:14:39 GMT-0800 (Pacific Standard Time)">19:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@pzura:matrix.org">pzuraq</span>&gt;</div></td><td class="msg-cell">e.g. transitioning to <code>accessor</code></td></tr>
  <tr class="msg" id="L515"><td class="ts-cell"><a class="ts" href="#L515" alt="Wed Feb 01 2023 11:14:58 GMT-0800 (Pacific Standard Time)">19:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">yes i'd prefer this discussion to be scoped to this particular change</td></tr>
  <tr class="msg" id="L516"><td class="ts-cell"><a class="ts" href="#L516" alt="Wed Feb 01 2023 11:15:05 GMT-0800 (Pacific Standard Time)">19:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">not fully generic ones, or even generic ones about decorators</td></tr>
  <tr class="msg" id="L517"><td class="ts-cell"><a class="ts" href="#L517" alt="Wed Feb 01 2023 11:15:16 GMT-0800 (Pacific Standard Time)">19:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@pzura:matrix.org">pzuraq</span>&gt;</div></td><td class="msg-cell">in that case, yes that one exact change is very codemoddable</td></tr>
  <tr class="msg" id="L518"><td class="ts-cell"><a class="ts" href="#L518" alt="Wed Feb 01 2023 11:15:30 GMT-0800 (Pacific Standard Time)">19:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">unless the fullness of transitioning to ES decorators <em>is</em> the point you're trying to make, which i can appreciate</td></tr>
  <tr class="msg" id="L519"><td class="ts-cell"><a class="ts" href="#L519" alt="Wed Feb 01 2023 11:15:40 GMT-0800 (Pacific Standard Time)">19:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">but i didn't get that point from TS</td></tr>
  <tr class="msg" id="L520"><td class="ts-cell"><a class="ts" href="#L520" alt="Wed Feb 01 2023 11:15:43 GMT-0800 (Pacific Standard Time)">19:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@pzura:matrix.org">pzuraq</span>&gt;</div></td><td class="msg-cell">yes, that is the point I'm trying to make</td></tr>
  <tr class="msg" id="L521"><td class="ts-cell"><a class="ts" href="#L521" alt="Wed Feb 01 2023 11:16:05 GMT-0800 (Pacific Standard Time)">19:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell"><span class="nick-5">danielrosenwasser</span> <span class="nick-15">rbuckton</span> <span class="nick-1">pzuraq</span> I don't think I'm available tomorrow. FWIW, option 2 works for me. I +1 the preference for XOR positioning. I also +1 to blocking decorator before ambiguous class expr.</td></tr>
  <tr class="msg" id="L522"><td class="ts-cell"><a class="ts" href="#L522" alt="Wed Feb 01 2023 11:16:36 GMT-0800 (Pacific Standard Time)">19:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">what do you mean by "blocking decorator before ambiguous class expression"?</td></tr>
  <tr class="msg" id="L523"><td class="ts-cell"><a class="ts" href="#L523" alt="Wed Feb 01 2023 11:16:45 GMT-0800 (Pacific Standard Time)">19:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">if we do the XOR thing that implies <code>export default @dec class A{}</code> is a declaration, not an expression</td></tr>
  <tr class="msg" id="L524"><td class="ts-cell"><a class="ts" href="#L524" alt="Wed Feb 01 2023 11:17:24 GMT-0800 (Pacific Standard Time)">19:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell"><a href="https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$gTO6aM4DVgUXJaskNyv4jIqimo85LHbMtYxA32NT2-c?via=matrix.org&amp;via=igalia.com&amp;via=mozilla.org">https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$gTO6aM4DVgUXJaskNyv4jIqimo85LHbMtYxA32NT2-c?via=matrix.org&amp;via=igalia.com&amp;via=mozilla.org</a></td></tr>
  <tr class="msg" id="L525"><td class="ts-cell"><a class="ts" href="#L525" alt="Wed Feb 01 2023 11:17:32 GMT-0800 (Pacific Standard Time)">19:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">if we do decorators-only-before-export then <code>export default @dec class A {}</code> is a default export of a class expression, under some possible ways of writing the spec</td></tr>
  <tr class="msg" id="L526"><td class="ts-cell"><a class="ts" href="#L526" alt="Wed Feb 01 2023 11:17:48 GMT-0800 (Pacific Standard Time)">19:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">in the decorators-only-before-export world that should be illegal, probably</td></tr>
  <tr class="msg" id="L527"><td class="ts-cell"><a class="ts" href="#L527" alt="Wed Feb 01 2023 11:18:34 GMT-0800 (Pacific Standard Time)">19:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell"><code>export default @dec class A {}</code></td></tr>
  <tr class="msg" id="L528"><td class="ts-cell"><a class="ts" href="#L528" alt="Wed Feb 01 2023 11:19:09 GMT-0800 (Pacific Standard Time)">19:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">I don't get it, the proposal already does a "lookahead ∉ {... <code>class</code>, <code>@</code> }</td></tr>
  <tr class="msg" id="L529"><td class="ts-cell"><a class="ts" href="#L529" alt="Wed Feb 01 2023 11:20:30 GMT-0800 (Pacific Standard Time)">19:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">"some possible ways of writing the spec"</td></tr>
  <tr class="msg" id="L530"><td class="ts-cell"><a class="ts" href="#L530" alt="Wed Feb 01 2023 11:21:14 GMT-0800 (Pacific Standard Time)">19:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">if it is already prohibited I assume everyone is happy</td></tr>
  <tr class="msg" id="L531"><td class="ts-cell"><a class="ts" href="#L531" alt="Wed Feb 01 2023 11:21:28 GMT-0800 (Pacific Standard Time)">19:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">actually, we might be wanting the same thing <span class="nick-5">leobalter</span></td></tr>
  <tr class="msg" id="L532"><td class="ts-cell"><a class="ts" href="#L532" alt="Wed Feb 01 2023 11:22:01 GMT-0800 (Pacific Standard Time)">19:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell">yes! I'm just sharing my support or whatever goes as my Salesforce / LWC position</td></tr>
  <tr class="msg" id="L533"><td class="ts-cell"><a class="ts" href="#L533" alt="Wed Feb 01 2023 11:22:24 GMT-0800 (Pacific Standard Time)">19:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell">LWC does not use class decorators yet, but the feedback comes in from the team.</td></tr>
  <tr class="msg" id="L534"><td class="ts-cell"><a class="ts" href="#L534" alt="Wed Feb 01 2023 11:23:30 GMT-0800 (Pacific Standard Time)">19:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> yes, that is the point I'm trying to make</blockquote></mx-reply>for every file, decorators in that file will either be written using TS's old semantics or ES semantics. If you are choosing for that file to use ES semantics, it is not that hard to codemod that file, I would think. if you're changing the semantics for your whole project at once, you can run the codemod for your whole project at once.</td></tr>
  <tr class="msg" id="L535"><td class="ts-cell"><a class="ts" href="#L535" alt="Wed Feb 01 2023 11:23:51 GMT-0800 (Pacific Standard Time)">19:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I there's migration pain involved in getting the semantics within the decorator right, but the codemod still seems basically trivial.</td></tr>
  <tr class="msg" id="L536"><td class="ts-cell"><a class="ts" href="#L536" alt="Wed Feb 01 2023 11:24:05 GMT-0800 (Pacific Standard Time)">19:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell">I do not oppose to option 1 either. Option 2 is just my preference considering the discussion the committee had.</td></tr>
  <tr class="msg" id="L537"><td class="ts-cell"><a class="ts" href="#L537" alt="Wed Feb 01 2023 11:24:10 GMT-0800 (Pacific Standard Time)">19:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">btw what is a codemod</td></tr>
  <tr class="msg" id="L538"><td class="ts-cell"><a class="ts" href="#L538" alt="Wed Feb 01 2023 11:24:14 GMT-0800 (Pacific Standard Time)">19:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">is it "just" a transform</td></tr>
  <tr class="msg" id="L539"><td class="ts-cell"><a class="ts" href="#L539" alt="Wed Feb 01 2023 11:24:22 GMT-0800 (Pacific Standard Time)">19:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">or does it have more bells and whistles attached?</td></tr>
  <tr class="msg" id="L540"><td class="ts-cell"><a class="ts" href="#L540" alt="Wed Feb 01 2023 11:24:30 GMT-0800 (Pacific Standard Time)">19:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">in my case, just a source rewrite</td></tr>
  <tr class="msg" id="L541"><td class="ts-cell"><a class="ts" href="#L541" alt="Wed Feb 01 2023 11:24:33 GMT-0800 (Pacific Standard Time)">19:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">string-to-string</td></tr>
  <tr class="msg" id="L542"><td class="ts-cell"><a class="ts" href="#L542" alt="Wed Feb 01 2023 11:24:35 GMT-0800 (Pacific Standard Time)">19:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@pzura:matrix.org">pzuraq</span>&gt;</div></td><td class="msg-cell">teams will have to remove some decorators and change the invocations of others, and a codemod will not be able to tell based on usage</td></tr>
  <tr class="msg" id="L543"><td class="ts-cell"><a class="ts" href="#L543" alt="Wed Feb 01 2023 11:24:50 GMT-0800 (Pacific Standard Time)">19:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@pzura:matrix.org">pzuraq</span>&gt;</div></td><td class="msg-cell">e.g. a dev will have to manually look at each decorated field to see if it needs <code>accessor</code></td></tr>
  <tr class="msg" id="L544"><td class="ts-cell"><a class="ts" href="#L544" alt="Wed Feb 01 2023 11:25:01 GMT-0800 (Pacific Standard Time)">19:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">yeah, I agree that a codemod cannot help you with the thing where the semantics are different</td></tr>
  <tr class="msg" id="L545"><td class="ts-cell"><a class="ts" href="#L545" alt="Wed Feb 01 2023 11:25:07 GMT-0800 (Pacific Standard Time)">19:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">but neither can any particular choice of syntax here</td></tr>
  <tr class="msg" id="L546"><td class="ts-cell"><a class="ts" href="#L546" alt="Wed Feb 01 2023 11:25:21 GMT-0800 (Pacific Standard Time)">19:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@pzura:matrix.org">pzuraq</span>&gt;</div></td><td class="msg-cell">it can reduce what is going to be a very painful transition</td></tr>
  <tr class="msg" id="L547"><td class="ts-cell"><a class="ts" href="#L547" alt="Wed Feb 01 2023 11:25:24 GMT-0800 (Pacific Standard Time)">19:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@pzura:matrix.org">pzuraq</span>&gt;</div></td><td class="msg-cell">for some teams</td></tr>
  <tr class="msg" id="L548"><td class="ts-cell"><a class="ts" href="#L548" alt="Wed Feb 01 2023 11:25:44 GMT-0800 (Pacific Standard Time)">19:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@pzura:matrix.org">pzuraq</span>&gt;</div></td><td class="msg-cell">on top of the other benefits, e.g. documentation costs</td></tr>
  <tr class="msg" id="L549"><td class="ts-cell"><a class="ts" href="#L549" alt="Wed Feb 01 2023 11:26:10 GMT-0800 (Pacific Standard Time)">19:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I just don't see the "after going through every decorator in this file and migrating it so it's going to be ES-semantics-compatible, also run a codemod after" as being a noticeable change in the amount of pain</td></tr>
  <tr class="msg" id="L550"><td class="ts-cell"><a class="ts" href="#L550" alt="Wed Feb 01 2023 11:26:29 GMT-0800 (Pacific Standard Time)">19:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I agree the transition is painful in general but not that this particular thing is more than a trivial additional amount of pain</td></tr>
  <tr class="msg" id="L551"><td class="ts-cell"><a class="ts" href="#L551" alt="Wed Feb 01 2023 11:32:34 GMT-0800 (Pacific Standard Time)">19:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I suspect people probably <em>would be</em> surprised that <code>for await</code> does an <code>await</code> on <code>break</code>, but this doesn't actually lead to the code doing a different thing than they expect so it's fine</td></tr>
  <tr class="msg" id="L552"><td class="ts-cell"><a class="ts" href="#L552" alt="Wed Feb 01 2023 11:32:40 GMT-0800 (Pacific Standard Time)">19:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">that will not be true of this syntax</td></tr>
  <tr class="msg" id="L553"><td class="ts-cell"><a class="ts" href="#L553" alt="Wed Feb 01 2023 11:33:18 GMT-0800 (Pacific Standard Time)">19:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> that will not be true of this syntax</blockquote></mx-reply>Hmm, I think this will "just work" in practice, just like all the stuff around <code>for await</code>.</td></tr>
  <tr class="msg" id="L554"><td class="ts-cell"><a class="ts" href="#L554" alt="Wed Feb 01 2023 11:33:51 GMT-0800 (Pacific Standard Time)">19:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">no, because the RHS does not get awaited</td></tr>
  <tr class="msg" id="L555"><td class="ts-cell"><a class="ts" href="#L555" alt="Wed Feb 01 2023 11:34:06 GMT-0800 (Pacific Standard Time)">19:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">like if you see <code>using await x = y</code> and assume that <code>y</code> is awaited, you will be wrong</td></tr>
  <tr class="msg" id="L556"><td class="ts-cell"><a class="ts" href="#L556" alt="Wed Feb 01 2023 11:36:04 GMT-0800 (Pacific Standard Time)">19:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i must be dumb because all these arguments still cut both ways to me</td></tr>
  <tr class="msg" id="L557"><td class="ts-cell"><a class="ts" href="#L557" alt="Wed Feb 01 2023 11:36:22 GMT-0800 (Pacific Standard Time)">19:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">but maybe that's fine, that means we just need to choose one?</td></tr>
  <tr class="msg" id="L558"><td class="ts-cell"><a class="ts" href="#L558" alt="Wed Feb 01 2023 11:36:38 GMT-0800 (Pacific Standard Time)">19:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i must be dumb because all these arguments still cut both ways to me</blockquote></mx-reply>Yeah I kinda think either one could be learned and work</td></tr>
  <tr class="msg" id="L559"><td class="ts-cell"><a class="ts" href="#L559" alt="Wed Feb 01 2023 11:36:58 GMT-0800 (Pacific Standard Time)">19:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I think that there are decent theoretical arguments in both directions, and also that people can learn either syntax eventually</td></tr>
  <tr class="msg" id="L560"><td class="ts-cell"><a class="ts" href="#L560" alt="Wed Feb 01 2023 11:37:16 GMT-0800 (Pacific Standard Time)">19:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">which means that I would decide this by, which do we expect to cause less initial confusion, emperically</td></tr>
  <tr class="msg" id="L561"><td class="ts-cell"><a class="ts" href="#L561" alt="Wed Feb 01 2023 11:37:30 GMT-0800 (Pacific Standard Time)">19:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">my expectation is that <code>async using</code> will cause less confusion than <code>using await</code></td></tr>
  <tr class="msg" id="L562"><td class="ts-cell"><a class="ts" href="#L562" alt="Wed Feb 01 2023 11:37:41 GMT-0800 (Pacific Standard Time)">19:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">given infinite resources I would run a study but I don't think it's worth running a study</td></tr>
  <tr class="msg" id="L563"><td class="ts-cell"><a class="ts" href="#L563" alt="Wed Feb 01 2023 11:38:34 GMT-0800 (Pacific Standard Time)">19:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">that said I am not, like, absolutely committed to the <code>async using</code> syntax. I think it will result in less confusion but it's not the end of the world if more people are confused.</td></tr>
  <tr class="msg" id="L564"><td class="ts-cell"><a class="ts" href="#L564" alt="Wed Feb 01 2023 11:38:56 GMT-0800 (Pacific Standard Time)">19:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">yeah @bakkot's is my exact intuition, but it's also just intuition</td></tr>
  <tr class="msg" id="L565"><td class="ts-cell"><a class="ts" href="#L565" alt="Wed Feb 01 2023 11:39:25 GMT-0800 (Pacific Standard Time)">19:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">more self servingly i don't want to have to explain "well actualy, this is why <code>await</code> is not nonsense" to developers</td></tr>
  <tr class="msg" id="L566"><td class="ts-cell"><a class="ts" href="#L566" alt="Wed Feb 01 2023 11:40:29 GMT-0800 (Pacific Standard Time)">19:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Honestly I don’t know who is being dismissive to user confusion here</td></tr>
  <tr class="msg" id="L567"><td class="ts-cell"><a class="ts" href="#L567" alt="Wed Feb 01 2023 11:41:59 GMT-0800 (Pacific Standard Time)">19:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">+1 to Mark’s “both sides” analysis</td></tr>
  <tr class="msg" id="L568"><td class="ts-cell"><a class="ts" href="#L568" alt="Wed Feb 01 2023 11:44:54 GMT-0800 (Pacific Standard Time)">19:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@peetk:matrix.org">peetk</span>&gt;</div></td><td class="msg-cell">sorry if i missed someone already answering this but why is the <code>for await</code> case not precedent for <code>await</code> not always meaning "await right here"?</td></tr>
  <tr class="msg" id="L569"><td class="ts-cell"><a class="ts" href="#L569" alt="Wed Feb 01 2023 11:45:13 GMT-0800 (Pacific Standard Time)">19:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-11">peetk</span>: with <code>for await</code> all the <code>await</code>ing happens scoped to that statement</td></tr>
  <tr class="msg" id="L570"><td class="ts-cell"><a class="ts" href="#L570" alt="Wed Feb 01 2023 11:45:19 GMT-0800 (Pacific Standard Time)">19:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">that is not true for <code>using await</code></td></tr>
  <tr class="msg" id="L571"><td class="ts-cell"><a class="ts" href="#L571" alt="Wed Feb 01 2023 11:45:47 GMT-0800 (Pacific Standard Time)">19:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">that is, right now <code>await</code>, including in <code>for await</code>, means "there's some awaiting in the rest of this statement"</td></tr>
  <tr class="msg" id="L572"><td class="ts-cell"><a class="ts" href="#L572" alt="Wed Feb 01 2023 11:46:44 GMT-0800 (Pacific Standard Time)">19:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@peetk:matrix.org">peetk</span>&gt;</div></td><td class="msg-cell">i see. that's an expanded definition of "right here" tho</td></tr>
  <tr class="msg" id="L573"><td class="ts-cell"><a class="ts" href="#L573" alt="Wed Feb 01 2023 11:47:01 GMT-0800 (Pacific Standard Time)">19:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">not one which causes confusion in practice, though</td></tr>
  <tr class="msg" id="L574"><td class="ts-cell"><a class="ts" href="#L574" alt="Wed Feb 01 2023 11:47:23 GMT-0800 (Pacific Standard Time)">19:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">but I still expect <code>using await</code> to cause confusion in practice</td></tr>
  <tr class="msg" id="L575"><td class="ts-cell"><a class="ts" href="#L575" alt="Wed Feb 01 2023 11:47:28 GMT-0800 (Pacific Standard Time)">19:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@peetk:matrix.org">peetk</span>&gt;</div></td><td class="msg-cell">is <code>for await</code> widely used enough to gauge how confusing it is lol?</td></tr>
  <tr class="msg" id="L576"><td class="ts-cell"><a class="ts" href="#L576" alt="Wed Feb 01 2023 11:47:29 GMT-0800 (Pacific Standard Time)">19:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">no matter how good our theoretical justifications are</td></tr>
  <tr class="msg" id="L577"><td class="ts-cell"><a class="ts" href="#L577" alt="Wed Feb 01 2023 11:47:32 GMT-0800 (Pacific Standard Time)">19:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Is it expanded? It's performing an await on that line before the block on the next line begins execution</td></tr>
  <tr class="msg" id="L578"><td class="ts-cell"><a class="ts" href="#L578" alt="Wed Feb 01 2023 11:47:43 GMT-0800 (Pacific Standard Time)">19:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I think so? <code>for await</code> sees a fair bit of use IME</td></tr>
  <tr class="msg" id="L579"><td class="ts-cell"><a class="ts" href="#L579" alt="Wed Feb 01 2023 11:47:56 GMT-0800 (Pacific Standard Time)">19:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@peetk:matrix.org">peetk</span>&gt;</div></td><td class="msg-cell">fair enough</td></tr>
  <tr class="msg" id="L580"><td class="ts-cell"><a class="ts" href="#L580" alt="Wed Feb 01 2023 11:48:31 GMT-0800 (Pacific Standard Time)">19:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><a href="https://nodejs.org/api/readline.html#example-read-file-stream-line-by-line">https://nodejs.org/api/readline.html#example-read-file-stream-line-by-line</a> etc</td></tr>
  <tr class="msg" id="L581"><td class="ts-cell"><a class="ts" href="#L581" alt="Wed Feb 01 2023 11:48:49 GMT-0800 (Pacific Standard Time)">19:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@peetk:matrix.org">peetk</span>&gt;</div></td><td class="msg-cell">my experience is normie devs are not even sure it's valid javascript when they see it but <em>shrugs</em></td></tr>
  <tr class="msg" id="L582"><td class="ts-cell"><a class="ts" href="#L582" alt="Wed Feb 01 2023 11:50:13 GMT-0800 (Pacific Standard Time)">19:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@peetk:matrix.org">peetk</span>&gt;</div></td><td class="msg-cell">maybe that's changing these days idk</td></tr>
  <tr class="msg" id="L583"><td class="ts-cell"><a class="ts" href="#L583" alt="Wed Feb 01 2023 11:50:36 GMT-0800 (Pacific Standard Time)">19:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">new syntax always takes a while to catch on, yeah</td></tr>
  <tr class="msg" id="L584"><td class="ts-cell"><a class="ts" href="#L584" alt="Wed Feb 01 2023 11:54:00 GMT-0800 (Pacific Standard Time)">19:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@peetk:matrix.org">peetk</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Is it expanded? It's performing an await on that line before the block on the next line begins execution</blockquote></mx-reply>doing real back of the envelope folk dev psychology here but imo the await would need to be inside the parens to visually cue that an await happens on each iteration, per the proposed interpretive principle</td></tr>
  <tr class="msg" id="L585"><td class="ts-cell"><a class="ts" href="#L585" alt="Wed Feb 01 2023 11:55:02 GMT-0800 (Pacific Standard Time)">19:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">the proposed interpretive principle is "<code>await</code> signals that it + its RHS will do some awaiting", and that's true in the current syntax</td></tr>
  <tr class="msg" id="L586"><td class="ts-cell"><a class="ts" href="#L586" alt="Wed Feb 01 2023 11:55:38 GMT-0800 (Pacific Standard Time)">19:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">at least assuming the body of the loop is considered to be "its RHS", but since it's in the same place as the <code>for</code> token and the body of the loop is surely the RHS of the <code>for</code>, that seems legit</td></tr>
  <tr class="msg" id="L587"><td class="ts-cell"><a class="ts" href="#L587" alt="Wed Feb 01 2023 11:56:21 GMT-0800 (Pacific Standard Time)">19:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@peetk:matrix.org">peetk</span>&gt;</div></td><td class="msg-cell">i guess i was responding to a different proposed interpretive principle which was "await means some awaiting happens right here" </td></tr>
  <tr class="msg" id="L588"><td class="ts-cell"><a class="ts" href="#L588" alt="Wed Feb 01 2023 11:57:11 GMT-0800 (Pacific Standard Time)">19:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I think the body of the loop counts as "right here"</td></tr>
  <tr class="msg" id="L589"><td class="ts-cell"><a class="ts" href="#L589" alt="Wed Feb 01 2023 11:57:44 GMT-0800 (Pacific Standard Time)">19:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">hm that feels kind of intuitive to me actually</td></tr>
  <tr class="msg" id="L590"><td class="ts-cell"><a class="ts" href="#L590" alt="Wed Feb 01 2023 11:58:06 GMT-0800 (Pacific Standard Time)">19:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">hypothetically if the syntax was <code>using await (bindingExpr) { }</code>, that seems perfectly clear</td></tr>
  <tr class="msg" id="L591"><td class="ts-cell"><a class="ts" href="#L591" alt="Wed Feb 01 2023 11:59:22 GMT-0800 (Pacific Standard Time)">19:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">that seems really nice, but i think ron had use cases for wanting to do some action which might throw, queue up the result, and then have it disposed at block exit, which i'm not sure would work with that form?</td></tr>
  <tr class="msg" id="L592"><td class="ts-cell"><a class="ts" href="#L592" alt="Wed Feb 01 2023 11:59:43 GMT-0800 (Pacific Standard Time)">19:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> hypothetically if the syntax was <code>using await (bindingExpr) { }</code>, that seems perfectly clear</blockquote></mx-reply>it used to be approximately that (with <code>try</code> instead) and we moved away from it</td></tr>
  <tr class="msg" id="L593"><td class="ts-cell"><a class="ts" href="#L593" alt="Wed Feb 01 2023 11:59:51 GMT-0800 (Pacific Standard Time)">19:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">right i know</td></tr>
  <tr class="msg" id="L594"><td class="ts-cell"><a class="ts" href="#L594" alt="Wed Feb 01 2023 11:59:54 GMT-0800 (Pacific Standard Time)">19:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@peetk:matrix.org">peetk</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I think the body of the loop counts as "right here"</blockquote></mx-reply>i disagree. the <code>await</code> in <code>for await</code> has always felt me like sticking an await in a truly random place to vaguely signal that some awaiting happens somewhere, somehow, and i had to learn by rote where actually it happens.</td></tr>
  <tr class="msg" id="L595"><td class="ts-cell"><a class="ts" href="#L595" alt="Wed Feb 01 2023 12:00:01 GMT-0800 (Pacific Standard Time)">20:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i'm just saying what you said about the for body counting as "Right here" rings true to me</td></tr>
  <tr class="msg" id="L596"><td class="ts-cell"><a class="ts" href="#L596" alt="Wed Feb 01 2023 12:00:09 GMT-0800 (Pacific Standard Time)">20:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">ah sure</td></tr>
  <tr class="msg" id="L597"><td class="ts-cell"><a class="ts" href="#L597" alt="Wed Feb 01 2023 12:01:20 GMT-0800 (Pacific Standard Time)">20:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@peetk:matrix.org">peetk</span>&gt;</div></td><td class="msg-cell">i guess to sharpen my point it's not as though this interpretive principle helps people understand what exactly is being awaited, when, at least in the case of <code>for await</code>.</td></tr>
  <tr class="msg" id="L598"><td class="ts-cell"><a class="ts" href="#L598" alt="Wed Feb 01 2023 12:01:28 GMT-0800 (Pacific Standard Time)">20:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">hm. I think I would be much, much more surprised if <code>for await</code> did awaiting <em>not</em> in that statement</td></tr>
  <tr class="msg" id="L599"><td class="ts-cell"><a class="ts" href="#L599" alt="Wed Feb 01 2023 12:01:43 GMT-0800 (Pacific Standard Time)">20:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">like, I agree you have to learn the rules for where <em>within</em> the statement</td></tr>
  <tr class="msg" id="L600"><td class="ts-cell"><a class="ts" href="#L600" alt="Wed Feb 01 2023 12:01:45 GMT-0800 (Pacific Standard Time)">20:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">there's an interleaving point in an <code>async function</code>, that's invoked, even with no <code>await</code> present, no? same with the proposed <code>async do {}</code>? or is that incorrect because async functions (and async do blocks) run synchronously until the first await, or return?</td></tr>
  <tr class="msg" id="L601"><td class="ts-cell"><a class="ts" href="#L601" alt="Wed Feb 01 2023 12:01:48 GMT-0800 (Pacific Standard Time)">20:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@peetk:matrix.org">peetk</span>&gt;</div></td><td class="msg-cell">but the non-locality of <code>using</code> is sort of already baked into <code>using</code></td></tr>
  <tr class="msg" id="L602"><td class="ts-cell"><a class="ts" href="#L602" alt="Wed Feb 01 2023 12:01:48 GMT-0800 (Pacific Standard Time)">20:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">but it's scoped</td></tr>
  <tr class="msg" id="L603"><td class="ts-cell"><a class="ts" href="#L603" alt="Wed Feb 01 2023 12:04:59 GMT-0800 (Pacific Standard Time)">20:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">async function's its a bit weird because of the return, but <code>async do {}</code> there's no interleaving unless you explicitly <code>await</code> in the body of the <code>do</code></td></tr>
  <tr class="msg" id="L604"><td class="ts-cell"><a class="ts" href="#L604" alt="Wed Feb 01 2023 12:05:06 GMT-0800 (Pacific Standard Time)">20:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">FWIW I'm not sure that enforcing turn boundaries was the right call, but this is perfectly consistent with our overall design so it seems locally reasonble</td></tr>
  <tr class="msg" id="L605"><td class="ts-cell"><a class="ts" href="#L605" alt="Wed Feb 01 2023 12:05:39 GMT-0800 (Pacific Standard Time)">20:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">so <code>async do { Promise.resolve({}) }</code> has no interleaving point? it produces a promise?</td></tr>
  <tr class="msg" id="L606"><td class="ts-cell"><a class="ts" href="#L606" alt="Wed Feb 01 2023 12:06:02 GMT-0800 (Pacific Standard Time)">20:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> so <code>async do { Promise.resolve({}) }</code> has no interleaving point? it produces a promise?</blockquote></mx-reply>I think it wouldn't; the interleaving point would come if you awaited that</td></tr>
  <tr class="msg" id="L607"><td class="ts-cell"><a class="ts" href="#L607" alt="Wed Feb 01 2023 12:06:05 GMT-0800 (Pacific Standard Time)">20:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">gotcha</td></tr>
  <tr class="msg" id="L608"><td class="ts-cell"><a class="ts" href="#L608" alt="Wed Feb 01 2023 12:06:41 GMT-0800 (Pacific Standard Time)">20:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">ljharb</span>: <code>async do {}</code> always produces a promise</td></tr>
  <tr class="msg" id="L609"><td class="ts-cell"><a class="ts" href="#L609" alt="Wed Feb 01 2023 12:07:04 GMT-0800 (Pacific Standard Time)">20:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><code>async do {}</code> is very nearly pure sugar for in immediately invoked async arrow</td></tr>
  <tr class="msg" id="L610"><td class="ts-cell"><a class="ts" href="#L610" alt="Wed Feb 01 2023 12:07:20 GMT-0800 (Pacific Standard Time)">20:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">right, and in my example it'd flatten the promise and end up with a new promise for that arbitrary object</td></tr>
  <tr class="msg" id="L611"><td class="ts-cell"><a class="ts" href="#L611" alt="Wed Feb 01 2023 12:07:56 GMT-0800 (Pacific Standard Time)">20:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">ah, yes, that's right</td></tr>
  <tr class="msg" id="L612"><td class="ts-cell"><a class="ts" href="#L612" alt="Wed Feb 01 2023 12:10:26 GMT-0800 (Pacific Standard Time)">20:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: get gilad bracha to be the tiebreaker</td></tr>
  <tr class="msg" id="L613"><td class="ts-cell"><a class="ts" href="#L613" alt="Wed Feb 01 2023 12:10:31 GMT-0800 (Pacific Standard Time)">20:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">need more opinions</td></tr>
  <tr class="msg" id="L614"><td class="ts-cell"><a class="ts" href="#L614" alt="Wed Feb 01 2023 12:10:54 GMT-0800 (Pacific Standard Time)">20:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">gilad is happier not thinking about this kind of question, I believe</td></tr>
  <tr class="msg" id="L615"><td class="ts-cell"><a class="ts" href="#L615" alt="Wed Feb 01 2023 12:11:14 GMT-0800 (Pacific Standard Time)">20:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">which, relatable</td></tr>
  <tr class="msg" id="L616"><td class="ts-cell"><a class="ts" href="#L616" alt="Wed Feb 01 2023 12:12:16 GMT-0800 (Pacific Standard Time)">20:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i only have envy for that position</td></tr>
  <tr class="msg" id="L617"><td class="ts-cell"><a class="ts" href="#L617" alt="Wed Feb 01 2023 12:12:24 GMT-0800 (Pacific Standard Time)">20:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">but the world still cares</td></tr>
  <tr class="msg" id="L618"><td class="ts-cell"><a class="ts" href="#L618" alt="Wed Feb 01 2023 12:12:30 GMT-0800 (Pacific Standard Time)">20:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">why shouldn't the burden be thrust upon him</td></tr>
  <tr class="msg" id="L619"><td class="ts-cell"><a class="ts" href="#L619" alt="Wed Feb 01 2023 12:21:45 GMT-0800 (Pacific Standard Time)">20:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@peetk:matrix.org">peetk</span>&gt;</div></td><td class="msg-cell">i'm 92% kidding here but would people who disprefer <code>using await</code> like it better if <code>using</code>/<code>using await</code> were spelled <code>will dispose</code>/<code>will await dispose</code> respectively?</td></tr>
  <tr class="msg" id="L620"><td class="ts-cell"><a class="ts" href="#L620" alt="Wed Feb 01 2023 12:24:39 GMT-0800 (Pacific Standard Time)">20:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">umm no? I like <code>using</code>.</td></tr>
  <tr class="msg" id="L621"><td class="ts-cell"><a class="ts" href="#L621" alt="Wed Feb 01 2023 12:25:32 GMT-0800 (Pacific Standard Time)">20:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@peetk:matrix.org">peetk</span>&gt;</div></td><td class="msg-cell">i meant "would it address the specific 'await means here' concern" (and also it is definitely not a real proposal for many reasons)</td></tr>
  <tr class="msg" id="L622"><td class="ts-cell"><a class="ts" href="#L622" alt="Wed Feb 01 2023 12:25:40 GMT-0800 (Pacific Standard Time)">20:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">We already had two/three-keyword declarations in this proposal. Cutting back to one/two-keywords was a win.</td></tr>
  <tr class="msg" id="L623"><td class="ts-cell"><a class="ts" href="#L623" alt="Wed Feb 01 2023 12:26:42 GMT-0800 (Pacific Standard Time)">20:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">We could potentially use <code>await using x = ...</code> instead. I opted against it because of the cover grammar necessary to try to keep LR1, but it's an option.</td></tr>
  <tr class="msg" id="L624"><td class="ts-cell"><a class="ts" href="#L624" alt="Wed Feb 01 2023 12:26:43 GMT-0800 (Pacific Standard Time)">20:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i meant "would it address the specific 'await means here' concern" (and also it is definitely not a real proposal for many reasons)</blockquote></mx-reply>Well, I think <code>await</code>-doubters would want to see the <code>await</code> at the end of the block, hence the async which is always a bit more action-at-a-distance</td></tr>
  <tr class="msg" id="L625"><td class="ts-cell"><a class="ts" href="#L625" alt="Wed Feb 01 2023 12:27:07 GMT-0800 (Pacific Standard Time)">20:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> We could potentially use <code>await using x = ...</code> instead. I opted against it because of the cover grammar necessary to try to keep LR1, but it's an option.</blockquote></mx-reply>Yeah,I was wondering about that option too, but I think that wouldn't address the concerns of the people who prefer <code>async using</code>.</td></tr>
  <tr class="msg" id="L626"><td class="ts-cell"><a class="ts" href="#L626" alt="Wed Feb 01 2023 12:27:13 GMT-0800 (Pacific Standard Time)">20:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><code>await using x = </code> is 1:1 the C# syntax.</td></tr>
  <tr class="msg" id="L627"><td class="ts-cell"><a class="ts" href="#L627" alt="Wed Feb 01 2023 12:27:43 GMT-0800 (Pacific Standard Time)">20:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">It indicates what you are awaiting is the <code>using</code>, possibly more strongly than <code>using await</code> does.</td></tr>
  <tr class="msg" id="L628"><td class="ts-cell"><a class="ts" href="#L628" alt="Wed Feb 01 2023 12:28:22 GMT-0800 (Pacific Standard Time)">20:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">yeah, maybe. Adding more cover grammars seems good to avoid.</td></tr>
  <tr class="msg" id="L629"><td class="ts-cell"><a class="ts" href="#L629" alt="Wed Feb 01 2023 12:28:24 GMT-0800 (Pacific Standard Time)">20:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">But I also chose <code>using await</code> to mirror <code>for await</code> in ordering.</td></tr>
  <tr class="msg" id="L630"><td class="ts-cell"><a class="ts" href="#L630" alt="Wed Feb 01 2023 12:29:26 GMT-0800 (Pacific Standard Time)">20:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> yeah, maybe. Adding more cover grammars seems good to avoid.</blockquote></mx-reply>IIRC, <span class="nick-2">bakkot</span> 's position is that the syntax complexity shouldn't matter as long as we achieve the right syntax. <span class="nick-2">bakkot</span>, is that correct?</td></tr>
  <tr class="msg" id="L631"><td class="ts-cell"><a class="ts" href="#L631" alt="Wed Feb 01 2023 12:29:47 GMT-0800 (Pacific Standard Time)">20:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">that's what the priorities of constituencies (sp) would say, i think</td></tr>
  <tr class="msg" id="L632"><td class="ts-cell"><a class="ts" href="#L632" alt="Wed Feb 01 2023 12:29:59 GMT-0800 (Pacific Standard Time)">20:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@peetk:matrix.org">peetk</span>&gt;</div></td><td class="msg-cell">yeah my thinking was that <code>using</code> already creates the action-at-a-distance, which is why it feels natural to me (or at least, not hideously unnatural) for it to project the <code>await</code> to also be non-local</td></tr>
  <tr class="msg" id="L633"><td class="ts-cell"><a class="ts" href="#L633" alt="Wed Feb 01 2023 12:30:26 GMT-0800 (Pacific Standard Time)">20:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> IIRC, <span class="nick-2">bakkot</span> 's position is that the syntax complexity shouldn't matter as long as we achieve the right syntax. <span class="nick-2">bakkot</span>, is that correct?</blockquote></mx-reply>not that it should matter literally zero - it is important not to force engines to do infinite lookahead, for example - but as long as the thing is reasonably implementable, yes</td></tr>
  <tr class="msg" id="L634"><td class="ts-cell"><a class="ts" href="#L634" alt="Wed Feb 01 2023 12:33:12 GMT-0800 (Pacific Standard Time)">20:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><code>await [NLT] using [NLT] BindingIdentifier</code> wouldn't require infinite lookahead. The only problem is a recent editorial change I made to use an early error to forbid <em>BindingPattern</em> to avoid differing uses of the <code>Using</code> production parameter, though that's also easily changed.</td></tr>
  <tr class="msg" id="L635"><td class="ts-cell"><a class="ts" href="#L635" alt="Wed Feb 01 2023 12:34:03 GMT-0800 (Pacific Standard Time)">20:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">(though the NLT between <code>await using</code> isn't strictly necessary, I'd still they rather not be split across multiple lines)</td></tr>
  <tr class="msg" id="L636"><td class="ts-cell"><a class="ts" href="#L636" alt="Wed Feb 01 2023 12:36:23 GMT-0800 (Pacific Standard Time)">20:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">right, I think <code>await using x</code> would be acceptable from a spec-complexity point of view, if we thought that was best for users of the language</td></tr>
  <tr class="msg" id="L637"><td class="ts-cell"><a class="ts" href="#L637" alt="Wed Feb 01 2023 12:36:39 GMT-0800 (Pacific Standard Time)">20:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">that is, if we thought that was best, I wouldn't want to choose some other syntax just because of spec complexity reasons</td></tr>
  <tr class="msg" id="L638"><td class="ts-cell"><a class="ts" href="#L638" alt="Wed Feb 01 2023 12:37:25 GMT-0800 (Pacific Standard Time)">20:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">(personally, if we are sticking with <code>await</code>, I lean a little more towards <code>using await</code>, so it's harder to confuse with a statement-positioned AwaitExpression.)</td></tr>
  <tr class="msg" id="L639"><td class="ts-cell"><a class="ts" href="#L639" alt="Wed Feb 01 2023 12:46:26 GMT-0800 (Pacific Standard Time)">20:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Thanks all for the feedback on the Async Resource Management proposal. My apologies for the technical issues today, hopefully they won't repeat themselves tomorrow.</td></tr>
  <tr class="msg" id="L640"><td class="ts-cell"><a class="ts" href="#L640" alt="Wed Feb 01 2023 13:34:56 GMT-0800 (Pacific Standard Time)">21:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">erights</span>, et al. Apparently I misspoke regarding <code>Function.prototype.toString</code>. The specified semantics include class decorators in a class's <code>.toString()</code>, but do not include method decorators in a static method. The conclusion to that issue (<a href="https://github.com/tc39/proposal-decorators/issues/109">https://github.com/tc39/proposal-decorators/issues/109</a>) indicates it should be reopened if there are concerns with the resolution, however.</td></tr>
  <tr class="msg" id="L641"><td class="ts-cell"><a class="ts" href="#L641" alt="Wed Feb 01 2023 13:36:50 GMT-0800 (Pacific Standard Time)">21:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">There was a comment in that issue about how <code>eval(className.toString())</code> could produce a copy of that class, but that wouldn't be true in the case of a class decorator capturing the <code>.toString()</code> of its target, because its still in the middle of evaluation and the eval result <em>wouldn't</em> be the same as the class that the class decorator sees.</td></tr>
  <tr class="msg" id="L642"><td class="ts-cell"><a class="ts" href="#L642" alt="Wed Feb 01 2023 13:41:26 GMT-0800 (Pacific Standard Time)">21:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><p>do people in the decorator-before-export camp think that decorators should also come before the <code>return</code> when you're returning a class? as in</p>
<pre><code>@dec
return class {}
</code></pre>
</td></tr>
  <tr class="msg" id="L643"><td class="ts-cell"><a class="ts" href="#L643" alt="Wed Feb 01 2023 13:41:54 GMT-0800 (Pacific Standard Time)">21:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I assume not but am not entirely clear on what the relevant distinction between <code>return</code> and <code>export</code> is here</td></tr>
  <tr class="msg" id="L644"><td class="ts-cell"><a class="ts" href="#L644" alt="Wed Feb 01 2023 13:46:31 GMT-0800 (Pacific Standard Time)">21:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I guess I don't actually care enough to argue about this, ignore me</td></tr>
  <tr class="msg" id="L645"><td class="ts-cell"><a class="ts" href="#L645" alt="Wed Feb 01 2023 13:47:50 GMT-0800 (Pacific Standard Time)">21:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">the main outcome I would like to see here is typescript accepting only standard syntax (unless a flag is passed), whatever we ultimately settle on</td></tr>
  <tr class="msg" id="L646"><td class="ts-cell"><a class="ts" href="#L646" alt="Wed Feb 01 2023 13:55:31 GMT-0800 (Pacific Standard Time)">21:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i think we probably should not have allowed this case at all, in either order. declare your thing explicitly and then export/return/etc it</td></tr>
  <tr class="msg" id="L647"><td class="ts-cell"><a class="ts" href="#L647" alt="Wed Feb 01 2023 13:59:44 GMT-0800 (Pacific Standard Time)">21:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>do people in the decorator-before-export camp think that decorators should also come before the <code>return</code> when you're returning a class? as in</p>
<pre><code>@dec
return class {}
</code></pre>
</blockquote></mx-reply>Certainly not. There is a clear semantic difference between <code>export</code> (which has non-local effects that occur before evaluation) and <code>return</code> (which does not).</td></tr>
  <tr class="msg" id="L648"><td class="ts-cell"><a class="ts" href="#L648" alt="Wed Feb 01 2023 14:00:38 GMT-0800 (Pacific Standard Time)">22:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i think we probably should not have allowed this case at all, in either order. declare your thing explicitly and then export/return/etc it</blockquote></mx-reply>lol that is a previously unmentioned fourth option, i guess</td></tr>
  <tr class="msg" id="L649"><td class="ts-cell"><a class="ts" href="#L649" alt="Wed Feb 01 2023 14:01:03 GMT-0800 (Pacific Standard Time)">22:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">IIRC, that was mentioned at one point.</td></tr>
  <tr class="msg" id="L650"><td class="ts-cell"><a class="ts" href="#L650" alt="Wed Feb 01 2023 14:01:27 GMT-0800 (Pacific Standard Time)">22:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">this feels like a garbage in garbage out sort of situation, trying to create meaning from chaos</td></tr>
  <tr class="msg" id="L651"><td class="ts-cell"><a class="ts" href="#L651" alt="Wed Feb 01 2023 14:02:01 GMT-0800 (Pacific Standard Time)">22:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">did typescript actually ship the new decorator impl at this point</td></tr>
  <tr class="msg" id="L652"><td class="ts-cell"><a class="ts" href="#L652" alt="Wed Feb 01 2023 14:04:00 GMT-0800 (Pacific Standard Time)">22:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">We talked about the <code>return</code> thing back in 2018 as well: <a href="https://github.com/tc39/proposal-decorators/issues/69#issuecomment-429202746">https://github.com/tc39/proposal-decorators/issues/69#issuecomment-429202746</a></td></tr>
  <tr class="msg" id="L653"><td class="ts-cell"><a class="ts" href="#L653" alt="Wed Feb 01 2023 14:04:30 GMT-0800 (Pacific Standard Time)">22:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">In our 5.0 beta, yes, but there are a few moving pieces still that we're trying to resolve this meeting.</td></tr>
  <tr class="msg" id="L654"><td class="ts-cell"><a class="ts" href="#L654" alt="Wed Feb 01 2023 14:05:04 GMT-0800 (Pacific Standard Time)">22:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> lol that is a previously unmentioned fourth option, i guess</blockquote></mx-reply>Mentioned here: <a href="https://github.com/tc39/proposal-decorators/issues/69#issuecomment-429490497">https://github.com/tc39/proposal-decorators/issues/69#issuecomment-429490497</a></td></tr>
  <tr class="msg" id="L655"><td class="ts-cell"><a class="ts" href="#L655" alt="Wed Feb 01 2023 14:10:06 GMT-0800 (Pacific Standard Time)">22:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">maybe we can yeet this before anyone starts writing code with it 😄</td></tr>
  <tr class="msg" id="L656"><td class="ts-cell"><a class="ts" href="#L656" alt="Wed Feb 01 2023 14:11:07 GMT-0800 (Pacific Standard Time)">22:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i mean that's actually reasonable in that it would leave the question open and remove any time crunch</td></tr>
  <tr class="msg" id="L657"><td class="ts-cell"><a class="ts" href="#L657" alt="Wed Feb 01 2023 14:11:45 GMT-0800 (Pacific Standard Time)">22:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">but it would still cause all the same churn that the TS folks don't want</td></tr>
  <tr class="msg" id="L658"><td class="ts-cell"><a class="ts" href="#L658" alt="Wed Feb 01 2023 14:17:19 GMT-0800 (Pacific Standard Time)">22:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i will need to read through those threads to understand why we want to allow it in the first place</td></tr>
  <tr class="msg" id="L659"><td class="ts-cell"><a class="ts" href="#L659" alt="Wed Feb 01 2023 14:36:21 GMT-0800 (Pacific Standard Time)">22:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">it doesn't seem like any super strong motivation for this was given lol</td></tr>
  <tr class="msg" id="L660"><td class="ts-cell"><a class="ts" href="#L660" alt="Wed Feb 01 2023 14:43:05 GMT-0800 (Pacific Standard Time)">22:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">if i'm not around tomorrow during the discussion can someone mention just not allowing this at all</td></tr>
  <tr class="msg" id="L661"><td class="ts-cell"><a class="ts" href="#L661" alt="Wed Feb 01 2023 14:54:23 GMT-0800 (Pacific Standard Time)">22:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> if i'm not around tomorrow during the discussion can someone mention just not allowing this at all</blockquote></mx-reply>Can you clarify what you mean by "this" in both of the two comments above? Not allowing this change? Not allowing decorators+export in either order?</td></tr>
  <tr class="msg" id="L662"><td class="ts-cell"><a class="ts" href="#L662" alt="Wed Feb 01 2023 14:54:41 GMT-0800 (Pacific Standard Time)">22:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">the latter</td></tr>
  <tr class="msg" id="L663"><td class="ts-cell"><a class="ts" href="#L663" alt="Wed Feb 01 2023 14:55:18 GMT-0800 (Pacific Standard Time)">22:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I'm sure someone will bring it up, but it certainly doesn't solve our motivation for bringing this back to plenary.</td></tr>
  <tr class="msg" id="L664"><td class="ts-cell"><a class="ts" href="#L664" alt="Wed Feb 01 2023 14:55:43 GMT-0800 (Pacific Standard Time)">22:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">I wasn't able to find motivation for why we want it in the first place, so it seems a lot simpler to cut it out entirely </td></tr>
  <tr class="msg" id="L665"><td class="ts-cell"><a class="ts" href="#L665" alt="Wed Feb 01 2023 14:56:06 GMT-0800 (Pacific Standard Time)">22:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">well I found one comment from Waldemar that seemed against not having it at all</td></tr>
  <tr class="msg" id="L666"><td class="ts-cell"><a class="ts" href="#L666" alt="Wed Feb 01 2023 14:56:23 GMT-0800 (Pacific Standard Time)">22:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">but it didn't include a reason</td></tr>
  <tr class="msg" id="L667"><td class="ts-cell"><a class="ts" href="#L667" alt="Wed Feb 01 2023 14:56:26 GMT-0800 (Pacific Standard Time)">22:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Not being to decorate an exported class all at once isn't a great developer experience, especially if you compare this to similar capabilities in other languages.</td></tr>
  <tr class="msg" id="L668"><td class="ts-cell"><a class="ts" href="#L668" alt="Wed Feb 01 2023 14:57:13 GMT-0800 (Pacific Standard Time)">22:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">you can export it, you just have to use the separate export declaration </td></tr>
  <tr class="msg" id="L669"><td class="ts-cell"><a class="ts" href="#L669" alt="Wed Feb 01 2023 15:02:33 GMT-0800 (Pacific Standard Time)">23:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">While it isn't an outcome I'd prefer, that was an outcome I suggested since it would allow us to break out this concern from the main proposal and pursue it separately. It would still require a code mod, unfortunately, but that impact might be somewhat lessened by the fact there are many TS projects that can't switch to native decorators due to the lack of parameter decorators (which I plan to propose as a follow up this year), the inability to decorate an entangled pair of <code>get</code>/<code>set</code> methods (which would be solved by the Grouped and Auto-Accessors proposal), or the inability to register a static extra initializer from a non-static member. Its possible we could resolve this separately by the time those proposals reach Stage 3 and potentially avoid a code mod as well if the ordering is consistent.</td></tr>
  <tr class="msg" id="L670"><td class="ts-cell"><a class="ts" href="#L670" alt="Wed Feb 01 2023 15:03:43 GMT-0800 (Pacific Standard Time)">23:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">personally I don't think it should even be pursued as a followon but at the very least it seems like giving more time is reasonable </td></tr>
  <tr class="msg" id="L671"><td class="ts-cell"><a class="ts" href="#L671" alt="Wed Feb 01 2023 15:03:56 GMT-0800 (Pacific Standard Time)">23:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">🤷‍♂️ smth for committee to discuss I guess</td></tr>
  <tr class="msg" id="L672"><td class="ts-cell"><a class="ts" href="#L672" alt="Wed Feb 01 2023 15:22:55 GMT-0800 (Pacific Standard Time)">23:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">I think it is important to allow decorated classes to be exported… our language features should generally compose</td></tr>

</tbody></table></div></div></div>
</body></html>