<!DOCTYPE html><html><head>
  <title>TC39 Delegates on 2024-10-10</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "TC39 Delegates";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">TC39 Delegates<br>2024-10-10<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2024-10-09" class="nav-link"><span>prev</span></a>
<a href="2024-10-11" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search TC39 Delegates">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed Oct 09 2024 18:00:53 GMT-0700 (Pacific Daylight Time)">01:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">yulia</span>: <span class="nick-4">Ashley Claymore</span> <span class="nick-13">Rob Palmer</span> this is what I was referring to <a href="https://firefox-source-docs.mozilla.org/devtools-user/custom_formatters/index.html">https://firefox-source-docs.mozilla.org/devtools-user/custom_formatters/index.html</a></td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Oct 09 2024 18:03:09 GMT-0700 (Pacific Daylight Time)">01:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">heck, added 2022. nice</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed Oct 09 2024 18:06:15 GMT-0700 (Pacific Daylight Time)">01:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@msaboff:matrix.org">msaboff</span>&gt;</div></td><td class="msg-cell">Add your name, etc to today's notes.</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Oct 09 2024 18:10:52 GMT-0700 (Pacific Daylight Time)">01:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">I really like Mark‚Äôs thing of recording and posting his presentations. It‚Äôd be great if we can make this an option for presenters all the time, and post the presentations to a TC39 YouTube channel, for presenters who want it.</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Oct 09 2024 18:12:04 GMT-0700 (Pacific Daylight Time)">01:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@abotella:igalia.com">Andreu Botella (at TC39, üïê JST)</span>&gt;</div></td><td class="msg-cell">would that make it harder to remove sections from the notes, since the video would also need to be edited?</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Oct 09 2024 18:12:31 GMT-0700 (Pacific Daylight Time)">01:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">yes, but we only very rarely do that, and mostly for entire items rather than small parts of a presentation</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Oct 09 2024 18:12:59 GMT-0700 (Pacific Daylight Time)">01:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Strings will deoptimize pretty quickly once you store non-utf8 bytes</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed Oct 09 2024 18:13:14 GMT-0700 (Pacific Daylight Time)">01:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">And assembling them byte by byte is not very fast</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed Oct 09 2024 18:13:59 GMT-0700 (Pacific Daylight Time)">01:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@abotella:igalia.com">Andreu Botella (at TC39, üïê JST)</span>&gt;</div></td><td class="msg-cell">In typical implementations, I don't think that's true, since all engines have Latin-1 and UTF-16 representations, but not UTF-8</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed Oct 09 2024 18:14:01 GMT-0700 (Pacific Daylight Time)">01:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@canadahonk:matrix.org">canadahonk</span>&gt;</div></td><td class="msg-cell">used strings personally before and it is not nice. works but :/</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed Oct 09 2024 18:15:44 GMT-0700 (Pacific Daylight Time)">01:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>In typical implementations, I don't think that's true, since all engines have Latin-1 and UTF-16 representations, but not UTF-8</blockquote></mx-reply>Is V8‚Äôs one-byte string Latin1? When I wrote the UTF-8 parser, it would create 2 byte strings once you went over 0x80</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed Oct 09 2024 18:16:09 GMT-0700 (Pacific Daylight Time)">01:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I really like Mark‚Äôs thing of recording and posting his presentations. It‚Äôd be great if we can make this an option for presenters all the time, and post the presentations to a TC39 YouTube channel, for presenters who want it.</blockquote></mx-reply>cc <span class="nick-6">Aki</span></td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed Oct 09 2024 18:16:11 GMT-0700 (Pacific Daylight Time)">01:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">Also you can't build a real TypedArray with a string backing, so might as well shim it with a mutable array buffer copy</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Wed Oct 09 2024 18:16:12 GMT-0700 (Pacific Daylight Time)">01:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@abotella:igalia.com">Andreu Botella (at TC39, üïê JST)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Is V8‚Äôs one-byte string Latin1? When I wrote the UTF-8 parser, it would create 2 byte strings once you went over 0x80</blockquote></mx-reply>huh, that was not my understanding</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed Oct 09 2024 18:17:05 GMT-0700 (Pacific Daylight Time)">01:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@abotella:igalia.com">Andreu Botella (at TC39, üïê JST)</span>&gt;</div></td><td class="msg-cell">a Latin-1 string representation is identical to a byte array, where the Unicode character values would just be the byte values</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed Oct 09 2024 18:19:34 GMT-0700 (Pacific Daylight Time)">01:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@marjakh:matrix.org">Marja H√∂ltt√§</span>&gt;</div></td><td class="msg-cell">v8 has two types of strings, one-byte (latin1) and two-byte (not quite utf-16 but ucs... something... maybe ucs-2)</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Wed Oct 09 2024 18:20:43 GMT-0700 (Pacific Daylight Time)">01:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@marjakh:matrix.org">Marja H√∂ltt√§</span>&gt;</div></td><td class="msg-cell">and interestingly, it also has an utf-8 decoder which is used during streaming parsing, it can do stuff like pause mid-character if we need to wait for more data from the network. so in that case we don't use chromium's utf-8 decoder but our own</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Wed Oct 09 2024 18:22:39 GMT-0700 (Pacific Daylight Time)">01:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@abotella:igalia.com">Andreu Botella (at TC39, üïê JST)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> v8 has two types of strings, one-byte (latin1) and two-byte (not quite utf-16 but ucs... something... maybe ucs-2)</blockquote></mx-reply>I don't know if WTF-16 is the right term for that (<a href="https://simonsapin.github.io/wtf-8/#ill-formed-utf-16">https://simonsapin.github.io/wtf-8/#ill-formed-utf-16</a>)</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Wed Oct 09 2024 18:26:32 GMT-0700 (Pacific Daylight Time)">01:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">please add your name to the attendees list of today's notes doc</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Wed Oct 09 2024 18:26:37 GMT-0700 (Pacific Daylight Time)">01:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@gibson042:matrix.org">Richard Gibson</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I don't know if WTF-16 is the right term for that (<a href="https://simonsapin.github.io/wtf-8/#ill-formed-utf-16">https://simonsapin.github.io/wtf-8/#ill-formed-utf-16</a>)</blockquote></mx-reply>yeah, pretty much</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Wed Oct 09 2024 18:28:25 GMT-0700 (Pacific Daylight Time)">01:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>a Latin-1 string representation is identical to a byte array, where the Unicode character values would just be the byte values</blockquote></mx-reply>Verified, you are correct. If you stay below 0xff, you‚Äôll keep <code data-md="`">ONE_BYTE_STRING</code> representation.</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Wed Oct 09 2024 18:28:40 GMT-0700 (Pacific Daylight Time)">01:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>and interestingly, it also has an utf-8 decoder which is used during streaming parsing, it can do stuff like pause mid-character if we need to wait for more data from the network. so in that case we don't use chromium's utf-8 decoder but our own</blockquote></mx-reply>I wrote that!</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Wed Oct 09 2024 18:29:30 GMT-0700 (Pacific Daylight Time)">01:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">if you do it in the next 10 seconds i don't have to redact the logs</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Wed Oct 09 2024 18:29:39 GMT-0700 (Pacific Daylight Time)">01:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">yay</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Wed Oct 09 2024 18:29:39 GMT-0700 (Pacific Daylight Time)">01:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@marjakh:matrix.org">Marja H√∂ltt√§</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Justin Ridgewell</span>: no, not that one. maybe there is another one you wrote :)</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Wed Oct 09 2024 18:29:46 GMT-0700 (Pacific Daylight Time)">01:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">üôá‚Äç‚ôÇÔ∏è</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Wed Oct 09 2024 18:29:55 GMT-0700 (Pacific Daylight Time)">01:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@marjakh:matrix.org">Marja H√∂ltt√§</span>&gt;</div></td><td class="msg-cell">too many utf-8 decoders</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Wed Oct 09 2024 18:30:02 GMT-0700 (Pacific Daylight Time)">01:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@canadahonk:matrix.org">canadahonk</span>&gt;</div></td><td class="msg-cell">sorry üôà</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Wed Oct 09 2024 18:30:08 GMT-0700 (Pacific Daylight Time)">01:30</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span></div></td><td class="msg-cell">shows <code>canadahonk</code> to the shamecube</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Wed Oct 09 2024 18:30:24 GMT-0700 (Pacific Daylight Time)">01:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">we need regular reminders that this is a public channel</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Wed Oct 09 2024 18:30:46 GMT-0700 (Pacific Daylight Time)">01:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote><span class="nick-1">Justin Ridgewell</span>: no, not that one. maybe there is another one you wrote :)</blockquote></mx-reply><a href="https://source.chromium.org/chromium/chromium/src/+/main:v8/src/third_party/utf8-decoder/;l=1;bpv=1;bpt=0">https://source.chromium.org/chromium/chromium/src/+/main:v8/src/third_party/utf8-decoder/;l=1;bpv=1;bpt=0</a> ?</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Wed Oct 09 2024 18:32:12 GMT-0700 (Pacific Daylight Time)">01:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">2017-12-11, nice</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Wed Oct 09 2024 18:32:19 GMT-0700 (Pacific Daylight Time)">01:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@marjakh:matrix.org">Marja H√∂ltt√§</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Justin Ridgewell</span>: nope, this one: <a href="https://source.chromium.org/chromium/chromium/src/+/main:v8/src/parsing/scanner-character-streams.cc;l=507">https://source.chromium.org/chromium/chromium/src/+/main:v8/src/parsing/scanner-character-streams.cc;l=507</a>  .. and... i wrote it :D</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Wed Oct 09 2024 18:32:42 GMT-0700 (Pacific Daylight Time)">01:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@marjakh:matrix.org">Marja H√∂ltt√§</span>&gt;</div></td><td class="msg-cell">we can unify these if your version can also pause mid-character to wait for more data</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Wed Oct 09 2024 18:32:57 GMT-0700 (Pacific Daylight Time)">01:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: the notes link made it to the archive üò≠üò≠üò≠</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Wed Oct 09 2024 18:33:31 GMT-0700 (Pacific Daylight Time)">01:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">sadness</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Wed Oct 09 2024 18:35:09 GMT-0700 (Pacific Daylight Time)">01:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>we can unify these if your version can also pause mid-character to wait for more data</blockquote></mx-reply>That‚Äôs just a small wrapper around my code: <a href="https://source.chromium.org/chromium/chromium/src/+/main:v8/src/parsing/scanner-character-streams.cc;l=622-623;drc=a9777d919551975bd1208221a8ba8c012c03bc56">https://source.chromium.org/chromium/chromium/src/+/main:v8/src/parsing/scanner-character-streams.cc;l=622-623;drc=a9777d919551975bd1208221a8ba8c012c03bc56</a></td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Wed Oct 09 2024 18:35:09 GMT-0700 (Pacific Daylight Time)">01:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@marjakh:matrix.org">Marja H√∂ltt√§</span>&gt;</div></td><td class="msg-cell">based on very quick googling it seems that the difference between UCS-2 and UTF-16 is more than treating the ill-formed strings but my knowledge level is getting very shaky here</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Wed Oct 09 2024 18:35:42 GMT-0700 (Pacific Daylight Time)">01:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@marjakh:matrix.org">Marja H√∂ltt√§</span>&gt;</div></td><td class="msg-cell">ahh it has been rewritten since, okay that's good, i think 2 utf-8 decoders are enough for chromium</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Wed Oct 09 2024 18:35:58 GMT-0700 (Pacific Daylight Time)">01:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">UCS-2 allows lone surrogates, UTF-16 doesn't</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Wed Oct 09 2024 18:36:03 GMT-0700 (Pacific Daylight Time)">01:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">They‚Äôre the same otherwise</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Wed Oct 09 2024 18:38:17 GMT-0700 (Pacific Daylight Time)">01:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@marjakh:matrix.org">Marja H√∂ltt√§</span>&gt;</div></td><td class="msg-cell">google says "UCS-2 is fixed width, UTF-16 is variable width with a minimum of two bytes and a maximum of four bytes." &lt;&lt; what about this part? no idea what v8 does here</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Wed Oct 09 2024 18:38:24 GMT-0700 (Pacific Daylight Time)">01:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">A related interesting API proposal <a href="https://gist.github.com/domenic/a9343fa787ba54b4ba3a60882c49cc32?permalink_comment_id=4394695#gistcomment-4394695">https://gist.github.com/domenic/a9343fa787ba54b4ba3a60882c49cc32?permalink_comment_id=4394695#gistcomment-4394695</a></td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Wed Oct 09 2024 18:38:55 GMT-0700 (Pacific Daylight Time)">01:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">Can anyone dialled in share the TCQ on Teams?</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Wed Oct 09 2024 18:39:20 GMT-0700 (Pacific Daylight Time)">01:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">It was up for a second</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Wed Oct 09 2024 18:39:41 GMT-0700 (Pacific Daylight Time)">01:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">IMO it‚Äôs more parsimonious to have a separate method</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Wed Oct 09 2024 18:40:06 GMT-0700 (Pacific Daylight Time)">01:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>google says "UCS-2 is fixed width, UTF-16 is variable width with a minimum of two bytes and a maximum of four bytes." &lt;&lt; what about this part? no idea what v8 does here</blockquote></mx-reply>That‚Äôs if you want to combine surrogates into a single UTF char (u32). The streams themselves are the same.</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Wed Oct 09 2024 18:41:13 GMT-0700 (Pacific Daylight Time)">01:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">I think the meaning of ucs2 has changed over time. It was designed in the days when all code points fit in 16 bits. Since then, it has been redefined to mean, potentially ill-formed utf16</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Wed Oct 09 2024 18:41:59 GMT-0700 (Pacific Daylight Time)">01:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Yah, basically that ^</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Wed Oct 09 2024 18:42:12 GMT-0700 (Pacific Daylight Time)">01:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">JS generally does not check for well-formed-ness so you could (informally) say it works in the ucs2 encoding rather than utf16</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Wed Oct 09 2024 18:46:11 GMT-0700 (Pacific Daylight Time)">01:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@marjakh:matrix.org">Marja H√∂ltt√§</span>&gt;</div></td><td class="msg-cell">oh, and wtf-16 says it's the name kinda corresponding to that evolved usage of ucs-2. yess, not confusing at all. okay.</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Wed Oct 09 2024 18:50:09 GMT-0700 (Pacific Daylight Time)">01:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@marjakh:matrix.org">Marja H√∂ltt√§</span>&gt;</div></td><td class="msg-cell">ok how did we end up here? what does "Strings will deoptimize pretty quickly once you store non-utf8 bytes" mean? one thing that's not great about onebyte vs twobyte is that if you have one non-onebyte character in your string, the whole string has to be stored as a twobyte and it's slightly unnecessary overhead.</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Wed Oct 09 2024 18:50:56 GMT-0700 (Pacific Daylight Time)">01:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@marjakh:matrix.org">Marja H√∂ltt√§</span>&gt;</div></td><td class="msg-cell">(but i don't see a way around it in the current world unless we add utf-8 strings and... i don't think anyone wants to... strings are incredibly complex as is)</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Wed Oct 09 2024 18:52:58 GMT-0700 (Pacific Daylight Time)">01:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">@Marja H√∂ltt√§</span> ropes of mixed 1-byte and 2-byte sections</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Wed Oct 09 2024 18:53:41 GMT-0700 (Pacific Daylight Time)">01:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@marjakh:matrix.org">Marja H√∂ltt√§</span>&gt;</div></td><td class="msg-cell">true, could also do that!</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Wed Oct 09 2024 18:53:53 GMT-0700 (Pacific Daylight Time)">01:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">No I wasn‚Äôt talking about volatile read-only views on an underlying changing ArrayBuffer</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Wed Oct 09 2024 18:53:55 GMT-0700 (Pacific Daylight Time)">01:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>ok how did we end up here? what does "Strings will deoptimize pretty quickly once you store non-utf8 bytes" mean? one thing that's not great about onebyte vs twobyte is that if you have one non-onebyte character in your string, the whole string has to be stored as a twobyte and it's slightly unnecessary overhead.</blockquote></mx-reply>I mistakenly though that <code data-md="`">String.fromCharCode(0x80)</code> returned a 2-byte string representation</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Wed Oct 09 2024 18:54:19 GMT-0700 (Pacific Daylight Time)">01:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><code data-md="`">0x80</code> being an illegal UTF-8 lead byte</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Wed Oct 09 2024 18:55:01 GMT-0700 (Pacific Daylight Time)">01:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">You can construct strings in memory that holds any byte sequence, you just can‚Äôt transfer that string over the wire</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Wed Oct 09 2024 18:55:47 GMT-0700 (Pacific Daylight Time)">01:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">A UTF-8 parser on the other end will replace bad byte sequences with the Replacement Char</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Wed Oct 09 2024 18:56:31 GMT-0700 (Pacific Daylight Time)">01:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">I am also OK keeping the rw lock stuff outside of this proposal but I think it could make it more usable for certain cases, which could allow some more zero copy in practice. Not needed for the motivating embedded case though.</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Wed Oct 09 2024 18:57:15 GMT-0700 (Pacific Daylight Time)">01:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@abotella:igalia.com">Andreu Botella (at TC39, üïê JST)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> (but i don't see a way around it in the current world unless we add utf-8 strings and... i don't think anyone wants to... strings are incredibly complex as is)</blockquote></mx-reply>Some hosts work with UTF-8 strings and would benefit from not having to convert when making them into JS string primitives. Whether that is offset by the cost of adding UTF-8 strings to the engine is a different question though</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Wed Oct 09 2024 18:59:02 GMT-0700 (Pacific Daylight Time)">01:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">I am very happy that the wasm memory control stuff is getting attention</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Wed Oct 09 2024 19:00:35 GMT-0700 (Pacific Daylight Time)">02:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">I took a quick look, and it looks like it's basically trying to specify a full MMU ?</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Wed Oct 09 2024 19:01:02 GMT-0700 (Pacific Daylight Time)">02:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">it's a pretty open question but in the limit, yeah, systems people are gonna want full control</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Wed Oct 09 2024 19:01:10 GMT-0700 (Pacific Daylight Time)">02:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i haven't heard anything <em>too</em> concrete yet</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Wed Oct 09 2024 19:01:54 GMT-0700 (Pacific Daylight Time)">02:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">yeah i think they are still exploring quite a bit.</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Wed Oct 09 2024 19:03:03 GMT-0700 (Pacific Daylight Time)">02:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">I hope we get the capability to set up memory protection for the first page so I can get a segfault in Wasm for derefencing a null pointer</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Wed Oct 09 2024 19:04:45 GMT-0700 (Pacific Daylight Time)">02:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">As a... Unix user, I want my programs to SIGSEV, so th

bus error</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Wed Oct 09 2024 19:11:10 GMT-0700 (Pacific Daylight Time)">02:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">It would be really interesting to hear a presentation about how various approaches to polyfills work, since it seems to drive a lot of our designs</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Wed Oct 09 2024 19:15:07 GMT-0700 (Pacific Daylight Time)">02:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">In general it‚Äôs good to find reasons which could be motivating for others, but it also is interesting to learn what the proponents are motivated by.</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Wed Oct 09 2024 19:19:29 GMT-0700 (Pacific Daylight Time)">02:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Isn't the clamping just <code>value &amp; 256</code>?</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Wed Oct 09 2024 19:19:35 GMT-0700 (Pacific Daylight Time)">02:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">yeah i am confused</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Wed Oct 09 2024 19:19:39 GMT-0700 (Pacific Daylight Time)">02:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Or is there some other part that's not quite that?</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Wed Oct 09 2024 19:20:27 GMT-0700 (Pacific Daylight Time)">02:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>Isn't the clamping just <code>value &amp; 256</code>?</blockquote></mx-reply><code data-md="`">value &amp; 255</code></td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Wed Oct 09 2024 19:20:34 GMT-0700 (Pacific Daylight Time)">02:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Err sorry</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Wed Oct 09 2024 19:20:35 GMT-0700 (Pacific Daylight Time)">02:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Yeah</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Wed Oct 09 2024 19:20:57 GMT-0700 (Pacific Daylight Time)">02:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@abotella:igalia.com">Andreu Botella (at TC39, üïê JST)</span>&gt;</div></td><td class="msg-cell">or <code>value % 256</code></td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Wed Oct 09 2024 19:21:14 GMT-0700 (Pacific Daylight Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">That‚Äôs how normal uint8arrays work; I thought clamped was different</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Wed Oct 09 2024 19:21:41 GMT-0700 (Pacific Daylight Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">What if we added a Math.clamp method? I think that would be a broadly useful utility.</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Wed Oct 09 2024 19:21:56 GMT-0700 (Pacific Daylight Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">^CSS did, not us</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Wed Oct 09 2024 19:21:59 GMT-0700 (Pacific Daylight Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">right but what are we solving exactly rn?</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Wed Oct 09 2024 19:22:02 GMT-0700 (Pacific Daylight Time)">02:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">so the spec logic is <a href="https://tc39.es/ecma262/#sec-touint8clamp">https://tc39.es/ecma262/#sec-touint8clamp</a></td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Wed Oct 09 2024 19:22:24 GMT-0700 (Pacific Daylight Time)">02:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">if all those steps are just <code>value &amp; 255</code> then an editorial cleanup would certainly have helped :-)</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Wed Oct 09 2024 19:22:25 GMT-0700 (Pacific Daylight Time)">02:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">wait, why isn't that algorithm steps?</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Wed Oct 09 2024 19:22:32 GMT-0700 (Pacific Daylight Time)">02:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">you said it wans't described in algo steps</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Wed Oct 09 2024 19:22:40 GMT-0700 (Pacific Daylight Time)">02:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Is that clamping or does that allow overflow/underflow?</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Wed Oct 09 2024 19:22:41 GMT-0700 (Pacific Daylight Time)">02:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>if all those steps are just <code>value &amp; 255</code> then an editorial cleanup would certainly have helped :-)</blockquote></mx-reply>No, it won‚Äôt round</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Wed Oct 09 2024 19:22:44 GMT-0700 (Pacific Daylight Time)">02:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">yes, my mistake, it is algorithm steps</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Wed Oct 09 2024 19:22:58 GMT-0700 (Pacific Daylight Time)">02:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> right but what are we solving exactly rn?</blockquote></mx-reply>Is this asking about Math.clamp? That is just saving a couple lines of code, making everyday things slightly nicer. Also fine by me to not do.</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Wed Oct 09 2024 19:23:44 GMT-0700 (Pacific Daylight Time)">02:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">FYI we also didn't get a summary for the previous topic</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Wed Oct 09 2024 19:24:03 GMT-0700 (Pacific Daylight Time)">02:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">is math.clamp more general than the dataview methods? i'm not opposed to it, would be good to see which everyday things are being improved</td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Wed Oct 09 2024 19:24:22 GMT-0700 (Pacific Daylight Time)">02:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">i think the spec has a oneliner note using modulo</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Wed Oct 09 2024 19:24:24 GMT-0700 (Pacific Daylight Time)">02:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Wait sorry it's not <code>value &amp; 255</code> lol I'm too tired it's <code>if (number &gt; 255) return 255; if (number &lt; 0) return 0; return number;</code></td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Wed Oct 09 2024 19:24:27 GMT-0700 (Pacific Daylight Time)">02:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">wait taking a step back</td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Wed Oct 09 2024 19:24:28 GMT-0700 (Pacific Daylight Time)">02:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell"><a href="https://tc39.es/ecma262/#clamping">https://tc39.es/ecma262/#clamping</a></td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Wed Oct 09 2024 19:24:43 GMT-0700 (Pacific Daylight Time)">02:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">why did we add uint8clamp TAs to begin with?</td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Wed Oct 09 2024 19:24:47 GMT-0700 (Pacific Daylight Time)">02:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">something textures?</td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Wed Oct 09 2024 19:24:55 GMT-0700 (Pacific Daylight Time)">02:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">I think for textures/colors or something yeah</td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Wed Oct 09 2024 19:25:34 GMT-0700 (Pacific Daylight Time)">02:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>Wait sorry it's not <code>value &amp; 255</code> lol I'm too tired it's <code>if (number &gt; 255) return 255; if (number &lt; 0) return 0; return number;</code></blockquote></mx-reply>Ahh, I forgot about negaties. But you‚Äôre missing the rounding, too.</td></tr>
  <tr class="msg" id="L100"><td class="ts-cell"><a class="ts" href="#L100" alt="Wed Oct 09 2024 19:25:39 GMT-0700 (Pacific Daylight Time)">02:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@canadahonk:matrix.org">canadahonk</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> is math.clamp more general than the dataview methods? i'm not opposed to it, would be good to see which everyday things are being improved</blockquote></mx-reply>written it at least a few times for webapps in the past</td></tr>
  <tr class="msg" id="L101"><td class="ts-cell"><a class="ts" href="#L101" alt="Wed Oct 09 2024 19:25:42 GMT-0700 (Pacific Daylight Time)">02:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> is math.clamp more general than the dataview methods? i'm not opposed to it, would be good to see which everyday things are being improved</blockquote></mx-reply>Yeah it doesn‚Äôt really have to do with data views, it‚Äôs just like you give a min and max and return one of those if you are out of bounds</td></tr>
  <tr class="msg" id="L102"><td class="ts-cell"><a class="ts" href="#L102" alt="Wed Oct 09 2024 19:26:03 GMT-0700 (Pacific Daylight Time)">02:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">sure, that sounds fine</td></tr>
  <tr class="msg" id="L103"><td class="ts-cell"><a class="ts" href="#L103" alt="Wed Oct 09 2024 19:26:17 GMT-0700 (Pacific Daylight Time)">02:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> written it at least a few times for webapps in the past</blockquote></mx-reply>what was it for?</td></tr>
  <tr class="msg" id="L104"><td class="ts-cell"><a class="ts" href="#L104" alt="Wed Oct 09 2024 19:26:40 GMT-0700 (Pacific Daylight Time)">02:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">yulia</span>: I have code that could make use of consistent names for data view methods for the purpose of dynamic dispatch, were it to be rewritten to use dynamic dispatch: <a href="https://github.com/esfx/esfx/blob/main/packages/struct-type/src/internal/numbers.ts#L122-L133">https://github.com/esfx/esfx/blob/main/packages/struct-type/src/internal/numbers.ts#L122-L133</a> one data point may not necessarily be compelling, however.</td></tr>
  <tr class="msg" id="L105"><td class="ts-cell"><a class="ts" href="#L105" alt="Wed Oct 09 2024 19:26:57 GMT-0700 (Pacific Daylight Time)">02:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><p>here's my summary:</p>
<blockquote>
<ul>
<li>In order to advance, champion needs to provide use cases that are actually solved by the proposal; polyfilling is not solved by it.</li>
<li>Current proposal is get + set; based on future presented use cases, other alternatives may include ‚Äújust set‚Äù, or ‚Äújust a clamp helper‚Äù</li>
</ul>
</blockquote>
<p>lmk if i'm missing anything</p>
</td></tr>
  <tr class="msg" id="L106"><td class="ts-cell"><a class="ts" href="#L106" alt="Wed Oct 09 2024 19:27:13 GMT-0700 (Pacific Daylight Time)">02:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@canadahonk:matrix.org">canadahonk</span>&gt;</div></td><td class="msg-cell">there is a ~new math.clamp proposal that lacks a champion btw</td></tr>
  <tr class="msg" id="L107"><td class="ts-cell"><a class="ts" href="#L107" alt="Wed Oct 09 2024 19:27:27 GMT-0700 (Pacific Daylight Time)">02:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Yeah it doesn‚Äôt really have to do with data views, it‚Äôs just like you give a min and max and return one of those if you are out of bounds</blockquote></mx-reply>Math.clamp is nice but wouldn't give me the rounding i need</td></tr>
  <tr class="msg" id="L108"><td class="ts-cell"><a class="ts" href="#L108" alt="Wed Oct 09 2024 19:27:49 GMT-0700 (Pacific Daylight Time)">02:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@canadahonk:matrix.org">canadahonk</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> there is a ~new math.clamp proposal that lacks a champion btw</blockquote></mx-reply><a href="https://github.com/Richienb/proposal-math-clamp">https://github.com/Richienb/proposal-math-clamp</a> which I may if no one else wants :^)</td></tr>
  <tr class="msg" id="L109"><td class="ts-cell"><a class="ts" href="#L109" alt="Wed Oct 09 2024 19:28:05 GMT-0700 (Pacific Daylight Time)">02:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">if you had math.clamp you could use math.floor with it, no?</td></tr>
  <tr class="msg" id="L110"><td class="ts-cell"><a class="ts" href="#L110" alt="Wed Oct 09 2024 19:28:58 GMT-0700 (Pacific Daylight Time)">02:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote><a href="https://github.com/Richienb/proposal-math-clamp">https://github.com/Richienb/proposal-math-clamp</a> which I may if no one else wants :^)</blockquote></mx-reply>discourse thread: <a href="https://es.discourse.group/t/math-clamp-strawman/1059">https://es.discourse.group/t/math-clamp-strawman/1059</a></td></tr>
  <tr class="msg" id="L111"><td class="ts-cell"><a class="ts" href="#L111" alt="Wed Oct 09 2024 19:29:04 GMT-0700 (Pacific Daylight Time)">02:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">and ceil if negative, sure. Math.clamp helps me compose the logic for sure.</td></tr>
  <tr class="msg" id="L112"><td class="ts-cell"><a class="ts" href="#L112" alt="Wed Oct 09 2024 19:29:04 GMT-0700 (Pacific Daylight Time)">02:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><code>Number.setFPUControlWord</code> so we can change the rounding mode to round half to even</td></tr>
  <tr class="msg" id="L113"><td class="ts-cell"><a class="ts" href="#L113" alt="Wed Oct 09 2024 19:31:57 GMT-0700 (Pacific Daylight Time)">02:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Is <code>Math.clamp</code> sufficiently more powerful than <code>Math.min(Math.max(x, lower), upper)</code>?</td></tr>
  <tr class="msg" id="L114"><td class="ts-cell"><a class="ts" href="#L114" alt="Wed Oct 09 2024 19:32:36 GMT-0700 (Pacific Daylight Time)">02:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">It's sufficiently easier to get right the first time</td></tr>
  <tr class="msg" id="L115"><td class="ts-cell"><a class="ts" href="#L115" alt="Wed Oct 09 2024 19:33:10 GMT-0700 (Pacific Daylight Time)">02:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@canadahonk:matrix.org">canadahonk</span>&gt;</div></td><td class="msg-cell">also something something performance probably better?</td></tr>
  <tr class="msg" id="L116"><td class="ts-cell"><a class="ts" href="#L116" alt="Wed Oct 09 2024 19:33:27 GMT-0700 (Pacific Daylight Time)">02:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Ehh, I think I'd screw up the argument order too though</td></tr>
  <tr class="msg" id="L117"><td class="ts-cell"><a class="ts" href="#L117" alt="Wed Oct 09 2024 19:33:37 GMT-0700 (Pacific Daylight Time)">02:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">On 8 hours of sleep over 3 days</td></tr>
  <tr class="msg" id="L118"><td class="ts-cell"><a class="ts" href="#L118" alt="Wed Oct 09 2024 19:33:46 GMT-0700 (Pacific Daylight Time)">02:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Performance is probably the same</td></tr>
  <tr class="msg" id="L119"><td class="ts-cell"><a class="ts" href="#L119" alt="Wed Oct 09 2024 19:33:56 GMT-0700 (Pacific Daylight Time)">02:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@canadahonk:matrix.org">canadahonk</span>&gt;</div></td><td class="msg-cell">2 func calls vs 1?</td></tr>
  <tr class="msg" id="L120"><td class="ts-cell"><a class="ts" href="#L120" alt="Wed Oct 09 2024 19:34:12 GMT-0700 (Pacific Daylight Time)">02:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">It would be inlined and optimized in most JIT engines anyway</td></tr>
  <tr class="msg" id="L121"><td class="ts-cell"><a class="ts" href="#L121" alt="Wed Oct 09 2024 19:35:21 GMT-0700 (Pacific Daylight Time)">02:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I imagine signature help in an IDE is more reliable for something that reads <code>Math.clamp(value: number, min: number, max: number)</code> then trying to figure out the correct order for <code>Math.min(x: number, y: number)</code> and <code>Math.max(x: number, y: number)</code>.</td></tr>
  <tr class="msg" id="L122"><td class="ts-cell"><a class="ts" href="#L122" alt="Wed Oct 09 2024 19:35:27 GMT-0700 (Pacific Daylight Time)">02:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Yeah I don‚Äôt think this is a thing to decide on perf but rather developer mental model</td></tr>
  <tr class="msg" id="L123"><td class="ts-cell"><a class="ts" href="#L123" alt="Wed Oct 09 2024 19:35:50 GMT-0700 (Pacific Daylight Time)">02:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@canadahonk:matrix.org">canadahonk</span>&gt;</div></td><td class="msg-cell">agree, but I mean it definitely wouldn't be a downside at least, only possible benefit (afaik)</td></tr>
  <tr class="msg" id="L124"><td class="ts-cell"><a class="ts" href="#L124" alt="Wed Oct 09 2024 19:37:59 GMT-0700 (Pacific Daylight Time)">02:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">clamp seems nice, especially combining it with round/floor</td></tr>
  <tr class="msg" id="L125"><td class="ts-cell"><a class="ts" href="#L125" alt="Wed Oct 09 2024 19:51:56 GMT-0700 (Pacific Daylight Time)">02:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">liquid volume remains solidly imperial for cooking, in the US</td></tr>
  <tr class="msg" id="L126"><td class="ts-cell"><a class="ts" href="#L126" alt="Wed Oct 09 2024 19:52:11 GMT-0700 (Pacific Daylight Time)">02:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">also gasoline and milk</td></tr>
  <tr class="msg" id="L127"><td class="ts-cell"><a class="ts" href="#L127" alt="Wed Oct 09 2024 19:52:12 GMT-0700 (Pacific Daylight Time)">02:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> liquid volume remains solidly imperial for cooking, in the US</blockquote></mx-reply>unless you are baking</td></tr>
  <tr class="msg" id="L128"><td class="ts-cell"><a class="ts" href="#L128" alt="Wed Oct 09 2024 19:52:39 GMT-0700 (Pacific Daylight Time)">02:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">hm, maybe i don't bake with the newest recipes, but i still see them all in imperial</td></tr>
  <tr class="msg" id="L129"><td class="ts-cell"><a class="ts" href="#L129" alt="Wed Oct 09 2024 19:52:40 GMT-0700 (Pacific Daylight Time)">02:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> also gasoline and milk</blockquote></mx-reply>Or buying soda</td></tr>
  <tr class="msg" id="L130"><td class="ts-cell"><a class="ts" href="#L130" alt="Wed Oct 09 2024 19:52:51 GMT-0700 (Pacific Daylight Time)">02:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">wait what</td></tr>
  <tr class="msg" id="L131"><td class="ts-cell"><a class="ts" href="#L131" alt="Wed Oct 09 2024 19:52:56 GMT-0700 (Pacific Daylight Time)">02:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">liter is an imperial unit?</td></tr>
  <tr class="msg" id="L132"><td class="ts-cell"><a class="ts" href="#L132" alt="Wed Oct 09 2024 19:53:06 GMT-0700 (Pacific Daylight Time)">02:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">soda is non-imperial</td></tr>
  <tr class="msg" id="L133"><td class="ts-cell"><a class="ts" href="#L133" alt="Wed Oct 09 2024 19:53:12 GMT-0700 (Pacific Daylight Time)">02:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">gas/milk is imperial</td></tr>
  <tr class="msg" id="L134"><td class="ts-cell"><a class="ts" href="#L134" alt="Wed Oct 09 2024 19:53:13 GMT-0700 (Pacific Daylight Time)">02:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">No, I'm saying soda is not generally measured in imperial units</td></tr>
  <tr class="msg" id="L135"><td class="ts-cell"><a class="ts" href="#L135" alt="Wed Oct 09 2024 19:53:14 GMT-0700 (Pacific Daylight Time)">02:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">oh i got it reversed</td></tr>
  <tr class="msg" id="L136"><td class="ts-cell"><a class="ts" href="#L136" alt="Wed Oct 09 2024 19:53:17 GMT-0700 (Pacific Daylight Time)">02:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">right</td></tr>
  <tr class="msg" id="L137"><td class="ts-cell"><a class="ts" href="#L137" alt="Wed Oct 09 2024 19:53:22 GMT-0700 (Pacific Daylight Time)">02:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">you don't use volume in baking</td></tr>
  <tr class="msg" id="L138"><td class="ts-cell"><a class="ts" href="#L138" alt="Wed Oct 09 2024 19:53:38 GMT-0700 (Pacific Daylight Time)">02:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">what a plot twist that soda is an unamerican drink</td></tr>
  <tr class="msg" id="L139"><td class="ts-cell"><a class="ts" href="#L139" alt="Wed Oct 09 2024 19:53:46 GMT-0700 (Pacific Daylight Time)">02:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">like a teaspoon of oil or something?</td></tr>
  <tr class="msg" id="L140"><td class="ts-cell"><a class="ts" href="#L140" alt="Wed Oct 09 2024 19:54:13 GMT-0700 (Pacific Daylight Time)">02:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">a cup of water, etc</td></tr>
  <tr class="msg" id="L141"><td class="ts-cell"><a class="ts" href="#L141" alt="Wed Oct 09 2024 19:54:14 GMT-0700 (Pacific Daylight Time)">02:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> you don't use volume in baking</blockquote></mx-reply>I suppose it's by weight if you're using a kitchen scale for measuring</td></tr>
  <tr class="msg" id="L142"><td class="ts-cell"><a class="ts" href="#L142" alt="Wed Oct 09 2024 19:54:22 GMT-0700 (Pacific Daylight Time)">02:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">I think the british baking show has rubbed off on americans and now they all use metric units when baking</td></tr>
  <tr class="msg" id="L143"><td class="ts-cell"><a class="ts" href="#L143" alt="Wed Oct 09 2024 19:54:39 GMT-0700 (Pacific Daylight Time)">02:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">it's always by weight if you're doing it right...  but it does help that 1ml === 1g</td></tr>
  <tr class="msg" id="L144"><td class="ts-cell"><a class="ts" href="#L144" alt="Wed Oct 09 2024 19:54:48 GMT-0700 (Pacific Daylight Time)">02:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">maybe yall are doing fancier baking than me, but ive not yet heard americans using metric for baking</td></tr>
  <tr class="msg" id="L145"><td class="ts-cell"><a class="ts" href="#L145" alt="Wed Oct 09 2024 19:54:48 GMT-0700 (Pacific Daylight Time)">02:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">for water</td></tr>
  <tr class="msg" id="L146"><td class="ts-cell"><a class="ts" href="#L146" alt="Wed Oct 09 2024 19:54:52 GMT-0700 (Pacific Daylight Time)">02:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">yes</td></tr>
  <tr class="msg" id="L147"><td class="ts-cell"><a class="ts" href="#L147" alt="Wed Oct 09 2024 19:55:47 GMT-0700 (Pacific Daylight Time)">02:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I'm finding myself using metric more and more as I venture deeper and deeper into the 3D printing world</td></tr>
  <tr class="msg" id="L148"><td class="ts-cell"><a class="ts" href="#L148" alt="Wed Oct 09 2024 19:55:47 GMT-0700 (Pacific Daylight Time)">02:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">if you see a baking recipe and it's giving volume measurements, throw it in the trash</td></tr>
  <tr class="msg" id="L149"><td class="ts-cell"><a class="ts" href="#L149" alt="Wed Oct 09 2024 19:57:12 GMT-0700 (Pacific Daylight Time)">02:57</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span></div></td><td class="msg-cell">nervously glances at literally every cake mix box in safeway</td></tr>
  <tr class="msg" id="L150"><td class="ts-cell"><a class="ts" href="#L150" alt="Wed Oct 09 2024 19:57:49 GMT-0700 (Pacific Daylight Time)">02:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">cake mix?!  <code>/scoff</code></td></tr>
  <tr class="msg" id="L151"><td class="ts-cell"><a class="ts" href="#L151" alt="Wed Oct 09 2024 19:57:54 GMT-0700 (Pacific Daylight Time)">02:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">A BOX?!</td></tr>
  <tr class="msg" id="L152"><td class="ts-cell"><a class="ts" href="#L152" alt="Wed Oct 09 2024 19:57:59 GMT-0700 (Pacific Daylight Time)">02:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">jesus</td></tr>
  <tr class="msg" id="L153"><td class="ts-cell"><a class="ts" href="#L153" alt="Wed Oct 09 2024 19:58:09 GMT-0700 (Pacific Daylight Time)">02:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">what, you want your cake mix in a paper bag?</td></tr>
  <tr class="msg" id="L154"><td class="ts-cell"><a class="ts" href="#L154" alt="Wed Oct 09 2024 19:58:42 GMT-0700 (Pacific Daylight Time)">02:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">unserious cake mixers itc</td></tr>
  <tr class="msg" id="L155"><td class="ts-cell"><a class="ts" href="#L155" alt="Wed Oct 09 2024 20:00:41 GMT-0700 (Pacific Daylight Time)">03:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">wait what else would cake mix come in but a box</td></tr>
  <tr class="msg" id="L156"><td class="ts-cell"><a class="ts" href="#L156" alt="Wed Oct 09 2024 20:01:08 GMT-0700 (Pacific Daylight Time)">03:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@kriskowal:aelf.land">kriskowal</span>&gt;</div></td><td class="msg-cell">50# sacks</td></tr>
  <tr class="msg" id="L157"><td class="ts-cell"><a class="ts" href="#L157" alt="Wed Oct 09 2024 20:01:09 GMT-0700 (Pacific Daylight Time)">03:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i mean it's bagged inside the box ofc, like cereal</td></tr>
  <tr class="msg" id="L158"><td class="ts-cell"><a class="ts" href="#L158" alt="Wed Oct 09 2024 20:01:23 GMT-0700 (Pacific Daylight Time)">03:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@canadahonk:matrix.org">canadahonk</span>&gt;</div></td><td class="msg-cell"><code>usage="cake-mix"</code></td></tr>
  <tr class="msg" id="L159"><td class="ts-cell"><a class="ts" href="#L159" alt="Wed Oct 09 2024 20:01:25 GMT-0700 (Pacific Daylight Time)">03:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> wait what else would cake mix come in but a box</blockquote></mx-reply>a cake mix tureen, what else</td></tr>
  <tr class="msg" id="L160"><td class="ts-cell"><a class="ts" href="#L160" alt="Wed Oct 09 2024 20:01:28 GMT-0700 (Pacific Daylight Time)">03:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@gibson042:matrix.org">Richard Gibson</span>&gt;</div></td><td class="msg-cell">aluminum cans</td></tr>
  <tr class="msg" id="L161"><td class="ts-cell"><a class="ts" href="#L161" alt="Wed Oct 09 2024 20:01:38 GMT-0700 (Pacific Daylight Time)">03:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">it wouldn't be cake mix and it wouldn't be in a box, it would be raw ingredients</td></tr>
  <tr class="msg" id="L162"><td class="ts-cell"><a class="ts" href="#L162" alt="Wed Oct 09 2024 20:01:56 GMT-0700 (Pacific Daylight Time)">03:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">the rawest</td></tr>
  <tr class="msg" id="L163"><td class="ts-cell"><a class="ts" href="#L163" alt="Wed Oct 09 2024 20:01:58 GMT-0700 (Pacific Daylight Time)">03:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">ok, calm down, you baking elitists</td></tr>
  <tr class="msg" id="L164"><td class="ts-cell"><a class="ts" href="#L164" alt="Wed Oct 09 2024 20:02:09 GMT-0700 (Pacific Daylight Time)">03:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">if you're not milling your own flour are you really a baker?</td></tr>
  <tr class="msg" id="L165"><td class="ts-cell"><a class="ts" href="#L165" alt="Wed Oct 09 2024 20:02:21 GMT-0700 (Pacific Daylight Time)">03:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@kriskowal:aelf.land">kriskowal</span>&gt;</div></td><td class="msg-cell">that would be a miller</td></tr>
  <tr class="msg" id="L166"><td class="ts-cell"><a class="ts" href="#L166" alt="Wed Oct 09 2024 20:03:05 GMT-0700 (Pacific Daylight Time)">03:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><a href="https://abcnews.go.com/Lifestyle/man-spends-months-1500-make-sandwich-scratch/story?id=33802231">https://abcnews.go.com/Lifestyle/man-spends-months-1500-make-sandwich-scratch/story?id=33802231</a></td></tr>
  <tr class="msg" id="L167"><td class="ts-cell"><a class="ts" href="#L167" alt="Wed Oct 09 2024 20:03:10 GMT-0700 (Pacific Daylight Time)">03:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@kriskowal:aelf.land">kriskowal</span>&gt;</div></td><td class="msg-cell">‚Ä¶molar, m√ºller, mollino, etc</td></tr>
  <tr class="msg" id="L168"><td class="ts-cell"><a class="ts" href="#L168" alt="Wed Oct 09 2024 20:03:58 GMT-0700 (Pacific Daylight Time)">03:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@kriskowal:aelf.land">kriskowal</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <a href="https://abcnews.go.com/Lifestyle/man-spends-months-1500-make-sandwich-scratch/story?id=33802231">https://abcnews.go.com/Lifestyle/man-spends-months-1500-make-sandwich-scratch/story?id=33802231</a></blockquote></mx-reply>to bake a cake from scratch one must first create the universe</td></tr>
  <tr class="msg" id="L169"><td class="ts-cell"><a class="ts" href="#L169" alt="Wed Oct 09 2024 20:39:16 GMT-0700 (Pacific Daylight Time)">03:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">looking for folks to help with the notes starting in 20 mins</td></tr>
  <tr class="msg" id="L170"><td class="ts-cell"><a class="ts" href="#L170" alt="Wed Oct 09 2024 20:58:33 GMT-0700 (Pacific Daylight Time)">03:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">üëÄ</td></tr>
  <tr class="msg" id="L171"><td class="ts-cell"><a class="ts" href="#L171" alt="Wed Oct 09 2024 20:59:10 GMT-0700 (Pacific Daylight Time)">03:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@legendecas:matrix.org">Chengzhong Wu</span>&gt;</div></td><td class="msg-cell">+1</td></tr>
  <tr class="msg" id="L172"><td class="ts-cell"><a class="ts" href="#L172" alt="Wed Oct 09 2024 21:01:46 GMT-0700 (Pacific Daylight Time)">04:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@legendecas:matrix.org">Chengzhong Wu</span>&gt;</div></td><td class="msg-cell">do we need consensus for stage 0?</td></tr>
  <tr class="msg" id="L173"><td class="ts-cell"><a class="ts" href="#L173" alt="Wed Oct 09 2024 21:01:55 GMT-0700 (Pacific Daylight Time)">04:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">could someone on the team's call copy the link to the slides? I'm assuming if I join I won't be able to see previous chat history</td></tr>
  <tr class="msg" id="L174"><td class="ts-cell"><a class="ts" href="#L174" alt="Wed Oct 09 2024 21:02:40 GMT-0700 (Pacific Daylight Time)">04:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell"><a href="https://docs.google.com/presentation/d/1yakKCsS3pR0T7eJcaJD2ZUzK6xG6FcoFnrmngkJUcEo/edit#slide=id.g2fa19dd416b_0_181">https://docs.google.com/presentation/d/1yakKCsS3pR0T7eJcaJD2ZUzK6xG6FcoFnrmngkJUcEo/edit#slide=id.g2fa19dd416b_0_181</a></td></tr>
  <tr class="msg" id="L175"><td class="ts-cell"><a class="ts" href="#L175" alt="Wed Oct 09 2024 21:04:00 GMT-0700 (Pacific Daylight Time)">04:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">ta</td></tr>
  <tr class="msg" id="L176"><td class="ts-cell"><a class="ts" href="#L176" alt="Wed Oct 09 2024 21:04:51 GMT-0700 (Pacific Daylight Time)">04:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">We regret to inform that the <code>Observable</code> topic has been withdrawn due to availability issues.</td></tr>
  <tr class="msg" id="L177"><td class="ts-cell"><a class="ts" href="#L177" alt="Wed Oct 09 2024 21:17:36 GMT-0700 (Pacific Daylight Time)">04:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">"30m stage 0 update" is a pretty wild concept</td></tr>
  <tr class="msg" id="L178"><td class="ts-cell"><a class="ts" href="#L178" alt="Wed Oct 09 2024 21:18:22 GMT-0700 (Pacific Daylight Time)">04:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">if we're getting an item more than once at committee then it's really not stage 0, it's stage 1</td></tr>
  <tr class="msg" id="L179"><td class="ts-cell"><a class="ts" href="#L179" alt="Wed Oct 09 2024 21:18:29 GMT-0700 (Pacific Daylight Time)">04:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">because we're spending time exploring the problem</td></tr>
  <tr class="msg" id="L180"><td class="ts-cell"><a class="ts" href="#L180" alt="Wed Oct 09 2024 21:19:06 GMT-0700 (Pacific Daylight Time)">04:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">Ross Kirsling</span>&gt;</div></td><td class="msg-cell">that is also how I feel</td></tr>
  <tr class="msg" id="L181"><td class="ts-cell"><a class="ts" href="#L181" alt="Wed Oct 09 2024 21:19:29 GMT-0700 (Pacific Daylight Time)">04:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell"><blockquote>
<p>delegates HATE it.. circumvent the process with this one neat trick!</p>
</blockquote>
</td></tr>
  <tr class="msg" id="L182"><td class="ts-cell"><a class="ts" href="#L182" alt="Wed Oct 09 2024 21:43:22 GMT-0700 (Pacific Daylight Time)">04:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@waldemarh:matrix.org">waldemar</span>&gt;</div></td><td class="msg-cell">What if the module exports <code>then</code>?</td></tr>
  <tr class="msg" id="L183"><td class="ts-cell"><a class="ts" href="#L183" alt="Wed Oct 09 2024 21:43:37 GMT-0700 (Pacific Daylight Time)">04:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">that's coming up</td></tr>
  <tr class="msg" id="L184"><td class="ts-cell"><a class="ts" href="#L184" alt="Wed Oct 09 2024 21:44:54 GMT-0700 (Pacific Daylight Time)">04:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> What if the module exports <code>then</code>?</blockquote></mx-reply>dynamic import will call <code>then</code> üò≠</td></tr>
  <tr class="msg" id="L185"><td class="ts-cell"><a class="ts" href="#L185" alt="Wed Oct 09 2024 21:45:16 GMT-0700 (Pacific Daylight Time)">04:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell">I always think it's a mistake.</td></tr>
  <tr class="msg" id="L186"><td class="ts-cell"><a class="ts" href="#L186" alt="Wed Oct 09 2024 21:45:25 GMT-0700 (Pacific Daylight Time)">04:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@waldemarh:matrix.org">waldemar</span>&gt;</div></td><td class="msg-cell">Yeah. That seems a bit troublesome‚Ä¶</td></tr>
  <tr class="msg" id="L187"><td class="ts-cell"><a class="ts" href="#L187" alt="Wed Oct 09 2024 21:47:01 GMT-0700 (Pacific Daylight Time)">04:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell">So I really hope we can fix it (not sure why Symbol.unthenable was rejected...)</td></tr>
  <tr class="msg" id="L188"><td class="ts-cell"><a class="ts" href="#L188" alt="Wed Oct 09 2024 21:48:34 GMT-0700 (Pacific Daylight Time)">04:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">web compat, people were already relying on thenable modules in production</td></tr>
  <tr class="msg" id="L189"><td class="ts-cell"><a class="ts" href="#L189" alt="Wed Oct 09 2024 21:49:03 GMT-0700 (Pacific Daylight Time)">04:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@abotella:igalia.com">Andreu Botella (at TC39, üïê JST)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> web compat, people were already relying on thenable modules in production</blockquote></mx-reply>really? üò©</td></tr>
  <tr class="msg" id="L190"><td class="ts-cell"><a class="ts" href="#L190" alt="Wed Oct 09 2024 21:49:41 GMT-0700 (Pacific Daylight Time)">04:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> web compat, people were already relying on thenable modules in production</blockquote></mx-reply>really weird... Is it just for fun?</td></tr>
  <tr class="msg" id="L191"><td class="ts-cell"><a class="ts" href="#L191" alt="Wed Oct 09 2024 21:50:24 GMT-0700 (Pacific Daylight Time)">04:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell">Is it a real production or just toy project?</td></tr>
  <tr class="msg" id="L192"><td class="ts-cell"><a class="ts" href="#L192" alt="Wed Oct 09 2024 21:50:48 GMT-0700 (Pacific Daylight Time)">04:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i'm not sure we ever dug into it, we just heard claims that they were i think</td></tr>
  <tr class="msg" id="L193"><td class="ts-cell"><a class="ts" href="#L193" alt="Wed Oct 09 2024 21:51:27 GMT-0700 (Pacific Daylight Time)">04:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@abotella:igalia.com">Andreu Botella (at TC39, üïê JST)</span>&gt;</div></td><td class="msg-cell">would it be hard to feature detect that?</td></tr>
  <tr class="msg" id="L194"><td class="ts-cell"><a class="ts" href="#L194" alt="Wed Oct 09 2024 21:51:46 GMT-0700 (Pacific Daylight Time)">04:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@abotella:igalia.com">Andreu Botella (at TC39, üïê JST)</span>&gt;</div></td><td class="msg-cell">well, I meant, hard to know how much it's used</td></tr>
  <tr class="msg" id="L195"><td class="ts-cell"><a class="ts" href="#L195" alt="Wed Oct 09 2024 21:52:19 GMT-0700 (Pacific Daylight Time)">04:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell">I really think relying on the such bad semantics (static import and dynamic import give u different things) in production is very very weird...</td></tr>
  <tr class="msg" id="L196"><td class="ts-cell"><a class="ts" href="#L196" alt="Wed Oct 09 2024 21:54:48 GMT-0700 (Pacific Daylight Time)">04:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@canadahonk:matrix.org">canadahonk</span>&gt;</div></td><td class="msg-cell">are there any known demands for import.defer?</td></tr>
  <tr class="msg" id="L197"><td class="ts-cell"><a class="ts" href="#L197" alt="Wed Oct 09 2024 21:57:34 GMT-0700 (Pacific Daylight Time)">04:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">@nicolo-ribaudo</span> we can hear you typing</td></tr>
  <tr class="msg" id="L198"><td class="ts-cell"><a class="ts" href="#L198" alt="Wed Oct 09 2024 22:00:20 GMT-0700 (Pacific Daylight Time)">05:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Is it a real production or just toy project?</blockquote></mx-reply>Production.</td></tr>
  <tr class="msg" id="L199"><td class="ts-cell"><a class="ts" href="#L199" alt="Wed Oct 09 2024 22:01:06 GMT-0700 (Pacific Daylight Time)">05:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">I'm not on the call now, what is the problem with lazy evaluating on export access?</td></tr>
  <tr class="msg" id="L200"><td class="ts-cell"><a class="ts" href="#L200" alt="Wed Oct 09 2024 22:01:23 GMT-0700 (Pacific Daylight Time)">05:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">thenables</td></tr>
  <tr class="msg" id="L201"><td class="ts-cell"><a class="ts" href="#L201" alt="Wed Oct 09 2024 22:03:06 GMT-0700 (Pacific Daylight Time)">05:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Specifically the promise resolution of the dynamic import triggers the evaluation</td></tr>
  <tr class="msg" id="L202"><td class="ts-cell"><a class="ts" href="#L202" alt="Wed Oct 09 2024 22:04:24 GMT-0700 (Pacific Daylight Time)">05:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">I understand that. But it just means that only thenable modules wouldn't be lazy evaluated. More precisely the promise logic doing get then would trigger their evaluation</td></tr>
  <tr class="msg" id="L203"><td class="ts-cell"><a class="ts" href="#L203" alt="Wed Oct 09 2024 22:05:08 GMT-0700 (Pacific Daylight Time)">05:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">It wouldn't affect any other kind of modules</td></tr>
  <tr class="msg" id="L204"><td class="ts-cell"><a class="ts" href="#L204" alt="Wed Oct 09 2024 22:05:33 GMT-0700 (Pacific Daylight Time)">05:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">any property access triggers evaluation</td></tr>
  <tr class="msg" id="L205"><td class="ts-cell"><a class="ts" href="#L205" alt="Wed Oct 09 2024 22:05:37 GMT-0700 (Pacific Daylight Time)">05:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">and you have to access <code>.then</code></td></tr>
  <tr class="msg" id="L206"><td class="ts-cell"><a class="ts" href="#L206" alt="Wed Oct 09 2024 22:06:18 GMT-0700 (Pacific Daylight Time)">05:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">Right so what's the problem to trigger evaluation of thenable modules</td></tr>
  <tr class="msg" id="L207"><td class="ts-cell"><a class="ts" href="#L207" alt="Wed Oct 09 2024 22:06:33 GMT-0700 (Pacific Daylight Time)">05:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">it triggers all modules</td></tr>
  <tr class="msg" id="L208"><td class="ts-cell"><a class="ts" href="#L208" alt="Wed Oct 09 2024 22:06:36 GMT-0700 (Pacific Daylight Time)">05:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><code>Promise.resolve(foo)</code> accesses <code>foo.then</code></td></tr>
  <tr class="msg" id="L209"><td class="ts-cell"><a class="ts" href="#L209" alt="Wed Oct 09 2024 22:06:43 GMT-0700 (Pacific Daylight Time)">05:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">regardless of whether <code>foo</code> has a <code>.then</code></td></tr>
  <tr class="msg" id="L210"><td class="ts-cell"><a class="ts" href="#L210" alt="Wed Oct 09 2024 22:06:57 GMT-0700 (Pacific Daylight Time)">05:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">I'm just saying if the module is non thenable, it wouldn't trigger evaluation. All good</td></tr>
  <tr class="msg" id="L211"><td class="ts-cell"><a class="ts" href="#L211" alt="Wed Oct 09 2024 22:07:14 GMT-0700 (Pacific Daylight Time)">05:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">any property access triggers evaluation</td></tr>
  <tr class="msg" id="L212"><td class="ts-cell"><a class="ts" href="#L212" alt="Wed Oct 09 2024 22:07:23 GMT-0700 (Pacific Daylight Time)">05:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">the property does not have to exist to trigger evaluation</td></tr>
  <tr class="msg" id="L213"><td class="ts-cell"><a class="ts" href="#L213" alt="Wed Oct 09 2024 22:07:40 GMT-0700 (Pacific Daylight Time)">05:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">and sticking the module namespace object into a promise triggers access of <code>.then</code></td></tr>
  <tr class="msg" id="L214"><td class="ts-cell"><a class="ts" href="#L214" alt="Wed Oct 09 2024 22:07:52 GMT-0700 (Pacific Daylight Time)">05:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">and dynamic import sticks the module namespace object into a promise</td></tr>
  <tr class="msg" id="L215"><td class="ts-cell"><a class="ts" href="#L215" alt="Wed Oct 09 2024 22:07:58 GMT-0700 (Pacific Daylight Time)">05:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">But that's what I'm asking. Why can't we defer evaluation to access of a known export</td></tr>
  <tr class="msg" id="L216"><td class="ts-cell"><a class="ts" href="#L216" alt="Wed Oct 09 2024 22:08:56 GMT-0700 (Pacific Daylight Time)">05:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">when would you trigger the evaluation</td></tr>
  <tr class="msg" id="L217"><td class="ts-cell"><a class="ts" href="#L217" alt="Wed Oct 09 2024 22:09:02 GMT-0700 (Pacific Daylight Time)">05:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">You don't need to evaluate to know what is exported </td></tr>
  <tr class="msg" id="L218"><td class="ts-cell"><a class="ts" href="#L218" alt="Wed Oct 09 2024 22:09:24 GMT-0700 (Pacific Daylight Time)">05:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">Promise.resolve accesses .then, it doesn't ask if it has a .then</td></tr>
  <tr class="msg" id="L219"><td class="ts-cell"><a class="ts" href="#L219" alt="Wed Oct 09 2024 22:09:33 GMT-0700 (Pacific Daylight Time)">05:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">When you do get then or any prop access for known exports </td></tr>
  <tr class="msg" id="L220"><td class="ts-cell"><a class="ts" href="#L220" alt="Wed Oct 09 2024 22:09:53 GMT-0700 (Pacific Daylight Time)">05:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">which Promise.resolve does, it gets .then</td></tr>
  <tr class="msg" id="L221"><td class="ts-cell"><a class="ts" href="#L221" alt="Wed Oct 09 2024 22:10:00 GMT-0700 (Pacific Daylight Time)">05:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">what is happening</td></tr>
  <tr class="msg" id="L222"><td class="ts-cell"><a class="ts" href="#L222" alt="Wed Oct 09 2024 22:10:58 GMT-0700 (Pacific Daylight Time)">05:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i think what mathieu is suggesting is that we <em>change</em> promise resolution so that <em>for a deferred namespace object</em>, it doesn't access <code>.then</code> unless that's an export of the module?</td></tr>
  <tr class="msg" id="L223"><td class="ts-cell"><a class="ts" href="#L223" alt="Wed Oct 09 2024 22:11:20 GMT-0700 (Pacific Daylight Time)">05:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">I see stuff dropping off the queue, but we have time to continue discussion</td></tr>
  <tr class="msg" id="L224"><td class="ts-cell"><a class="ts" href="#L224" alt="Wed Oct 09 2024 22:11:22 GMT-0700 (Pacific Daylight Time)">05:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">where do you put this, inside step 9 of <a href="https://tc39.es/ecma262/#sec-promise-resolve-functions">https://tc39.es/ecma262/#sec-promise-resolve-functions</a>?</td></tr>
  <tr class="msg" id="L225"><td class="ts-cell"><a class="ts" href="#L225" alt="Wed Oct 09 2024 22:11:33 GMT-0700 (Pacific Daylight Time)">05:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I assumed the idea was that you'd know the names before triggering evaluation</td></tr>
  <tr class="msg" id="L226"><td class="ts-cell"><a class="ts" href="#L226" alt="Wed Oct 09 2024 22:11:48 GMT-0700 (Pacific Daylight Time)">05:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I don't know if that's true</td></tr>
  <tr class="msg" id="L227"><td class="ts-cell"><a class="ts" href="#L227" alt="Wed Oct 09 2024 22:12:03 GMT-0700 (Pacific Daylight Time)">05:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> where do you put this, inside step 9 of <a href="https://tc39.es/ecma262/#sec-promise-resolve-functions">https://tc39.es/ecma262/#sec-promise-resolve-functions</a>?</blockquote></mx-reply>that seems like a reasonable place</td></tr>
  <tr class="msg" id="L228"><td class="ts-cell"><a class="ts" href="#L228" alt="Wed Oct 09 2024 22:12:19 GMT-0700 (Pacific Daylight Time)">05:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">seems wacky</td></tr>
  <tr class="msg" id="L229"><td class="ts-cell"><a class="ts" href="#L229" alt="Wed Oct 09 2024 22:12:44 GMT-0700 (Pacific Daylight Time)">05:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">anything that touches thenable modules is indeed wacky</td></tr>
  <tr class="msg" id="L230"><td class="ts-cell"><a class="ts" href="#L230" alt="Wed Oct 09 2024 22:13:03 GMT-0700 (Pacific Daylight Time)">05:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I don't know if that's true</blockquote></mx-reply>the official spec knows. But userland bundlers may not know</td></tr>
  <tr class="msg" id="L231"><td class="ts-cell"><a class="ts" href="#L231" alt="Wed Oct 09 2024 22:14:22 GMT-0700 (Pacific Daylight Time)">05:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> web compat, people were already relying on thenable modules in production</blockquote></mx-reply>Also expense/complexity of adding another property access to this hot path of promise resolution</td></tr>
  <tr class="msg" id="L232"><td class="ts-cell"><a class="ts" href="#L232" alt="Wed Oct 09 2024 22:16:24 GMT-0700 (Pacific Daylight Time)">05:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">About the use cases for import.defer: we had an internal meeting in Bloomberg before TC39, and we couldn‚Äôt come up with a real use case. The case Ashley raised doesn‚Äôt occur in our infrastructure‚Äîit is very hypothetical. Personally I think removing the dynamic import.defer feature and not doing this namespace censorship is the right tradeoff for avoiding complexity</td></tr>
  <tr class="msg" id="L233"><td class="ts-cell"><a class="ts" href="#L233" alt="Wed Oct 09 2024 22:17:06 GMT-0700 (Pacific Daylight Time)">05:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">i feel like you can get what you want with dynamic import + static defer inside the dynamically imported graph</td></tr>
  <tr class="msg" id="L234"><td class="ts-cell"><a class="ts" href="#L234" alt="Wed Oct 09 2024 22:17:22 GMT-0700 (Pacific Daylight Time)">05:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">but let me check internally as well, we might have a use case. at the moment i can't think of anything</td></tr>
  <tr class="msg" id="L235"><td class="ts-cell"><a class="ts" href="#L235" alt="Wed Oct 09 2024 22:17:43 GMT-0700 (Pacific Daylight Time)">05:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i guess you could maybe get it with <code>import()</code> of a data URI that does a static deferred import and re-export?</td></tr>
  <tr class="msg" id="L236"><td class="ts-cell"><a class="ts" href="#L236" alt="Wed Oct 09 2024 22:17:50 GMT-0700 (Pacific Daylight Time)">05:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">yeah exactly</td></tr>
  <tr class="msg" id="L237"><td class="ts-cell"><a class="ts" href="#L237" alt="Wed Oct 09 2024 22:18:14 GMT-0700 (Pacific Daylight Time)">05:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell"> Sorry afk, will formulate more clearly soon</td></tr>
  <tr class="msg" id="L238"><td class="ts-cell"><a class="ts" href="#L238" alt="Wed Oct 09 2024 22:18:30 GMT-0700 (Pacific Daylight Time)">05:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">because <code>import.defer</code> is fundamentally different from the static import defer: static import defer is always a module graph edge. In the case of import.defer we are deferring the module root</td></tr>
  <tr class="msg" id="L239"><td class="ts-cell"><a class="ts" href="#L239" alt="Wed Oct 09 2024 22:21:35 GMT-0700 (Pacific Daylight Time)">05:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sffc:mozilla.org">sffc</span>&gt;</div></td><td class="msg-cell">I want to see a future where WASM module instantiation is handled transparently in the ESM universe. WASM source imports are a step in the right direction, but I want to see instantiation handled via import defer at some point. And dynamic loading of WASM sources is definitely a use case.</td></tr>
  <tr class="msg" id="L240"><td class="ts-cell"><a class="ts" href="#L240" alt="Wed Oct 09 2024 22:24:37 GMT-0700 (Pacific Daylight Time)">05:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I want to see a future where WASM module instantiation is handled transparently in the ESM universe. WASM source imports are a step in the right direction, but I want to see instantiation handled via import defer at some point. And dynamic loading of WASM sources is definitely a use case.</blockquote></mx-reply>Import source + import() covers some of these cases though</td></tr>
  <tr class="msg" id="L241"><td class="ts-cell"><a class="ts" href="#L241" alt="Wed Oct 09 2024 22:24:52 GMT-0700 (Pacific Daylight Time)">05:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">The problem is the function coloring‚Ä¶</td></tr>
  <tr class="msg" id="L242"><td class="ts-cell"><a class="ts" href="#L242" alt="Wed Oct 09 2024 22:30:00 GMT-0700 (Pacific Daylight Time)">05:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I assumed the idea was that you'd know the names before triggering evaluation</blockquote></mx-reply><p>There are two possible implementations of this proposal:</p>
<ul>
<li>one (trivial) is that you follow the spec to the word, and eagerly pre-load and pre-parse the module and its dependencies. In this case, you always have access to the list of export names before evaluation.</li>
<li>the other one is that you only collect some minimal metadata (does it have a dep with TLA? does it have syntax errors?) about modules before executing the app, and then skip loading/parsing entirely. You obviously cannot do this if you need to fetch files from the network, but that's often not the case (Node.js, the various edge runtimes, browser caches). This is the approach that gives the most benefits.</li>
</ul>
<p>With the second approach you <em>can</em> get the list of exports in this pre-execution phase, but it's more metadata you have to maintain.</p>
<p>Bundlers are very similar to to the second case, except that they currently need <em>no metadata</em>: the way to bundle deferred modules is to wrap them in a function, and thus:</p>
<ul>
<li>you already are protected against syntax errors</li>
<li>there is no TLA, because that's handled by injecting the async module outside of the deferred function</li>
</ul>
</td></tr>
  <tr class="msg" id="L243"><td class="ts-cell"><a class="ts" href="#L243" alt="Wed Oct 09 2024 22:30:57 GMT-0700 (Pacific Daylight Time)">05:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Import source + import() covers some of these cases though</blockquote></mx-reply>Well, also <code>const wasm = import.source(...)</code> + <code>WebAssembly.instantiate(wasm)</code> covers it in a sync way</td></tr>
  <tr class="msg" id="L244"><td class="ts-cell"><a class="ts" href="#L244" alt="Wed Oct 09 2024 22:31:31 GMT-0700 (Pacific Daylight Time)">05:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Well, also <code>const wasm = import.source(...)</code> + <code>WebAssembly.instantiate(wasm)</code> covers it in a sync way</blockquote></mx-reply>Kinda, but then you don‚Äôt get the native imports</td></tr>
  <tr class="msg" id="L245"><td class="ts-cell"><a class="ts" href="#L245" alt="Wed Oct 09 2024 22:32:15 GMT-0700 (Pacific Daylight Time)">05:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Oh true -- it only covers the many of the cases but not all of them</td></tr>
  <tr class="msg" id="L246"><td class="ts-cell"><a class="ts" href="#L246" alt="Wed Oct 09 2024 22:35:16 GMT-0700 (Pacific Daylight Time)">05:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@aardvark179:matrix.org">Duncan MacGregor</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> It was briefly mentioned.</blockquote></mx-reply><p>Ah, found it in the automated transcript.</p>
<blockquote>
<p>Our next meeting coming up is a remote meeting on mountain time. So that's Albuquerque, our notional virtual venue. We are also working on the schedule for next year and hope to publish that very soon, as soon as we've got confirmations from the potential hosts.</p>
</blockquote></td></tr>
  <tr class="msg" id="L247"><td class="ts-cell"><a class="ts" href="#L247" alt="Wed Oct 09 2024 22:35:38 GMT-0700 (Pacific Daylight Time)">05:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I want to see a future where WASM module instantiation is handled transparently in the ESM universe. WASM source imports are a step in the right direction, but I want to see instantiation handled via import defer at some point. And dynamic loading of WASM sources is definitely a use case.</blockquote></mx-reply>I agree with this goal about Wasm/ESM integration, and now understand the case better where this feature will be useful, but then I  wonder who will be sophisticated enough to do this import.defer() idiom in order to split up compilation vs instantiation cost (and what policy should even be used)</td></tr>
  <tr class="msg" id="L248"><td class="ts-cell"><a class="ts" href="#L248" alt="Wed Oct 09 2024 22:42:08 GMT-0700 (Pacific Daylight Time)">05:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I assumed the idea was that you'd know the names before triggering evaluation</blockquote></mx-reply>This exactly. My understanding is that all exported names of a module are known without evaluating the module. That means technically we could model this as an object with known props and the first access (get, gOPD) on one of these props would trigger the evaluation of the module. That way the import.defer of a non thenable module does not trigger the evaluation of the module. But if the module is thenable, then of course the regular promise logic will trigger evaluation when it does a get of then</td></tr>
  <tr class="msg" id="L249"><td class="ts-cell"><a class="ts" href="#L249" alt="Wed Oct 09 2024 22:44:07 GMT-0700 (Pacific Daylight Time)">05:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> The problem is the function coloring‚Ä¶</blockquote></mx-reply>can you elaborate? not familiar with the wasm usecase so well, so i don't know how import.defer solves this better than import source + import()</td></tr>
  <tr class="msg" id="L250"><td class="ts-cell"><a class="ts" href="#L250" alt="Wed Oct 09 2024 22:44:25 GMT-0700 (Pacific Daylight Time)">05:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">are any slides intended to be shared right now?</td></tr>
  <tr class="msg" id="L251"><td class="ts-cell"><a class="ts" href="#L251" alt="Wed Oct 09 2024 22:44:26 GMT-0700 (Pacific Daylight Time)">05:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">because thats a good point, import.source and then import later is possibly another solution?</td></tr>
  <tr class="msg" id="L252"><td class="ts-cell"><a class="ts" href="#L252" alt="Wed Oct 09 2024 22:45:28 GMT-0700 (Pacific Daylight Time)">05:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i don't really see the priority on making evaluation-phase wasm ESM integration work well</td></tr>
  <tr class="msg" id="L253"><td class="ts-cell"><a class="ts" href="#L253" alt="Wed Oct 09 2024 22:45:37 GMT-0700 (Pacific Daylight Time)">05:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">you gotta do something to pass in the imports</td></tr>
  <tr class="msg" id="L254"><td class="ts-cell"><a class="ts" href="#L254" alt="Wed Oct 09 2024 22:45:49 GMT-0700 (Pacific Daylight Time)">05:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">it seems like it's just composed import.source then an instantiate</td></tr>
  <tr class="msg" id="L255"><td class="ts-cell"><a class="ts" href="#L255" alt="Wed Oct 09 2024 22:46:04 GMT-0700 (Pacific Daylight Time)">05:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">the hard problems about actually making wasm modules participate in the module graph is solved by import.source</td></tr>
  <tr class="msg" id="L256"><td class="ts-cell"><a class="ts" href="#L256" alt="Wed Oct 09 2024 22:46:47 GMT-0700 (Pacific Daylight Time)">05:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> This exactly. My understanding is that all exported names of a module are known without evaluating the module. That means technically we could model this as an object with known props and the first access (get, gOPD) on one of these props would trigger the evaluation of the module. That way the import.defer of a non thenable module does not trigger the evaluation of the module. But if the module is thenable, then of course the regular promise logic will trigger evaluation when it does a get of then</blockquote></mx-reply>in a pure ESM  spec world yes. But ecosystem tooling has to deal with less concrete situations. Not relying on knowing the keys is a big help for tooling that emulates ESM</td></tr>
  <tr class="msg" id="L257"><td class="ts-cell"><a class="ts" href="#L257" alt="Wed Oct 09 2024 22:48:06 GMT-0700 (Pacific Daylight Time)">05:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">dropping <code>import.defer</code> looks like it has more of a win</td></tr>
  <tr class="msg" id="L258"><td class="ts-cell"><a class="ts" href="#L258" alt="Wed Oct 09 2024 22:48:18 GMT-0700 (Pacific Daylight Time)">05:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">I thought that static analyzability of module exports was one of the main point of ESM? Are you saying you want to import.defer other module types where export names are not known ahead of time?</td></tr>
  <tr class="msg" id="L259"><td class="ts-cell"><a class="ts" href="#L259" alt="Wed Oct 09 2024 22:49:35 GMT-0700 (Pacific Daylight Time)">05:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">Tools like Babel will transform ESM to CommonJS one module at a time, without that global info</td></tr>
  <tr class="msg" id="L260"><td class="ts-cell"><a class="ts" href="#L260" alt="Wed Oct 09 2024 22:50:53 GMT-0700 (Pacific Daylight Time)">05:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">it's doable, but adds complexity to tooling. Dropping <code>import.defer</code> is a solution that reduces complexity instead of moving it.</td></tr>
  <tr class="msg" id="L261"><td class="ts-cell"><a class="ts" href="#L261" alt="Wed Oct 09 2024 23:50:05 GMT-0700 (Pacific Daylight Time)">06:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><code>bigint</code> could never have been JSSugar due to operator overloading. Neither could decimal as a primitive.</td></tr>
  <tr class="msg" id="L262"><td class="ts-cell"><a class="ts" href="#L262" alt="Wed Oct 09 2024 23:50:59 GMT-0700 (Pacific Daylight Time)">06:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Unless we introduce escaped operators like "a \+ b" that desugars to a.add(b) :)</td></tr>
  <tr class="msg" id="L263"><td class="ts-cell"><a class="ts" href="#L263" alt="Wed Oct 09 2024 23:51:52 GMT-0700 (Pacific Daylight Time)">06:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">beyond operator overloading, it's AO impacting. new primitives change the core AOs of the language</td></tr>
  <tr class="msg" id="L264"><td class="ts-cell"><a class="ts" href="#L264" alt="Wed Oct 09 2024 23:52:35 GMT-0700 (Pacific Daylight Time)">06:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">absent type-driven stuff, you can be like ocaml and have +.</td></tr>
  <tr class="msg" id="L265"><td class="ts-cell"><a class="ts" href="#L265" alt="Wed Oct 09 2024 23:54:10 GMT-0700 (Pacific Daylight Time)">06:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">I was discussing with Yulia last night that you could <code data-md="`">import + from ‚Äòjs:operators‚Äô</code>, and have that perform the <code data-md="`">left + right</code> -&gt; <code data-md="`">left.add(right)</code> change</td></tr>
  <tr class="msg" id="L266"><td class="ts-cell"><a class="ts" href="#L266" alt="Wed Oct 09 2024 23:54:51 GMT-0700 (Pacific Daylight Time)">06:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">üëÄ what happened in shibuya should stay in shibuya (for now)</td></tr>
  <tr class="msg" id="L267"><td class="ts-cell"><a class="ts" href="#L267" alt="Wed Oct 09 2024 23:54:58 GMT-0700 (Pacific Daylight Time)">06:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">or in TDZ</td></tr>
  <tr class="msg" id="L268"><td class="ts-cell"><a class="ts" href="#L268" alt="Wed Oct 09 2024 23:54:58 GMT-0700 (Pacific Daylight Time)">06:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Requires coordination from the ‚Äúcore‚Äù, but we could then add new number types pretty easily</td></tr>
  <tr class="msg" id="L269"><td class="ts-cell"><a class="ts" href="#L269" alt="Wed Oct 09 2024 23:55:24 GMT-0700 (Pacific Daylight Time)">06:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">until we have something more concrete at least. context: this needs a lot more thought before we consider it as a serious proposal</td></tr>
  <tr class="msg" id="L270"><td class="ts-cell"><a class="ts" href="#L270" alt="Wed Oct 09 2024 23:55:52 GMT-0700 (Pacific Daylight Time)">06:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@legendecas:matrix.org">Chengzhong Wu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I was discussing with Yulia last night that you could <code data-md="`">import + from ‚Äòjs:operators‚Äô</code>, and have that perform the <code data-md="`">left + right</code> -&gt; <code data-md="`">left.add(right)</code> change</blockquote></mx-reply>how is this going to be different from <a href="https://github.com/tc39/proposal-operator-overloading">https://github.com/tc39/proposal-operator-overloading</a></td></tr>
  <tr class="msg" id="L271"><td class="ts-cell"><a class="ts" href="#L271" alt="Wed Oct 09 2024 23:55:55 GMT-0700 (Pacific Daylight Time)">06:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">also i had. lot of drinks</td></tr>
  <tr class="msg" id="L272"><td class="ts-cell"><a class="ts" href="#L272" alt="Wed Oct 09 2024 23:56:54 GMT-0700 (Pacific Daylight Time)">06:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">It wouldn‚Äôt be checked per operand types. Import <code data-md="`">+</code>, and now all <code data-md="`">+</code> in the file are <code data-md="`">left.add(right)</code></td></tr>
  <tr class="msg" id="L273"><td class="ts-cell"><a class="ts" href="#L273" alt="Wed Oct 09 2024 23:56:58 GMT-0700 (Pacific Daylight Time)">06:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">but yea ast rewriting, ill talk about it when my thing comes up</td></tr>
  <tr class="msg" id="L274"><td class="ts-cell"><a class="ts" href="#L274" alt="Wed Oct 09 2024 23:58:09 GMT-0700 (Pacific Daylight Time)">06:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> but yea ast rewriting, ill talk about it when my thing comes up</blockquote></mx-reply>A clear strategy to build hype</td></tr>
  <tr class="msg" id="L275"><td class="ts-cell"><a class="ts" href="#L275" alt="Wed Oct 09 2024 23:58:43 GMT-0700 (Pacific Daylight Time)">06:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">if you haven't read rewriting the technical interview you really should, but thats a digression</td></tr>
  <tr class="msg" id="L276"><td class="ts-cell"><a class="ts" href="#L276" alt="Wed Oct 09 2024 23:58:54 GMT-0700 (Pacific Daylight Time)">06:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">what I am trying to say is I want to date JSSugar before marrying.  thank you Ashley for helping to clarify my intent there</td></tr>
  <tr class="msg" id="L277"><td class="ts-cell"><a class="ts" href="#L277" alt="Wed Oct 09 2024 23:59:09 GMT-0700 (Pacific Daylight Time)">06:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Chris de Almeida</span>: you've been dating for years</td></tr>
  <tr class="msg" id="L278"><td class="ts-cell"><a class="ts" href="#L278" alt="Wed Oct 09 2024 23:59:36 GMT-0700 (Pacific Daylight Time)">06:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> if you haven't read rewriting the technical interview you really should, but thats a digression</blockquote></mx-reply>all time favorite</td></tr>
  <tr class="msg" id="L279"><td class="ts-cell"><a class="ts" href="#L279" alt="Wed Oct 09 2024 23:59:38 GMT-0700 (Pacific Daylight Time)">06:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">but surely there is <em>some</em> delta from our current process that we could PoC</td></tr>
  <tr class="msg" id="L280"><td class="ts-cell"><a class="ts" href="#L280" alt="Thu Oct 10 2024 00:00:51 GMT-0700 (Pacific Daylight Time)">07:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">for example maybe a proposal that would involve a split, or <em>could</em> involve a split</td></tr>
  <tr class="msg" id="L281"><td class="ts-cell"><a class="ts" href="#L281" alt="Thu Oct 10 2024 00:01:18 GMT-0700 (Pacific Daylight Time)">07:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">but if the response is that it's already so close to what we do, per what Shu was saying, then that's fine</td></tr>
  <tr class="msg" id="L282"><td class="ts-cell"><a class="ts" href="#L282" alt="Thu Oct 10 2024 00:01:38 GMT-0700 (Pacific Daylight Time)">07:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell"><p>concretely I could see the following: new syntax for JSSugar gets the following restrictions</p>
<ol>
<li>it has to be expressible as a rewritten ast</li>
<li>it cannot present a simplified interface to what is a costly set of operations (with some rubrick determining where the line is, ie the expansion can not be greater than x)</li>
</ol>
<p>And, with this, we say that new syntax has a wait time of at least 3 years before landing in browsers</p>
</td></tr>
  <tr class="msg" id="L283"><td class="ts-cell"><a class="ts" href="#L283" alt="Thu Oct 10 2024 00:08:51 GMT-0700 (Pacific Daylight Time)">07:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">couldn't we say that right now, for syntax stage 2.7 features that they need 3 years (as usable transpilations) before being eligible for stage 3? (ie, without any sugar/core/js0 stuff)</td></tr>
  <tr class="msg" id="L284"><td class="ts-cell"><a class="ts" href="#L284" alt="Thu Oct 10 2024 00:09:32 GMT-0700 (Pacific Daylight Time)">07:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">no, because then people might not ever adopt it at scale and we never get a meaningful signal</td></tr>
  <tr class="msg" id="L285"><td class="ts-cell"><a class="ts" href="#L285" alt="Thu Oct 10 2024 00:09:41 GMT-0700 (Pacific Daylight Time)">07:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">it's not baking time with committee that's needed</td></tr>
  <tr class="msg" id="L286"><td class="ts-cell"><a class="ts" href="#L286" alt="Thu Oct 10 2024 00:09:44 GMT-0700 (Pacific Daylight Time)">07:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">it's baking time with the world</td></tr>
  <tr class="msg" id="L287"><td class="ts-cell"><a class="ts" href="#L287" alt="Thu Oct 10 2024 00:09:46 GMT-0700 (Pacific Daylight Time)">07:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">yeah it should be considered finished</td></tr>
  <tr class="msg" id="L288"><td class="ts-cell"><a class="ts" href="#L288" alt="Thu Oct 10 2024 00:11:19 GMT-0700 (Pacific Daylight Time)">07:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Someone is attributuing <span class="nick-9">@justingrant</span>'s comments on JS0 to me in the notes</td></tr>
  <tr class="msg" id="L289"><td class="ts-cell"><a class="ts" href="#L289" alt="Thu Oct 10 2024 00:11:45 GMT-0700 (Pacific Daylight Time)">07:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Please use JGT for Justin Grant</td></tr>
  <tr class="msg" id="L290"><td class="ts-cell"><a class="ts" href="#L290" alt="Thu Oct 10 2024 00:12:59 GMT-0700 (Pacific Daylight Time)">07:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">Does JSSugar open doors for a "blessed" type system? Or rather, would type annotations likely become a JSSugar feature?</td></tr>
  <tr class="msg" id="L291"><td class="ts-cell"><a class="ts" href="#L291" alt="Thu Oct 10 2024 00:13:22 GMT-0700 (Pacific Daylight Time)">07:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@justingrant:matrix.org">justingrant</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Someone is attributuing <span class="nick-9">@justingrant</span>'s comments on JS0 to me in the notes</blockquote></mx-reply>Maybe because I forgot to add myself (JGT) to the attendees list in the notes?  I'll fix that now. Want me to fix up the notes too?</td></tr>
  <tr class="msg" id="L292"><td class="ts-cell"><a class="ts" href="#L292" alt="Thu Oct 10 2024 00:13:48 GMT-0700 (Pacific Daylight Time)">07:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>Maybe because I forgot to add myself (JGT) to the attendees list in the notes?  I'll fix that now. Want me to fix up the notes too?</blockquote></mx-reply>Already did</td></tr>
  <tr class="msg" id="L293"><td class="ts-cell"><a class="ts" href="#L293" alt="Thu Oct 10 2024 00:14:21 GMT-0700 (Pacific Daylight Time)">07:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">Also curious if sugar files would get their own file extension?</td></tr>
  <tr class="msg" id="L294"><td class="ts-cell"><a class="ts" href="#L294" alt="Thu Oct 10 2024 00:14:36 GMT-0700 (Pacific Daylight Time)">07:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">Like how would I know an npm package is sugar or is able to be run directly?</td></tr>
  <tr class="msg" id="L295"><td class="ts-cell"><a class="ts" href="#L295" alt="Thu Oct 10 2024 00:14:44 GMT-0700 (Pacific Daylight Time)">07:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>Does JSSugar open doors for a "blessed" type system? Or rather, would type annotations likely become a JSSugar feature?</blockquote></mx-reply>I don‚Äôt think types as comments is a necessary feature if we still have to have a compiler</td></tr>
  <tr class="msg" id="L296"><td class="ts-cell"><a class="ts" href="#L296" alt="Thu Oct 10 2024 00:15:07 GMT-0700 (Pacific Daylight Time)">07:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell"><code>index.jsüç≠</code></td></tr>
  <tr class="msg" id="L297"><td class="ts-cell"><a class="ts" href="#L297" alt="Thu Oct 10 2024 00:15:17 GMT-0700 (Pacific Daylight Time)">07:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">ok well i was worried but now i'm excited</td></tr>
  <tr class="msg" id="L298"><td class="ts-cell"><a class="ts" href="#L298" alt="Thu Oct 10 2024 00:15:30 GMT-0700 (Pacific Daylight Time)">07:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">something something <code>package.json</code></td></tr>
  <tr class="msg" id="L299"><td class="ts-cell"><a class="ts" href="#L299" alt="Thu Oct 10 2024 00:15:45 GMT-0700 (Pacific Daylight Time)">07:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Does JSSugar open doors for a "blessed" type system? Or rather, would type annotations likely become a JSSugar feature?</blockquote></mx-reply>yes</td></tr>
  <tr class="msg" id="L300"><td class="ts-cell"><a class="ts" href="#L300" alt="Thu Oct 10 2024 00:15:51 GMT-0700 (Pacific Daylight Time)">07:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">{"sugar": "yesplease"}</td></tr>
  <tr class="msg" id="L301"><td class="ts-cell"><a class="ts" href="#L301" alt="Thu Oct 10 2024 00:16:03 GMT-0700 (Pacific Daylight Time)">07:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">good luck designing, getting consensus, and getting people to adopt given TS :)</td></tr>
  <tr class="msg" id="L302"><td class="ts-cell"><a class="ts" href="#L302" alt="Thu Oct 10 2024 00:16:05 GMT-0700 (Pacific Daylight Time)">07:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">yes they would need one, theyre a different parse goal.</td></tr>
  <tr class="msg" id="L303"><td class="ts-cell"><a class="ts" href="#L303" alt="Thu Oct 10 2024 00:16:06 GMT-0700 (Pacific Daylight Time)">07:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">(replying to Justin)

I'm not sure that's true.  Of the two motivations for Type Annotations, it doesn't really change the need for coordination.</td></tr>
  <tr class="msg" id="L304"><td class="ts-cell"><a class="ts" href="#L304" alt="Thu Oct 10 2024 00:16:13 GMT-0700 (Pacific Daylight Time)">07:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">which file systems allow emoji in file names?</td></tr>
  <tr class="msg" id="L305"><td class="ts-cell"><a class="ts" href="#L305" alt="Thu Oct 10 2024 00:16:23 GMT-0700 (Pacific Daylight Time)">07:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">DOS?</td></tr>
  <tr class="msg" id="L306"><td class="ts-cell"><a class="ts" href="#L306" alt="Thu Oct 10 2024 00:16:55 GMT-0700 (Pacific Daylight Time)">07:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>which file systems allow emoji in file names?</blockquote></mx-reply>umm most?</td></tr>
  <tr class="msg" id="L307"><td class="ts-cell"><a class="ts" href="#L307" alt="Thu Oct 10 2024 00:17:36 GMT-0700 (Pacific Daylight Time)">07:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>DOS?</blockquote></mx-reply>this is not a file system ü§¶‚Äç‚ôÇÔ∏è</td></tr>
  <tr class="msg" id="L308"><td class="ts-cell"><a class="ts" href="#L308" alt="Thu Oct 10 2024 00:18:38 GMT-0700 (Pacific Daylight Time)">07:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Rbuckton: Were those stats for current decorators or a previous version?</td></tr>
  <tr class="msg" id="L309"><td class="ts-cell"><a class="ts" href="#L309" alt="Thu Oct 10 2024 00:18:51 GMT-0700 (Pacific Daylight Time)">07:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">I meant FATTTTT :((((</td></tr>
  <tr class="msg" id="L310"><td class="ts-cell"><a class="ts" href="#L310" alt="Thu Oct 10 2024 00:18:56 GMT-0700 (Pacific Daylight Time)">07:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">comparing current to experimental</td></tr>
  <tr class="msg" id="L311"><td class="ts-cell"><a class="ts" href="#L311" alt="Thu Oct 10 2024 00:19:02 GMT-0700 (Pacific Daylight Time)">07:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/microsoft/TypeScript/issues/55688">https://github.com/microsoft/TypeScript/issues/55688</a></td></tr>
  <tr class="msg" id="L312"><td class="ts-cell"><a class="ts" href="#L312" alt="Thu Oct 10 2024 00:19:50 GMT-0700 (Pacific Daylight Time)">07:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">I think I agree with <span class="nick-6">ljharb</span> that it should get an extension... but then I go back to my other question. I'm not sure how to tell people "This is sugar" or "This is JS0".</td></tr>
  <tr class="msg" id="L313"><td class="ts-cell"><a class="ts" href="#L313" alt="Thu Oct 10 2024 00:20:11 GMT-0700 (Pacific Daylight Time)">07:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>I meant FATTTTT :((((</blockquote></mx-reply>FAT16? FAT32? WHICH IS IT?!</td></tr>
  <tr class="msg" id="L314"><td class="ts-cell"><a class="ts" href="#L314" alt="Thu Oct 10 2024 00:20:12 GMT-0700 (Pacific Daylight Time)">07:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">Unless we just really try to push for "Only publish JS0"</td></tr>
  <tr class="msg" id="L315"><td class="ts-cell"><a class="ts" href="#L315" alt="Thu Oct 10 2024 00:20:14 GMT-0700 (Pacific Daylight Time)">07:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">the file extension tells them, just like <code>.js</code> and <code>.mjs</code> do (should) now</td></tr>
  <tr class="msg" id="L316"><td class="ts-cell"><a class="ts" href="#L316" alt="Thu Oct 10 2024 00:20:21 GMT-0700 (Pacific Daylight Time)">07:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">but yeah "only publish js0" is what everyone would do</td></tr>
  <tr class="msg" id="L317"><td class="ts-cell"><a class="ts" href="#L317" alt="Thu Oct 10 2024 00:20:57 GMT-0700 (Pacific Daylight Time)">07:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">we should have a new file extension for each spec version</td></tr>
  <tr class="msg" id="L318"><td class="ts-cell"><a class="ts" href="#L318" alt="Thu Oct 10 2024 00:21:03 GMT-0700 (Pacific Daylight Time)">07:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">as each is a different parse goal</td></tr>
  <tr class="msg" id="L319"><td class="ts-cell"><a class="ts" href="#L319" alt="Thu Oct 10 2024 00:21:17 GMT-0700 (Pacific Daylight Time)">07:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell"><code>index.es2021</code></td></tr>
  <tr class="msg" id="L320"><td class="ts-cell"><a class="ts" href="#L320" alt="Thu Oct 10 2024 00:21:58 GMT-0700 (Pacific Daylight Time)">07:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">when I refactor my code and it no longer has newer syntax I rename it to <code>index.es2017</code></td></tr>
  <tr class="msg" id="L321"><td class="ts-cell"><a class="ts" href="#L321" alt="Thu Oct 10 2024 00:22:11 GMT-0700 (Pacific Daylight Time)">07:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">just picturing your PR reviews</td></tr>
  <tr class="msg" id="L322"><td class="ts-cell"><a class="ts" href="#L322" alt="Thu Oct 10 2024 00:22:13 GMT-0700 (Pacific Daylight Time)">07:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote><code>index.es2021</code></blockquote></mx-reply>RIP 1JS, this is ‚àûJS now</td></tr>
  <tr class="msg" id="L323"><td class="ts-cell"><a class="ts" href="#L323" alt="Thu Oct 10 2024 00:24:05 GMT-0700 (Pacific Daylight Time)">07:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">I can see healthy discussions where engines ask "Can this go in JSSugar?" and then tooling authors come back and say "This would result in way too much bundle bloat"</td></tr>
  <tr class="msg" id="L324"><td class="ts-cell"><a class="ts" href="#L324" alt="Thu Oct 10 2024 00:25:28 GMT-0700 (Pacific Daylight Time)">07:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">restricting things to ast transform would reduce complexity. right now you have free reign in what you can do, and that can introduce new bytecode operations etc. if its an AST transform, it is quite literally sugar as it can be rewritten</td></tr>
  <tr class="msg" id="L325"><td class="ts-cell"><a class="ts" href="#L325" alt="Thu Oct 10 2024 00:26:21 GMT-0700 (Pacific Daylight Time)">07:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">would that as a constraint remove the need for jssugar?</td></tr>
  <tr class="msg" id="L326"><td class="ts-cell"><a class="ts" href="#L326" alt="Thu Oct 10 2024 00:27:07 GMT-0700 (Pacific Daylight Time)">07:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">So again, mozilla isn't strictly supporting JSSugar as the solution here, we are co-signers of the problem</td></tr>
  <tr class="msg" id="L327"><td class="ts-cell"><a class="ts" href="#L327" alt="Thu Oct 10 2024 00:27:27 GMT-0700 (Pacific Daylight Time)">07:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">but if something is a pure ast transform than that only touches the tokenizer and the parser. it is simpler than a full engine implementation</td></tr>
  <tr class="msg" id="L328"><td class="ts-cell"><a class="ts" href="#L328" alt="Thu Oct 10 2024 00:27:51 GMT-0700 (Pacific Daylight Time)">07:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i'm hearing the tooling authors here loudly say "it's also bad for us"</td></tr>
  <tr class="msg" id="L329"><td class="ts-cell"><a class="ts" href="#L329" alt="Thu Oct 10 2024 00:28:03 GMT-0700 (Pacific Daylight Time)">07:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i want to reiterate the implication from that isn't "engines need to do it"</td></tr>
  <tr class="msg" id="L330"><td class="ts-cell"><a class="ts" href="#L330" alt="Thu Oct 10 2024 00:28:09 GMT-0700 (Pacific Daylight Time)">07:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">the implication from that is we are designing features wrong (for performance)</td></tr>
  <tr class="msg" id="L331"><td class="ts-cell"><a class="ts" href="#L331" alt="Thu Oct 10 2024 00:28:19 GMT-0700 (Pacific Daylight Time)">07:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">I don't want to say yes (to not derail the conversation, as we still have more to figure out here), but certain proposals currently in the pipeline that are not AST transforms (introducing custom behavior) would be significantly simpler if they were; for example explicit resource management</td></tr>
  <tr class="msg" id="L332"><td class="ts-cell"><a class="ts" href="#L332" alt="Thu Oct 10 2024 00:31:12 GMT-0700 (Pacific Daylight Time)">07:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@akirose:matrix.org">Aki</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">rbuckton</span>: do y'all collect analytics on targets?</td></tr>
  <tr class="msg" id="L333"><td class="ts-cell"><a class="ts" href="#L333" alt="Thu Oct 10 2024 00:31:46 GMT-0700 (Pacific Daylight Time)">07:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I'd have to get back to you on that</td></tr>
  <tr class="msg" id="L334"><td class="ts-cell"><a class="ts" href="#L334" alt="Thu Oct 10 2024 00:33:12 GMT-0700 (Pacific Daylight Time)">07:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Have we nailed down the details for which features have which cost? Seems like we should study this more and see what is possible to change, though the response to Shu‚Äôs tdz effort was disappointing</td></tr>
  <tr class="msg" id="L335"><td class="ts-cell"><a class="ts" href="#L335" alt="Thu Oct 10 2024 00:33:35 GMT-0700 (Pacific Daylight Time)">07:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">Side note:  Do we know which old features are slow?  I only know of the TDZ issue.  We run most of our production code using very modern untranspiled ES2023/ES2024.  Performance has not been problematic, and is obviously is much faster than if we downlevelled private field usage or async usage.</td></tr>
  <tr class="msg" id="L336"><td class="ts-cell"><a class="ts" href="#L336" alt="Thu Oct 10 2024 00:33:48 GMT-0700 (Pacific Daylight Time)">07:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">classes and TDZ are the most prominent ones</td></tr>
  <tr class="msg" id="L337"><td class="ts-cell"><a class="ts" href="#L337" alt="Thu Oct 10 2024 00:34:19 GMT-0700 (Pacific Daylight Time)">07:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> classes and TDZ are the most prominent ones</blockquote></mx-reply>How much slower are classes these days, after those optimizations you mentioned?</td></tr>
  <tr class="msg" id="L338"><td class="ts-cell"><a class="ts" href="#L338" alt="Thu Oct 10 2024 00:34:21 GMT-0700 (Pacific Daylight Time)">07:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">Profiling classes is my hobby.  I have not seen any lingering issues.</td></tr>
  <tr class="msg" id="L339"><td class="ts-cell"><a class="ts" href="#L339" alt="Thu Oct 10 2024 00:34:39 GMT-0700 (Pacific Daylight Time)">07:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Profiling classes is my hobby.  I have not seen any lingering issues.</blockquote></mx-reply>Even for private fields?</td></tr>
  <tr class="msg" id="L340"><td class="ts-cell"><a class="ts" href="#L340" alt="Thu Oct 10 2024 00:34:40 GMT-0700 (Pacific Daylight Time)">07:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> How much slower are classes these days, after those optimizations you mentioned?</blockquote></mx-reply>gotta ask a more specific question</td></tr>
  <tr class="msg" id="L341"><td class="ts-cell"><a class="ts" href="#L341" alt="Thu Oct 10 2024 00:34:58 GMT-0700 (Pacific Daylight Time)">07:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> gotta ask a more specific question</blockquote></mx-reply>Do you have any evidence to share that classes are slow?</td></tr>
  <tr class="msg" id="L342"><td class="ts-cell"><a class="ts" href="#L342" alt="Thu Oct 10 2024 00:35:30 GMT-0700 (Pacific Daylight Time)">07:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@marjakh:matrix.org">Marja H√∂ltt√§</span>&gt;</div></td><td class="msg-cell">when i was looking into it, i noticed that one thing classes can't do is omitting super ctors. some tools, when they notice the super ctor doesn't do anything interesting, just omit it when doing old-style classes. or they inline the super ctor workload into the subclass ctor and then omit it.</td></tr>
  <tr class="msg" id="L343"><td class="ts-cell"><a class="ts" href="#L343" alt="Thu Oct 10 2024 00:36:26 GMT-0700 (Pacific Daylight Time)">07:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@marjakh:matrix.org">Marja H√∂ltt√§</span>&gt;</div></td><td class="msg-cell">i optimized it a bit in v8, omitting trivial ctors, but it's still not as good as the oldschool version iirc.</td></tr>
  <tr class="msg" id="L344"><td class="ts-cell"><a class="ts" href="#L344" alt="Thu Oct 10 2024 00:36:52 GMT-0700 (Pacific Daylight Time)">07:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">So potentially it's for deeper class hierarchies where the issues become more measurable?</td></tr>
  <tr class="msg" id="L345"><td class="ts-cell"><a class="ts" href="#L345" alt="Thu Oct 10 2024 00:37:27 GMT-0700 (Pacific Daylight Time)">07:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">In principle, implementers could also implement AST transforms in the runtime.</td></tr>
  <tr class="msg" id="L346"><td class="ts-cell"><a class="ts" href="#L346" alt="Thu Oct 10 2024 00:37:32 GMT-0700 (Pacific Daylight Time)">07:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@marjakh:matrix.org">Marja H√∂ltt√§</span>&gt;</div></td><td class="msg-cell">before i optimized it, the problem was pretty visible even for shallow class hiearchies (since 1 call is so much more than 0 calls)</td></tr>
  <tr class="msg" id="L347"><td class="ts-cell"><a class="ts" href="#L347" alt="Thu Oct 10 2024 00:38:20 GMT-0700 (Pacific Daylight Time)">07:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell"><pre><code>class NewSkol { field = 1 }
vs
function OldSkol() { this.field = 1 }
</code></pre>
<p>I assume these are very close in performance these days? Assuming <code>Object.prototype</code> hasn't been patched</p>
</td></tr>
  <tr class="msg" id="L348"><td class="ts-cell"><a class="ts" href="#L348" alt="Thu Oct 10 2024 00:39:52 GMT-0700 (Pacific Daylight Time)">07:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell"><blockquote>
<p>call is so much more than 0 calls</p>
</blockquote>
<p>Good point!!</p>
</td></tr>
  <tr class="msg" id="L349"><td class="ts-cell"><a class="ts" href="#L349" alt="Thu Oct 10 2024 00:40:24 GMT-0700 (Pacific Daylight Time)">07:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">yeah this is a side bar that we've been discussing. But if it expands to a massive subtree that would potentially be a problem. We should go through the full exercise of JSSugar first before we start talking about this part</td></tr>
  <tr class="msg" id="L350"><td class="ts-cell"><a class="ts" href="#L350" alt="Thu Oct 10 2024 00:40:35 GMT-0700 (Pacific Daylight Time)">07:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">perhaps i was being too coy</td></tr>
  <tr class="msg" id="L351"><td class="ts-cell"><a class="ts" href="#L351" alt="Thu Oct 10 2024 00:40:38 GMT-0700 (Pacific Daylight Time)">07:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <pre><code>class NewSkol { field = 1 }
vs
function OldSkol() { this.field = 1 }
</code></pre>
<p>I assume these are very close in performance these days? Assuming <code>Object.prototype</code> hasn't been patched</p>
</blockquote></mx-reply>At least class is faster than <code>function OldSkol() { return {field: 1} }</code> ? (I'm not sure)</td></tr>
  <tr class="msg" id="L352"><td class="ts-cell"><a class="ts" href="#L352" alt="Thu Oct 10 2024 00:40:44 GMT-0700 (Pacific Daylight Time)">07:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i was referring to TS, <span class="nick-10">littledan</span></td></tr>
  <tr class="msg" id="L353"><td class="ts-cell"><a class="ts" href="#L353" alt="Thu Oct 10 2024 00:41:26 GMT-0700 (Pacific Daylight Time)">07:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">I mean, this is also about <em>how</em> we are defining syntax right now</td></tr>
  <tr class="msg" id="L354"><td class="ts-cell"><a class="ts" href="#L354" alt="Thu Oct 10 2024 00:42:27 GMT-0700 (Pacific Daylight Time)">07:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@marjakh:matrix.org">Marja H√∂ltt√§</span>&gt;</div></td><td class="msg-cell">i don't have the current numbers but i can look into it</td></tr>
  <tr class="msg" id="L355"><td class="ts-cell"><a class="ts" href="#L355" alt="Thu Oct 10 2024 00:43:13 GMT-0700 (Pacific Daylight Time)">07:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@marjakh:matrix.org">Marja H√∂ltt√§</span>&gt;</div></td><td class="msg-cell">probably that case should be on par</td></tr>
  <tr class="msg" id="L356"><td class="ts-cell"><a class="ts" href="#L356" alt="Thu Oct 10 2024 00:43:21 GMT-0700 (Pacific Daylight Time)">07:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@marjakh:matrix.org">Marja H√∂ltt√§</span>&gt;</div></td><td class="msg-cell">at least it would be less surprising</td></tr>
  <tr class="msg" id="L357"><td class="ts-cell"><a class="ts" href="#L357" alt="Thu Oct 10 2024 00:44:09 GMT-0700 (Pacific Daylight Time)">07:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@marjakh:matrix.org">Marja H√∂ltt√§</span>&gt;</div></td><td class="msg-cell">another class topic: private fields vs just normal fields</td></tr>
  <tr class="msg" id="L358"><td class="ts-cell"><a class="ts" href="#L358" alt="Thu Oct 10 2024 00:44:23 GMT-0700 (Pacific Daylight Time)">07:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@marjakh:matrix.org">Marja H√∂ltt√§</span>&gt;</div></td><td class="msg-cell">idk the exact overhead but i assume it's non-zero</td></tr>
  <tr class="msg" id="L359"><td class="ts-cell"><a class="ts" href="#L359" alt="Thu Oct 10 2024 00:44:59 GMT-0700 (Pacific Daylight Time)">07:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell"><p>Maybe the <code>define</code> vs the <code>set</code> still holds it back a little. I <em>think</em> some tools might convert the class into:</p>
<pre><code>class NewSkol { 
  constructor() {
    this.field = 1
  }
}
</code></pre>
</td></tr>
  <tr class="msg" id="L360"><td class="ts-cell"><a class="ts" href="#L360" alt="Thu Oct 10 2024 00:45:08 GMT-0700 (Pacific Daylight Time)">07:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">If a goal of JSSugar is for runtimes to look at desugared syntax to determine whether it is something to optimize, is there a reason runtimes aren't already doing this?</td></tr>
  <tr class="msg" id="L361"><td class="ts-cell"><a class="ts" href="#L361" alt="Thu Oct 10 2024 00:45:25 GMT-0700 (Pacific Daylight Time)">07:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">I think that <em>used</em> to be faster, in the past</td></tr>
  <tr class="msg" id="L362"><td class="ts-cell"><a class="ts" href="#L362" alt="Thu Oct 10 2024 00:45:32 GMT-0700 (Pacific Daylight Time)">07:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">wait, where was that a goal</td></tr>
  <tr class="msg" id="L363"><td class="ts-cell"><a class="ts" href="#L363" alt="Thu Oct 10 2024 00:45:51 GMT-0700 (Pacific Daylight Time)">07:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">(and we are already doing this, we try to see patterns that common frameworks and other popular libs use)</td></tr>
  <tr class="msg" id="L364"><td class="ts-cell"><a class="ts" href="#L364" alt="Thu Oct 10 2024 00:45:51 GMT-0700 (Pacific Daylight Time)">07:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Maybe not a goal, but you just made that statement two minutes ago</td></tr>
  <tr class="msg" id="L365"><td class="ts-cell"><a class="ts" href="#L365" alt="Thu Oct 10 2024 00:45:58 GMT-0700 (Pacific Daylight Time)">07:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i don't remember making that formulation</td></tr>
  <tr class="msg" id="L366"><td class="ts-cell"><a class="ts" href="#L366" alt="Thu Oct 10 2024 00:46:02 GMT-0700 (Pacific Daylight Time)">07:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">but in any case, we do do this</td></tr>
  <tr class="msg" id="L367"><td class="ts-cell"><a class="ts" href="#L367" alt="Thu Oct 10 2024 00:46:09 GMT-0700 (Pacific Daylight Time)">07:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">we are doing this by default for all features, so anything that compiles down to current JS <em>is</em> being targeted</td></tr>
  <tr class="msg" id="L368"><td class="ts-cell"><a class="ts" href="#L368" alt="Thu Oct 10 2024 00:46:17 GMT-0700 (Pacific Daylight Time)">07:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">because again, JS0 = current js</td></tr>
  <tr class="msg" id="L369"><td class="ts-cell"><a class="ts" href="#L369" alt="Thu Oct 10 2024 00:50:35 GMT-0700 (Pacific Daylight Time)">07:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">I recall one of places where classes were slow for no apparent benefit was empty constructors invoke the iterator protocol on <code>arguments</code> to forward them so you can't elide the call without a lot of optimizations. But maybe I'm misremembering that?</td></tr>
  <tr class="msg" id="L370"><td class="ts-cell"><a class="ts" href="#L370" alt="Thu Oct 10 2024 00:50:55 GMT-0700 (Pacific Daylight Time)">07:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">We fixed that</td></tr>
  <tr class="msg" id="L371"><td class="ts-cell"><a class="ts" href="#L371" alt="Thu Oct 10 2024 00:51:00 GMT-0700 (Pacific Daylight Time)">07:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i think we managed to fix that for default constructor</td></tr>
  <tr class="msg" id="L372"><td class="ts-cell"><a class="ts" href="#L372" alt="Thu Oct 10 2024 00:51:10 GMT-0700 (Pacific Daylight Time)">07:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">the point marja was talking about is the <code>this</code> TDZ basically</td></tr>
  <tr class="msg" id="L373"><td class="ts-cell"><a class="ts" href="#L373" alt="Thu Oct 10 2024 00:51:14 GMT-0700 (Pacific Daylight Time)">07:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><code>super()</code> <em>must</em> be there</td></tr>
  <tr class="msg" id="L374"><td class="ts-cell"><a class="ts" href="#L374" alt="Thu Oct 10 2024 00:51:26 GMT-0700 (Pacific Daylight Time)">07:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">this is not true for ES5-style classes, so Closure can just straight up elide it</td></tr>
  <tr class="msg" id="L375"><td class="ts-cell"><a class="ts" href="#L375" alt="Thu Oct 10 2024 00:51:35 GMT-0700 (Pacific Daylight Time)">07:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Ah right ok</td></tr>
  <tr class="msg" id="L376"><td class="ts-cell"><a class="ts" href="#L376" alt="Thu Oct 10 2024 00:52:06 GMT-0700 (Pacific Daylight Time)">07:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@apaprocki:matrix.org">Andrew Paprocki</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Side note:  Do we know which old features are slow?  I only know of the TDZ issue.  We run most of our production code using very modern untranspiled ES2023/ES2024.  Performance has not been problematic, and is obviously is much faster than if we downlevelled private field usage or async usage.</blockquote></mx-reply>while this is true, we're also huge TS -&gt; ES5 users</td></tr>
  <tr class="msg" id="L377"><td class="ts-cell"><a class="ts" href="#L377" alt="Thu Oct 10 2024 00:52:07 GMT-0700 (Pacific Daylight Time)">07:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">we didn't fix that if you typed <code>super(...arguments)</code> in <em>your</em> constructor though</td></tr>
  <tr class="msg" id="L378"><td class="ts-cell"><a class="ts" href="#L378" alt="Thu Oct 10 2024 00:53:06 GMT-0700 (Pacific Daylight Time)">07:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">no <code>this</code> before <code>super()</code> is important to maintain expectations about superclass state. The fact you can run <em>any</em> statements before <code>super()</code> is perhaps a failing of the class syntax.</td></tr>
  <tr class="msg" id="L379"><td class="ts-cell"><a class="ts" href="#L379" alt="Thu Oct 10 2024 00:53:15 GMT-0700 (Pacific Daylight Time)">07:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">right</td></tr>
  <tr class="msg" id="L380"><td class="ts-cell"><a class="ts" href="#L380" alt="Thu Oct 10 2024 00:53:26 GMT-0700 (Pacific Daylight Time)">07:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">and we've chatted about this before, but we should have designed it to be more static so the elision optiimzation can still apply</td></tr>
  <tr class="msg" id="L381"><td class="ts-cell"><a class="ts" href="#L381" alt="Thu Oct 10 2024 00:53:30 GMT-0700 (Pacific Daylight Time)">07:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">while maintaining that guardrail</td></tr>
  <tr class="msg" id="L382"><td class="ts-cell"><a class="ts" href="#L382" alt="Thu Oct 10 2024 00:53:35 GMT-0700 (Pacific Daylight Time)">07:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">not the dynamic thing we have for ES6 classes</td></tr>
  <tr class="msg" id="L383"><td class="ts-cell"><a class="ts" href="#L383" alt="Thu Oct 10 2024 00:54:00 GMT-0700 (Pacific Daylight Time)">07:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@apaprocki:matrix.org">Andrew Paprocki</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> and we've chatted about this before, but we should have designed it to be more static so the elision optiimzation can still apply</blockquote></mx-reply>isn't this an example where features should be designed w/ engine optimization up front?</td></tr>
  <tr class="msg" id="L384"><td class="ts-cell"><a class="ts" href="#L384" alt="Thu Oct 10 2024 00:54:42 GMT-0700 (Pacific Daylight Time)">07:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">no, the <code>super()</code> can't be elided thing is actually directly shown by a transpiler optimization that can no longer apply to ES6 classes that used to apply to ES5 classes</td></tr>
  <tr class="msg" id="L385"><td class="ts-cell"><a class="ts" href="#L385" alt="Thu Oct 10 2024 00:55:04 GMT-0700 (Pacific Daylight Time)">07:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">The fact you can forget to invoke the superclass constructor in an ES5-style class is a huge footgun, even if it is more performant.</td></tr>
  <tr class="msg" id="L386"><td class="ts-cell"><a class="ts" href="#L386" alt="Thu Oct 10 2024 00:55:58 GMT-0700 (Pacific Daylight Time)">07:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell"><code>!super()</code> :P</td></tr>
  <tr class="msg" id="L387"><td class="ts-cell"><a class="ts" href="#L387" alt="Thu Oct 10 2024 00:56:01 GMT-0700 (Pacific Daylight Time)">07:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> no, the <code>super()</code> can't be elided thing is actually directly shown by a transpiler optimization that can no longer apply to ES6 classes that used to apply to ES5 classes</blockquote></mx-reply>The optimization being in the textual representation of having to write <code>constructor() { super(); ... }</code>, not in the possibility that the runtime might be able to optimize away a <code>super()</code> as the first statement?</td></tr>
  <tr class="msg" id="L388"><td class="ts-cell"><a class="ts" href="#L388" alt="Thu Oct 10 2024 00:57:03 GMT-0700 (Pacific Daylight Time)">07:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">IMO, we should have had something like <code>constructor() : super() { }</code> akin to C++ or C#</td></tr>
  <tr class="msg" id="L389"><td class="ts-cell"><a class="ts" href="#L389" alt="Thu Oct 10 2024 00:57:43 GMT-0700 (Pacific Daylight Time)">07:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Where the absence of <code>: super()</code> implies you're invoking the superclass constructor with no arguments.</td></tr>
  <tr class="msg" id="L390"><td class="ts-cell"><a class="ts" href="#L390" alt="Thu Oct 10 2024 01:01:56 GMT-0700 (Pacific Daylight Time)">08:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">early prototypes of TypeScript experimented with a class syntax like <code>class C(a, b) { }</code> prior to the actual class syntax being standardized, which combined the constructor with the class name. C# actually has that now too.</td></tr>
  <tr class="msg" id="L391"><td class="ts-cell"><a class="ts" href="#L391" alt="Thu Oct 10 2024 01:02:26 GMT-0700 (Pacific Daylight Time)">08:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><p>Omitting <code>this</code> checks after <code>super()</code> is probably one of the most complex optimizations we have to do in Babel due to the performance cost, and indeed there I'd expect engines to not be able to do it on-the-fly.</p>
<p>I'd be curious to see though if a Babel-transpiled subclass constructor is indeed faster than the same code running natively.</p>
</td></tr>
  <tr class="msg" id="L392"><td class="ts-cell"><a class="ts" href="#L392" alt="Thu Oct 10 2024 01:02:34 GMT-0700 (Pacific Daylight Time)">08:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Not comparing with "how would people write the class if it was ES5"</td></tr>
  <tr class="msg" id="L393"><td class="ts-cell"><a class="ts" href="#L393" alt="Thu Oct 10 2024 01:02:42 GMT-0700 (Pacific Daylight Time)">08:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">But with what Babel actually emits</td></tr>
  <tr class="msg" id="L394"><td class="ts-cell"><a class="ts" href="#L394" alt="Thu Oct 10 2024 01:02:52 GMT-0700 (Pacific Daylight Time)">08:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>In C# you can now write</p>
<pre><code class="language-cs">class Sub(int x, int y) : Super(x, y)
{
  public X { get; set; } = x;
  public Y { get; set; } = y;
}
</code></pre>
</td></tr>
  <tr class="msg" id="L395"><td class="ts-cell"><a class="ts" href="#L395" alt="Thu Oct 10 2024 01:04:13 GMT-0700 (Pacific Daylight Time)">08:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>which is akin to writing</p>
<pre><code class="language-cs">class Sub : Super
{
  public X { get; set; }
  public Y { get; set; }

  public Sub(int x, int y) : Super(x, y) {
    X = x;
    Y = y;
  }
}
</code></pre>
</td></tr>
  <tr class="msg" id="L396"><td class="ts-cell"><a class="ts" href="#L396" alt="Thu Oct 10 2024 01:04:33 GMT-0700 (Pacific Daylight Time)">08:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>Omitting <code>this</code> checks after <code>super()</code> is probably one of the most complex optimizations we have to do in Babel due to the performance cost, and indeed there I'd expect engines to not be able to do it on-the-fly.</p>
<p>I'd be curious to see though if a Babel-transpiled subclass constructor is indeed faster than the same code running natively.</p>
</blockquote></mx-reply>Although probably it's complex because we do it on an AST and not on a linear bytecode</td></tr>
  <tr class="msg" id="L397"><td class="ts-cell"><a class="ts" href="#L397" alt="Thu Oct 10 2024 01:05:48 GMT-0700 (Pacific Daylight Time)">08:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">We could always introduce slight alternatives to the <code>class</code> syntax that would make <code>super()</code> invocation implied, such as <code>class Sub(a, b) extends Super() {}</code></td></tr>
  <tr class="msg" id="L398"><td class="ts-cell"><a class="ts" href="#L398" alt="Thu Oct 10 2024 01:13:29 GMT-0700 (Pacific Daylight Time)">08:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">(I'm not advocating for that specific syntax, just that its conceivable that we could do something of that nature)</td></tr>
  <tr class="msg" id="L399"><td class="ts-cell"><a class="ts" href="#L399" alt="Thu Oct 10 2024 01:23:03 GMT-0700 (Pacific Daylight Time)">08:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> when i was looking into it, i noticed that one thing classes can't do is omitting super ctors. some tools, when they notice the super ctor doesn't do anything interesting, just omit it when doing old-style classes. or they inline the super ctor workload into the subclass ctor and then omit it.</blockquote></mx-reply>Inlining the superclass ctor in an ES6 class wouldn't be sound since you can change it in JS via <code>Object.setPrototypeOf</code>. IMO, one of many problems with <code>class</code> design is that it was allowed to be too dynamic.</td></tr>
  <tr class="msg" id="L400"><td class="ts-cell"><a class="ts" href="#L400" alt="Thu Oct 10 2024 01:43:31 GMT-0700 (Pacific Daylight Time)">08:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> early prototypes of TypeScript experimented with a class syntax like <code>class C(a, b) { }</code> prior to the actual class syntax being standardized, which combined the constructor with the class name. C# actually has that now too.</blockquote></mx-reply>I like it. Why ES6 finally choose current style? Can we add back that syntax in the future?</td></tr>
  <tr class="msg" id="L401"><td class="ts-cell"><a class="ts" href="#L401" alt="Thu Oct 10 2024 01:44:47 GMT-0700 (Pacific Daylight Time)">08:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Could structs just be "class V2"? Is there any good reason to use classes if we get structs? (assuming that they'll support private state)</td></tr>
  <tr class="msg" id="L402"><td class="ts-cell"><a class="ts" href="#L402" alt="Thu Oct 10 2024 01:47:06 GMT-0700 (Pacific Daylight Time)">08:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell">Yeah, it seems current struct proposal is very like class V2 (though <code>shared struct</code> look like a very different thing)</td></tr>
  <tr class="msg" id="L403"><td class="ts-cell"><a class="ts" href="#L403" alt="Thu Oct 10 2024 01:54:19 GMT-0700 (Pacific Daylight Time)">08:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Could structs just be "class V2"? Is there any good reason to use classes if we get structs? (assuming that they'll support private state)</blockquote></mx-reply>what's the concrete thing you're thinking of? a different keyword than <code>struct</code>? or the messaging?</td></tr>
  <tr class="msg" id="L404"><td class="ts-cell"><a class="ts" href="#L404" alt="Thu Oct 10 2024 01:54:51 GMT-0700 (Pacific Daylight Time)">08:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i feel like the only compelling reason to use classes is expandos?</td></tr>
  <tr class="msg" id="L405"><td class="ts-cell"><a class="ts" href="#L405" alt="Thu Oct 10 2024 01:55:08 GMT-0700 (Pacific Daylight Time)">08:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">mixins maybe</td></tr>
  <tr class="msg" id="L406"><td class="ts-cell"><a class="ts" href="#L406" alt="Thu Oct 10 2024 01:58:27 GMT-0700 (Pacific Daylight Time)">08:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> what's the concrete thing you're thinking of? a different keyword than <code>struct</code>? or the messaging?</blockquote></mx-reply>Only messaging. "It's fine to not further optimize classes, because people should migrate to structs anyway"</td></tr>
  <tr class="msg" id="L407"><td class="ts-cell"><a class="ts" href="#L407" alt="Thu Oct 10 2024 01:58:44 GMT-0700 (Pacific Daylight Time)">08:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">And like, lint rules saying "use a struct here"</td></tr>
  <tr class="msg" id="L408"><td class="ts-cell"><a class="ts" href="#L408" alt="Thu Oct 10 2024 01:59:07 GMT-0700 (Pacific Daylight Time)">08:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Similarly to how the ecosystem migrated (at least, for hand-authored code) from var to let</td></tr>
  <tr class="msg" id="L409"><td class="ts-cell"><a class="ts" href="#L409" alt="Thu Oct 10 2024 02:29:17 GMT-0700 (Pacific Daylight Time)">09:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> We could always introduce slight alternatives to the <code>class</code> syntax that would make <code>super()</code> invocation implied, such as <code>class C(a, b) extends Super() {}</code></blockquote></mx-reply>This is difficult to square with <code>this</code>: should references to an and b be spelled as <code>this.a</code> or just <code>a</code>? If bare, does it follow lexical scoping semantics or <code>this</code> semantics?</td></tr>
  <tr class="msg" id="L410"><td class="ts-cell"><a class="ts" href="#L410" alt="Thu Oct 10 2024 02:30:07 GMT-0700 (Pacific Daylight Time)">09:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">It would certainly bare an interesting analogy to Swift, where structs are preferred over classes (but the semantics are completely different!)</td></tr>
  <tr class="msg" id="L411"><td class="ts-cell"><a class="ts" href="#L411" alt="Thu Oct 10 2024 02:31:12 GMT-0700 (Pacific Daylight Time)">09:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> This is difficult to square with <code>this</code>: should references to an and b be spelled as <code>this.a</code> or just <code>a</code>? If bare, does it follow lexical scoping semantics or <code>this</code> semantics?</blockquote></mx-reply>Also there is a question about how it interacts with super, as well as destructuring</td></tr>
  <tr class="msg" id="L412"><td class="ts-cell"><a class="ts" href="#L412" alt="Thu Oct 10 2024 04:33:15 GMT-0700 (Pacific Daylight Time)">11:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@marjakh:matrix.org">Marja H√∂ltt√§ (not here, use marja@google.com)</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">rbuckton</span>: the "superclass" can also change in ES5; the tools which were inlining the ctors were also assuming that the superclass won't change, because the program they're optimizing is well-behaved like that</td></tr>
  <tr class="msg" id="L413"><td class="ts-cell"><a class="ts" href="#L413" alt="Thu Oct 10 2024 04:34:08 GMT-0700 (Pacific Daylight Time)">11:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@marjakh:matrix.org">Marja H√∂ltt√§ (not here, use marja@google.com)</span>&gt;</div></td><td class="msg-cell">(they also straight up didn't inline in the ES6 version which is their problem, not our problem)</td></tr>
  <tr class="msg" id="L414"><td class="ts-cell"><a class="ts" href="#L414" alt="Thu Oct 10 2024 04:37:11 GMT-0700 (Pacific Daylight Time)">11:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@marjakh:matrix.org">Marja H√∂ltt√§ (not here, use marja@google.com)</span>&gt;</div></td><td class="msg-cell">but definitely, one problem was that the tools were making these assumptions and optimizing based on that, but as an engine we need to be prepared for everything being maximally dynamic, and weird things happening</td></tr>
  <tr class="msg" id="L415"><td class="ts-cell"><a class="ts" href="#L415" alt="Thu Oct 10 2024 04:37:22 GMT-0700 (Pacific Daylight Time)">11:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> IMO, we should have had something like <code>constructor() : super() { }</code> akin to C++ or C#</blockquote></mx-reply>This would have been great. It‚Äôs also the only way I could see us doing sound immutable fields.</td></tr>
  <tr class="msg" id="L416"><td class="ts-cell"><a class="ts" href="#L416" alt="Thu Oct 10 2024 04:40:17 GMT-0700 (Pacific Daylight Time)">11:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> idk the exact overhead but i assume it's non-zero</blockquote></mx-reply>We have been trying to identify any real slowdowns and don‚Äôt see one in V8. If anyone is experiencing a slowdown of private compared to public in V8, I would love to hear from you; maybe we could sponsor work to do the appropriate optimization.</td></tr>
  <tr class="msg" id="L417"><td class="ts-cell"><a class="ts" href="#L417" alt="Thu Oct 10 2024 04:42:15 GMT-0700 (Pacific Daylight Time)">11:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i was referring to TS, <span class="nick-10">littledan</span></blockquote></mx-reply>What was this about? Sorry I wasn‚Äôt checking in real time</td></tr>
  <tr class="msg" id="L418"><td class="ts-cell"><a class="ts" href="#L418" alt="Thu Oct 10 2024 04:45:19 GMT-0700 (Pacific Daylight Time)">11:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> restricting things to ast transform would reduce complexity. right now you have free reign in what you can do, and that can introduce new bytecode operations etc. if its an AST transform, it is quite literally sugar as it can be rewritten</blockquote></mx-reply>Yes, I agree that this would be a good design to follow where possible. And this is a great illustration of how, with slightly different mechanics, the needs of transpilers match the needs of interpreters. So we should work through both of those.</td></tr>
  <tr class="msg" id="L419"><td class="ts-cell"><a class="ts" href="#L419" alt="Thu Oct 10 2024 04:47:16 GMT-0700 (Pacific Daylight Time)">11:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> good luck designing, getting consensus, and getting people to adopt given TS :)</blockquote></mx-reply>TS is pretty good; I don‚Äôt see a pressing reason to develop and bless something else (though more experimentation is always good!)</td></tr>
  <tr class="msg" id="L420"><td class="ts-cell"><a class="ts" href="#L420" alt="Thu Oct 10 2024 04:49:57 GMT-0700 (Pacific Daylight Time)">11:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> it's baking time with the world</blockquote></mx-reply>Who do we expect to do this work? That is the question. I don‚Äôt see an easy answer. Tools have been pretty clear that most of them don‚Äôt want to ship features widely before they are baked. Same constraint as browsers! For the same reason: because it‚Äôs a lot of work to maintain these things if you set it up such that people can really use them in production.</td></tr>
  <tr class="msg" id="L421"><td class="ts-cell"><a class="ts" href="#L421" alt="Thu Oct 10 2024 04:53:24 GMT-0700 (Pacific Daylight Time)">11:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> can you elaborate? not familiar with the wasm usecase so well, so i don't know how import.defer solves this better than import source + import()</blockquote></mx-reply>Import.defer() would let you have a promise for the initial load+compile, and then synchronously instantiate on first access. Import.source + import() makes the latter async. This is all assuming you want native ESM imports, which Shu is assuming you don‚Äôt. I share Ron‚Äôs view (which I think the WasmCG adopted‚Ä¶) that we should build towards this world even if we aren‚Äôt there yet.</td></tr>
  <tr class="msg" id="L422"><td class="ts-cell"><a class="ts" href="#L422" alt="Thu Oct 10 2024 04:55:17 GMT-0700 (Pacific Daylight Time)">11:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Why would we expect the cost to be different in JSSugar vs this expansion?</td></tr>
  <tr class="msg" id="L423"><td class="ts-cell"><a class="ts" href="#L423" alt="Thu Oct 10 2024 04:57:06 GMT-0700 (Pacific Daylight Time)">11:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">But the custom code for extractors is much more direct than that of destructuring iterators</td></tr>
  <tr class="msg" id="L424"><td class="ts-cell"><a class="ts" href="#L424" alt="Thu Oct 10 2024 04:58:14 GMT-0700 (Pacific Daylight Time)">11:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Splitting the proposal in two and shipping the browser part means we make less progress on the ‚Äúlet it bake before shipping‚Äù front.</td></tr>
  <tr class="msg" id="L425"><td class="ts-cell"><a class="ts" href="#L425" alt="Thu Oct 10 2024 04:59:09 GMT-0700 (Pacific Daylight Time)">11:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Yes I like your 14 day goal, let‚Äôs see if we can change policy here.</td></tr>
  <tr class="msg" id="L426"><td class="ts-cell"><a class="ts" href="#L426" alt="Thu Oct 10 2024 05:01:44 GMT-0700 (Pacific Daylight Time)">12:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">So, how should we understand how bad this is? Is the length of the bytecode sufficient reason that we shouldn‚Äôt add such a feature to JSSugar even?</td></tr>
  <tr class="msg" id="L427"><td class="ts-cell"><a class="ts" href="#L427" alt="Thu Oct 10 2024 05:27:51 GMT-0700 (Pacific Daylight Time)">12:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">Ah got it</td></tr>
  <tr class="msg" id="L428"><td class="ts-cell"><a class="ts" href="#L428" alt="Thu Oct 10 2024 05:28:05 GMT-0700 (Pacific Daylight Time)">12:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">Ok so that is more of a use case I can understand</td></tr>
  <tr class="msg" id="L429"><td class="ts-cell"><a class="ts" href="#L429" alt="Thu Oct 10 2024 05:29:06 GMT-0700 (Pacific Daylight Time)">12:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">Let‚Äôs maybe talk about it next week, I need to better understand which options we would shut out if we do not do import.defer now</td></tr>
  <tr class="msg" id="L430"><td class="ts-cell"><a class="ts" href="#L430" alt="Thu Oct 10 2024 06:31:58 GMT-0700 (Pacific Daylight Time)">13:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Overall I won‚Äôt be heartbroken if we shut out that possibility. There are lots of ways that the functionality could be recovered. But it is a coherent use case.</td></tr>
  <tr class="msg" id="L431"><td class="ts-cell"><a class="ts" href="#L431" alt="Thu Oct 10 2024 10:50:48 GMT-0700 (Pacific Daylight Time)">17:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">I'm worried that shutting off <code>import.defer</code> does not allow us to re-introduce it later unless we do resolve what deferred exactly implies, which caused this problem in the first place. I was honestly surprised that <code>import defer</code> had lazy eval on any ns property get, even if that property isn't a known export. I had assumed since the beginning the lazy eval was only triggered on access of known exports. I understand that the latter requires fetching and parsing exports of the module, but I always assumed that what the goal of this proposal, and it didn't intend to support deferred parsing as well.</td></tr>
  <tr class="msg" id="L432"><td class="ts-cell"><a class="ts" href="#L432" alt="Thu Oct 10 2024 11:11:10 GMT-0700 (Pacific Daylight Time)">18:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">We <em>could</em> do `import.defer` later but it would have to either be a 3rd type of namespace different from the one returned by the static import. Or it would resolve to a wrapper object around the namespace. Or maybe there would be some other API all together. So door wouldn't be completely closed&nbsp;</td></tr>
  <tr class="msg" id="L433"><td class="ts-cell"><a class="ts" href="#L433" alt="Thu Oct 10 2024 16:10:57 GMT-0700 (Pacific Daylight Time)">23:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><p>i expect this to work exactly the same way as it does today (i.e. tools releasing support for stage 3 features earlier than browsers), and then we see uptake (or not). the biggest difference i heard and agree with is if transpilation is expected to be permanent, then people might not adopt it for reasons like "slow".</p>
<p>for those kind of features, which i suspect is rarer, indeed the feedback loop with performance (now tool codegen performance) is very similar to that of browsers. but i don't really quite get why that's such a zinger. i mean, yeah, it's a maintenance cost! that's why browsers don't wanna do it, for the reason of great cost to the users</p>
<p>if the tools, for those features, decide they <em>also</em> don't want to shoulder the cost, then as i keep repeating, it does not follow from that that browsers continue to shoulder the cost. it follows from that that we aren't designing features right, or it's a feature that we shouldn't have</p>
</td></tr>
  <tr class="msg" id="L434"><td class="ts-cell"><a class="ts" href="#L434" alt="Thu Oct 10 2024 16:12:23 GMT-0700 (Pacific Daylight Time)">23:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">but my thesis is that the cost to tools has a smaller blast radius, and is lower than in browsers</td></tr>
  <tr class="msg" id="L435"><td class="ts-cell"><a class="ts" href="#L435" alt="Thu Oct 10 2024 16:12:41 GMT-0700 (Pacific Daylight Time)">23:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">the counterargument i heard to <em>that</em> was "tools are volunteer projects"</td></tr>
  <tr class="msg" id="L436"><td class="ts-cell"><a class="ts" href="#L436" alt="Thu Oct 10 2024 16:13:15 GMT-0700 (Pacific Daylight Time)">23:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i wish they were better funded too and it's a structural issue the ecosystem needs to solve with incentives, not TC39, but it also doesn't follow from that fact that browsers need to do it</td></tr>
  <tr class="msg" id="L437"><td class="ts-cell"><a class="ts" href="#L437" alt="Thu Oct 10 2024 16:25:02 GMT-0700 (Pacific Daylight Time)">23:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@anthonybullard:matrix.org">Anthony Bullard</span>&gt;</div></td><td class="msg-cell">Maybe tools should start compiling to optimized byte code /s</td></tr>
  <tr class="msg" id="L438"><td class="ts-cell"><a class="ts" href="#L438" alt="Thu Oct 10 2024 16:25:13 GMT-0700 (Pacific Daylight Time)">23:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Is it a real production or just toy project?</blockquote></mx-reply><p>it's real. some library requires async initialization. if you import (or require) it synchronously, you'll need to await init() to make it work (no TLA because of cjs).<br>it also provides a then function in case you dynamic import it, it no longer need to await init().</p><p>adding unthenable to all module namespaces will break this, but I don't think those packages are widely adopted via native esmodule</p></td></tr>
  <tr class="msg" id="L439"><td class="ts-cell"><a class="ts" href="#L439" alt="Thu Oct 10 2024 16:40:46 GMT-0700 (Pacific Daylight Time)">23:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i wish they were better funded too and it's a structural issue the ecosystem needs to solve with incentives, not TC39, but it also doesn't follow from that fact that browsers need to do it</blockquote></mx-reply>would be interested in your take on what shifts in the ecosystem if V8 just stops doing that work; not that I advocate for that outcome, but I assume you've gamed that scenario out?</td></tr>
  <tr class="msg" id="L440"><td class="ts-cell"><a class="ts" href="#L440" alt="Thu Oct 10 2024 16:50:29 GMT-0700 (Pacific Daylight Time)">23:50</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span></div></td><td class="msg-cell">imagines a game-theoretic presentation on the power structures of the web, and the subsequent social media implosion</td></tr>

</tbody></table></div></div></div>
</body></html>