<!DOCTYPE html><html><head>
  <title>TC39 Delegates on 2023-09-27</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "TC39 Delegates";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">TC39 Delegates<br>2023-09-27<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2023-09-26" class="nav-link"><span>prev</span></a>
<a href="2023-09-28" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search TC39 Delegates">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Sep 26 2023 17:01:28 GMT-0700 (Pacific Daylight Time)">00:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I think we just need a <code>"use semicolons"</code> parser switch that turns off ASI honestly.</blockquote></mx-reply>Anti proposal: <code>"no asi harzards"</code> parser switch that fix ASI hazards according to developer's expectation. (Yeah , it's very very impossible , especially the committee introduced the very serious new hazards in ES2020)</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Sep 26 2023 17:54:49 GMT-0700 (Pacific Daylight Time)">00:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i doubt anything that even tacitly encourages omission of semicolons will achieve consensus :-)</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Sep 26 2023 18:01:01 GMT-0700 (Pacific Daylight Time)">01:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I've updated <a href="https://github.com/tc39/proposal-throw-expressions/pull/18">https://github.com/tc39/proposal-throw-expressions/pull/18</a> to use Static Semantics rules to avoid ASI for <code>+</code>, <code>-</code>, <code>/</code>, and <code>/=</code>, in keeping with how we also use Static Semantics rules to avoid ASI for optional chains followed by a template literal on a following line. I don't believe the end result is as complex as was suggested, but I'd appreciate if anyone with time could take a look over it as I am still short a reviewer.</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue Sep 26 2023 18:02:25 GMT-0700 (Pacific Daylight Time)">01:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i was going to say "tcq needs updating" but i refreshed and it's not loading at all for me now, just hanging</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Tue Sep 26 2023 18:02:28 GMT-0700 (Pacific Daylight Time)">01:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">TCQ down for everyone or just me?</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Tue Sep 26 2023 18:02:45 GMT-0700 (Pacific Daylight Time)">01:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">tcqdownforeveryone.status</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Tue Sep 26 2023 18:03:17 GMT-0700 (Pacific Daylight Time)">01:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">this would never happen if it was using IBM infra!  <code>/s</code></td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Tue Sep 26 2023 18:03:58 GMT-0700 (Pacific Daylight Time)">01:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">TCQ appears to be operational once again</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Tue Sep 26 2023 18:04:09 GMT-0700 (Pacific Daylight Time)">01:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">ü§û</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Tue Sep 26 2023 18:04:23 GMT-0700 (Pacific Daylight Time)">01:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i doubt anything that even tacitly encourages omission of semicolons will achieve consensus :-)</blockquote></mx-reply>yeah , we lost the feasibility forever after ES2020.</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Tue Sep 26 2023 18:05:21 GMT-0700 (Pacific Daylight Time)">01:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">not because of that, but because some number of us (at least one üòÑ) feel that omitting semicolons ~isn't a good~ is a harmful style to encourage.</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Tue Sep 26 2023 18:09:25 GMT-0700 (Pacific Daylight Time)">01:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">we should make a t-shirt</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Tue Sep 26 2023 18:09:35 GMT-0700 (Pacific Daylight Time)">01:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">"eat your vegetables and use your semicolons"</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Tue Sep 26 2023 18:09:54 GMT-0700 (Pacific Daylight Time)">01:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">you should use your whole colon tbh</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Tue Sep 26 2023 18:10:00 GMT-0700 (Pacific Daylight Time)">01:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">omitting semicolons is <code>eval()</code>!</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Tue Sep 26 2023 18:16:56 GMT-0700 (Pacific Daylight Time)">01:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">I never know how to understand the feedback "we would like to see this done but are unwilling to dedicate resources to doing it ourselves"</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Tue Sep 26 2023 18:17:20 GMT-0700 (Pacific Daylight Time)">01:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">is there not an inherent conflict there?</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Tue Sep 26 2023 18:17:52 GMT-0700 (Pacific Daylight Time)">01:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">Michael Ficarra</span>: i think you know in your heart how to understand that feedback</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Tue Sep 26 2023 18:17:59 GMT-0700 (Pacific Daylight Time)">01:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell">While I understand there are always people don't like omitting semicolons, also there are always people don't like to be forced to add semicolons. After all, I believe the original design of the language (by BE) encourage omitting semicolon, just like the most recent new application programming languages (swift, kotlin,  scala3, etc.) Unfortunately BE made some small mistakes and introduce ASI hazards (though the most ASI hazards patterns were not used by any one in early days), but it still fixable IMO, until ES2020 (the best time to fix asi harzards was ES5 strict mode, of coz).</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Tue Sep 26 2023 18:21:36 GMT-0700 (Pacific Daylight Time)">01:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">We should probably take this to TDZ;</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Tue Sep 26 2023 18:22:04 GMT-0700 (Pacific Daylight Time)">01:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">this still assumes that removing hazards from something hazardous is a "fix"</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Tue Sep 26 2023 18:23:49 GMT-0700 (Pacific Daylight Time)">01:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">this is a cool and relevant pr <a href="https://github.com/nodejs/node/pull/48528">https://github.com/nodejs/node/pull/48528</a></td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Tue Sep 26 2023 18:25:37 GMT-0700 (Pacific Daylight Time)">01:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">we actually see some huge performance boosts here</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Tue Sep 26 2023 18:25:58 GMT-0700 (Pacific Daylight Time)">01:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Yah, this will be considerably faster than <code>AsyncLocalStorage</code> in Node.js</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Tue Sep 26 2023 18:28:47 GMT-0700 (Pacific Daylight Time)">01:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell">Can you help me understanding this better?</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Tue Sep 26 2023 18:33:56 GMT-0700 (Pacific Daylight Time)">01:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@legendecas:matrix.org">Chengzhong Wu</span>&gt;</div></td><td class="msg-cell">And it is using mechanisms that are already available in V8</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Tue Sep 26 2023 18:35:43 GMT-0700 (Pacific Daylight Time)">01:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">I was hoping for the same</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Tue Sep 26 2023 18:40:06 GMT-0700 (Pacific Daylight Time)">01:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">V8 is a mutable codebase</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Tue Sep 26 2023 18:41:56 GMT-0700 (Pacific Daylight Time)">01:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i'd not consider the state things are today to be immutable -- e.g., don't assume <code>ContinuationPreservedEmbedderData</code> and its current performance characteristics to be like, unchanging facts of the world forever and forever</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Tue Sep 26 2023 18:42:03 GMT-0700 (Pacific Daylight Time)">01:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">I still not convinced by the motivation of get-intrinsics. it looks tooooo specialized to me, only spec lawyer will use it</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Tue Sep 26 2023 18:42:55 GMT-0700 (Pacific Daylight Time)">01:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i'd not consider the state things are today to be immutable -- e.g., don't assume <code>ContinuationPreservedEmbedderData</code> and its current performance characteristics to be like, unchanging facts of the world forever and forever</blockquote></mx-reply>yeah that's why it hasn't merged yet</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Tue Sep 26 2023 18:43:10 GMT-0700 (Pacific Daylight Time)">01:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">upstream discussion</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Tue Sep 26 2023 18:43:33 GMT-0700 (Pacific Daylight Time)">01:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">sometimes in readmes, I link to issues for open questions. Or at least I try not to claim that they are already solved.</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Tue Sep 26 2023 18:43:50 GMT-0700 (Pacific Daylight Time)">01:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> yeah that's why it hasn't merged yet</blockquote></mx-reply>yet champions keep repeating the argument that "no performance problem because V8 already ships this"</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Tue Sep 26 2023 18:43:58 GMT-0700 (Pacific Daylight Time)">01:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@leobalter:matrix.org">leobalter</span>&gt;</div></td><td class="msg-cell"><p>I can tell from my perspective how I want to dedicate resources on a proposal I‚Äôm championing going through a part that depends dedicated expertise that is out of my domain. This requires cross collaboration and contracting in which I‚Äôm doing.</p>
<p>Yet I‚Äôm not sure if you‚Äôre referring to me on ShadowRealm, so I don‚Äôt know if that‚Äôs the clarification you‚Äôre looking for, as you are also not asking for me directly or in a way that makes it seem you‚Äôre actually trying to understand.</p>
<p>With that said, it took us time, but we are happy to work again with people that can provide the expertise to complete the tasks needed.</p>
<p>I‚Äôm also glad that TC39 is composed by a diverse set of expertises and backgrounds. We all must aim for the goal of interoperability, which is the best value of JS.</p></td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Tue Sep 26 2023 18:44:27 GMT-0700 (Pacific Daylight Time)">01:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i'd not consider the state things are today to be immutable -- e.g., don't assume <code>ContinuationPreservedEmbedderData</code> and its current performance characteristics to be like, unchanging facts of the world forever and forever</blockquote></mx-reply>It's more like an existence proof that this technique isn't way too slow--I would've assumed the opposite before this had shipped.</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Tue Sep 26 2023 18:44:42 GMT-0700 (Pacific Daylight Time)">01:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> It's more like an existence proof that this technique isn't way too slow--I would've assumed the opposite before this had shipped.</blockquote></mx-reply>or it isn't way too much used</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Tue Sep 26 2023 18:44:55 GMT-0700 (Pacific Daylight Time)">01:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">like with.</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Tue Sep 26 2023 18:44:56 GMT-0700 (Pacific Daylight Time)">01:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">the copy is being done unconditionally</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Tue Sep 26 2023 18:45:15 GMT-0700 (Pacific Daylight Time)">01:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i understand the state of the world today</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Tue Sep 26 2023 18:45:17 GMT-0700 (Pacific Daylight Time)">01:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> yeah that's why it hasn't merged yet</blockquote></mx-reply>What is it that hasn't merged?</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Tue Sep 26 2023 18:45:22 GMT-0700 (Pacific Daylight Time)">01:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">(but actually I found <code>with</code> does not <em>that</em> bad on performance, at least in JSC)</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Tue Sep 26 2023 18:45:26 GMT-0700 (Pacific Daylight Time)">01:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">the pr i linked</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Tue Sep 26 2023 18:45:32 GMT-0700 (Pacific Daylight Time)">01:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i am saying, V8 retains the optionality to <em>become</em> unhappy with CPED</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Tue Sep 26 2023 18:45:42 GMT-0700 (Pacific Daylight Time)">01:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">because like shu said, google isn't sure that CPED will continue to exist</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Tue Sep 26 2023 18:46:09 GMT-0700 (Pacific Daylight Time)">01:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">what is CPED, Carnegie Project on the Education Doctorate?</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Tue Sep 26 2023 18:46:18 GMT-0700 (Pacific Daylight Time)">01:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">ContinuationPreservedEmbedderData</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Tue Sep 26 2023 18:47:21 GMT-0700 (Pacific Daylight Time)">01:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> ContinuationPreservedEmbedderData</blockquote></mx-reply>Still not understand what is it ü§£</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Tue Sep 26 2023 18:48:11 GMT-0700 (Pacific Daylight Time)">01:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Still not understand what is it ü§£</blockquote></mx-reply>its sort of like [[AsyncContextSnapshot]] in the async context proposal</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Tue Sep 26 2023 18:48:14 GMT-0700 (Pacific Daylight Time)">01:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">though it doesn't map exactly</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Tue Sep 26 2023 18:48:16 GMT-0700 (Pacific Daylight Time)">01:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">every variadic function makes TS team sweat...</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Tue Sep 26 2023 18:49:39 GMT-0700 (Pacific Daylight Time)">01:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> every variadic function makes TS team sweat...</blockquote></mx-reply>&lt;T&gt;(a: T): [T]<br>&lt;T, T1&gt;(a: T, b: T1): [T, T1]<br>&lt;T, T1, T2&gt;(a: T, b: T1, c: T2): [T, T1, T2]<br>...</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Tue Sep 26 2023 18:49:50 GMT-0700 (Pacific Daylight Time)">01:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">it happens in many languages</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Tue Sep 26 2023 18:52:04 GMT-0700 (Pacific Daylight Time)">01:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i don't think "i don't have an iterable" is a problem in practice</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Tue Sep 26 2023 18:52:39 GMT-0700 (Pacific Daylight Time)">01:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">if you have more than 0 things, there is generally a way to turn at least one of them into the head of the iterator</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Tue Sep 26 2023 18:52:46 GMT-0700 (Pacific Daylight Time)">01:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">[].values, Iterator.from, etc etc</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Tue Sep 26 2023 18:57:37 GMT-0700 (Pacific Daylight Time)">01:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><code>Iterator.once(value)</code> is potentially an option, assuming it were lighter weight than just using a single-element array.</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Tue Sep 26 2023 18:57:51 GMT-0700 (Pacific Daylight Time)">01:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><code>Iterator.of</code>, surely?</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Tue Sep 26 2023 18:58:24 GMT-0700 (Pacific Daylight Time)">01:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i'd not consider the state things are today to be immutable -- e.g., don't assume <code>ContinuationPreservedEmbedderData</code> and its current performance characteristics to be like, unchanging facts of the world forever and forever</blockquote></mx-reply>My design for AsyncContext was independent of CPED, it just happens that CPED is the exact same thing that's needed (it's based on the poorlyfill I implemented for Vercel). The priority is today's code is unaffected by the proposal (tasks need to store an additional pointer), resuming a task is unaffected (only a pointer swap), and we can figure out how to optimize creating new context afterwards. I found CPED while digging through the V8 codebase's host hooks afterwards, and it did exactly what I wanted.</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Tue Sep 26 2023 18:58:25 GMT-0700 (Pacific Daylight Time)">01:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">But generally, I'm fine with <code>concat</code>/<code>append</code>. I use them in my own packages.</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Tue Sep 26 2023 18:59:03 GMT-0700 (Pacific Daylight Time)">01:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">there is iter::once(value) in rust but i have basically never seen any code that uses it</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Tue Sep 26 2023 18:59:05 GMT-0700 (Pacific Daylight Time)">01:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i'm sure it exists</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Tue Sep 26 2023 18:59:15 GMT-0700 (Pacific Daylight Time)">01:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">but its far more uncommon than chaining so i wouldn't want to over-index on that</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Tue Sep 26 2023 18:59:21 GMT-0700 (Pacific Daylight Time)">01:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Justin Ridgewell</span>: i am responding to the argument that's repeatedly been put forth that this will not have performance problems because CPED exists in V8</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Tue Sep 26 2023 18:59:36 GMT-0700 (Pacific Daylight Time)">01:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">When I saw <code>Iterator.of</code> I immediately thought of <code>RxJS.of()</code> , though it has been while, that I did reactive streams, <code>.of()</code> looks like a good choice...</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Tue Sep 26 2023 18:59:56 GMT-0700 (Pacific Daylight Time)">01:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">Also <code>Array.of</code></td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Tue Sep 26 2023 18:59:56 GMT-0700 (Pacific Daylight Time)">01:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Justin Ridgewell</span>: i just want to make the point that that argument is not strictly true, since V8 retains the optionality to become unhappy with the performance CPED as it stands today</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Tue Sep 26 2023 19:00:17 GMT-0700 (Pacific Daylight Time)">02:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">all this being said, i don't know <em>why</em> v8 doesn't like CPED</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Tue Sep 26 2023 19:00:25 GMT-0700 (Pacific Daylight Time)">02:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i just know that every time it comes up someone from v8 makes sure to say that</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Tue Sep 26 2023 19:00:43 GMT-0700 (Pacific Daylight Time)">02:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I'll also add the C# has <code>Concat</code>, <code>Append</code>, and <code>Prepend</code> as well.</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Tue Sep 26 2023 19:00:48 GMT-0700 (Pacific Daylight Time)">02:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">we don't like it because it unconditionally incurs memory cost on every callback</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Tue Sep 26 2023 19:01:24 GMT-0700 (Pacific Daylight Time)">02:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-1">Justin Ridgewell</span>: i just want to make the point that that argument is not strictly true, since V8 retains the optionality to become unhappy with the performance CPED as it stands today</blockquote></mx-reply>If CPED is changed, that's fine. I think we're abusing it because it exists. AsyncContext requires something with similar functionality (global pointer, store a pointer on tasks, restore that pointer to resume).</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Tue Sep 26 2023 19:01:36 GMT-0700 (Pacific Daylight Time)">02:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">sounds good</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Tue Sep 26 2023 19:01:40 GMT-0700 (Pacific Daylight Time)">02:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">that matches my understanding</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Tue Sep 26 2023 19:02:10 GMT-0700 (Pacific Daylight Time)">02:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-1">Justin Ridgewell</span>: i am responding to the argument that's repeatedly been put forth that this will not have performance problems because CPED exists in V8</blockquote></mx-reply>It just proves that it can be implemented in a way that gives you the same performance as today's V8, which as Dan said, was unexpected for everyone.</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Tue Sep 26 2023 19:02:21 GMT-0700 (Pacific Daylight Time)">02:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">maybe in a few more years, we'll catch up with Python Itertools as of 2007!</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Tue Sep 26 2023 19:02:31 GMT-0700 (Pacific Daylight Time)">02:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">great work <span class="nick-14">Michael Ficarra</span></td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Tue Sep 26 2023 19:02:43 GMT-0700 (Pacific Daylight Time)">02:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">it is funny how much effort it takes to add a suite of functionality to js</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Tue Sep 26 2023 19:02:44 GMT-0700 (Pacific Daylight Time)">02:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">thanks <span class="nick-10">littledan</span> üôÇ</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Tue Sep 26 2023 19:03:05 GMT-0700 (Pacific Daylight Time)">02:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">watching how rust has evolved. stuff like "chain" barely gets any attention by anyone, whereas we have an entire proposal dedicated just to it</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Tue Sep 26 2023 19:03:17 GMT-0700 (Pacific Daylight Time)">02:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-7">snek</span>: I actually appreciate that because I didn't realise how many possible shapes of solutions there were to these problem spaces</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Tue Sep 26 2023 19:03:32 GMT-0700 (Pacific Daylight Time)">02:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">need conclusion+summary for iterator sequencing  üôè</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Tue Sep 26 2023 19:03:35 GMT-0700 (Pacific Daylight Time)">02:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">oh yeah its definitely important to consider these things</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Tue Sep 26 2023 19:03:42 GMT-0700 (Pacific Daylight Time)">02:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">I am confident that our process will produce a great solution here</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Tue Sep 26 2023 19:04:16 GMT-0700 (Pacific Daylight Time)">02:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">I think I'm still confused by the use of <code>.values()</code></td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Tue Sep 26 2023 19:04:18 GMT-0700 (Pacific Daylight Time)">02:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">can we advance the queue</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Tue Sep 26 2023 19:04:34 GMT-0700 (Pacific Daylight Time)">02:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">rkirsling</span>: don't worry about it, you will never need to use that</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Tue Sep 26 2023 19:05:03 GMT-0700 (Pacific Daylight Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I am confident that our process will produce a great solution here</blockquote></mx-reply>It's just to get an iterator from which you can call flatMap, which will then do the concat</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Tue Sep 26 2023 19:05:27 GMT-0700 (Pacific Daylight Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">rkirsling</span>: ^</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Tue Sep 26 2023 19:05:33 GMT-0700 (Pacific Daylight Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">TCQ has returned</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Tue Sep 26 2023 19:05:39 GMT-0700 (Pacific Daylight Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">high level the pattern is just flatMap(iterator of iterators)</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Tue Sep 26 2023 19:05:40 GMT-0700 (Pacific Daylight Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">oh thank god</td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Tue Sep 26 2023 19:06:04 GMT-0700 (Pacific Daylight Time)">02:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">petition to add <code>iter</code> as an alias for symbol.iterator on all built-in iterators</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Tue Sep 26 2023 19:06:14 GMT-0700 (Pacific Daylight Time)">02:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">only if we can use <code>::</code></td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Tue Sep 26 2023 19:06:23 GMT-0700 (Pacific Daylight Time)">02:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">:(</td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Tue Sep 26 2023 19:06:41 GMT-0700 (Pacific Daylight Time)">02:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> petition to add <code>iter</code> as an alias for symbol.iterator on all built-in iterators</blockquote></mx-reply>i think i'd be OK with this</td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Tue Sep 26 2023 19:08:22 GMT-0700 (Pacific Daylight Time)">02:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">so from the discussion today, I think I will lean toward <code>Iterator.of/Iterator.prototype.flat</code> for iterator sequencing stage 2</td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Tue Sep 26 2023 19:08:42 GMT-0700 (Pacific Daylight Time)">02:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">:(</td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Tue Sep 26 2023 19:08:44 GMT-0700 (Pacific Daylight Time)">02:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">and as a bonus, those methods are useful for other things</td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Tue Sep 26 2023 19:08:46 GMT-0700 (Pacific Daylight Time)">02:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I do not think people will reach for that</td></tr>
  <tr class="msg" id="L100"><td class="ts-cell"><a class="ts" href="#L100" alt="Tue Sep 26 2023 19:08:50 GMT-0700 (Pacific Daylight Time)">02:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I would really like a method named something obvious</td></tr>
  <tr class="msg" id="L101"><td class="ts-cell"><a class="ts" href="#L101" alt="Tue Sep 26 2023 19:08:56 GMT-0700 (Pacific Daylight Time)">02:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">that makes it clear you are doing concatenation</td></tr>
  <tr class="msg" id="L102"><td class="ts-cell"><a class="ts" href="#L102" alt="Tue Sep 26 2023 19:09:00 GMT-0700 (Pacific Daylight Time)">02:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i think a static method is a non-starter</td></tr>
  <tr class="msg" id="L103"><td class="ts-cell"><a class="ts" href="#L103" alt="Tue Sep 26 2023 19:09:03 GMT-0700 (Pacific Daylight Time)">02:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">for this problem space</td></tr>
  <tr class="msg" id="L104"><td class="ts-cell"><a class="ts" href="#L104" alt="Tue Sep 26 2023 19:09:23 GMT-0700 (Pacific Daylight Time)">02:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I'd be perfectly happy with <code>.concat</code>, <code>.append</code>, and <code>.prepend</code></td></tr>
  <tr class="msg" id="L105"><td class="ts-cell"><a class="ts" href="#L105" alt="Tue Sep 26 2023 19:09:43 GMT-0700 (Pacific Daylight Time)">02:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">also <code>flat</code> is problematic in ways that <code>concat</code> is not, wrt handling of non-iterable values</td></tr>
  <tr class="msg" id="L106"><td class="ts-cell"><a class="ts" href="#L106" alt="Tue Sep 26 2023 19:10:04 GMT-0700 (Pacific Daylight Time)">02:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i don't think "i don't have an iterable" is a problem in practice</blockquote></mx-reply>it is very common in practice to have something that can either be one thing, or a list of things, and <code>[].concat(x)</code> is incredibly useful and commonplace to ensure one always has an array without having to care</td></tr>
  <tr class="msg" id="L107"><td class="ts-cell"><a class="ts" href="#L107" alt="Tue Sep 26 2023 19:10:39 GMT-0700 (Pacific Daylight Time)">02:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i don't think i've ever seen code that has <code>[].concat(x)</code></td></tr>
  <tr class="msg" id="L108"><td class="ts-cell"><a class="ts" href="#L108" alt="Tue Sep 26 2023 19:10:41 GMT-0700 (Pacific Daylight Time)">02:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I have literally never seen that pattern in any code not written by you</td></tr>
  <tr class="msg" id="L109"><td class="ts-cell"><a class="ts" href="#L109" alt="Tue Sep 26 2023 19:10:45 GMT-0700 (Pacific Daylight Time)">02:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i believe you that it exists</td></tr>
  <tr class="msg" id="L110"><td class="ts-cell"><a class="ts" href="#L110" alt="Tue Sep 26 2023 19:10:47 GMT-0700 (Pacific Daylight Time)">02:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">lol</td></tr>
  <tr class="msg" id="L111"><td class="ts-cell"><a class="ts" href="#L111" alt="Tue Sep 26 2023 19:10:58 GMT-0700 (Pacific Daylight Time)">02:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jesse:igalia.com">Jesse (TC39)</span>&gt;</div></td><td class="msg-cell">OH <code>cons</code></td></tr>
  <tr class="msg" id="L112"><td class="ts-cell"><a class="ts" href="#L112" alt="Tue Sep 26 2023 19:10:59 GMT-0700 (Pacific Daylight Time)">02:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">but like, i wrote code with <code>chain</code> literally today (in rust) at work</td></tr>
  <tr class="msg" id="L113"><td class="ts-cell"><a class="ts" href="#L113" alt="Tue Sep 26 2023 19:11:08 GMT-0700 (Pacific Daylight Time)">02:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">none the less, i didn't make it up, it's common in lots of codebases i've worked in, which is why i use it in all of mine</td></tr>
  <tr class="msg" id="L114"><td class="ts-cell"><a class="ts" href="#L114" alt="Tue Sep 26 2023 19:11:19 GMT-0700 (Pacific Daylight Time)">02:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I have literally never seen that pattern in any code not written by you</blockquote></mx-reply>It definitely exists in transpiled emit, not sure how often it is hand-written</td></tr>
  <tr class="msg" id="L115"><td class="ts-cell"><a class="ts" href="#L115" alt="Tue Sep 26 2023 19:11:45 GMT-0700 (Pacific Daylight Time)">02:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i agree concatSpreadable is awful, but not because "concat takes an array or a scalar" is awful.</td></tr>
  <tr class="msg" id="L116"><td class="ts-cell"><a class="ts" href="#L116" alt="Tue Sep 26 2023 19:12:16 GMT-0700 (Pacific Daylight Time)">02:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">two things can be awful at the same time</td></tr>
  <tr class="msg" id="L117"><td class="ts-cell"><a class="ts" href="#L117" alt="Tue Sep 26 2023 19:12:50 GMT-0700 (Pacific Daylight Time)">02:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">"preferred" is also a bit strong. </td></tr>
  <tr class="msg" id="L118"><td class="ts-cell"><a class="ts" href="#L118" alt="Tue Sep 26 2023 19:13:09 GMT-0700 (Pacific Daylight Time)">02:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">sure. i just don't agree the second one is awful, because i don't think in terms of haskelly types</td></tr>
  <tr class="msg" id="L119"><td class="ts-cell"><a class="ts" href="#L119" alt="Tue Sep 26 2023 19:13:52 GMT-0700 (Pacific Daylight Time)">02:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">I mean even TypeScript-y types don't unify those things</td></tr>
  <tr class="msg" id="L120"><td class="ts-cell"><a class="ts" href="#L120" alt="Tue Sep 26 2023 19:14:18 GMT-0700 (Pacific Daylight Time)">02:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">you don't need some advanced type system to be told that that is inappropriate</td></tr>
  <tr class="msg" id="L121"><td class="ts-cell"><a class="ts" href="#L121" alt="Tue Sep 26 2023 19:14:22 GMT-0700 (Pacific Daylight Time)">02:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">waldemar</span>: You don't get a prototype, at least as far as we've been discussing.</td></tr>
  <tr class="msg" id="L122"><td class="ts-cell"><a class="ts" href="#L122" alt="Tue Sep 26 2023 19:14:39 GMT-0700 (Pacific Daylight Time)">02:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">As in, <code>[[Prototype]]</code> is <code>null</code></td></tr>
  <tr class="msg" id="L123"><td class="ts-cell"><a class="ts" href="#L123" alt="Tue Sep 26 2023 19:14:48 GMT-0700 (Pacific Daylight Time)">02:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> also <code>flat</code> is problematic in ways that <code>concat</code> is not, wrt handling of non-iterable values</blockquote></mx-reply>to elaborate on this: either it throws on non-iterable values, or it doesn't; both are problematic. throwing on non-iterable values means you can't use it like <code>Array.prototype.flat</code> to flatten a tree. not throwing on non-iterable values means that ever making anything iterable is a breaking change.</td></tr>
  <tr class="msg" id="L124"><td class="ts-cell"><a class="ts" href="#L124" alt="Tue Sep 26 2023 19:14:49 GMT-0700 (Pacific Daylight Time)">02:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">imo having a variable number of things is what vectors are for, not vector or item</td></tr>
  <tr class="msg" id="L125"><td class="ts-cell"><a class="ts" href="#L125" alt="Tue Sep 26 2023 19:14:49 GMT-0700 (Pacific Daylight Time)">02:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">typescript certainly can't handle <code>[].concat()</code> at all, it's been a long standing open issue on the repo. that doesn't mean it's bad, it's just another gap in TS's ability to describe JS.</td></tr>
  <tr class="msg" id="L126"><td class="ts-cell"><a class="ts" href="#L126" alt="Tue Sep 26 2023 19:16:49 GMT-0700 (Pacific Daylight Time)">02:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell">I remember the original draft don't allow prototype on shared struct values, now it's allowed but just omitted when transfer? Is my understanding correct?</td></tr>
  <tr class="msg" id="L127"><td class="ts-cell"><a class="ts" href="#L127" alt="Tue Sep 26 2023 19:17:12 GMT-0700 (Pacific Daylight Time)">02:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i'm curious why prototypes are a thing at all</td></tr>
  <tr class="msg" id="L128"><td class="ts-cell"><a class="ts" href="#L128" alt="Tue Sep 26 2023 19:17:16 GMT-0700 (Pacific Daylight Time)">02:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">on shared structs</td></tr>
  <tr class="msg" id="L129"><td class="ts-cell"><a class="ts" href="#L129" alt="Tue Sep 26 2023 19:17:28 GMT-0700 (Pacific Daylight Time)">02:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I remember the original draft don't allow prototype on shared struct values, now it's allowed but just omitted when transfer? Is my understanding correct?</blockquote></mx-reply>Not quite. If you want thread-local behavior, you must explicitly opt in and supply that behavior in each thread.</td></tr>
  <tr class="msg" id="L130"><td class="ts-cell"><a class="ts" href="#L130" alt="Tue Sep 26 2023 19:17:31 GMT-0700 (Pacific Daylight Time)">02:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i'd expect them to be an underlying implementation detail of some higher level thing</td></tr>
  <tr class="msg" id="L131"><td class="ts-cell"><a class="ts" href="#L131" alt="Tue Sep 26 2023 19:17:32 GMT-0700 (Pacific Daylight Time)">02:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i'm also confused why a struct would have behavior (functions) attached</td></tr>
  <tr class="msg" id="L132"><td class="ts-cell"><a class="ts" href="#L132" alt="Tue Sep 26 2023 19:17:43 GMT-0700 (Pacific Daylight Time)">02:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">me hearing "just an ephemeron" just now felt like like most people probably feel hearing "just a monoid object in the category of endofunctors on C"</td></tr>
  <tr class="msg" id="L133"><td class="ts-cell"><a class="ts" href="#L133" alt="Tue Sep 26 2023 19:17:47 GMT-0700 (Pacific Daylight Time)">02:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">I don't understand this. Why is throwing on non-iterables bad?</td></tr>
  <tr class="msg" id="L134"><td class="ts-cell"><a class="ts" href="#L134" alt="Tue Sep 26 2023 19:17:59 GMT-0700 (Pacific Daylight Time)">02:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i'd expect them to be an underlying implementation detail of some higher level thing</blockquote></mx-reply>There is a lot of complexity to this. Attaching behavior is very important.</td></tr>
  <tr class="msg" id="L135"><td class="ts-cell"><a class="ts" href="#L135" alt="Tue Sep 26 2023 19:18:00 GMT-0700 (Pacific Daylight Time)">02:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">maybe just reference counter...</td></tr>
  <tr class="msg" id="L136"><td class="ts-cell"><a class="ts" href="#L136" alt="Tue Sep 26 2023 19:18:15 GMT-0700 (Pacific Daylight Time)">02:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><em>having</em> behavior is. <em>attaching</em> it is just a style choice. functions can live separate from the data they affect.</td></tr>
  <tr class="msg" id="L137"><td class="ts-cell"><a class="ts" href="#L137" alt="Tue Sep 26 2023 19:18:29 GMT-0700 (Pacific Daylight Time)">02:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Not quite. If you want thread-local behavior, you must explicitly opt in and supply that behavior in each thread.</blockquote></mx-reply>Not fully understand... I mean I can always use functions (not methods)?</td></tr>
  <tr class="msg" id="L138"><td class="ts-cell"><a class="ts" href="#L138" alt="Tue Sep 26 2023 19:19:10 GMT-0700 (Pacific Daylight Time)">02:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> typescript certainly can't handle <code>[].concat()</code> at all, it's been a long standing open issue on the repo. that doesn't mean it's bad, it's just another gap in TS's ability to describe JS.</blockquote></mx-reply><a href="https://github.com/microsoft/TypeScript/issues/47351">https://github.com/microsoft/TypeScript/issues/47351</a> is the issue presumably</td></tr>
  <tr class="msg" id="L139"><td class="ts-cell"><a class="ts" href="#L139" alt="Tue Sep 26 2023 19:19:12 GMT-0700 (Pacific Daylight Time)">02:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">what i read is, "because it's actually an important use case to have an X and a non-X and concatenate them"</td></tr>
  <tr class="msg" id="L140"><td class="ts-cell"><a class="ts" href="#L140" alt="Tue Sep 26 2023 19:19:16 GMT-0700 (Pacific Daylight Time)">02:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <em>having</em> behavior is. <em>attaching</em> it is just a style choice. functions can live separate from the data they affect.</blockquote></mx-reply>No, attaching is necessary for many projects, this is a result of feedback from multiple sources experimenting with the origin trial. Not everyone needs it, but many do.</td></tr>
  <tr class="msg" id="L141"><td class="ts-cell"><a class="ts" href="#L141" alt="Tue Sep 26 2023 19:19:32 GMT-0700 (Pacific Daylight Time)">02:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <a href="https://github.com/microsoft/TypeScript/issues/47351">https://github.com/microsoft/TypeScript/issues/47351</a> is the issue presumably</blockquote></mx-reply>(with exactly 0 +1s...)</td></tr>
  <tr class="msg" id="L142"><td class="ts-cell"><a class="ts" href="#L142" alt="Tue Sep 26 2023 19:19:37 GMT-0700 (Pacific Daylight Time)">02:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i would love to be convinced that it's "need", but people quite often incorrectly think their wants are needs.</td></tr>
  <tr class="msg" id="L143"><td class="ts-cell"><a class="ts" href="#L143" alt="Tue Sep 26 2023 19:19:42 GMT-0700 (Pacific Daylight Time)">02:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> There is a lot of complexity to this. Attaching behavior is very important.</blockquote></mx-reply>I think it might be solved by extensions proposal? Don't use prototype, always use extension methods/accessor on shared struct values.</td></tr>
  <tr class="msg" id="L144"><td class="ts-cell"><a class="ts" href="#L144" alt="Tue Sep 26 2023 19:19:44 GMT-0700 (Pacific Daylight Time)">02:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i think sharing code within a struct makes sense and is well motivated. i think the whole prototype thing is weird</td></tr>
  <tr class="msg" id="L145"><td class="ts-cell"><a class="ts" href="#L145" alt="Tue Sep 26 2023 19:20:17 GMT-0700 (Pacific Daylight Time)">02:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> me hearing "just an ephemeron" just now felt like like most people probably feel hearing "just a monoid object in the category of endofunctors on C"</blockquote></mx-reply>at least ephemeron can be explained in 2 lines and <del>you may need a math phd to know the category theory</del></td></tr>
  <tr class="msg" id="L146"><td class="ts-cell"><a class="ts" href="#L146" alt="Tue Sep 26 2023 19:20:26 GMT-0700 (Pacific Daylight Time)">02:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I've been experimenting with this in TypeScript. I absolutely cannot use it efficiently without the ability to attach behavior, unless I use Proxy or completely duplicate our AST as regular objects for the public API.</td></tr>
  <tr class="msg" id="L147"><td class="ts-cell"><a class="ts" href="#L147" alt="Tue Sep 26 2023 19:20:35 GMT-0700 (Pacific Daylight Time)">02:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">anything else would be a significant breaking change.</td></tr>
  <tr class="msg" id="L148"><td class="ts-cell"><a class="ts" href="#L148" alt="Tue Sep 26 2023 19:20:46 GMT-0700 (Pacific Daylight Time)">02:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I don't understand this. Why is throwing on non-iterables bad?</blockquote></mx-reply>did you not see the "to flatten a tree" bit</td></tr>
  <tr class="msg" id="L149"><td class="ts-cell"><a class="ts" href="#L149" alt="Tue Sep 26 2023 19:20:54 GMT-0700 (Pacific Daylight Time)">02:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i don't understand why <code><a href="http://x.foo">x.foo</a>()</code> and <code>foo(x)</code> are meaningfully different in terms of capabilities</td></tr>
  <tr class="msg" id="L150"><td class="ts-cell"><a class="ts" href="#L150" alt="Tue Sep 26 2023 19:21:06 GMT-0700 (Pacific Daylight Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">(I think garbage collection is more difficult than category theory, but that's probably an issue of motivation)</td></tr>
  <tr class="msg" id="L151"><td class="ts-cell"><a class="ts" href="#L151" alt="Tue Sep 26 2023 19:21:17 GMT-0700 (Pacific Daylight Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">oh you mean like with a depth and stuff?</td></tr>
  <tr class="msg" id="L152"><td class="ts-cell"><a class="ts" href="#L152" alt="Tue Sep 26 2023 19:21:18 GMT-0700 (Pacific Daylight Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I've been experimenting with this in TypeScript. I absolutely cannot use it efficiently without the ability to attach behavior, unless I use Proxy or completely duplicate our AST as regular objects for the public API.</blockquote></mx-reply>this makes perfect sense to me. It's necessary to be able to use objects directly, without wrapping them.</td></tr>
  <tr class="msg" id="L153"><td class="ts-cell"><a class="ts" href="#L153" alt="Tue Sep 26 2023 19:21:18 GMT-0700 (Pacific Daylight Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i don't understand why <code><a href="http://x.foo">x.foo</a>()</code> and <code>foo(x)</code> are meaningfully different in terms of capabilities</blockquote></mx-reply>If you are writing a project from scratch, sure. If you are adapting an existing project, it might not be feasible.</td></tr>
  <tr class="msg" id="L154"><td class="ts-cell"><a class="ts" href="#L154" alt="Tue Sep 26 2023 19:21:21 GMT-0700 (Pacific Daylight Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">nobody should be doing that</td></tr>
  <tr class="msg" id="L155"><td class="ts-cell"><a class="ts" href="#L155" alt="Tue Sep 26 2023 19:21:24 GMT-0700 (Pacific Daylight Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">don't do that</td></tr>
  <tr class="msg" id="L156"><td class="ts-cell"><a class="ts" href="#L156" alt="Tue Sep 26 2023 19:21:30 GMT-0700 (Pacific Daylight Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I was assuming you would have the depth parameter like on arrays, yes</td></tr>
  <tr class="msg" id="L157"><td class="ts-cell"><a class="ts" href="#L157" alt="Tue Sep 26 2023 19:21:34 GMT-0700 (Pacific Daylight Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> If you are writing a project from scratch, sure. If you are adapting an existing project, it might not be feasible.</blockquote></mx-reply>that's not a need, that's just difficulty adapting to a different style.</td></tr>
  <tr class="msg" id="L158"><td class="ts-cell"><a class="ts" href="#L158" alt="Tue Sep 26 2023 19:21:35 GMT-0700 (Pacific Daylight Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">flat should not take a depth, it should always be 1</td></tr>
  <tr class="msg" id="L159"><td class="ts-cell"><a class="ts" href="#L159" alt="Tue Sep 26 2023 19:21:35 GMT-0700 (Pacific Daylight Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I've been experimenting with this in TypeScript. I absolutely cannot use it efficiently without the ability to attach behavior, unless I use Proxy or completely duplicate our AST as regular objects for the public API.</blockquote></mx-reply>to be clear what i'm suggesting is like. you could have a property of a struct, which holds a sharable code value (a function of sorts). it would probably be callable like <code>a.b()</code> even.</td></tr>
  <tr class="msg" id="L160"><td class="ts-cell"><a class="ts" href="#L160" alt="Tue Sep 26 2023 19:21:35 GMT-0700 (Pacific Daylight Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">would the plan be to not do that?</td></tr>
  <tr class="msg" id="L161"><td class="ts-cell"><a class="ts" href="#L161" alt="Tue Sep 26 2023 19:21:42 GMT-0700 (Pacific Daylight Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">yeah no depth parameter</td></tr>
  <tr class="msg" id="L162"><td class="ts-cell"><a class="ts" href="#L162" alt="Tue Sep 26 2023 19:21:47 GMT-0700 (Pacific Daylight Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">well</td></tr>
  <tr class="msg" id="L163"><td class="ts-cell"><a class="ts" href="#L163" alt="Tue Sep 26 2023 19:21:47 GMT-0700 (Pacific Daylight Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">fucking gross</td></tr>
  <tr class="msg" id="L164"><td class="ts-cell"><a class="ts" href="#L164" alt="Tue Sep 26 2023 19:21:55 GMT-0700 (Pacific Daylight Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i don't understand why <code><a href="http://x.foo">x.foo</a>()</code> and <code>foo(x)</code> are meaningfully different in terms of capabilities</blockquote></mx-reply>DX, and <a href="http://x.foo">x.foo</a>() could be virtual methods.</td></tr>
  <tr class="msg" id="L165"><td class="ts-cell"><a class="ts" href="#L165" alt="Tue Sep 26 2023 19:22:03 GMT-0700 (Pacific Daylight Time)">02:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">why? <code>.flat(Infinity)</code> is great</td></tr>
  <tr class="msg" id="L166"><td class="ts-cell"><a class="ts" href="#L166" alt="Tue Sep 26 2023 19:22:08 GMT-0700 (Pacific Daylight Time)">02:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> that's not a need, that's just difficulty adapting to a different style.</blockquote></mx-reply>That's not an option for a widely used public API, without breaking an entire ecosystem of tooling.</td></tr>
  <tr class="msg" id="L167"><td class="ts-cell"><a class="ts" href="#L167" alt="Tue Sep 26 2023 19:22:13 GMT-0700 (Pacific Daylight Time)">02:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">ü§¶‚Äç‚ôÇÔ∏è please</td></tr>
  <tr class="msg" id="L168"><td class="ts-cell"><a class="ts" href="#L168" alt="Tue Sep 26 2023 19:22:22 GMT-0700 (Pacific Daylight Time)">02:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I am ok with this but I think if you're going to push jordan to accept an asymmetry with array methods, you should push for <code>.concat</code>, the nice normal thing</td></tr>
  <tr class="msg" id="L169"><td class="ts-cell"><a class="ts" href="#L169" alt="Tue Sep 26 2023 19:22:45 GMT-0700 (Pacific Daylight Time)">02:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">And I'm not talking about TS, though we would be included in that. This is feedback from other attempts to migrate other projects to use structs.</td></tr>
  <tr class="msg" id="L170"><td class="ts-cell"><a class="ts" href="#L170" alt="Tue Sep 26 2023 19:23:04 GMT-0700 (Pacific Daylight Time)">02:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">what tooling ecosystem? certainly APIs may need breaking changes; asynchrony forces that, for example.</td></tr>
  <tr class="msg" id="L171"><td class="ts-cell"><a class="ts" href="#L171" alt="Tue Sep 26 2023 19:23:13 GMT-0700 (Pacific Daylight Time)">02:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">it's perfectly fine if multithreading forces that too (even if it's ideal not to)

we have semver and code refactoring tools and codemods that can make that easier.</td></tr>
  <tr class="msg" id="L172"><td class="ts-cell"><a class="ts" href="#L172" alt="Tue Sep 26 2023 19:23:52 GMT-0700 (Pacific Daylight Time)">02:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I don't believe that it is, and there are solutions under discussion to make that a non-issue.</td></tr>
  <tr class="msg" id="L173"><td class="ts-cell"><a class="ts" href="#L173" alt="Tue Sep 26 2023 19:25:28 GMT-0700 (Pacific Daylight Time)">02:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Need pipeline and static functions ü§û</td></tr>
  <tr class="msg" id="L174"><td class="ts-cell"><a class="ts" href="#L174" alt="Tue Sep 26 2023 19:25:47 GMT-0700 (Pacific Daylight Time)">02:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">oof, didn't we already make this global registry mistake with symbols?</td></tr>
  <tr class="msg" id="L175"><td class="ts-cell"><a class="ts" href="#L175" alt="Tue Sep 26 2023 19:26:15 GMT-0700 (Pacific Daylight Time)">02:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@gibson042:matrix.org">Richard Gibson</span>&gt;</div></td><td class="msg-cell">this is even worse than that; it links objects!</td></tr>
  <tr class="msg" id="L176"><td class="ts-cell"><a class="ts" href="#L176" alt="Tue Sep 26 2023 19:26:23 GMT-0700 (Pacific Daylight Time)">02:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">when the solution is "universal state!" then maybe the problem's not worth solving</td></tr>
  <tr class="msg" id="L177"><td class="ts-cell"><a class="ts" href="#L177" alt="Tue Sep 26 2023 19:26:26 GMT-0700 (Pacific Daylight Time)">02:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">what global registry mistake? registered symbols are super useful</td></tr>
  <tr class="msg" id="L178"><td class="ts-cell"><a class="ts" href="#L178" alt="Tue Sep 26 2023 19:26:48 GMT-0700 (Pacific Daylight Time)">02:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i'm not sure how, they're just fancy strings.</td></tr>
  <tr class="msg" id="L179"><td class="ts-cell"><a class="ts" href="#L179" alt="Tue Sep 26 2023 19:27:04 GMT-0700 (Pacific Daylight Time)">02:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">yeah just use a string</td></tr>
  <tr class="msg" id="L180"><td class="ts-cell"><a class="ts" href="#L180" alt="Tue Sep 26 2023 19:27:31 GMT-0700 (Pacific Daylight Time)">02:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">strings can be constructed</td></tr>
  <tr class="msg" id="L181"><td class="ts-cell"><a class="ts" href="#L181" alt="Tue Sep 26 2023 19:27:35 GMT-0700 (Pacific Daylight Time)">02:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">from random places</td></tr>
  <tr class="msg" id="L182"><td class="ts-cell"><a class="ts" href="#L182" alt="Tue Sep 26 2023 19:27:37 GMT-0700 (Pacific Daylight Time)">02:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> yeah just use a string</blockquote></mx-reply>Then why did we add <code>Symbol.iterator</code>? It's just a fancy <code>__iterator__</code>.</td></tr>
  <tr class="msg" id="L183"><td class="ts-cell"><a class="ts" href="#L183" alt="Tue Sep 26 2023 19:27:40 GMT-0700 (Pacific Daylight Time)">02:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i don't think the domain overlap makes sense</td></tr>
  <tr class="msg" id="L184"><td class="ts-cell"><a class="ts" href="#L184" alt="Tue Sep 26 2023 19:27:53 GMT-0700 (Pacific Daylight Time)">02:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell">yeah, I also don't fully understand the use cases of <code>Symbol.for()</code></td></tr>
  <tr class="msg" id="L185"><td class="ts-cell"><a class="ts" href="#L185" alt="Tue Sep 26 2023 19:28:06 GMT-0700 (Pacific Daylight Time)">02:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-7">snek</span>: that's the same thing as passing the string to Symbol.for...</td></tr>
  <tr class="msg" id="L186"><td class="ts-cell"><a class="ts" href="#L186" alt="Tue Sep 26 2023 19:28:10 GMT-0700 (Pacific Daylight Time)">02:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i think a great example is <code>Symbol.for('nodejs.util.inspect')</code></td></tr>
  <tr class="msg" id="L187"><td class="ts-cell"><a class="ts" href="#L187" alt="Tue Sep 26 2023 19:28:13 GMT-0700 (Pacific Daylight Time)">02:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> what global registry mistake? registered symbols are super useful</blockquote></mx-reply>this is the first time I've heard anyone express this opinion - what are they useful for?</td></tr>
  <tr class="msg" id="L188"><td class="ts-cell"><a class="ts" href="#L188" alt="Tue Sep 26 2023 19:28:24 GMT-0700 (Pacific Daylight Time)">02:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">what does that do that a string wouldn't do?</td></tr>
  <tr class="msg" id="L189"><td class="ts-cell"><a class="ts" href="#L189" alt="Tue Sep 26 2023 19:28:30 GMT-0700 (Pacific Daylight Time)">02:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">not sure how that's great; node would work the same if it used a non-global symbol - and in fact it <em>did</em> use a non-global one prior to the change to make it global</td></tr>
  <tr class="msg" id="L190"><td class="ts-cell"><a class="ts" href="#L190" alt="Tue Sep 26 2023 19:28:31 GMT-0700 (Pacific Daylight Time)">02:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i think a great example is <code>Symbol.for('nodejs.util.inspect')</code></blockquote></mx-reply>u could also use the string directly as key...</td></tr>
  <tr class="msg" id="L191"><td class="ts-cell"><a class="ts" href="#L191" alt="Tue Sep 26 2023 19:28:39 GMT-0700 (Pacific Daylight Time)">02:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">you could use a string</td></tr>
  <tr class="msg" id="L192"><td class="ts-cell"><a class="ts" href="#L192" alt="Tue Sep 26 2023 19:28:57 GMT-0700 (Pacific Daylight Time)">02:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">but strings can come from random places</td></tr>
  <tr class="msg" id="L193"><td class="ts-cell"><a class="ts" href="#L193" alt="Tue Sep 26 2023 19:29:05 GMT-0700 (Pacific Daylight Time)">02:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">so can global symbols</td></tr>
  <tr class="msg" id="L194"><td class="ts-cell"><a class="ts" href="#L194" alt="Tue Sep 26 2023 19:29:07 GMT-0700 (Pacific Daylight Time)">02:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">you could end up with that object by accident or maliciously </td></tr>
  <tr class="msg" id="L195"><td class="ts-cell"><a class="ts" href="#L195" alt="Tue Sep 26 2023 19:29:14 GMT-0700 (Pacific Daylight Time)">02:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">same with global symbols</td></tr>
  <tr class="msg" id="L196"><td class="ts-cell"><a class="ts" href="#L196" alt="Tue Sep 26 2023 19:29:20 GMT-0700 (Pacific Daylight Time)">02:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">say something that you can't say about strings</td></tr>
  <tr class="msg" id="L197"><td class="ts-cell"><a class="ts" href="#L197" alt="Tue Sep 26 2023 19:29:24 GMT-0700 (Pacific Daylight Time)">02:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">no, you have to choose to invoke Symbol.for on some random string</td></tr>
  <tr class="msg" id="L198"><td class="ts-cell"><a class="ts" href="#L198" alt="Tue Sep 26 2023 19:29:34 GMT-0700 (Pacific Daylight Time)">02:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">its not the default</td></tr>
  <tr class="msg" id="L199"><td class="ts-cell"><a class="ts" href="#L199" alt="Tue Sep 26 2023 19:29:37 GMT-0700 (Pacific Daylight Time)">02:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">maybe less likely by accident but equally likely by malice?</td></tr>
  <tr class="msg" id="L200"><td class="ts-cell"><a class="ts" href="#L200" alt="Tue Sep 26 2023 19:29:50 GMT-0700 (Pacific Daylight Time)">02:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell">To be honest , global symbol might be a little bit safer than string, but just a very little...</td></tr>
  <tr class="msg" id="L201"><td class="ts-cell"><a class="ts" href="#L201" alt="Tue Sep 26 2023 19:29:52 GMT-0700 (Pacific Daylight Time)">02:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> same with global symbols</blockquote></mx-reply>and if you're using a symbol this way, you're deliberately trying to break things</td></tr>
  <tr class="msg" id="L202"><td class="ts-cell"><a class="ts" href="#L202" alt="Tue Sep 26 2023 19:29:56 GMT-0700 (Pacific Daylight Time)">02:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><em>using</em> some random string is pretty unlikely too, especially that java package style node uses</td></tr>
  <tr class="msg" id="L203"><td class="ts-cell"><a class="ts" href="#L203" alt="Tue Sep 26 2023 19:30:02 GMT-0700 (Pacific Daylight Time)">02:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">I dunno, I randomly call Symbol.for on things all the time, just in case</td></tr>
  <tr class="msg" id="L204"><td class="ts-cell"><a class="ts" href="#L204" alt="Tue Sep 26 2023 19:30:44 GMT-0700 (Pacific Daylight Time)">02:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">...i don't understand what could possibly be gross about a depth. It's just a shorthand for .flat().flat().flat()...</td></tr>
  <tr class="msg" id="L205"><td class="ts-cell"><a class="ts" href="#L205" alt="Tue Sep 26 2023 19:30:47 GMT-0700 (Pacific Daylight Time)">02:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">this is very amusing because I always thought there was secretly a good reason why Symbol.for is a thing and I simply never needed to know it</td></tr>
  <tr class="msg" id="L206"><td class="ts-cell"><a class="ts" href="#L206" alt="Tue Sep 26 2023 19:30:56 GMT-0700 (Pacific Daylight Time)">02:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">There have been several attempts to use the origin trial, which is currently data only, to adopt shared structs in existing projects. The feedback has been the same: Without the ability to attach behavior, shared structs require a complete rewrite of the project, including the public API, which is a burden that we would rather not enforce on the project maintainers, nor their consumers. That makes the feature unusable for projects that would sorely benefit from the capability.</td></tr>
  <tr class="msg" id="L207"><td class="ts-cell"><a class="ts" href="#L207" alt="Tue Sep 26 2023 19:30:59 GMT-0700 (Pacific Daylight Time)">02:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i am surprised to hear that people don't like symbol.for</td></tr>
  <tr class="msg" id="L208"><td class="ts-cell"><a class="ts" href="#L208" alt="Tue Sep 26 2023 19:31:02 GMT-0700 (Pacific Daylight Time)">02:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">And personally, I use <code>.flat(Infinity)</code> more than any other value. ^_^</td></tr>
  <tr class="msg" id="L209"><td class="ts-cell"><a class="ts" href="#L209" alt="Tue Sep 26 2023 19:31:13 GMT-0700 (Pacific Daylight Time)">02:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">its definitely rare use cases but i think its well motivated at least</td></tr>
  <tr class="msg" id="L210"><td class="ts-cell"><a class="ts" href="#L210" alt="Tue Sep 26 2023 19:32:27 GMT-0700 (Pacific Daylight Time)">02:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> There have been several attempts to use the origin trial, which is currently data only, to adopt shared structs in existing projects. The feedback has been the same: Without the ability to attach behavior, shared structs require a complete rewrite of the project, including the public API, which is a burden that we would rather not enforce on the project maintainers, nor their consumers. That makes the feature unusable for projects that would sorely benefit from the capability.</blockquote></mx-reply>what is the difference between <code>thing = wrap(struct)</code> and <code>Object.setPrototypeOf(struct, ...)</code>?</td></tr>
  <tr class="msg" id="L211"><td class="ts-cell"><a class="ts" href="#L211" alt="Tue Sep 26 2023 19:32:42 GMT-0700 (Pacific Daylight Time)">02:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> what is the difference between <code>thing = wrap(struct)</code> and <code>Object.setPrototypeOf(struct, ...)</code>?</blockquote></mx-reply>Performance and memory consumption.</td></tr>
  <tr class="msg" id="L212"><td class="ts-cell"><a class="ts" href="#L212" alt="Tue Sep 26 2023 19:33:23 GMT-0700 (Pacific Daylight Time)">02:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">In TypeScript, If you have a large AST, you either double your memory consumption for the AST, or redirect through accessors which is slower.</td></tr>
  <tr class="msg" id="L213"><td class="ts-cell"><a class="ts" href="#L213" alt="Tue Sep 26 2023 19:33:47 GMT-0700 (Pacific Daylight Time)">02:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">you want the entire AST to be shared structs?</td></tr>
  <tr class="msg" id="L214"><td class="ts-cell"><a class="ts" href="#L214" alt="Tue Sep 26 2023 19:34:09 GMT-0700 (Pacific Daylight Time)">02:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">even in languages with proper thread apis and such i would never want to do that</td></tr>
  <tr class="msg" id="L215"><td class="ts-cell"><a class="ts" href="#L215" alt="Tue Sep 26 2023 19:34:11 GMT-0700 (Pacific Daylight Time)">02:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> you want the entire AST to be shared structs?</blockquote></mx-reply>That's how I would see us using this proposal in Babel too</td></tr>
  <tr class="msg" id="L216"><td class="ts-cell"><a class="ts" href="#L216" alt="Tue Sep 26 2023 19:34:17 GMT-0700 (Pacific Daylight Time)">02:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Yes. That is what I'm doing right now to parallelize the TypeScript parser in an experiment.</td></tr>
  <tr class="msg" id="L217"><td class="ts-cell"><a class="ts" href="#L217" alt="Tue Sep 26 2023 19:35:01 GMT-0700 (Pacific Daylight Time)">02:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">And we could parallelize transform by having locks on subtrees</td></tr>
  <tr class="msg" id="L218"><td class="ts-cell"><a class="ts" href="#L218" alt="Tue Sep 26 2023 19:35:28 GMT-0700 (Pacific Daylight Time)">02:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">have you looked into how projects like rslint work</td></tr>
  <tr class="msg" id="L219"><td class="ts-cell"><a class="ts" href="#L219" alt="Tue Sep 26 2023 19:35:36 GMT-0700 (Pacific Daylight Time)">02:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I could also parallelize emit, so I'd prefer to use the same AST everywhere.</td></tr>
  <tr class="msg" id="L220"><td class="ts-cell"><a class="ts" href="#L220" alt="Tue Sep 26 2023 19:36:43 GMT-0700 (Pacific Daylight Time)">02:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Does rslint operate on a file on a time, or does it require whole program knowledge?</td></tr>
  <tr class="msg" id="L221"><td class="ts-cell"><a class="ts" href="#L221" alt="Tue Sep 26 2023 19:37:10 GMT-0700 (Pacific Daylight Time)">02:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i'm not sure if it does whole program but i was more talking about how it operates on a shared AST in parallel</td></tr>
  <tr class="msg" id="L222"><td class="ts-cell"><a class="ts" href="#L222" alt="Tue Sep 26 2023 19:37:26 GMT-0700 (Pacific Daylight Time)">02:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">TabAtkins</span>: an infinitely-nested iterator will not be able to yield anything</td></tr>
  <tr class="msg" id="L223"><td class="ts-cell"><a class="ts" href="#L223" alt="Tue Sep 26 2023 19:38:01 GMT-0700 (Pacific Daylight Time)">02:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I am not familiar with the internals of rslint.</td></tr>
  <tr class="msg" id="L224"><td class="ts-cell"><a class="ts" href="#L224" alt="Tue Sep 26 2023 19:38:04 GMT-0700 (Pacific Daylight Time)">02:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Yeah and mapping over an infinite iterator will infinite loop too. Is this something that's easy to hit by accident?</td></tr>
  <tr class="msg" id="L225"><td class="ts-cell"><a class="ts" href="#L225" alt="Tue Sep 26 2023 19:38:17 GMT-0700 (Pacific Daylight Time)">02:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">it might be good to look at how projects which operate on a "shared ast" as a concept work in other languages</td></tr>
  <tr class="msg" id="L226"><td class="ts-cell"><a class="ts" href="#L226" alt="Tue Sep 26 2023 19:38:26 GMT-0700 (Pacific Daylight Time)">02:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">basically nobody uses infinite iterators, that's just not a problem that happens</td></tr>
  <tr class="msg" id="L227"><td class="ts-cell"><a class="ts" href="#L227" alt="Tue Sep 26 2023 19:38:30 GMT-0700 (Pacific Daylight Time)">02:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">rslint is one example, but there are lots</td></tr>
  <tr class="msg" id="L228"><td class="ts-cell"><a class="ts" href="#L228" alt="Tue Sep 26 2023 19:38:52 GMT-0700 (Pacific Daylight Time)">02:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">anyway i suspect i will end up losing this argument, i don't have the energy to care about typescript internals more than you</td></tr>
  <tr class="msg" id="L229"><td class="ts-cell"><a class="ts" href="#L229" alt="Tue Sep 26 2023 19:40:46 GMT-0700 (Pacific Daylight Time)">02:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">JS inability to paralellize and share memory is the main reason we didn't use it for Turbobpack.</td></tr>
  <tr class="msg" id="L230"><td class="ts-cell"><a class="ts" href="#L230" alt="Tue Sep 26 2023 19:40:59 GMT-0700 (Pacific Daylight Time)">02:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">I find the idea of <em>"having non-byte stuff shared"</em> , quite easy to grasp, that this <em>"should work with functions"</em> as well (bcause it is JS), seems no to be so far-fetched. Question is, whether this is really doable, not so much to me, whether someone would use it.</td></tr>
  <tr class="msg" id="L231"><td class="ts-cell"><a class="ts" href="#L231" alt="Tue Sep 26 2023 19:41:34 GMT-0700 (Pacific Daylight Time)">02:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">We have proper sharing in Rust, but we don't access the same AST in parallel, only split the parsing/transforming between threads</td></tr>
  <tr class="msg" id="L232"><td class="ts-cell"><a class="ts" href="#L232" alt="Tue Sep 26 2023 19:41:37 GMT-0700 (Pacific Daylight Time)">02:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">if we just have shared functions of some form, we don't need the prototype hacks</td></tr>
  <tr class="msg" id="L233"><td class="ts-cell"><a class="ts" href="#L233" alt="Tue Sep 26 2023 19:41:43 GMT-0700 (Pacific Daylight Time)">02:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">So you're saying that when this goes to Stage 4, Turbopack can get rewritten in JS?</td></tr>
  <tr class="msg" id="L234"><td class="ts-cell"><a class="ts" href="#L234" alt="Tue Sep 26 2023 19:41:50 GMT-0700 (Pacific Daylight Time)">02:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">aaaaaanyway this is why I would not recommend trying to move forward with <code>.flat</code></td></tr>
  <tr class="msg" id="L235"><td class="ts-cell"><a class="ts" href="#L235" alt="Tue Sep 26 2023 19:42:14 GMT-0700 (Pacific Daylight Time)">02:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">No, Rust offers us a lot more, but this was the non-starter for TS</td></tr>
  <tr class="msg" id="L236"><td class="ts-cell"><a class="ts" href="#L236" alt="Tue Sep 26 2023 19:42:38 GMT-0700 (Pacific Daylight Time)">02:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Rust macros are magic ‚ú®</td></tr>
  <tr class="msg" id="L237"><td class="ts-cell"><a class="ts" href="#L237" alt="Tue Sep 26 2023 19:42:56 GMT-0700 (Pacific Daylight Time)">02:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">TabAtkins</span>: mapping over an infinite iterator works fine, it does not infinite loop</td></tr>
  <tr class="msg" id="L238"><td class="ts-cell"><a class="ts" href="#L238" alt="Tue Sep 26 2023 19:43:12 GMT-0700 (Pacific Daylight Time)">02:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">So you say, if we have macros in JS, that turbopack... ah sorry</td></tr>
  <tr class="msg" id="L239"><td class="ts-cell"><a class="ts" href="#L239" alt="Tue Sep 26 2023 19:43:13 GMT-0700 (Pacific Daylight Time)">02:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">also people <em>do</em> use infinite iterators <span class="nick-6">ljharb</span></td></tr>
  <tr class="msg" id="L240"><td class="ts-cell"><a class="ts" href="#L240" alt="Tue Sep 26 2023 19:43:14 GMT-0700 (Pacific Daylight Time)">02:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><code>for of</code> over an infinite iterator will infinite loop</td></tr>
  <tr class="msg" id="L241"><td class="ts-cell"><a class="ts" href="#L241" alt="Tue Sep 26 2023 19:43:21 GMT-0700 (Pacific Daylight Time)">02:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">yeah, that's what i meant</td></tr>
  <tr class="msg" id="L242"><td class="ts-cell"><a class="ts" href="#L242" alt="Tue Sep 26 2023 19:43:21 GMT-0700 (Pacific Daylight Time)">02:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">and infinite iterators are way more common than infinitely <em>nested</em> iterators</td></tr>
  <tr class="msg" id="L243"><td class="ts-cell"><a class="ts" href="#L243" alt="Tue Sep 26 2023 19:43:24 GMT-0700 (Pacific Daylight Time)">02:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">exhausting it</td></tr>
  <tr class="msg" id="L244"><td class="ts-cell"><a class="ts" href="#L244" alt="Tue Sep 26 2023 19:43:47 GMT-0700 (Pacific Daylight Time)">02:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">infinitely nested iterators just don't exist at all, period</td></tr>
  <tr class="msg" id="L245"><td class="ts-cell"><a class="ts" href="#L245" alt="Tue Sep 26 2023 19:43:58 GMT-0700 (Pacific Daylight Time)">02:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">I mean. Strings.</td></tr>
  <tr class="msg" id="L246"><td class="ts-cell"><a class="ts" href="#L246" alt="Tue Sep 26 2023 19:43:59 GMT-0700 (Pacific Daylight Time)">02:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">there is no (useful) code that would construct them</td></tr>
  <tr class="msg" id="L247"><td class="ts-cell"><a class="ts" href="#L247" alt="Tue Sep 26 2023 19:44:12 GMT-0700 (Pacific Daylight Time)">02:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Because we fucked up.</td></tr>
  <tr class="msg" id="L248"><td class="ts-cell"><a class="ts" href="#L248" alt="Tue Sep 26 2023 19:44:18 GMT-0700 (Pacific Daylight Time)">02:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@haxjs:matrix.org">hax (HE Shi-Jun)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Rust macros are magic ‚ú®</blockquote></mx-reply>There is also TS macros ( <a href="https://github.com/GoogleFeud/ts-macros">https://github.com/GoogleFeud/ts-macros</a> ),maybe not very magic üòÖ</td></tr>
  <tr class="msg" id="L249"><td class="ts-cell"><a class="ts" href="#L249" alt="Tue Sep 26 2023 19:44:41 GMT-0700 (Pacific Daylight Time)">02:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">strings at least would not be a problem here</td></tr>
  <tr class="msg" id="L250"><td class="ts-cell"><a class="ts" href="#L250" alt="Tue Sep 26 2023 19:44:51 GMT-0700 (Pacific Daylight Time)">02:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> if we just have shared functions of some form, we don't need the prototype hacks</blockquote></mx-reply>Looking at rslint, it looks like they start up a bunch of threads, parse in parallel, and then transmit the files back. Does <code>std::sync::mpsc::channel</code> clone the sent data, or does it reuse the same memory?</td></tr>
  <tr class="msg" id="L251"><td class="ts-cell"><a class="ts" href="#L251" alt="Tue Sep 26 2023 19:44:53 GMT-0700 (Pacific Daylight Time)">02:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> infinitely nested iterators just don't exist at all, period</blockquote></mx-reply><p>you:</p>
<blockquote>
<p>an infinitely-nested iterator will not be able to yield anything</p>
</blockquote>
</td></tr>
  <tr class="msg" id="L252"><td class="ts-cell"><a class="ts" href="#L252" alt="Tue Sep 26 2023 19:45:03 GMT-0700 (Pacific Daylight Time)">02:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">if they don't exist, then <code>.flat(Infinity)</code> is not at problem</td></tr>
  <tr class="msg" id="L253"><td class="ts-cell"><a class="ts" href="#L253" alt="Tue Sep 26 2023 19:45:08 GMT-0700 (Pacific Daylight Time)">02:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I'm not that familiar with the Rust API</td></tr>
  <tr class="msg" id="L254"><td class="ts-cell"><a class="ts" href="#L254" alt="Tue Sep 26 2023 19:45:09 GMT-0700 (Pacific Daylight Time)">02:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Outside of strings, infinitely nested iterators are indeed virtually never a thing.</td></tr>
  <tr class="msg" id="L255"><td class="ts-cell"><a class="ts" href="#L255" alt="Tue Sep 26 2023 19:45:16 GMT-0700 (Pacific Daylight Time)">02:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">depends on what you're sending through it</td></tr>
  <tr class="msg" id="L256"><td class="ts-cell"><a class="ts" href="#L256" alt="Tue Sep 26 2023 19:45:20 GMT-0700 (Pacific Daylight Time)">02:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">also they're iterable not iterator, so <code>.flat(Infinity)</code> on them wouldn't infinitely recurse</td></tr>
  <tr class="msg" id="L257"><td class="ts-cell"><a class="ts" href="#L257" alt="Tue Sep 26 2023 19:45:26 GMT-0700 (Pacific Daylight Time)">02:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">So yeah, I'm also confused why they're an objection to flat(Infinity)</td></tr>
  <tr class="msg" id="L258"><td class="ts-cell"><a class="ts" href="#L258" alt="Tue Sep 26 2023 19:45:36 GMT-0700 (Pacific Daylight Time)">02:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> if they don't exist, then <code>.flat(Infinity)</code> is not at problem</blockquote></mx-reply>it also has no reason to exist</td></tr>
  <tr class="msg" id="L259"><td class="ts-cell"><a class="ts" href="#L259" alt="Tue Sep 26 2023 19:45:41 GMT-0700 (Pacific Daylight Time)">02:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><code>.flat</code> would certainly also work on iterables, like <code>flatMap</code> does?</td></tr>
  <tr class="msg" id="L260"><td class="ts-cell"><a class="ts" href="#L260" alt="Tue Sep 26 2023 19:45:52 GMT-0700 (Pacific Daylight Time)">02:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">mpsc is "single consumer" so in most cases it is a move operation (reuses the same memory)</td></tr>
  <tr class="msg" id="L261"><td class="ts-cell"><a class="ts" href="#L261" alt="Tue Sep 26 2023 19:46:20 GMT-0700 (Pacific Daylight Time)">02:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: except strings lol</td></tr>
  <tr class="msg" id="L262"><td class="ts-cell"><a class="ts" href="#L262" alt="Tue Sep 26 2023 19:46:32 GMT-0700 (Pacific Daylight Time)">02:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">except strings, yes</td></tr>
  <tr class="msg" id="L263"><td class="ts-cell"><a class="ts" href="#L263" alt="Tue Sep 26 2023 19:46:35 GMT-0700 (Pacific Daylight Time)">02:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">everyone agrees on that</td></tr>
  <tr class="msg" id="L264"><td class="ts-cell"><a class="ts" href="#L264" alt="Tue Sep 26 2023 19:46:48 GMT-0700 (Pacific Daylight Time)">02:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Why do you think it has no reason to exist? You seem to dislike infinite flat on arrays too, while I use that more than anything else, so maybe this is a mismatch in expectations?</td></tr>
  <tr class="msg" id="L265"><td class="ts-cell"><a class="ts" href="#L265" alt="Tue Sep 26 2023 19:46:58 GMT-0700 (Pacific Daylight Time)">02:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">The issue with using module blocks is that it means the worker has no access to the struct declarations until after they are received from the originating thread, which complicates startup.</td></tr>
  <tr class="msg" id="L266"><td class="ts-cell"><a class="ts" href="#L266" alt="Tue Sep 26 2023 19:47:13 GMT-0700 (Pacific Daylight Time)">02:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">TabAtkins</span>: infinitely-nested arrays don't exist because you can't even construct them</td></tr>
  <tr class="msg" id="L267"><td class="ts-cell"><a class="ts" href="#L267" alt="Tue Sep 26 2023 19:47:16 GMT-0700 (Pacific Daylight Time)">02:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i would love if we had sharable funclets or whatever</td></tr>
  <tr class="msg" id="L268"><td class="ts-cell"><a class="ts" href="#L268" alt="Tue Sep 26 2023 19:47:23 GMT-0700 (Pacific Daylight Time)">02:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">we can just revive domenic's proposal</td></tr>
  <tr class="msg" id="L269"><td class="ts-cell"><a class="ts" href="#L269" alt="Tue Sep 26 2023 19:47:32 GMT-0700 (Pacific Daylight Time)">02:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Sure. But <em>indefinitely</em> nested ones do, and that's what I mean by Infinity.</td></tr>
  <tr class="msg" id="L270"><td class="ts-cell"><a class="ts" href="#L270" alt="Tue Sep 26 2023 19:47:35 GMT-0700 (Pacific Daylight Time)">02:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">at least you can construct an infinitely-nested iterator, even if you could never iterate it</td></tr>
  <tr class="msg" id="L271"><td class="ts-cell"><a class="ts" href="#L271" alt="Tue Sep 26 2023 19:47:45 GMT-0700 (Pacific Daylight Time)">02:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">sure you can construct them. <code>const a = []; a.push(a)</code></td></tr>
  <tr class="msg" id="L272"><td class="ts-cell"><a class="ts" href="#L272" alt="Tue Sep 26 2023 19:47:54 GMT-0700 (Pacific Daylight Time)">02:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">lol indeed</td></tr>
  <tr class="msg" id="L273"><td class="ts-cell"><a class="ts" href="#L273" alt="Tue Sep 26 2023 19:48:15 GMT-0700 (Pacific Daylight Time)">02:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">people do <em>that</em> a bunch, actually, with objects too, which is why there's npm packages to handle describing or serializing them</td></tr>
  <tr class="msg" id="L274"><td class="ts-cell"><a class="ts" href="#L274" alt="Tue Sep 26 2023 19:48:30 GMT-0700 (Pacific Daylight Time)">02:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">bl√∂cks</td></tr>
  <tr class="msg" id="L275"><td class="ts-cell"><a class="ts" href="#L275" alt="Tue Sep 26 2023 19:48:31 GMT-0700 (Pacific Daylight Time)">02:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> The issue with using module blocks is that it means the worker has no access to the struct declarations until after they are received from the originating thread, which complicates startup.</blockquote></mx-reply>the DX for that order is terrible. If I want to use a <code>Point</code> in a module in my worker, I can't import it. I have to receive the constructor as an argument.</td></tr>
  <tr class="msg" id="L276"><td class="ts-cell"><a class="ts" href="#L276" alt="Tue Sep 26 2023 19:48:35 GMT-0700 (Pacific Daylight Time)">02:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">(but nobody would be iterating over those, i expect)</td></tr>
  <tr class="msg" id="L277"><td class="ts-cell"><a class="ts" href="#L277" alt="Tue Sep 26 2023 19:48:39 GMT-0700 (Pacific Daylight Time)">02:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">yeah bl√∂cks</td></tr>
  <tr class="msg" id="L278"><td class="ts-cell"><a class="ts" href="#L278" alt="Tue Sep 26 2023 19:48:49 GMT-0700 (Pacific Daylight Time)">02:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@waldemarh:matrix.org">waldemar</span>&gt;</div></td><td class="msg-cell">How does source location work with eval?</td></tr>
  <tr class="msg" id="L279"><td class="ts-cell"><a class="ts" href="#L279" alt="Tue Sep 26 2023 19:49:01 GMT-0700 (Pacific Daylight Time)">02:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">source location won't work</td></tr>
  <tr class="msg" id="L280"><td class="ts-cell"><a class="ts" href="#L280" alt="Tue Sep 26 2023 19:49:03 GMT-0700 (Pacific Daylight Time)">02:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">that has to change</td></tr>
  <tr class="msg" id="L281"><td class="ts-cell"><a class="ts" href="#L281" alt="Tue Sep 26 2023 19:49:03 GMT-0700 (Pacific Daylight Time)">02:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> How does source location work with eval?</blockquote></mx-reply>It breaks</td></tr>
  <tr class="msg" id="L282"><td class="ts-cell"><a class="ts" href="#L282" alt="Tue Sep 26 2023 19:49:06 GMT-0700 (Pacific Daylight Time)">02:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">otherwise you can't use bundlers</td></tr>
  <tr class="msg" id="L283"><td class="ts-cell"><a class="ts" href="#L283" alt="Tue Sep 26 2023 19:49:10 GMT-0700 (Pacific Daylight Time)">02:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> How does source location work with eval?</blockquote></mx-reply>it does not I believe</td></tr>
  <tr class="msg" id="L284"><td class="ts-cell"><a class="ts" href="#L284" alt="Tue Sep 26 2023 19:49:40 GMT-0700 (Pacific Daylight Time)">02:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">but eval has a inferred address right? like "vm:123"</td></tr>
  <tr class="msg" id="L285"><td class="ts-cell"><a class="ts" href="#L285" alt="Tue Sep 26 2023 19:49:50 GMT-0700 (Pacific Daylight Time)">02:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">that is also some kind of source text identity </td></tr>
  <tr class="msg" id="L286"><td class="ts-cell"><a class="ts" href="#L286" alt="Tue Sep 26 2023 19:50:14 GMT-0700 (Pacific Daylight Time)">02:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">And calling <code>.flat(Infinity)</code> on that array just stack overflows immediately. That's fine.</td></tr>
  <tr class="msg" id="L287"><td class="ts-cell"><a class="ts" href="#L287" alt="Tue Sep 26 2023 19:50:21 GMT-0700 (Pacific Daylight Time)">02:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Every <code>eval</code> call generates a new source location</td></tr>
  <tr class="msg" id="L288"><td class="ts-cell"><a class="ts" href="#L288" alt="Tue Sep 26 2023 19:50:26 GMT-0700 (Pacific Daylight Time)">02:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">As if they were different files</td></tr>
  <tr class="msg" id="L289"><td class="ts-cell"><a class="ts" href="#L289" alt="Tue Sep 26 2023 19:50:27 GMT-0700 (Pacific Daylight Time)">02:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Regarding the source location thing, I had also been working on a mechanism that didn't depend on source location, but a correlation step on the worker thread to do setup to associate a foreign struct with a local prototype. The downside to this approach is that it results in multiple "maps" that affect ICs and require fixup.</td></tr>
  <tr class="msg" id="L290"><td class="ts-cell"><a class="ts" href="#L290" alt="Tue Sep 26 2023 19:50:54 GMT-0700 (Pacific Daylight Time)">02:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell"><blockquote>
<p>people do that a bunch</p>
</blockquote>
<p>name them; they do not deserve anonymity</p>
</td></tr>
  <tr class="msg" id="L291"><td class="ts-cell"><a class="ts" href="#L291" alt="Tue Sep 26 2023 19:50:57 GMT-0700 (Pacific Daylight Time)">02:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">the easiest would just be requiring the registration to use a very qualified name</td></tr>
  <tr class="msg" id="L292"><td class="ts-cell"><a class="ts" href="#L292" alt="Tue Sep 26 2023 19:51:10 GMT-0700 (Pacific Daylight Time)">02:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">the DOM, for objects :-p</td></tr>
  <tr class="msg" id="L293"><td class="ts-cell"><a class="ts" href="#L293" alt="Tue Sep 26 2023 19:51:13 GMT-0700 (Pacific Daylight Time)">02:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">like <code>struct Foo registered "<a href="http://dev.snek.library.Foo">dev.snek.library.Foo</a>" {}</code></td></tr>
  <tr class="msg" id="L294"><td class="ts-cell"><a class="ts" href="#L294" alt="Tue Sep 26 2023 19:51:19 GMT-0700 (Pacific Daylight Time)">02:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><a href="http://com.google">com.google</a>.workspace.sheets.myStruct</td></tr>
  <tr class="msg" id="L295"><td class="ts-cell"><a class="ts" href="#L295" alt="Tue Sep 26 2023 19:51:27 GMT-0700 (Pacific Daylight Time)">02:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">puttin the java in javascript</td></tr>
  <tr class="msg" id="L296"><td class="ts-cell"><a class="ts" href="#L296" alt="Tue Sep 26 2023 19:51:34 GMT-0700 (Pacific Daylight Time)">02:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@waldemarh:matrix.org">waldemar</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Every <code>eval</code> call generates a new source location</blockquote></mx-reply>So the correlation from the presentation won't work with eval'd code.</td></tr>
  <tr class="msg" id="L297"><td class="ts-cell"><a class="ts" href="#L297" alt="Tue Sep 26 2023 19:51:36 GMT-0700 (Pacific Daylight Time)">02:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> the easiest would just be requiring the registration to use a very qualified name</blockquote></mx-reply>We have also considered that. I suggested it as a mechanism to address the bundling issue.</td></tr>
  <tr class="msg" id="L298"><td class="ts-cell"><a class="ts" href="#L298" alt="Tue Sep 26 2023 19:51:37 GMT-0700 (Pacific Daylight Time)">02:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">yeah, exactly like symbols</td></tr>
  <tr class="msg" id="L299"><td class="ts-cell"><a class="ts" href="#L299" alt="Tue Sep 26 2023 19:51:48 GMT-0700 (Pacific Daylight Time)">02:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> We have also considered that. I suggested it as a mechanism to address the bundling issue.</blockquote></mx-reply>The problem is that it's potentially forgeable</td></tr>
  <tr class="msg" id="L300"><td class="ts-cell"><a class="ts" href="#L300" alt="Tue Sep 26 2023 19:51:57 GMT-0700 (Pacific Daylight Time)">02:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">why is that text red? ü§î</td></tr>
  <tr class="msg" id="L301"><td class="ts-cell"><a class="ts" href="#L301" alt="Tue Sep 26 2023 19:52:04 GMT-0700 (Pacific Daylight Time)">02:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> We have also considered that. I suggested it as a mechanism to address the bundling issue.</blockquote></mx-reply>yeah if you have main_thread.js and worker_thread.js, its kind of required i think</td></tr>
  <tr class="msg" id="L302"><td class="ts-cell"><a class="ts" href="#L302" alt="Tue Sep 26 2023 19:52:10 GMT-0700 (Pacific Daylight Time)">02:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">since those are different source texts</td></tr>
  <tr class="msg" id="L303"><td class="ts-cell"><a class="ts" href="#L303" alt="Tue Sep 26 2023 19:52:12 GMT-0700 (Pacific Daylight Time)">02:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> yeah, exactly like symbols</blockquote></mx-reply>There's a difference. You don't define anything about a symbol except the description.</td></tr>
  <tr class="msg" id="L304"><td class="ts-cell"><a class="ts" href="#L304" alt="Tue Sep 26 2023 19:52:36 GMT-0700 (Pacific Daylight Time)">02:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">ye the ultimate key in the agent would be the name + the shape </td></tr>
  <tr class="msg" id="L305"><td class="ts-cell"><a class="ts" href="#L305" alt="Tue Sep 26 2023 19:52:59 GMT-0700 (Pacific Daylight Time)">02:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> yeah if you have main_thread.js and worker_thread.js, its kind of required i think</blockquote></mx-reply>Not necessarily, many bundlers support splitting out common code shared between different entrypoints.</td></tr>
  <tr class="msg" id="L306"><td class="ts-cell"><a class="ts" href="#L306" alt="Tue Sep 26 2023 19:53:41 GMT-0700 (Pacific Daylight Time)">02:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> ye the ultimate key in the agent would be the name + the shape </blockquote></mx-reply>That's interesting.</td></tr>
  <tr class="msg" id="L307"><td class="ts-cell"><a class="ts" href="#L307" alt="Tue Sep 26 2023 19:54:03 GMT-0700 (Pacific Daylight Time)">02:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I'm not sure if its still not forgeable and thus usable as a communications channel.</td></tr>
  <tr class="msg" id="L308"><td class="ts-cell"><a class="ts" href="#L308" alt="Tue Sep 26 2023 19:54:24 GMT-0700 (Pacific Daylight Time)">02:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">it probably contains one of your mention words</td></tr>
  <tr class="msg" id="L309"><td class="ts-cell"><a class="ts" href="#L309" alt="Tue Sep 26 2023 19:54:36 GMT-0700 (Pacific Daylight Time)">02:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Exactly, it wouldn't</td></tr>
  <tr class="msg" id="L310"><td class="ts-cell"><a class="ts" href="#L310" alt="Tue Sep 26 2023 19:54:57 GMT-0700 (Pacific Daylight Time)">02:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">yeah that's another thing, if you use fast dev mode (eval) your project will break lol</td></tr>
  <tr class="msg" id="L311"><td class="ts-cell"><a class="ts" href="#L311" alt="Tue Sep 26 2023 19:55:13 GMT-0700 (Pacific Daylight Time)">02:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">The mechanism I'd been investigating was to correlate struct types between a worker and main thread: <a href="https://gist.github.com/rbuckton/08d020fc80da308ad3a1991384d4ff62">https://gist.github.com/rbuckton/08d020fc80da308ad3a1991384d4ff62</a></td></tr>
  <tr class="msg" id="L312"><td class="ts-cell"><a class="ts" href="#L312" alt="Tue Sep 26 2023 19:55:33 GMT-0700 (Pacific Daylight Time)">02:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> yeah that's another thing, if you use fast dev mode (eval) your project will break lol</blockquote></mx-reply>Well in webpack all those eval calls happen just once per file right? So it's ok if they have their own source location</td></tr>
  <tr class="msg" id="L313"><td class="ts-cell"><a class="ts" href="#L313" alt="Tue Sep 26 2023 19:55:50 GMT-0700 (Pacific Daylight Time)">02:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> we can just revive domenic's proposal</blockquote></mx-reply>how did that solve any of the problems we're discussing here?</td></tr>
  <tr class="msg" id="L314"><td class="ts-cell"><a class="ts" href="#L314" alt="Tue Sep 26 2023 19:56:12 GMT-0700 (Pacific Daylight Time)">02:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">it solves sharable code, not other things</td></tr>
  <tr class="msg" id="L315"><td class="ts-cell"><a class="ts" href="#L315" alt="Tue Sep 26 2023 19:56:42 GMT-0700 (Pacific Daylight Time)">02:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> it solves sharable code, not other things</blockquote></mx-reply>Isn't that proposal essentially what module expressions/module blocks is?</td></tr>
  <tr class="msg" id="L316"><td class="ts-cell"><a class="ts" href="#L316" alt="Tue Sep 26 2023 19:56:50 GMT-0700 (Pacific Daylight Time)">02:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">it is quite similar yes</td></tr>
  <tr class="msg" id="L317"><td class="ts-cell"><a class="ts" href="#L317" alt="Tue Sep 26 2023 19:56:54 GMT-0700 (Pacific Daylight Time)">02:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">hmmm I have zero keywords</td></tr>
  <tr class="msg" id="L318"><td class="ts-cell"><a class="ts" href="#L318" alt="Tue Sep 26 2023 19:56:59 GMT-0700 (Pacific Daylight Time)">02:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Isn't that proposal essentially what module expressions/module blocks is?</blockquote></mx-reply>yeah that plus closing over things and structured cloning them</td></tr>
  <tr class="msg" id="L319"><td class="ts-cell"><a class="ts" href="#L319" alt="Tue Sep 26 2023 19:57:06 GMT-0700 (Pacific Daylight Time)">02:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i think both could exist</td></tr>
  <tr class="msg" id="L320"><td class="ts-cell"><a class="ts" href="#L320" alt="Tue Sep 26 2023 19:57:07 GMT-0700 (Pacific Daylight Time)">02:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">It also didn't solve the shared code issue with respect to the developer experience.</td></tr>
  <tr class="msg" id="L321"><td class="ts-cell"><a class="ts" href="#L321" alt="Tue Sep 26 2023 19:57:18 GMT-0700 (Pacific Daylight Time)">02:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">the main thing is whether you are sharing a module or a callable</td></tr>
  <tr class="msg" id="L322"><td class="ts-cell"><a class="ts" href="#L322" alt="Tue Sep 26 2023 19:57:30 GMT-0700 (Pacific Daylight Time)">02:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i think callables are a lot nicer to work with in many cases</td></tr>
  <tr class="msg" id="L323"><td class="ts-cell"><a class="ts" href="#L323" alt="Tue Sep 26 2023 19:57:38 GMT-0700 (Pacific Daylight Time)">02:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">this could be my bias from working with erlang/elixir though</td></tr>
  <tr class="msg" id="L324"><td class="ts-cell"><a class="ts" href="#L324" alt="Tue Sep 26 2023 19:59:18 GMT-0700 (Pacific Daylight Time)">02:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">I agree that <code>f()</code> is much better than <code>await import(mod).then(m =&gt; m.f())</code>, and module expressions are only a viable solution if "prototype calls" don't look like that</td></tr>
  <tr class="msg" id="L325"><td class="ts-cell"><a class="ts" href="#L325" alt="Tue Sep 26 2023 19:59:35 GMT-0700 (Pacific Daylight Time)">02:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">(specifically, I wouldn't want a<code>await</code>)</td></tr>
  <tr class="msg" id="L326"><td class="ts-cell"><a class="ts" href="#L326" alt="Tue Sep 26 2023 19:59:51 GMT-0700 (Pacific Daylight Time)">02:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">yeah i can definitely see both existing </td></tr>
  <tr class="msg" id="L327"><td class="ts-cell"><a class="ts" href="#L327" alt="Tue Sep 26 2023 20:03:46 GMT-0700 (Pacific Daylight Time)">03:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">ah this is my jam</td></tr>
  <tr class="msg" id="L328"><td class="ts-cell"><a class="ts" href="#L328" alt="Tue Sep 26 2023 20:09:32 GMT-0700 (Pacific Daylight Time)">03:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> mpsc is "single consumer" so in most cases it is a move operation (reuses the same memory)</blockquote></mx-reply>Then that is essentially what I'm already doing. I parse the file in a thread pool thread, which produces a shared AST node that I send back to the main thread. If I had used normal objects sent via <code>postMessage</code>, I'd end up producing an entire copy of the AST in the main thread while the worker ends up holding on to the local copy until some point in the future when GC runs, which increases memory pressure and triggers GC more often, and that's would be a huge problem in some very large codebases (it already is, to a degree, so that would just makle it worse).</td></tr>
  <tr class="msg" id="L329"><td class="ts-cell"><a class="ts" href="#L329" alt="Tue Sep 26 2023 20:14:04 GMT-0700 (Pacific Daylight Time)">03:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">But since I can't attach behavior to a struct, I still end up having to rebuild the AST as normal objects to hand off to the rest of the compiler. Unfortunately, rewriting the entire compiler just to use a data-only AST isn't something feasible in the time I've spent on it so far. And the TSC compiler is mostly written using the FP style. There are too many bits of code that still expect to be able to call <code>.map</code>, <code>.filter</code>, etc. on a <code>NodeArray</code> that wouldn't otherwise be present in a data-only world. And it's not just arrays. We regularly use <code>Map</code> and <code>Set</code> as well.</td></tr>
  <tr class="msg" id="L330"><td class="ts-cell"><a class="ts" href="#L330" alt="Tue Sep 26 2023 20:17:04 GMT-0700 (Pacific Daylight Time)">03:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Switching back to a purely functional approach even for working with arrays is not a reasonable ask, as there is far too much to reasonably change, and would have an oversized impact on TypeScript API consumers. Maybe we pay the cost to speed up <code>tsc</code> command line compilation, but API consumers wouldn't get that benefit.</td></tr>
  <tr class="msg" id="L331"><td class="ts-cell"><a class="ts" href="#L331" alt="Tue Sep 26 2023 20:17:20 GMT-0700 (Pacific Daylight Time)">03:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell"><p>hmm.. ok, when I view source, I'm in the mentions block:</p>
<pre><code>    "m.new_content": {
      "body": "the DOM, for objects :-p",
      "format": "org.matrix.custom.html",
      "formatted_body": "the DOM, for objects :-p",
      "m.mentions": {
        "user_ids": [
          "@softwarechris:matrix.org"
        ]
      },
</code></pre>
</td></tr>
  <tr class="msg" id="L332"><td class="ts-cell"><a class="ts" href="#L332" alt="Tue Sep 26 2023 20:21:21 GMT-0700 (Pacific Daylight Time)">03:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i understand what tsc wants to do i just explicitly don't consider it when thinking about how things should be designed, as it is a very "special" codebase. </td></tr>
  <tr class="msg" id="L333"><td class="ts-cell"><a class="ts" href="#L333" alt="Tue Sep 26 2023 20:21:49 GMT-0700 (Pacific Daylight Time)">03:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Just using <code>f(data)</code> glosses over the fact that <code>f</code> isn't going to be that short in the majority of cases. I have too many places where I've had to write something like <code>concurrentMap_set(map, key, value)</code> when it could have been <code>map.set(key, value)</code>. I'd much rather we not turn JS into C to use this feature.</td></tr>
  <tr class="msg" id="L334"><td class="ts-cell"><a class="ts" href="#L334" alt="Tue Sep 26 2023 20:22:02 GMT-0700 (Pacific Daylight Time)">03:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">like i'd rather have microsoft toil over rewriting tsc than make the design of a feature worse</td></tr>
  <tr class="msg" id="L335"><td class="ts-cell"><a class="ts" href="#L335" alt="Tue Sep 26 2023 20:22:36 GMT-0700 (Pacific Daylight Time)">03:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">it is subjective of course</td></tr>
  <tr class="msg" id="L336"><td class="ts-cell"><a class="ts" href="#L336" alt="Tue Sep 26 2023 20:22:44 GMT-0700 (Pacific Daylight Time)">03:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I would consider the inability to attach behavior to a struct a worse outcome, especially because I believe that are reasonable ways to achieve this.</td></tr>
  <tr class="msg" id="L337"><td class="ts-cell"><a class="ts" href="#L337" alt="Tue Sep 26 2023 20:23:24 GMT-0700 (Pacific Daylight Time)">03:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i'm cool with attaching behavior to structs, i just don't like the unshared prototype or whatever its called</td></tr>
  <tr class="msg" id="L338"><td class="ts-cell"><a class="ts" href="#L338" alt="Tue Sep 26 2023 20:23:37 GMT-0700 (Pacific Daylight Time)">03:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">What about that is problematic?</td></tr>
  <tr class="msg" id="L339"><td class="ts-cell"><a class="ts" href="#L339" alt="Tue Sep 26 2023 20:23:49 GMT-0700 (Pacific Daylight Time)">03:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">the aesthetics </td></tr>
  <tr class="msg" id="L340"><td class="ts-cell"><a class="ts" href="#L340" alt="Tue Sep 26 2023 20:24:20 GMT-0700 (Pacific Daylight Time)">03:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Do you mean the <code>with nonshared prototype;</code>? That's nowhere near final syntax.</td></tr>
  <tr class="msg" id="L341"><td class="ts-cell"><a class="ts" href="#L341" alt="Tue Sep 26 2023 20:25:09 GMT-0700 (Pacific Daylight Time)">03:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">That comes from trying to require explicit opt-in for some things so that we leave room for the potential for <em>actual</em> shared code in the future, and not paint ourselves into a corner.</td></tr>
  <tr class="msg" id="L342"><td class="ts-cell"><a class="ts" href="#L342" alt="Tue Sep 26 2023 20:25:33 GMT-0700 (Pacific Daylight Time)">03:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">no not the syntax, i'd rather just skip to having actual shared code</td></tr>
  <tr class="msg" id="L343"><td class="ts-cell"><a class="ts" href="#L343" alt="Tue Sep 26 2023 20:26:03 GMT-0700 (Pacific Daylight Time)">03:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">We haven't found a workable solution for that.</td></tr>
  <tr class="msg" id="L344"><td class="ts-cell"><a class="ts" href="#L344" alt="Tue Sep 26 2023 20:26:46 GMT-0700 (Pacific Daylight Time)">03:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">JS is not threadsafe, and the way functions work today makes them not threadsafe either.</td></tr>
  <tr class="msg" id="L345"><td class="ts-cell"><a class="ts" href="#L345" alt="Tue Sep 26 2023 20:28:24 GMT-0700 (Pacific Daylight Time)">03:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">ye i'm aware of the history there, i was around for blocks and such. i just want to spend more brainpower on that instead of the temporary solution</td></tr>
  <tr class="msg" id="L346"><td class="ts-cell"><a class="ts" href="#L346" alt="Tue Sep 26 2023 20:28:48 GMT-0700 (Pacific Daylight Time)">03:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Neither that proposal nor module expressions are actually shared code.</td></tr>
  <tr class="msg" id="L347"><td class="ts-cell"><a class="ts" href="#L347" alt="Tue Sep 26 2023 20:29:07 GMT-0700 (Pacific Daylight Time)">03:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">They are essentially just shared source text.</td></tr>
  <tr class="msg" id="L348"><td class="ts-cell"><a class="ts" href="#L348" alt="Tue Sep 26 2023 20:29:27 GMT-0700 (Pacific Daylight Time)">03:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i'm not sure what you mean by shared code then</td></tr>
  <tr class="msg" id="L349"><td class="ts-cell"><a class="ts" href="#L349" alt="Tue Sep 26 2023 20:30:08 GMT-0700 (Pacific Daylight Time)">03:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">If you are talking about just having the same method declarations evaluated in two threads, that's exactly what was being proposed.</td></tr>
  <tr class="msg" id="L350"><td class="ts-cell"><a class="ts" href="#L350" alt="Tue Sep 26 2023 20:30:17 GMT-0700 (Pacific Daylight Time)">03:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i am not talking about that</td></tr>
  <tr class="msg" id="L351"><td class="ts-cell"><a class="ts" href="#L351" alt="Tue Sep 26 2023 20:31:00 GMT-0700 (Pacific Daylight Time)">03:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">in v8 terminology i'm thinking of something like bytecode being shared between isolates</td></tr>
  <tr class="msg" id="L352"><td class="ts-cell"><a class="ts" href="#L352" alt="Tue Sep 26 2023 20:31:03 GMT-0700 (Pacific Daylight Time)">03:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">If you're talking about the main thread sending the declaration to the child thread, that ends up being a terrible developer experience.</td></tr>
  <tr class="msg" id="L353"><td class="ts-cell"><a class="ts" href="#L353" alt="Tue Sep 26 2023 20:31:21 GMT-0700 (Pacific Daylight Time)">03:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">bytecode for the function?</td></tr>
  <tr class="msg" id="L354"><td class="ts-cell"><a class="ts" href="#L354" alt="Tue Sep 26 2023 20:31:31 GMT-0700 (Pacific Daylight Time)">03:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">for some given source text</td></tr>
  <tr class="msg" id="L355"><td class="ts-cell"><a class="ts" href="#L355" alt="Tue Sep 26 2023 20:31:51 GMT-0700 (Pacific Daylight Time)">03:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">it could also include closed over references</td></tr>
  <tr class="msg" id="L356"><td class="ts-cell"><a class="ts" href="#L356" alt="Tue Sep 26 2023 20:32:16 GMT-0700 (Pacific Daylight Time)">03:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">maybe another example would be functions in erlang/elixir, though its hard to say exactly what "closed over" means there because everything is COW</td></tr>
  <tr class="msg" id="L357"><td class="ts-cell"><a class="ts" href="#L357" alt="Tue Sep 26 2023 20:32:39 GMT-0700 (Pacific Daylight Time)">03:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I'm not sure how feasible that would be. If you're just talking about untyped, unoptimized code, maybe, but not optimized representations or every deopt and recompile would stop the world.</td></tr>
  <tr class="msg" id="L358"><td class="ts-cell"><a class="ts" href="#L358" alt="Tue Sep 26 2023 20:32:54 GMT-0700 (Pacific Daylight Time)">03:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">And if its just untyped, unoptimized code, that could be achieved with what was discussed as well.</td></tr>
  <tr class="msg" id="L359"><td class="ts-cell"><a class="ts" href="#L359" alt="Tue Sep 26 2023 20:33:02 GMT-0700 (Pacific Daylight Time)">03:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">yeah i mean its possible it might have to split apart</td></tr>
  <tr class="msg" id="L360"><td class="ts-cell"><a class="ts" href="#L360" alt="Tue Sep 26 2023 20:33:16 GMT-0700 (Pacific Daylight Time)">03:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">these are sort of the two states though</td></tr>
  <tr class="msg" id="L361"><td class="ts-cell"><a class="ts" href="#L361" alt="Tue Sep 26 2023 20:34:41 GMT-0700 (Pacific Daylight Time)">03:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">like you write <code>let add = magicCodeContainerSyntax(a, b){a + b}</code> and you expect that sending add to other threads and using it is generally a very cheap operation as long as you don't do anything too weird</td></tr>
  <tr class="msg" id="L362"><td class="ts-cell"><a class="ts" href="#L362" alt="Tue Sep 26 2023 20:35:56 GMT-0700 (Pacific Daylight Time)">03:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">What was presented was having a single <code>shared struct</code> declaration that was addressable by source location, in which case v8 or another engine could leverage the statically known shape of the declaration to generate the same hidden class for a struct in multiple threads. It could potentially even generate shared function information for all of the methods, and let each thread refine those on a per-thread basis.</td></tr>
  <tr class="msg" id="L363"><td class="ts-cell"><a class="ts" href="#L363" alt="Tue Sep 26 2023 20:36:53 GMT-0700 (Pacific Daylight Time)">03:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">yeah that sounds like a reasonable application</td></tr>
  <tr class="msg" id="L364"><td class="ts-cell"><a class="ts" href="#L364" alt="Tue Sep 26 2023 20:38:21 GMT-0700 (Pacific Daylight Time)">03:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">This has issues with bundling and tree shaking, which I've talked about with <span class="nick-8">shu</span> and others in  <a href="https://matrix.to/#/#shared-structs:matrix.org">#shared-structs:matrix.org</a>, though there is an argument to be made that bundlers could work around this by splitting out structs into a separate file reused by multiple entrypoints, which is something many bundlers can already do.</td></tr>
  <tr class="msg" id="L365"><td class="ts-cell"><a class="ts" href="#L365" alt="Tue Sep 26 2023 20:39:03 GMT-0700 (Pacific Daylight Time)">03:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">yeah the addressing needs to be... addressed</td></tr>
  <tr class="msg" id="L366"><td class="ts-cell"><a class="ts" href="#L366" alt="Tue Sep 26 2023 20:39:08 GMT-0700 (Pacific Daylight Time)">03:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">but the overall concept is sound i think</td></tr>
  <tr class="msg" id="L367"><td class="ts-cell"><a class="ts" href="#L367" alt="Tue Sep 26 2023 20:39:16 GMT-0700 (Pacific Daylight Time)">03:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">both in terms of theory and in terms of implementation</td></tr>
  <tr class="msg" id="L368"><td class="ts-cell"><a class="ts" href="#L368" alt="Tue Sep 26 2023 20:40:01 GMT-0700 (Pacific Daylight Time)">03:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">My concern with trying to use something like module blocks to encapsulate shared code in the main thread and send it to the worker is that it becomes difficult to use in the worker. You can't just <code>import</code> your declarations now, you have to receive them as arguments if you want to create new instances of a struct type to send back to the main thread. That wouldn't work for TypeScript, we have too many different AST nodes.</td></tr>
  <tr class="msg" id="L369"><td class="ts-cell"><a class="ts" href="#L369" alt="Tue Sep 26 2023 20:40:32 GMT-0700 (Pacific Daylight Time)">03:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">So I would prefer a DX that allows me to use <code>import</code>.</td></tr>
  <tr class="msg" id="L370"><td class="ts-cell"><a class="ts" href="#L370" alt="Tue Sep 26 2023 20:41:17 GMT-0700 (Pacific Daylight Time)">03:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">this is similar to elixir. you can send <code>fn() -&gt; <a href="http://MyModule.foo">MyModule.foo</a>() end</code> to another process (or even another physical computer) but that doesn't mean <code>MyModule</code> is properly imported for you to use it there.</td></tr>
  <tr class="msg" id="L371"><td class="ts-cell"><a class="ts" href="#L371" alt="Tue Sep 26 2023 20:41:44 GMT-0700 (Pacific Daylight Time)">03:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">Have people run into issues with bunders duplicating declarations of classes with private fields?</td></tr>
  <tr class="msg" id="L372"><td class="ts-cell"><a class="ts" href="#L372" alt="Tue Sep 26 2023 20:42:18 GMT-0700 (Pacific Daylight Time)">03:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">the issue with bundlers is.... say you have shared_util.js that is imported by both main_thread.js and worker_thread.js</td></tr>
  <tr class="msg" id="L373"><td class="ts-cell"><a class="ts" href="#L373" alt="Tue Sep 26 2023 20:42:35 GMT-0700 (Pacific Daylight Time)">03:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">if shared_util is bundled into those two other files, it will have a different source location for each one</td></tr>
  <tr class="msg" id="L374"><td class="ts-cell"><a class="ts" href="#L374" alt="Tue Sep 26 2023 20:42:39 GMT-0700 (Pacific Daylight Time)">03:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">which will break the struct addressing</td></tr>
  <tr class="msg" id="L375"><td class="ts-cell"><a class="ts" href="#L375" alt="Tue Sep 26 2023 20:42:51 GMT-0700 (Pacific Daylight Time)">03:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">you can leave it split out to fix that</td></tr>
  <tr class="msg" id="L376"><td class="ts-cell"><a class="ts" href="#L376" alt="Tue Sep 26 2023 20:43:00 GMT-0700 (Pacific Daylight Time)">03:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">though i'm not personally a fan of that</td></tr>
  <tr class="msg" id="L377"><td class="ts-cell"><a class="ts" href="#L377" alt="Tue Sep 26 2023 20:43:07 GMT-0700 (Pacific Daylight Time)">03:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">There is also an argument to be made that I <em>don't</em> want to share bytecode between functions in different threads. One of the biggest issues with worker threads today is that you must essentially duplicate large portions of your application code in memory in the worker. One solution to that would be to use tree shaking to remove unused code, but now anything used by a shared struct method cannot be dropped so I have to pay the cost for unused code.</td></tr>
  <tr class="msg" id="L378"><td class="ts-cell"><a class="ts" href="#L378" alt="Tue Sep 26 2023 20:44:45 GMT-0700 (Pacific Daylight Time)">03:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">not sure i'm following what you're saying there</td></tr>
  <tr class="msg" id="L379"><td class="ts-cell"><a class="ts" href="#L379" alt="Tue Sep 26 2023 20:46:36 GMT-0700 (Pacific Daylight Time)">03:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">anything duplicated in main_thread.js and worker_thread.js results in that much additional memory taken up by the worker, as it constructs its own copies of every function and object as it evaluates the duplicate code.</td></tr>
  <tr class="msg" id="L380"><td class="ts-cell"><a class="ts" href="#L380" alt="Tue Sep 26 2023 20:47:23 GMT-0700 (Pacific Daylight Time)">03:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i feel like you're saying you want things to be shared but then saying that you don't want things to be shared</td></tr>
  <tr class="msg" id="L381"><td class="ts-cell"><a class="ts" href="#L381" alt="Tue Sep 26 2023 20:47:47 GMT-0700 (Pacific Daylight Time)">03:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">If main_thread.js and worker_thread.js both depend on shared_util.js, but each only uses part of that file, tree shaking would elide the unused functionality to remove overhead per-thread.</td></tr>
  <tr class="msg" id="L382"><td class="ts-cell"><a class="ts" href="#L382" alt="Tue Sep 26 2023 20:48:23 GMT-0700 (Pacific Daylight Time)">03:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">oh i see, you're saying you don't want the pointer from shared_util to the shared bytecode to hang around if you're not using it</td></tr>
  <tr class="msg" id="L383"><td class="ts-cell"><a class="ts" href="#L383" alt="Tue Sep 26 2023 20:48:41 GMT-0700 (Pacific Daylight Time)">03:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">yeah definitely something worth thinking about</td></tr>
  <tr class="msg" id="L384"><td class="ts-cell"><a class="ts" href="#L384" alt="Tue Sep 26 2023 20:48:57 GMT-0700 (Pacific Daylight Time)">03:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">That is at odds with what shu presented, and what we've discussed, but is also something I've been considering with the various alternatives we've been working through.</td></tr>
  <tr class="msg" id="L385"><td class="ts-cell"><a class="ts" href="#L385" alt="Tue Sep 26 2023 20:49:09 GMT-0700 (Pacific Daylight Time)">03:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">if addressing is not based on source location i think that "just works" with tree shaking</td></tr>
  <tr class="msg" id="L386"><td class="ts-cell"><a class="ts" href="#L386" alt="Tue Sep 26 2023 20:49:29 GMT-0700 (Pacific Daylight Time)">03:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">I mean, the downside of this all is polymorphic usage sites, right?</td></tr>
  <tr class="msg" id="L387"><td class="ts-cell"><a class="ts" href="#L387" alt="Tue Sep 26 2023 20:49:33 GMT-0700 (Pacific Daylight Time)">03:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">It does not make your code crash</td></tr>
  <tr class="msg" id="L388"><td class="ts-cell"><a class="ts" href="#L388" alt="Tue Sep 26 2023 20:50:30 GMT-0700 (Pacific Daylight Time)">03:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i think the worst case is that the engine has to make a full copy for each thread of whatever the backing representation is (which is just the status quo today)</td></tr>
  <tr class="msg" id="L389"><td class="ts-cell"><a class="ts" href="#L389" alt="Tue Sep 26 2023 20:50:42 GMT-0700 (Pacific Daylight Time)">03:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I mean, the downside of this all is polymorphic usage sites, right?</blockquote></mx-reply>Yes, the version of the proposal presented today was heavily motivated by reducing polymorphism, but that is at the cost of the potential for increased overhead since tree-shaking becomes limited.</td></tr>
  <tr class="msg" id="L390"><td class="ts-cell"><a class="ts" href="#L390" alt="Tue Sep 26 2023 20:52:03 GMT-0700 (Pacific Daylight Time)">03:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I've suggested a registration mechanism that would be bundler/tree-shaking friendly, but it imposes other limitations to avoid side-channel communication issues related to a shared registry that are also a concern.</td></tr>
  <tr class="msg" id="L391"><td class="ts-cell"><a class="ts" href="#L391" alt="Tue Sep 26 2023 20:52:04 GMT-0700 (Pacific Daylight Time)">03:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">So just bundle split?</td></tr>
  <tr class="msg" id="L392"><td class="ts-cell"><a class="ts" href="#L392" alt="Tue Sep 26 2023 20:52:20 GMT-0700 (Pacific Daylight Time)">03:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> So just bundle split?</blockquote></mx-reply>that is what was presented, yes.</td></tr>
  <tr class="msg" id="L393"><td class="ts-cell"><a class="ts" href="#L393" alt="Tue Sep 26 2023 20:52:22 GMT-0700 (Pacific Daylight Time)">03:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">this all feels like non-problems</td></tr>
  <tr class="msg" id="L394"><td class="ts-cell"><a class="ts" href="#L394" alt="Tue Sep 26 2023 20:53:03 GMT-0700 (Pacific Daylight Time)">03:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">bundle split can be problematic in some cases based on network conditions</td></tr>
  <tr class="msg" id="L395"><td class="ts-cell"><a class="ts" href="#L395" alt="Tue Sep 26 2023 20:53:25 GMT-0700 (Pacific Daylight Time)">03:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">as much as we wish everything was http2+ everywhere</td></tr>
  <tr class="msg" id="L396"><td class="ts-cell"><a class="ts" href="#L396" alt="Tue Sep 26 2023 20:53:40 GMT-0700 (Pacific Daylight Time)">03:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">its definitely not <em>that</em> bad</td></tr>
  <tr class="msg" id="L397"><td class="ts-cell"><a class="ts" href="#L397" alt="Tue Sep 26 2023 20:53:55 GMT-0700 (Pacific Daylight Time)">03:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">but creating a worker off of a separate <code>.js</code> file isn't?</td></tr>
  <tr class="msg" id="L398"><td class="ts-cell"><a class="ts" href="#L398" alt="Tue Sep 26 2023 20:54:57 GMT-0700 (Pacific Daylight Time)">03:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i more just don't like that the feature strongly informs how code can be processed. </td></tr>
  <tr class="msg" id="L399"><td class="ts-cell"><a class="ts" href="#L399" alt="Tue Sep 26 2023 20:55:03 GMT-0700 (Pacific Daylight Time)">03:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> this all feels like non-problems</blockquote></mx-reply>that's my feeling too?</td></tr>
  <tr class="msg" id="L400"><td class="ts-cell"><a class="ts" href="#L400" alt="Tue Sep 26 2023 20:55:08 GMT-0700 (Pacific Daylight Time)">03:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>One way to overcome the bundling issue is with a lexical keyword to introduce a shared identity, i.e.:</p>
<pre><code>shared struct S {
  with registration 'e9c1cfb0-e9d6-469c-8fba-99f641e4b64e';
  ...
}
</code></pre>
</td></tr>
  <tr class="msg" id="L401"><td class="ts-cell"><a class="ts" href="#L401" alt="Tue Sep 26 2023 20:55:25 GMT-0700 (Pacific Daylight Time)">03:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Or a URN, or whatever you like.</td></tr>
  <tr class="msg" id="L402"><td class="ts-cell"><a class="ts" href="#L402" alt="Tue Sep 26 2023 20:55:25 GMT-0700 (Pacific Daylight Time)">03:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">yeah that's what i suggested above, except my example was more human-readable lol</td></tr>
  <tr class="msg" id="L403"><td class="ts-cell"><a class="ts" href="#L403" alt="Tue Sep 26 2023 20:56:13 GMT-0700 (Pacific Daylight Time)">03:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">We'd discussed it being an API, or just a decorator as well. The problem with an API or a decorator is that it provides a way to communicate between otherwise isolated code.</td></tr>
  <tr class="msg" id="L404"><td class="ts-cell"><a class="ts" href="#L404" alt="Tue Sep 26 2023 20:56:46 GMT-0700 (Pacific Daylight Time)">03:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i'm curious what that communication channel is</td></tr>
  <tr class="msg" id="L405"><td class="ts-cell"><a class="ts" href="#L405" alt="Tue Sep 26 2023 20:57:51 GMT-0700 (Pacific Daylight Time)">03:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">If you have a global registry, in which you can insert a keyed element, which throws if the element already existed, then it can be used to communicate.</td></tr>
  <tr class="msg" id="L406"><td class="ts-cell"><a class="ts" href="#L406" alt="Tue Sep 26 2023 20:58:01 GMT-0700 (Pacific Daylight Time)">03:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">oh, don't throw </td></tr>
  <tr class="msg" id="L407"><td class="ts-cell"><a class="ts" href="#L407" alt="Tue Sep 26 2023 20:58:09 GMT-0700 (Pacific Daylight Time)">03:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">How do you catch developer mistakes?</td></tr>
  <tr class="msg" id="L408"><td class="ts-cell"><a class="ts" href="#L408" alt="Tue Sep 26 2023 20:58:40 GMT-0700 (Pacific Daylight Time)">03:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">like if you write out the same definition in two separate files?</td></tr>
  <tr class="msg" id="L409"><td class="ts-cell"><a class="ts" href="#L409" alt="Tue Sep 26 2023 20:58:45 GMT-0700 (Pacific Daylight Time)">03:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">and then they fall out of sync?</td></tr>
  <tr class="msg" id="L410"><td class="ts-cell"><a class="ts" href="#L410" alt="Tue Sep 26 2023 20:58:50 GMT-0700 (Pacific Daylight Time)">03:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><code>"use strict"</code> was partly about not silently allowing things that didn't work.</td></tr>
  <tr class="msg" id="L411"><td class="ts-cell"><a class="ts" href="#L411" alt="Tue Sep 26 2023 20:58:53 GMT-0700 (Pacific Daylight Time)">03:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i would consider you to be on your own at that point lol</td></tr>
  <tr class="msg" id="L412"><td class="ts-cell"><a class="ts" href="#L412" alt="Tue Sep 26 2023 20:59:46 GMT-0700 (Pacific Daylight Time)">03:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I'm personally fine with not throwing, but that's also because I work on a type system that could warn you ahead of time about that kind of conflict.</td></tr>
  <tr class="msg" id="L413"><td class="ts-cell"><a class="ts" href="#L413" alt="Tue Sep 26 2023 21:00:07 GMT-0700 (Pacific Daylight Time)">04:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">yeah i mean i don't think that's an inherently new problem to structs</td></tr>
  <tr class="msg" id="L414"><td class="ts-cell"><a class="ts" href="#L414" alt="Tue Sep 26 2023 21:00:33 GMT-0700 (Pacific Daylight Time)">04:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">we have solutions for it</td></tr>
  <tr class="msg" id="L415"><td class="ts-cell"><a class="ts" href="#L415" alt="Tue Sep 26 2023 21:00:37 GMT-0700 (Pacific Daylight Time)">04:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">orthogonal imo</td></tr>
  <tr class="msg" id="L416"><td class="ts-cell"><a class="ts" href="#L416" alt="Tue Sep 26 2023 21:03:35 GMT-0700 (Pacific Daylight Time)">04:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">So as not to continue to flood the chat about the <code>shared struct</code> proposal, I'd suggest anyone who is interested in discussing further join <a href="https://matrix.to/#/#shared-structs:matrix.org">#shared-structs:matrix.org</a> or one of the working session meetings in the TC39 calendar.</td></tr>
  <tr class="msg" id="L417"><td class="ts-cell"><a class="ts" href="#L417" alt="Tue Sep 26 2023 21:04:20 GMT-0700 (Pacific Daylight Time)">04:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">please do!</td></tr>
  <tr class="msg" id="L418"><td class="ts-cell"><a class="ts" href="#L418" alt="Tue Sep 26 2023 21:05:10 GMT-0700 (Pacific Daylight Time)">04:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">Type Annotations community call minutes are here:  <a href="https://github.com/tc39/proposal-type-annotations/issues/184">https://github.com/tc39/proposal-type-annotations/issues/184</a></td></tr>
  <tr class="msg" id="L419"><td class="ts-cell"><a class="ts" href="#L419" alt="Tue Sep 26 2023 21:07:07 GMT-0700 (Pacific Daylight Time)">04:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">(Specifically <a href="https://docs.google.com/document/d/1ecYpaEj5XObkOCUzZ_Y6GlYTTydjPjb1urg09MGYAG4/edit?usp=sharing">the link to the Google Doc</a>)</td></tr>
  <tr class="msg" id="L420"><td class="ts-cell"><a class="ts" href="#L420" alt="Tue Sep 26 2023 21:10:09 GMT-0700 (Pacific Daylight Time)">04:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i like token soup</td></tr>
  <tr class="msg" id="L421"><td class="ts-cell"><a class="ts" href="#L421" alt="Tue Sep 26 2023 21:12:10 GMT-0700 (Pacific Daylight Time)">04:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">would be nice to see a future proposal which allows getting the token soup in some way, probably just as a string</td></tr>
  <tr class="msg" id="L422"><td class="ts-cell"><a class="ts" href="#L422" alt="Tue Sep 26 2023 21:13:57 GMT-0700 (Pacific Daylight Time)">04:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">when I was skimming the slides before, I assumed "token soup" was intended as an insulting phrase üòÖ</td></tr>
  <tr class="msg" id="L423"><td class="ts-cell"><a class="ts" href="#L423" alt="Tue Sep 26 2023 21:14:42 GMT-0700 (Pacific Daylight Time)">04:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">(like a Perl-y sort of image)</td></tr>
  <tr class="msg" id="L424"><td class="ts-cell"><a class="ts" href="#L424" alt="Tue Sep 26 2023 21:15:38 GMT-0700 (Pacific Daylight Time)">04:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">what if we made this proposal console-only</td></tr>
  <tr class="msg" id="L425"><td class="ts-cell"><a class="ts" href="#L425" alt="Tue Sep 26 2023 21:15:46 GMT-0700 (Pacific Daylight Time)">04:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">there was a discussion about having a REPL goal</td></tr>
  <tr class="msg" id="L426"><td class="ts-cell"><a class="ts" href="#L426" alt="Tue Sep 26 2023 21:15:50 GMT-0700 (Pacific Daylight Time)">04:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">lmao</td></tr>
  <tr class="msg" id="L427"><td class="ts-cell"><a class="ts" href="#L427" alt="Tue Sep 26 2023 21:15:52 GMT-0700 (Pacific Daylight Time)">04:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">chrome could just strip TS types in the console</td></tr>
  <tr class="msg" id="L428"><td class="ts-cell"><a class="ts" href="#L428" alt="Tue Sep 26 2023 21:16:00 GMT-0700 (Pacific Daylight Time)">04:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I would like that better...</td></tr>
  <tr class="msg" id="L429"><td class="ts-cell"><a class="ts" href="#L429" alt="Tue Sep 26 2023 21:16:03 GMT-0700 (Pacific Daylight Time)">04:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i like repl goal</td></tr>
  <tr class="msg" id="L430"><td class="ts-cell"><a class="ts" href="#L430" alt="Tue Sep 26 2023 21:17:03 GMT-0700 (Pacific Daylight Time)">04:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> chrome could just strip TS types in the console</blockquote></mx-reply>I said the same when it went stage 1</td></tr>
  <tr class="msg" id="L431"><td class="ts-cell"><a class="ts" href="#L431" alt="Tue Sep 26 2023 21:18:06 GMT-0700 (Pacific Daylight Time)">04:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><p>repl goal needs</p>
<ul>
<li>sloppy by default</li>
<li>supports redeclarable static import</li>
<li>supports redeclarable let/const</li>
<li>supports type stripping</li>
<li>top level await</li>
<li>???</li>
</ul>
</td></tr>
  <tr class="msg" id="L432"><td class="ts-cell"><a class="ts" href="#L432" alt="Tue Sep 26 2023 21:18:27 GMT-0700 (Pacific Daylight Time)">04:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">gentle reminder, please add yourself to the attendee list at the top of the notes if you have not done so.  thank you üôè</td></tr>
  <tr class="msg" id="L433"><td class="ts-cell"><a class="ts" href="#L433" alt="Tue Sep 26 2023 21:18:58 GMT-0700 (Pacific Daylight Time)">04:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>repl goal needs</p>
<ul>
<li>sloppy by default</li>
<li>supports redeclarable static import</li>
<li>supports redeclarable let/const</li>
<li>supports type stripping</li>
<li>top level await</li>
<li>???</li>
</ul>
</blockquote></mx-reply>annex J: Repl tool modification of the 262</td></tr>
  <tr class="msg" id="L434"><td class="ts-cell"><a class="ts" href="#L434" alt="Tue Sep 26 2023 21:19:03 GMT-0700 (Pacific Daylight Time)">04:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">a repl goal that ignores types would be very interesting, and avoids many of the downsides of the current annotations proposal</td></tr>
  <tr class="msg" id="L435"><td class="ts-cell"><a class="ts" href="#L435" alt="Tue Sep 26 2023 21:19:11 GMT-0700 (Pacific Daylight Time)">04:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I do not understand the analogy to JSON at all</td></tr>
  <tr class="msg" id="L436"><td class="ts-cell"><a class="ts" href="#L436" alt="Tue Sep 26 2023 21:19:37 GMT-0700 (Pacific Daylight Time)">04:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i feel very undecided about this</td></tr>
  <tr class="msg" id="L437"><td class="ts-cell"><a class="ts" href="#L437" alt="Tue Sep 26 2023 21:19:47 GMT-0700 (Pacific Daylight Time)">04:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i want reflective type annotations so i can write cool things</td></tr>
  <tr class="msg" id="L438"><td class="ts-cell"><a class="ts" href="#L438" alt="Tue Sep 26 2023 21:20:01 GMT-0700 (Pacific Daylight Time)">04:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">which champions just said is out of scope</td></tr>
  <tr class="msg" id="L439"><td class="ts-cell"><a class="ts" href="#L439" alt="Tue Sep 26 2023 21:20:05 GMT-0700 (Pacific Daylight Time)">04:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">You don't want to send extra bytes for JSON comments over the wire, but it sure would be nice if you had them for configuration readability</td></tr>
  <tr class="msg" id="L440"><td class="ts-cell"><a class="ts" href="#L440" alt="Tue Sep 26 2023 21:20:06 GMT-0700 (Pacific Daylight Time)">04:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">the reflection part</td></tr>
  <tr class="msg" id="L441"><td class="ts-cell"><a class="ts" href="#L441" alt="Tue Sep 26 2023 21:20:09 GMT-0700 (Pacific Daylight Time)">04:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I think this proposal will impede any reflective type annotations</td></tr>
  <tr class="msg" id="L442"><td class="ts-cell"><a class="ts" href="#L442" alt="Tue Sep 26 2023 21:20:15 GMT-0700 (Pacific Daylight Time)">04:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">agreed</td></tr>
  <tr class="msg" id="L443"><td class="ts-cell"><a class="ts" href="#L443" alt="Tue Sep 26 2023 21:20:27 GMT-0700 (Pacific Daylight Time)">04:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i feel like it could come later as like "get the annotation strings"</td></tr>
  <tr class="msg" id="L444"><td class="ts-cell"><a class="ts" href="#L444" alt="Tue Sep 26 2023 21:20:40 GMT-0700 (Pacific Daylight Time)">04:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">right, but MLS's point was that TS is <em>only</em> useful if you have another tool (which can then do the stripping). that's not true of comments in JSON.</td></tr>
  <tr class="msg" id="L445"><td class="ts-cell"><a class="ts" href="#L445" alt="Tue Sep 26 2023 21:20:41 GMT-0700 (Pacific Daylight Time)">04:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">but i also feel like it could make trying to rely on that more hazardous if things are used to stripping them out</td></tr>
  <tr class="msg" id="L446"><td class="ts-cell"><a class="ts" href="#L446" alt="Tue Sep 26 2023 21:20:45 GMT-0700 (Pacific Daylight Time)">04:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i... don't think i can ship that</td></tr>
  <tr class="msg" id="L447"><td class="ts-cell"><a class="ts" href="#L447" alt="Tue Sep 26 2023 21:21:31 GMT-0700 (Pacific Daylight Time)">04:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">msaboff</span>: total strawman, but could your concern be mitigated by also standardizing the semantics of these type annotations, even if JS engines do not enforce these?</td></tr>
  <tr class="msg" id="L448"><td class="ts-cell"><a class="ts" href="#L448" alt="Tue Sep 26 2023 21:21:33 GMT-0700 (Pacific Daylight Time)">04:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">have people who are talking about the convenience of not having to strip types used esbuild's watch mode</td></tr>
  <tr class="msg" id="L449"><td class="ts-cell"><a class="ts" href="#L449" alt="Tue Sep 26 2023 21:21:35 GMT-0700 (Pacific Daylight Time)">04:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">it is so fast</td></tr>
  <tr class="msg" id="L450"><td class="ts-cell"><a class="ts" href="#L450" alt="Tue Sep 26 2023 21:21:38 GMT-0700 (Pacific Daylight Time)">04:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">you literally do not notice</td></tr>
  <tr class="msg" id="L451"><td class="ts-cell"><a class="ts" href="#L451" alt="Tue Sep 26 2023 21:22:17 GMT-0700 (Pacific Daylight Time)">04:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i... don't think i can ship that</blockquote></mx-reply>i think it would be fine with lazy re-parsing? but i can imagine it would be annoying</td></tr>
  <tr class="msg" id="L452"><td class="ts-cell"><a class="ts" href="#L452" alt="Tue Sep 26 2023 21:22:40 GMT-0700 (Pacific Daylight Time)">04:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">we have different definitions of "fine" i think</td></tr>
  <tr class="msg" id="L453"><td class="ts-cell"><a class="ts" href="#L453" alt="Tue Sep 26 2023 21:22:45 GMT-0700 (Pacific Daylight Time)">04:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">it is implementable with re-parsing</td></tr>
  <tr class="msg" id="L454"><td class="ts-cell"><a class="ts" href="#L454" alt="Tue Sep 26 2023 21:22:55 GMT-0700 (Pacific Daylight Time)">04:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">re: littledan's comment, ok but this proposal does not move to a world where tooling is optional</td></tr>
  <tr class="msg" id="L455"><td class="ts-cell"><a class="ts" href="#L455" alt="Tue Sep 26 2023 21:22:58 GMT-0700 (Pacific Daylight Time)">04:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">like, at all</td></tr>
  <tr class="msg" id="L456"><td class="ts-cell"><a class="ts" href="#L456" alt="Tue Sep 26 2023 21:23:02 GMT-0700 (Pacific Daylight Time)">04:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i mean v8 already has a reparser for errors, its just a question of how fast do you want your annotations</td></tr>
  <tr class="msg" id="L457"><td class="ts-cell"><a class="ts" href="#L457" alt="Tue Sep 26 2023 21:23:03 GMT-0700 (Pacific Daylight Time)">04:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@msaboff:matrix.org">msaboff</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-1">msaboff</span>: total strawman, but could your concern be mitigated by also standardizing the semantics of these type annotations, even if JS engines do not enforce these?</blockquote></mx-reply>No.  There is nothing I see an implementation using TA's.</td></tr>
  <tr class="msg" id="L458"><td class="ts-cell"><a class="ts" href="#L458" alt="Tue Sep 26 2023 21:23:04 GMT-0700 (Pacific Daylight Time)">04:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">types do nothing for you without additional tools</td></tr>
  <tr class="msg" id="L459"><td class="ts-cell"><a class="ts" href="#L459" alt="Tue Sep 26 2023 21:23:06 GMT-0700 (Pacific Daylight Time)">04:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">that is the whole proposal</td></tr>
  <tr class="msg" id="L460"><td class="ts-cell"><a class="ts" href="#L460" alt="Tue Sep 26 2023 21:23:17 GMT-0700 (Pacific Daylight Time)">04:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">let's have annex J developer mode to contain all of those things</td></tr>
  <tr class="msg" id="L461"><td class="ts-cell"><a class="ts" href="#L461" alt="Tue Sep 26 2023 21:23:20 GMT-0700 (Pacific Daylight Time)">04:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: perhaps you should express that on the queue</td></tr>
  <tr class="msg" id="L462"><td class="ts-cell"><a class="ts" href="#L462" alt="Tue Sep 26 2023 21:23:26 GMT-0700 (Pacific Daylight Time)">04:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">the queue is so full</td></tr>
  <tr class="msg" id="L463"><td class="ts-cell"><a class="ts" href="#L463" alt="Tue Sep 26 2023 21:23:40 GMT-0700 (Pacific Daylight Time)">04:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i think it would be valuable to demonstrate that there are skeptics who are not just implementers</td></tr>
  <tr class="msg" id="L464"><td class="ts-cell"><a class="ts" href="#L464" alt="Tue Sep 26 2023 21:23:48 GMT-0700 (Pacific Daylight Time)">04:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@msaboff:matrix.org">msaboff</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> the queue is so full</blockquote></mx-reply>There is a 60 minute timebox.</td></tr>
  <tr class="msg" id="L465"><td class="ts-cell"><a class="ts" href="#L465" alt="Tue Sep 26 2023 21:23:50 GMT-0700 (Pacific Daylight Time)">04:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">bleh</td></tr>
  <tr class="msg" id="L466"><td class="ts-cell"><a class="ts" href="#L466" alt="Tue Sep 26 2023 21:23:51 GMT-0700 (Pacific Daylight Time)">04:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">ok</td></tr>
  <tr class="msg" id="L467"><td class="ts-cell"><a class="ts" href="#L467" alt="Tue Sep 26 2023 21:25:56 GMT-0700 (Pacific Daylight Time)">04:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">(I do have concerns with the current syntax proposal, and think it needs to be more generic/soupy rather than invasive into the grammar, but it's still absolutely the case that <em>some</em> syntax that's valid (and erased) at runtime is useful.)</td></tr>
  <tr class="msg" id="L468"><td class="ts-cell"><a class="ts" href="#L468" alt="Tue Sep 26 2023 21:26:12 GMT-0700 (Pacific Daylight Time)">04:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> No.  There is nothing I see an implementation using TA's.</blockquote></mx-reply>I don't understand what you mean. I am not suggesting runtime implementations of ECMA262 do anything other with TA's than strip them. But we could standardize how tooling itself is meant to interpret the grammar and perform the type checking (so there would be type checking implementations such as TypeScript, and runtime implementations such as JSC / V8 / SM)</td></tr>
  <tr class="msg" id="L469"><td class="ts-cell"><a class="ts" href="#L469" alt="Tue Sep 26 2023 21:27:08 GMT-0700 (Pacific Daylight Time)">04:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">The impact is quite high, if we follow this route, we are effectively defining the grammar for types for JavaScript once and for all.</td></tr>
  <tr class="msg" id="L470"><td class="ts-cell"><a class="ts" href="#L470" alt="Tue Sep 26 2023 21:27:35 GMT-0700 (Pacific Daylight Time)">04:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i mean if we have token soup we aren't defining any grammar for types</td></tr>
  <tr class="msg" id="L471"><td class="ts-cell"><a class="ts" href="#L471" alt="Tue Sep 26 2023 21:27:38 GMT-0700 (Pacific Daylight Time)">04:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">other than <code>:</code></td></tr>
  <tr class="msg" id="L472"><td class="ts-cell"><a class="ts" href="#L472" alt="Tue Sep 26 2023 21:27:46 GMT-0700 (Pacific Daylight Time)">04:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> The impact is quite high, if we follow this route, we are effectively defining the grammar for types for JavaScript once and for all.</blockquote></mx-reply>which is a pretty permanent thing to do when there isn't even a type system existing that can accurately describe the entire language.</td></tr>
  <tr class="msg" id="L473"><td class="ts-cell"><a class="ts" href="#L473" alt="Tue Sep 26 2023 21:27:49 GMT-0700 (Pacific Daylight Time)">04:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">I think I've gotten a bit confused here as to whether this information is meant to be used <em>statically</em> by engines</td></tr>
  <tr class="msg" id="L474"><td class="ts-cell"><a class="ts" href="#L474" alt="Tue Sep 26 2023 21:27:58 GMT-0700 (Pacific Daylight Time)">04:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i mean if we have token soup we aren't defining any grammar for types</blockquote></mx-reply>well, assuming we also don't have <code>interface</code> and etc...</td></tr>
  <tr class="msg" id="L475"><td class="ts-cell"><a class="ts" href="#L475" alt="Tue Sep 26 2023 21:28:02 GMT-0700 (Pacific Daylight Time)">04:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">and <code>type</code></td></tr>
  <tr class="msg" id="L476"><td class="ts-cell"><a class="ts" href="#L476" alt="Tue Sep 26 2023 21:28:05 GMT-0700 (Pacific Daylight Time)">04:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@msaboff:matrix.org">msaboff</span>&gt;</div></td><td class="msg-cell">So what do you expect an implementation doing with TA's besides throwing them away?</td></tr>
  <tr class="msg" id="L477"><td class="ts-cell"><a class="ts" href="#L477" alt="Tue Sep 26 2023 21:28:07 GMT-0700 (Pacific Daylight Time)">04:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">and all the other TS keywords</td></tr>
  <tr class="msg" id="L478"><td class="ts-cell"><a class="ts" href="#L478" alt="Tue Sep 26 2023 21:28:19 GMT-0700 (Pacific Daylight Time)">04:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">but of course if we don't have all the other TS keywords, it does not accomplish the goal of letting people ship TS at runtime</td></tr>
  <tr class="msg" id="L479"><td class="ts-cell"><a class="ts" href="#L479" alt="Tue Sep 26 2023 21:28:21 GMT-0700 (Pacific Daylight Time)">04:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">because I thought the answer was an obvious "yes" but maybe it's actually "no" and we're just demarcating a section to be ignored by an engine's parser?</td></tr>
  <tr class="msg" id="L480"><td class="ts-cell"><a class="ts" href="#L480" alt="Tue Sep 26 2023 21:28:27 GMT-0700 (Pacific Daylight Time)">04:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> So what do you expect an implementation doing with TA's besides throwing them away?</blockquote></mx-reply>That <em>is</em> the expectation, yes.</td></tr>
  <tr class="msg" id="L481"><td class="ts-cell"><a class="ts" href="#L481" alt="Tue Sep 26 2023 21:28:31 GMT-0700 (Pacific Daylight Time)">04:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> So what do you expect an implementation doing with TA's besides throwing them away?</blockquote></mx-reply>A runtime implementation should do nothing other than to throw them away.</td></tr>
  <tr class="msg" id="L482"><td class="ts-cell"><a class="ts" href="#L482" alt="Tue Sep 26 2023 21:28:51 GMT-0700 (Pacific Daylight Time)">04:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> which is a pretty permanent thing to do when there isn't even a type system existing that can accurately describe the entire language.</blockquote></mx-reply>I am with you, I have the same feeling, that finding a type system, that can actually define all of JavaScript's types might be difficult. Although there surely would be some kind of <code>any</code> wouldn't it? :)</td></tr>
  <tr class="msg" id="L483"><td class="ts-cell"><a class="ts" href="#L483" alt="Tue Sep 26 2023 21:29:01 GMT-0700 (Pacific Daylight Time)">04:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@msaboff:matrix.org">msaboff</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> A runtime implementation should do nothing other than to throw them away.</blockquote></mx-reply>So I think you agree with the comment I made that started this thread.</td></tr>
  <tr class="msg" id="L484"><td class="ts-cell"><a class="ts" href="#L484" alt="Tue Sep 26 2023 21:29:05 GMT-0700 (Pacific Daylight Time)">04:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> because I thought the answer was an obvious "yes" but maybe it's actually "no" and we're just demarcating a section to be ignored by an engine's parser?</blockquote></mx-reply>it's the second thing definitely</td></tr>
  <tr class="msg" id="L485"><td class="ts-cell"><a class="ts" href="#L485" alt="Tue Sep 26 2023 21:29:13 GMT-0700 (Pacific Daylight Time)">04:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">engines cannot use TS types for several reasons</td></tr>
  <tr class="msg" id="L486"><td class="ts-cell"><a class="ts" href="#L486" alt="Tue Sep 26 2023 21:29:32 GMT-0700 (Pacific Daylight Time)">04:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I am with you, I have the same feeling, that finding a type system, that can actually define all of JavaScript's types might be difficult. Although there surely would be some kind of <code>any</code> wouldn't it? :)</blockquote></mx-reply>nope, but <code>unknown</code>, yes. maybe there is no such system, but until there is, why would we want to lock ourselves in</td></tr>
  <tr class="msg" id="L487"><td class="ts-cell"><a class="ts" href="#L487" alt="Tue Sep 26 2023 21:30:03 GMT-0700 (Pacific Daylight Time)">04:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> it's the second thing definitely</blockquote></mx-reply>that at least clarifies for me why "token soup" is meant as a neutral-sentiment phrase</td></tr>
  <tr class="msg" id="L488"><td class="ts-cell"><a class="ts" href="#L488" alt="Tue Sep 26 2023 21:33:25 GMT-0700 (Pacific Daylight Time)">04:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">ok I also want to know the answer to WH's question though</td></tr>
  <tr class="msg" id="L489"><td class="ts-cell"><a class="ts" href="#L489" alt="Tue Sep 26 2023 21:33:30 GMT-0700 (Pacific Daylight Time)">04:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> So I think you agree with the comment I made that started this thread.</blockquote></mx-reply><p>Ok, let me rephrase the original strawman then:</p>
<ul>
<li>You do not like that a specific tool or set of tools is picked as the "blessed" syntax, I assume (please tell me if I am wrong) because we (TC39) as the body standardising the grammar, do not have control over how tools interpret this syntax, effectively delegating a large amount of syntax semantics to a different body (TypeScript / flow / whoever we "bless")</li>
<li>I am suggesting this may be mitigated by moving the semantics that a static checker should interpret the syntax with into the scope of TC39, possibly into ECMA262. This way TC39 keeps this control</li>
<li>Runtime implementations of ECMA262 will totally ignore these type annotations. The semantics, if we define them, would only be enforced by other ahead of time static analysis tools</li>
</ul>
</td></tr>
  <tr class="msg" id="L490"><td class="ts-cell"><a class="ts" href="#L490" alt="Tue Sep 26 2023 21:33:44 GMT-0700 (Pacific Daylight Time)">04:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><em>is</em> the goal that in 10 years every TS user will write only the subset of TS which is legal ES?</td></tr>
  <tr class="msg" id="L491"><td class="ts-cell"><a class="ts" href="#L491" alt="Tue Sep 26 2023 21:34:11 GMT-0700 (Pacific Daylight Time)">04:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">I suppose that's up to TS and its users, but probably yes.</td></tr>
  <tr class="msg" id="L492"><td class="ts-cell"><a class="ts" href="#L492" alt="Tue Sep 26 2023 21:34:46 GMT-0700 (Pacific Daylight Time)">04:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">I don't understand what you mean, shu.</td></tr>
  <tr class="msg" id="L493"><td class="ts-cell"><a class="ts" href="#L493" alt="Tue Sep 26 2023 21:34:49 GMT-0700 (Pacific Daylight Time)">04:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <em>is</em> the goal that in 10 years every TS user will write only the subset of TS which is legal ES?</blockquote></mx-reply>JSX:</td></tr>
  <tr class="msg" id="L494"><td class="ts-cell"><a class="ts" href="#L494" alt="Tue Sep 26 2023 21:35:04 GMT-0700 (Pacific Daylight Time)">04:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">yeah JSX seems like that makes it obviously not-gonna-happen</td></tr>
  <tr class="msg" id="L495"><td class="ts-cell"><a class="ts" href="#L495" alt="Tue Sep 26 2023 21:35:18 GMT-0700 (Pacific Daylight Time)">04:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">TabAtkins</span>: maybe i misread what bakkot said, let me re-read</td></tr>
  <tr class="msg" id="L496"><td class="ts-cell"><a class="ts" href="#L496" alt="Tue Sep 26 2023 21:35:29 GMT-0700 (Pacific Daylight Time)">04:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Python's type syntax is also (a) completely meaningless/erased at runtime, and (b) different tools use different type syntaxes for their purposes, and (c) they all stick within the broad constraints of valid Python annotations, tho.</td></tr>
  <tr class="msg" id="L497"><td class="ts-cell"><a class="ts" href="#L497" alt="Tue Sep 26 2023 21:35:35 GMT-0700 (Pacific Daylight Time)">04:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">shu</span>: sorry, there was an implicit "in ten years, assuming we do this proposal as standard ES"</td></tr>
  <tr class="msg" id="L498"><td class="ts-cell"><a class="ts" href="#L498" alt="Tue Sep 26 2023 21:35:38 GMT-0700 (Pacific Daylight Time)">04:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Don't see why that doesn't apply just as well to JS.</td></tr>
  <tr class="msg" id="L499"><td class="ts-cell"><a class="ts" href="#L499" alt="Tue Sep 26 2023 21:35:40 GMT-0700 (Pacific Daylight Time)">04:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">TabAtkins</span>: ha indeed i did, i read "10 years every" as "every 10 years"</td></tr>
  <tr class="msg" id="L500"><td class="ts-cell"><a class="ts" href="#L500" alt="Tue Sep 26 2023 21:35:48 GMT-0700 (Pacific Daylight Time)">04:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">ahaha</td></tr>
  <tr class="msg" id="L501"><td class="ts-cell"><a class="ts" href="#L501" alt="Tue Sep 26 2023 21:35:59 GMT-0700 (Pacific Daylight Time)">04:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@msaboff:matrix.org">msaboff</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>Ok, let me rephrase the original strawman then:</p>
<ul>
<li>You do not like that a specific tool or set of tools is picked as the "blessed" syntax, I assume (please tell me if I am wrong) because we (TC39) as the body standardising the grammar, do not have control over how tools interpret this syntax, effectively delegating a large amount of syntax semantics to a different body (TypeScript / flow / whoever we "bless")</li>
<li>I am suggesting this may be mitigated by moving the semantics that a static checker should interpret the syntax with into the scope of TC39, possibly into ECMA262. This way TC39 keeps this control</li>
<li>Runtime implementations of ECMA262 will totally ignore these type annotations. The semantics, if we define them, would only be enforced by other ahead of time static analysis tools</li>
</ul>
</blockquote></mx-reply>Luca, I was only making the last point in my comment here.<br>I do have other concerns related to the first two points you list.</td></tr>
  <tr class="msg" id="L502"><td class="ts-cell"><a class="ts" href="#L502" alt="Tue Sep 26 2023 21:36:43 GMT-0700 (Pacific Daylight Time)">04:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">I, for example, <em>almost certainly would not</em> use typed Python if I had to run a build step that produced my actual Python files. The fact that my code is runtime-valid is important.</td></tr>
  <tr class="msg" id="L503"><td class="ts-cell"><a class="ts" href="#L503" alt="Tue Sep 26 2023 21:37:07 GMT-0700 (Pacific Daylight Time)">04:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">that seems empirically just not borne out by the vast majority of JS authors</td></tr>
  <tr class="msg" id="L504"><td class="ts-cell"><a class="ts" href="#L504" alt="Tue Sep 26 2023 21:37:08 GMT-0700 (Pacific Daylight Time)">04:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">(JS devs appear to have way more appetite for build pain that I do, on average. But still.)</td></tr>
  <tr class="msg" id="L505"><td class="ts-cell"><a class="ts" href="#L505" alt="Tue Sep 26 2023 21:37:12 GMT-0700 (Pacific Daylight Time)">04:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">like, everyone uses toolchains</td></tr>
  <tr class="msg" id="L506"><td class="ts-cell"><a class="ts" href="#L506" alt="Tue Sep 26 2023 21:37:30 GMT-0700 (Pacific Daylight Time)">04:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">this proposal is predicated on the assumption that you are using a toolchain!!!</td></tr>
  <tr class="msg" id="L507"><td class="ts-cell"><a class="ts" href="#L507" alt="Tue Sep 26 2023 21:37:32 GMT-0700 (Pacific Daylight Time)">04:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">and, as kevin said, this proposal itself presupposes you already use TS</td></tr>
  <tr class="msg" id="L508"><td class="ts-cell"><a class="ts" href="#L508" alt="Tue Sep 26 2023 21:37:42 GMT-0700 (Pacific Daylight Time)">04:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Luca, I was only making the last point in my comment here.<br>I do have other concerns related to the first two points you list.</blockquote></mx-reply>Ok, thank you - I'd be interested to learn more about your reasoning for not liking that a specific tool or set of tools is picked as the "blessed" syntax, as that may help find alternative solutions</td></tr>
  <tr class="msg" id="L509"><td class="ts-cell"><a class="ts" href="#L509" alt="Tue Sep 26 2023 21:37:56 GMT-0700 (Pacific Daylight Time)">04:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">That you use a toolchain <em>for production</em>. Not that you use a toolchain <em>to make your code run at all</em>, necessarily.</td></tr>
  <tr class="msg" id="L510"><td class="ts-cell"><a class="ts" href="#L510" alt="Tue Sep 26 2023 21:38:06 GMT-0700 (Pacific Daylight Time)">04:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">let me be frank</td></tr>
  <tr class="msg" id="L511"><td class="ts-cell"><a class="ts" href="#L511" alt="Tue Sep 26 2023 21:38:09 GMT-0700 (Pacific Daylight Time)">04:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">you do typechecks at devtime</td></tr>
  <tr class="msg" id="L512"><td class="ts-cell"><a class="ts" href="#L512" alt="Tue Sep 26 2023 21:38:15 GMT-0700 (Pacific Daylight Time)">04:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">all of the benefit of typechecks is at devtime</td></tr>
  <tr class="msg" id="L513"><td class="ts-cell"><a class="ts" href="#L513" alt="Tue Sep 26 2023 21:38:18 GMT-0700 (Pacific Daylight Time)">04:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Like I said, it's the same as minifying being a good thing to do <em>for production</em>, but we don't require you to write minified code to execute locally.</td></tr>
  <tr class="msg" id="L514"><td class="ts-cell"><a class="ts" href="#L514" alt="Tue Sep 26 2023 21:38:22 GMT-0700 (Pacific Daylight Time)">04:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> you do typechecks at devtime</blockquote></mx-reply>No, you have your editor do this</td></tr>
  <tr class="msg" id="L515"><td class="ts-cell"><a class="ts" href="#L515" alt="Tue Sep 26 2023 21:38:32 GMT-0700 (Pacific Daylight Time)">04:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">that is a tool</td></tr>
  <tr class="msg" id="L516"><td class="ts-cell"><a class="ts" href="#L516" alt="Tue Sep 26 2023 21:38:33 GMT-0700 (Pacific Daylight Time)">04:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell">You do not run <code>tsc</code> during dev mode</td></tr>
  <tr class="msg" id="L517"><td class="ts-cell"><a class="ts" href="#L517" alt="Tue Sep 26 2023 21:38:33 GMT-0700 (Pacific Daylight Time)">04:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">that</td></tr>
  <tr class="msg" id="L518"><td class="ts-cell"><a class="ts" href="#L518" alt="Tue Sep 26 2023 21:38:34 GMT-0700 (Pacific Daylight Time)">04:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">you are using</td></tr>
  <tr class="msg" id="L519"><td class="ts-cell"><a class="ts" href="#L519" alt="Tue Sep 26 2023 21:38:36 GMT-0700 (Pacific Daylight Time)">04:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">at devtime</td></tr>
  <tr class="msg" id="L520"><td class="ts-cell"><a class="ts" href="#L520" alt="Tue Sep 26 2023 21:38:41 GMT-0700 (Pacific Daylight Time)">04:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">this proposal is asking for engines to ship everything, to everyone, all the time, for a thing that is purportedly not done in production, on the promise that users will also manually strip stuff away at production</td></tr>
  <tr class="msg" id="L521"><td class="ts-cell"><a class="ts" href="#L521" alt="Tue Sep 26 2023 21:38:43 GMT-0700 (Pacific Daylight Time)">04:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">you should definitely be running tsc in CI before you merge in code</td></tr>
  <tr class="msg" id="L522"><td class="ts-cell"><a class="ts" href="#L522" alt="Tue Sep 26 2023 21:38:48 GMT-0700 (Pacific Daylight Time)">04:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">what's in it for me? why would i support this?</td></tr>
  <tr class="msg" id="L523"><td class="ts-cell"><a class="ts" href="#L523" alt="Tue Sep 26 2023 21:38:52 GMT-0700 (Pacific Daylight Time)">04:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@msaboff:matrix.org">msaboff</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Ok, thank you - I'd be interested to learn more about your reasoning for not liking that a specific tool or set of tools is picked as the "blessed" syntax, as that may help find alternative solutions</blockquote></mx-reply>I don't like that TC39, an open standard, is blessing possibly one syntax when there are several other possible syntax options.</td></tr>
  <tr class="msg" id="L524"><td class="ts-cell"><a class="ts" href="#L524" alt="Tue Sep 26 2023 21:38:56 GMT-0700 (Pacific Daylight Time)">04:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">i.e., if Type Annotations advances to Stage 3/4, TypeScript would also adopt <code>f::&lt;T&gt;()</code> for type argument lists. We likely would not ban <code>f&lt;T&gt;()</code> in a .ts file, but imagine the community would migrate to the new syntax just as they did for <code>as</code> when we added it to avoid conflicts with JSX.</td></tr>
  <tr class="msg" id="L525"><td class="ts-cell"><a class="ts" href="#L525" alt="Tue Sep 26 2023 21:38:57 GMT-0700 (Pacific Daylight Time)">04:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Yes, I do typechecks at devtime. But typechecking is different than executing. Being able to execute my code directly, and then typecheck at some convenient point, is nice.</td></tr>
  <tr class="msg" id="L526"><td class="ts-cell"><a class="ts" href="#L526" alt="Tue Sep 26 2023 21:39:10 GMT-0700 (Pacific Daylight Time)">04:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">all other things being equal, i agree it is nice</td></tr>
  <tr class="msg" id="L527"><td class="ts-cell"><a class="ts" href="#L527" alt="Tue Sep 26 2023 21:39:13 GMT-0700 (Pacific Daylight Time)">04:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">there are real costs here</td></tr>
  <tr class="msg" id="L528"><td class="ts-cell"><a class="ts" href="#L528" alt="Tue Sep 26 2023 21:39:57 GMT-0700 (Pacific Daylight Time)">04:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Right now on the Babel codebase we use ESLint to lint, TSC to type-check, Babel to strip away types, and Rollup to bundle.

ESLint and TSC are run transaprently by my editor and on CI, Rollup only happens on CI, and the only step between me writing the code and testing it in Node.js is to compile away types</td></tr>
  <tr class="msg" id="L529"><td class="ts-cell"><a class="ts" href="#L529" alt="Tue Sep 26 2023 21:40:01 GMT-0700 (Pacific Daylight Time)">04:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I don't like that TC39, an open standard, is blessing possibly one syntax when there are several other possible syntax options.</blockquote></mx-reply>Ok, thank you - but isn't this something we always do when adding new syntax? We bless one syntax that we decide aligns best with the needs of the ecosystem and the direction we want to take the language? How is this syntax specifically different?</td></tr>
  <tr class="msg" id="L530"><td class="ts-cell"><a class="ts" href="#L530" alt="Tue Sep 26 2023 21:40:21 GMT-0700 (Pacific Daylight Time)">04:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">no, we usually invent new syntax from whole cloth</td></tr>
  <tr class="msg" id="L531"><td class="ts-cell"><a class="ts" href="#L531" alt="Tue Sep 26 2023 21:40:27 GMT-0700 (Pacific Daylight Time)">04:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">node could choose to strip types? but also, <code>esbuild --watch</code> is like</td></tr>
  <tr class="msg" id="L532"><td class="ts-cell"><a class="ts" href="#L532" alt="Tue Sep 26 2023 21:40:30 GMT-0700 (Pacific Daylight Time)">04:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">we look at prior art, but not literally pick existing syntax</td></tr>
  <tr class="msg" id="L533"><td class="ts-cell"><a class="ts" href="#L533" alt="Tue Sep 26 2023 21:40:32 GMT-0700 (Pacific Daylight Time)">04:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">not a big burden, given that existing stack</td></tr>
  <tr class="msg" id="L534"><td class="ts-cell"><a class="ts" href="#L534" alt="Tue Sep 26 2023 21:40:49 GMT-0700 (Pacific Daylight Time)">04:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> node could choose to strip types? but also, <code>esbuild --watch</code> is like</blockquote></mx-reply>Well, browsers can strip types too</td></tr>
  <tr class="msg" id="L535"><td class="ts-cell"><a class="ts" href="#L535" alt="Tue Sep 26 2023 21:40:53 GMT-0700 (Pacific Daylight Time)">04:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">wait that was just "token soup" as a negative phrase from Eemeli just now</td></tr>
  <tr class="msg" id="L536"><td class="ts-cell"><a class="ts" href="#L536" alt="Tue Sep 26 2023 21:41:04 GMT-0700 (Pacific Daylight Time)">04:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Well, browsers can strip types too</blockquote></mx-reply>by slowing down parsing for <strong>everyone</strong></td></tr>
  <tr class="msg" id="L537"><td class="ts-cell"><a class="ts" href="#L537" alt="Tue Sep 26 2023 21:41:33 GMT-0700 (Pacific Daylight Time)">04:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> by slowing down parsing for <strong>everyone</strong></blockquote></mx-reply>Would it also slow down parsing for code not using type annotations?</td></tr>
  <tr class="msg" id="L538"><td class="ts-cell"><a class="ts" href="#L538" alt="Tue Sep 26 2023 21:41:43 GMT-0700 (Pacific Daylight Time)">04:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">yes!</td></tr>
  <tr class="msg" id="L539"><td class="ts-cell"><a class="ts" href="#L539" alt="Tue Sep 26 2023 21:41:48 GMT-0700 (Pacific Daylight Time)">04:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">shu</span>: Yeah, I think the final syntax needs to be something super cheap to parse. The current proposal isn't it imo.</td></tr>
  <tr class="msg" id="L540"><td class="ts-cell"><a class="ts" href="#L540" alt="Tue Sep 26 2023 21:41:52 GMT-0700 (Pacific Daylight Time)">04:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@msaboff:matrix.org">msaboff</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Would it also slow down parsing for code not using type annotations?</blockquote></mx-reply>Likely YES</td></tr>
  <tr class="msg" id="L541"><td class="ts-cell"><a class="ts" href="#L541" alt="Tue Sep 26 2023 21:42:16 GMT-0700 (Pacific Daylight Time)">04:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><em>especially</em> likely if there's cover grammar-like shenanigans involved</td></tr>
  <tr class="msg" id="L542"><td class="ts-cell"><a class="ts" href="#L542" alt="Tue Sep 26 2023 21:42:23 GMT-0700 (Pacific Daylight Time)">04:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">yup</td></tr>
  <tr class="msg" id="L543"><td class="ts-cell"><a class="ts" href="#L543" alt="Tue Sep 26 2023 21:42:42 GMT-0700 (Pacific Daylight Time)">04:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> we look at prior art, but not literally pick existing syntax</blockquote></mx-reply>Well but that is what we are doing here too? We don't literally pick TS syntax, we pick syntax that is similar to TypeScript to ease migration (we did this before with decorators), but ultimately it's a subset that is easier to parse and unambiguous. I don't see this as standardising TypeScript, I see this as standardising a syntax space for types that looks similar to TypeScript (inspiration), because it's what folks in the ecosystem are familiar with</td></tr>
  <tr class="msg" id="L544"><td class="ts-cell"><a class="ts" href="#L544" alt="Tue Sep 26 2023 21:42:43 GMT-0700 (Pacific Daylight Time)">04:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">The advantage of "token soup" is that typed languages can continue to innovate within that space without requiring advancing a proposal through TC39 for what is otherwise just a comment.</td></tr>
  <tr class="msg" id="L545"><td class="ts-cell"><a class="ts" href="#L545" alt="Tue Sep 26 2023 21:42:44 GMT-0700 (Pacific Daylight Time)">04:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">I wonder if there is some perf goal we could aim at. Such as "no cover grammar needed unless there is a token clearly introducing a type context"</td></tr>
  <tr class="msg" id="L546"><td class="ts-cell"><a class="ts" href="#L546" alt="Tue Sep 26 2023 21:42:59 GMT-0700 (Pacific Daylight Time)">04:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">the slow part of the annotations is single-char stepping. the slow part of the not-annotations is the other weird complexity layered on top.</td></tr>
  <tr class="msg" id="L547"><td class="ts-cell"><a class="ts" href="#L547" alt="Tue Sep 26 2023 21:43:01 GMT-0700 (Pacific Daylight Time)">04:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> The advantage of "token soup" is that typed languages can continue to innovate within that space without requiring advancing a proposal through TC39 for what is otherwise just a comment.</blockquote></mx-reply>but it would not let them do stuff like <code>satisfies</code>, etc</td></tr>
  <tr class="msg" id="L548"><td class="ts-cell"><a class="ts" href="#L548" alt="Tue Sep 26 2023 21:43:06 GMT-0700 (Pacific Daylight Time)">04:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">TS introduces new keywords... pretty often</td></tr>
  <tr class="msg" id="L549"><td class="ts-cell"><a class="ts" href="#L549" alt="Tue Sep 26 2023 21:43:16 GMT-0700 (Pacific Daylight Time)">04:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> The advantage of "token soup" is that typed languages can continue to innovate within that space without requiring advancing a proposal through TC39 for what is otherwise just a comment.</blockquote></mx-reply>there are very few things in this space that wouldn't benefit from going through tc39</td></tr>
  <tr class="msg" id="L550"><td class="ts-cell"><a class="ts" href="#L550" alt="Tue Sep 26 2023 21:43:40 GMT-0700 (Pacific Daylight Time)">04:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Or if we managed to entirely avoid new cover grammars, so that the check is just "is the next token a <code>::&lt;</code>/<code>:</code>?"</td></tr>
  <tr class="msg" id="L551"><td class="ts-cell"><a class="ts" href="#L551" alt="Tue Sep 26 2023 21:43:42 GMT-0700 (Pacific Daylight Time)">04:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I wonder if there is some perf goal we could aim at. Such as "no cover grammar needed unless there is a token clearly introducing a type context"</blockquote></mx-reply>i think that assumes that you've already convinced engines that it's worthwhile to add <em>anything</em> here, and i think we are not yet convinced. at least not myself and michael</td></tr>
  <tr class="msg" id="L552"><td class="ts-cell"><a class="ts" href="#L552" alt="Tue Sep 26 2023 21:44:16 GMT-0700 (Pacific Daylight Time)">04:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> but it would not let them do stuff like <code>satisfies</code>, etc</blockquote></mx-reply>True, but I think that's an acceptable tradeoff.</td></tr>
  <tr class="msg" id="L553"><td class="ts-cell"><a class="ts" href="#L553" alt="Tue Sep 26 2023 21:45:02 GMT-0700 (Pacific Daylight Time)">04:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">though to be clear i do not share msaboff's concerns about picking winners as strongly</td></tr>
  <tr class="msg" id="L554"><td class="ts-cell"><a class="ts" href="#L554" alt="Tue Sep 26 2023 21:46:07 GMT-0700 (Pacific Daylight Time)">04:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i think where i am ending up here is that if we can't get any runtime benefit here, runtimes shouldn't deal with this, and it shouldn't move forward</td></tr>
  <tr class="msg" id="L555"><td class="ts-cell"><a class="ts" href="#L555" alt="Tue Sep 26 2023 21:46:24 GMT-0700 (Pacific Daylight Time)">04:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">and its pretty clear at this point that there will be no runtime benefit </td></tr>
  <tr class="msg" id="L556"><td class="ts-cell"><a class="ts" href="#L556" alt="Tue Sep 26 2023 21:46:28 GMT-0700 (Pacific Daylight Time)">04:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">I just think there's a lot of terribly misleading verbiage surrounding "runtime" and erasure</td></tr>
  <tr class="msg" id="L557"><td class="ts-cell"><a class="ts" href="#L557" alt="Tue Sep 26 2023 21:46:52 GMT-0700 (Pacific Daylight Time)">04:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">every engine has a parser for early errors</td></tr>
  <tr class="msg" id="L558"><td class="ts-cell"><a class="ts" href="#L558" alt="Tue Sep 26 2023 21:47:19 GMT-0700 (Pacific Daylight Time)">04:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">"runtime benefit" in my sentence is anything from engines using the type annotations to make code faster to simple string reflection</td></tr>
  <tr class="msg" id="L559"><td class="ts-cell"><a class="ts" href="#L559" alt="Tue Sep 26 2023 21:47:42 GMT-0700 (Pacific Daylight Time)">04:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">if you just read this presentation you would think that engines will be using this information statically and <em>then</em> throw it away at runtime</td></tr>
  <tr class="msg" id="L560"><td class="ts-cell"><a class="ts" href="#L560" alt="Tue Sep 26 2023 21:48:27 GMT-0700 (Pacific Daylight Time)">04:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">and if that's impossible (which it seems like it is?) then this seems just bad...?</td></tr>
  <tr class="msg" id="L561"><td class="ts-cell"><a class="ts" href="#L561" alt="Tue Sep 26 2023 21:49:03 GMT-0700 (Pacific Daylight Time)">04:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Again, these arguments generally would argue against Python's type annotations as well.</td></tr>
  <tr class="msg" id="L562"><td class="ts-cell"><a class="ts" href="#L562" alt="Tue Sep 26 2023 21:49:04 GMT-0700 (Pacific Daylight Time)">04:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">but mostly I'm just concerned about how confused I've felt.</td></tr>
  <tr class="msg" id="L563"><td class="ts-cell"><a class="ts" href="#L563" alt="Tue Sep 26 2023 21:49:13 GMT-0700 (Pacific Daylight Time)">04:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Make sure you actually <em>mean</em> for your counterargument to be that strong.</td></tr>
  <tr class="msg" id="L564"><td class="ts-cell"><a class="ts" href="#L564" alt="Tue Sep 26 2023 21:49:21 GMT-0700 (Pacific Daylight Time)">04:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Again, these arguments generally would argue against Python's type annotations as well.</blockquote></mx-reply>python type annotations are reflectable</td></tr>
  <tr class="msg" id="L565"><td class="ts-cell"><a class="ts" href="#L565" alt="Tue Sep 26 2023 21:49:32 GMT-0700 (Pacific Daylight Time)">04:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">and this property is used to huge advantage in the ecosystem</td></tr>
  <tr class="msg" id="L566"><td class="ts-cell"><a class="ts" href="#L566" alt="Tue Sep 26 2023 21:49:36 GMT-0700 (Pacific Daylight Time)">04:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@msaboff:matrix.org">msaboff</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> "runtime benefit" in my sentence is anything from engines using the type annotations to make code faster to simple string reflection</blockquote></mx-reply>So what should an implementation do if the type is violated while processing?  Throw?</td></tr>
  <tr class="msg" id="L567"><td class="ts-cell"><a class="ts" href="#L567" alt="Tue Sep 26 2023 21:49:36 GMT-0700 (Pacific Daylight Time)">04:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Mehhhhh the reflection barely matters if at all.</td></tr>
  <tr class="msg" id="L568"><td class="ts-cell"><a class="ts" href="#L568" alt="Tue Sep 26 2023 21:49:38 GMT-0700 (Pacific Daylight Time)">04:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">also python is categorically different than JS, because The Web</td></tr>
  <tr class="msg" id="L569"><td class="ts-cell"><a class="ts" href="#L569" alt="Tue Sep 26 2023 21:50:09 GMT-0700 (Pacific Daylight Time)">04:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> there are very few things in this space that wouldn't benefit from going through tc39</blockquote></mx-reply>Zooming out (and ignoring the specifics of soup vs concrete grammar), one of the whole motivations of this proposal is to ensure coordination of real-life type syntax with tc39.  By default, if we do nothing type syntax will iterate outside tc39 which brings coordination risk.</td></tr>
  <tr class="msg" id="L570"><td class="ts-cell"><a class="ts" href="#L570" alt="Tue Sep 26 2023 21:50:11 GMT-0700 (Pacific Daylight Time)">04:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">mypy doesn't execute python and inspect the reflection, it parses itself</td></tr>
  <tr class="msg" id="L571"><td class="ts-cell"><a class="ts" href="#L571" alt="Tue Sep 26 2023 21:50:19 GMT-0700 (Pacific Daylight Time)">04:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> So what should an implementation do if the type is violated while processing?  Throw?</blockquote></mx-reply>i don't think implementations should try to do it. i'm just saying, if everything we can possibly imagine is off the table, then i don't think its worth it</td></tr>
  <tr class="msg" id="L572"><td class="ts-cell"><a class="ts" href="#L572" alt="Tue Sep 26 2023 21:50:23 GMT-0700 (Pacific Daylight Time)">04:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">Python also isn't shipped to me over the network every time I want to run it?</td></tr>
  <tr class="msg" id="L573"><td class="ts-cell"><a class="ts" href="#L573" alt="Tue Sep 26 2023 21:50:45 GMT-0700 (Pacific Daylight Time)">04:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">sure, i run a build step on my python when i ship a new version to pypi</td></tr>
  <tr class="msg" id="L574"><td class="ts-cell"><a class="ts" href="#L574" alt="Tue Sep 26 2023 21:50:45 GMT-0700 (Pacific Daylight Time)">04:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Python also isn't shipped to me over the network every time I want to run it?</blockquote></mx-reply>one would hope</td></tr>
  <tr class="msg" id="L575"><td class="ts-cell"><a class="ts" href="#L575" alt="Tue Sep 26 2023 21:50:57 GMT-0700 (Pacific Daylight Time)">04:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">just wait</td></tr>
  <tr class="msg" id="L576"><td class="ts-cell"><a class="ts" href="#L576" alt="Tue Sep 26 2023 21:53:52 GMT-0700 (Pacific Daylight Time)">04:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Mehhhhh the reflection barely matters if at all.</blockquote></mx-reply>there are several major libraries that make use of it. some of them are for dependency injection, which i find distasteful, but its still a thing. there are other cool examples like <a href="http://discord.py">discord.py</a> which uses annotations to build string parsing. i'm talking about packages with hundreds of thousands of downloads per day <em>minimum</em> here.</td></tr>
  <tr class="msg" id="L577"><td class="ts-cell"><a class="ts" href="#L577" alt="Tue Sep 26 2023 21:54:47 GMT-0700 (Pacific Daylight Time)">04:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">ok sure, annotations for non-type-checking reasons i guess. I've never used these <em>because</em> i use the annotations for types instead.</td></tr>
  <tr class="msg" id="L578"><td class="ts-cell"><a class="ts" href="#L578" alt="Tue Sep 26 2023 21:54:56 GMT-0700 (Pacific Daylight Time)">04:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">(you can only do one or the other, I believe)</td></tr>
  <tr class="msg" id="L579"><td class="ts-cell"><a class="ts" href="#L579" alt="Tue Sep 26 2023 21:55:06 GMT-0700 (Pacific Daylight Time)">04:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">yeah i agree there</td></tr>
  <tr class="msg" id="L580"><td class="ts-cell"><a class="ts" href="#L580" alt="Tue Sep 26 2023 21:56:26 GMT-0700 (Pacific Daylight Time)">04:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">to be clear, I don't claim that there are <em>zero</em> projects which are both complex and would benefit from this</td></tr>
  <tr class="msg" id="L581"><td class="ts-cell"><a class="ts" href="#L581" alt="Tue Sep 26 2023 21:56:43 GMT-0700 (Pacific Daylight Time)">04:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@waldemarh:matrix.org">waldemar</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> The advantage of "token soup" is that typed languages can continue to innovate within that space without requiring advancing a proposal through TC39 for what is otherwise just a comment.</blockquote></mx-reply>As I showed in the presentation earlier in the year, that doesn't actually work. For example, you can't even do something as trivial as using existing ECMAScript expression syntax to calculate a constant inside a token soup.</td></tr>
  <tr class="msg" id="L582"><td class="ts-cell"><a class="ts" href="#L582" alt="Tue Sep 26 2023 21:56:53 GMT-0700 (Pacific Daylight Time)">04:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">so, is it really impossible to bring JSX into the language?</td></tr>
  <tr class="msg" id="L583"><td class="ts-cell"><a class="ts" href="#L583" alt="Tue Sep 26 2023 21:57:32 GMT-0700 (Pacific Daylight Time)">04:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i think one of the main challenges is how you can lexically indicate what the syntax is equivalent to - ie <code>React.createElement</code>, <code>h</code>, etc</td></tr>
  <tr class="msg" id="L584"><td class="ts-cell"><a class="ts" href="#L584" alt="Tue Sep 26 2023 21:58:07 GMT-0700 (Pacific Daylight Time)">04:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">otherwise it'd just need to be hardcoded to make an object literal of some kind</td></tr>
  <tr class="msg" id="L585"><td class="ts-cell"><a class="ts" href="#L585" alt="Tue Sep 26 2023 21:58:16 GMT-0700 (Pacific Daylight Time)">04:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">yeah it would have to be pojo</td></tr>
  <tr class="msg" id="L586"><td class="ts-cell"><a class="ts" href="#L586" alt="Tue Sep 26 2023 21:58:22 GMT-0700 (Pacific Daylight Time)">04:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i think one of the main challenges is how you can lexically indicate what the syntax is equivalent to - ie <code>React.createElement</code>, <code>h</code>, etc</blockquote></mx-reply>of course our own representation and ui library comes to support us</td></tr>
  <tr class="msg" id="L587"><td class="ts-cell"><a class="ts" href="#L587" alt="Tue Sep 26 2023 21:58:41 GMT-0700 (Pacific Daylight Time)">04:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> yeah it would have to be pojo</blockquote></mx-reply>or curried</td></tr>
  <tr class="msg" id="L588"><td class="ts-cell"><a class="ts" href="#L588" alt="Tue Sep 26 2023 21:58:59 GMT-0700 (Pacific Daylight Time)">04:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><code>(&lt;p&gt;hi&lt;/p&gt;)(h)</code></td></tr>
  <tr class="msg" id="L589"><td class="ts-cell"><a class="ts" href="#L589" alt="Tue Sep 26 2023 21:59:51 GMT-0700 (Pacific Daylight Time)">04:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">is bloomberg going to get rid of tools?</td></tr>
  <tr class="msg" id="L590"><td class="ts-cell"><a class="ts" href="#L590" alt="Tue Sep 26 2023 22:00:20 GMT-0700 (Pacific Daylight Time)">05:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">run code in the void</td></tr>
  <tr class="msg" id="L591"><td class="ts-cell"><a class="ts" href="#L591" alt="Tue Sep 26 2023 22:00:46 GMT-0700 (Pacific Daylight Time)">05:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i got bad news for you if you think JS is directly executed by the metal</td></tr>
  <tr class="msg" id="L592"><td class="ts-cell"><a class="ts" href="#L592" alt="Tue Sep 26 2023 22:00:50 GMT-0700 (Pacific Daylight Time)">05:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">one of the stated goals tho is "unfork the ecosystem"; "unfork" means 0 fork, not "less forked"</td></tr>
  <tr class="msg" id="L593"><td class="ts-cell"><a class="ts" href="#L593" alt="Tue Sep 26 2023 22:01:04 GMT-0700 (Pacific Daylight Time)">05:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">"spork the ecosystem" doesn't have the same ring to it</td></tr>
  <tr class="msg" id="L594"><td class="ts-cell"><a class="ts" href="#L594" alt="Tue Sep 26 2023 22:01:04 GMT-0700 (Pacific Daylight Time)">05:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">ljharb</span>: this is actually a <em>new</em> fork!</td></tr>
  <tr class="msg" id="L595"><td class="ts-cell"><a class="ts" href="#L595" alt="Tue Sep 26 2023 22:01:16 GMT-0700 (Pacific Daylight Time)">05:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">critical fork</td></tr>
  <tr class="msg" id="L596"><td class="ts-cell"><a class="ts" href="#L596" alt="Tue Sep 26 2023 22:01:25 GMT-0700 (Pacific Daylight Time)">05:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i got bad news for you if you think JS is directly executed by the metal</blockquote></mx-reply>even the array accesses? ü•∫ /s</td></tr>
  <tr class="msg" id="L597"><td class="ts-cell"><a class="ts" href="#L597" alt="Tue Sep 26 2023 22:01:42 GMT-0700 (Pacific Daylight Time)">05:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><em>especially</em> the array accesses</td></tr>
  <tr class="msg" id="L598"><td class="ts-cell"><a class="ts" href="#L598" alt="Tue Sep 26 2023 22:01:55 GMT-0700 (Pacific Daylight Time)">05:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">üëâÔ∏èü•∫üëàÔ∏è</td></tr>
  <tr class="msg" id="L599"><td class="ts-cell"><a class="ts" href="#L599" alt="Tue Sep 26 2023 22:02:06 GMT-0700 (Pacific Daylight Time)">05:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">is that you putting your fingers in your ears</td></tr>
  <tr class="msg" id="L600"><td class="ts-cell"><a class="ts" href="#L600" alt="Tue Sep 26 2023 22:02:15 GMT-0700 (Pacific Daylight Time)">05:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">it can be that too</td></tr>
  <tr class="msg" id="L601"><td class="ts-cell"><a class="ts" href="#L601" alt="Tue Sep 26 2023 22:02:17 GMT-0700 (Pacific Daylight Time)">05:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">no i wanted to make that meme where the fingers are together</td></tr>
  <tr class="msg" id="L602"><td class="ts-cell"><a class="ts" href="#L602" alt="Tue Sep 26 2023 22:02:24 GMT-0700 (Pacific Daylight Time)">05:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">lol</td></tr>
  <tr class="msg" id="L603"><td class="ts-cell"><a class="ts" href="#L603" alt="Tue Sep 26 2023 22:02:25 GMT-0700 (Pacific Daylight Time)">05:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">dunno how to make that on one line</td></tr>
  <tr class="msg" id="L604"><td class="ts-cell"><a class="ts" href="#L604" alt="Tue Sep 26 2023 22:02:32 GMT-0700 (Pacific Daylight Time)">05:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">A+ reference</td></tr>
  <tr class="msg" id="L605"><td class="ts-cell"><a class="ts" href="#L605" alt="Tue Sep 26 2023 22:02:34 GMT-0700 (Pacific Daylight Time)">05:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> one of the stated goals tho is "unfork the ecosystem"; "unfork" means 0 fork, not "less forked"</blockquote></mx-reply>let's bring JSX in!</td></tr>
  <tr class="msg" id="L606"><td class="ts-cell"><a class="ts" href="#L606" alt="Tue Sep 26 2023 22:02:42 GMT-0700 (Pacific Daylight Time)">05:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> is bloomberg going to get rid of tools?</blockquote></mx-reply>I hope not or I'll be out of a job.</td></tr>
  <tr class="msg" id="L607"><td class="ts-cell"><a class="ts" href="#L607" alt="Tue Sep 26 2023 22:02:49 GMT-0700 (Pacific Daylight Time)">05:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><span class="nick-5">danielrosenwasser</span>: we're very interested in more devtools collaboration with TypeScript :)</td></tr>
  <tr class="msg" id="L608"><td class="ts-cell"><a class="ts" href="#L608" alt="Tue Sep 26 2023 22:02:50 GMT-0700 (Pacific Daylight Time)">05:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">i am a little bit disappointed that we didn't get to discuss topics around in-browser devtools more</td></tr>
  <tr class="msg" id="L609"><td class="ts-cell"><a class="ts" href="#L609" alt="Tue Sep 26 2023 22:03:10 GMT-0700 (Pacific Daylight Time)">05:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i am a little bit disappointed that we didn't get to discuss topics around in-browser devtools more</blockquote></mx-reply>i remain of the opinion the most highly impactful thing is that, exactly</td></tr>
  <tr class="msg" id="L610"><td class="ts-cell"><a class="ts" href="#L610" alt="Tue Sep 26 2023 22:03:12 GMT-0700 (Pacific Daylight Time)">05:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">That was something that flew by the queue a few times</td></tr>
  <tr class="msg" id="L611"><td class="ts-cell"><a class="ts" href="#L611" alt="Tue Sep 26 2023 22:03:14 GMT-0700 (Pacific Daylight Time)">05:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">not changing the standard</td></tr>
  <tr class="msg" id="L612"><td class="ts-cell"><a class="ts" href="#L612" alt="Tue Sep 26 2023 22:03:28 GMT-0700 (Pacific Daylight Time)">05:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">Then I'd love to talk about that too</td></tr>
  <tr class="msg" id="L613"><td class="ts-cell"><a class="ts" href="#L613" alt="Tue Sep 26 2023 22:03:39 GMT-0700 (Pacific Daylight Time)">05:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">the coolest thing about devtools changes is that you can just pr them</td></tr>
  <tr class="msg" id="L614"><td class="ts-cell"><a class="ts" href="#L614" alt="Tue Sep 26 2023 22:03:42 GMT-0700 (Pacific Daylight Time)">05:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">(i say that as a non-devtools representative)</td></tr>
  <tr class="msg" id="L615"><td class="ts-cell"><a class="ts" href="#L615" alt="Tue Sep 26 2023 22:03:45 GMT-0700 (Pacific Daylight Time)">05:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">you don't need plenary approval</td></tr>
  <tr class="msg" id="L616"><td class="ts-cell"><a class="ts" href="#L616" alt="Tue Sep 26 2023 22:04:15 GMT-0700 (Pacific Daylight Time)">05:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> (i say that as a non-devtools representative)</blockquote></mx-reply>but i have talked with them about it!</td></tr>
  <tr class="msg" id="L617"><td class="ts-cell"><a class="ts" href="#L617" alt="Tue Sep 26 2023 22:04:57 GMT-0700 (Pacific Daylight Time)">05:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">bradley and i talking to v8 about devtools improvements in node is where the "repl goal" stuff came from</td></tr>
  <tr class="msg" id="L618"><td class="ts-cell"><a class="ts" href="#L618" alt="Tue Sep 26 2023 22:05:09 GMT-0700 (Pacific Daylight Time)">05:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">it goes full circle</td></tr>
  <tr class="msg" id="L619"><td class="ts-cell"><a class="ts" href="#L619" alt="Tue Sep 26 2023 22:05:11 GMT-0700 (Pacific Daylight Time)">05:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><p>so let me try to summarize my thoughts:</p>
<ul>
<li>
<p>I agree there is would be some benefit for at least some projects, including both beginners and complex projects</p>
</li>
<li>
<p>I am not convinced that in fact most people will be able to skip the build step: this proposal does not cover all of TS as-is, and <em>definitely</em> won't cover JSX</p>
</li>
<li>
<p>and this proposal will constrain the growth of TS, e.g. no new <code>satisfies</code>-like keywords, which TS has wanted to add lots of historically</p>
</li>
<li>
<p>the thing where you want to copy-paste code from your editor to the browser console is very real, but could be solved just in the browser console</p>
</li>
<li>
<p>the grammar in this proposal is massive, which will be a lot of work (and runtime cost) to implement, reason about, and maintain</p>
</li>
<li>
<p>given all that, the costs do not seem worth the benefits, to me.</p>
</li>
</ul>
</td></tr>
  <tr class="msg" id="L620"><td class="ts-cell"><a class="ts" href="#L620" alt="Tue Sep 26 2023 22:05:37 GMT-0700 (Pacific Daylight Time)">05:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">BTW we worked on presenting the motivation in this presentation: <a href="https://onedrive.live.com/view.aspx?resid=5D3264BDC1CB4F5B!5615&amp;authkey=!ADFHxW4BxojKreE">https://onedrive.live.com/view.aspx?resid=5D3264BDC1CB4F5B!5615&amp;authkey=!ADFHxW4BxojKreE</a></td></tr>
  <tr class="msg" id="L621"><td class="ts-cell"><a class="ts" href="#L621" alt="Tue Sep 26 2023 22:05:59 GMT-0700 (Pacific Daylight Time)">05:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">I probably don't need to say it, buuuut: for the type annotations proposal, our meeting notes, including summary+conclusion get referenced quite a lot, so we should collectively take extra care to clean them up, ensure accuracy, etc</td></tr>
  <tr class="msg" id="L622"><td class="ts-cell"><a class="ts" href="#L622" alt="Tue Sep 26 2023 22:06:37 GMT-0700 (Pacific Daylight Time)">05:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">also like, "runtime" as a count noun is one of the worst words our industry has ever devised</td></tr>
  <tr class="msg" id="L623"><td class="ts-cell"><a class="ts" href="#L623" alt="Tue Sep 26 2023 22:06:44 GMT-0700 (Pacific Daylight Time)">05:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> bradley and i talking to v8 about devtools improvements in node is where the "repl goal" stuff came from</blockquote></mx-reply>right, I still hope we can get back around to the repl goal proposal...</td></tr>
  <tr class="msg" id="L624"><td class="ts-cell"><a class="ts" href="#L624" alt="Tue Sep 26 2023 22:07:07 GMT-0700 (Pacific Daylight Time)">05:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">and it's disappointing that people seem to be imagining that we'd never have alignment at that level</td></tr>
  <tr class="msg" id="L625"><td class="ts-cell"><a class="ts" href="#L625" alt="Tue Sep 26 2023 22:07:38 GMT-0700 (Pacific Daylight Time)">05:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">yeah i think we can define some minimum behavior pretty easily. just need people who want to spend time on it</td></tr>
  <tr class="msg" id="L626"><td class="ts-cell"><a class="ts" href="#L626" alt="Tue Sep 26 2023 22:07:47 GMT-0700 (Pacific Daylight Time)">05:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">....and also have time to spend on it</td></tr>
  <tr class="msg" id="L627"><td class="ts-cell"><a class="ts" href="#L627" alt="Tue Sep 26 2023 22:08:33 GMT-0700 (Pacific Daylight Time)">05:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>so let me try to summarize my thoughts:</p>
<ul>
<li>
<p>I agree there is would be some benefit for at least some projects, including both beginners and complex projects</p>
</li>
<li>
<p>I am not convinced that in fact most people will be able to skip the build step: this proposal does not cover all of TS as-is, and <em>definitely</em> won't cover JSX</p>
</li>
<li>
<p>and this proposal will constrain the growth of TS, e.g. no new <code>satisfies</code>-like keywords, which TS has wanted to add lots of historically</p>
</li>
<li>
<p>the thing where you want to copy-paste code from your editor to the browser console is very real, but could be solved just in the browser console</p>
</li>
<li>
<p>the grammar in this proposal is massive, which will be a lot of work (and runtime cost) to implement, reason about, and maintain</p>
</li>
<li>
<p>given all that, the costs do not seem worth the benefits, to me.</p>
</li>
</ul>
</blockquote></mx-reply>this captures my main concerns</td></tr>
  <tr class="msg" id="L628"><td class="ts-cell"><a class="ts" href="#L628" alt="Tue Sep 26 2023 22:09:21 GMT-0700 (Pacific Daylight Time)">05:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">yeah same, modulo reflection</td></tr>
  <tr class="msg" id="L629"><td class="ts-cell"><a class="ts" href="#L629" alt="Tue Sep 26 2023 22:12:16 GMT-0700 (Pacific Daylight Time)">05:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">Why don't we just define a binary AST and require all code to be compiled to that?</td></tr>
  <tr class="msg" id="L630"><td class="ts-cell"><a class="ts" href="#L630" alt="Tue Sep 26 2023 22:12:26 GMT-0700 (Pacific Daylight Time)">05:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">lol</td></tr>
  <tr class="msg" id="L631"><td class="ts-cell"><a class="ts" href="#L631" alt="Tue Sep 26 2023 22:12:57 GMT-0700 (Pacific Daylight Time)">05:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i'd like that</td></tr>
  <tr class="msg" id="L632"><td class="ts-cell"><a class="ts" href="#L632" alt="Tue Sep 26 2023 22:13:11 GMT-0700 (Pacific Daylight Time)">05:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">are you saying that'd be a bad world</td></tr>
  <tr class="msg" id="L633"><td class="ts-cell"><a class="ts" href="#L633" alt="Tue Sep 26 2023 22:13:29 GMT-0700 (Pacific Daylight Time)">05:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">did facebook give up on binast</td></tr>
  <tr class="msg" id="L634"><td class="ts-cell"><a class="ts" href="#L634" alt="Tue Sep 26 2023 22:13:35 GMT-0700 (Pacific Daylight Time)">05:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i haven't heard anything about it in years</td></tr>
  <tr class="msg" id="L635"><td class="ts-cell"><a class="ts" href="#L635" alt="Tue Sep 26 2023 22:13:43 GMT-0700 (Pacific Daylight Time)">05:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Wasn't there already an attempt to propose a binary AST?</td></tr>
  <tr class="msg" id="L636"><td class="ts-cell"><a class="ts" href="#L636" alt="Tue Sep 26 2023 22:13:51 GMT-0700 (Pacific Daylight Time)">05:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">yes, that was me</td></tr>
  <tr class="msg" id="L637"><td class="ts-cell"><a class="ts" href="#L637" alt="Tue Sep 26 2023 22:14:05 GMT-0700 (Pacific Daylight Time)">05:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/tc39/proposal-binary-ast">https://github.com/tc39/proposal-binary-ast</a></td></tr>
  <tr class="msg" id="L638"><td class="ts-cell"><a class="ts" href="#L638" alt="Tue Sep 26 2023 22:14:27 GMT-0700 (Pacific Daylight Time)">05:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@msaboff:matrix.org">msaboff</span>&gt;</div></td><td class="msg-cell">Some people were against it üòâ</td></tr>
  <tr class="msg" id="L639"><td class="ts-cell"><a class="ts" href="#L639" alt="Tue Sep 26 2023 22:14:59 GMT-0700 (Pacific Daylight Time)">05:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">what if the binast was s expressions, and it had 4 primitive types and a small memory buffer, and used a harvard architecture...</td></tr>
  <tr class="msg" id="L640"><td class="ts-cell"><a class="ts" href="#L640" alt="Tue Sep 26 2023 22:15:58 GMT-0700 (Pacific Daylight Time)">05:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> what if the binast was s expressions, and it had 4 primitive types and a small memory buffer, and used a harvard architecture...</blockquote></mx-reply>What if we got rid of dynamic types</td></tr>
  <tr class="msg" id="L641"><td class="ts-cell"><a class="ts" href="#L641" alt="Tue Sep 26 2023 22:16:17 GMT-0700 (Pacific Daylight Time)">05:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">The moment I used Decimal seriously, the first thing I'd do is write a template function that just does numeric parsing.</td></tr>
  <tr class="msg" id="L642"><td class="ts-cell"><a class="ts" href="#L642" alt="Tue Sep 26 2023 22:16:53 GMT-0700 (Pacific Daylight Time)">05:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">My point is if we expect all code authored to go through some tool, just go all the way and make the output of that tool something completely different than what was authored. I believe all proposals around that have never considered making that a requirement. Aka that if the author wrote valid JavaScript, it can still be executed as is </td></tr>
  <tr class="msg" id="L643"><td class="ts-cell"><a class="ts" href="#L643" alt="Tue Sep 26 2023 22:16:57 GMT-0700 (Pacific Daylight Time)">05:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">decmath<code>${price} + ${tax}</code></td></tr>
  <tr class="msg" id="L644"><td class="ts-cell"><a class="ts" href="#L644" alt="Tue Sep 26 2023 22:16:58 GMT-0700 (Pacific Daylight Time)">05:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><blockquote>
<p>and this proposal will constrain the growth of TS, e.g. no new satisfies-like keywords, which TS has wanted to add lots of historically</p>
</blockquote>
<p>This part is definitely on the champions' radar. One path, at least at first, is that TS could add <code>satisfies</code> without it becoming JS, just they would initially have a worse developer experience (working only in .ts and not in .js) until a version of that feature (possibly with tweaked syntax) got added to JS grammar. But hopefully we can figure out how to reserve a larger space of grammar such that new features can fit into it. We haven't figured out what that space should be yet, though.</p>
</td></tr>
  <tr class="msg" id="L645"><td class="ts-cell"><a class="ts" href="#L645" alt="Tue Sep 26 2023 22:16:59 GMT-0700 (Pacific Daylight Time)">05:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">we should just have primitive decimals, this makes no sense</td></tr>
  <tr class="msg" id="L646"><td class="ts-cell"><a class="ts" href="#L646" alt="Tue Sep 26 2023 22:17:22 GMT-0700 (Pacific Daylight Time)">05:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> decmath<code>${price} + ${tax}</code></blockquote></mx-reply>it would get a lot of downloads</td></tr>
  <tr class="msg" id="L647"><td class="ts-cell"><a class="ts" href="#L647" alt="Tue Sep 26 2023 22:17:39 GMT-0700 (Pacific Daylight Time)">05:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">no sense at all</td></tr>
  <tr class="msg" id="L648"><td class="ts-cell"><a class="ts" href="#L648" alt="Tue Sep 26 2023 22:17:49 GMT-0700 (Pacific Daylight Time)">05:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> we should just have primitive decimals, this makes no sense</blockquote></mx-reply>This is something we can discuss in more detail if we get around to "operator overloading withdrawal"; let's focus on other parts of this presentation for now.</td></tr>
  <tr class="msg" id="L649"><td class="ts-cell"><a class="ts" href="#L649" alt="Tue Sep 26 2023 22:18:17 GMT-0700 (Pacific Daylight Time)">05:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">it's pretty important to focus on this part now, i think</td></tr>
  <tr class="msg" id="L650"><td class="ts-cell"><a class="ts" href="#L650" alt="Tue Sep 26 2023 22:18:20 GMT-0700 (Pacific Daylight Time)">05:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@msaboff:matrix.org">msaboff</span>&gt;</div></td><td class="msg-cell">Then we wouldn't have ES262.</td></tr>
  <tr class="msg" id="L651"><td class="ts-cell"><a class="ts" href="#L651" alt="Tue Sep 26 2023 22:19:00 GMT-0700 (Pacific Daylight Time)">05:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> it's pretty important to focus on this part now, i think</blockquote></mx-reply>well, this isn't going for advancement... I agree it's an important topic but I wanted to give space for other people to give their presentations.</td></tr>
  <tr class="msg" id="L652"><td class="ts-cell"><a class="ts" href="#L652" alt="Tue Sep 26 2023 22:19:15 GMT-0700 (Pacific Daylight Time)">05:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Lots of the stuff in this presentation is just orthogonal from whether it's a primitive</td></tr>
  <tr class="msg" id="L653"><td class="ts-cell"><a class="ts" href="#L653" alt="Tue Sep 26 2023 22:19:30 GMT-0700 (Pacific Daylight Time)">05:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">my sense is that that stuff is irrelevant if it's not a primitive.</td></tr>
  <tr class="msg" id="L654"><td class="ts-cell"><a class="ts" href="#L654" alt="Tue Sep 26 2023 22:19:39 GMT-0700 (Pacific Daylight Time)">05:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Then we wouldn't have ES262.</blockquote></mx-reply>(it was more fun before editing, because the ES262 <em>spec</em> is statically typed üòõ)</td></tr>
  <tr class="msg" id="L655"><td class="ts-cell"><a class="ts" href="#L655" alt="Tue Sep 26 2023 22:19:42 GMT-0700 (Pacific Daylight Time)">05:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">yes and lots of it doesn't matter at all if nobody is going to use it because it's so unergonomic</td></tr>
  <tr class="msg" id="L656"><td class="ts-cell"><a class="ts" href="#L656" alt="Tue Sep 26 2023 22:20:15 GMT-0700 (Pacific Daylight Time)">05:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@msaboff:matrix.org">msaboff</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> (it was more fun before editing, because the ES262 <em>spec</em> is statically typed üòõ)</blockquote></mx-reply>Happy to make you laugh.</td></tr>
  <tr class="msg" id="L657"><td class="ts-cell"><a class="ts" href="#L657" alt="Tue Sep 26 2023 22:20:44 GMT-0700 (Pacific Daylight Time)">05:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">IIRC there are still concerns about using IEEE 754 at all</td></tr>
  <tr class="msg" id="L658"><td class="ts-cell"><a class="ts" href="#L658" alt="Tue Sep 26 2023 22:21:04 GMT-0700 (Pacific Daylight Time)">05:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">IEEE-754 Decimal128 is the obviously correct choice here</td></tr>
  <tr class="msg" id="L659"><td class="ts-cell"><a class="ts" href="#L659" alt="Tue Sep 26 2023 22:21:13 GMT-0700 (Pacific Daylight Time)">05:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> IIRC there are still concerns about using IEEE 754 at all</blockquote></mx-reply>yeah, this is an example of something interesting to discuss which isn't about whether it's a primitive</td></tr>
  <tr class="msg" id="L660"><td class="ts-cell"><a class="ts" href="#L660" alt="Tue Sep 26 2023 22:21:31 GMT-0700 (Pacific Daylight Time)">05:21</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span></div></td><td class="msg-cell">points to the sign: <a href="https://speleotrove.com/decimal/decifaq4.html#signif">https://speleotrove.com/decimal/decifaq4.html#signif</a></td></tr>
  <tr class="msg" id="L661"><td class="ts-cell"><a class="ts" href="#L661" alt="Tue Sep 26 2023 22:21:46 GMT-0700 (Pacific Daylight Time)">05:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">D<code>1</code></td></tr>
  <tr class="msg" id="L662"><td class="ts-cell"><a class="ts" href="#L662" alt="Tue Sep 26 2023 22:21:50 GMT-0700 (Pacific Daylight Time)">05:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">if its not a primitive is there any benefit to it existing in the language itself</td></tr>
  <tr class="msg" id="L663"><td class="ts-cell"><a class="ts" href="#L663" alt="Tue Sep 26 2023 22:22:01 GMT-0700 (Pacific Daylight Time)">05:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">that's my queue item</td></tr>
  <tr class="msg" id="L664"><td class="ts-cell"><a class="ts" href="#L664" alt="Tue Sep 26 2023 22:22:01 GMT-0700 (Pacific Daylight Time)">05:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">just perf optimization?</td></tr>
  <tr class="msg" id="L665"><td class="ts-cell"><a class="ts" href="#L665" alt="Tue Sep 26 2023 22:22:06 GMT-0700 (Pacific Daylight Time)">05:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>so let me try to summarize my thoughts:</p>
<ul>
<li>
<p>I agree there is would be some benefit for at least some projects, including both beginners and complex projects</p>
</li>
<li>
<p>I am not convinced that in fact most people will be able to skip the build step: this proposal does not cover all of TS as-is, and <em>definitely</em> won't cover JSX</p>
</li>
<li>
<p>and this proposal will constrain the growth of TS, e.g. no new <code>satisfies</code>-like keywords, which TS has wanted to add lots of historically</p>
</li>
<li>
<p>the thing where you want to copy-paste code from your editor to the browser console is very real, but could be solved just in the browser console</p>
</li>
<li>
<p>the grammar in this proposal is massive, which will be a lot of work (and runtime cost) to implement, reason about, and maintain</p>
</li>
<li>
<p>given all that, the costs do not seem worth the benefits, to me.</p>
</li>
</ul>
</blockquote></mx-reply>also, it has been my experience that many of the reported problems with "having to compile typescript" are actually different problems than "I have to run another tool". they're things like "I want to dual-emit CJS and ESM" or "the module resolution in my version of typescript is different from in node" or "module interop is broken" or things like that. and to the extent that this proposal helps those problems, it does so only because it forces you to make TS's resolution-and-etc match your other tools. but that is a tooling problem, not a fundamental problem with having a strip-types step in your build process, and TS has lately been making some improvements in that area already</td></tr>
  <tr class="msg" id="L666"><td class="ts-cell"><a class="ts" href="#L666" alt="Tue Sep 26 2023 22:22:11 GMT-0700 (Pacific Daylight Time)">05:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">(Matrix does not correctly handle multi-ticks, don't even bother trying.)</td></tr>
  <tr class="msg" id="L667"><td class="ts-cell"><a class="ts" href="#L667" alt="Tue Sep 26 2023 22:22:21 GMT-0700 (Pacific Daylight Time)">05:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">TabAtkins</span>: <code>`yes it does`</code> but you may have to "hold it correctly" tbf</td></tr>
  <tr class="msg" id="L668"><td class="ts-cell"><a class="ts" href="#L668" alt="Tue Sep 26 2023 22:22:24 GMT-0700 (Pacific Daylight Time)">05:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">like i think performance can be a valid reason</td></tr>
  <tr class="msg" id="L669"><td class="ts-cell"><a class="ts" href="#L669" alt="Tue Sep 26 2023 22:22:28 GMT-0700 (Pacific Daylight Time)">05:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">even if its not a primitive </td></tr>
  <tr class="msg" id="L670"><td class="ts-cell"><a class="ts" href="#L670" alt="Tue Sep 26 2023 22:22:33 GMT-0700 (Pacific Daylight Time)">05:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">but i'd wanna see very very good performance</td></tr>
  <tr class="msg" id="L671"><td class="ts-cell"><a class="ts" href="#L671" alt="Tue Sep 26 2023 22:22:55 GMT-0700 (Pacific Daylight Time)">05:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">correctness is the main reason (but i agree that ergonomics is p important)</td></tr>
  <tr class="msg" id="L672"><td class="ts-cell"><a class="ts" href="#L672" alt="Tue Sep 26 2023 22:23:07 GMT-0700 (Pacific Daylight Time)">05:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">so I worry that a lot of people are experience "compiling with typescript is painful" and assuming that types-as-comments will fix their problems, when those are in fact different problems</td></tr>
  <tr class="msg" id="L673"><td class="ts-cell"><a class="ts" href="#L673" alt="Tue Sep 26 2023 22:23:22 GMT-0700 (Pacific Daylight Time)">05:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Like the "lossless division with fixed precision" isn't trivial to write yourself.</td></tr>
  <tr class="msg" id="L674"><td class="ts-cell"><a class="ts" href="#L674" alt="Tue Sep 26 2023 22:23:34 GMT-0700 (Pacific Daylight Time)">05:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">luckily there's packages that implement it already, right?</td></tr>
  <tr class="msg" id="L675"><td class="ts-cell"><a class="ts" href="#L675" alt="Tue Sep 26 2023 22:23:51 GMT-0700 (Pacific Daylight Time)">05:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">it would have perf footguns though, like I'd have to do manual interning to avoid repeated string parsing <span class="nick-7">snek</span></td></tr>
  <tr class="msg" id="L676"><td class="ts-cell"><a class="ts" href="#L676" alt="Tue Sep 26 2023 22:24:00 GMT-0700 (Pacific Daylight Time)">05:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">To the best of my knowledge, not really.</td></tr>
  <tr class="msg" id="L677"><td class="ts-cell"><a class="ts" href="#L677" alt="Tue Sep 26 2023 22:24:01 GMT-0700 (Pacific Daylight Time)">05:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> so I worry that a lot of people are experience "compiling with typescript is painful" and assuming that types-as-comments will fix their problems, when those are in fact different problems</blockquote></mx-reply>has this been a common refrain?</td></tr>
  <tr class="msg" id="L678"><td class="ts-cell"><a class="ts" href="#L678" alt="Tue Sep 26 2023 22:24:27 GMT-0700 (Pacific Daylight Time)">05:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">"compiling with typescript is painful" is common, definitely</td></tr>
  <tr class="msg" id="L679"><td class="ts-cell"><a class="ts" href="#L679" alt="Tue Sep 26 2023 22:24:49 GMT-0700 (Pacific Daylight Time)">05:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">and upon investigating that turning out to be down to moduleResolution differences or CJS/ESM or whatever is also common IME</td></tr>
  <tr class="msg" id="L680"><td class="ts-cell"><a class="ts" href="#L680" alt="Tue Sep 26 2023 22:24:51 GMT-0700 (Pacific Daylight Time)">05:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">I mean the idea that types annotations is the panacea</td></tr>
  <tr class="msg" id="L681"><td class="ts-cell"><a class="ts" href="#L681" alt="Tue Sep 26 2023 22:24:51 GMT-0700 (Pacific Daylight Time)">05:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">Me as the poor guy, writing software, I do not care about performance, but about having something, that is so often needed, simply being built into the language, so I do not have to rely on third-party implementations. I think that is also the reason, way everyone is waiting for Temporal.</td></tr>
  <tr class="msg" id="L682"><td class="ts-cell"><a class="ts" href="#L682" alt="Tue Sep 26 2023 22:24:55 GMT-0700 (Pacific Daylight Time)">05:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">I will say, even if we didn't get operator overloading, a literal syntax would be <em>super</em> helpful without invoking perf issues.</td></tr>
  <tr class="msg" id="L683"><td class="ts-cell"><a class="ts" href="#L683" alt="Tue Sep 26 2023 22:25:14 GMT-0700 (Pacific Daylight Time)">05:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">Christian Ulbrich</span>: YES. More batteries included please.</td></tr>
  <tr class="msg" id="L684"><td class="ts-cell"><a class="ts" href="#L684" alt="Tue Sep 26 2023 22:25:22 GMT-0700 (Pacific Daylight Time)">05:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">temporal is about dates/times tho, not <em>numbers</em></td></tr>
  <tr class="msg" id="L685"><td class="ts-cell"><a class="ts" href="#L685" alt="Tue Sep 26 2023 22:25:39 GMT-0700 (Pacific Daylight Time)">05:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell"><code>Decimal("1.2")</code> is so obnoxious vs <code>1.2m</code></td></tr>
  <tr class="msg" id="L686"><td class="ts-cell"><a class="ts" href="#L686" alt="Tue Sep 26 2023 22:25:52 GMT-0700 (Pacific Daylight Time)">05:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I mean the idea that types annotations is the panacea</blockquote></mx-reply>ah, I don't know for sure. I <em>expect</em> that many of the random developers who are excited about the proposal are excited because they think it will fix their problems, but their problems are in fact other things like ESM or whatever..</td></tr>
  <tr class="msg" id="L687"><td class="ts-cell"><a class="ts" href="#L687" alt="Tue Sep 26 2023 22:26:09 GMT-0700 (Pacific Daylight Time)">05:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><code>1.2m</code> is pretty motivating i think</td></tr>
  <tr class="msg" id="L688"><td class="ts-cell"><a class="ts" href="#L688" alt="Tue Sep 26 2023 22:28:02 GMT-0700 (Pacific Daylight Time)">05:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">ljharb</span>: Temporal is about giving JS proper date handling. There are other libraries out there, that at least could do theoretically the same, yet we do Temporal.</td></tr>
  <tr class="msg" id="L689"><td class="ts-cell"><a class="ts" href="#L689" alt="Tue Sep 26 2023 22:28:06 GMT-0700 (Pacific Daylight Time)">05:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <code>Decimal("1.2")</code> is so obnoxious vs <code>1.2m</code></blockquote></mx-reply>you forgot <code>new</code>, it's <code>new Decimal("1.2")</code></td></tr>
  <tr class="msg" id="L690"><td class="ts-cell"><a class="ts" href="#L690" alt="Tue Sep 26 2023 22:28:23 GMT-0700 (Pacific Daylight Time)">05:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">How do you feel about syntax for decimals but not primitives? Like regexs</td></tr>
  <tr class="msg" id="L691"><td class="ts-cell"><a class="ts" href="#L691" alt="Tue Sep 26 2023 22:28:30 GMT-0700 (Pacific Daylight Time)">05:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">Jack Works</span>: I mean, it doesn't <em>need</em> to be. We <em>can</em> define it to not require the <code>new</code>. ^_^</td></tr>
  <tr class="msg" id="L692"><td class="ts-cell"><a class="ts" href="#L692" alt="Tue Sep 26 2023 22:28:53 GMT-0700 (Pacific Daylight Time)">05:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> How do you feel about syntax for decimals but not primitives? Like regexs</blockquote></mx-reply><code>1.2m !== 1.2m</code> will trip everyone up forever</td></tr>
  <tr class="msg" id="L693"><td class="ts-cell"><a class="ts" href="#L693" alt="Tue Sep 26 2023 22:29:01 GMT-0700 (Pacific Daylight Time)">05:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">While I <em>really want</em> operator overloading, I'd accept it without. And ignoring that, I don't care about primitive vs object.</td></tr>
  <tr class="msg" id="L694"><td class="ts-cell"><a class="ts" href="#L694" alt="Tue Sep 26 2023 22:29:02 GMT-0700 (Pacific Daylight Time)">05:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">regexps you don't do arithmetic / comparisons / etc on</td></tr>
  <tr class="msg" id="L695"><td class="ts-cell"><a class="ts" href="#L695" alt="Tue Sep 26 2023 22:29:06 GMT-0700 (Pacific Daylight Time)">05:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-4">Jack Works</span>: I mean, it doesn't <em>need</em> to be. We <em>can</em> define it to not require the <code>new</code>. ^_^</blockquote></mx-reply>I want to keep the no <code>new</code> version for primitives. browsers don't want it for now, but I want to keep the hope</td></tr>
  <tr class="msg" id="L696"><td class="ts-cell"><a class="ts" href="#L696" alt="Tue Sep 26 2023 22:29:26 GMT-0700 (Pacific Daylight Time)">05:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <code>1.2m !== 1.2m</code> will trip everyone up forever</blockquote></mx-reply>for the same reason, I also require <code>1.2m</code> not a thing before primitive happens</td></tr>
  <tr class="msg" id="L697"><td class="ts-cell"><a class="ts" href="#L697" alt="Tue Sep 26 2023 22:30:56 GMT-0700 (Pacific Daylight Time)">05:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">if we have primitives in the future, what we have today becomes boxed primitive, and it will not create a breaking change</td></tr>
  <tr class="msg" id="L698"><td class="ts-cell"><a class="ts" href="#L698" alt="Tue Sep 26 2023 22:31:19 GMT-0700 (Pacific Daylight Time)">05:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell"><code>1.2m !== 1.2m</code> clearly just make <code>valueOf</code> throw, can't do it then.</td></tr>
  <tr class="msg" id="L699"><td class="ts-cell"><a class="ts" href="#L699" alt="Tue Sep 26 2023 22:31:24 GMT-0700 (Pacific Daylight Time)">05:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">because temporal pulls in like 70mb of data</td></tr>
  <tr class="msg" id="L700"><td class="ts-cell"><a class="ts" href="#L700" alt="Tue Sep 26 2023 22:31:27 GMT-0700 (Pacific Daylight Time)">05:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">like we don't have number, but <code>new Number('1').add(new Number('2'))</code></td></tr>
  <tr class="msg" id="L701"><td class="ts-cell"><a class="ts" href="#L701" alt="Tue Sep 26 2023 22:31:52 GMT-0700 (Pacific Daylight Time)">05:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <code>1.2m !== 1.2m</code> clearly just make <code>valueOf</code> throw, can't do it then.</blockquote></mx-reply><code>!==</code> does not use <code>valueOf</code>, thank goodness</td></tr>
  <tr class="msg" id="L702"><td class="ts-cell"><a class="ts" href="#L702" alt="Tue Sep 26 2023 22:32:00 GMT-0700 (Pacific Daylight Time)">05:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">gosh dang it</td></tr>
  <tr class="msg" id="L703"><td class="ts-cell"><a class="ts" href="#L703" alt="Tue Sep 26 2023 22:32:15 GMT-0700 (Pacific Daylight Time)">05:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <code>1.2m !== 1.2m</code> clearly just make <code>valueOf</code> throw, can't do it then.</blockquote></mx-reply>a previously throwing code no longer throws is not a breaking change in tc39 IMO</td></tr>
  <tr class="msg" id="L704"><td class="ts-cell"><a class="ts" href="#L704" alt="Tue Sep 26 2023 22:32:29 GMT-0700 (Pacific Daylight Time)">05:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Right!</td></tr>
  <tr class="msg" id="L705"><td class="ts-cell"><a class="ts" href="#L705" alt="Tue Sep 26 2023 22:32:59 GMT-0700 (Pacific Daylight Time)">05:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">I was just half-jokingly saying that having the equality test throw would avoid people accidentally relying on it being always-false.</td></tr>
  <tr class="msg" id="L706"><td class="ts-cell"><a class="ts" href="#L706" alt="Tue Sep 26 2023 22:33:49 GMT-0700 (Pacific Daylight Time)">05:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">my brother are you asking me to add a typeswitch to === for certain object types and to add a <em>throw</em></td></tr>
  <tr class="msg" id="L707"><td class="ts-cell"><a class="ts" href="#L707" alt="Tue Sep 26 2023 22:33:58 GMT-0700 (Pacific Daylight Time)">05:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I was just half-jokingly saying that having the equality test throw would avoid people accidentally relying on it being always-false.</blockquote></mx-reply>Making <code>===</code> throw has the same perf impact as making it work properly: you have in both cases exactly one more branch</td></tr>
  <tr class="msg" id="L708"><td class="ts-cell"><a class="ts" href="#L708" alt="Tue Sep 26 2023 22:34:09 GMT-0700 (Pacific Daylight Time)">05:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">is this proposing that we would use d128</td></tr>
  <tr class="msg" id="L709"><td class="ts-cell"><a class="ts" href="#L709" alt="Tue Sep 26 2023 22:34:22 GMT-0700 (Pacific Daylight Time)">05:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">d128 vs bigdec is still an open question</td></tr>
  <tr class="msg" id="L710"><td class="ts-cell"><a class="ts" href="#L710" alt="Tue Sep 26 2023 22:34:23 GMT-0700 (Pacific Daylight Time)">05:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">(<code>new Number(1) === new Number(1)</code> also false today so I'm very optimistic that Decimal can add boxed primitive first then if the engine see it is widely used they can add primitives later)</td></tr>
  <tr class="msg" id="L711"><td class="ts-cell"><a class="ts" href="#L711" alt="Tue Sep 26 2023 22:34:45 GMT-0700 (Pacific Daylight Time)">05:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Making <code>===</code> throw has the same perf impact as making it work properly: you have in both cases exactly one more branch</blockquote></mx-reply>it's actually worse I think - throwing operators are special, can't be optimized the same as non-throwing operations</td></tr>
  <tr class="msg" id="L712"><td class="ts-cell"><a class="ts" href="#L712" alt="Tue Sep 26 2023 22:35:02 GMT-0700 (Pacific Daylight Time)">05:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><code>===</code> must never, ever throw, that's a hill i will gladly die on</td></tr>
  <tr class="msg" id="L713"><td class="ts-cell"><a class="ts" href="#L713" alt="Tue Sep 26 2023 22:35:19 GMT-0700 (Pacific Daylight Time)">05:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">IE 8 or 9 did that on one thing and it's very very bad</td></tr>
  <tr class="msg" id="L714"><td class="ts-cell"><a class="ts" href="#L714" alt="Tue Sep 26 2023 22:35:29 GMT-0700 (Pacific Daylight Time)">05:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Ah, if it's cheaper to just do the comparison right then that's easy, ship it <span class="nick-8">shu</span></td></tr>
  <tr class="msg" id="L715"><td class="ts-cell"><a class="ts" href="#L715" alt="Tue Sep 26 2023 22:35:41 GMT-0700 (Pacific Daylight Time)">05:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">throwing doesn't really make surrounding code slower anymore. there are certainly some weird cases but in general everyone is on the unwinding train these days i think</td></tr>
  <tr class="msg" id="L716"><td class="ts-cell"><a class="ts" href="#L716" alt="Tue Sep 26 2023 22:35:55 GMT-0700 (Pacific Daylight Time)">05:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">they constrain optimizability</td></tr>
  <tr class="msg" id="L717"><td class="ts-cell"><a class="ts" href="#L717" alt="Tue Sep 26 2023 22:36:06 GMT-0700 (Pacific Daylight Time)">05:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">anyone questioning Decimal128, <em>please</em> read <a href="https://speleotrove.com/decimal/decifaq4.html#signif">https://speleotrove.com/decimal/decifaq4.html#signif</a></td></tr>
  <tr class="msg" id="L718"><td class="ts-cell"><a class="ts" href="#L718" alt="Tue Sep 26 2023 22:36:14 GMT-0700 (Pacific Daylight Time)">05:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">you can't DCE stuff that might throw as easily</td></tr>
  <tr class="msg" id="L719"><td class="ts-cell"><a class="ts" href="#L719" alt="Tue Sep 26 2023 22:36:22 GMT-0700 (Pacific Daylight Time)">05:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">consider <a href="https://en.cppreference.com/w/cpp/language/noexcept_spec">https://en.cppreference.com/w/cpp/language/noexcept_spec</a></td></tr>
  <tr class="msg" id="L720"><td class="ts-cell"><a class="ts" href="#L720" alt="Tue Sep 26 2023 22:36:25 GMT-0700 (Pacific Daylight Time)">05:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">(or do other analysis)</td></tr>
  <tr class="msg" id="L721"><td class="ts-cell"><a class="ts" href="#L721" alt="Tue Sep 26 2023 22:36:48 GMT-0700 (Pacific Daylight Time)">05:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> consider <a href="https://en.cppreference.com/w/cpp/language/noexcept_spec">https://en.cppreference.com/w/cpp/language/noexcept_spec</a></blockquote></mx-reply>how is noexcept in C++ be enforced?</td></tr>
  <tr class="msg" id="L722"><td class="ts-cell"><a class="ts" href="#L722" alt="Tue Sep 26 2023 22:36:58 GMT-0700 (Pacific Daylight Time)">05:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">panic</td></tr>
  <tr class="msg" id="L723"><td class="ts-cell"><a class="ts" href="#L723" alt="Tue Sep 26 2023 22:36:59 GMT-0700 (Pacific Daylight Time)">05:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">?</td></tr>
  <tr class="msg" id="L724"><td class="ts-cell"><a class="ts" href="#L724" alt="Tue Sep 26 2023 22:37:03 GMT-0700 (Pacific Daylight Time)">05:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">noexcept is enforced because unwinding is part of the spec</td></tr>
  <tr class="msg" id="L725"><td class="ts-cell"><a class="ts" href="#L725" alt="Tue Sep 26 2023 22:37:12 GMT-0700 (Pacific Daylight Time)">05:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">oh</td></tr>
  <tr class="msg" id="L726"><td class="ts-cell"><a class="ts" href="#L726" alt="Tue Sep 26 2023 22:37:18 GMT-0700 (Pacific Daylight Time)">05:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">if a noexcept method throws, it panics the whole program</td></tr>
  <tr class="msg" id="L727"><td class="ts-cell"><a class="ts" href="#L727" alt="Tue Sep 26 2023 22:37:19 GMT-0700 (Pacific Daylight Time)">05:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><code>window.onerror = () =&gt; window.close()</code></td></tr>
  <tr class="msg" id="L728"><td class="ts-cell"><a class="ts" href="#L728" alt="Tue Sep 26 2023 22:37:24 GMT-0700 (Pacific Daylight Time)">05:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">:D</td></tr>
  <tr class="msg" id="L729"><td class="ts-cell"><a class="ts" href="#L729" alt="Tue Sep 26 2023 22:37:40 GMT-0700 (Pacific Daylight Time)">05:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">sick</td></tr>
  <tr class="msg" id="L730"><td class="ts-cell"><a class="ts" href="#L730" alt="Tue Sep 26 2023 22:37:56 GMT-0700 (Pacific Daylight Time)">05:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><code>window.onerror = () =&gt; ud2</code></td></tr>
  <tr class="msg" id="L731"><td class="ts-cell"><a class="ts" href="#L731" alt="Tue Sep 26 2023 22:37:59 GMT-0700 (Pacific Daylight Time)">05:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">this is the kind of performance trick i would like to subscribe to in a newsletter</td></tr>
  <tr class="msg" id="L732"><td class="ts-cell"><a class="ts" href="#L732" alt="Tue Sep 26 2023 22:38:59 GMT-0700 (Pacific Daylight Time)">05:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> ah, I don't know for sure. I <em>expect</em> that many of the random developers who are excited about the proposal are excited because they think it will fix their problems, but their problems are in fact other things like ESM or whatever..</blockquote></mx-reply>Our problem is none of that. It's simply that writing JSDoc is terrible DX, but for our case is still preferable to dealing with generated code. And from what I've seen, we're not the only project with that experience.</td></tr>
  <tr class="msg" id="L733"><td class="ts-cell"><a class="ts" href="#L733" alt="Tue Sep 26 2023 22:39:18 GMT-0700 (Pacific Daylight Time)">05:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I agree that at least some projects would in fact benefit, yes</td></tr>
  <tr class="msg" id="L734"><td class="ts-cell"><a class="ts" href="#L734" alt="Tue Sep 26 2023 22:39:41 GMT-0700 (Pacific Daylight Time)">05:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I certainly do not claim that <em>all</em> of the random developers who are excited about the proposal in fact have a different problem</td></tr>
  <tr class="msg" id="L735"><td class="ts-cell"><a class="ts" href="#L735" alt="Tue Sep 26 2023 22:39:48 GMT-0700 (Pacific Daylight Time)">05:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">just that I expect many of them do</td></tr>
  <tr class="msg" id="L736"><td class="ts-cell"><a class="ts" href="#L736" alt="Tue Sep 26 2023 22:39:52 GMT-0700 (Pacific Daylight Time)">05:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">try ts-node, ts-node can configured to skip type checking and even use swc for transpile </td></tr>
  <tr class="msg" id="L737"><td class="ts-cell"><a class="ts" href="#L737" alt="Tue Sep 26 2023 22:40:39 GMT-0700 (Pacific Daylight Time)">05:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i should poll at my company about this type annotation thing</td></tr>
  <tr class="msg" id="L738"><td class="ts-cell"><a class="ts" href="#L738" alt="Tue Sep 26 2023 22:40:58 GMT-0700 (Pacific Daylight Time)">05:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i don't think i've ever had the stated problem </td></tr>
  <tr class="msg" id="L739"><td class="ts-cell"><a class="ts" href="#L739" alt="Tue Sep 26 2023 22:41:05 GMT-0700 (Pacific Daylight Time)">05:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">pasting typescript into devtools or whatever</td></tr>
  <tr class="msg" id="L740"><td class="ts-cell"><a class="ts" href="#L740" alt="Tue Sep 26 2023 22:41:10 GMT-0700 (Pacific Daylight Time)">05:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">or maybe i'm so used to it i don't notice</td></tr>
  <tr class="msg" id="L741"><td class="ts-cell"><a class="ts" href="#L741" alt="Tue Sep 26 2023 22:41:17 GMT-0700 (Pacific Daylight Time)">05:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">ts-node has a repl</td></tr>
  <tr class="msg" id="L742"><td class="ts-cell"><a class="ts" href="#L742" alt="Tue Sep 26 2023 22:41:41 GMT-0700 (Pacific Daylight Time)">05:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">I agree, the correctness win here is the higher-order bit</td></tr>
  <tr class="msg" id="L743"><td class="ts-cell"><a class="ts" href="#L743" alt="Tue Sep 26 2023 22:41:56 GMT-0700 (Pacific Daylight Time)">05:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">we did just switch to rspack this morning, so tool time is definitely a thing some people are thinking about</td></tr>
  <tr class="msg" id="L744"><td class="ts-cell"><a class="ts" href="#L744" alt="Tue Sep 26 2023 22:43:57 GMT-0700 (Pacific Daylight Time)">05:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> try ts-node, ts-node can configured to skip type checking and even use swc for transpile</blockquote></mx-reply>Not all our code runs on node ;) there are other JS engines and environments!</td></tr>
  <tr class="msg" id="L745"><td class="ts-cell"><a class="ts" href="#L745" alt="Tue Sep 26 2023 22:44:01 GMT-0700 (Pacific Daylight Time)">05:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">littledan</span>: please don't jump the queue like that</td></tr>
  <tr class="msg" id="L746"><td class="ts-cell"><a class="ts" href="#L746" alt="Tue Sep 26 2023 22:44:04 GMT-0700 (Pacific Daylight Time)">05:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">tschromium</td></tr>
  <tr class="msg" id="L747"><td class="ts-cell"><a class="ts" href="#L747" alt="Tue Sep 26 2023 22:45:56 GMT-0700 (Pacific Daylight Time)">05:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">which other ones can't be made to transpile TS on the fly somehow?</td></tr>
  <tr class="msg" id="L748"><td class="ts-cell"><a class="ts" href="#L748" alt="Tue Sep 26 2023 22:46:18 GMT-0700 (Pacific Daylight Time)">05:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">sffc</span>: PLEASE, I beg you, read <a href="https://speleotrove.com/decimal/decifaq4.html#signif">https://speleotrove.com/decimal/decifaq4.html#signif</a></td></tr>
  <tr class="msg" id="L749"><td class="ts-cell"><a class="ts" href="#L749" alt="Tue Sep 26 2023 22:46:23 GMT-0700 (Pacific Daylight Time)">05:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">Also saying use deno and tsnode is basically making the argument that the expected DX is for the JS environment to strip / ignore types. I'm just asking for that behavior to be standardized </td></tr>
  <tr class="msg" id="L750"><td class="ts-cell"><a class="ts" href="#L750" alt="Tue Sep 26 2023 22:46:43 GMT-0700 (Pacific Daylight Time)">05:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">that's only widely expected DX tho <em>in a repl</em></td></tr>
  <tr class="msg" id="L751"><td class="ts-cell"><a class="ts" href="#L751" alt="Tue Sep 26 2023 22:47:04 GMT-0700 (Pacific Daylight Time)">05:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">No those environments are used to run production code</td></tr>
  <tr class="msg" id="L752"><td class="ts-cell"><a class="ts" href="#L752" alt="Tue Sep 26 2023 22:50:51 GMT-0700 (Pacific Daylight Time)">05:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><span class="nick-9">dminor</span>: did adding bigint slow down every JS program?</td></tr>
  <tr class="msg" id="L753"><td class="ts-cell"><a class="ts" href="#L753" alt="Tue Sep 26 2023 22:51:01 GMT-0700 (Pacific Daylight Time)">05:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Also saying use deno and tsnode is basically making the argument that the expected DX is for the JS environment to strip / ignore types. I'm just asking for that behavior to be standardized </blockquote></mx-reply>so I think a big disconnect here is the purported benefit is node users, but the cost is imposed on browser vendors and users of webpages</td></tr>
  <tr class="msg" id="L754"><td class="ts-cell"><a class="ts" href="#L754" alt="Tue Sep 26 2023 22:51:11 GMT-0700 (Pacific Daylight Time)">05:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sffc:mozilla.org">sffc</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-16">sffc</span>: PLEASE, I beg you, read <a href="https://speleotrove.com/decimal/decifaq4.html#signif">https://speleotrove.com/decimal/decifaq4.html#signif</a></blockquote></mx-reply>Trailing zeros are important as part of the representation / interchange format. <code>new Decimal("1.0").toLocaleString()</code> and <code>new Intl.PluralRules().select(new Decimal("1.0"))</code> should just work. I don't have a position regarding the impact on arithmetic of these values.</td></tr>
  <tr class="msg" id="L755"><td class="ts-cell"><a class="ts" href="#L755" alt="Tue Sep 26 2023 22:51:12 GMT-0700 (Pacific Daylight Time)">05:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">and node can at least make breaking changes, sometimes, like typescript does</td></tr>
  <tr class="msg" id="L756"><td class="ts-cell"><a class="ts" href="#L756" alt="Tue Sep 26 2023 22:51:16 GMT-0700 (Pacific Daylight Time)">05:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">(imo the reason bigint doesn't get used is because it doesn't interop cleanly with Number, which is a mistake Decimal needn't repeat)</td></tr>
  <tr class="msg" id="L757"><td class="ts-cell"><a class="ts" href="#L757" alt="Tue Sep 26 2023 22:51:16 GMT-0700 (Pacific Daylight Time)">05:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">so it's just a very... very different space</td></tr>
  <tr class="msg" id="L758"><td class="ts-cell"><a class="ts" href="#L758" alt="Tue Sep 26 2023 22:52:19 GMT-0700 (Pacific Daylight Time)">05:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> (imo the reason bigint doesn't get used is because it doesn't interop cleanly with Number, which is a mistake Decimal needn't repeat)</blockquote></mx-reply>Decimal would need to repeat that</td></tr>
  <tr class="msg" id="L759"><td class="ts-cell"><a class="ts" href="#L759" alt="Tue Sep 26 2023 22:52:30 GMT-0700 (Pacific Daylight Time)">05:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">sffc</span>: So you're expecting that <code>new Decimal("1.0")</code> and <code>new Decimal("1.0000")</code> would produce the same results when participating in any arithmetic expression?</td></tr>
  <tr class="msg" id="L760"><td class="ts-cell"><a class="ts" href="#L760" alt="Tue Sep 26 2023 22:52:30 GMT-0700 (Pacific Daylight Time)">05:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">decimal interoperating with number would be insane</td></tr>
  <tr class="msg" id="L761"><td class="ts-cell"><a class="ts" href="#L761" alt="Tue Sep 26 2023 22:52:54 GMT-0700 (Pacific Daylight Time)">05:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">why?</td></tr>
  <tr class="msg" id="L762"><td class="ts-cell"><a class="ts" href="#L762" alt="Tue Sep 26 2023 22:53:03 GMT-0700 (Pacific Daylight Time)">05:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">number ‚Üí decimal at least, even if not the other way</td></tr>
  <tr class="msg" id="L763"><td class="ts-cell"><a class="ts" href="#L763" alt="Tue Sep 26 2023 22:53:13 GMT-0700 (Pacific Daylight Time)">05:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">1.3 + 1.3m === ?</td></tr>
  <tr class="msg" id="L764"><td class="ts-cell"><a class="ts" href="#L764" alt="Tue Sep 26 2023 22:53:19 GMT-0700 (Pacific Daylight Time)">05:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">there is no sensible answer to that question</td></tr>
  <tr class="msg" id="L765"><td class="ts-cell"><a class="ts" href="#L765" alt="Tue Sep 26 2023 22:53:26 GMT-0700 (Pacific Daylight Time)">05:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">2.6m? or whatever number 1.3 actually is, converted to decimal, added to 1.3m</td></tr>
  <tr class="msg" id="L766"><td class="ts-cell"><a class="ts" href="#L766" alt="Tue Sep 26 2023 22:53:35 GMT-0700 (Pacific Daylight Time)">05:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@msaboff:matrix.org">msaboff</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> number ‚Üí decimal at least, even if not the other way</blockquote></mx-reply>Either Number -&gt; Decimal or Decimal -&gt; Number are inexact.</td></tr>
  <tr class="msg" id="L767"><td class="ts-cell"><a class="ts" href="#L767" alt="Tue Sep 26 2023 22:53:41 GMT-0700 (Pacific Daylight Time)">05:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> 2.6m?</blockquote></mx-reply>yeah that's impossible</td></tr>
  <tr class="msg" id="L768"><td class="ts-cell"><a class="ts" href="#L768" alt="Tue Sep 26 2023 22:53:45 GMT-0700 (Pacific Daylight Time)">05:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">which is why they can't interop</td></tr>
  <tr class="msg" id="L769"><td class="ts-cell"><a class="ts" href="#L769" alt="Tue Sep 26 2023 22:54:21 GMT-0700 (Pacific Daylight Time)">05:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">(might be possible in simple cases, not possible in general)</td></tr>
  <tr class="msg" id="L770"><td class="ts-cell"><a class="ts" href="#L770" alt="Tue Sep 26 2023 22:54:22 GMT-0700 (Pacific Daylight Time)">05:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">the implicit conversion would have to go number -&gt; mathematical value -&gt; decimal</td></tr>
  <tr class="msg" id="L771"><td class="ts-cell"><a class="ts" href="#L771" alt="Tue Sep 26 2023 22:54:35 GMT-0700 (Pacific Daylight Time)">05:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@dminor:mozilla.org">dminor</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-9">dminor</span>: did adding bigint slow down every JS program?</blockquote></mx-reply>Adding a new primitive meanings adding a new branch for dynamic dispatch based upon type, so it will slow things down, I can't say whether it was a measurable difference for BigInt or not, but adding a primitive has the potential to slow down existing programs, not just things that use the new primitive.</td></tr>
  <tr class="msg" id="L772"><td class="ts-cell"><a class="ts" href="#L772" alt="Tue Sep 26 2023 22:54:36 GMT-0700 (Pacific Daylight Time)">05:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sffc:mozilla.org">sffc</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-16">sffc</span>: So you're expecting that <code>new Decimal("1.0")</code> and <code>new Decimal("1.0000")</code> would produce the same results when participating in any arithmetic expression?</blockquote></mx-reply>That's not something I said. I assume that spec authors who have gone into the weeds have defined what happens with trailing zeros when arithmetic is performed. The Temporal champions went into the weeds on similar types of problems in datetime arithmetic. All I'm saying is that <code>new Decimal("1")</code> and <code>new Decimal("1.0")</code> are absolutely distinct values for the purposes of internationalization and therefore from the Intl point of view it is important that the distinction be retained.</td></tr>
  <tr class="msg" id="L773"><td class="ts-cell"><a class="ts" href="#L773" alt="Tue Sep 26 2023 22:54:44 GMT-0700 (Pacific Daylight Time)">05:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">so we've got 1) they're not primitives and operators don't Just Work, 2) it can't be made reasonable to interop with Number‚Ä¶ i'm having a lot of trouble understanding the remaining value</td></tr>
  <tr class="msg" id="L774"><td class="ts-cell"><a class="ts" href="#L774" alt="Tue Sep 26 2023 22:55:06 GMT-0700 (Pacific Daylight Time)">05:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">sffc</span>: then you don't want decimal</td></tr>
  <tr class="msg" id="L775"><td class="ts-cell"><a class="ts" href="#L775" alt="Tue Sep 26 2023 22:55:06 GMT-0700 (Pacific Daylight Time)">05:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">no use case of decimal known to me calls for them to inteorp with Number</td></tr>
  <tr class="msg" id="L776"><td class="ts-cell"><a class="ts" href="#L776" alt="Tue Sep 26 2023 22:55:07 GMT-0700 (Pacific Daylight Time)">05:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Adding a new primitive meanings adding a new branch for dynamic dispatch based upon type, so it will slow things down, I can't say whether it was a measurable difference for BigInt or not, but adding a primitive has the potential to slow down existing programs, not just things that use the new primitive.</blockquote></mx-reply>sure. but this concern wasn't brought up for BigInt, so how is Decimal any different?</td></tr>
  <tr class="msg" id="L777"><td class="ts-cell"><a class="ts" href="#L777" alt="Tue Sep 26 2023 22:55:13 GMT-0700 (Pacific Daylight Time)">05:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">so I don't know why interop with Number would matter</td></tr>
  <tr class="msg" id="L778"><td class="ts-cell"><a class="ts" href="#L778" alt="Tue Sep 26 2023 22:55:34 GMT-0700 (Pacific Daylight Time)">05:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@dminor:mozilla.org">dminor</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> sure. but this concern wasn't brought up for BigInt, so how is Decimal any different?</blockquote></mx-reply>Because we learned from the experience of implementing BigInt :)</td></tr>
  <tr class="msg" id="L779"><td class="ts-cell"><a class="ts" href="#L779" alt="Tue Sep 26 2023 22:55:36 GMT-0700 (Pacific Daylight Time)">05:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@msaboff:matrix.org">msaboff</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> the implicit conversion would have to go number -&gt; mathematical value -&gt; decimal</blockquote></mx-reply>How would you represent the intermediate mathematical value?</td></tr>
  <tr class="msg" id="L780"><td class="ts-cell"><a class="ts" href="#L780" alt="Tue Sep 26 2023 22:55:49 GMT-0700 (Pacific Daylight Time)">05:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">ljharb</span>: perf improvement is still possibly significant</td></tr>
  <tr class="msg" id="L781"><td class="ts-cell"><a class="ts" href="#L781" alt="Tue Sep 26 2023 22:56:05 GMT-0700 (Pacific Daylight Time)">05:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> 2.6m? or whatever number 1.3 actually is, converted to decimal, added to 1.3m</blockquote></mx-reply>2.60000000000000004...</td></tr>
  <tr class="msg" id="L782"><td class="ts-cell"><a class="ts" href="#L782" alt="Tue Sep 26 2023 22:56:06 GMT-0700 (Pacific Daylight Time)">05:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">within an engine? we have a way to represent mathematical values in the spec</td></tr>
  <tr class="msg" id="L783"><td class="ts-cell"><a class="ts" href="#L783" alt="Tue Sep 26 2023 22:56:16 GMT-0700 (Pacific Daylight Time)">05:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">are you...kidding</td></tr>
  <tr class="msg" id="L784"><td class="ts-cell"><a class="ts" href="#L784" alt="Tue Sep 26 2023 22:56:19 GMT-0700 (Pacific Daylight Time)">05:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">fine with me, as long as i can round/ceil/floor decimals :-)</td></tr>
  <tr class="msg" id="L785"><td class="ts-cell"><a class="ts" href="#L785" alt="Tue Sep 26 2023 22:56:22 GMT-0700 (Pacific Daylight Time)">05:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@dminor:mozilla.org">dminor</span>&gt;</div></td><td class="msg-cell">Well BigInt, and looking at implementing records and tuples</td></tr>
  <tr class="msg" id="L786"><td class="ts-cell"><a class="ts" href="#L786" alt="Tue Sep 26 2023 22:56:26 GMT-0700 (Pacific Daylight Time)">05:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">you think we have a way to represent, in memory, mathematical reals?</td></tr>
  <tr class="msg" id="L787"><td class="ts-cell"><a class="ts" href="#L787" alt="Tue Sep 26 2023 22:56:41 GMT-0700 (Pacific Daylight Time)">05:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">like, as intermediate values?</td></tr>
  <tr class="msg" id="L788"><td class="ts-cell"><a class="ts" href="#L788" alt="Tue Sep 26 2023 22:57:13 GMT-0700 (Pacific Daylight Time)">05:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">we definitely use mathematical values all over the spec</td></tr>
  <tr class="msg" id="L789"><td class="ts-cell"><a class="ts" href="#L789" alt="Tue Sep 26 2023 22:57:22 GMT-0700 (Pacific Daylight Time)">05:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">(potentially TDZ): I suggested trading <code>undefined</code> <em>primitive</em> for <code>Decimal</code> one. I guess no one will notice!</td></tr>
  <tr class="msg" id="L790"><td class="ts-cell"><a class="ts" href="#L790" alt="Tue Sep 26 2023 22:57:28 GMT-0700 (Pacific Daylight Time)">05:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">I assume there's something corresponding to that within engines</td></tr>
  <tr class="msg" id="L791"><td class="ts-cell"><a class="ts" href="#L791" alt="Tue Sep 26 2023 22:57:34 GMT-0700 (Pacific Daylight Time)">05:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> we definitely use mathematical values all over the spec</blockquote></mx-reply>because we don't want to accidentally spec error accumulation in our internal arithmetic</td></tr>
  <tr class="msg" id="L792"><td class="ts-cell"><a class="ts" href="#L792" alt="Tue Sep 26 2023 22:57:41 GMT-0700 (Pacific Daylight Time)">05:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I assume there's something corresponding to that within engines</blockquote></mx-reply>nope</td></tr>
  <tr class="msg" id="L793"><td class="ts-cell"><a class="ts" href="#L793" alt="Tue Sep 26 2023 22:57:44 GMT-0700 (Pacific Daylight Time)">05:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">it just does IEEE arithmetic</td></tr>
  <tr class="msg" id="L794"><td class="ts-cell"><a class="ts" href="#L794" alt="Tue Sep 26 2023 22:57:49 GMT-0700 (Pacific Daylight Time)">05:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">ryzokuken</span>: they're a fiction</td></tr>
  <tr class="msg" id="L795"><td class="ts-cell"><a class="ts" href="#L795" alt="Tue Sep 26 2023 22:57:50 GMT-0700 (Pacific Daylight Time)">05:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">and IEEE arithmetic corresponds to the right thing</td></tr>
  <tr class="msg" id="L796"><td class="ts-cell"><a class="ts" href="#L796" alt="Tue Sep 26 2023 22:57:55 GMT-0700 (Pacific Daylight Time)">05:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">say 1/3rd to scare a js engine implementor</td></tr>
  <tr class="msg" id="L797"><td class="ts-cell"><a class="ts" href="#L797" alt="Tue Sep 26 2023 22:57:57 GMT-0700 (Pacific Daylight Time)">05:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">welp, nvm then</td></tr>
  <tr class="msg" id="L798"><td class="ts-cell"><a class="ts" href="#L798" alt="Tue Sep 26 2023 22:58:08 GMT-0700 (Pacific Daylight Time)">05:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">the use of reals in the spec is just a way to not write down IEEE semantics in the spec</td></tr>
  <tr class="msg" id="L799"><td class="ts-cell"><a class="ts" href="#L799" alt="Tue Sep 26 2023 22:58:14 GMT-0700 (Pacific Daylight Time)">05:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">ps those occasional groups in the kitchen are quite loud, is there a polite way to address that?</td></tr>
  <tr class="msg" id="L800"><td class="ts-cell"><a class="ts" href="#L800" alt="Tue Sep 26 2023 22:58:21 GMT-0700 (Pacific Daylight Time)">05:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell">re: string.prototype.decimalAdd()

this sounds like coloring strings in some way? especially for typescript, you'd have to have some sort of colored string to make this not suck</td></tr>
  <tr class="msg" id="L801"><td class="ts-cell"><a class="ts" href="#L801" alt="Tue Sep 26 2023 22:58:38 GMT-0700 (Pacific Daylight Time)">05:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">Luca Casonato</span>: phantom types!</td></tr>
  <tr class="msg" id="L802"><td class="ts-cell"><a class="ts" href="#L802" alt="Tue Sep 26 2023 22:58:45 GMT-0700 (Pacific Daylight Time)">05:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@msaboff:matrix.org">msaboff</span>&gt;</div></td><td class="msg-cell">What would be the proposed representation of such an intermediate mathematical value?  Number and Decimal have different significant digits and exponent ranges.  Number is inexact for decimal values.  If we had such an exact mathematical value, we'd use that for Number.</td></tr>
  <tr class="msg" id="L803"><td class="ts-cell"><a class="ts" href="#L803" alt="Tue Sep 26 2023 22:58:59 GMT-0700 (Pacific Daylight Time)">05:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><code>String&lt;Decimal&gt;</code></td></tr>
  <tr class="msg" id="L804"><td class="ts-cell"><a class="ts" href="#L804" alt="Tue Sep 26 2023 22:59:16 GMT-0700 (Pacific Daylight Time)">05:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">We could color them by wrapping then in an object as a "marker"</td></tr>
  <tr class="msg" id="L805"><td class="ts-cell"><a class="ts" href="#L805" alt="Tue Sep 26 2023 22:59:33 GMT-0700 (Pacific Daylight Time)">05:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><code>new Decimal(str)</code>!</td></tr>
  <tr class="msg" id="L806"><td class="ts-cell"><a class="ts" href="#L806" alt="Tue Sep 26 2023 22:59:36 GMT-0700 (Pacific Daylight Time)">05:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> re: string.prototype.decimalAdd()<br><br>this sounds like coloring strings in some way? especially for typescript, you'd have to have some sort of colored string to make this not suck</blockquote></mx-reply>if this proposal means TS makes it easier to color strings, I'm all for it!</td></tr>
  <tr class="msg" id="L807"><td class="ts-cell"><a class="ts" href="#L807" alt="Tue Sep 26 2023 23:00:01 GMT-0700 (Pacific Daylight Time)">06:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> What would be the proposed representation of such an intermediate mathematical value?  Number and Decimal have different significant digits and exponent ranges.  Number is inexact for decimal values.  If we had such an exact mathematical value, we'd use that for Number.</blockquote></mx-reply>right. Sorry I was mistaken in assuming that engines might have some way to represent mathematical values within the spec but I now realize that they're pure fiction üòï</td></tr>
  <tr class="msg" id="L808"><td class="ts-cell"><a class="ts" href="#L808" alt="Tue Sep 26 2023 23:00:06 GMT-0700 (Pacific Daylight Time)">06:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">hell yeah love mauve strings</td></tr>
  <tr class="msg" id="L809"><td class="ts-cell"><a class="ts" href="#L809" alt="Tue Sep 26 2023 23:00:09 GMT-0700 (Pacific Daylight Time)">06:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> if this proposal means TS makes it easier to color strings, I'm all for it!</blockquote></mx-reply>actually yeah me too :D</td></tr>
  <tr class="msg" id="L810"><td class="ts-cell"><a class="ts" href="#L810" alt="Tue Sep 26 2023 23:00:19 GMT-0700 (Pacific Daylight Time)">06:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> if this proposal means TS makes it easier to color strings, I'm all for it!</blockquote></mx-reply><code>'a'.blink()</code> color strings?</td></tr>
  <tr class="msg" id="L811"><td class="ts-cell"><a class="ts" href="#L811" alt="Tue Sep 26 2023 23:00:38 GMT-0700 (Pacific Daylight Time)">06:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">if you store it as a fraction of bigints and reduce after each step you get something that is both horribly slow and semantically bad</td></tr>
  <tr class="msg" id="L812"><td class="ts-cell"><a class="ts" href="#L812" alt="Tue Sep 26 2023 23:00:46 GMT-0700 (Pacific Daylight Time)">06:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> so I think a big disconnect here is the purported benefit is node users, but the cost is imposed on browser vendors and users of webpages</blockquote></mx-reply>Our programs should be able to run on a multitude of environments, including browsers and non node/deno based "server" environments. That's the benefit of standardizing this in the language.</td></tr>
  <tr class="msg" id="L813"><td class="ts-cell"><a class="ts" href="#L813" alt="Tue Sep 26 2023 23:01:37 GMT-0700 (Pacific Daylight Time)">06:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Our programs should be able to run on a multitude of environments, including browsers and non node/deno based "server" environments. That's the benefit of standardizing this in the language.</blockquote></mx-reply>I agree that is a benefit. I do not think the costs are commensurate with the benefits.</td></tr>
  <tr class="msg" id="L814"><td class="ts-cell"><a class="ts" href="#L814" alt="Tue Sep 26 2023 23:02:19 GMT-0700 (Pacific Daylight Time)">06:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I think that, in this case, having a variant of node which strips TS types has fewer costs in general, even though it does have that one additional cost.</td></tr>
  <tr class="msg" id="L815"><td class="ts-cell"><a class="ts" href="#L815" alt="Tue Sep 26 2023 23:02:32 GMT-0700 (Pacific Daylight Time)">06:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">not least of which that it would allow breaking changes ever</td></tr>
  <tr class="msg" id="L816"><td class="ts-cell"><a class="ts" href="#L816" alt="Tue Sep 26 2023 23:02:39 GMT-0700 (Pacific Daylight Time)">06:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">and JSX, and so on</td></tr>
  <tr class="msg" id="L817"><td class="ts-cell"><a class="ts" href="#L817" alt="Tue Sep 26 2023 23:03:03 GMT-0700 (Pacific Daylight Time)">06:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">but also, more significantly, that it would not impose costs on users of webpages</td></tr>
  <tr class="msg" id="L818"><td class="ts-cell"><a class="ts" href="#L818" alt="Tue Sep 26 2023 23:03:16 GMT-0700 (Pacific Daylight Time)">06:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">(by making parsing JS slower/more expensive)</td></tr>
  <tr class="msg" id="L819"><td class="ts-cell"><a class="ts" href="#L819" alt="Tue Sep 26 2023 23:06:02 GMT-0700 (Pacific Daylight Time)">06:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">I'll go back to my argument, why do browsers not require that code they execute be in the form of binary AST.</td></tr>
  <tr class="msg" id="L820"><td class="ts-cell"><a class="ts" href="#L820" alt="Tue Sep 26 2023 23:07:05 GMT-0700 (Pacific Daylight Time)">06:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">how could they?</td></tr>
  <tr class="msg" id="L821"><td class="ts-cell"><a class="ts" href="#L821" alt="Tue Sep 26 2023 23:08:10 GMT-0700 (Pacific Daylight Time)">06:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">if thats a hypothetical it requires too many "suppose"s for me to comprehend</td></tr>
  <tr class="msg" id="L822"><td class="ts-cell"><a class="ts" href="#L822" alt="Tue Sep 26 2023 23:09:37 GMT-0700 (Pacific Daylight Time)">06:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">is this a serious question</td></tr>
  <tr class="msg" id="L823"><td class="ts-cell"><a class="ts" href="#L823" alt="Tue Sep 26 2023 23:09:42 GMT-0700 (Pacific Daylight Time)">06:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">I'm just trying to understand exactly how important the tradeoff between parsing performance and readability of executed code is</td></tr>
  <tr class="msg" id="L824"><td class="ts-cell"><a class="ts" href="#L824" alt="Tue Sep 26 2023 23:09:43 GMT-0700 (Pacific Daylight Time)">06:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@bradfordcsmith:matrix.org">Bradford Smith</span>&gt;</div></td><td class="msg-cell">I'd love it if browsers could accept a binary AST format. I'm sure it would be much faster to execute.</td></tr>
  <tr class="msg" id="L825"><td class="ts-cell"><a class="ts" href="#L825" alt="Tue Sep 26 2023 23:09:47 GMT-0700 (Pacific Daylight Time)">06:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">cuz there can be serious answers</td></tr>
  <tr class="msg" id="L826"><td class="ts-cell"><a class="ts" href="#L826" alt="Tue Sep 26 2023 23:10:32 GMT-0700 (Pacific Daylight Time)">06:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@bradfordcsmith:matrix.org">Bradford Smith</span>&gt;</div></td><td class="msg-cell">and it could serve as a standard interchange format to move code from one environment to another whose source was different</td></tr>
  <tr class="msg" id="L827"><td class="ts-cell"><a class="ts" href="#L827" alt="Tue Sep 26 2023 23:10:40 GMT-0700 (Pacific Daylight Time)">06:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">like if we could cut off legacy and restart from the ground up would js even exist? probably not... wasm is significantly better </td></tr>
  <tr class="msg" id="L828"><td class="ts-cell"><a class="ts" href="#L828" alt="Tue Sep 26 2023 23:11:02 GMT-0700 (Pacific Daylight Time)">06:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">And if there is actually a large cost to parsing if the type annotations are not present in the executed code.</td></tr>
  <tr class="msg" id="L829"><td class="ts-cell"><a class="ts" href="#L829" alt="Tue Sep 26 2023 23:12:12 GMT-0700 (Pacific Daylight Time)">06:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">Or if there are other avenues we could explore to mitigate the impact of engines being able to parse and ignore type annotations </td></tr>
  <tr class="msg" id="L830"><td class="ts-cell"><a class="ts" href="#L830" alt="Tue Sep 26 2023 23:12:32 GMT-0700 (Pacific Daylight Time)">06:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">In production scenarios where performance matters</td></tr>
  <tr class="msg" id="L831"><td class="ts-cell"><a class="ts" href="#L831" alt="Tue Sep 26 2023 23:20:31 GMT-0700 (Pacific Daylight Time)">06:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I'll go back to my argument, why do browsers not require that code they execute be in the form of binary AST.</blockquote></mx-reply>we almost certainly would if the option existed</td></tr>
  <tr class="msg" id="L832"><td class="ts-cell"><a class="ts" href="#L832" alt="Tue Sep 26 2023 23:20:34 GMT-0700 (Pacific Daylight Time)">06:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">that would be a better world</td></tr>
  <tr class="msg" id="L833"><td class="ts-cell"><a class="ts" href="#L833" alt="Tue Sep 26 2023 23:20:38 GMT-0700 (Pacific Daylight Time)">06:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">but the option does not exist</td></tr>
  <tr class="msg" id="L834"><td class="ts-cell"><a class="ts" href="#L834" alt="Tue Sep 26 2023 23:20:51 GMT-0700 (Pacific Daylight Time)">06:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">however, do note that when adding a <em>new</em> thing, wasm, we <em>do</em> require it to be compiled rather than accepting WAT</td></tr>
  <tr class="msg" id="L835"><td class="ts-cell"><a class="ts" href="#L835" alt="Tue Sep 26 2023 23:21:05 GMT-0700 (Pacific Daylight Time)">06:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@msaboff:matrix.org">msaboff</span>&gt;</div></td><td class="msg-cell"><span class="nick-7">snek</span>: How do you version a BinaryAST?  Many proposals add new node to an implementation's AST.  How do you handle where the spec needs the source of an expression, e.g. RegExp or a stack trace?  There are many more issues.</td></tr>
  <tr class="msg" id="L836"><td class="ts-cell"><a class="ts" href="#L836" alt="Tue Sep 26 2023 23:21:43 GMT-0700 (Pacific Daylight Time)">06:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">recall that we went with binary ast as an option because we thought bytecode would be DOA</td></tr>
  <tr class="msg" id="L837"><td class="ts-cell"><a class="ts" href="#L837" alt="Tue Sep 26 2023 23:21:55 GMT-0700 (Pacific Daylight Time)">06:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">binary ast is a worse option than bytecode in every way for shipping compiled code</td></tr>
  <tr class="msg" id="L838"><td class="ts-cell"><a class="ts" href="#L838" alt="Tue Sep 26 2023 23:21:59 GMT-0700 (Pacific Daylight Time)">06:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">(not for tools, obviously)</td></tr>
  <tr class="msg" id="L839"><td class="ts-cell"><a class="ts" href="#L839" alt="Tue Sep 26 2023 23:22:21 GMT-0700 (Pacific Daylight Time)">06:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">perhaps with wasm and the lessons there maybe we can think harder about a bytecode again</td></tr>
  <tr class="msg" id="L840"><td class="ts-cell"><a class="ts" href="#L840" alt="Tue Sep 26 2023 23:22:41 GMT-0700 (Pacific Daylight Time)">06:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">if you go through and try to answer every question here you eventually end up at wasm or something similar to wasm... the point of <em>everything</em> is that we have an existing ecosystem here</td></tr>
  <tr class="msg" id="L841"><td class="ts-cell"><a class="ts" href="#L841" alt="Tue Sep 26 2023 23:23:07 GMT-0700 (Pacific Daylight Time)">06:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">why would i end up at wasm? i'm talking about a JS bytecode that has 1:1 expressivity with source JS</td></tr>
  <tr class="msg" id="L842"><td class="ts-cell"><a class="ts" href="#L842" alt="Tue Sep 26 2023 23:23:32 GMT-0700 (Pacific Daylight Time)">06:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i mean mathieu's and msaboff's questions</td></tr>
  <tr class="msg" id="L843"><td class="ts-cell"><a class="ts" href="#L843" alt="Tue Sep 26 2023 23:23:36 GMT-0700 (Pacific Daylight Time)">06:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">ah</td></tr>
  <tr class="msg" id="L844"><td class="ts-cell"><a class="ts" href="#L844" alt="Tue Sep 26 2023 23:23:52 GMT-0700 (Pacific Daylight Time)">06:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">can we advance the queue</td></tr>
  <tr class="msg" id="L845"><td class="ts-cell"><a class="ts" href="#L845" alt="Tue Sep 26 2023 23:23:58 GMT-0700 (Pacific Daylight Time)">06:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@msaboff:matrix.org">msaboff</span>&gt;</div></td><td class="msg-cell">But Wasm has issues as well.  Dev tooling, HTML interop, standard library...</td></tr>
  <tr class="msg" id="L846"><td class="ts-cell"><a class="ts" href="#L846" alt="Tue Sep 26 2023 23:23:59 GMT-0700 (Pacific Daylight Time)">06:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i'd assume with semver, but maybe i'm missing something</td></tr>
  <tr class="msg" id="L847"><td class="ts-cell"><a class="ts" href="#L847" alt="Tue Sep 26 2023 23:24:10 GMT-0700 (Pacific Daylight Time)">06:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">why does that ping me lol</td></tr>
  <tr class="msg" id="L848"><td class="ts-cell"><a class="ts" href="#L848" alt="Tue Sep 26 2023 23:24:29 GMT-0700 (Pacific Daylight Time)">06:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">because element</td></tr>
  <tr class="msg" id="L849"><td class="ts-cell"><a class="ts" href="#L849" alt="Tue Sep 26 2023 23:25:22 GMT-0700 (Pacific Daylight Time)">06:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">anyway the reason i mentioned it was because wasm adds new bytecode ops without versioning at all (wasm is still on version 0x1 "mvp"). it just takes some time to plan everything out.</td></tr>
  <tr class="msg" id="L850"><td class="ts-cell"><a class="ts" href="#L850" alt="Tue Sep 26 2023 23:26:18 GMT-0700 (Pacific Daylight Time)">06:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Is it different from JS adding new syntax?</td></tr>
  <tr class="msg" id="L851"><td class="ts-cell"><a class="ts" href="#L851" alt="Tue Sep 26 2023 23:26:40 GMT-0700 (Pacific Daylight Time)">06:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">at a theoretical level no it is not</td></tr>
  <tr class="msg" id="L852"><td class="ts-cell"><a class="ts" href="#L852" alt="Tue Sep 26 2023 23:26:49 GMT-0700 (Pacific Daylight Time)">06:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">but humans find it easier to namespace words and symbols than numbers </td></tr>
  <tr class="msg" id="L853"><td class="ts-cell"><a class="ts" href="#L853" alt="Tue Sep 26 2023 23:28:58 GMT-0700 (Pacific Daylight Time)">06:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i mean mathieu's and msaboff's questions</blockquote></mx-reply>No I don't think compiling js programs to wasm makes sense. But instead of minifying and to allow making uncompiled JavaScript more useful, I would entertain an efficient source transform of JS that can be efficiently parsed by engines.</td></tr>
  <tr class="msg" id="L854"><td class="ts-cell"><a class="ts" href="#L854" alt="Tue Sep 26 2023 23:29:19 GMT-0700 (Pacific Daylight Time)">06:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i fail to see how "an infinite iterator of empty tuples" is a logical option but k</td></tr>
  <tr class="msg" id="L855"><td class="ts-cell"><a class="ts" href="#L855" alt="Tue Sep 26 2023 23:29:43 GMT-0700 (Pacific Daylight Time)">06:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i fail to see how "an infinite iterator of empty tuples" is a logical option but k</blockquote></mx-reply>I guess that'd have to be the tail of everything if it's what would happen for zero things</td></tr>
  <tr class="msg" id="L856"><td class="ts-cell"><a class="ts" href="#L856" alt="Tue Sep 26 2023 23:29:46 GMT-0700 (Pacific Daylight Time)">06:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">it would be empty</td></tr>
  <tr class="msg" id="L857"><td class="ts-cell"><a class="ts" href="#L857" alt="Tue Sep 26 2023 23:29:46 GMT-0700 (Pacific Daylight Time)">06:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">not all that useful...</td></tr>
  <tr class="msg" id="L858"><td class="ts-cell"><a class="ts" href="#L858" alt="Tue Sep 26 2023 23:30:39 GMT-0700 (Pacific Daylight Time)">06:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">producing an infinite iterator anywhere seems pretty harmful to me</td></tr>
  <tr class="msg" id="L859"><td class="ts-cell"><a class="ts" href="#L859" alt="Tue Sep 26 2023 23:30:59 GMT-0700 (Pacific Daylight Time)">06:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">network streams are infinite async iterators</td></tr>
  <tr class="msg" id="L860"><td class="ts-cell"><a class="ts" href="#L860" alt="Tue Sep 26 2023 23:31:12 GMT-0700 (Pacific Daylight Time)">06:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@msaboff:matrix.org">msaboff</span>&gt;</div></td><td class="msg-cell">I think the current version of Wasm lacks some of what is needed to cleanly compile JS to Wasm.  Its Turing complete, but not optimal.  Also you'd need to include your own garbage collector, etc.</td></tr>
  <tr class="msg" id="L861"><td class="ts-cell"><a class="ts" href="#L861" alt="Tue Sep 26 2023 23:31:27 GMT-0700 (Pacific Daylight Time)">06:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">you should not compile js to wasm</td></tr>
  <tr class="msg" id="L862"><td class="ts-cell"><a class="ts" href="#L862" alt="Tue Sep 26 2023 23:32:38 GMT-0700 (Pacific Daylight Time)">06:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Yeah, I prefer <code><a href="http://Iterator.zip">Iterator.zip</a>([...], mapper?)</code> (omitted mapping just produces an array of the items)</td></tr>
  <tr class="msg" id="L863"><td class="ts-cell"><a class="ts" href="#L863" alt="Tue Sep 26 2023 23:33:03 GMT-0700 (Pacific Daylight Time)">06:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i got distracted, why does zip have a mapper</td></tr>
  <tr class="msg" id="L864"><td class="ts-cell"><a class="ts" href="#L864" alt="Tue Sep 26 2023 23:33:12 GMT-0700 (Pacific Daylight Time)">06:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-7">snek</span>: it's a combiner</td></tr>
  <tr class="msg" id="L865"><td class="ts-cell"><a class="ts" href="#L865" alt="Tue Sep 26 2023 23:33:14 GMT-0700 (Pacific Daylight Time)">06:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">zipWith</td></tr>
  <tr class="msg" id="L866"><td class="ts-cell"><a class="ts" href="#L866" alt="Tue Sep 26 2023 23:33:16 GMT-0700 (Pacific Daylight Time)">06:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i don't like the idea of being forced to wrap multiple iterators in an iterator just to zip them, which is why i want varargs or an object</td></tr>
  <tr class="msg" id="L867"><td class="ts-cell"><a class="ts" href="#L867" alt="Tue Sep 26 2023 23:33:25 GMT-0700 (Pacific Daylight Time)">06:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">I mean, it's a temp array</td></tr>
  <tr class="msg" id="L868"><td class="ts-cell"><a class="ts" href="#L868" alt="Tue Sep 26 2023 23:33:43 GMT-0700 (Pacific Daylight Time)">06:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">yes, and forcing that imo is not a great design</td></tr>
  <tr class="msg" id="L869"><td class="ts-cell"><a class="ts" href="#L869" alt="Tue Sep 26 2023 23:33:47 GMT-0700 (Pacific Daylight Time)">06:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i don't understand what zipWith means, i should have paid better attention i'm sorry</td></tr>
  <tr class="msg" id="L870"><td class="ts-cell"><a class="ts" href="#L870" alt="Tue Sep 26 2023 23:33:52 GMT-0700 (Pacific Daylight Time)">06:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i don't like the idea of being forced to wrap multiple iterators in an iterator just to zip them, which is why i want varargs or an object</blockquote></mx-reply>do you also not like the idea of being forced to wrap multiple promises in an iterable just to await all of them?</td></tr>
  <tr class="msg" id="L871"><td class="ts-cell"><a class="ts" href="#L871" alt="Tue Sep 26 2023 23:34:07 GMT-0700 (Pacific Daylight Time)">06:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i don't understand what zipWith means, i should have paid better attention i'm sorry</blockquote></mx-reply>Iterator.zipWith(Math.max, a, b, c)</td></tr>
  <tr class="msg" id="L872"><td class="ts-cell"><a class="ts" href="#L872" alt="Tue Sep 26 2023 23:34:07 GMT-0700 (Pacific Daylight Time)">06:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> do you also not like the idea of being forced to wrap multiple promises in an iterable just to await all of them?</blockquote></mx-reply>correct, i do not like that and do want a form that takes an object literal</td></tr>
  <tr class="msg" id="L873"><td class="ts-cell"><a class="ts" href="#L873" alt="Tue Sep 26 2023 23:34:30 GMT-0700 (Pacific Daylight Time)">06:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">what is the difference between an object literal and an array here?</td></tr>
  <tr class="msg" id="L874"><td class="ts-cell"><a class="ts" href="#L874" alt="Tue Sep 26 2023 23:34:45 GMT-0700 (Pacific Daylight Time)">06:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">the thing you asked for was the varargs version, which is not like an object literal</td></tr>
  <tr class="msg" id="L875"><td class="ts-cell"><a class="ts" href="#L875" alt="Tue Sep 26 2023 23:34:46 GMT-0700 (Pacific Daylight Time)">06:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Iterator.zipWith(Math.max, a, b, c)</blockquote></mx-reply>i don't understand what this does</td></tr>
  <tr class="msg" id="L876"><td class="ts-cell"><a class="ts" href="#L876" alt="Tue Sep 26 2023 23:34:49 GMT-0700 (Pacific Daylight Time)">06:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">I think it's easiest to understand zip as transposing an array of arrays, fwiw.</td></tr>
  <tr class="msg" id="L877"><td class="ts-cell"><a class="ts" href="#L877" alt="Tue Sep 26 2023 23:34:59 GMT-0700 (Pacific Daylight Time)">06:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> the thing you asked for was the varargs version, which is not like an object literal</blockquote></mx-reply>sure, <code>Promise.all(a, b, c)</code> would be fine too</td></tr>
  <tr class="msg" id="L878"><td class="ts-cell"><a class="ts" href="#L878" alt="Tue Sep 26 2023 23:35:13 GMT-0700 (Pacific Daylight Time)">06:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i am familiar with zip in other languages, i've never seen it paired with a function</td></tr>
  <tr class="msg" id="L879"><td class="ts-cell"><a class="ts" href="#L879" alt="Tue Sep 26 2023 23:35:14 GMT-0700 (Pacific Daylight Time)">06:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I think it's easiest to understand zip as transposing an array of arrays, fwiw.</blockquote></mx-reply>nothing about that sentence reads "easy" to me ¬Ø\_(„ÉÑ)_/¬Ø</td></tr>
  <tr class="msg" id="L880"><td class="ts-cell"><a class="ts" href="#L880" alt="Tue Sep 26 2023 23:35:15 GMT-0700 (Pacific Daylight Time)">06:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I think it's easiest to understand zip as transposing an array of arrays, fwiw.</blockquote></mx-reply>Yeah, the variadic map thing can be called map</td></tr>
  <tr class="msg" id="L881"><td class="ts-cell"><a class="ts" href="#L881" alt="Tue Sep 26 2023 23:35:26 GMT-0700 (Pacific Daylight Time)">06:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">(just my intuition)</td></tr>
  <tr class="msg" id="L882"><td class="ts-cell"><a class="ts" href="#L882" alt="Tue Sep 26 2023 23:35:27 GMT-0700 (Pacific Daylight Time)">06:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rhysd:matrix.org">rhysd</span>&gt;</div></td><td class="msg-cell">I wonder how about using methods like <a href="http://it1.zip">it1.zip</a>(it2).zip(it3) instead of function like Rust does.</td></tr>
  <tr class="msg" id="L883"><td class="ts-cell"><a class="ts" href="#L883" alt="Tue Sep 26 2023 23:35:30 GMT-0700 (Pacific Daylight Time)">06:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i don't understand what the function does</td></tr>
  <tr class="msg" id="L884"><td class="ts-cell"><a class="ts" href="#L884" alt="Tue Sep 26 2023 23:35:44 GMT-0700 (Pacific Daylight Time)">06:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i don't understand what this does</blockquote></mx-reply><code>Iterator.zipWith([a, b], mapper)</code> is the same as <code><a href="http://Iterator.zip">Iterator.zip</a>([a, b]).map(vs =&gt; mapper(...vs))</code></td></tr>
  <tr class="msg" id="L885"><td class="ts-cell"><a class="ts" href="#L885" alt="Tue Sep 26 2023 23:35:57 GMT-0700 (Pacific Daylight Time)">06:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">it just lets you skip making an intermediate array for results and instead immediately passes them to a function</td></tr>
  <tr class="msg" id="L886"><td class="ts-cell"><a class="ts" href="#L886" alt="Tue Sep 26 2023 23:36:00 GMT-0700 (Pacific Daylight Time)">06:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">that's all</td></tr>
  <tr class="msg" id="L887"><td class="ts-cell"><a class="ts" href="#L887" alt="Tue Sep 26 2023 23:36:03 GMT-0700 (Pacific Daylight Time)">06:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">rust has this, and it is used commonly, i think the separate func is less common tbh</td></tr>
  <tr class="msg" id="L888"><td class="ts-cell"><a class="ts" href="#L888" alt="Tue Sep 26 2023 23:36:10 GMT-0700 (Pacific Daylight Time)">06:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">in this case there is no intermediate array tho, because of iterator helpers? it's not like Array.from</td></tr>
  <tr class="msg" id="L889"><td class="ts-cell"><a class="ts" href="#L889" alt="Tue Sep 26 2023 23:36:24 GMT-0700 (Pacific Daylight Time)">06:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> in this case there is no intermediate array tho, because of iterator helpers? it's not like Array.from</blockquote></mx-reply>there is an intermediate array? <code>zip</code> produces arrays</td></tr>
  <tr class="msg" id="L890"><td class="ts-cell"><a class="ts" href="#L890" alt="Tue Sep 26 2023 23:36:28 GMT-0700 (Pacific Daylight Time)">06:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">an iterator of arrays</td></tr>
  <tr class="msg" id="L891"><td class="ts-cell"><a class="ts" href="#L891" alt="Tue Sep 26 2023 23:36:34 GMT-0700 (Pacific Daylight Time)">06:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> it just lets you skip making an intermediate array for results and instead immediately passes them to a function</blockquote></mx-reply>got it, ty</td></tr>
  <tr class="msg" id="L892"><td class="ts-cell"><a class="ts" href="#L892" alt="Tue Sep 26 2023 23:36:47 GMT-0700 (Pacific Daylight Time)">06:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I wonder how about using methods like <a href="http://it1.zip">it1.zip</a>(it2).zip(it3) instead of function like Rust does.</blockquote></mx-reply>.NET-based languages like C# make this available as an extension method, so it can be used both as a static method and like an instance method: <a href="https://learn.microsoft.com/en-us/dotnet/api/system.linq.enumerable.zip?view=net-7.0">https://learn.microsoft.com/en-us/dotnet/api/system.linq.enumerable.zip?view=net-7.0</a></td></tr>
  <tr class="msg" id="L893"><td class="ts-cell"><a class="ts" href="#L893" alt="Tue Sep 26 2023 23:36:47 GMT-0700 (Pacific Daylight Time)">06:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">ahhh right, so the mapper lets you skip that step, fair point. that is like Array.from then (in a good way)</td></tr>
  <tr class="msg" id="L894"><td class="ts-cell"><a class="ts" href="#L894" alt="Tue Sep 26 2023 23:37:04 GMT-0700 (Pacific Daylight Time)">06:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">idk how convinced i am of zipWith existing but ü§∑</td></tr>
  <tr class="msg" id="L895"><td class="ts-cell"><a class="ts" href="#L895" alt="Tue Sep 26 2023 23:37:08 GMT-0700 (Pacific Daylight Time)">06:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Yup, the mapper is exactly the same reasoning as Array.from</td></tr>
  <tr class="msg" id="L896"><td class="ts-cell"><a class="ts" href="#L896" alt="Tue Sep 26 2023 23:37:19 GMT-0700 (Pacific Daylight Time)">06:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> it just lets you skip making an intermediate array for results and instead immediately passes them to a function</blockquote></mx-reply>Yeah this sounds useful but is zip the right name, or map? maybe zip should just take the iterators, and not a function, and you use map if you have a function</td></tr>
  <tr class="msg" id="L897"><td class="ts-cell"><a class="ts" href="#L897" alt="Tue Sep 26 2023 23:37:24 GMT-0700 (Pacific Daylight Time)">06:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Could be omitted but it's a common case (in my experience, at least)</td></tr>
  <tr class="msg" id="L898"><td class="ts-cell"><a class="ts" href="#L898" alt="Tue Sep 26 2023 23:37:45 GMT-0700 (Pacific Daylight Time)">06:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">either way as long as <a href="http://prototype.zip">prototype.zip</a> exists and does the normal thing i'm fine</td></tr>
  <tr class="msg" id="L899"><td class="ts-cell"><a class="ts" href="#L899" alt="Tue Sep 26 2023 23:37:54 GMT-0700 (Pacific Daylight Time)">06:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Yeah this sounds useful but is zip the right name, or map? maybe zip should just take the iterators, and not a function, and you use map if you have a function</blockquote></mx-reply>I am fine with that outcome personally</td></tr>
  <tr class="msg" id="L900"><td class="ts-cell"><a class="ts" href="#L900" alt="Tue Sep 26 2023 23:37:58 GMT-0700 (Pacific Daylight Time)">06:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">it is kind of wild that self-hosted JS in JSC (and presumably not just JSC) uses <code>var</code> exclusively to avoid the perf implications of TDZ</td></tr>
  <tr class="msg" id="L901"><td class="ts-cell"><a class="ts" href="#L901" alt="Tue Sep 26 2023 23:38:11 GMT-0700 (Pacific Daylight Time)">06:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">the battle against intermediate objects is already hopelessly lost when using iterators</td></tr>
  <tr class="msg" id="L902"><td class="ts-cell"><a class="ts" href="#L902" alt="Tue Sep 26 2023 23:38:30 GMT-0700 (Pacific Daylight Time)">06:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">so it may not be worth having a new method solely to allow you to skip some intermediate objects...</td></tr>
  <tr class="msg" id="L903"><td class="ts-cell"><a class="ts" href="#L903" alt="Tue Sep 26 2023 23:38:35 GMT-0700 (Pacific Daylight Time)">06:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><code>zip</code> is a useful name because its what many people reach for in many languages, as well as many existing js libraries.</td></tr>
  <tr class="msg" id="L904"><td class="ts-cell"><a class="ts" href="#L904" alt="Tue Sep 26 2023 23:38:51 GMT-0700 (Pacific Daylight Time)">06:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">ryzokuken</span>: can you move the queue to shu's topic?</td></tr>
  <tr class="msg" id="L905"><td class="ts-cell"><a class="ts" href="#L905" alt="Tue Sep 26 2023 23:39:06 GMT-0700 (Pacific Daylight Time)">06:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">done</td></tr>
  <tr class="msg" id="L906"><td class="ts-cell"><a class="ts" href="#L906" alt="Tue Sep 26 2023 23:39:09 GMT-0700 (Pacific Daylight Time)">06:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">apologies I missed it</td></tr>
  <tr class="msg" id="L907"><td class="ts-cell"><a class="ts" href="#L907" alt="Tue Sep 26 2023 23:39:11 GMT-0700 (Pacific Daylight Time)">06:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell">thanks!</td></tr>
  <tr class="msg" id="L908"><td class="ts-cell"><a class="ts" href="#L908" alt="Tue Sep 26 2023 23:39:13 GMT-0700 (Pacific Daylight Time)">06:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Yeah, def shouldn't be named something other than <code>zip</code> imo</td></tr>
  <tr class="msg" id="L909"><td class="ts-cell"><a class="ts" href="#L909" alt="Tue Sep 26 2023 23:39:20 GMT-0700 (Pacific Daylight Time)">06:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> so it may not be worth having a new method solely to allow you to skip some intermediate objects...</blockquote></mx-reply>sure but variadic map is probably also ergonomically motivated (just it'd be a weird name for zip itself)</td></tr>
  <tr class="msg" id="L910"><td class="ts-cell"><a class="ts" href="#L910" alt="Tue Sep 26 2023 23:39:24 GMT-0700 (Pacific Daylight Time)">06:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">(or some variant like <code>zipLongest</code>)</td></tr>
  <tr class="msg" id="L911"><td class="ts-cell"><a class="ts" href="#L911" alt="Tue Sep 26 2023 23:39:57 GMT-0700 (Pacific Daylight Time)">06:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">or... no, it'd look weird as an iterator method... zip will just read better</td></tr>
  <tr class="msg" id="L912"><td class="ts-cell"><a class="ts" href="#L912" alt="Tue Sep 26 2023 23:40:05 GMT-0700 (Pacific Daylight Time)">06:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> sure but variadic map is probably also ergonomically motivated (just it'd be a weird name for zip itself)</blockquote></mx-reply>variadic map doesn't make as much sense in JS because map is a prototype method rather than being <code>map(fn, iter)</code></td></tr>
  <tr class="msg" id="L913"><td class="ts-cell"><a class="ts" href="#L913" alt="Tue Sep 26 2023 23:41:09 GMT-0700 (Pacific Daylight Time)">06:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">anyone know website that chrome publish their telemetry data of language features?</td></tr>
  <tr class="msg" id="L914"><td class="ts-cell"><a class="ts" href="#L914" alt="Tue Sep 26 2023 23:41:25 GMT-0700 (Pacific Daylight Time)">06:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><a href="https://chromestatus.com/metrics/feature/popularity">https://chromestatus.com/metrics/feature/popularity</a></td></tr>
  <tr class="msg" id="L915"><td class="ts-cell"><a class="ts" href="#L915" alt="Tue Sep 26 2023 23:41:35 GMT-0700 (Pacific Daylight Time)">06:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">well, not everything has a telemetry thing</td></tr>
  <tr class="msg" id="L916"><td class="ts-cell"><a class="ts" href="#L916" alt="Tue Sep 26 2023 23:41:41 GMT-0700 (Pacific Daylight Time)">06:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> either way as long as <a href="http://prototype.zip">prototype.zip</a> exists and does the normal thing i'm fine</blockquote></mx-reply>would you also be OK with a static method?</td></tr>
  <tr class="msg" id="L917"><td class="ts-cell"><a class="ts" href="#L917" alt="Tue Sep 26 2023 23:41:50 GMT-0700 (Pacific Daylight Time)">06:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">static method seems a little more natural to me...</td></tr>
  <tr class="msg" id="L918"><td class="ts-cell"><a class="ts" href="#L918" alt="Tue Sep 26 2023 23:42:20 GMT-0700 (Pacific Daylight Time)">06:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">I think static n-iterator version, and prototype 2-iterator version, make sense together.</td></tr>
  <tr class="msg" id="L919"><td class="ts-cell"><a class="ts" href="#L919" alt="Tue Sep 26 2023 23:42:32 GMT-0700 (Pacific Daylight Time)">06:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">as long as i can do zipping without ever running into the one that has the map arg</td></tr>
  <tr class="msg" id="L920"><td class="ts-cell"><a class="ts" href="#L920" alt="Tue Sep 26 2023 23:42:35 GMT-0700 (Pacific Daylight Time)">06:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell"><a href="http://arr1.zip">arr1.zip</a>(arr2, mapper)</td></tr>
  <tr class="msg" id="L921"><td class="ts-cell"><a class="ts" href="#L921" alt="Tue Sep 26 2023 23:42:50 GMT-0700 (Pacific Daylight Time)">06:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">and <a href="http://Iterator.zip">Iterator.zip</a>([arr1, arr2, arr3], mapper)</td></tr>
  <tr class="msg" id="L922"><td class="ts-cell"><a class="ts" href="#L922" alt="Tue Sep 26 2023 23:42:52 GMT-0700 (Pacific Daylight Time)">06:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">what if you have an iterable function object</td></tr>
  <tr class="msg" id="L923"><td class="ts-cell"><a class="ts" href="#L923" alt="Tue Sep 26 2023 23:43:05 GMT-0700 (Pacific Daylight Time)">06:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">what about it</td></tr>
  <tr class="msg" id="L924"><td class="ts-cell"><a class="ts" href="#L924" alt="Tue Sep 26 2023 23:43:14 GMT-0700 (Pacific Daylight Time)">06:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">that example wasn't variadic</td></tr>
  <tr class="msg" id="L925"><td class="ts-cell"><a class="ts" href="#L925" alt="Tue Sep 26 2023 23:43:19 GMT-0700 (Pacific Daylight Time)">06:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">either of them</td></tr>
  <tr class="msg" id="L926"><td class="ts-cell"><a class="ts" href="#L926" alt="Tue Sep 26 2023 23:43:33 GMT-0700 (Pacific Daylight Time)">06:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i think having to write zip([a, b]) instead of zip(a, b) would be unfortunate</td></tr>
  <tr class="msg" id="L927"><td class="ts-cell"><a class="ts" href="#L927" alt="Tue Sep 26 2023 23:43:33 GMT-0700 (Pacific Daylight Time)">06:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">yeah I'd prefer to keep this simple</td></tr>
  <tr class="msg" id="L928"><td class="ts-cell"><a class="ts" href="#L928" alt="Tue Sep 26 2023 23:43:45 GMT-0700 (Pacific Daylight Time)">06:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">like not worth the mapper func</td></tr>
  <tr class="msg" id="L929"><td class="ts-cell"><a class="ts" href="#L929" alt="Tue Sep 26 2023 23:44:08 GMT-0700 (Pacific Daylight Time)">06:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">I am fine without the mapper, especially since we <em>do</em> want an options bag.</td></tr>
  <tr class="msg" id="L930"><td class="ts-cell"><a class="ts" href="#L930" alt="Tue Sep 26 2023 23:44:09 GMT-0700 (Pacific Daylight Time)">06:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">there are other options you'd want beyond the mapper function</td></tr>
  <tr class="msg" id="L931"><td class="ts-cell"><a class="ts" href="#L931" alt="Tue Sep 26 2023 23:44:17 GMT-0700 (Pacific Daylight Time)">06:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">like "use this value to fill out the shorter one"</td></tr>
  <tr class="msg" id="L932"><td class="ts-cell"><a class="ts" href="#L932" alt="Tue Sep 26 2023 23:44:25 GMT-0700 (Pacific Daylight Time)">06:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Bc longest <em>is</em> necessary in my experience.</td></tr>
  <tr class="msg" id="L933"><td class="ts-cell"><a class="ts" href="#L933" alt="Tue Sep 26 2023 23:44:47 GMT-0700 (Pacific Daylight Time)">06:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">though of course we could just have a bunch of different methods, instead of an options bag</td></tr>
  <tr class="msg" id="L934"><td class="ts-cell"><a class="ts" href="#L934" alt="Tue Sep 26 2023 23:44:50 GMT-0700 (Pacific Daylight Time)">06:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">isn't that what we designed array holes for?</td></tr>
  <tr class="msg" id="L935"><td class="ts-cell"><a class="ts" href="#L935" alt="Tue Sep 26 2023 23:44:50 GMT-0700 (Pacific Daylight Time)">06:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> like "use this value to fill out the shorter one"</blockquote></mx-reply>isn't that <code>zip(a, chain(b, repeat(v)))</code></td></tr>
  <tr class="msg" id="L936"><td class="ts-cell"><a class="ts" href="#L936" alt="Tue Sep 26 2023 23:44:55 GMT-0700 (Pacific Daylight Time)">06:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">you don't need an options bag for that</td></tr>
  <tr class="msg" id="L937"><td class="ts-cell"><a class="ts" href="#L937" alt="Tue Sep 26 2023 23:45:02 GMT-0700 (Pacific Daylight Time)">06:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">only if you know which one is longer up front</td></tr>
  <tr class="msg" id="L938"><td class="ts-cell"><a class="ts" href="#L938" alt="Tue Sep 26 2023 23:45:02 GMT-0700 (Pacific Daylight Time)">06:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">ugh tho</td></tr>
  <tr class="msg" id="L939"><td class="ts-cell"><a class="ts" href="#L939" alt="Tue Sep 26 2023 23:45:07 GMT-0700 (Pacific Daylight Time)">06:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">also that, yes</td></tr>
  <tr class="msg" id="L940"><td class="ts-cell"><a class="ts" href="#L940" alt="Tue Sep 26 2023 23:45:12 GMT-0700 (Pacific Daylight Time)">06:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">if you don't know which one, you can't do it with <code>zip</code></td></tr>
  <tr class="msg" id="L941"><td class="ts-cell"><a class="ts" href="#L941" alt="Tue Sep 26 2023 23:45:16 GMT-0700 (Pacific Daylight Time)">06:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">or like you can but it's really really hard</td></tr>
  <tr class="msg" id="L942"><td class="ts-cell"><a class="ts" href="#L942" alt="Tue Sep 26 2023 23:45:18 GMT-0700 (Pacific Daylight Time)">06:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">fair</td></tr>
  <tr class="msg" id="L943"><td class="ts-cell"><a class="ts" href="#L943" alt="Tue Sep 26 2023 23:45:26 GMT-0700 (Pacific Daylight Time)">06:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">things to think about i guess</td></tr>
  <tr class="msg" id="L944"><td class="ts-cell"><a class="ts" href="#L944" alt="Tue Sep 26 2023 23:45:45 GMT-0700 (Pacific Daylight Time)">06:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">previous discussion at <a href="https://matrixlogs.bakkot.com/TC39_General/2021-09-11#L3">https://matrixlogs.bakkot.com/TC39_General/2021-09-11#L3</a></td></tr>
  <tr class="msg" id="L945"><td class="ts-cell"><a class="ts" href="#L945" alt="Tue Sep 26 2023 23:46:47 GMT-0700 (Pacific Daylight Time)">06:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">zip(a, b) and zipAdvanced([a, b], options, mapper)</td></tr>
  <tr class="msg" id="L946"><td class="ts-cell"><a class="ts" href="#L946" alt="Tue Sep 26 2023 23:47:32 GMT-0700 (Pacific Daylight Time)">06:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I think just making the wrapper array is better</td></tr>
  <tr class="msg" id="L947"><td class="ts-cell"><a class="ts" href="#L947" alt="Tue Sep 26 2023 23:47:34 GMT-0700 (Pacific Daylight Time)">06:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">to match Promise.all</td></tr>
  <tr class="msg" id="L948"><td class="ts-cell"><a class="ts" href="#L948" alt="Tue Sep 26 2023 23:47:38 GMT-0700 (Pacific Daylight Time)">06:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><code>zip(a, b)</code> and <code>knit([a, b], options, mapper)</code> :-p</td></tr>
  <tr class="msg" id="L949"><td class="ts-cell"><a class="ts" href="#L949" alt="Tue Sep 26 2023 23:47:47 GMT-0700 (Pacific Daylight Time)">06:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">the wrapper array is "fine" but super annoying to have to write</td></tr>
  <tr class="msg" id="L950"><td class="ts-cell"><a class="ts" href="#L950" alt="Tue Sep 26 2023 23:47:51 GMT-0700 (Pacific Daylight Time)">06:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">velcro </td></tr>
  <tr class="msg" id="L951"><td class="ts-cell"><a class="ts" href="#L951" alt="Tue Sep 26 2023 23:47:54 GMT-0700 (Pacific Daylight Time)">06:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">what do other languages do about this options thing?</td></tr>
  <tr class="msg" id="L952"><td class="ts-cell"><a class="ts" href="#L952" alt="Tue Sep 26 2023 23:47:59 GMT-0700 (Pacific Daylight Time)">06:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">yeah i'm not gonna die on this hill but its unfortunate</td></tr>
  <tr class="msg" id="L953"><td class="ts-cell"><a class="ts" href="#L953" alt="Tue Sep 26 2023 23:48:09 GMT-0700 (Pacific Daylight Time)">06:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">python has kwargs</td></tr>
  <tr class="msg" id="L954"><td class="ts-cell"><a class="ts" href="#L954" alt="Tue Sep 26 2023 23:48:13 GMT-0700 (Pacific Daylight Time)">06:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i wish js had kwargs</td></tr>
  <tr class="msg" id="L955"><td class="ts-cell"><a class="ts" href="#L955" alt="Tue Sep 26 2023 23:48:26 GMT-0700 (Pacific Daylight Time)">06:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">littledan</span>: Python just has several variant functions, with each taking extra args as necessary.</td></tr>
  <tr class="msg" id="L956"><td class="ts-cell"><a class="ts" href="#L956" alt="Tue Sep 26 2023 23:48:32 GMT-0700 (Pacific Daylight Time)">06:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">and yeah, kwargs man</td></tr>
  <tr class="msg" id="L957"><td class="ts-cell"><a class="ts" href="#L957" alt="Tue Sep 26 2023 23:48:34 GMT-0700 (Pacific Daylight Time)">06:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">kwargs</td></tr>
  <tr class="msg" id="L958"><td class="ts-cell"><a class="ts" href="#L958" alt="Tue Sep 26 2023 23:48:46 GMT-0700 (Pacific Daylight Time)">06:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">in sujitech we ship es2022 to users</td></tr>
  <tr class="msg" id="L959"><td class="ts-cell"><a class="ts" href="#L959" alt="Tue Sep 26 2023 23:49:04 GMT-0700 (Pacific Daylight Time)">06:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">if we had a variant of js</td></tr>
  <tr class="msg" id="L960"><td class="ts-cell"><a class="ts" href="#L960" alt="Tue Sep 26 2023 23:49:06 GMT-0700 (Pacific Daylight Time)">06:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">without hoisting</td></tr>
  <tr class="msg" id="L961"><td class="ts-cell"><a class="ts" href="#L961" alt="Tue Sep 26 2023 23:49:15 GMT-0700 (Pacific Daylight Time)">06:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">would that fix this tdz stuff</td></tr>
  <tr class="msg" id="L962"><td class="ts-cell"><a class="ts" href="#L962" alt="Tue Sep 26 2023 23:49:16 GMT-0700 (Pacific Daylight Time)">06:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> kwargs</blockquote></mx-reply>we just need real named arguments in JS, that's all</td></tr>
  <tr class="msg" id="L963"><td class="ts-cell"><a class="ts" href="#L963" alt="Tue Sep 26 2023 23:49:16 GMT-0700 (Pacific Daylight Time)">06:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">we only this year stopped supporting IE9...</td></tr>
  <tr class="msg" id="L964"><td class="ts-cell"><a class="ts" href="#L964" alt="Tue Sep 26 2023 23:49:40 GMT-0700 (Pacific Daylight Time)">06:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">same!</td></tr>
  <tr class="msg" id="L965"><td class="ts-cell"><a class="ts" href="#L965" alt="Tue Sep 26 2023 23:50:40 GMT-0700 (Pacific Daylight Time)">06:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@msaboff:matrix.org">msaboff</span>&gt;</div></td><td class="msg-cell">Is @shu saying we should have stopped with ES5 üòâ</td></tr>
  <tr class="msg" id="L966"><td class="ts-cell"><a class="ts" href="#L966" alt="Tue Sep 26 2023 23:51:22 GMT-0700 (Pacific Daylight Time)">06:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">can't become unmodern if the definition of modern never changes :rollsafe:</td></tr>
  <tr class="msg" id="L967"><td class="ts-cell"><a class="ts" href="#L967" alt="Tue Sep 26 2023 23:57:37 GMT-0700 (Pacific Daylight Time)">06:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">why does the bytecode not rewrite itself into a direct lookup once it observes that the slot is initialized</td></tr>
  <tr class="msg" id="L968"><td class="ts-cell"><a class="ts" href="#L968" alt="Tue Sep 26 2023 23:57:54 GMT-0700 (Pacific Daylight Time)">06:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">For Bloomberg Terminal we ship ESnext (Stage 4) to users as much as possible, which is also capped by the min-support of each piece of the toolchain that needs to transform that code, because relatively modern Chromium gets embedded.</td></tr>
  <tr class="msg" id="L969"><td class="ts-cell"><a class="ts" href="#L969" alt="Tue Sep 26 2023 23:59:44 GMT-0700 (Pacific Daylight Time)">06:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> why does the bytecode not rewrite itself into a direct lookup once it observes that the slot is initialized</blockquote></mx-reply>Isn't that overhead part of the problem?</td></tr>
  <tr class="msg" id="L970"><td class="ts-cell"><a class="ts" href="#L970" alt="Wed Sep 27 2023 00:00:02 GMT-0700 (Pacific Daylight Time)">07:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">which overhead</td></tr>
  <tr class="msg" id="L971"><td class="ts-cell"><a class="ts" href="#L971" alt="Wed Sep 27 2023 00:00:15 GMT-0700 (Pacific Daylight Time)">07:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">You're not patching one place. You're patching every place the variable is referenced.</td></tr>
  <tr class="msg" id="L972"><td class="ts-cell"><a class="ts" href="#L972" alt="Wed Sep 27 2023 00:00:30 GMT-0700 (Pacific Daylight Time)">07:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> why does the bytecode not rewrite itself into a direct lookup once it observes that the slot is initialized</blockquote></mx-reply>you have a bunch of different versions of the function also</td></tr>
  <tr class="msg" id="L973"><td class="ts-cell"><a class="ts" href="#L973" alt="Wed Sep 27 2023 00:00:36 GMT-0700 (Pacific Daylight Time)">07:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">it's not like functions only get compiled once</td></tr>
  <tr class="msg" id="L974"><td class="ts-cell"><a class="ts" href="#L974" alt="Wed Sep 27 2023 00:00:45 GMT-0700 (Pacific Daylight Time)">07:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">And that involves GC as well</td></tr>
  <tr class="msg" id="L975"><td class="ts-cell"><a class="ts" href="#L975" alt="Wed Sep 27 2023 00:01:10 GMT-0700 (Pacific Daylight Time)">07:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">ah yeah same underlying sfi ü•≤</td></tr>
  <tr class="msg" id="L976"><td class="ts-cell"><a class="ts" href="#L976" alt="Wed Sep 27 2023 00:08:19 GMT-0700 (Pacific Daylight Time)">07:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-5">danielrosenwasser</span>: re: "we assume the runtime will catch it" - does that mean your type analysis treats <code>let</code> and <code>var</code> differently?</td></tr>
  <tr class="msg" id="L977"><td class="ts-cell"><a class="ts" href="#L977" alt="Wed Sep 27 2023 00:11:02 GMT-0700 (Pacific Daylight Time)">07:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">depending on transpilers to inform engines about eliding TDZ checks doesn't benefit developers not using transpilers.</td></tr>
  <tr class="msg" id="L978"><td class="ts-cell"><a class="ts" href="#L978" alt="Wed Sep 27 2023 00:13:30 GMT-0700 (Pacific Daylight Time)">07:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-5">danielrosenwasser</span>: re: "we assume the runtime will catch it" - does that mean your type analysis treats <code>let</code> and <code>var</code> differently?</blockquote></mx-reply><em>well</em> I certainly thought so</td></tr>
  <tr class="msg" id="L979"><td class="ts-cell"><a class="ts" href="#L979" alt="Wed Sep 27 2023 00:14:28 GMT-0700 (Pacific Daylight Time)">07:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">But no, we just take the optimistic path on that</td></tr>
  <tr class="msg" id="L980"><td class="ts-cell"><a class="ts" href="#L980" alt="Wed Sep 27 2023 00:14:49 GMT-0700 (Pacific Daylight Time)">07:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">you can observe an <code>undefined</code>-initialized <code>var</code> or <code>let</code> in downlevel emit</td></tr>
  <tr class="msg" id="L981"><td class="ts-cell"><a class="ts" href="#L981" alt="Wed Sep 27 2023 00:15:02 GMT-0700 (Pacific Daylight Time)">07:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">ok cool, that's what I thought</td></tr>
  <tr class="msg" id="L982"><td class="ts-cell"><a class="ts" href="#L982" alt="Wed Sep 27 2023 00:15:26 GMT-0700 (Pacific Daylight Time)">07:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">it would make using <code>var</code> super annoying if it were treated differently</td></tr>
  <tr class="msg" id="L983"><td class="ts-cell"><a class="ts" href="#L983" alt="Wed Sep 27 2023 00:17:47 GMT-0700 (Pacific Daylight Time)">07:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">interestingly v8 implements tdz checks as two separate bytecodes</td></tr>
  <tr class="msg" id="L984"><td class="ts-cell"><a class="ts" href="#L984" alt="Wed Sep 27 2023 00:18:06 GMT-0700 (Pacific Daylight Time)">07:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">load variable and then throw reference error if loaded value is uninitialized</td></tr>
  <tr class="msg" id="L985"><td class="ts-cell"><a class="ts" href="#L985" alt="Wed Sep 27 2023 00:18:19 GMT-0700 (Pacific Daylight Time)">07:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">the_hole</td></tr>
  <tr class="msg" id="L986"><td class="ts-cell"><a class="ts" href="#L986" alt="Wed Sep 27 2023 00:18:24 GMT-0700 (Pacific Daylight Time)">07:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">yeah that one</td></tr>
  <tr class="msg" id="L987"><td class="ts-cell"><a class="ts" href="#L987" alt="Wed Sep 27 2023 00:18:26 GMT-0700 (Pacific Daylight Time)">07:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">or whatever it's called</td></tr>
  <tr class="msg" id="L988"><td class="ts-cell"><a class="ts" href="#L988" alt="Wed Sep 27 2023 00:18:33 GMT-0700 (Pacific Daylight Time)">07:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">love to have another kind of <code>null</code></td></tr>
  <tr class="msg" id="L989"><td class="ts-cell"><a class="ts" href="#L989" alt="Wed Sep 27 2023 00:18:45 GMT-0700 (Pacific Daylight Time)">07:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i'm feeling like, if this was a single bytecode, it would be a single branch instruction instead of an entire bytecode clock cycle, which is significantly cheaper?</td></tr>
  <tr class="msg" id="L990"><td class="ts-cell"><a class="ts" href="#L990" alt="Wed Sep 27 2023 00:18:58 GMT-0700 (Pacific Daylight Time)">07:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">but idk maybe i'm missing something obvious</td></tr>
  <tr class="msg" id="L991"><td class="ts-cell"><a class="ts" href="#L991" alt="Wed Sep 27 2023 00:19:17 GMT-0700 (Pacific Daylight Time)">07:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">surely most of the cost is the branch, not the bytecode clock cycle?</td></tr>
  <tr class="msg" id="L992"><td class="ts-cell"><a class="ts" href="#L992" alt="Wed Sep 27 2023 00:19:23 GMT-0700 (Pacific Daylight Time)">07:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">branches are expensive</td></tr>
  <tr class="msg" id="L993"><td class="ts-cell"><a class="ts" href="#L993" alt="Wed Sep 27 2023 00:19:49 GMT-0700 (Pacific Daylight Time)">07:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">What Mark is suggesting (moving <code>let</code> above all of its uses), is exactly what we had in our codebase when we discovered this regression.</td></tr>
  <tr class="msg" id="L994"><td class="ts-cell"><a class="ts" href="#L994" alt="Wed Sep 27 2023 00:20:22 GMT-0700 (Pacific Daylight Time)">07:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">the branch exists either way, the bytecode dispatch is a jmp+lea+maybe smth else idr</td></tr>
  <tr class="msg" id="L995"><td class="ts-cell"><a class="ts" href="#L995" alt="Wed Sep 27 2023 00:20:47 GMT-0700 (Pacific Daylight Time)">07:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">rbuckton</span>: you should say that out loud, mark doesn't read chat</td></tr>
  <tr class="msg" id="L996"><td class="ts-cell"><a class="ts" href="#L996" alt="Wed Sep 27 2023 00:21:15 GMT-0700 (Pacific Daylight Time)">07:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Mark's point is that the engines need to optimize for that, which they don't.</td></tr>
  <tr class="msg" id="L997"><td class="ts-cell"><a class="ts" href="#L997" alt="Wed Sep 27 2023 00:21:55 GMT-0700 (Pacific Daylight Time)">07:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@bradfordcsmith:matrix.org">Bradford Smith</span>&gt;</div></td><td class="msg-cell">So, Mark is saying "lets encourage people to rewrite their JS into something that will <strong>not force</strong> engines to do TDZ checks", right?</td></tr>
  <tr class="msg" id="L998"><td class="ts-cell"><a class="ts" href="#L998" alt="Wed Sep 27 2023 00:22:23 GMT-0700 (Pacific Daylight Time)">07:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">Hold it the right way!‚Ñ¢</td></tr>
  <tr class="msg" id="L999"><td class="ts-cell"><a class="ts" href="#L999" alt="Wed Sep 27 2023 00:22:32 GMT-0700 (Pacific Daylight Time)">07:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">it really sounds like "if engines never have to encounter a <code>let</code>, then <code>let</code> won't be unperformant"</td></tr>
  <tr class="msg" id="L1000"><td class="ts-cell"><a class="ts" href="#L1000" alt="Wed Sep 27 2023 00:22:45 GMT-0700 (Pacific Daylight Time)">07:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">right, and also suggesting the engine do more/smarter checks than they currently do</td></tr>
  <tr class="msg" id="L1001"><td class="ts-cell"><a class="ts" href="#L1001" alt="Wed Sep 27 2023 00:22:54 GMT-0700 (Pacific Daylight Time)">07:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">but of course more/smarter checks are also expensive...</td></tr>
  <tr class="msg" id="L1002"><td class="ts-cell"><a class="ts" href="#L1002" alt="Wed Sep 27 2023 00:23:06 GMT-0700 (Pacific Daylight Time)">07:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">at the very least this sounds like it would take at least two passes</td></tr>
  <tr class="msg" id="L1003"><td class="ts-cell"><a class="ts" href="#L1003" alt="Wed Sep 27 2023 00:23:07 GMT-0700 (Pacific Daylight Time)">07:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@bradfordcsmith:matrix.org">Bradford Smith</span>&gt;</div></td><td class="msg-cell">I cannot imagine a developer who wants <code>const</code> being willing to rewrite it as a <code>let</code> with no assignment and a later assignment.</td></tr>
  <tr class="msg" id="L1004"><td class="ts-cell"><a class="ts" href="#L1004" alt="Wed Sep 27 2023 00:23:08 GMT-0700 (Pacific Daylight Time)">07:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I think Mark is saying "fix this one case, and depend on linters to suggest you use that case", which doesn't help for <code>const</code> since it may depend on calculations and can't be hoisted.</td></tr>
  <tr class="msg" id="L1005"><td class="ts-cell"><a class="ts" href="#L1005" alt="Wed Sep 27 2023 00:24:49 GMT-0700 (Pacific Daylight Time)">07:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Linters also generally don't do inter-procedural analysis either, so this sounds like a big ask.</td></tr>
  <tr class="msg" id="L1006"><td class="ts-cell"><a class="ts" href="#L1006" alt="Wed Sep 27 2023 00:25:11 GMT-0700 (Pacific Daylight Time)">07:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">is it difficult to figure out that a variable is <em>not</em> referenced inside a closure, and also not referenced prior to the declaration?</td></tr>
  <tr class="msg" id="L1007"><td class="ts-cell"><a class="ts" href="#L1007" alt="Wed Sep 27 2023 00:25:25 GMT-0700 (Pacific Daylight Time)">07:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@gibson042:matrix.org">Richard Gibson</span>&gt;</div></td><td class="msg-cell">more like "encourage everyone, particularly transpilers, to emit code in which <code>let</code>/<code>const</code> binding references are dominated (i.e., their TDZ is empty), and encourage implementations to statically detect such dominated bindings and eliminate any corresponding runtime penalty for them"</td></tr>
  <tr class="msg" id="L1008"><td class="ts-cell"><a class="ts" href="#L1008" alt="Wed Sep 27 2023 00:25:33 GMT-0700 (Pacific Daylight Time)">07:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> is it difficult to figure out that a variable is <em>not</em> referenced inside a closure, and also not referenced prior to the declaration?</blockquote></mx-reply>I think those are the cases that <em>are</em> optimized today.</td></tr>
  <tr class="msg" id="L1009"><td class="ts-cell"><a class="ts" href="#L1009" alt="Wed Sep 27 2023 00:25:53 GMT-0700 (Pacific Daylight Time)">07:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">At least, when they are run in a hot code path such that they get optimized.</td></tr>
  <tr class="msg" id="L1010"><td class="ts-cell"><a class="ts" href="#L1010" alt="Wed Sep 27 2023 00:26:01 GMT-0700 (Pacific Daylight Time)">07:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">what about if it's a function statement vs a declaration?</td></tr>
  <tr class="msg" id="L1011"><td class="ts-cell"><a class="ts" href="#L1011" alt="Wed Sep 27 2023 00:26:02 GMT-0700 (Pacific Daylight Time)">07:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">As Shu said, not all code gets optimized.</td></tr>
  <tr class="msg" id="L1012"><td class="ts-cell"><a class="ts" href="#L1012" alt="Wed Sep 27 2023 00:26:06 GMT-0700 (Pacific Daylight Time)">07:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I am almost certain the not-closed-over bit gets checked literally during parsing</td></tr>
  <tr class="msg" id="L1013"><td class="ts-cell"><a class="ts" href="#L1013" alt="Wed Sep 27 2023 00:26:09 GMT-0700 (Pacific Daylight Time)">07:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">like can the perf issue be avoided simply by not using function declarations? (which many linter configs discourage anyways due to it adding exposure to hoisting and use-before-define)</td></tr>
  <tr class="msg" id="L1014"><td class="ts-cell"><a class="ts" href="#L1014" alt="Wed Sep 27 2023 00:26:14 GMT-0700 (Pacific Daylight Time)">07:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">slight correction, the closed-over bindings are generally not top-level</td></tr>
  <tr class="msg" id="L1015"><td class="ts-cell"><a class="ts" href="#L1015" alt="Wed Sep 27 2023 00:26:31 GMT-0700 (Pacific Daylight Time)">07:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">they act as state intentionally captured by closures for major components</td></tr>
  <tr class="msg" id="L1016"><td class="ts-cell"><a class="ts" href="#L1016" alt="Wed Sep 27 2023 00:27:15 GMT-0700 (Pacific Daylight Time)">07:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">yeah I think this discussion is basically centered (or at least, can be centered) on code which is <em>not</em> reaching top-tier JIT</td></tr>
  <tr class="msg" id="L1017"><td class="ts-cell"><a class="ts" href="#L1017" alt="Wed Sep 27 2023 00:27:45 GMT-0700 (Pacific Daylight Time)">07:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">so like, in the example on the screen, if the function is written as an expression and not a declaration, then the resulting reorganization it would force seems like it'd avoid this perf hit?</td></tr>
  <tr class="msg" id="L1018"><td class="ts-cell"><a class="ts" href="#L1018" alt="Wed Sep 27 2023 00:27:46 GMT-0700 (Pacific Daylight Time)">07:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">in the simple cases engines skip the TDZ checks even in the lowest tier</td></tr>
  <tr class="msg" id="L1019"><td class="ts-cell"><a class="ts" href="#L1019" alt="Wed Sep 27 2023 00:27:55 GMT-0700 (Pacific Daylight Time)">07:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">because the simplest cases can be checked during parsing, in a single pass</td></tr>
  <tr class="msg" id="L1020"><td class="ts-cell"><a class="ts" href="#L1020" alt="Wed Sep 27 2023 00:28:07 GMT-0700 (Pacific Daylight Time)">07:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">right. simple cases are fine</td></tr>
  <tr class="msg" id="L1021"><td class="ts-cell"><a class="ts" href="#L1021" alt="Wed Sep 27 2023 00:28:14 GMT-0700 (Pacific Daylight Time)">07:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">if the only codebases suffering are ones that use function decls and rely on hoisting i'm much less interested in trying to address a problem</td></tr>
  <tr class="msg" id="L1022"><td class="ts-cell"><a class="ts" href="#L1022" alt="Wed Sep 27 2023 00:28:22 GMT-0700 (Pacific Daylight Time)">07:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@waldemarh:matrix.org">waldemar</span>&gt;</div></td><td class="msg-cell">The main reason we have this mess is that function definitions <em>can</em> hoist, even if most of them may not be used that way.<br>If one turns a function statement into a const binding initialized with a function expression, that is known never to hoist, and thus the implementation can trivially see that it's dominated by any prior bindings in the scope.</td></tr>
  <tr class="msg" id="L1023"><td class="ts-cell"><a class="ts" href="#L1023" alt="Wed Sep 27 2023 00:28:39 GMT-0700 (Pacific Daylight Time)">07:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">^ that suggests to me another reason to just avoid using declarations</td></tr>
  <tr class="msg" id="L1024"><td class="ts-cell"><a class="ts" href="#L1024" alt="Wed Sep 27 2023 00:28:59 GMT-0700 (Pacific Daylight Time)">07:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@waldemarh:matrix.org">waldemar</span>&gt;</div></td><td class="msg-cell">Lint rules can do that, or transpilers might be able to do that.</td></tr>
  <tr class="msg" id="L1025"><td class="ts-cell"><a class="ts" href="#L1025" alt="Wed Sep 27 2023 00:29:14 GMT-0700 (Pacific Daylight Time)">07:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">this is why i asked above if adding a no-hosting mode would help. ultimately i'd like to look at a lower level investigation of this problem space from v8, assuming they've written something up somewhere</td></tr>
  <tr class="msg" id="L1026"><td class="ts-cell"><a class="ts" href="#L1026" alt="Wed Sep 27 2023 00:30:24 GMT-0700 (Pacific Daylight Time)">07:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">no-hoisting means that <code>let x = 1; { x; let x = 2 }</code> sees 1?</td></tr>
  <tr class="msg" id="L1027"><td class="ts-cell"><a class="ts" href="#L1027" alt="Wed Sep 27 2023 00:30:32 GMT-0700 (Pacific Daylight Time)">07:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">Unfortunately a lot of people are attached to a style which relies heavily on hoisting, so I think it is unlikely we'll convince people to move away from that </td></tr>
  <tr class="msg" id="L1028"><td class="ts-cell"><a class="ts" href="#L1028" alt="Wed Sep 27 2023 00:30:41 GMT-0700 (Pacific Daylight Time)">07:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i agree, it's very unfortunate</td></tr>
  <tr class="msg" id="L1029"><td class="ts-cell"><a class="ts" href="#L1029" alt="Wed Sep 27 2023 00:30:53 GMT-0700 (Pacific Daylight Time)">07:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> no-hoisting means that <code>let x = 1; { x; let x = 2 }</code> sees 1?</blockquote></mx-reply>it's only hoisting <em>of function declarations</em> which we're talking about I believe</td></tr>
  <tr class="msg" id="L1030"><td class="ts-cell"><a class="ts" href="#L1030" alt="Wed Sep 27 2023 00:31:06 GMT-0700 (Pacific Daylight Time)">07:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> no-hoisting means that <code>let x = 1; { x; let x = 2 }</code> sees 1?</blockquote></mx-reply>no i mean a mode where you can't call functions before their declaration</td></tr>
  <tr class="msg" id="L1031"><td class="ts-cell"><a class="ts" href="#L1031" alt="Wed Sep 27 2023 00:31:14 GMT-0700 (Pacific Daylight Time)">07:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">oh no, <span class="nick-9">dminor</span>, you removed your topic from the queue? I was gonna +1 it</td></tr>
  <tr class="msg" id="L1032"><td class="ts-cell"><a class="ts" href="#L1032" alt="Wed Sep 27 2023 00:31:15 GMT-0700 (Pacific Daylight Time)">07:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">it would also let us have good decorators</td></tr>
  <tr class="msg" id="L1033"><td class="ts-cell"><a class="ts" href="#L1033" alt="Wed Sep 27 2023 00:31:22 GMT-0700 (Pacific Daylight Time)">07:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Oh ok I got confused by the previous discussion about manually hoisting let</td></tr>
  <tr class="msg" id="L1034"><td class="ts-cell"><a class="ts" href="#L1034" alt="Wed Sep 27 2023 00:32:23 GMT-0700 (Pacific Daylight Time)">07:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> it would also let us have good decorators</blockquote></mx-reply>using <code>const x = function(){}</code> also lets you have good decorators</td></tr>
  <tr class="msg" id="L1035"><td class="ts-cell"><a class="ts" href="#L1035" alt="Wed Sep 27 2023 00:32:27 GMT-0700 (Pacific Daylight Time)">07:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> no i mean a mode where you can't call functions before their declaration</blockquote></mx-reply>Function decorators would also require a non-hoisting mechanism, even if that mechanism is "a decorated function doesn't hoist"</td></tr>
  <tr class="msg" id="L1036"><td class="ts-cell"><a class="ts" href="#L1036" alt="Wed Sep 27 2023 00:32:53 GMT-0700 (Pacific Daylight Time)">07:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">where "good decorators" of course means <em>normal function calls</em> instead of a special syntactic form for calling functions in a different way</td></tr>
  <tr class="msg" id="L1037"><td class="ts-cell"><a class="ts" href="#L1037" alt="Wed Sep 27 2023 00:33:20 GMT-0700 (Pacific Daylight Time)">07:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> where "good decorators" of course means <em>normal function calls</em> instead of a special syntactic form for calling functions in a different way</blockquote></mx-reply><em>snek will remember this</em></td></tr>
  <tr class="msg" id="L1038"><td class="ts-cell"><a class="ts" href="#L1038" alt="Wed Sep 27 2023 00:33:23 GMT-0700 (Pacific Daylight Time)">07:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">shu</span>: this sounds like a fun investigation, one way or another</td></tr>
  <tr class="msg" id="L1039"><td class="ts-cell"><a class="ts" href="#L1039" alt="Wed Sep 27 2023 00:34:08 GMT-0700 (Pacific Daylight Time)">07:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">ryzokuken</span>:  advance queue?</td></tr>
  <tr class="msg" id="L1040"><td class="ts-cell"><a class="ts" href="#L1040" alt="Wed Sep 27 2023 00:34:15 GMT-0700 (Pacific Daylight Time)">07:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">queue is advanced for me</td></tr>
  <tr class="msg" id="L1041"><td class="ts-cell"><a class="ts" href="#L1041" alt="Wed Sep 27 2023 00:34:23 GMT-0700 (Pacific Daylight Time)">07:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">I think TCQ got stuck for me</td></tr>
  <tr class="msg" id="L1042"><td class="ts-cell"><a class="ts" href="#L1042" alt="Wed Sep 27 2023 00:34:28 GMT-0700 (Pacific Daylight Time)">07:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">oh, i see the topic changed but the queue isn't empty</td></tr>
  <tr class="msg" id="L1043"><td class="ts-cell"><a class="ts" href="#L1043" alt="Wed Sep 27 2023 00:34:30 GMT-0700 (Pacific Daylight Time)">07:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> where "good decorators" of course means <em>normal function calls</em> instead of a special syntactic form for calling functions in a different way</blockquote></mx-reply>That would conflict with the feedback I received that function decorators had to exist for parameter decorators to advance beyond stage 1, and is the reason that parameter decorators currently only covers class methods.</td></tr>
  <tr class="msg" id="L1044"><td class="ts-cell"><a class="ts" href="#L1044" alt="Wed Sep 27 2023 00:34:31 GMT-0700 (Pacific Daylight Time)">07:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">TCQ is down :-(</td></tr>
  <tr class="msg" id="L1045"><td class="ts-cell"><a class="ts" href="#L1045" alt="Wed Sep 27 2023 00:34:43 GMT-0700 (Pacific Daylight Time)">07:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> oh, i see the topic changed but the queue isn't empty</blockquote></mx-reply>that is another weird TCQ bug</td></tr>
  <tr class="msg" id="L1046"><td class="ts-cell"><a class="ts" href="#L1046" alt="Wed Sep 27 2023 00:35:12 GMT-0700 (Pacific Daylight Time)">07:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">shu</span>: is there a doc from v8 that explores tdz at a lower level? i'd be interested in seeing analysis of the bytecode and assembly and such without profiling it myself if such a thing already exists.</td></tr>
  <tr class="msg" id="L1047"><td class="ts-cell"><a class="ts" href="#L1047" alt="Wed Sep 27 2023 00:35:15 GMT-0700 (Pacific Daylight Time)">07:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@dminor:mozilla.org">dminor</span>&gt;</div></td><td class="msg-cell">I removed myself from the queue, but I'll say it here, SpiderMonkey is cautiously interested in removing TDZ and we've started investigating the impact on our engine.</td></tr>
  <tr class="msg" id="L1048"><td class="ts-cell"><a class="ts" href="#L1048" alt="Wed Sep 27 2023 00:35:33 GMT-0700 (Pacific Daylight Time)">07:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> why does the bytecode not rewrite itself into a direct lookup once it observes that the slot is initialized</blockquote></mx-reply>you're patching bytecode of a function that can be called multiple times?</td></tr>
  <tr class="msg" id="L1049"><td class="ts-cell"><a class="ts" href="#L1049" alt="Wed Sep 27 2023 00:35:38 GMT-0700 (Pacific Daylight Time)">07:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">a closure that can be allocated multiple times?</td></tr>
  <tr class="msg" id="L1050"><td class="ts-cell"><a class="ts" href="#L1050" alt="Wed Sep 27 2023 00:35:51 GMT-0700 (Pacific Daylight Time)">07:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">yeah i forgot that bytecode is shared</td></tr>
  <tr class="msg" id="L1051"><td class="ts-cell"><a class="ts" href="#L1051" alt="Wed Sep 27 2023 00:35:53 GMT-0700 (Pacific Daylight Time)">07:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> That would conflict with the feedback I received that function decorators had to exist for parameter decorators to advance beyond stage 1, and is the reason that parameter decorators currently only covers class methods.</blockquote></mx-reply>correct, I personally do not think there is a viable path for function decorators or parameter decorators to exist</td></tr>
  <tr class="msg" id="L1052"><td class="ts-cell"><a class="ts" href="#L1052" alt="Wed Sep 27 2023 00:36:20 GMT-0700 (Pacific Daylight Time)">07:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-8">shu</span>: is there a doc from v8 that explores tdz at a lower level? i'd be interested in seeing analysis of the bytecode and assembly and such without profiling it myself if such a thing already exists.</blockquote></mx-reply>alas no, lower level like at the cycle-counting level?</td></tr>
  <tr class="msg" id="L1053"><td class="ts-cell"><a class="ts" href="#L1053" alt="Wed Sep 27 2023 00:36:31 GMT-0700 (Pacific Daylight Time)">07:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">yeah</td></tr>
  <tr class="msg" id="L1054"><td class="ts-cell"><a class="ts" href="#L1054" alt="Wed Sep 27 2023 00:37:03 GMT-0700 (Pacific Daylight Time)">07:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> you're patching bytecode of a function that can be called multiple times?</blockquote></mx-reply>Uhm, if the TDZ check does not trigger the first time it will never throw</td></tr>
  <tr class="msg" id="L1055"><td class="ts-cell"><a class="ts" href="#L1055" alt="Wed Sep 27 2023 00:37:19 GMT-0700 (Pacific Daylight Time)">07:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">for any particular activation of a function</td></tr>
  <tr class="msg" id="L1056"><td class="ts-cell"><a class="ts" href="#L1056" alt="Wed Sep 27 2023 00:37:28 GMT-0700 (Pacific Daylight Time)">07:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">but not for subsequent activations, especially if it's a newly allocated closure</td></tr>
  <tr class="msg" id="L1057"><td class="ts-cell"><a class="ts" href="#L1057" alt="Wed Sep 27 2023 00:37:31 GMT-0700 (Pacific Daylight Time)">07:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">so you can't patch the bytecode</td></tr>
  <tr class="msg" id="L1058"><td class="ts-cell"><a class="ts" href="#L1058" alt="Wed Sep 27 2023 00:37:37 GMT-0700 (Pacific Daylight Time)">07:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Oh right</td></tr>
  <tr class="msg" id="L1059"><td class="ts-cell"><a class="ts" href="#L1059" alt="Wed Sep 27 2023 00:37:50 GMT-0700 (Pacific Daylight Time)">07:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">if bytecode was not shared it would work but then you'd have big memory usage</td></tr>
  <tr class="msg" id="L1060"><td class="ts-cell"><a class="ts" href="#L1060" alt="Wed Sep 27 2023 00:37:56 GMT-0700 (Pacific Daylight Time)">07:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i want to have a general gripe</td></tr>
  <tr class="msg" id="L1061"><td class="ts-cell"><a class="ts" href="#L1061" alt="Wed Sep 27 2023 00:38:09 GMT-0700 (Pacific Daylight Time)">07:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">when engines complain about something, it is not before we do a lot of work to try to make it a non-problem</td></tr>
  <tr class="msg" id="L1062"><td class="ts-cell"><a class="ts" href="#L1062" alt="Wed Sep 27 2023 00:38:18 GMT-0700 (Pacific Daylight Time)">07:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i am not a fan of being told, "have you tried being smarter"</td></tr>
  <tr class="msg" id="L1063"><td class="ts-cell"><a class="ts" href="#L1063" alt="Wed Sep 27 2023 00:38:44 GMT-0700 (Pacific Daylight Time)">07:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Yep sorry</td></tr>
  <tr class="msg" id="L1064"><td class="ts-cell"><a class="ts" href="#L1064" alt="Wed Sep 27 2023 00:38:56 GMT-0700 (Pacific Daylight Time)">07:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">it wasn't towards you per se</td></tr>
  <tr class="msg" id="L1065"><td class="ts-cell"><a class="ts" href="#L1065" alt="Wed Sep 27 2023 00:39:03 GMT-0700 (Pacific Daylight Time)">07:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">more towards mark</td></tr>
  <tr class="msg" id="L1066"><td class="ts-cell"><a class="ts" href="#L1066" alt="Wed Sep 27 2023 00:39:08 GMT-0700 (Pacific Daylight Time)">07:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> correct, I personally do not think there is a viable path for function decorators or parameter decorators to exist</blockquote></mx-reply>I'm not sure why parameter decorators are not viable, at least for class elements. They're extremely valuable, and we have plenty of evidence for that in the TypeScript ecosystem.</td></tr>
  <tr class="msg" id="L1067"><td class="ts-cell"><a class="ts" href="#L1067" alt="Wed Sep 27 2023 00:39:13 GMT-0700 (Pacific Daylight Time)">07:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">right, that tone really surprised me</td></tr>
  <tr class="msg" id="L1068"><td class="ts-cell"><a class="ts" href="#L1068" alt="Wed Sep 27 2023 00:39:25 GMT-0700 (Pacific Daylight Time)">07:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@bradfordcsmith:matrix.org">Bradford Smith</span>&gt;</div></td><td class="msg-cell">As engineers, we mostly can't help ourselves. We see a problem and immediately think "I bet I could fix that..."</td></tr>
  <tr class="msg" id="L1069"><td class="ts-cell"><a class="ts" href="#L1069" alt="Wed Sep 27 2023 00:39:34 GMT-0700 (Pacific Daylight Time)">07:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">shu</span>: you could try complaining about things before you do such work</td></tr>
  <tr class="msg" id="L1070"><td class="ts-cell"><a class="ts" href="#L1070" alt="Wed Sep 27 2023 00:39:35 GMT-0700 (Pacific Daylight Time)">07:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I removed myself from the queue, but I'll say it here, SpiderMonkey is cautiously interested in removing TDZ and we've started investigating the impact on our engine.</blockquote></mx-reply>has the analysis i wrote been improved upon?</td></tr>
  <tr class="msg" id="L1071"><td class="ts-cell"><a class="ts" href="#L1071" alt="Wed Sep 27 2023 00:39:48 GMT-0700 (Pacific Daylight Time)">07:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i bet i could fix that with the "javascript load and branch if the hole" instruction</td></tr>
  <tr class="msg" id="L1072"><td class="ts-cell"><a class="ts" href="#L1072" alt="Wed Sep 27 2023 00:39:49 GMT-0700 (Pacific Daylight Time)">07:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">In all fairness, one might add, that YOU, might not mean YOU, personally. :)</td></tr>
  <tr class="msg" id="L1073"><td class="ts-cell"><a class="ts" href="#L1073" alt="Wed Sep 27 2023 00:39:50 GMT-0700 (Pacific Daylight Time)">07:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-8">shu</span>: you could try complaining about things before you do such work</blockquote></mx-reply>but then "have you tried being smarter" would be a valid criticism!</td></tr>
  <tr class="msg" id="L1074"><td class="ts-cell"><a class="ts" href="#L1074" alt="Wed Sep 27 2023 00:40:05 GMT-0700 (Pacific Daylight Time)">07:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">exactly, I've fixed it</td></tr>
  <tr class="msg" id="L1075"><td class="ts-cell"><a class="ts" href="#L1075" alt="Wed Sep 27 2023 00:40:08 GMT-0700 (Pacific Daylight Time)">07:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I'm not sure why parameter decorators are not viable, at least for class elements. They're extremely valuable, and we have plenty of evidence for that in the TypeScript ecosystem.</blockquote></mx-reply>I do not think parameter-decorators-but-only-for-class-elements is an reasonable outcome, as I believe I said when they were presented</td></tr>
  <tr class="msg" id="L1076"><td class="ts-cell"><a class="ts" href="#L1076" alt="Wed Sep 27 2023 00:40:39 GMT-0700 (Pacific Daylight Time)">07:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">also I do not think function decorators make sense, though it is possible I could be convinced of that</td></tr>
  <tr class="msg" id="L1077"><td class="ts-cell"><a class="ts" href="#L1077" alt="Wed Sep 27 2023 00:41:01 GMT-0700 (Pacific Daylight Time)">07:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">if in addition someone believes parameter decorators cannot advance without function decorators, then there is no option which satisfies all of these constraints</td></tr>
  <tr class="msg" id="L1078"><td class="ts-cell"><a class="ts" href="#L1078" alt="Wed Sep 27 2023 00:41:01 GMT-0700 (Pacific Daylight Time)">07:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> correct, I personally do not think there is a viable path for function decorators or parameter decorators to exist</blockquote></mx-reply>aww, I really want function decorators... they aren't viable because of hoisting?</td></tr>
  <tr class="msg" id="L1079"><td class="ts-cell"><a class="ts" href="#L1079" alt="Wed Sep 27 2023 00:41:14 GMT-0700 (Pacific Daylight Time)">07:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i get so annoyed that js doesn't have decorators on functions whenever i come back to it from python</td></tr>
  <tr class="msg" id="L1080"><td class="ts-cell"><a class="ts" href="#L1080" alt="Wed Sep 27 2023 00:41:40 GMT-0700 (Pacific Daylight Time)">07:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: Couldn't we achieve some poor woman's function composition with function decorators and isn't this, what everyone wants in lie of pipeline operator?</td></tr>
  <tr class="msg" id="L1081"><td class="ts-cell"><a class="ts" href="#L1081" alt="Wed Sep 27 2023 00:42:29 GMT-0700 (Pacific Daylight Time)">07:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">We could easily have function decorators for function expressions and arrow functions, if we wanted them.</td></tr>
  <tr class="msg" id="L1082"><td class="ts-cell"><a class="ts" href="#L1082" alt="Wed Sep 27 2023 00:42:45 GMT-0700 (Pacific Daylight Time)">07:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">We've always been stuck on the hoisting behavior of function declarations.</td></tr>
  <tr class="msg" id="L1083"><td class="ts-cell"><a class="ts" href="#L1083" alt="Wed Sep 27 2023 00:42:59 GMT-0700 (Pacific Daylight Time)">07:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i don't think either of those should have decorators on them :P</td></tr>
  <tr class="msg" id="L1084"><td class="ts-cell"><a class="ts" href="#L1084" alt="Wed Sep 27 2023 00:43:55 GMT-0700 (Pacific Daylight Time)">07:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">surely any use case to decorate any kind of function applies to decorate any other kind of function.</td></tr>
  <tr class="msg" id="L1085"><td class="ts-cell"><a class="ts" href="#L1085" alt="Wed Sep 27 2023 00:44:39 GMT-0700 (Pacific Daylight Time)">07:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i don't think either of those should have decorators on them :P</blockquote></mx-reply>I'm confused by this and your previous statement, they seem to be in conflict.</td></tr>
  <tr class="msg" id="L1086"><td class="ts-cell"><a class="ts" href="#L1086" alt="Wed Sep 27 2023 00:45:08 GMT-0700 (Pacific Daylight Time)">07:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i think function declarations should have decorators. i don't think function expressions or arrow arrow functions should have decorators</td></tr>
  <tr class="msg" id="L1087"><td class="ts-cell"><a class="ts" href="#L1087" alt="Wed Sep 27 2023 00:45:08 GMT-0700 (Pacific Daylight Time)">07:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i don't think either of those should have decorators on them :P</blockquote></mx-reply>"You don't believe in 2,999 gods. And I don't believe in just one more"</td></tr>
  <tr class="msg" id="L1088"><td class="ts-cell"><a class="ts" href="#L1088" alt="Wed Sep 27 2023 00:45:25 GMT-0700 (Pacific Daylight Time)">07:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">well maybe function expressions that are not in a variable declaration are ok</td></tr>
  <tr class="msg" id="L1089"><td class="ts-cell"><a class="ts" href="#L1089" alt="Wed Sep 27 2023 00:45:50 GMT-0700 (Pacific Daylight Time)">07:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i think function declarations should have decorators. i don't think function expressions or arrow arrow functions should have decorators</blockquote></mx-reply>It may be that function expressions are the <em>only</em> way to have function decorators, unless we are willing to disable hoisting of decorated function declarations.</td></tr>
  <tr class="msg" id="L1090"><td class="ts-cell"><a class="ts" href="#L1090" alt="Wed Sep 27 2023 00:46:03 GMT-0700 (Pacific Daylight Time)">07:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">yeah i'm aware</td></tr>
  <tr class="msg" id="L1091"><td class="ts-cell"><a class="ts" href="#L1091" alt="Wed Sep 27 2023 00:46:17 GMT-0700 (Pacific Daylight Time)">07:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">didn't we just lightly establish that function declarations are bad because hoisting (altho a non-hosting function declaration sounds great!)</td></tr>
  <tr class="msg" id="L1092"><td class="ts-cell"><a class="ts" href="#L1092" alt="Wed Sep 27 2023 00:46:29 GMT-0700 (Pacific Daylight Time)">07:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>I would be fine with having this mean the function doesn't hoist:</p>
<pre><code class="language-js">@dec
function f() {}
</code></pre>
</td></tr>
  <tr class="msg" id="L1093"><td class="ts-cell"><a class="ts" href="#L1093" alt="Wed Sep 27 2023 00:46:33 GMT-0700 (Pacific Daylight Time)">07:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">in this particular lens, but i actually don't think they're bad</td></tr>
  <tr class="msg" id="L1094"><td class="ts-cell"><a class="ts" href="#L1094" alt="Wed Sep 27 2023 00:46:46 GMT-0700 (Pacific Daylight Time)">07:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">i think implicit function declaration hoisting behavior is actually much better than TDZ</td></tr>
  <tr class="msg" id="L1095"><td class="ts-cell"><a class="ts" href="#L1095" alt="Wed Sep 27 2023 00:46:51 GMT-0700 (Pacific Daylight Time)">07:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">implicit letrec without special syntax is great</td></tr>
  <tr class="msg" id="L1096"><td class="ts-cell"><a class="ts" href="#L1096" alt="Wed Sep 27 2023 00:46:52 GMT-0700 (Pacific Daylight Time)">07:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i am also very ok with decorators making functions not hoisted</td></tr>
  <tr class="msg" id="L1097"><td class="ts-cell"><a class="ts" href="#L1097" alt="Wed Sep 27 2023 00:47:03 GMT-0700 (Pacific Daylight Time)">07:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">can i just do <code>@ function f() {}</code> to have a non-hoisting function declaration without any decorator? i'm all on board with that</td></tr>
  <tr class="msg" id="L1098"><td class="ts-cell"><a class="ts" href="#L1098" alt="Wed Sep 27 2023 00:47:07 GMT-0700 (Pacific Daylight Time)">07:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">most of my code is actually written with a rule that prevents using hoisting anyway</td></tr>
  <tr class="msg" id="L1099"><td class="ts-cell"><a class="ts" href="#L1099" alt="Wed Sep 27 2023 00:47:44 GMT-0700 (Pacific Daylight Time)">07:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>At one point I was considering something like this:</p>
<pre><code>let function f() {}
const function g() {}
</code></pre>
</td></tr>
  <tr class="msg" id="L1100"><td class="ts-cell"><a class="ts" href="#L1100" alt="Wed Sep 27 2023 00:47:54 GMT-0700 (Pacific Daylight Time)">07:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><code>fn</code></td></tr>
  <tr class="msg" id="L1101"><td class="ts-cell"><a class="ts" href="#L1101" alt="Wed Sep 27 2023 00:47:54 GMT-0700 (Pacific Daylight Time)">07:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i smell more tdz</td></tr>
  <tr class="msg" id="L1102"><td class="ts-cell"><a class="ts" href="#L1102" alt="Wed Sep 27 2023 00:47:57 GMT-0700 (Pacific Daylight Time)">07:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><code>def</code></td></tr>
  <tr class="msg" id="L1103"><td class="ts-cell"><a class="ts" href="#L1103" alt="Wed Sep 27 2023 00:47:59 GMT-0700 (Pacific Daylight Time)">07:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Please no.</td></tr>
  <tr class="msg" id="L1104"><td class="ts-cell"><a class="ts" href="#L1104" alt="Wed Sep 27 2023 00:48:20 GMT-0700 (Pacific Daylight Time)">07:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">PROCEDURE</td></tr>
  <tr class="msg" id="L1105"><td class="ts-cell"><a class="ts" href="#L1105" alt="Wed Sep 27 2023 00:48:31 GMT-0700 (Pacific Daylight Time)">07:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Yes, <code>function</code> is long, but <code>fn</code>, <code>impl</code>, <code>def</code> are not friendly to the reader.</td></tr>
  <tr class="msg" id="L1106"><td class="ts-cell"><a class="ts" href="#L1106" alt="Wed Sep 27 2023 00:48:48 GMT-0700 (Pacific Daylight Time)">07:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i do wish everything was just <code>function</code>. i always mix them up when switching languages</td></tr>
  <tr class="msg" id="L1107"><td class="ts-cell"><a class="ts" href="#L1107" alt="Wed Sep 27 2023 00:49:11 GMT-0700 (Pacific Daylight Time)">07:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><code>good function f() {}</code></td></tr>
  <tr class="msg" id="L1108"><td class="ts-cell"><a class="ts" href="#L1108" alt="Wed Sep 27 2023 00:49:25 GMT-0700 (Pacific Daylight Time)">07:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell"><code>'use good';</code></td></tr>
  <tr class="msg" id="L1109"><td class="ts-cell"><a class="ts" href="#L1109" alt="Wed Sep 27 2023 00:49:51 GMT-0700 (Pacific Daylight Time)">07:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">But, <code>let function f() {}</code> seemed like a good alternative to <code>let f = function () {}</code> when it came to decorators.</td></tr>
  <tr class="msg" id="L1110"><td class="ts-cell"><a class="ts" href="#L1110" alt="Wed Sep 27 2023 00:50:15 GMT-0700 (Pacific Daylight Time)">07:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><code>l'function f() {}</code></td></tr>
  <tr class="msg" id="L1111"><td class="ts-cell"><a class="ts" href="#L1111" alt="Wed Sep 27 2023 00:50:18 GMT-0700 (Pacific Daylight Time)">07:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell"><code>@let</code></td></tr>
  <tr class="msg" id="L1112"><td class="ts-cell"><a class="ts" href="#L1112" alt="Wed Sep 27 2023 00:50:25 GMT-0700 (Pacific Daylight Time)">07:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Especially since decorators expose the name of a thing, thus <code>let f = @dec function() {}</code> seems like it wouldn't get the name.</td></tr>
  <tr class="msg" id="L1113"><td class="ts-cell"><a class="ts" href="#L1113" alt="Wed Sep 27 2023 00:54:29 GMT-0700 (Pacific Daylight Time)">07:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i am also very ok with decorators making functions not hoisted</blockquote></mx-reply>yes, this is what I was hoping would happen. Of course, then we need to decide whether they get tdz...</td></tr>
  <tr class="msg" id="L1114"><td class="ts-cell"><a class="ts" href="#L1114" alt="Wed Sep 27 2023 00:54:57 GMT-0700 (Pacific Daylight Time)">07:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i'll let shu decide</td></tr>
  <tr class="msg" id="L1115"><td class="ts-cell"><a class="ts" href="#L1115" alt="Wed Sep 27 2023 00:55:46 GMT-0700 (Pacific Daylight Time)">07:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><pre><code>var function f() {}
</code></pre>
<p>hoist the name, like a 'var', but not the value :)</p>
</td></tr>
  <tr class="msg" id="L1116"><td class="ts-cell"><a class="ts" href="#L1116" alt="Wed Sep 27 2023 00:56:44 GMT-0700 (Pacific Daylight Time)">07:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">why not all three, var functions have no tdz, let functions are reassignable and have tdz, const functions aren't reassignable :-p</td></tr>
  <tr class="msg" id="L1117"><td class="ts-cell"><a class="ts" href="#L1117" alt="Wed Sep 27 2023 00:57:08 GMT-0700 (Pacific Daylight Time)">07:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> why not all three, var functions have no tdz, let functions are reassignable and have tdz, const functions aren't reassignable :-p</blockquote></mx-reply>I mean, that's what I'm suggesting, mostly unironically.</td></tr>
  <tr class="msg" id="L1118"><td class="ts-cell"><a class="ts" href="#L1118" alt="Wed Sep 27 2023 00:57:10 GMT-0700 (Pacific Daylight Time)">07:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">const functions can be used in constexprs</td></tr>
  <tr class="msg" id="L1119"><td class="ts-cell"><a class="ts" href="#L1119" alt="Wed Sep 27 2023 00:57:17 GMT-0700 (Pacific Daylight Time)">07:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Especially since decorators expose the name of a thing, thus <code>let f = @dec function() {}</code> seems like it wouldn't get the name.</blockquote></mx-reply>well, class decorators can find themselves in the same position, and get undefined</td></tr>
  <tr class="msg" id="L1120"><td class="ts-cell"><a class="ts" href="#L1120" alt="Wed Sep 27 2023 00:57:54 GMT-0700 (Pacific Daylight Time)">07:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> well, class decorators can find themselves in the same position, and get undefined</blockquote></mx-reply>And that's exactly why I would want to be able to decorate function declarations as well.</td></tr>
  <tr class="msg" id="L1121"><td class="ts-cell"><a class="ts" href="#L1121" alt="Wed Sep 27 2023 00:58:30 GMT-0700 (Pacific Daylight Time)">07:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">yes, I think we should focus on decorating function declarations, and live with the non-hoisting (and presumably starting at undefined, given Shu's presentation)</td></tr>
  <tr class="msg" id="L1122"><td class="ts-cell"><a class="ts" href="#L1122" alt="Wed Sep 27 2023 00:59:15 GMT-0700 (Pacific Daylight Time)">07:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> yes, I think we should focus on decorating function declarations, and live with the non-hoisting (and presumably starting at undefined, given Shu's presentation)</blockquote></mx-reply>I would be happy with this. The function hoisting issue held up decorators for years, and was why it was split off from the original proposal, IIRC.</td></tr>
  <tr class="msg" id="L1123"><td class="ts-cell"><a class="ts" href="#L1123" alt="Wed Sep 27 2023 01:00:31 GMT-0700 (Pacific Daylight Time)">08:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">Luca Casonato</span>: I'm not convinced by snapshotting, just dump everything you care about yourself</td></tr>
  <tr class="msg" id="L1124"><td class="ts-cell"><a class="ts" href="#L1124" alt="Wed Sep 27 2023 01:03:54 GMT-0700 (Pacific Daylight Time)">08:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">eemeli</span>: I just wanted to make sure you have understood that a solution here would look more like "give me the ISO-8601 representation of this" or "sort this according to some defined non-locale-specific Unicode operation", etc, not a "give me the stable string repr of this"</td></tr>
  <tr class="msg" id="L1125"><td class="ts-cell"><a class="ts" href="#L1125" alt="Wed Sep 27 2023 01:04:15 GMT-0700 (Pacific Daylight Time)">08:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">that's the thing I was trying to say that I couldn't put to words in the moment</td></tr>
  <tr class="msg" id="L1126"><td class="ts-cell"><a class="ts" href="#L1126" alt="Wed Sep 27 2023 01:04:29 GMT-0700 (Pacific Daylight Time)">08:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">but it was basically what <span class="nick-2">bakkot</span> had said</td></tr>
  <tr class="msg" id="L1127"><td class="ts-cell"><a class="ts" href="#L1127" alt="Wed Sep 27 2023 01:04:38 GMT-0700 (Pacific Daylight Time)">08:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-3">Luca Casonato</span>: I'm not convinced by snapshotting, just dump everything you care about yourself</blockquote></mx-reply>but if your app has localization features that are subject to change, you cannot do snapshot testing unless you make some kind of Intl stub</td></tr>
  <tr class="msg" id="L1128"><td class="ts-cell"><a class="ts" href="#L1128" alt="Wed Sep 27 2023 01:04:55 GMT-0700 (Pacific Daylight Time)">08:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">in this case you could just test with the <code>zxx</code> locale and get it working</td></tr>
  <tr class="msg" id="L1129"><td class="ts-cell"><a class="ts" href="#L1129" alt="Wed Sep 27 2023 01:05:25 GMT-0700 (Pacific Daylight Time)">08:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> but if your app has localization features that are subject to change, you cannot do snapshot testing unless you make some kind of Intl stub</blockquote></mx-reply>why can't you just read all of the properties you care about?</td></tr>
  <tr class="msg" id="L1130"><td class="ts-cell"><a class="ts" href="#L1130" alt="Wed Sep 27 2023 01:05:32 GMT-0700 (Pacific Daylight Time)">08:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">ryzokuken</span>: I think that is an unrelated problem</td></tr>
  <tr class="msg" id="L1131"><td class="ts-cell"><a class="ts" href="#L1131" alt="Wed Sep 27 2023 01:05:33 GMT-0700 (Pacific Daylight Time)">08:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">if the answer is "they are not exposed", we should fix that</td></tr>
  <tr class="msg" id="L1132"><td class="ts-cell"><a class="ts" href="#L1132" alt="Wed Sep 27 2023 01:05:56 GMT-0700 (Pacific Daylight Time)">08:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-6">eemeli</span>: I just wanted to make sure you have understood that a solution here would look more like "give me the ISO-8601 representation of this" or "sort this according to some defined non-locale-specific Unicode operation", etc, not a "give me the stable string repr of this"</blockquote></mx-reply>this is how I understood the motivation myself (not the latter case I mean)</td></tr>
  <tr class="msg" id="L1133"><td class="ts-cell"><a class="ts" href="#L1133" alt="Wed Sep 27 2023 01:06:59 GMT-0700 (Pacific Daylight Time)">08:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> why can't you just read all of the properties you care about?</blockquote></mx-reply>no I literally mean if you have a website that is rendered localized, you cannot do snapshot testing unless you have some sort of null locale to use in the testing environment</td></tr>
  <tr class="msg" id="L1134"><td class="ts-cell"><a class="ts" href="#L1134" alt="Wed Sep 27 2023 01:07:16 GMT-0700 (Pacific Daylight Time)">08:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">or work on engines without Intl support</td></tr>
  <tr class="msg" id="L1135"><td class="ts-cell"><a class="ts" href="#L1135" alt="Wed Sep 27 2023 01:07:42 GMT-0700 (Pacific Daylight Time)">08:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">say more about why?</td></tr>
  <tr class="msg" id="L1136"><td class="ts-cell"><a class="ts" href="#L1136" alt="Wed Sep 27 2023 01:07:55 GMT-0700 (Pacific Daylight Time)">08:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">why can't you stub intl.whatever to just return "AAAAA"</td></tr>
  <tr class="msg" id="L1137"><td class="ts-cell"><a class="ts" href="#L1137" alt="Wed Sep 27 2023 01:07:56 GMT-0700 (Pacific Daylight Time)">08:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">why can you not do your own serialization, of all of the properties you care about?</td></tr>
  <tr class="msg" id="L1138"><td class="ts-cell"><a class="ts" href="#L1138" alt="Wed Sep 27 2023 01:08:06 GMT-0700 (Pacific Daylight Time)">08:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> why can't you stub intl.whatever to just return "AAAAA"</blockquote></mx-reply>yeah, that's one solution I mentioned</td></tr>
  <tr class="msg" id="L1139"><td class="ts-cell"><a class="ts" href="#L1139" alt="Wed Sep 27 2023 01:08:42 GMT-0700 (Pacific Daylight Time)">08:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">oh you mean snapshotting <em>the entire website</em></td></tr>
  <tr class="msg" id="L1140"><td class="ts-cell"><a class="ts" href="#L1140" alt="Wed Sep 27 2023 01:08:48 GMT-0700 (Pacific Daylight Time)">08:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">yeah</td></tr>
  <tr class="msg" id="L1141"><td class="ts-cell"><a class="ts" href="#L1141" alt="Wed Sep 27 2023 01:08:58 GMT-0700 (Pacific Daylight Time)">08:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">yeah I am not convinced that use case is worth solving, stubbing out intl seems fine for that case</td></tr>
  <tr class="msg" id="L1142"><td class="ts-cell"><a class="ts" href="#L1142" alt="Wed Sep 27 2023 01:09:04 GMT-0700 (Pacific Daylight Time)">08:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">you also need to stub <code>Math.random</code> and so on</td></tr>
  <tr class="msg" id="L1143"><td class="ts-cell"><a class="ts" href="#L1143" alt="Wed Sep 27 2023 01:09:09 GMT-0700 (Pacific Daylight Time)">08:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><code>new Date</code></td></tr>
  <tr class="msg" id="L1144"><td class="ts-cell"><a class="ts" href="#L1144" alt="Wed Sep 27 2023 01:09:10 GMT-0700 (Pacific Daylight Time)">08:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">lots of stuff</td></tr>
  <tr class="msg" id="L1145"><td class="ts-cell"><a class="ts" href="#L1145" alt="Wed Sep 27 2023 01:09:10 GMT-0700 (Pacific Daylight Time)">08:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">right, true</td></tr>
  <tr class="msg" id="L1146"><td class="ts-cell"><a class="ts" href="#L1146" alt="Wed Sep 27 2023 01:09:19 GMT-0700 (Pacific Daylight Time)">08:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">(off to dinner, back later)</td></tr>
  <tr class="msg" id="L1147"><td class="ts-cell"><a class="ts" href="#L1147" alt="Wed Sep 27 2023 01:09:22 GMT-0700 (Pacific Daylight Time)">08:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">but there's other cases apart from that</td></tr>
  <tr class="msg" id="L1148"><td class="ts-cell"><a class="ts" href="#L1148" alt="Wed Sep 27 2023 01:09:29 GMT-0700 (Pacific Daylight Time)">08:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">I was just elaborating on the one Luca mentioned</td></tr>
  <tr class="msg" id="L1149"><td class="ts-cell"><a class="ts" href="#L1149" alt="Wed Sep 27 2023 01:09:31 GMT-0700 (Pacific Daylight Time)">08:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">like i see this the same way as if we said "we need a special deterministic url for using fetch() in snapshot tests"</td></tr>
  <tr class="msg" id="L1150"><td class="ts-cell"><a class="ts" href="#L1150" alt="Wed Sep 27 2023 01:09:40 GMT-0700 (Pacific Daylight Time)">08:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">same, talk to you all after lunch!</td></tr>
  <tr class="msg" id="L1151"><td class="ts-cell"><a class="ts" href="#L1151" alt="Wed Sep 27 2023 01:09:58 GMT-0700 (Pacific Daylight Time)">08:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> like i see this the same way as if we said "we need a special deterministic url for using fetch() in snapshot tests"</blockquote></mx-reply>what about engines without Intl support</td></tr>
  <tr class="msg" id="L1152"><td class="ts-cell"><a class="ts" href="#L1152" alt="Wed Sep 27 2023 01:10:58 GMT-0700 (Pacific Daylight Time)">08:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">not sure what you mean</td></tr>
  <tr class="msg" id="L1153"><td class="ts-cell"><a class="ts" href="#L1153" alt="Wed Sep 27 2023 01:10:59 GMT-0700 (Pacific Daylight Time)">08:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">if you design localized interfaces that use Intl, you need to guard every call or again, use an Intl stub</td></tr>
  <tr class="msg" id="L1154"><td class="ts-cell"><a class="ts" href="#L1154" alt="Wed Sep 27 2023 01:11:24 GMT-0700 (Pacific Daylight Time)">08:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">but if there were a null locale that was supported on all implementations, you would have a clean fallback</td></tr>
  <tr class="msg" id="L1155"><td class="ts-cell"><a class="ts" href="#L1155" alt="Wed Sep 27 2023 01:11:35 GMT-0700 (Pacific Daylight Time)">08:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">like how the <code>iso8601</code> calendar works in Temporal.</td></tr>
  <tr class="msg" id="L1156"><td class="ts-cell"><a class="ts" href="#L1156" alt="Wed Sep 27 2023 01:11:51 GMT-0700 (Pacific Daylight Time)">08:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i think a null locale would be an explicitly bad thing</td></tr>
  <tr class="msg" id="L1157"><td class="ts-cell"><a class="ts" href="#L1157" alt="Wed Sep 27 2023 01:12:09 GMT-0700 (Pacific Daylight Time)">08:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">Ideally you'd want to use <code>gregory</code> for many real use cases, but in the absence of any of these Intl calendars, you can always use the programmatic one</td></tr>
  <tr class="msg" id="L1158"><td class="ts-cell"><a class="ts" href="#L1158" alt="Wed Sep 27 2023 01:12:15 GMT-0700 (Pacific Daylight Time)">08:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">we used to have something similar in nodejs</td></tr>
  <tr class="msg" id="L1159"><td class="ts-cell"><a class="ts" href="#L1159" alt="Wed Sep 27 2023 01:12:23 GMT-0700 (Pacific Daylight Time)">08:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">and it caused so much pain that we now ship node with full locale data by default</td></tr>
  <tr class="msg" id="L1160"><td class="ts-cell"><a class="ts" href="#L1160" alt="Wed Sep 27 2023 01:12:48 GMT-0700 (Pacific Daylight Time)">08:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">well, except we shipped an awkward stripped down locale data</td></tr>
  <tr class="msg" id="L1161"><td class="ts-cell"><a class="ts" href="#L1161" alt="Wed Sep 27 2023 01:12:59 GMT-0700 (Pacific Daylight Time)">08:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">that was like en-US or something IIRC</td></tr>
  <tr class="msg" id="L1162"><td class="ts-cell"><a class="ts" href="#L1162" alt="Wed Sep 27 2023 01:13:26 GMT-0700 (Pacific Daylight Time)">08:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">no matter what you put in you got out en-US but it wasn't real en-US because there wasn't even cldr data for en-US bundled</td></tr>
  <tr class="msg" id="L1163"><td class="ts-cell"><a class="ts" href="#L1163" alt="Wed Sep 27 2023 01:13:40 GMT-0700 (Pacific Daylight Time)">08:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">damn</td></tr>
  <tr class="msg" id="L1164"><td class="ts-cell"><a class="ts" href="#L1164" alt="Wed Sep 27 2023 01:13:46 GMT-0700 (Pacific Daylight Time)">08:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">but that's not what is being proposed here</td></tr>
  <tr class="msg" id="L1165"><td class="ts-cell"><a class="ts" href="#L1165" alt="Wed Sep 27 2023 01:14:03 GMT-0700 (Pacific Daylight Time)">08:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">although I guess motivations could be similar </td></tr>
  <tr class="msg" id="L1166"><td class="ts-cell"><a class="ts" href="#L1166" alt="Wed Sep 27 2023 01:14:59 GMT-0700 (Pacific Daylight Time)">08:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i think my intuition is still that this is not a good thing and i'd rather code polyfilled intl in some way that makes sense to them </td></tr>
  <tr class="msg" id="L1167"><td class="ts-cell"><a class="ts" href="#L1167" alt="Wed Sep 27 2023 01:15:02 GMT-0700 (Pacific Daylight Time)">08:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">anyway, I don't want to cause any damage and will let Eemeli explain the merits of the proposal, I was hoping to add a supportive voice but I'm not involved yet</td></tr>
  <tr class="msg" id="L1168"><td class="ts-cell"><a class="ts" href="#L1168" alt="Wed Sep 27 2023 01:43:00 GMT-0700 (Pacific Daylight Time)">08:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-3">Luca Casonato</span>: I'm not convinced by snapshotting, just dump everything you care about yourself</blockquote></mx-reply>If it‚Äôs a simple, stable, easy to read, string base representation of the value, I‚Äôd prefer to use that over a structured representation for debugging &amp; snapshot testing</td></tr>
  <tr class="msg" id="L1169"><td class="ts-cell"><a class="ts" href="#L1169" alt="Wed Sep 27 2023 01:43:54 GMT-0700 (Pacific Daylight Time)">08:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> you also need to stub <code>Math.random</code> and so on</blockquote></mx-reply>Not unless your runtime provides a way for you to run tests deterministically at a fixed fake time (which many test runners do)</td></tr>
  <tr class="msg" id="L1170"><td class="ts-cell"><a class="ts" href="#L1170" alt="Wed Sep 27 2023 01:45:35 GMT-0700 (Pacific Daylight Time)">08:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> like i see this the same way as if we said "we need a special deterministic url for using fetch() in snapshot tests"</blockquote></mx-reply>Why, url already has a simple and stable human readable serialization of the contained properties? Dates for example, may not</td></tr>
  <tr class="msg" id="L1171"><td class="ts-cell"><a class="ts" href="#L1171" alt="Wed Sep 27 2023 07:03:20 GMT-0700 (Pacific Daylight Time)">14:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jesse:igalia.com">Jesse (TC39)</span>&gt;</div></td><td class="msg-cell">92 unread messages in a thread (or threads?) I cannot identify. Thanks, Matrix.</td></tr>
  <tr class="msg" id="L1172"><td class="ts-cell"><a class="ts" href="#L1172" alt="Wed Sep 27 2023 07:41:26 GMT-0700 (Pacific Daylight Time)">14:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@eemeli:mozilla.org">eemeli</span>&gt;</div></td><td class="msg-cell">I think one necessary next step for Stable Formatting is to enumerate the cases where Intl APIs are currently being used badly or dangerously because they're providing the most ergonomic solutions to developer problems.</td></tr>
  <tr class="msg" id="L1173"><td class="ts-cell"><a class="ts" href="#L1173" alt="Wed Sep 27 2023 13:13:08 GMT-0700 (Pacific Daylight Time)">20:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@kriskowal:matrix.org">Kris Kowal</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> i am not a fan of being told, "have you tried being smarter"</blockquote></mx-reply>I have no context on the particulars here, but I can say that around the Agoric virtual water cooler, we have tremendous respect for your intelligence. I have no doubt we could be kinder.</td></tr>
  <tr class="msg" id="L1174"><td class="ts-cell"><a class="ts" href="#L1174" alt="Wed Sep 27 2023 13:29:19 GMT-0700 (Pacific Daylight Time)">20:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">are you a fan of being told "have you tried being kinder" ?  <code>/s</code></td></tr>
  <tr class="msg" id="L1175"><td class="ts-cell"><a class="ts" href="#L1175" alt="Wed Sep 27 2023 13:30:24 GMT-0700 (Pacific Daylight Time)">20:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@kriskowal:matrix.org">Kris Kowal</span>&gt;</div></td><td class="msg-cell">It‚Äôs always welcome feedback, regardless.</td></tr>
  <tr class="msg" id="L1176"><td class="ts-cell"><a class="ts" href="#L1176" alt="Wed Sep 27 2023 15:52:43 GMT-0700 (Pacific Daylight Time)">22:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I have no context on the particulars here, but I can say that around the Agoric virtual water cooler, we have tremendous respect for your intelligence. I have no doubt we could be kinder.</blockquote></mx-reply><p>thanks.</p>
<p>the context is i would appreciate the assumption that we have done our due diligence on performance problems, which involves judgments in a tradeoff space. disagreements on the judgment call that was made <em>can</em> be productive, but i would like the intellectual humility to appreciate our tradeoff space rather than making an opposite call in plenary like "i don't think you're trying hard enough"</p>
</td></tr>
  <tr class="msg" id="L1177"><td class="ts-cell"><a class="ts" href="#L1177" alt="Wed Sep 27 2023 16:38:25 GMT-0700 (Pacific Daylight Time)">23:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">shu</span>: I just went through the transcript, I wasn't online anymore then, but putting aside the debate over due diligence and tradeoff judgements, I actually do not understand in which scenario a <code>let</code> declaration (without initialization) that occurs as the first statement of a scope can ever execute after any other code declared in that scope.</td></tr>
  <tr class="msg" id="L1178"><td class="ts-cell"><a class="ts" href="#L1178" alt="Wed Sep 27 2023 16:57:05 GMT-0700 (Pacific Daylight Time)">23:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">littledan</span>: re disposable AbortController, <a href="https://github.com/whatwg/html/issues/8557#issuecomment-1724193449">https://github.com/whatwg/html/issues/8557#issuecomment-1724193449</a></td></tr>

</tbody></table></div></div></div>
</body></html>