<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>TC39 Delegates on 2025-11-19</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "TC39 Delegates";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">TC39 Delegates<br>2025-11-19<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2025-11-18" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search TC39 Delegates">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Nov 18 2025 17:00:06 GMT-0800 (Pacific Standard Time)">01:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">And we begin day 2!</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Nov 18 2025 17:11:05 GMT-0800 (Pacific Standard Time)">01:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">I think array iterators not closing when you call <code data-md="`">return</code> was a mistake</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Nov 18 2025 17:12:12 GMT-0800 (Pacific Standard Time)">01:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i think <code>return</code> was a mistake</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue Nov 18 2025 17:13:05 GMT-0800 (Pacific Standard Time)">01:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">the generator protocol maybe, but return is fine</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Tue Nov 18 2025 17:16:30 GMT-0800 (Pacific Standard Time)">01:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">separately, i'm not actually sure when you'd want to close the database connection - in most apps i've worked in, the database stays open and the connection is shared/pooled, and times out eventually</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Tue Nov 18 2025 17:33:20 GMT-0800 (Pacific Standard Time)">01:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@dminor:mozilla.org">dminor</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">Michael Ficarra</span>: Sorry, accidentally deleted your topic while clearing the +1s</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Tue Nov 18 2025 17:33:30 GMT-0800 (Pacific Standard Time)">01:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">these 1 or 2 or 2.7 presentations are a pretty amusing modern TC39 phenomenon</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Tue Nov 18 2025 17:35:03 GMT-0800 (Pacific Standard Time)">01:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">that and conditional consensus </td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Tue Nov 18 2025 17:35:17 GMT-0800 (Pacific Standard Time)">01:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">its nice we have ways to speed things up though</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Tue Nov 18 2025 17:35:28 GMT-0800 (Pacific Standard Time)">01:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">conditional consensus is good efficiency</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Tue Nov 18 2025 17:37:05 GMT-0800 (Pacific Standard Time)">01:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">@bakkot</span> Can you link your async iterator slides when youâ€™re done</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Tue Nov 18 2025 17:38:28 GMT-0800 (Pacific Standard Time)">01:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@mgaudet:mozilla.org">mgaudet|travelling</span>&gt;</div></td><td class="msg-cell">Dumb question: Where is  CreateAsyncIteratorFromClosure defined? (re: async interator helpers-- it links to the main spec where I can't find it) </td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Tue Nov 18 2025 17:39:56 GMT-0800 (Pacific Standard Time)">01:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">@mgaudet|travelling</span> <a href="https://github.com/tc39/ecma262/pull/3628">https://github.com/tc39/ecma262/pull/3628</a></td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Tue Nov 18 2025 17:40:47 GMT-0800 (Pacific Standard Time)">01:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@mgaudet:mozilla.org">mgaudet|travelling</span>&gt;</div></td><td class="msg-cell">thanks :) </td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Tue Nov 18 2025 17:44:15 GMT-0800 (Pacific Standard Time)">01:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@waldemarh:matrix.org">waldemar</span>&gt;</div></td><td class="msg-cell">What happens if you get an infinite loop inside a spec function? Is there any defined behavior?</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Tue Nov 18 2025 17:45:38 GMT-0800 (Pacific Standard Time)">01:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@gibson042:matrix.org">Richard Gibson</span>&gt;</div></td><td class="msg-cell">I guess the algorithm would just never terminate until the host process does</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Tue Nov 18 2025 17:46:22 GMT-0800 (Pacific Standard Time)">01:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i don't think any spec function current or proposed lets you get into a true infinite loop, they all predicate on user code</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Tue Nov 18 2025 17:51:30 GMT-0800 (Pacific Standard Time)">01:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">sorry the async iterators item was so incoherent, I'd meant to do prep this weekend but I was/am down with some sort of horrible virus and am not able to think clearly enough for reasoning about concurrency code</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Tue Nov 18 2025 17:51:53 GMT-0800 (Pacific Standard Time)">01:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">No special casing for infinite loops; the spec technically just says you have to keep doing it forever</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Tue Nov 18 2025 17:52:03 GMT-0800 (Pacific Standard Time)">01:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">this is part of its general refusal to admit any resource constraints</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Tue Nov 18 2025 17:52:07 GMT-0800 (Pacific Standard Time)">01:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@gibson042:matrix.org">Richard Gibson</span>&gt;</div></td><td class="msg-cell">maybe, but not if we introduce a built-in infinite iterator</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Tue Nov 18 2025 18:03:19 GMT-0800 (Pacific Standard Time)">02:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">forgive me for my naiivety (or for the lack of knowing the proper spelling), but composites are tought to be immutable, aren't they?</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Tue Nov 18 2025 18:03:48 GMT-0800 (Pacific Standard Time)">02:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Yes</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Tue Nov 18 2025 18:03:50 GMT-0800 (Pacific Standard Time)">02:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Shallowly</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Tue Nov 18 2025 18:04:09 GMT-0800 (Pacific Standard Time)">02:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">Shallowly?</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Tue Nov 18 2025 18:04:22 GMT-0800 (Pacific Standard Time)">02:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">They can contain mutable stuff</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Tue Nov 18 2025 18:04:25 GMT-0800 (Pacific Standard Time)">02:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">is implementation concern the only factor for interned vs unique? or are there other constraints?</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Tue Nov 18 2025 18:04:27 GMT-0800 (Pacific Standard Time)">02:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell"><code>c1.wallet.amount</code> is not immutable?</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Tue Nov 18 2025 18:04:33 GMT-0800 (Pacific Standard Time)">02:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">correct</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Tue Nov 18 2025 18:04:51 GMT-0800 (Pacific Standard Time)">02:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">You can make wallet a composite too</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Tue Nov 18 2025 18:05:27 GMT-0800 (Pacific Standard Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">can but shouldn't, wallets have identity</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Tue Nov 18 2025 18:05:36 GMT-0800 (Pacific Standard Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">my wallet is not your wallet just because we both have no money</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Tue Nov 18 2025 18:05:59 GMT-0800 (Pacific Standard Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">@keith_miller</span> Is spec convienence causing real slowdowns for TAs?</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Tue Nov 18 2025 18:07:02 GMT-0800 (Pacific Standard Time)">02:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell"><p>so ```<br>let c1 = Composite({wallet: amount: 20});<br>
let c2 = Composite({wallet: amount: 20});<br>c1 === c2; // true<br>c1.wallet.amount+=20;<br>c1 === c2 // ??</p>
<pre><code></code></pre>
</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Tue Nov 18 2025 18:07:25 GMT-0800 (Pacific Standard Time)">02:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i would hope that composites are never mutable</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Tue Nov 18 2025 18:07:28 GMT-0800 (Pacific Standard Time)">02:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">in either case</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Tue Nov 18 2025 18:07:33 GMT-0800 (Pacific Standard Time)">02:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">No, those two wallets are different objects, so the composites are different</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Tue Nov 18 2025 18:07:36 GMT-0800 (Pacific Standard Time)">02:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">You need nested composites, right?</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Tue Nov 18 2025 18:07:59 GMT-0800 (Pacific Standard Time)">02:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><p>But these would be the same:</p>
<pre><code>let wallet = { amount: 20 };
let c1 = Composite({ wallet });
let c2 = Composite({ wallet });
</code></pre>
</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Tue Nov 18 2025 18:08:09 GMT-0800 (Pacific Standard Time)">02:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">The alternative is <code data-md="`">wallet = { amount: 20 }; c1 = Composite({ </code>â€¦ Nicolo beat me to it.</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Tue Nov 18 2025 18:12:11 GMT-0800 (Pacific Standard Time)">02:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Yeah, 100%</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Tue Nov 18 2025 18:12:22 GMT-0800 (Pacific Standard Time)">02:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">Mathieu Hofman</span>: We also have current <em>custom Iterability</em> with <code>Symbol.iterator</code>.</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Tue Nov 18 2025 18:12:22 GMT-0800 (Pacific Standard Time)">02:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">please do not look at the current spec, it means nothing</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Tue Nov 18 2025 18:12:24 GMT-0800 (Pacific Standard Time)">02:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I should remove it</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Tue Nov 18 2025 18:12:38 GMT-0800 (Pacific Standard Time)">02:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">@Olivier FlÃ¼ckiger</span> Does V8 have this same problem?</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Tue Nov 18 2025 18:12:38 GMT-0800 (Pacific Standard Time)">02:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">In particular because you have to do n shape checks for each of the different views</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Tue Nov 18 2025 18:12:59 GMT-0800 (Pacific Standard Time)">02:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Should we be splitting the methods onto the sepcific TA subtype classes?</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Tue Nov 18 2025 18:13:01 GMT-0800 (Pacific Standard Time)">02:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">That is ok-ish. The place it shows up in syntax (array spread) was a mistake</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Tue Nov 18 2025 18:13:44 GMT-0800 (Pacific Standard Time)">02:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Sometimes it will get inlined enough that we can prove only one shape shows up but there's many examples I've seen where that doesn't happen</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Tue Nov 18 2025 18:14:34 GMT-0800 (Pacific Standard Time)">02:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">my memory of v8 is that it generally does a switch over different object kinds. i guess that could be compiled to a bunch of if/else branches but hopefully it does better than that</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Tue Nov 18 2025 18:15:12 GMT-0800 (Pacific Standard Time)">02:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">which is certainly still some overhead, but its not a function of the number of things you're switching over</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Tue Nov 18 2025 18:15:37 GMT-0800 (Pacific Standard Time)">02:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">Mathieu Hofman</span>: <code>Array.prototype[Symbol.iterator] = function* () { yield 2; yield 3; }</code></td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Tue Nov 18 2025 18:15:45 GMT-0800 (Pacific Standard Time)">02:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">The problem is that you also need to make the index access polymorphic</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Tue Nov 18 2025 18:15:58 GMT-0800 (Pacific Standard Time)">02:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">So it's not just a check you're in bounds and load</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Tue Nov 18 2025 18:16:13 GMT-0800 (Pacific Standard Time)">02:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">It's a switch over the element size then pick the right load for the active size</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Tue Nov 18 2025 18:16:24 GMT-0800 (Pacific Standard Time)">02:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">yeah it remains polymorphic until it can be found to be exactly 1 kind</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Tue Nov 18 2025 18:16:49 GMT-0800 (Pacific Standard Time)">02:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Right but that wouldn't be a problem if each of the views had their own copy of the various methods</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Tue Nov 18 2025 18:17:35 GMT-0800 (Pacific Standard Time)">02:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">Mathieu Hofman</span>: What I am trying to say, and I am leaning towards some, what I think Ron said, custom equality is not a bad thing per sÃ¨. We already have so many things in the language, that are powerful.</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Tue Nov 18 2025 18:17:38 GMT-0800 (Pacific Standard Time)">02:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Letâ€™s fix that. Doing something for convenience in the spec is much less important that actual impl difficulties.</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Tue Nov 18 2025 18:18:01 GMT-0800 (Pacific Standard Time)">02:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">its definitely web reality at this point</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Tue Nov 18 2025 18:18:02 GMT-0800 (Pacific Standard Time)">02:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">There's some compatibility risk although I don't know how high it is in practice</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Tue Nov 18 2025 18:18:32 GMT-0800 (Pacific Standard Time)">02:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i've seen code in the wild using <a href="http://TypedArray.prototype.foo.call">TypedArray.prototype.foo.call</a></td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Tue Nov 18 2025 18:18:53 GMT-0800 (Pacific Standard Time)">02:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">actually i guess that doesn't actually preclude adding more methods on the subclasses</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Tue Nov 18 2025 18:19:04 GMT-0800 (Pacific Standard Time)">02:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Maybe you could just shadow the current one</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Tue Nov 18 2025 18:19:19 GMT-0800 (Pacific Standard Time)">02:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">It would be weird but I doubt anyone would really know</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Tue Nov 18 2025 18:20:03 GMT-0800 (Pacific Standard Time)">02:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">we did a similar change moving around where some error properties were located in webkit and chrome and no one noticed</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Tue Nov 18 2025 18:20:16 GMT-0800 (Pacific Standard Time)">02:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">That's just prototype pollution. Which is a much more general problem. But yeah you could have an array instance with an shadowed Symbol.iterator that does something weird, and I don't like that array spread would be affected by that.</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Tue Nov 18 2025 18:21:29 GMT-0800 (Pacific Standard Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I think it is not weird to get custom behavior when spreading an object which happens to be IsArray but which has a custom <code>Symbol.iterator</code></td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Tue Nov 18 2025 18:21:58 GMT-0800 (Pacific Standard Time)">02:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">as to the Array prototype Symbol.iterator pollution problem, I have a proposal for fixing that!</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Tue Nov 18 2025 18:22:19 GMT-0800 (Pacific Standard Time)">02:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">ah actually it was the opposite direction <a href="https://github.com/WebKit/WebKit/commit/96efcf1f1c011efd5946d053272581e0a3d6c3b2">https://github.com/WebKit/WebKit/commit/96efcf1f1c011efd5946d053272581e0a3d6c3b2</a> (my only webkit commit ðŸ˜„)</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Tue Nov 18 2025 18:35:35 GMT-0800 (Pacific Standard Time)">02:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@olivf.o1o.ch:immer.chat">Olivier FlÃ¼ckiger</span>&gt;</div></td><td class="msg-cell">What exactly is the spec convenience we are talking about? That they all share a common proto?</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Tue Nov 18 2025 18:35:42 GMT-0800 (Pacific Standard Time)">02:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">Looks like, <em>native equality</em> comes quite at some cost, of those <em>interned objects</em> not being so <em>native</em> anymore...</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Tue Nov 18 2025 18:39:03 GMT-0800 (Pacific Standard Time)">02:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Yah, and the methods are defined on the common proto</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Tue Nov 18 2025 18:40:00 GMT-0800 (Pacific Standard Time)">02:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Though apparently index access is also slower than it should be</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Tue Nov 18 2025 18:43:44 GMT-0800 (Pacific Standard Time)">02:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">Would this be a first for the language? Is there any object, that is specially handled somewhere, somehow, besides being an object, I mean apart from <code>null</code>?</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Tue Nov 18 2025 18:43:47 GMT-0800 (Pacific Standard Time)">02:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@olivf.o1o.ch:immer.chat">Olivier FlÃ¼ckiger</span>&gt;</div></td><td class="msg-cell">It's probably not our main worry for TA... But in principle all for not doing convenience in the spec if it makes implementation harder.</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Tue Nov 18 2025 18:46:24 GMT-0800 (Pacific Standard Time)">02:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">also worth mentioning that a lot of TA baggage comes from khronos, not necessarily people making convenient spec decisions :P</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Tue Nov 18 2025 18:48:41 GMT-0800 (Pacific Standard Time)">02:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><code>document.all</code></td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Tue Nov 18 2025 18:49:06 GMT-0800 (Pacific Standard Time)">02:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">khronos?</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Tue Nov 18 2025 18:49:46 GMT-0800 (Pacific Standard Time)">02:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><blockquote>
<p>"Khronos typed arrays" refers to the JavaScript Typed Arrays specification, which was originally developed under the Khronos Group for use in its graphics APIs like WebGL</p>
</blockquote>
<p>(google ai summary)</p>
</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Tue Nov 18 2025 18:50:20 GMT-0800 (Pacific Standard Time)">02:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">yes they were developed for webgl and later merged into ecma262</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Tue Nov 18 2025 18:50:45 GMT-0800 (Pacific Standard Time)">02:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">that's the origin of all the detachedness f-ery</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Tue Nov 18 2025 18:51:08 GMT-0800 (Pacific Standard Time)">02:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">ljharb</span>: In what context? This is a DOM API.</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Tue Nov 18 2025 18:52:14 GMT-0800 (Pacific Standard Time)">02:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><a href="https://tc39.es/ecma262/multipage/additional-ecmascript-features-for-web-browsers.html#sec-IsHTMLDDA-internal-slot">https://tc39.es/ecma262/multipage/additional-ecmascript-features-for-web-browsers.html#sec-IsHTMLDDA-internal-slot</a></td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Tue Nov 18 2025 18:52:28 GMT-0800 (Pacific Standard Time)">02:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">â€œIs HTML Document Dot All"</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Tue Nov 18 2025 18:52:47 GMT-0800 (Pacific Standard Time)">02:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">In the case ljharb describes, where developers know about weirdness or already have something wrong, throwing seems better?</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Tue Nov 18 2025 18:53:07 GMT-0800 (Pacific Standard Time)">02:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">throw as early as possible</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Tue Nov 18 2025 18:53:08 GMT-0800 (Pacific Standard Time)">02:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">Like I cannot imagine wanting to leak here, on purpose</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Tue Nov 18 2025 18:53:25 GMT-0800 (Pacific Standard Time)">02:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">If someone doesn't know about this they should learn by the language telling them</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Tue Nov 18 2025 18:53:51 GMT-0800 (Pacific Standard Time)">02:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">Not by mysterious leaks</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Tue Nov 18 2025 18:53:54 GMT-0800 (Pacific Standard Time)">02:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i mean an alternative would just be, require composites to have at least 1 object</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Tue Nov 18 2025 18:54:03 GMT-0800 (Pacific Standard Time)">02:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">That is also terrible </td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Tue Nov 18 2025 18:54:07 GMT-0800 (Pacific Standard Time)">02:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">why?</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Tue Nov 18 2025 18:54:17 GMT-0800 (Pacific Standard Time)">02:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">because it breaks them</td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Tue Nov 18 2025 18:54:29 GMT-0800 (Pacific Standard Time)">02:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">no existing code uses composites, how does that break anything</td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Tue Nov 18 2025 18:54:30 GMT-0800 (Pacific Standard Time)">02:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">Because you want to be able to use them for, like, pairs of numbers</td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Tue Nov 18 2025 18:54:33 GMT-0800 (Pacific Standard Time)">02:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">if you want a composite of primitive types you then need to keep around some special identity object to put in them</td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Tue Nov 18 2025 18:54:39 GMT-0800 (Pacific Standard Time)">02:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">Coordinates in a map, eg </td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Tue Nov 18 2025 18:54:58 GMT-0800 (Pacific Standard Time)">02:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">make one symbol and stick it in every composite</td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Tue Nov 18 2025 18:55:31 GMT-0800 (Pacific Standard Time)">02:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">That is so bad</td></tr>
  <tr class="msg" id="L100"><td class="ts-cell"><a class="ts" href="#L100" alt="Tue Nov 18 2025 18:55:44 GMT-0800 (Pacific Standard Time)">02:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">I find <span class="nick-10">waldemar</span> argument convincing. If we have <em>prior art</em> of handling something specifically (although I think the <code>document.all</code> to be very <em>exotic</em> (hihi)), then I'd rather prefer a <em>fail-fast</em> approach, then having to accept memory leaks.</td></tr>
  <tr class="msg" id="L101"><td class="ts-cell"><a class="ts" href="#L101" alt="Tue Nov 18 2025 18:55:53 GMT-0800 (Pacific Standard Time)">02:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">imo it's far less bad than making some objects not be weakable</td></tr>
  <tr class="msg" id="L102"><td class="ts-cell"><a class="ts" href="#L102" alt="Tue Nov 18 2025 18:56:01 GMT-0800 (Pacific Standard Time)">02:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">The benefit of keeping the consistency for weak maps is so, so far from being worth the cost of having to do that</td></tr>
  <tr class="msg" id="L103"><td class="ts-cell"><a class="ts" href="#L103" alt="Tue Nov 18 2025 18:56:32 GMT-0800 (Pacific Standard Time)">02:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">document.all is like, one of the most horrifying things in the web platform, to be certain; that's why [[IsHTMLDDA]] is a sort of resentment-coded name</td></tr>
  <tr class="msg" id="L104"><td class="ts-cell"><a class="ts" href="#L104" alt="Tue Nov 18 2025 18:56:34 GMT-0800 (Pacific Standard Time)">02:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">As you already pointed out, weak maps are super niche!</td></tr>
  <tr class="msg" id="L105"><td class="ts-cell"><a class="ts" href="#L105" alt="Tue Nov 18 2025 18:56:34 GMT-0800 (Pacific Standard Time)">02:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">to me this all seems to lead back to "they need to be primitives or they shouldn't exist in the language"</td></tr>
  <tr class="msg" id="L106"><td class="ts-cell"><a class="ts" href="#L106" alt="Tue Nov 18 2025 18:57:20 GMT-0800 (Pacific Standard Time)">02:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">we shouldn't commit minor crimes just because the thing we want to add shouldn't be an object but is forced to be one</td></tr>
  <tr class="msg" id="L107"><td class="ts-cell"><a class="ts" href="#L107" alt="Tue Nov 18 2025 18:57:57 GMT-0800 (Pacific Standard Time)">02:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">Ok that is a position you could have, but at that point this question does not matter</td></tr>
  <tr class="msg" id="L108"><td class="ts-cell"><a class="ts" href="#L108" alt="Tue Nov 18 2025 18:58:03 GMT-0800 (Pacific Standard Time)">02:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i don't find weakmaps to be the fundamental primitive by which i decide what a value is. rather weakmap is a somewhat strange api /because/ it exposes the reality of values.</td></tr>
  <tr class="msg" id="L109"><td class="ts-cell"><a class="ts" href="#L109" alt="Tue Nov 18 2025 18:58:12 GMT-0800 (Pacific Standard Time)">02:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">We are talking about what happens assuming that isn't the world we're in</td></tr>
  <tr class="msg" id="L110"><td class="ts-cell"><a class="ts" href="#L110" alt="Tue Nov 18 2025 18:58:42 GMT-0800 (Pacific Standard Time)">02:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">I have a feeling, that the discussion is very academic. What would be a real-world library using WeakSets that would be easily affected by this?</td></tr>
  <tr class="msg" id="L111"><td class="ts-cell"><a class="ts" href="#L111" alt="Tue Nov 18 2025 18:59:13 GMT-0800 (Pacific Standard Time)">02:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">also what would be a real-world application where this would be the biggest memory leak in the app</td></tr>
  <tr class="msg" id="L112"><td class="ts-cell"><a class="ts" href="#L112" alt="Tue Nov 18 2025 18:59:14 GMT-0800 (Pacific Standard Time)">02:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">kinda feel sorry for Yusuke's queue item getting shoved to the bottom</td></tr>
  <tr class="msg" id="L113"><td class="ts-cell"><a class="ts" href="#L113" alt="Tue Nov 18 2025 18:59:18 GMT-0800 (Pacific Standard Time)">02:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">fwiw most use of weak apis do not deal with arbitrary values, they are almost always contained within a single layer of a codebase</td></tr>
  <tr class="msg" id="L114"><td class="ts-cell"><a class="ts" href="#L114" alt="Tue Nov 18 2025 18:59:43 GMT-0800 (Pacific Standard Time)">02:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@legendecas:matrix.org">Chengzhong Wu</span>&gt;</div></td><td class="msg-cell">why is Yusuke's topic kept pushing down the queue? feel like new topics are added before Yusuke's</td></tr>
  <tr class="msg" id="L115"><td class="ts-cell"><a class="ts" href="#L115" alt="Tue Nov 18 2025 19:00:53 GMT-0800 (Pacific Standard Time)">03:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">Next time we talk about this I vote implementations get priority </td></tr>
  <tr class="msg" id="L116"><td class="ts-cell"><a class="ts" href="#L116" alt="Tue Nov 18 2025 19:01:22 GMT-0800 (Pacific Standard Time)">03:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@olivf.o1o.ch:immer.chat">Olivier FlÃ¼ckiger</span>&gt;</div></td><td class="msg-cell">We should really not add objects that cannot be collected. Websites running out of memory is really a terrible issue to debug for all parties involved.</td></tr>
  <tr class="msg" id="L117"><td class="ts-cell"><a class="ts" href="#L117" alt="Tue Nov 18 2025 19:01:29 GMT-0800 (Pacific Standard Time)">03:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I care a lot more about what is implementable than about our design opinions unconstrained by implementation reality</td></tr>
  <tr class="msg" id="L118"><td class="ts-cell"><a class="ts" href="#L118" alt="Tue Nov 18 2025 19:07:40 GMT-0800 (Pacific Standard Time)">03:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">it is easy to imagine, for example, something which is serializing values to be passed to and from a worker, and uses a WeakMap to cache the serialization, with the serializations happening very frequently (it's a common pattern when splitting some computations to be done off the main thread, for example), and then it starts passing Composites some of the time, and now it is leaking a lot</td></tr>
  <tr class="msg" id="L119"><td class="ts-cell"><a class="ts" href="#L119" alt="Tue Nov 18 2025 19:08:11 GMT-0800 (Pacific Standard Time)">03:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">that is an unusually <em>easy</em> example of a leak to track down, and is also very much a thing which would happen with totally normal use of WeakMaps</td></tr>
  <tr class="msg" id="L120"><td class="ts-cell"><a class="ts" href="#L120" alt="Tue Nov 18 2025 19:08:29 GMT-0800 (Pacific Standard Time)">03:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">throwing is much, much better here, so that the developer learns that actually WeakMaps do not work for Composites.</td></tr>
  <tr class="msg" id="L121"><td class="ts-cell"><a class="ts" href="#L121" alt="Tue Nov 18 2025 19:41:36 GMT-0800 (Pacific Standard Time)">03:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@akirose:matrix.org">Aki</span>&gt;</div></td><td class="msg-cell">Congratulations to <span class="nick-6">eemeli</span> and <span class="nick-4">Ashley Claymore</span> for being the only speakers yesterdayâ€”including myselfâ€”who made sure the appropriate info was recorded in the notes.</td></tr>
  <tr class="msg" id="L122"><td class="ts-cell"><a class="ts" href="#L122" alt="Tue Nov 18 2025 19:43:52 GMT-0800 (Pacific Standard Time)">03:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@akirose:matrix.org">Aki</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>, <span class="nick-3">ryzokuken</span> , <span class="nick-13">ptomato</span> , <span class="nick-13">Mikhail Barash</span> , FYT, <span class="nick-9">nicolo-ribaudo</span> , <span class="nick-11">Richard Gibson</span> , <span class="nick-9">dminor</span> , <span class="nick-14">Michael Ficarra</span> , <span class="nick-6">ljharb</span> , and <span class="nick-3">James M Snell</span> : here's what's missing <a href="https://kdrive.infomaniak.com/app/share/1777368/c4d6dca3-6847-4674-bf1d-87d2d0370871">https://kdrive.infomaniak.com/app/share/1777368/c4d6dca3-6847-4674-bf1d-87d2d0370871</a></td></tr>
  <tr class="msg" id="L123"><td class="ts-cell"><a class="ts" href="#L123" alt="Tue Nov 18 2025 19:45:58 GMT-0800 (Pacific Standard Time)">03:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">fwiw speakers generally aren't the ones who add the link to the slides, I don't typically check for that after having done my presentation</td></tr>
  <tr class="msg" id="L124"><td class="ts-cell"><a class="ts" href="#L124" alt="Tue Nov 18 2025 19:46:04 GMT-0800 (Pacific Standard Time)">03:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">(usually note takers do)</td></tr>
  <tr class="msg" id="L125"><td class="ts-cell"><a class="ts" href="#L125" alt="Tue Nov 18 2025 19:46:19 GMT-0800 (Pacific Standard Time)">03:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@akirose:matrix.org">Aki</span>&gt;</div></td><td class="msg-cell">Yeah the notes are in <em>really</em> rough shape this meeting.</td></tr>
  <tr class="msg" id="L126"><td class="ts-cell"><a class="ts" href="#L126" alt="Tue Nov 18 2025 19:46:36 GMT-0800 (Pacific Standard Time)">03:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">anyway added slides link to editor update item</td></tr>
  <tr class="msg" id="L127"><td class="ts-cell"><a class="ts" href="#L127" alt="Tue Nov 18 2025 19:47:40 GMT-0800 (Pacific Standard Time)">03:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@legendecas:matrix.org">Chengzhong Wu</span>&gt;</div></td><td class="msg-cell">sometimes an agenda item was added without a link to slides. In this case, note takers are not able to add the link for the speakers in the notes. Please add the link after done the presentation</td></tr>
  <tr class="msg" id="L128"><td class="ts-cell"><a class="ts" href="#L128" alt="Tue Nov 18 2025 19:54:06 GMT-0800 (Pacific Standard Time)">03:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">what on earth is kdrive, i was so confused when i wasn't logged in to google sheets and then i realized it wasn't sheets</td></tr>
  <tr class="msg" id="L129"><td class="ts-cell"><a class="ts" href="#L129" alt="Tue Nov 18 2025 20:04:45 GMT-0800 (Pacific Standard Time)">04:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">it jumps to labels: <a href="https://github.com/v8/v8/blob/638e32793f854790284bf613eca204550e1c8e56/src/builtins/builtins-collections-gen.cc#L211-L215">https://github.com/v8/v8/blob/638e32793f854790284bf613eca204550e1c8e56/src/builtins/builtins-collections-gen.cc#L211-L215</a></td></tr>
  <tr class="msg" id="L130"><td class="ts-cell"><a class="ts" href="#L130" alt="Tue Nov 18 2025 20:06:19 GMT-0800 (Pacific Standard Time)">04:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">that's just a single branch though. i was referring to these more: <a href="https://github.com/v8/v8/blob/638e32793f854790284bf613eca204550e1c8e56/src/builtins/builtins-typed-array-gen.cc#L546-L601">https://github.com/v8/v8/blob/638e32793f854790284bf613eca204550e1c8e56/src/builtins/builtins-typed-array-gen.cc#L546-L601</a></td></tr>
  <tr class="msg" id="L131"><td class="ts-cell"><a class="ts" href="#L131" alt="Tue Nov 18 2025 20:06:39 GMT-0800 (Pacific Standard Time)">04:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">One motivation for them to be objects is to allow them to contain mutable objects. That is not acceptable as primitives</td></tr>
  <tr class="msg" id="L132"><td class="ts-cell"><a class="ts" href="#L132" alt="Tue Nov 18 2025 20:07:52 GMT-0800 (Pacific Standard Time)">04:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">that leaks in a worse and more subtle way. Which is why I don't want the answer to be: every composite must contain something non-forgable</td></tr>
  <tr class="msg" id="L133"><td class="ts-cell"><a class="ts" href="#L133" alt="Tue Nov 18 2025 20:08:27 GMT-0800 (Pacific Standard Time)">04:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">Membrane style libraries that keep an association from any object to another object they created. We also have a classification library where we'll check the shape of a deeply frozen object and remember the classification.</td></tr>
  <tr class="msg" id="L134"><td class="ts-cell"><a class="ts" href="#L134" alt="Tue Nov 18 2025 20:09:53 GMT-0800 (Pacific Standard Time)">04:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">I requested during my presentation that we keep the conversation to the slides, and not extend the conversation to a wider conversation. I would rather do that in a separate meeting that specifically talks about that - with prepared slides to reference.</td></tr>
  <tr class="msg" id="L135"><td class="ts-cell"><a class="ts" href="#L135" alt="Tue Nov 18 2025 20:12:08 GMT-0800 (Pacific Standard Time)">04:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">it should still be called Semaphore ðŸ’¢</td></tr>
  <tr class="msg" id="L136"><td class="ts-cell"><a class="ts" href="#L136" alt="Tue Nov 18 2025 20:13:05 GMT-0800 (Pacific Standard Time)">04:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">it seems like Governor would be a confusingly disconnected name if it's located right on globalThis but not sure whether that's the intent</td></tr>
  <tr class="msg" id="L137"><td class="ts-cell"><a class="ts" href="#L137" alt="Tue Nov 18 2025 20:14:10 GMT-0800 (Pacific Standard Time)">04:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I think <code>Semaphore</code> is the right name, but only if its API is usable both for async coordination and thread coordination (with shared structs), which is certainly feasible.</td></tr>
  <tr class="msg" id="L138"><td class="ts-cell"><a class="ts" href="#L138" alt="Tue Nov 18 2025 20:20:58 GMT-0800 (Pacific Standard Time)">04:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I <em>think</em> the only thing necessary to make it work for thread coordination is for it to be structured-cloneable?</td></tr>
  <tr class="msg" id="L139"><td class="ts-cell"><a class="ts" href="#L139" alt="Tue Nov 18 2025 20:21:11 GMT-0800 (Pacific Standard Time)">04:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">with the internal state not being shared not cloned, obviously</td></tr>
  <tr class="msg" id="L140"><td class="ts-cell"><a class="ts" href="#L140" alt="Tue Nov 18 2025 20:21:24 GMT-0800 (Pacific Standard Time)">04:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I guess the spec would require some atomics stuff, probably</td></tr>
  <tr class="msg" id="L141"><td class="ts-cell"><a class="ts" href="#L141" alt="Tue Nov 18 2025 20:21:43 GMT-0800 (Pacific Standard Time)">04:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">No, it wouldn't be structured clonable, it would be shared (just like Mutex, Condition)</td></tr>
  <tr class="msg" id="L142"><td class="ts-cell"><a class="ts" href="#L142" alt="Tue Nov 18 2025 20:21:58 GMT-0800 (Pacific Standard Time)">04:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Structured cloneable isn't shareable</td></tr>
  <tr class="msg" id="L143"><td class="ts-cell"><a class="ts" href="#L143" alt="Tue Nov 18 2025 20:24:24 GMT-0800 (Pacific Standard Time)">04:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Ideally it would be the same kind of object as we want Mutex to be (shared with a per-realm prototype). </td></tr>
  <tr class="msg" id="L144"><td class="ts-cell"><a class="ts" href="#L144" alt="Tue Nov 18 2025 20:24:42 GMT-0800 (Pacific Standard Time)">04:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">structured cloneable includes shared values </td></tr>
  <tr class="msg" id="L145"><td class="ts-cell"><a class="ts" href="#L145" alt="Tue Nov 18 2025 20:25:21 GMT-0800 (Pacific Standard Time)">04:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Structured clone requires postmessage. Shareable only requires assignment</td></tr>
  <tr class="msg" id="L146"><td class="ts-cell"><a class="ts" href="#L146" alt="Tue Nov 18 2025 20:25:59 GMT-0800 (Pacific Standard Time)">04:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">You can't assign a structured clonable object to a property on a shared struct, only primitive and shareable values</td></tr>
  <tr class="msg" id="L147"><td class="ts-cell"><a class="ts" href="#L147" alt="Tue Nov 18 2025 20:26:29 GMT-0800 (Pacific Standard Time)">04:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">oh you are referring to a new category of value based on shared struct ok</td></tr>
  <tr class="msg" id="L148"><td class="ts-cell"><a class="ts" href="#L148" alt="Tue Nov 18 2025 20:26:33 GMT-0800 (Pacific Standard Time)">04:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Yes.</td></tr>
  <tr class="msg" id="L149"><td class="ts-cell"><a class="ts" href="#L149" alt="Tue Nov 18 2025 20:27:03 GMT-0800 (Pacific Standard Time)">04:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">sorry, I meant prior to shared structs existing</td></tr>
  <tr class="msg" id="L150"><td class="ts-cell"><a class="ts" href="#L150" alt="Tue Nov 18 2025 20:27:04 GMT-0800 (Pacific Standard Time)">04:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">You could make it structure clonable, and when we have shared struct redefine is as a shared object, the distinction is not observable without shared structs anyway</td></tr>
  <tr class="msg" id="L151"><td class="ts-cell"><a class="ts" href="#L151" alt="Tue Nov 18 2025 20:27:08 GMT-0800 (Pacific Standard Time)">04:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Mutex and Condition both fall under this category and are essentially shared structs.</td></tr>
  <tr class="msg" id="L152"><td class="ts-cell"><a class="ts" href="#L152" alt="Tue Nov 18 2025 20:27:12 GMT-0800 (Pacific Standard Time)">04:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">we need inter-thread coordination even without shared structs</td></tr>
  <tr class="msg" id="L153"><td class="ts-cell"><a class="ts" href="#L153" alt="Tue Nov 18 2025 20:27:24 GMT-0800 (Pacific Standard Time)">04:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">and this proposal will probably go forward before that one</td></tr>
  <tr class="msg" id="L154"><td class="ts-cell"><a class="ts" href="#L154" alt="Tue Nov 18 2025 20:27:32 GMT-0800 (Pacific Standard Time)">04:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">oh, I see "resource governor" is a SQL thing, so that must be the origin of this terminology?</td></tr>
  <tr class="msg" id="L155"><td class="ts-cell"><a class="ts" href="#L155" alt="Tue Nov 18 2025 20:28:08 GMT-0800 (Pacific Standard Time)">04:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">IMO we shouldn't make it structured clonable, we should make it frozen and specially handled in postMessage.</td></tr>
  <tr class="msg" id="L156"><td class="ts-cell"><a class="ts" href="#L156" alt="Tue Nov 18 2025 20:28:10 GMT-0800 (Pacific Standard Time)">04:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">fwiw structured cloneable is a superset of basically everything, except host resources that explicitly can't support it</td></tr>
  <tr class="msg" id="L157"><td class="ts-cell"><a class="ts" href="#L157" alt="Tue Nov 18 2025 20:28:16 GMT-0800 (Pacific Standard Time)">04:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">That would allow us to hedge </td></tr>
  <tr class="msg" id="L158"><td class="ts-cell"><a class="ts" href="#L158" alt="Tue Nov 18 2025 20:28:58 GMT-0800 (Pacific Standard Time)">04:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">The difference is that something structured clonable will create a <em>new</em> instance in another worker thread. A shared thing is the <em>same</em> instance in another thread.</td></tr>
  <tr class="msg" id="L159"><td class="ts-cell"><a class="ts" href="#L159" alt="Tue Nov 18 2025 20:29:53 GMT-0800 (Pacific Standard Time)">04:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/v8/v8/blob/638e32793f854790284bf613eca204550e1c8e56/src/builtins/builtins-collections-gen.cc#L1887-L1898">https://github.com/v8/v8/blob/638e32793f854790284bf613eca204550e1c8e56/src/builtins/builtins-collections-gen.cc#L1887-L1898</a> has more branches - haven't looked at exactly what this compiles to - if it's a jump table</td></tr>
  <tr class="msg" id="L160"><td class="ts-cell"><a class="ts" href="#L160" alt="Tue Nov 18 2025 20:29:54 GMT-0800 (Pacific Standard Time)">04:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">is SharedArrayBuffer a sharable value?</td></tr>
  <tr class="msg" id="L161"><td class="ts-cell"><a class="ts" href="#L161" alt="Tue Nov 18 2025 20:30:14 GMT-0800 (Pacific Standard Time)">04:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">No</td></tr>
  <tr class="msg" id="L162"><td class="ts-cell"><a class="ts" href="#L162" alt="Tue Nov 18 2025 20:30:23 GMT-0800 (Pacific Standard Time)">04:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Unfortunately</td></tr>
  <tr class="msg" id="L163"><td class="ts-cell"><a class="ts" href="#L163" alt="Tue Nov 18 2025 20:30:27 GMT-0800 (Pacific Standard Time)">04:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella (ðŸ•‘ JST, at TC39)</span>&gt;</div></td><td class="msg-cell">SharedArrayBuffer is cloned, i.e. posting it back and forth doesn't preserve equality, but it points to a shared internal thing</td></tr>
  <tr class="msg" id="L164"><td class="ts-cell"><a class="ts" href="#L164" alt="Tue Nov 18 2025 20:30:47 GMT-0800 (Pacific Standard Time)">04:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">well then we can make up whatever rules we want in the structured clone algo for "shared" values</td></tr>
  <tr class="msg" id="L165"><td class="ts-cell"><a class="ts" href="#L165" alt="Tue Nov 18 2025 20:31:01 GMT-0800 (Pacific Standard Time)">04:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">but yeah i see your point</td></tr>
  <tr class="msg" id="L166"><td class="ts-cell"><a class="ts" href="#L166" alt="Tue Nov 18 2025 20:32:33 GMT-0800 (Pacific Standard Time)">04:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Also, Shared Structs is already at Stage 2. Its delays have been mostly been as a result of both champions having major job changes in the past few months.</td></tr>
  <tr class="msg" id="L167"><td class="ts-cell"><a class="ts" href="#L167" alt="Tue Nov 18 2025 20:33:02 GMT-0800 (Pacific Standard Time)">04:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">Again I maintain that having an object being sharable over postMessage doesn't prevent it from also becoming directly a shared object</td></tr>
  <tr class="msg" id="L168"><td class="ts-cell"><a class="ts" href="#L168" alt="Tue Nov 18 2025 20:33:46 GMT-0800 (Pacific Standard Time)">04:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I'm hoping to dedicate more time to getting it to Stage 2.7 in the coming year, though ideally I would like someone from V8 to take on @syg's co-champion role as he's indicated he is unable to participate regularly going forward.</td></tr>
  <tr class="msg" id="L169"><td class="ts-cell"><a class="ts" href="#L169" alt="Tue Nov 18 2025 20:33:49 GMT-0800 (Pacific Standard Time)">04:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">(except maybe for all the exotic SAB stuff)</td></tr>
  <tr class="msg" id="L170"><td class="ts-cell"><a class="ts" href="#L170" alt="Tue Nov 18 2025 20:34:33 GMT-0800 (Pacific Standard Time)">04:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">rbuckton</span>: you might want to chat with <span class="nick-5">Olivier FlÃ¼ckiger</span></td></tr>
  <tr class="msg" id="L171"><td class="ts-cell"><a class="ts" href="#L171" alt="Tue Nov 18 2025 20:35:54 GMT-0800 (Pacific Standard Time)">04:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Minor point: The audio coming from the room is very quiet compared to those joining remotely, so I either can barely hear the room or my speakers are blown out by remote attendees depending on who I adjust the audio for. </td></tr>
  <tr class="msg" id="L172"><td class="ts-cell"><a class="ts" href="#L172" alt="Tue Nov 18 2025 20:36:40 GMT-0800 (Pacific Standard Time)">04:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">... huh, audio's fine for me</td></tr>
  <tr class="msg" id="L173"><td class="ts-cell"><a class="ts" href="#L173" alt="Tue Nov 18 2025 20:37:03 GMT-0800 (Pacific Standard Time)">04:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">The issue with structured clone is that a value going from thread A to thread B and back to thread A will not produce the same instance.</td></tr>
  <tr class="msg" id="L174"><td class="ts-cell"><a class="ts" href="#L174" alt="Tue Nov 18 2025 20:37:20 GMT-0800 (Pacific Standard Time)">04:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">Seems fine?</td></tr>
  <tr class="msg" id="L175"><td class="ts-cell"><a class="ts" href="#L175" alt="Tue Nov 18 2025 20:37:29 GMT-0800 (Pacific Standard Time)">04:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I don't actually see a reason why that would matter for this.</td></tr>
  <tr class="msg" id="L176"><td class="ts-cell"><a class="ts" href="#L176" alt="Tue Nov 18 2025 20:37:33 GMT-0800 (Pacific Standard Time)">04:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">That isn't what happens for shared structs.</td></tr>
  <tr class="msg" id="L177"><td class="ts-cell"><a class="ts" href="#L177" alt="Tue Nov 18 2025 20:37:37 GMT-0800 (Pacific Standard Time)">04:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">... OK?</td></tr>
  <tr class="msg" id="L178"><td class="ts-cell"><a class="ts" href="#L178" alt="Tue Nov 18 2025 20:37:47 GMT-0800 (Pacific Standard Time)">04:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">So if you change it from being cloneable to shareable, that's an observable change</td></tr>
  <tr class="msg" id="L179"><td class="ts-cell"><a class="ts" href="#L179" alt="Tue Nov 18 2025 20:37:50 GMT-0800 (Pacific Standard Time)">04:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i don't particularly care what structured clone does as long as i get some sort of native shared state out of it, like SAB</td></tr>
  <tr class="msg" id="L180"><td class="ts-cell"><a class="ts" href="#L180" alt="Tue Nov 18 2025 20:38:02 GMT-0800 (Pacific Standard Time)">04:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">New topic:  how is the quality of the original transcription for the notes today?  We had quality drop-off at 16:15 yesterday.</td></tr>
  <tr class="msg" id="L181"><td class="ts-cell"><a class="ts" href="#L181" alt="Tue Nov 18 2025 20:38:14 GMT-0800 (Pacific Standard Time)">04:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">how ?</td></tr>
  <tr class="msg" id="L182"><td class="ts-cell"><a class="ts" href="#L182" alt="Tue Nov 18 2025 20:38:44 GMT-0800 (Pacific Standard Time)">04:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">doing fine so far</td></tr>
  <tr class="msg" id="L183"><td class="ts-cell"><a class="ts" href="#L183" alt="Tue Nov 18 2025 20:39:45 GMT-0800 (Pacific Standard Time)">04:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Correct me if I'm wrong, but you can't currently rely on reference equality for something like SAB bouncing between two threads, can you?</td></tr>
  <tr class="msg" id="L184"><td class="ts-cell"><a class="ts" href="#L184" alt="Tue Nov 18 2025 20:39:52 GMT-0800 (Pacific Standard Time)">04:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">you can not</td></tr>
  <tr class="msg" id="L185"><td class="ts-cell"><a class="ts" href="#L185" alt="Tue Nov 18 2025 20:40:05 GMT-0800 (Pacific Standard Time)">04:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">and i don't care about it maintaining reference equality</td></tr>
  <tr class="msg" id="L186"><td class="ts-cell"><a class="ts" href="#L186" alt="Tue Nov 18 2025 20:40:08 GMT-0800 (Pacific Standard Time)">04:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">You can rely on reference equality for this case with Shared Structs</td></tr>
  <tr class="msg" id="L187"><td class="ts-cell"><a class="ts" href="#L187" alt="Tue Nov 18 2025 20:40:21 GMT-0800 (Pacific Standard Time)">04:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i care about it for shared structs, sure</td></tr>
  <tr class="msg" id="L188"><td class="ts-cell"><a class="ts" href="#L188" alt="Tue Nov 18 2025 20:40:48 GMT-0800 (Pacific Standard Time)">04:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I care about something like <code>Semaphore</code> behaving like a shared struct, so maintaining reference  equality.</td></tr>
  <tr class="msg" id="L189"><td class="ts-cell"><a class="ts" href="#L189" alt="Tue Nov 18 2025 20:41:23 GMT-0800 (Pacific Standard Time)">04:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">If it starts out behaving like SAB, we have to be ok with changing that behavior later.</td></tr>
  <tr class="msg" id="L190"><td class="ts-cell"><a class="ts" href="#L190" alt="Tue Nov 18 2025 20:41:46 GMT-0800 (Pacific Standard Time)">04:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">yeah i have no strong opinion over whether it behaves like a shared struct or not</td></tr>
  <tr class="msg" id="L191"><td class="ts-cell"><a class="ts" href="#L191" alt="Tue Nov 18 2025 20:42:11 GMT-0800 (Pacific Standard Time)">04:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">either way it can be shared between threads somehow</td></tr>
  <tr class="msg" id="L192"><td class="ts-cell"><a class="ts" href="#L192" alt="Tue Nov 18 2025 20:42:15 GMT-0800 (Pacific Standard Time)">04:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">that's good enough for me</td></tr>
  <tr class="msg" id="L193"><td class="ts-cell"><a class="ts" href="#L193" alt="Tue Nov 18 2025 20:42:33 GMT-0800 (Pacific Standard Time)">04:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I think we can work out a solution that hedges towards availability of shared structs.</td></tr>
  <tr class="msg" id="L194"><td class="ts-cell"><a class="ts" href="#L194" alt="Tue Nov 18 2025 20:42:43 GMT-0800 (Pacific Standard Time)">04:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">right but if you admit there can be multiple objects identities that are backed by the same internal thing, all these objects could be shared, it's just you cannot rely on identity to differentiate them, which I don't think is a requirement?</td></tr>
  <tr class="msg" id="L195"><td class="ts-cell"><a class="ts" href="#L195" alt="Tue Nov 18 2025 20:43:23 GMT-0800 (Pacific Standard Time)">04:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I think you need to be able to rely on identity.</td></tr>
  <tr class="msg" id="L196"><td class="ts-cell"><a class="ts" href="#L196" alt="Tue Nov 18 2025 20:43:34 GMT-0800 (Pacific Standard Time)">04:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">what's the use case?</td></tr>
  <tr class="msg" id="L197"><td class="ts-cell"><a class="ts" href="#L197" alt="Tue Nov 18 2025 20:43:38 GMT-0800 (Pacific Standard Time)">04:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">We can't do SAB because it has quirks like this.</td></tr>
  <tr class="msg" id="L198"><td class="ts-cell"><a class="ts" href="#L198" alt="Tue Nov 18 2025 20:43:56 GMT-0800 (Pacific Standard Time)">04:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">sorry, who's talking? for the notes</td></tr>
  <tr class="msg" id="L199"><td class="ts-cell"><a class="ts" href="#L199" alt="Tue Nov 18 2025 20:44:05 GMT-0800 (Pacific Standard Time)">04:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">Oli</td></tr>
  <tr class="msg" id="L200"><td class="ts-cell"><a class="ts" href="#L200" alt="Tue Nov 18 2025 20:44:10 GMT-0800 (Pacific Standard Time)">04:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@jasnell:matrix.org">James M Snell</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: +1 on everything there with AbortSignal... if you want some help on getting that proposal going in WHATWG, I'm more than happy to help</td></tr>
  <tr class="msg" id="L201"><td class="ts-cell"><a class="ts" href="#L201" alt="Tue Nov 18 2025 20:44:19 GMT-0800 (Pacific Standard Time)">04:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Not having <code>Semaphore</code> behave differently than <code>Mutex</code> when writing code. It's a major quirk that you would run into regularly.</td></tr>
  <tr class="msg" id="L202"><td class="ts-cell"><a class="ts" href="#L202" alt="Tue Nov 18 2025 20:44:36 GMT-0800 (Pacific Standard Time)">04:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">note, thanks, will probably take you up on that</td></tr>
  <tr class="msg" id="L203"><td class="ts-cell"><a class="ts" href="#L203" alt="Tue Nov 18 2025 20:45:35 GMT-0800 (Pacific Standard Time)">04:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">IMO, with structs at Stage 2 we should renew the effort to get that proposal to Stage 2.7 and perhaps we won't run into a timing issue. </td></tr>
  <tr class="msg" id="L204"><td class="ts-cell"><a class="ts" href="#L204" alt="Tue Nov 18 2025 20:45:49 GMT-0800 (Pacific Standard Time)">04:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">I'm missing the context around the can of worms / current issues with the state of AbortSignal, is there anything good I can read to get up to speed?</td></tr>
  <tr class="msg" id="L205"><td class="ts-cell"><a class="ts" href="#L205" alt="Tue Nov 18 2025 20:46:14 GMT-0800 (Pacific Standard Time)">04:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Or we ship this proposal without <code>CountingGovernor</code> since it can be implemented in userland until such time as both proposals have hit stage 4.</td></tr>
  <tr class="msg" id="L206"><td class="ts-cell"><a class="ts" href="#L206" alt="Tue Nov 18 2025 20:46:53 GMT-0800 (Pacific Standard Time)">04:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">there's a bunch of things, some of it here: <a href="https://matrixlogs.bakkot.com/WHATWG/2025-09-25#L18">https://matrixlogs.bakkot.com/WHATWG/2025-09-25#L18</a></td></tr>
  <tr class="msg" id="L207"><td class="ts-cell"><a class="ts" href="#L207" alt="Tue Nov 18 2025 20:47:04 GMT-0800 (Pacific Standard Time)">04:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I can discuss some of my concerns at length after the plenary, if you'd like.</td></tr>
  <tr class="msg" id="L208"><td class="ts-cell"><a class="ts" href="#L208" alt="Tue Nov 18 2025 20:47:10 GMT-0800 (Pacific Standard Time)">04:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">just negate all of those bullets and that's how it currently works</td></tr>
  <tr class="msg" id="L209"><td class="ts-cell"><a class="ts" href="#L209" alt="Tue Nov 18 2025 20:47:17 GMT-0800 (Pacific Standard Time)">04:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">Is it just me or do people have wildly different mic volumes today?</td></tr>
  <tr class="msg" id="L210"><td class="ts-cell"><a class="ts" href="#L210" alt="Tue Nov 18 2025 20:47:26 GMT-0800 (Pacific Standard Time)">04:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">that was blastingly loud, yeah</td></tr>
  <tr class="msg" id="L211"><td class="ts-cell"><a class="ts" href="#L211" alt="Tue Nov 18 2025 20:47:33 GMT-0800 (Pacific Standard Time)">04:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">not just you</td></tr>
  <tr class="msg" id="L212"><td class="ts-cell"><a class="ts" href="#L212" alt="Tue Nov 18 2025 20:47:54 GMT-0800 (Pacific Standard Time)">04:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">rbuckton</span>: I understand how identity preservations is important for actors, but these seem like very specialized tools purely meant to implement low level synchronization, and I fail to understand the use case where identity preservation matters here. I do understand it may be beneficial to in the future share these tools over existing shared object instead of postMessage</td></tr>
  <tr class="msg" id="L213"><td class="ts-cell"><a class="ts" href="#L213" alt="Tue Nov 18 2025 20:47:55 GMT-0800 (Pacific Standard Time)">04:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">yeah, but a lot of the presenters have had extremely low mics today</td></tr>
  <tr class="msg" id="L214"><td class="ts-cell"><a class="ts" href="#L214" alt="Tue Nov 18 2025 20:47:58 GMT-0800 (Pacific Standard Time)">04:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: How is your audio OK? I can barely hear michael with my audio set to a level where Steve Hick's audio doesn't make my ears bleed.</td></tr>
  <tr class="msg" id="L215"><td class="ts-cell"><a class="ts" href="#L215" alt="Tue Nov 18 2025 20:48:14 GMT-0800 (Pacific Standard Time)">04:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">maybe my computer or browser is doing some equalization? idk</td></tr>
  <tr class="msg" id="L216"><td class="ts-cell"><a class="ts" href="#L216" alt="Tue Nov 18 2025 20:48:16 GMT-0800 (Pacific Standard Time)">04:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">can you adjust audio per-person?</td></tr>
  <tr class="msg" id="L217"><td class="ts-cell"><a class="ts" href="#L217" alt="Tue Nov 18 2025 20:48:25 GMT-0800 (Pacific Standard Time)">04:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Not that I can find</td></tr>
  <tr class="msg" id="L218"><td class="ts-cell"><a class="ts" href="#L218" alt="Tue Nov 18 2025 20:49:20 GMT-0800 (Pacific Standard Time)">04:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@jasnell:matrix.org">James M Snell</span>&gt;</div></td><td class="msg-cell">I think there's a fair number of folks potentially interested in this discussion. Maybe organizing a call would be worthwhile?</td></tr>
  <tr class="msg" id="L219"><td class="ts-cell"><a class="ts" href="#L219" alt="Tue Nov 18 2025 20:50:59 GMT-0800 (Pacific Standard Time)">04:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: I'm interested in the abort controller stuff</td></tr>
  <tr class="msg" id="L220"><td class="ts-cell"><a class="ts" href="#L220" alt="Tue Nov 18 2025 20:51:20 GMT-0800 (Pacific Standard Time)">04:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell">(I'm the original author of the abort controller spec. pls don't hate me)</td></tr>
  <tr class="msg" id="L221"><td class="ts-cell"><a class="ts" href="#L221" alt="Tue Nov 18 2025 20:51:25 GMT-0800 (Pacific Standard Time)">04:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Me too</td></tr>
  <tr class="msg" id="L222"><td class="ts-cell"><a class="ts" href="#L222" alt="Tue Nov 18 2025 20:52:19 GMT-0800 (Pacific Standard Time)">04:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I don't hate you, I just wish you'd given userland the nice behavior that the web platform gets, is all</td></tr>
  <tr class="msg" id="L223"><td class="ts-cell"><a class="ts" href="#L223" alt="Tue Nov 18 2025 20:52:32 GMT-0800 (Pacific Standard Time)">04:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">users deserve nice things too</td></tr>
  <tr class="msg" id="L224"><td class="ts-cell"><a class="ts" href="#L224" alt="Tue Nov 18 2025 20:52:36 GMT-0800 (Pacific Standard Time)">04:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">Kris Kowal</span> has opinions too</td></tr>
  <tr class="msg" id="L225"><td class="ts-cell"><a class="ts" href="#L225" alt="Tue Nov 18 2025 20:53:06 GMT-0800 (Pacific Standard Time)">04:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: is the behaviour gap documented anywhere?</td></tr>
  <tr class="msg" id="L226"><td class="ts-cell"><a class="ts" href="#L226" alt="Tue Nov 18 2025 20:53:28 GMT-0800 (Pacific Standard Time)">04:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">I just wish AbortSignal wasn't an EventTarget.</td></tr>
  <tr class="msg" id="L227"><td class="ts-cell"><a class="ts" href="#L227" alt="Tue Nov 18 2025 20:53:46 GMT-0800 (Pacific Standard Time)">04:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">But I also use it on the web all the time and thanks <span class="nick-6">Jake Archibald</span> for adding it!</td></tr>
  <tr class="msg" id="L228"><td class="ts-cell"><a class="ts" href="#L228" alt="Tue Nov 18 2025 20:53:50 GMT-0800 (Pacific Standard Time)">04:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">lots of random griping on the web, but the best place I've got to hand is <a href="https://matrixlogs.bakkot.com/WHATWG/2025-09-25#L18">https://matrixlogs.bakkot.com/WHATWG/2025-09-25#L18</a></td></tr>
  <tr class="msg" id="L229"><td class="ts-cell"><a class="ts" href="#L229" alt="Tue Nov 18 2025 20:54:17 GMT-0800 (Pacific Standard Time)">04:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><p>specifically, for abort listeners added from web machinery instead of userland, you have these things:</p>
<ul>
<li>someone manually doing a dispatchEvent on the signal won't trigger your callback</li>
<li>another listener doing stopImmediatePropagation won't prevent your callback from being triggered</li>
<li>the callback is automatically released once the signal is aborted</li>
<li>adding a callback after the signal is already aborted won't do anything (and in particular won't hold a reference to your callback)</li>
</ul>
<p>users consumers of AbortSignal don't get any of those</p>
</td></tr>
  <tr class="msg" id="L230"><td class="ts-cell"><a class="ts" href="#L230" alt="Tue Nov 18 2025 20:54:31 GMT-0800 (Pacific Standard Time)">04:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@jasnell:matrix.org">James M Snell</span>&gt;</div></td><td class="msg-cell">Grab the pitchforks everyone... we know who to chase down</td></tr>
  <tr class="msg" id="L231"><td class="ts-cell"><a class="ts" href="#L231" alt="Tue Nov 18 2025 20:54:31 GMT-0800 (Pacific Standard Time)">04:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I'll admit I've had a number of gripes (some vocal, some not so) with the <code>AbortController</code> API, but my biggest frustration was that it felt very rushed out while I was in the middle of trying to get cancellation into the core language.</td></tr>
  <tr class="msg" id="L232"><td class="ts-cell"><a class="ts" href="#L232" alt="Tue Nov 18 2025 20:55:01 GMT-0800 (Pacific Standard Time)">04:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@jasnell:matrix.org">James M Snell</span>&gt;</div></td><td class="msg-cell">I'll put together a doodle poll early next week and post it to get a call set up</td></tr>
  <tr class="msg" id="L233"><td class="ts-cell"><a class="ts" href="#L233" alt="Tue Nov 18 2025 20:55:03 GMT-0800 (Pacific Standard Time)">04:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">if we add EventTarget and DOMException to 262 this becomes a very simple problem to solve</td></tr>
  <tr class="msg" id="L234"><td class="ts-cell"><a class="ts" href="#L234" alt="Tue Nov 18 2025 20:55:09 GMT-0800 (Pacific Standard Time)">04:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">what i wish is that abortsignal hadn't been shipped before notifying TC39 that it was happening :-/</td></tr>
  <tr class="msg" id="L235"><td class="ts-cell"><a class="ts" href="#L235" alt="Tue Nov 18 2025 20:55:24 GMT-0800 (Pacific Standard Time)">04:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><a href="https://en.wikipedia.org/wiki/Governor_(device)">https://en.wikipedia.org/wiki/Governor_(device)</a></td></tr>
  <tr class="msg" id="L236"><td class="ts-cell"><a class="ts" href="#L236" alt="Tue Nov 18 2025 20:55:39 GMT-0800 (Pacific Standard Time)">04:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">whoa</td></tr>
  <tr class="msg" id="L237"><td class="ts-cell"><a class="ts" href="#L237" alt="Tue Nov 18 2025 20:55:48 GMT-0800 (Pacific Standard Time)">04:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">That's precisely one of my gripes.</td></tr>
  <tr class="msg" id="L238"><td class="ts-cell"><a class="ts" href="#L238" alt="Tue Nov 18 2025 20:56:41 GMT-0800 (Pacific Standard Time)">04:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">rbuckton</span>: interesting. I was told at the time that cancellation primitives has been abandoned in TC39. Hm.</td></tr>
  <tr class="msg" id="L239"><td class="ts-cell"><a class="ts" href="#L239" alt="Tue Nov 18 2025 20:56:51 GMT-0800 (Pacific Standard Time)">04:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I refuse to write a standard library function which has as one of its steps "and then call <code>.addEventListener('abort', fn)</code>"</td></tr>
  <tr class="msg" id="L240"><td class="ts-cell"><a class="ts" href="#L240" alt="Tue Nov 18 2025 20:57:01 GMT-0800 (Pacific Standard Time)">04:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">even DOM consumers of AbortSignal don't stoop to that</td></tr>
  <tr class="msg" id="L241"><td class="ts-cell"><a class="ts" href="#L241" alt="Tue Nov 18 2025 20:57:26 GMT-0800 (Pacific Standard Time)">04:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Certainly not. See <a href="https://github.com/tc39/proposal-cancellation">https://github.com/tc39/proposal-cancellation</a></td></tr>
  <tr class="msg" id="L242"><td class="ts-cell"><a class="ts" href="#L242" alt="Tue Nov 18 2025 20:58:06 GMT-0800 (Pacific Standard Time)">04:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">I feel like <code>keyCount</code> reads less awkwardly than <code>keysLength</code>.</td></tr>
  <tr class="msg" id="L243"><td class="ts-cell"><a class="ts" href="#L243" alt="Tue Nov 18 2025 20:59:00 GMT-0800 (Pacific Standard Time)">04:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">that's a reasonable thing to bikeshed within stage 2 :-)</td></tr>
  <tr class="msg" id="L244"><td class="ts-cell"><a class="ts" href="#L244" alt="Tue Nov 18 2025 20:59:02 GMT-0800 (Pacific Standard Time)">04:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">or generally xsLength -&gt; xCount</td></tr>
  <tr class="msg" id="L245"><td class="ts-cell"><a class="ts" href="#L245" alt="Tue Nov 18 2025 20:59:24 GMT-0800 (Pacific Standard Time)">04:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">sign me up for the abort call plz ðŸ˜„</td></tr>
  <tr class="msg" id="L246"><td class="ts-cell"><a class="ts" href="#L246" alt="Tue Nov 18 2025 20:59:37 GMT-0800 (Pacific Standard Time)">04:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Promise cancellation as a 3rd state was abandoned, not cancellation</td></tr>
  <tr class="msg" id="L247"><td class="ts-cell"><a class="ts" href="#L247" alt="Tue Nov 18 2025 21:00:35 GMT-0800 (Pacific Standard Time)">05:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">do web-machinery things also remove their listener once their task has finished?
A thing I've come across is: long lived abortSignal with lots of shortLived user tasks and it leaks listeners</td></tr>
  <tr class="msg" id="L248"><td class="ts-cell"><a class="ts" href="#L248" alt="Tue Nov 18 2025 21:00:42 GMT-0800 (Pacific Standard Time)">05:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">yes</td></tr>
  <tr class="msg" id="L249"><td class="ts-cell"><a class="ts" href="#L249" alt="Tue Nov 18 2025 21:00:53 GMT-0800 (Pacific Standard Time)">05:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@danielrosenwasser:matrix.org">danielrosenwasser</span>&gt;</div></td><td class="msg-cell">I think <code>getOwnPropertyNameCount</code> is actually worse ðŸ˜…</td></tr>
  <tr class="msg" id="L250"><td class="ts-cell"><a class="ts" href="#L250" alt="Tue Nov 18 2025 21:00:54 GMT-0800 (Pacific Standard Time)">05:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>My major concerns with AbortController are:</p>
<ul>
<li>Dependence on DOM-specific eventing/exceptions.</li>
<li>DOM APIs privileged over user code</li>
<li>Poor separation of concerns (user listeners for <code>abort</code> can be fooled by <code>.dispatchEvent</code>)</li>
<li>No single use <code>abort</code> for user code (again, due to <code>dispatchEvent</code>)</li>
<li>No cancellation graphs (somewhat addressed over the years, but not well), so memory leaks abound</li>
</ul>
</td></tr>
  <tr class="msg" id="L251"><td class="ts-cell"><a class="ts" href="#L251" alt="Tue Nov 18 2025 21:00:58 GMT-0800 (Pacific Standard Time)">05:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">see <a href="https://dom.spec.whatwg.org/#run-the-abort-steps">https://dom.spec.whatwg.org/#run-the-abort-steps</a></td></tr>
  <tr class="msg" id="L252"><td class="ts-cell"><a class="ts" href="#L252" alt="Tue Nov 18 2025 21:01:11 GMT-0800 (Pacific Standard Time)">05:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@jasnell:matrix.org">James M Snell</span>&gt;</div></td><td class="msg-cell">I'm gonna totally lose track of everyone interested in this chat. I'll post the doodle link likely on monday and will send invites to anyone who responds</td></tr>
  <tr class="msg" id="L253"><td class="ts-cell"><a class="ts" href="#L253" alt="Tue Nov 18 2025 21:01:15 GMT-0800 (Pacific Standard Time)">05:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">"Empty signalâ€™s abort algorithms." is the bit which removes existing web-machinery listeners</td></tr>
  <tr class="msg" id="L254"><td class="ts-cell"><a class="ts" href="#L254" alt="Tue Nov 18 2025 21:01:18 GMT-0800 (Pacific Standard Time)">05:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: The reason AbortSignal uses events is just because that's kinda the standard on the web platform for callbacks. But given there are other benefits to avoiding events, your proposal seems reasonable</td></tr>
  <tr class="msg" id="L255"><td class="ts-cell"><a class="ts" href="#L255" alt="Tue Nov 18 2025 21:01:46 GMT-0800 (Pacific Standard Time)">05:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@eemeli:mozilla.org">eemeli</span>&gt;</div></td><td class="msg-cell">Almost always when I find a need to call <code>Object.keys(...).length</code>, all I really want to know is whether I have an empty <code>{}</code> object, or something else.</td></tr>
  <tr class="msg" id="L256"><td class="ts-cell"><a class="ts" href="#L256" alt="Tue Nov 18 2025 21:01:49 GMT-0800 (Pacific Standard Time)">05:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">or, wait, I think I read your question backwards?</td></tr>
  <tr class="msg" id="L257"><td class="ts-cell"><a class="ts" href="#L257" alt="Tue Nov 18 2025 21:02:07 GMT-0800 (Pacific Standard Time)">05:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I don't actually know but I don't think it's observable, because the listeners are purely internal</td></tr>
  <tr class="msg" id="L258"><td class="ts-cell"><a class="ts" href="#L258" alt="Tue Nov 18 2025 21:02:33 GMT-0800 (Pacific Standard Time)">05:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Can you imagine if DOM shipped <code>Future</code> using DOM events instead of <code>then</code>? IIRC, that wasn't even on the table for <code>Future</code> before it was adopted by 262 as <code>Promise</code>.</td></tr>
  <tr class="msg" id="L259"><td class="ts-cell"><a class="ts" href="#L259" alt="Tue Nov 18 2025 21:02:54 GMT-0800 (Pacific Standard Time)">05:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">What is there to be gained? Is this really totally un-optimizable for implementers, if it such a common pattern?</td></tr>
  <tr class="msg" id="L260"><td class="ts-cell"><a class="ts" href="#L260" alt="Tue Nov 18 2025 21:03:05 GMT-0800 (Pacific Standard Time)">05:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">I kinda want abortSignal listener add to have Symbol.dispose </td></tr>
  <tr class="msg" id="L261"><td class="ts-cell"><a class="ts" href="#L261" alt="Tue Nov 18 2025 21:03:23 GMT-0800 (Pacific Standard Time)">05:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">TCQ doesn't let me add a reply </td></tr>
  <tr class="msg" id="L262"><td class="ts-cell"><a class="ts" href="#L262" alt="Tue Nov 18 2025 21:03:42 GMT-0800 (Pacific Standard Time)">05:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">see Nic's clarifying Q :)</td></tr>
  <tr class="msg" id="L263"><td class="ts-cell"><a class="ts" href="#L263" alt="Tue Nov 18 2025 21:03:46 GMT-0800 (Pacific Standard Time)">05:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">hey! I hoist the options bags</td></tr>
  <tr class="msg" id="L264"><td class="ts-cell"><a class="ts" href="#L264" alt="Tue Nov 18 2025 21:03:49 GMT-0800 (Pacific Standard Time)">05:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">yeah this completely perplexes me</td></tr>
  <tr class="msg" id="L265"><td class="ts-cell"><a class="ts" href="#L265" alt="Tue Nov 18 2025 21:04:08 GMT-0800 (Pacific Standard Time)">05:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">refresh? I had to re-auth recently</td></tr>
  <tr class="msg" id="L266"><td class="ts-cell"><a class="ts" href="#L266" alt="Tue Nov 18 2025 21:05:34 GMT-0800 (Pacific Standard Time)">05:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">static interned inline composites could be safely hoisted by tools ðŸ˜Ž</td></tr>
  <tr class="msg" id="L267"><td class="ts-cell"><a class="ts" href="#L267" alt="Tue Nov 18 2025 21:05:44 GMT-0800 (Pacific Standard Time)">05:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><p><span class="nick-2">bakkot</span>:</p>
<blockquote>
<p>I don't understand why the web platform uses a completely different set of infrastructure for abortables</p>
</blockquote>
<p>Web specs never listen to events internally.</p>
</td></tr>
  <tr class="msg" id="L268"><td class="ts-cell"><a class="ts" href="#L268" alt="Tue Nov 18 2025 21:05:49 GMT-0800 (Pacific Standard Time)">05:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">I mean apart from a theoretical point of view, how often is this used in critical paths?</td></tr>
  <tr class="msg" id="L269"><td class="ts-cell"><a class="ts" href="#L269" alt="Tue Nov 18 2025 21:06:06 GMT-0800 (Pacific Standard Time)">05:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">well... but like... why</td></tr>
  <tr class="msg" id="L270"><td class="ts-cell"><a class="ts" href="#L270" alt="Tue Nov 18 2025 21:06:27 GMT-0800 (Pacific Standard Time)">05:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">like if it's recognized that web platform should get to use better infrastructure... why doesn't userland get to use better infrastructure?</td></tr>
  <tr class="msg" id="L271"><td class="ts-cell"><a class="ts" href="#L271" alt="Tue Nov 18 2025 21:06:38 GMT-0800 (Pacific Standard Time)">05:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">reply button is back!  ðŸŽ‰</td></tr>
  <tr class="msg" id="L272"><td class="ts-cell"><a class="ts" href="#L272" alt="Tue Nov 18 2025 21:06:50 GMT-0800 (Pacific Standard Time)">05:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>My proposal originally had something like:</p>
<pre><code>class CancelSource {
  constructor(...linkedTokens: CancelToken[]);
  token: CancelToken;
  cancel(): void;
  close(): void;
}
class CancelToken {
  static canceled: CancelToken;
  static none: CancelToken;
  get canceled(): boolean;
  get canBeCanceled(): boolean;
  get reason(): unknown;
  subscribe(cb): CancelSubscription; // disposable
  throwIfCanceled(): void;
}
</code></pre>
</td></tr>
  <tr class="msg" id="L273"><td class="ts-cell"><a class="ts" href="#L273" alt="Tue Nov 18 2025 21:06:50 GMT-0800 (Pacific Standard Time)">05:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">the many many use cases that ruben and i looked over were definitely not just needing that simple a semantic</td></tr>
  <tr class="msg" id="L274"><td class="ts-cell"><a class="ts" href="#L274" alt="Tue Nov 18 2025 21:07:24 GMT-0800 (Pacific Standard Time)">05:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: it's not a better vs worse thing. It's the same reason why internal methods are called rather than directly calling exposed interfaces.</td></tr>
  <tr class="msg" id="L275"><td class="ts-cell"><a class="ts" href="#L275" alt="Tue Nov 18 2025 21:08:08 GMT-0800 (Pacific Standard Time)">05:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">this discussion as a whole feels very like, supportive of a problem statement and not a solution, hm</td></tr>
  <tr class="msg" id="L276"><td class="ts-cell"><a class="ts" href="#L276" alt="Tue Nov 18 2025 21:08:25 GMT-0800 (Pacific Standard Time)">05:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">it could be using entirely internal methods and still same the same machinery, though</td></tr>
  <tr class="msg" id="L277"><td class="ts-cell"><a class="ts" href="#L277" alt="Tue Nov 18 2025 21:08:29 GMT-0800 (Pacific Standard Time)">05:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">keith_miller</span>: what was that 40% metric specifically?</td></tr>
  <tr class="msg" id="L278"><td class="ts-cell"><a class="ts" href="#L278" alt="Tue Nov 18 2025 21:08:32 GMT-0800 (Pacific Standard Time)">05:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">so it is about counting keys, properties or symbols and wether they are enumerable or not, how about them configurable? :D</td></tr>
  <tr class="msg" id="L279"><td class="ts-cell"><a class="ts" href="#L279" alt="Tue Nov 18 2025 21:08:35 GMT-0800 (Pacific Standard Time)">05:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@eemeli:mozilla.org">eemeli</span>&gt;</div></td><td class="msg-cell">Any idea what sort of percentage is testing the value against 0, vs. doing somethign else?</td></tr>
  <tr class="msg" id="L280"><td class="ts-cell"><a class="ts" href="#L280" alt="Tue Nov 18 2025 21:08:56 GMT-0800 (Pacific Standard Time)">05:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">there's no reason that AbortController needs to have a separate privileged list of web-platform things to trigger on abort, instead of just adding web-level things to the existing list of callbacks to call</td></tr>
  <tr class="msg" id="L281"><td class="ts-cell"><a class="ts" href="#L281" alt="Tue Nov 18 2025 21:09:00 GMT-0800 (Pacific Standard Time)">05:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: similar to JS, if you override <code>globalThis.Array</code>, that isn't called by internal JS things that create arrays</td></tr>
  <tr class="msg" id="L282"><td class="ts-cell"><a class="ts" href="#L282" alt="Tue Nov 18 2025 21:09:05 GMT-0800 (Pacific Standard Time)">05:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">the vast vast majority where it's just counting care about enumerable properties and/or symbols</td></tr>
  <tr class="msg" id="L283"><td class="ts-cell"><a class="ts" href="#L283" alt="Tue Nov 18 2025 21:10:04 GMT-0800 (Pacific Standard Time)">05:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Code that goes through the optimizing compiler</td></tr>
  <tr class="msg" id="L284"><td class="ts-cell"><a class="ts" href="#L284" alt="Tue Nov 18 2025 21:10:05 GMT-0800 (Pacific Standard Time)">05:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I'm not asking about literally doing <code>.addEventListener</code>, just about having only a single internal list of things to trigger on abort, instead of having two lists</td></tr>
  <tr class="msg" id="L285"><td class="ts-cell"><a class="ts" href="#L285" alt="Tue Nov 18 2025 21:10:14 GMT-0800 (Pacific Standard Time)">05:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">the one place this does happen (which is evil) is <code>Array.prototype.toString</code> dynamically looks up <code>Array.prototype.join</code> - not the original.</td></tr>
  <tr class="msg" id="L286"><td class="ts-cell"><a class="ts" href="#L286" alt="Tue Nov 18 2025 21:10:17 GMT-0800 (Pacific Standard Time)">05:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: basically, it isn't a deliberate choice to give web devs something bad and retain something good for internal use - and taking it to the WHATWG with that as an immutable assumption will get in the way of progress</td></tr>
  <tr class="msg" id="L287"><td class="ts-cell"><a class="ts" href="#L287" alt="Tue Nov 18 2025 21:10:30 GMT-0800 (Pacific Standard Time)">05:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">tip for newcomers: some people find it a bit rude to look ahead on the queue and make assumptions about what somebody is going to say (and pre-reply, putting words in their mouth)</td></tr>
  <tr class="msg" id="L288"><td class="ts-cell"><a class="ts" href="#L288" alt="Tue Nov 18 2025 21:10:38 GMT-0800 (Pacific Standard Time)">05:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">40% of code on internal page loads or Speedometer get to optimizing tiers yeah</td></tr>
  <tr class="msg" id="L289"><td class="ts-cell"><a class="ts" href="#L289" alt="Tue Nov 18 2025 21:11:23 GMT-0800 (Pacific Standard Time)">05:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: otherwise I understand your proposal and it seems reasonable. I'm just giving context for why things were designed as they were</td></tr>
  <tr class="msg" id="L290"><td class="ts-cell"><a class="ts" href="#L290" alt="Tue Nov 18 2025 21:11:31 GMT-0800 (Pacific Standard Time)">05:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">sorry, to be clear I didn't think it was deliberately good for web and bad for users! just that the actual effect of splitting the machinery is that it has had the consequence that the user things are stuck with something with a bunch of bad properties which the web gets to avoid</td></tr>
  <tr class="msg" id="L291"><td class="ts-cell"><a class="ts" href="#L291" alt="Tue Nov 18 2025 21:11:45 GMT-0800 (Pacific Standard Time)">05:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">yes, thank you, I appreciate the context</td></tr>
  <tr class="msg" id="L292"><td class="ts-cell"><a class="ts" href="#L292" alt="Tue Nov 18 2025 21:12:01 GMT-0800 (Pacific Standard Time)">05:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@akirose:matrix.org">Aki</span>&gt;</div></td><td class="msg-cell">Infomaniak, swiss hosting</td></tr>
  <tr class="msg" id="L293"><td class="ts-cell"><a class="ts" href="#L293" alt="Tue Nov 18 2025 21:16:44 GMT-0800 (Pacific Standard Time)">05:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I ended up implementing something like this (<code>@esfx/canceltoken</code>, docs here: <a href="https://esfx.js.org/esfx/api/canceltoken/canceltoken.html#_esfx_canceltoken_CancelToken_class">https://esfx.js.org/esfx/api/canceltoken/canceltoken.html#_esfx_canceltoken_CancelToken_class</a>). It even theoretically works in place of <code>AbortSignal</code> on the web as it repurposes an <code>AbortSignal</code> instance with custom <code>[[Prototype]]</code>.</td></tr>
  <tr class="msg" id="L294"><td class="ts-cell"><a class="ts" href="#L294" alt="Tue Nov 18 2025 21:22:00 GMT-0800 (Pacific Standard Time)">05:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@mgaudet:mozilla.org">mgaudet|travelling</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">chipmorningstar</span>: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1914502">https://bugzilla.mozilla.org/show_bug.cgi?id=1914502</a> shallowEquals in react is one of the hottest functions, and uses this pattern</td></tr>
  <tr class="msg" id="L295"><td class="ts-cell"><a class="ts" href="#L295" alt="Tue Nov 18 2025 21:22:17 GMT-0800 (Pacific Standard Time)">05:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">bakkot</span>: It'd be nice to keep <code>throwIfAborted()</code>. I guess JS will need an <code>AbortError</code>. As long as it passes <code>err instanceof Error &amp;&amp; <a href="http://err.name">err.name</a> === 'AbortError'</code>, that seems fine</td></tr>
  <tr class="msg" id="L296"><td class="ts-cell"><a class="ts" href="#L296" alt="Tue Nov 18 2025 21:23:45 GMT-0800 (Pacific Standard Time)">05:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">Yeah <span class="nick-2">chipmorningstar</span> I am totally with you. And giving what <span class="nick-9">nicolo-ribaudo</span> said, I think we have to see real usages in the wild with actual numbers in critical paths.</td></tr>
  <tr class="msg" id="L297"><td class="ts-cell"><a class="ts" href="#L297" alt="Tue Nov 18 2025 21:23:51 GMT-0800 (Pacific Standard Time)">05:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I'd also considered <code>source.cancel(reason)</code> so you could cancel with a specific reason, not just <code>AbortError</code>.</td></tr>
  <tr class="msg" id="L298"><td class="ts-cell"><a class="ts" href="#L298" alt="Tue Nov 18 2025 21:24:26 GMT-0800 (Pacific Standard Time)">05:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">it can also be <code>HostCreateAbortError()</code></td></tr>
  <tr class="msg" id="L299"><td class="ts-cell"><a class="ts" href="#L299" alt="Tue Nov 18 2025 21:24:54 GMT-0800 (Pacific Standard Time)">05:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">rbuckton</span>: <code>controller.abort()</code> has that too</td></tr>
  <tr class="msg" id="L300"><td class="ts-cell"><a class="ts" href="#L300" alt="Tue Nov 18 2025 21:25:31 GMT-0800 (Pacific Standard Time)">05:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><span class="nick-7">snek</span>: yeah that's fine, I'd just like there to be a cross-platform way to tell an 'abort' from other things.</td></tr>
  <tr class="msg" id="L301"><td class="ts-cell"><a class="ts" href="#L301" alt="Tue Nov 18 2025 21:25:39 GMT-0800 (Pacific Standard Time)">05:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Can we just have a cancellation protocol (<code>obj[Symbol.subscribeForCancellation](cb)</code>), and have web AbortSignal do that? And the web AbortSignal uses the good algorithm for it</td></tr>
  <tr class="msg" id="L302"><td class="ts-cell"><a class="ts" href="#L302" alt="Tue Nov 18 2025 21:25:45 GMT-0800 (Pacific Standard Time)">05:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">And then our APIs can just use that protocol</td></tr>
  <tr class="msg" id="L303"><td class="ts-cell"><a class="ts" href="#L303" alt="Tue Nov 18 2025 21:25:53 GMT-0800 (Pacific Standard Time)">05:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">rbuckton</span>: <a href="https://dom.spec.whatwg.org/#dom-abortcontroller-abort">https://dom.spec.whatwg.org/#dom-abortcontroller-abort</a></td></tr>
  <tr class="msg" id="L304"><td class="ts-cell"><a class="ts" href="#L304" alt="Tue Nov 18 2025 21:26:20 GMT-0800 (Pacific Standard Time)">05:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">See <a href="https://github.com/tc39/proposal-cancellation/issues/22">https://github.com/tc39/proposal-cancellation/issues/22</a>. Back in 2018 the answer ended up being "No"</td></tr>
  <tr class="msg" id="L305"><td class="ts-cell"><a class="ts" href="#L305" alt="Tue Nov 18 2025 21:27:41 GMT-0800 (Pacific Standard Time)">05:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">The more time passes without a solution happening, the more people need to relax their constraint (if we gree that want some solution to happen)</td></tr>
  <tr class="msg" id="L306"><td class="ts-cell"><a class="ts" href="#L306" alt="Tue Nov 18 2025 21:27:43 GMT-0800 (Pacific Standard Time)">05:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Jake Archibald</span>: if you haven't seen it, here is the Stage 0 cancellation proposal from 2017: <a href="https://github.com/tc39/proposal-cancellation/tree/master/stage0">https://github.com/tc39/proposal-cancellation/tree/master/stage0</a></td></tr>
  <tr class="msg" id="L307"><td class="ts-cell"><a class="ts" href="#L307" alt="Tue Nov 18 2025 21:28:00 GMT-0800 (Pacific Standard Time)">05:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">I don't think the API name (in this proposal's case) is a Stage 2 concern</td></tr>
  <tr class="msg" id="L308"><td class="ts-cell"><a class="ts" href="#L308" alt="Tue Nov 18 2025 21:28:07 GMT-0800 (Pacific Standard Time)">05:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">But I don't see in that issue why the answer ended up being no</td></tr>
  <tr class="msg" id="L309"><td class="ts-cell"><a class="ts" href="#L309" alt="Tue Nov 18 2025 21:29:11 GMT-0800 (Pacific Standard Time)">05:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">is there a reason to want this to be a symbol-named protocol instead of a string-named protocol? Because my plan was to add a string-named <code>whenAborted</code> or something to AbortSignal, which does the good algorithm, and have consumers like Governor do a call to the user-observable <code>.whenAborted</code>, which would make it de-facto a protocol</td></tr>
  <tr class="msg" id="L310"><td class="ts-cell"><a class="ts" href="#L310" alt="Tue Nov 18 2025 21:29:20 GMT-0800 (Pacific Standard Time)">05:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">also percent of spec text that the name occupies does not make one bit of difference</td></tr>
  <tr class="msg" id="L311"><td class="ts-cell"><a class="ts" href="#L311" alt="Tue Nov 18 2025 21:29:24 GMT-0800 (Pacific Standard Time)">05:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I think symbol-named protocols are good for things where you want the protocol implemented on arbitrary objects</td></tr>
  <tr class="msg" id="L312"><td class="ts-cell"><a class="ts" href="#L312" alt="Tue Nov 18 2025 21:29:28 GMT-0800 (Pacific Standard Time)">05:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">like iterator</td></tr>
  <tr class="msg" id="L313"><td class="ts-cell"><a class="ts" href="#L313" alt="Tue Nov 18 2025 21:29:34 GMT-0800 (Pacific Standard Time)">05:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">but don't see much reason for symbol-named protocols for cases like this</td></tr>
  <tr class="msg" id="L314"><td class="ts-cell"><a class="ts" href="#L314" alt="Tue Nov 18 2025 21:29:39 GMT-0800 (Pacific Standard Time)">05:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I'd been working with Domenic Denicola on a solution and ended up being told later that the protocol idea was not going to be accepted and only thing WHATWG would consider would be a host hook.</td></tr>
  <tr class="msg" id="L315"><td class="ts-cell"><a class="ts" href="#L315" alt="Tue Nov 18 2025 21:29:40 GMT-0800 (Pacific Standard Time)">05:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">eemeli</span>: do you know why Map &amp; Set don't use <code>count</code>?</td></tr>
  <tr class="msg" id="L316"><td class="ts-cell"><a class="ts" href="#L316" alt="Tue Nov 18 2025 21:29:54 GMT-0800 (Pacific Standard Time)">05:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">That the web API already has one way to register, and it can be confusing to have two</td></tr>
  <tr class="msg" id="L317"><td class="ts-cell"><a class="ts" href="#L317" alt="Tue Nov 18 2025 21:29:56 GMT-0800 (Pacific Standard Time)">05:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">you think it needs to be decided before stage 2?</td></tr>
  <tr class="msg" id="L318"><td class="ts-cell"><a class="ts" href="#L318" alt="Tue Nov 18 2025 21:30:02 GMT-0800 (Pacific Standard Time)">05:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">I don't want to object but this really feels premature</td></tr>
  <tr class="msg" id="L319"><td class="ts-cell"><a class="ts" href="#L319" alt="Tue Nov 18 2025 21:30:06 GMT-0800 (Pacific Standard Time)">05:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Unless we want every of its users to consider the event-based API to be deprecated</td></tr>
  <tr class="msg" id="L320"><td class="ts-cell"><a class="ts" href="#L320" alt="Tue Nov 18 2025 21:30:16 GMT-0800 (Pacific Standard Time)">05:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">@ljharb</span> no I was objecting to <span class="nick-2">@eemeli</span>'s objection</td></tr>
  <tr class="msg" id="L321"><td class="ts-cell"><a class="ts" href="#L321" alt="Tue Nov 18 2025 21:30:36 GMT-0800 (Pacific Standard Time)">05:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">uhhhh yeah that's pretty much what I'm hoping for</td></tr>
  <tr class="msg" id="L322"><td class="ts-cell"><a class="ts" href="#L322" alt="Tue Nov 18 2025 21:30:51 GMT-0800 (Pacific Standard Time)">05:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Then a string-based protocol is good</td></tr>
  <tr class="msg" id="L323"><td class="ts-cell"><a class="ts" href="#L323" alt="Tue Nov 18 2025 21:30:54 GMT-0800 (Pacific Standard Time)">05:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">it's got a bunch of footguns so that's desirable anyway</td></tr>
  <tr class="msg" id="L324"><td class="ts-cell"><a class="ts" href="#L324" alt="Tue Nov 18 2025 21:31:07 GMT-0800 (Pacific Standard Time)">05:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">See <a href="https://github.com/tc39/proposal-cancellation/issues/22#issuecomment-916548469">https://github.com/tc39/proposal-cancellation/issues/22#issuecomment-916548469</a></td></tr>
  <tr class="msg" id="L325"><td class="ts-cell"><a class="ts" href="#L325" alt="Tue Nov 18 2025 21:32:13 GMT-0800 (Pacific Standard Time)">05:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">It seems like the motivation there is that we have a good API on the web and we shouldn't use a second one. Kevin is now saying that it'd be good to provide a second API on the web (which would be good regardless of the ECMA-262 interop)</td></tr>
  <tr class="msg" id="L326"><td class="ts-cell"><a class="ts" href="#L326" alt="Tue Nov 18 2025 21:32:31 GMT-0800 (Pacific Standard Time)">05:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">oh oops I see, I mistook the conclusion. I'm definitely okay with the conclusion Jordan stated</td></tr>
  <tr class="msg" id="L327"><td class="ts-cell"><a class="ts" href="#L327" alt="Tue Nov 18 2025 21:33:10 GMT-0800 (Pacific Standard Time)">05:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@eemeli:mozilla.org">eemeli</span>&gt;</div></td><td class="msg-cell">No; I don't find their <code>size</code>s awkward though. Is the story relevant here?</td></tr>
  <tr class="msg" id="L328"><td class="ts-cell"><a class="ts" href="#L328" alt="Tue Nov 18 2025 21:33:29 GMT-0800 (Pacific Standard Time)">05:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">One reason why splitting proposals doesn't really make sense to me</td></tr>
  <tr class="msg" id="L329"><td class="ts-cell"><a class="ts" href="#L329" alt="Tue Nov 18 2025 21:33:57 GMT-0800 (Pacific Standard Time)">05:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">eemeli</span>: just that it's another word the platform uses for "number of items"</td></tr>
  <tr class="msg" id="L330"><td class="ts-cell"><a class="ts" href="#L330" alt="Tue Nov 18 2025 21:33:59 GMT-0800 (Pacific Standard Time)">05:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">@rbuckton</span> What was the proposal that prompted you to create Cancellation?</td></tr>
  <tr class="msg" id="L331"><td class="ts-cell"><a class="ts" href="#L331" alt="Tue Nov 18 2025 21:34:08 GMT-0800 (Pacific Standard Time)">05:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">I remember there being something that needed the ability to cancel</td></tr>
  <tr class="msg" id="L332"><td class="ts-cell"><a class="ts" href="#L332" alt="Tue Nov 18 2025 21:34:11 GMT-0800 (Pacific Standard Time)">05:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I've always contended that we have a less than adequate API on the web with numerous footguns. We can possibly address the footguns, but that requires deprecating older parts of the API</td></tr>
  <tr class="msg" id="L333"><td class="ts-cell"><a class="ts" href="#L333" alt="Tue Nov 18 2025 21:34:39 GMT-0800 (Pacific Standard Time)">05:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Justin Ridgewell</span>: on the web side, a lot was driven by cancellable fetch</td></tr>
  <tr class="msg" id="L334"><td class="ts-cell"><a class="ts" href="#L334" alt="Tue Nov 18 2025 21:34:58 GMT-0800 (Pacific Standard Time)">05:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><code>Promise</code> and <code>async function</code>.</td></tr>
  <tr class="msg" id="L335"><td class="ts-cell"><a class="ts" href="#L335" alt="Tue Nov 18 2025 21:35:29 GMT-0800 (Pacific Standard Time)">05:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Wasnâ€™t there something more recent than that?</td></tr>
  <tr class="msg" id="L336"><td class="ts-cell"><a class="ts" href="#L336" alt="Tue Nov 18 2025 21:35:39 GMT-0800 (Pacific Standard Time)">05:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Those both predate my joining the committee</td></tr>
  <tr class="msg" id="L337"><td class="ts-cell"><a class="ts" href="#L337" alt="Tue Nov 18 2025 21:35:43 GMT-0800 (Pacific Standard Time)">05:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">I remember there being something</td></tr>
  <tr class="msg" id="L338"><td class="ts-cell"><a class="ts" href="#L338" alt="Tue Nov 18 2025 21:36:08 GMT-0800 (Pacific Standard Time)">05:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Not really, I started working on the proposal before <code>async function</code> was finalized.</td></tr>
  <tr class="msg" id="L339"><td class="ts-cell"><a class="ts" href="#L339" alt="Tue Nov 18 2025 21:36:15 GMT-0800 (Pacific Standard Time)">05:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">A standard CancellationAsyncContext</td></tr>
  <tr class="msg" id="L340"><td class="ts-cell"><a class="ts" href="#L340" alt="Tue Nov 18 2025 21:36:25 GMT-0800 (Pacific Standard Time)">05:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">also if Observables was done in TC39</td></tr>
  <tr class="msg" id="L341"><td class="ts-cell"><a class="ts" href="#L341" alt="Tue Nov 18 2025 21:36:36 GMT-0800 (Pacific Standard Time)">05:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I think this would still count as the same API, just a different way of using it, and fwiw I think domenic agrees per <a href="https://matrixlogs.bakkot.com/WHATWG/2025-09-26#L7">https://matrixlogs.bakkot.com/WHATWG/2025-09-26#L7</a></td></tr>
  <tr class="msg" id="L342"><td class="ts-cell"><a class="ts" href="#L342" alt="Tue Nov 18 2025 21:37:30 GMT-0800 (Pacific Standard Time)">05:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@eemeli:mozilla.org">eemeli</span>&gt;</div></td><td class="msg-cell">Tbf my stated preference continues to be for <code>isEmpty</code>, but <code>keysLength</code> rubs me the wrong way because "keys length" is not grammatically correct English.</td></tr>
  <tr class="msg" id="L343"><td class="ts-cell"><a class="ts" href="#L343" alt="Tue Nov 18 2025 21:38:00 GMT-0800 (Pacific Standard Time)">05:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I'd already been using cancellation in .NET for years, and had an early implementation of <code>Promise</code> for JS back in 2015. When <code>Promise</code> was proposed for JS, I wanted cancellation for async programming.</td></tr>
  <tr class="msg" id="L344"><td class="ts-cell"><a class="ts" href="#L344" alt="Tue Nov 18 2025 21:39:47 GMT-0800 (Pacific Standard Time)">05:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I wanted cancellation for <code>new Promise(init, token)</code> and <code>Promise.prototype.then(onfulfill, onreject, token)</code> as a way to unregister callbacks as a more memory friendly version of <code>p.then(() =&gt; { token.throwIfCanceled(); ... })</code>. I also wanted it for dynamic <code>import()</code>.</td></tr>
  <tr class="msg" id="L345"><td class="ts-cell"><a class="ts" href="#L345" alt="Tue Nov 18 2025 21:40:58 GMT-0800 (Pacific Standard Time)">05:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">What held up cancellation to the point that WHATWG shipped something before we could standardize, was a number of delegates wanting cancellation to be somehow transparent, which I was strongly opposed to.</td></tr>
  <tr class="msg" id="L346"><td class="ts-cell"><a class="ts" href="#L346" alt="Tue Nov 18 2025 21:41:28 GMT-0800 (Pacific Standard Time)">05:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i don't love cancellation at the promise layer specifically, I think it leads to a footgun of stopping listening when you meant to stop the actual work that is happening, but cancellation in general seems quite nice.</td></tr>
  <tr class="msg" id="L347"><td class="ts-cell"><a class="ts" href="#L347" alt="Tue Nov 18 2025 21:42:58 GMT-0800 (Pacific Standard Time)">05:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I based that consideration on my experience with .NET's <code>new Task()</code> and <code>Task.ContinueWith()</code>, which both accept a cancellation token as a way to cancel work up-front and avoid memory leaks due to holding on to closures longer than necessary.</td></tr>
  <tr class="msg" id="L348"><td class="ts-cell"><a class="ts" href="#L348" alt="Tue Nov 18 2025 21:44:44 GMT-0800 (Pacific Standard Time)">05:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">detaching promise callbacks also seems useful</td></tr>
  <tr class="msg" id="L349"><td class="ts-cell"><a class="ts" href="#L349" alt="Tue Nov 18 2025 21:44:56 GMT-0800 (Pacific Standard Time)">05:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">That's the same reasoning why I think <code>AbortController</code>/<code>CancelSource</code> needs a <code>close()</code>/<code>[Symbol.dispose]()</code> that unregisters all callbacks, to avoid memory leaks from entire cancellation graphs that can no longer be canceled.</td></tr>
  <tr class="msg" id="L350"><td class="ts-cell"><a class="ts" href="#L350" alt="Tue Nov 18 2025 21:45:08 GMT-0800 (Pacific Standard Time)">05:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Isnâ€™t this effectively what <code data-md="`">fetch({ signal })</code> does?</td></tr>
  <tr class="msg" id="L351"><td class="ts-cell"><a class="ts" href="#L351" alt="Tue Nov 18 2025 21:45:44 GMT-0800 (Pacific Standard Time)">05:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">fetch's signal can actually cancel the native operation </td></tr>
  <tr class="msg" id="L352"><td class="ts-cell"><a class="ts" href="#L352" alt="Tue Nov 18 2025 21:45:57 GMT-0800 (Pacific Standard Time)">05:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">right. the signal should be given to the producer - not the result</td></tr>
  <tr class="msg" id="L353"><td class="ts-cell"><a class="ts" href="#L353" alt="Tue Nov 18 2025 21:46:06 GMT-0800 (Pacific Standard Time)">05:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">promise != task. promise == result</td></tr>
  <tr class="msg" id="L354"><td class="ts-cell"><a class="ts" href="#L354" alt="Tue Nov 18 2025 21:46:32 GMT-0800 (Pacific Standard Time)">05:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">a Promise is a producer of calls to its <code>.then</code> listeners</td></tr>
  <tr class="msg" id="L355"><td class="ts-cell"><a class="ts" href="#L355" alt="Tue Nov 18 2025 21:47:09 GMT-0800 (Pacific Standard Time)">05:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">program-counter++ is a producer of progress</td></tr>
  <tr class="msg" id="L356"><td class="ts-cell"><a class="ts" href="#L356" alt="Tue Nov 18 2025 21:47:27 GMT-0800 (Pacific Standard Time)">05:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">The .then callback can do actual significant work</td></tr>
  <tr class="msg" id="L357"><td class="ts-cell"><a class="ts" href="#L357" alt="Tue Nov 18 2025 21:47:47 GMT-0800 (Pacific Standard Time)">05:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Ignore the names. A .NET <code>Task</code> is virtually the same as a JS <code>Promise</code>. The only difference is that a .NET <code>Task</code> can delay starting.</td></tr>
  <tr class="msg" id="L358"><td class="ts-cell"><a class="ts" href="#L358" alt="Tue Nov 18 2025 21:48:02 GMT-0800 (Pacific Standard Time)">05:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">that's a big difference</td></tr>
  <tr class="msg" id="L359"><td class="ts-cell"><a class="ts" href="#L359" alt="Tue Nov 18 2025 21:48:06 GMT-0800 (Pacific Standard Time)">05:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">In .NET, a <code>Task</code> generally represents an eventual result.</td></tr>
  <tr class="msg" id="L360"><td class="ts-cell"><a class="ts" href="#L360" alt="Tue Nov 18 2025 21:48:41 GMT-0800 (Pacific Standard Time)">05:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Yes, but in the Venn diagram of Task and Promise, Task covers Promise entirely.</td></tr>
  <tr class="msg" id="L361"><td class="ts-cell"><a class="ts" href="#L361" alt="Tue Nov 18 2025 21:48:51 GMT-0800 (Pacific Standard Time)">05:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">an <code>async function</code> that was lazy would have been very different</td></tr>
  <tr class="msg" id="L362"><td class="ts-cell"><a class="ts" href="#L362" alt="Tue Nov 18 2025 21:49:11 GMT-0800 (Pacific Standard Time)">05:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">I think youâ€™re confusing promise <code data-md="`">p1</code> and the callbackâ€™s returned result <code data-md="`">p2</code> in <code data-md="`">p2 = p1.then(() =&gt; work())</code></td></tr>
  <tr class="msg" id="L363"><td class="ts-cell"><a class="ts" href="#L363" alt="Tue Nov 18 2025 21:49:20 GMT-0800 (Pacific Standard Time)">05:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">I agree that tasks have results</td></tr>
  <tr class="msg" id="L364"><td class="ts-cell"><a class="ts" href="#L364" alt="Tue Nov 18 2025 21:49:28 GMT-0800 (Pacific Standard Time)">05:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">my concern is when people write `fetch(url).then(cb, { signal })` instead of `fetch(url, { signal }).then(cb)` these do very different things while being very similar</td></tr>
  <tr class="msg" id="L365"><td class="ts-cell"><a class="ts" href="#L365" alt="Tue Nov 18 2025 21:50:11 GMT-0800 (Pacific Standard Time)">05:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">I also I think both use cases are valid </td></tr>
  <tr class="msg" id="L366"><td class="ts-cell"><a class="ts" href="#L366" alt="Tue Nov 18 2025 21:50:19 GMT-0800 (Pacific Standard Time)">05:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">I'm saying that even though a task can be a promise, that doesn't mean it's better. Restrictions are powerful</td></tr>
  <tr class="msg" id="L367"><td class="ts-cell"><a class="ts" href="#L367" alt="Tue Nov 18 2025 21:50:26 GMT-0800 (Pacific Standard Time)">05:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">@erights Mark Miller (Agoric) MM</span>: IIRC, you had strong opinions on WeakRef and the [[KeptValues]] list. Do you have thoughts on relaxing the behavior to match JSC in <a href="https://bugs.webkit.org/show_bug.cgi?id=301334">https://bugs.webkit.org/show_bug.cgi?id=301334</a>.</td></tr>
  <tr class="msg" id="L368"><td class="ts-cell"><a class="ts" href="#L368" alt="Tue Nov 18 2025 21:50:57 GMT-0800 (Pacific Standard Time)">05:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@akirose:matrix.org">Aki</span>&gt;</div></td><td class="msg-cell">Perhaps TG1 &amp; WHATWG could take some inspiration from TG2 &amp; W3C I18N: TG2 stage advancement requires <em>asking</em> for a horizontal review from W3C I18NWG, but does not require <em>receiving</em> it</td></tr>
  <tr class="msg" id="L369"><td class="ts-cell"><a class="ts" href="#L369" alt="Tue Nov 18 2025 21:51:18 GMT-0800 (Pacific Standard Time)">05:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">TL;DR JSC only keeps the target alive as long as there exists some WeakRef that has <code>deref()</code>ed the target this cycle is still alive</td></tr>
  <tr class="msg" id="L370"><td class="ts-cell"><a class="ts" href="#L370" alt="Tue Nov 18 2025 21:51:18 GMT-0800 (Pacific Standard Time)">05:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">How do I add myself to the end of the queue?</td></tr>
  <tr class="msg" id="L371"><td class="ts-cell"><a class="ts" href="#L371" alt="Tue Nov 18 2025 21:51:24 GMT-0800 (Pacific Standard Time)">05:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>Imagine a .NET <code>Task</code> being something like:</p>
<pre><code class="language-js">function Task(init, opts) {
  if (opts?.delay) {
    const { promise, resolve, reject } = Promise.withResolvers();
    promise.start = () =&gt; init(resolve, reject);
    return promise;
  }  
  const p = new Promise(init);
  p.start = () =&gt; {};
  return p;
}
</code></pre>
</td></tr>
  <tr class="msg" id="L372"><td class="ts-cell"><a class="ts" href="#L372" alt="Tue Nov 18 2025 21:51:32 GMT-0800 (Pacific Standard Time)">05:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">It keeps inserting my topic before James's</td></tr>
  <tr class="msg" id="L373"><td class="ts-cell"><a class="ts" href="#L373" alt="Tue Nov 18 2025 21:51:57 GMT-0800 (Pacific Standard Time)">05:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">It's been doing that all day, that is <em>not</em> the normal behavior, right?</td></tr>
  <tr class="msg" id="L374"><td class="ts-cell"><a class="ts" href="#L374" alt="Tue Nov 18 2025 21:52:13 GMT-0800 (Pacific Standard Time)">05:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">It's now TCS instead of TCQ</td></tr>
  <tr class="msg" id="L375"><td class="ts-cell"><a class="ts" href="#L375" alt="Tue Nov 18 2025 21:52:34 GMT-0800 (Pacific Standard Time)">05:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jkup:matrix.org">jkup</span>&gt;</div></td><td class="msg-cell">People who submit New Topic's early during the presentation are kept at the bottom and often don't get to speak</td></tr>
  <tr class="msg" id="L376"><td class="ts-cell"><a class="ts" href="#L376" alt="Tue Nov 18 2025 21:53:00 GMT-0800 (Pacific Standard Time)">05:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">splitting them doesn't change that all the names will have to be consistent full stop</td></tr>
  <tr class="msg" id="L377"><td class="ts-cell"><a class="ts" href="#L377" alt="Tue Nov 18 2025 21:54:36 GMT-0800 (Pacific Standard Time)">05:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">is this an observable difference?</td></tr>
  <tr class="msg" id="L378"><td class="ts-cell"><a class="ts" href="#L378" alt="Tue Nov 18 2025 21:54:46 GMT-0800 (Pacific Standard Time)">05:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">(didn't read the issue yet)</td></tr>
  <tr class="msg" id="L379"><td class="ts-cell"><a class="ts" href="#L379" alt="Tue Nov 18 2025 21:54:54 GMT-0800 (Pacific Standard Time)">05:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">let's chat on the break</td></tr>
  <tr class="msg" id="L380"><td class="ts-cell"><a class="ts" href="#L380" alt="Tue Nov 18 2025 21:56:20 GMT-0800 (Pacific Standard Time)">05:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Only when you have two WeakRefs that point to the same target. My thinking is that's probably impossible to mentally model that two WeakRefs point to the same target correctly anyway.</td></tr>
  <tr class="msg" id="L381"><td class="ts-cell"><a class="ts" href="#L381" alt="Tue Nov 18 2025 21:56:56 GMT-0800 (Pacific Standard Time)">05:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">I also think (once you know the GC of a given engine) that the current behavior is a communications channel</td></tr>
  <tr class="msg" id="L382"><td class="ts-cell"><a class="ts" href="#L382" alt="Tue Nov 18 2025 21:57:30 GMT-0800 (Pacific Standard Time)">05:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">So we're admitting we want the other methods? The <code>Count</code> suffix for the longer Object methods don't read well to me. Advancing keys separately opens the risk it advances as keyCount</td></tr>
  <tr class="msg" id="L383"><td class="ts-cell"><a class="ts" href="#L383" alt="Tue Nov 18 2025 21:57:54 GMT-0800 (Pacific Standard Time)">05:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">it doesn't</td></tr>
  <tr class="msg" id="L384"><td class="ts-cell"><a class="ts" href="#L384" alt="Tue Nov 18 2025 21:58:05 GMT-0800 (Pacific Standard Time)">05:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I am admitting no such thing</td></tr>
  <tr class="msg" id="L385"><td class="ts-cell"><a class="ts" href="#L385" alt="Tue Nov 18 2025 21:58:07 GMT-0800 (Pacific Standard Time)">05:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">keysX won't advance with any X that wouldn't also be palatable for all the other methods, that would violate the "cross-cutting concerns" part of stage 2 (whether we have the other methods eventually or not)</td></tr>
  <tr class="msg" id="L386"><td class="ts-cell"><a class="ts" href="#L386" alt="Tue Nov 18 2025 22:03:11 GMT-0800 (Pacific Standard Time)">06:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sffc:mozilla.org">sffc</span>&gt;</div></td><td class="msg-cell">I wrote out an example of loading JSON with ESM and non-UTF-8 encodings at <a href="https://github.com/eemeli/proposal-import-text/issues/6">https://github.com/eemeli/proposal-import-text/issues/6</a>. It has the behavior I described yesterday: early error, triggered by syntax.

I also collected some examples of prior art: <a href="https://github.com/eemeli/proposal-import-text/issues/5#issuecomment-3550911025">https://github.com/eemeli/proposal-import-text/issues/5#issuecomment-3550911025</a></td></tr>
  <tr class="msg" id="L387"><td class="ts-cell"><a class="ts" href="#L387" alt="Tue Nov 18 2025 22:03:42 GMT-0800 (Pacific Standard Time)">06:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">@sffc</span> I don't think that makes a difference</td></tr>
  <tr class="msg" id="L388"><td class="ts-cell"><a class="ts" href="#L388" alt="Tue Nov 18 2025 22:04:52 GMT-0800 (Pacific Standard Time)">06:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">there are occasions when you <i data-md="*">won't</i> get an early error, even though you have the wrong encoding, so any warning you want to convey to hosts about mismanaging the encoding for text also applies to JSON because it's the exact same error</td></tr>
  <tr class="msg" id="L389"><td class="ts-cell"><a class="ts" href="#L389" alt="Tue Nov 18 2025 22:05:23 GMT-0800 (Pacific Standard Time)">06:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">and we don't have such a warning about JSON, and I don't think we need it</td></tr>
  <tr class="msg" id="L390"><td class="ts-cell"><a class="ts" href="#L390" alt="Tue Nov 18 2025 22:06:17 GMT-0800 (Pacific Standard Time)">06:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">the <code>encoding</code> option doesn't make sense here because there is no reason to assume the resource is backed by bytes from the perspective of the importing machinery</td></tr>
  <tr class="msg" id="L391"><td class="ts-cell"><a class="ts" href="#L391" alt="Tue Nov 18 2025 22:06:30 GMT-0800 (Pacific Standard Time)">06:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@eli-grey:matrix.org">Eli Grey</span>&gt;</div></td><td class="msg-cell">MIME types could include a universal <code>codecs</code> sub-parameter or similar</td></tr>
  <tr class="msg" id="L392"><td class="ts-cell"><a class="ts" href="#L392" alt="Tue Nov 18 2025 22:06:40 GMT-0800 (Pacific Standard Time)">06:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">that assumption is true in e.g. HTML, but whatwg is pretty dogmatic these days about interpreting any text over the wire as UTF-8 in any new APIs, so I don't think they'd be on board with allowing specifying any other encoding anyway</td></tr>
  <tr class="msg" id="L393"><td class="ts-cell"><a class="ts" href="#L393" alt="Tue Nov 18 2025 22:06:48 GMT-0800 (Pacific Standard Time)">06:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Could HTML only support UTF-8, but throw if it detects somehow a non-UTF-8 encoding?</td></tr>
  <tr class="msg" id="L394"><td class="ts-cell"><a class="ts" href="#L394" alt="Tue Nov 18 2025 22:06:58 GMT-0800 (Pacific Standard Time)">06:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@eli-grey:matrix.org">Eli Grey</span>&gt;</div></td><td class="msg-cell">and we could add a way to include the expected mime type</td></tr>
  <tr class="msg" id="L395"><td class="ts-cell"><a class="ts" href="#L395" alt="Tue Nov 18 2025 22:07:22 GMT-0800 (Pacific Standard Time)">06:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">The Content-Type header is already mime type + charset</td></tr>
  <tr class="msg" id="L396"><td class="ts-cell"><a class="ts" href="#L396" alt="Tue Nov 18 2025 22:07:46 GMT-0800 (Pacific Standard Time)">06:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@eli-grey:matrix.org">Eli Grey</span>&gt;</div></td><td class="msg-cell">that's what i meant; re-using that if possible</td></tr>
  <tr class="msg" id="L397"><td class="ts-cell"><a class="ts" href="#L397" alt="Tue Nov 18 2025 22:08:45 GMT-0800 (Pacific Standard Time)">06:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Btw, the scope of the proposal in TC39 is "if an import with type:text succeeds, it must return a string". HTML doesn't actually need our proposal to do type:text, our proposal just prevents returning random stuff there</td></tr>
  <tr class="msg" id="L398"><td class="ts-cell"><a class="ts" href="#L398" alt="Tue Nov 18 2025 22:14:51 GMT-0800 (Pacific Standard Time)">06:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><span class="nick-9">nicolo-ribaudo</span>: are there slides for your "Module-declarations-like proposals in other areas of the web platform" topic? it sounds interesting but I might be asleep</td></tr>
  <tr class="msg" id="L399"><td class="ts-cell"><a class="ts" href="#L399" alt="Tue Nov 18 2025 22:15:17 GMT-0800 (Pacific Standard Time)">06:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">I recently added them to the agenda</td></tr>
  <tr class="msg" id="L400"><td class="ts-cell"><a class="ts" href="#L400" alt="Tue Nov 18 2025 22:15:37 GMT-0800 (Pacific Standard Time)">06:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">oh nice, just hadn't refreshed</td></tr>
  <tr class="msg" id="L401"><td class="ts-cell"><a class="ts" href="#L401" alt="Tue Nov 18 2025 22:16:05 GMT-0800 (Pacific Standard Time)">06:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">It's mostly code snippets though, I was planning to just say the descriptions out lound</td></tr>
  <tr class="msg" id="L402"><td class="ts-cell"><a class="ts" href="#L402" alt="Tue Nov 18 2025 22:21:41 GMT-0800 (Pacific Standard Time)">06:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><a href="https://tc39.es/proposal-object-keys-length/">https://tc39.es/proposal-object-keys-length/</a>, thanks eemeli and james</td></tr>
  <tr class="msg" id="L403"><td class="ts-cell"><a class="ts" href="#L403" alt="Tue Nov 18 2025 22:24:53 GMT-0800 (Pacific Standard Time)">06:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@jasnell:matrix.org">James M Snell</span>&gt;</div></td><td class="msg-cell">Spec text lgtm</td></tr>
  <tr class="msg" id="L404"><td class="ts-cell"><a class="ts" href="#L404" alt="Tue Nov 18 2025 22:26:18 GMT-0800 (Pacific Standard Time)">06:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">I'm gonna be real upset if this presentation doesn't mention call stack limit</td></tr>
  <tr class="msg" id="L405"><td class="ts-cell"><a class="ts" href="#L405" alt="Tue Nov 18 2025 22:27:53 GMT-0800 (Pacific Standard Time)">06:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">it does not</td></tr>
  <tr class="msg" id="L406"><td class="ts-cell"><a class="ts" href="#L406" alt="Tue Nov 18 2025 22:28:13 GMT-0800 (Pacific Standard Time)">06:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">or arguments limit</td></tr>
  <tr class="msg" id="L407"><td class="ts-cell"><a class="ts" href="#L407" alt="Tue Nov 18 2025 22:29:06 GMT-0800 (Pacific Standard Time)">06:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">there used to be a limit of unique <code>Symbol.for</code> calls in v8 but I think that's fixed now</td></tr>
  <tr class="msg" id="L408"><td class="ts-cell"><a class="ts" href="#L408" alt="Tue Nov 18 2025 22:29:35 GMT-0800 (Pacific Standard Time)">06:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@gibson042:matrix.org">Richard Gibson</span>&gt;</div></td><td class="msg-cell">strings have a limit of 2**53 - 1 code units, but what happens when trying to exceed that is not specified: <a href="https://github.com/tc39/ecma262/issues/2623">https://github.com/tc39/ecma262/issues/2623</a></td></tr>
  <tr class="msg" id="L409"><td class="ts-cell"><a class="ts" href="#L409" alt="Tue Nov 18 2025 22:30:13 GMT-0800 (Pacific Standard Time)">06:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">and some engines fail before getting to that length too right</td></tr>
  <tr class="msg" id="L410"><td class="ts-cell"><a class="ts" href="#L410" alt="Tue Nov 18 2025 22:31:54 GMT-0800 (Pacific Standard Time)">06:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@gibson042:matrix.org">Richard Gibson</span>&gt;</div></td><td class="msg-cell">all of them; it's a big limit</td></tr>
  <tr class="msg" id="L411"><td class="ts-cell"><a class="ts" href="#L411" alt="Tue Nov 18 2025 22:34:30 GMT-0800 (Pacific Standard Time)">06:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i don't know how we can discuss any of these questions without a more concrete problem </td></tr>
  <tr class="msg" id="L412"><td class="ts-cell"><a class="ts" href="#L412" alt="Tue Nov 18 2025 22:34:31 GMT-0800 (Pacific Standard Time)">06:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">like</td></tr>
  <tr class="msg" id="L413"><td class="ts-cell"><a class="ts" href="#L413" alt="Tue Nov 18 2025 22:34:43 GMT-0800 (Pacific Standard Time)">06:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">basically every single expression in js can cause an oom</td></tr>
  <tr class="msg" id="L414"><td class="ts-cell"><a class="ts" href="#L414" alt="Tue Nov 18 2025 22:35:04 GMT-0800 (Pacific Standard Time)">06:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">what is the scope here</td></tr>
  <tr class="msg" id="L415"><td class="ts-cell"><a class="ts" href="#L415" alt="Tue Nov 18 2025 22:35:31 GMT-0800 (Pacific Standard Time)">06:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i think it's less about avoiding OOMs and more about, in the presence of sufficient memory, knowing what ranges are guaranteed vs impossible vs "up to the implementation"</td></tr>
  <tr class="msg" id="L416"><td class="ts-cell"><a class="ts" href="#L416" alt="Tue Nov 18 2025 22:35:52 GMT-0800 (Pacific Standard Time)">06:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">what is sufficient memory </td></tr>
  <tr class="msg" id="L417"><td class="ts-cell"><a class="ts" href="#L417" alt="Tue Nov 18 2025 22:35:57 GMT-0800 (Pacific Standard Time)">06:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">it's an open-ended discussion</td></tr>
  <tr class="msg" id="L418"><td class="ts-cell"><a class="ts" href="#L418" alt="Tue Nov 18 2025 22:36:45 GMT-0800 (Pacific Standard Time)">06:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella (ðŸ•‘ JST, at TC39)</span>&gt;</div></td><td class="msg-cell">assume infinite memory</td></tr>
  <tr class="msg" id="L419"><td class="ts-cell"><a class="ts" href="#L419" alt="Tue Nov 18 2025 22:36:52 GMT-0800 (Pacific Standard Time)">06:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella (ðŸ•‘ JST, at TC39)</span>&gt;</div></td><td class="msg-cell">also assume a spherical frictionless cow</td></tr>
  <tr class="msg" id="L420"><td class="ts-cell"><a class="ts" href="#L420" alt="Tue Nov 18 2025 22:36:59 GMT-0800 (Pacific Standard Time)">06:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">well now we don't need any limits</td></tr>
  <tr class="msg" id="L421"><td class="ts-cell"><a class="ts" href="#L421" alt="Tue Nov 18 2025 22:37:25 GMT-0800 (Pacific Standard Time)">06:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">yes, I have proposed exactly that in TDZ</td></tr>
  <tr class="msg" id="L422"><td class="ts-cell"><a class="ts" href="#L422" alt="Tue Nov 18 2025 22:37:34 GMT-0800 (Pacific Standard Time)">06:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">IMO it would be nice to have the spec define minimum upper bounds</td></tr>
  <tr class="msg" id="L423"><td class="ts-cell"><a class="ts" href="#L423" alt="Tue Nov 18 2025 22:37:47 GMT-0800 (Pacific Standard Time)">06:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">otherwise how are you supposed to program this crazy machine?</td></tr>
  <tr class="msg" id="L424"><td class="ts-cell"><a class="ts" href="#L424" alt="Tue Nov 18 2025 22:38:06 GMT-0800 (Pacific Standard Time)">06:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">you will immediately have non-conformant impls, no?</td></tr>
  <tr class="msg" id="L425"><td class="ts-cell"><a class="ts" href="#L425" alt="Tue Nov 18 2025 22:38:26 GMT-0800 (Pacific Standard Time)">06:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">MINIMUM upper bound</td></tr>
  <tr class="msg" id="L426"><td class="ts-cell"><a class="ts" href="#L426" alt="Tue Nov 18 2025 22:38:34 GMT-0800 (Pacific Standard Time)">06:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">so like if a system doesn't have enough memory for that, and it can't throw a rangeerror up front, it has to just oom?</td></tr>
  <tr class="msg" id="L427"><td class="ts-cell"><a class="ts" href="#L427" alt="Tue Nov 18 2025 22:38:40 GMT-0800 (Pacific Standard Time)">06:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">test262 implicitly defines certain minimum limits - maybe those could be turned into spec limits to make them explicit</td></tr>
  <tr class="msg" id="L428"><td class="ts-cell"><a class="ts" href="#L428" alt="Tue Nov 18 2025 22:38:51 GMT-0800 (Pacific Standard Time)">06:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">having a non-orientable surface, too?</td></tr>
  <tr class="msg" id="L429"><td class="ts-cell"><a class="ts" href="#L429" alt="Tue Nov 18 2025 22:38:57 GMT-0800 (Pacific Standard Time)">06:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">it should never even start if it can't support the minimums</td></tr>
  <tr class="msg" id="L430"><td class="ts-cell"><a class="ts" href="#L430" alt="Tue Nov 18 2025 22:39:13 GMT-0800 (Pacific Standard Time)">06:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">test262 has some quite expensive tests which are skipped even on production-grade engines</td></tr>
  <tr class="msg" id="L431"><td class="ts-cell"><a class="ts" href="#L431" alt="Tue Nov 18 2025 22:39:51 GMT-0800 (Pacific Standard Time)">06:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell"><blockquote>
<p>Moddable XS has a minimum RAM requirement of approximately 6-7 KB for a basic virtual machine</p>
</blockquote>
</td></tr>
  <tr class="msg" id="L432"><td class="ts-cell"><a class="ts" href="#L432" alt="Tue Nov 18 2025 22:40:06 GMT-0800 (Pacific Standard Time)">06:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/v8/v8/blob/37adb436086fca29284fea8b8440bcda73bbb0fb/test/test262/test262.status#L393">https://github.com/v8/v8/blob/37adb436086fca29284fea8b8440bcda73bbb0fb/test/test262/test262.status#L393</a></td></tr>
  <tr class="msg" id="L433"><td class="ts-cell"><a class="ts" href="#L433" alt="Tue Nov 18 2025 22:40:34 GMT-0800 (Pacific Standard Time)">06:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keith_miller:matrix.org">keith_miller</span>&gt;</div></td><td class="msg-cell">Summary of my chat <span class="nick-2">Mathieu Hofman</span>  was that changing this seems not-insane so maybe we should think deeper thoughts about this</td></tr>
  <tr class="msg" id="L434"><td class="ts-cell"><a class="ts" href="#L434" alt="Tue Nov 18 2025 22:40:59 GMT-0800 (Pacific Standard Time)">06:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">For example, I make function calls with more than 1 argument sometimes. For some number of arguments N (N &gt; 1), it's unsafe to do that because browsers may OOM. As a programmer, I'd like to know that my argument list length is less than N so that won't happen.</td></tr>
  <tr class="msg" id="L435"><td class="ts-cell"><a class="ts" href="#L435" alt="Tue Nov 18 2025 22:41:10 GMT-0800 (Pacific Standard Time)">06:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">@erights Mark Miller (Agoric) MM</span>: I should note that one of my current background tasks is investigating exactly this change</td></tr>
  <tr class="msg" id="L436"><td class="ts-cell"><a class="ts" href="#L436" alt="Tue Nov 18 2025 22:42:29 GMT-0800 (Pacific Standard Time)">06:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@eemeli:mozilla.org">eemeli</span>&gt;</div></td><td class="msg-cell">The function body is fine, but the name is not: It needs to unpack into something that's valid English, and "keys length" is not.</td></tr>
  <tr class="msg" id="L437"><td class="ts-cell"><a class="ts" href="#L437" alt="Tue Nov 18 2025 22:42:46 GMT-0800 (Pacific Standard Time)">06:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">this number depends on the current size of your stack, so, good luck with that</td></tr>
  <tr class="msg" id="L438"><td class="ts-cell"><a class="ts" href="#L438" alt="Tue Nov 18 2025 22:43:38 GMT-0800 (Pacific Standard Time)">06:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">fair, I guess this is a more difficult limit than some of the others</td></tr>
  <tr class="msg" id="L439"><td class="ts-cell"><a class="ts" href="#L439" alt="Tue Nov 18 2025 22:43:59 GMT-0800 (Pacific Standard Time)">06:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">honestly you could make N=5 there and just encourage people to write nicer code</td></tr>
  <tr class="msg" id="L440"><td class="ts-cell"><a class="ts" href="#L440" alt="Tue Nov 18 2025 22:44:42 GMT-0800 (Pacific Standard Time)">06:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">oh wait I'm thinking of formal params and not concrete args</td></tr>
  <tr class="msg" id="L441"><td class="ts-cell"><a class="ts" href="#L441" alt="Tue Nov 18 2025 22:44:43 GMT-0800 (Pacific Standard Time)">06:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><code>array.push(...vals)</code> is nice!</td></tr>
  <tr class="msg" id="L442"><td class="ts-cell"><a class="ts" href="#L442" alt="Tue Nov 18 2025 22:44:52 GMT-0800 (Pacific Standard Time)">06:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">yeah, never mind</td></tr>
  <tr class="msg" id="L443"><td class="ts-cell"><a class="ts" href="#L443" alt="Tue Nov 18 2025 22:45:09 GMT-0800 (Pacific Standard Time)">06:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">oh yeah we should limit you to 5 formal parameters, I'm on board with that</td></tr>
  <tr class="msg" id="L444"><td class="ts-cell"><a class="ts" href="#L444" alt="Tue Nov 18 2025 22:45:23 GMT-0800 (Pacific Standard Time)">06:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">we have a function in our codebase which takes 13 and I feel bad every time I look at it</td></tr>
  <tr class="msg" id="L445"><td class="ts-cell"><a class="ts" href="#L445" alt="Tue Nov 18 2025 22:47:14 GMT-0800 (Pacific Standard Time)">06:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">I don't feel very bad about functions with excessively long parameter lists, in the same way I don't feel very bad about variables with excessively long names</td></tr>
  <tr class="msg" id="L446"><td class="ts-cell"><a class="ts" href="#L446" alt="Tue Nov 18 2025 22:47:32 GMT-0800 (Pacific Standard Time)">06:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">some things are just complicated and pretending otherwise just makes things worse</td></tr>
  <tr class="msg" id="L447"><td class="ts-cell"><a class="ts" href="#L447" alt="Tue Nov 18 2025 22:48:27 GMT-0800 (Pacific Standard Time)">06:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">Yeah, but <strong>13</strong> params!</td></tr>
  <tr class="msg" id="L448"><td class="ts-cell"><a class="ts" href="#L448" alt="Tue Nov 18 2025 22:48:44 GMT-0800 (Pacific Standard Time)">06:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">I can count to 13</td></tr>
  <tr class="msg" id="L449"><td class="ts-cell"><a class="ts" href="#L449" alt="Tue Nov 18 2025 22:48:51 GMT-0800 (Pacific Standard Time)">06:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@gibson042:matrix.org">Richard Gibson</span>&gt;</div></td><td class="msg-cell"><a href="https://en.wikipedia.org/wiki/Sorites_paradox">https://en.wikipedia.org/wiki/Sorites_paradox</a></td></tr>
  <tr class="msg" id="L450"><td class="ts-cell"><a class="ts" href="#L450" alt="Tue Nov 18 2025 22:49:15 GMT-0800 (Pacific Standard Time)">06:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">How? I only have 10 fingers!</td></tr>
  <tr class="msg" id="L451"><td class="ts-cell"><a class="ts" href="#L451" alt="Tue Nov 18 2025 22:49:35 GMT-0800 (Pacific Standard Time)">06:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">your parents didn't teach you to count binary on your fingers?</td></tr>
  <tr class="msg" id="L452"><td class="ts-cell"><a class="ts" href="#L452" alt="Tue Nov 18 2025 22:50:39 GMT-0800 (Pacific Standard Time)">06:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">My dad showed me how to open a beer bottle with my <del>eye hole</del> basically anything. We had nothing!</td></tr>
  <tr class="msg" id="L453"><td class="ts-cell"><a class="ts" href="#L453" alt="Tue Nov 18 2025 22:50:55 GMT-0800 (Pacific Standard Time)">06:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">10 fingers and 10 toes, that should get you up to base 20</td></tr>
  <tr class="msg" id="L454"><td class="ts-cell"><a class="ts" href="#L454" alt="Tue Nov 18 2025 22:51:00 GMT-0800 (Pacific Standard Time)">06:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">Chrome doesn't seem to kill the whole agent. If I OOM in a web worker in chrome, only the worker crashes</td></tr>
  <tr class="msg" id="L455"><td class="ts-cell"><a class="ts" href="#L455" alt="Tue Nov 18 2025 22:51:11 GMT-0800 (Pacific Standard Time)">06:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">the fail fast proposal was the whole agent cluster right?</td></tr>
  <tr class="msg" id="L456"><td class="ts-cell"><a class="ts" href="#L456" alt="Tue Nov 18 2025 22:51:21 GMT-0800 (Pacific Standard Time)">06:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">yes, because of SAB</td></tr>
  <tr class="msg" id="L457"><td class="ts-cell"><a class="ts" href="#L457" alt="Tue Nov 18 2025 22:51:28 GMT-0800 (Pacific Standard Time)">06:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">count each knuckle too</td></tr>
  <tr class="msg" id="L458"><td class="ts-cell"><a class="ts" href="#L458" alt="Tue Nov 18 2025 22:52:22 GMT-0800 (Pacific Standard Time)">06:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">I suspect that's likely the disagreement that <span class="nick-16">@erights Mark Miller (Agoric) MM</span> was remembering</td></tr>
  <tr class="msg" id="L459"><td class="ts-cell"><a class="ts" href="#L459" alt="Tue Nov 18 2025 22:52:29 GMT-0800 (Pacific Standard Time)">06:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">as a guess</td></tr>
  <tr class="msg" id="L460"><td class="ts-cell"><a class="ts" href="#L460" alt="Tue Nov 18 2025 22:53:22 GMT-0800 (Pacific Standard Time)">06:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">might be able to say only crash the set of agents that have a SAB shared with</td></tr>
  <tr class="msg" id="L461"><td class="ts-cell"><a class="ts" href="#L461" alt="Tue Nov 18 2025 22:53:39 GMT-0800 (Pacific Standard Time)">06:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">crashing the main thread is the bad one</td></tr>
  <tr class="msg" id="L462"><td class="ts-cell"><a class="ts" href="#L462" alt="Tue Nov 18 2025 22:53:50 GMT-0800 (Pacific Standard Time)">06:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">as that's where the website is</td></tr>
  <tr class="msg" id="L463"><td class="ts-cell"><a class="ts" href="#L463" alt="Tue Nov 18 2025 22:53:53 GMT-0800 (Pacific Standard Time)">06:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">but I also remember something about the OS killing interfering with that</td></tr>
  <tr class="msg" id="L464"><td class="ts-cell"><a class="ts" href="#L464" alt="Tue Nov 18 2025 22:53:53 GMT-0800 (Pacific Standard Time)">06:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">:D</td></tr>
  <tr class="msg" id="L465"><td class="ts-cell"><a class="ts" href="#L465" alt="Tue Nov 18 2025 22:54:56 GMT-0800 (Pacific Standard Time)">06:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">if the main thread shares a SAB with a worker that failed, it's likely unsafe to let it continue</td></tr>
  <tr class="msg" id="L466"><td class="ts-cell"><a class="ts" href="#L466" alt="Tue Nov 18 2025 22:55:14 GMT-0800 (Pacific Standard Time)">06:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">yeah but as a user I prefer that to my whole tab crashing</td></tr>
  <tr class="msg" id="L467"><td class="ts-cell"><a class="ts" href="#L467" alt="Tue Nov 18 2025 22:55:43 GMT-0800 (Pacific Standard Time)">06:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">if the website is a random blog post, I don't want it to crash even if the analytics library has a bug</td></tr>
  <tr class="msg" id="L468"><td class="ts-cell"><a class="ts" href="#L468" alt="Tue Nov 18 2025 22:55:43 GMT-0800 (Pacific Standard Time)">06:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">as a user you like your applications to misbehave ?</td></tr>
  <tr class="msg" id="L469"><td class="ts-cell"><a class="ts" href="#L469" alt="Tue Nov 18 2025 22:55:47 GMT-0800 (Pacific Standard Time)">06:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@jasnell:matrix.org">James M Snell</span>&gt;</div></td><td class="msg-cell">OOM's in V8 can be problematic. They do have a host hook to handle them but new OOM paths that crash instead of using the hook pop up a lot. In workers we have to actively watch out for these since we have thousands of isolates all in the same process... crashing hard is not really an option.</td></tr>
  <tr class="msg" id="L470"><td class="ts-cell"><a class="ts" href="#L470" alt="Tue Nov 18 2025 22:55:56 GMT-0800 (Pacific Standard Time)">06:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">when it's not critical, yes</td></tr>
  <tr class="msg" id="L471"><td class="ts-cell"><a class="ts" href="#L471" alt="Tue Nov 18 2025 22:56:04 GMT-0800 (Pacific Standard Time)">06:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">do you? the alternative might be that the JS can now read uninitialised/reclaimed memory</td></tr>
  <tr class="msg" id="L472"><td class="ts-cell"><a class="ts" href="#L472" alt="Tue Nov 18 2025 22:56:17 GMT-0800 (Pacific Standard Time)">06:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">some bugs in games actually lead to fun qwirks</td></tr>
  <tr class="msg" id="L473"><td class="ts-cell"><a class="ts" href="#L473" alt="Tue Nov 18 2025 22:56:24 GMT-0800 (Pacific Standard Time)">06:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I like my applications to not crash more than I care about them maintaining arbitrary other invariants, yes</td></tr>
  <tr class="msg" id="L474"><td class="ts-cell"><a class="ts" href="#L474" alt="Tue Nov 18 2025 22:57:01 GMT-0800 (Pacific Standard Time)">06:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">there are very few webpages that I use where I would prefer a page crash over the sort of bugs likely to arise from a worker crashing, even a worker with access to a SAB</td></tr>
  <tr class="msg" id="L475"><td class="ts-cell"><a class="ts" href="#L475" alt="Tue Nov 18 2025 22:57:10 GMT-0800 (Pacific Standard Time)">06:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@legendecas:matrix.org">Chengzhong Wu</span>&gt;</div></td><td class="msg-cell">if the web page is show your wallet balance, and the balance is incorrect rather than crashing due to worker failure, it would cause human panic I think</td></tr>
  <tr class="msg" id="L476"><td class="ts-cell"><a class="ts" href="#L476" alt="Tue Nov 18 2025 22:57:36 GMT-0800 (Pacific Standard Time)">06:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">it is true that there are some very few applications where a crash is preferable, but they are <em>very</em> few</td></tr>
  <tr class="msg" id="L477"><td class="ts-cell"><a class="ts" href="#L477" alt="Tue Nov 18 2025 22:58:07 GMT-0800 (Pacific Standard Time)">06:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">ooh isn't that how some cultures did base 4 or 8 or something?</td></tr>
  <tr class="msg" id="L478"><td class="ts-cell"><a class="ts" href="#L478" alt="Tue Nov 18 2025 22:58:15 GMT-0800 (Pacific Standard Time)">06:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@jasnell:matrix.org">James M Snell</span>&gt;</div></td><td class="msg-cell">server side there are way more cases where crash is absolutely preferable</td></tr>
  <tr class="msg" id="L479"><td class="ts-cell"><a class="ts" href="#L479" alt="Tue Nov 18 2025 22:58:48 GMT-0800 (Pacific Standard Time)">06:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">we very much advocate for a host hook. I didn't understand <span class="nick-7">yusukesuzuki</span> 's point because I would think host hooks are not affected by JS heap limits (unless they themselves decide to delegate to JS)</td></tr>
  <tr class="msg" id="L480"><td class="ts-cell"><a class="ts" href="#L480" alt="Tue Nov 18 2025 22:58:56 GMT-0800 (Pacific Standard Time)">06:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@jasnell:matrix.org">James M Snell</span>&gt;</div></td><td class="msg-cell">often way better to just crash, throw away current state, then start fresh</td></tr>
  <tr class="msg" id="L481"><td class="ts-cell"><a class="ts" href="#L481" alt="Tue Nov 18 2025 22:59:19 GMT-0800 (Pacific Standard Time)">06:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@olivf.o1o.ch:immer.chat">Olivier FlÃ¼ckiger</span>&gt;</div></td><td class="msg-cell">I mean you can always catch RangeError and terminate the process in node when you get it, not?</td></tr>
  <tr class="msg" id="L482"><td class="ts-cell"><a class="ts" href="#L482" alt="Tue Nov 18 2025 22:59:43 GMT-0800 (Pacific Standard Time)">06:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@yusukesuzuki:matrix.org">yusukesuzuki</span>&gt;</div></td><td class="msg-cell">Ah, sorry for misleading. I was mentioning to delegating to user defined logic after that.</td></tr>
  <tr class="msg" id="L483"><td class="ts-cell"><a class="ts" href="#L483" alt="Tue Nov 18 2025 23:00:14 GMT-0800 (Pacific Standard Time)">07:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">And those webpage cannot be simply reloaded? I mean what page hold important state that would suffer from a reload and yet can sustain corruption ?</td></tr>
  <tr class="msg" id="L484"><td class="ts-cell"><a class="ts" href="#L484" alt="Tue Nov 18 2025 23:00:27 GMT-0800 (Pacific Standard Time)">07:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@jasnell:matrix.org">James M Snell</span>&gt;</div></td><td class="msg-cell">yeah, our host hook for OOM definitely does not defer to user code. We actually hard terminate the isolate and force a cold start fresh</td></tr>
  <tr class="msg" id="L485"><td class="ts-cell"><a class="ts" href="#L485" alt="Tue Nov 18 2025 23:00:28 GMT-0800 (Pacific Standard Time)">07:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@yusukesuzuki:matrix.org">yusukesuzuki</span>&gt;</div></td><td class="msg-cell">But also, if it is coming from system allocator exhausting memory, it is hard to guarantee that the handler can work safely too.</td></tr>
  <tr class="msg" id="L486"><td class="ts-cell"><a class="ts" href="#L486" alt="Tue Nov 18 2025 23:01:37 GMT-0800 (Pacific Standard Time)">07:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">no because other code might catch it before it reaches the process unhandled handler</td></tr>
  <tr class="msg" id="L487"><td class="ts-cell"><a class="ts" href="#L487" alt="Tue Nov 18 2025 23:02:17 GMT-0800 (Pacific Standard Time)">07:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@olivf.o1o.ch:immer.chat">Olivier FlÃ¼ckiger</span>&gt;</div></td><td class="msg-cell">sure, but if it catches it then it takes responsibility to correctly handle it.</td></tr>
  <tr class="msg" id="L488"><td class="ts-cell"><a class="ts" href="#L488" alt="Tue Nov 18 2025 23:04:05 GMT-0800 (Pacific Standard Time)">07:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@jasnell:matrix.org">James M Snell</span>&gt;</div></td><td class="msg-cell">Yes, but there are, of course, cases where we just can't let the user code do that. Lots of cases where "correctly handle it" <em>is</em> a hard crash and cold start</td></tr>
  <tr class="msg" id="L489"><td class="ts-cell"><a class="ts" href="#L489" alt="Tue Nov 18 2025 23:04:23 GMT-0800 (Pacific Standard Time)">07:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">lib A trigger OOM and let it throw, lib B made the call to lib A and handles the thrown error. lib A is now in inconsistent state. App has no clue of what happened</td></tr>
  <tr class="msg" id="L490"><td class="ts-cell"><a class="ts" href="#L490" alt="Tue Nov 18 2025 23:05:54 GMT-0800 (Pacific Standard Time)">07:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@olivf.o1o.ch:immer.chat">Olivier FlÃ¼ckiger</span>&gt;</div></td><td class="msg-cell">B should not have caught it if it can't ensure A stays consistent. How is that different from any other exception that is thrown by A.</td></tr>
  <tr class="msg" id="L491"><td class="ts-cell"><a class="ts" href="#L491" alt="Tue Nov 18 2025 23:06:33 GMT-0800 (Pacific Standard Time)">07:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">yeah B shouldn't, lots of code out there doing things it shouldn't, and inflicts pain on the rest of the app</td></tr>
  <tr class="msg" id="L492"><td class="ts-cell"><a class="ts" href="#L492" alt="Tue Nov 18 2025 23:06:45 GMT-0800 (Pacific Standard Time)">07:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@jasnell:matrix.org">James M Snell</span>&gt;</div></td><td class="msg-cell">Unfortunately not that straightforward. some frameworks unconditionally catch in an attempt to be "helpful"</td></tr>
  <tr class="msg" id="L493"><td class="ts-cell"><a class="ts" href="#L493" alt="Tue Nov 18 2025 23:07:12 GMT-0800 (Pacific Standard Time)">07:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell">Looks like we need uncatchable Errors in JS too.</td></tr>
  <tr class="msg" id="L494"><td class="ts-cell"><a class="ts" href="#L494" alt="Tue Nov 18 2025 23:07:20 GMT-0800 (Pacific Standard Time)">07:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@olivf.o1o.ch:immer.chat">Olivier FlÃ¼ckiger</span>&gt;</div></td><td class="msg-cell">sure, but now you want a crash on all errors proposal?</td></tr>
  <tr class="msg" id="L495"><td class="ts-cell"><a class="ts" href="#L495" alt="Tue Nov 18 2025 23:08:09 GMT-0800 (Pacific Standard Time)">07:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@jasnell:matrix.org">James M Snell</span>&gt;</div></td><td class="msg-cell">oh no no ... never that. just don't want an All Failures Are Catchable proposal</td></tr>
  <tr class="msg" id="L496"><td class="ts-cell"><a class="ts" href="#L496" alt="Tue Nov 18 2025 23:08:17 GMT-0800 (Pacific Standard Time)">07:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">we did advocate for a userland <code>panic()</code>. We are concerned about situations where invariants go out the window</td></tr>
  <tr class="msg" id="L497"><td class="ts-cell"><a class="ts" href="#L497" alt="Tue Nov 18 2025 23:09:01 GMT-0800 (Pacific Standard Time)">07:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">ooh interesting, I did not see this on the agenda</td></tr>
  <tr class="msg" id="L498"><td class="ts-cell"><a class="ts" href="#L498" alt="Tue Nov 18 2025 23:11:44 GMT-0800 (Pacific Standard Time)">07:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@olivf.o1o.ch:immer.chat">Olivier FlÃ¼ckiger</span>&gt;</div></td><td class="msg-cell">I see. I still think that websites seem to be doing fine with handling range errors.</td></tr>
  <tr class="msg" id="L499"><td class="ts-cell"><a class="ts" href="#L499" alt="Tue Nov 18 2025 23:12:24 GMT-0800 (Pacific Standard Time)">07:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@jasnell:matrix.org">James M Snell</span>&gt;</div></td><td class="msg-cell">Websites yeah, I agree that's different. I'm largely thinking about server-side cases</td></tr>
  <tr class="msg" id="L500"><td class="ts-cell"><a class="ts" href="#L500" alt="Tue Nov 18 2025 23:13:14 GMT-0800 (Pacific Standard Time)">07:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mhofman:matrix.org">Mathieu Hofman</span>&gt;</div></td><td class="msg-cell">web apps "think" they're doing fine, but they really have no clue. web sites could just reload</td></tr>
  <tr class="msg" id="L501"><td class="ts-cell"><a class="ts" href="#L501" alt="Tue Nov 18 2025 23:17:07 GMT-0800 (Pacific Standard Time)">07:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sffc:mozilla.org">sffc</span>&gt;</div></td><td class="msg-cell">Right, I acknowledge this in my post. With non-UTF-8 JSON imports, you get an error <em>sometimes</em>: almost always when the source encoding is utf16, and occasionally when the source encoding is latin1. However, with non-UTF-8 Text imports, you get an error <em>never</em>. Sometimes is better than never.</td></tr>
  <tr class="msg" id="L502"><td class="ts-cell"><a class="ts" href="#L502" alt="Tue Nov 18 2025 23:19:23 GMT-0800 (Pacific Standard Time)">07:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">shane, why would it necessarily be an error case tho?</td></tr>
  <tr class="msg" id="L503"><td class="ts-cell"><a class="ts" href="#L503" alt="Tue Nov 18 2025 23:20:32 GMT-0800 (Pacific Standard Time)">07:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sffc:mozilla.org">sffc</span>&gt;</div></td><td class="msg-cell">Sure, but some expressions are much more likely to cause an OOM than others.</td></tr>
  <tr class="msg" id="L504"><td class="ts-cell"><a class="ts" href="#L504" alt="Tue Nov 18 2025 23:21:15 GMT-0800 (Pacific Standard Time)">07:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">right that was my point</td></tr>
  <tr class="msg" id="L505"><td class="ts-cell"><a class="ts" href="#L505" alt="Tue Nov 18 2025 23:21:37 GMT-0800 (Pacific Standard Time)">07:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">that i thought the whole topic is too vague </td></tr>
  <tr class="msg" id="L506"><td class="ts-cell"><a class="ts" href="#L506" alt="Tue Nov 18 2025 23:23:21 GMT-0800 (Pacific Standard Time)">07:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@jasnell:matrix.org">James M Snell</span>&gt;</div></td><td class="msg-cell">definitely needs to be grounded a bit more. there's lots of nuance that gets lost without more detail</td></tr>
  <tr class="msg" id="L507"><td class="ts-cell"><a class="ts" href="#L507" alt="Tue Nov 18 2025 23:26:01 GMT-0800 (Pacific Standard Time)">07:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">wait, we have 50 min of topic left for 30 min of day?</td></tr>
  <tr class="msg" id="L508"><td class="ts-cell"><a class="ts" href="#L508" alt="Tue Nov 18 2025 23:27:50 GMT-0800 (Pacific Standard Time)">07:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">Huge props to everyone who does note-taking. The transcription can be <em>very hard</em> to follow sometimes!</td></tr>
  <tr class="msg" id="L509"><td class="ts-cell"><a class="ts" href="#L509" alt="Tue Nov 18 2025 23:31:28 GMT-0800 (Pacific Standard Time)">07:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sffc:mozilla.org">sffc</span>&gt;</div></td><td class="msg-cell">Right, I agree with this type of sentiment. Ideally, I think the spec authors should use their judgement to decide a minimum for these things (such as length of a bigint/amount). An engine <em>could</em> throw errors for anything that would exceed the minimum and be compliant and also be able to run 99.9% of programs. But, engines are permitted to allow more than that.</td></tr>
  <tr class="msg" id="L510"><td class="ts-cell"><a class="ts" href="#L510" alt="Tue Nov 18 2025 23:32:49 GMT-0800 (Pacific Standard Time)">07:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@legendecas:matrix.org">Chengzhong Wu</span>&gt;</div></td><td class="msg-cell">the schedule says we have 15min overflow</td></tr>
  <tr class="msg" id="L511"><td class="ts-cell"><a class="ts" href="#L511" alt="Tue Nov 18 2025 23:34:35 GMT-0800 (Pacific Standard Time)">07:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i'm still just like... you can make usable bigints in v8 that are larger than the entire minimum heap size for xs. so do we set the minimum really really low? if the minimum is too low it loses the point for having it</td></tr>
  <tr class="msg" id="L512"><td class="ts-cell"><a class="ts" href="#L512" alt="Tue Nov 18 2025 23:35:43 GMT-0800 (Pacific Standard Time)">07:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Or <code data-md="`">for (const el of divergences) { â€¦; break; }</code> would be <code data-md="`">first</code> mode.</td></tr>
  <tr class="msg" id="L513"><td class="ts-cell"><a class="ts" href="#L513" alt="Tue Nov 18 2025 23:36:53 GMT-0800 (Pacific Standard Time)">07:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sffc:mozilla.org">sffc</span>&gt;</div></td><td class="msg-cell">One of the things I was hoping to get out of the discussion today was just this. My position is that the spec should be more explicit when it comes to acknowledging implementation constraints. But, <em>where</em> or <em>under what conditions</em> should the spec be more explicit? This was question 1: "Under what circumstances should an implementation-defined limit be preferred over a spec-defined limit, and vice versa?"</td></tr>
  <tr class="msg" id="L514"><td class="ts-cell"><a class="ts" href="#L514" alt="Tue Nov 18 2025 23:37:55 GMT-0800 (Pacific Standard Time)">07:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">this is why i mentioned that it would be helpful to have a more concrete problem statement.</td></tr>
  <tr class="msg" id="L515"><td class="ts-cell"><a class="ts" href="#L515" alt="Tue Nov 18 2025 23:38:08 GMT-0800 (Pacific Standard Time)">07:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">like some sort of program you want to write but can't due to platform divergence </td></tr>
  <tr class="msg" id="L516"><td class="ts-cell"><a class="ts" href="#L516" alt="Tue Nov 18 2025 23:39:08 GMT-0800 (Pacific Standard Time)">07:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@jasnell:matrix.org">James M Snell</span>&gt;</div></td><td class="msg-cell">yep, understood. unfortunately I think it's too hard to talk about the general case. I think likely best to focus on a smaller set of specific cases with a definitive problem statement, then try expanding whatever decision we make there out to the other cases</td></tr>
  <tr class="msg" id="L517"><td class="ts-cell"><a class="ts" href="#L517" alt="Tue Nov 18 2025 23:39:29 GMT-0800 (Pacific Standard Time)">07:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">one example given was arr.push(...other)</td></tr>
  <tr class="msg" id="L518"><td class="ts-cell"><a class="ts" href="#L518" alt="Tue Nov 18 2025 23:40:08 GMT-0800 (Pacific Standard Time)">07:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i would generally not write that code because i would assume it would throw somewhere</td></tr>
  <tr class="msg" id="L519"><td class="ts-cell"><a class="ts" href="#L519" alt="Tue Nov 18 2025 23:40:12 GMT-0800 (Pacific Standard Time)">07:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">or to close the iterator (if that matters) <code>divergences.take(1).next().value</code></td></tr>
  <tr class="msg" id="L520"><td class="ts-cell"><a class="ts" href="#L520" alt="Tue Nov 18 2025 23:40:14 GMT-0800 (Pacific Standard Time)">07:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">so that could be something to explore</td></tr>
  <tr class="msg" id="L521"><td class="ts-cell"><a class="ts" href="#L521" alt="Tue Nov 18 2025 23:40:54 GMT-0800 (Pacific Standard Time)">07:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">but a solution to that could be adding array.extend rather than setting a minimum number of arguments</td></tr>
  <tr class="msg" id="L522"><td class="ts-cell"><a class="ts" href="#L522" alt="Tue Nov 18 2025 23:40:58 GMT-0800 (Pacific Standard Time)">07:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i'm not pushing for anything in particular here, just pointing this out as an example</td></tr>
  <tr class="msg" id="L523"><td class="ts-cell"><a class="ts" href="#L523" alt="Tue Nov 18 2025 23:42:01 GMT-0800 (Pacific Standard Time)">07:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sffc:mozilla.org">sffc</span>&gt;</div></td><td class="msg-cell">My "problem" is that I am an implementer and I want to write code that can make assumptions about how big a thing can be. I don't want to be forced to write code that is less efficient for the 99.9% case because the spec requires me to keep growing until I panic.</td></tr>
  <tr class="msg" id="L524"><td class="ts-cell"><a class="ts" href="#L524" alt="Tue Nov 18 2025 23:42:36 GMT-0800 (Pacific Standard Time)">07:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">do you have examples of this less efficient code?</td></tr>
  <tr class="msg" id="L525"><td class="ts-cell"><a class="ts" href="#L525" alt="Tue Nov 18 2025 23:42:53 GMT-0800 (Pacific Standard Time)">07:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Does <code data-md="`">take()</code> close immediately, or during the next <code data-md="`">.next()</code> (that returns <code data-md="`">{ done: true }</code>)</td></tr>
  <tr class="msg" id="L526"><td class="ts-cell"><a class="ts" href="#L526" alt="Tue Nov 18 2025 23:44:00 GMT-0800 (Pacific Standard Time)">07:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sffc:mozilla.org">sffc</span>&gt;</div></td><td class="msg-cell">Yes, for example, I have the metadata of ICU/ICU4X decimals bitpacked into a u32, because I am able to make assumptions about how big the number can be.</td></tr>
  <tr class="msg" id="L527"><td class="ts-cell"><a class="ts" href="#L527" alt="Tue Nov 18 2025 23:44:36 GMT-0800 (Pacific Standard Time)">07:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i think on the <code>next()</code></td></tr>
  <tr class="msg" id="L528"><td class="ts-cell"><a class="ts" href="#L528" alt="Tue Nov 18 2025 23:44:50 GMT-0800 (Pacific Standard Time)">07:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">you mean to fit into the bitwise safe range of js numbers?</td></tr>
  <tr class="msg" id="L529"><td class="ts-cell"><a class="ts" href="#L529" alt="Tue Nov 18 2025 23:44:58 GMT-0800 (Pacific Standard Time)">07:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sffc:mozilla.org">sffc</span>&gt;</div></td><td class="msg-cell">On the GitHub post, I show that importing a UTF-16 JSON file currently triggers a SyntaxError.</td></tr>
  <tr class="msg" id="L530"><td class="ts-cell"><a class="ts" href="#L530" alt="Tue Nov 18 2025 23:45:18 GMT-0800 (Pacific Standard Time)">07:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">right but i mean, if i'm choosing to import utf-16 text. why would that necessarily be an error</td></tr>
  <tr class="msg" id="L531"><td class="ts-cell"><a class="ts" href="#L531" alt="Tue Nov 18 2025 23:47:33 GMT-0800 (Pacific Standard Time)">07:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@rkirsling:matrix.org">rkirsling</span>&gt;</div></td><td class="msg-cell">I have to agree that this presentation seems very "solution before problem statement"</td></tr>
  <tr class="msg" id="L532"><td class="ts-cell"><a class="ts" href="#L532" alt="Tue Nov 18 2025 23:51:50 GMT-0800 (Pacific Standard Time)">07:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">deep-equal has 23m downloads a week and that's just one package this proposal would obsolete. dequal has 28m.</td></tr>
  <tr class="msg" id="L533"><td class="ts-cell"><a class="ts" href="#L533" alt="Tue Nov 18 2025 23:52:06 GMT-0800 (Pacific Standard Time)">07:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">I think this would actually work if the chars were &gt; 256 code units</td></tr>
  <tr class="msg" id="L534"><td class="ts-cell"><a class="ts" href="#L534" alt="Tue Nov 18 2025 23:52:24 GMT-0800 (Pacific Standard Time)">07:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@robpalme:matrix.org">Rob Palmer</span>&gt;</div></td><td class="msg-cell">The repo leads with the problem statement, but this presentation does not.</td></tr>
  <tr class="msg" id="L535"><td class="ts-cell"><a class="ts" href="#L535" alt="Tue Nov 18 2025 23:52:32 GMT-0800 (Pacific Standard Time)">07:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">But " and { are not, right?</td></tr>
  <tr class="msg" id="L536"><td class="ts-cell"><a class="ts" href="#L536" alt="Tue Nov 18 2025 23:53:41 GMT-0800 (Pacific Standard Time)">07:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Correct, so you canâ€™t use <code data-md="`">â€</code>. But you could use <code data-md="`">0x22 â€¦</code></td></tr>
  <tr class="msg" id="L537"><td class="ts-cell"><a class="ts" href="#L537" alt="Tue Nov 18 2025 23:53:49 GMT-0800 (Pacific Standard Time)">07:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">The problem is <code data-md="`">â€</code> writes <code data-md="`">0x22 0x00</code></td></tr>
  <tr class="msg" id="L538"><td class="ts-cell"><a class="ts" href="#L538" alt="Tue Nov 18 2025 23:54:16 GMT-0800 (Pacific Standard Time)">07:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">And the JSON parser will error on that unescaped nil char (because itâ€™s a control char)</td></tr>
  <tr class="msg" id="L539"><td class="ts-cell"><a class="ts" href="#L539" alt="Tue Nov 18 2025 23:54:28 GMT-0800 (Pacific Standard Time)">07:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">You need a " at the beginning and one at the end</td></tr>
  <tr class="msg" id="L540"><td class="ts-cell"><a class="ts" href="#L540" alt="Tue Nov 18 2025 23:54:34 GMT-0800 (Pacific Standard Time)">07:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">So one of the 0x00 will be out of the quotes</td></tr>
  <tr class="msg" id="L541"><td class="ts-cell"><a class="ts" href="#L541" alt="Tue Nov 18 2025 23:54:37 GMT-0800 (Pacific Standard Time)">07:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">No, you need <code data-md="`">0x22</code> at the beginning</td></tr>
  <tr class="msg" id="L542"><td class="ts-cell"><a class="ts" href="#L542" alt="Tue Nov 18 2025 23:54:41 GMT-0800 (Pacific Standard Time)">07:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">That will open the string</td></tr>
  <tr class="msg" id="L543"><td class="ts-cell"><a class="ts" href="#L543" alt="Tue Nov 18 2025 23:54:51 GMT-0800 (Pacific Standard Time)">07:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">The problem is the <code data-md="`">0x00</code> that immediately follows</td></tr>
  <tr class="msg" id="L544"><td class="ts-cell"><a class="ts" href="#L544" alt="Tue Nov 18 2025 23:54:53 GMT-0800 (Pacific Standard Time)">07:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">But then you need to close the string</td></tr>
  <tr class="msg" id="L545"><td class="ts-cell"><a class="ts" href="#L545" alt="Tue Nov 18 2025 23:55:08 GMT-0800 (Pacific Standard Time)">07:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Thatâ€™s also possible with a high code unit char</td></tr>
  <tr class="msg" id="L546"><td class="ts-cell"><a class="ts" href="#L546" alt="Tue Nov 18 2025 23:55:42 GMT-0800 (Pacific Standard Time)">07:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Oh you are saying if JSON was not ASCII-based for its separators?</td></tr>
  <tr class="msg" id="L547"><td class="ts-cell"><a class="ts" href="#L547" alt="Tue Nov 18 2025 23:55:49 GMT-0800 (Pacific Standard Time)">07:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">With 100% confidience, I can fool this JSON parser using utf16-le</td></tr>
  <tr class="msg" id="L548"><td class="ts-cell"><a class="ts" href="#L548" alt="Tue Nov 18 2025 23:55:58 GMT-0800 (Pacific Standard Time)">07:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sffc:mozilla.org">sffc</span>&gt;</div></td><td class="msg-cell">My position is that spec authors should decide whether such bigints are <em>useful</em>. The minimum shouldn't be "too low". The authors are in a better position to communicate that than implementers who want to make assumptions to improve memory use or performance.</td></tr>
  <tr class="msg" id="L549"><td class="ts-cell"><a class="ts" href="#L549" alt="Tue Nov 18 2025 23:56:15 GMT-0800 (Pacific Standard Time)">07:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">It will parse, it wonâ€™t result in code points that the input actually feeds it</td></tr>
  <tr class="msg" id="L550"><td class="ts-cell"><a class="ts" href="#L550" alt="Tue Nov 18 2025 23:56:51 GMT-0800 (Pacific Standard Time)">07:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">I just need to feed it a byte stream that can parse when interpreted as UTF-8.</td></tr>
  <tr class="msg" id="L551"><td class="ts-cell"><a class="ts" href="#L551" alt="Tue Nov 18 2025 23:57:09 GMT-0800 (Pacific Standard Time)">07:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Thatâ€™s completely possible within utf16-le.</td></tr>
  <tr class="msg" id="L552"><td class="ts-cell"><a class="ts" href="#L552" alt="Tue Nov 18 2025 23:57:18 GMT-0800 (Pacific Standard Time)">07:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@christianulbrich:matrix.org">Christian Ulbrich</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">ljharb</span>: But only if we are to standardize the same equalityAlgorithm as deepEqual. There are several algorithms for deepEquality, as presented before.</td></tr>
  <tr class="msg" id="L553"><td class="ts-cell"><a class="ts" href="#L553" alt="Tue Nov 18 2025 23:57:30 GMT-0800 (Pacific Standard Time)">07:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">What would the bytes be? If you have a string you need to close it. The text <code>""</code> encoded as UTF-16 would result as either 0x22-0x00-0x22-0x00 or 0x00-0x22-0x00-0x22, which when decoded as UTF-8 is either <code>"\0"\0</code> or <code>\0"\0"</code>, both of which have a 0x00 out of the quotes</td></tr>
  <tr class="msg" id="L554"><td class="ts-cell"><a class="ts" href="#L554" alt="Tue Nov 18 2025 23:57:51 GMT-0800 (Pacific Standard Time)">07:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sffc:mozilla.org">sffc</span>&gt;</div></td><td class="msg-cell">This might be true and is why I used the language "almost always" instead of "always" for utf16le causing a SyntaxError to be thrown</td></tr>
  <tr class="msg" id="L555"><td class="ts-cell"><a class="ts" href="#L555" alt="Tue Nov 18 2025 23:57:53 GMT-0800 (Pacific Standard Time)">07:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">You cannot use the literal chars <code data-md="`">â€</code> or <code data-md="`">{</code>/<code data-md="`">}</code>.</td></tr>
  <tr class="msg" id="L556"><td class="ts-cell"><a class="ts" href="#L556" alt="Tue Nov 18 2025 23:57:54 GMT-0800 (Pacific Standard Time)">07:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">i maintain at least 2 of them. but it's not actually all that important in practice which one is chosen imo, since they all check similar things</td></tr>
  <tr class="msg" id="L557"><td class="ts-cell"><a class="ts" href="#L557" alt="Tue Nov 18 2025 23:58:24 GMT-0800 (Pacific Standard Time)">07:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Ok, then you can only do either numbers or booleans</td></tr>
  <tr class="msg" id="L558"><td class="ts-cell"><a class="ts" href="#L558" alt="Tue Nov 18 2025 23:58:29 GMT-0800 (Pacific Standard Time)">07:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Both of which use ASCII characters</td></tr>
  <tr class="msg" id="L559"><td class="ts-cell"><a class="ts" href="#L559" alt="Tue Nov 18 2025 23:58:32 GMT-0800 (Pacific Standard Time)">07:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">But there are other code points that emit the <i data-md="_">bytes</i> <code data-md="`">0x22</code>, <code data-md="`">0x7b</code>/<code data-md="`">0x7d</code></td></tr>
  <tr class="msg" id="L560"><td class="ts-cell"><a class="ts" href="#L560" alt="Tue Nov 18 2025 23:58:47 GMT-0800 (Pacific Standard Time)">07:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Again, itâ€™s an arbitrary byte stream being misinterpreted</td></tr>
  <tr class="msg" id="L561"><td class="ts-cell"><a class="ts" href="#L561" alt="Tue Nov 18 2025 23:58:51 GMT-0800 (Pacific Standard Time)">07:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">I control the byte stream</td></tr>
  <tr class="msg" id="L562"><td class="ts-cell"><a class="ts" href="#L562" alt="Tue Nov 18 2025 23:58:55 GMT-0800 (Pacific Standard Time)">07:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Oh you are not saying something that is both valid JSON when decoded as UTF-8 and UTF-16?</td></tr>
  <tr class="msg" id="L563"><td class="ts-cell"><a class="ts" href="#L563" alt="Tue Nov 18 2025 23:59:14 GMT-0800 (Pacific Standard Time)">07:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">It wonâ€™t be valid JSON in UTF-16</td></tr>
  <tr class="msg" id="L564"><td class="ts-cell"><a class="ts" href="#L564" alt="Tue Nov 18 2025 23:59:25 GMT-0800 (Pacific Standard Time)">07:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Ok then I do not disagree</td></tr>
  <tr class="msg" id="L565"><td class="ts-cell"><a class="ts" href="#L565" alt="Tue Nov 18 2025 23:59:48 GMT-0800 (Pacific Standard Time)">07:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">But it seems very unlikely that you try to import as JSON something that was not meant to be JSON, and it randomly happen to work due to using the wrong encoding</td></tr>
  <tr class="msg" id="L566"><td class="ts-cell"><a class="ts" href="#L566" alt="Tue Nov 18 2025 23:59:49 GMT-0800 (Pacific Standard Time)">07:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sffc:mozilla.org">sffc</span>&gt;</div></td><td class="msg-cell">You mean it won't be valid JSON in UTF-8?</td></tr>
  <tr class="msg" id="L567"><td class="ts-cell"><a class="ts" href="#L567" alt="Wed Nov 19 2025 00:00:00 GMT-0800 (Pacific Standard Time)">08:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Iâ€™m saying the opposite.</td></tr>
  <tr class="msg" id="L568"><td class="ts-cell"><a class="ts" href="#L568" alt="Wed Nov 19 2025 00:00:25 GMT-0800 (Pacific Standard Time)">08:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">I can craft a utf16-le byte stream that will be valid JSON when interpreted as UTF-8. It will be invalid when interpreted as UTF-16.</td></tr>
  <tr class="msg" id="L569"><td class="ts-cell"><a class="ts" href="#L569" alt="Wed Nov 19 2025 00:00:54 GMT-0800 (Pacific Standard Time)">08:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Iâ€™m saying that the JSON parser is not actually enforcing UTF-8 encoded input, itâ€™s just a dumb byte parser</td></tr>
  <tr class="msg" id="L570"><td class="ts-cell"><a class="ts" href="#L570" alt="Wed Nov 19 2025 00:01:15 GMT-0800 (Pacific Standard Time)">08:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Whether the stream is actually UTF-16 or UTF-8 is up to the implementer to decide</td></tr>
  <tr class="msg" id="L571"><td class="ts-cell"><a class="ts" href="#L571" alt="Wed Nov 19 2025 00:02:06 GMT-0800 (Pacific Standard Time)">08:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sffc:mozilla.org">sffc</span>&gt;</div></td><td class="msg-cell">ok, yeah. You have UTF-16 that, if interpreted as UTF-8, happens to form syntactically valid JSON. But, if you were to convert the UTF-16 to code points and then to UTF-8, you would get something that is not valid JSON. I agree that such cases exist.</td></tr>
  <tr class="msg" id="L572"><td class="ts-cell"><a class="ts" href="#L572" alt="Wed Nov 19 2025 00:02:35 GMT-0800 (Pacific Standard Time)">08:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Correct</td></tr>
  <tr class="msg" id="L573"><td class="ts-cell"><a class="ts" href="#L573" alt="Wed Nov 19 2025 00:09:08 GMT-0800 (Pacific Standard Time)">08:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@naugtur:matrix.org">Zb Tenerowicz (ZTZ/naugtur)</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> But it seems very unlikely that you try to import as JSON something that was not meant to be JSON, and it randomly happen to work due to using the wrong encoding</blockquote></mx-reply>Unless the author of the file intended for that to happen. But to support your point, there's little to gain with that beyond an error being thrown</td></tr>
  <tr class="msg" id="L574"><td class="ts-cell"><a class="ts" href="#L574" alt="Wed Nov 19 2025 00:13:10 GMT-0800 (Pacific Standard Time)">08:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@gibson042:matrix.org">Richard Gibson</span>&gt;</div></td><td class="msg-cell">which JSON parser is just consuming bytes? The ECMA-262 ParseJSON operates on a sequence of code points (which it gets from interpreting an ECMAScript string as UTF-16 per the normal convention). And even a hand-rolled one would implicitly interpret raw octets as something, be that ASCII, a UTF, EBCDIC, etc.</td></tr>
  <tr class="msg" id="L575"><td class="ts-cell"><a class="ts" href="#L575" alt="Wed Nov 19 2025 00:14:24 GMT-0800 (Pacific Standard Time)">08:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">Itâ€™s not, per Shaneâ€™s issue. Itâ€™s interpreting it as a UTF-8 byte stream</td></tr>
  <tr class="msg" id="L576"><td class="ts-cell"><a class="ts" href="#L576" alt="Wed Nov 19 2025 00:24:12 GMT-0800 (Pacific Standard Time)">08:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@jakobjingleheimer:matrix.org">Jacob Smith</span>&gt;</div></td><td class="msg-cell"><p>I skipped the problem statements presented last time because they were already agreed last time; the proposal itself was blocked by its dependency on its sibling proposals. That dependency is now removed.</p>
<p>This presented a refinement on a potential solution based on quite a lot of feedback from delegates.</p></td></tr>
  <tr class="msg" id="L577"><td class="ts-cell"><a class="ts" href="#L577" alt="Wed Nov 19 2025 02:12:54 GMT-0800 (Pacific Standard Time)">10:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sffc:mozilla.org">sffc</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Yes, for example, I have the metadata of ICU/ICU4X decimals bitpacked into a u32, because I am able to make assumptions about how big the number can be.</blockquote></mx-reply>Also, another key example where a spec limit definitely impacts implementation constraints is the max Temporal date.</td></tr>

</tbody></table></div></div></div>
</body></html>