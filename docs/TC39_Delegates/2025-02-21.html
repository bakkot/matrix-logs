<!DOCTYPE html><html><head>
  <title>TC39 Delegates on 2025-02-21</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "TC39 Delegates";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">TC39 Delegates<br>2025-02-21<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2025-02-20" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search TC39 Delegates">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Thu Feb 20 2025 16:01:19 GMT-0800 (Pacific Standard Time)">00:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>And I do think there's a world where <code>enum</code> could be extended to support ADTs, e.g.:</p>
<pre><code class="language-ts">enum Message {
  Quit,
  Write(text),
  Move({x, y}),
}
</code></pre>
</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Thu Feb 20 2025 16:01:33 GMT-0800 (Pacific Standard Time)">00:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@canadahonk:matrix.org">canadahonk</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">Rob Palmer</span>: do you have the link to the stdlib breakout session notes? nvm</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Thu Feb 20 2025 16:04:40 GMT-0800 (Pacific Standard Time)">00:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">did you mean <a href="https://devblogs.microsoft.com/typescript/announcing-typescript-5-8-rc/#the---erasablesyntaxonly-option">https://devblogs.microsoft.com/typescript/announcing-typescript-5-8-rc/#the---erasablesyntaxonly-option</a> ?</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Thu Feb 20 2025 16:08:08 GMT-0800 (Pacific Standard Time)">00:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@canadahonk:matrix.org">canadahonk</span>&gt;</div></td><td class="msg-cell">üì£ come back to the main plenary room for a summary of breakouts</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Thu Feb 20 2025 16:09:00 GMT-0800 (Pacific Standard Time)">00:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@rekmarks:matrix.org">rekmarks</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> did you mean <a href="https://devblogs.microsoft.com/typescript/announcing-typescript-5-8-rc/#the---erasablesyntaxonly-option">https://devblogs.microsoft.com/typescript/announcing-typescript-5-8-rc/#the---erasablesyntaxonly-option</a> ?</blockquote></mx-reply>Another reason I love TypeScript is that they frequently know what I want‚Äîand give it to me‚Äîbefore I do</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Thu Feb 20 2025 16:10:20 GMT-0800 (Pacific Standard Time)">00:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sffc:mozilla.org">sffc</span>&gt;</div></td><td class="msg-cell">I'll take notes of the summaries of the presentatoins in <a href="https://docs.google.com/document/d/17u9l-TRdEasF5cKHJnTmcBUNRqGQpsYxLNraV8sChfw/edit?tab=t.0">https://docs.google.com/document/d/17u9l-TRdEasF5cKHJnTmcBUNRqGQpsYxLNraV8sChfw/edit?tab=t.0</a></td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Thu Feb 20 2025 16:13:17 GMT-0800 (Pacific Standard Time)">00:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@rekmarks:matrix.org">rekmarks</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Enum with its current TS implementation is considered an anti-pattern today, not to say that a native enum implementation in ES would not be much better (since most C-like languages have them)</blockquote></mx-reply>+1, although current TS enums have some nice properties, they are ultimately inessential</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Thu Feb 20 2025 16:16:17 GMT-0800 (Pacific Standard Time)">00:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>I'd still like to hear feedback as to what exactly is considered an anti-pattern regarding <code>enum</code>? The two things I've heard have been:</p>
<ul>
<li>Don't use <code>enum</code> in TS because it's not in ES</li>
<li><code>enum</code> defaulting to numbers and not something like <code>Symbol()</code></li>
</ul>
</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Thu Feb 20 2025 16:17:05 GMT-0800 (Pacific Standard Time)">00:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">(considering the alternative is manually defining a fixed set of forgeable strings, or unforgeable but inconvenient objects or symbols, and manually validating those)</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Thu Feb 20 2025 16:17:06 GMT-0800 (Pacific Standard Time)">00:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">Maybe the merging too?</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Thu Feb 20 2025 16:17:22 GMT-0800 (Pacific Standard Time)">00:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Merging? as in <code>enum A { ... } enum A { ... }</code>?</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Thu Feb 20 2025 16:17:45 GMT-0800 (Pacific Standard Time)">00:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">I'd be suprised if a 262 version had that</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Thu Feb 20 2025 16:18:24 GMT-0800 (Pacific Standard Time)">00:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I agree that's an anti-pattern and is something we probably wouldn't want to carry forward.</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Thu Feb 20 2025 16:21:15 GMT-0800 (Pacific Standard Time)">00:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">enums being numbers is also bad, in my opinion</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Thu Feb 20 2025 16:22:38 GMT-0800 (Pacific Standard Time)">00:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">it makes it too easy for adding new values to accidentally be a breaking change</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Thu Feb 20 2025 16:23:00 GMT-0800 (Pacific Standard Time)">00:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>Regarding Number vs String vs Symbol, my version of the proposal had a solution to that:</p>
<pre><code class="language-ts">enum Color of String {
  Red, // "Red"
  Green, // "Geen"
  Blue, // "Blue"
}

enum Kind of Symbol {
  A, // Symbol("A')
  B, // Symbol("B")
}

enum BigFlags of BigInt {
  None, // 0n
  Flag1 = 1n &lt;&lt; 0n,
  Flag2 = 1n &lt;&lt; 1n,
}

// etc.
</code></pre>
</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Thu Feb 20 2025 16:23:10 GMT-0800 (Pacific Standard Time)">00:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I would be ok with them being strings but at that point you might as well just use strings</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Thu Feb 20 2025 16:23:26 GMT-0800 (Pacific Standard Time)">00:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">it's still helpful to simplify validation and enumeration</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Thu Feb 20 2025 16:24:00 GMT-0800 (Pacific Standard Time)">00:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Numeric enums are the most common in C-like languages, and being numbers might be necessary for TS compat. </td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Thu Feb 20 2025 16:24:24 GMT-0800 (Pacific Standard Time)">00:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">yeah the experience from C-like languages is one of the main reasons I am opposed to them being numbers</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Thu Feb 20 2025 16:24:50 GMT-0800 (Pacific Standard Time)">00:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Due to how existing .d.ts files work, it would be almost impossible to change that default behavior for TS.</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Thu Feb 20 2025 16:25:25 GMT-0800 (Pacific Standard Time)">00:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">understandable, and I wouldn't want to add enums which conflicted with TS, but the conclusion I'd draw is that we should not add enums to JS at all</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Thu Feb 20 2025 16:27:05 GMT-0800 (Pacific Standard Time)">00:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">would a TS user notice the value of the enum in typical usage? or is it just that a JS consumer would be using it</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Thu Feb 20 2025 16:27:21 GMT-0800 (Pacific Standard Time)">00:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@rekmarks:matrix.org">rekmarks</span>&gt;</div></td><td class="msg-cell">Re: ‚Äúenums are an antipattern‚Äù, I haven‚Äôt verified all of the claims in this myself (and it‚Äôs a bit sensationalist) but have experienced / agree with a plurality of them: <a href="https://dev.to/ivanzm123/dont-use-enums-in-typescript-they-are-very-dangerous-57bh">https://dev.to/ivanzm123/dont-use-enums-in-typescript-they-are-very-dangerous-57bh</a></td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Thu Feb 20 2025 16:30:43 GMT-0800 (Pacific Standard Time)">00:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@rekmarks:matrix.org">rekmarks</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> would a TS user notice the value of the enum in typical usage? or is it just that a JS consumer would be using it</blockquote></mx-reply>IME no</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Thu Feb 20 2025 16:32:01 GMT-0800 (Pacific Standard Time)">00:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@rekmarks:matrix.org">rekmarks</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Re: ‚Äúenums are an antipattern‚Äù, I haven‚Äôt verified all of the claims in this myself but have experienced / agree with a plurality of them: <a href="https://dev.to/ivanzm123/dont-use-enums-in-typescript-they-are-very-dangerous-57bh">https://dev.to/ivanzm123/dont-use-enums-in-typescript-they-are-very-dangerous-57bh</a></blockquote></mx-reply>Note that I can‚Äôt replicate the enum type unsafety example in this and have not encountered it previously</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Thu Feb 20 2025 16:37:36 GMT-0800 (Pacific Standard Time)">00:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Re: ‚Äúenums are an antipattern‚Äù, I haven‚Äôt verified all of the claims in this myself (and it‚Äôs a bit sensationalist) but have experienced / agree with a plurality of them: <a href="https://dev.to/ivanzm123/dont-use-enums-in-typescript-they-are-very-dangerous-57bh">https://dev.to/ivanzm123/dont-use-enums-in-typescript-they-are-very-dangerous-57bh</a></blockquote></mx-reply>Some of those reasons are no longer true. I'll read through and follow up after dinner.</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Thu Feb 20 2025 16:41:26 GMT-0800 (Pacific Standard Time)">00:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@canadahonk:matrix.org">canadahonk</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/linusg/ecmascript-wiki">https://github.com/linusg/ecmascript-wiki</a></td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Thu Feb 20 2025 16:57:03 GMT-0800 (Pacific Standard Time)">00:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><ol>
<li>Enum's emit code - is irrelevant if <code>enum</code> exists natively</li>
<li>Numeric types unsafe - this has since been fixed</li>
<li>String ENUM's are named types - this does seem to be an odd behavior, though its specific to TS type checking and would be irrelevant to an ES enum</li>
</ol>
<p>There is an issue with TS <code>enum</code> where there are a few cases where an enum member value's emit can be type-directed, but I think that's fixable in TS and wouldn't impact an ES enum.</p>
</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Thu Feb 20 2025 17:02:19 GMT-0800 (Pacific Standard Time)">01:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Also, I still think <code>Number</code> values make the most sense for the default, especially when working with <code>Atomics</code> (e.g., <code>.load()</code>, <code>.xor()</code>, etc.) and I/O (protocols, headers, etc.), not to mention bitmasks. I also imagine number comparisons to be generally more efficient than string comparisons. I imagine they're also more readily inlineable into something like a jump table for use with <code>switch</code>. Numbers generally just work in most places.</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Thu Feb 20 2025 17:04:09 GMT-0800 (Pacific Standard Time)">01:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">One "compatible" approach I've also considered is that an ES <code>enum</code> might <em>require</em> the <code>of</code> clause if there are any members that are missing initializers. TS <code>enum</code> could elide it (as it does today), but emit <code>enum E of Number {}</code> to JS, or in the case of auto-numbering, emit <code>enum E { A = 0, B = 1, ... }</code> and populate the auto-numbered enums during emit.</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Thu Feb 20 2025 17:45:23 GMT-0800 (Pacific Standard Time)">01:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell"><p>do we need the <code>of Type</code> ? If an MVP was that the values had to be explicitly assigned, no auto-increment.</p>
<pre><code>const MyFlags = enum {
   None: 0,
   A: 1,
   B: 2,
   AB: enum.A &amp; enum.B
};
</code></pre>
</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Thu Feb 20 2025 17:48:41 GMT-0800 (Pacific Standard Time)">01:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">as ADT wouldn't need them right?</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Thu Feb 20 2025 17:48:48 GMT-0800 (Pacific Standard Time)">01:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">The <code>of Type</code> syntax is a convenience for those who specifically prefer something like a string or symbol by default for enums. In those cases, the repetition of <code>enum E { A = Symbol(), B = Symbol(), ... }</code> would be unnecessarily unwieldy.</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Thu Feb 20 2025 17:49:50 GMT-0800 (Pacific Standard Time)">01:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">It also provides a convenient way to describe the defaulting behavior for both auto numbered enums as well as string and numeric enums: <a href="https://github.com/rbuckton/proposal-enum?tab=readme-ov-file#evaluation">https://github.com/rbuckton/proposal-enum?tab=readme-ov-file#evaluation</a></td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Thu Feb 20 2025 17:50:52 GMT-0800 (Pacific Standard Time)">01:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">if it's a connivence could it be a follow on?</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Thu Feb 20 2025 17:51:44 GMT-0800 (Pacific Standard Time)">01:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">IMO, the above syntax is a non-starter. <code>const x = enum</code> certainly doesn't help the "erasable syntax" case for TS, and <code>enum.A</code> would prevent future use of <code>enum</code> for any other metaproperty, which was a blocking issue for the the <code>class.x</code> syntax as well.</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Thu Feb 20 2025 17:52:31 GMT-0800 (Pacific Standard Time)">01:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">I'd personally be ok with the bare <code>A</code> resolving to the member</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Thu Feb 20 2025 17:52:41 GMT-0800 (Pacific Standard Time)">01:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">I would not, unfotunately.</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Thu Feb 20 2025 17:53:09 GMT-0800 (Pacific Standard Time)">01:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">how comes? your early example had it bare</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Thu Feb 20 2025 17:53:10 GMT-0800 (Pacific Standard Time)">01:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><code>enum.A</code> would have the exact same issue as <code>class.A</code>, and I've come around to agreeing with that position.</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Thu Feb 20 2025 17:54:03 GMT-0800 (Pacific Standard Time)">01:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">One of the motivations for an <code>enum</code> proposal would be to reduce the runtime syntax friction between TS and ES. Proposing a wholly different syntax does not address that concern and would make adoption very difficult.</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Thu Feb 20 2025 17:57:12 GMT-0800 (Pacific Standard Time)">01:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">makes sense. but we potentially need the syntax to be at least slightly different  if the semantics are not identical?</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Thu Feb 20 2025 17:57:24 GMT-0800 (Pacific Standard Time)">01:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>Also, the mechanism for explicit autonumbering as part of emit ends up not being truly "eraseable" as it requires the introduction of temporaries to handle initializers, i.e.:</p>
<pre><code class="language-ts">import { x } from "./other.js";
enum E {
  A = x,
  B,
  C
}
</code></pre>
<p>This is also an example of the problematic type-directed emit in TS today that I hope to fix in the future. I cannot statically know what the value of <code>x</code> is without type checking, and thus could not reliably emit the auto-incremented values for B and C without additional overhead, i.e.:</p>
<pre><code class="language-js">var _a;
enum E {
  A = _a = x,
  B = ++_a,
  C = ++_a,
}
</code></pre>
</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Thu Feb 20 2025 17:58:06 GMT-0800 (Pacific Standard Time)">01:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">The <code>of</code> syntax is an invocation of an explicit mapper function that handles defining the default initializer of each value.</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Thu Feb 20 2025 17:58:48 GMT-0800 (Pacific Standard Time)">01:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Ideally, I would prefer a native syntax where <code>enum E {}</code> is the equivalent of <code>enum E of Number {}</code>, and thus the syntax could be identical in both cases.</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Thu Feb 20 2025 17:59:59 GMT-0800 (Pacific Standard Time)">01:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">This would also allow those who have a specific preference around using strings or symbols to express that via, e.g., a linter, while preserving the predominant base case of using numbers.</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Thu Feb 20 2025 18:02:15 GMT-0800 (Pacific Standard Time)">02:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">I'm probably in the minority, I prefer the values being explicit. Even if it is repetitive</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Thu Feb 20 2025 18:03:25 GMT-0800 (Pacific Standard Time)">02:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">are there other languages where the enum delegates to a runtime protocol to construct the values?</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Thu Feb 20 2025 18:03:28 GMT-0800 (Pacific Standard Time)">02:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">The other caveat of TS vs ES enums to address would be the reverse mapping aspect of TS enums, which is great for diagnostics purposes but unreliable for serialization/deserialization use cases. That's why my version of the enum proposal offloads reverse mappings to a symbol protocol and is made accessible via the <code>Enum</code> API. It introduces a more reliable and formal mechanism for parsing and serializing.</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Thu Feb 20 2025 18:03:51 GMT-0800 (Pacific Standard Time)">02:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Python does</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Thu Feb 20 2025 18:04:04 GMT-0800 (Pacific Standard Time)">02:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">thanks, I'll check that out</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Thu Feb 20 2025 18:05:12 GMT-0800 (Pacific Standard Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><pre><code class="language-py">from enum import Enum, auto
class E(Enum):
  A = auto()
  B = auto()
</code></pre>
</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Thu Feb 20 2025 18:05:21 GMT-0800 (Pacific Standard Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">the parts I like the most about the proposal is the self reference during initialisation, and the object being frozen.</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Thu Feb 20 2025 18:05:55 GMT-0800 (Pacific Standard Time)">02:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">Also, while not quite runtime, Go uses <code>iota</code>. C# enums use a similar auto-numbering mechanism to the one defined in TypeScript, but are also handled at compile-time.</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Thu Feb 20 2025 18:09:48 GMT-0800 (Pacific Standard Time)">02:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell"><p>The other benefit to a syntactic <code>enum</code> type would be future support for decorators for things like control over serialization, formatting, and marshalling, e.g.:</p>
<pre><code class="language-ts">enum Position of Symbol {
  @JSONSerializer.Alias("emp")
  @JSONSerializer.SerializeAs("employee")
  Employee,

  @JSONSerializer.Alias("mgr")
  @JSONSerializer.SerializeAs("employee")
  Manager,

  ...
}
</code></pre>
</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Thu Feb 20 2025 18:14:43 GMT-0800 (Pacific Standard Time)">02:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@rbuckton:matrix.org">rbuckton</span>&gt;</div></td><td class="msg-cell">This is also a hard comparison to make, considering the ratio of dynamic to static languages. By nature of JS being dynamic, more things often need to be done at runtime or are expressed via runtime operations (i.e., <code>Object.defineProperty</code>, <code>Reflect.*</code>, etc.).</td></tr>

</tbody></table></div></div></div>
</body></html>