<!DOCTYPE html><html><head>
  <title>TC39 Delegates on 2021-07-21</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">TC39 Delegates<br>2021-07-21<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2021-07-20" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    
<div class="room-list-wrapper">Active:<br>
<ul class="room-list">
<li><a href="../TC39_Delegates/" class="current-room">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/">WHATWG</a></li>
</ul>
</div>
<br>
<div class="room-list-wrapper">Historical:<br>
<ul class="room-list">
<li><a href="../irc-tc39/">#tc39</a></li>
<li><a href="../irc-tc39-delegates/">#tc39-delegates</a></li>
<li><a href="../irc-tc39-editor-group/">#tc39-editor-group</a></li>
<li><a href="../irc-whatwg/">#whatwg</a></li>
</ul>
</div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs"><div class="log">
<table><tbody id="log-tbody">
  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Jul 20 2021 19:32:59 GMT-0700 (Pacific Daylight Time)">02:32</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</td><td class="msg-cell">I'm interested in adding a new [[Frozen]] slot on all objects, it's stronger than Object.freeze (let's call it Magic.freeze for now), spec object can opt-in to support this stronger frozen. The result is we will have a generalized method to freeze a native object (if they support this operation).

e.g. you can still setDate on a Object.freeze(date), but you cannot do it on a Magic.freeze(date) object.</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Jul 20 2021 19:33:53 GMT-0700 (Pacific Daylight Time)">02:33</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</td><td class="msg-cell">It can be a more powerful and generalized solution to cover the Freeze ArrayBuffer I presented before</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Jul 20 2021 19:35:06 GMT-0700 (Pacific Daylight Time)">02:35</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</td><td class="msg-cell">Host are encouraged to support freezing internal state when it's meaningful. (e.g. Web URL class can support this, but DOM object should not)</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue Jul 20 2021 19:35:48 GMT-0700 (Pacific Daylight Time)">02:35</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</td><td class="msg-cell">Is this solution likely to be supported? If not I'll not spend time on preparing and presenting it</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Tue Jul 20 2021 19:41:15 GMT-0700 (Pacific Daylight Time)">02:41</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</td><td class="msg-cell"><mx-reply><blockquote> I'm interested in adding a new [[Frozen]] slot on all objects, it's stronger than Object.freeze (let's call it Magic.freeze for now), spec object can opt-in to support this stronger frozen. The result is we will have a generalized method to freeze a native object (if they support this operation).

e.g. you can still setDate on a Object.freeze(date), but you cannot do it on a Magic.freeze(date) object.</blockquote></mx-reply>Or add a new integrity level that stronger than sealed and frozen in SetIntegrityLevel and provide a new API for it
</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Tue Jul 20 2021 22:48:07 GMT-0700 (Pacific Daylight Time)">05:48</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title="@dehrenberg:igalia.com">littledan</span>&gt;</td><td class="msg-cell">I'm pretty skeptical that this can be made to work well (based on various goals raised by TC39 delegates)</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Tue Jul 20 2021 22:49:32 GMT-0700 (Pacific Daylight Time)">05:49</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title="@dehrenberg:igalia.com">littledan</span>&gt;</td><td class="msg-cell">Well, I should think more about the opt-in part. Maybe that makes it OK</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Tue Jul 20 2021 22:50:02 GMT-0700 (Pacific Daylight Time)">05:50</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title="@dehrenberg:igalia.com">littledan</span>&gt;</td><td class="msg-cell">Could you say more about the motivation?</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Tue Jul 20 2021 22:52:00 GMT-0700 (Pacific Daylight Time)">05:52</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title="@dehrenberg:igalia.com">littledan</span>&gt;</td><td class="msg-cell">I guess the simplest way to do this would be a protocol defining a method (possibly a symbol). Can you explain why you framed this as Magic.freeze(date) and not date.freeze()?</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Tue Jul 20 2021 22:57:20 GMT-0700 (Pacific Daylight Time)">05:57</a></td><td class="nick-cell">&lt;<span class="nick nick-13" title="@legendecas:matrix.org">legendecas</span>&gt;</td><td class="msg-cell">If the NEW freeze is an opt-in feature, how would the NEW freeze ended up being different with Object.freeze when new requirements apply? Broaden the scope of freeze is a breaking change. In that case adding new freeze support might still need a NEW NEW freeze.</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Tue Jul 20 2021 23:03:07 GMT-0700 (Pacific Daylight Time)">06:03</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title="@dehrenberg:igalia.com">littledan</span>&gt;</td><td class="msg-cell">Well, there are lots of different constraints about such a feature beyond just web compatibility. For example, it should maybe be hookable for user-defined classes, and interaction with proxies and private fields should be defined</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Tue Jul 20 2021 23:10:42 GMT-0700 (Pacific Daylight Time)">06:10</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title="@dehrenberg:igalia.com">littledan</span>&gt;</td><td class="msg-cell">Such an advanced freeze has been suggested as a replacement for records and tuples, which is probably a reason I am being too negative here, sorry. I think it would not make sense as a replacement because it wouldn't make the structural equality part of R&amp;T work (since it would be weird for the identity of the value to change just because you Magic.freeze it). But it's OK for you to have that as a non-goal for this other feature (as long as it is not claimed to subsume R&amp;T)</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Tue Jul 20 2021 23:36:00 GMT-0700 (Pacific Daylight Time)">06:36</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title="@dehrenberg:igalia.com">littledan</span>&gt;</td><td class="msg-cell">I really think that immutability needs to be part of the design of the class, and not bolted on later through some external function called on an instance. Temporal is an immutable replacement for date, and includes methods for changing one component without mutation, which are idiomatically done on date through mutation.</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Tue Jul 20 2021 23:37:07 GMT-0700 (Pacific Daylight Time)">06:37</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title="@dehrenberg:igalia.com">littledan</span>&gt;</td><td class="msg-cell">Another example is that Tuples are proposed with their array-by-copy methods, and they would seem somehow broken without them (or with the normal array mutation methods)</td></tr>
</tbody></table>
</div></div></div>
</body></html>