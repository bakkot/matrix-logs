2025-09-10
[09:52:02.0403] <nicolo-ribaudo>
Hey, I don't remember if I mentioned last time we met, but I was talking with joyee (who worked on the recent module changes in Node.js), and he'd be curious to talk about module hooks to see where we are and how that relates to the Node.js system. Zb Tenerowicz (ZTZ/naugtur) / kriskowal do you plan to attend one of our upcoming meetings? :)

[10:09:39.0856] <kriskowal>
I’ll try to attend tomorrow. ZB has been able to drop in regularly recently.

[10:11:50.0862] <Zb Tenerowicz (ZTZ/naugtur)>
I'll try to join tomorrow, yes


2025-09-11
[20:34:49.0310] <guybedford>
seems there was a pretty critical oversight in the type css import spec - https://github.com/whatwg/html/issues/11629

[20:34:57.0550] <guybedford>
hopefully it gets corrected soon!

[20:35:23.0303] <guybedford>
see you all tomorrow

[09:02:09.0074] <nicolo-ribaudo>
Meeting time!

[14:28:56.0462] <kriskowal>
nicolo-ribaudo guybedford what’s the current deal for preserving the referrer of a module source if it’s transferred over post message to another worker, such that relative module specifiers converge on the same sources for shallow dependencies?

[14:30:23.0127] <kriskowal>
I assume it’s currently an implementation- or host-defined behavior backed by the host data internal slot, made transferrable.

[14:30:35.0579] <kriskowal>
* I assume it’s currently an implementation- or host-defined behavior backed by the host data internal slot, made transferrable of postmessage and structuredclone.

[14:34:07.0020] <kriskowal>
I’m mulling a mechanism to bind a module source to its specifier explicitly like `import(new ModuleSource('import "../x.js"'), { base: new URL('lib/y.js', import.meta.url).href })` or `import.source` with same args to avoid execution (and incidentally have a different module memo key)

[14:37:07.0853] <kriskowal>
@bakkot hinted that using dynamic import to bind sources was an option, given that we (including me) disfavor using the `ModuleSource` constructor. He was referring specifically to `importHook`, which doesn’t necessarily apply to the base module specifier but could. If the base specifier is currently an implementation specific detail that of transferrable module sources, given that it’s necessarily a serializable string, we could adopt it in 262 and bind it either way.

[15:12:53.0703] <guybedford>
It's just the baseURL property of the HTML module script here, which is separately serialized and deserialized when transferring a module script. Because the module script is [[HostDefined]] on the module record, both the record and its "HTML wrapper" of the module script get serialized together

