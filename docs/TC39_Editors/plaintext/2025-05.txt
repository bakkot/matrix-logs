2025-05-05
[09:27:28.0475] <shu>
Michael Ficarra: bakkot i've invited NicoloÌ€ to some future editor call to brainstorm ideas to make the module machinery editorially easier to understand

[09:28:00.0269] <bakkot>
great

[09:28:34.0510] <Michael Ficarra>
awesome

[14:05:29.0312] <Michael Ficarra>
new editorial convention just dropped:
> do not use determiners or pronouns to refer to values from other steps (e.g. "that number"); instead uses aliases or repetition

[14:19:38.0811] <shu>
who said that

[14:20:02.0518] <shu>
what's wrong with "that number"

[14:32:29.0397] <Michael Ficarra>
you should assign it to an alias and refer to the alias instead of hand-waving at things from earlier steps

[14:33:15.0015] <Michael Ficarra>
the context of this was a PR that referred to a Unicode data file in one step and then hand-waved a reference to "that line" from the file in the next step

[14:33:55.0440] <Michael Ficarra>
also added:
> assertion steps should not be necessary to understand an algorithm; a reader should interpret it the same if they are removed

[14:34:10.0847] <Michael Ficarra>
inspired by the same line, since the "prior step" there was actually an assertion step

[14:34:16.0638] <shu>
sometimes it is clear from context, sometimes it is not

[14:34:56.0765] <Michael Ficarra>
I can drop the convention for now or leave it in until we can discuss at editor call

[14:35:05.0432] <Michael Ficarra>
I added it because I thought it would be uncontroversial

[14:38:38.0739] <Michael Ficarra>
I would also like to add another one:
> do not include unnecessary demonstrative determiners (`the String _v_` when `v` is already a String) or use demonstrative determiners as a hand-wavey way to perform a conversion

[14:40:21.0542] <Michael Ficarra>
@shuyuguo:matrix.org here was the specific line btw: https://github.com/tc39/ecma262/pull/3587/files/37ad780a824f42495276961ee32bcc2ce6c3241b#diff-181371b08d71216599b0acccbaabd03c306da6de142ea6275c2135810999805aR38582

[15:55:28.0424] <bakkot>
I don't have a problem with "that number"; it's fine when it's clear and when not clear the problem is that it is not clear

[15:56:38.0104] <bakkot>
I also don't have a problem with `the String _v_` unless it's obvious from context that `_v_` is a string

[15:57:25.0558] <bakkot>
I agree with the assert one

[16:02:15.0240] <Michael Ficarra>
this one I think we should talk about more in editor call

[16:04:09.0041] <Michael Ficarra>
is a return value of an AO whose return type is declared obvious? is a value retrieved from a call of an AO whose return type is declared obvious?

[16:05:35.0076] <bakkot>
I mean, sometimes?

[16:05:55.0221] <bakkot>
we cannot codify "be clear" as a specific set of rules around which words to use when

[16:06:51.0789] <bakkot>
we are not going to come up with a set of rules that can tell you exactly how to write each step and we shouldn't try

[16:06:56.0958] <bakkot>
it's prose

[16:11:44.0476] <jmdyck>
If someone is inclined to use `the String _v_`, they should consider `Assert: _v_ is a String` instead.

[16:13:37.0912] <jmdyck>
(i.e., if the point is to reassure the reader about what `_v_` is)


2025-05-07
[09:04:59.0827] <Michael Ficarra>
https://github.com/tc39/ecma262/issues/3588 is more evidence that the note at the bottom of that section is not sufficient

[09:05:15.0160] <Michael Ficarra>
we really need like an alternative styling or a note right next to any production that is modified in Annex B

[15:43:45.0861] <Michael Ficarra>
how about
> don't use demonstrative determiners as type assertions (`the String _v_` when `v` is already a `String`) when an assertion step can be used instead

[16:02:21.0382] <bakkot>
sgtm


2025-05-08
[17:23:18.0230] <Michael Ficarra>
neither the IEEE style guide nor the Microsoft Manual of Style say anything about pronouns/repetition so I guess I won't pursue that convention anymore

[17:23:29.0651] <Michael Ficarra>
I still don't think we'll ever actually permit a step like that though

[18:11:19.0748] <shu>
sorry, like "that"?

[18:43:14.0374] <Michael Ficarra>
yeah, a step that uses "that" to refer to something from a previous step instead of an alias

[18:46:07.0712] <Michael Ficarra>
also, I think you guys are taking the conventions a little too seriously

[18:46:20.0078] <Michael Ficarra>
they're just conventions, they don't bind us, just guide us

[18:47:05.0139] <Michael Ficarra>
if something is going to be a helpful guide 99% of the time, it's still a useful convention to document, and we should happily violate it whenever we feel justified

[18:49:17.0135] <Michael Ficarra>
also remember that we're going to pretty much follow these instinctively, the more important audience for the conventions is proposal authors


2025-05-11
[21:21:03.0471] <Michael Ficarra>
GeneratorStart (https://tc39.es/ecma262/multipage/control-abstraction-objects.html#sec-generatorstart) invokes `generatorBody` which may be an Abstract Closure that uses the `?` macro, but it doesn't wrap it in `Completion()`

[21:21:05.0497] <Michael Ficarra>
it should, right?

[21:21:08.0547] <Michael Ficarra>
@bakkot:matrix.org

[22:15:42.0269] <bakkot>
yeah, I guess

[22:16:02.0843] <bakkot>
strictly speaking the rule about wrapping things in completions only applies to AOs, I think, but it makes sense to do it for ACs as well

