2023-07-03
[07:53:00.0611] <Michael Ficarra>
our cache expiration on 262 is only 10 minutes and I can't find a way to change it :-(

[07:57:55.0506] <bakkot>
 you could always add a service worker

[07:57:59.0125] <bakkot>
I mean, probably don't do that

[07:58:03.0623] <bakkot>
but you could

[08:08:49.0291] <ljharb>
i think it's github-pages-wide


2023-07-06
[20:48:09.0730] <Michael Ficarra>
slight issue: https://github.com/google/fonts/issues/6506

[21:34:15.0376] <bakkot>
can we just host it? it's like 200kb zipped for regular+bold+italic

[07:16:46.0902] <jmdyck>
NotEscapeSequence (NES) is disallowed in untagged TemplateLiterals,
but allowed in tagged TemplateLiterals.
So consider a tagged TemplateLiteral that contains a NES.
The TRV of that NES is a String, and the TV of it is *undefined*.
So in GetTemplateObject, the relevant element of `_rawStrings_` is a String,
and of `_cookedStrings_` is *undefined*.
Is that all correct?

[07:30:45.0349] <Chris de Almeida>
whatever font is used, we should serve it directly and not rely on CDNs

[07:56:44.0535] <jmdyck>
If so, the return-types of TemplateString + TemplateStrings need to be fixed, to allow for undefined.

[08:37:49.0982] <bakkot>
yup, sounds right

[09:07:16.0711] <ljharb>
> <@bakkot:matrix.org> can we just host it? it's like 200kb zipped for regular+bold+italic

seems like we need to just host it, based on their response to michael's issue

[09:09:55.0456] <Michael Ficarra>
I will try swapping the glyph out and subsetting to get even smaller than what Google Fonts hosts.

[09:12:41.0320] <ljharb>
it'd be good if any modification you do to google's downloads is repeatable tho

[10:58:26.0514] <Michael Ficarra>
unbelievably, it actually worked ðŸ˜€

[10:58:54.0465] <Michael Ficarra>
I now know way too much about opentype features and glyph substitution

[10:59:36.0554] <Michael Ficarra>
also, they're like 15kb each, so 60kb total, about the same as Google Fonts

[10:59:48.0510] <Michael Ficarra>
since I added a documentation comment

[11:00:14.0093] <Michael Ficarra>
> Latin subset from Google Fonts with support for slashed zero substitution added back in by Michael Ficarra.

[11:00:35.0349] <bakkot>
huh, the ttf versions are 160kb each (uncompressed)

[11:01:09.0464] <bakkot>
I guess woff is a lot more efficient?

[11:01:39.0629] <bakkot>
 * I guess woff2 is a lot more efficient?

[11:01:51.0180] <Michael Ficarra>
it's a huge subsetting

[11:02:06.0902] <Michael Ficarra>
most of the non-latin glyphs and tons of opentype features are dropped

[11:02:32.0893] <Michael Ficarra>
just latin, a couple ligatures and diacritics, and now slashed zero

[11:02:33.0154] <bakkot>
ah, makes sense

[11:03:01.0822] <bakkot>
... I wonder if someone has done the work to take an HTML document and automatically derive the subset of glyphs you actually need for that document, so you can ship only thos

[11:03:02.0664] <bakkot>
 * ... I wonder if someone has done the work to take an HTML document and automatically derive the subset of glyphs you actually need for that document, so you can ship only those

[11:22:33.0898] <Michael Ficarra>
any preference whether we serve separate woff2 font files or embed them as a base64 data URL in the ecmarkup CSS file?

[11:28:10.0028] <bakkot>
I would do separate files

[11:28:30.0078] <Chris de Almeida>
I must be missing some context from the editor call yesterday...  has a font been blessed by the editors?

[11:28:35.0696] <bakkot>
at least when the CSS is not already inlined

[12:06:03.0854] <Michael Ficarra>
Chris de Almeida: yes, we decided yesterday to go with IBM Plex Serif

[12:25:39.0367] <Michael Ficarra>
ugh ecmarkup has an option to inline the CSS

[12:26:13.0857] <Michael Ficarra>
which means I guess I have to inline the font as a base64 data URL when that is used

[13:01:04.0423] <Chris de Almeida>
related:  if it's not already on the radar, the `code {}` font-family should be updated to use `IBM Plex Mono`, as it is designed to comingle with the other Plex fonts.  (and no hard feelings against `Consolas`, which is ackchyually my preferred font for code editors)

[13:04:25.0130] <bakkot>
not Comic Code?

[13:05:11.0416] <bakkot>
I do feel a bit weird about using a font which is described as "It's global, it's versatile, and it's distinctly IBM"

[13:05:12.0815] <bakkot>
but like

[13:05:14.0389] <bakkot>
whatever I guess

[13:13:07.0613] <Chris de Almeida>
every day we all use things that are distinctly IBM, one more font won't kill us ðŸ˜„

[13:29:54.0318] <shu>
i would like comic code

[13:32:22.0496] <shu>
> <@softwarechris:matrix.org> every day we all use things that are distinctly IBM, one more font won't kill us ðŸ˜„

leave that kind of content for Threads, this channel is Good vibes only

[13:38:16.0682] <Chris de Almeida>
lol.  the worst part about Threads is not being able to squat on the good usernames because they're all taken via instagram already

[13:41:02.0380] <Chris de Almeida>
 * lol.  the worst part about Threads is not being able to get your usual username because they're all taken via instagram already

[14:06:02.0159] <shu>
i knew i shuoldn't have mutadis mutandised the resizable buffer spec draft

[14:06:07.0581] <shu>
this is taking forever

[14:16:54.0926] <ljharb>
have _what_ now?

[14:41:23.0222] <shu>
https://en.wikipedia.org/wiki/Mutatis_mutandis

[14:41:37.0642] <shu>
i had a section that was like "just change the uses of these fields, omitted for brevity"

[16:15:31.0169] <shu>
why the hell do we call typed arrays Integer-Indexed exotic objects

[16:15:36.0863] <shu>
why didn't we just call them TypedArray exotic objects

[16:46:21.0708] <bakkot>
we could fix it

[16:46:38.0990] <bakkot>
90% of the answers to "why" questions about TAs are "khronos"

[16:47:28.0925] <shu>
it's like some star trek lore

[16:47:42.0914] <shu>
the strife started with the Khronos Accord

[16:54:35.0406] <jmdyck>
See https://github.com/tc39/ecma262/issues/1617

[16:56:30.0462] <jmdyck>
(from 4 years ago)

[16:56:50.0158] <shu>
i have no memory of this, but i agree with my past self still

[16:58:08.0466] <shu>
time gets away from us


2023-07-07
[17:02:06.0173] <Michael Ficarra>
> <@bakkot:matrix.org> not Comic Code?

I actually changed this yesterday lol https://github.com/tc39/ecmarkup/pull/539/files#diff-000c4303622fb87f6ed22f7294867fed4a69c49cbf0ee3bb61b0eeb6ae050ddcR108

[17:13:03.0456] <Michael Ficarra>
we also have some sans-serif usage; I'll probably update it all

[11:25:31.0534] <shu>
Michael Ficarra: how do i teach esmeta about duck-typed types? i'm doing:

1. If _foo_ does not have a [[BarField]] internal field, throw.
1. Perform AO(_foo_).

where AO takes a Bar, whose brand is [[BarField]]

context is https://github.com/tc39/ecma262/actions/runs/5489357665/jobs/10003415683?pr=3116

[11:56:34.0295] <bakkot>
you could try adding an assert after the check? if that doesn't work the alternative is, open an issue on esmeta and/or add the methods to esmeta-ignore


2023-07-12
[15:34:46.0280] <ljharb>
it seems weird to me that SetTypedArrayFromArrayLike allows targetOffset to be a non-neg int, or âˆž, but then it throws a RangeError if it's âˆž in step 11. why not throw that sooner, or disallow it entirely?

