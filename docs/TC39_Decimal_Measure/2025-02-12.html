<!DOCTYPE html><html><head>
  <title>TC39 Decimal_Measure on 2025-02-12</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "TC39 Decimal_Measure";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">TC39 Decimal_Measure<br>2025-02-12<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2025-01-22" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search TC39 Decimal_Measure">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed Feb 12 2025 03:42:51 GMT-0800 (Pacific Standard Time)">11:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@eemeli:mozilla.org">eemeli</span>&gt;</div></td><td class="msg-cell"><p>Looking over and considering <span class="nick-16">Jesse</span>'s upcoming Decimal/Measure presentation and explainer, I get the sense that we really ought to find a way to reach the end goals here in multiple smaller steps, rather than one big leap. By Decimal normalising trailing zeros, the use cases for them introduce a dependency on Measure, but it gets a bit hairy if Measure then also depends on Decimal for its value representation.</p>
<p>What if we were to initially not include <em>any</em> conversions in Measure? Then we wouldn't need to change its inputs at all, and we would still be providing a way for Intl.NumberFormat and Intl.MessageFormat to get their formattable inputs as a combined value+units+precision package.</p>
<p>Then we could consider separately the Smart Units part of this whole thing adding unit conversions, and Decimal defining its accessors on Measure, and we'd avoid having everythin depend on everything else.</p>
</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Feb 12 2025 04:11:38 GMT-0800 (Pacific Standard Time)">12:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@eemeli:mozilla.org">eemeli</span>&gt;</div></td><td class="msg-cell">Here's a sketch of what that might look like: <a href="https://gist.github.com/eemeli/0bd413d2f711cbd6016673af8d68c38c">https://gist.github.com/eemeli/0bd413d2f711cbd6016673af8d68c38c</a>

That's in TS, so the real thing would need to have appropriate runtime checks for the types. The lack of any methods on the class is quite intentional, as is freezing it.

I'm also starting to think that we might want to call this "Amount" rather than "Measure", mostly because then it also makes sense for currencies: it feels really clumsy to talk of a "measure of money", whereas an "amount of money" (or anything else, really) makes more sense.</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed Feb 12 2025 04:17:23 GMT-0800 (Pacific Standard Time)">12:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jesse:igalia.com">Jesse</span>&gt;</div></td><td class="msg-cell">thanks!</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Feb 12 2025 04:18:49 GMT-0800 (Pacific Standard Time)">12:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jesse:igalia.com">Jesse</span>&gt;</div></td><td class="msg-cell">happy to discuss another name</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Feb 12 2025 04:19:34 GMT-0800 (Pacific Standard Time)">12:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jesse:igalia.com">Jesse</span>&gt;</div></td><td class="msg-cell">"measure" suggests physical quantities and (it feels like) is excludes currencies; "amount" clearly includes currencies but (to my mind) weakly excludes other kinds of measurements</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Feb 12 2025 04:22:29 GMT-0800 (Pacific Standard Time)">12:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jesse:igalia.com">Jesse</span>&gt;</div></td><td class="msg-cell">shouldn't we have a toLocaleString or at least toString in Amounts?</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Feb 12 2025 04:29:36 GMT-0800 (Pacific Standard Time)">12:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jesse:igalia.com">Jesse</span>&gt;</div></td><td class="msg-cell">I wonder if want to tie in to ISO 4217 (standardization of currencies) somehow or whether measure/amount is merely any tagged number (or string, or bigint) at all</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed Feb 12 2025 04:30:09 GMT-0800 (Pacific Standard Time)">12:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jesse:igalia.com">Jesse</span>&gt;</div></td><td class="msg-cell"><code>new Amount(42.75, "foobar gramz")</code></td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed Feb 12 2025 04:30:55 GMT-0800 (Pacific Standard Time)">12:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jesse:igalia.com">Jesse</span>&gt;</div></td><td class="msg-cell">I like the simplicity of the zero-method approach but I wonder if this deflates the value-add too much</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed Feb 12 2025 04:31:28 GMT-0800 (Pacific Standard Time)">12:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jesse:igalia.com">Jesse</span>&gt;</div></td><td class="msg-cell">one of the nice value-add parts of measure, to my mind, was its tie-in to CLDR's units.xml</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed Feb 12 2025 04:31:49 GMT-0800 (Pacific Standard Time)">12:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jesse:igalia.com">Jesse</span>&gt;</div></td><td class="msg-cell">exposing new capabilities to the language, rather than merely attaching a string to a number</td></tr>

</tbody></table></div></div></div>
</body></html>