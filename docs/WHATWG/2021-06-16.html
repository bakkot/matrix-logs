<!DOCTYPE html><html><head>
  <title>WHATWG on 2021-06-16</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2021-06-16<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2021-06-15" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/" class="current-room">WHATWG</a></li>
</ul>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs"><div class="log">
<table><tbody id="log-tbody">
  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Jun 15 2021 17:06:03 GMT-0700 (Pacific Daylight Time)">00:06</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title="@andreubotella:mozilla.org">Andreu Botella (he/they)</span>&gt;</td><td class="msg-cell"><mx-reply><blockquote> SVG only shows up in some cases. PNG works everywhere.</blockquote></mx-reply>Huh, apparently the <a href="http://matrix.org">matrix.org</a> homeserver is buggy when making thumbnails for SVG images, but the <a href="http://mozilla.org">mozilla.org</a> homeserver isn't</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Jun 15 2021 23:36:21 GMT-0700 (Pacific Daylight Time)">06:36</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</td><td class="msg-cell"><span class="nick-1">Domenic</span>: you should be able to navigate a nested context to a data: URL (there's an open PR by me on forbidding it for top-level contexts with some open questions)</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Jun 15 2021 23:37:35 GMT-0700 (Pacific Daylight Time)">06:37</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</td><td class="msg-cell">(I changed the avatar to a PNG)</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Jun 16 2021 00:01:19 GMT-0700 (Pacific Daylight Time)">07:01</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title="@dereknongeneric:mozilla.org">DerekNonGeneric</span>&gt;</td><td class="msg-cell">wfm</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Jun 16 2021 00:02:18 GMT-0700 (Pacific Daylight Time)">07:02</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title="@dereknongeneric:mozilla.org">DerekNonGeneric</span>&gt;</td><td class="msg-cell">fwf, i know for a fact svgs work since that is what i used for my own room</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Jun 16 2021 00:03:16 GMT-0700 (Pacific Daylight Time)">07:03</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title="@dereknongeneric:mozilla.org">DerekNonGeneric</span>&gt;</td><td class="msg-cell">no clue if there are attributes missing on y'alls (perhaps a case of over-optimization)</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Jun 16 2021 00:06:04 GMT-0700 (Pacific Daylight Time)">07:06</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title="@andreubotella:mozilla.org">Andreu Botella (he/they)</span>&gt;</td><td class="msg-cell">The issue is <a href="https://github.com/matrix-org/synapse/issues/1309">https://github.com/matrix-org/synapse/issues/1309</a></td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed Jun 16 2021 00:06:43 GMT-0700 (Pacific Daylight Time)">07:06</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title="@andreubotella:mozilla.org">Andreu Botella (he/they)</span>&gt;</td><td class="msg-cell">I don't know why it works on <a href="http://mozilla.org">mozilla.org</a> though, since it also seems to use Synapse</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed Jun 16 2021 00:11:36 GMT-0700 (Pacific Daylight Time)">07:11</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title="@dereknongeneric:mozilla.org">DerekNonGeneric</span>&gt;</td><td class="msg-cell">tbh, not entirely sure how important it is to have a non-lossy image format at this point</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed Jun 16 2021 00:13:30 GMT-0700 (Pacific Daylight Time)">07:13</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title="@dereknongeneric:mozilla.org">DerekNonGeneric</span>&gt;</td><td class="msg-cell">guess the room preview @ <a href="https://matrix.to/#/#whatwg:matrix.org">https://matrix.to/#/#whatwg:matrix.org</a> will remain relatively small</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed Jun 16 2021 00:14:56 GMT-0700 (Pacific Daylight Time)">07:14</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title="@dereknongeneric:mozilla.org">DerekNonGeneric</span>&gt;</td><td class="msg-cell">oh, but when you click on the room image in the element web app it takes up <em>the entire</em> screen</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed Jun 16 2021 00:15:11 GMT-0700 (Pacific Daylight Time)">07:15</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title="@dereknongeneric:mozilla.org">DerekNonGeneric</span>&gt;</td><td class="msg-cell">oof, that is less than ideal</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed Jun 16 2021 00:25:40 GMT-0700 (Pacific Daylight Time)">07:25</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title="@mayeul:mayeul.net">MayeulC</span>&gt;</td><td class="msg-cell"><mx-reply><blockquote> i was sort of expecting the icon to live on the same server as the room itself (<a href="http://matrix.org">matrix.org</a> afaik for this room)</blockquote></mx-reply>Rooms exist on all participating servers at the same time; media such as images are also duplicated. You can replace <a href="http://matrix-client.matrix.org">matrix-client.matrix.org</a> by any other participating homeserver and still get the media. For instance, <a href="https://mayeul.net/_matrix/media/r0/download/mozilla.org/cab85c2fc275cb19f0276f7dd2ba4af349b0223f">here is the room logo on my server</a>, <a href="https://kde.modular.im/_matrix/media/r0/download/mozilla.org/cab85c2fc275cb19f0276f7dd2ba4af349b0223f">KDE's</a>, <a href="https://mozilla.modular.im/_matrix/media/r0/download/mozilla.org/cab85c2fc275cb19f0276f7dd2ba4af349b0223f">Mozilla's</a>.</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Wed Jun 16 2021 00:26:07 GMT-0700 (Pacific Daylight Time)">07:26</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title="@mayeul:mayeul.net">MayeulC</span>&gt;</td><td class="msg-cell"><mx-reply><blockquote> i was sort of expecting the icon to live on the same server as the room itself (<a href="http://matrix.org">matrix.org</a> afaik for this room)</blockquote></mx-reply> * Rooms exist on all participating servers at the same time; media such as images is also duplicated. You can replace <a href="http://matrix-client.matrix.org">matrix-client.matrix.org</a> by any other participating homeserver and still get the media. For instance, <a href="https://mayeul.net/_matrix/media/r0/download/mozilla.org/cab85c2fc275cb19f0276f7dd2ba4af349b0223f">here is the room logo on my server</a>, <a href="https://kde.modular.im/_matrix/media/r0/download/mozilla.org/cab85c2fc275cb19f0276f7dd2ba4af349b0223f">KDE's</a>, <a href="https://mozilla.modular.im/_matrix/media/r0/download/mozilla.org/cab85c2fc275cb19f0276f7dd2ba4af349b0223f">Mozilla's</a>.</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed Jun 16 2021 00:27:39 GMT-0700 (Pacific Daylight Time)">07:27</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title="@mayeul:mayeul.net">MayeulC</span>&gt;</td><td class="msg-cell">And your client fetches the media from your own homeserver (which will fetch it from the federation if not available; currently synapse only asks the originating homeserver).</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed Jun 16 2021 01:16:55 GMT-0700 (Pacific Daylight Time)">08:16</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title="@dereknongeneric:mozilla.org">DerekNonGeneric</span>&gt;</td><td class="msg-cell"><mx-reply><blockquote> I don't know why it works on <a href="http://mozilla.org">mozilla.org</a> though, since it also seems to use Synapse</blockquote></mx-reply><span class="nick-11">Andreu Botella (he/they)</span>: can you give me an example of it working on <a href="http://mozilla.org">mozilla.org</a>? do you mean <code><a href="http://chat.mozilla.org">chat.mozilla.org</a>?</code></td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Wed Jun 16 2021 01:21:21 GMT-0700 (Pacific Daylight Time)">08:21</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title="@andreubotella:mozilla.org">Andreu Botella (he/they)</span>&gt;</td><td class="msg-cell">Right now the logo is a PNG, but If you have your user account registered on the <a href="http://mozilla.org">mozilla.org</a> homeserver, you could see the logo before</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Wed Jun 16 2021 01:26:09 GMT-0700 (Pacific Daylight Time)">08:26</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title="@dereknongeneric:mozilla.org">DerekNonGeneric</span>&gt;</td><td class="msg-cell"><mx-reply><blockquote> Right now the logo is a PNG, but If you have your user account registered on the <a href="http://mozilla.org">mozilla.org</a> homeserver, you could see the logo before</blockquote></mx-reply>my user acc is on <a href="http://mozilla.org">mozilla.org</a> and i was not able to see the logo previously as it was an svg</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Wed Jun 16 2021 01:30:29 GMT-0700 (Pacific Daylight Time)">08:30</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title="@andreubotella:mozilla.org">Andreu Botella (he/they)</span>&gt;</td><td class="msg-cell">I don't know, but when I was testing this last night, downloading the logo with the <code>download</code> API worked on both my usual <a href="http://mozilla.org">mozilla.org</a> account and on a test <a href="http://matrix.org">matrix.org</a> account, but the <code>thumbnail</code> API gave a 404 on the <a href="http://matrix.org">matrix.org</a> account</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Wed Jun 16 2021 01:30:46 GMT-0700 (Pacific Daylight Time)">08:30</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title="@andreubotella:mozilla.org">Andreu Botella (he/they)</span>&gt;</td><td class="msg-cell"><a href="https://matrix.org/docs/spec/client_server/r0.6.1#get-matrix-media-r0-download-servername-mediaid">https://matrix.org/docs/spec/client_server/r0.6.1#get-matrix-media-r0-download-servername-mediaid</a></td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Wed Jun 16 2021 01:31:57 GMT-0700 (Pacific Daylight Time)">08:31</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title="@dereknongeneric:mozilla.org">DerekNonGeneric</span>&gt;</td><td class="msg-cell">none of the rooms in the <a href="http://mozilla.org">mozilla.org</a> homeserver seem to be using an svg afaict</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Wed Jun 16 2021 01:34:36 GMT-0700 (Pacific Daylight Time)">08:34</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title="@dereknongeneric:mozilla.org">DerekNonGeneric</span>&gt;</td><td class="msg-cell"><blockquote>
[...] but the <code>thumbnail</code> API gave a 404 on the <a href="http://matrix.org">matrix.org</a> account
</blockquote>
</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Wed Jun 16 2021 01:34:40 GMT-0700 (Pacific Daylight Time)">08:34</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title="@dereknongeneric:mozilla.org">DerekNonGeneric</span>&gt;</td><td class="msg-cell">ditto here</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Wed Jun 16 2021 06:04:54 GMT-0700 (Pacific Daylight Time)">13:04</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title="@fbraun:mozilla.org">freddy</span>&gt;</td><td class="msg-cell">i saw the logo before the change and still see it now. Fwiw we use <a href="https://matrix.to/#/#synchronicity:mozilla.org">#synchronicity:mozilla.org</a> for debugging and discussing these types of issues. at least it's the "mozilla gateway to the matrix devs".. :) not sure if that helps</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Wed Jun 16 2021 11:35:19 GMT-0700 (Pacific Daylight Time)">18:35</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title="@dereknongeneric:mozilla.org">DerekNonGeneric</span>&gt;</td><td class="msg-cell"><mx-reply><blockquote> i saw the logo before the change and still see it now. Fwiw we use <a href="https://matrix.to/#/#synchronicity:mozilla.org">#synchronicity:mozilla.org</a> for debugging and discussing these types of issues. at least it's the "mozilla gateway to the matrix devs".. :) not sure if that helps</blockquote></mx-reply><p><span class="nick-14">freddy</span>: thanks, good to know (guess id ask in there before making any future support request). to be clear tho, afaict the issue might not be exclusive to mozilla matrix infra (404s were at least coming from <code>https:<a href="http://matrix-client.matrix.org">matrix-client.matrix.org</a></code> when i checked (altho would not be surprised if <code><a href="https://mozilla.modular.im">https://mozilla.modular.im</a></code> does the same); the docs to exact api that is senselessly failing <a href="https://matrix.org/docs/spec/client_server/r0.6.1#id404">were linked above</a> by <span class="nick-11">Andreu Botella (he/they)</span> (thnx!), but seems like we needed to dig further..</p>
<blockquote>
<p>The homeserver SHOULD be able to supply thumbnails for uploaded images and videos. The exact file types which can be thumbnailed are not currently specified [...]<br>— <a href="https://matrix.org/docs/spec/client_server/r0.6.1#id407">https://matrix.org/docs/spec/client_server/r0.6.1#id407</a></p>
</blockquote>
<blockquote>
<p>[...] with the exception of SVG which is particularly vulnerable to exploding clients thanks to billion lol attacks.<br>— <a href="https://github.com/matrix-org/matrix-doc/issues/1938#issue-424877225">https://github.com/matrix-org/matrix-doc/issues/1938#issue-424877225</a></p>
</blockquote>
<p>XXXbz? the api in question does not currently specify which media formats are supported (or perhaps, more importantly, <em>unsupported</em>), but one of the peeps in that issue seems to have safety concerns, particularly w/ <em>svg thumbnails</em> for some reason</p>
</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Wed Jun 16 2021 11:37:35 GMT-0700 (Pacific Daylight Time)">18:37</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title="@andreubotella:mozilla.org">Andreu Botella (he/they)</span>&gt;</td><td class="msg-cell"><span class="nick-9">DerekNonGeneric</span>: I think the difference with thumbnails is that the homeserver doesn't have to process the full-res image, it can just store it as is. But for generating thumbnails, the homeserver has to parse the image, and the billion laughs attack is a well known denial of service attack against XML formats</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Wed Jun 16 2021 11:38:23 GMT-0700 (Pacific Daylight Time)">18:38</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title="@andreubotella:mozilla.org">Andreu Botella (he/they)</span>&gt;</td><td class="msg-cell"><a href="https://en.wikipedia.org/wiki/Billion_laughs_attack">https://en.wikipedia.org/wiki/Billion_laughs_attack</a></td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Wed Jun 16 2021 11:42:31 GMT-0700 (Pacific Daylight Time)">18:42</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title="@dereknongeneric:mozilla.org">DerekNonGeneric</span>&gt;</td><td class="msg-cell">oh wow, til -- thanks!</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Wed Jun 16 2021 11:46:31 GMT-0700 (Pacific Daylight Time)">18:46</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title="@dereknongeneric:mozilla.org">DerekNonGeneric</span>&gt;</td><td class="msg-cell">wonder if <code>https:<a href="http://matrix-client.matrix.org">matrix-client.matrix.org</a></code> was forced to block that format for this api due to shenanigans</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Wed Jun 16 2021 11:49:26 GMT-0700 (Pacific Daylight Time)">18:49</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title="@andreubotella:mozilla.org">Andreu Botella (he/they)</span>&gt;</td><td class="msg-cell">From a quick look at the code, it seems like the development version of Synapse doesn't generate thumbnails for SVGs, so it's not a <a href="http://matrix.org">matrix.org</a> only thing</td></tr>
</tbody></table>
</div></div></div>
</body></html>