<!DOCTYPE html><html><head>
  <title>WHATWG on 2022-04-08</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "WHATWG";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2022-04-08<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-04-06" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Fri Apr 08 2022 06:12:01 GMT-0700 (Pacific Daylight Time)">13:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@mrkishi:matrix.org">mrkishi</span>&gt;</div></td><td class="msg-cell"><p>hey, folks! i think there's a couple of issues with the <a href="https://html.spec.whatwg.org/multipage/parsing.html#named-character-reference-state">named character reference state</a> in the html spec but i wanted to check i'm not missing anything before filing an issue...</p>
<ul>
<li>the example says character references are not parsed in attributes, but this is not reflected in the algorithm. wouldn't a properly matched name fall in the <code>if there's a match &gt; otherwise</code> branch? (if inside attribute AND last not a semicolon AND followed by either equals or alphanumeric, then flush it, <em>otherwise</em>...)</li>
<li>while browsers will indeed not parse <code>&amp;notit;</code> in attributes, they'll parse at least <code>&amp;amp;</code>, <code>&amp;quot;</code> and <code>&amp;apos;</code>, so even if the example is right it doesn't seem to be the whole story</li>
</ul>
<p>does this seem right?</p>
</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Fri Apr 08 2022 07:35:28 GMT-0700 (Pacific Daylight Time)">14:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@yasijavan:matrix.org">Yaser Nojavan gol</span>&gt;</div></td><td class="msg-cell">Hi</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Fri Apr 08 2022 07:35:53 GMT-0700 (Pacific Daylight Time)">14:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@vrafaeli:matrix.org">vrafaeli</span>&gt;</div></td><td class="msg-cell">Anyone knows what the hack is going on with iframe:
<a href="https://codesandbox.io/s/iframe-size-bug-bb3hgi?file=/src/App.tsx">https://codesandbox.io/s/iframe-size-bug-bb3hgi?file=/src/App.tsx</a>
Why is it 10% bigger than the defined size? same in Chrome and Mozilla

(The space on the right seems to be of the size of the vetical scrollbar, which is not there. Perhaps the same is true for the bottom excessive size.)</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Fri Apr 08 2022 07:52:06 GMT-0700 (Pacific Daylight Time)">14:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@emilio:mozilla.org">emilio</span>&gt;</div></td><td class="msg-cell">Without having looked in depth (on the phone) iframes have borders by default, and the default box-sizing is content-box, so the width is what you specified plus borders</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Fri Apr 08 2022 08:03:22 GMT-0700 (Pacific Daylight Time)">15:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@vrafaeli:matrix.org">vrafaeli</span>&gt;</div></td><td class="msg-cell">You are correct about the fact that borders do exist. I noticed that also. But the borders are only 2px big and removing them does reduce the size by negligible amount.</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Fri Apr 08 2022 08:05:14 GMT-0700 (Pacific Daylight Time)">15:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@vrafaeli:matrix.org">vrafaeli</span>&gt;</div></td><td class="msg-cell">Seems like the additional size is (borders +) scrollbar</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Fri Apr 08 2022 08:06:44 GMT-0700 (Pacific Daylight Time)">15:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@vrafaeli:matrix.org">vrafaeli</span>&gt;</div></td><td class="msg-cell">first is with the 2px iframe border, second is without that</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Fri Apr 08 2022 08:50:40 GMT-0700 (Pacific Daylight Time)">15:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@emilio:mozilla.org">emilio</span>&gt;</div></td><td class="msg-cell"><span class="nick-5">vrafaeli</span>: ok at the computer now. Other than the border, what you're seeing is that the iframe is baseline-aligned by default. You can avoid that with <code>display: block</code>, for example</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Fri Apr 08 2022 08:51:02 GMT-0700 (Pacific Daylight Time)">15:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@emilio:mozilla.org">emilio</span>&gt;</div></td><td class="msg-cell"><code>&lt;iframe&gt;</code> is <code>display: inline</code> by default, like <code>&lt;img&gt;</code> and other replaced elements</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Fri Apr 08 2022 08:52:26 GMT-0700 (Pacific Daylight Time)">15:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@emilio:mozilla.org">emilio</span>&gt;</div></td><td class="msg-cell">Also <code>vertical-align: top</code> would work in your example</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Fri Apr 08 2022 08:52:32 GMT-0700 (Pacific Daylight Time)">15:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@emilio:mozilla.org">emilio</span>&gt;</div></td><td class="msg-cell">Anyways that's all behaving as expected</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Fri Apr 08 2022 08:57:51 GMT-0700 (Pacific Daylight Time)">15:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@vrafaeli:matrix.org">vrafaeli</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-5">vrafaeli</span>: ok at the computer now. Other than the border, what you're seeing is that the iframe is baseline-aligned by default. You can avoid that with <code>display: block</code>, for example</blockquote></mx-reply>I see. Thanks a lot.</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Fri Apr 08 2022 10:11:45 GMT-0700 (Pacific Daylight Time)">17:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">mrkishi</span>: it's an example, by necessity it's not the whole story; and it's an example about a very specific instance so generalizing from it in that way would be wrong</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Fri Apr 08 2022 10:13:00 GMT-0700 (Pacific Daylight Time)">17:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@mrkishi:matrix.org">mrkishi</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-15">mrkishi</span>: it's an example, by necessity it's not the whole story; and it's an example about a very specific instance so generalizing from it in that way would be wrong</blockquote></mx-reply>right, but the example isn't reflected in the algorithm, and neither is current browser behavior... unless i'm missing something?</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Fri Apr 08 2022 10:14:23 GMT-0700 (Pacific Daylight Time)">17:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@mrkishi:matrix.org">mrkishi</span>&gt;</div></td><td class="msg-cell">i know examples aren't normative :p</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Fri Apr 08 2022 10:14:57 GMT-0700 (Pacific Daylight Time)">17:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">mrkishi</span>: I'm pretty sure the example is correct</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Fri Apr 08 2022 10:16:37 GMT-0700 (Pacific Daylight Time)">17:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@mrkishi:matrix.org">mrkishi</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-15">mrkishi</span>: I'm pretty sure the example is correct</blockquote></mx-reply><p>what's your interpretation of this, then?</p>
<blockquote>
<p>If the character reference was consumed as part of an attribute, and the last character matched is not a U+003B SEMICOLON character (;), and the next input character is either a U+003D EQUALS SIGN character (=) or an ASCII alphanumeric, then, for historical reasons, flush code points consumed as a character reference and switch to the return state.</p>
<p>Otherwise:</p>
</blockquote>
<p>and where is the <code>&amp;amp;</code>, <code>&amp;apos;</code> and <code>&amp;quot;</code> exceptions handled?</p>
</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Fri Apr 08 2022 10:17:12 GMT-0700 (Pacific Daylight Time)">17:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">Well, you need to start with the first paragraph of <a href="https://html.spec.whatwg.org/multipage/parsing.html#named-character-reference-state">https://html.spec.whatwg.org/multipage/parsing.html#named-character-reference-state</a></td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Fri Apr 08 2022 10:17:50 GMT-0700 (Pacific Daylight Time)">17:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">For <code>&amp;notit;</code> that gives you <code>not</code> in the table, as the example says. So you have a match.</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Fri Apr 08 2022 10:18:15 GMT-0700 (Pacific Daylight Time)">17:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">But say you're parsing an attribute it won't work as it doesn't end in <code>;</code></td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Fri Apr 08 2022 10:18:35 GMT-0700 (Pacific Daylight Time)">17:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">But if the input was <code>&amp;quot;</code> it would, since that does end in <code>;</code></td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Fri Apr 08 2022 10:18:37 GMT-0700 (Pacific Daylight Time)">17:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@mrkishi:matrix.org">mrkishi</span>&gt;</div></td><td class="msg-cell">oh, i'm an idiot.</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Fri Apr 08 2022 10:19:02 GMT-0700 (Pacific Daylight Time)">17:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@mrkishi:matrix.org">mrkishi</span>&gt;</div></td><td class="msg-cell">this whole time i thought not's named reference was <code>&amp;notit;</code></td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Fri Apr 08 2022 10:19:03 GMT-0700 (Pacific Daylight Time)">17:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">Well, I wouldn't go that far; reading specifications is a skill you need to learn</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Fri Apr 08 2022 10:20:00 GMT-0700 (Pacific Daylight Time)">17:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@mrkishi:matrix.org">mrkishi</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Well, I wouldn't go that far; reading specifications is a skill you need to learn</blockquote></mx-reply>i have some other pretty convincing rationale, but i'll spare you the details</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Fri Apr 08 2022 10:20:05 GMT-0700 (Pacific Daylight Time)">17:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">And even then it can be involved 🙂</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Fri Apr 08 2022 10:20:25 GMT-0700 (Pacific Daylight Time)">17:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@mrkishi:matrix.org">mrkishi</span>&gt;</div></td><td class="msg-cell">thanks for taking a look and so sorry for wasting your time.</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Fri Apr 08 2022 10:20:45 GMT-0700 (Pacific Daylight Time)">17:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">No worries, was fun to learn this again!</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Fri Apr 08 2022 13:53:31 GMT-0700 (Pacific Daylight Time)">20:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@yasijavan:matrix.org">Yaser Nojavan gol</span>&gt;</div></td><td class="msg-cell"><span class="nick-5">vrafaeli</span>: </td></tr>

</tbody></table></div></div></div>
</body></html>