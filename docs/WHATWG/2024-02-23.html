<!DOCTYPE html><html><head>
  <title>WHATWG on 2024-02-23</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "WHATWG";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2024-02-23<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2024-02-22" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Thu Feb 22 2024 18:30:18 GMT-0800 (Pacific Standard Time)">02:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Quick question regarding whatwg participant data, I originally signed up as an indivual but am now part of the Igalia organisation. Do I need to remove myself from <a href="https://github.com/whatwg/participant-data/blob/main/individuals.json">https://github.com/whatwg/participant-data/blob/main/individuals.json</a> or will the system handle it?</blockquote></mx-reply>Removing yourself would be nice, but nothing bad will happen if you don't</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Fri Feb 23 2024 03:55:43 GMT-0800 (Pacific Standard Time)">11:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">sideshowbarker</span>: thanks for <a href="https://github.com/WebKit/WebKit/pull/24735">https://github.com/WebKit/WebKit/pull/24735</a> ! I haven't checked the patch closely, but note that for drag and drop the <code>textInput</code> event is fired first in both Chromium and WebKit today, and there's no spec yet for <code>textInput</code> for drag and drop. (There's also no spec for <code>beforeinput</code>/<code>input</code> for drag and drop.)</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Fri Feb 23 2024 04:08:12 GMT-0800 (Pacific Standard Time)">12:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">sideshowbarker</span>: I think it would make sense to change the event order for drag and drop so that it's consistent with other editing operations, but I have no data if it's web compatible.</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Fri Feb 23 2024 04:12:18 GMT-0800 (Pacific Standard Time)">12:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">Thanks —&nbsp;as far as that WebKit <code>textInput</code> patch goes, I haven’t looked at the drag-and-drop test cases for that, but I guess my patch as currently written is changing the order for drag-and-drop too (that is, so <code>beforeinput</code> would now be fired first there too).</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Fri Feb 23 2024 04:14:02 GMT-0800 (Pacific Standard Time)">12:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">I think it’d likely take some significant more work to special-case the change such that for drag-and-drop it goes back to (stays at) the <code>textInput</code>-first state.</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Fri Feb 23 2024 04:17:07 GMT-0800 (Pacific Standard Time)">12:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">When I started on that patch at the beginning of the week, I had naïvely imagined that just changing the order of the events would be a pretty simple thing to implement. But… it’s not been. I don’t know about the code for those events in other engines, but in WebKit the way it happens — the way it’s coded — doesn’t at all easily facilitate flipping the order.</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Fri Feb 23 2024 04:19:39 GMT-0800 (Pacific Standard Time)">12:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">But that said, until this patch, I had never actually looked at the input-events code — the editing code — in WebKit. So it’s kind of a case where probably 80% of my effort has effectively been around getting familiar with that code and what it’s doing, and where.</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Fri Feb 23 2024 04:21:09 GMT-0800 (Pacific Standard Time)">12:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">For the code owners or somebody else already somewhat familiar with that code, it’d be much easier.</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Fri Feb 23 2024 04:26:56 GMT-0800 (Pacific Standard Time)">12:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">Among other things, handling the requirement to not fire <code>textInput</code> for Enter keypresses in <code>input</code> elements turned out to be one thing that didn’t work (regressed) after I first implemented the patch —&nbsp;and it wasn’t clear to me why it wasn’t working any longer, and how/where in the code I needed to fix it. But it basically amounted to re-implementing the check in a completely separate part of the code from where (in the <code>HTMLInputElement</code> code itself) the existing check is.</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Fri Feb 23 2024 04:29:32 GMT-0800 (Pacific Standard Time)">12:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">And all that said, I’m just assuming (hoping) the way I went about implementing it is actually the right/acceptable way to do it. But… it hasn’t actually been reviewed at all yet. So who knows, I may end up getting told by reviewers that the way I approached it is not the right way to go about it at all.</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Fri Feb 23 2024 04:34:13 GMT-0800 (Pacific Standard Time)">12:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">zcorpan</span>: Anyway, I’d be happy if/when you have a few minutes, you might take a look at the 4 tests in the <strong>Tests that failed text/pixel/audio diff</strong> list at the top of <a href="https://ews-build.s3-us-west-2.amazonaws.com/macOS-Monterey-Release-WK2-Tests-EWS/89ef9249-36849/results.html">https://ews-build.s3-us-west-2.amazonaws.com/macOS-Monterey-Release-WK2-Tests-EWS/89ef9249-36849/results.html</a>. Those are tests that my patch regressed. I haven’t looked at them much yet to figure out what I need to do for them (if anything — since for any given test, it’s possible it could turn out that the test is deficient and I need to update/fix the test/results, rather than the code in my patch)</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Fri Feb 23 2024 04:36:21 GMT-0800 (Pacific Standard Time)">12:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">And if you look at <a href="https://github.com/WebKit/WebKit/pull/24735#issuecomment-1960782141">https://github.com/WebKit/WebKit/pull/24735#issuecomment-1960782141</a> there are some other tests that regressed on other ports/platforms that I still need to look at too. (And this is all after having fixed earlier regressions in previous iterations of the patch)</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Fri Feb 23 2024 04:41:44 GMT-0800 (Pacific Standard Time)">12:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">And it sure would be nicer if could be working from the WPT tests at <a href="https://github.com/web-platform-tests/wpt/pull/44472">https://github.com/web-platform-tests/wpt/pull/44472</a> — but as I noted in <a href="https://bugs.webkit.org/show_bug.cgi?id=268988#c3">https://bugs.webkit.org/show_bug.cgi?id=268988#c3</a>, those tests can’t be run as expected in the normal WebKit test environment, due to its testdriver not yet implementing whatever those WPT test are relying on to automate the key sending and form-control filling.</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Fri Feb 23 2024 05:32:10 GMT-0800 (Pacific Standard Time)">13:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">sideshowbarker</span>: <a href="https://ews-build.s3-us-west-2.amazonaws.com/macOS-Monterey-Release-WK2-Tests-EWS/89ef9249-36849/editing/pasteboard/paste-text-events-diff.txt">https://ews-build.s3-us-west-2.amazonaws.com/macOS-Monterey-Release-WK2-Tests-EWS/89ef9249-36849/editing/pasteboard/paste-text-events-diff.txt</a> "textInputCount should be 6. Was 12." seems like a real regression</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Fri Feb 23 2024 05:32:28 GMT-0800 (Pacific Standard Time)">13:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">yeah</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Fri Feb 23 2024 05:33:37 GMT-0800 (Pacific Standard Time)">13:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">working on the other ones now; adding an (additional) <code>if (inputType == "insertText"_s || inputType == "insertParagraph"_s || inputType == "insertLineBreak"_s)</code> check…</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Fri Feb 23 2024 05:47:25 GMT-0800 (Pacific Standard Time)">13:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell">The flashbacks with these tests <a href="http://wpt.live/html/editing/dnd/selection/">http://wpt.live/html/editing/dnd/selection/</a></td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Fri Feb 23 2024 05:48:53 GMT-0800 (Pacific Standard Time)">13:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">Flashbacks?</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Fri Feb 23 2024 05:49:15 GMT-0800 (Pacific Standard Time)">13:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell">from Opera times</td></tr>

</tbody></table></div></div></div>
</body></html>