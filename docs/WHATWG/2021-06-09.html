<!DOCTYPE html><html><head>
  <title>WHATWG on 2021-06-09</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2021-06-09<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2021-06-08" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/" class="current-room">WHATWG</a></li>
</ul>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs"><div class="log">
<table><tbody id="log-tbody">
  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed Jun 09 2021 02:02:33 GMT-0700 (Pacific Daylight Time)">09:02</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title="@davidmaxwaterman:matrix.org">Max</span>&gt;</td><td class="msg-cell"><mx-reply><blockquote> It would be very useful, I think, so have an API that returned the width of the image in the file that is downloaded, prior to browser interventions.</blockquote></mx-reply>Does anyone else think this would be useful too? ...or is it basically 'not going to happen'?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Jun 09 2021 02:17:33 GMT-0700 (Pacific Daylight Time)">09:17</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title="@zcorpan_:matrix.org">zcorpan</span>&gt;</td><td class="msg-cell"><span class="nick-10">Max</span>: the spec doesn't account for browser interventions for low memory devices. Maybe it could be argued that such interventions should not have observable effects on APIs such as naturalWidth</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed Jun 09 2021 02:23:42 GMT-0700 (Pacific Daylight Time)">09:23</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title="@zcorpan_:matrix.org">zcorpan</span>&gt;</td><td class="msg-cell">But since the intervention seems to be to make images smaller to not run out of memory, maybe there's no great option. The spec could allow it to happen and expose a new property to let the page know that it did (and how much it was scaled)</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Jun 09 2021 02:25:06 GMT-0700 (Pacific Daylight Time)">09:25</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title="@davidmaxwaterman:matrix.org">Max</span>&gt;</td><td class="msg-cell">yeah. I'm really just looking for the information provided in the dev tools - I forget exactly the wording, but the information is there, so I guess it's available somewhere.</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Jun 09 2021 02:25:54 GMT-0700 (Pacific Daylight Time)">09:25</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title="@zcorpan_:matrix.org">zcorpan</span>&gt;</td><td class="msg-cell"><span class="nick-10">Max</span>: see <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1187043#c9">https://bugs.chromium.org/p/chromium/issues/detail?id=1187043#c9</a></td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Jun 09 2021 02:29:45 GMT-0700 (Pacific Daylight Time)">09:29</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title="@davidmaxwaterman:matrix.org">Max</span>&gt;</td><td class="msg-cell">ah, dev tools says 'intrinsic size' and that remains the 'correct' size :)</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Jun 09 2021 02:30:15 GMT-0700 (Pacific Daylight Time)">09:30</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title="@davidmaxwaterman:matrix.org">Max</span>&gt;</td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-10">Max</span>: see <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1187043#c9">https://bugs.chromium.org/p/chromium/issues/detail?id=1187043#c9</a></blockquote></mx-reply>Yeah, that's my bug ;)</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed Jun 09 2021 02:30:52 GMT-0700 (Pacific Daylight Time)">09:30</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title="@davidmaxwaterman:matrix.org">Max</span>&gt;</td><td class="msg-cell">I realise "there are ways"...just feel like it would be good to just expose the information since it's already there (assuming it is)</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed Jun 09 2021 02:31:37 GMT-0700 (Pacific Daylight Time)">09:31</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title="@davidmaxwaterman:matrix.org">Max</span>&gt;</td><td class="msg-cell">I suppose I'm wondering how certain the 'AFAIK/CT' is in that message...</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed Jun 09 2021 02:32:06 GMT-0700 (Pacific Daylight Time)">09:32</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title="@zcorpan_:matrix.org">zcorpan</span>&gt;</td><td class="msg-cell"><span class="nick-10">Max</span>: I assume fs looked at the code</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed Jun 09 2021 02:33:20 GMT-0700 (Pacific Daylight Time)">09:33</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title="@davidmaxwaterman:matrix.org">Max</span>&gt;</td><td class="msg-cell">ok, fair enough. I already 'worked around' my actual issue...just following it up to see if there's any chance of getting the raw data in an api...perhaps there are more importnat things.</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed Jun 09 2021 02:37:20 GMT-0700 (Pacific Daylight Time)">09:37</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title="@zcorpan_:matrix.org">zcorpan</span>&gt;</td><td class="msg-cell">changes are always possible. I don't know if an API for this is a good thing long-term. I've added a comment in the chromium issue</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed Jun 09 2021 02:41:43 GMT-0700 (Pacific Daylight Time)">09:41</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title="@davidmaxwaterman:matrix.org">Max</span>&gt;</td><td class="msg-cell">ok, thanks for that.</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Wed Jun 09 2021 02:47:11 GMT-0700 (Pacific Daylight Time)">09:47</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title="@davidmaxwaterman:matrix.org">Max</span>&gt;</td><td class="msg-cell">Note that I'm not concerned about the UA scaling the image down, just that I have the dimensions of the original...</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed Jun 09 2021 02:47:28 GMT-0700 (Pacific Daylight Time)">09:47</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title="@davidmaxwaterman:matrix.org">Max</span>&gt;</td><td class="msg-cell">but anyway, I think I'm done with that. Thanks for your attention.</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed Jun 09 2021 02:50:28 GMT-0700 (Pacific Daylight Time)">09:50</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title="@zcorpan_:matrix.org">zcorpan</span>&gt;</td><td class="msg-cell">sure, but it could break other pages that don't know about this happening. trying to apply first principles, that interventions like this should be unobservable to the page if possible :)</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Wed Jun 09 2021 02:58:53 GMT-0700 (Pacific Daylight Time)">09:58</a></td><td class="nick-cell">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</td><td class="msg-cell"><span class="nick-12">annevk</span>: Is there consensus that a proposal for adding base64 encoding to <code>TextEncoder</code> / <code>TextDecoder</code> would be rejected? If not I'd like to write up a proposal.</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Wed Jun 09 2021 02:59:18 GMT-0700 (Pacific Daylight Time)">09:59</a></td><td class="nick-cell">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</td><td class="msg-cell">Only reference public issue somewhat related I could find is <a href="https://github.com/whatwg/encoding/issues/138">https://github.com/whatwg/encoding/issues/138</a></td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Wed Jun 09 2021 03:01:32 GMT-0700 (Pacific Daylight Time)">10:01</a></td><td class="nick-cell">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</td><td class="msg-cell">I assume this has been discussed before and rejected because semantically using a TextEncoder to <em>decode</em> base64 is kinda strange.</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Wed Jun 09 2021 03:12:36 GMT-0700 (Pacific Daylight Time)">10:12</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title="@andreubotella:mozilla.org">Andreu Botella (he/they)</span>&gt;</td><td class="msg-cell"><span class="nick-3">Luca Casonato</span>: The encoding standard and the <code>TextDecoder</code>/Encoder APIs are for <em>character</em> encodings, not something like base64.</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Wed Jun 09 2021 03:13:03 GMT-0700 (Pacific Daylight Time)">10:13</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title="@andreubotella:mozilla.org">Andreu Botella (he/they)</span>&gt;</td><td class="msg-cell">Even isomorphic encoding, which is technically a character encoding (Latin-1) is not a good fit for the standard as per the bug you linked.</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Wed Jun 09 2021 03:14:16 GMT-0700 (Pacific Daylight Time)">10:14</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title="@andreubotella:mozilla.org">Andreu Botella (he/they)</span>&gt;</td><td class="msg-cell">But I guess some version of <code>atob</code> that works on buffers could be added to the HTML spec</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Wed Jun 09 2021 03:15:13 GMT-0700 (Pacific Daylight Time)">10:15</a></td><td class="nick-cell">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</td><td class="msg-cell">Makes sense. Maybe a new BinaryEncoder / BinaryDecoder that can do base64 / hex?</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Wed Jun 09 2021 03:15:40 GMT-0700 (Pacific Daylight Time)">10:15</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title="@andreubotella:mozilla.org">Andreu Botella (he/they)</span>&gt;</td><td class="msg-cell">That might work</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Wed Jun 09 2021 04:16:48 GMT-0700 (Pacific Daylight Time)">11:16</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</td><td class="msg-cell"><span class="nick-3">timothygu</span>++ for <a href="https://chromium.googlesource.com/chromium/src/+/97d5f5cd25bf571c42ab167980873471389d0959">https://chromium.googlesource.com/chromium/src/+/97d5f5cd25bf571c42ab167980873471389d0959</a></td></tr>
</tbody></table>
</div></div></div>
</body></html>