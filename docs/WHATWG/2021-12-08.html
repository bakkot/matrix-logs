<!DOCTYPE html><html><head>
  <title>WHATWG on 2021-12-08</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "WHATWG";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2021-12-08<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2021-12-07" class="nav-link"><span>prev</span></a>
<a href="2021-12-09" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>
<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Dec 07 2021 16:28:40 GMT-0800 (Pacific Standard Time)">00:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@karlcow:mozilla.org">karlcow</span>&gt;</div></td><td class="msg-cell"><p><span class="nick-12">foolip</span>: Yet another area which is causing webcompat issues for Firefox because of wrong chrome behavior assumed good. <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1141209">https://bugs.chromium.org/p/chromium/issues/detail?id=1141209</a></p>
<p><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1400958">https://bugzilla.mozilla.org/show_bug.cgi?id=1400958</a></p>
<p><a href="https://bugs.webkit.org/show_bug.cgi?id=233956">https://bugs.webkit.org/show_bug.cgi?id=233956</a></p>
</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Dec 07 2021 17:48:14 GMT-0800 (Pacific Standard Time)">01:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@karlcow:mozilla.org">karlcow</span>&gt;</div></td><td class="msg-cell">good work here from <span class="nick-1">krosylight</span> about events across browsers <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1653882#c14">https://bugzilla.mozilla.org/show_bug.cgi?id=1653882#c14</a></td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Dec 07 2021 23:44:14 GMT-0800 (Pacific Standard Time)">07:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">kaleidea</span>: from a quick skim those seem to cover the topic, yes; I forgot I blogged about this stuff</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Dec 08 2021 00:20:15 GMT-0800 (Pacific Standard Time)">08:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@kaleidea:matrix.org">kaleidea</span>&gt;</div></td><td class="msg-cell"><p><span class="nick-12">annevk</span>: Thank you. Nice blog, btw. Quite interesting articles, too.</p>
<p>There are a few questions in relation if you have the time:</p>
<blockquote>
<p>custom elements has the is="" hack (which in retrospect I wish we never shipped)</p>
</blockquote>
<p>Although not related to the current topic, one day I'd be interested what other solution you prefer now: removal / other?</p>
<blockquote>
<p>WICG/webcomponents is prolly a better starting point</p>
</blockquote>
<p>The 4 discussions listed at  <a href="https://gist.github.com/Kaleidea/49055f021e7da814c233846a95115f96">https://gist.github.com/Kaleidea/49055f021e7da814c233846a95115f96</a><br>mentioned "various tools which key on local name, including JavaScript frameworks, HTML preprocessors and postprocessors, HTML conformance checkers", but did not refer to a research document that lists specific code examples or scenarios that would be affected. Is that research summarized somewhere?</p>
</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Dec 08 2021 00:30:30 GMT-0800 (Pacific Standard Time)">08:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><p><span class="nick-1">kaleidea</span>: it might be too late for removal, though Safari notably does not ship it; I think that would be better.</p>
<p>I don't think there's research, those were known facts by the participants who work on such code.</p>
</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Dec 08 2021 00:33:08 GMT-0800 (Pacific Standard Time)">08:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@kaleidea:matrix.org">kaleidea</span>&gt;</div></td><td class="msg-cell">Just to be clear: removal without an alternative?</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Dec 08 2021 00:38:37 GMT-0800 (Pacific Standard Time)">08:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">kaleidea</span>: yeah, we could probably support inheritance with a lot of work by moving things to use instance checks, change Selectors around, etc. but it's not clear to me that inheritance is really that great of a programming pattern to go through all that effort for</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed Dec 08 2021 00:39:35 GMT-0800 (Pacific Standard Time)">08:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">I think the strides we're making with composition-like semantics (see form-associated custom elements for instance) show a lot more promise</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed Dec 08 2021 00:47:16 GMT-0800 (Pacific Standard Time)">08:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@kaleidea:matrix.org">kaleidea</span>&gt;</div></td><td class="msg-cell"><blockquote>
<p>moving things to use instance checks</p>
</blockquote>
<p>I'd imagine that would more likely look like <code>element.builtinTagName === 'button'</code>. Selectors are a longer story though, for ex. <code>@button</code>, but choosing the spec. char would be difficult. Maybe that wouldn't be necessary if style inheritance would be as easy as <code>my-button { @apply button; }</code></p>
<blockquote>
<p>composition-like semantics (see form-associated custom elements</p>
</blockquote>
<p>That's one specific case. It seems to me there's a lot of work to do to make that into a general composition pattern.</p>
<p>Just a few thoughts. I'm going to return to the original topic.</p>
</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed Dec 08 2021 00:57:32 GMT-0800 (Pacific Standard Time)">08:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@kaleidea:matrix.org">kaleidea</span>&gt;</div></td><td class="msg-cell"><p><span class="nick-12">annevk</span>: Back to your point:</p>
<blockquote>
<p>FWIW, the fundamental problem with inheritance for HTML elements is that engine logic is based on local name</p>
</blockquote>
<p>Yes and no. The entry point of the basic logic is virtual functions such as ParseAttribute() and HandleLocalEvents(), which is based on the vftable, independent of local name. Parsing and cross-cutting logic is dependent on tagName, but some of that uses <code>IsA&lt;&gt;</code> type-checking (which is trivial to implement with a more reliable form of type identification).</p>
<p>Btw, did you mean to refer to RTTI being disabled in Blink and substituted with tagName checking?</p>
</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed Dec 08 2021 01:11:48 GMT-0800 (Pacific Standard Time)">09:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">No</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed Dec 08 2021 01:28:13 GMT-0800 (Pacific Standard Time)">09:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@kaleidea:matrix.org">kaleidea</span>&gt;</div></td><td class="msg-cell">Implementing the search element requires only 10 tagName comparisons (3 of which are type checks), 5 more than without form.
3 comparisons are in the parser, pre-instantiation, that must be tagName check. 2 is to differentiate with form, must be tagName. The remaining 5 can be type checks (dynamic_cast).
That's the extent of the impact the search element has on the browser. How does that affect your views?
</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed Dec 08 2021 01:32:20 GMT-0800 (Pacific Standard Time)">09:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">I think you're underestimating the effort required.</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Wed Dec 08 2021 01:32:57 GMT-0800 (Pacific Standard Time)">09:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@kaleidea:matrix.org">kaleidea</span>&gt;</div></td><td class="msg-cell">Did you know that I've already implemented it?
</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed Dec 08 2021 01:35:38 GMT-0800 (Pacific Standard Time)">09:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">I got that impression, but I strongly suspect there will be things that are broken. Anyway, it's also not clear to me this is the best design. Overloading functionality and having multiple elements to do the same thing has created problems in the past.</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed Dec 08 2021 01:38:37 GMT-0800 (Pacific Standard Time)">09:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@kaleidea:matrix.org">kaleidea</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">annevk</span>: I've shared it probably 5-10 times. Assumptions aren't useful. If you find any test vectors that are broken that would help my work. Good solutions are built on facts and testing.</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Wed Dec 08 2021 01:39:18 GMT-0800 (Pacific Standard Time)">09:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> good work here from <span class="nick-1">krosylight</span> about events across browsers <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1653882#c14">https://bugzilla.mozilla.org/show_bug.cgi?id=1653882#c14</a></blockquote></mx-reply>This seems like really good research, and the sort of thing we've been solving in the HTML Standard triage meetings. A spec issue with research + proposal for best behavior that is sensible but also likely web-compatible + list of deltas between current behavior and that proposal would be a great next step IMO.</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Wed Dec 08 2021 01:44:46 GMT-0800 (Pacific Standard Time)">09:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@kaleidea:matrix.org">kaleidea</span>&gt;</div></td><td class="msg-cell"><blockquote>
<p>not clear to me this is the best design</p>
</blockquote>
<p>Well, there's no competitor aiming to be a better design. This OTOH matches developer expectations.</p>
</td></tr>

</tbody></table></div></div></div>
</body></html>