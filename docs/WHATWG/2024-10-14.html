<!DOCTYPE html><html><head>
  <title>WHATWG on 2024-10-14</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "WHATWG";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2024-10-14<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2024-10-12" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Mon Oct 14 2024 01:31:04 GMT-0700 (Pacific Daylight Time)">08:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@quadristan:matrix.org">quadristan</span>&gt;</div></td><td class="msg-cell">Hello! I think i've spotted a typo in <code>nooopener-allow-popups</code>. there is an additional o in <a href="https://html.spec.whatwg.org/multipage/browsers.html#coop-noopener-allow-popups">https://html.spec.whatwg.org/multipage/browsers.html#coop-noopener-allow-popups</a> . I'm opening n MR to fix this</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Mon Oct 14 2024 01:32:44 GMT-0700 (Pacific Daylight Time)">08:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">keithamus</span>:  Hmm, doesn't the step 4 assert in <a href="https://html.spec.whatwg.org/#show-popover">https://html.spec.whatwg.org/#show-popover</a> fail if beforetoggle (once:true) listener doesn't call preventDefault() but calls showPopover()</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Mon Oct 14 2024 01:33:14 GMT-0700 (Pacific Daylight Time)">08:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">(happened to read that algorithm while looking at the other relevant stuff)</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Mon Oct 14 2024 01:49:54 GMT-0700 (Pacific Daylight Time)">08:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">keithamus</span>: looping back on <a href="https://github.com/whatwg/html/issues/10666#issuecomment-2408260094">https://github.com/whatwg/html/issues/10666#issuecomment-2408260094</a> (keeping focus for moving elements during <code>moveBefore</code> from the last WHATNOT). You've raised concerns about a11y with focused elements. Is w3c/aria the right place to open an issue about this or somewhere else? <a href="https://www.w3.org/WAI/about/groups/ariawg/contribute/">https://www.w3.org/WAI/about/groups/ariawg/contribute/</a> is kinda confusing in that regard.</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Mon Oct 14 2024 01:51:29 GMT-0700 (Pacific Daylight Time)">08:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-6">keithamus</span>: looping back on <a href="https://github.com/whatwg/html/issues/10666#issuecomment-2408260094">https://github.com/whatwg/html/issues/10666#issuecomment-2408260094</a> (keeping focus for moving elements during <code>moveBefore</code> from the last WHATNOT). You've raised concerns about a11y with focused elements. Is w3c/aria the right place to open an issue about this or somewhere else? <a href="https://www.w3.org/WAI/about/groups/ariawg/contribute/">https://www.w3.org/WAI/about/groups/ariawg/contribute/</a> is kinda confusing in that regard.</blockquote></mx-reply>We did have an internal a11y review specifically for this, and there were no concerned raised. That's because elements can already stay in place and everything else move around them, and the developer can call <code>focus()</code> programatically anyway as well. So <code>moveBefore</code> doesn't add anything new here as long as we make sure the AT is up to date</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Mon Oct 14 2024 01:52:10 GMT-0700 (Pacific Daylight Time)">08:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keithamus:matrix.org">keithamus</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-6">keithamus</span>:  Hmm, doesn't the step 4 assert in <a href="https://html.spec.whatwg.org/#show-popover">https://html.spec.whatwg.org/#show-popover</a> fail if beforetoggle (once:true) listener doesn't call preventDefault() but calls showPopover()</blockquote></mx-reply>Step <code>9</code> prevents going further though right?</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Mon Oct 14 2024 01:54:12 GMT-0700 (Pacific Daylight Time)">08:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">Ah</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Mon Oct 14 2024 01:55:35 GMT-0700 (Pacific Daylight Time)">08:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keithamus:matrix.org">keithamus</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-6">keithamus</span>: looping back on <a href="https://github.com/whatwg/html/issues/10666#issuecomment-2408260094">https://github.com/whatwg/html/issues/10666#issuecomment-2408260094</a> (keeping focus for moving elements during <code>moveBefore</code> from the last WHATNOT). You've raised concerns about a11y with focused elements. Is w3c/aria the right place to open an issue about this or somewhere else? <a href="https://www.w3.org/WAI/about/groups/ariawg/contribute/">https://www.w3.org/WAI/about/groups/ariawg/contribute/</a> is kinda confusing in that regard.</blockquote></mx-reply><p>if you've had an internal review and it was deemed okay then I won't raise any further objections. I'm not an expert by any means but it seemed perhaps not-ideal IMO to move focus, because - yes while the user retains focus - their position relative to the page may have moved which may be very confusing as the traverse onward.</p>
<p>I think it is perhaps analogous to talk about <code>remove()</code> than to talk about <code>focus()</code>. If a developer calls <code>remove()</code> then browsers try to traverse the hole up to a nearest container to set the sequential focus start point, no? I'd perhaps offer that <em>might</em> be more preferable than moving their focus, because the position in the page hasn't change but there is also an acknowledgement that something on the page has changed.</p>
</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Mon Oct 14 2024 01:56:36 GMT-0700 (Pacific Daylight Time)">08:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">keithamus</span>: on remove, the focus is simply lost. Frameworks today sometimes compensate by calling <code>focus</code> programatically</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Mon Oct 14 2024 01:56:41 GMT-0700 (Pacific Daylight Time)">08:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keithamus:matrix.org">keithamus</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>if you've had an internal review and it was deemed okay then I won't raise any further objections. I'm not an expert by any means but it seemed perhaps not-ideal IMO to move focus, because - yes while the user retains focus - their position relative to the page may have moved which may be very confusing as the traverse onward.</p>
<p>I think it is perhaps analogous to talk about <code>remove()</code> than to talk about <code>focus()</code>. If a developer calls <code>remove()</code> then browsers try to traverse the hole up to a nearest container to set the sequential focus start point, no? I'd perhaps offer that <em>might</em> be more preferable than moving their focus, because the position in the page hasn't change but there is also an acknowledgement that something on the page has changed.</p>
</blockquote></mx-reply>IME the biggest pitfall and biggest source of complaints we have when building out accessible interfaces is the user getting no acknowledgement of the page changing. Calling <code>.focus()</code> <em>is</em> an acknowledgement (because AT potentially re-reads the content).</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Mon Oct 14 2024 01:57:44 GMT-0700 (Pacific Daylight Time)">08:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> IME the biggest pitfall and biggest source of complaints we have when building out accessible interfaces is the user getting no acknowledgement of the page changing. Calling <code>.focus()</code> <em>is</em> an acknowledgement (because AT potentially re-reads the content).</blockquote></mx-reply>AT is a different story, we have to update AT after calling <code>moveBefore</code> to account for the focused element perhaps moving, or regardless because the tree could change in many ways when the DOM hierarchy is modified</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Mon Oct 14 2024 01:58:58 GMT-0700 (Pacific Daylight Time)">08:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keithamus:matrix.org">keithamus</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> AT is a different story, we have to update AT after calling <code>moveBefore</code> to account for the focused element perhaps moving, or regardless because the tree could change in many ways when the DOM hierarchy is modified</blockquote></mx-reply>That makes sense. I wonder if the move operations should cause explicit announcements in AT?</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Mon Oct 14 2024 01:59:34 GMT-0700 (Pacific Daylight Time)">08:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> That makes sense. I wonder if the move operations should cause explicit announcements in AT?</blockquote></mx-reply>They do in blink; Not sure how that translates to spec-land</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Mon Oct 14 2024 01:59:49 GMT-0700 (Pacific Daylight Time)">08:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keithamus:matrix.org">keithamus</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> That makes sense. I wonder if the move operations should cause explicit announcements in AT?</blockquote></mx-reply>Though that might be too noisy. This is why I encouraged y'all reaching out to ARIA WG btw, I don't intend to throw spanners I am just <em>unsure</em> what should happen here and would rather hear from the experts.</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Mon Oct 14 2024 02:00:00 GMT-0700 (Pacific Daylight Time)">09:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell">oh you mean that the user will get notifications that something changed? I don't think sdo</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Mon Oct 14 2024 02:00:47 GMT-0700 (Pacific Daylight Time)">09:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell">You could be e.g. removing an intermediate layout container that has no content significance</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Mon Oct 14 2024 02:01:01 GMT-0700 (Pacific Daylight Time)">09:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell">(we've discussed this with our internal a11y experts as I said)</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Mon Oct 14 2024 02:03:17 GMT-0700 (Pacific Daylight Time)">09:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@keithamus:matrix.org">keithamus</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> You could be e.g. removing an intermediate layout container that has no content significance</blockquote></mx-reply>Yep, makes sense to me 👍️</td></tr>

</tbody></table></div></div></div>
</body></html>