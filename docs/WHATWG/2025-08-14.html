<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>WHATWG on 2025-08-14</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "WHATWG";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2025-08-14<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2025-08-13" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Thu Aug 14 2025 00:30:22 GMT-0700 (Pacific Daylight Time)">07:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@jdescottes:matrix.org">Julian Descottes</span>&gt;</div></td><td class="msg-cell"><p>Hi, I'm working on the WebDriver BiDi implementation in Firefox, and I'm looking at the <code>WebDriver BiDi download started</code> triggered from the HTML spec (step 5.4.4 of <a href="https://html.spec.whatwg.org/#attempt-to-populate-the-history-entry's-document">https://html.spec.whatwg.org/#attempt-to-populate-the-history-entry's-document</a>). I have a couple of questions around this (spawned from <a href="https://github.com/w3c/webdriver-bidi/issues/980">https://github.com/w3c/webdriver-bidi/issues/980</a>).</p>
<p>First, do I understand correctly that this is not triggered when users click on a link with a <code>download</code> attribute? (which goes through <a href="https://html.spec.whatwg.org/#downloading-hyperlinks">https://html.spec.whatwg.org/#downloading-hyperlinks</a>).<br>Then if that's correct, I would like to change this so that we also trigger the BiDi hook in case of a <code>download</code> attribute. But then I'm not sure there would be a navigation id relevant to send to BiDi in this case?</p>
<p>(I can also file an issue on GitHub if preferable to discuss about this)</p>
</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Thu Aug 14 2025 00:35:24 GMT-0700 (Pacific Daylight Time)">07:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-7">Julian Descottes</span>: there's an existing issue of the <code>download</code> attribute not being described in terms of the navigate algorithm. That would fix your issue. Are there other WebDriver callbacks that happen before or after this is called that also require the navigation ID? Because if not I suppose we could just generate a synthetic one in the <code>download</code> attribute algorithm as a workaround for now, but it's not great overall.</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Thu Aug 14 2025 00:37:37 GMT-0700 (Pacific Daylight Time)">07:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@jdescottes:matrix.org">Julian Descottes</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">annevk</span>: ok, great. And no the navigation id from this particular event is not really meant to be reused or shared with other events, it's more for completeness. So the workaround would be fine, but we could also make it optional on the BiDi side and omit the info until the HTML spec is fixed.</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Thu Aug 14 2025 00:38:02 GMT-0700 (Pacific Daylight Time)">07:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@jdescottes:matrix.org">Julian Descottes</span>&gt;</div></td><td class="msg-cell">do you have a link to the issue about the download attribute?</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Thu Aug 14 2025 00:44:03 GMT-0700 (Pacific Daylight Time)">07:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-7">Julian Descottes</span>: <a href="https://github.com/whatwg/html/issues/5548">https://github.com/whatwg/html/issues/5548</a> might be the most canonical one, but there's several. ðŸ˜…</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Thu Aug 14 2025 02:39:16 GMT-0700 (Pacific Daylight Time)">09:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">annevk</span>: OK if I resurrect <a href="https://github.com/whatwg/html/pull/2480">https://github.com/whatwg/html/pull/2480</a> ?</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Thu Aug 14 2025 02:42:24 GMT-0700 (Pacific Daylight Time)">09:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">zcorpan</span>: please!</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Thu Aug 14 2025 02:43:59 GMT-0700 (Pacific Daylight Time)">09:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><p><span class="nick-12">annevk</span>: do you remember details of this comment? <a href="https://github.com/mozilla/standards-positions/issues/466#issuecomment-745120322">https://github.com/mozilla/standards-positions/issues/466#issuecomment-745120322</a></p>
<p>Is the no-referrer-based redaction not sufficient?</p>
</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Thu Aug 14 2025 02:50:33 GMT-0700 (Pacific Daylight Time)">09:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">zcorpan</span>: I think if the redaction is based on the policies of the embedding elements (with their node document policies as fallback) it's probably good. (Modulo the debate as to whether an HTTP-level policy needs to override, but that can probably be kept as its own issue that might impact the behavior here down the line.)</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Thu Aug 14 2025 02:57:26 GMT-0700 (Pacific Daylight Time)">09:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><p><span class="nick-14">zcorpan</span>: ah</p>
<blockquote>
<p>This is even further complicated when an embedded site is navigated as the site being navigated to would never know about its parent (other than that one exists).</p>
</blockquote>
<p>is a case where we start exposing more information and also more strongly conveys that referrer policy now has this dual purpose. I think that's probably all okay though and it's relatively straightforward to follow.</p>
</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Thu Aug 14 2025 02:59:31 GMT-0700 (Pacific Daylight Time)">09:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">zcorpan</span>: my PR seems wrong in that it stores the referrer rather than some computed version of the referrer policy.</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Thu Aug 14 2025 03:00:22 GMT-0700 (Pacific Daylight Time)">10:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">annevk</span>: OK thanks. I'll start with rebasing</td></tr>

</tbody></table></div></div></div>
</body></html>