<!DOCTYPE html><html><head>
  <title>WHATWG on 2022-05-20</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "WHATWG";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2022-05-20<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-05-19" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Thu May 19 2022 20:53:09 GMT-0700 (Pacific Daylight Time)">03:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@etportis:matrix.org">Eric Portis (he/him)</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Domenic</span> <span class="nick-8">Noam Rosenthal</span> <span class="nick-12">annevk</span> Thank you for the answers re: CORS/CORP differences (a week ago)! Very helpful.</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Thu May 19 2022 20:53:40 GMT-0700 (Pacific Daylight Time)">03:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@etportis:matrix.org">Eric Portis (he/him)</span>&gt;</div></td><td class="msg-cell">Sounds like, for the use case I had in mind (serving a totally static, public resource), add both… and it’s overly reductive to say <code>ACAO:*</code> represents “global read access” and <code>CORP:cross-origin</code> represents “global embed access, which, worst case, escalates to read access”. The flows are different enough in at least some cases that the platform can’t always infer that <code>CORP:cross-origin</code> would be safe, given the presence of <code>ACAO:*</code>.</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Thu May 19 2022 20:55:00 GMT-0700 (Pacific Daylight Time)">03:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@etportis:matrix.org">Eric Portis (he/him)</span>&gt;</div></td><td class="msg-cell">One follow up question… Noam Rosenthal said CORP:cross-origin “kind of” means that you send all/the same data to every Origin. Which (I think) makes sense... But let’s say the resource doesn’t vary per Origin, and doesn’t vary based on Cookie or Authentication, but does vary based on other things (Accept, User-Agent… IP??) Is adding either/both headers to responses that vary in these ways dangerous? Does the "degree or type of variance" matter?</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Thu May 19 2022 21:41:27 GMT-0700 (Pacific Daylight Time)">04:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@etportis:matrix.org">Eric Portis (he/him)</span>&gt;</div></td><td class="msg-cell">After some thought, my guess is it’s not dangerous because the value of those request headers doesn’t change based on origin, so they don’t reveal anything about the user’s relationship to that other origin.</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Thu May 19 2022 21:50:59 GMT-0700 (Pacific Daylight Time)">04:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@californiatok:matrix.org">californiatok</span>&gt;</div></td><td class="msg-cell">I'll help 10 people on how to earn $12,000 within 72 hours but you will pay me 10% of your profit when you receive it.
Note: only interested people should apply, click and drop a message let's get started
<a href="https://t.me/isheilabillyinvest">https://t.me/isheilabillyinvest</a></td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Thu May 19 2022 22:31:28 GMT-0700 (Pacific Daylight Time)">05:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">Eric Portis (he/him)</span>: the question is more about whether the variations reveal something about the user only the server in question knows about and whether you are comfortable sharing that widely</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Thu May 19 2022 23:42:03 GMT-0700 (Pacific Daylight Time)">06:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">Eric Portis (he/him)</span>: Example: If <code><a href="http://embedder.com">embedder.com</a></code> is embedding an image from <code><a href="http://image.com">image.com</a></code>, and the served image is different per client-IP, then it's a question of - is that information that <code><a href="http://embedder.com">embedder.com</a></code> should have access to?</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Thu May 19 2022 23:45:27 GMT-0700 (Pacific Daylight Time)">06:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell">The <code>Origin</code> header answers the question: "which website is asking for this image on behalf of this user?". The only thing it reveals about the user in itself, is the fact that they are currently visiting that origin</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Thu May 19 2022 23:52:16 GMT-0700 (Pacific Daylight Time)">06:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell">... What helps me remember the CORS/CORP essence is that when you make a server-to-server request. both don't apply. That's because a server is not a user-agent - it doesn't have the user's cookies/client-certs, and also not other anonymous-but-revealing properties like IP and user-agent. CORS/CORP are both there to protect the user from having a content site reveal to the embedding document information that only the user should know and protected by their credentials or private information like client IP. Either by having the embedder self-identify (CORS), or by allowing limited access to unidentified origins (CORP)</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Fri May 20 2022 09:02:21 GMT-0700 (Pacific Daylight Time)">16:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">wanderview</span>: presumably someone at Chromium has thought about this though? E.g., the anonymous iframe proposal clearly wants the partitioned nonce for both storage and networking</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Fri May 20 2022 09:03:19 GMT-0700 (Pacific Daylight Time)">16:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">To me that, as well as what we've learned about the security/privacy boundary over the last couple years suggests some kind of unification is in order</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Fri May 20 2022 09:03:46 GMT-0700 (Pacific Daylight Time)">16:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">I'd rather not work on a solution just for storage keys if a couple months later we have to do it again for networking</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Fri May 20 2022 09:04:07 GMT-0700 (Pacific Daylight Time)">16:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wanderview:matrix.org">wanderview</span>&gt;</div></td><td class="msg-cell">I think making storage partitioning block on that unification is going to delay spec'ing storage partitioning... at least I don't have bandwidth for it at the moment</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Fri May 20 2022 09:04:37 GMT-0700 (Pacific Daylight Time)">16:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wanderview:matrix.org">wanderview</span>&gt;</div></td><td class="msg-cell">and arguably I don't understand it... maybe you are the only here who knows what your vision looks like?</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Fri May 20 2022 09:05:28 GMT-0700 (Pacific Daylight Time)">16:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wanderview:matrix.org">wanderview</span>&gt;</div></td><td class="msg-cell">at a minimum it would need more definition of what your final state looks like... right now it seems a bit vague to me</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Fri May 20 2022 09:05:54 GMT-0700 (Pacific Daylight Time)">16:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wanderview:matrix.org">wanderview</span>&gt;</div></td><td class="msg-cell">and I hesitate to invest a lot of time trying to implement a grand vision that I don't understand and may not be what you are looking for anyway</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Fri May 20 2022 09:07:27 GMT-0700 (Pacific Daylight Time)">16:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">That's fair, but that also goes for the variety of Google's proposals in this area, no?</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Fri May 20 2022 09:08:18 GMT-0700 (Pacific Daylight Time)">16:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wanderview:matrix.org">wanderview</span>&gt;</div></td><td class="msg-cell">I don't understand what you mean?</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Fri May 20 2022 09:08:52 GMT-0700 (Pacific Daylight Time)">16:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">Well, going back to <a href="https://github.com/whatwg/storage/issues/142">https://github.com/whatwg/storage/issues/142</a>. What's stated there is incorrect as I've shown by pointing to the anonymous iframe proposal.</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Fri May 20 2022 09:09:09 GMT-0700 (Pacific Daylight Time)">16:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">In that the nonce is used elsewhere.</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Fri May 20 2022 09:09:36 GMT-0700 (Pacific Daylight Time)">16:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">So it's also not clear to me what Google's vision is here as there are contradictory statements.</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Fri May 20 2022 09:09:59 GMT-0700 (Pacific Daylight Time)">16:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wanderview:matrix.org">wanderview</span>&gt;</div></td><td class="msg-cell">"used elsewhere" means for networking in addition to storage?</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Fri May 20 2022 09:10:21 GMT-0700 (Pacific Daylight Time)">16:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wanderview:matrix.org">wanderview</span>&gt;</div></td><td class="msg-cell">are we bikeshedding the word "storage"... I mean StorageKey is also used for communication APIs like broadcastchannel</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Fri May 20 2022 09:10:46 GMT-0700 (Pacific Daylight Time)">16:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wanderview:matrix.org">wanderview</span>&gt;</div></td><td class="msg-cell">I don't understand why StorageKey can't be the one source of truth here</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Fri May 20 2022 09:10:53 GMT-0700 (Pacific Daylight Time)">16:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">Yes networking, which cannot use the storage key directly as it doesn't use the "origin" part.</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Fri May 20 2022 09:12:30 GMT-0700 (Pacific Daylight Time)">16:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wanderview:matrix.org">wanderview</span>&gt;</div></td><td class="msg-cell">I'm confused.... networking would not use all of whatever this 'authority struct' is either...</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Fri May 20 2022 09:12:54 GMT-0700 (Pacific Daylight Time)">16:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wanderview:matrix.org">wanderview</span>&gt;</div></td><td class="msg-cell">why can't networking pull the nonce out of storagekey</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Fri May 20 2022 09:13:02 GMT-0700 (Pacific Daylight Time)">16:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wanderview:matrix.org">wanderview</span>&gt;</div></td><td class="msg-cell">just as it would this authority struct</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Fri May 20 2022 09:13:03 GMT-0700 (Pacific Daylight Time)">16:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">It doesn't currently no, but that's what I'm suggesting we do over time. Unify the networking partition key and the storage key somewhat.</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Fri May 20 2022 09:13:20 GMT-0700 (Pacific Daylight Time)">16:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">And have them be more centrally owned, similar to origin.</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Fri May 20 2022 09:14:10 GMT-0700 (Pacific Daylight Time)">16:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wanderview:matrix.org">wanderview</span>&gt;</div></td><td class="msg-cell">the "over time" does not seem consistent with the "can't make incremental improvements" position you have here</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Fri May 20 2022 09:14:45 GMT-0700 (Pacific Daylight Time)">16:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wanderview:matrix.org">wanderview</span>&gt;</div></td><td class="msg-cell">I'm fine with that being the goal long term... but you seem to be saying you want it now before we do anything else</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Fri May 20 2022 09:14:47 GMT-0700 (Pacific Daylight Time)">16:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">I think my suggestion can be mostly backwards compatible.</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Fri May 20 2022 09:15:58 GMT-0700 (Pacific Daylight Time)">16:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">As in we put the state there, you'd have to adjust "obtain a storage key" slightly, but after that it would all still work.</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Fri May 20 2022 09:16:40 GMT-0700 (Pacific Daylight Time)">16:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wanderview:matrix.org">wanderview</span>&gt;</div></td><td class="msg-cell">so you want to do the opposite of what I wrote in <a href="https://github.com/whatwg/storage/issues/142">https://github.com/whatwg/storage/issues/142</a>... I did not take that from your comment there</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Fri May 20 2022 09:19:03 GMT-0700 (Pacific Daylight Time)">16:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">wanderview</span>: perhaps your comment above naming is correct; I think we should group this state on environment and give it a name that'll serve us going forward</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Fri May 20 2022 09:20:40 GMT-0700 (Pacific Daylight Time)">16:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">But I meant what I wrote there, I agree that it would make sense for us to store this state on environment, I just think it's wider than a storage key, especially given that with "storage" the web platform typically doesn't mean cookies or network state</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Fri May 20 2022 09:34:10 GMT-0700 (Pacific Daylight Time)">16:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">I gotta go, happy to discuss more on Monday; also happy to try to explain it better or work with whoever at Chromium is nominally in charge of these various keys to hash something out, let me know</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Fri May 20 2022 09:49:05 GMT-0700 (Pacific Daylight Time)">16:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@etportis:matrix.org">Eric Portis (he/him)</span>&gt;</div></td><td class="msg-cell"><p><span class="nick-8">Noam Rosenthal</span> <span class="nick-12">annevk</span> Thank you, again, for the explanations. Very helpful.</p>
<p><span class="nick-12">annevk</span> said: “whether the variations reveal something about the user only the server in question knows…”</p>
<p>Ok, so… interpreted literally, that’s potentially every aspect of the request. <a href="http://image.com">image.com</a> has no guarantee that the user is sending any of the same headers (or IP) to <a href="http://image.com">image.com</a> vs <a href="http://embedder.com">embedder.com</a>.</p>
<p><span class="nick-12">annevk</span> said: “…and whether you are comfortable sharing that widely”</p>
<p>This is the part I struggle to reason through, in cases that don’t involve Cookies/Authentication (which are more obvious). Wrote up some examples and how I'm thinking about them... <a href="https://gist.github.com/eeeps/ecfbf8d554bcbdd0d92c74c7edd11d15">https://gist.github.com/eeeps/ecfbf8d554bcbdd0d92c74c7edd11d15</a> Am I thinking ~correctly? Any advice on the murky cases?</p>
</td></tr>

</tbody></table></div></div></div>
</body></html>