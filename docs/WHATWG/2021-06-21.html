<!DOCTYPE html><html><head>
  <title>WHATWG on 2021-06-21</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2021-06-21<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2021-06-20" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/" class="current-room">WHATWG</a></li>
</ul>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs"><div class="log">
<table><tbody id="log-tbody">
  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Sun Jun 20 2021 18:23:40 GMT-0700 (Pacific Daylight Time)">01:23</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title="@hamishwillee:matrix.org">Hamish Willee</span>&gt;</td><td class="msg-cell"><p><span class="nick-6">Yoav Weiss</span>: For Mozilla Developer Network docs, can you please confirm that the device client hints that disappeared from the spec after <a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-client-hints-06">https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-client-hints-06</a> are deprecated (were removed permanently from the spec and have not been moved elsewhere)?</p>
<p>Specifically, Content-DPR, DPR, Viewport-Width, Width</p>
</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Sun Jun 20 2021 19:37:02 GMT-0700 (Pacific Daylight Time)">02:37</a></td><td class="nick-cell">&lt;<span class="nick nick-3" title="@timothygu:matrix.org">timothygu</span>&gt;</td><td class="msg-cell"><span class="nick-14">Hamish Willee</span>: It was removed from the ID to be moved to other specs. See <a href="https://wicg.github.io/responsive-image-client-hints/">https://wicg.github.io/responsive-image-client-hints/</a> for the current spec for image-related client hints</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Sun Jun 20 2021 19:37:28 GMT-0700 (Pacific Daylight Time)">02:37</a></td><td class="nick-cell">&lt;<span class="nick nick-3" title="@timothygu:matrix.org">timothygu</span>&gt;</td><td class="msg-cell">This is the PR that removed the features: <a href="https://github.com/httpwg/http-extensions/pull/775">https://github.com/httpwg/http-extensions/pull/775</a> </td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Sun Jun 20 2021 21:17:47 GMT-0700 (Pacific Daylight Time)">04:17</a></td><td class="nick-cell">&lt;<span class="nick nick-3" title="@timothygu:matrix.org">timothygu</span>&gt;</td><td class="msg-cell"><span class="nick-4">@jakea:matrix.org</span> Hey, I looked into the GC issue. I’ll comment on the crbug tomorrow, but I think it turns out to be pretty subtle, and may have also exposed a bug in MutationObserver</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Sun Jun 20 2021 21:18:16 GMT-0700 (Pacific Daylight Time)">04:18</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title="@hamishwillee:matrix.org">Hamish Willee</span>&gt;</td><td class="msg-cell"><p><span class="nick-3">timothygu</span>: Thanks very much! Can you confirm the summary of the changes:</p>
<ul>
<li>Width, Viewport-Width, DPR were deprecated and replaced by same haders with Sec-CH- prefix (e.g. Sec-CH-DPR)</li>
<li>New header Sec-CH-Viewport-Height</li>
<li>Removal of Content-DPR altogether?</li>
</ul>
<p>As a slight aside, one of the examples in the spec appears to omit the SEC- prefix in the Accept-CH - is that OK?:<br>Accept-CH: CH-DPR, CH-Width</p>
</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Sun Jun 20 2021 21:22:15 GMT-0700 (Pacific Daylight Time)">04:22</a></td><td class="nick-cell">&lt;<span class="nick nick-3" title="@timothygu:matrix.org">timothygu</span>&gt;</td><td class="msg-cell"><span class="nick-13">@hamishwillee:matrix.org</span> I don’t have any info beyond the links I sent, but it’s worth going through the PRs to that spec to understand historical changes. Re the example omission, you could file an issue on GitHub for clarification</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Sun Jun 20 2021 23:05:43 GMT-0700 (Pacific Daylight Time)">06:05</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-4">@jakea:matrix.org</span> Hey, I looked into the GC issue. I’ll comment on the crbug tomorrow, but I think it turns out to be pretty subtle, and may have also exposed a bug in MutationObserver</blockquote></mx-reply>Ohh, keen to know more</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Mon Jun 21 2021 00:24:58 GMT-0700 (Pacific Daylight Time)">07:24</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title="@yoavweiss:matrix.org">Yoav Weiss</span>&gt;</td><td class="msg-cell"><span class="nick-14">Hamish Willee</span>: The old header names are indeed deprecated in spec, but the Chromium implementation needs to catch up</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Mon Jun 21 2021 00:25:49 GMT-0700 (Pacific Daylight Time)">07:25</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title="@yoavweiss:matrix.org">Yoav Weiss</span>&gt;</td><td class="msg-cell">Content-DPR was somewhat replaced by <a href="https://github.com/whatwg/html/pull/5574">https://github.com/whatwg/html/pull/5574</a></td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Mon Jun 21 2021 00:26:01 GMT-0700 (Pacific Daylight Time)">07:26</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title="@yoavweiss:matrix.org">Yoav Weiss</span>&gt;</td><td class="msg-cell">(but wasn't removed from Chromium AFAIK)</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Mon Jun 21 2021 00:26:47 GMT-0700 (Pacific Daylight Time)">07:26</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title="@yoavweiss:matrix.org">Yoav Weiss</span>&gt;</td><td class="msg-cell">Eric Portis (not in here, for some reason) is editing that spec. I believe PRs and corrections would be appreciated</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Mon Jun 21 2021 00:27:09 GMT-0700 (Pacific Daylight Time)">07:27</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title="@hamishwillee:matrix.org">Hamish Willee</span>&gt;</td><td class="msg-cell">Thanks @yoa</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Mon Jun 21 2021 00:28:47 GMT-0700 (Pacific Daylight Time)">07:28</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title="@hamishwillee:matrix.org">Hamish Willee</span>&gt;</td><td class="msg-cell"> * Thanks <span class="nick-6">Yoav Weiss</span> - really helpful. I've created an issue for the problem case. I'm thinking this might be a little early to document for MDN, but am checking internally. Either way will link the old docs to the new spec in some way so that we have this information when ready to start.</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Mon Jun 21 2021 01:15:30 GMT-0700 (Pacific Daylight Time)">08:15</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</td><td class="msg-cell"><span class="nick-16">sideshowbarker</span>: what would be a short term fix for <a href="https://github.com/whatwg/encoding/issues/261">https://github.com/whatwg/encoding/issues/261</a>?</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Mon Jun 21 2021 01:33:16 GMT-0700 (Pacific Daylight Time)">08:33</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-16">sideshowbarker</span>: what would be a short term fix for <a href="https://github.com/whatwg/encoding/issues/261">https://github.com/whatwg/encoding/issues/261</a>?</blockquote></mx-reply>I can add a filter to our script, to cause those messages to be suppressed</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Mon Jun 21 2021 01:37:02 GMT-0700 (Pacific Daylight Time)">08:37</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</td><td class="msg-cell"><span class="nick-16">sideshowbarker</span>: yeah, I guess I can do that too</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Mon Jun 21 2021 01:41:14 GMT-0700 (Pacific Daylight Time)">08:41</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-16">sideshowbarker</span>: yeah, I guess I can do that too</blockquote></mx-reply>Yeah, maybe give it a try. If it doesn't work for some reason, I can look at it later</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Mon Jun 21 2021 01:41:52 GMT-0700 (Pacific Daylight Time)">08:41</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</td><td class="msg-cell"><span class="nick-16">sideshowbarker</span>: I added <code>.*Possible misuse of “aria-label”. (If you disagree with this warning, file an issue report or send e-mail to www-validator@w3.org.).*</code> to .htmlcheckerfilter and it does not appear to work</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Mon Jun 21 2021 01:42:41 GMT-0700 (Pacific Daylight Time)">08:42</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</td><td class="msg-cell">Ok, I'll take a look at it in a bit</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Mon Jun 21 2021 02:06:43 GMT-0700 (Pacific Daylight Time)">09:06</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</td><td class="msg-cell"><span class="nick-12">annevk</span>: so yeah it was the parens</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Mon Jun 21 2021 02:07:02 GMT-0700 (Pacific Daylight Time)">09:07</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</td><td class="msg-cell">since it’s a regex, the parens need to be escaped</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Mon Jun 21 2021 02:07:23 GMT-0700 (Pacific Daylight Time)">09:07</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</td><td class="msg-cell">for the for record, alternately it can just be <code>.*Possible misuse of “aria-label”.*</code></td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Mon Jun 21 2021 02:07:46 GMT-0700 (Pacific Daylight Time)">09:07</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</td><td class="msg-cell">that is, it can match on just some portion of the message</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Mon Jun 21 2021 02:08:12 GMT-0700 (Pacific Daylight Time)">09:08</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</td><td class="msg-cell">it’s not strictly necessary to include the whole message</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Mon Jun 21 2021 02:11:25 GMT-0700 (Pacific Daylight Time)">09:11</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</td><td class="msg-cell"><span class="nick-16">sideshowbarker</span>: thanks, good to know for next time; perhaps we should document that somewhere</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Mon Jun 21 2021 02:12:53 GMT-0700 (Pacific Daylight Time)">09:12</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</td><td class="msg-cell">I have the general upstream documentation for the feature at <a href="https://github.com/validator/validator/wiki/Message-filtering">https://github.com/validator/validator/wiki/Message-filtering</a></td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Mon Jun 21 2021 02:13:09 GMT-0700 (Pacific Daylight Time)">09:13</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</td><td class="msg-cell">but that doesn’t provide enough detail I guess</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Mon Jun 21 2021 02:13:13 GMT-0700 (Pacific Daylight Time)">09:13</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</td><td class="msg-cell">it needs some examples</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Mon Jun 21 2021 02:13:36 GMT-0700 (Pacific Daylight Time)">09:13</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</td><td class="msg-cell">but anyway it’s wiki, so anybody can make changes to it</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Mon Jun 21 2021 02:33:55 GMT-0700 (Pacific Daylight Time)">09:33</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</td><td class="msg-cell"><span class="nick-16">sideshowbarker</span>: how quick is the filtering of warnings? I do get the impression the build times for Encoding are even worse now</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Mon Jun 21 2021 02:37:55 GMT-0700 (Pacific Daylight Time)">09:37</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</td><td class="msg-cell">I don't think the filtering adds any noticeable time to a build</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Mon Jun 21 2021 02:38:47 GMT-0700 (Pacific Daylight Time)">09:38</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</td><td class="msg-cell">That Encoding build has just always taken a long time, as far as I can recall</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Mon Jun 21 2021 02:54:11 GMT-0700 (Pacific Daylight Time)">09:54</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title="@andreubotella:mozilla.org">Andreu Botella (he/they)</span>&gt;</td><td class="msg-cell"><span class="nick-12">annevk</span>: <a href="https://github.com/whatwg/encoding/issues/261">https://github.com/whatwg/encoding/issues/261</a> should be closed now</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Mon Jun 21 2021 02:54:47 GMT-0700 (Pacific Daylight Time)">09:54</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</td><td class="msg-cell"><span class="nick-11">Andreu Botella (he/they)</span>: should it? I think we still need to decide how to resolve that warning</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Mon Jun 21 2021 02:55:15 GMT-0700 (Pacific Daylight Time)">09:55</a></td><td class="nick-cell"><span class="nick nick-11" title="@andreubotella:mozilla.org">Andreu Botella (he/they)</span></td><td class="msg-cell">rereads the log</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Mon Jun 21 2021 02:55:17 GMT-0700 (Pacific Daylight Time)">09:55</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title="@andreubotella:mozilla.org">Andreu Botella (he/they)</span>&gt;</td><td class="msg-cell">oh, right</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Mon Jun 21 2021 06:39:31 GMT-0700 (Pacific Daylight Time)">13:39</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</td><td class="msg-cell"><span class="nick-12">annevk</span>: so as far the performance effects from the filtering of warnings: when I test locally with filtering on, it takes 4m16.409s to check all the Encoding documents — but when when test without the filtering, it takes 9m31.435s</td></tr>
</tbody></table>
</div></div></div>
</body></html>