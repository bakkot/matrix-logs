<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>WHATWG on 2025-09-25</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "WHATWG";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2025-09-25<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2025-09-24" class="nav-link"><span>prev</span></a>
<a href="2025-09-26" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed Sep 24 2025 18:16:34 GMT-0700 (Pacific Daylight Time)">01:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@sachag:matrix.org">Sacha Greif</span>&gt;</div></td><td class="msg-cell">just a heads up that this year's State of JS survey is now open: <a href="https://survey.devographics.com/en-US/survey/state-of-js/2025">https://survey.devographics.com/en-US/survey/state-of-js/2025</a>

as usual any help spreading the word will be much appreciated!</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Sep 24 2025 18:46:35 GMT-0700 (Pacific Daylight Time)">01:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">Can anyone think of "entry points" for script execution in a Document (not worker) apart from &lt;script&gt; elements and inline event handlers?

That is, if we cut off those two sources of script, is that enough to prevent any script from executing? Or is there some other way the browser might call into scripts?</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed Sep 24 2025 19:23:52 GMT-0700 (Pacific Daylight Time)">02:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><code>&lt;a href="javascript: ..."&gt;</code> can execute script when clicked</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Sep 24 2025 19:24:12 GMT-0700 (Pacific Daylight Time)">02:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell">Not sure if a meta redirect to a javascript: url can also do that</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Sep 24 2025 23:17:31 GMT-0700 (Pacific Daylight Time)">06:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@dmaxim:matrix.org">Maxim Vaarwel</span>&gt;</div></td><td class="msg-cell"><p><span class="nick-12">annevk</span>: Hello, I have a question related to the reflecting of IDL attributes, specifically those related to ElementInternals.</p>
<p>The classic definition of reflection in the specification is: "In general, this means that the IDL attribute getter returns the current value of the content attribute, and the setter changes the value of the content attribute to the given value." In other words, by changing one attribute, we see changes in the other directly.</p>
<p>But if we look at the IDL attributes within ElementInternals, we see that "content attributes" are the internal content attribute map. Therefore, changing an IDL attribute in ElementInternals won't change the content attribute on the element, but according to the specification, the attribute in the internal content attribute map, which can't be directly observed, will change.</p>
<p>What's the point of such reflecting if the "content attribute" is in the internal content attribute map and we can't directly change attributes and their values ​​(as is the case with a regular IDL attribute and its content attribute on an element)?</p>
<p>Why do we need the concept of reflecting for attributes in ElementInternals then?</p>
<p>P.S. I also found your comment in one of the PRs:</p>
<p><a href="https://github.com/whatwg/html/pull/8496#discussion_r1024223828">https://github.com/whatwg/html/pull/8496#discussion_r1024223828</a></p>
<p>Does this PR clarify my question?</p>
</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Sep 24 2025 23:22:11 GMT-0700 (Pacific Daylight Time)">06:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@fbraun:mozilla.org">freddy</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Domenic</span>: &lt;iframe src=javascript...&gt; is also interesting. It's not same-document script same-origin with a handle to <code>parent</code>, so depending on what you do, that's interesting</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Sep 24 2025 23:35:59 GMT-0700 (Pacific Daylight Time)">06:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Maxim Vaarwel</span>: it's mainly a specification convenience. We want the "reflecting" IDL members of ElementInternals to work the same way as their Element counterparts API-wise (in terms of the values they can be set to and the values they return) and also not have to bother specifying them from scratch. It seems reasonable to add a note of sorts to clarify that.</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Thu Sep 25 2025 00:15:02 GMT-0700 (Pacific Daylight Time)">07:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@zzhorizonzz:matrix.org">Daniel Fiala</span>&gt;</div></td><td class="msg-cell"><p>Hi everyone, (I hope I'm sending this correctly...)</p>
<p>I'm curious if there has been any prior discussion or consideration around creating a native Web API for managing localization resources at the browser level?</p>
<p>Currently, web applications handle i18n by loading translation files via JavaScript, but this means every app implements its own solution for:</p>
<ul>
<li>Detecting and negotiating user locale preferences</li>
<li>Loading and caching translation files</li>
<li>Managing locale switching</li>
<li>Providing translated strings to the application</li>
</ul>
<p>It seems like there could be value in a standardized approach where:</p>
<ul>
<li>Web apps could declare available locales and translation resources (similar to how manifests work)</li>
<li>The browser would handle locale negotiation, file loading, and caching</li>
<li>A unified API would provide access to localized strings</li>
<li>This could reduce bundle sizes and provide consistent UX for locale selection</li>
</ul>
<p>I understand the <code>Intl</code> API handles formatting, etc, but I haven't found anything for regular web pages to declaratively provide translation resources that the browser manages.</p>
<p>Has this been discussed before? Are there technical or any other reasons why this should remain in userland? Or might this be worth exploring as a potential standard?</p>
<p>Thanks for any insights!</p>
</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Thu Sep 25 2025 00:25:47 GMT-0700 (Pacific Daylight Time)">07:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell">Mozilla has a proposal somewhere for applying <a href="https://messageformat.unicode.org">https://messageformat.unicode.org</a> to arbitrary HTML documents. Can't find it atm.</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Thu Sep 25 2025 00:50:10 GMT-0700 (Pacific Daylight Time)">07:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@zzhorizonzz:matrix.org">Daniel Fiala</span>&gt;</div></td><td class="msg-cell">I didn't know about MessageFormat 2, and I found a proposal for it here <a href="https://github.com/tc39/proposal-intl-messageformat">https://github.com/tc39/proposal-intl-messageformat</a> (not sure if you meant this one), but thank you very much for the pointer.</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Thu Sep 25 2025 00:51:05 GMT-0700 (Pacific Daylight Time)">07:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell"><p>PSA: <span class="nick-13">jmdyck</span>'s mega-PR to wrap all algorithms and var-scopes in whatwg/html has been merged!</p>
<ul>
<li>Outstanding PRs may need rebases, and probably need to add <code>&lt;div algorithm&gt;</code> wrappers. (The build process will complain about them missing soon: <a href="https://github.com/whatwg/html-build/pull/311">https://github.com/whatwg/html-build/pull/311</a> .)</li>
<li>You can now click on variables in the spec and see other instances of them highlighted!</li>
<li>See documentation in <a href="https://github.com/whatwg/html/blob/main/CONTRIBUTING.md#algorithms">https://github.com/whatwg/html/blob/main/CONTRIBUTING.md#algorithms</a></li>
</ul>
</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Thu Sep 25 2025 01:51:20 GMT-0700 (Pacific Daylight Time)">08:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@lwarlow:igalia.com">Luke Warlow</span>&gt;</div></td><td class="msg-cell">Is it intentional this only works on single page?</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Thu Sep 25 2025 02:00:52 GMT-0700 (Pacific Daylight Time)">09:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@lwarlow:igalia.com">Luke Warlow</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/whatwg/html/pull/11705">https://github.com/whatwg/html/pull/11705</a></td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Thu Sep 25 2025 08:02:33 GMT-0700 (Pacific Daylight Time)">15:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell">Is there a reason we haven't enabled auto-merge?</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Thu Sep 25 2025 08:36:50 GMT-0700 (Pacific Daylight Time)">15:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">zcorpan</span>: CI is not that slow. And sometimes it leads to accidents I think because you can still push to the branch and that might end up getting merged, but not as a linear commit necessarily.</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Thu Sep 25 2025 08:39:14 GMT-0700 (Pacific Daylight Time)">15:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">annevk</span>: ok, fair. I didn't know pushing another commit would also be auto-merged</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Thu Sep 25 2025 11:48:35 GMT-0700 (Pacific Daylight Time)">18:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><p>A problem I've run into several times is that AbortSignals hold their listeners even after being aborted. For long-lived signals this often causes leaks. This is observable, even, because someone can manually fire a <code>dispatchEvent(new CustomEvent('abort'))</code> even after the signal is aborted.</p>
<p>Is there any reason that AbortController's <code>.abort()</code> couldn't remove the existing listeners? It already removes any web platform stuff which is listening (<a href="https://dom.spec.whatwg.org/#run-the-abort-steps">https://dom.spec.whatwg.org/#run-the-abort-steps</a>, step 2) but afaict user-defined abortables can't opt in to this.</p>
</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Thu Sep 25 2025 11:49:50 GMT-0700 (Pacific Daylight Time)">18:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">The best you can do right now is to always use <code>{ once: true }</code>, but even that isn't quite the same because then it will be removed if someone does a <code>signal.dispatchEvent(new CustomEvent('abort'))</code></td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Thu Sep 25 2025 11:55:08 GMT-0700 (Pacific Daylight Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><p>Having AbortController's <code>abort()</code> automatically remove listeners from the signal would be very helpful but really want I want is for user-defined abortables to automatically get the same behavior as web-platform ones, i.e., bypassing the event infrastructure entirely.</p>
<p>That gives you things you basically always want:</p>
<ul>
<li>someone manually doing a <code>dispatchEvent</code> on the <code>signal</code> won't trigger your callback</li>
<li>another listener doing <code>stopImmediatePropagation</code> won't <em>prevent</em> your callback from being triggered</li>
<li>the callback is automatically released once the signal is aborted</li>
<li>adding a callback after the signal is already aborted won't do anything (and in particular won't hold a reference to your callback)</li>
</ul>
<p>I don't understand why the web platform uses a completely different set of infrastructure for abortables with all these nice properties and forces user code into this second-class event-based path with a bunch of footguns.</p>
</td></tr>

</tbody></table></div></div></div>
</body></html>