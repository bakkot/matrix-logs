<!DOCTYPE html><html><head>
  <title>WHATWG on 2021-09-27</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2021-09-27<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2021-09-26" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    
<div class="room-list-wrapper">Active:<br>
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/" class="current-room">WHATWG</a></li>
</ul>
</div>
<br>
<div class="room-list-wrapper">Historical:<br>
<ul class="room-list">
<li><a href="../irc-tc39/">#tc39</a></li>
<li><a href="../irc-tc39-delegates/">#tc39-delegates</a></li>
<li><a href="../irc-tc39-editor-group/">#tc39-editor-group</a></li>
<li><a href="../irc-whatwg/">#whatwg</a></li>
</ul>
</div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>
<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Sun Sep 26 2021 22:18:42 GMT-0700 (Pacific Daylight Time)">05:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-11">Andreu Botella (he/they)</span>: yeah, otherwise it would have used ASCII whitespace (I think it might have done so initially, even)</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Sun Sep 26 2021 22:21:11 GMT-0700 (Pacific Daylight Time)">05:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">timothygu</span>: that's a nice find, also :-(</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Sun Sep 26 2021 22:24:53 GMT-0700 (Pacific Daylight Time)">05:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@hsivonen:mozilla.org">hsivonen</span>&gt;</div></td><td class="msg-cell">Feeling conflicted about tests like <a href="https://github.com/web-platform-tests/wpt/blob/master/html/semantics/scripting-1/the-script-element/script-charset-02.html">https://github.com/web-platform-tests/wpt/blob/master/html/semantics/scripting-1/the-script-element/script-charset-02.html</a> passing review. On one hand, it caught a bug (not yet sure what) in my code. On the other hand, it tests something more than it's meant to. (Note the location of the <code>meta</code> after a <code>div</code>.)</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Sun Sep 26 2021 23:35:23 GMT-0700 (Pacific Daylight Time)">06:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">hsivonen</span>: that's likely to happen I think if there isn't a lot of good coverage to begin with, but I also suspect that the &lt;div&gt; coming before was overlooked or considered inconsequential</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Sun Sep 26 2021 23:37:00 GMT-0700 (Pacific Daylight Time)">06:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@hsivonen:mozilla.org">hsivonen</span>&gt;</div></td><td class="msg-cell">Earlier, I found a bug in my code due to WPT author metadata having non-ASCII even though the test lacked <code>&lt;meta charset=utf-8&gt;</code>, so I guess that was good actually.</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Sun Sep 26 2021 23:47:19 GMT-0700 (Pacific Daylight Time)">06:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">therealandrecasal</span>: commits prefixed with Meta:, Editorial:, or Review Draft Publication: don't make it to Twitter</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Mon Sep 27 2021 00:07:53 GMT-0700 (Pacific Daylight Time)">07:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell">Hi <span class="nick-12">annevk</span> , seems like I'm back in the business of HTML/Fetch/resource-timing integration :) have a couple of PRs for when you have the time (<a href="https://github.com/whatwg/fetch/pull/1311">https://github.com/whatwg/fetch/pull/1311</a> and <a href="https://github.com/whatwg/fetch/pull/1309">https://github.com/whatwg/fetch/pull/1309</a>)</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Mon Sep 27 2021 01:33:09 GMT-0700 (Pacific Daylight Time)">08:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tammyy:matrix.org">ali ikram</span>&gt;</div></td><td class="msg-cell">I am new here. Don't know much about this.
<a href="https://sixtimesanhour.com/">https://sixtimesanhour.com/</a></td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Mon Sep 27 2021 01:43:36 GMT-0700 (Pacific Daylight Time)">08:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">Noam Rosenthal</span>: that's great, I have a bit of a backlog today; not sure if there's anyone else that can help with reviewing but that would be nice</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Mon Sep 27 2021 01:56:30 GMT-0700 (Pacific Daylight Time)">08:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">annevk</span>: no problem, it's there and ready for when your backlog permits.</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Mon Sep 27 2021 02:52:51 GMT-0700 (Pacific Daylight Time)">09:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Jake Archibald</span>: are you taking document.domain into account when determining the origin for history entries? I guess if the origin is the result of URL + sandbox it won't matter, but if the origin is taken from the document/global somehow we have to be careful.</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Mon Sep 27 2021 02:53:30 GMT-0700 (Pacific Daylight Time)">09:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Jake Archibald</span>: it came to mind when reading the history.state issue</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Mon Sep 27 2021 02:55:21 GMT-0700 (Pacific Daylight Time)">09:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">annevk</span>: yeah, I haven't fully understood <code>document.domain</code> yet. Eg, does it change storage buckets? What happens to an existing IDB connection?</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Mon Sep 27 2021 02:59:01 GMT-0700 (Pacific Daylight Time)">09:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Jake Archibald</span>: storage doesn't work for opaque origins and we essentially use the unmodified tuple origin and you'd do a same origin comparison with that (rather than same origin-domain)</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Mon Sep 27 2021 03:09:06 GMT-0700 (Pacific Daylight Time)">10:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><p><span class="nick-12">annevk</span>: I'm not 100% what to do with the origin of history entries yet, but my gut feeling is:</p>
<ul>
<li>If there's a redirect on traversal, clear state associated with the history entry, and update the entry URL.</li>
<li>If the document is 'born' in a different origin than the entry URL (sandboxing, error documents) then the history state remains there, but the document cannot access it.</li>
<li><code>document.domain</code> has no impact.</li>
</ul>
<p><code>appHistory</code> introduces a new 'thing' here, in that a sandboxed page an do a series of fragment navigations, and the data in those fragments will later be revealed to a non-sandboxed page, because the entries are same-origin. I'm not really sure what to do about that.</p>
</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Mon Sep 27 2021 03:11:47 GMT-0700 (Pacific Daylight Time)">10:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Jake Archibald</span>: perhaps we can store an opaque flag on the history entry that would avoid revealing it in those cases?</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Mon Sep 27 2021 03:12:40 GMT-0700 (Pacific Daylight Time)">10:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Jake Archibald</span>: the 'born' case also seems reason to clear state to me</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Mon Sep 27 2021 03:15:11 GMT-0700 (Pacific Daylight Time)">10:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">annevk</span>: The 'born in different domain' case can only happen due to errors and sandboxing right? With sandboxing we don't grant access to storage anyway, and in the error case clearing state seems bad, since a refresh might recover from the error</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Mon Sep 27 2021 03:21:32 GMT-0700 (Pacific Daylight Time)">10:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">Yeah, maybe. I guess in the specific scenario of short-lived history that is the most likely. Also when coupled with the same origin limitation as if the domain was retired none of the other pages would work either.</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Mon Sep 27 2021 05:00:16 GMT-0700 (Pacific Daylight Time)">12:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">annevk</span>: If a script is no-cors, and it triggers an unhandled exception, we normalise the error and remove the stack. But, if a another script catches the error via <code>try</code>/<code>catch</code>, you get the full error &amp; stack. Is that right? Why is the latter ok?</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Mon Sep 27 2021 05:03:20 GMT-0700 (Pacific Daylight Time)">12:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Jake Archibald</span>: see <a href="https://github.com/whatwg/html/issues/2440">https://github.com/whatwg/html/issues/2440</a> and <a href="https://github.com/whatwg/html/issues/958">https://github.com/whatwg/html/issues/958</a></td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Mon Sep 27 2021 05:03:36 GMT-0700 (Pacific Daylight Time)">12:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell">ta</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Mon Sep 27 2021 10:10:55 GMT-0700 (Pacific Daylight Time)">17:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">annevk</span> should I get a spec PR together for <a href="https://github.com/whatwg/fetch/issues/1310#issuecomment-927889382">https://github.com/whatwg/fetch/issues/1310#issuecomment-927889382</a>, or does it need more discussion?</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Mon Sep 27 2021 10:20:51 GMT-0700 (Pacific Daylight Time)">17:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Jake Archibald</span>: did Chrome's networking and security team have a look? It's probably okay though, within those limits</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Mon Sep 27 2021 10:21:20 GMT-0700 (Pacific Daylight Time)">17:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">What I'd prefer btw is standardize a TLS handshake that removes the need for the preflight</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Mon Sep 27 2021 10:21:50 GMT-0700 (Pacific Daylight Time)">17:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">annevk</span> I'll loop them in. The TLS sounds interesting</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Mon Sep 27 2021 10:24:43 GMT-0700 (Pacific Daylight Time)">17:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Jake Archibald</span>: basically something like My-Server-Is-CORS-Aware: [insert origin here] in TLS speak</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Mon Sep 27 2021 10:25:46 GMT-0700 (Pacific Daylight Time)">17:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">The badness is that someone could declare this as a policy and the server not actually being aware as these things are somewhat far apart from each other, but hopefully it being somewhat difficult helps with that</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Mon Sep 27 2021 15:56:38 GMT-0700 (Pacific Daylight Time)">22:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">sideshowbarker</span>: You probably want to block this dude <a href="https://github.com/mdn/content/issues/9306">https://github.com/mdn/content/issues/9306</a>; he's a crank who's escaped the JS Pipeline Operator repo and started spamming a bunch of other places.</td></tr>

</tbody></table></div></div></div>
</body></html>