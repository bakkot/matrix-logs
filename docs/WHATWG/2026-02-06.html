<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>WHATWG on 2026-02-06</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "WHATWG";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2026-02-06<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2026-02-05" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Thu Feb 05 2026 20:12:49 GMT-0800 (Pacific Standard Time)">04:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@kaiido:matrix.org">Kaiido</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">jmdyck</span>: I believe it is correct albeit not clear, the Text nodes are being excluded, they are the descendants of &lt;script&gt; or <a href="svg:script">svg:script</a> that are descendants of the &lt;legend&gt;. So they're indeed "descendants of descendants".</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Fri Feb 06 2026 00:06:39 GMT-0800 (Pacific Standard Time)">08:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">Phil Pizlo finally putting his Fil-C work to good use: <a href="https://yoshell.ai">https://yoshell.ai</a> ðŸ˜€</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Fri Feb 06 2026 03:22:06 GMT-0800 (Pacific Standard Time)">11:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">zcorpan</span>: I'm trying to understand how <code>&lt;script&gt;console.log("&lt;/script&gt;")&lt;/script&gt;</code> manages to "back up" when it sees the "&gt;" inside the console.log string so that the script element text is just 'console.log("'. Do you know what tokenizer state this is? It looks to me like "Script data double escape start state" or "Script data double escape end state", but it looks like 'console.log("&lt;/script' has already been emitted as character tokens at that point. How does the tokenizer "take back" what's already been emitted?</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Fri Feb 06 2026 03:32:07 GMT-0800 (Pacific Standard Time)">11:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">foolip</span>: it doesn't back up it just closes the script element there.<br><a href="https://html.spec.whatwg.org/#script-data-state">https://html.spec.whatwg.org/#script-data-state</a><br><a href="https://html.spec.whatwg.org/#script-data-less-than-sign-state">https://html.spec.whatwg.org/#script-data-less-than-sign-state</a><br><a href="https://html.spec.whatwg.org/#script-data-end-tag-open-state">https://html.spec.whatwg.org/#script-data-end-tag-open-state</a><br><a href="https://html.spec.whatwg.org/#script-data-end-tag-name-state">https://html.spec.whatwg.org/#script-data-end-tag-name-state</a></td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Fri Feb 06 2026 03:33:29 GMT-0800 (Pacific Standard Time)">11:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">foolip</span>: you need &lt;script&gt;&lt;!-- to enter <a href="https://html.spec.whatwg.org/#script-data-escaped-state">https://html.spec.whatwg.org/#script-data-escaped-state</a></td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Fri Feb 06 2026 03:35:04 GMT-0800 (Pacific Standard Time)">11:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">foolip</span>: and &lt;script&gt;&lt;!--&lt;script&gt; to enter <a href="https://html.spec.whatwg.org/#script-data-double-escaped-state">https://html.spec.whatwg.org/#script-data-double-escaped-state</a> (which causes a single &lt;/script&gt; to not close the element)</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Fri Feb 06 2026 03:38:13 GMT-0800 (Pacific Standard Time)">11:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><a href="https://html.spec.whatwg.org/#script-data-double-escape-end-state">https://html.spec.whatwg.org/#script-data-double-escape-end-state</a> handling &gt; is where &lt;/script&gt; is sometimes "ignored"</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Fri Feb 06 2026 03:38:19 GMT-0800 (Pacific Standard Time)">11:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">Thanks, the <code>&lt;script&gt;console.log("&lt;/script&gt;")&lt;/script&gt;</code> case is clear now. It does use the temp buffer and if that &gt; inside the string isn't there, it emits a character token for each char in the temp buffer.</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Fri Feb 06 2026 03:39:03 GMT-0800 (Pacific Standard Time)">11:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">That explains how the parallel lowercase + original case is handled in that case.</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Fri Feb 06 2026 03:40:06 GMT-0800 (Pacific Standard Time)">11:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">The context is I did <a href="https://whatpr.org/html/12118/parsing.html#processing-instruction-target-state">https://whatpr.org/html/12118/parsing.html#processing-instruction-target-state</a> yesterday and although it's readable, I think it's an unusual use of the temp buffer that maybe I should undo.</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Fri Feb 06 2026 03:40:30 GMT-0800 (Pacific Standard Time)">11:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">is there a way to have a "back" button/link without js?</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Fri Feb 06 2026 03:40:43 GMT-0800 (Pacific Standard Time)">11:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">The motivation was to avoid saying "discard the current token" which the tokenizer never does elsewhere (including in Blink's implementation).</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Fri Feb 06 2026 03:41:00 GMT-0800 (Pacific Standard Time)">11:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@devsnek:matrix.org">snek</span>&gt;</div></td><td class="msg-cell">i was hoping there would be some obsecure href target or button command or something, but i couldn't find anything</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Fri Feb 06 2026 03:41:33 GMT-0800 (Pacific Standard Time)">11:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">The problem is there might be unbounded buffering before we know whether we're going to create a PI or a bogus comment, and that we need the data lowercase for the first but the original for the latter...</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Fri Feb 06 2026 03:44:20 GMT-0800 (Pacific Standard Time)">11:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell">Hmm right. Maybe the target should preserve case?</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Fri Feb 06 2026 03:44:44 GMT-0800 (Pacific Standard Time)">11:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">Huh, I didn't even think about that.</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Fri Feb 06 2026 03:45:36 GMT-0800 (Pacific Standard Time)">11:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">What I did consider was letting tree construction lowercase the target.</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Fri Feb 06 2026 03:46:15 GMT-0800 (Pacific Standard Time)">11:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">But preserving case is very un-HTML-y isn't it?</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Fri Feb 06 2026 03:48:39 GMT-0800 (Pacific Standard Time)">11:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">foolip</span>: though <a href="https://html.spec.whatwg.org/#script-data-escaped-end-tag-name-state">https://html.spec.whatwg.org/#script-data-escaped-end-tag-name-state</a> creates an end tag with arbitrary length and then throws it away</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Fri Feb 06 2026 03:49:51 GMT-0800 (Pacific Standard Time)">11:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell">Except implementations could have a state to check what's up after temporary buffer &gt; "script".length</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Fri Feb 06 2026 03:50:08 GMT-0800 (Pacific Standard Time)">11:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">Hmm, but it never says "discard the token" or something like, it just emit another token.</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Fri Feb 06 2026 03:50:45 GMT-0800 (Pacific Standard Time)">11:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">foolip</span>: anything else</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Fri Feb 06 2026 03:51:09 GMT-0800 (Pacific Standard Time)">11:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell">or &gt; when temporary buffer != "script"</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Fri Feb 06 2026 03:52:18 GMT-0800 (Pacific Standard Time)">11:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">Right, but seemingly not explicitly saying that the current tag token is no longer current, right?</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Fri Feb 06 2026 03:52:45 GMT-0800 (Pacific Standard Time)">11:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">Maybe something else is guaranteed to say "create a bla token" before anything can get confused.</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Fri Feb 06 2026 03:53:29 GMT-0800 (Pacific Standard Time)">11:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell">Right the end tag token is created but then nothing happens with it</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Fri Feb 06 2026 03:54:23 GMT-0800 (Pacific Standard Time)">11:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">I see that in Blink, for this case, there's a special <code>buffered_end_tag_name_</code>, so the token is only created once we know what it's going to be.</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Fri Feb 06 2026 03:57:45 GMT-0800 (Pacific Standard Time)">11:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell">How much is ok to buffer? For compat with &lt;?lit$ it's just 4 chars</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Fri Feb 06 2026 03:58:43 GMT-0800 (Pacific Standard Time)">11:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">I checked and it looks like Blink's buffer can grow unbounded. (I expected to find a hardcoded max size that is impossible to exceed because of how it's used, but no.)</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Fri Feb 06 2026 03:58:59 GMT-0800 (Pacific Standard Time)">11:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">Do you think there are important rules to follow here? Possible principles I've inferred include (1) only put things in the temp buffer to compare them, not to read them back (2) don't create a token unless it will be emitted (3) normalize casing in tokenization, not tree construction and (4) no unbounded buffering.</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Fri Feb 06 2026 03:59:41 GMT-0800 (Pacific Standard Time)">11:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">I don't think all of these can be hard rules at the same time.</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Fri Feb 06 2026 03:59:54 GMT-0800 (Pacific Standard Time)">11:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell">The temporary buffer is sometimes emitted as characters</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Fri Feb 06 2026 04:01:09 GMT-0800 (Pacific Standard Time)">12:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">Yes, you're right, so taking it and sticking it into comment data feels OK, and what I did.</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Fri Feb 06 2026 04:01:37 GMT-0800 (Pacific Standard Time)">12:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">Just that the wording is slightly different because for character tokens they are emitted one by one.</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Fri Feb 06 2026 04:02:40 GMT-0800 (Pacific Standard Time)">12:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">We don't actually need unbounded buffering and lookahead, at most  <code>"xml-stylesheet".length + 1</code> is strictly required.</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Fri Feb 06 2026 04:03:17 GMT-0800 (Pacific Standard Time)">12:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">No wait, that's wrong. After the recent change there's also <code>&lt;?superduperlong$not-a-pi?&gt;</code>.</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Fri Feb 06 2026 04:04:52 GMT-0800 (Pacific Standard Time)">12:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell">Right. But we could place some limit on how many characters to check</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Fri Feb 06 2026 04:05:19 GMT-0800 (Pacific Standard Time)">12:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">And after that if you see a $ we make it part of the target instead?</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Fri Feb 06 2026 04:05:25 GMT-0800 (Pacific Standard Time)">12:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell">Yeah</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Fri Feb 06 2026 04:05:47 GMT-0800 (Pacific Standard Time)">12:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">The test cases are going to be fun at least :)</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Fri Feb 06 2026 04:08:21 GMT-0800 (Pacific Standard Time)">12:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">zcorpan</span>: lit$ doesn't show up in httparchive, any idea how we can find out if there are more cases like it?</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Fri Feb 06 2026 04:08:36 GMT-0800 (Pacific Standard Time)">12:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">use counters?</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Fri Feb 06 2026 04:09:09 GMT-0800 (Pacific Standard Time)">12:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">foolip</span>: My query didn't include PIs with $</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Fri Feb 06 2026 04:09:42 GMT-0800 (Pacific Standard Time)">12:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">Oh right, these are just the ones that would be valid PIs per our new stricter target names.</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Fri Feb 06 2026 04:10:12 GMT-0800 (Pacific Standard Time)">12:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell">Yes. Or <a href="https://docs.google.com/spreadsheets/d/1o04eP_BwH1u7X8CyyLUvxOsntZNmfrDalfhU7ldVqlU/edit?usp=sharing">https://docs.google.com/spreadsheets/d/1o04eP_BwH1u7X8CyyLUvxOsntZNmfrDalfhU7ldVqlU/edit?usp=sharing</a> did (just required the first char to be a-z), but was only 1% of the data</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Fri Feb 06 2026 04:10:59 GMT-0800 (Pacific Standard Time)">12:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">Noam Rosenthal</span>: you also have a spreadsheet right?</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Fri Feb 06 2026 04:12:21 GMT-0800 (Pacific Standard Time)">12:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-8">Noam Rosenthal</span>: you also have a spreadsheet right?</blockquote></mx-reply>This one looks more comprehensive but similar</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Fri Feb 06 2026 04:16:25 GMT-0800 (Pacific Standard Time)">12:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">foolip</span>: checking <a href="https://github.com/search?q=%2F%3C%5C%3F%5Ba-zA-Z%5D%2F+language%3Ahtml+NOT+%22%3C%3Fphp%22+NOT+%22%3C%3Fxml%22&amp;type=code">https://github.com/search?q=%2F%3C%5C%3F%5Ba-zA-Z%5D%2F+language%3Ahtml+NOT+%22%3C%3Fphp%22+NOT+%22%3C%3Fxml%22&amp;type=code</a> it looks like sometimes end tags are typoed as e.g. <code>&lt;?a&gt;</code></td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Fri Feb 06 2026 04:19:04 GMT-0800 (Pacific Standard Time)">12:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">So the concrete options I see are (1) preserve case in PI target (2) buffer both original + lowercased data until we know if it will be a PI or comment (3) buffer only original and then lowercase it when creating the PI token  (4) initially create a comment token and replace it with a PI token when we have a valid target.</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Fri Feb 06 2026 04:19:52 GMT-0800 (Pacific Standard Time)">12:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">I think 2-4 are equivalent, mostly a matter of what fits best with existing patterns.</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Fri Feb 06 2026 04:21:24 GMT-0800 (Pacific Standard Time)">12:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">hsivonen</span>: do you have an opinion? ^</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Fri Feb 06 2026 04:21:39 GMT-0800 (Pacific Standard Time)">12:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@foolip:matrix.org">foolip</span>&gt;</div></td><td class="msg-cell">Oh, and (5) fixed length buffering or lookahead, so that the rules change after N characters are consumed as target.</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Fri Feb 06 2026 04:56:42 GMT-0800 (Pacific Standard Time)">12:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@hsivonen:mozilla.org">hsivonen</span>&gt;</div></td><td class="msg-cell">Is the only downside of preserving case inconsistency with the rest of HTML?</td></tr>

</tbody></table></div></div></div>
</body></html>