<!DOCTYPE html><html><head>
  <title>WHATWG on 2022-09-14</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "WHATWG";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2022-09-14<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-09-13" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Sep 13 2022 21:29:43 GMT-0700 (Pacific Daylight Time)">04:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@hsivonen:mozilla.org">hsivonen</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-15">hsivonen</span>: <a href="https://www.w3.org/events/meetings/118f6c22-1545-4c3b-9581-260621fec362">https://www.w3.org/events/meetings/118f6c22-1545-4c3b-9581-260621fec362</a> - we've moved the session earlier</blockquote></mx-reply>Thanks. I'll call in.</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Sep 14 2022 01:45:46 GMT-0700 (Pacific Daylight Time)">08:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Hi! I have a question regarding modules imports.
When you dynamically import a module that is already in the modules map, does it yield to the event loop? My reading of the spec is "no", because it schedules a task to continue the import only when it performs an actual fetch, but both Firefox and Chrome seem to yield. They only settle the dynamic import promise in the current promise tasks queue if the import specifier is malformed.</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed Sep 14 2022 01:51:19 GMT-0700 (Pacific Daylight Time)">08:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ms2ger:igalia.com">Ms2ger 游눌游눌</span>&gt;</div></td><td class="msg-cell"><a href="https://html.spec.whatwg.org/multipage/webappapis.html#hostimportmoduledynamically(referencingscriptormodule,-modulerequest,-promisecapability)">https://html.spec.whatwg.org/multipage/webappapis.html#hostimportmoduledynamically(referencingscriptormodule,-modulerequest,-promisecapability)</a> - the async returning doesn't seem particularly well integrated with the event loop</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Sep 14 2022 01:57:40 GMT-0700 (Pacific Daylight Time)">08:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Right, I'm removing it in <a href="https://github.com/whatwg/html/pull/8264">https://github.com/whatwg/html/pull/8264</a> and I'm not 100% sure that I got that part correctly.</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Sep 14 2022 03:45:08 GMT-0700 (Pacific Daylight Time)">10:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@hsivonen:mozilla.org">hsivonen</span>&gt;</div></td><td class="msg-cell">What mechanism makes the document.write in <a href="https://github.com/web-platform-tests/wpt/blob/master/html/browsers/browsing-the-web/navigating-across-documents/010.html">https://github.com/web-platform-tests/wpt/blob/master/html/browsers/browsing-the-web/navigating-across-documents/010.html</a> not interfere with the load of href.html?</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Sep 14 2022 03:45:15 GMT-0700 (Pacific Daylight Time)">10:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@hsivonen:mozilla.org">hsivonen</span>&gt;</div></td><td class="msg-cell">in Chrome that is</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Sep 14 2022 03:46:00 GMT-0700 (Pacific Daylight Time)">10:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@hsivonen:mozilla.org">hsivonen</span>&gt;</div></td><td class="msg-cell">In Firefox currently, the mechanism is that the about:blank isn't the initial about:blank anymore, so the navigation does not reuse the inner window, so the <code>document.write</code> happens on the old (about:blank) document.</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed Sep 14 2022 03:47:15 GMT-0700 (Pacific Daylight Time)">10:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@hsivonen:mozilla.org">hsivonen</span>&gt;</div></td><td class="msg-cell">However, when inner window reuse takes place, which it presumably does in Chrome, what makes the <code>document.write</code> not blow away the new document that has become the document of the inner window while the event loop for the sync XHR was spinning?</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed Sep 14 2022 03:49:21 GMT-0700 (Pacific Daylight Time)">10:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@hsivonen:mozilla.org">hsivonen</span>&gt;</div></td><td class="msg-cell">When Chrome aborts the old fetches (including the XHR), does it also manage to abort scripts that are being executed so that the JavaScript program aborts before xhr.send() returns?</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed Sep 14 2022 03:49:43 GMT-0700 (Pacific Daylight Time)">10:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@hsivonen:mozilla.org">hsivonen</span>&gt;</div></td><td class="msg-cell">I guess I should test that hypothesis.</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed Sep 14 2022 03:54:37 GMT-0700 (Pacific Daylight Time)">10:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@hsivonen:mozilla.org">hsivonen</span>&gt;</div></td><td class="msg-cell">I can't log with console.log() from within the javascript: URL in Chrome. Is Chrome not executing the javascript: URL at all for some reason?</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed Sep 14 2022 04:26:08 GMT-0700 (Pacific Daylight Time)">11:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@aplikasi:matrix.org">Haerul Fuad</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">smaug</span>: smaug</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed Sep 14 2022 06:46:56 GMT-0700 (Pacific Daylight Time)">13:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@tashasyarifah:matrix.org">tashasyarifah</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Hi Tasha, what does "didn't work" mean? Did you get an error?</blockquote></mx-reply>So, I clicked signed as an Individual and then submit. The result is I got an error 400. It says Invalid 'entity-name' field. I don't see any form or anything. I'm so confused.</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Wed Sep 14 2022 07:23:22 GMT-0700 (Pacific Daylight Time)">14:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ms2ger:igalia.com">Ms2ger 游눌游눌</span>&gt;</div></td><td class="msg-cell"><blockquote>
<p>with arguments method, args and, undefined.</p>
</blockquote>
</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed Sep 14 2022 07:23:28 GMT-0700 (Pacific Daylight Time)">14:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ms2ger:igalia.com">Ms2ger 游눌游눌</span>&gt;</div></td><td class="msg-cell">Is that the Cambridge comma?</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed Sep 14 2022 09:51:19 GMT-0700 (Pacific Daylight Time)">16:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan_:matrix.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><span class="nick-11">tashasyarifah</span>: did you click the triangle in " If signing as an Individual" or did you click the link "Individual"?</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Wed Sep 14 2022 09:52:37 GMT-0700 (Pacific Daylight Time)">16:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan_:matrix.org">zcorpan</span>&gt;</div></td><td class="msg-cell">Maybe &lt;details&gt; here is confusing UI</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Wed Sep 14 2022 09:53:13 GMT-0700 (Pacific Daylight Time)">16:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan_:matrix.org">zcorpan</span>&gt;</div></td><td class="msg-cell">and links in &lt;summary&gt; is certainly confusing UI (<a href="https://github.com/whatwg/html/issues/2272">https://github.com/whatwg/html/issues/2272</a>)</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Wed Sep 14 2022 09:55:03 GMT-0700 (Pacific Daylight Time)">16:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell"><span class="nick-9">nicolo-ribaudo</span>: I guess we should match browsers here, and queue a task regardless. Even if IMO it would have been more elegant not to yield, this is what I get for using imprecise spec constructs; implementers used what they are familiar with / what is well specced (task yielding) and now we end up here.</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Wed Sep 14 2022 09:55:53 GMT-0700 (Pacific Daylight Time)">16:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">Web platform tests for this would be ideal if possible :)</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Wed Sep 14 2022 09:59:56 GMT-0700 (Pacific Daylight Time)">16:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Yeah I agree that not yielding would be more elegant... I'll try to check how the other browsers behave; if they all agree or if there is inconsistent behaviour.</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Wed Sep 14 2022 10:54:34 GMT-0700 (Pacific Daylight Time)">17:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan_:matrix.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">hsivonen</span>: are you able to review <a href="https://github.com/whatwg/html/pull/8271">https://github.com/whatwg/html/pull/8271</a> ?</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Wed Sep 14 2022 11:24:17 GMT-0700 (Pacific Daylight Time)">18:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@hsivonen:mozilla.org">hsivonen</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-15">hsivonen</span>: are you able to review <a href="https://github.com/whatwg/html/pull/8271">https://github.com/whatwg/html/pull/8271</a> ?</blockquote></mx-reply>I set a reminder for myself for tomorrow</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Wed Sep 14 2022 11:53:24 GMT-0700 (Pacific Daylight Time)">18:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan_:matrix.org">zcorpan</span>&gt;</div></td><td class="msg-cell">ty</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Wed Sep 14 2022 12:22:17 GMT-0700 (Pacific Daylight Time)">19:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@hsivonen:mozilla.org">hsivonen</span>&gt;</div></td><td class="msg-cell">AFAICT Chrome doesn't execute the javascript: URL at all on <a href="https://github.com/web-platform-tests/wpt/blame/master/html/browsers/browsing-the-web/navigating-across-documents/010.html">https://github.com/web-platform-tests/wpt/blame/master/html/browsers/browsing-the-web/navigating-across-documents/010.html</a> . Safari, however, is really strange: onmessage sees document.write() winning over the href navigation but what the user sees is the href navigation--not the document.write.</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Wed Sep 14 2022 12:22:39 GMT-0700 (Pacific Daylight Time)">19:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@hsivonen:mozilla.org">hsivonen</span>&gt;</div></td><td class="msg-cell">Currently my local patch for Gecko has document.write winning both for script and rendering purposes.</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Wed Sep 14 2022 12:22:51 GMT-0700 (Pacific Daylight Time)">19:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@hsivonen:mozilla.org">hsivonen</span>&gt;</div></td><td class="msg-cell">Under what theory should document.write() not win?</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Wed Sep 14 2022 12:24:39 GMT-0700 (Pacific Daylight Time)">19:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@hsivonen:mozilla.org">hsivonen</span>&gt;</div></td><td class="msg-cell">That is, what's the logic that the test is trying to test? That aborting the javascript: URL navigation should abort the script excecution and not just the pseudo-network response resulting from the returned string?</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Wed Sep 14 2022 12:24:45 GMT-0700 (Pacific Daylight Time)">19:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@hsivonen:mozilla.org">hsivonen</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">jgraham</span>: ^</td></tr>

</tbody></table></div></div></div>
</body></html>