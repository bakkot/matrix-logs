<!DOCTYPE html><html><head>
  <title>WHATWG on 2024-04-02</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "WHATWG";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2024-04-02<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2024-04-01" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Apr 02 2024 02:39:41 GMT-0700 (Pacific Daylight Time)">09:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell">Looking for mathml content in httparchive but it's almost entirely this: <a href="https://github.com/facebook/react/blob/6e650109999e5f483fcb910ff20fe8148a566cb2/packages/react-dom-bindings/src/server/ReactFizzConfigDOM.js#L3934">https://github.com/facebook/react/blob/6e650109999e5f483fcb910ff20fe8148a566cb2/packages/react-dom-bindings/src/server/ReactFizzConfigDOM.js#L3934</a> (cc <span class="nick-8">bkardell</span> )</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Apr 02 2024 02:49:16 GMT-0700 (Pacific Daylight Time)">09:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><a href="https://chromestatus.com/metrics/feature/timeline/popularity/4403">https://chromestatus.com/metrics/feature/timeline/popularity/4403</a> might be better. Maybe mathml on the web usually isn't in markup but generated from script?</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Apr 02 2024 04:15:42 GMT-0700 (Pacific Daylight Time)">11:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell">I really only know one website: <a href="https://golem.ph.utexas.edu/~distler/blog/">https://golem.ph.utexas.edu/~distler/blog/</a></td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue Apr 02 2024 04:16:17 GMT-0700 (Pacific Daylight Time)">11:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell">There used to be a website that collected all of them, but I don't remember that one</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Tue Apr 02 2024 05:44:46 GMT-0700 (Pacific Daylight Time)">12:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bkardell:igalia.com">bkardell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Looking for mathml content in httparchive but it's almost entirely this: <a href="https://github.com/facebook/react/blob/6e650109999e5f483fcb910ff20fe8148a566cb2/packages/react-dom-bindings/src/server/ReactFizzConfigDOM.js#L3934">https://github.com/facebook/react/blob/6e650109999e5f483fcb910ff20fe8148a566cb2/packages/react-dom-bindings/src/server/ReactFizzConfigDOM.js#L3934</a> (cc <span class="nick-8">bkardell</span> )</blockquote></mx-reply>yeah not surprising since the http archive is mainly getting home pages and even sites dedicated to math and science don't usually put math on the home page :). There are sites like <a href="https://ar5iv.labs.arxiv.org/">https://ar5iv.labs.arxiv.org/</a>, for example..</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Tue Apr 02 2024 05:48:13 GMT-0700 (Pacific Daylight Time)">12:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bkardell:igalia.com">bkardell</span>&gt;</div></td><td class="msg-cell">and wikipedia has many millions but currently (because of core interop issues - that's why we're here) still doesn't use it for rendering, only for a11y -- so like <a href="https://en.wikipedia.org/wiki/Mass%E2%80%93energy_equivalence">https://en.wikipedia.org/wiki/Mass%E2%80%93energy_equivalence</a> has 30 mathml instances related to images of math - ick</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Tue Apr 02 2024 05:51:20 GMT-0700 (Pacific Daylight Time)">12:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bkardell:igalia.com">bkardell</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">zcorpan</span>: we have a few very rich sources - is there something you're trying to answer specifically that I can help with or just generally poking around?</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Tue Apr 02 2024 05:53:51 GMT-0700 (Pacific Daylight Time)">12:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">bkardell</span>: trying to get a sense of how much content uses <code>href</code> and on which elements</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Tue Apr 02 2024 05:56:18 GMT-0700 (Pacific Daylight Time)">12:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bkardell:igalia.com">bkardell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-8">bkardell</span>: trying to get a sense of how much content uses <code>href</code> and on which elements</blockquote></mx-reply>ah well you can see <em>some</em> discussion in that issue (there are some related emails or issues with more on this same topic, but it's pretty generally aligned with this) <a href="https://github.com/w3c/mathml-core/issues/142#issuecomment-1082772082">https://github.com/w3c/mathml-core/issues/142#issuecomment-1082772082</a></td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Tue Apr 02 2024 05:56:37 GMT-0700 (Pacific Daylight Time)">12:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bkardell:igalia.com">bkardell</span>&gt;</div></td><td class="msg-cell"><blockquote>
<p>in the full collection there, there are 30 &lt;mrow with href as opposed 97549 &lt;mi and 3226 &lt;mn</p>
</blockquote>
</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Tue Apr 02 2024 05:58:06 GMT-0700 (Pacific Daylight Time)">12:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bkardell:igalia.com">bkardell</span>&gt;</div></td><td class="msg-cell">the thing is most of the corpuses are in XML toolchains that they are open to some transforms on - many things have been adapted for mathml-core already</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Tue Apr 02 2024 06:00:10 GMT-0700 (Pacific Daylight Time)">13:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bkardell:igalia.com">bkardell</span>&gt;</div></td><td class="msg-cell">That's why I am saying if the group is like "we should prefer mrow because then links still work" I am like, well, only a tiny tiny fraction and the rest you have to transform anyways - let's just fix it properly</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Tue Apr 02 2024 06:03:51 GMT-0700 (Pacific Daylight Time)">13:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell">Right</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Tue Apr 02 2024 06:58:31 GMT-0700 (Pacific Daylight Time)">13:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bkardell:igalia.com">bkardell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Right</blockquote></mx-reply>I do think the a11y tools might be a pretty compelling argument (many are already fine so we'd have to see how difficult the other two are I guess)  - I am just trying to make sure <code>&lt;a&gt;</code> gets a fair shot is all because i think it is clearly the best answer if possible...But I can also accept if it is not, it's not a hill I want to get seriously injured on</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Tue Apr 02 2024 08:00:30 GMT-0700 (Pacific Daylight Time)">15:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bkardell:igalia.com">bkardell</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">zcorpan</span>: do you have all you need or can I help you find more?</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Tue Apr 02 2024 08:01:54 GMT-0700 (Pacific Daylight Time)">15:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">bkardell</span>: a separate use counter for every mathml element in a document with an href attribute, maybe? :)</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Tue Apr 02 2024 08:02:33 GMT-0700 (Pacific Daylight Time)">15:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell">For now my conclusion is that href at all is very rare</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Tue Apr 02 2024 08:10:02 GMT-0700 (Pacific Daylight Time)">15:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bkardell:igalia.com">bkardell</span>&gt;</div></td><td class="msg-cell">hmm, idk - in some sets it is not rare at all. In a few almost every token has an href, but in those cases that is to do a toolip about what it represents or something and would be better maybe as a popover :)</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Tue Apr 02 2024 08:12:48 GMT-0700 (Pacific Daylight Time)">15:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bkardell:igalia.com">bkardell</span>&gt;</div></td><td class="msg-cell">but yeah I guess there are many many docs with no links too</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Tue Apr 02 2024 08:16:12 GMT-0700 (Pacific Daylight Time)">15:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bkardell:igalia.com">bkardell</span>&gt;</div></td><td class="msg-cell">there are also potentially false positives depending on how you count.. like <code>document.querySelectorAll('math [href]').length</code> is too naieve because it will give you positives of links that are in foreign content inside the tokens (which is fine, it's just HTML), and also stuff inside <code>&lt;annotation-xml&gt;</code> which isn't displayed</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Tue Apr 02 2024 08:17:10 GMT-0700 (Pacific Daylight Time)">15:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell">I looked at like 50 that match the chromium use counter and not one had <code>math [href]</code> on a presentation-math element. There was one with a href attribute inside <code>annotation-xml</code> but that was not a rendered element</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Tue Apr 02 2024 08:23:05 GMT-0700 (Pacific Daylight Time)">15:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bkardell:igalia.com">bkardell</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">emilio</span>: had some counters in moz, not sure if they are still there or if they're counting this, but you could check? I mean, he is the one that opened the issue we're all pointing at even - so it's possible :)</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Tue Apr 02 2024 15:36:15 GMT-0700 (Pacific Daylight Time)">22:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@timotijhof:matrix.org">Timo Tijhof</span>&gt;</div></td><td class="msg-cell"><p>I'm trying to preload requests for <code>&lt;script type=module src=…&gt;</code> via the HTTP Link header.</p>
<p>I'm aware of, and have read, the past discussions around why <code>rel=modulepreload</code> was introduced separately instead of within rel=preload. As I understand it, module requests are made with a different CORS setting, plus by signalling the module type this way, browsers can do additional optimizations (e.g. look for indirect imports and preload those as well, and honouring import maps).</p>
<p>I'm also aware that at this time, there is no way to apply an import map to preloaded resources, which is fine, since the server-side in my case knows the flat and full list of "real" requests that will be made.</p>
<p>All that having been said, I can't seem to find in the spec what rel=preload incantation will result in the preloaded result being used by <code>&lt;script type=module&gt;</code>.</p>
<p>In Chrome, if I use <code>Link: &lt;/static/foo.js&gt;;rel=preload;as=script;crossorigin</code> it will correctly satisfy the later demand for <code>&lt;script type=module src=foo.js&gt;</code> by re-using the preload response (I can tell by the timing, the initiator, the order, and there not being a duplicat req).</p>
<p>In Firefox, it doesn't and there's instead a duplicate request made later on.</p>
</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Tue Apr 02 2024 15:52:02 GMT-0700 (Pacific Daylight Time)">22:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@timotijhof:matrix.org">Timo Tijhof</span>&gt;</div></td><td class="msg-cell">Hm.. so via <a href="https://bugzilla.mozilla.org/buglist.cgi?product=Core&amp;short_desc=preload%20crossorigin&amp;classification=Components&amp;query_format=advanced&amp;short_desc_type=allwordssubstr">Bugzilla search</a> I'm finding a related change <a href="https://hg.mozilla.org/mozilla-central/rev/72570ac420f0">https://hg.mozilla.org/mozilla-central/rev/72570ac420f0</a>, where I see in the diff context that Gecko apparently considers an (unspecified?) <code>type=module</code> attribute for <code>preload as=script</code> and discards those. This was done last year for <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1803744">https://bugzilla.mozilla.org/show_bug.cgi?id=1803744</a> which implemented support for the (also unspecified) ability for <code>rel=modulepreload</code> to be used in a Link header.. this despite the standard still saying at <a href="https://html.spec.whatwg.org/multipage/links.html#linkTypes:link-type-preload">https://html.spec.whatwg.org/multipage/links.html#linkTypes:link-type-preload</a> that <code>modulepreload</code> does not have "Link processing".</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Tue Apr 02 2024 15:57:43 GMT-0700 (Pacific Daylight Time)">22:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@timotijhof:matrix.org">Timo Tijhof</span>&gt;</div></td><td class="msg-cell">While that sounds cool (and Firefox-only today, Chrome discards it with a console warning for invalid <code>rel=modulepreload</code> in HTTP), it's actually unusable for my use case because if I use <code>rel=modulepreload</code> in Firefox for all (or even one) of foo.js?v=1, bar.js?v=1 and baz.js?v=1. It ends up doing its recursive logic, and attempt to preload the unversioned dependency URLs of the discovered imports (since the import map isn't known at this time).</td></tr>

</tbody></table></div></div></div>
</body></html>