<!DOCTYPE html><html><head>
  <title>WHATWG on 2024-01-22</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "WHATWG";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2024-01-22<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2024-01-20" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Sun Jan 21 2024 23:30:55 GMT-0800 (Pacific Standard Time)">07:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Domenic</span>: I was looking at <a href="https://github.com/web-platform-tests/wpt/pull/21041">https://github.com/web-platform-tests/wpt/pull/21041</a> again and I think they match implementations, but not the spec. The spec grabs the document when calling parseFromString(). But implementations (and the tests) assume it's grabbed as part of the DOMParser invocation.</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Sun Jan 21 2024 23:31:39 GMT-0800 (Pacific Standard Time)">07:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Domenic</span>: I prototype'd the spec in <a href="https://github.com/WebKit/WebKit/pull/22971">https://github.com/WebKit/WebKit/pull/22971</a> and got a number of test failures.</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Sun Jan 21 2024 23:33:17 GMT-0800 (Pacific Standard Time)">07:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell">There's also some differences across implementations from code inspection. Only Gecko seems to carry over the base URL. And Gecko caches the URL when DOMParser is constructed. So pushState() doesn't impact it. (This fails some tests, though a design like that might be simpler in certain ways.)</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Sun Jan 21 2024 23:34:04 GMT-0800 (Pacific Standard Time)">07:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">Hmm, good catch. Strange that I added tests specifically for this sort of multi-global madness but didn't match the spec when doing so.</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Sun Jan 21 2024 23:44:28 GMT-0800 (Pacific Standard Time)">07:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-1">Domenic</span>: I was looking at <a href="https://github.com/web-platform-tests/wpt/pull/21041">https://github.com/web-platform-tests/wpt/pull/21041</a> again and I think they match implementations, but not the spec. The spec grabs the document when calling parseFromString(). But implementations (and the tests) assume it's grabbed as part of the DOMParser invocation.</blockquote></mx-reply>Wait, no, I think the tests match the spec. "this's relevant global object's associated Document" is equivalent to the global at the time <code>new DOMParser()</code> was called; <code>new DOMParser()</code> creates <code>this</code>.</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Sun Jan 21 2024 23:44:46 GMT-0800 (Pacific Standard Time)">07:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">Your patch prototypes using the current global object's associated Document, which is not what the spec says.</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Sun Jan 21 2024 23:49:24 GMT-0800 (Pacific Standard Time)">07:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Domenic</span>: interesting, thanks! So whenever we use relevant I guess we implicitly require the implementation to store a reference in the constructor. I guess that makes sense.</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Sun Jan 21 2024 23:52:52 GMT-0800 (Pacific Standard Time)">07:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">Yeah, I kind of thought all implementations already did that? Web IDL certainly assumes it.</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Sun Jan 21 2024 23:53:02 GMT-0800 (Pacific Standard Time)">07:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">At least a reference to the global, from which you can get the document</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Sun Jan 21 2024 23:54:14 GMT-0800 (Pacific Standard Time)">07:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Domenic</span>: It looks to be manual in all three implementations. Chromium and WebKit even use a WeakPtr which worries me a little bit, but it's hard to force GC in tests so not sure if my concerns are well-founded.</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Sun Jan 21 2024 23:55:32 GMT-0800 (Pacific Standard Time)">07:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">Hmm yeah, in Chromium there's a variety of easy utility classes and templates you can inherit from I guess, but that makes sense.</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Sun Jan 21 2024 23:55:48 GMT-0800 (Pacific Standard Time)">07:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell">Or maybe there's just some leftover code in DOMParser that's redundant with more recent IDL developments?</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Mon Jan 22 2024 02:47:01 GMT-0800 (Pacific Standard Time)">10:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">I see that <a href="https://github.com/WICG/identity-credential/blob/main/digital-credentials-2-proposal.md">https://github.com/WICG/identity-credential/blob/main/digital-credentials-2-proposal.md</a> (frontend web-platform API for “Digital Credentials”) seems to have gotten some implementor interest.

I don’t really know much of anything about credentials/identity stuff, except some incidental awareness of the W3C Verifiable Credentials and Decentralized Identifiers (DID) stuff — and only then, because the groups working on those things are at the W3C.

So is the implementor interest in WICG Digital Credentials also an indicator that implementors now see W3C Verifiable Credentials (and maybe DID also) as something actually possibly relevant for the web platform?

I’ve gleaned that W3C Verifiable Credentials are just one possible data format for Verifiable Credentials — and the WICG Digital Credentials draft cites a protocol spec at <a href="https://openid.net/specs/openid-4-verifiable-presentations-1_0.html">https://openid.net/specs/openid-4-verifiable-presentations-1_0.html</a> which mentions W3C VC but also an “ISO mdoc” data format that seems to be for basically the same thing.

Anyway, I’m basically just wondering whether there’s now actually enough browser-implementor interest in this stuff — in integrating it into the web platform through frontend APIs — that I should actually start paying attention to any of it.</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Mon Jan 22 2024 06:02:52 GMT-0800 (Pacific Standard Time)">14:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@hsivonen:mozilla.org">hsivonen</span>&gt;</div></td><td class="msg-cell">How come <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a> isn't WHATWG green?</td></tr>

</tbody></table></div></div></div>
</body></html>