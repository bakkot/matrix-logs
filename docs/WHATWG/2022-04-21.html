<!DOCTYPE html><html><head>
  <title>WHATWG on 2022-04-21</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "WHATWG";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2022-04-21<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-04-20" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed Apr 20 2022 21:03:13 GMT-0700 (Pacific Daylight Time)">04:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">looking at <a href="https://github.com/mdn/content/issues/15129">https://github.com/mdn/content/issues/15129</a> — when <code>setTimeout(handler, timeout, ...arguments)</code> is called with a <em>timeout</em> that’s not a number, what spec defines how it gets coerced into a number?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Apr 20 2022 21:04:24 GMT-0700 (Pacific Daylight Time)">04:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell"><a href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#timer-initialisation-steps">https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#timer-initialisation-steps</a> says nothing about coercing <em>timeout</em> to a number but instead assumes it’s already a number</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed Apr 20 2022 21:29:48 GMT-0700 (Pacific Daylight Time)">04:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">I guess somehow I end up at <a href="https://webidl.spec.whatwg.org/#abstract-opdef-converttoint">https://webidl.spec.whatwg.org/#abstract-opdef-converttoint</a></td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Apr 20 2022 23:56:38 GMT-0700 (Pacific Daylight Time)">06:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><a href="https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope-mixin">https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope-mixin</a> says the definition is <code>long setTimeout(TimerHandler handler, optional long timeout = 0, any... arguments);</code></td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Apr 20 2022 23:57:16 GMT-0700 (Pacific Daylight Time)">06:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">so, the conversion defined in <a href="https://webidl.spec.whatwg.org/#es-long">https://webidl.spec.whatwg.org/#es-long</a> happens</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Thu Apr 21 2022 02:27:48 GMT-0700 (Pacific Daylight Time)">09:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell"><p>OK, so then for a string like <code>"1 second"</code>, I think ultimately that:</p>
<ol>
<li>calls into the ES spec at <a href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-stringtonumber">https://tc39.es/ecma262/multipage/abstract-operations.html#sec-stringtonumber</a>, which then:</li>
<li>calls into <a href="https://tc39.es/ecma262/multipage/ecmascript-language-source-code.html#sec-parsetext">https://tc39.es/ecma262/multipage/ecmascript-language-source-code.html#sec-parsetext</a> with ParseText(<em>text</em>, <em>StringNumericLiteral</em>) — which for a string like <code>"1 second"</code> fails to be parsed as a <em>StringNumericLiteral</em>, and instead returns a List of errors, and so then:</li>
<li>we reach step 3 at <a href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-stringtonumber">https://tc39.es/ecma262/multipage/abstract-operations.html#sec-stringtonumber</a>, “If <em>literal</em> is a List of errors, return <strong>NaN</strong>.“</li>
<li>we go back to <a href="https://webidl.spec.whatwg.org/#abstract-opdef-converttoint">https://webidl.spec.whatwg.org/#abstract-opdef-converttoint</a> and hit step 8, “If <em>x</em> is <strong>NaN</strong>, +0, +∞, or −∞, then return +0“</li>
</ol>
<p>Does that sound right?</p>
</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Thu Apr 21 2022 02:33:38 GMT-0700 (Pacific Daylight Time)">09:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">let me check</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Thu Apr 21 2022 02:37:07 GMT-0700 (Pacific Daylight Time)">09:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">yes, that sounds right</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Thu Apr 21 2022 02:37:19 GMT-0700 (Pacific Daylight Time)">09:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">OK, thanks much</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Thu Apr 21 2022 03:30:43 GMT-0700 (Pacific Daylight Time)">10:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell">I'm the kind of person who had noticed months ago that nested worker termination when the parent worker closes is wonky in the spec, but put it off as "not that important" months ago... but got nerd-sniped into opening that bug right now in order to justify a minor point in a different issue</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Thu Apr 21 2022 03:30:48 GMT-0700 (Pacific Daylight Time)">10:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/whatwg/html/issues/7840">https://github.com/whatwg/html/issues/7840</a></td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Thu Apr 21 2022 05:19:57 GMT-0700 (Pacific Daylight Time)">12:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell">Does anyone know the history of <code>DOMContentLoaded</code>, as in, why is it named using a different pattern to other events?</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Thu Apr 21 2022 05:23:30 GMT-0700 (Pacific Daylight Time)">12:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell">I guess the mattern started with mutation events in DOM-level-2</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Thu Apr 21 2022 05:48:59 GMT-0700 (Pacific Daylight Time)">12:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Jake Archibald</span>: yeah, there was a group of people that thought we should prefix and case event names in that manner, see also DOMFocusIn and the like</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Thu Apr 21 2022 05:49:37 GMT-0700 (Pacific Daylight Time)">12:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Jake Archibald</span>: I suspect it had strong overlap with the Java people, but I don't know for sure, predates me</td></tr>

</tbody></table></div></div></div>
</body></html>