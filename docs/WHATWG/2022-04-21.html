<!DOCTYPE html><html><head>
  <title>WHATWG on 2022-04-21</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "WHATWG";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2022-04-21<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-04-20" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed Apr 20 2022 21:03:13 GMT-0700 (Pacific Daylight Time)">04:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">looking at <a href="https://github.com/mdn/content/issues/15129">https://github.com/mdn/content/issues/15129</a> — when <code>setTimeout(handler, timeout, ...arguments)</code> is called with a <em>timeout</em> that’s not a number, what spec defines how it gets coerced into a number?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Apr 20 2022 21:04:24 GMT-0700 (Pacific Daylight Time)">04:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell"><a href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#timer-initialisation-steps">https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#timer-initialisation-steps</a> says nothing about coercing <em>timeout</em> to a number but instead assumes it’s already a number</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed Apr 20 2022 21:29:48 GMT-0700 (Pacific Daylight Time)">04:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">I guess somehow I end up at <a href="https://webidl.spec.whatwg.org/#abstract-opdef-converttoint">https://webidl.spec.whatwg.org/#abstract-opdef-converttoint</a></td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Apr 20 2022 23:56:38 GMT-0700 (Pacific Daylight Time)">06:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><a href="https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope-mixin">https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope-mixin</a> says the definition is <code>long setTimeout(TimerHandler handler, optional long timeout = 0, any... arguments);</code></td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Apr 20 2022 23:57:16 GMT-0700 (Pacific Daylight Time)">06:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">so, the conversion defined in <a href="https://webidl.spec.whatwg.org/#es-long">https://webidl.spec.whatwg.org/#es-long</a> happens</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Thu Apr 21 2022 02:27:48 GMT-0700 (Pacific Daylight Time)">09:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell"><p>OK, so then for a string like <code>"1 second"</code>, I think ultimately that:</p>
<ol>
<li>calls into the ES spec at <a href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-stringtonumber">https://tc39.es/ecma262/multipage/abstract-operations.html#sec-stringtonumber</a>, which then:</li>
<li>calls into <a href="https://tc39.es/ecma262/multipage/ecmascript-language-source-code.html#sec-parsetext">https://tc39.es/ecma262/multipage/ecmascript-language-source-code.html#sec-parsetext</a> with ParseText(<em>text</em>, <em>StringNumericLiteral</em>) — which for a string like <code>"1 second"</code> fails to be parsed as a <em>StringNumericLiteral</em>, and instead returns a List of errors, and so then:</li>
<li>we reach step 3 at <a href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-stringtonumber">https://tc39.es/ecma262/multipage/abstract-operations.html#sec-stringtonumber</a>, “If <em>literal</em> is a List of errors, return <strong>NaN</strong>.“</li>
<li>we go back to <a href="https://webidl.spec.whatwg.org/#abstract-opdef-converttoint">https://webidl.spec.whatwg.org/#abstract-opdef-converttoint</a> and hit step 8, “If <em>x</em> is <strong>NaN</strong>, +0, +∞, or −∞, then return +0“</li>
</ol>
<p>Does that sound right?</p>
</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Thu Apr 21 2022 02:33:38 GMT-0700 (Pacific Daylight Time)">09:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">let me check</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Thu Apr 21 2022 02:37:07 GMT-0700 (Pacific Daylight Time)">09:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">yes, that sounds right</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Thu Apr 21 2022 02:37:19 GMT-0700 (Pacific Daylight Time)">09:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">OK, thanks much</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Thu Apr 21 2022 03:30:43 GMT-0700 (Pacific Daylight Time)">10:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell">I'm the kind of person who had noticed months ago that nested worker termination when the parent worker closes is wonky in the spec, but put it off as "not that important" months ago... but got nerd-sniped into opening that bug right now in order to justify a minor point in a different issue</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Thu Apr 21 2022 03:30:48 GMT-0700 (Pacific Daylight Time)">10:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/whatwg/html/issues/7840">https://github.com/whatwg/html/issues/7840</a></td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Thu Apr 21 2022 05:19:57 GMT-0700 (Pacific Daylight Time)">12:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell">Does anyone know the history of <code>DOMContentLoaded</code>, as in, why is it named using a different pattern to other events?</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Thu Apr 21 2022 05:23:30 GMT-0700 (Pacific Daylight Time)">12:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell">I guess the pattern started with mutation events in DOM-level-2</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Thu Apr 21 2022 05:48:59 GMT-0700 (Pacific Daylight Time)">12:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Jake Archibald</span>: yeah, there was a group of people that thought we should prefix and case event names in that manner, see also DOMFocusIn and the like</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Thu Apr 21 2022 05:49:37 GMT-0700 (Pacific Daylight Time)">12:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Jake Archibald</span>: I suspect it had strong overlap with the Java people, but I don't know for sure, predates me</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Thu Apr 21 2022 06:03:58 GMT-0700 (Pacific Daylight Time)">13:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell">ta!</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Thu Apr 21 2022 15:19:34 GMT-0700 (Pacific Daylight Time)">22:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">TabAtkins</span>: In MDN, for <a href="https://drafts.csswg.org/css-scroll-snap/">https://drafts.csswg.org/css-scroll-snap/</a> we now have a bunch of links with broken fragments.</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Thu Apr 21 2022 15:20:08 GMT-0700 (Pacific Daylight Time)">22:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">So I notice that, e.g., the anchor at <a href="https://drafts.csswg.org/css-scroll-snap/#scroll-padding">https://drafts.csswg.org/css-scroll-snap/#scroll-padding</a> no longer exists.
But I see it at <a href="https://drafts.csswg.org/css-scroll-snap-1/#scroll-padding">https://drafts.csswg.org/css-scroll-snap-1/#scroll-padding</a>.
So I guess the cause must be that the <a href="https://drafts.csswg.org/css-scroll-snap/">https://drafts.csswg.org/css-scroll-snap/</a> alias was recently changed to point to the <a href="https://drafts.csswg.org/css-scroll-snap-2">https://drafts.csswg.org/css-scroll-snap-2</a> spec rather than the <a href="https://drafts.csswg.org/css-scroll-snap-1/">https://drafts.csswg.org/css-scroll-snap-1/</a> spec.</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Thu Apr 21 2022 15:21:31 GMT-0700 (Pacific Daylight Time)">22:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">I don’t understand why the Level 2 spec doesn’t have those same parts from the Level 1 spec.
Is the Level 2 spec a delta spec or something?</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Thu Apr 21 2022 15:22:34 GMT-0700 (Pacific Daylight Time)">22:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">At MDN we have a policy of using the level-less URLs for all <a href="https://drafts.csswg.org/">https://drafts.csswg.org/</a> specs (or really, for leveled specs in general)</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Thu Apr 21 2022 15:25:51 GMT-0700 (Pacific Daylight Time)">22:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">…except in cases (like this one, I guess) where the leveled version which a level-less URL points to lacks some parts/anchors for features documented in MDN that are in some (earlier or later) leveled version</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Thu Apr 21 2022 15:30:37 GMT-0700 (Pacific Daylight Time)">22:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">So I could fix the broken-fragments problem in this case by updating MDN to use the Level 1, e.g., <a href="https://drafts.csswg.org/css-scroll-snap-1/#scroll-padding">https://drafts.csswg.org/css-scroll-snap-1/#scroll-padding</a> URLs, but there’s a lot of them that broke — about 25.
And I guess that means there are at least 25 features that are in the Level 1 spec that are missing from the Level 2 spec —&nbsp;which kind of makes me wonder why the <a href="https://drafts.csswg.org/css-scroll-snap/">https://drafts.csswg.org/css-scroll-snap/</a> alias was changed to point to the Level 2 spec.
 </td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Thu Apr 21 2022 15:31:19 GMT-0700 (Pacific Daylight Time)">22:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:mozilla.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">TabAtkins</span>: So I wonder if maybe the <a href="https://drafts.csswg.org/css-scroll-snap/">https://drafts.csswg.org/css-scroll-snap/</a> alias could be changed back to pointing to the Level 1 spec rather than the Level 2 spec?</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Thu Apr 21 2022 15:43:04 GMT-0700 (Pacific Daylight Time)">22:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Yup it should be, I've just adjusted it</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Thu Apr 21 2022 15:43:11 GMT-0700 (Pacific Daylight Time)">22:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">Thanks for the catch</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Thu Apr 21 2022 15:44:03 GMT-0700 (Pacific Daylight Time)">22:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@tabatkins:matrix.org">TabAtkins</span>&gt;</div></td><td class="msg-cell">(we shouldn't be pointing the unleveled aliases at delta specs, please report if you catch us doing that)</td></tr>

</tbody></table></div></div></div>
</body></html>