<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>WHATWG on 2025-09-02</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "WHATWG";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2025-09-02<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2025-09-01" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Mon Sep 01 2025 17:51:37 GMT-0700 (Pacific Daylight Time)">00:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">I always just build locally. (But that doesn't give a HTML diff, just, the new HTML.)</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Mon Sep 01 2025 17:52:36 GMT-0700 (Pacific Daylight Time)">00:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">If someone was able to update PR preview to use <a href="https://github.com/whatwg/build.whatwg.org?tab=readme-ov-file#html-build">https://github.com/whatwg/build.whatwg.org?tab=readme-ov-file#html-build</a> , we could get singlepage builds and diffs (and also fix other things missed by the PR preview, like syntax highlighting or preprocessing). But I'm unsure how to maintain PR preview.</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Sep 02 2025 05:03:46 GMT-0700 (Pacific Daylight Time)">12:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell">Is it intentional that <a href="https://html.spec.whatwg.org/#clone-a-policy-container">https://html.spec.whatwg.org/#clone-a-policy-container</a> doesn't clone the integrity policy and report only integrity policy?</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue Sep 02 2025 06:15:22 GMT-0700 (Pacific Daylight Time)">13:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Yoav Weiss</span>: ^^^</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Tue Sep 02 2025 06:15:27 GMT-0700 (Pacific Daylight Time)">13:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@schalk_neethling:matrix.org">Schalk Neethling</span>&gt;</div></td><td class="msg-cell">Hey all! I am curios about the intended behavior of disabled on link elements with rel=stylesheet. 

From reading here: <a href="https://html.spec.whatwg.org/#attr-link-disabled">https://html.spec.whatwg.org/#attr-link-disabled</a> it would seem that this allows one to queue up some stylesheets that can then later be fetched and applied (perhaps using something like intersection observer to load some CSS only when a specific component is about to enter the viewport). However, it seems that all but Safari will still download the CSS on page load. 

None of the browsers which fetches the CSS will apply it though.

The only browser I have seen that seems to behave as I would expect is Safari. In Safari the CSS file does not end up in the network panel on page load i.e. not fetched. When I dynamically set disabled to false, it then fetches and applies the CSS as per (my understanding) of the specification.

Here is a super minimal example: <a href="https://fjw3dm.csb.app/">https://fjw3dm.csb.app/</a></td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Tue Sep 02 2025 06:17:17 GMT-0700 (Pacific Daylight Time)">13:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@yoavweiss:matrix.org">Yoav Weiss</span>&gt;</div></td><td class="msg-cell">@zcorpan - I don't remember it being intentional. Let me dig up the relevant PR</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Tue Sep 02 2025 06:19:42 GMT-0700 (Pacific Daylight Time)">13:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@yoavweiss:matrix.org">Yoav Weiss</span>&gt;</div></td><td class="msg-cell">Seems like it never came up in <a href="https://github.com/whatwg/html/pull/11334">https://github.com/whatwg/html/pull/11334</a> and I missed it..</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Tue Sep 02 2025 06:31:33 GMT-0700 (Pacific Daylight Time)">13:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell">From looking at the spec seems like safari is in the right here. Relevant chromium bug: <a href="https://issues.chromium.org/issues/40286062">https://issues.chromium.org/issues/40286062</a></td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Tue Sep 02 2025 06:33:09 GMT-0700 (Pacific Daylight Time)">13:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@schalk_neethling:matrix.org">Schalk Neethling</span>&gt;</div></td><td class="msg-cell">Ah. Awesome. Thank you, Noam. I wonder whether there is a bug on the Gecko side as well for this. ðŸ¤” My Bugzilla foo is terrible, but then again they are on GitHub now, right?</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Tue Sep 02 2025 06:35:39 GMT-0700 (Pacific Daylight Time)">13:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@lwarlow:igalia.com">Luke Warlow</span>&gt;</div></td><td class="msg-cell">Their bug tracker is still in bugzilla</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Tue Sep 02 2025 06:54:13 GMT-0700 (Pacific Daylight Time)">13:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domfarolino:matrix.org">Dominic Farolino</span>&gt;</div></td><td class="msg-cell">Is it possible to run script in response to an AbortSignal aborting, but before its <code>abort</code> event fires? Basically I'm asking if the web platform has access to internal "abort algorithm" timing (before Observables, that is)?</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Tue Sep 02 2025 06:58:37 GMT-0700 (Pacific Daylight Time)">13:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell">I guess other specs that add an algorithm to the <code>AbortSignal</code>?</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Tue Sep 02 2025 07:00:32 GMT-0700 (Pacific Daylight Time)">14:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell">(seems like the observable spec does this multiple times)
but by "web platform" do you mean a general-purpose API that exposes this?</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Tue Sep 02 2025 07:17:41 GMT-0700 (Pacific Daylight Time)">14:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domfarolino:matrix.org">Dominic Farolino</span>&gt;</div></td><td class="msg-cell">No I mean indirectly. I looked at all references of "add an algorithm" and none of them <em>appear</em> to invoke user-provided script, so I don't think there is any way to register script that runs in response to an AbortSignal being aborted, at "abort algorithm" timing (before <code>abort</code> event)</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Tue Sep 02 2025 07:17:50 GMT-0700 (Pacific Daylight Time)">14:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domfarolino:matrix.org">Dominic Farolino</span>&gt;</div></td><td class="msg-cell">but I'm hoping somebody knows of one subtle instance that I don't know about!</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Tue Sep 02 2025 07:22:26 GMT-0700 (Pacific Daylight Time)">14:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell">oh so you mean if there is an existing caller for "add an algorithm" that invokes a script.</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Tue Sep 02 2025 07:23:45 GMT-0700 (Pacific Daylight Time)">14:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@sissiboi25:matrix.org">sissiboi25</span>&gt;</div></td><td class="msg-cell"><a href="https://matrix.to/#/!JfcsmfWnEQHLwlMXiL:matrix.org?via=matrix.org">https://matrix.to/#/!JfcsmfWnEQHLwlMXiL:matrix.org?via=matrix.org</a></td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Tue Sep 02 2025 07:30:23 GMT-0700 (Pacific Daylight Time)">14:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Dominic Farolino</span>: I am pretty sure streams add algorithms that reject promises as "abort algorithms". Promise rejections can invoke a script which would happen before the event is fired. <span class="nick-4">Andreu Botella</span> would be more of an expert though</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Tue Sep 02 2025 07:40:44 GMT-0700 (Pacific Daylight Time)">14:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell">Rejecting a promise can cause script execution in a microtask, but if that happens when no script is running, then I think the microtask queue will only be drained after the next subsequent script execution (or when the current event loop task finishes)</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Tue Sep 02 2025 07:41:29 GMT-0700 (Pacific Daylight Time)">14:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell">So if none of the spec callers of "add an algorithm" invokes a script, then promise resolutions or rejections wouldn't cause a script execution before the event is fired</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Tue Sep 02 2025 07:50:53 GMT-0700 (Pacific Daylight Time)">14:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell">right, I had it in my head that "reject" calls "prepare to run script" but it doesn't, that would only happen in the microtask</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Tue Sep 02 2025 08:00:02 GMT-0700 (Pacific Daylight Time)">15:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Yoav Weiss</span>: OK, I can file an issue</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Tue Sep 02 2025 09:18:02 GMT-0700 (Pacific Daylight Time)">16:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@emilio:mozilla.org">emilio</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">Noam Rosenthal</span>: <span class="nick-4">Andreu Botella</span>: Can't reject / resolve with an object actually call the <code>.then</code> getter synchronously?</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Tue Sep 02 2025 09:18:21 GMT-0700 (Pacific Daylight Time)">16:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@emilio:mozilla.org">emilio</span>&gt;</div></td><td class="msg-cell">(Not sure if that applies to the specific case you were discussing tho)</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Tue Sep 02 2025 09:27:58 GMT-0700 (Pacific Daylight Time)">16:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell">I don't think so? It queues a microtask to do that here: <a href="https://html.spec.whatwg.org/multipage/webappapis.html#hostenqueuepromisejob">https://html.spec.whatwg.org/multipage/webappapis.html#hostenqueuepromisejob</a></td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Tue Sep 02 2025 09:29:28 GMT-0700 (Pacific Daylight Time)">16:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@noamr:matrix.org">Noam Rosenthal</span>&gt;</div></td><td class="msg-cell">... though future callers of "add an abort algorithm" can fire an event or invoke a direct user callback... I don' t think this is prohibited</td></tr>

</tbody></table></div></div></div>
</body></html>