2025-12-01
[17:45:23.0442] <sideshowbarker>
For https://html.spec.whatwg.org/multipage/interaction.html#attr-writingsuggestions can somebody remind me why the empty string is a conforming value for that ‚Äî¬†even though the table there only explicitly lists `true` and `false` as the allowed values?

[17:46:44.0304] <sideshowbarker>
And note that at https://html.spec.whatwg.org/multipage/indices.html#attributes-3:~:text=writingsuggestions the index of attributes is where the spec (though non-normatively there, I guess) states that the empty string is an allowed value.

[17:48:03.0230] <sideshowbarker>
‚Ä¶and similarly for, e.g., the `spellcheck` attribute, the index at https://html.spec.whatwg.org/multipage/indices.html#attributes-3:~:text=spellcheck also says the empty string is allowed for that.

[17:48:51.0957] <sideshowbarker>
And for `hidden` too https://html.spec.whatwg.org/multipage/indices.html#attributes-3:~:text=hidden,-HTML

[17:50:10.0920] <sideshowbarker>
But looking at the whole index, I guess it‚Äôs just those three which the index says are allowed to have the empty string as a value. `hidden`, `spellcheck`, and `writingsuggestions`

[17:52:02.0659] <sideshowbarker>
‚Ä¶whereas, in contrast, if you look at what the index says about other enumerated ‚Äî¬†such as `wrap` at https://html.spec.whatwg.org/multipage/indices.html#attributes-3:~:text=integer-,wrap ‚Äî¬†the index _does not_ say the empty string is allowed.

[17:53:34.0633] <sideshowbarker>
see `popover` at https://html.spec.whatwg.org/multipage/indices.html#attributes-3:~:text=popover,-HTML for another empty-string-not-allowed example

[17:58:53.0000] <sideshowbarker>
d‚Äôoh nevermind ‚Äî found the requirement at https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#enumerated-attribute:~:text=The%20empty%20string,-and

> For authoring conformance purposes, if an enumerated attribute is specified, the attribute's value must be one of:
>
> - An [ASCII case-insensitive](https://infra.spec.whatwg.org/#ascii-case-insensitive) match for one of the conforming keywords for that attribute, with no leading or trailing whitespace.
>
> - The empty string and the attribute must have an [empty value default](https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#empty-value-default) defined.

[18:00:29.0161] <sideshowbarker>
So, the index is wrong (or incomplete/imprecise) in the cases where, for any enumerated attributes, it doesn‚Äôt explicitly list the empty string as an allowed value.

[00:09:55.0672] <annevk>
sideshowbarker: r? https://github.com/whatwg/html/pull/11974

[00:10:37.0761] <sideshowbarker>
beautiful

[00:11:05.0268] <sideshowbarker>
but now you make me feel like I‚Äôm just a lazy complainer üòÜ

[00:11:11.0038] <sideshowbarker>
will review it right now

[00:12:39.0509] <annevk>
Nah all good. Luke and I changed this around a bit recently as part of making reflection more formal and this is something we missed.

[00:38:50.0684] <sideshowbarker>
annevk: You need to put on your glasses; seems like you missed a few: https://github.com/whatwg/html/pull/11974/commits/02f24ef01e1c3dd7f4fb53ec43b5e692a80050d4

[00:38:57.0813] <sideshowbarker>
oh wait

[00:39:21.0183] <sideshowbarker>
Had you outsourced that to copilot or something?

[00:52:03.0384] <annevk>
sideshowbarker: I don't really understand your commit. Why would the empty string be valid for `autocapitalize` for instance?

[00:52:39.0487] <annevk>
The attribute needs to define an "empty value default" for the empty string to be a valid value. I only added it for attributes that define that.

[00:55:29.0904] <sideshowbarker>
d‚Äôoh yeah I see now you‚Äôre right ‚Äî I hadn‚Äôt read the requirements at https://whatpr.org/html/11974/common-microsyntaxes.html#:~:text=The%20empty%20string%20and%20the%20attribute%20must%20have%20an%20empty%20value%20default%20defined. carefully enough

[00:55:56.0065] <sideshowbarker>
so yeah then, that additional commit I made can just be ignored

[00:59:46.0690] <annevk>
Okay, I'll revert it and the squash & merge.

[03:02:18.0975] <sideshowbarker>
annevk: By the way, not trying to butter you up, but I am (again) reminded that basically any time it seems to me like you made a mistake or oversight, it‚Äôs very significantly more likely (or close to certain) that it‚Äôs me who actually made the mistake.

[03:03:14.0522] <sideshowbarker>
You seem to make exceptionally few mistakes. We could probably add a ‚ÄúMistakes that Anne has made‚Äù page to the wiki, and not even come close to filling up the page.

[03:15:03.0920] <annevk>
Hah, well I made a fair number of mistakes with custom element registries recently and Domenic was pretty good at spotting errors in my PRs as well over the years. I do try to be precise and do my due diligence, but I'm certainly not infallible.

[09:43:30.0653] <sideshowbarker>
About the index, I don‚Äôt see Keith around here, but I wanted to say, I notice the index doesn‚Äôt seem to include entries for `headingoffset` and `headingreset` global attributes.

And further, the spec doesn‚Äôt state any document-conformance requirements about the allowed values of those attributes ‚Äî¬†that is, it should rightly explicitly state somewhere that they are non-negative integer (`headingoffset`) and boolean (`headingreset`). (Which can be inferred from the implementations requirements, but should also be stated explicitly somewhere.)

[09:43:52.0468] <sideshowbarker>
* About the index, I don‚Äôt see Keith around here, but I wanted to say, I notice the index doesn‚Äôt seem to include entries for the `headingoffset` and `headingreset` global attributes.

And further, the spec doesn‚Äôt state any document-conformance requirements about the allowed values of those attributes ‚Äî¬†that is, it should rightly explicitly state somewhere that they are non-negative integer (`headingoffset`) and boolean (`headingreset`). (Which can be inferred from the implementations requirements, but should also be stated explicitly somewhere.)

[09:44:05.0398] <sideshowbarker>
* About the index, I don‚Äôt see Keith around here, but I wanted to say, I notice the index doesn‚Äôt seem to include entries for the `headingoffset` and `headingreset` global attributes.

And further, the spec doesn‚Äôt state any document-conformance requirements about the allowed values of those attributes¬†‚Äî¬†that is, it should rightly explicitly state somewhere that they are non-negative integer (`headingoffset`) and boolean (`headingreset`). (Which can be inferred from the implementations requirements, but should also be stated explicitly somewhere.)


2025-12-02
[16:32:21.0122] <Sacha Greif>
quick question as I'm working on the State of HTML survey results: is there currently a proposal for a Datatable element?

[21:42:55.0977] <annevk>
keithamus: zcorpan: see above issues with the `heading*` attributes.

[21:43:07.0090] <annevk>
Sacha Greif: I'm not aware of any.

[01:51:25.0602] <zcorpan>
sideshowbarker: filed https://github.com/whatwg/html/issues/11977

[02:06:29.0634] <keithamus>
https://github.com/whatwg/html/pull/11978 /cc sideshowbarker 

[02:08:18.0314] <sideshowbarker>
oh, didn‚Äôt yet know about the _‚Äúbetween 0 and 8‚Äù_ qualification

[02:08:51.0730] <sideshowbarker>
I guess I‚Äôll need to update the HTML checker to limit it to that

[02:12:15.0139] <sideshowbarker>
What does setting `headingoffset=0` do?

[02:13:15.0796] <zcorpan>
sideshowbarker: the IDL attribute reflection enforces that range and values outside the range are effectively clamped by the algo

[02:13:24.0645] <zcorpan>
sideshowbarker: 0 does nothing

[02:13:28.0764] <sideshowbarker>
OK

[02:13:50.0156] <sideshowbarker>
then I wonder, why is 0 allowed?

[02:14:02.0530] <sideshowbarker>
why not limit it to 1‚Äì8?

[02:14:47.0134] <zcorpan>
sideshowbarker: same reason `class=""` is allowed

[02:15:10.0999] <zcorpan>
sideshowbarker: can be more convenient to set to 0 than call `removeAttribute`

[02:15:24.0067] <sideshowbarker>
I see

[02:18:59.0080] <zcorpan>
keithamus: I had also started a PR lol, but yours didn't include doc conf https://github.com/whatwg/html/pull/11979

[02:19:19.0820] <keithamus>
Oh awesome thanks!

[03:21:05.0494] <sideshowbarker>
zcorpan: about https://github.com/validator/validator/issues/1396, under what conditions is it conforming for the `sizes` attribute to be ommitted?

[03:21:43.0173] <sideshowbarker>
Currently in the checker, we enforce this requirement:

> When the srcset attribute has any image candidate string with a width descriptor, the sizes attribute must also be specified.

[03:22:39.0846] <sideshowbarker>
and so this:

```html
<img alt loading=lazy srcset="a 100w" src=a>
```
‚Ä¶currently causes the checker to report the above error message

[03:23:32.0711] <sideshowbarker>
ah, only if `loading=lazy` is also present?

[03:24:02.0671] <zcorpan>
sideshowbarker: https://html.spec.whatwg.org/#attr-source-sizes:~:text=selected%2E-,If,selected

[03:24:05.0699] <sideshowbarker>
hmm no I guess it‚Äôs not that simple and I need read the actual spec requirements‚Ä¶

[03:25:29.0949] <zcorpan>
sideshowbarker: and https://html.spec.whatwg.org/#attr-img-sizes:~:text=If%20the%20srcset%20attribute%20is%20present%20and%20has%20any%20image%20candidate%20strings%20using%20a%20width%20descriptor%2C%20the%20sizes%20attribute%20must%20also%20be%20present%2E for img

[03:30:00.0571] <sideshowbarker>
hmm but I see that the spec does still state this requirement:

> If the srcset attribute is present and has any image candidate strings using a width descriptor, the sizes attribute must also be present. 

[03:30:07.0471] <zcorpan>
Hmm for this 
>  If the srcset attribute is not specified, and the loading attribute is in the Lazy state, the sizes attribute may be specified with the value "auto" (ASCII case-insensitive).

This was added so that you could have a stable layout before setting `srcset` when using auto-sizes (because UA style is different). But I don't know why we didn't allow any value starting with "auto,"

[03:30:51.0848] <zcorpan>
sideshowbarker: Yes for img it must be present

[03:31:32.0195] <sideshowbarker>
So the following is in fact not conforming, right?
```html
<img alt loading=lazy srcset="a 100w" src=a>
```

[03:31:45.0128] <zcorpan>
Correct

[03:32:58.0544] <sideshowbarker>
OK, I ask because at https://github.com/validator/validator/issues/1396 you had identified it as valid

[03:33:28.0223] <zcorpan>
The rationale is: the UA style needs to be different for auto-sizes to work correctly (needs `contain: size`), and it wasn't web compatible to change that for `img` elements that omit `sizes`

[03:33:43.0655] <sideshowbarker>
but it‚Äôs an old issue (2022), so maybe it was valid at one time, back then?

[03:33:50.0605] <zcorpan>
We changed the spec and I forgot to comment about it there

[03:34:01.0202] <sideshowbarker>
no worries

[03:39:48.0980] <sideshowbarker>
and apologies in general for letting so many checker issues rot for so long

[03:40:11.0905] <sideshowbarker>
I‚Äôm going to try to get all the open ones resolved this month

[03:40:38.0536] <sideshowbarker>
‚Ä¶and then I after that I can go back to ignoring the new ones for next 3 years or whatever üòÜ

[03:40:55.0744] <sideshowbarker>
‚Ä¶and I can just work on writing webkit patches instead

[04:27:00.0759] <sideshowbarker>
zcorpan: per these requirements:

> The keyword auto is a width that is computed in parse a sizes attribute. If present, it must be the first entry and the entire <source-size-list> value must either be the string "auto" (ASCII case-insensitive) or start with the string "auto," (ASCII case-insensitive).

‚Ä¶ then the following is not actually conforming, right?

```html
<img alt loading=lazy srcset="a 100w" src=a sizes="(min-width: 100px) 100px, auto">
```

[05:05:35.0341] <zcorpan>
sideshowbarker: right

[05:05:59.0970] <zcorpan>
sideshowbarker: leading space is also invalid

[05:06:41.0350] <sideshowbarker>
oh then that means I need to not have my checker code trimming it

[08:01:15.0616] <annevk>
jarhar: did you miss https://github.com/whatwg/html/pull/11878?

[14:11:12.0133] <TabAtkins>
annevk: I've just been through all the WHATWG specs and confirmed they'll build correctly with the next release of Bikeshed (after accepting some trivial PRs I've just submitted), so I'm gonna go ahead and push the release. Please let me know if there are any unexpected issues; I've tried very hard to make things work smoothly for such a significant under-the-covers change.


2025-12-03
[16:30:25.0464] <TabAtkins>
sideshowbarker: Is the https://github.com/w3c/mdn-spec-links project dead? It looks like it hasn't updated in two years, and now there are three specs listed in https://w3c.github.io/mdn-spec-links/SPECMAP.json whose files no longer exist in the repo.

[16:31:06.0463] <sideshowbarker>
Dead

[16:31:13.0885] <sideshowbarker>
Essentially, yes

[16:31:31.0256] <TabAtkins>
is there a replacement? otherwise I need to just remove the MDN-panel feature from bikeshed

[16:32:11.0952] <sideshowbarker>
Please go ahead and remove it.

[16:32:23.0305] <sideshowbarker>
There's no replacement

[16:32:54.0133] <sideshowbarker>
If I could get somebody to take over maintenance on it, that would be great

[16:33:07.0385] <sideshowbarker>
Or to make a replacement

[16:33:47.0724] <sideshowbarker>
But in the meantime, let's just rip it out

[16:37:27.0800] <TabAtkins>
kk, i'm just gonna check with our internal mdn people first

[21:45:07.0603] <annevk>
sideshowbarker: Encoding standard is failing over "This document appears to be written in Kinyarwanda but the ‚Äúhtml‚Äù start tag has ‚Äúlang="en"‚Äù. Consider using ‚Äúlang="rw"‚Äù (or variant) instead." for many files. I guess I'll try to suppress that warning.

[21:57:04.0025] <annevk>
TabAtkins: thanks for all the fixes!

