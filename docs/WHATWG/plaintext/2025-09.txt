2025-09-01
[05:37:50.0959] <smaug>
I assume there isn't any way to get single-page diffs for PRs?

[05:40:19.0498] <Ms2ger>
If you add `.diff` at the end of the URL like https://github.com/whatwg/html/pull/11543.diff you get the plain text diff, if that helps

[05:40:20.0638] <smaug>
Reviewing especially larger PRs is a bit tricky when they are split to so many diffs

[05:40:41.0665] <smaug>
I was thinking the spec preview diffs

[05:40:55.0629] <Ms2ger>
Ah, that I don't know

[05:45:06.0019] <Luke Warlow>
Especially because cross linking seems mildly broken on the preview URLs

[05:51:31.0707] <smaug>
(looking at ReferenceTarget atm, 16 diffs)


2025-09-02
[17:51:37.0631] <Domenic>
I always just build locally. (But that doesn't give a HTML diff, just, the new HTML.)

[17:52:36.0931] <Domenic>
If someone was able to update PR preview to use https://github.com/whatwg/build.whatwg.org?tab=readme-ov-file#html-build , we could get singlepage builds and diffs (and also fix other things missed by the PR preview, like syntax highlighting or preprocessing). But I'm unsure how to maintain PR preview.

[05:03:46.0337] <zcorpan>
Is it intentional that https://html.spec.whatwg.org/#clone-a-policy-container doesn't clone the integrity policy and report only integrity policy?

[06:15:22.0086] <Noam Rosenthal>
Yoav Weiss: ^^^

[06:15:27.0471] <Schalk Neethling>
Hey all! I am curios about the intended behavior of disabled on link elements with rel=stylesheet. 

From reading here: https://html.spec.whatwg.org/#attr-link-disabled it would seem that this allows one to queue up some stylesheets that can then later be fetched and applied (perhaps using something like intersection observer to load some CSS only when a specific component is about to enter the viewport). However, it seems that all but Safari will still download the CSS on page load. 

None of the browsers which fetches the CSS will apply it though.

The only browser I have seen that seems to behave as I would expect is Safari. In Safari the CSS file does not end up in the network panel on page load i.e. not fetched. When I dynamically set disabled to false, it then fetches and applies the CSS as per (my understanding) of the specification.

Here is a super minimal example: https://fjw3dm.csb.app/

[06:17:17.0613] <Yoav Weiss>
@zcorpan - I don't remember it being intentional. Let me dig up the relevant PR

[06:19:42.0866] <Yoav Weiss>
Seems like it never came up in https://github.com/whatwg/html/pull/11334 and I missed it..

[06:31:33.0425] <Noam Rosenthal>
From looking at the spec seems like safari is in the right here. Relevant chromium bug: https://issues.chromium.org/issues/40286062

[06:33:09.0072] <Schalk Neethling>
Ah. Awesome. Thank you, Noam. I wonder whether there is a bug on the Gecko side as well for this. ðŸ¤” My Bugzilla foo is terrible, but then again they are on GitHub now, right?

[06:35:39.0195] <Luke Warlow>
Their bug tracker is still in bugzilla

[06:54:13.0851] <Dominic Farolino>
Is it possible to run script in response to an AbortSignal aborting, but before its `abort` event fires? Basically I'm asking if the web platform has access to internal "abort algorithm" timing (before Observables, that is).

[06:54:16.0806] <Dominic Farolino>
* Is it possible to run script in response to an AbortSignal aborting, but before its `abort` event fires? Basically I'm asking if the web platform has access to internal "abort algorithm" timing (before Observables, that is)?

[06:58:37.0455] <Noam Rosenthal>
I guess other specs that add an algorithm to the `AbortSignal`?

[07:00:32.0027] <Noam Rosenthal>
(seems like the observable spec does this multiple times)
but by "web platform" do you mean a general-purpose API that exposes this?

[07:17:41.0029] <Dominic Farolino>
No I mean indirectly. I looked at all references of "add an algorithm" and none of them *appear* to invoke user-provided script, so I don't think there is any way to register script that runs in response to an AbortSignal being aborted, at "abort algorithm" timing (before `abort` event)

[07:17:50.0810] <Dominic Farolino>
but I'm hoping somebody knows of one subtle instance that I don't know about!

[07:22:26.0172] <Noam Rosenthal>
oh so you mean if there is an existing caller for "add an algorithm" that invokes a script.

[07:23:45.0752] <sissiboi25>
https://matrix.to/#/!JfcsmfWnEQHLwlMXiL:matrix.org?via=matrix.org

[07:30:23.0228] <Noam Rosenthal>
Dominic Farolino: I am pretty sure streams add algorithms that reject promises as "abort algorithms". Promise rejections can invoke a script which would happen before the event is fired. Andreu Botella would be more of an expert though

[07:40:44.0312] <Andreu Botella>
Rejecting a promise can cause script execution in a microtask, but if that happens when no script is running, then I think the microtask queue will only be drained after the next subsequent script execution

[07:41:29.0308] <Andreu Botella>
So if none of the spec callers of "add an algorithm" invokes a script, then promise resolutions or rejections wouldn't cause a script execution before the event is fired

[07:42:35.0160] <Andreu Botella>
* Rejecting a promise can cause script execution in a microtask, but if that happens when no script is running, then I think the microtask queue will only be drained after the next subsequent script execution (or when the current event loop task finishes)

[07:50:53.0510] <Noam Rosenthal>
right, I had it in my head that "reject" calls "prepare to run script" but it doesn't, that would only happen in the microtask

