2022-02-01
[13:07:04.0207] <Ian Hickson>
anyone know if we ever defined what headers should not be included in subsequent requests after a cross-origin HTTP redirect?

[14:59:15.0612] <Domenic>
> <@hixie:matrix.org> anyone know if we ever defined what headers should not be included in subsequent requests after a cross-origin HTTP redirect?

I see nothing relevant in https://fetch.spec.whatwg.org/#http-redirect-fetch . This might fall into the still-underspecified https://fetch.spec.whatwg.org/#:~:text=Modify%20httpRequest%E2%80%99s%20header%20list%20per%20HTTP.

[15:27:35.0811] <Ian Hickson>
yeah i couldn't find anything either

[15:28:32.0358] <Ian Hickson>
context is we're trying to figure out how the Dart HttpClient should be updated, but so far it seems the list of headers to skip is just something we copy from Curl or Chrome...


2022-02-02
[02:11:12.0714] <sideshowbarker>
What‚Äôs the current best-practice way to programmatically detect if a document is in a frame?

[04:24:40.0876] <Noam Rosenthal>
> <@sideshowbarker:mozilla.org> What‚Äôs the current best-practice way to programmatically detect if a document is in a frame?

I guess https://developer.mozilla.org/en-US/docs/Web/API/Window/frameElement ?

[04:52:55.0574] <Noam Rosenthal>
(I usually do something like `window.parent !== window.self` but `frameElement` feels more like a best practice)

[06:23:59.0236] <sideshowbarker>
Noam Rosenthal: thanks much

[07:02:25.0946] <Domenic>
> <@hixie:matrix.org> anyone know if we ever defined what headers should not be included in subsequent requests after a cross-origin HTTP redirect?

Not sure how I missed this yesterday but a coworker pointed me to https://fetch.spec.whatwg.org/#http-redirect-fetch step 11. So basically remove https://fetch.spec.whatwg.org/#request-body-header-name

[08:51:47.0062] <smaug>
jgraham: in wpt, is there a way to test behavior when alert() pops up?

[08:51:55.0421] <smaug>
or basically, is there a way to close it?

[09:31:48.0426] <Noam Rosenthal>
smaug: seems like WebDriver has support for this, but it's not patched through to testdriver and not used in tests. Shouldn't be difficult to accomplish IMO. But maybe jgraham has more context (or others at #wpt:matrix.org)

[11:07:30.0365] <Ian Hickson>
> <@domenicdenicola:matrix.org> Not sure how I missed this yesterday but a coworker pointed me to https://fetch.spec.whatwg.org/#http-redirect-fetch step 11. So basically remove https://fetch.spec.whatwg.org/#request-body-header-name

oh interesting. but that doesn't include things like Set-Cookie and Authorization?

[11:08:10.0127] <Domenic>
Right so removing credentials is conditional on your credentials mode being "same-origin", let's find that...

[11:09:10.0189] <Domenic>
Those two are only conditionally included in step 20 of https://fetch.spec.whatwg.org/#concept-http-network-or-cache-fetch based on several pieces of input

[11:46:08.0641] <jgraham>
smaug, Noam Rosenthal I think the way that the wpt harness uses WebDriver makes it quite hard to test alert behaviour; that probabaly requires WebDriver-BiDi

[12:01:35.0565] <Ian Hickson>
> <@domenicdenicola:matrix.org> Those two are only conditionally included in step 20 of https://fetch.spec.whatwg.org/#concept-http-network-or-cache-fetch based on several pieces of input

i might just be rusty in my spec-fu but i have to say i can't really figure out how to point someone to this spec in a sufficiently clear way to explain what headers they should include when :-(
like, https://curl.se/docs/CVE-2018-1000007.html removes Authorization during a redirect, but is that all we should remove?

[13:20:56.0091] <Domenic>
I mean the intention isn't just to give people answers to "what HTTP headers to remove during a redirect", it's to give "if you want to build a browser-compatible fetch algorithm here is step-by-step how to do it"

[13:21:11.0063] <Domenic>
And so in particular part of that is only adding in Authorization or Set-Cookie under certain conditions

[13:21:55.0237] <Domenic>
Whether that particular algorithm is applicable to non-browser software, yeah, unclear.

[13:32:07.0582] <Arya Mulya>
Hii guys hello 


[15:13:24.0691] <sideshowbarker>
Odd https://stackoverflow.com/questions/70963287/youtube-is-blocking-javascript-execution-for-around-10-seconds

[15:28:52.0686] <Luca Casonato>
Does anyone here know if Joshua Bell (IndexedDB editor) is on matrix? I can also email, but I don't know what is @google.com/@chromium.com address is. If anyone knows his email, would be great if you could DM it to me :-)

[15:31:54.0644] <Domenic>
> <@lucacasonato:matrix.org> Does anyone here know if Joshua Bell (IndexedDB editor) is on matrix? I can also email, but I don't know what is @google.com/@chromium.com address is. If anyone knows his email, would be great if you could DM it to me :-)

If you hover over his name in https://w3c.github.io/IndexedDB/ the email is there :)

[15:49:04.0715] <Luca Casonato>
> <@domenicdenicola:matrix.org> If you hover over his name in https://w3c.github.io/IndexedDB/ the email is there :)

ah! didn't know that. thank you :-)


2022-02-03
[15:51:30.0577] <zcorpan>
should I assume that the wattsi server error is intermittent? https://github.com/whatwg/html/pull/5462


2022-02-04
[17:11:19.0459] <Domenic>
> <@zcorpan_:matrix.org> should I assume that the wattsi server error is intermittent? https://github.com/whatwg/html/pull/5462

Probably, yes.

[17:11:33.0743] <Domenic>
It is probably just https://github.com/whatwg/build.whatwg.org/issues/19

[17:13:26.0726] <Domenic>
Hmm the logging I added did not seem to show up, I wonder what's the deal there...


2022-02-05
[13:41:03.0547] <Cory>
right place to ask a spec question/comment? this is about selecting and copying arbitrary text from an html page. 

often, content and styling makes sense for the screen, but doesn't translate when pasted as plain-text.

as an example, if i copy those room notifications immediately above ===^ it will paste the text "Today" instead of a timestamp.

the img tag has the alt attribute which (among other things) provides a text representation for the clipboard -- has there ever been any discussion around expanding that to a global element attribute? or providing a mechanism for helping the browser convert an arbitrary selection on the page to plain text (without having to use js)?

[13:43:16.0151] <Andreu Botella>
something that doesn't require JS, I don't know, but you can customize what gets copied into the clipboard with the clipboard API

[13:43:19.0234] <Andreu Botella>
https://www.w3.org/TR/clipboard-apis

[13:51:00.0550] <Cory>
that's great for specialized situations but creating something that allows arbitrary selections would be difficult.  ...and i guess expanding alt to non-images would be difficult for the same reasons, like partial selections.  i donno. copying/pasting text from pages sucks though, ha


2022-02-07
[22:57:27.0484] <sideshowbarker>
> <@noamr:matrix.org> I guess https://developer.mozilla.org/en-US/docs/Web/API/Window/frameElement ?

so I‚Äôm now realizing that while that seems to work in some cases of cross-origin iframes, it returns null in others

[22:57:57.0352] <Noam Rosenthal>
> <@sideshowbarker:mozilla.org> so I‚Äôm now realizing that while that seems to work in some cases of cross-origin iframes, it returns null in others

yea this is not for cross-origin

[22:58:53.0464] <sideshowbarker>
yeah I thought it _never_ worked cross-origin ‚Äî but then I found for the case of the iframe at the end of https://developer.mozilla.org/en-US/docs/Web/API/Notifications_API/Using_the_Notifications_API#replacing_existing_notifications it did actually seem to work

[22:59:03.0906] <sideshowbarker>
but maybe I was just testing it wrong

[22:59:41.0476] <sideshowbarker>
anyway, reverting to just the usual `window.self !== window.top` 

[23:01:12.0292] <sideshowbarker>
oh, cool to see there‚Äôs a `.top` TLD now ‚Äî¬†recursively appropriate‚Ä¶

[23:01:56.0977] <sideshowbarker>
makes for some good fun and confusion for any technical writer who has to document it

[23:02:20.0327] <sideshowbarker>
kind of a ‚ÄúWho‚Äôs on first?‚Äù thing

[23:02:35.0945] <sideshowbarker>
‚Äúthe top top-level domain‚Äú

[23:02:53.0312] <sideshowbarker>
or ‚Äútop top‚Äù for short

[00:07:10.0484] <annevk>
`frameElement` can only work cross-origin when `document.domain` is involved and the documents are same-site. If you find it does something in other cases I'd love to see a testcase.

[00:21:00.0720] <sideshowbarker>
> <@annevk:mozilla.org> `frameElement` can only work cross-origin when `document.domain` is involved and the documents are same-site. If you find it does something in other cases I'd love to see a testcase.

probably I just made a mistake, when I thought I had it working with the one case

[00:21:08.0502] <sideshowbarker>
I will re-try it and see 

[00:45:55.0636] <annevk>
Domenic: Yoav Weiss: shouldn't the introduction of new browsing contexts be done in a bit more coordinated manner? Re: https://groups.google.com/a/chromium.org/g/blink-dev/c/jr2fQUh6xEI/m/Oqge6pPtAAAJ

[01:03:02.0873] <Yoav Weiss>
annevk: Potentially... This effort is still in very early stages AFAIK. I think it'd be helpful for the team if you chimed in on that thread to say what you'd like to see defined for this to be interoperable.

[01:14:42.0137] <sideshowbarker>
> <@annevk:mozilla.org> `frameElement` can only work cross-origin when `document.domain` is involved and the documents are same-site. If you find it does something in other cases I'd love to see a testcase.

so yeah, for the record here, I was mistaken ‚Äî it wasn‚Äôt working cross-origin (I just thought it was) Noam Rosenthal 

[03:25:23.0637] <Luca Casonato>
Jake Archibald: I don't want to be a bother, but have you been able to take a look at this? Trying to judge if Chrome would be opposed to this in any way.

[03:25:33.0321] <Luca Casonato>
> <@annevk:mozilla.org> Jake Archibald: have you ever seen service workers create JSON responses? Trying to figure out browser interest for https://github.com/whatwg/fetch/issues/1389

 * Jake Archibald: I don't want to be a bother, but have you been able to take a look at this? Trying to judge if Chrome would be opposed to this in any way.

[04:44:55.0777] <Ms2ger üíâüíâ>
Yoav Weiss: hey, do you know if you'll have time soonish to review https://github.com/w3c/resource-timing/pull/302 https://github.com/w3c/server-timing/pull/84 ?

[04:46:22.0685] <Yoav Weiss>
Apologies for my slowness and thank for pinging! I'll review today

[04:47:47.0521] <Ms2ger üíâüíâ>
Thanks!

[07:50:37.0725] <Domenic>
> <@annevk:mozilla.org> Domenic: Yoav Weiss: shouldn't the introduction of new browsing contexts be done in a bit more coordinated manner? Re: https://groups.google.com/a/chromium.org/g/blink-dev/c/jr2fQUh6xEI/m/Oqge6pPtAAAJ

Yes, I'm keeping a close eye on that. It seems so far it'll just be an auxiliary BC with some flag on it... not as intrusive on other parts of the stack like browsing context groups / navigation. Although, like prerendering, they will need a lot of API restrictions. (Unlike prerendering, theirs will be simpler as they can just deny stuff, there's no transition-to-a-real-BC phase.) https://github.com/steimelchrome/document-pip-explainer/issues/1

[07:53:54.0160] <architect88>
Hello everyone. I'm working on my first template and can't figure out the nuances of semantic markup (in automatic key). 
I apologize if some of the questions are inappropriate.

The first question is about the <aside> tag. How correct is it to place the all sidebar zone in it? because the content of the sidebar can contain a variety of elements, such as widgets, navigation elements, search filters, ad units, etc.

The second question is about the <header> tag.
Here is an example, how correct is it?
```
<header>logotype \ navigation</header>
<nav>breadcrumbs</nav>
<main>
<article>
<header> <h1>Article title</h1></header>
article content
</article>
</main>
```

maybe it's better to move the <h1> from the <article> or from the <artcile> and <main>,  like this?
```
<header>logotype \ navigation</header>
<nav>breadcrumbs</nav>
<header> <h1>Article title</h1></header>
<main>
<article>
article content
</article>
</main>
```

which design is more correct or is it better to do it in a completely different way? 

[07:57:54.0427] <annevk>
Domenic: there's another question as to whether it should count as auxiliary or nested from a privacy perspective

[07:58:18.0816] <annevk>
Domenic: depends a bit on whether it can show UI and what that UI would end up blaming as the responsible party, too

[08:54:26.0483] <Domenic>
Well I think the idea is for it to not show any UI (like other PiP windows). Which is pretty scary, so, I'm curious what the security folks say...

[09:19:39.0029] <annevk>
Domenic: so all APIs that could/would trigger some kind of user agent dialog would have to be disabled?

[09:20:31.0934] <Domenic>
annevk: yes, I think so. I don't think the team has done the audit to make sure that lines up well with their plans but I filed the issue to tell them such an audit is necessary.

[09:20:39.0263] <npd>
does "PIP" stand for "next generation of annoying pop-up ads that are hard to close"? ;)

[09:20:41.0420] <annevk>
If there's no UI indicating the origin of the PiP I'd think it would have to be fully partitioned

[09:21:16.0596] <annevk>
npd: I had a similar thought

[09:21:32.0614] <npd>
more seriously, I did find the picture-in-picture explainer. and I am scared about abuse

[09:21:32.0922] <Domenic>
> <@npd:mozilla.org> does "PIP" stand for "next generation of annoying pop-up ads that are hard to close"? ;)

I don't think so, unless you can trick a user into pressing play on a video, then pressing the video's PiP button.

[09:22:04.0974] <npd>
well, this isn't just videos any more, it sounds like, and any user gesture can trigger it?

[09:22:37.0947] <Domenic>
Hmm yeah I was under the impression there were more restrictions but maybe that's the case...

[09:23:01.0370] <Domenic>
I guess it closes when the opener closes automatically, that's some slight mitigation...

[09:23:43.0843] <npd>
> <@domenicdenicola:matrix.org> I guess it closes when the opener closes automatically, that's some slight mitigation...

for sure, although the lack of UI maybe makes it harder to see which pip came from where and how to make it go away

[09:25:00.0686] <Domenic>
npd: annevk: if you were able to file these issues on the repo I think they'd be much appreciated, especially the privacy/partitioning/user prompts one as the full constraints there aren't obvious to me.

[09:25:05.0438] <Domenic>
I can give it a shot otherwise.

[09:27:17.0716] <annevk>
Filed https://github.com/steimelchrome/document-pip-explainer/issues/9

[11:05:49.0171] <completesagalego>
is anyone there

[11:07:45.0220] <completesagalego>
completesagalego:  

[11:09:31.0246] <completesagalego>
i go for dinner

[11:18:42.0469] <npd>
https://github.com/steimelchrome/document-pip-explainer/issues/10

[11:32:38.0560] <completesagalego>
what

[11:47:28.0362] <completesagalego>
is anyone there

[11:50:54.0988] <npd>
> <@completesagalego:matrix.org> is anyone there

welcome to the WHATWG chat room. more info here: https://whatwg.org/chat
is this the group you were looking for?

[11:57:44.0320] <completesagalego>
yes it was

[12:13:30.0083] <completesagalego>
ooh cool

[12:14:00.0926] <completesagalego>
angry video game nerd

[14:46:53.0575] <smaug>
Ms2ger üíâüíâ: what is a Shadow realm?

[14:48:05.0847] <smaug>
aha, /me finds https://github.com/tc39/proposal-shadowrealm/issues/331

[14:48:27.0163] <smaug>
Still don't know what it is , and whether it is related to shadow dom üôÇ

[14:51:03.0126] <smaug>
aha, perhaps https://github.com/tc39/proposal-shadowrealm

[14:51:41.0569] <smaug>
confusing name


2022-02-08
[23:39:59.0369] <annevk>
smaug: it kinda fits in that it's an encapsulated global object

[02:25:43.0717] <smaug>
Perhaps I'm thinking too much the Gecko in internal Sandbox (which creates a new global and runs JS there) which is somewhat similar

[02:26:07.0158] <smaug>
/me wonders how microtasks work in ShadowRealm

[02:29:42.0321] <annevk>
smaug: I suspect the answer is in https://github.com/whatwg/html/pull/5339 (and I suspect the answer is that they are interleaved as microtasks are managed by the event loop which belongs to an agent)

[02:29:49.0476] <annevk>
I need to look at that PR still

[02:30:53.0701] <annevk>
The other Exposed=* PRs should probably not have been merged until this one...

[05:19:06.0546] <architect88>
so can anyone help me with my problem? Or can you recommend a forum or a place where someone can give me an advice?

[06:01:03.0592] <annevk>
architect88: what's correct depends a lot on the context, but Stack Overflow is probably a better place for those type of questions

[06:06:50.0060] <Noam Rosenthal>
I have a hanging build at https://github.com/whatwg/xhr/pull/319, what's the way to kick it?

[06:12:35.0181] <annevk>
Force push or close/reopen usually does the trick

[06:15:31.0825] <Noam Rosenthal>
ah it's actually "First-time contributors need a maintainer to approve running workflows.". this is my first contribution to XHR I guess

[06:40:13.0549] <architect88>
thanks

[07:40:18.0721] <annevk>
Noam Rosenthal: I invited you to the WHATWG org to prevent that from happening going forward

[07:41:19.0070] <annevk>
If anyone here isn't part of the WHATWG GitHub org but has contributed please let me know (unless you don't care for an invite)

[08:08:16.0563] <completesagalego>
hello guys

[08:09:03.0582] <EveryOS>
completesagalego: Hi

[09:09:19.0543] <Noam Rosenthal>
> <@annevk:mozilla.org> Noam Rosenthal: I invited you to the WHATWG org to prevent that from happening going forward

Thanks!


2022-02-09
[02:26:06.0590] <smaug>
In addition to Gecko, was there a searchfox instance only for webkit, not for blink?

[02:27:06.0586] <Andreu Botella>
Blink uses https://cs.chromium.org/ instead

[02:27:21.0940] <Andreu Botella>
 * Blink uses https://cs.chromium.org/ instead

[02:29:15.0386] <smaug>
sure, that is why I'm asking for searchfox üòâ

[02:30:00.0873] <Andreu Botella>
I don't think there's a searchfox instance for Blink

[02:30:11.0920] <Andreu Botella>
The one for WebKit is maintained by Igalia at webkit-search.igalia.com/


2022-02-10
[01:42:05.0670] <sideshowbarker>
annevk: with the fetch API, if a response has no body ‚Äî¬†for example, for a 204 response ‚Äî will `response.body` be null? context: https://github.com/mdn/content/issues/12862#issuecomment-1034609833 

[01:45:20.0312] <annevk>
sideshowbarker: yeah, it would make sense for it to be null in that case

[01:45:31.0156] <annevk>
(and the spec allows for it to return null)

[01:47:48.0659] <sideshowbarker>
> <@annevk:mozilla.org> sideshowbarker: yeah, it would make sense for it to be null in that case

OK, thanks ‚Äî though in the case of the response from https://httpstat.us/204 it does seem to end up being a `ReadableStream` and not null. But maybe that‚Äôs due to them sending a 0-byte response? (if that‚Äôs actually possible)

[01:48:41.0733] <annevk>
sideshowbarker: that would be a browser bug per spec...

[01:49:00.0944] <annevk>
sideshowbarker: spec special cases a couple of response codes

[01:49:12.0184] <sideshowbarker>
ah

[01:49:20.0973] <sideshowbarker>
/me looks back at the spec

[01:53:19.0898] <sideshowbarker>
hmm I‚Äôm not finding anything about special-casing in the spec that would allow an empty response to ever be a `ReadableStream` rather than null

[01:54:03.0040] <Andreu Botella>
https://fetch.spec.whatwg.org/#ref-for-null-body-status

[01:54:19.0543] <sideshowbarker>
and even testing with a HEAD request, I still get a `ReadableStream`

[01:54:33.0744] <sideshowbarker>
```js
fetch("https://httpstat.us/200", { method: "HEAD" }).then(response => console.log(response.body))
```

[01:54:52.0936] <sideshowbarker>
```js
fetch("https://httpstat.us/204").then(response => console.log(response.body))
```

[01:55:06.0499] <sideshowbarker>
> <@abotella:igalia.com> https://fetch.spec.whatwg.org/#ref-for-null-body-status

thanks, looking now

[01:55:08.0080] <Luca Casonato>
That's a browser bug

[01:55:23.0772] <sideshowbarker>
OK

[01:55:38.0276] <Luca Casonato>
Deno does this correctly: 
```js
/m/s/P/g/denoland ‚ùØ‚ùØ‚ùØ deno
Deno 1.18.2
exit using ctrl+d or close()
> fetch("https://httpstat.us/200", { method: "HEAD" }).then(response => console.log(response.body))

Promise { <pending> }
> null
> fetch("https://httpstat.us/204").then(response => console.log(response.body))

Promise { <pending> }
> null
```

[02:19:25.0013] <sideshowbarker>
> <@lucacasonato:matrix.org> That's a browser bug

OK, so based on simple testing just now, Safari, Firefox, and Chrome all seem to have this same bug.

[02:19:31.0860] <Luca Casonato>
:D

[02:20:23.0767] <sideshowbarker>
yeah, so I think I probably now need to do a follow-up to the MDN change I made, to indicate that while the spec says it should be null, browsers don‚Äôt conform

[02:21:17.0317] <annevk>
So if you do new Response().body it's null in Firefox, but maybe once networking gets involved it gets messed up

[02:21:56.0675] <Luca Casonato>
I thought there was a WPT for this (I remember fixing it in Deno). But that might actually have only covered the `new Response(null, {status: 204})` case

[02:22:20.0624] <annevk>
I'm surprised this isn't tested as well, but I have not paid as close attention to all the streams stuff

[02:23:09.0060] <Luca Casonato>
This is the only related test I can find right now:
```js
test(function() {
  var response = new Response(null, {status: 204});
  assert_equals(response.body, null);
}, "Testing null Response body");
```

[02:23:25.0092] <Luca Casonato>
oh and this:
```js
var nullBodyStatus = [204, 205, 304];
nullBodyStatus.forEach(function(status) {
  test(function() {
    assert_throws_js(TypeError,
      function() { new Response("body", {"status" : status }); },
      "Expect TypeError exception ");
  },"Throws TypeError when building a response with body and a body status of " + status);
});

```

[02:24:17.0813] <Luca Casonato>
I can add some tests start of next week

[09:30:07.0019] <Karl>
> <@annevk:mozilla.org> If anyone here isn't part of the WHATWG GitHub org but has contributed please let me know (unless you don't care for an invite)

Oh I‚Äôd take one then, if that‚Äôs okay. ‚Äúkarwa‚Äù on GitHub.

[10:06:30.0985] <mek>
How do reviews work on whatwg specs? Or I guess how do I find out who other than myself has write access to approve PRs to the new FS spec (since I presumably shouldn't approve my own changes, even if they are purely editorial)?

[10:12:49.0973] <annevk>
mek: sorry, I've been meaning to get to it, but huge backlog is huge; maybe Domenic can help out

[10:13:18.0633] <annevk>
mek: one thing I found kinda strange is that the `for=` attribute didn't contain the name of the term, but I didn't really take the time to explore

[10:15:07.0993] <annevk>
At a more meta-level, we don't really have a system and if it turns out to be prohibitive for your spec, we can remove the reviewer requirement; I'd recommend against doing that though, it's usually worth the wait

[10:15:49.0703] <mek>
I'm totally in favor of reviews, the fact that github gives no way to even figure out who can give reviews is mostly annoying...

[10:17:18.0821] <annevk>
mek: right, I think currently it's you and WHATWG admins, but we can add more folks, e.g., inexorabletash and asuth are reviewers for Storage

[11:54:03.0786] <zcorpan>
Domenic: did you consider document conformance rules when reviewing `blocking=render`? It seems to me that it's allowed to have any  value

[12:03:30.0204] <Domenic>
> <@zcorpan_:matrix.org> Domenic: did you consider document conformance rules when reviewing `blocking=render`? It seems to me that it's allowed to have any  value

I think you are right this is not correct. It is constrained to be a space-separated sequence of tokens but I made the wrong assumption that "supported tokens" helped with conformance.

[12:04:04.0699] <Domenic>
"A blocking attribute must have a value that is an unordered set of unique space-separated tokens. " -> "A blocking attribute must have a value that is an unordered set of unique space-separated tokens, each of which is a possible blocking token"?

[14:07:39.0483] <zcorpan>
Domenic: right. Yeah, the proposed text should do it I think

[14:08:23.0586] <zcorpan>
Domenic: I found   another bug in the idl, will report an issue


2022-02-11
[23:50:47.0428] <annevk>
https://github.com/gpuweb/gpuweb/pull/2416 has some additional WebGPU and <canvas> integration discussion, if anyone's interested. (Been trying to steer them in a direction that more closely matches the existing contexts. It seems this went unnoticed in the TAG review.)

[03:12:42.0693] <Katherine>
Hello-world 

[03:17:19.0101] <zcorpan>
Anyone else find it weird that 2007 was 15 years ago??

[03:24:20.0210] <Katherine>
https://matrix.to/#/#brendabanks872@gmail.com:matrix.org

[03:26:13.0659] <annevk>
zcorpan: shush

[03:40:57.0777] <Luca Casonato>
> <@lucacasonato:matrix.org> I can add some tests start of next week

Just had a couple minutes to spare. Added some basic tests here: https://github.com/web-platform-tests/wpt/pull/32813

[04:29:06.0426] <miketayl_r>
> Enter the Storage Access API. This API lets third parties request storage access as if they were a first party. This is called ‚Äúunpartitioning‚Äù and it gives browsers and users control over which third parties can maintain state across first-party origins as well as determine which origins they can access that state from.

(from https://hacks.mozilla.org/2022/02/improving-the-storage-access-api-in-firefox/) annevk - here "storage" is just cookies, right?

[04:29:40.0899] <miketayl_r>
i thought that was the plan, but it references unpartitioning storage a few times and i'm confused now

[04:32:04.0739] <miketayl_r>
ok, i just saw https://github.com/privacycg/storage-partitioning/issues/9#issuecomment-1035960211, so probably yes "storage" means _only_ cookies in the blog post

[04:38:06.0886] <annevk>
miketayl_r: our current implementation still does storage as well

[04:38:42.0729] <annevk>
miketayl_r: we plan to migrate away from that, but it takes some doing and it might end up shipping later therefore

[05:10:08.0760] <miketayl_r>
i see, thanks

[06:00:51.0947] <annevk>
Noam Rosenthal: I need more time for the controller review. I put a reminder in for Monday. Was there anything else?

[06:18:58.0424] <Noam Rosenthal>
annevk: thanks for moving forward with the rest :) For the iframe one, it also has the HTML side: https://github.com/whatwg/html/pull/7531

[06:21:33.0752] <Noam Rosenthal>
annevk: otherwise, I have 4 additional HTML pending PRs for reporting timing for different resource types. They're split to different PRs to keep each one small.
If either you or Domenic can take them on it would be great.

https://github.com/whatwg/html/pull/7539 https://github.com/whatwg/html/pull/7553 https://github.com/whatwg/html/pull/7554 https://github.com/whatwg/html/pull/7559


[07:19:06.0977] <Domenic>
I'll try to take a look at at least some of them today. When they were originally posted I think some were WIP so I didn't flag them


2022-02-13
[23:50:20.0969] <sideshowbarker>
annevk Domenic Jake Archibald (and anybody else interested): feedback welcome on https://github.com/mdn/content/pull/12941 ‚Äî either here or as comments to that PR

[12:23:56.0709] <and3co>
hi

[12:28:40.0854] <and3co>
As a beginner I experiment with fetch() in chrome console. the command is const req = await fetch("https://swapi.dev/api/people/");  on some page it is work on some others doesn't. It is because the cors, I would like to know how a page could enable this cors functionality?

[13:36:30.0258] <miketayl_r>
and3co: you might check out https://jakearchibald.com/2021/cors/ 

[14:46:26.0748] <wayneca>
I'm not sure if this is the correct forum for this, but I want to discuss rendering across browsers. I know that different computer systems and devices do things differently, but when I look at the same page on two different browsers on the same computer I should see the same rendering. I remember the old days when every browser "had to be different" but this is 2022. You would think by now that Sir Tim Berners-Lee's original vision would be implemented more concisely than it is. It's OK that the browsers look different in terms of their UI, and that their code is not identical, but it is unacceptable that the way a web page is rendered has to be so different. As an example, I will use one of my web pages. I use Firefox as my primary browser, but Edge came with the OS so I use it for only two purposes: to see what a page I am developing looks like and any searches regarding Windows or Microsoft products such as Office. Otherwise I use Firefox. I invite anyone who chooses to to look at my page in any browser you have and let me know how it compares to Firefox. https://wayneca.neocities.org/WebDesign/TagList.html

WHATWG is a consortium of browser developers at heart, so it would make sense that now they can focus on rendering. Web pages are the product of many web page developers, but they all have one thing in common. They want their pages to look the same no matter what browser you are using. Let me describe the difference between Edge and Firefox as far as my page is concerned. Firefox displays it the way I intended for it to look. Edge enlarges the font so it uses more space, resulting in the bottom of the page going below the bottom of the viewport and causing a vertical scrollbar to appear in the viewport pushing the content to the left and changing the way the page looks. This is on the exact same computer. It should not be doing that. Tahoma 12 point should be Tahoma 12 point in every browser. Smaller screen or lower resolution? OK that's a thing, but when it's the same screen and the same resolution the rendering should be identical.


2022-02-14
[07:06:22.0292] <wayneca>
Since the page I used for an example is a work in progress, I decided that I would discuss here what I am doing with it. It is supposed to be as complete a list as possible of every tag and attribute that has existed in the history of HTML and the W3. I am finding that with the previous versions of the DTD (the SGML based ones through 4.01) it is easy to determine what attributes were given to each element. In the Living Standard version, being removed from the SGML requirement for things to be so specific, the specification is written very differently. It has become difficult to determine exactly which attributes should be listed with a given element, and which attributes from the past are no longer relevant. I am also having difficulty with finding a list of the onEvent attributes (such as onMouseDown) in the HTML 5 specification. Is there a concise list?

[07:07:22.0845] <wayneca>
 * Since the page I used for an example is a work in progress, I decided that I would discuss here what I am doing with it. It is supposed to be as complete a list as possible of every tag and attribute that has existed in the history of HTML and the W3. I am finding that with the previous versions of the DTD (the SGML based ones through 4.01) it is easy to determine what attributes were given to each element. In the Living Standard version, being removed from the SGML requirement for things to be so specific, the specification is written very differently. It has become difficult to determine exactly which attributes should be listed with a given element, and which attributes from the past are no longer relevant. I am also having difficulty with finding a list of the onEvent attributes (such as onMouseDown) in the HTML 5 specification. Is there a concise list?

[07:09:04.0151] <wayneca>
It also seems like the Global Attributes contain members that are not all useful on every element that has them. Is there a way to differentiate between them as they pertain to a given element?

[07:20:24.0954] <wayneca>
Also, I feel I should make a distinction in what I said in my first post. I am not saying Firefox is right and everyone else is wrong. I'm saying that there needs to be an agreed upon definition of proper rendering that all browsers should adhere to if they want to render web pages correctly. Then all web pages would look the same in every browser no matter what platform or browser the user has. Of course, there are limits, such as different screen size and resolutions. The authors of the web pages would have to ensure that they code the pages in such a way that it accommodates as many users as possible, realizing that there will be some users who simply won't see the page as intended.

[07:31:32.0687] <wayneca>
While this site is still basically offline while I develop the pages, I have made that page available so those that need to or are interested can see my progress. I have also now included my Notes page (https://wayneca.neocities.org/WebDesign/Notes.html) so you can see the remarks I have made concerning the effort. This is also a work in progress as I have just begun this work over the past week.

[07:47:57.0919] <annevk>
wayneca: FWIW, although we do define how HTML maps to CSS in the Rendering section of the HTML Standard, how those CSS rules translate into a picture on your screen is not something the WHATWG works on (W3C's CSS WG does), though many here have some expertise in it. (And some a lot.)

[07:52:26.0581] <wayneca>
> <@annevk:mozilla.org> wayneca: FWIW, although we do define how HTML maps to CSS in the Rendering section of the HTML Standard, how those CSS rules translate into a picture on your screen is not something the WHATWG works on (W3C's CSS WG does), though many here have some expertise in it. (And some a lot.)

Thanks for your input. I realize that the focus of the WHATWG may not be the same as the W3C, but this is the only forum I know of that has so many browser developers in one place. I am reaching out to the browser developers because this is something that has not really been addressed in the history of the W3 that I know of.

[07:55:43.0810] <Luca Casonato>
All three major browser vendors are members of W3C. How exactly a page is rendered (how flex works, how tables should flow, etc) is all specified by the CSSWG. You can see the members here: https://www.w3.org/Style/CSS/members.en.php3

[07:56:22.0437] <wayneca>
Also, if it was all so straight-forward as the specification defines it, different browsers would not render the pages so differently. I believe that this can and should be remedied by the browser developers coming together and defining the specifics of what a rendered page should look like.

[07:56:53.0283] <wayneca>
 * Also, if it was all so straight-forward as the specification defines it, different browsers would not render the pages so differently. I believe that this can and should be remedied by the browser developers coming together and defining the specifics of how a frendered page should look like.

[07:57:08.0888] <wayneca>
 * Also, if it was all so straight-forward as the specification defines it, different browsers would not render the pages so differently. I believe that this can and should be remedied by the browser developers coming together and defining the specifics of what a rendered page should look like.

[07:57:11.0551] <Luca Casonato>
> <@wayneca:matrix.org> Also, if it was all so straight-forward as the specification defines it, different browsers would not render the pages so differently. I believe that this can and should be remedied by the browser developers coming together and defining the specifics of what a rendered page should look like.

The problem here is not specifications. They exist. The problem is that there are three different engines with different bugs. If you see rendering differences, then these are bugs in individual engines.

[07:57:49.0073] <Andreu Botella>
I don't know about how things are rendered on your system, but in mine the differences between Firefox and Chrome are because I don't have Tahoma installed in my system, and different browsers use different fallback fonts. So that's also something that you can't expect browsers to agree on.

[07:58:15.0329] <wayneca>
I see. So it's a matter of finding and squashing the bugs.

[07:58:25.0088] <wayneca>
 * I see. So it's a matter of finding and squashing the bugs.

[07:59:53.0035] <Luca Casonato>
> <@wayneca:matrix.org> I see. So it's a matter of finding and squashing the bugs.

We have shared test suites to tackle this, but they do not have 100% coverage. And even with 100% perfect coverage, the actual implementation of the specs definitly follows the 80:20 rule. The last 20% of issues is just as hard as the first 80%.

[07:59:59.0611] <wayneca>
> <@abotella:igalia.com> I don't know about how things are rendered on your system, but in mine the differences between Firefox and Chrome are because I don't have Tahoma installed in my system, and different browsers use different fallback fonts. So that's also something that you can't expect browsers to agree on.

Well, I know that this is why you can specify multiple fonts to fall back on. I haven't done it yet, but that's because I am still trying to get all of the data in. Once that is done I can worry about fallback fonts. That was my thinking. I guess I should remedy that now though.

[08:00:02.0417] <Luca Casonato>
https://github.com/web-platform-tests/wpt for example

[08:00:52.0375] <Luca Casonato>
Most of the rendering tests are in https://github.com/web-platform-tests/wpt/tree/master/css

[08:01:44.0802] <wayneca>
> <@lucacasonato:matrix.org> https://github.com/web-platform-tests/wpt for example

Thanks for the info. I will read at least some of that when I have the time.

[08:02:44.0062] <wayneca>
What would any of you say are the most common sans-serif fonts? Would Monaco be one?

[08:03:10.0818] <wayneca>
 * What would any of you say are the most common sans-serif fonts? Would Monaco be one?

[08:05:08.0503] <wayneca>
I have already specified sans-serif as a family in my font-family property. Is that not enough for a system to use whatever is available on a system that doesn't have Tahoma?

[08:07:43.0192] <Alan Stearns>
That is enough, and the text will render in whatever font the browser chooses.

[08:08:30.0215] <wayneca>
That is what I thought too, but I updated the files to include  Verdana, Arial, Helvetica also.

[08:10:25.0684] <Alan Stearns>
That‚Äôs usually not necessary (unless you really have a preference for those fonts). Picking your first desired font, then having a generic family fallback is fine

[08:11:50.0729] <wayneca>
OK. I had thought that was the case, but when Andreu Botella stated that they didn't have Tahoma installed on their computer it made me rethink.

[08:13:55.0819] <Andreu Botella>
Tahoma, Verdana, Arial, Helvetica are all fonts that come with Windows systems and don't tend to come with, say, Linux

[08:14:18.0883] <Andreu Botella>
there are fonts with the same metrics that might come in Linux systems, but they don't have those names

[08:15:19.0949] <wayneca>
That is why I initially included sans-serif in the family list: font-family:Tahoma, sans-serif;

[08:16:14.0789] <wayneca>
I thought I understood that this would allow a system that didn't have Tahoma to fall back on whatever sans-serif font it has.

[08:17:01.0733] <Andreu Botella>
if there are multiple, browsers are free to choose one, and different browsers might choose differently

[08:18:08.0417] <wayneca>
Well, I really don't have the means to see what every sans-serif font looks like, so I try to allow the user to determine their own preference when possible.

[08:18:15.0533] <wayneca>
 * Well, I really don't have the means to see what every sans-serif font looks like, so I try to allow the user to determine their own preference when possible.

[08:18:50.0798] <wayneca>
I'm not certain that my pages look as good with other fonts though.

[11:23:36.0279] <TabAtkins>
What's the syntax in the HTML source for indicating that a heading has multiple IDs?

[11:23:48.0433] <TabAtkins>
Trying to track it down but it doesn't show up very often :(

[11:23:57.0165] <TabAtkins>
Domenic annevk ?

[11:24:32.0288] <Domenic>
TabAtkins: usually something hacky like <span id="..."></span> inside the heading... let me see if I can find an example.

[11:24:58.0868] <Domenic>
Yeah `<h5 id="image-map-processing-model"><span id="processing-model"></span>Processing model</h5>`

[11:26:23.0256] <TabAtkins>
danke

[15:47:19.0810] <Lorenz>
Hi, I hope this is a good place for my question. I tried to figure out why only link and script tags support SRI. I had a chat with Eric Lawrence, and he told me that there are some theoretical plans to support it (see https://www.w3.org/TR/SRI/#verification-of-html-document-subresources). Does anyone know what the current status of this is? Eric told me that potentially Mike West might have some insights, but maybe also someone else knows anything about it.


2022-02-15
[23:31:43.0583] <annevk>
Lorenz: I recommend browsing through https://github.com/w3c/webappsec-subresource-integrity/issues and filing a new issue there if whatever you're looking for isn't already being discussed

[23:32:18.0236] <annevk>
Lorenz: having said that, I'm not sure there's a lot of interest to expand SRI support at this time, but I could be mistaken

[23:32:33.0385] <annevk>
Lorenz: https://whatwg.org/faq#adding-new-features is worth keeping in mind too

[02:08:50.0941] <Lorenz>
Thanks for the links 


2022-02-16
[22:43:17.0470] <sideshowbarker>
https://stackoverflow.com/questions/71136656/corp-blocking-an-obviously-same-origin-request

[23:58:17.0800] <annevk>
Left a reply

[23:58:34.0174] <sideshowbarker>
thanks

[03:20:16.0218] <Seirdy>
Are there any microdata vocabularies besides schema.org? I know there are a bunch for rdfa (dublin core, creativecommons, DOAP, FOAF, etc) but I don't know of any schema.org alternatives for microdata.

[03:22:21.0696] <Seirdy>
* Are there any microdata vocabularies besides schema.org? I know there are a bunch for rdfa (dublin core, creativecommons, DOAP, FOAF, etc) but I don't know of any schema.org alternatives for microdata.

[03:25:18.0696] <completesagalego>
yes it does

[03:31:57.0124] <Seirdy>
I noticed microformats.org/profile/hcard but I don't see a point in using those over classes because classes have more universal support.

I do like schema.org's more detailed info. i would use rdfa so i could make use of dublin core, foaf, etc. but microdata has more support than rdfa (used by readability, chromium DOM distiller, less error prone on search engines, and some others). which is why I ask.

Mixing microformats classnamwa and microdata syntax is okay but dealing with a third format kinda kills the fun of structured data for me.

[03:36:15.0771] <Seirdy>
> <@completesagalego:matrix.org> yes it does

got any working examples?

[03:38:16.0623] <Seirdy>
* I noticed microformats.org/profile/hcard but I don't see a point in using those over classes because classes have more universal support.

I do like schema.org's more detailed info. i would use rdfa so i could make use of dublin core, foaf, etc. but microdata has more support than rdfa (used by readability, chromium DOM distiller, less error prone on search engines, and some others). which is why I ask.

Mixing microformats classnames and microdata syntax is okay but dealing with a third format kinda kills the fun of structured data for me.

[03:40:31.0261] <Seirdy>
I know it's possible to create ad-hoc vocabs but I'm more interested in vocabs that are actually standardized or supported by something

[08:02:51.0062] <aja>
Seirdy: not exactly on point, but https://www.w3.org/TR/dpub-aria-1.1/ may be of interest

[09:03:31.0231] <Domenic>
annevk: I would appreciate help advising Noam Rosenthal on what to do with trying to integrate resource timing and media fetches, given how un-rigorous media fetches are today. https://github.com/whatwg/html/pull/7553#discussion_r805082633

[09:29:12.0300] <annevk>
Thanks for the ping, I left some pointers to prior work and a very high-level suggestion for what the setup might look like. Hope that helps.

[09:34:10.0140] <Noam Rosenthal>
thanks annevk, it definitely helps. I split it from the rest of the content for now and will get back to it with those pointers

[09:42:49.0133] <wayneca>
What exactly is the abbr attribute on the TH element used for? The only example I've found (on the W3Schools site) just shows it being placed in the TH tag, but does not describe what you would do with it. It seems to only be useful as informational to anyone viewing the page source.

[09:45:03.0513] <Domenic>
> <@wayneca:matrix.org> What exactly is the abbr attribute on the TH element used for? The only example I've found (on the W3Schools site) just shows it being placed in the TH tag, but does not describe what you would do with it. It seems to only be useful as informational to anyone viewing the page source.

"informational to anyone viewing the page source" is approximately right. There are many features in HTML like this, e.g. the distinction between <section> and <article>, <q>'s cite="" attribute, all of microdata, etc. With the caveat that "viewing the page source" might be something a non-browser tool is doing (especially for the microdata example), and such tools might do something that eventually is useful to users.

[09:47:01.0993] <wayneca>
I see. Thanks for the explanation. Because I don't typically delve that far into the behind the scenes part of web-browsing I don't usually think of these things. I just want to make sure my understanding is correct as I build my list of attributes and what they do.

[10:01:01.0588] <wayneca>
The html5 specification shows autofocus being a global attribute (it says HTML elements, but W3Schools lists those as being Global Attributes), but the W3Schools site lists autofocus as belonging to <button>, <input>, <select>, <textarea>. Is it global or is it specific to only these tags?

[10:05:08.0931] <annevk>
wayneca: W3Schools is not an authoritative source of information (it also doesn't belong to the W3C)

[10:05:55.0814] <wayneca>
OK. I just use it because it has much information in one place that is more easily digested than the specification is. It also agrees with the specification in many things. I have noticed that there are some things in the specification that are absent in the W3Schools information. Based on this response I will take the specification as being correct when W3Schools shows something different.

[10:07:10.0915] <wayneca>
 * OK. I just use it because it has much information in one place that is more easily digested than the specification is. It also agrees with the specification in many things. I have noticed that there are some things in the specification that are absent in the W3Schools information.

[10:08:19.0134] <wayneca>
 * OK. I just use it because it has much information in one place that is more easily digested than the specification is. It also agrees with the specification in many things. I have noticed that there are some things in the specification that are absent in the W3Schools information. Based on this response I will take the specification as being corrent when W3Schools shows something different.

[10:08:33.0339] <wayneca>
 * OK. I just use it because it has much information in one place that is more easily digested than the specification is. It also agrees with the specification in many things. I have noticed that there are some things in the specification that are absent in the W3Schools information. Based on this response I will take the specification as being correct when W3Schools shows something different.

[10:57:40.0107] <Seirdy>
> <@wayneca:matrix.org> OK. I just use it because it has much information in one place that is more easily digested than the specification is.

MDN is generally a *far* better (non-authorative) source than w3schools for learning.

but nothing beats the specs

[10:59:56.0534] <wayneca>
> MDN is generally a _far_ better (non-authorative) source than w3schools for learning.
> 
> but nothing beats the specs

I agree with that sentiment totally. The spec is the authoritative source. It's just not that easy to understand in many ways.

[11:02:28.0165] <Seirdy>
oh definitely, it's usually written for implementers first and authors second. and it needs to favor comprehensiveness over approachability, and it has to be extra neutral when making recommendations. and it can't give recommendations too influenced by the existing landscape/implementations. hence the use for MDN.

[11:03:22.0165] <Seirdy>
* oh definitely, it's usually written for implementers first and authors second. and it needs to favor comprehensiveness over approachability, and it has to be extra neutral when making recommendations. and it can't give recommendations too influenced by the existing landscape/implementations. hence the use for MDN.

[11:03:57.0893] <Andreu Botella>
There's https://html.spec.whatwg.org/dev/

[11:04:24.0487] <Seirdy>
it's just the source of truth that has the last word when parties disagree.

[11:04:38.0492] <Seirdy>
and a reference

[11:04:47.0008] <wayneca>
Thanks, Andreu. This is he first I've heard of that site. I will check it out.

[11:04:53.0440] <Seirdy>
it's like a manpage i guess.

[11:05:13.0719] <Seirdy>
in certain respects

[11:05:20.0564] <Seirdy>
* it's like a POSIX manpage i guess.

[11:05:21.0415] <wayneca>
 * Thanks, Andreu. This is the first I've heard of that site. I will check it out.

[11:05:34.0899] <Andreu Botella>
> <@wayneca:matrix.org> Thanks, Andreu. This is the first I've heard of that site. I will check it out.

It's built from the same source as the HTML spec, and sometimes skips some of the detailed algorithms, and adds some explanations

[11:27:10.0924] <Andreu Botella>
I was checking something in the images part of the spec, and I noticed that images can be fetched on demand (https://html.spec.whatwg.org/multipage/images.html#when-to-obtain-images), which sounds like it should be the same as lazy-loading

[11:27:42.0716] <Andreu Botella>
But lazy loading is disabled if scripting is disabled because of tracking concerns, while fetching images on demand isn't: https://html.spec.whatwg.org/multipage/urls-and-fetching.html#will-lazy-load-element-steps

[13:28:55.0672] <zcorpan>
Andreu Botella: on demand means that it's not loaded until the user asks for it to be loaded (via context menu or so)

[13:31:11.0266] <Andreu Botella>
oh, right, that makes a lot more sense


2022-02-17
[08:46:51.0497] <Domenic>
zcorpan: let me know if you feel done with https://github.com/whatwg/html/pull/7475 ; I appreciate you taking the review lead there and will be happy to give it another look after you think it's settled.


2022-02-20
[17:44:24.0726] <sideshowbarker>
wanderview: so while reviewing https://github.com/mdn/content/pull/13137 and testing `URLPattern.test()`, I notice this:
```js
const pattern = new URLPattern({   hostname: '{*.}?example.com', });
console.log(pattern.test('custom-protocol://example.com/other/path?q=1'));
// false
```

‚Ä¶which makes sense because per the URL spec, non-special schemes have not `hostname` (right?)

But then in testing the `URLPattern()` constructor, I notice this:
```js
(new URLPattern('custom-protocol://example.com/other/path?q=1')).hostname
// 'example.com'
```

‚Ä¶which seems like either a bug in Chrome or a spec bug?

[17:45:00.0454] <sideshowbarker>
 * wanderview: so while reviewing https://github.com/mdn/content/pull/13137 and testing `URLPattern.test()`, I notice this:
```js
const pattern = new URLPattern({   hostname: '{*.}?example.com', });
console.log(pattern.test('custom-protocol://example.com/other/path?q=1'));
// false
```

‚Ä¶which makes sense because per the URL spec, non-special schemes have not `hostname` (right?)

But then in testing the `URLPattern()` constructor, I notice this:
```js
(new URLPattern('custom-protocol://example.com/other/path?q=1')).hostname
// 'example.com'
```

‚Ä¶which seems like either a bug in Chrome or a spec bug?

[17:45:27.0112] <sideshowbarker>
 * wanderview: so while reviewing https://github.com/mdn/content/pull/13137 and testing `URLPattern.test()`, I notice this:
```js
const pattern = new URLPattern({ hostname: '{*.}?example.com' });
console.log(pattern.test('custom-protocol://example.com/other/path?q=1'));
// false
```

‚Ä¶which makes sense because per the URL spec, non-special schemes have not `hostname` (right?)

But then in testing the `URLPattern()` constructor, I notice this:
```js
(new URLPattern('custom-protocol://example.com/other/path?q=1')).hostname
// 'example.com'
```

‚Ä¶which seems like either a bug in Chrome or a spec bug?

[17:46:50.0460] <sideshowbarker>
 * wanderview: so while reviewing https://github.com/mdn/content/pull/13137 and testing `URLPattern.test()`, I notice this:
```js
const pattern = new URLPattern({ hostname: '{*.}?example.com' });
console.log(pattern.test('custom-protocol://example.com/other/path?q=1'));
// false
```

‚Ä¶which makes sense because per the URL spec, non-special schemes have not `hostname` (right?)

```js
(new URL('custom-protocol://example.com/other/path?q=1')).hostname
```

But then in testing the `URLPattern()` constructor, I notice this:
```js
(new URLPattern('custom-protocol://example.com/other/path?q=1')).hostname
// 'example.com'
```

‚Ä¶which seems like either a bug in Chrome or a spec bug?

[17:47:06.0207] <sideshowbarker>
 * wanderview: so while reviewing https://github.com/mdn/content/pull/13137 and testing `URLPattern.test()`, I notice this:
```js
const pattern = new URLPattern({ hostname: '{*.}?example.com' });
console.log(pattern.test('custom-protocol://example.com/other/path?q=1'));
// false
```

‚Ä¶which makes sense because per the URL spec, non-special schemes have no `hostname` (right?)
```js
(new URL('custom-protocol://example.com/other/path?q=1')).hostname
```

But then in testing the `URLPattern()` constructor, I notice this:
```js
(new URLPattern('custom-protocol://example.com/other/path?q=1')).hostname
// 'example.com'
```

‚Ä¶which seems like either a bug in Chrome or a spec bug?

[17:47:46.0129] <sideshowbarker>
 * wanderview: so while reviewing https://github.com/mdn/content/pull/13137 and testing `URLPattern.test()`, I notice this:
```js
const pattern = new URLPattern({ hostname: '{*.}?example.com' });
console.log(pattern.test('custom-protocol://example.com/other/path?q=1'));
// false
```

‚Ä¶which makes sense because per the URL spec, non-special schemes have no `hostname` (right?)
```js
(new URL('custom-protocol://example.com/other/path?q=1')).hostname
// ''
```

But then in testing the `URLPattern()` constructor, I notice this:
```js
(new URLPattern('custom-protocol://example.com/other/path?q=1')).hostname
// 'example.com'
```

‚Ä¶which seems like either a bug in Chrome or a spec bug?

[01:02:11.0497] <annevk>
sideshowbarker: custom schemes can have a host

[01:02:35.0196] <annevk>
sideshowbarker: Chrome doesn't have a compliant URL parser so `URLPattern` is also somewhat broken in it

[02:04:22.0069] <sideshowbarker>
> <@annevk:mozilla.org> sideshowbarker: custom schemes can have a host

OK ‚Äî what‚Äôs a case where one can?

[02:04:45.0659] <sideshowbarker>
the `custom-protocol://example.com/other/path?q=11` case seems not to be

[02:04:59.0570] <sideshowbarker>
 * the `custom-protocol://example.com/other/path?q=11` case seems not to be

[02:06:24.0893] <sideshowbarker>
hmm, though in Safari at least, `(new URL('custom-protocol://example.com/other/path?q=1')).hostname` gives `"example.com"`

[02:06:42.0359] <sideshowbarker>
‚Ä¶but not in Firefox or Chrome

[02:09:36.0918] <sideshowbarker>
‚Ä¶and I see that jsdom whatwg-url also returns `"example.com"` for `hostname` https://jsdom.github.io/whatwg-url/#url=Y3VzdG9tLXByb3RvY29sOi8vZXhhbXBsZS5jb20vb3RoZXIvcGF0aD9xPTE=&base=YWJvdXQ6Ymxhbms=

[02:10:51.0640] <sideshowbarker>
so I guess that means both Chrome and Firefox aren‚Äôt conforming on this

[06:18:34.0835] <annevk>
Indeed


2022-02-21
[04:09:05.0535] <matt rodriguez>
hey now i didnt think they had vhatrooms

[09:59:23.0814] <wayneca>
In the W3C version of HTML 5 (2010) there is an element named BB. Is that element still valid or has it been deprecated?

[10:07:57.0713] <annevk>
wayneca: pointer? (https://html.spec.whatwg.org/ is the only HTML Standard at this point, per W3C and WHATWG, but I'm still curious as I didn't think there ever was a `bb` element.)

[10:08:28.0085] <wayneca>
https://dev.w3.org/html5/html-author/#the-bb-element

[10:12:32.0122] <annevk>
Ah, introduced in https://github.com/whatwg/html/commit/93f87d3abab2f321e0454f880eedf3433f5c6621 and removed a year later in https://github.com/whatwg/html/commit/922c3a85c555209918e991209fded4124e7377b5. I had forgotten about that one. I did recall datagrid "existing" the other day.

[10:13:21.0607] <annevk>
(`git log --grep="<bb>"` was my trick, there's a couple other commits too there)

[10:13:52.0617] <wayneca>
So it's not a valid tag then. I didn't see datagrid.

[10:15:48.0088] <wayneca>
interesting. apparently there have been a few additions that were removed before being finally implemented.

[10:16:51.0194] <wayneca>
Since I'm only interested in tags that were valid at some point, I won't include tags that were never valid.

[10:17:07.0663] <annevk>
Yeah, the development model was a little different from how it is today. It can still happen, but it's far less likely.

[10:17:38.0353] <wayneca>
Thanks for helping to clear that up for me.

[15:54:31.0899] <zcorpan>
> <@domenicdenicola:matrix.org> zcorpan: let me know if you feel done with https://github.com/whatwg/html/pull/7475 ; I appreciate you taking the review lead there and will be happy to give it another look after you think it's settled.

I left some more comments. Maybe when they are addressed, you can have a look


2022-02-22
[16:39:12.0375] <zcorpan>
Sigh... Leanpub have moved API publishing to their Pro plan. I guess I have to switch to something else

[17:13:12.0011] <zcorpan>
or it seems I can still use GitHub writing mode, but need to press a button to publish

[05:15:35.0548] <Noam Rosenthal>
Jake Archibald: hola! when you get a chance, https://github.com/whatwg/fetch/pull/1329 can still benefit from some of your review time

[07:23:34.0598] <wanderview>
sideshowbarker: I believe that URL issue in chrome is crbug.com/869291... since URLPattern constructor had to use a separate (but similar) parser, I chose to follow the spec there in the hopes chrome url parser will get fixed in the future

[14:28:17.0418] <sideshowbarker>
ah OK, thanks ‚Äî I‚Äôm surprised I didn‚Äôt know about that issue before now.
And  yeah about the parser difference, I had read the note at https://wicg.github.io/urlpattern/#ref-for-concept-basic-url-parser in the spec:
> The URLPattern constructor string algorithm is very similar to the basic URL parser algorithm, but some differences prevent us from using that algorithm directly.

But then it seems there must be a bug in your `pattern.test()` implementation, right?
I mean for the following:
```js
const pattern = new URLPattern({ hostname: '{*.}?example.com' });
console.log(pattern.test('custom-protocol://example.com/other/path?q=1'));
// false
```

[14:29:08.0538] <sideshowbarker>
per-spec, the value of that `pattern.test('custom-protocol://example.com/other/path?q=1')` should be true?

[14:29:28.0413] <wanderview>
the `pattern.test(arg)` runs the browsers url parser... which in chrome does not produce a hostname (incorrectly)

[14:29:37.0765] <wanderview>
thats a bug in the url parser, not `pattern.test()`

[14:29:45.0455] <sideshowbarker>
> <@wanderview:matrix.org> sideshowbarker: I believe that URL issue in chrome is crbug.com/869291... since URLPattern constructor had to use a separate (but similar) parser, I chose to follow the spec there in the hopes chrome url parser will get fixed in the future

 * ah OK, thanks ‚Äî I‚Äôm surprised I didn‚Äôt know about that issue before now.
And  yeah about the parser difference, I had read the note at https://wicg.github.io/urlpattern/#ref-for-concept-basic-url-parser in the spec:
> The URLPattern constructor string algorithm is very similar to the basic URL parser algorithm, but some differences prevent us from using that algorithm directly.

But then it seems there must be a bug in your `pattern.test()` implementation, right?
I mean for the following:
```js
const pattern = new URLPattern({ hostname: '{*.}?example.com' });
console.log(pattern.test('custom-protocol://example.com/other/path?q=1'));
// false
```

[14:29:55.0721] <sideshowbarker>
aha

[14:30:04.0270] <sideshowbarker>
got it ‚Äî thanks

[14:30:57.0395] <sideshowbarker>
now I need to figure out how to word the comment for https://github.com/mdn/content/pull/13137/files#diff-a96bc8239765e58f018eadd82a682acbb766184024a6b80d68322e89051d8e7cR272


2022-02-23
[21:45:58.0903] <crowlkats>
wanderview is https://github.com/WICG/urlpattern/issues/73 on a long term goal, or is it something that might happen soon? over at deno we'd love to have this

[21:46:14.0937] <crowlkats>
 * wanderview is https://github.com/WICG/urlpattern/issues/73 on a long term goal, or is it something that might happen soon? over at deno we'd love to have this

[07:22:18.0355] <wanderview>
crowlkats: Its not something I'm currently working on, but I would like to see it happen.  Is it a high enough priority on your side for deno to take the lead on it?

[14:47:10.0585] <crowlkats>
> <@wanderview:matrix.org> crowlkats: Its not something I'm currently working on, but I would like to see it happen.  Is it a high enough priority on your side for deno to take the lead on it?

its not high priority. its more like a "great to have". would allow us to get rid of a path-to-regex rust port for a part of the codebase.
also, i dont feel confident i could take the lead on something like that; i still dont fully understand the spec and how things interract, i mainly just impl what i read üòÖ


2022-02-24
[20:10:07.0003] <Domenic>
Never too late to learn on the job :). I think a lot of us (not necessarily speaking for wanderview but at least for myself...) find it easier to review and guide than drive.

[21:10:04.0061] <dz85>
Hi , i'm new here, nice seeing u all. Could anyone tell me how can we find the roadmap about html6? thx.ü§ù

[21:22:39.0169] <crowlkats>
> <@domenicdenicola:matrix.org> Never too late to learn on the job :). I think a lot of us (not necessarily speaking for wanderview but at least for myself...) find it easier to review and guide than drive.

that is true, and i'd love to try to learn and do this, but as stated, not really priority. well, let me change my reasoning for not being able to do this to: i am not going to have time because next up i have to suffer through implementing indexeddb, and after that i dont want to see another webspec for a while üôÉ

[23:28:38.0484] <annevk>
dz85: I encourage you to read https://whatwg.org/faq#living-standard and https://whatwg.org/faq#adding-new-features. We're mostly in the business of steady incremental improvement.

[03:27:00.0696] <freddy>
I was surprised to find out that the `<svg><use>` element is not really specified through fetch or some terms of "navigation". It also does not acknowledging that it is some sort of nested browsing context (or is it not?).

[03:28:34.0024] <freddy>
This is somewhat related to TrustedTypes experiencing bypasses with `<use href="data:...">` and the question whether `data` should make things cross-origin? Discussion is in https://github.com/w3c/webappsec-trusted-types/issues/357 (scroll down)

[03:36:23.0759] <annevk>
freddy: I've not really played with svg:use much, but I think it fetches, parses into a tree, copies the tree, and it inserts it into a shadow root of sorts belonging to the svg:use. It has to use CORS (or be restricted in some way therefore). That also explains why `data:` URLs work I think as it doesn't create an execution environment (although in some ways it might arguably be close).

[03:47:47.0996] <freddy>
What exactly do you mean with "does not create an execution environment"? Scripts included in the external document do execute..

[03:50:51.0779] <freddy>
 * @annevk: What exactly do you mean with "does not create an execution environment"? Scripts included in the external document do execute..

[03:51:08.0824] <freddy>
 * annevk:  What exactly do you mean with "does not create an execution environment"? Scripts included in the external document do execute..

[03:55:01.0249] <annevk>
freddy: yeah, but in the same way as <script> (I think), not <iframe>

[03:56:14.0801] <freddy>
mh, well scripts have always been loaded across origins (regardless of data), whereas documents loaded in an iframe via `data` do not share the same origin. maybe I don't follow?

[03:57:10.0108] <annevk>
In the sense that this doesn't create a new environment, but executes in the environment that used svg:use.

[04:01:17.0889] <freddy>
Yeah, that whole cloning logic via <use> doesn't really make it nested, right? On the one hand, `data:`  should be safe to clone into the document (as per the same-origin policy) in comparison to a hosted foreign origin. But on the other hand, this is a weird primitive for security controls that can't track the origin of, say, event handler attributes after that clone.

[04:02:36.0789] <annevk>
If it was a nested browsing context the "used" scripts would see a document that's different from the svg:use document. That's not the case, right? I agree svg:use is weird.

[04:05:20.0793] <annevk>
And yeah, the rough policy we have for `data:` URLs is that if it creates a new authority it's an opaque origin and otherwise they become part of whatever used them.

[04:05:28.0459] <freddy>
fixing this with more weirdness is also undesirable. meh! Only thing I could think of would be "disallow data URLs", but that's probably annoying for image-related use cases..

[04:06:27.0976] <freddy>
yeah and that policy makes sense for usages in images, but cloning a separate document into another is...unprecedented? :)

[04:07:38.0530] <annevk>
freddy: if CORS works here an attacker could also inject an HTTP URL, no?

[04:08:15.0157] <freddy>
You're right.. üòÆ

[04:09:34.0060] <annevk>
To be clear, I haven't tested any of this and it might well be that browsers have varying levels of support here. SVG is unfortunately rather unloved.

[08:00:52.0549] <Domenic>
Oooh this is nice https://github.com/servo/rust-url/issues/742

[08:12:51.0298] <crowlkats>
> <@domenicdenicola:matrix.org> Oooh this is nice https://github.com/servo/rust-url/issues/742

reminds me i gotta continue with that... want to definitively complete it before end of march


2022-02-26
[06:53:57.0526] <wayneca>
As some of you know, I am working on a list of tags and attributes going back to HTML 1.0. As I have been working on this it has occurred to me that I may be introducing some ambiguity that can lead to confusion to those whom read the list. It concerns attributes and when they first appear in a specification.

Lets use 'width' as the example. The width attribute first appears in HTML 1.0. As that specification didn't have global attributes (if you don't include %linkattributes), each element contains the definition for the attributes applied to it. The width attribute is applied to more than one element, so I have just been stating that the width attribute originates in the HTML 1.0 DTD. The same is true of each version up to 3.2. The 4,0 specification is the first to define global attributes, and width is not included among them. Neither is it included in the global attributes of the HTML 5 specification.

I know this is common knowledge, but it brings me to the point of this post. I will use the forms elements button and input as the example here. The attributes name, type and value are common to both elements in 4.0. However, the button element didn't exist in 2.0 or 3.2. So, should I say that the name, type and value attributes first appeared in 2.0 for the button element, or should I say that they first existed in 4.0 for the button element?

[06:55:05.0325] <wayneca>
 * As some of you know, I am working on a list of tags and attributes going back to HTML 1.0. As I have been working on this it has occurred to me that I may be introducing some ambiguity that can lead to confusion to those whom read the list. It concerns attributes and when they first appear in a specification.

Lets use 'width' as the example. The width attribute first appears in HTML 1.0. As that specification didn't have global attributes (if you don't include %linkattributes), each element contains the definition for the attributes applied to it. The width attribute is applied to more than one element, so I have just been stating that the width attribute originates in the HTML 1.0 DTD. The same is true of each version up to 3.2. The 4.0 specification is the first to define global attributes, and width is not included among them. Neither is it included in the global attributes of the HTML 5 specification.

I know this is common knowledge, but it brings me to the point of this post. I will use the forms elements button and input as the example here. The attributes name, type and value are common to both elements in 4.0. However, the button element didn't exist in 2.0 or 3.2. So, should I say that the name, type and value attributes first appeared in 2.0 for the button element, or should I say that they first existed in 4.0 for the button element?

[06:56:37.0900] <wayneca>
 * As some of you know, I am working on a list of tags and attributes going back to HTML 1.0. As I have been working on this it has occurred to me that I may be introducing some ambiguity that can lead to confusion to those who read the list. It concerns attributes and when they first appear in a specification.

Lets use 'width' as the example. The width attribute first appears in HTML 1.0. As that specification didn't have global attributes (if you don't include %linkattributes), each element contains the definition for the attributes applied to it. The width attribute is applied to more than one element, so I have just been stating that the width attribute originates in the HTML 1.0 DTD. The same is true of each version up to 3.2. The 4.0 specification is the first to define global attributes, and width is not included among them. Neither is it included in the global attributes of the HTML 5 specification.

I know this is common knowledge, but it brings me to the point of this post. I will use the forms elements button and input as the example here. The attributes name, type and value are common to both elements in 4.0. However, the button element didn't exist in 2.0 or 3.2. So, should I say that the name, type and value attributes first appeared in 2.0 for the button element, or should I say that they first existed in 4.0 for the button element?

[07:03:56.0466] <wayneca>
 * As some of you know, I am working on a list of tags and attributes going back to HTML 1.0. As I have been working on this it has occurred to me that I may be introducing some ambiguity that can lead to confusion to those who read the list. It concerns attributes and when they first appear in a specification.

Lets use 'width' as the example. The width attribute first appears in HTML 1.0. As that specification didn't have global attributes (if you don't include %linkattributes), each element contains the definition for the attributes applied to it. The width attribute is applied to more than one element, so I have just been stating that the width attribute originates in the HTML 1.0 DTD. The same is true of each version up to 3.2. The 4.0 specification is the first to define global attributes, and width is not included among them. Neither is it included in the global attributes of the HTML 5 specification.

I know this is common knowledge, but it brings me to the point of this post. I will use the forms elements button and input as the example here. The attributes name, type and value are common to both elements in 4.0. However, the button element didn't exist in 2.0 or 3.2. So, should I say that the name, type and value attributes first appeared in 2.0 for the button element, or should I say that they first existed in 4.0 for the button element?

Edit: Technically, name goes back to 1.0 as it was used in the named anchor (a) element (now replaced with the id attribute).

[08:52:50.0654] <Domenic>
I think this group really is against the concept of versioning HTML in general; especially based on spec versions instead of browser versions. So my answer, and probably the one you'll get from most of this group, is "this isn't the right question to ask, and by structuring your docs this way you'll be confusing readers".

[08:53:22.0984] <Domenic>
E.g. https://github.com/whatwg/html/blob/main/FAQ.md#will-future-browsers-have-any-idea-what-older-html-documents-mean

[11:05:06.0143] <wayneca>
I am only creating a history of tags and attributes. Since they are historically found in specifications for different versions there really isn't any other way to list them. If you look at the list you will see that it includes both valid and invalid tags and attributes, with valid being represented by bold text and invalid represented by strike text. The entire focus of this list is to hold in one place a quick reference for those who are looking to see if a particular tag or attribute is still valid, or just to see what tags and attributes have existed in the past and at present. This is the reason I want to know the best way to deal with attributes as they pertain to specific elements. I am not trying to introduce versioning into HTML5.

[11:05:33.0913] <wayneca>
 * I am only creating a history of tags and attributes. Since they are historically found in specifications for different versions there really isn't any other way to list them. If you look at the list you will see that it includes both valid and invalid tags and attributes, with valid being represented by bold text and invalid represented by strike text. The entire focus of this list is to hold in one place a quick reference for those who are looking to see if a particular tag or attribute is still valid, or just to see what tags and attributes have existed in the past and at present. This is the reason I want to know the best way to deal with attributes as they pertain to specific elements. I am not trying to introduce versioning into HTML5.

[11:07:20.0698] <wayneca>
Here is the list for any who are interested in seeing what I am talking about. I am still working on it. I am about to finish it, so I wanted to know before I call it completed. https://wayneca.neocities.org/WebDesign/TagList.html

[11:08:32.0940] <wayneca>
 * Here is the list for any who are interested in seeing what I am talking about. I am still working on it. I am about to finish it, so I wanted to know before I call it completed. https://wayneca.neocities.org/WebDesign/TagList.html

[11:46:09.0491] <Andreu Botella>
Why does `AbortSignal` have a set of abort algorithms, since it's also an `EventTarget`? Can't specs add listeners?

[12:17:14.0781] <emilio>
> <@abotella:igalia.com> Why does `AbortSignal` have a set of abort algorithms, since it's also an `EventTarget`? Can't specs add listeners?

Would the listener order be observable by the page? just a guess tho

[12:27:41.0193] <Domenic>
Some discussion at https://github.com/whatwg/dom/issues/493#issuecomment-322215183

[12:29:03.0801] <Domenic>
Also Anne is philosophically opposed to other specs adding listeners IIRC https://github.com/whatwg/dom/issues/878

[12:42:43.0925] <Andreu Botella>
That's fair, I guess


2022-02-27
[20:04:43.0788] <kaiido>
Hello,
I was wondering if there is a WebIDL tool available where we could throw some inputs against a particular definition and check how the passed arguments would be converted to WebIDL values.  
I saw [WebIDL2.js](https://github.com/w3c/webidl2.js), but as far as I can tell it only helps validate a definition, but it doesn't have a feature allowing to pass actual JS arguments to it and see which value they'd get converted to.  
I was wondering about such a tool because I am considering writing tests against a quite complex WebIDL which can accept an optional Union of unrestricted double, dictionary or a list of either or both. For reference [this](https://github.com/whatwg/html/pull/7659/files#diff-41cf6794ba4200b839c53531555f0f3998df4cbb01a4d5cb0b94e3ca5e23947dR61567) is the definition in question, particularly the *radii* argument. 
Only by reading the WebIDL specs I am not able to do this parsing by head, because I'm not good at WebIDL and  because as far as I understand, both unrestricted double and dictionary are quite open in what they do accept.  
For instance I'm not sure how a *radii* like `[]`, `[NaN]`, or `[undefined]` should be treated (¬´ NaN ¬ª or default dict?) or `[[10]]` (¬´ 10 ¬ª, or ¬´ default dict ¬ª, or default dict, or ¬´ NaN ¬ª?).  
So yeah, if there is a tool somewhere I could use to check all these that would be great, and if there isn't and it may be a good idea to request it somewhere I'd be glad to know where would be the best place: WebIDL repo, or maybe directly WebIDL2.js's one?
And if one of you could confirm how these particular inputs should be converted, that'd be awesome too :-D

[03:46:44.0339] <Kaiido>
 * Hello,
I was wondering if there is a WebIDL tool available where we could throw some inputs against a particular definition and check how the passed arguments would be converted to WebIDL values.

I saw [WebIDL2.js](https://github.com/w3c/webidl2.js), but as far as I can tell it only helps validate a definition, but it doesn't have a feature allowing to pass actual JS arguments to it and see which value they'd get converted to.

I would like such a tool because I am considering writing tests against a quite complex WebIDL which can accept an optional Union of unrestricted double, dictionary or a sequence of either or both. For reference [this](https://github.com/whatwg/html/pull/7659/files#diff-41cf6794ba4200b839c53531555f0f3998df4cbb01a4d5cb0b94e3ca5e23947dR61567) is the definition in question, particularly the _radii_ argument.
Only by reading the WebIDL specs I am not able to do this parsing by head, because I'm not good at WebIDL and  because as far as I understand, both unrestricted double and dictionary are quite open in what they do accept.

For instance I'm not sure how a _radii_ like `[]`, `[NaN]`, or `[undefined]` should be treated (¬´ NaN ¬ª or default dict?) or `[[10]]` (¬´ 10 ¬ª, or ¬´ default dict ¬ª, or default dict, or ¬´ NaN ¬ª?). And what about something like `arr = [10]; arr.x = 22; op(arr)`? (`x` is a member of the expected dictionary).

So yeah, if there is a tool somewhere I could use to check all these that would be great, and if there isn't and it may be a good idea to request it somewhere I'd be glad to know where would be the best place: WebIDL repo, or maybe directly WebIDL2.js's one?
And if one of you could confirm how these particular inputs should be converted, that'd be awesome too :-D

[11:55:10.0048] <Domenic>
Kaiido: We have a reasonably-complete implementation of this for jsdom, which you could probably make work. It is not optimized for this purpose, e.g. it takes as input files. But I think you could do it. https://www.npmjs.com/package/webidl2js

[11:56:28.0483] <Domenic>
The relevant part of the Web IDL spec is the mega-algorithm https://webidl.spec.whatwg.org/#es-overloads

[12:01:14.0758] <Domenic>
Despite the name, it also works in the non-overload case, and takes care of all the JS -> Web IDL/infra type conversions.

[12:01:49.0844] <Domenic>
Learning how to walk yourself through it might pay off, although I can certainly understand the desire to have a machine-generated walkthrough instead.

