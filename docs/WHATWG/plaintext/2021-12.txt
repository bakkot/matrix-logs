2021-12-01
[20:20:16.0746] <devsrealmguy>
Hi guys, is this room appropriate to ask questions regarding the HTML spec?

[20:21:42.0914] <devsrealmguy>
I'll ask for now, but feel free to delete it if it's not allowed, so here is my question:

[20:21:53.0439] <devsrealmguy>
* I'll ask for now, but feel free to delete it if it's not allowed, so here is my question:

[20:29:54.0931] <devsrealmguy>
In the HTML parsing section, specifically the "Named character reference state", we have the following info:

>>> Consume the maximum number of characters possible, where the consumed characters are one of the identifiers in the first column of the named character references table. Append each character to the temporary buffer when it's consumed.

>>[If there is a match]:

If the character reference was consumed as part of an attribute, and the last character matched is not a U+003B SEMICOLON character (;), and the next input character is either a U+003D EQUALS SIGN character (=) or an ASCII alphanumeric, then, for historical reasons, flush code points consumed as a character reference and switch to the return state.

>>[Otherwise:]

If the last character matched is not a U+003B SEMICOLON character (;), then this is a missing-semicolon-after-character-reference parse error.

Set the temporary buffer to the empty string. Append one or two characters corresponding to the character reference name (as given by the second column of the named character references table) to the temporary buffer.

Flush code points consumed as a character reference. Switch to the return state.

[20:33:50.0109] <devsrealmguy>
At what point do I decide to stop consuming? It's not clear , I know I can lookahead and stop matching when I encounter a semi-colon but the spec doesn't make that clear

[20:35:09.0154] <sideshowbarker>
devsrealmguy: I think you basically stop consuming when thereâ€™s no match

[20:35:20.0976] <sideshowbarker>
no substring match

[20:38:40.0369] <sideshowbarker>
so if you get `&h`, keep consuming, `&he`, keep consuming, `&hel`, `&hell`, `&helli`, still consuming

[20:39:28.0815] <sideshowbarker>
because those all are substring matches of valid character references

[20:40:07.0990] <sideshowbarker>
but if you hit `&helliq`, stop consuming â€” because that is not a substring match of any valid character reference

[20:41:01.0746] <devsrealmguy>
Thanks for replying, I appreciate it a lot. I am on mobile, so, it's really hard to write and my sight is really poor, so, sorry if I my grammar is wrong. 

And yes, that is exactly what I am doing, what if you have &not and &notin?

[20:44:06.0282] <devsrealmguy>
> but if you hit `&helliq`, stop consuming â€” because that is not a substring match of any valid character reference

Brilliant, I was looking to stop consuming when I encounter a semi-colon but you just nailed it.

[20:54:43.0723] <devsrealmguy>
Never mind with the &notit and &notin. Got it, thanks ðŸ˜Š

[23:29:26.0200] <Noam Rosenthal>
morning annevk, I think https://github.com/whatwg/fetch/pull/1311 is reviewable again, and I have two other pending ones (preload & controller), when you get the chance to look

