2024-01-02
[18:13:29.0992] <Maxim Vaarwel>
annevk: right, what is the next step? It's still doesn't touch the **custom element reactions stack**

[23:58:58.0165] <annevk>
Oh, I was confusing it with the queue. I think the stack is being used when for instance a custom element is being constructed and its constructor uses a thing with CEReactions.

[08:24:01.0762] <Dominic Farolino>
We often check for detached documents by checking if some relevant global object "is a Window" and that it's associated doc is fully active. Is there is an equivalent we need to do for workers/other globals?

[08:24:16.0682] <Dominic Farolino>
Can workers ever become "detached" or "inactive" in the same way that requires this checking?

[08:25:38.0952] <Dominic Farolino>
I'm writing a spec for an interface that is being introduced to Window and Workers, but I have a bunch of "relevant global object's active Document is fully active" checks. But that's obviously insufficient for Workers, so I'm trying to figure out if I need a similar check for those environments or not

[08:49:43.0094] <annevk>
Dominic Farolino: I think in theory a worker can be bfcache'd and then it'd prolly apply, but that's poorly defined

[10:09:42.0035] <Jeffrey Yasskin>
+1 that it would be lovely for org admins and moderators to be able to see an org-wide view of reported content. Then folks wouldn't need to know to forward spam to keithamus; they could just use Github's reporting API.

[10:09:54.0130] <Jeffrey Yasskin>
 * +1 that it would be lovely for org admins and moderators to be able to see an org-wide view of reported content. Then folks wouldn't need to know to forward spam to keithamus; they could just use Github's reporting UI.

[10:13:14.0220] <Jeffrey Yasskin>
Should Infra have any advice on how specs should use exceptions? https://infra.spec.whatwg.org/#algorithm-control-flow says algorithms can throw, and the exception will silently propagate up the stack, but I feel like it's a best practice to at least mention which algorithms can throw.

[11:28:07.0794] <Noam Rosenthal>
I want to propose allowing `blocking=render` on inline scripts, would that be a "new feature" or a "new issue"?

[12:56:14.0296] <zcorpan>
Noam Rosenthal: I guess up to you which template you want

[13:26:06.0425] <Noam Rosenthal>
> <@zcorpan:mozilla.org> Noam Rosenthal: I guess up to you which template you want

Hmm ok thanks.


2024-01-03
[16:43:46.0900] <Maxim Vaarwel>
annevk: well, you confirm my suggestions about API that decorated by CEReactions that can create an element and invoke constructor method with another API decorated by CEReations. Thanks.

[16:47:28.0939] <Maxim Vaarwel>
 * annevk: well, you confirm my suggestions about API that decorated by CEReactions that can create an element and invoke constructor method in the code of which calls another API decorated by CEReations. Thanks.

[22:18:47.0431] <Maxim Vaarwel>
 * annevk: well, you confirm my suggestions about API that decorated by CEReactions that can create an element and invoke constructor method in the code of which is called another API decorated by CEReations. Thanks.

[22:21:05.0573] <Maxim Vaarwel>
 * annevk: well, you confirm my suggestions about API that decorated by CEReactions that can create an element and invoke constructor method in the code of which is called an another API decorated by CEReations. Thanks.

[00:18:40.0742] <annevk>
Jeffrey Yasskin: I don't think WHATWG specs mention it. IDL doesn't either. It is typically mentioned in domintro boxes though. But we could change all of that I suppose.

[01:53:00.0559] <Noam Rosenthal>
> <@noamr:matrix.org> I want to propose allowing `blocking=render` on inline scripts, would that be a "new feature" or a "new issue"?

https://github.com/whatwg/html/issues/10034

[05:48:47.0001] <evilpie>
Is there something in HTML that would trim whitespace from nonce attributes? https://html.spec.whatwg.org/multipage/urls-and-fetching.html#nonce-does-not-update-dom doesn't at least, but I am not sure how attributes from the parser are handled.

[07:52:31.0439] <annevk>
evilpie: typically preserved

[10:00:20.0884] <Jeffrey Yasskin>
> <@annevk:matrix.org> Jeffrey Yasskin: I don't think WHATWG specs mention it. IDL doesn't either. It is typically mentioned in domintro boxes though. But we could change all of that I suppose.

I don't want to change what experienced spec authors are doing, just try to document it better, if there is actually a pattern to document. My impression was that WHATWG specs usually return "failure" from algorithm steps and then only convert that to an exception when implementing a WebIDL operation. For example, https://url.spec.whatwg.org/#dom-url-url converts failure to an exception in the URL constructor, and https://fetch.spec.whatwg.org/#dom-global-fetch does the same conversion from network error to rejection. Some of the helper algorithms for WebIDL operations do throw without mentioning it in their interfaces, but the deeper layers seem to prefer returns. 

[11:44:35.0109] <Noam Rosenthal>
> <@jyasskin:matrix.org> I don't want to change what experienced spec authors are doing, just try to document it better, if there is actually a pattern to document. My impression was that WHATWG specs usually return "failure" from algorithm steps and then only convert that to an exception when implementing a WebIDL operation. For example, https://url.spec.whatwg.org/#dom-url-url converts failure to an exception in the URL constructor, and https://fetch.spec.whatwg.org/#dom-global-fetch does the same conversion from network error to rejection. Some of the helper algorithms for WebIDL operations do throw without mentioning it in their interfaces, but the deeper layers seem to prefer returns.

This usually makes sense to me because "throwing" means that there's some catching semantic, and that's not guaranteed when you're in an internal operation (e.g. it could be an `in parallel` operation)

[11:54:14.0704] <bakkot>
does anyone know why getRandomValues has a size limit? I poked around the git history and mailing lists but couldn't find it offhand

[13:53:23.0892] <annevk>
Jeffrey Yasskin: I think that's right. Just like you would (might?) return std::nullopt in C++ over an exception.

[13:59:13.0895] <annevk>
bakkot: I found it predates git but not super motivated to dig into the CVS history

[13:59:35.0206] <annevk>
bakkot: emailing Ryan Sleevi or dm'ing him somewhere might work

[15:09:14.0583] <zcorpan>
> <@evilpie:mozilla.org> Is there something in HTML that would trim whitespace from nonce attributes? https://html.spec.whatwg.org/multipage/urls-and-fetching.html#nonce-does-not-update-dom doesn't at least, but I am not sure how attributes from the parser are handled.

"becomes browsing-context connected" also applies for parser-inserted elements. The parser doesn't trim whitespace for nonce attributes, nor anything else in the spec AFAICT.

[15:31:58.0616] <bakkot>
annevk: if you know where the CVS history is I am happy to dig into it


2024-01-04
[17:02:40.0608] <TabAtkins>
Hm, there's no list of reflected attributes, is there?

[17:02:49.0339] <TabAtkins>
(Trying to find examples of attributes that aren't reflected.)

[17:04:17.0827] <Domenic>
There should be 0 such attributes, although maybe one slipped in around... Shadow parts, IIRC? Because rniwa hated DOMTokenList or something like that, so we just gave up on getting consensus for how to reflect it?

[17:41:32.0462] <Ù…Ø­Ø³Ù† Ú©Ù…Ø§Ù„ÛŒ>
Ø³

[18:25:34.0051] <Ù…Ø­Ø³Ù† Ú©Ù…Ø§Ù„ÛŒ>
Ø³

[23:00:22.0834] <annevk>
Shadow parts is also not properly standardized still maybe? At least the DOM aspects are not in HTML or DOM as they ought to be.

[00:14:49.0183] <Noam Rosenthal>
Is there a standard way to say â€œperform this operation after this promise resolves *including all its reactions* or itâ€™s a matter of adding a microtask checkpoint?

[00:25:49.0705] <annevk>
sideshowbarker: do you know if the old CVS history for specifications can still be found somewhere?

[00:31:56.0070] <sideshowbarker>
annevk: For W3C specs, I think no â€” not any longer. Not the original CVS history itself at least. because since CVS is a client-server thing, W3C would need have the CVS server running â€”Â or at least have the filesystem thing that CVS served from still saved.

[00:34:27.0257] <sideshowbarker>
Well, with the exception of anything that we served from www.w3.org or w3.org URLs â€” that all still exists in CVS. (And is still being added to â€” W3C is still using CVS to maintain large parts of w3.org content, and till adding to it via CVS.)

[00:35:45.0529] <annevk>
Does anyone still have a copy that they could stuff in a git repository somehow?

[00:36:12.0075] <sideshowbarker>
It depends on which spec

[00:36:35.0181] <sideshowbarker>
If it were served from dev.w3.org org, then yeah I think we could manage to find copies.

[00:36:50.0138] <annevk>
Web Crypto came up above.

[00:37:45.0171] <sideshowbarker>
OK

[00:37:54.0260] <sideshowbarker>
I will do some digging

[00:38:20.0899] <sideshowbarker>
Given that for dev.w3.org at least, I think you remember that in the pre-github days, we (in many cases, me) migrated all of dvcs.w3.org content to Mercurial. So that still may exist somewhere â€” at least in local clones (maybe some things even on my own laptop).

[00:39:00.0744] <annevk>
sideshowbarker: the Mercurial copy I found suggests there's more history in CVS; they started anew

[00:39:18.0325] <annevk>
sideshowbarker: https://dvcs.w3.org/hg/webcrypto-api/summary

[00:41:12.0464] <sideshowbarker>
/me looks

[00:42:22.0205] <sideshowbarker>
well thatâ€™s unfortunate

[00:44:53.0635] <annevk>
Oh wow, I found something by going through the W3C lists

[00:45:15.0744] <annevk>
It involves Ms2ger (back in 2024 W2)

[00:45:18.0263] <annevk>
https://wiki.whatwg.org/index.php?title=Crypto&action=history

[00:45:20.0876] <sideshowbarker>
Yeah, I was just now typing this: I vaguely recall that we might have once had a mailing list set up, to which all dvcs.w3.org commit messages were archived (even i n CVS ldays)

[00:46:30.0216] <annevk>
And https://bugzilla.mozilla.org/show_bug.cgi?id=440046#c43 has the answer bakkot was looking for

[00:46:44.0043] <sideshowbarker>
excellent

[00:46:47.0054] <annevk>
UI responsiveness is the reason for the limit in Web Crypto

[00:56:32.0000] <sideshowbarker>
hmm but was that browser-UI-responsiveness problem only an issue for Firefox in the years before multi-process?

[00:57:07.0589] <sideshowbarker>
that is, is it actually still relevant at all any longer?

[00:58:03.0103] <sideshowbarker>
â€¦though I guess it might be a moot question, if browser projects are interested in going back and touching that part of the existing web-crypto code

[00:58:11.0346] <annevk>
Blocking the main thread is still a concern.

[00:58:12.0065] <sideshowbarker>
 * â€¦though I guess it might be a moot question, if browser projects are not interested in going back and touching that part of the existing web-crypto code

[00:58:17.0652] <sideshowbarker>
ah OK

[00:59:18.0168] <annevk>
But yeah, bit unclear if that's a good enough reason to have a limit as there's a lot of ways to block it.

[07:11:29.0406] <bakkot>
aha! thanks much annevk 

[08:28:38.0771] <Dominic Farolino>
Should APIs that take in a Promise and an AbortSignal reject the promise when the signal is aborted?

[08:28:49.0816] <Dominic Farolino>
I think that's consistent with https://w3ctag.github.io/promises-guide/#rejections-should-be-exceptional:~:text=When%20it%20will%20be%20impossible%20to%20complete%20the%20requested%20task, but want to make sure my judgement on that is right.

[08:29:39.0370] <Dominic Farolino>
 * Should APIs that take in an AbortSignal and return a Promise, reject the promise when the signal is aborted?

[08:53:28.0123] <Jeffrey Yasskin>
> <@domfarolino:matrix.org> Should APIs that take in an AbortSignal and return a Promise, reject the promise when the signal is aborted?

https://dom.spec.whatwg.org/#abortcontroller-api-integration says yes.


2024-01-06
[22:11:20.0480] <knowler>
Has there been any discussion around non-CSS custom cursors (i.e. an element that follows the mouse coords) and top-layer? top-layer effectively breaks all existing solutions.

Iâ€™ve been able to abuse a manual popover to keep the cursor on top (https://codepen.io/knowler/pen/PoLNNKB), but thatâ€™s not perfect since thereâ€™s no reliable way of knowing when something new becomes the topmost top-layer.

I will admit that non-CSS custom cursors arenâ€™t great, but itâ€™s not uncommon. Seems like maybe a document author use-case for the `overlay` property or maybe something CSS needs to allow better customization around (specifically in regard to animation which is generally why people implement custom cursors this way).

[23:36:49.0788] <annevk>
knowler: I think a write-up on https://github.com/w3c/csswg-drafts/issues/new explaining why CSS custom cursors exist and how they're running into issues due to the top layer would be helpful. Keep https://whatwg.org/faq#adding-new-features in mind, in particular 1.


2024-01-08
[01:33:37.0753] <Ms2ger (back in 2024 W2)>
> <@annevk:matrix.org> It involves Ms2ger (back in 2024 W2)

I deny everything

[04:03:03.0433] <chargeitall>
I'm quoting from this source: https://infra.spec.whatwg.org/#implementation-defined "Features that are defined in documents using the Infra Standard that can be used as a tracking vector are marked as this paragraph is". This sentence is unclear to me: "are marked as this paragraph is". Can you explain what it means?

[04:21:26.0462] <annevk>
chargeitall: it's referencing the fingerprint icon, maybe we should make that more explicit

[04:26:17.0200] <chargeitall>
I appreciate your clarification. I was puzzled by the presence of this fingerprint, but I did not see how it related to this phrase since the fingerprint was far from the text.

[08:19:31.0840] <ljharb>
using only icons and not also text isn't accessible anyways, that should probably be improved

[08:38:32.0305] <chargeitall>
https://infra.spec.whatwg.org/#algorithm-declaration 
"Declare algorithms by stating their name, parameters, and return type, in the following form:
To **[algorithm name]**, given a [type1] _[parameter1]_, a [type2] _[parameter2]_, â€¦,perform the following steps. They return a [return type]."

Q1. Is it better to add parameter type? e.g. "Declare algorithms by stating their name, parameter type, parameters, and return type, in the following form:"
Q2. why  _[parameter1]_ is in italic?



[08:40:27.0400] <chargeitall>
 * I appreciate your clarification. I was puzzled by the presence of this fingerprint. I did not see how it related to this phrase since the fingerprint was far from the text.

[08:40:34.0062] <annevk>
There's no alt attribute?

[08:40:39.0979] <chargeitall>
 * I appreciate your clarification. I was puzzled by the presence of this fingerprint. I did not see how it related to this phrase since the fingerprint icon was far from the text.

[08:41:42.0187] <ljharb>
i'm sure there is but i shouldnt have to hover to see what something means, ideally

[08:43:17.0037] <chargeitall>
The word "fingerprint" was missing in the paragraph as opposed to Features that are defined in documents using the Infra Standard that can be used as a tracking vector are marked with a fingerprint icon as this paragraph is

[08:43:28.0443] <chargeitall>
 * The word "fingerprint" was missing in the paragraph as opposed to F
> eatures that are defined in documents using the Infra Standard that can be used as a tracking vector are marked with a fingerprint icon as this paragraph is


[08:43:45.0779] <chargeitall>
 * The word "fingerprint" was missing in the paragraph as opposed to 
> Features that are defined in documents using the Infra Standard that can be used as a tracking vector are marked with a fingerprint icon as this paragraph is


[08:46:06.0233] <chargeitall>
 * https://infra.spec.whatwg.org/#algorithm-declaration
"Declare algorithms by stating their name, parameters, and return type, in the following form:
To **\[algorithm name\]**, given a \[type1\] _\[parameter1\]_, a \[type2\] _\[parameter2\]_, â€¦,perform the following steps. They return a \[return type\]."

Q1. Is it better to add parameter type? e.g. "Declare algorithms by stating their name, ****parameter typ**e,** parameters, and return type, in the following form:"
Q2. why  _\[parameter1\]_ is in italic?

[08:46:26.0531] <chargeitall>
 * https://infra.spec.whatwg.org/#algorithm-declaration
"Declare algorithms by stating their name, parameters, and return type, in the following form:
To **\[algorithm name\]**, given a \[type1\] _\[parameter1\]_, a \[type2\] _\[parameter2\]_, â€¦,perform the following steps. They return a \[return type\]."

Q1. Is it better to add parameter type? e.g. "Declare algorithms by stating their name, **parameter type**, parameters, and return type, in the following form:"
Q2. why  _\[parameter1\]_ is in italic?

[08:46:55.0429] <chargeitall>
 * The word "fingerprint" was missing in the paragraph as opposed to

> Features that are defined in documents using the Infra Standard that can be used as a tracking vector are marked **with a fingerprint icon** as this paragraph is

[08:49:13.0882] <Ms2ger (back in 2024 W2)>
Variables are conventionally rendered in italic

[08:53:41.0951] <chargeitall>
 * https://infra.spec.whatwg.org/#algorithm-declaration
"Declare algorithms by stating their name, parameters, and return type, in the following form:
To **\[algorithm name\]**, given a \[type1\] _\[parameter1\]_, a \[type2\] _\[parameter2\]_, â€¦,perform the following steps. They return a \[return type\]."

**Q1**. Is it better to add parameter type? e.g. "Declare algorithms by stating their name, parameter type, parameters, and return type, in the following form:"
**Q2**. why  _\[parameter1\]_ is in italic?

[08:54:43.0438] <chargeitall>
this information qualifies to a concept used by multiple standards without a good home. would it make sense to add it to the infra?

[08:55:45.0991] <chargeitall>
 * https://infra.spec.whatwg.org/#algorithm-declaration
"Declare algorithms by stating their name, parameters, and return type, in the following form:
To **\[algorithm name\]**, given a \[type1\] _\[parameter1\]_, a \[type2\] _\[parameter2\]_, â€¦,perform the following steps. They return a \[return type\]."

**Q1**. Is it better to add parameter type? e.g. "Declare algorithms by stating their name, **parameter type**, parameters, and return type, in the following form:"
**Q2**. why  _\[parameter1\]_ is in italic?

[08:56:14.0291] <chargeitall>
 * your clarification qualifies to a concept used by multiple standards without a good home. would it make sense to add it to the infra standard?


2024-01-09
[20:23:09.0936] <Domenic>
annevk: post-holiday ping on https://github.com/whatwg/html/pull/10005

[02:02:58.0393] <annevk>
PSA: If you see a spam PR or issue, please label it with `invalid`. That's a label recognized by GitHub's tooling and I'm in the process of adding it to all the repositories of WHATWG standards.

[06:29:12.0878] <chargeitall>
why default is written twice?

[06:52:06.0083] <zcorpan>
"default value" is a placeholder

[06:53:38.0374] <chargeitall>
why it is not written with italic like the parameter placeholder ?

[06:56:24.0915] <zcorpan>
"parameter" is a placeholder for a variable name. See the example below.

[07:07:41.0412] <chargeitall>
the example below is for an algorithm parameter not a variable parameter. A variable is declared with "let" and changed with "set"

[07:30:44.0755] <chargeitall>
..., be a new list.
..., be null.
..., is a string.
after verb to be there is no italic except for
..., be _target_
why?

[07:31:22.0161] <chargeitall>
 * ..., be a **new list**.
..., be **null**.
..., is a **string**.
after verb to be there is no italic except for
..., be **_target_**
why?

[07:32:31.0606] <chargeitall>
 * ..., be a **new list**.
..., be **null**.
..., is a **string**.
..., is  **true**.
after verb to be there is no italic except for
..., be **_target_**
why?

[07:44:23.0086] <annevk>
Because target is a variable and the others are not?

[07:45:00.0926] <annevk>
Although it seems there's a bug there as the second instance of target doesn't have italics.

[07:47:56.0082] <chargeitall>
yes. 

[07:51:35.0124] <chargeitall>
To clarify, you are uncertain whether to use italics for the second instance of target?

[07:52:51.0739] <annevk>
I'm not, it should be italics.

[07:53:36.0977] <chargeitall>
okay

[08:00:26.0285] <chargeitall>
Do you create issue for each bug you encounter?

[08:09:20.0182] <annevk>
It's fine to create a PR directly, just make sure you can sign the agreement.

[08:13:01.0575] <zcorpan>
OK yes, but does the example make it clearer why one of them is italic?

[08:14:27.0635] <chargeitall>
I have never done this. I need to google it first


2024-01-10
[19:44:55.0068] <Domenic>
Dark mode styles are being deployed. Seems that on non-HTML, this is causing us to get W3C colors temporarily. Hopefully this will stop once the bikeshed-boilerplate stuff propagates through the ecosystem?

[20:28:25.0802] <Domenic>
Yeah, not clear how often api.csswg.org gets updated, but until it gets the latest `bikeshed update`, we have W3C colors on all WHATWG specs :(

[20:30:33.0186] <Domenic>
If we want to resurrect https://github.com/whatwg/spec-factory/pull/42 and https://github.com/whatwg/whatwg.org/pull/404/ we could fix I guess

[23:50:24.0698] <Kaiido>
Looks like https://resources.whatwg.org/standard.css uses a few hard-coded colors that don't really match with the dark-mode? The ones I spotted are `.element` (which is particularly outstanding), and the top links of the full page `#head nav > div > a[...]`. There a few others but they seem less problematic (like `figure.diagrams`).

[01:50:29.0619] <Domenic>
> <@kaiido:matrix.org> Looks like https://resources.whatwg.org/standard.css uses a few hard-coded colors that don't really match with the dark-mode? The ones I spotted are `.element` (which is particularly outstanding), and the top links of the full page `#head nav > div > a[...]`. There a few others but they seem less problematic (like `figure.diagrams`).

Fixes would definitely be appreciated! Yeah, I noticed .element... some of these are HTML-specific and maybe should be moved to HTML's stylesheet, hmm.

[01:57:50.0635] <Domenic>
TabAtkins: sorry to ping while you're on vacation, but any idea how often the CSSWG API server runs `bikeshed update` to pull in new boilerplates?

[02:00:15.0279] <annevk>
I thought that was instant. But you might have to trigger builds for each standard?

[02:00:21.0251] <Domenic>
No, it's not instant

[02:00:29.0125] <Domenic>
It may pull in new bikeshed releases, but it doesn't do bikeshed update

[02:00:53.0348] <Domenic>
We will *also* need to trigger new builds, but only after the CSSWG API updates

[02:01:20.0645] <Domenic>
(You can test this by running `make remote` locally on any spec; you get one with the wrong boilerplate. Whereas if you run `bikeshed update; make local`, you get the right boilerplate.)

[02:01:22.0823] <annevk>
I think the problem is that Tab didn't generate new manifest files

[02:01:29.0232] <Domenic>
That's done automatically

[02:01:30.0669] <annevk>
Maybe I can fix that

[02:01:34.0039] <annevk>
No it's not

[02:01:48.0046] <annevk>
See commit history: https://github.com/speced/bikeshed-boilerplate/commits

[02:01:51.0790] <Domenic>
https://github.com/speced/bikeshed-data/commit/9cab061e5d6c9cfffd1771698848379acfad5367

[02:02:21.0688] <Domenic>
Hmm I wonder what the difference between the two manifest.txt files is

[02:05:34.0555] <annevk>
The script fails for me with a syntax error...

[02:05:49.0894] <Domenic>
Python 2 vs. 3? Or 3.11 vs. 3.12 or something maybe

[02:07:19.0773] <annevk>
Bingo, okay, I'll push an updated manifest

[02:11:25.0642] <annevk>
Though I guess it shouldn't matter since bikeshed-data indeed appears to be source of truth. Hmm.

[02:53:55.0383] <Kaiido>
Sorry, I doubt I am the right person for fixing color schemes...

[05:02:56.0056] <TabAtkins>
Bikeshed-data polls bikeshed-boilerplate as part of its update 

[05:03:59.0453] <TabAtkins>
Ah and sorry, you merged the thing that needed coordination while I wasn't around ðŸ˜ƒ

[07:01:21.0997] <annevk>
TabAtkins: I suspect Domenic might be afk for a while, but let me know if there's anything remaining I could help with

[07:01:53.0033] <TabAtkins>
I'm still not technically around into next Monday but if something needs poking I can fix

[07:03:10.0638] <annevk>
TabAtkins: I think Domenic was saying that it appears as if api.csswg.org isn't updated

[07:03:30.0836] <annevk>
TabAtkins: and that's why various specifications are now W3C blue instead of WHATWG green

[07:03:43.0534] <TabAtkins>
:(

[07:06:28.0897] <Ms2ger (back in 2024 W2)>
If there's one thing bikeshed should do well, it's painting in the right colour

[07:18:47.0099] <TabAtkins>
Looks like things are good now, I just did a `make remote` and got whatwg colors

[07:19:04.0495] <TabAtkins>
So it's just a matter of pinging things to rebuild

