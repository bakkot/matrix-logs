2023-04-01
[17:51:45.0367] <Domenic>
> <@aliaksandr.kalenik:matrix.org> hey, I am going through Navigables spec and got a bit confused by HTML document loading step: https://html.spec.whatwg.org/multipage/document-lifecycle.html#navigate-html which is 11.1 step in "Populating a session history entry".
> 
> I found https://github.com/whatwg/html/issues/8095#issue-1300437093 and see that the problem appears to be that Fetch callbacks got introduced but this part of spec hasn't been updated yet.
> 
> I'm curious if anyone can give a hint of how document loading might look with relevant Fetch spec taken into account. I have vague idea that processResponseEndOfBody should be specified to do something about firing "load" event (which is also confusing because document does not exist on the step that does fetch call so callback cannot capture it). And I am wondering on what step and using what mechanism response body should be piped into HTML parser.

My take last time I looked at this is that we'd use processResponse, incrementally read from the stream to feed it into the parser (replacing step 2), and when there's nothing more in the stream, do the end of step 2. It's not immediately clear how to fit this into an algorithm which currently does a synchronous return of _document_.

[17:53:34.0303] <Domenic>
Also it's not immediately clear how to fit this with the existing use of processResponse in https://html.spec.whatwg.org/multipage/browsing-the-web.html#create-navigation-params-by-fetching . But these problems are mostly about how to restructure the algorithms, ideally without making them even harder to read than they currently are.

[17:54:30.0118] <Domenic>
Hmm I guess maybe we just wouldn't use procesResponse in #navigate-html. We just use processResponse to save it into the navigation params, and then we can incrementally read it later. So that isn't a big deal.

[18:07:49.0140] <Alexander Kalenik>
> <@domenicdenicola:matrix.org> Hmm I guess maybe we just wouldn't use procesResponse in #navigate-html. We just use processResponse to save it into the navigation params, and then we can incrementally read it later. So that isn't a big deal.

thank you for having a look! yeah, reading in #navigate-html response saved in navigation params earlier in #create-navigation-params-by-fetching by procesResponse is the way I went for now.

[13:54:47.0307] <snek>
> <@annevk:matrix.org> snek: some stuff can take a long time for sure, but it's better to have it recorded than not recorded

i don't care about the time. the issue is the power dynamic. i really wish this standards body would reconsider how people who do not happen to be employed by apple or mozilla or google can actually drive improvements forward of their own volition.


2023-04-02
[17:44:25.0628] <Domenic>
snek: how do you anticipate this being done, if none of the browsers are interested in your change? Put stuff in standards which no browsers ship?

[17:45:44.0021] <Domenic>
Ultimately, we are writing standards about what those browsers ship. If we're not doing that, there's no point. Participation here is open and welcome (unlike other SDOs, no paying needed!) but yes, if you don't get your change agreed to be shipped by those organizations, you can't accomplish much.

[17:46:02.0820] <snek>
i've never had to beg browsers to want to implement my thing at tc39

[17:46:16.0698] <snek>
maybe take a look at their process

[17:46:59.0777] <Domenic>
Yes, you have. They've decided to agree, because language teams are generally sitting around looking for things to do, in my experience. (Sometimes they start whole new languages just to have something to do!)

[17:47:47.0989] <Domenic>
If they thought your thing was not worth their engineering time, they would object. That's how it works at the WHATWG too, it's just that instead of making someone stand up and say "I object", we require the proposer to get their affirmative consent

[17:48:14.0403] <snek>
whatever the case

[17:48:25.0878] <snek>
even walking to the browsers with spec, tests, and implementation work

[17:48:28.0837] <snek>
is not enough for whatwg

[17:48:40.0274] <snek>
i doubt there is a simple solution but

[17:48:47.0864] <snek>
the current process is insurmountable 

[17:48:50.0877] <Domenic>
Yep, it looks like you've had some browsers object to your feature. I'm sorry, but that happens, no matter the SDO.

[17:49:13.0643] <Domenic>
Many people surmount this; many features are shipped every release, including from non-employees. I'm sorry you had a bad experience once, but it's not representative.

[17:49:45.0086] <snek>
i mean there is a way it could get done

[17:49:49.0228] <snek>
i'm just not willing to do it

[17:50:08.0601] <snek>
its humiliating to have to crawl to some guys feet and ask him to pretty please consider my feature

[17:50:42.0020] <Domenic>
I guess at this point you're just being melodramatic, so this isn't a very productive conversation. I'll move on.

[17:51:07.0399] <snek>
lol

[18:43:47.0432] <Shane Brown>
Has my husband Shane brown been on here 

[23:02:15.0110] <annevk>
Is this about the WebSockets enhancement? I tend to agree I haven't seen a lot of ask for supporting non-ws(s) schemes there from web developers.

[23:07:21.0734] <annevk>
Hmm, apparently html5lib-tests doesn't discover change in attribute qualified name

[23:59:45.0843] <annevk>
And also, at least some html5lib test runners end up sorting attributes

[12:41:08.0468] <hacknorris>
someone knows why neither on chrome neither firefox this doesnt display like on your docs? 
```
<input type="range" name="a" list="a-values">
<datalist id="a-values">
<option value="10" label="Low">
<option value="90" label="High">
</datalist>
```

[12:41:42.0365] <hacknorris>
like from this part :https://html.spec.whatwg.org/multipage/input.html#range-state-(type=range) 

[12:42:16.0968] <hacknorris>
 * someone knows why neither on chrome (at me chromium tbh) neither firefox this doesnt display like on your docs?

```
<input type="range" name="a" list="a-values">
<datalist id="a-values">
<option value="10" label="Low">
<option value="90" label="High">
</datalist>
```

[12:51:06.0033] <hacknorris>
any1 why ?

[12:51:57.0059] <Andreu Botella>
those sections are notes, and they only give a suggested possible rendering

[12:52:35.0425] <hacknorris>
but 2 most popular browsers just ignore it ?

[12:52:42.0553] <hacknorris>
 * but why 2 most popular browsers just ignore it ?

[12:53:11.0182] <hacknorris>
(tbh - wanted to make similar to avoid hoards of css with content things and more js than needed..)

[12:54:19.0709] <evilpie>
at least you get tick marks in all Firefox and Chrome nowadays

[12:54:35.0046] <hacknorris>
in firfox i dont get, only chorme

[12:54:42.0362] <hacknorris>
 * in firefox i dont get, only chrome

[12:54:44.0365] <evilpie>
you are using some old version

[12:54:49.0474] <hacknorris>
nop

[12:54:51.0099] <hacknorris>
 * nope

[12:54:54.0927] <hacknorris>
moment

[12:56:59.0303] <evilpie>
 * at least you get tick marks in Firefox and Chrome nowadays

[12:57:47.0373] <hacknorris>
user agent of firfox : Mozilla/5.0 (X11; Linux x86_64; rv:102.0) Gecko/20100101 Firefox/102.0

[12:57:54.0069] <hacknorris>
 * user agent of firefox : Mozilla/5.0 (X11; Linux x86\_64; rv:102.0) Gecko/20100101 Firefox/102.0

[12:58:05.0313] <hacknorris>
(taken quickly from console ;p)

[12:58:07.0897] <evilpie>
you need at least 109

[12:58:22.0617] <hacknorris>
ok, now i have hoards of reinstalls ðŸ˜•

[12:59:35.0534] <hacknorris>
slackware moment

[12:59:47.0004] <hacknorris>
 * lfs/slackware moment

[12:59:53.0022] <hacknorris>
 * /spoiler lfs/slackware moment


2023-04-03
[14:59:44.0084] <canadahonk>
hey all, just wondering why sometimes maplike isn't used for some webidl interfaces even though they are called `...Map` and links to the ordered map? (specifically https://drafts.css-houdini.org/css-typed-om/#the-stylepropertymap)

[15:25:57.0145] <canadahonk>
looks like it is because it's a multimap: https://github.com/w3c/css-houdini-drafts/issues/139


2023-04-04
[20:28:16.0016] <èŽ«è¨€>
Hello everyone, I have a problem, in HTML

```
// this is ok 
document.body.onscroll = (e) => {console.log('xxx', e)} 
 // this is not working
document.body.addEventListener('scroll', (e) => { console.log(e)})
```


[03:26:15.0568] <Jake Archibald>
> <@jhoneybee:matrix.org> Hello everyone, I have a problem, in HTML
> 
> ```
> // this is ok 
> document.body.onscroll = (e) => {console.log('xxx', e)} 
>  // this is not working
> document.body.addEventListener('scroll', (e) => { console.log(e)})
> ```

You want to put the listener on the `Window`, not the body. https://jsbin.com/pitoqeg/edit?js,console,output

[04:24:07.0274] <annevk>
hsivonen: smaug: didn't you both ask me about https://github.com/web-platform-tests/wpt/pull/38199? Would be nice if it got reviewed

[05:32:31.0152] <hsivonen>
> <@annevk:matrix.org> hsivonen: smaug: didn't you both ask me about https://github.com/web-platform-tests/wpt/pull/38199? Would be nice if it got reviewed

Approved. Thanks.

[05:58:28.0471] <roman harsveld>
i like to learn to build my own websites but have no have no idea where I can learn html 

[05:59:10.0474] <roman harsveld>
i try html standard for learn 


2023-04-05
[17:39:22.0737] <bakkot>
streams question:

```
(async () => {
  let stream = new ReadableStream(
    {
      start(controller) {
          controller.enqueue(Promise.resolve(0)); // NOTE: enqueuing a promise
          controller.close();
      },
    },
  );
  for await (let item of stream) {
    console.log({ item });
  }
})();
```

(Streams are async iterable as of https://github.com/whatwg/streams/pull/980, though only FF has implemented as far as I know.)

Here, should the `console.log` be of `0` or of a Promise for `0`? If I'm reading the various specs right, it should be a Promise. FF has it as an actual 0. The original conversation about async iterators which yield promises (in the iterator result object) decided that it should be considered a contract violation to do so - see slide 27 of https://docs.google.com/presentation/d/1U6PivKbFO0YgoFlrYB82MtXf1ofCp1xSVOODOvranBM/edit#slide=id.g223fba4116_0_196

this is really an edge case, so maybe the "contract violation" is fine? it's not like the language enforces that contract. but if the intent is that it should be a Promise for 0, that probably warrants a WPT

[17:58:27.0638] <Alexander Kalenik>
a document loading question:

https://html.spec.whatwg.org/multipage/document-lifecycle.html#read-ua-inline
step 3 assumes there is "response" from which URL can be obtained but "response" is not listed in the parameters.
step 4 initialize navigationParams params with newly created response but step 5 that creates document using these navigationParams seems to assume that response always has non-empty URL.

am I missing something or there is a bug that "Loading a document for inline content that doesn't have a DOM" should accept url?

