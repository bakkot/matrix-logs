<!DOCTYPE html><html><head>
  <title>WHATWG on 2024-09-03</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "WHATWG";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2024-09-03<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2024-09-02" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Mon Sep 02 2024 23:33:33 GMT-0700 (Pacific Daylight Time)">06:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@fbraun:mozilla.org">freddy</span>&gt;</div></td><td class="msg-cell">Very slightly related to import maps. I talked to someone about Subresource Integrity and they complained that <code>&lt;script src=.. integrity..&gt;</code> has no declarative fallback to a canonical/fallback URL if the <code>src</code> resource doesn't match. E.g., point to CDN for speed but fallback to same-origin resource for robustness. I recall that we cut <code>fallbacksrc</code> (name TBD) out of SRI v1 for a couple of reason. The main one I remember is that I was too cautious to break assumptions w/ HTML/XSS sanitizers and other security libraries. Essentially not allowing a "new" XSS vector like <code>&lt;script src=x integrity=x fallbacksrc=xssurl&gt;</code>.</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Mon Sep 02 2024 23:34:49 GMT-0700 (Pacific Daylight Time)">06:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@fbraun:mozilla.org">freddy</span>&gt;</div></td><td class="msg-cell">I wonder if fallback-URLs would be an interesting thing to consider for import maps, as their syntax is not in HTML and less likely to break assumptions (because most libraries will block/remove inline <code>&lt;script&gt;</code>, likely including those of type import maps)</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Sep 03 2024 04:20:14 GMT-0700 (Pacific Daylight Time)">11:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@yoavweiss:matrix.org">Yoav Weiss</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">freddy</span>: I guess that could fit into importmaps somehow, but would only work for modules. At the same time, I'm not sure the use case is worth the complexity. Is this a real issue people are trying to solve for? Can they do that with e.g. onerror handlers that rewrite the <code>src</code>?</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue Sep 03 2024 04:20:37 GMT-0700 (Pacific Daylight Time)">11:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@fbraun:mozilla.org">freddy</span>&gt;</div></td><td class="msg-cell">they <em>can</em> solve it with onerror handlers, but it requires more script</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Tue Sep 03 2024 04:20:55 GMT-0700 (Pacific Daylight Time)">11:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@fbraun:mozilla.org">freddy</span>&gt;</div></td><td class="msg-cell">(script that needs to load first. stuff you originally set out to put on a CDN)</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Tue Sep 03 2024 04:35:37 GMT-0700 (Pacific Daylight Time)">11:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@yoavweiss:matrix.org">Yoav Weiss</span>&gt;</div></td><td class="msg-cell">(beyond that, I don't see the onerror event firing.. <a href="https://iron-organic-rainstorm.glitch.me/">https://iron-organic-rainstorm.glitch.me/</a>)</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Tue Sep 03 2024 05:08:23 GMT-0700 (Pacific Daylight Time)">12:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@fbraun:mozilla.org">freddy</span>&gt;</div></td><td class="msg-cell">huh..</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Tue Sep 03 2024 05:29:05 GMT-0700 (Pacific Daylight Time)">12:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Yoav Weiss</span>: I think it should, step 4 in <a href="https://html.spec.whatwg.org/#execute-the-script-element">https://html.spec.whatwg.org/#execute-the-script-element</a> , called from <a href="https://html.spec.whatwg.org/#script-processing-model:execute-the-script-element-3">https://html.spec.whatwg.org/#script-processing-model:execute-the-script-element-3</a></td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Tue Sep 03 2024 05:30:13 GMT-0700 (Pacific Daylight Time)">12:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell">(or maybe not called from there, since it's parser inserted)</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Tue Sep 03 2024 05:31:44 GMT-0700 (Pacific Daylight Time)">12:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell">#parsing-main-incdata:execute-the-script-element</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Tue Sep 03 2024 05:36:34 GMT-0700 (Pacific Daylight Time)">12:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Yoav Weiss</span>: you're not calling the functions :)</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Tue Sep 03 2024 05:38:14 GMT-0700 (Pacific Daylight Time)">12:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell">with <code>onerror="errorHandler(event)"</code> it wfm</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Tue Sep 03 2024 06:29:55 GMT-0700 (Pacific Daylight Time)">13:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@yoavweiss:matrix.org">Yoav Weiss</span>&gt;</div></td><td class="msg-cell">ðŸ¤¦</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Tue Sep 03 2024 09:34:34 GMT-0700 (Pacific Daylight Time)">16:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@govocin165:matrix.org">govocin165</span>&gt;</div></td><td class="msg-cell">Hi, I am wondering what is the rationale behind the difference between <code>location.href</code> and <code>document.URL</code> when credentials are embedded (e.g. <a href="https://foo:bar@example.com">https://foo:bar@example.com</a>). Using the former would return an URl without credentials (<a href="http://example.com">http://example.com</a>) and the latter would give me the full URL. My best guess here is that since <code>Location</code> object provides developers a way to navigate through links, there are security concerns and credentials need to be redacted. And since browsers treat <code>Document</code> as an abstraction for the current web document, the property is readonly and not redacted. Could someone kindly disprove or verify my theory? Thanks in advance!</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Tue Sep 03 2024 11:20:23 GMT-0700 (Pacific Daylight Time)">18:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-11">Meo</span>: that seems like a bug. They are defined to be identical.</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Tue Sep 03 2024 11:42:12 GMT-0700 (Pacific Daylight Time)">18:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@govocin165:matrix.org">Meo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-11">Meo</span>: that seems like a bug. They are defined to be identical.</blockquote></mx-reply>I don't think that's the case for Chrome (128.0.6613.113). As I just tried few moments ago, it gives out different results.</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Tue Sep 03 2024 11:53:12 GMT-0700 (Pacific Daylight Time)">18:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-11">Meo</span>: I'd file a bug against Chrome (and other browsers that exhibit that behavior). Potentially if all browsers do this we need to investigate this at the specification level (file an issue against the HTML Standard for that), but it doesn't seem like something we'd want to standardize as it doesn't make a whole lot of sense.</td></tr>

</tbody></table></div></div></div>
</body></html>