<!DOCTYPE html><html><head>
  <title>WHATWG on 2022-08-25</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "WHATWG";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2022-08-25<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-08-24" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed Aug 24 2022 21:47:33 GMT-0700 (Pacific Daylight Time)">04:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@alystair:matrix.org">Lorin</span>&gt;</div></td><td class="msg-cell">Huh, apparently <code>:scope</code> doesn't work within DocumentFragment, seems kinda silly</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Aug 24 2022 23:33:09 GMT-0700 (Pacific Daylight Time)">06:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@hsivonen:mozilla.org">hsivonen</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">Sam Sneddon [:gsnedders]</span>: <a href="http://wpt.fyi">wpt.fyi</a> says that <a href="https://github.com/web-platform-tests/wpt/blob/master/html/browsers/the-window-object/garbage-collection-and-browsing-contexts/discard_iframe_history_1.html">https://github.com/web-platform-tests/wpt/blob/master/html/browsers/the-window-object/garbage-collection-and-browsing-contexts/discard_iframe_history_1.html</a> passes only in Firefox, and when I try to align about:blank behavior with other browsers, the test starts behaving in Firefox the way it already behaves in Chrome. This strongly suggests we should change the test expectation, right? Do you recall if there's spec text to adjust as well?</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Thu Aug 25 2022 00:13:29 GMT-0700 (Pacific Daylight Time)">07:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@hsivonen:mozilla.org">hsivonen</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-14">Sam Sneddon [:gsnedders]</span>: <a href="http://wpt.fyi">wpt.fyi</a> says that <a href="https://github.com/web-platform-tests/wpt/blob/master/html/browsers/the-window-object/garbage-collection-and-browsing-contexts/discard_iframe_history_1.html">https://github.com/web-platform-tests/wpt/blob/master/html/browsers/the-window-object/garbage-collection-and-browsing-contexts/discard_iframe_history_1.html</a> passes only in Firefox, and when I try to align about:blank behavior with other browsers, the test starts behaving in Firefox the way it already behaves in Chrome. This strongly suggests we should change the test expectation, right? Do you recall if there's spec text to adjust as well?</blockquote></mx-reply>Specifically, AFAICT, interop says to remove the <code>+ 1</code> on this line: <a href="https://github.com/web-platform-tests/wpt/blob/master/html/browsers/the-window-object/garbage-collection-and-browsing-contexts/discard_iframe_history_1-1.html#L11">https://github.com/web-platform-tests/wpt/blob/master/html/browsers/the-window-object/garbage-collection-and-browsing-contexts/discard_iframe_history_1-1.html#L11</a></td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Thu Aug 25 2022 02:29:07 GMT-0700 (Pacific Daylight Time)">09:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">Yes, that line looks quite suspect... loading a no-src (i.e. about:blank) iframe should not increase history length according to both the current spec and the upcoming rewrite (<a href="https://github.com/whatwg/html/pull/6315">https://github.com/whatwg/html/pull/6315</a>)</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Thu Aug 25 2022 02:29:42 GMT-0700 (Pacific Daylight Time)">09:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">Oh, no, I misread, it's navigating...</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Thu Aug 25 2022 02:29:55 GMT-0700 (Pacific Daylight Time)">09:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">Oh, this is because of the load replace timing I am pretty sure</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Thu Aug 25 2022 02:30:42 GMT-0700 (Pacific Daylight Time)">09:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/web-platform-tests/wpt/commit/c1bb1fdaa510c14d31ca8307f4778b015a6bb30d">https://github.com/web-platform-tests/wpt/commit/c1bb1fdaa510c14d31ca8307f4778b015a6bb30d</a></td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Thu Aug 25 2022 02:30:57 GMT-0700 (Pacific Daylight Time)">09:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/whatwg/html/pull/6714">https://github.com/whatwg/html/pull/6714</a></td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Thu Aug 25 2022 02:31:44 GMT-0700 (Pacific Daylight Time)">09:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">Well OK it's simpler than that, sorry.</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Thu Aug 25 2022 02:31:53 GMT-0700 (Pacific Daylight Time)">09:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">The src-less srcdoc-less iframe is on its initial about:blank</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Thu Aug 25 2022 02:32:13 GMT-0700 (Pacific Daylight Time)">09:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">Any navigation from the initial about:blank, per current and future spec, must be a replace navigation (does not increment history.length).</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Thu Aug 25 2022 02:34:45 GMT-0700 (Pacific Daylight Time)">09:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">This is the spec change: <a href="https://github.com/whatwg/html/pull/6595">https://github.com/whatwg/html/pull/6595</a> and this is the tests PR that never landed!?!?! <a href="https://github.com/web-platform-tests/wpt/pull/28541">https://github.com/web-platform-tests/wpt/pull/28541</a></td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Thu Aug 25 2022 06:58:23 GMT-0700 (Pacific Daylight Time)">13:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@pvanderbeken:mozilla.org">peterv</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Domenic</span>: I'm looking at <code>async iterable</code> support in Firefox, the WebIDL spec talks about a "end of iteration value", but it doesn't actually define what that looks like?</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Thu Aug 25 2022 07:02:01 GMT-0700 (Pacific Daylight Time)">14:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@pvanderbeken:mozilla.org">peterv</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Domenic</span>: ah, I see, it's just an opaque value that then forces <code>CreateIterResultObject(undefined, true)</code>, nevermind</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Thu Aug 25 2022 08:07:25 GMT-0700 (Pacific Daylight Time)">15:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell">Works here...</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Thu Aug 25 2022 09:55:43 GMT-0700 (Pacific Daylight Time)">16:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@gsnedders:mozilla.org">Sam Sneddon [:gsnedders]</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-14">Sam Sneddon [:gsnedders]</span>: <a href="http://wpt.fyi">wpt.fyi</a> says that <a href="https://github.com/web-platform-tests/wpt/blob/master/html/browsers/the-window-object/garbage-collection-and-browsing-contexts/discard_iframe_history_1.html">https://github.com/web-platform-tests/wpt/blob/master/html/browsers/the-window-object/garbage-collection-and-browsing-contexts/discard_iframe_history_1.html</a> passes only in Firefox, and when I try to align about:blank behavior with other browsers, the test starts behaving in Firefox the way it already behaves in Chrome. This strongly suggests we should change the test expectation, right? Do you recall if there's spec text to adjust as well?</blockquote></mx-reply>I have no idea about tests jgraham (not pinging because OOO) wrote around a decade ago.</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Thu Aug 25 2022 11:17:44 GMT-0700 (Pacific Daylight Time)">18:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@hsivonen:mozilla.org">hsivonen</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I have no idea about tests jgraham (not pinging because OOO) wrote around a decade ago.</blockquote></mx-reply>OK. Thanks.</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Thu Aug 25 2022 11:19:18 GMT-0700 (Pacific Daylight Time)">18:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domfarolino:matrix.org">Dominic Farolino</span>&gt;</div></td><td class="msg-cell">dumb question: Is it not possible to add a click event handler on an iframe that fires when the user clicks in the iframe?</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Thu Aug 25 2022 11:19:34 GMT-0700 (Pacific Daylight Time)">18:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domfarolino:matrix.org">Dominic Farolino</span>&gt;</div></td><td class="msg-cell">The only way I can seem to invoke a click event handler on an iframe is via <a href="http://iframeElement.click">iframeElement.click</a>() in script</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Thu Aug 25 2022 14:57:05 GMT-0700 (Pacific Daylight Time)">21:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">spec question about dedicated worker lifetimes: if dedicated worker A <code>postMessage()</code>s to dedicated worker B, can A die before B receives the message? if so, does the spec guarantee that B will receive the message?</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Thu Aug 25 2022 14:59:42 GMT-0700 (Pacific Daylight Time)">21:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@abotella:igalia.com">Andreu Botella (OOO till 5 Sept)</span>&gt;</div></td><td class="msg-cell">It seems like actual engines don't keep dedicated workers alive after their parent dedicated worker dies, but the spec is not 100% clear about this: <a href="https://github.com/whatwg/html/issues/7840">https://github.com/whatwg/html/issues/7840</a></td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Thu Aug 25 2022 15:01:29 GMT-0700 (Pacific Daylight Time)">22:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@abotella:igalia.com">Andreu Botella (OOO till 5 Sept)</span>&gt;</div></td><td class="msg-cell">but going by the spec, and assuming that it was clear that dedicated worker B stays alive – <code>postMessage()</code> posts a task on B's event loop, so assuming that A dies after the <code>postMessage</code> call finishes, it can die before B receives it, but B will still receive it</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Thu Aug 25 2022 15:49:10 GMT-0700 (Pacific Daylight Time)">22:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">great, that's exactly what i was looking for, thanks</td></tr>

</tbody></table></div></div></div>
</body></html>