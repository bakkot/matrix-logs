<!DOCTYPE html><html><head>
  <title>WHATWG on 2022-09-28</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "WHATWG";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2022-09-28<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-09-27" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Sep 27 2022 18:40:24 GMT-0700 (Pacific Daylight Time)">01:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell"><p><span class="nick-4">Andreu Botella</span>: for the CSS mirror tooling, we should update the client-side redirect handling so that it preserves the fragments. Right now, as far as I can see, it’s not preserving them —&nbsp;the fragments get dropped then the redirect happens.</p>
<p>I can work on a patch for it myself, unless you beat me to it.</p>
</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Sep 27 2022 20:38:25 GMT-0700 (Pacific Daylight Time)">03:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell"><span class="nick-7">aja</span>: ↑ I think you already know this, but just wanted to note that you have the option to persistently filter out the <em>“Self-closing tag syntax in text/html documents is widely discouraged”</em> warnings</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Sep 27 2022 20:51:01 GMT-0700 (Pacific Daylight Time)">03:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@aja:mozilla.org">aja</span>&gt;</div></td><td class="msg-cell">yeah...stumbled upon it.  already habitually ignore those warnings anyway; thanks for reminder, though :)</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue Sep 27 2022 21:10:11 GMT-0700 (Pacific Daylight Time)">04:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@aja:mozilla.org">aja</span>&gt;</div></td><td class="msg-cell">btw, seem to recall instance of an error handling inline style element's closing comment, rather than just warning.  some  day if it annoys me enough i'll actually file an issue :/</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Tue Sep 27 2022 21:12:30 GMT-0700 (Pacific Daylight Time)">04:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@aja:mozilla.org">aja</span>&gt;</div></td><td class="msg-cell">css @layer has issues last i checked, too.   figured it'd get there soon enough if i have some patience :)</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Tue Sep 27 2022 21:14:04 GMT-0700 (Pacific Daylight Time)">04:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> btw, seem to recall instance of an error handling inline style element's closing comment, rather than just warning.  some  day if it annoys me enough i'll actually file an issue :/</blockquote></mx-reply>Please do file an issue for it when you can make time</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Tue Sep 27 2022 21:18:15 GMT-0700 (Pacific Daylight Time)">04:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> css @layer has issues last i checked, too.   figured it'd get there soon enough if i have some patience :)</blockquote></mx-reply><p>Yeah that’s likely just because @layer is new and the support hasn’t been added to the CSS-checking backend.</p>
<p>I’ve never been the main maintainer of the CSS-checking backend; I worked on it quite a lot a few years ago, but it’s been a long time since I made any changes there. However, the main maintainer there is really good about adding support for things, whenever somebody raises an issue asking for something.</p>
</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Tue Sep 27 2022 21:22:53 GMT-0700 (Pacific Daylight Time)">04:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell"><span class="nick-11">Jeremy Roman</span>: the <em>“<code>data:text/html,&lt;img name=getElementById&gt;</code> … <code>document.getElementById</code> is now an <code>HTMLImageElement</code>, not a function”</em> thing is pretty cool</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Tue Sep 27 2022 21:23:46 GMT-0700 (Pacific Daylight Time)">04:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">(incidentally, wish the Chromium and WebKit projects would use Matrix instead of Slack…)</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Tue Sep 27 2022 21:39:16 GMT-0700 (Pacific Daylight Time)">04:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell">Currently redirects are done with meta refresh, which doesn't use any JS</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Tue Sep 27 2022 21:40:27 GMT-0700 (Pacific Daylight Time)">04:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell">I still like the idea of making the redirects usable without JS, and you can't cancel a meta refresh from JS</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Tue Sep 27 2022 21:40:40 GMT-0700 (Pacific Daylight Time)">04:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell">but I guess I could have a navigation triggered from JS before the redirect can happen</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Tue Sep 27 2022 21:51:46 GMT-0700 (Pacific Daylight Time)">04:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell">... though I guess if the page takes some time to load, the meta refresh might still win</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Tue Sep 27 2022 21:52:04 GMT-0700 (Pacific Daylight Time)">04:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell">cc <span class="nick-1">Domenic</span></td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Tue Sep 27 2022 22:42:13 GMT-0700 (Pacific Daylight Time)">05:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">?</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Tue Sep 27 2022 22:47:37 GMT-0700 (Pacific Daylight Time)">05:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell">(I thought Matrix threads showed up to clients that don't support them as replies to the original or previous message, but I checked bakkot's logs and it seems like that isn't the case)</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Tue Sep 27 2022 22:48:37 GMT-0700 (Pacific Daylight Time)">05:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell">anyway, in a thread I was talking to <span class="nick-16">sideshowbarker</span> about changing the redirects in my CSS mirror setup to keep hashes, which doesn't currently happen because they use a meta refresh redirect</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Tue Sep 27 2022 22:49:37 GMT-0700 (Pacific Daylight Time)">05:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell">I don't want to get rid of the meta refresh so the redirects worked without JS, but the alternative is probably having a <code>location.replace()</code> navigation in JS before load</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Tue Sep 27 2022 22:49:59 GMT-0700 (Pacific Daylight Time)">05:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell">but the meta refresh might still win over if the page takes some time to load</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Tue Sep 27 2022 22:50:49 GMT-0700 (Pacific Daylight Time)">05:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell">I don't understand a lot of the depths of navigation in terms of cancelling and so on, but I was tagging <span class="nick-1">Domenic</span> to check if that could be the case</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Tue Sep 27 2022 22:51:52 GMT-0700 (Pacific Daylight Time)">05:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">I think in almost all cases the meta refresh will get canceled by the JavaScript navigation starting</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Tue Sep 27 2022 22:51:59 GMT-0700 (Pacific Daylight Time)">05:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">So the meta refresh becomes only a backup for non-JS clients</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Tue Sep 27 2022 22:52:47 GMT-0700 (Pacific Daylight Time)">05:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">The only case where the meta might win would be if a network packet boundary contained the meta and the next packet contained the JavaScript and something weird goes wrong that delays the second packet all the way until we get a response from the destination</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Tue Sep 27 2022 22:55:07 GMT-0700 (Pacific Daylight Time)">05:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell"><p>the spec says that the timer for meta refresh starts on page load, so something like this should be fine, right:</p>
<pre><code class="language-html">&lt;meta http-equiv="refresh" content="0; URL=https://correct.url" /&gt;
&lt;script&gt;
  location.replace("https://correct.url" + location.hash);
&lt;/script&gt;
</code></pre>
</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Tue Sep 27 2022 22:58:36 GMT-0700 (Pacific Daylight Time)">05:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">Hmm now I am not so sure, if it starts at page load, then maybe it will happen after the script call...</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Tue Sep 27 2022 22:58:45 GMT-0700 (Pacific Daylight Time)">05:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">Best to test and see what happens :)</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Tue Sep 27 2022 23:01:10 GMT-0700 (Pacific Daylight Time)">06:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell">seems to be working, but that's when testing locally</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Tue Sep 27 2022 23:03:19 GMT-0700 (Pacific Daylight Time)">06:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell">alternatively, I could use <code>&lt;noscript&gt;</code></td></tr>

</tbody></table></div></div></div>
</body></html>