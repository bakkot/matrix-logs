<!DOCTYPE html><html><head>
  <title>WHATWG on 2024-05-03</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "WHATWG";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2024-05-03<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2024-05-02" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Thu May 02 2024 17:14:36 GMT-0700 (Pacific Daylight Time)">00:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@jarhar:matrix.org">jarhar</span>&gt;</div></td><td class="msg-cell">i dont think we have usecounters for that particular case</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Thu May 02 2024 17:15:08 GMT-0700 (Pacific Daylight Time)">00:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@jarhar:matrix.org">jarhar</span>&gt;</div></td><td class="msg-cell">the new select would be a regular element which gets popover behavior, so it wouldnt escape outside its frame</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Thu May 02 2024 17:16:19 GMT-0700 (Pacific Daylight Time)">00:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">right</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Thu May 02 2024 17:20:02 GMT-0700 (Pacific Daylight Time)">00:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">jarhar</span>: does the parser allow all the possible elements inside &lt;option&gt; ?</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Thu May 02 2024 17:21:19 GMT-0700 (Pacific Daylight Time)">00:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">oh, that  would be approach 3</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Thu May 02 2024 17:22:09 GMT-0700 (Pacific Daylight Time)">00:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@jarhar:matrix.org">jarhar</span>&gt;</div></td><td class="msg-cell">my proposal would allow everything in option</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Thu May 02 2024 17:23:49 GMT-0700 (Pacific Daylight Time)">00:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">jarhar</span>: hmm, what is the difference between 2 and 3 then? 2 requires use of datalist but 3 wouldn't since one could just use anything inside option?</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Thu May 02 2024 17:27:07 GMT-0700 (Pacific Daylight Time)">00:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@jarhar:matrix.org">jarhar</span>&gt;</div></td><td class="msg-cell"><p>option 2 doesnt relax the parser at all except within button and datalist tags. so the following would be parsed in option 3, but option 2 would continue to throw away the div:<br>
<!-- raw HTML omitted --></p>
<!-- raw HTML omitted --></td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Thu May 02 2024 17:27:16 GMT-0700 (Pacific Daylight Time)">00:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@jarhar:matrix.org">jarhar</span>&gt;</div></td><td class="msg-cell">ah the html i wrote is gone</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Thu May 02 2024 17:27:58 GMT-0700 (Pacific Daylight Time)">00:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@jarhar:matrix.org">jarhar</span>&gt;</div></td><td class="msg-cell">select<br>
option<br>
div<br>
text node</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Thu May 02 2024 17:28:14 GMT-0700 (Pacific Daylight Time)">00:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@jarhar:matrix.org">jarhar</span>&gt;</div></td><td class="msg-cell">option 2 would do what the parser currently does here and turn it into this</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Thu May 02 2024 17:28:20 GMT-0700 (Pacific Daylight Time)">00:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@jarhar:matrix.org">jarhar</span>&gt;</div></td><td class="msg-cell">select<br>
option<br>
text node</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Thu May 02 2024 17:28:52 GMT-0700 (Pacific Daylight Time)">00:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@jarhar:matrix.org">jarhar</span>&gt;</div></td><td class="msg-cell">to get the div in option 2 you have to wrap the option in a datalist, which also acts as the popover element</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Thu May 02 2024 17:30:21 GMT-0700 (Pacific Daylight Time)">00:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">and still one more question today - before it is getting too late for me. If one doesn't use <code>&lt;button&gt;</code> inside <code>&lt;select&gt;</code>, what is the expected behavior? Browser would effectively have button as part of internal shadow DOM and that button has then <code>&lt;selectedoption&gt;</code> ?</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Thu May 02 2024 17:31:36 GMT-0700 (Pacific Daylight Time)">00:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@jarhar:matrix.org">jarhar</span>&gt;</div></td><td class="msg-cell">yes, but in my current implementation we just copy the text content from the selected option rather than having a full on selectedoption element so we dont have unsanitized content in the ua shadowroot</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Thu May 02 2024 17:31:39 GMT-0700 (Pacific Daylight Time)">00:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@jarhar:matrix.org">jarhar</span>&gt;</div></td><td class="msg-cell">option 2 is implemented in chrome behind experimental web platform features if you want to try it out</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Thu May 02 2024 17:32:24 GMT-0700 (Pacific Daylight Time)">00:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@jarhar:matrix.org">jarhar</span>&gt;</div></td><td class="msg-cell">you just have to add appearance:base-select to the select element to make it render the new stuff</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Thu May 02 2024 17:32:59 GMT-0700 (Pacific Daylight Time)">00:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">oh, text content. That is something what was unclear in the explainer, since in one place it is talking about text content and in other place cloning</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Thu May 02 2024 17:33:11 GMT-0700 (Pacific Daylight Time)">00:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">"&lt;selectedoption&gt; - The element which contains the text of the currently selected option. Every time that the user selects an option, the browser will replace the text content of this element with the text content of the selected option."</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Thu May 02 2024 17:33:29 GMT-0700 (Pacific Daylight Time)">00:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">"The &lt;selectedoption&gt; element enables developers to declaratively clone the content of the selected &lt;option&gt; element to the button and to style it distinctly from the &lt;option&gt;"</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Thu May 02 2024 17:34:54 GMT-0700 (Pacific Daylight Time)">00:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@jarhar:matrix.org">jarhar</span>&gt;</div></td><td class="msg-cell">ah thanks for pointing that out ill fix it right away</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Thu May 02 2024 17:35:14 GMT-0700 (Pacific Daylight Time)">00:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@jarhar:matrix.org">jarhar</span>&gt;</div></td><td class="msg-cell">when the author used the selectedoption element, it clones the node not just the text content</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Thu May 02 2024 17:35:24 GMT-0700 (Pacific Daylight Time)">00:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@jarhar:matrix.org">jarhar</span>&gt;</div></td><td class="msg-cell">*uses</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Thu May 02 2024 17:36:41 GMT-0700 (Pacific Daylight Time)">00:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">ok, and that is the reason why <a href="https://open-ui.org/components/selectlist/#rich-content-in-options">https://open-ui.org/components/selectlist/#rich-content-in-options</a> has perhaps a bit surprising behavior. The image isn't part of the selected option.</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Thu May 02 2024 17:37:28 GMT-0700 (Pacific Daylight Time)">00:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@jarhar:matrix.org">jarhar</span>&gt;</div></td><td class="msg-cell">yeah thats because html content doesnt include the selectedoption element</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Thu May 02 2024 17:38:18 GMT-0700 (Pacific Daylight Time)">00:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@jarhar:matrix.org">jarhar</span>&gt;</div></td><td class="msg-cell">if we end up using the not yet implemented sanitizer api to check the content before replacing it, then we can put it in the ua shadowroot by default and youll get the "rich content" without replacing the button</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Thu May 02 2024 17:51:37 GMT-0700 (Pacific Daylight Time)">00:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell"><a href="https://open-ui.org/components/selectlist/#customizing-basic-styles">https://open-ui.org/components/selectlist/#customizing-basic-styles</a> something adds the arrow to the button, but it is not added in <a href="https://open-ui.org/components/selectlist/#rendering-the-option-differently-in-the-button">https://open-ui.org/components/selectlist/#rendering-the-option-differently-in-the-button</a> </td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Thu May 02 2024 22:22:17 GMT-0700 (Pacific Daylight Time)">05:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Jake Archibald</span>: they use an opaque origin, but both them and sandboxed iframes won't defend you against Spectre attacks in current browser engines</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Fri May 03 2024 08:01:02 GMT-0700 (Pacific Daylight Time)">15:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@jarhar:matrix.org">jarhar</span>&gt;</div></td><td class="msg-cell">thanks, i fixed it by removing the button tag from the example which has a down arrow. the down arrow is inside the button element in the UA shadowroot, so you don't get it when you provide your own button tag.</td></tr>

</tbody></table></div></div></div>
</body></html>