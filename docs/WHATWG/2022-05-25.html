<!DOCTYPE html><html><head>
  <title>WHATWG on 2022-05-25</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "WHATWG";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2022-05-25<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-05-24" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed May 25 2022 04:51:09 GMT-0700 (Pacific Daylight Time)">11:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iwan.aucamp:matrix.org">iwan.aucamp</span>&gt;</div></td><td class="msg-cell">Is there a list of implementations of <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a> somewhere? Specifically looking for a python implementation.</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed May 25 2022 04:51:24 GMT-0700 (Pacific Daylight Time)">11:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iwan.aucamp:matrix.org">iwan.aucamp</span>&gt;</div></td><td class="msg-cell">But would settle for library in any other language also</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed May 25 2022 04:52:30 GMT-0700 (Pacific Daylight Time)">11:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iwan.aucamp:matrix.org">iwan.aucamp</span>&gt;</div></td><td class="msg-cell">Ah nvm, I found some</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed May 25 2022 04:54:19 GMT-0700 (Pacific Daylight Time)">11:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Mattias Buelens</span>: how does transformAlgorithm convey stream closure or an error of some kind?</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed May 25 2022 04:55:00 GMT-0700 (Pacific Daylight Time)">11:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">In a <code>TransformStream</code> that is; from the surface it seems like it only deals with successful scenarios</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed May 25 2022 04:56:03 GMT-0700 (Pacific Daylight Time)">11:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">annevk</span>: yes this is an issue. There is an open issue on the spec for this that one of our engineers was going to look into. Let me find it</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed May 25 2022 04:56:19 GMT-0700 (Pacific Daylight Time)">11:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@mattiasbuelens:matrix.org">Mattias Buelens</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-12">annevk</span>: yes this is an issue. There is an open issue on the spec for this that one of our engineers was going to look into. Let me find it</blockquote></mx-reply><a href="https://github.com/whatwg/streams/issues/1212">https://github.com/whatwg/streams/issues/1212</a></td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed May 25 2022 04:57:40 GMT-0700 (Pacific Daylight Time)">11:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><span class="nick-11">crowlkats</span> has started work on that. Don't know what the current progress is though</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed May 25 2022 05:54:11 GMT-0700 (Pacific Daylight Time)">12:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">Thanks! Since this is mainly about specification language I guess I can figure something out whereby I either wait for sufficient chunks or the stream to close or error. The error does propagate at the moment, right? Or does everything in Fetch that uses TransformStream have some kind of bug?</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed May 25 2022 06:11:20 GMT-0700 (Pacific Daylight Time)">13:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Thanks! Since this is mainly about specification language I guess I can figure something out whereby I either wait for sufficient chunks or the stream to close or error. The error does propagate at the moment, right? Or does everything in Fetch that uses TransformStream have some kind of bug?</blockquote></mx-reply>Yeah, the error does propagate, but <code>TransformStream</code> is just completely oblivious to the error right now.</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed May 25 2022 06:12:40 GMT-0700 (Pacific Daylight Time)">13:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@lucacasonato:matrix.org">Luca Casonato</span>&gt;</div></td><td class="msg-cell">But if you error a readable stream that is piped through a transform stream into a writable stream, the writable stream will be aborted correctly.</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed May 25 2022 06:19:46 GMT-0700 (Pacific Daylight Time)">13:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">Thanks Luca, I guess I'll add a comment for now</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed May 25 2022 06:40:49 GMT-0700 (Pacific Daylight Time)">13:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Mattias Buelens</span>: <span class="nick-3">Luca Casonato</span>: here's a draft, would love your critique: <a href="https://gist.github.com/annevk/ca5475aa173820effdd90b5298bf49c1">https://gist.github.com/annevk/ca5475aa173820effdd90b5298bf49c1</a></td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Wed May 25 2022 06:42:05 GMT-0700 (Pacific Daylight Time)">13:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell">(the "in parallel" has a JS engine running concern is known btw, I'm not really sure how to solve that other than having "concept" streams, which I guess we should get to to solve a number of such issues)</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed May 25 2022 06:45:57 GMT-0700 (Pacific Daylight Time)">13:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@mattiasbuelens:matrix.org">Mattias Buelens</span>&gt;</div></td><td class="msg-cell">What if the response body is shorter than 1024 bytes? You'd wait forever in step 3, right?</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed May 25 2022 06:47:07 GMT-0700 (Pacific Daylight Time)">13:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@mattiasbuelens:matrix.org">Mattias Buelens</span>&gt;</div></td><td class="msg-cell">You probably want a flushAlgorithm, so you can stop waiting if you reach EOF before filling up 1024 bytes.</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Wed May 25 2022 06:48:29 GMT-0700 (Pacific Daylight Time)">13:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell">Sort of related: In Firefox we also have non-standard error callback from UnderlyingSource, because that was required for something in fetch</td></tr>

</tbody></table></div></div></div>
</body></html>