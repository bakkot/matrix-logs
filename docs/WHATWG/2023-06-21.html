<!DOCTYPE html><html><head>
  <title>WHATWG on 2023-06-21</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "WHATWG";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2023-06-21<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2023-06-20" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed Jun 21 2023 07:16:18 GMT-0700 (Pacific Daylight Time)">14:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bkardell:igalia.com">bkardell</span>&gt;</div></td><td class="msg-cell">happy to leave a similar comment on <a href="https://github.com/whatwg/html/pull/9166">https://github.com/whatwg/html/pull/9166</a> but I feel like it might be better to get past simple confusions in chat, so I'd like to clarify something. <span class="nick-12">annevk</span> are you suggesting that you are opposed to the rearranging vs what we tried to do in the original PR that this was replacing - to weave shadow into that already complex but flat version?  I found it very complex, some others here seemed to also think there was room for improvement. I tried and shopped it to at least 3 others before assuming this would be an improvement and make shadow dom fit easier, but... you don't think so?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Jun 21 2023 07:16:46 GMT-0700 (Pacific Daylight Time)">14:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bkardell:igalia.com">bkardell</span>&gt;</div></td><td class="msg-cell">(I'd just like to clarify / not misunderstand the comment before I reply)</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed Jun 21 2023 07:25:30 GMT-0700 (Pacific Daylight Time)">14:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">bkardell</span>: I don't think it works as-is, you definitely need to introduce each <code>&lt;dl&gt;</code> list with a preceding sentence as we do elsewhere</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Jun 21 2023 07:26:06 GMT-0700 (Pacific Daylight Time)">14:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">bkardell</span>: I would have preferred the restructuring to be a separate editorial change from the shadow tree changes, as reviewing the combination is hard</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Jun 21 2023 07:27:34 GMT-0700 (Pacific Daylight Time)">14:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bkardell:igalia.com">bkardell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-8">bkardell</span>: I don't think it works as-is, you definitely need to introduce each <code>&lt;dl&gt;</code> list with a preceding sentence as we do elsewhere</blockquote></mx-reply>its not the only nested dl that's in there, I took the idea from others</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Jun 21 2023 07:29:07 GMT-0700 (Pacific Daylight Time)">14:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bkardell:igalia.com">bkardell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-8">bkardell</span>: I would have preferred the restructuring to be a separate editorial change from the shadow tree changes, as reviewing the combination is hard</blockquote></mx-reply>yeah, I think that makes a lot of sense and regret not doing that. It's mainly the priority is to get the shadow dom stuff in more than make it easier to follow, but trying to weave the shadow dom stuff in is so much harder unless you rearrange it first, I think</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Jun 21 2023 07:29:25 GMT-0700 (Pacific Daylight Time)">14:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bkardell:igalia.com">bkardell</span>&gt;</div></td><td class="msg-cell">also, my time on this is just limited</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed Jun 21 2023 07:29:52 GMT-0700 (Pacific Daylight Time)">14:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bkardell:igalia.com">bkardell</span>&gt;</div></td><td class="msg-cell">where do you prefer we go from here?  I suppose I can <em>try</em>  doing a lesser pull first</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed Jun 21 2023 07:32:37 GMT-0700 (Pacific Daylight Time)">14:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell">I'm not sure what precedent you mean. HTML has a lot of old algorithms that could do with some refactoring. They might not be a good source for inspiration. As for what to tackle next, if you feel tackling all the feedback at once is too much I'd recommend focusing on a restructuring PR first. It seems like it should then not be a whole lot of effort to put the shadow root stuff in.</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed Jun 21 2023 07:33:40 GMT-0700 (Pacific Daylight Time)">14:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell">But if you want to address it all at once that's okay too.</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed Jun 21 2023 10:07:28 GMT-0700 (Pacific Daylight Time)">17:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bkardell:igalia.com">bkardell</span>&gt;</div></td><td class="msg-cell">I think the case for rearranging it is weaker without having to incorporate shadow dom but if you think we can be aware of that, I'm willing to try 2 steps</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed Jun 21 2023 10:40:15 GMT-0700 (Pacific Daylight Time)">17:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">bkardell</span>: yeah, we'd view it through that lens (and you can make it explicit in your commit message)</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed Jun 21 2023 11:03:50 GMT-0700 (Pacific Daylight Time)">18:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bkardell:igalia.com">bkardell</span>&gt;</div></td><td class="msg-cell">interesting... does the html build use Prince XML?</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Wed Jun 21 2023 11:03:53 GMT-0700 (Pacific Daylight Time)">18:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bkardell:igalia.com">bkardell</span>&gt;</div></td><td class="msg-cell">for what?</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed Jun 21 2023 11:09:10 GMT-0700 (Pacific Daylight Time)">18:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@jyasskin:matrix.org">Jeffrey Yasskin</span>&gt;</div></td><td class="msg-cell"><a href="https://wicg.github.io/turtledove/">https://wicg.github.io/turtledove/</a> has a couple fields that are passed to the browser in one realm, stored for a while, and then passed to a function in another realm. The spec currently uses JSON for this, where it might be able to use  StructuredSerializeForStorage() instead, but my question for this group is whether there's a good WebIDL pattern for documenting that restriction on types and creating the resulting objects in the right realm? 

<a href="https://w3c.github.io/IndexedDB/">https://w3c.github.io/IndexedDB/</a> does it all manually, but maybe something better has come along since then...</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed Jun 21 2023 11:12:01 GMT-0700 (Pacific Daylight Time)">18:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@jyasskin:matrix.org">Jeffrey Yasskin</span>&gt;</div></td><td class="msg-cell">Ah, they don't use Structured Clone in order to defend the data's recipients from too-complex input (<a href="https://github.com/WICG/turtledove/issues/654">https://github.com/WICG/turtledove/issues/654</a>), so if we add something in WebIDL for this, it couldn't be directly shared by IndexedDB (and maybe couldn't anyway since it would change the order of errors in IndexedDB).</td></tr>

</tbody></table></div></div></div>
</body></html>