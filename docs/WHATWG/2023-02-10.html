<!DOCTYPE html><html><head>
  <title>WHATWG on 2023-02-10</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "WHATWG";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2023-02-10<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2023-02-09" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Thu Feb 09 2023 23:13:23 GMT-0800 (Pacific Standard Time)">07:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@ms2ger:igalia.com">Ms2ger</span>&gt;</div></td><td class="msg-cell">HTML says "This specification does not specify which image types are to be supported."</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Fri Feb 10 2023 00:03:01 GMT-0800 (Pacific Standard Time)">08:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@pygy_:matrix.org">Pierre-Yves G√©rardy</span>&gt;</div></td><td class="msg-cell">Hi folks, coming here from <a href="https://github.com/whatwg/dom/issues/586">https://github.com/whatwg/dom/issues/586</a> per @annevk's suggestion</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Fri Feb 10 2023 00:04:41 GMT-0800 (Pacific Standard Time)">08:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@pygy_:matrix.org">Pierre-Yves G√©rardy</span>&gt;</div></td><td class="msg-cell">The proposed API looks to me like a "better horse" situation, hence my comments...</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Fri Feb 10 2023 00:07:28 GMT-0800 (Pacific Standard Time)">08:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-11">Pierre-Yves G√©rardy</span>: hey welcome, thanks for joining! And thanks for giving feedback, but note that for effective participation it's usually better to support an existing comment that says as much or leave a single comment that clearly makes your point. Adding a lot of comments to an issue will make them look noisy and more easily ignorable.</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Fri Feb 10 2023 00:08:57 GMT-0800 (Pacific Standard Time)">08:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell">And to be clear, the API as proposed wouldn't make it in. If we actually want CSS parity it would need move semantics as discussed in the issue I linked.</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Fri Feb 10 2023 00:17:01 GMT-0800 (Pacific Standard Time)">08:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@pygy_:matrix.org">Pierre-Yves G√©rardy</span>&gt;</div></td><td class="msg-cell">Move semantics... could you explain? As in not detaching the nodes from the document/parent while moving them around? If so I'm with you from my first comment on...</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Fri Feb 10 2023 00:19:43 GMT-0800 (Pacific Standard Time)">08:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@pygy_:matrix.org">Pierre-Yves G√©rardy</span>&gt;</div></td><td class="msg-cell">Losing the state of media elements, iframes, and the focus when moving nodes is an anti-feature of the current DOM methods.</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Fri Feb 10 2023 00:30:59 GMT-0800 (Pacific Standard Time)">08:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@pygy_:matrix.org">Pierre-Yves G√©rardy</span>&gt;</div></td><td class="msg-cell">A single <code>parent.spliceChildren(nodes: Nodes[], {previousSibling?, nextSibling?, delayRemoval?: (n:Node)=&gt;Promise)</code> method would cover all the cases used in the wild in frameworks AFAIK, and would be more ergonomic than asking users to tag nodes with an attribute for the browser to reorder</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Fri Feb 10 2023 00:32:05 GMT-0800 (Pacific Standard Time)">08:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-11">Pierre-Yves G√©rardy</span>: right, at the moment the DOM only has insert, remove, and replace all, essentially.</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Fri Feb 10 2023 00:32:42 GMT-0800 (Pacific Standard Time)">08:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell">That signature looks more complex than what I had in mind, but there's a lot of pre-requisites to sort out first anyway. (As noted in my comment.)</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Fri Feb 10 2023 00:39:47 GMT-0800 (Pacific Standard Time)">08:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@pygy_:matrix.org">Pierre-Yves G√©rardy</span>&gt;</div></td><td class="msg-cell">Do you mean <a href="https://github.com/whatwg/dom/issues/808">https://github.com/whatwg/dom/issues/808</a>?</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Fri Feb 10 2023 00:49:16 GMT-0800 (Pacific Standard Time)">08:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@pygy_:matrix.org">Pierre-Yves G√©rardy</span>&gt;</div></td><td class="msg-cell">Re. signature,  <code>(nodes, options?)</code> has the advantage of future extensibility. For the simple case(reorder all nodes) the options are not needed. If you want to move a subset of nodes from one point to another, it becomes <code>splice(nodes, splicePoint)</code> which is as convenient as it gets...</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Fri Feb 10 2023 00:49:54 GMT-0800 (Pacific Standard Time)">08:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell">What would prevent us from adding a dictionary when we need it?</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Fri Feb 10 2023 00:50:19 GMT-0800 (Pacific Standard Time)">08:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@pygy_:matrix.org">Pierre-Yves G√©rardy</span>&gt;</div></td><td class="msg-cell">The modern DOM methods are variadic</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Fri Feb 10 2023 00:51:15 GMT-0800 (Pacific Standard Time)">08:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell">Those could still have a dictionary at the end if we wanted to. And yeah, that issue is a pre-requisite. The other issue that's referenced discusses move semantics.</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Fri Feb 10 2023 00:59:43 GMT-0800 (Pacific Standard Time)">08:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@pygy_:matrix.org">Pierre-Yves G√©rardy</span>&gt;</div></td><td class="msg-cell"><p>In my ideal world, moving nodes within a document wouldn't tigger a state teardown/init if done atomically. A manual <code>remove</code>/<code>insert</code> would though.</p>
<p>Could these APIs be extended to accept arrays of nodes, so that we don't have to splice them in? That would avoid iterating twice over the list.</p>
</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Fri Feb 10 2023 01:13:15 GMT-0800 (Pacific Standard Time)">09:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@pygy_:matrix.org">Pierre-Yves G√©rardy</span>&gt;</div></td><td class="msg-cell">They already do, my bad :-)</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Fri Feb 10 2023 01:17:10 GMT-0800 (Pacific Standard Time)">09:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@pygy_:matrix.org">Pierre-Yves G√©rardy</span>&gt;</div></td><td class="msg-cell">Actually, they don't, and can't be updated for Web compat reasons I guess, since arrays are stringified :-/</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Fri Feb 10 2023 01:24:33 GMT-0800 (Pacific Standard Time)">09:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-11">Pierre-Yves G√©rardy</span>: you can use apply, it's fine</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Fri Feb 10 2023 01:28:01 GMT-0800 (Pacific Standard Time)">09:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@pygy_:matrix.org">Pierre-Yves G√©rardy</span>&gt;</div></td><td class="msg-cell">And push the options at the end of the array if they ever were supported I suppose. üëçÔ∏è

Re. #808 why can't we add methods that don't trigger the state reinitialization when moving within the same document? Wouldn't that give us the CSS parity you're after?</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Fri Feb 10 2023 01:28:46 GMT-0800 (Pacific Standard Time)">09:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@pygy_:matrix.org">Pierre-Yves G√©rardy</span>&gt;</div></td><td class="msg-cell">... and side-step #808 altogether</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Fri Feb 10 2023 01:29:26 GMT-0800 (Pacific Standard Time)">09:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell">In order to understand what you can ignore, you first have to understand what you will be ignoring.</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Fri Feb 10 2023 01:30:01 GMT-0800 (Pacific Standard Time)">09:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@pygy_:matrix.org">Pierre-Yves G√©rardy</span>&gt;</div></td><td class="msg-cell">:-) Gotcha, I'll read more about it and come back. Thanks for your patience</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Fri Feb 10 2023 01:35:24 GMT-0800 (Pacific Standard Time)">09:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell"><p>Is this use of the term <em>‚Äúmove semantics‚Äù</em> inspired by the same concept from C++?</p>
<p>And is it some new usage? I don‚Äôt so that term anywhere in the DOM spec itself yet‚Ä¶</p>
</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Fri Feb 10 2023 01:44:27 GMT-0800 (Pacific Standard Time)">09:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">sideshowbarker</span>: maybe? The idea is that you wouldn't remove or insert a node (current primitives), but move it. This would also result in a different mutation record, for instance.</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Fri Feb 10 2023 01:50:31 GMT-0800 (Pacific Standard Time)">09:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@sideshowbarker:matrix.org">sideshowbarker</span>&gt;</div></td><td class="msg-cell">I see. I asked just because I‚Äôve not ever seen ‚Äúmove semantics‚Äù used in a general sense for anything, and because it have a very specific specialized meaning in C++. I would think that C++ programmers might find the use of the term for DOM operations to be a bit odd ‚Äî or that it might imply to them some special behavior similar to what it has in C++.

But maybe not. I guess Rust uses the term, though I think Rust uses in much the same way that C++ does.

Anyway, was just curious</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Fri Feb 10 2023 01:58:18 GMT-0800 (Pacific Standard Time)">09:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@pygy_:matrix.org">Pierre-Yves G√©rardy</span>&gt;</div></td><td class="msg-cell">@annevk are MutationEvents still a concern in 2023? If so, move semantics could be spec'ed such that mutation events throw errors. That would be Web compatible, and would push folks who still use MutationEvents and want to opt into move semantics to migrate away from them.</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Fri Feb 10 2023 02:05:21 GMT-0800 (Pacific Standard Time)">10:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@pygy_:matrix.org">Pierre-Yves G√©rardy</span>&gt;</div></td><td class="msg-cell">A gentler option would be to ignore the mutation events and issue warnings.</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Fri Feb 10 2023 02:40:44 GMT-0800 (Pacific Standard Time)">10:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">sideshowbarker</span>: it's not quite "general sense" though :-) it's in the context of the node tree</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Fri Feb 10 2023 02:42:23 GMT-0800 (Pacific Standard Time)">10:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-11">Pierre-Yves G√©rardy</span>: mutation events still exist and will be a problem of sorts, but they're not the main problem I think</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Fri Feb 10 2023 02:42:54 GMT-0800 (Pacific Standard Time)">10:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@pygy_:matrix.org">Pierre-Yves G√©rardy</span>&gt;</div></td><td class="msg-cell">Yes, I'm reading through the various issues listed in #808</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Fri Feb 10 2023 02:44:02 GMT-0800 (Pacific Standard Time)">10:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@pygy_:matrix.org">Pierre-Yves G√©rardy</span>&gt;</div></td><td class="msg-cell">I was just wondering if throwing bones at folks that still use them was deemed fair game if we don't break existing sites</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Fri Feb 10 2023 02:44:34 GMT-0800 (Pacific Standard Time)">10:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell">I'm not quite sure what that means. It sounds like it would make event listeners observable which seems bad.</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Fri Feb 10 2023 02:48:13 GMT-0800 (Pacific Standard Time)">10:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@pygy_:matrix.org">Pierre-Yves G√©rardy</span>&gt;</div></td><td class="msg-cell">Because one can spy on <code>console.warn</code>? The warning could be issued asynchronously...</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Fri Feb 10 2023 02:49:44 GMT-0800 (Pacific Standard Time)">10:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@pygy_:matrix.org">Pierre-Yves G√©rardy</span>&gt;</div></td><td class="msg-cell">By "throwing a bone", I mean creating features that are deliberately incompatible with the ones you want to deprecate.</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Fri Feb 10 2023 02:50:36 GMT-0800 (Pacific Standard Time)">10:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell">Yeah sure, I suspect we might do that. Again, not the biggest issue.</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Fri Feb 10 2023 02:56:47 GMT-0800 (Pacific Standard Time)">10:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@pygy_:matrix.org">Pierre-Yves G√©rardy</span>&gt;</div></td><td class="msg-cell">I see, the race conditions described in #808 and friends look "fun"</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Fri Feb 10 2023 03:13:43 GMT-0800 (Pacific Standard Time)">11:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@pygy_:matrix.org">Pierre-Yves G√©rardy</span>&gt;</div></td><td class="msg-cell">Regarding these issues, is there a notion of atomic transactions in DOM operations? As in "no user code runs during a DOM transaction"?</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Fri Feb 10 2023 03:14:33 GMT-0800 (Pacific Standard Time)">11:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell">Nope</td></tr>

</tbody></table></div></div></div>
</body></html>