<!DOCTYPE html><html><head>
  <title>WHATWG on 2023-11-10</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "WHATWG";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">WHATWG<br>2023-11-10<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2023-11-09" class="nav-link"><span>prev</span></a>
<span style="float:right">next</span>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search WHATWG">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Thu Nov 09 2023 20:57:20 GMT-0800 (Pacific Standard Time)">04:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@akaster:serenityos.org">akaster</span>&gt;</div></td><td class="msg-cell">referencing &lt;<a href="https://github.com/whatwg/html/issues/9920>">https://github.com/whatwg/html/issues/9920&gt;</a>; is it the case that all 3 major engines use separate processes for Shared/ServiceWorkers but keep DedicatedWorkers in the same process as the renderer, just in different threads? </td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Thu Nov 09 2023 20:59:35 GMT-0800 (Pacific Standard Time)">04:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@akaster:serenityos.org">akaster</span>&gt;</div></td><td class="msg-cell">I was hoping to start implementing DedicatedWorkers in Ladybird assuming that any worker type would "always" have its own process (until there's too many processes and we have to start sharing etc etc). Which would mean we can keep covering our ears and pretend that the thread-unsafety of LibWeb/LibJS can wait until 'later' still. </td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Thu Nov 09 2023 21:01:31 GMT-0800 (Pacific Standard Time)">05:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@akaster:serenityos.org">akaster</span>&gt;</div></td><td class="msg-cell">Per the issue, <span class="nick-1">Domenic</span>:  was saying his understanding was that that's not a good idea because of the requirements for SharedArrayBuffers in the ECMAScript spec. </td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Thu Nov 09 2023 21:03:59 GMT-0800 (Pacific Standard Time)">05:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> referencing &lt;<a href="https://github.com/whatwg/html/issues/9920>">https://github.com/whatwg/html/issues/9920&gt;</a>; is it the case that all 3 major engines use separate processes for Shared/ServiceWorkers but keep DedicatedWorkers in the same process as the renderer, just in different threads? </blockquote></mx-reply>Correct, I think. At least definitely correct for dedicated workers in same process; not sure if shared and service are process-isolated everywhere.</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Thu Nov 09 2023 21:06:23 GMT-0800 (Pacific Standard Time)">05:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@akaster:serenityos.org">akaster</span>&gt;</div></td><td class="msg-cell">Hmm all right.. well, we'll have to handle distinct realms existing in the same process to handle <a href="http://window.open">window.open</a>, so handling separate agents (called VM, in our implementation) is probably not going to be too far from that. I'm mostly worried about the places where we still reach out to the "main thread VM" Singleton.. would be nice to always know which agent we're working with though.</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Thu Nov 09 2023 21:54:07 GMT-0800 (Pacific Standard Time)">05:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">same-origin <a href="http://window.open">window.open</a>, but also same-origin iframes</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Thu Nov 09 2023 22:41:13 GMT-0800 (Pacific Standard Time)">06:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell">HTML property setters seem inconsistent when it comes to throwing or silently ignoring invalid values. Is either of those seen as the "right way" these days?</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Thu Nov 09 2023 23:35:53 GMT-0800 (Pacific Standard Time)">07:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Jake Archibald</span>: methods generally throw, setters generally ignore (and then the getter continues to return the same value); this is somewhat enforced for enums</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Thu Nov 09 2023 23:39:26 GMT-0800 (Pacific Standard Time)">07:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell">I guided someone to follow the "new feature" template a bit more closely and <a href="https://github.com/whatwg/dom/issues/1233">https://github.com/whatwg/dom/issues/1233</a> is quite understandable now in terms of what it's trying to achieve. Hopefully it continues to work that well.</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Thu Nov 09 2023 23:45:36 GMT-0800 (Pacific Standard Time)">07:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-6">Jake Archibald</span>: methods generally throw, setters generally ignore (and then the getter continues to return the same value); this is somewhat enforced for enums</blockquote></mx-reply>So things like <code>valueAsDate</code> throwing on, say, a range input, is that breaking convention, or is it correct by some other rule?</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Thu Nov 09 2023 23:46:46 GMT-0800 (Pacific Standard Time)">07:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell"><a href="https://html.spec.whatwg.org/multipage/input.html#dom-input-valueasdate">https://html.spec.whatwg.org/multipage/input.html#dom-input-valueasdate</a></td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Thu Nov 09 2023 23:50:37 GMT-0800 (Pacific Standard Time)">07:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Jake Archibald</span>: I think <code>valueAsDate</code> is breaking several conventions; doesn't it return a new object each time you invoke the getter?</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Thu Nov 09 2023 23:51:05 GMT-0800 (Pacific Standard Time)">07:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jakea:matrix.org">Jake Archibald</span>&gt;</div></td><td class="msg-cell">Ohh that's a good point</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Thu Nov 09 2023 23:51:30 GMT-0800 (Pacific Standard Time)">07:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">Jake Archibald</span>: having said that, I guess I'm not entirely sure about what the convention is for non-enums, but I wouldn't base precedent on <code>valueAsDate</code>.</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Fri Nov 10 2023 00:19:33 GMT-0800 (Pacific Standard Time)">08:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">I'm not sure setters ignoring is really best practice, but I admit not thinking too hard about it...</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Fri Nov 10 2023 00:19:50 GMT-0800 (Pacific Standard Time)">08:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">In JS itself there are some cases where setters throw in strict mode and ignore in sloppy mode, IIRC.</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Fri Nov 10 2023 00:51:25 GMT-0800 (Pacific Standard Time)">08:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@chargeitall:matrix.org">chargeitall</span>&gt;</div></td><td class="msg-cell">Is this anchor meant to serve as a placeholder to describe the grammar and lexical scanner? <a href="https://www.w3.org/TR/css-syntax-3/#placement">https://www.w3.org/TR/css-syntax-3/#placement</a></td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Fri Nov 10 2023 02:13:09 GMT-0800 (Pacific Standard Time)">10:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Domenic</span>: <a href="https://github.com/WICG/observable/issues/71#issuecomment-1804956795">https://github.com/WICG/observable/issues/71#issuecomment-1804956795</a> say we had this "new thing", couldn't you refactor <code>EventListener</code> in terms of that?</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Fri Nov 10 2023 02:14:40 GMT-0800 (Pacific Standard Time)">10:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-1">Domenic</span>: <a href="https://github.com/WICG/observable/issues/71#issuecomment-1804956795">https://github.com/WICG/observable/issues/71#issuecomment-1804956795</a> say we had this "new thing", couldn't you refactor <code>EventListener</code> in terms of that?</blockquote></mx-reply>Probably, as long as we had the same sort of abstraction layer for turning raw JS functions into this new thing. (Which I am not sure I would otherwise add... although maybe, I dunno.)</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Fri Nov 10 2023 02:15:56 GMT-0800 (Pacific Standard Time)">10:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Domenic</span>: well that could also be the overload, provided Web IDL gets support for that</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Fri Nov 10 2023 02:16:44 GMT-0800 (Pacific Standard Time)">10:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">Domenic</span>: but thanks, that confirms my suspicion that these patterns are in fact identical</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Fri Nov 10 2023 02:17:32 GMT-0800 (Pacific Standard Time)">10:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell"><p>It's a bit tricky because it seems like the use cases are:</p>
<ul>
<li>Streams: need to grab a property eagerly, need to grab methods to call later</li>
<li>Custom elements: needs to be a constructor, need  to grab properties eagerly, need to grab its <em>prototype</em> methods to call later</li>
<li>EventListener: need to grab a single method eagerly, or convert an incoming JS function into a wrapper around that method. Only one function/method so it's kind of nicer if you don't have to specify the method name.</li>
<li>Observable, maybe: need to grab methods to call later, or convert an incoming JS function into a wrapper around one of the specific method.</li>
</ul>
</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Fri Nov 10 2023 02:18:31 GMT-0800 (Pacific Standard Time)">10:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">Unifying streams &amp; EventListener &amp; observable-maybe seems doable, with minor tradeoffs in syntax that make one case nicer than others.</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Fri Nov 10 2023 02:19:18 GMT-0800 (Pacific Standard Time)">10:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">Custom elements is probably too wacky, although you might want to design both at once and share as much infrastructure &amp; syntax as possible.</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Fri Nov 10 2023 02:19:57 GMT-0800 (Pacific Standard Time)">10:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@domenicdenicola:matrix.org">Domenic</span>&gt;</div></td><td class="msg-cell">Oh right, what do worklets need... I think they're the same as custom elements?</td></tr>

</tbody></table></div></div></div>
</body></html>