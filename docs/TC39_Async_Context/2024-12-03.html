<!DOCTYPE html><html><head>
  <title>TC39 Async Context on 2024-12-03</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "TC39 Async Context";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">TC39 Async Context<br>2024-12-03<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2024-12-02" class="nav-link"><span>prev</span></a>
<a href="2024-12-09" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search TC39 Async Context">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Dec 03 2024 04:49:19 GMT-0800 (Pacific Standard Time)">12:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@stephenbelanger:matrix.org">Stephen Belanger</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> In Node.js I still see significant usage of <code>.run</code>, even if there is <code>.enterWith</code> (!!! this is not backed up by data, just by me looking at <code>.enterWith</code> usage patterns a month ago)</blockquote></mx-reply>Because the original design of enterWith was quite broken. It’s better at this point, but still not recommended unless you know what you’re doing because it doesn’t work quite the way people seem to expect in some cases.</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Dec 03 2024 07:27:21 GMT-0800 (Pacific Standard Time)">15:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@jasnell:matrix.org">James M Snell</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Because the original design of enterWith was quite broken. It’s better at this point, but still not recommended unless you know what you’re doing because it doesn’t work quite the way people seem to expect in some cases.</blockquote></mx-reply>In nearly every case where I've seen <code>enterWith(...)</code> used it really wasn't necessary. A <code>.run(...)</code> would have worked just as well. It's one of those things that folks will use because it's available not really because it is the best tool for the job</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Dec 03 2024 14:45:45 GMT-0800 (Pacific Standard Time)">22:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@stephenbelanger:matrix.org">Stephen Belanger</span>&gt;</div></td><td class="msg-cell">It’s necessary for APMs, unless they have a sufficient diagnostics_channel with runStores to provide a scope. At the time of its creation we needed it to be able to put http requests into a tracing scope without a closure that we could not provide without patching. It mainly existed to avoid costly closures which were a major performance cost to APMs which gave them non-viable overhead for a lot of customers. As async/await became more of a thing though their value resurged—async/await syntax really needs set semantics for context storage to play nice with it.</td></tr>

</tbody></table></div></div></div>
</body></html>