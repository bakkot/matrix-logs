<!doctype html>
<head>
  <title>#whatwg on 2020-05-24</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#whatwg<br>2020-05-24<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2020-05-23" class="nav-link"><span>prev</span></a>
<a href="2020-05-25" class="nav-link"><span style="float:right">next</span></a>
</div>
    
<div class="room-list-wrapper">Active:<br>
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/">WHATWG</a></li>
</ul>
</div>
<br>
<div class="room-list-wrapper">Historical:<br>
<ul class="room-list">
<li><a href="../irc-tc39/">#tc39</a></li>
<li><a href="../irc-tc39-delegates/">#tc39-delegates</a></li>
<li><a href="../irc-tc39-editor-group/">#tc39-editor-group</a></li>
<li><a href="../irc-whatwg/" class="current-room">#whatwg</a></li>
</ul>
</div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>
<input type="text" id="query" size=25 placeholder="Search #whatwg">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Sun May 24 2020 11:30:57 GMT-0700 (Pacific Daylight Time)">18:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</div></td><td class="msg-cell">Does a DocumentFragment contain a &quot;Document&quot; object?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Sun May 24 2020 11:33:06 GMT-0700 (Pacific Daylight Time)">18:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</div></td><td class="msg-cell">What I&#039;m trying find out is: if you have a script inside a template element, what&#039;s the script&#039;s &quot;parser document&quot;? The outer document? Or is there another parser created for the DocumentFragment, that parses the script element?</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Sun May 24 2020 11:59:03 GMT-0700 (Pacific Daylight Time)">18:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Great question...</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Sun May 24 2020 11:59:16 GMT-0700 (Pacific Daylight Time)">18:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">&lt;template&gt;s all share a separate no-browsing context document</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Sun May 24 2020 11:59:22 GMT-0700 (Pacific Daylight Time)">18:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">But I think the parser still operates on the main document... let&#039;s see...</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Sun May 24 2020 12:00:01 GMT-0700 (Pacific Daylight Time)">19:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Ah, &quot;Set the element&#039;s parser document to the Document&quot;, not a lot of precision there... :-/</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Sun May 24 2020 12:02:50 GMT-0700 (Pacific Daylight Time)">19:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">domfarolino: My read of the spec is that the parser document is the outer document. All the handling of the template contents and template contents owner document seems to happen at insertion (in <a href="https://html.spec.whatwg.org/#appropriate-place-for-inserting-a-node">https://html.spec.whatwg.org/#appropriate-place-for-inserting-a-node</a>), whereas setting the &quot;parser document&quot; seems to happen at element creation.</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Sun May 24 2020 12:03:35 GMT-0700 (Pacific Daylight Time)">19:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</div></td><td class="msg-cell">Domenic: <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1070667">https://bugs.chromium.org/p/chromium/issues/detail?id=1070667</a></td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Sun May 24 2020 12:03:53 GMT-0700 (Pacific Daylight Time)">19:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</div></td><td class="msg-cell">This bug seems to want to change what the parser document will be, if I&#039;m reading it correctly</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Sun May 24 2020 12:04:28 GMT-0700 (Pacific Daylight Time)">19:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Hmm hmm</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Sun May 24 2020 12:04:42 GMT-0700 (Pacific Daylight Time)">19:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</div></td><td class="msg-cell">&gt; My read of the spec is that the parser document is the outer document.</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Sun May 24 2020 12:04:42 GMT-0700 (Pacific Daylight Time)">19:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</div></td><td class="msg-cell">I agree, that&#039;s how the spec reads currently it seems</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Sun May 24 2020 12:05:26 GMT-0700 (Pacific Daylight Time)">19:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</div></td><td class="msg-cell">Yeah, Chrome seems to have this OwnerDocumentForCurrentNode() retargeting mechanism that mason seems at least interested in introducing to the spec (though no issues about it are filed under his name)</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Sun May 24 2020 12:05:46 GMT-0700 (Pacific Daylight Time)">19:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">I&#039;d be curious to see what tests say about cross-browser behavior here, both for the case he&#039;s mentioning, and the script case.</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Sun May 24 2020 12:06:23 GMT-0700 (Pacific Daylight Time)">19:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">My guess (not digging in too deeply) is that for the case he&#039;s mentioning Chrome is correct, and any other behavior would be bad. So the spec needs updating. But the implications of that for the script case might not be correct.</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Sun May 24 2020 12:07:11 GMT-0700 (Pacific Daylight Time)">19:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Hmm, maybe not though, he might be wrong</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Sun May 24 2020 12:07:27 GMT-0700 (Pacific Daylight Time)">19:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">I think in particular if we changed it in the way he suggests then custom elements would not work inside &lt;template&gt;s</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Sun May 24 2020 12:07:36 GMT-0700 (Pacific Daylight Time)">19:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Hmm which is maybe... correct? Weekend brain...</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Sun May 24 2020 12:10:50 GMT-0700 (Pacific Daylight Time)">19:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</div></td><td class="msg-cell">(brb code searching to try and figure out the exact implications on scripts that move documents)</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Sun May 24 2020 12:35:26 GMT-0700 (Pacific Daylight Time)">19:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</div></td><td class="msg-cell">Domenic: OK, I don&#039;t believe there&#039;s any consequence to scripts moved from templates =&gt; outer doc. When #prepare-a-script is initially entered for those scripts, they&#039;re not run because they&#039;re not connected. So #prepare-a-script returns early, removing the &quot;parser document&quot; from the script. Later when the script becomes connected, the &quot;parser document&quot; is never consulted in #prepare, because it is null</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Sun May 24 2020 12:36:05 GMT-0700 (Pacific Daylight Time)">19:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Nice, that makes sense to me</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Sun May 24 2020 12:36:34 GMT-0700 (Pacific Daylight Time)">19:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</div></td><td class="msg-cell">As an aside, I have a CL a brewing for the tests Chrome fails in <a href="https://wpt.fyi/results/html/semantics/scripting-1/the-script-element/moving-between-documents?label=experimental&amp;label=master&amp;aligned">https://wpt.fyi/results/html/semantics/scripting-1/the-script-element/moving-between-documents?label=experimental&amp;label=master&amp;aligned</a></td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Sun May 24 2020 12:38:04 GMT-0700 (Pacific Daylight Time)">19:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Oh sweet</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Sun May 24 2020 15:07:10 GMT-0700 (Pacific Daylight Time)">22:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title=alystair@irc>alystair</span>&gt;</div></td><td class="msg-cell">Why does insertAdjacentElement return the resulting element, yet insertAdjacentHTML doesn&#039;t have a return value? Sensibly it should return a NodeList. Has this ever been discussed?</td></tr>

</tbody></table></div></div></div></body>
