<!doctype html>
<head>
  <title>#whatwg on 2015-04-06</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#whatwg<br>2015-04-06<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2015-04-05" class="nav-link"><span>prev</span></a>
<a href="2015-04-07" class="nav-link"><span style="float:right">next</span></a>
</div>
    
<div class="room-list-wrapper">Active:<br>
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/">WHATWG</a></li>
</ul>
</div>
<br>
<div class="room-list-wrapper">Historical:<br>
<ul class="room-list">
<li><a href="../irc-tc39/">#tc39</a></li>
<li><a href="../irc-tc39-delegates/">#tc39-delegates</a></li>
<li><a href="../irc-tc39-editor-group/">#tc39-editor-group</a></li>
<li><a href="../irc-whatwg/" class="current-room">#whatwg</a></li>
</ul>
</div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>
<input type="text" id="query" size=25 placeholder="Search #whatwg">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Sun Apr 05 2015 23:44:39 GMT-0700 (Pacific Daylight Time)">06:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: is it not inconvenient that the Cache API does not allow things like .match(url, {headers:{x:&quot;y&quot;}})?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Mon Apr 06 2015 00:29:06 GMT-0700 (Pacific Daylight Time)">07:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: wanderview: was it considered to allow more than http/https URLs in caches?</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Mon Apr 06 2015 00:36:52 GMT-0700 (Pacific Daylight Time)">07:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">annevk: that stuff can be added. What use cases are you thinking? Are those matching request or response headers?</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Mon Apr 06 2015 00:37:39 GMT-0700 (Pacific Daylight Time)">07:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: I mean constructing Request objects in the same way that fetch() allows for</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Mon Apr 06 2015 00:37:45 GMT-0700 (Pacific Daylight Time)">07:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">annevk: nah, it follows http caching rules so it&#039;s pretty restricted to http</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Mon Apr 06 2015 00:38:26 GMT-0700 (Pacific Daylight Time)">07:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: it doesn&#039;t really follow HTTP cache rules</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Mon Apr 06 2015 00:38:33 GMT-0700 (Pacific Daylight Time)">07:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: perhaps HTTP cache matching rules</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Mon Apr 06 2015 00:39:17 GMT-0700 (Pacific Daylight Time)">07:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: but we use HTTP headers and such for other schemes too, and if we allowed other schemes you could more easily abuse it as a key/value store</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Mon Apr 06 2015 00:39:18 GMT-0700 (Pacific Daylight Time)">07:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">annevk: Ohh, so the API would be .match(url, requestOpt, queryOpts)?</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Mon Apr 06 2015 00:39:37 GMT-0700 (Pacific Daylight Time)">07:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: yeah, I was wondering why that wasn&#039;t done</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Mon Apr 06 2015 00:40:05 GMT-0700 (Pacific Daylight Time)">07:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">Having to include an empty object just to get at the query options sounds bad</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Mon Apr 06 2015 00:41:20 GMT-0700 (Pacific Daylight Time)">07:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">I guess it doesn&#039;t matter so much here to have an easy way to construct a Request object</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Mon Apr 06 2015 00:41:58 GMT-0700 (Pacific Daylight Time)">07:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">annevk: if there&#039;s a way to add non-http in there, I&#039;m cool with it. The way caching is designed is to ensure every item in the cache is matchable</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Mon Apr 06 2015 00:43:13 GMT-0700 (Pacific Daylight Time)">07:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">Other than http/https, what were you thinking?</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Mon Apr 06 2015 00:44:35 GMT-0700 (Pacific Daylight Time)">07:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">I was initially thinking everything, but that doesn&#039;t work well. So maybe something like cachekey URLs (cachekey:item1)... Anyway, later seems fine</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Mon Apr 06 2015 00:46:12 GMT-0700 (Pacific Daylight Time)">07:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">What might also be cool is having a way to refer to Cache API objects from content without having to go through a service worker, but that might be harder for objects that require more than a URL to match on</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Mon Apr 06 2015 00:47:02 GMT-0700 (Pacific Daylight Time)">07:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Or maybe it could be something like &lt;script src=url from=cache&gt;</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Mon Apr 06 2015 00:48:07 GMT-0700 (Pacific Daylight Time)">07:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">But that&#039;s also awfully similar to the static routes stuff so I&#039;ll stop brainstorming now :-)</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Mon Apr 06 2015 01:35:12 GMT-0700 (Pacific Daylight Time)">08:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">annevk: what about allowing URL.createObjectURL to take a response object? It&#039;d need to consume the stream potentially into memory through</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Mon Apr 06 2015 01:36:15 GMT-0700 (Pacific Daylight Time)">08:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">Hmm, going off that idea already</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Mon Apr 06 2015 01:37:32 GMT-0700 (Pacific Daylight Time)">08:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">Maybe createCallbackURL(func), which returns a url, and when that url is loaded it calls the callback which returns a promise for a response</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Mon Apr 06 2015 01:38:21 GMT-0700 (Pacific Daylight Time)">08:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">That callback could be _=&gt; caches.match(&quot;/whatever&quot;)</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Mon Apr 06 2015 01:39:43 GMT-0700 (Pacific Daylight Time)">08:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">But you could also create your own stream</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Mon Apr 06 2015 02:24:57 GMT-0700 (Pacific Daylight Time)">09:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: either a one-time Response -&gt; URL mapping or supporting Response objects for all possible networking features makes a lot of sense to me</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Mon Apr 06 2015 02:26:12 GMT-0700 (Pacific Daylight Time)">09:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: from past experience I&#039;d prefer starting out with &lt;img&gt;.objectSrc = response over &lt;img&gt;.src = createURLFrom(response) given that the latter has all kinds of warts</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Mon Apr 06 2015 02:26:22 GMT-0700 (Pacific Daylight Time)">09:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: but the latter is more portable...</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Mon Apr 06 2015 02:28:46 GMT-0700 (Pacific Daylight Time)">09:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: and the latter could probably work fine since you just acquire a lock on the stream meaning subsequent use would fail anyway</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Mon Apr 06 2015 02:34:01 GMT-0700 (Pacific Daylight Time)">09:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">I wonder what zewt thinks about introducing URLs for Response objects with the same guarantees as blob URLs (except reuse not being possible at all). I&#039;m kind of warming up to the idea since it would be much simpler to roll out across existing features...</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Mon Apr 06 2015 03:08:25 GMT-0700 (Pacific Daylight Time)">10:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Ooh exciting, it seems we can let sites control User-Agent soonish :-)</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Mon Apr 06 2015 03:38:01 GMT-0700 (Pacific Daylight Time)">10:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: JakeA: Krinkle|detached: I came up with some better terminology for this whole storage thing: <a href="https://etherpad.mozilla.org/storage">https://etherpad.mozilla.org/storage</a></td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Mon Apr 06 2015 03:38:16 GMT-0700 (Pacific Daylight Time)">10:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: JakeA: Krinkle|detached: will likely update the wiki later</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Mon Apr 06 2015 03:45:23 GMT-0700 (Pacific Daylight Time)">10:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">annevk: the benefit of a callback is it&#039;d vend a new response each time, so it can be used more than once. But if that&#039;s not useful, it isn&#039;t needed</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Mon Apr 06 2015 03:49:33 GMT-0700 (Pacific Daylight Time)">10:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: it does seem like it might be more convenient not to have to .then() to get hold of the Response...</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Mon Apr 06 2015 03:50:36 GMT-0700 (Pacific Daylight Time)">10:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">So you get code akin to &lt;img&gt;.src = toURL(fetch(...))</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Mon Apr 06 2015 04:03:11 GMT-0700 (Pacific Daylight Time)">11:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">The only weird thing with that is that you invoke all of Fetch twice, once for the URL inside fetch(), and once for the URL returned by toURL()...</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Mon Apr 06 2015 04:38:11 GMT-0700 (Pacific Daylight Time)">11:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">would be great if somebody could post a status report of some kind for the Service Workers specーwhere things are at, what the major remaining issues are</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Mon Apr 06 2015 04:39:03 GMT-0700 (Pacific Daylight Time)">11:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">the traffic on the SW issues tracker is a lot to try to keep up with, and the volume of open issues is pretty high</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Mon Apr 06 2015 04:45:58 GMT-0700 (Pacific Daylight Time)">11:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">MikeSmith: I think it&#039;s mostly just cleaning up</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Mon Apr 06 2015 04:46:24 GMT-0700 (Pacific Daylight Time)">11:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">MikeSmith: we don&#039;t have specification blockers for implementing anyway</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Mon Apr 06 2015 04:48:03 GMT-0700 (Pacific Daylight Time)">11:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">annevk: ok</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Mon Apr 06 2015 04:49:09 GMT-0700 (Pacific Daylight Time)">11:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">I&#039;d volunteer to try to write something up myself based on what I&#039;ve managed to keep up with from the discussions but I don&#039;t reckon I&#039;d do a great job of it</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Mon Apr 06 2015 04:49:54 GMT-0700 (Pacific Daylight Time)">11:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">in other news <a href="https://github.com/whatwg/fetch/issues/27">https://github.com/whatwg/fetch/issues/27</a> is epic</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Mon Apr 06 2015 04:51:03 GMT-0700 (Pacific Daylight Time)">11:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">and I wonder how long that guy will keep on at <a href="https://github.com/whatwg/fetch/issues/28">https://github.com/whatwg/fetch/issues/28</a></td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Mon Apr 06 2015 04:51:25 GMT-0700 (Pacific Daylight Time)">11:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">MikeSmith: so yeah, if you count fetch() as part of service workers I&#039;d mention that as something we need to address</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Mon Apr 06 2015 04:52:15 GMT-0700 (Pacific Daylight Time)">11:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">MikeSmith: but I still think that can be additive, and JakeA and Domenic seem to agree</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Mon Apr 06 2015 04:52:16 GMT-0700 (Pacific Daylight Time)">11:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">annevk: well it seems like the dependency should count</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Mon Apr 06 2015 04:52:21 GMT-0700 (Pacific Daylight Time)">11:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">ok</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Mon Apr 06 2015 04:54:29 GMT-0700 (Pacific Daylight Time)">11:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">on another meta-note I wonder how many people are paying attention to the discussions</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Mon Apr 06 2015 04:55:20 GMT-0700 (Pacific Daylight Time)">11:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">looking at <a href="https://github.com/whatwg/fetch/issues/27">https://github.com/whatwg/fetch/issues/27</a> I see in all that traffic over the last week or whatever it&#039;s been, there&#039;s just 14 people who have commented</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Mon Apr 06 2015 04:55:33 GMT-0700 (Pacific Daylight Time)">11:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">or maybe that&#039;s relatively a lot of commentors, I dunno</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Mon Apr 06 2015 04:56:48 GMT-0700 (Pacific Daylight Time)">11:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">but even then there&#039;s only 32 people watching the fetch repo and reckon quite a few of the people watching don&#039;t actually read a lot of the messages</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Mon Apr 06 2015 04:59:11 GMT-0700 (Pacific Daylight Time)">11:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">anyway, that&#039;s sorta why I suggested some occasional summaries would be nice to haveーto give others a heads-up about what&#039;s being discussed and why they should care</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Mon Apr 06 2015 05:35:20 GMT-0700 (Pacific Daylight Time)">12:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">MikeSmith: there&#039;s not a lot of signal in that thread</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Mon Apr 06 2015 05:35:45 GMT-0700 (Pacific Daylight Time)">12:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">MikeSmith: the gist is still that we don&#039;t really know how we want to do cancelation</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Mon Apr 06 2015 05:35:55 GMT-0700 (Pacific Daylight Time)">12:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">annevk: OK, it&#039;s good to know that at least</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Mon Apr 06 2015 05:36:07 GMT-0700 (Pacific Daylight Time)">12:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">I thought I must be missing something</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Mon Apr 06 2015 05:58:58 GMT-0700 (Pacific Daylight Time)">12:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">MikeSmith: I&#039;m happy to help btw if anything is unclear</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Mon Apr 06 2015 05:59:11 GMT-0700 (Pacific Daylight Time)">12:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">MikeSmith: but afaict some v1 of all these features is being shipped by vendors</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Mon Apr 06 2015 06:00:00 GMT-0700 (Pacific Daylight Time)">13:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">MikeSmith: just a bit unclear how to summarize all the minutiae</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Mon Apr 06 2015 06:01:49 GMT-0700 (Pacific Daylight Time)">13:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">annevk: MikeSmith: there&#039;s been some progress at <a href="https://gist.github.com/jakearchibald/9a24f3c06f06b9c06a1e">https://gist.github.com/jakearchibald/9a24f3c06f06b9c06a1e</a></td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Mon Apr 06 2015 06:02:44 GMT-0700 (Pacific Daylight Time)">13:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">annevk: occasional stuff like <a href="https://annevankesteren.nl/2015/02/cancelable-promises">https://annevankesteren.nl/2015/02/cancelable-promises</a> is nice</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Mon Apr 06 2015 06:02:59 GMT-0700 (Pacific Daylight Time)">13:02</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span></div></td><td class="msg-cell">looks at <a href="https://gist.github.com/jakearchibald/9a24f3c06f06b9c06a1e">https://gist.github.com/jakearchibald/9a24f3c06f06b9c06a1e</a></td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Mon Apr 06 2015 06:03:21 GMT-0700 (Pacific Daylight Time)">13:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">serendipity :-)</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Mon Apr 06 2015 06:04:39 GMT-0700 (Pacific Daylight Time)">13:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">MikeSmith: that&#039;s effectively still where we are at :-)</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Mon Apr 06 2015 06:04:43 GMT-0700 (Pacific Daylight Time)">13:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">JakeA: nice</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Mon Apr 06 2015 06:05:03 GMT-0700 (Pacific Daylight Time)">13:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">(at a summary level, anyway, JakeA is making progress)</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Mon Apr 06 2015 06:05:41 GMT-0700 (Pacific Daylight Time)">13:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">MikeSmith: the bit I&#039;m most worried about is the &quot;gotcha&quot; bit, but maybe Domenic can find something under the hood that makes it not a problem (I couldn&#039;t quite get my head around the spec)</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Mon Apr 06 2015 06:05:49 GMT-0700 (Pacific Daylight Time)">13:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">Next step is to build a prototype</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Mon Apr 06 2015 06:05:54 GMT-0700 (Pacific Daylight Time)">13:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">annevk: yeah <a href="https://gist.github.com/jakearchibald/9a24f3c06f06b9c06a1e">https://gist.github.com/jakearchibald/9a24f3c06f06b9c06a1e</a> seems somewhere beyond where it was at at the time you wrote that blog post</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Mon Apr 06 2015 06:06:24 GMT-0700 (Pacific Daylight Time)">13:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">JakeA: you mean the resolved-but-unsettled promises part?</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Mon Apr 06 2015 06:06:31 GMT-0700 (Pacific Daylight Time)">13:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">yeah</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Mon Apr 06 2015 06:09:02 GMT-0700 (Pacific Daylight Time)">13:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">I see Domenic didn&#039;t respond about that part yet</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Mon Apr 06 2015 06:09:19 GMT-0700 (Pacific Daylight Time)">13:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">man this stuff is hairy</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Mon Apr 06 2015 06:09:19 GMT-0700 (Pacific Daylight Time)">13:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">MikeSmith: I only made those edits a couple of days ago</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Mon Apr 06 2015 06:09:23 GMT-0700 (Pacific Daylight Time)">13:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">ah ok</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Mon Apr 06 2015 07:02:31 GMT-0700 (Pacific Daylight Time)">14:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: JakeA: we would have some implementation headaches if we allow &quot;non-standard&quot; schemes in Cache...  gecko&#039;s requirement to do full url parsing on the main thread is a major pain</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Mon Apr 06 2015 07:02:39 GMT-0700 (Pacific Daylight Time)">14:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">I get around that by leaning on the http/https only requirement</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Mon Apr 06 2015 07:03:38 GMT-0700 (Pacific Daylight Time)">14:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">we only check the request url, though... so a SW could always load from some other URL scheme and then manually cache.put() it in with an http request</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Mon Apr 06 2015 07:12:31 GMT-0700 (Pacific Daylight Time)">14:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: JakeA: it seems referring to resources in a Cache directly from static content would need something extra logic to try to fetch if not present in cache...  basically what http cache does today, but it ends up in a named Cache object</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Mon Apr 06 2015 07:21:19 GMT-0700 (Pacific Daylight Time)">14:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: yeah, I think that&#039;s why I prefer URLs from Response objects and leave that use case to &quot;static routing&quot;</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Mon Apr 06 2015 07:21:39 GMT-0700 (Pacific Daylight Time)">14:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: as for non-standard schemes, we could just allow for one to keep things straightforward</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Mon Apr 06 2015 07:21:42 GMT-0700 (Pacific Daylight Time)">14:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: I guess I didn&#039;t understand the Response URL thing</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Mon Apr 06 2015 07:21:56 GMT-0700 (Pacific Daylight Time)">14:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">oh, you mean like a URL that says &quot;load this from a Cache&quot;?</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Mon Apr 06 2015 07:24:06 GMT-0700 (Pacific Daylight Time)">14:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: a URL that says read this from this Response</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Mon Apr 06 2015 07:24:35 GMT-0700 (Pacific Daylight Time)">14:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: oh, so I still have to have js in the loop... I thought you were trying to allow the page to load from Cache without js</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Mon Apr 06 2015 07:25:40 GMT-0700 (Pacific Daylight Time)">14:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: but yea, the Response URL could be nice for non-SW stuff... I could see things like firefoxos photo gallery using that, etc</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Mon Apr 06 2015 07:25:50 GMT-0700 (Pacific Daylight Time)">14:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">although they&#039;ve implemented it all as blobs in IDB right now</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Mon Apr 06 2015 07:26:05 GMT-0700 (Pacific Daylight Time)">14:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</div></td><td class="msg-cell">Fun</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Mon Apr 06 2015 07:26:30 GMT-0700 (Pacific Daylight Time)">14:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</div></td><td class="msg-cell">importScripts says &quot;Resolve&lt;#resolve-a-url&gt; each argument.&quot;</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Mon Apr 06 2015 07:26:42 GMT-0700 (Pacific Daylight Time)">14:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</div></td><td class="msg-cell">#resolve-a-url says &quot;let base be the element&#039;s base URL.&quot;</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Mon Apr 06 2015 07:27:06 GMT-0700 (Pacific Daylight Time)">14:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: yeah the without JavaScript use case is probably best done using static routes for service workers, something we never ended up specifying since we didn&#039;t know what the perf hit of service workers was going to be in the first place</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Mon Apr 06 2015 07:29:19 GMT-0700 (Pacific Daylight Time)">14:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: it seems now that Cache is on window we don&#039;t really need the SW to run in the non-js world...  maybe I don&#039;t understand what you mean by &quot;static routes for service workers&quot;</td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Mon Apr 06 2015 07:31:31 GMT-0700 (Pacific Daylight Time)">14:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: well unless you want to change how you load images (and you might, and for that we have the URL for Response object idea), I&#039;m not sure that Cache available from window will help</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Mon Apr 06 2015 07:31:59 GMT-0700 (Pacific Daylight Time)">14:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">well... images are a special case it seems</td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Mon Apr 06 2015 07:46:33 GMT-0700 (Pacific Daylight Time)">14:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Ms2ger: file a bug?</td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Mon Apr 06 2015 07:46:44 GMT-0700 (Pacific Daylight Time)">14:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</div></td><td class="msg-cell"><a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=28411">https://www.w3.org/Bugs/Public/show_bug.cgi?id=28411</a></td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Mon Apr 06 2015 07:50:14 GMT-0700 (Pacific Daylight Time)">14:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">annevk: gotta appreciate the humor of <a href="http://www.w3.org/mid/4q03ia5cpqt5m0q867fffniqd6ma20f7qs⊙hbhd">http://www.w3.org/mid/4q03ia5cpqt5m0q867fffniqd6ma20f7qs⊙hbhd</a></td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Mon Apr 06 2015 07:51:28 GMT-0700 (Pacific Daylight Time)">14:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">or at least I assume he was sorta trying to be humorous there (by not directly pointing out that you were the one he was quoting)</td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Mon Apr 06 2015 07:51:43 GMT-0700 (Pacific Daylight Time)">14:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">MikeSmith: I was about to own up to my past mistake for not addressing the problem until I found sicking&#039;s reply and remembered that being the reason</td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Mon Apr 06 2015 07:52:11 GMT-0700 (Pacific Daylight Time)">14:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">MikeSmith: it was kind of funny I guess, but not super helpful</td></tr>
  <tr class="msg" id="L100"><td class="ts-cell"><a class="ts" href="#L100" alt="Mon Apr 06 2015 07:52:21 GMT-0700 (Pacific Daylight Time)">14:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">yeah saw your reply after that</td></tr>
  <tr class="msg" id="L101"><td class="ts-cell"><a class="ts" href="#L101" alt="Mon Apr 06 2015 07:54:04 GMT-0700 (Pacific Daylight Time)">14:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">yeah, not helpful and not sure he actually meant it to be good-naturedly funny instead of just obnoxious</td></tr>
  <tr class="msg" id="L102"><td class="ts-cell"><a class="ts" href="#L102" alt="Mon Apr 06 2015 07:55:20 GMT-0700 (Pacific Daylight Time)">14:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">anyway, I think I&#039;ll take a break for now from pushing my e-mail inbox boulder up the hill, and go to the sento</td></tr>
  <tr class="msg" id="L103"><td class="ts-cell"><a class="ts" href="#L103" alt="Mon Apr 06 2015 08:04:39 GMT-0700 (Pacific Daylight Time)">15:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">nice</td></tr>
  <tr class="msg" id="L104"><td class="ts-cell"><a class="ts" href="#L104" alt="Mon Apr 06 2015 09:56:30 GMT-0700 (Pacific Daylight Time)">16:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I thought you didn&#039;t like magic in your APIs :-)</td></tr>
  <tr class="msg" id="L105"><td class="ts-cell"><a class="ts" href="#L105" alt="Mon Apr 06 2015 10:26:57 GMT-0700 (Pacific Daylight Time)">17:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: not sure what&#039;s magical here... a Request/Response can do exactly three things: be written to disk (cache), be written socket (upload), or be read from by script.</td></tr>
  <tr class="msg" id="L106"><td class="ts-cell"><a class="ts" href="#L106" alt="Mon Apr 06 2015 10:27:24 GMT-0700 (Pacific Daylight Time)">17:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">I guess now we need to figure out what the APIs are for writing to cache and uploading</td></tr>
  <tr class="msg" id="L107"><td class="ts-cell"><a class="ts" href="#L107" alt="Mon Apr 06 2015 10:28:42 GMT-0700 (Pacific Daylight Time)">17:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I want to understand more why we need to expose the underlying writer for fetch and cache... I mean, are there reasons beyond progress?</td></tr>
  <tr class="msg" id="L108"><td class="ts-cell"><a class="ts" href="#L108" alt="Mon Apr 06 2015 10:28:59 GMT-0700 (Pacific Daylight Time)">17:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: did you see my reply?</td></tr>
  <tr class="msg" id="L109"><td class="ts-cell"><a class="ts" href="#L109" alt="Mon Apr 06 2015 10:29:21 GMT-0700 (Pacific Daylight Time)">17:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I&#039;m also curious if browsers today report progress for &quot;bytes actually written on tcp connection&quot;...</td></tr>
  <tr class="msg" id="L110"><td class="ts-cell"><a class="ts" href="#L110" alt="Mon Apr 06 2015 10:31:04 GMT-0700 (Pacific Daylight Time)">17:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: implementing that requires a lot more IPC traffic vs just &quot;progress based on stuff read from the buffer&quot;</td></tr>
  <tr class="msg" id="L111"><td class="ts-cell"><a class="ts" href="#L111" alt="Mon Apr 06 2015 10:31:41 GMT-0700 (Pacific Daylight Time)">17:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: maybe I&#039;m too Node-influenced... but there, write(chunk, cb) will only call cb when the OS has accepted the chunk</td></tr>
  <tr class="msg" id="L112"><td class="ts-cell"><a class="ts" href="#L112" alt="Mon Apr 06 2015 10:31:51 GMT-0700 (Pacific Daylight Time)">17:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">that&#039;s important for program guarantees</td></tr>
  <tr class="msg" id="L113"><td class="ts-cell"><a class="ts" href="#L113" alt="Mon Apr 06 2015 10:32:08 GMT-0700 (Pacific Daylight Time)">17:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">E.g. where you need to re-try from if there&#039;s a failure</td></tr>
  <tr class="msg" id="L114"><td class="ts-cell"><a class="ts" href="#L114" alt="Mon Apr 06 2015 10:32:39 GMT-0700 (Pacific Daylight Time)">17:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I think that is harder to guarantee in multi-process architectures where networking is actually done in a separate process... it also doesn&#039;t really make any guarantee about it reaching the server</td></tr>
  <tr class="msg" id="L115"><td class="ts-cell"><a class="ts" href="#L115" alt="Mon Apr 06 2015 10:32:41 GMT-0700 (Pacific Daylight Time)">17:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">or if you&#039;re sending important messages to a server, it helps you maintain invariants</td></tr>
  <tr class="msg" id="L116"><td class="ts-cell"><a class="ts" href="#L116" alt="Mon Apr 06 2015 10:32:48 GMT-0700 (Pacific Daylight Time)">17:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=terinjokes@irc>terinjokes</span>&gt;</div></td><td class="msg-cell">Domenic: well, that still doesn&#039;t give complete guarantees that the receiving end got it</td></tr>
  <tr class="msg" id="L117"><td class="ts-cell"><a class="ts" href="#L117" alt="Mon Apr 06 2015 10:32:52 GMT-0700 (Pacific Daylight Time)">17:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">sure</td></tr>
  <tr class="msg" id="L118"><td class="ts-cell"><a class="ts" href="#L118" alt="Mon Apr 06 2015 10:32:54 GMT-0700 (Pacific Daylight Time)">17:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">just helps</td></tr>
  <tr class="msg" id="L119"><td class="ts-cell"><a class="ts" href="#L119" alt="Mon Apr 06 2015 10:33:17 GMT-0700 (Pacific Daylight Time)">17:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">e.g. you would base your UI off of it, but you would still validate on the server</td></tr>
  <tr class="msg" id="L120"><td class="ts-cell"><a class="ts" href="#L120" alt="Mon Apr 06 2015 10:33:35 GMT-0700 (Pacific Daylight Time)">17:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I guess I&#039;m curious what we do today... I would be surprised if gecko provided this kind of progress now... no idea what chrome does</td></tr>
  <tr class="msg" id="L121"><td class="ts-cell"><a class="ts" href="#L121" alt="Mon Apr 06 2015 10:33:59 GMT-0700 (Pacific Daylight Time)">17:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: yeah, maybe we just say that this is not information we think is important to expose to web platform authors?</td></tr>
  <tr class="msg" id="L122"><td class="ts-cell"><a class="ts" href="#L122" alt="Mon Apr 06 2015 10:34:21 GMT-0700 (Pacific Daylight Time)">17:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">i mean, not doing it today isn&#039;t necessarily an argument against it. but on the other hand i haven&#039;t heard people agitating for it.</td></tr>
  <tr class="msg" id="L123"><td class="ts-cell"><a class="ts" href="#L123" alt="Mon Apr 06 2015 10:35:10 GMT-0700 (Pacific Daylight Time)">17:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I&#039;ve asked in our network channel... no responses yet</td></tr>
  <tr class="msg" id="L124"><td class="ts-cell"><a class="ts" href="#L124" alt="Mon Apr 06 2015 10:36:30 GMT-0700 (Pacific Daylight Time)">17:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Fetch/XHR spec is a bit ambiguous... it says &quot;Whenever one or more bytes are transmitted&quot; ... do a bunch of steps then eventually fire a progress event</td></tr>
  <tr class="msg" id="L125"><td class="ts-cell"><a class="ts" href="#L125" alt="Mon Apr 06 2015 10:37:03 GMT-0700 (Pacific Daylight Time)">17:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Not sure if &quot;transmitted&quot; here means &quot;transmitted to the OS&quot; or...</td></tr>
  <tr class="msg" id="L126"><td class="ts-cell"><a class="ts" href="#L126" alt="Mon Apr 06 2015 10:37:26 GMT-0700 (Pacific Daylight Time)">17:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">probably read from socket or sent to socket</td></tr>
  <tr class="msg" id="L127"><td class="ts-cell"><a class="ts" href="#L127" alt="Mon Apr 06 2015 10:37:48 GMT-0700 (Pacific Daylight Time)">17:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">no, sent to socket wouldn&#039;t make sense for upload progress</td></tr>
  <tr class="msg" id="L128"><td class="ts-cell"><a class="ts" href="#L128" alt="Mon Apr 06 2015 10:38:45 GMT-0700 (Pacific Daylight Time)">17:38</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-12" title=wanderview@irc>wanderview</span></div></td><td class="msg-cell">is annoyed we have two XHR classes.</td></tr>
  <tr class="msg" id="L129"><td class="ts-cell"><a class="ts" href="#L129" alt="Mon Apr 06 2015 10:38:52 GMT-0700 (Pacific Daylight Time)">17:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Gecko does?</td></tr>
  <tr class="msg" id="L130"><td class="ts-cell"><a class="ts" href="#L130" alt="Mon Apr 06 2015 10:39:26 GMT-0700 (Pacific Daylight Time)">17:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: yea, one for main thread and one for workers</td></tr>
  <tr class="msg" id="L131"><td class="ts-cell"><a class="ts" href="#L131" alt="Mon Apr 06 2015 10:39:46 GMT-0700 (Pacific Daylight Time)">17:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Good times.</td></tr>
  <tr class="msg" id="L132"><td class="ts-cell"><a class="ts" href="#L132" alt="Mon Apr 06 2015 10:40:39 GMT-0700 (Pacific Daylight Time)">17:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: does XHR provide upload progress?  the code I am looking at mainly seems to do download progress</td></tr>
  <tr class="msg" id="L133"><td class="ts-cell"><a class="ts" href="#L133" alt="Mon Apr 06 2015 10:40:53 GMT-0700 (Pacific Daylight Time)">17:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">oh, nm</td></tr>
  <tr class="msg" id="L134"><td class="ts-cell"><a class="ts" href="#L134" alt="Mon Apr 06 2015 10:40:57 GMT-0700 (Pacific Daylight Time)">17:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">sorry</td></tr>
  <tr class="msg" id="L135"><td class="ts-cell"><a class="ts" href="#L135" alt="Mon Apr 06 2015 10:43:11 GMT-0700 (Pacific Daylight Time)">17:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Domenic: Fetch accepts patches</td></tr>
  <tr class="msg" id="L136"><td class="ts-cell"><a class="ts" href="#L136" alt="Mon Apr 06 2015 10:43:39 GMT-0700 (Pacific Daylight Time)">17:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I stand correct, gecko&#039;s XHR reports progress on bytes pushed to the kernel</td></tr>
  <tr class="msg" id="L137"><td class="ts-cell"><a class="ts" href="#L137" alt="Mon Apr 06 2015 10:43:43 GMT-0700 (Pacific Daylight Time)">17:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">corrected</td></tr>
  <tr class="msg" id="L138"><td class="ts-cell"><a class="ts" href="#L138" alt="Mon Apr 06 2015 10:44:59 GMT-0700 (Pacific Daylight Time)">17:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">it&#039;s hard to tell what blink&#039;s does without opening an actual text editor, too hard to follow the didSendData() / dataSent() code paths through mxr --- but it&#039;s probably sent to kernel</td></tr>
  <tr class="msg" id="L139"><td class="ts-cell"><a class="ts" href="#L139" alt="Mon Apr 06 2015 10:46:07 GMT-0700 (Pacific Daylight Time)">17:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">its still a bit lame, though, since the kernel is going to buffer all but the largest uploads anyway</td></tr>
  <tr class="msg" id="L140"><td class="ts-cell"><a class="ts" href="#L140" alt="Mon Apr 06 2015 10:47:01 GMT-0700 (Pacific Daylight Time)">17:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">yeah, but it at least gives you a guarantee the socket is still alive, I assume</td></tr>
  <tr class="msg" id="L141"><td class="ts-cell"><a class="ts" href="#L141" alt="Mon Apr 06 2015 10:47:27 GMT-0700 (Pacific Daylight Time)">17:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">but it&#039;s not really &quot;upload progress&quot;</td></tr>
  <tr class="msg" id="L142"><td class="ts-cell"><a class="ts" href="#L142" alt="Mon Apr 06 2015 10:47:59 GMT-0700 (Pacific Daylight Time)">17:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">its admittedly better than &quot;bytes read in a child process in the browser&quot;, though</td></tr>
  <tr class="msg" id="L143"><td class="ts-cell"><a class="ts" href="#L143" alt="Mon Apr 06 2015 10:48:58 GMT-0700 (Pacific Daylight Time)">17:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">well I mean, from a developer pov, you probably expect upload progress to indicate the amount of data the recipient has received so far</td></tr>
  <tr class="msg" id="L144"><td class="ts-cell"><a class="ts" href="#L144" alt="Mon Apr 06 2015 10:49:14 GMT-0700 (Pacific Daylight Time)">17:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">which is harder</td></tr>
  <tr class="msg" id="L145"><td class="ts-cell"><a class="ts" href="#L145" alt="Mon Apr 06 2015 10:49:40 GMT-0700 (Pacific Daylight Time)">17:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">i dunno, maybe at first, but if you thought about that for a few seconds you&#039;d realize it makes no real sense</td></tr>
  <tr class="msg" id="L146"><td class="ts-cell"><a class="ts" href="#L146" alt="Mon Apr 06 2015 10:49:53 GMT-0700 (Pacific Daylight Time)">17:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">or does it ... TCP has ACKs...</td></tr>
  <tr class="msg" id="L147"><td class="ts-cell"><a class="ts" href="#L147" alt="Mon Apr 06 2015 10:49:55 GMT-0700 (Pacific Daylight Time)">17:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">it doesn&#039;t make any sense</td></tr>
  <tr class="msg" id="L148"><td class="ts-cell"><a class="ts" href="#L148" alt="Mon Apr 06 2015 10:50:26 GMT-0700 (Pacific Daylight Time)">17:50</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-1" title=Domenic@irc>Domenic</span></div></td><td class="msg-cell">plans more blog posts, this time on &quot;byte sinks&quot;</td></tr>
  <tr class="msg" id="L149"><td class="ts-cell"><a class="ts" href="#L149" alt="Mon Apr 06 2015 10:51:30 GMT-0700 (Pacific Daylight Time)">17:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">tangent: do TCP ACKs get exposed in syscalls at all?</td></tr>
  <tr class="msg" id="L150"><td class="ts-cell"><a class="ts" href="#L150" alt="Mon Apr 06 2015 10:51:54 GMT-0700 (Pacific Daylight Time)">17:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">not that we should try to expose those (at least not in a HTTP API), but now I&#039;m curious</td></tr>
  <tr class="msg" id="L151"><td class="ts-cell"><a class="ts" href="#L151" alt="Mon Apr 06 2015 10:52:10 GMT-0700 (Pacific Daylight Time)">17:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I think trying to return a promise for every chunk written in a stream is going to be pretty heavyweight from an impl point of view... thinking about what that would mean for my Cache implementation... its not just the cost of a promise... its the promise plus IPC traffic for each chunk... and a lot of added code complexity</td></tr>
  <tr class="msg" id="L152"><td class="ts-cell"><a class="ts" href="#L152" alt="Mon Apr 06 2015 10:52:16 GMT-0700 (Pacific Daylight Time)">17:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">well like</td></tr>
  <tr class="msg" id="L153"><td class="ts-cell"><a class="ts" href="#L153" alt="Mon Apr 06 2015 10:52:35 GMT-0700 (Pacific Daylight Time)">17:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">*looks at libc code :&gt;*</td></tr>
  <tr class="msg" id="L154"><td class="ts-cell"><a class="ts" href="#L154" alt="Mon Apr 06 2015 10:52:56 GMT-0700 (Pacific Daylight Time)">17:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I think you have to look at the window on the TCP stream</td></tr>
  <tr class="msg" id="L155"><td class="ts-cell"><a class="ts" href="#L155" alt="Mon Apr 06 2015 10:53:30 GMT-0700 (Pacific Daylight Time)">17:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: that&#039;s good implementer feedback I guess... although you&#039;re already doing that for XHR?</td></tr>
  <tr class="msg" id="L156"><td class="ts-cell"><a class="ts" href="#L156" alt="Mon Apr 06 2015 10:53:53 GMT-0700 (Pacific Daylight Time)">17:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: yes, for XHR... but not for Cache</td></tr>
  <tr class="msg" id="L157"><td class="ts-cell"><a class="ts" href="#L157" alt="Mon Apr 06 2015 10:54:39 GMT-0700 (Pacific Daylight Time)">17:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: i see... so you wouldn&#039;t be able to signal completion of a write to the filesystem? I mean libuv definitely does this, although they do use threads instead of processes, it&#039;s true.</td></tr>
  <tr class="msg" id="L158"><td class="ts-cell"><a class="ts" href="#L158" alt="Mon Apr 06 2015 10:54:45 GMT-0700 (Pacific Daylight Time)">17:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: on the flip side... being able to see stream progress would help let us resolve a cache.put() when headers are available, but then stream to disk in the background... stream progress could be observed to detect errors in body streaming</td></tr>
  <tr class="msg" id="L159"><td class="ts-cell"><a class="ts" href="#L159" alt="Mon Apr 06 2015 10:55:09 GMT-0700 (Pacific Daylight Time)">17:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: today cache.put() is spec&#039;d not to resolve its Promise until all the bytes are on disk</td></tr>
  <tr class="msg" id="L160"><td class="ts-cell"><a class="ts" href="#L160" alt="Mon Apr 06 2015 10:55:24 GMT-0700 (Pacific Daylight Time)">17:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: honestly as a developer i&#039;d be surprised if cache.put() fulfilled earlier</td></tr>
  <tr class="msg" id="L161"><td class="ts-cell"><a class="ts" href="#L161" alt="Mon Apr 06 2015 10:55:26 GMT-0700 (Pacific Daylight Time)">17:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">which is a bit of a wart</td></tr>
  <tr class="msg" id="L162"><td class="ts-cell"><a class="ts" href="#L162" alt="Mon Apr 06 2015 10:55:38 GMT-0700 (Pacific Daylight Time)">17:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: I&#039;d definitely want a promise that gets fulfilled only when hte cache successfully has had my thing put in it</td></tr>
  <tr class="msg" id="L163"><td class="ts-cell"><a class="ts" href="#L163" alt="Mon Apr 06 2015 10:56:09 GMT-0700 (Pacific Daylight Time)">17:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: so if you think there&#039;s some value in streaming in the background, I&#039;d do something like cache.put() -&gt; { headersDone, allDone } (two promises)</td></tr>
  <tr class="msg" id="L164"><td class="ts-cell"><a class="ts" href="#L164" alt="Mon Apr 06 2015 10:56:45 GMT-0700 (Pacific Daylight Time)">17:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I think the spec is a bit confusing on this point now... it currently says you can commit to the Cache before the body is complete... but resolves when the body is complete... so some other cache.match() can get the thing you just put in before your first promise resolves... I haven&#039;t implemented any of that because it seems not quite right to me</td></tr>
  <tr class="msg" id="L165"><td class="ts-cell"><a class="ts" href="#L165" alt="Mon Apr 06 2015 10:57:05 GMT-0700 (Pacific Daylight Time)">17:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">(&quot;there is no mechanism in Linux to wait for a TCP ACK to be received&quot; <a href="http://stackoverflow.com/a/12528808/31910">http://stackoverflow.com/a/12528808/31910</a></td></tr>
  <tr class="msg" id="L166"><td class="ts-cell"><a class="ts" href="#L166" alt="Mon Apr 06 2015 10:57:18 GMT-0700 (Pacific Daylight Time)">17:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: I see, yeah...</td></tr>
  <tr class="msg" id="L167"><td class="ts-cell"><a class="ts" href="#L167" alt="Mon Apr 06 2015 10:57:30 GMT-0700 (Pacific Daylight Time)">17:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">that&#039;d be weird...</td></tr>
  <tr class="msg" id="L168"><td class="ts-cell"><a class="ts" href="#L168" alt="Mon Apr 06 2015 10:57:54 GMT-0700 (Pacific Daylight Time)">17:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: so if we expose some other WritableStream interface on fetch... what does that mean for Request objects with a body buffer?</td></tr>
  <tr class="msg" id="L169"><td class="ts-cell"><a class="ts" href="#L169" alt="Mon Apr 06 2015 10:57:56 GMT-0700 (Pacific Daylight Time)">17:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">imagine writing half a stream to disk, calling cache.match to get it, then ... reading half the stream? you&#039;re now talking to yourself?</td></tr>
  <tr class="msg" id="L170"><td class="ts-cell"><a class="ts" href="#L170" alt="Mon Apr 06 2015 10:58:33 GMT-0700 (Pacific Daylight Time)">17:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: an optimized implementation would stream it off disk as its written to disk... but thats a bit hard I think</td></tr>
  <tr class="msg" id="L171"><td class="ts-cell"><a class="ts" href="#L171" alt="Mon Apr 06 2015 10:58:37 GMT-0700 (Pacific Daylight Time)">17:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: not sure at all... I guess we&#039;d build those on top? So fetch(req) does `req.body.pipeTo(getMeAWritableStreamFor(req.url))`?</td></tr>
  <tr class="msg" id="L172"><td class="ts-cell"><a class="ts" href="#L172" alt="Mon Apr 06 2015 10:59:04 GMT-0700 (Pacific Daylight Time)">17:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=tyoshino________@irc>tyoshino________</span>&gt;</div></td><td class="msg-cell">Even TCP ack tells you only that a data has successfully delivered to the destination kernel. It&#039;s unknown whether the data has been successfully accepted by the application layer or not without involving app layer ack.</td></tr>
  <tr class="msg" id="L173"><td class="ts-cell"><a class="ts" href="#L173" alt="Mon Apr 06 2015 10:59:11 GMT-0700 (Pacific Daylight Time)">17:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: wait I think what I just wrote is wrong</td></tr>
  <tr class="msg" id="L174"><td class="ts-cell"><a class="ts" href="#L174" alt="Mon Apr 06 2015 10:59:34 GMT-0700 (Pacific Daylight Time)">17:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">tyoshino________, that&#039;s fine I think --- but it&#039;s a moot point if you have to write your own tcp stack to figure out when you get an ACK</td></tr>
  <tr class="msg" id="L175"><td class="ts-cell"><a class="ts" href="#L175" alt="Mon Apr 06 2015 10:59:54 GMT-0700 (Pacific Daylight Time)">17:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">ok so the primitive is ... some kind of httpConnection object per request, with <a href="http://httpConnection.ws">httpConnection.ws</a> being something you can call .write() on.</td></tr>
  <tr class="msg" id="L176"><td class="ts-cell"><a class="ts" href="#L176" alt="Mon Apr 06 2015 11:00:30 GMT-0700 (Pacific Daylight Time)">18:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">so fetch(req) creates a httpConnection for req.url, and does req.body.pipeTo(httpConnection.writable) [changing name to avoid auto-linking in IRCcloud]</td></tr>
  <tr class="msg" id="L177"><td class="ts-cell"><a class="ts" href="#L177" alt="Mon Apr 06 2015 11:00:45 GMT-0700 (Pacific Daylight Time)">18:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: what about a compromise where you can pass a ReadableStream to Request() as the body or provide a bodyFactory function that operates on a WritableStream... by default the WritableStream goes to a pipe... but there is a SetWriterableStream() that can be called to override this... must be set before the body is ever read</td></tr>
  <tr class="msg" id="L178"><td class="ts-cell"><a class="ts" href="#L178" alt="Mon Apr 06 2015 11:01:01 GMT-0700 (Pacific Daylight Time)">18:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">whereas cache.add(req) creates a fsWriteStream for a &quot;file&quot; whose name is determined by req.url etc., and calls req.body.pipeTo(fsWriteStream)</td></tr>
  <tr class="msg" id="L179"><td class="ts-cell"><a class="ts" href="#L179" alt="Mon Apr 06 2015 11:01:33 GMT-0700 (Pacific Daylight Time)">18:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: that sounds intriguing; what is SetWritableStream? Spec-only operation, or user-exposed?</td></tr>
  <tr class="msg" id="L180"><td class="ts-cell"><a class="ts" href="#L180" alt="Mon Apr 06 2015 11:01:33 GMT-0700 (Pacific Daylight Time)">18:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=tyoshino________@irc>tyoshino________</span>&gt;</div></td><td class="msg-cell">right. posix socket API doesnt&#039;</td></tr>
  <tr class="msg" id="L181"><td class="ts-cell"><a class="ts" href="#L181" alt="Mon Apr 06 2015 11:02:09 GMT-0700 (Pacific Daylight Time)">18:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">tyoshino________: out of curiousity what APIs do we use in Chrome/Blink? POSIX socket ones, or something more sophisticated?</td></tr>
  <tr class="msg" id="L182"><td class="ts-cell"><a class="ts" href="#L182" alt="Mon Apr 06 2015 11:02:16 GMT-0700 (Pacific Daylight Time)">18:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: user exposed so js library consumers can call it... if its never updated then the bodyFactory is triggered on first body access</td></tr>
  <tr class="msg" id="L183"><td class="ts-cell"><a class="ts" href="#L183" alt="Mon Apr 06 2015 11:02:49 GMT-0700 (Pacific Daylight Time)">18:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: would be nice to provide a progress thing for fixed bodies like ArrayBuffers, though</td></tr>
  <tr class="msg" id="L184"><td class="ts-cell"><a class="ts" href="#L184" alt="Mon Apr 06 2015 11:02:54 GMT-0700 (Pacific Daylight Time)">18:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: hmmmmm this might be something we can work out ... we say that fetch(req) calls req.setWritableStream(httpConnection.writable) or something...</td></tr>
  <tr class="msg" id="L185"><td class="ts-cell"><a class="ts" href="#L185" alt="Mon Apr 06 2015 11:03:06 GMT-0700 (Pacific Daylight Time)">18:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: exactly, yes</td></tr>
  <tr class="msg" id="L186"><td class="ts-cell"><a class="ts" href="#L186" alt="Mon Apr 06 2015 11:03:10 GMT-0700 (Pacific Daylight Time)">18:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: sure, can definitely do once we figure out streams</td></tr>
  <tr class="msg" id="L187"><td class="ts-cell"><a class="ts" href="#L187" alt="Mon Apr 06 2015 11:03:30 GMT-0700 (Pacific Daylight Time)">18:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=tyoshino________@irc>tyoshino________</span>&gt;</div></td><td class="msg-cell">Domenic: For Linux, yes, read(2)</td></tr>
  <tr class="msg" id="L188"><td class="ts-cell"><a class="ts" href="#L188" alt="Mon Apr 06 2015 11:03:31 GMT-0700 (Pacific Daylight Time)">18:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: I guess the question is then whether we want to spec out httpConnection.writable as something people can access somehow</td></tr>
  <tr class="msg" id="L189"><td class="ts-cell"><a class="ts" href="#L189" alt="Mon Apr 06 2015 11:03:51 GMT-0700 (Pacific Daylight Time)">18:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=boogyman@irc>boogyman</span>&gt;</div></td><td class="msg-cell">Domenic: i would think that&#039;s something for the implementors, not something defined in the spec.</td></tr>
  <tr class="msg" id="L190"><td class="ts-cell"><a class="ts" href="#L190" alt="Mon Apr 06 2015 11:04:00 GMT-0700 (Pacific Daylight Time)">18:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">boogyman: why?</td></tr>
  <tr class="msg" id="L191"><td class="ts-cell"><a class="ts" href="#L191" alt="Mon Apr 06 2015 11:04:06 GMT-0700 (Pacific Daylight Time)">18:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=tyoshino________@irc>tyoshino________</span>&gt;</div></td><td class="msg-cell">ah, sorry. write()</td></tr>
  <tr class="msg" id="L192"><td class="ts-cell"><a class="ts" href="#L192" alt="Mon Apr 06 2015 11:04:21 GMT-0700 (Pacific Daylight Time)">18:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I don&#039;t see how we can do that without tackling the promise extension for fetch or a controller object for fetch... leads us to the abortable fetch thing</td></tr>
  <tr class="msg" id="L193"><td class="ts-cell"><a class="ts" href="#L193" alt="Mon Apr 06 2015 11:04:24 GMT-0700 (Pacific Daylight Time)">18:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=tyoshino________@irc>tyoshino________</span>&gt;</div></td><td class="msg-cell">I mean write(2)</td></tr>
  <tr class="msg" id="L194"><td class="ts-cell"><a class="ts" href="#L194" alt="Mon Apr 06 2015 11:04:38 GMT-0700 (Pacific Daylight Time)">18:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">tyoshino________: any ideas on windows or mac? :P</td></tr>
  <tr class="msg" id="L195"><td class="ts-cell"><a class="ts" href="#L195" alt="Mon Apr 06 2015 11:04:46 GMT-0700 (Pacific Daylight Time)">18:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=boogyman@irc>boogyman</span>&gt;</div></td><td class="msg-cell">it may be a suggestion, but why should a spec dictate how something is implemented at that level?</td></tr>
  <tr class="msg" id="L196"><td class="ts-cell"><a class="ts" href="#L196" alt="Mon Apr 06 2015 11:04:55 GMT-0700 (Pacific Daylight Time)">18:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=boogyman@irc>boogyman</span>&gt;</div></td><td class="msg-cell">s/?/.</td></tr>
  <tr class="msg" id="L197"><td class="ts-cell"><a class="ts" href="#L197" alt="Mon Apr 06 2015 11:04:57 GMT-0700 (Pacific Daylight Time)">18:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: hmm don&#039;t see how they&#039;re related... I mean in theory it could be like a new fetchUpload API.</td></tr>
  <tr class="msg" id="L198"><td class="ts-cell"><a class="ts" href="#L198" alt="Mon Apr 06 2015 11:05:18 GMT-0700 (Pacific Daylight Time)">18:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">boogyman: sorry, maybe I missed what you were referring to? Are you saying we shouldn&#039;t expose a writable stream for HTTP connections?</td></tr>
  <tr class="msg" id="L199"><td class="ts-cell"><a class="ts" href="#L199" alt="Mon Apr 06 2015 11:05:26 GMT-0700 (Pacific Daylight Time)">18:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: oh... i thought we wanted to maintain fetch() as a function... I guess we need to talk to annevk</td></tr>
  <tr class="msg" id="L200"><td class="ts-cell"><a class="ts" href="#L200" alt="Mon Apr 06 2015 11:05:37 GMT-0700 (Pacific Daylight Time)">18:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: well I&#039;m just going crazy here in this channel, who knows</td></tr>
  <tr class="msg" id="L201"><td class="ts-cell"><a class="ts" href="#L201" alt="Mon Apr 06 2015 11:05:53 GMT-0700 (Pacific Daylight Time)">18:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I can try to sketch out the setWritableStream thing in the issue... I have to head to the airport in a little bit, though</td></tr>
  <tr class="msg" id="L202"><td class="ts-cell"><a class="ts" href="#L202" alt="Mon Apr 06 2015 11:06:00 GMT-0700 (Pacific Daylight Time)">18:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: no problem, I can do it</td></tr>
  <tr class="msg" id="L203"><td class="ts-cell"><a class="ts" href="#L203" alt="Mon Apr 06 2015 11:06:02 GMT-0700 (Pacific Daylight Time)">18:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=tyoshino________@irc>tyoshino________</span>&gt;</div></td><td class="msg-cell">Not familiar but quick codesearch tells me that WSASend for Win, and POSIX for Mac</td></tr>
  <tr class="msg" id="L204"><td class="ts-cell"><a class="ts" href="#L204" alt="Mon Apr 06 2015 11:06:22 GMT-0700 (Pacific Daylight Time)">18:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: but the question is where do these writable streams come from, that people (who are not UAs) pass to setWritableStream()</td></tr>
  <tr class="msg" id="L205"><td class="ts-cell"><a class="ts" href="#L205" alt="Mon Apr 06 2015 11:06:31 GMT-0700 (Pacific Daylight Time)">18:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">tyoshino________: cool, thanks ^_^</td></tr>
  <tr class="msg" id="L206"><td class="ts-cell"><a class="ts" href="#L206" alt="Mon Apr 06 2015 11:06:41 GMT-0700 (Pacific Daylight Time)">18:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: WritableStream has a constructor, no?</td></tr>
  <tr class="msg" id="L207"><td class="ts-cell"><a class="ts" href="#L207" alt="Mon Apr 06 2015 11:06:55 GMT-0700 (Pacific Daylight Time)">18:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: sure. But why can&#039;t you get a writable stream for HTTP uploads?</td></tr>
  <tr class="msg" id="L208"><td class="ts-cell"><a class="ts" href="#L208" alt="Mon Apr 06 2015 11:07:04 GMT-0700 (Pacific Daylight Time)">18:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: I mean a direct one, not a pipe</td></tr>
  <tr class="msg" id="L209"><td class="ts-cell"><a class="ts" href="#L209" alt="Mon Apr 06 2015 11:07:06 GMT-0700 (Pacific Daylight Time)">18:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I still think we want some pipe construct as well that people could use for this</td></tr>
  <tr class="msg" id="L210"><td class="ts-cell"><a class="ts" href="#L210" alt="Mon Apr 06 2015 11:07:13 GMT-0700 (Pacific Daylight Time)">18:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=boogyman@irc>boogyman</span>&gt;</div></td><td class="msg-cell">Domenic: no, i&#039;m saying that the spec should not dictate how that stream is exposed, just that one is exposed</td></tr>
  <tr class="msg" id="L211"><td class="ts-cell"><a class="ts" href="#L211" alt="Mon Apr 06 2015 11:07:32 GMT-0700 (Pacific Daylight Time)">18:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">boogyman: oh, sure. not sure what i said that contradicts that.</td></tr>
  <tr class="msg" id="L212"><td class="ts-cell"><a class="ts" href="#L212" alt="Mon Apr 06 2015 11:07:46 GMT-0700 (Pacific Daylight Time)">18:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I don&#039;t understand what a &quot;HTTP uploads&quot; stream would do without the rest of the network stack behind it</td></tr>
  <tr class="msg" id="L213"><td class="ts-cell"><a class="ts" href="#L213" alt="Mon Apr 06 2015 11:08:01 GMT-0700 (Pacific Daylight Time)">18:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: why wouldn&#039;t it have the rest of the network stack behind it?</td></tr>
  <tr class="msg" id="L214"><td class="ts-cell"><a class="ts" href="#L214" alt="Mon Apr 06 2015 11:08:09 GMT-0700 (Pacific Daylight Time)">18:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=boogyman@irc>boogyman</span>&gt;</div></td><td class="msg-cell">Domenic	wanderview: hmmmmm this might be something we can work out ... we say that fetch(req) calls req.setWritableStream(httpConnection.writable) or something...</td></tr>
  <tr class="msg" id="L215"><td class="ts-cell"><a class="ts" href="#L215" alt="Mon Apr 06 2015 11:08:16 GMT-0700 (Pacific Daylight Time)">18:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=boogyman@irc>boogyman</span>&gt;</div></td><td class="msg-cell">unless i misread</td></tr>
  <tr class="msg" id="L216"><td class="ts-cell"><a class="ts" href="#L216" alt="Mon Apr 06 2015 11:08:32 GMT-0700 (Pacific Daylight Time)">18:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: how do you get a TCP connection without doing a fetch()?</td></tr>
  <tr class="msg" id="L217"><td class="ts-cell"><a class="ts" href="#L217" alt="Mon Apr 06 2015 11:08:35 GMT-0700 (Pacific Daylight Time)">18:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">boogyman: maybe, don&#039;t take the code too literally  I guess</td></tr>
  <tr class="msg" id="L218"><td class="ts-cell"><a class="ts" href="#L218" alt="Mon Apr 06 2015 11:08:49 GMT-0700 (Pacific Daylight Time)">18:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: ah, you wouldn&#039;t, you definitely would need some new API that gets a TCP connection</td></tr>
  <tr class="msg" id="L219"><td class="ts-cell"><a class="ts" href="#L219" alt="Mon Apr 06 2015 11:08:56 GMT-0700 (Pacific Daylight Time)">18:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: the trick is this API can&#039;t involve Request since Request is too generic</td></tr>
  <tr class="msg" id="L220"><td class="ts-cell"><a class="ts" href="#L220" alt="Mon Apr 06 2015 11:09:18 GMT-0700 (Pacific Daylight Time)">18:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=boogyman@irc>boogyman</span>&gt;</div></td><td class="msg-cell">okay, that was intended as pseudo-code. carry on.</td></tr>
  <tr class="msg" id="L221"><td class="ts-cell"><a class="ts" href="#L221" alt="Mon Apr 06 2015 11:09:33 GMT-0700 (Pacific Daylight Time)">18:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: strawperson: fetch.upload(url, method, headers) -&gt; Promise&lt;WritableStream&gt;?</td></tr>
  <tr class="msg" id="L222"><td class="ts-cell"><a class="ts" href="#L222" alt="Mon Apr 06 2015 11:09:40 GMT-0700 (Pacific Daylight Time)">18:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">does webrtc use tcp for networking?</td></tr>
  <tr class="msg" id="L223"><td class="ts-cell"><a class="ts" href="#L223" alt="Mon Apr 06 2015 11:09:46 GMT-0700 (Pacific Daylight Time)">18:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">(off-topic, just wondering)</td></tr>
  <tr class="msg" id="L224"><td class="ts-cell"><a class="ts" href="#L224" alt="Mon Apr 06 2015 11:10:10 GMT-0700 (Pacific Daylight Time)">18:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">caitp-: probably UDP? video/audio is generally cited as something that doesn&#039;t need reliabiity and hates latency</td></tr>
  <tr class="msg" id="L225"><td class="ts-cell"><a class="ts" href="#L225" alt="Mon Apr 06 2015 11:10:12 GMT-0700 (Pacific Daylight Time)">18:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">stackoverflow says it can be but doesn&#039;t need to be</td></tr>
  <tr class="msg" id="L226"><td class="ts-cell"><a class="ts" href="#L226" alt="Mon Apr 06 2015 11:10:21 GMT-0700 (Pacific Daylight Time)">18:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">yeah, that&#039;s why I was wondering</td></tr>
  <tr class="msg" id="L227"><td class="ts-cell"><a class="ts" href="#L227" alt="Mon Apr 06 2015 11:10:44 GMT-0700 (Pacific Daylight Time)">18:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: but not a Request object?</td></tr>
  <tr class="msg" id="L228"><td class="ts-cell"><a class="ts" href="#L228" alt="Mon Apr 06 2015 11:11:25 GMT-0700 (Pacific Daylight Time)">18:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: well Request has the problem that people could put it in a cache or something instead of just writing to it, right? that&#039;s how we got started here...</td></tr>
  <tr class="msg" id="L229"><td class="ts-cell"><a class="ts" href="#L229" alt="Mon Apr 06 2015 11:12:11 GMT-0700 (Pacific Daylight Time)">18:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I thought one of the goals was to provide primitives like Request which could be used throughout many APIs</td></tr>
  <tr class="msg" id="L230"><td class="ts-cell"><a class="ts" href="#L230" alt="Mon Apr 06 2015 11:12:21 GMT-0700 (Pacific Daylight Time)">18:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">routing around the primitive seems a step backwards</td></tr>
  <tr class="msg" id="L231"><td class="ts-cell"><a class="ts" href="#L231" alt="Mon Apr 06 2015 11:12:26 GMT-0700 (Pacific Daylight Time)">18:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: me too, but it sounds like Request was not primitive enough :(</td></tr>
  <tr class="msg" id="L232"><td class="ts-cell"><a class="ts" href="#L232" alt="Mon Apr 06 2015 11:13:11 GMT-0700 (Pacific Daylight Time)">18:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">a queue with readable side and writable side?</td></tr>
  <tr class="msg" id="L233"><td class="ts-cell"><a class="ts" href="#L233" alt="Mon Apr 06 2015 11:13:15 GMT-0700 (Pacific Daylight Time)">18:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">if it can be read by anyone (cache, author code, etc.), it can&#039;t represent the primitive operation of an actual ongoing HTTP request (whose body can only be read by the UA/OS)</td></tr>
  <tr class="msg" id="L234"><td class="ts-cell"><a class="ts" href="#L234" alt="Mon Apr 06 2015 11:14:01 GMT-0700 (Pacific Daylight Time)">18:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">tyoshino: that doesn&#039;t really solve things though. Authors write into the writable side, the UA reads from the readable side, and does ... what? Magic that writes to the TCP socket?</td></tr>
  <tr class="msg" id="L235"><td class="ts-cell"><a class="ts" href="#L235" alt="Mon Apr 06 2015 11:14:13 GMT-0700 (Pacific Daylight Time)">18:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">tyoshino: I&#039;m trying to say there should be a writable stream authors can get to that represents that TCP socket</td></tr>
  <tr class="msg" id="L236"><td class="ts-cell"><a class="ts" href="#L236" alt="Mon Apr 06 2015 11:15:00 GMT-0700 (Pacific Daylight Time)">18:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">so, fetch() is being used primarily for pretty high-level operations, this isn&#039;t something that emscripten would want to use for a pretend posix socket api</td></tr>
  <tr class="msg" id="L237"><td class="ts-cell"><a class="ts" href="#L237" alt="Mon Apr 06 2015 11:15:06 GMT-0700 (Pacific Daylight Time)">18:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">why does it need to be so primitive?</td></tr>
  <tr class="msg" id="L238"><td class="ts-cell"><a class="ts" href="#L238" alt="Mon Apr 06 2015 11:15:13 GMT-0700 (Pacific Daylight Time)">18:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">authors aren&#039;t going to want to be writing libc code in js</td></tr>
  <tr class="msg" id="L239"><td class="ts-cell"><a class="ts" href="#L239" alt="Mon Apr 06 2015 11:15:22 GMT-0700 (Pacific Daylight Time)">18:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">BTW just as a general sentiment check: I am feeling positive and the last 30 minutes have gotten ideas flowing :). If I seem like I&#039;m pushing against things I&#039;m really just trying to explore the spaces and make sure we&#039;re doing the right thing.</td></tr>
  <tr class="msg" id="L240"><td class="ts-cell"><a class="ts" href="#L240" alt="Mon Apr 06 2015 11:15:45 GMT-0700 (Pacific Daylight Time)">18:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">caitp-: fetch was/is supposed to be a low-level primitive</td></tr>
  <tr class="msg" id="L241"><td class="ts-cell"><a class="ts" href="#L241" alt="Mon Apr 06 2015 11:15:54 GMT-0700 (Pacific Daylight Time)">18:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">caitp-: library authors will in general want control</td></tr>
  <tr class="msg" id="L242"><td class="ts-cell"><a class="ts" href="#L242" alt="Mon Apr 06 2015 11:16:17 GMT-0700 (Pacific Daylight Time)">18:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">i think library authors are generally pretty happy with what XHR gives them</td></tr>
  <tr class="msg" id="L243"><td class="ts-cell"><a class="ts" href="#L243" alt="Mon Apr 06 2015 11:16:23 GMT-0700 (Pacific Daylight Time)">18:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">O_O</td></tr>
  <tr class="msg" id="L244"><td class="ts-cell"><a class="ts" href="#L244" alt="Mon Apr 06 2015 11:16:35 GMT-0700 (Pacific Daylight Time)">18:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I think there is an inherent mismatch with your writer-per-active-operation goal and the operation-as-object-concept of Request... let me gist something...</td></tr>
  <tr class="msg" id="L245"><td class="ts-cell"><a class="ts" href="#L245" alt="Mon Apr 06 2015 11:17:03 GMT-0700 (Pacific Daylight Time)">18:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: agree.</td></tr>
  <tr class="msg" id="L246"><td class="ts-cell"><a class="ts" href="#L246" alt="Mon Apr 06 2015 11:20:34 GMT-0700 (Pacific Daylight Time)">18:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">hmm, the key point of the discussion is the meaning of write() completion?</td></tr>
  <tr class="msg" id="L247"><td class="ts-cell"><a class="ts" href="#L247" alt="Mon Apr 06 2015 11:21:17 GMT-0700 (Pacific Daylight Time)">18:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">sorry. i haven&#039;t caught up with the log. I was watching only the issue.</td></tr>
  <tr class="msg" id="L248"><td class="ts-cell"><a class="ts" href="#L248" alt="Mon Apr 06 2015 11:23:26 GMT-0700 (Pacific Daylight Time)">18:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: something like this? <a href="https://gist.github.com/wanderview/ac6052184c62d2f165ee">https://gist.github.com/wanderview/ac6052184c62d2f165ee</a></td></tr>
  <tr class="msg" id="L249"><td class="ts-cell"><a class="ts" href="#L249" alt="Mon Apr 06 2015 11:23:37 GMT-0700 (Pacific Daylight Time)">18:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">maybe lose the bodyAsWriter</td></tr>
  <tr class="msg" id="L250"><td class="ts-cell"><a class="ts" href="#L250" alt="Mon Apr 06 2015 11:24:29 GMT-0700 (Pacific Daylight Time)">18:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">not sure if consumers of Request should be required to call setWriter or not</td></tr>
  <tr class="msg" id="L251"><td class="ts-cell"><a class="ts" href="#L251" alt="Mon Apr 06 2015 11:25:14 GMT-0700 (Pacific Daylight Time)">18:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=boogyman@irc>boogyman</span>&gt;</div></td><td class="msg-cell">is req.body.closed  a promise?</td></tr>
  <tr class="msg" id="L252"><td class="ts-cell"><a class="ts" href="#L252" alt="Mon Apr 06 2015 11:25:36 GMT-0700 (Pacific Daylight Time)">18:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">boogyman: I was thinking it was something that existed as a promise... but I could be wrong</td></tr>
  <tr class="msg" id="L253"><td class="ts-cell"><a class="ts" href="#L253" alt="Mon Apr 06 2015 11:25:46 GMT-0700 (Pacific Daylight Time)">18:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">yes, it&#039;s a promise</td></tr>
  <tr class="msg" id="L254"><td class="ts-cell"><a class="ts" href="#L254" alt="Mon Apr 06 2015 11:26:00 GMT-0700 (Pacific Daylight Time)">18:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">a getter of a promise</td></tr>
  <tr class="msg" id="L255"><td class="ts-cell"><a class="ts" href="#L255" alt="Mon Apr 06 2015 11:26:51 GMT-0700 (Pacific Daylight Time)">18:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">new Request(url, { body (String | Stream | ArrayBuffer | ...) }) --- different behaviour depending on what type Body is</td></tr>
  <tr class="msg" id="L256"><td class="ts-cell"><a class="ts" href="#L256" alt="Mon Apr 06 2015 11:27:05 GMT-0700 (Pacific Daylight Time)">18:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">would make more sense to most people, tbh</td></tr>
  <tr class="msg" id="L257"><td class="ts-cell"><a class="ts" href="#L257" alt="Mon Apr 06 2015 11:27:13 GMT-0700 (Pacific Daylight Time)">18:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">though it&#039;s gone from body now and lives only on reader</td></tr>
  <tr class="msg" id="L258"><td class="ts-cell"><a class="ts" href="#L258" alt="Mon Apr 06 2015 11:27:57 GMT-0700 (Pacific Daylight Time)">18:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">caitp-: is that &quot;Stream&quot; a ReadableStream or a WritableStream?</td></tr>
  <tr class="msg" id="L259"><td class="ts-cell"><a class="ts" href="#L259" alt="Mon Apr 06 2015 11:28:05 GMT-0700 (Pacific Daylight Time)">18:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">well it has to be readable</td></tr>
  <tr class="msg" id="L260"><td class="ts-cell"><a class="ts" href="#L260" alt="Mon Apr 06 2015 11:28:08 GMT-0700 (Pacific Daylight Time)">18:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: that looks more or less good, I have some cosmetic comments. But my question is, when fetch calls setWriter, what argument does it use?</td></tr>
  <tr class="msg" id="L261"><td class="ts-cell"><a class="ts" href="#L261" alt="Mon Apr 06 2015 11:28:13 GMT-0700 (Pacific Daylight Time)">18:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">but you probably want it to be writable too</td></tr>
  <tr class="msg" id="L262"><td class="ts-cell"><a class="ts" href="#L262" alt="Mon Apr 06 2015 11:28:47 GMT-0700 (Pacific Daylight Time)">18:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">caitp-: thats what I want... pass ReadableStream to constructor... but to get the progress semantics Domenic wants and XHR currently provides, we need to allow access to a consumer-specific WritableStream</td></tr>
  <tr class="msg" id="L263"><td class="ts-cell"><a class="ts" href="#L263" alt="Mon Apr 06 2015 11:29:12 GMT-0700 (Pacific Daylight Time)">18:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">I don&#039;t think that&#039;s really true</td></tr>
  <tr class="msg" id="L264"><td class="ts-cell"><a class="ts" href="#L264" alt="Mon Apr 06 2015 11:29:13 GMT-0700 (Pacific Daylight Time)">18:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: a private implementation of WritableStream</td></tr>
  <tr class="msg" id="L265"><td class="ts-cell"><a class="ts" href="#L265" alt="Mon Apr 06 2015 11:29:20 GMT-0700 (Pacific Daylight Time)">18:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: OK. Why is it private?</td></tr>
  <tr class="msg" id="L266"><td class="ts-cell"><a class="ts" href="#L266" alt="Mon Apr 06 2015 11:29:42 GMT-0700 (Pacific Daylight Time)">18:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: why does only the UA get to create WritableStreams representing sockets?</td></tr>
  <tr class="msg" id="L267"><td class="ts-cell"><a class="ts" href="#L267" alt="Mon Apr 06 2015 11:29:46 GMT-0700 (Pacific Daylight Time)">18:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">you don&#039;t really get progress semantics from the number of bytes you&#039;ve pushed to a writable stream</td></tr>
  <tr class="msg" id="L268"><td class="ts-cell"><a class="ts" href="#L268" alt="Mon Apr 06 2015 11:29:57 GMT-0700 (Pacific Daylight Time)">18:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: because it could be c++ and it will depend on internal implementation details that can&#039;t be spec&#039;d?</td></tr>
  <tr class="msg" id="L269"><td class="ts-cell"><a class="ts" href="#L269" alt="Mon Apr 06 2015 11:30:16 GMT-0700 (Pacific Daylight Time)">18:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">caitp-: Domenic wants the consumer stream to not resolve the write() promises until its pushed to the kernel</td></tr>
  <tr class="msg" id="L270"><td class="ts-cell"><a class="ts" href="#L270" alt="Mon Apr 06 2015 11:30:29 GMT-0700 (Pacific Daylight Time)">18:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">caitp-: which is why a pipe primitive is not adequate here</td></tr>
  <tr class="msg" id="L271"><td class="ts-cell"><a class="ts" href="#L271" alt="Mon Apr 06 2015 11:30:47 GMT-0700 (Pacific Daylight Time)">18:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: nah :P. its observable behavior should be interoperable. it could be C++ sure, but it could be exposed to JS if we wanted it to.</td></tr>
  <tr class="msg" id="L272"><td class="ts-cell"><a class="ts" href="#L272" alt="Mon Apr 06 2015 11:30:54 GMT-0700 (Pacific Daylight Time)">18:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: because its not safe to expose sockets on the web?  or are we doing the TCP spec now? :-)</td></tr>
  <tr class="msg" id="L273"><td class="ts-cell"><a class="ts" href="#L273" alt="Mon Apr 06 2015 11:30:57 GMT-0700 (Pacific Daylight Time)">18:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">s/should be/could be specced to be/</td></tr>
  <tr class="msg" id="L274"><td class="ts-cell"><a class="ts" href="#L274" alt="Mon Apr 06 2015 11:31:06 GMT-0700 (Pacific Daylight Time)">18:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">what if --- and hear me out here --- what if pushing to a writable stream was not related to progress at all</td></tr>
  <tr class="msg" id="L275"><td class="ts-cell"><a class="ts" href="#L275" alt="Mon Apr 06 2015 11:31:09 GMT-0700 (Pacific Daylight Time)">18:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: haha, well, <a href="http://www.w3.org/2012/sysapps/tcp-udp-sockets/">http://www.w3.org/2012/sysapps/tcp-udp-sockets/</a>, but leaving that aside</td></tr>
  <tr class="msg" id="L276"><td class="ts-cell"><a class="ts" href="#L276" alt="Mon Apr 06 2015 11:31:21 GMT-0700 (Pacific Daylight Time)">18:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: we have one for firefoxos, too</td></tr>
  <tr class="msg" id="L277"><td class="ts-cell"><a class="ts" href="#L277" alt="Mon Apr 06 2015 11:31:23 GMT-0700 (Pacific Daylight Time)">18:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: it&#039;s not a socket though, it&#039;s just a writable stream with HTTP semantics</td></tr>
  <tr class="msg" id="L278"><td class="ts-cell"><a class="ts" href="#L278" alt="Mon Apr 06 2015 11:31:25 GMT-0700 (Pacific Daylight Time)">18:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">what if you had some kind of, I don&#039;t know, upload event tied to actually pushing the data to the kernel</td></tr>
  <tr class="msg" id="L279"><td class="ts-cell"><a class="ts" href="#L279" alt="Mon Apr 06 2015 11:31:31 GMT-0700 (Pacific Daylight Time)">18:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">sort of like what already exists</td></tr>
  <tr class="msg" id="L280"><td class="ts-cell"><a class="ts" href="#L280" alt="Mon Apr 06 2015 11:31:34 GMT-0700 (Pacific Daylight Time)">18:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">caitp-: I would be quite happy with a progress notifier separate from the stream</td></tr>
  <tr class="msg" id="L281"><td class="ts-cell"><a class="ts" href="#L281" alt="Mon Apr 06 2015 11:31:47 GMT-0700 (Pacific Daylight Time)">18:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: maybe the API is something like new HttpUploadStream(url, method, headers)</td></tr>
  <tr class="msg" id="L282"><td class="ts-cell"><a class="ts" href="#L282" alt="Mon Apr 06 2015 11:32:26 GMT-0700 (Pacific Daylight Time)">18:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">caitp-: we probably want that too. but it should be explicable in terms of the stream primitive. i.e., when you drop down to the stream level, you shouldn&#039;t lose power. we should layer things appropriately.</td></tr>
  <tr class="msg" id="L283"><td class="ts-cell"><a class="ts" href="#L283" alt="Mon Apr 06 2015 11:32:27 GMT-0700 (Pacific Daylight Time)">18:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: what does it do if you don&#039;t attach it to a fetch() call?</td></tr>
  <tr class="msg" id="L284"><td class="ts-cell"><a class="ts" href="#L284" alt="Mon Apr 06 2015 11:32:51 GMT-0700 (Pacific Daylight Time)">18:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">what is the thing gained from explaining it in terms of the stream, other than making the stream interface more complicated?</td></tr>
  <tr class="msg" id="L285"><td class="ts-cell"><a class="ts" href="#L285" alt="Mon Apr 06 2015 11:33:02 GMT-0700 (Pacific Daylight Time)">18:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: just waving my hands here, but you don&#039;t need to fetch() a HttpUploadStream. fetch() is explained in terms of HttpUploadStream, not the other way around.</td></tr>
  <tr class="msg" id="L286"><td class="ts-cell"><a class="ts" href="#L286" alt="Mon Apr 06 2015 11:34:11 GMT-0700 (Pacific Daylight Time)">18:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: similar to how, say, cache.add could be explained in terms of a WritableFileStream or maybe WritableDatabaseEntryStream</td></tr>
  <tr class="msg" id="L287"><td class="ts-cell"><a class="ts" href="#L287" alt="Mon Apr 06 2015 11:35:46 GMT-0700 (Pacific Daylight Time)">18:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: so you are talking about blowing up all the stuff coming from ServiceWorker effort and replacing it with a streams foundation, no?  this seems like a huge undertaking</td></tr>
  <tr class="msg" id="L288"><td class="ts-cell"><a class="ts" href="#L288" alt="Mon Apr 06 2015 11:36:06 GMT-0700 (Pacific Daylight Time)">18:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: it&#039;s fine if HttpUploadStream is private for now. Maybe it stays private forever. But I want us to kind of acknowledge that our mental model includes more capabilities for the UA than the script, and then question whether we expose them</td></tr>
  <tr class="msg" id="L289"><td class="ts-cell"><a class="ts" href="#L289" alt="Mon Apr 06 2015 11:36:11 GMT-0700 (Pacific Daylight Time)">18:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">and in theory these specs tried to accomodate streams being added</td></tr>
  <tr class="msg" id="L290"><td class="ts-cell"><a class="ts" href="#L290" alt="Mon Apr 06 2015 11:36:20 GMT-0700 (Pacific Daylight Time)">18:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">operation stream is one possible solution. it can propagate written-to-kernel event.</td></tr>
  <tr class="msg" id="L291"><td class="ts-cell"><a class="ts" href="#L291" alt="Mon Apr 06 2015 11:36:37 GMT-0700 (Pacific Daylight Time)">18:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: no, not at all! I&#039;m saying that we&#039;re continuing to do archeology, and we have to ask at each layer whether we&#039;ve gotten to the bedrock or not</td></tr>
  <tr class="msg" id="L292"><td class="ts-cell"><a class="ts" href="#L292" alt="Mon Apr 06 2015 11:37:08 GMT-0700 (Pacific Daylight Time)">18:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I have to admit I actually said &quot;dear god no&quot; when I read &quot;WritableDatabaseEntryStream&quot; :-)</td></tr>
  <tr class="msg" id="L293"><td class="ts-cell"><a class="ts" href="#L293" alt="Mon Apr 06 2015 11:37:16 GMT-0700 (Pacific Daylight Time)">18:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: what we&#039;re discovering is that the SW APIs are not bedrockey---Request/Response especially, since they abstract multiple things: writing to a cache, uploading, and being able to be read from user code</td></tr>
  <tr class="msg" id="L294"><td class="ts-cell"><a class="ts" href="#L294" alt="Mon Apr 06 2015 11:37:33 GMT-0700 (Pacific Daylight Time)">18:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: doing this kind of thing adds a lot of complexity and constrain on the implementation... I would want to see huge benefits before agreeing to that</td></tr>
  <tr class="msg" id="L295"><td class="ts-cell"><a class="ts" href="#L295" alt="Mon Apr 06 2015 11:37:35 GMT-0700 (Pacific Daylight Time)">18:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: hmmmm but don&#039;t you want the ability to do streaming writes to IndexedDB at some point in the future?</td></tr>
  <tr class="msg" id="L296"><td class="ts-cell"><a class="ts" href="#L296" alt="Mon Apr 06 2015 11:37:53 GMT-0700 (Pacific Daylight Time)">18:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">&gt; IndexedDB</td></tr>
  <tr class="msg" id="L297"><td class="ts-cell"><a class="ts" href="#L297" alt="Mon Apr 06 2015 11:38:11 GMT-0700 (Pacific Daylight Time)">18:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: that makes sense, it&#039;s a reasonable argument for keeping HttpUploadStream private for now until someone clamors for it.</td></tr>
  <tr class="msg" id="L298"><td class="ts-cell"><a class="ts" href="#L298" alt="Mon Apr 06 2015 11:38:31 GMT-0700 (Pacific Daylight Time)">18:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: although I&#039;d be curious how much extra work/constraints it adds to wrap up the code you were going to use anyway into a writable stream.</td></tr>
  <tr class="msg" id="L299"><td class="ts-cell"><a class="ts" href="#L299" alt="Mon Apr 06 2015 11:38:37 GMT-0700 (Pacific Daylight Time)">18:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: solve abortable fetch and promise extension first?  because what you really are asking for is rich promises of future behavior... say activities or maybes tasks...</td></tr>
  <tr class="msg" id="L300"><td class="ts-cell"><a class="ts" href="#L300" alt="Mon Apr 06 2015 11:38:40 GMT-0700 (Pacific Daylight Time)">18:38</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-12" title=wanderview@irc>wanderview</span></div></td><td class="msg-cell">ducks</td></tr>
  <tr class="msg" id="L301"><td class="ts-cell"><a class="ts" href="#L301" alt="Mon Apr 06 2015 11:38:54 GMT-0700 (Pacific Daylight Time)">18:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: totally fair to solve those first :)</td></tr>
  <tr class="msg" id="L302"><td class="ts-cell"><a class="ts" href="#L302" alt="Mon Apr 06 2015 11:39:07 GMT-0700 (Pacific Daylight Time)">18:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: I am reasonably happy with this mental model at least</td></tr>
  <tr class="msg" id="L303"><td class="ts-cell"><a class="ts" href="#L303" alt="Mon Apr 06 2015 11:39:24 GMT-0700 (Pacific Daylight Time)">18:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: the problem is when the spec assumes a particular implementation that cannot be easily mapped to all vendors</td></tr>
  <tr class="msg" id="L304"><td class="ts-cell"><a class="ts" href="#L304" alt="Mon Apr 06 2015 11:39:27 GMT-0700 (Pacific Daylight Time)">18:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: as long as we are OK with authors not getting good progress event semantics out of the pipe model that we&#039;d start with</td></tr>
  <tr class="msg" id="L305"><td class="ts-cell"><a class="ts" href="#L305" alt="Mon Apr 06 2015 11:39:44 GMT-0700 (Pacific Daylight Time)">18:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">going to low risks making things &quot;assuming its implemented like chrome, then its easy...&quot;, etc</td></tr>
  <tr class="msg" id="L306"><td class="ts-cell"><a class="ts" href="#L306" alt="Mon Apr 06 2015 11:40:02 GMT-0700 (Pacific Daylight Time)">18:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: well it probably helps that I don&#039;t know too much about Chrome&#039;s implementation and make unreasonable demands of everyone :)</td></tr>
  <tr class="msg" id="L307"><td class="ts-cell"><a class="ts" href="#L307" alt="Mon Apr 06 2015 11:40:40 GMT-0700 (Pacific Daylight Time)">18:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: and I do think we want streams to IDB... but I don&#039;t know we need an abstract &quot;DatabaseEntry&quot; interface to do that</td></tr>
  <tr class="msg" id="L308"><td class="ts-cell"><a class="ts" href="#L308" alt="Mon Apr 06 2015 11:40:52 GMT-0700 (Pacific Daylight Time)">18:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">what are the use cases that Fetch (the api, not the XHR backend) has to accomodate?</td></tr>
  <tr class="msg" id="L309"><td class="ts-cell"><a class="ts" href="#L309" alt="Mon Apr 06 2015 11:41:04 GMT-0700 (Pacific Daylight Time)">18:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">is there like an explicit set of requirements that have been figured out?</td></tr>
  <tr class="msg" id="L310"><td class="ts-cell"><a class="ts" href="#L310" alt="Mon Apr 06 2015 11:41:13 GMT-0700 (Pacific Daylight Time)">18:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: haha OK (re IDB)</td></tr>
  <tr class="msg" id="L311"><td class="ts-cell"><a class="ts" href="#L311" alt="Mon Apr 06 2015 11:41:16 GMT-0700 (Pacific Daylight Time)">18:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">caitp-: probably a question for annevk</td></tr>
  <tr class="msg" id="L312"><td class="ts-cell"><a class="ts" href="#L312" alt="Mon Apr 06 2015 11:42:21 GMT-0700 (Pacific Daylight Time)">18:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">i&#039;m curious where streams need to fit into it at all, since the only thing I can think of would be uploading something that was already cached, or downloading something and using the body stream as an upload to something else</td></tr>
  <tr class="msg" id="L313"><td class="ts-cell"><a class="ts" href="#L313" alt="Mon Apr 06 2015 11:42:44 GMT-0700 (Pacific Daylight Time)">18:42</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-11" title=jsbell_gardener@irc>jsbell_gardener</span></div></td><td class="msg-cell">tunes into the IDB discussion...</td></tr>
  <tr class="msg" id="L314"><td class="ts-cell"><a class="ts" href="#L314" alt="Mon Apr 06 2015 11:43:46 GMT-0700 (Pacific Daylight Time)">18:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">caitp-: did you see <a href="https://github.com/domenic/streams-demo">https://github.com/domenic/streams-demo</a> ? that&#039;s another use case that was impossible with XHR/non-streaming approaches</td></tr>
  <tr class="msg" id="L315"><td class="ts-cell"><a class="ts" href="#L315" alt="Mon Apr 06 2015 11:43:58 GMT-0700 (Pacific Daylight Time)">18:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">caitp-: <a href="https://domenic.github.io/streams-demo/">https://domenic.github.io/streams-demo/</a> is nicer</td></tr>
  <tr class="msg" id="L316"><td class="ts-cell"><a class="ts" href="#L316" alt="Mon Apr 06 2015 11:45:13 GMT-0700 (Pacific Daylight Time)">18:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: do you anticipate adding a pipe construct to the streams spec?  by which I mean an object type that provides ReadableStream, WritableStream, and a (possibly fixed) buffer</td></tr>
  <tr class="msg" id="L317"><td class="ts-cell"><a class="ts" href="#L317" alt="Mon Apr 06 2015 11:45:18 GMT-0700 (Pacific Daylight Time)">18:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">caitp-: do you agree that we need to expose streams?</td></tr>
  <tr class="msg" id="L318"><td class="ts-cell"><a class="ts" href="#L318" alt="Mon Apr 06 2015 11:45:34 GMT-0700 (Pacific Daylight Time)">18:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Domenic: I&#039;d like to avoid fetchUpload(), that sounds rather terrible</td></tr>
  <tr class="msg" id="L319"><td class="ts-cell"><a class="ts" href="#L319" alt="Mon Apr 06 2015 11:45:40 GMT-0700 (Pacific Daylight Time)">18:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">I think it would be nice to have, buuuut</td></tr>
  <tr class="msg" id="L320"><td class="ts-cell"><a class="ts" href="#L320" alt="Mon Apr 06 2015 11:45:42 GMT-0700 (Pacific Daylight Time)">18:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: yes, definitely. Although I&#039;d probably call it &quot;Identity Transform Stream&quot;</td></tr>
  <tr class="msg" id="L321"><td class="ts-cell"><a class="ts" href="#L321" alt="Mon Apr 06 2015 11:45:49 GMT-0700 (Pacific Daylight Time)">18:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">i&#039;m not totally convinced by the use cases</td></tr>
  <tr class="msg" id="L322"><td class="ts-cell"><a class="ts" href="#L322" alt="Mon Apr 06 2015 11:46:02 GMT-0700 (Pacific Daylight Time)">18:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I can&#039;t tell if you are just messing with me now :-)</td></tr>
  <tr class="msg" id="L323"><td class="ts-cell"><a class="ts" href="#L323" alt="Mon Apr 06 2015 11:46:27 GMT-0700 (Pacific Daylight Time)">18:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">but I shall not object over names :-)</td></tr>
  <tr class="msg" id="L324"><td class="ts-cell"><a class="ts" href="#L324" alt="Mon Apr 06 2015 11:46:33 GMT-0700 (Pacific Daylight Time)">18:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: no, I&#039;m not, I promise! We even have a prototype (which suffers from a number of issues related to nobody giving it any love in a while): <a href="https://github.com/whatwg/streams/blob/master/reference-implementation/lib/transform-stream.js">https://github.com/whatwg/streams/blob/master/reference-implementation/lib/transform-stream.js</a></td></tr>
  <tr class="msg" id="L325"><td class="ts-cell"><a class="ts" href="#L325" alt="Mon Apr 06 2015 11:46:36 GMT-0700 (Pacific Daylight Time)">18:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">if it&#039;s not something that authors are asking for, why make an api complicated just to accomodate it?</td></tr>
  <tr class="msg" id="L326"><td class="ts-cell"><a class="ts" href="#L326" alt="Mon Apr 06 2015 11:46:45 GMT-0700 (Pacific Daylight Time)">18:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">simpler is better :&gt;</td></tr>
  <tr class="msg" id="L327"><td class="ts-cell"><a class="ts" href="#L327" alt="Mon Apr 06 2015 11:46:52 GMT-0700 (Pacific Daylight Time)">18:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">caitp-: developers have been asking for streams for ages</td></tr>
  <tr class="msg" id="L328"><td class="ts-cell"><a class="ts" href="#L328" alt="Mon Apr 06 2015 11:47:00 GMT-0700 (Pacific Daylight Time)">18:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">to accomodate what, though</td></tr>
  <tr class="msg" id="L329"><td class="ts-cell"><a class="ts" href="#L329" alt="Mon Apr 06 2015 11:47:02 GMT-0700 (Pacific Daylight Time)">18:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">caitp-: did you not see the huge twitter blow-up about devs asking for streams just two weeks ago?</td></tr>
  <tr class="msg" id="L330"><td class="ts-cell"><a class="ts" href="#L330" alt="Mon Apr 06 2015 11:47:14 GMT-0700 (Pacific Daylight Time)">18:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">caitp-: we&#039;ve wanted to add this to XMLHttpRequest since 2008 or so</td></tr>
  <tr class="msg" id="L331"><td class="ts-cell"><a class="ts" href="#L331" alt="Mon Apr 06 2015 11:47:59 GMT-0700 (Pacific Daylight Time)">18:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">what I&#039;m asking is, what problem is it actually solving for them, and could that problem be solved in a nicer way</td></tr>
  <tr class="msg" id="L332"><td class="ts-cell"><a class="ts" href="#L332" alt="Mon Apr 06 2015 11:48:15 GMT-0700 (Pacific Daylight Time)">18:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: ok... so like node&#039;s Transform</td></tr>
  <tr class="msg" id="L333"><td class="ts-cell"><a class="ts" href="#L333" alt="Mon Apr 06 2015 11:48:33 GMT-0700 (Pacific Daylight Time)">18:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">caitp-: the ability to process data in chunks rather than having it all buffered or written to disk</td></tr>
  <tr class="msg" id="L334"><td class="ts-cell"><a class="ts" href="#L334" alt="Mon Apr 06 2015 11:48:39 GMT-0700 (Pacific Daylight Time)">18:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: yes, but without the silly squash-everything-into-one-object issue</td></tr>
  <tr class="msg" id="L335"><td class="ts-cell"><a class="ts" href="#L335" alt="Mon Apr 06 2015 11:49:24 GMT-0700 (Pacific Daylight Time)">18:49</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-1" title=Domenic@irc>Domenic</span></div></td><td class="msg-cell">shudders ... node transform streams prototypally inherit from readable stream, then copy over all the writable stream methods and private state, and then they get confused because e.g. an &quot;error&quot; event can come from either side...</td></tr>
  <tr class="msg" id="L336"><td class="ts-cell"><a class="ts" href="#L336" alt="Mon Apr 06 2015 11:51:09 GMT-0700 (Pacific Daylight Time)">18:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title=caitp-@irc>caitp-</span>&gt;</div></td><td class="msg-cell">annevk I&#039;m primarily talking about the upload stream though</td></tr>
  <tr class="msg" id="L337"><td class="ts-cell"><a class="ts" href="#L337" alt="Mon Apr 06 2015 11:51:57 GMT-0700 (Pacific Daylight Time)">18:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I guess I worry that progress via WritableStream makes it kind of hard for people to get progress... I mean... it seems like there should be an easier way if you wouldn&#039;t have been going the WritableStream route to begin with</td></tr>
  <tr class="msg" id="L338"><td class="ts-cell"><a class="ts" href="#L338" alt="Mon Apr 06 2015 11:53:42 GMT-0700 (Pacific Daylight Time)">18:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">caitp-: if you want a simple one-way channel that seems ideal</td></tr>
  <tr class="msg" id="L339"><td class="ts-cell"><a class="ts" href="#L339" alt="Mon Apr 06 2015 11:53:53 GMT-0700 (Pacific Daylight Time)">18:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: maybe there could be a request.bodyWritten promise which is the value returned from ws.write(body).... or could we set it as the value of body.pipeTo(ws)? does that promise reflect actual written status?</td></tr>
  <tr class="msg" id="L340"><td class="ts-cell"><a class="ts" href="#L340" alt="Mon Apr 06 2015 11:54:38 GMT-0700 (Pacific Daylight Time)">18:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: I agree we should add an easy progress API on top. Is that related to the request.bodyWritten promise?</td></tr>
  <tr class="msg" id="L341"><td class="ts-cell"><a class="ts" href="#L341" alt="Mon Apr 06 2015 11:54:38 GMT-0700 (Pacific Daylight Time)">18:54</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-12" title=wanderview@irc>wanderview</span></div></td><td class="msg-cell">starts packing up to go to the airport.</td></tr>
  <tr class="msg" id="L342"><td class="ts-cell"><a class="ts" href="#L342" alt="Mon Apr 06 2015 11:55:08 GMT-0700 (Pacific Daylight Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: yea... I meant a simple promise they could resolve when the bytes from a fixed or ReadableStream body have been written to the consumer-specific WritableStream</td></tr>
  <tr class="msg" id="L343"><td class="ts-cell"><a class="ts" href="#L343" alt="Mon Apr 06 2015 11:55:26 GMT-0700 (Pacific Daylight Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">or that WritableStream resolves and says the bytes are at the kernel, I mean</td></tr>
  <tr class="msg" id="L344"><td class="ts-cell"><a class="ts" href="#L344" alt="Mon Apr 06 2015 11:55:27 GMT-0700 (Pacific Daylight Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">body.pipeTo(ws) ... currently that will fulfill early if ws buffers some writes ... that seems wrong though, we should fix that to fulfill only after all writes and the close complete. Or maybe it already does and I&#039;m confused.</td></tr>
  <tr class="msg" id="L345"><td class="ts-cell"><a class="ts" href="#L345" alt="Mon Apr 06 2015 11:55:54 GMT-0700 (Pacific Daylight Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: it seems the WritableStream implementation could make that determination by setting its internal buffer to &quot;zero&quot; effectively?</td></tr>
  <tr class="msg" id="L346"><td class="ts-cell"><a class="ts" href="#L346" alt="Mon Apr 06 2015 11:55:57 GMT-0700 (Pacific Daylight Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: I don&#039;t know if that&#039;s as useful as just progress events or similar on the Request object...</td></tr>
  <tr class="msg" id="L347"><td class="ts-cell"><a class="ts" href="#L347" alt="Mon Apr 06 2015 11:56:01 GMT-0700 (Pacific Daylight Time)">18:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">or just lying</td></tr>
  <tr class="msg" id="L348"><td class="ts-cell"><a class="ts" href="#L348" alt="Mon Apr 06 2015 11:56:07 GMT-0700 (Pacific Daylight Time)">18:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: ok</td></tr>
  <tr class="msg" id="L349"><td class="ts-cell"><a class="ts" href="#L349" alt="Mon Apr 06 2015 11:56:08 GMT-0700 (Pacific Daylight Time)">18:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: yeah I think so.</td></tr>
  <tr class="msg" id="L350"><td class="ts-cell"><a class="ts" href="#L350" alt="Mon Apr 06 2015 11:56:36 GMT-0700 (Pacific Daylight Time)">18:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: ok, I&#039;ll stop pestering you with this stuff now :-) later</td></tr>
  <tr class="msg" id="L351"><td class="ts-cell"><a class="ts" href="#L351" alt="Mon Apr 06 2015 11:57:15 GMT-0700 (Pacific Daylight Time)">18:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Domenic: not sure how much wiggle room there still is, but if we need to redesign certain pieces it&#039;d be good to raise an issue on them</td></tr>
  <tr class="msg" id="L352"><td class="ts-cell"><a class="ts" href="#L352" alt="Mon Apr 06 2015 12:00:37 GMT-0700 (Pacific Daylight Time)">19:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: no problem! this was pretty great I think. Have a good flight!</td></tr>
  <tr class="msg" id="L353"><td class="ts-cell"><a class="ts" href="#L353" alt="Mon Apr 06 2015 12:00:59 GMT-0700 (Pacific Daylight Time)">19:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">annevk: yeah... I think the setWritable idea is pretty reasonable now that I keep turning it over in my head. I tried to outline it more in the issue.</td></tr>
  <tr class="msg" id="L354"><td class="ts-cell"><a class="ts" href="#L354" alt="Mon Apr 06 2015 12:01:33 GMT-0700 (Pacific Daylight Time)">19:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">Domenic: pipeTo() promise fulfills once the source is done and dest.ready fulfills</td></tr>
  <tr class="msg" id="L355"><td class="ts-cell"><a class="ts" href="#L355" alt="Mon Apr 06 2015 12:01:42 GMT-0700 (Pacific Daylight Time)">19:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">currently.</td></tr>
  <tr class="msg" id="L356"><td class="ts-cell"><a class="ts" href="#L356" alt="Mon Apr 06 2015 12:01:51 GMT-0700 (Pacific Daylight Time)">19:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">tyoshino: that seems bad, hmm, we should wait for dest.closed I think</td></tr>
  <tr class="msg" id="L357"><td class="ts-cell"><a class="ts" href="#L357" alt="Mon Apr 06 2015 12:02:31 GMT-0700 (Pacific Daylight Time)">19:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">on the other hand it has the flavor of something i already thought about and put the current behavior in for a good reason... darn past-Domenic.</td></tr>
  <tr class="msg" id="L358"><td class="ts-cell"><a class="ts" href="#L358" alt="Mon Apr 06 2015 12:02:34 GMT-0700 (Pacific Daylight Time)">19:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Domenic: looks reasonable</td></tr>
  <tr class="msg" id="L359"><td class="ts-cell"><a class="ts" href="#L359" alt="Mon Apr 06 2015 12:02:42 GMT-0700 (Pacific Daylight Time)">19:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">annevk: \o/</td></tr>
  <tr class="msg" id="L360"><td class="ts-cell"><a class="ts" href="#L360" alt="Mon Apr 06 2015 12:02:59 GMT-0700 (Pacific Daylight Time)">19:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Domenic: though I also got excited by the redesign everything ideas :p</td></tr>
  <tr class="msg" id="L361"><td class="ts-cell"><a class="ts" href="#L361" alt="Mon Apr 06 2015 12:03:48 GMT-0700 (Pacific Daylight Time)">19:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">hahaha</td></tr>
  <tr class="msg" id="L362"><td class="ts-cell"><a class="ts" href="#L362" alt="Mon Apr 06 2015 12:06:15 GMT-0700 (Pacific Daylight Time)">19:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: I&#039;m leaving... but it occurs to me... will the fetch() sanitize step play havoc with this setWriter() plan?  since fetch is operating on a copy of the request?</td></tr>
  <tr class="msg" id="L363"><td class="ts-cell"><a class="ts" href="#L363" alt="Mon Apr 06 2015 12:07:49 GMT-0700 (Pacific Daylight Time)">19:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">Domenic: Yes. It was discussed in past at <a href="https://github.com/whatwg/streams/issues/236#issue-46428456">https://github.com/whatwg/streams/issues/236#issue-46428456</a></td></tr>
  <tr class="msg" id="L364"><td class="ts-cell"><a class="ts" href="#L364" alt="Mon Apr 06 2015 12:08:11 GMT-0700 (Pacific Daylight Time)">19:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: no, the stream is carefully moved</td></tr>
  <tr class="msg" id="L365"><td class="ts-cell"><a class="ts" href="#L365" alt="Mon Apr 06 2015 12:08:20 GMT-0700 (Pacific Daylight Time)">19:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">cool</td></tr>
  <tr class="msg" id="L366"><td class="ts-cell"><a class="ts" href="#L366" alt="Mon Apr 06 2015 12:08:22 GMT-0700 (Pacific Daylight Time)">19:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">ok, nye</td></tr>
  <tr class="msg" id="L367"><td class="ts-cell"><a class="ts" href="#L367" alt="Mon Apr 06 2015 12:08:23 GMT-0700 (Pacific Daylight Time)">19:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">bye</td></tr>
  <tr class="msg" id="L368"><td class="ts-cell"><a class="ts" href="#L368" alt="Mon Apr 06 2015 12:08:25 GMT-0700 (Pacific Daylight Time)">19:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: sort of akin to Domenic&#039;s design</td></tr>
  <tr class="msg" id="L369"><td class="ts-cell"><a class="ts" href="#L369" alt="Mon Apr 06 2015 12:08:30 GMT-0700 (Pacific Daylight Time)">19:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: safe travels</td></tr>
  <tr class="msg" id="L370"><td class="ts-cell"><a class="ts" href="#L370" alt="Mon Apr 06 2015 12:08:57 GMT-0700 (Pacific Daylight Time)">19:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">annevk: wanderview should get most of the credit for that design (if you&#039;re referring to the one I just left a comment about on GitHub)</td></tr>
  <tr class="msg" id="L371"><td class="ts-cell"><a class="ts" href="#L371" alt="Mon Apr 06 2015 12:11:45 GMT-0700 (Pacific Daylight Time)">19:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">tyoshino: it seems like where we ended up in that thread was that it should wait for the write (and close?) to complete, but we forgot to implement that</td></tr>
  <tr class="msg" id="L372"><td class="ts-cell"><a class="ts" href="#L372" alt="Mon Apr 06 2015 12:12:19 GMT-0700 (Pacific Daylight Time)">19:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">tyoshino: no, wait, we did implement it. dest.close().then(resolvePipeToPromise, rejectPipeToPromise)</td></tr>
  <tr class="msg" id="L373"><td class="ts-cell"><a class="ts" href="#L373" alt="Mon Apr 06 2015 12:12:56 GMT-0700 (Pacific Daylight Time)">19:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">ah. preventClose == false</td></tr>
  <tr class="msg" id="L374"><td class="ts-cell"><a class="ts" href="#L374" alt="Mon Apr 06 2015 12:13:32 GMT-0700 (Pacific Daylight Time)">19:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">right, I see. In the preventClose === true case our semantics are perhaps unexpected</td></tr>
  <tr class="msg" id="L375"><td class="ts-cell"><a class="ts" href="#L375" alt="Mon Apr 06 2015 12:13:39 GMT-0700 (Pacific Daylight Time)">19:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">I will open an issue</td></tr>
  <tr class="msg" id="L376"><td class="ts-cell"><a class="ts" href="#L376" alt="Mon Apr 06 2015 12:15:37 GMT-0700 (Pacific Daylight Time)">19:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">Domenic: BTW, I&#039;d like to get your comment on what I was suggesting.</td></tr>
  <tr class="msg" id="L377"><td class="ts-cell"><a class="ts" href="#L377" alt="Mon Apr 06 2015 12:15:53 GMT-0700 (Pacific Daylight Time)">19:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">tyoshino: operationstream as a solution, you mean?</td></tr>
  <tr class="msg" id="L378"><td class="ts-cell"><a class="ts" href="#L378" alt="Mon Apr 06 2015 12:15:57 GMT-0700 (Pacific Daylight Time)">19:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">Yes</td></tr>
  <tr class="msg" id="L379"><td class="ts-cell"><a class="ts" href="#L379" alt="Mon Apr 06 2015 12:16:15 GMT-0700 (Pacific Daylight Time)">19:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">It was basically</td></tr>
  <tr class="msg" id="L380"><td class="ts-cell"><a class="ts" href="#L380" alt="Mon Apr 06 2015 12:16:20 GMT-0700 (Pacific Daylight Time)">19:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">sorry I was unclear</td></tr>
  <tr class="msg" id="L381"><td class="ts-cell"><a class="ts" href="#L381" alt="Mon Apr 06 2015 12:16:23 GMT-0700 (Pacific Daylight Time)">19:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">but it&#039;s</td></tr>
  <tr class="msg" id="L382"><td class="ts-cell"><a class="ts" href="#L382" alt="Mon Apr 06 2015 12:16:48 GMT-0700 (Pacific Daylight Time)">19:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">Request/Response has an extended ReadableStream side (possible hidden)</td></tr>
  <tr class="msg" id="L383"><td class="ts-cell"><a class="ts" href="#L383" alt="Mon Apr 06 2015 12:17:15 GMT-0700 (Pacific Daylight Time)">19:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">fetch(), cache.put(), etc. pipes the extended ReadableStream and WritableStream (CacheWritableStream, etc.)</td></tr>
  <tr class="msg" id="L384"><td class="ts-cell"><a class="ts" href="#L384" alt="Mon Apr 06 2015 12:17:37 GMT-0700 (Pacific Daylight Time)">19:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">CacheWritableStream (possibly hidden or public)</td></tr>
  <tr class="msg" id="L385"><td class="ts-cell"><a class="ts" href="#L385" alt="Mon Apr 06 2015 12:18:22 GMT-0700 (Pacific Daylight Time)">19:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">The extended ReadableStream can propagate completion of consumption to the Readable side of Request/Response</td></tr>
  <tr class="msg" id="L386"><td class="ts-cell"><a class="ts" href="#L386" alt="Mon Apr 06 2015 12:18:48 GMT-0700 (Pacific Daylight Time)">19:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">e.g. written to the kernel, that is represented by write() completion of CacheWritableStream, HttpUploadWritableStream</td></tr>
  <tr class="msg" id="L387"><td class="ts-cell"><a class="ts" href="#L387" alt="Mon Apr 06 2015 12:19:46 GMT-0700 (Pacific Daylight Time)">19:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">right ... I guess I am still cautious about conflating enqueuing into a readable stream&#039;s with writing to a writable stream, and thus indirectly to an underlying sink.</td></tr>
  <tr class="msg" id="L388"><td class="ts-cell"><a class="ts" href="#L388" alt="Mon Apr 06 2015 12:19:58 GMT-0700 (Pacific Daylight Time)">19:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">also, i can&#039;t imagine a non-awkward API for acknowledging reads</td></tr>
  <tr class="msg" id="L389"><td class="ts-cell"><a class="ts" href="#L389" alt="Mon Apr 06 2015 12:20:25 GMT-0700 (Pacific Daylight Time)">19:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">I&#039;m concerned, if</td></tr>
  <tr class="msg" id="L390"><td class="ts-cell"><a class="ts" href="#L390" alt="Mon Apr 06 2015 12:20:33 GMT-0700 (Pacific Daylight Time)">19:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">We want to build longer chain</td></tr>
  <tr class="msg" id="L391"><td class="ts-cell"><a class="ts" href="#L391" alt="Mon Apr 06 2015 12:21:43 GMT-0700 (Pacific Daylight Time)">19:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">if the idea of setWriter that is kinda propagating the sink itself to left</td></tr>
  <tr class="msg" id="L392"><td class="ts-cell"><a class="ts" href="#L392" alt="Mon Apr 06 2015 12:21:52 GMT-0700 (Pacific Daylight Time)">19:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">is better or not</td></tr>
  <tr class="msg" id="L393"><td class="ts-cell"><a class="ts" href="#L393" alt="Mon Apr 06 2015 12:22:36 GMT-0700 (Pacific Daylight Time)">19:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">&quot;propagating the sink itself to left&quot;?</td></tr>
  <tr class="msg" id="L394"><td class="ts-cell"><a class="ts" href="#L394" alt="Mon Apr 06 2015 12:22:44 GMT-0700 (Pacific Daylight Time)">19:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">Hmm. I don&#039;t know if we really want to create such a longer chain</td></tr>
  <tr class="msg" id="L395"><td class="ts-cell"><a class="ts" href="#L395" alt="Mon Apr 06 2015 12:23:10 GMT-0700 (Pacific Daylight Time)">19:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">left of the chain</td></tr>
  <tr class="msg" id="L396"><td class="ts-cell"><a class="ts" href="#L396" alt="Mon Apr 06 2015 12:23:12 GMT-0700 (Pacific Daylight Time)">19:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">a -&gt; b -&gt; c</td></tr>
  <tr class="msg" id="L397"><td class="ts-cell"><a class="ts" href="#L397" alt="Mon Apr 06 2015 12:24:07 GMT-0700 (Pacific Daylight Time)">19:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">still a bit confused ... let&#039;s say I have res1.body -&gt; transform1 -&gt; transform2 -&gt; res2.bodyWriter (a HttpUploadStream). What are you worried about?</td></tr>
  <tr class="msg" id="L398"><td class="ts-cell"><a class="ts" href="#L398" alt="Mon Apr 06 2015 12:24:17 GMT-0700 (Pacific Daylight Time)">19:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">setWriter is kinda collapsing Request and fetch(). right?</td></tr>
  <tr class="msg" id="L399"><td class="ts-cell"><a class="ts" href="#L399" alt="Mon Apr 06 2015 12:24:51 GMT-0700 (Pacific Daylight Time)">19:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">It&#039;s saying &quot;this Request now represents a fetch, not a cache write or anything else&quot;, is how I think of it.</td></tr>
  <tr class="msg" id="L400"><td class="ts-cell"><a class="ts" href="#L400" alt="Mon Apr 06 2015 12:26:54 GMT-0700 (Pacific Daylight Time)">19:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">In that chain, can res1.body know when a chunk it generated has been successfully uploaded?</td></tr>
  <tr class="msg" id="L401"><td class="ts-cell"><a class="ts" href="#L401" alt="Mon Apr 06 2015 12:27:03 GMT-0700 (Pacific Daylight Time)">19:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Does it need to be this Request or can it be that the stream is now associated with a fetch?</td></tr>
  <tr class="msg" id="L402"><td class="ts-cell"><a class="ts" href="#L402" alt="Mon Apr 06 2015 12:27:29 GMT-0700 (Pacific Daylight Time)">19:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Because it&#039;s more like we discard the Request and use its stream...</td></tr>
  <tr class="msg" id="L403"><td class="ts-cell"><a class="ts" href="#L403" alt="Mon Apr 06 2015 12:28:09 GMT-0700 (Pacific Daylight Time)">19:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">annevk: well wanderview&#039;s gist makes it so you keep using the Request object ... do you think that&#039;s unworkable?</td></tr>
  <tr class="msg" id="L404"><td class="ts-cell"><a class="ts" href="#L404" alt="Mon Apr 06 2015 12:28:33 GMT-0700 (Pacific Daylight Time)">19:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: currently no ... pipe discards write() return values and only reacts to errors and backpressure</td></tr>
  <tr class="msg" id="L405"><td class="ts-cell"><a class="ts" href="#L405" alt="Mon Apr 06 2015 12:28:42 GMT-0700 (Pacific Daylight Time)">19:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">sorry, s/wanderview/tyoshino/</td></tr>
  <tr class="msg" id="L406"><td class="ts-cell"><a class="ts" href="#L406" alt="Mon Apr 06 2015 12:29:28 GMT-0700 (Pacific Daylight Time)">19:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">Domenic: Right. And my understanding is the goal of that is making the promise returned by write() to represent commit to file, DB, network, etc.?</td></tr>
  <tr class="msg" id="L407"><td class="ts-cell"><a class="ts" href="#L407" alt="Mon Apr 06 2015 12:29:34 GMT-0700 (Pacific Daylight Time)">19:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">tyoshino: yeah</td></tr>
  <tr class="msg" id="L408"><td class="ts-cell"><a class="ts" href="#L408" alt="Mon Apr 06 2015 12:29:41 GMT-0700 (Pacific Daylight Time)">19:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Domenic: not sure</td></tr>
  <tr class="msg" id="L409"><td class="ts-cell"><a class="ts" href="#L409" alt="Mon Apr 06 2015 12:29:57 GMT-0700 (Pacific Daylight Time)">19:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Domenic: see step 2 of <a href="https://fetch.spec.whatwg.org/#dom-global-fetch">https://fetch.spec.whatwg.org/#dom-global-fetch</a></td></tr>
  <tr class="msg" id="L410"><td class="ts-cell"><a class="ts" href="#L410" alt="Mon Apr 06 2015 12:30:26 GMT-0700 (Pacific Daylight Time)">19:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">annevk: hmm I see</td></tr>
  <tr class="msg" id="L411"><td class="ts-cell"><a class="ts" href="#L411" alt="Mon Apr 06 2015 12:31:14 GMT-0700 (Pacific Daylight Time)">19:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">annevk: I would imagine it could be made to work. But the question is, what do we want developers to be doing. We could also do const upload = fetch(request); upload.bodyWriter.write() with a promise subclass, I guess.</td></tr>
  <tr class="msg" id="L412"><td class="ts-cell"><a class="ts" href="#L412" alt="Mon Apr 06 2015 12:31:35 GMT-0700 (Pacific Daylight Time)">19:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">OK. So, we can know at each point of the chain that the right half of the chain has finished consumption via write() promise</td></tr>
  <tr class="msg" id="L413"><td class="ts-cell"><a class="ts" href="#L413" alt="Mon Apr 06 2015 12:32:17 GMT-0700 (Pacific Daylight Time)">19:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">tyoshino: we could, yeah, although we currently don&#039;t, hmm.</td></tr>
  <tr class="msg" id="L414"><td class="ts-cell"><a class="ts" href="#L414" alt="Mon Apr 06 2015 12:32:34 GMT-0700 (Pacific Daylight Time)">19:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">tyoshino: the complicating factor here is that we generally anticipate some queues being introduced in each intermediate step</td></tr>
  <tr class="msg" id="L415"><td class="ts-cell"><a class="ts" href="#L415" alt="Mon Apr 06 2015 12:32:51 GMT-0700 (Pacific Daylight Time)">19:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">i&#039;m basically trying investigate if this appraoch works well with BYOB streaming</td></tr>
  <tr class="msg" id="L416"><td class="ts-cell"><a class="ts" href="#L416" alt="Mon Apr 06 2015 12:32:59 GMT-0700 (Pacific Daylight Time)">19:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Ah, good question</td></tr>
  <tr class="msg" id="L417"><td class="ts-cell"><a class="ts" href="#L417" alt="Mon Apr 06 2015 12:33:26 GMT-0700 (Pacific Daylight Time)">19:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Domenic: I think for developers the easiest would be to pass a writable to Request or fetch() and have that just work</td></tr>
  <tr class="msg" id="L418"><td class="ts-cell"><a class="ts" href="#L418" alt="Mon Apr 06 2015 12:33:38 GMT-0700 (Pacific Daylight Time)">19:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">maybe i&#039;m too pessimistic</td></tr>
  <tr class="msg" id="L419"><td class="ts-cell"><a class="ts" href="#L419" alt="Mon Apr 06 2015 12:33:40 GMT-0700 (Pacific Daylight Time)">19:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Domenic: regardless of who reads</td></tr>
  <tr class="msg" id="L420"><td class="ts-cell"><a class="ts" href="#L420" alt="Mon Apr 06 2015 12:33:42 GMT-0700 (Pacific Daylight Time)">19:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">but to make sure...</td></tr>
  <tr class="msg" id="L421"><td class="ts-cell"><a class="ts" href="#L421" alt="Mon Apr 06 2015 12:34:03 GMT-0700 (Pacific Daylight Time)">19:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">annevk: how do they create the writable? they can&#039;t create HttpUploadStreams...</td></tr>
  <tr class="msg" id="L422"><td class="ts-cell"><a class="ts" href="#L422" alt="Mon Apr 06 2015 12:34:13 GMT-0700 (Pacific Daylight Time)">19:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">maybe in general transformation consumes data and generate something new to the left</td></tr>
  <tr class="msg" id="L423"><td class="ts-cell"><a class="ts" href="#L423" alt="Mon Apr 06 2015 12:34:17 GMT-0700 (Pacific Daylight Time)">19:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">s/left/right/</td></tr>
  <tr class="msg" id="L424"><td class="ts-cell"><a class="ts" href="#L424" alt="Mon Apr 06 2015 12:34:57 GMT-0700 (Pacific Daylight Time)">19:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Domenic: body: ws =&gt; ... or some such?</td></tr>
  <tr class="msg" id="L425"><td class="ts-cell"><a class="ts" href="#L425" alt="Mon Apr 06 2015 12:35:24 GMT-0700 (Pacific Daylight Time)">19:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Domenic: the moment you start the operation the callback gets invoked and hands you a writeable</td></tr>
  <tr class="msg" id="L426"><td class="ts-cell"><a class="ts" href="#L426" alt="Mon Apr 06 2015 12:35:44 GMT-0700 (Pacific Daylight Time)">19:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">annevk: right, that was where we started, but wanderview didn&#039;t like it :)</td></tr>
  <tr class="msg" id="L427"><td class="ts-cell"><a class="ts" href="#L427" alt="Mon Apr 06 2015 12:36:00 GMT-0700 (Pacific Daylight Time)">19:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">so, for most of transform, whether transformX has consumed the ArrayBufferView passed to transformX is meaningful</td></tr>
  <tr class="msg" id="L428"><td class="ts-cell"><a class="ts" href="#L428" alt="Mon Apr 06 2015 12:36:05 GMT-0700 (Pacific Daylight Time)">19:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Domenic: this would either be for req = new Req(..., body ...); req.body.getReader(); or when you pass to fetch(), or when you pass to cache</td></tr>
  <tr class="msg" id="L429"><td class="ts-cell"><a class="ts" href="#L429" alt="Mon Apr 06 2015 12:36:05 GMT-0700 (Pacific Daylight Time)">19:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">transformX -&gt; transformY</td></tr>
  <tr class="msg" id="L430"><td class="ts-cell"><a class="ts" href="#L430" alt="Mon Apr 06 2015 12:36:11 GMT-0700 (Pacific Daylight Time)">19:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Domenic: I see</td></tr>
  <tr class="msg" id="L431"><td class="ts-cell"><a class="ts" href="#L431" alt="Mon Apr 06 2015 12:36:14 GMT-0700 (Pacific Daylight Time)">19:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">tyoshino: that sounds right to me.</td></tr>
  <tr class="msg" id="L432"><td class="ts-cell"><a class="ts" href="#L432" alt="Mon Apr 06 2015 12:36:44 GMT-0700 (Pacific Daylight Time)">19:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Domenic: well the alternative is to pipe it to HttpUploadStream</td></tr>
  <tr class="msg" id="L433"><td class="ts-cell"><a class="ts" href="#L433" alt="Mon Apr 06 2015 12:36:47 GMT-0700 (Pacific Daylight Time)">19:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">ok. then, I think the concern I had only applies to a simple queue.</td></tr>
  <tr class="msg" id="L434"><td class="ts-cell"><a class="ts" href="#L434" alt="Mon Apr 06 2015 12:37:00 GMT-0700 (Pacific Daylight Time)">19:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Domenic: and maybe the UA can do magic to make the piping disappear</td></tr>
  <tr class="msg" id="L435"><td class="ts-cell"><a class="ts" href="#L435" alt="Mon Apr 06 2015 12:37:42 GMT-0700 (Pacific Daylight Time)">19:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">annevk: the main arguments against it were in response to <a href="https://github.com/yutakahirano/fetch-with-streams/issues/30#issuecomment-90151618">https://github.com/yutakahirano/fetch-with-streams/issues/30#issuecomment-90151618</a> but yeah agreed on pipe to HttpUploadStream</td></tr>
  <tr class="msg" id="L436"><td class="ts-cell"><a class="ts" href="#L436" alt="Mon Apr 06 2015 12:38:49 GMT-0700 (Pacific Daylight Time)">19:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Domenic: thanks for the pointer, I guess I should talk to wanderview about my concerns</td></tr>
  <tr class="msg" id="L437"><td class="ts-cell"><a class="ts" href="#L437" alt="Mon Apr 06 2015 12:38:59 GMT-0700 (Pacific Daylight Time)">19:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Domenic: and maybe he can do something even cleverer</td></tr>
  <tr class="msg" id="L438"><td class="ts-cell"><a class="ts" href="#L438" alt="Mon Apr 06 2015 12:39:22 GMT-0700 (Pacific Daylight Time)">19:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">You said we may add an identity transform to address wanderview&#039;s needs. We might need to give the identity transform ability to propagate consumption completion signal when we designing BYOB ecosystem.</td></tr>
  <tr class="msg" id="L439"><td class="ts-cell"><a class="ts" href="#L439" alt="Mon Apr 06 2015 12:39:29 GMT-0700 (Pacific Daylight Time)">19:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">Not sure now...</td></tr>
  <tr class="msg" id="L440"><td class="ts-cell"><a class="ts" href="#L440" alt="Mon Apr 06 2015 12:40:32 GMT-0700 (Pacific Daylight Time)">19:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">tyoshino: that&#039;s a good test case, very interesting. Existing transform has I believe (enqueue, done, close, error) or something, although that could become promise-returning (enqueue, close, error). Maybe the done() signal is enough to say it&#039;s consumed? But, would be worth exploring more.</td></tr>
  <tr class="msg" id="L441"><td class="ts-cell"><a class="ts" href="#L441" alt="Mon Apr 06 2015 12:40:56 GMT-0700 (Pacific Daylight Time)">19:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">tyoshino: are trailers high-priority? I guess we want to do them after streams?</td></tr>
  <tr class="msg" id="L442"><td class="ts-cell"><a class="ts" href="#L442" alt="Mon Apr 06 2015 12:41:03 GMT-0700 (Pacific Daylight Time)">19:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">yeah. let&#039;s at least investigate</td></tr>
  <tr class="msg" id="L443"><td class="ts-cell"><a class="ts" href="#L443" alt="Mon Apr 06 2015 12:41:12 GMT-0700 (Pacific Daylight Time)">19:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">annevk: yeah</td></tr>
  <tr class="msg" id="L444"><td class="ts-cell"><a class="ts" href="#L444" alt="Mon Apr 06 2015 12:41:42 GMT-0700 (Pacific Daylight Time)">19:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">annevk: i was requested to bring it up to the standardization body</td></tr>
  <tr class="msg" id="L445"><td class="ts-cell"><a class="ts" href="#L445" alt="Mon Apr 06 2015 12:42:25 GMT-0700 (Pacific Daylight Time)">19:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">louiscryan who&#039;s on the issue is actual gRPC developer</td></tr>
  <tr class="msg" id="L446"><td class="ts-cell"><a class="ts" href="#L446" alt="Mon Apr 06 2015 12:43:47 GMT-0700 (Pacific Daylight Time)">19:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">I don&#039;t know exact timeframe yet. But I just thought it&#039;s better to think of interference with streams, etc. earlier.</td></tr>
  <tr class="msg" id="L447"><td class="ts-cell"><a class="ts" href="#L447" alt="Mon Apr 06 2015 12:44:00 GMT-0700 (Pacific Daylight Time)">19:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">tyoshino: sgtm</td></tr>
  <tr class="msg" id="L448"><td class="ts-cell"><a class="ts" href="#L448" alt="Mon Apr 06 2015 12:44:02 GMT-0700 (Pacific Daylight Time)">19:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">Actual spec-cing may be not so urgent</td></tr>
  <tr class="msg" id="L449"><td class="ts-cell"><a class="ts" href="#L449" alt="Mon Apr 06 2015 12:44:14 GMT-0700 (Pacific Daylight Time)">19:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">tyoshino: also, any thoughts on the HTTP proxy authentication thing from <a href="https://github.com/slightlyoff/ServiceWorker/issues/533">https://github.com/slightlyoff/ServiceWorker/issues/533</a> ?</td></tr>
  <tr class="msg" id="L450"><td class="ts-cell"><a class="ts" href="#L450" alt="Mon Apr 06 2015 12:44:51 GMT-0700 (Pacific Daylight Time)">19:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">tyoshino: there&#039;s a feature to prevent redirects, but HTTP proxy authentication could still require the entire upload stream to be teed</td></tr>
  <tr class="msg" id="L451"><td class="ts-cell"><a class="ts" href="#L451" alt="Mon Apr 06 2015 12:45:26 GMT-0700 (Pacific Daylight Time)">19:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">tyoshino: and while we could indeed invent another server protocol to do some damage control, that hardly seems elegant</td></tr>
  <tr class="msg" id="L452"><td class="ts-cell"><a class="ts" href="#L452" alt="Mon Apr 06 2015 12:46:11 GMT-0700 (Pacific Daylight Time)">19:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">nothing new than what i said in the comment so far. i need to learn more about difficulties you described in your comment</td></tr>
  <tr class="msg" id="L453"><td class="ts-cell"><a class="ts" href="#L453" alt="Mon Apr 06 2015 12:46:34 GMT-0700 (Pacific Daylight Time)">19:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">yeah</td></tr>
  <tr class="msg" id="L454"><td class="ts-cell"><a class="ts" href="#L454" alt="Mon Apr 06 2015 12:47:03 GMT-0700 (Pacific Daylight Time)">19:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">so basically before Fetch hits the network the request body is teed</td></tr>
  <tr class="msg" id="L455"><td class="ts-cell"><a class="ts" href="#L455" alt="Mon Apr 06 2015 12:47:10 GMT-0700 (Pacific Daylight Time)">19:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">i&#039;d basically like to avoid involvement by protocol layer</td></tr>
  <tr class="msg" id="L456"><td class="ts-cell"><a class="ts" href="#L456" alt="Mon Apr 06 2015 12:47:14 GMT-0700 (Pacific Daylight Time)">19:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">this is done for 1) redirects 2) HTTP auth 3) HTTP proxy auth</td></tr>
  <tr class="msg" id="L457"><td class="ts-cell"><a class="ts" href="#L457" alt="Mon Apr 06 2015 12:47:54 GMT-0700 (Pacific Daylight Time)">19:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">automatic HTTP auth is disabled by fetch() so 2 is not relevant, 1 can be disabled using { redirect: &quot;error&quot; }</td></tr>
  <tr class="msg" id="L458"><td class="ts-cell"><a class="ts" href="#L458" alt="Mon Apr 06 2015 12:47:59 GMT-0700 (Pacific Daylight Time)">19:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">leaves 3 :-(</td></tr>
  <tr class="msg" id="L459"><td class="ts-cell"><a class="ts" href="#L459" alt="Mon Apr 06 2015 12:49:03 GMT-0700 (Pacific Daylight Time)">19:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">ya...</td></tr>
  <tr class="msg" id="L460"><td class="ts-cell"><a class="ts" href="#L460" alt="Mon Apr 06 2015 12:49:48 GMT-0700 (Pacific Daylight Time)">19:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">if you find anyone within Chrome happy to discuss HTTP proxy auth please send them my way :-)</td></tr>
  <tr class="msg" id="L461"><td class="ts-cell"><a class="ts" href="#L461" alt="Mon Apr 06 2015 12:50:51 GMT-0700 (Pacific Daylight Time)">19:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">ok. i&#039;ll chime someone</td></tr>
  <tr class="msg" id="L462"><td class="ts-cell"><a class="ts" href="#L462" alt="Mon Apr 06 2015 12:52:05 GMT-0700 (Pacific Daylight Time)">19:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=tyoshino@irc>tyoshino</span>&gt;</div></td><td class="msg-cell">going to bed. ttyl :)</td></tr>
  <tr class="msg" id="L463"><td class="ts-cell"><a class="ts" href="#L463" alt="Mon Apr 06 2015 12:52:42 GMT-0700 (Pacific Daylight Time)">19:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">same here, hope you&#039;re not in Tokyo atm :p</td></tr>
  <tr class="msg" id="L464"><td class="ts-cell"><a class="ts" href="#L464" alt="Mon Apr 06 2015 12:57:19 GMT-0700 (Pacific Daylight Time)">19:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=neonstalwart@irc>neonstalwart</span>&gt;</div></td><td class="msg-cell">@Domenic - fyi, you may have rushed your description for <a href="https://github.com/whatwg/streams/issues/314">https://github.com/whatwg/streams/issues/314</a>.  check preventClose: false vs preventClose: true</td></tr>
  <tr class="msg" id="L465"><td class="ts-cell"><a class="ts" href="#L465" alt="Mon Apr 06 2015 13:02:27 GMT-0700 (Pacific Daylight Time)">20:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">neonstalwart: thanks, fixed!</td></tr>
  <tr class="msg" id="L466"><td class="ts-cell"><a class="ts" href="#L466" alt="Mon Apr 06 2015 13:24:07 GMT-0700 (Pacific Daylight Time)">20:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: yes, the fact that fetch throws away the Request was what concerned me...  I think its somewhat mitigated in that you cannot reuse a drained Request</td></tr>
  <tr class="msg" id="L467"><td class="ts-cell"><a class="ts" href="#L467" alt="Mon Apr 06 2015 13:24:20 GMT-0700 (Pacific Daylight Time)">20:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">but we&#039;ve been trying to avoid consumer state on the Request</td></tr>
  <tr class="msg" id="L468"><td class="ts-cell"><a class="ts" href="#L468" alt="Mon Apr 06 2015 13:25:51 GMT-0700 (Pacific Daylight Time)">20:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: Domenic: I&#039;m ok with new Request(url, { body: ws =&gt; blah }) if there is still an option to pass a ReadableStream in the constructor... it would just have to get progress through an alternate path, which I think Domenic said he was ok with...  The WritableStream approach is really only necessary if you need to know when the bytes are written to the</td></tr>
  <tr class="msg" id="L469"><td class="ts-cell"><a class="ts" href="#L469" alt="Mon Apr 06 2015 13:25:51 GMT-0700 (Pacific Daylight Time)">20:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">kernel</td></tr>
  <tr class="msg" id="L470"><td class="ts-cell"><a class="ts" href="#L470" alt="Mon Apr 06 2015 13:26:41 GMT-0700 (Pacific Daylight Time)">20:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">(or when you&#039;re working with an abstraction or library that expects data sinks to be represented as writable streams!)</td></tr>
  <tr class="msg" id="L471"><td class="ts-cell"><a class="ts" href="#L471" alt="Mon Apr 06 2015 13:26:49 GMT-0700 (Pacific Daylight Time)">20:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">yes</td></tr>
  <tr class="msg" id="L472"><td class="ts-cell"><a class="ts" href="#L472" alt="Mon Apr 06 2015 13:27:28 GMT-0700 (Pacific Daylight Time)">20:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">And yeah, I think response.addEventListener(&quot;progress&quot;, ...), if nothing else, is totally fine to build on top of streams once we know those semantics.</td></tr>
  <tr class="msg" id="L473"><td class="ts-cell"><a class="ts" href="#L473" alt="Mon Apr 06 2015 13:27:56 GMT-0700 (Pacific Daylight Time)">20:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">oh in this case it would be request though, which brings us back to the is-request-heavy-or-light question</td></tr>
  <tr class="msg" id="L474"><td class="ts-cell"><a class="ts" href="#L474" alt="Mon Apr 06 2015 13:28:29 GMT-0700 (Pacific Daylight Time)">20:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I think you would have to do fetch(request, {progress: handler});  not sure what annevk feels about that</td></tr>
  <tr class="msg" id="L475"><td class="ts-cell"><a class="ts" href="#L475" alt="Mon Apr 06 2015 13:30:51 GMT-0700 (Pacific Daylight Time)">20:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">which I like... because I don&#039;t want to bite off providing progress from Cache right now</td></tr>
  <tr class="msg" id="L476"><td class="ts-cell"><a class="ts" href="#L476" alt="Mon Apr 06 2015 13:31:49 GMT-0700 (Pacific Daylight Time)">20:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: what happens if someone does var r = new Request(url, { body: ws =&gt; blah); r.body.getReader().read()?</td></tr>
  <tr class="msg" id="L477"><td class="ts-cell"><a class="ts" href="#L477" alt="Mon Apr 06 2015 13:32:03 GMT-0700 (Pacific Daylight Time)">20:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">does it invoke the body function with a pipe just in time?</td></tr>
  <tr class="msg" id="L478"><td class="ts-cell"><a class="ts" href="#L478" alt="Mon Apr 06 2015 13:32:08 GMT-0700 (Pacific Daylight Time)">20:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">on first getReader()</td></tr>
  <tr class="msg" id="L479"><td class="ts-cell"><a class="ts" href="#L479" alt="Mon Apr 06 2015 13:34:05 GMT-0700 (Pacific Daylight Time)">20:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: my thought was the body() function is always immediately called. Then ws routes to several different possible destinations: r.body, upload, cache, ... per my code sample, which you (rightly) pointed out was not extensible.</td></tr>
  <tr class="msg" id="L480"><td class="ts-cell"><a class="ts" href="#L480" alt="Mon Apr 06 2015 13:34:51 GMT-0700 (Pacific Daylight Time)">20:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I think you have to wait until a consumer sets the stream... possibly stealing the body at the same time</td></tr>
  <tr class="msg" id="L481"><td class="ts-cell"><a class="ts" href="#L481" alt="Mon Apr 06 2015 13:35:08 GMT-0700 (Pacific Daylight Time)">20:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: maybe setting the stream should be definition mark the bodyUsed flag on the Request</td></tr>
  <tr class="msg" id="L482"><td class="ts-cell"><a class="ts" href="#L482" alt="Mon Apr 06 2015 13:35:15 GMT-0700 (Pacific Daylight Time)">20:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">actually, it definitely should</td></tr>
  <tr class="msg" id="L483"><td class="ts-cell"><a class="ts" href="#L483" alt="Mon Apr 06 2015 13:35:55 GMT-0700 (Pacific Daylight Time)">20:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">sets the stream, as in, setWriter? So we are doing a synthesis of setWriter and body: ws =&gt; blah?</td></tr>
  <tr class="msg" id="L484"><td class="ts-cell"><a class="ts" href="#L484" alt="Mon Apr 06 2015 13:36:25 GMT-0700 (Pacific Daylight Time)">20:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I think you can&#039;t set the writer until the Request is passed to a consumer... so I don&#039;t know how to do it immediately at construction time</td></tr>
  <tr class="msg" id="L485"><td class="ts-cell"><a class="ts" href="#L485" alt="Mon Apr 06 2015 13:36:59 GMT-0700 (Pacific Daylight Time)">20:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: agreed, i was confused and thought going back to body: ws =&gt; blah meant going back to my code sketch</td></tr>
  <tr class="msg" id="L486"><td class="ts-cell"><a class="ts" href="#L486" alt="Mon Apr 06 2015 13:37:03 GMT-0700 (Pacific Daylight Time)">20:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: body: ws =&gt; blah is essentially a &quot;start pushing the body&quot; function... we don&#039;t want to push the body until it has somewhere to go</td></tr>
  <tr class="msg" id="L487"><td class="ts-cell"><a class="ts" href="#L487" alt="Mon Apr 06 2015 13:37:42 GMT-0700 (Pacific Daylight Time)">20:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">going to have to think about how to implement that then if we want getReader() to be the trigger...</td></tr>
  <tr class="msg" id="L488"><td class="ts-cell"><a class="ts" href="#L488" alt="Mon Apr 06 2015 13:38:32 GMT-0700 (Pacific Daylight Time)">20:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: well... set the writer stream could also trigger the push immediately at that point without getReader()... the .body stream should probably be considered locked at that point</td></tr>
  <tr class="msg" id="L489"><td class="ts-cell"><a class="ts" href="#L489" alt="Mon Apr 06 2015 13:38:59 GMT-0700 (Pacific Daylight Time)">20:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">because you don&#039;t really have a ReadableStream at all</td></tr>
  <tr class="msg" id="L490"><td class="ts-cell"><a class="ts" href="#L490" alt="Mon Apr 06 2015 13:39:29 GMT-0700 (Pacific Daylight Time)">20:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">I only want to auto-create a pipe if someone is using the body: ws =&gt; blah form... but then someone tries to use getReader() instead of setting a writer</td></tr>
  <tr class="msg" id="L491"><td class="ts-cell"><a class="ts" href="#L491" alt="Mon Apr 06 2015 13:39:51 GMT-0700 (Pacific Daylight Time)">20:39</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-12" title=wanderview@irc>wanderview</span></div></td><td class="msg-cell">thinks we need a better name than body: ws =&gt; blah</td></tr>
  <tr class="msg" id="L492"><td class="ts-cell"><a class="ts" href="#L492" alt="Mon Apr 06 2015 13:39:54 GMT-0700 (Pacific Daylight Time)">20:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">right, I agree setWriter is a good trigger, but unsure about how to trigger given r.body.getReader()</td></tr>
  <tr class="msg" id="L493"><td class="ts-cell"><a class="ts" href="#L493" alt="Mon Apr 06 2015 13:39:56 GMT-0700 (Pacific Daylight Time)">20:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">heh</td></tr>
  <tr class="msg" id="L494"><td class="ts-cell"><a class="ts" href="#L494" alt="Mon Apr 06 2015 13:40:04 GMT-0700 (Pacific Daylight Time)">20:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">ws-revealer?</td></tr>
  <tr class="msg" id="L495"><td class="ts-cell"><a class="ts" href="#L495" alt="Mon Apr 06 2015 13:40:09 GMT-0700 (Pacific Daylight Time)">20:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: body getter?</td></tr>
  <tr class="msg" id="L496"><td class="ts-cell"><a class="ts" href="#L496" alt="Mon Apr 06 2015 13:40:15 GMT-0700 (Pacific Daylight Time)">20:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">trigger on body getter</td></tr>
  <tr class="msg" id="L497"><td class="ts-cell"><a class="ts" href="#L497" alt="Mon Apr 06 2015 13:40:22 GMT-0700 (Pacific Daylight Time)">20:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">yeah maybe</td></tr>
  <tr class="msg" id="L498"><td class="ts-cell"><a class="ts" href="#L498" alt="Mon Apr 06 2015 13:40:33 GMT-0700 (Pacific Daylight Time)">20:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">could play havoc with dev tools, though</td></tr>
  <tr class="msg" id="L499"><td class="ts-cell"><a class="ts" href="#L499" alt="Mon Apr 06 2015 13:40:49 GMT-0700 (Pacific Daylight Time)">20:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">yeah getters with side effects seems like it would be nice to avoid if possible</td></tr>
  <tr class="msg" id="L500"><td class="ts-cell"><a class="ts" href="#L500" alt="Mon Apr 06 2015 13:41:03 GMT-0700 (Pacific Daylight Time)">20:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">getReader() seems like the right place for this, just need to make it work in the spec, but that&#039;s on me</td></tr>
  <tr class="msg" id="L501"><td class="ts-cell"><a class="ts" href="#L501" alt="Mon Apr 06 2015 13:41:43 GMT-0700 (Pacific Daylight Time)">20:41</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-12" title=wanderview@irc>wanderview</span></div></td><td class="msg-cell">will accept ws-revealer although he was angling for the &quot;the blah function&quot;.</td></tr>
  <tr class="msg" id="L502"><td class="ts-cell"><a class="ts" href="#L502" alt="Mon Apr 06 2015 13:42:12 GMT-0700 (Pacific Daylight Time)">20:42</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-1" title=Domenic@irc>Domenic</span></div></td><td class="msg-cell">the revealer function?</td></tr>
  <tr class="msg" id="L503"><td class="ts-cell"><a class="ts" href="#L503" alt="Mon Apr 06 2015 13:42:36 GMT-0700 (Pacific Daylight Time)">20:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">ws-revealer works for me</td></tr>
  <tr class="msg" id="L504"><td class="ts-cell"><a class="ts" href="#L504" alt="Mon Apr 06 2015 13:42:46 GMT-0700 (Pacific Daylight Time)">20:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Pretty clear instance of <a href="http://domenic.me/2014/02/13/the-revealing-constructor-pattern/">http://domenic.me/2014/02/13/the-revealing-constructor-pattern/</a> is the only reason I keep saying &quot;revealer&quot;</td></tr>
  <tr class="msg" id="L505"><td class="ts-cell"><a class="ts" href="#L505" alt="Mon Apr 06 2015 13:43:12 GMT-0700 (Pacific Daylight Time)">20:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Hmm I dislike how Firefox awesomebar keeps old URLs around even though they have redirects that I&#039;ve visited</td></tr>
  <tr class="msg" id="L506"><td class="ts-cell"><a class="ts" href="#L506" alt="Mon Apr 06 2015 13:43:17 GMT-0700 (Pacific Daylight Time)">20:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">(should be <a href="https://blog.domenic.me/the-revealing-constructor-pattern/">https://blog.domenic.me/the-revealing-constructor-pattern/</a> )</td></tr>
  <tr class="msg" id="L507"><td class="ts-cell"><a class="ts" href="#L507" alt="Mon Apr 06 2015 13:44:56 GMT-0700 (Pacific Daylight Time)">20:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=922514">https://bugzilla.mozilla.org/show_bug.cgi?id=922514</a></td></tr>
  <tr class="msg" id="L508"><td class="ts-cell"><a class="ts" href="#L508" alt="Mon Apr 06 2015 13:45:08 GMT-0700 (Pacific Daylight Time)">20:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: but this unfortunately was marked WONTFIX <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=426142">https://bugzilla.mozilla.org/show_bug.cgi?id=426142</a></td></tr>
  <tr class="msg" id="L509"><td class="ts-cell"><a class="ts" href="#L509" alt="Mon Apr 06 2015 13:45:22 GMT-0700 (Pacific Daylight Time)">20:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wowww it&#039;s funny to be reminded that bugzilla has bugs about the actual browser i use not just the web platform :P</td></tr>
  <tr class="msg" id="L510"><td class="ts-cell"><a class="ts" href="#L510" alt="Mon Apr 06 2015 13:45:56 GMT-0700 (Pacific Daylight Time)">20:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">oooh yeah that latter also sucks</td></tr>
  <tr class="msg" id="L511"><td class="ts-cell"><a class="ts" href="#L511" alt="Mon Apr 06 2015 13:46:41 GMT-0700 (Pacific Daylight Time)">20:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I guess they don&#039;t want to break muscle memory because the site moved the page</td></tr>
  <tr class="msg" id="L512"><td class="ts-cell"><a class="ts" href="#L512" alt="Mon Apr 06 2015 13:47:14 GMT-0700 (Pacific Daylight Time)">20:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">right. i guess what i find annoying is when both the old and new URLs show up in the search</td></tr>
  <tr class="msg" id="L513"><td class="ts-cell"><a class="ts" href="#L513" alt="Mon Apr 06 2015 13:47:36 GMT-0700 (Pacific Daylight Time)">20:47</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-12" title=wanderview@irc>wanderview</span></div></td><td class="msg-cell">boggles as the boarding line form 15 minutes before boarding.</td></tr>
  <tr class="msg" id="L514"><td class="ts-cell"><a class="ts" href="#L514" alt="Mon Apr 06 2015 13:48:02 GMT-0700 (Pacific Daylight Time)">20:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: mostly i just want it to read my mind</td></tr>
  <tr class="msg" id="L515"><td class="ts-cell"><a class="ts" href="#L515" alt="Mon Apr 06 2015 13:48:34 GMT-0700 (Pacific Daylight Time)">20:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: it basically does. it&#039;s mind-boggling how often one character is enough for it to go on. soooo much better than chrome.</td></tr>
  <tr class="msg" id="L516"><td class="ts-cell"><a class="ts" href="#L516" alt="Mon Apr 06 2015 13:49:05 GMT-0700 (Pacific Daylight Time)">20:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">I can&#039;t type &quot;streams-demo&quot; into my chrome location bar and get anything, despite visiting that page all the time. &quot;streams d&quot; gets it in Firefox.</td></tr>
  <tr class="msg" id="L517"><td class="ts-cell"><a class="ts" href="#L517" alt="Mon Apr 06 2015 13:49:19 GMT-0700 (Pacific Daylight Time)">20:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: in the Identity Transform stream... can we make a null transform function mean &quot;make a buffered pipe&quot;?</td></tr>
  <tr class="msg" id="L518"><td class="ts-cell"><a class="ts" href="#L518" alt="Mon Apr 06 2015 13:49:43 GMT-0700 (Pacific Daylight Time)">20:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: I think that&#039;s the idea, yeah.</td></tr>
  <tr class="msg" id="L519"><td class="ts-cell"><a class="ts" href="#L519" alt="Mon Apr 06 2015 13:49:47 GMT-0700 (Pacific Daylight Time)">20:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">I&#039;m glad I finally have it trained so &quot;streams&quot; goes to the spec</td></tr>
  <tr class="msg" id="L520"><td class="ts-cell"><a class="ts" href="#L520" alt="Mon Apr 06 2015 13:49:58 GMT-0700 (Pacific Daylight Time)">20:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: in the thing you linked it throws in that case right now</td></tr>
  <tr class="msg" id="L521"><td class="ts-cell"><a class="ts" href="#L521" alt="Mon Apr 06 2015 13:50:25 GMT-0700 (Pacific Daylight Time)">20:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: yeah, as i said, suffering from a lack of love. (Although I do always fix its tests when they break!) Also unsure whether `new TransformStream()` is good or we should do `TransformStream.identity()` or something</td></tr>
  <tr class="msg" id="L522"><td class="ts-cell"><a class="ts" href="#L522" alt="Mon Apr 06 2015 13:51:29 GMT-0700 (Pacific Daylight Time)">20:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I commented in #20</td></tr>

</tbody></table></div></div></div></body>
