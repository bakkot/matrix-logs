<!doctype html>
<head>
  <title>#whatwg on 2021-03-10</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#whatwg<br>2021-03-10<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2021-03-09" class="nav-link"><span>prev</span></a>
<a href="2021-03-11" class="nav-link"><span style="float:right">next</span></a>
</div>
    
<div class="room-list-wrapper">Active:<br>
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/">WHATWG</a></li>
</ul>
</div>
<br>
<div class="room-list-wrapper">Historical:<br>
<ul class="room-list">
<li><a href="../irc-tc39/">#tc39</a></li>
<li><a href="../irc-tc39-delegates/">#tc39-delegates</a></li>
<li><a href="../irc-tc39-editor-group/">#tc39-editor-group</a></li>
<li><a href="../irc-whatwg/" class="current-room">#whatwg</a></li>
</ul>
</div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>
<input type="text" id="query" size=25 placeholder="Search #whatwg">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Mar 09 2021 20:12:04 GMT-0800 (Pacific Standard Time)">04:12</a></td><td class="nick-cell">&lt;<span class="nick nick-3" title=br3nt@irc>br3nt</span>&gt;</td><td class="msg-cell">Hi! Does anyone know if there is a recommendation for html includes?¬† Eg to include html custom elements, or vue components, etc?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Mar 10 2021 00:35:57 GMT-0800 (Pacific Standard Time)">08:35</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">annevk: Regarding your comment on my HTML PR, can you clarify? In the same algorithm step 17 seems to be &quot;Run process a navigate response with navigationType , the source browsing context , and navigationParams .&quot; I don&#039;t see reservedEnvironment though</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed Mar 10 2021 00:38:07 GMT-0800 (Pacific Standard Time)">08:38</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">domfarolino: I was looking at the live HTML version, so it might be a slightly different number in your local copy</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Mar 10 2021 00:38:37 GMT-0800 (Pacific Standard Time)">08:38</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">domfarolino: it&#039;s the Let navigationParams be step</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Mar 10 2021 00:39:05 GMT-0800 (Pacific Standard Time)">08:39</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">domfarolino: so one before</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Mar 10 2021 00:39:32 GMT-0800 (Pacific Standard Time)">08:39</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">annevk: Ugh, good call. I thought I got them all</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Mar 10 2021 00:39:37 GMT-0800 (Pacific Standard Time)">08:39</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">thx</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed Mar 10 2021 00:40:38 GMT-0800 (Pacific Standard Time)">08:40</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">domfarolino: can you also fix the other one while there? you&#039;d want to replace it with navigationParams&#039;s reserved environment I suppose</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed Mar 10 2021 00:40:54 GMT-0800 (Pacific Standard Time)">08:40</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">annevk: Yep I was just going to do that too</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed Mar 10 2021 00:41:01 GMT-0800 (Pacific Standard Time)">08:41</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">thanks!</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed Mar 10 2021 00:41:11 GMT-0800 (Pacific Standard Time)">08:41</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">I&#039;ll let Domenic verify and land later today</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed Mar 10 2021 05:39:40 GMT-0800 (Pacific Standard Time)">13:39</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=zcorpan@irc>zcorpan</span>&gt;</td><td class="msg-cell">When running html-build as of recently I get this error:</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed Mar 10 2021 05:39:44 GMT-0800 (Pacific Standard Time)">13:39</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=zcorpan@irc>zcorpan</span>&gt;</td><td class="msg-cell">Traceback (most recent call last):</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Wed Mar 10 2021 05:39:44 GMT-0800 (Pacific Standard Time)">13:39</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=zcorpan@irc>zcorpan</span>&gt;</td><td class="msg-cell">  File &quot;/usr/local/bin/bs-highlighter-server&quot;, line 5, in &lt;module&gt;</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed Mar 10 2021 05:39:46 GMT-0800 (Pacific Standard Time)">13:39</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=zcorpan@irc>zcorpan</span>&gt;</td><td class="msg-cell">    from highlighter.server import cli</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed Mar 10 2021 05:39:48 GMT-0800 (Pacific Standard Time)">13:39</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=zcorpan@irc>zcorpan</span>&gt;</td><td class="msg-cell">ModuleNotFoundError: No module named &#039;highlighter&#039;</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Wed Mar 10 2021 05:41:28 GMT-0800 (Pacific Standard Time)">13:41</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=zcorpan@irc>zcorpan</span>&gt;</td><td class="msg-cell">Is <a href="https://github.com/tabatkins/highlighter">https://github.com/tabatkins/highlighter</a> the expected module?</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Wed Mar 10 2021 05:41:46 GMT-0800 (Pacific Standard Time)">13:41</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=zcorpan@irc>zcorpan</span>&gt;</td><td class="msg-cell">MikeSmith: Domenic: ^</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Wed Mar 10 2021 06:00:09 GMT-0800 (Pacific Standard Time)">14:00</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">zcorpan: I think so</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Wed Mar 10 2021 06:00:32 GMT-0800 (Pacific Standard Time)">14:00</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">I thought it was optional though, but I haven&#039;t checked recently</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Wed Mar 10 2021 06:05:02 GMT-0800 (Pacific Standard Time)">14:05</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=zcorpan@irc>zcorpan</span>&gt;</td><td class="msg-cell">it&#039;s optional in that I can skip highlighting with -h</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Wed Mar 10 2021 06:05:42 GMT-0800 (Pacific Standard Time)">14:05</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=zcorpan@irc>zcorpan</span>&gt;</td><td class="msg-cell">but I wonder why I get the error now. Is there a step missing in <a href="https://github.com/whatwg/wattsi#building-and-running-wattsi-manually">https://github.com/whatwg/wattsi#building-and-running-wattsi-manually</a> ?</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Wed Mar 10 2021 06:36:40 GMT-0800 (Pacific Standard Time)">14:36</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">littledan: I saw something come by on Twitter that makes me suspect you&#039;ll find yourself having opinions on <a href="https://github.com/whatwg/fetch/issues/1175">https://github.com/whatwg/fetch/issues/1175</a> in due course</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Wed Mar 10 2021 06:37:30 GMT-0800 (Pacific Standard Time)">14:37</a></td><td class="nick-cell">&lt;<span class="nick nick-15" title=nox@irc>nox</span>&gt;</td><td class="msg-cell">No ETA at all, and I may not do anything at all in the end, but the idea of writing a spec to parse an HTTP answer, looking at Blink/Gecko/WebKit/cURL/Squid/nginx is growing on em.</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Wed Mar 10 2021 06:37:41 GMT-0800 (Pacific Standard Time)">14:37</a></td><td class="nick-cell">&lt;<span class="nick nick-15" title=nox@irc>nox</span>&gt;</td><td class="msg-cell">On me*, I don&#039;t think Eminem does HTTP parsing.</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Wed Mar 10 2021 06:40:09 GMT-0800 (Pacific Standard Time)">14:40</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Keep me posted</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Wed Mar 10 2021 06:44:25 GMT-0800 (Pacific Standard Time)">14:44</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=littledan@irc>littledan</span>&gt;</td><td class="msg-cell">annevk: wow, well, I thought the status quo meshed well with the stuff I am working on. I have to learn some more before I will manage to have my own opinion here.</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Wed Mar 10 2021 06:44:33 GMT-0800 (Pacific Standard Time)">14:44</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=littledan@irc>littledan</span>&gt;</td><td class="msg-cell">Thanks for the pointer</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Wed Mar 10 2021 07:41:28 GMT-0800 (Pacific Standard Time)">15:41</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">zcorpan: html-build should install the highlighter for you: <a href="https://github.com/whatwg/html-build/blob/main/build.sh#L223">https://github.com/whatwg/html-build/blob/main/build.sh#L223</a></td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Wed Mar 10 2021 07:42:55 GMT-0800 (Pacific Standard Time)">15:42</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=noamr@irc>noamr</span>&gt;</td><td class="msg-cell">annevk, yoav: I&#039;ve made a lot of changes to <a href="https://github.com/whatwg/fetch/pull/1185/files">https://github.com/whatwg/fetch/pull/1185/files</a>. Instead of saving a redirectStart/redirectEnd in FETCH, I&#039;m saving a list of redirects, and RT/NT can extrapolate data from it later. It makes the processing model a bit less wonky IMO, and makes it clearer about things like workerStart in its current form. Still missing cache processing, which I&#039;m going to do next, but it&#039;s ready</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Wed Mar 10 2021 07:42:55 GMT-0800 (Pacific Standard Time)">15:42</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=noamr@irc>noamr</span>&gt;</td><td class="msg-cell">for an intermediate look.</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Wed Mar 10 2021 07:44:39 GMT-0800 (Pacific Standard Time)">15:44</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">noamr: I&#039;d like for the data that Fetch hands out to be safe, which that would not be, although I suppose there are some violations of that already...</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Wed Mar 10 2021 07:44:56 GMT-0800 (Pacific Standard Time)">15:44</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=zcorpan@irc>zcorpan</span>&gt;</td><td class="msg-cell">Domenic: thanks. deleting /usr/local/bin/bs-highlighter-server  and running html-build/<a href="http://build.sh">build.sh</a> again made it install again and now it works</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Wed Mar 10 2021 07:45:07 GMT-0800 (Pacific Standard Time)">15:45</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">Fun times...</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Wed Mar 10 2021 07:45:50 GMT-0800 (Pacific Standard Time)">15:45</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=noamr@irc>noamr</span>&gt;</td><td class="msg-cell">annevk: it&#039;s cleaned up for TAO before handing out, it&#039;s as safe as previous data that&#039;s handed out.</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Wed Mar 10 2021 07:46:41 GMT-0800 (Pacific Standard Time)">15:46</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">noamr: k</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Wed Mar 10 2021 07:57:45 GMT-0800 (Pacific Standard Time)">15:57</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=noamr@irc>noamr</span>&gt;</td><td class="msg-cell">annevk: regarding yesterday&#039;s chat about responseEnd, it&#039;s true that the different callers enqueue RT at different times, but I dug deep into the chromium implementation, and regardless of when it is queued, `responseEnd` is indeed either the stream&#039;s EOF or when the connection is closed.</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Wed Mar 10 2021 07:58:24 GMT-0800 (Pacific Standard Time)">15:58</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=noamr@irc>noamr</span>&gt;</td><td class="msg-cell">so it might be OK to enqueue the RT as a response to stream EOF rather than deal with the different callers, as we need that anyway in order to compute responseEnd</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Wed Mar 10 2021 07:59:16 GMT-0800 (Pacific Standard Time)">15:59</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=noamr@irc>noamr</span>&gt;</td><td class="msg-cell">^^^ yoav</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Wed Mar 10 2021 08:00:04 GMT-0800 (Pacific Standard Time)">16:00</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">noamr: so I think that works (assuming it&#039;s true for service worker responses too), but I think the larger question with the callers is RT object creation and whether or not we want to have some kind of relationship between that object and the caller at some point (e.g., loadEvent.rtObject)</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Wed Mar 10 2021 08:00:41 GMT-0800 (Pacific Standard Time)">16:00</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">noamr: that is, I&#039;d like us to define in what task these objects get created</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Wed Mar 10 2021 08:00:44 GMT-0800 (Pacific Standard Time)">16:00</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=noamr@irc>noamr</span>&gt;</td><td class="msg-cell">annevk: yea, it&#039;s true for service worker responses as well (the service worker creates the stream, and stream EOF generates responseEnd)</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Wed Mar 10 2021 08:01:11 GMT-0800 (Pacific Standard Time)">16:01</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">(in meetings... :/ )</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Wed Mar 10 2021 08:04:17 GMT-0800 (Pacific Standard Time)">16:04</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=noamr@irc>noamr</span>&gt;</td><td class="msg-cell">annevk: I believe the RT object creation should be done on the main thread by RT and not by FETCH. Isn&#039;t there some kind of mechanism to &quot;queue a task on the global object&#039;s main thread&quot;?</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Wed Mar 10 2021 08:04:28 GMT-0800 (Pacific Standard Time)">16:04</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">noamr: and for that I think we can maybe get away with a default implementation that does the right thing (the EOF task does the creation of the object; and the caller does the firing of the load/error event in it), but there needs to be some way to override prolly for media at least</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Wed Mar 10 2021 08:05:30 GMT-0800 (Pacific Standard Time)">16:05</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=noamr@irc>noamr</span>&gt;</td><td class="msg-cell">annevk: I don&#039;t believe media is different from the default; it would enqueue the RT object once it&#039;s fully streamed</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Wed Mar 10 2021 08:05:56 GMT-0800 (Pacific Standard Time)">16:05</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">noamr: media can do range requests and as you said it would likely do its stuff off the main thread</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Wed Mar 10 2021 08:06:32 GMT-0800 (Pacific Standard Time)">16:06</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">(though maybe we can gloss over that as an optimization)</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Wed Mar 10 2021 08:07:03 GMT-0800 (Pacific Standard Time)">16:07</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=noamr@irc>noamr</span>&gt;</td><td class="msg-cell">annevk: yea, so in the end we would get to something like streams.EOF -&gt; FETCH.report-timing -&gt; RT.queue task on the main thread to add an RT object</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Wed Mar 10 2021 08:07:18 GMT-0800 (Pacific Standard Time)">16:07</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=noamr@irc>noamr</span>&gt;</td><td class="msg-cell">the fact that media decoder runs on some thread is not relevant to that</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Wed Mar 10 2021 08:09:39 GMT-0800 (Pacific Standard Time)">16:09</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">noamr: the caller that is reading the response body should also be able to perform actions in that task though, that&#039;s what I&#039;m trying to say</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Wed Mar 10 2021 08:10:56 GMT-0800 (Pacific Standard Time)">16:10</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=noamr@irc>noamr</span>&gt;</td><td class="msg-cell">annevk: ah I see. so for that purpose we can, like you said, keep the off-thread decoding et al as an optimization that has to deal with its own thread safety</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Wed Mar 10 2021 08:12:18 GMT-0800 (Pacific Standard Time)">16:12</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">So for instance, <a href="https://html.spec.whatwg.org/#default-fetch-and-process-the-linked-resource">https://html.spec.whatwg.org/#default-fetch-and-process-the-linked-resource</a> step 11.5 would happen in this task (and not queue its own task)</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Wed Mar 10 2021 08:12:44 GMT-0800 (Pacific Standard Time)">16:12</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">And that probably has to happen after RT object creation, but Fetch can handle that ordering</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Wed Mar 10 2021 08:16:23 GMT-0800 (Pacific Standard Time)">16:16</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=noamr@irc>noamr</span>&gt;</td><td class="msg-cell">annevk: I don&#039;t think ordering matters in this case. There is no guarantee that RT would be enqueued before/after the contents of the resource are handled in practice. it&#039;s ok if it&#039;s racy</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Wed Mar 10 2021 08:16:45 GMT-0800 (Pacific Standard Time)">16:16</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">noamr: right I disagree with that</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Wed Mar 10 2021 08:19:05 GMT-0800 (Pacific Standard Time)">16:19</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=noamr@irc>noamr</span>&gt;</td><td class="msg-cell">annevk: fair enough. by &quot;fetch can handle that ordering&quot;, you mean something like &quot;send the EOF state forward, and only then enqueue an RT entry&quot;?</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Wed Mar 10 2021 08:23:12 GMT-0800 (Pacific Standard Time)">16:23</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">noamr: with recent changes fetch queues the task and calls a callback from the caller</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Wed Mar 10 2021 08:23:45 GMT-0800 (Pacific Standard Time)">16:23</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">noamr: before it calls that callback it could call the instruction that creates the RT object</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Wed Mar 10 2021 08:24:52 GMT-0800 (Pacific Standard Time)">16:24</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">noamr: this would require something special for reading response bodies I suspect</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Wed Mar 10 2021 08:25:18 GMT-0800 (Pacific Standard Time)">16:25</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=noamr@irc>noamr</span>&gt;</td><td class="msg-cell">annevk: ok, let me tinker with it</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Wed Mar 10 2021 08:48:01 GMT-0800 (Pacific Standard Time)">16:48</a></td><td class="nick-cell"><span class="nick nick-9" title=yoav@irc>yoav</span></td><td class="msg-cell">catching up</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Wed Mar 10 2021 08:58:28 GMT-0800 (Pacific Standard Time)">16:58</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">So, right now that ordering is not defined, but it would be good if we can make it well defined and queue the RT entry in a task that&#039;s somehow relative to other tasks such as the onload event and the resource processing</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Wed Mar 10 2021 08:59:51 GMT-0800 (Pacific Standard Time)">16:59</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">If Fetch can make sure that happens that would be ideal</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Wed Mar 10 2021 10:02:25 GMT-0800 (Pacific Standard Time)">18:02</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=EveryOS@irc>EveryOS</span>&gt;</td><td class="msg-cell">I&#039;ve been using the spec to aid my in writing a simple web browserBut I&#039;ve not gotten very far lol <a href="https://usercontent.irccloud-cdn.com/file/IZoDHgO1/browser.png">https://usercontent.irccloud-cdn.com/file/IZoDHgO1/browser.png</a></td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Wed Mar 10 2021 10:29:55 GMT-0800 (Pacific Standard Time)">18:29</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=noamr@irc>noamr</span>&gt;</td><td class="msg-cell">yoav: yea, I&#039;ll check if that&#039;s doable inside fetch or if caller integration is needed.</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Wed Mar 10 2021 11:20:18 GMT-0800 (Pacific Standard Time)">19:20</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">üëç</td></tr>

</tbody></table></div></div></div></body>
