<!doctype html>
<head>
  <title>#whatwg on 2017-10-31</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "#whatwg";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#whatwg<br>2017-10-31<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2017-10-30" class="nav-link"><span>prev</span></a>
<a href="2017-11-02" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>
<input type="text" id="query" size=25 placeholder="Search #whatwg">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Mon Oct 30 2017 18:19:21 GMT-0700 (Pacific Daylight Time)">01:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">JakeA: Found an odd not-so-funny IE script loading bug. <a href="https://phabricator.wikimedia.org/T178943">https://phabricator.wikimedia.org/T178943</a></td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Mon Oct 30 2017 18:19:48 GMT-0700 (Pacific Daylight Time)">01:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">TL;DR: onreadystate fires before script has actually executed, in IE 10, if and only if a certain strange &lt;link rel=stylesheet&gt; is on the page.</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Mon Oct 30 2017 18:19:54 GMT-0700 (Pacific Daylight Time)">01:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">(after the &lt;script async src&gt;)</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Mon Oct 30 2017 18:20:22 GMT-0700 (Pacific Daylight Time)">01:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">I was hoping your depressing article <a href="https://www.html5rocks.com/en/tutorials/speed/script-loading/">https://www.html5rocks.com/en/tutorials/speed/script-loading/</a> would cover this, but unfortunately not (as far as I can see)</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Mon Oct 30 2017 18:20:27 GMT-0700 (Pacific Daylight Time)">01:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">Only IE10+ is required.</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Mon Oct 30 2017 18:20:51 GMT-0700 (Pacific Daylight Time)">01:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">I think I&#039;ll get rid of the onreadystate as starting point, to make sure it really is that one that is the issue and not script.onload</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Mon Oct 30 2017 22:32:44 GMT-0700 (Pacific Daylight Time)">05:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Edge will have URLâ€™s toJSON soonish</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Tue Oct 31 2017 00:53:07 GMT-0700 (Pacific Daylight Time)">07:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">hayato: commented on the composedPath issue. Do you still see there to be some performance issue?</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Tue Oct 31 2017 00:53:10 GMT-0700 (Pacific Daylight Time)">07:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">since I don&#039;t</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Tue Oct 31 2017 01:01:58 GMT-0700 (Pacific Daylight Time)">08:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">annevk: does my suggestion there for composedPath sound somewhat reasonable?</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Tue Oct 31 2017 01:03:15 GMT-0700 (Pacific Daylight Time)">08:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=hayato@irc>hayato</span>&gt;</div></td><td class="msg-cell">smaug____:  I commented in the issue.</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Tue Oct 31 2017 01:03:21 GMT-0700 (Pacific Daylight Time)">08:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">thanks</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Tue Oct 31 2017 01:33:03 GMT-0700 (Pacific Daylight Time)">08:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">smaug____: I suspect I don&#039;t have time to look into it soonish unless it&#039;s high priority</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Tue Oct 31 2017 01:33:20 GMT-0700 (Pacific Daylight Time)">08:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">annevk: well, I need to implement something</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Tue Oct 31 2017 01:33:49 GMT-0700 (Pacific Daylight Time)">08:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">smaug____: ah okay, I&#039;ll have a look</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Tue Oct 31 2017 01:33:58 GMT-0700 (Pacific Daylight Time)">08:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">great thanks</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Tue Oct 31 2017 01:35:25 GMT-0700 (Pacific Daylight Time)">08:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____, annevk: i guess the change is to just pre-compute the composed path upfront?</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Tue Oct 31 2017 01:35:34 GMT-0700 (Pacific Daylight Time)">08:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">annevk: btw, it is hard to know what all you spec authors are busy with.  Like you and Domenic are dealing with so many different spec issues</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Tue Oct 31 2017 01:35:43 GMT-0700 (Pacific Daylight Time)">08:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____, annevk: that seems fine with your proposed optimization.</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Tue Oct 31 2017 01:36:26 GMT-0700 (Pacific Daylight Time)">08:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">smaug____: I&#039;m mostly busy with a baby at the moment ðŸ˜Š</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Tue Oct 31 2017 01:36:27 GMT-0700 (Pacific Daylight Time)">08:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">rniwa: I wouldn&#039;t call it precomputation. Just annotate the tuples so that the composed path can be calculated later</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Tue Oct 31 2017 01:36:54 GMT-0700 (Pacific Daylight Time)">08:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">annevk: oh sure. I thought you&#039;d be mostly offline, but since you aren&#039;t ... ;)</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Tue Oct 31 2017 01:38:19 GMT-0700 (Pacific Daylight Time)">08:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: so the challenge here is that we&#039;d still have to compute which tree is visible to which tree</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Tue Oct 31 2017 01:38:27 GMT-0700 (Pacific Daylight Time)">08:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: that could be expensive</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Tue Oct 31 2017 01:39:17 GMT-0700 (Pacific Daylight Time)">08:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">rniwa: yeah, I&#039;m not entirely sure how smaug____&#039;s model works</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Tue Oct 31 2017 01:39:49 GMT-0700 (Pacific Daylight Time)">08:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">annevk: you&#039;d remember which tree is visible to which tree upfront</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Tue Oct 31 2017 01:39:56 GMT-0700 (Pacific Daylight Time)">08:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">If we stored a reference to the root of the item in event&#039;s path for instance I don&#039;t think we&#039;d have enough information</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Tue Oct 31 2017 01:39:57 GMT-0700 (Pacific Daylight Time)">08:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">annevk: and then store that information along with event path</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Tue Oct 31 2017 01:40:24 GMT-0700 (Pacific Daylight Time)">08:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">annevk: right, because a shadow host can be moved from one tree to another</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Tue Oct 31 2017 01:40:48 GMT-0700 (Pacific Daylight Time)">08:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">annevk: so you&#039;d have to remember the entire tree relationship :(</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Tue Oct 31 2017 01:41:01 GMT-0700 (Pacific Daylight Time)">08:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">now that i think about it, we probably don&#039;t want to make this change.</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Tue Oct 31 2017 01:41:10 GMT-0700 (Pacific Daylight Time)">08:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">it&#039;d make event dispatching a lot more expensive...</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Tue Oct 31 2017 01:41:27 GMT-0700 (Pacific Daylight Time)">08:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Yeah, it seems you&#039;d basically have to do that ancestor check during dispatch instead</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Tue Oct 31 2017 01:41:35 GMT-0700 (Pacific Daylight Time)">08:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">I&#039;m strongly against the current model</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Tue Oct 31 2017 01:41:54 GMT-0700 (Pacific Daylight Time)">08:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: okay but we&#039;ve already shipped with the spec behavior</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Tue Oct 31 2017 01:41:54 GMT-0700 (Pacific Daylight Time)">08:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">since one can&#039;t rely on composedPath to return the path</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Tue Oct 31 2017 01:42:04 GMT-0700 (Pacific Daylight Time)">08:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: of re-computing which node is visible to which node</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Tue Oct 31 2017 01:42:10 GMT-0700 (Pacific Daylight Time)">08:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: we don&#039;t have the blink bug, for example</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Tue Oct 31 2017 01:43:04 GMT-0700 (Pacific Daylight Time)">08:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">I wonder how expensive it would be though to calculate during dispatch</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Tue Oct 31 2017 01:43:08 GMT-0700 (Pacific Daylight Time)">08:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Since we have to do some traversal</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Tue Oct 31 2017 01:43:50 GMT-0700 (Pacific Daylight Time)">08:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">annevk: to do this, we&#039;d have to remember the current/old &quot;parent&quot; tree for each shadow root.</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Tue Oct 31 2017 01:44:38 GMT-0700 (Pacific Daylight Time)">08:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">annevk: i&#039;ve specifically designed webkit&#039;s event dispatching code not having to do those kinds of expensive computations or storing of information</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Tue Oct 31 2017 01:44:46 GMT-0700 (Pacific Daylight Time)">08:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">so I&#039;d be very much against changing the status quo</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Tue Oct 31 2017 01:48:06 GMT-0700 (Pacific Daylight Time)">08:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">it&#039;s really annoying that event dispatching code keeps getting more complex &amp; expensive</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Tue Oct 31 2017 01:48:36 GMT-0700 (Pacific Daylight Time)">08:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">at some point, we ought to start care about perf of these things...</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Tue Oct 31 2017 01:48:43 GMT-0700 (Pacific Daylight Time)">08:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">event path already remembers the old parent</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Tue Oct 31 2017 01:48:59 GMT-0700 (Pacific Daylight Time)">08:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">event path knows the dispatch time DOM structure</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Tue Oct 31 2017 01:49:23 GMT-0700 (Pacific Daylight Time)">08:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: old parent node, sure, not old parent node&#039;s shadow tree&#039;s parent tree</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Tue Oct 31 2017 01:49:25 GMT-0700 (Pacific Daylight Time)">08:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">I do care about performance a lot</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Tue Oct 31 2017 01:50:15 GMT-0700 (Pacific Daylight Time)">08:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">it knows the path through shadow trees</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Tue Oct 31 2017 01:50:21 GMT-0700 (Pacific Daylight Time)">08:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">what am I missing here</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Tue Oct 31 2017 01:50:36 GMT-0700 (Pacific Daylight Time)">08:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: so the problem is that let&#039;s say a path contains n1 &gt; n2</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Tue Oct 31 2017 01:50:50 GMT-0700 (Pacific Daylight Time)">08:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">where n1 and n2 are nodes</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Tue Oct 31 2017 01:50:59 GMT-0700 (Pacific Daylight Time)">08:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">if they belong to two different trees, say, t1, and t2</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Tue Oct 31 2017 01:51:13 GMT-0700 (Pacific Daylight Time)">08:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">the relationship between t1 and t2 may have changed.</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Tue Oct 31 2017 01:51:24 GMT-0700 (Pacific Daylight Time)">08:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">sure, and we don&#039;t care about that change</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Tue Oct 31 2017 01:51:32 GMT-0700 (Pacific Daylight Time)">08:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">t1 and t2 could belong to two completely disjoint shadow trees</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Tue Oct 31 2017 01:51:46 GMT-0700 (Pacific Daylight Time)">08:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">right. I don&#039;t want to keep that in mind at all</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Tue Oct 31 2017 01:51:49 GMT-0700 (Pacific Daylight Time)">08:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">smaug____: if we don&#039;t isn&#039;t there a possibility that we end up revealing something that should be hidden?</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Tue Oct 31 2017 01:51:59 GMT-0700 (Pacific Daylight Time)">08:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: well, you should. otherwise, how do we decide whether n1 is visible to n2 or not?</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Tue Oct 31 2017 01:52:12 GMT-0700 (Pacific Daylight Time)">08:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">smaug____: if I move a node into a closed tree during dispatch for instance</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Tue Oct 31 2017 01:52:30 GMT-0700 (Pacific Daylight Time)">08:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">Oh, you&#039;re worried about moving something from an open shadow dom to a closed one?</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Tue Oct 31 2017 01:52:38 GMT-0700 (Pacific Daylight Time)">08:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: yeah, that can totally happen</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Tue Oct 31 2017 01:52:41 GMT-0700 (Pacific Daylight Time)">08:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">I&#039;m not worried about that all</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Tue Oct 31 2017 01:52:54 GMT-0700 (Pacific Daylight Time)">08:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">that is a case which is totally fine. The node was already in path</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Tue Oct 31 2017 01:53:02 GMT-0700 (Pacific Daylight Time)">08:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">which exposed it to the outside world</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Tue Oct 31 2017 01:53:03 GMT-0700 (Pacific Daylight Time)">08:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: you can move n1 into n2 or vice versa as well</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Tue Oct 31 2017 01:53:13 GMT-0700 (Pacific Daylight Time)">08:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">so hiding it then suddenly doesn&#039;t really matter</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Tue Oct 31 2017 01:53:50 GMT-0700 (Pacific Daylight Time)">08:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: well, it totally matters depending on when the change was made</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Tue Oct 31 2017 01:54:07 GMT-0700 (Pacific Daylight Time)">08:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: the very DOM mutation that just happened may have been done to hide those nodes</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Tue Oct 31 2017 01:54:22 GMT-0700 (Pacific Daylight Time)">08:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">composedPath should be able to answer to the question which all event targets will handle the event</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Tue Oct 31 2017 01:54:45 GMT-0700 (Pacific Daylight Time)">08:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: except it shouldn&#039;t disclose nodes in the closed shadow trees</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Tue Oct 31 2017 01:55:09 GMT-0700 (Pacific Daylight Time)">08:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">right. But that modification happens after event path is created</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Tue Oct 31 2017 01:55:09 GMT-0700 (Pacific Daylight Time)">08:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: i&#039;d be opposed to any API change that results in a node inside a closed shadow tree to be exposed to the outside world</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Tue Oct 31 2017 01:55:17 GMT-0700 (Pacific Daylight Time)">08:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: that would break the very important encapsulation invariant</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Tue Oct 31 2017 01:55:54 GMT-0700 (Pacific Daylight Time)">08:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">if one can move non-closed node to be inside closed shadow root, there is already some leak happening</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Tue Oct 31 2017 01:56:40 GMT-0700 (Pacific Daylight Time)">08:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">it is similar to having random node in non-shadow dom, keeping js ref to it, and then just move it to closed shadow dom</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Tue Oct 31 2017 01:56:54 GMT-0700 (Pacific Daylight Time)">08:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">you definitely give access to the internals of the closed shadow dom there</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Tue Oct 31 2017 01:57:05 GMT-0700 (Pacific Daylight Time)">08:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">so I&#039;m missing to see the issue here</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Tue Oct 31 2017 01:57:08 GMT-0700 (Pacific Daylight Time)">08:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: sure, it&#039;s not really a security threat model we&#039;re talking about here</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Tue Oct 31 2017 01:57:35 GMT-0700 (Pacific Daylight Time)">08:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: the whole point of event retargeting and composedPath() is there to hide nodes in the shadow tree at the time of the event dispatching</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Tue Oct 31 2017 01:58:15 GMT-0700 (Pacific Daylight Time)">08:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">exactly. at the time of event dispatching</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Tue Oct 31 2017 01:58:19 GMT-0700 (Pacific Daylight Time)">08:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">not later</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Tue Oct 31 2017 01:58:33 GMT-0700 (Pacific Daylight Time)">08:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: when I say dispatch I mean when we call event listener on each node</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Tue Oct 31 2017 01:59:28 GMT-0700 (Pacific Daylight Time)">08:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: as in <a href="https://dom.spec.whatwg.org/#concept-event-listener-invoke">https://dom.spec.whatwg.org/#concept-event-listener-invoke</a></td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Tue Oct 31 2017 01:59:41 GMT-0700 (Pacific Daylight Time)">08:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">and when I say event dispatching, I mean the time when event is actually dispatched.</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Tue Oct 31 2017 02:00:17 GMT-0700 (Pacific Daylight Time)">09:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">and if one moves open nodes to be suddenly inside closed trees, they are already having issues with encapsulation</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Tue Oct 31 2017 02:00:19 GMT-0700 (Pacific Daylight Time)">09:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">smaug____: I don&#039;t understand why a leak is acceptable in this small edge case</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Tue Oct 31 2017 02:00:31 GMT-0700 (Pacific Daylight Time)">09:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">small?</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Tue Oct 31 2017 02:00:42 GMT-0700 (Pacific Daylight Time)">09:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">having a composedPath() which lies is totally nuts</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Tue Oct 31 2017 02:01:14 GMT-0700 (Pacific Daylight Time)">09:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">smaug____: having it violate encapsulation seems equally wrong</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Tue Oct 31 2017 02:01:39 GMT-0700 (Pacific Daylight Time)">09:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">I see it so that one has already exposed the node</td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Tue Oct 31 2017 02:01:44 GMT-0700 (Pacific Daylight Time)">09:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">since it wasn&#039;t in a closed tree</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Tue Oct 31 2017 02:02:08 GMT-0700 (Pacific Daylight Time)">09:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Okay, I guess I can buy that</td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Tue Oct 31 2017 02:02:34 GMT-0700 (Pacific Daylight Time)">09:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">I am somewhat sympathetic to your point of view, I guess the question is figuring out a model that satisfies rniwa</td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Tue Oct 31 2017 02:05:04 GMT-0700 (Pacific Daylight Time)">09:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">annevk, smaug____: i don&#039;t think the visibility of a node should be computed upfront.</td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Tue Oct 31 2017 02:05:20 GMT-0700 (Pacific Daylight Time)">09:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">why?</td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Tue Oct 31 2017 02:05:21 GMT-0700 (Pacific Daylight Time)">09:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">annevk, smaug____: it should be computed each time composedPath() is called</td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Tue Oct 31 2017 02:05:33 GMT-0700 (Pacific Daylight Time)">09:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: to keep the encapsulation invariant valid</td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Tue Oct 31 2017 02:05:47 GMT-0700 (Pacific Daylight Time)">09:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">I&#039;d prefer a fast composedPath</td></tr>
  <tr class="msg" id="L100"><td class="ts-cell"><a class="ts" href="#L100" alt="Tue Oct 31 2017 02:06:03 GMT-0700 (Pacific Daylight Time)">09:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: I like fast event dispatching.</td></tr>
  <tr class="msg" id="L101"><td class="ts-cell"><a class="ts" href="#L101" alt="Tue Oct 31 2017 02:06:09 GMT-0700 (Pacific Daylight Time)">09:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: since most people won&#039;t be using composedPath</td></tr>
  <tr class="msg" id="L102"><td class="ts-cell"><a class="ts" href="#L102" alt="Tue Oct 31 2017 02:06:19 GMT-0700 (Pacific Daylight Time)">09:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">my model doesn&#039;t slow down event dispatching</td></tr>
  <tr class="msg" id="L103"><td class="ts-cell"><a class="ts" href="#L103" alt="Tue Oct 31 2017 02:06:29 GMT-0700 (Pacific Daylight Time)">09:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: i don&#039;t want to increase the cost of dispatching an event</td></tr>
  <tr class="msg" id="L104"><td class="ts-cell"><a class="ts" href="#L104" alt="Tue Oct 31 2017 02:06:33 GMT-0700 (Pacific Daylight Time)">09:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: it absolutely would</td></tr>
  <tr class="msg" id="L105"><td class="ts-cell"><a class="ts" href="#L105" alt="Tue Oct 31 2017 02:06:39 GMT-0700 (Pacific Daylight Time)">09:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">no</td></tr>
  <tr class="msg" id="L106"><td class="ts-cell"><a class="ts" href="#L106" alt="Tue Oct 31 2017 02:06:46 GMT-0700 (Pacific Daylight Time)">09:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">well, sure, some flags</td></tr>
  <tr class="msg" id="L107"><td class="ts-cell"><a class="ts" href="#L107" alt="Tue Oct 31 2017 02:06:53 GMT-0700 (Pacific Daylight Time)">09:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: storing the extra tree scope information &amp; its parent tree scope</td></tr>
  <tr class="msg" id="L108"><td class="ts-cell"><a class="ts" href="#L108" alt="Tue Oct 31 2017 02:06:59 GMT-0700 (Pacific Daylight Time)">09:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: is quit expensive</td></tr>
  <tr class="msg" id="L109"><td class="ts-cell"><a class="ts" href="#L109" alt="Tue Oct 31 2017 02:07:02 GMT-0700 (Pacific Daylight Time)">09:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">you don&#039;t need that all</td></tr>
  <tr class="msg" id="L110"><td class="ts-cell"><a class="ts" href="#L110" alt="Tue Oct 31 2017 02:07:08 GMT-0700 (Pacific Daylight Time)">09:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">you play with the path only</td></tr>
  <tr class="msg" id="L111"><td class="ts-cell"><a class="ts" href="#L111" alt="Tue Oct 31 2017 02:07:14 GMT-0700 (Pacific Daylight Time)">09:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: we would totally need that in our implementation</td></tr>
  <tr class="msg" id="L112"><td class="ts-cell"><a class="ts" href="#L112" alt="Tue Oct 31 2017 02:07:26 GMT-0700 (Pacific Daylight Time)">09:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">I don&#039;t see why the encapsulation need to work that way</td></tr>
  <tr class="msg" id="L113"><td class="ts-cell"><a class="ts" href="#L113" alt="Tue Oct 31 2017 02:07:40 GMT-0700 (Pacific Daylight Time)">09:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: Reverse computing the tree path computation from the event path would be insanely complicated</td></tr>
  <tr class="msg" id="L114"><td class="ts-cell"><a class="ts" href="#L114" alt="Tue Oct 31 2017 02:07:47 GMT-0700 (Pacific Daylight Time)">09:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">smaug____: I think the problem is that rniwa doesn&#039;t agree with you on composedPath() revealing previously non-closed nodes</td></tr>
  <tr class="msg" id="L115"><td class="ts-cell"><a class="ts" href="#L115" alt="Tue Oct 31 2017 02:07:58 GMT-0700 (Pacific Daylight Time)">09:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">yup</td></tr>
  <tr class="msg" id="L116"><td class="ts-cell"><a class="ts" href="#L116" alt="Tue Oct 31 2017 02:08:03 GMT-0700 (Pacific Daylight Time)">09:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">and I don&#039;t understand why</td></tr>
  <tr class="msg" id="L117"><td class="ts-cell"><a class="ts" href="#L117" alt="Tue Oct 31 2017 02:08:37 GMT-0700 (Pacific Daylight Time)">09:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">any listener in the path may have taken references to such nodes already and revealing the nodes anyhow</td></tr>
  <tr class="msg" id="L118"><td class="ts-cell"><a class="ts" href="#L118" alt="Tue Oct 31 2017 02:08:39 GMT-0700 (Pacific Daylight Time)">09:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: here&#039;s a question. if you think moving a node from one tree to another is not really a serious concern</td></tr>
  <tr class="msg" id="L119"><td class="ts-cell"><a class="ts" href="#L119" alt="Tue Oct 31 2017 02:08:44 GMT-0700 (Pacific Daylight Time)">09:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: then why do you care about this behavior at all?</td></tr>
  <tr class="msg" id="L120"><td class="ts-cell"><a class="ts" href="#L120" alt="Tue Oct 31 2017 02:08:53 GMT-0700 (Pacific Daylight Time)">09:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: no. that&#039;s not at all true</td></tr>
  <tr class="msg" id="L121"><td class="ts-cell"><a class="ts" href="#L121" alt="Tue Oct 31 2017 02:09:03 GMT-0700 (Pacific Daylight Time)">09:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">I care about API sanity</td></tr>
  <tr class="msg" id="L122"><td class="ts-cell"><a class="ts" href="#L122" alt="Tue Oct 31 2017 02:09:14 GMT-0700 (Pacific Daylight Time)">09:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: you can move a node from one tree to another before any other node would have received the event</td></tr>
  <tr class="msg" id="L123"><td class="ts-cell"><a class="ts" href="#L123" alt="Tue Oct 31 2017 02:09:16 GMT-0700 (Pacific Daylight Time)">09:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">right now we have API which doesn&#039;t return the value one would expect</td></tr>
  <tr class="msg" id="L124"><td class="ts-cell"><a class="ts" href="#L124" alt="Tue Oct 31 2017 02:09:16 GMT-0700 (Pacific Daylight Time)">09:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">rniwa: what smaug____ cares about is that composedPath() reflects the true event path</td></tr>
  <tr class="msg" id="L125"><td class="ts-cell"><a class="ts" href="#L125" alt="Tue Oct 31 2017 02:09:23 GMT-0700 (Pacific Daylight Time)">09:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: it totally does.</td></tr>
  <tr class="msg" id="L126"><td class="ts-cell"><a class="ts" href="#L126" alt="Tue Oct 31 2017 02:09:32 GMT-0700 (Pacific Daylight Time)">09:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">annevk: and it does that</td></tr>
  <tr class="msg" id="L127"><td class="ts-cell"><a class="ts" href="#L127" alt="Tue Oct 31 2017 02:09:47 GMT-0700 (Pacific Daylight Time)">09:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">it does not</td></tr>
  <tr class="msg" id="L128"><td class="ts-cell"><a class="ts" href="#L128" alt="Tue Oct 31 2017 02:09:55 GMT-0700 (Pacific Daylight Time)">09:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____, annevk: event path itself is computed upfront</td></tr>
  <tr class="msg" id="L129"><td class="ts-cell"><a class="ts" href="#L129" alt="Tue Oct 31 2017 02:10:41 GMT-0700 (Pacific Daylight Time)">09:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____, annevk: the only thing that&#039;s dynamically computed is whether a given node is visible to the current event target or not</td></tr>
  <tr class="msg" id="L130"><td class="ts-cell"><a class="ts" href="#L130" alt="Tue Oct 31 2017 02:11:13 GMT-0700 (Pacific Daylight Time)">09:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">which is weird</td></tr>
  <tr class="msg" id="L131"><td class="ts-cell"><a class="ts" href="#L131" alt="Tue Oct 31 2017 02:11:17 GMT-0700 (Pacific Daylight Time)">09:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____, annevk: i don&#039;t see why that affects anything about event path</td></tr>
  <tr class="msg" id="L132"><td class="ts-cell"><a class="ts" href="#L132" alt="Tue Oct 31 2017 02:11:21 GMT-0700 (Pacific Daylight Time)">09:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: it&#039;s not weird at all</td></tr>
  <tr class="msg" id="L133"><td class="ts-cell"><a class="ts" href="#L133" alt="Tue Oct 31 2017 02:11:27 GMT-0700 (Pacific Daylight Time)">09:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">and doesn&#039;t let us optimize composePath calls</td></tr>
  <tr class="msg" id="L134"><td class="ts-cell"><a class="ts" href="#L134" alt="Tue Oct 31 2017 02:11:32 GMT-0700 (Pacific Daylight Time)">09:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: everywhere else in the DOM API where we support shaodw tree</td></tr>
  <tr class="msg" id="L135"><td class="ts-cell"><a class="ts" href="#L135" alt="Tue Oct 31 2017 02:11:48 GMT-0700 (Pacific Daylight Time)">09:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: we hide nodes whenever the node is closed-shadow-hidden from another node</td></tr>
  <tr class="msg" id="L136"><td class="ts-cell"><a class="ts" href="#L136" alt="Tue Oct 31 2017 02:12:00 GMT-0700 (Pacific Daylight Time)">09:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: you can totally optimize composedPath.</td></tr>
  <tr class="msg" id="L137"><td class="ts-cell"><a class="ts" href="#L137" alt="Tue Oct 31 2017 02:12:25 GMT-0700 (Pacific Daylight Time)">09:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: the only thing you need is detect a case where a shadow tree gets moved from one tree to another and becomes visible</td></tr>
  <tr class="msg" id="L138"><td class="ts-cell"><a class="ts" href="#L138" alt="Tue Oct 31 2017 02:12:40 GMT-0700 (Pacific Daylight Time)">09:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: since such a DOM mutation is very rare, you can keep using the cached composed path in most cases</td></tr>
  <tr class="msg" id="L139"><td class="ts-cell"><a class="ts" href="#L139" alt="Tue Oct 31 2017 02:12:42 GMT-0700 (Pacific Daylight Time)">09:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">smaug____: do we expect frequent composedPath() calls? (It seems there&#039;s some opportunity to optimize in any case though.)</td></tr>
  <tr class="msg" id="L140"><td class="ts-cell"><a class="ts" href="#L140" alt="Tue Oct 31 2017 02:13:11 GMT-0700 (Pacific Daylight Time)">09:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: just like you&#039;d do for live node lists like getElementsByTagName.</td></tr>
  <tr class="msg" id="L141"><td class="ts-cell"><a class="ts" href="#L141" alt="Tue Oct 31 2017 02:13:28 GMT-0700 (Pacific Daylight Time)">09:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">rniwa: tracking whether some particular tree is moved around isn&#039;t exactly fast</td></tr>
  <tr class="msg" id="L142"><td class="ts-cell"><a class="ts" href="#L142" alt="Tue Oct 31 2017 02:13:45 GMT-0700 (Pacific Daylight Time)">09:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">live node lists are horrible for the performance</td></tr>
  <tr class="msg" id="L143"><td class="ts-cell"><a class="ts" href="#L143" alt="Tue Oct 31 2017 02:13:48 GMT-0700 (Pacific Daylight Time)">09:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: sure it is. you&#039;d have to already update the value of isConnected for every node.</td></tr>
  <tr class="msg" id="L144"><td class="ts-cell"><a class="ts" href="#L144" alt="Tue Oct 31 2017 02:14:23 GMT-0700 (Pacific Daylight Time)">09:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">yes. and that code is very hot</td></tr>
  <tr class="msg" id="L145"><td class="ts-cell"><a class="ts" href="#L145" alt="Tue Oct 31 2017 02:14:25 GMT-0700 (Pacific Daylight Time)">09:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: so your engine already needs to be aware when a node gets removed from the tree</td></tr>
  <tr class="msg" id="L146"><td class="ts-cell"><a class="ts" href="#L146" alt="Tue Oct 31 2017 02:14:32 GMT-0700 (Pacific Daylight Time)">09:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">adding more stuff there makes it slower</td></tr>
  <tr class="msg" id="L147"><td class="ts-cell"><a class="ts" href="#L147" alt="Tue Oct 31 2017 02:14:58 GMT-0700 (Pacific Daylight Time)">09:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: well, adding stuff to event dispatch also makes things slower</td></tr>
  <tr class="msg" id="L148"><td class="ts-cell"><a class="ts" href="#L148" alt="Tue Oct 31 2017 02:15:08 GMT-0700 (Pacific Daylight Time)">09:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: event dispatching is also quite hot.</td></tr>
  <tr class="msg" id="L149"><td class="ts-cell"><a class="ts" href="#L149" alt="Tue Oct 31 2017 02:15:36 GMT-0700 (Pacific Daylight Time)">09:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: storing extra 2-3 objects in our event path code would end up introducing more dependent loads &amp; writes</td></tr>
  <tr class="msg" id="L150"><td class="ts-cell"><a class="ts" href="#L150" alt="Tue Oct 31 2017 02:16:21 GMT-0700 (Pacific Daylight Time)">09:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">and I wouldn&#039;t want to sure more objects there</td></tr>
  <tr class="msg" id="L151"><td class="ts-cell"><a class="ts" href="#L151" alt="Tue Oct 31 2017 02:16:31 GMT-0700 (Pacific Daylight Time)">09:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">but we disagree with encapsulation here</td></tr>
  <tr class="msg" id="L152"><td class="ts-cell"><a class="ts" href="#L152" alt="Tue Oct 31 2017 02:16:37 GMT-0700 (Pacific Daylight Time)">09:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: it seems so</td></tr>
  <tr class="msg" id="L153"><td class="ts-cell"><a class="ts" href="#L153" alt="Tue Oct 31 2017 02:16:53 GMT-0700 (Pacific Daylight Time)">09:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: i really don&#039;t understand why you think it&#039;s okay to leak nodes in this case</td></tr>
  <tr class="msg" id="L154"><td class="ts-cell"><a class="ts" href="#L154" alt="Tue Oct 31 2017 02:17:03 GMT-0700 (Pacific Daylight Time)">09:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">this isn&#039;t much different to leaking closed shadow via <a href="http://event.target">event.target</a> or so</td></tr>
  <tr class="msg" id="L155"><td class="ts-cell"><a class="ts" href="#L155" alt="Tue Oct 31 2017 02:17:29 GMT-0700 (Pacific Daylight Time)">09:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">first <a href="http://event.target">event.target</a> is in open tree, one takes a ref to event, then target is moved to a closed tree</td></tr>
  <tr class="msg" id="L156"><td class="ts-cell"><a class="ts" href="#L156" alt="Tue Oct 31 2017 02:17:29 GMT-0700 (Pacific Daylight Time)">09:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: that&#039;s why <a href="http://event.target">event.target</a> gets re-targeted not to do that</td></tr>
  <tr class="msg" id="L157"><td class="ts-cell"><a class="ts" href="#L157" alt="Tue Oct 31 2017 02:17:35 GMT-0700 (Pacific Daylight Time)">09:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">you leak closed shadow</td></tr>
  <tr class="msg" id="L158"><td class="ts-cell"><a class="ts" href="#L158" alt="Tue Oct 31 2017 02:18:04 GMT-0700 (Pacific Daylight Time)">09:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: if you get to have access to it first, yes</td></tr>
  <tr class="msg" id="L159"><td class="ts-cell"><a class="ts" href="#L159" alt="Tue Oct 31 2017 02:18:13 GMT-0700 (Pacific Daylight Time)">09:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: but you can&#039;t always do that</td></tr>
  <tr class="msg" id="L160"><td class="ts-cell"><a class="ts" href="#L160" alt="Tue Oct 31 2017 02:19:19 GMT-0700 (Pacific Daylight Time)">09:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">adding capturing listener to window is quite effective</td></tr>
  <tr class="msg" id="L161"><td class="ts-cell"><a class="ts" href="#L161" alt="Tue Oct 31 2017 02:19:41 GMT-0700 (Pacific Daylight Time)">09:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: unless the target is already in another closed shadow tree</td></tr>
  <tr class="msg" id="L162"><td class="ts-cell"><a class="ts" href="#L162" alt="Tue Oct 31 2017 02:20:16 GMT-0700 (Pacific Daylight Time)">09:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">well, in my example target was in open tree</td></tr>
  <tr class="msg" id="L163"><td class="ts-cell"><a class="ts" href="#L163" alt="Tue Oct 31 2017 02:20:35 GMT-0700 (Pacific Daylight Time)">09:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: you can be in open tree inside a closed shadow tree</td></tr>
  <tr class="msg" id="L164"><td class="ts-cell"><a class="ts" href="#L164" alt="Tue Oct 31 2017 02:21:31 GMT-0700 (Pacific Daylight Time)">09:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">oh sure. composedPath wouldn&#039;t leak that case, since it was initially hidden too from light dom</td></tr>
  <tr class="msg" id="L165"><td class="ts-cell"><a class="ts" href="#L165" alt="Tue Oct 31 2017 02:22:00 GMT-0700 (Pacific Daylight Time)">09:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: it would leak to the open trees of that closed shadow tree</td></tr>
  <tr class="msg" id="L166"><td class="ts-cell"><a class="ts" href="#L166" alt="Tue Oct 31 2017 02:22:56 GMT-0700 (Pacific Daylight Time)">09:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">smaug____: I think to make useful progress you&#039;d have to make a more detailed proposal that rniwa can then critique</td></tr>
  <tr class="msg" id="L167"><td class="ts-cell"><a class="ts" href="#L167" alt="Tue Oct 31 2017 02:23:02 GMT-0700 (Pacific Daylight Time)">09:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">but you leak that already if you move anything from open to closed.</td></tr>
  <tr class="msg" id="L168"><td class="ts-cell"><a class="ts" href="#L168" alt="Tue Oct 31 2017 02:24:17 GMT-0700 (Pacific Daylight Time)">09:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: that&#039;s not really true.</td></tr>
  <tr class="msg" id="L169"><td class="ts-cell"><a class="ts" href="#L169" alt="Tue Oct 31 2017 02:24:22 GMT-0700 (Pacific Daylight Time)">09:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____</td></tr>
  <tr class="msg" id="L170"><td class="ts-cell"><a class="ts" href="#L170" alt="Tue Oct 31 2017 02:24:33 GMT-0700 (Pacific Daylight Time)">09:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell"> smaug____: if you&#039;re talking about the security level of leak, then yes</td></tr>
  <tr class="msg" id="L171"><td class="ts-cell"><a class="ts" href="#L171" alt="Tue Oct 31 2017 02:24:45 GMT-0700 (Pacific Daylight Time)">09:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: but you&#039;re talking about accidental leaks, then no</td></tr>
  <tr class="msg" id="L172"><td class="ts-cell"><a class="ts" href="#L172" alt="Tue Oct 31 2017 02:25:34 GMT-0700 (Pacific Daylight Time)">09:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">easily. If you just happen to keep the reference to the originally open node</td></tr>
  <tr class="msg" id="L173"><td class="ts-cell"><a class="ts" href="#L173" alt="Tue Oct 31 2017 02:25:41 GMT-0700 (Pacific Daylight Time)">09:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: since shadow tree in its current form isn&#039;t a security feature, i don&#039;t think making an observation that something is technically possible isn&#039;t even useful</td></tr>
  <tr class="msg" id="L174"><td class="ts-cell"><a class="ts" href="#L174" alt="Tue Oct 31 2017 02:25:46 GMT-0700 (Pacific Daylight Time)">09:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">and then start to play with it when it has been moved to closed tree</td></tr>
  <tr class="msg" id="L175"><td class="ts-cell"><a class="ts" href="#L175" alt="Tue Oct 31 2017 02:26:10 GMT-0700 (Pacific Daylight Time)">09:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: well, it&#039;s totally okay for a node to be in an open tree for a brief moment of time</td></tr>
  <tr class="msg" id="L176"><td class="ts-cell"><a class="ts" href="#L176" alt="Tue Oct 31 2017 02:26:12 GMT-0700 (Pacific Daylight Time)">09:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">rniwa: right. So then I don&#039;t get your point here :)</td></tr>
  <tr class="msg" id="L177"><td class="ts-cell"><a class="ts" href="#L177" alt="Tue Oct 31 2017 02:26:32 GMT-0700 (Pacific Daylight Time)">09:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: also, JS keeping a reference to a node isn&#039;t really a serious concern to me since this is not really a security model</td></tr>
  <tr class="msg" id="L178"><td class="ts-cell"><a class="ts" href="#L178" alt="Tue Oct 31 2017 02:26:51 GMT-0700 (Pacific Daylight Time)">09:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: so let&#039;s say you have some component which moves child nodes of a shadow host into its own tree</td></tr>
  <tr class="msg" id="L179"><td class="ts-cell"><a class="ts" href="#L179" alt="Tue Oct 31 2017 02:26:55 GMT-0700 (Pacific Daylight Time)">09:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: and it does this lazily</td></tr>
  <tr class="msg" id="L180"><td class="ts-cell"><a class="ts" href="#L180" alt="Tue Oct 31 2017 02:27:30 GMT-0700 (Pacific Daylight Time)">09:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: and that lazily movement may happen when it detects that an event got dispatched on its host element</td></tr>
  <tr class="msg" id="L181"><td class="ts-cell"><a class="ts" href="#L181" alt="Tue Oct 31 2017 02:27:44 GMT-0700 (Pacific Daylight Time)">09:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: with the event target being one of the child nodes of the host</td></tr>
  <tr class="msg" id="L182"><td class="ts-cell"><a class="ts" href="#L182" alt="Tue Oct 31 2017 02:27:58 GMT-0700 (Pacific Daylight Time)">09:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: in that case, if this component moves the nodes into its closed shadow tree</td></tr>
  <tr class="msg" id="L183"><td class="ts-cell"><a class="ts" href="#L183" alt="Tue Oct 31 2017 02:28:15 GMT-0700 (Pacific Daylight Time)">09:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: then the outside observer who is listening to this event shouldn&#039;t be able to see these nodes as target&#039;s</td></tr>
  <tr class="msg" id="L184"><td class="ts-cell"><a class="ts" href="#L184" alt="Tue Oct 31 2017 02:28:57 GMT-0700 (Pacific Daylight Time)">09:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">except if the outside observer is capturing listener, and would handle the event before the listener in the host</td></tr>
  <tr class="msg" id="L185"><td class="ts-cell"><a class="ts" href="#L185" alt="Tue Oct 31 2017 02:29:25 GMT-0700 (Pacific Daylight Time)">09:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: again, this is not a security model</td></tr>
  <tr class="msg" id="L186"><td class="ts-cell"><a class="ts" href="#L186" alt="Tue Oct 31 2017 02:29:27 GMT-0700 (Pacific Daylight Time)">09:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">why would the composedPath be different for capturing vs. bubble listener</td></tr>
  <tr class="msg" id="L187"><td class="ts-cell"><a class="ts" href="#L187" alt="Tue Oct 31 2017 02:29:33 GMT-0700 (Pacific Daylight Time)">09:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">sure</td></tr>
  <tr class="msg" id="L188"><td class="ts-cell"><a class="ts" href="#L188" alt="Tue Oct 31 2017 02:29:40 GMT-0700 (Pacific Daylight Time)">09:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">I&#039;m talking about API consistency</td></tr>
  <tr class="msg" id="L189"><td class="ts-cell"><a class="ts" href="#L189" alt="Tue Oct 31 2017 02:29:48 GMT-0700 (Pacific Daylight Time)">09:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: well, the component might be moving nodes at the capturing phase</td></tr>
  <tr class="msg" id="L190"><td class="ts-cell"><a class="ts" href="#L190" alt="Tue Oct 31 2017 02:30:07 GMT-0700 (Pacific Daylight Time)">09:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: the API is consistent to the extent nodes inside a closed shadow tree is always hidden</td></tr>
  <tr class="msg" id="L191"><td class="ts-cell"><a class="ts" href="#L191" alt="Tue Oct 31 2017 02:30:35 GMT-0700 (Pacific Daylight Time)">09:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: I agree that the list of nodes inside a composed event path shouldn&#039;t change</td></tr>
  <tr class="msg" id="L192"><td class="ts-cell"><a class="ts" href="#L192" alt="Tue Oct 31 2017 02:30:58 GMT-0700 (Pacific Daylight Time)">09:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: in fact, composedTree as currently spec&#039;ed would always return the same event path if there are no closed shadow trees</td></tr>
  <tr class="msg" id="L193"><td class="ts-cell"><a class="ts" href="#L193" alt="Tue Oct 31 2017 02:31:33 GMT-0700 (Pacific Daylight Time)">09:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: however, there is a very important invariant for closed shadow trees, which is that no node inside a closed shadow tree is exposed to the outside DOM tree.</td></tr>
  <tr class="msg" id="L194"><td class="ts-cell"><a class="ts" href="#L194" alt="Tue Oct 31 2017 02:32:11 GMT-0700 (Pacific Daylight Time)">09:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">but the node has been exposed to the outside world already... this is going circles or how does one say it in English</td></tr>
  <tr class="msg" id="L195"><td class="ts-cell"><a class="ts" href="#L195" alt="Tue Oct 31 2017 02:32:21 GMT-0700 (Pacific Daylight Time)">09:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=rniwa@irc>rniwa</span>&gt;</div></td><td class="msg-cell">smaug____: going in circles</td></tr>

</tbody></table></div></div></div></body>
