<!doctype html>
<head>
  <title>#whatwg on 2018-09-11</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#whatwg<br>2018-09-11<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2018-09-09" class="nav-link"><span>prev</span></a>
<a href="2018-09-12" class="nav-link"><span style="float:right">next</span></a>
</div>
    
<div class="room-list-wrapper">Active:<br>
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/">WHATWG</a></li>
</ul>
</div>
<br>
<div class="room-list-wrapper">Historical:<br>
<ul class="room-list">
<li><a href="../irc-tc39/">#tc39</a></li>
<li><a href="../irc-tc39-delegates/">#tc39-delegates</a></li>
<li><a href="../irc-tc39-editor-group/">#tc39-editor-group</a></li>
<li><a href="../irc-whatwg/" class="current-room">#whatwg</a></li>
</ul>
</div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs"><div class="log">
<table><tbody id="log-tbody">
  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Mon Sep 10 2018 21:29:23 GMT-0700 (Pacific Daylight Time)">04:29</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">annevk: Under the &quot;setter&quot; section of <a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes">https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes</a>, what type is the &quot;given value&quot; in the case elem.onclick = function(e) {...}...I imagine it is a callback object, not a raw uncompiled handler?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Mon Sep 10 2018 21:56:24 GMT-0700 (Pacific Daylight Time)">04:56</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">annevk: I believe it is, I&#039;m just trying to find out when an event handler&#039;s value will ever be created as an internal raw uncompiled handler. That seems to be in the attribute change steps, but I expected to see these steps being called from the parser or something</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Mon Sep 10 2018 22:05:26 GMT-0700 (Pacific Daylight Time)">05:05</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">domfarolino: setAttribute</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Mon Sep 10 2018 22:12:24 GMT-0700 (Pacific Daylight Time)">05:12</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">annevk: Hm, that&#039;s for when call from script right? How about when no script is running, and the browser is just parsing &lt;link ... onload=&quot;whereDoesThisGetParsed?&quot;&gt; I kinda expect something like DOM&#039;s set-attribute and set-an-attribute-value to be called at some point?</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Mon Sep 10 2018 22:18:54 GMT-0700 (Pacific Daylight Time)">05:18</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">domfarolino: that will do so per the parser</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Mon Sep 10 2018 22:19:06 GMT-0700 (Pacific Daylight Time)">05:19</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">domfarolino: might not all be linked up</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Mon Sep 10 2018 22:24:22 GMT-0700 (Pacific Daylight Time)">05:24</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">annevk: Ok thanks</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Mon Sep 10 2018 22:29:46 GMT-0700 (Pacific Daylight Time)">05:29</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">annevk: One more (unrelated to event handlers) question: in <a href="https://html.spec.whatwg.org/multipage/semantics.html#interactions-of-styling-and-scripting">https://html.spec.whatwg.org/multipage/semantics.html#interactions-of-styling-and-scripting</a>, we have a list of conditions that, if met, make a style sheet one that &quot;blocks scripts&quot;.</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Mon Sep 10 2018 22:30:17 GMT-0700 (Pacific Daylight Time)">05:30</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">annevk:  I&#039;d expect after a script-blocking style sheet is obtained, one of those conditions would definitely not hold, so that we can effectively decrement the number of script-blocking ss&#039;s. Is that what the purpose of the `style sheet ready` flag is?</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Mon Sep 10 2018 22:31:19 GMT-0700 (Pacific Daylight Time)">05:31</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell"> Dunno offhand</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Mon Sep 10 2018 22:31:38 GMT-0700 (Pacific Daylight Time)">05:31</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Can check in ~2h</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Mon Sep 10 2018 22:32:24 GMT-0700 (Pacific Daylight Time)">05:32</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">annevk: Regardless, it seems that if those conditions are used to determine whether a style sheet is script-blocking, it&#039;s hard to distinguish a style sheet that has successfully loaded, and thus is no longer script-blocking, from one that is.</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Mon Sep 10 2018 22:32:32 GMT-0700 (Pacific Daylight Time)">05:32</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">Sure sure no worries, sorry to ping so early</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Mon Sep 10 2018 22:42:25 GMT-0700 (Pacific Daylight Time)">05:42</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Hmm yeah, maybe; Emilio also mentioned (somewhat related) that matching the environment requires layout for iframes and such and is therefore more fuzzy than one might expect</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Mon Sep 10 2018 23:48:21 GMT-0700 (Pacific Daylight Time)">06:48</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">annevk: I&#039;ll add a comment to <a href="https://github.com/whatwg/html/pull/3544">https://github.com/whatwg/html/pull/3544</a> in the morning about maybe explicitly making a style sheet non-script-blocking after it has been obtained. Yeah it would be nice to have &quot;matching&quot; defined (is it?) somewhere...that&#039;s a good point. Should we file an issue to harden that?</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Mon Sep 10 2018 23:49:54 GMT-0700 (Pacific Daylight Time)">06:49</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">Oh, wait it is defined whoops. But yeah if that&#039;s more fuzzy than expected it might be nice to clean that up? Not sure how to though</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Tue Sep 11 2018 00:09:51 GMT-0700 (Pacific Daylight Time)">07:09</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Yeah, not sure either</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Tue Sep 11 2018 04:43:11 GMT-0700 (Pacific Daylight Time)">11:43</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=lgrahl@irc>lgrahl</span>&gt;</td><td class="msg-cell"><a href="https://discourse.wicg.io/">https://discourse.wicg.io/</a> &lt;-- why was I not aware of this awesome place</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Tue Sep 11 2018 08:51:46 GMT-0700 (Pacific Daylight Time)">15:51</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">Domenic: Oh sorry, didn&#039;t see your latest comment on <a href="https://github.com/whatwg/html/issues/3610">https://github.com/whatwg/html/issues/3610</a> before posting mine :)</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Tue Sep 11 2018 08:58:38 GMT-0700 (Pacific Daylight Time)">15:58</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">(Question in my comment may help me write a test under <a href="https://github.com/web-platform-tests/wpt/tree/master/html/semantics/document-metadata/interactions-of-styling-and-scripting">https://github.com/web-platform-tests/wpt/tree/master/html/semantics/document-metadata/interactions-of-styling-and-scripting</a> testing that script-blocking style sheets have their events fired before script execution)</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Tue Sep 11 2018 09:01:42 GMT-0700 (Pacific Daylight Time)">16:01</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=hoishin@irc>hoishin</span>&gt;</td><td class="msg-cell">:disconnect <a href="http://chat.freenode.net">chat.freenode.net</a></td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Tue Sep 11 2018 09:07:21 GMT-0700 (Pacific Daylight Time)">16:07</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">domfarolino: it seems it isn’t really defined when that flag gets set</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Tue Sep 11 2018 09:07:56 GMT-0700 (Pacific Daylight Time)">16:07</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">domfarolino: I’d expect it to be set as part of the task dispatching the load event</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Tue Sep 11 2018 09:08:43 GMT-0700 (Pacific Daylight Time)">16:08</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">(Forgot to look at it earlier, sorry)</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Tue Sep 11 2018 09:10:31 GMT-0700 (Pacific Daylight Time)">16:10</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">annevk: Agreed, I think it could be (potentially renamed to &quot;style sheet resolved&quot; and) and used in <a href="https://html.spec.whatwg.org/multipage/semantics.html#obtaining-a-resource-from-a-link-element:critical-subresources">https://html.spec.whatwg.org/multipage/semantics.html#obtaining-a-resource-from-a-link-element:critical-subresources</a> to remove the given resource from the set of script-blocking resources</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Tue Sep 11 2018 09:11:18 GMT-0700 (Pacific Daylight Time)">16:11</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">domfarolino: reason to rename?</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Tue Sep 11 2018 09:11:58 GMT-0700 (Pacific Daylight Time)">16:11</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">&quot;style sheet ready&quot; very much indicates that it obtained successfully (IMO). I think it&#039;d be nice to be more general, since even resources that were failed to obtain are at least no longer script-blocking</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Tue Sep 11 2018 09:12:35 GMT-0700 (Pacific Daylight Time)">16:12</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">domfarolino: ah, prefer “done” then due to promises</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Tue Sep 11 2018 09:12:43 GMT-0700 (Pacific Daylight Time)">16:12</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">+1</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Tue Sep 11 2018 09:14:04 GMT-0700 (Pacific Daylight Time)">16:14</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">annevk: Also if you happen to have an answer for <a href="https://github.com/whatwg/html/issues/3610#issuecomment-420322487">https://github.com/whatwg/html/issues/3610#issuecomment-420322487</a> that would help me file a chrome bug :)</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Tue Sep 11 2018 09:21:07 GMT-0700 (Pacific Daylight Time)">16:21</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">If we make the setting of the “style sheet ready/done” flag part of the task that gets fired, then of course script execution will be blocked on both obtaining the resource _and_ firing the event. But since it isn’t entirely clear (to me) when a resource becomes non-script-blocking, I can’t tell if the ordering of the fired event and script script execution is well-specified (though IMO it should be)</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Tue Sep 11 2018 09:21:41 GMT-0700 (Pacific Daylight Time)">16:21</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">domfarolino: it depends on specifying that flag</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Tue Sep 11 2018 09:22:06 GMT-0700 (Pacific Daylight Time)">16:22</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">domfarolino: so once that is done it’ll be the first option</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Tue Sep 11 2018 09:23:21 GMT-0700 (Pacific Daylight Time)">16:23</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">thank you very much!</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Tue Sep 11 2018 09:57:08 GMT-0700 (Pacific Daylight Time)">16:57</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=zcorpan@irc>zcorpan</span>&gt;</td><td class="msg-cell">anyone know how to get hard line wrapping to work well in Sublime Text?</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Tue Sep 11 2018 10:17:35 GMT-0700 (Pacific Daylight Time)">17:17</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</td><td class="msg-cell">zcorpan: You mean automatically inserting a hard line break when it auto-wraps at some column?</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Tue Sep 11 2018 10:32:59 GMT-0700 (Pacific Daylight Time)">17:32</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=zcorpan@irc>zcorpan</span>&gt;</td><td class="msg-cell">That would be nice, or just a keyboard shortcut to wrap the selection would be ok as well. The built-in one seems kinda broken; it doesn&#039;t collapse the indentation to a single space and it preserves existing newlines</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Tue Sep 11 2018 10:33:52 GMT-0700 (Pacific Daylight Time)">17:33</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=zcorpan@irc>zcorpan</span>&gt;</td><td class="msg-cell">hard wrap in TextWrangler/BBEdit worked better</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Tue Sep 11 2018 10:41:35 GMT-0700 (Pacific Daylight Time)">17:41</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">zcorpan: for HTML I always copy and paste text through <a href="https://output.jsbin.com/maferi">https://output.jsbin.com/maferi</a> . Should work on turning that logic into a Sublime plugin.</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Tue Sep 11 2018 10:52:49 GMT-0700 (Pacific Daylight Time)">17:52</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=zcorpan@irc>zcorpan</span>&gt;</td><td class="msg-cell">Domenic: thanks. I&#039;ll try making a plugin some day</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Tue Sep 11 2018 16:43:32 GMT-0700 (Pacific Daylight Time)">23:43</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=zcorpan@irc>zcorpan</span>&gt;</td><td class="msg-cell">is there something that has replaced <a href="https://wiki.whatwg.org/wiki/sanitization_rules">https://wiki.whatwg.org/wiki/sanitization_rules</a> ?</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Tue Sep 11 2018 16:45:55 GMT-0700 (Pacific Daylight Time)">23:45</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=zcorpan@irc>zcorpan</span>&gt;</td><td class="msg-cell">alternatively, known-good html sanitizers that follows the spec for how to parse html</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Tue Sep 11 2018 16:46:54 GMT-0700 (Pacific Daylight Time)">23:46</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">I think the canonical answer is <a href="https://github.com/cure53/DOMPurify">https://github.com/cure53/DOMPurify</a></td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Tue Sep 11 2018 16:51:52 GMT-0700 (Pacific Daylight Time)">23:51</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=zcorpan@irc>zcorpan</span>&gt;</td><td class="msg-cell">thanks</td></tr>
</tbody></table>
</div></div></div></body>
