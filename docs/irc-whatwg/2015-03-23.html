<!doctype html>
<head>
  <title>#whatwg on 2015-03-23</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#whatwg<br>2015-03-23<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2015-03-22" class="nav-link"><span>prev</span></a>
<a href="2015-03-24" class="nav-link"><span style="float:right">next</span></a>
</div>
    
<div class="room-list-wrapper">Active:<br>
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/">WHATWG</a></li>
</ul>
</div>
<br>
<div class="room-list-wrapper">Historical:<br>
<ul class="room-list">
<li><a href="../irc-tc39/">#tc39</a></li>
<li><a href="../irc-tc39-delegates/">#tc39-delegates</a></li>
<li><a href="../irc-tc39-editor-group/">#tc39-editor-group</a></li>
<li><a href="../irc-whatwg/" class="current-room">#whatwg</a></li>
</ul>
</div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs"><div class="log">
<table><tbody id="log-tbody">
  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Mon Mar 23 2015 06:41:10 GMT-0700 (Pacific Daylight Time)">13:41</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">JakeA: reading your reply here about the &quot;first-party-cookies&quot; and SW:  <a href="https://mail.google.com/mail/u/0/#label/blink-dev/14c314afd2174c91">https://mail.google.com/mail/u/0/#label/blink-dev/14c314afd2174c91</a></td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Mon Mar 23 2015 06:41:32 GMT-0700 (Pacific Daylight Time)">13:41</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">JakeA: just FYI, I think we are going to disable SW interception completely when the user has &quot;disable third-party cookies&quot; preference enabled</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Mon Mar 23 2015 06:41:43 GMT-0700 (Pacific Daylight Time)">13:41</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">not quite the same, because its not based on a header request... but seems similar</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Mon Mar 23 2015 06:42:09 GMT-0700 (Pacific Daylight Time)">13:42</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">JakeA: I mean, disable SW interception completely for third party iframes</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Mon Mar 23 2015 06:43:21 GMT-0700 (Pacific Daylight Time)">13:43</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Phew!</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Mon Mar 23 2015 06:43:28 GMT-0700 (Pacific Daylight Time)">13:43</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">I was worried for a second there</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Mon Mar 23 2015 06:44:12 GMT-0700 (Pacific Daylight Time)">13:44</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">wanderview: that seems ok, what&#039;s the attack? That the iframe request can look at the referrer and track?</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Mon Mar 23 2015 06:45:19 GMT-0700 (Pacific Daylight Time)">13:45</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">JakeA: well, we want to disable IDB and other storage APIs for 3rd party iframes when the pref is set... to prevent tracking... but once we are in the SW we have no way to tell if a third party iframe is involved</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Mon Mar 23 2015 06:45:48 GMT-0700 (Pacific Daylight Time)">13:45</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">we want to completely hide the API endpoints on the global... so we need to do it at SW spin-up</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Mon Mar 23 2015 06:47:20 GMT-0700 (Pacific Daylight Time)">13:47</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">JakeA: also, I don&#039;t know if you have an opinion on this issue, but its the other main thing we have to deal with to enable IDB on SW:  <a href="https://github.com/slightlyoff/ServiceWorker/issues/648#issuecomment-78621258">https://github.com/slightlyoff/ServiceWorker/issues/648#issuecomment-78621258</a></td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Mon Mar 23 2015 06:47:35 GMT-0700 (Pacific Daylight Time)">13:47</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">we currently don&#039;t allow IDB in sandboxed iframes at all</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Mon Mar 23 2015 06:53:58 GMT-0700 (Pacific Daylight Time)">13:53</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Hmm good point, I wonder what Chrome does</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Mon Mar 23 2015 08:52:12 GMT-0700 (Pacific Daylight Time)">15:52</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</td><td class="msg-cell">gsnedders: Thank god, I can finally submit a PR for the &quot;converting XML name, but I wont&#039; tell you which one&quot; error message.</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Mon Mar 23 2015 08:53:38 GMT-0700 (Pacific Daylight Time)">15:53</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell">Hm?</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Mon Mar 23 2015 09:58:58 GMT-0700 (Pacific Daylight Time)">16:58</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Domenic: why is the input for TextDecoder decode optional? Is that in preparation for TextDecoder to become a transform stream?</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Mon Mar 23 2015 09:59:30 GMT-0700 (Pacific Daylight Time)">16:59</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell">JakeA, for signalling EOF</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Mon Mar 23 2015 09:59:39 GMT-0700 (Pacific Daylight Time)">16:59</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell">I though</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Mon Mar 23 2015 09:59:45 GMT-0700 (Pacific Daylight Time)">16:59</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell">t</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Mon Mar 23 2015 10:00:52 GMT-0700 (Pacific Daylight Time)">17:00</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">ahh ok</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Mon Mar 23 2015 10:01:30 GMT-0700 (Pacific Daylight Time)">17:01</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell">I may also have that completely backwards, though :)</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Mon Mar 23 2015 10:09:13 GMT-0700 (Pacific Daylight Time)">17:09</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Domenic: if I&#039;m streaming a string &amp; reading the chunks with TextDecoder, is there anything I can do about a chunk landing mid-way through a multibyte codepoint?</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Mon Mar 23 2015 10:09:36 GMT-0700 (Pacific Daylight Time)">17:09</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">I guess I really want a TextDecoder transform stream</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Mon Mar 23 2015 10:15:18 GMT-0700 (Pacific Daylight Time)">17:15</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">JakeA: yea... seems there should be a TextDecoder stream that internally re-chunks</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Mon Mar 23 2015 10:19:07 GMT-0700 (Pacific Daylight Time)">17:19</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">wanderview: TextDecoder has a &#039;stream&#039; option, but that appears to read the whole stream</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Mon Mar 23 2015 10:19:32 GMT-0700 (Pacific Daylight Time)">17:19</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">ohhh no wait</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Mon Mar 23 2015 10:19:52 GMT-0700 (Pacific Daylight Time)">17:19</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">&quot;If options&#039;s stream is true, the method can be invoked multiple times to process a fragmented stream.&quot;</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Mon Mar 23 2015 10:20:23 GMT-0700 (Pacific Daylight Time)">17:20</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">JakeA: what are you looking at?</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Mon Mar 23 2015 10:20:30 GMT-0700 (Pacific Daylight Time)">17:20</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell"><a href="https://encoding.spec.whatwg.org/">https://encoding.spec.whatwg.org/</a></td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Mon Mar 23 2015 10:23:26 GMT-0700 (Pacific Daylight Time)">17:23</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">I can&#039;t figure out how to use it</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Mon Mar 23 2015 10:23:53 GMT-0700 (Pacific Daylight Time)">17:23</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">var decoder = new TextDecoder();</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Mon Mar 23 2015 10:24:14 GMT-0700 (Pacific Daylight Time)">17:24</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">decoder.decode(???, {stream: true});</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Mon Mar 23 2015 10:24:24 GMT-0700 (Pacific Daylight Time)">17:24</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Then keep calling decoder.decode() to get more data</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Mon Mar 23 2015 10:24:40 GMT-0700 (Pacific Daylight Time)">17:24</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">but I can&#039;t figure out that first param &quot;BufferSource&quot;</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Mon Mar 23 2015 10:25:03 GMT-0700 (Pacific Daylight Time)">17:25</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">It can&#039;t be a stream, as decode() is sync and stream reading isn&#039;t</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Mon Mar 23 2015 10:25:34 GMT-0700 (Pacific Daylight Time)">17:25</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">JakeA: maybe annevk knows</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Mon Mar 23 2015 10:25:50 GMT-0700 (Pacific Daylight Time)">17:25</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">JakeA: the spec doesn&#039;t seem to reference whatwg-streams, so I assume its not related?</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Mon Mar 23 2015 10:27:17 GMT-0700 (Pacific Daylight Time)">17:27</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">wanderview: I think you&#039;re right, stream means something different here</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Mon Mar 23 2015 10:29:07 GMT-0700 (Pacific Daylight Time)">17:29</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">JakeA: does anyone implement this spec yet?  or it mainly meant as something other specs can refer to?</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Mon Mar 23 2015 10:29:18 GMT-0700 (Pacific Daylight Time)">17:29</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">wanderview: it appears to be in Canary</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Mon Mar 23 2015 10:30:25 GMT-0700 (Pacific Daylight Time)">17:30</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">JakeA: <a href="http://heycam.github.io/webidl/#common-BufferSource">http://heycam.github.io/webidl/#common-BufferSource</a></td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Mon Mar 23 2015 10:30:34 GMT-0700 (Pacific Daylight Time)">17:30</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">I guess it should link there</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Mon Mar 23 2015 10:30:44 GMT-0700 (Pacific Daylight Time)">17:30</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Aha!</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Mon Mar 23 2015 10:30:48 GMT-0700 (Pacific Daylight Time)">17:30</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">the &quot;copy to&quot; link in the decode() function goes to that spec</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Mon Mar 23 2015 10:39:51 GMT-0700 (Pacific Daylight Time)">17:39</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=gsnedders@irc>gsnedders</span>&gt;</td><td class="msg-cell">TabAtkins: :)</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Mon Mar 23 2015 10:45:49 GMT-0700 (Pacific Daylight Time)">17:45</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Ok, worked it out. var d = new TextDecoder(); d.decode(uint8Array, {stream: true}); /* returns whole chars, doesn&#039;t cut off partial utf8 chars */ d.decode(uint8Array, {stream: true}); /* this is added to the data it had so far */</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Mon Mar 23 2015 10:46:39 GMT-0700 (Pacific Daylight Time)">17:46</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">wanderview ^</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Mon Mar 23 2015 10:47:10 GMT-0700 (Pacific Daylight Time)">17:47</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=jsbell@irc>jsbell</span>&gt;</td><td class="msg-cell">JakeA: I&#039;m lacking context but I can help w/ text encoding API stuff. :)</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Mon Mar 23 2015 10:47:59 GMT-0700 (Pacific Daylight Time)">17:47</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">jsbell: I&#039;m playing with the streams API, so I&#039;m getting chunks as uint8array, I&#039;m trying to read this as text in a way that don&#039;t fail if the chunk ends/starts on parts of a multibyte char</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Mon Mar 23 2015 10:48:40 GMT-0700 (Pacific Daylight Time)">17:48</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=jsbell@irc>jsbell</span>&gt;</td><td class="msg-cell">JakeA: Yep, {stream:true}. And you probably want to call d.decode() (no i.e. default args) at the end of the stream to flush</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Mon Mar 23 2015 10:49:09 GMT-0700 (Pacific Daylight Time)">17:49</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=jsbell@irc>jsbell</span>&gt;</td><td class="msg-cell">so that if you have a partial sequence it correctly generates a U+FFFD</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Mon Mar 23 2015 10:50:05 GMT-0700 (Pacific Daylight Time)">17:50</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=jsbell@irc>jsbell</span>&gt;</td><td class="msg-cell">JakeA: I haven&#039;t had a chance to soak in streams; glad someone&#039;s trying to compose encoding+streams</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Mon Mar 23 2015 10:50:08 GMT-0700 (Pacific Daylight Time)">17:50</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">jsbell: like this? <a href="https://jsbin.com/gowaze/quiet">https://jsbin.com/gowaze/quiet</a></td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Mon Mar 23 2015 10:50:49 GMT-0700 (Pacific Daylight Time)">17:50</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=jsbell@irc>jsbell</span>&gt;</td><td class="msg-cell">JakeA: lgtm</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Mon Mar 23 2015 10:50:52 GMT-0700 (Pacific Daylight Time)">17:50</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">jsbell: ideally in future this should be stream.pipeThrough(new TextDecoder) I think</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Mon Mar 23 2015 10:51:06 GMT-0700 (Pacific Daylight Time)">17:51</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">is the text regarding the stream option correct?  <a href="https://developer.mozilla.org/en-US/docs/Web/API/TextDecoder/decode">https://developer.mozilla.org/en-US/docs/Web/API/TextDecoder/decode</a></td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Mon Mar 23 2015 10:52:11 GMT-0700 (Pacific Daylight Time)">17:52</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=jsbell@irc>jsbell</span>&gt;</td><td class="msg-cell">Um... not really correct. Not very helpful anyway....</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Mon Mar 23 2015 10:52:30 GMT-0700 (Pacific Daylight Time)">17:52</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">yea</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Mon Mar 23 2015 10:53:18 GMT-0700 (Pacific Daylight Time)">17:53</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">JakeA: and I guess everyone supports it except IE/safari</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Mon Mar 23 2015 10:53:53 GMT-0700 (Pacific Daylight Time)">17:53</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=jsbell@irc>jsbell</span>&gt;</td><td class="msg-cell">I has polyfill: <a href="https://github.com/inexorabletash/text-encoding">https://github.com/inexorabletash/text-encoding</a></td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Mon Mar 23 2015 10:54:48 GMT-0700 (Pacific Daylight Time)">17:54</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">nice</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Mon Mar 23 2015 10:56:58 GMT-0700 (Pacific Daylight Time)">17:56</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=jsbell@irc>jsbell</span>&gt;</td><td class="msg-cell">Spec isn&#039;t much clearer on &#039;stream&#039; but that&#039;s not the spec&#039;s job. :) MDN could say: &quot;A Boolean flag indicating that additional data to decode will follow in subsequent calls to decode(). Set to true if processing the data in chunks, and false for the final chunk or if the data is not chunked&quot; or something</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Mon Mar 23 2015 11:04:03 GMT-0700 (Pacific Daylight Time)">18:04</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">JakeA: yeah the plan is to do &quot;encoding api v2&quot; when we have all the parts of streams figured out</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Mon Mar 23 2015 11:04:20 GMT-0700 (Pacific Daylight Time)">18:04</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">Possibly add some simpler static methods for one-shot encoding/decoding while we&#039;re there</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Mon Mar 23 2015 11:04:59 GMT-0700 (Pacific Daylight Time)">18:04</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">I think I asked annevk about this and he said that TextEncoder instances didn&#039;t keep any state, and so I&#039;m not sure what to do about landing halfway through multibyte content :-S</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Mon Mar 23 2015 11:05:01 GMT-0700 (Pacific Daylight Time)">18:05</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Domenic: jsbell: so does my use of decoder make sense here <a href="https://jsbin.com/gowaze/edit?js">https://jsbin.com/gowaze/edit?js</a></td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Mon Mar 23 2015 11:05:20 GMT-0700 (Pacific Daylight Time)">18:05</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Domenic: they retain a stream, so there&#039;s some state</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Mon Mar 23 2015 11:05:29 GMT-0700 (Pacific Daylight Time)">18:05</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">&quot;stream&quot;</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Mon Mar 23 2015 11:05:55 GMT-0700 (Pacific Daylight Time)">18:05</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">calling .decode(input, {stream:true}) pushes to that internal stream</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Mon Mar 23 2015 11:06:11 GMT-0700 (Pacific Daylight Time)">18:06</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">gah jsbin I want to love you but why is the content area so small (jshint + giant features banner)</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Mon Mar 23 2015 11:06:47 GMT-0700 (Pacific Daylight Time)">18:06</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell"><a href="http://bit.ly/livedom">bit.ly/livedom</a> :)</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Mon Mar 23 2015 11:07:05 GMT-0700 (Pacific Daylight Time)">18:07</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">JakeA: in general you&#039;ll either have { value: x, done: false } or { value: undefined, done: true }, so you can simplify a bit</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Mon Mar 23 2015 11:07:41 GMT-0700 (Pacific Daylight Time)">18:07</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">but yeah looks solid in general</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Mon Mar 23 2015 11:08:44 GMT-0700 (Pacific Daylight Time)">18:08</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Domenic: what simplification? Drop the || []? I was worries the explicit undefined would be counted as a value</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Mon Mar 23 2015 11:09:05 GMT-0700 (Pacific Daylight Time)">18:09</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">But that doesn&#039;t appear to be the case, cool</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Mon Mar 23 2015 11:09:20 GMT-0700 (Pacific Daylight Time)">18:09</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">JakeA: I was thinking, test result.done early and bail immediatley if you see it</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Mon Mar 23 2015 11:09:26 GMT-0700 (Pacific Daylight Time)">18:09</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">then assume it&#039;s false from then on</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Mon Mar 23 2015 11:10:22 GMT-0700 (Pacific Daylight Time)">18:10</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Domenic: I don&#039;t think I can, because partialCell may still contain data. Also calling decode will flush any remaining data.</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Mon Mar 23 2015 11:11:59 GMT-0700 (Pacific Daylight Time)">18:11</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">Ah, interesting, I see.</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Mon Mar 23 2015 11:12:21 GMT-0700 (Pacific Daylight Time)">18:12</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">You don&#039;t need to pass { stream: true } for previous chunks, only for the last one?</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Mon Mar 23 2015 11:13:59 GMT-0700 (Pacific Daylight Time)">18:13</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">I guess just worth testing this thing on some real data and we&#039;ll know the answer :P</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Mon Mar 23 2015 11:17:09 GMT-0700 (Pacific Daylight Time)">18:17</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=jsbell@irc>jsbell</span>&gt;</td><td class="msg-cell">JakeA: I may have lost context, but {stream: result.done} seems like it should be {stream: !result.done} ??</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Mon Mar 23 2015 11:18:49 GMT-0700 (Pacific Daylight Time)">18:18</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">right, I think that is what I was implying as well</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Mon Mar 23 2015 11:18:59 GMT-0700 (Pacific Daylight Time)">18:18</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=jsbell@irc>jsbell</span>&gt;</td><td class="msg-cell">stream is basically !flush</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Mon Mar 23 2015 11:21:12 GMT-0700 (Pacific Daylight Time)">18:21</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=jsbell@irc>jsbell</span>&gt;</td><td class="msg-cell">&lt;3 wanderview for updating MDN already</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Mon Mar 23 2015 11:21:26 GMT-0700 (Pacific Daylight Time)">18:21</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">np! thanks for the text :-)</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Mon Mar 23 2015 11:25:29 GMT-0700 (Pacific Daylight Time)">18:25</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=jsbell@irc>jsbell</span>&gt;</td><td class="msg-cell">wanderview: if you&#039;re feeling really keen, you can crib the examples from <a href="https://github.com/inexorabletash/text-encoding">https://github.com/inexorabletash/text-encoding</a></td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Mon Mar 23 2015 11:26:45 GMT-0700 (Pacific Daylight Time)">18:26</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">jsbell: thanks... I&#039;ll see if I can find the time later today</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Mon Mar 23 2015 11:55:14 GMT-0700 (Pacific Daylight Time)">18:55</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">jsbell: oh wow, yes, don&#039;t know how that crept in</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Mon Mar 23 2015 11:56:38 GMT-0700 (Pacific Daylight Time)">18:56</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">I can code, honest</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Mon Mar 23 2015 11:56:39 GMT-0700 (Pacific Daylight Time)">18:56</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">I can code, honest</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Mon Mar 23 2015 16:06:40 GMT-0700 (Pacific Daylight Time)">23:06</a></td><td class="nick-cell">&lt;<span class="nick nick-15" title=othermaciej@irc>othermaciej</span>&gt;</td><td class="msg-cell">is there anyone around who understands how microtasks are supposed to work?</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Mon Mar 23 2015 16:06:44 GMT-0700 (Pacific Daylight Time)">23:06</a></td><td class="nick-cell">&lt;<span class="nick nick-15" title=othermaciej@irc>othermaciej</span>&gt;</td><td class="msg-cell">I am finding the spec confusing</td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Mon Mar 23 2015 16:19:54 GMT-0700 (Pacific Daylight Time)">23:19</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=jsbell@irc>jsbell</span>&gt;</td><td class="msg-cell">othermaciej: maybe? what&#039;s up?</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Mon Mar 23 2015 16:22:52 GMT-0700 (Pacific Daylight Time)">23:22</a></td><td class="nick-cell">&lt;<span class="nick nick-15" title=othermaciej@irc>othermaciej</span>&gt;</td><td class="msg-cell">jsbell: is there anything that causes microtasks to be performed after an event handler, function-based timer, or other non-script-based callback is run?</td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Mon Mar 23 2015 16:23:39 GMT-0700 (Pacific Daylight Time)">23:23</a></td><td class="nick-cell">&lt;<span class="nick nick-15" title=othermaciej@irc>othermaciej</span>&gt;</td><td class="msg-cell">it sure sounds like this algorithm should run after such callbacks: <a href="https://html.spec.whatwg.org/#clean-up-after-running-a-callback">https://html.spec.whatwg.org/#clean-up-after-running-a-callback</a></td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Mon Mar 23 2015 16:24:37 GMT-0700 (Pacific Daylight Time)">23:24</a></td><td class="nick-cell">&lt;<span class="nick nick-15" title=othermaciej@irc>othermaciej</span>&gt;</td><td class="msg-cell">but I could not find anything that would cause it to happen; only seems to happen for stuff evaluating bare script code, like &lt;script&gt; or a timer with a string instead of a function</td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Mon Mar 23 2015 16:45:55 GMT-0700 (Pacific Daylight Time)">23:45</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=jamesr___@irc>jamesr___</span>&gt;</td><td class="msg-cell">othermaciej: <a href="https://html.spec.whatwg.org/multipage/webappapis.html#processing-model-9">https://html.spec.whatwg.org/multipage/webappapis.html#processing-model-9</a> step 7 perhaps?</td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Mon Mar 23 2015 16:46:41 GMT-0700 (Pacific Daylight Time)">23:46</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=jamesr___@irc>jamesr___</span>&gt;</td><td class="msg-cell">there are various other invocations of the &quot;Perform a microtask checkpoint.&quot; text, for example in the &quot;spin the event loop&quot; section</td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Mon Mar 23 2015 16:49:20 GMT-0700 (Pacific Daylight Time)">23:49</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=jamesr___@irc>jamesr___</span>&gt;</td><td class="msg-cell">but the task one in the processing model should cover event handler, function-based timer and other non-script-based callbacks</td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Mon Mar 23 2015 16:49:23 GMT-0700 (Pacific Daylight Time)">23:49</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=jamesr___@irc>jamesr___</span>&gt;</td><td class="msg-cell">since those are all tasks</td></tr>
  <tr class="msg" id="L100"><td class="ts-cell"><a class="ts" href="#L100" alt="Mon Mar 23 2015 16:52:56 GMT-0700 (Pacific Daylight Time)">23:52</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=jsbell@irc>jsbell</span>&gt;</td><td class="msg-cell">(sorry was afk). Agreed - anything that isn&#039;t covered by that sounds like a spec bug.</td></tr>
  <tr class="msg" id="L101"><td class="ts-cell"><a class="ts" href="#L101" alt="Mon Mar 23 2015 16:55:57 GMT-0700 (Pacific Daylight Time)">23:55</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=jsbell@irc>jsbell</span>&gt;</td><td class="msg-cell">jgraham: I&#039;ve lost track of what the actual question is in the serviceworker/wpt thread</td></tr>
  <tr class="msg" id="L102"><td class="ts-cell"><a class="ts" href="#L102" alt="Mon Mar 23 2015 16:57:11 GMT-0700 (Pacific Daylight Time)">23:57</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">jsbell: The latest messages are about whether the tests can be written to run on https rather than on http</td></tr>
  <tr class="msg" id="L103"><td class="ts-cell"><a class="ts" href="#L103" alt="Mon Mar 23 2015 16:57:55 GMT-0700 (Pacific Daylight Time)">23:57</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">AIUI the tests currently rely on running on a hostname that&#039;s whitelisted as allowing SW on http i.e. <a href="http://localhost">localhost</a> or 127.0.0.1</td></tr>
  <tr class="msg" id="L104"><td class="ts-cell"><a class="ts" href="#L104" alt="Mon Mar 23 2015 16:58:39 GMT-0700 (Pacific Daylight Time)">23:58</a></td><td class="nick-cell">&lt;<span class="nick nick-15" title=othermaciej@irc>othermaciej</span>&gt;</td><td class="msg-cell">jamesr___: yeah, I am not sure if event handlers, function timers, and miscellaneous functioncallbacks, are all meant to be handled by the post-task catchall</td></tr>
  <tr class="msg" id="L105"><td class="ts-cell"><a class="ts" href="#L105" alt="Mon Mar 23 2015 16:58:47 GMT-0700 (Pacific Daylight Time)">23:58</a></td><td class="nick-cell">&lt;<span class="nick nick-15" title=othermaciej@irc>othermaciej</span>&gt;</td><td class="msg-cell">jamesr___: or if they should have some specific affordance</td></tr>
  <tr class="msg" id="L106"><td class="ts-cell"><a class="ts" href="#L106" alt="Mon Mar 23 2015 16:58:54 GMT-0700 (Pacific Daylight Time)">23:58</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=jsbell@irc>jsbell</span>&gt;</td><td class="msg-cell">jgraham: as far as chrome&#039;s test harness goes, <a href="https://localhost:8443">https://localhost:8443</a> should be available</td></tr>
  <tr class="msg" id="L107"><td class="ts-cell"><a class="ts" href="#L107" alt="Mon Mar 23 2015 16:59:05 GMT-0700 (Pacific Daylight Time)">23:59</a></td><td class="nick-cell">&lt;<span class="nick nick-15" title=othermaciej@irc>othermaciej</span>&gt;</td><td class="msg-cell">jamesr___: it potentially makes a difference, for example for events dispatched synchronously from within script</td></tr>
</tbody></table>
</div></div></div></body>
