<!doctype html>
<head>
  <title>#whatwg on 2018-05-17</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#whatwg<br>2018-05-17<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2018-05-16" class="nav-link"><span>prev</span></a>
<a href="2018-05-18" class="nav-link"><span style="float:right">next</span></a>
</div>
    
<div class="room-list-wrapper">Active:<br>
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/">WHATWG</a></li>
</ul>
</div>
<br>
<div class="room-list-wrapper">Historical:<br>
<ul class="room-list">
<li><a href="../irc-tc39/">#tc39</a></li>
<li><a href="../irc-tc39-delegates/">#tc39-delegates</a></li>
<li><a href="../irc-tc39-editor-group/">#tc39-editor-group</a></li>
<li><a href="../irc-whatwg/" class="current-room">#whatwg</a></li>
</ul>
</div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>
<input type="text" id="query" size=25 placeholder="Search #whatwg">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed May 16 2018 18:02:51 GMT-0700 (Pacific Daylight Time)">01:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</div></td><td class="msg-cell">Domenic: what is the benefit of having the ‘crossOrigin’ IDL attribute nullable?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed May 16 2018 18:13:44 GMT-0700 (Pacific Daylight Time)">01:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">domfarolino: it allows removing the content attribute by setting the IDL atrribute to nill.</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed May 16 2018 20:37:25 GMT-0700 (Pacific Daylight Time)">03:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">does w3c have an irc channel besides the dead irc server</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed May 16 2018 20:50:48 GMT-0700 (Pacific Daylight Time)">03:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=joyee@irc>joyee</span>&gt;</div></td><td class="msg-cell">Domenic: is the &quot;last script tag of WPT are tests&quot; a convention? I am thinking about putting the tests that apply to browsers in a previous script tag, and tests that can be run by Node.js to the last tag, so it will be easier to automate any WPT updates in Node.js</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed May 16 2018 20:51:29 GMT-0700 (Pacific Daylight Time)">03:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">joyee: I don&#039;t think people would generally accept tests that don&#039;t run in browsers into the WPT project</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed May 16 2018 20:51:56 GMT-0700 (Pacific Daylight Time)">03:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=joyee@irc>joyee</span>&gt;</div></td><td class="msg-cell">Domenic: I mean to split the test cases into script tags</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed May 16 2018 20:52:00 GMT-0700 (Pacific Daylight Time)">03:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=joyee@irc>joyee</span>&gt;</div></td><td class="msg-cell">multiple tags</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed May 16 2018 20:52:19 GMT-0700 (Pacific Daylight Time)">03:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=joyee@irc>joyee</span>&gt;</div></td><td class="msg-cell">In general WPT is a superset</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed May 16 2018 20:52:25 GMT-0700 (Pacific Daylight Time)">03:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">ah i see</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed May 16 2018 20:52:51 GMT-0700 (Pacific Daylight Time)">03:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=joyee@irc>joyee</span>&gt;</div></td><td class="msg-cell">And we can update the union that can be run in both in the last script tag</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed May 16 2018 20:53:11 GMT-0700 (Pacific Daylight Time)">03:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">That should work fine, although it&#039;d need heavy commenting to hopefully prevent people from messing it up over time, since most contributors (including CI) won&#039;t be aware of this division</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed May 16 2018 20:53:45 GMT-0700 (Pacific Daylight Time)">03:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Like, most contributors have no idea what works or doesn&#039;t work in Node.js</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed May 16 2018 20:54:15 GMT-0700 (Pacific Daylight Time)">03:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=joyee@irc>joyee</span>&gt;</div></td><td class="msg-cell">I think right now only the URL tests are kept somewhat in sync</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Wed May 16 2018 20:55:00 GMT-0700 (Pacific Daylight Time)">03:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=joyee@irc>joyee</span>&gt;</div></td><td class="msg-cell">I&#039;ve been told that browsers can automatically upstream their tests into WPT, so I am thinking about doing the same thing in Node.js, but it would be tricky to comment out stuff that don&#039;t work in browsers</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed May 16 2018 20:55:08 GMT-0700 (Pacific Daylight Time)">03:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">My understanding is right now the URL tests are maintained for browsers but other projects like node or jsdom will do their own stuff with those files</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed May 16 2018 20:55:17 GMT-0700 (Pacific Daylight Time)">03:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Oh interesting</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Wed May 16 2018 20:55:48 GMT-0700 (Pacific Daylight Time)">03:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=joyee@irc>joyee</span>&gt;</div></td><td class="msg-cell">The blocking part is finding a way to denote the union of two sets</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Wed May 16 2018 20:57:26 GMT-0700 (Pacific Daylight Time)">03:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">I mean separate script tags will work for now I&#039;m just saying that future contributors might not understand the division and put stuff in the &quot;wrong&quot; script tags (since for browsers both script tags will work).</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Wed May 16 2018 20:58:23 GMT-0700 (Pacific Daylight Time)">03:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">If you were able to divide by file and API that&#039;d work better e.g. isolate all URL constructor tests into one file and insist that all future URL constructor tests also go there</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Wed May 16 2018 21:01:35 GMT-0700 (Pacific Daylight Time)">04:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=joyee@irc>joyee</span>&gt;</div></td><td class="msg-cell">Domenic: isn&#039;t that `url-constructor.html` is? Or that name just implies &quot;the the constructor is tested here&quot;, not that &quot;all constructor tests go here&quot;</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Wed May 16 2018 21:02:35 GMT-0700 (Pacific Daylight Time)">04:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">I think the former, e.g. failure.html tests the constructor too I believe.</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Wed May 16 2018 21:02:56 GMT-0700 (Pacific Daylight Time)">04:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">I&#039;m curious what file you&#039;re looking at right now that is mixed?</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Wed May 16 2018 21:04:09 GMT-0700 (Pacific Daylight Time)">04:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=joyee@irc>joyee</span>&gt;</div></td><td class="msg-cell">For example, this one <a href="https://github.com/w3c/web-platform-tests/blob/master/url/toascii.window.js">https://github.com/w3c/web-platform-tests/blob/master/url/toascii.window.js</a> there is `XMLHttpRequest`</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Wed May 16 2018 21:04:32 GMT-0700 (Pacific Daylight Time)">04:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=joyee@irc>joyee</span>&gt;</div></td><td class="msg-cell">I was working on a tool to automatically update WPT in Node.js, but I found tests that were commented out</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Wed May 16 2018 21:05:29 GMT-0700 (Pacific Daylight Time)">04:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=joyee@irc>joyee</span>&gt;</div></td><td class="msg-cell">Technically we can run the tests in a vm with browser globals that are just noops but it may not be enough</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Wed May 16 2018 21:07:40 GMT-0700 (Pacific Daylight Time)">04:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=joyee@irc>joyee</span>&gt;</div></td><td class="msg-cell">Basically grepping for `//` in `test/parallel/test-whatwg-url-*` would yield the results (with legit comments)</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Wed May 16 2018 21:12:11 GMT-0700 (Pacific Daylight Time)">04:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=joyee@irc>joyee</span>&gt;</div></td><td class="msg-cell">Domenic: I can work on splitting the tests that can&#039;t be run in Node.js into different files in WPT first as well, and focus on automating the process of updating tests that work into Node.js. If any updates come back breaking Node.js, we can just fix it and update again</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Wed May 16 2018 21:16:12 GMT-0700 (Pacific Daylight Time)">04:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Awesome, sounds pretty reasonable to me! We should also check with annevk, who should be waking up soon I think.</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Wed May 16 2018 21:18:04 GMT-0700 (Pacific Daylight Time)">04:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=joyee@irc>joyee</span>&gt;</div></td><td class="msg-cell">Great! Yeah now come to think of it, splitting into different files should make things simpler than splitting them into tags</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Wed May 16 2018 22:24:26 GMT-0700 (Pacific Daylight Time)">05:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">joyee: wfm</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Wed May 16 2018 22:24:45 GMT-0700 (Pacific Daylight Time)">05:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">joyee: note <a href="https://github.com/w3c/web-platform-tests/issues/10918">https://github.com/w3c/web-platform-tests/issues/10918</a> though</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Wed May 16 2018 22:30:56 GMT-0700 (Pacific Daylight Time)">05:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=joyee@irc>joyee</span>&gt;</div></td><td class="msg-cell">annevk: Thanks for the heads up. I don&#039;t think we have the two .js there since they involve `XMLHttpRequest` and `&lt;a&gt;`. The JSON fixtures are now manually being copy-pasted into our own fixtures directory with some comments added, I plan to move all the WPT files into a separate fixtures directory of the same layout in Node.js anyway so it should be fine.</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Thu May 17 2018 06:18:10 GMT-0700 (Pacific Daylight Time)">13:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">annevk: I&#039;m having brain fade. How do I reference <a href="https://html.spec.whatwg.org/multipage/links.html#downloading-hyperlinks">https://html.spec.whatwg.org/multipage/links.html#downloading-hyperlinks</a> in Bikeshed? Or is it not exported?</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Thu May 17 2018 06:18:32 GMT-0700 (Pacific Daylight Time)">13:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">The HTML spec&#039;s markup always trips me up</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Thu May 17 2018 06:20:20 GMT-0700 (Pacific Daylight Time)">13:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">Hm, it doesn&#039;t have data-export, so I guess I&#039;m stuck.</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Thu May 17 2018 06:21:21 GMT-0700 (Pacific Daylight Time)">13:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: you can add data-export</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Thu May 17 2018 06:21:32 GMT-0700 (Pacific Daylight Time)">13:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: then it&#039;ll be exported tomorrow</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Thu May 17 2018 06:21:55 GMT-0700 (Pacific Daylight Time)">13:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">Ta, I&#039;ll do a PR</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Thu May 17 2018 06:22:06 GMT-0700 (Pacific Daylight Time)">13:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: given that the processing model is a bit broken though I hope it&#039;s only for a non-normative dependency</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Thu May 17 2018 06:22:39 GMT-0700 (Pacific Daylight Time)">13:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: FYI, prefix commit with &quot;Meta:&quot;</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Thu May 17 2018 06:22:44 GMT-0700 (Pacific Daylight Time)">13:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">annevk: yeah, this is listing the types of APIs that make range-requests in a note</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Thu May 17 2018 06:22:55 GMT-0700 (Pacific Daylight Time)">13:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">ta</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Thu May 17 2018 06:33:33 GMT-0700 (Pacific Daylight Time)">13:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">annevk: A couple of parts of the fetch spec encode numbers to use as headers. What&#039;s the best way to encode a number for this purpose? <a href="https://heycam.github.io/webidl/#es-ByteString">https://heycam.github.io/webidl/#es-ByteString</a> seems close, but feels wrong to use something like this in-parallel.</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Thu May 17 2018 06:36:27 GMT-0700 (Pacific Daylight Time)">13:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: &quot;represented as shortest possible lowercase hexadecimal number&quot; or &quot;shortest possible decimal number&quot; is what URL seems to use</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Thu May 17 2018 06:36:55 GMT-0700 (Pacific Daylight Time)">13:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: ideally Infra defines this, but that&#039;s blocked on the BigInt refactoring of JS</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Thu May 17 2018 06:37:38 GMT-0700 (Pacific Daylight Time)">13:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: what URL uses doesn&#039;t seem quite accurate, as it doesn&#039;t really explain what code points/bytes to use</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Thu May 17 2018 06:38:11 GMT-0700 (Pacific Daylight Time)">13:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: I&#039;d be okay with a TODO and some hand-wavy wording for your Range patch</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Thu May 17 2018 06:38:45 GMT-0700 (Pacific Daylight Time)">13:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">annevk: I&#039;ll create the same definition as URL, along with a note</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Thu May 17 2018 06:40:18 GMT-0700 (Pacific Daylight Time)">13:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: I wonder how much more broken the UI would get if your download glitch demo also piped through a service worker</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Thu May 17 2018 06:41:05 GMT-0700 (Pacific Daylight Time)">13:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">since the SW layer forces the transfer encoding to be stripped from the stream... maybe it would actually work better</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Thu May 17 2018 06:41:51 GMT-0700 (Pacific Daylight Time)">13:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: it might not be any worse. Hah, yeah, probably better.</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Thu May 17 2018 06:42:11 GMT-0700 (Pacific Daylight Time)">13:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: unless it gets angry that it gets more data than the content-length</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Thu May 17 2018 06:42:25 GMT-0700 (Pacific Daylight Time)">13:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">but it feels like that would be a problem elsewhere</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Thu May 17 2018 06:42:42 GMT-0700 (Pacific Daylight Time)">13:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: yea, we already had to deal with that for normal service worker behavior with encoded resources</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Thu May 17 2018 06:42:59 GMT-0700 (Pacific Daylight Time)">13:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">basically a big shruggy for the content-length</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Thu May 17 2018 06:43:24 GMT-0700 (Pacific Daylight Time)">13:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: probably a can of worms to sort out when fetch progress API is added</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Thu May 17 2018 07:00:14 GMT-0700 (Pacific Daylight Time)">14:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Domenic: some review on the WIP PRs against html/html-build/wattsi would be helpful</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Thu May 17 2018 07:01:12 GMT-0700 (Pacific Daylight Time)">14:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Domenic: I think they&#039;re almost ready to go, after which HTML would finally have slightly annotated commits</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Thu May 17 2018 10:49:46 GMT-0700 (Pacific Daylight Time)">17:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">Hm.. does this really not have an outcome today? <a href="https://stackoverflow.com/a/34545749/319266">https://stackoverflow.com/a/34545749/319266</a></td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Thu May 17 2018 10:50:05 GMT-0700 (Pacific Daylight Time)">17:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">E.g. a safe way to generically escape and embed a JS response in an inline &lt;script&gt; on a HTML5 text/html response</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Thu May 17 2018 10:50:43 GMT-0700 (Pacific Daylight Time)">17:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">It surprised me that generically html-text escaping a script worked fine for evil event attributes, but not for inline scripts.</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Thu May 17 2018 10:51:30 GMT-0700 (Pacific Daylight Time)">17:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">e.g. &lt;script&gt;var a = &amp;quot;&amp;quot;&lt;/script&gt; is a syntax error but &lt;div onclick=&quot;alert(&amp;quot;&amp;quot;)&quot;&gt; is not. I understand why, but still would be very very good, if there was indeed a safe way to embed and escape it.</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Thu May 17 2018 10:51:41 GMT-0700 (Pacific Daylight Time)">17:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">Preferably a way that doesn&#039;t involve CDATA but maybe that&#039;s the only way?</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Thu May 17 2018 11:38:29 GMT-0700 (Pacific Daylight Time)">18:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</div></td><td class="msg-cell">Krinkle: Correct, there&#039;s no way to generically escape JS in a &lt;script&gt; tag without doing full JS parsing on your own, so you can find &lt;/script subsequences in strings/etc. No one-size-fits-all replacement method exists.</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Thu May 17 2018 11:41:41 GMT-0700 (Pacific Daylight Time)">18:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</div></td><td class="msg-cell">(Extra-hard mode: the / can come from a regex. The expression `x&lt;/script/.exec(...)` is both valid and potentially sensical, but it trigger end-of-&lt;script&gt;-block.</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Thu May 17 2018 11:41:42 GMT-0700 (Pacific Daylight Time)">18:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</div></td><td class="msg-cell">)</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Thu May 17 2018 12:03:18 GMT-0700 (Pacific Daylight Time)">19:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=jsbell@irc>jsbell</span>&gt;</div></td><td class="msg-cell">eval(atob(&#039;YWxlcnQoImhlbGxvIik=&#039;)) ... and I would have gotten away with it to except for those pesky kids and their CSP.</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Thu May 17 2018 12:03:37 GMT-0700 (Pacific Daylight Time)">19:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=jsbell@irc>jsbell</span>&gt;</div></td><td class="msg-cell">s/pesky/meddling/, *sigh*</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Thu May 17 2018 13:02:14 GMT-0700 (Pacific Daylight Time)">20:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</div></td><td class="msg-cell">jsbell: Not trying to prevent XSS here, just be able to splice in a script from server-side without the possibility of it accidentally closing the &lt;script&gt; element partway thru.</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Thu May 17 2018 14:51:45 GMT-0700 (Pacific Daylight Time)">21:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">I&#039;m seeing Chrome behaving inconsistently when setting `font-family` to a web font</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Thu May 17 2018 14:52:12 GMT-0700 (Pacific Daylight Time)">21:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">Sometimes the change is apparent synchronously, and sometimes not</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Thu May 17 2018 14:53:15 GMT-0700 (Pacific Daylight Time)">21:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">I&#039;m trying to find the relevant spec text, but I don&#039;t know where to look</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Thu May 17 2018 14:53:21 GMT-0700 (Pacific Daylight Time)">21:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">the closest I&#039;ve come is <a href="https://www.w3.org/TR/css-fonts-3/#font-fetching-requirements">https://www.w3.org/TR/css-fonts-3/#font-fetching-requirements</a></td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Thu May 17 2018 14:53:59 GMT-0700 (Pacific Daylight Time)">21:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">but that&#039;s not quite right, since it&#039;s not phrased in terms of the JavaScript execution context</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Thu May 17 2018 14:55:54 GMT-0700 (Pacific Daylight Time)">21:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</div></td><td class="msg-cell">As in, the layout effects of the new font might be async?</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Thu May 17 2018 15:07:51 GMT-0700 (Pacific Daylight Time)">22:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">TabAtkins: yeah. They normally are</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Thu May 17 2018 15:11:11 GMT-0700 (Pacific Daylight Time)">22:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">Still experimenting, but this may be related to the @font-face definition as well</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Thu May 17 2018 16:18:47 GMT-0700 (Pacific Daylight Time)">23:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">TabAtkins: Aye, yeah. it&#039;s unfortunate, given that in most other areas, HTML escaping does not affect the code&#039;s function. E.g. things like attribute values such as for &lt;a href&gt; can redundantly use entities for any characters like &amp;lt; and it gets decoded before being interpreted as URL, but it seems that for &lt;script&gt; that isn&#039;t the case.</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Thu May 17 2018 16:19:06 GMT-0700 (Pacific Daylight Time)">23:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">Although some sources on the web suggest that HTML escaping is supported in &lt;script&gt; if and only if the document is in XML mode.</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Thu May 17 2018 16:19:29 GMT-0700 (Pacific Daylight Time)">23:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">E.g. that would allow &lt;script&gt;if ( 0 &amp;lt; 5 ) {}&lt;/script&gt; to parse without errors;</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Thu May 17 2018 16:28:42 GMT-0700 (Pacific Daylight Time)">23:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">Ha, indeed. I&#039;m able to get it to work in an isolated test by using &#039;Content-Type: application/xhtml+xml&#039; although at least in Chrome it only worked if I also added the xmlns attribute to the &lt;html&gt; element. Otherwise it kept interpreting it as HTML.</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Thu May 17 2018 16:31:44 GMT-0700 (Pacific Daylight Time)">23:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</div></td><td class="msg-cell">Krinkle: Yup, but then you pay the penalty that you *can&#039;t* write a bare &lt; in your script without cdata.</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Thu May 17 2018 16:34:08 GMT-0700 (Pacific Daylight Time)">23:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</div></td><td class="msg-cell">(and if you use cdata, you run into the same difficulty as with avoiding &lt;/script)</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Thu May 17 2018 16:34:49 GMT-0700 (Pacific Daylight Time)">23:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">TabAtkins: Yeah - <a href="https://github.com/wikimedia/mediawiki/blob/1.30.0/includes/Html.php#L594-L612">https://github.com/wikimedia/mediawiki/blob/1.30.0/includes/Html.php#L594-L612</a></td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Thu May 17 2018 16:34:57 GMT-0700 (Pacific Daylight Time)">23:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">For CSS we somewhat found a workaround for that.</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Thu May 17 2018 16:35:00 GMT-0700 (Pacific Daylight Time)">23:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">But not for JS really</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Thu May 17 2018 16:35:26 GMT-0700 (Pacific Daylight Time)">23:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">CDATA syntax is rare enough that it hasn&#039;t bitten us yet in the subset of scripts that can end up embedded</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Thu May 17 2018 16:36:14 GMT-0700 (Pacific Daylight Time)">23:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</div></td><td class="msg-cell">The end glyphs for cdata are even more reasonable to show up in a realistic script, imo. Just a ]]&gt;</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Thu May 17 2018 16:36:22 GMT-0700 (Pacific Daylight Time)">23:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">XML mode support has been removed from MediaWiki in a previous version. It used to be a site configuration option for admins, but it was too troublesome to guruantee and just in general the idea of supporting two modes. We ended up going with HTML5.</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Thu May 17 2018 16:36:39 GMT-0700 (Pacific Daylight Time)">23:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</div></td><td class="msg-cell">That&#039;s just a double-array access with a comparison.</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Thu May 17 2018 16:37:28 GMT-0700 (Pacific Daylight Time)">23:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">Right, but that&#039;s only a problem in XML mode, right?</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Thu May 17 2018 16:40:12 GMT-0700 (Pacific Daylight Time)">23:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">From a quick test, having a &lt;script&gt;/*&lt;![CDATA[*/ if ( &#039;&#039;[&#039;&#039;[0]]&gt;0 ) {} console.log(1);/*]]&gt;*/&lt;/script&gt; seems to work fine</td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Thu May 17 2018 16:40:14 GMT-0700 (Pacific Daylight Time)">23:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">in HTML mode</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Thu May 17 2018 16:40:23 GMT-0700 (Pacific Daylight Time)">23:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">despite containing a literal ]]&gt;</td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Thu May 17 2018 16:41:09 GMT-0700 (Pacific Daylight Time)">23:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">Not sure why/how that works.</td></tr>

</tbody></table></div></div></div></body>
