<!doctype html>
<head>
  <title>#whatwg on 2016-07-20</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#whatwg<br>2016-07-20<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2016-07-19" class="nav-link"><span>prev</span></a>
<a href="2016-07-21" class="nav-link"><span style="float:right">next</span></a>
</div>
    
<div class="room-list-wrapper">Active:<br>
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/">WHATWG</a></li>
</ul>
</div>
<br>
<div class="room-list-wrapper">Historical:<br>
<ul class="room-list">
<li><a href="../irc-tc39/">#tc39</a></li>
<li><a href="../irc-tc39-delegates/">#tc39-delegates</a></li>
<li><a href="../irc-tc39-editor-group/">#tc39-editor-group</a></li>
<li><a href="../irc-whatwg/" class="current-room">#whatwg</a></li>
</ul>
</div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs"><div class="log">
<table><tbody id="log-tbody">
  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Jul 19 2016 22:25:44 GMT-0700 (Pacific Daylight Time)">05:25</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</td><td class="msg-cell">mathiasbynens: thanks massively for making <a href="https://github.com/operasoftware/devopera-static-backup">https://github.com/operasoftware/devopera-static-backup</a></td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Jul 19 2016 22:27:03 GMT-0700 (Pacific Daylight Time)">05:27</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</td><td class="msg-cell">mathiasbynens: the MAMA data alone is still really valuable</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Jul 19 2016 22:28:20 GMT-0700 (Pacific Daylight Time)">05:28</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</td><td class="msg-cell">mathiasbynens: case in point <a href="https://cdn.rawgit.com/operasoftware/devopera-static-backup/master/http/devfiles.myopera.com/articles/572/langlist-url.htm">https://cdn.rawgit.com/operasoftware/devopera-static-backup/master/http/devfiles.myopera.com/articles/572/langlist-url.htm</a> (which I am looking at for trying to figure out what languages to prioritize in the language detector in the HTML checker)</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue Jul 19 2016 22:35:33 GMT-0700 (Pacific Daylight Time)">05:35</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Woohoo, :any-link is finally landing in Firefox (sans prefix)</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Tue Jul 19 2016 22:36:56 GMT-0700 (Pacific Daylight Time)">05:36</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">No more :link:hover, :visited:hover and such</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Tue Jul 19 2016 23:21:39 GMT-0700 (Pacific Daylight Time)">06:21</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=mathiasbynens@irc>mathiasbynens</span>&gt;</td><td class="msg-cell">MikeSmith: thanks, and sorry for breaking those URLs</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Jul 20 2016 01:09:49 GMT-0700 (Pacific Daylight Time)">08:09</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: I think <a href="https://github.com/slightlyoff/ServiceWorker/issues/920#issuecomment-233603440">https://github.com/slightlyoff/ServiceWorker/issues/920#issuecomment-233603440</a> misses a few things that slightlyoff mentioned</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed Jul 20 2016 01:10:18 GMT-0700 (Pacific Daylight Time)">08:10</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: in particular, the without SW scenario doesn&#039;t allow for creating the renderer and the fetch to happen in parallel, which is what&#039;s being suggested</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed Jul 20 2016 01:11:09 GMT-0700 (Pacific Daylight Time)">08:11</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: in particular, this is about a new tab scenario as I understand it, not navigation within an existing tab</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed Jul 20 2016 01:12:14 GMT-0700 (Pacific Daylight Time)">08:12</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: also, in part it is about the navigation fetch always returning new data, whereas all the subsequent fetches (and pushes) that follow from that are more likely to come from the cache</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed Jul 20 2016 01:13:47 GMT-0700 (Pacific Daylight Time)">08:13</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: furthermore, the with SW scenario doesn&#039;t acknowledge the implicit step 1.5, which is making the navigation fetch (and which cannot happen in parallel with creating the renderer since it needs the SW to be there)</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed Jul 20 2016 01:30:45 GMT-0700 (Pacific Daylight Time)">08:30</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: ah, my &quot;With SW&quot; was showing how things happen today, so showing the problem not the solution</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed Jul 20 2016 01:30:52 GMT-0700 (Pacific Daylight Time)">08:30</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Let me make that more clear</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Wed Jul 20 2016 01:33:21 GMT-0700 (Pacific Daylight Time)">08:33</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: yeah, I&#039;m looking at solutions that could improve this for general navigation, new tab, and maybe even homescreen launch when the browser isn&#039;t running</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed Jul 20 2016 01:34:52 GMT-0700 (Pacific Daylight Time)">08:34</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Well if the browser isn&#039;t running we don&#039;t even have a network thread</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed Jul 20 2016 01:35:30 GMT-0700 (Pacific Daylight Time)">08:35</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">The interesting bit I think is that when navigation happens we might have a network thread/process ready to go, but no render+SW thread/process</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Wed Jul 20 2016 01:36:15 GMT-0700 (Pacific Daylight Time)">08:36</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Right, and loading that part of the browser first can be optimised to get the request out early. Renderer &amp; SW not so much.</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Wed Jul 20 2016 01:36:22 GMT-0700 (Pacific Daylight Time)">08:36</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">This is really only the case for top-level browsing contexts and maybe isolated nested browsing contexts going forward</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Wed Jul 20 2016 01:36:56 GMT-0700 (Pacific Daylight Time)">08:36</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">So to some extent having an API in service workers to handle the navigation case differently doesn&#039;t feel like scenario solving to me as much</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Wed Jul 20 2016 01:37:17 GMT-0700 (Pacific Daylight Time)">08:37</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">But again, maybe there are architectures where the overhead can be much less or non-existent</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Wed Jul 20 2016 01:37:42 GMT-0700 (Pacific Daylight Time)">08:37</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">But my first render is still blocked on CSS, which is a subresource</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Wed Jul 20 2016 01:38:36 GMT-0700 (Pacific Daylight Time)">08:38</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Yeah, but if that&#039;s cached and the network roundtrip takes 200ms+, you&#039;re still waiting</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Wed Jul 20 2016 01:38:58 GMT-0700 (Pacific Daylight Time)">08:38</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">We can assume subresources are in the cache since we also assume the SW is installed</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Wed Jul 20 2016 01:39:42 GMT-0700 (Pacific Daylight Time)">08:39</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">But the navigation is what can retrieve the interesting cookie-bound data</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Wed Jul 20 2016 01:40:05 GMT-0700 (Pacific Daylight Time)">08:40</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">In Facebook&#039;s case it doesn&#039;t</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Wed Jul 20 2016 01:40:29 GMT-0700 (Pacific Daylight Time)">08:40</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">The navigation returns a shell, but it prompts the server to start preparing the user-sepcific stuff</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Wed Jul 20 2016 01:40:34 GMT-0700 (Pacific Daylight Time)">08:40</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">specific*</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Wed Jul 20 2016 01:40:50 GMT-0700 (Pacific Daylight Time)">08:40</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Unless I&#039;m mistaken</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Wed Jul 20 2016 01:42:20 GMT-0700 (Pacific Daylight Time)">08:42</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Yeah, it sounds like they mostly care about knowing as soon as possible on the server that the user is there</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Wed Jul 20 2016 01:42:40 GMT-0700 (Pacific Daylight Time)">08:42</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">I&#039;m just worried about solving this only for Facebook</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Wed Jul 20 2016 01:43:04 GMT-0700 (Pacific Daylight Time)">08:43</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">The closest thing we have right now is &lt;link rel=&quot;preload&quot;&gt;, but we want that before the renderer</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Wed Jul 20 2016 01:43:37 GMT-0700 (Pacific Daylight Time)">08:43</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">The &lt;link rel=preload&gt; analogy continues to confuse me</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Wed Jul 20 2016 01:43:59 GMT-0700 (Pacific Daylight Time)">08:43</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">All we have to go on is a navigation request</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Wed Jul 20 2016 01:45:39 GMT-0700 (Pacific Daylight Time)">08:45</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">I actually think slightlyoff&#039;s approach is not that bad, modulo naming and optin-optout</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Wed Jul 20 2016 01:46:33 GMT-0700 (Pacific Daylight Time)">08:46</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Currently the page loads, then they fetch(url) the user data. They want that fetch(url) request to happen sooner, but still receive it via the same mechanism. That&#039;s very similar to &lt;link rel=&quot;preload&quot;&gt;</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Wed Jul 20 2016 01:46:43 GMT-0700 (Pacific Daylight Time)">08:46</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">It should basically be an opt-in to the &quot;user is going to see your app real soon now&quot;</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Wed Jul 20 2016 01:47:34 GMT-0700 (Pacific Daylight Time)">08:47</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">I guess it&#039;s similar, but rel=preload only makes sense if you already have a document, which we don&#039;t</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Wed Jul 20 2016 01:48:39 GMT-0700 (Pacific Daylight Time)">08:48</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">But we might have. And if the navigation request doesn&#039;t produce a document, the preloads can be dropped</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Wed Jul 20 2016 01:48:55 GMT-0700 (Pacific Daylight Time)">08:48</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">We might have?</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Wed Jul 20 2016 01:49:07 GMT-0700 (Pacific Daylight Time)">08:49</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">A document</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Wed Jul 20 2016 01:49:12 GMT-0700 (Pacific Daylight Time)">08:49</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">How?</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Wed Jul 20 2016 01:49:18 GMT-0700 (Pacific Daylight Time)">08:49</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">The whole premise is that we don&#039;t</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Wed Jul 20 2016 01:49:31 GMT-0700 (Pacific Daylight Time)">08:49</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Most navigation requests result in the creation of a document</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Wed Jul 20 2016 01:49:47 GMT-0700 (Pacific Daylight Time)">08:49</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Sure</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Wed Jul 20 2016 01:50:16 GMT-0700 (Pacific Daylight Time)">08:50</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">And if our preloads are associated with that potential document, they can be later associated or dropped if the document doesn&#039;t appear</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Wed Jul 20 2016 01:50:58 GMT-0700 (Pacific Daylight Time)">08:50</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">I don&#039;t understand this</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Wed Jul 20 2016 01:52:04 GMT-0700 (Pacific Daylight Time)">08:52</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Take <a href="https://wiki-offline.jakearchibald.com/wiki/Fictitious_entry">https://wiki-offline.jakearchibald.com/wiki/Fictitious_entry</a> - it serves a page shell then populates it via fetch(articleDataURL)</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Wed Jul 20 2016 01:52:21 GMT-0700 (Pacific Daylight Time)">08:52</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">That fetch is delayed by the renderer, SW, and executing the JS on the page</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Wed Jul 20 2016 01:52:41 GMT-0700 (Pacific Daylight Time)">08:52</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">The scenario we&#039;re concerned with is where the user wants to go to <a href="http://example.com">example.com</a>, <a href="http://example.com">example.com</a>&#039;s SW is not booted yet, <a href="http://example.com">example.com</a>&#039;s document is not created yet, <a href="http://example.com">example.com</a>&#039;s browsing context process is not done yet, and yet <a href="http://example.com">example.com</a> wants to know as soon as possible on its server that the user is coming to them</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Wed Jul 20 2016 01:53:44 GMT-0700 (Pacific Daylight Time)">08:53</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">&lt;link rel=&quot;preload&quot;&gt; can make that sooner, just after parsing the page. But what I&#039;m proposing is a way to declaratively say &quot;When you start a navigation to this article, you need to preload articleDataURL&quot;</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Wed Jul 20 2016 01:54:15 GMT-0700 (Pacific Daylight Time)">08:54</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">We&#039;re roughly talking about the same thing, but I&#039;m worried that making this a simple ping is scenario solving</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Wed Jul 20 2016 01:55:16 GMT-0700 (Pacific Daylight Time)">08:55</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">I don&#039;t think the user booting up an app and the OS letting the app&#039;s server know that is happening is scenario solving</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Wed Jul 20 2016 01:55:55 GMT-0700 (Pacific Daylight Time)">08:55</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">But a preload achieves the same, but in addition the response is useful</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Wed Jul 20 2016 01:56:20 GMT-0700 (Pacific Daylight Time)">08:56</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">I don&#039;t think the response was thrown away necessarily</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Wed Jul 20 2016 01:57:07 GMT-0700 (Pacific Daylight Time)">08:57</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">It wasn&#039;t in slightlyoff&#039;s proposal, but it&#039;s a total hack. You end up having to rely on persistence in the global scope</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Wed Jul 20 2016 01:57:38 GMT-0700 (Pacific Daylight Time)">08:57</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">That does sound problematic if true</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Wed Jul 20 2016 01:57:46 GMT-0700 (Pacific Daylight Time)">08:57</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Sure, the SW will *probably* still be alive for the request that needs it, but surely that&#039;s a horrible hack</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Wed Jul 20 2016 01:58:35 GMT-0700 (Pacific Daylight Time)">08:58</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">fetchEvent.preflightResponsePromise would be on the fetchEvent for the navigation request</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Wed Jul 20 2016 01:58:44 GMT-0700 (Pacific Daylight Time)">08:58</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">But it&#039;s a completely different request that wants that response</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Wed Jul 20 2016 01:59:09 GMT-0700 (Pacific Daylight Time)">08:59</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Yeah, I think it would make more sense to have a startup event or some such</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Wed Jul 20 2016 01:59:30 GMT-0700 (Pacific Daylight Time)">08:59</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">But you&#039;ll end up with the same problem</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Wed Jul 20 2016 01:59:43 GMT-0700 (Pacific Daylight Time)">08:59</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">That way we also only need to do it for the initial navigation to an origin (+ scope I guess)</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Wed Jul 20 2016 02:00:19 GMT-0700 (Pacific Daylight Time)">09:00</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">You do something in the startup event that you want to pass to a later fetch eventâ€¦ you&#039;ll end up using the global</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Wed Jul 20 2016 02:00:53 GMT-0700 (Pacific Daylight Time)">09:00</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: wouldn&#039;t you you just update the relevant storage data</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Wed Jul 20 2016 02:00:53 GMT-0700 (Pacific Daylight Time)">09:00</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">This is what led me to &lt;link rel=&quot;preload&quot;&gt;, as it (should be) designed to handle these races</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Wed Jul 20 2016 02:01:37 GMT-0700 (Pacific Daylight Time)">09:01</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Storage is async. Won&#039;t it race?</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Wed Jul 20 2016 02:02:36 GMT-0700 (Pacific Daylight Time)">09:02</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: it&#039;s not really clear how preloading assets helps with races if you need to do something more complicated than just returning blobs to the document</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Wed Jul 20 2016 02:03:56 GMT-0700 (Pacific Daylight Time)">09:03</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: My routes proposal lets you do network stuff and then get a fetch event for the more complex stuff</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Wed Jul 20 2016 02:04:11 GMT-0700 (Pacific Daylight Time)">09:04</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">If we want to go that far</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Wed Jul 20 2016 02:04:37 GMT-0700 (Pacific Daylight Time)">09:04</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">But a simple startup ping that you can cache does too</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Wed Jul 20 2016 02:05:28 GMT-0700 (Pacific Daylight Time)">09:05</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">I don&#039;t see how you can do with without a high chance of missing it due to races, especially given the time gap between these two events</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Wed Jul 20 2016 02:05:44 GMT-0700 (Pacific Daylight Time)">09:05</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Even with cache transations</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Wed Jul 20 2016 02:05:48 GMT-0700 (Pacific Daylight Time)">09:05</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">transactions*</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Wed Jul 20 2016 02:05:51 GMT-0700 (Pacific Daylight Time)">09:05</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">But they&#039;re not for the same resource</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Wed Jul 20 2016 02:06:02 GMT-0700 (Pacific Daylight Time)">09:06</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">So either way it&#039;s complicated</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Wed Jul 20 2016 02:06:45 GMT-0700 (Pacific Daylight Time)">09:06</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">You&#039;re assuming a very simple setup that seems unlikely in practice</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Wed Jul 20 2016 02:07:43 GMT-0700 (Pacific Daylight Time)">09:07</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Navigation starts, preflight ping happens, SW starts up, startup event fired &amp; ping added to cache, fetch event for navigation - served from cache, fetch event from user data - try to get ping response from cache</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Wed Jul 20 2016 02:07:54 GMT-0700 (Pacific Daylight Time)">09:07</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">(There might be perf benefits to routes in general though. I wonder if there&#039;s been measurements on that yet.)</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Wed Jul 20 2016 02:08:12 GMT-0700 (Pacific Daylight Time)">09:08</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Given cache writing is async, that seems really racey</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Wed Jul 20 2016 02:08:22 GMT-0700 (Pacific Daylight Time)">09:08</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">But is it really just a fetch event for user data?</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Wed Jul 20 2016 02:09:05 GMT-0700 (Pacific Daylight Time)">09:09</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">What else is it?</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Wed Jul 20 2016 02:09:47 GMT-0700 (Pacific Daylight Time)">09:09</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">The startup ping could have some information, of which parts of the response are used for further fetches</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Wed Jul 20 2016 02:10:30 GMT-0700 (Pacific Daylight Time)">09:10</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">I don&#039;t see how that changes the issue above. You&#039;re still storing that response and pulling it out later</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Wed Jul 20 2016 02:10:34 GMT-0700 (Pacific Daylight Time)">09:10</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">I wouldn&#039;t expect a 1:1 correspondence at all, that seems a lot more like scenario solving</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Wed Jul 20 2016 02:10:57 GMT-0700 (Pacific Daylight Time)">09:10</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">I&#039;m not saying the race isn&#039;t there</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Wed Jul 20 2016 02:11:09 GMT-0700 (Pacific Daylight Time)">09:11</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">I don&#039;t see how your solution solves it unless you assume 1:1</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Wed Jul 20 2016 02:11:45 GMT-0700 (Pacific Daylight Time)">09:11</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Can you describe the situation you&#039;re thinking of?</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Wed Jul 20 2016 02:12:03 GMT-0700 (Pacific Daylight Time)">09:12</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">From the UDP scenario they described it seems very clear it&#039;s not just a normal resource they&#039;re looking for</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Wed Jul 20 2016 02:12:07 GMT-0700 (Pacific Daylight Time)">09:12</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">It&#039;s just some data</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Wed Jul 20 2016 02:12:27 GMT-0700 (Pacific Daylight Time)">09:12</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">I don&#039;t understand the difference</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Wed Jul 20 2016 02:12:31 GMT-0700 (Pacific Daylight Time)">09:12</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Isn&#039;t data a resource?</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Wed Jul 20 2016 02:13:03 GMT-0700 (Pacific Daylight Time)">09:13</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">If I request some JSON, I&#039;m still requesting a resource</td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Wed Jul 20 2016 02:13:07 GMT-0700 (Pacific Daylight Time)">09:13</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">You&#039;re assuming the document needs to know the same stuff the service worker needs to know</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Wed Jul 20 2016 02:13:40 GMT-0700 (Pacific Daylight Time)">09:13</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">I&#039;m pretty sure I have what you&#039;re thinking about covered, but I don&#039;t know until you describe it</td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Wed Jul 20 2016 02:14:15 GMT-0700 (Pacific Daylight Time)">09:14</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Whereas you might well have a bunch of logic in the service worker on startup that updates various assets and such</td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Wed Jul 20 2016 02:14:43 GMT-0700 (Pacific Daylight Time)">09:14</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Do you mean: When a navigation happens I want another request to another url to happen and I want to handle the response in the service worker only, eg put the data in IDB</td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Wed Jul 20 2016 02:15:16 GMT-0700 (Pacific Daylight Time)">09:15</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">To put data in IDB, to make further requests, etc.</td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Wed Jul 20 2016 02:15:39 GMT-0700 (Pacific Daylight Time)">09:15</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">I don&#039;t necessarily think the request needs to go to a different URL btw</td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Wed Jul 20 2016 02:17:27 GMT-0700 (Pacific Daylight Time)">09:17</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">In my proposal you&#039;d saying &quot;for this navigation, perform this preload&quot;, and for that preload you&#039;d set up a route that goes to the network then defers to a fetch event</td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Wed Jul 20 2016 02:18:00 GMT-0700 (Pacific Daylight Time)">09:18</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">But yes, that&#039;s more complicated if we just want to do the ping thing</td></tr>
  <tr class="msg" id="L100"><td class="ts-cell"><a class="ts" href="#L100" alt="Wed Jul 20 2016 02:18:27 GMT-0700 (Pacific Daylight Time)">09:18</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">And the document actually needs to make that fetch</td></tr>
  <tr class="msg" id="L101"><td class="ts-cell"><a class="ts" href="#L101" alt="Wed Jul 20 2016 02:18:34 GMT-0700 (Pacific Daylight Time)">09:18</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Nope</td></tr>
  <tr class="msg" id="L102"><td class="ts-cell"><a class="ts" href="#L102" alt="Wed Jul 20 2016 02:18:50 GMT-0700 (Pacific Daylight Time)">09:18</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Oh, I think I see</td></tr>
  <tr class="msg" id="L103"><td class="ts-cell"><a class="ts" href="#L103" alt="Wed Jul 20 2016 02:19:02 GMT-0700 (Pacific Daylight Time)">09:19</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Because it&#039;s a preload it still roundtrips through the SW?</td></tr>
  <tr class="msg" id="L104"><td class="ts-cell"><a class="ts" href="#L104" alt="Wed Jul 20 2016 02:19:07 GMT-0700 (Pacific Daylight Time)">09:19</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Yep</td></tr>
  <tr class="msg" id="L105"><td class="ts-cell"><a class="ts" href="#L105" alt="Wed Jul 20 2016 02:19:15 GMT-0700 (Pacific Daylight Time)">09:19</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Fair</td></tr>
  <tr class="msg" id="L106"><td class="ts-cell"><a class="ts" href="#L106" alt="Wed Jul 20 2016 02:19:29 GMT-0700 (Pacific Daylight Time)">09:19</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">That&#039;s how preload works already</td></tr>
  <tr class="msg" id="L107"><td class="ts-cell"><a class="ts" href="#L107" alt="Wed Jul 20 2016 02:19:40 GMT-0700 (Pacific Daylight Time)">09:19</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">So yeah, for routes I think it would be interesting to know the perf benefits beyond startup</td></tr>
  <tr class="msg" id="L108"><td class="ts-cell"><a class="ts" href="#L108" alt="Wed Jul 20 2016 02:20:02 GMT-0700 (Pacific Daylight Time)">09:20</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Sure... But preload isn&#039;t normally triggered before there&#039;s a document</td></tr>
  <tr class="msg" id="L109"><td class="ts-cell"><a class="ts" href="#L109" alt="Wed Jul 20 2016 02:20:14 GMT-0700 (Pacific Daylight Time)">09:20</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Yeah, so that&#039;d be the new bit</td></tr>
  <tr class="msg" id="L110"><td class="ts-cell"><a class="ts" href="#L110" alt="Wed Jul 20 2016 02:20:22 GMT-0700 (Pacific Daylight Time)">09:20</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Also, preload is rather handwavy defined still</td></tr>
  <tr class="msg" id="L111"><td class="ts-cell"><a class="ts" href="#L111" alt="Wed Jul 20 2016 02:20:27 GMT-0700 (Pacific Daylight Time)">09:20</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">very much so</td></tr>
  <tr class="msg" id="L112"><td class="ts-cell"><a class="ts" href="#L112" alt="Wed Jul 20 2016 02:20:46 GMT-0700 (Pacific Daylight Time)">09:20</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">There&#039;s a cache somewhere and I&#039;d like igrigorik_ to define it</td></tr>
  <tr class="msg" id="L113"><td class="ts-cell"><a class="ts" href="#L113" alt="Wed Jul 20 2016 02:20:48 GMT-0700 (Pacific Daylight Time)">09:20</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Also, needing this + routes just for the Facebook case is pretty heavy</td></tr>
  <tr class="msg" id="L114"><td class="ts-cell"><a class="ts" href="#L114" alt="Wed Jul 20 2016 02:21:14 GMT-0700 (Pacific Daylight Time)">09:21</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Yeah, I want to know if it&#039;s the same cache H2 push uses too</td></tr>
  <tr class="msg" id="L115"><td class="ts-cell"><a class="ts" href="#L115" alt="Wed Jul 20 2016 02:21:57 GMT-0700 (Pacific Daylight Time)">09:21</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Hmm, I guess it sits somewhere close to the HTTP cache if it goes through SW</td></tr>
  <tr class="msg" id="L116"><td class="ts-cell"><a class="ts" href="#L116" alt="Wed Jul 20 2016 02:22:02 GMT-0700 (Pacific Daylight Time)">09:22</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">(I guess not because preload is document-associated and H2 push isn&#039;t)</td></tr>
  <tr class="msg" id="L117"><td class="ts-cell"><a class="ts" href="#L117" alt="Wed Jul 20 2016 02:22:10 GMT-0700 (Pacific Daylight Time)">09:22</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Definitely would have to be defined in Fetch</td></tr>
  <tr class="msg" id="L118"><td class="ts-cell"><a class="ts" href="#L118" alt="Wed Jul 20 2016 02:24:42 GMT-0700 (Pacific Daylight Time)">09:24</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">&lt;link rel=&quot;preload&quot; preempt skipserviceworker&gt; where &quot;preempt&quot; means the UA can assume this preload exists next time the user navigates to this page, and skipserviceworker skips the SW, would solve the Facebook case</td></tr>
  <tr class="msg" id="L119"><td class="ts-cell"><a class="ts" href="#L119" alt="Wed Jul 20 2016 02:25:36 GMT-0700 (Pacific Daylight Time)">09:25</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Now that is scenario solving</td></tr>
  <tr class="msg" id="L120"><td class="ts-cell"><a class="ts" href="#L120" alt="Wed Jul 20 2016 02:26:39 GMT-0700 (Pacific Daylight Time)">09:26</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">preempt is useful in lots of other situations, but maybe skipserviceworker is yeah</td></tr>
  <tr class="msg" id="L121"><td class="ts-cell"><a class="ts" href="#L121" alt="Wed Jul 20 2016 02:27:08 GMT-0700 (Pacific Daylight Time)">09:27</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">preempt means you could be warming up connections to other origins before the renderer</td></tr>
  <tr class="msg" id="L122"><td class="ts-cell"><a class="ts" href="#L122" alt="Wed Jul 20 2016 02:27:47 GMT-0700 (Pacific Daylight Time)">09:27</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">spinning up their service workers for foreign fetch if needed</td></tr>
  <tr class="msg" id="L123"><td class="ts-cell"><a class="ts" href="#L123" alt="Wed Jul 20 2016 02:28:45 GMT-0700 (Pacific Daylight Time)">09:28</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">But yeah, my only usecase for skipserviceworker is this Facebook one (or at least the only case that I can think of right now)</td></tr>
  <tr class="msg" id="L124"><td class="ts-cell"><a class="ts" href="#L124" alt="Wed Jul 20 2016 02:29:14 GMT-0700 (Pacific Daylight Time)">09:29</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">But doesn&#039;t &lt;link rel=&quot;preload&quot; preempt skipserviceworker&gt; fulfill all the same usecases you&#039;ve presented here?</td></tr>
  <tr class="msg" id="L125"><td class="ts-cell"><a class="ts" href="#L125" alt="Wed Jul 20 2016 02:29:58 GMT-0700 (Pacific Daylight Time)">09:29</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">No, it doesn&#039;t actually give the serivce worker a handle on the response to do further things with</td></tr>
  <tr class="msg" id="L126"><td class="ts-cell"><a class="ts" href="#L126" alt="Wed Jul 20 2016 02:30:09 GMT-0700 (Pacific Daylight Time)">09:30</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">No but the page can</td></tr>
  <tr class="msg" id="L127"><td class="ts-cell"><a class="ts" href="#L127" alt="Wed Jul 20 2016 02:30:46 GMT-0700 (Pacific Daylight Time)">09:30</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">That again assumes the page needs to have the app logic</td></tr>
  <tr class="msg" id="L128"><td class="ts-cell"><a class="ts" href="#L128" alt="Wed Jul 20 2016 02:31:29 GMT-0700 (Pacific Daylight Time)">09:31</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Sure. It could postMessage it to a service worker, or to many service workers. Seems ok</td></tr>
  <tr class="msg" id="L129"><td class="ts-cell"><a class="ts" href="#L129" alt="Wed Jul 20 2016 02:32:06 GMT-0700 (Pacific Daylight Time)">09:32</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">What it doesn&#039;t allow is linking the preload to a range of urls</td></tr>
  <tr class="msg" id="L130"><td class="ts-cell"><a class="ts" href="#L130" alt="Wed Jul 20 2016 02:32:26 GMT-0700 (Pacific Daylight Time)">09:32</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">The routing proposal could easily allow that. It&#039;s just much bigger.</td></tr>
  <tr class="msg" id="L131"><td class="ts-cell"><a class="ts" href="#L131" alt="Wed Jul 20 2016 02:32:38 GMT-0700 (Pacific Daylight Time)">09:32</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Requiring postMessage() seems cumbersome</td></tr>
  <tr class="msg" id="L132"><td class="ts-cell"><a class="ts" href="#L132" alt="Wed Jul 20 2016 02:33:06 GMT-0700 (Pacific Daylight Time)">09:33</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">The server and SW having some kind of startup signal seems like a useful primitive to have</td></tr>
  <tr class="msg" id="L133"><td class="ts-cell"><a class="ts" href="#L133" alt="Wed Jul 20 2016 02:33:08 GMT-0700 (Pacific Daylight Time)">09:33</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">*if* you want to do something with the response, and *if* you only want to do that within the service worker</td></tr>
  <tr class="msg" id="L134"><td class="ts-cell"><a class="ts" href="#L134" alt="Wed Jul 20 2016 02:33:53 GMT-0700 (Pacific Daylight Time)">09:33</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">The SW already has a startup signal. A fetch event with mode navigation when there are no other clients.</td></tr>
  <tr class="msg" id="L135"><td class="ts-cell"><a class="ts" href="#L135" alt="Wed Jul 20 2016 02:34:38 GMT-0700 (Pacific Daylight Time)">09:34</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">True</td></tr>
  <tr class="msg" id="L136"><td class="ts-cell"><a class="ts" href="#L136" alt="Wed Jul 20 2016 02:36:51 GMT-0700 (Pacific Daylight Time)">09:36</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">I&#039;m not totally against the idea of a &quot;get ready&quot; server ping. But once you start wanting to do something with that response, it sounds more and more like another preload, especially as the code gets really ugly if you want to use that response in a fetch</td></tr>
  <tr class="msg" id="L137"><td class="ts-cell"><a class="ts" href="#L137" alt="Wed Jul 20 2016 02:39:53 GMT-0700 (Pacific Daylight Time)">09:39</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Yeah</td></tr>
  <tr class="msg" id="L138"><td class="ts-cell"><a class="ts" href="#L138" alt="Wed Jul 20 2016 02:41:42 GMT-0700 (Pacific Daylight Time)">09:41</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Need to get a handle on what the minimum viable solution is here. Maybe server ping is ok</td></tr>
  <tr class="msg" id="L139"><td class="ts-cell"><a class="ts" href="#L139" alt="Wed Jul 20 2016 02:44:10 GMT-0700 (Pacific Daylight Time)">09:44</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Yeah, but also, can other UAs do networking without a renderer, etc.</td></tr>
  <tr class="msg" id="L140"><td class="ts-cell"><a class="ts" href="#L140" alt="Wed Jul 20 2016 02:44:20 GMT-0700 (Pacific Daylight Time)">09:44</a></td><td class="nick-cell">&lt;<span class="nick nick-15" title=kochi@irc>kochi</span>&gt;</td><td class="msg-cell">MikeSmith: is it okay for me to have power to put a label on GitHub issues on <a href="https://github.com/w3c/webcomponents/issues">https://github.com/w3c/webcomponents/issues</a> ?</td></tr>
  <tr class="msg" id="L141"><td class="ts-cell"><a class="ts" href="#L141" alt="Wed Jul 20 2016 02:47:14 GMT-0700 (Pacific Daylight Time)">09:47</a></td><td class="nick-cell">&lt;<span class="nick nick-15" title=kochi@irc>kochi</span>&gt;</td><td class="msg-cell">MikeSmith: probably it&#039;s because I&#039;m not a member of <a href="https://github.com/orgs/w3c/teams/webplatform">https://github.com/orgs/w3c/teams/webplatform</a>, I guess.</td></tr>
  <tr class="msg" id="L142"><td class="ts-cell"><a class="ts" href="#L142" alt="Wed Jul 20 2016 02:48:04 GMT-0700 (Pacific Daylight Time)">09:48</a></td><td class="nick-cell">&lt;<span class="nick nick-15" title=kochi@irc>kochi</span>&gt;</td><td class="msg-cell">aha, GitHub has &quot;Request to Join&quot; button on that page!</td></tr>
  <tr class="msg" id="L143"><td class="ts-cell"><a class="ts" href="#L143" alt="Wed Jul 20 2016 02:48:32 GMT-0700 (Pacific Daylight Time)">09:48</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">MikeSmith should definitely add you ðŸ˜Š</td></tr>
  <tr class="msg" id="L144"><td class="ts-cell"><a class="ts" href="#L144" alt="Wed Jul 20 2016 02:49:32 GMT-0700 (Pacific Daylight Time)">09:49</a></td><td class="nick-cell"><span class="nick nick-15" title=kochi@irc>kochi</span></td><td class="msg-cell">waits for it :)</td></tr>
  <tr class="msg" id="L145"><td class="ts-cell"><a class="ts" href="#L145" alt="Wed Jul 20 2016 03:36:41 GMT-0700 (Pacific Daylight Time)">10:36</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: does this make sense? <a href="https://github.com/slightlyoff/ServiceWorker/issues/920#issuecomment-233603440">https://github.com/slightlyoff/ServiceWorker/issues/920#issuecomment-233603440</a> Trying to get clarification on what the MVP is</td></tr>
  <tr class="msg" id="L146"><td class="ts-cell"><a class="ts" href="#L146" alt="Wed Jul 20 2016 03:52:54 GMT-0700 (Pacific Daylight Time)">10:52</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: makes sense</td></tr>
  <tr class="msg" id="L147"><td class="ts-cell"><a class="ts" href="#L147" alt="Wed Jul 20 2016 03:53:27 GMT-0700 (Pacific Daylight Time)">10:53</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: also interesting is whether subsequent navigations need to do the same or not</td></tr>
  <tr class="msg" id="L148"><td class="ts-cell"><a class="ts" href="#L148" alt="Wed Jul 20 2016 03:53:41 GMT-0700 (Pacific Daylight Time)">10:53</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: or just with cold start</td></tr>
  <tr class="msg" id="L149"><td class="ts-cell"><a class="ts" href="#L149" alt="Wed Jul 20 2016 05:44:43 GMT-0700 (Pacific Daylight Time)">12:44</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Good point, will add that</td></tr>
  <tr class="msg" id="L150"><td class="ts-cell"><a class="ts" href="#L150" alt="Wed Jul 20 2016 06:13:51 GMT-0700 (Pacific Daylight Time)">13:13</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</td><td class="msg-cell">kochi: I have as the team contact for the Web Platform WG to add you</td></tr>
  <tr class="msg" id="L151"><td class="ts-cell"><a class="ts" href="#L151" alt="Wed Jul 20 2016 06:14:00 GMT-0700 (Pacific Daylight Time)">13:14</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</td><td class="msg-cell">I think she is waiting on an OK by the chairs</td></tr>
  <tr class="msg" id="L152"><td class="ts-cell"><a class="ts" href="#L152" alt="Wed Jul 20 2016 08:05:40 GMT-0700 (Pacific Daylight Time)">15:05</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Domenic: I&#039;ll try to get to the adoption stuff by tomorrow</td></tr>
  <tr class="msg" id="L153"><td class="ts-cell"><a class="ts" href="#L153" alt="Wed Jul 20 2016 08:06:01 GMT-0700 (Pacific Daylight Time)">15:06</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Domenic: I think we&#039;ve given those reluctant long enough to come up with an alternative now</td></tr>
  <tr class="msg" id="L154"><td class="ts-cell"><a class="ts" href="#L154" alt="Wed Jul 20 2016 08:08:48 GMT-0700 (Pacific Daylight Time)">15:08</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=gsnedders@irc>gsnedders</span>&gt;</td><td class="msg-cell">things I&#039;m not a fan of: seeming subroutines in the spec magically jumping totally elsewhere</td></tr>
  <tr class="msg" id="L155"><td class="ts-cell"><a class="ts" href="#L155" alt="Wed Jul 20 2016 08:09:50 GMT-0700 (Pacific Daylight Time)">15:09</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">gsnedders: we accept patches</td></tr>
  <tr class="msg" id="L156"><td class="ts-cell"><a class="ts" href="#L156" alt="Wed Jul 20 2016 08:09:57 GMT-0700 (Pacific Daylight Time)">15:09</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">(and I agree)</td></tr>
  <tr class="msg" id="L157"><td class="ts-cell"><a class="ts" href="#L157" alt="Wed Jul 20 2016 08:10:23 GMT-0700 (Pacific Daylight Time)">15:10</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Also, parameters that are not named upfront</td></tr>
  <tr class="msg" id="L158"><td class="ts-cell"><a class="ts" href="#L158" alt="Wed Jul 20 2016 08:11:06 GMT-0700 (Pacific Daylight Time)">15:11</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Directly using a JavaScript property or method</td></tr>
  <tr class="msg" id="L159"><td class="ts-cell"><a class="ts" href="#L159" alt="Wed Jul 20 2016 08:13:04 GMT-0700 (Pacific Daylight Time)">15:13</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">annevk: sounds good!</td></tr>
  <tr class="msg" id="L160"><td class="ts-cell"><a class="ts" href="#L160" alt="Wed Jul 20 2016 08:13:21 GMT-0700 (Pacific Daylight Time)">15:13</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=gsnedders@irc>gsnedders</span>&gt;</td><td class="msg-cell">annevk: should I file a bug?</td></tr>
  <tr class="msg" id="L161"><td class="ts-cell"><a class="ts" href="#L161" alt="Wed Jul 20 2016 08:14:35 GMT-0700 (Pacific Daylight Time)">15:14</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">gsnedders: if it&#039;s not URL</td></tr>
  <tr class="msg" id="L162"><td class="ts-cell"><a class="ts" href="#L162" alt="Wed Jul 20 2016 08:39:08 GMT-0700 (Pacific Daylight Time)">15:39</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=gsnedders@irc>gsnedders</span>&gt;</td><td class="msg-cell">huh, no telemetry far as I can see for encoding usage?</td></tr>
  <tr class="msg" id="L163"><td class="ts-cell"><a class="ts" href="#L163" alt="Wed Jul 20 2016 09:25:57 GMT-0700 (Pacific Daylight Time)">16:25</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Pretty sure we measured things in that area</td></tr>
  <tr class="msg" id="L164"><td class="ts-cell"><a class="ts" href="#L164" alt="Wed Jul 20 2016 09:26:17 GMT-0700 (Pacific Daylight Time)">16:26</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Blink did for API at least</td></tr>
  <tr class="msg" id="L165"><td class="ts-cell"><a class="ts" href="#L165" alt="Wed Jul 20 2016 15:57:29 GMT-0700 (Pacific Daylight Time)">22:57</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">MikeSmith: bugspam on the WHATWG component from Minhhoang1208 &lt;hoangminh120814âŠ™gc&gt;, ban please?</td></tr>
</tbody></table>
</div></div></div></body>
