2013-11-01
[17:57:08.0000] <Hixie>
MikeSmith: know anything about problems with bugzilla?

[17:57:37.0000] <MikeSmith>
no, nothing new

[17:57:52.0000] <MikeSmith>
you've noticed done problems?

[18:00:49.0000] <Hixie>
yeah for some reason my script is getting a crsf token error

[18:00:52.0000] <Hixie>
and i can't work out why

[18:01:02.0000] <Hixie>
it looks like i'm doing it right

[18:05:11.0000] <MikeSmith>
Hixie: ok,maybe something changed in the config after the upgrade a few weeks back

[18:05:21.0000] <Hixie>
i dunno, it works when doing it by hand

[18:05:25.0000] <Hixie>
i'll have to look more tomorrow

[18:05:32.0000] <MikeSmith>
can check on it later today

[18:05:54.0000] <Hixie>
well, let me know if you hear anything, anyway

[18:05:58.0000] <Hixie>
no need to really look into it much

[18:06:34.0000] <MikeSmith>
ok. I'm away from my PC for a few hours yet anyway

[18:07:59.0000] <MikeSmith>
(ssh'ing to irssi from my mobile)

[18:14:01.0000] <MikeSmith>
haha https://code.google.com/p/chromium/issues/detail?id=152430#c82

[18:14:24.0000] <MikeSmith>
" The question that has been obliquely raised but never answered by the Chrome team is: why don't you hire someone to work on MathML so that someone does own the code and can fix problems when they come up?"

[18:19:06.0000] <MikeSmith>
this bug is almost as fun as the mozilla WebP bug

[18:19:54.0000] <MikeSmith>
bugzilla needs done way to rate bugs based on their entertainment value

[18:20:32.0000] <MikeSmith>
*some way

[18:27:12.0000] <SimonSapin>
I thought that was what popcorn.js was about

[18:27:55.0000] <MikeSmith>
eh?

[18:28:08.0000] <SimonSapin>
(joking)

[18:29:27.0000] <MikeSmith>
ah

[18:34:37.0000] <zewt>
MikeSmith: ssh is the worst way to phone irc, heh

[18:35:16.0000] <zewt>
i have irssi-proxy running on a server, so i can connect to it with a native client on my phone, and it connects to my existing session

[18:37:37.0000] <Hixie>
irc on a phone is such a bad experience

[18:37:46.0000] <Hixie>
same as sms or IM

[18:37:48.0000] <Hixie>
/me shudders

[18:38:38.0000] <zewt>
it works well for me, but i've jumped a lot of hoops to make it that way

[18:38:50.0000] <Hixie>
how do you get around the lack of a full-size keyboard?

[18:38:57.0000] <Hixie>
a full-size tactile keyboard

[18:39:10.0000] <zewt>
eg. i can load the client on my phone, it'll connect to my irc proxy, and the proxy sends the last ~20 lines of each channel to the client, so I can see current context even though I wasn't connected

[18:39:31.0000] <zewt>
by using the onscreen keyboard like any other mobile app

[18:39:49.0000] <zewt>
it sucks with ssh (which isn't designed for it), but it's no worse than any other app with a native client

[18:40:30.0000] <Hixie>
right, the native apps are horrific too :-)

[18:40:48.0000] <zewt>
that has nothing to do with irc :P

[18:40:55.0000] <Hixie>
you said it "works well"

[18:41:02.0000] <Hixie>
i wouldn't describe the SMS or IM experience on phones as "works well"

[18:41:06.0000] <Hixie>
let alone the IRC experience

[18:41:10.0000] <zewt>
works as well as anything, and it's pretty well once you're over the "i can't type on this fucking thing" hump

[18:41:23.0000] <Hixie>
that's the only hump i've had trouble with

[18:41:46.0000] <zewt>
but it's nothing particular to irc

[18:42:02.0000] <MikeSmith>
about keyboard, Swype on Android makes typing less painful

[18:42:11.0000] <zewt>
it took me a while to be able to use a vk without backspacing constantly

[18:42:18.0000] <Hixie>
it's worse on IRC than on the others because there's usually more volume so the typing is even more of an issue

[18:42:30.0000] <Hixie>
MikeSmith: android has had that built-in for a while

[18:42:32.0000] <zewt>
and unfortunately, if you want a keyboard that isn't painful to use, ios is really the only option (android's phone is much, much worse)

[18:42:49.0000] <Hixie>
oh good lord no

[18:42:57.0000] <zewt>
tis the facts

[18:43:00.0000] <Hixie>
the iOS keyboard is way worse than the current Android keyboard

[18:43:08.0000] <zewt>
n

[18:43:13.0000] <MikeSmith>
zewt: I'm pretty happy with irssi connectbot

[18:43:15.0000] <zewt>
unless it's changed completely in 4.3 or so

[18:43:22.0000] <Hixie>
it changed completely in 4.3 or so

[18:43:24.0000] <Hixie>
in fact, in 4.3.

[18:43:30.0000] <zewt>
android's keyboard is designed around "let people make lots of typos, then try to correct it after"

[18:43:34.0000] <zewt>
which is horrifyingly stupid

[18:43:43.0000] <Hixie>
4.3 is when it got the swiping action

[18:43:46.0000] <zewt>
ios is "make the character input smarter, so you don't make the typos in the first place"

[18:43:53.0000] <zewt>
i'm talking about keyboards, not swype

[18:44:01.0000] <Hixie>
i'm talking about the android native keyboard

[18:44:41.0000] <zewt>
you just said "swiping action" :)

[18:44:48.0000] <Hixie>
yes

[18:44:51.0000] <zewt>
that's an input method, it's not a keyboard

[18:44:55.0000] <Hixie>
the native android keyboard has built-in swiping

[18:45:06.0000] <Hixie>
you just drag around the keyboard instead of tapping each key

[18:45:12.0000] <Hixie>
it works so much better than typing on iOS

[18:45:18.0000] <Hixie>
imho

[18:45:18.0000] <zewt>
i've used that, don't care for it, but it's a different thing than a keyboard

[18:45:42.0000] <zewt>
haven't tried all that hard (planning on moving from android to ios for my next phone, so shrug)

[18:47:30.0000] <zewt>
but comparing keyboards to keyboards (not to other styles of input), my experience is that android is way behind

[18:47:49.0000] <zewt>
(my suspicion is it's patent crap, but as a user that doesn't help me much)

[18:48:05.0000] <Hixie>
just so we're clear, you mean that android < 4.3 is way behind?

[18:48:18.0000] <Hixie>
cos, yeah... it's way behind even android. :-)

[18:48:31.0000] <zewt>
that's what my main experience is with, yes, but it sounds like your 4.3 thing is about non-keyboard inputs like swype

[18:48:46.0000] <zewt>
does 4.3 have dynamic hit boxes for keys like ios?

[18:48:59.0000] <zewt>
i think that's the biggest thing

[18:50:05.0000] <Hixie>
4.3 and 4.4 have both majorly upgraded the keyboard, even ignoring swiping on the keyboard (i don't know why you think that's a different input mode though)

[18:50:16.0000] <Hixie>
(is dragging from shift to a letter also a non-keyboard input?)

[18:50:54.0000] <zewt>
i don't know why you'd want to do that, heh

[18:51:08.0000] <zewt>
i just hold shift and hit a letter (the wonders of multitouch)

[18:51:17.0000] <Hixie>
by "dynamic hit boxes" do you mean "doesn't bring up the letter you tapped"?

[18:51:23.0000] <zewt>
no

[18:51:38.0000] <Hixie>
what do you mean by it then?

[18:51:40.0000] <zewt>
the size of the box corresponding to each letter changes in size, depending on previous inputs

[18:51:45.0000] <Hixie>
the on-screen size?

[18:51:51.0000] <zewt>
no, it's invisible

[18:51:59.0000] <Hixie>
is there a gap between the letters or something?

[18:52:15.0000] <zewt>
if you type "hell", it knows the next letter is much more likely to be "o" than "p", so the hit box for "o" is enlarged slightly

[18:52:18.0000] <Hixie>
(on iOS, it's actually "doesn't bring up the letter you tapped", in my experience)

[18:52:22.0000] <zewt>
at the expense of "p"

[18:52:32.0000] <Hixie>
so, yes, it's "doesn't bring up the letter you tapped".

[18:52:39.0000] <zewt>
nothing to do with the visual feedback

[18:53:13.0000] <Hixie>
?

[18:53:28.0000] <Hixie>
if i put my finger on "h" then "e" then "l" then "l" then push on "p" and hold it, what letter does it show me pushing?

[18:53:29.0000] <zewt>
can you enhance the question

[18:53:31.0000] <Hixie>
o or p?

[18:53:51.0000] <zewt>
i'm not talking about anything to do with the visual feedback

[18:53:54.0000] <Hixie>
on android, it shows the "p", enters the "p", and then if you hit space, it accepts the current autocomplete which is "hello".

[18:54:08.0000] <Hixie>
i don't understand what you're talking about then

[18:54:24.0000] <zewt>
on ios, the visual boxes for each letter, and the rectangles that actually register a letter, aren't always the same

[18:55:04.0000] <Hixie>
yeah. that's what i said. it doesn't give you the letter you pressed.

[18:55:09.0000] <zewt>
keys that are more likely to be what you want have larger hit boxes (even though you can't see it--it doesn't actually change the key sizes ons creen)

[18:55:25.0000] <Hixie>
but it changes the popup key that tells you what you pressed

[18:55:32.0000] <Hixie>
so you press P, and it brings up a big "O" label

[18:55:44.0000] <zewt>
... that's a distant side-effect and not what I'm talking about, but okay

[18:56:14.0000] <Hixie>
the effect is the same as on android, but if you wanted to hit "p", it's harder. sure, it's better. :-)

[18:56:34.0000] <zewt>
basically, ios tries to prevent typos before they happen, and android lets you make a typo then tries to correct it when you hit space later

[18:57:38.0000] <zewt>
i find android's method much worse, since it means I have to make a typo, keep typing, and hope it corrects it the way I want; if ios gets it wrong, I see it immediately

[18:57:52.0000] <Hixie>
you don't have to hope, it's right there on the screen...

[18:57:56.0000] <Hixie>
just like on ios...

[18:58:04.0000] <JakeA>
https://dvcs.w3.org/hg/streams-api/raw-file/tip/Overview.htm vs https://github.com/whatwg/streams - what's going on there?

[18:58:08.0000] <JakeA>
Are these competing standards?

[18:58:21.0000] <Hixie>
zewt: anyway, this is all completely academic since swiping is the only way to type on a phone.

[18:58:37.0000] <Hixie>
JakeA: what are they?

[18:58:41.0000] <zewt>
not until I type more; if I type "hwllo", it's not necessarily going to figure out "hello" as soon as I've typed "hw" (not enough info)

[18:59:01.0000] <JakeA>
Streams APIs. Trying to work out why there's two

[18:59:29.0000] <Hixie>
zewt: if i type "hw" it immediately says "He"

[18:59:50.0000] <zewt>
ios knows that h+vowel is more likely than "hw" or "hr" or "hd", without really caring what the whole word is, so you don't get the typo in the first place

[19:00:20.0000] <zewt>
anyway, use what works for you :P

[19:00:30.0000] <Hixie>
zewt: with swiping, it's entirely academic. you draw a line vaguely near the letters, in a tenth of the time it takes to type them, and you get "Hello".

[19:33:45.0000] <zewt>
new URL("foo") apparently returns a URL object in Chrome, with no properties. :|

[19:34:08.0000] <zewt>
re: if you're not going to implement it, leave it throwing until you do

[19:51:30.0000] <MikeSmith>
JakeA: about Streams, I'd suggest talking with Domenic or annevk when they're on

[19:53:16.0000] <MikeSmith>
basically, I think Domenic wants to get discussion going about his alternative proposal

[19:54:25.0000] <MikeSmith>
which so far I don't think most people are aware of yet and haven't read

[20:00:26.0000] <JakeA>
Gotcha, cheers

[20:06:42.0000] <JakeA>
If I wasn't so hungover I'd have made a great "Don't cross the streams" joke right about now

[20:19:19.0000] <MikeSmith>
heh

[22:35:24.0000] <krit>
MikeSmith: did you get my mail?

[23:27:55.0000] <MikeSmith>
krit: checking now

[23:33:16.0000] <MikeSmith>
krit: I don't have perms to update /TR symlinks

[23:33:41.0000] <krit>
MikeSmith: ok, but the FXTF repo? :)

[23:35:31.0000] <MikeSmith>
krit: lemme make sure I understand. 1) You want http://dev.w3.org/fxtf/masking-1/ to rewrite to https://dvcs.w3.org/hg/FXTF/masking ?

[23:36:21.0000] <MikeSmith>
and 2) You want http://dev.w3.org/fxtf/masking/ to rewrite to https://dvcs.w3.org/hg/FXTF/masking-2 ?

[23:42:37.0000] <krit>
MikeSmith: Ok, what the CSS WG really does:

[23:42:58.0000] <krit>
MikeSmith: http://dev.w3.org/fxtf/masking-1/ should reference to masking-1/

[23:43:10.0000] <MikeSmith>
wait

[23:43:15.0000] <krit>
MikeSmith: and http://dev.w3.org/fxtf/masking/ to masking/

[23:43:27.0000] <MikeSmith>
I don't know what you mean by "reference"

[23:43:42.0000] <krit>
MikeSmith: I couldn’t do that, because the links were not set up properly yet, so I created masking-2

[23:43:49.0000] <MikeSmith>
OK

[23:44:00.0000] <MikeSmith>
reference = Apache rewrite?

[23:44:00.0000] <krit>
MikeSmith: point to maybe? forward?

[23:44:04.0000] <MikeSmith>
ok

[23:44:08.0000] <krit>
yes, that one :)

[23:44:13.0000] <MikeSmith>
all right

[23:44:26.0000] <MikeSmith>
I'll get this set up in a hour or so

[23:44:35.0000] <MikeSmith>
will you still be around to check it?

[23:44:41.0000] <krit>
MikeSmith: not urgent, but thanks for taking car of it

[23:44:47.0000] <MikeSmith>
ok

[23:44:48.0000] <krit>
MikeSmith: yes

[23:45:00.0000] <krit>
s/car/care/

[23:45:11.0000] <krit>
/me doesn’t have a car to offer

[23:46:17.0000] <krit>
MikeSmith: who should I ask because of TR “Apache rewrite” >

[23:46:18.0000] <krit>
?

[00:17:46.0000] <MikeSmith>
krit: probably best to ask the team contacts for the CSS WG or SVG WG

[00:18:00.0000] <MikeSmith>
Doug or Bert or Chris

[00:18:35.0000] <krit>
MikeSmith: I’ll do. thanks.

[00:18:37.0000] <MikeSmith>
but if you want to try yourself, you can e-mail webreq⊙wo

[00:18:47.0000] <krit>
k

[00:20:42.0000] <MikeSmith>
I would do it myself for you if I could but /TR symlinks are one of the few things I don't have perms for

[00:22:09.0000] <MikeSmith>
anyway I'll do the dev.w3.org/fxtf  stuff now

[00:29:01.0000] <MikeSmith>
krit: wait, everything in http://dev.w3.org/fxtf/* is already being rewritten to http://w3c-test.org/FXTF/* per something that Peter Linss asked to have set up

[00:29:59.0000] <krit>
MikeSmith: ah I see! Didn’t know that it was done this way

[00:30:06.0000] <krit>
MikeSmith: hm.

[00:30:47.0000] <MikeSmith>
krit: and everything in http://w3c-test.org/FXTF/* comes from https://dvcs.w3.org/hg/FXTF/

[00:31:18.0000] <MikeSmith>
when somebody does a push to https://dvcs.w3.org/hg/FXTF/ it automatically goes to http://w3c-test.org/FXTF

[00:31:21.0000] <krit>
MikeSmith: in this case it is already a bit weird :P So could I ask you to link  http://dev.w3.org/fxtf/masking to css-masking-1/ ?I will rename the folder

[00:31:52.0000] <MikeSmith>
css-masking-1/ where?

[00:32:33.0000] <krit>
I would do hg rename masking css-masking-1

[00:32:46.0000] <MikeSmith>
yeah

[00:33:00.0000] <krit>
MikeSmith: and http://dev.w3.org/fxtf/masking links to this folder

[00:33:07.0000] <krit>
MikeSmith: would that work?

[00:33:52.0000] <MikeSmith>
I don't knwo whether it would work because I'm still not clear what you want

[00:34:33.0000] <krit>
http://dev.w3.org/fxtf/masking -> https://dvcs.w3.org/hg/FXTF/css-masking-1

[00:34:34.0000] <MikeSmith>
and blame the weirdness on Peter Linss because he's the one that asked for this mess to be set up the way it is

[00:35:16.0000] <krit>
MikeSmith: not blaming anyone, just thought it would be different

[00:35:53.0000] <krit>
MikeSmith: well, better to not do it on Appache then

[00:36:54.0000] <krit>
MikeSmith: time will just fix it and I’ll take care of the right folder on future publications :)

[00:36:56.0000] <MikeSmith>
I can try set up the http://dev.w3.org/fxtf/masking -> https://dvcs.w3.org/hg/FXTF/css-masking-1 from an .htaccess file in the dev.w3.org repo right now

[00:37:18.0000] <krit>
MikeSmith: that would be great!

[00:38:01.0000] <krit>
MikeSmith: So can I rename the folder right now?

[00:40:07.0000] <krit>
MikeSmith: have my finger on the “return” key to publish the commit :)

[00:41:38.0000] <MikeSmith>
please rename it first

[00:42:03.0000] <MikeSmith>
you can move it back if it doesn't work as expected

[00:43:52.0000] <krit>
MikeSmith: renamed masking to css-masking-1 see http://dev.w3.org/fxtf/css-masking-1/

[00:57:47.0000] <MikeSmith>
krit: ok, http://dev.w3.org/fxtf/masking/ now goes to http://dev.w3.org/fxtf/css-masking-1/ as a expected I think

[00:58:24.0000] <MikeSmith>
which actually means it's going to http://w3c-test.org/FXTF/css-masking-1/

[00:58:39.0000] <MikeSmith>
lemme know if that's not what you meant

[00:59:14.0000] <krit>
MikeSmith: and now http://dev.w3.org/fxtf/masking/ -> http://w3c-test.org/FXTF/css-masking-1/ :)

[00:59:22.0000] <MikeSmith>
yeah

[00:59:40.0000] <krit>
MikeSmith: yes, this is what I was looking for  :)

[00:59:45.0000] <MikeSmith>
cool

[01:00:14.0000] <MikeSmith>
so you still want the second one set up, or don't need it?

[01:00:50.0000] <krit>
MikeSmith: http://w3c-test.org/FXTF/masking/ is forwarding, so everything is great now :)

[01:00:56.0000] <krit>
MikeSmith: thanks!

[01:01:03.0000] <MikeSmith>
great

[01:01:14.0000] <MikeSmith>
krit: btw you'll be at TPAC?

[01:04:09.0000] <krit>
MikeSmith: yes, I am coming.

[01:04:26.0000] <MikeSmith>
ah good

[01:04:29.0000] <MikeSmith>
will see you there

[01:04:38.0000] <MikeSmith>
oh yeah you'll be at TestTWF to

[01:04:41.0000] <MikeSmith>
*too

[01:04:59.0000] <krit>
MikeSmith: yes! Be there as well :) Will you see you there I hope

[01:05:38.0000] <krit>
/me needs to prepare the 2min talk for TestTWF at some point

[01:46:38.0000] <Ms2ger>
cabanier, can you please not implement things that aren't in a spec without even mentioning that in the bug?

[02:05:51.0000] <zcorpan>
...i don't know what to reply to https://www.w3.org/Bugs/Public/show_bug.cgi?id=23468#c1

[02:20:02.0000] <annevk-cloud>
Laugh ;)

[04:37:41.0000] <hsivonen>
is the serial API supposed to cover USB? I see vendorID and productId there

[04:38:00.0000] <hsivonen>
note the discrepancy between ID and Id...

[04:38:57.0000] <hsivonen>
will the same API work for Bluetooth, too?

[04:41:58.0000] <smaug____>
hmm, where is the latest svg spec

[05:09:26.0000] <zcorpan>
https://svgwg.org/svg2-draft/

[05:10:46.0000] <annevk>
smaug____: oddity, hah

[05:12:04.0000] <smaug____>
yeah yeah, can't fix the old APIs

[05:12:47.0000] <annevk>
it's not an oddity for such an API to not include self

[05:12:54.0000] <annevk>
point me to one library that does that

[05:14:59.0000] <smaug____>
it is odd for an API which is searching a node in a tree to exclude one node

[05:16:23.0000] <zcorpan>
smaug____: do you expect this to return the form? http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2616

[05:18:19.0000] <smaug____>
no

[05:18:41.0000] <zcorpan>
why not?

[05:19:08.0000] <smaug____>
.x is a property of form which has name x

[05:20:30.0000] <annevk>
smaug____: o_O

[05:20:47.0000] <smaug____>
:)

[05:21:05.0000] <zcorpan>
/me doesn't follow

[05:21:24.0000] <smaug____>
I don't see that .x as a tree search operation

[05:21:47.0000] <smaug____>
if one does, then the .x.x should indeed return form element

[05:22:07.0000] <zcorpan>
but it basically is a tree search operation: http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2617

[05:23:25.0000] <smaug____>
it is implemented as a search. but .x just points to some object

[05:24:59.0000] <zcorpan>
getElementById is implemented as a search but just returns some object...?

[05:25:24.0000] <annevk>
smaug____: to give a more considered reply, it does not just exclude one node, it excludes inclusive ancestors and searches descendants

[05:25:45.0000] <annevk>
smaug____: and excludes siblings and their respective trees

[05:26:34.0000] <smaug____>
it excludes the root of the search tree

[05:26:51.0000] <smaug____>
and just sounds odd to me

[05:26:59.0000] <smaug____>
feels wrong

[05:27:06.0000] <smaug____>
but I know, we can't change this stuff

[06:30:43.0000] <annevk>
bholley: how about slowly trying to move away from multiple globals that can reach each other going forward?

[06:31:07.0000] <annevk>
bholley: maybe it's better to discuss in a channel that includes bz

[06:44:32.0000] <annevk>
Whoa, CSS has case-insensitive ID matching in quirks mode?

[06:45:55.0000] <SimonSapin>
annevk: apparently yeah :/

[06:46:09.0000] <annevk>
Where is that defined?

[06:46:17.0000] <SimonSapin>
http://www.whatwg.org/specs/web-apps/current-work/multipage/selectors.html#case-sensitivity

[06:46:35.0000] <SimonSapin>
CSS leaves it to the document language to define

[06:47:17.0000] <annevk>
Selectors is so bah

[06:58:07.0000] <zewt_>
... case-insensitive id matching is lame; locale-sensitive case-insensitive matching sounds insane

[06:58:17.0000] <zewt_>
does it seriously need that, and not just case-folding?

[06:58:30.0000] <SimonSapin>
zewt: this is ASCII only insensitivity

[06:58:35.0000] <SimonSapin>
in quirks mode

[06:58:53.0000] <zewt>
well you said that it leaves it to the language to define, which sounded like locale-sensitivity

[06:59:02.0000] <annevk>
zewt: the language is HTML

[06:59:16.0000] <annevk>
(although it should really be DOM, but whatever)

[06:59:17.0000] <SimonSapin>
SVG is another document language

[06:59:42.0000] <annevk>
SimonSapin: which goes to show that if you mix SVG and HTML, Selectors has the wrong abstraction

[06:59:44.0000] <zcorpan>
SVG's ids and classes are also case-insensitive in quirks mode

[07:00:07.0000] <annevk>
but we're getting back to Selectors is so bah territory

[07:00:09.0000] <SimonSapin>
even SVG has a quirks mode?

[07:00:11.0000] <SimonSapin>
sad

[07:00:26.0000] <zcorpan>
SimonSapin: if you put svg in html...

[07:00:37.0000] <zcorpan>
XML doesn't have quirks

[07:00:40.0000] <annevk>
SimonSapin: quirks mode is tied to DOM, not some input stream...

[07:01:47.0000] <SimonSapin>
let’s put it like this: does image/svg+xml have a quirks mode?

[07:02:07.0000] <SimonSapin>
I suppose http://www.whatwg.org/specs/web-apps/current-work/multipage/selectors.html#case-sensitivity also defines SVG-in-HTML

[07:03:13.0000] <zcorpan>
http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2618

[07:03:27.0000] <zcorpan>
SimonSapin: that's XML, and XML doesn't have quirks mode

[07:03:37.0000] <SimonSapin>
ok

[07:04:07.0000] <zcorpan>
but the document above has svg as only element and is in quirks mode...

[07:06:30.0000] <zcorpan>
so, selectors shouldn't make it per-language since that doesn't reflect reality. it should just say, classes and ids are case-sensitive except in quirks mode where they're ascii-case-insensitive

[07:07:16.0000] <annevk>
Nah, it doesn't need. The mapping from the undefined abstract model to DOM is trivial.

[07:10:20.0000] <zcorpan>
TabAtkins: how should i mark up http://dev.w3.org/csswg/cssom-view/#concept-geometry-rectangle-origin in bikeshed? i want origin to be like a property of 'rectangle'

[07:57:15.0000] <zcorpan>
http://dev.w3.org/fxtf/geometry/#DOMMatrix a bit sad to use an image there

[07:57:54.0000] <zcorpan>
would be cool with LaTeX to MathML or something in bikeshed

[08:33:57.0000] <hsivonen>
annevk: regarding Halloween minutes of the TAG, what's a DRM Task Force supposed to accomplish?

[08:35:27.0000] <hsivonen>
I note that TimBL hasn't replied to my recent emails to www-tag.

[08:36:50.0000] <annevk>
hsivonen: I suspect the idea would be to explore the technical ramifications.

[08:39:01.0000] <annevk>
hsivonen: Henry suggested he does not have a solid grasp on the subject and therefore "Task Force". I'm not sure what to think about it.

[08:39:20.0000] <annevk>
I'm generall wary of all Task Forces.

[08:39:24.0000] <annevk>
generally*

[08:40:38.0000] <hsivonen>
annevk: I'm wary, too. Not sure what an exploration would output that would result in a meaningful action by the W3C.

[08:41:23.0000] <Hixie>
so, y'all realise the w3c is doing this drm thing because that's a way it can get more members and thus more money, right? :-)

[08:41:38.0000] <annevk>
hsivonen: I suspect there's a high likelyhood of a Task Force happening so they can use it to save face.

[08:41:57.0000] <Hixie>
i mean you keep discussing it like it's something they could see the merits of, but it's obvious from their discussions that they're just post-hoc rationalising

[08:42:02.0000] <annevk>
hsivonen: W3C is not very good at driving things and always tries to outsource hard decisions.

[08:42:08.0000] <hsivonen>
annevk: :-(

[08:42:28.0000] <hsivonen>
Hixie: I think it's for the Membership fee $$$s, yes

[08:42:46.0000] <annevk>
W$C

[08:43:19.0000] <annevk>
Oh W€C

[08:43:51.0000] <annevk>
Although it's mostly Hollywood dollars here I suppose, not so much euros

[08:45:12.0000] <Domenic_>
Wondering how to reply to that invite to work on streams in the W3C webapps...

[08:45:40.0000] <Domenic_>
Maybe "I plan to work on this in the WHATWG, but from what I understand the usual procedure is for the W3C to choose a point in time to fork and freeze the standard, change some example text to use different genders, and then get patent protection applied. I'm totally fine with that and willing to collaborate in whatever the W3C needs to continue that path."

[08:46:09.0000] <SimonSapin>
Domenic_: https://twitter.com/sgalineau/status/395208203358597120

[08:46:36.0000] <Domenic_>
SimonSapin: haha yes too true -_-

[08:46:41.0000] <annevk>
SimonSapin: we like Domenic_, don't scare him :p

[08:47:39.0000] <SimonSapin>
annevk: don’t worry, he’s already too far in to run away :)

[08:49:27.0000] <Hixie>
god, that tweet is so on the money

[09:22:52.0000] <TabAtkins>
zcorpan: I can't find an "origin" dfn in the draft, and your hash doesn't link to anything.  What type of definition is "rectangle"?  Just a plain "<dfn> rectangle</dfn>"?

[10:02:46.0000] <annevk>
arv: I actually like URL.prototype.searchList, but I was afraid it might be confusing if it didn't return the same kind of list classList returned

[10:10:27.0000] <annevk>
Tentative proposal to rename URL.prototype.query is now searchParams with URLSearchParams as corresponding object. https://www.w3.org/Bugs/Public/show_bug.cgi?id=23586

[10:10:32.0000] <annevk>
Speak up now, or forever...

[10:13:41.0000] <Domenic_>
annevk: +1

[10:16:35.0000] <Domenic_>
Your point about using search in both places was a good one. (Even if nobody calls it "search" in the real world :-S.)

[10:20:22.0000] <annevk>
hash rather than fragment is good too

[10:23:07.0000] <annevk>
I wonder if this is another case of Java did it first or if this was after one too many late nights at Netscape

[10:33:07.0000] <TabAtkins>
MikeSmith: I forget what combination of soft/hard redirects we use for CSSWG stuff, but there should be several of them in place now, so FXTF can use the same pattern.

[10:37:32.0000] <TabAtkins>
I wonder if MathJax uses DOM measurements to format stuff, or if I can port it to Python and do server-side rendering in Bikeshed...

[10:43:51.0000] <MikeSmith>
TabAtkins: for now I think at least I got krit's stuff set up the way he wants. All I did was add anothether Rewrite rule to the .htaccess in dev.w3.org/fxtf.

[10:43:53.0000] <SimonSapin>
annevk_: does anything implement both ParentNode and URLUtils?

[10:44:03.0000] <TabAtkins>
MikeSmith: kk

[10:44:59.0000] <annevk>
SimonSapin: arv, in his head

[10:46:58.0000] <SimonSapin>
searchParams, ew

[10:49:57.0000] <Domenic_>
SimonSapin: kind of ew, but then, queryParams sounds great! and consistency sounds good! so now searchParams sounds good suddenly.

[10:52:57.0000] <krit>
TabAtkins: Filter Effects uses a MathJax version that is stripped down even more than the minimum version from the web site

[10:53:16.0000] <krit>
TabAtkins: I use MathML directly in the spec.

[10:53:29.0000] <krit>
TabAtkins: That is more accessible.

[10:53:31.0000] <TabAtkins>
MathML directly in the spec doesn't help users with Chrome, though. :/

[10:53:58.0000] <krit>
TabAtkins: unless you use MathJax and kick the asses of Blink people in the meantime ;)

[10:54:18.0000] <krit>
TabAtkins: that is what I am saying. I stripped the lib down as much as I could

[10:54:26.0000] <TabAtkins>
My current line of attack is to try and convince them to just ship MathJax with Chrome, like we're doing with XSLT.

[10:54:48.0000] <krit>
TabAtkins: I suggested that as well to pdr.

[10:55:05.0000] <krit>
TabAtkins: looks like people still don’t like it

[10:55:34.0000] <Ms2ger>
annevk, ContainedNode? :)

[10:55:54.0000] <annevk>
Ms2ger: you've been off the naming committee since a long time now :p

[10:56:04.0000] <Ms2ger>
annevk, phew :)

[10:56:06.0000] <annevk>
but yeah

[10:58:20.0000] <SimonSapin>
Domenic_: wait, what?

[10:58:41.0000] <SimonSapin>
how does searchParams start to sound good?

[10:59:48.0000] <Domenic_>
SimonSapin: because you have search, which is like a string version of searchParams? i dunno, feels ok to me.

[11:02:50.0000] <annevk>
Hardly something to get upset over on a Friday night

[11:03:47.0000] <SimonSapin>
ah, yeah, I support search is legacy

[11:03:58.0000] <SimonSapin>
I suppose*

[11:33:17.0000] <Ms2ger>
annevk_, did you see my question about pre-insert, btw?

[11:50:37.0000] <annevk-cloud>
Ms2ger, did I not answer?

[11:51:23.0000] <annevk-cloud>
Or was it not about "node is inserted"?

[11:51:24.0000] <Ms2ger>
Did I miss your answer? :)

[11:51:32.0000] <Ms2ger>
Ah, no

[11:51:40.0000] <annevk-cloud>
Pointer?

[11:51:56.0000] <Ms2ger>
What you thought about making step 6 of pre-insert a switch

[11:54:03.0000] <annevk-cloud>
Good idea. Should do that maybe once we add ShadowRoot et al to DOM

[11:54:33.0000] <annevk-cloud>
File a bug?

[11:54:39.0000] <Ms2ger>
Will do

[14:03:39.0000] <Ms2ger>
zcorpan: turns out that Servo does, indeed, support <mod>

[14:16:50.0000] <Ms2ger>
getElementById on ParentNode? Breaks jQuery

[14:24:17.0000] <miketaylr>
yeah but nobody uses jquery

[14:52:48.0000] <Domenic_>
Ms2ger: really? wow :-S

[14:53:14.0000] <Ms2ger>
Domenic_, sure seems to break its test suite...

[14:53:22.0000] <Ms2ger>
Might be a bug in the implementation

[14:53:36.0000] <Ms2ger>
But bz implemented it, so I wouldn't count too much on that option

[14:54:52.0000] <Domenic_>
after all that debate... fun times.

[15:00:35.0000] <gsnedders>
Ms2ger: Level of surprise: not great.

[15:01:46.0000] <Ms2ger>
gsnedders, I assume you must have dealt with jquery in QA

[15:02:55.0000] <gsnedders>
Ms2ger: Once or twice.

[15:03:20.0000] <gsnedders>
Ms2ger: jQuery is nowhere near as fragile as older versions of Prototype, though

[15:03:27.0000] <gsnedders>
Or Dojo.

[15:04:31.0000] <Ms2ger>
Damning it with faint praise, eh

[15:06:08.0000] <gsnedders>
YUI is the worst, really

[15:26:41.0000] <annevk-cloud>
Wow :/

[15:27:08.0000] <annevk-cloud>
Need to drink some more now

[15:31:15.0000] <Hixie>
hm?

[15:35:22.0000] <Ms2ger>
Hixie, web compat

[15:35:51.0000] <Hixie>
oh, getElementById on ParentNode breaking jQuery,i missed that

[15:35:55.0000] <Hixie>
wow

[15:36:02.0000] <Hixie>
what specifically is it that breaks? putting it on Element?

[15:36:36.0000] <Ms2ger>
I haven't investigated

[15:38:31.0000] <Hixie>
well what made you say it broke jquery?

[15:38:51.0000] <Ms2ger>
We run jquery's unit tests, and those failed


2013-11-02
[17:07:14.0000] <Hixie>
GAH

[17:07:22.0000] <Hixie>
i CANNOT FIGURE OUT why bugzilla is refusing my token

[17:07:25.0000] <Hixie>
this makes no sense

[17:07:27.0000] <Hixie>
it used to work fine

[17:07:38.0000] <Hixie>
the data i send is basically the same as what a web browser sends

[17:07:43.0000] <Hixie>
i've walked through the code and can't work it out

[17:07:51.0000] <Hixie>
i've walked through the form and can't work it out

[17:08:06.0000] <WeirdAl>
OpenID perhaps?  I recall Bugzilla using OpenID, and I noticed OpenID not working on sourceforge

[17:08:07.0000] <Hixie>
i've dumped the data that the browser sends to my echo script and done the same with my script

[17:08:16.0000] <WeirdAl>
(not trolling, honestly trying to help)

[17:08:20.0000] <Hixie>
nope, the credentials seem to work fine

[17:08:26.0000] <Hixie>
i log in and get a cookie

[17:08:32.0000] <Hixie>
and can file bugs with the cookie fine

[17:08:46.0000] <Hixie>
it's just the csrf token on the show_bug -> process_bug path that breaks

[22:37:51.0000] <MikeSmith>
Hixie: about bugzilla I wonder if there's anything I could check from the server side

[15:00:40.0000] <Hixie>
MikeSmith: i've no idea.


2013-11-03
[18:47:32.0000] <GPHemsley>
Anyone know the status of css-content?

[19:12:05.0000] <Hixie>
GPHemsley: i was just asking about that. status seems to me orphaned.

[19:24:42.0000] <zewt>
... a=Object(); b=Object(); c=Map(); c[a] = 1; c[b] = 2 <- c[a] == c[b] == c["[object Object]"] in FF. isn't the whole damned *point* of Map that it uses objects as keys and not strings?

[20:36:45.0000] <GPHemsley>
/me wonders if TabAtkins is looking for another spec to edit

[20:47:58.0000] <GPHemsley>
oh, apparently that was also discussed recently

[20:48:25.0000] <GPHemsley>
in other news, the abbreviation for GitHub sometimes confuses me

[20:48:48.0000] <GPHemsley>
(good thing it's not GitPageHub or something)

[21:00:57.0000] <Domenic_>
zewt: map doesn't change how [] works in JS. Use map.set and map.get

[21:04:57.0000] <zewt>
that's worthless

[21:07:02.0000] <zewt>
introducing a new container class before designing a way to make that work the way every programmer is going to expect is nonsensical

[21:21:17.0000] <Domenic_>
i think it would be a much worse wtf if all of a sudden [] no longer accessed properties of an object but instead some magical data store where objects could be keys

[21:22:01.0000] <Domenic_>
map["constructor"] // wtf this is undefined because nobody set it? i just want the constructor!

[21:33:11.0000] <zewt>
doesn't seem any stranger than any other custom getter/setter; it seems exceptionally strange (and confusing) to have a native map class that doesn't work with getter syntax

[00:22:21.0000] <Domenic_>
properties are always strings; breaking that assumption would break so many programs

[01:48:26.0000] <SimonSapin>
GPHemsley, Hixie: http://dev.w3.org/csswg/css-content/ has a big red obsoletion notice

[01:49:02.0000] <SimonSapin>
… which is not on http://www.w3.org/TR/css3-content/ for bad reasons

[03:09:11.0000] <crocket>
,school

[03:09:14.0000] <crocket>
'school

[03:09:16.0000] <crocket>
`school

[03:09:22.0000] <crocket>
where was I/

[03:10:24.0000] <Ms2ger>
School, perhaps?

[03:10:36.0000] <crocket>
yes

[03:10:49.0000] <crocket>
I want to be presented with HTML/CSS learning materials.

[03:10:57.0000] <crocket>
I was given them with school command.

[03:11:08.0000] <crocket>
I don't remember which channel had that command.

[03:11:11.0000] <crocket>
,help

[03:11:13.0000] <crocket>
'help

[03:11:15.0000] <crocket>
`help

[03:11:18.0000] <crocket>
nothing

[03:11:28.0000] <Ms2ger>
Not this one, definitely

[05:56:00.0000] <GPHemsley>
SimonSapin: Meaning, it should be on the TR version, too?

[05:56:12.0000] <SimonSapin>
yes

[05:56:48.0000] <Ms2ger>
glwt

[05:56:58.0000] <SimonSapin>
AFAIU nobody has bothered to go through W3C bureaucracy to change a publish document without making a new publication

[06:23:44.0000] <zewt>
Domenic_: it would break zero programs, because we're talking about a new API

[10:54:29.0000] <GPHemsley>
is there a single list of pseduo-elements? (are there really not that many?)

[10:59:07.0000] <SimonSapin>
GPHemsley: there is four defined here: http://www.w3.org/TR/selectors/#pseudo-elements

[10:59:21.0000] <SimonSapin>
I believe they’re the only ones consistently implemented

[10:59:29.0000] <SimonSapin>
::selection was removed from the spec

[10:59:51.0000] <SimonSapin>
a bunch of proposals add more, eg. http://dev.w3.org/csswg/css-overflow/#fragment-pseudo-element

[11:00:26.0000] <SimonSapin>
and some implementations have a bunch of proprietary pseudo-elements for various things

[11:01:18.0000] <SimonSapin>
eg. https://developer.mozilla.org/en-US/docs/Web/CSS/Reference/Mozilla_Extensions#Pseudo-elements_and_pseudo-classes

[11:07:16.0000] <GPHemsley>
hmm, thanks

[15:12:38.0000] <jgraham>
zewt: Yeah, it does often seem that TC39 are big on consistency and bad on usability. It isn't obvious why you couldn't add the ability to override the meaning of [] in particular classes and use that to make map less user hostile

[15:19:57.0000] <Domenic_>
you would be unable to pass a Map into a lot of existing code that assumes existing object keys are strings.

[15:21:15.0000] <zewt>
so?

[15:22:21.0000] <zewt>
can't think of any case in any code i've ever written where that would matter more than having a map interface that isn't gross

[15:24:05.0000] <zewt>
and it trades for being able to use the class in tons of existing code that assumes object keys are the keys of the dictionary

[15:25:01.0000] <zewt>
function sum_values(dict) { var total = 0; for(var key in dict) total += dict[key]; return total; }

[15:25:22.0000] <zewt>
would work for both types, instead of having to write separate code for maps with their different interface


2013-11-04
[17:34:46.0000] <Domenic_>
annevk-cloud: why does ServiceWorker want multi-destination streams exactly? I can't quite understand it from that issue.

[17:45:33.0000] <TabAtkins>
zewt: While there *is* a tc39 proposal for overriding the behavior of [], it would still be bad to make that the default for Maps, because of how JS treats .foo and ['foo'] identically.  As Domenic_ has said, making maps use [] by default would break a *lot* of code that is currently assuming you can do obj[v] to access a property.  And without that []

[17:45:34.0000] <TabAtkins>
ability, JS has no way to access a property whose name is stored in a string.

[17:45:54.0000] <TabAtkins>
(Python has a special function just for that - getattr() and setattr(). They're clumsy to use.)

[17:46:56.0000] <zewt>
they're identically clumsy to map.get() and map.set(), and that's okay because accessing a raw property on a map (rather than a key stored in the map) is rare

[17:47:27.0000] <TabAtkins>
It's fun to claim that, but every metaprogramming function ever uses computed properties.

[17:48:03.0000] <zewt>
(i was referring to leaving .foo and ["foo"] the same, but allowing properties to have non-string values, which of course wouldn't be accessible via .foo; an alternative is detaching .foo and ["foo"], but that wasn't what I was talking about)

[17:48:49.0000] <zewt>
i've used python extensively, and getattr() is definitely the exception (but it's not really a useful comparison, since python already treats .foo and ["foo"] as two different things)

[17:48:52.0000] <TabAtkins>
And Map#get() and #set() are less clumsy, because they're used consistently.  Even Python's getattr() and setattr() are less clumsy than they would be in JS, because they're the *only* way to get computed property names.  Your suggestion would mean that *some* objects can have their properties accessed with obj[v], but not all.

[17:49:12.0000] <zewt>
they're not at all used consistently, because the dictionaries everyone already uses are simple objects that don't have .get or .set at all

[17:49:35.0000] <TabAtkins>
You're using "consistently" in a different manner than I am.

[17:49:47.0000] <TabAtkins>
You're referring to I guess consistency with existing practice.

[17:49:50.0000] <zewt>
i have endless amounts of code passing around dictionaries as objects; making Map have .get and .set instead of using [] means *none* of that code works with Map

[17:49:56.0000] <TabAtkins>
Which is terrible, and the whole reason we invented Maps.

[17:50:05.0000] <TabAtkins>
Mixing up keys and properties is super terrible.

[17:50:28.0000] <TabAtkins>
But we just grin and bear it right now, because there's no other way to get O(1) maps.

[17:50:55.0000] <zewt>
dominic's argument was that code assumes properties are strings, so allowing foo[Object] would break lots of code with that assumption; i'm saying that might be so (can't think of any real examples), but you trade for definitely not working with tons of code, which assumes key/value stores accessed with []

[17:50:58.0000] <TabAtkins>
I'm sorry that it took so long for JS to grow a Map class, but it's designed well now that it exists.

[17:52:06.0000] <zewt>
not being able to use simple objects and Map interchangeably for the "simple dictionary" pattern means I'm going to default to using objects, and only ever use Map when I really, specifically need to store non-string keys; that's a bad result

[17:53:44.0000] <TabAtkins>
Shrug, that'll definitely happen sometimes.

[17:53:52.0000] <zewt>
no, it'll happen all the time

[17:53:57.0000] <TabAtkins>
I wish {} hadn't already been claimed for object literals. :/

[17:54:28.0000] <zewt>
well, it would be nice if JS was like Python and treated .foo and ["foo"] as two different things, but that's not what we're talking about

[17:54:53.0000] <TabAtkins>
Regardless, unless we *also* overrode the behavior of .foo, you'd *still* run into the same problems you're outlining.

[17:55:10.0000] <zewt>
... but we're *talking* about overriding both ["foo"] and .foo, since they're the same thing

[17:55:14.0000] <TabAtkins>
Because people like doing obj.foo over obj['foo'] when the "foo" is a literal.

[17:55:28.0000] <TabAtkins>
No, jeez, that's so terrible.

[17:59:38.0000] <zewt>
nobody is suggesting making ["foo"] and .foo different

[17:59:39.0000] <TabAtkins>
Every Map would have a "toString" key in it automatically, or at least would *look* like it did.  +"get", "set", "delete", and others.

[17:59:39.0000] <zewt>
just make Map have no members and have an identical interface as a simple Object, and things that act on them go elsewhere (which is also consistent with what we already have, eg. Object.keys)

[17:59:39.0000] <TabAtkins>
Object.keys is a hack around the problem that we don't want more properties to show up on everything.  Maps are like normal objects, which have their behavior as methods on themselves.

[17:59:40.0000] <TabAtkins>
Having to do Map.clear(m) would be so shitty. :/

[17:59:40.0000] <zewt>
trivially, inconsequentially shitty

[17:59:40.0000] <zewt>
at the "it would be nice" level

[17:59:40.0000] <TabAtkins>
It's inconsistent with how virtually every other object in the entire language works, except for Object itself, which is an exception for obvious reasons.

[17:59:40.0000] <zewt>
Object.keys(foo) is a bit annoying (compared to foo.keys()); having object dictionaries and Map dictionaries have different interfaces is massively annoying

[17:59:40.0000] <TabAtkins>
Seriously, for every argument that it would be consistent in one way, it's less consistent in another way, seemingly worse way.

[17:59:58.0000] <zewt>
i'd say the opposite: having Map have a different API (at least among the things discussed here so far) gives minor academic prettiness, at the expense of bigger failures

[18:00:37.0000] <zewt>
anyway, the result is that Map will be a type used for special-purpose scenarios, where you specifically need to stash things with objects as keys, and never a general-purpose container ... which is something the Web can live with (we've lived with string keys this far, after all), it's just sucky

[18:01:34.0000] <TabAtkins>
I agree that it would be *nice* for Maps and Objects-as-Maps to work the same way, but to make it happen, you have to accept several of the downsides of Objects-as-Maps (which we were trying to get away from) and having to structure the operations in a weird way that doesn't match anything else.

[18:02:18.0000] <zewt>
to me it seems better to match the dictionaries everyone is using, instead of a dictionary class that matches everything *except* ... you know, dictionaries

[18:02:45.0000] <TabAtkins>
Welp, I've explained why it's not better, or at least why I and TC39 think it's not better, so shrug.

[18:03:17.0000] <zewt>
i don't know much about TC39, except that every time I see that sequence of letters, it's about something I think is badly designed, heh

[18:04:01.0000] <TabAtkins>
Don't take this the wrong way, but most of the time when I see you complaining about it, I think you're on the wrong side. ^_^

[18:04:16.0000] <zewt>
oh well

[18:07:06.0000] <Hixie>
zewt: if it makes you feel any better, most of the time when i see tab defending TC39, I think _he's_ on the wrong side, so... :-)

[18:07:32.0000] <zewt>
<TabAtkins> oh well

[18:07:58.0000] <Hixie>
then again, my preferences in languages are basically diametrically opposed to javascript's basic philosophies, so it's not particularly surprising

[18:08:04.0000] <zewt>
i wish bugzilla would post to lists in a way gmail threads properly

[18:08:36.0000] <zewt>
it's annoying eg. reading the set()/toggle() bug, searching through dom for a minute and seeing "oh, toggle does this", then loading the bug and seeing that was already commented, it just ended up as a separate thread

[18:08:57.0000] <Hixie>
don't use gmail?

[18:08:59.0000] <zewt>
i think it's the "new:" it adds to new bugs that screws up gmail

[18:09:16.0000] <zewt>
yeah "change to a different email client" is pretty much never a useful solution, heh

[18:09:22.0000] <Hixie>
oh actually yeah, that particular one breaks even in pine

[18:09:28.0000] <zewt>
don't use pine?

[18:09:30.0000] <zewt>
:P

[18:19:08.0000] <zewt>
heh, i guess that's a pattern that fundamentally disagrees with the "arguments not passed should act like they're set to undefined" idea

[18:19:16.0000] <zewt>
(classList.set("foo", false))

[18:19:51.0000] <zewt>
actually I guess not and I'm just tired

[18:20:49.0000] <zewt>
maybe I should be watching TV and zoning out instead of reading specs on Sunday night

[18:43:19.0000] <zewt>
losing hope in humanity at still having to explicitly configure screen to utf-8

[23:01:18.0000] <MikeSmith>
BOM breaks Crosswalk testing? https://github.com/w3c/web-platform-tests/pull/400

[23:04:16.0000] <MikeSmith>
Hixie: about troubleshooting the bugzilla problem if you think it might help, I can ask somebody to look at the server logs

[23:04:45.0000] <MikeSmith>
(I'd do it myself but I don't have shell access to the server)

[23:17:17.0000] <MikeSmith>
笑 serious discussion about now adding a usemap-N attribute

[23:17:20.0000] <MikeSmith>
good times

[23:59:55.0000] <zcorpan>
hmm, problem with usemap i hadn't seen mentioned before

[00:11:12.0000] <zcorpan>
Hixie: the login thing in the spec is gone?

[00:22:49.0000] <MikeSmith>
zcorpan: the usemap thing shows another reason why an attribute-based solution is suboptimal here. Along with the specific existing problem of making it work with usemap, it come with the same problem for any new attributes we might want to add to img later (attributes whose values might need to vary based on the properites of the image)

[00:25:32.0000] <zcorpan>
MikeSmith: i don't think it shows that it's suboptimal. you either want an existing feature of img to work, and you have to provide it, or you don't and don't, regardless of img vs picture

[00:25:56.0000] <MikeSmith>
of course

[00:27:04.0000] <MikeSmith>
but with picture it doesn't require anything more than adding a usemap analog to source

[00:27:29.0000] <MikeSmith>
or just usemap

[00:28:04.0000] <MikeSmith>
whereas with src-N it requires introducing further mess

[00:28:19.0000] <MikeSmith>
from an authoring point of view

[00:28:35.0000] <zcorpan>
well first we need to consider whether we need to have the usemap feature available at all together with image switching

[00:28:42.0000] <MikeSmith>
true

[00:30:52.0000] <zcorpan>
most features of img we actually want to work the same, i think

[00:31:28.0000] <MikeSmith>
yeah I would think so

[00:32:33.0000] <zcorpan>
so that argues for using <img>, but doesn't argue for attributes for the sources - it *could* do what <input list> does

[00:33:43.0000] <zcorpan>
i'm not sure that's an awesome solution either though; it requires the author to mint IDs for all images

[00:35:33.0000] <zcorpan>
or it could check the next element sibling, like <img usesourcelist alt ...><sourcelist>...

[00:36:10.0000] <MikeSmith>
still seems better than minting yet another attribute

[00:37:59.0000] <zcorpan>
what attribute?

[00:38:19.0000] <MikeSmith>
I meant yet another attribute like src-N

[00:38:41.0000] <MikeSmith>
with some complex microsyntax

[00:39:01.0000] <zcorpan>
for usemap you mean?

[00:39:04.0000] <MikeSmith>
just for the usemap case

[00:39:06.0000] <MikeSmith>
yeah

[00:39:46.0000] <zcorpan>
ok. yeah i don't disagree. but i'm not convinced we need usemap

[00:41:02.0000] <MikeSmith>
yeah, me neither

[00:41:35.0000] <MikeSmith>
but I think others are likely to say it needs to be supported for the src-N case

[00:43:18.0000] <zcorpan>
that doesn't make it a good idea to do it

[00:43:35.0000] <Ms2ger>
Like src-N? ;)

[00:44:05.0000] <zcorpan>
like anything, just people saying "this is needed" by itself doesn't mean much

[00:46:28.0000] <zcorpan>
as for usemap, if it needs anything, the first step would be to explore real cases where you'd use it and see what is actually needed. maybe what we really need is an event when there's a breakpoint switch

[01:05:41.0000] <MikeSmith>
hsivonen: when I take a document with an HTML4 doctype and feed it to validator.nu, and I manually choose an HTML5 preset, I'd expect to see an "obsolete doctype" warning. But I don't.

[01:06:00.0000] <Ms2ger>
Is it an allowed one?

[01:06:04.0000] <MikeSmith>
http://validator.nu/?doc=data%3Atext%2Fhtml%3Bcharset%3Dutf-8%2C%3C%2521DOCTYPE%2520HTML%2520PUBLIC%2520%22-%252F%252FW3C%252F%252FDTD%2520HTML%25204.01%252F%252FEN%22%2520%2520%22http%253A%252F%252Fwww.w3.org%252FTR%252Fhtml4%252Fstrict.dtd%22%3E%3Ctitle%3Etest%3C%252Ftitle%3E%3Cp%3Etest%250D%250A&schema=http%3A%2F%2Fs.validator.nu%2Fhtml5.rnc+http%3A%2F%2Fs.validator.nu%2Fhtml5%2Fassertions.sch+http%3A%2F%2Fc.validator.nu%2Fall%2F

[01:06:10.0000] <MikeSmith>
Ms2ger: yeah

[01:06:42.0000] <MikeSmith>
and from code inspection I know why it's not emitting the warning

[01:07:24.0000] <MikeSmith>
the reason is it only emits the warning if the parser mode is set to HTML5 parsing

[01:08:07.0000] <MikeSmith>
which you can do in the validator.nu UI by manually setting the Parser option to HTML5

[01:08:10.0000] <MikeSmith>
http://validator.nu/?doc=data%3Atext%2Fhtml%3Bcharset%3Dutf-8%2C%3C%2521DOCTYPE%2520HTML%2520PUBLIC%2520%22-%252F%252FW3C%252F%252FDTD%2520HTML%25204.01%252F%252FEN%22%2520%2520%22http%253A%252F%252Fwww.w3.org%252FTR%252Fhtml4%252Fstrict.dtd%22%3E%3Ctitle%3Etest%3C%252Ftitle%3E%3Cp%3Etest%250D%250A&schema=http%3A%2F%2Fs.validator.nu%2Fhtml5.rnc+http%3A%2F%2Fs.validator.nu%2Fhtml5%2Fassertions.sch+http%3A%2F%2Fc.validator.nu%2Fall%2F&parser=html5

[01:08:53.0000] <MikeSmith>
but I don't think users should be expected to do that manually

[01:12:07.0000] <MikeSmith>
I guess the best way to deal with it would be to be automatically set the parser mode to HTML5 if a user chooses an HTML5 preset

[01:14:16.0000] <JakeA>
Domenic_: annevk-cloud: Was there any discussion for an "always" method on Promises?

[01:14:30.0000] <Domenic_>
JakeA: yes, https://github.com/domenic/promises-unwrapping/issues/18

[01:14:52.0000] <Domenic_>
it may be possible to get it in now that the fate of promises themselves is less up in the air. but we'll see.

[01:15:39.0000] <JakeA>
I'm playing around with them, but find myself doing .then(func, func) a lot

[01:15:47.0000] <JakeA>
or .catch(function(){})

[01:16:39.0000] <annevk-cloud>
Domenic_, ask JakeA the streams thing

[01:17:12.0000] <JakeA>
Domenic_: Ended up with this for displaying cached data then attempting a live update https://gist.github.com/jakearchibald/481ae9e5e72d83147585

[01:17:13.0000] <Domenic_>
.then(func, func) has pretty bad semantics, not as good as finally.

[01:18:09.0000] <Domenic_>
JakeA: what was the service worker use case for piping a stream to multiple destinations?

[01:19:03.0000] <JakeA>
Domenic_: What you mentioned in your doc. Getting a network response and sending it to the browser and cache at the same time

[01:19:23.0000] <Domenic_>
JakeA: ah excellent, I guessed right! :D

[01:20:41.0000] <JakeA>
There's potential for a transformation in between too. Eg, the copy from the network could have state info that you don't want in the cache, eg "Logged in a Jake" which may not be true later

[01:21:04.0000] <JakeA>
So network stream goes to the browser, but also to a transform to strip bits out, then the cache

[01:21:48.0000] <JakeA>
That would probably be messy and regexy though, but possibly the best solution for server-constructed sites that want to hack in offline support

[01:23:06.0000] <JakeA>
Domenic_: Looking at finally… that doesn't recover from the error right? It passes the error along?

[01:23:13.0000] <JakeA>
If so, I don't think it fits my usecase

[01:23:25.0000] <Domenic_>
JakeA: right, just like sync try { } finally { }

[01:23:33.0000] <Domenic_>
yeah, I think you really want an empty catch block

[01:24:12.0000] <JakeA>
What if .catch() desugared to .catch(function(reason) { return reason })?

[01:24:19.0000] <JakeA>
That'd work

[01:24:59.0000] <Domenic_>
seems weird

[01:25:17.0000] <Domenic_>
arrow functions make it nicer .catch(r => r)

[01:27:13.0000] <zcorpan>
MikeSmith: why should it warn about the html4 doctype when validating as html5?

[01:27:14.0000] <JakeA>
showSpinner().then(fetchStuff).catch().then(hideSpinner)

[01:27:43.0000] <MikeSmith>
zcorpan: because the spec says it's an obsolete doctype

[01:27:52.0000] <JakeA>
reads well to me as in "catch errors and continue"

[01:27:58.0000] <Domenic_>
hmm yeah it kind of does

[01:28:31.0000] <MikeSmith>
zcorpan: and authors should change it to just <!doctype html>

[01:28:31.0000] <JakeA>
maybe desugaring to .catch(function() {}) would be safer, because you're sure of the value afterwards

[01:28:50.0000] <Domenic_>
agreed, seems weird to have an error for a value.

[01:28:56.0000] <zcorpan>
MikeSmith: ok i see it in the spec now. i thought it was supposed to be silently permitted

[01:29:09.0000] <JakeA>
Domenic_: Shall I make an issue for this, or has the discussion moved elsewhere?

[01:29:26.0000] <JakeA>
Or are changes to .catch() with no args set in stone now?

[01:29:28.0000] <Domenic_>
JakeA: issue is great. We'll see what people think. I gotta sleep now though :)

[01:29:41.0000] <JakeA>
G'night!

[01:29:52.0000] <MikeSmith>
zcorpan: well I'm not sure the spec explicitly states what conformance checkers should do

[01:29:59.0000] <MikeSmith>
for this case

[01:30:09.0000] <zcorpan>
http://www.whatwg.org/specs/web-apps/current-work/multipage/obsolete.html#warnings-for-obsolete-but-conforming-features

[01:30:49.0000] <MikeSmith>
ah

[01:31:05.0000] <MikeSmith>
thanks

[01:38:30.0000] <MikeSmith>
zcorpan: btw I notice that for HTML4 documents, validator.nu also emits a warning if the doctype lacks a system ID. "Warning: The doctype did not contain the system identifier prescribed by the HTML 4.01 specification."

[01:38:52.0000] <zcorpan>
MikeSmith: yeah

[01:39:27.0000] <MikeSmith>
http://validator.nu/?doc=http://qa-dev.w3.org/wmvs/HEAD/dev/tests/html401-strict.html

[01:39:46.0000] <MikeSmith>
zcorpan: does the HTML4 spec actually say the doctype should have a system ID?

[01:43:03.0000] <zcorpan>
MikeSmith: "   HTML 4.01 specifies three DTDs, so authors must include one of the following document type declarations in their documents."

[01:44:19.0000] <zcorpan>
you could choose to read it as you must use those exact strings, or must use a doctype that refers to those DTDs, or something in between

[01:45:16.0000] <zcorpan>
hsivonen read it as FPI+SI, and on a practical matter IE5 Mac uses quirks mode for HTML 4.01 strict without SI

[01:45:43.0000] <zcorpan>
but it doesn't really matter either way now

[01:46:52.0000] <MikeSmith>
ok

[01:47:34.0000] <MikeSmith>
zcorpan: it matters somewhat for me, because I want to replace the legacy W3C validator

[01:48:40.0000] <zcorpan>
MikeSmith: ok, so what's the goal there? avoid new warnings? be spec-correct? be useful?

[01:50:03.0000] <MikeSmith>
first, be useful

[01:50:31.0000] <MikeSmith>
I don't care about avoiding new warnings, as long as they are useful

[01:51:07.0000] <zcorpan>
so the usefulness here is whether the author cares about quirks mode in ie5 mac

[01:52:00.0000] <zcorpan>
which is to say that warning about it isn't useful

[01:53:11.0000] <MikeSmith>
yeah

[01:54:13.0000] <MikeSmith>
I think it's not a message that any author would find useful at this point

[01:54:19.0000] <zcorpan>
also see the 4.0 doctype

[01:54:37.0000] <MikeSmith>
what about it? you mean, no system ID?

[01:55:05.0000] <zcorpan>
v.nu treats it differently to 4.01

[01:57:08.0000] <zcorpan>
but i guess that's ok if you validate as html4 -- the html4 spec says you must use 4.01 after all

[01:57:19.0000] <MikeSmith>
right

[02:36:30.0000] <jgraham>
TabAtkins: Having Object.getProperty to do the same as the current behaviour of [], and map behave like you would expect with [] seems like a much better design than what TC39 has. Doing proper introspection in JS already requires the extremely-verbose Object.getOwnPropertyDescriptor to do well so I don't think "introspection should be favoured over API usage" is a good argument

[02:46:17.0000] <matjas>
if a parent page has <base name=foo>, is it possible to get the `name` from within an iframe in that page?

[02:47:13.0000] <Ms2ger>
window.parent.document.get...?

[02:48:03.0000] <matjas>
http://ruxcon.org.au/assets/slides/CSP-kuza55.pptx says <base name=foo> leaks cross-domain

[02:48:12.0000] <matjas>
i’m trying to understand what the author meant exactly

[02:49:20.0000] <JakeA>
Anyone feel they know their way around Promises? Would be good to get some thoughts on https://gist.github.com/jakearchibald/785f79b0dea5bfe0c448

[02:49:23.0000] <matjas>
IIUC `window.parent.document.get...` would fail if the iframe is on a different origin, right?

[02:58:47.0000] <Ms2ger>
I'd hope so

[02:59:27.0000] <matjas>
/me asks @kuza55

[03:05:27.0000] <jgraham>
What's the name attribute on base?

[03:07:06.0000] <Ms2ger>
Gives the base name, clearly

[03:32:12.0000] <annevk>
JakeA: for the XHR code you are not catching all errors...

[03:32:16.0000] <annevk>
JakeA: e.g. abort

[03:33:15.0000] <JakeA>
Good point

[03:34:39.0000] <annevk>
JakeA: why don't you do Promise.race on the cached vs live and use the first result to run updateGallery?

[03:35:31.0000] <JakeA>
annevk: It's not just first-wins. If cached comes in first, I still want to do a live update. But if live comes in first I don't want to do a cached update

[03:35:51.0000] <annevk>
Ah

[03:36:10.0000] <JakeA>
Race would work if I could do if (networkWon) { abortCachedUpdate(); }

[03:39:15.0000] <annevk>
JakeA: it seems "react to network fetch" doesn't have to be a separate line

[03:39:32.0000] <annevk>
JakeA: that could be part of liveFetch's callback

[03:39:59.0000] <annevk>
JakeA: where you set liveFetchResolved

[03:40:48.0000] <JakeA>
Ah yes, I'd only need it if liveFetch.isResolved were a thing, and updateGallery were async

[03:41:22.0000] <JakeA>
I *think* I was separating the two fetches & updates, but yeah, not needed

[03:41:32.0000] <annevk>
and the .race could be refactored by just having then and have showNoDataError hide the spinner

[03:42:07.0000] <annevk>
not sure what is better

[03:42:23.0000] <annevk>
it kinda seems you want to hide the spinner when updateGallery is invoked

[03:42:35.0000] <annevk>
so maybe the .race thing isn't really needed

[03:43:39.0000] <JakeA>
Nah, I only want to hide the spinner when the gallery is updated as a result of the network fetch, or if it fails, but yeah, it could go there

[03:44:15.0000] <JakeA>
But I still need the race to show the error if both updates fail

[03:45:58.0000] <JakeA>
I either call hideSpinner where I do now, or at the end of liveUpdate as .then(hideSpinner, hideSpinner)

[03:46:25.0000] <JakeA>
Actually, hideSpinner is in the wrong place now

[03:46:58.0000] <JakeA>
As it'll hide on cachedUpdate, which is shouldn't

[03:48:34.0000] <JakeA>
It feels like promises haven't really helped write this code

[03:48:49.0000] <annevk>
JakeA: wait, if you care about both updating failing you should not use .race but .all

[03:49:39.0000] <JakeA>
.all rejects if one fails but the other succeeds. I only want to catch both failing, which race does right?

[03:49:49.0000] <JakeA>
It's like array's .some?

[03:50:35.0000] <JakeA>
(both failing means I have no data to show, which is the only case I want to show an error)

[03:51:11.0000] <annevk>
Ah yeah, I still don't get why updateGallery needs to be wrapped in a promise though

[03:52:25.0000] <JakeA>
Yeah, it doesn't. Updated.

[03:53:46.0000] <JakeA>
annevk: I was returning the result of updateGallery (which is void) so it could be async in future, but I've removed that bit now

[03:54:41.0000] <annevk>
So yeah, you want finally

[03:55:11.0000] <annevk>
JakeA: even if updateGallery was async you could return it where you have it now

[03:55:39.0000] <JakeA>
yeah

[03:57:48.0000] <JakeA>
So, my conclusions are: "finally" is great. liveFetchResolved is nasty, getting state from the promise would be better. "race" is an unintuitive method name if you're using it to detect all-reject.

[03:57:53.0000] <jgraham>
\/window 28

[04:06:24.0000] <JakeA>
annevk: Thanks for reviewing. I thought this use case would play to Promises strengths, but it's not much cleaner & readable than it'd have been without them

[04:12:52.0000] <annevk>
JakeA: it might be that Domenic_ has some insights in how to structure that better

[04:13:59.0000] <JakeA>
annevk: Yeah, that's why I posted it here. I've gone through loads of revisions but it feels like I'm missing a trick

[04:15:02.0000] <annevk>
JakeA: what you really want I think is to cancel the cached operation if the live succeeds

[04:15:15.0000] <annevk>
JakeA: we don't have cancellation yet however

[04:16:48.0000] <JakeA>
Yeah, which I could do with the xhr directly. But I'd only want to call abort if it was in a pending state, so I'd still want to access state from the promise.

[04:16:57.0000] <JakeA>
I guess I'd get this state from xhr directly

[04:31:59.0000] <matjas>
jgraham, Ms2ger, re: <base name> according to this document, you can define an element’s (window) name using <base>: http://help.dottoro.com/lhewchgl.php

[04:32:52.0000] <matjas>
so once you can get data into <base name="…">, you can leak it cross-domain. that’s what the author meant apparently

[04:37:20.0000] <zcorpan>
matjas: test case showing <base name> doing something, pls :-)

[04:39:23.0000] <annevk>
Did he mean window.name?

[04:39:35.0000] <annevk>
And <base target=name>?

[04:39:51.0000] <annevk>
Because I think that is a long well known leak

[04:54:06.0000] <zcorpan>
so what's the attack scenario with window.name?

[05:00:40.0000] <matjas>
annevk, zcorpan: nah, <base name>

[05:00:46.0000] <matjas>
zcorpan: i’m wondering the same thing

[05:01:33.0000] <matjas>
zcorpan: ah, the window.name thing i can explain

[05:02:06.0000] <matjas>
zcorpan: a page without X-Frame-Options can be framed in a document that sets the frame name

[05:05:35.0000] <MikeSmith>
hsivonen: I have a validator patch and a related htmlparser patch I hope you can take a look at this week

[05:05:51.0000] <MikeSmith>
https://bitbucket.org/sideshowbarker/validator/commits/43e40934e7573aa44e8d8f0b6364bb4210d394d3/raw/

[05:06:10.0000] <MikeSmith>
https://bitbucket.org/sideshowbarker/htmlparser-fork/commits/0c8df2fbb5ed46837954cf1d8ae338ae740848a5/raw/

[05:07:25.0000] <zcorpan>
matjas: then navigates to _parent and it gets the name?

[05:07:36.0000] <matjas>
well, the rest is basically https://bugzilla.mozilla.org/show_bug.cgi?id=444222

[05:10:44.0000] <zcorpan>
i think the spec doesn't have that problem. http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#dom-name

[05:11:23.0000] <zcorpan>
only for top-level

[05:20:51.0000] <zcorpan>
TabAtkins: moved to http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#dom-name

[05:20:53.0000] <zcorpan>
er

[05:20:57.0000] <zcorpan>
http://dev.w3.org/fxtf/geometry/

[05:21:43.0000] <hsivonen>
MikeSmith: does the tree builder patch downgrade some errors to warnings?

[05:23:22.0000] <hsivonen>
MikeSmith: what's the goal of this change?

[05:30:35.0000] <MikeSmith>
hsivonen: the goal of the TreeBuilder patch is to nu

[05:31:29.0000] <hsivonen>
MikeSmith: parse error :-(

[05:31:57.0000] <hsivonen>
anyway, looking at the tree builder patch more closely, it indeed seems to fix a bug, so r+

[05:32:04.0000] <MikeSmith>
*not emit an sorry, typing on my mobile

[05:32:11.0000] <hsivonen>
MikeSmith: what problem does the validator patch solve?

[05:34:55.0000] <MikeSmith>
hsivonen: validator patch causes a warning to be emitted if the user has manually chosen html5 checking, but the doctype is a html5 or XHTML1 doctype

[05:35:50.0000] <MikeSmith>
currently we do not emit a warning for that case

[05:37:37.0000] <MikeSmith>
that is, the case where the user selects an html5 preset without also manually selecting the html5 parser iron

[05:37:47.0000] <MikeSmith>
*option

[05:39:54.0000] <MikeSmith>
*but the doctype is an html4 or XHTML1 doctype

[05:44:22.0000] <MikeSmith>
hsivonen: about the TreeBuilder patch, do I need to open a bugzilla.mozilla bug to have it landed, or you can just land it from that changeset, or...?

[05:45:16.0000] <hsivonen>
MikeSmith: I can land it.

[05:45:26.0000] <MikeSmith>
ok

[05:45:27.0000] <hsivonen>
MikeSmith: r+ on the validator patch, too, I guess

[05:45:49.0000] <MikeSmith>
thanks

[05:46:18.0000] <annevk>
zcorpan: ah, I guess today window.name might no longer be reachable

[05:58:20.0000] <hsivonen>
MikeSmith: does the parser patch have a bug number in *some* Bugzilla?

[06:10:43.0000] <annevk>
Hixie: https://github.com/search/advanced seems to exist

[06:11:53.0000] <hsivonen>
MikeSmith: https://hg.mozilla.org/projects/htmlparser/rev/2a1a57b4c8ff

[06:16:58.0000] <annevk>
jgraham: I recommend setting whatwg/streams to Watch

[06:17:35.0000] <jgraham>
annevk: What does that do?

[06:18:41.0000] <jgraham>
(mostly I need to fix my email filters so that not all email from github ends up in the same folder)

[06:19:58.0000] <annevk>
jgraham: only gives you notifications when mentioned

[06:20:15.0000] <annevk>
jgraham: oh, "Not watching" is what I meant

[06:20:36.0000] <annevk>
jgraham: confusingly the label says "Watch" but I guess that's what happens if I press it now

[06:20:56.0000] <jgraham>
annevk: That seems pretty useless? What I think I want is "one email per new issue, and the ability to subscribe to the issue if I am interested"

[06:22:15.0000] <jgraham>
(Which isn't possible from github afaik)

[06:22:27.0000] <jgraham>
Because (insert github rant here)

[06:43:22.0000] <Ms2ger>
(Second github rant here)

[06:48:14.0000] <annevk>
arv: so nextElementSibling on DocumentType is not in stable Chrome yet it seems

[06:49:22.0000] <arv>
annevk: It is not? Let me check. This was changed several months ago (but I only have dev channel here)

[06:49:50.0000] <Ms2ger>
http://lists.w3.org/Archives/Public/www-style/2013Nov/0016.html

[06:52:46.0000] <annevk>
Ms2ger: o_O

[06:53:48.0000] <annevk>
There's only one sensible reply there

[06:53:55.0000] <arv>
annevk: I just verified that it is in M31 (current stable)

[06:54:10.0000] <annevk>
arv: oh!

[06:54:33.0000] <Ms2ger>
annevk, and that's not to reply? :)

[06:54:55.0000] <annevk>
arv: so <!DOCTYPE html><script>w(document.firstChild.nextElementSibling)</script> in http://software.hixie.ch/utilities/js/live-dom-viewer/ yields <html>?

[06:55:46.0000] <annevk>
seems like yes

[06:55:50.0000] <MikeSmith>
hsivonen: thanks

[06:55:59.0000] <arv>
annevk: yup

[06:57:01.0000] <MikeSmith>
hsivonen: and no, I hadn't raised a bug for it anywhere, so there anyway wouldn't have been any bug number to mention in the changeset

[06:57:53.0000] <hsivonen>
MikeSmith: ok

[07:01:18.0000] <Domenic_>
JakeA: my initial question would be, assume all your functions are sync. How would you write the code then?

[07:06:59.0000] <JakeA>
Domenic_: https://gist.github.com/jakearchibald/785f79b0dea5bfe0c448#comment-943356

[07:11:14.0000] <Domenic_>
JakeA: in that case, https://gist.github.com/jakearchibald/785f79b0dea5bfe0c448#comment-943359

[07:11:54.0000] <annevk>
Domenic_: that doesn't allow racing between the cache and network though

[07:12:03.0000] <annevk>
Domenic_: which would be an advantage of having this async

[07:12:17.0000] <Domenic_>
annevk: ah, it wasn't clear that was desired, i will revisit in a bit

[07:12:54.0000] <annevk>
Domenic_: it seems you want to race between them, cancel cache if network is done, but not cancel network if cache is done

[07:13:16.0000] <annevk>
Domenic_: and then keep the spinner and content up to date while you do all that

[07:18:36.0000] <JakeA>
Domenic_: The desired process is https://gist.github.com/jakearchibald/785f79b0dea5bfe0c448#comment-943260

[07:51:59.0000] <annevk>
Does anyone have opinions on where XMLHttpRequest's restrictions on Request objects go?

[07:52:07.0000] <Domenic_>
JakeA: just to confirm, what if: 1) fetch from cache fails, but fresh fetch succeeds; and 2) cache data arrives before fresh data.

[07:52:15.0000] <annevk>
In particular XMLHttpRequest restricts methods and headers.

[07:52:33.0000] <annevk>
Domenic_: ignore cache

[07:52:35.0000] <Domenic_>
JakeA: not "and" as in "what happens if both", I meant more, those are two not-yet-specified cases by your desired process.

[07:52:59.0000] <annevk>
only if both fail do you do shownoupdate

[07:53:09.0000] <Domenic_>
and if cache arrives before fresh?

[07:53:20.0000] <JakeA>
Domenic_: If cache fails, but fresh succeeds, page is updated with fresh data & spinner stops

[07:53:21.0000] <annevk>
you first update with cache, then with fetch

[07:53:40.0000] <Domenic_>
ah, that breaks the symmetry, making it annoying. ok.

[07:54:06.0000] <JakeA>
Domenic_: If cached data arrives first, page is updated with cached data. Network fetch continues and page will be updated again if/when it succeeds

[07:54:30.0000] <annevk>
it seems somewhat common to have this code in the SW

[07:54:47.0000] <annevk>
though I don't think it should leak outside the SW as JakeA's code suggests

[07:55:30.0000] <JakeA>
Actually, I saw this code living in the page. The service worker would handle serving the data & populating the cache on a fresh update

[07:56:16.0000] <annevk>
If I had an SW I would want that to handle all the cache complexity for me

[07:56:25.0000] <annevk>
And just deal with URLs myself

[07:56:47.0000] <JakeA>
The service worker would only be able to handle the initial page serve, not the second request for fresh data & update

[07:57:19.0000] <JakeA>
eg, the page would want to do stuff like "Don't update with fresh data if old data has been interacted with", eg like writing a tweet reply

[07:57:59.0000] <annevk>
Ah yeah, fair. Although SW could ping the page but then you would indeed no longer be dealing with just a URL...

[07:58:02.0000] <annevk>
Sad.

[07:58:53.0000] <Domenic_>
if cache comes back successfully then fresh comes back successfully one second later, at which point do you hide the spinner?

[07:59:07.0000] <JakeA>
annevk: I'll get this full "gallery" example into the repo later in the month. It could be that we could make this stuff easier

[07:59:39.0000] <annevk>
Domenic_: spinner is for network I'd assume

[07:59:47.0000] <JakeA>
Domenic_: Spinner only hides once the fresh data request ends, whether it fails or succeeds

[08:00:20.0000] <Domenic_>
ah so i should think of this as a non-modal spinner.

[08:00:36.0000] <JakeA>
I guess, technically, you'd hide the spinner when both requests have completed (fail or succeed). But linking it to the network request is good enough

[08:01:18.0000] <JakeA>
If the network request fails, but the cache fetch is still happening (likely if there's zero connectivity), it might be nice to still show a spinner

[08:01:28.0000] <JakeA>
But my code at the top of the gist doesn't do that

[08:01:57.0000] <JakeA>
Surprising amount of edge cases to this

[08:02:52.0000] <annevk>
Isn't that what UI is?

[08:03:53.0000] <Domenic_>
Using .finally: https://gist.github.com/jakearchibald/785f79b0dea5bfe0c448#comment-943394

[08:06:23.0000] <JakeA>
annevk: Hah!

[08:08:33.0000] <JakeA>
Domenic_: annevk suggested Promise.all([cacheUpdate, freshUpdate]).catch(showNoDataError) too, either you're both wrong or I don't understand the API…

[08:08:57.0000] <JakeA>
I thought Promise.all(...) would reject if any of the promises rejected

[08:09:11.0000] <JakeA>
and only resolve if all of the promises resolved

[08:09:16.0000] <Domenic_>
hmm yes, i think i am wrong, why did i do that

[08:09:47.0000] <JakeA>
.race only rejects if all the promises reject, yeah?

[08:10:02.0000] <JakeA>
I'd have placed bets on me being wrong there

[08:10:07.0000] <Domenic_>
no it rejects if any of the promises reject before any of the promises fulfills

[08:10:15.0000] <Domenic_>
what we really want is .any

[08:10:51.0000] <JakeA>
Ohhhhhhh

[08:10:57.0000] <Domenic_>
the problem with speccing .any is figuring out what the aggregate error should look like if all reject

[08:11:34.0000] <JakeA>
array of responses, right?

[08:12:01.0000] <annevk>
JakeA: you need both response and fulfilled/reject state

[08:13:57.0000] <JakeA>
Yeah. I thought race resolved on first to resolve, and rejected on all-rejected. Hah

[08:14:08.0000] <JakeA>
My code in the original gist is broken then

[08:17:56.0000] <JakeA>
Domenic_: So, need something like finally. & it'd be nice to have freshUpdate.isResolved to remove the need for updatedFromFresh. Is that fair?

[08:26:38.0000] <Domenic_>
JakeA: isResolved isn't really useful, since you could be resolved to a pending promise

[08:27:41.0000] <annevk>
freshUpdate.hasThenBeenInvoked

[08:27:48.0000] <JakeA>
I guess I'm looking for isComplete

[08:27:59.0000] <Domenic_>
.race is pretty useless ... its existence stems from its counterpart being included in DOM promises, and MarkM liking it, and it having very straightforward/easy to spec semantics. If any of those were false it would probably have died along with what we are now calling .any---which is more useful, but harder to spec.

[08:28:02.0000] <JakeA>
annevk: Hah, yeah

[08:28:22.0000] <Domenic_>
sounds like you are looking for isFulfilled, but that is not determinable without possible side effects, e.g. collapsing any lazy promises

[08:29:34.0000] <Domenic_>
well, maybe i am lying, if you can do it in user space, you should be able to do it in spec space.

[08:30:08.0000] <JakeA>
Does feel like there should be a more promisey way to handle updatedFromFresh

[08:30:14.0000] <Domenic_>
no, i am not lying, the user-space solution explicitly triggers .then.

[08:30:22.0000] <Domenic_>
I dunno, seems fine to me.

[08:30:39.0000] <Domenic_>
Remembering the sync/async parallel, i.e. you would do the exact same thing for sync-ish code.

[08:30:57.0000] <annevk>
JakeA: would it be much better with callbacks?

[08:31:07.0000] <JakeA>
Fair enough, I'm probably just trying to cram everything into the model of the new thing. Like when people ask how to do setTimeout in jQuery

[08:31:07.0000] <annevk>
JakeA: alternatively, how would you ideally have done it?

[08:31:19.0000] <Domenic_>
haha

[08:32:17.0000] <JakeA>
annevk: Oh, yeah, I don't have any better solutions. And I'm not being down on promises, just felt like I wasn't doing it as well as it could be done

[08:32:57.0000] <annevk>
I'm also just wondering :)

[08:33:13.0000] <JakeA>
But yeah, it sounds like there's a finally() and a Promises.any() missing

[08:33:58.0000] <Domenic_>
.any is weird because if you reject with an array of reasons you are breaking the rule that rejections should be Errors.

[08:34:43.0000] <JakeA>
Didn't realise that was a rule, but makes sense

[08:35:05.0000] <JakeA>
I'm glad we had this chat before I finished my html5rocks article on Promises :D

[08:35:31.0000] <Domenic_>
e.g. would you write a sync function that does `func(funcs) { var errors = []; funcs.forEach(f => try { f() } catch (e) { errors.push(e); } if (errors.length) { throw errors; } }`? maybe you would, but seems a bit weird.

[08:35:37.0000] <Domenic_>
haha awesome i love html5rocks

[08:36:30.0000] <JakeA>
Domenic_: I'll send you the draft when it's done, sounds like it'll benefit from a proof read

[09:05:30.0000] <Ms2ger>
"What makes @w3c a leader in global innovation?"

[09:05:34.0000] <Ms2ger>
I'd love to hear

[09:06:26.0000] <annevk>
Too bad @w3cdrm broke

[09:08:56.0000] <dglazkov>
good morning, Whatwg!

[10:41:18.0000] <TabAtkins>
jgraham: Normal people don't need to do full-power property introspection; for most uses, just doing foo.bar or ("bar" in foo) is just fine.  So gOPD isn't a valid criticism, as it's something you use only in rare metaprogramming cases.

[10:42:05.0000] <Ms2ger>
TabAtkins, right, so why not support foo.bar?

[10:43:20.0000] <TabAtkins>
Because of everything I've already said when discussing this with zewt.  You have all Maps appearing to have a "toString" key, and have to either swallow that all Maps appear to have "get"/"set"/"clear"/etc keys as well, or push them off onto the Map object in a fashion that isn't done anywhere else (except Object).

[10:45:45.0000] <jgraham>
FWIW it is less clear to me why . and [] have to do the same thing

[10:46:14.0000] <TabAtkins>
Because JS has always done that, changing it now would be impossible, and changing it for a *single object* is just silly.

[10:47:06.0000] <jgraham>
It's only silly if you don't introduce a general mechanism for doing it

[10:47:12.0000] <TabAtkins>
And having one object act differently, and in a way that'll break lots of naive scripts, directly counters the "consistency" argument used to try and argue for using [] with Maps.

[10:47:30.0000] <TabAtkins>
Indeed, and there's a proposal for doing that (which isn't making it into ES6).

[10:47:30.0000] <jgraham>
The argument I used isn't "consistency"

[10:47:38.0000] <jgraham>
It's "usability"

[10:47:55.0000] <TabAtkins>
But it's still something that breaks naive scripts, and so you don't want to turn it on for an object by default.

[10:48:18.0000] <TabAtkins>
Yes, I had this same argument with zewt last night.

[10:48:37.0000] <jgraham>
It only breaks those scripts if people start throwing sets at them without updating them. Which is possible of course, but not obviously a deal breaker

[10:48:52.0000] <jgraham>
The same is true of lots of new features

[10:49:18.0000] <TabAtkins>
I acknowledge that [] is slightly more usable, and in line with how you access object-maps.  But we can't make Maps do that without accepting a lot of bad things, which hurt the usability as well.  So it's definitely not a clear-cut right or wrong decision.

[10:49:20.0000] <jgraham>
(for example the generic not-in-ES6 mechanism for doing this that you just alluded to)

[10:50:03.0000] <TabAtkins>
(The generic mechanism is just assigning a function to some Symbol-valued get/set properties on the object, which are then used for gets/sets using [] instead of the default behavior.)

[10:51:36.0000] <jgraham>
Right, more or less what you would expect. No reason that couldn't work for set. And if it does go in, it will be confusing in the future when user objects overload [] but built-in sets don't

[10:52:19.0000] <TabAtkins>
Of course there's no reason why it wouldn't work. I'm saying you don't want it to work that way *by default*, because doing so is inconsistent with the rest of the language and will break lots of things doing simple metaprogramming.

[10:52:47.0000] <TabAtkins>
I'm sorry there's no perfect answer. Perhaps JS messed up from the beginning by having .foo and ['foo'] do the same thing.  But we can't get away from that.

[10:53:34.0000] <jgraham>
I don't think I can blame you *personally* for that

[10:53:41.0000] <gsnedders>
BLAME HIM!

[10:53:43.0000] <gsnedders>
BURN HIM!

[10:54:07.0000] <jgraham>
Unless you go on to invent a time machine and threaten Brendan with death unless he consents to your will

[10:54:28.0000] <TabAtkins>
If I had a time machine, there's several people I would be threatening with death unless they consented to my will.

[10:54:51.0000] <jgraham>
Hmm, my estimate of the probability of that being the case just went up

[10:54:56.0000] <jgraham>
*cause

[11:10:46.0000] <Domenic_>
TabAtkins: I'm confused, is a promise for itself required (since monads don't care what's inside them) or disallowed?

[11:11:16.0000] <TabAtkins>
Domenic_: Irrelevant question. The monad contract doesn't care what inside the context. Resolve it however you want.

[11:11:53.0000] <TabAtkins>
You need to *allow* a monad to be put inside of itself, but it's fine to make that cause rejection.  You just shouldn't, for example, throw.

[11:12:01.0000] <Domenic_>
hmm

[11:12:15.0000] <TabAtkins>
Just note Mark's comments about remote promises not being able to eagerly reject.

[11:12:21.0000] <Domenic_>
right yeah

[11:12:27.0000] <Domenic_>
that'll be tricky

[12:01:53.0000] <jpwhiting>
MikeSmith: ping

[14:05:11.0000] <Hixie>
anyone got an idea of what the event we fire on <details> should be called? fired when it opens or closes

[14:05:17.0000] <Hixie>
best current suggestion is "ontoggle"

[14:06:45.0000] <Hixie>
where's a good bikeshed when you need one

[14:10:19.0000] <jgraham>
That seems like a perfectly good name

[14:10:25.0000] <GPHemsley>
/me concurs

[14:14:54.0000] <hober>
yeah, +1

[14:17:11.0000] <jgraham>
Hixie: Quick, ship an implementation before anyone disagrees

[14:17:42.0000] <miketaylr>
i dunno onopenorclosestatechange seems pretty good too

[14:17:46.0000] <miketaylr>
/me hides

[14:19:35.0000] <Hixie>
ontoggle it is

[14:19:38.0000] <nimbu>
/me kills miketaylr

[15:33:17.0000] <Hixie>
anyone have a link to that htmlwg post where the chairs said we didn't have to test everything because some things had "proven interoperability"?

[15:34:17.0000] <Hixie>
http://lists.w3.org/Archives/Public/public-html/2012Sep/0243.html looks to be it

[15:41:21.0000] <jgraham>
Hixie: FWIW I don't think anyone intends to not test everything

[15:41:42.0000] <jgraham>
It just means that they won't require testing everything for Process reasons

[15:42:01.0000] <jgraham>
But that's fine, testing for Process doesn't really work anyway

[15:43:47.0000] <jgraham>
Actually I take that back

[15:43:55.0000] <jgraham>
testing for Process really doesn't work

[15:44:43.0000] <jgraham>
It just leads to confusion like people asking if it's OK to submit tests for the interaction between different features

[15:45:08.0000] <jgraham>
Or people submitting tests carefully chosen to demonstrate interop, rather than to find bugs

[15:46:03.0000] <jgraham>
The only real good thing about having testing be part of the Process is that it encourages some people who care about Process to write tests

[15:46:23.0000] <jgraham>
However it doesn't guarantee the quality of those tests, for the reasons already stated

[15:47:09.0000] <Hixie>
yeah, it was in the context of process reasons that i was asking

[15:49:00.0000] <jgraham>
Oh, OK, if you are discussing Process then this clearly violates the intent of the Process. But also the Process shoudl change.

[15:49:09.0000] <Hixie>
or, you know, not exist

[15:49:50.0000] <Hixie>
i was discussing values of the whatwg and w3c with someone. these are what i came up with, but i'm worried they're biased -- anyone got a less subjective list?:

[15:50:00.0000] <Hixie>
   WHATWG values:

[15:50:01.0000] <Hixie>
    - technical correctness above all

[15:50:01.0000] <Hixie>
    - openness and freedom

[15:50:01.0000] <Hixie>
    - responding to all feedback

[15:50:01.0000] <Hixie>
    - meritocracy

[15:50:03.0000] <Hixie>
   W3C values:

[15:50:05.0000] <Hixie>
    - consensus above all

[15:50:08.0000] <Hixie>
    - making the AC happy

[15:50:10.0000] <Hixie>
    - following processes

[15:50:13.0000] <Hixie>
    - publishing "stable references"

[15:51:51.0000] <Hixie>
(i mean, actual values as demonstrated by actions, not claimed values. also, let me know if you see any contradictions of the whatwg values.)

[15:55:14.0000] <astearns>
Hixie: I think you missed one. WHATWG values: - making fun of W3C process

[15:55:49.0000] <Hixie>
i actually later in the discussion listed some values that neither group has, and one i had in that list was "politeness"

[15:56:06.0000] <Hixie>
which i think is much the same as what you said :-)

[15:56:21.0000] <jgraham>
I don't know if it's technically a value, but WHATWG tends to value browser vendors above other entities (discounting "authors" and "end users") whereas the W3C has a different set of constituents including media companies, large corps and whoever else will pay the membership fees

[15:56:54.0000] <Hixie>
i think that falls into "making the AC happy", but yeah, interesting way of looking at it

[15:58:14.0000] <jgraham>
Sure, if you know who the AC are and the fact that the W3C actively tries to recruit new Members irrespective of whether they have interests aligned with the Open Web

[15:58:20.0000] <astearns>
I think WHATWG valuing meritocracy might be a subjective call. I've seen opinions I value getting short shrift in discussions here

[15:59:01.0000] <Hixie>
i meant that more along the lines of you get responsibility if you do the work

[15:59:52.0000] <Hixie>
as in, the person who works on the wiki gets to decide when the wiki software is updated

[15:59:59.0000] <Hixie>
or the person who writes the spec, gets to decide what the spec says


2013-11-05
[16:00:34.0000] <astearns>
that's more agency than meritocracy, imo

[16:00:36.0000] <Hixie>
astearns: (though if you do see opinions get ignored, please do let me know privately, so i can make sure they are getting serious consideration)

[16:00:43.0000] <Hixie>
hmm, agency might be a better word, true

[16:02:23.0000] <Hixie>
(another value that i put in the "we don't have it" list is diversity, unfortunately)

[16:03:32.0000] <jgraham>
along what axis?

[16:04:53.0000] <Hixie>
almost any

[16:05:20.0000] <Hixie>
participant age, race, sex, socioeconomic background, etc.

[16:06:03.0000] <Hixie>
i haven't actually checked, but my impression is that both the w3c and the whatwg are mostly just white men.

[16:07:34.0000] <jgraham>
I guess it depends if you are comparing to society as a whole, or just the pool of people who have the right skills to be participating

[16:07:55.0000] <Hixie>
even if we just compare to the pool, we should have way more women

[16:08:13.0000] <jgraham>
That sounds quite plausible

[16:08:29.0000] <Hixie>
(and would, if we really had that was a core value)

[16:08:38.0000] <Hixie>
s/was a/as a/

[16:11:23.0000] <jgraham>
It isn't immediately clear to me what I would do to encourage more women to participate at WHATWG that could be done within the constraints of the structure

[16:11:41.0000] <Hixie>
if it was a core value, we'd change our structure accordingly

[16:12:46.0000] <jgraham>
that's easy to say, but I still don't have a concrete idea of what you would actually change. The kind of structure I had in mind was things like "no budget"

[16:13:16.0000] <jgraham>
Which isn't easy to change

[16:13:29.0000] <Hixie>
it's not easy to change while doing what we're doing, certainly

[16:13:34.0000] <Hixie>
because we're all busy

[16:13:52.0000] <Hixie>
but if i e.g. cared less about writing good specs, i could spend more time raising money instead of writing specs

[16:14:10.0000] <Hixie>
or could work with women's tech conferences

[16:14:23.0000] <Hixie>
there's stuff we could do

[16:14:40.0000] <Hixie>
it not being a core value doesn't mean we think it's not important

[16:14:53.0000] <Hixie>
we might even value diversity more in theory than the things i listed above

[16:15:09.0000] <jgraham>
Sure, so sending people to tech conferences to talk about how to get involved with standards work seems like an actual concrete thing

[16:15:10.0000] <Hixie>
but in practice, our actions say that we don't truly value it more than the things above

[16:15:43.0000] <Hixie>
(and maybe we should change that, i hadn't really gotten to that part of the thought :-) )

[16:15:49.0000] <jgraham>
But even if that happened, it would be some individual or company doing it rather than WHATWG, really

[16:15:59.0000] <Hixie>
isn't everything?

[16:16:16.0000] <jgraham>
It depends?

[16:16:18.0000] <Hixie>
i mean, "the whatwg" isn't editing the URL spec, Anne is

[16:16:32.0000] <jgraham>
Yeah, I suppose that's fair

[16:17:56.0000] <jgraham>
I guess Anne might claim that our actions demonstrate that we don't care that much about involving developers of any background, given that WHATWG/browser people rarely go to tech conferences in general

[16:18:09.0000] <Hixie>
yeah, we really should do more on that front

[16:18:21.0000] <Hixie>
i'm just so swamped with bugs and feedback i can't handle more

[16:18:29.0000] <Hixie>
which is why i haven't done anything like that

[16:18:46.0000] <Hixie>
but it does mean the feedback i have is biased towards the groups that have found us

[16:20:26.0000] <Hixie>
afk

[16:20:38.0000] <jgraham>
I think there is merit in the idea that TPAC has jumped the shark and what we should do instead is have a mixed browser developer / web developer conference aimed at discussing requirements for the immediate future of the web platform

[16:20:56.0000] <jgraham>
But that seems kind of non-trivial to organise

[16:22:32.0000] <jgraham>
/me away from wakefulness

[19:28:30.0000] <jpwhiting>
MikeSmith: around?

[20:09:09.0000] <MikeSmith>
jpwhiting: here now

[20:09:13.0000] <MikeSmith>
for a short time

[20:10:23.0000] <jpwhiting>
MikeSmith: hey there, I've been tasked with adding some html elements to our validator schema for some new html5 features

[20:10:36.0000] <jpwhiting>
a couple of which are audotracklist and videotracklist

[20:10:40.0000] <jpwhiting>
from here: http://www.w3.org/TR/2012/CR-html5-20121217/embedded-content-0.html#audiotracklist-and-videotracklist-objects

[20:11:55.0000] <jpwhiting>
I've removed/commented out stuff from the schema previously, but haven't added new elements/attributes to existing ones before, is it pretty straightforward to add these say to syntax/relaxng/media.rnc or something?

[20:16:27.0000] <MikeSmith>
yeah

[20:16:54.0000] <MikeSmith>
jpwhiting: just look at similar cases in the existing schema

[20:17:40.0000] <MikeSmith>
and look through the "hg log -p" output from previous changesets that added new elements

[21:41:23.0000] <Hixie>
jpwhiting: you really don't want to be using that old a document

[21:41:37.0000] <Hixie>
jpwhiting: http://whatwg.org/html is much more up to date

[21:41:53.0000] <Hixie>
jpwhiting: (also, audotracklist and videotracklist aren't elements)

[21:42:03.0000] <jpwhiting>
Hixie: yeah, I'm thinking these attributes aren't used in html5 tags and attributes anyway, but only in javascript functions

[21:42:04.0000] <jpwhiting>
yep

[21:42:39.0000] <Hixie>
jgraham: a joint one would involve convincing authors to go to our conference. i think we're better off going to existing conferences.

[00:59:42.0000] <jgraham>
Hixie: that depends what the goal is I think. If it's mainly an "outreach" thing then of course reusing an existing conference is rather easier. If the goal is to have all the browser people that currently only go to events like, say, TPAC or BlinkOn, as well as the kind of authors who could hold their own in a standards discussion, it isn't really clear that there is an existing conference that would work

[01:14:44.0000] <annevk-cloud>
We should make it happen

[01:17:58.0000] <darobin>
oh dear me, someone put anne in the cloud

[01:18:11.0000] <jgraham>
Yes, but just saying it works well for Captain Picard, but life is not yet like Star Trek.

[01:22:46.0000] <darobin_>
/me really likes the idea of that browser/dev conference

[01:23:13.0000] <darobin_>
conferences, however, are hard to make happen

[01:23:55.0000] <MikeSmith>
co-locate it at CCC every year

[01:24:15.0000] <MikeSmith>
call it "WC3"

[01:24:35.0000] <darobin>
lol

[01:25:56.0000] <darobin>
at ParisWeb this year I ran a Web Standards Complaints Bureau session where developers got to, well, complain about web standards (and ask questions)

[01:26:10.0000] <darobin>
I thought it went really well, I'd encourage anyone here to do the same

[01:30:24.0000] <MikeSmith>
Alex used to do a pretty good job of that single-handedly

[01:30:30.0000] <MikeSmith>
the complaining, I mean

[01:31:13.0000] <MikeSmith>
either him or Fake Alex

[01:31:23.0000] <MikeSmith>
I can't tell them apart sometimes

[01:31:50.0000] <MikeSmith>
I think back then in had misinterpreted the purpose of the Web Standards Complaints Bureau

[01:32:16.0000] <MikeSmith>
he thought the purpose was to generate the complaints, not to receive them

[01:32:49.0000] <darobin>
heh

[01:32:50.0000] <MikeSmith>
anyway I miss that

[01:33:11.0000] <MikeSmith>
he complained more back then, but always articulately

[01:34:57.0000] <MikeSmith>
zcorpan: btw I pushed the validator and parser error-reported changes we landed yesterday

[01:35:07.0000] <MikeSmith>
pushed to http://validator.w3.org/nu/

[01:35:15.0000] <MikeSmith>
*error-reporting

[01:35:30.0000] <MikeSmith>
for legacy doctypes

[01:36:15.0000] <MikeSmith>
so if/when you have time to check and you find something funky/regressed for doctype reporting, lemme know

[01:53:32.0000] <zcorpan>
MikeSmith: i wonder what it should do for e.g. <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN">

[01:59:41.0000] <MikeSmith>
zcorpan: right now I think that will generate a warning saynging that the system id is not one prescribed by the XHTML1 spec

[01:59:59.0000] <zcorpan>
yeah

[02:00:00.0000] <MikeSmith>
which isn't very useful

[02:00:09.0000] <MikeSmith>
as we discussed yesterday

[02:00:52.0000] <zcorpan>
why isn't it useful?

[02:02:42.0000] <Ms2ger>
Because it refers to the XHTML1 spec? :)

[02:04:42.0000] <zcorpan>
the above doctype isn't one that has ever been allowed, it's not well-formed xml (not that that is checked, but anyway), it's not an "obsolete but permitted doctype"... so maybe it should give an error?

[02:16:48.0000] <MikeSmith>
zcorpan: yeah, I think so

[02:17:52.0000] <MikeSmith>
the handling for that is in the parser code, so I'll need to get another patch to Henri

[02:21:33.0000] <zcorpan>
<http://www.w3.org/mid/1383638007.2478.468.camel⊙sbc>

[02:21:33.0000] <zcorpan>
select attributes? why not select entities?

[02:21:50.0000] <zcorpan>
hey, i want to select an entity declaration in the internal subset

[02:21:50.0000] <zcorpan>
or possibly external subset

[02:22:38.0000] <zcorpan>
or a comment in the declaration

[02:23:12.0000] <zcorpan>
yeah, that's it. a comment in an entity declaration in the external subset. syntax for that, anyone?

[02:27:13.0000] <Ms2ger>
@#!�DECL

[02:57:36.0000] <hsivonen>
suppose I'm not at Google and I want to find a couple of dozen most popular but encoding-unlabeled sites under a given TLD. What should I do?

[02:58:26.0000] <hsivonen>
e.g. get a list of sites under .az, remove sites that have encoding labels, sort by popularity, print the first 20 or so

[03:06:30.0000] <annevk>
zcorpan: https://bugzilla.mozilla.org/show_bug.cgi?id=850684

[03:06:44.0000] <annevk>
zcorpan: do you still use @hotmail.com for Bugzilla?

[03:06:55.0000] <zcorpan>
annevk: no

[03:07:41.0000] <zcorpan>
gmail

[03:08:53.0000] <annevk>
seems both are cc'd

[03:16:10.0000] <zcorpan>
i guess i need to test ie

[03:21:09.0000] <zcorpan>
i don't see any difference between blink and gecko for the test case in https://bugzilla.mozilla.org/show_bug.cgi?id=81290 which was stated as being the reason for the absolute positioned check

[03:26:13.0000] <jgraham>
hsivonen: "suppose" you're not at Google? :)

[03:27:18.0000] <jgraham>
It's not really clear who else has the popularity data, it's true

[03:29:55.0000] <jgraham>
You could start with the Alexa data and then manually go through all the .az sites looking for ones without encoding labels

[03:30:16.0000] <jgraham>
It isn't clear if there is enough data there to give you 20 sites or not

[03:32:54.0000] <hsivonen>
jgraham: my point about Google was that "Google can get this data" is not a sufficient answer if they don't

[03:33:35.0000] <hsivonen>
jgraham: does Alexa publish data beyond the global top sites?

[03:33:45.0000] <hsivonen>
jgraham: that is, do they have data that covers .az

[03:34:06.0000] <hsivonen>
which probably doesn't have its top sites among the global top sites

[03:34:49.0000] <jgraham>
hsivonen: they seem to have per-country data

[03:34:54.0000] <hsivonen>
hmm. I guess I could look at http://www.alexa.com/topsites/countries/AZ and pay attention only to the .az sites there

[03:35:08.0000] <jgraham>
Right, that was what I was thinking

[03:35:40.0000] <darobin>
that said, the top sites for .az are unsurprisingly similar to the global top sites :)

[03:36:10.0000] <wilhelm_>
And pretty similar to other CIS states.

[03:37:28.0000] <wilhelm_>
The .no listing seems somewhat accurate, albeit fuzzy.

[03:37:58.0000] <hsivonen>
It still amazes me that people agree to run whatever software it is that Alexa uses to collect these stats

[03:38:11.0000] <hsivonen>
what's in it for the users?

[03:39:15.0000] <wilhelm_>
A pretty toolbar!

[03:39:50.0000] <Ms2ger>
/me used it long ago

[03:40:58.0000] <wilhelm_>
I'm running a top25 .no site these days. The details Alexa has on it are fuzzy at best. (c:

[03:41:59.0000] <darobin>
well, they have to do a lot of extrapolation

[03:42:31.0000] <hsivonen>
the top sites are too clueful about using and declaring UTF-8. this makes no sense as manual research. scripts needed.

[03:43:39.0000] <annevk>
I'll just leave this here: http://lists.w3.org/Archives/Public/www-archive/2013Nov/0000.html

[03:44:09.0000] <hsivonen>
some day, we'll realize that the non-CJK parts of the world are so fed up with their fallback encodings that they just use and declare UTF-8

[03:44:39.0000] <darobin>
hsivonen: maybe you could ping AZNIC for a list of existing .az sites

[03:50:45.0000] <hsivonen>
darobin: doesn't scale :-(

[03:50:59.0000] <darobin>
hsivonen: oh, for the whole world, sure

[03:51:11.0000] <darobin>
I thought you were looking into a specifically .az problem

[03:51:54.0000] <hsivonen>
darobin: well, .az is particularly non-obvious, but it wouldn't hurt to have real data about TLDs that seem obvious

[03:51:56.0000] <darobin>
that said, a tool to get a random sample from DNS would be nice

[04:02:58.0000] <annevk>
The idea would be to move away from locale-dependent encoding fallbacks and instead have TLD-dependent encoding fallbacks.

[04:20:38.0000] <zcorpan>
hsivonen: i think foolip collected TLD-specific data for Encoding research, and maybe still has the script(s)

[04:22:02.0000] <zcorpan>
iirc it didn't use alexa top sites but used bing's search api or some such

[04:32:04.0000] <zcorpan>
hsivonen: but if you only want a handful, webdevdata might be enough

[05:02:07.0000] <hsivonen>
zcorpan: does webdevdata have good coverages of various TLDs? how is webdevdata gathered?

[05:02:41.0000] <Ms2ger>
/me read <chaals> I am as high as a kite

[05:07:17.0000] <zcorpan>
hsivonen: it seems webdevdataset is too small. i find 1 az site without charset, but it has since updated to declare utf-8

[05:07:43.0000] <zcorpan>
hsivonen: 54 az sites don't specify it in Content-Type

[05:08:54.0000] <zcorpan>
hsivonen: https://github.com/Webdevdata/fetcher/blob/master/README.md

[05:14:24.0000] <hsivonen>
http://domaintyper.com/top-websites/most-popular-websites-with-az-domain/page/1 claims to have domains sorted by popularity

[05:17:22.0000] <zcorpan>
hsivonen: you could run webdevdata fetcher on that list

[05:18:43.0000] <jgraham>
hsivonen: Alternatively maybe google with site:.az is good enough?

[05:19:16.0000] <zcorpan>
or modify the fetcher to do the relevant search while fetching if you don't want to store the raw data

[05:22:42.0000] <hsivonen>
jgraham: that seems like a reasonable way to get a list of sites, yeah. I expect Google to limit programmatic scaping of the list, though.

[05:23:19.0000] <zcorpan>
that's where bing's search api comes in

[05:24:03.0000] <zcorpan>
ask philipj@ :-)

[05:24:10.0000] <jgraham>
Right, bing might be a better choice if it allows you to download the data

[06:36:01.0000] <gsnedders>
annevk: I think the only way we're going to be able to do this well is with a lot of data, via CommonCrawl or whatever.

[06:43:11.0000] <hsivonen>
annevk: fun http://mxr.mozilla.org/mozilla-central/source/gfx/thebes/gfxFontUtils.cpp#1135

[06:44:43.0000] <annevk>
hsivonen: is that actually still relevant?

[06:44:51.0000] <annevk>
hsivonen: because that'd be sad

[06:45:03.0000] <hsivonen>
annevk: I don't know

[06:45:33.0000] <annevk>
hsivonen: :/

[06:45:44.0000] <SteveF>
zcorpan: added back links to  webdevdata

[06:46:32.0000] <zcorpan>
SteveF: thanks!

[07:06:59.0000] <annevk>
So maybe Shadow DOM is the reason why HTML and DOM have to merge?

[07:20:47.0000] <annevk>
Man, HSTS is long http://tools.ietf.org/html/rfc6797 ...

[08:37:28.0000] <SimonSapin>
hsivonen: does "mac" here mean pre-OS X ?

[08:55:24.0000] <Hixie>
jgraham: ah, yeah, good point. personally i assumed it was "just" an outreach thing, because I don't think we should be doing actual spec work in person.

[08:55:35.0000] <GPHemsley>
why are <ins> and <del> asymmetric in their allowance of palpable content?

[08:56:07.0000] <Hixie>
GPHemsley: doesn't make sense to delete nothing

[08:56:31.0000] <GPHemsley>
Hixie: Could you give an example?

[08:56:40.0000] <GPHemsley>
/me often works better with examples

[08:56:49.0000] <Hixie>
well, let me check the spec text first to make sure i'm not on crack

[08:58:52.0000] <GPHemsley>
heh

[08:58:54.0000] <GPHemsley>
that's always a good idea

[09:02:09.0000] <Hixie>
ah, it's the reverse of what i said, heh

[09:02:28.0000] <Hixie>
it's not that <del> doesn't allow palpable

[09:02:36.0000] <Hixie>
it's that <del> isn't palpable itself

[09:03:00.0000] <Hixie>
this is because <p><del>x</del></p> is the equivalent of <p></p>, not <p>x</p>, in terms of whether there's anything there

[09:03:15.0000] <Hixie>
if you delete everything from a paragraph, you should probably delete the paragraph, not the contents

[09:03:51.0000] <Hixie>
afk, meeting.

[09:10:55.0000] <GPHemsley>
ah, right; read it wrong

[09:10:56.0000] <GPHemsley>
thansk

[09:11:00.0000] <GPHemsley>
thanks, even

[09:16:20.0000] <jgraham>
Hixie: So I think there is merit in having F2F interaction (otherwise why have conferences at all; one could simply read the same information on a web page). Of course I wouldn't expect it to work like CSS or TC39 where actual decisons are made in person. But it would be an oppertunity for people with simiilar interests to get around a whiteboard and hash out ideas (this already happens of course, but tends to be confined to people in the same organ

[09:17:16.0000] <Domenic_>
I think a big benefit would be just humanizing the spec process, not even necessarily in getting any concrete work or ideas generated.

[09:17:46.0000] <jgraham>
Presumably one would make it barcamp style and have lots of parallel sessions so that the number of people at each was conducive to actual interaction rather than the kind of thing that happens at TPAC where you spend most of the time passing the microphone around a room of 50+ people, 45 of whom have nothing to say

[09:18:07.0000] <jgraham>
And of course some sessions could be "board games" or similar

[09:18:28.0000] <jgraham>
("visit the zoo" was annevk's suggestion)

[09:18:45.0000] <jgraham>
(kind of hard to get people to attend if that's *all* you do though)

[09:18:52.0000] <annevk>
I stole that idea from Hixie, mind

[09:19:12.0000] <annevk>
Pretty sure it was a CC0 idea :p

[09:19:28.0000] <jgraham>
(even orgs that value that kind of teambuilding activity might be loathe to send people to something that is p

[09:19:40.0000] <jgraham>
ure teambuilding with people from competitors)

[09:20:03.0000] <annevk>
We'll have to find out

[09:20:05.0000] <Ms2ger>
Well, you don't tell your manager about the board game sessions ;)

[09:21:17.0000] <annevk>
Best part of MozSummit was hanging in the lounge discussing some ES6 stuff

[09:21:45.0000] <Domenic_>
Yeah hallway track ++

[09:21:51.0000] <jgraham>
It seems like an easier sell all round if there is explict technical content, rather than just people chatting

[09:22:02.0000] <Domenic_>
(also true)

[09:22:09.0000] <jgraham>
annevk: Sure, but the format was explicitly desinged to make that possible

[09:22:10.0000] <darobin_>
"humanising the spec process", what next? http://en.wikipedia.org/wiki/Socialism_with_a_human_face ?

[09:22:28.0000] <annevk>
jgraham: my pitch is 1 day technical and 1 day social

[09:22:46.0000] <Domenic_>
I think there'd need to be some introduction though before all this socializing. E.g. most people don't even know the names of spec people or what they are interested in talking about.

[09:22:58.0000] <Ms2ger>
darobin_, hmm, I like spring

[09:23:03.0000] <Domenic_>
annevk: JSConf US this year was 1 day technical, 1 day structured activities, 1 day technical.

[09:23:10.0000] <darobin_>
Domenic_: well, the TestTWF format isn't so bad for that

[09:23:10.0000] <Ms2ger>
darobin_, dunno about Prague, though

[09:23:30.0000] <darobin_>
there's a very short set of intro sessions to make sure everyone knows the basics

[09:23:38.0000] <darobin_>
then it's all hacking

[09:23:45.0000] <jgraham>
annevk: I think I prefer the 1:1:1 approach Domenic_ described

[09:24:51.0000] <annevk>
Seems fine, host it at Google or Microsoft in the Bay Area...

[09:25:38.0000] <Ms2ger>
As long as you don't want peterv to attend ;)

[09:25:40.0000] <annevk>
Fly some people in, have some fun, get an idea of what needs to be done to improve things after

[09:25:59.0000] <annevk>
Ms2ger: :/

[09:26:44.0000] <jgraham>
(Mozilla SFO isn't big enough? I only ask because if you are serious about this it might be one way to make things easier)

[09:26:44.0000] <jgraham>
Ms2ger: At least he didn't say "China"

[09:26:51.0000] <Ms2ger>
Aaaaah

[09:27:24.0000] <annevk>
jgraham: dunno, if we get 200 people and want to do break outs that's not going to work

[09:27:46.0000] <annevk>
(basing the number on EdgeConf)

[09:27:48.0000] <jgraham>
Right, it depends if you want 50 people or 200 people

[09:28:35.0000] <jgraham>
(50 isn't that many, but it could be worthwhile to do something smaller to begin with and scale up if the idea basically works)

[09:29:24.0000] <Ms2ger>
Do it in the London office, break out to the Google office

[09:29:54.0000] <jgraham>
"your breakout session is one tube ride away"

[09:29:57.0000] <annevk>
With 50 it seems hard to get the right people in without excluding people

[09:31:30.0000] <jgraham>
Could be true

[09:34:23.0000] <jgraham>
/me fails to find anything about the capacity of Mozilla SFO

[09:37:42.0000] <annevk>
Btw, as for GitHub, whatwg/streams seems to suggest we get better feedback via GH than public-webapps got, at least for streams

[09:39:16.0000] <jgraham>
It does seem to be getting attention, which is good. It's not clear to me whose attention it is getting

[09:39:34.0000] <jgraham>
e.g. are any browser developers involved?

[09:41:24.0000] <annevk>
jgraham: they mostly seem to give feedback when implementing, no?

[09:41:52.0000] <jgraham>
annevk: To a certain extent, I guess

[09:42:29.0000] <jgraham>
People like Sicking often give feedback before then though

[09:43:10.0000] <annevk>
He's still implementing XBL I guess :p

[09:43:21.0000] <jgraham>
And always will be?

[09:58:49.0000] <Ms2ger>
jgraham, hmm, I thought we preferred .asis if possible

[09:58:54.0000] <Ms2ger>
/me doesn't care much either way

[10:02:22.0000] <jgraham>
Ms2ger: I guess asis is actually more complicated since you need to pay close attention to every byte

[10:02:39.0000] <jgraham>
I'm not sure that we have enough experience to make a general rule yet though

[10:02:48.0000] <Ms2ger>
Let's keep it, then

[10:02:58.0000] <jgraham>
OK

[10:13:36.0000] <GPHemsley>
Hixie: The "sorted" attribute is not in the attributes list

[10:14:43.0000] <annevk>
Yeah, .asis is nasty.

[10:15:27.0000] <Ms2ger>
How did we end up discussing Google's domains on public-webapps?

[10:18:36.0000] <Domenic_>
^ yes that

[10:19:58.0000] <jorendorff>
Domenic_: hi. new Promise(function (resolve, reject) {...}) is the new hotness, right? no resolver object for months now, looks like?

[10:20:53.0000] <Hixie>
GPHemsley: thanks, i'll file a bug

[10:21:28.0000] <dglazkov>
good morning, Whatwg!

[10:21:35.0000] <Domenic_>
jorendorff: yup!

[10:22:35.0000] <Hixie>
jgraham: certainly i'm all for discussions around ideas, etc. i'm just worried that we not give people the impression that discussing something means it's going in the specs

[10:23:54.0000] <jgraham>
Hixie: That seems like an unreasonable expectation to have for pretty much anyone who has been in a technical discussion, ever, but it could be explicitly spelled out if you think there is the chance of confusion

[10:24:10.0000] <Domenic_>
Hixie: I have found that managing that expectation is best done by saying "here are the things I am interested in spending time on, if you have an esoteric use case you need to find another champion or champion it yourself."

[10:24:11.0000] <Hixie>
i just don't want a repetition of <picture>

[10:25:05.0000] <jgraham>
Yeah, I guess that is a failure mode that we should avoid in the future

[10:26:40.0000] <jgraham>
But it does seem like you can deal with that by making it clear to everyone what the actual decison making process is

[10:26:40.0000] <jgraham>
and if you get the right audience many people will know anyway

[10:27:45.0000] <Domenic_>
I feel like if people read the WHATWG FAQ everything would be better. It's really good.

[10:27:53.0000] <Domenic_>
E.g. emphasizing how important it is to get vendors on board.

[10:48:35.0000] <annevk>
http://blogs.adobe.com/standards/2013/10/24/forking-standards-and-document-licensing/

[10:48:45.0000] <annevk>
"Of course this wouldn’t legally prevent individuals and groups from making forks, but hopefully would discourage harmful misuse, while still encouraging innovation."

[10:49:52.0000] <annevk>
Maybe we should include a helpful notice to advice against copying our work. "W3C please do not copy-and-paste from this specification. The generated confusion over the next decade (or so) is way worse than any potential upside."

[10:51:44.0000] <Jasper>
I don't even know what the W3C do anymore.

[10:57:11.0000] <GPHemsley>
Hixie: Why does the tbody section come before the thead section?

[10:57:20.0000] <Hixie>
cos b comes before h?

[10:57:30.0000] <Hixie>
(just guessing)

[11:04:46.0000] <Domenic_>
wow this w3c streams API is getting uglier by the minute. i am feeling very un-threatened.

[11:05:53.0000] <annevk>
at least you are actually competing :p

[11:52:47.0000] <jamesr__>
Domenic_: un-threatened by chaals/et al or by Takeshi?

[11:53:04.0000] <jamesr__>
i'm trying to read the technical threads and ignore the non-technical ones, but it's tricky

[12:11:58.0000] <Domenic_>
jamesr__: the latter. not sure what to make of the former.

[13:25:42.0000] <Domenic_>
SimonSapin: nice :D

[14:11:42.0000] <SimonSapin>
Domenic_: sorry, I lost context

[14:18:00.0000] <Domenic_>
SimonSapin: the railroad diagrams link

[14:20:52.0000] <SimonSapin>
ah, yes

[14:21:00.0000] <SimonSapin>
thank TabAtkins for that :)

[14:21:42.0000] <Domenic_>
well, fair point :). TabAtkins: thanks for the railroad diagrams thingy; it's going to make whatwg/streams awesome.

[14:22:13.0000] <TabAtkins>
Domenic_: No problem! I aim to please. Feel free to file bugs or requests on the Bikeshed repo.

[14:22:36.0000] <TabAtkins>
Or wait, you're maybe using it standalone.  Well, whatever.

[14:22:54.0000] <TabAtkins>
If you want to use railroad diagrams inline in your spec, feel free to switch to using Bikeshed for your processing needs. ^_^

[14:23:04.0000] <SimonSapin>
haha

[14:23:33.0000] <Domenic_>
markdown for now, we'll see what happens later.

[14:24:13.0000] <TabAtkins>
Hey, Bikeshed lets you do Markdown paragraphs, at least.

[14:24:40.0000] <TabAtkins>
Plus: autolinking! You don't realize how much you need it until you start using it.

[14:24:59.0000] <TabAtkins>
Even just writing documentation in Markdown makes me miss having things autolinked. :/

[15:11:58.0000] <jorendorff>
Domenic_: is CastToPromise(%Promise%, x) observably different from Promise.resolve(x), apart from object identity?

[15:17:07.0000] <Domenic_>
jorendorff: nope, except I guess potential memory usage.

[15:17:13.0000] <jorendorff>
great.

[15:17:53.0000] <Domenic_>
jorendorff: also of course people can override Promise.resolve, yadda yadda.

[15:18:01.0000] <jorendorff>
sure, yep yep

[15:20:40.0000] <jorendorff>
i should just use your testable-implementation.js and call Promise.cast already

[15:21:11.0000] <Domenic_>
jorendorff: yeah, although I haven't tested it in SpiderMonkey, pull requests welcome if I rely on some V8-ism.

[15:21:38.0000] <jorendorff>
i'll try it out

[15:22:08.0000] <Domenic_>
if we wanted to get really serious we should be creating a shared version of this: https://github.com/domenic/promises-unwrapping/blob/master/testable-implementation.js#L448-L496

[15:30:40.0000] <jorendorff>
Domenic_: IsConstructor is implementable in JS, with direct proxies, but it's not pretty

[15:31:26.0000] <jorendorff>
david bruant showed me a disgusting trick

[15:31:34.0000] <jorendorff>
but i guess SpiderMonkey's direct proxies have a bug that make it equivalent to typeof x === "function", so no point


2013-11-06
[16:24:39.0000] <jorendorff>
Domenic_ (or anyone): assuming IsPromise(p) and p.then is the builtin Promise.prototype.then, does p.then(v => { throw "FAIL"; }, exc => { alert(exc); })

[16:24:49.0000] <jorendorff>
alert "FAIL" when p becomes fulfilled?

[16:25:24.0000] <jorendorff>
/me would expect not, rather the derived promise would become rejected and the error handler would not be called

[19:10:44.0000] <Domenic_>
jorendorff: yeah your expectation is correct.

[19:10:55.0000] <jorendorff>
thanks

[19:11:05.0000] <Domenic_>
to get the alert "FAIL" do p.then(v => { throw "FAIL"; }).catch(exc => { alert(exc); })

[19:11:13.0000] <jorendorff>
ooh pretty

[19:11:51.0000] <jorendorff>
obviously i have not sat down and just read the spec. in my defense it is written in a strange language

[19:11:54.0000] <jorendorff>
ecmaspeak

[19:12:10.0000] <jorendorff>
no fault of yours, obviously

[19:20:57.0000] <Domenic_>
understandable :P

[23:27:25.0000] <philipj>
hsivonen, jgraham, I used the Bing API in https://gitorious.org/whatwg/big5/source/4a591808c055107d5a4a84d6c480db8b800ba40a:gen-urls.py

[23:27:50.0000] <philipj>
but I don't know if it still works the same, I remember that there were going to be some changes soon after I used it

[23:44:59.0000] <hsivonen>
philipj: thanks

[02:10:47.0000] <annevk>
I just found out stuff like https://bugzilla.mozilla.org/user_profile?login=annevk%40annevk.nl exists. Seems I've been contributing to Mozilla for over a decade.

[02:21:59.0000] <annevk>
SimonSapin: in css3-syntax you might want to acknowledge hsivonen and zcorpan for sorting out the decoding rules with me during TPAC

[02:28:15.0000] <MikeSmith>
annevk: nice bugzilla feature. I wonder if there's some parameter for enabling that

[02:30:11.0000] <MikeSmith>
seems relatively new https://bugzilla.mozilla.org/show_bug.cgi?id=859550

[02:31:16.0000] <annevk>
SimonSapin: you don't seem to define identifier?

[02:36:09.0000] <matjas>
zcorpan: here’s an example of an attack vector that uses `window.name`: http://homakov.blogspot.be/2013/11/stealing-user-session-with-open.html

[02:37:46.0000] <annevk>
matjas: is the attack supported by the specification for window.name?

[02:38:40.0000] <matjas>
i think so. it just makes use of the fact that `var otherWindow = window.open(url, someName)` sets `otherWindow.name` to `someName`

[02:39:23.0000] <matjas>
the thing is, `window.name` by itself isn’t the problem, it just makes it easier to write attack vectors like this

[02:39:38.0000] <matjas>
(you still need another vulnerability somewhere)

[02:40:26.0000] <matjas>
this probably cannot be “fixed” without breaking compat… badly

[02:45:19.0000] <annevk>
I don't really follow that attack

[02:58:38.0000] <annevk>
hsivonen: what caused the UTF-16 tweet?

[03:03:03.0000] <annevk>
By the way, rwaldron pointed out yesterday that dataset is woefully undertested.

[03:03:26.0000] <annevk>
Example <div data-foo2="x" data-foo-2="y">

[03:08:38.0000] <MikeSmith>
annevk: is the spec actually clear about that should happen in that case?

[03:09:41.0000] <annevk>
MikeSmith: the fact that some people refuse to define attribute order makes it trickier, but the results in browsers are too weird for that to even become an issue

[03:11:05.0000] <MikeSmith>
ok

[03:26:10.0000] <hsivonen>
annevk: nsJSON.cpp

[03:46:29.0000] <SimonSapin>
annevk: done, and on it

[04:01:08.0000] <zcorpan>
annevk: MikeSmith: i think the spec is clear about that case (except for the order but that's the same for data-x and data-y also)

[04:01:32.0000] <zcorpan>
but it seems blink has a bug

[04:07:47.0000] <jgraham>
It does look like the tests could be improved

[04:09:08.0000] <jgraham>
rwaldron should submit a PR

[04:24:26.0000] <SimonSapin>
annevk: looks good? http://dev.w3.org/csswg/css-syntax/#identifier

[04:33:52.0000] <MikeSmith>
zcorpan: what's the expected result per spec?

[04:36:53.0000] <zcorpan>
MikeSmith: 'foo2' and 'foo-2'

[04:39:53.0000] <MikeSmith>
I see

[04:40:00.0000] <MikeSmith>
/me goes to read the spec

[04:45:42.0000] <MikeSmith>
zcorpan: I guess I'm missing something

[04:46:33.0000] <MikeSmith>
reading through "The algorithm for getting the list of name-value pairs" and "The algorithm for setting names to certain values", I don't seem to see anything that deals with this

[04:47:21.0000] <MikeSmith>
*with this case

[04:47:40.0000] <zcorpan>
MikeSmith: if you step through the algorithm with an element with those attributes, the 'getting' algorithm results in that

[04:48:16.0000] <zcorpan>
MikeSmith: in step (2) you take the attribute list, strip off 'data-', so you have ['foo2', 'foo-2']

[04:48:50.0000] <zcorpan>
MikeSmith: step (3) talks about modifying - followed by ascii *letter*, which doesn't apply here, so it's no-op

[04:49:29.0000] <MikeSmith>
ah

[04:59:11.0000] <hsivonen>
sometimes testing would be easier if I was literate in a non-windows-1252 language

[05:01:57.0000] <zcorpan>
hsivonen: like klingon?

[05:02:30.0000] <hsivonen>
zcorpan: I was thinking of something like Polish

[05:02:38.0000] <jgraham>
That would be a non-unicode language

[05:02:50.0000] <jgraham>
(er Klingon, not Polish)

[05:05:18.0000] <annevk>
SimonSapin: seems okay

[05:06:21.0000] <annevk>
SimonSapin: not entirely clear to me if it's a syntax thing or a model thing

[05:06:32.0000] <annevk>
SimonSapin: but maybe more detailed reading would reveal that

[05:06:36.0000] <SimonSapin>
syntax

[05:06:46.0000] <SimonSapin>
the model has <ident-token>

[05:11:53.0000] <zcorpan>
jgraham: but still a non-windows-1252 language

[05:13:32.0000] <annevk>
The problem here is that windows-1252 itself is not a language.

[05:13:46.0000] <annevk>
And also that you are all pedants.

[05:17:21.0000] <annevk>
zcorpan: so the problem is that WebKit/Blink developers did not read the spec (quelle surprise!)

[05:17:30.0000] <annevk>
zcorpan: test .<script data-x-2=x data-x2=y>w(document.querySelector("script").dataset)</script> in LDV

[05:18:06.0000] <annevk>
rwaldron: ^^

[05:18:40.0000] <zcorpan>
LDV?

[05:20:33.0000] <zcorpan>
annevk: it's not a problem that windows-1252 is not a language. you can say "funny language" or "non-funny language" without "funny" itself being a language

[05:20:38.0000] <annevk>
zcorpan: Live DOM Viewer

[05:20:56.0000] <zcorpan>
ah. yeah i noticed. did someone file a bug already?

[05:21:12.0000] <annevk>
don't think so

[05:21:31.0000] <zcorpan>
i can file it

[05:23:00.0000] <zcorpan>
found https://code.google.com/p/chromium/issues/detail?id=171175

[05:25:17.0000] <zcorpan>
seems like safari 6 is a bit different, data-2 works ok

[05:26:37.0000] <gsnedders>
jgraham: You wouldn't happen to remember if I borrowed The Bell Jar off you years ago? I definitely read it while in Sweden, but I can't remember whether I bought it or not. Seems a waste to go back to my parent's for it if it isn't there :P

[05:27:32.0000] <jgraham>
gsnedders: I know I own the Bell Jar at least

[05:27:36.0000] <jgraham>
So you might have done

[05:30:33.0000] <gsnedders>
Oh, one can get it on Google Play for under £2. That's surprisingly reasonable.

[05:36:32.0000] <zcorpan>
filed https://bugs.webkit.org/show_bug.cgi?id=123890

[05:37:46.0000] <zcorpan>
jgraham: when are you arriving in shenzhen?

[05:38:14.0000] <jgraham>
zcorpan: 14:10 on Fri.

[05:38:22.0000] <jgraham>
Or that's HKG

[05:38:44.0000] <jgraham>
So I guess more like 18:00 by the time we actually arrive

[05:39:24.0000] <zcorpan>
08 Nov 14:40 is when i arrive

[05:39:46.0000] <jgraham>
At Shenzen of at HKG?

[05:41:07.0000] <zcorpan>
shenzen

[05:41:28.0000] <zcorpan>
i actually go via beijing

[05:41:36.0000] <jgraham>
Oh, OK

[05:42:06.0000] <jgraham>
Flights to HKG were direct, but I'm not sure it's worth it given the bus time

[05:42:19.0000] <annevk>
Bus time?

[05:42:31.0000] <jgraham>
annevk: The bus takes 2.5 hours

[05:42:41.0000] <annevk>
Ffffuu

[05:42:42.0000] <jgraham>
From HKG to Shenzhen

[05:43:03.0000] <annevk>
Well that's going to be pleasant

[05:43:11.0000] <gsnedders>
When I vaguely looked it seemed that Shenzhen airport was almost as distant?

[05:43:50.0000] <gsnedders>
But idk, I can't claim to have looked that close.

[05:44:19.0000] <jgraham>
gsnedders: Google says 53 minutes

[05:45:48.0000] <jgraham>
(whereas for HKG, it says "could not calculate directions")

[05:46:13.0000] <zcorpan>
i was planning on taking a taxi from the airport

[05:47:19.0000] <gsnedders>
I was planning to wait till next year. Hopefully find out /where/ even if not exactly when during TPAC this year.

[05:48:04.0000] <jgraham>
And I can't make bing maps work at all

[05:48:26.0000] <gsnedders>
Now it's broken the normal France/US rotation it's anybody's guess where it'll be.

[05:48:57.0000] <jgraham>
gsnedders: I thought someone said the US

[05:49:30.0000] <gsnedders>
karlcow: Use-case: to determine whether a request is for a script, image, etc. based on UA/Accept combination, to do content-type sniffing in a proxy identically to the end browser.

[05:49:59.0000] <gsnedders>
jgraham: Well, I'll probably go.

[05:50:13.0000] <karlcow>
gsnedders: https://etherpad.mozilla.org/uadetection-usecases

[05:50:49.0000] <gsnedders>
karlcow: Do you just want people to arbitrarily add to that?

[05:50:55.0000] <karlcow>
yes

[05:50:59.0000] <gsnedders>
karlcow: I was assuming you were doing some sort of moderation :)

[05:51:03.0000] <karlcow>
not at all.

[05:51:14.0000] <karlcow>
all of this has been contributed by everyone

[05:51:27.0000] <karlcow>
I will try to trim down/summarize at the end of this week

[05:52:02.0000] <karlcow>
I didn't do moderation so that people express what they think it is useful for.

[05:52:27.0000] <gsnedders>
karlcow: okay, added

[05:52:57.0000] <karlcow>
And then we can see and think if they are things which might be improved in the platform. So far it looks a bit depressing for evolving the platform. ;)

[05:53:30.0000] <karlcow>
Blame Jonas for giving me the idea of asking for use cases

[05:53:43.0000] <gsnedders>
Always the Swedes causing the problems!

[05:54:29.0000] <karlcow>
gsnedders: Thanks for adding another item

[05:54:52.0000] <gsnedders>
No problem.

[06:08:25.0000] <annevk>
SimonSapin: "This is currently U+10FFFF" seems somewhat misleading

[06:08:42.0000] <annevk>
SimonSapin: given utf-16 I don't think that'll be going anywhere

[06:25:20.0000] <GPHemsley>
annevk: Might you want to use the phrase "willful violation" here? http://encoding.spec.whatwg.org/#concept-encoding-get

[06:26:14.0000] <annevk>
I just use violation for that

[06:28:57.0000] <GPHemsley>
IMO: "violation" makes you sound naughty; "willful violation" makes you sound knowledgeable

[06:31:09.0000] <annevk>
feel free to file a bug if it bothers you

[06:31:33.0000] <annevk>
I think the plan is for Unicode to be fixed eventually so either way this should disappear

[06:31:55.0000] <GPHemsley>
alright; I suppose this is just further discussion for the future style guide :)

[06:32:26.0000] <GPHemsley>
/me wonders why he hasn't already created a wiki page for that

[06:32:35.0000] <annevk>
do it!

[07:01:57.0000] <GPHemsley>
PSA: I have begun grouping meta spec documents as subpages under http://wiki.whatwg.org/wiki/Specs

[07:02:22.0000] <GPHemsley>
(Your favorite documents may have been moved; there are redirects in place to get you to their new location.)

[07:02:50.0000] <GPHemsley>
I have also begun the style guide here: http://wiki.whatwg.org/wiki/Specs/style

[07:02:57.0000] <GPHemsley>
annevk: CC ^

[07:06:14.0000] <Domenic_>
nice, very helpful.

[07:12:05.0000] <GPHemsley>
We can move the subpages to more verbose names, if that's more helpful, but the existence of "Specs" as opposed to "Specifications" suggests we like short names

[07:12:23.0000] <hsivonen>
the situation with the UTF-16, UTF-16BE and UTF-16LE labels between Gecko, Unicode and the Encoding Standard is annoying

[07:14:20.0000] <hsivonen>
current status: http://w3cmemes.tumblr.com/post/34093102149/kirk-is-not-fond-of-the-ascii-incompatible

[07:18:02.0000] <SimonSapin>
GPHemsley: Specs/style is about CSS, right? ;)

[07:18:14.0000] <GPHemsley>
ah, hmm

[07:20:50.0000] <darobin>
SimonSapin: it also covers XSL-FO

[07:21:07.0000] <GPHemsley>
>_>

[07:21:12.0000] <SimonSapin>
darobin: of course

[07:21:37.0000] <GPHemsley>
SimonSapin: I'll have to think on it more; I'll probably add more hierarchy, too, so I don't want go moving everything around until I've figured that out first.

[07:21:49.0000] <GPHemsley>
moving everything around again, that is

[07:21:50.0000] <darobin>
GPHemsley: more like <_/>

[07:23:13.0000] <GPHemsley>
yup

[07:23:44.0000] <SimonSapin>
GPHemsley: I was joking, but if you want to change it Specs/Style_guide would work

[07:24:01.0000] <GPHemsley>
SimonSapin: In my defense, it will probably eventually contain tips on what classes and styles to use ;)

[07:24:25.0000] <GPHemsley>
Yeah, I'll have to ponder

[07:33:21.0000] <SimonSapin>
annevk: I agree. Fixed.

[07:34:42.0000] <SimonSapin>
TabAtkins: http://www.xanthir.com/b4Su0 "on an iPhone with a 320px viewport…" is that device or CSS px?

[07:56:25.0000] <darobin>
annevk: btw, in case you're interested, https://github.com/darobin/redirect-testing

[07:56:59.0000] <darobin>
it's just a rehash of an old hack I had used a long time ago when I was trying to debug a problem with a project that involved redirects on DELETE

[08:08:13.0000] <GPHemsley>
Hixie: Thoughts? :) http://wiki.whatwg.org/wiki/Specs/style#Spelling

[08:22:18.0000] <Ms2ger>
GPHemsley, specs should be in en-GB-x-hixie, obviously ;)

[08:22:51.0000] <GPHemsley>
Ms2ger: I'm hoping we can merge en-GB-x-hixie and en-US-x-ghemsley into a single standard.

[08:24:08.0000] <jgraham>
That seems as pointless as specifying that things must be en-gb or en-us. As long as it is clear what is meant, it really doesn't matter what precise spelling you use

[08:27:13.0000] <Ms2ger>
<font colour>, please

[08:29:11.0000] <darobin>
jgraham: it does matter for technical terms; for the rest I agree (though consistency within a given document is a plus)

[08:30:45.0000] <jgraham>
Ms2ger: <fount colour> :p

[08:31:47.0000] <jgraham>
True story: we had a first year university computer skills course where you lost marks for not spelling "font" "fount"

[08:32:34.0000] <jgraham>
darobin: I don't know what you mean by "technical terms" in this context

[08:32:58.0000] <jgraham>
If you mean that APIs should aim to be consistent, that makes sense

[08:34:01.0000] <Domenic_>
The "dialog" vs. "dialogue" seems just wrong... dialogue is for speech, dialog is for computers. In my understanding.

[08:34:27.0000] <Domenic_>
"Open a dialog" means "pop up a dialog box"; "open a dialogue" means "start negotations"

[08:34:59.0000] <jgraham>
Yes, but I use it like that in all contexts, not just in specs

[08:35:34.0000] <jgraham>
("dialog" is the computer thing, "dialouge" is talking)

[08:35:58.0000] <Domenic_>
Right but "Use "dialogue" for the noun and "dialog" for all other parts of speech." seems incorrect.

[08:36:11.0000] <Domenic_>
E.g. you wouldn't say "open a dialogue" when you mean "pop up a dialog box"

[08:36:48.0000] <jgraham>
Oh, right that was a specific complaint about that page

[08:37:11.0000] <jgraham>
That is subsumed by my rather broader complaint "that page shouldn't exist"

[08:37:27.0000] <Domenic_>
haha

[08:39:24.0000] <darobin>
jgraham: I meant APIs but also element, property, etc. names, as well as <dfn>

[08:39:53.0000] <darobin>
it gets unwieldy if you have 'color' and <dfn>colour processing</dfn>

[08:39:58.0000] <darobin>
which is where one leaks into the other

[08:40:03.0000] <jgraham>
Sure

[08:40:07.0000] <jgraham>
Consistency is good

[08:40:41.0000] <darobin>
which is why people tend to settle on en-something-specific as that's simpler to explain and navigate

[08:40:44.0000] <jgraham>
"Spelling should be consistent as defensible as English"

[08:57:36.0000] <GPHemsley>
When you read a 2-dimensional table, do you read the column (top) headers first or the row (left) headers first?

[09:05:37.0000] <darobin>
/me reads the shortest side first

[09:07:31.0000] <jgraham>
/me reads forwards, backwards and then by picking sections at random and following all the cross references

[09:08:09.0000] <Ms2ger>
jgraham++

[09:46:52.0000] <Hixie>
SteveF: i take it from your e-mail that it's ok if i keep posting to public-html about how to send feedback on the whatwg spec?

[09:49:52.0000] <dglazkov>
good morning, Whatwg!

[09:54:53.0000] <GPHemsley>
darobin, jgraham, Ms2ger: If I said "Use the following term when A and B:", which (A or B) would be the column header and which would be the row header?

[10:00:05.0000] <Hixie>
GPHemsley: what's the context here?

[10:00:22.0000] <GPHemsley>
Hixie: For the reading order?

[10:00:57.0000] <Hixie>
i dunno, i've no idea what you're asking about, but was hoping maybe it was something i could help with since nobody else seems to be around :-)

[10:01:18.0000] <GPHemsley>
heh, thanks

[10:01:37.0000] <GPHemsley>
Hixie: It relates back to my question earlier: When you read a 2-dimensional table, do you read the column (top) headers first or the row (left) headers first?

[10:01:56.0000] <Hixie>
ah

[10:02:01.0000] <Hixie>
i dunno, i just kinda look at the whole table

[10:02:29.0000] <GPHemsley>
alright

[10:02:34.0000] <Hixie>
do you have an example so i can check what i do?

[10:03:23.0000] <GPHemsley>
the easiest example (though not the best test case) is the multiplication table: https://en.wikipedia.org/wiki/Multiplication_table

[10:04:06.0000] <GPHemsley>
the "in abstract algebra" section is the clearest there: https://en.wikipedia.org/wiki/Multiplication_table#In_abstract_algebra

[10:04:06.0000] <Hixie>
ah yeah i definitely don't read either first on that table

[10:04:34.0000] <GPHemsley>
hmm, alright, well, I'll just go with my gut and it can always be changed later

[10:04:35.0000] <Hixie>
but that's because they're numbers that i can recognise in parallel in my peripheral vision

[10:04:39.0000] <GPHemsley>
right

[10:05:13.0000] <Hixie>
look like with more complex tables i look at the first row's header, then the first column's, then the second row's, then the second column's, then the data for those, then continue like that

[10:06:03.0000] <Hixie>
kinda scanning diagonally from the top left

[10:06:08.0000] <Hixie>
is this for a table in a spec?

[10:06:26.0000] <GPHemsley>
I just don't have an example at hand that uses "and" instead of "x"

[10:06:37.0000] <GPHemsley>
sort of

[10:06:45.0000] <GPHemsley>
it's a meta spec: the spec-writing style guide :)

[10:06:49.0000] <Hixie>
aah

[10:07:05.0000] <GPHemsley>
you'll see in a moment

[10:15:26.0000] <SimonSapin>
GPHemsley: fwiw, in http://dev.w3.org/csswg/css-syntax/#serialization-tables the table is for consecutive pairs of tokens. Rows are first tokens of the pair, columns second token

[10:15:28.0000] <Hixie>
MikeSmith: this is the script that used to work and now doesn't, if you have any insight http://www.whatwg.org/specs/web-apps/current-work/update-bug.pl

[10:15:35.0000] <Hixie>
MikeSmith: i cannot work out why it doesn't work

[10:16:05.0000] <SteveF>
hixie: if the same situation arises please go ahead, you are a member of the html working group and I don't make up the rules for any mailing list

[10:16:05.0000] <GPHemsley>
SimonSapin: Hmm... maybe that does make more sense.

[10:16:24.0000] <GPHemsley>
(I was going the other way)

[10:16:28.0000] <SimonSapin>
GPHemsley: when looking up a given pair, column headers are to the right of row headers, so that matches the left-to-right direction of english

[10:16:38.0000] <GPHemsley>
yeah

[10:16:54.0000] <SimonSapin>
though you could move row headers to the right

[10:16:56.0000] <GPHemsley>
I was prioritizing top/bottom over left/right

[10:16:56.0000] <Hixie>
SteveF: you might want to ask your colleagues what they would think of such behaviour

[10:17:08.0000] <GPHemsley>
because my intersection is "and"

[10:17:11.0000] <GPHemsley>
SimonSapin: ^

[10:19:00.0000] <SimonSapin>
GPHemsley: could you put what you have so far online?

[10:19:13.0000] <GPHemsley>
SimonSapin: I was going to change the order first :P

[10:19:41.0000] <SimonSapin>
I have a hard time visualizing with just the description

[10:20:54.0000] <SteveF>
hixie: 'such behaviour'? I don't think that if anybody mailed public html referencing the whatwg spec and talking something that differs that any one would mind you or anyone pointing them in the right direction to provide feedback darobin and mikesmith are regulars here I am sure they could disabuse me if I am wrong

[10:21:00.0000] <GPHemsley>
SimonSapin: I'm realizing now that your way also makes the wikimarkup easier to read

[10:21:10.0000] <GPHemsley>
SimonSapin: So I think I've got my answer :)

[10:21:31.0000] <SimonSapin>
uh, ok

[10:21:49.0000] <GPHemsley>
SimonSapin: But I'll get it up in a sec for you to review ;)

[10:25:23.0000] <GPHemsley>
Hixie, SimonSapin: http://wiki.whatwg.org/wiki/Specs/style#Collections_of_values

[10:26:50.0000] <SimonSapin>
GPHemsley: well, "and" is commutative so…

[10:27:00.0000] <GPHemsley>
true

[10:27:10.0000] <GPHemsley>
but I feel like there's an implied order

[10:27:30.0000] <GPHemsley>
and, actually, linguistic "and" actually does have an implied order

[10:28:00.0000] <GPHemsley>
nonetheless, I think we solved the formatting part; now we can discuss the substance

[10:28:06.0000] <SimonSapin>
I mean these two tables work just as well both ways

[10:29:15.0000] <GPHemsley>
Hixie, SimonSapin: Feedback welcome on the actual terminology ;)

[10:29:28.0000] <SimonSapin>
to me, map and dictionary mean the same

[10:29:42.0000] <GPHemsley>
yeah, I thought that might be a problem

[10:29:51.0000] <SimonSapin>
but "more than one value per key" is a multidict

[10:30:14.0000] <GPHemsley>
my thinking was that a map is one-to-one, but a literary dictionary can have multiple definitions for a single term

[10:30:36.0000] <SimonSapin>
"strict dictionary" is just a map that you’re looking at backwards

[10:30:48.0000] <Hixie>
hm yeah, the top left cell there confuses me :-)

[10:31:03.0000] <Hixie>
i read it first :-)

[10:31:09.0000] <GPHemsley>
heh

[10:31:18.0000] <GPHemsley>
that was probably part of the problem I had

[10:31:51.0000] <GPHemsley>
SimonSapin: You think "reverse map" or "inverse map" would be better?

[10:31:55.0000] <Hixie>
also, i feel that that entire section can be replaced with "define your terms, and try to use terms according to their widely accepted meaning where an appropriate term exists"

[10:32:35.0000] <GPHemsley>
Hixie: The idea here is to assist in choosing one where multiple possibilities exist. ;)

[10:32:46.0000] <GPHemsley>
http://logbot.glob.com.au/?c=freenode%23whatwg&s=30+May+2013&e=30+May+2013&h=style+guide#c798281

[10:33:33.0000] <GPHemsley>
SimonSapin: I'm inclined to like "inverse map"; do you have any objections?

[10:34:46.0000] <SimonSapin>
sounds fine

[10:37:23.0000] <GPHemsley>
Hixie: Oh, also, this style guide doubles as and/or supports the "common definitions" document that I've been asking about

[10:40:00.0000] <GPHemsley>
SimonSapin: Wikipedia uses the term "multimap"; do you have any opinion on that?

[10:40:50.0000] <GPHemsley>
SimonSapin: There is also "multivalued function".

[10:41:32.0000] <SimonSapin>
function sounds like code rather than data

[10:41:36.0000] <SimonSapin>
multipmap is fine

[10:44:25.0000] <GPHemsley>
/me is still partial to "dictionary", despite the potential for confusion...

[10:45:09.0000] <GPHemsley>
"Let x be a multimap of florgs..."

[10:45:10.0000] <SimonSapin>
"dictionary" definitely has one value per key in Python

[10:45:17.0000] <GPHemsley>
yeah... :/

[10:45:42.0000] <gsnedders>
GPHemsley: multimap if you want one-to-many, definitely

[10:45:57.0000] <GPHemsley>
This leaves no place for "dictionary", then

[10:46:04.0000] <GPHemsley>
Are we OK with that?

[10:46:59.0000] <GPHemsley>
/me is leaning yes

[10:47:09.0000] <GPHemsley>
too much room for confusion, actually

[10:47:20.0000] <gsnedders>
GPHemsley: No "dictionary" where?

[10:47:27.0000] <GPHemsley>
http://wiki.whatwg.org/wiki/Specs/style#Collections_of_values

[10:47:44.0000] <GPHemsley>
gsnedders: In terminology to use to writing specs.

[10:47:49.0000] <SimonSapin>
dictionary is the same as map, but JS seems set on using Map

[10:48:05.0000] <GPHemsley>
SimonSapin: Well, this is intended to be use in prose.

[10:48:08.0000] <GPHemsley>
+D

[10:48:11.0000] <GPHemsley>
-D+d

[10:48:18.0000] <gsnedders>
Then, yes, I am fine with this. Possibly with "dictionary" and "map" being synonymous as SimonSapin says.

[10:48:38.0000] <gsnedders>
But language typically evolves to remove true synonyms, so we can probably just have one :P

[10:48:39.0000] <MikeSmith>
Hixie: will take a look at the script after I get some sleep

[10:49:10.0000] <GPHemsley>
Channel topic notwithstanding, a "dictionary" in the Real World™ is one-to-many.

[10:49:36.0000] <GPHemsley>
Which is why I'm OK with not using it

[10:50:00.0000] <gsnedders>
GPHemsley: Dependences on the sense of dictionary. :)

[10:50:14.0000] <gsnedders>
What word was that? Depends.

[10:50:29.0000] <GPHemsley>
gsnedders: What do you have in mind?

[10:50:39.0000] <gsnedders>
GPHemsley: Do we need to special-case the "only one key per value" case, BTW?

[10:51:34.0000] <gsnedders>
GPHemsley: Because both of those terms just confuse me without thinking about them.

[10:51:45.0000] <GPHemsley>
gsnedders: Keep in mind the leading part: "For a keyed collection of values, use the following term when there *can be*…"

[10:52:39.0000] <GPHemsley>
If you want a map that is deliberately bidirectional, then you have it

[10:52:51.0000] <gsnedders>
"     Whenever 'dg' represents the "soft" /d͡ʒ/ sound, it should be followed by an 'e' or an 'i', to ensure it is not confused with the "hard" /dɡ/ sounds. " is a shit justification, though. You can apply that to plenty of other things in American English spelling.

[10:52:54.0000] <GPHemsley>
likewise with an inverse map

[10:53:11.0000] <gsnedders>
(No offense meant, of course)

[10:53:22.0000] <GPHemsley>
gsnedders: Feel free to; this was me documenting en-US-x-ghemsley ;)

[10:53:49.0000] <gsnedders>
GPHemsley: Hey, I'd rather we just wrote specs in en-gb-oed ;P

[10:53:51.0000] <GPHemsley>
which, as I mentioned earlier, I am hoping to be able to merge with en-GB-x-hixie

[10:54:00.0000] <GPHemsley>
nah, too many u's

[10:54:20.0000] <gsnedders>
Also it typically confuses the hell out of people as to what uses -ise and what uses -ize.

[10:54:29.0000] <gsnedders>
(Hint: it depends on etymology by and large)

[10:54:46.0000] <GPHemsley>
and I prefer to reserve '-re' for /rə/

[10:55:10.0000] <GPHemsley>
genre, cadre, macabre

[10:56:46.0000] <GPHemsley>
gsnedders: We're a reality-based standards body: If you can streamline things, do it; if you can't, it's OK to deal with the legacy.

[10:56:49.0000] <GPHemsley>
;)

[10:57:21.0000] <gsnedders>
GPHemsley: Hey, perscriptive dictionary writers managed to do a lot for making en-us and en-gb distinct! (On both sides, that is.)

[10:57:43.0000] <GPHemsley>
And now we shall attempt to undo them

[10:59:05.0000] <GPHemsley>
Does anyone want to weigh in on the relationship between objects, classes, functions, and methods?

[10:59:52.0000] <gsnedders>
Why distinguish functions and methods?

[11:07:19.0000] <gsnedders>
GPHemsley: But a function is a morphism between two sets. Obviously! :P

[11:14:02.0000] <Hixie>
MikeSmith: nevermind dude, figured it out!! yay

[11:14:05.0000] <Hixie>
only took me like a week

[11:44:06.0000] <GPHemsley>
gsnedders: Why, indeed. That's partly what the discussion would revolve around. (And are classes not objects, in some sense?)

[11:52:10.0000] <gsnedders>
GPHemsley: Classes are formed of a function and its prototype property ("prototype", not [[Prototype]]), I'd say.

[11:53:54.0000] <GPHemsley>
hmm... the Wikipedia article on "method" does not even mention "function": https://en.wikipedia.org/wiki/Method_%28computer_programming%29

[11:55:22.0000] <GPHemsley>
but apparently "function" redirects to "subroutine", which is linked to by "method": https://en.wikipedia.org/wiki/Function_%28computer_science%29 https://en.wikipedia.org/wiki/Subroutine

[11:55:32.0000] <gsnedders>
"In different programming languages a subroutine may be called a procedure, a function, a routine, a method, or a subprogram." interestingly

[11:56:21.0000] <GPHemsley>
yeah

[12:04:33.0000] <TabAtkins>
SimonSapin: CSS px.  I don't use the px unit for device pixels.

[12:05:02.0000] <SimonSapin>
yeah, after reading again that made sense

[12:32:35.0000] <GPHemsley>
Hixie, annevk, et al.: Feedback welcome on the new style guide: http://wiki.whatwg.org/wiki/Specs/style

[12:33:24.0000] <Hixie>
it's missing something along the lines of "feel free to ignore any of this in the pursuit of a better spec" :-)

[12:33:55.0000] <Hixie>
and yeah, i really do just read the top left cell first

[12:33:57.0000] <Hixie>
good to know

[12:34:18.0000] <GPHemsley>
"When writing a spec, it is suggested that you adhere to the following guidelines." – That deliberately has lots of leeway

[12:34:32.0000] <Hixie>
btw the key part of the "violation" vs "willful violation" thing isn't so much teh words, it's that you document the deviations

[12:34:39.0000] <Hixie>
and include rationale

[12:34:49.0000] <Domenic_>
GPHemsley: the dialog vs. dialogue guidance is just wrong. A dialog is the computer thing, a dialogue is a conversation.

[12:35:35.0000] <GPHemsley>
Domenic_: By "a dialog", do you mean "a dialog box"? Because otherwise I'm not sure what "a dialog" is.

[12:35:43.0000] <Hixie>
Domenic_: that's how i use it too, but is that real?

[12:35:48.0000] <Domenic_>
GPHemsley: exactly. As in "pop up a dialog"

[12:35:49.0000] <GPHemsley>
(And, in which case, the guideline stands)

[12:36:00.0000] <Hixie>
Domenic_: i assumed reality just had dialoge as GB and dialog as US

[12:36:17.0000] <Hixie>
/me uses "color" for the computer thing and "colour" for the perceived thing, too, but that's clearly just me being crazy

[12:36:23.0000] <GPHemsley>
:)

[12:36:23.0000] <Domenic_>
GPHemsley: no the guideline also fails for "let's open a dialogue" (start a conversation) vs. "let's open this dialog" (show the popup)

[12:36:46.0000] <GPHemsley>
for me, there is no "dialog", there is only "dialog box"

[12:36:55.0000] <Hixie>
also the "acknowledgments" thing is just a typo i never noticed

[12:37:00.0000] <Domenic_>
<dialogbox>?

[12:38:17.0000] <GPHemsley>
It's still an adjective to me, even if the "box" part is implied. But maybe that's just me.

[12:38:33.0000] <Domenic_>
yeah most UI frameworks seem to use it as a noun. either that or they imply like crazy.

[12:38:42.0000] <GPHemsley>
perhaps

[12:38:50.0000] <Domenic_>
I imagine there are other common english terms that used to be adjectives but people dropped the noun

[12:39:03.0000] <GPHemsley>
but either way, you're not "violating" the guideline in my eyes

[12:39:08.0000] <GPHemsley>
so it doesn't change anything :P

[12:39:11.0000] <Hixie>
/me has been tempted to move back to the british spellings in the prose now that he's no longer anchored to w3c pubrules, btw

[12:39:24.0000] <Domenic_>
Well, I think the guideline is pretty misleading

[12:39:25.0000] <GPHemsley>
/me wonders how to untempt Hixie 

[12:39:47.0000] <Domenic_>
E.g. if I want to "open a dialogue about promises" the guideline would say "open a dialog about promises" which invokes images of something on my screen.

[12:39:57.0000] <Hixie>
well i just checked in a change that goes the other way (fixing that acknowledgements typo)

[12:40:20.0000] <GPHemsley>
"only keep '-ue' for the *definitive* noun" == the conversation, e.g.

[12:40:40.0000] <Hixie>
but it's something that comes up every now and then when i notice that i've made yet another series of typos

[12:40:41.0000] <GPHemsley>
Domenic_: Wait, what?

[12:40:53.0000] <Hixie>
or when i forget whether i should be saying "-ize" or "-ise"

[12:41:14.0000] <GPHemsley>
Hixie: I'm advocating for en-US-x-ghemsley, not en-US. ;)

[12:41:26.0000] <Hixie>
btw, even when we were talking about an element for dialogues, we still spelt it <dialog>

[12:41:30.0000] <GPHemsley>
So "acknowledgements" is not "the other way"

[12:41:38.0000] <gsnedders>
Hixie: You should be using -ize for words of Latinized Greek origin, and -ise for words from French. Obviously!

[12:41:48.0000] <Hixie>
lordy

[12:42:30.0000] <GPHemsley>
Hixie: "Consult Wikipedia's Manual of Style for spelling for assistance." http://en.wikipedia.org/wiki/Wikipedia:Manual_of_Style/Spelling

[12:42:37.0000] <gsnedders>
(Until the mid-19th cent. this was the convention in the UK. And the OED still recommends it.)

[12:42:53.0000] <Hixie>
/me just uses wiktionary

[12:42:58.0000] <GPHemsley>
that also works

[12:43:13.0000] <GPHemsley>
I like their listing of "weblogue"

[12:43:50.0000] <GPHemsley>
it doesn't actually have its own entry, but it's listed in a box of other "-ogue" words

[12:44:30.0000] <GPHemsley>
Domenic_: Can you clarify why you believe the guideline says that you can't say "open a dialogue about promises"?

[12:45:07.0000] <Hixie>
GPHemsley: Domenic_'s point is that both "open a dialogue about promises" and "open a dialog about promises" are correct, just in different contexts

[12:45:19.0000] <GPHemsley>
And I concur

[12:45:32.0000] <Hixie>
GPHemsley: the first means "start a conversation on the topic of promises", the second means "display a window regarding promises"

[12:45:40.0000] <GPHemsley>
I agree

[12:46:01.0000] <Hixie>
in both cases it's a noun

[12:46:10.0000] <GPHemsley>
technically, yes

[12:46:26.0000] <GPHemsley>
but I added "definitive" in there, because really it's "a dialog box"

[12:46:46.0000] <GPHemsley>
we're probably splitting hairs here

[12:47:13.0000] <Domenic_>
I think it's completely the wrong dimension

[12:47:21.0000] <Domenic_>
The dimension is computer box thing vs. conversation

[12:47:27.0000] <Domenic_>
not noun vs. verb

[12:47:39.0000] <Hixie>
i don't know what you mean by "definitive noun"

[12:47:41.0000] <GPHemsley>
Hixie: Incidentally, didn't realize what you meant about r8257; I disagree with that change.

[12:48:02.0000] <Hixie>
i figured that you disagree :-)

[12:48:19.0000] <GPHemsley>
Domenic_: Well, for one thing, the guideline is not just for "dialog(ue)"; the description elaborates.

[12:48:54.0000] <GPHemsley>
Hixie: That perhaps is the issue here. Maybe I can clarify it.

[12:50:58.0000] <Hixie>
if you have a box in which people climb to talk about things, that's a "dialogue box"

[12:51:22.0000] <GPHemsley>
argh

[12:51:25.0000] <Hixie>
(per my and Domenic_'s rather perverse opinions of english)

[12:52:08.0000] <zcorpan>
GPHemsley: just remove the "and"?

[12:52:09.0000] <Hixie>
after weeks of using this box, people will just say "go to the dialogue to talk about it!"

[12:52:33.0000] <Hixie>
but they'll really mean "the dialogue box"

[12:52:43.0000] <Domenic_>
/me nods

[12:52:45.0000] <GPHemsley>
zcorpan: I'd prefer to maintain some semblance of a complete sentence. :)

[12:53:11.0000] <Hixie>
in the dialogue box, there's a computer, which shows a dialog box to ask you what you're talking about so it can make a transcript

[12:53:15.0000] <Hixie>
it's the dialogue box dialog box

[12:53:23.0000] <GPHemsley>
Hixie, Domenic_: I'm hearing you, and I'm not disagreeing.

[12:53:42.0000] <GPHemsley>
/me slaps Hixie with a fish

[12:53:48.0000] <GPHemsley>
trout, specifically

[12:53:51.0000] <Hixie>
later, people made a separate box just to talk about the dialogue box dialog box. that is the dialogue box dialog box dialogue box.

[12:54:03.0000] <Hixie>
/me eats the trout

[12:54:09.0000] <Hixie>
i should probably go get lunch.

[12:54:10.0000] <GPHemsley>
it sounds like you're standing on a monologue box

[12:54:11.0000] <zcorpan>
GPHemsley: they're table headers, table headers aren't sentences. the 'and' doesn't add anything useful visually, it's just confusing, and i imagine it's even more confusing for non-visual users

[12:54:18.0000] <Hixie>
GPHemsley: hah

[12:54:35.0000] <Hixie>
bbiab

[12:55:14.0000] <GPHemsley>
zcorpan: The sentence begins in the table caption, though I don't know what effect that has on non-visual users.

[12:56:43.0000] <zcorpan>
GPHemsley: the caption is fine and non-confusing

[12:56:52.0000] <GPHemsley>
Domenic_, Hixie: "the dialog" is an adjectival noun: https://en.wikipedia.org/wiki/Adjectival_noun_%28noun%29

[12:59:02.0000] <gsnedders>
/me misread that as adverbial noun and got confused

[13:01:05.0000] <GPHemsley>
Domenic_, Hixie: Is this clearer? http://wiki.whatwg.org/wiki/Specs/style#Spelling

[13:01:19.0000] <zcorpan>
GPHemsley: if you really want to have a complete sentence, it's better to do "uniqueness doesn't matter, and..."

[13:01:59.0000] <gsnedders>
GPHemsley: How it adjectival anyway? Describing a box?

[13:02:14.0000] <Domenic_>
GPHemsley: What about "can we dialogue about boxes on the screen"?

[13:02:30.0000] <GPHemsley>
zcorpan: "For a keyless collection of values, use the following term when [order doesn't matter] [and] [uniqueness doesn't matter]: unordered list'"

[13:02:35.0000] <Domenic_>
that is a verb but "all other parts of speech" implies you want it spelled "dialog"

[13:02:43.0000] <GPHemsley>
+'

[13:02:58.0000] <gsnedders>
Domenic_: It's a verbalised noun!

[13:02:59.0000] <GPHemsley>
Domenic_: What is a verb?

[13:03:20.0000] <Domenic_>
GPHemsley: in "can we dialogue about boxes on the screen" "dialogue" is a verb

[13:04:02.0000] <gsnedders>
GPHemsley: Can we not just go for the crude "use dialogue for the non-technical sense (conversation) and dialog for the technical sense (a box on a computer screen)"?

[13:04:29.0000] <GPHemsley>
gsnedders: At this point, I'm ready to just remove it altogether and put it back in the en-US-x-ghemsley vault.

[13:04:49.0000] <zcorpan>
GPHemsley: yes, i understand how it's intended. but when first reading the table, i went "For a keyless collection of values, use the following term when... and...wat???"

[13:04:57.0000] <gsnedders>
GPHemsley: It's not really needed, because I think most en-gb and en-us dictionaries make the distinction, no?

[13:05:13.0000] <GPHemsley>
zcorpan: Would it help if I used "&" instead?

[13:05:21.0000] <zcorpan>
GPHemsley: don't think so

[13:05:43.0000] <GPHemsley>
gsnedders: Yeah, I was trying to generalize it to all "-log(ue)" words.

[13:05:44.0000] <zcorpan>
GPHemsley: if the cell was empty, i'd read it as it was intended and just mentally fill in the 'and'

[13:06:03.0000] <GPHemsley>
zcorpan: OK; maybe I should put "… and …"?

[13:06:13.0000] <zcorpan>
GPHemsley: if it's non-empty, i'd read it first and wonder what to make of it :-)

[13:06:45.0000] <gsnedders>
GPHemsley: Yeah, I get that. Monolog looks wrong to me, catalog is very much en-us to me (without the technical distinction), etc.

[13:06:51.0000] <gsnedders>
GPHemsley: So I'd drop the rest. :P

[13:07:33.0000] <GPHemsley>
Domenic_, gsnedders: The rule is gone. Be careful what you wish for. ;)

[13:10:22.0000] <gsnedders>
Lazy IRC: Are JS extensions for Firefox etc. .xpi too, or do they have a different extension?

[13:10:27.0000] <GPHemsley>
zcorpan: Better? http://wiki.whatwg.org/wiki/Specs/style#Collections_of_values

[13:11:13.0000] <zcorpan>
GPHemsley: yes

[13:11:31.0000] <Ms2ger>
gsnedders, yeah

[13:13:26.0000] <gsnedders>
Ms2ger: Is there any way to tell them apart on the adds on site?

[13:13:36.0000] <Ms2ger>
No idea

[13:13:45.0000] <gsnedders>
Well you're only a bit useful!

[13:14:23.0000] <odinho>
tru dat

[13:24:26.0000] <Ms2ger>
:D

[13:44:03.0000] <Hixie>
heycam|away: yt?

[13:44:34.0000] <Hixie>
is there something somewhere that describes WebIDL's Foo[] vs sequence<Foo> vs a custom [ArrayClass] interface?

[13:44:41.0000] <Hixie>
i get confused about this every time

[13:50:15.0000] <Hixie>
what is "the value of that dictionary member" when the member's type is sequence<Foo> ?

[13:54:57.0000] <Hixie>
and same question, for Foo[]...

[13:55:05.0000] <Hixie>
seems the former is a new Array

[13:55:10.0000] <Hixie>
but the latter could be the same Array?

[13:55:16.0000] <Hixie>
but it says dictionaries always copy...

[13:55:17.0000] <Hixie>
i'm confused

[14:06:14.0000] <heycam>
Hixie, hi

[14:06:55.0000] <heycam>
Hixie, Foo[] means "a special platform object that behaves kind of like an array but which can live-ly reflect elements and/or be read only or fixed length"

[14:07:05.0000] <heycam>
sequence<Foo> as a return type basically means a JS Array

[14:07:20.0000] <heycam>
as an arg, means it accepts a JS Array, or something that feels like one

[14:07:35.0000] <Hixie>
it seemed from the webidl spec that on an attribute, Foo[] meant just a regular Array

[14:07:45.0000] <heycam>
sequence<> also means things will be copied out of the Array (or array-ish thing) you pass in, and a reference to that object won't be held on to

[14:07:50.0000] <heycam>
Hixie, no that's not right

[14:07:56.0000] <heycam>
the situation with these types is terribly

[14:07:57.0000] <heycam>
sorry

[14:08:05.0000] <heycam>
*terrible

[14:08:07.0000] <Hixie>
(context is https://www.w3.org/Bugs/Public/show_bug.cgi?id=23176 )

[14:08:19.0000] <heycam>
[ArrayClass] only means "prototype is Array.prototype, not Object.prototype"

[14:08:54.0000] <heycam>
I think mostly everyone dislikes Foo[] objects

[14:08:58.0000] <heycam>
because they're not-quite-Arrays

[14:09:02.0000] <Hixie>
so a readonly attribute Foo[] foo; returns an immutable object? as in, can't change their contents?

[14:09:11.0000] <Hixie>
not an Array?

[14:09:12.0000] <heycam>
you can define it so, or not

[14:09:16.0000] <Hixie>
oh

[14:09:17.0000] <heycam>
but it's not n Array object

[14:09:32.0000] <Hixie>
so, right now i have no prose hook here to define anything

[14:09:42.0000] <Hixie>
it's in an Event

[14:10:08.0000] <Hixie>
the only prose is DOM's "If there is an eventInitDict argument then for each dictionary member defined therein find the attribute on event whose identifier matches the key of the dictionary member and then set the attribute to the value of that dictionary member.

[14:10:12.0000] <Hixie>
"

[14:10:21.0000] <Hixie>
the member in the dictionary is a sequence<Foo>

[14:10:36.0000] <Hixie>
and the FooEvent interface member is a readonly attribute Foo[]

[14:10:42.0000] <heycam>
oh, interesting

[14:10:46.0000] <Hixie>
so what does that mean?

[14:10:56.0000] <heycam>
so despite the fact that the types aren't identical, I think that should kind of work

[14:11:00.0000] <heycam>
if you blur your eyes a bit :)

[14:11:18.0000] <heycam>
taking a JS object that is a Foo[], and converting it to IDL sequence<Foo> type, will do the right thing

[14:11:33.0000] <heycam>
since the Foo[] object will feel like an array (it'll have 0, 1, 2, length properties)

[14:11:36.0000] <Hixie>
you mean the other way around?

[14:11:42.0000] <heycam>
ah oh

[14:11:54.0000] <heycam>
in that case, let me check ;)

[14:12:16.0000] <Hixie>
i'm trying to figure out if new FooEvent({foo: [foo1, foo2]}).foo is mutable (as in, can have items added or removed, not as in frozen)

[14:12:25.0000] <Hixie>
(i want it immutable if possible)

[14:12:54.0000] <heycam>
ok so yes, JS-to-IDL-Foo[]-type conversions will do the right thing there...

[14:13:06.0000] <heycam>
see the conversion steps in http://heycam.github.io/webidl/#es-array

[14:13:17.0000] <heycam>
it will "Return a new fixed length array ..."

[14:13:29.0000] <heycam>
won't be read only tho

[14:13:52.0000] <heycam>
so perhaps the right thing is to have the DOM spec allow you to hook in to that dictionary-to-event-init algorithm

[14:14:00.0000] <heycam>
to give custom behaviour for a particular dictionary member

[14:14:36.0000] <TabAtkins>
GPHemsley: Oxford comma or gtfo

[14:15:13.0000] <heycam>
Hixie, ontoggle seems like a useful addition for <details> btw

[14:15:16.0000] <Domenic_>
Hixie: I like your current plan of just returning a normal array for .ports, FWIW.

[14:16:30.0000] <Hixie>
heycam: what's the use case for fixed-length-but-mutable arrays?

[14:16:40.0000] <heycam>
/me shrugs

[14:16:41.0000] <Hixie>
Domenic_: apparently that's not quite what i'm returning

[14:17:02.0000] <Hixie>
heycam: well, if there isn't one, and nobody uses it, we can do away with it and make this readonly without requiring complex magic for this one case :-)

[14:17:16.0000] <heycam>
Hixie, maybe ;)

[14:17:24.0000] <Domenic_>
Hixie: oh hmm I see heycam didn't tell us what sequence<Foo> does for attributes.

[14:17:36.0000] <Hixie>
Domenic_: on attributes it does nothing, it's not valid

[14:17:38.0000] <heycam>
Domenic_, the answer in you can't use it for attributes :)

[14:17:40.0000] <heycam>
*is

[14:17:44.0000] <Domenic_>
welp

[14:17:47.0000] <Hixie>
Domenic_: (it would return a new object each time, which is hecka confusing)

[14:17:57.0000] <Domenic_>
is it possible to have attributes that are arrays in WebIDL?

[14:18:02.0000] <Domenic_>
is it possible to have attributes that are arrays in WebIDL?

[14:18:06.0000] <heycam>
it feels like we want a way to represent just a "reference to an Array object" in Web IDL tho

[14:18:17.0000] <heycam>
Domenic_, so you can, but currently you have to write the type as "object"

[14:18:31.0000] <Domenic_>
oh fun

[14:18:38.0000] <heycam>
adding Array is easy though

[14:18:54.0000] <heycam>
we should just do that

[14:19:05.0000] <heycam>
so we have four array-ish types in the spec ;)

[14:19:08.0000] <Hixie>
that's orthogonal to this, though, right?

[14:19:18.0000] <Hixie>
(see also the Transferable issue)

[14:19:21.0000] <heycam>
it is unless you want to change the message port array design to use actual Array objects

[14:19:25.0000] <Domenic_>
(relevant: https://www.w3.org/Bugs/Public/show_bug.cgi?id=23682)

[14:19:36.0000] <Domenic_>
which I think is what you want to do

[14:19:43.0000] <heycam>
since most people want to kill Foo[] types, and the message port arrays are one of the only uses of them...

[14:20:08.0000] <heycam>
Domenic_, I had not read that bug yet

[14:20:56.0000] <Hixie>
heycam: ah well that would be fine too i guess

[14:21:00.0000] <TabAtkins>
heycam: Plz make a fifth array type that's just the other four mashed together, and the browser guesses which one you meant.

[14:21:04.0000] <Hixie>
heycam: bz wants an immutable object though

[14:21:12.0000] <Domenic_>
in that case freeze it

[14:21:12.0000] <Hixie>
TabAtkins: he has that already! a union :-)

[14:21:26.0000] <heycam>
(except that you can't union all those types together)

[14:21:39.0000] <Domenic_>
i think there is some general consensus that frozen arrays are good for at least some use cases

[14:21:54.0000] <heycam>
yeah I think a frozen array makes sense for the message port array

[14:21:55.0000] <Domenic_>
so heycam if you're adding array anyway maybe add some kind of way to make them frozen?

[14:22:21.0000] <heycam>
Domenic_, yeah I'll check out sicking's suggestions there

[14:22:28.0000] <Hixie>
would be great if i could just say [Frozen] Array :-)

[14:22:45.0000] <Hixie>
the sad thing about using Array in the IDL is you lose the type annotation

[14:22:51.0000] <heycam>
I think the [SameObject] that sicking proposes is not all that what you want

[14:22:59.0000] <Hixie>
Foo[] could just mean an Array on the way out and a type-checked Array on the way in

[14:23:00.0000] <heycam>
yes it should be the same object returned all the time, but also you need the values to be frozen

[14:23:07.0000] <heycam>
maybe the "readonly" is meant to imply that tho

[14:23:26.0000] <Hixie>
i don't want the MessagePort objects themselves frozen...

[14:23:34.0000] <heycam>
Hixie, no but the values of the array indexes

[14:23:44.0000] <Hixie>
ah

[14:23:44.0000] <Hixie>
[24~right

[14:23:49.0000] <Domenic_>
it would be cool to use the word "frozen" instead of "readonly" since the former means something.

[14:23:54.0000] <heycam>
ha

[14:24:19.0000] <heycam>
yeah readonly also means something, which is "user can't change the value of the property"

[14:24:26.0000] <Domenic_>
right yeah "only has a getter"

[14:24:52.0000] <Domenic_>
so i am hearing `readonly frozen Array<MessagePort> ports`

[14:25:04.0000] <TabAtkins>
This works for me.

[14:25:11.0000] <TabAtkins>
And then throw away everything else.

[14:25:17.0000] <Domenic_>
oh wait i forgot `readonly frozen [SameObject] Array<MessagePort> ports`

[14:26:06.0000] <heycam>
"attribute"

[14:26:22.0000] <Domenic_>
whyyyyyyy make the hurting stop

[14:26:25.0000] <heycam>
:)

[14:27:10.0000] <Hixie>
i'd prefer "readonly attribute [Frozen] MessagePort[] ports;"

[14:27:14.0000] <Hixie>
but i don't know what SameObject means

[14:27:29.0000] <Domenic_>
I think it prevents the b.ports !== b.ports problem

[14:27:31.0000] <heycam>
(believe it or not I did try and think of all the different use cases for combinations of arrays/arraylikes/mutable/immutable/length-changeable/etc. when coming up with what's in the spec at the moment)

[14:27:48.0000] <heycam>
might have been before frozen things were around tho

[14:27:57.0000] <Hixie>
yeah frozen is a newish thing

[14:28:02.0000] <Hixie>
/me doesn't understand why we have it

[14:28:17.0000] <heycam>
we use [SameObject] in our idl to trigger some optimisations

[14:28:37.0000] <Domenic_>
i mean it is less powerful than what we really want which is readonly-but-writable-by-creator, but it does help in this particular case of always-immutable-forever.

[14:29:01.0000] <Ms2ger>
Hi heycam!

[14:29:07.0000] <TabAtkins>
So annoying that you have to do a brand new cloned interface to do readonly-but-writable-by-creator. :/

[14:29:21.0000] <heycam>
TabAtkins, was just going to say; that's what sicking's suggestion is

[14:29:30.0000] <heycam>
I mean, the Foo[] types were added to avoid having to create new interfaces each time

[14:29:38.0000] <Domenic_>
yeah :-/. i am seriously thinking of trying to create a canonical proxy-based array wrapper for that

[14:29:46.0000] <GPHemsley>
TabAtkins: Ah, yes, good point.

[14:29:47.0000] <heycam>
Domenic_++

[14:29:47.0000] <Hixie>
heycam: yeah

[14:29:58.0000] <heycam>
it's the biggest problem with trying to re-use standard JS array-ish things here

[14:30:11.0000] <heycam>
hi Ms2ger

[14:30:25.0000] <TabAtkins>
+1, would do more.

[14:35:19.0000] <GPHemsley>
TabAtkins: Added.

[14:35:34.0000] <Hixie>
heycam: ooh, i actually have an answer for heycam in https://www.w3.org/Bugs/Public/show_bug.cgi?id=18242 now

[14:36:07.0000] <Hixie>
he ain't gonna like it though

[14:36:12.0000] <heycam>
:\

[14:36:20.0000] <Hixie>
guess i should just provide you with a hook

[14:36:23.0000] <Hixie>
and put the ugly stuff on my end

[14:36:52.0000] <heycam>
the less browsing context related stuff I need to include in my spec the better, really

[14:36:55.0000] <Hixie>
the answer is "the unit of related similar-origin browsing contexts is the one in which the browsing context specified by the script's settings object finds itself"

[14:37:06.0000] <Hixie>
let me give you a hook

[14:37:16.0000] <heycam>
hook is good

[14:37:18.0000] <Hixie>
you're gonna hand me a "script", right?

[14:37:54.0000] <heycam>
I think so -- I get it from the stack of incumbent scripts

[14:38:02.0000] <heycam>
or just by referencing "incumbent script

[14:38:31.0000] <Hixie>
my head hurts trying to figure this stuff out

[14:38:33.0000] <heycam>
actually maybe that doesn't make sense, looking back to comment 30 to see what I needed this thing for

[14:38:37.0000] <Hixie>
i need to page more of this in

[14:39:03.0000] <Hixie>
why aren't we having you go through the "jump to a code entry-point" algorithm again?

[14:39:34.0000] <Hixie>
shouldn't you at least be calling "prepare to run a script-based callback"?

[14:39:49.0000] <heycam>
/me grumbles at find bar not working in his nightly firefox

[14:40:16.0000] <Hixie>
"If the global object specified by o's settings object is a Window object whose Document object is not fully active, then return "do not run" and abort these steps" seems like something you need on your end, no?

[14:40:24.0000] <Hixie>
when are you running this stuff?

[14:40:44.0000] <heycam>
let me check what I added to the spec, because I don't remember

[14:41:07.0000] <Hixie>
it's by "single operation callback interface"

[14:41:28.0000] <Hixie>
and "Invoking callback functions"

[14:41:36.0000] <heycam>
ah yep

[14:42:21.0000] <heycam>
and we do the "stuff the incumbent script in the callback's context" bit when we pass the function object in

[14:42:40.0000] <heycam>
e.g. in #idl-callback-function

[14:42:49.0000] <heycam>
#es-callback-function sorry

[14:43:44.0000] <Hixie>
yeah

[14:44:05.0000] <heycam>
so

[14:44:25.0000] <heycam>
whenever I reference the stack of incumbent scripts, I need to know what unit-of-thingies it's from

[14:44:47.0000] <GPHemsley>
Hixie: I added another guideline for you: http://wiki.whatwg.org/wiki/Specs/style#Willful_violations_of_other_specs

[14:44:48.0000] <heycam>
if I can determine that from the script (which I previously stuffed into the callback context), that's good

[14:45:01.0000] <Hixie>
yeah you can definitely get it from the script

[14:45:23.0000] <Hixie>
in fact i can just give you the stack directly

[14:45:38.0000] <gsnedders>
GPHemsley: +1 for TabAtkins's Oxford comma or gtfo

[14:45:43.0000] <Hixie>
heycam: but my broader question is why aren't we e.g. checking if scripting is enabled?

[14:45:49.0000] <GPHemsley>
gsnedders: I already added it. :)

[14:46:00.0000] <gsnedders>
GPHemsley: Like I'm reading shit!

[14:46:05.0000] <GPHemsley>
;)

[14:46:28.0000] <heycam>
Hixie, where in the HTML spec do you check if scripting is enabled?

[14:46:36.0000] <heycam>
to determine whether to proceed with calling somethign?

[14:46:46.0000] <Hixie>
heycam: in "prepare to run a script-based callback"

[14:46:51.0000] <Hixie>
http://www.whatwg.org/specs/web-apps/current-work/#prepare-to-run-a-script-based-callback

[14:47:12.0000] <Hixie>
and then after the callback we run microtasks... i guess you don't want to do that, right?

[14:47:18.0000] <Hixie>
when does all this get invoked, on your end?

[14:47:34.0000] <Hixie>
not for eg. array.sort(), right?

[14:47:41.0000] <Hixie>
do you get invoked for setTimeout(function...)?

[14:48:10.0000] <Hixie>
no, looks like for setTimeout, i just do "Call the Function. Use the third and subsequent method arguments (if any) as the arguments for invoking the Function. Use method context proxy as the thisArg for invoking the Function."

[14:48:13.0000] <heycam>
no, not for array.sort()

[14:48:16.0000] <Hixie>
(which is completely bogus, but that's another story)

[14:48:28.0000] <heycam>
for setTimeout, yes, since you should be storing away the IDL-typed callback thing

[14:48:39.0000] <Hixie>
aah, ok

[14:48:40.0000] <heycam>
and then invoking it through my "invoke a callback" algorithm, whatever it's called

[14:48:46.0000] <Hixie>
good to know

[14:48:58.0000] <Hixie>
for event handlers? i seem to do all the logic myself for those currently

[14:49:10.0000] <heycam>
should be just like setTimeout

[14:49:22.0000] <heycam>
whenever you talk about invoking Function objects, it by passes my stuff

[14:49:28.0000] <heycam>
*bypasses

[14:50:12.0000] <Hixie>
for event handlers i have to do it myself because there's all kinds of crazy stuff like the scope chain being fishy

[14:50:23.0000] <heycam>
hmm

[14:50:38.0000] <Hixie>
i use "jump to code entry point" for that, anyway

[14:50:42.0000] <Hixie>
so it takes care of all this

[14:50:48.0000] <heycam>
I see

[14:50:59.0000] <Hixie>
addEventListener() would use your stuff, but that's a DOM issue, not HTML

[14:51:32.0000] <Hixie>
anyway, for addEventListener(), i'm pretty sure you do need to be checking that the browsing context is active

[14:51:43.0000] <Hixie>
dunno if you want to run microtasks, but probably

[14:51:56.0000] <heycam>
/me does not know what it would mean to run microtasks

[14:52:07.0000] <Hixie>
(for setTimeout(), microtasks don't matter since the whole thing is in a task, so they run immediately after anyway)

[14:52:18.0000] <Hixie>
mutation observers are microtasks

[14:52:20.0000] <Hixie>
amongst other things

[14:52:21.0000] <heycam>
ah

[14:52:38.0000] <heycam>
so if there are multiple things to do, like checking script is enabled, running microtasks, it would be nice to get the HTML spec to run them for me

[14:52:44.0000] <heycam>
by me just invoking one hook

[14:52:52.0000] <Hixie>
i think you can do that today by just invoking http://www.whatwg.org/specs/web-apps/current-work/#jump-to-a-code-entry-point

[14:53:02.0000] <heycam>
ok I'll take a look at it again

[14:53:09.0000] <Hixie>
but that won't work for your case when it's not a script

[14:53:09.0000] <heycam>
I think I thought it wasn't appropriate earlier

[14:53:14.0000] <heycam>
ah right

[14:53:15.0000] <heycam>
yes

[14:53:20.0000] <Hixie>
e.g. if setTimeout(window.open, ...)

[14:53:25.0000] <heycam>
can we factor out the non-script-ish things from it?

[14:53:31.0000] <GPHemsley>
Hixie: Were there other terms besides "file" and "resource" that you thought were dangerous?

[14:53:43.0000] <Hixie>
heycam: it is already

[14:53:49.0000] <heycam>
ok I'll look again

[14:53:52.0000] <heycam>
/me back in a couple of mins

[14:54:07.0000] <Hixie>
heycam|away: i'll comment on the bug

[14:54:13.0000] <Hixie>
and reassign it to you

[15:00:36.0000] <Hixie>
heycam|away: so, one oddity is we probably want to handle callbacks that are callbacks into scripts differently than callbacks that are into native methods

[15:01:01.0000] <heycam>
Hixie, differently in what way?

[15:02:23.0000] <Hixie>
well, if you call setTimeout(window.open) from a script that's imported from a different origin, and for some reason there's some exception raised, you want the exception to have muted errors. But if you call setTimeout(foo) where foo is a script in the page's origin, even if the calling script was fetched from another origin, you want the exceptions to not be muted

[15:02:46.0000] <Hixie>
(all the script origins here are the same, it's just a matter of whether the script comes from another origin or not in the <script src="">)

[15:04:04.0000] <Hixie>
also, if you're calling an actual script as your callback, you likely want it to be a new entry script, but if it's a call to a native method, i guess we dont' want a new entry script?

[15:04:32.0000] <heycam>
the former is something that comes up with Web Components I guess?

[15:04:45.0000] <heycam>
for the latter, I'm not sure what a new script entry entails

[15:05:10.0000] <Hixie>
the former comes up in regular pages

[15:05:36.0000] <Hixie>
<script src="foo.js"> exceptions are fine, <script src="http://anothersite.example.com/foo.js"> the exceptions are muted (don't give line number information)

[15:06:37.0000] <Hixie>
for the latter: the stack of incumbent scripts is used to determine two things, the "entry script" and the "incumbent script". The "entry script" is the "bottom" of the stack, and incumbent the top. The "entry script" is used sometimes to e.g. determine what the base URL should be, other times we use the incumbent scripts (especially for security checks)

[15:07:27.0000] <heycam>
I see

[15:10:02.0000] <heycam>
anyway, I'll await your comment on the bug

[15:12:45.0000] <Hixie>
heycam: well, i'm not sure what to suggest, because i can't work out how you can tell if the callback "is a script" or not

[15:14:19.0000] <heycam>
Hixie, I could inspect it at the time the JS Function value gets converted to the IDL type

[15:14:31.0000] <heycam>
and associate that information with the IDL callback object

[15:15:01.0000] <Hixie>
heycam: how would we phrase it? i don't even know how to describe it

[15:15:12.0000] <Hixie>
heycam: JS doesn't have this concept of something being a script, per se

[15:15:13.0000] <heycam>
Hixie, well I've already got this term "initial objects"

[15:15:24.0000] <heycam>
which represents all of the objects that exist due to IDL things

[15:15:46.0000] <heycam>
I could just check whether it is an initial object

[15:16:01.0000] <heycam>
means the same as "if this is a Function object that corresponds to an IDL operation, IDL attribute getter, ......."

[15:16:49.0000] <Hixie>
http://www.hixie.ch/tests/adhoc/html/script/callbacks/001.html

[15:21:12.0000] <heycam>
Hixie, am I reading that right and the testParentTimeout case is weird?

[15:21:31.0000] <Hixie>
reload

[15:21:34.0000] <Hixie>
i edited it after posting the url

[15:22:25.0000] <Hixie>
the first two buttons demonstrate the simple case of "entry script" being a thing

[15:22:51.0000] <heycam>
one of your button captions needs updating

[15:23:00.0000] <Hixie>
reload

[15:23:30.0000] <Hixie>
the next two buttons show that it's using the settings object of the setTimeout method, when you start from setTimeout

[15:23:33.0000] <Hixie>
which i didn't expect

[15:23:42.0000] <Hixie>
at least in chrome

[15:24:01.0000] <Hixie>
ah, firefox is differnet

[15:24:03.0000] <Hixie>
interesting

[15:24:39.0000] <heycam>
third last and second last buttons are different in chrome/firefox

[15:27:23.0000] <Hixie>
looks like chrome just uses the settings object of the method being called, in the case of window.open

[15:27:42.0000] <Hixie>
but both chrome and firefox do make it an entry script regardless

[15:28:07.0000] <heycam>
so no oddity difference needed?

[15:28:08.0000] <Hixie>
er, sorry, s/chrome/firefox/ in my last but one comment

[15:28:23.0000] <Hixie>
well, we have to figure out what the script should be

[15:28:51.0000] <Hixie>
they're both interesting models

[15:28:57.0000] <Hixie>
neither is particularly convenient for us

[15:29:12.0000] <Hixie>
wonder what IE does

[15:30:35.0000] <Hixie>
safari is different than chrome?

[15:31:33.0000] <Hixie>
wtf is safari doing

[15:34:31.0000] <Hixie>
ok IE just takes the biscuit

[15:34:36.0000] <Hixie>
IE9, anyway

[15:35:01.0000] <Hixie>
IE9 does inner, outer, inner, inner, and then for the last four buttons just doesn't open a window at all.

[15:35:26.0000] <Hixie>
i guess that means window.setTimeout(window.open) doesn't work at all in IE

[15:35:26.0000] <Hixie>
that would certainly make our life easier...

[15:35:34.0000] <heycam>
:)

[15:35:58.0000] <heycam>
can I leave you to work out what to do here and you can tell me what info I need to pass into my HTML spec hook call?

[15:36:12.0000] <gsnedders>
window.setTimeout(window.open)? Do I even want to ask!?

[15:36:17.0000] <heycam>
and if I need to distinguish between native/JS functions, I can do that

[15:36:41.0000] <Hixie>
heycam: sure

[15:36:52.0000] <Hixie>
i probably won't finish today, at this rate


2013-11-07
[22:54:16.0000] <cortexA9>
hi

[23:57:04.0000] <zcorpan>
jgraham: does trickle(d1) send the headers immediately?

[00:16:28.0000] <Ms2ger`>
So it was true that FB was going to do Presto!

[00:16:31.0000] <Ms2ger`>
https://news.ycombinator.com/item?id=6684318

[00:58:07.0000] <hsivonen>
oh, cool. utf-16le is now the name of the encoding and utf-16 is a label

[00:58:17.0000] <hsivonen>
this has changed recently, right?

[00:58:27.0000] <hsivonen>
anyway, I'm less annoyed now

[01:32:25.0000] <annevk-cloud>
Yeah was changed

[03:00:47.0000] <annevk>
So GPHemsley, should http://wiki.whatwg.org/wiki/New_work become a subpage too then?

[03:02:46.0000] <annevk>
GPHemsley: your spelling of acknowledgments disagrees with all my specs

[03:04:28.0000] <MikeSmith>
fwiw about setting up a way to get RF agreements for whatwg specs, I notice that the Dash Industry Forum is using a relatively lightweight means to get RF agreemenents for code contributions to the dash.js library. see https://github.com/Dash-Industry-Forum/dash.js/wiki/How-to-Contribute#process-for-contributing-code and, e.g., https://groups.google.com/forum/#!topic/dashjs/W4Tmm8sBGX0

[03:05:32.0000] <MikeSmith>
it's for code, not specs, but it seems like the same thing could be used for spec contributions

[03:06:08.0000] <MikeSmith>
in fact, they actually just call it a "Feedback Agreement"

[03:06:16.0000] <MikeSmith>
http://dashif.org/documents/DASH-IF-Feedback-Agreement-5-9-2013.pdf

[03:06:47.0000] <MikeSmith>
"By signing below, you (on behalf of yourself if you are an individual and your company if you are providing Feedback on behalf of the company) grant the companies under all applicable intellectual property rights owned or controlled by you or your company a non-exclusive, non-transferable, worldwide, perpetual, irrevocable, royalty-free license to use, disclose, copy, publish, license, modify, sublicense or otherwise distribute and exploit Feedback yo

[03:46:25.0000] <MikeSmith>
I'm trying to remember if there's data somewhere on how many documents on the Web are actually being served with an XML MIME type

[03:47:38.0000] <MikeSmith>
I mean documents with an XHTML doctype served with an XML MIME type instead of as text/html

[04:15:04.0000] <MikeSmith>
/me finds http://dev.opera.com/articles/view/mama-http-headers/#conttype

[04:16:01.0000] <MikeSmith>
'Of the 3,509,180 URLs that MAMA analyzed, the vast majority (~99.9%) used a "text/html" MIME type'

[05:21:01.0000] <annevk>
MikeSmith: I hope you're just doing that because you're curious and not because someone is saying something irrational

[05:22:49.0000] <MikeSmith>
umm, I wish I could claim it was because someone isn't saying something irrational, so let's just go with "curious"

[05:28:01.0000] <annevk>
You know it's bad when you have to revisit a decade old fact-settled debate.

[05:31:02.0000] <hsivonen>
annevk: speaking of those: http://lists.suckless.org/dev/1310/17874.html

[05:33:27.0000] <annevk>
hsivonen: gopher man, how do you find this stuff?

[05:33:41.0000] <hsivonen>
annevk: hendry tweeted it at me

[05:33:45.0000] <annevk>
haha

[05:35:49.0000] <hsivonen>
I wonder if I should add telemetry for those font-only legacy Mac encodings

[05:36:29.0000] <annevk>
To see if the font code path is being hit?

[05:36:35.0000] <hsivonen>
annevk: right

[05:36:56.0000] <hsivonen>
maybe I should add telemetry for legacy stuff that Thunderbird might use, too

[05:37:12.0000] <annevk>
Is there any Mac OS out there that still needs that?

[05:37:25.0000] <annevk>
That Gecko supports?

[05:37:33.0000] <hsivonen>
annevk: I have no idea what fonts people have installed

[05:37:45.0000] <annevk>
Ooh, it's not an OS thing, it's a fonts thing?

[05:37:48.0000] <annevk>
Ew...

[05:38:06.0000] <hsivonen>
annevk: it's for making sense of data in legacy font files

[05:39:14.0000] <annevk>
I guess that does warrant investigation of sorts. Alternatively investigation of the Chrome code base which almost certainly does not do this. (They don't have those encoders/decoders at the Chromium level.)

[06:24:05.0000] <GPHemsley>
annevk: Yeah, there are a few more pages that should probably become subpages.

[06:43:16.0000] <GPHemsley>
Any chance we could start encouraging subject prefixes on the mailing list, like CSS and others do? (I know I do it with mimesniff.)

[06:45:25.0000] <zewt>
how about "Subject: "

[06:46:01.0000] <annevk>
GPHemsley: no

[06:46:42.0000] <GPHemsley>
why?

[06:46:45.0000] <annevk>
A lot of topics encompass lots of different specifications. We should not add bureaucracy that isn't needed.

[06:47:22.0000] <GPHemsley>
You have a low bar for what is considered "bureaucracy"

[06:47:50.0000] <annevk>
Yes

[06:48:15.0000] <annevk>
Everything that's a "rule" basically.

[06:48:40.0000] <annevk>
Don't need people that want to contribute to have to go through more rules than strictly needed.

[06:49:05.0000] <annevk>
It's already too hard for a bunch of them.

[06:49:40.0000] <GPHemsley>
On the flipside, it's hard for me to figure out what mail to read ;)

[06:50:18.0000] <Ms2ger>
All of it ;)

[06:50:35.0000] <GPHemsley>
Ms2ger: Do you really what my unqualified opinion on everything? ;)

[06:50:40.0000] <GPHemsley>
s/what/want/

[06:51:04.0000] <Ms2ger>
I want you to read it, not necessarily to reply ;)

[06:51:05.0000] <darobin_>
GPHemsley: I think the hidden message there is that annevk doesn't want to contribute :)

[06:51:27.0000] <jgraham>
Not sure that reading every mail means responding to everything

[06:51:43.0000] <GPHemsley>
jgraham: 'Twas hyperbole ;)

[06:51:55.0000] <jgraham>
/me doesn't read every mail, but also doesn't want more rules for the sake of it

[06:52:54.0000] <darobin>
I find that if people use meaningful subjects you don't need a prefix

[06:53:03.0000] <annevk>
GPHemsley: I recommend reading the subjects that interest you

[06:53:06.0000] <annevk>
darobin: indeed

[06:53:08.0000] <darobin>
whereas people tend to get prefixes wrong, especially if there are more than two different ones

[06:53:31.0000] <annevk>
I'd be okay with a "use meaningful subjects" guideline, just like we have a "inline quote" guideline

[06:53:48.0000] <darobin>
that just falls under proper netiquette really

[06:53:54.0000] <annevk>
Yeah

[06:54:52.0000] <darobin>
maybe just training the spam filter to drop emails with poor netiquette would achieve excellent signal to noise

[07:11:48.0000] <SimonSapin>
This is nice Frenglish: "Initialized empty Dépôt git dans /home/simon/projects/specs/html/.git/"

[07:12:31.0000] <Ms2ger>
Why would you use a French OS

[07:13:43.0000] <SimonSapin>
old habits

[09:07:01.0000] <zcorpan>
anyone know about in-browser ITS tools?

[09:08:54.0000] <miketaylr>
ITS?

[09:11:15.0000] <zcorpan>
/me -> beijing -> shenzhen

[09:13:15.0000] <Hixie_>
wtf, a bunch of characters in the multipage acks got corrupted

[09:14:17.0000] <Hixie_>
oh i bet the problem is that some parser doesn't supported named references

[09:14:25.0000] <Hixie_>
annnnnnneeeeeeeeeeeeee

[09:28:25.0000] <marcosc>
heh, I was also going to curse Anne for something different :)

[09:33:43.0000] <jorendorff>
Domenic_: are microtasks going to be spec'd in ES6, and is there already draft text for it?

[09:36:38.0000] <Hixie_>
oh, if ES6 is gonna spec them that would make my life easier

[09:36:47.0000] <Hixie_>
/me is currently deep in the middle of trying to figure out how to spec them in HTML

[09:41:27.0000] <jsbell>
jorendorff/Hixie: relevant (short) thread is https://mail.mozilla.org/pipermail/es-discuss/2013-October/033940.html

[09:42:33.0000] <jorendorff>
"easier"; "short"

[09:42:53.0000] <jorendorff>
OK, my real question was: how deterministic is the ordering of microtasks?

[09:43:43.0000] <Hixie_>
well i presume they're just going to provide hooks for HTML to use

[09:43:58.0000] <Hixie_>
it's not like they can actually embed the event loop directly into ES6, given how much HTML-specific crap is around the event loop

[09:44:06.0000] <jorendorff>
mmhmm

[09:44:11.0000] <Hixie_>
(e.g. when the event loop starts, etc)

[09:44:19.0000] <Hixie_>
(how it's used for non-script-related stuff)

[09:55:28.0000] <Hixie_>
today's monster is http://www.hixie.ch/tests/adhoc/html/script/callbacks/001.html

[10:00:35.0000] <Hixie_>
anyone got IE11 around?

[10:03:52.0000] <dglazkov>
good morning, Whatwg!

[10:36:55.0000] <annevk-cloud>
I can maybe fix bugs from China, otherwise in 10 days.

[10:37:28.0000] <annevk-cloud>
On the tube at the moment with no place to sit. Shit's clogged.

[10:39:59.0000] <annevk-cloud>
ES6 will just have a hook btw

[10:40:42.0000] <Hixie_>
if you're in an iframe and you call parent.setTimeout(parent.open, 0, 'a') -- should the 'a' be resolved relative to your own base URL, or should it be resolved relative to the parent's base URL?

[10:41:29.0000] <Hixie_>
everyone (except IE, which won't accept that construct at all) agrees it should be the parent's base URL, but nobody agrees as to why

[10:41:43.0000] <Hixie_>
in chrome it's because the setTimeout is from the parent

[10:42:04.0000] <Hixie_>
in firefox it's because the argument isn't a script but the argument comes from the parent

[10:42:16.0000] <Hixie_>
and in safari it's because the argument isn't a script but the setTimeout comes from the parent

[10:43:23.0000] <Hixie_>
firefox's answer is inconvenient since it would mean figuring out what global to use when you pass e.g. MessagePort.send to setTimeout

[10:43:57.0000] <Hixie_>
chrome's answer is lame because it means if you do parent.setTimeout(myownfunc, ...), myownfunc is going to resolve relative to the parent instead of relative to itself

[10:44:22.0000] <Hixie_>
seems crazy that you could change how a function works based on who's setTimeout you use

[10:44:59.0000] <Hixie_>
then again, it's already true that if you call a function in the parent frame directly, you change how it behaves relative to it being called by script in that frame...

[10:45:29.0000] <Ms2ger>
How about window.setTimeout.call(parent,...? :)

[10:45:48.0000] <Hixie_>
not sure i want to know

[10:46:15.0000] <Hixie_>
i assume that's the same as parent.setTimeout, at the webidl level

[10:46:16.0000] <Hixie_>
am i wrong?

[10:46:22.0000] <Ms2ger>
I'd hope so

[10:47:47.0000] <Hixie_>
let's assume so for the sake of this discussion

[10:49:34.0000] <Hixie_>
wait, safari's behaviour still requires answering the question above. damnit.

[11:42:46.0000] <Domenic_>
Hixie_: jorendorff: annevk-cloud: yeah my impression is there will be some abstract operation "queue a microtask" which ES uses, and doesn't actually specify how it works, besides maybe some invariants like clean-stack or ordering or something.

[12:00:20.0000] <jorendorff>
clean-stack, definitely; ordering is what i'm after... hmm.

[12:00:36.0000] <jorendorff>
i'll assume it's mostly deterministics

[12:16:35.0000] <annevk-cloud>
It will be deterministic jorendorff

[12:17:03.0000] <jorendorff>
ok!

[12:17:25.0000] <jorendorff>
Domenic_: i was able to remove all direct interaction with microtasks from the module loader stuff by using promises instead

[12:18:23.0000] <jorendorff>
Domenic_: little worried i'm not doing it right -- that spec is impenetrable, to me -- but i guess the bugs will shake out one stuff runs

[12:18:28.0000] <jorendorff>
*once

[14:08:07.0000] <Hixie_>
heycam!

[14:08:15.0000] <Hixie_>
so i've been studying browsers

[14:08:40.0000] <Hixie_>
http://www.hixie.ch/tests/adhoc/html/script/callbacks/001.html has my results and conclusions (see bottom)

[14:09:41.0000] <heycam>
oh my

[14:09:56.0000] <Hixie_>
yeah.

[14:10:41.0000] <Hixie_>
so the only real question that no browsers agrees with is how to determine the entry script (actually, the "settings object", i'll explain what i mean in the bug later) for cases where you call a method with a native method as the callback

[14:10:47.0000] <Hixie_>
as in setTimeout(open, ...)

[14:11:04.0000] <Hixie_>
there are several options:

[14:11:09.0000] <Hixie_>
1. we don't support that (IE9)

[14:11:43.0000] <Hixie_>
2. we use the data from the global of the method you called (setTimeout in this case) (Chrome, Safari)

[14:11:58.0000] <Hixie_>
3. we use the data from the global of the method you passed as a callback (open in this case) (Firefox)

[14:12:05.0000] <Hixie_>
4. we do our own new thing in the interests of sanity

[14:12:30.0000] <heycam>
to me, 3 sounds like it is more sensible

[14:12:34.0000] <Hixie_>
(btw Chrome and Safari are incompatible for the more common case of passing a script-defined function, so don't put too much in the fact that they agree on this question)

[14:12:42.0000] <heycam>
i.e. you look at the thing you will be invoking later

[14:12:54.0000] <Hixie_>
#2 and #3 have a problem: do we have a way to determine what "global" any random method is related to?

[14:13:01.0000] <heycam>
yes

[14:13:08.0000] <Hixie_>
oh excellent

[14:13:16.0000] <heycam>
Web IDL says every "initial object" is associated with a particular "global environment"

[14:13:26.0000] <Hixie_>
initial object is like the method?

[14:13:31.0000] <Hixie_>
what's a "global environment"?

[14:13:37.0000] <heycam>
yeah, it's basically all of the objects that exist before you run any scripts

[14:13:44.0000] <heycam>
(apart from the ES-defined ones)

[14:13:53.0000] <heycam>
"global environment" is something a bit fuzzy

[14:13:56.0000] <Hixie_>
so what if someone passes an ES-defined one?

[14:14:07.0000] <Hixie_>
like, toString

[14:14:30.0000] <heycam>
I guess my definition won't help there… maybe there is one in the ES spec?

[14:14:40.0000] <heycam>
not sure if the spec has begun to talk about realms yet or not

[14:14:45.0000] <Hixie_>
last i checked, the ES spec didn't acknowledge multiple globals

[14:14:57.0000] <Hixie_>
but i may not have checked for a while

[14:15:01.0000] <heycam>
http://people.mozilla.org/~jorendorff/es6-draft.html#sec-code-realms

[14:15:16.0000] <heycam>
ok so you can go from the toString object to the realm

[14:15:31.0000] <Hixie_>
what does the realm give you?

[14:15:38.0000] <heycam>
that table of things

[14:15:47.0000] <heycam>
including the global object

[14:15:52.0000] <Hixie_>
a global, we can use that

[14:16:43.0000] <Hixie_>
well if you can get from any random method (script-defined, ES-defined, or WebIDL-defined) to a global, i can do the rest

[14:17:03.0000] <heycam>
I can

[14:17:07.0000] <Hixie_>
ok, cool

[14:17:33.0000] <heycam>
whew! finally we can use style=""

[14:18:58.0000] <TabAtkins>
heycam: Hm?

[14:19:06.0000] <Hixie_>
hmmm... i need to move script origins to the settings object also

[14:19:14.0000] <heycam>
TabAtkins, sorry, just being facetious about http://www.w3.org/TR/2013/REC-css-style-attr-20131107/ becoming a Rec

[14:19:20.0000] <TabAtkins>
Ah, indeed.

[14:29:43.0000] <Ms2ger>
Time to deprecate style=""

[14:39:02.0000] <Hixie_>
i tried

[14:39:12.0000] <Hixie_>
people presented... compelling arguments

[14:39:43.0000] <Jasper>
i'm sure they did

[14:54:23.0000] <Hixie_>
TabAtkins: dunno if you're the right one to ask, but, are you on board with javascript: being killed in CSS url()s?

[14:54:36.0000] <TabAtkins>
I'm surprised those even work. Do they?

[14:54:39.0000] <TabAtkins>
Kill them.

[14:54:50.0000] <Hixie_>
probably not

[14:54:51.0000] <Hixie_>
ok

[14:55:04.0000] <Hixie_>
the plan is to move javascript: to just be a quirk of the navigate algorithm

[14:55:29.0000] <Hixie_>
i'm about to make the first move towards that, by removing the concept of scripts having origins, the bulk of which is concerned with defining the origin of javascript: scripts

[14:56:52.0000] <Hixie_>
christ, 1993 matches for "script" in the spec

[14:56:58.0000] <Hixie_>
this could take a while

[15:10:17.0000] <jorendorff>
Domenic_: interesting situation... the Loader's use of Promises is supposed to be kind of an implementation detail, unobservable

[15:10:46.0000] <jorendorff>
Domenic_: but at various points user scripts can screw us over by modifying the builtins

[15:11:20.0000] <jorendorff>
Domenic_: for example, CastToPromise calls GetDeferred which calls C.[[Construct]] which calls C[@@create], which is configurable

[15:11:28.0000] <jorendorff>
big ufn

[15:20:38.0000] <TabAtkins>
jorendorff: We're dealing with that too.  The solution seems to be to have some way to provide clean built-ins to browser JS.

[15:21:23.0000] <Hixie_>
that's basically what we do for all the other things that are defined in terms of author-visible features

[15:21:25.0000] <jorendorff>
TabAtkins: oh, dherman has designed an API for this:   new Realm

[15:21:37.0000] <jorendorff>
but all the methods are probably configurable

[15:21:47.0000] <Hixie_>
(though i've tended to just define things in terms of algorithms and then invoke the algorithms rather than the native features)

[15:22:00.0000] <Hixie_>
s/native/author-accessible/

[15:23:09.0000] <jorendorff>
that's what I'm used to (algorithms), but Promises are high-level enough that it starts to break down


2013-11-08
[18:39:54.0000] <zewt>
https://www.w3.org/Bugs/Public/show_bug.cgi?id=23766 yeah i really don't understand dom3 events at all

[18:40:26.0000] <zewt>
why is a web spec trying to define every vendor-proprietary key

[19:01:21.0000] <GPHemsley>
Anyone have any tips for getting a quick understanding of what is valid XSL?

[19:04:22.0000] <zewt>
*(char*)0

[19:04:51.0000] <GPHemsley>
/me thinks Hixie_ should give a course on how to write useful specs.

[19:05:54.0000] <GPHemsley>
This is the closest I've found to the XSL-related specs being useful: http://www.w3.org/TR/xmlschema-0/#index

[19:07:43.0000] <GPHemsley>
(You'd think XML would be pretty straightforward to document: elements, attributes, possible values—boom, done.)

[19:18:42.0000] <GPHemsley>
s/XSL/XSD/

[19:18:50.0000] <GPHemsley>
I don't know why I keep making that mistake.

[00:09:13.0000] <Ms2ger>
Hrm

[00:09:42.0000] <Ms2ger>
So what's [TreatUndefinedAs=Null] good for?

[00:21:29.0000] <Streusel>
Suggestion to add dc.title for metaextensions. Unless this is the wrong place & I misread it.

[00:50:39.0000] <MikeSmith>
can't seem to get to http://testthewebforward.org/ from here in Shenzhen

[00:51:02.0000] <MikeSmith>
great to see the Chinese censors got their priorities straight

[00:51:39.0000] <Ms2ger>
jgraham, check ^

[00:52:38.0000] <MikeSmith>
can get to http://w3cmemes.tumblr.com/ so there's at least one useful thing we'll be able to do while we're here

[00:54:08.0000] <wilhelm_>
MikeSmith: Confirmed. I've been on VPN all day, so I haven't noticed.

[00:59:13.0000] <MikeSmith>
wilhelm_: you know if jgraham and annevk-cloud have arrived?

[01:02:16.0000] <wilhelm_>
MikeSmith: No, don't know which flights they are on. I'm hanging out in the lobby, cursing the wifi.

[01:03:07.0000] <MikeSmith>
wilhelm_: Wuzhou lobby?

[01:03:32.0000] <wilhelm_>
Yup.

[01:05:40.0000] <MikeSmith>
I'll come down

[01:05:51.0000] <MikeSmith>
building A lobby?

[01:06:43.0000] <wilhelm_>
Uhh. Main lobby.

[01:06:47.0000] <wilhelm_>
The one in the middle.

[01:07:03.0000] <wilhelm_>
jgraham and AutomatedTester just walked in the door.

[01:08:40.0000] <MikeSmith>
party time

[01:09:24.0000] <Ms2ger>
Say hi to them, then

[01:09:58.0000] <zcorpan>
/me is now at the guest house

[01:16:39.0000] <zcorpan>
i guess i'll walk down and see if i can find someone i recognize

[01:18:06.0000] <annevk-cloud>
MikeSmith: belt seven

[01:18:34.0000] <annevk-cloud>
In HK...

[01:30:38.0000] <annevk-cloud>
Ms2ger: I already filed a bug to kill TreatAsUndefined

[01:34:15.0000] <MikeSmith>
annevk-cloud: you coming to Wuzhou after you arrive?

[01:34:29.0000] <MikeSmith>
some kind of meetup planned for 8pm

[01:35:21.0000] <annevk-cloud>
Hopefully I can make that!

[01:36:12.0000] <hsivonen>
looks like IRC works from China, then

[01:38:06.0000] <MikeSmith>
hsivonen: yeah

[01:40:31.0000] <zcorpan>
no dice

[01:40:45.0000] <wilhelm_>
zcorpan: Some of us are in the sofas in the lobby.

[01:40:48.0000] <wilhelm_>
Squatting.

[01:41:14.0000] <zcorpan>
the lobby next to the reception in A?

[01:41:59.0000] <wilhelm_>
Main lobby. I guess that's A.

[01:42:26.0000] <zcorpan>
i looked there twice, i guess you must be hiding pretty well

[01:42:48.0000] <wilhelm_>
Yellow sofas.

[01:43:55.0000] <zcorpan>
ok i'll try again

[01:55:14.0000] <sangwhan__>
Don't try to walk out of the hotel, seems to lead straight to some expressway. Almost got killed.

[02:02:41.0000] <hsivonen>
/me makes a mental note of the "other factors" euphemism for prospective Membership fees

[02:04:31.0000] <MikeSmith>
hsivonen: where's that from? the page about Membership fees I guess?

[02:08:53.0000] <hsivonen>
MikeSmith: https://twitter.com/w3c/status/398748409018208256

[02:14:38.0000] <jgraham>
Hmm, I don't think  twitter resolves

[02:15:05.0000] <jgraham>
Actually, that's not true it's just timing out

[02:15:38.0000] <hsivonen>
jgraham: the tweet says "@hsivonen We get it. A W3C Host opened there in Jan. Other factors led to holding #TPAC in China; that Twitter is blocked wasn't one of them"

[03:20:28.0000] <MikeSmith>
annevk-cloud: when you arrive at the Wuzhou, a bunch of us are at the lobby restaurant, straight back from the front entrance

[04:05:10.0000] <smaug____>
annevk-cloud: ping

[04:05:16.0000] <smaug____>
annevk-cloud: are you familiar with https://dvcs.w3.org/hg/webperf/raw-file/tip/specs/Beacon/Overview.html ?

[04:06:06.0000] <smaug____>
/me kind of likes that idea

[04:06:22.0000] <smaug____>
but sendBeacon should be mapped somehow to XHR.send

[04:51:19.0000] <annevk-cloud>
MikeSmith: just got to my hotel, still worth it?

[04:51:26.0000] <MikeSmith>
yeah

[04:52:00.0000] <MikeSmith>
annevk-cloud: we just finishing dinner now, and there's some TestTWF thing upstairs we going to from here

[04:54:21.0000] <MikeSmith>
Huaxia Hall

[04:54:38.0000] <MikeSmith>
ah now

[04:54:41.0000] <MikeSmith>
*no

[04:55:00.0000] <MikeSmith>
that's wrong

[04:55:01.0000] <MikeSmith>
Longzhou Room

[04:55:36.0000] <MikeSmith>
is the place

[04:58:10.0000] <annevk-cloud>
Okay, going to find some money and a cab

[04:58:33.0000] <annevk-cloud>
Oh, and I guess the name of the hotel in Chinese

[05:02:53.0000] <MikeSmith>
annevk-cloud: hang on, will get it for you

[05:05:04.0000] <Ms2ger>
Ohai guys: http://i.imgur.com/57yCyrh.jpg

[05:13:10.0000] <MikeSmith>
annevk-cloud: 深圳市五洲宾馆

[05:17:50.0000] <MikeSmith>
Ms2ger: nice to have something to look forward to

[05:21:36.0000] <annevk-cloud>
Thanks, going nowish.

[05:57:43.0000] <sangwhan__>
dbaron: 华强北 (hua chang bay) and 赛格广场 (sei ger guang chang) are the keywords you want (romanization might be incorrect, i don't speak chinese)

[06:03:33.0000] <hsivonen>
good thing https://bugzilla.mozilla.org/show_bug.cgi?id=214729 was WONTFIXed

[07:01:13.0000] <SteveF>
marcosc: don't mess with Ms2ger's module

[07:02:03.0000] <marcosc>
heh

[07:02:14.0000] <marcosc>
Who is the module owner anyway?

[07:12:23.0000] <Ms2ger>
jst/peterv

[07:12:44.0000] <Ms2ger>
SteveF, not mine... I learned not to wontfix bugs the same way :)

[07:15:54.0000] <SteveF>
Ms2ger: comment was driven by alliteration Mess Ms2ger Module

[09:27:50.0000] <dglazkov>
good morning, Whatwg!

[09:42:19.0000] <GPHemsley>
Is there no element selector in Chrome Inspector?

[09:43:34.0000] <Ms2ger>
/me thinks zcorpan got his time zones wrong

[10:08:42.0000] <karlcow>
are there any browsers reading the "type" information in <link rel="icon" type="blah" />?

[10:08:42.0000] <karlcow>
My initial gut is none.

[10:12:52.0000] <GPHemsley>
/me thinks that would fall under the purview of mimesniff

[10:13:05.0000] <GPHemsley>
but I don't know the answer offhand

[10:32:41.0000] <jorendorff>
there should be a Promise.nowThen(f), equivalent to Promise.fulfill(undefined).then(f)

[10:32:55.0000] <Hixie_>
nowThen nowThen

[10:32:59.0000] <Hixie_>
what's all this then

[10:33:08.0000] <Hixie_>
/me shows himself out

[10:33:09.0000] <TabAtkins>
jorendorff: What would that do?

[10:34:57.0000] <jorendorff>
TabAtkins:  .then() is a good API, it would be nice to have an extremely similar API to use when I'm creating a new Promise from scratch

[10:35:29.0000] <TabAtkins>
That's just Promise.fulfill(f())

[10:35:50.0000] <jorendorff>
well, no, because f may throw

[10:35:59.0000] <TabAtkins>
Ah, I see.

[10:36:43.0000] <jorendorff>
the Promise constructor -- i can see why that is necessary, but those state-mutate-y functions, it's pretty weird using them in combination with the rest of the API which is all combinator-y

[10:37:48.0000] <TabAtkins>
Yeah, and you can't easily use Promise(f), because f needs to affirmatively resolve the promise with its return value. (But the throwing possibility is taken care of automatically.)

[10:38:01.0000] <TabAtkins>
Promise.fulfill().then(f) works, of course.

[10:38:05.0000] <jorendorff>
yeah

[10:38:32.0000] <TabAtkins>
Promise.call(f)

[10:38:39.0000] <TabAtkins>
Suggest it as sugar on the repo.

[10:38:50.0000] <TabAtkins>
Wait no, that doesn't work, because Promise is already a function. ^_^

[10:38:58.0000] <Domenic_>
Promise.try is the traditional name.

[10:38:59.0000] <jorendorff>
heh! good catch :)

[10:39:09.0000] <TabAtkins>
Domenic_: Sure, that sounds good.

[10:39:19.0000] <Domenic_>
Pretty sure there's already a closed issue for that

[10:39:41.0000] <Domenic_>
I have an interesting data point on DRM

[10:40:16.0000] <Domenic_>
I am on client site for a top-5 US bank. They need training videos in their web app (which they are selling to many other banks).

[10:40:32.0000] <Domenic_>
When presented with the choice between flash + encryption or HTML5 + no encryption, they said HTML5 was a no-brainer

[10:40:40.0000] <Domenic_>
They would just protect the videos with login etc.

[10:41:11.0000] <Domenic_>
(story over)

[10:41:32.0000] <TabAtkins>
Yeah, because that's the *right answer*.

[10:41:35.0000] <TabAtkins>
But cool to hear. ^_^

[11:36:58.0000] <GPHemsley>
Why can't I get a ::before pseudo-element to not inherit text-decoration? ;_;

[11:45:25.0000] <Hixie_>
GPHemsley: it isn't inheriting it

[11:45:30.0000] <Hixie_>
GPHemsley: it's just being drawn by the parent

[11:45:35.0000] <Hixie_>
across all its children

[11:45:43.0000] <GPHemsley>
but I can't undo it, even with !important

[11:46:54.0000] <Hixie_>
it's not inherited at all, so, yeah

[11:47:00.0000] <Hixie_>
there's nothing to undo

[11:48:47.0000] <GPHemsley>
so how do I do what I want?

[11:53:26.0000] <Hixie_>
GPHemsley: you want to underline the contents of the element and not underline its ::before contents?

[11:53:39.0000] <GPHemsley>
line-through, but yeah

[11:53:46.0000] <Hixie_>
GPHemsley: i don't think that's possible without either my elaborate ::outside stuff, or extra elements in the DOM

[11:54:02.0000] <GPHemsley>
why?? ;_;

[12:37:35.0000] <TabAtkins>
GPHemsley: text-decoration doesn't inherit.  Text decorations do, in a separate inheritance mechanism.

[12:37:50.0000] <TabAtkins>
There are values in Text Decor that suppress decorations coming from your ancestors.

[13:15:43.0000] <jorendorff>
Domenic_: would you mind joining #jslang on irc.mozilla.org?

[14:30:47.0000] <Hixie_>
TabAtkins: one option for the img thing that might be better than src-* or scripts or srcset is to have a way to declare how you pick images in general, which you could stash in a block in the <head>, and then you wouldn't need to repeat all the details in each <img> but could still prime the preloaer appropriately

[14:33:52.0000] <TabAtkins>
Hixie_: Yeah, I've been over this in my head, and I can't come up with a way to program the preloader that's sufficiently general to accomplish what src-N does, let alone goes further.

[14:34:24.0000] <Hixie_>
well, you can move most of the logic from src-n to the preloader, right? i mean, in practice, there's gonna be a lot of replication

[14:34:48.0000] <Hixie_>
even if it was just to declare a "template", basically, and then srcfoo="" could just invoke a template and then list the urls to put into that template

[14:41:06.0000] <TabAtkins>
Problem is that you can't *just* provide extraction logic. You need to have sufficient primitives to program it with so it can *decide* which to load.

[14:45:28.0000] <Hixie_>
TabAtkins: sure. i'm saying move from <img srcset="foo 2x, bar 1x"> to some block that declares a simple template taking two URLs and mapping them to 2x and 1x respectively, and then <img srcfoo="foo bar">

[14:45:58.0000] <Hixie_>
TabAtkins: obviously with one image it's not great, but with a huge grid of images on some complex multi-"breakpoint" layout, it'd be a huge win

[14:46:09.0000] <Hixie_>
no need for multiple attributes per element, for example

[15:02:50.0000] <TabAtkins>
Hixie_: Right, but what *I'm* saying is that that's not enough.  You lose the ability to MQ. You lose the compactness and readability of the Variable-Sized Images grammar.

[15:03:13.0000] <TabAtkins>
You keep trying to solve the problems you were presented with back when you wrote srcset, and discounting the use-cases that have been collected since. :/

[15:03:23.0000] <TabAtkins>
Those earlier problems are easy.

[15:03:32.0000] <Hixie_>
i'm not trying to solve any problems right now except the extreme ugliness of src-* :-)

[15:04:03.0000] <Hixie_>
i don't see why you lose any of those abilities

[15:04:08.0000] <Hixie_>
i'm saying keep the same abilities

[15:04:22.0000] <Hixie_>
just factor them out so you don't have to keep repeating them

[15:17:26.0000] <Hixie_>
anyone got IE around able to test http://www.hixie.ch/tests/adhoc/html/script/callbacks/002.html for me?

[15:27:12.0000] <annevk>
Hixie_: you should really get VMWare :-)

[15:27:42.0000] <annevk>
0: outer

[15:27:59.0000] <annevk>
1: inner

[15:28:07.0000] <annevk>
2: inner

[15:28:48.0000] <annevk>
3: nothing happens

[15:29:04.0000] <annevk>
4: nothing happens

[15:29:49.0000] <annevk>
For both 3 and 4 I get this in the console:

[15:29:55.0000] <annevk>
> SCRIPT65535: Invalid calling object

[15:29:55.0000] <annevk>
> 002a.html, line 1 character 1

[15:30:26.0000] <annevk>
Hixie_: this is on IE10, Windows 7

[15:30:46.0000] <Hixie_>
thanks

[15:31:20.0000] <annevk>
Hixie_: also, your cute ASCII art made this take longer :p

[15:31:27.0000] <Hixie_>
why?

[15:31:41.0000] <annevk>
Hixie_: distraction :-)

[15:31:46.0000] <Hixie_>
it's supposed to make it way quicker, since you can just recognise which it is without reading

[15:32:04.0000] <Hixie_>
(try 001.html instead... it has 33 subtests, so you get tired of reading pretty quick)

[15:32:18.0000] <annevk>
hah, I guess if you looked at things for a while, but I only got 3 actual result pages

[15:33:00.0000] <Hixie_>
yeah, for 002 it's not a big deal. i just copied the 'a's from 001

[15:38:40.0000] <TabAtkins>
Hixie_: I can't tell if you don't understand the problem, or are trying to say something subtle. Please explain how a template + preloader instructions can handle literally anything more complex than "list of sources and densities".

[15:40:00.0000] <TabAtkins>
More properly, as far as I can tell, you don't understand what src-N does, so your suggestions are intentionally too weak because you think that's all that's necessary.

[15:40:04.0000] <coldwind>
annevk-cloud: are you around?

[15:40:17.0000] <coldwind>
annevk-cloud: could you look at this path for the URL spec? https://github.com/smola/url/commit/00f0abd934f619e86281083466b65d23cc3f23cc

[15:40:33.0000] <coldwind>
it seems to me the parsing rules can be simplified a little bit

[15:40:36.0000] <Hixie_>
TabAtkins: say proposal A results in markup of the form "AAA 111 BBB 222 CCC 333". You could form a different proposal that results in markup of the form "AAA BBB CCC" "111 222 333" with no loss of generality.

[15:40:44.0000] <coldwind>
patch*

[15:41:06.0000] <TabAtkins>
Hixie_: So yes, you're assuming that all we need to solve is "list of sources with densities", which is not correct.

[15:41:28.0000] <coldwind>
annevk-cloud: forget it :p

[15:41:35.0000] <Hixie_>
TabAtkins: the statement i just made applies to pretty much any feature, it's not specific to images or anything.

[15:41:58.0000] <TabAtkins>
The problem with src-N is *not* "I have to repeat the densities multiple times".

[15:42:04.0000] <TabAtkins>
But that's what you're solving.

[15:42:15.0000] <Hixie_>
i don't know why you keep mentioning densities, they're not relevant to my argument?

[15:42:43.0000] <TabAtkins>
I'm trying to figure out how your argument is relevant to what we're discussing by casting it to actual syntax and what authors would do.

[15:43:34.0000] <Hixie_>
TabAtkins: you'll typically have many images with very similar descriptions but different image files, right?

[15:43:40.0000] <Hixie_>
many <img>s

[15:43:48.0000] <TabAtkins>
"descriptions"?

[15:44:03.0000] <Hixie_>
by descriptions i mean method of picking one from many

[15:44:12.0000] <Hixie_>
media queries, srcset syntax, whatever

[15:44:28.0000] <Hixie_>
the stuff that isn't file names, that you put in src-* attributes.

[15:44:36.0000] <TabAtkins>
Oh, you're trying to solve something completely different - "multiple <img> elements use the same basic source patterns".

[15:44:50.0000] <TabAtkins>
Which is irrelevant for src-N discussions - it's an orthogonal problem.

[15:44:53.0000] <Hixie_>
as i said above, the problem i'm trying to solve is "img-* is incredibly ugly"

[15:44:58.0000] <Hixie_>
src-*, rather

[15:45:05.0000] <TabAtkins>
This doesn't do a thing for that problem.

[15:45:09.0000] <TabAtkins>
Literally nothing.

[15:45:38.0000] <Hixie_>
k

[15:46:43.0000] <TabAtkins>
(Also, note that most people's suggested "fix" for "src-N is ugly" is "jam them all into a single attribute with another level of delimiters".)

[15:48:03.0000] <Hixie_>
yeah, i don't think that's particularly gonna help :-)

[15:52:46.0000] <Hixie_>
annevk-cloud: actually, would be interesting to see if you got different results on 001 than i did with IE9


2013-11-09
[16:16:44.0000] <Hixie_>
heycam|away: yt?

[16:17:20.0000] <Hixie_>
i wonder why setTimeout(window.open) works but addEventListener('click', window.open) doesn't

[16:20:05.0000] <zewt>
Hixie_: works for me in chrome (opens a window against the URL "[object%20MouseEvent]")

[16:20:12.0000] <zewt>
against window.addEventListener

[16:20:18.0000] <Hixie_>
wow, really?

[16:20:19.0000] <Hixie_>
weird

[16:20:41.0000] <Hixie_>
what's your chrome://version say?

[16:20:48.0000] <zewt>
it's never really clear to me when "detaching" a member function of an object is supposed to work

[16:21:01.0000] <zewt>
a lot

[16:21:03.0000] <zewt>
29.0.1547.66 (Official Build 220848) m

[16:21:03.0000] <Hixie_>
mine is 32.0.1700.6 (Official Build 233388) dev

[16:21:06.0000] <Hixie_>
interesting

[16:21:13.0000] <Hixie_>
i guess they changed that recentlyish

[16:21:28.0000] <zewt>
like, i remember trying to do "foo = console.log; foo('bar')" and it not working

[16:21:37.0000] <zewt>
(which I understand, but it's weird that it *sometimes* works)

[16:21:42.0000] <Hixie_>
you need console.log.bind(console) probably

[16:21:48.0000] <zewt>
yeah i get that

[16:21:50.0000] <Hixie_>
otherwise you're calling window.log

[16:21:51.0000] <Hixie_>
or whatever

[16:21:56.0000] <Hixie_>
well, not really

[16:22:00.0000] <Hixie_>
but you know what i mean

[16:22:03.0000] <zewt>
well it's calling the function, but with no console bound to it

[16:22:06.0000] <zewt>
yeah

[16:22:18.0000] <zewt>
i guess with window.log the "default" behavior just happens to be the same thing (window), so it works?

[16:22:21.0000] <zewt>
er

[16:22:22.0000] <zewt>
window.open

[16:22:35.0000] <zewt>
(or sometimes works, anyway)

[16:22:47.0000] <Hixie_>
maybe? except it doesn't work for me anymore :-)

[16:22:52.0000] <Hixie_>
except in setTimeout, it works there...

[16:22:53.0000] <zewt>
right, "sometimes" :P

[16:22:58.0000] <Hixie_>
i should try binding it i guess

[16:23:03.0000] <Hixie_>
next time maybe

[16:23:06.0000] <zewt>
guess i'll restart chrome to let it update

[16:23:39.0000] <zewt>
now 30.0.1599

[16:23:54.0000] <zewt>
fwiw same thing in that version

[16:24:31.0000] <zewt>
same behavior in FF 23

[16:24:51.0000] <Hixie_>
i'm on ff25

[16:25:05.0000] <Hixie_>
and both throw for me

[16:25:35.0000] <zewt>
maybe we're not testing it the same way?

[16:25:42.0000] <zewt>
i'm just doing window.addEventListener("click", window.open) and clicking the page

[16:26:01.0000] <Hixie_>
oh, then you're testing on a window

[16:26:03.0000] <Hixie_>
i was testing on a button

[16:26:10.0000] <Hixie_>
   http://www.hixie.ch/tests/adhoc/html/script/callbacks/001.html

[16:26:11.0000] <Hixie_>
er

[16:26:14.0000] <Hixie_>
   http://www.hixie.ch/tests/adhoc/html/script/callbacks/002.html

[16:26:18.0000] <Hixie_>
buttons 4 and 5

[16:26:32.0000] <Hixie_>
if you test on a window, then yeah, the 'this' is probably the window

[16:26:35.0000] <Hixie_>
so it magically works

[16:26:35.0000] <zewt>
right

[16:26:53.0000] <Hixie_>
i commented on the bug https://www.w3.org/Bugs/Public/show_bug.cgi?id=19211 that i should update the test to bind()

[16:26:59.0000] <Hixie_>
will do that before changing the spec

[16:27:08.0000] <Hixie_>
probably monday

[16:28:02.0000] <zewt>
it makes sense that it would work on setTimeout (this == window) but not during event handling on a random element (this == some element)

[16:28:23.0000] <Hixie_>
yeah.

[16:28:28.0000] <Hixie_>
ok, gotta go.

[16:28:35.0000] <zewt>
have fun going

[17:45:31.0000] <annevk>
So all the script concepts have moved around... Note to self: when Hixie_ complaints about Fetch changes, toss this back at him ;P

[17:45:54.0000] <Hixie_>
this was required because the old stuff was wrong

[17:46:28.0000] <Hixie_>
(are you relying on this? i wasn't aware of anyone but webidl relying on it, and the changes were made to make webidl work better)

[17:47:21.0000] <annevk>
Hixie_: XMLHttpRequest relies on script's base URL, origin, and referrer source for workers

[17:47:44.0000] <annevk>
Hixie_: Notification in general relies on script's base URL

[17:47:54.0000] <Hixie_>
ah, hm, interesting

[17:47:54.0000] <jgraham>
zcorpan: https://critic.hoppipolla.co.uk/showcomment?chain=661

[17:48:04.0000] <Hixie_>
annevk: file a bug on me to give you updated text?

[17:48:16.0000] <annevk>
Hixie_: I'll figure it out and learn something new

[17:48:17.0000] <Hixie_>
annevk: (i wouldn't update yet, we're not 100% sure this is the end point yet)

[17:48:23.0000] <annevk>
Hixie_: ah okay

[17:48:52.0000] <Hixie_>
annevk: k. i should probably check your specs to make sure i'm not gonna break you, anyway

[17:49:05.0000] <Hixie_>
annevk: i'll file a bug

[17:50:19.0000] <Hixie_>
annevk: ok, filed https://www.w3.org/Bugs/Public/show_bug.cgi?id=23780 -- btw this might also affect DOM, with addEventListener and friends. we'll see. see also bug https://www.w3.org/Bugs/Public/show_bug.cgi?id=19211

[17:50:39.0000] <sangwhan__>
TTWF with completely broken wifi, http://software.intel.com/sites/default/files/wonrg_0.jpg

[17:55:25.0000] <zcorpan>
jgraham: replied

[17:56:41.0000] <sangwhan__>
jgraham: what's the ratio of critic based reviews for web-platform-tests compared to non critic reviews? (i've been hearing from a lot of people they don't like critic, and i'm pretty biased in that regard)

[17:58:26.0000] <zcorpan>
http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2626 hmmmm

[18:02:00.0000] <annevk>
Hixie_: interesting bug

[18:02:51.0000] <Hixie_>
that's one word for it

[18:04:03.0000] <annevk>
Took us about a decade to get here. But we're finally defining script architecture.

[18:10:20.0000] <jgraham>
sangwhan__: All the reviews I do are critic based at least. Who doesn't like it?

[18:10:44.0000] <jgraham>
Could find real stats I guess

[18:11:08.0000] <jgraham>
(I want to know so that we can figure out the issues, not to send round the heavies)

[18:14:01.0000] <annevk>
No The Last of US, and no Twitter to complain about it...

[18:17:30.0000] <zcorpan>
annoying when i can't decide which spec to file a bug against, html, svg, dom, selectors? https://www.w3.org/Bugs/Public/show_bug.cgi?id=23781

[18:22:05.0000] <annevk-cloud>
zcorpan: given that for DOM they are case-sensitive apart from a matching method I think that argues for Selectors

[18:22:42.0000] <annevk-cloud>
zcorpan: depends a bit on how handwavy Selectors stays

[18:44:09.0000] <jgraham>
annevk-cloud: zcorpan is at the front left here

[19:06:45.0000] <GPHemsley>
Is any HTML attribute truly required? (I can't find one.)

[21:21:09.0000] <benschwarz>
Hixie_: yt?

[21:51:04.0000] <zcorpan>
my macbook is annoying again. can't click with the trackpad :-(

[00:02:39.0000] <SimonSapin>
annevk-cloud: is there something I can point to to support Attr not being a Node?

[00:03:31.0000] <SimonSapin>
dom.spec.whatwg.org only says "// historical" near the ATTRIBUTE_NODE constant

[00:05:09.0000] <annevk-cloud>
It does not inherit from Node…


2013-11-10
[19:24:54.0000] <jgraham>
/me wonders if anyone at TPAC is around

[19:25:31.0000] <SimonSapin>
jgraham: depends on what you mean by around

[19:27:41.0000] <jgraham>
Heh

[19:28:09.0000] <jgraham>
I don't think people in CSS meetings count

[19:28:19.0000] <jgraham>
/me just has no plans for today

[20:48:44.0000] <annevk-cloud>
jgraham: I am around in a couple of hours

[20:49:19.0000] <annevk-cloud>
meeting at one first, not sure how long it'll take

[20:54:10.0000] <MikeSmith>
I'm around too

[22:32:53.0000] <MikeSmith>
if anybody's around at the Wuzhou, me and Mark Nottingham and maybe some other people are going to meet in the lobby at 3 and taxi over to SEG electronics market

[22:33:29.0000] <MikeSmith>
to buy some black market electronics and such

[22:33:41.0000] <MikeSmith>
annevk-cloud: ^

[22:34:19.0000] <MikeSmith>
zcorpan jgraham sangwhan__

[22:35:42.0000] <zcorpan>
MikeSmith: i'm at the css pre-meeting, but if you're gonna shop for electronics, i'm interested in a mouse since my trackpad is broken

[22:36:53.0000] <MikeSmith>
zcorpan: you prefer a counterfeit mouse or a legit one?

[22:37:54.0000] <zcorpan>
MikeSmith: whatever is likely to work on a mac and is relatively cheap

[22:38:05.0000] <MikeSmith>
hai

[23:50:59.0000] <annevk-cloud>
still in meeting

[23:56:18.0000] <jgraham>
annevk-cloud: YOu had plans for this evening, right? Otherwise, if your meeting were finished you would be welcome to join David Burns and Simon Stewart and I at 16:30

[00:24:27.0000] <zcorpan>
MikeSmith: turns out a force-reboot fixed the trackpad, so i don't need the mouse in case you haven't bought one already

[01:19:40.0000] <SimonSapin>
hum. http://w3cmemes.tumblr.com/post/66554037213/today-simon-sapin-learned-a-forbidden-word

[01:26:04.0000] <Ms2ger>
Heh

[02:22:45.0000] <stevefaulkner>
MikeSmith: ping

[04:01:40.0000] <Ms2ger>
jgraham, the rest of the file and even the rest of that function is inconsistent in style, so how about I fix it all up? :)

[04:21:31.0000] <jgraham>
Ms2ger: Sure

[04:22:16.0000] <jgraham>
The problem is that I want to use K&R style, but at some point it got changed to whatever the other style is called and I didn't want to argue about whitespace, so I just left it

[04:22:31.0000] <jgraham>
But I never remember to use the "right" style

[04:24:36.0000] <Ms2ger>
/me looks which one K&R is

[04:25:24.0000] <jgraham>
It might not be quite K&R

[04:26:07.0000] <MikeSmith>
ANSI style

[04:26:12.0000] <Ms2ger>
Yeah, K&R drops braces for single-line blocks

[04:26:18.0000] <Ms2ger>
/me really doesn't like that :)

[04:28:35.0000] <jgraham>
Oh, no braces for single line blocks is evil

[04:28:45.0000] <jgraham>
So, like I said, not quite K&R

[04:57:06.0000] <Ms2ger>
OH: "It's not clear to me why the TPAC 2013 agenda lists the XSL 1.0 requirements but not the XSL-FO 2.0 requirements."

[09:15:50.0000] <TabAtkins>
Looks like XSL did some interesting things regarding printing, and we're trying to see what parts of that are interesting and sane to translate into CSS.

[11:37:05.0000] <DaveMethvin>
.

[11:56:50.0000] <Ms2ger>
Heh: https://twitter.com/Justinian_II/status/399223257259188225/photo/1/large

[13:41:10.0000] <TabAtkins>
Ms2ger: Haha, nice.

[14:17:18.0000] <norbert_>
hi all

[14:17:32.0000] <norbert_>
I have a question

[14:17:54.0000] <norbert_>
In 2011, you discussed "Limiting the amount of downloaded but not watched video" http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-January/thread.html

[14:18:08.0000] <norbert_>
some suggested an additional "state3" preload state http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-January/029967.html

[14:18:12.0000] <norbert_>
*someone

[14:18:22.0000] <norbert_>
and I don't think you've ever come back to discussing that

[14:19:18.0000] <norbert_>
if I embed a 1Gb movie of 2 hours with the <video> tag

[14:19:35.0000] <norbert_>
and someone watches only the first 5 minutes, how can I prevent them from downloading 1Gb

[14:19:48.0000] <norbert_>
I have only limited money and a simple content provider, not my own server

[14:20:17.0000] <norbert_>
how can I use HTML5 <video> for anything over, say, 10Mb, without running into bandwidth problems?

[14:20:39.0000] <norbert_>
I don't understand why discussion about that additional "state3" preload state has ended

[14:20:46.0000] <norbert_>
http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-January/029967.html

[14:20:52.0000] <norbert_>
January 2011, that's almost 3 years ago

[14:21:07.0000] <norbert_>
any thoughts on this?

[14:22:35.0000] <SimonSapin>
norbert_: this is not what you’re asking for, but have you seen this? https://dvcs.w3.org/hg/html-media/raw-file/tip/media-source/media-source.html

[14:23:12.0000] <SimonSapin>
as far as I understand it allows you to precisely control how stuff gets loaded, but it’s quite involved

[14:23:32.0000] <norbert_>
yes, I did see that document, but it looked quite complicated

[14:23:47.0000] <norbert_>
all I did was search for "buffer" in it and read a bit here and there, but then gave up looking at it any further

[14:24:18.0000] <norbert_>
mostly because as far as I can tell it's some kind of extension which may not be implemented yet in browsers

[14:24:29.0000] <norbert_>
but I don't know for sure, I'm a noob when it comes to all this

[14:24:49.0000] <norbert_>
all I'm looking for is a way to embed larger HTML5 videos (.webm) without running into bandwidth problems

[14:25:32.0000] <norbert_>
and eventually I ran into that suggestion on the whatwg mailing list, that appears to not have been pursued any further

[14:25:55.0000] <norbert_>
to me it seems that almost everyone considering using HTML5 <video> would run into this problem

[14:26:16.0000] <norbert_>
except people with near unlimited bandwidth/lots of money, or people who only embed very small videos

[14:28:48.0000] <rillian>
norbert_: if the user closes the tab before the video finishes the user-agent will stop downloading

[14:29:02.0000] <rillian>
and most will only buffer a few hundred MB

[14:29:15.0000] <norbert_>
yes, but what if someone starts watching a 1Gb movie of 2 hours for 5 minutes

[14:29:37.0000] <norbert_>
few hundred MB is so much for my setup, my content provider would contact me for sure

[14:29:54.0000] <norbert_>
I want 1 minute buffered

[14:30:00.0000] <rillian>
sadly, this is why youtube wins

[14:30:11.0000] <norbert_>
yes, but why

[14:30:18.0000] <norbert_>
someone made a good suggestion in January 2011

[14:30:28.0000] <norbert_>
and for some reason it hasn't been pursued any further

[14:30:34.0000] <norbert_>
http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-January/029967.html

[14:31:13.0000] <rillian>
I suspect you're correct; no one cares about your bandwidth limitations enough to implement that

[14:31:26.0000] <rillian>
as simon said, you can control buffering yourself with the media source api

[14:31:42.0000] <rillian>
but it is significantly more complicated; requires js be enabled, etc.

[14:32:19.0000] <norbert_>
JavaScript enabled is fine, that media source api, will it work in most browsers and is it cross-platform; the current implementations of it, I mean?

[14:32:41.0000] <norbert_>
is there any HTML5 frontend on GitHub or wherever that'll take care of it for me?

[14:32:45.0000] <rillian>
we're implementing it in firefox; it already works in chrome

[14:32:53.0000] <rillian>
not sure about the other browsers

[14:33:07.0000] <norbert_>
ok

[14:33:32.0000] <rillian>
(other browsers don't play webm by default anyway)

[14:33:49.0000] <norbert_>
well, .ogv or whatever

[14:33:53.0000] <norbert_>
but em...

[14:34:19.0000] <norbert_>
so, even when that media source api is full implemented everywhere, it'll still be difficult for most people to use <video> with limited buffering?

[14:34:35.0000] <norbert_>
since it's implicated ("significantly more complicated')

[14:34:49.0000] <norbert_>
it's really sad :(

[14:35:32.0000] <norbert_>
"no one cares about your bandwidth limitations enough to implement that"

[14:35:35.0000] <norbert_>
makes me sad

[14:36:08.0000] <norbert_>
everyone - except the big companies/people with unlimited money/bandwidth - who's considering HTML5 <video> is running into this

[14:36:45.0000] <norbert_>
I really want to use HTML5 <video>, but I don't see any other solution than to convert all my videos to flv for now

[14:42:31.0000] <Hixie_>
norbert_: what are you trying to do exactly?

[14:43:42.0000] <norbert_>
I would like to add several large videos to my website, I have limited money and my content provider gives me limited bandwidth; I would like to use the HTML5 <video> tag, but if a visitor watches a 100Mb 10 minute video for 30 seconds, they download almost 100Mb just for 30 seconds

[14:44:20.0000] <norbert_>
so I want the YouTube-like buffering; that it only loads the next 10-30 seconds or so, even 1 minute would be much better than what it's doing now - just loading everything

[14:44:33.0000] <Hixie_>
TabAtkins: btw, now that howcome's specs are in the whatwg, we also have bug components for them, so if there's parts of the specs that are vague, file bugs and cc me

[14:44:42.0000] <norbert_>
but this isn't possible with HTML5's <video> tag, because there's no such option

[14:44:56.0000] <Hixie_>
norbert_: that's the default, isn't it?

[14:45:03.0000] <norbert_>
it was suggested in 2011, but hasn't been pursued any further

[14:45:06.0000] <norbert_>
seehttp://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-January/029967.html

[14:45:08.0000] <Hixie_>
i mean, browsers might not have implemented it right, but...

[14:45:45.0000] <norbert_>
Hixie_: the default is to load everything when a user presses play

[14:46:07.0000] <norbert_>
which means a 1Gb video of 2 hours fully loads if a user with a nice Internet connection watches the first 5 minutes

[14:46:27.0000] <Hixie_>
the default is "Hints to the user agent that the user agent can put the user's needs first without risk to the server, up to and including optimistically downloading the entire resource"

[14:46:49.0000] <Hixie_>
ah, right. the case you want is preload=metadata

[14:46:55.0000] <Hixie_>
"When the media resource is playing, hints to the user agent that bandwidth is to be considered scarce, e.g. suggesting throttling the download so that the media data is obtained at the slowest possible rate that still maintains consistent playback"

[14:47:08.0000] <norbert_>
preload=metadata isn't useful either, because after pressing play, everything loads

[14:47:18.0000] <Hixie_>
that's a bug, if so

[14:47:27.0000] <Hixie_>
with the browser

[14:47:28.0000] <norbert_>
wait, preload=metadata limits loading?

[14:47:35.0000] <Hixie_>
it's what the spec says

[14:47:51.0000] <Hixie_>
http://www.whatwg.org/specs/web-apps/current-work/#attr-media-preload

[14:47:56.0000] <norbert_>
preload=metadata sounds like it preloads the "metadata" about the video

[14:48:14.0000] <norbert_>
metadata, like length, first image to display as a thumbnail, and so on

[14:48:18.0000] <Hixie_>
it could be called duck=snake, what matters is what the spec defines it as, not what it sounds like

[14:48:21.0000] <norbert_>
but I guess I could have misinterpreted that

[14:48:59.0000] <norbert_>
if what you say is true

[14:49:07.0000] <norbert_>
then why did rillian comment like what I want is impossible

[14:49:14.0000] <Hixie_>
no need to take my word for it, you can read the spec to check me

[14:50:03.0000] <norbert_>
" When the media resource is playing, hints to the user agent that bandwidth is to be considered scarce, e.g. suggesting throttling the download so that the media data is obtained at the slowest possible rate that still maintains consistent playback."

[14:50:04.0000] <norbert_>
yeah

[14:50:08.0000] <rillian>
norbert_: what I was was trying to say is that browsers are between what you want and what you're afraid they will do.

[14:50:34.0000] <norbert_>
I don't understand what you mean

[14:50:40.0000] <norbert_>
they are "between"?

[14:50:49.0000] <norbert_>
they load more than I'd probably want, but less than everything?

[14:51:01.0000] <norbert_>
because the browser can decide

[14:51:41.0000] <norbert_>
but here for example

[14:51:42.0000] <norbert_>
http://www.popot.org/get_the_games.php?extra=PoP3D_making

[14:51:56.0000] <norbert_>
when I press play, in the first 13 seconds it loads the whole thing (24Mb)

[14:52:10.0000] <norbert_>
of the 12:08 minute video

[14:52:13.0000] <norbert_>
13 seconds

[14:52:16.0000] <norbert_>
24Mb

[14:52:38.0000] <norbert_>
and it's set on preload="metadata"

[14:53:12.0000] <norbert_>
that's in Firefox 25.0, by the way

[14:53:30.0000] <norbert_>
so what you're saying is that, maybe, if that would be 200Mb it wouldn't load everything but stop somewhere after 24Mb?

[14:55:26.0000] <norbert_>
all I see is that Firefox is ignoring the whatwg specification

[14:55:34.0000] <Hixie_>
file a bug

[14:55:55.0000] <norbert_>
because 24Mb (12:08 minutes) in 13 seconds doesn't seem like considering bandwidth scarce

[14:57:15.0000] <norbert_>
preload="metadata"

[14:57:36.0000] <KevinMarks>
You can throttle on your server end, surely? Tcp is a negotiation

[14:57:52.0000] <norbert_>
maybe W3C describes that differently and Firefox doesn't implement what whatwg says?

[14:58:38.0000] <Hixie_>
if firefox is implementing the w3c spec and not the whatwg spec, also file a bug :-)

[14:58:38.0000] <norbert_>
KevinMarks: I'm a basic Internet user and only have an account with a content provider, with limited bandwidth; I don't think I can do much except add a .htaccess?

[14:59:09.0000] <norbert_>
http://www.w3.org/wiki/HTML/Elements/video

[14:59:13.0000] <norbert_>
"metadata": Hints to the UA that the user is not expected to need the video, but that fetching its metadata (dimensions, first frame, track list, duration, and so on) is desirable.

[14:59:19.0000] <norbert_>
that whole scarce thing is a whatwg thing

[14:59:25.0000] <norbert_>
and Firefox probably just ignores that

[14:59:44.0000] <Hixie_>
uh, that's not the w3c fork of the html spec, it's just some wiki page

[15:00:11.0000] <norbert_>
are you sure

[15:00:15.0000] <norbert_>
w3.org is the W3C website

[15:00:31.0000] <Hixie_>
it's just some wiki page on the w3c website, yes

[15:00:37.0000] <norbert_>
oh, never mind, I understand what you mean

[15:01:02.0000] <norbert_>
http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#the-video-element

[15:01:15.0000] <norbert_>
"When the media resource is playing, hints to the user agent that bandwidth is to be considered scarce, e.g. suggesting throttling the download so that the media data is obtained at the slowest possible rate that still maintains consistent playback. "

[15:01:24.0000] <norbert_>
so it's in the W3C spec as well then

[15:01:26.0000] <KevinMarks>
If your content providers bandwidth is limited, they can serve packets out at a slower rate.

[15:01:35.0000] <Hixie_>
hahaha, really? the w3c spec doesn't get that right even?

[15:02:00.0000] <Hixie_>
no, they do say the same as the whatwg spec

[15:02:05.0000] <Hixie_>
"When the media resource is playing, hints to the user agent that bandwidth is to be considered scarce, e.g. suggesting throttling the download so that the media data is obtained at the slowest possible rate that still maintains consistent playback.

[15:02:08.0000] <norbert_>
yes, see my paste just now

[15:02:09.0000] <Hixie_>
"

[15:02:11.0000] <Hixie_>
it's the same text

[15:02:15.0000] <norbert_>
yes

[15:02:17.0000] <Hixie_>
ah, right

[15:02:22.0000] <norbert_>
so I should file a Firefox bug report then

[15:02:34.0000] <Hixie_>
you should do that regardless of what the w3c spec says

[15:02:51.0000] <norbert_>
yes, but it's nice when I can say it's mentioned everywhere :)

[15:03:18.0000] <Hixie_>
i don't think you realise quite how little it matters whether or not the w3c spec says this or not, but whatever floats your boat :-)

[15:04:11.0000] <norbert_>
the specs should rename "metadata" IMO

[15:04:14.0000] <norbert_>
it's misleading

[15:04:27.0000] <norbert_>
anyways

[15:04:31.0000] <Hixie_>
too late now

[15:04:41.0000] <norbert_>
thanks for all the feedback and thanks for pointing out the scarce bit of metadata

[15:04:48.0000] <norbert_>
will file a bug report with Firefox

[15:06:14.0000] <norbert_>
hm

[15:06:33.0000] <norbert_>
time for bed

[15:06:36.0000] <norbert_>
thanks again, bye


2013-11-11
[19:32:28.0000] <annevk>
Domenic_: because if you want to transport some JSON you need to know whether you can use a BOM in front of it or not

[19:32:35.0000] <annevk>
Domenic_: you can't anticipate clients on the web

[20:01:28.0000] <Hixie_>
cabanier: i haven't looked at canvas things for a while, sorry. been trying to get security and scripting figured out.

[20:08:22.0000] <cabanier>
Hixie_: no problem! As long as it's on your to do list.

[20:09:02.0000] <Hixie_>
yup, definitely there

[20:09:19.0000] <Hixie_>
you can see what's on the todo list here btw: http://www.whatwg.org/issues/

[20:20:48.0000] <jgraham>
Do we have any generally agreed on standards for web-platform-tests code? Basically what should I mention when I do code review with webapps?

[20:21:22.0000] <jgraham>
I guess only darobin is here at the moment :|

[20:21:50.0000] <darobin>
jgraham: standards? you mean like coding conventions?

[20:26:21.0000] <jgraham>
darobin: Yeah. Also what to look for other than just "does the test match the spec"

[20:26:42.0000] <jgraham>
So for example "use of external resources is bad"

[20:26:51.0000] <jgraham>
s/bad/forbidden/ I guess

[20:26:57.0000] <MikeSmith>
jgraham: should mention about, use idlharness for interface tests rather than writing them manually

[20:26:58.0000] <darobin>
ah

[20:27:07.0000] <darobin>
no, we don't have a checklist

[20:27:09.0000] <jgraham>
MikeSmith: Ah, good point

[20:27:12.0000] <darobin>
it would be good to have a checklist

[20:27:32.0000] <jgraham>
Yup, that's what I'm trying to write

[20:28:07.0000] <jgraham>
Well actually at the moment I have got as far as "here are the review tools". But the next thing will be what to check for when you do the review

[20:28:25.0000] <jgraham>
Which should actually go in the documentation, so I should write it up properly

[20:29:25.0000] <MikeSmith>
jgraham: I think another thing to point out is that people should get familiar with the set of available assert_* methods and use the most specific one available when there is one

[20:32:20.0000] <jgraham>
MikeSmith: Added

[21:58:55.0000] <jgraham>
MikeSmith, zcorpan_: https://etherpad.mozilla.org/MeHiumCufk

[22:01:19.0000] <MikeSmith>
jgraham: thanks will try to think if I can add anything useful there

[22:03:37.0000] <zcorpan_>
jgraham: why " - Best to avoid the pattern where you have a test that asserts that the feature is supported and bails if it isn't" ?

[22:06:18.0000] <jgraham>
zcorpan_: I mean "bails the whole page". When people do this they often depend on some assumptions about feature detection and then assume that none of their other tests will work if the feature detection failed. It seems much better to just run all the tests and let them fail unless that will take a rally long time

[22:06:34.0000] <zcorpan_>
oh, ok

[22:06:51.0000] <jgraham>
Getting a consistent number of test results is helpful for some kinds of tracking

[22:07:19.0000] <zcorpan_>
sometimes there's a separate test that just checks whether the feature is there, independently of the rest of the tests, which seems OK

[22:07:42.0000] <zcorpan_>
since if it fails it's very easy to see why

[22:07:51.0000] <jgraham>
Yep, that is fine

[22:08:41.0000] <zcorpan_>
maybe reword that point to be a bit clearer

[22:09:16.0000] <jgraham>
Sure

[22:09:25.0000] <jgraham>
These are just notes at the moment

[22:26:43.0000] <MikeSmith>
darobin_: https://etherpad.mozilla.org/MeHiumCufk

[22:26:54.0000] <darobin_>
MikeSmith: ta

[23:19:19.0000] <annevk>
http://lists.w3.org/Archives/Public/www-style/2013Nov/0085.html

[23:19:26.0000] <annevk>
"You should have attended the META conference in september..."

[23:19:30.0000] <annevk>
o_O

[00:17:52.0000] <jgraham>
Ms2ger: https://etherpad.mozilla.org/MeHiumCufk

[00:18:29.0000] <Ms2ger>
Nice

[00:21:24.0000] <jgraham>
Ms2ger: Contributions welcome

[00:38:17.0000] <annevk>
http://xkcd.com/1289/ brilliant

[00:39:43.0000] <Ms2ger>
jgraham, when is the session?

[01:00:09.0000] <philipj_>
jgraham, what's the best way to run web-platform-tests locally?

[01:00:22.0000] <philipj_>
it looks like it needs a web server because of the paths starting with /

[01:00:32.0000] <philipj_>
also, the ability to run all the tests in a directory would be nice

[01:02:01.0000] <jgraham>
philipj_: The best way is to check out the jgraham/python_review_2 branch and follow the instructions in README.md

[01:02:27.0000] <jgraham>
There isn't any way to run a whole directory automatically because that's assumed to be browser-specific

[01:02:45.0000] <jgraham>
I guess you want to talk to Dirk Pranke

[01:03:36.0000] <philipj_>
jgraham, on t we had these runner.php in some places, which isn't browser-specific

[01:03:42.0000] <philipj_>
but it doesn't exist, I get it :)

[01:04:05.0000] <jgraham>
Right, but some tests depend on not being in an iframe and so on

[01:04:25.0000] <jgraham>
Could probably make a simple cross-browser harness that would be OK for local usage

[01:04:41.0000] <jgraham>
In fact Ms2ger might alrady have one

[01:04:43.0000] <philipj_>
oh, never encountered that for media tests, but of course that's sounds like an insurmountable problem

[01:05:01.0000] <jgraham>
Well window.open helps

[01:05:21.0000] <jgraham>
I think the main thing that's hard to do is recover from crashes or hangs or whatever :)

[01:05:51.0000] <philipj_>
recovering from a crash is indeed hard

[01:06:09.0000] <jgraham>
(so doing something simple and entirely in-browser might make sense for non-production use cases)

[01:07:41.0000] <philipj_>
jgraham, does serve.py need to be run as root?

[01:07:49.0000] <jgraham>
philipj_: No

[01:08:02.0000] <jgraham>
It doesn't use port 80, for better or worse

[01:08:05.0000] <philipj_>
I get socket.error: [Errno 110] Connection timed out

[01:08:21.0000] <jgraham>
On startup?

[01:08:28.0000] <jgraham>
Or when trying to access a TC?

[01:08:33.0000] <philipj_>
on startup

[01:08:47.0000] <jgraham>
Do you already have something running on port 8000?

[01:09:07.0000] <philipj_>
Not to my knowledge

[01:09:13.0000] <jgraham>
By default it tries to use 8000 and a couple of random free ports

[01:09:50.0000] <jgraham>
(you can change that in config.json)

[01:10:05.0000] <philipj_>
lsof | grep -w 8000 does find a few things, but it looks like it's port 8000 on the other side of the TCP connection

[01:10:35.0000] <jgraham>
(Is that different to lsof -i :8000 ?)

[01:10:53.0000] <philipj_>
I have no idea, I've hardly ever used lsof

[01:11:16.0000] <jgraham>
Right, that's the only usage I know :)

[01:11:37.0000] <philipj_>
lsof -i :8000 finds one of the four things I saw before

[01:11:46.0000] <philipj_>
anyway, it's not because of the port, no random port I tested works

[01:11:54.0000] <jgraham>
Oh

[01:12:03.0000] <jgraham>
Well can I see the error?

[01:12:42.0000] <philipj_>
jgraham, http://pastebin.com/C00FKaZM

[01:12:51.0000] <philipj_>
Python is 2.7.4

[01:13:51.0000] <philipj_>
wow, pastebin has really horrible ads...

[01:15:39.0000] <jgraham>
Doesn't work from China :) (but I can read it anyway)

[01:16:02.0000] <Ms2ger>
philipj_, pastebin.mozilla.org doesn't have ads ;)

[01:16:13.0000] <jgraham>
It isn't very obvious. Did you edit /etc/hosts?

[01:16:14.0000] <philipj_>
Ms2ger, thanks!

[01:16:56.0000] <Ms2ger>
And my cross-browser test runner does use iframes (https://bitbucket.org/ms2ger/test-runner)

[01:17:43.0000] <sangwhan__>
philipj_: if all fails "python -m SimpleHTTPServer" works as a quick hack

[01:18:21.0000] <philipj_>
jgraham, I don't have anything weird in my /etc/hosts

[01:19:12.0000] <philipj_>
jgraham, maybe I should mentioned that I merged your branch to master instead of actually checking it out, will try doing as you said instead

[01:19:19.0000] <jgraham>
philipj_: You are supposed to add web-platform.test and some other subdomains

[01:19:55.0000] <philipj_>
jgraham, oh look, I started reading at the submodule stuff

[01:20:17.0000] <jgraham>
I should fix to not throw though

[01:20:31.0000] <jgraham>
There was an older model where it used "localhost"

[01:20:48.0000] <jgraham>
But localhost turns out to be a magic name

[01:20:52.0000] <philipj_>
you could try resolving all of the required hosts and telling me to RTFM if it fails I guess

[01:21:05.0000] <jgraham>
That is what it's trying to do, almost

[01:21:29.0000] <jgraham>
It just doesn't work if web-platform.test itself doesn't resolve

[01:21:36.0000] <jgraham>
Which is a bug

[01:24:05.0000] <philipj_>
jgraham, glad to me of service by not reading the readme :)

[01:24:13.0000] <philipj_>
well now I have it running, so thanks!

[01:24:33.0000] <jgraham>
Great :)

[01:34:24.0000] <jgraham>
~.

[01:38:28.0000] <Ms2ger>
annevk, yt?

[01:39:27.0000] <annevk>
Ms2ger: sure

[01:39:44.0000] <annevk>
Ms2ger: sitting next to jgraham, plotting

[01:40:11.0000] <Ms2ger>
Well, that's an excellent combination :)

[01:40:42.0000] <Ms2ger>
So the load event fired on window apparently needs to have target==document

[01:41:05.0000] <Ms2ger>
Want to check if https://github.com/mozilla/servo/pull/1213 is a reasonable way to implement that?

[01:44:04.0000] <annevk>
Ms2ger: http://www.whatwg.org/specs/web-apps/current-work/#events-and-the-window-object

[01:45:22.0000] <annevk>
Ms2ger: not sure what is going on there

[01:45:29.0000] <annevk>
Ms2ger: or why it is non-compliant

[01:46:04.0000] <Ms2ger>
Because a fully compliant implementation of page loading is hard

[01:47:15.0000] <annevk>
AbstractEventTarget::from_document(document) looks icky

[01:47:51.0000] <Ms2ger>
Yeah, that's working around the lack of inheritance

[01:49:20.0000] <annevk>
some sad code

[01:49:33.0000] <Ms2ger>
So the issue is that step 7.2 of http://www.whatwg.org/specs/web-apps/current-work/multipage/the-end.html#the-end can't really be done if you call into http://dom.spec.whatwg.org/#concept-event-dispatch

[01:50:34.0000] <annevk>
remind me

[01:51:08.0000] <Ms2ger>
Come again?

[01:52:43.0000] <annevk>
How can it not be done?

[01:54:54.0000] <Ms2ger>
Because http://dom.spec.whatwg.org/#concept-event-dispatch step 3 sets target to the wrong value, and you'd have to change it to the document somewhere in the middle of the algorithm

[02:00:42.0000] <annevk>
Beautiful

[02:00:59.0000] <annevk>
Ms2ger: file a bug

[02:01:18.0000] <annevk>
Add this to the have Hixie_ merge HTML and DOM

[02:01:23.0000] <annevk>
bucket

[02:01:40.0000] <hober>
we're gonna need a bigger bucket

[02:04:46.0000] <Ms2ger>
annevk, not sure how that'd help, except that then Hixie_ would need to fix it :)

[02:05:19.0000] <annevk>
Ms2ger: for starters we'd have the whole object chain in one spec

[02:06:02.0000] <annevk>
Ms2ger: anyway, file a bug, disregard bucket for now

[02:06:08.0000] <annevk>
kthxbai

[02:06:50.0000] <Ms2ger>
https://www.w3.org/Bugs/Public/show_bug.cgi?id=23792

[05:18:54.0000] <philipj>
zcorpan, what do you think about https://github.com/w3c/web-platform-tests/pull/429 ?

[05:19:22.0000] <philipj>
VTTCue is the only path for testing TextTrackCue, but it looks a bit odd to test TextTrackCue using a new VTTCue(...)

[05:19:36.0000] <zcorpan>
i'll have a look

[05:25:39.0000] <zcorpan_>
annoying how critic handles moved and edited files

[05:31:46.0000] <zcorpan_>
philipj: do the tests pass?

[05:33:23.0000] <zcorpan_>
philipj: the only things changed are s/TextTrackCue/VTTCue/ basically, right?

[05:33:52.0000] <philipj>
zcorpan_, only s/new TextTrackCue/new VTTCue/ actually

[05:34:17.0000] <philipj>
I didn't change any tests to check for the interface object, if there is any

[05:37:11.0000] <zcorpan_>
so it seems there are some spec changes that affect these tests. do you want me to comment on that in this review?

[05:37:31.0000] <zcorpan_>
unrelated to the VTTCue change that is

[05:41:04.0000] <zcorpan_>
philipj: ^

[05:41:40.0000] <philipj>
zcorpan_, the fact that not all of these tests are still correct?

[05:42:02.0000] <philipj>
I'm aware of that, and think it's better to review that when moving out of old-tests

[05:42:30.0000] <zcorpan_>
ok, wfm

[05:44:54.0000] <philipj>
zcorpan_, how are those two reviews to import more of our tests coming along?

[05:48:08.0000] <zcorpan_>
philipj: you mean https://critic.hoppipolla.co.uk/r/307 and https://critic.hoppipolla.co.uk/r/74 ?

[05:48:37.0000] <philipj>
zcorpan_, I think those are the ones you showed me last time, yes

[05:48:56.0000] <zcorpan_>
not much has happened

[05:50:24.0000] <zcorpan_>
i think the wpt-serve thing makes changes to the files in 74 which makes it more interesting

[05:51:08.0000] <jgraham>
zcorpan_: You should forward critic feature requests to jl :)

[05:51:33.0000] <zcorpan_>
yeah i can file a bug on critic

[06:33:53.0000] <philipj>
zcorpan_, https://github.com/w3c/web-platform-tests/pull/430 is also for you

[06:34:16.0000] <philipj>
(I'm preparing to re-import some of the track tests and want them to not be so ugly first)

[06:35:55.0000] <zcorpan_>
hmmm. i'm a bit worried about conflicts with existing PRs there

[06:37:31.0000] <zcorpan_>
like wpt-serve touches dnd tests iirc

[06:38:19.0000] <zcorpan_>
i'll hand it over to jgraham

[06:41:29.0000] <zcorpan_>
now time to sleep

[06:41:48.0000] <philipj>
oh right, you're at TPAC :)

[06:41:57.0000] <zcorpan_>
yep

[06:42:17.0000] <zcorpan_>
i think i'll do some squatting in the morning

[06:43:24.0000] <jgraham>
zcorpan_: I am hoping that the merge conflicts won't be too hard to sort out

[06:43:45.0000] <philipj>
if it's an issue, I can revert the dnd changes, it's just the media stuff I really care about

[06:43:55.0000] <jgraham>
Since the demantics of the test don't change it should be obvious what the right side of the diff to take is

[06:44:04.0000] <jgraham>
s/diff/merge/

[06:44:23.0000] <zcorpan_>
yeah, ok

[06:44:48.0000] <zcorpan_>
*poof*

[12:27:09.0000] <jensnockert>
Domenic_: Good work on the Streams API btw.

[12:27:30.0000] <Domenic_>
jensnockert: thank you! Great comment BTW.

[12:28:44.0000] <jensnockert>
Thanks.

[13:03:22.0000] <jensnockert>
Domenic_: What I find most unclear is, if I write something to an 'identity' pipe, can it return the same object on the other end? Or is it always a copy?

[13:05:22.0000] <jensnockert>
For example, a tee pipe, is the same object returned on all endpoints?

[13:12:27.0000] <Domenic_>
jensnockert: nothing would stop you from returning the same object.

[13:12:37.0000] <jensnockert>
Cool.

[13:13:04.0000] <Domenic_>
I think the built-in tee pipe would not do any sort of clone, although you could imagine someone building a StructuredCloneTeeStream or something

[13:13:55.0000] <jensnockert>
Yeah, but anything that is up to the implementer is cool.

[13:14:51.0000] <jensnockert>
Err… programmer.

[13:15:20.0000] <jensnockert>
Whatever the word is for 'The person implementing the custom stream type'

[15:14:31.0000] <WeirdAl>
streams API?

[15:15:38.0000] <WeirdAl>
can someone give me a link?

[15:36:16.0000] <smaug____>
WeirdAl: https://dvcs.w3.org/hg/streams-api/raw-file/tip/preview.html

[15:37:12.0000] <smaug____>
(looks like that API could use events, not promises, and be simpler for the user that way)

[15:45:21.0000] <WeirdAl>
ok, I need to read this spec :)

[15:49:46.0000] <Hixie_>
anyone got IE10+ ?

[15:50:04.0000] <Hixie_>
what's the log say for http://software.hixie.ch/utilities/js/live-dom-viewer/?saved=2632 ?

[15:57:29.0000] <smaug____>
10 says BackCompat, document has no title

[15:57:38.0000] <smaug____>
(using http://www.browserstack.com)


2013-11-12
[16:02:06.0000] <Hixie_>
smaug____: sounds like it took the screenshot too early

[16:02:30.0000] <Hixie_>
(it should say "log:" something)

[16:02:36.0000] <Hixie_>
(or just "log:")

[16:03:36.0000] <benschwarz>
@Hixie_ :thumbsup: to your email

[16:03:42.0000] <smaug____>
let me retry

[16:03:54.0000] <Hixie_>
/me nods to benschwarz 

[16:04:45.0000] <smaug____>
Hixie_: oh, it certainly doesn't load the test

[16:04:59.0000] <Hixie_>
nothing in the top textarea?

[16:05:13.0000] <smaug____>
404

[16:05:44.0000] <smaug____>
odd

[16:05:47.0000] <Hixie_>
odd indeed

[16:06:12.0000] <smaug____>
don't have an IE running so can't help after all, sorry

[16:09:04.0000] <Hixie_>
no worries

[16:09:08.0000] <Hixie_>
thanks for trying!

[16:33:20.0000] <WeirdAl>
Hixie:

[16:33:21.0000] <WeirdAl>
log: null

[16:33:23.0000] <WeirdAl>
rendering mode: CSS1Compat

[16:33:24.0000] <WeirdAl>
document has no title

[16:33:59.0000] <WeirdAl>
that's IE10

[16:45:35.0000] <Hixie_>
WeirdAl: thanks!

[18:09:08.0000] <jwalden>
someone, or someones, *really* don't like that whole don't-need-use-cases thing, judging by w3cmemes today

[18:09:36.0000] <GPHemsley>
Yeah, well, this *is* the WHATWG.

[18:11:29.0000] <jwalden>
there's dislike, then there's *really* dislike :-)

[18:11:43.0000] <jwalden>
I mean, use cases seem like a totally desirable thing to me

[18:12:01.0000] <jwalden>
but I wouldn't have gone on ten or so memes in a single day about it :-)

[18:12:48.0000] <darobin>
jwalden: it's TPAC, you always get a lot of w3cmemes out of that

[18:13:33.0000] <jwalden>
ah, good point

[18:13:57.0000] <jwalden>
/me returns to C++11 rvalue reference madness

[18:14:40.0000] <MikeSmith>
百花运动, as we say in China

[18:15:28.0000] <MikeSmith>
= "Let a hundred memes about use cases blossom"

[18:37:26.0000] <Domenic_>
WeirdAl: actually https://github.com/whatwg/streams

[19:08:34.0000] <zewt>
while the parched among us search for juice cases

[19:24:42.0000] <zcorpan_>
Domenic_: you need a logo for streams

[19:27:27.0000] <Domenic_>
zcorpan_: definitely. does annevk do all the cool logos himself?

[19:30:12.0000] <TabAtkins>
heycam: Am I using [SameObject]/readonly/etc correct here? http://dev.w3.org/csswg/css-images/#elementsources

[19:30:24.0000] <TabAtkins>
Domenic_: I think he does, yeah.

[19:30:44.0000] <TabAtkins>
Do a line with circles, inside the whatwg circle.

[19:30:50.0000] <TabAtkins>
Like, beads on a string.

[19:30:54.0000] <TabAtkins>
Or anal beads.  Same deal.

[19:31:08.0000] <zewt>
did i walk in on something here

[19:31:11.0000] <TabAtkins>
Yup.

[19:31:13.0000] <TabAtkins>
This is real.

[19:31:29.0000] <zewt>
it's real something

[19:31:42.0000] <zewt>
unfortunately something is a dangling pointer, so it's any guess what it is

[19:32:30.0000] <wilhelm_>
/me blinks.

[19:33:32.0000] <zewt>
/me divs.

[19:34:01.0000] <zcorpan_>
Domenic_: i made the quirks and xhr logos

[19:34:26.0000] <zcorpan_>
and dom

[19:34:54.0000] <Domenic_>
zcorpan_: would love a logo if you have the time :)

[19:35:17.0000] <zcorpan_>
Domenic_: do you have an idea of what it should look like?

[19:35:53.0000] <Domenic_>
zcorpan_: hmm, will think about it... maybe... pipes of some sort?

[19:36:57.0000] <zcorpan_>
a smoking pipe?

[19:38:44.0000] <annevk>
could be a river

[19:39:07.0000] <annevk>
ooh

[19:39:15.0000] <annevk>
a Mario-like pipe with the ? sticking out

[19:39:29.0000] <annevk>
or with ? in a square box above

[19:41:19.0000] <zcorpan_>
a smoking pipe kinda looks like a question mark

[19:41:35.0000] <darobin>
hop into IRC, read backlog, hear about anal beads and crack pipes

[19:41:37.0000] <zcorpan_>
annevk: i don't follow

[19:41:42.0000] <darobin>
just another day on #whatwg

[19:43:10.0000] <annevk>
zcorpan_: the pipe references piping streams, the question mark WHATWG, the whole logo Mario, because Mario is cool

[19:54:00.0000] <darobin>
I've heard worse design briefs :)

[19:56:59.0000] <zcorpan_>
at least i found a public domain smoking pipe http://www.clipartlord.com/free-smoking-pipe-clip-art/

[19:59:03.0000] <zcorpan_>
or http://openclipart.org/detail/170767/pipe-by-hatalar205-170767 appears to be the original

[20:51:55.0000] <jgraham>
So, if I was being serious, I would say that the streams logo should represent water

[20:52:19.0000] <jgraham>
But if I'm not, it should self-evidently reference ghostbusters

[21:07:47.0000] <Domenic_>
Heh I actually meant like water pipes... smoking pipes seems strange.

[21:07:50.0000] <zewt>
and if you can't decide, it should represent crossing the water streams

[21:35:42.0000] <annevk>
<3 memes

[21:52:25.0000] <Domenic_>
is w3cmemes run by whatwg peeps? seems like it most days

[22:05:56.0000] <darobin>
Domenic_: it's not that simple :)

[22:06:20.0000] <darobin>
a lot of the people posting there are from W3C, it's a bit of everyone

[22:08:45.0000] <darobin>
Domenic_: and then for the really obscure stuff there's w3tmemes...

[23:05:28.0000] <annevk>
So I emailed some feedback to ietf⊙io, but it hasn't arrived...

[23:06:00.0000] <annevk>
Or maybe I don't understand how the mailing list feedback works.

[23:29:15.0000] <MikeSmith>
annevk: is that mailing list archived?

[23:29:25.0000] <MikeSmith>
or you're subscribed to it I guess

[23:29:37.0000] <annevk>
MikeSmith: yeah is, email has arrived apparently

[23:29:41.0000] <MikeSmith>
ok

[23:30:08.0000] <annevk>
MikeSmith: just not in https://www.ietf.org/ibin/c5i?mid=6&rid=48&gid=0&k1=933 yet

[23:30:12.0000] <MikeSmith>
(I asked because some of the IANA feedback list are not actually archived and you can't subscribed to them)

[23:30:18.0000] <MikeSmith>
annevk: ah

[23:31:02.0000] <zcorpan_>
jgraham: re websocket, what am i expected to do and why was i assigned an action without being present? :-P

[23:31:15.0000] <MikeSmith>
wow the layout of https://www.ietf.org/ibin/c5i?mid=6&rid=48&gid=0&k1=933

[23:31:36.0000] <MikeSmith>
I think it needs even more blue hyperlinks

[23:32:27.0000] <MikeSmith>
when the IETF does hyperinked HTML, it does hyperlinked HTML...

[23:32:53.0000] <zcorpan_>
.... ?? http://krijnhoetmer.nl/irc-logs/webapps/20131112#l-698

[23:33:22.0000] <MikeSmith>
btw not to sound paranoid but I've been having problems with weird Quija-board like mouse behavior

[23:33:38.0000] <MikeSmith>
like something is wrong with my trackpad a la zcorpan_

[23:34:02.0000] <zcorpan_>
good thing you bought a mouse then

[23:34:24.0000] <MikeSmith>
well I am now thinking it feels like somebody is remotely connected to my machine

[23:35:03.0000] <MikeSmith>
trying to see what state secrets I've collected so far

[23:36:34.0000] <MikeSmith>
it's weird because one second the mouse behavior gets all quicksand-y/Quija-board-like ghost in the machine, and the next second it's fine and normal again

[23:37:15.0000] <MikeSmith>
and using top(1) and Activity Monitor and siuch doesn't show any local process sucking up CPU or whatever

[23:50:58.0000] <zcorpan_>
wow w3cmemes is on a roll about the use cases

[23:52:05.0000] <darobin>
zcorpan_: well, frankly, if glazou had wanted to become a w3cmemes superstar he could not have chosen a better way to do so

[23:54:07.0000] <jgraham>
zcorpan_: Uh, I don't know. I think it might have been for review that you are doing anyway

[00:01:03.0000] <zcorpan_>
http://www.w3.org/2008/webapps/track/actions/706

[00:05:14.0000] <zcorpan_>
Domenic_: http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2634

[00:16:05.0000] <jgraham>
zcorpan: Ah, right. I think richt might have accidentially volunteered you for that

[00:16:32.0000] <jgraham>
I don't think it should have been made into an action without your agreement

[00:16:41.0000] <jgraham>
Although I also don't know if it matters

[00:57:43.0000] <jgraham>
re: https://critic.hoppipolla.co.uk/showcomment?chain=813 does the spec actually say that you can't set .value to an invalid value? I can't see that it does.

[00:57:57.0000] <jgraham>
s/invalid/out of range/

[00:59:05.0000] <annevk>
Hixie_: you around?

[00:59:13.0000] <annevk>
Hixie_: I cannot find "relevant settings object" in HTML

[00:59:36.0000] <annevk>
Hixie_: should I use the "settings object" associated with the global?

[00:59:53.0000] <annevk>
Hixie_: or the entry settings object associated with the global?

[01:00:02.0000] <annevk>
Hixie_: would the latter work for both documents and workerS?

[01:03:31.0000] <annevk>
Hixie_: I guess I should just use the "script settings object" associated with the global

[01:28:59.0000] <zcorpan_>
Ms2ger: see https://critic.hoppipolla.co.uk/r/424

[01:33:47.0000] <Ms2ger>
zcorpan_, huh, wow

[01:33:56.0000] <Ms2ger>
I'll review later

[01:34:27.0000] <annevk>
Hixie_: commented on bug instead

[01:51:50.0000] <benschwarz>
Hixie_: is there a server environment that we have access to that would build the developer spec?

[02:19:54.0000] <sankha93>
Ms2ger is here as well? :)

[02:24:50.0000] <Ms2ger>
Ohai

[03:32:13.0000] <hsivonen>
annevk-cloud: the point of the replacement encoding is defeated if it can be overridden from the encoding menu

[03:32:39.0000] <hsivonen>
annevk-cloud: but by the time the menu stuff is processed, we haven't looked at <meta> yet

[03:33:27.0000] <hsivonen>
annevk-cloud: the menu is so sad

[03:34:08.0000] <hsivonen>
annevk-cloud: I could easily defend against the static case to disable the menu when a browsing context contains the replacement encoding

[03:34:25.0000] <hsivonen>
annevk-cloud: but that doesn't take into account subsequent iframe navigations

[03:34:28.0000] <hsivonen>
annevk-cloud: ideas?

[05:56:18.0000] <hsivonen>
annevk-cloud: how come the Encoding Standard doesn't define some UCS2 labels for UTF-16BE?

[06:07:05.0000] <karlcow>
for Anselm http://lists.w3.org/Archives/Public/www-archive/2013Nov/0006.html

[06:30:53.0000] <Ms2ger>
Wait, this really happened: http://krijnhoetmer.nl/irc-logs/css/20131112#l-466

[06:33:11.0000] <zewt>
next up, MIGHT OCCASIONALLY

[06:33:50.0000] <Lachy>
WTF? Did they not realise that was an April Fools day RFC?

[06:34:59.0000] <zewt>
let's count ourselves lucky the onion doesn't write many spec-related articles

[06:35:55.0000] <Lachy>
huh. They even referred to it as the "April 1 update to RFC2119" earlier in the discussion. They must have known.

[06:42:19.0000] <hsivonen>
Ms2ger: maybe the non-normative security considerations for EME ought to use the terms from http://tools.ietf.org/html/rfc6919

[06:46:48.0000] <jgraham>
Lachy: They were very proud of it :)

[06:47:11.0000] <Ms2ger>
jgraham has been stalking the csswg meeting?

[06:47:14.0000] <annevk-cloud>
hsivonen: we cannot disable it whenever?

[06:48:20.0000] <hsivonen>
annevk-cloud: I think I've figured out how to make the charset menu not apply to replacement encoding resources

[06:48:29.0000] <hsivonen>
annevk-cloud: adds complexity to the parser

[06:48:41.0000] <hsivonen>
but hey, security is important

[06:48:50.0000] <hsivonen>
but not important enough to just get rid of the menu

[06:52:28.0000] <hsivonen>
It's been a while since I've worked on this part of the parser. Need to figure out what I was thinking earlier. :-(

[06:52:38.0000] <hsivonen>
fortunately, this isn't Perl code

[06:55:09.0000] <hsivonen>
annevk-cloud: have you investigated IE's support of Shift_JIS sequences in ISO-2022-JP yet?

[07:15:44.0000] <annevk-cloud>
hsivonen: someone else has, see open bugs

[07:16:45.0000] <annevk-cloud>
going to get some sleep now; let me know if you need something sorted

[07:58:36.0000] <Ms2ger>
TabAtkins, did anybody say something about *external* css?

[07:59:15.0000] <TabAtkins>
Ms2ger: I suppose not, but features that only work in internal CSS are weird.

[08:53:07.0000] <SimonSapin>
Lachy: yes we knew, and despite being an April’s fools the description of "may wish to" was perfect for this

[09:36:59.0000] <dglazkov>
good morning, Whatwg!

[10:21:36.0000] <WeirdAl>
thanks Domenic_

[11:36:37.0000] <aklein>
good morning, #whatwg, anyone about know much about the history of XML prefixes (and especially their reflection in DOM)?

[11:36:56.0000] <gsnedders>
aklein: As to where they come from originally?

[11:38:31.0000] <aklein>
gsnedders: rather, as to whether they were ever supposed to be settable via DOM apis

[11:38:48.0000] <aklein>
in particular, the Node.prefix IDL attribute

[11:39:09.0000] <aklein>
WebKit and Blink make it settable, but from what I can tell it's readonly in Firefox and IE 9

[11:40:34.0000] <aklein>
oh noes, it's settable in IE in an XML doc

[11:40:37.0000] <aklein>
for elements, anyway

[11:40:51.0000] <gsnedders>
DOM Level 2 says "NO_MODIFICATION_ALLOWED_ERR: Raised if this node is readonly."

[11:41:51.0000] <aklein>
it does talk about cases where it's allowed to be notified, though

[11:41:54.0000] <aklein>
modified, that is

[11:41:55.0000] <aklein>
thanks

[11:42:07.0000] <aklein>
DOM Level 2 is, I think, my answer

[11:42:27.0000] <aklein>
now I'm curious about IE 11

[11:42:39.0000] <gsnedders>
I'm not sure it really defined where the readonlyness of a node is defined

[11:43:28.0000] <aklein>
IIRC, there's only one kind of readonly node: EntityReference

[11:43:35.0000] <aklein>
but I think we removed that interface from both WebKit and Blink

[11:44:17.0000] <gsnedders>
Entities are, too

[11:44:30.0000] <gsnedders>
Entity nodes and all their decendents are

[11:44:37.0000] <gsnedders>
Per DOM Level 2.

[11:44:48.0000] <gsnedders>
You can try looking through MO archives, if you have access.

[11:45:40.0000] <gsnedders>
Who knows about the history of this!

[11:46:42.0000] <aklein>
I'm now curious when Gecko decided to simplify all this. Perhaps they're simply implementing annevk's DOM spec

[11:47:34.0000] <Ms2ger>
We never implemented a lot of it

[11:53:54.0000] <gsnedders>
Nobody implemented large parts of the old DOM specs

[11:55:45.0000] <Ms2ger>
Right

[12:45:29.0000] <Hixie_>
benschwarz: i can set you up an account on the whatwg.org server, sure

[12:45:45.0000] <Hixie_>
benschwarz: in fact, i think you already have one (since that's where developers.whatwg.org is hosted)

[12:46:27.0000] <Hixie_>
as far as rfc6919 goes... when you find a definition in that rfc appropriate, the right solution isn't to use it, the right solution is to realise that you are writing a bad spec.

[13:27:31.0000] <Domenic_>
aklein: it looks like http://dom.spec.whatwg.org/#element says it's readonly and only exists on Element, not Node.

[13:54:46.0000] <karlcow>
marcosc: http://lists.w3.org/Archives/Public/public-web-mobile/2013Nov/0000.html

[13:54:54.0000] <Hixie_>
heycam|away: ping https://www.w3.org/Bugs/Public/show_bug.cgi?id=23744

[13:55:14.0000] <karlcow>
marcosc: What are the data you want to extract?

[14:13:57.0000] <aklein>
Domenic_: yeah, I like what modern DOM says, but I'm curious about the history here (not that I can imagine what code would be modifying prefix and expecting something interesting to happen)


2013-11-13
[16:50:29.0000] <jamesr__>
what happens when you assign 1.9 to an IDL attribute of type 'unsigned long' ?

[16:51:08.0000] <jamesr__>
ah it floors

[17:33:44.0000] <sangwhan__>
Any good ideas for the TTWF submissions that don't get follow up work for the review comments? Give it a deadline and drop review?

[17:40:22.0000] <jgraham>
sangwhan__: Depends how useful the test is. If it's basically not that useful just drop it after a while. If it is useful then grab the code and fix it up yourself

[17:45:18.0000] <sangwhan__>
sangwhan__: Some of them do fill in blanks in coverage, while not being awfully great so someone needs to sit down and fix it up

[17:45:43.0000] <sangwhan__>
jgraham: ^

[17:45:53.0000] <sangwhan__>
/me needs coffee, brain not working

[17:46:10.0000] <jgraham>
heh

[17:46:45.0000] <jgraham>
Yeah. In that case "fork" the contribution and fix it up

[17:46:58.0000] <jgraham>
It is a weakness of gh that you can't do that directly

[17:48:51.0000] <sangwhan__>
Yes, that aspect of GH seems a bit odd. Would have loved to have r/branchname that I could just pull and continue the work (won't say where I saw this)

[17:53:20.0000] <jgraham>
:-o

[17:54:39.0000] <jgraham>
sangwhan__: Yeah :) You *can* get the code with gh, but not push back

[18:00:50.0000] <sangwhan__>
Since we use GH's pull mechanism that's a primitive merge i assume we don't/can't use FnT?

[18:01:13.0000] <sangwhan__>
s/'s/s/

[18:01:29.0000] <sangwhan__>
/me *really* needs coffee

[18:46:45.0000] <jgraham>
sangwhan__: What's FnT?

[18:47:36.0000] <sangwhan__>
jgraham: fiddle and tweak

[18:53:20.0000] <sangwhan__>
jgraham: https://github.com/jensl/FiddleAndTweak

[18:56:53.0000] <jgraham>
ah

[18:57:37.0000] <jgraham>
Can't use that because a) we can't use extensions and b) the critic repo isn't the repo of record

[18:57:52.0000] <jgraham>
(it won't interact well with the branch tracking)

[19:19:18.0000] <sangwhan__>
Don't think there is a nice way to make that work with GH, yes

[19:20:25.0000] <zcorpan_>
TabAtkins: IE5-era browsers supported <style>. you need to go back further

[19:35:35.0000] <TabAtkins>
zcorpan: Oh jeez.

[19:35:47.0000] <TabAtkins>
I remember cargo-culting that shit when I started, during IE6.

[19:47:02.0000] <Hixie_>
thank you to all the w3cmemes posters for making me more sure than ever that not going to tpac was the right move

[19:54:17.0000] <annevk-cloud>
"'I think we can all agree' is the new 'fuck off'" <3

[19:55:57.0000] <a-ja>
recall a fairly recent change to svg fonts that'd affect acid3?

[20:07:42.0000] <a-ja>
N/M....just my bad memory

[20:29:47.0000] <cwilso>
zcorpan: IE_3_ supported <style>.

[20:48:51.0000] <masatakayakura>
annevk-cloud: Natasha is looking for you to ask whether your Fetch session and her offline web ones can merge

[22:30:01.0000] <zcorpan>
cwilso: yeah

[02:15:59.0000] <hober>
surely the folks slaving away in shenzhen's meme factory are unsung heroes jeff should be thanking

[02:16:20.0000] <darobin>
hober: that was a comment for #tpac-chat :)

[02:16:26.0000] <hober>
no it wasn't

[02:16:33.0000] <darobin>
yes it was :)

[02:18:55.0000] <Ms2ger>
TabAtkins, is there a CSS2.1 draft with errata somewhere public?

[02:22:20.0000] <Ms2ger>
/me wonders what MikeSmith is testing on his th.js PR

[02:23:43.0000] <MikeSmith>
did I make a th.js PR?

[02:24:15.0000] <MikeSmith>
I think the Chinese army hackers have comprised my machine

[02:24:33.0000] <MikeSmith>
so maybe now they're starting to send PRs from my github account

[03:26:39.0000] <Ms2ger>
Oh, here I thought I'd actually stumbled on a site that used xhtml

[03:27:02.0000] <Ms2ger>
Turns out that the extension was .xhtml, but HTTP said text/html; charset=UTF-8

[03:53:32.0000] <hsivonen>
It's ridiculous how hard it is to plug the replacement encoding into an existing browser in a secure way without regressing stuff

[03:54:40.0000] <hsivonen>
leaving old security problems remain would be so much easier than fixing them

[04:01:52.0000] <hsivonen>
part of my problem is that I foresee too many bugs and try to fix them right away

[04:08:48.0000] <hsivonen>
annevk-cloud: do we want the replacement encoding to inherit into iframes that are inserted using DOM APIs and show same-origin content?

[04:08:58.0000] <hsivonen>
annevk-cloud: if yes, why? if no, why?

[04:09:15.0000] <hsivonen>
(currently, "no" comes naturally)

[04:09:46.0000] <hsivonen>
(because the test for "doesn't participate in inheritance" and the test for "can't be overridden from menu" are the same)

[04:10:44.0000] <hsivonen>
though in principle, "yes" might be more secure

[04:28:19.0000] <annevk-cloud>
Dunno :/

[04:29:38.0000] <hsivonen>
currently, it looks like this is the last thing I need to deal with before this replacement thing is ready for review

[04:29:52.0000] <hsivonen>
this took a lot more work than I expected

[04:33:10.0000] <hsivonen>
annevk-cloud: the encoding menu is IE11 is interesting

[04:33:18.0000] <hsivonen>
1) It has some DOS encodings that we removed

[04:33:29.0000] <hsivonen>
2) It doesn't have ISO-2022-JP

[04:33:44.0000] <hsivonen>
3) It doesn't have gbk (GB18030 only)

[04:33:48.0000] <hsivonen>
4) It has HZ

[04:34:44.0000] <hsivonen>
oops sorry. it does have gbk under the other name

[04:34:55.0000] <hsivonen>
the items move when used!

[04:35:38.0000] <hsivonen>
5) It doesn't have some ISO encodings that we retained

[04:37:40.0000] <gsnedders>
For 5) does it have equiv. Windows codespace encodings?

[04:38:05.0000] <hsivonen>
gsnedders: they don't map 1-to-1

[04:38:26.0000] <hsivonen>
gsnedders: there are no Windows code page specific to Celtic, Nordic or Romanian

[04:38:51.0000] <hsivonen>
Windows Central European covers also Romanian

[04:39:31.0000] <hsivonen>
kudos to MS for burying the ISO-8859-* encodings that were introduced after UTF-8

[04:45:27.0000] <hsivonen>
the ISO > 11 situation is totally 927 :-(

[04:58:44.0000] <hsivonen>
context for http://w3cmemes.tumblr.com/post/66860522018/jeff-jaffe-tells-robin-berjon-how-it-is ?

[04:59:33.0000] <hsivonen>
no new w3tmemes during TPAC :-/

[05:45:20.0000] <hsivonen>
hmm. Chromium doesn't have Mac & DOS Cyrillic encodings in the menu

[05:45:26.0000] <hsivonen>
I wonder if they are still supported

[06:05:38.0000] <Jasper>
Does anything support https://dvcs.w3.org/hg/ime-api/raw-file/default/Overview.html yet? I'm not sure of the status of it.

[06:28:36.0000] <beverloo>
annevk-cloud, ping

[06:28:45.0000] <beverloo>
annevk-cloud, where do I post comments about the notification api? whatwg or w3c list?

[06:44:07.0000] <annevk-cloud>
beverloo: whatwg is fine

[06:44:17.0000] <beverloo>
ok, ty

[06:59:48.0000] <MikeSmith>
Jasper: the IME API is not implemented yet

[07:04:19.0000] <SteveF>
hey mikey saw you got my billet doux

[07:05:45.0000] <MikeSmith>
heh

[07:05:47.0000] <MikeSmith>
yeah

[07:10:53.0000] <GPHemsley>
hmm... apparently Gmail doesn't care that I start my e-mail address name with a quotation mark, it splits at the comma anyway

[07:34:17.0000] <gsnedders>
GPHemsley: Comply with the spec? What does this mean?

[07:34:28.0000] <GPHemsley>
hmm?

[07:34:43.0000] <gsnedders>
GPHemsley: wrt Gmail and quotation marks

[07:34:51.0000] <GPHemsley>
oh

[07:35:28.0000] <GPHemsley>
If I type `"John Doe,`, Gmail thinks I'm moving on to the next e-mail address

[07:35:49.0000] <GPHemsley>
when in reality I was going to type `"John Doe, M.D." <jdoe⊙ec>`

[08:54:19.0000] <dglazkov>
good morning, Whatwg!

[09:35:48.0000] <Hixie_>
so...

[09:36:30.0000] <Hixie_>
https://www.w3.org/Bugs/Public/show_bug.cgi?id=22628

[09:37:19.0000] <Hixie_>
if you have multiple BroadcastChannel objects in your Document

[09:37:27.0000] <Hixie_>
should they all get messages in one task, or separate tasks?

[10:09:42.0000] <matjas>
annevk-cloud: some background regarding that tweet: https://github.com/jwerle/url.h/issues/2#issuecomment-28224435

[10:10:01.0000] <matjas>
annevk-cloud: is there a wiki/list of URL-spec-compliant implementations? if not, there should be

[10:11:21.0000] <matjas>
you could enable GH’s Wiki feature on https://github.com/whatwg/url/settings

[11:04:08.0000] <Hixie_>
man, you omit one "=" sign between an attribute name and an attribute value, and validator.nu gives you 6 error messages

[11:04:24.0000] <Hixie_>
/me adds the "=" sign, feeling suitably chastised

[11:04:31.0000] <GPHemsley>
^_^

[11:09:01.0000] <matjas>
dglazkov: you’re getting better at this. that single capital ‘W’ really hurt

[11:09:04.0000] <Ms2ger>
Hixie_, I suspect that's your fault ;)

[11:09:20.0000] <Hixie_>
spec only says you have to give one error message :-)

[11:34:24.0000] <Hixie_>
i'm amused as to how similar the spec path is to mozilla's patch for https://www.w3.org/Bugs/Public/show_bug.cgi?id=23040 (i looked at the patch after writing mine)

[11:35:10.0000] <marcosc>
So, I can't find anyone by Microsoft supporting meta "application-name"

[11:35:18.0000] <marcosc>
s/by/but

[11:36:00.0000] <marcosc>
but it has quite a bit of usage thanks to Microsoft

[11:36:56.0000] <marcosc>
it always appears above "msapplication-tooltip" and "msapplication-starturl"

[12:00:15.0000] <marcosc>
hmm... is there no <link rel=first>?

[12:08:10.0000] <Hixie_>
marcosc: what would it do?

[12:09:23.0000] <marcosc>
Hixie_: I'm looking for an equivalent to Microsoft's "msapplication-starturl"... which points to the place where the author wants the end-user to end up when a page is bookmarked

[12:09:46.0000] <marcosc>
well, not quite bookmarked... they use some other terminology... pinned or something

[12:10:27.0000] <marcosc>
so, when you pin a site, you then click on it, and it takes you to some path... that's what I've gathered so far

[12:10:38.0000] <marcosc>
(don't actually have a windows box to test on)

[12:11:15.0000] <marcosc>
Hixie_: I'm trying to build up a coherent story for how "add to homescreen" could work with bits of HTML5

[12:11:25.0000] <marcosc>
argh.. HTML, I mean

[12:11:34.0000] <Hixie_>
ah

[12:11:46.0000] <Hixie_>
rel=canonical?

[12:11:57.0000] <marcosc>
ugly, but could work :)

[12:12:04.0000] <Hixie_>
why ugly?

[12:12:09.0000] <marcosc>
canonical hard to spell

[12:12:15.0000] <marcosc>
strange word

[12:12:19.0000] <Hixie_>
oh well i didn't invent it

[12:12:26.0000] <Hixie_>
i mean the actual rel=canonical that exists

[12:12:27.0000] <marcosc>
yeah, wasn't blaming anyone

[12:12:48.0000] <marcosc>
let me see how often it comes up

[12:12:59.0000] <Hixie_>
not really clear to me why you'd want to pin something other than what the user said to pin, though

[12:14:07.0000] <Domenic_>
Hixie_: if I am at http://warmupreps.com/#starting-strength-squats and click "pin to home" I actually want to pin http://warmupreps.com/ or maybe http://warmupreps.com/#starting-strength

[12:14:27.0000] <marcosc>
Hixie_: no idea either

[12:14:29.0000] <Domenic_>
(this is actually a real life thing that happened to me.)

[12:15:03.0000] <Hixie_>
Domenic_: what if you want http://warmupreps.com/#starting-strength-squats ?

[12:15:18.0000] <Hixie_>
i mean, it seems reasonable to tell the user to pin what they want to pin...

[12:15:38.0000] <Domenic_>
Hixie_: I never want that. I want a complete workout, not a single page.

[12:16:10.0000] <Domenic_>
I guess part of the issue is that phone apps usually have very little on a single screen

[12:16:26.0000] <Domenic_>
E.g. even though the conceptual unit is the workout, you only display a single exercise per screen

[12:16:48.0000] <Hixie_>
marcosc: rel=home seems better than rel=canonical actually http://microformats.org/wiki/rel-home

[12:17:26.0000] <marcosc>
canonical seems to have quite a bit of usage

[12:17:46.0000] <marcosc>
will check rel=home too

[12:18:27.0000] <Hixie_>
rel=canonical is more for saying "http://warmupreps.com/?#starting-strength-squats should be http://warmupreps.com/#starting-strength-squats"

[12:18:27.0000] <Domenic_>
canonical has something to do with googlejuice

[12:18:39.0000] <Hixie_>
rel=home is more what you want here i think, per that wiki page

[12:18:48.0000] <Domenic_>
e.g. http://www.domenic.me/ should be http://domenic.me/ is a common usage.

[12:28:19.0000] <Hixie_>
so... mutation events. anyone dropped them yet? can i start dropping the spec text about them? what's the story? https://www.w3.org/Bugs/Public/show_bug.cgi?id=23036

[12:49:19.0000] <Hixie_>
https://www.w3.org/Bugs/Public/show_bug.cgi?id=23359 any opinions on how history.back() should act if it's called on the History object of a non-active document?

[13:57:38.0000] <marcosc>
Hixie_: yeah, rel=home is what I want indeed. Thanks for the pointer

[14:03:34.0000] <Hixie_>
anyone able to translate https://www.w3.org/Bugs/Public/show_bug.cgi?id=23387 for me?

[14:05:13.0000] <Hixie_>
wow, someone should send http://wiki.akosma.com/IPhone_URL_Schemes to the IETF

[14:05:31.0000] <Hixie_>
send a first-aid crew with it, though, in case people have heart attacks or something

[14:15:39.0000] <aklein>
Hixie_: I don't think anyone's dropped them yet (I know Blink hasn't), but I don't know if that means you need to continue to spec them. annevk hasn't bothered to say anything about them in DOM

[14:19:35.0000] <Hixie_>
are we expecting them to ever be dropped?

[14:23:01.0000] <aklein>
Hixie_: hopefully? we do measure their usage in Blink, and some of them (DOMNodeInserted and DOMSubtreeModified, I think) have enough usage that we're not yet comfortable dropping support.

[14:23:38.0000] <Hixie_>
if you're not comfortable dropping support, why are we comfortable not speccing them? :-)

[14:24:51.0000] <aklein>
that sounds like a good question for Anne :)

[14:26:15.0000] <aklein>
I'm actually surprised Gecko hasn't tried dropping support, they tend to be less conservative about this stuff

[14:27:06.0000] <mrbkap>
dglazkov: ping?

[14:27:18.0000] <dglazkov>
mrbkap: pong!

[14:27:31.0000] <dglazkov>
about to run to a meeting

[14:27:40.0000] <dglazkov>
will be available in an hour?

[14:27:45.0000] <mrbkap>
dglazkov: sounds good.

[14:43:41.0000] <annevk-cloud>
Hixie_: nobody has declared a loss yet and people do not want them specified until then

[14:44:59.0000] <annevk-cloud>
matjas: how about using the WHATWG wiki?

[14:51:19.0000] <Hixie_>
heycam|away: ping https://www.w3.org/Bugs/Public/show_bug.cgi?id=23744

[14:56:03.0000] <bholley>
Hixie_: any thoughts on how to more effectively poke abarth to move the security discussion along?

[15:00:19.0000] <Hixie_>
bholley: promise him chocolates?

[15:26:52.0000] <dglazkov>
mrbkap: here!

[15:27:20.0000] <mrbkap>
dglazkov: Hey!

[15:27:25.0000] <mrbkap>
dglazkov: I have a couple of questions:

[15:27:49.0000] <mrbkap>
dglazkov: Has anybody looked into the interaction between shadow DOM and scoped stylesheets?

[15:29:01.0000] <mrbkap>
dglazkov: i.e. if I have an element: <element><span>foo</span></element> with a shadow DOM: <div><style scoped>span { color: red; }</style><content></content></div>

[15:29:10.0000] <mrbkap>
dglazkov: is "foo" in red or not?

[15:31:15.0000] <mrbkap>
dglazkov: Also, why is the base element queue sorted in the spec?

[15:31:33.0000] <mrbkap>
dglazkov: (in the custom elements spec)

[15:31:34.0000] <dglazkov>
mrbkap: it's a good question. We implemented both in Blink, and I know we use the same machinery for tracking the scoping node (element or Shadow Root). But I think the spec itself is not entirely clear there.

[15:32:02.0000] <dglazkov>
tasak⊙co and hayato⊙co are the peeps to bug about this.

[15:32:18.0000] <mrbkap>
dglazkov: Okay, I'll send email.

[15:32:54.0000] <mrbkap>
dglazkov: I know that bzbarsky thinks that "foo" should *not* be red in my example.

[15:33:54.0000] <dglazkov>
on to the sorted queue

[15:35:36.0000] <mrbkap>
Yes.

[15:36:17.0000] <dglazkov>
the main reason is future compatibility with imports. Since imports are loaded asynchronously, the ordering of custom element callbacks in them is unpredictable. the ordering provides stability. If you don't support imports, sorting can be just optimized away -- elements will be always added in the right order to the queue.

[15:37:21.0000] <mrbkap>
dglazkov: ah-ha, I see.

[15:39:01.0000] <dglazkov>
mrbkap: for example, we don't sort it now in Blink, because our imports implementation isn't baked yet: https://code.google.com/p/chromium/codesearch#chromium/src/third_party/WebKit/Source/core/dom/custom/CustomElementBaseElementQueue.cpp&sq=package:chromium&type=cs

[15:39:38.0000] <mrbkap>
/me thought code.google.com had shut down!

[15:40:12.0000] <dglazkov>
mrbkap: lol

[15:40:28.0000] <dglazkov>
it's been githubb'd


2013-11-14
[16:46:50.0000] <mrbkap>
dglazkov: Are you still there?

[16:46:55.0000] <dglazkov>
mrbkap: yup

[16:48:40.0000] <mrbkap>
dglazkov: Are lifetime callbacks supposed to be called in order of when they are generated globally or in order for their microtask?

[16:50:14.0000] <mrbkap>
dglazkov: I might be lost in the spec, but I think the way it's specified right now, the spec might end up processing the same lifetime callbacks multiple times.

[16:50:22.0000] <dglazkov>
mrbkap: the element/callback queues is what provides the order.

[16:50:26.0000] <mrbkap>
/me doesn't have a concrete example yet.

[16:53:00.0000] <mrbkap>
dglazkov: I think I'm having a hard time reasoning about this because the spec puts the lifetime callback queues on the elements themselves.

[16:53:53.0000] <mrbkap>
dglazkov: Which means that when a lifetime callback recursively causes another lifetime callback, we push that element onto the new queue.

[16:54:21.0000] <zewt>
perplexed at chrome messing up with simple things, like how ^T opens at tab way at the end of the tabs, instead of after the focused tab

[16:54:25.0000] <dglazkov>
mrbkap: there's only one queue per element, so that shouldn't happen

[16:54:35.0000] <zewt>
on the web, apparently no problems are really solved problems

[16:54:56.0000] <mrbkap>
oops, I missed that we remove each processed callback before calling it.

[16:55:31.0000] <mrbkap>
okay, cool.

[16:55:40.0000] <dglazkov>
yay!

[16:56:12.0000] <darobin>
serious side-effects of jet lag: seeing dglazkov in the morning

[16:56:29.0000] <dglazkov>
cannot be unseen

[16:56:52.0000] <mrbkap>
With enough alcohol...

[16:57:27.0000] <darobin>
with enough alcohol he starts being a voice in your head

[17:07:50.0000] <TabAtkins>
Ms2ger: The errata is public, but I forget where. It's hidden somewhere stupid.

[17:22:30.0000] <dglazkov>
darobin: that's the final phase

[17:23:04.0000] <darobin>
/me shudders at the thought of what happens after that...

[17:23:16.0000] <dglazkov>
darobin: btw, did you see that hayato converted shadow DOM spec to ReSpec?

[17:23:31.0000] <dglazkov>
http://w3c.github.io/webcomponents/spec/shadow/

[17:25:05.0000] <darobin>
oooh

[17:25:58.0000] <nimbu>
omg the SPEC OF SHADOWS

[17:26:54.0000] <darobin>
286 warnings, nice :)

[17:29:03.0000] <darobin>
dglazkov: this is sweet; if hayato has any questions I'm happy to help any time

[17:30:20.0000] <darobin>
oh, and I hadn't noticed that webcomponents had moved to GH, that's much better than dvcs.w3

[17:41:13.0000] <MikeSmith>
I hear http://memecrunch.com/generator/custom/ is working as expected again now

[17:42:41.0000] <nimbu>
whats the best new memes on W3C since TPAC

[17:42:45.0000] <nimbu>
or wait is tpac still going on

[17:43:17.0000] <darobin>
nimbu: tpac is still on

[17:43:32.0000] <nimbu>
darobin: are you all wearing the beloved mandrin tpac shirts

[17:43:46.0000] <nimbu>
making you look like party members

[17:43:48.0000] <darobin>
nimbu: not I at this moment, but there's a lot of that going on yes

[17:43:57.0000] <nimbu>
darobin: you all gotta take group photo wearing that

[17:44:08.0000] <TabAtkins>
nimbu: TPAC is, in fact, happening at this very moment.

[17:44:14.0000] <nimbu>
sylvain needs to get a hat with that long hair

[17:44:16.0000] <TabAtkins>
/me has been attending from California this week.

[17:44:19.0000] <darobin>
nimbu: yeah, that's a good idea actually

[17:44:31.0000] <nimbu>
TabAtkins: ahaha that sounds like a nightmare

[17:44:35.0000] <nimbu>
to attend from california

[17:44:46.0000] <TabAtkins>
It's kinda bad, but whatever.  Meetings go from 5pm to 2am.

[17:44:52.0000] <nimbu>
:||||||||||||||||||||||||||||||||||||||||||||||||||||

[17:44:54.0000] <nimbu>
cray

[17:45:12.0000] <nimbu>
darobin: MAKE IT HAPPEN ROBINNNNNNNNNNNN

[17:45:14.0000] <nimbu>
YOU DA MAN

[17:45:38.0000] <darobin>
5pm to 2am isn't so bad

[17:45:42.0000] <darobin>
it could be the other way around

[17:48:03.0000] <darobin>
nimbu: I'm not sure if I can get a bunch of TPAC people doing that, on the fourth evening people are completely unmanageable

[17:48:19.0000] <darobin>
(as opposed to the first evening, where everyone is piled up on the same table drinking)

[17:48:43.0000] <darobin>
but there's a team meeting on Sunday, so you might expect at least that pic with the whole w3c :)

[17:48:43.0000] <nimbu>
:)))

[17:48:48.0000] <nimbu>
YES PLZ

[17:49:03.0000] <nimbu>
i am sure someone can make a meme picture out of it

[17:49:17.0000] <nimbu>
okay GTG BAI TPACS

[17:49:38.0000] <TabAtkins>
darobin: You can always get a picture at the werewolf game.

[17:50:18.0000] <darobin>
TabAtkins: yeah, but that's only ~25 peeps

[20:00:06.0000] <zewt>
oops, did view image on a 1920x1080 pixel canvas in firefox

[20:00:43.0000] <zewt>
time to wait for the braindamaged thing to put a ~10mb data url in the address bar

[20:01:58.0000] <zewt>
one case where persisting a blob url would be a big win

[20:38:04.0000] <zcorpan>
should we make EventSource() Worker() SharedWorker() use utf-8 as the url character encoding?

[01:16:48.0000] <zcorpan_>
jgraham_: why does http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2636 time out the harness?

[01:20:27.0000] <zcorpan_>
looks like done() is broken? http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2637

[01:20:35.0000] <zcorpan_>
jgraham_: ^

[06:42:52.0000] <zcorpan>
can someone merge https://github.com/w3c/web-platform-tests/pull/243 kthxbye

[06:44:28.0000] <Ms2ger>
"We can�t automatically merge this pull request"

[06:44:49.0000] <Ms2ger>
Oh, and that someone would need to fix up the whitespace

[06:46:03.0000] <jgraham_>
I am on it

[06:51:10.0000] <Ms2ger>
/me wonders why zcorpan asked

[06:52:15.0000] <Ms2ger>
Okay, that someone didn't fix the whitespace?

[06:52:49.0000] <jgraham_>
Ms2ger: I don't understand the question, but I fixed the merge conflict and pushed

[06:53:31.0000] <zewt>
if(undefined == toStart) yoda conditionals write not

[06:53:59.0000] <Ms2ger>
And Yoda definitely wouldn't use ==!

[06:54:29.0000] <zewt>
someone i know uses yoda conditionals ... for inequalities D:

[06:55:04.0000] <zewt>
it both makes things impossible to read, and even misses the original *point* (as misguided as it is) of yoda conditionals

[06:56:27.0000] <Ms2ger>
if (undefined !== foo)?

[06:57:35.0000] <zewt>
if(0 < foo && 10 > foo)

[06:58:49.0000] <Ms2ger>
Still not as bad as lisp

[06:58:56.0000] <Ms2ger>
(if (< 0 foo)...

[07:28:38.0000] <FireFly>
(if (< 0 foo 10) ...

[07:39:55.0000] <Ms2ger>
TabAtkins, yeah, that was what I was thinking too... Let me know if you ever find it (re css2.1+)

[07:41:57.0000] <jgraham_>
?iffoo < 0 if foo [...] then;

[07:42:00.0000] <jgraham_>
I think

[07:42:35.0000] <Ms2ger>
jgraham_, what's that?

[07:42:46.0000] <jgraham_>
Forth, I think

[07:43:06.0000] <jgraham_>
Well it was intended to be, but I have never written any forth in my life

[07:43:22.0000] <zewt>
wow what the

[07:43:35.0000] <Ms2ger>
Reverse Polish, eh

[07:43:46.0000] <zewt>
now some w3c tracker page keeps randomly trying to close

[07:44:05.0000] <zewt>
i'm off doing something else and a chrome window steals focus to go ARE YOU SURE YOU WANT TO LEAVE

[07:44:07.0000] <jgraham_>
Yeah, I think you put < and 0 on the stack and then if pops the last two items on the stack, or something

[07:44:21.0000] <zewt>
i don't even know which one, since the focused tab is ... gmail

[07:44:56.0000] <jgraham_>
Oh, probably don't have "foo"

[07:47:13.0000] <jgraham_>
Maybe ?foo 0 < [...] then ;

[07:47:43.0000] <jgraham_>
This is probably not the right forum to learn stack-based programming in real time without actually trying to think

[07:47:43.0000] <Ms2ger>
/me wonders how jgraham_ ended up with Forth

[07:48:03.0000] <jgraham_>
I was thinking of languages that would have weirder if syntax than lisp

[07:48:35.0000] <Ms2ger>
Ah

[08:11:44.0000] <MikeSmith>
Ms2ger: I really don't remember initiating a PR with a th.js file in it

[08:12:23.0000] <Ms2ger>
MikeSmith, no, I meant a PR of mine in the testharness.js repo

[08:12:40.0000] <MikeSmith>
oh

[08:12:45.0000] <Ms2ger>
But you were talking about w3c-test:mirror on wpt, I think

[08:12:50.0000] <MikeSmith>
ah that

[08:12:52.0000] <MikeSmith>
yeah

[08:13:00.0000] <Ms2ger>
Anyway, class over

[08:13:01.0000] <MikeSmith>
sorry for that noise

[08:13:02.0000] <Ms2ger>
/me poofs

[08:13:03.0000] <Ms2ger>
Np

[08:23:30.0000] <espadrine>
where are w3c css tests going? Should they be in <https://github.com/w3c/web-platform-tests>? What's the status?

[08:26:08.0000] <MikeSmith>
espadrine: in a separate repo

[08:26:25.0000] <MikeSmith>
a mercurial repo

[08:26:33.0000] <MikeSmith>
at dvcs.w3.org

[08:26:48.0000] <MikeSmith>
and then they get mirrored at github

[08:26:50.0000] <espadrine>
MikeSmith: oh, found it, <https://hg.csswg.org/test/>

[08:27:01.0000] <MikeSmith>
OK

[08:27:10.0000] <espadrine>
thanks

[09:11:31.0000] <SimonSapin>
espadrine: I believe the plan it to move CSS tests into web-platform-tests, but there is also a bunch of infrastructure to port https://test.csswg.org/shepherd/

[09:13:24.0000] <MikeSmith>
SimonSapin: I think it's safe to say there's a low chance of the Shepherd stuff every getting used by any other groups except CSS

[09:13:49.0000] <espadrine>
SimonSapin: ah ok

[09:14:29.0000] <MikeSmith>
I don't know what the current state of discussion around porting it over to w-p-t but if it is brought over, it'll be only for use by the CSS WG

[09:16:16.0000] <MikeSmith>
I think (hope) that the long-term plan is to come up with a common system that meets whatever the same basic use case is that Shepherd was intended for, but that's instead based on requirements that we all actually agree with

[09:17:18.0000] <MikeSmith>
instead of what Shepherd is based on, which if it's like the rest of the CSS WG infrastructure, is based on idiosyncratic requirements that the CSS WG is the only group that has

[09:17:21.0000] <MikeSmith>
or claims to have

[09:17:36.0000] <MikeSmith>
anyway

[09:27:42.0000] <dglazkov>
good morning, Whatwg!

[09:28:38.0000] <SimonSapin>
MikeSmith: I don’t know more than that, I only heard about it yesterday

[09:28:50.0000] <SimonSapin>
but yes, this would be a good conversation to have

[09:28:55.0000] <MikeSmith>
SimonSapin: yeah

[09:28:56.0000] <SimonSapin>
probably with plinss

[09:29:39.0000] <MikeSmith>
jgraham_ and tobie and rebecca hauck have already been discussing it with peter linss

[09:29:45.0000] <MikeSmith>
SimonSapin: yeah

[09:40:49.0000] <Ms2ger>
Fwiw, my approach to CSS tests right now is "wait"

[09:44:14.0000] <MikeSmith>
that seems to be everybody's approach right now

[09:44:41.0000] <MikeSmith>
I think Peter may be waiting for it to never happen

[09:44:45.0000] <MikeSmith>
waiting it out

[09:53:55.0000] <hober>
wu wei

[09:56:09.0000] <MikeSmith>
hober: another master for us to learn from

[09:57:06.0000] <Ms2ger>
I guess if it doesn't work out, I'll just start putting tests into wpt

[10:08:46.0000] <hsivonen>
argh. I read some www-tag email and now I'm agitated about proposals to sniff bomless UTF-32

[10:33:21.0000] <SimonSapin>
hsivonen: I want to kill most of http://www.w3.org/TR/CSS21/syndata.html#charset , but I really don’t want to argue about it in a meeting :/

[10:34:11.0000] <Ms2ger>
Watch out, you might end up in a meme that way

[10:36:23.0000] <MikeSmith>
that might be an uncomfortable place to be tonight

[14:31:28.0000] <Hixie_>
huh

[14:32:03.0000] <Hixie_>
navigating to javascript:foo essentially does the same as document.open();document.write(eval('foo'));document.close()

[14:33:33.0000] <Hixie_>
hm, no, nevermind

[14:33:39.0000] <Hixie_>
i misinterpreted the result of a test

[15:34:36.0000] <Hixie_>
annevk: yt?

[15:42:09.0000] <Hixie_>
section 3.2 of http://tools.ietf.org/id/draft-hoehrmann-javascript-scheme-00.txt is awesome

[15:42:15.0000] <Hixie_>
it sounds fancy, but the four steps boil down to:

[15:42:19.0000] <Hixie_>
1. get the data

[15:42:26.0000] <Hixie_>
2. figure out what to do with the data

[15:42:36.0000] <Hixie_>
3. do it, and remember the result

[15:42:43.0000] <Hixie_>
4. process the result

[15:43:01.0000] <Hixie_>
(with no more detail than that, except step 1 points to an algorithm to say how to get the data)

[15:43:41.0000] <Hixie_>
section 3.1 is the only section of that spec that's not trivial

[15:44:02.0000] <Hixie_>
let's see if it's right...

[15:45:56.0000] <Hixie_>
uh oh, i might need to hand-parse the URL field

[15:45:58.0000] <Hixie_>
that ought to be fun


2013-11-15
[16:03:43.0000] <annevk-cloud>
waking up… yeah, that's basically what I got out of that RFC

[16:05:07.0000] <annevk-cloud>
you should be able to use the URL parser and do the scheme comparison and then if javascript pass scheme data, query, and fragment along for further processing

[16:10:56.0000] <Hixie_>
annevk: yeah, looking at url parser now

[16:12:11.0000] <Hixie_>
annevk: what does "If c is none of EOF code point, U+0009, U+000A, and U+000D, utf-8 percent encode c using the simple encode set, and append the result to url's scheme data." mean?

[16:13:26.0000] <Hixie_>
oh, i see, "simple encode set" isn't that simple

[16:13:36.0000] <Hixie_>
it's more like the "non-ascii encode set"

[16:15:16.0000] <Hixie_>
hm, is there some algorithm i can call that figures out if "fragment" is the empty string or null and does the right thing accordingly to reconcatenate scheme data, query, and fragment and then percent decode them?

[16:23:41.0000] <annevk-cloud>
Hixie_: i can write one

[16:24:09.0000] <annevk-cloud>
makes sense for other schemes too so should prolly be there

[16:30:57.0000] <annevk-cloud>
Fetch already treats javascript as network error fwiw

[16:36:18.0000] <Hixie_>
annevk-cloud: i can do it. how about an algorithm for percent-decode-utf-8-decode?

[16:36:48.0000] <Hixie_>
nothing like that yet either?

[16:39:14.0000] <annevk-cloud>
guess not

[16:39:42.0000] <annevk-cloud>
please file bugs and assume i'll fix them :)

[16:39:46.0000] <Hixie_>
nah, these are easy

[16:39:49.0000] <Hixie_>
i'm just lazy :-)

[16:39:57.0000] <Hixie_>
took me less time to write that than it did for you to answer :-)

[16:40:11.0000] <annevk-cloud>
well, these might make sense for other urls too

[16:40:17.0000] <annevk-cloud>
heh

[16:42:38.0000] <Hixie_>
does javascript strip leading BOMs automatically?

[16:42:43.0000] <Hixie_>
or do i need to do that for javascript: specifically?

[16:44:43.0000] <Hixie_>
hm, wow, <body onload="&#xFFFE;w('test')"> does work

[16:44:49.0000] <Hixie_>
so I guess I don't have to do it, javascript must be doing it

[16:45:29.0000] <annevk>
in JS a BOM is whitespace iirc

[16:45:59.0000] <annevk>
not in JSON though

[16:47:12.0000] <Hixie_>
ah

[16:47:15.0000] <Hixie_>
fun

[17:24:43.0000] <TabAtkins>
Anyone know if there's some overriding reason the SVGWG hasnt' started their meeting yet?

[17:24:58.0000] <TabAtkins>
It was supposed to start almost half an hour ago. :/

[17:25:51.0000] <MikeSmith>
TabAtkins: no idea but I guess it could be they decided to start late due to being out late last night

[17:26:22.0000] <TabAtkins>
Ah, didn't know they did.  Plus, it looks like they don't have any agenda for the last 1.5 hours, so I guess starting an hour or so late is okay.

[17:27:17.0000] <MikeSmith>
I dunno if they were actually out late last night but I know there was a contigent that was last night and maybe included some of them

[17:27:29.0000] <MikeSmith>
anyway, I'll ping Doug I guess

[17:27:43.0000] <MikeSmith>
ah he's not on IRC

[17:27:47.0000] <heycam>
TabAtkins, yeah pretty much

[17:27:47.0000] <heycam>
TabAtkins, not everyone is here yet, but we'll start in a few minutes

[17:27:57.0000] <TabAtkins>
Okay, cool.

[17:28:11.0000] <TabAtkins>
Not a problem, I was just curious. ^_^

[17:28:27.0000] <TabAtkins>
I'm just drinking and videogaming right now anyway, so wtv

[17:28:48.0000] <annevk>
spotted a chair in the German beer thing earlier last night

[17:29:04.0000] <MikeSmith>
oh the other thing is the hotel apparently announced just yesterday that they unilaterally changed the check-out time for today to 9 am (from 12 noon)

[17:29:21.0000] <MikeSmith>
so there was a long line of people this morning trying to check out by 9am

[17:29:47.0000] <MikeSmith>
which line I personally avoided by just not bothering to try to check out at 9am

[17:30:15.0000] <MikeSmith>
since as far as I'm concerned my checkout time is still 12noon

[17:30:17.0000] <annevk>
+1

[17:58:43.0000] <Hixie_>
MikeSmith: you can't check out from the room tv?

[18:00:25.0000] <MikeSmith>
Hixie_: hah

[18:00:41.0000] <MikeSmith>
not here

[18:00:54.0000] <MikeSmith>
especially not at this hotel

[18:04:44.0000] <Hixie_>
i have never been so happy to have not gone to a tpac

[18:04:57.0000] <Hixie_>
between the horror stories about the location and hotel and the horror stories on w3cmemes... :-)

[18:08:25.0000] <MikeSmith>
this hotel is a much worse joke than some of worst jokes that went out from w3cmemes last night

[18:12:57.0000] <jgraham_>
MikeSmith: Don't hold back, tell us what you really think

[18:14:21.0000] <jgraham_>
To be fair the hotel did have some positive qualities. The showers were nice

[18:14:35.0000] <jgraham_>
OTOH the beds seemed to be made of granite

[18:29:55.0000] <sangwhan__>
i'm surprised nobody made a meme about the 9am check out nonsense

[19:02:54.0000] <TabAtkins>
MikeSmith: You in the Wuzhou Guest House?

[19:03:31.0000] <TabAtkins>
I didn't have a choice about my hotels - I literally could not book the Wuzhou.  They had three different mechanisms to prevent me from entering required information into one of the forms.

[19:25:06.0000] <MikeSmith>
TabAtkins: yeah, Wuzhou Guest House

[19:37:01.0000] <annevk>
wait TabAtkins, you're here?

[19:37:21.0000] <TabAtkins>
No, but I had gotten a plane and hotel reservation before I had to cancel.

[19:37:28.0000] <annevk>
ah

[19:38:14.0000] <annevk>
So why does Google still not support 9am Toronto converted to London?

[19:38:25.0000] <annevk>
"9AM Toronto converted to London" as query that is

[19:40:02.0000] <SimonSapin>
annevk: well, that may be ambiguous, depending on the date, with DST and all

[19:40:24.0000] <annevk>
SimonSapin: same day would be fine

[19:40:37.0000] <annevk>
SimonSapin: maybe with some warnings around dates where it changes

[19:52:57.0000] <zewt>
http://www.wolframalpha.com/input/?i=9am+toronto+in+london+time

[06:10:53.0000] <hallvors1>
annevk-cloud: are you around?

[08:50:16.0000] <Hixie_>
anyone able to translate https://www.w3.org/Bugs/Public/show_bug.cgi?id=23387 ?

[08:57:48.0000] <GPHemsley>
What's this I hear about WebRTC not supporting conference calls?

[08:59:05.0000] <GPHemsley>
Hixie_: With a name like "Gotta Getmedat", are you sure he's not just yanking your chain?

[09:02:57.0000] <Hixie_>
GPHemsley: i've no idea

[09:03:12.0000] <GPHemsley>
/me didn't bother to read any of the words beyond that.

[09:03:27.0000] <Hixie_>
GPHemsley: if they are, it's not a very good yanking, since i've just no idea what it means

[09:03:32.0000] <Hixie_>
/me ignores names in bugs

[09:03:38.0000] <GPHemsley>
ah

[09:03:45.0000] <Hixie_>
(which is why sometimes i wontfix bugs i filed...)

[09:03:47.0000] <GPHemsley>
one of those table-reading things, I guess ;)

[09:03:58.0000] <Hixie_>
table-reading?

[09:08:19.0000] <GPHemsley>
which headers are read first

[09:46:23.0000] <zcorpan>
anyone have a bright idea on how to detect that a navigation is *not* happening, in a reliable way that doesn't use timeouts?

[09:47:11.0000] <zcorpan>
i want to test e.g. <area>.click() and see that it navigates an iframe to the right place, but i don't want to wait for the test to time out if there was no navigation

[09:48:39.0000] <zcorpan>
so there are various things the spec does on navigation, like aborting fetches, so maybe i can insert an <img> to the document just before i do the click() and if the img receives a load event, that means that the navigation failed. but i'm not confident that that isn't racy

[10:09:09.0000] <zcorpan>
or open a websocket and see if it gets an open event

[10:10:21.0000] <zcorpan>
but the cleanup steps happen async while the fetch abort steps should be sync per spec, i think

[10:20:32.0000] <gsnedders>
I can't think of any way of doing that. You can probably abuse the details of the document loading steps, but nobody implements them so probably not that useful.

[10:20:50.0000] <gsnedders>
Well, unless you care about testing Zombie-Presto.

[10:22:56.0000] <gsnedders>
Huh, I'm getting www.dropbox.com failing cert validation; somehow got a cert for *.opendns.com. he hell.

[10:25:26.0000] <zcorpan>
yeah it would be a bit easier to reason about what will happen if the spec was actually implemented :-| it looks like blink does what i think should happen for <img>, but gecko doesn't abort the img load early

[10:26:15.0000] <zcorpan>
if i attempt a new nagivation immediately after click() (using window.location), then that navigation is ignored in gecko but is not ignored in blink

[10:26:31.0000] <zcorpan>
but don't worry, the web has proven this is interoperable

[10:29:35.0000] <gsnedders>
Oh. So without HTTPS Everywhere, dropbox loads to OpenDNS block page.

[10:29:50.0000] <gsnedders>
I just want to download a small file. ;_;

[10:32:52.0000] <gsnedders>
Well, I guess that's not unreasonable given the on-train wifi often gets 1KB/s, or less.

[10:37:05.0000] <TabAtkins>
Oh good god, FAA finally updated its regs about small electronics.

[10:37:14.0000] <TabAtkins>
I'd heard rumbles, but just got an email from my main carrier with the details.

[10:37:18.0000] <TabAtkins>
Fucking finally.

[10:38:42.0000] <ebollens>
Yup they finally did the no duh thing

[10:39:03.0000] <ebollens>
Now it's just on the carriers to implement the changes.

[10:40:44.0000] <TabAtkins>
Right. US is properly updated now, at least on its mainline flights.

[10:40:50.0000] <TabAtkins>
And that's all I care about.

[11:54:41.0000] <dglazkov>
mrbkap: got a sec?

[11:55:28.0000] <dglazkov>
mrbkap: https://www.w3.org/Bugs/Public/show_bug.cgi?id=23778 penny for your thought

[11:57:17.0000] <mrbkap>
dglazkov: looking.

[11:57:21.0000] <mrbkap>
dglazkov: I was just about to ping you!

[12:00:12.0000] <mrbkap>
dglazkov: I have to go to lunch. I'll comment in the bug.

[12:00:33.0000] <dglazkov>
mrbkap: lunches are important. I probably need to do that too.

[12:02:07.0000] <mrbkap>
dglazkov: What should the result of https://pastebin.mozilla.org/3611161 be?

[12:09:58.0000] <dglazkov>
mrbkap: it should throw NotSupportedError when trying to register

[12:10:23.0000] <dglazkov>
mrbkap: http://www.w3.org/TR/custom-elements/#dfn-custom-element-constructor-generation

[12:10:35.0000] <dglazkov>
mrbkap: step 1

[12:11:29.0000] <Ms2ger>
tr/, eh

[12:44:42.0000] <xxtjaxx>
http://imagebin.org/index.php?mode=image&id=277192 .o(Why am I doing this to me...)

[15:42:42.0000] <jorendorff>
Domenic_: has anyone suggested Promise.prototype.finally(cb) yet?

[15:43:16.0000] <Domenic_>
jorendorff: haha yeah, I and others want it. https://github.com/domenic/promises-unwrapping/issues/18

[15:43:21.0000] <jorendorff>
all this talk of "lifetimes" made me think of it

[15:43:37.0000] <Domenic_>
If you can think of a use case for it in the loaders spec, that'd make the argument easier :)

[15:45:14.0000] <jorendorff>
good grief, there are already some nice use cases in that bug

[15:45:31.0000] <jorendorff>
well, two anyway: event listeners and testing cleanup

[15:46:00.0000] <Domenic_>
yeah, but there's nothing like "we need it for another part of the spec" to advance something to es6 status, as we know from september :)

[15:46:07.0000] <jorendorff>
:)

[15:46:35.0000] <jorendorff>
well, i'm afraid i don't think we need it for anything, but i'll keep my eyes open :)


2013-11-16
[02:13:41.0000] <Ms2ger>
annevk-cloud, http://html5.org/tools/web-apps-tracker?from=8288&to=8289 is empty

[02:16:47.0000] <MikeSmith>
odd, it's not such a big diff so it's not because of the size

[02:17:26.0000] <Ms2ger>
I think it's a caching issue?

[02:18:10.0000] <MikeSmith>
dunno, has the been a problem before?

[02:18:42.0000] <Ms2ger>
Yeah

[02:24:48.0000] <MikeSmith>
in other news I wonder if I should try to port the tests from http://www.hixie.ch/tests/adhoc/html/navigation/javascript-url/ to the w-p-t test suite?

[02:25:31.0000] <Ms2ger>
That would be nice

[02:29:08.0000] <MikeSmith>
OK I will

[02:30:19.0000] <Ms2ger>
If only getting tests submitted always was this easy :)

[02:35:18.0000] <MikeSmith>
heh :)

[02:37:16.0000] <Ms2ger>
Aww, no new w3cmemes

[02:37:52.0000] <MikeSmith>
I think w3cmemes may be out drinking again

[02:38:01.0000] <MikeSmith>
which could be dangerous

[02:40:53.0000] <MikeSmith>
though really I guess there's not been as much raw material to work with since the People's TPAC 2013 Party Congress ended

[02:41:59.0000] <MikeSmith>
http://lists.w3.org/Archives/Public/public-whatwg-archive/2013Nov/0108.html seems pretty intriguiing

[02:42:53.0000] <MikeSmith>
CSS idea from abarth for solving the responsive-images clusterfuck

[02:43:32.0000] <Ms2ger>
/me wonders if w3cmemes is secretly just Martijnc 

[02:43:34.0000] <Ms2ger>
Er

[02:43:36.0000] <Ms2ger>
MikeSmith*

[02:43:58.0000] <Ms2ger>
Who starts their name with a capital M anyway...

[02:44:31.0000] <MikeSmith>
Indeed

[02:50:16.0000] <MikeSmith>
"We just need to teach the preload scanner to parse a subset of CSS and match a subset of selectors."

[02:50:24.0000] <Ms2ger>
That sounds pretty scary, IMO

[02:50:40.0000] <MikeSmith>
yeah and anyway that seems like a biggish "just"

[02:51:34.0000] <MikeSmith>
the whole FUBAR-waiting-to-happen situation around srcset and src-N seems scary too

[04:21:14.0000] <GPHemsley>
If a spec says "a pair of X and Y", how would you represent that programmatically?

[04:27:35.0000] <Ms2ger>
(X, Y)? :)

[04:30:20.0000] <GPHemsley>
Would you consider (Y, X) to also represent that description?

[04:57:14.0000] <Ms2ger>
No

[05:00:38.0000] <GPHemsley>
Ms2ger: Well, apparently the editors of the XML Schema spec do.

[05:00:54.0000] <GPHemsley>
Ms2ger: http://www.w3.org/TR/xmlschema-1/

[05:01:01.0000] <GPHemsley>
Ms2ger: Search for "pair" if you're interested

[05:01:07.0000] <Ms2ger>
I don't think I have anything to say about xml schema that is appropriate for a public channel

[05:01:18.0000] <GPHemsley>
:)

[05:16:56.0000] <JakeA>
If I do "new URL('/feeds.rss', '/')" within a SharedWorker, will it give me a url on the same domain as the shared worker?

[05:18:00.0000] <JakeA>
(feels like the base param of URL should default to '/' rather than 'about:blank')

[05:33:06.0000] <SimonSapin>
annevk-cloud: ping

[07:02:57.0000] <JakeA>
new URL('/feeds.rss', '/') throws an error in Chrome, so I guess base urls need to be absolute

[07:10:07.0000] <SimonSapin>
JakeA: yes, base URLs need to be absolute

[07:57:05.0000] <zewt>
dreaming of the day browsers detect double-redirects and fix up history

[09:02:39.0000] <TabAtkins>
hober: Hahahaha

[09:21:10.0000] <TabAtkins>
hober: But for real, if you can divine any objections from apple that *aren't* personal aesthetic objections, please freaking let me know. I haven't heard anything.

[09:21:39.0000] <TabAtkins>
hober: Besides the vague "defeats optimization" concerns that Ryosuku brought up at first, and then repeatedly and explicitly refused to say anything about.

[09:36:20.0000] <hober>
TabAtkins: what's the hahahaha about?

[09:36:33.0000] <TabAtkins>
I assumed it was you who did the w3cmeme

[09:36:35.0000] <hober>
/me just got home and hasn't been on the tubes

[09:36:42.0000] <hober>
oooh

[09:36:45.0000] <hober>
/me checks

[09:37:09.0000] <hober>
hahahahaha

[09:37:12.0000] <hober>
no, that wasn't me

[09:37:19.0000] <hober>
/me clicks on the email


2013-11-17
[17:09:17.0000] <GPHemsley>
zewt: Pretty sure I filed a Firefox bug on that a long time ago.

[19:06:18.0000] <MikeSmith>
Hixie_: is the per-spec expected result of http://www.hixie.ch/tests/adhoc/html/navigation/javascript-url/001.html that the inside the iframe should be "inner base used for resolution"?

[19:06:47.0000] <MikeSmith>
or "inner address used for resolution"?

[19:06:55.0000] <MikeSmith>
or .. something else

[04:55:21.0000] <Ms2ger>
OH: <tr height="javascript:(document.body.parentNode.offsetHeight/((100/34).toFixed(20))).toFixed(1)" />

[05:49:00.0000] <MikeSmith>
Ms2ger: lovely

[09:09:30.0000] <boogyman>
Looking for an alternative to CSS box-sizing:padding-box. http://jsfiddle.net/U7UuV/


2013-11-18
[00:39:48.0000] <annevk-cloud>
back

[01:42:02.0000] <xxtjaxx>
How do you guys handle ad/content tracking scripts in your webpages I've got a site here that has them interspersed with the normal content. First idea in my head was putting it at the bottom of the page so it runs after the initial content is  loaded and the site can be used. Are theere trackers out there that explicitly *want* to be at the top of the page?

[02:55:49.0000] <annevk>
So with <img lazyload>, how much do we need src-*?

[02:56:03.0000] <annevk>
It seems it allows for putting <img> in the markup and adjusting things with <script>

[03:00:30.0000] <jgraham>
Hmm, I think you just came up with an idea I like even less than all the other ones

[03:01:35.0000] <jgraham>
Forcing the actual list of images into a script doesn't seem good from any point of view

[03:01:51.0000] <jgraham>
Apart from "we don't have to have this discussion"

[03:02:32.0000] <Ms2ger>
That's a pretty big plus

[03:03:25.0000] <annevk>
Geofencing seems pretty interesting: http://lists.w3.org/Archives/Public/www-archive/2013Nov/att-0007/W3C_TPAC_Breakout_Geolocation_November_2013.pdf

[03:03:56.0000] <annevk>
jgraham: they could be in data-* with a fallback in src

[03:04:16.0000] <annevk>
jgraham: and then in five years we study what's out there

[03:05:32.0000] <jgraham>
/me doesn't quite understand geofencing but feels aggrieved that it doesn't involve swords

[03:06:34.0000] <annevk>
From what I'm told the idea is that you download some information about the building you're in and then it can somewhat accurately tell you whether you're in or out, what floor, what hallway, what room, etc.

[03:07:06.0000] <jgraham>
annevk: Well you are sort of presuming a solution there "use data-*". The only question is what people will put in the data-*. But at this stage they will probably just copy one of the existing proposals according to personal preference

[03:07:22.0000] <jgraham>
So I'm not sure how much we learn

[03:07:25.0000] <annevk>
And then applications can for instance decide not to work if you're in the wrong room (although how secure you can make that, not sure)...

[03:07:56.0000] <annevk>
jgraham: we'll learn how much it's used, how much variety people require, etc.

[03:08:10.0000] <jgraham>
It would be nice if there was some way to extend HTML to allow richer attribute types without killing compat. But I don't think it's possible

[03:08:58.0000] <jgraham>
annevk: Seems kind of like punting on the problem. And I don't think that will make anyone happy. In fact I think that we are perhaps past the point where implementors will agree to do that

[03:09:10.0000] <jgraham>
But go ahead and suggest it

[03:13:17.0000] <annevk>
Well it seems some form of lazyload will happen. But I'm not touching that thread.

[03:15:25.0000] <jgraham>
The src-N thread? Or the lazyload one?

[03:21:47.0000] <annevk>
The former, discussed the latter in person with the WG.

[03:23:31.0000] <jgraham>
I don't mind throwing myself to the wolves if you think it is actually a sensible idea

[03:27:02.0000] <annevk>
Well, I think we have little data and lots of problem solving. And it seems lazyload addresses the scanner problem.

[03:34:21.0000] <zcorpan>
annevk: http://html5.org/tools/web-apps-tracker?from=8288&to=8289 is empty

[03:34:34.0000] <annevk>
Bah

[03:37:36.0000] <annevk>
zcorpan: "fixed"

[03:37:50.0000] <zcorpan>
thx

[04:13:58.0000] <MikeSmith>
greetings comrades

[04:14:47.0000] <MikeSmith>
back in Japan, on a train headed back to my shack

[04:16:56.0000] <wilhelm_>
Yoyo!

[04:17:09.0000] <wilhelm_>
I'm in your neighbourhood now.

[04:17:21.0000] <wilhelm_>
Nishi-Shinjuku 3-6.

[04:32:18.0000] <MikeSmith>
wilhelm_: oh wow

[04:32:29.0000] <MikeSmith>
cool

[04:33:15.0000] <wilhelm_>
Natasha and I have a tentative date on top of the Park Hyatt tomorrow, for one glass there. Feel free to join. (c:

[04:33:46.0000] <MikeSmith>
ok will try

[04:40:19.0000] <zcorpan>
new DOMParser().parseFromString("\uBBEF\u3CBF\u7979\u3E2F","text/xml") - interesting case (from bjoern on es-discuss)

[04:40:49.0000] <zcorpan>
wonder if innerHTML suffers from that kind of insanity as well

[04:45:55.0000] <zcorpan>
parses into a Text node in gecko

[05:30:03.0000] <jochen__>
ls

[05:30:06.0000] <jochen__>
:-/

[05:31:01.0000] <jgraham>
.

[05:31:02.0000] <jgraham>
..

[05:32:24.0000] <Ms2ger>
What kind of ls prints . and .. by default?

[05:33:21.0000] <jgraham>
The irc ls

[05:33:25.0000] <jgraham>
Of course

[05:45:26.0000] <Ms2ger>
new DOMParser().parseFromString("\uBBEF\u3CBF\u7979\u3E2F","text/xml")

[05:45:28.0000] <Ms2ger>
Whyyyyy

[05:46:37.0000] <Ms2ger>
Looks like it doesn't work in Chrome

[05:50:43.0000] <jgraham>
Where is that from?

[05:50:59.0000] <Ms2ger>
Backscroll

[05:51:09.0000] <Ms2ger>
And Bjoern, unsurprisingly

[05:51:34.0000] <jgraham>
Ah, right, missed the backscroll

[05:51:51.0000] <jgraham>
I don't know why it wouldn't work, really :)

[05:52:00.0000] <jgraham>
(OK, I guess I do)

[05:52:08.0000] <Ms2ger>
I thought I did

[05:52:13.0000] <Ms2ger>
Then I looked at the code and didn't

[05:53:16.0000] <Ms2ger>
/me tries a debugger

[06:07:22.0000] <Ms2ger>
/me runs into "This code was bogus when I found it. -- hsivonen"

[06:15:57.0000] <annevk>
smaug____: you might find https://www.w3.org/Bugs/Public/show_bug.cgi?id=20322 interesting

[06:17:16.0000] <smaug____>
looking... (and hoping the 3G connection doesn't die )

[06:20:15.0000] <hsivonen>
I moved html5.validator.nu, validator.nu, bugzilla.validator.nu and parsetree.validator.nu to new VMs. Please let me know if I broke something. (DNS might take up to 24 hours to update.)

[06:21:02.0000] <annevk>
hsivonen: I'm back in London if there's anything you still need me to look at

[06:21:47.0000] <hsivonen>
annevk: no immediate need. the charset stuff hasn't progressed in a few days due to higher-priority stuff

[06:22:08.0000] <annevk>
I like how the charset stuff is going

[06:22:13.0000] <hsivonen>
(such as this server move before the old servers are eaten by doom)

[06:22:32.0000] <annevk>
localization mess is now sorted in Gecko it seems

[06:22:51.0000] <hsivonen>
annevk: for fallback, not for detectors

[06:23:02.0000] <hsivonen>
annevk: also, apparently not on B2G

[06:23:14.0000] <annevk>
so B2G doesn't use that code at all?

[06:23:34.0000] <hsivonen>
annevk: if you have a B2G device with a recent mozilla-central image, you could test

[06:23:51.0000] <hsivonen>
annevk: I don't have a device but I believe B2G Gecko always runs as en-US

[06:24:33.0000] <hsivonen>
I tested today that Android now works

[06:24:41.0000] <hsivonen>
which is progress

[06:24:57.0000] <annevk>
I think I only have an en-US image

[06:26:18.0000] <hsivonen>
maybe there's another device around the office?

[06:26:34.0000] <hsivonen>
anyway, you probably have a better chance of testing this on B2G than I do

[06:27:20.0000] <hsivonen>
I'm thinking of dropping detectors that aren't enabled by default for any locale when I move the charset menu to a JSM

[06:27:32.0000] <hsivonen>
if that makes it through review, that is

[06:37:40.0000] <Ms2ger>
zcorpan, thanks for the review

[06:37:40.0000] <Ms2ger>
s

[06:38:17.0000] <annevk>
hsivonen: makes sense

[06:38:24.0000] <zcorpan>
Ms2ger: welcome. i haven't received any chocolate yet, though :-|

[06:43:31.0000] <jgraham>
zcorpan: I was going to get some and bring it to China. But that didn't happen. So I guess it will be by mail and/or next time I am in Sweden

[06:43:49.0000] <hsivonen>
Interesting how Apache feels like legacy software after dealing with nginx

[06:43:58.0000] <hsivonen>
maybe part of it is just the config syntax

[06:44:18.0000] <zewt>
nginx config syntax is painfully ad hoc

[06:44:31.0000] <zewt>
"variables! except you can't use them consistently, and some uses randomly crash"

[06:44:42.0000] <zcorpan>
Ms2ger: hmmm. http://w3c-test.org/web-platform-tests/master/dom/nodes/Comment-constructor.html times out in blink. the last test

[06:45:11.0000] <hsivonen>
zewt: doing redirects with anything but the full original request URL is quite annoying in nginx, though

[06:46:32.0000] <hsivonen>
zewt: Apache's config format seems to have grown in an even more ad hoc fashion

[06:46:33.0000] <zewt>
also nginx doesn't support the proxy header saying whether the request came in on http or https (don't remember the name), which is a pretty massive gap

[06:46:57.0000] <zewt>
yeah

[06:46:58.0000] <zcorpan>
jgraham: ok cool :-)

[06:47:45.0000] <hsivonen>
zewt: solution, redirect from http to https in nginx, use HSTS, assume that everything came in vie https :-)

[06:48:19.0000] <hsivonen>
s/vie/via/

[06:49:59.0000] <zewt>
heh, when i was looking into that header, i found that ... the creation of internal redirects in nginx is completely hardcoded

[06:52:49.0000] <zcorpan>
Ms2ger: ok so the iframe test looks unreliable as the load event might be fired before the listener gets registered

[06:53:43.0000] <zcorpan>
Ms2ger: can you fix that in a new PR, e.g. by creating the iframe element in the script?

[07:12:11.0000] <Ms2ger>
zcorpan, gah, I thought I'd considered that

[07:13:27.0000] <Ms2ger>
Looks like I didn't

[07:19:27.0000] <Ms2ger>
zcorpan, https://github.com/w3c/web-platform-tests/pull/438

[07:22:58.0000] <zcorpan>
thx

[07:23:18.0000] <Ms2ger>
Np, sorry I didn't catch it

[07:25:52.0000] <jgraham>
Hmm, so having a test set a sleep of 1000s seems to be problematic

[07:26:12.0000] <jgraham>
Since it keeps the thread alive even though the browser moves on

[07:26:26.0000] <jgraham>
Which in turn keeps the web server alive

[07:26:38.0000] <jgraham>
Which hangs my test runner

[07:26:49.0000] <jgraham>
At least until it finishes

[07:26:52.0000] <jgraham>
(I think)

[07:27:11.0000] <jgraham>
Obviously I can reduce the timeout, but I wonder if there is a generally good solution

[07:35:08.0000] <zcorpan>
sleeping for 1000s seems like something tests shouldn't be doing. is that the only problem or is it also a problem with tests that set a reasonable timeout and then move on earlier (e.g. because the test failed)?

[07:38:54.0000] <jgraham>
Well the problem is that as long as the thread is alive the server won't exit

[07:39:34.0000] <jgraham>
So a test that hangs for 10s but fails before that, and happens at the end of the run, will still cause a pointless 10s wait

[07:41:14.0000] <jgraham>
I should perhaps move the server into a process rather than a thread and just kill it at the end

[07:49:51.0000] <zcorpan>
yeah

[09:15:52.0000] <Hixie_>
MikeSmith: inner base, i think

[09:16:29.0000] <MikeSmith>
Hixie_: thanks

[09:18:09.0000] <Hixie_>
TabAtkins: btw, i would caution against assuming that "RICG and a lot of authors" is necessarily representative of "average authors".

[09:19:10.0000] <Hixie_>
TabAtkins: also, it's not clear to me that the average author is necessarily good at designing good languages. it's often the case that users aren't good at UX, and it seems to me the same applies with authors and language design.

[09:19:39.0000] <dglazkov>
good morning, Whatwg!

[09:22:20.0000] <marcosc>
Hixie_: I don't think that's being disputed (about language design). I don't think the RICG folks are designing the language... they are just saying, "yeah, I could use that. Seems ok and kinda makes sense." Remember, we left it for Tab and John to design the language.

[09:22:29.0000] <marcosc>
The RICG has no input there

[09:22:44.0000] <marcosc>
Same with srcset. We left that to you.

[09:22:56.0000] <Hixie_>
sure. i'm just saying that tab's arguing that the RICG likes it therefore it must be good design, and that that doesn't follow.

[09:23:17.0000] <Hixie_>
(srcset was mostly hober's design, i just thought it was good)

[09:25:23.0000] <marcosc>
Sure, but same applies. I think Tab would also agree... I'm not sure what would be the best way to ascertain what the "best" design is. I thought of running a "challenge" in the past, where devs would be asked to solve a problem using the different options and then see what they get right/wrong etc.

[09:25:40.0000] <marcosc>
I can't think of another way to validate this

[09:25:50.0000] <Hixie_>
that's how we designed microdata

[09:26:20.0000] <marcosc>
do you think we could try that out?

[09:26:26.0000] <Hixie_>
if you have the money...

[09:26:35.0000] <marcosc>
oh, we don't need to do all the eye tracking stuff

[09:26:56.0000] <marcosc>
that's overkill, me thinks

[09:27:13.0000] <marcosc>
but say, we have 10 different problems

[09:27:15.0000] <Hixie_>
at a minimum you need a qualified usability researcher to run the study

[09:27:21.0000] <Hixie_>
and they cost money

[09:27:35.0000] <marcosc>
I married one :)

[09:27:48.0000] <Hixie_>
you'd need an independent one :-)

[09:28:21.0000] <marcosc>
dammit! now I need to get a divorce!

[09:28:25.0000] <marcosc>
:)

[09:28:35.0000] <Hixie_>
that would definitely not help make her independent :-)

[09:29:00.0000] <marcosc>
I think she is quite capable of conducting the research independently. She is not testing me.

[09:29:22.0000] <Hixie_>
well, if you can get her to do it, that's certainly the best way to evaluate languages and APIs

[09:29:50.0000] <marcosc>
ok, will talk to her about it and see if we can come up with some unbiased way of testing this

[09:31:45.0000] <jgraham>
To be fair you don't *need* all of that stuff

[09:32:39.0000] <jgraham>
It isn't obviously true that doing nothing is better than doing something suboptimal

[09:32:50.0000] <Hixie_>
all what stuff?

[09:33:10.0000] <jgraham>
An independent, qualified, usability researcher

[09:33:53.0000] <Hixie_>
well, without one anyone who disagrees with the results will just think they were bad because the researcher screwed up somehow

[09:34:06.0000] <Hixie_>
so it won't help get people on the same page

[09:34:20.0000] <jgraham>
That seems like argument by authority :)

[09:34:29.0000] <Hixie_>
and it won't help improve the language if the person desigining it is one of those who disagrees with the results

[09:35:04.0000] <Hixie_>
what does?

[09:35:35.0000] <jgraham>
People believing a study because the person that carried it out is an "expert"

[09:36:29.0000] <Hixie_>
they'd believe the results were sound because it was executed in a competent fashion, not because of the authority of the researcher.

[09:36:44.0000] <jgraham>
If you do a study and then disagree with the results and so ignore them, all you wasted was some time

[09:37:16.0000] <Hixie_>
time is the single most valuable resource we have

[09:37:18.0000] <jgraham>
If they are qualified to judge whether the study was done in competent fashion, they are also qualified to design the study themselves

[09:37:33.0000] <Hixie_>
not really sure what you're arguing here :-)

[09:38:14.0000] <Hixie_>
i'm just saying that if you have people who disagree on the quality of a design, and you want to get objective data to convince one group or another, and you get data that's trivially dismissed, you have made no progress on your original problem.

[09:38:40.0000] <jgraham>
I think my point is that having an expert to help you do the study is nice, but if you design a study and do it without one, that isn't obviously going to be worse than doing nothing at all

[09:38:52.0000] <jgraham>
In fact it may be better if you do a good job

[09:39:03.0000] <Hixie_>
if you just want data for your own personal, rather than to convince others, then yeah, for sure, anything is better than nothing.

[09:39:39.0000] <Hixie_>
if you want to convince others, then i think nothing would be better than a study that will be dismissed by some of the people you're trying to convince, because it can actually make the arguments even more bitter.

[09:40:09.0000] <jgraham>
Well I don't think it is clear that other people will reject your conclusions because you lacked expertise

[09:40:24.0000] <jgraham>
Indeed these things often go the other way (people believe flawed studies)

[09:40:34.0000] <jgraham>
see also: almost all benchmarks

[09:41:11.0000] <Hixie_>
benchmarks are a great example, where the browsers who do well on flawed benchmarks think they're good benchmarks, and the other browsers think the benchmarks are a sign that the other browser vendor is evil.

[09:42:06.0000] <jgraham>
I think browser engineers generally agree on the dubious value of many benchmarks. Their PR departments may disagree, and the public certainly does.

[09:42:35.0000] <jgraham>
So the people that you need to convince are convinced despite a methodology that all the experts agree sucks

[09:43:03.0000] <Hixie_>
depends who you are trying to convince :-)

[09:43:40.0000] <Hixie_>
i think if you did a flawed study that showed srcset was better than src-n, tab would point out (correctly!) that it was a flawed study, and not change his mind about srcset not being any good (quite justifiably!)

[09:43:57.0000] <Hixie_>
and we wouldn't be any further along

[09:45:35.0000] <jgraham>
That depends on him pointing out specific flaws in the study. If he could do that you could correct them

[09:46:57.0000] <Hixie_>
i think you underestimate the difficulty in not biasing results in a study

[09:47:17.0000] <jgraham>
It is also true that people are naturally skeptical of results that support a particular agenda coming from entities pushing that agenda e.g. Microsoft publishing studies about the awesomeness of Windows. So, sure, if you have nailed your colours to a particular mast and then come out with "data" supporting that conclusion you might have difficulties

[09:47:36.0000] <Hixie_>
we actually did have something like this already for html. for example, someone once did record a user using an AT to show that longdesc="" was useful.

[09:47:38.0000] <jgraham>
But there is no reason that you have to do that

[09:47:48.0000] <Hixie_>
and the a11y guys and i came to diametrically opposite conclusions from that video

[09:47:54.0000] <Hixie_>
(it wasn't intended to be a study, granted)

[09:47:54.0000] <marcosc>
I guess the idea would be to get stakeholders to fist agree on the study before running it

[09:48:04.0000] <jgraham>
You can, for example, get the relevant parties to review the methodology in advance

[09:48:26.0000] <marcosc>
exactly

[09:48:33.0000] <jgraham>
I am well aware of the difficulties of doing studies

[09:48:50.0000] <jgraham>
I am also aware that even "experts" often screw up

[09:49:12.0000] <jgraham>
So having an expert is not a guarantee that your method is not flawed

[09:49:23.0000] <Hixie_>
jgraham: a large part of the difficulty of operating such studies is actually in how you interact with the subject, which isn't something you can plan in advance and is something that takes a lot of training.

[09:49:27.0000] <Hixie_>
but anyway

[09:49:36.0000] <Hixie_>
feel free to go ahead with an unqualified researcher :-)

[09:49:56.0000] <jgraham>
Hixie_: It seems unlikely, in this case, that you would have an actual lab. Instead you would try to run something over the internet

[09:51:36.0000] <marcosc>
yeah, that's what I was thinking too

[09:52:03.0000] <marcosc>
get it on A List Apart or one of the large design sites

[09:52:08.0000] <jgraham>
(there is a nice example of the way that experts screw up in http://www.lhup.edu/~dsimanek/cargocul.htm Search for "maze")

[09:53:25.0000] <jgraham>
And FWIW I can certainly see any number of ways to screw up this kind of experiment

[09:53:59.0000] <jgraham>
I don't think that means it isn't worth trying, within the constraints of the avalliable resources though

[09:54:48.0000] <Hixie_>
just, don't be surprised if the result is that people dismiss the study because it's flawed, is all i'm saying.

[09:55:14.0000] <Hixie_>
i do think such studies, if performed competently, are the best way to design languages

[09:55:46.0000] <Hixie_>
but i think that if performed incompetently, they can be trivially used to justify any design that people want, regardless of the actual quality

[09:56:54.0000] <Hixie_>
heck even if performed competently, people still dismiss the results

[09:57:03.0000] <Hixie_>
see e.g. the microdata studies, vs RDF people

[09:57:21.0000] <jgraham>
Well the alternative is that people use theoretical arguments and gut feelings to justify any design that they want, so it's not obvious that the approach where you try to gather some data is worse on average

[09:57:32.0000] <Hixie_>
we weren't trying to convince the RDF guys, we were just trying to find results ourserves for designing microdata, but basically anyone who disagrees with microdata's design just dismisses the studies as flawed.

[09:57:44.0000] <Hixie_>
(which isn't unreasonable, we haven't put the videos up)

[09:58:54.0000] <marcosc>
the study was a little bit... problematic... ;)

[09:58:58.0000] <Hixie_>
jgraham: the only way in which it could be worse is that it changes the arguments from "i think it looks better" vs "i think it looks worse" to "i think this study says it is better" vs "i think you are misinterpreting the study"

[09:59:02.0000] <marcosc>
but let's not go there again :)

[09:59:16.0000] <Hixie_>
marcosc: how so?

[09:59:40.0000] <marcosc>
I posted my rationale back when you did the study. The sample size was way too small, you changed the experiment half way through

[09:59:41.0000] <Hixie_>
jgraham: (and i think the second set is worse because it tends to be more bitter)

[09:59:52.0000] <Hixie_>
jgraham: but certainly it doesn't have to end up worse, i agree

[10:00:07.0000] <jgraham>
Hixie_: You are assuming that no one will change their opinion based on a study. That seems unreasonably pessimistic

[10:00:57.0000] <Hixie_>
jgraham: i'm just saying some people won't, or will use the study to back up their opinion regardless of whether it does or not. but sure, some people hopefully would not be so biased.

[10:01:30.0000] <marcosc>
Hixie_: that's always the risk - but maybe involving them from the beginning might help.

[10:01:45.0000] <Hixie_>
marcosc: i don't think that criticism makes any sense in the context of what we were studying, but ok

[10:02:26.0000] <Hixie_>
(it was a usability study to try to find a good design; that's exactly how you run those for optimal effect)

[10:02:49.0000] <marcosc>
[citation needed] is all I'm saying

[10:02:55.0000] <Hixie_>
(that's different from a survey, or other such study, where you're trying to get statistically significant data)

[10:02:58.0000] <jgraham>
marcosc: The small sample sizes are normal for UX studies. So if you think that the variance in people's behaviour is high enough that a bigger sample might have produced a totally different result, you certianly shouldn't be convinced by any study involving a UX expert

[10:03:30.0000] <Hixie_>
marcosc: citation: http://www.nngroup.com/articles/why-you-only-need-to-test-with-5-users/

[10:04:55.0000] <Hixie_>
marcosc: but i'm not a qualified usability researcher, we had someone who is qualified run those

[10:05:12.0000] <Hixie_>
anyway, time to head to the office. bbl.

[10:05:14.0000] <jgraham>
Hixie_: (fwiw that article is at face value hard to understand because it's not really clear how the numbers are defined. I assume the real article might clear things up)

[10:06:32.0000] <jgraham>
(and I guess one could argue that language design could be quantatively different from the kind of UI design Nielsen studied)

[10:07:21.0000] <jgraham>
(it's hard to know if that's a strong argument or not)

[10:07:47.0000] <marcosc>
It could be

[10:08:07.0000] <marcosc>
also, it expects an iterative testing cycle

[10:08:25.0000] <marcosc>
so it's more for UX refinement, not so much to draw conclusions from

[10:08:36.0000] <jgraham>
So I guess I can find possible reasons to doubt the microdata study, but I still think that we should take the results seriously because on average I think that there will be better designs if we do that kind of thing and take the results seriously than if we don't

[10:10:00.0000] <jgraham>
marcosc: That isn't the point it makes about iterative designs though

[10:10:32.0000] <jgraham>
It suggests that unless you iterate your design you run the risk of leaving some problems unadressed with a small study

[10:10:39.0000] <jgraham>
Which is obviously true

[10:10:48.0000] <marcosc>
yes, that's what I was trying to say

[10:10:57.0000] <jgraham>
It doesn't say that if you don't iterate your design you will actively make things worse

[10:11:16.0000] <marcosc>
but with the responsive images stuff, we are interested in both: compare which one is more usable, iterate to improve the design of at least 1

[10:11:53.0000] <jgraham>
(and Hixie did iterate a bit, which you also complained about)

[10:12:40.0000] <marcosc>
yes, he iterated after only 2. I think he should have concluded the study before iterating

[10:13:11.0000] <jgraham>
I assume that Google weren't prepared to pay for two rounds of study

[10:13:21.0000] <marcosc>
yeah, probably not

[10:13:41.0000] <jgraham>
So there is a reasonable question of whether that was a better approach than not iterating at all

[10:14:00.0000] <jgraham>
But again, it isn't clear what the "right" answer is

[10:14:17.0000] <marcosc>
it's also interesting to see, given that it's been a decade since Nielsen research was published, if it still holds up

[10:14:19.0000] <jgraham>
and it isn't at all clear that doing this study was worse than doing nothing at all

[10:14:36.0000] <jgraham>
That seems much less interesting

[10:14:47.0000] <jgraham>
I mean I don't have any good reasons it wouldn't

[10:14:54.0000] <jgraham>
Do you?

[10:14:54.0000] <marcosc>
The Nielsen stuff has been very criticized before.

[10:15:05.0000] <jgraham>
Well that's different

[10:15:15.0000] <jgraham>
If the original study was just wrong

[10:15:34.0000] <jgraham>
Which is possible ofc (c.f. my earlier point about expertise not guaranteeing much)

[10:15:51.0000] <jgraham>
So yes, it would be interesting to see if others reproduced it

[10:16:06.0000] <marcosc>
http://www.measuringusability.com/blog/five-history.php

[10:19:18.0000] <marcosc>
Anyway, we will see how the discussion on WHATWG plays out... if we get agreement on a solution, we might not need to run the study

[10:29:36.0000] <TabAtkins>
annevk-cloud: <img lazyload> + script is almost exactly identical to <img fake-src> + script.  It's not an acceptable solution, as it doesn't interact with the preloader, which is the entire point of all of this.

[14:38:59.0000] <Hixie_>
pet peeve about english: the construction "bla bla bla a a a a a, b b b b b b, c c c c c c, and d d d d d bla bla bla bla" has no obvious grammatical way to distinguish the end of the "d" phrase from the start of the end "bla" phrase.

[14:39:23.0000] <Hixie_>
case in point, the space between "dev" and "equal" on the last comment on https://www.w3.org/Bugs/Public/show_bug.cgi?id=11984

[14:43:03.0000] <TabAtkins>
Hixie_: In some cases you can grammatically add a comma after the last entry, which indicates a pause as you leave the list and reenter the normal flow of the sentence.

[14:43:25.0000] <TabAtkins>
But I don't think it would quite work in this case.  Best to rephrase so you're not embedding a list in the middle of a phrase, which is easy to do in your case.

[14:44:31.0000] <astearns>
yeah, that needs to have 'giving equal voting power to' before the list, and a comma at the end of the list

[14:44:43.0000] <TabAtkins>
Yup.

[14:44:44.0000] <Philip`>
Hixie_: Splitting a single concept across two ends of a sentence is always going to be awkward - merge all the blas together, like "...the majority result when giving equal voting power to a, b, and c, since ..."

[14:45:03.0000] <Philip`>
(Oh, what everyone else said)

[14:45:09.0000] <TabAtkins>
Basically, humans are terrible at center-embedding in the first place, and our languages don't tend to have constructs to make it less awkward.

[14:45:52.0000] <TabAtkins>
(I mean, really terrible.  Our brains literally cannot parse more than 2 or so levels of center embedding without resorting to explicit tracing and level tracking, at which point you're diagramming the sentence rather than reading it.)

[14:58:55.0000] <TabAtkins>
Where's the most correct Events spec?  Not D3E, is it?

[15:07:28.0000] <Hixie_>
yeah, you can rephrase it, but english should just support that natively. :-)

[15:07:40.0000] <Hixie_>
TabAtkins: events infrastructure, or specific events?

[15:07:45.0000] <TabAtkins>
Latter.

[15:07:52.0000] <TabAtkins>
Former is WHATWG DOM, I know.

[15:08:34.0000] <Hixie_>
things like mouse events are best described by d3e, but it leaves a lot to be desired, sadly

[15:08:44.0000] <Hixie_>
it's mostly spec-by-example

[15:58:37.0000] <Hixie_>
if someone with IE could show me a screenshot of http://goo.gl/CxK0ic that'd be awesome


2013-11-19
[16:00:07.0000] <TabAtkins>
gimme a sec

[16:02:43.0000] <Hixie_>
TabAtkins: (i actually just need to know if the bottom line comes out of the bottom of the arc, or the left of the arc, or if something crazy is going on)

[16:03:10.0000] <TabAtkins>
Oh, ok.  Left of the arc.

[16:03:18.0000] <Hixie_>
awesome, thanks man

[16:03:25.0000] <TabAtkins>
Like the horizontal arc bends downward at the point it enters the arc.

[16:03:28.0000] <TabAtkins>
horizontal line

[16:03:35.0000] <Hixie_>
right

[16:03:39.0000] <TabAtkins>
No, left.

[16:04:00.0000] <Hixie_>
it left?

[16:04:05.0000] <Hixie_>
out of the right?

[16:04:12.0000] <Hixie_>
or went right out of the left

[16:04:21.0000] <TabAtkins>
Wait, what? Now I'm confused; I was just being dumb.

[16:04:31.0000] <Hixie_>
woot, i win!

[16:04:41.0000] <Hixie_>
(your first answer was fine)

[16:04:45.0000] <TabAtkins>
The horizontal line hits the arc at its leftmost point.  It angles downward, to the SE, and continues that way through and beyond the arc.

[16:05:11.0000] <Hixie_>
yup

[16:05:18.0000] <Hixie_>
same as everyone except chrome :-/

[16:08:22.0000] <TabAtkins>
yaaaay

[16:09:24.0000] <Hixie_>
(spec required both mutually exclusive behaviours until a few minutes ago, so it's a wonder we are only one browser away from interop)

[17:27:35.0000] <zewt>
sure glad that I don't really care about these image threads

[17:35:21.0000] <TabAtkins>
zewt: That's a good survival strategy.

[17:35:28.0000] <TabAtkins>
I made the mistake of becoming personally invested.

[17:35:41.0000] <TabAtkins>
I successfully avoided it for *months*, until John Mellor roped me in over wine.

[17:35:54.0000] <TabAtkins>
Goddam alcohol, always making me commit to caring about things.

[17:36:13.0000] <zewt>
i've avoided even opening any of the threads, because I don't want to care (or rather, I want to not care)

[17:36:29.0000] <zewt>
(re: got enough things on the list already)

[17:36:43.0000] <TabAtkins>
Okay, now that I've finished both looking at emails and doing expense reports, it's time to go back to Python coding for an hour.

[17:36:54.0000] <zewt>
just... aimlessly?

[17:37:28.0000] <TabAtkins>
^_^ Nah, coding on Bikeshed.

[17:37:47.0000] <TabAtkins>
My primary software project for the last 6 months.

[17:38:29.0000] <zewt>
how long did it take to come up with the name

[17:39:03.0000] <TabAtkins>
A surprisingly long time.  It was just called "Tab's new preprocessor" for months.

[17:39:12.0000] <TabAtkins>
Until someone in this room started suggesting things.

[17:39:37.0000] <zewt>
fitting, then

[17:39:52.0000] <TabAtkins>
Exactly!  The actual name came from Twitter.

[22:38:32.0000] <SimonSapin>
yeah, having "new" in the name is nice until the new thing becomes the old thing

[22:38:54.0000] <SimonSapin>
(I recently killed the "newcss" module in Servo)

[22:58:41.0000] <annevk-cloud>
Same problem with numbers, eg html5lib

[00:54:10.0000] <MikeSmith>
hsivonen: View Source in Firefox doesn't mark the &#x110000; character in http://w3c-test.org/web-platform-tests/master/conformance-checkers/html/parser/008-novalid.html as error

[00:54:43.0000] <MikeSmith>
oh wait

[00:54:56.0000] <MikeSmith>
no, it does

[00:57:05.0000] <MikeSmith>
but for the &#xfdd0; in http://w3c-test.org/web-platform-tests/master/conformance-checkers/html/parser/004-novalid.html it shows it in red but doesn't show any tooltip text when you mouse over

[00:58:37.0000] <MikeSmith>
hmm I guess it always shows character references in red but errors in red+bold

[01:00:19.0000] <MikeSmith>
/me files bugs

[02:07:15.0000] <annevk>
Okay, so bz put getElementById() directly on DocumentFragment

[02:07:51.0000] <annevk>
Shouldn't we do the same as with NonDocumentTypeParentNode?

[02:08:01.0000] <annevk>
Uhm, *ChildNode

[02:11:01.0000] <hsivonen>
hmm. looks like occupying an IP4 address costs the same as 12 GB of storage (per unit of time)

[02:35:33.0000] <jgraham>
So I heard a rumor at TPAC that the <picture><source> thing with lower implementation complexity was bad for animated images, for some reason. Anyone know anything about that? Otherwise it seems that we should clearly be doing that syntax

[02:36:20.0000] <darobin>
jgraham: I haven't heard about that, but maybe asking on #respimg?

[02:36:47.0000] <jgraham>
Uh, yeah, I'm not sure I want to join that channel :)

[02:38:20.0000] <Ms2ger>
But picture is baaaad

[02:38:43.0000] <jgraham>
Did Ms2ger turn into a sheep?

[02:39:00.0000] <jgraham>
Or maybe he always was one

[02:39:03.0000] <Ms2ger>
Waaaake up, sheeeple

[02:40:37.0000] <MikeSmith>
hah

[02:41:09.0000] <MikeSmith>
jgraham: why clearly?

[02:41:38.0000] <MikeSmith>
you didn't mean clearly we should be doing <picture><source>?

[02:42:12.0000] <jgraham>
Because despite the verbosity it is using the overall syntax of the language in the way it was designed, and it is clearly the solution that authors find most intuitive

[02:43:06.0000] <darobin>
jgraham: the people on #resimg are really nice actually

[02:43:26.0000] <jgraham>
darobin: But what about the ones on #respimg? :p

[02:44:02.0000] <darobin>
har har har

[02:50:24.0000] <MikeSmith>
jgraham: I thought another big downside of <picture><source> was that it would require browser projects to basically duplicate most of their existing <img> tests

[02:50:43.0000] <MikeSmith>
and w-p-t too

[02:51:39.0000] <jgraham>
Why is that more true than for the other syntaxes?

[02:52:22.0000] <jgraham>
In any case, although interop is obviously a concern, that feels like a clear violation of the priority of constituencies

[02:52:42.0000] <jgraham>
(assuming that the syntax is guenuinely better for authors)

[02:53:01.0000] <MikeSmith>
hsivonen: I raised https://bugzilla.mozilla.org/show_bug.cgi?id=940282 bug for View Source not flagging some invalid characters

[02:54:15.0000] <MikeSmith>
jgraham: I guess I've never heard any b

[02:55:06.0000] <MikeSmith>
*heard anybody yet claim that <picture><source> is worse syntax for authors

[02:56:02.0000] <MikeSmith>
hmm but see http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2013-November/041536.html from TabAtkins

[02:56:16.0000] <MikeSmith>
"The cost there is that <picture><source> is now treated substantially differently than <video><source>, despite sharing a name."

[02:56:48.0000] <MikeSmith>
by which I think he means the cost to authors

[02:56:49.0000] <MikeSmith>
maybe

[02:57:50.0000] <jgraham>
It is possible that no one is relying on the precise semantics of <video><source>. Or that no one will even notice the difference apart from implementors

[02:58:13.0000] <MikeSmith>
true

[02:58:57.0000] <MikeSmith>
jgraham: as far as how the test-case duplication is more true for <picture> than for the other syntaxes, I thought it was a matter of testing cost of a new element vs new attribute

[02:59:42.0000] <MikeSmith>
and that just adding a new attribute to img does not require duplicating all existing img tests

[03:08:01.0000] <hsivonen>
MikeSmith: thanks

[03:09:01.0000] <hsivonen>
annevk: since I'm redoing the charset menu UI strings anyway, I wonder if I should use the sort of labels IE uses

[03:09:29.0000] <hsivonen>
annevk: ie. Foo (ISO) and Foo (Windows) instead of Foo (ISO-8859-x) and Foo (Windows-xxxx)

[03:09:39.0000] <MikeSmith>
/me didn't know ArrayBuffer was now part of EcmaScript

[03:09:52.0000] <annevk>
hsivonen: it seems exposing less magic strings to the end user is a plus

[03:10:07.0000] <hsivonen>
annevk: ok. I'll try it and see if it passes review

[03:11:23.0000] <annevk>
hsivonen: how do I get to the menu in IE?

[03:12:04.0000] <annevk>
hsivonen: also, omitting it entirely, e.g. just "Thai" seems better too

[03:12:09.0000] <annevk>
hsivonen: when feasible

[03:13:00.0000] <annevk>
ah, right click

[03:13:42.0000] <annevk>
hsivonen: yeah what IE does makes a lot of sense

[03:14:06.0000] <jgraham>
MikeSmith: I guess there could be *some* difference in the number of tests between <picture><source><img></picture> and <img src new-attr>, but it isn't obviously large. You have basically the same space of possible things to test (in the absence of scripted DOM manipulation)

[03:14:09.0000] <annevk>
not sure why Korean lacks a label and Thai says Windows in IE, I don't think either needs one

[03:14:33.0000] <MikeSmith>
jgraham: OK

[03:14:54.0000] <jgraham>
zcorpan might tell me I am wrong though

[03:15:02.0000] <yoav>
jgraham: I've heard the testing cost from hober & zcorpan.

[03:15:10.0000] <Ms2ger>
Dammit :)

[03:15:39.0000] <yoav>
Basically, you'd need to re-test img's functionality with picture, on top of the new picture-specific functionality

[03:15:51.0000] <jgraham>
I think the testing cost is uncontroversially higher in the case where DOM manipulation can change things

[03:16:01.0000] <annevk>
pre-scanner is also somewhat more complicated

[03:16:24.0000] <jgraham>
yoav: It seems to me that you would also need to retest img's functionality with no src attribute

[03:16:26.0000] <MikeSmith>
yoav: yeah, I guess I also heard it from zcorpan

[03:16:35.0000] <Ms2ger>
So are we getting xhtml2 img finally? :)

[03:16:47.0000] <yoav>
annevk: preload scanner complexity is not extremely different between picture/src-N

[03:16:49.0000] <MikeSmith>
heh

[03:17:03.0000] <annevk>
yoav: I did not say extreme

[03:17:07.0000] <jgraham>
So I suppose the argument is that you would need to test e.g. canvas.drawImage with a HTMLPictureElement

[03:17:08.0000] <yoav>
Need to maintain some state of where you're at

[03:17:12.0000] <yoav>
annevk: OK :)

[03:17:16.0000] <jgraham>
Or a HTMLSourceElement

[03:17:22.0000] <jgraham>
Or whatever you would actually use

[03:17:49.0000] <MikeSmith>
Ms2ger: I guess xhtml2 was just ahead of its time. The world wasn't ready.

[03:17:56.0000] <yoav>
jgraham: Yeah, and everything else image currently does.

[03:18:17.0000] <MikeSmith>
Ms2ger: so maybe there's also hope yet for XHTML Modularization

[03:18:19.0000] <yoav>
zcorpan: If you're around, clarifications would be helpful.

[03:18:46.0000] <Ms2ger>
MikeSmith, hey man, I really should avoid bursting into laughter in the middle of my class :)

[03:18:58.0000] <jgraham>
It seems likely that implementations would reuse as much of the same code as possible though, so it isn't super-clear that those tests would actually find anything once you had verified that the element worked at ll

[03:19:02.0000] <jgraham>
*all

[03:19:18.0000] <Ms2ger>
Speak of the devil

[03:19:32.0000] <jgraham>
Ms2ger: I think MikeSmith just did

[03:19:39.0000] <jgraham>
Well actually that's unfair

[03:19:45.0000] <jgraham>
He hasn't mentioned namespaes yet

[03:19:52.0000] <Ms2ger>
So now you did

[03:19:57.0000] <MikeSmith>
Ms2ger: your instructor will just assume it's because of something really clever he said earlier and that you're just catching up with now

[03:20:11.0000] <Ms2ger>
MikeSmith, not sure that's betetr

[03:20:14.0000] <Ms2ger>
better, even

[03:22:16.0000] <yoav>
zcorpan: We were discussing <picture> test costs here. I'd be happy  if you could clarify your current standpoint on the subject (post Kornel's atomic mutation algo)

[03:41:02.0000] <annevk>
hallvors: you should read my comment again I think

[03:41:29.0000] <annevk>
hallvors: I'm not proposing anything really in https://www.w3.org/Bugs/Public/show_bug.cgi?id=20322#c11 other than writing down what I believe is implemented today

[03:41:45.0000] <hallvors>
annevk: I may well be misunderstanding something..

[03:42:14.0000] <annevk>
hallvors: the second example forces a preflight because of the setRequestHeader()

[03:42:20.0000] <hallvors>
I get that

[03:42:21.0000] <annevk>
hallvors: the first example does not force a preflight

[03:42:36.0000] <annevk>
hallvors: now, will upload events dispatch or not is the question

[03:42:47.0000] <hallvors>
so the way it's implemented today is no upload events will fire for the first example?

[03:42:53.0000] <annevk>
hallvors: if we dispatch them for late listener registration it seems we have a security bug

[03:43:11.0000] <hallvors>
Wouldn't you sort of agree that this sucks for the users of this API?

[03:43:20.0000] <annevk>
hallvors: I'd hope so (again assuming we're actually protecting something here)

[03:43:33.0000] <hallvors>
/me should write some tests

[03:43:43.0000] <Ms2ger>
^

[03:43:45.0000] <annevk>
hallvors: I never thought this flag made much sense or a lot of CORS for that matter

[03:43:55.0000] <annevk>
hallvors: but I wasn't calling the shots

[03:44:20.0000] <annevk>
Mozilla's security team proxied through sicking is how a lot happened

[03:45:21.0000] <hallvors>
OK - I'm sort of relieved that it must be some sort of collective misunderstanding and not you being weird. I don't want you to be weird  :-p

[03:45:40.0000] <hallvors>
(that's probably an odd thing to say :-])

[03:46:26.0000] <annevk>
hah

[03:47:06.0000] <hallvors>
/me should keep in mind that a spec editor is just a ghost writing proxy much of the time

[03:47:09.0000] <annevk>
But yeah, should probably create a test to see what implementations do. If they allow late registration, there's no reason to make early registration trigger a preflight...

[03:47:34.0000] <hallvors>
hm..

[03:48:00.0000] <hallvors>
it's complicated because addEventListener() is presumably not supposed to throw either?

[03:48:13.0000] <hallvors>
I can't think of any case where aEL throws right now

[03:48:38.0000] <hallvors>
so we can't do that if authors try to late-register listeners that should not fire

[03:49:23.0000] <hallvors>
(and xhr.upload.onprogress = foo throwing would be even more ugly)

[03:49:44.0000] <annevk>
I'm pretty sure the idea was that events would not dispatch if there was no preflight done. And that the check for early listeners triggering a preflight was added as some kind of best effort hack.

[03:50:08.0000] <annevk>
However, it's been half a decade and my memory has been known to be faulty.

[03:50:10.0000] <hallvors>
What if the functions would fire but the length computable would be false and no details given?

[03:50:57.0000] <annevk>
The problem is that you "revealed" the server existed.

[03:50:59.0000] <hallvors>
/me sighs at the weird nooks and corners of the so-called platform

[03:51:13.0000] <annevk>
The details of the event are not that interesting.

[03:51:24.0000] <hallvors>
<img onload=""> already does that, no?

[03:51:34.0000] <annevk>
Yes, but less quick.

[03:52:02.0000] <hallvors>
That's surely just an implementation detail?

[03:52:11.0000] <annevk>
Not in the face of timing attacks.

[03:53:08.0000] <hallvors>
odinho: around?

[03:54:02.0000] <hallvors>
BTW annevk: I'd like to suggest a small note about what the "settings object" contains

[03:56:22.0000] <odinho>
hallvors: I iz around!

[03:56:32.0000] <hallvors>
great :)

[03:56:56.0000] <hallvors>
have you written any CORS tests that seem relevant to what annevk and I just discussed above?

[03:58:41.0000] <hallvors>
(read your blog recently BTW. If I had read it a little earlier I might have pestered your for video-related advice :-) but I've figured out some VirtualDub + ffmpeg approaches that seem to handle this project I'm working on)

[03:59:30.0000] <odinho>
hallvors: No, I have not :)  Tests need to be always appended to, and that's one such case ;-)

[04:00:07.0000] <hallvors>
sure. I'll take it

[04:01:01.0000] <odinho>
hallvors: Create it on the python branch.

[04:01:19.0000] <odinho>
hallvors: The newest cors tests are there. They're reviewed and work better than their php counterparts :)

[04:03:41.0000] <hallvors>
hm.. there's jgraham/python,  jgraham/python_review and  jgraham/python_review_2. They all sort of belong to James, I'm not sure if it would be well-behaved to mess with them. /cc jgraham

[04:03:46.0000] <hsivonen>
annevk: how did x-mac-cyrillic end up in the Encoding Standard?

[04:03:55.0000] <hallvors>
jgraham: ^?

[04:03:58.0000] <annevk>
SimonSapin: https://www.w3.org/Bugs/Public/show_bug.cgi?id=23793

[04:04:00.0000] <hsivonen>
annevk: aside from x-user-defined, it's the only x- encoding

[04:05:35.0000] <annevk>
hsivonen: http://lists.w3.org/Archives/Public/www-archive/2011Dec/att-0020/encoding-labels.html supported by all browsers

[04:07:06.0000] <jgraham>
hallvors: Feel free to push stuff to jgraham/python_review_2 if it isn't going to be super-controversial (i.e. if it won't delay the review)

[04:07:43.0000] <hallvors>
OK. I doubt an extra test or two trying to figure out what current implementations do will be controversial :)

[04:08:13.0000] <hallvors>
(unless I make stupid coding mistakes - then I'll delay the review and learn something :-p)

[04:09:22.0000] <hsivonen>
annevk: ok. I think I'm going to see if excluding it from the menu passes review. Neither Chromium nor IE has it in the menu.

[04:36:48.0000] <MikeSmith>
holy god just now finding this www-tag thread on JSON slash encoding detection slash BOMs

[04:37:14.0000] <MikeSmith>
any point in trying to read any of it?

[04:40:13.0000] <MikeSmith>
judging from the set of personalities From field of most of the postings, it looks suspiciously like it's probably a big how-many-angels-on-the-head-of-a-pin wank-off

[04:43:08.0000] <hsivonen>
MikeSmith: my todo list includes posting to that thread and saying it's reprehensible for people to bikeshed complications for this stuff instead of doing things the way the Encoding Standard says

[04:50:29.0000] <MikeSmith>
hsivonen: I'm not sure they're actually interested in solutions

[04:50:50.0000] <MikeSmith>
at this point the only thing that thread is missing is Len Bullard

[04:51:51.0000] <zcorpan>
yoav: does http://lists.w3.org/Archives/Public/public-respimg/2013Oct/0045.html help?

[04:53:48.0000] <yoav>
zcorpan: Yes, it does. Do you have a ballpark estimate of the number of tests required? (like the previous 10K number)

[04:55:12.0000] <yoav>
jgraham^^

[04:59:14.0000] <zcorpan>
yoav: i dunno, maybe duplicate all img tests and then a few hundred tests for the selection algorithm plus a few hundred tests for the new fallback mechanism. though i very much doubt that amount of tests would materialize before shipping <picture> if we decide it's what we want

[05:00:02.0000] <yoav>
zcorpan: OK. Thanks!

[05:01:21.0000] <jgraham>
zcorpan: It seems interesting to get an estimate of how much <img> code could be reused directly in the <picture> case

[05:01:27.0000] <annevk>
MikeSmith: yeah, I concluded the same from that thread

[05:01:42.0000] <MikeSmith>
annevk: ok

[05:01:55.0000] <jgraham>
If it is "almost all" then the amount of testing you would need seems considerably lower than a balck-box estimate would suggest

[05:02:03.0000] <annevk>
MikeSmith: I guess I should try to be friendly and educate some more, but there's many other things to work on :/

[05:02:05.0000] <jgraham>
+to achieve interop

[05:02:21.0000] <zcorpan>
jgraham: yeah. though i'm not familiar with img implementations to know if it can be reused without refactoring. if it requires refactoring, there's a regression risk for img, too

[05:02:36.0000] <jgraham>
zcorpan: Right, but we already have <img> tests

[05:02:40.0000] <jgraham>
Hopefully

[05:03:16.0000] <MikeSmith>
/me admires annevk for passing up the 386 opportunity

[05:05:36.0000] <zcorpan>
jgraham: so let's assume that we can reuse the img code (with or without refactoring) and we have a perfect testsuite for img (hahaha), i still wouldn't trust that the picture integration doesn't have bugs so doesn't need tests

[05:07:04.0000] <hallvors>
jgraham: I'm a bit late to that python server party you've been hosting, can I just clone https://github.com/jgraham/wptserve and it will work beautifully?

[05:07:33.0000] <jgraham>
zcorpan: Sure. But the question isn't "does it need tests". The question is "is the cost of the tests greater than the benefit of the better syntax?"

[05:07:40.0000] <Ms2ger>
Hehehehe

[05:08:12.0000] <zcorpan>
so one thing that i've discussed here but not on the list is <img> + <source> in a way like <input list><datalist> works. i don't know how people feel about that

[05:08:15.0000] <zcorpan>
jgraham: yes, i agree

[05:08:37.0000] <jgraham>
hallvors: Yes, but you probably want to just clone web-platform-tests, check out the jgraham/python_review_2 branch and follow the instructions in the readme file

[05:18:37.0000] <odinho>
hallvors: Check out with all submodules. I think a --recursive clone will do it for you.

[05:20:14.0000] <hallvors>
odinho, jgraham: thanks - it's up and running and was easily started indeed

[05:20:32.0000] <odinho>
^_^

[05:20:36.0000] <odinho>
/me is a fan

[05:36:26.0000] <yoav>
zcorpan: The " <input list><datalist>" model is interesting, but may be tricky to implement, as far as the preloader goes. One compromise would be to not preload <img src list> that doesn't have a matching datalist

[05:36:46.0000] <yoav>
Or to force the 2 elements to be near each other

[05:37:08.0000] <yoav>
Need to think about it...

[05:39:32.0000] <yoav>
zcorpan: What was the response to that model?

[05:40:45.0000] <annevk>
https://twitter.com/w3cmemes/status/402793055591620608 <3

[05:56:38.0000] <MikeSmith>
https://groups.google.com/a/chromium.org/forum/#!topic/blink-dev/07U0lgaBP3g

[05:56:50.0000] <MikeSmith>
[[

[05:56:51.0000] <MikeSmith>
- 92.5% pages have !DOCTYPE, most of them start with "<!doctype html"

[05:56:51.0000] <MikeSmith>
- 33.5% pages have Transitional doctype

[05:56:55.0000] <MikeSmith>
- 36.1% pages have <!doctype html>, <!DOCTYPE html> <!DOCTYPE HTML>

[05:56:57.0000] <MikeSmith>
]]

[05:59:17.0000] <zcorpan>
yoav: i haven't seen much of a response

[05:59:34.0000] <yoav>
zcorpan:OK

[06:00:11.0000] <zcorpan>
yoav: we could require the source wrapper to be the next element sibling of img, which removes the need to use IDs

[06:00:49.0000] <yoav>
zcorpan: That would also simplify the preloader work. Would make it identical to picture in that sense.

[06:01:15.0000] <zcorpan>
yeah

[06:02:30.0000] <yoav>
zcorpan: In any case, I don't have a strong opinion regarding syntax. (as long as it's implementable, the major use-cases are covered, and no obvious hurdles to adoption are there)

[06:03:39.0000] <yoav>
zcorpan: So it sounds to me like your proposal would work (and won't require ~1K new tests), but might be best to ask the language design people what they think

[06:04:42.0000] <zcorpan>
i guess i can send an email about it and see what people think

[06:05:15.0000] <yoav>
zcorpan: I think that'd be good

[06:07:19.0000] <annevk>
zcorpan: supporting <input list><datalist> (ie without explicit ID) sounds like a good idea

[06:07:25.0000] <annevk>
zcorpan: IDs suck

[06:07:45.0000] <zcorpan>
annevk: yeah

[06:08:08.0000] <annevk>
file a bug?

[06:11:31.0000] <annevk>
hsivonen: so on Mac this XUL stuff maps to native menus?

[06:12:55.0000] <yoav>
zcorpan: On second thought, you'd need some indicator inside image that the 'src' should be loaded (for both the preloader and the parser)

[06:13:03.0000] <yoav>
s/should/shouldn't/

[06:13:38.0000] <yoav>
Otherwise, the parser would start loading the image 'src' as soon as the element is created

[06:13:40.0000] <hsivonen>
annevk: yes. Also on Ubuntu in Canonical-provided builds

[06:14:13.0000] <yoav>
So you'd need the 'list' attr, just no id

[06:14:20.0000] <annevk>
hsivonen: cool, guess I finally know what inspired the <menu> feature

[06:14:31.0000] <annevk>
(although that might have dramatically changed now)

[06:16:08.0000] <zcorpan>
yoav: yes, i intended list="" for that

[06:16:43.0000] <yoav>
zcorpan: OK. Sounds good

[06:17:00.0000] <zcorpan>
yoav: technically the preloader could wait with preloading img until there is a next element sibling or the parent is closed, but it seems clearer to be explicit

[06:17:22.0000] <yoav>
zcorpan: I'm worried about the parser, not the preloader

[06:17:50.0000] <yoav>
The parser starts an img download before the element is added to the DOM, so has no notion of parent/sibling

[06:18:19.0000] <zcorpan>
ah, ok

[06:18:24.0000] <yoav>
I had these issues when implementing picture's <img> fallback

[06:19:42.0000] <annevk>
Note that for the dynamic case this seems kind of cumbersome to work with. Same with <picture> I suppose. With either you don't know when you can start loading the image after the element is created.

[06:20:27.0000] <zcorpan>
annevk: why is it different than today with just src and crossorigin=""? currently the load doesn't happen until you reach a stable state

[06:20:56.0000] <zcorpan>
per spec

[06:21:04.0000] <annevk>
zcorpan: currently you can load without appending

[06:21:18.0000] <annevk>
zcorpan: not sure how you see that work for an API that requires siblings

[06:22:05.0000] <zcorpan>
oh, right. yeah i didn't consider that.

[06:22:34.0000] <yoav>
annevk: Can you elaborate on that concern? I didn't get that

[06:23:02.0000] <zcorpan>
so let's say you want to load an image but not put it in the document

[06:23:31.0000] <yoav>
Ohhhh, OK

[06:23:32.0000] <zcorpan>
with srcset you just do var i = (new Image()).srcset = '...'

[06:23:52.0000] <Ms2ger>
Why would you set i to the value of srcset?

[06:23:54.0000] <yoav>
You'd have to create a document fragment,or something of that sort

[06:24:13.0000] <zcorpan>
Ms2ger: heh, oops

[06:24:42.0000] <zcorpan>
var i; (i = new Image()).srcset = '...'

[06:24:45.0000] <zcorpan>
better?

[06:25:26.0000] <Ms2ger>
:)

[06:25:31.0000] <jgraham>
"better"

[06:26:19.0000] <zcorpan>
yoav: yeah, or we could come up with something like setting .list to the element, and have that association go away when the elements are inserted to the document, but both of those are non-obvious

[06:27:06.0000] <yoav>
I agree that it's a complication

[06:27:46.0000] <zcorpan>
another idea is like <picture> syntax-wise, but require an <img> child that acts like "driver" i.e. the element that actually gets used for rendering and what you would paint on a canvas, etc

[06:28:12.0000] <yoav>
One could also argue that if you're adding sources lists dynamically, you can add only the ones relevant using matchMedia

[06:29:10.0000] <jgraham>
zcorpan: Elaborate?

[06:29:47.0000] <zcorpan>
like instead of <img list><sourcelist><source></sourcelist>, change it to <sourcelist><img list><source></sourcelist>

[06:29:57.0000] <hsivonen>
Cyrillic 8-bit encodings are still http://xkcd.com/927/ : https://bug805374.bugzilla.mozilla.org/attachment.cgi?id=8334498

[06:30:24.0000] <hsivonen>
and that's after removing ISO-IIR and hiding MacCyrillic

[06:30:32.0000] <zcorpan>
the sourcelist element is a normal inline

[06:31:31.0000] <yoav>
zcorpan: Would you consider this easier for the dynamic case?

[06:32:04.0000] <yoav>
I guess it would be, since you'd have to create only 2 elements instead of 3...

[06:32:17.0000] <zcorpan>
yoav: it means you don't need a document fragment or anything to get the association when creating the things in script without appending to the document

[06:32:56.0000] <darobin>
/me wonders if that idea could be stretched to just reuse datalist instead of introducing sourcelist

[06:32:57.0000] <yoav>
zcorpan: I'm cool with it, as long as the <img> has a list attr

[06:32:57.0000] <zcorpan>
i need to leave (i'll read the logs)

[06:33:08.0000] <Ms2ger>
/me waves

[06:33:40.0000] <yoav>
I need leave soon as well, but I say post it to the lists

[06:33:44.0000] <jgraham>
/me would be interested to see the idea fleshed out (I would need to reread how datalist works to fully follow otherwise I think)

[06:41:36.0000] <annevk>
hsivonen: https://bug805374.bugzilla.mozilla.org/attachment.cgi?id=8334498 looks very nice!

[06:42:44.0000] <hsivonen>
annevk: thanks

[06:42:45.0000] <Ms2ger>
hsivonen, though maybe jp should use just "ISO" as well?

[06:43:37.0000] <annevk>
2022 is sufficiently not ISO

[06:44:44.0000] <annevk>
so...

[06:44:46.0000] <annevk>
IE10

[06:45:16.0000] <annevk>
Japanese (Auto-Select), Japanese (EUC), Japanese (Shift-JIS)

[06:45:17.0000] <annevk>
that's it

[06:45:51.0000] <hsivonen>
Ms2ger: that would break concordance with the other Japanese items

[06:46:02.0000] <hsivonen>
annevk: I like the way IE handles this

[06:46:09.0000] <annevk>
hsivonen: seems IE10 does not have an item for ISO-2022-JP

[06:46:22.0000] <annevk>
hsivonen: furthermore, only Japanese has Auto-Select

[06:46:28.0000] <annevk>
English locale though

[06:46:31.0000] <annevk>
(I do too)

[06:46:33.0000] <hsivonen>
annevk: I'm pretty sure Auto-Select has ISO-2022-JP magic

[06:46:56.0000] <hsivonen>
annevk: need to test how exactly Auto-Select in IE works

[06:47:16.0000] <hsivonen>
it could be a combo decoder for all the three Japanese encodings

[06:47:34.0000] <hsivonen>
which then raises the question: what does document.characterSet say?

[06:47:42.0000] <hsivonen>
(ringdingding)

[06:47:54.0000] <annevk>
I suspect it detects and makes a choice

[06:47:56.0000] <annevk>
Just like WebKit

[06:48:34.0000] <hsivonen>
but the story is the decoder for the ISO-2022-JP label does Shift_JIS, too

[06:48:39.0000] <hsivonen>
in IE

[06:48:48.0000] <hsivonen>
I need to test myself some day

[06:48:54.0000] <hsivonen>
but not for this patch

[06:49:10.0000] <annevk>
hsivonen: I'm wrong, it says "_autodetect_all"

[06:49:37.0000] <annevk>
hsivonen: tested by overriding in Live DOM Viewer and then <script>w(document.characterSet)</script>

[06:50:15.0000] <hsivonen>
annevk: awesome

[06:50:59.0000] <hsivonen>
might not be insane to spec that

[06:51:44.0000] <hsivonen>
I wonder if ISO-2022-JP is just an alias for that

[06:52:25.0000] <yoav>
zcorpan: Thought about it some more. You could even make your proposal look almost identical to <picture>, only with a mandatory <img> inside. That's brilliant!

[06:58:11.0000] <annevk>
hsivonen: if we end up with agreement among everyone that we need sniffing for Japanese and nothing else, I'll try to figure it out

[07:03:45.0000] <hsivonen>
annevk: FWIW, before Firefox 4 shipped, I tried to make the Japanese sniffing happen on the first 1024 bytes only. That broke the Japanese Planet Debian, which is why Firefox went whole stream.

[07:03:59.0000] <hsivonen>
Japanese Planet Debian has been fixed since

[07:04:09.0000] <hsivonen>
as is typical with stuff like this

[07:05:37.0000] <annevk>
hsivonen: for our other sniffing, do we enforce 1024 bytes? That is if there's less than 1024 bytes and the network is slow we'll wait with making a decision?

[07:06:06.0000] <annevk>
hsivonen: seems like something we should keep trying

[10:01:40.0000] <smaug____>
dglazkov: what is the reasoning for the events here http://w3c.github.io/webcomponents/spec/shadow/#events-that-are-always-stopped

[10:01:56.0000] <smaug____>
dglazkov: why those, and why not also submit and input

[10:02:09.0000] <smaug____>
and I assume there are many more

[10:39:18.0000] <Ms2ger>
Can I get a review on https://github.com/w3c/web-platform-tests/pull/397 / https://critic.hoppipolla.co.uk/r/387 please?

[10:40:21.0000] <jgraham>
Ms2ger: You can *do* the review on that...

[10:40:44.0000] <Ms2ger>
Sure, but getting one is more fun :)

[10:43:24.0000] <jgraham>
I'm not sure that going from N=tests.length iframes to N=1 iframe is obviously a great idea

[10:43:37.0000] <jgraham>
Doesn't it make the tests slower?

[10:44:12.0000] <Ms2ger>
Not if they end up swapping otherwise :)

[10:44:33.0000] <jgraham>
Right

[10:44:48.0000] <jgraham>
But how does N=1 compare to N=10, for example?

[10:45:17.0000] <Ms2ger>
No idea

[10:45:32.0000] <Ms2ger>
And I feel like I'll get burned at the stake if I suggest it :)

[12:16:10.0000] <zcorpan>
yoav: right

[12:33:44.0000] <zcorpan>
yoav: so the <img src> being loaded by the html parser before it has a parent, that seems like something that can be changed in impls by not loading it until it has been inserted to the document for img elements created by the parser, right=

[12:34:40.0000] <yoav>
zcorpan: It'd break scripts that create Image.src and never add it, but count on the resource downloading

[12:35:10.0000] <zcorpan>
yoav: scripts that create Image.src aren't created by the parser

[12:40:28.0000] <yoav>
zcorpan: Yeah. It's not the parser that downloads. It happens during element creation.

[12:40:51.0000] <yoav>
I guess you could create a separate path for scripts, in some way

[12:41:11.0000] <zcorpan>
you just need the html parser to set a flag

[12:41:13.0000] <yoav>
But I don't know if it's something that browsers want to do

[12:41:59.0000] <zcorpan>
<script> has such a flag (not that <script> processing is in any way sane)

[12:43:55.0000] <yoav>
zcorpan: Look. Ibumped into trouble there when working on picture, and didn't want to modify HTMLImageElement because I was afraid it'd break stuff

[12:44:26.0000] <yoav>
But, ask it on the list and the DOM people must have an opinion on the subject

[12:45:29.0000] <yoav>
The only question it raises is whether we "flag" the image or not (by adding an attr)

[12:46:36.0000] <yoav>
If the DOM people are cool with postponing image download until the element is in the DOM (when the element is parsed), I'd certainly won't object

[12:47:22.0000] <zcorpan>
the flag wouldn't be an attribute, just a bit that is invisible to JS

[12:48:41.0000] <zcorpan>
should the img go first or last?

[12:49:47.0000] <yoav>
last would be better IMO, so when it's parsed, it can already walk its parent and get the resources

[12:50:22.0000] <yoav>
Nah, I don't make sense

[12:51:23.0000] <yoav>
We need to wait till its added to its parent, so I'm not sure it matters much. Need to look into it.

[12:53:05.0000] <zcorpan>
if it's first, then the <source>s won't be in the tree when the img element is inserted

[12:53:59.0000] <zcorpan>
but kornel's algorithm handles that fine by just re-running the algorithm for each <source> (or once when the parent is closed)

[12:54:48.0000] <zcorpan>
maybe more relevant is what authors expect it should be. if they think the syntax should be like <video>, then the sources should come first

[12:56:09.0000] <yoav>
You're right that we can hook up on the insertion to its parent. You're also right that authors would expect <img> to be last

[12:57:20.0000] <zcorpan>
even if img goes last, we could make <picture> own the selection algorithm and run it for each <source>/<img> that is inserted, in case we want <picture><source> (pause) <img> to start loading before the img element exists

[12:57:29.0000] <yoav>
I tend to think that it might be best to wait till the parent closes, and only then start fetching, to avoid cases where <img> is first from breaking, as it may be a common authoring error, and I don't see serious downsides to it

[12:59:09.0000] <yoav>
Starting load before the parent is completed would only benefit us if the HTML buffer is split after <img> and before </picture>

[13:01:25.0000] <zcorpan>
right. maybe the <img> is big because the fallback src is a big SVG as a data: URL or something

[13:02:12.0000] <yoav>
That doesn't make sense (from an authoring PoV)

[13:02:32.0000] <yoav>
fallback image should be something you usually don't download

[13:03:27.0000] <zcorpan>
OTOH starting the load before img exists might mean that you download something that won't be used because there actually isn't an <img> element

[13:04:12.0000] <yoav>
zcorpan: Yeah. I also think that it'd mean that picture would have to be a lot smarter than it needs to with this scheme

[13:04:15.0000] <zcorpan>
i don't follow 'fallback image should be something you usually don't download'

[13:04:47.0000] <yoav>
I'd be much more comfortable if HTMLImageElement will be the one doing the download, just getting its sources from picture

[13:05:14.0000] <zcorpan>
ok

[13:06:33.0000] <yoav>
A data URI as a fallback image doesn't make sense, because then you're downloading the fallback image and the actual image

[13:07:11.0000] <gsnedders>
yoav: Don't apply logic! People won't follow it!

[13:07:22.0000] <yoav>
gsn

[13:07:41.0000] <zcorpan>
ah yeah, i agree it doesn't make sense. but i wouldn't be surprised to see that sort of thing in the wild :-)

[13:08:17.0000] <yoav>
gsnedders: People are logical beings, no?

[13:08:24.0000] <zcorpan>
or a big <script>

[13:08:52.0000] <zcorpan>
or not a big but a <script src> which blocks the parser from closing the parent

[13:09:36.0000] <gsnedders>
yoav: Well, you say that, but there's lots of stupid stuff on the web…

[13:10:08.0000] <zcorpan>
yoav: people aren't really logical beings

[13:11:23.0000] <zcorpan>
yoav: people like to think that they act based on logical thinking but actually often act based on emotions, belief, etc :-)

[13:12:08.0000] <zcorpan>
or based on what other people say or do

[13:12:13.0000] <yoav>
/me was joking :)

[13:13:02.0000] <yoav>
But, I'm not sure implementation should be complicated in order to optimize authoring errors

[13:14:54.0000] <zcorpan>
yeah it probably doesn't need to, we can just make <img> look at its previous siblings and start loading when the img is inserted to the document

[13:25:42.0000] <zcorpan>
actually per spec, <img> shouldn't start loading anything until a 'stable state' has been provided, which would be between tasks of the html parser, i think

[13:27:07.0000] <zcorpan>
so the spec wouldn't need the flag, but maybe actual impl would want a flag and not wait until the parser yeilds

[13:27:57.0000] <zcorpan>
or the spec should be changed to not await a stable state for parser-created img

[13:30:05.0000] <TabAtkins>
Are we still considering the "<img> is the driver, it uses <picture> or <sourcelist> or whatever as a data source" idea?

[13:32:15.0000] <zcorpan>
it's what we're discussing yeah

[13:33:55.0000] <TabAtkins>
Excelelnt.

[13:34:12.0000] <yoav>
TabAtkins: What's your opinion on that option?

[13:34:25.0000] <TabAtkins>
I'm down with this.

[13:34:51.0000] <yoav>
Awesome!

[13:36:14.0000] <zcorpan>
i need to ponder what should happen for dynamic updates to <source>s. <video> ignores some changes (like changing src attribute of a <source>)

[13:38:04.0000] <zcorpan>
but i think this could listen to mutations to <source src> and rerun the selection algorithm on the next tick, since doing so isn't destructive as for <video>

[13:44:59.0000] <TabAtkins>
Yeah, that sounds fine to me.

[13:45:10.0000] <TabAtkins>
(And reminds me that I've specced src-N to not pay attention to mutations, which is a problem.)

[13:54:17.0000] <zcorpan>
srcset handles mutations. this just needs to have more listeners

[14:08:02.0000] <zcorpan>
ok at this point my brain has stopped working so i just sent the email

[14:16:51.0000] <gsnedders>
Does anyone know the situation with character encoding of HTML in emails?

[14:17:39.0000] <Hixie_>
anyone got an opinion on what should happen with History objects of non-active documents, when you use them? https://www.w3.org/Bugs/Public/show_bug.cgi?id=23359

[14:17:44.0000] <Hixie_>
(browsers all disagree)

[14:43:44.0000] <bholley>
Hixie_: ping

[14:43:54.0000] <Hixie_>
yo

[14:44:23.0000] <bholley>
Hixie_: quick question - according to the current spec, navigating an iframe by programatically setting .src uses the iframe as the source browsing context, rather than the incumbent script

[14:44:24.0000] <bholley>
Hixie_: http://www.whatwg.org/specs/web-apps/current-work/multipage/the-iframe-element.html#process-the-iframe-attributes

[14:44:27.0000] <bholley>
Hixie_: is that intentional?

[14:44:44.0000] <bholley>
it impacts sandboxing

[14:44:56.0000] <Hixie_>
you mean rather than the incumbent script's responsible browsing context?

[14:45:01.0000] <bholley>
Hixie_: correct

[14:46:40.0000] <Hixie_>
it shouldn't make any difference in general, whether it's the iframe's ownerDocument's browsing context or the responsible browsing context specified by the incumbent settings object

[14:47:01.0000] <Hixie_>
but in some cases, there's no incumbent settings object

[14:47:15.0000] <Hixie_>
so that's why i use the iframe's host document's browsing context

[14:47:24.0000] <Hixie_>
(e.g. when parsing the <iframe> in the first place)

[14:47:54.0000] <bholley>
/me thinks

[14:49:02.0000] <bholley>
Hixie_: what about the allow-same-origin case where a sandboxed iframe attempts to navigate a non-sandboxed parent by setting the src attribute on its frameElement?

[14:49:41.0000] <bholley>
Hixie_: in that case, the navigation will succeed by setAttribute('src', foo), and fail by |location = foo|

[14:49:51.0000] <bholley>
Hixie_: (I know allow-same-origin is kind of a stupid example)

[14:51:23.0000] <Hixie_>
if you have a sandboxed iframe, the only way it could do that is if you do allow-same-origin and allow-script at the same time

[14:51:27.0000] <Hixie_>
and if you do that, you've basically lost.

[14:51:30.0000] <bholley>
Hixie_: right

[14:51:43.0000] <Hixie_>
i mean it could just create a new iframe and do whatever it wants in that

[14:51:49.0000] <bholley>
Hixie_: sure

[14:52:15.0000] <Hixie_>
self.location = foo shouldn't fail though, should it?

[14:52:20.0000] <Hixie_>
you can always navigate yourself

[14:52:36.0000] <bholley>
Hixie_: I'm just pointing out the existence of a somewhat-arbitrary behavioral difference here

[14:52:39.0000] <bholley>
Hixie_: I'm fine with it

[14:52:45.0000] <Hixie_>
(oh you mean two iframes deep, i see)

[14:53:29.0000] <Hixie_>
yeah, it is somewhat arbitrary. i justify it as one being an API, and thus being designed around script, and the other being the markup, and thus being designed around that.

[14:53:41.0000] <Hixie_>
conceptually, if you set src="" you are reconfiguring the <iframe>

[14:53:51.0000] <Hixie_>
whereas if you set location you are following a link

[14:54:01.0000] <Hixie_>
it's a bit dubious, but that's how i justify it :-)

[14:54:14.0000] <bholley>
Hixie_: fair enough - thanks for the clarification :-)

[14:59:43.0000] <Hixie_>
bholley: do you have an opinion on https://www.w3.org/Bugs/Public/show_bug.cgi?id=23359 ? (History in non-active documents)

[15:00:25.0000] <bholley>
Hixie_: hmmm

[15:01:23.0000] <bholley>
Hixie_: let me see if there's any recent context on our permissiveness here

[15:02:12.0000] <Hixie_>
i'm guessing it's just you do an origin check rather than a liveness check

[15:02:26.0000] <Hixie_>
but if there's a compat reason that would be interesting

[15:02:34.0000] <bholley>
Hixie_: yes, exactly

[15:02:37.0000] <bholley>
Hixie_: apparently I put it in


2013-11-20
[16:03:23.0000] <zcorpan>
miketaylr: i see like 4 requestFullScreens in webdevdata sept

[17:02:59.0000] <zewt>
hard to get the feeling that feedback is being taken seriously when people reply and then make spec changes without even pretending to wait for a response

[23:33:50.0000] <Ms2ger>
A new gcpm editor, interesting

[00:59:30.0000] <zcorpan>
https://www.w3.org/Bugs/Public/show_bug.cgi?id=23873 ...

[01:10:22.0000] <MikeSmith>
who's the new gcpm editor?

[01:13:07.0000] <MikeSmith>
"what if I'm implementing a browser without JavaScript and with

[01:13:08.0000] <MikeSmith>
some other, concurrent language?"

[01:14:52.0000] <zcorpan>
nice typo "... while his neighbour, also using the wife, ..." http://lists.w3.org/Archives/Public/public-whatwg-archive/2012Aug/0070.html

[01:17:12.0000] <MikeSmith>
笑

[01:20:50.0000] <SimonSapin>
Dave Cramer from Hachette will edit GCPM

[01:22:53.0000] <MikeSmith>
SimonSapin: interesting

[02:25:50.0000] <hsivonen>
I wish I have the stamina to push for a UTF-8 default for all outgoing mail in Thunderbird.

[02:26:19.0000] <hsivonen>
but making encodings in Firefox less bad is enough of a job

[02:26:40.0000] <zcorpan>
hsivonen: who is against that?

[02:28:20.0000] <Ms2ger>
Japan? :)

[02:30:07.0000] <hsivonen>
zcorpan: Japanese feature phones, concerns about the status of GB18030 in China and general Stop Energy concerns

[02:30:35.0000] <zcorpan>
:-(

[02:30:49.0000] <hsivonen>
zcorpan: I don't buy the legal concern about China as long as Thunderbird can receive GB18030, but I haven't actually read Chinese law

[02:31:12.0000] <zcorpan>
pretty smart feature phones to have an opinion on that, though

[02:31:59.0000] <hsivonen>
A look forward to UTF-8 and SHA-2-capable phones taking over in Japan.

[02:32:14.0000] <wilhelm_>
Give it a few more years, and the galapagos phones will disappear. Little labour is required. Just time.

[02:34:30.0000] <jgraham>
Are galapagos phones like galapagos island tortoises?

[02:34:56.0000] <jgraham>
Because, if so, we probably only have another 90 odd years to wait

[02:35:24.0000] <hsivonen>
fun fact, Japanese Thunderbird defaults to ISO-2022-JP (not Shift_JIS)

[02:36:00.0000] <Ms2ger>
Someone here has an interesting definition of "fun" :)

[02:39:56.0000] <hsivonen>
I wonder how much ISO-2022-JP  content there is on the Web just because of email archives produced by scripts that live dangerously and pass the original bytes through to the Web.

[02:40:43.0000] <darobin>
I never dared touch the default encoding in Thunderbird, because email

[02:40:48.0000] <zcorpan>
jgraham: i get an error when starting wptserve

[02:40:53.0000] <zcorpan>
  File "serve.py", line 137, in start_servers

[02:40:53.0000] <zcorpan>
    sock.shutdown(socket.SHUT_RDWR)

[02:40:53.0000] <zcorpan>
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 224, in meth

[02:40:54.0000] <zcorpan>
    return getattr(self._sock,name)(*args)

[02:40:56.0000] <zcorpan>
socket.error: [Errno 57] Socket is not connected

[02:41:17.0000] <jgraham>
zcorpan: Too much meth

[02:41:33.0000] <jgraham>
But, interesting

[02:41:38.0000] <hsivonen>
darobin: I've configured Gmail to always send UTF-8 and no one has complained.

[02:41:43.0000] <jgraham>
I guess this is an OSX/linux difference

[02:41:52.0000] <darobin>
hsivonen: that's good to know, I'll perform the same experiment here

[02:42:04.0000] <darobin>
well, that is, whenever it is I find the right option in Thunderbird

[02:42:10.0000] <hsivonen>
but then I mostly send email in English and the people to whom I send email in Finnish have up-to-date MUAs apparently

[02:42:47.0000] <zcorpan>
jgraham: i use os x 10.8.3, if that's useful to know

[02:43:58.0000] <hsivonen>
darobin: mailnews.send_default_charset in about:config

[02:44:02.0000] <darobin>
I use French quite a lot, so if it's problematic it'll show up

[02:44:15.0000] <hsivonen>
darobin: dunno where the proper UI is supposed to be

[02:44:41.0000] <hsivonen>
if edited via about:config, be sure to use UTF-8 in upper case

[02:45:10.0000] <zcorpan>
@_@

[02:45:12.0000] <darobin>
hsivonen: couldn't find the proper UI, did it in about:config

[02:45:16.0000] <darobin>
yes, did that, ta

[02:45:25.0000] <darobin>
there's weird shit going on there

[02:45:40.0000] <hsivonen>
darobin: in about:config?

[02:45:50.0000] <darobin>
the previous setting was ISO-8859-1 but the emails clearly defaulted to CP-1225

[02:46:11.0000] <jgraham>
zcorpan: Can you try adding try: except socket.error: pass around the shutdown call?

[02:46:22.0000] <hsivonen>
darobin: see the pref called intl.fallbackCharsetList.ISO-8859-1

[02:46:36.0000] <jgraham>
/me can't find any UI in Thunderbird either

[02:46:41.0000] <darobin>
hsivonen: yeah, was looking at that — so if you use ISO-8859-1 it picks that up instead?

[02:46:42.0000] <MikeSmith>
hsivonen: my impression is that most Japanese mail clients are still configured by default to send mail in iso-2022-JP by default

[02:46:48.0000] <hsivonen>
darobin: the mailnews devs couldn't face the alias reality, so they special-case ISO-8859-1

[02:46:53.0000] <jgraham>
Is it actually not possible to change though the UI?

[02:47:07.0000] <darobin>
hsivonen: encoding + email = success!

[02:47:52.0000] <MikeSmith>
shift_jis was not ever used much fur e-mail i think

[02:48:13.0000] <hsivonen>
jgraham: which pref does "it" refer to? Pretty sure there's no UI for intl.fallbackCharsetList.ISO-8859-1 for mailnews.send_default_charset there might be UI but I don't know where

[02:48:18.0000] <darobin>
jgraham: admittedly that's not something you want to expose end users to too much

[02:49:43.0000] <hsivonen>
jgraham: Preferences: Display: Formatting: Advanced: Character Encodings

[02:50:23.0000] <Ms2ger>
Hmm, mailnews.send_default_charset is already user-set to UTF-8 already

[02:50:34.0000] <darobin>
/me would never have looked in Display for message creation

[02:50:40.0000] <hsivonen>
TB has so many prefs it's generally easier to find this stuff by searching the source code.

[02:50:47.0000] <zcorpan>
jgraham: now i get http://pastebin.com/L2fwCHy4

[02:51:08.0000] <jgraham>
Yeah the "display" thing threw me

[02:51:18.0000] <jgraham>
I would have assumed it was under "composition"

[02:51:21.0000] <Ms2ger>
^

[02:51:42.0000] <darobin>
jgraham: ditto

[02:52:32.0000] <jgraham>
zcorpan: So that's what I got before I added the shutdown() thing

[02:52:38.0000] <jgraham>
I will need to investigate more

[02:52:55.0000] <hsivonen>
MikeSmith: yeah, I don't expect Shift_JIS to be used for email much. It's just interesting that Japanese a locale where the mail and Web legacy differs

[02:52:59.0000] <zcorpan>
jgraham: ok

[02:53:16.0000] <hsivonen>
another fun fact, the Russian localization of TB already defaults to UTF-8 for outgoing email.

[02:53:32.0000] <hsivonen>
(falls back to windows-1251 for unlabeled incoming)

[03:08:39.0000] <hsivonen>
What's taking Opera so long to get Chromium running on Linux? Or has Opera silently dropped Linux support?

[03:10:51.0000] <jgraham>
hsivonen: That seems like the kind of question that is inevitably "no comment"

[03:15:40.0000] <annevk_>
darobin: earlier, with CP-1225, did you mean windows-1252?

[03:16:08.0000] <darobin>
annevk_: yeah!

[03:16:27.0000] <jgraham>
zcorpan: BTW re: <img> <sources> and the parser-inserted flag, what about innerHTML?

[03:16:42.0000] <annevk>
/me also has Gmail configured to only use UTF-8

[03:16:59.0000] <annevk>
/me rarely transmits anything that needs it :/

[03:17:21.0000] <annevk>
Maybe I should put pile of poo in my signature

[03:17:30.0000] <darobin>
I don't even know what CP1225 is

[03:18:00.0000] <darobin>
annevk: did you have a nice weekend in HK?

[03:18:04.0000] <hsivonen>
darobin: a hyphen is not allowed in "cp" aliases.

[03:18:18.0000] <annevk>
darobin: it was most excellent

[03:18:18.0000] <hsivonen>
oh. the number was wrong, too

[03:18:23.0000] <darobin>
hsivonen: yeah :)

[03:18:31.0000] <zcorpan>
jgraham: good point. the proposal would make it not load for out-of-document things, which is bad. so maybe it's better to always await a stable state

[03:18:50.0000] <annevk>
darobin: I tried to put up a photo with the view from our apartment, but the pano feature from the iPhone has the drawback that nothing actually supports those photos it seems

[03:18:58.0000] <annevk>
darobin: I guess I need to host it myself

[03:19:24.0000] <darobin>
annevk: are you sure that it's not just that you were so drunk that the pano doesn't look like anything?

[03:19:34.0000] <darobin>
and the hosting sites just go "go home annevk, you're drunk"

[03:19:50.0000] <zcorpan>
jgraham: or the parser could avoid setting the flag in the fragment case

[03:20:00.0000] <annevk>
darobin: that'd be an amazing feature

[03:20:14.0000] <annevk>
darobin: I'd love for Messages to support that

[03:20:20.0000] <jgraham>
zcorpan: Yeah, if it knows that it's parsing a fragment other than implicitly

[03:20:22.0000] <darobin>
annevk: I'm pretty sure that there are lighting and blur features you can detect

[03:20:44.0000] <jgraham>
I don't know that that is a requirement at the moment (it could become one of course)

[03:21:16.0000] <zcorpan>
jgraham: what do you mean?

[03:22:22.0000] <jgraham>
zcorpan: I mean I don't know if there is a need for a flag on the parser indicating that it's parsing a fragment at the moment

[03:22:48.0000] <zcorpan>
jgraham: first match of 'fragment case' gives "Loop: If node is the first node in the stack of open elements, then set last to true, and, if the parser was originally created as part of the HTML fragment parsing algorithm (fragment case) set node to the context element."

[03:24:42.0000] <jgraham>
zcorpan: Yeah, I just reached the same conclusion. So I guess that seems OK

[03:25:46.0000] <zcorpan>
jgraham: can you reply to the email?

[03:26:08.0000] <jgraham>
Sure

[03:26:49.0000] <zcorpan>
thx

[03:36:19.0000] <hsivonen>
The Polyglot guide should migrate to RFC 6919 key words.

[03:36:36.0000] <darobin>
heh

[03:39:02.0000] <zcorpan>
another thing i got thinking about is > 1 <img>s in a <picture>. the proposal would result in both images independently doing a resource selection for the same <picture>. i think that's OK but it would be easy enough to add a check that the <img> is the first <img> if we want to have it a bit more sane model

[03:53:39.0000] <annevk>
Polyglot is still a thing?

[03:54:37.0000] <jgraham>
Well yeah, but so is paganism

[03:54:51.0000] <jgraham>
It doesn't really affect most people's lives

[03:58:30.0000] <yoav>
zcorpan: A single <img> per picture is probably better, unless someone can come up with a use-case for having multiples

[03:59:18.0000] <zcorpan>
yoav: oh it should be invalid for authors, sure. i'm pondering what the behavior should be

[04:00:37.0000] <yoav>
zcorpan: having just the first one be active sounds reasonable to me

[04:02:02.0000] <zcorpan>
yoav: yeah, i agree. though it involves more checks (the selection algorithm needs to check that the img is the first one, inserting an img needs to rerun selection on the next img, removing img needs to run selection on the new first img)

[04:05:04.0000] <darobin>
/me discovers that China is one of the countries in which his operator's data roaming is not cheap — oops

[04:05:06.0000] <yoav>
inserting an img would probably require to re-run selection anyways (unless I'm missing something). during selection it'd walk the parent's children until it reaches itself, and if it saw an <img> on the way, selection is aborted. (

[04:05:30.0000] <yoav>
(slightly hand-wavy. I'm new here)

[04:06:46.0000] <zcorpan>
i mean for the old-first-that's-no-longer-the-first img element

[04:06:57.0000] <yoav>
Oh, OK

[04:07:12.0000] <yoav>
Yeah, it'd needto be "turned off"

[04:07:18.0000] <zcorpan>
yep

[04:07:23.0000] <jgraham>
Isn't it easier just to make each img independent?

[04:10:39.0000] <zcorpan>
yes, it's easier, at least in the spec. but it seems pretty weird

[04:11:32.0000] <jgraham>
I don't think it's all that weird

[04:11:58.0000] <jgraham>
I think it's more weird to add non-obvious special cases

[04:16:10.0000] <zcorpan>
maybe so, i'm fine with either behavior

[04:16:47.0000] <annevk>
zcorpan: hey, do you know why SharedWorker makes an exception for data URLs, but does not allow e.g. blob URLs?

[04:18:40.0000] <zcorpan>
annevk: people asked for data: to be supported but nobody asked for blob: maybe?

[04:19:46.0000] <annevk>
Ugh. We really need to move to one policy across all contexts.

[04:24:52.0000] <hsivonen>
speaking of data: URLs, it's sad that they participate in locale-specific charset fallback

[04:29:34.0000] <zcorpan>
hsivonen: they do? how?

[04:31:34.0000] <zcorpan>
i thought data: always had a charset declared (default being 'us-ascii' label)

[04:33:14.0000] <hsivonen>
zcorpan: oh ok. good if so

[04:33:42.0000] <zcorpan>
seems so in blink but not in gecko? data:text/html,<meta charset=utf-8>å

[04:34:07.0000] <hsivonen>
in other news, someone with the nick "SickMind" asks how to get videos embedded in PDF to play: http://stackoverflow.com/questions/20085002/open-pdf-interactive-files-and-play-videos-integrated-in-pdf

[04:37:34.0000] <Ms2ger>
So, why don't my gifs animate when I print them?

[05:05:37.0000] <zcorpan>
it does, but the refresh rate is very slow

[05:09:05.0000] <SteveF>
/me suggest a change in email subject from Re: [whatwg] The src-N proposal

[05:11:51.0000] <zcorpan>
SteveF: what should we call the new proposal?

[05:13:49.0000] <SteveF>
zcorpan: new <picture> ??, don't know but it appears that the discussion has moved on from the subject

[05:34:42.0000] <hsivonen>
oh well. I replied to the JSON BOM thread.

[05:40:54.0000] <annevk>
hsivonen: I like how you made it a UTF-8 test at the same time

[05:42:20.0000] <annevk>
http://knowyourmeme.com/memes/%E0%B2%A0_%E0%B2%A0-look-of-disapproval :-)

[05:47:07.0000] <hsivonen>
UTF-8-incapable MUAs get an extra-disapproving look

[06:08:35.0000] <hsivonen>
/me finds out there exists something called XMLVM: http://xmlvm.org/overview/

[06:25:52.0000] <yoav>
SteveF: I say picture 2.0 :P But seriously, it's not just picture (even though I agree it's not src-N either)

[06:30:01.0000] <zcorpan>
maybe Lazarus-picture (https://twitter.com/stevefaulkner/status/402930161479217152 )

[06:33:28.0000] <newtron>
zcorpan: what are your thoughts on non-img children of nu-picture, for accessibility/fallback?

[06:33:33.0000] <newtron>
sorry, Lazarus-picture

[06:33:36.0000] <newtron>
:)

[06:34:01.0000] <newtron>
would there be a way to visually hide any non-img children, but assign them the equivalent of an alt-text role?

[06:34:05.0000] <yoav>
"New picture - an element so nice, they named it twice"

[06:34:22.0000] <zcorpan>
newtron: i think we should stick to alt=""

[06:35:08.0000] <newtron>
zcorpan: i think that might be a missed opportunity. one of the things authors loved about <picture> was the ability to do more advanced accessible fallbacks

[06:35:11.0000] <newtron>
like tables, etc

[06:35:43.0000] <yoav>
SteveF: Thoughts on the accessibility stuff?

[06:36:17.0000] <newtron>
zcorpan: authors are also used to the <video><source /><p>fallback</p></video> pattern

[06:37:03.0000] <zcorpan>
newtron: i haven't seen a proposal on how rich fallback would actually work

[06:37:08.0000] <SteveF>
yoav: to be honest will need to look into again before I can make nay worthwhile comment, will await an emergent draft proposal

[06:37:15.0000] <zcorpan>
newtron: note that <video> doesn't have fallback for accessibility purposes

[06:37:56.0000] <jgraham>
Hmm, so zcorpan is Jesus? Might still turn out that he is Orpheus and this is Eurydice-<picture>

[06:38:32.0000] <newtron>
zcorpan: well, they have <video><source /><track /></video>

[06:38:59.0000] <SteveF>
zcorpan: would be nice if it was like canvas for rich text as in represented in acc tree, but don't know how practical that is

[06:40:30.0000] <yoav>
newtron: I wouldn't significantly complicate the algorithm in order for that to work, since it's not the reason we're doing this, but it would certainly be a nice to have. I say let's wait for SteveF's analysis

[06:41:00.0000] <newtron>
yoav: i agree, it's not worth a lot of complication now, since we have alt and longdesc still

[06:41:07.0000] <newtron>
but if it's easy, it's a nice win

[06:42:11.0000] <zcorpan>
i think enabling rich fallback for images is a separate thing that can be done for <img> separately if people are actually interested in implementing that in browsers and ATs

[06:43:00.0000] <zcorpan>
so far i haven't seen any actions in that direction, and rich fallback for images is already possible in html with <object> but nobody is using it and i don't know what the support is in ATs

[06:43:41.0000] <yoav>
zcorpan: Perhaps just make sure the algorithm ignores anything that's not <source>, so it can be added on later

[06:44:19.0000] <yoav>
Or anything after the <img> itself

[06:44:20.0000] <newtron>
yoav: ignores + hides, or ignores + renders?

[06:45:31.0000] <zcorpan>
yoav: yeah it would go through the children and look at <source> and the <img> itself (and stop when it reaches itself)

[06:46:00.0000] <zcorpan>
newtron: the proposal is to have <picture> be a normal inline, so stuff inside it renders

[06:46:18.0000] <zcorpan>
but only <source>+<img> would be allowed for now

[06:46:23.0000] <newtron>
ok. that sounds decent.

[06:46:49.0000] <newtron>
so if somebody threw something else in there (against the spec), it would get rendered and they could visually hide it if they wanted with css.

[06:46:58.0000] <zcorpan>
sure

[06:46:59.0000] <newtron>
but still leave it available to AT

[06:47:13.0000] <newtron>
nice

[06:47:29.0000] <zcorpan>
it wouldn't be any different to <img><span>stuff</span> today

[06:49:11.0000] <newtron>
if it would work like that, could the spec explicitly allow for it, even if it's ignored? it seems like a pretty nice way to handle the issue

[06:49:18.0000] <zcorpan>
does anyone know what the landscape is like for <object> fallback in ATs?

[06:50:46.0000] <zcorpan>
newtron: if you want to do hacks you might as well put the fallback outside the <picture>, it would mean the same thing

[06:52:01.0000] <newtron>
zcorpan: maybe, but i'm suggesting that it's not a hack, it's a feature. you also get a styling hook because it's a child of picture.

[06:52:29.0000] <zcorpan>
newtron: ok, then, i don't follow what you are suggesting

[06:52:46.0000] <newtron>
just that the spec ignore, but not explicitly forbid, any non-img children of picture

[06:53:05.0000] <zcorpan>
what do you mean by ignore?

[06:53:13.0000] <newtron>
not used in the selection algo in any way

[06:53:46.0000] <zcorpan>
so that's the case in the proposal already. but i don't see how that helps you with making fallback actually work

[06:54:45.0000] <newtron>
sorry, then i misunderstood. you said "only <source>+<img> would be allowed for now". i'm just saying that shouldn't be an explicit limitation in the spec

[06:55:18.0000] <zcorpan>
why?

[06:56:26.0000] <newtron>
so that if authors do it, it doesn't end up getting flagged as wrong, in say a validator

[06:56:43.0000] <newtron>
anyway, i think it's not necessarily soemthing that needs to get worked out now

[06:57:00.0000] <newtron>
i'm happy to put this on hold until the dust settles on this more

[06:57:13.0000] <newtron>
i was just curious about how it would work with the current proposal

[06:57:30.0000] <SteveF>
zcorpan: the limitation of <img> has always been that the short text alternative can only be a string, what is alluring is the opportunity to add markup to it

[06:57:37.0000] <zcorpan>
what i'm missing is the proposal about how the fallback mechanism would work

[06:59:01.0000] <zcorpan>
yeah i understand that it is a limitation. but there is a solution already (<object>) and it's not used and not supported (or is it?)

[06:59:26.0000] <zcorpan>
if people don't use or support rich fallback for <object>, what reason do we have to believe that they would do for <picture>?

[07:00:06.0000] <hsivonen>
looking forward to seeing if the case where the user overrides a previous override from the charset menu go down after the new charset menu hits the release channel

[07:00:36.0000] <zcorpan>
hsivonen: what's new?

[07:00:52.0000] <hsivonen>
zcorpan: https://bugzilla.mozilla.org/show_bug.cgi?id=805374

[07:01:03.0000] <hsivonen>
zcorpan: oh as in what's different?

[07:01:25.0000] <hsivonen>
zcorpan: fewer encodings. Windows encodings offered before ISO encodings

[07:01:40.0000] <zcorpan>
hsivonen: yeah. ok

[07:02:58.0000] <newtron>
zcorpan: you mean like <object data="img.png"><!-- fallback --></object>?

[07:03:10.0000] <hsivonen>
zcorpan: all encodings that are available are in one list, so no guessing where Turkish, Thai and Vietnamese fall in the taxonomy "East Asian", "SE & SW Asian", "Middle Eastern"

[07:03:13.0000] <zcorpan>
newtron: yes

[07:03:36.0000] <newtron>
zcorpan: i can't speak to how well that works with AT, but it can cause problems for just the img

[07:03:41.0000] <hsivonen>
zcorpan: or guessing that Greek is West but Polish is East

[07:03:45.0000] <newtron>
e.g. not being able to right-click save, etc

[07:03:49.0000] <newtron>
which i think has discouraged authors

[07:03:53.0000] <zcorpan>
hsivonen: ok, sounds like an improvement

[07:05:02.0000] <SteveF>
zcorpan: can't recall object for image support, but here are results of recent test using object for svg https://dl.dropboxusercontent.com/u/377471/SVG/adobesvgtest6.html and they ain't pretty

[07:06:29.0000] <zcorpan>
SteveF: thanks. that doesn't test <object>'s fallback it seems

[07:06:49.0000] <hsivonen>
zcorpan: also, no more baiting people with Mac encodings or ISO-8859-n where n > 11

[07:07:37.0000] <zcorpan>
newtron: yeah, so it seems like a good move to avoid that situation for <picture> :-)

[07:07:46.0000] <SteveF>
zcorpan: no, right my thoughts on <picture> are not the classic 'fallback'

[07:08:19.0000] <SteveF>
zcorpan: but for when <picture> is supported being able to access content in the sub tree

[07:08:56.0000] <zcorpan>
SteveF: i don't follow

[07:09:35.0000] <newtron>
zcorpan: i don't follow that argument. people don't use object for images because object is bad at displaying images. that doesn't mean <picture> shouldn't be able to have fallback content

[07:10:02.0000] <zcorpan>
newtron: i mean it avoids the problem with the different context menu

[07:10:21.0000] <newtron>
zcorpan: oh. then yes. :)

[07:10:34.0000] <SteveF>
zcorpan: like <canvas> now http://www.html5accessibility.com/tests/canvas.html

[07:12:02.0000] <zcorpan>
SteveF: oh, do you mean that the fallback should be able to receive keyboard focus?

[07:14:46.0000] <SteveF>
not suggesting that interaction be exposed as in canvas, but that a text alternative be exposed such as <picture><p> <span lang="es"hola</span> is spanish for hello</p></picture>

[07:15:27.0000] <SteveF>
not a good example but get my drift

[07:16:36.0000] <zcorpan>
i don't, sorry :-)

[07:17:53.0000] <SteveF>
zcorpan: currently <img alt="hola is spanish for hello"> cannot convey paragraph or language

[07:18:39.0000] <SteveF>
with rich text alternative you could

[07:18:47.0000] <zcorpan>
yes i understand the difference between alt="" and HTML content

[07:19:02.0000] <SteveF>
so what is it you don't understand?

[07:19:06.0000] <zcorpan>
what i don't understand is how the mechanism would work for <picture>

[07:20:17.0000] <SteveF>
if content subtree elements exposed in acc tree then they can be accessed by AT

[07:20:50.0000] <SteveF>
as they are in canvas

[07:21:36.0000] <zcorpan>
right, for the <picture> proposal that's the case as if the <picture> was a <span>

[07:22:24.0000] <jgraham>
Do you need more than picture > * {display:none} picture > img {display:inline} ?

[07:22:58.0000] <zcorpan>
let's discuss a concrete example. <picture> <source ...> <img alt="alt" ...> Hello </picture>

[07:23:15.0000] <zcorpan>
jgraham: that wouldn't hide text and it wouldn't show the fallback when the image isn't shown

[07:23:31.0000] <jgraham>
zcorpan: Fair enough

[07:23:33.0000] <zcorpan>
when the image is shown, what happens?

[07:23:38.0000] <zcorpan>
when the image isn't shown, what happens?

[07:23:40.0000] <zcorpan>
and how?

[07:24:11.0000] <zcorpan>
what if there are two <img>s in there?

[07:25:11.0000] <SteveF>
zcorpan: i would suggest that if img's disabled not available then both alt and text be displayed

[07:26:33.0000] <zcorpan>
SteveF: how?

[07:27:36.0000] <SteveF>
zcorpan: how is alt text displayed in that case now?

[07:28:42.0000] <SteveF>
zcorpan: anyway not saying i have any answers just blowing smoke out of my a11y pipe, gotta go do some paid work now, will follow along

[07:29:00.0000] <zcorpan>
SteveF: http://www.whatwg.org/specs/web-apps/current-work/multipage/rendering.html#images-0

[07:30:16.0000] <SteveF>
so how will that translate to <picture> for alt?

[07:31:13.0000] <zcorpan>
in my proposal it is unchanged

[07:34:00.0000] <SteveF>
zcorpan: ok as i said need to work and to look at proposal more

[07:34:32.0000] <zcorpan>
ok

[07:35:18.0000] <newtron>
zcorpan SteveF: http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#the-canvas-element the two paragraphs starting with "In non-visual media..." (although the interactive bits don't apply)

[07:35:28.0000] <newtron>
seems like that would be what is appropriate for picture too

[07:36:43.0000] <newtron>
so in jgraham's scenario -- if the image is shown, the fallback content is not (though is still there in the accessibility tree)

[07:36:51.0000] <newtron>
if the image is not shown, the fallback content is

[07:37:07.0000] <newtron>
in addition that, the alt text would be shown as it is now for img

[07:39:44.0000] <zcorpan>
newtron: but the fallback content are siblings to <img>

[07:40:01.0000] <newtron>
zcorpan: yes

[07:41:01.0000] <zcorpan>
so how do you hide the fallback content?

[07:41:22.0000] <newtron>
not sure. how is content fallback hidden?

[07:41:26.0000] <newtron>
*canvas

[07:42:03.0000] <zcorpan>
by making the canvas element a replaced element, and the fallback content are children

[07:42:20.0000] <newtron>
hmm

[07:45:14.0000] <newtron>
yup, that's a tough problem

[07:45:19.0000] <newtron>
i don't have an answer

[07:47:45.0000] <newtron>
my personal take is that I don't mind hiding the fallback content with CSS, as long as it's there in the AX tree. which means no change to the current proposal, other than explicitly allowing said fallback content.

[07:50:43.0000] <zcorpan>
newtron: so that wouldn't make the fallback available when the image isn't shown, other than for AT users

[07:51:17.0000] <zcorpan>
that seems like a worse situation than alt=""

[07:51:18.0000] <newtron>
zcorpan: you mean in the case where images are allowed, but it fails to load for whatever reason?

[07:51:32.0000] <zcorpan>
yeah

[07:51:40.0000] <zcorpan>
or the user has disabled images

[07:51:55.0000] <newtron>
in the first case, i'd hope/assume that was rare enough that the alt text should be fine

[07:52:07.0000] <newtron>
in the second i'm less comfortable with it

[07:52:13.0000] <newtron>
but it might be an ok compromise

[07:53:58.0000] <newtron>
zcorpan: i would always set alt in addition to any other fallback content

[07:54:00.0000] <Domenic_>
annevk: yesss fixing the file:/// URLs on Windows.

[07:54:15.0000] <annevk>
Domenic_: hah, turns out it's way complicated

[07:54:25.0000] <zcorpan>
i think it seems like a hack that works for some users but doesn't work for other users, and doesn't need the spec's blessing in order to be used (you can put the fallback as a sibling to <picture>)

[07:54:27.0000] <annevk>
Domenic_: see that Chrome bug for other examples of file URLs

[07:54:30.0000] <annevk>
Domenic_: file URLs are fucked

[07:54:44.0000] <annevk>
Domenic_: especially brettw's last comment on that bug

[07:54:53.0000] <newtron>
zcorpan: you're right, this is sounding hacky

[07:55:13.0000] <newtron>
the canvas thing is, imo, the nicest solution, but i have no idea if/how it's implementable

[07:56:07.0000] <zcorpan>
newtron: i'm not really against rich fallback for images, i think it would be good to have it, but i haven't seen a concrete proposal yet for how it would actually work. if we really want rich fallback for images, we should do it properly, imho

[07:57:08.0000] <newtron>
zcorpan: fair enough. my takeaway is that the way the proposal is now allows for a lot of flexibility down the road for implementing something like this, so it's absolutely not urgent to try to wedge something in now, without it being fully baked.

[07:57:17.0000] <newtron>
zcorpan: i appreciate your thoughts on it, thanks

[07:57:59.0000] <zcorpan>
newtron: np, and thank you

[08:10:41.0000] <annevk>
hsivonen: "Character Encoding" being a featured widget under customize Firefox is somewhat baffling

[08:13:47.0000] <hsivonen>
annevk: well, the assumptions are that 1) Firefox should be operable without the menubar and 2) there exist a set of users who need the feature

[08:15:32.0000] <annevk>
so we have this feature for the 1‰?

[08:15:56.0000] <annevk>
‰ does not come out that readable compared to % :/

[08:16:25.0000] <SimonSapin>
hsivonen: can’t we keep these assumptions but still make it more buried?

[08:16:30.0000] <hsivonen>
annevk: yeah

[08:16:53.0000] <hsivonen>
SimonSapin: the assumption is that the more it is buried, the worse a support issue it is in Japan

[08:17:06.0000] <hsivonen>
SimonSapin: how would you bury the Australis widget more?

[08:17:07.0000] <annevk>
I guess the whole customize button is already the 1%

[08:17:36.0000] <annevk>
Hopefully they do some tracking on how this is actually used

[08:17:55.0000] <annevk>
I just used it to remove bookmarks and the search bar, we'll see how it goes I suppose

[08:17:57.0000] <hsivonen>
SimonSapin: for now, I'd rather fight against adding this stuff to B2G than fight for complete removal from desktop

[08:17:59.0000] <SimonSapin>
hsivonen: maybe have "Character Encoding" not appear in the Australis widgets unless a preference is checked?

[08:18:16.0000] <hsivonen>
annevk: "they" is me for the charset menu

[08:18:46.0000] <annevk>
hsivonen: yeah, I meant for Australis in general, understood that we're pretty active on the charset stuff :-)

[08:18:54.0000] <hsivonen>
SimonSapin: at that point, we might as well not have it. that would be a user-hostile way to have it

[08:19:09.0000] <SimonSapin>
hum, ok

[08:59:20.0000] <TabAtkins>
Augh blogs with 12px font asl;dfja;sldfkj

[09:08:31.0000] <annevk>
§

[09:32:00.0000] <annevk>
Hmm, http://code.google.com/p/chromium/issues/detail?id=257354

[09:32:15.0000] <annevk>
So maybe file URLs end up in "there be dragons" territory along with CSS tables

[09:34:06.0000] <smaug____>
dglazkov: ping

[09:36:45.0000] <SimonSapin>
annevk: and there there is filesystem encodings…

[09:36:51.0000] <Domenic_>
annevk: uncool, i think you are more right than brettw. you should get other implementers in on the discussion?

[09:37:09.0000] <SimonSapin>
and then*

[09:37:18.0000] <annevk>
SimonSapin: not sure how those are relevant to parsing

[09:37:19.0000] <Domenic_>
annevk: the only other sane alternative is to have a "is on windows" global flag that dictates the behavior of file URL parsing.

[09:37:49.0000] <SimonSapin>
annevk: doesn’t parsing have to pick an encoding when percent-encoding?

[09:38:19.0000] <smaug____>
or is Hayato Ito ever here?

[09:38:20.0000] <dglazkov>
good morning, Whatwg!

[09:38:24.0000] <dglazkov>
smaug____: pong

[09:38:26.0000] <smaug____>
there, dglazkov !

[09:38:32.0000] <dglazkov>
good morning, Blink!

[09:38:39.0000] <smaug____>
dglazkov: good evening

[09:39:02.0000] <smaug____>
dglazkov: trying to understand shadow dom's event dispatch

[09:39:20.0000] <dglazkov>
smaug____: awesome

[09:39:36.0000] <smaug____>
filed few obvious bugs , but still just trying to understand what the event path looks like

[09:40:16.0000] <dglazkov>
smaug____: you really need hayato. I paged shadow DOM out of my head mostly. I'll try to help, but I am rusty :)

[09:40:42.0000] <annevk>
SimonSapin: yes, but it doesn't come from the filesystem

[09:40:51.0000] <annevk>
http://doctorbeet.blogspot.ru/2013/11/lg-smart-tvs-logging-usb-filenames-and.html o_O

[09:42:14.0000] <smaug____>
dglazkov: so as an example, http://w3c.github.io/webcomponents/spec/shadow/#distribution-results , the right most picture. If I read the spec correctly, when event is dispatched to child1, the path would be child1, insertion point 1, insertion point 3, the parent of insertion point 3, the 2nd shadow host, 1st shadow host, document

[09:42:21.0000] <smaug____>
and that feels odd

[09:42:43.0000] <smaug____>
the propagation to several insertion points, but not necessarily their parents

[09:42:52.0000] <smaug____>
(I could very well miss something here)

[09:44:01.0000] <smaug____>
but each insertion point in destination insertion points will be added to the path, and only the parent of the last insertion point will be there too

[09:44:32.0000] <smaug____>
dglazkov: is my interpretation correct?

[09:44:58.0000] <smaug____>
dglazkov: or in which timezone hayato is ?

[09:45:35.0000] <dglazkov>
smaug____: Tokyo

[09:46:04.0000] <smaug____>
and he tends to work during normal office hours ?

[09:46:20.0000] <dglazkov>
smaug____: yep

[09:46:46.0000] <smaug____>
dglazkov: is he ever on this channel or in #blink?

[09:46:56.0000] <dglazkov>
smaug____: let me see if I can summon him now from #blink

[09:47:25.0000] <smaug____>
(it is just that if my interpretation is correct, the event path is really odd)

[09:47:27.0000] <annevk>
it's 2:47AM in Tokyo...

[09:47:38.0000] <smaug____>
maybe I'm missing how insertion points work

[09:47:45.0000] <annevk>
smaug____: FWIW, I commented on the special casing of event types long ago

[09:47:54.0000] <annevk>
smaug____: and proposed an alternative

[09:48:00.0000] <annevk>
smaug____: not entirely sure what happened to that

[09:48:09.0000] <smaug____>
annevk: I thought it was filed, in some form

[09:48:23.0000] <smaug____>
but didn't spend time trying to find the original bug

[09:48:52.0000] <annevk>
smaug____: https://www.w3.org/Bugs/Public/show_bug.cgi?id=20247#c10

[09:48:53.0000] <dglazkov>
annevk, smaug____: https://www.w3.org/Bugs/Public/show_bug.cgi?id=20247 I think it's this

[09:48:53.0000] <smaug____>
dglazkov: insertion points stay in the tree where they are defined

[09:48:55.0000] <dglazkov>
yay

[09:49:08.0000] <smaug____>
dglazkov: like, insertion points aren't moved anywhere?

[09:50:17.0000] <smaug____>
"Non-bubbling events will naturally not propagate outside shadowRoot". Er what

[09:50:28.0000] <smaug____>
non-bubbling has nothing to do with event propagation

[09:51:18.0000] <dglazkov>
smaug____: to answer your first question, the event path simply follows the structure of the composed tree

[09:51:34.0000] <dglazkov>
smaug____: with roots and insertion points included

[09:51:48.0000] <smaug____>
dglazkov: but per spec all the insertion points are in the path

[09:51:48.0000] <annevk>
smaug____: yeah, I recommend ignoring that comment

[09:51:58.0000] <smaug____>
but only the parent of the final insertion point

[09:52:18.0000] <smaug____>
er, final destination

[09:52:41.0000] <dglazkov>
smaug____: sure, because the composed tree only has that parent in it.

[09:53:47.0000] <dglazkov>
smaug____: I see hayato even added a nice note: "For convenience, an event path may include shadow roots or insertion points so that event listeners registered on the shadow roots or the insertion points would be invoked."

[09:53:56.0000] <smaug____>
the composed tree in that example certainly has the parent of all the insertion points

[09:55:38.0000] <dglazkov>
smaug____: but if you look at the compose tree, the path from child1 to document is: child1 -> parent of insertion point 3 -> shadow host -> shadow host -> document

[09:56:02.0000] <smaug____>
yes

[09:56:19.0000] <smaug____>
so why are we adding insertion point 1 to the event path?

[09:56:34.0000] <smaug____>
but not insertion point 1's parent

[09:56:40.0000] <smaug____>
that makes event handling rather odd

[09:57:01.0000] <smaug____>
usually if you handle event in nodeA, you can handle the event also in A's parent

[09:57:23.0000] <smaug____>
the setup feels overly complicated

[09:57:26.0000] <dglazkov>
because then you'll have an event tree, not event path, and I don't know how that would work

[09:57:42.0000] <smaug____>
do we need to have insertion point 1 in the path?

[09:58:35.0000] <dglazkov>
I think so -- if you're inside that shadow tree, how would you listen to an event dispatched to an element distributed into insertion point 1?

[09:59:20.0000] <smaug____>
now one is forced to add listeners to the insertion point

[09:59:26.0000] <smaug____>
and not to its parent

[09:59:34.0000] <smaug____>
which is totally different to normal DOM

[09:59:39.0000] <dglazkov>
okay. what's the alternative?

[10:00:09.0000] <smaug____>
one alternative is to not support that at all

[10:00:23.0000] <smaug____>
and just have simple event propagation

[10:01:24.0000] <dglazkov>
but then you'll have hacks built by developers trying to solve the problem I stated just a few seconds ago -- and more than likely breaking encapsulation

[10:01:54.0000] <smaug____>
well, it is a hack that one needs to add listeners to the insertion point

[10:02:02.0000] <dglazkov>
smaug____: how so?

[10:02:24.0000] <smaug____>
because the event propagation is not working the usual way

[10:02:58.0000] <dglazkov>
sure, but it's not because we're just being fun silly peeps. It's because we're solving a real problem.

[10:03:26.0000] <smaug____>
/me would like to see some real use cases which have lead to the current design

[10:03:47.0000] <dglazkov>
if you have a tabstrip custom element, and tabs are distributed into an insertion point, how would your tabstrip know if a tab was clicked on?

[10:04:31.0000] <smaug____>
you have just one insertion point, so everything works naturally

[10:05:01.0000] <smaug____>
clicks propagate via insertion point to the tabstrip's shadow dom

[10:05:09.0000] <smaug____>
and then out to the non-shadow dom

[10:06:06.0000] <smaug____>
you can have listeners anywhere in the tabstrip's shadow dom

[10:07:19.0000] <smaug____>
(XBL1 has managed to live without shadow dom's complicated event propagation just fine)

[10:09:46.0000] <TabAtkins>
/me wouldn't describe much of XBL1 as "fine".

[10:10:55.0000] <smaug____>
TabAtkins: shadow dom isn't really much different to xbl1

[10:11:12.0000] <smaug____>
a bit different syntax

[10:11:27.0000] <smaug____>
s/a bit//

[10:11:38.0000] <smaug____>
better spec

[10:12:41.0000] <smaug____>
and hopefully shadow dom will have better implementations than what xbl1 has had

[10:20:59.0000] <dglazkov>
smaug____: the best way to think of it is that insertion point is distributed along with the node. Then everything makes sense.

[10:21:29.0000] <smaug____>
/me tries :)

[10:21:44.0000] <smaug____>
ok, if insertion point is removed from its parent

[10:22:51.0000] <dglazkov>
also, hayato is da man. He wrote most of the new spec anyway. Including the graphs

[10:23:02.0000] <dglazkov>
and implementation in blink

[10:23:15.0000] <smaug____>
k

[10:23:35.0000] <smaug____>
/me should wake up early and find hayato

[10:23:39.0000] <Ms2ger>
Has anyone else read the spec? :)

[10:23:46.0000] <smaug____>
Ms2ger: probably not

[10:24:12.0000] <smaug____>
(use of undefined variables hints that)

[10:24:59.0000] <dglazkov>
smaug____: that's because he's rewriting it. I am sure the later sections are completely messed up right now

[10:25:38.0000] <smaug____>
actually, wchen must have read some version of it, since he wrote a patch I should review

[10:25:56.0000] <smaug____>
but can't review before I understand the spec, and reasoning behind it

[10:26:31.0000] <dglazkov>
smaug____: I understand. sorry I wasn't as helpful :-\

[10:26:46.0000] <dglazkov>
I used to be awesome.

[10:26:47.0000] <smaug____>
dglazkov: you were helpful

[10:26:53.0000] <dglazkov>
but now I am just great

[10:26:54.0000] <smaug____>
dglazkov: you are awesome! :)

[10:27:13.0000] <dglazkov>
smaug____: no, _you_ are awesome! :P

[10:27:32.0000] <dglazkov>
specifically for reviewing the wchen's patch

[10:27:44.0000] <smaug____>
I'm just a person who complains about specs but makes sure to never write one himself

[11:21:11.0000] <Hixie_>
man, some of the sentences i write become silly

[11:21:45.0000] <Hixie_>
"the foo of the bar of the foo that is associated with the quux specified by the bar of the foo's bar..."

[11:41:43.0000] <matjas>
Hixie: this is why {reading,writing} specs is hard

[12:00:11.0000] <hober>
Hixie_: along those lines, i think my favorite sentence of yours is "If there is a position to which the boxes in boxes can be moved while maintaining the relative positions of the boxes in boxes to each other such that none of the boxes in boxes would overlap any of the boxes in output, and all the boxes in output would be within the video's rendering area, then move the boxes in boxes to the closest such position to their current

[12:00:12.0000] <hober>
position, and then jump to the step labeled done positioning below."

[12:27:06.0000] <Hixie_>
hober: yikes

[12:39:54.0000] <Hixie_>
oh ho ho

[12:40:00.0000] <Hixie_>
firefox doesn't actually throw here...

[12:40:16.0000] <Hixie_>
nor does safari...

[12:40:36.0000] <Hixie_>
i like it when i find writing the spec is hard and so i check the browsers again and find that what some of them do is simpler to spec

[15:04:07.0000] <Hixie_>
abarth: ping https://www.w3.org/Bugs/Public/show_bug.cgi?id=20701

[15:04:18.0000] <abarth>
Hixie_: hi

[15:04:47.0000] <abarth>
ok, i'll read up on the thread

[15:28:43.0000] <abarth>
Hixie_: done


2013-11-21
[17:09:15.0000] <rniwa>
Hixie_: yt?

[17:09:20.0000] <rniwa>
aklein: yt?

[19:06:46.0000] <alancutter>
heycam: I have a couple of queries about https://github.com/heycam/webidl/commit/cb90cd9f6678d7e565708468f3331dc11dacf249 is this a suitable forum for that?

[19:08:26.0000] <heycam>
hi alancutter

[19:08:28.0000] <heycam>
yes here's good

[19:09:01.0000] <alancutter>
It states that numeric and DOMStrings are now distinguishable.

[19:09:24.0000] <alancutter>
The spec doesn't seem to be very clear on how to distinguish values as one type over another however.

[19:10:00.0000] <heycam>
that should be handled as part of the overload resolution algorithm

[19:10:09.0000] <heycam>
http://heycam.github.io/webidl/#dfn-overload-resolution-algorithm

[19:10:21.0000] <heycam>
all of the substeps under step 10 is where the type of JS value is looked at

[19:11:05.0000] <alancutter>
Aha, I wasn't aware of that section, thanks!

[19:12:55.0000] <heycam>
it's not that obvious from reading the steps, but if you have overloading of boolean and a numeric type and DOMString, and you pass a Boolean, Number, or String value, then you choose the corresponding one

[19:13:22.0000] <alancutter>
Also a minor nit, the example given in http://heycam.github.io/webidl/#dfn-distinguishable of an invalid overload needs updating.

[19:13:25.0000] <heycam>
otherwise, you prefer to call the DOMString one first, if there is one, then a numeric type overload, then a boolean overload

[19:13:49.0000] <heycam>
alancutter, oh indeed, thanks

[22:37:32.0000] <rniwa>
MikeSmith: yt?

[23:06:25.0000] <MikeSmith>
rniwa: here now

[23:06:45.0000] <rniwa>
MikeSmith: i'm seeing an error that assert_not_undefined is undefined in some of tests

[23:06:59.0000] <rniwa>
MikeSmith: in a test that I imported from web-platform-tests

[23:07:06.0000] <rniwa>
MikeSmith: has this function been renamed?

[23:07:15.0000] <MikeSmith>
I don't think so, no

[23:07:18.0000] <MikeSmith>
lemme check

[23:07:46.0000] <rniwa>
MikeSmith: as far as I checked testharness.js, this function doesn't even exist :/

[23:07:51.0000] <MikeSmith>
ah ait

[23:07:54.0000] <MikeSmith>
yeah

[23:08:27.0000] <MikeSmith>
the test

[23:09:04.0000] <MikeSmith>
those imported tests must be relying on another file that defines it

[23:09:20.0000] <MikeSmith>
you don't get any errors in the console?

[23:09:23.0000] <MikeSmith>
I mean 404s

[23:09:43.0000] <rniwa>
MikeSmith: https://github.com/w3c/web-platform-tests/search?q=assert_not_undefined&ref=cmdform

[23:09:44.0000] <MikeSmith>
I vaguely recall something about this

[23:09:51.0000] <rniwa>
MikeSmith: it's only used here and never defined anywhere :(

[23:09:58.0000] <MikeSmith>
/me follows link

[23:10:00.0000] <rniwa>
the test also uses assert_not_null

[23:10:04.0000] <rniwa>
which doesn't exist either

[23:10:33.0000] <rniwa>
MikeSmith: let me fix it up by replacing them with assert_not_equals

[23:10:59.0000] <MikeSmith>
yeah

[23:16:27.0000] <MikeSmith>
hmm those came from the unipro guys

[23:16:56.0000] <MikeSmith>
/me is wondering how those tests made it past review

[23:17:18.0000] <MikeSmith>
tobie merged them

[23:18:58.0000] <MikeSmith>
rniwa: https://github.com/w3c/web-platform-tests/pull/135#commits-pushed-381f0eb

[23:19:17.0000] <MikeSmith>
"assert_(not)_null and assert_(not)_undefined functions removed"

[23:19:35.0000] <MikeSmith>
https://github.com/sgrekhov/web-platform-tests/commit/381f0eb29e3a4a8fb1cd8b9511ca5dcf7252a197

[23:20:04.0000] <MikeSmith>
so the copies of the tests you have are stale

[23:20:07.0000] <MikeSmith>
probably

[23:20:10.0000] <rniwa>
MikeSmith: interesting

[23:20:28.0000] <rniwa>
MikeSmith: but I just cloned the repo right now :/

[23:20:46.0000] <MikeSmith>
/me takes a look in his close

[23:21:07.0000] <rniwa>
MikeSmith: oh, i think that change hasn't been pushed to w3c repo :(

[23:21:30.0000] <rniwa>
MikeSmith: https://github.com/w3c/web-platform-tests/blob/master/html-templates/additions-to-the-steps-to-clone-a-node/template-clone-children.html

[23:22:32.0000] <MikeSmith>
yeah

[23:24:02.0000] <MikeSmith>
I can transplant the change set

[23:24:23.0000] <rniwa>
MikeSmith: also, the test has the wrong expectation for cloneNode()

[23:24:27.0000] <rniwa>
per https://www.w3.org/Bugs/Public/show_bug.cgi?id=23565

[23:24:36.0000] <MikeSmith>
oh

[23:24:40.0000] <rniwa>
now that cloneNode() is equivalent to cloneNode(false)

[23:24:42.0000] <MikeSmith>
that's a different problem

[23:24:50.0000] <rniwa>
MikeSmith: that indeed is a serious problem

[23:24:51.0000] <MikeSmith>
should have a separate PR for that I think

[23:24:53.0000] <MikeSmith>
yeah

[23:25:10.0000] <rniwa>
MikeSmith: so what should we do about these tests?

[23:25:48.0000] <MikeSmith>
you have any way to flag them for now?

[23:25:56.0000] <MikeSmith>
as "don't run"

[23:26:09.0000] <MikeSmith>
for WebKit testing purposes I mean

[23:26:18.0000] <rniwa>
MikeSmith: well, i'm trying to import these tests so i'd rather fix the tests and run them

[23:26:31.0000] <rniwa>
MikeSmith: but suppose we need to wait for sgrekhov to push the changes to w3c repo

[23:26:37.0000] <rniwa>
and then separately fix the cloneNode issue

[23:26:50.0000] <rniwa>
MikeSmith: I can file a issue on w3c repo about cloneNode for now

[23:26:55.0000] <MikeSmith>
I can merge his changes

[23:27:13.0000] <rniwa>
MikeSmith: that'll be great :)

[23:27:25.0000] <zcorpan>
huh, firefox renders a glyph for U+000D (in live dom viewer's log)

[23:29:07.0000] <zcorpan>
i also didn't know about catch (e if foo)

[23:29:42.0000] <rniwa>
MikeSmith: filed https://github.com/w3c/web-platform-tests/issues/439

[23:30:17.0000] <MikeSmith>
rniwa: thanks

[23:31:09.0000] <MikeSmith>
/me tries to remember how in git he can merge single changeset from another fork without cloning the whole fork

[23:34:50.0000] <rniwa>
MikeSmith: looks like parsing-html-templats/clearing-the-stack-back-to-a-given-context has the same issue (missing assert_not_undefined)

[23:35:49.0000] <MikeSmith>
yeah

[23:37:12.0000] <MikeSmith>
I count 19 files in that changeset

[23:37:25.0000] <MikeSmith>
that have either that or  assert_not_null

[23:37:35.0000] <rniwa>
another interesting piece of information is that both Chrome & Firefox fail tests inside html-templates/additions-to-parsing-xhtml-documents

[23:49:28.0000] <rniwa>
MikeSmith: one more question

[23:49:40.0000] <rniwa>
MikeSmith: the idea is that w3c's tests will all be hosted under https://github.com/w3c/web-platform-tests/, right?

[23:50:00.0000] <MikeSmith>
yep

[23:50:03.0000] <rniwa>
MikeSmith: or will there be multiple repositories?

[23:50:10.0000] <MikeSmith>
one rep

[23:50:14.0000] <MikeSmith>
*repo

[23:50:19.0000] <MikeSmith>
is the goal

[23:50:27.0000] <MikeSmith>
including the CSS tests

[23:50:39.0000] <MikeSmith>
but currently the CSS tests are in a separate repo

[23:51:01.0000] <rniwa>
MikeSmith: excellent

[00:03:13.0000] <rniwa>
MikeSmith: https://lists.webkit.org/pipermail/webkit-dev/2013-November/025876.html

[00:03:29.0000] <MikeSmith>
/me looks

[00:03:35.0000] <rniwa>
MikeSmith: hopefully, we won't start another round of bike shedding this time :(

[00:03:55.0000] <rniwa>
MikeSmith: as much as I'm opinionated about this matter, I'd rather start importing tests now

[00:04:22.0000] <MikeSmith>
yeah, agreed, that's a better way to approach it

[00:05:00.0000] <rniwa>
MikeSmith: it helps a lot that W3C is moving all the tests into a single repository though

[00:05:04.0000] <rniwa>
MikeSmith: that makes things a lot easier for us

[00:06:56.0000] <MikeSmith>
well we'll see if the CSS tests ever do actually get moved

[00:07:25.0000] <MikeSmith>
I guess I should try to be optomistic about that

[00:08:25.0000] <marcosc_>
/me walks in to find "Optimistic Mike" ... walks out again. 

[00:08:39.0000] <MikeSmith>
heh

[00:19:28.0000] <rniwa>
MikeSmith: I can always throw in my vote :D

[00:21:22.0000] <rniwa>
MikeSmith: btw, i sent you an email about a meet up in tokyo if you have a time

[00:21:30.0000] <rniwa>
/me should get dinner soon

[00:21:49.0000] <rniwa>
/me visits http://www.gnavi.co.jp/

[00:22:11.0000] <MikeSmith>
rniwa: let's definitely get together but new week is better for me

[00:22:19.0000] <rniwa>
MikeSmith: same here

[00:22:34.0000] <MikeSmith>
OK, let's plan on that for sure

[00:22:45.0000] <rniwa>
MikeSmith: i'm trying to get template element enabled by default in webkit this week :D

[00:22:46.0000] <MikeSmith>
rniwa: where you staying?

[00:23:01.0000] <MikeSmith>
rniwa: yeah, saw your webkit-dev mail about that

[00:23:12.0000] <rniwa>
MikeSmith: i'm staying at Hotel Niwa Tokyo

[00:23:25.0000] <rniwa>
but will be moving to Hotel Remm Akihabara on Sunday

[00:23:33.0000] <rniwa>
so anywhere along JR line would work for me

[00:23:46.0000] <rniwa>
but Apple is in Roppongi so metro works as well

[00:23:52.0000] <MikeSmith>
OK

[00:24:13.0000] <MikeSmith>
I'm right along the Oedo-sen, Nishishinjuku Go-Chome

[00:24:25.0000] <rniwa>
ah

[00:24:36.0000] <MikeSmith>
so it only takes me 15 minutes to get out to Roppongi

[00:24:42.0000] <rniwa>
MikeSmith: nice.

[00:24:50.0000] <MikeSmith>
but there are better places to eat

[00:24:59.0000] <rniwa>
MikeSmith: i'm wondering if koji could come as well

[00:25:00.0000] <rniwa>
MikeSmith: yeah

[00:25:15.0000] <rniwa>
Restaurants in Roppongi are great but they're expensive as hell

[00:25:17.0000] <MikeSmith>
should ping koji

[00:25:19.0000] <MikeSmith>
yeah

[00:25:30.0000] <rniwa>
MikeSmith: I don't wanna pay $150 for a dinner like I did yesterday LOL

[00:25:36.0000] <MikeSmith>
geez

[00:25:39.0000] <rniwa>
I know

[00:25:46.0000] <rniwa>
although that was for two poeple

[00:25:50.0000] <MikeSmith>
still

[00:25:53.0000] <rniwa>
so more like $70/person

[00:26:00.0000] <rniwa>
but it was still surprising given we didn't even drink alcohol.

[00:26:05.0000] <MikeSmith>
Nakano-ku is the best place to eat

[00:26:10.0000] <rniwa>
oh

[00:26:36.0000] <rniwa>
didn't know that

[00:26:44.0000] <rniwa>
west of shinjyuku?

[00:27:22.0000] <rniwa>
i actually think even shinjyuku will be a saner place to eat than roppongi LOL

[00:27:25.0000] <MikeSmith>
yeah

[00:27:35.0000] <MikeSmith>
yeah, shinjuku is always fine by me

[00:27:59.0000] <rniwa>
anyway, let's figure it out date & place over email

[00:28:12.0000] <MikeSmith>
OK

[00:28:24.0000] <rniwa>
i'm basically free any date other than monday & tuesday evenings

[00:28:52.0000] <rniwa>
(leaving on saturday afternoon)

[00:30:05.0000] <MikeSmith>
了解

[00:31:29.0000] <rniwa>
MikeSmith: gatta get food now. thanks for the help for the tests. see you later.

[00:32:41.0000] <MikeSmith>
see you

[00:32:45.0000] <MikeSmith>
have a good eveningin

[01:13:33.0000] <zcorpan>
MikeSmith: what's the plan for w3c-test.org when wptserve lands?

[01:51:39.0000] <MikeSmith>
zcorpan: to switch it over

[01:51:43.0000] <MikeSmith>
hopefully

[01:53:41.0000] <MikeSmith>
if you mean as far as deploying wptserve there and getting rid of the php there

[01:54:24.0000] <MikeSmith>
though I guess that (surprise suprise) the thing that may prevent that is if the CSS WG

[01:56:48.0000] <MikeSmith>
if they're relying on the php

[01:56:50.0000] <zcorpan>
hsivonen: do you have a pointer to your json bom email?

[01:57:35.0000] <zcorpan>
MikeSmith: does w3c-test.org host css wg tests?

[01:58:05.0000] <MikeSmith>
it does

[01:59:14.0000] <MikeSmith>
their tests get mirrored there automatically whenever they push

[01:59:23.0000] <MikeSmith>
mercurial

[01:59:48.0000] <MikeSmith>
as we are doing for wpt

[02:00:22.0000] <MikeSmith>
except that from mercurial as we did for wpt beofre we moved to github

[02:01:14.0000] <zcorpan>
i see two .php files in the css repo

[02:01:25.0000] <zcorpan>
under incoming/

[02:01:32.0000] <zcorpan>
so that should be OK

[02:02:40.0000] <zcorpan>
which aren't even dynamic, so could be replaced with static files

[02:10:03.0000] <MikeSmith>
ok

[02:10:18.0000] <MikeSmith>
good

[02:11:01.0000] <MikeSmith>
btw if anybody would like to merge https://github.com/sgrekhov/web-platform-tests/commit/cef3e47ce2ef73ab2b791202c93cdad9a63a601e please do

[02:11:21.0000] <MikeSmith>
sgrekhov commit from an hour or so ago

[02:11:29.0000] <MikeSmith>
one of the unipro guys

[02:11:50.0000] <MikeSmith>
dammit

[02:12:30.0000] <MikeSmith>
he also include the change for the spec non-conformance thing that rniwa found

[02:12:36.0000] <MikeSmith>
in the same commit

[02:12:58.0000] <MikeSmith>
which, it's good that he fixed it, but better if he had done a separate commit

[02:13:10.0000] <MikeSmith>
https://github.com/sgrekhov/web-platform-tests/commit/cef3e47ce2ef73ab2b791202c93cdad9a63a601e#diff-de538db290d955367a1d544c773e7efcL62 is what I mean

[02:41:12.0000] <hsivonen>
German Thunderbird defaults to ISO-8859-15 for outgoing email.

[02:41:16.0000] <hsivonen>
/me disapproves

[02:42:50.0000] <hsivonen>
hmm. even the latest update to my ISO-8859-15 considered harmful post is 9 years old: http://hsivonen.fi/iso-8859-15/

[03:23:00.0000] <annevk>
hsivonen: I like the English tl;dr

[03:23:10.0000] <annevk>
more like tl;du

[03:26:42.0000] <hsivonen>
annevk: I disapprove of the linguists bikeshedding and then evangelizing an ISO-8859-1-incompatible encoding when 1) everyone should move to UTF-8 and 2) an ISO-8859-1-compatible 8-bit encoding with the relevant characters already exists (windows-1252)

[03:27:13.0000] <hsivonen>
annevk: it seems that the linguists were evangelizing ISO-8859-15 in the major newspaper at the time I wrote that

[03:27:36.0000] <hsivonen>
I can't remember if I sent the text to the newspaper and they rejected it and that's how I ended up putting it on the Web

[03:27:50.0000] <hsivonen>
the writing style looks like I intended it for the newspaper

[03:27:54.0000] <hsivonen>
can't recall

[03:28:54.0000] <hsivonen>
and it was sad that the Linux distros migrated from ISO-8859-1 to ISO-8859-15 in response to misguided evangelism

[03:29:00.0000] <hsivonen>
instead of going directly to UTF-8

[03:29:20.0000] <annevk>
sad panda

[03:29:21.0000] <hsivonen>
but fortunately, some time in the last 9 years, Linux distros converted to UTF-8 anyway

[04:37:56.0000] <hsivonen>
gedit doesn't support HZ

[04:38:03.0000] <hsivonen>
makes writing test cases harder

[04:38:12.0000] <hsivonen>
(also makes one suspect the usefulness of HZ)

[05:52:09.0000] <zcorpan>
jgraham: hmm, i made some changes to a separate branch and wanted to commit those changes, but it appears i also committed something for tools/pywebsocket and tools/wptserve

[05:54:16.0000] <jgraham>
zcorpan: If you actually did, you should be able to get back to the previous state and redo the commit

[05:54:29.0000] <jgraham>
Like git reset --mixed HEAD~

[05:54:46.0000] <jgraham>
Which should leave the working tree alone, but reset HEAD to the commit before HEAD

[05:55:00.0000] <jgraham>
Then you can redo the last commit with just the changes you want

[05:57:32.0000] <zcorpan>
ok thanks. i see what i did wrong now. i thought i was in a subdirectory and did `git add *` but actually i was at the root

[06:15:20.0000] <zcorpan>
thanks jgraham

[06:15:29.0000] <jgraham>
np

[06:16:01.0000] <zcorpan>
next up is making the tests reflect the current spec :-/

[06:16:53.0000] <zcorpan>
addEventListener needs to be properly tested, and i don't know how today's change affects the tests, if anything

[06:17:23.0000] <Ms2ger>
We don't exactly have a lot of tests for addEventListener, I'm afraid

[06:17:23.0000] <jgraham>
Today's change?

[06:17:46.0000] <zcorpan>
http://html5.org/tools/web-apps-tracker?from=8302&to=8303

[06:17:56.0000] <jgraham>
It's probably in the "well obviously *that* works" bucket of things that people don't bother writing tests for

[06:18:28.0000] <Ms2ger>
Until I find bugs in Servo's implementation :)

[06:18:38.0000] <zewt>
the real fun is xcode, which thinks it's smart and stages git changes all the time

[06:18:45.0000] <zewt>
need to find how to turn that off, causes me no end of grief

[06:21:29.0000] <jgraham>
/me has no idea if zewt intended that for this channel. Maybe it was related to the git conversion above

[06:24:23.0000] <zcorpan>
Hixie_: does http://html5.org/tools/web-apps-tracker?from=8302&to=8303 change something that is interesting to write a test case for? does it affect this test http://w3c-test.org/web-platform-tests/master/html/webappapis/scripting/processing-model-2/compile-error-in-body-onerror.html ?

[06:25:43.0000] <jgraham>
zcorpan: You saw that bz has some tests in the bug?

[06:26:55.0000] <jgraham>
(I assume that the point of the change is that onfoo causes a syntax error only when it is actually called for the first time. But I didn't read it in detail)

[06:27:33.0000] <jgraham>
(assuming the attribute contains a script with a syntax error ofc)

[06:30:27.0000] <zcorpan>
ok so the spec previously required onerror to be invoked each time

[06:31:27.0000] <zcorpan>
i think that was considered when opera implemented onerror and we concluded that it was possible to compile once but invoke onerror anyway

[06:33:35.0000] <zcorpan>
i have http://w3c-test.org/web-platform-tests/master/html/webappapis/scripting/processing-model-2/compile-error-in-attribute.html but it only fires one event

[07:06:30.0000] <jgraham>
zcorpan: :-o

[07:06:44.0000] <jgraham>
What are we expected to do with all those .pl files?

[07:07:05.0000] <zcorpan>
jgraham: rewrite to web driver?

[07:07:38.0000] <zcorpan>
jgraham: someone was going to do that and wanted our .pl hacks as a starting point, i think

[07:07:42.0000] <Ms2ger>
.pl? Fun

[07:08:23.0000] <zcorpan>
jgraham: maybe that PR doesn't need to be merged, but rather dropped when there's a web driver thing as a separate PR

[07:08:28.0000] <jgraham>
zcorpan: OK

[07:08:38.0000] <jgraham>
Would be nice to have a comment to that effect

[07:08:48.0000] <zcorpan>
sure

[07:09:07.0000] <jgraham>
Also, good luck to whoever was going to rewrite those

[07:13:42.0000] <SimonSapin>
why does Thunderbird use different fonts for different character encodings? And very ugly fonts

[07:14:32.0000] <jgraham>
Probably picks a font that it expects to have all the glyphs for that encoding, rather than doing per-glyph substitution

[07:14:39.0000] <jgraham>
But I don't know ofc

[07:15:11.0000] <jgraham>
And yeah, when people set far-east encodings it gets really ugly

[07:35:06.0000] <jgraham>
Looks like Pointer Events is using the DOM 2 style of spec

[07:35:19.0000] <jgraham>
Would be nice if Respec didn't support that

[07:42:56.0000] <darobin>
jgraham: get me 2-3 uninterrupted days in a row and I'll finally fix that...

[07:43:34.0000] <Ms2ger>
Heh

[07:43:57.0000] <Ms2ger>
Give darobin an uninterrupted week, he'll solve world hunger :)

[07:44:34.0000] <darobin>
I'll throw in cancer if you give me the weekend too :)

[07:45:31.0000] <jgraham>
/me takes a grenade launcher to darobin's calendar

[07:46:15.0000] <darobin>
/me hopes that jgraham's aim is bad, the calendar isn't all that far away...

[07:46:57.0000] <Ms2ger>
/me doesn't approve of suicide-by-jgraham

[07:47:43.0000] <jgraham>
Don't worry it's only a minature one

[07:48:02.0000] <jgraham>
Big enough to blow holes in your schedule, not harmful to humans

[07:48:16.0000] <jgraham>
Lego figures, on the other hand, should take cover

[07:48:40.0000] <darobin>
oh great, now my desk is a mess of Lego figures running all over the place

[07:48:42.0000] <darobin>
thanks, really

[07:48:56.0000] <Ms2ger>
/me loves that picture

[07:49:00.0000] <Ms2ger>
(<picture>?)

[07:49:06.0000] <miketaylr>
>:|

[07:49:30.0000] <miketaylr>
what kinds of bad things would happen if you made DOM apis case-insensitive?

[07:49:47.0000] <jgraham>
All kinds of bad things

[07:49:51.0000] <jgraham>
War

[07:49:54.0000] <jgraham>
Famine

[07:50:00.0000] <jgraham>
Les Dennis

[07:51:28.0000] <jgraham>
miketaylr: (was that a serious question? And if so, what do you mean?)

[07:51:44.0000] <miketaylr>
jgraham: yeah, serious question

[07:51:46.0000] <miketaylr>
i mean,

[07:52:22.0000] <miketaylr>
what would you break if you allowed something like document.reQuEstFulLscrEen() to work

[07:52:26.0000] <miketaylr>
(other than hearts, perhaps)

[07:52:51.0000] <Ms2ger>
That would mean putting 2**len functions on the prototypes?

[07:53:03.0000] <jgraham>
I think what would break would be your front door under a raging mob of TC39ers

[07:53:07.0000] <miketaylr>
heh

[07:53:09.0000] <Ms2ger>
/me gives miketaylr his big "NO" rubber stamp

[07:53:13.0000] <miketaylr>
dang

[07:53:18.0000] <miketaylr>
was super close too

[07:53:38.0000] <jgraham>
Yeah, that just seems like a bad idea since js doesn't work like that

[07:53:53.0000] <jgraham>
(did VB(A) used to work like that?)

[07:54:04.0000] <miketaylr>
actual issue, https://bugzilla.mozilla.org/show_bug.cgi?id=743198#c5

[07:54:14.0000] <miketaylr>
(which doesn't require going case-insensitive)

[07:54:45.0000] <Ms2ger>
miketaylr, deployed sites have listened to our console warnings in the past

[07:55:04.0000] <miketaylr>
that's cool Ms2ger

[07:55:32.0000] <miketaylr>
i'm less optimistic (by nature, perhaps)

[07:55:35.0000] <Ms2ger>
So we'll go with that for now, and see where we end up

[07:55:50.0000] <odinho>
Ms2ger: You didn't actually ever tell me what you wanted reviewed? So it was deemed boring enough for me to do it w m gf in the evening? :P

[07:55:54.0000] <jgraham>
Honestly if console warnings don't work, the spec should require support for both versions

[07:56:04.0000] <Ms2ger>
If it turns out we can't get away without the two, we'll spec and implement both

[07:56:06.0000] <Ms2ger>
But not before

[07:56:23.0000] <Ms2ger>
odinho, jgraham's review, probably

[07:56:36.0000] <miketaylr>
given the amount of "wrong" unprefixed on stackoverflow alone...

[07:56:53.0000] <jgraham>
odinho does code review with his girlfriend in the evenings?

[07:56:59.0000] <miketaylr>
anyhow let's pick up this conversation in a few years ^_^

[07:57:04.0000] <Ms2ger>
"code review", eh

[07:57:06.0000] <Ms2ger>
/me winks

[07:57:21.0000] <odinho>
jgraham: True dat.

[07:57:48.0000] <odinho>
Ms2ger: I've done all the fun parts, CORS, SSE. It's that huge blob'o'XHR left last time I looked :P

[07:57:57.0000] <Ms2ger>
odinho, indeed

[07:58:02.0000] <odinho>
Ms2ger: Didn't dare starting. But I guess it should be possible to take one test at a time.

[07:58:15.0000] <Ms2ger>
I've cut off some slices of the huge blob'o'XHR already

[07:58:45.0000] <Ms2ger>
They mostly need someone who can read php more easily than me to check if the python is equivalent

[07:58:52.0000] <odinho>
Hmm. Okay. Yeah, we should really get it done. I feel a bit bad about that. It should go through.

[07:59:01.0000] <odinho>
Since I really like that branch ;]

[07:59:26.0000] <odinho>
Am thinking of doing a mini-testthewebforward with lstorset here in Oslo.

[07:59:36.0000] <Ms2ger>
Just the two of you, or? :)

[08:00:27.0000] <odinho>
lol, no, we'll invite as many as we can. And getting Opera to pay for location etc.

[08:01:46.0000] <Ms2ger>
odinho, btw, I'm offering chocolate shipments for people who do reviews ;)

[08:02:10.0000] <jgraham>
FWIW "as many as we can" is not the strategy I would currently recommend

[08:02:38.0000] <Ms2ger>
jgraham, depends on the definition of "can", I guess

[08:02:53.0000] <jgraham>
I think that it is worth specifically targetting the most experienced webdevs

[08:02:54.0000] <Ms2ger>
zcorpan, should be able to send your chocolate next week, btw

[08:03:21.0000] <odinho>
jgraham: Ah, yes. Well, that was the plan. Thinking 20-40 people in total. Something manageable.

[08:03:41.0000] <jgraham>
Right, that sounds good to me

[08:04:11.0000] <odinho>
e.g. I won't put my dad, mother, brother and sister there just because it'd be +4 :P

[08:04:36.0000] <jgraham>
They don't live in Trondheim?

[08:04:38.0000] <Ms2ger>
odinho, dunno, if they're as skilled as you? :)

[08:04:41.0000] <odinho>
jgraham: Stavanger.

[08:05:15.0000] <odinho>
Ms2ger: lol, implying I am skilled!

[08:05:27.0000] <Ms2ger>
odinho, not necessarily ;)

[08:05:46.0000] <odinho>
Hmm, true dat! :D

[08:05:47.0000] <jgraham>
odinho: That's even further away!

[08:06:05.0000] <odinho>
jgraham: we have trains, planes etc. in Norway too.

[08:06:48.0000] <jgraham>
Well if they are prepared to travel 500km for TestTWF they deserve to be invited just for the commitment

[08:07:15.0000] <odinho>
I'm sure they won't. :)

[08:08:44.0000] <Ms2ger>
odinho, maybe they'd like to see you once in a while :)

[08:09:13.0000] <jgraham>
Maybe they can't stand the big city and he always has to go there?

[08:10:10.0000] <odinho>
huh? -- Actually, they're trying to come here, but I never have the time to have visitors :P  Always busy.

[08:10:47.0000] <Ms2ger>
See, might want to invite them, then :)

[08:10:58.0000] <odinho>
No wonder when there's so much open to review all the time. :|

[08:11:19.0000] <odinho>
Not that I ever seem to get that far down on the todo list though.

[08:11:31.0000] <Ms2ger>
/me will stop bothering odinho, so he can review

[08:11:32.0000] <odinho>
(and few others too, ref. our review problem)

[08:11:53.0000] <odinho>
I'm debugging internal repatching system atm.

[09:21:06.0000] <Hixie_>
zcorpan: one implication of that change is that the scope chain is that of when the event first fires, not that of when the event handler is set

[09:22:57.0000] <Hixie_>
zcorpan: another is that getting the event handler when it's set to something that fails to compile calls onerror but doesn't throw

[09:34:02.0000] <dglazkov>
good morning, Whatwg!

[09:50:23.0000] <Ms2ger>
Good night, dglazkov

[09:57:30.0000] <zcorpan>
Ms2ger: awesomeness :-)

[11:14:55.0000] <Hixie_>
bholley: if you can get microsoft's input, regardless of how you get it, please do!

[11:42:20.0000] <Hixie_>
input especially from mozilla and microsoft people on https://www.w3.org/Bugs/Public/show_bug.cgi?id=22731 about atob() would be useful

[11:43:00.0000] <Ms2ger>
/me looks

[11:43:27.0000] <Ms2ger>
I think we recently implemented the remove-all-spaces behaviour

[11:45:40.0000] <Ms2ger>
Hixie_, Nightly and Aurora should implement the spec: https://bugzilla.mozilla.org/show_bug.cgi?id=711180

[11:45:54.0000] <Hixie_>
please comment on the bug :-)

[11:53:04.0000] <Ms2ger>
marcosc_, www-style⊙wo? Does that even work?

[11:53:40.0000] <gsnedders>
Ms2ger: Yeah.

[11:54:00.0000] <marcosc_>
I don't know... just thought it was funny that Chrome Dev Summit folks only mentioned those lists

[11:54:12.0000] <marcosc_>
like the rest of the W3C doesn't exist :)

[11:54:30.0000] <miketaylr>
...so you're saying there's more lists.

[11:54:36.0000] <marcosc_>
heh

[11:54:51.0000] <gsnedders>
Ms2ger: AFAIK the list. is entirely optional for all lists

[11:55:20.0000] <Ms2ger>
gsnedders, not w3.org, btw

[12:50:43.0000] <zcorpan>
in other news, closing a captains of crush 1.5 is harder than i expected


2013-11-22
[16:19:57.0000] <Benvie>
Domenic_: how stable is https://github.com/domenic/promises-unwrapping

[16:21:15.0000] <Benvie>
we're looking at implementing the rest of the API in JS while waiting for the C++ implementation (https://bugzilla.mozilla.org/show_bug.cgi?id=941920)

[16:27:10.0000] <Domenic_>
Benvie: it's done

[16:27:15.0000] <Benvie>
excellent

[16:27:22.0000] <Domenic_>
I might move some things into abstract operations for the module loader spec

[16:27:38.0000] <Domenic_>
Benvie: on that note see https://github.com/domenic/promises-unwrapping/blob/master/testable-implementation.js

[16:27:51.0000] <Benvie>
yeah I've looked through that. It's a good reference

[16:28:09.0000] <Domenic_>
without that this would have been madness

[16:28:18.0000] <Domenic_>
i'd make spec changes and get many test failures

[16:28:23.0000] <Benvie>
haha yeah

[16:28:24.0000] <Domenic_>
https://github.com/domenic/promises-unwrapping/issues/milestones

[16:28:52.0000] <Benvie>
I have a question about Promise.cast

[16:29:09.0000] <Benvie>
Promise.cast({ then: () => {})

[16:29:30.0000] <Domenic_>
returns a forever-pending Promise

[16:29:31.0000] <Benvie>
it's not supposed to assimilate thenables, is this correct?

[16:29:37.0000] <Domenic_>
it is supposed to assimilate thenables

[16:30:02.0000] <Benvie>
oh yeah I see

[16:30:32.0000] <Benvie>
IsPromise will return false for it, but it will be assimilated as part of resolution

[16:30:36.0000] <Domenic_>
yeah

[16:30:46.0000] <Benvie>
thanks

[16:30:54.0000] <Domenic_>
The IsPromise is for memory-efficient casts when you know you have the right type

[16:31:15.0000] <Benvie>
yeah, it's just a shortcut

[16:31:17.0000] <Domenic_>
so if you are programming defensively you do deepFreeze(Promise); Promise.cast(thingy).then(...)

[16:31:27.0000] <Domenic_>
and you pay no memory costs

[16:31:50.0000] <Domenic_>
The constructor check is important because otherwise you could fool it with an ill-behaved subclass

[16:32:31.0000] <Benvie>
yeah. In our JS implementation we're not supporting subclasses so it cuts out some of the complexity there

[16:33:02.0000] <Domenic_>
yeah, probably all of it -_-

[16:33:07.0000] <Benvie>
haha yeah

[16:34:23.0000] <Domenic_>
spec was like done, without subclassing, on 2013-09-18 according to commit logs. Then I started getting envious of allenWB's Array tricksiness...

[16:35:07.0000] <Benvie>
it's good you did it though. If you hadn't, then it would have had to be added at some point anyway to get into ES6, since all the builtins have to be subclassable now

[16:37:21.0000] <Domenic_>
yeah, i like this new world of subclassable builtins

[16:37:27.0000] <Domenic_>
you guys should make array subclassable

[16:40:06.0000] <gsnedders>
Gah, just accidentally nuked my local logs of #whatwg going back years. Oh well.

[20:02:52.0000] <rniwa>
MikeSmith, jgraham: maybe either one of you could approve my PR to fix some html template tests? https://github.com/w3c/web-platform-tests/pull/442

[20:02:57.0000] <rektide>
if i want to author some kind of spec, what should i do to get started? w3 seems to use this respec thing, but i'm not sure what it really consititutes, what it's for, what reading i need to do, how i should get started?

[20:03:44.0000] <rniwa>
rektide: my recommendation is to start writing the document somewhere

[20:03:57.0000] <rniwa>
rektide: and figure out those things later

[20:04:07.0000] <rniwa>
rektide: unless you've just signed up to be an editor of some specification

[20:06:14.0000] <rektide>
yeah... my urge to do it right is a hard one to ignore. i didn't really expect there being any onboarding guides or good ways to get started, but i figured i'd ask.

[20:07:46.0000] <rniwa>
rektide: have you read http://www.w3.org/html/wg/wiki/ExtensionHowTo ?

[20:08:00.0000] <rniwa>
rektide: I don't know what kind of specification you're intending to write

[20:08:15.0000] <rniwa>
rektide: but if it's something you haven't proposed somewhere yet

[20:08:16.0000] <rniwa>
rektide: then do that first

[20:08:29.0000] <rniwa>
rektide: it doesn't make much sense to put all your energy into making things right

[20:08:48.0000] <rniwa>
if your proposal has to change significantly due to feedback you get

[20:09:03.0000] <Domenic_>
rektide: I find GitHub + markdown specs is plenty. See e.g. https://github.com/whatwg/streams/ or even https://github.com/domenic/promises-unwrapping

[20:15:06.0000] <rektide>
rniwa: I am writing an extension atm. that ExtensionHowTo is an invaluable link, my sincere thanks

[20:15:28.0000] <rektide>
thanks both, thanks a dozen

[20:28:37.0000] <rniwa>
/me gets lunch

[01:04:13.0000] <hsivonen>
annevk-cloud: is there something wrong with my test case or do non-Gecko browsers not support responseType = "json" ? http://hsivonen.com/test/moz/json-bom/test.html

[01:28:27.0000] <odinho>
hsivonen: Presto does at least.

[01:28:35.0000] <odinho>
(if you tested that :P )

[01:38:28.0000] <hsivonen>
odinho: I didn't

[01:38:56.0000] <odinho>
hsivonen: Okay. But now you know ;-)

[01:39:20.0000] <hsivonen>
odinho: boo. Presto supports UTF-16.

[01:40:53.0000] <odinho>
Yeah. Too bad there was no testharness.js test with that as a fail-condition when sof did that work. He's very responsive to fixing red tests.

[01:41:10.0000] <odinho>
Whenever I wanted him to fix something it was just to create a test for it, didn't have to say anything :P

[01:45:24.0000] <hsivonen>
I expected Blink to have responseType json support by now, but apparently not

[01:49:15.0000] <hsivonen>
hmm. I'm on 100 Mbps down connection and Presto Opera tells me I'm on a slow network

[01:52:11.0000] <odinho>
HEHE. Yes.

[01:52:30.0000] <zcorpan>
presto opera has high expectations

[01:52:45.0000] <odinho>
Opera 12 likes trolling.

[01:53:16.0000] <zcorpan>
100 Mbps? Why not 100 Gbps?

[02:09:42.0000] <jgraham>
odinho: s/responsive fixing red tests/awesome/

[02:10:53.0000] <jgraham>
hsivonen: Presto's slow network connection experience is one reason I am very skeptical of adding any kind of "low bandwidth detection" API

[02:18:39.0000] <smaug____>
hayato: hi. so about event propagation

[02:18:51.0000] <hayato>
smaug____: hi

[02:19:28.0000] <smaug____>
(I've been reviewing the patch for Gecko)

[02:19:58.0000] <hayato>
smaug____: sounds nice.

[02:20:03.0000] <smaug____>
I filed few bugs, but those are quite clear, I think

[02:20:11.0000] <smaug____>
but 6.2, Event paths

[02:20:13.0000] <hayato>
smaug____: what's problem?

[02:20:20.0000] <smaug____>
there is some strangeness

[02:20:32.0000] <smaug____>
putting all the insertion points to the path

[02:21:04.0000] <smaug____>
that leads to a setup where the path may contain some elements, but not their parent nodes

[02:21:24.0000] <smaug____>
even though element and its parent belong to the same shadow tree

[02:21:42.0000] <smaug____>
what is the reason to put all the insertion points to the path

[02:21:54.0000] <smaug____>
and not only the final destination

[02:24:37.0000] <hayato>
smaug____: I don't have a strong opinion for that. I guess some developers want to register listeners to an insertion points, which is not the final destination to monitor a distributed node.

[02:24:49.0000] <hayato>
But I am feeling you are right.

[02:25:10.0000] <hayato>
smaug____: The final destination is enough for most use cases.

[02:25:43.0000] <smaug____>
yup

[02:25:47.0000] <hayato>
AFAIR, no one has expressed opinion for this part of the spec.

[02:26:24.0000] <hayato>
smaug____:  I think we can change the part of the spec.

[02:26:29.0000] <smaug____>
it is mainly the consistency of event target chain which breaks if also non-final destination is put to the path

[02:26:34.0000] <smaug____>
hayato: good!

[02:27:01.0000] <hayato>
smaug____: Okay. Let me think again.

[02:27:02.0000] <smaug____>
/me likes consistency and simplifying things

[02:28:05.0000] <hayato>
smaug____: Let me do that in a few business days.

[02:28:22.0000] <smaug____>
k

[02:29:41.0000] <smaug____>
thanks

[02:30:15.0000] <smaug____>
hayato: I could file a bug

[02:30:34.0000] <odinho>
jgraham: sof is moved to blink now, if you didn't know :)

[02:30:43.0000] <hayato>
smaug____: for the spec? I appreciate that!

[02:31:00.0000] <smaug____>
yeah

[02:31:07.0000] <hayato>
smaug____: thanks!

[02:31:12.0000] <smaug____>
hayato: what is your w3c bugmail?

[02:31:23.0000] <jgraham>
odinho: I did. I have high hopes for blink suddenly becoming much more spec compliant :)

[02:31:32.0000] <smaug____>
looks like components stuff defaults to dglazkov

[02:31:35.0000] <hayato>
smaug____: hayato⊙co

[02:32:00.0000] <odinho>
jgraham: Haha. Lots of pressure on the man!

[02:32:43.0000] <hayato>
smaug____:  I don't know how to change the default. :)

[02:32:59.0000] <jgraham>
odinho: No pressure, but seriously, he seems to eat bugs for breakfast ;)

[02:33:41.0000] <odinho>
this is true

[02:34:15.0000] <darobin>
the great thing with eating bugs for breakfast is that they don't get all soggy in the milk

[02:34:51.0000] <smaug____>
hayato: does dglazkov handle still some of the web components stuff?

[02:35:21.0000] <smaug____>
or should all the bugs be assigned to you by default ?

[02:35:55.0000] <smaug____>
I'm sure MikeSmith could ask someone to change the default, if needed

[02:37:18.0000] <hayato>
smaug____: Ops. I am afraid that we don't have a category for Shadow DOM. There is only for ComponentModel which includes Shadow DOM.

[02:37:36.0000] <Ms2ger>
Note to self: don't typo firewall as fireball

[02:38:02.0000] <hayato>
smaug____: dglazkov absolutely handles a lot of web components stuff. So the current default is okay.

[04:23:14.0000] <hsivonen>
these days Web authors are so clueful that it's hard to find an unlabeled non-windows-1252 site for testing

[04:38:03.0000] <hsivonen>
where do I find an unlabeled non-windows-1252 site on a non-windows-1252-affiliated country TLD?

[04:38:21.0000] <hsivonen>
there are tons of these, but now that I want to find one, where are they?

[04:38:50.0000] <jgraham>
hehe

[05:45:07.0000] <zcorpan>
hsivonen: what are the non-windows-1252-affiliated TLDs?

[05:49:29.0000] <zcorpan>
jgraham: was there any conclusion about how to do cleanup for async tests?

[05:50:26.0000] <hsivonen>
zcorpan: https://bugzilla.mozilla.org/attachment.cgi?id=8336745&action=diff#a/dom/encoding/domainsfallbacks.properties_sec2

[05:50:36.0000] <zcorpan>
jgraham: i think it might be good with a 'result' callback on the Test itself

[05:54:39.0000] <jgraham>
zcorpan: Yeah

[05:54:52.0000] <jgraham>
Could certainly have a "finally" function

[05:55:04.0000] <jgraham>
Not sure what the syntax should be, exactly though

[05:55:49.0000] <zcorpan>
jgraham: i think it should be possible to define the function inside a step. possibly be able to define several functions that will be invoked (like event listeners)

[05:56:13.0000] <zcorpan>
jgraham: in order to use variables in that scope

[05:56:22.0000] <jgraham>
zcorpan: I guess

[05:56:29.0000] <jgraham>
Seems complicated

[05:56:48.0000] <jgraham>
But it could work I guess as this.add_cleanup(function(){})

[05:56:56.0000] <zcorpan>
yeah

[05:58:08.0000] <zcorpan>
so if i create an iframe and append it to the document, i can define the cleanup function right next to it and not have to store the iframe in a global variable or anything

[05:59:03.0000] <jgraham>
zcorpan: I'm on it

[05:59:06.0000] <zcorpan>
cool

[06:08:28.0000] <jgraham>
zcorpan: I guess the cleanup ought to be called even if the test doesn't finish running?

[06:08:42.0000] <jgraham>
I mean, if it gets status NOT RUN

[06:09:06.0000] <darobin>
yes

[06:09:28.0000] <zcorpan>
is that the same as TIMEOUT? or isn't TIMEOUT a thing anymore?

[06:09:43.0000] <darobin>
I reckon cleanup should always run no matter what

[06:09:45.0000] <jgraham>
(at that point the user will navigate the page ofc, but it's possible that the test will do something that will persist across navigation)

[06:09:58.0000] <jgraham>
TIMEOUT is a thing still

[06:10:41.0000] <zcorpan>
my thinking was that cleanup would be invoked at the same time as 'result'

[06:10:42.0000] <jgraham>
But maybe NOT RUN only happens if you don't run any steps these days; I gorget how the semantics ended up

[06:11:05.0000] <MikeSmith>
hayato: if you want a Shadow DOM component created, we can can make one

[06:21:13.0000] <hsivonen>
MikeSmith: FYI, validator.nu and html5.validator.nu now run on OpenJDK 7

[06:22:57.0000] <MikeSmith>
hsivonen: ah cool

[06:25:02.0000] <hsivonen>
migrated to Ubuntu 12.04 just in time for 14.04

[06:26:20.0000] <MikeSmith>
so I hope Java versioning is stable at 7 now for a while

[06:26:53.0000] <MikeSmith>
I've not found anything that was added in 7 that I have any compelling need for

[06:27:26.0000] <MikeSmith>
so I can't imagine that anything added in the next major version will be anything really useful

[06:30:05.0000] <hsivonen>
MikeSmith: Java 7 added SNI

[06:30:19.0000] <hsivonen>
MikeSmith: though I haven't tested if the old HttpClient uses it

[06:30:36.0000] <MikeSmith>
I have to admit I don't know what SNGI is

[06:30:39.0000] <MikeSmith>
*SNI

[06:30:40.0000] <hsivonen>
MikeSmith: that's gonna be necessary when IE for XP dies and https virtual hosting takes off

[06:30:47.0000] <MikeSmith>
oh

[06:30:54.0000] <hsivonen>
MikeSmith: it's like the HTTP Host header but for TLS

[06:31:01.0000] <MikeSmith>
Server Name Indication

[06:31:17.0000] <MikeSmith>
I've never heard of it til now

[06:31:39.0000] <hsivonen>
MikeSmith: because the IE/XP boat anchor means it can't be deployed

[06:32:41.0000] <hsivonen>
though first, the Android 2.x boat anchor needs to fade away, too

[06:33:01.0000] <hsivonen>
it's shameful how Google shipped Anroid 2.x without SNI

[06:35:32.0000] <hsivonen>
MikeSmith: sadly, validator.nu even on OpenJDK 7 doesn't support SNI

[06:35:36.0000] <hsivonen>
gotta fix that!

[06:36:04.0000] <jgraham>
zcorpan:  https://critic.hoppipolla.co.uk/r/436 or something?

[06:37:02.0000] <jgraham>
I wonder what happens if window.onerror is called

[06:38:11.0000] <jgraham>
I guess it still works

[06:39:40.0000] <zcorpan>
hsivonen: i have a list of 276 urls with those tlds that don't have charset in content-type or <meta>

[06:40:30.0000] <hsivonen>
zcorpan: cool. can you post the list somewhere?

[06:40:39.0000] <zcorpan>
yep

[06:45:47.0000] <zcorpan>
hsivonen: i didn't exclude ascii-only pages, but you could filter for that if you download the data set

[06:46:17.0000] <hsivonen>
zcorpan: ok

[06:46:35.0000] <hsivonen>
/me learns that there's a new Java dependency management tool https://ant.apache.org/projects/ivy.html

[06:47:27.0000] <hsivonen>
"People don't like Maven. Let's name the replacement to something that people associate with poison. That'll drive adoption."

[06:51:36.0000] <zcorpan>
jgraham: yep. thanks!

[06:54:58.0000] <jgraham>
zcorpan: My only concern about that design is that it doesn't have great atomicity properties

[06:55:11.0000] <jgraham>
Although it's hard to think of a design that does

[06:55:16.0000] <jgraham>
e.g. if you do

[06:55:25.0000] <jgraham>
set_some_state()

[06:55:32.0000] <jgraham>
set_some_more_state()

[06:55:46.0000] <jgraham>
this.add_cleanup(rollback_state)

[06:56:04.0000] <jgraham>
and set_some_more_state fails, you won't clean up the first lot of state

[06:56:25.0000] <jgraham>
(those are only functions for convenience, they could be statements or whatever)

[06:56:34.0000] <zcorpan>
yeah, then you'd have to use two add_cleanups

[06:56:56.0000] <jgraham>
Right, but people clearly aren't going to do that. I guess it is just something we will have to live with

[06:56:58.0000] <zcorpan>
which i noticed i didn't do in my test that inserts two elements to the document

[06:57:19.0000] <zcorpan>
though they both append to body so if the first one succeeds the second one really should also

[06:57:27.0000] <zcorpan>
yeah

[06:58:04.0000] <jgraham>
OK, let's see how that works out

[06:58:26.0000] <jgraham>
Maybe we can change the API if it is only used a little bit and turns out to be too hard to use

[06:59:00.0000] <zcorpan>
my first impression is that it's awesome :-)

[06:59:28.0000] <jgraham>
Well that is good at least :)

[06:59:34.0000] <darobin>
the only question I had was about whether there should be a specific context for the callback

[06:59:44.0000] <darobin>
but I guess that's nothing that bind() can't do for you

[06:59:47.0000] <zcorpan>
even for sync test it looks better than try/finally because the cleanup can be defined next to the relevant thing

[07:00:40.0000] <jgraham>
darobin: I don't think there is anything that makes sense by default?

[07:00:49.0000] <darobin>
jgraham: that was my second thought

[07:00:55.0000] <jgraham>
But it could take a this_obj ofc

[07:01:03.0000] <hsivonen>
occasionally I wonder if the HttpClient devs are just trolling downsteam users by refactoring the API in every release

[07:01:13.0000] <darobin>
yeah, I thought about that — but it's adding wiring for stuff that people can do for themselves easily

[07:01:40.0000] <darobin>
other than that, it means I should probably update my docs

[07:02:52.0000] <zcorpan>
let's keep it simple for now

[07:04:05.0000] <darobin>
+1

[07:11:11.0000] <zcorpan>
jgraham: what should i do to get wptserve running again? :-)

[07:12:05.0000] <jgraham>
zcorpan: Gah

[07:12:29.0000] <jgraham>
I wonder if I can get my hands on a Mac

[07:13:36.0000] <Ms2ger>
Look around the office; about half of the people in your line of sight will have some kind of macbook :)

[07:15:28.0000] <zcorpan>
i checked out the previous commit for now

[07:27:03.0000] <hsivonen>
I'm sure this new HttpClient API makes sense to its creators...

[07:29:05.0000] <hsivonen>
old versions had *documentation*

[07:36:00.0000] <zcorpan>
has anyone researched how many attributes elements have in the wild?

[07:38:06.0000] <zcorpan>
/me finds http://canvex.lazyilluminati.com/misc/stats/attrcounts.png

[07:40:59.0000] <Ms2ger>
zcorpan, svg is rumoured to have lots

[07:42:47.0000] <zcorpan>
Ms2ger: but svg isn't very common

[07:43:10.0000] <Ms2ger>
True

[07:46:56.0000] <zcorpan>
i'm writing some tests for resolving urls, do you guys prefer if i open a PR now when it's half-finished or should i wait until i think it's complete?

[07:47:45.0000] <Ms2ger>
Feel free to do it now

[07:48:51.0000] <zcorpan>
k

[07:56:40.0000] <zewt>
gar @ pages that redirect to /maintenance when offline

[08:05:27.0000] <zcorpan>
https://critic.hoppipolla.co.uk/r/437

[08:07:44.0000] <zcorpan>
jgraham: this reminded me that testharness.js is annoying for utf-16 tests, i need to use <link charset>

[08:08:36.0000] <zcorpan>
/me *poof*

[08:08:47.0000] <jgraham>
Sigh

[08:09:16.0000] <jgraham>
zcorpan is now the second person in a row who had disappeared as I was typing a message for them

[08:10:50.0000] <Ms2ger>
Probably should make it utf-8 in http

[08:12:05.0000] <jgraham>
Yeah, but I don't quite know the right way to do that

[08:12:17.0000] <jgraham>
Some sort of configuration file?

[08:12:28.0000] <jgraham>
Custom magic in the server?

[08:12:39.0000] <jgraham>
I guess custom magic isn't so bad

[09:42:34.0000] <jgraham>
Achievement unlocked: person uses sync XHR as a justification foradding more blocking APIs

[10:09:16.0000] <jensnockert>
/me hugs jgraham.

[10:36:52.0000] <wilhelm_>
zcorpan, the most popular guy at the party: http://testthewebforward.org/assets/blog/shenzhen//testtwf-shenzhen25.jpg

[10:37:22.0000] <Ms2ger>
Is he the leftmost guy?

[10:43:21.0000] <miketaylr>
heh

[10:43:26.0000] <miketaylr>
(that's leif arne)

[10:52:07.0000] <Hixie>
anyone got any idea what kind of diagram would help with MessagePort objects, Window.postMessage, and so forth? https://www.w3.org/Bugs/Public/show_bug.cgi?id=23851

[10:59:21.0000] <Hixie>
can anyone find the e-mail address of 'Robert D. Thompson, author of "The MFC Programmer's Reference" (1997)' ?

[11:03:29.0000] <miketaylr>
Hixie: found his linkedin, http://www.linkedin.com/in/robertdeanthompson

[11:03:47.0000] <Hixie>
any way to communicate with him from there?

[11:03:52.0000] <Hixie>
(i don't do linked in)

[11:04:01.0000] <miketaylr>
i guess you can send "inmail", i've never used it

[11:04:30.0000] <miketaylr>
also https://plus.google.com/105991459354415331406/posts

[11:04:35.0000] <miketaylr>
but i dont do g+ :p

[11:05:01.0000] <Hixie>
i can use g+, thanks

[11:05:08.0000] <Hixie>
(though it looks like he doens't actively use it)

[11:07:40.0000] <miketaylr>
meh, have to upgrade to even send InMail™

[11:08:10.0000] <Hixie>
g+ isn't letting me +him into a post

[11:08:11.0000] <Hixie>
ok

[11:08:28.0000] <Hixie>
i guess i can send him a hangouts message but he's not online and probably won't get it for months if he doesn't use hangouts

[11:08:40.0000] <Hixie>
i could send him a youtube message but he won't get that since he doesn't seem to use youtube

[11:08:48.0000] <Hixie>
oh well

[11:14:56.0000] <marcosc_>
that was the moment zcorpan figured out we could do <picture> another way

[11:16:54.0000] <TabAtkins>
Are other people actually capable of seeing that image?  It sounds like you are, but I get a 404.

[11:44:49.0000] <SimonSapin>
TabAtkins: you mean testtwf-shenzhen25.jpg? I see it

[12:15:17.0000] <Ms2ger>
OH: "Use a bug in the UTF-7 decoder..."

[12:20:52.0000] <TabAtkins>
SimonSapin: Hm.  I click on that link, which navigates to http://testthewebforward.org/assets/blog/shenzhen//testtwf-shenzhen25.jpg, which 404s.

[12:26:02.0000] <Hixie>
what browser?

[12:26:03.0000] <miketaylr>
200 OK

[12:26:34.0000] <Hixie>
http://testthewebforward.org/assets/blog/shenzhen//testtwf-shenzhen25.jpg works for me in firefox and chrome and... i'd test webkit but my webkit seems to have died.

[12:26:39.0000] <Hixie>
brb fixing webkit.

[12:28:31.0000] <Hixie>
wfm in webkit too

[12:29:14.0000] <Hixie>
you sure you're not getting a trailing comma or something?

[12:35:16.0000] <TabAtkins>
Yes, quite sure there's no comma.

[12:35:33.0000] <TabAtkins>
Note that the comma isn't underlined here, and there's no comma on the previous one at all.

[12:35:48.0000] <TabAtkins>
And this is on my Pixel, recently updated.

[12:36:11.0000] <TabAtkins>
Ms2ger: The presence of a UTF-7 decoder is the bug, right?

[12:41:46.0000] <Hixie>
TabAtkins: weird! does it work if you change // to / ?

[12:41:52.0000] <TabAtkins>
Nope!

[12:42:01.0000] <TabAtkins>
That was the first thing I thought was wrong - I assumed a typo.

[12:42:05.0000] <Hixie>
woah, now i'm getting a 404

[12:42:16.0000] <Hixie>
wtf

[12:42:37.0000] <Hixie>
i definitely didn't have it cached before

[12:42:56.0000] <Hixie>
ohhhhh hey

[12:43:01.0000] <Hixie>
http://testthewebforward.org/ gives me a temporary error

[12:43:01.0000] <SimonSapin>
http://i.imgur.com/V8JgIAN.jpg

[12:43:07.0000] <Hixie>
i bet there's round-robin DNS going on here

[12:44:32.0000] <TabAtkins>
Thanks, SimonSapin!

[12:45:23.0000] <Hixie>
i get 204.232.175.78 as the IP when it works

[12:45:52.0000] <Hixie>
2001:470:0:cb::4113:bb64 when it doesn't

[12:46:11.0000] <Hixie>
same DNS server, though

[12:46:17.0000] <Hixie>
wonder why it gives different results sometimes

[12:46:38.0000] <Hixie>
anyway, looks like testthewebforward.org has badly configured IPv6

[12:46:47.0000] <TabAtkins>
Weird, ok.

[12:46:49.0000] <Hixie>
and the DNS server sometimes returns an AAAA record

[14:02:32.0000] <TabAtkins>
Oh man, Chrome is telling me which tab is making noise now.

[14:48:36.0000] <Hixie>
TabAtkins: you around? is there some way to say that an element should act like an inline-block even when it's set to other display types, for the purposes of sizing, while still allowing the other display types to remain relevant for other reasons (e.g. participating in the table model, if set to display:table-cell)?

[14:49:37.0000] <Hixie>
hm, actually, that's not what's going on here...

[14:52:59.0000] <Hixie>
http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2650


2013-11-23
[17:29:57.0000] <TabAtkins>
Hixie: That's called "being a replaced element".

[17:30:32.0000] <TabAtkins>
(Sorry for being gone for a few hours - visiting the SF office often makes it hard to work.)

[17:51:47.0000] <Hixie>
TabAtkins: that's not what the css spec says "replaced element" means

[17:52:41.0000] <zewt>
Copy and Paste is not allowed. <- in account creation password entry. why are people so obnoxiously incompetent


2013-11-24
[06:44:17.0000] <werle>
hey can anyone answer a question for me for the utf8 encoding spec?

[06:46:14.0000] <annevk-cloud>
werle: if you ask the question, maybe ;)

[06:46:43.0000] <werle>
It may just be too early for my brain

[06:47:00.0000] <werle>
but I'm having trouble with this step :	7. Let bytes be a list of bytes whose first byte is code point / 64count + offset.

[06:47:21.0000] <werle>
my implementation is in C

[06:48:10.0000] <werle>
and my problem is understanding the formula from the verbiage

[06:49:01.0000] <werle>
bytes[c++] = (code_point / pow(64.0, (float) count)) + offset;

[06:49:10.0000] <werle>
is that correct?

[06:49:21.0000] <werle>
annevk-cloud: thanks again

[06:49:57.0000] <annevk-cloud>
looks okay, not sure it's the most efficient to do it that way

[06:50:51.0000] <annevk-cloud>
In C you can do some bit shifting iirc, I recommend studying some implementations

[06:51:53.0000] <annevk-cloud>
The spec just describes a black box you need to be equivalent too, not identical

[06:55:55.0000] <werle>
ah great thanks !

[07:34:00.0000] <zewt>
you definitely shouldn't have floating-point in utf-8-handling code :)

[07:34:39.0000] <zewt>
meanwhile, boggling at python multiprocessing breaking atexit

[08:11:04.0000] <werle>
zewt: yes very true :)

[08:44:34.0000] <zewt>
boggling at python twice in one day (where the hell is sigsetmask or sigprocmask)

[08:47:52.0000] <zewt>
"new in version 3.3" oh come on

[09:05:17.0000] <odinho>
Then use 3.3, it's very nice :)

[10:23:45.0000] <jgraham>
odinho: Not helpful :p

[10:29:13.0000] <gsnedders>
/me still votes for dropping Py2 support in html5lib, even though it's practically impossible to do :P

[10:29:52.0000] <jgraham>
gsnedders: No you don't

[10:32:52.0000] <gsnedders>
But it'd make all the changes I want to make to the input stream so much easier!

[10:37:47.0000] <odinho>
Now with Django finally supporting Python 3, I'll start porting quite a lot of code :)

[10:38:13.0000] <gsnedders>
Most of the stuff I support already runs on both, so it's now just a question of when I drop Py2.

[10:39:21.0000] <odinho>
Yeah. True dat. I fixed the few issues with the repatch scripts I have, in order to be able to run the tests on python 3.3. It has a nicer unittest module, with mocking.

[12:08:22.0000] <jgraham>
odinho: Django eh? I'm sorry :p

[12:09:05.0000] <jgraham>
</troll>

[12:09:50.0000] <gsnedders>
Django is good, if you want all the magic it does.

[12:10:07.0000] <jgraham>
Even the ORM?

[12:10:56.0000] <gsnedders>
The ORM is okay, provided you don't want more than it does.

[12:11:10.0000] <gsnedders>
Also, sudo get me a drink.

[12:11:43.0000] <zewt>
been a couple years since i used it, but the main design failure i found in it was that it tried to give an API that pretends you're not on top of SQL at all

[12:12:04.0000] <zewt>
so the instant you had to do something they didn't think of, you had to drop all the way to building queries yourself

[12:13:37.0000] <jgraham>
Right, my limited experience of these things is that the level of control offered by SQLAlchemy is the minimum you need for applications that use SQL in a serious way

[12:13:57.0000] <jgraham>
So the idea of using something that's known to be much more limited isn't that appealing

[12:14:47.0000] <zewt>
also having an API that allows running on SQL and non-SQL data stores without the application knowing about it is ... useless

[12:44:47.0000] <odinho>
The ORM is awesome.

[12:44:55.0000] <odinho>
So much better than SQLAlchemy(puke)

[12:47:14.0000] <odinho>
Lots of bugs. Took me ages to debug and find many of them.

[12:47:28.0000] <odinho>
I'm porting all systems in Desktop previously built on flask and sqlalchemy to Django.

[12:48:15.0000] <odinho>
I don't care about fighting with sqlalchemy anymore :)

[13:35:13.0000] <jgraham>
odinho: I don't htink we can be friends

[13:35:16.0000] <jgraham>
Sorry

[13:35:18.0000] <jgraham>
;)


2013-11-25
[19:11:30.0000] <Guest54349>
hi

[19:11:34.0000] <Guest54349>
anyone here??

[21:51:16.0000] <Hixie>
odd, why does ::first-line not work on a div with display:table-row?

[21:51:32.0000] <Hixie>
surely it should still select the first line in the first cell, even though those are implied?

[02:09:48.0000] <matjas>
is bugzilla.validator.nu dead forever or is it still “temporary”?

[02:42:15.0000] <Ms2ger>
matjas, that would be a question for hsivonen

[02:53:13.0000] <smaug____>
/me wonders why streams API is using promises for everything

[02:55:27.0000] <darobin>
thoughtcrime!

[03:01:20.0000] <smaug____>
/me will file bugs

[03:04:20.0000] <zcorpan>
jgraham: wptserve crashed on startup. not every time though. python(53333) malloc: *** error for object 0x7fd151ea8938: incorrect checksum for freed object - object was probably modified after being freed.

[03:06:45.0000] <jgraham>
zcorpan: :-o

[03:07:09.0000] <jgraham>
zcorpan: Which python version?

[03:07:40.0000] <zcorpan>
jgraham: i think 2.7

[03:07:55.0000] <zcorpan>
2.7.2

[03:08:06.0000] <Ms2ger>
Nice

[03:09:00.0000] <smaug____>
just a little security bug in python ?

[03:10:00.0000] <jgraham>
Which version of OSX is this? The latest one? The mac I have access to seems to have 2.7.5

[03:10:12.0000] <zcorpan>
maybe i was just BEING HACKED!!11

[03:10:28.0000] <zcorpan>
except i didn't notice any bipperly boops like on TV so i guess not

[03:10:53.0000] <zcorpan>
10.8.3

[03:11:02.0000] <jgraham>
zcorpan: Also, did you see that I maybe fixed the OSX problems you were having on Friday?

[03:11:12.0000] <jgraham>
So the latest master ought to work

[03:11:16.0000] <zcorpan>
yeah, this is the latest

[03:11:51.0000] <zcorpan>
which works when it doesn't crash, so that's good

[03:12:30.0000] <annevk>
seems other people worked this weekend

[03:13:34.0000] <jgraham>
zcorpan: This seems to be 10.9

[03:13:43.0000] <jgraham>
Fancy upgrading? ;)

[03:13:59.0000] <zcorpan>
maybe, but not today :-)

[03:14:38.0000] <jgraham>
Bah

[03:14:50.0000] <jgraham>
Well in any case this is "clearly" a bug in python

[03:15:08.0000] <jgraham>
I'm not sure how much time I should spend trying to work around it

[03:16:40.0000] <zcorpan>
if you were to work around it you'd first need to know what triggers it, and at that point it seems more productive to file a bug on python instead

[03:17:34.0000] <zcorpan>
i can try restarting the server a number of times and see if it reproduces

[03:18:08.0000] <zcorpan>
ah, got it again

[03:18:58.0000] <zcorpan>
INFO:mod_pywebsocket.standalone.WebSocketServer:Bind on: (2, 1, 6, '', ('127.0.0.1', 58727))

[03:18:58.0000] <zcorpan>
python(53431) malloc: *** error for object 0x7fd2d4001f48: incorrect checksum for freed object - object was probably modified after being freed.

[03:18:58.0000] <zcorpan>
*** set a breakpoint in malloc_error_break to debug

[03:18:59.0000] <zcorpan>
INFO:mod_pywebsocket.standalone.WebSocketServer:Listen on: (2, 1, 6, '', ('127.0.0.1', 58727))

[03:19:56.0000] <jgraham>
Well I can't reporduce it with 2.7.5

[03:20:09.0000] <jgraham>
Which kind of suggests that the python bug has been fixed

[04:08:21.0000] <MikeSmith>
matjas: I don't think bugzilla.validator.nu is intentionally down. as far as I know, hsivonen intends for it to be up

[04:40:53.0000] <hsivonen>
matjas, MikeSmith: sorry. thanks for the report. I made a DNS configuration mistake that caused bugzilla.validator.nu to drop off DNS

[04:41:08.0000] <hsivonen>
it should be back in 3 hours or so as DNS caches expire

[06:21:30.0000] <matjas>
hsivonen: thanks!

[06:23:24.0000] <annevk>
Hmm, I hate the distinction between "URL" and "parsed URL"

[06:41:17.0000] <werle>
annevk: I was and still am quite confused by it

[06:41:42.0000] <annevk>
werle: Hixie wanted URL to mean a string that's parsed into a parsed URL

[06:41:50.0000] <werle>
I've been learning to just think of the specs as black boxes that define expected i/o

[06:41:55.0000] <annevk>
werle: I wanted URL to mean the abstract thing

[06:42:02.0000] <werle>
yes

[06:42:07.0000] <werle>
that makes more sense

[06:42:58.0000] <annevk>
but yeah, specs are basically i/o agreements

[06:43:19.0000] <werle>
:) yeah

[06:43:47.0000] <werle>
I've been doing C implementations of url and utf8 and that is the only true way to think about it instead of literal implementation

[06:44:29.0000] <jgraham>
/me agrees with Hixie

[06:44:47.0000] <jgraham>
I don't think that making URL mean a datastructure makes much sense

[06:44:55.0000] <gsnedders>
/me agrees with annevk 

[06:45:02.0000] <annevk>
now fight

[06:45:05.0000] <werle>
haha

[06:45:06.0000] <MikeSmith>
"URL object" maybe..?

[06:45:17.0000] <gsnedders>
I cannot agree with jgraham, as a mater of principle.

[06:45:19.0000] <jgraham>
If gsnedders agress with annevk then I am sure I am right :p

[06:45:23.0000] <gsnedders>
*matter

[06:45:57.0000] <werle>
I kind of see both sides of the argument :) (switzerland)

[06:47:37.0000] <annevk>
In particular I don't think we need the distinction. We call "<x>Y</x>" an element. We also call HTMLUnknownElement in a tree an element.

[06:48:13.0000] <annevk>
It's not a big deal. Both "http://example.org" and it's parsed http://example.org/ equivalent can be a URL.

[06:48:57.0000] <annevk>
And if you need a distinction you'd qualify with syntax/writing/model/parsed/...

[06:49:26.0000] <annevk>
This is what I've done for most other terms in the URL standard. Didn't want to have port and parsed port, domain and parsed domain, etc.

[06:49:45.0000] <annevk>
At some point I might remove parsed URL and call it a day.

[06:51:49.0000] <jgraham>
annevk: It seems like there is a pretty fundamental difference between a string representation of a URL and a data structure representing the components. Whereas the port and so on are the same kind of object in both cases, but in the parsed case might have a more limited set of allowed values

[06:52:52.0000] <annevk>
jgraham: hmm. A host is either a list of labels or an IPv6 address, which is either a largish number or a list of them...

[06:53:13.0000] <annevk>
jgraham: there's modelling all the way down

[06:54:17.0000] <jgraham>
annevk: host is a bit of a strange case and I think I would prefer two/three seperate terms in the spec

[06:55:09.0000] <annevk>
jgraham: it's not like people actually use terms in that way

[06:55:13.0000] <jgraham>
If you ought to implement the two things as different datatypes then they should have different names imo

[06:55:15.0000] <annevk>
jgraham: so I'm not sure it'll help communication

[06:55:29.0000] <annevk>
jgraham: e.g. consider my element example above

[06:56:23.0000] <annevk>
jgraham: I haven't heard people talk about parsed URLs in practice; people are confused with relative/absolute URLs already

[06:56:29.0000] <jgraham>
I think if I call a string an element I am implicitly talking about its parsed repreesentation

[06:57:10.0000] <annevk>
I think the same is true for URLs

[06:57:13.0000] <jgraham>
annevk: I don't think normal people need to care much about parsed URLs

[06:57:26.0000] <annevk>
they shouldn't care much about URLs at all

[06:57:26.0000] <jgraham>
It's a term for implementors who benefit from more precision

[07:01:47.0000] <annevk>
Yeah I don't think implementors would care much about that distinction. See above for one of them ;-)

[07:02:13.0000] <annevk>
I suspect they'd just use natural terms to explain the difference, just like the spec does with writing vs model vs API

[07:03:13.0000] <annevk>
Having a lot of jargon can actually make a conversation harder to follow.

[07:05:01.0000] <jgraham>
Well I am an implementor in this case, so we are one all in anecdotes-from-implementors

[07:19:12.0000] <Ms2ger>
Zing

[07:20:22.0000] <darobin>
/me thinks the precision is only needed if there are cases in which one could confuse the two

[07:21:39.0000] <werle>
jgraham: +1

[07:41:12.0000] <annevk>
hober: http://i.imgur.com/dJQD877.jpg

[07:47:24.0000] <zewt>
nonblocking connect() to unix domain sockets is totally broken in linux? :|

[07:47:28.0000] <zewt>
open source go go go

[07:48:24.0000] <jgraham>
zewt: Patches welcome? :p

[07:48:43.0000] <zewt>
yeah no

[08:04:04.0000] <annevk>
hsivonen: http://lists.w3.org/Archives/Public/public-webcrypto-comments/2013Nov/0001.html

[08:11:18.0000] <hsivonen>
annevk: I considered giving that feedback. Then after discussing it some more with experts and thinking more, I decided not to give that feedback.

[08:11:45.0000] <jgraham>
hsivonen: Are you prepared to elaborate on why?

[08:11:56.0000] <jgraham>
It seems extrodinary sensible feedback to me

[08:12:04.0000] <jgraham>
*extrodinarily

[08:12:11.0000] <jgraham>
Oh, something

[08:13:45.0000] <hsivonen>
jgraham: I couldn't think of what I'd like the API to look like considering the use cases

[08:14:03.0000] <hsivonen>
jgraham: I'd need to refresh my memory to see what the use cases were

[08:14:29.0000] <hsivonen>
but I have to step outside right about now, so I can't refresh my memory now

[08:15:09.0000] <jgraham>
At the very least the feedback that "subtle" is a terrible name is good, even if the API ends up having lots of footgun potential for other reasons

[08:15:10.0000] <smaug____>
stepping outside is often a good way to refresh memory :)

[08:15:16.0000] <karlcow>
annevk: In the case of 304 Not Modified, the server can strip most of all headers except those necessary for the caching. What a client should do if this resource was containing previously CORS headers, and not in the 304 Not Modified: Error or just take the information which is relevant for the caching.

[08:15:59.0000] <karlcow>
/me was trying to find a relevant bug on Mozilla bugzilla without success

[08:16:13.0000] <hsivonen>
jgraham: I did give feedback that reflected my unhappiness about the notion that regular JS app developers would use the API

[08:16:54.0000] <hsivonen>
I know enough to recognize the API as a footgun

[08:17:10.0000] <hsivonen>
worse for those who don't know enough to recognize it as a footgun

[08:17:11.0000] <annevk>
hsivonen: renaming "subtle" to "unsafe" would be a start

[08:17:19.0000] <hsivonen>
annevk: sure

[08:17:26.0000] <annevk>
karlcow: good question, not sure

[08:17:38.0000] <annevk>
karlcow: what happens today?

[08:17:56.0000] <karlcow>
It seems it fails in Firefox and works in Chromium

[08:20:08.0000] <annevk>
I would kind of lean towards Firefox' behavior here given that it matches what we require for redirects.

[08:20:33.0000] <annevk>
304 in Fetch is a red box at the moment for different reasons, but it seems this would be an additional one.

[08:22:04.0000] <karlcow>
yup I guess formal tests would be needed.

[08:22:52.0000] <karlcow>
for the record Related http://tools.ietf.org/html/draft-ietf-httpbis-p4-conditional-25#section-4.1

[08:28:12.0000] <Ms2ger>
https://groups.google.com/a/chromium.org/forum/#!topic/blink-dev/vXuOTK5M0hM

[08:29:01.0000] <annevk>
Ms2ger: was an interesting read at the start of the day

[08:31:36.0000] <SimonSapin>
annevk: is your day starting now?

[08:31:42.0000] <Ms2ger>
annevk, want to summarize?

[08:31:53.0000] <annevk>
SimonSapin: no

[08:33:02.0000] <annevk>
Ms2ger: OMG TTML; abarth: no new complexity please; OMG OMG TTML; abarth: *sigh*; glenn: I'm on the AC! Mozilla has said nothing; annevk: we have actually.

[08:33:32.0000] <abarth>
annevk: thanks for commenting on that thread

[08:33:40.0000] <Ms2ger>
Heh

[08:33:43.0000] <Ms2ger>
Go annevk

[08:33:50.0000] <abarth>
annevk: it sounds like we have a similar perspective on this topic :)

[08:33:56.0000] <annevk>
yeah

[08:34:33.0000] <SimonSapin>
and what did Mozilla say? (hum.)

[08:35:29.0000] <annevk>
SimonSapin: http://lists.w3.org/Archives/Public/www-archive/2013May/0034.html is our statement

[08:36:27.0000] <annevk>
SimonSapin: https://groups.google.com/d/topic/mozilla.dev.platform/m9K94yLq9-U/discussion has more

[08:36:40.0000] <SimonSapin>
thanks

[09:56:31.0000] <Hixie>
annevk: "<x>Y</x>" isn't an element. it's a string with two tags and some text.

[09:57:06.0000] <Hixie>
annevk: if you talk about the element <x>, you mean the object that can be parsed from <x>, not the <x> itself

[09:57:16.0000] <Hixie>
annevk: in general, people don't talk about the strings, though

[09:57:22.0000] <Hixie>
annevk: whereas with URLs, people talk about the strings all the time

[09:58:22.0000] <Hixie>
annevk: URLs are treated as opaque strings quite often, in fact (e.g. if you tell someone to "go to http://example.com/", you aren't trying to tell them to "use an HTTP GET request at the address that the host name "example.com" resolves to", you're telling them to give that string to a UA and let the UA deal with it)

[10:15:21.0000] <dglazkov>
good morning, Whatwg!

[11:31:27.0000] <ytrezq>
dglazkov: It's the evening here..... :p

[11:49:14.0000] <Hixie>
is http://wiki.whatwg.org/wiki/WorkerCanvas the proposal that has the most vendors on board? is anyone implementing anything like that?

[11:50:56.0000] <Ms2ger>
I think something is happening in Gecko

[11:53:14.0000] <Ms2ger>
Hixie, https://bugzilla.mozilla.org/show_bug.cgi?id=709490

[13:27:04.0000] <Hixie>
someone used a term on the whatwg list that i didn't understand

[13:27:08.0000] <Hixie>
so i did a google search for that term

[13:27:14.0000] <Hixie>
their e-mail to the whatwg list was the first hit :-(

[13:30:07.0000] <TabAtkins>
What was the term?

[13:30:44.0000] <TabAtkins>
(Also, that happens constantly on the XKCD forums. Some obscure math or science question pops up, you go to google for it, and if it's been at least 10 minutes since it's been posted, the thread is already the top hit for it.)

[13:46:31.0000] <Hixie>
TabAtkins: "2D pixel-based graphics"


2013-11-26
[16:08:32.0000] <Hixie>
man, i wish people would trim quotes

[18:04:19.0000] <zewt>
amused at hitting ^Z while editing a mail in gmail after dropping in an image, and it undoes the "finished loading" part (where it changes from a spinner to the actual image) ... going back to just showing the spinner permanently

[22:14:44.0000] <jamesr__>
is anyone tracking diffs between the w3c and whatwg dom parsing specs?

[22:30:11.0000] <Hixie>
yikes, that looks like it had a lot of differences

[22:32:20.0000] <Hixie>
wow, those are really different

[22:38:03.0000] <Hixie>
jamesr__: based on a cursory look, the changes seem to fall into two buckets: misguided editorial changes (e.g. the bits about exceptions), and misguided attempts to change the normative requirements (e.g. the changes to the XML serialization of the attributes are dubious at best)

[22:38:51.0000] <Hixie>
jamesr__: i recommend bitching at ms2ger to finish his work, and using the whatwg version :-)

[02:37:33.0000] <annevk>
Oh help. The attribute order bugs are popping up again in my inbox.

[02:53:46.0000] <annevk>
Hixie: you use <dfn title=syntax-elements>elements</dfn> for HTML to describe them

[02:53:58.0000] <annevk>
Hixie: seems to be the same as what I suggested

[03:51:47.0000] <hsivonen>
/me learns that such a thing as x-sun-unicode-india-0 has existed

[03:52:13.0000] <hsivonen>
(Devanagari character encoding from Sun)

[04:06:01.0000] <annevk>
Reminds me of windows-sami-2

[04:08:22.0000] <annevk>
http://developer.skolelinux.no/info/samisk/Tn35.pdf

[05:26:33.0000] <Ms2ger>
jamesr__, I recommend the same thing as Hixie :)

[05:29:49.0000] <jgraham>
Ms2ger: You should look at Travis's tests and reject any that are crazy with spec feedback to the effect that the requirements are bogus

[05:30:06.0000] <Ms2ger>
Yes, I should

[05:31:41.0000] <jgraham>
Ms2ger: Is that "SHOULD", "OUGHT TO", "MUST" or "MUST (BUT WE KNOW YOU WON'T)"?

[05:32:40.0000] <Ms2ger>
   The phrase "OUGHT TO" conveys an optimistic assertion of an

[05:32:40.0000] <Ms2ger>
   implementation behavior that is clearly morally right, and thus does

[05:32:41.0000] <Ms2ger>
   not require substantiation.

[05:32:47.0000] <Ms2ger>
That sounds about right

[06:20:34.0000] <annevk>
So per my Twitter feed the a11y community is still debating the alt attribute… Given the number of features <audio> and <video> have, and given that the alt attribute debate is ongoing, will we see accessible video next millennium?

[06:32:29.0000] <hsivonen>
What's the deal with IETF JSON  not allowing astral characters to be escaped?

[06:33:04.0000] <Ms2ger>
What's the deal with IETF JSON?

[06:36:20.0000] <annevk>
hsivonen: it does allow that: http://tools.ietf.org/html/draft-ietf-json-rfc4627bis-07#section-7

[06:36:42.0000] <annevk>
hsivonen: "To escape an extended character that is not in the Basic Multilingual…"

[06:41:43.0000] <hsivonen>
annevk: oh ok. somehow, I managed to miss that paragraph when reading the earlier one that seemed to scope escapes to the BMP

[06:42:12.0000] <hsivonen>
I wonder if anyone has tested UTF-16 and UTF-32 with all the implementations that are claimed as implementations of JSON

[07:19:55.0000] <SteveF>
annevk: not alt, but use of ARIA attributes in leiu of alt

[07:26:07.0000] <Domenic_>
Is this the latest CSSStyleDeclaration? http://www.w3.org/TR/DOM-Level-2-Style/css.html#CSS-CSSStyleDeclaration

[07:26:26.0000] <Ms2ger>
No

[07:26:35.0000] <Ms2ger>
It's in one of the CSSOM specs

[07:26:40.0000] <Domenic_>
/me shakes fist at MDN

[07:27:12.0000] <jgraham>
Hmm?

[07:27:19.0000] <Domenic_>
this looks more like it? http://dev.w3.org/csswg/cssom/#the-cssstyledeclaration-interface will update MDN

[07:27:20.0000] <annevk>
Domenic_: fix MDN

[07:27:23.0000] <jgraham>
MDN is sweet and fluffy and nice

[07:27:30.0000] <jgraham>
And when it isn't you should fix it

[07:27:42.0000] <Domenic_>
oh jeez persona fuck me

[07:27:48.0000] <Ms2ger>
No thanks

[07:32:04.0000] <Domenic_>
Hmm still can't figure out where properties like `opacity` live on CSSStyleDeclaration indices and what their property descriptors are.

[07:35:11.0000] <annevk>
There used to be a long list of properties in CSSOM

[07:35:26.0000] <annevk>
As an interface that was implemented on top of StyleDeclaration

[07:35:30.0000] <annevk>
Not sure where it went...

[07:36:26.0000] <annevk>
Oh, Domenic_, search for "attribute DOMString _camel-cased attribute;"

[07:37:43.0000] <annevk>
/me files https://www.w3.org/Bugs/Public/show_bug.cgi?id=23925

[07:42:02.0000] <Domenic_>
annevk: oh excellent, thanks.

[07:51:30.0000] <SimonSapin>
Can ignoring character decoding errors (rather than, say, emitting U+FFFD) cause security issues?

[08:57:29.0000] <Hixie>
annevk_: thinking about it more, i think elements are more similar to ports or host names. the better analogy would be documents vs Documents

[08:57:44.0000] <Hixie>
annevk_: that is, the text/html stream of bytes, vs the Document object and DOM tree

[08:57:58.0000] <Hixie>
annevk_: but i agree that the terminology around HTML isn't great

[08:58:09.0000] <annevk_>
I'm not sure I'd call the former a document

[08:58:18.0000] <annevk_>
and DOM defines document as Document object, fwiw

[08:58:22.0000] <Hixie>
annevk_: in URLs, though, there's never been a concept of a parsed URL object before, so nobody has ever used the term that way, so we should avoid making the problem

[08:58:43.0000] <Hixie>
imho, anyway

[08:58:47.0000] <Hixie>
your spec, you do as you wish :-)

[08:58:53.0000] <annevk>
actually, if you ask Roy that's what he says URL has always meant

[08:59:09.0000] <Hixie>
that's pretty much the strongest argument in my favour :-)

[08:59:15.0000] <annevk>
hah

[09:31:02.0000] <Domenic_>
So DOMTimeStamp is just Date? /cc annevk

[09:31:26.0000] <annevk>
Domenic_: no it's a number

[09:31:35.0000] <Domenic_>
/me goes and fixes MDN again

[09:31:43.0000] <annevk>
Domenic_: http://heycam.github.io/webidl/#common-DOMTimeStamp

[09:32:05.0000] <annevk>
oh wow, bad MDN

[09:33:28.0000] <Domenic_>
it would be cool if WebIDL had a single number type and then some annotations for clamping or similar.

[09:33:41.0000] <Domenic_>
also since it's unsigned long long it can't represent times before 1970

[09:35:55.0000] <Domenic_>
i wonder who uses DOMTimeStamp as a relative time

[09:37:04.0000] <annevk>
You could file a bug on IDL

[09:37:28.0000] <Domenic_>
might be worth starting the discussion.

[09:38:56.0000] <Domenic_>
trying to understand what WebIDL does with unsigned long long...

[09:43:50.0000] <Domenic_>
https://github.com/heycam/webidl/issues/2

[09:50:17.0000] <zcorpan>
MikeSmith: pls implement the new script restrictions :-)

[12:47:03.0000] <gsnedders>
Hixie: The distinction I was making was one can build a conformance checker that does check conformance and does execute (symbolically or not) certain scripts, and it seems silly to disallow that.

[12:52:42.0000] <Hixie>
gsnedders: who's disallowing it?

[12:56:15.0000] <gsnedders>
Hixie: Nobody. The point was there's no point to doing so, which seemed to be an implicit suggestion of the email I was replying to.

[13:18:06.0000] <Hixie>
gsnedders: ah

[13:18:09.0000] <Hixie>
gsnedders: ok

[13:18:44.0000] <Hixie>
in other news, some of the e-mails i get (especially those i get directly, not cc'ed to whatwg) put me in mind of chapters 5 or above of "The Book" in Anathem

[13:25:15.0000] <Hixie>
heycam|away: ping

[13:28:50.0000] <Ms2ger>
Good luck

[13:30:39.0000] <Hixie>
good luck with what?

[13:30:42.0000] <Hixie>
my book penance? :-)

[13:31:56.0000] <Hixie>
annevk: yt?

[13:32:22.0000] <gsnedders>
Hixie: I'd guess the fact pinging heycam never works. :P

[13:32:35.0000] <Hixie>
annevk: ah, nevermind

[13:32:50.0000] <Hixie>
gsnedders: works for me quite often, he comes online in my midafternoon :-)

[13:34:13.0000] <jamesr__>
is anyone closely tracking the w3c vs whatwg dom parsing changes?

[13:35:02.0000] <Ms2ger>
jamesr__, I'm planning to go through them over the weekend

[13:35:26.0000] <Ms2ger>
But bug me again then :)

[13:35:53.0000] <Hixie>
jamesr__: i had some responses for you last night after you asked but after you left :-)

[13:36:16.0000] <jamesr__>
Hixie: ah sorry

[13:36:31.0000] <jamesr__>
wait i asked questions last night?

[13:36:48.0000] <jamesr__>
/me was somewhat heavily medicated at different parts of yesterday

[13:36:53.0000] <Hixie>
heh

[13:37:03.0000] <Hixie>
jamesr__: http://krijnhoetmer.nl/irc-logs/whatwg/20131126#l-132

[13:37:23.0000] <jamesr__>
ah thanks

[13:37:49.0000] <jamesr__>
i just totally forgot that i already asked that

[13:37:49.0000] <jamesr__>
yeesh

[13:38:15.0000] <jamesr__>
i wonder if it's worth raising objects on the LCWD thread

[13:38:41.0000] <jamesr__>
probably not

[13:56:20.0000] <Hixie>
jamesr__: would be easier to argue if Ms2ger solved the issues properly on the whatwg spec first :-)

[13:56:48.0000] <Ms2ger>
You don't say

[14:04:44.0000] <Hixie>
Ms2ger: hey, i'm just glad i'm not the only one with a backlog

[14:08:50.0000] <Ms2ger>
heycam!

[14:08:53.0000] <heycam>
hi Ms2ger

[14:08:55.0000] <heycam>
Hixie, pong

[14:09:02.0000] <Ms2ger>
There's a PR waiting for you

[14:09:26.0000] <heycam>
Ms2ger, I saw that, and thanks. but I haven't looked at it closely yet.

[14:24:43.0000] <karlcow>
marcosc: YUM! "Firefox OS lacks a way to declaratively indicate to the Web browser that the application can run standalone when lunched." — http://w3c-webmob.github.io/installable-webapps/

[14:32:39.0000] <Hixie>
heycam: hello

[14:32:43.0000] <heycam>
Hixie, hi

[14:32:58.0000] <Hixie>
heycam: i have a number of bugs waiting on input for you. no rush, but was wondering if they were on your radar and/or how to make sure they were on your radar.

[14:33:10.0000] <Hixie>
from you, rather

[14:33:34.0000] <heycam>
Hixie, can you tell me which ones? and then I'll look at them soon.

[14:34:31.0000] <Hixie>
heycam: https://www.w3.org/Bugs/Public/show_bug.cgi?id=23744 https://www.w3.org/Bugs/Public/show_bug.cgi?id=23176 and https://www.w3.org/Bugs/Public/show_bug.cgi?id=23477 are the ones i have annotated with "heycam" in the status whiteboard

[14:34:45.0000] <Hixie>
there might be others but if so i haven't annotated then yet

[14:34:58.0000] <Hixie>
(i only annotated them the second time i get to them after having added a comment asking for feedback)

[14:34:58.0000] <heycam>
Hixie, ok thanks. sorry for not watching bugmail closely.

[14:35:15.0000] <Hixie>
heycam: oh, no worries at all, like i said there's no rush. just making sure they don't fall on the floor.

[14:35:32.0000] <Hixie>
even if you don't get to them for years, i have plenty to keep me busy :-P

[14:35:41.0000] <heycam>
heh ok

[14:43:58.0000] <marcosc>
karlcow?

[14:44:23.0000] <karlcow>
marcosc: read your sentence until the end

[14:44:31.0000] <karlcow>
Bon appêtit

[14:44:33.0000] <marcosc>
oh, lunched! :)

[14:44:37.0000] <karlcow>
;)

[14:44:40.0000] <marcosc>
mmmm... lunch

[14:45:24.0000] <marcosc>
karlcow: that document is full of typos ... wanna help fix 'em? :)

[14:45:55.0000] <karlcow>
heh

[14:46:06.0000] <karlcow>
You want more typos?

[14:46:24.0000] <marcosc>
if they are in a PR, sure! :D


2013-11-27
[16:11:44.0000] <zcorpan>
Hixie: have you considered if it makes sense for microdata to use img src if there's also srcset?

[16:15:35.0000] <tantek>
zcorpan, what's the use case?

[16:15:56.0000] <tantek>
and is anyone publishing microdata or microformats with <img srcset> ?

[16:16:02.0000] <tantek>
any URLs to real world examples?

[16:16:51.0000] <zcorpan>
no, just asked if it was a case that has been considered

[16:18:03.0000] <zcorpan>
considering if two features make sense together can be a useful thing to do without starting with a use case

[16:18:34.0000] <tantek>
I'm still waiting for more real world experience reports re: use of just srcset

[16:18:50.0000] <tantek>
nevermind with formats

[16:58:57.0000] <MikeSmith>
zcorpan: will try to implement new script restrictions in the validator soon but may not get to it til end of the year holidays

[17:05:01.0000] <Hixie>
zcorpan: never considered them together

[17:05:16.0000] <Hixie>
http://www.w3.org/mid/1385505093.3251.101.camel@chacal is pretty awesome given the w3c's fork of whatwg specs

[02:24:44.0000] <Ms2ger>
"sometimes I feel we're building more and more complex structures on top of foundations we barely understand"

[02:57:17.0000] <jgraham>
barely?

[02:57:30.0000] <jgraham>
That seems unreasonably optimistic

[03:04:23.0000] <smaug____>
very much so

[03:04:33.0000] <smaug____>
Ms2ger: where is that from ?

[03:06:30.0000] <Ms2ger>
https://twitter.com/johnallsopp/status/405615160586280960 apparently

[03:31:24.0000] <gsnedders>
hsivonen, annevk: what's the status with getting rid of locale specific fallback encodings? is all the discussion just the odd chat in here? (there seems to be no emails I can see, looking quickly?)

[03:32:04.0000] <hsivonen>
gsnedders: no status for getting rid of it for IP number URLs, .com, .org or .net

[03:32:14.0000] <hsivonen>
gsnedders: for other TLDs, I have a patch

[03:32:29.0000] <hsivonen>
gsnedders: but there's a handful of TLDs that need more research

[03:32:39.0000] <gsnedders>
hsivonen: Do we have data for those TLDs as to how accurate it is?

[03:32:45.0000] <hsivonen>
gsnedders: and I lack a good landing plan

[03:32:54.0000] <hsivonen>
gsnedders: no

[03:33:04.0000] <hsivonen>
gsnedders: most are no-brainers

[03:33:20.0000] <hsivonen>
gsnedders: but there are some non-obvious ones

[03:35:47.0000] <gsnedders>
/me is tempted to try and get actual data on this, and see whether bi-grams over the first 512 bytes (that's what we use for <meta detection, right?) yields anything useful, esp. for "generic" TLDs

[03:36:10.0000] <gsnedders>
In other news, I probably should do uni work instead of procrastinate doing stuff like this :)

[03:36:41.0000] <hsivonen>
gsnedders: For landing plan, I see 3 options: 1) on by default, 2) off by default and 3) randomly on or off with telemetry for A/B testing

[03:37:00.0000] <hsivonen>
gsnedders: I'd appreciate you researching stuff like this

[03:38:50.0000] <gsnedders>
hsivonen: While I'm tempted to try and do something along these lines for MSci thesis, I think that's probably too far off to be much use (that'd be a year and a quarter or so away from being done); may add this to list of things to play around with next summer. Probably won't have time over Christmas to do anything like this, given I have enough uni to catch up on.

[03:39:20.0000] <gsnedders>
So, yeah, summer is probably the best outcome :(

[03:40:19.0000] <gsnedders>
Anyhow, to lecture. ttyl!

[03:40:22.0000] <hsivonen>
gsnedders: I see

[03:40:39.0000] <hsivonen>
gsnedders: I think I'll either do research or make guesses before summer

[03:55:25.0000] <annevk>
gsnedders: I think it's 1024 bytes

[04:26:05.0000] <annevk>
"The fact that you (or even I)" lol

[04:27:32.0000] <annevk>
http://lists.w3.org/Archives/Public/www-tag/2013Nov/0190.html some meme material right there

[04:29:35.0000] <annevk>
Non-Unicode locales?!

[04:29:41.0000] <annevk>
That thread went stupid fast

[05:11:22.0000] <gsnedders>
hsivonen: Still, might find some improvement on guesses.

[06:35:08.0000] <zewt>
cool, to remove email search notifications on ebay i'm required to agree to a new contract

[06:35:15.0000] <zewt>
don't agree? permanent spam!

[07:53:48.0000] <gsnedders>
I'm going to a talk on congestion control in WebRTC in 15 minutes. What I ought I be questioning?

[07:54:15.0000] <gsnedders>
s/I ought/ought/

[07:55:51.0000] <JonathanNeal>
I haven't followed the living spec in a while, has anything replaced <hgroup>?

[07:56:44.0000] <gsnedders>
JonathanNeal: It's still in the WHATWG spec, just not in the W3C one.

[07:57:02.0000] <gsnedders>
JonathanNeal: To my knowledge, it has no replacement in the W3C one.

[08:01:20.0000] <JonathanNeal>
gsnedders: good to know, thanks. is there a W3C channel for taking this up?

[08:03:33.0000] <gsnedders>
JonathanNeal: There'#html-wg on irc.w3.org, but you're just as likely to get an answer here by waiting

[08:04:03.0000] <JonathanNeal>
Waiting for who or what?

[08:04:50.0000] <gsnedders>
Other people to be around :)

[08:26:55.0000] <JonathanNeal>
gsnedders: are there other notable differences between what the specs say?

[08:37:08.0000] <Domenic_>
can of worms...

[08:39:18.0000] <Domenic_>
basically every time SteveF writes an article about some exciting HTML5 feature, e.g. on html5doctor.com you can guarantee it's something he made up for the W3C fork.

[08:48:37.0000] <annevk>
Hmm. Spotify took Eve away and now they put it back. DRM *shakes fist*

[08:54:20.0000] <JonathanNeal>
Domenic_: speaking of Steve, are there thoughts around http://rawgithub.com/w3c/subline/master/index.html ?

[08:54:47.0000] <JonathanNeal>
That comes up every year or so and then sits there and then life just goes on.

[08:54:49.0000] <Domenic_>
JonathanNeal: I am not the person to ask, sorry, just a bystander on the sidelines of the great W3C forking effort :)

[09:21:01.0000] <Ms2ger>
jgraham, I think we agreed that https://critic.hoppipolla.co.uk/showcomment?chain=807 was fine; want to resolve? :)

[09:23:29.0000] <jgraham>
Ms2ger: I think we agreed that you were going to convert the whole file :p

[09:23:48.0000] <Ms2ger>
jgraham, we did, but surely not in this PR :)

[09:24:39.0000] <jgraham>
Well

[09:25:03.0000] <jgraham>
Since you can have multiple commits in a single PR, I wouldn't actually object

[09:25:35.0000] <Ms2ger>
Dammit

[10:07:11.0000] <gsnedders>
hsivonen: I might try and start to play around with stuff while I'm back at my parents over xmas, not sure how far I'll get though

[10:53:17.0000] <JonathanNeal>
If I want to markup a subheading (or subtitle, alternative title, tagline), should I use <hgroup>? What is the W3C alternative since they have removed <hgroup>?

[10:58:46.0000] <Ms2ger>
Use hgroup

[11:37:11.0000] <Domenic_>
did ... did someone just reference the HTML4 spec?

[11:40:59.0000] <JonathanNeal>
Steve's response to my question above was a link to http://blog.paciellogroup.com/2013/10/html5-document-outline/

[11:47:44.0000] <SteveF>
jonathonNeal: hgroup is as dead as <center>, <font> etc

[11:50:09.0000] <JonathanNeal>
With much time to reflect since the last update, what are your thoughts on <subhead>, SteveF?

[11:51:16.0000] <SteveF>
JonathonNeal: difference is Google like <font> and <center> more https://docs.google.com/presentation/d/1gnQg-3jQSytv60ozANjM7BK-OhiP7elf13P5oXHT6CM/present#slide=id.g11be9b862_114

[11:52:49.0000] <JonathanNeal>
I don't see such markup. WayBackMachine link?

[11:54:36.0000] <SteveF>
JonathanNeal: there does not appear to be any great enthusiasm from dev's for a a feature to identify subheadings full stop

[11:55:24.0000] <SteveF>
JonathanNeal: i just looked at google.co.uk in Firefox 25/windows and font/center are present

[11:56:58.0000] <JonathanNeal>
re: second statement, that's bizarre.

[11:57:23.0000] <JonathanNeal>
re: first statement, except from me every few months full stop?

[11:57:50.0000] <SteveF>
JonathanNeal: that slide was from a month or so ago on https://www.google.fr/ just looked again and 2 <font> 1 <center>

[11:58:03.0000] <JonathanNeal>
SteveF: yes, I saw it too, just now.

[12:08:26.0000] <Domenic_>
while we're asking semantics questions... for progress from trade date to maturity date, I am thinking <progress max="number of days between them" value="days between now and trade date" />. Thoughts? I was originally thinking <meter> but this is fairly progresion-ey.

[12:29:52.0000] <gsnedders>
hsivonen: "http://s.validator.nu/html5/html5full-rdfa.rnc":1:0: error: Syntax error. happens when running build/build.py all given that server appears to not resolve

[12:35:20.0000] <Jasper>
Is there any guarantee that modifying an element will cause a reflow to happen synchronously?

[12:35:39.0000] <Jasper>
e.g. elem.classList.add('foo'); elem.getBoundingRect().width;

[12:35:50.0000] <Domenic_>
Oh interesting, there's a WHATWG validator page too?

[12:35:53.0000] <gsnedders>
Jasper: No, because reflows are an implementation detail

[12:36:11.0000] <Jasper>
Whatever the correct word for the semantics of that is.

[12:36:23.0000] <gsnedders>
Jasper: The script will block for layout, yes.

[12:36:27.0000] <gsnedders>
Jasper: That is guaranteed.

[12:36:40.0000] <Jasper>
Is there any reference for this?

[12:36:42.0000] <gsnedders>
Jasper: When it reads the bounding rect

[12:37:04.0000] <Jasper>
/me couldn't find anything in the HTML or DOM specs

[12:38:47.0000] <gsnedders>
Jasper: It's implicit in CSSOM that the bounding rect must be correctly computed

[12:38:58.0000] <gsnedders>
Jasper: Whether or not it draws to screen is not defined

[12:39:07.0000] <Jasper>
Right.

[12:39:50.0000] <Jasper>
gsnedders, well, is the guarantee only for the bounding rect, or for anything that affects layout?

[12:39:55.0000] <gsnedders>
Jasper: Anything.

[12:40:24.0000] <gsnedders>
Jasper: The CSSOM is all synchronous. Of course, the implementation is free to delay actually recomputing style as long as possible.

[12:40:24.0000] <Jasper>
OK. I just couldn't find it in any spec.

[12:41:14.0000] <gsnedders>
Jasper: It's in the CSSOM spec, by virtue of the interfaces mutating one thing then reading it back somewhere else, all synchronous actions.

[12:45:24.0000] <Jasper>
gsnedders, I'm scanning through it now, but I can't see anywhere that it says that it is synchronous.

[12:45:33.0000] <Jasper>
Unless it's implicit by the serialization step.

[12:46:01.0000] <gsnedders>
Jasper: Basically it defines the steps the host objects must execute when called, and defines their return points.

[12:46:13.0000] <gsnedders>
Jasper: If they don't return until the end of the function, they are obviously synchronous

[12:46:32.0000] <gsnedders>
Also, it's a bit of a horrible interaction between various specs here :)

[12:46:45.0000] <gsnedders>
(with the classList example)

[12:46:54.0000] <Jasper>
Yeah, I hope you'll admit it's not the easiest thing to parse in the world.

[12:48:51.0000] <gsnedders>
Someone else might be able to point better at quite how style mutation is defined for classList, but essentially both operations should syncrhonously read/write the layout state.

[12:49:03.0000] <Jasper>
Oh, duh.

[12:49:18.0000] <Jasper>
I was looking at the CSSOM spec, when *clearly* I should have been looking at the CSSOM View Module spec

[12:49:42.0000] <gsnedders>
Yeah, you probably want CSSOM, CSSOM View, *and* HTML for this.

[12:49:45.0000] <gsnedders>
Maybe CSS 2.1 too.

[13:04:14.0000] <JonathanNeal>
So, in short, SteveF, you're saying no one implements <hgroup>, no one implements the outline algorithm, so ... be cautious with your <h1-6> tags. Is that right?

[13:13:16.0000] <Domenic_>
browsers implement <hgroup> (it is HTMLElement not HTMLUnknownElement), but SteveF is saying that their implementation of it is as/less important than their implementation of <center>.

[13:27:28.0000] <JonathanNeal>
Hmm. Domenic_: do any non-whatwg-w3c content parsers, search engines, screen readers, or accessibility apps respect <hgroup>?

[13:29:12.0000] <Domenic_>
I don't know; my impression is SteveF has done some research that says the answer is no.

[14:22:39.0000] <Hixie>
JonathanNeal: it's very early days yet for any of the contemporary html heading stuff, whether <hgroup> or <section> or anything else

[14:24:16.0000] <Hixie>
JonathanNeal: in practice, if you use hgroup, the worst you'll get is the same as what you get with the same W3C specs have done it for years (a subsection heading where you'd expect a subheading), which in practice is fine for users

[14:24:29.0000] <Hixie>
JonathanNeal: (plus you get the advantage of being able to style it better)

[14:24:58.0000] <Hixie>
JonathanNeal: and on the long run software will improve modestly so as to treat it as a sunheading rather than a subsection heading

[14:33:29.0000] <Hixie>
ok i'm updating acid3 - removing test 67 attributes.removedNamedItemNS

[14:35:48.0000] <JonathanNeal>
Hixie: thanks for that.

[15:00:32.0000] <Hixie>
anyone know if IE does navigator.addProtocolHandler() ?

[15:12:16.0000] <SteveF>
JonathanNeal: if semantic fiction is your bag - go with the whatwg advice on headings

[15:15:53.0000] <JonathanNeal>
Hixie: not in IE11.

[15:18:23.0000] <Hixie>
JonathanNeal: thanks

[15:19:14.0000] <JonathanNeal>
SteveF: you haven't said <hgroup> will cause any breakage in and of itself, and I'm not sure whether you're saying I should be careful with <h1-6> usage. Sorry if I missed you addressing the latter point quite clearly.

[15:21:40.0000] <JonathanNeal>
I bring up the <h1-6> stuff since <hgroup> is strictly for them. And, related, <subhead> is basically the liberal version of <hgroup>, right?

[15:22:06.0000] <Hixie>
(what's <subhead>?)

[15:23:47.0000] <JonathanNeal>
Hixie: http://html5doctor.com/howto-subheadings/ and the June 2013 revised http://rawgithub.com/w3c/subline/master/index.html

[15:24:29.0000] <Hixie>
man, and some people accuse _me_ of nih syndrome...

[15:24:40.0000] <SteveF>
JonathanNeal: the post i linked to previously explains why relying on the outline for doc structure is bogus, so need to use h1-h6, <hgroup> is same as <div class="hgroup"> as far as anything other than CSS styling

[15:25:31.0000] <JonathanNeal>
<subhead> was SteveF's response to the community of devs saying they wanted some semantic indication of subheadings if <hgroup> was going to be pulled.

[15:26:33.0000] <Hixie>
SteveF is right that if you want today's tools and yesterday's tools to generate good outlines, you should stick to h1-h6 and avoid the newer h1-only approaches

[15:26:40.0000] <Hixie>
that's somewhat orthogonal to hgroup, though

[15:27:01.0000] <Hixie>
and it's true not just of the h1-only thing, but of any new feature of html

[15:27:08.0000] <Hixie>
it takes years for these things to deploy widely

[15:27:58.0000] <Hixie>
as far as hgroup goes, in such legacy UAs it just falls back to the same thing as the w3c has been doing for years with subheadings (e.g. on all their specs)

[15:28:32.0000] <Hixie>
which is technically suboptimal, but nobody really notices other than OCD people like me, so it's fine for a fallback :-)

[15:28:46.0000] <SteveF>
not all specs: http://www.w3.org/html/wg/drafts/html/master/

[15:29:17.0000] <Hixie>
yes well the less i say about that document the better

[15:29:47.0000] <SteveF>
yeah probably true

[15:30:38.0000] <Hixie>
(sure would be nice if you stopped copying all my work though, if you're just going to mess it up afterwards)

[15:32:46.0000] <SteveF>
I don't copy just mess

[15:33:59.0000] <JonathanNeal>
After 6 months, it seemed like it was worth seeing what progress has been made to address subheadings.

[15:35:07.0000] <Hixie>
JonathanNeal: yeah

[15:35:10.0000] <JonathanNeal>
It sounds like one approach is to follow a spec that gives subheadings semantic meaning but relies on future compatibility, and the other is to drop any semantic hope for the time being, and just rely on divs to style.

[15:35:31.0000] <Hixie>
JonathanNeal: the problem with <hgroup> is that the FUD that the w3c spec has added to the mix means that it'll be even longer than normal for this to get implemented widely, unfortunately

[15:35:50.0000] <Hixie>
JonathanNeal: almost like a self-fulfiling prophecy

[15:36:14.0000] <SteveF>
JonathanNeal: like i said semantic fiction go for it

[15:39:01.0000] <SteveF>
ride the unicorn http://blog.paciellogroup.com/wp-content/uploads/2013/10/pinkunicorn.png

[15:43:23.0000] <JonathanNeal>
SteveF: go for what, or which, rather? I was trying to see both points of view. To be clear, in your mind, SteveF, you don't think there's a foreseeable future (say, the next +6 months) with semantic subheadings, subtitles, taglines and bylines in the W3C spec?

[15:50:00.0000] <SteveF>
JonathanNeal: if somebody comes along to move it forward then we may see progress, otherwise no, until such times that there is some meaningful way to convey subheading semantics,  the requirement in the HTML spec is don't use multiple headings unless you intend it to be a new section or subsection as that is the semantic info that is conveyed:

[15:50:12.0000] <SteveF>
JonathanNeal: http://www.w3.org/html/wg/drafts/html/master/common-idioms.html#sub-head

[15:52:52.0000] <JonathanNeal>
That's pretty clear. Thanks. The part I'd like some clarification on is the "somebody" who "comes along to move it forward". Who does this somebody need to be or what do they need to do to move it forward?

[15:53:07.0000] <JonathanNeal>
SteveF: ^

[15:57:29.0000] <SteveF>
JonathanNeal: anybody who is interested see http://www.w3.org/html/wg/wiki/ExtensionHowTo on mechanics, if you want to take the subhead proposal and work on it go ahead https://github.com/w3c/subline pull/push/fork break remake


2013-11-28
[16:10:57.0000] <JonathanNeal>
Domenic_: min assumes a zero-like value?

[16:11:15.0000] <JonathanNeal>
Whoops, very delayed response to your question.

[16:28:22.0000] <JonathanNeal>
The really tragic part about all of this is that JAWS 15 removed support for <hgroup> where it had previously supported it.

[16:28:27.0000] <JonathanNeal>
So, we actually took a step back.

[16:29:59.0000] <JonathanNeal>
I'm sorry, I meant to say that it supported the outline algorithm (sectioning elements). Not sure about <hgroup> though I imagine they were all bundled together.

[16:33:38.0000] <zcorpan>
annevk: including .float is actually intended. but there's a use counter for dashed properties and for float, so we'll see what that gives

[16:33:41.0000] <Domenic_>
JonathanNeal: why do care what the W3C spec says?

[16:33:47.0000] <jamesr__>
semantically correct website: http://motherfuckingwebsite.com/

[16:33:57.0000] <jamesr__>
actually, can someone check if his use of <strong> is appropriate?

[16:34:18.0000] <jamesr__>
i think it's right

[16:34:19.0000] <Domenic_>
Haha speaking of subheadings he uses <aside> for that

[16:35:14.0000] <jamesr__>
Note: It's not appropriate to use the aside element just for parentheticals, since those are part of the main flow of the document.

[16:35:29.0000] <jamesr__>
is that a parenthetical, or is it separable from the main flow of the document?

[16:35:51.0000] <Domenic_>
It seems parenthetical. Certainly not separable.

[16:35:53.0000] <jamesr__>
i think it's sufficiently separable to use an <aside>

[16:36:14.0000] <Domenic_>
ok i just realized by uttering those words i made myself into a monster and so am leaving this conversation now.

[16:36:55.0000] <jamesr__>
i think we have to fight now

[16:37:04.0000] <jamesr__>
or at least file formal objections against each other

[16:38:11.0000] <JonathanNeal>
I think Domenic_ is suggesting a <PAREN> tag.

[16:38:53.0000] <JonathanNeal>
</SARCASM>

[16:39:12.0000] <zcorpan>
Domenic_: the blockquote usage is wrong (per whatwg spec at least)

[16:39:54.0000] <JonathanNeal>
That's true, plus you should use <footer> for cites.

[16:40:25.0000] <zcorpan>
not according to the spec

[16:40:47.0000] <Domenic_>
zcorpan: cuz he's missing <p>s?

[16:40:48.0000] <Domenic_>
http://developers.whatwg.org/grouping-content.html#the-blockquote-element

[16:40:59.0000] <zcorpan>
Domenic_: no

[16:41:06.0000] <Domenic_>
oh because the person's name is inside the quote

[16:41:10.0000] <zcorpan>
yes

[16:41:25.0000] <zcorpan>
and the quote marks should probably be omitted also

[16:41:51.0000] <zcorpan>
of course some people like hsivonen think that that usage is correct and the spec is wrong

[16:42:23.0000] <JonathanNeal>
I care because I write websites with subheadings all the time, and it frustrates me when a bunch of us create websites and guides to writing websites that rely on some new feature, and then it gets removed, nullifying a bunch of advice, offering no equivalent solution, and later noting a lack of adoption.

[16:42:31.0000] <JonathanNeal>
To respond to your initial question, Domenic_.

[16:43:17.0000] <Domenic_>
JonathanNeal: no, that doesn't really answer the question. My question was more, "why do you think the W3C spec is any more relevant than King Lear is?"

[16:44:04.0000] <JonathanNeal>
Hey, no need to randomly insult the works of Shakespeare.

[16:44:39.0000] <JonathanNeal>
I think it's relevant because it obviously has an impact on implementation and adoption.

[16:45:18.0000] <Domenic_>
Really?

[16:46:06.0000] <JonathanNeal>
Yes. To quote from earlier "the problem with <hgroup> is that the FUD that the w3c spec has added to the mix means that it'll be even longer than normal for this to get implemented widely, unfortunately".

[16:46:15.0000] <Domenic_>
Heh, fair.

[16:47:05.0000] <Domenic_>
I guess, my approach is to not let the W3C spec affect how I author or teach. I can see having to deal with the fallout from its existence though.

[16:48:54.0000] <JonathanNeal>
Interesting to see the difference in the solutions, <figure><blockquote/><figcaption/></figure> BS <blockquote><p>[...]<footer/></blockquote>.

[16:49:31.0000] <JonathanNeal>
In regards to what you just shared earlier. I never knew there was alignment issue with blockquote recommendations too.

[16:50:54.0000] <Domenic_>
the number of alignment issues is numerous and growing

[16:52:00.0000] <JonathanNeal>
And scrolling down http://html5doctor.com/blockquote-q-cite/#comment-23768 reveals that the post may be inaccurate.

[16:53:28.0000] <Domenic_>
the thing i love about the html5doctor comments section is the number of hidden tags from people who forgot they had to type &lt; and &gt;

[16:54:38.0000] <JonathanNeal>
I still agree with http://www.w3.org/html/wg/wiki/ChangeProposals/hgroup which is why I rally this subject every so often.

[16:55:22.0000] <JonathanNeal>
But <hgroup> is closer to what is needed, way better than nothing.

[16:55:56.0000] <zcorpan>
/me finds http://lists.w3.org/Archives/Public/public-html/2011Nov/0031.html

[17:35:18.0000] <SteveF>
JonathanNeal: "<JonathanNeal> The really tragic part about all of this is that JAWS 15 removed support for <hgroup> where it had previously supported it. " JAWS never supported hgroup or proper outline nesting

[17:36:34.0000] <SteveF>
Domenic_:"<Domenic_> JonathanNeal: why do care what the W3C spec says? you may not care but lost of dev's do...

[17:37:57.0000] <JonathanNeal>
SteveF: I made a correction to that quote.

[17:38:22.0000] <JonathanNeal>
And they did support outline nesting, moreso then than now.

[17:39:07.0000] <SteveF>
Jonatahan:Neal: yeah saw that after, unfortunately it was borked, we tried to work with them to fix it but they were not interested

[17:39:27.0000] <SteveF>
thier implementation of the oultine was borked that is

[17:42:10.0000] <JonathanNeal>
Help me understand what I perceive to be a dichotomy. You're contributing to a spec that you're also telling people is dangerous fiction to follow, in regards to sectioning elements.

[17:45:33.0000] <JonathanNeal>
And then, why not remove the sectioning part of elements from the w3 draft if they're dangerous, as <hgroup> was removed since it relied so heavily on them.

[17:45:50.0000] <SteveF>
JonathaNeal: no dichotomy, I have modified the advice/requirements in the HTML spec to provide guidance on the use of hx, the outline algorithm is still there sure maybe one day it will become useful and then the advice heading use can be changed, either way.

[17:47:12.0000] <JonathanNeal>
What is the difference between removing a feature and "sure maybe one day"-keeping it?

[17:48:20.0000] <SteveF>
JonathonNeal: there are no implementation requirements on browsers for the outline algorithm

[17:50:08.0000] <SteveF>
JonathanNeal: but sure if the WG decide that the outline algorithm is a waste of space then it will get dropped, we haven't reached that point yet

[17:54:10.0000] <SteveF>
JonathanNeal: if you think there needs to be clearer advice re fiction of outline then please file a bug or email the html list or me or whatever.

[17:55:01.0000] <JonathanNeal>
It was my hope that dropping <hgroup> meant getting something better. Your <subline/subhead> draft did that, but it never made it into a spec. Now there's a hole (an acknowledged hole) in the mutually agreed upon outlining algorithm. I've followed http://www.w3.org/html/wg/wiki/ChangeProposals/hgroup for years now. I'm sad to see it stale.

[17:55:30.0000] <SteveF>
JonathanNeal: then unstale it

[17:56:31.0000] <SteveF>
JonathanNeal: things change if people do stuff

[17:58:03.0000] <JonathanNeal>
Yea, I'm working on the great barrier of logging into the system.

[18:00:30.0000] <JonathanNeal>
I'd like to harmonize the current git work with the w3 wiki, which might ultimately help get the w3 spec and the whatwg spec in more harmony, but I can't use my w3.org creds on the w3 wiki.

[18:01:20.0000] <SteveF>
Domenic_: also note that the differences in the 2 specs are almost all about author conformance requirements, so browser implementer folk need not care if they don't wish to, conformance checker implementers do (in the case of main for example, which was developed at w3c and rewritten differently by hixie) and that is reflected in implementations.

[18:02:11.0000] <Domenic_>
As an author, I pay attention to the source material, not a fork.

[18:03:27.0000] <SteveF>
Domenic_: fair play to you, many devs don't take your view

[18:03:42.0000] <Domenic_>
I think most devs listen to w3schools :P

[18:04:25.0000] <SteveF>
Domenic_:yeah and they dropped hgroup a while back...

[18:04:35.0000] <Domenic_>
haha

[20:42:41.0000] <MikeSmith>
gsnedders: that validator message you saw isn't because of that server not resolving. It's expected that it doesn't resolve. The validator uses an internal resolver to map those URLs to locally cached copies of the schemas.

[01:00:31.0000] <hsivonen>
annevk-cloud: https://bugzilla.mozilla.org/show_bug.cgi?id=910187#c2 surprises me considering that we stopped recognizing the Armscii-8 label in Firefox 19 and no other browser engine support it

[01:01:14.0000] <Ms2ger>
Hmm, Armscii-8

[01:01:47.0000] <Ms2ger>
I think I still have a patch lying around to remove the decoder

[01:23:52.0000] <Ms2ger>
/me wonders where MikeSmith is on http://www.w3.org/2013/11/w3cteam

[01:25:11.0000] <jgraham>
Ms2ger: Pretty sure I would deny knowing MikeSmith too ;)

[01:25:17.0000] <SteveF>
Ms2ger: front far right

[01:26:01.0000] <SteveF>
he looks photoshopped

[01:26:48.0000] <Ms2ger>
Heh

[01:27:27.0000] <jgraham>
The whole photo looks very strange

[01:27:46.0000] <jgraham>
I think it had a lot of noise reduction applied to it or something

[01:30:40.0000] <darobin>
jgraham: I don't think that much noise reduction was applied to it

[01:30:51.0000] <darobin>
I mean I saw the original, it wasn't very noisy

[01:34:03.0000] <Ms2ger>
Oh, darobin is on there too?

[01:34:14.0000] <darobin>
damn right

[01:35:07.0000] <Ms2ger>
"Nothing precludes the author from using custom elements in HEAD."

[01:35:22.0000] <darobin>
Ms2ger: I'm roughly in the middle, grey tee with sunglasses hanging from it

[01:35:28.0000] <darobin>
yeah, that made my day too

[01:36:05.0000] <Ms2ger>
With the weird grin?

[01:36:27.0000] <jgraham>
darobin: Well there must be some reason everything looks so smudgy, except at areas of high contrast where there is a kind of halo effect

[01:37:38.0000] <darobin>
jgraham: I think that's because it may have been compressed a bit too much

[01:37:48.0000] <jgraham>
Ms2ger: Which message is that from?

[01:38:06.0000] <darobin>
Ms2ger: possibly :)

[01:38:11.0000] <Ms2ger>
jgraham, http://lists.w3.org/Archives/Public/public-webapps/2013OctDec/0610.html

[01:38:12.0000] <darobin>
jgraham: webapps

[01:38:12.0000] <jgraham>
darobin: Hmm, I guess that might well have a similar effect

[01:38:29.0000] <jgraham>
darobin: Right, webapps isn't a message :p

[01:38:50.0000] <Ms2ger>
darobin, also, is that a burrito you're holding?

[01:38:56.0000] <darobin>
yeah yeah, there were like five messages overnight

[01:39:03.0000] <darobin>
Ms2ger: well spotted! but no

[01:39:25.0000] <jgraham>
Ah. Well good to know that the people in charge of our glorious future understand how the platform works

[01:39:34.0000] <darobin>
it's a pinny as they say over the Channel

[01:40:10.0000] <darobin>
we made dumpings

[01:40:26.0000] <Ms2ger>
jgraham, it does open body, right?

[01:41:43.0000] <darobin>
yes

[01:42:03.0000] <darobin>
but hey, nothing indeed prevents you from putting whatever you want between <head> and </head> :)

[01:42:48.0000] <jgraham>
http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2665

[01:43:04.0000] <jgraham>
I mean nothing does strop you putting stuff in <head>

[01:43:16.0000] <jgraham>
As long as you don't actually use the HTML parser

[01:43:45.0000] <darobin>
right

[01:43:45.0000] <jgraham>
For example you could send your document in JSON and insert all the content using the DOM

[01:43:56.0000] <jgraham>
Actually

[01:44:01.0000] <jgraham>
Pretend I didn't say that

[01:44:10.0000] <jgraham>
Otherwise someone will think it's a great idea

[01:44:18.0000] <darobin>
/me trots off to make a spec for it

[01:44:59.0000] <darobin>
I'll put it in the same document in which I define a z attribute on every SVG element so that we have declarative 3D

[01:50:15.0000] <Ms2ger>
jgraham, surely it would be more readable to use the html5lib tests tree format

[02:11:15.0000] <Ms2ger>
Hixie, thanks for the acid3 update

[02:43:02.0000] <MikeSmith>
I photoshopped myself into that photo, as SteveF correctly surmised. I photoshopped in darobin too, which is why he's grinning.

[02:43:47.0000] <MikeSmith>
At the the time that photo was taken I was away for a bit helping the Shenzhen Internet Police refine some of their man-in-the-middle systems.

[02:45:26.0000] <Ms2ger>
I see

[02:45:37.0000] <Ms2ger>
That explains why you aren't listed in the description

[02:53:26.0000] <darobin>
and I had fled the country to escape the slashback for w3cmemes

[02:54:45.0000] <MikeSmith>
heh

[03:01:12.0000] <MikeSmith>
I heard w3cmemes barely made it out of China alive.

[03:01:31.0000] <MikeSmith>
Alternatively I heard that w3cmemes was seen crossing the border back to HK in the back seat of a PRC limousine, smoking a cigar.

[03:03:06.0000] <MikeSmith>
Ms2ger: I'm listed as "Bert Bos", which is an anagram for "Michael[tm] Smith"

[03:03:31.0000] <MikeSmith>
/me wonders what update Hixie made to Acid3

[03:05:09.0000] <hsivonen>
annevk-cloud: check out the source on http://main.am/armenianchurch/Program/General/FS2-1.htm

[03:06:36.0000] <hsivonen>
that site is a fascinating combination of pre-Unicode and post-Acid3 Web tech

[03:07:19.0000] <hsivonen>
anyway, the report about armscii-8 support being needed lost its credibility, since that site doesn't actually use armscii-8 support

[03:16:34.0000] <Ms2ger>
MikeSmith, http://lists.w3.org/Archives/Public/www-archive/2013Nov/0013.html

[03:16:46.0000] <Ms2ger>
MikeSmith, and I've seen Bert Bos, sorry :)

[03:18:39.0000] <MikeSmith>
/me notes that Ms2ger says he's sorry that he's seen Bert Bos

[03:19:00.0000] <MikeSmith>
Ms2ger: thanks for the link

[03:19:30.0000] <annevk>
hsivonen: charset=x-user-defined o_O

[03:20:01.0000] <annevk>
oh lol, character references all the way down

[03:20:11.0000] <hsivonen>
annevk: right. it doesn't actually use the x-user-defined range

[03:20:26.0000] <hsivonen>
annevk: instead, it assigns the Armenian glyphs to the Latin-1 Supplement range

[03:20:43.0000] <hsivonen>
and it supplies a font via @font-face

[03:21:09.0000] <hsivonen>
so x-user-defined only has an effect if you have that same font installed locally in a pre-@font-face Firefox

[03:21:12.0000] <annevk>
wow, I thought that was an India only thing

[03:21:40.0000] <hsivonen>
annevk: me, too

[03:22:00.0000] <hsivonen>
anyway, not evidence of armscii-8 use

[03:22:18.0000] <hsivonen>
and explains how Chrome can succeed in Armenia

[03:25:19.0000] <MikeSmith>
hsivonen: you mean you think that there are a lot of sites doing that?

[03:25:32.0000] <MikeSmith>
(doing what that page is doing I mean)

[03:28:23.0000] <hsivonen>
MikeSmith: not sure what I should think. the author of that page claims there are more like that, but he/she already made a untrue claim, so I'm not sure what to believe

[03:29:46.0000] <MikeSmith>
I guess it's more likely that hack is probably not something he dreamed up himself

[03:30:13.0000] <MikeSmith>
but instead just copied from some other more widely used site

[03:31:37.0000] <hsivonen>
MikeSmith: that sort of commandeering Latin 1 characters for non-Latin glyphs is not an isolated incident

[03:31:48.0000] <hsivonen>
MikeSmith: used to be a thing in India

[03:32:21.0000] <hsivonen>
MikeSmith: dunno how common the exact combination of x-user-defined with entities is, though

[03:32:30.0000] <MikeSmith>
ah OK

[03:32:33.0000] <gsnedders>
MikeSmith: Then it shouldn't cause an exception trying to start!

[03:32:51.0000] <MikeSmith>
gsnedders: indeed

[03:33:08.0000] <hsivonen>
MikeSmith: anyway, what that site does today is interoperably supported

[03:33:17.0000] <hsivonen>
(armscii-8 isn't and wasn't)

[03:34:28.0000] <MikeSmith>
hsivonen: yeah the guy who posted that bug just seemed to not even understand what he was doing himself, or what was actually needed and being used in practice for Armenian

[03:35:23.0000] <MikeSmith>
(or the guy who commented there in the recent comment -- I guess he's not the one who raised the bug)

[03:35:34.0000] <MikeSmith>
gsnedders: did you make any changes the validator sources locally?

[03:35:42.0000] <gsnedders>
MikeSmith: No.

[03:36:05.0000] <gsnedders>
MikeSmith: I literally just followed the published instructions, checked out build than ran the Python script twice

[03:36:12.0000] <MikeSmith>
ok

[03:36:47.0000] <MikeSmith>
can you please try running it one more time?

[03:36:53.0000] <gsnedders>
Sure.

[03:37:07.0000] <hsivonen>
how come Emoji landed in Unicode before https://en.wikipedia.org/wiki/Arevakhach ?

[03:37:09.0000] <gsnedders>
(I don't actually care. I just want a small bit of the Validator.nu source. :P)

[03:37:22.0000] <gsnedders>
MikeSmith: Third time lucky, seems to be working

[03:37:27.0000] <MikeSmith>
gsnedders: I care if I broke something :)

[03:37:48.0000] <MikeSmith>
gsnedders: yeah I guess we need to modify the build instructions then

[03:38:09.0000] <MikeSmith>
"Re-run the build script until it doesn't fail any more."

[03:38:22.0000] <annevk>
in response to last night, seems markup mu has not yet been achieved

[03:38:37.0000] <hsivonen>
gsnedders: it's possible that I broke the appearance of something that was broken not being broken, if this is about it actually trying to fetch something from s.validator.nu

[03:38:41.0000] <gsnedders>
MikeSmith: :)

[03:38:47.0000] <gsnedders>
gsnedders: Yes

[03:38:57.0000] <gsnedders>
gsnedders: Why are you talking to yourself?

[03:38:58.0000] <gsnedders>
hsivonen: Yes.

[03:39:32.0000] <hsivonen>
gsnedders: that suggests our mapping of magic bogo URLs to local data is broken

[03:39:52.0000] <gsnedders>
hsivonen: But only on second run of build

[03:39:57.0000] <hsivonen>
weird

[03:54:04.0000] <MikeSmith>
hsivonen, gsnedders I think it's most likely something I messed up in the last few months. I'll try to look at it when I can make the time

[04:02:59.0000] <annevk>
Custom elements made it to CR?

[04:06:05.0000] <MikeSmith>
annevk: I thought it just went to LC recenlty

[04:06:34.0000] <annevk>
MikeSmith: I think the way it works is that nobody has even noticed that happened

[04:06:43.0000] <MikeSmith>
heh

[04:07:01.0000] <annevk>
MikeSmith: apart from rniwa from Apple it seems, but his alternative proposal was not seen as a comment

[04:09:59.0000] <MikeSmith>
annevk: I'm glad at least there's a plan in place to clear up the confusion in the future http://w3cmemes.tumblr.com/post/66838310443/disappointed-in-the-guardians-of-the-process

[04:11:01.0000] <MikeSmith>
annevk: if they missed an alternative proposal I doubt it was intentional

[04:11:22.0000] <MikeSmith>
I'll ask Yves

[04:12:05.0000] <annevk>
MikeSmith: it seems to be mentioned in http://www.w3.org/wiki/Webapps/LCWD-custom-elements-20131024/ so I guess I was missing something

[04:12:27.0000] <annevk>
MikeSmith: still not convinced that with four comments, all of the monkey patching going on, this is actually ready

[04:15:34.0000] <MikeSmith>
annevk: I think if Apple's saying they're  not planning on implementing as specified it's not ready

[04:16:36.0000] <MikeSmith>
especially if they are saying they'll implement it if changes are made

[04:20:48.0000] <MikeSmith>
http://www.w3.org/wiki/Webapps/LCWD-custom-elements-20131024/#LC-2 seems to be dglazkov saying he plans to resolve the comment without making any changes

[06:07:20.0000] <annevk>
hsivonen: it seems Chrome does not respect x-user-defined as a label

[06:07:26.0000] <annevk>
hsivonen: at least not in HTML context

[06:50:56.0000] <darobin>
jgraham or Ms2ger: am I guessing correctly that all the WPT tests starting with html5lib_ in html/syntax/parsing are generated automatically from the html5lib test suite?

[06:51:35.0000] <darobin>
and if so, I guess that if I wanted to modify them it'd be best to patch upstream? which in turns begs the question of finding the converter and all

[06:51:48.0000] <Ms2ger>
Yes

[06:51:55.0000] <jgraham>
darobin: Yes

[06:51:56.0000] <Ms2ger>
The converter should be in wpt

[06:52:00.0000] <Ms2ger>
Under tools/?

[06:52:01.0000] <jgraham>
The converter is in tools

[06:52:04.0000] <darobin>
ah

[06:52:06.0000] <darobin>
/me digs

[06:52:09.0000] <Ms2ger>
And https://github.com/html5lib/html5lib-tests

[06:52:47.0000] <darobin>
found it, thanks a lot!

[08:48:41.0000] <zcorpan>
jgraham: if i want to test that ping=... got resolved correctly in the POST request, how should i do that? a naive way would be to stash the result and then do an XHR, but i think that has some problems like what if the XHR happens before the ping happens, what if ping isn't supported...

[08:50:10.0000] <zcorpan>
i guess i could feature-check for ping and fail early. if the feature check passes but the ping isn't sent anyway, the test can time out

[08:50:14.0000] <jgraham>
zcorpan: I guess you need to do the ping-causing action and then have a timeout to do the XHR

[08:50:46.0000] <jgraham>
If it can be delayed for an arbitary amount of time it seems impossible to tell for sure whether if succeeded or not

[08:51:11.0000] <zcorpan>
can't i do the XHR immediately and have the server script wait with returning anything until the stash is there?

[08:51:38.0000] <jgraham>
Well sure, I guess

[08:51:52.0000] <jgraham>
But that still needs some kind of timeout

[08:52:17.0000] <zcorpan>
isn't the harness timeout enough?

[08:53:45.0000] <jgraham>
On the server side I mean

[08:53:55.0000] <jgraham>
You can't juet let the script run forever

[08:54:28.0000] <zcorpan>
the script isn't killed if the test is navigated?

[08:54:38.0000] <jgraham>
No, how would that work?

[08:55:02.0000] <zcorpan>
the browser closes the XHR connection on navigation, i thought. but maybe it doesn't?

[08:55:27.0000] <jgraham>
Right, but the server won't notice that

[08:56:01.0000] <zcorpan>
ok. is that intentional?

[08:56:19.0000] <jgraham>
Well intentional in the sense that I don't know how to do it another way

[08:56:57.0000] <jgraham>
You would need to know whether the remote end had closed the socket. But I don't know how to tell without trying to send something over it

[08:57:06.0000] <zcorpan>
i was imagining some magic where the server would notice that the connection was closed and kill the script

[08:57:17.0000] <jgraham>
There isn't any such magic

[08:57:22.0000] <zcorpan>
k

[08:57:37.0000] <jgraham>
If someone knows how to add such magic, it might be a good idea

[08:58:50.0000] <zcorpan>
i don't know what the socket api is like. but it seems a bit weird to not be notified about the socket closing. but i recall pywebsocket also not knowing about it

[08:59:24.0000] <zcorpan>
maybe my mental model of how sockets work is just wrong

[09:11:02.0000] <zewt>
not completely following the conversation, but you can definitely tell if the other side has closed a TCP connection

[09:12:01.0000] <jgraham>
zewt: Using getsockopt? Or something else?

[09:13:13.0000] <zewt>
just by trying to read it; you'll get an EOF (and a read signal from select)

[09:20:36.0000] <jgraham>
Can I actually use that in this situation though?

[09:22:26.0000] <zewt>
not familiar with what you're doing ... are you testing against a dummy server to see what the browser is doing?

[09:23:23.0000] <jgraham>
I don't know what the difference between a dummy server and a real server

[09:23:27.0000] <jgraham>
is

[09:23:42.0000] <Ms2ger>
The words "dummy" and "real"

[09:23:47.0000] <jgraham>
But yeah, I have a server

[09:23:51.0000] <jgraham>
and it does some work

[09:24:13.0000] <jgraham>
and maybe, by the time the work is done, the client has closed the connection

[09:24:14.0000] <zewt>
a real server being apache or nginx or something that you're just making requests against, as opposed to something designed to inspect some particular behavior

[09:24:21.0000] <Ms2ger>
dglazkov, :)

[09:24:50.0000] <jgraham>
It's a real server in the sense that you don't directly access the inner state of the server

[09:24:59.0000] <jgraham>
when running tests

[09:29:47.0000] <zewt>
well, the server can tell if the client has closed the connection; whether you can make use of that in whatever it is you're doing with whatever server you're using I couldn't tell you :)

[10:32:52.0000] <SimonSapin>
annevk: https://code.google.com/p/chromium/issues/detail?id=324251#c2 says data: URLs have no fragment (it’s part of the "content") because rfc2397 doesn’t talk about it. I disagree. What do you think?

[10:33:17.0000] <Ms2ger>
What does the fo^Wspec say?

[10:33:40.0000] <annevk>
SimonSapin: you're correct, that's been proven long ago

[10:33:56.0000] <annevk>
SimonSapin: fragment identifiers are part of all URLs

[10:34:44.0000] <annevk>
SimonSapin: the way the IETF defines URIs with ABNF on a per-scheme basis makes this confusing admittedly; but the URL Standard solves that

[10:36:04.0000] <annevk>
SimonSapin: pretty sure that bug is a duplicate btw

[10:46:00.0000] <zcorpan>
jgraham: another thing i want to do is get the raw characters for a part of the request url. what i came up with was re.match(r'q=([^&]+)', request.url_parts.query).groups()[0]

[10:47:07.0000] <jgraham>
zcorpan: That seems like it would work

[10:49:30.0000] <jgraham>
I admit it isn't super-pretty, but in most cases request.GET will be good enough

[10:49:41.0000] <zcorpan>
yeah it seems to do the trick. at least when the url only has ascii-range bytes, iirc (old?) IE can request urls without percent-escaping and i don't know what would happen

[10:50:00.0000] <jgraham>
So making cases where it isn't good enough pretty seems like a lower priority

[10:50:27.0000] <zcorpan>
yeah i don't disagree

[10:52:30.0000] <jgraham>
You can go even lower level if something on the python side isn't playing well with non-ascii there e.g. request.url or request.request_line

[10:52:55.0000] <jgraham>
I think the regexp should work even if there is non-ascii, but you can easily test that in (i)python

[10:55:35.0000] <zcorpan>
>>> re.search(r'q=([^&]+)', b'q=\xE5').groups()

[10:55:35.0000] <zcorpan>
('\xe5',)

[10:56:16.0000] <zcorpan>
hmm i guess that wasn't what i wanted to test

[10:56:57.0000] <jgraham>
/me -> away for a bit

[11:15:47.0000] <hsivonen>
annevk-cloud: a quick looks at an Armenian legacy site suggests that IE doesn't do what Gecko does with x-user-defined, either

[11:16:24.0000] <hsivonen>
this sort of knowing Unicode-avoidance legacy is sad

[11:16:54.0000] <hsivonen>
for those following along at home, I'm looking at http://archive.aravot.am/2005/aravot_arm/February/25/aravot_index.htm

[11:18:22.0000] <hsivonen>
in any case, we should probably re-evaluate x-user-defined

[11:18:42.0000] <hsivonen>
and see if making it a label of windows-1252 would lead to better interop

[11:22:35.0000] <zcorpan>
jgraham: urllib.urlopen(b'...\xE5').read() sends %E5 in the request

[11:22:59.0000] <zcorpan>
hsivonen: do webkit/ie support x-user-defined in XHR?

[11:23:20.0000] <hsivonen>
zcorpan: dunno. finding out would be part of re-evaluating

[11:24:15.0000] <SimonSapin>
hsivonen: x-user-defined is a documented trick to get binary data through XHR without arraybuffer support: https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Handling_binary_data

[11:25:02.0000] <zcorpan>
/me finds https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest

[11:25:15.0000] <zcorpan>
SimonSapin beat me to it

[11:53:04.0000] <zcorpan>
jgraham: writing \xe5 to a socket directly worked. it round-tripped OK

[12:13:14.0000] <BenoitRen>
Hi everyone. I'm still trying to mark up video game scripts, and I've hit another snag.

[12:13:51.0000] <BenoitRen>
Suppose I have an NPC you can talk to. I'd mark it up like this: <h2>NPC name</h2><ol><li>something</li><li>something else</li></ol>

[12:14:08.0000] <BenoitRen>
Where the list items are the different lines you get.

[12:14:41.0000] <BenoitRen>
Now, what do I do if an action occurs during or after one of those lines?

[12:15:17.0000] <zewt>
... what

[12:15:18.0000] <BenoitRen>
For example, there's a dog NPC you have to catch. You can interact with it twice before it runs off to another town.

[12:15:32.0000] <zewt>
html isn't a script markup language. heh

[12:16:11.0000] <BenoitRen>
@zewt: I know that. But if I'm going to present it on a web page, I have to mark it up somehow.

[13:48:31.0000] <zcorpan>
does firefox support ping=""?

[13:48:54.0000] <zcorpan>
i can't see it making a request

[13:50:44.0000] <zcorpan>
but the IDL attribute is present :-(

[13:52:53.0000] <smaug____>
zcorpan: IIRC it doesn't

[13:53:08.0000] <smaug____>
there is still some code for the old proposal, but it is disabled by default

[13:53:41.0000] <smaug____>
(IMHO ping isn't too useful thing to add to the web platform)

[13:53:47.0000] <zcorpan>
it's sad that the .ping property is there but the feature doesn't work. feature detection fail

[13:54:22.0000] <zcorpan>
(also non-conforming)

[13:55:14.0000] <smaug____>
it sounds like a good thing. Some tracking company thinks it works, and doesn't even try to use more heavy weight solutions :)

[13:55:22.0000] <smaug____>
but I don't know why ping is there

[13:55:24.0000] <smaug____>
looking

[13:56:58.0000] <zcorpan>
more likely tracking companies will notice that it doesn't work and UA sniff for firefox, so when you do implement it you'll still have as bad user experience as without it :-)

[13:57:27.0000] <zcorpan>
/me poof

[13:57:56.0000] <smaug____>
anyhow, you can blame Google about this implementation

[13:58:01.0000] <smaug____>
http://bonsai.mozilla.org/cvsblame.cgi?file=mozilla/dom/public/idl/html/nsIDOMNSHTMLAnchorElement2.idl&rev=1.1

[14:20:11.0000] <zcorpan>
smaug____: ok

[14:21:00.0000] <zcorpan>
smaug____: did you file a bug to remove it?

[14:21:28.0000] <smaug____>
nope

[14:22:04.0000] <smaug____>
I wonder what all will break if it is removed

[14:28:14.0000] <zcorpan>
might be worth checking how google mobile search detects ping support, if it's just UA sniffing

[14:28:48.0000] <zcorpan>
good night


2013-11-29
[00:13:26.0000] <hsivonen>
https://groups.google.com/d/msg/comp.infosystems.www.authoring.html/M1pz9cJJdxE/_OzpCv8dwwgJ

[00:13:36.0000] <hsivonen>
"I _don't_ recommend what I'm about to say.  However, it is sort-of

[00:13:38.0000] <hsivonen>
theoretically respectable."

[00:13:54.0000] <davve>
hel

[00:14:23.0000] <davve>
oops, wrong window.

[00:15:10.0000] <odinho>
:]

[00:32:03.0000] <Ms2ger>
wowser developers, eh

[00:35:51.0000] <MikeSmith>
is there spec yet for Mozilla data-store API that's been discussed in the sysapps WG?

[00:38:10.0000] <Ms2ger>
I'd be surprised

[00:39:53.0000] <MikeSmith>
Ms2ger: do you remember who's pushing for it?

[00:40:13.0000] <MikeSmith>
I assume it's something wanted for b2g

[00:40:24.0000] <Ms2ger>
I'll guess... sicking

[00:40:40.0000] <MikeSmith>
but I vaguely remember hearing that it was mainly wanted for stoarge for the messaging API

[00:40:43.0000] <MikeSmith>
Ms2ger: ok

[00:41:31.0000] <MikeSmith>
https://wiki.mozilla.org/WebAPI/DataStore I guess

[00:41:35.0000] <MikeSmith>
who's Baku?

[00:44:16.0000] <Ms2ger>
Andrea

[00:46:21.0000] <Ms2ger>
(If that helps :))

[01:07:30.0000] <hsivonen>
Ms2ger: "wowser" means Netscape that ignored SGML thruth

[01:07:49.0000] <Ms2ger>
That's from before my time :)

[01:08:14.0000] <hsivonen>
right now, I'm pretty annoyed at Netscape developers who came up with the idea of supporting x-user-defined

[01:08:53.0000] <hsivonen>
s/thruth/truth/ even

[01:10:43.0000] <hsivonen>
aargh. this whole "Arial AM" thing happened after Armenian was already in Unicode 1.0. so sad

[02:16:29.0000] <hsivonen>
annevk-cloud: check http://hsivonen.com/test/moz/x-user-defined/test-2-unknown-or-alias.htm out in Chrome

[02:16:48.0000] <hsivonen>
annevk-cloud: Is my conclusion that Chrome aliases x-user-defined to windows-1252 correct?

[02:39:00.0000] <zcorpan>
hsivonen: it says <meta charset="windows-1252"> not 51

[02:41:01.0000] <hsivonen>
zcorpan: good typo catch. Thanks.

[02:41:37.0000] <hsivonen>
zcorpan: even though my testing was wrong, I still found out about a Blink/WebKit quirk: https://bugs.webkit.org/show_bug.cgi?id=18270

[02:41:49.0000] <hsivonen>
https://mxr.mozilla.org/chromium/source/src/third_party/WebKit/Source/core/fetch/TextResourceDecoder.cpp#139

[02:41:51.0000] <zcorpan>
data:text/html;charset=x-user-defined,%C3%A5 is interesting in firefox

[02:43:05.0000] <hsivonen>
zcorpan: what's interesting about it?

[02:45:38.0000] <zcorpan>
hsivonen: for me it renders a glyph for U+F7C3 followed by a "5"

[02:46:09.0000] <zcorpan>
hsivonen: but if i copy the text and paste into live dom viewer, the 5 becomes U+F7A5

[02:47:55.0000] <zcorpan>
hsivonen: anyway, a simpler test is <meta charset=x-user-defined><meta charset=utf-8>å (in utf-8)

[02:48:29.0000] <zcorpan>
hsivonen: and compare with <meta charset=unknown><meta charset=utf-8>å

[02:50:05.0000] <zcorpan>
hsivonen: same conclusion. same result in presto, too

[02:53:31.0000] <zcorpan>
hsivonen: except presto says x-user-defined in your test

[02:58:24.0000] <zcorpan>
"My understanding is that IE treats x-user-defined differently based on some Registry settings" (from the bug above)

[03:03:15.0000] <hsivonen>
zcorpan: good idea to test it like that: http://hsivonen.com/test/moz/x-user-defined/baseline.htm

[03:03:21.0000] <hsivonen>
zcorpan: good idea to test it like that: http://hsivonen.com/test/moz/x-user-defined/test.htm

[03:04:19.0000] <hsivonen>
the latter shows that x-user-defined decodes those bytes like windows-1252 on en-US IE11 but is a distict encoding

[03:04:30.0000] <hsivonen>
such a mess

[03:09:16.0000] <zcorpan>
hsivonen: it seems weirder to special-case <meta> than to special-case XHR, imo

[03:09:45.0000] <zcorpan>
hsivonen: presto decodes as windows-1252 for both http header and <meta>

[03:10:30.0000] <zcorpan>
hsivonen: i wonder what web pages expect that declare x-user-defined in http

[03:11:24.0000] <Ms2ger>
Do any? :)

[03:18:56.0000] <zcorpan>
none in webdevdata.org-2013-09-01-201332

[04:02:41.0000] <hsivonen>
zcorpan: I agree it's weirder, but I'd rather make Gecko consistent with Blink that try to get Blink to change

[04:03:37.0000] <hsivonen>
it's bad enough that WebKit made stuff up like that. making up *different* weird stuff would be even worse, IMO.

[04:04:06.0000] <jgraham>
Kind of sad if we are reduced to treating blink as an immovable rock though

[04:04:18.0000] <annevk>
hsivonen: do you want to make me file a bug on HTML?

[04:15:50.0000] <zcorpan>
hsivonen: i think it shouldn't be too hard to get this changed in blink if there are tests

[04:18:08.0000] <hsivonen>
annevk: that would be nice, yes, unless you think it's worthwhile to make Blink&WebKit invert what they special-case

[04:19:12.0000] <hsivonen>
jgraham: well, it's easier for me to clone the WebKit/Blink quirk and forget about this than to go around telling WebKit *and* Blink devs they should change something as obscure as this to make it make more sense

[04:19:49.0000] <hsivonen>
jgraham: that is, it's easier to just leave my sense of logic at the door and not fight the WebKit/Blink quirk

[04:21:05.0000] <hsivonen>
it's really sad, though, that some x-user-defined sites "improve" their state by using @font-face instead of migrating to UTF-8

[04:21:19.0000] <hsivonen>
as if doing things the right way was so terrible that it has to be avoided

[04:21:37.0000] <hsivonen>
not surprising for the Web, of course

[04:35:40.0000] <Ms2ger>
"High level sincerity！"

[04:36:10.0000] <hsivonen>
Ms2ger: ?

[04:37:50.0000] <Ms2ger>
hsivonen, http://www.w3.org/mid/CA+-d5Zr8E=WpH9sTACm3XBmopGn_VeJvVcy3Yx2oKvLGvFvaFQ⊙mgc

[04:51:53.0000] <zcorpan>
hmm, meta refresh support is optional in the spec. i'll assume that browsers aren't going to have it off by default so i can let the test fail (or time out) if it doesn't navigate

[05:08:24.0000] <annevk>
hsivonen: okay, on it

[05:11:04.0000] <annevk>
hsivonen: https://www.w3.org/Bugs/Public/show_bug.cgi?id=23940

[05:31:12.0000] <zcorpan>
it seems meta refresh doesn't work in firefox if it's inserted by a script

[05:31:45.0000] <zcorpan>
is that intentional? i think the spec says it should work

[05:33:39.0000] <zcorpan>
http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2667

[06:31:27.0000] <MikeSmith>
"User agents are encouraged to expose parse errors somehow."

[06:32:51.0000] <jgraham>
We choose to expose them by encoding them in the initial state of the universe

[06:33:25.0000] <Ms2ger>
That's why we hired jgraham, in fact

[06:36:11.0000] <MikeSmith>
I encourage annevk to somehow work the phrase "with extreme prejudice" into his next specification

[06:36:27.0000] <zcorpan>
http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2668 - does the close() cause 'load' to be fired?

[06:37:18.0000] <zcorpan>
write() implies open() which mutes the iframe's load event that was going to be fired because the browsing context came into being

[06:37:19.0000] <jgraham>
zcorpan: Yes

[06:40:03.0000] <jgraham>
zcorpan: Where is the stuff about document.open muting load events?\

[06:42:50.0000] <zcorpan>
jgraham: i thought it was step 20 but i see now that only applies while handling a load event

[06:43:58.0000] <gsnedders>
hsivonen: I suppose if you're used to the only way of getting stuff rendered is custom fonts, the obvious next step is @font-face, not looking for alternate ways (like re-encoding stuff).

[06:44:43.0000] <jgraham>
zcorpan: Yeah, that's to stop you getting more than one load event

[06:45:37.0000] <zcorpan>
jgraham: but in my case the flag is false so i think the spec says two load events should be fired

[06:46:40.0000] <zcorpan>
"When an iframe element is inserted into a document, the user agent must create a nested browsing context, and then process the iframe attributes for the "first time"." #the-iframe-element

[06:47:39.0000] <zcorpan>
which will "Queue a task to run the iframe load event steps."

[06:52:27.0000] <jgraham>
zcorpan: So this is the question of how the initial about:blank document loads, right?

[06:52:55.0000] <zcorpan>
jgraham: not quite

[06:53:28.0000] <zcorpan>
i'll file a bug

[06:53:32.0000] <jgraham>
Well nearly

[06:53:49.0000] <jgraham>
If the initial about:blank was loaded synchronously, you wouldn't see that event

[06:55:13.0000] <zcorpan>
why not?

[07:09:45.0000] <jgraham>
I thought that where the load was synchronous the event was too

[07:09:56.0000] <jgraham>
But maybe I am misremembering this stuff

[07:10:41.0000] <zcorpan>
https://www.w3.org/Bugs/Public/show_bug.cgi?id=23942

[07:13:55.0000] <zcorpan>
hmm, stop parsing fires load on the window, not on the iframe

[07:18:12.0000] <Ms2ger>
Sounds like someone is writing tests ;)

[07:32:03.0000] <hsivonen>
MikeSmith: as in "implementations MUST NOT support UTF-32, with extreme prejudice"?

[09:18:33.0000] <MikeSmith>
hsivonen: that sounds sensible

[09:26:21.0000] <MikeSmith>
speaking of sensible, best combination of sentences found in my inbox so far today: "I see two possibilities to improve the specification. First the syntax should be defined in an EBNF."

[09:30:07.0000] <jgraham>
MikeSmith: That makes sense. Assuming that the real problem with whatever specification this is is that the editor is full of crazy and someone is looking for a way to say "look at the counterproductive things s?he is spending h[er|is] time on, we should remove them"

[09:35:41.0000] <MikeSmith>
jgraham: I can see you've played knifey spoony before


2013-11-30
[05:22:35.0000] <GPHemsley>
TabAtkins, et al.: What's the story with pseudo-elements like ::after that require there to be content in the primary element? (E.g. why doesn't img::after work?)

[05:28:44.0000] <Ms2ger>
GPHemsley, img::after is a child of img, and replaced elements don't render their children

[05:29:19.0000] <GPHemsley>
Ms2ger: Why is ::after a child?

[05:29:23.0000] <Ms2ger>
Anyone have thoughts on the serialization of doctypes whose publicId/systemId contain quotes?

[05:29:58.0000] <Ms2ger>
GPHemsley, that's just how they work :)

[05:30:15.0000] <GPHemsley>
Ms2ger: Any chance that could change to something more intuitive?

[05:30:28.0000] <Ms2ger>
Not really

[05:31:58.0000] <Ms2ger>
Say you have "h1:before {content: counter(chapno, upper-roman) ". "}"

[05:32:16.0000] <Ms2ger>
Would you want that number to be on a separate line?

[05:46:18.0000] <MikeSmith>
Ms2ger: escape the quotes somehow?

[05:53:37.0000] <Ms2ger>
MikeSmith, how? :)

[05:56:36.0000] <MikeSmith>
Ms2ger: "somehow" in the annevk "User agents are encouraged to expose parse errors somehow." spirit

[05:56:53.0000] <Ms2ger>
/me makes is "Escape the quotes with extreme prejudice"

[06:00:13.0000] <Ms2ger>
MikeSmith, seriously though, afaict there's no way

[06:01:47.0000] <MikeSmith>
Ms2ger: I guess not if you want them to be round-trippable at least

[06:02:58.0000] <Ms2ger>
That's kind of the idea :)

[06:03:09.0000] <MikeSmith>
but if a valid doctype isn't allowed to have quotes in it, then I'd think nobody should expect a doctype with quotes in it will necessarily surive as-is after being (re)serialized

[06:04:02.0000] <Ms2ger>
They'd better nor :)

[06:04:06.0000] <Ms2ger>
not, even

[06:05:03.0000] <MikeSmith>
so you could have the serialization algorithm just, say, just skip them them

[06:05:44.0000] <MikeSmith>
(instead of attempting to escape them or do something else with them)

[06:05:54.0000] <MikeSmith>
but yeah otherwise I guess there's no way

[06:06:28.0000] <MikeSmith>
and by "skip them" I mean never append them to the output stream

[06:09:55.0000] <Ms2ger>
Yeah

[06:11:34.0000] <Ms2ger>
/me needs to get a recent IE somehow

[06:18:04.0000] <odinho>
Ms2ger: Not that hard? Just d/l an virtualbox image or something?

[06:18:19.0000] <odinho>
MS gives that out for free. At least did last time I needed it.

[06:18:19.0000] <Ms2ger>
Do you know where those are?

[06:18:34.0000] <Ms2ger>
I got a IE10-prerelease version that way

[06:18:57.0000] <odinho>
http://www.modern.ie/en-us/virtualization-tools < guess this one

[06:19:27.0000] <odinho>
Yeah, virtualbox for linux, and you get lots of ie's on lots of os'es.

[06:19:28.0000] <Ms2ger>
Oh, that's actually a MS site?

[06:19:36.0000] <odinho>
Mm

[06:19:58.0000] <Ms2ger>
Whois says yes

[06:24:15.0000] <Ms2ger>
Ta

[11:40:57.0000] <gsnedders>
hsivonen: Do you have any data for how often the moz char detector gets the encoding?

[11:42:03.0000] <malinus>
Hello. How exactly am I supposed to use the "find" method? I want to search for specific tags, and have my parsed html document.

[12:10:53.0000] <malinus>
When I'm trying to follow the example and set the encoding. I get this nice little exception thrown at me: "TypeError: Cannot explicitly set an encoding with a unicode string" from: html5lib.parse(source.text, treebuilder="lxml", encoding=source.encoding)

[13:16:45.0000] <SimonSapin>
Hi malinus. What is 'source' in your code?

[13:17:14.0000] <malinus>
nvm. I've figured it out

[15:06:54.0000] <SimonSapin>
Do I need to do something like create an account to follow what’s going on in Critic? https://critic.hoppipolla.co.uk/r/445

