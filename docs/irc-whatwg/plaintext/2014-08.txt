2014-08-01
[20:48:16.0000] <annevk>
roc: heh, you are!

[23:49:39.0000] <foolip>
Hixie: pong, I've moved it up on my todo list

[23:56:15.0000] <annevk>
I wonder if DreamHost has MySQL 5.5 now so I can do this: http://mathiasbynens.be/notes/mysql-utf8mb4

[23:56:54.0000] <annevk>
Using an emoji required a character reference :/

[00:05:07.0000] <foolip>
annevk: the new exitFullscreen() doesn't actually sync fullscreenchange events with the resize

[00:06:12.0000] <foolip>
like requestFullscreen(), the "as part of the next animation frame task" needs to be the first step after "resize"

[00:07:21.0000] <annevk>
foolip: I thought resize -> change state for request meant change state -> resize for exit, but yeah, I guess

[00:07:36.0000] <annevk>
foolip: there's the thing though that you don't always resize

[00:07:54.0000] <annevk>
foolip: and you only resize one you you realize the stack is empty

[00:08:06.0000] <annevk>
foolip: and you don't know about that until you start popping it

[00:10:24.0000] <foolip>
yes, it'll be a bit complicated

[00:10:32.0000] <foolip>
do you have an idea, or should I think hard?

[00:10:54.0000] <annevk>
my idea was to do the resize afterwards :)

[00:11:13.0000] <foolip>
that'll lead to flicker and scripts seeing an inconsistent state though

[00:11:19.0000] <annevk>
open a bug and I can give it another go I suppose

[00:11:45.0000] <foolip>
https://www.w3.org/Bugs/Public/show_bug.cgi?id=26440 is still open, I'll comment

[00:12:17.0000] <annevk>
I guess we can figure out whether the stack will be empty upfront

[00:12:44.0000] <annevk>
although we'll also have to determine it for all ancestor browsing contexts, lots of cross-process shit

[00:12:57.0000] <annevk>
but I decided not to worry about those things anymore, at least not too hard

[00:13:13.0000] <foolip>
right, I saw the note :)

[00:14:40.0000] <foolip>
right now there is no browser with out-of-process iframes I think, so no one will notice if the model is broken until later

[00:14:43.0000] <foolip>
yay?

[00:15:11.0000] <foolip>
synchronous IPC does exist, so maybe it'll be fine

[00:15:31.0000] <annevk>
the Servo crowd will not like me

[00:15:44.0000] <foolip>
so ask them to review this stuff!

[00:16:21.0000] <foolip>
Presto was single-process single-threaded, so what do I know? :)

[00:16:22.0000] <annevk>
Yeah I should I guess, I keep forgetting who I should ping, maybe SimonSapin can help out

[00:16:33.0000] <annevk>
Presto had its own magic

[00:17:07.0000] <foolip>
yeah...

[00:21:51.0000] <mathiasbynens>
annevk: $ mysql --version

[00:21:51.0000] <mathiasbynens>
mysql  Ver 14.14 Distrib 5.1.73, for debian-linux-gnu (x86_64) using readline 6.1

[00:21:53.0000] <mathiasbynens>
:(

[00:23:04.0000] <annevk>
sad times

[00:24:34.0000] <zcorpan>
Hixie: if the preloader can't evaluate a mq it doesn't preload anything. that was a requirement in the spec before the HTML merge

[00:30:03.0000] <annevk>
mathiasbynens: did you ever research why utf8 was so bad in the first place?

[00:33:23.0000] <foolip>
annevk: https://www.w3.org/Bugs/Public/show_bug.cgi?id=26440#c11

[00:42:15.0000] <SimonSapin>
annevk: ?

[00:46:25.0000] <SimonSapin>
annevk: what about Servo / how can I help?

[00:47:57.0000] <mathiasbynens>
annevk: nope, but my guess would be incompetence

[00:48:15.0000] <SimonSapin>
annevk: Do you mean not-really-utf8-in-mysql? Apparently at the time when Unicode was only the BMP, UTF-8 only needed up to 3 bytes per code point

[00:58:23.0000] <annevk>
SimonSapin: I'd like whoever works on out-of-process iframes to look at Fullscreen

[01:00:05.0000] <annevk>
foolip: currently step 3.4.3 has a loop when popping that you miss

[01:00:11.0000] <SimonSapin>
ok. Any point specifically?

[01:01:08.0000] <annevk>
SimonSapin: I guess whereever the source code says "cross-process"

[01:01:24.0000] <annevk>
SimonSapin: it's whenever frame boundaries are crossed so any talk about browsing context is suspect

[01:02:09.0000] <SimonSapin>
ok

[01:08:17.0000] <foolip>
annevk: I thought you would say that. Why not just remove elements from the middle of the stack when they're removed from the document?

[01:09:33.0000] <annevk>
foolip: makes sense, I wonder why I forgot about that, I'll clean that up first

[01:22:54.0000] <annevk>
foolip: I thought I wrote "ordered set" in the spec, fixing that now

[01:24:29.0000] <foolip>
annevk: thanks for fixing things so promptly!

[01:24:49.0000] <foolip>
let's hope there's enough time to implement and ship it with the next release

[02:34:57.0000] <mathiasbynens>
SimonSapin: are you sure MySQL’s `utf8` was implemented way back then?

[02:35:33.0000] <SimonSapin>
no idea, just a guess

[02:36:58.0000] <mathiasbynens>
“Up to and including TUS 3.0.1, characters were assigned only in the BMP. In TUS 3.1, characters were assigned in the Supplementary Planes for the first time, in Planes 1, 2 and 14.”

[02:37:06.0000] <mathiasbynens>
Unicode 3.1.0 == March 2001

[02:39:37.0000] <mathiasbynens>
can’t seem to find when MySQL added its `utf8` implementation though

[02:44:20.0000] <annevk>
but it was known from Unicode 2 that could happen

[02:44:34.0000] <annevk>
but yeah, makes sense I suppose

[02:44:44.0000] <annevk>
but that it takes a decade to fix...

[02:46:24.0000] <mathiasbynens>
https://web.archive.org/web/20040612104116/http://dev.mysql.com/doc/mysql/en/Charset-Unicode.html

[02:46:25.0000] <mathiasbynens>
“As of MySQL version 4.1, there are two new character sets for storing Unicode data: `ucs2` [… and] `utf8`”

[02:46:26.0000] <mathiasbynens>
there we go

[02:47:10.0000] <mathiasbynens>
MySQL 4.1 was released in October 2004

[02:47:18.0000] <mathiasbynens>
so yeah, incompetence

[02:48:11.0000] <annevk>
mounir_: should prolly run DOMQuatern past public-script-coord too?

[02:48:31.0000] <annevk>
wow

[02:48:44.0000] <annevk>
no utf-16?

[02:49:00.0000] <annevk>
because that would sort of explain utf8, they just mapped to ucs2

[03:07:27.0000] <mounir_>
annevk: oh, they do geometry stuff?

[03:29:03.0000] <Ms2ger>
annevk, happy birthday

[03:29:17.0000] <mounir_>
annevk: oh indeed

[03:29:23.0000] <mounir_>
annevk: you can no longer call me "old man" \o/

[03:30:57.0000] <jgraham>
mounir_: I wouldn't bet on that

[03:31:19.0000] <mounir_>
jgraham: I wouldn't bet that he will stop doing it

[03:33:19.0000] <jgraham>
mounir_: We seem to be in agreement. Suddenly everything seems strange in the world.

[03:35:50.0000] <mathiasbynens>
annevk: oh, look at the date! happy birthday

[03:47:10.0000] <foolip>
annevk: why does parentDocs need to be kept across the async boundary, can't resize be set to true before the async section?

[03:47:27.0000] <foolip>
probably some raciness I'm not seeing

[03:51:35.0000] <foolip>
annevk: missing "a" in "If exitDocs's first document has browsing context container"

[04:32:58.0000] <annevk>
foolip: oh, we could do that the other way around

[04:33:14.0000] <annevk>
foolip: didn't really think about that

[07:17:10.0000] <smaug____>
TabAtkins: could you perhaps file a bug to get chrome too to warn about use of sync xhr ?

[07:20:34.0000] <TabAtkins>
Sure.

[07:20:58.0000] <TabAtkins>
Firefox warns; doors anyone else?

[07:21:45.0000] <Ms2ger>
Doors?

[08:02:45.0000] <TabAtkins>
Ms2ger: Bah, phone keyboards.

[09:21:02.0000] <Hixie>
zcorpan: isn't that just going to result in a bunch of slow-loading pages? i thought the whole point here was to carefully design the feature so that it could be pre-loaded.

[13:16:07.0000] <Hixie>
can someone load http://www.hixie.ch/tests/adhoc/html/video/001.html in a recent IE and tell me how noisy it gets? :-)

[13:34:27.0000] <Hixie>
GPHemsley: dude someone cut off the corner of the file in the icon for mimesniff :-P

[13:34:42.0000] <Hixie>
GPHemsley: either that, or they folded it backwards from the usual way it's folded :-P

[13:40:38.0000] <miketaylr>
Hixie: this is what i see in my vmware/IE11 https://cloudup.com/cTF_o3DUg-8

[13:42:00.0000] <Hixie>
wow

[13:42:01.0000] <Hixie>
thanks

[13:42:36.0000] <Hixie>
miketaylr: can you check what version of IE11 that is?

[13:42:42.0000] <Hixie>
newer or older than v11.0.7 ?

[13:42:45.0000] <miketaylr>
one sec

[13:43:12.0000] <miketaylr>
Hixie: https://cloudup.com/cdicl-Y0S0h

[13:43:26.0000] <miketaylr>
(sorry, can't select the version to just paste in here)

[13:43:41.0000] <miketaylr>
so i guess newer

[13:44:50.0000] <Hixie>
weird

[13:44:51.0000] <Hixie>
thanks!

[13:45:46.0000] <Hixie>
(https://www.w3.org/Bugs/Public/show_bug.cgi?id=11984)

[13:47:25.0000] <Hixie>
GPHemsley: i'm going to be using the "rules for sniffing audio and video specifically", fyi

[14:32:11.0000] <Hixie>
annevk: http://dom.spec.whatwg.org/#dom-document-createevent points to https://dvcs.w3.org/hg/d4e/raw-file/tip/source_respec.htm for UIEvent but that spec doesn't seem to define it

[14:32:15.0000] <Hixie>
annevk: what's the story with that?

[14:58:46.0000] <Hixie>
zcorpan: btw you have a dangling <code>srcset</code>

[15:11:04.0000] <Hixie>
is there a quick trick for replacing an element with its children, in JS/DOM? or do i just have to do it manually

[15:35:19.0000] <gsnedders>
Hixie: how evil? el.outerHTML = el.innerHTML should work, no?

[15:35:30.0000] <Hixie>
that makes scripts re-execute

[15:35:40.0000] <Hixie>
i went with just making a docfrag of the contents, then doing a replacechild()

[15:35:52.0000] <gsnedders>
yeah, if you have scripts don't think you can do better

[15:41:40.0000] <Hixie>
wtf

[15:42:11.0000] <Hixie>
http://www.buzzsugar.com/ uses <article>, <time>, <header>, <nav>, and all kinds of other newfangled features

[15:42:18.0000] <Hixie>
but they can't use <h1>-<h6>?!

[15:53:02.0000] <gsnedders>
wat

[15:53:06.0000] <gsnedders>
"can't"?

[15:53:18.0000] <Hixie>
apparently

[15:53:29.0000] <Hixie>
there isn't a single heading on that page

[15:53:41.0000] <Hixie>
it has an elaborate outline, but no headings

[15:54:22.0000] <gsnedders>
Maybe you should try using the Elaborate Description of the Outlining Algorithm?

[15:54:33.0000] <gsnedders>
I think it's in Appendix E?


2014-08-02
[17:24:15.0000] <GPHemsley>
Hixie: It's a punchcard, silly. :-P

[17:24:33.0000] <GPHemsley>
(Best I've got)

[17:24:49.0000] <GPHemsley>
(either that or a memory card)

[23:13:41.0000] <zcorpan>
Hixie: i think usually the mq can be evaluated in the preloader

[11:49:40.0000] <annevk>
Hixie: UI Events should be the spec that defines all things user interaction events

[11:50:03.0000] <annevk>
Hixie: however, the editors keep trying to make it into some kind of delta-mess with DOM Level 3 Events defining parts of it

[12:37:42.0000] <zcorpan>
TabAtkins: your color post is intredasting

[12:38:41.0000] <TabAtkins>
That's "interesting" for dads, right?

[12:39:30.0000] <TabAtkins>
Hixie: Supporting what zcorpan said, the spec defines a set of MQs that can always be safely evaluated in the preloader. Browsers may be able to support more, but it's not required.

[12:41:44.0000] <zcorpan>
TabAtkins: even those can't always be evaluated. e.g. you might be in an iframe that hasn't been laid out yet

[12:41:57.0000] <TabAtkins>
Oh yeah, true.


2014-08-03
[19:59:38.0000] <ulipo1991>
hi all

[14:27:23.0000] <foolip>
TabAtkins: I liiked your color post as well, thanks for sharing!

[14:32:11.0000] <TabAtkins>
Welcome, I'm glad it was useful to someone else!  I've only seen an explanation of that phenomenon *once*, which is surprising, because it makes perfect sense.

[14:32:21.0000] <TabAtkins>
Maybe most people just never thought to wonder where purple comes from?

[14:33:20.0000] <jgraham>
I suspect people just feel like it's supposed to be "obvious" so it's a bit embarassing to ask

[14:39:18.0000] <TabAtkins>
True. I never knew *how* to ask it for the longest time, which was also part of the problem.

[14:39:34.0000] <TabAtkins>
Just saying "why is the spectrum a line but the hue circle a circle" is confusing.


2014-08-04
[21:12:16.0000] <zcorpan>
/me back from vacation

[21:30:04.0000] <MikeSmith>
zcorpan: time for you to get back to writing some w3cmemes

[21:30:27.0000] <zcorpan>
yeah man

[21:35:40.0000] <zewt>
well, that's awesome: system crashed and firefox completely lost my session

[21:38:50.0000] <zewt>
wow, it just uses a text file with json, not sqlite

[21:40:11.0000] <SamB>
what, you wanted an sqlite DB with JSON?

[21:40:28.0000] <zewt>
better than a raw file for important user data

[21:53:41.0000] <roc>
performance of JSON is much better

[21:53:46.0000] <roc>
and I suspect robustness is too

[21:53:57.0000] <roc>
overall

[21:54:19.0000] <SamB>
well, robustness would be more better either way if FF told you when the disk was full ;-P

[22:06:29.0000] <zewt>
json has zero robustness since it's a text format, not a data storage system

[22:06:51.0000] <zewt>
sqlite's journalling would probably have prevented me ending up with a nulled out session and having to dig out an old backup

[22:17:02.0000] <SamB>
zewt: yes, but it'd probably be missing random tabs or pages or something

[22:17:33.0000] <SamB>
depending on the cause of the problem

[22:20:32.0000] <zewt>
... no, it wouldn't ...

[22:21:08.0000] <SamB>
well if you ran out of storage it likely would

[22:21:18.0000] <SamB>
at least that's what happens to my history

[22:21:21.0000] <zewt>
if you ran out of storage sqlite would throw an error and nothing would be changed

[22:21:50.0000] <zewt>
but they're just doing ad hoc writing to a file so who knows what happens

[00:28:47.0000] <JakeA>
Domenic: If I wanted to pipe a response into a cache and the browser (for rendering), how can I do that without the whole response ending up in memory?

[00:29:21.0000] <Domenic>
JakeA: in that case if you tee and then pipe both ends of the tee into places immediately, the data will just flow through

[00:29:37.0000] <JakeA>
Domenic: cool, that's what I thought

[00:29:38.0000] <Domenic>
JakeA: the problematic case is teeing and then piping only one end

[00:29:44.0000] <Domenic>
sorry I still haven't had time to process your reply

[00:29:58.0000] <Domenic>
Working on a talk I'll be giving in ... 7 hours? :P

[00:30:08.0000] <JakeA>
NOT ACCEPTABLE

[00:30:22.0000] <JakeA>
Domenic: no worries! I'm only just replying to that thread myself

[00:30:30.0000] <JakeA>
Good luck with the talk

[00:30:34.0000] <Domenic>
:) thanks

[00:40:01.0000] <Domenic>
JakeA: what do you mean by a transaction story that works for both IDB and fetchstore

[00:40:29.0000] <Domenic>
JakeA: my point was that .batch() is a better primitive to build anything more complicated on top of. For *both* APIs

[00:41:00.0000] <Domenic>
JakeA: the only thing I could think of that works for both would be some kind of strange global variable that is "in a transaction", that IDB and fetchstore both consult

[00:41:02.0000] <JakeA>
Domenic: slightlyoff was talking about a way to have the same story for both, rather than something cache specific. Maybe even something that can be a single transaction across both

[00:41:29.0000] <Domenic>
Bleh, I will try taking things up with him then

[00:41:53.0000] <JakeA>
Yeah, I like .batch, but happy to keep it as an algorithm for the sake of getting cache out of the door

[00:42:03.0000] <Domenic>
That is totally fair

[00:42:12.0000] <Domenic>
But I want to convince him that it is the correct primitive :)

[00:42:20.0000] <JakeA>
Domenic: Go for it :D

[00:42:30.0000] <Domenic>
Or hear what his thoughts are for something else, if there are concrete ideas

[00:43:09.0000] <JakeA>
Domenic: Just to confirm, if the active consumer of a stream errors/dies, something consuming the tee of the original stream is unaffected right?

[00:43:20.0000] <Domenic>
JakeA: right

[00:43:31.0000] <JakeA>
cool

[00:49:43.0000] <JakeA>
Domenic: Thinking of adding response.clone() and request.clone() rather than doing any implicit teeing. How does that sound?

[00:50:01.0000] <Domenic>
JakeA: I think I like it, but kind of want to read through the thread first

[00:50:21.0000] <JakeA>
No worries, don't worry about it until after your talk

[00:50:27.0000] <Domenic>
Seems related to "structured cloning of streams" discussion I kinda-started a while ago

[01:13:40.0000] <annevk>
Why are we changing the design of responses and requests?

[01:17:05.0000] <JakeA>
annevk: looking for ways to allow a response to have multiple consumers without adding magic

[01:17:12.0000] <JakeA>
(or indeed, a request)

[01:18:48.0000] <JakeA>
Domenic: if I tee a stream, can I read it without the original stream being read? If a teed (or original) stream isn't read, and data builds up in memory, what's expected to happen when memory runs out? All active streams fail?

[01:20:15.0000] <JakeA>
annevk: The use cases are, read a response as two types, send a response to cache & browser, read a request's body before deciding whether to fetch it or not

[01:20:42.0000] <annevk>
note that there is some tee'ing going on already per algorithms in Fetch

[01:21:31.0000] <annevk>
e.g. because of redirects a request can be tee'd several times

[01:25:14.0000] <JakeA>
good point

[01:25:14.0000] <annevk>
and at least once

[01:25:20.0000] <JakeA>
annevk: So .clone() would give that to the user. We'll be able to explain it in terms of new Response & a teed stream, but I think we need it sooner than streams

[01:25:22.0000] <annevk>
JakeA: why .clone() and not structured clone?

[01:25:22.0000] <annevk>
we want structured clones

[01:25:23.0000] <annevk>
and maybe structured clones need an API

[01:25:23.0000] <JakeA>
annevk: What's the API… aha

[01:26:43.0000] <JakeA>
annevk: so there isn't a way to structured-clone with script (aside from going back & forth between a dedicated worker I suppose)

[01:26:57.0000] <JakeA>
annevk: In fact, is there a sync way to create a structured clone?

[01:26:59.0000] <annevk>
you can always do window.postMessage

[01:27:13.0000] <annevk>
I don't think there's a synchronous API at this point

[01:27:38.0000] <annevk>
although there's a couple of spec algorithms that do it

[01:29:22.0000] <JakeA>
annevk: so, can we have .clone() that returns a structured clone, or are you thinking more window.createStructuredClone(obj);

[01:29:51.0000] <annevk>
the latter, something TC39-designed

[01:30:17.0000] <annevk>
e.g. you can clone `{ data: obj }` too

[01:30:18.0000] <JakeA>
/me plays Oh Fortuna

[01:31:34.0000] <annevk>
there's several open issues on this

[01:31:41.0000] <annevk>
including a big red note in Fetch

[01:32:26.0000] <JakeA>
annevk: You mean https://github.com/slightlyoff/ServiceWorker/issues/313?

[01:33:32.0000] <Domenic>
It would be good if structure clone were async

[01:33:50.0000] <Domenic>
I can't remember why off the top of my head but IIRC it enabled some scenarios

[01:35:11.0000] <Domenic>
JakeA: the way to think of teeing is you have created two new streams which are hooked up to the original stream. So when you read from one of the new streams, it pulls from the original stream into both new streams. The one you are reading from then gets the data handed to the user, but the other one just gets the data sitting there in the queue.

[01:35:38.0000] <Domenic>
If memory runs out ... usual platform OOM behavior, I suppose? Which is pretty undefined IIRC?

[01:35:43.0000] <annevk>
JakeA: yup

[01:36:09.0000] <annevk>
OOM is undefined

[01:36:24.0000] <annevk>
There was a thread recently about defining stack limits

[01:36:49.0000] <Domenic>
You could also imagine the platform swapping out all the data to disk and letting you read it later... the details are hidden enough that this is possible. I wouldn't want to write such a tee-with-disk-intermediating myself, but it could be done.

[01:37:35.0000] <Domenic>
You'd want to avoid that if possible though. Ideally you want .read() to translate straight into a syscall, and the more layers of teeing and caching you add in between, the less likely that is.

[01:38:19.0000] <JakeA>
Domenic: in your example there, were you thinking of two calls to tee? Otherwise I'm not sure where the *two* new streams come from

[01:38:43.0000] <Domenic>
JakeA: a tee is meant to create two new streams from the original, thus the "T" shape

[01:38:48.0000] <Domenic>
or "Y" shape

[01:39:00.0000] <Domenic>
one stream goes in, gets consumed, two unconsumed streams come out

[01:39:22.0000] <Domenic>
well, "consumed" isn't quite right, we don't wait for you to read to the end

[01:39:41.0000] <JakeA>
Got it

[01:40:38.0000] <JakeA>
I guess that makes request.clone() either weird or all the more useful. It'd have to replace its own stream with one part of the tee

[01:41:17.0000] <JakeA>
starting to understand the issues around structured cloning and streams

[01:41:51.0000] <Domenic>
hmm

[01:42:08.0000] <annevk>
Domenic: is there an explanation somewhere of why an IO stream needs to have both readable and writeable parts?

[01:42:42.0000] <annevk>
Domenic: e.g. why it can't be more like the simplest asynchronous iterable object you can imagine (that has both push and async read)

[01:42:56.0000] <Domenic>
annevk: not sure exactly what you mean... a stream is either readable (someone else controls data production) or writable (someone else controls consumption of data you put in it)

[01:43:37.0000] <annevk>
Domenic: why can't it be more like a promise, where that can be the case, but you can also control both ends

[01:44:19.0000] <Domenic>
annevk: a readable stream is much like a promise. (And a writable stream, in reverse.) But the creator controls one end, and does not give the ability to others via the public API

[01:44:52.0000] <Domenic>
a readable stream is only readable, although its creator says how to get the data that consumers read from it

[01:45:32.0000] <Domenic>
you could imagine a stream API that leaves both ends open for people to shove data through, but that has some ergonomic issues:

[01:45:55.0000] <Domenic>
instead of writing e.g. "when someone writes data to me, put it in the file descriptor," you have to continually be reading from the output end, and then putting the results of what you read into the file descriptor

[01:47:38.0000] <annevk>
I guess it's needed for perf, but it seems weird that we're focused that much on current low-level implementation details, rather than what is the best abstraction for what we want.

[01:47:45.0000] <Domenic>
It's not really perf, it's ergonomics

[01:49:07.0000] <annevk>
If read returns a promise, you don't have to continuously read for instance

[01:49:23.0000] <Domenic>
You have to recurse at the very least

[01:49:28.0000] <Domenic>
But hmm

[01:49:30.0000] <annevk>
It would just fulfill with the next chunk or error

[01:50:00.0000] <Domenic>
I am starting to do perf benchmarks and it is possible promise-returning read() might make a comeback if those show non-failure

[01:50:06.0000] <annevk>
Yes, and with recursion you get nice ergonomics. Especially with synchronous notation

[01:50:45.0000] <annevk>
Sounds good

[01:54:06.0000] <JakeA>
Domenic: if I tee a stream but don't read either of the tees, is the original stream consumed or does it wait for the first read on one of the tees?

[01:54:40.0000] <Domenic>
JakeA: it waits. Although trying to read from it would race with the tee mechanism, which is also trying to read from it

[01:55:21.0000] <JakeA>
yeah, was just trying to work out when it starts filling memory. Got it.

[01:55:42.0000] <Domenic>
I am looking forward to thinking harder about how to implement clone() ... clearly it is not quite the same as teeing

[02:07:12.0000] <JakeA>
Domenic: can it be explained with a tee and taking one part of the tee for itself?

[02:16:50.0000] <Domenic>
JakeA: seems weird. maybe possible, but i think i'd use something slightly different than a tee...

[02:29:03.0000] <JakeA>
annevk: In https://github.com/slightlyoff/ServiceWorker/issues/398, what's the difference between "use a local file if available" and "conditional request", does the former not care about freshness?

[02:57:22.0000] <annevk>
JakeA: maybe, not sure; I'm not that familiar with cache implementations and what options they have

[02:57:49.0000] <annevk>
JakeA: I can imagine if you're offline you might decide to not care about freshness

[03:00:16.0000] <Ms2ger>
annevk, r? https://github.com/w3c/web-platform-tests/pull/1131

[03:00:34.0000] <JakeA>
annevk: fair enough, we do that in Chrome (behind a flag, I think)

[03:03:02.0000] <annevk>
Ms2ger: should I merge it after I reviewed it?

[03:03:27.0000] <Ms2ger>
Either way

[03:04:22.0000] <annevk>
Ms2ger: bit surprised the critic bot didn't post anything back

[03:56:09.0000] <JakeA>
annevk: thought… do we need to make fetch('//other-origin/whatever', {mode: 'no-cors'}) revalidate against the server? Else, if I get a response back, and navigator.offLine == true, we're exposing the user's history

[03:56:49.0000] <JakeA>
annevk: more so if the developer can go to the cache despite the cached entry being stale

[04:05:28.0000] <annevk>
JakeA: can't you probe that already with <img>?

[04:05:48.0000] <annevk>
JakeA: agreed that with the cache settings stuff, if we add that for v1, we'll need to carefully consider privacy

[04:06:16.0000] <JakeA>
annevk: for images, yeah. Scripts too I guess.

[04:06:34.0000] <JakeA>
annevk: hmm, maybe anything with iframes

[04:09:23.0000] <tobie>
Boy, SW issue 372 is now officially all over the place.

[04:09:25.0000] <JakeA>
yeah, ok, iframes too. Not a new problem then.

[04:10:05.0000] <JakeA>
tobie: is it? Felt like it was zoning in.

[04:12:27.0000] <tobie>
JakeA: well, you need to be familiar with Stream API status, teeing, stream cloning, advantages of async structured cloning over sync one, future tc39 plans for structured cloning, transactional requests in indexedDB, etc.

[04:13:47.0000] <tobie>
Did I mention request had a stream too? How that interact at the SW level just blew my mind.

[04:14:49.0000] <JakeA>
when you submit a form (with a mixture of files and form fields) that's a body stream that's sent to the server

[04:15:18.0000] <tobie>
Of course. Makes complete sense. It's just. Woah.

[04:15:29.0000] <JakeA>
yeah, it goes all the way down

[04:21:29.0000] <tobie>
JakeA: why does cache.addAll deplete a request's body stream? Do we cache non GET requests or does fetch send body of GET requests?

[04:21:41.0000] <tobie>
(asking for a friend)

[04:22:05.0000] <tobie>
;)

[04:22:31.0000] <JakeA>
tobie: bloody good point. No, it rejects with non-GET requests, so it's a non-issue

[04:23:44.0000] <JakeA>
updated

[04:23:54.0000] <tobie>
JakeA: how are GET requests with a body handled though?

[04:24:08.0000] <tobie>
Wasn't it you writing recently about how these were a thing?

[04:26:12.0000] <JakeA>
not that I know of. annevk, should we throw if a GET request is constructed with a body?

[04:26:23.0000] <annevk>
Domenic: so btw, the read-write distinction for streams is problematic for Request and potentially Response objects btw

[04:26:48.0000] <annevk>
Domenic: nobody had a good answer there so far and we plan on shipping this end of Q3...

[04:27:10.0000] <annevk>
JakeA: hmm, might not be handled specifically at the moment

[04:27:21.0000] <annevk>
JakeA: XMLHttpRequest ignores the body for GET/HEAD

[05:20:51.0000] <JakeA>
annevk: if we're not throwing for headers, we shouldn't throw for body I guess

[05:22:19.0000] <annevk>
I guess I should try to handle this in Fetch itself so we don't have to reinvent it for each API

[05:22:36.0000] <JakeA>
agreed

[05:22:45.0000] <annevk>
JakeA: there's also https://github.com/slightlyoff/ServiceWorker/issues/120 I just noticed

[05:23:19.0000] <annevk>
JakeA: maybe willchan & co should look at that

[05:23:39.0000] <JakeA>
annevk: Yeah, I don't have strong feelings there

[05:45:19.0000] <annevk>
Declares us-ascii, expects windows-1252; nice find zcorpan! http://futbolenlatele.com/

[05:45:33.0000] <zcorpan>
np

[05:46:15.0000] <zcorpan>
found it while eating my lunch :-)

[05:49:17.0000] <zcorpan>
"there are no pages doing X" is basically always false on the web

[05:50:04.0000] <jgraham>
/me wonders if that will fit in the topic :)

[05:51:36.0000] <annevk>
fits in a tweet

[05:52:35.0000] <zcorpan>
Hixie: &ndash; works with the new pipeline i take it?

[07:09:45.0000] <zcorpan>
https://www.w3.org/Bugs/Public/show_bug.cgi?id=9785#c10 - no pages doing X for X = moznofilter :-)

[07:30:07.0000] <zcorpan>
Hixie: ok if i close srcset bugs that are fixed by <picture>?

[07:31:00.0000] <annevk>
zcorpan: at least some time ago it was fine to close bugs given solid rationale

[07:44:09.0000] <zcorpan>
MikeSmith: do you have opinions on https://www.w3.org/Bugs/Public/show_bug.cgi?id=25552 ?

[08:17:57.0000] <hemanth>
meow, Object.keys returns an arrayLike object or an array ?

[08:18:02.0000] <hemanth>
specs says array

[08:18:06.0000] <hemanth>
but...

[08:18:22.0000] <hemanth>
>> obj =  {x:1,y:2}; for (k in Object.keys(obj)) {console.log(k)}

[08:18:40.0000] <hemanth>
gives '0', '1'

[08:19:08.0000] <hemanth>
indices

[08:21:00.0000] <caitp>
Object.getPrototypeOf(Object.keys(...)) === []

[08:22:31.0000] <Ms2ger`>
What else?

[08:23:28.0000] <caitp>
Array.isArray(Object.keys(...)) === true ?

[08:23:31.0000] <caitp>
etc :c

[08:23:55.0000] <caitp>
Object.prototype.toString(Object.keys(...)) === [object Array]?

[08:24:04.0000] <caitp>
+ missing `.call`

[08:25:42.0000] <hemanth>
heh heh my bad, Enumeration VS Iteration

[08:30:45.0000] <caitp>
yes, it won't behave the same as for-of

[08:31:03.0000] <hemanth>
hrrm

[08:34:16.0000] <hemanth>
there must be a deprecated 'for each...in' as well ;)

[08:34:56.0000] <Ms2ger>
There is

[08:35:09.0000] <Ms2ger>
Thanks to E4X

[08:36:29.0000] <caitp>
and for-of will confuse people in other ways too, we don't know how to spec consistent languages

[08:36:30.0000] <hemanth>
heh heh

[08:41:59.0000] <hemanth>
I would stick for forEach for array and for-of for generator objects and for-in for the rest...

[09:39:04.0000] <JakeA>
annevk: ahh, so is https://github.com/slightlyoff/ServiceWorker/issues/398#issuecomment-51081392 correct, "conditional" mean must-revaidate?

[09:39:06.0000] <JakeA>
means&

[09:39:22.0000] <JakeA>
means**

[09:39:24.0000] <JakeA>
means*

[09:39:30.0000] <JakeA>
there, fixed.

[09:44:29.0000] <annevk>
JakeA: oh, yes, conditional goes via a server

[09:52:51.0000] <JakeA>
Riiiiiiight. I'd gotten confused. I thought "available" meant something other than "fresh"

[11:08:31.0000] <Hixie>
zcorpan: if they're assigned to me, comment on them first so i can check them out

[11:24:07.0000] <Hixie>
"There is no way to represent a promise value in IDL"

[11:24:11.0000] <Hixie>
what's a "promise value"?

[12:45:26.0000] <Domenic>
annevk: whatever form it takes it will almost certainly be { input, output }

[12:45:54.0000] <annevk>
Domenic: a class that has both input and output?

[12:46:06.0000] <annevk>
Domenic: because a plain object is unlikely to fly by Adam Barth

[12:47:23.0000] <Domenic>
annevk: not sure which yet. mostly a convention.

[12:48:31.0000] <Domenic>
annevk: but yes, something like var { input, output } = new PassThroughStream() seems reasonable.

[12:48:51.0000] <Domenic>
this comes back to my confusion as to how to "bootstrap" a two-ended stream

[12:49:33.0000] <Domenic>
if a PassThroughStream is composed of a { WritableStream input, ReadableStream output }, then WritableStream and ReadableStream should have constructors

[12:50:03.0000] <Domenic>
But kind of the whole point of PassThroughStream is that you should be able to use it to create either end, without creating them separately....

[12:50:33.0000] <Domenic>
meh, it's solvable

[12:51:08.0000] <Domenic>
just need to get these damn benchmarks finished

[12:51:18.0000] <Domenic>
then the potential simplifications can begin

[13:30:18.0000] <smaug____>
does chrome warn about use of some deprecated features ?

[13:33:23.0000] <caitp>
yes

[13:38:57.0000] <smaug____>
caitp: which features for example?

[13:39:07.0000] <smaug____>
Hmm, looks like MutationEvent usage has dropped

[13:39:48.0000] <caitp>
someone filed a bug on angular about browsers (including chrome) complaining about touching Event.returnValue some time ago

[13:39:56.0000] <caitp>
so that would be one

[13:40:17.0000] <smaug____>
caitp: I guess it just doesn't warn about mutation events

[13:40:20.0000] <smaug____>
nor sync XHR

[13:40:34.0000] <caitp>
i'm not sure if synchronous XHR is properly deprecated in chromium yet

[13:40:42.0000] <caitp>
tyoshino would probably know

[13:41:17.0000] <caitp>
if there was an intent to deprecate thread for that, I missed that one

[13:41:21.0000] <SamB>
hmm, is it that complicated that it needs deprecating in a technical sense?

[13:42:01.0000] <SamB>
rather than just a "hey dumbass, don't block your script on that; it's bad for UX"

[13:42:30.0000] <smaug____>
caitp: it is deprecated in the spec

[13:42:41.0000] <smaug____>
all the browser vendors agreed about that

[13:42:42.0000] <caitp>
yes, but not necessarily in browsers

[13:43:07.0000] <caitp>
IE a browser doesn't necessarily warn you, there aren't necessarily plans to remove the feature yet

[13:43:57.0000] <SamB>
oh, that reminds me about trigraphs

[13:44:08.0000] <smaug____>
well, in Gecko the plan is to "remove-when-the-usage-low-enough-and-warn-until-then"

[13:45:24.0000] <caitp>
that's a reasonable approach :>

[14:06:53.0000] <zcorpan>
Hixie: comment and close at the same time ok? or just comment?

[14:11:53.0000] <jarek>
Hi

[14:12:07.0000] <jarek>
which spec covers the data binding functionality from Polymer?

[14:12:38.0000] <jarek>
the template spec is said to be moved to HTML5 spec, but I can't find any mention of data binding there

[14:13:18.0000] <Hixie>
zcorpan: comment, if you comment and close i won't see it for months (i only read my bugmail ~annually)

[14:13:34.0000] <Hixie>
jarek: there is no spec that covers data binding

[14:13:40.0000] <Hixie>
to my knowledge

[14:14:39.0000] <zcorpan>
k

[14:15:13.0000] <jarek>
so the stuff described here is completely non-standard? http://www.polymer-project.org/docs/polymer/databinding.html

[14:15:28.0000] <jarek>
is there any chance that Mozilla will implement it?

[14:20:04.0000] <Hixie>
jarek: yes, that is currently non-standard.

[14:20:33.0000] <Hixie>
jarek: no idea what mozilla's plans are, but if two browsers implement this, then it's a de facto standard

[14:31:04.0000] <Domenic>
chrome does not implement it either

[14:31:07.0000] <Domenic>
it is just a library

[14:31:14.0000] <Domenic>
produced by the same company that produces chrome

[14:31:16.0000] <Domenic>
jarek ^

[14:31:20.0000] <smaug____>
and there isn't any spec for that data binding

[14:35:14.0000] <jarek>
every Web Components talk by Google I have seen was actually discussing Polymer

[14:36:46.0000] <jarek>
I thought it was just a shim like e.g. Traceur

[14:37:22.0000] <caitp>
it's sort of a mix

[14:38:38.0000] <caitp>
polyfills for custom elements/html imports/etc, as well as a library of components and some syntax for simplifying the creation of components + databinding

[15:07:46.0000] <caitp>
i dunno hixie, I think the arguments against the behaviour of constraint validation have been pretty well reasoned --- and not limited to my own criticisms of it. it's just not how people expect it to behave

[15:08:07.0000] <Hixie>
i don't understand the problem

[15:08:11.0000] <Hixie>
i mean, i really don't

[15:08:24.0000] <Hixie>
valueMissing tells you if the value is missing

[15:08:31.0000] <Hixie>
badInput tells you if the user has entered bad input

[15:08:41.0000] <Hixie>
that seems to me to cover all the bases

[15:08:44.0000] <Hixie>
what am i missing

[15:09:50.0000] <caitp>
that's basically it, but it's just more complicated than it really needs to be, there are things which are sort of misnomers (like [novalidate]), there's a lot of stuff there that really confuses users

[15:10:44.0000] <Hixie>
sounds like you're talking about more than just that bug

[15:11:10.0000] <Hixie>
if there's other things that need fixing, then please do file bugs (but bear in mind that if people depend on it, it's too late to change, you should have complained earlier when we asked for feedback!)

[15:11:19.0000] <caitp>
well, [novalidate] isn't related to the valueMissing issue, but it's in the same family of things which are not very intuitive to users

[15:14:00.0000] <Hixie>
that's fine, but then file a new bug :-)

[15:14:23.0000] <Hixie>
i thought you were talking about the bug i commented on

[15:32:17.0000] <Hixie>
TabAtkins: in css-font-loading - "unloaded" sounds very much like something that used to be loaded but is no longer loaded

[15:32:24.0000] <Hixie>
TabAtkins: consider e.g. onunload, onbeforeunload, etc.

[15:32:33.0000] <TabAtkins>
Hm, true.

[15:33:14.0000] <Hixie>
TabAtkins: i don't have a much better term, but fwiw the media stuff uses "none"

[15:34:03.0000] <Hixie>
other terms i've used include "empty", "idle", "nothing"

[15:35:12.0000] <Hixie>
TabAtkins: also it's more common to use readyState than status, fwiw.

[15:36:24.0000] <Hixie>
since i'm giving feedback, some more notes:

[15:36:39.0000] <Hixie>
i recommend against using ES-style [[Foo]] syntax, it is hard to read

[15:36:42.0000] <TabAtkins>
Hm.  Unsure if I can change a property name, but I might try.  I'll put up a message for it, at least.

[15:36:57.0000] <TabAtkins>
Yeah, not super happy about that either. I want something to indicate "internal" properties, though.

[15:37:18.0000] <TabAtkins>
(It's super-inconvenient to type, since it collides with Bikeshed's shorthands.)

[15:37:22.0000] <Hixie>
just say "FontFace objects have an internal font status promise, which..."

[15:37:32.0000] <Hixie>
where "font status promise" is <dfn>ed

[15:38:10.0000] <Hixie>
what's a Promise<boolean>? Aren't you really just promising a void? I mean, you'll never resolve to false, will you?

[15:38:23.0000] <Hixie>
i'd probably do a Promise<FontFace>, like load()

[15:38:30.0000] <Hixie>
(for loaded)

[15:39:22.0000] <Hixie>
not sure what "... of which one is not null and the rest are null." means. There's two things. One is null and the other not? What's the one that isn't null set to?

[15:39:53.0000] <TabAtkins>
Actually, that's an IDL error (Promise<boolean>).  The promise it refers to resolves to the FontFace.

[15:40:56.0000] <TabAtkins>
"rest are null". Yeah, just two things. (Maybe there were more before, and this language is a remnant? I forget.)  The one that isn't null gets set by the constructor.

[15:43:31.0000] <Hixie>
other than that, looks ok. I'm not sure about the whole Set thing, that looks a bit overcomplicated, but I assume that's just waiting for WebIDL to catch up.

[15:43:47.0000] <Domenic>
Can workers (service workers in particular) access WebRTC?

[15:45:07.0000] <Hixie>
Domenic: i don't think they've made that work yet, but long term i'm not aware of a reason that shouldn't work

[15:45:48.0000] <Domenic>
Ya that's kind of what I expected. Curious if there was a reason not; heartened that you don't think there is such a reason.

[15:47:12.0000] <TabAtkins>
Hixie: Yeah, the Set mimicry is me waiting for IDL to have something that'll do it for me.  I had a [SetClass] attribute previously, but heycam ended up not wanting to spec that yet.

[15:47:28.0000] <TabAtkins>
I think we're waiting for JS to actually define a subclassable Set/Map/etc.

[15:48:29.0000] <TabAtkins>
(Right now, you simple can't subclass them properly.  Either you have to manually copy methods (and thus don't get new methods added by future specs or by authors), or you aren't able to enforce any constraints (because authors can modify it via the core Map/Set methods instead, bypassing whatever restrictions you've added).

[15:48:33.0000] <TabAtkins>
)

[15:52:40.0000] <Hixie>
sounds like the mess we had (have?) with Array

[15:55:16.0000] <TabAtkins>
Yup.

[15:55:35.0000] <TabAtkins>
Except it's even less explicable, because you don't even need a Proxy to get it right.

[15:57:02.0000] <gsnedders>
why didn't it get it right for Set/Map/etc. first time?

[15:57:22.0000] <caitp>
if MySpecialSet has its own special 'add' method to enforce constraints, who is to stop me from invoking Set.prototype.add.call(mySpecialSet, value) and bypass any constraints anyways?

[16:20:07.0000] <Domenic>
Saying that it's "right" for a subclass to impose more restrictions than its superclass is a matter of opinion

[16:20:40.0000] <Domenic>
http://en.wikipedia.org/wiki/Liskov_substitution_principle etc

[16:22:12.0000] <SamB>
caitp: on that note, I think I'm permanently confused about which is the prototype in prototype-based programming

[16:22:34.0000] <jyasskin_w>
I definitely understand the desire to define a class whose specification "automatically" grows any methods added to Map, say, but which adds certain restrictions onto its values. I wouldn't call that a "subclass", but it'd be worth finding a word for it that doesn't run into LSP complaints.

[16:23:34.0000] <caitp>
instead of this, we implement new NoInterfaceObjects in C++ which inherit from a common base in C++ and extend the behaviour appropriately, without exposing a way to do it in scriptland

[16:23:43.0000] <caitp>
and this makes everybody happy

[16:26:22.0000] <caitp>
except that I guess we aren't even really doing that yet for all of the custom containers

[16:26:51.0000] <Domenic>
One way of doing this would be to divide up the container classes into "core" and "mixin" methods

[16:27:15.0000] <Domenic>
so e.g. .add, .delete, [Symbol.iterator] would be core; .forEach would be mixinable

[16:27:33.0000] <Domenic>
and if we later added e.g. .map it would be mixinable, delegating to [Symbol.iterator]

[16:27:46.0000] <caitp>
but you don't want to use core .add, you want to impose restrictions on what can be added to your magic collection

[16:27:54.0000] <Domenic>
that way you can do Object.define(MyMap, MapMixins) as long as MyMap implements the core interface

[16:27:58.0000] <Domenic>
yes

[16:28:07.0000] <Domenic>
you implement your own .add etc.; you don't subclass Map

[16:28:15.0000] <Domenic>
then you mixin MapMixins to get all the non-core methods

[16:28:26.0000] <Domenic>
I wonder if this has anything to do with traits

[16:28:44.0000] <caitp>
traits would have been neat, I was sad that didn't make it =(

[16:29:17.0000] <caitp>
[[into harmony]]

[16:29:45.0000] <Domenic>
this looks to be exactly related to traits

[16:29:52.0000] <Domenic>
based on http://soft.vub.ac.be/~tvcutsem/traitsjs/tutorial.html


2014-08-05
[19:19:44.0000] <caitp>
TabAtkins: has there been any mail regarding the :target pseudo-class lately? I don't remember seeing any, but you'd probably be more on top of that?

[19:19:58.0000] <caitp>
as far as I know that should still work, right?

[22:11:48.0000] <zcorpan>
Hixie: so is the current content model ok or should it be "zero or more source elements optionally intermixed with script-supporting elements followed by one img"?

[23:30:19.0000] <zcorpan>
UA string is still race to the bottom. when will it stop? should we standardize on one fixed string?

[23:33:29.0000] <zcorpan>
Hixie: how can i run your pipeline?

[23:48:00.0000] <sangwhan>
If everyone got rid of Mozilla/5.0 in their UA string that would probably save enough bytes transmitted to give one small country free internet

[23:54:11.0000] <roc>
it sure would, because the entire Web would shut down

[00:10:02.0000] <zcorpan>
/me notices annevk changed "authors" to "developers" in the fetch spec

[00:15:12.0000] <MikeSmith>
author-developers

[00:36:05.0000] <foolip>
Ms2ger: you there?

[00:36:28.0000] <Ms2ger>
foolip, sir!

[00:36:53.0000] <foolip>
Ms2ger: do you have any juicy info on the compat situation with HTMLImageElement.x/y in Gecko?

[00:37:14.0000] <Ms2ger>
We tried removing it, it broke something

[00:37:16.0000] <foolip>
see this thread: https://groups.google.com/a/chromium.org/d/msg/blink-dev/zpLuYu8tmdA/uA_7TQSQDzQJ

[00:37:29.0000] <Ms2ger>
/me looks if he can find the site

[00:37:43.0000] <foolip>
I'm trying to figure out if there's any change to Blink that could bring us closer to agreement between spec and implementations

[00:37:54.0000] <foolip>
these are the relevant Gecko bugs:

[00:38:06.0000] <foolip>
https://bugzilla.mozilla.org/show_bug.cgi?id=98292

[00:38:10.0000] <foolip>
https://bugzilla.mozilla.org/show_bug.cgi?id=116843

[00:38:17.0000] <foolip>
https://bugzilla.mozilla.org/show_bug.cgi?id=587021

[00:39:04.0000] <foolip>
https://bugzilla.mozilla.org/show_bug.cgi?id=731832 too

[00:39:40.0000] <Ms2ger>
Yep, 731832 was the one that made us back it out

[00:40:18.0000] <foolip>
http://web.archive.org/web/20120107051245/http://www.crownhill.com/ looks modern :)

[00:40:50.0000] <Ms2ger>
Yep, that's the one

[00:41:13.0000] <Ms2ger>
Code that used it in http://web.archive.org/web/20110807212111/http://www.crownhill.com/buttons_1/xaramenu.js

[00:41:55.0000] <Ms2ger>
"if(NS4)return;"

[00:42:40.0000] <foolip>
if(NS6){if(mal==0){x=event.target.x-bd;y=event.target.y;dx=event.target.offsetWidth;dy=event.target.offsetHeight;} is the relevant bit, no?

[00:42:57.0000] <Ms2ger>
Yep

[00:43:04.0000] <Ms2ger>
/me got distracted

[00:43:10.0000] <foolip>
and ar NS6=(!document.all&&document.getElementById)

[00:43:15.0000] <foolip>
var

[00:43:35.0000] <foolip>
that's some pretty weird logic :)

[00:44:01.0000] <Ms2ger>
If that's the weirdest you've seen... ;)

[00:45:33.0000] <foolip>
what I really wanted to ask is if you can figure out what GetXY() in https://github.com/mozilla/gecko-dev/blob/master/content/html/content/src/HTMLImageElement.cpp actually means

[00:45:50.0000] <foolip>
in my testing it's usually like offsetLeft/offsetTop, but not always

[00:46:29.0000] <foolip>
is this layer thing something that maps to a CSS concept?

[00:46:47.0000] <Ms2ger>
I don't know

[00:47:04.0000] <Ms2ger>
I think roc explained or was going to explain it in the W3C bug to add it to the spec

[00:47:25.0000] <foolip>
ok, I'll see if I can find that bug

[00:47:37.0000] <foolip>
https://www.w3.org/Bugs/Public/show_bug.cgi?id=17844

[00:49:26.0000] <Ms2ger>
Comment 16 there was what I remembered

[00:49:51.0000] <foolip>
I guess that means I should ask roc about the details

[00:50:03.0000] <Ms2ger>
Also https://bugzilla.mozilla.org/show_bug.cgi?id=887660

[00:58:41.0000] <MikeSmith>
hsivonen: Any chance you can re-deploy v.nu and h5.v.nu this week? I fixed a bug that had broken <picture> validation.

[01:03:44.0000] <annevk>
zcorpan: seems to be preferred by some set of people

[01:31:40.0000] <annevk>
JakeA: Googleman, what does "impacts MVP" mean?

[01:32:01.0000] <annevk>
JakeA: oh wait, I know, minimal viable product

[01:32:21.0000] <JakeA>
yeeep

[01:37:19.0000] <tobie>
lean spec writing

[01:37:48.0000] <tobie>
you should do workshops. there's money to be made.

[02:28:41.0000] <hsivonen>
MikeSmith: chances for redeploying this week are good

[02:32:50.0000] <jgraham>
hsivonen: You sound like a magic 8 ball ;)

[02:43:00.0000] <sangwhan>
anyone here with knowledge about gecko's KeyboardEvent implementation?

[02:43:45.0000] <sangwhan>
/me nudges smaug____

[02:51:38.0000] <Ms2ger>
mayasuki

[02:59:56.0000] <smaug____>
sangwhan: pong

[02:59:59.0000] <smaug____>
what about it

[03:00:11.0000] <smaug____>
but yes, masayuki knows it best

[03:00:48.0000] <smaug____>
sangwhan: aren't you even in the same timezone as masayuki

[03:05:18.0000] <sangwhan>
smaug____: except i don't know masayuki. is he here or do i have to find him on irc.moz?

[03:05:49.0000] <zcorpan>
Hixie: fixed https://www.w3.org/Bugs/Public/show_bug.cgi?id=25585 but possibly that section is a bit confused now, and it doesn't cover img srcset, and there's overlap with the Introduction examples

[03:07:14.0000] <sangwhan>
Basically i have this odd test that only passes in gecko: http://tests.sangwhan.com/tests/generated_keyevent.html

[03:07:41.0000] <sangwhan>
Can't decrypt d3e fast enough to figure out if that's correct or not

[03:07:54.0000] <sangwhan>
smaug____: ^

[03:10:09.0000] <MikeSmith>
hsivonen: cool

[03:12:18.0000] <MikeSmith>
sangwhan: masayuki not on #whatwg afaik. not sure if he's on mozilla irc much either. seems like he communicates most through bug comments..

[03:12:19.0000] <smaug____>
sangwhan: in moznet

[03:12:45.0000] <smaug____>
and yes, MikeSmith is right

[03:13:06.0000] <smaug____>
sangwhan: note, as far as I know, only Gecko implements large parts of the spec

[03:14:27.0000] <smaug____>
sangwhan: oh, that test is odd

[03:14:33.0000] <smaug____>
it tests legacy keyCode

[03:14:40.0000] <smaug____>
http://mxr.mozilla.org/mozilla-central/source/dom/webidl/KeyboardEvent.webidl#50

[03:14:55.0000] <smaug____>
which aren't, AFAIK, defined to be in the dictionary by any spec

[03:15:09.0000] <smaug____>
but we had to support them, at least for now

[03:16:03.0000] <sangwhan>
smaug____: yes, it is odd. came from a external source, and i have no idea if it should work or not

[03:16:28.0000] <smaug____>
http://mxr.mozilla.org/mozilla-central/source/dom/webidl/KeyEvent.webidl and http://mxr.mozilla.org/mozilla-central/source/dom/webidl/KeyboardEvent.webidl explain that kind of part of Gecko's behavior

[03:18:21.0000] <MikeSmith>
sangwhan: btw I think they have a telcon every wednesday morning at 9am JST, on #webapps on irs.w3.org, and masayuki usually calls into that

[03:18:23.0000] <smaug____>
Well, spec says only "Legacy keyboard event implementations include three additional attributes, keyCode, charCode, and which."

[03:18:38.0000] <smaug____>
sangwhan: you could file a spec bug to clarify this

[03:31:40.0000] <jgraham>
glwt

[03:34:15.0000] <MikeSmith>
https://twitter.com/ronkorving/status/496582799181094914

[03:34:28.0000] <MikeSmith>
"Why the hell doesn't documentFragment support innerHTML? This is nuts."

[03:36:07.0000] <zcorpan>
foolip = rambo

[03:36:51.0000] <roc>
foolip: what exactly do you need to konw?

[04:05:40.0000] <annevk>
MikeSmith: we tried to define it at one point and got stuck iirc

[04:19:21.0000] <MikeSmith>
annevk: stuck on what, I wonder. maybe there's an open bug

[04:19:30.0000] <MikeSmith>
/me checks

[04:19:58.0000] <annevk>
MikeSmith: there's something about ShadowTree or whatever it is called these days and innerHTML too

[04:20:40.0000] <Ms2ger>
Yeah, there was something

[04:20:46.0000] <Ms2ger>
Broke jQuery, perhaps?

[04:24:04.0000] <MikeSmith>
founs https://www.w3.org/Bugs/Public/show_bug.cgi?id=16904

[05:15:52.0000] <Ms2ger>
zcorpan, r? https://critic.hoppipolla.co.uk/r/2180

[05:18:11.0000] <zcorpan>
Ms2ger: done

[05:18:43.0000] <Ms2ger>
Thanks

[05:19:02.0000] <Ms2ger>
/me merges

[05:35:09.0000] <Domenic>
Why don't we just standardize UA string?

[05:40:17.0000] <jgraham>
The entire world would collapse

[05:40:53.0000] <Ms2ger>
Domenic, there's a reasonable argument that they're useful for statistics on the server side, at least

[05:41:14.0000] <Domenic>
I mean, standardize it to one of the existing ones, not to something sane

[05:41:21.0000] <jgraham>
There's also a reasonable argument that not everything can be feature detected

[05:41:32.0000] <Domenic>
I guess

[05:41:33.0000] <Ms2ger>
Also, people are unlikely to stop having browser-specific code altogether

[05:41:34.0000] <jgraham>
But, more importantly, people *do* use it

[05:41:40.0000] <Domenic>
just seems inevitable

[05:41:52.0000] <jgraham>
And it turns out that changing it breaks sites, really badly

[05:41:55.0000] <Ms2ger>
More likely, they'd use things like var NS6=(!document.all&&document.getElementById)

[06:02:51.0000] <foolip>
roc: I emailed, as you noticed :)

[06:02:52.0000] <foolip>
now I've installed Netscape 4 to see how it originally behaved, since that's what both the initial Gecko and WebKit implementation pointed to

[06:02:52.0000] <foolip>
In case anyone has forgotten, NS4 was awesome

[06:02:53.0000] <Ms2ger>
I wonder if its source code ever escaped

[06:28:06.0000] <annevk>
JakeA: 9AM PDT is what?

[06:28:33.0000] <annevk>
found it

[06:28:35.0000] <Ms2ger>
6pm .nl

[06:28:36.0000] <JakeA>
annevk: 17:00 for me, 18:00 for you I guess

[06:28:45.0000] <annevk>
Ms2ger: .ch

[06:28:47.0000] <Ms2ger>
/me has no idea what .ch is

[06:28:52.0000] <Ms2ger>
Timezone-wise

[06:28:55.0000] <annevk>
Ms2ger: same

[06:29:08.0000] <Ms2ger>
Okay, wasn't sure

[06:36:18.0000] <annevk>
jgraham: you like discussing this stuff: https://www.w3.org/Bugs/Public/show_bug.cgi?id=26405

[06:36:32.0000] <annevk>
/me can't come up with suitable terms that'll stick

[06:38:00.0000] <tobie>
Votes for a URL primitive.

[06:38:35.0000] <tobie>
^ that would make parsing JS SOOOO much fun.

[06:44:31.0000] <annevk>
I'm not sure what you mean tobie, but that doesn't seem to relate to that bug

[06:47:20.0000] <tobie>
annevk: never mind me. I very often forget to add quotes around urls when writing JavaScript.

[06:48:09.0000] <tobie>
annevk: …which makes me think it would be kind of neat if the language of the Web supported URL primitives.

[06:48:57.0000] <annevk>
url`http://....` could be something I suppose

[06:49:10.0000] <annevk>
Not sure what the latest is on those kind of strings

[06:49:52.0000] <tobie>
Yeah. The syntax is so enticing. I can't wait. </sarcasm>

[06:50:51.0000] <tobie>
Anyway, why don't you call them URL strings and URL objects?

[06:52:35.0000] <annevk>
Yeah, URL input and URL objects was what I had so far

[06:52:55.0000] <tobie>
input's kind of weird imho.

[06:53:19.0000] <gsnedders>
tobie: hey, ES4X is what we really want for parsing

[06:53:40.0000] <annevk>
Well, it's input to the parser

[06:54:35.0000] <tobie>
yeah, but that's very specific to the URL spec.

[06:55:06.0000] <tobie>
If you want to talk about setting window.location to a URL xxx you probably want to use URL string (instead of input).

[06:55:54.0000] <jgraham>
FWIW I also said — string and — object

[06:59:56.0000] <zcorpan>
why not "URL" and {URL}

[07:13:15.0000] <jgraham>
IETF approve of your scare quotes

[07:13:16.0000] <Ms2ger>
[[URL]]

[07:13:17.0000] <zcorpan>
remember to register for tpac everyone

[07:13:17.0000] <zcorpan>
or are you guys not going?

[07:13:17.0000] <tobie>
zcorpan: would you call those handlebar URLs or 'stache URLs?

[07:13:18.0000] <zcorpan>
tobie: fiskmås

[07:13:20.0000] <annevk>
Probably not going to TPAC

[07:40:46.0000] <tobie>
JakeA: trying to wrap my head around the SW/cache streaming. Why are we teeing/cloning the streams instead of piping them through the client and to the cache? e.g. response.body.pipe(e.response).pipe(cache) or something

[07:43:20.0000] <annevk>
tobie: see Fetch for why you need to tee

[07:44:10.0000] <tobie>
/me looks.

[07:44:24.0000] <JakeA>
tobie: isn't that treating the browser renderer as a transform stream that returns just the same value?

[07:47:00.0000] <caitp>
some time ago, some guy started applying the word streams to things and telling people that it simplified things --- and then everyone jumped on the streams bandwagon waving their pipes everywhere

[07:47:15.0000] <caitp>
and that's why we're doing it

[07:47:18.0000] <tobie>
JakeA: well, doesn't the renderer immediately buffer the response stream and deserializes into something else? A JS string, a rasterized image, etc? (No idea what I'm talking about.)

[07:48:09.0000] <tobie>
caitp: the emperor's fully dressed, thank you.

[07:54:48.0000] <JakeA>
tobie: it'll transform it into dom nodes, video frame(s) etc etc. It won't buffer the whole response before transforming begins unless the format requires it

[07:56:08.0000] <tobie>
JakeA: makes sense.

[08:16:08.0000] <tobie>
annevk: where is teeing defined?

[08:16:54.0000] <annevk>
nowhere

[08:18:15.0000] <tobie>
ah

[08:19:02.0000] <tobie>
annevk: are there any plans for it to be defined somewhere?

[08:19:11.0000] <JakeA>
tobie: https://github.com/whatwg/streams

[08:19:46.0000] <annevk>
yeah, the plan is to have stream primitives for the platform and a stream API on top

[08:20:06.0000] <annevk>
hopefully the stream terminology can be reused by things that don't necessarily expose it in an API

[08:24:54.0000] <tobie>
oh, so teeing throttles the source's writes to the slowest of its destinations? Isn't that an issue when writing to cache and the client at the same time?

[08:25:48.0000] <tobie>
annevk: not sure what you mean by stream primitives in that case.

[08:27:31.0000] <annevk>
tobie: the underlying model I guess

[08:28:02.0000] <tobie>
annevk: thanks for clarifying.

[08:29:01.0000] <JakeA>
tobie: teeing throttles to the fastest of the destinations and holds the content in memory for the slowest, I believe

[08:29:59.0000] <tobie>
JakeA: upon reading the spec again, it seems that's voluntarily unspecified.

[08:30:38.0000] <JakeA>
/me shines the Domenic symbol into the cloudy sky

[08:31:41.0000] <tobie>
But the example implementation throttles all connections, though.

[08:33:46.0000] <tobie>
JakeA: I feel like the goal for SW/cache was to abstract away the underlying streams completely, and that they

[08:33:50.0000] <tobie>
arg

[08:34:21.0000] <tobie>
JakeA: …'re now totally leaking through.

[08:34:56.0000] <JakeA>
tobie: the goal was more to prepare for streams, but be able to ship sooner than that

[08:57:00.0000] <JakeA>
http://www.buzzfeed.com/jimwaterson/pictures-of-politicians-when-they-were-younger

[08:57:10.0000] <JakeA>
Well, that was the wrong channel

[08:57:14.0000] <JakeA>
but enjoy that anyway

[08:59:49.0000] <caitp>
would love to, but it turns out that 802.11n makes it very difficult to enjoy much of anything

[09:08:06.0000] <JakeA>
Hixie: I keep typing ArrayBugger, just in case you're looking for more specs to Britainify

[09:10:59.0000] <jgraham>
I think that how we all feel about js arrays

[09:11:26.0000] <gsnedders>
jgraham: that they're the best thing ever, and you really want JS engines to optimize them into typed arrays?

[12:25:16.0000] <Hixie>
if anyone has ideas of examples we could add to the HTML spec of how to use HTML elements or APIs in Web apps (as opposed to documents), please add them to https://www.w3.org/Bugs/Public/show_bug.cgi?id=25747

[13:23:12.0000] <TabAtkins>
caitp: No, nothing in particular about :target. Why?

[13:23:37.0000] <caitp>
i didn't think so, it was just a bug someone had filed, it's been addressed

[13:23:41.0000] <caitp>
just wanted to make sure :>

[13:58:17.0000] <Domenic>
So apparently DOCTYPE serialization is a mess

[13:59:52.0000] <Hixie>
DOCTYPE serialisation is nice and easy

[14:00:03.0000] <Hixie>
you just output the constant string '<!DOCTYPE HTML>'

[14:00:11.0000] <Hixie>
:-)

[14:00:37.0000] <Domenic>
it is only observable via XHR, and browsers all do the more complicated thing

[14:08:08.0000] <Hixie>
anyone got IE around who can tell me the output of http://software.hixie.ch/utilities/js/live-dom-viewer/?saved=3099 ?

[14:10:41.0000] <Hixie>
Domenic: i've no idea what that issue is about, can you elaborarte?

[14:10:43.0000] <Hixie>
elaborate

[14:11:15.0000] <Domenic>
Hixie: so I maintain jsdom, which is a server-side implementation of the DOM. We are trying to figure out when the user asks us "save this document to a file" how we should serialize it

[14:11:33.0000] <Hixie>
replace the DOCTYPE with '<!DOCTYPE HTML>'

[14:12:03.0000] <Domenic>
So, two minor problems: 1) that is not what browsers do when you serialize via XHR; 2) that is not what DOM S&P says

[14:12:10.0000] <Domenic>
(it is what HTML says)

[14:12:13.0000] <Hixie>
why are either of those problems?

[14:12:35.0000] <Domenic>
they are minor problems. e.g. we should probably fix DOM S&P

[14:12:54.0000] <Domenic>
and we should either fix browsers or fix the XHR spec to reflect browsers

[14:13:02.0000] <Hixie>
i don't understand the relevance of either (1) or (2) to what a server does

[14:13:13.0000] <Domenic>
they aren't really problems for us

[14:13:15.0000] <Domenic>
for me

[14:13:25.0000] <Domenic>
they are problems for the web that I have uncovered in the midst of this investigation

[14:15:05.0000] <jgraham>
Isn't DOM S&P the one that W3C forked and added lots of complexity to for no readon

[14:15:08.0000] <jgraham>
*reason

[14:15:23.0000] <Domenic>
to be fair, they seem to have fixed bugs or holes in some csaes

[14:15:40.0000] <Domenic>
Ms2ger hasn't had time to reincorporate those back into the original

[14:17:25.0000] <Hixie>
Domenic: oh the server side of this is irrelevant?

[14:17:28.0000] <Hixie>
now i'm even more confused

[14:17:51.0000] <Hixie>
what is the question i'm supposed to be answering?

[14:18:33.0000] <Domenic>
Hixie: sorry to confuse. I was just paging you guys in to let you know about a problem that we discovered, not to ask you to help us fix our code.

[14:18:45.0000] <Hixie>
what's the problem though?

[14:19:15.0000] <Domenic>
the two abovementioned problems. DOM P&S contradicting HTML; XHR contradicting reality

[14:23:39.0000] <Hixie>
ah

[14:23:46.0000] <Hixie>
i wonder if anything uses the HTML spec's definition at this point

[14:25:44.0000] <Domenic>
I believe XHR says to use HTML's, but browsers do not do that


2014-08-06
[21:58:39.0000] <zcorpan>
Hixie: https://www.w3.org/Bugs/Public/show_bug.cgi?id=20212 was closed (by mat)

[22:22:53.0000] <arpitab__>
Hi! anyone around who could help with a user account creation? I wanted to modify the meta extensions wiki and need a whatwg account for doing the same.

[22:23:55.0000] <MikeSmith>
arpitab__: yeah, just let me know you e-mail address and what  user name you want. either here or DM if you prefer

[22:24:35.0000] <arpitab__>
Tx MikeSmith! shall DM

[22:25:05.0000] <MikeSmith>
hai

[01:13:22.0000] <annevk>
How would https://www.w3.org/Bugs/Public/show_bug.cgi?id=26517 even work in the async/await world?

[01:14:02.0000] <annevk>
try { await thing() } catch(...) { ... }

[01:14:10.0000] <annevk>
What would it mean for thing() to throw synchronously?

[01:14:52.0000] <annevk>
Domenic: happy to change XMLHttpRequest's serialization

[01:15:03.0000] <annevk>
Domenic: sort of hoping Ms2ger can sort out what that should be though

[02:33:18.0000] <JakeA>
annevk: In an async/await world that example would behave the same regardless of sync/async throw

[03:31:34.0000] <annevk>
JakeA: so how do you do things like Promise.all() in async/await? let x = await y(); let z = await a(); if(x && z) ...?

[03:32:25.0000] <JakeA>
annevk: var results = await Promise.all(a(), b(), c());

[03:32:39.0000] <JakeA>
annevk: var results = await Promise.all([a(), b(), c()]); even

[03:33:07.0000] <annevk>
Hmm, so promises are not completely abstracted out

[03:33:42.0000] <JakeA>
Nah, not if you want a() b() and c() in parallel

[03:34:15.0000] <JakeA>
Well, you could do:

[03:35:19.0000] <JakeA>
let x = y(); let z = a(); x = await x; z = await z;

[03:37:49.0000] <JakeA>
annevk: I'm doing parallel without Promise.all in http://jakearchibald.com/2014/es7-async-functions/#this-time-with-es7-async-functions

[03:44:49.0000] <benjamingr>
I never got why you'd need/want the word 'function' after the word 'async' in the spec.

[03:45:28.0000] <benjamingr>
I mean, what's bad with `async loadStory(){`? Not that it matters too much, I'm quite content with generators.

[04:27:37.0000] <smaug____>
/me cries http://drafts.csswg.org/css-scoping/#selectordef-deep

[04:28:13.0000] <smaug____>
all the shadow dom stuff is getting so wrong

[04:33:59.0000] <annevk>
>>> lol

[04:34:06.0000] <annevk>
but clever

[04:35:38.0000] <smaug____>
since we end up exposing shadow dom to the outside world in all sorts of ways, couldn't we like just remove the 'shadow' part?

[04:35:41.0000] <smaug____>
grr

[04:36:27.0000] <smaug____>
/me is getting more and more the feeling XBL2 would have been better approach

[05:01:04.0000] <annevk>
smaug____: yeah, it's not really a shadow DOM at this point

[05:01:21.0000] <annevk>
smaug____: it's more some kind of special descendants

[05:01:54.0000] <annevk>
smaug____: node tree -> composed node tree

[05:05:01.0000] <smaug____>
scoped tree

[05:06:09.0000] <MikeSmith>
well it's not it currently means "invisible DOM". but it's not really a shadow either

[05:06:16.0000] <smaug____>
hmm, no, usually one can't get easily from global scope to the inner scopes, for the sake of encapsulation

[05:06:30.0000] <MikeSmith>
regardless it's still a better name than ServiceWorker

[05:07:04.0000] <smaug____>
composed is perhaps fine. It doesn't hint anything about encapsulation

[05:07:36.0000] <jgraham>
I thought it was "shadow" as in "shadow of it's former self"

[05:07:46.0000] <MikeSmith>
isn't it always a documentFragment

[05:07:47.0000] <jgraham>
s/'//

[05:08:12.0000] <MikeSmith>
time to revivi "island"

[05:10:41.0000] <zcorpan>
<xml>

[05:11:10.0000] <zcorpan>
memories

[05:13:14.0000] <karlcow>
/me starts to imagine the shadow of the invisible man and wonders how it is supposed to work

[05:13:54.0000] <karlcow>
or is it just light gravitationally bended around the object.

[05:13:56.0000] <karlcow>
hmm

[05:14:07.0000] <karlcow>
gravitational lens DOM

[05:15:16.0000] <karlcow>
maybe just the blackhole DOM. Not visible but you know it's here through its effects on the surrounding

[05:15:26.0000] <karlcow>
so much emotion for today.

[05:16:38.0000] <jgraham>
/me calls dibs on writing the caustic spec for gravitationally lensed DOMs

[05:17:00.0000] <Ms2ger>
If only we had someone with a PhD in astrophysics...

[05:17:16.0000] <jgraham>
/me points at karlcow 

[06:03:08.0000] <annevk>
Domenic: so now http://heycam.github.io/webidl/#initializing-objects-from-iterables exists, what is put in IDL?

[08:30:03.0000] <Domenic>
annevk: I dunno, not terribly important to me. Maybe Constructor(AddMapElementsUsing("set") iterable) or something?

[08:31:04.0000] <annevk>
Domenic: wfm

[08:40:51.0000] <wilhelm>
Do any browser vendors have data on how many users have changed the default font size and/or zoom level in their browser?

[09:45:10.0000] <Hixie>
zcorpan: I never understood that bug anyway, so...

[09:45:22.0000] <Hixie>
annevk: what's the difference between Foo[] and sequence<Foo> again??

[09:46:11.0000] <annevk>
Hixie: the former cannot be used as method argument

[09:46:24.0000] <annevk>
Hixie: and should generally be avoided as nobody really wants it

[09:46:36.0000] <Hixie>
what are they, concretely?

[09:47:22.0000] <Hixie>
is Foo[] an actual Array?

[09:47:27.0000] <Hixie>
or a read-only array?

[09:47:33.0000] <Hixie>
or some other thing?

[09:47:33.0000] <TabAtkins>
sequence<Foo> as an argument means the object passed in will be iterated over and copied into a fresh array for use by the algorithm defining the function.  As a return value it's an Array.

[09:47:51.0000] <TabAtkins>
I dunno what Foo[] does.

[09:48:41.0000] <Hixie>
so, if i have a FooEvent object and it has an attribute of type Foo[], do i not want the initFooEvent() method to take a Foo[] so the attribute can just be set to the same object as it was given?

[09:48:41.0000] <TabAtkins>
As soon as I was assured of which option gave me a normal Array, I immediately forgot about everything else.

[09:49:52.0000] <Hixie>
wow, yeah, Foo[] is not an Array but sequence<Foo> is

[09:49:54.0000] <Hixie>
that's confusing

[09:50:46.0000] <tantek>
I pity the Foo[]

[09:50:55.0000] <Hixie>
so presumably attributes can't be sequence<Foo>, right?

[09:51:09.0000] <TabAtkins>
smaug____: The point of shadow dom was never to 100% hide it from the outside world.  (We need that ability eventually, to explain some built-ins, but not for normal stuff.)  It's to hide stuff from *unintentional* access, which is the main problem with today's frameworks.

[09:51:13.0000] <Hixie>
since they'd have to return a new value each time

[09:51:42.0000] <Hixie>
TabAtkins: i think opinions vary on that, fwiw

[09:52:14.0000] <TabAtkins>
Hixie: I think you can do [SameObject] for it?  But honestly, I have no fucking clue, becasue the entire array part of WebIDL is a terrible mishmash of things influenced by the older impulses for Java-compat.

[09:52:32.0000] <jgraham>
I think oopinions vary on whether that's an accurate portrayal of the history

[09:52:59.0000] <TabAtkins>
Hixie: That was definitely *our* original opinion, when we started working on "a new XBL, but have it make sense this time".

[09:53:14.0000] <TabAtkins>
It was literally "jQuery components are cool, but let's fix their flaws".

[09:53:36.0000] <Hixie>
TabAtkins: right, but given that "a new XBL" was the ~fifth iteration of that particular problem space, it's hardly the first set of opinions. :-)

[09:53:51.0000] <TabAtkins>
Right.  I can't speak to previous iterations, just the one that I was a founding member of. ^_^

[09:54:29.0000] <Hixie>
i wouldn't even say it was "ours". i mean, i was a founding member of this stuff too, if you count my many conversations with dglazkov when he was getting started as founding

[09:54:30.0000] <smaug____>
TabAtkins: once you add /deep/, accessing shadow dom accidentally becomes just as easy as with normal dom without /deep/

[09:54:33.0000] <Hixie>
and i don't think i'd agree with that

[09:55:22.0000] <TabAtkins>
Hixie: We talked a good bit over this before you even got roped in.

[09:55:40.0000] <Hixie>
i think we were talking about this before you got hired, but ok :-)

[09:55:50.0000] <TabAtkins>
smaug____: "Accidentally" meaning "without invoking shadow-dom stuff".

[09:56:07.0000] <TabAtkins>
Yes, using /deep/, you can do more than you intend, but you'll never touch shadow things if you dont' use shadow combinators.

[09:56:35.0000] <smaug____>
sure, but you may access not-yours shadow doms

[09:56:48.0000] <smaug____>
just like without /deep/ you may access not-ours dom subtrees

[09:56:48.0000] <TabAtkins>
Using descendant combinators, you can do more than you intend. That doesn't mean we need to only allow child combinators.

[09:57:04.0000] <TabAtkins>
Hah, we hit the same metaphor.

[09:57:20.0000] <TabAtkins>
Well, simile.

[10:01:43.0000] <smaug____>
TabAtkins: so, if /deep/ is allowed, what is the point with shadow dom ?

[10:02:18.0000] <smaug____>
you now get access easily to all the shadow dom, unintentionally, and break things

[10:02:40.0000] <smaug____>
some encapsulation would be nice

[10:07:22.0000] <TabAtkins>
I'm not sure how you define encapsulation if "didn't show up in the normal tree at all, requiring special operations to access" doesn't qualify.

[10:10:06.0000] <smaug____>
well, /deep/ let's you poke any shadow dom. I would at least hope some specific "I want to access these shadow doms.". So ShadowRoot would need to have identifier, perhaps some kind of component class, like my-company-super-widget

[10:10:23.0000] <smaug____>
then deep("my-company-super-widget")

[10:10:44.0000] <smaug____>
something which forces dev to think which shadow dom to access

[10:11:18.0000] <smaug____>
and lets one to create inaccessible shadow dom (by not defining the component class)

[10:15:58.0000] <TabAtkins>
We definitely want to add more controls of visibility.

[10:16:38.0000] <smaug____>
stuff should be hidden by default

[10:16:49.0000] <smaug____>
and exposing opt-in

[10:16:54.0000] <TabAtkins>
Starting with the simplest form now (just hidden from normal access) because it's the most general and shuts our the fewest use-cases.

[10:19:06.0000] <TabAtkins>
We don't yet have a coherent proposal for what it means to "hide" a shadow DOM further, because there are multiple possibilities and it's actually quite complex

[10:19:42.0000] <Hixie>
haha, i've found a way to read a bit of information cross-origin on chrome

[10:19:51.0000] <TabAtkins>
The current behavior is at least coherent - all shadows are hidden from view unless you ask for them.

[10:19:54.0000] <Hixie>
the bit is "does this <embed> contain an image/svg+xml image"

[10:20:44.0000] <smaug____>
- bugs

[10:20:55.0000] <smaug____>
like exposing shadow dom during script execution in shadow dom

[10:21:08.0000] <TabAtkins>
Of course.

[10:21:56.0000] <TabAtkins>
Abutter coherent behavior is "totally sealed away forever", like UA stuff does, but that's very complicated to describe and honestly not a good default

[10:21:57.0000] <smaug____>
(not that scripts should be executed in shadow dom at all per specs, but again, bugs)

[10:22:24.0000] <smaug____>
why it is not a good default?

[10:22:43.0000] <TabAtkins>
There's probably a coherent middle ground, or even a slightly incoherent but useful one, but we haven't found it yet, and didn't want to hang ourselves in waiting for it.

[10:22:49.0000] <Hixie>
(seems like a pretty good default to me)

[10:23:08.0000] <TabAtkins>
smaug____: Totally sealed sounds good until you actually use it

[10:23:53.0000] <Hixie>
it's what we use every day with web controls

[10:23:56.0000] <Hixie>
what's wrong with it?

[10:24:05.0000] <TabAtkins>
We have relatively few, and relatively simple, shadows in the platform so far. Customizability is still a major issue

[10:24:37.0000] <TabAtkins>
Making things untouchable by default as shadows explode on number and complexity is very bad for usability.

[10:25:30.0000] <Hixie>
i disagree, but probably mostly because i have a different view of how the customisation should happen

[10:25:42.0000] <Hixie>
imho bindings should have two parts, the logic, and the presentation

[10:25:52.0000] <Hixie>
and most people should just overrride the presentation part of the binding

[10:26:04.0000] <Hixie>
each logic binding would define a "protocol" for how its presentation should be implemented

[10:26:08.0000] <TabAtkins>
I'm at lunch now, and I'll get on a plane afterwards, so I can't continue this convo today.

[10:26:31.0000] <Hixie>
this would let you arbitrarily restyle UA controls

[10:26:39.0000] <Hixie>
and the same would work with people's custom controls

[10:28:33.0000] <Hixie>
in other news, wtf browsers.

[10:28:41.0000] <Hixie>
anyone got IE? I need a tie-breaker. http://software.hixie.ch/utilities/js/live-dom-viewer/?saved=3101

[10:29:53.0000] <Hixie>
safari: getSVGDocument() only returns a Document if the MIME type was image/svg+xml _and_ the root namespace is the SVG namespace

[10:30:36.0000] <Hixie>
chrome: getSVGDocument() returns a Document if the MIME type of the currently loaded document is image/svg+xml

[10:31:47.0000] <Hixie>
but safari and chrome both are willing to load any MIME type in <embed>

[10:32:02.0000] <Hixie>
firefox: returns "NS_ERROR_FAILURE:  on line 114" if the MIME type was image/svg+xml and the namesapce isn't SVG, and won't load other MIME types

[10:32:18.0000] <Hixie>
but if you navigate to an HTML doc from the non-svg svg doc, then get SVGDocument() returns the Document fine???

[10:32:31.0000] <Hixie>
interop rating: 0.0

[10:33:04.0000] <smaug____>
hmm, NS_ERROR_FAILURE is surprising

[10:41:14.0000] <Hixie>
better test http://software.hixie.ch/utilities/js/live-dom-viewer/?saved=3102

[10:43:21.0000] <Hixie>
ok, new info. safari requires the current document to have been loaded as image/svg+xml, and returns null for cross-origin accesses.

[10:45:06.0000] <Hixie>
chrome also requires the current document to have been loaded as image/svg+xml, but throws an exception for cross-origin accesses that would otherwise return a document.

[10:46:34.0000] <Hixie>
firefox returns the current Document regardless of MIME type, except that if it was opened as image/svg+xml, it tries to get an SVGDocument, and fails with NS_NOINTERFACE if it's actualy not an SVGDocument

[10:47:09.0000] <Hixie>
except if it's a data: URL, in which case it's NS_ERROR_FAILURE?

[10:47:42.0000] <Hixie>
and firefox follows the spec in terms of refusing to load non-SVG no-plugin MIME types

[10:47:54.0000] <Hixie>
but safari and chrome just treat the embed as an iframe if they support the type

[10:50:56.0000] <Hixie>
all the browsers look at what the current loaded doc is, though, not what the original doc was (not that it matters for firefox)

[10:54:42.0000] <Hixie>
guess i'll go with the safari behaviour for getSVGDocument(), and the firefox behaviour for loading.

[12:49:45.0000] <Hixie>
what exactly does the JS spec mean when it uses the term "abstract operation"?

[12:51:58.0000] <Hixie>
it just means "internal spec function", right? not "abstract" in the normal sense?

[12:54:10.0000] <Hixie>
man, i thought i'd be better able to understand the module loading system now, but i was wrong

[12:55:10.0000] <Hixie>
the whole of 15.2.* baffles me still

[13:53:32.0000] <Domenic>
Hixie: yes, internal spec function. although "function" has its own connotations that don't apply

[15:32:44.0000] <Hixie>
jorendorff: so despite my best efforts, i can't really figure out what happens when you have an "import" statement still

[15:33:11.0000] <jorendorff>
Hixie: import is a directive to the loader. It means "before you even think about running this code,

[15:33:22.0000] <Hixie>
i mean at a very concrete level

[15:33:27.0000] <jorendorff>
Hixie: load *that* module and its dependencies."

[15:33:28.0000] <Hixie>
involved loader records and all that

[15:33:32.0000] <Hixie>
involving

[15:34:21.0000] <Hixie>
does it involve CreateLoaderRecord()?

[15:34:41.0000] <Hixie>
nothing seems to call CreateLoaderRecord except Reflect.Loader(), which i assume isn't directly invoked by the spec

[15:35:14.0000] <jorendorff>
Hixie: I don't have time to explain in detail just now, but can we talk tomorrow?

[15:35:19.0000] <Hixie>
sure

[15:35:42.0000] <jorendorff>
Hixie: in short, CreateLoaderRecord shouldn't exist, those should be internal slots of the Loader object. It's just the Loader, that's all.

[15:36:22.0000] <Hixie>
"shouldn't" as in you disagree with the spec, as in the spec will be changed, or as in i should be ignoring that part of the spec?

[15:37:01.0000] <jorendorff>
i think the spec is unnecessarily complex, but and you should think of those as internal slots of the Loader object because that's what they are in practice

[15:37:09.0000] <jorendorff>
Hixie: the spec doesn't explicitly create a Loader; it specifies that one exists at startup, details to be supplied by the embedding

[15:37:28.0000] <jorendorff>
i'll be around tomorrow

[15:37:37.0000] <Hixie>
the spec is definitely unnecessarily complex, but it's the spec, so... :-(

[15:37:38.0000] <Hixie>
k

[15:42:31.0000] <Hixie>
gah i don't get this spec

[15:42:37.0000] <Hixie>
it has all these dangling definitions

[15:42:44.0000] <Hixie>
26.4 The System Object

[15:42:45.0000] <Hixie>
The System object is the Loader Object instance associated with the Realm of the current global object.

[15:43:16.0000] <Hixie>
first of all, "Loader Object instance"? surely you can't have an instance of an object, objects _are_ instances

[15:43:35.0000] <Hixie>
secondly, the term "System Object" doesn't get mentioned anywhere else except that one sentence.

[15:44:51.0000] <Hixie>
8.2 Code Realms "A Realm is specified as a Record with the fields specified in Table 20:" [...] "[[loader]]" [...] "The Loader object that can associate ECMAScript code with this Realm"

[15:44:58.0000] <caitp>
over 50% of implementors should be able to figure it out! [[snerk]]

[15:45:02.0000] <Hixie>
the term "[[loader]]" isn't mentioned anywhere else either

[15:45:44.0000] <Hixie>
6.1.7.4 Well-Known Intrinsic Objects "Well-known intrinsics are built-in objects that are explicitly referenced by the algorithms of this specification and which usually have Realm specific identities." [...] "%Loader%" (no definition)

[15:46:03.0000] <Hixie>
%Loader% is only used twice: "The initialize value of Reflect.Loader is the %Loader% intrinsic object" and "The initial value of Reflect.Loader.prototype.constructor is the built-in %Loader% constructor"

[15:46:41.0000] <Hixie>
so, looks like we have three separate realm-specific Loader objects. but. none of them are used to load anything.

[15:48:29.0000] <Hixie>
does anyone implement any of this stuff?

[15:48:57.0000] <caitp>
i recall there was a bug for it on mozilla's tracker, dunno the status of it

[15:51:36.0000] <caitp>
and by "it" I really mean realms, because it's kind of a blocker for the rest of that I think?

[15:53:00.0000] <Hixie>
browsers have implemented realms for years (implicitly)

[15:53:11.0000] <Hixie>
i meant the Loader thing

[15:53:56.0000] <caitp>
is not Loader related to modules?

[15:54:27.0000] <caitp>
anyways, there's no bug found for "es6 loader"


2014-08-07
[18:20:25.0000] <SamB>
Hixie: I just got the "too slow?" note *on* the multi-page version ...

[18:20:31.0000] <SamB>
or so it seemed

[18:22:26.0000] <SamB>
Hixie: also isn't blink supposed to be non-defined at #the-blink-element rather than just #blink ?

[01:12:08.0000] <mathiasbynens>
https://code.google.com/p/v8/issues/detail?id=2218 + https://code.google.com/p/v8/issues/detail?id=2217 interoperability++

[01:12:29.0000] <mathiasbynens>
took over 2 years

[01:43:59.0000] <annevk>
mathiasbynens: writing the spec, the tests, and the implementation is a shame though, but kudos!

[01:44:39.0000] <annevk>
mathiasbynens: are these methods in ES6 now?

[01:45:03.0000] <annevk>
looks like it

[01:45:07.0000] <annevk>
you can search for "blink" :-)

[01:53:24.0000] <annevk>
mathiasbynens: are you waiting with updating http://javascript.spec.whatwg.org/ until ES6 is published?

[01:57:29.0000] <mathiasbynens>
yeah, thanks to spec bug reports i filed two years ago

[01:57:38.0000] <mathiasbynens>
they are in ES6 now

[01:58:05.0000] <mathiasbynens>
re: waiting, i’m not sure. is https://people.mozilla.org/~jorendorff/es6-draft.html official enough to use as a reference in a spec?

[02:14:03.0000] <tobie>
mathiasbynens: that's the one we reference in specref: http://specref.jit.su/search-refs?q=es6

[02:14:34.0000] <tobie>
http://specref.jit.su/bibrefs?refs=ECMASCRIPT

[02:19:39.0000] <annevk>
mathiasbynens: definitely for WHATWG

[02:20:01.0000] <annevk>
mathiasbynens: it's as close to Living Standard as you can get, and it's what implementers are targeting

[02:21:35.0000] <mathiasbynens>
ok, cool

[03:20:02.0000] <tobie>
annevk: are you using the enhancement tag to denote post v1 features in SW repo?

[03:20:12.0000] <annevk>
tobie: I guess

[03:20:27.0000] <annevk>
tobie: post Q3 features

[03:20:29.0000] <tobie>
just added a v2 milestone to do the same. :/

[03:20:50.0000] <annevk>
tobie: that seems a bit clearer actually

[03:20:58.0000] <annevk>
tobie: can we rename labels?

[03:21:10.0000] <tobie>
yup. will do.

[03:21:53.0000] <tobie>
a preference for using a milestone, or a tag?

[03:29:34.0000] <annevk>
tobie: tag is what we did so far

[03:30:43.0000] <tobie>
annevk: oh, well. added a version 2 milestone (we can always replace by a tag instead)

[03:31:24.0000] <tobie>
currently triaging enhancements as pertaining to required enhancements for v1 or feature requests for the future

[03:34:32.0000] <tobie>
annevk, JakeA: status of https://github.com/slightlyoff/ServiceWorker/issues/224

[03:34:38.0000] <tobie>
?

[03:37:40.0000] <JakeA>
tobie: I'd rather we just did this in CSP, but I think we're going to end up sending some kind of header as slightlyoff says

[03:39:34.0000] <tobie>
JakeA: still something we need for v1, right?

[03:39:41.0000] <JakeA>
yep

[03:53:01.0000] <tobie>
annevk: added a version 1 milestone to all issues tagged with impacts MVP

[03:53:31.0000] <tobie>
annevk: you can look at unassigned issues here: https://github.com/slightlyoff/ServiceWorker/issues?q=is%3Aopen+is%3Aissue+no%3Amilestone

[04:17:13.0000] <zcorpan>
what's the reason we can't always autorotate like mobile safari? https://www.w3.org/Bugs/Public/show_bug.cgi?id=25508

[04:19:28.0000] <annevk>
zcorpan: does it do that even for <img>?

[04:19:44.0000] <annevk>
/me thought that was not going to be compatible

[04:21:32.0000] <zcorpan>
i haven't tested but i see claims that it does

[04:28:22.0000] <zcorpan>
https://code.google.com/p/chromium/issues/detail?id=56845#c52

[04:40:16.0000] <zcorpan>
https://raw.githubusercontent.com/recurser/exif-orientation-examples/master/Landscape_6.jpg looks like gecko/blink/webkit honor exif for the top-level img page but not for <img>

[04:47:47.0000] <zcorpan>
http://www.browserstack.com/screenshots/5864b36445508e27c01ccb333d17b979c27cdfb7

[04:48:56.0000] <annevk>
Somewhat weird as both use <img>

[04:55:58.0000] <zcorpan>
who should i cc from apple/webkit?

[05:35:47.0000] <annevk>
zcorpan: hober?

[05:37:26.0000] <zcorpan>
thx

[06:39:50.0000] <tobie>
annevk: why isn't QuotaExceededError not a subclass of DOMException?

[06:40:54.0000] <tobie>
annevk: why isn't QuotaExceededError a subclass of DOMException?

[06:41:13.0000] <tobie>
(sorry for !!)

[06:42:07.0000] <tobie>
annevk: I thought things went something like QuotaExceededError < DOMException < Error

[06:47:02.0000] <zcorpan>
i've caught up with email now, except for critic

[06:48:13.0000] <zcorpan>
/me marks all as read

[06:52:47.0000] <annevk>
tobie: we haven't sorted exceptions

[07:08:22.0000] <Domenic>
tobie: there are no subclasses of DOMException; just DOMExceptions with different `name` properties

[07:36:39.0000] <annevk>
So yeah Jake, what about your data? http://jakearchibald.com/

[07:36:50.0000] <annevk>
JakeA: ^^

[07:38:23.0000] <JakeA>
annevk: haha, I was wondering when someone would point that out. It's on my todo list. I should go through the pain of it

[07:40:02.0000] <annevk>
I need to do it too, but it's going to be a lot of hassle I'm afraid. DreamHost also uses separate domains for MySQL so...

[07:41:35.0000] <JakeA>
I'm on Amazon so it might not be too bad, although I host multiple sites from that box so I'll have to work out how to do the SNI stuff

[07:42:04.0000] <annevk>
If you use SNI, how many browsers do you cut off?

[07:42:47.0000] <annevk>
Back in the day there were browsers without Host...

[07:47:16.0000] <JakeA>
IE < 7

[07:47:43.0000] <JakeA>
Oh & any version of IE on XP

[07:47:49.0000] <annevk>
I think NN4 didn't do Host, but not really sure

[07:48:12.0000] <annevk>
JakeA: seems acceptable

[07:48:43.0000] <JakeA>
Oh, maybe Android 2 too, ugh.

[07:49:08.0000] <JakeA>
The default browser anyway. Opera/Firefox will be fine

[07:49:12.0000] <annevk>
Personally, don't really care about that

[07:49:51.0000] <JakeA>
Same, but I might if I was making a site for "the public"

[07:49:55.0000] <annevk>
The main problem with TLS is the maintenance

[07:50:34.0000] <annevk>
I already authenticated with my registrar somehow, it would be nice if they handled the setup...

[07:54:13.0000] <Domenic>
CloudFlare seems to have some pretty simple TLS setup

[07:54:33.0000] <Domenic>
Extremely user-friendly

[07:58:05.0000] <annevk>
I just noticed I can do it almost automatically with DreamHost too for free

[07:58:17.0000] <annevk>
Provided I don't want my own IP, which has this caveat: http://wiki.dreamhost.com/Secure_Hosting#SNI_Caveat

[07:59:20.0000] <annevk>
Oh wait, that's for self-signed. A signed certificate is USD 15

[08:46:00.0000] <Ms2ger>
In other news: http/2 breaks the web

[08:49:14.0000] <caitp>
you say that like it's a tremendous and avoidable failure =)

[08:50:17.0000] <jgraham>
the web, or just twitter?

[08:50:53.0000] <Ms2ger>
At least twitter

[09:45:25.0000] <smaug____>
Hixie_: how long is a BroadcastChannel supposed to stay alive?

[09:46:21.0000] <smaug____>
like, does 'new BroadcastChannel('foobar').onmessage = function(){};' in a worker keep the BroadcastChannel and the relevant worker alive forever (assuming the relevant Window object stays alive)

[09:48:43.0000] <tobie>
Domenic: figured (re DOMExceptions). A little surprising, though. Do you know why that is the case?

[09:48:55.0000] <Domenic>
tobie: history i guess

[09:49:15.0000] <tobie>
C heritage?

[09:49:33.0000] <smaug____>
Hixie_: I guess so, given the note

[09:50:16.0000] <smaug____>
...about garbage collecting

[09:53:12.0000] <Ms2ger>
tobie, used to be DOMException with .code == DOMException.SYNTAX_ERR, remember ;)

[09:53:44.0000] <tobie>
sigh

[09:55:51.0000] <tobie>
Ms2ger: I remember how we were hard coding all of those constants for nodetypes.

[09:56:14.0000] <tobie>
if element.nodeType == 3, etc.

[09:57:07.0000] <Ms2ger>
I don't think I ever had to do that, but then again I've mostly written tests

[09:58:40.0000] <tobie>
node type constants weren't implemented in IE < 7 iirc. Hence hard coding their value.

[09:59:45.0000] <tobie>
Which I believe is one of the main reasons why front-end devs prefer strings over int + const.

[10:01:04.0000] <tobie>
We just got used to the latter being unreliable across browsers.

[10:01:49.0000] <Ms2ger>
Yeah

[10:02:39.0000] <tobie>
it's a shame, though. const help with readability plus catching typos upfront.

[10:06:29.0000] <jgraham>
Maybe ES10 will be the one where we get strong typing and enums

[10:10:42.0000] <gsnedders>
jgraham: nah, that's ES4

[10:29:43.0000] <annevk>
Even JavaScript itself uses strings for enums

[10:32:26.0000] <SamB>
annevk: it's not uncommon in C to #define strings used in that manner

[10:32:32.0000] <SamB>
for typo-avoidance alone

[10:45:08.0000] <Domenic>
typo avoidance is not achieved by the int-enums

[10:45:22.0000] <Ms2ger>
Well, not in JS

[10:45:27.0000] <Domenic>
right

[10:45:38.0000] <tobie>
Domenic: well, unless they're globals.

[10:45:54.0000] <Domenic>
O_O

[10:46:07.0000] <Domenic>
with proxies I think we will start seeing experiments

[10:46:12.0000] <Domenic>
with things that throw on undefined properties

[10:46:34.0000] <Domenic>
there will be chicken-egg problems with perf (nobody uses them because they're slow; nobody optimizes them because nobody uses them)

[10:47:09.0000] <Domenic>
but if we can overcome that, especially for simple proxies like "pass-through everything, except throw for undefined gets", then I can see a standards-track typo-preventing enum

[10:47:24.0000] <tobie>
Yeah, that's what I meant by globals (not properties of something).

[10:48:19.0000] <tobie>
as in .code == DOM_EXCEPTION_SYNTAX_ERR

[10:49:27.0000] <SamB>
Domenic: I wasn't suggesting that it was

[10:50:45.0000] <SamB>
Domenic: I was merely mentioning a thing that can be helpful in dealing with typos even if you do want to use string values for this

[10:51:23.0000] <Domenic>
SamB: sorry, I was replying to tobie

[10:53:17.0000] <tobie>
Domenic: agree the normal, hanging off an object enum won't help you pick up typos.

[13:34:56.0000] <Hixie_>
SamB: file bugs

[13:34:58.0000] <Hixie_>
smaug____: yeah

[13:36:28.0000] <Hixie_>
jorendorff: your day any better today? :-)

[13:37:04.0000] <jorendorff>
phew

[13:37:53.0000] <jorendorff>
Hixie_: it's honestly not great... today could work, but tomorrow would be better if it would be OK

[13:38:22.0000] <Hixie_>
jorendorff: happy to get your help whenever it's available. I'll try to forge on without it in the meantime. :-)

[13:39:02.0000] <jorendorff>
Hixie_: Please ping me tomorrow as soon as possible. I'm sorry about today. Fires.

[13:39:13.0000] <jorendorff>
Fires and interns.

[13:39:20.0000] <Hixie_>
jorendorff: good luck with your fires!

[13:40:25.0000] <crankharder>
wondering if this is a good place to ask about the Content-Security-Policy-Report-Only header, seen here: http://www.w3.org/TR/CSP/#content-security-policy-report-only-header-field

[13:40:49.0000] <jorendorff>
thank you

[13:43:07.0000] <Hixie_>
abarth: ping ^

[14:37:18.0000] <crankharder>
how can something violate this Content-Security-Policy? "default-src *"

[14:37:53.0000] <crankharder>
getting lots of warnings with just that set

[15:33:37.0000] <astearns>
crankharder: default-src: * will disable inline script and style, and eval

[16:30:53.0000] <Hixie_>
Domenic: you around?

[16:31:11.0000] <Hixie_>
Domenic: what is PromiseBuiltinCapability() ?

[16:36:19.0000] <Hixie_>
/me stares at ProceedToTranslate(loader, load, p) Abstract Operation in confusion

[16:39:43.0000] <Hixie_>
/me wonders what PromiseCatch() does and what returning PromiseCatch() is supposed to mean

[16:41:37.0000] <jtcranmer>
annevk: I've got a tough UTR#46 question for you

[16:42:18.0000] <jtcranmer>
should I say faß.de and xn--fa-hia.de are "equivalent" domains?

[16:42:19.0000] <Hixie_>
how does PromiseThen(PromiseOf(undefined), F) differ from just calling F?

[16:48:44.0000] <Hixie_>
man, i think the people who complain that the HTML spec is "too imperative" really need to read the ES6 spec to get some perspective.

[16:56:07.0000] <Hixie_>
kittens, it's hard to follow promise-based code

[16:56:28.0000] <Hixie_>
how do you even draw a flow chart for it

[16:56:45.0000] <Hixie_>
do you draw the line from the place that does the call, or from the place that's going to trigger the promise?


2014-08-08
[17:01:35.0000] <jtcranmer>
it's not hard if you use generators and promise wrappers

[17:03:01.0000] <TabAtkins>
Promises are just a standardized abstraction over callback-based code, so whatever you've figured out for that, you can use for Promises.

[17:09:44.0000] <Domenic>
Hixie_: PromiseBuiltinCapability() is a way of creating a record containing { [[Resolve]], [[Reject]], [[Promise]] } where the first two control the fate of [[Promise]]

[17:10:20.0000] <Domenic>
Hixie_: PromiseCatch(p, f) should be the same as p.catch(f), aka p.then(undefined, f), except it will work even if someone messes with the Promise global

[17:10:34.0000] <Hixie_>
TabAtkins: i've never had to trace code as complicated as the loader stuff in the ES6 spec before, so it's never come up...

[17:10:35.0000] <Domenic>
Hixie_: thus, returning PromiseCatch(p, f) will return the derived promise generated

[17:11:17.0000] <Domenic>
Hixie_: PromiseThen(PromiseOf(undefined), F) should be equivalent to EnqueueJob(<job_that_calls_F>, "PromiseTasks") I am pretty sure

[17:11:27.0000] <Hixie_>
Domenic: but PromiseBuiltinCapability() takes no arguments, so wtf are [[Resolve]], [[Reject]], and [[Promise]] ?

[17:11:35.0000] <Hixie_>
Domenic: and why would you ever need such a record

[17:11:44.0000] <Domenic>
Hixie_: it is a way to create new promises, along with the things that control them

[17:11:57.0000] <Hixie_>
there has got to be a simpler way to spec that

[17:12:36.0000] <Domenic>
Hixie_: it is equivalent to `function promiseBuiltinCapability() { var resolve, reject; var promise = new Promise((resolve_, reject_) => { resolve = resolve_; reject = reject_; }); return { promise, resolve, reject }; }`

[17:12:46.0000] <Domenic>
It is only necessary because the ES spec doesn't have closures

[17:13:22.0000] <Domenic>
so it is easier to create these capability records and use them in a linear fashion, than to nest your code inside `var promise = new Promise((resolve, reject) => { /* oh no closures my only weakness */ })`

[17:13:28.0000] <Hixie_>
Domenic: i've no idea what that code does

[17:13:39.0000] <Hixie_>
Domenic: it looks like perl

[17:13:49.0000] <Domenic>
Hixie_: well, OK, guess it wasn't helpful. But, it will give you an object { promise, resolve, reject }

[17:13:52.0000] <Domenic>
where promise is pending

[17:13:59.0000] <Domenic>
and resolve and reject change the fate of promise

[17:14:00.0000] <Hixie_>
but what are resolve and reject?

[17:14:10.0000] <Domenic>
resolve is a function that resolves promise; reject is a function that rejects promise

[17:14:35.0000] <Hixie_>
what do "resolves promise" and "rejects promise" mean?

[17:14:48.0000] <Hixie_>
and why can't that just be built-in to promises?

[17:14:57.0000] <Hixie_>
i don't understand why there has to be all these explicit functions internal to the spec

[17:15:02.0000] <Hixie_>
instead of just saying "return a new promise"

[17:15:13.0000] <Domenic>
ignoring the case where you call resolve(anotherPromise), "resolve promisewith x" means "the promise will be successfull, with x" and "reject promise with x" means "the promise will fail, with r"

[17:15:38.0000] <Domenic>
where "successful with x" means when you do p.then(onSuccess, onFail), onSuccess gets called with x

[17:16:13.0000] <Domenic>
these can't be built in to promises because then anyone could resolve a promise, which is bad---a promise's fate should only be determined by the person who creates it

[17:16:59.0000] <Hixie_>
i don't mean "built in" as in "exposed as an api"

[17:17:07.0000] <Hixie_>
i mean, just part of the definition of the spec concept

[17:17:14.0000] <Hixie_>
the spec right now is so utterly convoluted

[17:17:16.0000] <Domenic>
Ah. They are. You can just do ResolvePromise(p, x)

[17:17:30.0000] <Hixie_>
so why does the spec go through all these crazy hoops

[17:17:33.0000] <Domenic>
I am not sure what context you are seeing them used where the PromiseCapability is used

[17:17:34.0000] <Hixie_>
instead of just saying that

[17:17:42.0000] <Domenic>
One possible reason is because you might need to pass capability.[[Resolve]] to a real user

[17:18:33.0000] <Domenic>
Another might be that it hasn't had a chance to go through review; I believe the module loader section of the spec is in the process of being handed over from jorendorff to allenwb

[17:18:56.0000] <Hixie_>
e.g. ProceedToLocate() calls PromiseOf(undefined) which calls PromiseBuiltinCapability() which calls CreatePromiseCapabilityRecord() which is an 11-step algorithm

[17:19:29.0000] <Hixie_>
but i don't see why ProceedToLocate() can't just say "create a new promise" and the spec say somewhere that "a new promise is something that looks like _bla_"

[17:19:41.0000] <Hixie_>
without any need for these "Let constructorResult be the result of calling the [[Call]] internal method of constructor, passing promise and (executor) as the arguments" steps

[17:19:51.0000] <Hixie_>
whatever that means

[17:20:03.0000] <Domenic>
Not everyone hates formal language

[17:20:19.0000] <Domenic>
"create a new promise," backed by lots of implicit knowledge, is not really any better than PromiseOf(undefined), backed by explicit steps

[17:21:22.0000] <Hixie_>
this isn't a formal language though

[17:21:24.0000] <Hixie_>
it's still just english

[17:21:40.0000] <Domenic>
It's very close to one

[17:21:55.0000] <Domenic>
The steps correspond almost 1:1 with (unoptimized) implementation code

[17:22:16.0000] <Domenic>
compare https://github.com/domenic/Array.prototype.contains/blob/master/spec.md and https://github.com/domenic/Array.prototype.contains/blob/master/reference-implementation/index.js

[17:23:32.0000] <Hixie_>
that's unfortunately not a benefit

[17:23:34.0000] <Hixie_>
but whatever

[17:23:41.0000] <Hixie_>
my feedback is that the spec is unreadable :-)

[17:24:26.0000] <Domenic>
the barrier to entry is certainly high

[17:24:35.0000] <Domenic>
and i could believe that the sections you're looking at are particularly bad

[17:25:27.0000] <Hixie_>
right now i'm still trying to figure out what the Loader Record is created

[17:25:32.0000] <Hixie_>
s/what/where/

[17:25:46.0000] <Hixie_>
i'm trying to trace execution of the module loading stuf

[17:26:12.0000] <Hixie_>
i started at RequestLoad(), and i've traced it down to UpdateLinkSetOnLoad() on one side and InstantiateSucceeded() on the other

[17:26:12.0000] <Domenic>
I wonder if it'd be easier to trace by using a debugger against a polyfill

[17:26:23.0000] <Hixie_>
(no sign yet of a loader being created)

[17:27:14.0000] <Hixie_>
btw the kind of thing i mean when i say it's not a formal language is "Let body be the result of parsing load.[[Source]], interpreted as UTF-16 encoded Unicode text as described in 10.1.1, using Module as the goal symbol. Throw a SyntaxError exception if the parse fails or if any static semantics errors are detected."

[17:27:58.0000] <Hixie_>
bbl, gotta go

[17:28:04.0000] <Hixie_>
thanks for the help btw

[17:28:04.0000] <Domenic>
kk, gl hf

[17:28:12.0000] <Domenic>
hope jorendorff clears things up tomorrow :)

[17:47:48.0000] <MikeSmith>
explicit functions internal to the spec" is the style the entire ES spec's written in, isn't it? seems like anything new that's added needs to follow the same style. unless the whole spec is rewritten

[18:26:38.0000] <caitp>
it probably should be reimagined completely

[18:26:44.0000] <caitp>
it won't be, but it would be a net positive

[22:21:11.0000] <caitp>
did http://www.w3c-test.org break or something? seems to be broken in canary at least =(

[22:21:48.0000] <caitp>
looks like it's not serving MANIFEST.json

[22:22:55.0000] <caitp>
guess I'll just run my own :u

[22:26:56.0000] <Streusel>
the site works, can't find any manifest.json though.

[22:34:00.0000] <MikeSmith>
caitp: w3c-test.org gets wedged sometimes. I may need to just restart the server

[22:34:25.0000] <MikeSmith>
but it looks fine to me right now

[22:35:48.0000] <caitp>
I get a 404 for MANIFEST.json, and subsequent reference errors because of that

[22:35:54.0000] <caitp>
(using the test runner)

[22:36:19.0000] <MikeSmith>
that's because there's no MANIFEST.json file

[22:37:06.0000] <caitp>
yeah, which the runner seems to need, thus no good right now =P but it's alright

[22:37:25.0000] <caitp>
not going to hack on more test failures at 2am on a friday anyways, nite

[22:41:00.0000] <MikeSmith>
so it looks like some recent change to the tools/scripts/manifest.py script broke the manifest build

[22:41:30.0000] <MikeSmith>
and so the MANIFEST.json file's not getting regenerated

[22:41:40.0000] <MikeSmith>
I get the same error locally

[22:41:55.0000] <MikeSmith>
  File "tools/scripts/manifest.py", line 565, in update_manifest

[22:41:55.0000] <MikeSmith>
    manifest = load(kwargs["path"])

[22:41:56.0000] <MikeSmith>
KeyError: 'path'

[22:42:41.0000] <Streusel>
interesting array name

[22:43:09.0000] <MikeSmith>
that's not some built-in python array?

[22:44:04.0000] <Streusel>
I don't have a clue about python and their arrays, although I would assume it works like any other, I just thought the name was interesting

[22:44:40.0000] <MikeSmith>
https://github.com/w3c/web-platform-tests/commit/acbcad1cb71c6eebd2a63c5cf16ea7f366812f48

[22:45:53.0000] <MikeSmith>
committed without review

[22:46:35.0000] <Streusel>
9 days ago, and was only caught now? o-o

[22:47:49.0000] <MikeSmith>
I've been away for a week, and left Ms2ger in charge :)

[22:51:15.0000] <MikeSmith>
looks like the code's supposed to just use a default if no path value is explicitly specified from the command line

[22:51:21.0000] <MikeSmith>
https://github.com/w3c/web-platform-tests/blob/acbcad1cb71c6eebd2a63c5cf16ea7f366812f48/tools/scripts/manifest.py#L579https://github.com/w3c/web-platform-tests/blob/acbcad1cb71c6eebd2a63c5cf16ea7f366812f48/tools/scripts/manifest.py#L579

[22:51:29.0000] <MikeSmith>
but it seems to not be doing that

[22:52:00.0000] <MikeSmith>
ah wait that's just when it calls the parser

[23:01:47.0000] <zcorpan_>
hsivonen: ping http://krijnhoetmer.nl/irc-logs/whatwg/20140805#l-400

[00:05:38.0000] <Ms2ger>
MikeSmith, I'm pretty sure that https://github.com/w3c/web-platform-tests/commit/acbcad1cb71c6eebd2a63c5cf16ea7f366812f48 doesn't break anything that worked before

[00:42:25.0000] <Ms2ger>
MikeSmith, and reviewed at https://github.com/w3c/web-platform-tests/pull/1133

[00:43:17.0000] <MikeSmith>
ok

[00:44:30.0000] <MikeSmith>
Ms2ger: so I guess I'll need to figure out what earlier change it was that actually did break it

[00:44:50.0000] <Ms2ger>
There's a pointer in my commit message :)

[00:45:00.0000] <MikeSmith>
ah ok

[01:21:06.0000] <MikeSmith>
um

[01:22:37.0000] <MikeSmith>
Ms2ger: in fact your change is what broke it, as far as I can see

[01:23:10.0000] <MikeSmith>
Ms2ger: if I check out the parent of that commit, the script was still working then

[01:26:15.0000] <Ms2ger>
MikeSmith, how? It tried to fetch opts.foo, and opts isn't declared anywhere

[01:27:00.0000] <MikeSmith>
Ms2ger: dunno but apparently it did work

[01:28:00.0000] <Ms2ger>
Can you print opts.path there?

[01:28:51.0000] <MikeSmith>
sure, gimme a second

[01:29:41.0000] <MikeSmith>
opts.path: /opt/workspace/web-platform-tests/MANIFEST.json

[01:31:21.0000] <Ms2ger>
Huh

[01:31:49.0000] <Ms2ger>
Oh, I see

[01:32:20.0000] <MikeSmith>
seems like opts is assigned on line 599 or so..

[01:32:30.0000] <Ms2ger>
MikeSmith, at line 600, add path=opts.path

[01:32:31.0000] <MikeSmith>
initialized

[01:32:40.0000] <MikeSmith>
ok

[01:34:19.0000] <MikeSmith>
success

[01:34:52.0000] <MikeSmith>
if you commit that I'll review it

[01:35:04.0000] <Ms2ger>
I was just going to suggest the opposite, but sure :)

[01:35:18.0000] <MikeSmith>
heh

[01:39:46.0000] <Ms2ger>
r? https://github.com/w3c/web-platform-tests/pull/1163

[01:47:26.0000] <hsivonen>
zcorpan: pong

[02:04:09.0000] <Ms2ger>
Does anyone else than Gecko and Servo implement new Document()?

[02:06:04.0000] <zcorpan>
hsivonen: what is the 8 ball verdict for today?

[02:38:35.0000] <annevk_>
jtcranmer: from the top of my head, per the URL Standard those are not equivalent, the first normalizes to fass.de

[05:21:58.0000] <Ms2ger>
zcorpan_, r? https://critic.hoppipolla.co.uk/r/378

[05:22:43.0000] <zcorpan_>
Ms2ger: done

[05:22:51.0000] <Ms2ger>
Ta

[05:23:38.0000] <Ms2ger>
zcorpan_, https://critic.hoppipolla.co.uk/showcomment?chain=669 is done now, right?

[05:30:52.0000] <zcorpan_>
yes. resolved it

[05:41:40.0000] <Ms2ger>
Thanks!

[05:50:00.0000] <JakeA>
annevk: when you said new WindowClient(), were you thinking of that being ServiceWorker only or on Window too?

[09:19:16.0000] <smaug____>
Domenic: I don't know where you get your idea the output is the thing to read data from. https://github.com/sysapps/tcp-udp-sockets/issues/69

[09:19:32.0000] <smaug____>
never seen that elsewhere

[09:19:33.0000] <Domenic>
smaug____: things come out ... of the output ...

[09:19:41.0000] <smaug____>
fprintf(stdout, "foo")

[09:20:00.0000] <Domenic>
right, then the user reads from standard out, after someone put something there for them to read from

[09:20:30.0000] <smaug____>
API user doesn't read from stdout, in general

[09:20:38.0000] <smaug____>
one writes to output

[09:20:40.0000] <smaug____>
read from input

[09:20:43.0000] <smaug____>
that is how APIs work

[09:21:06.0000] <smaug____>
no reason to make web APIs work differently than rest of the world

[09:21:30.0000] <Domenic>
the java example in that threat is making me reconsider

[09:21:35.0000] <Domenic>
i agree no reason to depart from other programming models

[09:21:57.0000] <smaug____>
fprintf(stdout, "foo") is just the same as the java case

[09:22:04.0000] <Domenic>
the java example is general

[09:22:10.0000] <smaug____>
except that C is ancient

[09:22:25.0000] <Domenic>
stdout/stdin is an odd case, or so i thought

[09:22:59.0000] <Domenic>
i will need to do some research, as it is still mind-boggling to me that the consumer would write things *in* to the *output*... the *producer* would do that, sure, but not the consumer

[09:23:27.0000] <smaug____>
I've never seen any IO library which reads from output and writes to input

[09:23:32.0000] <smaug____>
in general

[09:24:08.0000] <smaug____>
of course one can do some piping (sp?) in which case you write to output and then read form the same stream elsewhere

[09:41:33.0000] <netzhuffle>
hi, Question: Why is the picture element only under whatwg.org/specs but not under developers.whatwg.org?

[09:43:08.0000] <Ms2ger>
Looks like the devs version is from 20 July

[09:47:33.0000] <netzhuffle>
Ms2ger: can I find that date somewhere?

[09:47:53.0000] <Ms2ger>
I found it in a comment at the bottom of the page

[09:49:22.0000] <netzhuffle>
I see, thanks :)

[09:49:39.0000] <netzhuffle>
is it regenerated automatically or manually?

[09:50:12.0000] <Ms2ger>
I don't know what the current situation is

[11:06:18.0000] <Hixie_>
jorendorff: i'm here

[11:06:27.0000] <jorendorff>
OK! I'm ready

[11:07:09.0000] <Hixie_>
i've been trying to trace how the loader works

[11:07:12.0000] <Hixie_>
right now i've got http://www.gliffy.com/go/publish/6036438

[11:07:18.0000] <Hixie_>
(scroll down a bit)

[11:07:38.0000] <Hixie_>
what i am primarily looking for right now is "what creates the Loader?"

[11:09:47.0000] <smaug____>
Why does postMessage work still on a closed BroadcastChannel

[11:09:49.0000] <smaug____>
somewhat odd

[11:09:59.0000] <smaug____>
I would expect some exception

[11:10:35.0000] <Hixie_>
that does sound wrong

[11:11:00.0000] <Hixie_>
yeah that's an oversight

[11:11:01.0000] <Hixie_>
file a bug?

[11:11:18.0000] <smaug____>
ok

[11:12:11.0000] <Hixie_>
thanks!

[11:13:13.0000] <jorendorff>
Hixie: There's just one Loader and it's used again and again.

[11:13:21.0000] <Hixie_>
where is it created?

[11:13:32.0000] <jorendorff>
It's not, in ES6. ES6 doesn't specify anything about it.

[11:14:08.0000] <Hixie_>
so, if i create it, how do i pass it to ES6?

[11:14:17.0000] <jorendorff>
reading a bit

[11:15:45.0000] <jorendorff>
Hixie_: Do you call (or plan to call) "Initialization"? http://people.mozilla.org/~jorendorff/es6-draft.html#sec-initialization

[11:15:58.0000] <Hixie_>
i don't do anything yet

[11:16:11.0000] <Hixie_>
i'm waiting for allen to update the spec like he said he would before i try to reference it

[11:16:31.0000] <Hixie_>
(that involves changing that part, amongst others)

[11:18:38.0000] <Hixie_>
jorendorff: btw, when the spec says things like "Return ProcessLoadDependencies(load, loader, depsList)", does it mean to return the result of calling that operation, or to return a reference to that operation bound to those arguments?

[11:18:53.0000] <jorendorff>
Return the result of.

[11:18:58.0000] <jorendorff>
Hixie_: OK. So, one thing "Initialization" does is create the initial Realm.

[11:19:08.0000] <jorendorff>
A Realm is a global and all the associated junk

[11:19:20.0000] <Hixie_>
allenwb assures me that that initial realm is ignorable

[11:19:22.0000] <Hixie_>
because it's never used

[11:19:39.0000] <jorendorff>
oh, is he going to delete that?

[11:19:50.0000] <Hixie_>
i think he wants to keep it for node.js or something

[11:20:06.0000] <jorendorff>
Hixie_: ...great.

[11:20:14.0000] <jorendorff>
Hixie_: In any case, when you create a realm...

[11:20:48.0000] <jorendorff>
there's no loader initially; what HTML has to do is make one, and then set the realm's [[Loader]] to it.

[11:21:44.0000] <Hixie_>
where does the realm get created?

[11:22:45.0000] <jorendorff>
Hixie_: (this is not terribly familiar stuff to me)

[11:23:00.0000] <Hixie_>
who is it familiar to? everyone i speak to says that. :-/

[11:23:22.0000] <jorendorff>
Hixie_: My guess is, dherman or allenwb wrote all this.

[11:24:16.0000] <Hixie_>
is anyone implementing it?

[11:24:22.0000] <Hixie_>
i mean, they're the people who'd be most familiar with it...

[11:24:42.0000] <jorendorff>
Hixie_: I want to implement Reflect.Realm because I think it's cool, there's a guy at Moz interested, but it's just not done yet

[11:24:54.0000] <jorendorff>
 I mean the *spec* isn't shovel-ready

[11:25:14.0000] <Hixie_>
ah

[11:25:19.0000] <Hixie_>
maybe i'm just doing all this too early

[11:25:24.0000] <jorendorff>
I can tell you generally how it's supposed to work

[11:25:33.0000] <jorendorff>
HTML must have stuff that happens when a new window or iframe is created, so a new Window is needed

[11:25:42.0000] <Hixie_>
what i am really trying to do ultimately is extend the module system so that it's the same system that handles loading e.g. images and style sheets

[11:25:52.0000] <jorendorff>
yes

[11:26:09.0000] <jorendorff>
well, the Loader stuff at least has some concrete semantics, though it's been 100% stripped of comments

[11:26:09.0000] <Hixie_>
"When a browsing context is first created, it must be created with a single Document in its session history, whose address is about:blank, which is marked as being an HTML document, whose character encoding is UTF-8, and which is both ready for post-load tasks and completely loaded immediately, along with a new Window object that the Document is associated with."

[11:26:41.0000] <Hixie_>
looks like allen said i then had to do some of the steps of 8.5 Initialization, in particular calling 8.5.1 InitializeFirstRealm ( realm ) after calling  CreateRealm().

[11:26:48.0000] <Hixie_>
based on this e-mail i'm looking at

[11:26:58.0000] <Hixie_>
but he's going to rename that to InitializeHostDefinedRealm

[11:27:01.0000] <jorendorff>
ok, well, i won't try to get in the middle of that

[11:27:04.0000] <jorendorff>
sounds like fun

[11:27:30.0000] <Hixie_>
so anyway, the point is you're saying i need to create the Loader here too?

[11:27:32.0000] <Hixie_>
ok

[11:27:37.0000] <Hixie_>
that sounds doable

[11:27:47.0000] <Hixie_>
that's good, actually, it means i can define what exactly the Loader is

[11:27:48.0000] <jorendorff>
yeah.

[11:27:50.0000] <jorendorff>
yes

[11:28:01.0000] <jorendorff>
that's the design intent of the module loader, we don't have "fetch", you do

[11:28:01.0000] <Hixie_>
and make it something more elaborate than ES's built-in Loader

[11:28:46.0000] <Hixie_>
i wonder how hard it would be to extend it enough to support  import styles from "foo.css";

[11:29:25.0000] <Hixie_>
or  import html from "htmlimport.html";

[11:29:33.0000] <jorendorff>
not so hard. let's see. switching behaviors based on the file extensions is a little weird

[11:29:45.0000] <Hixie_>
i was thinking switching based on magic keywords "styles" and "html"

[11:29:49.0000] <Hixie_>
or, based on the MIME type of the fetched file

[11:30:15.0000] <Hixie_>
not sure what you'd do with the keyword if you base it on the MIME type

[11:30:21.0000] <jorendorff>
ok

[11:30:26.0000] <Hixie_>
but basing it on the MIME type seems logical too

[11:31:06.0000] <Hixie_>
maybe import foo from "mystylesheet"; causes a "foo" variable whose value is the created <link> element to be exposed

[11:31:14.0000] <Hixie_>
that would be quite useful

[11:31:30.0000] <Hixie_>
i wonder if the "import" machinery can handle the thing being exposed not being a Module

[11:31:33.0000] <jorendorff>
that's doable, I'm like 98% sure

[11:31:43.0000] <jorendorff>
damn

[11:31:46.0000] <jorendorff>
you're right, it can't

[11:31:51.0000] <Hixie_>
or maybe i still export a Module but i just add some new fields on it

[11:31:54.0000] <jorendorff>
right

[11:31:57.0000] <jorendorff>
that is doable

[11:31:59.0000] <Hixie_>
to expose the underlying <link> or whatnot

[11:32:00.0000] <jorendorff>
just by specifying a suitable "translate" and "instantiate" hook

[11:32:06.0000] <jorendorff>
instantiate containing the important part

[11:32:35.0000] <Hixie_>
i'm gonna try to finish this flowchart, i think. it's helping me a lot in getting a handle on this thing.

[11:32:46.0000] <Hixie_>
and i can't really make progress til allen's done these changes anyway.

[11:32:56.0000] <jorendorff>
flow chart?

[11:33:20.0000] <Hixie_>
<Hixie_> right now i've got http://www.gliffy.com/go/publish/6036438

[11:34:14.0000] <Hixie_>
bbiab, lunch

[11:34:18.0000] <Hixie_>
thanks for the help so far

[11:37:38.0000] <Hixie_>
(filed https://www.w3.org/Bugs/Public/show_bug.cgi?id=26546 on the import styles idea)

[12:46:01.0000] <smaug____>
if a script in page A creates some object using 'new someotherwindow.Foobar();', what is the incumbent settings object when ctor is called?

[12:46:54.0000] <smaug____>
/me never remembers this stuff, and 'incumbent settings object' is so bizarre term that it really doesn't help with this

[12:49:58.0000] <smaug____>
Hixie_: ^

[12:50:14.0000] <smaug____>
I assume incumbent settings object is the one from page A

[13:01:21.0000] <jtcranmer>
annevk: I'm aware they're not equivalent

[13:02:08.0000] <jtcranmer>
the question is, since they are both A-labels of faß.de (just under different definitions of transitonal/nontransitional processing)

[13:02:33.0000] <jtcranmer>
would it be better to, e.g., consider user⊙fd and user⊙xd to be "equal"

[13:03:41.0000] <smaug____>
Hixie_: any chance to get some examples of various settings object to the spec ?

[13:03:42.0000] <annevk>
no, registrars messed that up

[13:04:26.0000] <smaug____>
 incumbent settings object vs.  entry settings object

[13:04:37.0000] <annevk>
jtcranmer: well not just registrars, but also the IETF

[13:04:56.0000] <annevk>
and whoever else is to blame for IDNA2008

[13:08:15.0000] <jtcranmer>
annevk: theoretically, they're supposed to be owned by the same people

[13:08:20.0000] <jtcranmer>
which is why I bring it up

[13:08:52.0000] <annevk>
jtcranmer: in practice, they are owned by distinct entities

[13:09:17.0000] <annevk>
jtcranmer: which is also what the .de registry wants, but most (if not all) browsers consider bad for security

[13:10:38.0000] <jtcranmer>
the registrars even bungled that up?

[13:10:59.0000] <jtcranmer>
okay, so I'll treat all the assurances that IDNA says registrars are supposed to do as packs of lies

[13:11:45.0000] <jtcranmer>
/me heads out

[13:11:50.0000] <annevk>
so they a) don't want to handle bundling, b) in Germany they want ß and ss to be distinct

[13:15:53.0000] <Hixie_>
smaug____: yeah, it's A, i think, because that's all within the JS spec and the JS spec doesn't manipulate the stack of settings objects

[13:16:11.0000] <Hixie_>
smaug____: what part of "incumbent settings object" is bizarre? i'd happily use a better term if you have one

[13:16:37.0000] <smaug____>
Hixie_: just some example would be good

[13:16:48.0000] <smaug____>
 incumbent settings object vs. entry settings object

[13:19:48.0000] <Hixie_>
ah, that's a good idea

[13:19:55.0000] <Hixie_>
will file a bug on that

[13:19:59.0000] <smaug____>
I just filed

[13:20:28.0000] <Hixie_>
even better :-)

[13:20:29.0000] <Hixie_>
thanks!

[13:23:05.0000] <Hixie_>
jorendorff: does "The System object is the Loader Object instance associated with the Realm of the current global object" mean "The property "System" of the global object is the current Realm's [[loader]]"?

[13:30:26.0000] <Domenic>
Hixie_: I am 90% sure that is true

[13:30:47.0000] <Hixie_>
interesting

[13:31:02.0000] <Hixie_>
(isn't window.System going to clash with existing code?)

[13:32:43.0000] <Domenic>
I wonder what happens when you override window.System

[13:32:48.0000] <Domenic>
will the browser try to use it anyway?

[13:32:59.0000] <Domenic>
or does it only work if you override properties of the built-in window.System

[13:33:18.0000] <Domenic>
System is a dumb name anyway, maybe it'll conflict and they'll change it

[13:33:25.0000] <TabAtkins>
The browser will certainly use the original one.

[13:33:43.0000] <Domenic>
TabAtkins: but the whole point of overridable loader hooks is to allow arbitrary user code to execute at those points

[13:33:55.0000] <TabAtkins>
Ah, then I dunno.

[13:34:02.0000] <Domenic>
yeah, unclear

[13:34:19.0000] <Domenic>
Hixie can probably tell us, now that he is an expert at this stuff ;)

[13:34:34.0000] <Hixie_>
i haven't traced this back far enough to reach [[loader]]

[13:34:38.0000] <Hixie_>
so i'll let you know!

[13:38:00.0000] <Hixie_>
/me wonders what "Return PromiseThen(p, F)" means

[13:38:11.0000] <Hixie_>
(http://people.mozilla.org/~jorendorff/es6-draft.html#sec-promisethen is blank)

[13:38:16.0000] <Hixie_>
Domenic: any idea? ^

[13:38:39.0000] <jorendorff>
it needs to be changed. I'll file a bug. it means p.then(F)

[13:39:00.0000] <jorendorff>
possibly with some automatic coercions going on

[13:39:05.0000] <Hixie_>
what does that mean? return a new promise that resolves when F has been invoked?

[13:39:35.0000] <jorendorff>
Yes.

[13:40:09.0000] <Hixie_>
k

[13:45:33.0000] <Domenic>
Hixie_: ah those sections rae still blank, wonderfully. They're supposed to just be un-tamper-withable versions of p.then(F), ya

[13:45:50.0000] <Hixie_>
jorendorff: why does the UpdateLinkSetOnLoad(linkSet, load) Abstract Operation sometimes (though not always) return a value? the return value seems to be ignored by the caller (which is always LoadSucceeded Functions)

[13:46:27.0000] <Domenic>
Hixie_: just guessing, but often "return values" in ES are just "did this function throw an exception or not" exception ~= abrupt completion.

[13:46:51.0000] <Hixie_>
that's ignored too

[13:46:58.0000] <Hixie_>
the caller just says "Call UpdateLinkSetOnLoad(linkSet, load)."

[13:47:03.0000] <Hixie_>
it ignores the result, abrupt or not

[13:47:08.0000] <Domenic>
ah OK. My guess is spec bug then. Allen caught many such bugs in my promises draft.

[13:48:04.0000] <jorendorff>
Hixie_: yeah, it should be changed for clarity to just say "7.a. Call LinkSetFailed... b. Return."

[13:48:12.0000] <Hixie_>
k

[13:50:59.0000] <jorendorff>
Domenic: i added a comment to https://bugs.ecmascript.org/show_bug.cgi?id=2683 explaining what those abstract operations are for

[13:51:39.0000] <jorendorff>
Domenic: as for System conflicting -- it *is* a dumb name

[13:52:20.0000] <Domenic>
jorendorff: ya looks good. I imagine all of the user-exposed versions will be implemented in terms of the abstract operations in one way or another.

[13:53:15.0000] <jorendorff>
of course any name could have a conflict -- anyway, assuming one does occur with System, I think the intent was to use Realm.[[Loader]] consistently everywhere

[13:53:59.0000] <Hixie_>
Realm.[[loader]], lowercase L

[13:54:17.0000] <Hixie_>
([[Loader]] is used on other records)

[13:55:06.0000] <Hixie_>
given PromiseThem(PromiseNew(A), B) in what order do A and B execute?

[13:55:10.0000] <Hixie_>
Then, not Them

[13:55:33.0000] <Hixie_>
or are none of them executed immediately?

[13:55:57.0000] <jorendorff>
where?

[13:56:13.0000] <Hixie_>
where what?

[13:56:43.0000] <jorendorff>
where does this occur?

[13:56:47.0000] <Hixie_>
http://people.mozilla.org/~jorendorff/es6-draft.html#sec-requestload

[13:57:03.0000] <caitp>
if native promises are anything like the conventions that have been agreed on by the community over the past few years, PromiseThen(not-a-function) should be irrelevant

[13:57:07.0000] <jorendorff>
(but Domenic can check me -- the answer is, A would be called immediately, and B definitely not during this event turn)

[13:57:17.0000] <Hixie_>
step 6 does "PromiseNew(F)", where F is a "CallNormalize(resolve, reject) Functions"

[13:57:21.0000] <TabAtkins>
I assume that PromiseNew(A) is the internal equivalent of new Promise(A).

[13:57:24.0000] <jorendorff>
yes

[13:57:35.0000] <jorendorff>
that one actually has spec text

[13:57:38.0000] <Hixie_>
so what are the "resolve" and "reject" arguments set to?

[13:57:48.0000] <TabAtkins>
So then yeah, A is executed immediately, as part of constructrion of the promise.  B is executed when/if the first promise fulfills.

[13:58:05.0000] <TabAtkins>
The resolver and rejecter for the promise beign constructed.

[13:58:07.0000] <Domenic>
yepyep, Tab's got it

[13:58:15.0000] <Hixie_>
i tried to follow it down, but "resolvingFunctions.[[Resolve]], resolvingFunctions.[[Reject]]" doesn't mean anything to me

[13:58:20.0000] <TabAtkins>
Methods that, when called, resolve or reject that promise.  They're the only way to manipulate the promise's state.

[13:58:46.0000] <jorendorff>
/me is slightly relieved that the Promises spec is not a great deal more comprehensible than the Loader spec

[13:58:50.0000] <jorendorff>
though, i hasten to add

[13:59:02.0000] <jorendorff>
much more complete and correct

[13:59:05.0000] <Hixie_>
oh they're the spec-provided callbacks to actually resolve the promise, ok

[13:59:13.0000] <TabAtkins>
Yeah.

[13:59:56.0000] <Hixie_>
"Return the result of calling the [[Call]] internal method of resolve passing undefined and (name) as arguments" seems like a really convoluted way of just saying "resolve the promise"

[14:00:04.0000] <Hixie_>
but ok

[14:00:15.0000] <jorendorff>
yep

[14:00:19.0000] <TabAtkins>
Urf, agreed.

[14:00:45.0000] <jorendorff>
this is one of those places where i would totally just file a pull request, if TC39 had a process

[14:00:54.0000] <TabAtkins>
This is why I switched the spec for the color classes to just use actual JS, because writing JS in prose is *terrible*.

[14:01:13.0000] <TabAtkins>
(And I needed enough detail that it was kinda bad to use prose.)

[14:01:18.0000] <Hixie_>
TabAtkins: i would have just said "resolve the promise with 'name' as the value"

[14:01:19.0000] <TabAtkins>
Normal prose, that is.

[14:01:24.0000] <Hixie_>
which seems like sufficient detail...

[14:01:39.0000] <Hixie_>
(along with corresponding changes around it, obviously)

[14:01:44.0000] <Hixie_>
anyway

[14:01:45.0000] <TabAtkins>
"Resolve promise F with "value"." is the defined language, I think.

[14:02:48.0000] <Hixie_>
yeah, something like that would be fine

[14:04:11.0000] <Hixie_>
man, the ES spec uses this "Return Foo()" (where Foo() returns 'undefined' or nothing at all) style a _lot_

[14:04:15.0000] <Hixie_>
it's really confusing

[14:05:28.0000] <Hixie_>
so wait, wait, wait

[14:05:47.0000] <Hixie_>
the function passed to PromiseNew() has to have 'resolve' and 'reject' arguments, right?

[14:06:07.0000] <TabAtkins>
Well, it'll get passed those args.  It doesn't necessarily have to have them, obviously, since you're always allowed to ignore input args.

[14:06:11.0000] <Hixie_>
but why does the function passed as the second argument to PromiseThen() not have to also?

[14:06:25.0000] <TabAtkins>
PromiseThen() is nothing like PromiseNew().

[14:06:43.0000] <Hixie_>
i thought it was the same thing but chaining on from a previous promise

[14:07:21.0000] <TabAtkins>
It doesn't get resolve/reject functions.  You either return a value or throw a value; that resolves/rejects the chained promise automatically.

[14:07:47.0000] <TabAtkins>
(The constructor doesn't have the same behavior because you sometimes want to wait and resolve things *later*, by passing the resolve/reject functions to something outside.)

[14:07:52.0000] <Hixie_>
so there's kind of two types of promises? those whose handlers are async and those whose handlers are sync?

[14:07:56.0000] <TabAtkins>
No.

[14:08:34.0000] <Hixie_>
i'm so confused

[14:08:54.0000] <TabAtkins>
Most of the time, you deal with a promise by having your callback either (a) return a value (fulfilling the promise), (b) throw (rejecting the promise), or (c) return another promise (resolving the promise and slaving it to your returned promise, so it'll fulfill/reject later).

[14:09:12.0000] <TabAtkins>
But you need to bootstrap the promise in the constructor, so you're instead given the handles directly.

[14:09:27.0000] <Hixie_>
but CallNormalize() just does things synchronously

[14:09:32.0000] <Hixie_>
so why bother with a promise at all?

[14:09:34.0000] <TabAtkins>
I have no idea what that is, so shrug.

[14:09:48.0000] <TabAtkins>
I can just tell you about promises, not about whatever other crazy stuff the ES spec has in it.

[14:10:04.0000] <Hixie_>
jorendorff: ^

[14:10:25.0000] <Hixie_>
jorendorff: why does RequestLoad() use a promise to call CallNormalize()?

[14:10:52.0000] <jorendorff>
ok, this part of the pipeline is actually going to be a pleasant surprise for you, i hope

[14:10:59.0000] <jorendorff>
because it all sort of makes sense actually

[14:11:02.0000] <Hixie_>
try me :-)

[14:11:07.0000] <jorendorff>
second, multiple conversations...

[14:11:51.0000] <jorendorff>
ok. to answer your question first

[14:12:01.0000] <jorendorff>
it's just so that the normalize hook is called async

[14:12:04.0000] <jorendorff>
for consistency with all the other hooks

[14:12:10.0000] <jorendorff>
they're all called async in a fresh event loop turn

[14:12:14.0000] <Hixie_>
wait, it is?

[14:12:29.0000] <Hixie_>
i thought we established PromiseNew() would synchronously call the executor

[14:12:50.0000] <jorendorff>
yes

[14:12:51.0000] <jorendorff>
definitely

[14:13:01.0000] <jorendorff>
/me looks at the spec text

[14:13:24.0000] <Hixie_>
PromiseNew() calls InitializePromise() which calls "the [[Call]] internal method of executor with undefined as thisArgument and (resolvingFunctions.[[Resolve]], resolvingFunctions.[[Reject]]) as argumentsList"

[14:13:43.0000] <jorendorff>
PromiseNew should call its argument synchronously

[14:13:51.0000] <jorendorff>
just like new Promise(f)

[14:13:54.0000] <Hixie_>
so then how is that calling it async

[14:14:15.0000] <jorendorff>
huh, it is totally calling it sync

[14:14:17.0000] <jorendorff>
/me is confused

[14:14:27.0000] <Hixie_>
glad it's not just me :-P

[14:14:32.0000] <jorendorff>
maybe it got "fixed"

[14:14:36.0000] <jorendorff>
because the old way looked weird

[14:14:43.0000] <jorendorff>
it was like, why are you creating this pointless promise?

[14:14:48.0000] <jorendorff>
sorry

[14:14:54.0000] <jorendorff>
so let's address the spec as it is then

[14:15:26.0000] <jorendorff>
Hixie_: In that case the main difference between using PromiseNew to call a function

[14:15:28.0000] <jorendorff>
and just directly calling it

[14:15:53.0000] <jorendorff>
Hixie_: is that any exceptions thrown by the function are then caught for you and PromiseNew returns a rejected promise

[14:16:32.0000] <jorendorff>
(step 8 of InitializePromise, called from PromiseNew)

[14:16:54.0000] <Hixie_>
i was wondering why CallNormalise caught an abrupt termination but then just returned it instead of calling the rejection handler

[14:17:00.0000] <Hixie_>
i guess it's the same either way

[14:17:24.0000] <Hixie_>
but ironically in the spec prose it ends up not being automatic since you have to catch all the abrupt terminations

[14:17:24.0000] <jorendorff>
right. think of it this way

[14:17:29.0000] <jorendorff>
if you were implementing all this in JS

[14:17:51.0000] <jorendorff>
you would *definitely* do it this way, because it's quite a bit nicer to have `new Promise()` catch the exception than write a try/catch block

[14:18:16.0000] <jorendorff>
try/catch being what it is

[14:19:57.0000] <Hixie_>
ok so. next question then. AddDependencyLoad() takes an argument depLoad. Where does that come from?

[14:20:30.0000] <Hixie_>
it's called as the callback from a promise that fires once GetOrCreateLoad() has returned, if i'm following this right

[14:20:53.0000] <Hixie_>
but GetOrCreateLoad() is just a promise callback, it doesn't resolve a new promise, so what's the value of the promise that gets passed to AddDependencyLoad() ??

[14:21:37.0000] <Hixie_>
is it the same "name" value as was passed to GetOrCreateLoad() from CallNormalize() ?

[14:27:30.0000] <jorendorff>
/me looks

[14:32:55.0000] <jorendorff>
Hixie_: ok. PromiseThen does chain, so looking at RequestLoad, we have

[14:33:17.0000] <jorendorff>
5. it calls new Promise(CallNormalize) directly

[14:33:34.0000] <jorendorff>
8. and calls .then(GetOrCreateLoad) on that

[14:33:45.0000] <jorendorff>
now back to ProcessLoadDependencies

[14:34:02.0000] <jorendorff>
4.e.  and we call .then(AddDependencyLoad) on that

[14:35:05.0000] <jorendorff>
CallNormalize figures out the normalized name to use

[14:35:37.0000] <jorendorff>
GetOrCreateLoad either finds an already-loaded Module, a Load already in progress, or it kicks off a new Load

[14:37:02.0000] <jorendorff>
AddDependencyLoad adds that as a dependency of this load.

[14:37:03.0000] <Hixie_>
jorendorff: with you so far

[14:37:18.0000] <Hixie_>
jorendorff: but what's the argument to AddDependencyLoad()? where does it come from?

[14:37:24.0000] <jorendorff>
GetOrCreateLoad always returns a Load record, even for an already-loaded Module it just synthesizes one

[14:37:36.0000] <jorendorff>
that is the value passed to AddDependencyLoad

[14:37:41.0000] <jorendorff>
it's a record

[14:37:42.0000] <Hixie_>
oh!

[14:37:59.0000] <Hixie_>
the return value of the callback is what sets the argument of the next callback

[14:38:00.0000] <Hixie_>
ok

[14:38:04.0000] <jorendorff>
yes

[14:38:38.0000] <Hixie_>
(if GetOrCreateLoad() wanted to be async, what would it return? a promise? does that then automatically get handled somehow?)

[14:38:47.0000] <jorendorff>
yes

[14:39:25.0000] <jorendorff>
yes, so suppose you d

[14:39:27.0000] <jorendorff>
*you do

[14:39:32.0000] <jorendorff>
p1.then(function (v1) {

[14:39:54.0000] <jorendorff>
    return <<some new Promise called p2>>;

[14:40:01.0000] <jorendorff>
}).then(function (v2) {

[14:40:04.0000] <jorendorff>
   ...and so on...

[14:40:05.0000] <jorendorff>
});

[14:40:22.0000] <Hixie_>
is it http://people.mozilla.org/~jorendorff/es6-draft.html#sec-promise-resolve-functions that handles this?

[14:40:23.0000] <jorendorff>
v2's eventual value is whatever p2 finally settles to

[14:40:32.0000] <Hixie_>
i'm not seeing anything there that checks if the return value is a promise

[14:40:42.0000] <Hixie_>
(what if you actually want to return a promise? not just a promise to a value?)

[14:41:30.0000] <jorendorff>
Hixie_: what the spec does instead of "if v is a Promise" is "if v has a callable .then method"

[14:41:47.0000] <jorendorff>
(if you actually want to return a promise... I don't know, I think you're screwed? Domenic?)

[14:42:27.0000] <jorendorff>
(some folks thought that was inelegant, but the design already had so much traction in real code, it was kind of a fiat accompli or whatever)

[14:57:10.0000] <TabAtkins>
The current API can't fulfill a promise to a promise, because it always uses the "resolve" algorithm, which automatically slaves to promises.  We don't directly expose the "fulfill" algorithm yet, which would allow fulfilling a promise with a promise directly.

[15:16:08.0000] <Hixie_>
jorendorff: oh wow, really? I don't have to return a Promise, i can return a { then: function () } ?

[15:16:16.0000] <Hixie_>
fascinating

[15:16:30.0000] <jorendorff>
yes, you can.

[15:16:52.0000] <boogyman>
So it's duck-typing?

[15:16:56.0000] <jorendorff>
yeah

[15:17:43.0000] <jorendorff>
as an implementer, i'm not crazy about stuff like that (in the absence of use cases). it creates corner cases

[15:21:00.0000] <Hixie_>
why does Promise.resolve() not also allow that then?

[15:21:18.0000] <Hixie_>
wait, this is going to cause all kinds of problems

[15:21:37.0000] <Hixie_>
it means that not only can you not return a promise, you also can't return any object that happens to have a callable 'then'

[15:22:56.0000] <caitp>
sounds almost exactly like aplus

[15:32:44.0000] <jorendorff>
i agree that that's what it means

[15:34:06.0000] <jorendorff>
can't say if it'll cause all kinds of problems in practice

[15:34:13.0000] <caitp>
on the other hand, it means you can consume non-"native" implementations

[15:34:22.0000] <caitp>
these same rules have been in place for a few years

[15:34:39.0000] <caitp>
people have gotten pretty used to them, I think

[15:40:20.0000] <Hixie_>
well it means e.g. if i want to return an object that's a dictionary of english words with functions attached to them, the code will suddenly break utterly if one of those words is "then".

[15:41:13.0000] <Hixie_>
if i'm the F in a construct like PromiseCatch(PromiseThen(p, F), G)

[15:41:15.0000] <caitp>
sure, but in practice people do things like `return { data: theDictionary };` or similar

[15:41:17.0000] <Hixie_>
and I return a promise

[15:41:57.0000] <Hixie_>
and that promise is a construct like PromiseThen(PromiseNew(A), B)

[15:42:01.0000] <Hixie_>
and B throws

[15:42:07.0000] <Hixie_>
does G get called?

[15:42:24.0000] <Hixie_>
Domenic: ^

[15:43:19.0000] <jorendorff>
Hixie_: yes

[15:43:30.0000] <Hixie_>
k

[15:43:31.0000] <Hixie_>
thanks

[15:43:49.0000] <jorendorff>
in the lingo, the promise PromiseThen(p, F) is not "settled" when F returns

[15:43:55.0000] <jorendorff>
if it returns a thenable

[15:44:04.0000] <jorendorff>
instead, we let it ride

[15:44:19.0000] <jorendorff>
double the stakes

[15:44:34.0000] <jorendorff>
"now you have two promises"

[15:44:37.0000] <jorendorff>
and other pithy sayings

[15:51:28.0000] <Hixie_>
is %Loader% the same as the Realm's [[loader]] (which is the same as window.System)?

[15:51:48.0000] <Hixie_>
(the definition of %Loader% is blank)

[15:53:34.0000] <TabAtkins>
Hixie_: Re "you also can't return any object that happens to have a callable 'then'", yup, I fought against that crap.  So did Alex Russell, for a while - he was arguing for "ghetto branding" (the presence of an improbably-named property) as we don't have Symbols quite yet.  But we lost.

[15:54:05.0000] <Hixie_>
TabAtkins: i don't understand the argument for this. I mean, other parts of the spec use IsPromise() without controversy as far as I can tell.

[15:54:34.0000] <TabAtkins>
It's so that existing Promise libraries (conforming to the A+ spec) can be used directly as promises without any updates.

[15:54:43.0000] <TabAtkins>
I still don't think it's worth it, but shrug.

[15:54:44.0000] <Hixie_>
but they can't with other parts of the api

[15:54:50.0000] <caitp>
domenic you aren't writing a CL for that are you? that one looks simple!

[15:54:57.0000] <TabAtkins>
Right, I think a lot of this is a mess. :/

[15:55:03.0000] <Hixie_>
e.g. you can't call Promise.resolve() with an a+ promise

[15:55:19.0000] <TabAtkins>
That's actualy surprising, and likely a mistake.

[15:55:33.0000] <TabAtkins>
Promise.resolve() is supposed to ahve the same semantics as returning a value from a promise callback.

[15:56:20.0000] <TabAtkins>
Promise.resolve(foo) === new Promise(function(resolve){ resolve(foo); }) === somePromise.then(function(){ return foo}, function(){ return foo; })

[15:56:26.0000] <TabAtkins>
That's what the semantics are *supposed* to be.

[15:57:46.0000] <Hixie_>
well right now Promise.resolve({then:foo}); is not the same as Promise.resolve(new Promise(foo)) (i'm assuming i got those right)

[15:58:13.0000] <TabAtkins>
Well, it's unlikely that the same "foo" can be used in both those places, but sure.

[15:58:59.0000] <Hixie_>
yeah i don't really understand this promise stuff

[15:59:08.0000] <Hixie_>
and the more i learn about it the less clear it gets :-(

[15:59:25.0000] <TabAtkins>
I don't know why; they feel really simple to me.

[15:59:29.0000] <TabAtkins>
But oh well.

[16:00:28.0000] <TabAtkins>
A consistent pattern in your confusion seems to be that you continually get confused over the difference between the contruction callback and the then() callbacks.

[16:00:46.0000] <TabAtkins>
Fix that, and maybe it will help?

[16:01:09.0000] <Hixie_>
well what would the equivalent of Promise.resolve({then:foo}) be using a promise and 'foo'?

[16:01:50.0000] <boogyman>
My understanding would be a TypeError, right?

[16:01:56.0000] <TabAtkins>
{then:foo} is an object that happens to have a "then" property with the value foo.  Maybe that's a method, but we have no idea what it does.

[16:02:05.0000] <Hixie_>
assume 'foo' is a function

[16:02:23.0000] <TabAtkins>
With a promise, that's, um, "somePromise.then = foo;", which is almost certainly not what you're thinking about.

[16:04:55.0000] <Domenic>
caitp: which one?

[16:05:00.0000] <TabAtkins>
(Here, you're confusing setting "then" to some value and calling "then" with an argument.)

[16:05:04.0000] <Hixie_>
TabAtkins: take   new Promise(function(a, b) { a() }).then(function () { return { then: foo } });

[16:05:20.0000] <Hixie_>
TabAtkins: what's the equivalent of that but using a real promise instead of "{ then: foo }" ?

[16:06:00.0000] <Hixie_>
TabAtkins: make that   new Promise(function(a, b) { a() }).then(function () { doSomething(); return { then: foo } });

[16:06:05.0000] <TabAtkins>
There isn't, because a real promise won't have "foo" as the value of its "then" property.  It'll have, most likely, the default value of Promise.prototype.then.

[16:06:20.0000] <Hixie_>
?

[16:06:23.0000] <TabAtkins>
I'm not sure what you're itnending with the thenable there, so it's hard to answer.

[16:06:28.0000] <Hixie_>
that seems like a non-sequitur

[16:06:53.0000] <TabAtkins>
{then:foo} is an object with a then() method that does something.  A Promise is also an object with a then() method that does something.

[16:07:01.0000] <Hixie_>
right now if you return a {then:foo} from a then() callback, it calls foo() in a microtask later.

[16:07:09.0000] <TabAtkins>
Yes.

[16:07:20.0000] <Hixie_>
ok so you can do this also with real promises right?

[16:07:27.0000] <TabAtkins>
And the same thing happens to a promise - its then() method gets called later.

[16:07:28.0000] <Hixie_>
instead of this fake object with a 'then' property?

[16:07:42.0000] <TabAtkins>
Depends on what you're intending - I'm very confused here.

[16:07:46.0000] <Hixie_>
so how do you return a promise whose then() method calls foo?

[16:08:04.0000] <TabAtkins>
Is your *intention* that foo() get called at some point?  That is, that the foo() method itself is important, not just a metasyntactic variable?

[16:08:11.0000] <Hixie_>
yes

[16:08:17.0000] <TabAtkins>
Ah, k.

[16:08:23.0000] <Hixie_>
first doSoemthing() is called, then foo() is called

[16:08:27.0000] <Hixie_>
in separate microtasks

[16:09:17.0000] <TabAtkins>
And you still want a promise returned from the chain like normal?  (In the thenable example you've provided, unless foo() acts correctly, you'll probably get a rejected promise out at the end.)

[16:09:45.0000] <Hixie_>
what is "acts correctly"?

[16:10:01.0000] <Hixie_>
isn't it just "not throw"?

[16:10:04.0000] <boogyman>
implements the same interface as a Promise()

[16:10:06.0000] <TabAtkins>
`new Promise(function(a, b){ a(); })` is equivalent to `Promise.resolve()`, so I'll pretend you used that, since it's clearer.

[16:10:34.0000] <TabAtkins>
I'm not sure what the expected beahvior of a then() method is, precisely. I haven't looked into it in detail, and don't plan to write my own promise impl.

[16:11:12.0000] <TabAtkins>
So, your requirement can just be Promise.resolve().then(doSomething).then(foo)

[16:11:45.0000] <Hixie_>
hold on, you've moved 'foo' outside of the original callback

[16:11:50.0000] <TabAtkins>
???

[16:12:03.0000] <TabAtkins>
I did what you asked for. You want something different, give me better requirements. ^_^

[16:12:10.0000] <boogyman>
Then's are chainable.

[16:12:17.0000] <Hixie_>
ok a better example: suppose you have   new Promise(function(a, b) { a() }).then(F);

[16:12:32.0000] <Hixie_>
and F is function F() { doSomething(); return { then: foo } }

[16:12:36.0000] <TabAtkins>
Okay, `fulfilledPromise.then(F)` for clarity.

[16:13:09.0000] <Hixie_>
so the question is, how do you rewrite F so it uses a real promise instead of { then: foo }

[16:13:28.0000] <TabAtkins>
That code is *not* the normal way to have a method get called later.  Don't use thenables on purpose unless you're actually intending them to be promise-likes.

[16:13:38.0000] <Hixie_>
i've no idea what that means

[16:13:46.0000] <TabAtkins>
And I don't know what your code means.

[16:13:46.0000] <Hixie_>
what's a "thenable"

[16:13:53.0000] <TabAtkins>
An object with a callable "then" property.

[16:14:04.0000] <TabAtkins>
Or, in other words, a Promise or Promise-like.

[16:14:16.0000] <Hixie_>
"don't use a promise unless you want a promise"?

[16:14:19.0000] <Hixie_>
i don't know what i want

[16:14:28.0000] <Hixie_>
i'm trynig to work out what it means to return a {then:foo}

[16:14:39.0000] <TabAtkins>
It *appears* that you want doSomething() to be called in one microtask, and then foo() in another.

[16:14:57.0000] <TabAtkins>
You're for some reason trying to achieve this by constructing a promise-like object, which is weird and almost certainly not what you want.

[16:15:13.0000] <Hixie_>
all i'm trying to do is understand what the spec means

[16:15:28.0000] <Hixie_>
the spec allows you to return any object with a "then" property that's callable

[16:15:34.0000] <caitp>
Domenic, v8:3499 --- that one seems really trivial, so I wanna write that one while I make dinner :3

[16:15:50.0000] <caitp>
but if you've already done it then no big deal

[16:15:51.0000] <Domenic>
caitp: haha ya be my guest, I haven't gotten my dev environment set up

[16:15:55.0000] <TabAtkins>
Returning {then:foo} means the same thing as returning a promise.  Except that if foo() doesn't do what the spec expects (I dont' know the details of this), weird things will happen.

[16:16:44.0000] <TabAtkins>
Where "weird" is probably "the chained promise gets rejected".

[16:17:16.0000] <Hixie_>
and if you return a promise, what happens? it just gets its "then" method called immediately?

[16:17:32.0000] <TabAtkins>
I *think* all that happens is that the spec calls foo() at some appropriate time, and creates its own (native) promise that either fulfills or rejects, based on whether foo() returns or throws.  But I'm not certain if that's exactly right.

[16:17:45.0000] <TabAtkins>
"immediately": well, whenever the spec says to.

[16:17:51.0000] <TabAtkins>
I don't recall the details.

[16:18:05.0000] <Hixie_>
i'm reading the spec as we speak and i can't figure out the details either

[16:18:09.0000] <Hixie_>
whence my confusion

[16:18:14.0000] <TabAtkins>
Oh wait, I remember a bit better.

[16:18:17.0000] <TabAtkins>
So, this is complicated.

[16:18:25.0000] <TabAtkins>
And now there's a fire drill, so bbiab

[16:56:55.0000] <Hixie_>
i think i'm suffering from some sort of stockholm syndrome with the loader

[16:57:37.0000] <Hixie_>
i've reached the ProceedToTranslate callers

[16:58:03.0000] <Hixie_>
basically i've flow-charted everything from ProceedToTranslate() to UpdateLinkSetOnLoad()


2014-08-09
[17:00:18.0000] <SamB>
Hixie_: what's the ransom set at?

[17:20:22.0000] <Hixie_>
SamB: hard to say

[17:20:41.0000] <SamB>
which of you has been kidnapped?

[17:25:10.0000] <Hixie_>
definitely me

[17:31:27.0000] <Hixie_>
crap, turns out i missed some stuff

[03:22:25.0000] <hemanth>
with hosting, why is that functions get hosted first then vars ?

[03:23:42.0000] <Ms2ger>
*hoisting

[03:24:23.0000] <hemanth>
ha, hoisting

[03:24:43.0000] <hemanth>
like flag hoisting ;)

[03:26:09.0000] <hemanth>
Ms2ger, any specific reason for that?

[03:26:17.0000] <Ms2ger>
I don't know

[03:27:53.0000] <hemanth>
oki

[04:16:08.0000] <annevk>
https://twitter.com/antimattur/status/498042091805900800

[05:03:35.0000] <annevk>
I wonder why hardware you buy in 2014 still comes with a CD. I don't own any hardware that takes a CD.

[07:16:12.0000] <hsivonen>
MikeSmith: I forgot to mention that I redeployed Validator.nu yesterday.

[07:16:18.0000] <hsivonen>
MikeSmith: thanks for the fixes

[13:41:15.0000] <MikeSmith>
hsivonen: excellent -- thanks, I'll push the changes to the W3C validator now too


2014-08-10
[06:14:19.0000] <GPHemsley>
Is there a way to make a flex item disappear if the flex container gets too small?

[07:34:47.0000] <astearns>
GPHemsley: you can give a flex item a min-width of 0px, a flex-basis of 0px, overflow:hidden and flex-shrink:1

[07:35:11.0000] <GPHemsley>
astearns: Interesting. Thanks!

[07:35:35.0000] <astearns>
that should make it disappear when there isn't enough width in the container

[07:35:47.0000] <astearns>
(change to height for a column flex container)

[07:38:55.0000] <MikeSmith>
astearns: has your team had any discussion about implementing "float: footnote"

[07:39:08.0000] <MikeSmith>
astearns: or have you thought any about it yourself at least

[07:39:21.0000] <astearns>
not implementing, but I've thought about footnotes

[07:39:25.0000] <MikeSmith>
ok

[07:39:56.0000] <astearns>
MikeSmith: I think that the footnote-flow/footnote-region approach is better (surprise!)

[07:40:04.0000] <MikeSmith>
heh

[07:40:38.0000] <MikeSmith>
ok, I didn't actually know there was a footnote-flow/footnote-region alternative

[07:40:51.0000] <astearns>
it's in Dave Cramer's updated gcpm

[07:40:56.0000] <MikeSmith>
oh

[07:40:59.0000] <MikeSmith>
URL?

[07:41:33.0000] <astearns>
http://dev.w3.org/csswg/css-gcpm/#footnote-area

[07:41:39.0000] <MikeSmith>
thanks

[07:41:40.0000] <astearns>
very preliminary

[07:41:43.0000] <MikeSmith>
ok

[07:42:06.0000] <MikeSmith>
ah yeah

[07:42:24.0000] <astearns>
we had some discussion about the approach at the last ftf

[07:42:59.0000] <MikeSmith>
oh, it's good to know there's been recent discussion

[07:44:34.0000] <astearns>
discussion: http://lists.w3.org/Archives/Public/www-style/2014Jun/0106.html

[07:46:42.0000] <MikeSmith>
/me looks

[07:47:49.0000] <MikeSmith>
/me ... and persuses slides at http://epubzero.blogspot.com/2014/05/footnotes-as-css-regions.html

[07:49:14.0000] <MikeSmith>
"Still requires magic" :( yeah

[07:49:31.0000] <MikeSmith>
would be nice to eliminate the magic

[07:50:39.0000] <astearns>
MikeSmith: one less-magic bit of basing it on named flows is that you can implement most of it in javascript (given regions support)

[07:50:47.0000] <astearns>
MikeSmith: we have proof of that in book.js

[07:51:10.0000] <MikeSmith>
ah OK will take a look at that too

[07:51:53.0000] <MikeSmith>
and yeah being able to implement most of it in js is a big win of course

[07:52:46.0000] <astearns>
off for a bit (picking people up from the airport)

[07:53:07.0000] <MikeSmith>
but if you implementing it in JS on top of native regions support, I wonder what other magic is needed

[07:53:30.0000] <MikeSmith>
astearns: ok thanks for all the pointers

[15:12:33.0000] <MikeSmith>
hsivonen: I think you might find the twitter discussion at https://twitter.com/sleevi_/status/498505466243084288 interesting

[15:16:49.0000] <MikeSmith>
hsivonen: on a related note, I'd be curious to hear your thoughts on FIDO some time

[15:42:05.0000] <MikeSmith>
hsivonen: just came across https://twitter.com/sleevi_/status/466641443759874049 as well

[15:44:08.0000] <MikeSmith>
hsivonen: "Chrome's sandbox is open. Our CDM layer is open ( https://code.google.com/p/chromium/codesearch#chromium/src/media/cdm/ppapi/&sq=package:chromium&rcl=1400004143 … ). We're both implementing the same thing the same way" ... "Heck, even the "download on demand" is there ( https://code.google.com/p/chromium/codesearch#chromium/src/chrome/browser/component_updater/widevine_cdm_component_installer.h&l=1 … )"

[15:50:16.0000] <MikeSmith>
Domenic: you also might find https://twitter.com/sleevi_/status/498505466243084288 worth reading

[15:51:28.0000] <MikeSmith>
Domenic: and maybe meeting up with Ryan f2f to talk some time (assuming you guys would likely be in the same place at the same time at some ome point)

[15:55:24.0000] <MikeSmith>
"Scope will creep and drain 4ever"

[15:56:22.0000] <Domenic>
MikeSmith: yeah, been in contact with Ryan for a while, although not yet about the upcoming stuff...

[15:56:25.0000] <jgraham>
Someone should mention that the point of W3C workshops is to gather people who know nothing about the web into a single location so you can laugh at them all with maximum efficiency

[15:56:47.0000] <MikeSmith>
tee hee

[15:57:09.0000] <Domenic>
I am kind of counting on implementer disinterest to reign in the crazy? Except apparently Microsoft wants the W3C to standardize bignums

[15:57:27.0000] <MikeSmith>
jgraham: will add that to the internal documentation on workshop planning

[15:57:40.0000] <jgraham>
heh

[15:58:29.0000] <MikeSmith>
Domenic: yeah, I think actually implementer disinterest will reign in the crazy. It's just a lot of waste and churn in the mean time

[15:58:44.0000] <Domenic>
MikeSmith: thus jgraham's point :P

[15:59:06.0000] <MikeSmith>
as Ryan puts it, ーWhen the @w3c puts "make members happy" over "viable and secure platform", its XHTML/SemWeb all over again.

[15:59:29.0000] <MikeSmith>
Domenic: yeah, jgraham point taken

[15:59:38.0000] <MikeSmith>
at least we get the lulz

[15:59:48.0000] <MikeSmith>
so it's not a total waste, in that light

[15:59:57.0000] <Domenic>
members gonna be memberin'...

[16:00:00.0000] <MikeSmith>
entertainment value is worth quite a lot

[16:00:20.0000] <MikeSmith>
ah good verbification Domenic

[16:01:10.0000] <MikeSmith>
"we need to member up this WG some more"

[16:01:18.0000] <MikeSmith>
and dis-membered I guess

[16:01:44.0000] <MikeSmith>
oh man MUBAR


2014-08-11
[17:21:55.0000] <TabAtkins>
Domenic: Isn't JS already doing bignums?

[17:22:22.0000] <Domenic>
TabAtkins: yep. Most recent stuff is at https://github.com/nikomatsakis/typed-objects-explainer/

[20:03:25.0000] <MikeSmith>
Streusel: btw the W3C validator is up-to-date now with the latest meta@name values in the wiki (went in along with other changes I pushed yesterday)

[20:13:57.0000] <Streusel>
awsum, thanks for letting me know

[23:34:44.0000] <annevk>
Hixie_: the resource hints thread on WHATWG impacts your research on reconciling dependency management

[00:27:43.0000] <zcorpan>
what's the use case for relList again?

[00:47:02.0000] <Ms2ger>
zcorpan, convenience, I guess?

[00:47:36.0000] <Ms2ger>
Might not be as useful as classList, I guess

[00:47:50.0000] <zcorpan>
Ms2ger: convenience seems moot if it's something nobody ever does

[00:47:58.0000] <Ms2ger>
Yeah

[00:48:04.0000] <Ms2ger>
Does anyone implement it yet?

[00:48:14.0000] <zcorpan>
gecko according to caniuse

[00:49:15.0000] <Ms2ger>
Hmm

[00:50:09.0000] <Ms2ger>
Caniuse is correct

[00:50:50.0000] <Ms2ger>
karlcow filed the bug

[00:54:33.0000] <Ms2ger>
zcorpan, r? https://critic.hoppipolla.co.uk/r/2323 if you're interested in selectorsapi tests :)

[00:56:15.0000] <zcorpan>
Ms2ger: yeah i was checking that briefly and concluded that it required more mental stress than i was prepared for at this time :-) will check again later

[00:56:23.0000] <Ms2ger>
Heh

[06:30:15.0000] <JakeA>
annevk: https://github.com/slightlyoff/ServiceWorker/issues/403#issuecomment-51711008 - why must URL parsing happen before the async steps?

[06:58:29.0000] <annevk>
JakeA: as I said, it grabs global state

[07:02:24.0000] <JakeA>
annevk: the parsing does, or just getting the document url for use as the base?

[07:03:50.0000] <annevk>
JakeA: the parsing does if you use the generic parser

[07:04:04.0000] <annevk>
JakeA: which might not be needed here

[07:04:24.0000] <annevk>
JakeA: you could probably use the base URL parser if you want to do parsing async

[07:04:59.0000] <JakeA>
annevk: it doesn't need to be async, just getting an understanding of the issue

[07:06:06.0000] <annevk>
JakeA: so yeah, the parsing could probably be async, but typically we do all that on the "main thread"

[07:22:19.0000] <zcorpan>
was there a flowchart for how <object> loading works? Hixie_?

[07:46:56.0000] <JakeA>
annevk: is it just the url stuff that's problematic in [[Register]], I can't see anything else

[07:47:27.0000] <annevk>
JakeA: origin comparisons potentially

[07:48:16.0000] <annevk>
JakeA: [[GetRegistration]]'s for each might race?

[07:48:30.0000] <JakeA>
annevk: would you parse the document url before async to work around that?

[07:49:45.0000] <annevk>
JakeA: I would probably do the security check sync

[07:49:53.0000] <annevk>
JakeA: ah yes

[07:49:59.0000] <JakeA>
makes sense

[07:50:09.0000] <annevk>
JakeA: that's how these algorithms typically go

[07:51:07.0000] <annevk>
JakeA: I guess the only difference with the normal way is that here fetching isn't starting yet

[07:51:50.0000] <annevk>
JakeA: in terms of language "Browsers may ignore this potentially secure origin rule for development purposes only." is problematic

[07:52:01.0000] <annevk>
JakeA: you cannot make normative (MAY) statements in a Note

[07:53:01.0000] <JakeA>
annevk: should that note be there at all, or is it implicit that developer tools can alter spec behaviour?

[07:53:08.0000] <annevk>
JakeA: prolly better as "If the origin of scriptURL is not potentially secure and developer tools are not enabled,"

[07:53:17.0000] <annevk>
JakeA: yeah

[07:53:20.0000] <annevk>
actually yes

[07:54:14.0000] <annevk>
"Note: Developer tools are expected to enable easier experimentation."

[07:55:17.0000] <annevk>
JakeA: but I think instead of saying "potentially secure" you just want to say if the scriptURL's scheme is not https

[07:55:34.0000] <annevk>
JakeA: because we want this to be a networked resource

[07:57:48.0000] <JakeA>
annevk: we should include private origins too, then asset it's a network resource in a separate step

[07:57:58.0000] <JakeA>
(localhost for example)

[07:58:17.0000] <annevk>
JakeA: localhost is not a potentially secure origin afaict

[07:58:44.0000] <annevk>
oh sorry

[07:58:49.0000] <annevk>
/me needs to read

[08:01:11.0000] <JakeA>
annevk: regarding "Run the following substeps asynchronously:", should that be switched for "queue a task to run the following steps synchronously"?

[08:01:33.0000] <annevk>
no

[08:02:00.0000] <annevk>
most of that should probably be async

[08:02:25.0000] <annevk>
although you need to be careful with regards to racing

[08:03:28.0000] <JakeA>
yeah, that's my worry

[08:04:24.0000] <annevk>
I suspect the registrations bit is in the same thread where the UA does navigation and maybe history

[08:04:53.0000] <annevk>
Instead of phrasing it with for/each you might be better of phrasing it in English

[08:05:22.0000] <annevk>
as an operation that returns a bunch of globally registered things

[08:06:12.0000] <annevk>
but yeah, it's a similar problem as what I had with fullscreen, you don't really know if someone else is doing the same thing or changing that global registered things thing

[08:06:40.0000] <annevk>
unless you'd define that part as having its own event loop, etc.

[08:09:12.0000] <JakeA>
annevk: yeah, register(...); register(...); shouldn't be racey

[08:10:32.0000] <annevk>
without something like the storage mutex that's hard I think

[08:10:55.0000] <annevk>
well, there's some ordering guarantees

[08:21:29.0000] <Hixie_>
zcorpan: it's in the comments. dunno how accurate it is.

[08:52:49.0000] <ehsan>
JakeA: hey, where is the service worker cache discussion meeting happening?

[08:53:29.0000] <JakeA>
ehsan: there's a hangout link in the invite

[08:53:40.0000] <ehsan>
JakeA: not in the one that I received :)

[08:54:40.0000] <ehsan>
JakeA: can you please paste the link here?

[08:55:05.0000] <JakeA>
ehsan: https://plus.google.com/hangouts/_/calendar/amFmZmF0aGVjYWtlQGdtYWlsLmNvbQ.h1hjes3p8fo8i8g9mhfbaghpi4

[08:55:10.0000] <ehsan>
ta

[09:21:15.0000] <zcorpan>
Hixie_: does your pipeline strip out comments?

[09:21:28.0000] <Hixie_>
5es

[09:21:30.0000] <Hixie_>
yes even

[09:21:42.0000] <zcorpan>
ok :-/

[09:22:03.0000] <Hixie_>
you wouldn't want to look in the published source anyway

[09:22:05.0000] <Hixie_>
that's a mess

[09:22:16.0000] <Hixie_>
look in the pre-pipeline source :-)

[09:22:36.0000] <zcorpan>
i could have used http://simon.html5.org/sandbox/bookmarklets/reveal-comments

[09:36:02.0000] <Hixie_>
is ModuleLinkage the same as LinkSet in the ES6 spec?

[09:38:21.0000] <Hixie_>
ah, no, it's a copy/paste error

[09:42:04.0000] <Hixie_>
jorendorff: any idea what a Module record is?

[09:42:35.0000] <Hixie_>
as in, if L is a Loader record, L.[[Modules]][i].[[Module]]

[09:43:41.0000] <jorendorff>
Hixie_: spec bug. It means a Module object.

[09:44:06.0000] <Hixie_>
ah ok

[09:44:38.0000] <caitp>
is the change history for the draft actually available anywhere? man that would be so useful

[09:44:48.0000] <caitp>
and by "anywhere" I mean publicly

[09:44:58.0000] <jorendorff>
caitp: NO.

[09:45:05.0000] <jorendorff>
caitp: the editor refuses to use version control

[09:45:15.0000] <caitp>
that's unfortunate

[09:45:25.0000] <jorendorff>
tell me about it

[09:46:11.0000] <jorendorff>
i didn't have a chance to talk about formal grammars with my 8-yr-old this weekend, but i think i have an approach that... *might* work

[09:46:28.0000] <jorendorff>
sorry, offtopic

[09:46:49.0000] <TabAtkins>
jorendorff: Actually, that sounds on-topic and very interesting. Elaborate?

[09:46:55.0000] <caitp>
i'm excited to hear about the progress on that front =)

[09:47:19.0000] <Ms2ger>
Sounds off-topic... There's logic in formal grammars :)

[09:47:34.0000] <jorendorff>
Ms2ger: have you looked at the es6 spec lately? ;)

[09:47:42.0000] <TabAtkins>
I see you've never tried to use the CSS 2.1 grammar.

[09:48:23.0000] <jorendorff>
TabAtkins: someone (I think caitp?) made the controversial claim in irc.mozilla.org#jslang that there's no reason formal grammars can't be explained so a typical 5-year-old can understand

[09:48:47.0000] <Ms2ger>
jorendorff, I try to avoid it in general, not for the grammar in particular :)

[09:49:22.0000] <jorendorff>
this was in support of the less controversial claim that the ES6 spec is unnecessarily incomprehensible

[09:50:18.0000] <caitp>
it was me, but I think I might have been exaggerating slightly when saying 5 year olds should thoroughly understand it --- but I think it should be possible to explain these things in ways that are accessible to young people

[09:50:25.0000] <caitp>
not even necessarily young people

[09:50:32.0000] <caitp>
30-somethings with hangovers

[09:50:39.0000] <caitp>
it should be doable

[09:50:44.0000] <TabAtkins>
I mean, just post a question to http://www.reddit.com/r/explainlikeimfive/

[09:50:47.0000] <Ms2ger>
I certainly won't argue against that

[09:50:48.0000] <TabAtkins>
And you'll get an answer.

[09:56:46.0000] <Hixie_>
jorendorff: step 2 of http://people.mozilla.org/~jorendorff/es6-draft.html#sec-createlinkset

[09:56:51.0000] <Hixie_>
jorendorff: is that a spec bug?

[09:58:16.0000] <Hixie_>
also how can PromiseBuiltinCapability() ever return an abrupt completion

[09:58:19.0000] <Hixie_>
isn't that all internal to the spec

[09:58:32.0000] <jorendorff>
Hixie_: regarding step 2 of CreateLinkSet, yes

[09:58:55.0000] <Hixie_>
what should it be?

[10:01:38.0000] <Hixie_>
jorendorff: loader.[[LoaderObj]] ?

[10:02:24.0000] <jorendorff>
Hixie_: well, *really* there shouldn't be two separate things, a Loader Object and a Loader Record.

[10:02:26.0000] <jorendorff>
There should just be the Loader Object

[10:02:36.0000] <jorendorff>
and those Loader Record fields should be internal slots of the object.

[10:02:47.0000] <jorendorff>
they're 1-to-1 already anyway, the record is stupid

[10:03:10.0000] <jorendorff>
but to answer your question, yes.

[10:10:33.0000] <Hixie_>
jorendorff: k

[10:11:23.0000] <Hixie_>
sweet freaking kittens following this is making my mind melt

[10:11:47.0000] <Hixie_>
PromiseOfStartLoadPartwayThrough() creates a promise, sets a particular function as the executor, and chains to it synchronously

[10:12:16.0000] <Hixie_>
AsyncStartLoadPartwayThrough(), that executor, immediately creates a new promise and slaves its own result to that new promise's

[10:12:46.0000] <Hixie_>
it then either creates YET ANOTHER promise and ASYNCHRONOUSLY jumps to a function it slaves to that promise, OR, it calls another function that does that

[10:13:13.0000] <Hixie_>
at this point, if you can follow who is actually running, when they'll be running, or what will happen when they return, you're a stronger person than i

[10:15:43.0000] <Hixie_>
aha! haha! hah!

[10:15:53.0000] <Hixie_>
i have finally found the function i'm supposed to call!

[10:16:03.0000] <Hixie_>
LoadModule(loader, name, options) !

[10:16:19.0000] <Hixie_>
no idea what i'm supposed to call it with, but that's another story!

[10:17:56.0000] <annevk>
only took a week :p

[10:21:51.0000] <Hixie_>
http://www.gliffy.com/go/publish/6040024 !

[10:22:00.0000] <Hixie_>
witness the glory

[10:35:21.0000] <Hixie_>
jorendorff: so, first, how does that look to you? did i make any mistakes?

[10:36:07.0000] <Hixie_>
jorendorff: second, now that i have a better handle on what's going on beneath the hood, let's talk about what the Web's default Loader should do.

[10:36:20.0000] <jorendorff>
absolutely

[10:36:32.0000] <jorendorff>
(to the second, still looking at the first part)

[10:36:39.0000] <Hixie_>
jorendorff: normalize() -- do we need to change anything here? e.g. is it supposed to resolve the URL or something?

[10:38:22.0000] <Hixie_>
lol, gliffy's svg export is lame

[10:38:24.0000] <Hixie_>
http://junkyard.damowmow.com/552

[10:38:32.0000] <Hixie_>
half of it just comes out as bitmaps

[10:40:09.0000] <annevk>
Philips on HDMI-CEC: "The HDMI-CEC functionality on devices from other brands might not work with your TV due to different interpretations of the HDMI-CEC industry standard."

[10:40:24.0000] <annevk>
"Web pages might not work due to different interpretations of HTML."

[10:41:41.0000] <caitp>
just imagine if there was some kind of reference implementation that people could use to clarify questions about specs

[10:41:53.0000] <caitp>
wouldn't that be nifty

[10:42:14.0000] <annevk>
that just creates more issues

[10:43:04.0000] <Hixie_>
reference implementations rarely match the spec, so actually, it's like having two specs

[10:43:15.0000] <Hixie_>
and if you doubt the problems of having two specs, just look at HTML

[10:44:49.0000] <caitp>
if there's a difference between a reference implementation and the spec it implements, one would err on the side of the reference implementation because there's evidence that it works and isn't just a collection of ideas

[10:45:00.0000] <Hixie_>
jorendorff: so if i wanted to make it possible to import binary blobs, e.g. import sprites as "spritesheet.png";, what would i return in the fetch hook? the empty string but remember in the backend that this particular load has associated binary data?

[10:46:26.0000] <Hixie_>
actually i get it doesn't check that the return value is a string

[10:49:12.0000] <jorendorff>
Hixie_: normalize() converts from (a) literally whatever they put into the import statement, to (b) the name a loaded module is cached under

[10:49:27.0000] <jorendorff>
so if you want people to be able to...        import foo from "../baz.js";

[10:49:36.0000] <jorendorff>
but you want it to be cached under a URL

[10:49:45.0000] <jorendorff>
or something else entirely

[10:49:51.0000] <Hixie_>
so normalise resolves urls

[10:49:53.0000] <jorendorff>
no

[10:49:59.0000] <jorendorff>
that's not the design intent, i misspoke

[10:50:06.0000] <Hixie_>
oh

[10:50:13.0000] <Hixie_>
i was gonna say, the spec says locate resolves.

[10:50:18.0000] <jorendorff>
yeah, locate resolves

[10:50:48.0000] <Hixie_>
so do we not want import foo from "../baz.js"; to work?

[10:50:49.0000] <Hixie_>
or?

[10:50:51.0000] <Hixie_>
i'm confused

[10:50:55.0000] <Hixie_>
seems like we need normalise to resolve

[10:50:59.0000] <Hixie_>
and locate to be a no-op

[10:51:47.0000] <jorendorff>
that's possible, but what i'd like is to have some kind of `myLoaderObject.paths` property that makes it easy to customize that lookup --- require.js has this

[10:52:15.0000] <jorendorff>
so there's some separation between application code and deployment

[10:52:23.0000] <Hixie_>
ah

[10:52:33.0000] <jorendorff>
admittedly the rest of the web platform doesn't exactly have this...

[10:52:40.0000] <Hixie_>
well it would if we added this

[10:52:55.0000] <Hixie_>
since this is going to end up being the entire platform's loading mechanism if i have my way

[10:52:56.0000] <jorendorff>
but like, I just want to say        import $ from "jquery";        <--- and be able to share that line of code with people I don't know and have it work for them

[10:53:03.0000] <jorendorff>
because they've also got "jquery" in their environment

[10:53:10.0000] <jorendorff>
at a path that's known to them

[10:53:31.0000] <jorendorff>
Hixie_: yeah!

[10:54:51.0000] <Hixie_>
so there's a difference between mapping names to URLs, which is what |import $ from "jQuery"| apperas to be, and having your traditional path lookup system

[10:54:58.0000] <Hixie_>
in particular, path lookup wouldn't work on the web

[10:55:04.0000] <Hixie_>
(no way to stat efficiently)

[10:55:07.0000] <jorendorff>
right

[10:55:19.0000] <Hixie_>
a mapping is hard because it needs a declaration mechanism

[10:55:26.0000] <Hixie_>
which we could add i guess

[10:55:26.0000] <jorendorff>
require.js doesn't do that, it's not CLASSPATH

[10:55:45.0000] <Hixie_>
so you could say <script type=module name=jQuery>

[10:55:49.0000] <Hixie_>
to declare the mappings

[10:55:54.0000] <Hixie_>
is that more what you meant?

[10:55:55.0000] <jorendorff>
yes

[10:56:18.0000] <Hixie_>
so then what would normalise actually do?

[10:56:19.0000] <jorendorff>
though i'd like to be able to configure it in js without having to use document.createElement('script')

[10:56:27.0000] <Hixie_>
still seems like it needs to output a url at the end of the day

[10:56:33.0000] <Hixie_>
sure

[10:56:36.0000] <Hixie_>
we'd have an API for it

[10:56:39.0000] <jorendorff>
k

[10:57:03.0000] <Hixie_>
(realistically you're going to want to predeclare all your modules, style sheets, etc, declaratively anyway, so we can do prefetching)

[10:57:11.0000] <jorendorff>
yeah

[10:57:15.0000] <jorendorff>
ok

[10:57:16.0000] <Hixie_>
(there's no way the web can wait for ES6's parser to see the "import" declaration)

[10:57:35.0000] <jorendorff>
Hixie_: ok, so all normalize would do is resolve relative module names to full module names

[10:57:36.0000] <Hixie_>
(at least not for the near term)

[10:57:50.0000] <Hixie_>
what's a "full module name"?

[10:58:12.0000] <Hixie_>
seems like there's one step that takes ambiguous names and outputs full absolute URLs

[10:58:28.0000] <Hixie_>
and it has to happen before the registry lookup

[10:58:30.0000] <Hixie_>
i don't see how that gets split in two

[10:58:59.0000] <jorendorff>
in the design, the module names have a hierarchy that's totally independent of where stuff is located

[10:59:16.0000] <jorendorff>
i mean, it's not baked in, because you can have normalize be a no-op

[10:59:25.0000] <jorendorff>
but that was the idea. people want to have packages that contain multiple modules

[11:00:29.0000] <Hixie_>
what's a "package" in this context?

[11:01:51.0000] <jorendorff>
like npm, an installable chunk of software. or like java, a directory containing related files of code. either meaning.

[11:02:10.0000] <jorendorff>
more like npm, not so much like java

[11:02:12.0000] <Hixie_>
ok but either way you still need to predeclare each file, right? so how does this affect us?

[11:02:38.0000] <jorendorff>
it affects the author of the package. say my package is called libjorendorff

[11:02:47.0000] <jorendorff>
and it's big, it's several modules

[11:04:04.0000] <jorendorff>
if there's a normalize hook, in libjorendorff/factories i can write        `import "./pipelines"`   and the normalize hook could resolve that to "jorendorff/pipelines"

[11:04:12.0000] <jorendorff>
that "/" is not a URL path separator

[11:04:20.0000] <jorendorff>
because that's not a url, it's just a module name

[11:04:54.0000] <Hixie_>
oh you want the web platform to support that natively?

[11:05:04.0000] <jorendorff>
a package then doesn't have to depend on its own name, which lets you load multiple versions of it at once under different names (without the cache getting confused)

[11:05:24.0000] <Hixie_>
this would all still need to happen along with url resolution in the normalise hook, though, right?

[11:05:58.0000] <Hixie_>
anyway i'm happy to do more than straight forward name lookup followed by url resolution. but i've no idea what it should be exactly, i'd need to be told precisely what people wanted.

[11:06:14.0000] <jorendorff>
...i think we could actually supply that

[11:06:37.0000] <jorendorff>
but so why not convert it to a URL in the locate hook?

[11:06:50.0000] <jorendorff>
the design intent was that in the web platform, locate() spits out a URL

[11:07:16.0000] <jorendorff>
but you really want URLs to be the cache key?

[11:07:41.0000] <Hixie_>
i don't understand how anything else would work

[11:07:52.0000] <Hixie_>
why would you cache on anything _but_ the url?

[11:07:53.0000] <jorendorff>
well, so consider python for example

[11:08:01.0000] <jorendorff>
import sys; print(sys.modules)

[11:08:12.0000] <jorendorff>
that corresponds exactly to the loader cache.

[11:08:20.0000] <jorendorff>
it's just a {string: module} dictionary

[11:08:26.0000] <jorendorff>
but the strings are module names, not filenames.

[11:08:37.0000] <Hixie_>
say one package does |import image from "foo.png"| and another does |import image from "./foo.png"|, do you want the image to be fetched twice?

[11:08:48.0000] <Hixie_>
python doesn't have a high download cost

[11:09:25.0000] <jorendorff>
Hixie_: that's not true, going to disk is slow and loading/parsing code twice would be slow; in addition things wouldn't work properly

[11:09:30.0000] <Hixie_>
nor, i suspect, does it have a way to map two names to different paths

[11:11:06.0000] <Hixie_>
(which meaning the same underlying file)

[11:11:34.0000] <jorendorff>
the difference in stat() performance doesn't seem to bear on this. Python could certainly cache based on filename. Why doesn't it?

[11:11:55.0000] <Hixie_>
what's the difference between what it does and caching on filenames, in practice?

[11:11:57.0000] <jorendorff>
Java ClassLoaders don't either, I don't think. I can't think of a system that does...

[11:12:40.0000] <Hixie_>
do any of those systems have a way to accidentally import the same underlying file under two different import names?

[11:12:54.0000] <Hixie_>
or is there a 1:1 mapping of their names to the underlying paths?

[11:14:08.0000] <jorendorff>
Hixie_: let me back up a bit and address your exact example

[11:16:21.0000] <jorendorff>
Hixie_: |import image from "foo.png"|  <--- the design intent was that module names aren't urls;

[11:17:20.0000] <jorendorff>
Hixie_: dherman proposed you might say somethign like   |import image from "url(foo.png)";| or "@foo.png", but I think annevk successfully wtf-orpetoed the proposal

[11:18:10.0000] <jorendorff>
Hixie_: what i'd like is |import image from "_static/foo.png" where I've already configured <module "_static" href="/static">

[11:18:13.0000] <jorendorff>
or something like that

[11:18:20.0000] <jorendorff>
name="_static

[11:18:50.0000] <Hixie_>
why would we force authors to have an indirection layer

[11:19:26.0000] <Hixie_>
i'm all for supporting extra things before we convert to URLs, but realistically, most deployments are just gonna need to refer to local files

[11:19:51.0000] <Hixie_>
there's no win in forcing authors to declare that "images/" means "images/" before they can use "images/foo.png" as far as i can tell

[11:20:44.0000] <Hixie_>
i mean, even in java and perl and so on, there's usually a more or less direct mapping between the fully qualified package names and the actual paths to find the files -- it's just that they have search paths that they can quickly stat first

[11:21:08.0000] <Hixie_>
(bbiab, getting food)

[12:21:15.0000] <Hixie_>
(back)

[12:45:31.0000] <Hixie_>
jorendorff: another question, while you're pondering the earlier ones: in practice, we're going to want the browser to manage the loads from multiple origins at the same time (e.g. consider depending on a third-party iframe, which might have its own dependencies).

[12:45:41.0000] <Hixie_>
jorendorff: but it looks like the Loader object is per-Realm

[12:46:09.0000] <Hixie_>
jorendorff: do i just make the System Loader object fake its data to the ES6 level and manage it separately at the event-loop or top-level-browsing-context level?

[12:46:38.0000] <jorendorff>
good questions all

[12:46:40.0000] <jorendorff>
i don't know

[12:47:21.0000] <jorendorff>
i'm not super satisfied with the earlier stuff, but i don't see how to make it feel natural for everybody... you can have the default paths be just "load everything relative to this document's url"

[12:48:29.0000] <jorendorff>
but still if you show example code doing       import style from "whatever.css";      there is no way you are going to prevent people from instantly believing that's a URL

[12:51:36.0000] <Hixie_>
i think there's more or less nothing we can do which is going to make people think that "import foo from bar" isn't going to mean the same as <script type=module name=foo href=bar>, personally

[12:52:20.0000] <Hixie_>
that it really means <script type=module name=??? href=foo> where "foo" is somethinge else again imho doesn't match the platform aesthetic at all

[12:52:28.0000] <Hixie_>
er

[12:52:41.0000] <Hixie_>
i mean <script type=module name=bar href=???>

[12:52:48.0000] <Hixie_>
even i can't work out what it means

[12:58:41.0000] <Hixie_>
i wonder what browsers scope their prioritisation decisions to

[12:58:52.0000] <Hixie_>
top-level browsing contexts?

[12:58:54.0000] <Hixie_>
event loops?

[12:59:01.0000] <Hixie_>
the whole UA?

[13:06:19.0000] <jyasskin_w>
Hixie_: network request prioritization?

[13:07:44.0000] <Hixie_>
yeah

[13:09:47.0000] <jyasskin_w>
/me forwards the question to willchan

[13:11:18.0000] <willchan>
jyasskin_w told me there was a question about browser network request prioritization

[13:11:43.0000] <willchan>
chromium prioritizes everything going through its network stack

[13:12:28.0000] <Hixie_>
ah ok

[13:12:31.0000] <Hixie_>
so it's whole-UA

[13:12:32.0000] <Hixie_>
interesting

[13:12:36.0000] <willchan>
not everything goes through our network stack though, such as plugin sockets and chrome app sockets, and we have some things that currently skip it like webrtc and what not. but we're fixing that.

[13:12:51.0000] <willchan>
yes, whole-UA

[13:13:13.0000] <smaug____>
willchan: so bg tabs don't get lower priority than foreground tab?

[13:13:13.0000] <willchan>
but most of the prioritization is contextual to a chromium profile.

[13:13:49.0000] <willchan>
if you're talking about network request prioritization, then no, bg tabs don't currrently get lower priority than foreground tabs. but that's in progress.

[13:13:51.0000] <smaug____>
(at least in certain cases gecko gives lower priority for bg tabs)

[13:21:10.0000] <SamB>
is webrtc NOT short for WEB RealTime Clock?

[13:22:30.0000] <SamB>
smaug____: would be nice if gecko could evict some BG tabs to disk, or perhaps even not touch their arenas often

[13:23:35.0000] <smaug____>
SamB: sure. Issue is that web pages tend to have rather live data these days

[13:23:40.0000] <smaug____>
static pages are fine

[13:23:54.0000] <SamB>
well, yes, I realize it's easiest for static pages

[13:24:33.0000] <smaug____>
we don't page in those tabs in anyway too often

[13:24:57.0000] <smaug____>
/me seems to have 176 tabs open atm

[13:26:50.0000] <SamB>
smaug____: I mean, for example, dialing down the GC frequency for those tabs would seem wise

[13:27:34.0000] <smaug____>
SamB: those shouldn't really participate in GC all the time

[13:27:41.0000] <smaug____>
assuming we do compartment GCs

[13:27:48.0000] <smaug____>
(that is something to tweak probably)

[13:28:03.0000] <smaug____>
for CC we certainly optimize out most of such tabs

[13:34:16.0000] <Hixie_>
jorendorff: another reason to fully evaluate the names to URLs in the normalize hook is that if we rely on attributes for the mapping yet do the resolving in locate, the mappings could change between the time we look up the normalised names and the time we fully resolve the URLs

[13:36:00.0000] <Hixie_>
jorendorff: another question. When does the ES6 loader actually evaluate the code?? I found where it compiles it (InstantiateSucceeded), but I just noticed that nothing in my flow chart _runs_ the code.

[13:36:14.0000] <Hixie_>
jorendorff: am I supposed to keep track of what order things are to run in, and then run it myself?

[13:36:23.0000] <Hixie_>
(in the HTML spec, i mean)

[13:42:40.0000] <jorendorff>
Hixie_: OK. In ES6, the code runs "at the last minute" before exposing the module object to user code. See EnsureEvaluated and the things that call it.

[13:44:01.0000] <Hixie_>
so basically i'm supposed to call EvaluateLoadedModule() when the LoadModule() promise resolves?

[13:49:22.0000] <jorendorff>
Hixie_: sections like EvaluateLoadedModule() are "closures"

[13:49:47.0000] <jorendorff>
i don't know if this is clear or not

[13:49:57.0000] <jorendorff>
but you can't just call EvaluateLoadedModule

[13:50:11.0000] <Hixie_>
er yeah sorry i meant, i call EnsureEvaluated() when the promise is resolved

[13:50:13.0000] <jorendorff>
yeah

[13:50:15.0000] <jorendorff>
yeah that's right

[13:50:25.0000] <Hixie_>
interesting

[13:50:31.0000] <jorendorff>
the system should totally do that for you though, right?

[13:50:32.0000] <Hixie_>
and that does the work of evaluating all the dependencies?

[13:50:38.0000] <Hixie_>
well, no, i'm good with doing it

[13:50:48.0000] <Hixie_>
in particular, i want separate control over fetching and executin

[13:50:50.0000] <Hixie_>
g

[13:50:56.0000] <jorendorff>
Hixie_: yes, it walks the dependency graph

[13:50:58.0000] <Hixie_>
which this provides

[13:53:46.0000] <Hixie_>
hmmmm

[13:56:44.0000] <Hixie_>
jorendorff: hmm, interesting. There doesn't seem to be any way in ES6 to map a <script type=module> to a specific Load Record.

[13:57:20.0000] <jorendorff>
what kind of thing are you looking for?

[13:59:11.0000] <Hixie_>
i want to get a promise that will resolve when a module has loaded, so that i can pass it to something else (e.g. something that will make a DOM subtree display:block) and say "you depend on this promise"

[13:59:27.0000] <Hixie_>
also i just noticed that my flowchart is incomplete. I missed Link().

[14:00:51.0000] <SamB>
smaug____: hmm, how do you avoid touching such tabs for CC?

[14:01:02.0000] <SamB>
keep notes about what was found there last time?

[14:02:08.0000] <smaug____>
SamB: optimizing out from CC graph is rather simple many cases

[14:02:36.0000] <smaug____>
in this case check if the document is in an active browsing context

[14:03:16.0000] <smaug____>
and if scripts haven't been running in those tabs, no nodes etc would end up to possible-garbage-object-buffer

[14:04:15.0000] <smaug____>
(skippability and black-bit-propagation are rather nice features of CC)

[14:05:28.0000] <SamB>
smaug____: ah, right

[14:05:47.0000] <smaug____>
in other words, CC deals with possibly garbage objects , GC deals with live objects

[14:05:56.0000] <smaug____>
so CC tends to have smaller graphs

[14:05:59.0000] <SamB>
that list only gets populated with things that have had their refcounts touched in certain ways ...

[14:06:25.0000] <SamB>
so if they have not been touched AT ALL, they're automatically exempt

[14:06:34.0000] <smaug____>
right

[14:07:09.0000] <SamB>
so, the only thing that needs any thought is to avoid running the GC when, for example, *no* script has executed since the last GC in that arena

[14:07:27.0000] <smaug____>
and even if they are touched, but are in a document which is in active browsing context, they can be just removed from possible-garbage-object-buffer

[14:07:49.0000] <SamB>
not sure I follow that bit

[14:08:02.0000] <SamB>
what does "active browsing context" mean in this context?

[14:08:06.0000] <MikeSmith>
/me wonders what is CC

[14:08:10.0000] <SamB>
does it involve being in a foreground tab?

[14:08:13.0000] <SamB>
MikeSmith: cycle collection

[14:08:13.0000] <smaug____>
CC == cycle collector

[14:08:18.0000] <MikeSmith>
ah ok

[14:08:22.0000] <SamB>
or collector, as grammatical

[14:08:30.0000] <SamB>
same as with GC

[14:08:34.0000] <smaug____>
active browsing context is a spec term, or close to that

[14:08:49.0000] <smaug____>
basically you have a tab open

[14:09:03.0000] <smaug____>
it has a top level active browsing context

[14:10:07.0000] <smaug____>
for GC the optimization to done is to not run GC for bg tabs' compartments

[14:12:01.0000] <SamB>
oh, is "in a document" another spec term?

[14:12:40.0000] <smaug____>
node is in a document if there is parentNode chain from the node to the document

[14:12:59.0000] <SamB>
i.e. for DOM nodes that are clearly linked into a Document that is actually linked into the active browsing context?

[14:13:37.0000] <smaug____>
right

[14:13:48.0000] <smaug____>
not all documents are in active browsing context

[14:13:51.0000] <SamB>
when would would they be removed from the possibly-garbage list

[14:14:05.0000] <smaug____>
Gecko has forgetSkippable phase

[14:14:07.0000] <smaug____>
before CC

[14:14:18.0000] <SamB>
smaug____: yeah, because you can have documents that are just being used for computations or something

[14:14:21.0000] <smaug____>
which removes obviously live data from the purple buffer

[14:14:33.0000] <smaug____>
(purple buffer == possible garbage )

[14:14:47.0000] <SamB>
yeah, I gathered it was the same list we had been talking about

[14:15:14.0000] <SamB>
which you keep calling a buffer so I assume it's in a flat array of some kind

[14:16:10.0000] <smaug____>
segmented array or some such

[14:29:47.0000] <pluma>
Are there any plans (distant or not so distant) for providing a low-level TCP/UDP socket API in the browser (rather than protocols like WebRTC, web sockets, etc)?

[14:30:08.0000] <Hixie_>
how would we do that in a safe fashion?

[14:31:23.0000] <pluma>
Hixie_: that's what I was wondering. So the answer is probably "no"?

[14:31:23.0000] <SamB>
pluma: web sockets would almost certainly not exist if that it was safe to just allow TCP/UDP sockets

[14:31:36.0000] <SamB>
s/that //

[14:31:51.0000] <Hixie_>
pluma: if we can find a way to do it safely, i'm sure it'll be mere minutes before it's available. :-)

[14:33:23.0000] <pluma>
Hixie_, SamB: Thanks. I thought I remembered hearing the idea being thrown around at some point, but I apparently remembered wrong. I can't see how to do it safely either (well, maybe with a permission check like the other security-critical APIs, but they'd likely not be very self-explanatory).

[14:33:46.0000] <pluma>
Wait, what about http://www.w3.org/TR/raw-sockets/ ?

[14:35:23.0000] <pluma>
Hm... looks pretty dead, though.

[14:36:53.0000] <Hixie_>
the existence of specs doesn't imply anyone will implement them :-)

[14:37:14.0000] <pluma>
Hixie_: that's what I though. Okay, thanks again ;)

[14:37:41.0000] <Hixie_>
(what would you want raw sockets for anyway?)

[14:38:33.0000] <pluma>
Hixie_: implement an <insert existing protocol here> client in the browser?

[14:39:00.0000] <pluma>
Hixie_: web vs native, etc

[14:39:35.0000] <Hixie_>
do you have a specific example?

[14:39:48.0000] <pluma>
I'm not saying that's a good idea. Just an idea someone could have...

[14:39:59.0000] <pluma>
/me shrugs

[14:40:01.0000] <pluma>
Torrent client?

[14:40:18.0000] <SamB>
pluma: it's definitely an idea that would have its uses

[14:40:42.0000] <SamB>
but it would also have LOTS AND LOTS of dangerous misuses

[14:41:53.0000] <pluma>
The reason I'm asking is because someone asked about porting a python chat client to JS for the browser and the Python code currently uses raw TCP sockets. We recommended using web sockets or some abstraction built on top of that.

[14:42:16.0000] <pluma>
(on ##javascript that is)

[14:42:28.0000] <Hixie_>
ah like an irc client?

[14:42:54.0000] <Hixie_>
yeah we definitely wouldn't want a random web page to be able to connect to a random irc client, just imagine the DOS attacks that would enable :-)

[14:43:00.0000] <Hixie_>
er, random irc server

[14:44:48.0000] <pluma>
Hixie_: well, it'd be fun. In the DF sense (http://dwarffortresswiki.org/index.php/Fun)

[14:45:17.0000] <Hixie_>
yeah...

[15:07:54.0000] <MikeSmith>
pluma: I think the security models for that http://www.w3.org/TR/raw-sockets/ is not the Web security model. That spec depends on an different, as-yet-undocumented off-Web security model. All the specs from the SysApps WG do

[15:09:02.0000] <MikeSmith>
s/security models/security model/

[15:10:11.0000] <pluma>
MikeSmith: ah, so it's most likely intended for something like Firefox OS apps and such?

[15:10:19.0000] <MikeSmith>
yeah, that

[15:11:26.0000] <MikeSmith>
although I think Mozilla and Google are no longer participating actively in that WG any longer. So it seems unlikely that spec will go anywhere any time soon

[15:13:04.0000] <MikeSmith>
nobody's really crying out for an off-Web HTML/CSS/JS-based standard runtime

[15:13:34.0000] <MikeSmith>
users certainly aren't, and developers aren't

[15:13:50.0000] <MikeSmith>
/me ends his editorial comments

[15:14:33.0000] <pluma>
MikeSmith: Hm... I wished CSS would become a living standard alongside HTML.

[15:15:08.0000] <MikeSmith>
pluma: it is living, it's just more of a Frankenstein monster sort of life

[15:16:40.0000] <MikeSmith>
editor's drafts of CSS specs are living specs, it just takes a lot more work to observe it and try to keep up with it

[15:16:59.0000] <pluma>
MikeSmith: Sure, but CSS3 isn't fully "stable" and already browsers are chasing after CSS4, not to mention all the vendor crap. I'm really hoping for a revolution a la HTML 5.

[15:17:08.0000] <TabAtkins>
MikeSmith: How is it harder to observe?

[15:17:18.0000] <TabAtkins>
pluma: There's no such thing as CSS3 or CSS4.

[15:17:33.0000] <TabAtkins>
http://www.xanthir.com/b4Ko0

[15:17:37.0000] <pluma>
TabAtkins: Well, there are various CSS-related specs with "3" and "4" in their name.

[15:17:50.0000] <TabAtkins>
Yes, those are the individual modules.

[15:17:53.0000] <MikeSmith>
TabAtkins: the volume/ number of the specs and the number of different editors

[15:18:17.0000] <TabAtkins>
MikeSmith: Sure, but actually tracking changes seems identical between the two - just watch the repos.  There are even Twitter bots for each.

[15:19:06.0000] <MikeSmith>
TabAtkins: and also, the knowing which specs to currently take seriously, and which are known .. duds or whatever they should be called -- but that are still around and people cite them

[15:19:12.0000] <pluma>
TabAtkins: I understand that. But it just looks a lot hairier and messier than HTML / Web Apps look{s,ed}.

[15:19:13.0000] <MikeSmith>
TabAtkins: like, old GCPM

[15:19:18.0000] <TabAtkins>
MikeSmith: Granted on that note.

[15:19:40.0000] <TabAtkins>
MikeSmith: (Though dauwhe is working on GCPM now, and trying to make it realistic.)

[15:19:47.0000] <MikeSmith>
TabAtkins: but yeay, point taken (about watching the repos and twitter bots)

[15:20:18.0000] <MikeSmith>
TabAtkins: yeah astearns told me that the other day. glad to hear dauwhe is on the job

[15:20:50.0000] <MikeSmith>
TabAtkins: (specific context was, astearns was telling me about latest discussion on footnotes)

[15:21:05.0000] <pluma>
TabAtkins: Also, having selectors spread out across different version numbers is a bit more tedious to follow than to have one single selectors spec that gets continuously revised. The world in which the version numbers matter and the world for which most web code is written are two very different worlds in my experience.

[15:21:44.0000] <TabAtkins>
pluma: Always and only looking at the latest version is all you need.

[15:22:05.0000] <TabAtkins>
There are no selectors in Selectors 3 that are missing in Selectors 4, except those that were dropped because no one implemented them.

[15:22:13.0000] <pluma>
TabAtkins: okay, but how do I know which specs are dead and will not be updated further?

[15:22:59.0000] <TabAtkins>
Dead specs, *ideally*, are marked as such. We're not great about that. (I need to get off my ass and just go mark all of them.)

[15:23:06.0000] <TabAtkins>
This list is also very helpful and kept up-to-date: http://www.w3.org/Style/CSS/current-work.en.html

[15:23:12.0000] <TabAtkins>
http://www.w3.org/Style/CSS/current-work

[15:23:27.0000] <pluma>
TabAtkins: is there a version of the specs in which current browser support is marked as in the HTML (etc) spec?

[15:24:15.0000] <TabAtkins>
Some Editor's Drafts have linkages into their test suites, with support information displayed alongside each section, similar to HTML.

[15:24:22.0000] <TabAtkins>
But not all drafts have test suites.

[15:26:20.0000] <pluma>
Hrmpf. I wished someone would find a solution for that. How do the WHAT WG specs manage to do this consistently?

[15:27:12.0000] <boogyman>
Do you guys know if in the future the spec will call for a scenario where a "checkbox" group can have a "at least one must be checked" definition? http://codepen.io/anon/pen/IwxEh

[15:32:41.0000] <MikeSmith>
TabAtkins: fyi http://platform.html5.org links to http://www.w3.org/Style/CSS/current-work

[15:32:43.0000] <pluma>
TabAtkins: thanks for clearing up some of my misconceptions about the CSS versioning, though. However I still wished there was a nicer overview.

[15:33:00.0000] <TabAtkins>
pluma: HTML's data is maintained manually, whenever people care to update it. ^_^

[15:33:20.0000] <TabAtkins>
boogyman: You mean <input type=checkbox required>? Oh, how I've wished for that.

[15:33:23.0000] <TabAtkins>
pluma: And no problem.

[15:33:27.0000] <MikeSmith>
TabAtkins: if/when you ahve time to look at the CSS part http://platform.html5.org please do. And either lemme know what should be changed/added/removed or just open a PR

[15:33:36.0000] <TabAtkins>
kk

[15:33:52.0000] <SamB>
TabAtkins: <input type=checkbox> can have more than one checkbox? how confusing :-(

[15:34:04.0000] <MikeSmith>
boogyman: there is nothing that I know of but yeah I have had cases where I'd really like to have that too

[15:34:05.0000] <TabAtkins>
SamB: Multiple checkboxes in a single name group.

[15:34:38.0000] <SamB>
TabAtkins: in one element or several?

[15:34:45.0000] <TabAtkins>
Several.

[15:34:51.0000] <TabAtkins>
Have you worked with checkboxes before?

[15:35:03.0000] <SamB>
okay, yes, that's what I thought...

[15:35:39.0000] <SamB>
TabAtkins: I may or may not ever have made any myself, but I'm sure I've poked around on pages that had them ;-)

[15:35:41.0000] <MikeSmith>
Hixie_: see boogyman question above. Why we have no way to define a "checkbox" group with "at least one checkbox must be checked"

[15:36:00.0000] <SamB>
TabAtkins: so you'd pick one to mark "required" arbitrarily?

[15:36:21.0000] <TabAtkins>
SamB: That's one of the questions, yeah.

[15:36:37.0000] <boogyman>
that's one possible implementation.

[15:36:42.0000] <TabAtkins>
Probably, sure.  Basically if any of the checkboxes in a name group are required, it triggers the "required" beahvior for the group.

[15:36:59.0000] <SamB>
TabAtkins: yeah, that seems like the only even half-sane behaviour

[15:37:43.0000] <SamB>
because the order the checkboxes are in is not ordinarily expected to have any semantics associated with it, is it?

[15:38:24.0000] <SamB>
I mean, beyond what it might convey to a human

[15:40:03.0000] <boogyman>
SamB: The use-case here is that you have a Business / Author whom wants to impose a "must select one or more" requirement. Currently authors are required to implement a JS shim (albeit a fairly straightforward one)

[15:40:32.0000] <SamB>
boogyman: I understand the usecase, thanks ;-)

[15:40:57.0000] <SamB>
I've certainly seen it on enough paper forms

[15:41:12.0000] <Hixie_>
MikeSmith: not declaratively, yeah.

[15:41:51.0000] <Hixie_>
MikeSmith: you can give the same semantics using <select multiple required>, though.

[15:41:52.0000] <SamB>
obviously you'd still want to make the requirement clear in-text

[15:42:12.0000] <SamB>
Hixie_: isn't typically a bit more awkward UI-wise?

[15:42:22.0000] <SamB>
+that

[15:42:26.0000] <boogyman>
Hixie_: yes, but now you're tying the author to the "dropdown" cosmetics

[15:42:32.0000] <Hixie_>
SamB: semantically they're identical, so, in theory, it's just a UI issue. :-)

[15:42:42.0000] <Hixie_>
boogyman: <select multiple> doesn't have a drop-down, it has a list

[15:42:46.0000] <Hixie_>
in the default rendering

[15:42:56.0000] <Hixie_>
and in theory, you can have any rendering you like

[15:43:10.0000] <Hixie_>
if the theory doesn't match practice, send pitchforks to dglazkov_ :-)

[15:43:12.0000] <boogyman>
I am unfamiliar with CSS exposing the ability to break out that list and display as "checkbox"

[15:43:13.0000] <SamB>
Hixie_: I mean <select multiple> tends to be something only advanced users will actually know how to select multiple items in, doesn't it?

[15:43:37.0000] <Hixie_>
SamB: well, that's really up to the browser and/or author

[15:44:02.0000] <Hixie_>
anyway. if you really must use checkboxes and really must have one required (which is a weird UI, but whatever), then use script and setCustomValidity()

[15:44:05.0000] <Hixie_>
that's what it's for

[15:44:08.0000] <SamB>
I'm talking about the UI that the advanced users already know how to use here, which probably isn't really too negotiable at this point?

[15:44:08.0000] <zewt>
tired of hearing the "the special case of the ui thread has taught us that all synchronous programming is bad" nonsense

[15:44:26.0000] <zewt>
i seem to recall somebody saying that every time the sync-message thread comes up

[15:44:57.0000] <Hixie_>
SamB: as far as i can tell, it's entirely negotiable.

[15:45:10.0000] <SamB>
zewt: I'm already tired of it, and I'm not even *certain* I've heard it mentioned before

[15:45:32.0000] <SamB>
Hixie_: what, you don't think people will get confused if the shift/control click stuff stops working?

[15:45:50.0000] <Hixie_>
SamB: not if you replace it with just a bunch of labeled checkboxes...

[15:46:09.0000] <zewt>
it's nice that people are aware of the issue, but it's such an over-the-top generalization

[15:46:12.0000] <boogyman>
Hixie_: yes, but now you're going down the flame-wars of "JS is required", where this could be a nice addative feature for HTML to expose

[15:46:22.0000] <SamB>
Hixie_: they might still get frustrated by not being able to do that though

[15:46:33.0000] <SamB>
boogyman: you still have to validate at submit time anyway

[15:46:45.0000] <SamB>
boogyman: so JS is only required for the "nice-to-have" prevalidation

[15:46:46.0000] <Hixie_>
boogyman: there's a huge long tail of such possible new features, sure. file a bug if you want this one to enter the usual gauntlet.

[15:47:09.0000] <Hixie_>
boogyman: it'd need pretty compelling use cases to be worth adding instead of something else though

[15:47:19.0000] <SamB>
boogyman: so, make sure you say "check one or more" on the page, do the JS thing if you want, don't worry if *that* doesn't work with JS turned off

[15:47:40.0000] <SamB>
maybe those users are using a browser that wouldn't support the new attribute anyway

[15:48:53.0000] <SamB>
boogyman: you are of course aware that it's quite possible for an adversary to submit without using *your* (or any) form, yes?

[15:49:01.0000] <SamB>
heck, it could even be a non-adversary

[15:49:03.0000] <boogyman>
Hixie_: It was something asked in another channel. I remember use-cases from the past, but my solution was to just implement a simple JS script for the client-validation etc...

[15:50:34.0000] <boogyman>
SamB: I am well aware of the capability; I was forwarding on a request from a different channel, recalling my own past use-case(s)

[15:50:47.0000] <Hixie_>
boogyman: it's possible in about one line of javascript, i would imagine

[15:52:02.0000] <boogyman>
yup, and I reference the aforementioned "JS requirement flame-wars"... :p

[15:52:16.0000] <Hixie_>
i'm not sure what you're arguing against here

[15:53:22.0000] <zewt>
"people will complain that it requires javascript, therefore you should do it"? that would qualify among the weakest arguments that could be made. heh

[15:53:35.0000] <boogyman>
The intent was to ask if this was being planned for the future (forwarded request from different channel). It is not, without a ticket to undergo the typical change-request lifecycle.

[15:54:06.0000] <Hixie_>
boogyman: nothing is planned for the future except the things that are already in the spec :-)

[15:54:15.0000] <Hixie_>
boogyman: we don't really plan ahead so much

[15:54:28.0000] <Hixie_>
or rather, the spec is the plan ahead

[15:54:52.0000] <boogyman>
iterations, go figure...

[15:57:59.0000] <Hixie_>
i don't understand the Fetch API

[15:58:48.0000] <Hixie_>
what's the first argument to fetch()?

[15:58:55.0000] <Hixie_>
(also, window.fetch is SO going to clash)

[16:10:40.0000] <Hixie_>
what happens if you resolve a promise you've rejected?

[16:10:46.0000] <Hixie_>
because that's what fetch() does...

[16:12:29.0000] <TabAtkins>
Hixie_: Once a promise has been resolved in some way, any further attempts to resolve it are no-ops.

[16:12:44.0000] <SamB>
Hixie_: well, did you get that "shock remote victim" protocol deployed in browsers yet?

[16:12:58.0000] <Hixie_>
i would not support such a protocol

[16:13:08.0000] <Hixie_>
TabAtkins: still seems bad for a spec to do it, though...

[16:13:19.0000] <TabAtkins>
Hixie_: Oh, certainly; if it's happening, it's a bug.

[16:13:19.0000] <SamB>
well, I guess you can't use it on the spec author?

[16:13:23.0000] <TabAtkins>
I was just answering your question. ^_^

[16:13:31.0000] <Hixie_>
SamB: more effective to file a bug :-)

[16:13:34.0000] <Hixie_>
TabAtkins: thanks :-)

[16:14:13.0000] <SamB>
of course, if it's an *accident* rather than a thoroughly bizarre API, that's different

[16:14:28.0000] <Hixie_>
i assume it's always an accident

[16:14:47.0000] <Hixie_>
so it looks like the fetch API doesn't have an object that represents an ongoing fetch

[16:14:47.0000] <TabAtkins>
Yeah, double-resolving a promise is always going to be an accident.

[16:14:50.0000] <Hixie_>
interesting

[16:15:03.0000] <Hixie_>
and nor does ES6, really

[16:15:06.0000] <Hixie_>
though they both have promises

[16:15:14.0000] <Hixie_>
that represent essentially the same thing...

[16:15:26.0000] <Hixie_>
nope, no sign of conway here, that's for sure

[16:15:35.0000] <SamB>
conway?

[16:15:48.0000] <Hixie_>
http://en.wikipedia.org/wiki/Conway's_law

[16:15:48.0000] <zewt>
as long as it's not "on accident"

[16:16:17.0000] <SamB>
zewt: you don't think 5-year-olds should be writing specs?

[16:16:20.0000] <TabAtkins>
Hixie_: Fetch resolves the promise with a Response as soon as it's possible to construct one, no?

[16:16:35.0000] <zewt>
i think the age threshold for people who say "on accident" is ~15, not so much 3

[16:16:59.0000] <Hixie_>
i really don't understand why fetch() takes both a Request and a RequestInit

[16:16:59.0000] <SamB>
zewt: well, yes, I was just giving an example of an age at which I think it's actually acceptable

[16:17:19.0000] <Hixie_>
TabAtkins: well, i'm not sure how one defines "as soon as possible" here

[16:17:28.0000] <SamB>
I mean, when not in zombie-mode and not talking silly on purpose

[16:17:33.0000] <Hixie_>
TabAtkins: but if it needs a promise, presumably it's not the entire time the api is doing something

[16:17:39.0000] <TabAtkins>
I think as soon as the response returns and starts sending data (and redirects have been followed).

[16:17:58.0000] <TabAtkins>
Well, I guess you have to wait for headers to finish sending.

[16:18:20.0000] <TabAtkins>
But you can resolve the promise while body is still sending, since you've got a stream for that.

[16:18:26.0000] <SamB>
so is there a promise or not?

[16:18:38.0000] <TabAtkins>
SamB: ???

[16:18:39.0000] <Hixie_>
my point is just that there's no object that represents the fetch

[16:18:53.0000] <TabAtkins>
Hixie_: In what way do you want something to "represent the fetch"?

[16:18:56.0000] <SamB>
Hixie_: hmm, the Response doesn't represent it well enough for you?

[16:19:11.0000] <TabAtkins>
(We were just discussing today that there's no way to cancel a fetch().)

[16:19:19.0000] <Hixie_>
TabAtkins: not saying i necessarily want anything, i'm just trying to figure out how to reconcile Fetch and Loader

[16:19:42.0000] <Hixie_>
SamB: well as tab just pointed out, it doesn't e.g. let you cancel a fetch

[16:19:43.0000] <SamB>
maybe either the promise or the Response should be acceptable as a representative of the fetch?

[16:19:45.0000] <TabAtkins>
Okay.  Well, the Response object represents the *result* of the fetch.  The promise represents the ongoing operation to produce a Response.

[16:20:11.0000] <Hixie_>
a promise isn't really a useful object in and of itself

[16:20:18.0000] <TabAtkins>
Most likely, when we figure out how promise subclassing works, fetch()'ll switch to returning a CancelablePromise or something.

[16:20:37.0000] <SamB>
TabAtkins: will that still be cancelable after it resolves?

[16:20:56.0000] <Hixie_>
subclassing promises is all kinds of trouble, since it won't chain right

[16:20:59.0000] <SamB>
or can't you race with the resolve?

[16:21:00.0000] <TabAtkins>
SamB: Dunno.  Depends on semantics.

[16:21:33.0000] <TabAtkins>
SamB: I mean, once it resolves, you've got a Response.  The question is just whether you then must cancel via the Response (to stop receiving body bytes) or whether a cancel on the promise will chain down into the Response.

[16:21:55.0000] <TabAtkins>
Hixie_: That's why it hasn't been done yet. It'll happen at some point, though.

[16:22:04.0000] <TabAtkins>
It's just an engineering problem to work around, after all.

[16:22:08.0000] <SamB>
what does "chain right" mean

[16:22:12.0000] <Hixie_>
i don't really see a sane way to do it

[16:22:19.0000] <SamB>
typeclasses obviously

[16:22:25.0000] <Hixie_>
but if it's gonna happen, i have use cases for it

[16:22:29.0000] <TabAtkins>
SamB: returnsASpecialPromise().then(function(x){ return "foo"; });

[16:22:33.0000] <Hixie_>
in particular i need to apply backpressure to promises

[16:22:42.0000] <TabAtkins>
Is the promise returned by then() a special promise, or a plain one?

[16:22:52.0000] <SamB>
TabAtkins: that was basically my question

[16:22:52.0000] <TabAtkins>
Hixie_: That's for streams to do.

[16:23:04.0000] <TabAtkins>
SamB: Well, that's the question to answer.

[16:23:05.0000] <Hixie_>
TabAtkins: Promise.all() is an even bigger problem imho (or whatever it's called in ES's API)

[16:23:20.0000] <TabAtkins>
Hixie_: Yeah, that's definitely an... interesting aspect.

[16:23:29.0000] <TabAtkins>
And yeah, it's Promise.all()

[16:23:35.0000] <Hixie_>
TabAtkins: streams are a different issue

[16:23:47.0000] <Hixie_>
TabAtkins: i mean something like object A is on-demand, and depends on object B which is on-demand

[16:23:59.0000] <Hixie_>
one way you could do it is say that object A actually depends on object B's "ready" promise

[16:24:14.0000] <Hixie_>
but then you lose the back-channel for when you tell A to get on with it -- it has no way to trigger B to get on with it.

[16:24:48.0000] <TabAtkins>
Hixie_: Hm, I'm missing some context, since presumably B has some API to load itself as well.

[16:24:52.0000] <SamB>
again, are you trying to do lazy evaluation or async I/O?

[16:25:04.0000] <Hixie_>
TabAtkins: e.g. B is an image, A is a style sheet

[16:25:10.0000] <Hixie_>
TabAtkins: both are "load on demand"

[16:25:15.0000] <Hixie_>
TabAtkins: A depends on B

[16:25:26.0000] <Hixie_>
TabAtkins: at some point you say "I need A"

[16:25:28.0000] <TabAtkins>
Hixie_: Like, A()'s ready promise could be a Promise.all() of its internal ready promise and the ready promises of all of its dependencies.

[16:25:42.0000] <Hixie_>
TabAtkins: the problem is in the opposite direction

[16:25:44.0000] <SamB>
i.e., those aren't the same thing and trying to make promises handle both is probably a bad idea?

[16:25:45.0000] <TabAtkins>
But it can hold onto more API than just that promise.

[16:25:49.0000] <Hixie_>
TabAtkins: how does A tell B "ok, I need you now"

[16:25:54.0000] <TabAtkins>
Like the loader function for each of its requirements.

[16:25:58.0000] <Hixie_>
if all it has is a promise for a B

[16:26:05.0000] <Hixie_>
sure

[16:26:18.0000] <Hixie_>
that's how i'm going to have to do it since promises don't have subapis

[16:26:20.0000] <TabAtkins>
And yes, what SamB said.  "Please do your work" is a separate thing from "Let me know when your work is done".

[16:26:39.0000] <SamB>
Hixie_: maybe the promise should be a property of some larger object?

[16:26:47.0000] <Hixie_>
the larger object is just B

[16:26:58.0000] <SamB>
okay

[16:27:07.0000] <TabAtkins>
Hixie_: Btw, API idiom for this stuff is a .loaded attribute, and a .load() function.

[16:27:08.0000] <SamB>
so don't do that thing where you throw away B and keep only the promise?

[16:27:38.0000] <TabAtkins>
(I expect you'll run the API by Anne/Domenic/etc, but might as well get this right from the beginning.)

[16:27:39.0000] <Hixie_>
TabAtkins: .loaded, .ready, whichever

[16:27:57.0000] <Hixie_>
TabAtkins: .loaded and .load() are bad names because they're ambiguous

[16:28:03.0000] <SamB>
TabAtkins: maybe fetches will need to return something more than just a promise too :-(

[16:28:14.0000] <Hixie_>
TabAtkins: they don't distinguish the fetch step from the execution step

[16:28:16.0000] <SamB>
now I'm having evil ideas involving forwarding

[16:28:21.0000] <SamB>
can you do forwarding in JS?

[16:28:28.0000] <TabAtkins>
Hixie_: Ah, sure.  Those are for the loading steps.

[16:28:39.0000] <TabAtkins>
SamB: Yeah, there's various idioms for it. what do you want to do?

[16:28:54.0000] <SamB>
TabAtkins: like, fetch could return a fake promise that is actually not a promise

[16:29:01.0000] <SamB>
but a wrapper around a promise

[16:29:03.0000] <TabAtkins>
(I do some twisty stuff in Colors to make the APIs extensible more easily.)

[16:29:07.0000] <SamB>
which can be canceled

[16:29:10.0000] <Hixie_>
TabAtkins: is a module "loaded" when it's downloaded, translated, instantiated, compiled, has dependencies, evaluated...?

[16:29:14.0000] <TabAtkins>
SamB: Ah, no, no reason to make that happen.

[16:29:24.0000] <TabAtkins>
Hixie_: Shrug. ^_^

[16:29:33.0000] <Hixie_>
TabAtkins: that's why i prefer terms like "ready"

[16:29:46.0000] <SamB>
TabAtkins: I'm sure there would be other reasons one might want to forward method calls

[16:29:48.0000] <Hixie_>
"ready" more clearly indicates "i'm good to go, but haven't gone"

[16:30:13.0000] <Hixie_>
anyway, i'm happy to let y'all bikeshed the terms

[16:31:10.0000] <zewt>
programmers can't even decide on what to call "null"

[16:31:19.0000] <Hixie_>
/me votes for nil

[16:31:24.0000] <zewt>
one of python's smaller but most idiotic warts is calling null "None"

[16:31:50.0000] <zewt>
one of those things where: it doesn't matter which one you use, just whatever you do, don't make up something new

[16:32:51.0000] <TabAtkins>
Hixie_: nil is false, silly.

[16:33:10.0000] <zewt>
much like null

[16:33:11.0000] <Hixie_>
nil is the one true way

[16:33:15.0000] <SamB>
zewt: on the other hand, it took them forever to get around to having named truth/falsehood

[16:33:20.0000] <zewt>
by the way, does anyone know where the "if(x == false)" thing comes from

[16:33:22.0000] <SamB>
they just used 0/1 for those for ages

[16:33:23.0000] <Hixie_>
and it isn't type compatible with false in any sane world :-P

[16:33:34.0000] <zewt>
re: it's such a ridiculous lack of understanding of the whole concept of a Boolean

[16:33:48.0000] <SamB>
Hixie_: so you think CL is insane, not just elisp?

[16:33:57.0000] <zewt>
when i see "if(x == true)" i want to rewrite it to say "if(x == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true == true ==

[16:34:08.0000] <Hixie_>
all the lisps are insane but that's a whole different issue

[16:34:47.0000] <SamB>
zewt: there might be some cases where it is actually sane to compare against true/false

[16:34:57.0000] <Hixie_>
zewt: in js, if (x) and if (x == true) are not the same thing, fwiw

[16:34:58.0000] <zewt>
i guarantee you not in any of the cases i've seen

[16:35:01.0000] <SamB>
but I imagine this would mostly have to do with attempting to print them

[16:35:13.0000] <zewt>
pretty sure this is entirely a "i saw this somewhere and i'm doing that thing i saw"

[16:35:15.0000] <SamB>
like, in implementing `print'

[16:35:16.0000] <Hixie_>
(because == and if () coerce differently)

[16:35:17.0000] <jamesr__>
#define true 7

[16:35:20.0000] <boogyman>
zewt: some [insert rant] languages expose *-y evaluations, where 1 == true but 1 !== true

[16:35:35.0000] <zewt>
mostly i see it in objc, where it's "x == YES"

[16:35:36.0000] <SamB>
Hixie_: what's the difference?

[16:35:52.0000] <Hixie_>
i forget the details

[16:35:59.0000] <SamB>
though actually it's not the same in C, Python, C++, etc. either

[16:36:46.0000] <SamB>
since e.g. 2 is truthy, but not == 1

[16:36:52.0000] <TabAtkins>
zewt: null/undefined are falsey, but not == false.

[16:37:01.0000] <zewt>
(of course, the point wasn't the order of operations, i just wasn't going to calculate how many ('s i should stick in there when I held down shift-insert)

[16:37:23.0000] <SamB>
or, in python, [] or () or {} would be falsey, but not == 0

[16:37:44.0000] <TabAtkins>
zewt: And use of "x == false" over "!x" is quite common when you have an API that can return false *or* a falsey value, but the latter is a valid value.  Like indexOf().

[16:38:14.0000] <Yuhong>
I wonder if there is any hope that iOS can stop treating application/xhtml+xml as text/html.

[16:38:21.0000] <SamB>
(is truthy the wrong word?)

[16:38:23.0000] <TabAtkins>
Or maybe that one returns -1.  Anyway, cases like that occur, where 0 or "" is a valid return value, and false is a failure return value.

[16:38:34.0000] <TabAtkins>
SamB: Yes it is.

[16:38:42.0000] <zewt>
TabAtkins: err, indexOf returns -1 ... yeah

[16:38:56.0000] <SamB>
what's the companion to falsey, then?

[16:39:10.0000] <zewt>
returning true/false/null or something like that would just be a really bad API

[16:39:21.0000] <zewt>
and in that case i'd probably say if(x != null && x) / if(x != null && !x)

[16:39:28.0000] <zewt>
or something along those lines

[16:39:29.0000] <TabAtkins>
zewt: Shrug, it happens.  Blame the lack of Except or Option monads in JS. ^_^

[16:39:44.0000] <Hixie_>
jorendorff: so... if I have <script type=module dependencies=foo ...>, and at some point I call LoadModule() for that module, how do I prepopulate its dependencies??

[16:39:53.0000] <gsnedders>
zewt: "yes", "no, "maybe" comes to mind as API design :)

[16:40:12.0000] <SamB>
TabAtkins: stupid missing typeclasses/HM typesystem ;-P

[16:40:32.0000] <TabAtkins>
SamB: I'd kill for a Maybe.

[16:40:42.0000] <TabAtkins>
Also: flatMap on Array.

[16:40:54.0000] <SamB>
is that concatMap

[16:40:58.0000] <gsnedders>
/me would kill for a decent strongly typed language with a powerful type system in place of JS

[16:41:06.0000] <zewt>
i wish it was any of these things in any of the times i've seen that (cough) pattern, but it's all just places returning a Simple Old Boolean

[16:41:23.0000] <Hixie_>
i see how to fake it for a non-JS module, but if 'instantiate' returns 'undefined' (as it would for JS), then I don't see how to inject extra dependencies

[16:41:23.0000] <SamB>
or is flatMap actually >>=

[16:41:51.0000] <Hixie_>
gsnedders: i wouldn't kill for it, but yeah, i really, really wish the web had strong types

[16:41:51.0000] <TabAtkins>
SamB: flatMap is >>=, yeah.

[16:41:54.0000] <gsnedders>
I kinda hope MSR's work on type systems for TypeScript/JS boundaries gets somewhere such that one can create a sane languge which JS maps to a subset thereof

[16:42:20.0000] <TabAtkins>
Wanna be able to map over an array and return 0+ elements to stitch into the result.

[16:42:26.0000] <zewt>
i'll take weak typing for web-like work any day

[16:42:28.0000] <gsnedders>
Which makes replacing JS trivial, as both input languages parse to one bytecode

[16:42:43.0000] <gsnedders>
Well, "easy" :)

[16:42:46.0000] <SamB>
I guess flatMap is actually about the most descriptive name I've heard for it

[16:42:59.0000] <TabAtkins>
SamB: Yeah, you map, then you flatten one level. ^_^

[16:43:05.0000] <SamB>
I mean neither >>= nor bind actually desscribes it too well

[16:43:07.0000] <zewt>
gsnedders: call it "*cough* easy"

[16:43:16.0000] <TabAtkins>
It's a direct transcription of >>= implemented using only the Functor semantics.

[16:43:30.0000] <SamB>
TabAtkins: you can do that?

[16:43:43.0000] <SamB>
don't you need some kind of monoid too?

[16:43:46.0000] <TabAtkins>
SamB: Of course, if you ahve a flatten function as well, that'll convert a nested object into a single level.

[16:44:07.0000] <TabAtkins>
I don't like referring to that as a monoid, as it's not *in practice* in a language, just in the theoretical sense.

[16:44:30.0000] <SamB>
heh

[16:44:45.0000] <TabAtkins>
Yeah, you're technically combining two members of a set into a third member of the set, but really it's reaching into a nested object and generating a new one with the same data, respecting the nested sematnics.

[16:44:48.0000] <SamB>
my main issue with monoids is there are so darned many to choose from

[16:45:00.0000] <TabAtkins>
Use more complicated objects, then.

[16:45:10.0000] <SamB>
like, in arithmatic you've got one over (*) and one over (+)

[16:45:14.0000] <TabAtkins>
(That doesn't save you from every object having First/Last monoids, of course.)

[16:45:24.0000] <TabAtkins>
(And a bunch more.)

[16:45:36.0000] <zewt>
TabAtkins: don't think i've seen ever the word "functor" used outside of C++

[16:45:45.0000] <SamB>
zewt: it is

[16:45:49.0000] <SamB>
and it means a totally different thng

[16:46:02.0000] <SamB>
zewt: something that has a map function, basically

[16:46:02.0000] <TabAtkins>
zewt: It's a category theory term, unrelated to C++.

[16:46:11.0000] <zewt>
i mean, it just means (to me) "something that can be called like a function", but that's just nothing special in modern languages (and python just calls that a "callable")

[16:46:11.0000] <TabAtkins>
In c++ it means "function", basically.

[16:46:23.0000] <TabAtkins>
But yeah, "Functor" is "has a .map() function, acting in the expected way".

[16:46:34.0000] <zewt>
yeah that's the wrong name then

[16:46:37.0000] <TabAtkins>
Haskell's names are stupid and dumb.

[16:46:47.0000] <zewt>
ah, missed the "haskell" part

[16:46:52.0000] <TabAtkins>
I mean, that's the term for that concept from category theory.

[16:46:58.0000] <SamB>
TabAtkins: in Haskell's defense, those names were not made up by the Haskell people

[16:47:03.0000] <TabAtkins>
No idea which one came first.

[16:47:05.0000] <SamB>
they were just re-used from  CT

[16:47:24.0000] <zewt>
sure, but if you're a programming language, the meaning of terms for programming languages resolve first

[16:47:28.0000] <TabAtkins>
SamB: That's not a defense of Haskell, just an explanation. ^_^ Haskell is still dumb for using dumb math words.

[16:47:49.0000] <gsnedders>
Broadwell includes H.265 HW acceleration support; next gen video to be dominated by patent-encumbered formats again? *sighs*

[16:47:50.0000] <TabAtkins>
zewt: Haskell is a programming language, so it appears to have equal rights to the name as c++

[16:48:07.0000] <TabAtkins>
But anyway, better name is Mappable.

[16:48:11.0000] <SamB>
TabAtkins: so you want Haskell people to try to make up a comprehensible term?

[16:48:19.0000] <TabAtkins>
Just like better name for Monoid is Joinable or something.

[16:48:45.0000] <zewt>
not that it matters, but i'd call c++ a higher-authority language than haskell :P

[16:48:46.0000] <SamB>
I don't know if Monoid has a better name; there are so darned many different ones

[16:49:03.0000] <SamB>
zewt: why did C++ misuse CT terms

[16:49:07.0000] <TabAtkins>
The concept is simple - it's something that can be combined with similar somethings to produce a third something of the same type.

[16:49:18.0000] <SamB>
zewt: C++ should have called those "callable"

[16:49:24.0000] <zewt>
(also, it's still a stupid term in C++)

[16:49:25.0000] <SamB>
like I always have

[16:51:49.0000] <SamB>
anyway, yes, Monad and Functor are bad names; Monoid isn't good but it's hard to come up with a good name for such a general structure as a monoid

[16:52:55.0000] <SamB>
actually, Monoid may just come from Abstract Algebra

[16:53:18.0000] <TabAtkins>
When I taught myself what monads are, I just read http://www.haskell.org/haskellwiki/Typeclassopedia and gradually did find+replace on terms as I figured out what they really meant. Made it *way* easier to read.

[16:53:36.0000] <TabAtkins>
Yeah, monad is basic abstract algebra.  A bit weaker than Set.

[16:53:45.0000] <TabAtkins>
Ring, rather.

[16:53:50.0000] <TabAtkins>
(Set is way weaker, obvs.)

[16:53:52.0000] <SamB>
you mean monoid

[16:53:58.0000] <TabAtkins>
UGH, YES

[16:54:07.0000] <TabAtkins>
Mon(a|oi)d is stupid.

[16:54:29.0000] <hober>
there's an axises joke in here somewhere

[16:55:05.0000] <SamB>
TabAtkins: hmm, doesn't every Ring have *two* Monoids?

[16:55:44.0000] <SamB>
one of which ("addition") is evidently also an "abelian group"

[16:56:02.0000] <TabAtkins>
SamB: Hurp durp, I'm forgetting all my terms.  Yes.

[16:56:13.0000] <TabAtkins>
*Group* is the thing right above monoid.

[16:56:21.0000] <SamB>
hey, I had to cheat and user Wikipedia

[16:56:26.0000] <SamB>
*use

[16:56:45.0000] <SamB>
though I did manage to extrapolate that Group must be the slightly-stronger structure

[16:57:09.0000] <TabAtkins>
Yeah, group is just a monoid with an identity element.

[16:57:11.0000] <SamB>
I can remember what a Monoid is about though

[16:57:30.0000] <SamB>
hmm, monoids don't have identity already?

[16:57:45.0000] <TabAtkins>
In programming terms, a monoid is a structure where you can take an array of them and call .reduce(), and it knows what to do automatically.

[16:57:57.0000] <TabAtkins>
A Group is one of those that can handle being an empty list. ^_^

[16:58:10.0000] <TabAtkins>
Ugh again, Group is inverses.

[16:58:14.0000] <SamB>
well, if you pick *which* monoid to use for that type ;-P

[16:58:17.0000] <TabAtkins>
Semigroup is a monoid without identity.

[16:58:23.0000] <TabAtkins>
SamB: Assume strong typing, of course.

[16:58:41.0000] <TabAtkins>
A monoid with a .negate() is a group.

[16:58:46.0000] <SamB>
strong typing isn't really enough

[16:59:13.0000] <TabAtkins>
Sure it is.  If you know you have a List[Foo], then given an empty list, you can tell that it's an empty *list of Foos*.

[16:59:19.0000] <SamB>
Well, I mean, if I wanted Monoids in a prover I'd make it possible to have more than one per type

[16:59:38.0000] <TabAtkins>
SamB: You're screwed then, because First and Last monoids exist for all types.

[16:59:49.0000] <TabAtkins>
At a mnimum.

[16:59:50.0000] <SamB>
how would I be screwed?


2014-08-12
[17:00:24.0000] <TabAtkins>
Every type has at least two monoids.

[17:00:27.0000] <SamB>
anyway, in provers you can usuallly just make the operator a parameter to the "typeclass"

[17:00:50.0000] <zewt>
a monoid sounds like something you go to the doctor to have removed

[17:00:56.0000] <SamB>
because dependant typing rocks like that

[17:01:10.0000] <TabAtkins>
Haskell just gives every object one monoid, and makes you use newtype (iirc?) to cast it into a new one.

[17:01:17.0000] <SamB>
TabAtkins: yeah

[17:01:36.0000] <SamB>
so it's not really a good idea to define one for Int or Integer

[17:01:48.0000] <JonathanNeal>
I get confused calling the same thing a “frame”, ”window”, and “viewport”. Is there one name for that thing when I’m referring to it in CSS? Is it the viewport?

[17:01:50.0000] <TabAtkins>
Okay, okay, got my terms together again.  Any object that can be combined with other objects of the same type to produce a third object of the same type, is a magma.

[17:02:20.0000] <TabAtkins>
If the combining option is associative, it's a semigroup. If there's an identity element, monoid. Inverses, group. Commutative, abelian group.

[17:02:24.0000] <SamB>
JonathanNeal: viewport sounds like the thing you want?

[17:02:30.0000] <TabAtkins>
JonathanNeal: In CSS, "viewport".

[17:02:41.0000] <TabAtkins>
JonathanNeal: But be careful when talking about SVG, who uses the term to mean something else. :/

[17:03:21.0000] <JonathanNeal>
TabAtkins: In SVG, does viewport mean something different than viewbox?

[17:03:27.0000] <SamB>
TabAtkins: is that a representation of *potential* viewport in SVG, then?

[17:03:30.0000] <TabAtkins>
Nah, that's what it means.

[17:03:39.0000] <JonathanNeal>
And in the scenario <div id=“viewport" style=“overflow:scroll”><div id=“something-that-triggers-overflow”> would id=“viewport” also be considered a viewport?

[17:03:55.0000] <TabAtkins>
SamB: No, SVG just uses "viewport" to mean "the coordinate space generated by an <svg>, or similar element that establishes its own coords".

[17:04:03.0000] <SamB>
TabAtkins: oh.

[17:04:08.0000] <SamB>
so they don't actually consider the edges?

[17:04:17.0000] <TabAtkins>
JonathanNeal: It's unclear how to port those SVG terms to other CSS layout modes, and I don't really want to. ^_^

[17:04:26.0000] <TabAtkins>
SamB: What do you mean?

[17:04:47.0000] <SamB>
using viewport to refer to a coordinate space sounds very confused :-(

[17:14:13.0000] <SamB>
hmm, I guess sodipodi:namedview is not really standard ;-)

[17:15:38.0000] <zewt>
http://wtf.spec.whatwg.org

[01:02:50.0000] <zcorpan_>
you can't tell in javascript if an HTTPS resource is weak/deprecated right?

[01:09:55.0000] <zcorpan_>
/me wonders if there are bugs with mixed content and document.domain

[01:19:47.0000] <annevk>
zcorpan_: I don't think that's exposed

[01:20:07.0000] <zcorpan_>
annevk: ok

[01:26:17.0000] <annevk>
I was wondering if there was a difference between certificates for public content and intranet content. As in, can we make CORS-less work over HTTPS? Although I guess if you set up HTTPS, adding one more header is easy...

[01:32:23.0000] <foolip>
annevk: what's the point of "A descendant browsing context's document has a non-empty fullscreen element stack" and why is it not in the fullscreen element ready check?

[01:33:07.0000] <foolip>
AFAICT, it's not possible for a descendant to a non-empty stack without an iframe in the current document being on the current stack, so...

[01:34:03.0000] <foolip>
+have

[01:49:31.0000] <annevk>
foolip: I guess it catches the case where <iframe> has a child

[01:50:21.0000] <annevk>
foolip: I didn't want to make it part of ready check as to minimize cross-process activity, but I could give up on that

[01:53:16.0000] <annevk>
I wish Aryeh Gregor was still around to fix bugs in ranges

[01:53:29.0000] <annevk>
I'm never quite sure what I'm doing when changing that section

[02:13:02.0000] <foolip>
annevk: how about just checking if there's an ancestor <iframe> and saying no? that wouldn't require any cross-process tinkering

[02:13:21.0000] <foolip>
and having the child of an iframe go fullscreen doesn't seem useful anyway

[02:13:58.0000] <annevk>
foolip: only <iframe> can pass fullscreen capabilities through right?

[02:14:18.0000] <foolip>
right

[02:14:22.0000] <annevk>
ok

[02:17:31.0000] <foolip>
although if that weren't the case one could say "element which is a browsing context container" or some such

[02:28:36.0000] <foolip>
annevk: should I file a bug or do you have a plan?

[02:29:57.0000] <annevk>
foolip: fixing now

[02:30:13.0000] <foolip>
annevk is teh awesome!

[02:52:42.0000] <foolip>
annevk: "The context object" should be <i>element</i> since we're not in requestFullscreen() anymore

[02:52:49.0000] <annevk>
shit

[02:53:28.0000] <annevk>
copied that from the previous bullet point which is also wrong

[02:53:42.0000] <foolip>
oh look, I didn't notice that

[02:55:08.0000] <annevk>
fixed both

[02:55:20.0000] <foolip>
confirmed

[02:55:45.0000] <foolip>
would you mind making "Fullscreen is not supported." a per-element thing?

[02:56:01.0000] <foolip>
currently Blink has a setting where only <video> elements can go fullscreen in Android WebView

[02:57:41.0000] <foolip>
if you feel like it, it's supposedly temporary...

[02:59:14.0000] <annevk>
hmm, discuss on WHATWG if we want to keep that?

[02:59:32.0000] <annevk>
if that actually remains the case we might want some API to figure out for which elements you can actually use it

[03:00:47.0000] <foolip>
makes sense

[03:01:08.0000] <foolip>
if it remains the case for long I'll come back to it

[03:01:10.0000] <foolip>
now lunch

[06:29:57.0000] <annevk>
JakeA: can we get a "needs input" label for issues?

[06:30:22.0000] <annevk>
JakeA: something that indicates it needs input from others before we can proceed?

[06:32:59.0000] <JakeA>
annevk: added

[06:34:09.0000] <annevk>
cool

[07:48:03.0000] <annevk>
I wrote http://annevankesteren.nl/2014/08/asynchronicity so we have a pointer when people are not queuing tasks or some such

[07:48:08.0000] <annevk>
Suggestions welcome

[07:53:40.0000] <jorendorff>
Hixie_: is there a way to clone/edit that huge graph you posted?

[07:55:19.0000] <Domenic>
annevk: related are the two sections starting at https://github.com/w3ctag/promises-guide#note-asynchronous-steps-explicitly

[07:55:41.0000] <jorendorff>
Hixie_: putting the pipeline in the right order should help

[07:56:16.0000] <Domenic>
annevk: your post approaches it from a different angle though which is probably more useful as a conceptual intro

[07:56:30.0000] <Domenic>
annevk: e.g. talking about things in parallel and how that could impact code

[07:57:20.0000] <annevk>
I guess I can add a pointer for more detailed instructions

[07:59:12.0000] <annevk>
done

[07:59:16.0000] <Domenic>
I think I'll add a pointer to yours for more conceptual background :)

[09:01:30.0000] <annevk>
https://twitter.com/W3CProphet/status/499213295023190017 I wonder what I'm missing

[09:03:37.0000] <caitp>
¯\_(ツ)_/¯

[09:36:23.0000] <SimonSapin>
Hixie_: http://www.whatwg.org/specs/web-apps/current-work/multipage/scripting.html#selectors "Everything else (attribute values on HTML elements, IDs and classes in no-quirks mode and limited-quirks mode, and element names, attribute names, and attribute values in XML documents)" I don’t understand this. There are two "and", and it seems to leave attribute values on non-HTML elements in HTML documents

[09:36:25.0000] <SimonSapin>
undefined

[09:42:26.0000] <TabAtkins>
SimonSapin: Which set of multiple "and"s is confusing you?

[09:42:54.0000] <SimonSapin>
TabAtkins: in the parentheses I quoted

[09:43:06.0000] <TabAtkins>
SimonSapin: There are four "and"s there. ^_^

[09:43:28.0000] <SimonSapin>
uh, maybe there is implied grouping, but it’s not clear what that should be

[09:44:20.0000] <TabAtkins>
(attribute values on html elements), (ids and classes) in (no-quirks mode and limited-quirks mode), and (element names, attribute names, and attribute values in XML documents).

[09:45:52.0000] <SimonSapin>
((element names, attribute names, and attribute values) in XML documents) or (element names, attribute names, and (attribute values in XML documents)) ?

[09:46:09.0000] <Ms2ger>
Former

[09:46:37.0000] <TabAtkins>
Definitely former.

[09:48:02.0000] <SimonSapin>
ok, so attr values on non-HTML elements in HTML documents is not in "everything else"

[09:48:57.0000] <Ms2ger>
I'm not sure if the parenthetical is supposed to be exhaustive

[09:49:22.0000] <SimonSapin>
well

[09:49:52.0000] <SimonSapin>
in that case it sounds better to remove it entirely

[09:52:54.0000] <Ms2ger>
Yeah

[09:52:56.0000] <Ms2ger>
File a bug?

[10:01:59.0000] <SimonSapin>
https://www.w3.org/Bugs/Public/show_bug.cgi?id=26560

[10:02:05.0000] <SimonSapin>
yay bugzilla line breaking

[10:06:03.0000] <caitp>
didn't they have a gsoc project for making bugzilla support markdown? maybe the kids will improve the linewrapping, too :p

[10:08:04.0000] <Hixie_>
SimonSapin: generally speaking, parentheticals in prose i write aren't normative

[10:08:13.0000] <Hixie_>
SimonSapin: or rather, they're intended to be redundant with other text

[10:08:39.0000] <Hixie_>
SimonSapin: so in this case, since attributes in non-XML elements are already covered by the earlier paragraph, they're not "everything else"

[10:09:58.0000] <SimonSapin>
Hixie_: the earlier paragraph is about attr names, not values

[10:10:21.0000] <Hixie_>
"attribute values on HTML elements" is the first thing listed

[10:10:26.0000] <Hixie_>
in the parenthetical

[11:00:04.0000] <Hixie_>
jorendorff: looks like i can share it with you?

[11:36:02.0000] <annevk>
By the way, I reverted these edits: http://wiki.whatwg.org/wiki/Special:Contributions/Ramanjeet.taneja

[11:36:17.0000] <annevk>
They pointed to a URL that was not really working

[12:33:20.0000] <kriskowal>
i have not yet begun to lurk

[12:38:58.0000] <TabAtkins>
kriskowal: By definition, you just *stopped* lurking.

[12:39:47.0000] <caitp>
does it count as lurking if it's only for 5 minutes?

[13:09:28.0000] <jorendorff>
Hixie_: yeah, second thoughts -- might be counterproductive since it's for your understanding.

[13:14:12.0000] <Hixie_>
jorendorff: well you're welcome to a copy you can do whatever you want with :-)

[13:28:31.0000] <Hixie_>
jorendorff: any idea what CreateLinkedModuleInstance() is supposed to be?

[13:28:35.0000] <Hixie_>
mentioned in Reflect.Loader.prototype.newModule

[13:28:39.0000] <Hixie_>
but doesn't appear to be defined anywhere

[13:36:42.0000] <jorendorff>
Hixie_: not totally sure, because this is another area where allenwb changed some stuff without telling anybody

[13:36:50.0000] <Hixie_>
k

[13:37:10.0000] <jorendorff>
Hixie_: but I think what it's supposed to do is create a Module object that doesn't need to be linked with anything

[13:38:59.0000] <jorendorff>
the point of this loader.newModule() method is to support creating a Module object based on just provided keys and values

[13:39:18.0000] <Hixie_>
it's interesting that there doesn't seem to be a way to create a Module object directly

[13:39:24.0000] <Hixie_>
unless i'm missing something

[13:39:27.0000] <Hixie_>
like, new Module()

[13:39:46.0000] <jorendorff>
Hixie_: the original proposal offered exactly that and allenwb editorially changed it to loader.newModule

[13:40:08.0000] <Hixie_>
also, am i missing something or are Modules really very ES-specific? Like, there doesn't seem to be a way for the loader's [[Modules]] to map a name to something that isn't a JS module

[13:40:13.0000] <Hixie_>
like, an image, or a <link> element, or whatever

[13:40:49.0000] <jorendorff>
Hixie_: that's correct, and people have complained about it, and the rationale for that is not good imho

[13:41:36.0000] <jorendorff>
the rationale is, (1) it does true linking so if one module does     export var x = 0;    export function f() { x++; }      then other modules that import x will observe its value changing

[13:42:00.0000] <jorendorff>
Reading an imported variable is a read from the actual variable (declared in the other module).

[13:42:08.0000] <jorendorff>
It's fast and you don't make copies of the variables.

[13:42:52.0000] <Hixie_>
sure, seems obvious that we should keep that

[13:42:58.0000] <Hixie_>
how does that affect the non-module case?

[13:43:33.0000] <jorendorff>
oh. well, that's a rationale for having the system "know about" module objects and use its privileged knowledge of their guts to do something that user scripts couldn't do

[13:43:47.0000] <jorendorff>
but then why not also allow other random objects, just without the magic behavior, i don't know

[13:44:14.0000] <jorendorff>
there's one more piece of rationale i can quote (without endorsing) which is

[13:44:30.0000] <jorendorff>
(2) at link time, we throw if you tried to import something and it isn't there

[13:44:55.0000] <jorendorff>
though, i guess you could *also* do that and still support non-module things in the [[Modules]] cache

[13:45:00.0000] <Hixie_>
yeah

[13:45:09.0000] <jorendorff>
but it's certainly nicer with just Modules because the set of names they expose is immutable

[13:45:16.0000] <Hixie_>
i'm thinking that e.g. style sheets would have a default export that is their <link> element or their StyleSheet object

[13:45:21.0000] <jorendorff>
i dunno. "nicer" :-P

[13:45:23.0000] <Hixie_>
and nothing else

[13:45:42.0000] <TabAtkins>
Hixie_: Their CSSStyleSheet object, please.

[13:45:43.0000] <Hixie_>
and images would have just their default export, an <img> element

[13:45:44.0000] <Hixie_>
and so on

[13:45:52.0000] <Hixie_>
TabAtkins: probably the <link> element in practice

[13:46:31.0000] <jorendorff>
Hixie_: Modules also aren't exposed until after they're loaded and linked

[13:46:37.0000] <TabAtkins>
Hixie_: If you're importing from a url that's a stylesheet, we're developing a stylesheet constructor, so there's no need for a <link>.

[13:46:46.0000] <Hixie_>
jorendorff: they can be (e.g. in the case of circular dependencies)

[13:47:03.0000] <Hixie_>
jorendorff: i'm actually expecting that we would make <script type=module> just expose the Module off the HTMLScriptElement object

[13:47:12.0000] <jorendorff>
Hixie_: even in the case of circular dependencies

[13:47:17.0000] <jorendorff>
Hixie_: they are linked before evaluation starts

[13:47:28.0000] <Hixie_>
jorendorff: ah

[13:47:32.0000] <Hixie_>
TabAtkins: how does the ordering work?

[13:47:39.0000] <jorendorff>
circular dependencies is the only case where a Module is exposed before all its dependencies are evaluated

[13:47:49.0000] <jorendorff>
so in "normal" cases you can even count on that

[13:47:50.0000] <TabAtkins>
Hixie_: You'll be able to add a Stylesheet to the document's list of stylesheets.

[13:48:09.0000] <jorendorff>
Hixie_: but my point was, people are going to want to know the load status of stuff, right? or are they? will that be exposed?

[13:48:19.0000] <jorendorff>
at least it seems like they can do it now

[13:48:19.0000] <Hixie_>
TabAtkins: will you be able to make two <link> elements that have one order in the DOM have a different order in the style sheets list?

[13:48:40.0000] <Hixie_>
jorendorff: yes, that's one reason i assumed we'd expose the Modules pre-linking

[13:48:40.0000] <TabAtkins>
Possibly, but unsure. It might be that document-created objects have a set order, dunno.

[13:49:13.0000] <Hixie_>
TabAtkins: i beg of you, please make sure there's only one order, even if both can be mutated somehow :-)

[13:49:33.0000] <TabAtkins>
Well, we won't have it rearrange the DOM.

[13:49:47.0000] <TabAtkins>
But, like, FontFaceSet always puts the CSS-created FontFaces first in matching order.

[13:49:50.0000] <jorendorff>
Hixie_: yeah. we didn't expose any of that. possibly a mistake on our part, but we didn't see prior art for that either. for code, it's maybe not common to want that

[13:50:27.0000] <Hixie_>
TabAtkins: yeah, not rearranging the dom seems wise (Especially given scoped style sheets deep in the DOM, etc)

[14:00:18.0000] <Hixie_>
hmmmmm

[14:00:25.0000] <Hixie_>
i guess "locate" doesn't have to return a URL, huh

[14:00:28.0000] <Hixie_>
it could just return the Element

[14:00:41.0000] <Hixie_>
nothing checks that [[Address]] is a string

[14:06:34.0000] <Hixie_>
jorendorff: is the output of "normalize" exposed anywhere?

[14:06:43.0000] <Hixie_>
e.g. can you walk the [[Modules]] list?

[14:07:21.0000] <jorendorff>
Hixie_: yeah, Reflect.Loader.prototype has methods {keys,values,entries} for walking and {get,has,set,delete}. Very Map-like.

[14:07:29.0000] <Hixie_>
and i guess the Name is exposed in the LoadObjects

[14:07:39.0000] <Hixie_>
damnit

[14:07:44.0000] <jorendorff>
Loads aren't exposed ... are they?

[14:07:49.0000] <Hixie_>
in the hooks

[14:07:52.0000] <jorendorff>
oh

[14:07:54.0000] <jorendorff>
yeah

[14:07:56.0000] <Hixie_>
i can't work out how to make normalize work

[14:09:04.0000] <jorendorff>
well ... i'm not sure how to make it work either. url syntax is pretty complete, it's not sensible to add to it

[14:09:09.0000] <jorendorff>
 but it's also really annoying to use urls as module names

[14:09:23.0000] <Hixie_>
we need to support: import "packagefoo.subbar.baz"; import "http://example.com/foo.js"; import "anIDinTheDocument";

[14:09:39.0000] <Hixie_>
(where the first one is some magical way of specifying a module that I don't yet understand)

[14:09:45.0000] <Hixie_>
(the thing you were alluding to yesterday)

[14:10:23.0000] <jorendorff>
the last one would be:   import "#anIDinTheDocument" surely?

[14:11:12.0000] <Hixie_>
why?

[14:11:25.0000] <jorendorff>
well, it seems like it unifies the last two things

[14:11:33.0000] <Hixie_>
then people would think  import "foo.html#anID" would work

[14:11:39.0000] <jorendorff>
i guess they would

[14:11:39.0000] <Hixie_>
we went down that route with usemap=""

[14:11:43.0000] <Hixie_>
it led to all kinds of hassles

[14:11:54.0000] <jorendorff>
ok

[14:12:10.0000] <Hixie_>
also, side question

[14:12:14.0000] <Hixie_>
wtf is a ModuleImport??

[14:12:20.0000] <jorendorff>
but how do you distinguish an id from a relative url?

[14:12:33.0000] <Hixie_>
i've no idea how you distinguish anything here. that's my problem.

[14:12:43.0000] <jorendorff>
k

[14:12:45.0000] <Hixie_>
(how do you distinguish my.package.name from a url?)

[14:13:49.0000] <Hixie_>
what does   module foo from "foo.js";   mean?

[14:13:58.0000] <jorendorff>
Hixie_: a ModuleImport creates a global binding like any other import, but its value is the Module object

[14:14:05.0000] <jorendorff>
rather than some exported value

[14:14:18.0000] <Hixie_>
so "foo" is now a variable whose value is the Module object?

[14:14:22.0000] <Hixie_>
instead of the default export?

[14:14:24.0000] <jorendorff>
yes.

[14:14:26.0000] <jorendorff>
it also creates a dependency edge like any other import.

[14:14:41.0000] <Hixie_>
ok, so, first of all, that's wildly confusing syntax for that. but ok.

[14:14:45.0000] <jorendorff>
the default export (if any) is then foo.default

[14:14:45.0000] <Hixie_>
what's the use case?

[14:15:08.0000] <jorendorff>
i dunno, why does python have both `import os` and `from os import system`?

[14:15:19.0000] <jorendorff>
haskell also has qualified and unqualified imports

[14:15:33.0000] <Hixie_>
huh

[14:15:35.0000] <Hixie_>
weird

[14:15:47.0000] <Hixie_>
seems very weird to have this be called "module"

[14:15:51.0000] <Hixie_>
doesn't sound like an import at all

[14:15:51.0000] <jorendorff>
i agree

[14:16:00.0000] <Hixie_>
sounds more like "hey, this is a module!"

[14:16:07.0000] <Hixie_>
which i wish we had, but that's another story

[14:16:14.0000] <jorendorff>
mmhmm

[14:16:59.0000] <Hixie_>
<script type=module id=a> ... </script> <script type=module> import a; </script>

[14:17:04.0000] <jorendorff>
Hixie_: there's a certain logic to this but having both this and default exports makes me cringe

[14:17:07.0000] <Hixie_>
er, import "a"

[14:17:25.0000] <jorendorff>
(where this = ModuleImport syntax)

[14:17:41.0000] <Hixie_>
i guess in that example, "locate" should return the actual HTMLScriptElement.

[14:17:56.0000] <Hixie_>
it's not a string, but nothing seems to check that in practice so we're ok

[14:18:08.0000] <jorendorff>
right, the not checking in practice is deliberate

[14:18:09.0000] <Hixie_>
but what should "normalize" return? it can't return a URL...

[14:18:38.0000] <jorendorff>
that's the same problem as before

[14:18:44.0000] <Hixie_>
yeah

[14:19:46.0000] <SamB>
calling it module is indeed insane

[14:20:10.0000] <Hixie_>
do the people who disagree with us ever hang out on irc?

[14:20:17.0000] <SamB>
painting yourselves into a corner, you are

[14:20:18.0000] <Hixie_>
it'd be good to get their perspective :-)

[14:20:49.0000] <jorendorff>
samth hangs out in moznet #jslang. dherman is occasionally on irc

[14:21:11.0000] <jorendorff>
samth is in either Central or Eastern time

[14:22:32.0000] <jorendorff>
i dislike the syntax, I feel like any one human being could design better syntax from scratch

[14:22:38.0000] <jorendorff>
strong words

[14:22:54.0000] <jorendorff>
working incrementally i don't know how to improve it, except by deleting features.

[14:22:57.0000] <Hixie_>
other than using "module" it's mostly fine imho

[14:23:02.0000] <Hixie_>
oh JS as a whole?

[14:23:08.0000] <Hixie_>
JS as a whole is a different matter :-)

[14:23:09.0000] <jorendorff>
the import syntax in particular.

[14:23:11.0000] <Hixie_>
too late for that though

[14:23:14.0000] <jorendorff>
quite.

[14:23:30.0000] <jorendorff>
that's our motto "too late for that though"

[14:23:59.0000] <SamB>
you really need to burn it with FIRE

[14:24:46.0000] <Hixie_>
you could do  import "foo"; import "foo" as foo; import module "foo" as foo; import "foo" { explicit as foo, exports as bar };

[14:25:04.0000] <Hixie_>
(that's all the features, right?)

[14:25:12.0000] <SamB>
which features?

[14:25:17.0000] <Hixie_>
of es6 imports

[14:25:32.0000] <jorendorff>
SamB: https://www.youtube.com/watch?v=aCbfMkh940Q

[14:25:52.0000] <SamB>
thought you might have meant of Python or Haskell imports

[14:26:45.0000] <Hixie_>
personally i think "import foo;" is enough, no need to change the name, no need to control what is imported, no need to expose the Module

[14:26:48.0000] <SamB>
what's the difference between 'import "foo";' and 'import module "foo";'

[14:26:50.0000] <Hixie_>
but i'm old fashioned ;-)

[14:27:11.0000] <Hixie_>
SamB: the same as today's import "foo"; vs module foo from "foo";

[14:27:33.0000] <SamB>
that syntax is worse than Python's

[14:27:41.0000] <Hixie_>
mine or the current one?

[14:27:43.0000] <SamB>
and Python's was grown

[14:27:47.0000] <SamB>
the "module" one

[14:28:01.0000] <Hixie_>
well python doesn't have that feature

[14:28:04.0000] <Hixie_>
as far as i know

[14:28:20.0000] <SamB>
Python doesn't have a distinction

[14:28:22.0000] <jorendorff>
python does have that feature;  `import os` binds the os module object to os

[14:28:27.0000] <jorendorff>
what python doesn't have is "default exports"

[14:28:31.0000] <Hixie_>
ah ok

[14:28:32.0000] <Hixie_>
my bad

[14:28:42.0000] <SamB>
jorendorff: isn't that what __all__ is?

[14:28:52.0000] <jorendorff>
__all__ only affects `from os import *`

[14:28:56.0000] <SamB>
ah

[14:29:10.0000] <jorendorff>
keep asking questions i know the answers to, makes me feel helpful

[14:29:23.0000] <SamB>
hmm

[14:29:43.0000] <SamB>
then you have Haskell, where there are no exports but the default exports

[14:30:13.0000] <SamB>
(but some things may not be exported *at all*)

[14:31:21.0000] <SamB>
but one important commonality between the two languages: all the forms contain the "import" keyword!

[14:32:15.0000] <SamB>
and, as you know, Haskell uses "module" to introduce the export list

[14:33:06.0000] <jorendorff>
Haskell's module system seems about on par with the ES6 module system in terms of syntactic beauty

[14:33:25.0000] <jorendorff>
Haskell doesn't have Module objects

[14:33:52.0000] <jorendorff>
though it does have `import qualified` in case you just enjoy using dot syntax

[14:34:25.0000] <SamB>
jorendorff: it's for avoiding clashes

[14:34:45.0000] <jorendorff>
yeah, there are a ton of modules that export super common Prelude names

[14:36:00.0000] <Hixie_>
jorendorff: do you know what the wildcard is supposed to do? https://github.com/ModuleLoader/es6-module-loader/blob/master/lib/system.js#L168

[14:36:30.0000] <SamB>
so you'll typically "import qualified Data.Map as M" or something, iirc the syntax correctly

[14:36:41.0000] <jorendorff>
Hixie_: yeah, what this code is trying to do is let you say

[14:37:31.0000] <jorendorff>
loader.paths = { 'jquery': 'url/to/jquery', 'numerics/*': 'url/to/huge/numerical/package/*'}

[14:37:40.0000] <SamB>
jorendorff: Haskell at least knows that a construct beginning with "module" should declare a module

[14:37:44.0000] <jorendorff>
Hixie_: ^ and then

[14:38:01.0000] <Hixie_>
oh, i see

[14:38:09.0000] <Hixie_>
so numerics/foo becomes url/to/huge/numerical/package/foo

[14:38:12.0000] <jorendorff>
yup

[14:38:29.0000] <Hixie_>
somehow i missed that this was applying to the paths and not to the input to the locate hook

[14:38:58.0000] <Hixie_>
why is that in locate and not normalize?

[14:39:49.0000] <Hixie_>
maybe import foo from "#foo"; is the way to go after all

[14:39:57.0000] <Hixie_>
i don't see any other solution

[14:40:21.0000] <jorendorff>
the question being answered is "where can i download this module?" and .paths contains those answers

[14:40:53.0000] <Hixie_>
sure but this means that if someone does import "jquery" and someone else does import "url/to/jquery" they'll end up with two modules

[14:41:09.0000] <Hixie_>
why would you want that?

[14:41:10.0000] <SamB>
Hixie_: they'd probably use different mirrors anyway

[14:41:15.0000] <SamB>
or different versions

[14:41:17.0000] <SamB>
or something

[14:41:27.0000] <Hixie_>
these are the same final url

[14:42:04.0000] <jorendorff>
that's right, everyone should do |import "jquery"| because it's a bad idea to hardcode URLs in code that's going to be shared

[14:42:54.0000] <SamB>
so ... remind me why jquery doesn't start with 'module "jquery"'

[14:43:52.0000] <Hixie_>
SamB: because you need the name long before you've obtained the resource

[14:44:02.0000] <SamB>
well, sure

[14:44:03.0000] <Hixie_>
SamB: indeed you need the name before you know what resource to obtain

[14:44:09.0000] <jorendorff>
ES6 modules don't know their names, it's a little weird

[14:44:32.0000] <SamB>
that doesn't stop ELF modules from having sonames, does it?

[14:44:39.0000] <Hixie_>
the web is an extremely late-binding environment with extreme latency involved in finding resources

[14:44:48.0000] <Hixie_>
in this respect it's unlike most other systems

[14:45:26.0000] <jorendorff>
are .sonames enforced? if you try to link against something and the system can find that file, but the .soname doesn't match, is it an error?

[14:45:26.0000] <SamB>
it wouldn't be useful for anything except "WTF, you imported this module by the wrong name!"

[14:45:50.0000] <jorendorff>
well it'd be useful for making it clear to people looking at a JS module that they're looking at a module

[14:45:55.0000] <jorendorff>
i don't think the name buys you much of anything

[14:46:24.0000] <SamB>
jorendorff: well, the *linker* would get confused at least

[14:46:48.0000] <Hixie_>
having module foo { } would let us entirely get rid of type=module which alone would be a huge win imho

[14:46:52.0000] <SamB>
jorendorff: it could help everyone agree on WHAT name to import it by

[14:46:57.0000] <Hixie_>
but the es team seems unsold by this idea

[14:47:35.0000] <jorendorff>
Hixie_: actually i think that is going to happen in es7

[14:47:43.0000] <SamB>
hmm, perhaps comparing to elisp libraries would be more apt? I don't know.

[14:47:44.0000] <Hixie_>
uh

[14:47:54.0000] <Hixie_>
why are we taking a detour through pain land in the meantime then

[14:47:58.0000] <zenparsing>
i pushed really hard for lexical modules in es6

[14:50:11.0000] <zenparsing>
to no avail obviously

[14:50:39.0000] <SamB>
why is ECMA even involved


2014-08-13
[17:32:18.0000] <Hixie_>
jorendorff: what's a Module Instance Object?

[17:32:31.0000] <jorendorff>
Hixie_:  === a Module Object.

[17:32:53.0000] <Hixie_>
http://people.mozilla.org/~jorendorff/es6-draft.html#sec-module-exotic-objects ?

[17:33:05.0000] <jorendorff>
yup

[17:33:31.0000] <Hixie_>
so, how does JS code create an object that has "all the internal data properties of a Module Instance Object"?

[17:33:53.0000] <Hixie_>
(context: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-linkdynamicmodules step 1.d)

[17:34:13.0000] <jorendorff>
Hixie_: the only way to do that is with newModule

[17:34:29.0000] <Hixie_>
ah, ok

[17:38:10.0000] <Hixie_>
man, linking is really complicated

[17:38:56.0000] <SamB>
Hixie_: and you aren't even talking about ELF

[17:45:28.0000] <Hixie_>
i'm amused that CreateModuleLinkageRecord creates an object, not a record...

[17:53:13.0000] <Hixie_>
jorendorff: any idea what CreateImportBinding is?

[22:26:12.0000] <zcorpan>
/me found http://lists.w3.org/Archives/Public/public-html-a11y/2014Jun/0115.html

[22:29:22.0000] <zcorpan>
<img src="logo" alt="W3C" longdesc="data:text/html;charset=utf-8;,%3C!DOCTYPE%20html%3E

[22:29:22.0000] <zcorpan>
%3Chtml%3E%3Chead%3E%3Ctitle%3EDescription%20of%20the%20W3C%20Logo%3C/title%3E%3C/head%3E

[22:29:22.0000] <zcorpan>
%3Cbody%3E%3Cp%3EA%20blue%20capital%20letter%20%22W%22%20with%20kerning%20so%20it%20

[22:29:24.0000] <zcorpan>
touches%20a%20blue%203%2C%20followed%20by%20a%20black%20shadow%20of%20a%20white%20

[22:29:26.0000] <zcorpan>
capital%20letter%20C%20all%20on%20a%20white%20background%3C/body%3E%3C/html%3E">

[22:30:27.0000] <SamB>
zcorpan: crazyness!

[22:32:10.0000] <gsnedders>
Go home, you're drunk.

[22:41:18.0000] <zcorpan>
http://www.w3.org/TR/2014/CR-html-longdesc-20140812/ also introduces the img.longdesc IDL attribute, in addition to the existing img.longDesc http://www.whatwg.org/specs/web-apps/current-work/multipage/obsolete.html#dom-img-longdesc

[22:41:34.0000] <zcorpan>
good times

[00:42:02.0000] <annevk>
"If the longdesc document proceeds to CR and beyond, I believe the credibility of this WG will be materially harmed."

[00:42:55.0000] <Ms2ger>
The HTMLWG?

[00:46:55.0000] <annevk>
Hixie_: https://github.com/slightlyoff/ServiceWorker/issues/410 can't think of any problems with this offhand

[00:47:42.0000] <wilhelm_>
What happens if you put <picture><p>your random longdesc text here</p></picture>?

[00:48:15.0000] <wilhelm_>
/me goes off to actually read the <picture> spec.

[00:48:56.0000] <annevk>
Hixie_: never mind

[02:25:53.0000] <zcorpan>
anyone remember if chrome or firefox have ever logged warnings in the console about html parse errors?

[02:26:43.0000] <zcorpan>
wilhelm_: same as <span><p>your random longdesc text here</p></span>

[02:27:18.0000] <zcorpan>
hsivonen: ^

[02:27:24.0000] <gsnedders>
zcorpan: Firefox never has

[02:27:27.0000] <gsnedders>
https://bugzilla.mozilla.org/show_bug.cgi?id=878364

[02:28:09.0000] <zcorpan>
gsnedders: thx

[02:28:23.0000] <gsnedders>
I don't think Chrome has either

[02:28:26.0000] <gsnedders>
jgraham: might know?

[02:30:20.0000] <jgraham>
I don't think anyone ever has

[02:30:26.0000] <gsnedders>
Presto did.

[02:30:30.0000] <zcorpan>
yeah

[02:30:37.0000] <jgraham>
For which kinds of errors?

[02:30:40.0000] <Ms2ger>
Firefox points them out in view source

[02:30:52.0000] <gsnedders>
jgraham: You're the one who should know this!

[02:31:22.0000] <jgraham>
I remember presto having a link to the validator, but not actual error reporting. Obviously I'm wrong though

[02:31:45.0000] <zcorpan>
jgraham: i think basically all html parser errors

[02:32:03.0000] <zcorpan>
like "Doctype declaration has invalid format "

[02:32:32.0000] <zcorpan>
or "Illegal content before DOCTYPE, or DOCTYPE missing " for about:blank :-)

[02:32:46.0000] <gsnedders>
I think it was all parse errors, but I'm not really sure. I wasn't really around Lkpg by that point to overhear.

[02:34:16.0000] <jgraham>
I can't see that with 12.16/Linux

[02:34:28.0000] <jgraham>
Or the web suddenly fixed all its parse errors

[02:36:18.0000] <jgraham>
did we stop doing this when the new parser landed?

[02:36:54.0000] <gsnedders>
did you load the page with the dev tools open?

[02:37:08.0000] <jgraham>
Yes

[02:37:14.0000] <jgraham>
I got a lot of CSS errors

[02:37:47.0000] <zcorpan>
i think you're looking at the wrong console

[02:37:52.0000] <gsnedders>
oh, it's in opera:config

[02:38:07.0000] <gsnedders>
opera:config#UserPrefs|ShowHTMLParsingErrors

[02:38:32.0000] <gsnedders>
IIRC the intention was to have no pref and have it shown when the dev tools were open

[02:39:30.0000] <jgraham>
I'm not sure that was the intention

[02:39:54.0000] <jgraham>
But OK, old Opera has it, but not by default

[02:51:00.0000] <zcorpan>
oh, didn't know i had that pref on (or that it existed)

[02:52:21.0000] <gsnedders>
I just wondered why I wasn't getting any parse errors and looked in opera:config

[03:04:24.0000] <JakeA>
annevk: might be pedantic, but the as* methods, some suggest reading the data as a particular format (text, JSON, formData) whilst others return a different view of the raw data (ArrayBuffer, Blob). I guess XHR has the same issue, maybe not worth worrying about.

[03:42:49.0000] <annevk>
JakeA: you could also see it as bytes, text, JSON, form data, with different types for bytes

[03:43:14.0000] <annevk>
JakeA: if we ever get a true Unicode string we might add an accessor for that too

[03:45:42.0000] <jgraham>
(fwiw I believe Rust has a nice convention that as_* methods are zero-cost and things that aren't just returning a different view of the underlying data are not called as_. Something like that might be nice, but I guess the ship sailed)

[03:45:51.0000] <JakeA>
annevk: yeah, I guess it's readAsJSON vs readIntoBlob

[03:46:16.0000] <JakeA>
Although the latter suggests you provide a blob to read into

[03:48:05.0000] <annevk>
I think it's both the same really

[03:50:08.0000] <smaug____>
does html spec define reusing of Window objects ?

[03:51:16.0000] <JakeA>
asJSON reads as JSON and returns js obj. asBlob reads as binary and returns Blob. asText reads as UTF8 and returns string.

[03:51:29.0000] <annevk>
smaug____: there's only reuse of a WindowProxy object

[03:51:43.0000] <annevk>
smaug____: which is somewhat defined, though the details of WindowProxy leave to be desired

[03:58:13.0000] <smaug____>
hmm, so there is the initial about:blank right before the new page is loaded

[03:58:23.0000] <smaug____>
and at  least in Gecko the Window is reused

[03:58:51.0000] <smaug____>
assuming about:blank and the new page are coming from the same domain

[04:00:47.0000] <annevk>
about:blank is different

[04:02:56.0000] <annevk>
smaug____: see e.g. this note: "In general, there is a 1-to-1 mapping from the Window object to the Document object. There are two exceptions. First, a Window can be reused for the presentation of a second Document in the same browsing context, such that the mapping is then 1-to-2. This occurs when a browsing context is navigated from the initial about:blank Document to another, with replacement enabled. Second, a Document can end u

[04:02:56.0000] <annevk>
p being reused for several Window objects when the document.open() method is used, such that the mapping is then many-to-1."

[04:04:32.0000] <smaug____>
ok, so spec is like Gecko here

[04:04:34.0000] <smaug____>
ok

[04:04:45.0000] <smaug____>
/me is just wondering the behavior of .localStorage

[04:04:51.0000] <smaug____>
in case Window is reused

[04:05:49.0000] <smaug____>
aha, " Each Document object must have a separate object for its Window's localStorage attribute."

[04:13:00.0000] <gsnedders>
/me looks utterly confused at getting email from jgraham reviewing html5lib stuff

[04:13:07.0000] <gsnedders>
jgraham: are you ill? :P

[04:13:44.0000] <jgraham>
gsnedders: who knows!

[04:23:27.0000] <zcorpan>
did someone define mime type parsing?

[04:24:15.0000] <zcorpan>
http://mimesniff.spec.whatwg.org/#parsing-a-mime-type ... a lot of red boxes

[04:30:36.0000] <annevk>
zcorpan: yes :-(

[04:36:32.0000] <annevk>
zcorpan: care to fix it?

[04:36:37.0000] <annevk>
zcorpan: there's a bunch of issues there

[04:37:12.0000] <zcorpan>
maybe. currently looking at behavior of the type attribute in general

[04:37:33.0000] <zcorpan>
seems like it's a mess even ignoring the issue of mime type parsing

[04:40:37.0000] <annevk>
yeah, there's a number of problems

[04:40:50.0000] <annevk>
e.g. with whether or not parameters should block or not, whether it's just string matching

[04:41:03.0000] <zcorpan>
yep

[04:41:04.0000] <annevk>
or ASCII case-insensitive string matching

[04:41:13.0000] <zcorpan>
trim or not

[04:41:16.0000] <annevk>
<style> and <script> are different I think

[04:41:25.0000] <zcorpan>
empty string equals absent attribute or not

[04:41:39.0000] <annevk>
string matching of sorts is the best I think

[04:41:50.0000] <annevk>
e.g. registry based, no parameters

[04:42:14.0000] <annevk>
for new attributes

[05:43:30.0000] <Ms2ger>
gsnedders, maybe relevant: https://twitter.com/csoghoian/status/499402368694616064

[05:53:23.0000] <Ms2ger>
Oh, heh

[05:54:15.0000] <Ms2ger>
I thought WorkerLocation_host.htm would test that the browser supports WorkerLocation.host

[05:54:52.0000] <Ms2ger>
But it only tests WorkerLocation.host and Location.host both, or neither

[05:57:17.0000] <Ms2ger>
Hmm

[05:59:15.0000] <Ms2ger>
Given new Worker("support/WorkerLocation.js?")

[05:59:21.0000] <Ms2ger>
What is location.search?

[05:59:24.0000] <Ms2ger>
annevk, ^

[06:04:29.0000] <caitp>
don't you discard the search query if they're not used in a relative url, when resolving a relative url?

[06:13:27.0000] <JakeA>
What's the benefit of sharedWorker.port vs sharedWorker.postMessage and sharedWorker.onmessage?

[06:17:27.0000] <annevk>
Ms2ger: the spec doesn't say?

[06:17:39.0000] <annevk>
caitp: nope

[06:18:33.0000] <annevk>
JakeA: there's no sharedWorker.postMessage

[06:18:41.0000] <JakeA>
yes

[06:18:56.0000] <JakeA>
but why? Why was .port a better idea?

[06:19:04.0000] <caitp>
are you serious? if window.location is `https://foo.com/path/index.html?search=puppies`, and I create a worker with a relative uri `resources/worker.js`, the resolved URI would still contain `?search=puppies`? that seems dumb

[06:20:59.0000] <annevk>
caitp: oh no, if your relative URL does not contain a query component it won't get one

[06:21:16.0000] <annevk>
JakeA: good question

[06:21:35.0000] <caitp>
that makes more sense :>

[06:22:06.0000] <annevk>
Ms2ger was asking about something else

[06:22:16.0000] <annevk>
JakeA: I assume it is related to GC

[06:22:56.0000] <annevk>
JakeA: smaug____ might know and Hixie_ otherwise

[06:23:40.0000] <JakeA>
Cheers. serviceworker has .postMessage and .onmessage, but maybe there's some reason it should be .port

[06:23:59.0000] <smaug____>
/me doesn't know. He was against all the ports

[06:26:13.0000] <jgraham>
Hixie_ had some idea of using ports passed over channels for some kind of object capability system. But I don't know if that's related to this

[06:28:02.0000] <annevk>
JakeA: it seems like we should have good reasons to diverge from the existing pattern for shared workers since we are copying them mostly

[06:29:28.0000] <gsnedders>
Ms2ger: only vaguely; doesn't address why they have it at all!

[06:29:48.0000] <JakeA>
annevk: I don't think we're coping sharedworker all that much. The lifecycle is different is very different

[06:29:54.0000] <JakeA>
copying*

[06:30:01.0000] <annevk>
JakeA: well the global inherits from it

[06:30:18.0000] <annevk>
JakeA: and architecture-wise in browsers there's quite a bit of sharing as I understand it

[06:30:57.0000] <JakeA>
annevk: We're not inheriting from the global

[06:31:10.0000] <JakeA>
annevk: We don't want onconnect or name

[06:31:59.0000] <JakeA>
annevk: I take the point about sharing, but the terminating and spinning up just-in-time is very different to sharedworker

[06:33:06.0000] <Ms2ger>
annevk, oh, the spec does say, but I guess I misread it when implementing

[06:33:09.0000] <annevk>
Oh I see

[06:33:15.0000] <Ms2ger>
annevk, or did it change recently?

[06:33:25.0000] <annevk>
Ms2ger: define recently

[06:33:56.0000] <Ms2ger>
annevk, since end of June

[06:34:20.0000] <annevk>
Ms2ger: there was https://github.com/whatwg/url/commit/f3bd39040ee1a2aabe0863879f2fc74f17c3b0f0

[06:34:28.0000] <annevk>
Ms2ger: but that doesn't really affect this

[06:34:42.0000] <Ms2ger>
No

[06:34:56.0000] <Ms2ger>
Weird

[06:36:14.0000] <annevk>
JakeA: I think it would be good to talk the current design through with Hixie_

[06:36:27.0000] <annevk>
JakeA: or maybe file bugs on HTML that make API reuse easier

[06:36:54.0000] <annevk>
JakeA: e.g. service worker not having to define IDL for postMessage or even defining postMessage seems sensible

[06:37:04.0000] <annevk>
JakeA: and HTML is certainly not fixed

[06:37:47.0000] <Ms2ger>
/me fixes Servo

[06:38:04.0000] <JakeA>
annevk: we're not defining postMessage at the moment, we're inheriting from Worker to get it

[06:38:45.0000] <annevk>
JakeA: but Worker has things we don't want

[06:38:58.0000] <annevk>
JakeA: so coordinating with Hixie_ to get a subset interface would be good

[06:39:12.0000] <JakeA>
terminate, yeah. Hmm

[06:44:28.0000] <annevk>
added my suggestion in the issue

[06:47:39.0000] <annevk>
JakeA: we're planning on adding caches for documents

[06:47:47.0000] <annevk>
JakeA: but we worry that window.caches might break

[06:48:04.0000] <JakeA>
annevk: yeah, figured that might be the case

[06:48:31.0000] <JakeA>
annevk: is it just that it's too short & potentially ambiguous a name?

[06:48:53.0000] <annevk>
JakeA: mostly that it might clash with existing content in some way

[06:49:26.0000] <wanderview>
right now I have it behind a pref at window.navigator.caches

[06:49:43.0000] <annevk>
JakeA: e.g. if someone has <p id=caches> <script> caches.textContent = "global object so bad" </script>

[06:50:33.0000] <annevk>
(<p id=navigator> <script> navigator.textContent = "global object so bad" </script> fails)

[06:51:07.0000] <wanderview>
I guess not crucial to get right now as its not spec'd, just wanted to know what we were leaning towards so I could make my prefed-off thing match

[06:52:56.0000] <annevk>
so fetch() is always on the global at the moment

[06:53:24.0000] <JakeA>
navigator.caches isn't end of the world. window.resourceCaches is… probably worse

[06:53:29.0000] <JakeA>
but yeah, fetch has the same issue

[06:53:47.0000] <annevk>
fetchStore  ftw

[06:54:09.0000] <JakeA>
:sadface:

[06:54:14.0000] <JakeA>
that was a dark time

[06:57:26.0000] <wanderview>
annevk: why isn't this a problem for fetch as well?  should we move it to window.navigator.fetch?

[06:58:34.0000] <JakeA>
navigator - the *other* dumping ground

[06:59:32.0000] <zcorpan_>
just call it XMLHttpFetch

[06:59:50.0000] <JakeA>
haha

[07:00:13.0000] <JakeA>
resourceFetch resourceCaches

[07:00:18.0000] <JakeA>
/me is sick in mouth

[07:00:55.0000] <annevk>
wanderview: the idea was to be bold and brave

[07:01:04.0000] <annevk>
wanderview: until we move to navigator

[07:01:12.0000] <annevk>
wanderview: with tail between our legs

[07:01:15.0000] <annevk>
or some such

[07:01:40.0000] <wanderview>
I'm not particularly advocating that... just seems like a similarly common word to "caches"

[07:02:06.0000] <annevk>
I guess we should try putting both on Window and see

[07:03:16.0000] <wanderview>
ok, I'll stick it on window

[07:03:19.0000] <wanderview>
behind a pref

[07:03:31.0000] <wanderview>
in my local patch queue, not committed to any repo

[07:06:07.0000] <JakeA>
I'm doing a quick search for id="caches" and id="fetch", see how many pages have it

[07:07:32.0000] <annevk>
JakeA: not sure if that's the only possible problem

[07:07:50.0000] <annevk>
JakeA: I'm a bit hazy on compat hazards when it comes to adding new things to the global

[07:09:29.0000] <JakeA>
agreed, it's just a vague indicator

[07:10:29.0000] <zcorpan_>
view-source:http://fuskator.com uses id="fetch" (site is NSFW)

[07:11:08.0000] <zenparsing>
/me goes and invents a proper module system to supplant the global object, oh wait... : \

[07:12:28.0000] <zcorpan_>
didn't find other id=fetch or caches but i didn't let the grep finish

[07:13:35.0000] <annevk>
bit annoyed with a lot of the module stuff happening in private

[07:15:53.0000] <zenparsing>
don't get me started annevk : )

[07:22:01.0000] <Domenic>
window.fetch -> window.JSONSpdyRequest kthxbai

[07:51:17.0000] <JakeA>
Domenic: requestPermission - should it reject if permission is denied, or resolve with "false"

[07:51:43.0000] <Domenic>
JakeA: that naming could go either way, but I think we have historically leaned toward reject

[07:51:55.0000] <JakeA>
Cheers

[08:18:08.0000] <annevk>
Domenic: JakeA: https://github.com/slightlyoff/ServiceWorker/issues/413

[08:18:19.0000] <JakeA>
already there

[08:26:22.0000] <annevk>
need streams sorted \o/

[08:38:26.0000] <JakeA>
annevk: I'm not following #413. We have request for input, response for output. You can provide a readable stream for the request body.

[08:39:43.0000] <ehsan>
JakeA: good catch on MessagePort btw

[08:40:41.0000] <JakeA>
ehsan: I think there's more. Window has postMessage & onmessage too. It loops back, but I don't think that matters

[08:41:06.0000] <ehsan>
JakeA: ah, yes, Window!

[08:41:52.0000] <ehsan>
commented on the bug

[08:45:36.0000] <annevk>
JakeA: request has both input and output

[08:45:42.0000] <annevk>
JakeA: response has both input and output

[08:50:17.0000] <Domenic>
It depends on if you're on the server or client, is the way I think about (based on my Node background)

[08:50:21.0000] <annevk>
foolip: sorry about the fullscreen stuff, obviously my head isn't in it

[08:50:36.0000] <Domenic>
(I wonder if other HTTP frameworks have similar nomenclature... checking)

[08:51:13.0000] <annevk>
Perhaps what Request and Response expose should just depend on what side of the fence people are on, but that would make them slightly less generic

[08:51:36.0000] <Domenic>
Inside the server (service worker) you want both

[08:51:43.0000] <annevk>
Well, and that wouldn't work if you wanted to pass a Request through

[08:51:49.0000] <annevk>
Or pass a Response through

[08:51:56.0000] <annevk>
Right

[08:52:11.0000] <annevk>
foolip: do you mind that I just keep trying?

[09:01:36.0000] <Domenic>
getSnapshots()? hmm

[09:07:20.0000] <annevk>
Domenic: wut?

[09:07:45.0000] <annevk>
fricking Twitter, overrides CMD+T

[09:10:28.0000] <caitp>
>> can't reproduce

[09:13:10.0000] <annevk>
Domenic: read and write instead of input and output?

[09:14:49.0000] <kriskowal>
in my experience, you only need readable “body” streams for both requests and responses

[09:15:23.0000] <kriskowal>
uploading is a matter of constructing a readable stream that will produce the upload on demand

[09:15:37.0000] <JakeA>
kriskowal: like https://github.com/slightlyoff/ServiceWorker/issues/413#issuecomment-52071152?

[09:15:52.0000] <Domenic>
yes, you can design a stream system where there is nothing to represent things you write to

[09:16:00.0000] <Domenic>
besides functions that accept readable streams

[09:17:05.0000] <kriskowal>
though if you *want* to write with a producer style, you can always use a buffer, generate on the in side, vend the output as the request body

[09:18:02.0000] <Domenic>
yes, the point of designing a writable stream abstraction is so that nobody has to write their own buffering code

[09:18:23.0000] <JakeA>
Domenic: could make Request.streamed(url, opts, function(inputStream) {  }) which returns a Request

[09:18:39.0000] <JakeA>
and Response.streamed that does the same but for response

[09:20:06.0000] <Domenic>
I don't understand what those do

[09:21:44.0000] <JakeA>
You write/pipe to inputStream, it comes out of the .body stream

[09:21:46.0000] <kriskowal>
i wrote a sketch of an object buffer the other day, http://kriskowal.github.io/gtor/docs/promise-buffer.html

[09:22:13.0000] <kriskowal>
still working on a byte buffer with the same interface

[09:22:20.0000] <Domenic>
The thing is, there is an actual writable socket underlying the HTTP request body. You want to expose that as directly as possible.

[09:23:57.0000] <kriskowal>
I think that’s a dubious assumption.

[09:24:22.0000] <kriskowal>
I mean, clearly there are people that do want that, but I am not sure it is good for them.

[09:25:06.0000] <kriskowal>
There’s a tension between having applications factor nicely and being able to squeeze that last milisecond out of the system.

[09:25:47.0000] <kriskowal>
If you expose the request as a writable stream, you necessarily end up with Node.js/Connect style applications, with request and response arguments

[09:26:29.0000] <kriskowal>
and of course it’s trivial to construct a Promise CGI-like abstraction atop that foundation

[09:30:29.0000] <kriskowal>
and vice versa

[09:31:25.0000] <Domenic>
annevk: req.body.read.read()/req.body.write.write()?

[09:32:00.0000] <annevk>
amazing

[09:33:34.0000] <annevk>
kriskowal: what you're saying sounds much more like what I'd like to see

[09:33:47.0000] <annevk>
given how high-level promises can be, why can't streams

[09:35:00.0000] <kriskowal>
i have about a month to do whatever i want, so i’ve been writing and article on the subject, with code sketches

[09:35:21.0000] <JakeA>
I really think the writable stream of a request should be revealed by constructor function like resolve/reject in promises

[09:35:22.0000] <kriskowal>
i just got it to the point that there aren’t any todo comments, but a lot of further work intended…

[09:35:33.0000] <kriskowal>
been hoping it would be useful in this context https://github.com/kriskowal/gtor/blob/master/README.md

[09:35:40.0000] <Domenic>
JakeA: why not make it public?

[09:36:24.0000] <kriskowal>
async generators are going to look like the revealing constructor pattern

[09:36:27.0000] <Domenic>
JakeA: it's an interesting idea

[09:36:31.0000] <annevk>
kriskowal: cool, will try to read that later (evening here)

[09:36:47.0000] <JakeA>
Isn't the writable stream of the request for the creator of the request?

[09:37:05.0000] <Domenic>
Yeah, now that I think about it, that's probably true, isn't it...

[09:37:08.0000] <annevk>
makes sense, true for response too

[09:37:25.0000] <kriskowal>
body: async *function () { await yield chunk; await yield chunk; await yield chunk; }

[09:38:05.0000] <kriskowal>
i suspect that those awaits should be implicit, but not sure.

[09:38:57.0000] <annevk>
kriskowal: you have some plan for feeding the whole thing back into TC39?

[09:39:00.0000] <Domenic>
so /* client*/ new Request(url, { method: "POST", streamer(body => { readableSource.pipeTo(body); }) })

[09:39:02.0000] <kriskowal>
the revealing constructor would look like new PromiseIterator(function (doyield, doawait, doreturn, dothrow) {})

[09:39:02.0000] <annevk>
kriskowal: Mark?

[09:39:04.0000] <JakeA>
In the current design you could provide a null transform stream as the body of the request, but a factory method could make that easier

[09:39:07.0000] <Domenic>
streamer needs a better name

[09:39:34.0000] <Domenic>
I don't see the factory method thing

[09:39:39.0000] <Domenic>
Just the constructor seems fine

[09:39:59.0000] <kriskowal>
annevk: not sure what you’re asking

[09:40:56.0000] <JakeA>
Domenic: you're a fan of overloading right? We've already got a body option that can take a stream, blob, string etc, it could take a function

[09:40:58.0000] <annevk>
kriskowal: TC39 is reportedly working on async generators

[09:41:08.0000] <Domenic>
;_;

[09:41:38.0000] <JakeA>
(I don't know if I'm serious or not)

[09:42:01.0000] <Domenic>
It does solve the "what if I put body and streamer in the same object" problem...

[09:42:01.0000] <kriskowal>
JakeA: bad smell here

[09:42:22.0000] <JakeA>
/me wafts

[09:42:32.0000] <Domenic>
if we had a better name for streamer I would feel better refuting the overload

[09:42:36.0000] <kriskowal>
annevk: yeah, Domenic informed me that they are asking questions about async generators. i think they’re on the right track based on reading the presentation, and you’ll see what i think in that paper i linked

[09:44:57.0000] <Domenic>
streamer reminds me of https://twitter.com/ChromerShow

[09:45:27.0000] <kriskowal>
tell me again what streamer does?

[09:47:25.0000] <Domenic>
it gives you access to the writable side of the body stream

[09:50:43.0000] <kriskowal>
so, you know how we fought hard to make sure all the promise libs split the promsie and resolver?

[09:51:27.0000] <kriskowal>
so that you could pass the observer capability without implicitly passing the resolver capability

[09:51:53.0000] <kriskowal>
this is a situation where the same design pattern applies

[09:52:10.0000] <kriskowal>
the input is the resolver, the output is the observer

[09:52:42.0000] <kriskowal>
but it sort-of doesn’t apply because streams are cooperative and information necessarily flows both directions for congestion control purposes

[09:52:47.0000] <kriskowal>
and because streams are cancelable

[09:53:25.0000] <kriskowal>
for that reason, it *might* be acceptable for the tangled pair to expose input.output and output.input

[09:54:11.0000] <kriskowal>
and i could see a generator/writer having a method like streamer. i’ll think about the name.

[09:56:14.0000] <JakeA>
kriskowal: the streamer option is only settable on construct. You give it a function that's called back with the writable stream

[09:56:28.0000] <JakeA>
So it's very much like promises

[09:56:44.0000] <kriskowal>
/me looks at the syntax

[09:57:57.0000] <JakeA>
new Request(url, { streamer: function(writableStream){...} })

[09:59:12.0000] <kriskowal>
to be exactly analogous to a promise…

[10:00:00.0000] <kriskowal>
new Request(url, {body: new Reader(function (write, close, abort) {}) // where write means yield, close means return, and abort means throw

[10:01:03.0000] <kriskowal>
and probably should be called ByteReader or Uint8Reader

[10:01:18.0000] <kriskowal>
well, depending on the content type

[10:02:14.0000] <kriskowal>
and of course an immediately invoked async generator should be isomorphic to a reader

[10:03:24.0000] <kriskowal>
which i believe should be {next():Promise<{value:T, done:Boolean}>, throw(Error):Promise<Iteration<T>>}

[10:05:48.0000] <JakeA>
Is Reader an alternative proposal for the ReadableStream constructor or something different?

[10:06:41.0000] <JakeA>
You can already provide a readable stream as the body option for a response. I think Domenic is looking for something that can be piped to.

[10:09:56.0000] <kriskowal>
it’s an abstract idea, but serves the same role as ReadableStream

[10:10:13.0000] <kriskowal>
it’s really a promise iterator

[10:10:31.0000] <kriskowal>
and a promise buffer is an {in, out} pair of promise generator and promise iterator

[10:11:19.0000] <kriskowal>
so if you were to var buffer = new Buffer(); and return new Request(url, {body: buffer.out}), you could then write to buffer.in

[10:11:27.0000] <kriskowal>
or pipe to buffer.in

[10:11:47.0000] <kriskowal>
and by “pipe” i mean readable.forEach(writable.yield, writable).then(writable.return, writable)

[10:12:46.0000] <kriskowal>
or just readable.pipeTo(writable, {close: true}) in Domenic’s parlance

[10:27:51.0000] <zenparsing>
kriskowal reading your general theory - i've been thinking along similar lines, producer/consumer with a promise-based buffer (pipe) as a separate mediating abstraction

[10:29:07.0000] <kriskowal>
yeah, it will work

[10:29:44.0000] <kriskowal>
though, just as with promises, there is some overhead to the approach

[10:29:52.0000] <kriskowal>
and just as with promises, it’s usually acceptable

[10:30:29.0000] <kriskowal>
but not always. i’m sympathetic to the call to expose a lower level core.

[10:32:13.0000] <TabAtkins>
See, for example, http://www.xanthir.com/b4PV0

[10:37:43.0000] <kriskowal>
TabAtkins: yeah, same germ of an idea

[10:38:02.0000] <kriskowal>
i would only name things somewhat differently

[10:38:29.0000] <kriskowal>
but there certainly is a tension between single and plural names

[10:38:37.0000] <kriskowal>
and whether time series values are singular or plural

[10:38:47.0000] <TabAtkins>
Right, I'd make different choices on names now too.

[10:38:58.0000] <kriskowal>
which just comes down to whether plural is spatial or temporal or both

[10:38:59.0000] <TabAtkins>
Name more of the helper methods FooMap, etc.

[10:39:13.0000] <kriskowal>
yeah, map is the plural of then

[10:39:26.0000] <TabAtkins>
Well, flatMap is.

[10:39:45.0000] <kriskowal>
i might agree :P

[10:40:22.0000] <kriskowal>
i would only use the term “stream” in situations with pressure and lossless ordered values

[10:40:51.0000] <kriskowal>
i’m favoring signal and behavior for pull and pull lossy time series data

[10:41:09.0000] <kriskowal>
but, my thoughts are very fluid atm

[10:41:30.0000] <kriskowal>
and the pun wasn’t intended, but i don’t mind enjoying it anyway

[10:44:27.0000] <zenparsing>
kriskowal i might think that a buffer would be able to move data to more than one consumer. no?

[10:44:42.0000] <kriskowal>
zenparsing: depends on what you mean

[10:45:28.0000] <kriskowal>
if you were to share the output with multiple consumers, they would round-robin

[10:46:05.0000] <kriskowal>
but if you mean that they would all see the entire output, you would need to explicitly fork the stream, and all the consumers would be providing pressure

[10:46:21.0000] <zenparsing>
yes - the second meaning

[10:46:29.0000] <kriskowal>
a round-robin would effectively relieve pressure on the buffer, but a fork would probably increase the pressure

[10:46:50.0000] <kriskowal>
at least, the pressure would be the maximum of the forks

[10:46:58.0000] <zenparsing>
yes exactly

[10:47:13.0000] <kriskowal>
i have a note to sketch reader.fork()

[10:47:52.0000] <zenparsing>
that might make sense if you wanted to fork binary input from a file and write tar and zip to separate files, or something like that

[10:48:22.0000] <zenparsing>
the max pressure would fit in that case

[10:53:33.0000] <zenparsing>
you could probably write it much more elegantly, but this is where i headed:  https://github.com/zenparsing/streamware/blob/master/src/Pipe.js#L131

[11:05:59.0000] <kriskowal>
zenparsing: just a sketch, and only covers object transport https://gist.github.com/kriskowal/5bf27a3c734951d2b838

[11:07:29.0000] <kriskowal>
working with byte buffers is necessarily more messy

[11:08:15.0000] <kriskowal>
i took a stab at writing a byte buffer with the same interface, but i’ll have to go at it again later.

[11:09:37.0000] <kriskowal>
i think that byte buffers just necessitate some different hidden internals that take the fast path, but use the promise buffer machinery for anything that is not a byte buffer to byte buffer interaction

[11:11:59.0000] <zenparsing>
thanks for the gist - i need to finish reading your article before commenting intelligent-like : )

[11:13:55.0000] <zenparsing>
the thing about byte buffers, is that (i think) you want to reuse the underlying memory as much as possible

[11:16:46.0000] <kriskowal>
yes, so you have a circular queue backed by a uint8array. yield blocks until there’s room to write your chunk, next blocks until there’s enough content to generate a chunk (which is somewhat arbitrary but length>0, length>min || closed)

[11:19:14.0000] <zenparsing>
yep - and you might also want the circular queue length (total mem allocated to the pipe) to grow or shrink within bounds

[11:32:01.0000] <TabAtkins>
Byte buffers dont' want to use the same interface as object streams.

[11:43:33.0000] <wanderview>
JakeA: ping

[11:45:58.0000] <wanderview>
JakeA: is the CacheStorage caches attribute per-origin or per-domain?  all I currently see in the spec is "Caches are not shared across domains", although none of the algorithms for cache explicitly mention an origin/domain check

[11:46:55.0000] <JakeA>
wanderview: good point. Origin, like IDB

[11:47:25.0000] <wanderview>
JakeA: cool, I'll write an issue to clarify that in the spec

[11:49:11.0000] <wanderview>
https://github.com/slightlyoff/ServiceWorker/issues/415

[11:49:15.0000] <wanderview>
thanks

[11:50:29.0000] <JakeA>
wanderview: cheers!

[11:51:23.0000] <kriskowal>
i think i have caught up with JakeA’s idea of allowing body to be a function

[11:51:51.0000] <kriskowal>
the way i got here…

[11:52:22.0000] <kriskowal>
i sketched a promise buffer as an {in, out} promise generator and iterator pair

[11:52:36.0000] <JakeA>
kriskowal: 1% battery so sorry if late reply

[11:52:46.0000] <kriskowal>
np, working on the narrative…

[11:53:18.0000] <kriskowal>
a deferred is conceptually an {in, out} {resolver, promise} pair

[11:53:55.0000] <kriskowal>
but in that case, we have decided to be very output centric. we expose Promise only, and the constructor reveals the input side

[11:55:02.0000] <kriskowal>
if streams are a plural analog of Promise, then we would probably expose new Stream(function (_yield, _return, _throw) {}) in the same way we expose new Promise(function (_return, _throw) {})

[11:55:36.0000] <kriskowal>
and we could expose Stream.buffer() -> {in, out} in the same way we could expose Promise.defer() -> {in, out} or {resolver, promise}

[11:56:13.0000] <kriskowal>
which would lead us toward new Request/Response(… {body: new Stream(function (_yield, _return, _throw) {})})

[11:56:29.0000] <kriskowal>
but that would introduce a layer of buffering that Domenic and his constituents would like to avoid

[11:57:09.0000] <kriskowal>
and that layer of buffering could be eliminated by unwrapping the revealing constructor like new Request(url, {body: function (_yield, _return, _throw) {}})

[11:57:15.0000] <kriskowal>
which is actually quite elegant

[11:58:01.0000] <kriskowal>
JakeA: end of line

[12:05:31.0000] <Hixie_>
jorendorff: why are instantiate and translate diffrent hooks?

[12:06:24.0000] <jorendorff>
translate is a totally different thing

[12:06:39.0000] <jorendorff>
translate converts code from some other language to JS

[12:17:49.0000] <Hixie_>
jorendorff: sure but why couldn't that happen in instantiate? Just have instantiate return either a string or an object, instead of undefined or an object.

[12:19:51.0000] <jorendorff>
Hixie_: oh - well the reason there are different hooks to begin with, is that the theory is people will want to hack the loader

[12:20:33.0000] <Hixie_>
sure, but why those two hooks? Why not three? or one?

[12:20:41.0000] <Hixie_>
i don't understand the value of separating thoe

[12:20:48.0000] <Hixie_>
the browser doesn't do any work between them, does it?

[12:20:51.0000] <jorendorff>
i don't know. samth and wycats know more about them

[12:20:52.0000] <Hixie_>
it just passes the results of one into the other one

[12:21:03.0000] <jorendorff>
Hixie_: the loader doesn't do any work between those two... i don't think

[12:21:14.0000] <wycats>
in theory we could have had one giant async hook

[12:21:26.0000] <jorendorff>
right, and i would have liked that

[12:21:27.0000] <jorendorff>
but

[12:21:28.0000] <wycats>
the idea is to break up the process into a number of steps that it makes sense to override

[12:21:51.0000] <wycats>
so if someone wants to write a translation plugin, they don't need to opt into a separate plugin architecture (like require.js) to do that

[12:22:06.0000] <jorendorff>
yeah

[12:22:43.0000] <Hixie_>
wycats: when would you have one bit of code overriding translate and another independent bit of code overriding instantiate?

[12:23:01.0000] <wycats>
translate might be used for security

[12:23:09.0000] <wycats>
or for example to compile CS to JS

[12:23:19.0000] <wycats>
but once CoffeeScript is compiled to JS, the normal instantiate rules apply

[12:23:34.0000] <wycats>
and you may want your compiled CoffeeScript to use an instantiate hook separately defined for AMD compat

[12:23:39.0000] <wycats>
(AMD written in CoffeeScript)

[12:25:22.0000] <wycats>
I honestly don't have a ton of time right this second (or most seconds) :/

[12:25:48.0000] <wycats>
realtime chat is great if you can swing it

[12:25:56.0000] <wycats>
I have a job and whatnot

[12:26:18.0000] <wycats>
I can try to schedule time to hop in and chat -- gonna be hard to do on an ad hoc basis when tagged in

[12:30:38.0000] <jorendorff>
Hixie_: I think virtually every conceivable use case for translate will not also want to overload instantiate

[12:30:51.0000] <jorendorff>
they're pretty independent

[12:30:58.0000] <jorendorff>
about as independent as you can get

[12:46:21.0000] <Hixie_>
jorendorff: fair enough. It's hard for me to tell since the spec doesn't give any examples or anything explaining why you'd want to use the features.

[12:47:48.0000] <jorendorff>
yeah, allen's view is that if you give any kind of rationale or even description of what something does, someone will interpret that as normative and do something stupid with it

[12:47:58.0000] <jorendorff>
therefore, paint over the signposts

[12:48:53.0000] <jorendorff>
i'm told HTML has in fact seen that vexing phenomenon, though (thankfully) you've not chosen the same response

[12:49:01.0000] <Ms2ger>
Someone will, certainly

[12:49:08.0000] <Ms2ger>
More people will benefit, though

[12:49:38.0000] <Hixie_>
in the HTML spec we just try to paint "NOT NORMATIVE" signs eveywhere

[12:49:40.0000] <Ms2ger>
And sometimes it catches bugs where the normative text doesn't specify what it means to

[12:49:55.0000] <Hixie_>
at this point we have bigger problems from the fact that the w3c is forking the spec than from the non-normative content

[12:50:32.0000] <jorendorff>
Hixie_: if this Loader stuff ever actually takes off, the translate hook is where you go to monkeypatch new *language features* into older browsers

[12:51:05.0000] <Hixie_>
jorendorff: and instantiate?

[12:51:13.0000] <jorendorff>
dherman had a gist illustrating this, but i forget where it was :(

[12:52:03.0000] <jorendorff>
Hixie_: well :( instantiate is an upgrade path --- it lets you load non-ES6 modules and use them with an 'import' decl, just like ES6 modules.

[12:52:25.0000] <jorendorff>
Hixie_: so you can have a hybrid app, you don't have to make a Big Leap to es6 modules

[12:52:44.0000] <Hixie_>
kinda like translating from old-ES to new-ES? :-)

[12:52:56.0000] <Hixie_>
so i think my biggest problem with reusing the ES6 module loader thing to define the Web's dependency system is that there's no good way for me to declare dependencies before the 'fetch' hook. I really need a way to predeclare the dependencies somehow.

[12:53:09.0000] <jorendorff>
Hixie_: touche

[12:53:10.0000] <Hixie_>
(even for ES6 modules)

[12:54:13.0000] <Hixie_>
like, say you want to import a style sheet. In 'locate' I figure out you mean the <link>, in 'fetch' I tell the <link> "ok, time to go fetch your stuff" and I chain their promise onto the "fetch" result

[12:54:18.0000] <Hixie_>
translate's a no-op

[12:54:29.0000] <Hixie_>
and in instantiate I can finally say "oh by the way, this style sheet depends on that one over there"

[12:54:34.0000] <Hixie_>
by which time it's too late

[12:54:52.0000] <Hixie_>
I really want "locate" or "fetch" to be able to add dependencies

[12:57:07.0000] <Hixie_>
/me wonders what "execute" is supposd to do

[13:00:03.0000] <zenparsing>
as in instantiateResult.execute?

[14:10:06.0000] <Hixie_>
zenparsing: yeah

[14:32:06.0000] <Hixie_>
jorendorff: do you know what instantiateResult.execute is supposed to do?

[14:34:57.0000] <kriskowal>
Hixie_: can you point me at what you’re looking at for reference?

[14:35:06.0000] <Hixie_>
http://people.mozilla.org/~jorendorff/es6-draft.html

[14:35:40.0000] <kriskowal>
thanks

[14:35:48.0000] <Hixie_>
(and http://www.gliffy.com/go/publish/6040024 is my conversion of that to a flowchart)

[14:39:00.0000] <kriskowal>
this is my implementation of something similar for commonjs in the browser https://github.com/montagejs/mr/blob/v2/common.js#L93-L208

[14:39:28.0000] <kriskowal>
but you want definitive answers, not educated guesses, so i’ll lurk

[14:39:44.0000] <Hixie_>
something similar to what?

[14:39:57.0000] <kriskowal>
a loader

[14:40:01.0000] <Hixie_>
i'm happy with educated guesses :-)

[14:40:32.0000] <Hixie_>
i'm not sure how to interpret that code in the context of the question about instantiateResult.execute though

[14:40:37.0000] <kriskowal>
right

[14:40:47.0000] <kriskowal>
i believe that execute is equivalent to calling the module factory function

[14:41:18.0000] <kriskowal>
so all dependencies have been linked, and it’s just a matter of stepping through the module

[14:41:40.0000] <Hixie_>
so say the module is an <img>. What should the execute callback do? nothing?

[14:41:50.0000] <kriskowal>
right, nothing

[14:42:03.0000] <Hixie_>
how about a style sheet. Should execute be the thing that adds it to the list of active sheets?

[14:42:07.0000] <kriskowal>
eh, perhaps set the default exports to whatever is appropriate

[14:42:28.0000] <kriskowal>
style sheets are an interesting case because they have their own internal notions of dependency

[14:42:49.0000] <kriskowal>
but if style sheets were integrated, i would expect @import() to be resolved by the loader

[14:43:08.0000] <Hixie_>
well that is exactly what i'm trying to spec right now

[14:43:26.0000] <kriskowal>
and i would expect that the order of execution would be important for priority

[14:44:07.0000] <kriskowal>
i would expect that a loaded but not executed style sheet would have no effect. not sure whether that’s possible in the context of ES6 modules though.

[14:46:10.0000] <Hixie_>
jorendorff: while i'm at it, in "15.2.4.1 LoadModule(loader, name, options) Abstract Operation", step 9 refers to "source", but that doesn't seem to have ever been declared? what is it set to?

[15:17:53.0000] <Hixie_>
jorendorff: also, what is "name" in 15.2.5.2.2 AddLoadToLinkSet(linkSet, load) Abstract Operation 3.c.i.1 ?

[15:31:36.0000] <Hixie_>
/me files 8 spec bugs for Modules

[15:31:48.0000] <MikeSmith>
about "if you give any kind of rationale or even description of what something does, someone will interpret that as normative and do something stupid with it" I think there's a lot to be said for choosing to adopt that and being consistent about not deviating from it

[15:32:06.0000] <Hixie_>
yeah except there's still some notes and stuff in the ES spec

[15:32:21.0000] <Hixie_>
just search for "NOTE"

[15:32:25.0000] <MikeSmith>
ah ok

[15:32:38.0000] <Hixie_>
(plus it makes the spec unreadable)

[15:33:09.0000] <MikeSmith>
a lot of things seem to make the ES spec unreadable for most people

[15:33:24.0000] <MikeSmith>
it's pretty clearly not meant to be read by most people

[15:33:33.0000] <MikeSmith>
Hixie_: but that said, you're not most people

[15:33:44.0000] <MikeSmith>
and if it's unreadable for you, that's a problem

[15:34:16.0000] <Hixie_>
MikeSmith: http://www.gliffy.com/go/publish/6040024

[15:34:48.0000] <MikeSmith>
Hixie_: I think even with the WHATWG HTML we have plenty of examples of people mis-interpreting non-normative parts as normative -- and mis-interpreting the document-conformance requirements as UA conformance requirements

[15:34:51.0000] <Hixie_>
jorendorff: so, is "deps" (returned from the "instantiate" hook") intentionally supposed to be not checked as being a string? is that how i'm supposed to send metadata from "instantiate" to "normalize"?

[15:34:53.0000] <MikeSmith>
/me looks

[15:35:00.0000] <Hixie_>
MikeSmith: oh yeah no kidding

[15:35:20.0000] <MikeSmith>
Hixie_: ah yeah I had seen that diagram

[15:35:34.0000] <MikeSmith>
Hixie_: please don't show that diagram to other people :)

[15:35:36.0000] <Hixie_>
hah

[15:35:37.0000] <MikeSmith>
it's too scary

[15:35:48.0000] <Hixie_>
it has massively helped in my understanding of the spec

[15:35:57.0000] <MikeSmith>
glad for that at least

[15:36:08.0000] <Hixie_>
specifically, being able to follow the promise chain (which isn't explicitly in the spec anywhere)

[15:36:21.0000] <MikeSmith>
a h yeah

[15:36:29.0000] <Hixie_>
(and which traverses the spec in a completely different order than the spec's explicit internal calls)

[15:36:57.0000] <MikeSmith>
I have been following some of your comments and questions here on IRC about the promise-chain stuff

[15:36:57.0000] <Hixie_>
looks like Reflect.Loader.prototype.define() doesn't let you use a non-string name...

[15:37:43.0000] <MikeSmith>
Hixie_: my main feeling from reading your questions and the responses here is, glad it's you and not me :)

[15:37:48.0000] <Hixie_>
heh

[15:38:20.0000] <boogyman>
haha

[15:39:37.0000] <MikeSmith>
anyway, I think given that we're working in an interactive medium, we could take more advantage of the interactivity as far is presenting the non-normative parts to readers -- through more use of pop-ups, etc.

[15:40:07.0000] <MikeSmith>
e.g., make the non-normative stuff into annotations

[15:40:08.0000] <boogyman>
MikeSmith: just hope that anyone of value that needs that img isn't color blind

[15:41:17.0000] <MikeSmith>
the annotations approach is what I tried to do with http://es5.github.io (which was inspired by a hyperlinked version of the spec that jorendorff had made)

[15:41:32.0000] <Domenic>
MikeSmith: I think that would require a version of the spec that wasn't in Word ;)

[15:41:44.0000] <MikeSmith>
heh

[15:42:02.0000] <MikeSmith>
well Hixie_ should be glad at least that it now has internal hyperlinks

[15:42:03.0000] <Domenic>
MikeSmith: I didn't know you were the one behind es5.github.io!! I've been using that for years; it is brilliant.

[15:43:02.0000] <MikeSmith>
before jorendorff got involved in production of it I think none of the uses of the defined terms in the spec where hyperlinked back to the defintions

[15:44:21.0000] <MikeSmith>
Hixie_: btw I think the dfn pop-ups in the HTML spec could be inspiration for adding some more stuff like that -- and the implementation-status annotations

[15:45:21.0000] <Hixie_>
once i've actually done some real work (e.g. this loader/dependency thing) I plan to go back and do more on the HTML spec pipeline

[15:45:22.0000] <MikeSmith>
I think if we had a way for readers/users of the spec to submit annotations that would get added to a set of annotations for the spec after review, that would be great

[15:45:30.0000] <MikeSmith>
Hixie_: yeah, I figured

[15:45:43.0000] <Hixie_>
but i wasted enough time just getting more or less to parity :-)

[15:45:49.0000] <MikeSmith>
heh

[15:47:44.0000] <MikeSmith>
another thing that it seems has always worked really well is the way the PHP docs incorporate user comments and examples (and the many other projects that since adopted similar things for their docs)

[15:48:50.0000] <MikeSmith>
90% of the utility to users of those kinds of docs is in those user-contributed comments and examples

[15:49:03.0000] <MikeSmith>
of course a spec is something quite a bit different, but stil

[15:50:07.0000] <Hixie_>
the spec annotations get a lot of spam as it is

[15:50:17.0000] <Hixie_>
and that's with them being basicaly invisible to most users

[15:50:45.0000] <Hixie_>
similarly, we had to clamp down on the wiki signups because of spam

[15:55:01.0000] <MikeSmith>
Hixie_: sure, that's the cost of enabling those kinds of things

[15:55:09.0000] <Hixie_>
pretty high cost

[15:55:11.0000] <Hixie_>
speaking of which

[15:55:22.0000] <Hixie_>
wanna be on the hook to give people wiki accounts? :-)

[15:55:56.0000] <MikeSmith>
Hixie_: well these days I think a better way to collect user contributions would be using a mechanism based on gihub forks and PRs

[15:56:12.0000] <MikeSmith>
Hixie_: see what html5please does

[15:56:19.0000] <MikeSmith>
Hixie_: I am already on the hook!

[15:56:44.0000] <Hixie_>
you get teh admin@ e-mail?

[15:56:45.0000] <MikeSmith>
Hixie_: I've done a bunch of wiki user-account creations already

[15:56:50.0000] <Hixie_>
oh, cool

[15:57:14.0000] <MikeSmith>
Hixie_: no, but would be glad to be on admin@ mail to help with whatever else is needed there

[15:57:33.0000] <Hixie_>
also, http://html5please.us/ o_O

[15:57:37.0000] <Hixie_>
oh, cool

[15:57:46.0000] <Hixie_>
let me add you! :-D

[15:58:12.0000] <MikeSmith>
cool

[16:01:43.0000] <boogyman>
lol. of course that site is related to Insurance Rates

[16:03:01.0000] <Hixie_>
MikeSmith: mike⊙wo ?

[16:03:50.0000] <MikeSmith>
Hixie_: yeah please

[16:08:06.0000] <roc>
Just try this link. If it doesn't work right away, I'll switch to Vidyo

[16:08:10.0000] <roc>
oops


2014-08-14
[19:32:38.0000] <MikeSmith>
so I see that Service Worker is a dependency for the draft Geofencing API https://gist.github.com/mkruisselbrink/ea833f70041ab3c2aa69#file-explainer-md

[23:19:12.0000] <zcorpan>
krijnhoetmer: could you annotate quit/join/rename lines with a class on the server side so that incremental rendering works better?

[00:10:23.0000] <zcorpan>
MikeSmith: the Ⓐ annotation in http://es5.github.io/ should use http://javascript.spec.whatwg.org/

[00:23:19.0000] <zcorpan>
mathiasbynens: where is http://wiki.whatwg.org/wiki/Web_ECMAScript#Identifiers covered in http://javascript.spec.whatwg.org ?

[00:23:54.0000] <zcorpan>
or is htat part of the ES spec now?

[00:30:36.0000] <mathiasbynens>
zcorpan: it’s being removed from the platform \o/

[00:30:55.0000] <zcorpan>
mathiasbynens: oh. sweet

[00:31:06.0000] <mathiasbynens>
Opera/Carakan: https://bugs.opera.com/browse/CORE-47441 (DSK-369398)

[00:31:07.0000] <mathiasbynens>
Chrome/V8: http://code.google.com/p/v8/issues/detail?id=2222

[00:31:07.0000] <mathiasbynens>
Safari/JavaScriptCore: https://bugs.webkit.org/show_bug.cgi?id=90678

[00:31:07.0000] <mathiasbynens>
Firefox (discussion): https://bugzilla.mozilla.org/show_bug.cgi?id=744784

[00:31:07.0000] <mathiasbynens>
Spec bug: https://bugs.ecmascript.org/show_bug.cgi?id=277

[00:33:09.0000] <karlcow>
mathiasbynens: search "use and xlink in svg"

[00:33:34.0000] <karlcow>
hmmm slow bot! pfff

[00:33:52.0000] <karlcow>
/me who thought I had discovered the universal Web tech search engine ;)

[00:34:09.0000] <zcorpan>
mathiasbynens: should the moz bug be closed?

[00:37:11.0000] <annevk>
I guess we should wait on other engines to fix their bugs

[00:39:32.0000] <annevk>
Well, actually, I'll close it

[01:07:37.0000] <Manishearth>
Hixie_: there?

[01:07:42.0000] <Manishearth>
(or Ms2ger)

[01:07:49.0000] <Ms2ger>
Here

[01:07:50.0000] <Manishearth>
http://dom.spec.whatwg.org/#dom-node-textcontent is nullable

[01:07:55.0000] <Ms2ger>
Yes

[01:08:04.0000] <Manishearth>
http://www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#dom-a-text is not

[01:08:05.0000] <Ms2ger>
It can return null

[01:08:14.0000] <Manishearth>
but a.text is supposed to mirror node.textcontent

[01:08:20.0000] <Ms2ger>
But not for elements

[01:08:30.0000] <Manishearth>
d'oh

[01:08:39.0000] <Ms2ger>
You can wrap in Some on the way in, and unwrap() on the way out

[01:08:55.0000] <Manishearth>
Ms2ger: I guess https://critic.hoppipolla.co.uk/6b88d82c?review=2348 shouldn't be Throws then

[01:09:00.0000] <Manishearth>
just an unreachable!()

[01:09:06.0000] <Manishearth>
or an unwrap

[01:09:06.0000] <Ms2ger>
/me looks

[01:09:19.0000] <Ms2ger>
That's correct

[01:09:40.0000] <Ms2ger>
(Yay, someone's picking reviews off my todo list :))

[01:09:57.0000] <Manishearth>
Ms2ger: first review my getters one ;)

[01:10:27.0000] <Ms2ger>
Dammit you :)

[01:10:46.0000] <Ms2ger>
bbiab

[01:11:27.0000] <jgraham>
Manishearth: See now you scared the Ms2ger

[01:15:14.0000] <Manishearth>
haha

[01:18:57.0000] <Manishearth>
Ms2ger: we also have SetterThrows for Node.textContent, which doesn't seem necessary. Hm

[01:22:15.0000] <jgraham>
Manishearth: Yeah it doesn't sound like it should throw

[01:22:32.0000] <jgraham>
The servo DOM being buggy isn't exactly a surprise though

[01:24:57.0000] <Manishearth>
jgraham: nodeValue throws too. I shall investigate

[01:28:08.0000] <kriskowal>
based on a couple of Domenic’s observations, i’ve done another sketch on promise-based streams

[01:28:37.0000] <kriskowal>
this time more closely analogous to Promise, with the revealing constructor returning the output side and passing the methods of the input as args of the setup function

[01:29:18.0000] <kriskowal>
and now 100% symmetric. both the input and output stream are the same prototype.

[01:29:24.0000] <kriskowal>
sketch http://kriskowal.github.io/gtor/docs/stream

[01:29:30.0000] <kriskowal>
and spec https://github.com/kriskowal/gtor/blob/master/test/stream-test.js

[01:29:36.0000] <kriskowal>
pardon, i mean test.

[01:30:06.0000] <kriskowal>
cc annevk TabAtkins JakeA

[01:35:01.0000] <JakeA>
Interesting. Is this an alternative to the current streams proposal or sugar on top?

[01:35:29.0000] <kriskowal>
this is independent

[01:35:44.0000] <kriskowal>
could go either way, i suppose

[01:37:36.0000] <kriskowal>
this is a level of abstraction that i hope will at least be available to work with streams

[01:37:44.0000] <kriskowal>
particularly request and response bodies

[01:38:39.0000] <kriskowal>
to be clear, i would like Request and Response to be able to recognize iterators and promise iterators, of which this is one example

[01:38:46.0000] <kriskowal>
for the body

[01:39:51.0000] <tyoshino______>
/me looking

[01:39:52.0000] <kriskowal>
apart from the utility of being able to use more specific kinds of iterables (e.g., array of strings), i believe async generators should also return promise iterators

[01:40:43.0000] <jgraham>
Manishearth: So it isn't possible to get travis to do dependent jobs? e.g. make a build in one job and then use the binary in a second?

[01:41:03.0000] <kriskowal>
i expect promise iterators will become a streaming lingua franca

[01:41:59.0000] <kriskowal>
JakeA ^

[01:44:48.0000] <annevk>
kriskowal: when you say "A stream is a promise iterator and a promise generator." is that analogous to "A promise is an asynchronous value getter and an asynchronous value setter."?

[01:45:10.0000] <kriskowal>
absolutely

[01:45:23.0000] <JakeA>
The API works for me, but I can't say I'm up to date on the latest streams spec for comparison.

[01:45:36.0000] <kriskowal>
well, to be clear, a promise is an asynchronous getter, a resolver is an asynchronous setter

[01:46:21.0000] <kriskowal>
a stream can be used either as an asynchronous iterator or generator

[01:46:27.0000] <kriskowal>
since they’re symmetric

[01:47:14.0000] <annevk>
I like the API and I was hoping we'd end up with something like that

[01:47:34.0000] <kriskowal>
JakeA: the current stream spec focuses on a lower level, catering specifically to hooking into system level streams

[01:47:38.0000] <annevk>
As far as I can tell we do not have something like that because of performance, but it's not clear whether those concerns are valid

[01:49:22.0000] <kriskowal>
yeah. burden of proof is on me to figure out how to make this interface perform well for byte streams

[01:58:20.0000] <annevk>
http://www.gliffy.com/go/publish/6040024 is just o_O

[01:58:38.0000] <annevk>
kriskowal: I hope both sides feel pressure since a much better API is worth something too

[01:59:49.0000] <kriskowal>
yeah, and low level stream api’s can get mired in byzantine state machines as well

[02:00:14.0000] <kriskowal>
it’s a hard problem

[02:00:48.0000] <annevk>
tyoshino______: does that link help? I wasn't sure that linking to public-webapps would help; there's also discussion on public-webappsec sometimes and even other places, but I don't necessarily want to discourage all that fragmentation

[02:17:26.0000] <annevk>
"In terms of vision, Sam isn't planning on coming to the TAG with a set agenda, but will seek to find ways to address a disturbing trend he has seen whereby prioritization has been in favor of specifiers (often arguing for theoretical purity!) over implementers over authors over users. He believes that the correct ordering is the opposite: http://www.w3.org/TR/html-design-principles/#priority-of-constituencies "

[02:17:30.0000] <annevk>
from http://www.w3.org/2014/08/01-tag-nominations.html

[02:17:40.0000] <annevk>
First I hear of this, anyone has context?

[02:23:17.0000] <kriskowal>
i met sam once at TC-39 in 2009

[02:24:04.0000] <kriskowal>
i believe he was pushing for internationalization for IBM but wasn’t getting traction at the time

[02:24:21.0000] <kriskowal>
oh, no it was bigint

[02:27:03.0000] <kriskowal>
i could see that argument applied in that context, from his perspective. the effort to introduce Decimal now depends on Brendan’s value type idea, all these years later.

[02:29:33.0000] <annevk>
I think Sam wanted decimal

[02:29:54.0000] <annevk>
http://intertwingly.net/blog/2008/07/11/Decimal-in-ECMAScript

[02:30:23.0000] <annevk>
http://www.intertwingly.net/blog/2008/08/27/ES-Decimal-Updates

[02:32:16.0000] <annevk>
I guess TC39 can count itself "lucky" that no platform APIs were designed to deal with decimal as happened with bytes

[02:33:07.0000] <annevk>
But yeah, in the context of TC39 that makes a lot of sense

[02:33:13.0000] <annevk>
But W3C is not TC39

[02:35:13.0000] <kriskowal>
perhaps TC39’s luck is about to dry up on that front :P

[03:23:20.0000] <annevk>
In DOM, I'm going to rebrand "node is removed" and "node is inserted" as "removing steps" and "insertion steps", to make them similar to "cloning steps" and "adopting steps"

[03:24:01.0000] <annevk>
As well as passing them the arguments they need and fixing bugs in NodeIterator

[03:25:56.0000] <jgraham>
Algorithm names in the -ing form seems pretty horrid

[03:31:41.0000] <annevk>
Don't really want to rename adopting/cloning at this point

[05:36:56.0000] <foolip>
annevk: why does navigation invoke fully exit fullscreen again? it doesn't seem to do that in Chromium, and I'm not sure why it should...

[05:37:50.0000] <foolip>
having a presentation where you open different sites in iframes doesn't seem crazy, for example

[06:09:01.0000] <Manishearth>
jgraham: Nope. We manage that for Rust snapshots by havign two repos and uploading the binaries.

[06:09:25.0000] <Manishearth>
I've proposed a system where Travis can split into more VMs *after* the build step (before testing)

[06:26:40.0000] <annevk>
foolip: roc was afraid of spoofing I think

[06:26:59.0000] <annevk>
foolip: it might be about navigating the top-level browsing context only?

[06:28:28.0000] <jgraham>
Manishearth: Proposed to whom? The Travis people?

[06:29:10.0000] <caitp>
they'd probably be happy to do that for you, they seem to be very happy to try new things with docker

[06:29:16.0000] <Manishearth>
jgraham: yeah. There's some internal discussions too that I don't know much about but Lars is saying something about that in #servo

[06:29:42.0000] <jgraham>
Manishearth: seems like a CI system that can't do that is only going to be suitable for tiny projects

[06:30:03.0000] <caitp>
well it's mostly catering to ruby/python/js apps

[06:31:04.0000] <jgraham>
Yeah, we might well not be their target audience

[06:31:25.0000] <annevk>
Oh, I missed this happened: http://www.w3.org/2014/Process-20140801/

[06:31:40.0000] <jgraham>
I'm not really sure why servo started using Travis in the first place, unless it was just that Mozilla releng were overstretched

[06:32:04.0000] <caitp>
probably the same reason they started hosting projects on github; convenience

[06:32:25.0000] <jgraham>
The convenience of github is debatable :p

[06:32:49.0000] <Manishearth>
jgraham: Yeah, their target audience are people where "build" is the same as "run"

[06:32:58.0000] <jgraham>
(the attraction of it is more familiarity to potential contributers, which doesn't apply to the CI system)

[06:33:03.0000] <zcorpan>
<a style="color:black" href="http://yandex.com"><span

[06:33:03.0000] <zcorpan>
              style="color: red;">Y</span>andex</a>—<a style="color:black" href="http://yandex.ru"><span

[06:33:03.0000] <zcorpan>
              style="color: red;">Я</span>ндекс</a>

[06:33:05.0000] <Manishearth>
When I proposed it they seemed to think I wanted to split up the VM after installing deps ;)

[06:33:06.0000] <foolip>
annevk: maybe, it's in http://www.whatwg.org/specs/web-apps/current-work/#traverse-the-history-by-a-delta

[06:33:30.0000] <caitp>
that's what the convenience is, really

[06:34:08.0000] <annevk>
foolip: that's always triggered

[06:34:10.0000] <caitp>
but I'm not going to sit here and justify the use of github, onto more interesting things today :<

[06:34:19.0000] <annevk>
foolip: talk with roc?

[06:34:26.0000] <foolip>
annevk: looks like that only applies to go(), back() and forward(), am I missing something?

[06:34:28.0000] <jgraham>
I really wish someone would make a viable competitor to github; it's pretty obvious that we're all suffering from their near-monopoly position

[06:34:30.0000] <foolip>
annevk: ok :)

[06:34:56.0000] <Ms2ger>
jgraham, yeah, definitely releng being overstretched

[06:35:04.0000] <annevk>
foolip: step 5 of navigate (named navigated) also invokes it

[06:35:26.0000] <annevk>
zcorpan: yeah, noticed that

[06:36:12.0000] <foolip>
annevk: "If a task queued by the traverse the history by a delta algorithm is running" doesn't actually invoke it AFAICT

[06:36:49.0000] <annevk>
oh sorry, I'll look again

[06:37:32.0000] <Manishearth>
jgraham: So it started off with me just tinkering with Travis and trying to get it to do snapshots because compiling rustc took forever for me, and I used to mess up with git so sometimes I'd end up compiling it 3-4 times because it kept clobbering itself. Later I decided to get it on Travis as an experiment, though I got blocked by an ICE. And then finally releng got overstretched and wpt was blocked on pypi and all that, so I and Lars worke

[06:38:05.0000] <Manishearth>
I find Travis better than buildbot fwiw. But if either one could get VM forking, that would be awesome

[06:38:57.0000] <annevk>
foolip: not sure now

[06:39:05.0000] <foolip>
it doesn't seem to add up

[06:39:08.0000] <caitp>
honestly I'm pretty sure they'd work with you guys on that

[06:39:26.0000] <caitp>
especially if mozilla wants to pay Travis for the multitudes of repos on github

[06:39:42.0000] <foolip>
additionally, Blink/WebKit actually does fully exit fullscreen for window.open, which seems outside of what's spec'd

[06:39:47.0000] <annevk>
foolip: https://www.w3.org/Bugs/Public/show_bug.cgi?id=18840

[06:39:47.0000] <foolip>
might make sense though?

[06:45:23.0000] <jgraham>
Manishearth: Well I'm hoping that the replacement for buildbot is better, but I think that travis is one of these things that is likely good when your needs are small but might not scale to more complex scenarios

[06:46:49.0000] <Manishearth>
jgraham: Yeah. Though it probably wouldn't be too hard to just use Travis on the build slaves and tweak it for what we need

[06:47:31.0000] <Manishearth>
However, the Travis people are implementing goodies for us anyway, so it makes some sense to just go ahead with it

[06:47:52.0000] <jgraham>
Sure, I'm not arguing it doesn't make sense for now

[06:48:49.0000] <jgraham>
Like I say, hopefully TaskCluster eventually becomes a thing and we can implement our testing infrastructure in a way that is very flexible and low-latency

[06:52:38.0000] <foolip>
annevk: filed https://www.w3.org/Bugs/Public/show_bug.cgi?id=26584

[06:55:02.0000] <Manishearth>
jgraham: We should inject some stuff into Firefox that makes everyone part of our botnet and then use the botnet for CI

[06:56:21.0000] <Manishearth>
/me thinks up more devious plans

[06:56:56.0000] <Ms2ger>
We can just make Fx mine bitcoins and pay build people with them

[06:57:46.0000] <caitp>
finally after 2 decades, mozilla has a business model

[06:57:55.0000] <jgraham>
Hmm?

[06:58:42.0000] <jgraham>
Mozilla has a business model already… I guess you can debate how good it is, but I would bet it will work better than mining bitcoins :)

[06:59:04.0000] <caitp>
it's a joke jgraham

[06:59:09.0000] <caitp>
that's the joke

[07:00:44.0000] <jgraham>
I guess :) "How does Mozilla make any money" quickly becomes the sort of question that becomes so tedious you wish someone would just distribute a pamphlet to avoid answering it again

[07:02:46.0000] <Manishearth>
Ms2ger: next time I get asked where Mozilla gets money from I'm using that as an answer

[07:02:52.0000] <Manishearth>
;P

[07:03:11.0000] <Ms2ger>
Manishearth, eh

[07:03:32.0000] <Ms2ger>
Manishearth, why not "Oh, we hacked a bitcoin miner into Chrome"? :)

[07:03:39.0000] <Manishearth>
hahaha even better

[07:03:51.0000] <Ms2ger>
That's why Google pays us so much

[07:03:56.0000] <caitp>
/me can't wait to see that headline in Wired

[07:27:03.0000] <annevk>
www-tag o_O

[07:27:27.0000] <Ms2ger>
/me gets popcorn

[07:28:54.0000] <Ms2ger>
Oh, it's Adam

[07:31:58.0000] <jgraham>
"numerous attorneys"

[07:32:41.0000] <jgraham>
Because with lawyers it's really the number that you spam that is the important thing.

[07:54:53.0000] <SamB__>
jgraham: couldn't they just publish an FAQ on the website?

[08:02:42.0000] <annevk>
antimattur <3

[08:18:19.0000] <JakeA>
annevk: Does http://fetch.spec.whatwg.org/#headers need a .keys() method, or is there some other way to get the headers?

[08:19:06.0000] <annevk>
JakeA: https://www.w3.org/Bugs/Public/show_bug.cgi?id=26102

[08:19:30.0000] <JakeA>
cool

[08:19:49.0000] <annevk>
JakeA: basically waiting for https://www.w3.org/Bugs/Public/show_bug.cgi?id=17648

[08:20:08.0000] <annevk>
JakeA: we've numerous collections, ideally they all do the same thing

[08:21:27.0000] <JakeA>
annevk: Any idea how close ES6 iterators are?

[08:22:06.0000] <annevk>
JakeA: not really, hard to make any predictions about ES without attending TC39 meetings :/

[08:22:20.0000] <annevk>
must be the most closed standards group we have

[08:24:23.0000] <JakeA>
hah

[11:27:27.0000] <Domenic>
ES6 iterators are done and shipping in Firefox and Chrome

[11:53:41.0000] <wanderview>
annevk: ^^^

[12:06:05.0000] <TabAtkins>
JakeA: Based on my last talk with Domenic, the plan is still to have Streams do binary-level stuff, object streams as something different, and *investigate* whether it's possible/worthwhile to merge them.

[12:06:10.0000] <TabAtkins>
(I don't think it is.)

[12:06:54.0000] <TabAtkins>
annevk: Note that you can add "iterator foo()" or whatever to your IDL right now.

[13:03:45.0000] <annevk>
TabAtkins: see the bug

[13:04:00.0000] <annevk>
there's a bunch of stuff that doesn't really address

[13:04:05.0000] <Ms2ger>
http://www.reddit.com/r/IAmA/comments/2dk60t/we_build_internet_explorer_i_know_right_ask_us/

[13:04:13.0000] <Domenic>
It's important to allow custom iterator definitions in some way, in addition to "just copy Array.prototype's pattern"

[13:04:19.0000] <Ms2ger>
Who still has bugs they need IE feedback on?

[13:04:50.0000] <Ms2ger>
Oh, looks like they're done already

[13:04:55.0000] <Domenic>
SteveF got them good in that thread http://www.reddit.com/r/IAmA/comments/2dk60t/we_build_internet_explorer_i_know_right_ask_us/cjq8jph

[15:09:20.0000] <MikeSmith>
Domenic: Until Steve told me about it, I didn't even know that Microsoft now had that public bug tracker

[15:10:42.0000] <MikeSmith>
I wonder if the David who commented in that reddit thread is David Storey

[15:14:29.0000] <astearns>
MikeSmith: given the email address I suspect it's David Catuhe

[15:26:37.0000] <MikeSmith>
astearns: ah OK

[16:02:17.0000] <jgraham>
Also given the list of names at the top of the thread

[16:05:49.0000] <kriskowal>
MikeSmith: that is definitely David Storey.

[16:06:08.0000] <MikeSmith>
ok

[16:06:23.0000] <kriskowal>
ah, well, maybe not :/ sorry for the noise

[16:06:30.0000] <kriskowal>
i worked with david at motorola

[16:06:39.0000] <MikeSmith>
:-)

[16:06:39.0000] <kriskowal>
knew he moved on to ms

[16:06:57.0000] <MikeSmith>
yeah but seems that's not him in that comment

[16:07:44.0000] <jgraham>
/me notes again that the top of the thread has a list of names

[16:07:55.0000] <jgraham>
(David Storey is not one of them)

[16:36:24.0000] <MikeSmith>
what kind of person reads the stuff at the header of a page/document

[16:37:09.0000] <MikeSmith>
caitp: I get ー[Error] Failed to load resource: the server responded with a status of 404 (Not Found) (update_manifest.py, line 0)

[16:37:40.0000] <MikeSmith>
caitp: nothing about not importing html5lib

[16:38:01.0000] <MikeSmith>
but http://w3c-test.org/tools/runner/update_manifest.py is there

[16:38:43.0000] <caitp>
MikeSmith: should be in the stack trace

[16:38:51.0000] <MikeSmith>
ok

[16:39:43.0000] <caitp>
I have the file in site-packages and can import it normally, so I think something is screwing with sys.path and breaking it, but could be wrong

[16:39:48.0000] <caitp>
s/file/module

[16:41:40.0000] <MikeSmith>
jgraham: if/when you have time, https://github.com/w3c/web-platform-tests/issues/1172

[16:41:58.0000] <MikeSmith>
hard to troubleshoot this

[16:49:31.0000] <MikeSmith>
caitp: I have no stack trace

[16:51:03.0000] <MikeSmith>
when I run python update_manifest.py locally

[16:51:27.0000] <MikeSmith>
it doesn't fail or at least it doesn't emit any error message at all

[16:58:12.0000] <jgraham>
MikeSmith: I'll put that on my list for tomorrow. Or "today" depending on your calculus of these things

[16:58:18.0000] <jgraham>
"list"

[16:58:33.0000] <MikeSmith>
heh

[16:58:37.0000] <MikeSmith>
ok


2014-08-15
[18:19:31.0000] <caitp>
MikeSmith, have you cleaned the repo directory lately? (Ie `git clean -xfd`)

[18:19:50.0000] <caitp>
I didn't have the issue initially, but I saw that the website was having issues so I tried cleaning to see if I could reproduce it

[20:21:31.0000] <MikeSmith>
caitp: I've never run git clean in that repo. We have some files in that repo directory that aren't under version control, so if git clean is going to remove those, I don't want to run it -- especially if since it's not clear it would help anything anyway

[20:22:57.0000] <caitp>
there aren't very many untracked files, just your non-default configuration and compiled python files, really. (and submodules, but these don't really count)

[20:30:38.0000] <MikeSmith>
the entire submissions directory from which http://w3c-test.org/submissions is served is in the root of the repo directory and its contents are entirely untracked files

[20:31:46.0000] <caitp>
well, I don't recommend working on it from w3c-test.org per se

[20:32:08.0000] <caitp>
probably good just clearing with `find . -name '*.pyc' | xargs rm` though

[20:32:10.0000] <MikeSmith>
oh I see what you're saying

[20:32:23.0000] <MikeSmith>
running it locallly, I can try that

[20:33:08.0000] <MikeSmith>
I mean in my working directory

[20:35:25.0000] <MikeSmith>
so yeah even after a `git clean -xfd` I can't reproduce the problem in my working directory

[20:35:38.0000] <caitp>
humm

[20:35:57.0000] <caitp>
but even without the failure to import html5lib, it still breaks?

[20:36:14.0000] <MikeSmith>
I remove the MANIFEST.jon file, go to http://web-platform.test:8000/tools/runner/index.html and Start and the MANIFEST.json file gets regenerated as expected, with no errors logged

[20:37:12.0000] <MikeSmith>
caitp: I don't see any message or indication anywhere that it's failing to import html5lib

[20:37:49.0000] <caitp>
hm, interesting

[20:38:10.0000] <MikeSmith>
not when I run python serve.py in the console, nor if I run the manifest.py script manually

[20:38:18.0000] <caitp>
well, who knows, issue might not have been related to html5lib, but given that it shows up in the stack trace here locally, it looks suspicious

[20:40:40.0000] <tyoshino______>
annevk: looks good as now we have a link to the main place of discussion

[00:03:39.0000] <zcorpan>
seems like we failed for "Cross-origin requests should not require API changes other than allowing cross-origin requests." http://www.w3.org/wiki/CORS

[00:04:51.0000] <zcorpan>
although not having an API change for XHR caused a security bug for facebook at least, iirc

[00:31:24.0000] <annevk>
yeah, that wiki is out-of-date

[00:33:17.0000] <kriskowal>
annevk: i’ve got a rough sketch for a promise-iterator-oriented byte stream https://github.com/kriskowal/gtor/blob/master/byte-stream.js

[00:33:47.0000] <kriskowal>
i’m going to try to clean it up tomorrow, but it’s not too nasty

[00:36:07.0000] <annevk>
usage examples might help, but you really want to talk to Domenic, I'm only superficially involved

[00:37:52.0000] <kriskowal>
yeah, pinged him in #promises too :)

[00:38:14.0000] <kriskowal>
but these are the working cases https://github.com/kriskowal/gtor/blob/master/test/byte-stream-test.js

[01:27:47.0000] <annevk>
"It was taken out per a suggestion at the May 2012 F2F so it could be maintained by the wider web community."

[01:27:51.0000] <annevk>
only edits are made by me

[01:43:45.0000] <foolip>
annevk is the wider web community?

[01:48:01.0000] <annevk>
I think that's a good way of interpreting the sequence of events

[01:48:27.0000] <Ms2ger>
?

[02:06:20.0000] <jgraham>
/me gets annevk an "I am the web" T-shirt

[03:36:58.0000] <JakeA>
annevk: does IDL allow freezing an object to get around the expando issue?

[03:37:40.0000] <annevk>
JakeA: that sounds very developer-hostile

[03:37:48.0000] <annevk>
JakeA: why can't we follow established patterns?

[03:38:02.0000] <JakeA>
what have developers ever done for us?

[03:50:12.0000] <annevk>
If I do a for-in on document.body.attributes I get something named "@@iterator" in Gecko

[03:53:22.0000] <annevk>
In Chrome if I use Object.getOwnPropertyNames I get a mysterious 3 (I have three attributes declared) that returns undefined on getting

[03:53:33.0000] <Ms2ger>
That's Symbol.iterator in another incarnation

[03:53:46.0000] <annevk>
We have not fixed it yet?

[03:53:53.0000] <Ms2ger>
No

[03:55:27.0000] <annevk>
Also, why does getOWnPropertyNames not return anything for the attribute names themselves?

[03:55:46.0000] <annevk>
E.g. if I have <body x> body.attributes.x will return the expected Attr object

[04:04:28.0000] <zcorpan>
annevk: pls see https://critic.hoppipolla.co.uk/showcomment?chain=4280

[04:07:15.0000] <annevk>
zcorpan: left a reply

[04:08:12.0000] <zcorpan>
thx

[04:21:26.0000] <annevk>
HTMLCollection has namedItem()

[04:21:34.0000] <annevk>
NamedNodeMap has getNamedItem()

[04:21:38.0000] <annevk>
Hurray!

[05:00:51.0000] <foolip>
annevk: did you forget to publish to http://fullscreen.spec.whatwg.org ?

[05:01:28.0000] <annevk>
foolip: happens automatically unless something went wrong

[05:02:02.0000] <foolip>
then something went wrong :)

[05:02:07.0000] <annevk>
foolip: did manual refresh

[05:02:20.0000] <foolip>
thanks, now I see oldNode

[05:23:04.0000] <smaug____>
annevk: github?

[05:23:07.0000] <smaug____>
oh well

[05:23:13.0000] <smaug____>
then I report the bug here

[05:23:27.0000] <smaug____>
click event in the Notification should be cancelable

[05:24:29.0000] <smaug____>
and if preventDefault() is called, UA shouldn't not do whatever default action it has for the click (as an example, not focus the tab/window which created the notification).

[05:31:51.0000] <annevk>
makes sense I guess, although the original idea was that click would not do anything...

[05:32:08.0000] <annevk>
clicking a notification also makes less sense now we let them be spawn from workers

[05:33:26.0000] <annevk>
smaug____: wait, you don't have a GitHub account? just email WHATWG then? I'm not keeping track of logs

[05:34:28.0000] <smaug____>
github has so horrible UI, that I try to not use it, and no, I don't have an account

[05:34:33.0000] <smaug____>
ok

[07:33:09.0000] <annevk>
thanks smaug____

[07:33:20.0000] <annevk>
/me goes back to NamedNodeMap

[07:34:27.0000] <smaug____>
annevk: any objections?

[07:34:51.0000] <annevk>
smaug____: if you go through the open GitHub issues you see that not everyone likes this

[07:35:00.0000] <smaug____>
since I need to implement either that, or do some hacky "does web page call window.focus() during click event dispatch" thing

[07:35:13.0000] <smaug____>
hmm

[07:35:19.0000] <annevk>
wouldn't we need both given workers?

[07:39:27.0000] <smaug____>
you can't call window.focus() in workers

[07:40:10.0000] <smaug____>
we may want to be able to map a Notification in a worker to a window object somehow, and the n

[07:40:25.0000] <smaug____>
then preventDefault() in a worker would prevent the automatic focus

[07:40:31.0000] <annevk>
yeah that's possible using getClones()

[07:41:16.0000] <smaug____>
I didn't find any issue where someone is against making click cancelable

[07:42:50.0000] <annevk>
maybe it's okay then. I guess I can have a look next week if nothing else comes up

[07:43:58.0000] <smaug____>
thanks

[07:55:23.0000] <annevk>
foolip: any news on potentially making Attr.prototype.value readonly?

[07:55:48.0000] <annevk>
foolip: if we cannot do that, we should just embrace the link between attributes and their owner

[08:33:13.0000] <Domenic>
https://twitter.com/bentrem/status/500198639239958530

[08:33:37.0000] <annevk>
yeah was not quite sure what to make of that

[09:18:56.0000] <Hixie_>
annevk: is "How to determine content-type of file: protocol" a thread for your specs thta you'll respond to or is it something i should worry about?

[09:50:34.0000] <annevk>
Hixie_: it's mostly about MIME sniffing

[09:51:07.0000] <Hixie_>
GPHemsley: see my question to anne earlier, but pretend you are anne

[10:03:47.0000] <Hixie_>
jorendorff: should i file bugs for the various suggestions i made on es-discuss that didn't get picked up by allen? or is the list the best chance a suggestion has?

[10:04:21.0000] <jorendorff>
You're not gonna like this

[10:04:24.0000] <jorendorff>
Hixie_: My best chance to get any change has always been to cooperate with someone who attends the TC39 face-to-face meetings.

[10:04:31.0000] <jorendorff>
And that is super effective.

[10:04:38.0000] <Hixie_>
sigh

[10:05:21.0000] <jorendorff>
All roads lead through the meeting agenda.

[10:06:14.0000] <jorendorff>
You can often get something onto the agenda just by asking on the list, but unless someone is there to advocate your view, it won't matter.

[10:06:20.0000] <Hixie_>
and screw everyone who can't afford to travel every 2 months, eh

[10:06:24.0000] <Hixie_>
yay for openness

[10:08:27.0000] <jorendorff>
Allen does pay attention to bugs for straight-up mistakes, or changes that are in the meeting notes but haven't appeared in the spec yet.

[10:26:03.0000] <Hixie_>
i wonder what people want  import "foo/";  to do

[10:26:19.0000] <Hixie_>
should that import "http://example.com/foo/.js" ?

[10:26:31.0000] <Hixie_>
jorendorff: ^, if you have an opinion

[10:26:54.0000] <jorendorff>
"don't do that" is my opinion

[10:27:04.0000] <Hixie_>
well sure, but what if they do

[10:27:56.0000] <jorendorff>
either an immediate error in the normalize hook, or "foo/.js"

[10:28:14.0000] <Hixie_>
also, if you do <script type=module href="http://example.com/foo.js"></script> <script type=module> import "foo"; </script>, should we load foo.js once or twice?

[10:33:42.0000] <annevk>
Hixie_: can the former override the Loader?

[10:33:55.0000] <Hixie_>
how do you mean

[10:34:13.0000] <Hixie_>
i'm just talking about default behaviours here

[10:34:25.0000] <Hixie_>
i mean, obviously all of this goes out of the window if the scripts start playing

[10:35:12.0000] <annevk>
I guess I'm not sure, seems like avoiding duplicates would be nice, if every other library does import jquery you might not want to load it 10 times

[10:35:25.0000] <Hixie_>
import, in general, dedupes

[10:35:31.0000] <Hixie_>
the question here is about normalization

[10:35:56.0000] <Hixie_>
i mean, if three modules all do  import "jquery", you're only going to get one jquery

[10:37:56.0000] <Hixie_>
jorendorff: is there any way to delay execution of a module once its dependencies have been found?

[10:38:05.0000] <Hixie_>
jorendorff: i'm thinking of a case like this:

[10:38:27.0000] <Hixie_>
<script type=module execute-when-needed> import "jquery"; ... </script>

[10:38:35.0000] <annevk>
Hixie_: when does deduping happen relative to normalizing the identifier? should be the answer no?

[10:39:25.0000] <Hixie_>
jorendorff: it'd be nice if I could have the imports read immediately, and then the loads started preemptively, even if I don't ever actually tell the script to execute

[10:39:38.0000] <Hixie_>
annevk: deduping happens between the normalize and locate hooks

[10:40:53.0000] <jorendorff>
there's not

[10:42:58.0000] <jorendorff>
Hixie_: the way I thought people would reduce latency (round trips) when using large module dependency graphs was,

[10:43:14.0000] <jorendorff>
 make the fetch() hook fast --- by preloading module sources and them in a side table known to their custom fetch()

[10:44:13.0000] <Hixie_>
if browsers do that, it implies that the browsers have to implement two redundant dependency mechanisms.

[10:44:29.0000] <jorendorff>
no because preloading doesn't need a dependency mechanism

[10:44:36.0000] <jorendorff>
you just say "here's a chunk of code i need"

[10:44:42.0000] <Hixie_>
how do you know you need it?

[10:45:26.0000] <jorendorff>
because you looked at the devtools and you saw it loading? how does anybody get the knowledge they need to tune application performance?

[10:45:43.0000] <jorendorff>
I didn't mean browsers do this, but JS library code could do it (by modifying the default loader's fetch hook)

[10:46:01.0000] <Hixie_>
if web authors still have to write their own loaders in the common case, i think we've more or less failed.

[10:46:10.0000] <jorendorff>
yeah, i know

[10:46:21.0000] <jorendorff>
they won't write their own, of course

[10:46:33.0000] <Hixie_>
well if they use a standard one, we should just build it into the platform.

[10:47:01.0000] <Hixie_>
cos otherwise we're just saying that the baseline cost of shipping a web app is the cost of using that piece of code.

[10:47:33.0000] <jorendorff>
no real argument here

[10:53:06.0000] <jorendorff>
Hixie_: But you were already talking about multiple sources of information for the dependency graph - declarative in the source code, declarative in HTML (because you have that earlier). How do you know what you need?

[10:53:42.0000] <Hixie_>
jorendorff: the sources are multiple, but I'd hope the browser only has to maintain one tree generated from those sources

[10:54:11.0000] <jorendorff>
right, what i was describing only has one source and one graph; plus a cache of source code

[10:54:41.0000] <jorendorff>
(if we're speaking only of what has to be maintained on the client side)

[10:54:45.0000] <Hixie_>
if you haven't yet loaded anything, the ES6 dep graph is empty.

[10:54:51.0000] <jorendorff>
yes

[10:54:54.0000] <zenparsing>
Hixie_ problem is, the module dep graph can't be constructed ahead of time

[10:54:57.0000] <Hixie_>
but you still need a tree somewhere to manage which dependencies you've downloaded.

[10:55:13.0000] <jorendorff>
why?

[10:55:36.0000] <Hixie_>
well e.g. so you know which you still have to download, and which to deprioritise, when you're told that a subbranch is to execute

[10:55:48.0000] <jorendorff>
I don't understand that

[10:56:06.0000] <Hixie_>
say that A1 depends on A2 and B1 depends on B2.

[10:56:38.0000] <Hixie_>
you've discovered this. so now you have to have at minimum a list A1, A2, B1, B2, so you can walk down your list and download these files.

[10:57:05.0000] <Hixie_>
now, you've downloaded A1, which it turns out is big, and suddenly you're told "Run B1!"

[10:57:20.0000] <Hixie_>
you need to know that that means you need to immediately get B1 *and B2*, and *not* get A2.

[10:57:30.0000] <Hixie_>
that means you need a tree

[10:59:16.0000] <jorendorff>
Hmm. This scenario assumes a lot about the application's needs and architecture.

[10:59:38.0000] <Hixie_>
what does it assume?

[10:59:50.0000] <Hixie_>
it matches a bunch of the use cases people have brought up on the whatwg list over the years

[11:01:03.0000] <jorendorff>
For example, it assumes that the application wants to achieve performance by downloading all the scripts in separate requests, on demand, rather than bundle and preload

[11:01:27.0000] <Hixie_>
just assume that A1, A2, B1, and B2 are all really large bundles of images, stylesheets, and scripts, if you prefer

[11:03:57.0000] <jorendorff>
But if you have a system with four "really large" components, the cost of a small additional library to customize your loader is relatively small.

[11:04:10.0000] <jorendorff>
These systems definitely exist, I don't dispute that

[11:04:25.0000] <jorendorff>
but they're all different

[11:05:10.0000] <Hixie_>
we could just have people write libraries to write their own loader without having an ES6 loader too

[11:05:18.0000] <Hixie_>
i mean, the ES6 loader doesn't really add anything you can't do in ES5

[11:05:44.0000] <Hixie_>
as demonstrated by all the loaders that already exist :-)

[11:05:48.0000] <jorendorff>
quite

[11:07:08.0000] <Hixie_>
in practice, people have lots of bundles, and the browser is in a better place to handle it than author script

[11:07:37.0000] <jorendorff>
something the Loader doesn't have at all is bundles. dependencies are among modules (only).

[11:07:59.0000] <jorendorff>
it also doesn't have any way to prioritize one load over another

[11:08:06.0000] <Hixie_>
sure, the bundling would happen at the ServiceWorker level or HTTP2 level

[11:08:07.0000] <jorendorff>
or delay a load from proceeding to execution

[11:08:24.0000] <Hixie_>
I expect the prioritisation is something that I'll be exposing as part of this work

[11:09:11.0000] <jorendorff>
in fact loader.[[Loads]] isn't exposed at all right now, stuff is only exposed after linkage finishes

[11:09:23.0000] <jorendorff>
yeah

[11:09:39.0000] <Hixie_>
i expect we'll expose loader.[[Loads]] in some way eventually

[11:09:52.0000] <jorendorff>
probabl

[11:09:52.0000] <Hixie_>
if nothing else, to allow scripts to manipulate the HTTP2 priorities

[11:11:16.0000] <Hixie_>
TabAtkins: so as part of this i'm probably going to have to hook into @import handling

[11:11:26.0000] <Hixie_>
TabAtkins: are you the right person for me to chat to about that?

[11:11:46.0000] <TabAtkins>
No, but I'm probably the most right person you'll find.

[11:11:53.0000] <Hixie_>
heh, i know that feeling

[11:11:56.0000] <Hixie_>
wanna do lunch?

[11:12:06.0000] <Hixie_>
i can be near you in about 20 minutes

[11:13:51.0000] <annevk>
could see "map/" loading "map/index.js"

[11:14:34.0000] <zenparsing>
annevk or "map/" => "map/main.js"

[11:15:04.0000] <zenparsing>
"index" has precedence in Node, but is still kinda weird as a descriptive word : )

[11:15:20.0000] <annevk>
fetching / on a server typically looks for a index.* file

[11:15:25.0000] <annevk>
unless you overwrite that

[11:15:40.0000] <zenparsing>
true

[11:15:41.0000] <annevk>
but then the whole not using URLs thing here is kind of surprising so I don't really know

[11:15:49.0000] <Hixie_>
yeah one of the things i suggested on es-discuss was default.js

[11:17:33.0000] <zenparsing>
one reason for choosing something other than "index.js":  on Node index.js the the default for old-style modules...

[11:17:55.0000] <zenparsing>
if you have something different for ES6 packages, you can support both ways of loading (old and new) at the same time

[11:17:57.0000] <zenparsing>
maybe : )

[11:22:54.0000] <TabAtkins>
Hixie_: Yeah, sure.

[11:23:31.0000] <Hixie_>
k, i'll be there in a bit.

[12:25:31.0000] <GPHemsley>
Hixie_: Is it the same thread that I said I'd want Anne's comments on?

[12:25:38.0000] <Hixie_>
dunno

[12:33:28.0000] <GPHemsley>
Hixie_: If it's from a few weeks ago, then it probably is.

[12:33:52.0000] <GPHemsley>
I've been travelling and don't have my regular computer, so I can't go through the mail like I normally would.

[12:38:57.0000] <Hixie_>
GPHemsley: np. it's relatively new i think.

[12:39:13.0000] <GPHemsley>
Hixie_: Oh, right, I forgot who I was talking to. :P

[12:39:28.0000] <Hixie_>
well i've been really bad about my e-mail too recently

[12:39:34.0000] <Hixie_>
i've >1000 unread after my filters. :-)

[12:39:52.0000] <GPHemsley>
yeah, that's what I mean ;)

[12:52:45.0000] <annevk>
GPHemsley: same thread, yes

[12:53:00.0000] <annevk>
GPHemsley: I did reply to some bits based on your advice

[12:55:27.0000] <GPHemsley>
annevk: Ah, OK. I haven't had a chance to read it yet.

[13:11:58.0000] <Hixie_>
so, i need three terms. 1. a method that says "apply yourself / execute yourself", e.g. that causes a style sheet to begin applying, a script to run, an HTML import to be imported and applied.

[13:12:20.0000] <Hixie_>
2. an attribute that returns a promise that is resolved once the thing has applied/executed/imported/whatever

[13:12:48.0000] <Hixie_>
3. an attribute that returns a promise that is resolved once all the resources to do #1 near-instantaneously are available

[13:13:11.0000] <Hixie_>
also possibly a fourth, something that forces a preload. but it's not clear if i really need that.

[13:14:45.0000] <SamB>
what is the usual way of naming attributes that return promises?

[13:15:56.0000] <SamB>
also, yay for single-threaded-forever APIS

[13:18:59.0000] <Hixie_>
so i don't think there's a usual way yet

[13:19:12.0000] <Hixie_>
TabAtkins: any opinions on the above?

[13:19:33.0000] <Hixie_>
right now i'm thinking execute(), .loaded, .ready, and .prefetch() but those suck

[13:19:52.0000] <Hixie_>
i don't like loaded cos it's so generic

[13:20:03.0000] <Hixie_>
but i guess it matches onload

[13:20:13.0000] <Hixie_>
so maybe load(), .loaded, .ready, and .prefetch()

[13:20:36.0000] <TabAtkins>
Seems fairly reasonable.

[13:21:39.0000] <SamB>
is load() going to fit the next time you want to reuse this interface?

[13:22:18.0000] <Hixie_>
how do you mean?

[13:23:03.0000] <SamB>
also, I can't help but think that .loaded and .ready sound like names for flags or perhaps timestamps/logs

[13:24:35.0000] <Domenic>
nah you'd use isReady for those... maybe

[13:26:19.0000] <SamB>
anyway, shouldn't there be a naming convention for promises?

[13:27:04.0000] <Domenic>
nah, we don't need hungarian notation, because our language is strongly-typed enough that you can just hover over the variable name in the IDE and see its type

[13:27:08.0000] <Domenic>
(trololol)

[13:27:20.0000] <SamB>
;-P

[13:27:25.0000] <SamB>
nice try

[13:29:33.0000] <SamB>
doesn't even *Haskell* have a few naming conventions that give a clue about type?

[13:32:38.0000] <SamB>
and there's a piece or two of hungarian notation that I actually find useful: m_ for members, maybe h for handles ...

[13:33:53.0000] <SamB>
(though m_ is really only useful in those languages where member access can look the same as a reference to a global name)

[13:36:47.0000] <SamB>
Domenic: what do you think of scheme's "?" convention for predicates?

[13:37:00.0000] <Domenic>
I don't really have any opinions on it one way or the other

[13:43:18.0000] <TabAtkins>
SamB: Incompatible with JS's naming conventions.

[13:43:24.0000] <TabAtkins>
Not conventions, syntax.

[13:43:35.0000] <SamB>
I realize it's not possible to use that in JS

[13:46:43.0000] <SamB>
not that something would be wise just because it was possible; I mean, I don't even know for sure if you can do that in emacs lisp, but anyone who tried it would probably be tarred and feathered if they weren't actually doing something scheme-related ...

[13:53:48.0000] <TabAtkins>
Unless elisp is crazier than I think, you can definitely do it.

[13:53:56.0000] <TabAtkins>
Lisp's naming rules are *extremely* loose.

[13:55:47.0000] <SamB>
Yeah, the fact that I don't know is probably more an indication of how little desire there is to use such names in elisp than anything.  (Or of how bad my memory is.)

[13:56:59.0000] <SamB>
Also note that I mean w/o escaping; I believe you can have any character in an elisp symbol name if you escape it properly ...

[14:00:25.0000] <SamB>
where "any character" most likely includes a great deal more possible codepoints than Unicode actually allows (even if I only know of 128 extra codepoints that anyone actually *uses* for anything)

[14:09:04.0000] <TabAtkins>
Without escaping, you can pretty much any character but space, (), and the handful of chars claimed by reader macros (single and double quote, backtick, comma, hash).

[14:10:03.0000] <Hixie_>
i think you a verb.

[14:10:06.0000] <SamB>
except AFAIK, elisp hasn't reader macros, so they're really just handled specially by the reader

[14:14:00.0000] <Hixie_>
  import styles from "foo.html#foo";

[14:14:02.0000] <Hixie_>
what should that do?

[14:14:11.0000] <Hixie_>
import the HTML import and ignore the #foo?

[14:14:18.0000] <Hixie_>
should the #foo be in the name passed to the registry?

[14:14:22.0000] <Hixie_>
should it throw?

[14:17:18.0000] <TabAtkins>
Hixie_: Is that assuming that the <link rel=import id=foo> has some lazyloading attribute set on it?

[14:17:44.0000] <Hixie_>
it's assuming no <link rel=import> at all

[14:18:01.0000] <Hixie_>
though it's interesting to wonder how it would differ if you did have one, true

[14:18:14.0000] <TabAtkins>
Oh! It's paying attention to the .html on the filename and assuming it's an HTML Import?

[14:22:02.0000] <Hixie_>
i was expecting to base it on the returned MIME type

[14:22:16.0000] <Hixie_>
but that's not really the part of this i was worried about in asking my question :-)

[14:24:38.0000] <SamB>
Hixie_: perhaps it should just be like "um, dunno what that fragment is for" in the log ;-P

[14:24:50.0000] <SamB>
and end up doing nothing

[14:25:38.0000] <TabAtkins>
Hixie_: I'm just gathering context - you didn't supply much in your question. ^_^

[14:25:59.0000] <TabAtkins>
Okay, so, through some mechanism you know the import is an HTML page.

[14:26:13.0000] <TabAtkins>
And you've got a hash into the page.

[14:27:37.0000] <TabAtkins>
I think you should either (a) ignore the hash, and just import the HTML, or (b) import the HTML, keyed to the hashless URL, then look into the imported document, and if there's an element with id=foo that defines something importable, import *that*, and return it.

[14:27:58.0000] <TabAtkins>
I guess key it to both the hashed url and, if it lives on another url in the page, that url as well.

[14:28:15.0000] <Hixie_>
yeah ES6 modules don't support that at all

[14:28:25.0000] <Hixie_>
noramlize returns one url

[14:28:27.0000] <Hixie_>
that's all you get :-)

[14:28:32.0000] <Hixie_>
not even a url in fact

[14:28:37.0000] <Hixie_>
a "name"

[14:28:37.0000] <TabAtkins>
Really?  Python modules do.  You can nest modules and seek into them with an import statement.

[14:29:02.0000] <Hixie_>
not sure what that means

[14:29:04.0000] <Hixie_>
nest modules?

[14:29:27.0000] <TabAtkins>
A python module can contain submodules.  Something importing the top-level module can also explicitly import the submodules.

[14:29:38.0000] <TabAtkins>
import foo.bar as bar, or whatever.

[14:30:13.0000] <TabAtkins>
`from foo import bar`, imports the "bar" module inside of the "foo" module.

[14:30:31.0000] <TabAtkins>
Or `from foo.bar import baz`, imports "baz" from inside "bar" from inside "foo".

[14:31:30.0000] <Hixie_>
yeah there's no submodules in ES6

[14:31:38.0000] <Hixie_>
there's explicit and default imports

[14:31:45.0000] <Hixie_>
or exports, i guess

[14:31:48.0000] <TabAtkins>
Hrm.

[14:32:04.0000] <TabAtkins>
Well, all the web stuff you're dealing with is basically nested modules.

[14:42:40.0000] <TabAtkins>
Hixie_: Oh, note thought that Python nested modules *are* imported by default if you do just the top-level one.

[14:43:01.0000] <TabAtkins>
If you've got the nesting structure foo->bar->baz, like I had above, and you want to get at a qux() method in the baz module:

[14:43:44.0000] <TabAtkins>
`import foo; foo.bar.baz.qux()` or `from foo.bar.baz import qux; qux()` are equivalent.

[14:44:45.0000] <Hixie_>
how are these submodules themselves authored?

[14:44:48.0000] <Hixie_>
(just out of interest)

[14:44:58.0000] <TabAtkins>
Just nested folders, basically.

[14:46:13.0000] <TabAtkins>
A python module is just a folder. I think a __init__.py file is needed in the folder?  I'm not totally sure.

[14:48:03.0000] <Hixie_>
oh!

[14:48:09.0000] <Hixie_>
i thought you meant an actual module file

[14:48:26.0000] <TabAtkins>
?

[14:49:23.0000] <Hixie_>
like, foo.py containing two modules

[14:49:35.0000] <Hixie_>
if you just meant different files, then sure, ES6 does that

[14:49:56.0000] <TabAtkins>
Ah, nah, can't do that.  But the foo folder that defines the "foo" module can contain subfolders that are submodules.

[14:50:20.0000] <TabAtkins>
But yeah, web tech can indeed nest multiple "modules" in one file.

[14:50:54.0000] <Hixie_>
html can, yeah

[14:50:57.0000] <Hixie_>
es6 itself can't

[14:51:01.0000] <TabAtkins>
Right.

[14:51:13.0000] <Hixie_>
though that's an interesting point

[14:51:16.0000] <TabAtkins>
So you're gonna need to have them extend the system if you want to use it for this stuff.

[14:51:24.0000] <Hixie_>
if you have an html import with <script type=module id=a>

[14:51:39.0000] <Hixie_>
how can another import (or the main doc) import that module?

[14:51:45.0000] <Hixie_>
i guess we need to import foo.html#a

[14:51:50.0000] <Hixie_>
ugh

[14:51:55.0000] <Hixie_>
what a mess

[14:51:58.0000] <TabAtkins>
But this syntax doesn't nest further. :/

[14:52:12.0000] <Hixie_>
why would you need to nest further?

[14:52:19.0000] <TabAtkins>
foo.html#a#b (to get the <script type=module id=b> inside the <link rel=import id=a>)

[14:52:35.0000] <Hixie_>
rel=import imports into the outermost doc

[14:52:39.0000] <Hixie_>
so you'd just do bar.html#b

[14:52:44.0000] <TabAtkins>
Ah, kk.

[14:53:00.0000] <TabAtkins>
And CSS imports aren't individually addressable in any way, so they don't need to worry about anything.

[15:00:25.0000] <TabAtkins>
Hixie_: Hm, no, still a problem.  HTML imports import into the outermost doc, but that doesn't mean anything for their IDs, which are still scoped to their immediate containing doc.

[15:00:44.0000] <TabAtkins>
You can have a list of subimports that all contain a script module with the same id.

[15:02:42.0000] <Hixie_>
yeah but they'd have different filenames

[15:03:55.0000] <TabAtkins>
I mean that foo.html is an import, which contains three more imports with ids #a, #b, and #c, each of which contains a script module with id #d.

[15:04:38.0000] <TabAtkins>
`import foo.html#a` will return the first nested import, but how do you get at the module?  Can't use `import foo.html#d`, since there are three of them with that id in the graph.

[15:08:33.0000] <Hixie_>
the IDs of the subimports are irrelevant

[15:08:42.0000] <Hixie_>
it's their URLs that matter

[15:08:50.0000] <Hixie_>
if #a is bar.html, then you do bar.html#d

[15:09:31.0000] <Hixie_>
(the question, which i just mailed to es-d, is what happens if you do this before bar.html has been imported)

[15:41:41.0000] <zewt_>
ffff javascript in non-browsers

[15:42:03.0000] <zewt>
aftereffects javascript missing such esoteric things as Array.indexOf

[15:45:27.0000] <zewt>
https://gist.github.com/atk/1034425 is this guy making fun of me for having to polyfill indexOf by obfuscating his code; this is idiotic

[15:53:11.0000] <zewt>
jesus christ: the slightly less obfuscated one is totally broken, only the fully-badly-obfuscated one below it works

[15:57:35.0000] <Hixie_>
how hard can indexOf possibly be to shim

[16:01:47.0000] <zewt>
i figured it would be faster to google and copy and paste, but clearly i was wrong

[16:01:51.0000] <zewt>
ended up just doing it myself

[16:02:42.0000] <zewt>
it's bizarre that this environment has [].join, but not [].indexOf

[16:04:50.0000] <caitp>
yeah and where is String.prototype.tok, right?

[16:05:06.0000] <caitp>
...nobody wants strtok? ._.


2014-08-16
[23:22:32.0000] <annevk>
From the people that will save us from non-idiomatic JS: https://github.com/slightlyoff/ServiceWorker/issues/417 :P

[12:16:41.0000] <smaug____>
does anyone happen to know if there is some option in Google to not stay logged in ?


2014-08-17
[22:15:28.0000] <roc>
ok, whoever posted that w3c meme about the Westboro Baptist Church, that was low.

[22:16:44.0000] <SamB>
roc: is there any meme related to the Westboro Baptist Church that isn't?

[22:32:59.0000] <tantek>
/me catches up on w3c memes

[07:08:04.0000] <zewt>
does github just not test their site in firefox or is it a windows/mac thing or something, they use unicode characters all over the place that it doesn't render

[07:08:26.0000] <zewt>
replacement glyphs all over the place

[07:09:29.0000] <kbrosnan>
adblock or noscript can and often block external fonts resulting in the fallback glyphs

[09:36:42.0000] <zewt>
using fonts for icons? bad idea, firefox lets you disable site fonts right in the options menu (so you don't have to squint to read every unreadable font some artist thought looked cool)

[09:39:24.0000] <astearns>
zewt: so use ligatures for icons - if the font doesn't load, you get 'menu' instead of the icon :)

[10:07:56.0000] <SamB>
astearns: hah

[14:37:09.0000] <jgraham>
astearns: Be careful what you wish for, if people start doing that, the web might start to work much better with web fonts disabled

[14:41:55.0000] <odinho>
Wouldn't want that, now would we?

[14:43:25.0000] <SamB>
yeah, wanting the web to work better, that's crazy

[14:53:45.0000] <jgraham>
I imagine adobe would be annoyed if people started disabling web fonts ;)

[14:54:03.0000] <SamB>
and your point is?

[14:55:03.0000] <jgraham>
Well I guess it depends how well astearns' opinions match his employers'

[15:51:22.0000] <roc>
zewt: got an example of that github unicode character issue?

[15:51:25.0000] <roc>
I haven't seen it

[16:21:25.0000] <zewt>
https://zewt.org/~glenn/github.png

[16:21:34.0000] <zewt>
happens if "allow pages to choose their own fonts" is unchecked in firefox

[16:26:35.0000] <SamB>
also happens if you use noscript, no?

[16:26:51.0000] <zewt>
no idea

[16:27:21.0000] <zewt>
wouldn't make sense, but noscript doesn't make much sense anyway unless you have to deal with really abusive sites

[16:28:13.0000] <SamB>
eh, it's a good way to check for graceful degradation ;-P

[16:28:24.0000] <SamB>
/progressive enhancement


2014-08-18
[17:12:25.0000] <admin_000>
news

[19:07:43.0000] <roc>
zewt: ah, right. Yeah, they're using icon fonts.

[19:08:36.0000] <roc>
I think we should probably allow pages to specify fonts for PUA characters even when "allow pages to choose their own fonts" is unchecked.

[19:08:56.0000] <roc>
I'll file a bug

[19:11:52.0000] <SamB>
these aren't the droids you're looking for!

[19:12:31.0000] <roc>
https://bugzilla.mozilla.org/show_bug.cgi?id=1054817

[19:13:13.0000] <SamB>
where is the "disvote" option

[19:18:56.0000] <astearns>
makes sense to me. there's no point (almost by definition) in rendering PUA characters in a different font

[19:20:43.0000] <SamB>
there are those of us who would prefer to be aware of the meaningless codepoints we are being subjected to, however ...

[19:23:06.0000] <roc>
all five of you

[19:23:07.0000] <SamB>
roc, astearns: also, it would introduce a perverse insentive to use meaningless codepoints when meaningful codepoints exist

[19:23:33.0000] <astearns>
/me wonders where in the priority of constituencies people concerned with codepoints lies

[19:25:07.0000] <astearns>
SamB: I don't find PUA codepoints perverse, so in my mind author intent trumps your particular use case

[19:25:53.0000] <astearns>
I do see the utility in users choosing their own fonts, when they want

[19:26:08.0000] <astearns>
but when their fonts are almost guaranteed not to have anything useful to display...

[19:26:09.0000] <SamB>
astearns: you don't think it's dumb to use a meaningless PUA codepoint when there's a perfectly good non-PUA codepoint for the symbol in question?

[19:26:54.0000] <astearns>
depends on when there is an alternative. for the icon case we were discussing, my guess is that there often is not an alternative

[19:27:16.0000] <SamB>
using SVG with a reasonable filename would honestly be more accessible ...

[19:27:48.0000] <SamB>
(or a ligature trick)

[19:29:17.0000] <astearns>
I agree - and using an agreed-upon codepoint is preferable to making up your own

[19:29:22.0000] <SamB>
some browsers just can't render webfonts

[19:29:57.0000] <astearns>
and some browsers don't run script

[19:30:00.0000] <SamB>
yeah

[19:30:03.0000] <SamB>
I know

[19:30:13.0000] <astearns>
hopefully both of those situations will get less and less relevant

[19:30:44.0000] <SamB>
also screenreaders will NEVER know WTF those PUA codepoints are supposed to be

[19:54:13.0000] <roc>
yeah, but a screenreader can't make sense of a PNG icon either.

[19:55:55.0000] <caitp->
a braille display could

[20:03:14.0000] <SamB>
roc: it could read the filename out, though!

[20:04:52.0000] <roc>
a braille display can render the glyphs for unknown Unicode codepoints too :-)

[20:05:14.0000] <roc>
SamB: what if it's a data URL? hate to read that out :-)

[20:05:26.0000] <SamB>
roc: well don't do that then!

[20:05:40.0000] <SamB>
of course, github clearly don't CARE

[23:46:05.0000] <MikeSmith>
surprised there so far hasn't been much discussion anywhere about the technical claims the blink team has been with regard to pointer events vs touch events

[23:46:21.0000] <MikeSmith>
except for smaug's reply

[23:46:34.0000] <MikeSmith>
http://lists.w3.org/Archives/Public/public-pointer-events/2014JulSep/0052.html

[01:19:20.0000] <annevk>
prolly because this was all already sorted behind the scenes

[01:25:01.0000] <MikeSmith>
annevk: ah

[01:25:26.0000] <MikeSmith>
open and transparency ftw

[01:26:41.0000] <annevk>
I don't really know MikeSmith

[01:27:20.0000] <annevk>
I don't know enough about UI events and even less about touch specifically

[01:27:34.0000] <MikeSmith>
yeah me neither

[01:27:53.0000] <annevk>
But given that touch is mostly for mobile and that's mostly Google/Apple, and pointer events never had buy-in from Apple, ...

[01:28:04.0000] <MikeSmith>
right

[01:28:23.0000] <annevk>
It would work if Apple was doing nothing like Microsoft did with IE6

[01:29:03.0000] <MikeSmith>
well it seems like for Windows 8 Microsoft has bought into touch

[01:29:14.0000] <MikeSmith>
even for their desktop OS

[01:29:28.0000] <MikeSmith>
which they have still quite a lot of market share for

[01:29:41.0000] <MikeSmith>
so it's kinda not just about mobile

[01:30:14.0000] <MikeSmith>
though I guess it's unclear how successful they've been so far with bringing touch to desktop

[01:31:31.0000] <annevk>
The only user I know is Domenic

[01:31:34.0000] <othermaciej>
there’s quite a few touchscreen windows laptops

[01:31:42.0000] <othermaciej>
I dunno if anyone actually uses the touch capabilities

[01:31:59.0000] <annevk>
Yeah, not sure if he uses the touch screen either, he has a keyboard attached

[01:35:15.0000] <MikeSmith>
in my limited experience using Windows 8 on a laptop it works a lot better if you use touch instead of trying to use the mouse/pointer

[01:35:39.0000] <MikeSmith>
it's kind of like, when you're using the pointer, you feel like you're emulating touch actions

[01:38:43.0000] <smaug____>
oh, this pointer events stuff

[01:39:38.0000] <othermaciej>
I think Google is right that there’s a difference between mouse and touch UIs that pointer events handle badly

[01:40:20.0000] <smaug____>
blink is happy to say no pointer events, and one reasoning is that webkit doesn't support them, yet they are happy to implement a lot more complicate stuff, which slows down various things and not supported by webkit, web components

[01:40:38.0000] <othermaciej>
specifically, on touch UI platforms, touches are always captured based on what you touch first - there’s no such thing as swiping your finger across a row of controls and getting their hover effects

[01:41:10.0000] <smaug____>
othermaciej: pointer events can handle that

[01:41:13.0000] <othermaciej>
that makes all the leave/in/out machinery and the rule of targeting based on hit testing useless or perhaps even harmful

[01:41:18.0000] <smaug____>
similar way as touch events

[01:41:19.0000] <othermaciej>
they do have the capture mode

[01:41:39.0000] <smaug____>
and pointer events don't have the odd touchList stuff

[01:41:50.0000] <smaug____>
if one needs touch lists, that can be done within the web app

[01:42:19.0000] <smaug____>
anyhow, I think pointer events are pretty much dead now

[01:42:34.0000] <othermaciej>
who knows? Google might change their mind again

[01:42:53.0000] <smaug____>
that is possible

[01:42:57.0000] <othermaciej>
their implementation decisions seem kind of mysterious to me

[01:43:03.0000] <smaug____>
I'm not going to remove pointer events support from Gecko any time soon

[01:43:40.0000] <annevk>
othermaciej: yeah, with Apple it's always clearcut

[01:43:43.0000] <annevk>
;)

[01:44:10.0000] <othermaciej>
usually our pattern is we don’t say anything (or actively say no), then we ship it

[01:44:39.0000] <smaug____>
s/anyhow, I think pointer events are pretty much dead now/anyhow, I think pointer events are pretty much dead for now/

[01:45:21.0000] <jgraham>
I'm pretty sure my Mum would use a tocuhscrren laptop, based on the fact she kept trying to touch things on the screen of my laptop last time she used it. I'm not sure why; I think she just uses a tablet so much that she now assumes all devices work in the same way

[01:45:47.0000] <othermaciej>
how do pointer events handle multi-touch?

[01:45:54.0000] <othermaciej>
separate event for each touch?

[01:45:59.0000] <smaug____>
right

[01:46:28.0000] <MikeSmith>
othermaciej: I would think that hover could be implemented in touch environments that also had relatively finer-grained proximity-sensor support. My Galaxy S4 has that sort of proximity sensor and some parts of the UI already use it to produce effects on hover -- e.g., you can actually hover over a row of controls and it gives you the hover effects you'd expect

[01:48:03.0000] <othermaciej>
I can’t remember the whole reason for the TouchList thing, but I think it was invented so you could implement gestures involving multiple touches without having to keep a lot of state to know what was happening with the active touch points

[01:48:23.0000] <MikeSmith>
jgraham: I would think touchscreen laptops are way more intuitive for first-time computer users -- or for anybody already used to a mobile phone with a touchscreen

[01:48:29.0000] <othermaciej>
whether it helps with that, I don’t know

[01:48:41.0000] <othermaciej>
it doesn’t seem like bespoke multitouch gestures has turned out to be much of a thing

[01:49:10.0000] <smaug____>
indeed

[01:49:12.0000] <annevk>
foolip: you around?

[01:49:28.0000] <othermaciej>
it does at least let you avoid accidentally treating an extra touch with fingers already down as an independent tap that activates something

[01:49:39.0000] <annevk>
foolip: I think I'll make Attr.prototype.value readonly for now in the specification and open a bug about what we should do if that cannot be implemented

[01:50:12.0000] <annevk>
foolip: if that cannot be done we can basically do the thing where Attr objects can be added to objects and Attr objects can be created, etc. and have an ownerElement

[01:51:41.0000] <smaug____>
pointer events have the concept of primary pointer

[02:06:38.0000] <jgraham>
MikeSmith: Yeah. In this case she's familiar with the concept of non-touch-screen devices but just assumed that any new device is touch-capable. However there are an increasing number of people who have never used a non-touch device.

[02:11:16.0000] <zcorpan>
/me recalls a video of a 2-year old concluding that the paper magazine is broken because it doesn't respond to touch

[02:17:40.0000] <zcorpan>
https://www.youtube.com/watch?v=aXV-yaFmQNk

[02:18:37.0000] <zcorpan>
1 year old

[04:28:12.0000] <foolip>
annevk: here!

[04:28:21.0000] <annevk>
yay

[04:28:25.0000] <annevk>
foolip: see bugmail :-)

[04:28:31.0000] <foolip>
will do

[04:28:44.0000] <foolip>
also, we have a fullscreen issue here

[04:29:02.0000] <foolip>
things get weird when you have display:none on a parent of the fullscreen element

[04:29:18.0000] <foolip>
the spec says "It is not rendered if it, or an ancestor, has the display property set to none." and that's pretty much what happens

[04:30:01.0000] <foolip>
the consequence on a site we've been debugging is that one is left in fullscreen even though the fullscreen content isn't showing any longer

[04:30:32.0000] <foolip>
don't know how to fix it, so I wanted to ask if there's a great reason why things in the top layer don't ignore display:none on their parents?

[04:32:13.0000] <annevk>
that would be a first in CSS

[04:32:25.0000] <foolip>
yeah, I suspected as much

[04:32:33.0000] <annevk>
and on the face of it seems like it might destroy a bunch of optimizations in the CSS engine

[04:32:57.0000] <foolip>
and exiting fullscreen would require reacting to changes in computed style

[04:34:33.0000] <annevk>
i guess at some point we might get a computed style observer thingie that would make that possible

[04:35:22.0000] <foolip>
wild idea: an extra backdrop which you can't make transparent that ends up below the ::backdrop pseudo elements, so that you can never see anything other than the :fullscreen element and its children?

[04:36:07.0000] <annevk>
seems like that is something we want to be able to show though

[04:37:14.0000] <foolip>
right now you can fullscreen some random element and set it to display:none, and it looks like you've entered fullscreen for documentElement or document.body, it's pretty weird

[04:37:52.0000] <foolip>
but it also only seems to happen when the site has done something strange (in this case didn't consider that it might be in fullscreen even though it had a fullscreen button)

[04:39:53.0000] <foolip>
are there use cases for doing that kind of thing, or is it just consequence of keeping things simple?

[04:40:59.0000] <annevk>
keeping things simple I guess

[04:41:06.0000] <annevk>
e.g. :root { display:none } is possible too

[04:43:05.0000] <foolip>
yeah

[04:43:48.0000] <foolip>
we'll try to get the site fixed and see if the problem keeps coming up

[04:44:13.0000] <foolip>
to the bugmail

[05:29:50.0000] <annevk>
foolip: :-(

[05:30:32.0000] <annevk>
So what remains? Attributes can't have child nodes

[05:30:45.0000] <annevk>
And they are not nodes, although whether that matters much is up for debate now

[05:32:29.0000] <foolip>
annevk: yeah, getting rid of the child nodes is the only remaining simplification I'm aware of

[05:32:41.0000] <foolip>
there's a relevant use counter for that, let me find it

[05:33:10.0000] <foolip>
Attr.textContent: http://www.chromestatus.com/metrics/feature/timeline/popularity/349

[05:33:13.0000] <annevk>
Attributes not being nodes also simplifies some stuff as other algorithms don't have to deal with the fact of being passed an Attr node

[05:33:41.0000] <foolip>
so textContent would have to be made an alias at the very leat

[05:33:43.0000] <annevk>
foolip: we could support that as an alias to .value

[05:33:47.0000] <annevk>
seems like it

[05:33:55.0000] <foolip>
not sure how to effectively measure if child nodes themselves are needed

[05:34:04.0000] <annevk>
does Chrome even support that?

[05:34:18.0000] <annevk>
that means attr.appendChild(text) is supported

[05:34:48.0000] <foolip>
modifying child elements causes the attribute value to be updated last I checked

[05:34:53.0000] <foolip>
it's really weird :)

[05:35:27.0000] <annevk>
oh, some weird hack?

[05:35:30.0000] <annevk>
hmm

[05:35:38.0000] <annevk>
and going through childNodes?

[05:35:47.0000] <annevk>
I guess I can check myself

[05:36:14.0000] <foolip>
Attr::childrenChanged in Source/core/dom/Attr.cpp

[05:36:33.0000] <foolip>
not so crazy implementation-wise, but it's a crazy API for changing attributes

[05:36:42.0000] <foolip>
I guess you knew that

[05:37:52.0000] <foolip>
I guess as a start one could measure in Attr::childrenChanged, but getting rid of only that while still keeping the child nodes doesn't seem great

[05:37:54.0000] <zcorpan>
annevk: did you switch away from anolis?

[05:56:04.0000] <zcorpan>
maybe we need an Exif5 spec

[06:05:49.0000] <annevk>
zcorpan: no

[06:05:59.0000] <annevk>
TabAtkins: I started updating DOM again btw

[06:06:03.0000] <zcorpan>
annevk: ok

[06:06:13.0000] <annevk>
TabAtkins: since you never pinged back on switch to Bikeshed

[06:08:30.0000] <annevk>
zcorpan: I do plan on switching to what TabAtkins made as it seems better maintained

[06:08:48.0000] <annevk>
zcorpan: I have not made the time however and I think there's a few things it does differently at the moment that make switching harder

[06:41:15.0000] <annevk>
foolip: I think I'll try to leave out some of the *NS methods as they just don't seem used and do actually make things more complicated

[06:51:12.0000] <foolip>
annevk: they do? which ones?

[06:51:41.0000] <annevk>
foolip: setAttributeNodeNS, getAttributeNodeNS, but I guess we could leave those too

[06:51:47.0000] <annevk>
foolip: createAttributeNodeNS

[06:51:54.0000] <annevk>
euh, createAttributeNS()

[06:53:47.0000] <foolip>
I have no love for any of those, but what complexity do they add on top of the non-namespaced variants?

[06:55:39.0000] <annevk>
yeah you're right

[06:55:50.0000] <annevk>
:-( :-(

[06:56:28.0000] <foolip>
there aren't enough sad faces to throw at Attr

[06:56:38.0000] <foolip>
do you know who came up with this API to begin with?

[06:57:00.0000] <foolip>
or is it hidden in a teleconf from 1995?

[07:00:55.0000] <annevk>
the Java guys involved in designing the DOM

[07:01:16.0000] <annevk>
and then they added all the complexity for XML in a nonsensical manner

[07:01:18.0000] <annevk>
so crazy

[07:08:22.0000] <foolip>
web platform is best platform

[07:33:58.0000] <TabAtkins>
annevk: Oh right, sorry.  I'd stopped while we worked out the header/footer situation with Domenic for Streams, and never got back to it.

[07:40:38.0000] <TabAtkins>
smaug____: Re: not staying logged in, use an incognito window?

[07:41:16.0000] <TabAtkins>
smaug____: (You have to stay logged in for *some* period of time just to use multiple pages at once, so you're just asking for the ability to auto-logout after a much shorter period than normal.)

[07:41:34.0000] <smaug____>
TabAtkins: right, private browsing mode should work

[07:42:41.0000] <smaug____>
I'm asking for a mode where I would be logged out automatically after closing top level Google (not search) tabs

[07:42:46.0000] <smaug____>
well, even search

[07:42:58.0000] <smaug____>
because search just doesn't need the account information for anything

[07:43:19.0000] <smaug____>
(except for targeted ads, which are super annoying )

[07:44:14.0000] <TabAtkins>
I don't see how that's possible, actually. Pages can't maintain state like that.

[07:44:47.0000] <TabAtkins>
Without something like storing all state on the server and doing heartbeat pings.

[07:47:16.0000] <annevk>
Isn't that sessionStorage?

[07:48:32.0000] <jgraham>
Or you could use a shared worker

[07:57:49.0000] <annevk>
foolip: you still want to fix bugs in Chrome I think

[07:57:55.0000] <annevk>
foolip: e.g. what it does for var x = document.createAttribute("test:test");w(x.localName) is pretty weird

[07:58:49.0000] <annevk>
foolip: Chrome doesn't throw for document.createAttributeNS("test:test") which is somewhat odd too

[08:02:46.0000] <Domenic>
The great Attr retreat of 2014 :(

[08:04:11.0000] <annevk>
Domenic: haven't given up completely yet, but yeah, we're adding back some complexity to the spec

[08:04:29.0000] <Domenic>
Yeah, was just a sad set of emails to wake up to

[08:12:40.0000] <TabAtkins>
annevk: Hmm, sessionStorage doesn't apply across domains.

[08:12:55.0000] <TabAtkins>
(Also, it's a variant of localStorage, which we don't like.)

[08:13:54.0000] <TabAtkins>
Using a Shared Worker is possible. A lot of complexity for something solved by "use an incognito window", though.

[08:14:08.0000] <boogyman>
TabAtkins: sub domains i could see, but i think there would have security issues if data-storage occurs across domains.

[08:18:01.0000] <TabAtkins>
I meant subdomains too.

[08:29:22.0000] <annevk>
There's issues with "subdomains" too: https://publicsuffix.org/

[08:29:26.0000] <annevk>
Which is why we tie things to origins

[08:29:32.0000] <annevk>
new things, anyway

[08:41:14.0000] <MikeSmith>
oh joy http://lists.w3.org/Archives/Public/semantic-web/2014Aug/0063.html

[08:41:47.0000] <MikeSmith>
ーHTML either misuses or fails to appropriately use the well-defined vocabulary terms of URIs used in all other Web-related standards, including the recent updates of RDF [4] and HTTP [5], and the newly published CoAP [6]. Where I would expect to see terms like "URI Reference" and "IRI", I see only "URL", which in the strictest sense would be incompatible with RDF's IRIs.

[08:42:44.0000] <Domenic>
Hehehehehe

[08:43:55.0000] <TabAtkins>
And then talk about "some legacy pages" being broken in favor of RDF-based apps, as if the numbers were within even a few powers-of-ten of each other.

[08:54:50.0000] <Domenic>
https://twitter.com/mikeal/status/501391405714268161

[09:30:57.0000] <annevk>
MikeSmith: I wonder when they notice we dropped DTDs

[09:31:17.0000] <annevk>
Domenic: that's how we implement ES6 at Mozilla it seems

[09:31:38.0000] <annevk>
(Although we wouldn't call HTML HTML5)

[09:31:54.0000] <Domenic>
Yeah, it's not the most informed tweet, but its heart is in the right place.

[09:34:21.0000] <annevk>
Whenever I make nice cleanup to DOM it's somewhat upsetting all my hard work is just going to be copypasted to /TR/dom/. So far there's been no benefit from this fork...

[09:34:45.0000] <annevk>
Arguably TR/encoding/ had some benefit, although not sure whether it was worth the cost, probably not

[09:36:28.0000] <annevk>
Hixie_: dfn.js seems to sometimes overwrite dfnReturnLink with a link to the chapter

[09:37:54.0000] <Hixie_>
file a bug, i'm off tools work until i get the script stuff done

[09:38:17.0000] <Hixie_>
(i figured i'd spent enough time without progress for a while!)

[09:39:20.0000] <Hixie_>
that semantic-web e-mail is awesome

[09:39:24.0000] <Hixie_>
"though I'm not aware of any such documents"

[09:42:32.0000] <zenparsing>
can/should we try to get these in the 420 branch?

[09:42:42.0000] <zenparsing>
uh - oops

[10:00:04.0000] <Domenic>
What does /TR/encoding give?

[10:05:10.0000] <annevk>
Domenic: got some review from people who otherwise might not have cared

[10:05:23.0000] <annevk>
Domenic: if I'm being optimistic

[10:07:21.0000] <SamB>
annevk: did they add bugs to /TR/dom/ ?

[10:09:08.0000] <annevk>
mostly confusion, perhaps some subsetting, not sure

[10:39:37.0000] <Hixie_>
huh

[10:39:45.0000] <Hixie_>
ES6 module loader doesn't support incremental loading, either

[10:39:50.0000] <Hixie_>
which means it won't work for HTML imports

[10:41:21.0000] <annevk>
Ah yeah, just a promise...

[10:41:38.0000] <annevk>
That is kind of sad

[10:43:37.0000] <Hixie_>
i suppose I can make 'fetch' return straight away for html imports

[10:43:51.0000] <Hixie_>
but i can't incrementally add dependencies then

[10:44:29.0000] <annevk>
Hixie_: is any browser vendor interested in reconciling all these systems btw?

[10:44:50.0000] <annevk>
Hixie_: I haven't seen many emails from implementers in these threads :/

[10:45:38.0000] <Hixie_>
are there are browser vendors interested in implementing two separate dependency systems?

[10:49:22.0000] <Hixie_>
actually i guess it's ok

[10:49:35.0000] <Hixie_>
it doesn't need to return straight away

[10:49:42.0000] <Hixie_>
it can just create it incrementally in "fetch"

[10:50:12.0000] <Hixie_>
"translate" would and "instantiate" would be no-ops

[10:50:20.0000] <Hixie_>
this assumes we can add dependencies on the fly, of course

[11:20:53.0000] <Hixie_>
TabAtkins: CSS doesn't parse incrementally, right?

[11:20:59.0000] <Hixie_>
at least, not visibly

[11:21:01.0000] <TabAtkins>
Right.

[11:21:03.0000] <Hixie_>
k

[11:21:08.0000] <TabAtkins>
Well...

[11:21:37.0000] <Hixie_>
uh oh

[11:21:38.0000] <TabAtkins>
Actually, not sure.  Some impls *might* start applying rules as they come off the wire.

[11:21:52.0000] <Hixie_>
wait, applying rules incrementally?

[11:22:00.0000] <Hixie_>
i just meant parsing exposed to the dom

[11:22:14.0000] <TabAtkins>
Oh, no, definitely not.  Stylesheet is all or nothing.

[11:22:16.0000] <Hixie_>
applying rules incrementally seems rather ungood

[11:22:18.0000] <Hixie_>
ok good

[11:23:19.0000] <TabAtkins>
Hixie_: Merging all the thread responses together really did make it impossible to follow.

[11:23:49.0000] <TabAtkins>
That's fine to do when you're responding to a collection of independent months-old things, but not when you're replying to your own threads that are currently active.

[11:23:55.0000] <TabAtkins>
Totally breaks threading. :/

[11:24:40.0000] <Hixie_>
yeah, seems that way

[11:24:57.0000] <Hixie_>
the list seems to the throttling me though

[11:25:05.0000] <TabAtkins>
Weird.

[11:25:08.0000] <Hixie_>
there's at least two e-mails i've sent that haven't made it to the list

[11:26:25.0000] <Domenic>
+1 to TabAtkins's feedback on not breaking threading

[11:34:59.0000] <Hixie_>
and now i'm not receiving jjb's responses either

[11:35:06.0000] <Hixie_>
i see them on http://esdiscuss.org/1

[11:35:17.0000] <Hixie_>
waah, the list software doesn't like me!

[11:43:32.0000] <Hixie_>
So.....

[11:43:36.0000] <Hixie_>
Domenic: promise question

[11:43:58.0000] <Hixie_>
Domenic: say you have promises #1 through #5, and you want to wait for all of them to be done before continuing

[11:44:10.0000] <Hixie_>
Domenic: you can just make a new promise that's the "all" of those five promises, right?

[11:44:19.0000] <Domenic>
Hixie_: yes exactly

[11:44:42.0000] <Hixie_>
Domenic: ok. Now what if you later discover that actually #3 isn't needed, so you just want to depend on #1, #2, #4, and #5. Also, you need to add #6. How do you update the promise?

[11:45:20.0000] <Domenic>
Yeah, at that point you have to write your own combinator

[11:45:34.0000] <Domenic>
Notably, if 1,2,3,4,5 all came back, you can't add #6

[11:45:44.0000] <Domenic>
since once a promise has settled it no longer changes state

[11:45:49.0000] <Hixie_>
sure, if it's already resolved then whatever

[11:45:56.0000] <Hixie_>
so here's my problem

[11:46:10.0000] <Hixie_>
i already have this All promise. the ES6 module loader makes it for me.

[11:46:17.0000] <Hixie_>
I need to dynamically modify it later.

[11:46:29.0000] <caitp>
modify it?

[11:47:24.0000] <Domenic>
One way I can think of is making #3 a "proxy" promise. So that if you determine you need #3 after all, you resolve the proxy with #3. But if you don't want it, you resolve it with undefined or something.

[11:48:02.0000] <Domenic>
Not sure about adding latter...

[11:49:19.0000] <Hixie_>
i can't control #3 either, that's also created by the ES6 module loader

[11:49:38.0000] <Hixie_>
and it's a real promise, it might be hte "#6" of another "all" promise, or whatever

[11:49:58.0000] <Hixie_>
e.g. if someone tweaks the dependencies so that A depends on D instead of C, and B depends on C instead of D.

[11:50:18.0000] <caitp>
i'm confused by what is meant by wanting to modify the promise ._>

[11:52:01.0000] <Hixie_>
caitp: i just explained it abve?

[11:52:28.0000] <Hixie_>
caitp: see where i said "So....." and the next four lines from me

[11:53:10.0000] <caitp>
sounds like something like the "some" approach vs all

[11:53:17.0000] <caitp>
but not exactly

[11:53:52.0000] <Domenic>
Yeah, I mean, I don't think this is really an issue where promises can give you what you want inherently; you need the spec patched to allow you to do a custom combinator instead of all()

[11:54:25.0000] <Hixie_>
yeah, that was my assumption

[11:54:26.0000] <Hixie_>
pity

[11:57:55.0000] <caitp>
complicated flow control has always kind of sucked with that particular abstraction, but it's doable

[12:01:14.0000] <caitp>
but, for what it's worth, you don't really need the promise spec patched in order to implement that or talk about it in a whatwg spec

[12:04:11.0000] <Hixie_>
caitp: not the promise spec, the module loader spec

[12:05:19.0000] <caitp>
if the module loader as written isn't really implementable because they're too specific about how it needs to work, that sounds like a bug in harmony :> but otherwise it sounds like an implementation detail that could be solved any number of ways

[12:06:14.0000] <Hixie_>
it's implementable fine, the problem is i want to support use cases it doesn't handle

[12:06:25.0000] <Hixie_>
like dynamically changing the dependencies

[12:06:46.0000] <zenparsing>
right - it assumes that the dependency graph is static

[12:12:57.0000] <zenparsing>
the linkage graph is static, to be more precise

[12:26:35.0000] <caitp>
how would you much such a graph dynamic though? is what I'm failing to see

[12:27:02.0000] <caitp>
even using the import/load methods of Reflect.Loader, wouldn't evaluation of the scripts be deferred until each static module is loaded?

[12:27:20.0000] <caitp>
s/much/make/

[12:41:38.0000] <Hixie_>
zenparsing: we're probably gonna need to fix that

[12:41:48.0000] <Hixie_>
caitp: see es-discuss

[12:44:37.0000] <zenparsing>
Hixie_ in a ideal world, might it make more sense to have the host (HTML) define a dependency system and let the embedded scripting language hook into that?  instead of the other way round?

[12:45:11.0000] <Hixie_>
in an ideal world, HTML and the scripting language would be one coherent thing and we'd have one dependency system

[12:45:46.0000] <Hixie_>
but in a world where we have design barriers, i don't think it's particularly important which side hooks into which

[12:45:54.0000] <Hixie_>
so long as the implementors don't have to implement two :-)

[12:50:47.0000] <caitp>
so your issue is that you want the context which uses html imports to be aware of when the imported html's script modules are loaded, and have a way to access the loaded modules?

[12:52:12.0000] <zenparsing>
Hixie_ does the ES side consider this unification important (yet)?

[12:54:16.0000] <zenparsing>
btw, i like your "foo/" => "foo/default.js" idea

[12:55:13.0000] <caitp>
not in favour of index.js? :p

[12:55:51.0000] <Hixie_>
caitp: something like that

[12:56:12.0000] <Hixie_>
zenparsing: dunno, none of them are really replying

[12:56:28.0000] <Hixie_>
zenparsing: but i'm assuming the implementors don't want to implement two dependency systems

[13:25:02.0000] <Hixie_>
annevk: you around?

[13:26:15.0000] <boogyman>
caitp: maybe an override to the default "index.<some extension"

[13:30:26.0000] <Sleepyvic>
Hi !

[13:33:01.0000] <Sleepyvic>
anyone here ?

[13:33:52.0000] <boogyman>
no

[13:34:19.0000] <Sleepyvic>
ok I'm new to irc, i'm testing it

[13:34:21.0000] <Sleepyvic>
:)

[13:34:31.0000] <boogyman>
welcome

[13:34:37.0000] <Sleepyvic>
thanks

[13:34:52.0000] <Hixie_>
there's some people here

[13:34:54.0000] <Sleepyvic>
what's going on here on this channel ?

[13:35:03.0000] <Hixie_>
right now, not much!

[13:35:15.0000] <Hixie_>
but generally we chat about web standards that we're implementing or speccing

[13:35:20.0000] <Hixie_>
or testing

[13:35:22.0000] <Hixie_>
or reviewing

[13:35:46.0000] <Sleepyvic>
ok I found this channel on a tutorial on how to use irc

[13:36:12.0000] <Sleepyvic>
but i'm not into whatever you're saying

[13:36:20.0000] <Sleepyvic>
sounds like chinese to me :)

[13:36:36.0000] <Hixie_>
:-)

[13:36:40.0000] <Hixie_>
what tutorial?

[13:36:54.0000] <Sleepyvic>
http://kernelmeltdown.org/blog/how-to-set-up-irc-using-hexchat-beginners-walkthrough/

[13:37:06.0000] <Sleepyvic>
and

[13:37:15.0000] <Sleepyvic>
http://code.tutsplus.com/tutorials/irc-is-back-heres-your-starter-guide--net-31369

[13:38:32.0000] <caitp>
oh man, you found an exciting channel

[13:39:25.0000] <Sleepyvic>
really how exciting is it ?

[13:39:33.0000] <boogyman>
Sleepyvic: feel free to sit around here if you wish, but you can also type /msg alis help list   and follow the instructions there to help find other channels.

[13:40:29.0000] <Sleepyvic>
No i'm gonna look for another channel

[13:40:35.0000] <Sleepyvic>
take care guys

[13:41:34.0000] <caitp>
oh man, you guys almost caught a fresh one

[13:41:38.0000] <caitp>
so close.

[13:42:20.0000] <boogyman>
(s)he'll get caught in the interwebs. It is all seeing after all.

[13:43:20.0000] <TabAtkins>
I just submitted a comment on the second article suggesting that #whatwg be taken off the list of "awesome channels for web developers".

[13:48:34.0000] <caitp>
where else are they gonna hang out? the web development community is so tiny

[13:50:09.0000] <boogyman>
caitp: not according to the numerous one-offs of channels (and thats just on freenode).

[13:50:46.0000] <Hixie_>
TabAtkins: oh? i thought it was pretty good that we'd get exposed to web devs

[13:50:53.0000] <wanderview>
:

[13:51:03.0000] <wanderview>
oops

[13:51:19.0000] <TabAtkins>
It was in a list of channels where it's appropriate to ask "how do I web?" questions, of which this is not one.

[13:51:23.0000] <caitp>
I emit a lot of sarcasm, boogyman, it takes practice to notice it thoguh

[13:51:30.0000] <caitp>
also a lot of typos.

[14:03:06.0000] <annevk>
Hixie_: anything important?

[14:03:12.0000] <charl>
exit

[14:03:25.0000] <charl>
bah sorry, wrong window :)

[14:03:35.0000] <TabAtkins>
And typo!

[14:03:38.0000] <Hixie_>
annevk: just curious about the new fetch apis

[14:03:46.0000] <Hixie_>
annevk: nothing urgen

[14:03:47.0000] <Hixie_>
t

[14:03:57.0000] <annevk>
Hixie_: anything unclear in the draft?

[14:04:40.0000] <annevk>
Hixie_: I haven't tried figuring out the <img>.request thing yet, there's an open bug now, but there seem to be some tricky bits since both HTML attributes and some object would control request state, which is always icky (see e.g. .style)

[14:04:54.0000] <Hixie_>
annevk: My first question was going to be: what's with the Request() constructor taking both a Request and a RequestInit

[14:05:14.0000] <Hixie_>
annevk: yeah, that's the source of my interest.

[14:05:31.0000] <Hixie_>
annevk: mostly I'm curious about whether you're going to be exposing dependency tree info and priority info for HTTP2

[14:05:49.0000] <Hixie_>
annevk: (both of those are mutable during the request, iirc)

[14:05:55.0000] <annevk>
Hixie_: the idea behind passing in a request is for service workers

[14:05:56.0000] <Hixie_>
annevk: (so not just at init time)

[14:06:28.0000] <annevk>
Hixie_: e.g. you have fetchEvent.request and then you pass that to fetch() or a cache.add(); you would then use RequestInit to modify some stuff if any

[14:06:52.0000] <Hixie_>
annevk: ah, ok

[14:07:15.0000] <annevk>
Hixie_: my idea for things mutable during the fetch was to have methods on Request that invoke some cross-process action

[14:07:19.0000] <Hixie_>
annevk: so why does the other form of "new Request()" take a URL and a dict? why not the URL in the dict?

[14:08:00.0000] <annevk>
Hixie_: a URL is required, everything else is optional

[14:08:22.0000] <annevk>
(well everything else can have sensible defaults)

[14:08:32.0000] <Hixie_>
aah

[14:08:53.0000] <Hixie_>
so anyway, you're thinking we'd expose a .request object?

[14:09:04.0000] <Hixie_>
and that would have like img.request.changePriority(25) ?

[14:09:18.0000] <annevk>
at a high-level, yes, at a low-level I'm not sure how it'll work yet

[14:09:20.0000] <Hixie_>
i don't know enough about HTTP2's dependency stuff to have useful comments on that

[14:09:21.0000] <annevk>
yeah, something like that

[14:09:29.0000] <annevk>
for priorities anyway

[14:09:30.0000] <Hixie_>
k

[14:09:46.0000] <annevk>
and queryPriority() or something I guess with promises

[14:09:54.0000] <Hixie_>
so the UA is the one who would create that Request

[14:10:12.0000] <annevk>
yeah, the spec for the <img> element would set it up

[14:10:18.0000] <Hixie_>
so logically, we could have src="" and src-request-init="{ priority: 25; ... }"

[14:10:31.0000] <Hixie_>
and whenever you would create the Request, you'd actually pass that in

[14:10:31.0000] <annevk>
yeah

[14:10:37.0000] <Hixie_>
no race, which is nice

[14:10:40.0000] <Hixie_>
well, there's a race

[14:10:45.0000] <Hixie_>
but there's a well-defined time at which it is used

[14:10:50.0000] <Hixie_>
so interop should be ok

[14:11:00.0000] <annevk>
yeah, as long as we define the task and such

[14:11:09.0000] <Hixie_>
and then after that the attribute would be pointless

[14:11:17.0000] <annevk>
that might be good yes

[14:11:19.0000] <Hixie_>
do you know the bug# or have a search keyword i can find the bug with?

[14:11:28.0000] <annevk>
I was wondering what to do if someone modified Request, that was the tricky bit

[14:11:38.0000] <annevk>
or accessed .request and then set a crossorigin attribute

[14:11:51.0000] <Hixie_>
well presumably once the request is in flight it's mostly immutable, no?

[14:11:58.0000] <annevk>
Hixie_: https://www.w3.org/Bugs/Public/show_bug.cgi?id=26533

[14:12:00.0000] <Hixie_>
other than, like, the priority or whatever HTTP2 lets you chagne

[14:12:11.0000] <annevk>
Hixie_: currently Request is mostly immutable actually

[14:12:19.0000] <Hixie_>
lgtm

[14:12:34.0000] <annevk>
Hixie_: so yeah, depending on the specifics of the HTML side it might all work out fine

[14:12:59.0000] <annevk>
Hixie_: there were some requests to make it more mutable before the fetch happens so you could modify things in the service worker more easily

[14:13:15.0000] <annevk>
Hixie_: but there's already various modes for at least the Headers object so we can always shield things off

[14:13:20.0000] <Hixie_>
oh creating the request doesn't triger it?

[14:13:33.0000] <annevk>
Hixie_: no

[14:13:36.0000] <Hixie_>
ah ok

[14:13:40.0000] <Hixie_>
how do you actually trigger it?

[14:13:42.0000] <annevk>
you pass a Request to fetch()

[14:13:51.0000] <annevk>
which returns a promise for a Response

[14:13:52.0000] <Hixie_>
should we be creating the Request object earlier then? for <img> and co?

[14:14:03.0000] <annevk>
well yeah, that's the open question

[14:14:16.0000] <annevk>
but then you get into the problem of .request vs setting crossorigin

[14:14:18.0000] <Hixie_>
seems to me like it'd be saner to only do it once you do the fetch

[14:14:21.0000] <annevk>
I hadn't figured out a good story there

[14:18:15.0000] <Hixie_>
ok, commented on the bug

[14:20:35.0000] <annevk>
cool, ttyl

[14:21:58.0000] <Hixie_>
later

[14:51:16.0000] <bholley>
Hixie_: yt?

[16:57:11.0000] <Hixie_>
bholley: here now

[16:58:35.0000] <Hixie_>
Domenic: you around?


2014-08-19
[17:34:14.0000] <TabAtkins>
marcosc_: Good response. ^_^

[17:42:39.0000] <marcosc_>
TabAtkins: thanks :)

[22:47:29.0000] <hsivonen>
dear lazy IRC, have non-Gecko engines already implemented the fragment parsing fixes for SVG and MathML contexts?

[23:09:38.0000] <annevk>
JakeA: it seems we might implement Notification.getClones() as Notification.get() so the getClones() name is not final at all

[23:10:55.0000] <annevk>
hsivonen: .<script>document.body.innerHTML = "<svg></svg>";w(document.body.firstChild.namespaceURI)</script> in Live DOM Viewer suggests Chrome does

[23:11:53.0000] <JakeA>
annevk: cool, I don't think it needs "clones" in the name. I'm assuming .get() still returns a sequence?

[23:12:12.0000] <annevk>
hsivonen: IE10 does too

[23:12:22.0000] <annevk>
JakeA: a promise for an array

[23:12:32.0000] <zcorpan>
annevk: you need svg.innerHTML

[23:12:42.0000] <annevk>
zcorpan: oops

[23:13:24.0000] <annevk>
<svg></svg><script>document.body.firstChild.innerHTML = "<rect>";w(document.body.firstChild.firstChild.namespaceURI)</script>

[23:13:51.0000] <annevk>
Chrome still does, IE10 does not

[23:15:03.0000] <JakeA>
annevk: cool. I think we'll still go with getAll, means we can introduce a singular later if needed

[23:25:08.0000] <MikeSmith>
hsivonen: If you could comment over at https://www.w3.org/Bugs/Public/show_bug.cgi?id=21818#c8 as well I'd appreciate it. (I hope to get that change reverted.)

[23:37:35.0000] <othermaciej>
MikeSmith: what’s the problem with it?

[23:37:43.0000] <othermaciej>
is the http-equiv version valid in non-XML?

[23:38:25.0000] <othermaciej>
it seems like it is

[23:38:33.0000] <MikeSmith>
/me looks back at the bug

[23:39:34.0000] <othermaciej>
Leif’s arguments seem kinda reasonable - if the http-equiv form is allowed in HTML, and the charset= form is allowed in XML for compatibility, and the http-equiv form works in at least a few more places, it seems reasonable (to me) to allow the http-equiv form in XML for compatibility as well

[23:42:19.0000] <MikeSmith>
othermaciej: <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> is still valid for text/html files but only to allow for legacy content that still has it

[23:42:56.0000] <MikeSmith>
the logic is, we don't want to further proliferate it

[23:43:51.0000] <othermaciej>
any form of charset declaration in XML is also presumably for some legacy-related reason

[23:44:44.0000] <MikeSmith>
well the charset= form is the best-practice form from text/html and it's allowed in XML just as a nod to "ease migration" or however Hixie_ worded it

[23:45:16.0000] <othermaciej>
migration in which direction? :-p

[23:45:27.0000] <MikeSmith>
it's certinaly not there to encourage people to attempt to do the polyglot thing

[23:45:51.0000] <MikeSmith>
yeah, true about migration in which direction

[23:46:44.0000] <MikeSmith>
I think we should just not make it it all any more ugly than it already is

[23:47:37.0000] <MikeSmith>
the only use case that's been put forward for <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" /> is polyglot

[23:48:32.0000] <MikeSmith>
othermaciej: anyway as usual hsivonen says it better than me https://www.w3.org/Bugs/Public/show_bug.cgi?id=21818#c10

[23:49:43.0000] <zcorpan>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" /> doesn't help anything for polyglot

[23:50:27.0000] <zcorpan>
if anything it probably has worse compat

[23:50:44.0000] <annevk>
Polyglot is not dead yet?

[23:50:53.0000] <annevk>
o_O

[23:59:55.0000] <SamB>
annevk: you mean besides among those who just didn't get the memo yet?

[00:03:05.0000] <MikeSmith>
zcorpan: true but I guess somewhere in the tangle of words in the description and comments in that bug advocating for it, there's some discernable rationale of why he believes it's helpful for polyglot

[00:05:40.0000] <zcorpan>
wait, <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" /> is not allowed. <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> is allowed

[00:06:04.0000] <zcorpan>
i thought you were discussing the +xml vs text/html part

[00:08:04.0000] <zcorpan>
Hixie_: why is https://www.w3.org/Bugs/Public/show_bug.cgi?id=26533 more messy for img? img already has crossorigin

[00:08:36.0000] <annevk>
I wonder what the pay off is in investing such large amounts of time in something that is ultimately useless

[00:08:56.0000] <annevk>
zcorpan: because you do multiple fetches

[00:10:29.0000] <zcorpan>
maybe this is a good time to test whether other elements also do multiple fetches in browsers

[00:12:49.0000] <annevk>
zcorpan: well there's that, but I mostly meant with <picture>

[00:13:06.0000] <annevk>
zcorpan: that will require multiple Request objects to be exposed

[00:13:22.0000] <annevk>
zcorpan: I can imagine you might different settings per alternative

[00:13:56.0000] <zcorpan>
annevk: right now <img crossorigin> is applied for all candidates

[00:14:12.0000] <zcorpan>
annevk: like <video crossorigin> (which also affects <track>)

[00:14:22.0000] <zcorpan>
annevk: what options are there?

[00:14:49.0000] <annevk>
zcorpan: sure, but we're discussing something more open-ended for control over headers and such

[00:15:10.0000] <annevk>
zcorpan: and allows setting priority per fetch-channel

[00:15:50.0000] <zcorpan>
annevk: when would you want different settings for different candidates?

[00:58:22.0000] <galaxyAbstractor>
Hey, I've looked around on the whatwg site for a bit, maybe I'm blind, but is there somewhere where one can read old versions of standards? https://bugzilla.mozilla.org/show_bug.cgi?id=422526 mentions when globalStorage was removed and replaced by localStorage, and I would like to read more about the standard that was globalStorage, since I'm doing some research on various standards

[00:59:08.0000] <hendry>
galaxyAbstractor: guess you could checkout http://svn.whatwg.org/webapps/ ?

[01:00:00.0000] <galaxyAbstractor>
hendry: ah, thanks, I didn't know that existed, I'll take a look at that

[01:00:17.0000] <jgraham>
You might be better off with https://github.com/whatwg/html-mirror

[01:00:32.0000] <jgraham>
Same thing but mirrored into git

[01:01:36.0000] <zcorpan>
galaxyAbstractor: also http://platform.html5.org/history/

[01:02:21.0000] <zcorpan>
MikeSmith: time to add some stuff to that?

[01:02:27.0000] <annevk>
zcorpan: not sure, but I don't want to preclude things at the low level

[01:02:48.0000] <galaxyAbstractor>
jgraham: zcorpan: Thanks

[01:02:49.0000] <annevk>
zcorpan: I could imagine you'd use the same URL for all candidates and vary based on a header

[01:03:25.0000] <zcorpan>
annevk: that's ClientHints and was rejected because conneg

[01:03:34.0000] <MikeSmith>
zcorpan: time for somebody to :-) https://github.com/whatwg/platform.html5.org/ patches welcome etc

[01:03:38.0000] <hendry>
/me notices https://github.com/whatwg/streams ... how is that different to a Websocket?

[01:04:27.0000] <MikeSmith>
completely

[01:04:31.0000] <annevk>
zcorpan: it was? Anyway, I don't think we should stop people from playing with it in libraries

[01:04:45.0000] <zcorpan>
MikeSmith: i guess that document is a possible replacement for http://html-differences.whatwg.org/#changelog

[01:05:30.0000] <MikeSmith>
zcorpan: yeah it could be for sure

[01:07:04.0000] <zcorpan>
annevk: there was a respimg f2f in paris last year and i think dbaron explained how conneg had failed in the past so then ClientHints sort of died

[01:07:10.0000] <foolip>
annevk: will you have time for fullscreen bugs today?

[01:07:13.0000] <MikeSmith>
hendry: https://whatwg.github.io/streams/#rs-intro see for example

[01:07:41.0000] <annevk>
foolip: I want to fix attributes first

[01:07:43.0000] <zcorpan>
annevk: anyway, if you use ClientHints you just use <img src>

[01:08:00.0000] <foolip>
annevk: ok

[01:08:25.0000] <annevk>
zcorpan: I meant that you'd let the browser decide but you want your server to do things based on a header

[01:08:30.0000] <foolip>
I'll try my own suggestions and see how it goes

[01:08:36.0000] <annevk>
zcorpan: not necessarily client hints

[01:08:46.0000] <galaxyAbstractor>
I found this: http://www.whatwg.org/specs/web-apps/2005-09-01/#client-side but that warning is kinda annoying since it's covering a large area of the screen and it doesn't seem possible to close it either :\

[01:09:26.0000] <annevk>
foolip: parentDocs makes sense, the checking later seems somewhat scary since it means you can already have resized before you realize you cannot resize

[01:09:29.0000] <hendry>
MikeSmith: i don't get it. what's the use case?

[01:10:07.0000] <zcorpan>
annevk: oh. ok. why would you do that instead of varying the URL?

[01:10:49.0000] <annevk>
zcorpan: I don't know, but the idea of exposing Request objects for each fetch is to allow folks to figure out these things

[01:11:12.0000] <foolip>
annevk: you can still check before the resize, since the resize is after the "continue async" bit

[01:12:04.0000] <annevk>
foolip: if you are still doing a check before the resize, how is it going to be different?

[01:12:20.0000] <annevk>
foolip: note that it will always have to be in sync with the main thread because it's checking global state

[01:12:33.0000] <annevk>
foolip: or would you only check whether it's allowed?

[01:12:55.0000] <annevk>
I guess resizing would only happen if not already fullscreen, so the whole nesting game applies a bit less...

[01:13:23.0000] <foolip>
annevk: not doing it before requestFullscreen() returns means that it could take however long is needed to do the check, even if it's all done on the main thread

[01:13:25.0000] <MikeSmith>
hendry: the use case is to define a stream abstraction and APIs for other specs to reference that use streams

[01:14:08.0000] <foolip>
I don't know if the cross-process stuff is going to be a problem, that just seemed like a good place to put it in case it needs to be made more async later

[01:15:14.0000] <zcorpan>
annevk: it's not clear to me why it was ok for crossorigin to be so blunt to apply equally to <track> and <source> for <video> but now we need settings for each individual url

[01:15:38.0000] <annevk>
zcorpan: it's not clear to me that was okay, but this is lower level

[01:15:44.0000] <annevk>
zcorpan: this exposes the actual request

[01:15:50.0000] <annevk>
zcorpan: naturally each of these has its own request

[01:16:02.0000] <annevk>
zcorpan: for one because they have different URLs

[01:16:06.0000] <zcorpan>
annevk: sure, i'm fine with exposing each request

[01:16:44.0000] <annevk>
zcorpan: I recommend following up on one of the WHATWG threads or raising a new one and copying Ben from Facebook and the others that were interested in this

[01:17:00.0000] <zcorpan>
ok

[01:22:12.0000] <Ms2ger>
'String(symbol) will no longer throw; symbol+"" will still throw though.'

[01:22:13.0000] <Ms2ger>
Wat

[01:27:11.0000] <annevk>
one uses valueOf the other toString() iirc

[01:48:05.0000] <annevk>
Browsers make no sense with attributes

[01:48:22.0000] <annevk>
Ms2ger: we're going to need quite a few tests to ensure interoperability for all these new methods :/

[01:48:55.0000] <Ms2ger>
Yay.

[01:51:27.0000] <jgraham>
Can't tell if sarcastic or looking forward to demonstrating browser crazy.

[01:52:51.0000] <Ms2ger>
The former

[01:53:22.0000] <Ms2ger>
Maybe I can coerce abinader

[03:26:44.0000] <annevk>
there's about 21 attributes/methods to deal with attributes

[03:27:04.0000] <annevk>
to do get/set/remove/has

[03:27:09.0000] <annevk>
tears

[03:27:12.0000] <annevk>
many many tears

[03:30:12.0000] <hsivonen>
annevk: just in DOM Core?

[03:31:25.0000] <annevk>
hsivonen: yeah

[03:31:37.0000] <annevk>
hsivonen: not counting id/className/classList

[03:31:48.0000] <hsivonen>
annevk: :-(

[03:32:23.0000] <annevk>
maybe I should write a blogpost about this

[03:58:43.0000] <zcorpan>
do it

[04:29:50.0000] <zcorpan>
at least we don't have removeAttributeNodeNS. http://www.w3.org/DOM/faq.html#removeAttributeNodeNS

[07:34:09.0000] <Domenic>
that page is quite an interesting mirror onto how things were thought of at the time

[07:37:55.0000] <Domenic>
annevk: blog post++

[08:13:26.0000] <annevk>
Hixie_: with the current *.spec.whatwg.org setup, can we still get TLS?

[08:13:55.0000] <annevk>
Hixie_: ideally TLS + HSTS

[08:17:14.0000] <zcorpan>
Domenic: indeed

[08:17:29.0000] <Domenic>
annevk: I looked into it and it's expensive, but doable

[08:18:31.0000] <annevk>
Would be a nice end-of-year target for WHATWG

[08:19:03.0000] <Domenic>
http://www.sslshopper.com/best-ssl-wildcard-certificate.html basically

[08:19:19.0000] <zcorpan>
we could just introduce a member fee

[08:19:38.0000] <jgraham>
WHATWG has end-of-year targets now?

[08:19:50.0000] <jgraham>
Is there also a bonus scheme?

[08:20:01.0000] <jgraham>
Maybe based on the number of spec that reac Rec.

[08:20:07.0000] <jgraham>
+h

[08:20:12.0000] <Ms2ger>
annevk gets all the bonus

[08:20:16.0000] <Domenic>
wait wrong link http://www.sslshopper.com/unified-communications-uc-ssl-certificates.html

[08:20:58.0000] <Domenic>
hmm last time i googled this it was less confusing

[08:21:15.0000] <jgraham>
Hmm, why do you need unified not wildcard?

[08:23:14.0000] <jgraham>
https://www.gandi.net/ssl/standard#multi seems like it could be enough?

[08:23:22.0000] <Domenic>
well that page on wildcard said wildcard is only one level

[08:23:59.0000] <Domenic>
yeah something that has us manually update the list of SSLed subdomains would probably also work

[08:24:14.0000] <Domenic>
or a single wildcard for *.spec.whatwg.org, plus another for whatwg.org, maybe?

[08:24:33.0000] <Domenic>
or maybe for *.whatwg.org so that https://spec.whatwg.org works too

[08:25:11.0000] <Domenic>
lol this is most unhelpful SO Q&A ever http://stackoverflow.com/questions/13192200/wildcard-ssl-certificate-registration-with-multi-level-subdomains

[08:26:52.0000] <jgraham>
Domenic: So I found a more useful SO

[08:27:10.0000] <jgraham>
http://stackoverflow.com/questions/2115611/wildcard-ssl-on-sub-subdomain

[08:32:18.0000] <jgraham>
So it seems like you either need a wildcard cert for  *.spec.whatwg.org and one for *.whatwg.org or a multidomain cert for all the actual domains we have, or maybe a SAN cert

[08:33:42.0000] <jgraham>
So I guess the first option is going to be about 20GBP or 30USD/month

[08:34:48.0000] <Domenic>
what's the difference between SAN and multidomain

[08:35:18.0000] <Domenic>
also can we get a pretty extended validation one i like it when my address bar is all green and shiny

[08:37:17.0000] <jgraham>
I think multidomain is one cert that covers N named domains, but SAN allows multiple wildcard. But I'm not sure

[08:38:57.0000] <Domenic>
FWIW I already got us a (normal) SSL cert for resources.whatwg.org because I wanted to be able to include logos on GitHub pages without getting mixed content errors.

[08:40:23.0000] <jgraham>
There are also various other subdomains there like developers.whatwg.org

[08:40:39.0000] <jgraham>
It turns out that using lots of subdomains sucks for SSL

[08:41:05.0000] <Ms2ger>
So it seems

[08:56:09.0000] <Domenic>
I could swear last time I looked there was a way to pay like $500/year for a super-wildcard cert. Maybe I was just confused

[09:06:37.0000] <Domenic>
wildcard + SAN is probably what I was thinking of. See last paragraph of http://en.wikipedia.org/wiki/Wildcard_certificate#Limitation

[09:09:06.0000] <jgraham>
Wikipedia loses points for suggesting that www.wikipedia.org is more "the same website" as wikipedia.org than meta.m.wikipedia.org

[09:41:20.0000] <zewt_>
things that are never okay on the web: wakelocks.

[09:42:21.0000] <zewt_>
(for CPU locks at least, screen locks are more sane)

[09:49:38.0000] <Hixie_>
as far as TLS goes. If y'all want to manage it, I'm game. But I don't see much point, personally.

[09:49:56.0000] <Hixie_>
setting up the cert for www.whatwg.org was a huge pain in the ass

[09:50:10.0000] <Hixie_>
setting up the cert for resources.whatwg.org for me was relatively easy cos Domenic did the hard work iirc

[09:56:24.0000] <annevk>
the main thing I dislike is the yearly renewal shit

[10:02:09.0000] <annevk>
Hixie_: http://wiki.whatwg.org/index.php?title=MetaExtensions&curid=1655&diff=9674&oldid=9669 seems like some kind of spam

[10:04:08.0000] <Hixie_>
who's the editor in charge of this wake lock thread?

[10:04:25.0000] <annevk>
Hixie_: marcosc_ maybe

[10:04:59.0000] <Hixie_>
why is that spam?

[10:05:09.0000] <annevk>
Hixie_: because of the site it links to

[10:05:10.0000] <Hixie_>
does marcosc_ follow whatwg@?

[10:05:18.0000] <annevk>
Hixie_: think so

[10:05:18.0000] <Hixie_>
the site it links to describes meta tags...

[10:05:26.0000] <Hixie_>
marcosc_: ping

[10:06:03.0000] <Hixie_>
i mean, i agree that those meta tags are pointless at the end of the dya

[10:06:05.0000] <annevk>
yeah, but it seems like a tactic to increase the ranking of the domain as none of that is really useful

[10:06:06.0000] <Hixie_>
but so are most

[10:06:22.0000] <annevk>
mkay

[10:06:38.0000] <Hixie_>
i think they've gone to sufficient effort to actually do the right thing that if this is really spam, then let them have it

[10:06:51.0000] <Hixie_>
it's not like that wiki page is actually going to give them any boost, it has nothing to do with law firms

[10:06:59.0000] <Ms2ger>
So we not put noreferer on everything?

[10:07:09.0000] <Hixie_>
go ahead :-)

[10:07:21.0000] <Ms2ger>
Do*

[10:09:48.0000] <Hixie_>
i don't think so

[10:24:47.0000] <TabAtkins>
Ms2ger: Re: String(symbol), they wanted *some* way to do a console.log/etc with a string, but wanted to avoid footguns with people naively doing string manipulation on keys and accidentally stringifying a symbol.

[10:29:38.0000] <annevk>
man this blog post is long

[10:29:49.0000] <annevk>
attributes are too complex :(

[10:57:27.0000] <annevk>
http://annevankesteren.nl/2014/08/attributes

[11:05:00.0000] <Domenic>
Did the term "global scope polluter" not make it into the standard?

[11:08:39.0000] <annevk>
I think a different set of people used that term

[11:09:26.0000] <annevk>
In HTML it's "the Window object is indexed for property retrieval"

[11:10:28.0000] <tantek>
annevk - how much of the attributes mess is due to namespaces?

[11:11:54.0000] <annevk>
quite a bit, but I think DTDs did a worse number on them

[11:11:59.0000] <annevk>
via XML

[11:12:18.0000] <annevk>
oh, I forgot to mention case-insensitive issues in that post

[11:14:32.0000] <tantek>
annevk - would a lot of real world pages actually break if we dropped all the namespaces complexities with DOM attributes?

[11:14:38.0000] <annevk>
yeah

[11:14:43.0000] <annevk>
this is what we tried

[11:14:44.0000] <tantek>
crazy

[11:14:46.0000] <annevk>
to simplify this mess

[11:14:50.0000] <annevk>
and it failed

[11:14:51.0000] <Domenic>
it was pretty close

[11:14:54.0000] <tantek>
who *are* these people?!?

[11:15:11.0000] <Domenic>
i feel that with some console deprecation warnings, plus a couple years, we could maybe get there

[11:15:17.0000] <annevk>
enterprise, JavaScript libraries

[11:15:42.0000] <tantek>
enterprise I can see complaining loudly enough. JS libraries are irrelevant except when actually deployed.

[11:15:52.0000] <annevk>
well they are deployed :-)

[11:16:02.0000] <annevk>
jQuery sometimes has crazy stuff

[11:16:07.0000] <tantek>
then the deployments are what matter

[11:16:19.0000] <annevk>
yup

[11:16:27.0000] <tantek>
Domenic: this is why deprecation is still useful in specs

[11:16:56.0000] <tantek>
it may not always be able to get rid of things, but if it sometimes can, that's still useful enough.

[11:18:28.0000] <annevk>
yeah, I should probably add some red flags

[11:21:18.0000] <SamB>
/me imagines actual SVGs of red flags ...

[11:27:03.0000] <tantek>
🚩🚩🚩

[11:28:04.0000] <caitp>
you bet

[12:34:29.0000] <zcorpan>
json in an html attribute is going to be ugly

[12:36:57.0000] <zcorpan>
<script src="foo" urloptions="{&quot;foo&quot;: &quot;bar&quot;, &quot;baz&quot;: 5}">

[12:40:16.0000] <caitp>
usually people use single quotes when they want to do that

[12:41:24.0000] <caitp>
to avoid the entity reference sillyness

[12:42:20.0000] <TabAtkins>
Yeah, that's just general practice. If you're gonna use some type of quote in a literal string, you write the string with the opposite kind of quote.

[12:42:25.0000] <TabAtkins>
"'", '"', etc

[12:46:03.0000] <zcorpan>
caitp: sure but (1) json doesn't allow single quotes (2) html serializers usually use double quotes (like innerHTML)

[12:48:06.0000] <caitp>
TIL JSON.parse actually will throw in that case

[12:49:12.0000] <zcorpan>
tantek: annevk: problem with deprecating and warning about things that we then don't/can't remove is that it teaches people to ignore the deprecation/warning

[12:49:52.0000] <tantek>
zcorpan: do you have evidence for that?

[12:50:10.0000] <tantek>
my experience has been that people work at removing warnings, and asking how to do so.

[12:51:53.0000] <zcorpan>
tantek: well people used html4 transitional with obsoleted features well after the purpose of html4 transitional was past

[12:52:15.0000] <zcorpan>
but i guess it didn't trigger any warnings in the validator or anything

[12:52:24.0000] <boogyman>
s/used/still use/

[12:55:01.0000] <tantek>
zcorpan: right, they used html4 transitional DTD *specifically* because that's how they made warnings go away

[12:55:28.0000] <zcorpan>
tantek: true

[12:57:30.0000] <zcorpan>
tantek: otoh there are many web developers who completely ignore validation because they know that their stuff works anyway

[12:59:54.0000] <tantek>
sure, but this is all about thresholds. if enough fixes do happen overtime, stuff can be changed.

[13:18:33.0000] <Domenic>
yeah, i think validation and console warnings for JS APIs are very different

[13:19:48.0000] <zcorpan>
hmm maybe i should use a new logo for html-differences. how about a + above a -

[13:19:59.0000] <zcorpan>
or the other way around

[13:21:47.0000] <SamB>
zcorpan: you could steal the icon gitk uses ;-P

[13:47:46.0000] <zcorpan>
http://software.hixie.ch/utilities/js/live-dom-viewer/saved/3123 hmmm i dunno

[13:50:06.0000] <TabAtkins>
Kinda like the first one.

[13:50:17.0000] <TabAtkins>
Though the second more directly references diff files.

[13:50:39.0000] <zcorpan>
i think they both look like weird smileys

[13:50:49.0000] <TabAtkins>
The first does, yeah.

[13:51:02.0000] <zcorpan>
second thought is to use a 4 but that will just look like channel 4

[13:52:00.0000] <zcorpan>
IV

[13:52:06.0000] <TabAtkins>
Why a 4?

[13:52:12.0000] <zcorpan>
html4

[13:52:16.0000] <TabAtkins>
Ah.

[13:53:15.0000] <zcorpan>
http://software.hixie.ch/utilities/js/live-dom-viewer/saved/3124

[13:56:15.0000] <zcorpan>
maybe the - + just needs some tweaking with the size and spacing

[13:58:49.0000] <zcorpan>
http://software.hixie.ch/utilities/js/live-dom-viewer/saved/3125

[14:00:30.0000] <jgraham>
Anyone know acolwell?

[14:00:57.0000] <jgraham>
Or, more specifically, if https://critic.hoppipolla.co.uk/r/951 got review when it landed in blink?

[14:01:05.0000] <jgraham>
(assuming it did)

[14:03:44.0000] <Domenic>
can't unsee the smileys

[14:03:52.0000] <Domenic>
currently looking like cyclops puckering his lips

[14:05:01.0000] <caitp>
most of the wpt stuff in blink isn't actually in the tree, afaik

[14:06:11.0000] <caitp>
oh I see what it's saying

[14:07:40.0000] <zcorpan>
Domenic: how about http://software.hixie.ch/utilities/js/live-dom-viewer/saved/3126 ?

[14:08:05.0000] <foolip>
zcorpan: what spec is that for?

[14:08:15.0000] <Domenic>
zcorpan: nice, now the ruby-red eye laser is even more apparent ^_^

[14:08:21.0000] <zcorpan>
foolip: http://html-differences.whatwg.org

[14:08:35.0000] <zcorpan>
Domenic: :-)

[14:08:39.0000] <foolip>
ah

[14:09:14.0000] <jgraham>
caitp: https://codereview.chromium.org/245893002 says this already has review, and acolwell has already fixed some issues that people raised, so I wonder if we should just land that patch.

[14:09:26.0000] <foolip>
maybe a Δ (delta symbol)?

[14:09:33.0000] <zcorpan>
oooh

[14:09:54.0000] <jgraham>
At this point the reason against would have to look like "zcorpan or foolip object and are going to do the review" I think ;)

[14:10:22.0000] <zcorpan>
busy designing logos

[14:10:39.0000] <foolip>
are we talking about merging https://critic.hoppipolla.co.uk/r/951 ?

[14:10:49.0000] <caitp>
well you could shoot them an email at their @chromium.org address

[14:10:50.0000] <Domenic>
oooh I like the delta

[14:11:04.0000] <jgraham>
foolip: yes

[14:11:12.0000] <jgraham>
/me wonders what these logs are for

[14:11:20.0000] <foolip>
jgraham: for science!

[14:11:25.0000] <jgraham>
Are we making a WHATWG spec for button batteries?

[14:11:31.0000] <jgraham>
*logos

[14:16:14.0000] <zcorpan>
http://software.hixie.ch/utilities/js/live-dom-viewer/saved/3127 hmm, looks like a tent

[14:16:40.0000] <jgraham>
That's not what a delta looks like

[14:16:55.0000] <Domenic>
More angular, and the right side higher. http://media-cache-ec0.pinimg.com/236x/d4/af/45/d4af454459ca864e6cba88ed40c33d0c.jpg

[14:17:01.0000] <jgraham>
The top should be pointy and, possibly, not all the lines should have the same thickness

[14:17:03.0000] <Domenic>
s/higher/thicker

[14:17:10.0000] <jgraham>
Right

[14:18:02.0000] <zcorpan>
http://software.hixie.ch/utilities/js/live-dom-viewer/saved/3128

[14:19:12.0000] <Domenic>
nice. slightly off-center but very nice

[14:20:01.0000] <Domenic>
x=30 fixes it

[14:20:13.0000] <jgraham>
I still think it should be pointy at the top

[14:20:26.0000] <Domenic>
maybe y = 68

[14:22:47.0000] <jgraham>
Oh you used text?

[14:22:55.0000] <jgraham>
Yeah that would be font differences then

[14:23:53.0000] <zcorpan>
yeah working on a path now

[14:36:03.0000] <zcorpan>
http://software.hixie.ch/utilities/js/live-dom-viewer/saved/3129

[14:37:50.0000] <zcorpan>
variable stroke width would be nice huh foolip

[14:38:20.0000] <foolip>
:)

[14:39:20.0000] <foolip>
the kind that I worked on actually made it hard to do this kind of thing, because of offsets for the stroke width changes were specified as a point 0..1 on the whole path, so hitting exactly a join was ~impossible

[14:39:48.0000] <foolip>
this delta looks nice though, like a delta

[14:40:06.0000] <foolip>
and a bit like a mountain :)

[14:42:49.0000] <zcorpan>
how were we making the png versions again?

[14:45:12.0000] <foolip>
take a photo of the svg with your phone, then reduce to just two colors?

[14:48:31.0000] <SamB>
zcorpan: no idea how you guys do it

[14:48:57.0000] <SamB>
rsvg and inkscape both having inadequate parsers ...

[14:49:28.0000] <zcorpan>
SamB: :-(

[14:49:43.0000] <zcorpan>
annevk: ^

[14:50:02.0000] <zcorpan>
maybe toDataURL?

[14:51:02.0000] <SamB>
what, no toPNG that skips the data URL and just gives you a big hunk of bytes?

[14:51:55.0000] <zcorpan>
there's toBlob

[14:53:18.0000] <zcorpan>
ok logo deployed, thanks for the feedback

[14:54:54.0000] <zcorpan>
some time ago, opera supported svg favicons and firefox did not. now it's the other way around it seems

[14:56:02.0000] <SamB>
zcorpan: not really

[14:56:07.0000] <SamB>
crash your browser

[14:56:11.0000] <SamB>
now start it again

[14:56:39.0000] <foolip>
how does one crash ones browser at will?

[14:57:17.0000] <zcorpan>
hmm firefox shows the favicon on first load but then removes it on reload

[14:57:20.0000] <SamB>
kill -9 or equivalent

[14:57:29.0000] <foolip>
and why am I awake? good night

[14:57:47.0000] <zcorpan>
same here :-)

[14:58:19.0000] <SamB>
foolip: it's not a real crash, but it's close enough for Session Restore

[15:04:48.0000] <Domenic>
zcorpan: I made my png with `npm install svg2png-cli -g`; `svg2png my-svg.png --width 100` or something like that

[15:06:02.0000] <SamB>
Domenic: what does that use for rendering?

[15:06:08.0000] <Domenic>
SamB: PhantomJS

[15:06:16.0000] <Domenic>
So, QtWebKit

[15:07:09.0000] <dsheets>
is PCDATA in <script> in text/html possible?

[15:07:47.0000] <SamB>
dsheets: you know, it might be best to avoid needing to know the answer to that question

[15:07:58.0000] <dsheets>
too late

[15:08:06.0000] <dsheets>
snark not helpful anyway

[15:08:15.0000] <SamB>
I was being serious!

[15:08:42.0000] <SamB>
dsheets: what's your context?

[15:08:47.0000] <dsheets>
SamB, how do you suggest I avoid needing to know the answer? coerce some XML to invalid XML?

[15:09:11.0000] <SamB>
dsheets: well, there isn't XML in text/html anyway

[15:09:41.0000] <SamB>
of course, if you're writing a serializer, maybe you really *can't* avoid knowing

[15:11:12.0000] <dsheets>
i think the answer is "no"

[15:11:21.0000] <dsheets>
based on http://www.w3.org/TR/html-polyglot/#raw-text-elements

[15:11:30.0000] <SamB>
DO NOT USE

[15:11:36.0000] <SamB>
there is no html-polyglot

[15:12:32.0000] <dsheets>
right, i forgot where i was

[15:12:51.0000] <dsheets>
mmmm this kool-aid tastes yummy

[15:13:19.0000] <SamB>
hey, I'm not exactly a party-liner

[15:13:38.0000] <dsheets>
the fact that there is a party at all disturbs me

[15:14:14.0000] <dsheets>
i didn't get to pick these tools but html (still) seems less flexible for inline content than alternatives

[15:14:41.0000] <dsheets>
no magic incantation to turn off CDATA parsing? ok...

[15:15:20.0000] <SamB>
what, exactly, is the point of trying to get well-formed XML to parse as HTML that kinda-sorta represents the same thing?

[15:15:56.0000] <dsheets>
it's what the software that i'm hacking does

[15:16:26.0000] <SamB>
you don't get any of the advantages that XML is supposed to give you that way

[15:17:01.0000] <dsheets>
it gets not-injecting stuff into my pages by default

[15:17:10.0000] <SamB>
hmm?

[15:17:47.0000] <dsheets>
look, it's not my choice and i have to fix this problem

[15:17:50.0000] <dsheets>
thanks for your help

[15:18:04.0000] <SamB>
you never even said what the problem was :-(

[15:18:25.0000] <dsheets>
is PCDATA in <script> in text/html possible?

[15:18:36.0000] <dsheets>
and the answer appears to be "no"

[15:18:51.0000] <SamB>
that's not a problem

[15:18:58.0000] <dsheets>
for me, it is

[15:19:05.0000] <dsheets>
this stack is conservative

[15:19:07.0000] <dsheets>
anyway, ta!

[15:19:50.0000] <SamB>
a problem is more like "i'm trying to X, but whenever I Y, the browser does Z ..."

[15:20:29.0000] <SamB>
dsheets: anyway, <script> parsing is batshit

[15:21:03.0000] <dsheets>
hmm? what? because no one has made it sane? in fact, in 2014, there isn't even a way to turn ON PCDATA?

[15:21:39.0000] <SamB>
it's best to forget the claims that HTML is an application of SGML when going anywhere *near* <script>

[15:22:16.0000] <Domenic>
not because noone has made it sane... because it was implemented in an insane way and changing it would break the web

[15:23:01.0000] <SamB>
(there's nothing special about <script> in XHTML though)

[15:23:03.0000] <dsheets>
Domenic, adding an attribute breaks the web? seems... unlikely

[15:24:45.0000] <SamB>
dsheets: oh, you can presumably add whatever data- attributes you like, but you can't declare them or anything

[15:27:05.0000] <SamB>
dsheets: hmm, looking at the spec, I see that #PCDATA is a content-model thing; the closest attribute type I see is CDATA ...

[15:27:55.0000] <SamB>
(that's the XML spec, of course)


2014-08-20
[22:47:02.0000] <zcorpan>
dsheets could maybe use <svg><svript> although that has a different set of quirks

[22:47:34.0000] <zcorpan>
i didn't follow what his use case was

[22:48:19.0000] <SamB>
zcorpan: he seemed intent on doing the "polyglot" thing without any explanation

[22:49:40.0000] <zcorpan>
he doesn't need different parsing of script to do polyglot...

[22:50:37.0000] <SamB>
anyway he wasn't terribly coherent :-(

[22:52:16.0000] <zcorpan>
if his problem was that <script><![CDATA[ doesn't work then the fix is js comments

[22:53:32.0000] <zcorpan>
or stop using polyglot of course

[00:40:28.0000] <annevk>
zcorpan: I think I used http://www.fileformat.info/convert/image/svg2raster.htm or some such

[00:40:34.0000] <annevk>
zcorpan: might not give the best results

[00:40:46.0000] <annevk>
SamB was working on something better

[01:20:32.0000] <annevk>
JakeA: note that get() takes a dictionary argument for filtering, defaulting to all

[01:21:06.0000] <JakeA>
annevk: I guess you can only have one notification per tag?

[01:22:19.0000] <annevk>
JakeA: there can be multiple

[01:23:31.0000] <JakeA>
annevk: Still feels like it should be getAll then, but it's not a big deal. Eg we have cache.match and cache.matchAll, both methods take a filtering arg

[01:24:03.0000] <annevk>
fair, querySelector/querySelectorAll

[01:24:40.0000] <annevk>
but I don't think there's really a case here where you'd want the first so from that perspective...

[01:26:11.0000] <JakeA>
annevk: also map.get

[01:26:35.0000] <JakeA>
But yeah, if Firefox already has an impl, that seems like a stronger reason to leave it as .get

[01:41:14.0000] <annevk>
I wonder why Mark Watson of Netflix is pushing back on requiring HTTPS for new APIs

[01:41:39.0000] <annevk>
http://lists.w3.org/Archives/Public/public-webappsec/2014Aug/0062.html

[01:42:03.0000] <annevk>
I guess it's mostly because of https://www.w3.org/Bugs/Public/show_bug.cgi?id=26332

[01:42:24.0000] <annevk>
But Netflix goes over TLS so what is the big deal?

[01:42:45.0000] <annevk>
Perhaps the TV environment where they care less about security?

[01:42:52.0000] <annevk>
hsivonen: ^^

[04:16:34.0000] <annevk>
foolip: Firefox throws if you try to modify an attribute's child list

[04:17:47.0000] <annevk>
foolip: and in fact it pretends there are no children

[04:18:03.0000] <annevk>
foolip: e.g. attr.firstChild returns null, childList is an empty NodeList

[04:26:42.0000] <foolip>
annevk: that sounds so sweet

[04:27:25.0000] <foolip>
I bet there's a FIXME that fortunately never got fixed :)

[04:36:40.0000] <zcorpan>
does anyone use http://resources.whatwg.org/status-warning.js ?

[04:39:37.0000] <annevk>
foolip: I put a summary in https://www.w3.org/Bugs/Public/show_bug.cgi?id=26609

[04:40:59.0000] <annevk>
Domenic: could we deploy HSTS on resources.whatwg.org?

[04:46:42.0000] <annevk>
jgraham: "In addition, wildcards themselves can have subjectAltName extensions, including other wildcards. For example: The wildcard certificate *.wikipedia.org has *.m.wikimedia.org as an Subject Alternative Name." seems to be what we want?

[04:46:51.0000] <annevk>
jgraham: that's 360 USD a year?

[04:49:19.0000] <jgraham>
annevk: Yeah, I think a SAN cert would work

[04:49:31.0000] <jgraham>
But IANASSLE

[04:49:50.0000] <annevk>
jgraham: well wildcard + SAN right?

[04:50:00.0000] <jgraham>
Yes

[05:09:05.0000] <Ms2ger>
foolip, actually, not a FIXME... We used to support that, kinda, but I killed it

[05:28:39.0000] <gsnedders>
what's the correct behaviour of vh on paged media?

[05:33:33.0000] <JakeA>
Bothers me that the quota API doesn't really specify the units of the quota

[05:34:13.0000] <JakeA>
I'm guessing bytes. The 'usage' property is in bytes.

[05:45:49.0000] <foolip>
Ms2ger: in that case you're the hero of the day!

[05:47:44.0000] <Ms2ger>
\o/

[06:02:04.0000] <foolip>
Ms2ger: was that change simply making Attr not a container Node like Element, Document and DocumentFragment?

[06:05:42.0000] <Ms2ger>
https://bugzilla.mozilla.org/show_bug.cgi?id=737122

[06:08:43.0000] <annevk>
jgraham: per https://www.startssl.com/ it seems we can do this for USD 60

[06:08:56.0000] <annevk>
if Hixie_ had an account with them already it might not be too bad

[06:09:50.0000] <annevk>
EV is getting cheaper too, I thought someone recently told me it was 10k or so

[06:10:11.0000] <foolip>
Ms2ger: thanks

[06:45:18.0000] <jgraham>
annevk: EV doesn't work with wildcard certs anyway

[06:45:45.0000] <annevk>
jgraham: yeah, wasn't really considering EV for us, it's mostly a scam

[06:58:38.0000] <zcorpan>
https://github.com/whatwg/html-mirror/commit/7c23a0789467f3c3d9659b75db963e31e21c9d76 is gold

[07:06:41.0000] <foolip>
zcorpan: I like that one too :)

[08:00:51.0000] <annevk>
JakeA: perhaps we should float the Fetch part on the WHATWG list?

[08:01:04.0000] <annevk>
JakeA: I can do that tomorrow

[08:02:36.0000] <JakeA>
annevk: I'm happy to do it, will post a summary tomorrow morning

[08:02:48.0000] <annevk>
sgtm

[08:09:21.0000] <annevk>
Domenic: if only we had someone to maintain IDL :p

[08:09:42.0000] <Domenic>
annevk: hehehe...

[08:10:17.0000] <heycam>
Domenic, send more PRs! :)

[08:11:33.0000] <Domenic>
yeah, if people like this observable idea I'd be happy to PR it in

[08:13:20.0000] <Ms2ger>
heycam, accept the PRs you get first!

[08:14:01.0000] <heycam>
/me looks at Ms2ger's PR

[08:14:15.0000] <heycam>
sorry i haven't looked at your CSSRule rejigging patch yet either

[08:14:17.0000] <Ms2ger>
heycam, and ArtB's that's been sitting for 5 months?

[08:16:36.0000] <zcorpan_>
MikeSmith: can you make a whatwg html-differences bugzilla component please?

[08:17:52.0000] <MikeSmith>
yup

[08:17:55.0000] <MikeSmith>
gimme a minute

[08:18:11.0000] <annevk>
heycam: in Europe already?

[08:18:22.0000] <heycam>
annevk, yep, just arrived

[08:18:33.0000] <heycam>
annevk, did you move to Switzerland yet?

[08:18:39.0000] <annevk>
yeah I have

[08:18:50.0000] <heycam>
ah cool

[08:19:30.0000] <annevk>
it is a bit, very rainy summer

[08:23:24.0000] <MikeSmith>
zcorpan_: https://www.w3.org/Bugs/Public/buglist.cgi?component=HTML%20Differences&list_id=42473&product=WHATWG&resolution=---

[08:23:44.0000] <zcorpan_>
MikeSmith: thanks!!

[08:29:26.0000] <annevk>
I wonder if https://twitter.com/hfiguiere/status/498885668937170945 is still true. Really seems like someone ought to reinvent the CA business

[08:32:17.0000] <JakeA>
It's in dire need of "disrupting" as them business folks would say

[08:35:30.0000] <Ms2ger>
"Orca screen reader now supports longdesc (in Gecko)"

[08:35:32.0000] <Ms2ger>
Progress!

[08:36:22.0000] <foolip>
why is everyone talking about https for whatwg.org these days?

[08:40:40.0000] <jgraham>
foolip: https jusst became fashionable

[08:59:16.0000] <annevk>
foolip: well, seems like a good place to start with TLS

[09:00:02.0000] <annevk>
Also, if that's what is required to have a normal site these days, it would be nice to set a good example

[09:07:18.0000] <zcorpan>
please review http://html-differences.whatwg.org/

[09:08:24.0000] <Ms2ger>
zcorpan, weird underline for " and stopSorting(). "

[09:08:44.0000] <Ms2ger>
Also " and border attribute"

[09:11:02.0000] <zcorpan>
fixed thx

[09:11:17.0000] <estellevw>
there are a few areas matching p > span:not([title=""]):not([class~="XXX"]):not([class~="impl"]):not([class~="note"]), li > span:not([title=""]):not([class~="XXX"]):not([class~="impl"]):not([class~="note"]) that get a green underline.

[09:11:40.0000] <zcorpan>
estellevw: reload?

[09:11:54.0000] <estellevw>
fixed

[09:12:05.0000] <estellevw>
took me longer to write that line than for you to fix it ;)

[09:12:14.0000] <zcorpan>
:-)

[09:35:10.0000] <Ms2ger>
TabAtkins, so, about -goog-... What's the advantage over doing the same thing without -goog-?

[09:42:47.0000] <Hixie_>
marcosc: yt?

[09:50:06.0000] <annevk>
Ah, answer is at http://lists.w3.org/Archives/Public/public-webappsec/2014Aug/0067.html

[09:50:16.0000] <annevk>
Netflix streams encrypted content over HTTP

[09:50:34.0000] <Hixie_>
yay unencrypted signalling

[09:50:52.0000] <annevk>
And Netflix does not want to upgrade their infrastructure so instead they argue that new features should be enabled over HTTP

[09:51:23.0000] <annevk>
I guess Mixed Content allows that kind of thing :-(

[09:57:37.0000] <zcorpan>
is https the new utf-8?

[10:01:19.0000] <TabAtkins>
Ms2ger: Ah, easy to answer.

[10:02:08.0000] <TabAtkins>
Ms2ger: If you ship to 1% *without* prefixing, then the page feature-tests for the unprefixed feature.  When we eventually turn on the feature for real, possibly with changes, it triggers that codepath, and possibly causes errors.

[10:03:12.0000] <TabAtkins>
Ms2ger: So instead, you use a prefix, so the eventual final thing won't be hit by the "experimental code" branch.  And by only shipping it to 1% or so of people, you ensure that it really *is* a branch, not the program just relying on the prefix all the time.

[10:03:49.0000] <TabAtkins>
1% is nice, because it still gives plenty of hits and data-collection opportunity, but takes far too long to restart-cycle yourself into having it working.

[10:04:48.0000] <TabAtkins>
We discussed this as an option back when we were planning the Blink fork, but decided to just follow Firefox's lead instead.  We're back to experimenting with it now.

[10:10:42.0000] <Hixie_>
prefixing doesn't work because people just assume the non-prefixed version will be the same and preemptively give both

[10:12:43.0000] <TabAtkins>
Hixie_: It's possible that might still happen.  We'll see.

[10:13:24.0000] <TabAtkins>
We're optimistic that the fact that you have to provide fallbacks and explicitly feature-test will mean that people don't just auto-provide unprefixed paths as well.

[10:15:46.0000] <Ms2ger>
I'm doubtful

[10:17:33.0000] <TabAtkins>
Welp, we'll see.  Not a huge deal for this thing if people still screw it up.

[10:22:44.0000] <annevk>
zcorpan: yeah something like that

[10:23:35.0000] <annevk>
zcorpan: the new http://www.webstandards.org/

[10:24:00.0000] <annevk>
zcorpan: the new XHTML 1.1

[10:24:02.0000] <annevk>
oh wait

[10:24:05.0000] <annevk>
that didn't go so well

[10:26:17.0000] <Ms2ger>
XHTML2?

[10:29:49.0000] <SamB>
annevk: what, SSL certs aren't already a scam ;-P?

[10:30:16.0000] <SamB>
(those signed by the CArtel, I mean)

[10:30:29.0000] <annevk>
SamB: via startssl you can get one for free

[10:30:45.0000] <SamB>
so it's not a very-well-run scam

[10:30:57.0000] <annevk>
but yes, replacing the CA system would be great if that was feasible

[10:31:17.0000] <annevk>
bit of a shame that it took us this long to realize everyone needs TLS

[10:31:37.0000] <SamB>
heck, even restricting the national CAs to their own TLDs would be an improvement

[10:49:31.0000] <annevk>
If we could make it part of DNS somehow and just let the registrars deal with it

[10:49:35.0000] <Hixie_>
do we have a spec for real-world content-disposition?

[10:49:45.0000] <annevk>
Everyone that has a domain has figured out how to deal with registrars

[10:50:15.0000] <annevk>
Hixie_: jreschke has tests for that at least

[10:50:33.0000] <annevk>
Hixie_: http://greenbytes.de/tech/tc2231/

[10:50:41.0000] <Hixie_>
yeah but i'm sure his tests just show that browsers don't follow the spec

[10:58:10.0000] <SamB>
annevk: well, obviously that's only sane if you have dnssec working

[11:03:11.0000] <SamB>
and, say, the glibc people are understandably not too enthusiastic about pulling in the requisite crypto code to check dnssec results in-process

[11:12:51.0000] <SamB>
annevk: though they seem open to adding support for declaring external resolvers (e.g. dnsmasq) as trusted to check dnssec results, and adding flags to treat failure to obtain a dnssec-verified result as an error ...

[11:13:41.0000] <SamB>
annevk: so were you thinking that thing where you can put your SSL key fingerprint or whatever into a DNS record, or something else?

[11:37:21.0000] <Hixie_>
annevk: so... for load-settings=""... do we want to do a JSON blob?

[11:37:26.0000] <Hixie_>
annevk: or something more user-friendly?

[11:37:36.0000] <Hixie_>
annevk: and do we want to reflect that as a DOMString? or something more usable?

[11:37:56.0000] <Hixie_>
annevk: it's just a flat name-value pair dictionary, no? nothing complex?

[11:38:19.0000] <Hixie_>
annevk: maybe it should just be a semi-colon separated set of colon-separated name/value pairs?

[11:53:26.0000] <annevk>
Hixie_: if you want both headers and settings, it'll be more complex than name-value

[11:54:25.0000] <Hixie_>
ah, right

[11:54:30.0000] <annevk>
Hixie_: well, it's name-value, but not string-string

[11:56:28.0000] <annevk>
SamB: I haven't really considered it in detail, it's mostly a thought

[11:57:05.0000] <annevk>
SamB: would require quite a bit more effort to turn this into something tangible

[12:17:29.0000] <annevk>
Array.prototype.slice has a fast path for NodeList https://twitter.com/bz_moz/status/500121412523532288

[12:17:32.0000] <annevk>
Oh DOM, you so bad

[13:53:44.0000] <miketaylr>
is there a specified behavior for https://miketaylr.com/bzla/docwrite.html?

[13:53:54.0000] <miketaylr>
firefox/presto and blink/webkit disagree

[13:55:46.0000] <caitp>
typeof undefined is usually not "function"

[13:55:59.0000] <Ms2ger>
Probably, yes

[13:56:10.0000] <Ms2ger>
I'll bet that hsivonen even knows which one is right

[13:57:16.0000] <Ms2ger>
I suspect it's Fx/Presto

[13:57:25.0000] <Ms2ger>
Because the inner window changes

[13:57:47.0000] <caitp>
I get the same results in FF nightly and chrome stable

[13:57:53.0000] <caitp>
so... go figure?

[14:00:41.0000] <miketaylr>
caitp: really

[14:01:04.0000] <miketaylr>
i get different results in chrome stable and canary... and chrome mobile

[14:01:55.0000] <miketaylr>
naturally there are sites depending on this... https://bugzilla.mozilla.org/show_bug.cgi?id=1015725#c2

[14:02:06.0000] <caitp>
seems to be same results in canary (39.0.2129.0 (Official Build 290688) canary) too

[14:02:20.0000] <miketaylr>
let me take out document.googWrite

[14:02:24.0000] <miketaylr>
you might be hitting that

[14:02:27.0000] <miketaylr>
:P

[14:03:10.0000] <miketaylr>
caitp: so once you click the button, Chrome and Firefox both say ____?

[14:03:26.0000] <miketaylr>
for me, chrome says true, fx false

[14:03:45.0000] <caitp>
ah I see

[14:04:01.0000] <caitp>
yes, different results there

[14:04:08.0000] <miketaylr>
ok, phew

[14:20:55.0000] <caitp>
well, the applicable spec that matters here is probably http://www.whatwg.org/specs/web-apps/current-work/#dom-document-open

[14:24:03.0000] <caitp>
so you get a new "window" global, effectively an entirely new script isolate really

[14:24:12.0000] <caitp>
so I guess we're doing the wrong thing in blink/v8

[14:43:55.0000] <smaug____>
miketaylr: Gecko does the right thing

[14:45:48.0000] <miketaylr>
thx caitp smaug____

[14:46:29.0000] <caitp>
wonder if there's a crbug for that

[14:47:05.0000] <miketaylr>
dunno, will probably file one if not

[14:47:15.0000] <miketaylr>
but every site that uses mobify.js relies on their current behavior

[14:47:48.0000] <caitp>
i dunno if you can really call it a change that would "break the web" if other popular browsers are doing the right thing

[14:49:31.0000] <miketaylr>
heh, doing the right thing (and have broken mobile sites as a result)

[14:49:32.0000] <caitp>
https://crbug.com/149785 looks like there's a bug

[14:49:54.0000] <miketaylr>
yep, looks like it

[16:34:35.0000] <Domenic>
annevk: sorry missed HSTS question. I dunno really anything about HSTS. I think the cert was $15 so.…


2014-08-21
[23:06:31.0000] <zcorpan_>
should we sync animations in SVG in <img>?

[23:07:22.0000] <birtles>
I think they should have their own separate timelines

[23:07:56.0000] <birtles>
separate <svg> roots within a single <html> already do

[23:13:41.0000] <zcorpan>
gif is synced though

[00:34:18.0000] <Ms2ger>
Anyone got a spec for Last-Modified header parsing?

[00:56:44.0000] <zcorpan_>
Ms2ger: i checked some RFC when there was a related wpt PR but it doesn't define parsing

[00:57:27.0000] <zcorpan_>
also involved Date() parsing :-)

[01:00:03.0000] <Ms2ger>
Yeah, I saw

[01:00:18.0000] <Ms2ger>
That's Servo implementing document.lastModified ;)

[01:10:01.0000] <Ms2ger>
"W3C Invites Implementations of HTML Canvas 2D Context"

[01:10:03.0000] <Ms2ger>
Says funny

[01:16:44.0000] <MikeSmith>
it means W3C is inviting all the existing implementations of canvas to a party

[01:17:00.0000] <MikeSmith>
they just left that part out for brevity in the headline

[01:17:09.0000] <MikeSmith>
you need to read the full thing

[01:17:52.0000] <Ms2ger>
I see

[01:18:00.0000] <Ms2ger>
I think I've got blame for Servo's implementation :)

[01:18:57.0000] <MikeSmith>
in that case the rule is that your implementation has to buy all the beer for the other implementations

[01:19:03.0000] <Ms2ger>
:D

[01:20:32.0000] <jgraham>
Maybe W3C is talking directly to the servo team with this call to implementations stuff

[01:20:49.0000] <jgraham>
After all we're the only people a decade behind the state of the art

[01:21:22.0000] <jgraham>
Perhaps when HTML5 goes to Rec someone will finally decide to implement navigation in servo

[01:21:43.0000] <Ms2ger>
Yep

[01:21:44.0000] <Ms2ger>
You :)

[01:23:20.0000] <jgraham>
Well, at risk of going all "meme" I do sometimes seem tot be the only one around here that gives a shit about document loading ;)

[01:23:38.0000] <jgraham>
But you really don't want me implementing it :)

[01:24:30.0000] <Ms2ger>
It's more that you convinced me how much work it'd be :)

[01:25:34.0000] <smaug____>
Domenic: will you change the streams spec to some readable form at some point ? ;)

[01:52:33.0000] <MikeSmith>
smaug____: Don't worry I heard he's planning on rewriting it in the style of the ES spec

[02:02:28.0000] <smaug____>
iik

[02:02:36.0000] <smaug____>
and isn't it a bit like that already

[02:05:54.0000] <jgraham>
smaug____: I hope MikeSmith was joking

[02:06:06.0000] <jgraham>
Although I guess you never know…

[02:15:27.0000] <annevk>
zcorpan_: SVG in <img> should use the animation frame task

[02:16:21.0000] <zcorpan_>
annevk: what does that say about the timelines being in sync?

[02:19:43.0000] <annevk>
zcorpan_: not much I guess, sorry

[02:21:34.0000] <annevk>
Well this is something new http://www.operasoftware.com/press/releases/mobile/2014-08-21

[02:31:50.0000] <zcorpan_>
why does xref have "the blockquote element" as a term rather than "blockquote"?

[02:42:12.0000] <annevk>
zcorpan_: feel free to fix things as you see fit

[02:42:28.0000] <annevk>
zcorpan_: most of the HTML element related references are for the document you are editing I think

[02:43:27.0000] <zcorpan_>
ok

[03:54:45.0000] <zcorpan_>
MikeSmith: can you create a bugzilla component "HTML - <script>alert('LOL')</script>" ?

[03:55:34.0000] <zcorpan_>
https://www.w3.org/Bugs/Public/query.cgi click WHATWG product

[03:59:24.0000] <MikeSmith>
zcorpan_: http://instagram.com/p/r0eJp3PW7G/

[04:10:59.0000] <zcorpan_>
MikeSmith: i think it's showOptionInIE() in field.js doing optionNode.innerHTML = aNode.data;

[04:22:20.0000] <JakeA>
annevk: is there a collective name for things that can be controlled by a SW?

[04:23:00.0000] <JakeA>
There's ServiceWorkerClient, but is it defined outside of SW?

[04:40:03.0000] <annevk>
JakeA: clients was the idea I thought

[04:40:19.0000] <annevk>
JakeA: SW needs to define all this terminology

[04:40:27.0000] <annevk>
JakeA: and clients are global objects

[04:40:43.0000] <annevk>
JakeA: which is why I think a DedicatedWorker ought to be controlled

[04:41:14.0000] <annevk>
So far the spec does a pretty poor job of outlining the underlying model

[04:51:27.0000] <JakeA>
gotcha. Will make a ticket

[04:56:01.0000] <MikeSmith>
zcorpan_: https://www.w3.org/Bugs/Public/query.cgi

[04:57:03.0000] <zcorpan_>
MikeSmith: it was innerHTML which doesn't run script :-(

[04:57:45.0000] <MikeSmith>
ah

[04:57:57.0000] <zcorpan_>
MikeSmith: showOptionInIE() in field.js doing optionNode.innerHTML = aNode.data;

[04:59:22.0000] <JakeA>
annevk: Opened https://github.com/slightlyoff/ServiceWorker/issues/423 to decide whether DedicatedWorkers are a client

[05:01:04.0000] <MikeSmith>
zcorpan_: ah ok I see now you said that earlier

[05:13:45.0000] <annevk>
JakeA: we should also make sure that everything is backed by some concept

[05:13:56.0000] <annevk>
JakeA: e.g. how Request objects are backed by the request concept

[05:16:33.0000] <JakeA>
annevk: not familiar with this pattern, where's the request concept?

[05:24:04.0000] <annevk>
JakeA: http://fetch.spec.whatwg.org/#concept-request

[05:29:39.0000] <annevk>
foolip: let me know when I start blocking you

[05:29:57.0000] <annevk>
foolip: working on some other things, but I can make time

[05:31:49.0000] <JakeA>
annevk: basically a description of the underlying properties/flags?

[05:32:38.0000] <annevk>
JakeA: it's basically a definition of how the system works, and the API reflects parts of the system

[05:33:05.0000] <annevk>
JakeA: e.g. fetch() itself is not much, most of the actual meat is in #concept-fetch

[05:33:17.0000] <JakeA>
gotcha

[06:13:56.0000] <annevk>
why are registerContentHandler and registerProtocolHandler not on caniuse?

[06:15:01.0000] <MikeSmith>
foolip: has anybody implemented datacue?

[07:06:22.0000] <annevk>
http://annevankesteren.nl/2014/08/registerprotocolhandler anyone have pointers to more about this?

[07:06:49.0000] <annevk>
I'm planning on filing some bugs on Gecko to see if we can make some improvements to make it more attractive

[07:07:04.0000] <annevk>
Or should we just forget about it altogether? I'm a bit on the fence

[07:23:50.0000] <MikeSmith>
annevk: I think it's worth investing some work in UI ideas. I've always liked registerProtocolHandler since whenever I first found out about in 2006 is whatever. I've think others do too (even if we don't hear from them so much)

[07:28:05.0000] <MikeSmith>
(like as in, think it's a pretty useful feature to have in the platform)

[07:46:25.0000] <gsnedders>
odinho: me + some not entirely clear group of people are going to Mustard at 6:30; I guess you won't want food, but feel free to drop by later if you want to get a drink if you're free.

[07:47:31.0000] <jgraham>
gsnedders: Your friends are translucent?

[07:47:46.0000] <gsnedders>
jgraham: shut up you

[07:48:28.0000] <annevk>
gsnedders: in Oslo?

[07:48:56.0000] <annevk>
/me misses Nøgne Ø

[07:49:08.0000] <annevk>
(also friends :p)

[07:49:33.0000] <jgraham>
Also beer prices?

[07:50:19.0000] <gsnedders>
annevk: yeah

[07:50:27.0000] <gsnedders>
jgraham: don't mention the cost :'(

[07:50:34.0000] <annevk>
jgraham: well, Zürich ain't much better

[07:50:44.0000] <annevk>
although it is a bit, I guess

[07:50:53.0000] <Domenic>
irccloud uses registerProtocolHandler I think? It works pretty well, although I don't find too many irc:// links on the web to click on.

[07:50:57.0000] <gsnedders>
annevk: well yeah, you just seem to like spending time in expensive places

[07:51:25.0000] <odinho>
gsnedders: oh, nice!  18.30 you say.

[07:55:10.0000] <gsnedders>
odinho: yeah

[07:56:10.0000] <richt>
annevk: Always wondered if the process of registering new protocol handlers could be permissionless and browsers could instead provide a picker UI when registered protocol types are invoked...

[07:57:29.0000] <gsnedders>
do any mobile platforms support registerProtocolHandler at an OS level?

[07:57:45.0000] <gsnedders>
well I presume Fx OS does, but anything else?

[07:58:21.0000] <annevk>
richt: Firefox has both

[07:58:30.0000] <annevk>
richt: with a checkbox to select a default

[08:04:05.0000] <foolip>
annevk: I still have some non-spec issues to work out, but the sooner the spec changes are made the sooner I can find the next round of bugs :)

[08:05:57.0000] <foolip>
MikeSmith: WebKit has it actually

[08:06:21.0000] <MikeSmith>
foolip: ok

[08:06:58.0000] <MikeSmith>
wonder what's blocking it from landing in blink. I seem to remember there being a patch

[08:07:01.0000] <foolip>
don't know if it's enabled though

[08:07:07.0000] <MikeSmith>
ok

[08:07:09.0000] <foolip>
MikeSmith: the intent to implement never went anywhere

[08:07:26.0000] <MikeSmith>
I see

[08:08:01.0000] <MikeSmith>
as far as gecko, there's not even a bug open for datacue as far as I can see

[08:12:40.0000] <richt>
annevk: oh cool.

[08:13:00.0000] <richt>
annevk: has opt-out instead of opt-in been considered before? the browser says '[domain] has registered to open all [type] links?' with the option to 'Undo' that.

[08:13:26.0000] <richt>
+ a picker UI on invocation of course.

[08:15:54.0000] <caitp>
one day, the wikipedia article for the world wide web is going to have an opening paragraph like "the world wide web is a vast collection of dialog boxes asking you to opt into or out of specific features, where the wrong selection will make your experience a complete waste of time"

[08:16:30.0000] <caitp>
and nobody will be able to read it before opting into or out of thousands of different features

[08:19:46.0000] <jgraham>
Much like the android article today, you mean?

[08:29:26.0000] <JakeA>
Domenic: just noticed https://dvcs.w3.org/hg/dap/raw-file/tip/battery/Overview.html#widl-Navigator-getBattery-Promise-BatteryManager

[08:29:54.0000] <JakeA>
Domenic: that should be a getter rather than a method right? It returns the same object each time

[08:35:09.0000] <caitp>
for the brief period before `await` is supported, all of these asynchronous apis are going to be really fun for people to deal with

[08:36:41.0000] <JakeA>
yeeep

[08:36:47.0000] <JakeA>
await should be fast-tracked IMO

[08:37:23.0000] <Domenic>
JakeA: I think the motivation for being a method was that it will likely have side effects, e.g. a permission prompt or booting up the battery-tracking mechanism or similar.

[08:39:31.0000] <JakeA>
Domenic: I don't think it requires permission, but fair point on the tracking mechanism

[08:40:46.0000] <Domenic>
JakeA: yeah, I guess not. The model in https://dvcs.w3.org/hg/dap/raw-file/tip/battery/Overview.html#security-and-privacy-considerations is more that the browser will give the website bogus data if it doesn't trust the website.

[08:46:40.0000] <Ms2ger>
Is there any spec for file:// sniffing?

[08:47:14.0000] <gsnedders>
Ms2ger: sniffing what? MIME?

[08:47:22.0000] <Ms2ger>
Yeah

[08:48:37.0000] <gsnedders>
Ms2ger: do they not use OS level stuff? isn't xdg-mime used on Linux, at least?

[08:49:11.0000] <Ms2ger>
Well, I don't know, that's why I ask :)

[08:49:18.0000] <Ms2ger>
Manishearth, ^

[08:52:41.0000] <Manishearth>
Ms2ger: should we be doing that then? Shouldn't be hard to write bindings for xdg-mime, but then we need to get it done on OSX too

[09:00:01.0000] <annevk>
richt: I don't think it has, but that seems wrong to reuse that infobar for opt out

[09:12:48.0000] <Ms2ger>
Heh

[09:13:06.0000] <Ms2ger>
Running Aryeh's IDL-extraction code on HTML yields

[09:13:10.0000] <Ms2ger>
interface TextTrackCueReady for first implementationsLatest Internet Explorer beta: unknownLatest Firefox trunk nightly build: unknownLatest WebKit

[10:21:22.0000] <JakeA>
annevk: Any idea what Mozilla's opinion on the quota API is? We need something for cache

[10:24:47.0000] <annevk>
JakeA: I don't really like the concept of quotas for storage

[10:25:12.0000] <annevk>
JakeA: not sure if we have a general opinion, there's not enough research done I think to really show what works well

[10:28:40.0000] <JakeA>
annevk: is there an alternate proposal?

[10:29:20.0000] <annevk>
I think there's a proposal from Alex about telling apps when they need to free up space

[10:29:25.0000] <annevk>
not concrete

[10:29:50.0000] <annevk>
But something like that was my idea was, if users use an application a lot, we try to keep the space it uses in tact

[10:30:06.0000] <annevk>
if the app is not often used and not marked in some way (e.g. bookmarked) we'd trash it

[10:31:11.0000] <JakeA>
Worried about something like tripit, that gets infrequent use but it's very important that it retains info

[10:31:20.0000] <JakeA>
I guess something like add-to-homescreen would be a signal there

[10:31:44.0000] <annevk>
yeah things like that

[10:31:53.0000] <annevk>
or use of the password manager or whatever

[10:32:22.0000] <annevk>
asking users about storage seems like a really dumb idea to me

[10:33:48.0000] <JakeA>
hmm, but telling developers "yeah we might dump all the data you told the user you'd make-work-offline, depends on heuristics"

[10:34:01.0000] <JakeA>
doesn't build trust in the web as a platform

[10:34:28.0000] <JakeA>
"If you want the data stored reliably, build a native app" etc etc

[10:34:50.0000] <annevk>
PhistucK guy o_O

[10:36:25.0000] <annevk>
JakeA: well, Alex' proposal was to ask applications to free up data

[10:36:42.0000] <annevk>
JakeA: and note that we're talking about filling up the entire disk here

[10:36:49.0000] <annevk>
JakeA: native apps have that problem too

[10:37:22.0000] <annevk>
JakeA: just typically there's enough storage space, not sure why that'd be less true here for the things users care about

[10:38:56.0000] <smaug____>
JakeA: btw, "take" is used some times to indicate a resource isn't available for other stuff

[10:39:04.0000] <JakeA>
annevk: I suppose the OS could ask the user to prioritise what I want to keep. If I got into space issues, I wouldn't want the browser to dump the 4gb of movies I wanted to watch on plane, rather than the combined 4gb of dumb games that I didn't even know were that large

[10:39:07.0000] <smaug____>
so perhaps takeAsJSON or such

[10:39:49.0000] <annevk>
JakeA: yeah, the OS/browser could ask the user the moment you run into the problem

[10:40:01.0000] <annevk>
JakeA: prolly listing the largest origins at the top

[10:40:21.0000] <JakeA>
smaug____: doesn't feel streamy, but it is shorter, which I like. The amount of fingerskin I lose over querySelectorAll…

[10:40:31.0000] <annevk>
then the user can make an educated decision

[10:40:31.0000] <JakeA>
annevk: yeah, that makes sense

[10:40:40.0000] <annevk>
the user can't really make an educated decision about bytes

[10:41:14.0000] <annevk>
that's from the old days, like how large you want to make a certain partition

[10:41:21.0000] <annevk>
brr

[10:41:33.0000] <smaug____>
consume doesn't sounds streamy to me ;)

[10:41:49.0000] <smaug____>
consume sounds like going to shopping something useless

[10:42:23.0000] <JakeA>
annevk: in the Chrome impl I think it talks in terms of "small" … "very large amount of space" to the user when it comes to permission. The wording can be judged by bytes & space available

[10:42:30.0000] <caitp->
probably an apt analogy really

[10:42:45.0000] <JakeA>
annevk: but I'm happy to go with the "just take the space" approach

[10:44:03.0000] <JakeA>
smaug____: If I heard "I'm consuming", I would assume eating/drinking first. Is that a British thing?

[10:44:42.0000] <caitp>
http://en.wikipedia.org/wiki/Consumer

[10:45:04.0000] <smaug____>
/me is not a native English speaker and has been horrified about climate change recently, so 'consume' has certainly some negative associations to him

[10:45:18.0000] <smaug____>
JakeA: btw, 'take' has been used elsewhere in the platform, http://dom.spec.whatwg.org/#dom-mutationobserver-takerecords

[10:45:21.0000] <annevk>
/me only cares about "body"

[10:45:22.0000] <smaug____>
not sure about consume

[10:45:33.0000] <annevk>
takeBodyAsJSON()

[10:45:36.0000] <annevk>
wfm

[10:45:48.0000] <annevk>
isBodyTaken

[10:46:34.0000] <JakeA>
caitp: consumer means shopping to me. But not the verb "consume".

[10:46:35.0000] <TabAtkins>
 gsnedders: vh and vw are relative to the page box in paged media.

[10:47:29.0000] <JakeA>
annevk: I prefer take to consume.

[10:47:44.0000] <annevk>
JakeA: reply to WHATWG list?

[10:47:50.0000] <annevk>
nobody else seems to care so far today

[10:47:59.0000] <annevk>
at least not about that thread

[10:48:28.0000] <caitp>
whichever word you go with, you're going to have people who get it, and people who just scratch their heads and wonder how the heck anyone ever came up with a name like that

[10:49:01.0000] <annevk>
well they can look it up in the archives

[10:49:33.0000] <smaug____>
and blame me

[10:49:40.0000] <smaug____>
which is fine

[10:51:39.0000] <annevk>
smaug____: hard to attack a dragon

[10:52:20.0000] <annevk>
JakeA: I'll reply

[10:52:36.0000] <JakeA>
annevk: Just sent

[10:52:45.0000] <annevk>
ah k

[10:53:44.0000] <annevk>
thanks

[11:28:58.0000] <Domenic>
smaug____: ya streams spec is going to become more readable later. Algorithms are still going to specified in ES style, but they will be surrounded with enough useful padding and text. https://whatwg.github.io/streams/ is the skeleton for that

[11:33:27.0000] <TabAtkins>
Domenic: Out of curiosity, would it be possible to just write the algos in JS, with the appropriate wordsmithing to ensure you have the initial versions of built-ins/etc?

[11:36:31.0000] <Domenic>
TabAtkins: well, sorta. I use a lot of internal slots, and a few promise "macros".

[11:37:13.0000] <Domenic>
Also, some common algorithms get factored out into common abstract operations, and saying that those operations are "JS functions" has unwanted implications.

[12:40:56.0000] <gsnedders>
TabAtkins: okay, that's what I thought, which makes the caniuse note wrong

[12:45:50.0000] <annevk>
JakeA: for your TLS efforts you might want to read up on https://www.w3.org/Bugs/Public/show_bug.cgi?id=26332#c50 and earlier/later comments

[12:47:01.0000] <annevk>
JakeA: Netflix is not really willing to entertain TLS for content delivery it seems

[12:58:10.0000] <Hixie_>
annevk: what're the use cases for the getBodyAsX methods?

[13:00:02.0000] <annevk>
Hixie_: to get access to the body of a response or request

[13:00:12.0000] <annevk>
Hixie_: e.g. what we have xhr.response for

[13:04:48.0000] <Hixie_>
annevk: isn't xhr.response enough?

[13:05:55.0000] <Hixie_>
TabAtkins: what do you think of a feature like  <div needs="foo bar"> <script id=foo src=...></script> <link rel=stylesheet id=bar href=...>, where the <div> doesn't render until the dependencies are met?

[13:06:08.0000] <Hixie_>
TabAtkins: maybe with :ready and :loaded pseudos?

[13:21:34.0000] <annevk>
Hixie: oh well, it's also if a service worker gets a request, that it can ready the form data

[13:21:59.0000] <Hixie>
ready the form data?

[13:22:19.0000] <Hixie>
why would the service worker be sending back form data

[13:23:31.0000] <caitp>
why not

[13:23:49.0000] <Hixie>
i don't understand

[13:24:22.0000] <caitp>
I make a FormData and create some task which passes it to the service worker, who later ships it off at some scheduled time

[13:24:38.0000] <caitp>
why not

[13:27:06.0000] <caitp>
maybe the form data is the contents of an email that I wrote, but can't send right now because I'm in a train underground, and the service worker will try to get rid of it when it can 〜(￣▽￣)〜

[13:27:38.0000] <Hixie>
i don't understand the relevance of what you're saying to what annevk and i are talking about

[13:27:51.0000] <caitp>
it's impossible to have total relevance because there's context missing

[13:28:02.0000] <caitp>
but based on the words you're using, there is a relevance

[13:28:16.0000] <Hixie>
oh well if we're just free-associating...

[13:28:42.0000] <Hixie>
/me wonders if maybe anne meant "read" instead of "ready"

[13:29:10.0000] <caitp>
no no, we aren't replacing words or meanings, we're using the words and meanings as they're presented, but without your context

[13:34:00.0000] <annevk>
Hixie: document has <form>, service workers wants to know what the user filled in

[13:34:29.0000] <annevk>
Hixie: oh yeah, read

[13:34:31.0000] <annevk>
my bad

[13:34:37.0000] <Hixie>
annevk: ok, i get the use case for service worker seeing the body of the request

[13:34:45.0000] <Hixie>
annevk: is the response case just redundant with xhr?

[13:35:30.0000] <annevk>
yeah I suppose, although you can have responses for <img href=crossorigin> although obviously reading those is not going to work

[13:35:54.0000] <annevk>
well

[13:35:59.0000] <annevk>
you might get a response out of a cache

[13:36:07.0000] <annevk>
and then read it for templating purposes

[13:36:53.0000] <annevk>
so I guess they really need it even if we only had XHR, and then fetch() is really nice glue to have as well, and covers the <img href=crossorigin> case

[13:42:11.0000] <annevk>
Domenic: https://github.com/slightlyoff/ServiceWorker/issues/372#issuecomment-52922105 reply by email doesn't really work it seems

[13:42:47.0000] <Domenic>
annevk: thanks... usually I just have to clean up everything after my comment, but this time I tried interleaving :(

[13:42:54.0000] <Domenic>
I think it depends on there being a "sent from my iPhone" or something.

[13:57:25.0000] <TabAtkins>
Hixie: I think the idea is intriguing, and might help with some of the FOUC issues that Web Components have.

[13:57:58.0000] <Hixie>
TabAtkins: k. i think i'm gonna shelve it for v2 for now, but keep it in mind when you read my upcoming epic

[13:58:28.0000] <Hixie>
TabAtkins: as it is written with that expansion path in mind

[13:58:36.0000] <TabAtkins>
Sure.

[14:00:08.0000] <Hixie>
Domenic: if i have an array of promises, and want a promise that's done when all of them are done, what's the magic word?

[14:00:45.0000] <Hixie>
i want, like, new Promise(promiseArray).then(function () { ... })

[14:00:47.0000] <Domenic>
Hixie: Promise.all (PromiseAll in spec language) will work, assuming that if any of them fail you want the new promise to fail

[14:01:04.0000] <Hixie>
Promise.all(promiseArray).then(function () { ... }) ?

[14:01:07.0000] <Domenic>
yep.

[14:01:10.0000] <Hixie>
k

[14:01:11.0000] <Domenic>
you can get even get an array of results

[14:01:17.0000] <Hixie>
don't care about results

[14:01:18.0000] <Hixie>
:-)

[14:01:27.0000] <Hixie>
the result is success/fail

[14:01:34.0000] <Domenic>
horse_#whatwg

[14:02:21.0000] <caitp>
that's not what you were saying the other day, I thought you were saying you just wanted the all promise to succeed, but without the rejected intermediate one

[14:02:36.0000] <caitp>
succeed/be fulfilled

[14:03:04.0000] <Hixie>
this may come as a surprise, but sometimes i want different things

[14:03:15.0000] <Hixie>
for example in the morning i want breakfast, but at night, dinner!

[14:07:07.0000] <TabAtkins>
I don't understand. With pizza on a bagel, you can have pizza anytime. Why would you want anything different based on time of day?

[14:07:16.0000] <Domenic>
^ that

[14:12:58.0000] <caitp>
heh, I don't keep up with all of the different promise needs of different people, that would be too much! so when I see you talking about flow control concerns with Promise.all twice in the same week, my general assumption is that you're still talking about the same thing and thus want the same outcome

[14:13:32.0000] <caitp>
so yeah it's a bit surprising, if I had the ability to keep track of everyones issues simultaneously it would be easier ;)

[14:50:48.0000] <Hixie>
hmm, i wonder how exciting it will be to set document.currentScript correctly for modules

[14:53:40.0000] <Domenic>
modules aren't scripts, so no need? :)

[14:54:02.0000] <Hixie>
it'd be unfortunate if you couldn't do:

[14:54:08.0000] <Hixie>
   <div>

[14:54:15.0000] <Hixie>
       <script type=module>

[14:54:23.0000] <Hixie>
         import "myrelevantmodule";

[14:54:36.0000] <Hixie>
         document.currentScript.parentNode.className = 'ready';

[14:54:42.0000] <Hixie>
       </script>

[14:54:44.0000] <Hixie>
...and so on

[14:54:58.0000] <Domenic>
i really don't think that'd be unfortunate.

[15:08:38.0000] <Hixie>
Domenic: why not?

[15:08:45.0000] <Hixie>
Domenic: how else would you get at the <div>?

[15:08:58.0000] <Hixie>
Domenic: the only thing that distinguishes it from all the other dics is that this is the one that contains your specific <script>

[15:09:07.0000] <Hixie>
divs

[15:09:22.0000] <Domenic>
Hixie: yes, in general, if you don't add identifiers to a thing, then you can't get to it. Just because this one happens to contain your script doesn't make it special.

[15:09:22.0000] <Philip`>
<div id=theonethatcontainsmyscript>?

[15:10:03.0000] <Hixie>
having to use globally-unique IDs is an order of magnitude more annoying than just being able to refer to the current script block

[15:10:26.0000] <Hixie>
you have to start worrying about ID collisions, about poluting the ID namespace, etc

[15:12:33.0000] <Domenic>
If it's actually important to refer to the current script block, then you'll do it.

[15:12:41.0000] <Domenic>
Just like if it's important to refer to any other element.

[15:13:12.0000] <Hixie>
i don't understand the problem with currentScript

[15:13:21.0000] <Hixie>
it seems like a net win to the engineering environment

[15:14:10.0000] <jgraham>
Is it a thing that currently exists and that people use?

[15:14:51.0000] <Ms2ger>
I believe it exists in Gecko

[15:17:16.0000] <Hixie>
currentScript? yeah

[15:18:27.0000] <jgraham>
On an entirely different subject I am rather against the name consimeAsJSON(). I think it falls into the API design flaw where you have a design choice to make in the API, which therefore seems important to you, and you signal in the name of the API functions the choice that you made. But to a user of the API it's unimportant noise because you made a consistent choice so it's just making you type out something "obvious"

[15:18:37.0000] <jgraham>
*consumeAsJSON()

[15:19:35.0000] <jgraham>
Like if you has a language with immutable strings and you added a method appendAsNewString()

[15:21:28.0000] <Hixie>
you mean as opposed to just .asJSON() ?

[15:24:00.0000] <jgraham>
Yes

[15:24:27.0000] <Hixie>
the problem with .asJSON() is that it already means something in the platform. It means, "copy this into a JSON form".

[15:26:06.0000] <Hixie>
hm i guess that's toJSON()

[15:27:46.0000] <jgraham>
Honestly I would prefer response.body.json() if possible

[15:28:01.0000] <Hixie>
i don't really understand why we're not using xhr

[15:28:11.0000] <jgraham>
response.body.json(), response.body.text(), response.body.consumed

[15:47:45.0000] <Yuhong>
msg NickServ identify asdasd

[15:58:33.0000] <TabAtkins>
The NickServ identification method is not very safe. :/

[16:05:55.0000] <slightlyoff>
My proposal was to ask and *then* evict if you don't get enough back

[16:11:35.0000] <TabAtkins>
slightlyoff: ?????

[16:13:07.0000] <jgraham>
/me resolves to avoid becoming slightlyoff's tenant

[16:14:20.0000] <jamesr__>
jgraham: thankfully slightlyoff lives in a place where eviction is basically illegal


2014-08-22
[18:04:49.0000] <karlcow>
annevk: any reasons why doing `response.consumeBodyAsJSON()` instead of just `response.bodyAsJSON()`?

[18:05:56.0000] <karlcow>
doWhatHow() methods seem candidates for deprecation in the future. :/

[18:06:39.0000] <karlcow>
compare to something like do(What, How). Bah… :) not important.

[18:06:58.0000] <karlcow>
/me is going back to webcompat issues

[19:04:50.0000] <karlcow>
annevk: also

[19:04:50.0000] <karlcow>
> If you have any great user interface ideas let me know! I thought I would share the above since I could not find a decent summary anywhere else.

[19:04:50.0000] <karlcow>
feedback request without a place to leave the feedback

[19:05:22.0000] <karlcow>
in http://annevankesteren.nl/2014/08/registerprotocolhandler

[00:30:27.0000] <zcorpan_>
karlcow: http://annevankesteren.nl/about

[00:30:57.0000] <karlcow>
heh

[00:31:22.0000] <zcorpan_>
though comments on the blog would be a bit more inviteful

[00:31:47.0000] <karlcow>
I was thinking more of an open bug :)

[00:32:11.0000] <karlcow>
weird English (as usual)

[00:32:40.0000] <karlcow>
anyway I was expecting a place where I could put a comment in a bug tracker.

[00:35:07.0000] <JakeA>
karlcow: because otherwise it isn't clear that it consumes the stream

[00:35:37.0000] <JakeA>
karlcow: (re consumeBodyAsJSON)

[00:36:37.0000] <karlcow>
JakeA: can it does something else than 'consuming the stream'?

[00:36:54.0000] <karlcow>
/me likes that btw 'consumes the stream'. There is something poetic about it

[00:38:16.0000] <JakeA>
karlcow: it could buffer the stream for further reads, then read the buffer as json

[00:38:42.0000] <JakeA>
karlcow: see http://jakearchibald.com/2014/reading-responses/

[00:38:49.0000] <karlcow>
s/can it does/can it do/ (slow brain)

[00:38:54.0000] <karlcow>
/me clicks and reads

[00:46:14.0000] <karlcow>
hmmmm I see.

[00:47:52.0000] <annevk>
karlcow: I think the idea behind the explicit naming was because it was non-obvious what it would do

[00:48:34.0000] <annevk>
karlcow: I filed https://bugzilla.mozilla.org/show_bug.cgi?id=1056860

[00:48:40.0000] <karlcow>
oh cool

[00:48:45.0000] <karlcow>
thx

[01:00:42.0000] <zcorpan_>
krijnhoetmer_: is the irc log code on github or so?

[01:13:45.0000] <karlcow>
annevk, JakeA: so if I understood the post the response.consumeBodyAsJSON is a stream.

[01:13:45.0000] <karlcow>
then why not calling it what it means. response.streamAsJSON

[01:17:58.0000] <JakeA>
karlcow: nah, response.consumeBodyAsJSON() returns a promise for a JS object

[01:23:36.0000] <zcorpan_>
http://www.w3.org/mid/8AA87E45-6086-4CAD-8EC6-7BDE739F4DDC⊙gc #popcorn

[01:24:47.0000] <Ms2ger>
"There is no cost to working on longdesc."

[01:58:07.0000] <annevk>
"The only question is whether the W3C standard is going to reflect that practice or some imaginary universe concocted by the WHATWG's collective inexperience."

[01:58:15.0000] <annevk>
Roy is always happy to make friends it seems

[01:59:35.0000] <jgraham>
JakeA, annevk: So what's the reason that response.body.json() doesn't work?

[01:59:52.0000] <annevk>
jgraham: we want .body to be an actual stream object

[02:00:19.0000] <annevk>
jgraham: it could be a subclass, but taking short terms on that seems dangerous

[02:00:45.0000] <annevk>
jgraham: sorry for not explaining that on list

[02:00:46.0000] <jgraham>
You can't have response.body.stream?

[02:01:03.0000] <annevk>
jgraham: why would we have an extra object?

[02:01:15.0000] <jgraham>
having a mix of response.body and response.bodyAsJSON() seems ugly

[02:01:26.0000] <jgraham>
Plus the latter is harder to type :p

[02:01:56.0000] <annevk>
jgraham: having an additional object for each request/response seems wasteful

[02:02:04.0000] <jgraham>
(also I suspect that wanting to interact with the raw stream will not be the common use case)

[02:02:13.0000] <Ms2ger>
annevk, sounds like he's friends with the chairs

[02:02:37.0000] <jgraham>
(well maybe it will for SW, I don't know, but not for XHR-replacement use cases)

[02:02:40.0000] <annevk>
Ms2ger: they have said the same thing?

[02:02:58.0000] <Ms2ger>
Seems like the kind of tone they'd approve of

[02:03:04.0000] <annevk>
Ms2ger: thinking about it, if Roy actually believed what he wrote there, he would veto the whole document

[02:03:28.0000] <annevk>
Ms2ger: seems like he's trying to end up in gossip magazines

[02:03:28.0000] <JakeA>
jgraham: interacting with the raw stream won't be common in SW

[02:03:34.0000] <Ms2ger>
annevk, that's just your inexperience speaking

[02:03:43.0000] <annevk>
Ms2ger: says who :p

[02:03:52.0000] <Ms2ger>
annevk, if you weren't an idiot, you'd understand why he supports it ;)

[02:03:54.0000] <JakeA>
jgraham: you'd only need to do that if you were writing your own video decoder or something

[02:04:31.0000] <jgraham>
JakeA: than I don't understand why we're making the stream API the most convenient one and making the consumed APIs more inconvenient

[02:04:39.0000] <annevk>
jgraham: so what about as*() with .body for the low-level API?

[02:04:47.0000] <Ms2ger>
/me denies being Roy

[02:04:50.0000] <annevk>
jgraham: rather than bodyAs*()

[02:05:12.0000] <JakeA>
I'm a fan of response.asJSON()

[02:05:22.0000] <jgraham>
annevk: I don't really understand the value of asFoo() vs foo()

[02:05:35.0000] <Ms2ger>
asJSON(), asStream()?

[02:05:48.0000] <JakeA>
Don't need asStream

[02:05:48.0000] <jgraham>
JakeA: So that seems mildly confusing if you can also get at the headers

[02:06:24.0000] <JakeA>
var data = await (await fetch('/whatever')).asJSON();

[02:06:45.0000] <jgraham>
response.body.text(), response.body.json() response.stream, response.headers.text(), response.headers.map()

[02:06:49.0000] <annevk>
jgraham: response.json() / response.bodyJSON()?

[02:07:00.0000] <jgraham>
would be my first choice

[02:07:37.0000] <JakeA>
jgraham: headers is a http://fetch.spec.whatwg.org/#headers-class

[02:08:11.0000] <JakeA>
by the time you get the response object the headers part of the stream has already been consumed

[02:08:27.0000] <jgraham>
So it's not possible to get the raw headers without consuming the stream?

[02:08:43.0000] <jgraham>
Oh

[02:08:51.0000] <jgraham>
So can you get the raw headers data?

[02:08:58.0000] <JakeA>
nope

[02:09:04.0000] <jgraham>
That seems unfortunate

[02:09:21.0000] <JakeA>
Sounds like you're looking for a raw socket rather than fetch

[02:10:05.0000] <JakeA>
Also, I don't think we can give raw headers for security reasons

[02:10:12.0000] <JakeA>
http only cookies, for instance

[02:10:29.0000] <jgraham>
Oh, that could be true

[02:10:45.0000] <jgraham>
In that case .text() and .json() seems fine

[02:11:02.0000] <jgraham>
Because everything that isn't .headers is implicitly applying to the body

[02:11:20.0000] <MikeSmith>
annevk: if you or Hixie said the things that Roy says, w3c partisans would be screaming with outrage about it. but Roy says it and instead they smile and say, Good ole Roy

[02:11:30.0000] <JakeA>
jgraham: there's a little more than that http://fetch.spec.whatwg.org/#response-class

[02:12:15.0000] <Ms2ger>
MikeSmith, well, Roy is a Good Guy, right?

[02:12:19.0000] <jgraham>
JakeA: Sure, I just mean for the body-consuming methods

[02:12:20.0000] <annevk>
MikeSmith: yeah e.g. https://twitter.com/johnfoliot/status/502581657053167616 but would not really have expected otherwise

[02:13:20.0000] <annevk>
arrayBuffer() / text() / blob() / json() / formData()

[02:13:25.0000] <annevk>
hmm

[02:13:40.0000] <annevk>
does not match any existing pattern

[02:13:49.0000] <annevk>
seems like we should go for it then

[02:14:06.0000] <JakeA>
hah

[02:15:26.0000] <JakeA>
var data = await (await fetch('/whatever')).json();

[02:16:14.0000] <JakeA>
request.formData()

[02:16:32.0000] <annevk>
the main problem would be if we had members that might clash with future additions

[02:17:13.0000] <JakeA>
Yeah, I'm happy with as*, don't really mind. I think some will be unhappy with losing consume/take

[02:17:41.0000] <annevk>
I think Domenic mainly cared about it when it was proposed for the subclass

[02:18:12.0000] <annevk>
If we really care about brevity I think jgraham is correct

[02:18:20.0000] <jgraham>
I think asFoo() is basically OK, but the as isn't adding much apart from the need to hold down shift for the next letter(s)

[02:18:26.0000] <annevk>
If we don't so much, I'd prefer bodyAsJSON()

[02:18:40.0000] <annevk>
If we care about being descriptive, I'd prefer takeBodyAsJSON()

[02:18:58.0000] <annevk>
And I think we mostly care about brevity so jgraham's json() makes the most sense

[02:19:17.0000] <JakeA>
takeBodyAndParseAsJSONAndThrowIfThatFails()

[02:19:29.0000] <Ms2ger>
AndRejectIfThatFails?

[02:19:30.0000] <annevk>
None of the other properties we expose now make sense as a data type, except perhaps for url, but that'd be dataURL() or some such

[02:19:33.0000] <JakeA>
hah

[02:27:03.0000] <annevk>
jgraham: argued your position on list

[02:29:04.0000] <jgraham>
Thanks

[02:36:33.0000] <JakeA>
annevk: not so sure about hasBody

[02:37:18.0000] <annevk>
JakeA: it's not entirely accurate, though for the person using the object it kind of is

[02:37:27.0000] <JakeA>
response.hasBody != Boolean(response.body)

[02:37:32.0000] <annevk>
JakeA: also, I don't have anything better

[02:38:27.0000] <JakeA>
I still like "consumed", "taken" is ok too. "bodyTaken" if you want 'body' in there

[02:38:28.0000] <annevk>
JakeA: I think we'd still disallow access in that case to the stream object in some way

[02:39:39.0000] <annevk>
JakeA: so while it's not equal to the boolean, it's equal to the .body.canbeused or whatever, which seems roughly similar to hasAttributes() and hasChildNodes() work

[02:39:50.0000] <annevk>
how /\

[02:40:20.0000] <annevk>
JakeA: if response.taken is true, you can still access .headers right? seems odd to not have body in there

[02:41:05.0000] <JakeA>
fair

[02:41:21.0000] <JakeA>
bodyRead

[02:41:47.0000] <annevk>
yeah that seems fine, although also not necessarily true

[02:42:09.0000] <JakeA>
yeah, same with "consumed"

[02:42:14.0000] <annevk>
bodyUsed

[02:43:15.0000] <jgraham>
Can you still access whatever it was you used to consume the stream?

[02:43:23.0000] <jgraham>
s/stream/body/

[02:43:27.0000] <JakeA>
nope

[02:43:58.0000] <jgraham>
so response.json(); response.json() wouldn't work (imagine whatever async bits are needed)

[02:44:00.0000] <annevk>
jgraham: text() etc. only work once; if you pass a Request to fetch(), they no longer work

[02:44:19.0000] <annevk>
jgraham: if you put a response into a cache, they no longer work, etc.

[02:44:30.0000] <JakeA>
yeah, 2nd .json would reject

[02:44:31.0000] <annevk>
jgraham: at that point we'd flip the flag directly

[02:44:37.0000] <smaug____>
Domenic: why you want to use ES style for Streams?

[02:44:41.0000] <annevk>
jgraham: when it's actually read is up to the browser

[02:44:53.0000] <annevk>
smaug____: he wants them to end up in Node.js and implemented in the ES engine

[02:45:07.0000] <jgraham>
Sure, I was wondering if an API like consumedAs = "json" would make sense, but perhaps not

[02:45:17.0000] <smaug____>
ah, Node.js stuff...

[02:45:28.0000] <jgraham>
(it would obvioulsy be null if it hadn't been consumed yet)

[02:45:34.0000] <smaug____>
need to be careful then when reviewing Streams that the API works well enough in browsers too

[02:45:41.0000] <smaug____>
the environment is rather different

[02:45:54.0000] <annevk>
yeah, do you have time for review?

[02:46:05.0000] <annevk>
not sure there's many Gecko people involved

[02:46:16.0000] <annevk>
and it's certainly not something I'm skilled in

[02:46:42.0000] <smaug____>
if there was a readable spec... ;)

[02:53:30.0000] <annevk>
smaug____: seems like a good start of a review :p

[05:12:49.0000] <JakeA>
Hadn't thought of using localStorage purely to communicate between tabs https://twitter.com/ddprrt/status/502789624843223040

[05:33:32.0000] <MikeSmith>
JakeA: neat

[05:52:45.0000] <smaug____>
localStorage has nothing neat

[05:54:14.0000] <jgraham>
smaug____: So are there any web technologies that you do like? ;)

[05:54:36.0000] <smaug____>
hey, localStorage is one of the APIs we want to kill

[05:54:57.0000] <smaug____>
jgraham: and I like events, and MutationObserver (obviously)

[05:55:12.0000] <smaug____>
and DOM tree

[05:55:14.0000] <smaug____>
that is plenty

[05:55:42.0000] <jgraham>
Pretty sure DOM and events are both unfashionable to like ;)

[05:56:05.0000] <smaug____>
but localStorage wasn't actually in APIs-to-kill list

[05:56:09.0000] <smaug____>
/me adds it

[05:58:21.0000] <jgraham>
It's nice that we are now trying to kill WHATWG-invented APIs rather than just Netscape/Microsoft/Java-Enterprise-Requirement-invented APIs

[05:59:17.0000] <smaug____>
whatwg is getting old

[05:59:23.0000] <smaug____>
10+ already, isn't it

[05:59:43.0000] <smaug____>
/me thinks the W3C compound documents workshop was 2004

[05:59:48.0000] <smaug____>
May

[05:59:51.0000] <jgraham>
Yeah, it's 10

[06:01:15.0000] <jgraham>
But only today I was hearing about how we suffer from collective inexperience. Which sounded worrying until it was clarified that we live in an imaginary universe which seems sufficient to prevent our evident ineptness from having any actual consequence.

[06:02:56.0000] <smaug____>
he

[06:02:57.0000] <smaug____>
h

[06:08:52.0000] <MikeSmith>
jgraham: whereas some other people live in an imaginary universe where having written a disseration describing something that other people invented somehow buys you street cred for life

[06:14:23.0000] <MikeSmith>
and yeah he's right -- clearly the ones who are inexperienced are the ones who've spent 10+ years day in and day out working on testing how the Web actually works in practice and reverse engineering all kinds of crap and thoroughly/precisely/unambiguously documenting how it all works (or trying to)

[06:17:31.0000] <Ms2ger>
Nah

[06:17:43.0000] <Ms2ger>
We've actually been on reddit most of that time

[06:29:10.0000] <MikeSmith>
othermaciej has been at least

[06:29:14.0000] <MikeSmith>
(just kidding)

[06:45:56.0000] <annevk>
hah

[07:20:56.0000] <Manishearth>
annevk / Ms2ger : Shouldn't step 2 of http://fetch.spec.whatwg.org/#concept-http-fetch say "requests's client IS a Service Worker environment"?

[07:21:31.0000] <Ms2ger>
Might be

[07:29:08.0000] <wanderview>
JakeA: there are no limitations on what a cache name can be, correct?  free to put /, etc in there

[07:31:35.0000] <JakeA>
wanderview: correct. Should probably define that.

[07:31:57.0000] <wanderview>
cool, thanks

[07:32:37.0000] <JakeA>
wanderview: I think I'm going to suggest "best practice" would be to call the cache "sitename-cachename-version"

[07:32:41.0000] <JakeA>
or some kind of scheme like that

[07:33:07.0000] <JakeA>
so in your SW activate event you can iterate over caches and identify those you don't need anymore

[07:33:11.0000] <wanderview>
wanderview: k... I was asking because it would be nice for implementation to have human readable directory structure, but not a big deal to map names to UUIDs

[07:33:13.0000] <wanderview>
oops

[07:33:16.0000] <wanderview>
JakeA: ^^^

[07:33:37.0000] <JakeA>
"sitename/cachename/version" is better I think

[07:33:38.0000] <JakeA>
so yeah

[07:34:27.0000] <JakeA>
although not all caches need a version, such as caches that build up over time, like "click to read offline" stuff, or dynamic avatar caches

[07:35:30.0000] <wanderview>
yea, I think embedding version in name is fine unless we want to provide conveniences like "get all caches older than version x"

[07:35:51.0000] <wanderview>
but that can be a content library

[07:37:07.0000] <wanderview>
JakeA: we're toying with the idea of using CacheStorage/Cache internally to persist our SW script and importScript scripts... can you think of any reasons that would be a bad idea?

[07:41:57.0000] <JakeA>
wanderview: I think we may be doing the same. It shouldn't appear when you iterate over the caches though. We may expose it another way in the future though

[07:42:40.0000] <wanderview>
JakeA: yea... seems like we need a magic internal cacheName... although since its all same origin doesn't seem like a major problem if they are accessible

[07:43:28.0000] <wanderview>
JakeA: I guess it might be nice to have a defined cacheName prefix for internal UA use that content should not expect to work for them

[07:43:42.0000] <annevk>
Manishearth: no

[07:43:54.0000] <annevk>
Manishearth: if it would be a service worker, we don't need to pass it through a service worker

[07:45:37.0000] <JakeA>
wanderview: it's worth exploring. I'm worried about what happens if those caches are modified or deleted. But I guess advice could just be "don't do that"

[07:46:56.0000] <wanderview>
JakeA: yea, we can just make those promises reject for content I think... but it would be nice to be explicit about what key is being used internal... Like "Cache names starting with '__internal__' are reserved for use by the browser and will always reject when passed by content."

[07:47:10.0000] <Manishearth>
annevk: but this means requests get passed through SWs by default?

[07:47:19.0000] <annevk>
Manishearth: yes

[07:49:11.0000] <JakeA>
wanderview: could you make a ticket for that? I think it's worth exploring

[07:49:18.0000] <wanderview>
will do

[07:49:57.0000] <JakeA>
wanderview: even if we say caches.get('__internal__whatever') always rejects, so we've reserved that naming for later

[07:50:16.0000] <wanderview>
yea

[07:51:32.0000] <JakeA>
wanderview: https://github.com/slightlyoff/ServiceWorker/issues/193

[07:52:08.0000] <tantek>
since I have no desire to reply to this email thread: http://lists.w3.org/Archives/Public/public-html-admin/2014Aug/0035.html I provide this for your consideration. 1) [citation needed] on all of Roy's unfounded claims. 2) "as a Senior Principal Scientist", I expect Roy to "show his work" in a manner replicable by other scientists, rather than depending on "considered opinions of folks".

[07:52:49.0000] <JakeA>
wanderview: http://slightlyoff.github.io/ServiceWorker/spec/service_worker/#service-worker-global-scope-script-cache - heh, I didn't realise we'd added this

[07:53:48.0000] <annevk>
tantek: public-html-admin is a support forum?

[07:54:57.0000] <tantek>
annevk - that may be too optimistic of an assessment.

[07:57:06.0000] <wanderview>
JakeA: ah, yea... so makes pretty good sense to use the same underlying implementation there

[07:57:12.0000] <wanderview>
JakeA: https://github.com/slightlyoff/ServiceWorker/issues/424

[07:59:10.0000] <tantek>
but no, seriously, I've lost patience with people call themselves "scientists" and then make arguments based purely on "considered opinions". It's like really? How dare you?

[07:59:35.0000] <tantek>
cc: hober

[07:59:43.0000] <JakeA>
wanderview: cheers!

[08:02:03.0000] <Philip`>
tantek: Maybe it's the typical computer science definition of scientist, i.e. one that doesn't involve anything resembling science

[08:03:01.0000] <Philip`>
/me can't remember ever reading a computer science paper that has a hypothesis in it

[08:15:28.0000] <JakeA>
wanderview: has ServiceWorker been considered for WebActivities? Feels like a SW could register for the intents it can receive during install, then when it receives an intent it can decide to open a window if it needs to via the clients api

[08:42:12.0000] <annevk>
JakeA: we are thinking about it, but we don't really want to do activities again

[08:42:20.0000] <wanderview>
JakeA: thats an interesting idea, but I'm not sure

[08:42:42.0000] <annevk>
JakeA: we want to tackle specific points of interest and make those extensible, such as sharing, maybe the file picker, etc.

[09:47:50.0000] <erlehmann>
anyone here knows of a sortable table specification?

[09:47:52.0000] <erlehmann>
err

[09:47:54.0000] <erlehmann>
polyfill?

[09:51:12.0000] <Ms2ger>
No

[09:51:17.0000] <caitp>
it probably wouldn't be too hard to write a polyfill for that, dunno if one exists

[09:51:50.0000] <caitp>
well, with the exception of dealing with dynamically inserted nodes

[09:53:01.0000] <caitp>
looks like there's a polymer component that does some variation on it, not relying on table[sortable]

[09:54:24.0000] <JonathanNeal>
Polyfill?

[09:54:42.0000] <caitp>
not a polyfill, but something that accomplishes the same goal

[09:54:43.0000] <Ms2ger>
Folypill

[09:55:11.0000] <caitp>
in a much more verbose fashion

[09:55:31.0000] <JonathanNeal>
Sortable table polyfill? sounds very Doable.

[09:55:36.0000] <JonathanNeal>
just need a spec

[09:55:42.0000] <JonathanNeal>
Sortable table polyfill? sounds very Doable.

[09:55:51.0000] <Ms2ger>
There is a spec

[09:55:54.0000] <caitp>
4.9.13 in web-apps

[09:58:25.0000] <caitp>
that's kind of a neat feature though

[10:00:06.0000] <JonathanNeal>
If you message me the spec I will look at it later and if I can write the polyfill this evening I will.

[10:00:44.0000] <Ms2ger>
whatwg.org/html

[10:01:17.0000] <caitp>
http://www.whatwg.org/specs/web-apps/current-work/multipage/tables.html covers it

[10:03:04.0000] <annevk>
I think Hixie already wrote a script of sorts for it

[10:03:07.0000] <JonathanNeal>
Okay. Messaged myself. On the phone. I'll check later. Somebody already done it?

[10:03:07.0000] <annevk>
at least the sorting

[10:03:21.0000] <annevk>
don't think there's a full polyfill

[10:05:36.0000] <erlehmann>
JonathanNeal caitp awesome

[10:05:46.0000] <erlehmann>
caitp polymer will not accomplish the same goal in my case. i need backwards compat.

[10:05:53.0000] <erlehmann>
and forward compat.

[10:06:17.0000] <erlehmann>
JonathanNeal if you have a script, please show and tell! :)

[10:07:03.0000] <caitp>
might have trouble with polymer on netscape 2 yeah

[10:16:11.0000] <erlehmann>
caitp in related news, i currently have 275 tabs open. that makes me kinda averse to needlessly complex solutions.

[10:16:20.0000] <erlehmann>
okcupid for example drives the system load way up.

[10:17:14.0000] <erlehmann>
i do not wish to burden others with similar stuff

[10:18:41.0000] <caitp>
heh, people have been doing this stuff with jQuery plugins and similar stuff for years, there's lots of solutions that don't include native unimplemented html5 features

[10:19:22.0000] <caitp>
and don't need you to wrap your elements with a polyfilled shadow DOM implementation

[10:19:51.0000] <erlehmann>
i usually avoid the “just use jquery” crowd :D

[10:34:32.0000] <SamB>
caitp: what, you mean there were releases of netscape before 4?

[10:35:23.0000] <Hixie>
so, back in 2004 i think the "inexperience" comment would have been misguided but at least an understandable misgiving

[10:36:03.0000] <Hixie>
at this point though, you have to just be a troll to claim that

[10:36:23.0000] <Hixie>
given that i alone have more experience writing the HTML spec than any member of the HTMLWG including TimBL had back when HTML4 was written

[10:36:49.0000] <Hixie>
i mean, there's many more legit ways you could insult us

[10:36:55.0000] <Hixie>
but that seems like a woefully dumb way to do it

[10:38:33.0000] <caitp>
who is insulting who?

[10:38:40.0000] <caitp>
did I miss something

[10:42:11.0000] <jgraham>
caitp: The inventor of the hypertext trolling protocol has been showing off his skills

[10:42:57.0000] <caitp>
I'm going to be disappointed if the hypertext trolling protocol isn't an RFC

[10:45:27.0000] <Hixie>
jgraham: he didn't invent http, tim did.

[10:46:56.0000] <jgraham>
Hixie: No Time invented the Transport variant :p

[10:47:07.0000] <jgraham>
*Tim

[10:48:17.0000] <TabAtkins>
caitp: http://lists.w3.org/Archives/Public/public-html-admin/2014Aug/0035.html

[10:52:06.0000] <Hixie>
oh, hober, hober, hober

[10:55:11.0000] <caitp>
well he does sound a bit cranky towards the end of that

[11:18:56.0000] <smaug____>
hayato: have you gone through all the cases where HTML spec uses getElementById internally and figure out how shadow dom should behave in those cases?

[11:19:15.0000] <smaug____>
hayato: hmm, I guess it is basically just https://www.w3.org/Bugs/Public/show_bug.cgi?id=26643

[11:21:11.0000] <Hixie>
caitp: hober? or roy?

[11:32:41.0000] <Hixie>
do we fetch style sheets that don't match media queries?

[11:32:46.0000] <Hixie>
we do, right? we just don't apply them?

[11:33:12.0000] <Hixie>
i wonder if we should make style sheets that don't match media queries but have dependencies not load their dependencies until the media queries match, or something

[11:50:52.0000] <Domenic>
Hixie: that question feels like it would star in http://jakearchibald.github.io/request-quest/

[11:51:03.0000] <Domenic>
JakeA ^

[11:51:47.0000] <JakeA>
I think it is in there

[11:52:03.0000] <JakeA>
It's certainly in the live version I do at conferences

[11:52:26.0000] <JakeA>
Hixie: currently we download low priority

[11:53:18.0000] <JakeA>
Doesn't block rendering

[11:54:05.0000] <JakeA>
Hixie: by dependencies do you mean @import?

[11:54:31.0000] <Hixie>
i mean needs="" or whatever we introduce to declare dependencies

[11:54:37.0000] <Hixie>
(or indeed @import)

[11:58:37.0000] <JakeA>
Could resolve dependencies but low priority

[12:00:02.0000] <JakeA>
Can't think of dependencies CSS would have

[12:00:43.0000] <TabAtkins>
JakeA: @import, @font-face, etc.

[12:01:17.0000] <TabAtkins>
Hixie: We tried doing lazy loading of image before. I don't think it worked?

[12:01:41.0000] <Hixie>
interesting

[12:02:04.0000] <Hixie>
i have a use case here which is "don't download this widget if the screen is too small"

[12:02:14.0000] <Hixie>
it's trivial to do via script, obviously

[12:02:21.0000] <Hixie>
but it's not clear how i'd do it automatically

[12:02:30.0000] <Hixie>
short of <script media>

[12:02:52.0000] <JakeA>
TabAtkins: @import is already a dependency. Fonts aren't always. They sound like use cases for resource hints though

[12:05:16.0000] <smaug____>
Hixie: http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#has-been-shipped " in the order in which they were added to their respective task source"

[12:05:19.0000] <smaug____>
what does the respective task source refer to

[12:05:27.0000] <smaug____>
if the ports aren't shipped, is the idea that port1.postMessage(foo); port2.postMessage(bar); ensures that foo is delivered first ?

[12:11:32.0000] <Hixie>
yeah

[12:12:09.0000] <Hixie>
smaug____: each port has its own task source, but this kinda merges them

[12:12:18.0000] <baku>
Hixie, the problem I see is that if port1 is sent to a worker, we cannot be sure that 'foo' is delivered before 'bar'.

[12:12:31.0000] <Hixie>
if port1 is sent to a worker, this no longer applies

[12:12:41.0000] <baku>
so that is a good solution only for delivering messages to the same event loop.

[12:12:45.0000] <baku>
ok

[12:12:57.0000] <Hixie>
this is only for ports that haven't been shipped anywhere yet

[12:13:07.0000] <Hixie>
if you ship port1 to a worker and back again, even, the guarantee is lost

[12:14:01.0000] <baku>
Hixie, ok. thanks.

[13:00:35.0000] <boogyman>
Hixie: wonder if we should make style sheets that don't match media queries but have dependencies not load their dependencies until the media queries match, or something  <—— This is really a double-edged sword. As an author, I've had use-cases where the Business prefers to pre-load data "in case" an option occurs, and others whom want to respect the current match. It would be nice if this could be a configuration option for UA

[13:03:13.0000] <Hixie>
well preloading or not is a different issue

[13:12:53.0000] <boogyman>
Isn't that what you were talking about? loading all media, regardless if the current state met the mq definitions?


2014-08-23
[17:06:16.0000] <Hixie>
boogyman: what i'm talking about is not loading a resource that has a media query that doesn't match

[17:07:27.0000] <boogyman>
and I was stating that I've had decisions on both sides of that fence.

[17:08:28.0000] <Hixie>
ah

[17:09:52.0000] <boogyman>
in my opinion, it can/should be a UA's decision on how to load a resource, not something that's defined in a specification (if that is what you were implying).

[17:10:09.0000] <Hixie>
if the resource is just not going to be used, seems dumb to load it

[17:10:28.0000] <Hixie>
anyone got an idea for the name of a flag that indicates that a resource should be loaded even if the browser thinks it's already been loaded?

[17:10:33.0000] <Hixie>
the opposite of "deduping"

[17:10:44.0000] <Hixie>
"force-unique-instance" or something

[17:13:07.0000] <boogyman>
Hixie: it may seem illogical to you, but that doesn't mean others cannot make a case for it. I just think that's outside of the bounds of any industry specification.

[17:13:48.0000] <Hixie>
do you think that if the page's entire markup is:   <!DOCTYPE HTML><p>Hello</p>   ...the browser should fetch "hello.png" from the server?

[17:16:46.0000] <boogyman>
If it's not defined in the document, of course not, but if <!DOCTYPE html><head><link type=text/css media="max-width:960px" src="foo.css"><link type=text/css media="min-width:1000x"></head>... is, then let the UA decide when to load those resources

[17:17:46.0000] <Hixie>
if we offer authors the feature to control whether a resource is fetched or not by including or not including a reference to the resource in the file, it seems reasonable that they would ask (as they have) for the ability to control whether a resource gets downloaded or not even when it _is_ mentioned in the file

[17:18:04.0000] <Hixie>
since otherwise they could just change their code to do the uglier thing of conditionally not including it at all

[17:46:46.0000] <Hixie>
oops, my e-mail was so long it got caught by the filter

[17:52:23.0000] <boogyman>
Hixie: I am saying that Authors should have no say in the matter, but User Agents should be able to decide their strategy, eg desktop agents may choose to load all because of an assumption of higher bandwidth capacity, where palm clients may choose to only load what currently matches... and maybe some UA's decide to provide a way for an end-user to control their preference. Point being, I...

[17:52:25.0000] <boogyman>
...think the spec would overstep it's bounds my making that a what/when decision. I do believe however it's within the bounds of the spec to define how something is loaded based upon the what/when.

[17:55:47.0000] <Hixie>
boogyman: authors have a say in the matter, you just agreed to that (by not including the element)

[17:56:08.0000] <Hixie>
btw if anyone is interested in the stuff i've been talking about here for the past few weeks, i finally posted my e-mail on the subject

[17:59:24.0000] <boogyman>
Hixie: I think it goes over the bounds of the UA to load any resource that is not defined in the source, either initially or given some author action (like post-render definition)

[18:02:19.0000] <JonathanNeal>
erlehmann, annevk, caitp, okay, I’m free to write something if we’re still looking for a polyfill.

[18:30:15.0000] <caitp>
I don't really get why  a <base href="host.com/base"> + <a href="/base/foo"></a> will resolve the anchor's url to "host.com/base/foo" rather than "host.com/base/base/foo"

[18:30:25.0000] <caitp>
who do I blame for that

[18:30:52.0000] <caitp>
well

[18:30:57.0000] <caitp>
sorry, add a slash on the end of the base href

[18:31:08.0000] <caitp>
the slash is implicit <_<

[18:32:34.0000] <caitp>
just making things behave weirdly and inconsistently for no reason other than the expectation that it's probably what most people want --- except for the people that don't @_@

[20:59:06.0000] <JonathanNeal>
What does the “currently-sorting flag” look like?

[21:01:57.0000] <JonathanNeal>
e.g. http://www.whatwg.org/specs/web-apps/current-work/multipage/tables.html#currently-sorting-flag - what does an element’s flag look like? Is it an attribute or something that can be seen in the dom or a kind of private state?

[21:44:29.0000] <zcorpan>
JonathanNeal: private state

[21:44:53.0000] <JonathanNeal>
zcorpan: oh okay, thanks

[21:46:06.0000] <JonathanNeal>
Have any browsers experimentally added table sortable support?

[21:48:56.0000] <caitp>
it's not listed on chromestatus, didn't see a bug for gecko yet, but it didn't work in nightly. I'd be pretty shocked if netsurf or servo are there yet

[21:50:31.0000] <caitp>
(so I'm guessing that's a no unless webkit has started on it)

[21:52:13.0000] <caitp>
might not be a bad candidate feature for blink-in-js though, at least as a preliminary thing

[21:53:15.0000] <JonathanNeal>
Okay.

[22:01:31.0000] <JonathanNeal>
Well, I’ve made some progress, and I’ll make some more on the plane tomorrow.

[22:04:57.0000] <JonathanNeal>
I don’t get how the UI is supposed to work, but I can experiment with the attributes working stand-alone.

[02:16:48.0000] <MikeSmith>
Hixie: damn you may have set another record with the length of the omnibus reply

[02:17:28.0000] <MikeSmith>
/me sets aside a week in his schedule to try to read through it

[03:13:02.0000] <MikeSmith>
Hixie: fwiw, I think in cases like this, you could better take the "here's the tentative proposal" part (which nobody is otherwise going to read until they've read the other hundreds of lines that precede it) and move it to the very beginning of the message -- along with a statement like "For the rationale behind this proposal, read the other 90% [literally] of this message that follows the actual proposal"

[03:14:07.0000] <MikeSmith>
Hixie: I think otherwise there aren't 7 people in the universe that are going to ever read far enough into that message to realize you've got a concrete proposal in there

[03:14:48.0000] <annevk>
MikeSmith: presumably those that do will tweet and then it'll sort itself

[03:15:36.0000] <MikeSmith>
annevk: yeah I suppose so

[03:16:28.0000] <MikeSmith>
even then I wish there was a way to link into subsections of archived e-mail messages

[03:17:07.0000] <MikeSmith>
the "Here's how this would handle the use cases listed above" part is great too but it also kind of gets buried at the end

[09:11:50.0000] <JonathanNeal>
Worked on some of the sortable js on the plane.

[10:03:43.0000] <smaug____>
annevk: FYI, the patch which makes Notification's click cancelable in Gecko is waiting for review

[16:35:08.0000] <gsnedders>
jgraham: also ergh merging PRs is so much harder with failing tests :(


2014-08-24
[19:22:02.0000] <JonathanNeal>
Hello!

[19:31:10.0000] <Hixie>
MikeSmith: yeah. though really people _should_ real the rationale before they comment.

[19:31:14.0000] <Hixie>
JonathanNeal: hello

[19:31:29.0000] <Hixie>
JonathanNeal: btw if you have any questions about the sort stuff don't hesitate to ping me

[19:31:46.0000] <JonathanNeal>
Hixie: I wrote up a little something, it doesn’t address all the use cases, but it works.

[19:32:47.0000] <Hixie>
the spec doesn't, or your impl doesn't?

[19:33:45.0000] <JonathanNeal>
As of right this second, my implementation is limited to ascending alphabetical sorting.

[19:34:22.0000] <Hixie>
ah

[19:34:44.0000] <Hixie>
the autosorting algorithm is the best part of the proposal :-)

[19:39:58.0000] <JonathanNeal>
Hixie: it’s kind of the point, yes?

[19:40:40.0000] <caitp>
i didn't read all of the details of the proposal, does it offer different sorting algorithms or even custom ones for people who want those?

[19:41:15.0000] <caitp>
well not so much algorithms

[19:41:27.0000] <caitp>
but comparison routines

[19:42:56.0000] <Hixie>
JonathanNeal: well, the point is sorting. it could do the job with a dumb algorithm, or with a selector for picking a simple algorithm, or with a callback or something

[19:43:01.0000] <JonathanNeal>
caitp: if it does, i missed that part, and was wondering the same thing. It has a lot of built in sorting rules. The thing that was most vague was how table[sortable] might be exposed to the ui.

[19:43:22.0000] <Hixie>
JonathanNeal: but instead it has the algorithm it has, which imho is pretty cool.

[19:43:33.0000] <Hixie>
caitp: i encourage you to read the spec

[19:43:45.0000] <Hixie>
JonathanNeal: re the UI, the idea was just that you'd click the <th> to sort by it.

[19:43:53.0000] <caitp>
i'll read it if i have time to hack together an implementation for blink :p

[19:44:06.0000] <caitp>
but my schedule is pretty tied up the next few months :(

[19:44:36.0000] <Hixie>
that is true of all of us

[19:46:02.0000] <JonathanNeal>
Let me share what I have. It’s the first draft, but it’s fun to see, maybe just for me though.

[19:47:39.0000] <JonathanNeal>
http://sandbox.thewikies.com/table-sorting/

[19:48:01.0000] <caitp>
cool stuff

[19:49:25.0000] <JonathanNeal>
I figured the standard sorting is based on the visible content of the cells, eg innerText and not textContent.

[19:49:44.0000] <Hixie>
JonathanNeal: if you're planning on implementing the spec's algorithm, i have a test dataset somewhere i can mail you if you want to test the spec against what i think the spec says

[19:49:58.0000] <JonathanNeal>
Yes, that would be wonderful.

[19:50:18.0000] <Hixie>
JonathanNeal: send me an e-mail, i'll find it and mail it to you (maybe monday when i get to work)

[19:51:08.0000] <JonathanNeal>
Sure thing.

[19:52:38.0000] <caitp>
it doesn't look like there's very much in the wpt about that feature yet, apart from idl assertions

[19:52:52.0000] <caitp>
you could probably contribute some while working on the polyfill

[19:55:34.0000] <JonathanNeal>
There are many steps. So far this: finds eligible tables, fires and checks the status of a sort event, gets the order of the heading cells, orders the body cells by that heading cell order. Thanks to Mr. DOMSubtreeModified, we can respond to changes instantly.

[19:58:06.0000] <JonathanNeal>
Oh and there’s a good catch, the event can’t remove the sortable attribute from the table, so it needs to be checked again. That’s wisely in the spec.

[22:48:49.0000] <Hixie>
JonathanNeal: sent

[02:08:07.0000] <smaug____>
annevk: why was get() added to Notification?

[02:10:04.0000] <smaug____>
looks like because of https://bugzilla.mozilla.org/show_bug.cgi?id=899574#c0

[02:10:39.0000] <smaug____>
rather error prone API

[02:12:44.0000] <annevk>
hmm, no better suggestions so far

[02:28:45.0000] <smaug____>
thinking..

[02:40:44.0000] <smaug____>
well, making click cancelable doesn't really make the API any worse

[02:41:06.0000] <smaug____>
but would be really really nice if one user input wasn't represented as several click events

[02:44:52.0000] <jgraham>
gsnedders: Yeah, we need a list of tests that are expected to fail. It's the only sane way to deal with the situation where you have tests from "upstream"

[05:54:54.0000] <gsnedders>
jgraham: not entirely clear how to implement that, though :(

[06:22:38.0000] <jgraham>
gsnedders: It's not impossible though. You just need to make up an id for the tests

[06:23:47.0000] <gsnedders>
jgraham: indeed

[07:23:58.0000] <smaug____>
annevk: have you seen this http://mxr.mozilla.org/mozilla-central/source/dom/webidl/XMLHttpRequest.webidl?mark=53-57#53

[07:24:11.0000] <smaug____>
apparently it was added in https://bugzilla.mozilla.org/show_bug.cgi?id=788369

[07:24:54.0000] <smaug____>
(just noticed while looking at some random .webidl files)

[07:29:41.0000] <caitp>
hah

[08:42:50.0000] <annevk>
hmm, have not, but that seems obsolete given that the constructor no longer takes any argument

[08:47:01.0000] <annevk>
caitp: the way <base> works is perfectly normal btw per URL parsing rules

[08:47:34.0000] <caitp>
it's not that it's anomalous or anything, it's just weird

[08:48:57.0000] <caitp>
"oh you want to go to /home/caitp/home/caitp? okay I'll send you to /home/caitp instead because I'm confused"

[08:49:45.0000] <caitp>
second guessing what the programmer wants, that's the weird part

[08:53:40.0000] <gsnedders>
"If all the bytes up to the last byte converted by the current decoder have the same Unicode interpretations in both the current encoding and the new encoding" - how do you check what characters have been seen?

[08:53:54.0000] <gsnedders>
do people just store whether non-ASCII chars have been seen and have a table?

[09:11:02.0000] <gsnedders>
html5lib is all over the place with spec complaince :(

[09:11:12.0000] <gsnedders>
up-to-date in places and nowhere elsewhere

[09:26:13.0000] <gsnedders>
jgraham: the big problem with the up to date tests is that we implement the scripting enabled case but don't support scripting, so the #script tests fail

[13:18:52.0000] <erlehmann>
JonathanNeal have you written a polyfill for table sortable?

[14:01:54.0000] <JonathanNeal>
erlehmann: yes, but it's still in development.

[14:02:01.0000] <erlehmann>
JonathanNeal show and tell! :)

[14:08:11.0000] <JonathanNeal>
Ok

[14:09:46.0000] <JonathanNeal>
http://sandbox.thewikies.com/table-sorting/ erlehmann

[14:13:51.0000] <erlehmann>
thx JonathanNeal

[14:22:17.0000] <JonathanNeal>
erlehmann: thanks. what would you like to see?

[14:24:08.0000] <paulohp>
hello guys! do you have more content about streams? eg.: https://whatwg.github.io/streams/

[14:25:11.0000] <erlehmann>
JonathanNeal ▼ U+25BC BLACK DOWN-POINTING TRIANGLE in header of primary sorting column. ▽ U+25BD WHITE DOWN-POINTING TRIANGLE in header of other columns.

[14:25:31.0000] <erlehmann>
using ▲ U+25B2 BLACK UP-POINTING TRIANGLE for reverse sort.

[14:25:36.0000] <erlehmann>
like wikipedia does


2014-08-25
[17:25:13.0000] <JonathanNeal>
erlehmann: wikipedia uses a background image for the effect, e.g. http://en.wikipedia.org/wiki/Help:Table#Nowrap

[17:26:04.0000] <erlehmann>
JonathanNeal i see. bloat!

[17:30:29.0000] <JonathanNeal>
erlehmann: what kind of system are you on? How does http://sandbox.thewikies.com/table-sorting/ look? (the buttons don’t do anything, currently)

[17:31:48.0000] <erlehmann>
JonathanNeal GNU/Linux, using the conkeror web browser (mozilla with emacs-like key-bindings) i also have chromium here for testing

[17:32:05.0000] <erlehmann>
the thing you linked looks ugly. i'll make a screenshot

[17:32:22.0000] <JonathanNeal>
Thanks.

[17:35:42.0000] <erlehmann>
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG0AAAA6AQMAAACAvUVaAAAABlBMVEX///8AAABVwtN+AAAAjUlEQVQokWNgGAUo4D+DDBKPsZmBB8ywcQCRzIxQLs8BEMkO5z4AcxmkeZ7b/6tn4IVyDXuSJY4ZNvB+gHANzoC5/BAuI4z7A2IyCpexybAnHcz9A7bgj7yc/d731Qfs/6A4lv8fClcelUsJQDOZH9VedjTuDxQuMxr3AwqXEY37ANViNO4BVK4Dw5AEAMi9LR5r3QUHAAAAAElFTkSuQmCC

[17:35:55.0000] <erlehmann>
JonathanNeal this is how it looks like

[17:36:48.0000] <erlehmann>
looking at the CSS, i can see why!

[17:37:04.0000] <JonathanNeal>
Yea, that’s ugly, all right. I think I’ll need data uri svgs. Some browsers won’t allow such small font sizes.

[17:37:22.0000] <erlehmann>
?

[17:37:45.0000] <erlehmann>
then do not make it small

[17:37:54.0000] <erlehmann>
if the browser does not allow small fonts that is for a reason

[17:38:03.0000] <erlehmann>
i, for example, have a problem with low-contrast imagery

[17:38:15.0000] <JonathanNeal>
Right, but we’re taking advantage of fonts to create controls. So, just don’t do that, use an SVG.

[17:38:27.0000] <erlehmann>
to have a smaller control?

[17:38:37.0000] <erlehmann>
let me look at the styling issue

[17:38:38.0000] <erlehmann>
wait

[17:38:52.0000] <JonathanNeal>
Yes. They don’t need to be that large. They need to look like what we see on a select box.

[17:39:11.0000] <erlehmann>
the select box respects my font size

[17:39:14.0000] <erlehmann>
and has large arrows

[17:39:27.0000] <erlehmann>
let me try something

[17:40:29.0000] <JonathanNeal>
Sure, well, show me a screenshot. I was going to use an SVG and size it to be 1em, respecting the font size of your tables.

[17:40:45.0000] <JonathanNeal>
While copying the usecase you shared with me, wikipedia.

[17:42:36.0000] <erlehmann>
table[sortable] th::after { content: '▲▼'; cursor: pointer; display: inline-block; padding: 0 0.5em; }

[17:42:38.0000] <erlehmann>
works for me

[17:42:56.0000] <erlehmann>
putting the arrows beside each other

[17:43:02.0000] <erlehmann>
instead of over each other

[17:43:15.0000] <erlehmann>
and not position absolute

[17:43:16.0000] <erlehmann>
but flow!

[17:43:25.0000] <erlehmann>
so they flow, even in RTL languages

[17:43:42.0000] <erlehmann>
wait i provide screenshot

[17:44:40.0000] <caitp>
I'm not sure the spec actually prescribes a UI for sorting columns (although there's no reason not to I guess), a polyfill would only deal with what is actually outlined in the spec, one imagines

[17:45:04.0000] <erlehmann>
caitp to sort a table you need some UI

[17:45:28.0000] <caitp>
to do it from user interactions yes, but the user interactions aren't specified

[17:45:43.0000] <caitp>
they specify an API for sorting tables

[17:45:54.0000] <erlehmann>
yeah, so take any interactions. like the one with the arrows!

[17:46:01.0000] <erlehmann>
(which is used pretty often, i guess)

[17:47:10.0000] <erlehmann>
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAAAUAQMAAABRZ9FmAAAABlBMVEX///8AAABVwtN+AAAA4klEQVQoFc3BsU3DQBSA4f+eDQkV0CAQEfYIDIDkjMAIHgOJiDwEE9FHug463NKdlCJ0uQIpLiybnA8SJQMgvo9/o2PEjswlylqiBGKe8QQ3FDXBqbYERyX51CPyQFRBTXBtiZQxHknZcPSUjRMLQnfJominrHl683K06N7dFygOgTOdfLy9KHiipPKTi9UtJUMHAt2YH47ok8BYAxbB8KsmyomU1IM0bFkCJTK5gCLto7EpvYZelZ+jwIFFataa7KqYLe9tQUIve5q/rmbLu2M3aA/ZYdgz6ASErY49Q1r+yDd9/kX9FVlNvQAAAABJRU5ErkJggg==

[17:47:25.0000] <erlehmann>
JonathanNeal does that look bad?

[17:47:35.0000] <erlehmann>
(apart from this being a 1-bit picture)

[17:48:30.0000] <erlehmann>
the arrows just flow

[17:49:00.0000] <JonathanNeal>
erlehmann: no it doesn’t look bad, but most of this polyfill requires IE9+ anyway, so I stand by things being better with a polyfill. Hacking text to look like a control is … hacky.

[17:49:49.0000] <erlehmann>
JonathanNeal „stand by things being better“ means what exactly? more complexity?

[17:50:08.0000] <erlehmann>
some text is there to provide controls.

[17:51:46.0000] <erlehmann>
JonathanNeal the unicode triangles will certainly provide a) smaller code size b) less complexity c) more compatibility d) “native feeling” since they are in the font the page is in

[17:52:53.0000] <erlehmann>
JonathanNeal if you license your polyfill permissively i can always rip out the parts i don't like, so please do it. ;>

[17:53:54.0000] <erlehmann>
JonathanNeal meanwhile can you see the following glyphs? 🗔 🗕 🗖 🗗 🗘 🗙 🗚 🗛

[17:55:06.0000] <erlehmann>
Or these? 🔀	🔁	🔂	🔃	🔄

[17:55:26.0000] <erlehmann>
maybe i am mistaken, but i think they are intented as labels for controls!

[17:55:59.0000] <JonathanNeal>
erlehmann: i saw none of the first glyphs you posted.

[17:56:14.0000] <erlehmann>
JonathanNeal which platform are you on?

[17:56:15.0000] <JonathanNeal>
Just a bunch of boxes.

[17:56:34.0000] <JonathanNeal>
Mac.

[17:56:46.0000] <erlehmann>
okay, then you don't have up-to-date unicode coverage.

[17:56:51.0000] <erlehmann>
just look at this picture http://daten.dieweltistgarnichtso.net/pics/icons/unifont-symbols-emoji.png

[17:56:58.0000] <erlehmann>
i am drawing characters for GNU unifont

[17:57:12.0000] <erlehmann>
and there are quite some who are clearly meant to be part of controls

[17:57:35.0000] <erlehmann>
i posted the window bar maximize, minimize, restore icons

[17:57:42.0000] <erlehmann>
where you saw the bunch of boxes

[17:59:51.0000] <erlehmann>
hyperlinks are “text as control” btw

[18:31:51.0000] <JonathanNeal>
erlehmann: if there is a way to do this in windows, mac, and linux, then awesome.

[18:32:15.0000] <erlehmann>
JonathanNeal if you want to have up to date unicode coverage, install unifont.

[18:32:33.0000] <erlehmann>
here http://unifoundry.com/unifont.html

[18:32:36.0000] <erlehmann>
:)

[18:32:42.0000] <erlehmann>
or better … ☺

[18:32:45.0000] <JonathanNeal>
svgs are an excellent way of doing them as well, we can fallback on a 1x png

[18:33:21.0000] <JonathanNeal>
erlehmann: its unreasonable to load a font face just to get table sortables

[18:34:01.0000] <erlehmann>
JonathanNeal of course it is. but the pointing triangles (▲▼) are widely supported

[18:34:12.0000] <erlehmann>
they are in unicode since whatever

[18:34:36.0000] <erlehmann>
better than SVG

[18:34:53.0000] <erlehmann>
http://en.wikipedia.org/wiki/Geometric_Shapes

[18:35:01.0000] <erlehmann>
> ^ The Unicode Standard Version 1.0, Volume 1. Addison-Wesley Publishing Company, Inc. 1990, 1991. ISBN 0-201-56788-1.

[18:35:18.0000] <erlehmann>
JonathanNeal if 20+ years of unicode is not good enough, then i don't know!

[18:36:28.0000] <JonathanNeal>
got it

[18:39:48.0000] <erlehmann>
:)

[18:40:28.0000] <erlehmann>
hey, did you know you can make almost everything seem slightly passive-aggressive if you append a smilie? :)

[18:44:01.0000] <JonathanNeal>
erlehmann: sorry if i was communicating poorly, i was watching my kids between responses

[18:44:33.0000] <erlehmann>
JonathanNeal no problem. i am appreciating not having to write a polyfill myself!

[18:45:08.0000] <JonathanNeal>
erlehmann: i would love to see your other work. github? twitter?

[18:45:42.0000] <erlehmann>
i rarely use github since they blocked by account once

[18:45:45.0000] <erlehmann>
but here https://github.com/erlehmann

[18:46:23.0000] <erlehmann>
there is also http://news.dieweltistgarnichtso.net/ and http://daten.dieweltistgarnichtso.net/src/

[18:46:53.0000] <erlehmann>
JonathanNeal the most useful thing i ever wrote was probably this https://github.com/wpoa/open-access-media-importer

[18:47:09.0000] <erlehmann>
it is a bot that uploads audio and video files to wikimedia commons

[18:47:58.0000] <erlehmann>
the most interesting thing i wrote was probably libglitch http://news.dieweltistgarnichtso.net/talks/music-c-compiler.html

[18:49:07.0000] <erlehmann>
if you want to make similarly useless data uris, i have a CLI alternative to Hixie's data uri kitchen! http://news.dieweltistgarnichtso.net/bin/file2datauri.html

[18:49:46.0000] <erlehmann>
i should really collect all that stuff

[18:49:55.0000] <erlehmann>
in one place

[18:50:12.0000] <erlehmann>
JonathanNeal do you have a portfolio type site?

[18:55:40.0000] <JonathanNeal>
github.com/jonathantneal

[18:56:49.0000] <erlehmann>
if you are into electronic music, watch my talk about making music with a c compiler!

[18:57:32.0000] <JonathanNeal>
and if you’re into code, listen to my electronic music about the internet http://jonneal.bandcamp.com/

[18:58:15.0000] <erlehmann>
> Paul Irish's jQuery Anti-Pattern for Performance of the Week 00:07

[18:58:25.0000] <JonathanNeal>
That will change your life.

[18:58:27.0000] <erlehmann>
i almost laughed :D

[18:58:54.0000] <JonathanNeal>
It is the soundtrack of a podcast http://yayquery.com/

[18:59:25.0000] <erlehmann>
if you can speak german, i also did a podcast some time ago

[18:59:30.0000] <erlehmann>
http://warumnicht.dieweltistgarnichtso.net

[19:00:29.0000] <erlehmann>
a podcast about … jquery

[19:00:31.0000] <erlehmann>
how odd

[19:01:10.0000] <kriskowal_>
whynot.theworldisnotlikethatatall.net/itisalldifferent

[19:02:30.0000] <erlehmann>
hehe

[19:03:11.0000] <JonathanNeal>
Well, wife is back to watch the kids, so now I can get back to coding that polyfill. erlehmann, i always release cc0 so remix it as you like.

[19:03:56.0000] <erlehmann>
kriskowal_ here :D http://daten.dieweltistgarnichtso.net/tmp/etc_passwd

[19:04:18.0000] <erlehmann>
it gives

[19:04:19.0000] <erlehmann>
HTTP/1.1 302 Found

[19:04:22.0000] <erlehmann>
Location: file:///etc/passwd

[19:04:56.0000] <erlehmann>
if i remember correctly, python's urllib could be fooled that way

[23:11:58.0000] <zcorpan>
/me notices poster="" doesn't use crossorigin

[23:13:12.0000] <zcorpan>
i guess the poster frame is never painted on a canvas so it's just the dimensions that leak but you can get them with <img> already

[00:35:46.0000] <MikeSmith>
so Android apparently provides an API that's smart enough to detect if you're on a metered connection or not

[00:35:52.0000] <MikeSmith>
http://stackoverflow.com/questions/23877476/android-why-connectivitymanager-isactivenetworkmetered-always-returning-true/23879816#23879816

[00:36:22.0000] <MikeSmith>
by way of Jonas

[00:36:32.0000] <MikeSmith>
marcosc: I guess you already know about that

[00:37:03.0000] <SamB>
hmm, I guess it's not *that* surprising that your phone would be aware of how it is billed

[00:37:11.0000] <MikeSmith>
(relevant to the network-information API work)

[00:38:09.0000] <MikeSmith>
SamB: there are lots of things your phone knows that are aren't exposed to web content

[00:38:19.0000] <SamB>
oh, is that one, then?

[00:38:29.0000] <MikeSmith>
it has been in the past

[00:38:30.0000] <foolip>
annevk: fullscreen this week?

[00:39:51.0000] <MikeSmith>
SamB: and still is have iOS afaik -- that is, there's no iOS native API that provides the same info at that Android API does. Or maybe there is and I just missed the news

[00:40:03.0000] <SamB>
I suppose most users *would* probably prefer the content be asked to avoid frivolous bandwidth usage

[00:40:51.0000] <SamB>
MikeSmith: what, sense? iphone? how are those related?

[00:41:30.0000] <MikeSmith>
don't understand what you're asking

[00:42:42.0000] <SamB>
/me is not an apple fanboy

[00:42:46.0000] <MikeSmith>
if the iphone SDK doesn't provide a native API that the browser could use, then the browser has nothing it could use to expose the info to Web content

[00:43:01.0000] <MikeSmith>
is what I meant

[00:43:08.0000] <SamB>
sure

[00:44:07.0000] <SamB>
though, I'm not sure how much of an issue that would actually be if Apple's browser people wanted to make it happen ...

[01:02:44.0000] <annevk>
foolip: think so, also need to look at notifications

[01:28:10.0000] <foolip>
annevk: cool!

[01:58:48.0000] <zcorpan>
Hixie: as for names, i thought dashes were avoided for new attributes

[02:20:21.0000] <mounir_>
annevk: can you have another look at https://github.com/w3c/screen-orientation/pull/58

[02:33:06.0000] <annevk>
mounir_: it seems okayish

[02:33:16.0000] <annevk>
mounir_: it seems it would be better if we defined actual hooks

[02:35:14.0000] <mounir_>
annevk: if you want to do that, I wouldn't mind :)

[02:40:21.0000] <annevk>
mounir_: I recommend adding an XXX comment for now

[02:40:41.0000] <annevk>
mounir_: we can do it once things around animation frame tasks are a bit more settled

[02:41:11.0000] <annevk>
I guess I can add a note at some point in Fullscreen too so I don't forget

[02:49:49.0000] <mounir_>
annevk: I can open an issue marked as Future

[02:51:11.0000] <annevk>
k

[02:51:21.0000] <annevk>
zcorpan: poster not using crossorigin seems like an oversight

[02:52:15.0000] <mounir_>
annevk: https://github.com/w3c/screen-orientation/issues/62

[02:52:22.0000] <zcorpan>
annevk: yeah likely. but not sure we should change it now

[02:53:02.0000] <annevk>
zcorpan: it would mean e.g. that if you have <video crossorigin> the poster cannot be retrieved over the same connection

[02:53:15.0000] <annevk>
zcorpan: because it would be retrieved with cookies

[02:53:23.0000] <zcorpan>
annevk: yeah

[02:53:24.0000] <annevk>
zcorpan: seems bad for perf

[02:54:57.0000] <zcorpan>
annevk: wait i don't follow why it can't use the same connection

[02:55:41.0000] <annevk>
zcorpan: https://www.w3.org/Bugs/Public/show_bug.cgi?id=26556

[03:02:11.0000] <zcorpan>
annevk: is it like this: <video poster> makes a new fetch, with credentials (username/password?), then <video src crossorigin=anonymous> makes a new fetch that has to start a new connection to omit the credentials

[03:03:54.0000] <mathiasbynens>
annevk, for context: I’m working on this ES6 Unicode regular expression transpiler http://mothereff.in/regexpu (and I want it to be correct)

[03:04:55.0000] <annevk>
zcorpan: yeah, "omit credentials" is not fully defined at the moment, it actually ensures to not reuse a connection so the server is less clear on it being the same client

[03:05:27.0000] <zcorpan>
annevk: ok

[03:05:46.0000] <annevk>
mathiasbynens: in the meeting I was in, all extensions were out because nobody had time to work them out

[03:06:42.0000] <annevk>
mounir_: see also http://annevankesteren.nl/2014/02/monkey-patch

[03:08:57.0000] <zcorpan>
annevk: <video poster crossorigin=anonymous> is probably used pretty rarely so maybe we can still change it

[03:09:36.0000] <annevk>
zcorpan: it would affect any poster crossorigin  combination

[03:09:54.0000] <annevk>
zcorpan: poster not having CORS would prevent it from being displayed

[03:11:12.0000] <zcorpan>
yeah true

[03:11:48.0000] <annevk>
I like all these rumors on reversible USB cables, hope they become mainstream soonish

[03:13:52.0000] <mounir_>
annevk: I'm fully aware of the monkey patch article

[03:16:24.0000] <annevk>
mounir_: the reason I'm pointing to it is that you have not filed bugs for hooks or requested specific hooks

[03:18:27.0000] <mounir_>
annevk: it did not feel that much needed for fullscreen

[03:18:36.0000] <mounir_>
I did for the HTML specification

[03:22:52.0000] <mathiasbynens>
annevk: did you ever see encodings like `utf-8859-1` in the wild?

[03:22:56.0000] <mathiasbynens>
at first glance, it looks like that should be `iso-8859-1` which is a label for `windows-1252`

[03:23:04.0000] <mathiasbynens>
https://github.com/ForbesLindesay/legacy-encoding/issues/1#issuecomment-53221336

[03:25:19.0000] <mathiasbynens>
maybe those should be added as labels?

[03:36:48.0000] <annevk>
mathiasbynens: only if we can be sure that would not degrade user experience

[03:37:07.0000] <mathiasbynens>
/me files bug

[03:37:37.0000] <annevk>
mathiasbynens: sites are known to have labels such as euc_jp and if you treat that as euc-jp you display the site wrong

[03:39:29.0000] <mathiasbynens>
annevk: oh wow :(

[03:39:36.0000] <mathiasbynens>
anyway, filed https://www.w3.org/Bugs/Public/show_bug.cgi?id=26655#c0

[03:40:10.0000] <annevk>
not sure what I can do with that bug

[03:40:59.0000] <zcorpan>
annevk: possibly browsers can't use the same connection for video anyway because video does things like abort the connection and start a new one when seeking (and OGG seeks to the end when loading to get the duration)

[03:47:11.0000] <foolip>
zcorpan: seems like an oversight that crossorigin doesn't apply to the poster, no?

[03:47:14.0000] <annevk>
zcorpan: not even with HTTP/2?

[03:47:31.0000] <zcorpan>
foolip: sure

[03:47:39.0000] <zcorpan>
annevk: dunno

[03:48:17.0000] <zcorpan>
on github i only find test cases and demos that use both crossorigin and poster

[03:51:07.0000] <foolip>
I'd be somewhat surprised if there's any content that depends on <video crossoriginal=""> at all

[03:51:22.0000] <foolip>
heh, -al

[03:56:22.0000] <zcorpan>
mathiasbynens: in webdevdata from last year i see two instances of utf-8859-1 (in http content-type) that appear would have no difference if the label was supported since the correct name is in a <meta>

[04:18:16.0000] <mathiasbynens>
zcorpan: the link ^ has several examples where `utf-8859-1` (and others) are used in both the XML prolog and in <meta>, and the `Content-Type` header does not specify any encoding

[04:21:34.0000] <zcorpan>
mathiasbynens: all www-style stuff?

[04:21:49.0000] <mathiasbynens>
yep

[04:22:00.0000] <mathiasbynens>
mails sent by different people, though

[04:23:36.0000] <zcorpan>
weird. anyway, would need research what the web compat situation is like outside www-style before changing the spec

[04:31:37.0000] <Manishearth>
Ms2ger: what do you think of https://blog.mozilla.org/privacy/2014/07/22/prefersafe-making-online-safety-simpler-in-firefox/ ?

[04:32:48.0000] <Manishearth>
Firstly, how often does Mozilla do the implement-first-standards-later thing? It's a bit annoying :s

[05:09:47.0000] <annevk>
Manishearth: seems there's a draft; like everyone else Mozilla implements plenty of those

[05:12:25.0000] <Manishearth>
annevk: ah, okay

[05:52:04.0000] <aleray>
hi, I'm working with not that consistent rdf data and a same resource might be expressed with a trailing slash or not, and with the http or https protocole. For instance "http://example.org/triples.rdf" or "https://example.org/triples.rdf/" are the same resource. How can I construct sparql requests that query all variants?

[05:52:27.0000] <aleray>
or is there a way to  normalize uri with rdflib?

[05:53:22.0000] <Ms2ger>
I don't think you want to be asking RDF questions here

[05:53:29.0000] <m4nu>
/me grins.

[05:53:52.0000] <m4nu>
hey aleray, you should probably ask that question on #swig on irc.w3.org - let me get some more info for you.

[05:54:09.0000] <m4nu>
the short answer is, yes there are ways to construct SPARQL queries to match that sort of data.

[05:55:22.0000] <m4nu>
aleray: sorry, it's #swig (Semantic Web Interest Group) on irc.freenode.net

[05:55:55.0000] <m4nu>
They'll be able to help you out.

[05:57:18.0000] <aleray>
m4nu, Ms2ger thanks. Waiting for an answer there

[05:57:35.0000] <aleray>
on the rdflib level there is nothing to do to normalize at parsing time?

[05:57:50.0000] <aleray>
oups

[05:58:02.0000] <aleray>
sorry those questions where meant for #rdflib

[05:58:12.0000] <aleray>
just noticed

[06:43:27.0000] <smaug____>
annevk: what you mean with "as the events go to the service worker directly."

[07:09:42.0000] <annevk>
smaug____: see the proposal, the idea is for the service worker to support notification events

[07:17:46.0000] <smaug____>
annevk: proposal where?

[07:18:09.0000] <smaug____>
mailing list?

[07:21:45.0000] <smaug____>
ok, if that prevents several events for one user input, fine

[07:47:47.0000] <annevk>
smaug____: yeah, linked from the GitHub issue

[07:49:20.0000] <smaug____>
annevk: we may still need some kind of list of open Notifications

[07:49:25.0000] <smaug____>
which wouldn't clone

[07:49:57.0000] <smaug____>
I think that would let b2g to have the Notification open even while the app is restarted and then get access to the Notification

[07:50:05.0000] <smaug____>
or something close to that...

[07:50:06.0000] <smaug____>
hmm

[07:51:05.0000] <smaug____>
a bit odd too, since in some cases it would create new Notification objects...

[07:51:09.0000] <smaug____>
but maybe it isn't too bad

[08:01:39.0000] <smaug____>
hmm, no, that wouldn't work

[08:48:30.0000] <Hixie>
zcorpan: yeah, the names in that e-mail are mostly placeholders until someone can give better names

[11:08:25.0000] <jsbell>
Apropos of nothing: over the weekend, between dealing with grumpy children, I converted a hobby project's use of XHR over to a Fetch prollyfill.

[11:11:12.0000] <caitp>
neat

[11:14:54.0000] <jsbell>
Converting non-200s to rejections seemed to be a common pattern in adapting the code, since my old code wanted error callbacks. Also, network errors as TypeError (spec section 5.6) seems a bit odd, but it seems like we're using TypeError for everything these days.

[11:16:28.0000] <jsbell>
And on that note: I wonder if we can get away with converting some uses of DataError to TypeError in the IDB spec - e.g. for invalid keys - so we can replace some prose with better IDL.

[11:18:55.0000] <caitp>
> network errors as TypeError (spec section 5.6) seems a bit odd, but it seems like we're using TypeError for everything these days.

[11:19:01.0000] <caitp>
that does sound profoundly odd

[11:19:32.0000] <caitp>
assuming you mean network errors as in status === 0

[11:19:50.0000] <caitp>
although it would be just as odd for status === 400

[11:20:34.0000] <jsbell>
yes, for status === 0. Assuming I'm reading the spec right.

[11:22:15.0000] <Domenic>
The idea is fetch() is something that could potentially be useful in more than just web environments

[11:22:24.0000] <Domenic>
And ES only provides a few error types, with TypeError being the catch-all

[11:24:37.0000] <caitp>
there's no reason DOMExceptions / Errors couldn't be defined in ES, there's nothing really web-specific in them

[11:24:47.0000] <jsbell>
Yeah; I can usually squint and say "I guess that's sort-of a 'you passed the wrong sort of thing here', so TypeError makes sense". This one stood out, but *shrug*.

[11:25:09.0000] <jsbell>
Eh, I don't want ES littered with more new error types.

[11:51:31.0000] <gsnedders>
I'd like more error types, but hey.

[12:13:10.0000] <annevk>
jsbell: since we don't reveal types of network errors, TypeError seemed fine

[12:13:26.0000] <annevk>
jsbell: I guess the only downside would be that you also get that for incorrect usage of the API

[12:14:14.0000] <jsbell>
I don't have a better suggestion.

[12:23:57.0000] <Domenic>
JakeA et al: does Cache have any sense of URL normalization? E.g. storing a request with URL example.com/ vs. example.com ?

[12:26:06.0000] <JakeA>
Domenic: good point, we should make .add something sensible with redirects

[12:26:40.0000] <JakeA>
Although example.com will be the same as example.com/

[12:27:16.0000] <Domenic>
right, i guess my quesiton is, to what extent is Cache just a key/value store, vs. a canonicalized-URL/value store.

[12:31:04.0000] <JakeA>
It's more than key-value. The matching is like the browser cache, but better (stores entries per vary variation)

[13:17:17.0000] <mathiasbynens>
redirects aside, i’d expect the same URL normalization that is being used everywhere else on the platform, i.e. `function normalize(url) { var el = document.createElement('a'); el.href = url; return el.href; }`

[13:27:12.0000] <zcorpan>
mathiasbynens: document encoding or utf-8 for the query?

[13:28:12.0000] <mathiasbynens>
zcorpan: doesn’t the above always use utf-8?

[13:29:10.0000] <zcorpan>
no

[13:46:33.0000] <mathiasbynens>
woah

[13:48:34.0000] <mathiasbynens>
zcorpan, do you happen to have a link/example?

[13:48:58.0000] <Hixie>
annevk: "flush out" means "empty", "flesh out" means "fill", fwiw.

[13:49:04.0000] <caitp>
short of the custom elements stuff, was there ever a proposed JS api for enqueueing microtasks?

[13:50:49.0000] <jsbell>
caitp: Not a serious one that I recall...

[13:51:07.0000] <caitp>
hm

[13:51:12.0000] <Hixie>
caitp: create a promise and resolve it straight away?

[13:51:28.0000] <erlehmann>
so this still works? http://gsnedders.html5.org/outliner/process.py?url=http%3A%2F%2Fdaten.dieweltistgarnichtso.net%2Ftmp%2Fetc_passwd

[13:51:32.0000] <erlehmann>
gsnedders helo

[13:58:03.0000] <Domenic>
yes, but ideally we should have global.asap(function () { }) instead of having to do Promise.resolve().then(function () { })... so silly.

[14:00:52.0000] <jgraham_>
erlehmann: What's the problem?

[14:01:08.0000] <erlehmann>
http://daten.dieweltistgarnichtso.net/tmp/dev_urandom

[14:01:12.0000] <erlehmann>
http://gsnedders.html5.org/outliner/process.py?url=http%3A%2F%2Fdaten.dieweltistgarnichtso.net%2Ftmp%2Fdev_urandom

[14:01:50.0000] <erlehmann>
jgraham_ gsnedders outliner accepts 302 redirects to file: URLs

[14:13:49.0000] <annevk>
Hixie: need some context

[14:13:51.0000] <annevk>
Hixie: https://twitter.com/brucel/status/503900281089032192

[14:14:06.0000] <Hixie>
annevk: in some bug you had said we needed to "flush out" some step or other

[14:15:45.0000] <annevk>
ah, thanks, I should've known that :-)

[15:53:35.0000] <caitp->
Hixie: it kind of amazes me that I'm saying this, but one of the nice things about the ES specs is the tendency to give blocks in instructions (like loops, or case statements, etc) into nested lists, so it's a bit easier to read and visualize. It would be really nice if that could be done for the html stuff ._.

[15:54:12.0000] <caitp->
as it is I usually end up copy/pasting it into a text editor and laying it out like that manually, which is time consuming :>

[15:55:05.0000] <Hixie>
html does do that quite a lot

[15:55:13.0000] <Hixie>
if you have any specific cases that are hard to understand, file a bug

[15:55:41.0000] <caitp->
will do

[16:07:09.0000] <gsnedders>
erlehmann: I know

[16:08:00.0000] <gsnedders>
erlehmann: it's not my server, and nobody's bullied me into fixing it yet, and I've been pretty busy :P

[16:08:05.0000] <gsnedders>
erlehmann: pull requests welcome!

[16:08:22.0000] <erlehmann>
gsnedders how could i exploit it?

[16:08:57.0000] <gsnedders>
erlehmann: mostly it seems like private html files on the server are the risk

[16:09:06.0000] <gsnedders>
erlehmann: not that likely to be many

[16:11:11.0000] <erlehmann>
hmm ._.

[16:11:51.0000] <gsnedders>
erlehmann: still absolutely should be fixed

[16:22:13.0000] <erlehmann>
gsnedders just upgrade python.j

[16:22:18.0000] <erlehmann>
i bet the new urllib has it fixed.

[16:33:09.0000] <gsnedders>
erlehmann: I don't want to have to maintain my own version of Python!


2014-08-26
[20:57:46.0000] <zcorpan>
mathiasbynens: www.w3c-test.org:82/html/infrastructure/urls/resolving-urls/query-encoding/

[20:57:55.0000] <zcorpan>
mathiasbynens: www.whatwg.org/specs/web-apps/current-work/multipage/infrastructure.html#resolve-a-url

[21:03:19.0000] <zcorpan>
mathiasbynens: https://www.w3.org/Bugs/Public/show_bug.cgi?id=23822

[02:33:32.0000] <annevk>
working with foolip is the best <3

[02:45:10.0000] <MikeSmith>
hsivonen: Can you remind me of there's a reason were sticking with the old version of jetty we're using for the validator

[02:46:15.0000] <foolip>
annevk: I love you dearly too, taking a look at the changes now :)

[02:46:34.0000] <MikeSmith>
hsivonen: I ask because, I think the version were using is not even getting security updates any longer

[02:46:38.0000] <foolip>
or after lunch, *poof*

[03:22:12.0000] <zcorpan_>
i wonder what the state of <legend> is these days

[03:24:37.0000] <zcorpan_>
looks like display:block doesn't work in blink at least

[03:25:12.0000] <zcorpan_>
     <li><p>The <code>figure</code> element now uses a new element

[03:25:13.0000] <zcorpan_>
     <code>figcaption</code> rather than <code>legend</code> because people

[03:25:13.0000] <zcorpan_>
     want to use HTML long before it reaches W3C Recommendation.</li>

[03:35:19.0000] <MikeSmith>
zcorpan_: what is expected to ever change with the state of legend?

[03:48:47.0000] <zcorpan_>
MikeSmith: to be stylable like a normal element

[03:49:07.0000] <zcorpan_>
MikeSmith: at least when not in a fieldset

[03:50:26.0000] <zcorpan_>
MikeSmith: and follow http://www.whatwg.org/specs/web-apps/current-work/multipage/rendering.html#the-fieldset-and-legend-elements when it is

[03:51:13.0000] <MikeSmith>
Ah ok

[03:52:20.0000] <zcorpan_>
so it seems we still can't reuse <legend> for a new element

[03:53:29.0000] <zcorpan_>
and it will probably continue to be P5 because nobody cares about future elements not being able to reuse <legend>

[05:58:21.0000] <zcorpan_>
MikeSmith: i've updated http://platform.html5.org/history/

[06:01:06.0000] <MikeSmith>
/me looks

[06:02:35.0000] <MikeSmith>
excellemente

[06:03:45.0000] <MikeSmith>
zcorpan_: nice updates

[06:04:28.0000] <MikeSmith>
hmm the e.g., http://html5.org/r/1115-1153 stuff doesn't work any more

[06:04:28.0000] <zcorpan_>
thx. i didn't include new copies of the spec though

[06:04:42.0000] <zcorpan_>
yeah

[06:04:53.0000] <MikeSmith>
yeah I don't think we need new copies

[06:12:29.0000] <annevk>
MikeSmith: sorry, didn't realize anyone was using those links

[06:12:51.0000] <MikeSmith>
no worries, not sure we really needed them

[06:13:41.0000] <annevk>
SimonSapin: any updates on the IPv4 stuff?

[06:16:11.0000] <SimonSapin>
annevk: not really

[06:17:02.0000] <annevk>
SimonSapin: is Rust attempting to solve this somehow?

[06:19:59.0000] <SimonSapin>
annevk: when you open a socket with a string for the host Rust’s standard library parses IPv4 and IPv6 addresses, and for things that it considers neither uses the system’s thing for resolving names, which in turn also attempts to parse IPv4 and IPv6 addresses but depending on the system may or may not support exotic v4 formats

[06:20:30.0000] <annevk>
good times

[06:20:53.0000] <SimonSapin>
I looked into various POSIX APIs, it seems hard to force a DNS query and bypass the address parsing

[06:21:01.0000] <SimonSapin>
unless you’re willing to implement DNS yourself, I guess

[06:21:14.0000] <foolip>
annevk: not sure if I stumbled onto a bigger problem in https://www.w3.org/Bugs/Public/show_bug.cgi?id=26673

[06:22:42.0000] <annevk>
foolip: not really sure how to solve it yet

[06:22:45.0000] <annevk>
SimonSapin: sigh

[06:24:51.0000] <foolip>
annevk: I think the bigger risk is getting some detached documents with non-empty fullscreen elements stacks, more than spurious fullscreenchange

[06:24:53.0000] <SimonSapin>
annevk: in any case, I don’t know what’s the right thing to do. There’s a couple of 6 years-old Mozilla bugs about this where people disagree with each other

[06:25:04.0000] <annevk>
SimonSapin: pointers?

[06:25:59.0000] <SimonSapin>
https://github.com/w3c/web-platform-tests/issues/1104#issuecomment-48917917

[06:27:31.0000] <erlehmann>
annevk fug, why you break links :(

[06:27:39.0000] <erlehmann>
._.

[06:27:53.0000] <erlehmann>
i certainly used one revision link in a blog post

[06:28:04.0000] <erlehmann>
i don't remember which one

[06:28:08.0000] <erlehmann>
i should make a private wayback machine

[06:28:15.0000] <erlehmann>
link rot is becoming too much

[06:28:41.0000] <annevk>
erlehmann: I need some context

[06:28:57.0000] <erlehmann>
<MikeSmith> hmm the e.g., http://html5.org/r/1115-1153 stuff doesn't work any more

[06:29:00.0000] <erlehmann>
<annevk> MikeSmith: sorry, didn't realize anyone was using those links

[06:29:07.0000] <erlehmann>
maybe

[06:29:13.0000] <annevk>
erlehmann: ah, right

[06:29:14.0000] <erlehmann>
annevk i assumed you broke it.

[06:29:18.0000] <erlehmann>
was it someone else?

[06:29:39.0000] <erlehmann>
i need to fight link rot. hmm.

[06:29:42.0000] <foolip>
erlehmann: you don't need a private one, there's "Save Page Now" on http://archive.org/web/

[06:30:00.0000] <annevk>
erlehmann: all that broke was a sequence of revisions as the tool no longer supports that

[06:30:12.0000] <erlehmann>
annevk so links to revisions still work?

[06:30:16.0000] <annevk>
erlehmann: yes

[06:30:18.0000] <erlehmann>
i think i linked to revisions.

[06:30:24.0000] <erlehmann>
i am relieved

[06:30:29.0000] <annevk>
erlehmann: e.g. http://html5.org/r/1115

[06:30:41.0000] <erlehmann>
☺

[06:30:45.0000] <foolip>
linking to a range of revisions doesn't seem useful unless Hixie happened to work on exactly one thing for a long time

[06:30:47.0000] <annevk>
erlehmann: the hyphen thing was a special feature, not really recommended

[06:31:00.0000] <erlehmann>
it conflated items into a collection

[06:31:01.0000] <erlehmann>
interesting

[06:31:07.0000] <annevk>
foolip: yup

[06:31:57.0000] <erlehmann>
does any one of you have a plain text blogging system and can link me to it? i want to add multimedia to http://news.dieweltistgarnichtso.net and have no idea about file structure

[06:32:08.0000] <zewt>
.plan? heh

[06:32:11.0000] <erlehmann>
s/plain text/filesystem backed/g

[06:33:29.0000] <erlehmann>
zewt i use single level git repositories with html files in it. hipster news 2 generates feed and overview.

[06:34:06.0000] <zewt>
grr, now firefox is randomly (Not Responding) and i can't tell why

[06:34:59.0000] <annevk>
foolip: so for fullscreen.spec.whatwg.org/#dom-document-exitfullscreen you basically want that during the iteration to dispatch the events we check if the situation with regards to the amount of elements on the fullscreen element stack has changed?

[06:35:16.0000] <annevk>
foolip: and if it has changed, we fully exit fullscreen?

[06:59:06.0000] <MikeSmith>
foolip: liking to a range of revisions is probably also useful if you're trying to document what things changed during a certain period of time -- which is exactly what http://platform.html5.org/history/ is for. But I guess that's a corner case that not many other people would want to do

[06:59:50.0000] <MikeSmith>
regardless, I think we could reconstruct it with links to the github html-mirror change history instead

[07:00:05.0000] <MikeSmith>
if we really wanted to

[07:01:32.0000] <MikeSmith>
(that is, construct alternative links to replace the ones we had in http://platform.html5.org/history/ to the html5.org generated changelogs that we removed after they broke)

[07:05:20.0000] <zcorpan_>
MikeSmith: might be more useful to have individual links to commits instead of month or year-long range of commits

[07:06:50.0000] <wanderview>
JakeA: do you have a sense of how close we are to updating the spec language for the expected Cache/CacheStorage changes?

[07:08:40.0000] <MikeSmith>
zcorpan_: yeah that would definitely be a lot more useful

[07:09:19.0000] <JakeA>
wanderview: We're unblocked on streams stuff, just need to get consensus on the API. I'm getting a talk together for jsconf so that's got my focus. I'll see if slightlyoff is free to take over dragging that to consensus for the next couple of weeks.

[07:09:36.0000] <JakeA>
Don't want to hold up the process, it's been held up enough

[07:10:35.0000] <wanderview>
JakeA: ah, ok...  thanks for the update... I think I will implement mostly whats currently spec'd with an eye towards the expected changes then

[07:11:21.0000] <JakeA>
wanderview: I don't expect the querying stuff to change, just .add vs .addAll, .delete vs .deleteAll

[07:11:46.0000] <wanderview>
I guess i thought there was more consensus on the rest of the spec changes, but I probably skimmed some bits in the thread

[07:12:00.0000] <wanderview>
JakeA: great, thanks... good luck with the jsconf talk!

[07:50:11.0000] <annevk>
JakeA: wanderview: I thought we had consensus on the API?

[07:50:37.0000] <annevk>
JakeA: wanderview: short method names directly on Response/Request, plus a bodyUsed property

[07:50:49.0000] <JakeA>
annevk: Talking about the cache API

[07:51:02.0000] <annevk>
JakeA: wanderview: I guess my plan was to make that change today, might have to wait a bit

[07:51:18.0000] <wanderview>
annevk: I think JakeA was saying other cache API questions beyond the streams issue

[07:51:24.0000] <JakeA>
annevk: I'm happy with the Request/Response stuff

[07:51:42.0000] <annevk>
ok, that's what I get for only reading part of your exchange

[08:10:12.0000] <JakeA>
wanderview: What's the story around debugging serviceworker in Firefox?

[08:11:10.0000] <wanderview>
JakeA: currently not great as far as I know... I believe work is in progress to allow debugging workers at all :-\

[08:11:15.0000] <wanderview>
let me see if I can find the bug number

[08:11:41.0000] <wanderview>
https://bugzilla.mozilla.org/show_bug.cgi?id=1003097

[08:12:50.0000] <wanderview>
JakeA: and here is our bug to support ServiceWorkers in devtools:  https://bugzilla.mozilla.org/show_bug.cgi?id=943220

[08:14:44.0000] <wanderview>
JakeA: asking what the plans/timeline for that work is... we definitely want to support it

[08:15:04.0000] <JakeA>
wanderview: Cool! Making sure I represent the state-of-things correctly in this jsconf talk. Is there any way to get console logs out of a SW in the interim?

[08:15:31.0000] <wanderview>
JakeA: console.log is supported in gecko workers, yes

[08:15:48.0000] <JakeA>
wanderview: Where is it exposed?

[08:16:04.0000] <wanderview>
JakeA: uh... I think self... let me check

[08:20:30.0000] <smaug____>
JakeA: type console.log(123) to the first textarea. http://mozilla.pettay.fi/workerconsole/

[08:20:40.0000] <smaug____>
the code will be executed in a worker

[08:20:57.0000] <smaug____>
and log goes to browser console

[08:21:14.0000] <smaug____>
(ctrl+shift+k)

[08:21:29.0000] <smaug____>
s/browser/web/

[08:22:28.0000] <wanderview>
smaug____: thanks!  I was trying to verify in my mochitest, but I guess we suppress console.log there

[08:23:02.0000] <wanderview>
/me bookmarks smaug's workerconsole...

[08:23:29.0000] <JakeA>
Wonder if that works for serviceworker (since they don't have an owner window)

[08:23:47.0000] <smaug____>
ah, no idea

[08:23:57.0000] <smaug____>
/me knows next to nothing about service workers

[08:24:20.0000] <smaug____>
hmm, Blink has odd console object

[08:24:31.0000] <smaug____>
[object WorkerConsole]

[08:25:33.0000] <wanderview>
JakeA: hmm, thats a good point... I was actually assuming it would work since SW's extend workers

[08:27:41.0000] <wanderview>
JakeA: yea, baku confirms that console.log() won't work from a SW because of the missing window...  sorry for my confusion

[08:28:02.0000] <annevk>
wanderview: want to file a bug on that?

[08:28:10.0000] <annevk>
wanderview: no debugging would be a major pita

[08:28:11.0000] <wanderview>
annevk: baku is doing that now

[08:28:14.0000] <wanderview>
I agree

[08:28:17.0000] <annevk>
yay

[08:28:31.0000] <JakeA>
wanderview: No worries! Is there any way to get those logs in the meantime, even if they go down to the command line?

[08:30:07.0000] <Ms2ger>
dump()?

[08:30:11.0000] <Ms2ger>
Probably not

[08:32:53.0000] <wanderview>
JakeA: can I get back to you tomorrow?  I feel like we need to get our plan straight on this... when is your talk?

[08:33:50.0000] <JakeA>
wanderview: in two week, so no major rush. Want to get as many demos working in Firefox as possible though

[08:34:00.0000] <zewt>
could you proxy through a shared worker as a workaround?

[08:34:05.0000] <wanderview>
JakeA: ok, thanks!

[08:36:24.0000] <JakeA>
zewt: I think shared workers have the same issue. Could send stuff back to the page via a message port, I think that's landing soon in Firefox

[08:36:41.0000] <zewt>
right, you'd have to open the shared worker from a real document to receive them

[08:36:50.0000] <JakeA>
wanderview: will update https://jakearchibald.github.io/isserviceworkerready/ in time for the talk too

[08:39:09.0000] <wanderview>
JakeA: thanks... we have an internal meeting tomorrow morning... going to discuss it there

[08:42:58.0000] <JakeA>
zewt: good idea

[08:46:08.0000] <zewt>
i'd think that "service workers" would just be a type of shared worker, so you could connect to them like any shared worker

[08:47:26.0000] <zewt>
like a shared worker url that the browser also knows how to start up on its own

[09:10:39.0000] <dvorapa>
Hello! Is there anybody, who could I speak to?

[09:12:13.0000] <dvorapa>
Could I ask about my new meta extension?

[09:12:58.0000] <Ms2ger>
You can

[09:14:06.0000] <dvorapa>
I want to propose meta extension with keyword `version`

[09:14:13.0000] <dvorapa>
Specification: https://github.com/dvorapa/meta-version

[09:18:03.0000] <annevk>
dvorapa: if you're asking for a wiki account I need your desired username and email

[09:18:43.0000] <dvorapa>
Okay,username: dvorapa

[09:18:52.0000] <dvorapa>
email: dvorapa⊙sc

[09:19:50.0000] <annevk>
dvorapa: "A randomly generated password for Dvorapa has been sent to dvorapa⊙sc It can be changed on the change password page upon logging in."

[09:21:50.0000] <dvorapa>
annevk: Thank you.

[10:37:13.0000] <Domenic>
marcosc_: why does everyone want these separate WakeLock objects... why do we need to be more programmer-footgun-protective than native platforms are.

[10:38:34.0000] <jgraham>
People have different expectations from browsing to a website vs running a native app?

[10:39:17.0000] <Domenic>
this isn't even on that level

[10:39:26.0000] <Domenic>
it's "what if multiple pieces of code within the same website want a wake lock"

[10:39:53.0000] <Domenic>
in native apps they all coordinate to share a per-app lock; if different parts of the code need to coordinate, then they write code to do so

[10:40:19.0000] <Domenic>
whereas sicking and others think it's important that different parts of the code each get their own lock

[10:42:17.0000] <sicking>
Domenic: i don't feel strongly. But the editors claim that they care about that use case, but the proposed API doesn't support it

[10:42:35.0000] <Domenic>
oh, did not realize...

[10:44:12.0000] <sicking>
but it does seem like unless we specify a standard for how to do this coordination, then the JS world will have to come up with their own standard for it. And not just one standard per library, but rather one "the" standard

[10:44:56.0000] <sicking>
mmmm..

[10:45:14.0000] <sicking>
maybe it could work for everyone to do their own solution, if that solution is based on callbacks to the embedder

[10:45:56.0000] <sicking>
either way, it's a relatively small difference in API complexity

[10:46:37.0000] <sicking>
either "screen wakelock" is a property on the document, or you can instantiate it using "new"

[10:47:02.0000] <sicking>
in both solutions the actual API on the lock will be the same

[10:54:36.0000] <Hixie>
can someone work out what Axel means in https://www.w3.org/Bugs/Public/show_bug.cgi?id=26669 and add a clarifying comment on the bug?

[11:09:35.0000] <Domenic>
not "the" standard, just, if you want to use libraries that use wakelocks, they have to communicate that somehow

[11:11:00.0000] <Hixie>
anyone have a better term for "media source object" that has neither the words "media source", "media stream", "file", "media resource", "media data", or "blob" in it?

[11:11:14.0000] <Hixie>
(meaning something that is either a MediaSource, MediaStream, File, or Blob)

[11:11:55.0000] <Hixie>
maybe "media provider object"

[11:13:32.0000] <SamB__>
too bad interfaces aren't a thing

[11:13:51.0000] <Hixie>
even if it was an interface it'd still need a name :-)

[11:13:53.0000] <SamB__>
or I guess those don't actually all implement the same interface anyway

[11:14:34.0000] <jgraham>
Hixie: I guess he's saying something like <form autofocus="foo"><input id="foo"> would have been a better model

[11:14:42.0000] <jgraham>
But that's a guess

[11:15:32.0000] <SamB__>
jgraham: certainly less questions about how to resolve conflicts than with autofocus=yes on individual elements

[11:16:40.0000] <jgraham>
SamB__: Arguably an equivalent number of questions <form autofocus=foo><input id=foo><input id=foo>

[11:17:11.0000] <Hixie>
not to mention <form autofocus=foo></form><form autofocus=bar></form><input id=foo><input id=bar>

[11:17:23.0000] <Hixie>
jgraham: thanks. commented on the bug.

[11:17:44.0000] <SamB__>
jgraham: That question is nothing new, though

[11:18:13.0000] <SamB__>
Hixie: hmm, okay, that's a better example ;-)

[11:23:35.0000] <Hixie>
("not to mention" is such a dumb phrase)

[11:26:48.0000] <tantek>
not to mention "to be honest"

[11:37:14.0000] <hsivonen>
MikeSmith: the reason to use an old version of Jetty is that I haven't had the time to update Jetty

[11:37:22.0000] <hsivonen>
MikeSmith: we should keep updating Jetty

[11:37:44.0000] <hsivonen>
MikeSmith: fortunately, the security bugs *usually* don't affect the way we use Jetty

[11:51:27.0000] <Hixie>
tantek: "to be honest" is slightly better in that it implies that one might have tried to conceal or sugar coat the statement but has decided not to

[11:52:14.0000] <tantek>
Hixie, good point. I often hear "not to mention" abbreviated these days in speech as "Sooooo… " preceding a statement.

[11:52:20.0000] <Hixie>
heh

[11:53:59.0000] <SamB__>
I guess "not to mention" only makes sense when followed by one or more classes of things that you aren't listing individually

[14:48:46.0000] <JonathanNeal>
Hey https://groups.google.com/a/chromium.org/forum/#!msg/blink-dev/07v_yMErc_A/WcyKGN1A2y0J

[14:48:47.0000] <JonathanNeal>
Nice!

[14:49:33.0000] <caitp>
eh, wouldn't get your hopes up

[14:50:58.0000] <caitp>
the two replies so far seem pretty conservative about adding it to the platform as a native feature, and probably not even blink-in-js. But, it would be fun to work on, so here's hopin :3

[14:52:02.0000] <jsbell>
caitp: If you're thinking blink-in-js, then start with a polyfill.

[14:52:13.0000] <JonathanNeal>
blink in js?

[14:52:48.0000] <jsbell>
JonathanNeal: Implementing bits of blink in JS.

[14:53:40.0000] <caitp>
it might come to that, but the features I've implemented so far have been smaller in C++ than the mix of C++ boilerplate + private scripts

[14:53:42.0000] <jsbell>
e.g. lets say we didn't have 'window.atob()'; take a polyfill, ship it with the browser, but with appropriate security sprinkles.

[14:54:31.0000] <JonathanNeal>
oh you mean like a browser extension?

[14:55:41.0000] <jsbell>
JonathanNeal: "like" as in: same security concerns for JS code needing to run in what we call isolated worlds. But from a browser user's perspective it's a feature that ships with the browser and happens to be implemented in C++ rather than JS

[14:56:00.0000] <jsbell>
https://docs.google.com/presentation/d/1XvZdAF29Fgn19GCjDhHhlsECJAfOR49tpUFWrbtQAwU/edit#slide=id.g3840fe06e_00

[14:56:24.0000] <caitp>
I think, if we do end up getting it to support custom data and custom sort predicates, then a Blink-in-JS implementation is essentially impossible :(

[14:56:31.0000] <caitp>
because of those security concerns

[14:58:02.0000] <Hixie>
custom sort predicates?

[14:58:07.0000] <Hixie>
(custom data is already in the spec)

[14:58:16.0000] <erlehmann>
JonathanNeal how is your polyfill going? :)

[14:59:48.0000] <JonathanNeal>
erlehmann: Further than when last I talked about it in here. When I have free time next, I would like to start adding the more complex sorting algorithms.

[15:00:01.0000] <JonathanNeal>
erlehmann: http://sandbox.thewikies.com/table-sorting/ is up to date

[15:01:42.0000] <caitp>
Hixie: similar to Array.prototype.sort

[15:01:59.0000] <caitp>
letting the script assign a callback to the column header telling it how to sort its keys

[15:02:03.0000] <caitp>
er, sort its data

[15:02:21.0000] <Hixie>
caitp: i don't see how that could work. see the e-mails i sent at the time for a discussion of why.

[15:02:28.0000] <erlehmann>
JonathanNeal date sorting could be interesting

[15:02:59.0000] <Hixie>
(but basically, it's because the first callback could cause a navigation, move the table to another document, put each <td> in a different iframe, and who the heck knows what else)

[15:03:38.0000] <caitp>
sure it could, but who cares

[15:03:47.0000] <caitp>
if a user wants to break their own site, what of it :p

[15:03:58.0000] <Hixie>
it's not about breaking the site

[15:04:04.0000] <Hixie>
it's about breaking the browser

[15:06:01.0000] <caitp>
also I'm not sure the <data value="someString"> really counts as custom data, it's a custom string

[15:06:22.0000] <caitp>
it's not as flexible as say, a JSObject

[15:06:42.0000] <Hixie>
how would you sort a JS Object?

[15:06:47.0000] <caitp>
with a custom predicate!

[15:06:52.0000] <jsbell>
And before someone suggests it: evaluating a short snippet of script in a completely isolated execution context turns out to be something browsers are inefficient at, at the moment

[15:06:56.0000] <Hixie>
then it's a custom predicate, not custom data.

[15:07:15.0000] <caitp>
well I mean to do anything meaningful with it you'd need both

[15:07:16.0000] <Hixie>
jsbell: it also doesn't work when what you have to pass the isolated script is a pair of DOM nodes. :-)

[15:07:28.0000] <SamB__>
jsbell: that's no surprise

[15:07:36.0000] <Hixie>
caitp: you can already assign whatever you want to an element

[15:07:40.0000] <SamB__>
jsbell: building those contexts tends to be expensive

[15:07:42.0000] <Hixie>
caitp: myElement._myCustomData = {}

[15:07:48.0000] <Hixie>
or whateer

[15:08:01.0000] <caitp>
sure, but the sorting algorithm won't consider it when sorting

[15:08:25.0000] <jsbell>
Hixie: Yep. (But someone will suggest passing a serialization or something, which doesn't help)

[15:08:31.0000] <Hixie>
caitp: you already said you need a custom predicate

[15:08:53.0000] <jsbell>
SamB__: Yep. We'd like that for e.g. custom indexers in Indexed DB, but the engines aren't optimized for it (yet)

[15:09:03.0000] <caitp>
I'm saying, without a custom predicate, "custom data" eg attached to a node, wouldn't be much good

[15:09:06.0000] <caitp>
because it wouldn't be used

[15:09:13.0000] <SamB__>
processes, threads, JS sandboxes ...

[15:09:15.0000] <jsbell>
And then there's pulling in libraries to do anything useful... anyway, non-starter right now

[15:09:19.0000] <SamB__>
not sure about lua though

[15:10:10.0000] <caitp>
yeah, the performance and security concerns of a custom predicate are valid concerns

[15:10:13.0000] <SamB__>
jsbell: I wonder if it would be potentially faster to recycle an existing context than to make a whole new one?

[15:10:23.0000] <Hixie>
caitp: that's what i said before

[15:10:30.0000] <caitp>
I am agreeing with you

[15:10:51.0000] <Hixie>
ok good. so why are we still talking about custom data

[15:11:03.0000] <caitp>
but at the same time, without the ability to do that, people might very well not find it worth using the feature

[15:11:14.0000] <caitp>
and would resort to using jQuery-plugin-foo instead

[15:11:44.0000] <Hixie>
the spec allows for a custom sorter for exactly this reason

[15:11:53.0000] <Hixie>
oh hey, good news everyone! I've figured out a way to bypass the spec's pop-up blocker... and chrome implements the spec

[15:13:09.0000] <caitp>
where exactly does the spec allow for a custom sorter? it must not be in the tables document of the multipage spec

[15:14:00.0000] <jsbell>
SamB__: Dunno. I suspect competition on speed and power vs. things like ES6 modules (and blink in JS...) will drive down the cost of contexts

[15:14:12.0000] <Hixie>
<table onsort="...run whatever algorithm you want to sort the table here...">

[15:14:22.0000] <caitp>
oh, I see.

[15:14:49.0000] <Hixie>
it lets the browser handle all the "table changed" logic, "this is the sorted column" logic, etc

[15:14:57.0000] <Hixie>
and just fires the event when the table needs sorting

[15:15:19.0000] <Hixie>
there's two ways to use it, basically

[15:15:19.0000] <caitp>
so you're saying they would sort the table manually and then prevent default to stop the default logic

[15:15:25.0000] <Hixie>
you can either just actually sort the table, then return false

[15:15:41.0000] <Hixie>
or you can set the custom sort data to the rows in the order you want, then return true

[15:16:51.0000] <caitp>
I mean that could work, but that's a lot more complicated than a predicate

[15:17:06.0000] <caitp>
so it seems unlikely most people would use it

[15:17:12.0000] <Hixie>
it's actually only a very few lines more complicated

[15:17:54.0000] <Hixie>
probably just a matter of putting the rows in an array, sorting the array using a custom predicate, and then reappending the rows in the order you care about

[15:18:08.0000] <Hixie>
when you have your own function you don't have to worry about all the edge cases the algorithm normally worries about

[15:18:25.0000] <Hixie>
like multiple <tbody>s, or row-spanning cells, or all that nonsense

[15:26:29.0000] <roc>
some ability to run pure JS functions cheaply would be useful in various places in the platform

[15:26:56.0000] <roc>
vertex shaders for CSS filters

[15:27:11.0000] <roc>
various extensible layout things

[15:27:30.0000] <roc>
audio processing

[15:45:33.0000] <JonathanNeal>
I think people will demand the ability to sort tables by their own method.

[15:50:45.0000] <caitp>
they certainly will

[16:02:39.0000] <caitp>
anyway JonathanNeal I'm probably not going to get a green light on that intent-to-implement thread, but I'm happy to help work on the polyfill if you want some assistance with it

[16:44:48.0000] <JonathanNeal>
caitp: yes, once it’s in slightly better shape I need to put it on GitHub.


2014-08-27
[17:03:57.0000] <Hixie>
annevk: ideas on how to procede for https://www.w3.org/Bugs/Public/show_bug.cgi?id=12230 ?

[18:08:54.0000] <erlehmann>
regarding progressive images, is there a user agent that downloads only the first scan of a progressive JPEG when bandwith is contrained?

[18:09:33.0000] <erlehmann>
the second time the FF DA it could stop downloading stuff. but then that implies range requests.

[18:10:01.0000] <SamB__>
well, if the connection is ultra slow it could RST

[18:10:39.0000] <erlehmann>
i already experimented with creating thumbnails that way

[18:10:40.0000] <erlehmann>
IZE_TARGET=$(od -t x1 <"$1" |grep 'ff da' |head -n2 |tail -n1 |cut -d' ' -f1)

[18:10:47.0000] <erlehmann>
head -c"$SIZE_TARGET" <"$1"

[18:10:53.0000] <erlehmann>
env printf '\xff\xd9' # add End Of Image (EOI) JPEG marker

[18:11:05.0000] <erlehmann>
works quite well!

[18:20:38.0000] <erlehmann>
http://kaioa.com/k/test/choppy/index.html

[19:55:41.0000] <MikeSmith>
Hixie: related to https://groups.google.com/a/chromium.org/forum/#!topic/blink-dev/07v_yMErc_A from abarth (against the intent to implement for the table sortint API), I wonder if in the future we'll continue the policy of dropping a feature if  multiple vendors declinine to natively implement it

[19:56:52.0000] <MikeSmith>
Hixie: If we want web-components libraries to have something standard to implement and expose, we'd still need a spec that defines the standard behavior

[19:59:11.0000] <caitp>
why would web components libraries care about a standard, they'd have no reason to be interoperable with each other

[20:00:34.0000] <caitp>
the linked sortable-table component is certainly not compliant with the standard, it's just another cute javascript library, which is yet another piece of third party code that application developers don't want to use and probably won't

[20:01:17.0000] <caitp>
standards make sense for interop, but when interop doesn't matter, there isn't much point

[20:07:01.0000] <MikeSmith>
caitp: the other reason for having the standard is to have sane behavior that's has some discussion and some level of agreement behind it

[20:07:21.0000] <MikeSmith>
s/the other/one other/

[20:08:08.0000] <MikeSmith>
and to ensure interoperability for the case where some UAs do implement it natively

[20:08:17.0000] <MikeSmith>
so devs can code against the same API

[20:10:22.0000] <caitp>
sure, that makes sense when some vendors take the plunge and implement

[20:10:53.0000] <caitp>
but if nobody does, then all the discussion in the world doesn't matter, because what ends up happening is people just hack stuff together using the tools that they know

[20:11:00.0000] <caitp>
there will be common patterns of behaviour, but there won't be concensus

[20:11:10.0000] <caitp>
they won't be interchangeable

[20:11:35.0000] <caitp>
and that's the status quo, we already have that

[20:12:10.0000] <caitp>
what we don't have is an environment where I can write a rich application without relying on scripting

[20:55:53.0000] <JonathanNeal>
Life! Seriously, I just want to code.

[21:01:50.0000] <caitp>
well, Mozilla would probably be more open to implementing experimental features like that, I mean they've already got support for microdata and I can't think of any other implementations

[21:02:05.0000] <caitp>
or any apps that really need it

[21:02:59.0000] <JonathanNeal>
caitp: do you have an opinion on how far along the table sort polyfill should be before I throw it on GitHub?

[21:03:51.0000] <caitp>
I don't think it really matters, there's no reason you can't just put up a bikeshed and start getting people to look at it and see what's missing/broken/wrong

[21:04:45.0000] <JonathanNeal>
good point, but if it’s about getting attention, should i wait till tomorrow 9 PST?

[21:06:15.0000] <caitp>
I dunno, planning on tweeting it or something?

[21:07:10.0000] <JonathanNeal>
If tweeting means interested devs, opinions, etc.

[21:14:03.0000] <JonathanNeal>
Devs bring action. Action brings features.

[22:01:12.0000] <zcorpan_>
Hixie: what is correct behavior here per spec? http://software.hixie.ch/utilities/js/live-dom-viewer/saved/3134

[22:02:13.0000] <Hixie>
from memory, i'd expect it to nuke the document, then alert "foo"

[22:02:40.0000] <Hixie>
oh hm actually

[22:02:46.0000] <Hixie>
step 15 says to create a new Window object

[22:02:48.0000] <Hixie>
so maybe not

[22:03:03.0000] <Hixie>
nuke the document and alert "undefined"?

[22:07:12.0000] <caitp>
didn't that come up last week? we determined blink was doing the wrong thing and gecko was doing it right

[22:07:35.0000] <caitp>
well, I came to that conclusion

[23:05:18.0000] <JonathanNeal>
Sorry if I’m late to the party, but does http://lists.w3.org/Archives/Public/www-validator/2014Aug/0026.html mean we could automate document validation? I’m guessing this has been possible for a long time and I was just not privy to it.

[23:14:40.0000] <zcorpan_>
Hixie: yeah it's not clear to me if creating a new Window means the old variables go away, but i guess they should

[23:15:16.0000] <zcorpan_>
Hixie: see https://miketaylr.com/posts/2014/08/document-writing-zeptos.html

[23:18:27.0000] <SamB__>
zcorpan_: Creating a new Window doesn't make the variables *go away*, they're still there on the old Window. Throwing out the old Window, on the other hand ...

[23:20:10.0000] <zcorpan_>
SamB__: can you get back to the old window? or keep a kungfu deathgrip of it somehow?

[23:21:45.0000] <SamB__>
http://software.hixie.ch/utilities/js/live-dom-viewer/saved/3134

[23:21:45.0000] <SamB__>
%3C%21DOCTYPE%20html%3E%0A%3Cscript%3E%0Avar%20x%20%3D%20%27foo%27%3B%0Aonload%20%3D%20function%28%29%20%7B%0Adocument%2Ewrite%28%27%3Cscript%3Ealert%28window%2Ex%29%3C%5C%2Fscript%3E%27%29%3B%0A%7D%0A%3C%2Fscript%3E%

[23:23:07.0000] <Hixie>
there's no way from JS to ever actually hold a reference to a Window

[23:23:12.0000] <Hixie>
you can only ever hold a WindowProxy

[23:24:42.0000] <SamB__>
hmm

[23:24:58.0000] <SamB__>
how do I know there's a window at all?

[23:25:48.0000] <SamB__>
(maybe you meant to say "another window"?)

[23:26:56.0000] <mathiasbynens>
Hixie: the Chromium team doesn’t seem to think native table sorting is a good idea :( https://groups.google.com/a/chromium.org/d/topic/blink-dev/07v_yMErc_A/discussion

[23:27:19.0000] <SamB__>
can't you just use SQL for that

[23:34:19.0000] <caitp>
it was a long-shot to get support for that because the status quo has been good enough for so long, so nobody is really surprised that it got rejected, but it's understandably disappointing for people

[23:37:12.0000] <zcorpan_>
x is still in scope after document.write() has returned though

[23:39:13.0000] <SamB__>
yeah, if code is still running for a given Window, that Window is still alive: it's the frickin global scope!

[23:42:02.0000] <zcorpan_>
http://software.hixie.ch/utilities/js/live-dom-viewer/saved/3135

[00:10:38.0000] <MikeSmith>
JonathanNeal: yeah this is first time I've done a public announcement about the vnu.jar file being available, but I've been working on it for a while and made it available previously but just without announcing it

[00:13:07.0000] <MikeSmith>
JonathanNeal: Jörn Zaefferer's been providing https://github.com/jzaefferer/grunt-html for a while, which uses that jar file

[00:15:33.0000] <MikeSmith>
JonathanNeal: I think a big part of the reason I initially created the file is that Jorn wanted something to use for automating testing of HTML files for JQuery UI testing

[00:17:43.0000] <MikeSmith>
stop everything -- a bug reporter says, "I have now invested quite a lot effort into this bug, time has come for you to act"

[00:19:10.0000] <MikeSmith>
/me adds that to w3c bugzilla quips

[00:22:59.0000] <Ms2ger>
/me acts

[00:23:03.0000] <Ms2ger>
-> RESO WONTFIX

[00:27:44.0000] <zcorpan_>
MikeSmith: which bug?

[00:36:54.0000] <MikeSmith>
zcorpan_: https://www.w3.org/Bugs/Public/show_bug.cgi?id=25376

[01:07:52.0000] <hsivonen_>
annevk: whoa! it looks like CORS breaks the rule that ED is newer than TR!

[01:08:44.0000] <Ms2ger>
hsivonen, the ED is at http://fetch.spec.whatwg.org/ ;)

[01:09:46.0000] <hsivonen>
Ms2ger: oh.

[01:09:54.0000] <hsivonen>
Ms2ger: have the CORS bits changed since TR?

[01:10:00.0000] <Ms2ger>
No idea

[01:23:42.0000] <foolip>
annevk: sorry, I didn't see your message yesterday

[01:24:06.0000] <foolip>
I'm not entirely sure what I want, I filed another bug where I thought I figured out the underlying problem, but even then I'm not sure

[02:46:54.0000] <JakeA>
wanderview: filed a ticket to allow ServiceWorker over http on localhost https://bugzilla.mozilla.org/show_bug.cgi?id=1059174

[02:56:34.0000] <JakeA>
annevk: Is Firefox going to make fetch available on window.fetch?

[07:21:11.0000] <wanderview>
JakeA: I think annevk might be out today

[07:21:31.0000] <JakeA>
wanderview: ahh ok, no worries

[07:21:50.0000] <wanderview>
JakeA: we can ask nsm when the US west coast wakes up

[07:30:58.0000] <wanderview>
JakeA: does this pref work for allowing http?  dom.workers.serviceWorkers.testing.enabled

[07:31:10.0000] <wanderview>
we also have this:  https://bugzilla.mozilla.org/show_bug.cgi?id=1003991

[07:33:49.0000] <JakeA>
wanderview: worried that a developer may enable that for testing but forget to unset it, leaving their browser less secure. Same with the devtools-open thing, not sure the browser should be less secure because devtools are open. A flag with comma separated origins (or similar) would work

[07:34:40.0000] <JakeA>
wanderview: in Chrome, we're going to allow serviceworkers on localhost by default, but a way to whitelist particular domains would be useful too

[07:35:00.0000] <wanderview>
JakeA: yea, the dom.workers.serviceWorkers.testing.enabled pref is not something to recommend in general and should eventually go away

[07:35:18.0000] <JakeA>
wanderview: ohh, does that exist currently?

[07:35:28.0000] <wanderview>
JakeA: it does I think

[07:36:29.0000] <wanderview>
JakeA: I think the localhost approach has merit... I left both bugs open... we can do one or both... I'll ask nsm what he thinks

[07:37:04.0000] <JakeA>
cool!

[07:37:28.0000] <wanderview>
it doesn't show in about:config, but I think you can add it there

[07:38:45.0000] <JakeA>
gotcha, cheers

[07:43:45.0000] <JakeA>
wanderview: It's dom.serviceWorkers.testing.enabled - and it works. Cheers!

[07:44:12.0000] <wanderview>
great!

[08:23:56.0000] <Domenic>
wow, https://www.w3.org/Bugs/Public/show_bug.cgi?id=25376 he is saying just plain false things in his last comment

[08:33:16.0000] <caitp>
well they seem to have made up their mind about it, anyway

[08:34:31.0000] <wanderview>
JakeA: I have some answers to some of your questions...

[08:35:32.0000] <wanderview>
JakeA: we are going to fix console.log() to work on SharedWorker/ServiceWorker before  Sep 30, but possibly not before your demo... this will probably broadcast to same-origin devtools web console for now... full worker support in devtools is in progress, but will take longer

[08:35:55.0000] <wanderview>
JakeA: we do plan to expose window.fetch()

[08:36:48.0000] <wanderview>
JakeA: we also plan to support http SW on localhost, although it might not be available till after Sep 30

[08:36:53.0000] <wanderview>
hope that helps!

[08:45:57.0000] <MikeSmith>
Domenic: at least the part where he says "I'm at the end of my wisdom now" seems like it might be non-false

[08:45:57.0000] <JakeA>
wanderview: Cool! I'm giving the talk later in the year too, so I'll update it as things progress

[08:45:58.0000] <JakeA>
that's cool, cheers!

[09:41:09.0000] <Ms2ger>
Something up with irc.w3.org?

[09:41:26.0000] <Ms2ger>
And with that, it's back

[11:19:28.0000] <Sample>
What is the origin of the bizarrely verbose x-www-form-urlencode?  Is Ian Hickson to blame?

[11:19:39.0000] <Sample>
And what's with the decade+ of the x- prefix

[11:20:09.0000] <Ms2ger>
Probably IETF

[11:26:00.0000] <jsbell>
Late-90s: "What content type should we use for our beta product?" "We haven't issued an RFC yet, so you should call it x-something until you're ready to document it" (one week later) "we have an install base of 250 million and can't break compatibility" "d'oh"

[11:29:33.0000] <Sample>
Seems like an inherent, natural, and built-in problem of the x- prefix

[11:30:19.0000] <Sample>
I mean, what's the problem with dropping it and supporting the x- prefix for legacy compatability

[11:31:04.0000] <jsbell>
For what benefit? Agreed that 'x-' now has no meaning, but it's harmless and supporting two variants is more work for what benefit?

[11:31:50.0000] <Sample>
I don't know, clarity, semantic importance, accordance with specification

[11:32:15.0000] <Sample>
"more work" is a pretty odd defense

[11:32:48.0000] <Sample>
more work for whom?

[11:35:03.0000] <jsbell>
Presumably, every web server vendor needs to add support for both. Then after some period of time browser vendors could consider no longer sending the x-, at the risk of breaking some web sites.

[11:37:13.0000] <Sample>
yep

[11:37:33.0000] <jgraham>
Yeah, so you are proposing changing every server in the world in order to drop two characters from an opaque string

[11:37:52.0000] <jgraham>
The cost/benefit there is terrible

[11:38:09.0000] <jgraham>
Even if it wasn't there's simply no way to make it happen

[11:38:26.0000] <Sample>
Lol, you people are mad. Are you finding it an unreasonable burdeon to impart on web server vendors to "add support" to specification? It's the entirety of their service

[11:38:46.0000] <jgraham>
Even things that have high cost and relatively little usage are almost impossible to change

[11:39:14.0000] <jgraham>
e.g. we have been unsuccessful at dropping attribute nodes and so far seem unsuccessful at dropping mutation events

[11:40:59.0000] <jgraham>
Sample: We have literally no way of imparting burdens on web server vendors

[11:41:10.0000] <jgraham>
Even if we did, this wouldn't solve that problem

[11:41:36.0000] <jgraham>
Lots of individual applications will have code that specifically looks at MIME types

[11:42:11.0000] <jgraham>
Changing those individual applications is straight up impossible

[11:42:51.0000] <Sample>
I'm not sure user agents should have catered to that either

[11:44:09.0000] <JakeA>
In IDB, you can do index.openCursor(range), but if that index is build of multiple properties, as in entryStore.createIndex(name, ['a', 'b']), what is 'range' acting on?

[11:44:12.0000] <Sample>
but at least that argument holds some weight compared to "but it would be more work"

[11:44:21.0000] <JakeA>
built*

[11:44:47.0000] <jsbell>
JakeA: The index keys

[11:45:04.0000] <Sample>
the "change ever server in the world" argument is nearly equally ridiculous though

[11:45:09.0000] <jsbell>
JakeA: Want a more clarifying example?

[11:45:31.0000] <jsbell>
Sample: so when do browser vendors get to stop sending the 'x-' ?

[11:46:24.0000] <Sample>
whenever they choose to. probably not for a long time. but developers can make the decision when they reasonably expect to talk to modern webservers. in the exact same manner they make the decision not to cater to IE8

[11:47:24.0000] <JakeA>
jsbell: I understand that if entryStore.createIndex(name, 'name'), then index.openCursor(IDBKeyRange.only('george')) gets me the entries where the 'name' property equals 'george'. But what if it's entryStore.createIndex(name, ['name', 'age'])? What does index.openCursor(IDBKeyRange.only('george')) do now?

[11:48:05.0000] <JakeA>
jsbell: And what if I wanted to get the entries with name 'george' and age 30

[11:48:08.0000] <jsbell>
jakeA: Since you didn't specify multiEntry, the keys in the index will be arrays e.g. ['alice', 30], ['bob', 40]

[11:48:38.0000] <jsbell>
JakeA: So you'd need to do e.g. index.openCursor(IDBKeyRange.only(['alice', 30]))

[11:48:50.0000] <JakeA>
jsbell: Aha!

[11:49:21.0000] <jsbell>
JakeA: or index.openCursor(IDBKeyRange.lowerBound(['alice'])) to start getting all the alice records, and manually stop when you run out.

[11:49:44.0000] <Sample>
if it would enter a specification there could at least be progress. it's as if the argument is entirely about "bad enough".  x-IllIlIIlIllllI would be "too bad" but "x-web-world-form-encodeuricomponent" may not be. what about not playing "bad enough"

[11:50:14.0000] <JakeA>
jsbell: multiEntry fails if it's a compound key, right?

[11:50:14.0000] <jsbell>
jakeA: Or compute a range of "first alice" through "last possible alice" which is slightly nontrivial, see https://gist.github.com/inexorabletash/5462871

[11:50:47.0000] <Sample>
its funny that the original argument is "too much work for servers", with no consideration to the PEOPLE (developers) who need to know and account for standards. where is the "too much work" exactly

[11:52:44.0000] <jsbell>
JakeA: right, or you'd get an index entry for 'alice' and another index entry for 30, which is kinda weird. That said, https://www.w3.org/Bugs/Public/show_bug.cgi?id=21836

[11:53:43.0000] <JakeA>
jsbell: excellent, thanks!

[11:54:33.0000] <jsbell>
JakeA: happy to help

[11:56:20.0000] <JakeA>
jsbell: it'd be great to do a deep dive article on IDB in the nature of http://www.html5rocks.com/en/tutorials/es6/promises/ - I might give that a ago towards the end of the year, prepare for big questions

[11:57:33.0000] <jsbell>
JakeA: I'd love to help, let me know if it materializes.

[11:59:53.0000] <JakeA>
jsbell: comparing your string prefix code with https://github.com/dfahlander/Dexie.js/blob/b0cbae793de7177491ba9f6e0854673c27279168/src/Dexie.js#L1449 - Dexie's seems simpler, any idea how it works?

[12:00:29.0000] <jsbell>
JakeA: I'm pedantic and handle numbers, dates and arrays, not just strings. Also...

[12:00:40.0000] <JakeA>
I mean just the string bit

[12:02:16.0000] <jsbell>
JakeA: presumably it fails on strings that actually end with U+FFFF, let me squint at it a bit...

[12:02:37.0000] <JakeA>
Glad it's not painfully obvious

[12:04:03.0000] <Sample>
jgraham: any thought on my final statement regarding supporting a more sane and less legacy mime type or is your defense impenetrable?

[12:05:37.0000] <jsbell>
JakeA: yeah, so if 'abc' were your prefix, that'd compute a range of 'abc' ... 'abc\uFFFF' which would exclude 'abc\uFFFF\uFFFF'

[12:09:27.0000] <JakeA>
jsbell: that's good enough for me in this case, cheers!

[12:32:13.0000] <JakeA>
annevk: can we get a .keys() on http://fetch.spec.whatwg.org/#headers?

[12:35:33.0000] <JakeA>
The chrome impl has forEch currently

[12:36:11.0000] <wanderview>
JakeA: I think he wanted something about es6 iterators to be available

[12:36:25.0000] <wanderview>
I didn't quite follow what he wanted

[12:36:26.0000] <JakeA>
Yeah, worried that's coming too late

[12:37:21.0000] <wanderview>
.keys() seems reasonable to me... although you can't observe the absolute ordering of the headers with it

[12:37:49.0000] <JakeA>
true

[12:38:14.0000] <JakeA>
only an issue with multiple headers of the same name

[12:38:35.0000] <wanderview>
yea... I only mention it because the spec says we have to maintain the absolute ordering... but then has no way to observe it

[12:39:39.0000] <jsbell>
The ES6ism would probably be: let keys = []; for (let header of headers) keys.push(header[0]);

[12:40:11.0000] <wanderview>
ah, so duplicate keys in the array

[12:40:26.0000] <JakeA>
I suppose you could get the right order then

[12:40:28.0000] <wanderview>
although that is weird given you can't get at the per-key value

[12:40:33.0000] <JakeA>
yeah

[12:41:05.0000] <JakeA>
you'd be getAll(key)[blah]

[12:41:33.0000] <JakeA>
es6 iterators will fix that

[12:41:38.0000] <wanderview>
yea

[12:41:46.0000] <jsbell>
Map.prototype.entries() would be the thing to copy to get key/value pairs

[12:42:04.0000] <jsbell>
--> food

[12:42:43.0000] <Domenic>
Ideally that interface should have keys()/values()/entries()/forEach()/[Symbol.iterator]()

[12:42:54.0000] <Domenic>
I think annevk wanted some IDL thing that will automatically implement those

[12:43:39.0000] <Domenic>
Probably the way forward would be to prod him for exactly what he wants and then have someone do the WebIDL pull request

[12:44:15.0000] <Domenic>
but be careful exposing stuff without a solid spec because e.g. if you made keys() return an array that would be unlike all other ES6 things

[12:44:18.0000] <Domenic>
(which just expose a custom iterator)

[12:45:03.0000] <Domenic>
forEach for example needs to conform to the forEach((key, value, headers) => {}, thisArg) signature

[12:45:32.0000] <wanderview>
I guess the Cache/CacheStorage keys() are already non-standard as they return a Promise<sequence<>>

[12:45:51.0000] <Domenic>
yeah

[12:46:16.0000] <Domenic>
that is where ES7-timeframe async iterators would come in

[12:46:48.0000] <Domenic>
oh right, I remembered why I came to this tab

[12:47:13.0000] <Domenic>
I wanted to complain about how the ARIA spec is a big mix of "maybe authors will be expected to do this if they have a good reason"

[12:47:44.0000] <Domenic>
"and authors are expected to have valid reason to provide a WAI-ARIA role even on elements that would not normally be repurposed" :-S

[12:55:22.0000] <Domenic>
Hixie: is there a reason why e.g. myHR.getAttribute("role") is null insteadof "separator"? That is, lots of elements have implicit (or "strong native") ARIA roles, but we don't reflect them in their DOM attributes

[12:55:45.0000] <Domenic>
Hmm, OK, maybe it's because of the fact that strong native ARIA things are supposed to be non-overridable

[12:56:00.0000] <Domenic>
and the default implicit ARIA things need to be the default if you remove the attribute

[12:56:10.0000] <Domenic>
Hixie: nevermind! I think it makes sense now.

[13:02:20.0000] <annevk>
Domenic: yup, I want that

[13:03:27.0000] <Domenic>
annevk: what kind of text do you envision writing. i.e. how much work do spec-writers have to do.

[13:04:37.0000] <annevk>
there's a bug for that :p

[13:05:05.0000] <annevk>
/me tries to find it

[13:06:27.0000] <annevk>
Domenic: https://www.w3.org/Bugs/Public/show_bug.cgi?id=26183 is the bug on what I'd like

[13:06:31.0000] <annevk>
Domenic: not sure how attainable it is

[13:07:06.0000] <annevk>
Domenic: but basically it comes down to the minimum amount of information you would need from an object to get all those methods

[13:07:11.0000] <annevk>
Domenic: while not caring about perf I guess

[13:23:44.0000] <jsbell>
I believe, given an internal list, you need to define the hooks length(list) and get(itemKind, list) for itemKind of "key", "value", "key+value"; the rest is boilerplate

[13:26:05.0000] <jsbell>
(to match the ES6 iterators with regards to liveness etc)

[13:27:31.0000] <jsbell>
*sigh*, and then there's the /empty/ case Domenic points out in the bug comment. Bleah.

[13:28:00.0000] <Domenic>
I don't think we should do live iterators in any case on the platform

[13:28:08.0000] <Domenic>
Even for live NodeLists

[13:34:11.0000] <jsbell>
I suppose DOMTokenList should be set-like

[13:38:19.0000] <annevk>
jsbell: yeah, misnamed

[13:39:01.0000] <annevk>
jsbell: I'm trying to at least make the underlying terminology for those objects is correct, though I only started doing so recently so there's probably room for improvement

[13:39:16.0000] <annevk>
 /\ sure

[13:58:10.0000] <Hixie>
mathiasbynens: if you want the feature, defend it :-)

[14:04:12.0000] <Hixie>
caitp: can you clarify what exactly it is you changed in https://gist.github.com/caitp/71a97bcb41fdb145b688 ? trying to manually do the diff is giving me a headache

[14:05:24.0000] <caitp>
the use of phrases like "12.7 Repeat while group cursor is not null" rather than "Label: <do a thing>" + "If <x> jump to <label>"

[14:06:25.0000] <caitp>
for instance

[14:07:25.0000] <caitp>
but that's not really the important part (although it is nice to see the pattern that is happening on the first step rather than down 15 steps)

[14:07:39.0000] <caitp>
the important thing is the changes to indentation and nested numbering, makes it so much easier to visualize.

[14:48:13.0000] <Hixie>
caitp: ok that didn't really respond to comment 2 then, ok

[14:48:17.0000] <Hixie>
caitp: responded on the bug


2014-08-28
[18:29:54.0000] <caitp>
would you say chrome is doing the right thing here? http://jsfiddle.net/eq4La8nr/ (does not emit the `load` event when parsing svg via innerHTML's setter)

[23:28:47.0000] <zcorpan_>
caitp: http://www.w3.org/TR/SVG2/interact.html#LoadEvent seems to say it's window.onload. though http://www.w3.org/TR/SVG2/script.html#OnLoadEventAttribute doesn't say so. the spec seems confused

[00:37:54.0000] <zcorpan_>
Domenic: wait, i thought <hr role=menuitem> did override the role

[00:42:53.0000] <Ms2ger>
krijnhoetmer_, logs down?

[00:55:41.0000] <zcorpan_>
Domenic: nevermind. (it wasn't like that originally though)

[00:58:25.0000] <zcorpan_>
Domenic: i don't understand why you can't use the native element instead of using a custom element

[00:59:14.0000] <zcorpan_>
Domenic: there are also semantics that can't be expressed with ARIA in the first place (like <input type=color>)

[01:03:16.0000] <zcorpan_>
Domenic: maybe you should think about what aria was intended to solve. it was intended to enable accessible custom widgets without waiting for something like XBL to be implemented everywhere, using a mechanism that was available to screen readers on top of IE6 (with no acc mapping, just DOM tree)

[01:03:52.0000] <zcorpan_>
Domenic: this is why there is only setAttribute and no nice DOM API

[01:25:12.0000] <JakeA>
Any indexeddb experts awake? If I have an objectStore without out-of-line keys, how do I create an index ensuring all values are unique? store.createIndex('name', ???, {unique: true});

[01:25:54.0000] <JakeA>
The index should be on the value, not a property within the value

[01:26:31.0000] <JakeA>
This is assuming the values within 'store' are simple values (strings in this case)

[01:37:43.0000] <JakeA>
Answer: store.createIndex('name', '', {unique: true});

[01:54:48.0000] <zcorpan_>
annevk: \o/

[01:56:39.0000] <JakeA>
Papa Van Kesteren

[02:38:18.0000] <smaug____>
blinkers really try to solve all sorts of things with web components

[02:39:15.0000] <smaug____>
I guess "web components" is a buzz word, should be treated like HTML5

[02:41:29.0000] <gsnedders>
So Opera has grown by 253 full-time employees between 2Q13 and 2Q14. I wonder in what departments…

[02:42:17.0000] <gsnedders>
Like, I wonder if this is in the advertising side of the business or not.

[02:50:19.0000] <Ms2ger>
"The x-ua-compatible meta tag (or header) was meant to temporarily repair legacy sites until a long-term solution could be implemented."

[02:50:23.0000] <Ms2ger>
lolololol

[02:50:41.0000] <gsnedders>
where's that from?

[02:52:53.0000] <JakeA>
smaug____: I'm wary of any solution that "just does it for me". From jquery plugins to Angular to React to Web Components

[02:53:16.0000] <Ms2ger>
https://twitter.com/jonathansampson/status/504747785413873664

[03:00:11.0000] <zcorpan_>
things aren't temporary on the web :-(

[03:03:29.0000] <smaug____>
synx XHR is! I will kill it in 5 years

[03:05:11.0000] <Ms2ger>
annevk, congratulations

[03:58:50.0000] <zcorpan_>
Domenic: actually it's still just an authoring requirement like stevef said. "user agents MUST still use the value of the the semantic of the WAI-ARIA role when exposing the element to accessibility APIs." http://www.w3.org/TR/wai-aria/host_languages#host_general_conflict_header

[04:36:19.0000] <mathiasbynens>
annevk: congrats!

[04:41:50.0000] <hsivonen>
krijnhoetmer_: the logs for yesterday don't load for me

[04:44:05.0000] <jgraham>
hsivonen: It appears that the problem is that they don't exist

[04:46:39.0000] <hsivonen>
jgraham: I see.

[04:46:59.0000] <hsivonen>
/me wonders what annevk is being congratulated on

[05:02:05.0000] <Ms2ger>
hsivonen, see his blog

[05:13:56.0000] <roc>
cor

[05:18:09.0000] <zcorpan_>
roc: do you happen to have some time to look at https://www.w3.org/Bugs/Public/show_bug.cgi?id=25508#c16 perchance?

[05:33:00.0000] <hsivonen>
annevk: congratulations

[05:38:56.0000] <foolip>
annevk: weeee :)

[06:07:46.0000] <zcorpan_>
is there a good example of placeholder="" that doesn't have usability problems?

[06:12:46.0000] <ondras>
hm, <input type="search" placeholder="Enter search phrase..." /> ?

[06:17:01.0000] <zcorpan_>
ondras: i think http://www.nngroup.com/articles/form-design-placeholders/ argues that that is bad

[06:17:46.0000] <zcorpan_>
although a single search field is probably not so problematic as several fields in a form

[06:18:40.0000] <jgraham>
I would be interested in actual research showing that they perform badly; I only recall seeing theories

[06:18:56.0000] <ondras>
yeah. after skimming through that article, I would argue that most of those points do not apply to my one-search-input scenario

[06:29:47.0000] <zcorpan_>
how about <label>Email <input type=email placeholder="foo⊙bc"></label> (as part of a bigger form)? i guess it suffers from the problem that the user might think that it's already filled in, but i don't know if that's a real issue when the text is gray

[06:30:30.0000] <ondras>
sounds okay to me

[06:30:46.0000] <ondras>
but again, I am somewhat more inclined to placeholder usage, when compared to that article's author :)

[06:48:22.0000] <zcorpan_>
ok i've updated http://html-differences.whatwg.org wrt placeholder

[06:50:29.0000] <caitp>
have you ever noticed how IE will fire an input event whenever the placeholder attribute changes, like ever since they added placeholder?

[06:53:11.0000] <zcorpan_>
caitp: did you see my message about <svg onload>? (i think you weren't here when i sent it)

[06:53:27.0000] <caitp>
was probably sleeping, I missed that

[06:53:38.0000] <zcorpan_>
caitp: http://www.w3.org/TR/SVG2/interact.html#LoadEvent seems to say it's window.onload. though http://www.w3.org/TR/SVG2/script.html#OnLoadEventAttribute doesn't say so. the spec seems confused

[06:54:00.0000] <caitp>
hum

[06:55:53.0000] <zcorpan_>
i think what happened was that an earlier version of svg required a load event when </svg> was parsed or some such, but browsers didn't like that and then the svg wg wanted to align with <body onload> instead

[06:56:19.0000] <caitp>
makes sense

[07:01:11.0000] <caitp>
thanks for the summary, I would have spent hours digging through that and probably not found what I was looking for :>

[07:03:08.0000] <zcorpan_>
filed https://www.w3.org/Bugs/Public/show_bug.cgi?id=26688

[07:08:49.0000] <zcorpan_>
would it be useful with more examples in html-differences?

[07:44:46.0000] <Domenic>
zcorpan_: yeah it looks like I was mega-wrong in a few ways.

[07:45:16.0000] <Domenic>
zcorpan_: regardless the project I am trying to solve is "reimplement the usual HTML elements as custom elements" so using the native element instead of the custom element would be beside the point

[07:48:23.0000] <caitp>
it only seems to be worth it for non-trivial elements, because for trivial stuff you end up writing more, and more complicated code (from what I've seen)

[08:28:41.0000] <Domenic>
caitp: here is pretty much all of the code it takes to implement HTMLDivElement https://github.com/dglazkov/html-as-custom-elements/blob/master/src/idl/CustomHTMLDivElement.idl

[08:30:13.0000] <caitp>
defining getters/setters in JS ends up being more code than letting the bindings generator do the hard work and just implementing quick getters/setters in C++

[08:30:59.0000] <caitp>
so for trivial elements where it's like, 1 reflected content attribute + HTMLelement, it just ends up not being worth it imo

[08:51:57.0000] <Domenic>
Yes, that is why you define it in IDL and have the IDL generate the JS

[08:52:28.0000] <Domenic>
That is why I said that the IDL file is all the code it takes to implement HTMLDivElement

[08:53:57.0000] <caitp>
ah, so that's a bit more than the privatescript generator is doing currently

[08:54:40.0000] <caitp>
unless something nice landed that I didn't notice

[11:45:43.0000] <Hixie>
annevk: you around?

[11:46:15.0000] <Hixie>
zcorpan: do you have any news on https://www.w3.org/Bugs/Public/show_bug.cgi?id=24005 ?

[11:46:21.0000] <Hixie>
zcorpan: or a link for where i can look myself for the news

[11:47:45.0000] <zcorpan>
Hixie: ask fs⊙oc

[11:48:15.0000] <Hixie>
k

[11:48:16.0000] <Hixie>
thanks

[13:13:31.0000] <Domenic>
So what are the UA-facing parts of HTML's ARIA mapping? Just implicit default ARIA roles? The strong native semantics and restrictions are only for authors?

[13:13:47.0000] <Domenic>
s/implicit default ARIA roles/implicit default ARIA roles, properties, and states/

[13:49:06.0000] <Hixie>
Domenic: yeah more or less

[13:49:35.0000] <Domenic>
Hixie: OK. FWIW I think that could be signposted better.

[13:49:51.0000] <Hixie>
i'm kinda hoping that whole section could be spun off into its own spec

[13:50:12.0000] <Domenic>
I feel like SteveF would be happy to take it off your hands :P

[13:51:17.0000] <Hixie>
i suggested it but he declined

[14:23:12.0000] <annevk>
Hixie: yeah now for a bit

[14:23:21.0000] <annevk>
(thanks for all the congrats everyone :-))

[14:28:11.0000] <TabAtkins>
annevk: Well, your contribution was minimal, but your partner deserves plenty of congrats. ^_^

[14:28:52.0000] <annevk>
heh, true story, she did great

[14:29:49.0000] <Hixie>
annevk: i was just gonna ask about what we should do with https://www.w3.org/Bugs/Public/show_bug.cgi?id=12230 , but it sounds like you may have more important things to worry about right now :-)

[14:30:01.0000] <jgraham>
annevk: I hope it all goes well from here :)

[14:31:42.0000] <annevk>
Hixie: I'd really like browsers to fix things; seems unfortunate to have this for just two objects or so

[14:31:53.0000] <Hixie>
yeah

[14:31:57.0000] <Hixie>
couldn't agree more

[14:32:29.0000] <annevk>
I'm also happy to wait longer just like I'm doing with mutation events

[14:32:44.0000] <annevk>
maybe I should add a XXX in the spec though to call out this bug

[14:32:57.0000] <Hixie>
well i don't think anything's gonna change unless we put pressure on something to change

[14:36:40.0000] <jgraham>
The thing that has to change is that someone has to collect data

[14:36:47.0000] <jgraham>
Or you have to spec it I guess

[14:37:05.0000] <jgraham>
Or you wait a few years and see if Servo has to implement it

[14:37:13.0000] <jgraham>
I don't recommend the last option though

[14:37:34.0000] <Hixie>
spec what? the feature we want dropped?

[14:37:40.0000] <jgraham>
Yes

[14:37:55.0000] <Hixie>
that doesn't seem likely to lead to the change we're looking for :-)

[14:38:51.0000] <jgraham>
If no one thinks the value of dropping it is equal to the effort of adding telemetry, then it seems like a very mild want

[14:39:00.0000] <Domenic>
what's this now http://www.whatwg.org/specs/url/2014-07-30/

[14:39:19.0000] <jgraham>
OTOH whenever the spec is out of line with what actually has to be implemented to match other browsers, that's a serious problem

[14:40:04.0000] <Hixie>
jgraham: well, _I_ think the value of dropping it is equal to the effort of adding telemetry... far greater than, even

[14:40:39.0000] <jgraham>
Hixie: so why haven't you added telemetry?

[14:41:51.0000] <annevk>
Domenic: a non-publicised experiment, I suspect we might do a blog post thing around it at some point

[14:41:55.0000] <Hixie>
jgraham: i'm not a browser vendor

[14:42:04.0000] <jgraham>
Hixie: Gecko accepts patches

[14:42:09.0000] <jgraham>
Blink too

[14:42:31.0000] <annevk>
jgraham: not sure that would be effective usage of Hixie's time

[14:42:35.0000] <Hixie>
i don't think spec writers should be in the business of writing code for browsers. it leads to a conflict of interest.

[14:43:13.0000] <jgraham>
I don't see how adding code to run experiments to see what needs to be specced is either a) a waste of a spec author's time or b) a conflict of interest

[14:45:50.0000] <Hixie>
the conflict of interest comes from when i inevitably become interested in doing more than just adding experiments

[14:47:10.0000] <jgraham>
So your argument is that if you add code to test specific hypotheses about which features can be dropped, there is an inevitable slippery slope to you adding more code to actually implement features the way you want?

[14:49:41.0000] <Hixie>
jgraham: yeah. i don't have good impulse control. i'm good at setting boundaries when they're discontinuous, but not when they're a judgement call.

[14:50:40.0000] <Hixie>
(for similar reasons, i've stopped reading books entirely.)

[14:51:33.0000] <jgraham>
OK, I guess

[14:52:10.0000] <jgraham>
Then I guess you need to expend the effort you think removing the feature is worth getting someone else to do the implementation for you

[14:52:25.0000] <jgraham>
(implementation of the telemetry)

[14:52:43.0000] <Hixie>
my concern is that if i have to do work to convince people to do it, then i'm probably wrong that it's worth doing.

[14:53:06.0000] <Hixie>
i don't like it when other spec writers go out and advocate for their dumb features

[14:54:11.0000] <Hixie>
i feel like specs should win or lose purely on their merits rather than on how much one person was able to convince other people to do stuff (especially since often the "other people" are poorly-supervised interns, new employees, or people who got confused by fancy words like "accessibility")

[14:58:23.0000] <jgraham>
Well I agree that making specs a PR battle isn't a good approach. But convincing someone to run an experiment is not morally equivalent to argument-by-exhaustion

[14:59:17.0000] <Hixie>
certainly

[14:59:30.0000] <Hixie>
who should i be trying to convince, any idea?

[15:01:41.0000] <jgraham>
I don't know how easy it is to run that kind of experiment in gecko, but smaug____ might be an obvious person. For Blink I don't know; maybe ask zcorpan

[15:03:34.0000] <smaug____>
hmm

[15:05:19.0000] <smaug____>
ah, about bug 12230

[15:06:11.0000] <smaug____>
last time I was doing something with that stuff, some pages relied on synthetic click to trigger links

[15:06:19.0000] <smaug____>
(and it wasn't just click())

[15:06:31.0000] <smaug____>
but sure, time to re-evaluate

[15:32:28.0000] <smaug____>
bpoulain's response to bz in www-style is hilarious :)

[15:38:05.0000] <Domenic>
what is hilarious is https://groups.google.com/a/chromium.org/forum/#!topic/blink-dev/2-R4XziFc7A

[15:38:44.0000] <Domenic>
(but ok smaug____, I read your thing too, and it is pretty good.)

[15:51:00.0000] <Hixie>
did bpoulain just tell bz to learn about browsers

[15:51:41.0000] <Hixie>
because that is pretty funny indeed

[15:52:00.0000] <tantek>
wow what? ok that's enough to make me click on a forum link.

[15:53:00.0000] <Hixie>
http://lists.w3.org/Archives/Public/www-style/2014Aug/0403.html is the e-mail smaug____ is referring to, i assume

[15:54:34.0000] <smaug____>
yup

[15:55:46.0000] <tantek>
zoms

[15:56:11.0000] <tantek>
and cites dbaron for "a little introductory article". this is gold.

[16:48:18.0000] <zcorpan>
Hixie: ask philipj about adding use counters

[16:48:28.0000] <Hixie>
already did

[16:48:33.0000] <Hixie>
(in the bug)

[16:49:28.0000] <zcorpan>
Hixie: ah ok. (he removes blink features for breakfast)

[16:50:21.0000] <Hixie>
yeah, no kidding

[16:50:23.0000] <Hixie>
guy is scary :-P

[16:53:39.0000] <gsnedders>
anyone that tall is scary


2014-08-29
[20:48:06.0000] <roc>
is he taller than Anne?

[20:57:39.0000] <TabAtkins>
roc: He... might be.

[20:57:45.0000] <TabAtkins>
I've met him, and he's significantly taller than me.

[21:00:43.0000] <MikeSmith>
http://foolip.files.wordpress.com/2013/10/webtech.jpg

[21:01:33.0000] <MikeSmith>
that's how much taller he is than Erik Dahlstrom or Lars-Erik or others you might know

[21:26:42.0000] <caitp>
always show respect and gratitude for tall people, you know not how many door frames they've walked into just for the opportunity to speak with you today

[23:55:55.0000] <MikeSmith>
a developer on github seems to be suggesting I switch to using Jekyll for validator docs I'm publishing at http://validator.github.io But it's uncomplicated set of content (two pages) that doesn't change often and my publishing setup is dead-simple already, so I don't know how relying on Jekyll would make things any easier or better

[23:56:14.0000] <MikeSmith>
context is https://github.com/validator/validator.github.io/issues/7

[23:59:28.0000] <karlcow>
MikeSmith: seems a lot of pipes for two pages without apparent benefits.

[00:01:21.0000] <MikeSmith>
karlcow: yeah but I wondering if I'm missing something

[00:03:43.0000] <MikeSmith>
the appeal of a lot of these markdown systems seems to be based on a view that authoring in HTML is somehow more trouble, or that it's a barrier to getting contributions from other people (with the assumption being that other people find authoring in HTML to be a lot of trouble)

[00:04:59.0000] <tantek>
it is not that authoring in HTML is a lot of trouble, but rather that it distracts from authoring. It's noise that interrupts the process of conveying thoughts into text.

[00:05:00.0000] <MikeSmith>
I'm wondering if I'm being a techno-reactionary by not personally finding HTML authoring to be a big pain point

[00:05:33.0000] <tantek>
MikeSmith: I both don't find HTML authoring to be a big pain point, and yet I also feel its intrusion on the thought process of writing content.

[00:06:38.0000] <MikeSmith>
tantek: I personally don't find it an interruption to my thought process much at all. Maybe that's just because I'm used to it.

[00:06:42.0000] <tantek>
but for the issue at hand, once you've gone to the trouble of writing content in HTML, it's the easiest thing to maintain. instead of a system to convert to HTML.

[00:07:01.0000] <MikeSmith>
yeah

[00:07:21.0000] <tantek>
MikeSmith: I author every single one of my notes on my site in HTML in the storage file for it. Every tweet you see from me was written first in HTML on my own site.

[00:07:28.0000] <tantek>
since 2010-01-01.

[00:07:31.0000] <MikeSmith>
ok

[00:08:00.0000] <tantek>
Though I'm "used to it" I do sense where it slows me down. Still.

[00:08:22.0000] <tantek>
so I have some sympathy for the markdown advocates, despite not using markdown myself.

[00:08:42.0000] <MikeSmith>
yeah me too, but again, the right tool for the job and all that

[00:09:10.0000] <MikeSmith>
I mean I wouldn't want to write my e-mail messages in HTML

[00:09:31.0000] <MikeSmith>
so I can understand the general sentiment

[00:09:46.0000] <tantek>
I do however do two things which make my authoring much easier than "just" HTML

[00:09:51.0000] <tantek>
1. I use white-space pre-wrap

[00:09:58.0000] <MikeSmith>
/me nods

[00:10:00.0000] <tantek>
2. I use an auto-linker/embedder

[00:10:25.0000] <MikeSmith>
dunno what an auto-linker/embedder is

[00:10:29.0000] <tantek>
(my own open source one, function auto_link() in tantek.com/cassis.js (works in PHP and JS))

[00:10:40.0000] <MikeSmith>
/me takes a look

[00:11:25.0000] <tantek>
you give it mixed text with URLs, and it turns the text URLs into <a href> links, and if the URL ends in .jpg .png .gif it embeds it as an <img src>, and if it is video, <video>, or custom Youtube/Vimeo video embeds. all just from URLs.

[00:11:51.0000] <tantek>
you give it a plain text string, it gives you a string with *some* markup

[00:12:45.0000] <MikeSmith>
yeah, nice

[00:13:05.0000] <tantek>
so that saves me considerable time in my notes (which become tweets)

[00:13:17.0000] <MikeSmith>
sure

[00:13:28.0000] <tantek>
my articles (blog posts) though are written 100% in HTML. Every paragraph with explicit <p></p> etc.

[00:13:39.0000] <tantek>
no auto_link use in my blog posts

[00:13:48.0000] <MikeSmith>
oh

[00:13:51.0000] <tantek>
so yes they take longer to write, even just to do all the markup by hand

[00:14:00.0000] <tantek>
but it means I have more precise control over all the markup

[00:14:06.0000] <MikeSmith>
right

[00:14:20.0000] <MikeSmith>
that's what it comes down to in the end for me

[00:15:09.0000] <MikeSmith>
I guess I'd rather have the precise control directly than trying to wrestle with figuring how to to get whatever markdown system to generate that

[00:15:47.0000] <tantek>
yeah - I agree, I have my own analysis/criticism of markdown documented here: http://tantek.com/w/Markdown

[00:15:48.0000] <MikeSmith>
there are cases of groups using a common markdown mechanism makes a lot of sense

[00:16:03.0000] <MikeSmith>
like the Python ReST docs

[00:16:14.0000] <MikeSmith>
/me takes a looks at http://tantek.com/w/Markdown

[00:16:31.0000] <tantek>
and with that I must go to sleep. Enjoy and talk more in the morning(PDT).

[00:17:01.0000] <MikeSmith>
cheers

[00:17:04.0000] <MikeSmith>
nn

[02:18:55.0000] <tobie>
Saw Hixie mention a URL spec snapshot on webapps@ the other day. Is there something consistent across specs here? Would love to automatically include that data in specref.

[02:20:14.0000] <Ms2ger>
Don't.

[02:20:27.0000] <tobie>
Why not?

[02:20:43.0000] <Ms2ger>
It's not supposed to be referenced

[02:21:53.0000] <tobie>
I'm genuinely trying to understand what the end goal is, here.

[02:22:35.0000] <Ms2ger>
Dunno

[02:22:43.0000] <Ms2ger>
But referencing it definitely isn't

[02:22:58.0000] <tobie>
so it's better to have W3C clones?

[02:23:07.0000] <Ms2ger>
No?

[02:23:30.0000] <foolip>
The W3C wouldn't stop forking specs if WHATWG started publishing stable copies...

[02:24:07.0000] <tobie>
foolip, really? What makes you so sure?

[02:24:20.0000] <tobie>
How sustainable would that position be?

[02:24:53.0000] <tobie>
Afaik, WHATWG is publishing such versions for certain specs.

[02:25:56.0000] <Ms2ger>
Have you ever interacted with the W3C?

[02:26:54.0000] <foolip>
tobie: I think they want more of the whole process things as well, partially for the patent policy I'm guessing

[02:27:11.0000] <foolip>
/me scrolls up and sees that self is scary for being tall and removing code :)

[02:27:19.0000] <foolip>
zcorpan: which bug was that, I couldn't find the context

[02:30:10.0000] <tobie>
foolip: WHATWG has a patent policy through its W3C CG.

[02:31:49.0000] <tobie>
Ms2ger: are you really answering me with rhetorical questions? I'd rather you'd just tell me to fuck off. :)

[02:38:23.0000] <zcorpan>
foolip: https://www.w3.org/Bugs/Public/show_bug.cgi?id=12230

[02:41:43.0000] <foolip>
tobie: yes, but somehow that doesn't seems to be enough

[02:44:45.0000] <tobie>
foolip: that's not enough for some. It's certainly enough for others.

[02:45:39.0000] <tobie>
Anyway, I think marcos is spot on finding this feud unproductive.

[02:45:54.0000] <jgraham>
Isn't the point that the stable specs are a necessary part of the patent policy?

[02:46:25.0000] <foolip>
If I were to bet money, I would still bet on the W3C continuing to fork, pretty much regardless of how the specs on whatwg.org are published

[02:46:37.0000] <jgraham>
You can't just cover "anything that we ever write down", but you can cover "things we wrote down and agreed to put in a stable spec"

[02:46:50.0000] <foolip>
zcorpan: thanks, that was actually in my inbox but I hadn't gotten to it yet :)

[02:48:19.0000] <jgraham>
Yeah, so there's definitely a conflict of interests that the W3C has here which means that it won't necessarily stop forking specs just because there is no technical reason to do so

[02:50:18.0000] <foolip>
tobie: did marcos write a blog post or something?

[02:51:17.0000] <jgraham>
I love the way irc avoids centralisation

[02:51:37.0000] <foolip>
a hint of irony? context?

[02:53:09.0000] <jgraham>
I thought it was irccloud going down (again), but maybe it was just a lot of people on ircclod getting cut of with some other people

[07:11:39.0000] <erlehmann>
has anyone thought about a size-parameter to <img> for responsive images?

[07:11:52.0000] <erlehmann>
like, just size in octets?

[07:12:04.0000] <erlehmann>
because that could work fairly well for progressive images

[07:12:23.0000] <erlehmann>
otherwise, for everyone who does not use command line tools, it would not be easy to author

[07:12:38.0000] <erlehmann>
maybe the general fetch declarative parameters could help here

[07:18:38.0000] <zcorpan>
erlehmann: how do you mean?

[07:19:25.0000] <erlehmann>
zcorpan jpeg images can contain several scans. something like <img size=12345 src="…"> could only fetch until the first scan.

[07:19:39.0000] <erlehmann>
progressive jpegs

[07:19:45.0000] <erlehmann>
but this is too low-level for day-to-day use i think

[07:20:12.0000] <erlehmann>
and maybe solves the problem at the wrong abstraction level (see client hints)

[07:21:01.0000] <erlehmann>
i am doing a writeup on the technique

[07:26:18.0000] <zcorpan>
erlehmann: i think that has been considered. yoav also experimented with a more elaborate image format that supports art direction, but deploying it would take more time than <picture> since it requires changes at several layers

[07:26:54.0000] <erlehmann>
zcorpan i'll do my writeup regardless ;)

[07:27:06.0000] <zcorpan>
might still happen in the future though

[07:27:18.0000] <zcorpan>
sure :-)

[07:28:34.0000] <erlehmann>
zcorpan for the picture element, a size parameter may make sense also, if you have progressive jpegs.

[07:28:48.0000] <erlehmann>
then you could have one file that is served which contains all scans

[07:40:26.0000] <yoav>
erlehmann: I've looked into both using progressive jpegs and a dedicated container format at http://blog.yoav.ws/2012/05/Responsive-image-format and http://blog.yoav.ws/2013/09/Responsive-Image-Container

[07:41:04.0000] <erlehmann>
yoav great!

[07:41:08.0000] <yoav>
erlehmann: I think that a size attribute would be a huge maintenance pain though

[07:41:12.0000] <erlehmann>
yeah

[07:41:29.0000] <erlehmann>
client hints are probably much better

[07:42:31.0000] <yoav>
A responsive image format has its advantages (e.g. can download diffs between image qualities), but it's hard to pull off (ecosystems are hard)

[08:44:36.0000] <cwilso>
tobie: "WHATWG has a patent policy through its W3C CG" is a factually incorrect statement.  It would be correct to say "The WHATWG W3C CG has a patent policy."

[08:46:06.0000] <tobie>
cwilso: how is that difference relevant?

[08:46:32.0000] <tobie>
cwilso: that's a genuine question.

[08:48:06.0000] <cwilso>
tobie: The bulk of the work done by the WHATWG is done outside the CG.  For example, there are currently 209 people in this chat.  No idea how many people are on the whatwg@ list, but suspect it's similar scale.  There are only 51 members of the WHATWG W3C CG.

[08:49:10.0000] <tobie>
Sure. But forking that spec to W3C doesn't magically change that.

[08:49:22.0000] <cwilso>
tobie: Only those 51 participants *might* be making IP commitments.  The work is simply not done inside a structure that supports IP.

[08:49:43.0000] <cwilso>
tobie: no, forking absolutely does not fix this.

[08:51:12.0000] <cwilso>
It does *change* it in a subtle way - because any member of the WG to which a spec might be forked then DOES make a commitment (unless they exclude), so there is a bit more coverage, potentially - but that's not a reason to fork, in and of itself.  (I do want to be clear that I don't consider that a reason to fork.)

[08:51:38.0000] <tobie>
Well, especially that could be handled a different way, right?

[08:52:15.0000] <tobie>
I mean, one could imagine W3C members making such a commitment despite the spec not being published by W3C.

[08:52:32.0000] <cwilso>
Well, sure.  The WHATWG could have an up-front patent policy.  As I suggested when I was originally asked to join the WHATWG.

[08:53:36.0000] <cwilso>
No, the W3C's patent policy is only for specs they produce.  And I think you'd find any large-patent-pool-holders unwilling to sign up for a "hey, we're gonna apply your commitment to these other specs we don't own, 'k?"

[08:53:57.0000] <cwilso>
Or else I have a list of specs to add there.  Starting with H.264.  :P

[08:53:58.0000] <tobie>
Not sure. has this been discussed by the AC?

[08:54:45.0000] <tobie>
(Note this would be for snapshots only, obviously)

[08:55:14.0000] <cwilso>
The AC isn't much of a discussion pool.  But yeah, this very discussion has been had.

[08:55:40.0000] <cwilso>
And there's your other problem - because snapshots are pretty much anathema to most WHATWGers, because of staleness.

[08:55:55.0000] <tobie>
most specs are versioned.

[08:56:11.0000] <jgraham>
I think people are OK with the idea that there could be lawyer-centric snapshots

[08:56:24.0000] <cwilso>
In fact, some of the W3C "forks" are (as I understand it) are pretty strict snapshots of WHATWG specs; but that can still cause staleness.

[08:56:36.0000] <cwilso>
this isn't lawyer-centric.

[08:57:37.0000] <jgraham>
It's also not clear to me how the CG thing matters. The patent policy is only about defending known threats. You decide when joining a WG "are enough of the people that I am scared in relation to this work of also in this WG". It seems like the exact same consideration applies to a CG

[08:57:58.0000] <jgraham>
It doesn't matter that there are only N people if those are the ones you care about

[08:58:20.0000] <cwilso>
Any idea this is just for lawyers to fiddle with is simply mistaken.  Yes, the lawyers need to be satisfied for IP stuff; but if you say "IP commitments apply to this [stale?] snapshot, but don't look at that, the real spec's over here", you are opening up another opportunity for staleness.

[08:58:22.0000] <tobie>
IP lawyers are generally freaked out by the CG patent policy, fwiw.

[08:58:50.0000] <jgraham>
That sounds promising :p

[08:59:30.0000] <tobie>
They can't control the scope of their contribution as well as with WGs.

[08:59:38.0000] <cwilso>
jgraham: Your statement is mostly correct - but the goal is "let's get enough of the people I am scared of into this WG, so they make commitments (or are clear about exclusions) and I don't need to be scared of them."

[09:00:24.0000] <tobie>
So my question here is: why do people go in WGs in the first place?

[09:00:30.0000] <cwilso>
that's absolutely true, CGs are a bit looser.  But they also can't produce RECs directly.  They're great as incubators, in my opinion.

[09:01:03.0000] <cwilso>
Because in the past, that was the only way to really participate in designing solutions.

[09:01:19.0000] <tobie>
So the only carrot is the technical forum?

[09:01:25.0000] <cwilso>
And because the more people were there, the less the likelihood you'd be sued for implementing.

[09:02:04.0000] <tobie>
The latter's still true whether or not there's an attached technical forum, no?

[09:02:11.0000] <cwilso>
no

[09:02:26.0000] <tobie>
why not?

[09:02:33.0000] <cwilso>
Because if there's no carrot, no one participates, and there's no IP contributions.

[09:03:43.0000] <cwilso>
If, say, Oracle doesn't need to sign up to a WG to participate in the definition of IDB to make sure it's going to work well for them, then they certainly wouldn't want to join just to give away their IP.

[09:04:07.0000] <cwilso>
note this is a hypothetical example, not a real one.  Or maybe it is, I have no idea, but I'm not making any claims.

[09:05:58.0000] <tobie>
Joining has no IP value for them unless they're actually implementing some of the specs in that group, btw.

[09:06:54.0000] <cwilso>
not really true.  "Actually implementing" implements browser vendors only; there are subtler interactions than that.

[09:07:04.0000] <cwilso>
s/implements/implies

[09:07:25.0000] <tobie>
like which ones?

[09:08:45.0000] <cwilso>
Well, for example, the WG had been on a WebSQL path; that clearly would not have been good for Oracle, since it defines the standard for the web (for better or worse) to be WebSQL.  Yes?

[09:09:34.0000] <tobie>
Indeed.

[09:09:59.0000] <tobie>
(Not sure yet where you're going with that.)

[09:11:48.0000] <cwilso>
It would be better for Oracle (and now I'm getting uncomfortable with using a concrete example) for WebSQL to NOT be the standard, and a more open ecosystem that their products could interact with, to be defined as a standard?

[09:14:13.0000] <tobie>
Sure.

[09:14:46.0000] <tobie>
Sorry for the making you uncomfortable. Why don't you pick a Microsoft product instead?

[09:14:56.0000] <tobie>
:P

[09:16:10.0000] <tobie>
Note DBCo doesn't NEED to be member of said WG to disclose IP.

[09:16:25.0000] <tobie>
(if that's where you're getting at)

[09:52:18.0000] <erlehmann>
yoav zcorpan http://news.dieweltistgarnichtso.net/notes/progressive-jpeg-truncate.html

[10:01:43.0000] <erlehmann>
yoav zcorpan nothing new, right?

[10:04:33.0000] <cwilso>
tobie:  :P

[10:05:40.0000] <cwilso>
No, they don't need to be member of said WG to disclose IP.  But remember the goal - you want more people CONTRIBUTING their IP.  Whether intentionally because they're good sharers, or as a side of effect of being in the group.

[10:09:26.0000] <zcorpan>
erlehmann: right

[10:58:05.0000] <zcorpan>
what is correct behavior for jsfiddle.net/zzw9wpdq/6/ ?

[11:01:01.0000] <zcorpan>
TabAtkins: ^

[11:02:15.0000] <caitp>
I see the same behaviour from FF31, fwiw

[11:06:32.0000] <caitp>
oh, it is different behaviour, just not different in the way you describe it

[11:06:52.0000] <caitp>
.container expands to contain both .inline-block and the image in chrome, while in ff it doesn't

[11:25:45.0000] <Hixie>
tobie: the snapshots are for lawyers, not for implementors. don't reference them. Referencing stale drafts is a mistake (that the W3C and the IETF keep making)

[11:26:12.0000] <Hixie>
cwilso: whatwg@ has ~2000 members.

[11:26:41.0000] <Hixie>
cwilso: any of which are welcome to joing the cg if they want to make a patent commitment, just like they're presumably welcome to join w3c wgs to make patent commitments

[11:27:12.0000] <Hixie>
given that we haven't made any sort of public announcement to encourage such behaviour, it's actually kinda shocking that 50 people have joiend the cg in the first place

[11:27:17.0000] <Hixie>
i dunno why anyone would join the cg

[11:27:55.0000] <Hixie>
i guess i should post on the whatwg blog about the url standard

[11:35:37.0000] <wanderview>
JakeA: ping

[11:36:14.0000] <wanderview>
do we expect [[BatchCacheOperations]] to remain in the cache spec once its updated?

[11:36:57.0000] <wanderview>
is that a hold over from when Cache.batch() was exposed?

[11:37:01.0000] <JakeA>
wanderview: Alex is against it, so probably not. It'll just be part of the algorithm to describe the atomic bits.

[11:37:10.0000] <JakeA>
wanderview: yeah

[11:37:24.0000] <wanderview>
JakeA: seems the algorithm supports mixed delete/put operations, but thats not exposed any more

[11:37:51.0000] <JakeA>
wanderview: a put involves deletes too

[11:38:15.0000] <JakeA>
(to remove entries that can no longer be reached)

[11:38:19.0000] <wanderview>
JakeA: true...

[11:39:04.0000] <wanderview>
JakeA:  but we don't expect any kind of batch operation that can do [put:a, delete:b, put:c], right?

[11:39:13.0000] <wanderview>
from what you said above

[11:39:33.0000] <JakeA>
True

[11:39:44.0000] <wanderview>
thanks

[11:50:40.0000] <Hixie>
MikeSmit1: yt?

[11:50:43.0000] <Hixie>
jorendorff: yt?

[11:51:07.0000] <Hixie>
MikeSmit1: https://www.w3.org/accounts/request isn't working for me. I'm trying to create a test account and I never get the e-mail.

[11:54:54.0000] <Hixie>
jorendorff: do you have any opinions on the summary i sent es-discuss?

[11:55:18.0000] <jorendorff>
Hixie:  haven't read it yet -- this week has been a little crazy

[11:55:23.0000] <Hixie>
k

[12:01:05.0000] <annevk_>
grrr

[12:01:45.0000] <annevk>
oh wow, that SHA-1 thread went over a hundred

[12:17:25.0000] <Hixie>
annevk: grrr?

[12:17:32.0000] <annevk>
Hixie: URL threads

[12:18:33.0000] <Hixie>
i did like the way plh basically sidestepped all my points and countered with an irrelevant thing about the API part of the spec

[12:29:03.0000] <caitp>
Hixie: maybe it's not worth spending time indenting that algorithm if nobody wants to implement it anyways :z

[12:29:31.0000] <Hixie>
heh

[12:34:56.0000] <Hixie>
MikeSmit1: nm, it finally came through

[12:54:56.0000] <cwilso>
hixie: the confluence of "any of which are welcome to join the cg if they want to make a patent commitment" and "I dunno why anyone would join the cg", as well as our previous discussions, lead me to believe you just don't care about managing (particularly: maximizing) IP commitments.  Is that so?

[12:55:35.0000] <Hixie>
i meant that i don't know why anyone would have joined the cg before there was anything to sign

[12:56:18.0000] <Hixie>
but certainly it's true that I don't prioritise maximising IP commitments over spec quality.

[12:56:32.0000] <Hixie>
i would be horrified if anyone did

[12:56:39.0000] <cwilso>
that's not an either-or, nor even necessarily related.

[12:56:53.0000] <Hixie>
well, they're related in that one has a finite amount of time

[12:57:25.0000] <Hixie>
and clearly the w3c doesn't prioritise spec quality over, say, getting consensus. or paying members.

[12:57:55.0000] <Hixie>
(and i'm horrified by much of the w3c)

[12:58:13.0000] <Hixie>
maybe "disgusted" would be better than "horrified" in the two places where i used it above

[12:58:17.0000] <cwilso>
well, yeah, I'd say prioritizing consensus is pretty important, though I believe you disagree with me.

[12:58:39.0000] <Hixie>
on the topic of consensus, and more or less on that topic alone, i am in firm agreement with the late Ms Thatcher.

[12:59:54.0000] <cwilso>
Indeed, if I felt I had to abandon my beliefs, principles or values, I'd be disgusted too.

[13:01:39.0000] <cwilso>
But merely saying "screw consensus" is not a principled declaration.  (As previously: when I say "concensus", I mean "rough consensus" - i.e. not unanimous consensus.)

[13:02:11.0000] <Hixie>
i haven't merely said that, my friend. As you well know. I've written long screeds on the reasoning behind my position.

[13:02:34.0000] <Hixie>
but the issue is moot in the case of the url spec anyway

[13:02:55.0000] <Hixie>
since we (a) have rough consensus already, and (b) the w3c is explicitly planning to not look for consensus

[13:03:03.0000] <Hixie>
they just want to republish our work with their logo

[13:03:24.0000] <Hixie>
why, i dunno. some absurd form of jealousy?

[13:03:52.0000] <Hixie>
it's not to get a stable form, since we have one

[13:04:05.0000] <Hixie>
it's not to get a place for patent commitments, since we have one of those too. One with the W3C logo on it no less.

[13:05:02.0000] <Hixie>
on a more productive note: anyone know if the console API is specced out anywhere?

[13:05:16.0000] <cwilso>
indeed, IP is not really the issue with the URL spec.  I'm actually not as convinced as you there is rough consensus, though I don't think it's that far off.  But the intersection of "not stable" and "not consensus based" leaves a lot of room for abuse.

[13:05:37.0000] <Hixie>
how can there not be rough consensus. It's literally a spec whose entire purpose is to describe what was implemented.

[13:05:54.0000] <caitp>
> console spec > mike's github repo?

[13:06:07.0000] <Hixie>
also, looking for "stable" in a web spec is _even more misguided_ than looking for consensus

[13:06:22.0000] <Hixie>
caitp: do you have a url?

[13:06:29.0000] <caitp>
http://sideshowbarker.github.io/console-spec/

[13:06:52.0000] <caitp>
dunno if there's another one somewhere.

[13:07:10.0000] <Hixie>
that's sadly incomplete. and stable.

[13:07:19.0000] <Hixie>
a pretty good example of why stable sucks, in fact :-)

[13:07:51.0000] <Hixie>
looks like there's no spec for it, huh

[13:08:22.0000] <Hixie>
MikeSmit1: do you know if there's anything less stable than that with respect to a console api spec?

[13:08:33.0000] <Hixie>
/me is going to start using "stable" as a synonym for "stale"

[13:18:45.0000] <cwilso>
nice and dismissive, love it.

[13:21:18.0000] <erlehmann>
http://news.dieweltistgarnichtso.net/bin/jpegtruncate.html

[13:21:38.0000] <wanderview>
JakeA: can you help me understand QueryParams.ignoreSearch?  the [[CacheQuery]] algorithm sets url.search to the empty string if this is set, but I don't see url.search being referenced anywhere...

[13:21:43.0000] <erlehmann>
does anyone know if i can compress the content of a data uri?

[13:21:54.0000] <wanderview>
also... it seems Request.url is a ScalarValueString... so its odd that it has .search and .href attributes

[13:21:57.0000] <erlehmann>
like, having a data uri that contains a gzipped text file?

[13:24:14.0000] <JakeA>
wanderview: hmm, maybe it lost something in the translation from the ts file...

[13:25:25.0000] <wanderview>
JakeA: I don't see those attributes being used in the ts file either...

[13:25:38.0000] <JakeA>
wanderview: the intention is, of ignoreSearch is true, then a request with url https://origin.co.uk/whatever?fjfjdjd will match an entry with url https://origin.co.uk/whatever?foobar

[13:26:26.0000] <JakeA>
wanderview: in the ts the url is parsed using new URL, the search portion of the URLs are set to an empty string

[13:26:34.0000] <JakeA>
(From memory)

[13:26:38.0000] <wanderview>
JakeA: ah, ok... the query part of the url

[13:27:01.0000] <wanderview>
JakeA: I'll write an issue on this... seems that needs to be fixed up if thats the intention

[13:27:11.0000] <JakeA>
wanderview: yeah, it's called search because of window.location.search

[13:27:34.0000] <JakeA>
\o/ legacy

[13:32:11.0000] <wanderview>
JakeA: hmm... perhaps my confusion is that Request.url is a ScalarValueString in the fetch spec

[13:32:46.0000] <wanderview>
JakeA: and maybe [[QueryCache]] expects it to be a url object where setting the `search` attribute changes the actual underlying value of the url

[13:33:31.0000] <JakeA>
wanderview: yeah, that's how it works in the TS

[13:35:00.0000] <wanderview>
JakeA: pardon my ignorance here, but is there a spec defined URL object?

[13:36:09.0000] <wanderview>
ah, yes

[13:36:13.0000] <wanderview>
https://developer.mozilla.org/en-US/docs/Web/API/URL

[13:37:44.0000] <wanderview>
annevk: is there a reason we don't use the URL object (http://url.spec.whatwg.org/#api) for Request.url in the fetch spec?

[13:49:09.0000] <jsbell>
On a slight tangent, does anyone implement URL's searchParams yet?

[13:49:17.0000] <Domenic>
wanderview: http://url.spec.whatwg.org/#url-apis-elsewhere

[13:49:40.0000] <wanderview>
Domenic: thanks

[13:50:50.0000] <wanderview>
jsbell: this claims chrome 32 and FF: https://developer.mozilla.org/en-US/docs/Web/API/URL#Browser_compatibility

[13:51:16.0000] <wanderview>
jsbell: oh... I guess not:  https://developer.mozilla.org/en-US/docs/Web/API/URLUtils.search

[13:51:29.0000] <wanderview>
if thats up-to-date

[13:51:43.0000] <jsbell>
It's still a FIXME in chrome

[13:51:53.0000] <jsbell>
(i.e. TODO item)

[13:52:21.0000] <wanderview>
at the end of the day, though... this is an internal algorithm and the use of URL just seems for convenience in the spec

[13:53:12.0000] <JakeA>
wanderview: url properties are all strings for consistency, I believe

[13:54:13.0000] <wanderview>
JakeA: yea, Domenic hooked me up with the link above

[13:57:43.0000] <JakeA>
wanderview: ah, yes, sorry

[13:58:11.0000] <wanderview>
oh, np... thanks for helping me understand :-)

[14:03:07.0000] <Hixie>
TabAtkins: how in the world did we end up with /**/ comments working inside media="" attributes

[14:03:08.0000] <wanderview>
hmm... I guess I need to parse Headers.getAll("Vary") values in cases someone sticks a comma-separate value in one of the values

[14:33:13.0000] <TabAtkins>
Hixie: Because the syntax of media is described by CSS, and it's easier to allow /**/ comments than to add a special mode to CSS parsing that disallows them.

[14:33:44.0000] <Hixie>
i thought it started as a standalone syntax

[14:36:27.0000] <TabAtkins>
Hixie: It did, yes, back when it was just a media type.

[14:36:34.0000] <TabAtkins>
Then we extended it to arbitrary MQs.

[14:37:18.0000] <SamB__>
TabAtkins: so you had to either use the CSS tokenizer or make a huge mess in implementations?

[14:37:25.0000] <TabAtkins>
Yeah.

[14:37:41.0000] <TabAtkins>
No sense writing a custom parser when one is sitting *right there*.

[14:45:34.0000] <Hixie>
TabAtkins: i mean mqs were originally just their own syntax

[14:45:41.0000] <Hixie>
/me remembers coming up with the "only" keyword

[14:45:59.0000] <Hixie>
i coulda sworn we hadn't defined it as accepting comments back then

[14:46:05.0000] <TabAtkins>
Oh, dunno about that.  If they were, it was before my time; they've been described in CSS terms as long as I've known them.

[14:46:07.0000] <Hixie>
so i'm surprised it ended up that comments were supported

[14:46:36.0000] <TabAtkins>
As in, described using the 2.1 grammar, which implicitly allows comments between any tokens.

[14:51:23.0000] <annevk>
Hixie: my fault

[14:51:41.0000] <annevk>
Hixie: the main issue being that for CSS parsing media queries was underdefined

[14:51:54.0000] <annevk>
Hixie: so we wondered whether we wanted two distinct parsers or just share the thing

[14:52:05.0000] <annevk>
Hixie: we ended up deciding to just share it

[14:57:38.0000] <Hixie>
annevk: i don't think it's a problem, i'm just surprised implementors did it

[14:58:16.0000] <TabAtkins>
You're surprised they were happy to delete code?

[14:58:28.0000] <Hixie>
i'm surprised they cared enough to look at the code

[14:58:41.0000] <TabAtkins>
There's always *someone* who cares enough. ^_^

[14:58:46.0000] <Hixie>
not in my experience :-)

[14:59:08.0000] <TabAtkins>
You just haven't found the right someone. Someday you'll meet your soulmate.


2014-08-31
[05:32:22.0000] <annevk>
hsivonen: btw, http://sideshowbarker.github.io/console-spec/ has significant FOUC for me

[09:41:14.0000] <gsnedders>
If I want to file a site compat bug on Firefox, should I be doing it on Bugzilla or on the Firefox Input site?

[09:41:27.0000] <annevk>
karlcow: ^^

[13:19:14.0000] <karlcow>
gsnedders: if mobile https://bugzilla.mozilla.org/form.mobile.compat

[13:19:15.0000] <karlcow>
if Desktop https://bugzilla.mozilla.org/enter_bug.cgi?product=Tech%20Evangelism&component=Desktop

[13:19:15.0000] <karlcow>
if multi-browsers, http://webcompat.com/

[13:19:45.0000] <karlcow>
annevk: thanks :)

[13:23:43.0000] <gsnedders>
karlcow: thx

