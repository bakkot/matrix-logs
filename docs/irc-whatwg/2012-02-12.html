<!doctype html>
<head>
  <title>#whatwg on 2012-02-12</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#whatwg<br>2012-02-12<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2012-02-11" class="nav-link"><span>prev</span></a>
<a href="2012-02-13" class="nav-link"><span style="float:right">next</span></a>
</div>
    
<div class="room-list-wrapper">Active:<br>
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/">WHATWG</a></li>
</ul>
</div>
<br>
<div class="room-list-wrapper">Historical:<br>
<ul class="room-list">
<li><a href="../irc-tc39/">#tc39</a></li>
<li><a href="../irc-tc39-delegates/">#tc39-delegates</a></li>
<li><a href="../irc-tc39-editor-group/">#tc39-editor-group</a></li>
<li><a href="../irc-whatwg/" class="current-room">#whatwg</a></li>
</ul>
</div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>
<input type="text" id="query" size=25 placeholder="Search #whatwg">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Sat Feb 11 2012 19:35:00 GMT-0800 (Pacific Standard Time)">03:35</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=zewt@irc>zewt</span>&gt;</td><td class="msg-cell">gah</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Sat Feb 11 2012 19:35:01 GMT-0800 (Pacific Standard Time)">03:35</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=zewt@irc>zewt</span>&gt;</td><td class="msg-cell">does amazon use sync xhr? heh</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Sat Feb 11 2012 19:36:00 GMT-0800 (Pacific Standard Time)">03:36</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=zewt@irc>zewt</span>&gt;</td><td class="msg-cell">tethering on my phone and having chrome freeze randomly searching on amazon</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Sat Feb 11 2012 21:49:00 GMT-0800 (Pacific Standard Time)">05:49</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=smartie2@irc>smartie2</span>&gt;</td><td class="msg-cell">&gt;&gt; &quot;check ecma&quot;</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Sun Feb 12 2012 03:51:00 GMT-0800 (Pacific Standard Time)">11:51</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">Taggnostr: I can&#039;t imagine that making a Python 3 port of tml5lib would take more than a day or two. Maybe &quot;make a Python 3 port and an API that acts a a drop-in replacement for HTMLParser&quot; would be more reasonable. Well I imagine that adding that would also be pretty trivial, but enabling the parser to work with a streaming API for minimal memory consumption would be a little harder. Still seems like it would be ~10 days work including learning all </td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Sun Feb 12 2012 03:52:00 GMT-0800 (Pacific Standard Time)">11:52</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=gsnedders@irc>gsnedders</span>&gt;</td><td class="msg-cell">(note that possibly for streaming you may have to buffer the whole document)</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Sun Feb 12 2012 03:52:01 GMT-0800 (Pacific Standard Time)">11:52</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=gsnedders@irc>gsnedders</span>&gt;</td><td class="msg-cell">(as nodes can be moved and inserted earlier in the tree)</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Sun Feb 12 2012 03:57:00 GMT-0800 (Pacific Standard Time)">11:57</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">Well looking at it, it seems that HTMLParser doesn&#039;t tell you where nodes were inserted</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Sun Feb 12 2012 04:00:00 GMT-0800 (Pacific Standard Time)">12:00</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">So the only thing that you need the treebuilder for is to handle things like &lt;script&gt;&lt;div&gt;&lt;/script&gt; and &lt;sircle/&gt;&lt;svg&gt;&lt;circle/&gt;</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Sun Feb 12 2012 04:00:01 GMT-0800 (Pacific Standard Time)">12:00</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">s/sircle/circle/</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Sun Feb 12 2012 04:02:00 GMT-0800 (Pacific Standard Time)">12:02</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">It is prety tempting to just hook into the tokenizer, ignore the treebuilder and say that it is an application-level concern to realise that if you just saw a &lt;script&gt;, a &lt;div&gt; tag is actually text</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Sun Feb 12 2012 04:05:00 GMT-0800 (Pacific Standard Time)">12:05</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=gsnedders@irc>gsnedders</span>&gt;</td><td class="msg-cell">jgraham: But the treebuilder changes tokenizer state.</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Sun Feb 12 2012 04:06:00 GMT-0800 (Pacific Standard Time)">12:06</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">gsnedders: I know</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Sun Feb 12 2012 04:06:01 GMT-0800 (Pacific Standard Time)">12:06</a></td><td class="nick-cell"><span class="nick nick-2" title=gsnedders@irc>gsnedders</span></td><td class="msg-cell">blames foreign content :(</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Sun Feb 12 2012 04:06:02 GMT-0800 (Pacific Standard Time)">12:06</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">But the existing implementation seems to be horribly broken</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Sun Feb 12 2012 04:06:03 GMT-0800 (Pacific Standard Time)">12:06</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">&lt;script&gt;&lt;div&gt; -&gt; 1 start tag</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Sun Feb 12 2012 04:06:04 GMT-0800 (Pacific Standard Time)">12:06</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">&lt;xmp&gt;&lt;div&gt; -&gt; 2 start tags</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Sun Feb 12 2012 04:08:00 GMT-0800 (Pacific Standard Time)">12:08</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">It seems quite possible to just find all the special cases that the existing implementation knows about, hardcode them in to the HTMLParser api, use that to change the tokenizer state, and accept that there are probably some corner cases where everything will break</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Sun Feb 12 2012 04:10:00 GMT-0800 (Pacific Standard Time)">12:10</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">So far the list of special cases seems to be &quot;script&quot;, &quot;style&quot;</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Sun Feb 12 2012 04:11:00 GMT-0800 (Pacific Standard Time)">12:11</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">In fact that is exactly the list of special cases</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Sun Feb 12 2012 04:12:00 GMT-0800 (Pacific Standard Time)">12:12</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=StoneCypher@irc>StoneCypher</span>&gt;</td><td class="msg-cell">those two tags can&#039;t contain markup</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Sun Feb 12 2012 04:12:01 GMT-0800 (Pacific Standard Time)">12:12</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=StoneCypher@irc>StoneCypher</span>&gt;</td><td class="msg-cell">so that&#039;s not actually broken</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Sun Feb 12 2012 04:12:02 GMT-0800 (Pacific Standard Time)">12:12</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=StoneCypher@irc>StoneCypher</span>&gt;</td><td class="msg-cell">that&#039;s correct</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Sun Feb 12 2012 04:12:03 GMT-0800 (Pacific Standard Time)">12:12</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=StoneCypher@irc>StoneCypher</span>&gt;</td><td class="msg-cell">there are others too</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Sun Feb 12 2012 04:12:04 GMT-0800 (Pacific Standard Time)">12:12</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=StoneCypher@irc>StoneCypher</span>&gt;</td><td class="msg-cell">&lt;object&gt;, &lt;embed&gt;</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Sun Feb 12 2012 04:12:05 GMT-0800 (Pacific Standard Time)">12:12</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=StoneCypher@irc>StoneCypher</span>&gt;</td><td class="msg-cell">et cetera</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Sun Feb 12 2012 04:12:06 GMT-0800 (Pacific Standard Time)">12:12</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=StoneCypher@irc>StoneCypher</span>&gt;</td><td class="msg-cell">anything that contains &lt;!cdata[[</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Sun Feb 12 2012 04:12:07 GMT-0800 (Pacific Standard Time)">12:12</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=StoneCypher@irc>StoneCypher</span>&gt;</td><td class="msg-cell">or whatever it is</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Sun Feb 12 2012 04:14:00 GMT-0800 (Pacific Standard Time)">12:14</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">StoneCypher: Right, script and style switching the tokenizer state is right. What&#039;s wrong is e.g. xmp *not* doing it</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Sun Feb 12 2012 04:14:01 GMT-0800 (Pacific Standard Time)">12:14</a></td><td class="nick-cell">&lt;<span class="nick nick-3" title=bga@irc>bga</span>&gt;</td><td class="msg-cell">oh somebody uses xml islands</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Sun Feb 12 2012 04:15:00 GMT-0800 (Pacific Standard Time)">12:15</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=StoneCypher@irc>StoneCypher</span>&gt;</td><td class="msg-cell">bga: not since like 2004</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Sun Feb 12 2012 04:15:01 GMT-0800 (Pacific Standard Time)">12:15</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=StoneCypher@irc>StoneCypher</span>&gt;</td><td class="msg-cell">bga: i mean, back in the dark ages, sure</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Sun Feb 12 2012 04:15:02 GMT-0800 (Pacific Standard Time)">12:15</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=StoneCypher@irc>StoneCypher</span>&gt;</td><td class="msg-cell">jgraham: ah.  (i don&#039;t actually know what xmp does_)</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Sun Feb 12 2012 04:16:00 GMT-0800 (Pacific Standard Time)">12:16</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=StoneCypher@irc>StoneCypher</span>&gt;</td><td class="msg-cell">jgraham: sorry if i misunderstood :)</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Sun Feb 12 2012 04:16:01 GMT-0800 (Pacific Standard Time)">12:16</a></td><td class="nick-cell">&lt;<span class="nick nick-3" title=bga@irc>bga</span>&gt;</td><td class="msg-cell">StoneCypher but <a href="https://developer.mozilla.org/en/Using_XML_Data_Islands_in_Mozilla">https://developer.mozilla.org/en/Using_XML_Data_Islands_in_Mozilla</a></td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Sun Feb 12 2012 04:23:00 GMT-0800 (Pacific Standard Time)">12:23</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=StoneCypher@irc>StoneCypher</span>&gt;</td><td class="msg-cell">wow.</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Sun Feb 12 2012 04:23:01 GMT-0800 (Pacific Standard Time)">12:23</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=StoneCypher@irc>StoneCypher</span>&gt;</td><td class="msg-cell">so xml islands are back-ish, as a legit standard now?</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Sun Feb 12 2012 04:24:00 GMT-0800 (Pacific Standard Time)">12:24</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=StoneCypher@irc>StoneCypher</span>&gt;</td><td class="msg-cell">eenteresting.</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Sun Feb 12 2012 04:24:01 GMT-0800 (Pacific Standard Time)">12:24</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=StoneCypher@irc>StoneCypher</span>&gt;</td><td class="msg-cell">i bet the microformats people adore this.</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Sun Feb 12 2012 04:59:00 GMT-0800 (Pacific Standard Time)">12:59</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">gsnedders, Taggnostr: Something like <a href="https://gist.github.com/1808356">https://gist.github.com/1808356</a></td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Sun Feb 12 2012 04:59:01 GMT-0800 (Pacific Standard Time)">12:59</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">Not production quality ofc, but more or less does the same as HTMLParser, but using the html5lib tokenizer</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Sun Feb 12 2012 05:07:00 GMT-0800 (Pacific Standard Time)">13:07</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">(the hard part would be making the incremental feeding work)</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Sun Feb 12 2012 14:03:00 GMT-0800 (Pacific Standard Time)">22:03</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=yuhong@irc>yuhong</span>&gt;</td><td class="msg-cell">BTW, it is interesting that Ian Hickson and Chris Wilson works at the same company now.</td></tr>

</tbody></table></div></div></div></body>
