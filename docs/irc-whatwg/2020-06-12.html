<!doctype html>
<head>
  <title>#whatwg on 2020-06-12</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#whatwg<br>2020-06-12<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2020-06-11" class="nav-link"><span>prev</span></a>
<a href="2020-06-14" class="nav-link"><span style="float:right">next</span></a>
</div>
    
<div class="room-list-wrapper">Active:<br>
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/">WHATWG</a></li>
</ul>
</div>
<br>
<div class="room-list-wrapper">Historical:<br>
<ul class="room-list">
<li><a href="../irc-tc39/">#tc39</a></li>
<li><a href="../irc-tc39-delegates/">#tc39-delegates</a></li>
<li><a href="../irc-tc39-editor-group/">#tc39-editor-group</a></li>
<li><a href="../irc-whatwg/" class="current-room">#whatwg</a></li>
</ul>
</div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>
<input type="text" id="query" size=25 placeholder="Search #whatwg">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Thu Jun 11 2020 17:04:32 GMT-0700 (Pacific Daylight Time)">00:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title=nbenner@irc>nbenner</span>&gt;</div></td><td class="msg-cell">ondras: I think the accepted way to do that is to check for side effects. If the script you&#039;re attempting to check defines an object (lets say foo) and you don&#039;t know if that file has loaded yet, check to see if foo exists on the page. if it does then the script is probably done executing, or at least has yielded control...</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Fri Jun 12 2020 00:27:24 GMT-0700 (Pacific Daylight Time)">07:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=ondras@irc>ondras</span>&gt;</div></td><td class="msg-cell">nbenner: ok thanks</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Fri Jun 12 2020 07:58:12 GMT-0700 (Pacific Daylight Time)">14:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</div></td><td class="msg-cell">What&#039;s an easy way to call fetch() and have the promise resolve to a response whose type is &quot;error&quot; (things like 404 / CORS failures don&#039;t give me what I want)</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Fri Jun 12 2020 08:22:19 GMT-0700 (Pacific Daylight Time)">15:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">domfarolino: fetch(&quot;bad-url:bad&quot;)</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Fri Jun 12 2020 08:23:28 GMT-0700 (Pacific Daylight Time)">15:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</div></td><td class="msg-cell">Domenic: That seems to just reject the promise though, instead of resolve with an error response right?</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Fri Jun 12 2020 08:23:39 GMT-0700 (Pacific Daylight Time)">15:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">domfarolino: network errors always reject the promise</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Fri Jun 12 2020 08:23:47 GMT-0700 (Pacific Daylight Time)">15:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</div></td><td class="msg-cell">I see, that&#039;s what I wasn&#039;t sure about</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Fri Jun 12 2020 08:23:51 GMT-0700 (Pacific Daylight Time)">15:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Gotcha</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Fri Jun 12 2020 08:24:00 GMT-0700 (Pacific Daylight Time)">15:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</div></td><td class="msg-cell">Domenic: OK so it&#039;s impossible to assert (request.type == error) in a fetch() then handler?</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Fri Jun 12 2020 08:24:07 GMT-0700 (Pacific Daylight Time)">15:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Yeah</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Fri Jun 12 2020 08:24:11 GMT-0700 (Pacific Daylight Time)">15:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</div></td><td class="msg-cell">Cool ty</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Fri Jun 12 2020 08:24:49 GMT-0700 (Pacific Daylight Time)">15:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">I guess type === error is only possible for manually-constructed responses</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Fri Jun 12 2020 08:24:50 GMT-0700 (Pacific Daylight Time)">15:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</div></td><td class="msg-cell">Ah, yeah &quot;If response is a network error, then reject p with a TypeError and terminate these substeps.&quot;</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Fri Jun 12 2020 08:24:56 GMT-0700 (Pacific Daylight Time)">15:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</div></td><td class="msg-cell">Domenic: right</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Fri Jun 12 2020 08:25:16 GMT-0700 (Pacific Daylight Time)">15:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</div></td><td class="msg-cell">Response.error() for example</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Fri Jun 12 2020 09:16:42 GMT-0700 (Pacific Daylight Time)">16:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">Anyone here familiar with Cross-Origin Opener Policy? I&#039;m having some trouble understanding a document from a Chromium dev <a href="https://docs.google.com/document/d/1zWqwI8PFrezwQpBSejIMUfdtsIYl9-h8epasdrDXVIM">https://docs.google.com/document/d/1zWqwI8PFrezwQpBSejIMUfdtsIYl9-h8epasdrDXVIM</a></td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Fri Jun 12 2020 09:39:18 GMT-0700 (Pacific Daylight Time)">16:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">annevk: double-check me... shared/service worker agents are not owned by anything in the spec? They&#039;re just allocated and kind of float freely?</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Fri Jun 12 2020 09:39:27 GMT-0700 (Pacific Daylight Time)">16:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">s/agents/agent clusters</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Fri Jun 12 2020 10:24:56 GMT-0700 (Pacific Daylight Time)">17:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Domenic: yeah, technically the user agent needs some kind of lookup table</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Fri Jun 12 2020 10:25:17 GMT-0700 (Pacific Daylight Time)">17:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Domenic: but they are directly owned by the user agent</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Fri Jun 12 2020 10:25:53 GMT-0700 (Pacific Daylight Time)">17:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">although their lifetime is impacted by &quot;related&quot; browsing sessions closing</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Fri Jun 12 2020 10:26:14 GMT-0700 (Pacific Daylight Time)">17:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">or documents/window agents I guess, not so much browsing sessions</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Fri Jun 12 2020 10:46:14 GMT-0700 (Pacific Daylight Time)">17:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">OK cool, that&#039;s about what I thought. I guess nailing that down would be a bit of a pain so leaving things as-is is OK.</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Fri Jun 12 2020 10:47:12 GMT-0700 (Pacific Daylight Time)">17:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Domenic: we have a lot of things today that&#039;ll make it easier to do once there&#039;s a stronger need</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Fri Jun 12 2020 10:48:13 GMT-0700 (Pacific Daylight Time)">17:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">I think the more problematic thing with workers is that we establish an environment before we fetch</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Fri Jun 12 2020 13:36:26 GMT-0700 (Pacific Daylight Time)">20:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">Domenic: I&#039;m a bit confused about the intention for SharedArrayBuffer and COOP/COEP</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Fri Jun 12 2020 13:37:28 GMT-0700 (Pacific Daylight Time)">20:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">I used to think SAB was to be exposed always but only allowed for transfer in crossOriginIsolated contexts</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Fri Jun 12 2020 13:37:34 GMT-0700 (Pacific Daylight Time)">20:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">Like here <a href="https://github.com/whatwg/html/pull/4734">https://github.com/whatwg/html/pull/4734</a></td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Fri Jun 12 2020 13:38:30 GMT-0700 (Pacific Daylight Time)">20:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">But I&#039;ve recently read things that suggest that SAB will simply not be available outside of crossOriginIsolated contexts</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Fri Jun 12 2020 13:38:47 GMT-0700 (Pacific Daylight Time)">20:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">like here <a href="https://web.dev/why-coop-coep/">https://web.dev/why-coop-coep/</a></td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Fri Jun 12 2020 13:42:43 GMT-0700 (Pacific Daylight Time)">20:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">That second source is more recent and matches Firefox&#039;s current behavior</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Fri Jun 12 2020 13:43:34 GMT-0700 (Pacific Daylight Time)">20:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">But work is proceeding on the first</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Fri Jun 12 2020 13:45:36 GMT-0700 (Pacific Daylight Time)">20:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">Ah</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Fri Jun 12 2020 13:45:48 GMT-0700 (Pacific Daylight Time)">20:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">&quot;SharedArrayBuffer objects are in principle always available, but unfortunately the constructor on the global object is hidden, unless the two headers mentioned above are set, for compatibility with web content. There is hope that this restriction can be removed in the future. WebAssembly.Memory can still be used to get an instance.&quot;</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Fri Jun 12 2020 13:46:12 GMT-0700 (Pacific Daylight Time)">20:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">via <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer/Planned_changes">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer/Planned_changes</a></td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Fri Jun 12 2020 13:48:51 GMT-0700 (Pacific Daylight Time)">20:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">So I guess the <a href="http://web.dev">web.dev</a> post is technically inaccurate, but explaining the distinction is unlikely to help anyone</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Fri Jun 12 2020 13:57:54 GMT-0700 (Pacific Daylight Time)">20:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Right, it kind of depends on whether you&#039;re talking about SharedArrayBuffer, or &quot;shared array buffers&quot;</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Fri Jun 12 2020 14:01:32 GMT-0700 (Pacific Daylight Time)">21:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">ah, yeah, that&#039;s subtle</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Fri Jun 12 2020 14:02:55 GMT-0700 (Pacific Daylight Time)">21:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">This one uses the term &quot;threaded SharedArrayBuffer&quot; <a href="https://docs.google.com/document/d/1zDlfvfTJ_9e8Jdc8ehuV4zMEu9ySMCiTGMS9y0GU92k/edit#">https://docs.google.com/document/d/1zDlfvfTJ_9e8Jdc8ehuV4zMEu9ySMCiTGMS9y0GU92k/edit#</a></td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Fri Jun 12 2020 14:04:32 GMT-0700 (Pacific Daylight Time)">21:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">&quot;SharedArrayBuffer sharing&quot; would likely raise some eyebrows</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Fri Jun 12 2020 14:07:27 GMT-0700 (Pacific Daylight Time)">21:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">Stage 0 proposal: &quot;Rename SharedArrayBuffer to PotentiallyShareableArrayBuffer&quot;</td></tr>

</tbody></table></div></div></div></body>
