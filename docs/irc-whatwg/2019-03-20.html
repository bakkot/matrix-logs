<!doctype html>
<head>
  <title>#whatwg on 2019-03-20</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#whatwg<br>2019-03-20<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2019-03-19" class="nav-link"><span>prev</span></a>
<a href="2019-03-21" class="nav-link"><span style="float:right">next</span></a>
</div>
    
<div class="room-list-wrapper">Active:<br>
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/">WHATWG</a></li>
</ul>
</div>
<br>
<div class="room-list-wrapper">Historical:<br>
<ul class="room-list">
<li><a href="../irc-tc39/">#tc39</a></li>
<li><a href="../irc-tc39-delegates/">#tc39-delegates</a></li>
<li><a href="../irc-tc39-editor-group/">#tc39-editor-group</a></li>
<li><a href="../irc-whatwg/" class="current-room">#whatwg</a></li>
</ul>
</div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>
<input type="text" id="query" size=25 placeholder="Search #whatwg">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed Mar 20 2019 05:23:26 GMT-0700 (Pacific Daylight Time)">12:23</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: Catching up on the CSP thing. I&#039;m not sure I understand the problem. When you make a request from a page, the CSP is checked before the request goes to the service worker, but the response is also checked against the original request. The destination is taken from the original request, so service worker can&#039;t tamper with it</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Mar 20 2019 05:31:00 GMT-0700 (Pacific Daylight Time)">12:31</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: the concern is about routing something into a cache</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed Mar 20 2019 05:47:49 GMT-0700 (Pacific Daylight Time)">12:47</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: I can&#039;t figure out the attack. &lt;img&gt; -&gt; service worker -&gt; fetch() -&gt; cacheâ€¦ but if a response is later pulled from the cache it&#039;ll still be CSP checked</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Mar 20 2019 05:49:38 GMT-0700 (Pacific Daylight Time)">12:49</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: so in that setup the fetch() uses SW&#039;s CSP</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Mar 20 2019 05:50:13 GMT-0700 (Pacific Daylight Time)">12:50</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: but would it still consult that SW&#039;s CSP if it uses routing to bypass invoking the SW?</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Mar 20 2019 05:50:56 GMT-0700 (Pacific Daylight Time)">12:50</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: I think I managed to convince myself that using the document&#039;s CSP is sufficient, since both the document and the SW can pollute the cache, but it&#039;s still a little surprising</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Mar 20 2019 05:51:07 GMT-0700 (Pacific Daylight Time)">12:51</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: the referrer would also be different and there might be other subtle things going on too</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed Mar 20 2019 05:51:35 GMT-0700 (Pacific Daylight Time)">12:51</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: perhaps routing isn&#039;t a thing yet though, I don&#039;t really know the state of things</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed Mar 20 2019 05:52:42 GMT-0700 (Pacific Daylight Time)">12:52</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: as in the static routes proposal? That&#039;s a good question. Using the service worker&#039;s CSP would make things more consistent, especially with static route polyfills, but I like the idea of just using the document&#039;s CSP since it&#039;s all behind the scenes anyway. But yeah, it isn&#039;t enough of a thing yet to worry too much about</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed Mar 20 2019 05:54:12 GMT-0700 (Pacific Daylight Time)">12:54</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: okay</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed Mar 20 2019 05:54:38 GMT-0700 (Pacific Daylight Time)">12:54</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">thanks</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed Mar 20 2019 06:08:55 GMT-0700 (Pacific Daylight Time)">13:08</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">annevk: I&#039;m wondering what&#039;s the best path forward for CH and a `Sec-` prefix, which we discussed in <a href="https://github.com/whatwg/fetch/pull/880">https://github.com/whatwg/fetch/pull/880</a></td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed Mar 20 2019 06:31:55 GMT-0700 (Pacific Daylight Time)">13:31</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">yoav: I&#039;m not sure, I kinda wonder what media elements do for Range when crossorigin is set</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Wed Mar 20 2019 06:32:14 GMT-0700 (Pacific Daylight Time)">13:32</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">yoav: JakeA might be onto something that following Range is the way to go, but what Range does is not fully clear</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed Mar 20 2019 06:33:05 GMT-0700 (Pacific Daylight Time)">13:33</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">They would trigger a preflight right?</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed Mar 20 2019 06:33:53 GMT-0700 (Pacific Daylight Time)">13:33</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: my suspicion is that browsers don&#039;t</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Wed Mar 20 2019 06:34:14 GMT-0700 (Pacific Daylight Time)">13:34</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: and that the treat Range as privileged because they initiated the range request</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Wed Mar 20 2019 06:34:29 GMT-0700 (Pacific Daylight Time)">13:34</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: similar to EventSource&#039;s Last-Event-ID</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Wed Mar 20 2019 06:34:36 GMT-0700 (Pacific Daylight Time)">13:34</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: Interesting. I think Chrome does if it goes via a service worker, so I guess that needs fixing somehow.</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Wed Mar 20 2019 06:37:24 GMT-0700 (Pacific Daylight Time)">13:37</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">JakeA: can you expand on what you had in mind? Do we want to add specific CH headers as privileged? All `Sec-` prefixed headers as privileged?</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Wed Mar 20 2019 06:37:56 GMT-0700 (Pacific Daylight Time)">13:37</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">And if they are privileged, does that mean that SW can copy them from the incoming Request without breaking them?</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Wed Mar 20 2019 06:38:23 GMT-0700 (Pacific Daylight Time)">13:38</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">s/copy them/forward the incoming request to fetch()/</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Wed Mar 20 2019 06:43:50 GMT-0700 (Pacific Daylight Time)">13:43</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Domenic: <a href="https://github.com/whatwg/html/issues/4400#issuecomment-474827602">https://github.com/whatwg/html/issues/4400#issuecomment-474827602</a> what if the network hangs for multiple seconds after the first &lt;/script&gt;?</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Wed Mar 20 2019 06:44:10 GMT-0700 (Pacific Daylight Time)">13:44</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Domenic: seems that would result in multiple tasks from the parser to manipulate the tree</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Wed Mar 20 2019 06:44:36 GMT-0700 (Pacific Daylight Time)">13:44</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">annevk: not as currently specced for HTML modules, but, maybe that&#039;s thing to raise with the MS folks about their spec?</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Wed Mar 20 2019 06:44:49 GMT-0700 (Pacific Daylight Time)">13:44</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Domenic: ooh, inside an HTML module</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Wed Mar 20 2019 06:45:01 GMT-0700 (Pacific Daylight Time)">13:45</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Domenic: my bad</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Wed Mar 20 2019 06:45:10 GMT-0700 (Pacific Daylight Time)">13:45</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Domenic: no that seems like the right semantics for HTML modules</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Wed Mar 20 2019 06:51:23 GMT-0700 (Pacific Daylight Time)">13:51</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">yoav: Is the intent that `Sec-` headers should pass through a service worker as long as the request isn&#039;t modified? And `Sec-` headers shouldn&#039;t trigger a preflight unless it was manually set by the developer (or is this forbidden?)</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Wed Mar 20 2019 06:51:43 GMT-0700 (Pacific Daylight Time)">13:51</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">they are forbidden</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Wed Mar 20 2019 06:51:50 GMT-0700 (Pacific Daylight Time)">13:51</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Is the rest correct?</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Wed Mar 20 2019 06:52:08 GMT-0700 (Pacific Daylight Time)">13:52</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">yes, I want `Sec-` headers to be able to pass through</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Wed Mar 20 2019 06:52:28 GMT-0700 (Pacific Daylight Time)">13:52</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">or alternatively, add CH sec headers both before and after SW</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Wed Mar 20 2019 06:53:05 GMT-0700 (Pacific Daylight Time)">13:53</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">the latter might be better, as it&#039;ll add CH headers also when the request was changed</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Wed Mar 20 2019 06:53:34 GMT-0700 (Pacific Daylight Time)">13:53</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">basically, SW needs to be able to observe those headers, but not modify or add them</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Wed Mar 20 2019 06:54:55 GMT-0700 (Pacific Daylight Time)">13:54</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">yoav: That&#039;s kinda how `Range` works, except `Range` will trigger a preflight for cors requests (but I think this is a bug), and `Range` can be set by the developer (in which case it should trigger a preflight)</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Wed Mar 20 2019 06:55:36 GMT-0700 (Pacific Daylight Time)">13:55</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">But the mechanism that allows `Range` to exist unless the request is modified seems useful for `Sec-`</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Wed Mar 20 2019 06:58:39 GMT-0700 (Pacific Daylight Time)">13:58</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">Can Range headers survive if the request was modified?</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Wed Mar 20 2019 06:59:38 GMT-0700 (Pacific Daylight Time)">13:59</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">JakeA: I think that would be desirable for CH headers, but not sure how to achieve that. Maybe we should keep a copy of all `Sec-` headers before SW is called and then restore them afterwards?</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Wed Mar 20 2019 07:05:51 GMT-0700 (Pacific Daylight Time)">14:05</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">yoav: &quot;Can Range headers survive if the request was modified?&quot; no</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Wed Mar 20 2019 07:07:07 GMT-0700 (Pacific Daylight Time)">14:07</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">yoav: <a href="https://github.com/web-platform-tests/wpt/blob/master/fetch/range/general.any.js">https://github.com/web-platform-tests/wpt/blob/master/fetch/range/general.any.js</a></td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Wed Mar 20 2019 07:08:27 GMT-0700 (Pacific Daylight Time)">14:08</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">yoav: what do you want to happen to the `sec-` headers if the request is modified? Remove them, or set them to some kind of default?</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Wed Mar 20 2019 07:10:04 GMT-0700 (Pacific Daylight Time)">14:10</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">I want to set them back to what they were</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Wed Mar 20 2019 07:10:35 GMT-0700 (Pacific Daylight Time)">14:10</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">What&#039;s the difference between that and doing nothing?</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Wed Mar 20 2019 07:10:46 GMT-0700 (Pacific Daylight Time)">14:10</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">(given that developers can&#039;t set them anyway)</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Wed Mar 20 2019 07:11:12 GMT-0700 (Pacific Daylight Time)">14:11</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">Let&#039;s consider `Sec-DPR: 2`. I want to set it before SW (so that SW can observe it and maybe change its response accordingly), but want to make sure it is added to requests going to the server, even if the request was modified</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Wed Mar 20 2019 07:11:43 GMT-0700 (Pacific Daylight Time)">14:11</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Why do you need to add something that&#039;s already there?</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Wed Mar 20 2019 07:11:44 GMT-0700 (Pacific Daylight Time)">14:11</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">and I want that value to not be modifiable by the developer</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Wed Mar 20 2019 07:12:20 GMT-0700 (Pacific Daylight Time)">14:12</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">If `Sec-` headers gets blown off when the developer modifies the request, I want to reinstate them</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Wed Mar 20 2019 07:12:34 GMT-0700 (Pacific Daylight Time)">14:12</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">if they are there, no need to add them again, obviously</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Wed Mar 20 2019 07:12:54 GMT-0700 (Pacific Daylight Time)">14:12</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">just don&#039;t blow them off then?</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Wed Mar 20 2019 07:13:01 GMT-0700 (Pacific Daylight Time)">14:13</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">ew, phrasing</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Wed Mar 20 2019 07:13:54 GMT-0700 (Pacific Daylight Time)">14:13</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">I think I&#039;m missing something. If you don&#039;t want the headers to be removed, instead of removing them and re-adding them, just don&#039;t remove them, right?</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Wed Mar 20 2019 07:14:45 GMT-0700 (Pacific Daylight Time)">14:14</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">Maybe I&#039;m missing something. When a SW gets a Request object in its fetch event, is it immutable? Or can they change it?</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Wed Mar 20 2019 07:15:48 GMT-0700 (Pacific Daylight Time)">14:15</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">It&#039;s immutable, but once you do `const request = new Request(event.request)` then `request.headers` are mutable</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Wed Mar 20 2019 07:16:32 GMT-0700 (Pacific Daylight Time)">14:16</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">oh, so devs will be able to change those request headers without killing any forbidden headers which were present in the original request?</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Wed Mar 20 2019 07:16:43 GMT-0700 (Pacific Daylight Time)">14:16</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">that&#039;d work</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Wed Mar 20 2019 07:17:29 GMT-0700 (Pacific Daylight Time)">14:17</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Yeah. That&#039;s different to how `Range` works btw. `Range` headers are removed as soon as the developer modifies the headers.</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Wed Mar 20 2019 07:17:45 GMT-0700 (Pacific Daylight Time)">14:17</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">But it seems like `Sec-` needs to work differently</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Wed Mar 20 2019 07:34:12 GMT-0700 (Pacific Daylight Time)">14:34</a></td><td class="nick-cell">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</td><td class="msg-cell">JakeA: Thanks! I&#039;ll take a look and come up with a Range-inspired proposal</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Wed Mar 20 2019 07:49:17 GMT-0700 (Pacific Daylight Time)">14:49</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Domenic: want to do a final pass and land <a href="https://github.com/whatwg/html/pull/4360">https://github.com/whatwg/html/pull/4360</a>?</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Wed Mar 20 2019 07:49:22 GMT-0700 (Pacific Daylight Time)">14:49</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Domenic: I gotta go soon</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Wed Mar 20 2019 08:28:25 GMT-0700 (Pacific Daylight Time)">15:28</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">Can do</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Wed Mar 20 2019 09:52:53 GMT-0700 (Pacific Daylight Time)">16:52</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Domenic: never mind, Maciej spotted a mistake</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Wed Mar 20 2019 10:26:35 GMT-0700 (Pacific Daylight Time)">17:26</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Domenic: playsinline was added in June 2016, FWIW</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Wed Mar 20 2019 10:29:00 GMT-0700 (Pacific Daylight Time)">17:29</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">Ah wow OK</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Wed Mar 20 2019 14:07:28 GMT-0700 (Pacific Daylight Time)">21:07</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">I can look into when the checkpoint flag got added I suppose</td></tr>

</tbody></table></div></div></div></body>
