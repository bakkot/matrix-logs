<!doctype html>
<head>
  <title>#whatwg on 2019-01-03</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#whatwg<br>2019-01-03<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2019-01-02" class="nav-link"><span>prev</span></a>
<a href="2019-01-04" class="nav-link"><span style="float:right">next</span></a>
</div>
    
<div class="room-list-wrapper">Active:<br>
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/">WHATWG</a></li>
</ul>
</div>
<br>
<div class="room-list-wrapper">Historical:<br>
<ul class="room-list">
<li><a href="../irc-tc39/">#tc39</a></li>
<li><a href="../irc-tc39-delegates/">#tc39-delegates</a></li>
<li><a href="../irc-tc39-editor-group/">#tc39-editor-group</a></li>
<li><a href="../irc-whatwg/" class="current-room">#whatwg</a></li>
</ul>
</div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>
<input type="text" id="query" size=25 placeholder="Search #whatwg">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Thu Jan 03 2019 08:02:05 GMT-0800 (Pacific Standard Time)">16:02</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">domfarolino: FWIW, <a href="https://github.com/whatwg/html/pull/4048#issuecomment-451187554">https://github.com/whatwg/html/pull/4048#issuecomment-451187554</a> sounds good, I was just wondering how it was all fitting together</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Thu Jan 03 2019 08:02:13 GMT-0800 (Pacific Standard Time)">16:02</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">domfarolino: the more specific pieces look good though</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Thu Jan 03 2019 08:03:20 GMT-0800 (Pacific Standard Time)">16:03</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">annevk: Cool, thanks for checking it out. Yeah, the &quot;fitting together&quot; pieces are sort of in limbo currently</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Thu Jan 03 2019 12:25:56 GMT-0800 (Pacific Standard Time)">20:25</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">Domenic: WRT a &quot;script-blocking style sheet&quot; counter on Documents for #4031, it occurred to me that when a sheet is loaded, we cannot just decrement the counter, because the decremeter needs to know whether or not the conditions to increment the counter when the loading began, were once met (i.e., a &quot;blocking&quot; ss was loaded).</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Thu Jan 03 2019 12:28:19 GMT-0800 (Pacific Standard Time)">20:28</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">I&#039;m wondering if we should make the conditions under <a href="https://html.spec.whatwg.org/multipage/semantics.html#a-style-sheet-that-is-blocking-scripts">https://html.spec.whatwg.org/multipage/semantics.html#a-style-sheet-that-is-blocking-scripts</a> something callable, so we can increment and decrement explicitly. Let me know what you think of this sketch: <a href="https://gist.github.com/domfarolino/3fa29b31800e2203c8ce12b22cf8eba9">https://gist.github.com/domfarolino/3fa29b31800e2203c8ce12b22cf8eba9</a></td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Thu Jan 03 2019 12:29:03 GMT-0800 (Pacific Standard Time)">20:29</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">domfarolino: what about having a set, instead of just a counter? Then removing (if it&#039;s not present) is a no-op</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Thu Jan 03 2019 12:29:28 GMT-0800 (Pacific Standard Time)">20:29</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">Your version seems good to though at first glance, reading in more detail now...</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Thu Jan 03 2019 12:30:29 GMT-0800 (Pacific Standard Time)">20:30</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">I don&#039;t know how my counter version^ integrates with XML style sheets at all though, since it seems their processing would have to explicitly try and increment said counter, which it does not do currently.</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Thu Jan 03 2019 12:31:32 GMT-0800 (Pacific Standard Time)">20:31</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">RE a set, I was thinking about something similar, however we can&#039;t have a set of style sheets, because as per spec, the style sheet isn&#039;t &quot;Created&quot; (and added simultaneously) until it is finished loading, and we want scripting to be blocked before then. That brought be back to the counter idea</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Thu Jan 03 2019 12:32:12 GMT-0800 (Pacific Standard Time)">20:32</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">Set of elements?</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Thu Jan 03 2019 12:32:36 GMT-0800 (Pacific Standard Time)">20:32</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">(Refreshing myself on what XML stylesheets do :-/)</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Thu Jan 03 2019 12:33:45 GMT-0800 (Pacific Standard Time)">20:33</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">Oh duh, set of elements might be nice.</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Thu Jan 03 2019 12:34:09 GMT-0800 (Pacific Standard Time)">20:34</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">Or a set of &quot;things&quot; if we need to handle XML stylesheets/Link headers...</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Thu Jan 03 2019 12:34:21 GMT-0800 (Pacific Standard Time)">20:34</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">It does seem like we&#039;ll need to have something hand-wavey for those two</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Thu Jan 03 2019 12:34:25 GMT-0800 (Pacific Standard Time)">20:34</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">Yeah I started thinking about how to handle Linke headers in the future too</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Thu Jan 03 2019 12:34:39 GMT-0800 (Pacific Standard Time)">20:34</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">I&#039;m just concerned about not regressing the current vague text into precise but incorrect text</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Thu Jan 03 2019 12:34:51 GMT-0800 (Pacific Standard Time)">20:34</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">So I think we want to have precise for link + style, plus vague for Link + XMLSS</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Thu Jan 03 2019 12:35:30 GMT-0800 (Pacific Standard Time)">20:35</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">So either the counter or set versions, plus a sentence that says like &quot;when you see an XMLSS or Link header, increment the counter/add to the set; when X happens, decrement/remove from the set&quot;</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Thu Jan 03 2019 12:37:42 GMT-0800 (Pacific Standard Time)">20:37</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">Medium-term we should investigate whether browsers actually allow Link or XMLSS style sheets to block script</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Thu Jan 03 2019 12:37:54 GMT-0800 (Pacific Standard Time)">20:37</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">That makes sense, I can add that to the interactions of styling and scripting section</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Thu Jan 03 2019 12:37:55 GMT-0800 (Pacific Standard Time)">20:37</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">But right now I&#039;m just aiming for minimum work to maintain current text&#039;s normative requirements</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Thu Jan 03 2019 12:38:42 GMT-0800 (Pacific Standard Time)">20:38</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">SGTM</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Thu Jan 03 2019 12:38:43 GMT-0800 (Pacific Standard Time)">20:38</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">(although as you note the current requirements are pretty iffy, e.g. &quot;the element&quot; is often referenced but that doesn&#039;t make sense for Link headers)</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Thu Jan 03 2019 12:41:02 GMT-0800 (Pacific Standard Time)">20:41</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">Maybe longer-term we&#039;d want &quot;contributes a script-blocking style sheet&quot; to be called not with an element, but with some abstract &quot;Link properties&quot; obj is produced by `Link` headers, `&lt;style&gt;`, and `&lt;link&gt;` elements. Not sure yet though</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Thu Jan 03 2019 12:42:34 GMT-0800 (Pacific Standard Time)">20:42</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">But yeah for now I can go with a counter or set approach and add a sentence to sort of hand-wave over XMLSS+Headers interacting with said construct</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Thu Jan 03 2019 12:42:37 GMT-0800 (Pacific Standard Time)">20:42</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">My hope is that nobody bothered to implement blocking for XMLSSs and Link headers...</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Thu Jan 03 2019 12:42:51 GMT-0800 (Pacific Standard Time)">20:42</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">That would be nice</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Thu Jan 03 2019 12:43:08 GMT-0800 (Pacific Standard Time)">20:43</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">Will check</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Thu Jan 03 2019 12:44:50 GMT-0800 (Pacific Standard Time)">20:44</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">We could just put those into the set no? No need to make it a set of elements per se</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Thu Jan 03 2019 12:47:21 GMT-0800 (Pacific Standard Time)">20:47</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">annevk: Could you elaborate what &quot;those&quot; is?</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Thu Jan 03 2019 12:47:47 GMT-0800 (Pacific Standard Time)">20:47</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">domfarolino: Link header and PI node</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Thu Jan 03 2019 12:54:10 GMT-0800 (Pacific Standard Time)">20:54</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">Ok, can we insert the XSLT PI nodes in via HTML spec, or would updating the XSLT spec be necessary if that’s even an option</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Thu Jan 03 2019 14:11:39 GMT-0800 (Pacific Standard Time)">22:11</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">Domenic: FWIW it appears that xml style sheets and link headers support blocking styles</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Thu Jan 03 2019 14:27:04 GMT-0800 (Pacific Standard Time)">22:27</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">:(</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Thu Jan 03 2019 14:44:21 GMT-0800 (Pacific Standard Time)">22:44</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">Oddly enough Chrome won&#039;t even fetch a style sheet that appears as a `Link` header unless it is rel=preload</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Thu Jan 03 2019 14:44:51 GMT-0800 (Pacific Standard Time)">22:44</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">I guess Safari too: <a href="https://crbug.com/19237">https://crbug.com/19237</a> + <a href="https://bugs.webkit.org/show_bug.cgi?id=20018">https://bugs.webkit.org/show_bug.cgi?id=20018</a></td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Thu Jan 03 2019 14:54:43 GMT-0800 (Pacific Standard Time)">22:54</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">Ah right, I forgot that that feature was only on Firefox</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Thu Jan 03 2019 14:54:55 GMT-0800 (Pacific Standard Time)">22:54</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">I think it was annevk who uses that to make their page&#039;s CSS/JS files look pretty</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Thu Jan 03 2019 14:54:59 GMT-0800 (Pacific Standard Time)">22:54</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">Or something like that</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Thu Jan 03 2019 14:56:02 GMT-0800 (Pacific Standard Time)">22:56</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">(Cannot reproduce, but I swear I saw it at one time.)</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Thu Jan 03 2019 14:56:12 GMT-0800 (Pacific Standard Time)">22:56</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">(Also <a href="https://annevankesteren.nl/js/global">https://annevankesteren.nl/js/global</a> is a funny file)</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Thu Jan 03 2019 14:59:41 GMT-0800 (Pacific Standard Time)">22:59</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=domfarolino@irc>domfarolino</span>&gt;</td><td class="msg-cell">Lol</td></tr>

</tbody></table></div></div></div></body>
