<!doctype html>
<head>
  <title>#whatwg on 2015-01-20</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#whatwg<br>2015-01-20<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2015-01-19" class="nav-link"><span>prev</span></a>
<a href="2015-01-21" class="nav-link"><span style="float:right">next</span></a>
</div>
    
<div class="room-list-wrapper">Active:<br>
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/">WHATWG</a></li>
</ul>
</div>
<br>
<div class="room-list-wrapper">Historical:<br>
<ul class="room-list">
<li><a href="../irc-tc39/">#tc39</a></li>
<li><a href="../irc-tc39-delegates/">#tc39-delegates</a></li>
<li><a href="../irc-tc39-editor-group/">#tc39-editor-group</a></li>
<li><a href="../irc-whatwg/" class="current-room">#whatwg</a></li>
</ul>
</div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs"><div class="log">
<table><tbody id="log-tbody">
  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Jan 20 2015 02:36:38 GMT-0800 (Pacific Standard Time)">10:36</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">I don&#039;t really understand jQuery</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Jan 20 2015 02:36:42 GMT-0800 (Pacific Standard Time)">10:36</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">$(&quot;div&quot;).replaceWith([$(&quot;div&quot;), &quot;&lt;b&gt;test&lt;/b&gt;&quot;])</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Jan 20 2015 02:37:01 GMT-0800 (Pacific Standard Time)">10:37</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Gives you &quot;&lt;b&gt;test&lt;/b&gt;&quot;, loses the &lt;div&gt; somehow...</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue Jan 20 2015 02:37:14 GMT-0800 (Pacific Standard Time)">10:37</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell">window.$ = do_what_i_mean</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Tue Jan 20 2015 02:37:24 GMT-0800 (Pacific Standard Time)">10:37</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">If you remove &#039;, &quot;&lt;b&gt;test&lt;/b&gt;&quot;&#039; however, the &lt;div&gt; stays...</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Tue Jan 20 2015 02:37:45 GMT-0800 (Pacific Standard Time)">10:37</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Ms2ger: any ideas how to reply to that oldNode.replaceWith() edge case thread?</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Tue Jan 20 2015 02:38:46 GMT-0800 (Pacific Standard Time)">10:38</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell">I&#039;ve ignored it</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Tue Jan 20 2015 02:39:47 GMT-0800 (Pacific Standard Time)">10:39</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Ms2ger: that&#039;s not a great way to deal with feedback</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Tue Jan 20 2015 02:40:01 GMT-0800 (Pacific Standard Time)">10:40</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Ms2ger: also, I think those algorithms might in fact have some issues</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Tue Jan 20 2015 02:40:04 GMT-0800 (Pacific Standard Time)">10:40</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell">That&#039;s your job :)</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Tue Jan 20 2015 03:13:43 GMT-0800 (Pacific Standard Time)">11:13</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=zcorpan@irc>zcorpan</span>&gt;</td><td class="msg-cell">annevk: seems like a bug to remove the div there</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Tue Jan 20 2015 03:22:04 GMT-0800 (Pacific Standard Time)">11:22</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">Anyone know if the reftest.list files in CSS are actually correct?</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Tue Jan 20 2015 03:28:03 GMT-0800 (Pacific Standard Time)">11:28</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">Oh, they seem to be generated so I&#039;ll assume they are</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Tue Jan 20 2015 03:47:39 GMT-0800 (Pacific Standard Time)">11:47</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=GuidoBouman@irc>GuidoBouman</span>&gt;</td><td class="msg-cell">Are Flexbox questions allowed here as well? ^_^</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Tue Jan 20 2015 03:48:41 GMT-0800 (Pacific Standard Time)">11:48</a></td><td class="nick-cell">&lt;<span class="nick nick-3" title=SimonSapin@irc>SimonSapin</span>&gt;</td><td class="msg-cell">jgraham: correct how?</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Tue Jan 20 2015 03:58:59 GMT-0800 (Pacific Standard Time)">11:58</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">zcorpan_: should after() / before() / replaceWith() all work the same if you pass in the context object?</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Tue Jan 20 2015 03:59:34 GMT-0800 (Pacific Standard Time)">11:59</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">zcorpan_: suggestions welcome in that thread</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Tue Jan 20 2015 04:04:19 GMT-0800 (Pacific Standard Time)">12:04</a></td><td class="nick-cell">&lt;<span class="nick nick-15" title=zcorpan_@irc>zcorpan_</span>&gt;</td><td class="msg-cell">annevk: i think jquery ignores the context node when it appears in an array for after/before/replaceWith</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Tue Jan 20 2015 04:05:38 GMT-0800 (Pacific Standard Time)">12:05</a></td><td class="nick-cell">&lt;<span class="nick nick-15" title=zcorpan_@irc>zcorpan_</span>&gt;</td><td class="msg-cell"><a href="http://jsbin.com/cunejumepo/1/edit">http://jsbin.com/cunejumepo/1/edit</a></td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Tue Jan 20 2015 04:07:41 GMT-0800 (Pacific Standard Time)">12:07</a></td><td class="nick-cell">&lt;<span class="nick nick-15" title=zcorpan_@irc>zcorpan_</span>&gt;</td><td class="msg-cell">what is more valuable, consistency with insertBefore etc, or with jQuery, being easier to debug mistakes, addressing more use cases?</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Tue Jan 20 2015 04:24:08 GMT-0800 (Pacific Standard Time)">12:24</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">SimonSapin: Correct in the sense of &quot;not incorrect&quot; :)</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Tue Jan 20 2015 04:24:31 GMT-0800 (Pacific Standard Time)">12:24</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">e.g. if they were hand-written files that didn&#039;t get updated regularly</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Tue Jan 20 2015 04:24:50 GMT-0800 (Pacific Standard Time)">12:24</a></td><td class="nick-cell">&lt;<span class="nick nick-3" title=SimonSapin@irc>SimonSapin</span>&gt;</td><td class="msg-cell">I donâ€™t know</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Tue Jan 20 2015 04:25:36 GMT-0800 (Pacific Standard Time)">12:25</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">OK</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Tue Jan 20 2015 04:25:48 GMT-0800 (Pacific Standard Time)">12:25</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">zcorpan: speed and simplicity were some of the original requirements</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Tue Jan 20 2015 04:28:05 GMT-0800 (Pacific Standard Time)">12:28</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=zcorpan@irc>zcorpan</span>&gt;</td><td class="msg-cell">annevk: ok. i think i&#039;m the wrong person to have an opinion on what is better here</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Tue Jan 20 2015 04:59:13 GMT-0800 (Pacific Standard Time)">12:59</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: I&#039;m having to duplicate the about:blank handling from <a href="https://html.spec.whatwg.org/multipage/browsers.html#dom-open">https://html.spec.whatwg.org/multipage/browsers.html#dom-open</a> for cliens.openWindow() - is it appropiate to file a bug with the HTML spec asking for this to be abstracted?</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Tue Jan 20 2015 05:00:10 GMT-0800 (Pacific Standard Time)">13:00</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: yeah, make it clear what you need though</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Tue Jan 20 2015 05:00:21 GMT-0800 (Pacific Standard Time)">13:00</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">shall do</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Tue Jan 20 2015 05:00:24 GMT-0800 (Pacific Standard Time)">13:00</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">cheers!</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Tue Jan 20 2015 05:42:46 GMT-0800 (Pacific Standard Time)">13:42</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: did you see the bug I copied you on?</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Tue Jan 20 2015 05:43:07 GMT-0800 (Pacific Standard Time)">13:43</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: I can&#039;t really figure out how to make service workers not observable...</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Tue Jan 20 2015 05:43:28 GMT-0800 (Pacific Standard Time)">13:43</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: even ev.default() will have some effect (though it&#039;s unclear what that should be)</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Tue Jan 20 2015 05:44:21 GMT-0800 (Pacific Standard Time)">13:44</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: which bug sorry?</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Tue Jan 20 2015 05:46:57 GMT-0800 (Pacific Standard Time)">13:46</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=27524">https://www.w3.org/Bugs/Public/show_bug.cgi?id=27524</a></td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Tue Jan 20 2015 05:47:28 GMT-0800 (Pacific Standard Time)">13:47</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">ta</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Tue Jan 20 2015 05:53:20 GMT-0800 (Pacific Standard Time)">13:53</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">JakeA: annevk: if a document does a network request, triggers a SW fetch event, SW starts a different fetch() or cache.add().... and then the original document navigates away before the SW network requests finish... should those requests triggered from the SW fetch event be canceled or completed?</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Tue Jan 20 2015 05:54:07 GMT-0800 (Pacific Standard Time)">13:54</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">wanderview: I&#039;m not sure what should happen to the FetchEvent instance, but the fetch() and cache.add() should succeed I would think</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Tue Jan 20 2015 05:54:20 GMT-0800 (Pacific Standard Time)">13:54</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">wanderview: we don&#039;t want to have to traverse the calling stack</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Tue Jan 20 2015 05:55:08 GMT-0800 (Pacific Standard Time)">13:55</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">annevk: well, in gecko we have the concept of a &quot;load group&quot;... if we share the load group with the document, then they will get canceled... don&#039;t think we need to &quot;traverse the calling stack&quot;, but maybe I don&#039;t understand what you mean</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Tue Jan 20 2015 05:55:30 GMT-0800 (Pacific Standard Time)">13:55</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">right now we don&#039;t share the document load group directly with the service worker, though</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Tue Jan 20 2015 05:55:42 GMT-0800 (Pacific Standard Time)">13:55</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">annevk: sorry, forgot to CC you on this bug:  <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1122917">https://bugzilla.mozilla.org/show_bug.cgi?id=1122917</a></td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Tue Jan 20 2015 05:55:58 GMT-0800 (Pacific Standard Time)">13:55</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: wanderview: I took a stab at this over in <a href="https://github.com/slightlyoff/ServiceWorker/issues/592#issuecomment-68853209">https://github.com/slightlyoff/ServiceWorker/issues/592#issuecomment-68853209</a></td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Tue Jan 20 2015 05:58:10 GMT-0800 (Pacific Standard Time)">13:58</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">JakeA: I think that works... basically don&#039;t cancel the network request, but abort any resulting stream</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Tue Jan 20 2015 05:58:30 GMT-0800 (Pacific Standard Time)">13:58</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">JakeA: and sorry... I read the later comments there, but somehow missed your comment</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Tue Jan 20 2015 05:59:12 GMT-0800 (Pacific Standard Time)">13:59</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">wanderview: No worries! My comment was just a guess, but we don&#039;t really know if the request was associated with the fetch event until that point</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Tue Jan 20 2015 05:59:50 GMT-0800 (Pacific Standard Time)">13:59</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">wanderview: I don&#039;t like this &quot;load group&quot; concept as it&#039;s not part of any spec, but I guess we need to define something like it at some point</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Tue Jan 20 2015 05:59:57 GMT-0800 (Pacific Standard Time)">13:59</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">JakeA: yea... since there can be multiple fetch events in flight at once... it seems we have to wait for resolveWith()</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Tue Jan 20 2015 06:00:20 GMT-0800 (Pacific Standard Time)">14:00</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">wanderview: but given a document A and a service worker SW, they should probably never share a load group, except maybe for &quot;default&quot; cases, where it is a bit unclear how those should work</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Tue Jan 20 2015 06:00:33 GMT-0800 (Pacific Standard Time)">14:00</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">annevk: well... load group is a gecko implementation detail... doesn&#039;t have to be specifically in the spec... and its kind of hard to work with</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Tue Jan 20 2015 06:01:06 GMT-0800 (Pacific Standard Time)">14:01</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">wanderview: yeah, well we need a concept in specs of all fetches associated with a global</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Tue Jan 20 2015 06:01:10 GMT-0800 (Pacific Standard Time)">14:01</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">wanderview: for various reasons</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Tue Jan 20 2015 06:01:34 GMT-0800 (Pacific Standard Time)">14:01</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: event.default() differs from fetch(event.request) in that it&#039;ll return redirects that&#039;ll be processed by the fetch spec without further SW interaction right? What does the synchronous part do?</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Tue Jan 20 2015 06:01:51 GMT-0800 (Pacific Standard Time)">14:01</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">annevk: in the event.default() case... gecko treats the load as being performed by the document (with its load group), not the SW...</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Tue Jan 20 2015 06:02:16 GMT-0800 (Pacific Standard Time)">14:02</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">synchronous part?</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Tue Jan 20 2015 06:02:26 GMT-0800 (Pacific Standard Time)">14:02</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: see the last comment</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Tue Jan 20 2015 06:02:38 GMT-0800 (Pacific Standard Time)">14:02</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">wanderview: sorry, crossing the streams a little, I&#039;m talking about <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=27524">https://www.w3.org/Bugs/Public/show_bug.cgi?id=27524</a></td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Tue Jan 20 2015 06:03:23 GMT-0800 (Pacific Standard Time)">14:03</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">wanderview: that is sort of what the spec says for event.default() as well, however, what&#039;s unclear is how we deliver notifications to both globals</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Tue Jan 20 2015 06:04:43 GMT-0800 (Pacific Standard Time)">14:04</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">annevk: I didn&#039;t realize the SW got any more events for that fetch event() once it did event.default()... or is that something we want to change?</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Tue Jan 20 2015 06:05:22 GMT-0800 (Pacific Standard Time)">14:05</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">wanderview: how does the SW get a Response object out of event.default() if not for some kind of queued task from the network layer?</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Tue Jan 20 2015 06:05:50 GMT-0800 (Pacific Standard Time)">14:05</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">wanderview: and how do we maintain progress updates to the document at the same time?</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Tue Jan 20 2015 06:05:58 GMT-0800 (Pacific Standard Time)">14:05</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Ohhh, I think I&#039;m starting to understand</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Tue Jan 20 2015 06:06:03 GMT-0800 (Pacific Standard Time)">14:06</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">wanderview: seems like it would require a very special path</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Tue Jan 20 2015 06:06:25 GMT-0800 (Pacific Standard Time)">14:06</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">annevk: ah... I missed that it does that! :-)  for some reason I was thinking event.default() basically just sent it back to document... but I guess thats responseWith() using no argument</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Tue Jan 20 2015 06:07:41 GMT-0800 (Pacific Standard Time)">14:07</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">or maybe I&#039;m confused still</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Tue Jan 20 2015 06:08:05 GMT-0800 (Pacific Standard Time)">14:08</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: What if event.default() called fetch in a way that would give it back redirects (opaque if needed), and they&#039;re sent back to the original fetch which handles the redirects and doesn&#039;t call back into the SW</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Tue Jan 20 2015 06:08:12 GMT-0800 (Pacific Standard Time)">14:08</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Is that observable?</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Tue Jan 20 2015 06:09:04 GMT-0800 (Pacific Standard Time)">14:09</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">As far as I can remember event.default() was there pave over the redirect behaviour of a new fetch call consuming redirects</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Tue Jan 20 2015 06:10:04 GMT-0800 (Pacific Standard Time)">14:10</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">I guess there is no respondWith()... you have to do event.respondWith(event.default())</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Tue Jan 20 2015 06:10:31 GMT-0800 (Pacific Standard Time)">14:10</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: yeah, download progress is still gone</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Tue Jan 20 2015 06:11:42 GMT-0800 (Pacific Standard Time)">14:11</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: the response is passed back to the browser before the stream is read</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Tue Jan 20 2015 06:11:43 GMT-0800 (Pacific Standard Time)">14:11</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: you might get the &quot;progress&quot; from sending it from SW to A, but the idea is that you get the progress from what actually happens network-wise (at least when using .default())</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Tue Jan 20 2015 06:12:05 GMT-0800 (Pacific Standard Time)">14:12</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: that is true</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Tue Jan 20 2015 06:12:38 GMT-0800 (Pacific Standard Time)">14:12</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">annevk: I&#039;m guessing on the impl side we can make the progress work... but not sure how it should be spec&#039;d</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Tue Jan 20 2015 06:13:01 GMT-0800 (Pacific Standard Time)">14:13</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">If progress is judged by content-length headers &amp; the stream, doesn&#039;t it just work?</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Tue Jan 20 2015 06:13:26 GMT-0800 (Pacific Standard Time)">14:13</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">I doubt it &quot;just&quot; works :-)</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Tue Jan 20 2015 06:13:33 GMT-0800 (Pacific Standard Time)">14:13</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">For one thing there&#039;s that bug</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Tue Jan 20 2015 06:14:52 GMT-0800 (Pacific Standard Time)">14:14</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">That&#039;s my specing style. 1. Just, make it happen. 2. Srs have you even started yet? 3. Return correct response.</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Tue Jan 20 2015 06:15:10 GMT-0800 (Pacific Standard Time)">14:15</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">heh</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Tue Jan 20 2015 06:16:20 GMT-0800 (Pacific Standard Time)">14:16</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: If event.default() made a new fetch, which would return raw redirects, then pass those back to the original fetch, doesn&#039;t that get us out of having to go from fetchA to SW to fetchA and back to SW?</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Tue Jan 20 2015 06:16:37 GMT-0800 (Pacific Standard Time)">14:16</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">annevk: in gecko we have the concept of a &quot;network callback&quot; which can be set on a load group to effect many requests, or just on a single network request... progress is communicated back to the document that way (I think)... so we can, in theory, set the progress callback for the document while performing the fetch in the SW context</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Tue Jan 20 2015 06:16:41 GMT-0800 (Pacific Standard Time)">14:16</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">So yeah, redirects were observable, anything else?</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Tue Jan 20 2015 06:17:51 GMT-0800 (Pacific Standard Time)">14:17</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: then Fetch needs to know SW used default()</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Tue Jan 20 2015 06:18:01 GMT-0800 (Pacific Standard Time)">14:18</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: see <a href="https://fetch.spec.whatwg.org/#http-fetch">https://fetch.spec.whatwg.org/#http-fetch</a> for how that would fall apart now</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Tue Jan 20 2015 06:18:06 GMT-0800 (Pacific Standard Time)">14:18</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: I think that&#039;s just a side effect of using event.default(). Things don&#039;t change from the document&#039;s perspective though, as the redirects are handled by the original fetch, baseurls are fine</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Tue Jan 20 2015 06:18:47 GMT-0800 (Pacific Standard Time)">14:18</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: Don&#039;t see how fetch needs to be aware of event.default(), although I&#039;ve probably forgotten why</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Tue Jan 20 2015 06:19:39 GMT-0800 (Pacific Standard Time)">14:19</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: if default() does not handle redirects you can&#039;t store it in the cache as easily anymore</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Tue Jan 20 2015 06:19:45 GMT-0800 (Pacific Standard Time)">14:19</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">annevk: JakeA: sorry if this was discussed and I missed... but in the case where SW calls respondWith() with a different fetch() or cache.add()... should the document still get progress updates?  is this unique to default()?</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Tue Jan 20 2015 06:20:07 GMT-0800 (Pacific Standard Time)">14:20</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: also HTTP Fetch cannot block on all opaque stuff anymore and has to inspect if it&#039;s a redirect</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Tue Jan 20 2015 06:20:42 GMT-0800 (Pacific Standard Time)">14:20</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">wanderview: it&#039;s a bit unclear</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Tue Jan 20 2015 06:21:05 GMT-0800 (Pacific Standard Time)">14:21</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">as a user... I imagine I would expect to still get progress in those cases</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Tue Jan 20 2015 06:21:34 GMT-0800 (Pacific Standard Time)">14:21</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">wanderview: and I think you do given that the progress is mostly about the stream anyway</td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Tue Jan 20 2015 06:22:02 GMT-0800 (Pacific Standard Time)">14:22</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">wanderview: though you wouldn&#039;t if someone consumed the whole stream in the SW and then constructed a response and then passed that back</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Tue Jan 20 2015 06:22:27 GMT-0800 (Pacific Standard Time)">14:22</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">annevk: so the terminology we use in our impl is that there is a &quot;progress event sink&quot;... can that be spec&#039;d?  so when event.respondWith(resp) is called, the UA sets the progress event sink for the associated document on the response?</td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Tue Jan 20 2015 06:22:52 GMT-0800 (Pacific Standard Time)">14:22</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">and event.default() starts with the documents progress event sink</td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Tue Jan 20 2015 06:22:58 GMT-0800 (Pacific Standard Time)">14:22</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">wanderview: the browser should use the response it gets via respondWith to determine progress. So event.respondWith(fetch(url)) would show progress, event.respondWith(fetch(url).then(r =&gt; r,text()).then(t =&gt; new Response(t))) wouldn&#039;t</td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Tue Jan 20 2015 06:23:22 GMT-0800 (Pacific Standard Time)">14:23</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Yeah, what JakeA says the specification defines now, that&#039;d be hard to change</td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Tue Jan 20 2015 06:23:48 GMT-0800 (Pacific Standard Time)">14:23</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: I don&#039;t see a way around Fetch needing to know about default()</td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Tue Jan 20 2015 06:23:54 GMT-0800 (Pacific Standard Time)">14:23</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">ok, I think we have an impl bug... because I don&#039;t think we report progress in that case</td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Tue Jan 20 2015 06:24:05 GMT-0800 (Pacific Standard Time)">14:24</a></td><td class="nick-cell"><span class="nick nick-12" title=wanderview@irc>wanderview</span></td><td class="msg-cell">goes to bugzilla.</td></tr>
  <tr class="msg" id="L100"><td class="ts-cell"><a class="ts" href="#L100" alt="Tue Jan 20 2015 06:24:06 GMT-0800 (Pacific Standard Time)">14:24</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: and it knows about default(), you might as well follow all the redirects in SW...</td></tr>
  <tr class="msg" id="L101"><td class="ts-cell"><a class="ts" href="#L101" alt="Tue Jan 20 2015 06:24:15 GMT-0800 (Pacific Standard Time)">14:24</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: (so you can store the response in the cache)</td></tr>
  <tr class="msg" id="L102"><td class="ts-cell"><a class="ts" href="#L102" alt="Tue Jan 20 2015 06:25:06 GMT-0800 (Pacific Standard Time)">14:25</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">wanderview: progress events are based on the stream that comes from the network; from the document&#039;s perspective, the network is the SW; from the SW, it&#039;s the actual network</td></tr>
  <tr class="msg" id="L103"><td class="ts-cell"><a class="ts" href="#L103" alt="Tue Jan 20 2015 06:25:19 GMT-0800 (Pacific Standard Time)">14:25</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: we talked about the SW being able to pass a response back that contained something to say &quot;btw, treat the base url as [whatever]&quot; to work around this</td></tr>
  <tr class="msg" id="L104"><td class="ts-cell"><a class="ts" href="#L104" alt="Tue Jan 20 2015 06:25:28 GMT-0800 (Pacific Standard Time)">14:25</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">I think it was dismissed as too hacky at the time</td></tr>
  <tr class="msg" id="L105"><td class="ts-cell"><a class="ts" href="#L105" alt="Tue Jan 20 2015 06:25:33 GMT-0800 (Pacific Standard Time)">14:25</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">but maybe it&#039;s simpler?</td></tr>
  <tr class="msg" id="L106"><td class="ts-cell"><a class="ts" href="#L106" alt="Tue Jan 20 2015 06:25:40 GMT-0800 (Pacific Standard Time)">14:25</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">wanderview: the confusing bit here is that the stream is shared and at some point probably cloned so it can be read simultaneously</td></tr>
  <tr class="msg" id="L107"><td class="ts-cell"><a class="ts" href="#L107" alt="Tue Jan 20 2015 06:25:46 GMT-0800 (Pacific Standard Time)">14:25</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">annevk: yea... but our current impl does not report progress (afaict) for event.respondWith(fetch(url))</td></tr>
  <tr class="msg" id="L108"><td class="ts-cell"><a class="ts" href="#L108" alt="Tue Jan 20 2015 06:26:50 GMT-0800 (Pacific Standard Time)">14:26</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">wanderview: fwiw, I don&#039;t Chrome does it with caches. Don&#039;t think those stream yet.</td></tr>
  <tr class="msg" id="L109"><td class="ts-cell"><a class="ts" href="#L109" alt="Tue Jan 20 2015 06:26:57 GMT-0800 (Pacific Standard Time)">14:26</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: so we&#039;d annotate the response from a .default() somehow?</td></tr>
  <tr class="msg" id="L110"><td class="ts-cell"><a class="ts" href="#L110" alt="Tue Jan 20 2015 06:27:22 GMT-0800 (Pacific Standard Time)">14:27</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: as meaning &quot;imagine you followed a redirect to get here&quot;</td></tr>
  <tr class="msg" id="L111"><td class="ts-cell"><a class="ts" href="#L111" alt="Tue Jan 20 2015 06:27:29 GMT-0800 (Pacific Standard Time)">14:27</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: yeah</td></tr>
  <tr class="msg" id="L112"><td class="ts-cell"><a class="ts" href="#L112" alt="Tue Jan 20 2015 06:27:31 GMT-0800 (Pacific Standard Time)">14:27</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: it is pretty hacky</td></tr>
  <tr class="msg" id="L113"><td class="ts-cell"><a class="ts" href="#L113" alt="Tue Jan 20 2015 06:27:35 GMT-0800 (Pacific Standard Time)">14:27</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">:D</td></tr>
  <tr class="msg" id="L114"><td class="ts-cell"><a class="ts" href="#L114" alt="Tue Jan 20 2015 06:27:55 GMT-0800 (Pacific Standard Time)">14:27</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">less hacky than trying to loop back into the SW?</td></tr>
  <tr class="msg" id="L115"><td class="ts-cell"><a class="ts" href="#L115" alt="Tue Jan 20 2015 06:28:34 GMT-0800 (Pacific Standard Time)">14:28</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: the alternative is that you don&#039;t get anything out of a .default()</td></tr>
  <tr class="msg" id="L116"><td class="ts-cell"><a class="ts" href="#L116" alt="Tue Jan 20 2015 06:28:46 GMT-0800 (Pacific Standard Time)">14:28</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: that it&#039;s exactly identical to letting the request fly</td></tr>
  <tr class="msg" id="L117"><td class="ts-cell"><a class="ts" href="#L117" alt="Tue Jan 20 2015 06:28:55 GMT-0800 (Pacific Standard Time)">14:28</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: sorry, to not do anything with the event</td></tr>
  <tr class="msg" id="L118"><td class="ts-cell"><a class="ts" href="#L118" alt="Tue Jan 20 2015 06:29:23 GMT-0800 (Pacific Standard Time)">14:29</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: because now it is a bit different from not doing anything with the event, which is somewhat weird</td></tr>
  <tr class="msg" id="L119"><td class="ts-cell"><a class="ts" href="#L119" alt="Tue Jan 20 2015 06:32:31 GMT-0800 (Pacific Standard Time)">14:32</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: I think event.default().catch(getAFallbackFromCache) needed</td></tr>
  <tr class="msg" id="L120"><td class="ts-cell"><a class="ts" href="#L120" alt="Tue Jan 20 2015 06:35:18 GMT-0800 (Pacific Standard Time)">14:35</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">From memory, event.default() was there to let the browser do it&#039;s normal thing, but still offer recovery from failure. Caching result is nice too</td></tr>
  <tr class="msg" id="L121"><td class="ts-cell"><a class="ts" href="#L121" alt="Tue Jan 20 2015 06:36:05 GMT-0800 (Pacific Standard Time)">14:36</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: if event.default() resolves with the eventual response, it isn&#039;t *ideal* for caching as you&#039;d be caching it against the original request url</td></tr>
  <tr class="msg" id="L122"><td class="ts-cell"><a class="ts" href="#L122" alt="Tue Jan 20 2015 06:36:16 GMT-0800 (Pacific Standard Time)">14:36</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">So your base urls would be off next time you get from the cache</td></tr>
  <tr class="msg" id="L123"><td class="ts-cell"><a class="ts" href="#L123" alt="Tue Jan 20 2015 06:37:47 GMT-0800 (Pacific Standard Time)">14:37</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">(unless it had Jake&#039;s patented super magic &quot;use this as the base url&quot; hack)</td></tr>
  <tr class="msg" id="L124"><td class="ts-cell"><a class="ts" href="#L124" alt="Tue Jan 20 2015 06:42:35 GMT-0800 (Pacific Standard Time)">14:42</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</td><td class="msg-cell">JakeA: yea... the annoying thing is we don&#039;t get stuff like progress events for free with data streams in gecko... network streams are completely different than other streams :-\</td></tr>
  <tr class="msg" id="L125"><td class="ts-cell"><a class="ts" href="#L125" alt="Tue Jan 20 2015 06:43:15 GMT-0800 (Pacific Standard Time)">14:43</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: should we instead drop default() and put a way to mutate a response into requiring a synthetic redirect?</td></tr>
  <tr class="msg" id="L126"><td class="ts-cell"><a class="ts" href="#L126" alt="Tue Jan 20 2015 06:44:45 GMT-0800 (Pacific Standard Time)">14:44</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: I&#039;m very interested in that. I&#039;ve been wanting to kill .default() forever.</td></tr>
  <tr class="msg" id="L127"><td class="ts-cell"><a class="ts" href="#L127" alt="Tue Jan 20 2015 06:44:56 GMT-0800 (Pacific Standard Time)">14:44</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: I know :-)</td></tr>
  <tr class="msg" id="L128"><td class="ts-cell"><a class="ts" href="#L128" alt="Tue Jan 20 2015 06:45:01 GMT-0800 (Pacific Standard Time)">14:45</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: open a ticket?</td></tr>
  <tr class="msg" id="L129"><td class="ts-cell"><a class="ts" href="#L129" alt="Tue Jan 20 2015 06:45:06 GMT-0800 (Pacific Standard Time)">14:45</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Shall do</td></tr>
  <tr class="msg" id="L130"><td class="ts-cell"><a class="ts" href="#L130" alt="Tue Jan 20 2015 07:05:58 GMT-0800 (Pacific Standard Time)">15:05</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: <a href="https://github.com/slightlyoff/ServiceWorker/issues/607">https://github.com/slightlyoff/ServiceWorker/issues/607</a></td></tr>
  <tr class="msg" id="L131"><td class="ts-cell"><a class="ts" href="#L131" alt="Tue Jan 20 2015 07:37:27 GMT-0800 (Pacific Standard Time)">15:37</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: speccing Client. Multiple methods return a client object, but client doesn&#039;t have a constructor (although I guess it could), where would I define the construction steps? As in, taking an environment settings object and setting all the properties etc</td></tr>
  <tr class="msg" id="L132"><td class="ts-cell"><a class="ts" href="#L132" alt="Tue Jan 20 2015 08:19:27 GMT-0800 (Pacific Standard Time)">16:19</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: some prose</td></tr>
  <tr class="msg" id="L133"><td class="ts-cell"><a class="ts" href="#L133" alt="Tue Jan 20 2015 08:19:49 GMT-0800 (Pacific Standard Time)">16:19</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: &quot;To /create a Client object/, run these steps:&quot;</td></tr>
  <tr class="msg" id="L134"><td class="ts-cell"><a class="ts" href="#L134" alt="Tue Jan 20 2015 08:23:51 GMT-0800 (Pacific Standard Time)">16:23</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: Thanks. Also, I&#039;m hitting the problem I think you tried to explain to me in the past. If the client is a SharedWorker, postMessage doesn&#039;t really fit, as SharedWorker doesn&#039;t have onmessage (it depends on ports for reasons I&#039;ve never entirely understood). I guess this is why we should have WindowClient, but then just instances of DedicatedWorker &amp;</td></tr>
  <tr class="msg" id="L135"><td class="ts-cell"><a class="ts" href="#L135" alt="Tue Jan 20 2015 08:23:52 GMT-0800 (Pacific Standard Time)">16:23</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">SharedWorker?</td></tr>
  <tr class="msg" id="L136"><td class="ts-cell"><a class="ts" href="#L136" alt="Tue Jan 20 2015 08:57:05 GMT-0800 (Pacific Standard Time)">16:57</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Never understood way SharedWorker uses ports the way it does. Why can&#039;t it just be sharedWorker.postMessage(â€¦), then the worker can respond via messageEvent.source</td></tr>
  <tr class="msg" id="L137"><td class="ts-cell"><a class="ts" href="#L137" alt="Tue Jan 20 2015 08:57:15 GMT-0800 (Pacific Standard Time)">16:57</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">why*</td></tr>
  <tr class="msg" id="L138"><td class="ts-cell"><a class="ts" href="#L138" alt="Tue Jan 20 2015 08:58:30 GMT-0800 (Pacific Standard Time)">16:58</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=caitp@irc>caitp</span>&gt;</td><td class="msg-cell">0</td></tr>
  <tr class="msg" id="L139"><td class="ts-cell"><a class="ts" href="#L139" alt="Tue Jan 20 2015 08:59:17 GMT-0800 (Pacific Standard Time)">16:59</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell">Symmetry?</td></tr>
  <tr class="msg" id="L140"><td class="ts-cell"><a class="ts" href="#L140" alt="Tue Jan 20 2015 08:59:31 GMT-0800 (Pacific Standard Time)">16:59</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Symmetry with what?</td></tr>
  <tr class="msg" id="L141"><td class="ts-cell"><a class="ts" href="#L141" alt="Tue Jan 20 2015 09:03:13 GMT-0800 (Pacific Standard Time)">17:03</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">Could be that it was designed with the idea that everyone would be passing around ports as part of some capabilties system, which might skew one&#039;s views on good api design</td></tr>
  <tr class="msg" id="L142"><td class="ts-cell"><a class="ts" href="#L142" alt="Tue Jan 20 2015 09:16:03 GMT-0800 (Pacific Standard Time)">17:16</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: wait, does client.postMessage() go to window.onmessage?</td></tr>
  <tr class="msg" id="L143"><td class="ts-cell"><a class="ts" href="#L143" alt="Tue Jan 20 2015 09:16:11 GMT-0800 (Pacific Standard Time)">17:16</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: or to navigator.serviceWorkers...?</td></tr>
  <tr class="msg" id="L144"><td class="ts-cell"><a class="ts" href="#L144" alt="Tue Jan 20 2015 09:17:10 GMT-0800 (Pacific Standard Time)">17:17</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: the way shared worker works is that each worker or document that connects to it gets its own port</td></tr>
  <tr class="msg" id="L145"><td class="ts-cell"><a class="ts" href="#L145" alt="Tue Jan 20 2015 09:17:27 GMT-0800 (Pacific Standard Time)">17:17</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: however, when a shared worker is controlled by a service worker we should not use that API</td></tr>
  <tr class="msg" id="L146"><td class="ts-cell"><a class="ts" href="#L146" alt="Tue Jan 20 2015 09:17:37 GMT-0800 (Pacific Standard Time)">17:17</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: because that is a completely different relationship</td></tr>
  <tr class="msg" id="L147"><td class="ts-cell"><a class="ts" href="#L147" alt="Tue Jan 20 2015 09:18:08 GMT-0800 (Pacific Standard Time)">17:18</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell">annevk, I wonder if there&#039;s anything useful in <a href="https://github.com/operasoftware/presto-testo/tree/master/imported/peter/unicode/html">https://github.com/operasoftware/presto-testo/tree/master/imported/peter/unicode/html</a></td></tr>
  <tr class="msg" id="L148"><td class="ts-cell"><a class="ts" href="#L148" alt="Tue Jan 20 2015 09:19:17 GMT-0800 (Pacific Standard Time)">17:19</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: client.postMessage would go to window.onmessage I thought</td></tr>
  <tr class="msg" id="L149"><td class="ts-cell"><a class="ts" href="#L149" alt="Tue Jan 20 2015 09:19:18 GMT-0800 (Pacific Standard Time)">17:19</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Ms2ger: double and ent look redundant</td></tr>
  <tr class="msg" id="L150"><td class="ts-cell"><a class="ts" href="#L150" alt="Tue Jan 20 2015 09:19:52 GMT-0800 (Pacific Standard Time)">17:19</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: ooooh, that&#039;s a lot of branching for window.onmessage then...</td></tr>
  <tr class="msg" id="L151"><td class="ts-cell"><a class="ts" href="#L151" alt="Tue Jan 20 2015 09:20:10 GMT-0800 (Pacific Standard Time)">17:20</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: I thought the events would go to the associated ServiceWorker object</td></tr>
  <tr class="msg" id="L152"><td class="ts-cell"><a class="ts" href="#L152" alt="Tue Jan 20 2015 09:20:59 GMT-0800 (Pacific Standard Time)">17:20</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Ms2ger: maybe the excess stuff but I suspect we already got that covered elsewhere too</td></tr>
  <tr class="msg" id="L153"><td class="ts-cell"><a class="ts" href="#L153" alt="Tue Jan 20 2015 09:21:18 GMT-0800 (Pacific Standard Time)">17:21</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell">Ok, thanks for looking</td></tr>
  <tr class="msg" id="L154"><td class="ts-cell"><a class="ts" href="#L154" alt="Tue Jan 20 2015 09:21:44 GMT-0800 (Pacific Standard Time)">17:21</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: it seems pretty bad to overload window.onmessage like that</td></tr>
  <tr class="msg" id="L155"><td class="ts-cell"><a class="ts" href="#L155" alt="Tue Jan 20 2015 09:22:09 GMT-0800 (Pacific Standard Time)">17:22</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: navigator.serviceWorker.onmessage? We don&#039;t have that right now, but we could. What&#039;s the issue with window.onmessage? <a href="https://html.spec.whatwg.org/multipage/comms.html#dom-window-postmessage">https://html.spec.whatwg.org/multipage/comms.html#dom-window-postmessage</a> makes it look simple aside from the transferables</td></tr>
  <tr class="msg" id="L156"><td class="ts-cell"><a class="ts" href="#L156" alt="Tue Jan 20 2015 09:22:37 GMT-0800 (Pacific Standard Time)">17:22</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: it&#039;s already used for cross-window postMessage</td></tr>
  <tr class="msg" id="L157"><td class="ts-cell"><a class="ts" href="#L157" alt="Tue Jan 20 2015 09:23:59 GMT-0800 (Pacific Standard Time)">17:23</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: how can only client have postMessage()? How do you postMessage() from the window?</td></tr>
  <tr class="msg" id="L158"><td class="ts-cell"><a class="ts" href="#L158" alt="Tue Jan 20 2015 09:24:27 GMT-0800 (Pacific Standard Time)">17:24</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: I thought of window-to-window as client-to-client</td></tr>
  <tr class="msg" id="L159"><td class="ts-cell"><a class="ts" href="#L159" alt="Tue Jan 20 2015 09:24:42 GMT-0800 (Pacific Standard Time)">17:24</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: no, so ServiceWorker inherits from Worker</td></tr>
  <tr class="msg" id="L160"><td class="ts-cell"><a class="ts" href="#L160" alt="Tue Jan 20 2015 09:24:51 GMT-0800 (Pacific Standard Time)">17:24</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: and that has both postMessage() and onmessage</td></tr>
  <tr class="msg" id="L161"><td class="ts-cell"><a class="ts" href="#L161" alt="Tue Jan 20 2015 09:25:02 GMT-0800 (Pacific Standard Time)">17:25</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: Client is the other side</td></tr>
  <tr class="msg" id="L162"><td class="ts-cell"><a class="ts" href="#L162" alt="Tue Jan 20 2015 09:25:11 GMT-0800 (Pacific Standard Time)">17:25</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: it only makes sense for those two to talk to each other</td></tr>
  <tr class="msg" id="L163"><td class="ts-cell"><a class="ts" href="#L163" alt="Tue Jan 20 2015 09:25:13 GMT-0800 (Pacific Standard Time)">17:25</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: messageEvent.source.postMessage would post back to serviceWorkerGlobalScope.onmessage</td></tr>
  <tr class="msg" id="L164"><td class="ts-cell"><a class="ts" href="#L164" alt="Tue Jan 20 2015 09:25:41 GMT-0800 (Pacific Standard Time)">17:25</a></td><td class="nick-cell"><span class="nick nick-7" title=JakeA@irc>JakeA</span></td><td class="msg-cell">thinks</td></tr>
  <tr class="msg" id="L165"><td class="ts-cell"><a class="ts" href="#L165" alt="Tue Jan 20 2015 09:28:09 GMT-0800 (Pacific Standard Time)">17:28</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: so you were thinking the message would go to (await navigator.serviceWorker.getRegistration()).active?</td></tr>
  <tr class="msg" id="L166"><td class="ts-cell"><a class="ts" href="#L166" alt="Tue Jan 20 2015 09:28:54 GMT-0800 (Pacific Standard Time)">17:28</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">yeah</td></tr>
  <tr class="msg" id="L167"><td class="ts-cell"><a class="ts" href="#L167" alt="Tue Jan 20 2015 09:29:19 GMT-0800 (Pacific Standard Time)">17:29</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">that&#039;s the only thing that made sense to me and would work for both documents and workers</td></tr>
  <tr class="msg" id="L168"><td class="ts-cell"><a class="ts" href="#L168" alt="Tue Jan 20 2015 09:29:29 GMT-0800 (Pacific Standard Time)">17:29</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">and would give a somewhat sane API</td></tr>
  <tr class="msg" id="L169"><td class="ts-cell"><a class="ts" href="#L169" alt="Tue Jan 20 2015 09:29:45 GMT-0800 (Pacific Standard Time)">17:29</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">and be consistent with what we have for workers today</td></tr>
  <tr class="msg" id="L170"><td class="ts-cell"><a class="ts" href="#L170" alt="Tue Jan 20 2015 09:29:59 GMT-0800 (Pacific Standard Time)">17:29</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Are you now going to tell me that Chrome implemented something else?</td></tr>
  <tr class="msg" id="L171"><td class="ts-cell"><a class="ts" href="#L171" alt="Tue Jan 20 2015 09:30:23 GMT-0800 (Pacific Standard Time)">17:30</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">We haven&#039;t implemented clients yet</td></tr>
  <tr class="msg" id="L172"><td class="ts-cell"><a class="ts" href="#L172" alt="Tue Jan 20 2015 09:30:34 GMT-0800 (Pacific Standard Time)">17:30</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">No messaging at all?</td></tr>
  <tr class="msg" id="L173"><td class="ts-cell"><a class="ts" href="#L173" alt="Tue Jan 20 2015 09:31:13 GMT-0800 (Pacific Standard Time)">17:31</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Window to SW, but won&#039;t think we have a way back yet</td></tr>
  <tr class="msg" id="L174"><td class="ts-cell"><a class="ts" href="#L174" alt="Tue Jan 20 2015 09:31:44 GMT-0800 (Pacific Standard Time)">17:31</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">I think we need to stop &amp; think about how this stuff works</td></tr>
  <tr class="msg" id="L175"><td class="ts-cell"><a class="ts" href="#L175" alt="Tue Jan 20 2015 09:32:18 GMT-0800 (Pacific Standard Time)">17:32</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">registration objects don&#039;t feel client-unique to me, so not sure they&#039;re a good place for onmessage either</td></tr>
  <tr class="msg" id="L176"><td class="ts-cell"><a class="ts" href="#L176" alt="Tue Jan 20 2015 09:34:09 GMT-0800 (Pacific Standard Time)">17:34</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">I guess the only problem is that Client objects are currently designed as non-persistent</td></tr>
  <tr class="msg" id="L177"><td class="ts-cell"><a class="ts" href="#L177" alt="Tue Jan 20 2015 09:34:32 GMT-0800 (Pacific Standard Time)">17:34</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">That doesn&#039;t make for a great message channel receiver</td></tr>
  <tr class="msg" id="L178"><td class="ts-cell"><a class="ts" href="#L178" alt="Tue Jan 20 2015 09:35:21 GMT-0800 (Pacific Standard Time)">17:35</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: I thought registration object was ServiceWorkerRegistration, not ServiceWorker</td></tr>
  <tr class="msg" id="L179"><td class="ts-cell"><a class="ts" href="#L179" alt="Tue Jan 20 2015 09:35:29 GMT-0800 (Pacific Standard Time)">17:35</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">(I hate the naming)</td></tr>
  <tr class="msg" id="L180"><td class="ts-cell"><a class="ts" href="#L180" alt="Tue Jan 20 2015 09:36:06 GMT-0800 (Pacific Standard Time)">17:36</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: yes, so (await navigator.serviceWorker.getRegistration()) is a ServiceWorkerRegistration, then .active is a ServiceWorker</td></tr>
  <tr class="msg" id="L181"><td class="ts-cell"><a class="ts" href="#L181" alt="Tue Jan 20 2015 09:38:52 GMT-0800 (Pacific Standard Time)">17:38</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">ServiceWorkerRegistration is an origin-level thing rather than a client-specific thing, so getting client-specific message on it, or its properties feels wrong.</td></tr>
  <tr class="msg" id="L182"><td class="ts-cell"><a class="ts" href="#L182" alt="Tue Jan 20 2015 09:38:58 GMT-0800 (Pacific Standard Time)">17:38</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Lemmie write up an issue \o/</td></tr>
  <tr class="msg" id="L183"><td class="ts-cell"><a class="ts" href="#L183" alt="Tue Jan 20 2015 09:40:27 GMT-0800 (Pacific Standard Time)">17:40</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: well, it&#039;s the only way to get a reference to a a client&#039;s own service worker</td></tr>
  <tr class="msg" id="L184"><td class="ts-cell"><a class="ts" href="#L184" alt="Tue Jan 20 2015 09:40:34 GMT-0800 (Pacific Standard Time)">17:40</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: seems fairly fricking specific to me</td></tr>
  <tr class="msg" id="L185"><td class="ts-cell"><a class="ts" href="#L185" alt="Tue Jan 20 2015 09:42:23 GMT-0800 (Pacific Standard Time)">17:42</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: a client selects a registration, but many clients can select the same registration</td></tr>
  <tr class="msg" id="L186"><td class="ts-cell"><a class="ts" href="#L186" alt="Tue Jan 20 2015 09:48:14 GMT-0800 (Pacific Standard Time)">17:48</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: oh I see what you mean, I had imagined it would go to all of them, but indeed that does not really work</td></tr>
  <tr class="msg" id="L187"><td class="ts-cell"><a class="ts" href="#L187" alt="Tue Jan 20 2015 09:48:26 GMT-0800 (Pacific Standard Time)">17:48</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: okay, so yes, we need something new :/</td></tr>
  <tr class="msg" id="L188"><td class="ts-cell"><a class="ts" href="#L188" alt="Tue Jan 20 2015 09:49:15 GMT-0800 (Pacific Standard Time)">17:49</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: I think postMessage &amp; serviceWorker has been handwaved all the way :(</td></tr>
  <tr class="msg" id="L189"><td class="ts-cell"><a class="ts" href="#L189" alt="Tue Jan 20 2015 09:50:01 GMT-0800 (Pacific Standard Time)">17:50</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: It could be navigator.serviceWorker.onmessage for messages from a ServiceWorker. Anyway, will write up a ticket. Thanks for dragging me through it</td></tr>
  <tr class="msg" id="L190"><td class="ts-cell"><a class="ts" href="#L190" alt="Tue Jan 20 2015 10:01:35 GMT-0800 (Pacific Standard Time)">18:01</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: yeah, the whole &quot;just like shared workers&quot; stuff has been somewhat painful to point through</td></tr>
  <tr class="msg" id="L191"><td class="ts-cell"><a class="ts" href="#L191" alt="Tue Jan 20 2015 10:01:44 GMT-0800 (Pacific Standard Time)">18:01</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: thanks</td></tr>
  <tr class="msg" id="L192"><td class="ts-cell"><a class="ts" href="#L192" alt="Tue Jan 20 2015 10:01:54 GMT-0800 (Pacific Standard Time)">18:01</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell">Do we still like shared workers?</td></tr>
  <tr class="msg" id="L193"><td class="ts-cell"><a class="ts" href="#L193" alt="Tue Jan 20 2015 10:04:10 GMT-0800 (Pacific Standard Time)">18:04</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">Pretty sure that the answer is &quot;No&quot; for all questions of the form &quot;do we still like X&quot; where X is a past web technology, and &quot;Yes&quot; where X is a future web technology</td></tr>
  <tr class="msg" id="L194"><td class="ts-cell"><a class="ts" href="#L194" alt="Tue Jan 20 2015 10:12:13 GMT-0800 (Pacific Standard Time)">18:12</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=caitp@irc>caitp</span>&gt;</td><td class="msg-cell">so you&#039;re saying there&#039;s a chance that opinions might change in 20 years?</td></tr>
  <tr class="msg" id="L195"><td class="ts-cell"><a class="ts" href="#L195" alt="Tue Jan 20 2015 10:12:35 GMT-0800 (Pacific Standard Time)">18:12</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=caitp@irc>caitp</span>&gt;</td><td class="msg-cell">goodness</td></tr>
  <tr class="msg" id="L196"><td class="ts-cell"><a class="ts" href="#L196" alt="Tue Jan 20 2015 10:12:55 GMT-0800 (Pacific Standard Time)">18:12</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=jgraham@irc>jgraham</span>&gt;</td><td class="msg-cell">I&#039;m saying that there&#039;s a discontinuity at t=present :p</td></tr>
  <tr class="msg" id="L197"><td class="ts-cell"><a class="ts" href="#L197" alt="Tue Jan 20 2015 10:16:00 GMT-0800 (Pacific Standard Time)">18:16</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: different subject, we&#039;re starting to look more seriously at background sync. I see FirefoxOS has something that I think was based on early ideas we had <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1018320">https://bugzilla.mozilla.org/show_bug.cgi?id=1018320</a> - who&#039;d be best to get involved in making it a standard?</td></tr>
  <tr class="msg" id="L198"><td class="ts-cell"><a class="ts" href="#L198" alt="Tue Jan 20 2015 10:16:37 GMT-0800 (Pacific Standard Time)">18:16</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: it seems very likely it&#039;ll be the same people as service worker</td></tr>
  <tr class="msg" id="L199"><td class="ts-cell"><a class="ts" href="#L199" alt="Tue Jan 20 2015 10:16:47 GMT-0800 (Pacific Standard Time)">18:16</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: not sure we can get time from the Firefox OS folks</td></tr>
  <tr class="msg" id="L200"><td class="ts-cell"><a class="ts" href="#L200" alt="Tue Jan 20 2015 10:17:28 GMT-0800 (Pacific Standard Time)">18:17</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: ok, it&#039;d be good to get their learnings, but I&#039;ll sort something out with Jonas &amp; yourself</td></tr>
  <tr class="msg" id="L201"><td class="ts-cell"><a class="ts" href="#L201" alt="Tue Jan 20 2015 10:18:52 GMT-0800 (Pacific Standard Time)">18:18</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: copy overholt</td></tr>
  <tr class="msg" id="L202"><td class="ts-cell"><a class="ts" href="#L202" alt="Tue Jan 20 2015 10:19:00 GMT-0800 (Pacific Standard Time)">18:19</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: he&#039;ll know who to talk to</td></tr>
  <tr class="msg" id="L203"><td class="ts-cell"><a class="ts" href="#L203" alt="Tue Jan 20 2015 10:19:05 GMT-0800 (Pacific Standard Time)">18:19</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Ta!</td></tr>
  <tr class="msg" id="L204"><td class="ts-cell"><a class="ts" href="#L204" alt="Tue Jan 20 2015 10:25:31 GMT-0800 (Pacific Standard Time)">18:25</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: <a href="https://github.com/slightlyoff/ServiceWorker/issues/609">https://github.com/slightlyoff/ServiceWorker/issues/609</a></td></tr>
  <tr class="msg" id="L205"><td class="ts-cell"><a class="ts" href="#L205" alt="Tue Jan 20 2015 10:25:49 GMT-0800 (Pacific Standard Time)">18:25</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">navigator.serviceWorker.onmessage seems to fit</td></tr>
  <tr class="msg" id="L206"><td class="ts-cell"><a class="ts" href="#L206" alt="Tue Jan 20 2015 12:08:04 GMT-0800 (Pacific Standard Time)">20:08</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">annevk: I managed to confuse myself about &quot;queue a task&quot; and microtasks and such again. What do you think would happen in the following?</td></tr>
  <tr class="msg" id="L207"><td class="ts-cell"><a class="ts" href="#L207" alt="Tue Jan 20 2015 12:08:48 GMT-0800 (Pacific Standard Time)">20:08</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">1. Queue a task to: 1a. resolve the promise p; 1b. fire an event named &quot;foo&quot;. Given that I&#039;ve registered a fulfillment handler on p and a listener for &quot;foo&quot;, which fires first?</td></tr>
  <tr class="msg" id="L208"><td class="ts-cell"><a class="ts" href="#L208" alt="Tue Jan 20 2015 12:09:26 GMT-0800 (Pacific Standard Time)">20:09</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell">I think the listener</td></tr>
  <tr class="msg" id="L209"><td class="ts-cell"><a class="ts" href="#L209" alt="Tue Jan 20 2015 12:09:27 GMT-0800 (Pacific Standard Time)">20:09</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">At first I thought it&#039;d be &quot;foo&quot; first since events are &quot;synchronous&quot;. But then I thought it&#039;d be p first since microtasks fire whenever you transition from UA code to user code.</td></tr>
  <tr class="msg" id="L210"><td class="ts-cell"><a class="ts" href="#L210" alt="Tue Jan 20 2015 12:09:34 GMT-0800 (Pacific Standard Time)">20:09</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">hmm</td></tr>
  <tr class="msg" id="L211"><td class="ts-cell"><a class="ts" href="#L211" alt="Tue Jan 20 2015 12:09:43 GMT-0800 (Pacific Standard Time)">20:09</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell">But I have no idea how microtasks work</td></tr>
  <tr class="msg" id="L212"><td class="ts-cell"><a class="ts" href="#L212" alt="Tue Jan 20 2015 12:10:00 GMT-0800 (Pacific Standard Time)">20:10</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell">Do they fire before calling event handlers?</td></tr>
  <tr class="msg" id="L213"><td class="ts-cell"><a class="ts" href="#L213" alt="Tue Jan 20 2015 12:10:20 GMT-0800 (Pacific Standard Time)">20:10</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell">Presumably not, because then you could sniff whether there are event handlers attached for some type</td></tr>
  <tr class="msg" id="L214"><td class="ts-cell"><a class="ts" href="#L214" alt="Tue Jan 20 2015 12:10:21 GMT-0800 (Pacific Standard Time)">20:10</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">I ... think so. This might start falling into the unspecced areas :-/. Hixie do you know?</td></tr>
  <tr class="msg" id="L215"><td class="ts-cell"><a class="ts" href="#L215" alt="Tue Jan 20 2015 12:19:18 GMT-0800 (Pacific Standard Time)">20:19</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=Hixie@irc>Hixie</span>&gt;</td><td class="msg-cell">Domenic: no microtasks would fire in that case until the first script for the first event listener returned, iirc</td></tr>
  <tr class="msg" id="L216"><td class="ts-cell"><a class="ts" href="#L216" alt="Tue Jan 20 2015 12:20:10 GMT-0800 (Pacific Standard Time)">20:20</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">Hixie: hmm OK. So saying &quot;microtasks fire whenever transitioning from UA code to user code&quot; is not really correct of me to say then. That&#039;s good to know.</td></tr>
  <tr class="msg" id="L217"><td class="ts-cell"><a class="ts" href="#L217" alt="Tue Jan 20 2015 12:30:23 GMT-0800 (Pacific Standard Time)">20:30</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=Hixie@irc>Hixie</span>&gt;</td><td class="msg-cell">no it&#039;s much more specific than that</td></tr>
  <tr class="msg" id="L218"><td class="ts-cell"><a class="ts" href="#L218" alt="Tue Jan 20 2015 13:39:56 GMT-0800 (Pacific Standard Time)">21:39</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Domenic: the event goes first</td></tr>
  <tr class="msg" id="L219"><td class="ts-cell"><a class="ts" href="#L219" alt="Tue Jan 20 2015 13:40:20 GMT-0800 (Pacific Standard Time)">21:40</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Domenic: microtasks run end-of-task</td></tr>
  <tr class="msg" id="L220"><td class="ts-cell"><a class="ts" href="#L220" alt="Tue Jan 20 2015 13:40:45 GMT-0800 (Pacific Standard Time)">21:40</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">got it :)</td></tr>
  <tr class="msg" id="L221"><td class="ts-cell"><a class="ts" href="#L221" alt="Tue Jan 20 2015 14:10:25 GMT-0800 (Pacific Standard Time)">22:10</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell">annevk, a few changes for you in <a href="https://critic.hoppipolla.co.uk/r/3723">https://critic.hoppipolla.co.uk/r/3723</a></td></tr>
  <tr class="msg" id="L222"><td class="ts-cell"><a class="ts" href="#L222" alt="Tue Jan 20 2015 14:44:35 GMT-0800 (Pacific Standard Time)">22:44</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell">zcorpan, fyi <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1122897">https://bugzilla.mozilla.org/show_bug.cgi?id=1122897</a></td></tr>
  <tr class="msg" id="L223"><td class="ts-cell"><a class="ts" href="#L223" alt="Tue Jan 20 2015 15:17:32 GMT-0800 (Pacific Standard Time)">23:17</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=Hixie@irc>Hixie</span>&gt;</td><td class="msg-cell">annevk: microtasks also run end-of-script</td></tr>
  <tr class="msg" id="L224"><td class="ts-cell"><a class="ts" href="#L224" alt="Tue Jan 20 2015 15:17:42 GMT-0800 (Pacific Standard Time)">23:17</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=Hixie@irc>Hixie</span>&gt;</td><td class="msg-cell">annevk: are you sure they wouldn&#039;t run between two event listeners here?</td></tr>
  <tr class="msg" id="L225"><td class="ts-cell"><a class="ts" href="#L225" alt="Tue Jan 20 2015 15:18:06 GMT-0800 (Pacific Standard Time)">23:18</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</td><td class="msg-cell">They should run between event listeners, I think.  (I could easily be wrong.)</td></tr>
  <tr class="msg" id="L226"><td class="ts-cell"><a class="ts" href="#L226" alt="Tue Jan 20 2015 15:38:19 GMT-0800 (Pacific Standard Time)">23:38</a></td><td class="nick-cell"><span class="nick nick-14" title=smaug____@irc>smaug____</span></td><td class="msg-cell">is missing the context, but if there isn&#039;t any other script on stack when event listeners run, microtasks run between them</td></tr>
  <tr class="msg" id="L227"><td class="ts-cell"><a class="ts" href="#L227" alt="Tue Jan 20 2015 15:39:49 GMT-0800 (Pacific Standard Time)">23:39</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=Hixie@irc>Hixie</span>&gt;</td><td class="msg-cell">right</td></tr>
  <tr class="msg" id="L228"><td class="ts-cell"><a class="ts" href="#L228" alt="Tue Jan 20 2015 15:40:12 GMT-0800 (Pacific Standard Time)">23:40</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=Hixie@irc>Hixie</span>&gt;</td><td class="msg-cell">in conclusion, Domenic, resolving the promise and then firing an event is going to lead to weird behaviour</td></tr>
  <tr class="msg" id="L229"><td class="ts-cell"><a class="ts" href="#L229" alt="Tue Jan 20 2015 15:40:30 GMT-0800 (Pacific Standard Time)">23:40</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">yep</td></tr>
  <tr class="msg" id="L230"><td class="ts-cell"><a class="ts" href="#L230" alt="Tue Jan 20 2015 15:40:33 GMT-0800 (Pacific Standard Time)">23:40</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=Hixie@irc>Hixie</span>&gt;</td><td class="msg-cell">Domenic: you might be better off resolving then queueing a task to fire the event, or resolving then running microtasks then firing the event</td></tr>
  <tr class="msg" id="L231"><td class="ts-cell"><a class="ts" href="#L231" alt="Tue Jan 20 2015 15:40:37 GMT-0800 (Pacific Standard Time)">23:40</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=Hixie@irc>Hixie</span>&gt;</td><td class="msg-cell">or not firing the event at all</td></tr>
  <tr class="msg" id="L232"><td class="ts-cell"><a class="ts" href="#L232" alt="Tue Jan 20 2015 15:41:13 GMT-0800 (Pacific Standard Time)">23:41</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">Yeah the current plan is actually just &quot;when p fulfills, fire an event named &#039;foo&#039;&quot;</td></tr>
  <tr class="msg" id="L233"><td class="ts-cell"><a class="ts" href="#L233" alt="Tue Jan 20 2015 15:41:50 GMT-0800 (Pacific Standard Time)">23:41</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=Hixie@irc>Hixie</span>&gt;</td><td class="msg-cell">is &quot;fulfills&quot; defined?</td></tr>
  <tr class="msg" id="L234"><td class="ts-cell"><a class="ts" href="#L234" alt="Tue Jan 20 2015 15:41:59 GMT-0800 (Pacific Standard Time)">23:41</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=Hixie@irc>Hixie</span>&gt;</td><td class="msg-cell">like, what does that mean?</td></tr>
  <tr class="msg" id="L235"><td class="ts-cell"><a class="ts" href="#L235" alt="Tue Jan 20 2015 15:43:26 GMT-0800 (Pacific Standard Time)">23:43</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell"><a href="http://www.w3.org/2001/tag/doc/promises-guide#shorthand-reacting">http://www.w3.org/2001/tag/doc/promises-guide#shorthand-reacting</a></td></tr>
  <tr class="msg" id="L236"><td class="ts-cell"><a class="ts" href="#L236" alt="Tue Jan 20 2015 15:50:38 GMT-0800 (Pacific Standard Time)">23:50</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=Hixie@irc>Hixie</span>&gt;</td><td class="msg-cell">i don&#039;t understand</td></tr>
  <tr class="msg" id="L237"><td class="ts-cell"><a class="ts" href="#L237" alt="Tue Jan 20 2015 15:50:53 GMT-0800 (Pacific Standard Time)">23:50</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=Hixie@irc>Hixie</span>&gt;</td><td class="msg-cell">&quot;fire an event&quot; isn&#039;t a function</td></tr>
  <tr class="msg" id="L238"><td class="ts-cell"><a class="ts" href="#L238" alt="Tue Jan 20 2015 15:51:09 GMT-0800 (Pacific Standard Time)">23:51</a></td><td class="nick-cell">&lt;<span class="nick nick-14" title=Hixie@irc>Hixie</span>&gt;</td><td class="msg-cell">you can&#039;t really define prose-given requirements in terms of javascript code</td></tr>
</tbody></table>
</div></div></div></body>
