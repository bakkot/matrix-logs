<!doctype html>
<head>
  <title>#whatwg on 2015-04-05</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#whatwg<br>2015-04-05<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2015-04-04" class="nav-link"><span>prev</span></a>
<a href="2015-04-06" class="nav-link"><span style="float:right">next</span></a>
</div>
    
<div class="room-list-wrapper">Active:<br>
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/">WHATWG</a></li>
</ul>
</div>
<br>
<div class="room-list-wrapper">Historical:<br>
<ul class="room-list">
<li><a href="../irc-tc39/">#tc39</a></li>
<li><a href="../irc-tc39-delegates/">#tc39-delegates</a></li>
<li><a href="../irc-tc39-editor-group/">#tc39-editor-group</a></li>
<li><a href="../irc-whatwg/" class="current-room">#whatwg</a></li>
</ul>
</div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>
<input type="text" id="query" size=25 placeholder="Search #whatwg">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Sun Apr 05 2015 04:11:49 GMT-0700 (Pacific Daylight Time)">11:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: I&#039;m cleaning up the SW issue list a bit</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Sun Apr 05 2015 04:12:06 GMT-0700 (Pacific Daylight Time)">11:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: in particular those issues referenced from Fetch that should probably move elsewhere</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Sun Apr 05 2015 04:30:14 GMT-0700 (Pacific Daylight Time)">11:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">annevk: cool, will have a crawl through them on Tuesday too</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Sun Apr 05 2015 05:29:58 GMT-0700 (Pacific Daylight Time)">12:29</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-12" title=annevk@irc>annevk</span></div></td><td class="msg-cell">is trying to figure out IRC urls... irc://<a href="http://freenode.net:6697/whatwg">freenode.net:6697/whatwg</a> look good?</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Sun Apr 05 2015 05:30:35 GMT-0700 (Pacific Daylight Time)">12:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">I sort of want to encourage SSL, but there doesn&#039;t seem to be ircs...</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Sun Apr 05 2015 05:32:13 GMT-0700 (Pacific Daylight Time)">12:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Hmm, there&#039;s a draft <a href="https://tools.ietf.org/html/draft-butcher-irc-url-04#section-2.1">https://tools.ietf.org/html/draft-butcher-irc-url-04#section-2.1</a> that does define &quot;ircs&quot;, but nothing that&#039;s an RFC afaict</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Sun Apr 05 2015 05:51:33 GMT-0700 (Pacific Daylight Time)">12:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">annevk: Freenode has SSL on port 7000</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Sun Apr 05 2015 05:54:11 GMT-0700 (Pacific Daylight Time)">12:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell"><a href="https://en.wikipedia.org/wiki/Template:Freenode#Example">https://en.wikipedia.org/wiki/Template:Freenode#Example</a></td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Sun Apr 05 2015 05:54:17 GMT-0700 (Pacific Daylight Time)">12:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">irc://<a href="http://irc.freenode.net/#wikipedia-en">irc.freenode.net/#wikipedia-en</a></td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Sun Apr 05 2015 05:54:26 GMT-0700 (Pacific Daylight Time)">12:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">Looks right yeah</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Sun Apr 05 2015 07:10:54 GMT-0700 (Pacific Daylight Time)">14:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Krinkle: yeah, except ircs:// doesn&#039;t work :-(</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Sun Apr 05 2015 07:11:23 GMT-0700 (Pacific Daylight Time)">14:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Krinkle: btw, did my reply to your storage email help?</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Sun Apr 05 2015 07:11:33 GMT-0700 (Pacific Daylight Time)">14:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">Right. When opening it in an IRC client you&#039;d need a way to tell the app to use SSL.</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Sun Apr 05 2015 07:11:42 GMT-0700 (Pacific Daylight Time)">14:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">In LimeChat there&#039;s a checkbox for it.</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Sun Apr 05 2015 07:11:57 GMT-0700 (Pacific Daylight Time)">14:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">I don&#039;t think there&#039;s a way to programmatically set that based on a url.</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Sun Apr 05 2015 07:12:03 GMT-0700 (Pacific Daylight Time)">14:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">ircs makes sense.</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Sun Apr 05 2015 07:12:07 GMT-0700 (Pacific Daylight Time)">14:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">annevk: Yep.</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Sun Apr 05 2015 07:12:21 GMT-0700 (Pacific Daylight Time)">14:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Krinkle: <a href="https://wiki.whatwg.org/wiki/Storage">https://wiki.whatwg.org/wiki/Storage</a> has some v2 markers now, planning on elaborating a bit in the next couple weeks</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Sun Apr 05 2015 07:13:09 GMT-0700 (Pacific Daylight Time)">14:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">The current situation is indeed rather messy and if we want to be competitive we should address that</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Sun Apr 05 2015 07:13:34 GMT-0700 (Pacific Daylight Time)">14:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">Yeah, our native app doesn&#039;t have these issues for instance.</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Sun Apr 05 2015 07:13:49 GMT-0700 (Pacific Daylight Time)">14:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">Not that that&#039;s really a solution either. But from a dev perspective it&#039;s great</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Sun Apr 05 2015 07:13:56 GMT-0700 (Pacific Daylight Time)">14:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">not have to deal with a limit</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Sun Apr 05 2015 07:15:15 GMT-0700 (Pacific Daylight Time)">14:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Krinkle: another thing I was interested in is how Wikipedia plans on addressing its issues with having multiple origins for locales</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Sun Apr 05 2015 07:15:42 GMT-0700 (Pacific Daylight Time)">14:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">At the moment that&#039;s not really a concern to us.</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Sun Apr 05 2015 07:15:43 GMT-0700 (Pacific Daylight Time)">14:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Krinkle: it seems like if e.g. Wikipedia gets a location-based service of sorts you&#039;d want users to have to opt into that only once</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Sun Apr 05 2015 07:15:47 GMT-0700 (Pacific Daylight Time)">14:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">They&#039;re independent websites.</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Sun Apr 05 2015 07:16:00 GMT-0700 (Pacific Daylight Time)">14:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">separate content, communities and user priviledges.</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Sun Apr 05 2015 07:16:03 GMT-0700 (Pacific Daylight Time)">14:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">not translations.</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Sun Apr 05 2015 07:16:19 GMT-0700 (Pacific Daylight Time)">14:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Krinkle: nothing is automated between them?</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Sun Apr 05 2015 07:16:25 GMT-0700 (Pacific Daylight Time)">14:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">okay</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Sun Apr 05 2015 07:16:32 GMT-0700 (Pacific Daylight Time)">14:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">Of course, they&#039;re all hosted by the same foundation. And we share the source code (differnet configuration loads based on http hostname).</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Sun Apr 05 2015 07:17:08 GMT-0700 (Pacific Daylight Time)">14:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">But lots of version and plugin differences do exist, so we currently dont&#039; share anything client-side.</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Sun Apr 05 2015 07:17:27 GMT-0700 (Pacific Daylight Time)">14:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">Many modules (e.g. jquery ui) can vary based on language and skin.</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Sun Apr 05 2015 07:17:38 GMT-0700 (Pacific Daylight Time)">14:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Interesting</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Sun Apr 05 2015 07:17:55 GMT-0700 (Pacific Daylight Time)">14:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">The cookieless domain <a href="http://bits.wikimedia.org">bits.wikimedia.org</a> is what serves most static resources from a hostname subdirectory.</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Sun Apr 05 2015 07:18:00 GMT-0700 (Pacific Daylight Time)">14:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">virtual, not on disk.</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Sun Apr 05 2015 07:18:41 GMT-0700 (Pacific Daylight Time)">14:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">But the localStorage system is indeed occopying the actual userfacing website origin (e.g. <a href="http://en.wikipedia.org">en.wikipedia.org</a>, not bits.wm.o)</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Sun Apr 05 2015 07:19:07 GMT-0700 (Pacific Daylight Time)">14:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">Which causes other plugins and power-user apps to fail sometimes due to space conflicts.</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Sun Apr 05 2015 07:19:12 GMT-0700 (Pacific Daylight Time)">14:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">We have not solved this as of yet.</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Sun Apr 05 2015 07:20:23 GMT-0700 (Pacific Daylight Time)">14:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">Other than to basically reject anything that uses localStorage and defer to other storage areas instead, which sucks.</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Sun Apr 05 2015 07:20:47 GMT-0700 (Pacific Daylight Time)">14:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">We even had to revert some code that switches from cookies to localstorage  where it made sense. But didn&#039;t work (e.g. hide-banner and boolean stuff like that)</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Sun Apr 05 2015 07:20:59 GMT-0700 (Pacific Daylight Time)">14:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">so those are back in cookies at the moment.</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Sun Apr 05 2015 07:21:19 GMT-0700 (Pacific Daylight Time)">14:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">We&#039;ll probably move a the js/css module storage  to IndexDB which nobody uses.</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Sun Apr 05 2015 07:21:36 GMT-0700 (Pacific Daylight Time)">14:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">:-)</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Sun Apr 05 2015 07:22:28 GMT-0700 (Pacific Daylight Time)">14:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Krinkle: so we are planning on putting all storage APIs into the same bucket so that might not help you much</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Sun Apr 05 2015 07:22:51 GMT-0700 (Pacific Daylight Time)">14:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Krinkle: but maybe having multiple buckets per site will help</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Sun Apr 05 2015 07:22:55 GMT-0700 (Pacific Daylight Time)">14:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">There would have to be some way to limit the size or priority of a sub-bucket.</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Sun Apr 05 2015 07:23:09 GMT-0700 (Pacific Daylight Time)">14:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">like a namespace of sorts</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Sun Apr 05 2015 07:23:38 GMT-0700 (Pacific Daylight Time)">14:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">storage = Storage.instance(&#039;&lt;rfee key&gt;&#039;, { prio: -2 });</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Sun Apr 05 2015 07:23:42 GMT-0700 (Pacific Daylight Time)">14:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">just thinking out loud</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Sun Apr 05 2015 07:23:48 GMT-0700 (Pacific Daylight Time)">14:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Yeah, the idea is to have names that you can use with IDB and the Cache API (not sure it can work for localStorage)</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Sun Apr 05 2015 07:23:49 GMT-0700 (Pacific Daylight Time)">14:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">it would create it ondemand, and re-configure if pre-existing.</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Sun Apr 05 2015 07:24:35 GMT-0700 (Pacific Daylight Time)">14:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">And yeah, then use LRU across all buckets meaning often used buckets get cleared less</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Sun Apr 05 2015 07:25:05 GMT-0700 (Pacific Daylight Time)">14:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">ideally we&#039;d have LRU within a bucket as well.</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Sun Apr 05 2015 07:25:25 GMT-0700 (Pacific Daylight Time)">14:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">And the other idea is having an LRU variant of the Cache API. Allowing you to store static resources there. And then the browser could do global reasoning about all LRU Cache APIs...</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Sun Apr 05 2015 07:25:31 GMT-0700 (Pacific Daylight Time)">14:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">So that if a user visited the patrol app once but never comes back, it&#039;ll drop off eventually</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Sun Apr 05 2015 07:25:53 GMT-0700 (Pacific Daylight Time)">14:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Yeah, basically that</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Sun Apr 05 2015 07:26:38 GMT-0700 (Pacific Daylight Time)">14:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">is there actually structure between origins recognised? I forget.</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Sun Apr 05 2015 07:26:50 GMT-0700 (Pacific Daylight Time)">14:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">e.g. could we hack up a <a href="http://modules.en.wikipedia.org">modules.en.wikipedia.org</a> and access that from <a href="http://en.wikipedia.org">en.wikipedia.org</a></td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Sun Apr 05 2015 07:26:50 GMT-0700 (Pacific Daylight Time)">14:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">:P</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Sun Apr 05 2015 07:27:00 GMT-0700 (Pacific Daylight Time)">14:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">for storage only</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Sun Apr 05 2015 07:27:11 GMT-0700 (Pacific Daylight Time)">14:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Through an &lt;iframe&gt;</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Sun Apr 05 2015 07:27:16 GMT-0700 (Pacific Daylight Time)">14:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">Right</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Sun Apr 05 2015 07:27:25 GMT-0700 (Pacific Daylight Time)">14:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">If the user doesn&#039;t disable third-party cookies...</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Sun Apr 05 2015 07:27:32 GMT-0700 (Pacific Daylight Time)">14:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">&quot;cookies&quot;</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Sun Apr 05 2015 07:28:07 GMT-0700 (Pacific Daylight Time)">14:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Well yeah, again that&#039;s something we don&#039;t do well currently, but cookies need to be grouped together with all the other storage bits for these settings to have the effect the user expects</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Sun Apr 05 2015 07:28:18 GMT-0700 (Pacific Daylight Time)">14:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">pumping 4-10 MB of serialised js/css/images through an iframe doesn&#039;t sound great though :D</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Sun Apr 05 2015 07:28:36 GMT-0700 (Pacific Daylight Time)">14:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">Yeah</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Sun Apr 05 2015 07:28:42 GMT-0700 (Pacific Daylight Time)">14:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">cookies is what users know</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Sun Apr 05 2015 07:28:48 GMT-0700 (Pacific Daylight Time)">14:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">at least the few users that are aware of it</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Sun Apr 05 2015 07:28:53 GMT-0700 (Pacific Daylight Time)">14:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">that&#039;s the customer facing term</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Sun Apr 05 2015 07:28:59 GMT-0700 (Pacific Daylight Time)">14:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">The one other thing that&#039;s a bit unclear still is what the scope of storage is. eTLD+1 or origin. And we might want to make it different for &quot;best effort&quot; vs &quot;persistent&quot;...</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Sun Apr 05 2015 07:29:07 GMT-0700 (Pacific Daylight Time)">14:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Yup</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Sun Apr 05 2015 07:30:30 GMT-0700 (Pacific Daylight Time)">14:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Yeah, so tentative plan is persistent, multiple buckets, and a LRU API, and then see if that works...</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Sun Apr 05 2015 07:30:46 GMT-0700 (Pacific Daylight Time)">14:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">an LRU I guess?</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Sun Apr 05 2015 07:33:39 GMT-0700 (Pacific Daylight Time)">14:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">LRU cache is what I tend to say</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Sun Apr 05 2015 07:34:01 GMT-0700 (Pacific Daylight Time)">14:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">Though it&#039;d be interesting to see if there is usecase for multiple cache algorythms.</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Sun Apr 05 2015 07:34:11 GMT-0700 (Pacific Daylight Time)">14:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">But I guess it&#039;s best to not bloat</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Sun Apr 05 2015 07:34:23 GMT-0700 (Pacific Daylight Time)">14:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">instead provide a way for users to build their own if needed.</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Sun Apr 05 2015 07:35:07 GMT-0700 (Pacific Daylight Time)">14:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">perhaps service worker can be authorised to routinely kick in and evaluate cache content based on some logic.</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Sun Apr 05 2015 07:35:50 GMT-0700 (Pacific Daylight Time)">14:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">with native being told it&#039;s &quot;persistent&quot; but it will loop through and clear things based on its own logic</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Sun Apr 05 2015 07:35:53 GMT-0700 (Pacific Daylight Time)">14:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">There&#039;s a proposal for an eviction event of sorts, but based on other systems that tried you probably want something like /tmp instead</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Sun Apr 05 2015 07:36:48 GMT-0700 (Pacific Daylight Time)">14:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">At the moment you need to clear having to ask a dozen apps is not deal</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Sun Apr 05 2015 07:36:52 GMT-0700 (Pacific Daylight Time)">14:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">ideal*</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Sun Apr 05 2015 07:38:19 GMT-0700 (Pacific Daylight Time)">14:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">yeah</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Sun Apr 05 2015 07:38:42 GMT-0700 (Pacific Daylight Time)">14:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=Krinkle@irc>Krinkle</span>&gt;</div></td><td class="msg-cell">definitely not on the main thread synchronous</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Sun Apr 05 2015 08:07:23 GMT-0700 (Pacific Daylight Time)">15:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=zewt@irc>zewt</span>&gt;</div></td><td class="msg-cell">also evictable storage might be managed by something outside of the browser, eg. on mobile</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Sun Apr 05 2015 10:09:46 GMT-0700 (Pacific Daylight Time)">17:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: instead of a storage pressure event, what do you think about at least exposing a &quot;systemStoragePressure&quot; boolean attribute on StorageManager.</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Sun Apr 05 2015 10:10:17 GMT-0700 (Pacific Daylight Time)">17:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: what does that mean?</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Sun Apr 05 2015 10:10:54 GMT-0700 (Pacific Daylight Time)">17:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: instead of firing storage pressure events at origins... allow the origin to opt-in, check that storage pressure state, and manually free stuff when its running anyway</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Sun Apr 05 2015 10:11:13 GMT-0700 (Pacific Daylight Time)">17:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">I dunno... it was just an idea I had the other day</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Sun Apr 05 2015 10:11:18 GMT-0700 (Pacific Daylight Time)">17:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">not sure it makes sense</td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Sun Apr 05 2015 10:11:54 GMT-0700 (Pacific Daylight Time)">17:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">the app might just want to do something different if the overall system disk is almost full to avoid having itself get deleted</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Sun Apr 05 2015 10:12:14 GMT-0700 (Pacific Daylight Time)">17:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">but we don&#039;t spin up the app automatically to handle it, etc</td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Sun Apr 05 2015 10:12:26 GMT-0700 (Pacific Daylight Time)">17:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">its probably a bad idea</td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Sun Apr 05 2015 10:14:50 GMT-0700 (Pacific Daylight Time)">17:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: I would imagine a sensible application would already do everything it can to keep storage low</td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Sun Apr 05 2015 10:15:13 GMT-0700 (Pacific Daylight Time)">17:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: that&#039;s another reason I&#039;m somewhat skeptical about this event</td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Sun Apr 05 2015 10:15:50 GMT-0700 (Pacific Daylight Time)">17:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: gigantic apps will be at the top of the list for the user to remove, you&#039;d try hard not to end up there</td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Sun Apr 05 2015 10:15:55 GMT-0700 (Pacific Daylight Time)">17:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: I guess I was more observing that the current &quot;getEstimate&quot; API we have only provides info on the origin&#039;s quota/storage vs overall system state...  might be nice to include something about if the system is under pressure there</td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Sun Apr 05 2015 10:16:46 GMT-0700 (Pacific Daylight Time)">17:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: telling the app about the user&#039;s hard drive might be tricky, but maybe if the user opts into persistent mode we could expose a bit more stuff?</td></tr>
  <tr class="msg" id="L100"><td class="ts-cell"><a class="ts" href="#L100" alt="Sun Apr 05 2015 10:17:27 GMT-0700 (Pacific Daylight Time)">17:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: I&#039;m not talking about exact amounts for the system... just a &quot;system low on disk space&quot; signal</td></tr>
  <tr class="msg" id="L101"><td class="ts-cell"><a class="ts" href="#L101" alt="Sun Apr 05 2015 10:17:42 GMT-0700 (Pacific Daylight Time)">17:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">I&#039;m happy to leave that off for now</td></tr>
  <tr class="msg" id="L102"><td class="ts-cell"><a class="ts" href="#L102" alt="Sun Apr 05 2015 10:18:17 GMT-0700 (Pacific Daylight Time)">17:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: yeah might be interesting to have a 80%-90% full indication</td></tr>
  <tr class="msg" id="L103"><td class="ts-cell"><a class="ts" href="#L103" alt="Sun Apr 05 2015 10:18:44 GMT-0700 (Pacific Daylight Time)">17:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: though with persistent you&#039;d probably get to see that amount anyway unless the user agent caps it, we haven&#039;t really discussed the finer details of that</td></tr>
  <tr class="msg" id="L104"><td class="ts-cell"><a class="ts" href="#L104" alt="Sun Apr 05 2015 10:18:59 GMT-0700 (Pacific Daylight Time)">17:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: if nothing else, this could be a compromise with people who want a storage pressure event</td></tr>
  <tr class="msg" id="L105"><td class="ts-cell"><a class="ts" href="#L105" alt="Sun Apr 05 2015 10:19:31 GMT-0700 (Pacific Daylight Time)">17:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: my plan is to write a slightly more detailed model of the existing and proposed architecture somewhere next week</td></tr>
  <tr class="msg" id="L106"><td class="ts-cell"><a class="ts" href="#L106" alt="Sun Apr 05 2015 10:20:06 GMT-0700 (Pacific Daylight Time)">17:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">cool</td></tr>
  <tr class="msg" id="L107"><td class="ts-cell"><a class="ts" href="#L107" alt="Sun Apr 05 2015 10:20:14 GMT-0700 (Pacific Daylight Time)">17:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">I&#039;m going to be focusing on streams this week, I think</td></tr>
  <tr class="msg" id="L108"><td class="ts-cell"><a class="ts" href="#L108" alt="Sun Apr 05 2015 10:22:06 GMT-0700 (Pacific Daylight Time)">17:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">yay</td></tr>
  <tr class="msg" id="L109"><td class="ts-cell"><a class="ts" href="#L109" alt="Sun Apr 05 2015 10:22:28 GMT-0700 (Pacific Daylight Time)">17:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: quite happy you&#039;re reviewing the proposed Fetch integration</td></tr>
  <tr class="msg" id="L110"><td class="ts-cell"><a class="ts" href="#L110" alt="Sun Apr 05 2015 10:22:57 GMT-0700 (Pacific Daylight Time)">17:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: wish I had time to do it earlier!</td></tr>
  <tr class="msg" id="L111"><td class="ts-cell"><a class="ts" href="#L111" alt="Sun Apr 05 2015 10:23:11 GMT-0700 (Pacific Daylight Time)">17:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: are there existing cases of that GC behavior that is proposed?</td></tr>
  <tr class="msg" id="L112"><td class="ts-cell"><a class="ts" href="#L112" alt="Sun Apr 05 2015 10:23:28 GMT-0700 (Pacific Daylight Time)">17:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">make some DOM call, and then system resources are potentially leaked forever</td></tr>
  <tr class="msg" id="L113"><td class="ts-cell"><a class="ts" href="#L113" alt="Sun Apr 05 2015 10:24:18 GMT-0700 (Pacific Daylight Time)">17:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: I missed that, does forever mean until you close the tab?</td></tr>
  <tr class="msg" id="L114"><td class="ts-cell"><a class="ts" href="#L114" alt="Sun Apr 05 2015 10:24:42 GMT-0700 (Pacific Daylight Time)">17:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">(there&#039;s a lot of that)</td></tr>
  <tr class="msg" id="L115"><td class="ts-cell"><a class="ts" href="#L115" alt="Sun Apr 05 2015 10:24:48 GMT-0700 (Pacific Daylight Time)">17:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: it explicitly says if you do response.body.getReadable() then the UA cannot terminate the fetch</td></tr>
  <tr class="msg" id="L116"><td class="ts-cell"><a class="ts" href="#L116" alt="Sun Apr 05 2015 10:24:59 GMT-0700 (Pacific Daylight Time)">17:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">cannot terminate the fetch due to GC</td></tr>
  <tr class="msg" id="L117"><td class="ts-cell"><a class="ts" href="#L117" alt="Sun Apr 05 2015 10:25:26 GMT-0700 (Pacific Daylight Time)">17:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: oh that makes sense, but closing the tab would not be GC</td></tr>
  <tr class="msg" id="L118"><td class="ts-cell"><a class="ts" href="#L118" alt="Sun Apr 05 2015 10:25:57 GMT-0700 (Pacific Daylight Time)">17:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: closing the tab is akin to &quot;end-user abort&quot;</td></tr>
  <tr class="msg" id="L119"><td class="ts-cell"><a class="ts" href="#L119" alt="Sun Apr 05 2015 10:26:27 GMT-0700 (Pacific Daylight Time)">17:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: I guess I&#039;m worried on the stream just blocking on back pressure (because no one is actually reading) and then it just doesn&#039;t close until the tab closes</td></tr>
  <tr class="msg" id="L120"><td class="ts-cell"><a class="ts" href="#L120" alt="Sun Apr 05 2015 10:26:31 GMT-0700 (Pacific Daylight Time)">17:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: I think WebSocket has a similar thing about not allowing the connection to be closed due to GC</td></tr>
  <tr class="msg" id="L121"><td class="ts-cell"><a class="ts" href="#L121" alt="Sun Apr 05 2015 10:26:53 GMT-0700 (Pacific Daylight Time)">17:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: and actually, even XMLHttpRequest has that: <a href="https://xhr.spec.whatwg.org/#garbage-collection">https://xhr.spec.whatwg.org/#garbage-collection</a></td></tr>
  <tr class="msg" id="L122"><td class="ts-cell"><a class="ts" href="#L122" alt="Sun Apr 05 2015 10:27:04 GMT-0700 (Pacific Daylight Time)">17:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: anything to avoid exposing GC</td></tr>
  <tr class="msg" id="L123"><td class="ts-cell"><a class="ts" href="#L123" alt="Sun Apr 05 2015 10:28:55 GMT-0700 (Pacific Daylight Time)">17:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Granted that this case is a little different, but still similar enough</td></tr>
  <tr class="msg" id="L124"><td class="ts-cell"><a class="ts" href="#L124" alt="Sun Apr 05 2015 10:29:27 GMT-0700 (Pacific Daylight Time)">17:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: hmm... but what if there was no close handler registered.... seems like it should be GC&#039;able then</td></tr>
  <tr class="msg" id="L125"><td class="ts-cell"><a class="ts" href="#L125" alt="Sun Apr 05 2015 10:29:31 GMT-0700 (Pacific Daylight Time)">17:29</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-12" title=annevk@irc>annevk</span></div></td><td class="msg-cell">was afraid momentarily that they were exposing GC</td></tr>
  <tr class="msg" id="L126"><td class="ts-cell"><a class="ts" href="#L126" alt="Sun Apr 05 2015 10:29:46 GMT-0700 (Pacific Daylight Time)">17:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: good to know that there is precedent, though</td></tr>
  <tr class="msg" id="L127"><td class="ts-cell"><a class="ts" href="#L127" alt="Sun Apr 05 2015 10:30:15 GMT-0700 (Pacific Daylight Time)">17:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: if there are no handlers that might be okay, though I think jsbell has a trick for that case</td></tr>
  <tr class="msg" id="L128"><td class="ts-cell"><a class="ts" href="#L128" alt="Sun Apr 05 2015 10:34:06 GMT-0700 (Pacific Daylight Time)">17:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: it seems the XHR spec says it must not be GC&#039;d only if it has an event handler set</td></tr>
  <tr class="msg" id="L129"><td class="ts-cell"><a class="ts" href="#L129" alt="Sun Apr 05 2015 10:35:02 GMT-0700 (Pacific Daylight Time)">17:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: yeah, I think jsbell&#039;s argument was that you could detect GC in such a case by having a side-channel open and logging the TCP closing time on the server</td></tr>
  <tr class="msg" id="L130"><td class="ts-cell"><a class="ts" href="#L130" alt="Sun Apr 05 2015 10:35:23 GMT-0700 (Pacific Daylight Time)">17:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: but I don&#039;t think any specification is concerned with that trick at the moment, not even WebSocket</td></tr>
  <tr class="msg" id="L131"><td class="ts-cell"><a class="ts" href="#L131" alt="Sun Apr 05 2015 10:35:34 GMT-0700 (Pacific Daylight Time)">17:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: uh... that sounds akin to saying &quot;you can detect GC by attaching with a debugger&quot;</td></tr>
  <tr class="msg" id="L132"><td class="ts-cell"><a class="ts" href="#L132" alt="Sun Apr 05 2015 10:35:34 GMT-0700 (Pacific Daylight Time)">17:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: so presumably streams shouldn&#039;t either</td></tr>
  <tr class="msg" id="L133"><td class="ts-cell"><a class="ts" href="#L133" alt="Sun Apr 05 2015 10:35:51 GMT-0700 (Pacific Daylight Time)">17:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: well except there&#039;s no debugger</td></tr>
  <tr class="msg" id="L134"><td class="ts-cell"><a class="ts" href="#L134" alt="Sun Apr 05 2015 10:37:11 GMT-0700 (Pacific Daylight Time)">17:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: do you know what Domenic meant by:   It&#039;s the same as if you allocate a large array buffer and then don&#039;t clean it up. You&#039;ve manually said &quot;I want this potentially-large resource to stick around.&quot;</td></tr>
  <tr class="msg" id="L135"><td class="ts-cell"><a class="ts" href="#L135" alt="Sun Apr 05 2015 10:37:16 GMT-0700 (Pacific Daylight Time)">17:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">do ArrayBuffers not GC??</td></tr>
  <tr class="msg" id="L136"><td class="ts-cell"><a class="ts" href="#L136" alt="Sun Apr 05 2015 10:37:48 GMT-0700 (Pacific Daylight Time)">17:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: I would expect them to GC just fine</td></tr>
  <tr class="msg" id="L137"><td class="ts-cell"><a class="ts" href="#L137" alt="Sun Apr 05 2015 10:38:14 GMT-0700 (Pacific Daylight Time)">17:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: I&#039;ve never heard anyone talk about magic GC abilities of ArrayBuffer</td></tr>
  <tr class="msg" id="L138"><td class="ts-cell"><a class="ts" href="#L138" alt="Sun Apr 05 2015 11:01:04 GMT-0700 (Pacific Daylight Time)">18:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: I don&#039;t understand the opaque response stuff well enough to comment on <a href="https://github.com/slightlyoff/ServiceWorker/issues/590#issuecomment-89757518">https://github.com/slightlyoff/ServiceWorker/issues/590#issuecomment-89757518</a></td></tr>
  <tr class="msg" id="L139"><td class="ts-cell"><a class="ts" href="#L139" alt="Sun Apr 05 2015 11:52:27 GMT-0700 (Pacific Daylight Time)">18:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: ping</td></tr>
  <tr class="msg" id="L140"><td class="ts-cell"><a class="ts" href="#L140" alt="Sun Apr 05 2015 11:52:55 GMT-0700 (Pacific Daylight Time)">18:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: pong</td></tr>
  <tr class="msg" id="L141"><td class="ts-cell"><a class="ts" href="#L141" alt="Sun Apr 05 2015 11:53:30 GMT-0700 (Pacific Daylight Time)">18:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: hi! I was reading this, but have a question <a href="https://github.com/yutakahirano/fetch-with-streams/issues/15">https://github.com/yutakahirano/fetch-with-streams/issues/15</a></td></tr>
  <tr class="msg" id="L142"><td class="ts-cell"><a class="ts" href="#L142" alt="Sun Apr 05 2015 11:54:00 GMT-0700 (Pacific Daylight Time)">18:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">there you wrote: &quot;The graph in this scenario is: resolve -&gt; foo.closedPromise. So even if author code stops using foo and we GC foo, foo.closedPromise is not GCed until the UA code frees resolve.&quot;</td></tr>
  <tr class="msg" id="L143"><td class="ts-cell"><a class="ts" href="#L143" alt="Sun Apr 05 2015 11:54:15 GMT-0700 (Pacific Daylight Time)">18:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: do you know who else I could ping?</td></tr>
  <tr class="msg" id="L144"><td class="ts-cell"><a class="ts" href="#L144" alt="Sun Apr 05 2015 11:54:31 GMT-0700 (Pacific Daylight Time)">18:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: doesn&#039;t the graph go the other way? foo.closePromise -&gt; resolve?  I don&#039;t see how resolve holds a ref to the promise</td></tr>
  <tr class="msg" id="L145"><td class="ts-cell"><a class="ts" href="#L145" alt="Sun Apr 05 2015 11:54:43 GMT-0700 (Pacific Daylight Time)">18:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: nsm is probably good</td></tr>
  <tr class="msg" id="L146"><td class="ts-cell"><a class="ts" href="#L146" alt="Sun Apr 05 2015 11:54:52 GMT-0700 (Pacific Daylight Time)">18:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: no, resolve holds the ability to change the state of closePromise</td></tr>
  <tr class="msg" id="L147"><td class="ts-cell"><a class="ts" href="#L147" alt="Sun Apr 05 2015 11:54:59 GMT-0700 (Pacific Daylight Time)">18:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">ta</td></tr>
  <tr class="msg" id="L148"><td class="ts-cell"><a class="ts" href="#L148" alt="Sun Apr 05 2015 11:55:03 GMT-0700 (Pacific Daylight Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">assume a function ResolvePromise(p, value)</td></tr>
  <tr class="msg" id="L149"><td class="ts-cell"><a class="ts" href="#L149" alt="Sun Apr 05 2015 11:55:10 GMT-0700 (Pacific Daylight Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">then resolve = ResolvePromise.bind(foo.closePromise)</td></tr>
  <tr class="msg" id="L150"><td class="ts-cell"><a class="ts" href="#L150" alt="Sun Apr 05 2015 11:55:22 GMT-0700 (Pacific Daylight Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">or, resolve = function (value) { ResolvePromise(foo.closePromise, value); }</td></tr>
  <tr class="msg" id="L151"><td class="ts-cell"><a class="ts" href="#L151" alt="Sun Apr 05 2015 11:55:29 GMT-0700 (Pacific Daylight Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">oh... resolve is set to a function, ok</td></tr>
  <tr class="msg" id="L152"><td class="ts-cell"><a class="ts" href="#L152" alt="Sun Apr 05 2015 11:55:39 GMT-0700 (Pacific Daylight Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">right, yeah</td></tr>
  <tr class="msg" id="L153"><td class="ts-cell"><a class="ts" href="#L153" alt="Sun Apr 05 2015 11:55:44 GMT-0700 (Pacific Daylight Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: this is pretty different from the c++ :-)</td></tr>
  <tr class="msg" id="L154"><td class="ts-cell"><a class="ts" href="#L154" alt="Sun Apr 05 2015 11:55:50 GMT-0700 (Pacific Daylight Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">welp :P</td></tr>
  <tr class="msg" id="L155"><td class="ts-cell"><a class="ts" href="#L155" alt="Sun Apr 05 2015 11:55:59 GMT-0700 (Pacific Daylight Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">In C++ I guess it would be a PromiseResolver object?</td></tr>
  <tr class="msg" id="L156"><td class="ts-cell"><a class="ts" href="#L156" alt="Sun Apr 05 2015 11:56:08 GMT-0700 (Pacific Daylight Time)">18:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">with resolve and reject methods, and a promise private field?</td></tr>
  <tr class="msg" id="L157"><td class="ts-cell"><a class="ts" href="#L157" alt="Sun Apr 05 2015 11:56:14 GMT-0700 (Pacific Daylight Time)">18:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I think what you are saying is we can GC the stream, but hold the promise alive</td></tr>
  <tr class="msg" id="L158"><td class="ts-cell"><a class="ts" href="#L158" alt="Sun Apr 05 2015 11:56:24 GMT-0700 (Pacific Daylight Time)">18:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: is that accurate?</td></tr>
  <tr class="msg" id="L159"><td class="ts-cell"><a class="ts" href="#L159" alt="Sun Apr 05 2015 11:56:38 GMT-0700 (Pacific Daylight Time)">18:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: right, I think that is what I am saying :P</td></tr>
  <tr class="msg" id="L160"><td class="ts-cell"><a class="ts" href="#L160" alt="Sun Apr 05 2015 11:56:43 GMT-0700 (Pacific Daylight Time)">18:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">this stuff gets confusing...</td></tr>
  <tr class="msg" id="L161"><td class="ts-cell"><a class="ts" href="#L161" alt="Sun Apr 05 2015 11:57:03 GMT-0700 (Pacific Daylight Time)">18:57</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-12" title=wanderview@irc>wanderview</span></div></td><td class="msg-cell">tries to find the point in the streams spec that says to resolve one of these promises.</td></tr>
  <tr class="msg" id="L162"><td class="ts-cell"><a class="ts" href="#L162" alt="Sun Apr 05 2015 11:57:57 GMT-0700 (Pacific Daylight Time)">18:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Ctrl+F &quot;Resolve reader@[[closedPromise]]&quot;</td></tr>
  <tr class="msg" id="L163"><td class="ts-cell"><a class="ts" href="#L163" alt="Sun Apr 05 2015 11:59:06 GMT-0700 (Pacific Daylight Time)">18:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Oh hey, found some dead code -_-</td></tr>
  <tr class="msg" id="L164"><td class="ts-cell"><a class="ts" href="#L164" alt="Sun Apr 05 2015 11:59:34 GMT-0700 (Pacific Daylight Time)">18:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: yea... CloseReadableStreamReader is not used any more?</td></tr>
  <tr class="msg" id="L165"><td class="ts-cell"><a class="ts" href="#L165" alt="Sun Apr 05 2015 11:59:43 GMT-0700 (Pacific Daylight Time)">18:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">yep X_X</td></tr>
  <tr class="msg" id="L166"><td class="ts-cell"><a class="ts" href="#L166" alt="Sun Apr 05 2015 11:59:45 GMT-0700 (Pacific Daylight Time)">18:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">killing it with fire</td></tr>
  <tr class="msg" id="L167"><td class="ts-cell"><a class="ts" href="#L167" alt="Sun Apr 05 2015 11:59:56 GMT-0700 (Pacific Daylight Time)">18:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wow it&#039;s even gone from the reference impl</td></tr>
  <tr class="msg" id="L168"><td class="ts-cell"><a class="ts" href="#L168" alt="Sun Apr 05 2015 12:00:55 GMT-0700 (Pacific Daylight Time)">19:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">I was like ... this code looks pretty similar ... couldn&#039;t I refactor it out into a shared operation? And then I saw why it was similar ... I already factored it elsewhere and forgot to delete the old one.</td></tr>
  <tr class="msg" id="L169"><td class="ts-cell"><a class="ts" href="#L169" alt="Sun Apr 05 2015 12:01:53 GMT-0700 (Pacific Daylight Time)">19:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: so... it seems to me the spec requires doing other things with the stream when that promise is resolved... I don&#039;t see anything that lets us handle it separately from the stream object for when the socket closes</td></tr>
  <tr class="msg" id="L170"><td class="ts-cell"><a class="ts" href="#L170" alt="Sun Apr 05 2015 12:02:18 GMT-0700 (Pacific Daylight Time)">19:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: not sure I understand the question/dillema...</td></tr>
  <tr class="msg" id="L171"><td class="ts-cell"><a class="ts" href="#L171" alt="Sun Apr 05 2015 12:03:06 GMT-0700 (Pacific Daylight Time)">19:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: I don&#039;t see anything that says &quot;when the socket closes, resolve the promise&quot;... the streams spec has us modifying state variables and other stuff on the stream object... which implies we cannot GC the stream object</td></tr>
  <tr class="msg" id="L172"><td class="ts-cell"><a class="ts" href="#L172" alt="Sun Apr 05 2015 12:03:59 GMT-0700 (Pacific Daylight Time)">19:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">wanderview: Right. You can close the socket and not call close(), i.e. not signal to the stream implementation that the stream itself should start acting closed</td></tr>
  <tr class="msg" id="L173"><td class="ts-cell"><a class="ts" href="#L173" alt="Sun Apr 05 2015 12:04:05 GMT-0700 (Pacific Daylight Time)">19:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: maybe its also just a conceptual issue for me... feels weird to say &quot;here is an object that represents the stream&quot;, but that object can be destroyed without actually closing the underlying stream</td></tr>
  <tr class="msg" id="L174"><td class="ts-cell"><a class="ts" href="#L174" alt="Sun Apr 05 2015 12:04:12 GMT-0700 (Pacific Daylight Time)">19:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">hmm</td></tr>
  <tr class="msg" id="L175"><td class="ts-cell"><a class="ts" href="#L175" alt="Sun Apr 05 2015 12:04:31 GMT-0700 (Pacific Daylight Time)">19:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">So my take is that this underlying source object is adapting the socket or whatever into a stream object that reflects the state of the socket</td></tr>
  <tr class="msg" id="L176"><td class="ts-cell"><a class="ts" href="#L176" alt="Sun Apr 05 2015 12:05:00 GMT-0700 (Pacific Daylight Time)">19:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">If the object goes away that doesn&#039;t necessarily mean the socket does, but it could if you want to set up a weak reference thingy to do so</td></tr>
  <tr class="msg" id="L177"><td class="ts-cell"><a class="ts" href="#L177" alt="Sun Apr 05 2015 12:05:06 GMT-0700 (Pacific Daylight Time)">19:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: but the fetch-with-streams doesn&#039;t define this &quot;socket or whatever&quot;, but implies we have to give the promise to it directly</td></tr>
  <tr class="msg" id="L178"><td class="ts-cell"><a class="ts" href="#L178" alt="Sun Apr 05 2015 12:05:33 GMT-0700 (Pacific Daylight Time)">19:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">right ... i&#039;m getting confused now :(</td></tr>
  <tr class="msg" id="L179"><td class="ts-cell"><a class="ts" href="#L179" alt="Sun Apr 05 2015 12:05:53 GMT-0700 (Pacific Daylight Time)">19:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">I have to go in a few minutes</td></tr>
  <tr class="msg" id="L180"><td class="ts-cell"><a class="ts" href="#L180" alt="Sun Apr 05 2015 12:06:12 GMT-0700 (Pacific Daylight Time)">19:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">ok, i probably should too. (why are we working on sunday? :P)</td></tr>
  <tr class="msg" id="L181"><td class="ts-cell"><a class="ts" href="#L181" alt="Sun Apr 05 2015 12:06:34 GMT-0700 (Pacific Daylight Time)">19:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">we can pick this up later ... i agree it&#039;s confusing and probably can be made clearer in fetch-with-streams</td></tr>
  <tr class="msg" id="L182"><td class="ts-cell"><a class="ts" href="#L182" alt="Sun Apr 05 2015 12:06:38 GMT-0700 (Pacific Daylight Time)">19:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">Domenic: this is why I find it easier to define it as a ref holding the stream alive... and GC causes abort</td></tr>
  <tr class="msg" id="L183"><td class="ts-cell"><a class="ts" href="#L183" alt="Sun Apr 05 2015 12:06:50 GMT-0700 (Pacific Daylight Time)">19:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">ok, have a good Easter!</td></tr>
  <tr class="msg" id="L184"><td class="ts-cell"><a class="ts" href="#L184" alt="Sun Apr 05 2015 12:06:52 GMT-0700 (Pacific Daylight Time)">19:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">byte</td></tr>
  <tr class="msg" id="L185"><td class="ts-cell"><a class="ts" href="#L185" alt="Sun Apr 05 2015 12:06:54 GMT-0700 (Pacific Daylight Time)">19:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">bye</td></tr>
  <tr class="msg" id="L186"><td class="ts-cell"><a class="ts" href="#L186" alt="Sun Apr 05 2015 12:07:25 GMT-0700 (Pacific Daylight Time)">19:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">later!</td></tr>
  <tr class="msg" id="L187"><td class="ts-cell"><a class="ts" href="#L187" alt="Sun Apr 05 2015 12:39:06 GMT-0700 (Pacific Daylight Time)">19:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">Wait, we&#039;re allowed breaks on Sunday?</td></tr>
  <tr class="msg" id="L188"><td class="ts-cell"><a class="ts" href="#L188" alt="Sun Apr 05 2015 16:22:51 GMT-0700 (Pacific Daylight Time)">23:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: only easter sunday</td></tr>
  <tr class="msg" id="L189"><td class="ts-cell"><a class="ts" href="#L189" alt="Sun Apr 05 2015 16:41:04 GMT-0700 (Pacific Daylight Time)">23:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=gsnedders@irc>gsnedders</span>&gt;</div></td><td class="msg-cell">A properly defined grammar for the html5lib test format would be great, because dear god trying to parse this</td></tr>
  <tr class="msg" id="L190"><td class="ts-cell"><a class="ts" href="#L190" alt="Sun Apr 05 2015 16:42:07 GMT-0700 (Pacific Daylight Time)">23:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=gsnedders@irc>gsnedders</span>&gt;</div></td><td class="msg-cell">Pretty sure we&#039;re LR(2)</td></tr>
  <tr class="msg" id="L191"><td class="ts-cell"><a class="ts" href="#L191" alt="Sun Apr 05 2015 16:42:16 GMT-0700 (Pacific Daylight Time)">23:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=gsnedders@irc>gsnedders</span>&gt;</div></td><td class="msg-cell">At least in the simple definition</td></tr>

</tbody></table></div></div></div></body>
