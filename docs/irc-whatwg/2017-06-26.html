<!doctype html>
<head>
  <title>#whatwg on 2017-06-26</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "#whatwg";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#whatwg<br>2017-06-26<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2017-06-25" class="nav-link"><span>prev</span></a>
<a href="2017-06-27" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>
<input type="text" id="query" size=25 placeholder="Search #whatwg">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Mon Jun 26 2017 03:06:10 GMT-0700 (Pacific Daylight Time)">10:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">why some people like js symbols?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Mon Jun 26 2017 03:06:27 GMT-0700 (Pacific Daylight Time)">10:06</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-4" title=smaug@irc>smaug</span></div></td><td class="msg-cell">hasn&#039;t seen the light why symbols are a good thing</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Mon Jun 26 2017 03:30:51 GMT-0700 (Pacific Daylight Time)">10:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">When creating an about:blank iframe, then navigating it, the global is preserved from the original about:blank. This is according to the spec, but only Firefox seems to implement this.</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Mon Jun 26 2017 03:31:02 GMT-0700 (Pacific Daylight Time)">10:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">Anyone know the history here?</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Mon Jun 26 2017 03:32:59 GMT-0700 (Pacific Daylight Time)">10:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">If Firefox is the only browser that does the weird replacement stuff, shouldn&#039;t Firefox change?</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Mon Jun 26 2017 04:21:38 GMT-0700 (Pacific Daylight Time)">11:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">JakeA: I thought only webkit based browsers had the weird setup of not reusing global</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Mon Jun 26 2017 04:22:26 GMT-0700 (Pacific Daylight Time)">11:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">JakeA: how does blink preverse event listeners when doing  var w = <a href="http://window.open">window.open</a>(&quot;sameorigin.html&quot;); w.addEventListener(&quot;load&quot;, function() {});</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Mon Jun 26 2017 04:23:14 GMT-0700 (Pacific Daylight Time)">11:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">JakeA: that is, I believe, the biggest reason for reusing global</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Mon Jun 26 2017 04:23:24 GMT-0700 (Pacific Daylight Time)">11:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">moving listeners to some other object would be super weird</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Mon Jun 26 2017 04:25:38 GMT-0700 (Pacific Daylight Time)">11:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">smaug: Yeah, load doesn&#039;t seem to fire for <a href="http://window.open">window.open</a> in Chrome/Safari/Edge</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Mon Jun 26 2017 04:25:46 GMT-0700 (Pacific Daylight Time)">11:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">wait, what?</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Mon Jun 26 2017 04:26:00 GMT-0700 (Pacific Daylight Time)">11:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">Unless I&#039;ve done something really wrong <a href="http://output.jsbin.com/rofecit/quiet">http://output.jsbin.com/rofecit/quiet</a></td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Mon Jun 26 2017 04:26:11 GMT-0700 (Pacific Daylight Time)">11:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">you can&#039;t use <a href="http://window.open">window.open</a> and observe when same origin page has been loaded?</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Mon Jun 26 2017 04:26:32 GMT-0700 (Pacific Daylight Time)">11:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">That appears to be the case</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Mon Jun 26 2017 04:27:15 GMT-0700 (Pacific Daylight Time)">11:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">It works with iframes via iframe.onload, which also do the replacement thing (in Firefox only) <a href="http://output.jsbin.com/bifelu/">http://output.jsbin.com/bifelu/</a></td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Mon Jun 26 2017 04:27:32 GMT-0700 (Pacific Daylight Time)">11:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">(loaded <a href="http://www.yle.fi">www.yle.fi</a> and then) var w = <a href="http://window.open">window.open</a>(&quot;<a href="http://www.yle.fi&quot">http://www.yle.fi&quot</a>;); w.onload = function() { console.log(&quot;loaded&quot;); };</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Mon Jun 26 2017 04:27:41 GMT-0700 (Pacific Daylight Time)">11:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">JakeA: that certainly prints loaded to console</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Mon Jun 26 2017 04:28:38 GMT-0700 (Pacific Daylight Time)">11:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">JakeA: you&#039;re just doing  <a href="http://window.open">window.open</a>();</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Mon Jun 26 2017 04:28:44 GMT-0700 (Pacific Daylight Time)">11:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">that is very different case</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Mon Jun 26 2017 04:28:54 GMT-0700 (Pacific Daylight Time)">11:28</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-7" title=JakeA@irc>JakeA</span></div></td><td class="msg-cell">falls over</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Mon Jun 26 2017 04:29:17 GMT-0700 (Pacific Daylight Time)">11:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">I thought that would create a same-origin about:blank window that could later be replaced?</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Mon Jun 26 2017 04:29:49 GMT-0700 (Pacific Daylight Time)">11:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell"><a href="http://window.open">window.open</a>(); doesn&#039;t load anything. it just creates initial about:blank</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Mon Jun 26 2017 04:30:02 GMT-0700 (Pacific Daylight Time)">11:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">_creates_, not _loads_</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Mon Jun 26 2017 04:30:14 GMT-0700 (Pacific Daylight Time)">11:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">Sure, but then when I navigate it</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Mon Jun 26 2017 04:31:16 GMT-0700 (Pacific Daylight Time)">11:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">anyhow, var w = <a href="http://window.open">window.open</a>(&quot;<a href="http://www.yle.fi&quot">http://www.yle.fi&quot</a>;); w.onload = function() { console.log(&quot;loaded&quot;); };  shows that blink does dispatch load</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Mon Jun 26 2017 04:31:16 GMT-0700 (Pacific Daylight Time)">11:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">…to a same origin URL I&#039;d expect a load event, but only Firefox gives me that. Or have I stumbled on another different case?</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Mon Jun 26 2017 04:31:52 GMT-0700 (Pacific Daylight Time)">11:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">but I don&#039;t understand why blink works with my testcase. The event listener is added before anything has been loaded</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Mon Jun 26 2017 04:32:52 GMT-0700 (Pacific Daylight Time)">11:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">if it doesn&#039;t reuse the global, it somehow mysteriously moves listeners to another object?</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Mon Jun 26 2017 04:34:16 GMT-0700 (Pacific Daylight Time)">11:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">smaug: here&#039;s an example that doesn&#039;t use an empty url <a href="http://output.jsbin.com/bexuzaq/quiet">http://output.jsbin.com/bexuzaq/quiet</a></td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Mon Jun 26 2017 04:48:09 GMT-0700 (Pacific Daylight Time)">11:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">JakeA: and I see same stuff printed in chrome and ff</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Mon Jun 26 2017 04:48:37 GMT-0700 (Pacific Daylight Time)">11:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">but why does chrome ever print &quot;load fired&quot; ?</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Mon Jun 26 2017 04:49:43 GMT-0700 (Pacific Daylight Time)">11:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">hmm yeah, my test is wrong</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Mon Jun 26 2017 04:50:04 GMT-0700 (Pacific Daylight Time)">11:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">JakeA: what is the model blink has for event listeners?</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Mon Jun 26 2017 04:50:53 GMT-0700 (Pacific Daylight Time)">11:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">smaug: I guess it&#039;s doing something special for <a href="http://window.open">window.open</a>(url), but I&#039;m not sure what</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Mon Jun 26 2017 04:51:02 GMT-0700 (Pacific Daylight Time)">11:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">but it seems Safari &amp; Edge do the same</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Mon Jun 26 2017 04:51:16 GMT-0700 (Pacific Daylight Time)">11:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">Given the results of <a href="http://output.jsbin.com/rofecit/quiet">http://output.jsbin.com/rofecit/quiet</a></td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Mon Jun 26 2017 04:51:44 GMT-0700 (Pacific Daylight Time)">11:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">JakeA: since if I do var w = <a href="http://window.open">window.open</a>(&quot;<a href="https://www.yle.fi&quot">https://www.yle.fi&quot</a>;); w.document.documentURI; also blink shows the uri is about:blank at that point</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Mon Jun 26 2017 04:52:15 GMT-0700 (Pacific Daylight Time)">11:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">IIRC IE used to have same model as Netscape and then Gecko. (but my memory could be wrong here)</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Mon Jun 26 2017 04:56:32 GMT-0700 (Pacific Daylight Time)">11:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">smaug: <a href="http://output.jsbin.com/bifelu/quiet">http://output.jsbin.com/bifelu/quiet</a> is weird. In Firefox .hello is &quot;world&quot; in both cases, unless I wait for onload before setting .hello</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Mon Jun 26 2017 04:57:31 GMT-0700 (Pacific Daylight Time)">11:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">I guess it&#039;s because the navigate happens before the first navigation completes</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Mon Jun 26 2017 04:57:35 GMT-0700 (Pacific Daylight Time)">11:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">JakeA: iframes load about:blank, at least in gecko</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Mon Jun 26 2017 04:59:03 GMT-0700 (Pacific Daylight Time)">11:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">looks like also blink loads about:blank there</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Mon Jun 26 2017 04:59:12 GMT-0700 (Pacific Daylight Time)">11:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">I mean even without src attribute</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Mon Jun 26 2017 04:59:54 GMT-0700 (Pacific Daylight Time)">11:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">global reuse happens only when initial (not loaded about:blank) is replaced with something else from the same origin</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Mon Jun 26 2017 05:10:52 GMT-0700 (Pacific Daylight Time)">12:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">&quot;if the nested browsing context&#039;s session history contained only one Document when the process the iframe attributes algorithm was invoked, and that was the about:blank Document created when the nested browsing context was created, then any navigation required of the user agent in that algorithm must be completed with replacement enabled.&quot;</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Mon Jun 26 2017 05:11:17 GMT-0700 (Pacific Daylight Time)">12:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">smaug: so, you&#039;re saying Blink creates an about:blank iframe, then navigates it to about:blank?</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Mon Jun 26 2017 05:11:35 GMT-0700 (Pacific Daylight Time)">12:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">So it&#039;s the about:blank to about:blank navigation that happens with replacement enabled?</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Mon Jun 26 2017 05:12:05 GMT-0700 (Pacific Daylight Time)">12:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">in gecko initial about:blank -&gt; sameorigin page happens with reuse</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Mon Jun 26 2017 05:12:12 GMT-0700 (Pacific Daylight Time)">12:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">not replacement</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Mon Jun 26 2017 05:12:38 GMT-0700 (Pacific Daylight Time)">12:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">(or perhaps one could call it replacement too :) )</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Mon Jun 26 2017 05:13:03 GMT-0700 (Pacific Daylight Time)">12:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">JakeA: but I still mainly wonder how blink deals with event listeners</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Mon Jun 26 2017 05:13:07 GMT-0700 (Pacific Daylight Time)">12:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">I think I&#039;ll resign myself to never understanding this :D</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Mon Jun 26 2017 05:14:39 GMT-0700 (Pacific Daylight Time)">12:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">FWIW, I think Gecko&#039;s model is reasonable sane, but I admit that I don&#039;t understand blink&#039;s model. Perhaps it is sane too.</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Mon Jun 26 2017 05:15:05 GMT-0700 (Pacific Daylight Time)">12:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">(<a href="http://document.open">document.open</a> after load event is also related and makes this even more complicated. )</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Mon Jun 26 2017 05:17:49 GMT-0700 (Pacific Daylight Time)">12:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">I&#039;m not sure there&#039;s a sensible solution here, but it sure is difficult to pick the least unexpected :D</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Mon Jun 26 2017 06:10:06 GMT-0700 (Pacific Daylight Time)">13:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">If I change the src of an iframe, what&#039;s the source browsing context? The parent of the iframe or the iframe itself?</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Mon Jun 26 2017 06:10:41 GMT-0700 (Pacific Daylight Time)">13:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell"><a href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#otherwise-steps-for-iframe-or-frame-elements">https://html.spec.whatwg.org/multipage/iframe-embed-object.html#otherwise-steps-for-iframe-or-frame-elements</a> doesn&#039;t pass the source explicitly</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Mon Jun 26 2017 06:12:48 GMT-0700 (Pacific Daylight Time)">13:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">I&#039;m assuming the source browsing context is the iframe if I do iframe.contentWindow.location.href = &quot;…&quot;</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Mon Jun 26 2017 06:26:22 GMT-0700 (Pacific Daylight Time)">13:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title=yoav@irc>yoav</span>&gt;</div></td><td class="msg-cell">Hey! Are there known patterns/examples for defining an object and its processing in one spec and then operating on that object (processing it and e.g. adding new proprties to it) from another spec?</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Mon Jun 26 2017 06:29:53 GMT-0700 (Pacific Daylight Time)">13:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: its not just gecko that implements reusing the global</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Mon Jun 26 2017 06:30:02 GMT-0700 (Pacific Daylight Time)">13:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">oh, you said navigating it</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Mon Jun 26 2017 06:31:05 GMT-0700 (Pacific Daylight Time)">13:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: I guess I&#039;m in a muddle when it comes to when the reuse happens &amp; when it doesn&#039;t. I thought I&#039;d see globals live when creating an iframe, waiting for it to load, then navigating it to somewhere same-origin</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Mon Jun 26 2017 06:31:22 GMT-0700 (Pacific Daylight Time)">13:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: from my testing it depends on when you call .src in blink</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Mon Jun 26 2017 06:31:26 GMT-0700 (Pacific Daylight Time)">13:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">when you set .srv</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Mon Jun 26 2017 06:31:28 GMT-0700 (Pacific Daylight Time)">13:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">.src</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Mon Jun 26 2017 06:31:33 GMT-0700 (Pacific Daylight Time)">13:31</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-12" title=wanderview@irc>wanderview</span></div></td><td class="msg-cell">still drinking his coffee...</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Mon Jun 26 2017 06:31:56 GMT-0700 (Pacific Daylight Time)">13:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: let me find the irc conversation with bz where we talked about it</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Mon Jun 26 2017 06:32:57 GMT-0700 (Pacific Daylight Time)">13:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: this is the case that surprised me in Firefox <a href="http://output.jsbin.com/lawumuw/1/quiet">http://output.jsbin.com/lawumuw/1/quiet</a></td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Mon Jun 26 2017 06:33:20 GMT-0700 (Pacific Daylight Time)">13:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: if I comment out that &quot;await p&quot; (as in don&#039;t wait for the load event), the global lives on</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Mon Jun 26 2017 06:35:30 GMT-0700 (Pacific Daylight Time)">13:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: see scrollback here: <a href="http://logs.glob.uno/?c=mozilla%23content&amp;s=14+Jun+2017&amp;e=14+Jun+2017#c447305">http://logs.glob.uno/?c=mozilla%23content&amp;s=14+Jun+2017&amp;e=14+Jun+2017#c447305</a></td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Mon Jun 26 2017 06:35:49 GMT-0700 (Pacific Daylight Time)">13:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: in chrome, if you do this:</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Mon Jun 26 2017 06:35:50 GMT-0700 (Pacific Daylight Time)">13:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">var f = document.createElement(&#039;iframe&#039;); document.body.appendChild(f); <a href="http://f.contentWindow.foo">f.contentWindow.foo</a> = &#039;foo&#039;; f.src = &#039;?foo&#039;;</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Mon Jun 26 2017 06:35:56 GMT-0700 (Pacific Daylight Time)">13:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">then: <a href="http://f.contentWindow.foo">f.contentWindow.foo</a></td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Mon Jun 26 2017 06:35:59 GMT-0700 (Pacific Daylight Time)">13:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">you get undefined</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Mon Jun 26 2017 06:36:02 GMT-0700 (Pacific Daylight Time)">13:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">but if you do this:</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Mon Jun 26 2017 06:36:09 GMT-0700 (Pacific Daylight Time)">13:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">var f = document.createElement(&#039;iframe&#039;); f.src = &#039;?foo&#039;; document.body.appendChild(f); <a href="http://f.contentWindow.foo">f.contentWindow.foo</a> = &#039;foo&#039;;</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Mon Jun 26 2017 06:36:15 GMT-0700 (Pacific Daylight Time)">13:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">then <a href="http://f.contentWindow.foo">f.contentWindow.foo</a> is &quot;foo&quot;</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Mon Jun 26 2017 06:36:31 GMT-0700 (Pacific Daylight Time)">13:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: chrome has different behavior if you set .src before or after appending to the document</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Mon Jun 26 2017 06:37:21 GMT-0700 (Pacific Daylight Time)">13:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">haha</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Mon Jun 26 2017 06:37:35 GMT-0700 (Pacific Daylight Time)">13:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: <a href="http://logs.glob.uno/?c=mozilla%23content&amp;s=14+Jun+2017&amp;e=14+Jun+2017#c447284">http://logs.glob.uno/?c=mozilla%23content&amp;s=14+Jun+2017&amp;e=14+Jun+2017#c447284</a> - this is exactly what I just ran into</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Mon Jun 26 2017 06:38:23 GMT-0700 (Pacific Daylight Time)">13:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA:  my key take away from that irc log: <a href="http://logs.glob.uno/?c=mozilla%23content&amp;s=14+Jun+2017&amp;e=14+Jun+2017#c447305">http://logs.glob.uno/?c=mozilla%23content&amp;s=14+Jun+2017&amp;e=14+Jun+2017#c447305</a></td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Mon Jun 26 2017 06:38:44 GMT-0700 (Pacific Daylight Time)">13:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">Makes sense</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Mon Jun 26 2017 06:38:59 GMT-0700 (Pacific Daylight Time)">13:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">and thats why I tried to focus on in that about:blank test I wrote</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Mon Jun 26 2017 06:39:00 GMT-0700 (Pacific Daylight Time)">13:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">In a weird web way</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Mon Jun 26 2017 06:39:21 GMT-0700 (Pacific Daylight Time)">13:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: I mean... it explains why we all have some kind of functionality here... thats the use case sites actually use</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Mon Jun 26 2017 06:40:29 GMT-0700 (Pacific Daylight Time)">13:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">yeah</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Mon Jun 26 2017 06:41:26 GMT-0700 (Pacific Daylight Time)">13:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: at least in gecko I think we have a flag set on the about:blank that says its &quot;initial&quot;... and when the load event fires we set that flag false</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Mon Jun 26 2017 06:41:35 GMT-0700 (Pacific Daylight Time)">13:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">and we only re-use the global if the initial flag is set</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Mon Jun 26 2017 06:42:12 GMT-0700 (Pacific Daylight Time)">13:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">Yeah, that matches what I&#039;m seeing in those jsbins</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Mon Jun 26 2017 06:42:17 GMT-0700 (Pacific Daylight Time)">13:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: for example, I believe <a href="http://window.open">window.open</a>() with no args should give you an initial about:blank that would be reused... but we have a known conflict with the spec where we mark it non-initial and don&#039;t reuse</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Mon Jun 26 2017 06:42:52 GMT-0700 (Pacific Daylight Time)">13:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: I think there is some desire to fix this, but not sure this corner case has attracted much attention in the past</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Mon Jun 26 2017 06:44:50 GMT-0700 (Pacific Daylight Time)">13:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: Ahh yes, that explains what I&#039;m seeing in my other jsbin. But yeah, I don&#039;t think developers are hitting against this. I was just trying to see if browsers worked how I thought.</td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Mon Jun 26 2017 06:45:00 GMT-0700 (Pacific Daylight Time)">13:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">The answer was &quot;no&quot;. The answer is always &quot;no&quot;.]</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Mon Jun 26 2017 06:45:02 GMT-0700 (Pacific Daylight Time)">13:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">:D</td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Mon Jun 26 2017 06:45:20 GMT-0700 (Pacific Daylight Time)">13:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: stuff like Clients API increases our exposure to these compat issues, though</td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Mon Jun 26 2017 06:46:13 GMT-0700 (Pacific Daylight Time)">13:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: I think your idea of initialClientId helps a lot. I think we should ditch reservedClientId in favour of it</td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Mon Jun 26 2017 06:46:24 GMT-0700 (Pacific Daylight Time)">13:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">but maybe call it resultingClientId</td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Mon Jun 26 2017 06:46:33 GMT-0700 (Pacific Daylight Time)">13:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: uh... but we don&#039;t always have an initialClientId, right?</td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Mon Jun 26 2017 06:46:37 GMT-0700 (Pacific Daylight Time)">13:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">oh</td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Mon Jun 26 2017 06:46:40 GMT-0700 (Pacific Daylight Time)">13:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">you mean combine them</td></tr>
  <tr class="msg" id="L100"><td class="ts-cell"><a class="ts" href="#L100" alt="Mon Jun 26 2017 06:46:44 GMT-0700 (Pacific Daylight Time)">13:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">yeah</td></tr>
  <tr class="msg" id="L101"><td class="ts-cell"><a class="ts" href="#L101" alt="Mon Jun 26 2017 06:46:57 GMT-0700 (Pacific Daylight Time)">13:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">resultingClientId - the potentially-reserved client that will house the resulting document/worker.</td></tr>
  <tr class="msg" id="L102"><td class="ts-cell"><a class="ts" href="#L102" alt="Mon Jun 26 2017 06:46:58 GMT-0700 (Pacific Daylight Time)">13:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: how do you handle the difference in postMessage() behavior between them?</td></tr>
  <tr class="msg" id="L103"><td class="ts-cell"><a class="ts" href="#L103" alt="Mon Jun 26 2017 06:47:09 GMT-0700 (Pacific Daylight Time)">13:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">that is my main concern with combining them</td></tr>
  <tr class="msg" id="L104"><td class="ts-cell"><a class="ts" href="#L104" alt="Mon Jun 26 2017 06:47:22 GMT-0700 (Pacific Daylight Time)">13:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: by the time you have the client, you can tell if it&#039;s .reserved or not</td></tr>
  <tr class="msg" id="L105"><td class="ts-cell"><a class="ts" href="#L105" alt="Mon Jun 26 2017 06:47:33 GMT-0700 (Pacific Daylight Time)">13:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">hmm</td></tr>
  <tr class="msg" id="L106"><td class="ts-cell"><a class="ts" href="#L106" alt="Mon Jun 26 2017 06:48:00 GMT-0700 (Pacific Daylight Time)">13:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: ok, but that is pretty much the same as having initialClientId and reservedClientId</td></tr>
  <tr class="msg" id="L107"><td class="ts-cell"><a class="ts" href="#L107" alt="Mon Jun 26 2017 06:48:33 GMT-0700 (Pacific Daylight Time)">13:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: what do you think about removing the message queuing on reserved?</td></tr>
  <tr class="msg" id="L108"><td class="ts-cell"><a class="ts" href="#L108" alt="Mon Jun 26 2017 06:49:45 GMT-0700 (Pacific Daylight Time)">13:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: I think I&#039;m missing the problem. If I want to send a message to the resulting client, resultingClientId is the place I go to do that. The queuing helps here, no?</td></tr>
  <tr class="msg" id="L109"><td class="ts-cell"><a class="ts" href="#L109" alt="Mon Jun 26 2017 06:50:51 GMT-0700 (Pacific Daylight Time)">13:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: but if its not reserved, then the message might fire in the window before the message event handler has been setup by the final loading document</td></tr>
  <tr class="msg" id="L110"><td class="ts-cell"><a class="ts" href="#L110" alt="Mon Jun 26 2017 06:51:09 GMT-0700 (Pacific Daylight Time)">13:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">so the message will work for reserved... but may or may not work for initial</td></tr>
  <tr class="msg" id="L111"><td class="ts-cell"><a class="ts" href="#L111" alt="Mon Jun 26 2017 06:51:51 GMT-0700 (Pacific Daylight Time)">13:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">making reserved not queue would avoid this since people wouldn&#039;t expect it to work</td></tr>
  <tr class="msg" id="L112"><td class="ts-cell"><a class="ts" href="#L112" alt="Mon Jun 26 2017 06:52:15 GMT-0700 (Pacific Daylight Time)">13:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: I thought we buffered messages until something like dom-ready, or does that stop working in the replaced case?</td></tr>
  <tr class="msg" id="L113"><td class="ts-cell"><a class="ts" href="#L113" alt="Mon Jun 26 2017 06:52:21 GMT-0700 (Pacific Daylight Time)">13:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: I kind of feel like instead of queuing messages we should provide some way to listen for the Client execution ready state change</td></tr>
  <tr class="msg" id="L114"><td class="ts-cell"><a class="ts" href="#L114" alt="Mon Jun 26 2017 06:52:57 GMT-0700 (Pacific Daylight Time)">13:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: I&#039;m not sure how existing message buffering works with initial about:blank</td></tr>
  <tr class="msg" id="L115"><td class="ts-cell"><a class="ts" href="#L115" alt="Mon Jun 26 2017 06:53:29 GMT-0700 (Pacific Daylight Time)">13:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: won&#039;t we have the same problem with a client-ready event? If it&#039;s initial about:blank, the client is ready</td></tr>
  <tr class="msg" id="L116"><td class="ts-cell"><a class="ts" href="#L116" alt="Mon Jun 26 2017 06:53:49 GMT-0700 (Pacific Daylight Time)">13:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">Whereas we want to know &quot;the new document has loaded&quot;</td></tr>
  <tr class="msg" id="L117"><td class="ts-cell"><a class="ts" href="#L117" alt="Mon Jun 26 2017 06:53:55 GMT-0700 (Pacific Daylight Time)">13:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: you can check the Client.url</td></tr>
  <tr class="msg" id="L118"><td class="ts-cell"><a class="ts" href="#L118" alt="Mon Jun 26 2017 06:54:49 GMT-0700 (Pacific Daylight Time)">13:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: So we&#039;d need to know when the client url was the new url, and when dom-ready</td></tr>
  <tr class="msg" id="L119"><td class="ts-cell"><a class="ts" href="#L119" alt="Mon Jun 26 2017 06:55:09 GMT-0700 (Pacific Daylight Time)">13:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: I guess I was assuming we wanted to allow sites to dynamically built frames and message them... which would mean we need to be able to message the client while it has the about:blank document</td></tr>
  <tr class="msg" id="L120"><td class="ts-cell"><a class="ts" href="#L120" alt="Mon Jun 26 2017 06:55:28 GMT-0700 (Pacific Daylight Time)">13:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: well, you can pretty much do `client.url !== &#039;about:blank&#039;`</td></tr>
  <tr class="msg" id="L121"><td class="ts-cell"><a class="ts" href="#L121" alt="Mon Jun 26 2017 06:55:56 GMT-0700 (Pacific Daylight Time)">13:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: but you can&#039;t do &quot;wait until client.url == &#039;foo.html&#039;&quot;</td></tr>
  <tr class="msg" id="L122"><td class="ts-cell"><a class="ts" href="#L122" alt="Mon Jun 26 2017 06:56:35 GMT-0700 (Pacific Daylight Time)">13:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: no.. but if we had a &quot;wait for execution ready&quot; thing you could do that then check the URL</td></tr>
  <tr class="msg" id="L123"><td class="ts-cell"><a class="ts" href="#L123" alt="Mon Jun 26 2017 06:56:55 GMT-0700 (Pacific Daylight Time)">13:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: but what if the url is wrong? Wait 100ms and try again?</td></tr>
  <tr class="msg" id="L124"><td class="ts-cell"><a class="ts" href="#L124" alt="Mon Jun 26 2017 06:56:58 GMT-0700 (Pacific Daylight Time)">13:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: maybe need to expose .initial as a boolean getter... and then have &quot;wait until execution ready and not initial&quot;</td></tr>
  <tr class="msg" id="L125"><td class="ts-cell"><a class="ts" href="#L125" alt="Mon Jun 26 2017 06:57:09 GMT-0700 (Pacific Daylight Time)">13:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">hmm</td></tr>
  <tr class="msg" id="L126"><td class="ts-cell"><a class="ts" href="#L126" alt="Mon Jun 26 2017 06:57:29 GMT-0700 (Pacific Daylight Time)">13:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: there is probably something that handles this stuff in the main window case without Clients API</td></tr>
  <tr class="msg" id="L127"><td class="ts-cell"><a class="ts" href="#L127" alt="Mon Jun 26 2017 06:57:33 GMT-0700 (Pacific Daylight Time)">13:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">script blockers or something</td></tr>
  <tr class="msg" id="L128"><td class="ts-cell"><a class="ts" href="#L128" alt="Mon Jun 26 2017 06:57:45 GMT-0700 (Pacific Daylight Time)">13:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: given Firefox&#039;s current behaviour, is this a problem…?</td></tr>
  <tr class="msg" id="L129"><td class="ts-cell"><a class="ts" href="#L129" alt="Mon Jun 26 2017 06:57:55 GMT-0700 (Pacific Daylight Time)">13:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: I would ask bz or smaug, but they are probably traveling today</td></tr>
  <tr class="msg" id="L130"><td class="ts-cell"><a class="ts" href="#L130" alt="Mon Jun 26 2017 06:57:56 GMT-0700 (Pacific Daylight Time)">13:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: replacement only happens if the page doesn&#039;t load</td></tr>
  <tr class="msg" id="L131"><td class="ts-cell"><a class="ts" href="#L131" alt="Mon Jun 26 2017 06:58:14 GMT-0700 (Pacific Daylight Time)">13:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">as in the initial page</td></tr>
  <tr class="msg" id="L132"><td class="ts-cell"><a class="ts" href="#L132" alt="Mon Jun 26 2017 06:58:16 GMT-0700 (Pacific Daylight Time)">13:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">wanderview: I&#039;m not. I must avoid trumpland</td></tr>
  <tr class="msg" id="L133"><td class="ts-cell"><a class="ts" href="#L133" alt="Mon Jun 26 2017 06:58:41 GMT-0700 (Pacific Daylight Time)">13:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">smaug: that is wise</td></tr>
  <tr class="msg" id="L134"><td class="ts-cell"><a class="ts" href="#L134" alt="Mon Jun 26 2017 06:58:48 GMT-0700 (Pacific Daylight Time)">13:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">...for my mental health ;)</td></tr>
  <tr class="msg" id="L135"><td class="ts-cell"><a class="ts" href="#L135" alt="Mon Jun 26 2017 06:58:52 GMT-0700 (Pacific Daylight Time)">13:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">:D</td></tr>
  <tr class="msg" id="L136"><td class="ts-cell"><a class="ts" href="#L136" alt="Mon Jun 26 2017 06:58:57 GMT-0700 (Pacific Daylight Time)">13:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">smaug: I saw at least on person was stopped from getting on a plane last night</td></tr>
  <tr class="msg" id="L137"><td class="ts-cell"><a class="ts" href="#L137" alt="Mon Jun 26 2017 06:59:00 GMT-0700 (Pacific Daylight Time)">13:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">one person</td></tr>
  <tr class="msg" id="L138"><td class="ts-cell"><a class="ts" href="#L138" alt="Mon Jun 26 2017 06:59:00 GMT-0700 (Pacific Daylight Time)">13:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=botie@irc>botie</span>&gt;</div></td><td class="msg-cell">one person is working very much but is earning very less</td></tr>
  <tr class="msg" id="L139"><td class="ts-cell"><a class="ts" href="#L139" alt="Mon Jun 26 2017 06:59:24 GMT-0700 (Pacific Daylight Time)">13:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">I&#039;m going to build a quick test for this postMessage stuff</td></tr>
  <tr class="msg" id="L140"><td class="ts-cell"><a class="ts" href="#L140" alt="Mon Jun 26 2017 06:59:43 GMT-0700 (Pacific Daylight Time)">13:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: you mean without Clients API in the mix?</td></tr>
  <tr class="msg" id="L141"><td class="ts-cell"><a class="ts" href="#L141" alt="Mon Jun 26 2017 06:59:50 GMT-0700 (Pacific Daylight Time)">13:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">yeah</td></tr>
  <tr class="msg" id="L142"><td class="ts-cell"><a class="ts" href="#L142" alt="Mon Jun 26 2017 06:59:56 GMT-0700 (Pacific Daylight Time)">13:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">ok</td></tr>
  <tr class="msg" id="L143"><td class="ts-cell"><a class="ts" href="#L143" alt="Mon Jun 26 2017 07:00:11 GMT-0700 (Pacific Daylight Time)">14:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">in theory the clients postMessage stuff uses the same buffering</td></tr>
  <tr class="msg" id="L144"><td class="ts-cell"><a class="ts" href="#L144" alt="Mon Jun 26 2017 07:00:20 GMT-0700 (Pacific Daylight Time)">14:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">or, it could do</td></tr>
  <tr class="msg" id="L145"><td class="ts-cell"><a class="ts" href="#L145" alt="Mon Jun 26 2017 07:00:25 GMT-0700 (Pacific Daylight Time)">14:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: well, not in my current code :-)</td></tr>
  <tr class="msg" id="L146"><td class="ts-cell"><a class="ts" href="#L146" alt="Mon Jun 26 2017 07:00:32 GMT-0700 (Pacific Daylight Time)">14:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">:D</td></tr>
  <tr class="msg" id="L147"><td class="ts-cell"><a class="ts" href="#L147" alt="Mon Jun 26 2017 07:01:01 GMT-0700 (Pacific Daylight Time)">14:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: my WPT test right now specifically tries to postMessage() an initial about:blank while delaying the final document network load</td></tr>
  <tr class="msg" id="L148"><td class="ts-cell"><a class="ts" href="#L148" alt="Mon Jun 26 2017 07:01:09 GMT-0700 (Pacific Daylight Time)">14:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">and I made that work</td></tr>
  <tr class="msg" id="L149"><td class="ts-cell"><a class="ts" href="#L149" alt="Mon Jun 26 2017 07:01:31 GMT-0700 (Pacific Daylight Time)">14:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">that&#039;s pretty much the test I was about to write</td></tr>
  <tr class="msg" id="L150"><td class="ts-cell"><a class="ts" href="#L150" alt="Mon Jun 26 2017 07:01:32 GMT-0700 (Pacific Daylight Time)">14:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">hah</td></tr>
  <tr class="msg" id="L151"><td class="ts-cell"><a class="ts" href="#L151" alt="Mon Jun 26 2017 07:01:39 GMT-0700 (Pacific Daylight Time)">14:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">Well, if that works, we&#039;re fine then, right?</td></tr>
  <tr class="msg" id="L152"><td class="ts-cell"><a class="ts" href="#L152" alt="Mon Jun 26 2017 07:01:57 GMT-0700 (Pacific Daylight Time)">14:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: but... the question is should it work</td></tr>
  <tr class="msg" id="L153"><td class="ts-cell"><a class="ts" href="#L153" alt="Mon Jun 26 2017 07:02:10 GMT-0700 (Pacific Daylight Time)">14:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: I made it work in my Clients API re-write... but should it work?</td></tr>
  <tr class="msg" id="L154"><td class="ts-cell"><a class="ts" href="#L154" alt="Mon Jun 26 2017 07:02:39 GMT-0700 (Pacific Daylight Time)">14:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: I think so. Buffing like window.postMessage seems good</td></tr>
  <tr class="msg" id="L155"><td class="ts-cell"><a class="ts" href="#L155" alt="Mon Jun 26 2017 07:02:51 GMT-0700 (Pacific Daylight Time)">14:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">smaug: is there anything that prevents a page from adding a message handler to an initial about:blank and receiving postMessage events before the final document loads?</td></tr>
  <tr class="msg" id="L156"><td class="ts-cell"><a class="ts" href="#L156" alt="Mon Jun 26 2017 07:03:07 GMT-0700 (Pacific Daylight Time)">14:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">no</td></tr>
  <tr class="msg" id="L157"><td class="ts-cell"><a class="ts" href="#L157" alt="Mon Jun 26 2017 07:03:08 GMT-0700 (Pacific Daylight Time)">14:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: I don&#039;t think we&#039;re on the same page here... my test is designed to show no buffering</td></tr>
  <tr class="msg" id="L158"><td class="ts-cell"><a class="ts" href="#L158" alt="Mon Jun 26 2017 07:03:28 GMT-0700 (Pacific Daylight Time)">14:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">message events are just events, so if there is a listener for such, it should get called</td></tr>
  <tr class="msg" id="L159"><td class="ts-cell"><a class="ts" href="#L159" alt="Mon Jun 26 2017 07:03:49 GMT-0700 (Pacific Daylight Time)">14:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">smaug: we don&#039;t buffer postMessage() until a particular ready state or something?</td></tr>
  <tr class="msg" id="L160"><td class="ts-cell"><a class="ts" href="#L160" alt="Mon Jun 26 2017 07:04:01 GMT-0700 (Pacific Daylight Time)">14:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: see the &quot;ping&quot; cases in here: <a href="https://github.com/w3c/web-platform-tests/pull/6304/files">https://github.com/w3c/web-platform-tests/pull/6304/files</a></td></tr>
  <tr class="msg" id="L161"><td class="ts-cell"><a class="ts" href="#L161" alt="Mon Jun 26 2017 07:04:18 GMT-0700 (Pacific Daylight Time)">14:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">why would we...</td></tr>
  <tr class="msg" id="L162"><td class="ts-cell"><a class="ts" href="#L162" alt="Mon Jun 26 2017 07:04:33 GMT-0700 (Pacific Daylight Time)">14:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">smaug: uh... because JakeA thought we might? :-)</td></tr>
  <tr class="msg" id="L163"><td class="ts-cell"><a class="ts" href="#L163" alt="Mon Jun 26 2017 07:04:41 GMT-0700 (Pacific Daylight Time)">14:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">such buffering might take forever</td></tr>
  <tr class="msg" id="L164"><td class="ts-cell"><a class="ts" href="#L164" alt="Mon Jun 26 2017 07:04:44 GMT-0700 (Pacific Daylight Time)">14:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">smaug: I mean... the web does all kind of things that I can&#039;t explain</td></tr>
  <tr class="msg" id="L165"><td class="ts-cell"><a class="ts" href="#L165" alt="Mon Jun 26 2017 07:04:50 GMT-0700 (Pacific Daylight Time)">14:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">I thought we did this with regular messages</td></tr>
  <tr class="msg" id="L166"><td class="ts-cell"><a class="ts" href="#L166" alt="Mon Jun 26 2017 07:05:34 GMT-0700 (Pacific Daylight Time)">14:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">Hence <a href="https://html.spec.whatwg.org/multipage/web-messaging.html#dom-messageport-start">https://html.spec.whatwg.org/multipage/web-messaging.html#dom-messageport-start</a></td></tr>
  <tr class="msg" id="L167"><td class="ts-cell"><a class="ts" href="#L167" alt="Mon Jun 26 2017 07:06:05 GMT-0700 (Pacific Daylight Time)">14:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">window.postMessage is different</td></tr>
  <tr class="msg" id="L168"><td class="ts-cell"><a class="ts" href="#L168" alt="Mon Jun 26 2017 07:06:15 GMT-0700 (Pacific Daylight Time)">14:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">older and simpler, I&#039;d say</td></tr>
  <tr class="msg" id="L169"><td class="ts-cell"><a class="ts" href="#L169" alt="Mon Jun 26 2017 07:06:26 GMT-0700 (Pacific Daylight Time)">14:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">client.postMessage is modelled to be similar</td></tr>
  <tr class="msg" id="L170"><td class="ts-cell"><a class="ts" href="#L170" alt="Mon Jun 26 2017 07:06:49 GMT-0700 (Pacific Daylight Time)">14:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">oh, hmm, you were talking about service worker stuff?</td></tr>
  <tr class="msg" id="L171"><td class="ts-cell"><a class="ts" href="#L171" alt="Mon Jun 26 2017 07:06:51 GMT-0700 (Pacific Daylight Time)">14:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">then no idea</td></tr>
  <tr class="msg" id="L172"><td class="ts-cell"><a class="ts" href="#L172" alt="Mon Jun 26 2017 07:07:13 GMT-0700 (Pacific Daylight Time)">14:07</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-4" title=smaug@irc>smaug</span></div></td><td class="msg-cell">tries to stay as far as possible from SW ;)</td></tr>
  <tr class="msg" id="L173"><td class="ts-cell"><a class="ts" href="#L173" alt="Mon Jun 26 2017 07:07:21 GMT-0700 (Pacific Daylight Time)">14:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">smaug: well, I guess I assumed the various postMessage() things would be more aligned</td></tr>
  <tr class="msg" id="L174"><td class="ts-cell"><a class="ts" href="#L174" alt="Mon Jun 26 2017 07:07:40 GMT-0700 (Pacific Daylight Time)">14:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">Gonne test window.postMessage &amp; initial documents…</td></tr>
  <tr class="msg" id="L175"><td class="ts-cell"><a class="ts" href="#L175" alt="Mon Jun 26 2017 07:07:43 GMT-0700 (Pacific Daylight Time)">14:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: when is the MessagePort enabled if start() is not called?</td></tr>
  <tr class="msg" id="L176"><td class="ts-cell"><a class="ts" href="#L176" alt="Mon Jun 26 2017 07:07:57 GMT-0700 (Pacific Daylight Time)">14:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: it&#039;s like dom ready or something</td></tr>
  <tr class="msg" id="L177"><td class="ts-cell"><a class="ts" href="#L177" alt="Mon Jun 26 2017 07:08:13 GMT-0700 (Pacific Daylight Time)">14:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">Or when there&#039;s an assignment to window.onmessage</td></tr>
  <tr class="msg" id="L178"><td class="ts-cell"><a class="ts" href="#L178" alt="Mon Jun 26 2017 07:08:20 GMT-0700 (Pacific Daylight Time)">14:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">It&#039;s kinda weird</td></tr>
  <tr class="msg" id="L179"><td class="ts-cell"><a class="ts" href="#L179" alt="Mon Jun 26 2017 07:08:39 GMT-0700 (Pacific Daylight Time)">14:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">smaug: do windows with initial about:blank documents get the DOM ready event?</td></tr>
  <tr class="msg" id="L180"><td class="ts-cell"><a class="ts" href="#L180" alt="Mon Jun 26 2017 07:08:43 GMT-0700 (Pacific Daylight Time)">14:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">we just dispatch the runnable in gecko and then Run() dispatches message event sync</td></tr>
  <tr class="msg" id="L181"><td class="ts-cell"><a class="ts" href="#L181" alt="Mon Jun 26 2017 07:09:08 GMT-0700 (Pacific Daylight Time)">14:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">wanderview: that I don&#039;t recall</td></tr>
  <tr class="msg" id="L182"><td class="ts-cell"><a class="ts" href="#L182" alt="Mon Jun 26 2017 07:09:15 GMT-0700 (Pacific Daylight Time)">14:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">readystatechange</td></tr>
  <tr class="msg" id="L183"><td class="ts-cell"><a class="ts" href="#L183" alt="Mon Jun 26 2017 07:09:18 GMT-0700 (Pacific Daylight Time)">14:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">I assume no</td></tr>
  <tr class="msg" id="L184"><td class="ts-cell"><a class="ts" href="#L184" alt="Mon Jun 26 2017 07:09:24 GMT-0700 (Pacific Daylight Time)">14:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=smaug@irc>smaug</span>&gt;</div></td><td class="msg-cell">since they are ready from the beginning</td></tr>
  <tr class="msg" id="L185"><td class="ts-cell"><a class="ts" href="#L185" alt="Mon Jun 26 2017 07:09:49 GMT-0700 (Pacific Daylight Time)">14:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">oh, they start ready from the beginning?</td></tr>
  <tr class="msg" id="L186"><td class="ts-cell"><a class="ts" href="#L186" alt="Mon Jun 26 2017 07:10:00 GMT-0700 (Pacific Daylight Time)">14:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: wouldn&#039;t that imply the MessagePort should be enabled? ^^^</td></tr>
  <tr class="msg" id="L187"><td class="ts-cell"><a class="ts" href="#L187" alt="Mon Jun 26 2017 07:10:19 GMT-0700 (Pacific Daylight Time)">14:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">Let&#039;s find out!! :D</td></tr>
  <tr class="msg" id="L188"><td class="ts-cell"><a class="ts" href="#L188" alt="Mon Jun 26 2017 07:10:25 GMT-0700 (Pacific Daylight Time)">14:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">(writing a test)</td></tr>
  <tr class="msg" id="L189"><td class="ts-cell"><a class="ts" href="#L189" alt="Mon Jun 26 2017 07:10:53 GMT-0700 (Pacific Daylight Time)">14:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">ok</td></tr>
  <tr class="msg" id="L190"><td class="ts-cell"><a class="ts" href="#L190" alt="Mon Jun 26 2017 07:11:09 GMT-0700 (Pacific Daylight Time)">14:11</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-12" title=wanderview@irc>wanderview</span></div></td><td class="msg-cell">should probably start packing soon...</td></tr>
  <tr class="msg" id="L191"><td class="ts-cell"><a class="ts" href="#L191" alt="Mon Jun 26 2017 07:16:59 GMT-0700 (Pacific Daylight Time)">14:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: bleh, yeah, the message gets delivered before the page loads <a href="https://clear-princess.glitch.me/">https://clear-princess.glitch.me/</a></td></tr>
  <tr class="msg" id="L192"><td class="ts-cell"><a class="ts" href="#L192" alt="Mon Jun 26 2017 07:18:13 GMT-0700 (Pacific Daylight Time)">14:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: how can you tell?</td></tr>
  <tr class="msg" id="L193"><td class="ts-cell"><a class="ts" href="#L193" alt="Mon Jun 26 2017 07:18:18 GMT-0700 (Pacific Daylight Time)">14:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">there is no message handler?</td></tr>
  <tr class="msg" id="L194"><td class="ts-cell"><a class="ts" href="#L194" alt="Mon Jun 26 2017 07:18:37 GMT-0700 (Pacific Daylight Time)">14:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">oh, I see</td></tr>
  <tr class="msg" id="L195"><td class="ts-cell"><a class="ts" href="#L195" alt="Mon Jun 26 2017 07:18:46 GMT-0700 (Pacific Daylight Time)">14:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">your slow-ass-page has the handler</td></tr>
  <tr class="msg" id="L196"><td class="ts-cell"><a class="ts" href="#L196" alt="Mon Jun 26 2017 07:19:07 GMT-0700 (Pacific Daylight Time)">14:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: how do you do the slow load in glitch?</td></tr>
  <tr class="msg" id="L197"><td class="ts-cell"><a class="ts" href="#L197" alt="Mon Jun 26 2017 07:20:02 GMT-0700 (Pacific Daylight Time)">14:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: can you see <a href="https://glitch.com/edit/#!/clear-princess?path=server.js:17:23">https://glitch.com/edit/#!/clear-princess?path=server.js:17:23</a>?</td></tr>
  <tr class="msg" id="L198"><td class="ts-cell"><a class="ts" href="#L198" alt="Mon Jun 26 2017 07:20:24 GMT-0700 (Pacific Daylight Time)">14:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: oh, cool... didn&#039;t realize it had a server.js</td></tr>
  <tr class="msg" id="L199"><td class="ts-cell"><a class="ts" href="#L199" alt="Mon Jun 26 2017 07:20:26 GMT-0700 (Pacific Daylight Time)">14:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">nice</td></tr>
  <tr class="msg" id="L200"><td class="ts-cell"><a class="ts" href="#L200" alt="Mon Jun 26 2017 07:20:35 GMT-0700 (Pacific Daylight Time)">14:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">&lt;3 glitch</td></tr>
  <tr class="msg" id="L201"><td class="ts-cell"><a class="ts" href="#L201" alt="Mon Jun 26 2017 07:26:19 GMT-0700 (Pacific Daylight Time)">14:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: do you think edge will have to implement URLSearchParams when they ship service workers?  I bet a fair number of service workers use URLSearchParams</td></tr>
  <tr class="msg" id="L202"><td class="ts-cell"><a class="ts" href="#L202" alt="Mon Jun 26 2017 07:41:00 GMT-0700 (Pacific Daylight Time)">14:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: I left a note at <a href="https://wpdev.uservoice.com/forums/257854-microsoft-edge-developer/suggestions/16856668-support-the-searchparams-property-of-url-objects">https://wpdev.uservoice.com/forums/257854-microsoft-edge-developer/suggestions/16856668-support-the-searchparams-property-of-url-objects</a>. It feels like a smallish thing to implement right? I know there are complications with windowProxy.location</td></tr>
  <tr class="msg" id="L203"><td class="ts-cell"><a class="ts" href="#L203" alt="Mon Jun 26 2017 07:41:31 GMT-0700 (Pacific Daylight Time)">14:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">thanks</td></tr>
  <tr class="msg" id="L204"><td class="ts-cell"><a class="ts" href="#L204" alt="Mon Jun 26 2017 07:42:19 GMT-0700 (Pacific Daylight Time)">14:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: I&#039;m writing up the buffering issue in that thread btw</td></tr>
  <tr class="msg" id="L205"><td class="ts-cell"><a class="ts" href="#L205" alt="Mon Jun 26 2017 07:42:32 GMT-0700 (Pacific Daylight Time)">14:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">the github one I mean</td></tr>
  <tr class="msg" id="L206"><td class="ts-cell"><a class="ts" href="#L206" alt="Mon Jun 26 2017 07:42:42 GMT-0700 (Pacific Daylight Time)">14:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: thanks... sorry, I was just throwing down my thoughts since I have to go get ready for travel shortly</td></tr>
  <tr class="msg" id="L207"><td class="ts-cell"><a class="ts" href="#L207" alt="Mon Jun 26 2017 07:43:14 GMT-0700 (Pacific Daylight Time)">14:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">not at all, thanks for throwing the rest of the details down!</td></tr>
  <tr class="msg" id="L208"><td class="ts-cell"><a class="ts" href="#L208" alt="Mon Jun 26 2017 08:03:46 GMT-0700 (Pacific Daylight Time)">15:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</div></td><td class="msg-cell">smaug: Symbols are the GENSYM of JS - they let you add properties to objects that are *guaranteed* to not collide with anything else.</td></tr>
  <tr class="msg" id="L209"><td class="ts-cell"><a class="ts" href="#L209" alt="Mon Jun 26 2017 08:04:25 GMT-0700 (Pacific Daylight Time)">15:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</div></td><td class="msg-cell">In particular, this means you can write mixins that are guaranteed safe. You can extend built-in prototypes without all the problems that causes today. Etc.</td></tr>
  <tr class="msg" id="L210"><td class="ts-cell"><a class="ts" href="#L210" alt="Mon Jun 26 2017 09:12:46 GMT-0700 (Pacific Daylight Time)">16:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">I can&#039;t find where the HTML spec starts the window.onmessage queue automatically. I thought it was after DOMContentLoaded</td></tr>
  <tr class="msg" id="L211"><td class="ts-cell"><a class="ts" href="#L211" alt="Mon Jun 26 2017 09:13:16 GMT-0700 (Pacific Daylight Time)">16:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">I know it starts if you assign to onmessage, but not if you use addEventListener(&#039;message&#039;, …)</td></tr>
  <tr class="msg" id="L212"><td class="ts-cell"><a class="ts" href="#L212" alt="Mon Jun 26 2017 12:59:27 GMT-0700 (Pacific Daylight Time)">19:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=ajeffrey_@irc>ajeffrey_</span>&gt;</div></td><td class="msg-cell">a question that came up in conversation with cbrewster wrt <a href="https://github.com/w3c/web-platform-tests/blob/master/html/semantics/embedded-content/the-iframe-element/iframe-append-to-child-document.html">https://github.com/w3c/web-platform-tests/blob/master/html/semantics/embedded-content/the-iframe-element/iframe-append-to-child-document.html</a></td></tr>
  <tr class="msg" id="L213"><td class="ts-cell"><a class="ts" href="#L213" alt="Mon Jun 26 2017 13:00:19 GMT-0700 (Pacific Daylight Time)">20:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=ajeffrey_@irc>ajeffrey_</span>&gt;</div></td><td class="msg-cell">the relevant bit of spec is <a href="https://dom.spec.whatwg.org/#concept-node-pre-insert">https://dom.spec.whatwg.org/#concept-node-pre-insert</a></td></tr>
  <tr class="msg" id="L214"><td class="ts-cell"><a class="ts" href="#L214" alt="Mon Jun 26 2017 13:00:56 GMT-0700 (Pacific Daylight Time)">20:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=ajeffrey_@irc>ajeffrey_</span>&gt;</div></td><td class="msg-cell">it looks like this passes the pre-insertion validity check <a href="https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity">https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity</a></td></tr>
  <tr class="msg" id="L215"><td class="ts-cell"><a class="ts" href="#L215" alt="Mon Jun 26 2017 13:02:31 GMT-0700 (Pacific Daylight Time)">20:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=ajeffrey_@irc>ajeffrey_</span>&gt;</div></td><td class="msg-cell">because childWindow.document is not a descendant of iframe.</td></tr>
  <tr class="msg" id="L216"><td class="ts-cell"><a class="ts" href="#L216" alt="Mon Jun 26 2017 13:03:49 GMT-0700 (Pacific Daylight Time)">20:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=ajeffrey_@irc>ajeffrey_</span>&gt;</div></td><td class="msg-cell">AFAICT the spec allows a cycle in the DOM + browsing context hierarchies, but I must be missing something :/</td></tr>
  <tr class="msg" id="L217"><td class="ts-cell"><a class="ts" href="#L217" alt="Mon Jun 26 2017 13:04:50 GMT-0700 (Pacific Daylight Time)">20:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=ajeffrey_@irc>ajeffrey_</span>&gt;</div></td><td class="msg-cell">Domenic: any ideas ^</td></tr>
  <tr class="msg" id="L218"><td class="ts-cell"><a class="ts" href="#L218" alt="Mon Jun 26 2017 13:11:27 GMT-0700 (Pacific Daylight Time)">20:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">I don&#039;t remember any attempts to disallow cycles</td></tr>
  <tr class="msg" id="L219"><td class="ts-cell"><a class="ts" href="#L219" alt="Mon Jun 26 2017 13:11:46 GMT-0700 (Pacific Daylight Time)">20:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">There&#039;s some part of the spec that deals with iframe nesting level I think that tries to prevent infinite loading</td></tr>
  <tr class="msg" id="L220"><td class="ts-cell"><a class="ts" href="#L220" alt="Mon Jun 26 2017 13:14:18 GMT-0700 (Pacific Daylight Time)">20:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</div></td><td class="msg-cell">Yeah, cycles are definitely allowed and work right now, they just get broken at some point.</td></tr>
  <tr class="msg" id="L221"><td class="ts-cell"><a class="ts" href="#L221" alt="Mon Jun 26 2017 13:46:09 GMT-0700 (Pacific Daylight Time)">20:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">Domenic: Is it possible to specify, &quot;Wait for the queue&#039;s next dequeue operation&quot; ?</td></tr>
  <tr class="msg" id="L222"><td class="ts-cell"><a class="ts" href="#L222" alt="Mon Jun 26 2017 13:47:39 GMT-0700 (Pacific Daylight Time)">20:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">I&#039;m trying to use a queue to schedule request handling in WebDriver</td></tr>
  <tr class="msg" id="L223"><td class="ts-cell"><a class="ts" href="#L223" alt="Mon Jun 26 2017 13:47:56 GMT-0700 (Pacific Daylight Time)">20:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">so my question is just one possible implementation</td></tr>
  <tr class="msg" id="L224"><td class="ts-cell"><a class="ts" href="#L224" alt="Mon Jun 26 2017 13:48:06 GMT-0700 (Pacific Daylight Time)">20:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">although even that is probably too prescriptive</td></tr>
  <tr class="msg" id="L225"><td class="ts-cell"><a class="ts" href="#L225" alt="Mon Jun 26 2017 13:48:54 GMT-0700 (Pacific Daylight Time)">20:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">Could I do something like, 1) Enqueue `request` in `pending requests`, 2) Wait for `request` to be the first element of `pending requests`</td></tr>
  <tr class="msg" id="L226"><td class="ts-cell"><a class="ts" href="#L226" alt="Mon Jun 26 2017 13:50:30 GMT-0700 (Pacific Daylight Time)">20:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=jugglinmike@irc>jugglinmike</span>&gt;</div></td><td class="msg-cell">I know this is blocking, but I think that&#039;s appropriate for a connection-oriented/request-initiated algorithm</td></tr>
  <tr class="msg" id="L227"><td class="ts-cell"><a class="ts" href="#L227" alt="Mon Jun 26 2017 13:54:14 GMT-0700 (Pacific Daylight Time)">20:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=virmaha@irc>virmaha</span>&gt;</div></td><td class="msg-cell">Hello. If a website has 50mb approx size video, how can the browser play it almost instantly? Whereas if i fetch the same file via XHR, the download takes approx 2.5 mins after which I can start playing it?</td></tr>
  <tr class="msg" id="L228"><td class="ts-cell"><a class="ts" href="#L228" alt="Mon Jun 26 2017 14:10:53 GMT-0700 (Pacific Daylight Time)">21:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</div></td><td class="msg-cell">The browser is streaming it - playing what it has while it downloads the rest - while XHRing the whole file doesn&#039;t finish until the whole file is downloaded.</td></tr>
  <tr class="msg" id="L229"><td class="ts-cell"><a class="ts" href="#L229" alt="Mon Jun 26 2017 14:11:18 GMT-0700 (Pacific Daylight Time)">21:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</div></td><td class="msg-cell">But if you use fetch(), you can stream the result straight into a &lt;video&gt; element. There are some tutorials out there with examples of this.</td></tr>
  <tr class="msg" id="L230"><td class="ts-cell"><a class="ts" href="#L230" alt="Mon Jun 26 2017 15:36:38 GMT-0700 (Pacific Daylight Time)">22:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=virmaha@irc>virmaha</span>&gt;</div></td><td class="msg-cell">TabAtkins: I see. However, I can&#039;t find fetch + video tutorials. All I could find is <a href="https://jakearchibald.com/2016/streams-ftw/">https://jakearchibald.com/2016/streams-ftw/</a></td></tr>
  <tr class="msg" id="L231"><td class="ts-cell"><a class="ts" href="#L231" alt="Mon Jun 26 2017 16:15:20 GMT-0700 (Pacific Daylight Time)">23:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=ajeffrey_@irc>ajeffrey_</span>&gt;</div></td><td class="msg-cell">Domenic: the pre-insertion check is indented to stop cycles in the DOM,</td></tr>
  <tr class="msg" id="L232"><td class="ts-cell"><a class="ts" href="#L232" alt="Mon Jun 26 2017 16:15:53 GMT-0700 (Pacific Daylight Time)">23:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=ajeffrey_@irc>ajeffrey_</span>&gt;</div></td><td class="msg-cell">but it looks like there&#039;s nothing to stop cycles in the DOM+bc tree.</td></tr>
  <tr class="msg" id="L233"><td class="ts-cell"><a class="ts" href="#L233" alt="Mon Jun 26 2017 16:21:14 GMT-0700 (Pacific Daylight Time)">23:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=ajeffrey_@irc>ajeffrey_</span>&gt;</div></td><td class="msg-cell">That is, can we get into a situation where A is a descendent of B, but B&#039;s browsing context is a child of A&#039;s?</td></tr>
  <tr class="msg" id="L234"><td class="ts-cell"><a class="ts" href="#L234" alt="Mon Jun 26 2017 16:22:08 GMT-0700 (Pacific Daylight Time)">23:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=ajeffrey_@irc>ajeffrey_</span>&gt;</div></td><td class="msg-cell">bz: thoughts ^</td></tr>
  <tr class="msg" id="L235"><td class="ts-cell"><a class="ts" href="#L235" alt="Mon Jun 26 2017 16:47:00 GMT-0700 (Pacific Daylight Time)">23:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">ajeffrey_: don&#039;t think so since stuff is tied to documents</td></tr>
  <tr class="msg" id="L236"><td class="ts-cell"><a class="ts" href="#L236" alt="Mon Jun 26 2017 16:47:16 GMT-0700 (Pacific Daylight Time)">23:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">ajeffrey_: bz doesn&#039;t hang out here unfortunately</td></tr>
  <tr class="msg" id="L237"><td class="ts-cell"><a class="ts" href="#L237" alt="Mon Jun 26 2017 16:50:03 GMT-0700 (Pacific Daylight Time)">23:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=ajeffrey_@irc>ajeffrey_</span>&gt;</div></td><td class="msg-cell">annevk: so what stops it? I can see how DOM is acyclic, but not what in the spec stops examples like <a href="https://github.com/w3c/web-platform-tests/blob/master/html/semantics/embedded-content/the-iframe-element/iframe-append-to-child-document.html">https://github.com/w3c/web-platform-tests/blob/master/html/semantics/embedded-content/the-iframe-element/iframe-append-to-child-document.html</a> from forming cycles in DOM+bc.</td></tr>
  <tr class="msg" id="L238"><td class="ts-cell"><a class="ts" href="#L238" alt="Mon Jun 26 2017 16:50:46 GMT-0700 (Pacific Daylight Time)">23:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">ajeffrey_: <a href="https://dom.spec.whatwg.org/#concept-node-adopt">https://dom.spec.whatwg.org/#concept-node-adopt</a> I&#039;d think</td></tr>
  <tr class="msg" id="L239"><td class="ts-cell"><a class="ts" href="#L239" alt="Mon Jun 26 2017 16:53:20 GMT-0700 (Pacific Daylight Time)">23:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=ajeffrey_@irc>ajeffrey_</span>&gt;</div></td><td class="msg-cell">annevk: I don&#039;t see how that stops it, because &quot;node’s shadow-including inclusive descendants&quot; is just the DOM hierarchy, not anything to do with bcs.</td></tr>
  <tr class="msg" id="L240"><td class="ts-cell"><a class="ts" href="#L240" alt="Mon Jun 26 2017 16:56:14 GMT-0700 (Pacific Daylight Time)">23:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">ajeffrey_: when you append an iframe to its own BC, the iframe holding the BC gets removed and no new BC gets created as there&#039;s no top-level BC</td></tr>
  <tr class="msg" id="L241"><td class="ts-cell"><a class="ts" href="#L241" alt="Mon Jun 26 2017 16:56:29 GMT-0700 (Pacific Daylight Time)">23:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">ajeffrey_: I might be missing something though</td></tr>

</tbody></table></div></div></div></body>
