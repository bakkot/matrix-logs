<!doctype html>
<head>
  <title>#whatwg on 2018-06-19</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "#whatwg";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#whatwg<br>2018-06-19<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2018-06-18" class="nav-link"><span>prev</span></a>
<a href="2018-06-20" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>
<input type="text" id="query" size=25 placeholder="Search #whatwg">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Mon Jun 18 2018 19:08:19 GMT-0700 (Pacific Daylight Time)">02:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">MikeSmith: TabAtkins: it seems like the solution would be to accumulate text/language pairs, then send some mega-JSON to the python process to get it all highlighted in one go, then go back and update the nodes?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Mon Jun 18 2018 23:12:48 GMT-0700 (Pacific Daylight Time)">06:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">Domenic: yeah I guess so, if we wanted to optimize for speed. But that would amount to a major rewrite of what the wattsi code has now</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Mon Jun 18 2018 23:14:40 GMT-0700 (Pacific Daylight Time)">06:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">and it’d feel sad to have to move yet more of the cost of it into the wattsi code to make up for limitiations in the desing of the Python VM</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Mon Jun 18 2018 23:16:44 GMT-0700 (Pacific Daylight Time)">06:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">especially given we started out on doing it this way, with needing to write a JSON serializer in the wattsi code to make up for the poor performance of HTML parsing in Python</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Mon Jun 18 2018 23:25:39 GMT-0700 (Pacific Daylight Time)">06:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">to make the rewrite work, I guess we’d have to make wattsi generate a unique ID for each &lt;pre&gt; node (be making a hash for it whatever), then until we get to the end of the spec source document, collecting/holding all the JSON for the &lt;pre&gt;s of each class into memory with the JSON including their IDs, and pass those bundles (three I guess -) along to the highlighter as an attribute so that it gets</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Mon Jun 18 2018 23:25:45 GMT-0700 (Pacific Daylight Time)">06:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">included in the generated</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Mon Jun 18 2018 23:26:24 GMT-0700 (Pacific Daylight Time)">06:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">...output for the highlighter</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Mon Jun 18 2018 23:28:23 GMT-0700 (Pacific Daylight Time)">06:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">but then we’d need to go back and do another pass through the HTML source to do a lookup of each &lt;pre&gt; against the giant output we get back from the highlighter to looko for the corresponding node</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Mon Jun 18 2018 23:29:39 GMT-0700 (Pacific Daylight Time)">06:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">but we need HTML output from the highlighter, not JSON, so if we did that lookup against the HTML contents we get back, then we’re gonna need to (re)parse it in wattsi</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Mon Jun 18 2018 23:30:55 GMT-0700 (Pacific Daylight Time)">06:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">so actually given all that I don’t even see a way to make it work in practice in wattsi ー no practical way to bundle up all the &lt;pre&gt;s</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Mon Jun 18 2018 23:33:49 GMT-0700 (Pacific Daylight Time)">06:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">I mean, the way the current wattsi code is overall, we need to write each modified &lt;pre&gt; node to the spec output right after we read the unmodified source for it</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Mon Jun 18 2018 23:34:44 GMT-0700 (Pacific Daylight Time)">06:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">and that’s also why we need to do that 4 times for each &lt;pre&gt; instead of once for each</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Mon Jun 18 2018 23:35:38 GMT-0700 (Pacific Daylight Time)">06:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">because we are writing/building 4 different spec versions</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Tue Jun 19 2018 02:44:23 GMT-0700 (Pacific Daylight Time)">09:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: <a href="https://github.com/whatwg/html/issues/2806">https://github.com/whatwg/html/issues/2806</a> seems to contain a proposal for doing range requests for images</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Tue Jun 19 2018 02:44:37 GMT-0700 (Pacific Daylight Time)">09:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">JakeA: and also some confusion about whether that needs to be standardized</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Tue Jun 19 2018 02:45:10 GMT-0700 (Pacific Daylight Time)">09:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">annevk: will jump in, cheers!</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Tue Jun 19 2018 03:23:47 GMT-0700 (Pacific Daylight Time)">10:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">MikeSmith: hmm I thought there would be a way to keep references to all pre nodes in memory, with no IDs or lookups or second pass.</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Tue Jun 19 2018 03:24:28 GMT-0700 (Pacific Daylight Time)">10:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">(Then correlate them by index-in-pre-array &lt;-&gt; index-in-HTML-output-array)</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Tue Jun 19 2018 05:57:44 GMT-0700 (Pacific Daylight Time)">12:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">Domenic: the problem with doing it that way is, there’s content that gets added to the pre nodes by wattsi</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Tue Jun 19 2018 05:58:47 GMT-0700 (Pacific Daylight Time)">12:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">so the highlighter needs to operate not on the raw source by instead on the wattsi-modified/preprocessed versions</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Tue Jun 19 2018 05:59:48 GMT-0700 (Pacific Daylight Time)">12:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">but I have to admit that at this point, I have a somewhat vague recollection of why it needed to be implemented the way I did</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Tue Jun 19 2018 06:00:40 GMT-0700 (Pacific Daylight Time)">13:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">...because I implemented the basis of it 7 or 8 months ago and had a much clearer idea of why then</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Tue Jun 19 2018 06:01:05 GMT-0700 (Pacific Daylight Time)">13:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">but in the mean time it sat for all those months</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Tue Jun 19 2018 06:09:06 GMT-0700 (Pacific Daylight Time)">13:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">anyway as far as the highlighter, it’s not clear to me if there’s something that would prevent the highlighter from being wrapped in a simple web server so that it could run persistently and we avoid repeating the VM startup costs 1121 x 4 times</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Tue Jun 19 2018 06:32:10 GMT-0700 (Pacific Daylight Time)">13:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title=MikeSmith@irc>MikeSmith</span>&gt;</div></td><td class="msg-cell">similar to teh Bikeshed http service or to wptserve or whatever</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Tue Jun 19 2018 06:45:39 GMT-0700 (Pacific Daylight Time)">13:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title=jsx@irc>jsx</span>&gt;</div></td><td class="msg-cell">Hello</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Tue Jun 19 2018 06:45:44 GMT-0700 (Pacific Daylight Time)">13:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title=jsx@irc>jsx</span>&gt;</div></td><td class="msg-cell">I&#039;m trying to use HTML&#039;s maxlength attribute to limit character input. This works as expected with English character, but when I enter Japanese character, it allows me to enter any number of characters, but once the input field is blurred, the text is automatically truncated to fit the maxlength limit.</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Tue Jun 19 2018 06:45:57 GMT-0700 (Pacific Daylight Time)">13:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title=jsx@irc>jsx</span>&gt;</div></td><td class="msg-cell">The issue is found only when entering Japanese, Chinese and Korean characters.</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Tue Jun 19 2018 06:46:18 GMT-0700 (Pacific Daylight Time)">13:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title=jsx@irc>jsx</span>&gt;</div></td><td class="msg-cell">Is this the expected behavior for maxlength for these characters?</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Tue Jun 19 2018 06:46:42 GMT-0700 (Pacific Daylight Time)">13:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title=jsx@irc>jsx</span>&gt;</div></td><td class="msg-cell"><a href="https://jsbin.com/?html,js,output">https://jsbin.com/?html,js,output</a> (works for English chars)</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Tue Jun 19 2018 06:47:00 GMT-0700 (Pacific Daylight Time)">13:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title=jsx@irc>jsx</span>&gt;</div></td><td class="msg-cell">sry, wrong link</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Tue Jun 19 2018 06:47:01 GMT-0700 (Pacific Daylight Time)">13:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title=jsx@irc>jsx</span>&gt;</div></td><td class="msg-cell"><a href="https://jsfiddle.net/bwtf4ake/">https://jsfiddle.net/bwtf4ake/</a></td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Tue Jun 19 2018 06:58:30 GMT-0700 (Pacific Daylight Time)">13:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">Any setTimeout experts here? Is there any reason setTimeout(cb, 10) would call cb in less than 10ms, according to <a href="http://Date.now">Date.now</a>()? It seems to happen in everything but Safari</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Tue Jun 19 2018 06:58:39 GMT-0700 (Pacific Daylight Time)">13:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell"><a href="https://static-misc.glitch.me/set-timeout-delay">https://static-misc.glitch.me/set-timeout-delay</a></td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Tue Jun 19 2018 07:22:00 GMT-0700 (Pacific Daylight Time)">14:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=zcorpan__@irc>zcorpan__</span>&gt;</div></td><td class="msg-cell">JakeA: maybe they &quot;cheat&quot; to get better score on some benchmark? dunno</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Tue Jun 19 2018 07:23:26 GMT-0700 (Pacific Daylight Time)">14:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=zcorpan__@irc>zcorpan__</span>&gt;</div></td><td class="msg-cell">or it takes a while for the first task to be surfaced</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Tue Jun 19 2018 07:24:06 GMT-0700 (Pacific Daylight Time)">14:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">Either would be against the spec I think</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Tue Jun 19 2018 07:24:16 GMT-0700 (Pacific Daylight Time)">14:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: how much earlier than 10ms?</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Tue Jun 19 2018 07:24:19 GMT-0700 (Pacific Daylight Time)">14:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">jsx: I suspect that&#039;s a bug due to usage of an IME, or are you not using that to enter those characters?</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Tue Jun 19 2018 07:24:38 GMT-0700 (Pacific Daylight Time)">14:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: Seems like 9 in Chrome &amp; Firefox. Edge seems to go lower. Saw 5.</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Tue Jun 19 2018 07:24:48 GMT-0700 (Pacific Daylight Time)">14:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: at one point I tried to make firefox never fire early and I believe it caused some interop issues or made things skew too late on average</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Tue Jun 19 2018 07:24:59 GMT-0700 (Pacific Daylight Time)">14:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">innnnnteresting</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Tue Jun 19 2018 07:25:20 GMT-0700 (Pacific Daylight Time)">14:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: in my tests edge seems to be doing much more aggressive coalescing of timers to 5ms boundaries... probably a big win for battery</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Tue Jun 19 2018 07:26:19 GMT-0700 (Pacific Daylight Time)">14:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">also interesting!</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Tue Jun 19 2018 07:26:22 GMT-0700 (Pacific Daylight Time)">14:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: hmm, now I wonder whether timers can be used as a sidechannel</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Tue Jun 19 2018 07:27:32 GMT-0700 (Pacific Daylight Time)">14:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: at least in firefox we have primitives that only allow sleeping at milliseconds boundary, but you can time things at sub-millisecond level with <a href="http://performance.now">performance.now</a>() (and internal timing APIs)</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Tue Jun 19 2018 07:27:43 GMT-0700 (Pacific Daylight Time)">14:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: so we have to decide to round-up or round-down at some point</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Tue Jun 19 2018 07:30:34 GMT-0700 (Pacific Daylight Time)">14:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">makes sense</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Tue Jun 19 2018 07:31:00 GMT-0700 (Pacific Daylight Time)">14:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">anyway, we could always round up... but then all the error will be biased to be late and things will be more likely to drift</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Tue Jun 19 2018 07:31:32 GMT-0700 (Pacific Daylight Time)">14:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: for setInterval() chrome actually has drift correction code that will purposely fire early if the last interval was late... there is a spec issue somewhere to standardize that</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Tue Jun 19 2018 07:32:02 GMT-0700 (Pacific Daylight Time)">14:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</div></td><td class="msg-cell">wanderview: yeah, it makes a lot more sense for setInterval, although yeah it isn&#039;t spec&#039;d</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Tue Jun 19 2018 07:32:58 GMT-0700 (Pacific Daylight Time)">14:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: its hard to say for the sidechannel... this could get more precise in the future (or not as edge is doing)...  I do think it would be hard to rely on precise setTimeout() firing in a cross-browser way</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Tue Jun 19 2018 07:33:43 GMT-0700 (Pacific Daylight Time)">14:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">JakeA: here is the spec issue... I think we have some amount of agreement to do the drift correction: <a href="https://github.com/whatwg/html/issues/3151#issuecomment-339000314">https://github.com/whatwg/html/issues/3151#issuecomment-339000314</a></td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Tue Jun 19 2018 07:37:20 GMT-0700 (Pacific Daylight Time)">14:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: I was thinking that if they are coalesced you might be able to determine what other timers are running</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Tue Jun 19 2018 07:39:57 GMT-0700 (Pacific Daylight Time)">14:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">not sure I understand</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Tue Jun 19 2018 07:43:53 GMT-0700 (Pacific Daylight Time)">14:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">wanderview: it seemed a little similar to the things described in chapter 6 of <a href="https://tom.vg/papers/cross-browser-tracking_woot17.pdf">https://tom.vg/papers/cross-browser-tracking_woot17.pdf</a></td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Tue Jun 19 2018 07:46:07 GMT-0700 (Pacific Daylight Time)">14:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: I&#039;ll have to read that a little later</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Tue Jun 19 2018 07:46:45 GMT-0700 (Pacific Daylight Time)">14:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">annevk: coalescing timers is observable, though... like if you use postMessage() you can see that coallescing re-orders setTimeout(0) in relation to the postMessage</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Tue Jun 19 2018 08:36:40 GMT-0700 (Pacific Daylight Time)">15:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">env() sounds really bizarre &quot;user agents may define additional undocumented environment variable&quot;</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Tue Jun 19 2018 08:37:39 GMT-0700 (Pacific Daylight Time)">15:37</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-14" title=smaug____@irc>smaug____</span></div></td><td class="msg-cell">is surprised one even proposes such thing to the web</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Tue Jun 19 2018 08:37:45 GMT-0700 (Pacific Daylight Time)">15:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">s/variable/variables/</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Tue Jun 19 2018 08:39:58 GMT-0700 (Pacific Daylight Time)">15:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=lgrahl@irc>lgrahl</span>&gt;</div></td><td class="msg-cell">We were wondering if there&#039;s an existing &quot;write to file&quot; API for a ReadableStream in browsers... or something planned?</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Tue Jun 19 2018 09:05:16 GMT-0700 (Pacific Daylight Time)">16:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">lgrahl: what does &quot;file&quot; mean?</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Tue Jun 19 2018 09:09:22 GMT-0700 (Pacific Daylight Time)">16:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=lgrahl@irc>lgrahl</span>&gt;</div></td><td class="msg-cell">annevk: Basically, the use case we had in mind was about downloading a stream to a file. So, you get the download &quot;save to disk&quot; dialog thingy and then stream the data into it.</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Tue Jun 19 2018 09:10:38 GMT-0700 (Pacific Daylight Time)">16:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">I believe you can do that with a service worker and content-disposition header</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Tue Jun 19 2018 09:11:23 GMT-0700 (Pacific Daylight Time)">16:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=lgrahl@irc>lgrahl</span>&gt;</div></td><td class="msg-cell">wanderview: Is there an example for this?</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Tue Jun 19 2018 09:12:05 GMT-0700 (Pacific Daylight Time)">16:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">lgrahl: I think JakeA had an example of service-worker content-disposition to download an .epub file or something... then it would just be normal fetch API body stream support</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Tue Jun 19 2018 09:12:18 GMT-0700 (Pacific Daylight Time)">16:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">sorry, I don&#039;t have anything handy at the moment</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Tue Jun 19 2018 09:12:21 GMT-0700 (Pacific Daylight Time)">16:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=wanderview@irc>wanderview</span>&gt;</div></td><td class="msg-cell">I have to step away</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Tue Jun 19 2018 09:14:13 GMT-0700 (Pacific Daylight Time)">16:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=Mek@irc>Mek</span>&gt;</div></td><td class="msg-cell">fwiw I do also plan to start looking into more explicit writable file type APIs (again, since it&#039;s not like we haven&#039;t had many attempts at that already)... although downloading a stream to a file isn&#039;t quite a use case I had in mind for that work...</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Tue Jun 19 2018 09:16:21 GMT-0700 (Pacific Daylight Time)">16:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=lgrahl@irc>lgrahl</span>&gt;</div></td><td class="msg-cell">Since we have high hopes that we&#039;ll get streams into data channels, this would be really good to have, since one of the core use cases is P2P file sharing.</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Tue Jun 19 2018 09:17:41 GMT-0700 (Pacific Daylight Time)">16:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=lgrahl@irc>lgrahl</span>&gt;</div></td><td class="msg-cell">So far, the only example we can bring up is &quot;pipe an HTTP response into a data channel&quot; which is... interesting but a rather rare use case. :)</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Tue Jun 19 2018 09:20:37 GMT-0700 (Pacific Daylight Time)">16:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=lgrahl@irc>lgrahl</span>&gt;</div></td><td class="msg-cell">Unless of course there are other APIs using (byte) streams I&#039;m not aware of.</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Tue Jun 19 2018 10:29:36 GMT-0700 (Pacific Daylight Time)">17:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=foolip@irc>foolip</span>&gt;</div></td><td class="msg-cell">annevk: I assume you&#039;ve checked that you&#039;re using the right account on <a href="http://crbug.com">crbug.com</a>? Still not working now?</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Tue Jun 19 2018 10:31:24 GMT-0700 (Pacific Daylight Time)">17:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">foolip: I&#039;m still using the same account as before and no, it&#039;s not</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Tue Jun 19 2018 10:31:46 GMT-0700 (Pacific Daylight Time)">17:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">foolip: that is, I only see a comment field, not the giant list of options I got before</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Tue Jun 19 2018 10:32:41 GMT-0700 (Pacific Daylight Time)">17:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</div></td><td class="msg-cell">foolip: I checked with my Mozilla account and that has the same non-privileges; don&#039;t think I&#039;ve got more accounts</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Tue Jun 19 2018 12:42:02 GMT-0700 (Pacific Daylight Time)">19:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">Domenic: am I missing something, or does <a href="https://html.spec.whatwg.org/multipage/custom-elements.html#dom-customelementregistry-upgrade">https://html.spec.whatwg.org/multipage/custom-elements.html#dom-customelementregistry-upgrade</a> end up upgrading already-upgraded elements again?</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Tue Jun 19 2018 12:42:25 GMT-0700 (Pacific Daylight Time)">19:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">I mean, if one for example call the method twice with same param, elements are upgraded twice</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Tue Jun 19 2018 12:46:33 GMT-0700 (Pacific Daylight Time)">19:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title=smaug____@irc>smaug____</span>&gt;</div></td><td class="msg-cell">ah, no, <a href="https://html.spec.whatwg.org/multipage/custom-elements.html#upgrades">https://html.spec.whatwg.org/multipage/custom-elements.html#upgrades</a> will return early</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Tue Jun 19 2018 15:15:05 GMT-0700 (Pacific Daylight Time)">22:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</div></td><td class="msg-cell">Heh, I guess it makes the example in step 1 kinda funny though, since you can now trigger it much more easily.</td></tr>

</tbody></table></div></div></div></body>
