<!doctype html>
<head>
  <title>#whatwg on 2020-04-27</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#whatwg<br>2020-04-27<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2020-04-25" class="nav-link"><span>prev</span></a>
<a href="2020-04-28" class="nav-link"><span style="float:right">next</span></a>
</div>
    
<div class="room-list-wrapper">Active:<br>
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/">WHATWG</a></li>
</ul>
</div>
<br>
<div class="room-list-wrapper">Historical:<br>
<ul class="room-list">
<li><a href="../irc-tc39/">#tc39</a></li>
<li><a href="../irc-tc39-delegates/">#tc39-delegates</a></li>
<li><a href="../irc-tc39-editor-group/">#tc39-editor-group</a></li>
<li><a href="../irc-whatwg/" class="current-room">#whatwg</a></li>
</ul>
</div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs"><div class="log">
<table><tbody id="log-tbody">
  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Mon Apr 27 2020 05:21:52 GMT-0700 (Pacific Daylight Time)">12:21</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell">annevk, I&#039;m trying to spec the suggestion in <a href="https://github.com/whatwg/html/pull/4571#discussion_r373270764">https://github.com/whatwg/html/pull/4571#discussion_r373270764</a> but it seems like the &quot;runnable&quot; check in step 2 of <a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-processing-model">https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-processing-model</a> will break the latter case</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Mon Apr 27 2020 05:21:54 GMT-0700 (Pacific Daylight Time)">12:21</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell">Thoughts?</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Mon Apr 27 2020 05:27:09 GMT-0700 (Pacific Daylight Time)">12:27</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Ms2ger: not really, I see bz left a number of comments there that appear unaddressed as well</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Mon Apr 27 2020 05:28:58 GMT-0700 (Pacific Daylight Time)">12:28</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell">Like what? Entry globals are defined, incumbent is explicitly marked as no consensus, and everything else is about dealing with documents that are not &quot;fully active&quot;, afaict</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Mon Apr 27 2020 05:29:54 GMT-0700 (Pacific Daylight Time)">12:29</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Ms2ger: about confirming what is implemented</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Mon Apr 27 2020 07:20:10 GMT-0700 (Pacific Daylight Time)">14:20</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: <a href="https://github.com/whatwg/html/issues/5484#issuecomment-620015579">https://github.com/whatwg/html/issues/5484#issuecomment-620015579</a> I don&#039;t see how this works given that discarding is currently synchronous, involves script execution, etc.</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Mon Apr 27 2020 07:20:23 GMT-0700 (Pacific Daylight Time)">14:20</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: websites will rely on that</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Mon Apr 27 2020 07:20:40 GMT-0700 (Pacific Daylight Time)">14:20</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: and engines do too</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Mon Apr 27 2020 07:22:09 GMT-0700 (Pacific Daylight Time)">14:22</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: fwiw, I was thinking about this more for &lt;portal&gt;, so there wouldn&#039;t be a backwards compatibility issue there. I suppose there could be &lt;iframe keepalive&gt; or something</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Mon Apr 27 2020 07:22:54 GMT-0700 (Pacific Daylight Time)">14:22</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: well, it depends on how much logic from frames is reused internally</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Mon Apr 27 2020 07:23:10 GMT-0700 (Pacific Daylight Time)">14:23</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: I&#039;m guessing &lt;portal&gt; doesn&#039;t define browsing context et al from scratch</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Mon Apr 27 2020 07:23:32 GMT-0700 (Pacific Daylight Time)">14:23</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: but removal is much more involved than that</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Mon Apr 27 2020 07:24:12 GMT-0700 (Pacific Daylight Time)">14:24</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: I haven&#039;t thought too much about this, but my feeling is iframe &amp; portal should extend something common, in the way audio &amp; video have a common ancestor</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Mon Apr 27 2020 07:24:17 GMT-0700 (Pacific Daylight Time)">14:24</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: as Ryosuke noted multiple elements can be removed at once, script will execute (ideally from a queue as discussed in the various linked PRs)</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Mon Apr 27 2020 07:24:48 GMT-0700 (Pacific Daylight Time)">14:24</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">annevk: what kind of script are we talking about here? Unload?</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Mon Apr 27 2020 07:25:31 GMT-0700 (Pacific Daylight Time)">14:25</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Yeah, though I&#039;m not sure if that&#039;s the full extent of things; again, the status quo is not defined and not interoperable</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Mon Apr 27 2020 07:25:57 GMT-0700 (Pacific Daylight Time)">14:25</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">First it has to be defined before you can realistically make a change here as otherwise too much will be unclear</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Mon Apr 27 2020 07:26:27 GMT-0700 (Pacific Daylight Time)">14:26</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">I recommend reading the issue I linked and perhaps encourage people on Chrome to help solve it as thus far it&#039;s been somewhat tricky to get interest from browsers</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Mon Apr 27 2020 07:31:14 GMT-0700 (Pacific Daylight Time)">14:31</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Yeah, I&#039;m reading through it, the script execution bit just wasn&#039;t clear to me</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Mon Apr 27 2020 07:33:16 GMT-0700 (Pacific Daylight Time)">14:33</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">I think the basic problem is also clear without that, in that you remove the iframe, but it still has a browsing context and so a bunch of things that branch on that break down because it has a browsing context but it&#039;s not in the tree, etc.</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Mon Apr 27 2020 07:33:45 GMT-0700 (Pacific Daylight Time)">14:33</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">The only way to get rid of that is by having an atomic move operation</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Mon Apr 27 2020 07:34:15 GMT-0700 (Pacific Daylight Time)">14:34</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">And even then it might be tricky given rniwa&#039;s comments, though I&#039;m not sure to what extent those things still apply with atomic move</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Mon Apr 27 2020 07:34:55 GMT-0700 (Pacific Daylight Time)">14:34</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">It&#039;s kind of hard to imagine they do, but who knows</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Mon Apr 27 2020 07:35:34 GMT-0700 (Pacific Daylight Time)">14:35</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">I&#039;ll need to dig into the issues more. Bfcache pages seem to survive going away &amp; coming back, so it feels like there&#039;s some kind of mechanism.</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Mon Apr 27 2020 07:36:48 GMT-0700 (Pacific Daylight Time)">14:36</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: that&#039;s top-level browsing contexts only and I think only those without reference to them</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Mon Apr 27 2020 07:38:08 GMT-0700 (Pacific Daylight Time)">14:38</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: not entirely sure about no reference though, that&#039;d be good to confirm</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Mon Apr 27 2020 07:38:25 GMT-0700 (Pacific Daylight Time)">14:38</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">seems likely tbh</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Mon Apr 27 2020 07:39:24 GMT-0700 (Pacific Daylight Time)">14:39</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">Any idea which APIs rely on their nested browsing context&#039;s iframe being connected? Or, an example of one</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Mon Apr 27 2020 07:41:03 GMT-0700 (Pacific Daylight Time)">14:41</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Also that too is undefined</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Mon Apr 27 2020 07:41:21 GMT-0700 (Pacific Daylight Time)">14:41</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">Gotta stop with swamp-based designs</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Mon Apr 27 2020 07:42:27 GMT-0700 (Pacific Daylight Time)">14:42</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">JakeA: maybe search for discard? There’s a bunch I wrote tests for a while back, but I don’t recall offhand</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Mon Apr 27 2020 07:42:54 GMT-0700 (Pacific Daylight Time)">14:42</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">In wpt, or html issues?</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Mon Apr 27 2020 07:42:57 GMT-0700 (Pacific Daylight Time)">14:42</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">That too = bfcache</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Mon Apr 27 2020 07:43:30 GMT-0700 (Pacific Daylight Time)">14:43</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">In HTML itself; things like .parent or .frameElement iirc</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Mon Apr 27 2020 07:47:37 GMT-0700 (Pacific Daylight Time)">14:47</a></td><td class="nick-cell">&lt;<span class="nick nick-7" title=JakeA@irc>JakeA</span>&gt;</td><td class="msg-cell">From a quick scan, `.parent` relies on getting the iframe&#039;s document, which should still be correct. But yeah, I&#039;m sure there&#039;s stuff that doesn&#039;t work.</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Mon Apr 27 2020 08:35:26 GMT-0700 (Pacific Daylight Time)">15:35</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=Ms2ger@irc>Ms2ger</span>&gt;</td><td class="msg-cell">MikeSmith, I noticed that <a href="https://www.w3.org/TR/dom/">https://www.w3.org/TR/dom/</a> redirects to dom.s.w.o, but <a href="https://www.w3.org/TR/domcore/">https://www.w3.org/TR/domcore/</a> doesn&#039;t. Is that intentional?</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Mon Apr 27 2020 11:32:36 GMT-0700 (Pacific Daylight Time)">18:32</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">TabAtkins: is <a href="https://github.com/tabatkins/highlighter/">https://github.com/tabatkins/highlighter/</a> Python3 friendly?</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Mon Apr 27 2020 11:32:51 GMT-0700 (Pacific Daylight Time)">18:32</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</td><td class="msg-cell">Ooh, good question. Probably not, but I&#039;m happy to update.</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Mon Apr 27 2020 11:34:01 GMT-0700 (Pacific Daylight Time)">18:34</a></td><td class="nick-cell">&lt;<span class="nick nick-1" title=Domenic@irc>Domenic</span>&gt;</td><td class="msg-cell">That&#039;d be nice; we&#039;ve got some html-build issues</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Mon Apr 27 2020 11:34:32 GMT-0700 (Pacific Daylight Time)">18:34</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</td><td class="msg-cell">np, i&#039;ll see if i can work on that today</td></tr>
</tbody></table>
</div></div></div></body>
