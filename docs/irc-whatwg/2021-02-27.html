<!doctype html>
<head>
  <title>#whatwg on 2021-02-27</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#whatwg<br>2021-02-27<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2021-02-26" class="nav-link"><span>prev</span></a>
<a href="2021-03-01" class="nav-link"><span style="float:right">next</span></a>
</div>
    
<div class="room-list-wrapper">Active:<br>
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/">WHATWG</a></li>
</ul>
</div>
<br>
<div class="room-list-wrapper">Historical:<br>
<ul class="room-list">
<li><a href="../irc-tc39/">#tc39</a></li>
<li><a href="../irc-tc39-delegates/">#tc39-delegates</a></li>
<li><a href="../irc-tc39-editor-group/">#tc39-editor-group</a></li>
<li><a href="../irc-whatwg/" class="current-room">#whatwg</a></li>
</ul>
</div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs"><div class="log">
<table><tbody id="log-tbody">
  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Sat Feb 27 2021 00:11:31 GMT-0800 (Pacific Standard Time)">08:11</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">andreubotella: oh sorry, I don&#039;t know why I keep getting so confused about this</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Sat Feb 27 2021 00:11:55 GMT-0800 (Pacific Standard Time)">08:11</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">(<a href="https://github.com/whatwg/html/pull/6287">https://github.com/whatwg/html/pull/6287</a> that is)</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Sat Feb 27 2021 00:12:21 GMT-0800 (Pacific Standard Time)">08:12</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=andreubotella@irc>andreubotella</span>&gt;</td><td class="msg-cell">annevk: it&#039;s fine, it&#039;s a lot of details to keep track of</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Sat Feb 27 2021 00:16:08 GMT-0800 (Pacific Standard Time)">08:16</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">andreubotella: yeah, I guess my main concern was the double normalization, first during form submission and then during serialization</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Sat Feb 27 2021 00:16:45 GMT-0800 (Pacific Standard Time)">08:16</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=andreubotella@irc>andreubotella</span>&gt;</td><td class="msg-cell">annevk: yeah, but newline conversion to CRLF is idempotent, so it&#039;s just an optimization issue</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Sat Feb 27 2021 00:16:52 GMT-0800 (Pacific Standard Time)">08:16</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=andreubotella@irc>andreubotella</span>&gt;</td><td class="msg-cell">I added a few notes about that in the PR</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Sat Feb 27 2021 00:21:30 GMT-0800 (Pacific Standard Time)">08:21</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">andreubotella: I&#039;ll add the last two comments as resolved</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Sat Feb 27 2021 00:29:00 GMT-0800 (Pacific Standard Time)">08:29</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">andreubotella: new draft response</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Sat Feb 27 2021 00:29:02 GMT-0800 (Pacific Standard Time)">08:29</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">&gt; I am mainly bothered by the inelegance of normalizing twice. Also, if you use `FormData` with `fetch()` today there is no normalization so it seems somewhat reasonable that if you use `FormData` here there is none either. I could see always normalizing when serializing too, but then ideally form submission itself would not do it (as it would happen later). In the end though, if we want to normalize in during form</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Sat Feb 27 2021 00:29:02 GMT-0800 (Pacific Standard Time)">08:29</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">submission and normalization, that is fine with me as well.</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Sat Feb 27 2021 00:29:47 GMT-0800 (Pacific Standard Time)">08:29</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">s/in//</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Sat Feb 27 2021 00:47:53 GMT-0800 (Pacific Standard Time)">08:47</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=andreubotella@irc>andreubotella</span>&gt;</td><td class="msg-cell">annevk: the intention was to normalize also FormData with fetch</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Sat Feb 27 2021 00:48:11 GMT-0800 (Pacific Standard Time)">08:48</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=andreubotella@irc>andreubotella</span>&gt;</td><td class="msg-cell">but let me check if the PR actually does that</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Sat Feb 27 2021 00:53:24 GMT-0800 (Pacific Standard Time)">08:53</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=andreubotella@irc>andreubotella</span>&gt;</td><td class="msg-cell">right, the urlencoded and text/plain serializations aren&#039;t touched other than to make them work on name-value pairs</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Sat Feb 27 2021 00:53:48 GMT-0800 (Pacific Standard Time)">08:53</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=andreubotella@irc>andreubotella</span>&gt;</td><td class="msg-cell">the normalization happens earlier in the form submission algorithm when it calls &quot;convert an entry list to a list of name-value pairs&quot;</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Sat Feb 27 2021 00:54:24 GMT-0800 (Pacific Standard Time)">08:54</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=andreubotella@irc>andreubotella</span>&gt;</td><td class="msg-cell">for multipart/form-data, the conversion happens in the algorithm itself, and so it&#039;ll work when passing a FormData object to fetch</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Sat Feb 27 2021 00:57:13 GMT-0800 (Pacific Standard Time)">08:57</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=andreubotella@irc>andreubotella</span>&gt;</td><td class="msg-cell">s/conversion/normalization/</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Sat Feb 27 2021 04:05:30 GMT-0800 (Pacific Standard Time)">12:05</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=andreubotella@irc>andreubotella</span>&gt;</td><td class="msg-cell">annevk: would a PR to url to remove file handling in the urlencoded serializer be editorial?</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Sat Feb 27 2021 04:30:16 GMT-0800 (Pacific Standard Time)">12:30</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">andreubotella: yeah I guess so, if no entry point would ever hand it files</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Sat Feb 27 2021 04:31:01 GMT-0800 (Pacific Standard Time)">12:31</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">andreubotella: understood that it also affects FormData with fetch, I guess I should clarify that point</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Sat Feb 27 2021 12:05:31 GMT-0800 (Pacific Standard Time)">20:05</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=GPHemsley@irc>GPHemsley</span>&gt;</td><td class="msg-cell">annevk, Domenic: either of you around, perchance?</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Sat Feb 27 2021 12:43:51 GMT-0800 (Pacific Standard Time)">20:43</a></td><td class="nick-cell">&lt;<span class="nick nick-12" title=annevk@irc>annevk</span>&gt;</td><td class="msg-cell">GPHemsley: I can reply tomorrow if you leave something in a DM or equivalent</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Sat Feb 27 2021 12:44:06 GMT-0800 (Pacific Standard Time)">20:44</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=GPHemsley@irc>GPHemsley</span>&gt;</td><td class="msg-cell">k</td></tr>
</tbody></table>
</div></div></div></body>
