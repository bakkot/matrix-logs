<!doctype html>
<head>
  <title>#tc39 on 2019-12-09</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#tc39<br>2019-12-09<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2019-12-07" class="nav-link"><span>prev</span></a>
<a href="2019-12-11" class="nav-link"><span style="float:right">next</span></a>
</div>
    
<div class="room-list-wrapper">Active:<br>
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/">WHATWG</a></li>
</ul>
</div>
<br>
<div class="room-list-wrapper">Historical:<br>
<ul class="room-list">
<li><a href="../irc-tc39/" class="current-room">#tc39</a></li>
<li><a href="../irc-tc39-delegates/">#tc39-delegates</a></li>
<li><a href="../irc-tc39-editor-group/">#tc39-editor-group</a></li>
<li><a href="../irc-whatwg/">#whatwg</a></li>
</ul>
</div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs"><div class="log">
<table><tbody id="log-tbody">
  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Sun Dec 08 2019 22:20:45 GMT-0800 (Pacific Standard Time)">06:20</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=mathiasbynens@irc>mathiasbynens</span>&gt;</td><td class="msg-cell">devsnek, Bakkot: what&#039;s the Chrome DevTools bug? please file it if you haven&#039;t already, thanks</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Mon Dec 09 2019 00:21:52 GMT-0800 (Pacific Standard Time)">08:21</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">mathiasbynens: reported already <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1031243">https://bugs.chromium.org/p/chromium/issues/detail?id=1031243</a></td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Mon Dec 09 2019 00:24:40 GMT-0800 (Pacific Standard Time)">08:24</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">mathiasbynens: devtools seems to be doing a local parse of the input and using that to decide if it has side effects</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Mon Dec 09 2019 00:25:14 GMT-0800 (Pacific Standard Time)">08:25</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">which seems counter intuitive to the existence of v8&#039;s side effect detection</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Mon Dec 09 2019 01:34:45 GMT-0800 (Pacific Standard Time)">09:34</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=mathiasbynens@irc>mathiasbynens</span>&gt;</td><td class="msg-cell">devsnek: agreed... we should just rely on V8 here instead of trying to &quot;guess&quot; with broken heuristics</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Mon Dec 09 2019 01:35:34 GMT-0800 (Pacific Standard Time)">09:35</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=mathiasbynens@irc>mathiasbynens</span>&gt;</td><td class="msg-cell">we&#039;re fixing it! thanks for pointing that out</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Mon Dec 09 2019 11:37:40 GMT-0800 (Pacific Standard Time)">19:37</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=avp@irc>avp</span>&gt;</td><td class="msg-cell">Can someone explain <a href="https://www.ecma-international.org/ecma-262/10.0/#sec-block-level-function-declarations-web-legacy-compatibility-semantics">https://www.ecma-international.org/ecma-262/10.0/#sec-block-level-function-declarations-web-legacy-compatibility-semantics</a> to me, please? In particular, I&#039;ve got the following code: <a href="https://pastebin.com/Zx0VNUaj">https://pastebin.com/Zx0VNUaj</a> and I want to know where its behavior is specified</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Mon Dec 09 2019 11:38:50 GMT-0800 (Pacific Standard Time)">19:38</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=avp@irc>avp</span>&gt;</td><td class="msg-cell">it seems like it&#039;d have to do with (3.) in that list, but it does say that &quot;No other declaration of f that is not a var declaration occurs within the function code of g&quot; - there is a `let bar = 3` which fails that condition</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Mon Dec 09 2019 11:40:02 GMT-0800 (Pacific Standard Time)">19:40</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">avp the notes at the beginning of the section are just of historical interest - they&#039;re documenting cases where browsers agreed before this was specified in ES2015</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Mon Dec 09 2019 11:40:08 GMT-0800 (Pacific Standard Time)">19:40</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">the actual changes are in B.3.3.1</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Mon Dec 09 2019 11:40:21 GMT-0800 (Pacific Standard Time)">19:40</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">sidebar: you should use the living spec at <a href="https://tc39.es/ecma262/#sec-block-level-function-declarations-web-legacy-compatibility-semantics">https://tc39.es/ecma262/#sec-block-level-function-declarations-web-legacy-compatibility-semantics</a></td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Mon Dec 09 2019 11:41:06 GMT-0800 (Pacific Standard Time)">19:41</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=avp@irc>avp</span>&gt;</td><td class="msg-cell">Bakkot: thanks, i&#039;ll try and use that section to reconcile my mental model</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Mon Dec 09 2019 11:42:10 GMT-0800 (Pacific Standard Time)">19:42</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">B.3.3 is notoriously the most cursed section of the spec though</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Mon Dec 09 2019 11:42:20 GMT-0800 (Pacific Standard Time)">19:42</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">so don&#039;t feel bad for being confused :p</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Mon Dec 09 2019 11:43:34 GMT-0800 (Pacific Standard Time)">19:43</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">the basic semantics are: when you have `function f(){ x() }` within a block, and you could replace that with a `var f` without getting a syntax error, then the semantics of the function are 1) you add a `var f;` to the top of the _containing_ function, 2) you add a `let f = function(){ x() }` at the top of the containing _block_ and 2) when control reaches the actual function declaration within the block, you read from the `let f` and</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Mon Dec 09 2019 11:43:35 GMT-0800 (Pacific Standard Time)">19:43</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell"> write to the `var f`</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Mon Dec 09 2019 11:43:43 GMT-0800 (Pacific Standard Time)">19:43</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">ugh, that second 2) should be a 3) obviously</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Mon Dec 09 2019 11:44:46 GMT-0800 (Pacific Standard Time)">19:44</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=avp@irc>avp</span>&gt;</td><td class="msg-cell">Bakkot: that helps a lot - deciphering the intent of B.3.3.1 was daunting</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Mon Dec 09 2019 11:57:20 GMT-0800 (Pacific Standard Time)">19:57</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">avp also you should use strict mode so this doesn&#039;t happen :P</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Mon Dec 09 2019 12:01:55 GMT-0800 (Pacific Standard Time)">20:01</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">JSC has bugs for B.3.3 early errors that I&#039;ve been too scared to fix</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Mon Dec 09 2019 12:04:02 GMT-0800 (Pacific Standard Time)">20:04</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">everyone does</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Mon Dec 09 2019 12:04:04 GMT-0800 (Pacific Standard Time)">20:04</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">the spec does</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Mon Dec 09 2019 12:04:25 GMT-0800 (Pacific Standard Time)">20:04</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell"><a href="https://github.com/tc39/ecma262/issues/913">https://github.com/tc39/ecma262/issues/913</a> etc</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Mon Dec 09 2019 12:19:12 GMT-0800 (Pacific Standard Time)">20:19</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">it&#039;s functions all the way down</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Mon Dec 09 2019 13:13:46 GMT-0800 (Pacific Standard Time)">21:13</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">&gt; dysfunction all the way down</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Mon Dec 09 2019 13:13:46 GMT-0800 (Pacific Standard Time)">21:13</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">FTFY</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Mon Dec 09 2019 13:38:59 GMT-0800 (Pacific Standard Time)">21:38</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">Object.assign(Object.prototype,{get:()=&gt;{}, set:(v)=&gt;{}, value:undefined}); wrecks so much</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Mon Dec 09 2019 13:39:22 GMT-0800 (Pacific Standard Time)">21:39</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">it kinda seems like you have to use null prototypes to guard against it</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Mon Dec 09 2019 13:45:47 GMT-0800 (Pacific Standard Time)">21:45</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">bradleymeck: ? what key are you trying to defineProperty there?</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Mon Dec 09 2019 13:49:01 GMT-0800 (Pacific Standard Time)">21:49</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">none, just if Object.prototype has all 3 of those keys Object.defineProperty stops working unless you use null prototypes like Object.defineProperty(obj, &#039;propname&#039;, {__proto__:null, value: &#039;value&#039;})</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Mon Dec 09 2019 13:49:20 GMT-0800 (Pacific Standard Time)">21:49</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">since it sees stuff up the proto chain and says it can&#039;t be both an accessor and data prop</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Mon Dec 09 2019 13:49:40 GMT-0800 (Pacific Standard Time)">21:49</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">was staring at my node pr and noticed we don&#039;t guard this currently</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Mon Dec 09 2019 13:49:43 GMT-0800 (Pacific Standard Time)">21:49</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">ohhhhh wow i just realized what you mean</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Mon Dec 09 2019 13:50:02 GMT-0800 (Pacific Standard Time)">21:50</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">i wonder if it&#039;d be web compatible to change that somehow</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Mon Dec 09 2019 13:50:29 GMT-0800 (Pacific Standard Time)">21:50</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">well idk but running that little script on all my open tabs killed all of them except some static sites</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Mon Dec 09 2019 13:50:51 GMT-0800 (Pacific Standard Time)">21:50</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">likely we can&#039;t change it though</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Mon Dec 09 2019 13:51:59 GMT-0800 (Pacific Standard Time)">21:51</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">we can&#039;t make it be own properties i&#039;m sure, but i wonder if we could effectively make it be &quot;Get&quot; but stop before Object.prototype</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Mon Dec 09 2019 13:52:16 GMT-0800 (Pacific Standard Time)">21:52</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">that seems pretty weird too</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Mon Dec 09 2019 13:52:18 GMT-0800 (Pacific Standard Time)">21:52</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">better question</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Mon Dec 09 2019 13:52:24 GMT-0800 (Pacific Standard Time)">21:52</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">who is doing Object.assign(Object.prototype,{get:()=&gt;{}, set:(v)=&gt;{}, value:undefined})</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Mon Dec 09 2019 13:52:52 GMT-0800 (Pacific Standard Time)">21:52</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">me, checking to see if we survive it in node (we don&#039;t)</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Mon Dec 09 2019 13:53:15 GMT-0800 (Pacific Standard Time)">21:53</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">once you get implicit set hooks things look pretty dicey about data exfiltration across modules</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Mon Dec 09 2019 13:53:32 GMT-0800 (Pacific Standard Time)">21:53</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">but ü§∑ this is more just locking down stuff to survive craziness</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Mon Dec 09 2019 13:53:57 GMT-0800 (Pacific Standard Time)">21:53</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">we had a couple of people snooping internals and doing bad things in the long past and we started to move to primordials in part because of that</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Mon Dec 09 2019 13:54:56 GMT-0800 (Pacific Standard Time)">21:54</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">i remember symbol polyfills were able to patch node</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Mon Dec 09 2019 13:55:08 GMT-0800 (Pacific Standard Time)">21:55</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">so that util.inspect and stuff worked with them</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Mon Dec 09 2019 13:55:52 GMT-0800 (Pacific Standard Time)">21:55</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">causing it to always error by filling out both get/set always or value is probably good enough honestly</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Mon Dec 09 2019 13:56:39 GMT-0800 (Pacific Standard Time)">21:56</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">ideally we would use some null proto shenanigans but slowdown on benchmarks is pretty bad</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Mon Dec 09 2019 13:57:47 GMT-0800 (Pacific Standard Time)">21:57</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">i just don&#039;t see why its worth guarding against</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Mon Dec 09 2019 13:57:53 GMT-0800 (Pacific Standard Time)">21:57</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">bradleymeck: another alternative is that the error for &quot;no get/set + value&quot; could be made to only throw when get/set is not undefined, instead of just present</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Mon Dec 09 2019 13:58:13 GMT-0800 (Pacific Standard Time)">21:58</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">bradleymeck: that way you&#039;d always be able to locally override the shenanigans with `get: undefined, set: undefined` for data properties</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Mon Dec 09 2019 13:58:25 GMT-0800 (Pacific Standard Time)">21:58</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">altho i guess that wouldn&#039;t protect you for accessors</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Mon Dec 09 2019 13:58:46 GMT-0800 (Pacific Standard Time)">21:58</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">devsnek: same thing as why any other part of the runtime is worth being robust</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Mon Dec 09 2019 13:59:12 GMT-0800 (Pacific Standard Time)">21:59</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">i don&#039;t really get the overall goal tbh</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Mon Dec 09 2019 14:00:18 GMT-0800 (Pacific Standard Time)">22:00</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">user code shouldn&#039;t be able to break the platform?</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Mon Dec 09 2019 14:00:57 GMT-0800 (Pacific Standard Time)">22:00</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">mostly its to get reliable behavior when things go wrong, node has access to things like shell execution and often people send authorization strings to node in various ways, you don&#039;t want people snooping on strings and you don&#039;t want shell execution to happen. it gets hard to understand what a user can accidently load (see all those malicious packages people install) and have it undermine the default platform APIs</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Mon Dec 09 2019 14:01:40 GMT-0800 (Pacific Standard Time)">22:01</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">malicious code can just `require(&#039;inspector&#039;)` and read every value of every variable in the entire codebase</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Mon Dec 09 2019 14:01:49 GMT-0800 (Pacific Standard Time)">22:01</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">so, make it just ignore anything strange and/or make it survive anything strange to avoid leaking data or allow accidental execution. accidental execution is hard to avoid in JS</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Mon Dec 09 2019 14:02:07 GMT-0800 (Pacific Standard Time)">22:02</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">devsnek: not if you use a policy that doesn&#039;t allow it</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Mon Dec 09 2019 14:02:17 GMT-0800 (Pacific Standard Time)">22:02</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">which is why we have started making efforts to use em</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Mon Dec 09 2019 14:02:51 GMT-0800 (Pacific Standard Time)">22:02</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">assuming the code you&#039;ve explicitly pulled in is malicious is like</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Mon Dec 09 2019 14:03:11 GMT-0800 (Pacific Standard Time)">22:03</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">you&#039;ve already lost</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Mon Dec 09 2019 14:03:21 GMT-0800 (Pacific Standard Time)">22:03</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">you either need full isolation</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Mon Dec 09 2019 14:03:25 GMT-0800 (Pacific Standard Time)">22:03</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">devsnek: we work with developers who install 3rd party code all the time. you build up layers of defenses like anything else</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Mon Dec 09 2019 14:03:25 GMT-0800 (Pacific Standard Time)">22:03</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">or you need to trust the code somehow</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Mon Dec 09 2019 14:03:43 GMT-0800 (Pacific Standard Time)">22:03</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">even with full isolation you can get confusion problems that make the isolated payload malicious</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Mon Dec 09 2019 14:04:08 GMT-0800 (Pacific Standard Time)">22:04</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">seems like an inherently losing battle tbh</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Mon Dec 09 2019 14:04:42 GMT-0800 (Pacific Standard Time)">22:04</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">devsnek: the entire concept of SES is winning that battle, isn&#039;t it?</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Mon Dec 09 2019 14:04:46 GMT-0800 (Pacific Standard Time)">22:04</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">or attempting to</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Mon Dec 09 2019 14:05:00 GMT-0800 (Pacific Standard Time)">22:05</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">ü§∑üèª</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Mon Dec 09 2019 14:05:08 GMT-0800 (Pacific Standard Time)">22:05</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">i think security always will be a race of sorts yea. though i don&#039;t think we are really trying to prevent everything, but instead make auditing feasible</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Mon Dec 09 2019 14:05:20 GMT-0800 (Pacific Standard Time)">22:05</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">i think SES solves a symptom of the problem</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Mon Dec 09 2019 14:05:22 GMT-0800 (Pacific Standard Time)">22:05</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">not the problem</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Mon Dec 09 2019 14:05:48 GMT-0800 (Pacific Standard Time)">22:05</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">even reading code line by line myself i&#039;m not fully confident in it not having some odd effect (i had one with a sticky regexp today!)</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Mon Dec 09 2019 14:06:09 GMT-0800 (Pacific Standard Time)">22:06</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">bradleymeck: wait you had a real use case for the sticky flag??</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Mon Dec 09 2019 14:06:22 GMT-0800 (Pacific Standard Time)">22:06</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">ljharb: i saw it being used and i removed it</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Mon Dec 09 2019 14:06:30 GMT-0800 (Pacific Standard Time)">22:06</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">cause lastIndex was being weird with .search</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Mon Dec 09 2019 14:06:55 GMT-0800 (Pacific Standard Time)">22:06</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">anyways, i do want to use shell commands so it isn&#039;t like i can ever really trust anything</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Mon Dec 09 2019 14:08:19 GMT-0800 (Pacific Standard Time)">22:08</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">aha</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Mon Dec 09 2019 14:08:55 GMT-0800 (Pacific Standard Time)">22:08</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">ljharb: the idea was to match the last &quot; in a quoted string but it wasn&#039;t working right</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Mon Dec 09 2019 14:09:23 GMT-0800 (Pacific Standard Time)">22:09</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">misplaced sticky flags won&#039;t exfiltrate your tokens</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Mon Dec 09 2019 14:10:16 GMT-0800 (Pacific Standard Time)">22:10</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">devsnek: no, but it did change a parser and we got bad data that bypassed some checks!</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Mon Dec 09 2019 14:15:30 GMT-0800 (Pacific Standard Time)">22:15</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">you can always keep structured data structured... bugs exist of course but these systems aren&#039;t inherently fallible</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Mon Dec 09 2019 14:20:01 GMT-0800 (Pacific Standard Time)">22:20</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">devsnek: not all data is provided to you in a structured format; you can&#039;t get away from parsing untrusted input sometimes</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Mon Dec 09 2019 14:20:36 GMT-0800 (Pacific Standard Time)">22:20</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">even if it is structured it can be bad to intake naively (&quot;__proto__&quot; from json payloads)</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Mon Dec 09 2019 14:20:54 GMT-0800 (Pacific Standard Time)">22:20</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">I mean the output of the parser</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Mon Dec 09 2019 14:21:15 GMT-0800 (Pacific Standard Time)">22:21</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">it&#039;s still the output of the parser, and you can know it may be unsafe</td></tr>
</tbody></table>
</div></div></div></body>
