<!doctype html>
<head>
  <title>#tc39 on 2020-07-22</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "#tc39";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#tc39<br>2020-07-22<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2020-07-21" class="nav-link"><span>prev</span></a>
<a href="2020-07-23" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>
<input type="text" id="query" size=25 placeholder="Search #tc39">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Jul 21 2020 20:04:14 GMT-0700 (Pacific Daylight Time)">03:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">engine262 rewrite now failing fewer than 10,000 tests ðŸŽ‰</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Jul 21 2020 20:04:30 GMT-0700 (Pacific Daylight Time)">03:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=leobalter@irc>leobalter</span>&gt;</div></td><td class="msg-cell">Nice one!</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Jul 21 2020 20:04:46 GMT-0700 (Pacific Daylight Time)">03:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">its mostly early errors at this point :(</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue Jul 21 2020 20:04:56 GMT-0700 (Pacific Daylight Time)">03:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">still don&#039;t have a great way to do early errors</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Tue Jul 21 2020 20:05:45 GMT-0700 (Pacific Daylight Time)">03:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">might rip out all the early error stuff i currently have and make it a second pass</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Tue Jul 21 2020 20:07:22 GMT-0700 (Pacific Daylight Time)">03:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">traditionally early errors are part of the parser</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Tue Jul 21 2020 20:08:10 GMT-0700 (Pacific Daylight Time)">03:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">yeah still part of the parser api</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Tue Jul 21 2020 20:08:29 GMT-0700 (Pacific Daylight Time)">03:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">i mean like, `parseScriptBody` wouldn&#039;t be what checks for duplicate lexical bindings</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Tue Jul 21 2020 20:08:45 GMT-0700 (Pacific Daylight Time)">03:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">I mean it could be</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Tue Jul 21 2020 20:08:51 GMT-0700 (Pacific Daylight Time)">03:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">everything is a mess</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Tue Jul 21 2020 20:08:56 GMT-0700 (Pacific Daylight Time)">03:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">`a.await` is a parse error rn</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Tue Jul 21 2020 20:09:16 GMT-0700 (Pacific Daylight Time)">03:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">i&#039;m liking the idea of shift&#039;s reduce thing</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Tue Jul 21 2020 20:46:53 GMT-0700 (Pacific Daylight Time)">03:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">i wonder if it would be web compatible to make evaluators able to throw AggregateErrors instead of SyntaxError</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Tue Jul 21 2020 21:17:20 GMT-0700 (Pacific Daylight Time)">04:17</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-6" title=howdoi@irc>howdoi</span></div></td><td class="msg-cell">10,000 tests! wow! </td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed Jul 22 2020 06:26:11 GMT-0700 (Pacific Daylight Time)">13:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title=gibson042@irc>gibson042</span>&gt;</div></td><td class="msg-cell">the link for Decorators slides at <a href="https://github.com/tc39/agendas/blob/master/2020/07.md">https://github.com/tc39/agendas/blob/master/2020/07.md</a> and in the notes doc doesn&#039;t work, can someone involved with the proposal fix it?</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed Jul 22 2020 08:11:17 GMT-0700 (Pacific Daylight Time)">15:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">what if function parameters had elisions</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Wed Jul 22 2020 08:12:51 GMT-0700 (Pacific Daylight Time)">15:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">`Object.defineProperty(new Proxy({}, {getOwnProperty(o, k) {return {value:1}}}), &#039;why&#039;, {value:2})` is... strange</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Wed Jul 22 2020 08:14:36 GMT-0700 (Pacific Daylight Time)">15:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">`{ let o = new Proxy({}, {getOwnPropertyDescriptor(o, k) {return {value:1}}}); Object.defineProperty(o, &#039;why&#039;, {value:2}).why; }` =&gt; 2</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Wed Jul 22 2020 08:14:56 GMT-0700 (Pacific Daylight Time)">15:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">`{ let o = new Proxy({}, {getOwnPropertyDescriptor(o, k) {return {value:1}}}); o.why; Object.defineProperty(o, &#039;why&#039;, {value:2}).why; }` =&gt; 2</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Wed Jul 22 2020 08:15:17 GMT-0700 (Pacific Daylight Time)">15:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">{ let o = new Proxy({}, {getOwnPropertyDescriptor(o, k) {return {value:1}}}); Object.getOwnPropertyDescriptor(o, &#039;why&#039;); Object.defineProperty(o, &#039;why&#039;, {value:2}); } =&gt; error</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Wed Jul 22 2020 08:15:46 GMT-0700 (Pacific Daylight Time)">15:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">you can read the non-configurable value</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Wed Jul 22 2020 08:16:01 GMT-0700 (Pacific Daylight Time)">15:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">and you can replace it, as long as you don&#039;t check if it is configurable</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Wed Jul 22 2020 08:16:29 GMT-0700 (Pacific Daylight Time)">15:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">the `get` trap being distinct from the `getOwnPropertyDescriptor` trap is a bit weird, yeah</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Wed Jul 22 2020 08:17:41 GMT-0700 (Pacific Daylight Time)">15:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">bradleymeck in your last example it&#039;s the `Object.getOwnPropertyDescriptor` which  throws, not the `Object.defineProperty`</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Wed Jul 22 2020 08:18:53 GMT-0700 (Pacific Daylight Time)">15:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">also confusing</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Wed Jul 22 2020 08:19:28 GMT-0700 (Pacific Daylight Time)">15:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">you can read it, but not see its descriptor?</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Wed Jul 22 2020 08:19:37 GMT-0700 (Pacific Daylight Time)">15:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">what is this hell</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Wed Jul 22 2020 08:22:17 GMT-0700 (Pacific Daylight Time)">15:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">&gt; the `get` trap being distinct from the `getOwnPropertyDescriptor` trap is a bit weird, yeah</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Wed Jul 22 2020 08:22:41 GMT-0700 (Pacific Daylight Time)">15:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">i&#039;m learning yea</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Wed Jul 22 2020 08:27:35 GMT-0700 (Pacific Daylight Time)">15:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">proxies are strange</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Wed Jul 22 2020 08:29:42 GMT-0700 (Pacific Daylight Time)">15:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">reflection always gets strange eventually</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Wed Jul 22 2020 11:22:11 GMT-0700 (Pacific Daylight Time)">18:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">what is a JS builtin that takes an options bag ?</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Wed Jul 22 2020 11:22:57 GMT-0700 (Pacific Daylight Time)">18:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</div></td><td class="msg-cell">bradleymeck: 262 doesn&#039;t really have any, unless you count a Proxy handler, or Object.defineProperties/Object.create&#039;s second argument</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Wed Jul 22 2020 11:23:09 GMT-0700 (Pacific Daylight Time)">18:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">no, per the discussion we just had</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Wed Jul 22 2020 11:23:30 GMT-0700 (Pacific Daylight Time)">18:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">handler is thing which gets &quot;this&quot; value apparently</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Wed Jul 22 2020 11:23:37 GMT-0700 (Pacific Daylight Time)">18:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">options bag, doesn&#039;t</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Wed Jul 22 2020 11:23:46 GMT-0700 (Pacific Daylight Time)">18:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">defineProperties kind of?</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Wed Jul 22 2020 11:23:53 GMT-0700 (Pacific Daylight Time)">18:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</div></td><td class="msg-cell">there&#039;s nothing in 262 that takes a function off an object and calls it directly</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Wed Jul 22 2020 11:23:59 GMT-0700 (Pacific Daylight Time)">18:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</div></td><td class="msg-cell">in 402, there&#039;s tons of examples tho</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Wed Jul 22 2020 11:24:03 GMT-0700 (Pacific Daylight Time)">18:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">it doesn&#039;t really configure the algorithm</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Wed Jul 22 2020 11:24:14 GMT-0700 (Pacific Daylight Time)">18:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">should we cross ref 402 in the how-we-work term list?</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Wed Jul 22 2020 11:35:21 GMT-0700 (Pacific Daylight Time)">18:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">how about requisition() instead of upsert()/emplace()</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Wed Jul 22 2020 11:36:11 GMT-0700 (Pacific Daylight Time)">18:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=leobalter@irc>leobalter</span>&gt;</div></td><td class="msg-cell">this proposal would be great if we had Decorators</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Wed Jul 22 2020 11:36:44 GMT-0700 (Pacific Daylight Time)">18:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</div></td><td class="msg-cell">ensure()?</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Wed Jul 22 2020 11:36:51 GMT-0700 (Pacific Daylight Time)">18:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">what if we made a new kind of function declaration</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Wed Jul 22 2020 11:36:58 GMT-0700 (Pacific Daylight Time)">18:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">that wasn&#039;t hoisted</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Wed Jul 22 2020 11:37:04 GMT-0700 (Pacific Daylight Time)">18:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">then we could just do normal style generators</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Wed Jul 22 2020 11:37:07 GMT-0700 (Pacific Daylight Time)">18:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">decorators*</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Wed Jul 22 2020 11:41:54 GMT-0700 (Pacific Daylight Time)">18:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=leobalter@irc>leobalter</span>&gt;</div></td><td class="msg-cell">`await @all x`</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Wed Jul 22 2020 11:42:26 GMT-0700 (Pacific Daylight Time)">18:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=leobalter@irc>leobalter</span>&gt;</div></td><td class="msg-cell">for me this looks better than `await.all x`, not going through stacking trace issues</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Wed Jul 22 2020 11:43:01 GMT-0700 (Pacific Daylight Time)">18:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=leobalter@irc>leobalter</span>&gt;</div></td><td class="msg-cell">I&#039;d be pretty satisfied with `await * x`, only giving sugar for Promise.all</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Wed Jul 22 2020 11:43:07 GMT-0700 (Pacific Daylight Time)">18:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">what about</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Wed Jul 22 2020 11:43:12 GMT-0700 (Pacific Daylight Time)">18:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">`for await concurrent (const x of y) {}`</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Wed Jul 22 2020 11:43:38 GMT-0700 (Pacific Daylight Time)">18:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">~= `await Promise.all(<a href="http://y.map">y.map</a>((x) =&gt; {}))`</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Wed Jul 22 2020 11:44:51 GMT-0700 (Pacific Daylight Time)">18:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=leobalter@irc>leobalter</span>&gt;</div></td><td class="msg-cell">devsnek: probably a separate discussion but I&#039;d be up to discuss it as well</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Wed Jul 22 2020 11:44:54 GMT-0700 (Pacific Daylight Time)">18:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">devsnek that interacts weirdly with abrupt completions</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Wed Jul 22 2020 11:45:43 GMT-0700 (Pacific Daylight Time)">18:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">it seems like it would lead to a lot more concurrency bugs than the current patterns</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Wed Jul 22 2020 11:46:16 GMT-0700 (Pacific Daylight Time)">18:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">i guess the hard part would be deciding what `break` does</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Wed Jul 22 2020 11:46:21 GMT-0700 (Pacific Daylight Time)">18:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">everything else seems well defined</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Wed Jul 22 2020 11:47:57 GMT-0700 (Pacific Daylight Time)">18:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">presumably `return` exits the function as soon as any iteration hits it, and it&#039;s just a race?</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Wed Jul 22 2020 11:48:07 GMT-0700 (Pacific Daylight Time)">18:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">that is the &quot;a lot more concurrency bugs&quot; thing</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Wed Jul 22 2020 11:48:37 GMT-0700 (Pacific Daylight Time)">18:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">oh yeah return</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Wed Jul 22 2020 11:48:45 GMT-0700 (Pacific Daylight Time)">18:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">rkirsling: kind of, but idk how that implies potential update</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Wed Jul 22 2020 11:49:03 GMT-0700 (Pacific Daylight Time)">18:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">Bakkot: the map is more about mapping to async functions, not the result of those async functions</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Wed Jul 22 2020 11:49:42 GMT-0700 (Pacific Daylight Time)">18:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">devsnek I am not sure what that means</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Wed Jul 22 2020 11:49:45 GMT-0700 (Pacific Daylight Time)">18:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">or, like, why it matters</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Wed Jul 22 2020 11:49:57 GMT-0700 (Pacific Daylight Time)">18:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">I know how Promise.all works I just don&#039;t know why you are mentioning this</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Wed Jul 22 2020 11:50:06 GMT-0700 (Pacific Daylight Time)">18:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</div></td><td class="msg-cell">bradleymeck: true. was all I could think of at that moment though</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Wed Jul 22 2020 11:54:37 GMT-0700 (Pacific Daylight Time)">18:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">this is interesting <a href="https://es.discourse.group/t/nan-trapping-operators/402">https://es.discourse.group/t/nan-trapping-operators/402</a></td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Wed Jul 22 2020 11:55:02 GMT-0700 (Pacific Daylight Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">rkirsling: .summon()?</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Wed Jul 22 2020 11:55:07 GMT-0700 (Pacific Daylight Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title=michaelficarra@irc>michaelficarra</span>&gt;</div></td><td class="msg-cell">jackworks: the proposal I was referring to was <a href="https://es.discourse.group/t/array-prototype-uniqby/138">https://es.discourse.group/t/array-prototype-uniqby/138</a></td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Wed Jul 22 2020 11:55:09 GMT-0700 (Pacific Daylight Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</div></td><td class="msg-cell">nice</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Wed Jul 22 2020 11:55:48 GMT-0700 (Pacific Daylight Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">.claim is pretty good</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Wed Jul 22 2020 12:01:35 GMT-0700 (Pacific Daylight Time)">19:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">do we have any knowledge of static JS tools that assume after a map.has(k) === true that map.get(k) should get a value that does exist</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Wed Jul 22 2020 12:01:49 GMT-0700 (Pacific Daylight Time)">19:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">also how do people feel about .get(k) firing a user code trap?</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Wed Jul 22 2020 12:15:15 GMT-0700 (Pacific Daylight Time)">19:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=jridgewell@irc>jridgewell</span>&gt;</div></td><td class="msg-cell">devsnek: I think this is at the wrong poit</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Wed Jul 22 2020 12:15:19 GMT-0700 (Pacific Daylight Time)">19:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=jridgewell@irc>jridgewell</span>&gt;</div></td><td class="msg-cell">point**</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Wed Jul 22 2020 12:15:29 GMT-0700 (Pacific Daylight Time)">19:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=jridgewell@irc>jridgewell</span>&gt;</div></td><td class="msg-cell">You&#039;d want to throw when you generate the NaN, not when you compare with it.</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Wed Jul 22 2020 12:15:55 GMT-0700 (Pacific Daylight Time)">19:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=jridgewell@irc>jridgewell</span>&gt;</div></td><td class="msg-cell">bradleymeck: Typescript doesn&#039;t, last I checked</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Wed Jul 22 2020 12:15:58 GMT-0700 (Pacific Daylight Time)">19:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">jridgewell: `nonanscope {}`</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Wed Jul 22 2020 12:15:58 GMT-0700 (Pacific Daylight Time)">19:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=jackworks@irc>jackworks</span>&gt;</div></td><td class="msg-cell">devsnek: &quot;`for await concurrent (const x of y) {}`&quot; yeah, I always want to have some kind of concurrent control over `for await` loops. maybe even further, with args `for await concurrent 4` means max 4 running or `for await concurrent _identifier_` to refer a custom task dispatcher</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Wed Jul 22 2020 12:17:43 GMT-0700 (Pacific Daylight Time)">19:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=jackworks@irc>jackworks</span>&gt;</div></td><td class="msg-cell">Bakkot: yeah, maybe we ban the &quot;break&quot; or &quot;return&quot; only leave &quot;continue&quot; in `for await concurrent` like the do expression did</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Wed Jul 22 2020 12:21:01 GMT-0700 (Pacific Daylight Time)">19:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">jackworks yeah, though I would still worry about closed-over values</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Wed Jul 22 2020 12:21:19 GMT-0700 (Pacific Daylight Time)">19:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=jackworks@irc>jackworks</span>&gt;</div></td><td class="msg-cell">I remember there was a &quot;use strong&quot; in v8 that will throw immediately when a math operation yielding NaN, I like that idea, not in the language, but as a debugger tool.</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Wed Jul 22 2020 12:21:21 GMT-0700 (Pacific Daylight Time)">19:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">for loops it is very common to have, like, `let x; for (...) { if (test) x = whatever }`</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Wed Jul 22 2020 12:21:31 GMT-0700 (Pacific Daylight Time)">19:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">which, if the loop is concurrent, is probably a bug</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Wed Jul 22 2020 12:21:56 GMT-0700 (Pacific Daylight Time)">19:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">you can have the same thing with Promise.all, of course, but it is much harder to run into</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Wed Jul 22 2020 12:21:56 GMT-0700 (Pacific Daylight Time)">19:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=jackworks@irc>jackworks</span>&gt;</div></td><td class="msg-cell">Oh maybe we can suggest v8 to add a &quot;Pause on NaN calculation&quot;</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Wed Jul 22 2020 12:23:46 GMT-0700 (Pacific Daylight Time)">19:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=jackworks@irc>jackworks</span>&gt;</div></td><td class="msg-cell">&quot;if the loop is concurrent, is probably a bug&quot; yeah but since it is opt-in, developer should learn about what is race condition</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Wed Jul 22 2020 12:24:01 GMT-0700 (Pacific Daylight Time)">19:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">ehhhhhhhhhhhhhhhh</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Wed Jul 22 2020 12:24:14 GMT-0700 (Pacific Daylight Time)">19:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">concurrency bugs are notoriously one of the Hard Problems</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Wed Jul 22 2020 12:24:26 GMT-0700 (Pacific Daylight Time)">19:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">I would be very, very reluctant to introduce an affordance which makes them easier to run into</td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Wed Jul 22 2020 12:25:13 GMT-0700 (Pacific Daylight Time)">19:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">I do not find &quot;developers should be careful&quot; a compelling argument in this case, especially given how hard concurrency bugs are to avoid in codebases that don&#039;t have Rust-style ownership or similar guarantees</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Wed Jul 22 2020 12:25:26 GMT-0700 (Pacific Daylight Time)">19:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=jackworks@irc>jackworks</span>&gt;</div></td><td class="msg-cell">&quot;Promise.all, of course, but it is much harder to run into&quot; agree, but the problem is today, async concurrent calculation is pain to write `await Promise.all(<a href="http://arr.map">arr.map</a>(async x=&gt; ...))` too tedious</td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Wed Jul 22 2020 12:29:35 GMT-0700 (Pacific Daylight Time)">19:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=jackworks@irc>jackworks</span>&gt;</div></td><td class="msg-cell">&quot;very reluctant to introduce an affordance which makes them easier to run into&quot; reasonable... so we just let async concurrent pain to write, to let devs write serial async code? at least for me, sometimes it&#039;s really safe to do the async concurrent calculation but I don&#039;t want to write `await Promise.all(<a href="http://arr.map">arr.map</a>(async x=&gt; ...)) ` these bunch of code so I let it run in serial</td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Wed Jul 22 2020 12:31:36 GMT-0700 (Pacific Daylight Time)">19:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">I am happy to explore affordances which make it easier to write concurrent code; I don&#039;t think `await.all` would have the same problem as `for await concurrent`, for example</td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Wed Jul 22 2020 12:31:39 GMT-0700 (Pacific Daylight Time)">19:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=jackworks@irc>jackworks</span>&gt;</div></td><td class="msg-cell">I think WeakRef and FinalizationRegistry are applicable to the same argument. they&#039;re easy to misuse but they&#039;re still added to the 262 and <a href="http://mdn.io">mdn.io</a> gives warnings on it &quot;Avoid where possible&quot;</td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Wed Jul 22 2020 12:32:03 GMT-0700 (Pacific Daylight Time)">19:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">We would never have added WeakRefs if they hadn&#039;t been necessitated by wasm</td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Wed Jul 22 2020 12:32:30 GMT-0700 (Pacific Daylight Time)">19:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=jackworks@irc>jackworks</span>&gt;</div></td><td class="msg-cell">lol</td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Wed Jul 22 2020 12:32:36 GMT-0700 (Pacific Daylight Time)">19:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">but they&#039;re a fundamental capability, whereas `for await concurrent` is not a fundamental capability</td></tr>
  <tr class="msg" id="L100"><td class="ts-cell"><a class="ts" href="#L100" alt="Wed Jul 22 2020 12:34:05 GMT-0700 (Pacific Daylight Time)">19:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=jackworks@irc>jackworks</span>&gt;</div></td><td class="msg-cell">my friend was working on the membrane, he also needs WeakRef; my RPC library provides iterating on remote async generators so I need WeakRef too</td></tr>
  <tr class="msg" id="L101"><td class="ts-cell"><a class="ts" href="#L101" alt="Wed Jul 22 2020 12:34:05 GMT-0700 (Pacific Daylight Time)">19:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">`for await concurrent` is about making certain kinds of code easier to write, which means we need to think hard about whether we in fact want those kinds of code to be easier to write, and my answer is no because that _particular_ syntax makes it much easier to have concurrency bugs, more than other possible affordances for writing concurrent code</td></tr>
  <tr class="msg" id="L102"><td class="ts-cell"><a class="ts" href="#L102" alt="Wed Jul 22 2020 12:34:29 GMT-0700 (Pacific Daylight Time)">19:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">yeah they&#039;re useful in other cases, it&#039;s just that they have way too many problems to justify for those cases alone</td></tr>
  <tr class="msg" id="L103"><td class="ts-cell"><a class="ts" href="#L103" alt="Wed Jul 22 2020 12:37:17 GMT-0700 (Pacific Daylight Time)">19:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=jackworks@irc>jackworks</span>&gt;</div></td><td class="msg-cell">hmm, so people will re-inventing it again and again and it&#039;s more easily to have bugs in their own impl</td></tr>
  <tr class="msg" id="L104"><td class="ts-cell"><a class="ts" href="#L104" alt="Wed Jul 22 2020 12:37:51 GMT-0700 (Pacific Daylight Time)">19:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=jackworks@irc>jackworks</span>&gt;</div></td><td class="msg-cell">is it possible to design a syntax to make it easy to write, meanwhile reduce the possible race condition bugs?</td></tr>
  <tr class="msg" id="L105"><td class="ts-cell"><a class="ts" href="#L105" alt="Wed Jul 22 2020 12:38:08 GMT-0700 (Pacific Daylight Time)">19:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</div></td><td class="msg-cell">Phew, I haven&#039;t had to write it yet myself, but `await Promise.all(<a href="http://arr.map">arr.map</a>(async x=&gt;...))` is *awful* to write.</td></tr>
  <tr class="msg" id="L106"><td class="ts-cell"><a class="ts" href="#L106" alt="Wed Jul 22 2020 12:38:24 GMT-0700 (Pacific Daylight Time)">19:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</div></td><td class="msg-cell">`for await.all(const x of arr){...}` plz</td></tr>
  <tr class="msg" id="L107"><td class="ts-cell"><a class="ts" href="#L107" alt="Wed Jul 22 2020 12:38:39 GMT-0700 (Pacific Daylight Time)">19:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=jackworks@irc>jackworks</span>&gt;</div></td><td class="msg-cell">(WebCrypto API on mdn even gives a big strong red warning box writes &quot;If you&#039;re not sure you know what you are doing, you probably shouldn&#039;t be using this API.&quot;)</td></tr>
  <tr class="msg" id="L108"><td class="ts-cell"><a class="ts" href="#L108" alt="Wed Jul 22 2020 12:40:40 GMT-0700 (Pacific Daylight Time)">19:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=jackworks@irc>jackworks</span>&gt;</div></td><td class="msg-cell">maybe the `for await.all` sugar is too sweet and people will start to abuse it everywhere leads tons of race conditions, then the eslint decides it&#039;s a super foot gun and ban it ðŸ¤£</td></tr>
  <tr class="msg" id="L109"><td class="ts-cell"><a class="ts" href="#L109" alt="Wed Jul 22 2020 12:43:20 GMT-0700 (Pacific Daylight Time)">19:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title=jackworks@irc>jackworks</span>&gt;</div></td><td class="msg-cell">oh I recall a joke, when `async await` steps into our life, I saw an article says `await` is easy to get abused and new comer to JS will try to write `await` before any expression.</td></tr>
  <tr class="msg" id="L110"><td class="ts-cell"><a class="ts" href="#L110" alt="Wed Jul 22 2020 12:43:45 GMT-0700 (Pacific Daylight Time)">19:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">tbf people do that!</td></tr>
  <tr class="msg" id="L111"><td class="ts-cell"><a class="ts" href="#L111" alt="Wed Jul 22 2020 12:43:48 GMT-0700 (Pacific Daylight Time)">19:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">it just doesn&#039;t lead to bugs</td></tr>
  <tr class="msg" id="L112"><td class="ts-cell"><a class="ts" href="#L112" alt="Wed Jul 22 2020 12:43:58 GMT-0700 (Pacific Daylight Time)">19:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">so it&#039;s not a big problem</td></tr>
  <tr class="msg" id="L113"><td class="ts-cell"><a class="ts" href="#L113" alt="Wed Jul 22 2020 13:42:06 GMT-0700 (Pacific Daylight Time)">20:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</div></td><td class="msg-cell">name for a .get that defaults a value if no such key is present but does not insert it? (getDefault was seen as having either semantics)</td></tr>
  <tr class="msg" id="L114"><td class="ts-cell"><a class="ts" href="#L114" alt="Wed Jul 22 2020 13:42:52 GMT-0700 (Pacific Daylight Time)">20:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</div></td><td class="msg-cell">why not `.get(key[, default])`</td></tr>
  <tr class="msg" id="L115"><td class="ts-cell"><a class="ts" href="#L115" alt="Wed Jul 22 2020 13:43:02 GMT-0700 (Pacific Daylight Time)">20:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</div></td><td class="msg-cell">matches the current default of undefined</td></tr>
  <tr class="msg" id="L116"><td class="ts-cell"><a class="ts" href="#L116" alt="Wed Jul 22 2020 13:43:23 GMT-0700 (Pacific Daylight Time)">20:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">getOrDefault</td></tr>
  <tr class="msg" id="L117"><td class="ts-cell"><a class="ts" href="#L117" alt="Wed Jul 22 2020 13:43:40 GMT-0700 (Pacific Daylight Time)">20:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">or jordan&#039;s thing</td></tr>
  <tr class="msg" id="L118"><td class="ts-cell"><a class="ts" href="#L118" alt="Wed Jul 22 2020 13:44:05 GMT-0700 (Pacific Daylight Time)">20:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=jridgewell@irc>jridgewell</span>&gt;</div></td><td class="msg-cell">`default` would need to be a function, there</td></tr>
  <tr class="msg" id="L119"><td class="ts-cell"><a class="ts" href="#L119" alt="Wed Jul 22 2020 13:44:37 GMT-0700 (Pacific Daylight Time)">20:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</div></td><td class="msg-cell">ah, true. can default to `() =&gt; {}`</td></tr>
  <tr class="msg" id="L120"><td class="ts-cell"><a class="ts" href="#L120" alt="Wed Jul 22 2020 13:45:08 GMT-0700 (Pacific Daylight Time)">20:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">getOrCompute</td></tr>
  <tr class="msg" id="L121"><td class="ts-cell"><a class="ts" href="#L121" alt="Wed Jul 22 2020 13:45:18 GMT-0700 (Pacific Daylight Time)">20:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">getpute</td></tr>
  <tr class="msg" id="L122"><td class="ts-cell"><a class="ts" href="#L122" alt="Wed Jul 22 2020 13:45:22 GMT-0700 (Pacific Daylight Time)">20:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">jridgewell why &quot;need&quot;?</td></tr>
  <tr class="msg" id="L123"><td class="ts-cell"><a class="ts" href="#L123" alt="Wed Jul 22 2020 13:45:22 GMT-0700 (Pacific Daylight Time)">20:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</div></td><td class="msg-cell">winner</td></tr>
  <tr class="msg" id="L124"><td class="ts-cell"><a class="ts" href="#L124" alt="Wed Jul 22 2020 13:45:28 GMT-0700 (Pacific Daylight Time)">20:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">I see the use for it, just not the necessity</td></tr>
  <tr class="msg" id="L125"><td class="ts-cell"><a class="ts" href="#L125" alt="Wed Jul 22 2020 13:46:47 GMT-0700 (Pacific Daylight Time)">20:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=jridgewell@irc>jridgewell</span>&gt;</div></td><td class="msg-cell">Because the default value can be very expensive to create</td></tr>
  <tr class="msg" id="L126"><td class="ts-cell"><a class="ts" href="#L126" alt="Wed Jul 22 2020 13:47:14 GMT-0700 (Pacific Daylight Time)">20:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">can be, but is that frequent enough that it is necessarily something which has to be met by this method?</td></tr>
  <tr class="msg" id="L127"><td class="ts-cell"><a class="ts" href="#L127" alt="Wed Jul 22 2020 13:47:41 GMT-0700 (Pacific Daylight Time)">20:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">for those cases, you can still do `if (!x.has()) x.put()` or whatever</td></tr>
  <tr class="msg" id="L128"><td class="ts-cell"><a class="ts" href="#L128" alt="Wed Jul 22 2020 13:47:44 GMT-0700 (Pacific Daylight Time)">20:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</div></td><td class="msg-cell">yes, in my experience</td></tr>
  <tr class="msg" id="L129"><td class="ts-cell"><a class="ts" href="#L129" alt="Wed Jul 22 2020 13:48:11 GMT-0700 (Pacific Daylight Time)">20:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</div></td><td class="msg-cell">it&#039;s often constructing an object or transforming data</td></tr>
  <tr class="msg" id="L130"><td class="ts-cell"><a class="ts" href="#L130" alt="Wed Jul 22 2020 13:48:25 GMT-0700 (Pacific Daylight Time)">20:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=jridgewell@irc>jridgewell</span>&gt;</div></td><td class="msg-cell">To counter, you could just do `x.has(key) ? x.get(key) : default` for your case</td></tr>
  <tr class="msg" id="L131"><td class="ts-cell"><a class="ts" href="#L131" alt="Wed Jul 22 2020 13:48:35 GMT-0700 (Pacific Daylight Time)">20:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">right, of course</td></tr>
  <tr class="msg" id="L132"><td class="ts-cell"><a class="ts" href="#L132" alt="Wed Jul 22 2020 13:48:40 GMT-0700 (Pacific Daylight Time)">20:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">this is a question about frequency</td></tr>
  <tr class="msg" id="L133"><td class="ts-cell"><a class="ts" href="#L133" alt="Wed Jul 22 2020 13:48:48 GMT-0700 (Pacific Daylight Time)">20:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">in my experience, the cheap key is much more common</td></tr>
  <tr class="msg" id="L134"><td class="ts-cell"><a class="ts" href="#L134" alt="Wed Jul 22 2020 13:48:53 GMT-0700 (Pacific Daylight Time)">20:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">I am curious if your experience differs</td></tr>
  <tr class="msg" id="L135"><td class="ts-cell"><a class="ts" href="#L135" alt="Wed Jul 22 2020 13:49:01 GMT-0700 (Pacific Daylight Time)">20:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=jridgewell@irc>jridgewell</span>&gt;</div></td><td class="msg-cell">cheap key?</td></tr>
  <tr class="msg" id="L136"><td class="ts-cell"><a class="ts" href="#L136" alt="Wed Jul 22 2020 13:49:02 GMT-0700 (Pacific Daylight Time)">20:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">*cheap default</td></tr>
  <tr class="msg" id="L137"><td class="ts-cell"><a class="ts" href="#L137" alt="Wed Jul 22 2020 13:49:07 GMT-0700 (Pacific Daylight Time)">20:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=jridgewell@irc>jridgewell</span>&gt;</div></td><td class="msg-cell">Ah,</td></tr>
  <tr class="msg" id="L138"><td class="ts-cell"><a class="ts" href="#L138" alt="Wed Jul 22 2020 13:49:20 GMT-0700 (Pacific Daylight Time)">20:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=jridgewell@irc>jridgewell</span>&gt;</div></td><td class="msg-cell">My use is templateing libraries</td></tr>
  <tr class="msg" id="L139"><td class="ts-cell"><a class="ts" href="#L139" alt="Wed Jul 22 2020 13:50:04 GMT-0700 (Pacific Daylight Time)">20:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title=jridgewell@irc>jridgewell</span>&gt;</div></td><td class="msg-cell">Particularly lit-html, which creates a whole `&lt;template&gt;` and children and walks the entire tree.</td></tr>
  <tr class="msg" id="L140"><td class="ts-cell"><a class="ts" href="#L140" alt="Wed Jul 22 2020 13:51:03 GMT-0700 (Pacific Daylight Time)">20:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</div></td><td class="msg-cell">java has getOrDefault, which takes a value, and computeIfAbsent, which takes a lambda (and updates the map(</td></tr>
  <tr class="msg" id="L141"><td class="ts-cell"><a class="ts" href="#L141" alt="Wed Jul 22 2020 16:06:37 GMT-0700 (Pacific Daylight Time)">23:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</div></td><td class="msg-cell">I think a default-value factory is a requirement, yeah. Arrow functions make it cheap to define one for constant values, and they&#039;re necessary for expensive defaults.</td></tr>
  <tr class="msg" id="L142"><td class="ts-cell"><a class="ts" href="#L142" alt="Wed Jul 22 2020 16:07:09 GMT-0700 (Pacific Daylight Time)">23:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</div></td><td class="msg-cell">And I think the functionality should indeed just be added as a second parameter on .get().</td></tr>
  <tr class="msg" id="L143"><td class="ts-cell"><a class="ts" href="#L143" alt="Wed Jul 22 2020 16:08:32 GMT-0700 (Pacific Daylight Time)">23:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</div></td><td class="msg-cell">(Python separates default-value from default-value-factory, but Python also has annoying inline functions.)</td></tr>
  <tr class="msg" id="L144"><td class="ts-cell"><a class="ts" href="#L144" alt="Wed Jul 22 2020 16:33:00 GMT-0700 (Pacific Daylight Time)">23:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</div></td><td class="msg-cell">what if we allowed elisions in function parameters</td></tr>
  <tr class="msg" id="L145"><td class="ts-cell"><a class="ts" href="#L145" alt="Wed Jul 22 2020 16:45:59 GMT-0700 (Pacific Daylight Time)">23:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title=TabAtkins@irc>TabAtkins</span>&gt;</div></td><td class="msg-cell">Elaborate?</td></tr>

</tbody></table></div></div></div></body>
