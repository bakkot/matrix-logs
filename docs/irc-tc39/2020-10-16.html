<!doctype html>
<head>
  <title>#tc39 on 2020-10-16</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#tc39<br>2020-10-16<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2020-10-15" class="nav-link"><span>prev</span></a>
<a href="2020-10-17" class="nav-link"><span style="float:right">next</span></a>
</div>
    
<div class="room-list-wrapper">Active:<br>
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/">WHATWG</a></li>
</ul>
</div>
<br>
<div class="room-list-wrapper">Historical:<br>
<ul class="room-list">
<li><a href="../irc-tc39/" class="current-room">#tc39</a></li>
<li><a href="../irc-tc39-delegates/">#tc39-delegates</a></li>
<li><a href="../irc-tc39-editor-group/">#tc39-editor-group</a></li>
<li><a href="../irc-whatwg/">#whatwg</a></li>
</ul>
</div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>
<input type="text" id="query" size=25 placeholder="Search #tc39">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Fri Oct 16 2020 10:57:01 GMT-0700 (Pacific Daylight Time)">17:57</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">okay, I believe this is the full list of issues in this PR now: <a href="https://github.com/tc39/test262/pull/2833#issuecomment-709635850">https://github.com/tc39/test262/pull/2833#issuecomment-709635850</a></td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Fri Oct 16 2020 10:57:11 GMT-0700 (Pacific Daylight Time)">17:57</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">^ fyi shu</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Fri Oct 16 2020 11:21:37 GMT-0700 (Pacific Daylight Time)">18:21</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">rkirsling: ty</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Fri Oct 16 2020 11:33:49 GMT-0700 (Pacific Daylight Time)">18:33</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=rwaldron-@irc>rwaldron-</span>&gt;</td><td class="msg-cell">rkirsling thanks for those notes</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Fri Oct 16 2020 11:33:58 GMT-0700 (Pacific Daylight Time)">18:33</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=rwaldron-@irc>rwaldron-</span>&gt;</td><td class="msg-cell">shu I&#039;ll be working on these immediately.</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Fri Oct 16 2020 11:34:07 GMT-0700 (Pacific Daylight Time)">18:34</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">rwaldron-: thank you &lt;3</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Fri Oct 16 2020 11:34:16 GMT-0700 (Pacific Daylight Time)">18:34</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">was going to ask whether you had the bandwidth</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Fri Oct 16 2020 12:40:03 GMT-0700 (Pacific Daylight Time)">19:40</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">possibly stupid question: it&#039;s possible to construct a string literal with lone surrogates *without* escapes, right?</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Fri Oct 16 2020 12:40:36 GMT-0700 (Pacific Daylight Time)">19:40</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">you can just, like, put the bit pattern for a lone surrogate between quotes?</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Fri Oct 16 2020 12:40:51 GMT-0700 (Pacific Daylight Time)">19:40</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">i believe you can</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Fri Oct 16 2020 12:41:25 GMT-0700 (Pacific Daylight Time)">19:41</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">yeah you can</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Fri Oct 16 2020 12:41:26 GMT-0700 (Pacific Daylight Time)">19:41</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">shu yes</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Fri Oct 16 2020 12:41:32 GMT-0700 (Pacific Daylight Time)">19:41</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">thanks</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Fri Oct 16 2020 12:41:53 GMT-0700 (Pacific Daylight Time)">19:41</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">but the actual answer depends on your file&#039;s encoding and stuff</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Fri Oct 16 2020 12:42:46 GMT-0700 (Pacific Daylight Time)">19:42</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">according to ecma262 source text is a sequence of 16-bit integers, so you can put the lone surrogate bit pattern in just fine, but your file system or file server may disagree</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Fri Oct 16 2020 12:43:20 GMT-0700 (Pacific Daylight Time)">19:43</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">my actual question was &quot;can i skip the need to check for lone surrogates in ModuleExportName if i didn&#039;t see any escapes during lexing&quot;, and the answer to that seems like a definitive no</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Fri Oct 16 2020 12:44:02 GMT-0700 (Pacific Daylight Time)">19:44</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">how are y&#039;all dealing with dot variable collisions</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Fri Oct 16 2020 12:45:24 GMT-0700 (Pacific Daylight Time)">19:45</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">what are dot variables?</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Fri Oct 16 2020 12:45:40 GMT-0700 (Pacific Daylight Time)">19:45</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">like those synthesized unutterable names used for codegen?</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Fri Oct 16 2020 12:48:35 GMT-0700 (Pacific Daylight Time)">19:48</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">shu: like this: <a href="https://github.com/v8/v8/blob/master/src/ast/ast-value-factory.h#L225">https://github.com/v8/v8/blob/master/src/ast/ast-value-factory.h#L225</a></td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Fri Oct 16 2020 12:49:18 GMT-0700 (Pacific Daylight Time)">19:49</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">v8 stores variables all over the place with names like that</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Fri Oct 16 2020 12:50:24 GMT-0700 (Pacific Daylight Time)">19:50</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">actually i guess this is the one you&#039;d be worried about <a href="https://github.com/v8/v8/blob/master/src/parsing/parser.cc#L1408-L1411">https://github.com/v8/v8/blob/master/src/parsing/parser.cc#L1408-L1411</a></td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Fri Oct 16 2020 12:50:37 GMT-0700 (Pacific Daylight Time)">19:50</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">yeah, those internal names</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Fri Oct 16 2020 12:51:06 GMT-0700 (Pacific Daylight Time)">19:51</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">i was going to work on that proposal for v8 but i didn&#039;t have the energy to figure out a way to avoid collisions</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Fri Oct 16 2020 12:52:41 GMT-0700 (Pacific Daylight Time)">19:52</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">i haven&#039;t really thought about it yet, but i imagine that desugaring would need to change</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Fri Oct 16 2020 12:53:19 GMT-0700 (Pacific Daylight Time)">19:53</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">shu: Bakkot: methods like TA.p.every don&#039;t give alg steps but say that one &quot;must take into account the possibility that calls to callbackfn may cause the this value to become detached&quot; -- is one to assume this means &quot;check whether we need to throw after every iteration&quot;?</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Fri Oct 16 2020 12:54:35 GMT-0700 (Pacific Daylight Time)">19:54</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">devsnek: actually isn&#039;t that desugaring fine?</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Fri Oct 16 2020 12:54:51 GMT-0700 (Pacific Daylight Time)">19:54</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">devsnek: the .x there is used in the binding position, not in the ModuleExportName position</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Fri Oct 16 2020 12:54:51 GMT-0700 (Pacific Daylight Time)">19:54</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">it&#039;s complicated because the thing we&#039;re doing on each iteration is an IntegerIndexedElementGet which no longer throws... :(</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Fri Oct 16 2020 12:55:21 GMT-0700 (Pacific Daylight Time)">19:55</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">hmmmmm</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Fri Oct 16 2020 12:55:28 GMT-0700 (Pacific Daylight Time)">19:55</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">you might be right</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Fri Oct 16 2020 12:55:55 GMT-0700 (Pacific Daylight Time)">19:55</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">devsnek: ah wait, no, you were right, the second part of the desugaring `.x as x` is what can conflict</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Fri Oct 16 2020 12:58:09 GMT-0700 (Pacific Daylight Time)">19:58</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">oh wait TA.p.filter is spelled out and it doesn&#039;t throw on each iteration</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Fri Oct 16 2020 12:58:28 GMT-0700 (Pacific Daylight Time)">19:58</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">rkirsling those methods are dumb and we should fix them</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Fri Oct 16 2020 12:58:39 GMT-0700 (Pacific Daylight Time)">19:58</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">yeah :(</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Fri Oct 16 2020 12:58:41 GMT-0700 (Pacific Daylight Time)">19:58</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">we just did that with the math methods, and there&#039;s an open PR doing it for Number</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Fri Oct 16 2020 12:58:50 GMT-0700 (Pacific Daylight Time)">19:58</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">ah cool</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Fri Oct 16 2020 12:59:11 GMT-0700 (Pacific Daylight Time)">19:59</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">devsnek: ah, i think it might still be okay. the ModuleExportName `as` ModuleExportName case shouldn&#039;t be looking up any variables in the local scope</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Fri Oct 16 2020 12:59:23 GMT-0700 (Pacific Daylight Time)">19:59</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">so even if the string contents are the same, they shouldn&#039;t conflict since it&#039;s not a binding</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Fri Oct 16 2020 12:59:39 GMT-0700 (Pacific Daylight Time)">19:59</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">rkirsling: reading</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Fri Oct 16 2020 12:59:54 GMT-0700 (Pacific Daylight Time)">19:59</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">thanks, sorry for the interleaved discussion</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Fri Oct 16 2020 13:00:51 GMT-0700 (Pacific Daylight Time)">20:00</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">yeah <a href="https://tc39.es/ecma262/#sec-%typedarray%.prototype.every">https://tc39.es/ecma262/#sec-%typedarray%.prototype.every</a> is a bad piece of spec text and we should be ashamed</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Fri Oct 16 2020 13:01:48 GMT-0700 (Pacific Daylight Time)">20:01</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">rkirsling: i think the *intention* was to throw. let&#039;s see what impls do</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Fri Oct 16 2020 13:03:40 GMT-0700 (Pacific Daylight Time)">20:03</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">the issue is that like, if you look at <a href="https://tc39.es/ecma262/#sec-%typedarray%.prototype.map">https://tc39.es/ecma262/#sec-%typedarray%.prototype.map</a> which is clear and simple</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Fri Oct 16 2020 13:04:08 GMT-0700 (Pacific Daylight Time)">20:04</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">we were letting IntegerIndexedElementSet throw if calling the callback detached the buffer</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Fri Oct 16 2020 13:04:21 GMT-0700 (Pacific Daylight Time)">20:04</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">but now that doesn&#039;t throw, so there&#039;s a ripple effect</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Fri Oct 16 2020 13:04:31 GMT-0700 (Pacific Daylight Time)">20:04</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">which seems fine there</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Fri Oct 16 2020 13:04:48 GMT-0700 (Pacific Daylight Time)">20:04</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">but it makes the lack of clarity for every/some even worse</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Fri Oct 16 2020 13:07:05 GMT-0700 (Pacific Daylight Time)">20:07</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">yeah, the ripple effects, hm</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Fri Oct 16 2020 13:16:26 GMT-0700 (Pacific Daylight Time)">20:16</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">i believe Records and Tuples are currently using the same technique as typed array filter in a bunch of places</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Fri Oct 16 2020 13:16:36 GMT-0700 (Pacific Daylight Time)">20:16</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">ie, &quot;this is the same as X except for these changes&quot;</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Fri Oct 16 2020 13:21:57 GMT-0700 (Pacific Daylight Time)">20:21</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">seems fine while iterating in stage 2, but I&#039;ll require that fixed before it landss</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Fri Oct 16 2020 13:24:27 GMT-0700 (Pacific Daylight Time)">20:24</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">it might be good to file an issue on the repo with that feedback then</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Fri Oct 16 2020 14:49:05 GMT-0700 (Pacific Daylight Time)">21:49</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">oh that&#039;s another interesting path</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Fri Oct 16 2020 14:52:32 GMT-0700 (Pacific Daylight Time)">21:52</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">`Object.defineProperty(ta, &#039;0&#039;, badDescriptor)` usually throws, but when the buffer is detached, we run into trouble checking the typed array length before dealing with the descriptor</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Fri Oct 16 2020 14:55:24 GMT-0700 (Pacific Daylight Time)">21:55</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">...which seems like we might just return undefined, except that there is one confusing thing</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Fri Oct 16 2020 14:56:44 GMT-0700 (Pacific Daylight Time)">21:56</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">and that&#039;s that detaching the underlying buffer doesn&#039;t seem to change [[ArrayLength]] on the typed array? 🤔</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Fri Oct 16 2020 14:57:45 GMT-0700 (Pacific Daylight Time)">21:57</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">which means we probably should still throw</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Fri Oct 16 2020 14:59:00 GMT-0700 (Pacific Daylight Time)">21:59</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">issue is at <a href="https://tc39.es/ecma262/#sec-integer-indexed-exotic-objects-defineownproperty-p-desc">https://tc39.es/ecma262/#sec-integer-indexed-exotic-objects-defineownproperty-p-desc</a> step 3.b.i if anyone is interested in checking my work</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Fri Oct 16 2020 14:59:17 GMT-0700 (Pacific Daylight Time)">21:59</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">s/issue/the line in question/</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Fri Oct 16 2020 14:59:41 GMT-0700 (Pacific Daylight Time)">21:59</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=rwaldron-@irc>rwaldron-</span>&gt;</td><td class="msg-cell">shu I have to sign off, I will wrap up the necessary updates to detach buffer tests next week. For now, if there is any issue, I recommend skiplisting the feature: &quot;align-detached-buffer-semantics-with-web-reality</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Fri Oct 16 2020 14:59:41 GMT-0700 (Pacific Daylight Time)">21:59</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=rwaldron-@irc>rwaldron-</span>&gt;</td><td class="msg-cell">&quot;</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Fri Oct 16 2020 14:59:45 GMT-0700 (Pacific Daylight Time)">21:59</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=rwaldron-@irc>rwaldron-</span>&gt;</td><td class="msg-cell">Whoops</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Fri Oct 16 2020 15:01:00 GMT-0700 (Pacific Daylight Time)">22:01</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">seems like elsewhere we always check IsDetachedBuffer immediately before checking IsValidIntegerIndex so maybe this is an editorial bug</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Fri Oct 16 2020 15:01:45 GMT-0700 (Pacific Daylight Time)">22:01</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">yeah, I feel like that makes the most sense.</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Fri Oct 16 2020 15:21:57 GMT-0700 (Pacific Daylight Time)">22:21</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">shu: evidently there are tests to check that `every` and kin throw</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Fri Oct 16 2020 15:23:05 GMT-0700 (Pacific Daylight Time)">22:23</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">rkirsling: yeah?</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Fri Oct 16 2020 15:23:36 GMT-0700 (Pacific Daylight Time)">22:23</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">hmm although they cite the Get</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Fri Oct 16 2020 15:23:36 GMT-0700 (Pacific Daylight Time)">22:23</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell"><a href="https://github.com/tc39/test262/blob/main/test/built-ins/TypedArray/prototype/map/callbackfn-detachbuffer.js">https://github.com/tc39/test262/blob/main/test/built-ins/TypedArray/prototype/map/callbackfn-detachbuffer.js</a></td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Fri Oct 16 2020 15:24:49 GMT-0700 (Pacific Daylight Time)">22:24</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">^ this one at the very least is wrong</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Fri Oct 16 2020 15:25:02 GMT-0700 (Pacific Daylight Time)">22:25</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">so I think it would be reasonable to call them all in need of update</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Fri Oct 16 2020 15:25:40 GMT-0700 (Pacific Daylight Time)">22:25</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">&quot;all&quot; meaning, all the ones that take a callback function that might detach the buffer before the next Get or Set</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Fri Oct 16 2020 15:26:06 GMT-0700 (Pacific Daylight Time)">22:26</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">that test you just linked expects that it doesn&#039;t throw, but that iteration stops after detaching?</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Fri Oct 16 2020 15:29:00 GMT-0700 (Pacific Daylight Time)">22:29</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">umm currently even iteration wouldn&#039;t stop: <a href="https://tc39.es/ecma262/#sec-%typedarray%.prototype.map">https://tc39.es/ecma262/#sec-%typedarray%.prototype.map</a></td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Fri Oct 16 2020 15:29:19 GMT-0700 (Pacific Daylight Time)">22:29</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">unless we view this as an overlooked ripple effect that should be corrected immediately</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Fri Oct 16 2020 15:56:47 GMT-0700 (Pacific Daylight Time)">22:56</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">what do implementations do?</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Fri Oct 16 2020 16:00:01 GMT-0700 (Pacific Daylight Time)">23:00</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">oh right [[Get]] and [[Set]] were already allowed outside of JSC</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Fri Oct 16 2020 16:00:04 GMT-0700 (Pacific Daylight Time)">23:00</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">hmm</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Fri Oct 16 2020 16:00:12 GMT-0700 (Pacific Daylight Time)">23:00</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">pretty sure everybody passes these</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Fri Oct 16 2020 16:03:49 GMT-0700 (Pacific Daylight Time)">23:03</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">oh!!</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Fri Oct 16 2020 16:03:50 GMT-0700 (Pacific Daylight Time)">23:03</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell"><a href="https://test262.report/browse/built-ins/TypedArray/prototype/map/callbackfn-detachbuffer.js">https://test262.report/browse/built-ins/TypedArray/prototype/map/callbackfn-detachbuffer.js</a></td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Fri Oct 16 2020 16:03:52 GMT-0700 (Pacific Daylight Time)">23:03</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">nope</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Fri Oct 16 2020 16:04:43 GMT-0700 (Pacific Daylight Time)">23:04</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">and everyone drew the same conclusion for the implicit ones:</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Fri Oct 16 2020 16:04:44 GMT-0700 (Pacific Daylight Time)">23:04</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell"><a href="https://test262.report/browse/built-ins/TypedArray/prototype/every/callbackfn-detachbuffer.js">https://test262.report/browse/built-ins/TypedArray/prototype/every/callbackfn-detachbuffer.js</a></td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Fri Oct 16 2020 16:05:18 GMT-0700 (Pacific Daylight Time)">23:05</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">s/implicit ones/ones lacking alg steps/ I mean</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Fri Oct 16 2020 16:07:58 GMT-0700 (Pacific Daylight Time)">23:07</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">V8 and SM disagree on whether to stop iterating</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Fri Oct 16 2020 16:08:09 GMT-0700 (Pacific Daylight Time)">23:08</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">but already agree on not throwing</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Fri Oct 16 2020 16:09:50 GMT-0700 (Pacific Daylight Time)">23:09</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">V8&#039;s choice to stop iterating is a little odd though</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Fri Oct 16 2020 16:11:01 GMT-0700 (Pacific Daylight Time)">23:11</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">V8 and SM both allow [[Get]] and [[Set]] but you&#039;d expect them both to follow the spec otherwise</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Fri Oct 16 2020 16:22:56 GMT-0700 (Pacific Daylight Time)">23:22</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">hm</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Fri Oct 16 2020 16:23:14 GMT-0700 (Pacific Daylight Time)">23:23</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">i&#039;m not sure right now we should do here</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Fri Oct 16 2020 16:23:34 GMT-0700 (Pacific Daylight Time)">23:23</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=shu@irc>shu</span>&gt;</td><td class="msg-cell">i&#039;m gonna try to finish up implementing the arbitrary module export name thing for today, let&#039;s come back to this next week</td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Fri Oct 16 2020 16:26:17 GMT-0700 (Pacific Daylight Time)">23:26</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">okay</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Fri Oct 16 2020 16:38:20 GMT-0700 (Pacific Daylight Time)">23:38</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=rwaldron-@irc>rwaldron-</span>&gt;</td><td class="msg-cell">rkirsling shu we should summon leobalter to look at the older detach buffer tests, since he was one of the primary authors of those tests back in 2016</td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Fri Oct 16 2020 16:49:41 GMT-0700 (Pacific Daylight Time)">23:49</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">that would be great</td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Fri Oct 16 2020 16:50:21 GMT-0700 (Pacific Daylight Time)">23:50</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">it&#039;s quite a doozy but I at least feel like I&#039;ve got a handle on it now that I&#039;ve worked the whole way through JSC&#039;s impl</td></tr>

</tbody></table></div></div></div></body>
