<!doctype html>
<head>
  <title>#tc39 on 2020-06-20</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#tc39<br>2020-06-20<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2020-06-19" class="nav-link"><span>prev</span></a>
<a href="2020-06-21" class="nav-link"><span style="float:right">next</span></a>
</div>
    
<div class="room-list-wrapper">Active:<br>
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/">WHATWG</a></li>
</ul>
</div>
<br>
<div class="room-list-wrapper">Historical:<br>
<ul class="room-list">
<li><a href="../irc-tc39/" class="current-room">#tc39</a></li>
<li><a href="../irc-tc39-delegates/">#tc39-delegates</a></li>
<li><a href="../irc-tc39-editor-group/">#tc39-editor-group</a></li>
<li><a href="../irc-whatwg/">#whatwg</a></li>
</ul>
</div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs"><div class="log">
<table><tbody id="log-tbody">
  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Fri Jun 19 2020 17:00:11 GMT-0700 (Pacific Daylight Time)">00:00</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">maybe the `of` in a for/of statemenr</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Fri Jun 19 2020 17:00:17 GMT-0700 (Pacific Daylight Time)">00:00</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">Even though Punctuator is defined in the lexical grammar, it&#039;s not used in the syntactic grammar. Instead you have things like RelationalOperator or EqualityOperator.</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Fri Jun 19 2020 17:00:41 GMT-0700 (Pacific Daylight Time)">00:00</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">ah you mean when it does bold text</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Fri Jun 19 2020 17:01:29 GMT-0700 (Pacific Daylight Time)">00:01</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">generally those occurances are described by the lexical grammar, even when it doesn&#039;t specifically mention the lexical production in question</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Fri Jun 19 2020 17:01:42 GMT-0700 (Pacific Daylight Time)">00:01</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">Exactly.</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Fri Jun 19 2020 17:02:24 GMT-0700 (Pacific Daylight Time)">00:02</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">Really, they&#039;re not. Like I said, the lexical grammar includes Punctuator. Nowhere is that referred to in the syntactic grammar.</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Fri Jun 19 2020 17:03:13 GMT-0700 (Pacific Daylight Time)">00:03</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">toddobryan: if it helps, think of them like c enums</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Fri Jun 19 2020 17:04:34 GMT-0700 (Pacific Daylight Time)">00:04</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">everything used in the syntaric grammar should be well defined in the lexical grammar even it not directly referring to it</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Fri Jun 19 2020 17:04:44 GMT-0700 (Pacific Daylight Time)">00:04</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">syntactic*</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Fri Jun 19 2020 17:05:32 GMT-0700 (Pacific Daylight Time)">00:05</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">And I lied above. RelationalOperator and EqualityOperator don&#039;t exist. I created them when I was writing my grammar. In the lexical grammar, they&#039;re not distinguishable (all under Punctuator) and in the syntactic grammar, they&#039;re literals: <a href="https://www.ecma-international.org/ecma-262/#prod-RelationalExpression">https://www.ecma-international.org/ecma-262/#prod-RelationalExpression</a> and <a href="https://www.ecma-international.org/ecma-262/#prod-EqualityExpression">https://www.ecma-international.org/ecma-262/#prod-EqualityExpression</a>.</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Fri Jun 19 2020 17:08:06 GMT-0700 (Pacific Daylight Time)">00:08</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">toddobryan: I&#039;m not sure I understand what the problem is 😅</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Fri Jun 19 2020 17:08:30 GMT-0700 (Pacific Daylight Time)">00:08</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">devsnek: I&#039;d be fine with that, but nowhere in the spec does it specify how/when you should choose between the goal symbols of InputElementDiv, InputElementRegExp, etc.</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Fri Jun 19 2020 17:09:00 GMT-0700 (Pacific Daylight Time)">00:09</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">it shouldn&#039;t ever have to specify how you choose</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Fri Jun 19 2020 17:09:20 GMT-0700 (Pacific Daylight Time)">00:09</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">there are maybe two places where it does (if statements and some regex thing in annex b)</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Fri Jun 19 2020 17:09:34 GMT-0700 (Pacific Daylight Time)">00:09</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">there&#039;s a pr open to fix the if statement one</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Fri Jun 19 2020 17:09:39 GMT-0700 (Pacific Daylight Time)">00:09</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">It does specify: &quot;The InputElementRegExpOrTemplateTail goal is used in syntactic grammar contexts where a RegularExpressionLiteral, a TemplateMiddle, or a TemplateTail is permitted. The InputElementRegExp goal symbol is used in all syntactic grammar contexts where a RegularExpressionLiteral is permitted but neither a TemplateMiddle, nor a TemplateTail is permitted. The InputElementTemplateTail goal is used in all syntactic grammar</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Fri Jun 19 2020 17:09:39 GMT-0700 (Pacific Daylight Time)">00:09</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell"> contexts where a TemplateMiddle or a TemplateTail is permitted but a RegularExpressionLiteral is not permitted. In all other contexts, InputElementDiv is used as the lexical goal symbol.&quot;</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Fri Jun 19 2020 17:09:54 GMT-0700 (Pacific Daylight Time)">00:09</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">OK--here&#039;s the basic problem. If the left-hand side of a grammar production never appears in the right-hand sign of another rule, that production is unused and provides no information to the spec.</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Fri Jun 19 2020 17:10:16 GMT-0700 (Pacific Daylight Time)">00:10</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">Find me a place where InputElementDiv is used in the syntactic grammar.</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Fri Jun 19 2020 17:12:22 GMT-0700 (Pacific Daylight Time)">00:12</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">The information it provides is in how to divide up the source text.</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Fri Jun 19 2020 17:13:10 GMT-0700 (Pacific Daylight Time)">00:13</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">I think it&#039;s described in section 11?</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Fri Jun 19 2020 17:14:44 GMT-0700 (Pacific Daylight Time)">00:14</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">But it&#039;s not actually used. In the syntactic grammar, the input is referred to explicitly, not the productions that the lexical grammar provides.</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Fri Jun 19 2020 17:16:47 GMT-0700 (Pacific Daylight Time)">00:16</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">And since the syntactic grammar does not explicitly use those rules, it&#039;s almost impossible to write a tokenizer. (Or at least it has been for me.)</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Fri Jun 19 2020 17:17:17 GMT-0700 (Pacific Daylight Time)">00:17</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">The syntactic grammar is not defined over the source text. If it were it would have to deal with whitespace and comments.</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Fri Jun 19 2020 17:18:08 GMT-0700 (Pacific Daylight Time)">00:18</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">The point of splitting them is so that the lexical grammar can deal with whitespace and comments, including stuff like &quot;is `/ a /` three tokens or one&quot;</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Fri Jun 19 2020 17:19:02 GMT-0700 (Pacific Daylight Time)">00:19</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">to quote the page I linked</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Fri Jun 19 2020 17:19:03 GMT-0700 (Pacific Daylight Time)">00:19</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=rkirsling@irc>rkirsling</span>&gt;</td><td class="msg-cell">&gt; In implementations, the syntactic grammar analyzer (“parser”) may call the lexical grammar analyzer (“tokenizer” or “lexer”), passing the goal symbol as a parameter and asking for the next input element suitable for that goal symbol.</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Fri Jun 19 2020 17:20:59 GMT-0700 (Pacific Daylight Time)">00:20</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">OK. Fair enough. But how would I know when to use the `InputElementRegExp` production to get the next token?</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Fri Jun 19 2020 17:21:20 GMT-0700 (Pacific Daylight Time)">00:21</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">See note 1 here: <a href="https://www.ecma-international.org/ecma-262/#prod-GeneratorMethod">https://www.ecma-international.org/ecma-262/#prod-GeneratorMethod</a></td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Fri Jun 19 2020 17:21:56 GMT-0700 (Pacific Daylight Time)">00:21</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">There is no such note anywhere that references InputElementRegExp. (That I can find. I&#039;d be happy to learn I&#039;m missing something.)</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Fri Jun 19 2020 17:22:34 GMT-0700 (Pacific Daylight Time)">00:22</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">in terms of concrete implementation you don&#039;t usually see any specific &quot;now we&#039;re lexing the input&quot; type stuff</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Fri Jun 19 2020 17:22:43 GMT-0700 (Pacific Daylight Time)">00:22</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">aside from handling hashbang</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Fri Jun 19 2020 17:23:05 GMT-0700 (Pacific Daylight Time)">00:23</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">The bit I quoted above says you&#039;d use `InputElementRegExp` to get the next input element &quot;in all syntactic grammar contexts where a RegularExpressionLiteral is permitted but neither a TemplateMiddle, nor a TemplateTail is permitted&quot;</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Fri Jun 19 2020 17:24:00 GMT-0700 (Pacific Daylight Time)">00:24</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">all the implementations I know of use a whitelist of allowed tokens preceding the yield</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Fri Jun 19 2020 17:24:18 GMT-0700 (Pacific Daylight Time)">00:24</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">there aren&#039;t that many</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Fri Jun 19 2020 17:24:23 GMT-0700 (Pacific Daylight Time)">00:24</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">*following?</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Fri Jun 19 2020 17:24:29 GMT-0700 (Pacific Daylight Time)">00:24</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">rather than preceding</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Fri Jun 19 2020 17:24:32 GMT-0700 (Pacific Daylight Time)">00:24</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">yeah that lol</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Fri Jun 19 2020 17:26:17 GMT-0700 (Pacific Daylight Time)">00:26</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">So, you&#039;d use `InputElementRegExp` when applying `PrimaryExpression`? (I did a quick search, and I think that&#039;s the only rule that `RegularExpressionLiteral` appears on the right of.)</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Fri Jun 19 2020 17:27:08 GMT-0700 (Pacific Daylight Time)">00:27</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">mmm.... &quot;when applying&quot; doesn&#039;t exactly make sense, I think</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Fri Jun 19 2020 17:27:37 GMT-0700 (Pacific Daylight Time)">00:27</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">if you&#039;ve just parsed _part_ of an expression, like `a +`, then you&#039;d use InputElmentRegexp`</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Fri Jun 19 2020 17:27:49 GMT-0700 (Pacific Daylight Time)">00:27</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">When trying to satisfy?</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Fri Jun 19 2020 17:28:43 GMT-0700 (Pacific Daylight Time)">00:28</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">The spec is kind of written on the assumption that you&#039;ll be using a bottom-up parser, probably specifically a shift-reduce parser</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Fri Jun 19 2020 17:28:52 GMT-0700 (Pacific Daylight Time)">00:28</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">which doesn&#039;t really have a notion of &quot;trying to satisfy&quot;</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Fri Jun 19 2020 17:29:33 GMT-0700 (Pacific Daylight Time)">00:29</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">trying to satisfy is more of a top-down thing</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Fri Jun 19 2020 17:29:46 GMT-0700 (Pacific Daylight Time)">00:29</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">How can you do a bottom-up parse when what&#039;s legal as a token depends on the context you&#039;re in?</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Fri Jun 19 2020 17:30:11 GMT-0700 (Pacific Daylight Time)">00:30</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">Because you don&#039;t have to know exactly which context you&#039;re in</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Fri Jun 19 2020 17:30:45 GMT-0700 (Pacific Daylight Time)">00:30</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">I&#039;m writing a recursive-descent parser, so I do know which rule I&#039;m trying to apply...</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Fri Jun 19 2020 17:30:50 GMT-0700 (Pacific Daylight Time)">00:30</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">Like I said, if you&#039;ve just parsed `a +`, you know that the following token can be a RegularExpressionLiteral but not a TemplateMiddle or a TemplateTail, so you know to use InputElementRegExp</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Fri Jun 19 2020 17:31:39 GMT-0700 (Pacific Daylight Time)">00:31</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">if you&#039;ve just parsed `yield`, and you&#039;re in a template interpolation, you know that the next token could be a RegularExpressionLiteral or a TemplateTail, so you&#039;d use InputElementRegExpOrTemplateTail</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Fri Jun 19 2020 17:31:41 GMT-0700 (Pacific Daylight Time)">00:31</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">etc</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Fri Jun 19 2020 17:31:45 GMT-0700 (Pacific Daylight Time)">00:31</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">ok, so, backing up a bit</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Fri Jun 19 2020 17:32:15 GMT-0700 (Pacific Daylight Time)">00:32</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">Are you specifically interested in having your parser cleave as close as possible to the spec, or are you just trying to write a parser?</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Fri Jun 19 2020 17:32:35 GMT-0700 (Pacific Daylight Time)">00:32</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">Is there a way to know, only from the previous tokens, which goal symbol I should be using?</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Fri Jun 19 2020 17:33:32 GMT-0700 (Pacific Daylight Time)">00:33</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">  def importCall(_yield: Boolean, _await: Boolean) =    str(&quot;import&quot;) ~ elem(&#039;(&#039;) ~ assignmentExpression(true, _yield, _await) ~ elem(&#039;)&#039;)</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Fri Jun 19 2020 17:33:56 GMT-0700 (Pacific Daylight Time)">00:33</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">There&#039;s a sample rule in the parser I&#039;ve written so far, so I&#039;m sticking pretty close to the spec. :-)</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Fri Jun 19 2020 17:34:07 GMT-0700 (Pacific Daylight Time)">00:34</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">what language is that</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Fri Jun 19 2020 17:34:10 GMT-0700 (Pacific Daylight Time)">00:34</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">Scala.</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Fri Jun 19 2020 17:34:24 GMT-0700 (Pacific Daylight Time)">00:34</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">parser combinators, woo</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Fri Jun 19 2020 17:34:47 GMT-0700 (Pacific Daylight Time)">00:34</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">Anyway, the answer is to your previous question is yes</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Fri Jun 19 2020 17:35:23 GMT-0700 (Pacific Daylight Time)">00:35</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">You know which syntactic contexts you might be in, which means you know if the next token can be a regexp, a template tail, or neither, which means you know which of the goal symbols to use</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Fri Jun 19 2020 17:36:10 GMT-0700 (Pacific Daylight Time)">00:36</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">both? InputElementRegExpOrTemplateTail. just regexp? InputElementRegExp. just template middle/tail? InputElementTemplateTail. neither? InputElementDiv.</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Fri Jun 19 2020 17:36:47 GMT-0700 (Pacific Daylight Time)">00:36</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">you might want to take a look at  some existing parsers (acorn, babel, shiftjs) and see how they work</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Fri Jun 19 2020 17:37:15 GMT-0700 (Pacific Daylight Time)">00:37</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">OK. I know about TemplateTail, because if I don&#039;t have a previous, unclosed TemplateHead, that&#039;s out.</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Fri Jun 19 2020 17:37:30 GMT-0700 (Pacific Daylight Time)">00:37</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">devsnek ehh, so, the reason I was asking about if toddobryan was interested in sticking to the spec or not was, the spec is written for clarity and precision, not for ease of implementation</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Fri Jun 19 2020 17:37:43 GMT-0700 (Pacific Daylight Time)">00:37</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">so all the parser implementations don&#039;t look very much like the spec</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Fri Jun 19 2020 17:38:06 GMT-0700 (Pacific Daylight Time)">00:38</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">if you&#039;re trying to look like the spec you have to use different implementation strategies</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Fri Jun 19 2020 17:38:32 GMT-0700 (Pacific Daylight Time)">00:38</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">Is there something as easy as that for whether a Regexp is legal?</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Fri Jun 19 2020 17:39:40 GMT-0700 (Pacific Daylight Time)">00:39</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">I&#039;m guessing I&#039;ll need a couple of flags during tokenizing that just flip on or off `isRegexpAllowed` and `isTemplateTailAllowed`.</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Fri Jun 19 2020 17:40:13 GMT-0700 (Pacific Daylight Time)">00:40</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">for regex literals you generally run over them with some very light rule that just basically recognizes / [ and ]</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Fri Jun 19 2020 17:40:18 GMT-0700 (Pacific Daylight Time)">00:40</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">mm, not quite as easy as that, I don&#039;t think</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Fri Jun 19 2020 17:40:25 GMT-0700 (Pacific Daylight Time)">00:40</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">and then pass it to the separate regex parser</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Fri Jun 19 2020 17:40:36 GMT-0700 (Pacific Daylight Time)">00:40</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">devsnek that happens later, not when trying to decide which lexical goal symbol to use</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Fri Jun 19 2020 17:40:38 GMT-0700 (Pacific Daylight Time)">00:40</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">it&#039;s a separate concern</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Fri Jun 19 2020 17:40:52 GMT-0700 (Pacific Daylight Time)">00:40</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">oh they meant if a regex is allowed</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Fri Jun 19 2020 17:40:59 GMT-0700 (Pacific Daylight Time)">00:40</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">not if it&#039;s valid</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Fri Jun 19 2020 17:41:24 GMT-0700 (Pacific Daylight Time)">00:41</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">toddobryan basically though a regexp is legal wherever an expression is legal; if the next token can&#039;t be an expression (without an intervening semicolon), then you can&#039;t have a regexp</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Fri Jun 19 2020 17:41:49 GMT-0700 (Pacific Daylight Time)">00:41</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">so, e.g., if you have just finished parsing an expression (other than `yield`), you can&#039;t have a semicolon</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Fri Jun 19 2020 17:41:53 GMT-0700 (Pacific Daylight Time)">00:41</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">*can&#039;t have a regexp, sorry</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Fri Jun 19 2020 17:42:16 GMT-0700 (Pacific Daylight Time)">00:42</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">btw if you haven&#039;t thought about ASI now is the time at which you&#039;ll need to think about ASI</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Fri Jun 19 2020 17:42:28 GMT-0700 (Pacific Daylight Time)">00:42</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">ASI?</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Fri Jun 19 2020 17:42:33 GMT-0700 (Pacific Daylight Time)">00:42</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">also no line terminator here</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Fri Jun 19 2020 17:42:34 GMT-0700 (Pacific Daylight Time)">00:42</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">automatic semicolon insertion</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Fri Jun 19 2020 17:42:43 GMT-0700 (Pacific Daylight Time)">00:42</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell"><a href="https://tc39.es/ecma262/#sec-automatic-semicolon-insertion">https://tc39.es/ecma262/#sec-automatic-semicolon-insertion</a></td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Fri Jun 19 2020 17:43:04 GMT-0700 (Pacific Daylight Time)">00:43</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">Yeah. That&#039;s next on the list.</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Fri Jun 19 2020 17:44:56 GMT-0700 (Pacific Daylight Time)">00:44</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">OK. So I guess I need to figure out how to keep track of whether a RegularExpressionLiteral is allowed.</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Fri Jun 19 2020 17:46:05 GMT-0700 (Pacific Daylight Time)">00:46</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">I think you always know at any point you&#039;d ask the tokenizer for the next token</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Fri Jun 19 2020 17:46:45 GMT-0700 (Pacific Daylight Time)">00:46</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">like the normal way of writing a recursive descent parser, you have, I don&#039;t know, parseConditionalExpression or whatever</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Fri Jun 19 2020 17:46:48 GMT-0700 (Pacific Daylight Time)">00:46</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">Thanks for humoring me. I now understand what I was missing.</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Fri Jun 19 2020 17:48:11 GMT-0700 (Pacific Daylight Time)">00:48</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">and you call parseBinaryExpression and so on, and eventually end up at parsePrimaryExpression, and you&#039;re looking at the next token to determine which kind of primary expression it is</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Fri Jun 19 2020 17:48:22 GMT-0700 (Pacific Daylight Time)">00:48</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">Well, I was hoping to separate the parser and the tokenizer, but couldn&#039;t figure out how to do that without understanding which rules were applicable.</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Fri Jun 19 2020 17:48:38 GMT-0700 (Pacific Daylight Time)">00:48</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">and at that point you know that a regexp is legal, so when you ask for the next token, you know to ask for the regexp ones</td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Fri Jun 19 2020 17:48:56 GMT-0700 (Pacific Daylight Time)">00:48</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">ah, yeah, you can&#039;t split them out because you don&#039;t know which goal symbol to use without knowing the syntactic context, unfortunately</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Fri Jun 19 2020 17:49:32 GMT-0700 (Pacific Daylight Time)">00:49</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">specifically, you don&#039;t know if `/` (or `/=`) is going to be the beginning of a regexp or a division without knowing the syntactic context</td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Fri Jun 19 2020 17:50:43 GMT-0700 (Pacific Daylight Time)">00:50</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">anyway, good luck! if you make progress and are inclined to share you should post it; I would enjoy reading it</td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Fri Jun 19 2020 17:51:00 GMT-0700 (Pacific Daylight Time)">00:51</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">I maintain a recursive descent JS parser written in Java, which... is a bit of a pain</td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Fri Jun 19 2020 17:51:01 GMT-0700 (Pacific Daylight Time)">00:51</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">That makes perfect sense. So if I did want to write just a tokenizer, I&#039;d need to include enough syntactic context to disambiguate.</td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Fri Jun 19 2020 17:53:16 GMT-0700 (Pacific Daylight Time)">00:53</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">I can imagine. I tried creating a parser combinator library in Kotlin and gave up. The thing that makes them so nice in Kotlin is that you have the flexible syntax, but, and this is key, you can pass arguments by name in addition to by reference, so you don&#039;t have to deal with things like circular references and such.</td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Fri Jun 19 2020 17:53:32 GMT-0700 (Pacific Daylight Time)">00:53</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">&quot;so nice in Scala&quot; I meant.</td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Fri Jun 19 2020 17:53:45 GMT-0700 (Pacific Daylight Time)">00:53</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">Thanks for all the help!</td></tr>
  <tr class="msg" id="L100"><td class="ts-cell"><a class="ts" href="#L100" alt="Fri Jun 19 2020 17:54:40 GMT-0700 (Pacific Daylight Time)">00:54</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">Yeah, the Java one does not get to use combinators</td></tr>
  <tr class="msg" id="L101"><td class="ts-cell"><a class="ts" href="#L101" alt="Fri Jun 19 2020 17:54:47 GMT-0700 (Pacific Daylight Time)">00:54</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">Well, it could I guess, but it doesn&#039;t</td></tr>
  <tr class="msg" id="L102"><td class="ts-cell"><a class="ts" href="#L102" alt="Fri Jun 19 2020 17:55:29 GMT-0700 (Pacific Daylight Time)">00:55</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">(it lives in <a href="https://github.com/shapesecurity/shift-java/blob/es2018/src/main/java/com/shapesecurity/shift/es2018/parser/GenericParser.java">https://github.com/shapesecurity/shift-java/blob/es2018/src/main/java/com/shapesecurity/shift/es2018/parser/GenericParser.java</a> )</td></tr>
  <tr class="msg" id="L103"><td class="ts-cell"><a class="ts" href="#L103" alt="Fri Jun 19 2020 17:55:55 GMT-0700 (Pacific Daylight Time)">00:55</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">Thanks!</td></tr>
  <tr class="msg" id="L104"><td class="ts-cell"><a class="ts" href="#L104" alt="Fri Jun 19 2020 18:00:20 GMT-0700 (Pacific Daylight Time)">01:00</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">toddobryan: thinking about it more, for a recursive descent parser I don&#039;t think you&#039;d need to actually &quot;keep track&quot; of any state, as such, to know which of the four lexical grammar goal symbols to ask for</td></tr>
  <tr class="msg" id="L105"><td class="ts-cell"><a class="ts" href="#L105" alt="Fri Jun 19 2020 18:00:37 GMT-0700 (Pacific Daylight Time)">01:00</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">it&#039;s always going to be obvious every time you ask for a token</td></tr>
  <tr class="msg" id="L106"><td class="ts-cell"><a class="ts" href="#L106" alt="Fri Jun 19 2020 18:01:16 GMT-0700 (Pacific Daylight Time)">01:01</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">Yeah. It seems to work for parsing without knowing--what I can&#039;t do is tokenize.</td></tr>
  <tr class="msg" id="L107"><td class="ts-cell"><a class="ts" href="#L107" alt="Fri Jun 19 2020 18:01:35 GMT-0700 (Pacific Daylight Time)">01:01</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">Can&#039;t tokenize ahead of parsing, right</td></tr>
  <tr class="msg" id="L108"><td class="ts-cell"><a class="ts" href="#L108" alt="Fri Jun 19 2020 18:02:21 GMT-0700 (Pacific Daylight Time)">01:02</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">Because the syntactic grammar rules aren&#039;t written in terms of tokens--they&#039;re written in terms of input literals in lots of cases.</td></tr>
  <tr class="msg" id="L109"><td class="ts-cell"><a class="ts" href="#L109" alt="Fri Jun 19 2020 18:03:24 GMT-0700 (Pacific Daylight Time)">01:03</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">Hm. I guess the way I&#039;d put it is, the input literals are specializations of the nonterminals of the lexical grammar</td></tr>
  <tr class="msg" id="L110"><td class="ts-cell"><a class="ts" href="#L110" alt="Fri Jun 19 2020 18:03:55 GMT-0700 (Pacific Daylight Time)">01:03</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">when the syntactic grammar says `if`, for example, that is an IdentifierName which has the contents &quot;if&quot;</td></tr>
  <tr class="msg" id="L111"><td class="ts-cell"><a class="ts" href="#L111" alt="Fri Jun 19 2020 18:04:05 GMT-0700 (Pacific Daylight Time)">01:04</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">i.e. it is a particular kind of IdentifierName</td></tr>
  <tr class="msg" id="L112"><td class="ts-cell"><a class="ts" href="#L112" alt="Fri Jun 19 2020 18:04:22 GMT-0700 (Pacific Daylight Time)">01:04</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">similarly when it says `(` that is a particular kind of Punctuator, etc</td></tr>
  <tr class="msg" id="L113"><td class="ts-cell"><a class="ts" href="#L113" alt="Fri Jun 19 2020 18:04:51 GMT-0700 (Pacific Daylight Time)">01:04</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">you could write your tokenizer over the specializations, rather than over the full set; that is (afaik) what everyone actually does</td></tr>
  <tr class="msg" id="L114"><td class="ts-cell"><a class="ts" href="#L114" alt="Fri Jun 19 2020 18:04:57 GMT-0700 (Pacific Daylight Time)">01:04</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=toddobryan@irc>toddobryan</span>&gt;</td><td class="msg-cell">Yeah, I can see interpreting it that way.</td></tr>
  <tr class="msg" id="L115"><td class="ts-cell"><a class="ts" href="#L115" alt="Fri Jun 19 2020 20:15:39 GMT-0700 (Pacific Daylight Time)">03:15</a></td><td class="nick-cell">&lt;<span class="nick nick-13" title=jmdyck@irc>jmdyck</span>&gt;</td><td class="msg-cell">dang, I missed a grammar discussion</td></tr>
  <tr class="msg" id="L116"><td class="ts-cell"><a class="ts" href="#L116" alt="Sat Jun 20 2020 06:17:55 GMT-0700 (Pacific Daylight Time)">13:17</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=bendtherules@irc>bendtherules</span>&gt;</td><td class="msg-cell">I was looking at NamedEvaluation of anon functions within object literals</td></tr>
  <tr class="msg" id="L117"><td class="ts-cell"><a class="ts" href="#L117" alt="Sat Jun 20 2020 06:17:55 GMT-0700 (Pacific Daylight Time)">13:17</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=bendtherules@irc>bendtherules</span>&gt;</td><td class="msg-cell">and I was like gotcha - what if this key is a symbol? what will be to the fn name?</td></tr>
  <tr class="msg" id="L118"><td class="ts-cell"><a class="ts" href="#L118" alt="Sat Jun 20 2020 06:17:55 GMT-0700 (Pacific Daylight Time)">13:17</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=bendtherules@irc>bendtherules</span>&gt;</td><td class="msg-cell">And then found this - `set name to the string-concatenation of &quot;[&quot;, description, and &quot;]&quot;`</td></tr>
  <tr class="msg" id="L119"><td class="ts-cell"><a class="ts" href="#L119" alt="Sat Jun 20 2020 06:17:55 GMT-0700 (Pacific Daylight Time)">13:17</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=bendtherules@irc>bendtherules</span>&gt;</td><td class="msg-cell">Now i understand how much of effort and details goes in to the specs. Just wanted to appreciate the contributors.</td></tr>
  <tr class="msg" id="L120"><td class="ts-cell"><a class="ts" href="#L120" alt="Sat Jun 20 2020 06:20:26 GMT-0700 (Pacific Daylight Time)">13:20</a></td><td class="nick-cell">&lt;<span class="nick nick-10" title=bendtherules@irc>bendtherules</span>&gt;</td><td class="msg-cell">(and i also wonder if there is a story behind this naming?)</td></tr>
  <tr class="msg" id="L121"><td class="ts-cell"><a class="ts" href="#L121" alt="Sat Jun 20 2020 14:21:25 GMT-0700 (Pacific Daylight Time)">21:21</a></td><td class="nick-cell">&lt;<span class="nick nick-13" title=jmdyck@irc>jmdyck</span>&gt;</td><td class="msg-cell">bendtherules: a story behind the name &quot;NamedEvaluation&quot; you mean?</td></tr>
  <tr class="msg" id="L122"><td class="ts-cell"><a class="ts" href="#L122" alt="Sat Jun 20 2020 16:28:09 GMT-0700 (Pacific Daylight Time)">23:28</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">bradleymeck: is there a repo for string literal imports</td></tr>
</tbody></table>
</div></div></div></body>
