<!doctype html>
<head>
  <title>#tc39 on 2020-08-28</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#tc39<br>2020-08-28<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2020-08-27" class="nav-link"><span>prev</span></a>
<a href="2020-08-29" class="nav-link"><span style="float:right">next</span></a>
</div>
    
<div class="room-list-wrapper">Active:<br>
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/">WHATWG</a></li>
</ul>
</div>
<br>
<div class="room-list-wrapper">Historical:<br>
<ul class="room-list">
<li><a href="../irc-tc39/" class="current-room">#tc39</a></li>
<li><a href="../irc-tc39-delegates/">#tc39-delegates</a></li>
<li><a href="../irc-tc39-editor-group/">#tc39-editor-group</a></li>
<li><a href="../irc-whatwg/">#whatwg</a></li>
</ul>
</div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>
<input type="text" id="query" size=25 placeholder="Search #tc39">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Fri Aug 28 2020 14:06:49 GMT-0700 (Pacific Daylight Time)">21:06</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=rwaldron@irc>rwaldron</span>&gt;</td><td class="msg-cell">Bakkot sorry, I&#039;ve been on vacation (still am). To answer your question: I don&#039;t believe that was intentional.</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Fri Aug 28 2020 14:07:04 GMT-0700 (Pacific Daylight Time)">21:07</a></td><td class="nick-cell">&lt;<span class="nick nick-16" title=rwaldron@irc>rwaldron</span>&gt;</td><td class="msg-cell">(back to vacation)</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Fri Aug 28 2020 14:09:36 GMT-0700 (Pacific Daylight Time)">21:09</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">rwaldron: sweet, thanks! enjoy vacation</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Fri Aug 28 2020 14:26:29 GMT-0700 (Pacific Daylight Time)">21:26</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">Can someone explain what the point of the invariants on Proxy object&#039;s [[Get]] are? Seems like they are kinda unnecessary, what do they actually prevent?</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Fri Aug 28 2020 14:29:30 GMT-0700 (Pacific Daylight Time)">21:29</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">i&#039;m not 100% sure why those invariants exist in the spec but they aren&#039;t specific to proxies</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Fri Aug 28 2020 14:29:36 GMT-0700 (Pacific Daylight Time)">21:29</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">everything has to abide by them</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Fri Aug 28 2020 14:36:49 GMT-0700 (Pacific Daylight Time)">21:36</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">keith_miller: which invariants?</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Fri Aug 28 2020 14:37:11 GMT-0700 (Pacific Daylight Time)">21:37</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">The value reported for a property must be the same as the value of the corresponding target object property if the target object property is a non-writable, non-configurable own data property.</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Fri Aug 28 2020 14:37:22 GMT-0700 (Pacific Daylight Time)">21:37</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">The value reported for a property must be undefined if the corresponding target object property is a non-configurable own accessor property that has undefined as its [[Get]] attribute.</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Fri Aug 28 2020 14:37:44 GMT-0700 (Pacific Daylight Time)">21:37</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">devsnek: Seems silly because I could just use a different target that doesn&#039;t have any own properties.</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Fri Aug 28 2020 14:37:59 GMT-0700 (Pacific Daylight Time)">21:37</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">i agree they are definitely annoying</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Fri Aug 28 2020 14:38:06 GMT-0700 (Pacific Daylight Time)">21:38</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">keith_miller they are useful in combination with  the GetOwnProperty invariants</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Fri Aug 28 2020 14:38:38 GMT-0700 (Pacific Daylight Time)">21:38</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">Bakkot: how so?</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Fri Aug 28 2020 14:38:51 GMT-0700 (Pacific Daylight Time)">21:38</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">in combination with the GetOwnProperty invariants, they prevent you from observing the sequence &quot;let { value, writable, configurable} = Object.getOwnPropertyDescriptor(p, &#039;prop&#039;); !writable &amp;&amp; !configurable /* true */; !<a href="http://Object.is">Object.is</a>(p.prop, value)`</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Fri Aug 28 2020 14:39:28 GMT-0700 (Pacific Daylight Time)">21:39</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">the GetOwnProperty invariants prevent you from reporting a property as nonwritable-nonconfigurable unless the target actually has such a nonwritable-nonconfigurable property</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Fri Aug 28 2020 14:39:31 GMT-0700 (Pacific Daylight Time)">21:39</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">what does it mean to observe the sequence?</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Fri Aug 28 2020 14:39:38 GMT-0700 (Pacific Daylight Time)">21:39</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">uh, sorry</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Fri Aug 28 2020 14:39:44 GMT-0700 (Pacific Daylight Time)">21:39</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">But why do I care?</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Fri Aug 28 2020 14:40:10 GMT-0700 (Pacific Daylight Time)">21:40</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">If I want to get around the invariant a can just &quot;swizzle&quot; the target?</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Fri Aug 28 2020 14:40:12 GMT-0700 (Pacific Daylight Time)">21:40</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">basically if a proxy reports a property existing and being nonwritable-nonconfigurable, then its value can&#039;t ever be reported to be something other than what it is reported to be at that point in time</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Fri Aug 28 2020 14:40:17 GMT-0700 (Pacific Daylight Time)">21:40</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">you cannot just swizze the target</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Fri Aug 28 2020 14:40:20 GMT-0700 (Pacific Daylight Time)">21:40</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">Is there a way to observe the target?</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Fri Aug 28 2020 14:40:25 GMT-0700 (Pacific Daylight Time)">21:40</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">nope</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Fri Aug 28 2020 14:40:35 GMT-0700 (Pacific Daylight Time)">21:40</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">Then yeah, why does it matter what the target is?</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Fri Aug 28 2020 14:40:56 GMT-0700 (Pacific Daylight Time)">21:40</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">I could just tell you you are Array.prototype but really just an array</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Fri Aug 28 2020 14:41:02 GMT-0700 (Pacific Daylight Time)">21:41</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">you are looking at</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Fri Aug 28 2020 14:41:03 GMT-0700 (Pacific Daylight Time)">21:41</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">*</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Fri Aug 28 2020 14:41:27 GMT-0700 (Pacific Daylight Time)">21:41</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">I don&#039;t know that it does matter what the target is?</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Fri Aug 28 2020 14:41:48 GMT-0700 (Pacific Daylight Time)">21:41</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">but &quot;basically if a proxy reports a property existing and being nonwritable-nonconfigurable, then its value can&#039;t ever be reported to be something other than what it is reported to be at that point in time&quot; is still true</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Fri Aug 28 2020 14:42:32 GMT-0700 (Pacific Daylight Time)">21:42</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">i still don&#039;t get why that matters</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Fri Aug 28 2020 14:42:35 GMT-0700 (Pacific Daylight Time)">21:42</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">the way this is accomplished is that in order to report a property existing and being nonwritable-nonconfigurable, you have to sort of &quot;prove&quot; that you will be consistent about its value in the future, by having the target as a &quot;witness&quot; in the proof sense</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Fri Aug 28 2020 14:42:50 GMT-0700 (Pacific Daylight Time)">21:42</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">But what&#039;s the point?</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Fri Aug 28 2020 14:42:51 GMT-0700 (Pacific Daylight Time)">21:42</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">like if i want to confuse people with weird proxy traps why does ecma262 care</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Fri Aug 28 2020 14:42:53 GMT-0700 (Pacific Daylight Time)">21:42</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">devsnek lotta code relies on that invariant, including security-sensitive code, is why that matters</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Fri Aug 28 2020 14:43:17 GMT-0700 (Pacific Daylight Time)">21:43</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">how?</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Fri Aug 28 2020 14:43:57 GMT-0700 (Pacific Daylight Time)">21:43</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">that&#039;s kinda SES&#039;s whole schtick</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Fri Aug 28 2020 14:44:27 GMT-0700 (Pacific Daylight Time)">21:44</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">Seems like SES should just reject any incoming proxy objects or something</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Fri Aug 28 2020 14:44:33 GMT-0700 (Pacific Daylight Time)">21:44</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">if you can&#039;t rely on freezing something and having it stay frozen, a lot of code breaks</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Fri Aug 28 2020 14:44:36 GMT-0700 (Pacific Daylight Time)">21:44</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">you cannot identify a proxy</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Fri Aug 28 2020 14:44:39 GMT-0700 (Pacific Daylight Time)">21:44</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">keith_miller: you can&#039;t have an isProxy</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Fri Aug 28 2020 14:44:48 GMT-0700 (Pacific Daylight Time)">21:44</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">I was pretty sure there was a way to tell if an object is a proxy</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Fri Aug 28 2020 14:44:51 GMT-0700 (Pacific Daylight Time)">21:44</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">you can identify a proxy to any builtin that has slots</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Fri Aug 28 2020 14:45:08 GMT-0700 (Pacific Daylight Time)">21:45</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">It&#039;s some weird sequence of code</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Fri Aug 28 2020 14:45:09 GMT-0700 (Pacific Daylight Time)">21:45</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">but you can&#039;t generically identify a proxy (unless you know it&#039;s claiming to be a slot-having builtin)</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Fri Aug 28 2020 14:45:17 GMT-0700 (Pacific Daylight Time)">21:45</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">there is a way which works if the object has a mutable prototype chain, though this was unintentional</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Fri Aug 28 2020 14:45:21 GMT-0700 (Pacific Daylight Time)">21:45</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">oh right</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Fri Aug 28 2020 14:45:35 GMT-0700 (Pacific Daylight Time)">21:45</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">doesn&#039;t work if the whole proto chain is fixed though</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Fri Aug 28 2020 14:46:12 GMT-0700 (Pacific Daylight Time)">21:46</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">So, 99% of the time you can tell then?</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Fri Aug 28 2020 14:47:00 GMT-0700 (Pacific Daylight Time)">21:47</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">in the relevant cases? not sure that&#039;s true, no; 99% of objects don&#039;t have any nonwritable-nonconfigurable properties, and the remaining 1% are disproportionately likely to have fixed prototype chains as well</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Fri Aug 28 2020 14:47:29 GMT-0700 (Pacific Daylight Time)">21:47</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">but yes, you can tell some of the time, sure</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Fri Aug 28 2020 14:47:38 GMT-0700 (Pacific Daylight Time)">21:47</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">this fact was not known when proxies were designed, mind</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Fri Aug 28 2020 14:47:40 GMT-0700 (Pacific Daylight Time)">21:47</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">Well the relevant case is that you used 5x the CPU time to do get</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Fri Aug 28 2020 14:47:57 GMT-0700 (Pacific Daylight Time)">21:47</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">so in that case SES will forever have bad perf</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Fri Aug 28 2020 14:48:31 GMT-0700 (Pacific Daylight Time)">21:48</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">If your property access involves running JS code I don&#039;t think it is too surprising that you&#039;re gonna take a severe perf hit</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Fri Aug 28 2020 14:48:54 GMT-0700 (Pacific Daylight Time)">21:48</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">there are plenty of systems where perf doesn&#039;t really matter but correctness does</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Fri Aug 28 2020 14:48:54 GMT-0700 (Pacific Daylight Time)">21:48</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">Isn&#039;t that almost everything in SES</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Fri Aug 28 2020 14:49:11 GMT-0700 (Pacific Daylight Time)">21:49</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">yup, SES takes a severe perf hit</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Fri Aug 28 2020 14:49:18 GMT-0700 (Pacific Daylight Time)">21:49</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">though not everything!</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Fri Aug 28 2020 14:49:33 GMT-0700 (Pacific Daylight Time)">21:49</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">in particular, _because_ of this invariant, they don&#039;t have to wrap transitively-frozen objects</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Fri Aug 28 2020 14:49:40 GMT-0700 (Pacific Daylight Time)">21:49</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">ljharb: Everyone says perf doesn&#039;t matter until they realize it&#039;s costing them 2+ hours of their phones battery life</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Fri Aug 28 2020 14:50:06 GMT-0700 (Pacific Daylight Time)">21:50</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">i mean, i still use the facebook app on my iphone</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Fri Aug 28 2020 14:50:25 GMT-0700 (Pacific Daylight Time)">21:50</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">so i&#039;m not sure it starts mattering even then :-p</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Fri Aug 28 2020 14:51:03 GMT-0700 (Pacific Daylight Time)">21:51</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">SES has chosen to make the tradeoff between security and performance in favor of performance, which is a fine decision for them to make</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Fri Aug 28 2020 14:51:28 GMT-0700 (Pacific Daylight Time)">21:51</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">most people aren&#039;t gonna have any proxies and so don&#039;t pay any penalty for these invariants being enforced for SES</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Fri Aug 28 2020 14:51:35 GMT-0700 (Pacific Daylight Time)">21:51</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">So SES owns proxies?</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Fri Aug 28 2020 14:51:44 GMT-0700 (Pacific Daylight Time)">21:51</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">no?</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Fri Aug 28 2020 14:51:47 GMT-0700 (Pacific Daylight Time)">21:51</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">What about people that want proxies and want things to be fast</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Fri Aug 28 2020 14:51:49 GMT-0700 (Pacific Daylight Time)">21:51</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">sorry, let me state that another way.</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Fri Aug 28 2020 14:52:45 GMT-0700 (Pacific Daylight Time)">21:52</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">Bakkot: Also, for what it&#039;s worth getter&#039;s don&#039;t really cost you anything. At least in JSC, once the optimizing compiler kicks in</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Fri Aug 28 2020 14:52:53 GMT-0700 (Pacific Daylight Time)">21:52</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">Or the getter is crazy complicate</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Fri Aug 28 2020 14:52:57 GMT-0700 (Pacific Daylight Time)">21:52</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">complicated*</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Fri Aug 28 2020 14:53:28 GMT-0700 (Pacific Daylight Time)">21:53</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">which is exactly the problem here. I&#039;d like to make the proxy traps effectively a getter but all the validation makes it too big to efficiently inline</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Fri Aug 28 2020 14:53:31 GMT-0700 (Pacific Daylight Time)">21:53</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">the fact that proxies still enforce certain invariants means that all code in the entire ecosystem that wants to rely on those invariants can do so: otherwise every library would have potential bugs, including potential security bugs, if they assumed those invariants held as they did in ES5. and if they avoided bugs it would be at the expensive of significant complexity for every single user. I think it is good therefore that proxies</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Fri Aug 28 2020 14:53:31 GMT-0700 (Pacific Daylight Time)">21:53</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell"> do not allow you to violate language-level invariatns.</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Fri Aug 28 2020 14:53:38 GMT-0700 (Pacific Daylight Time)">21:53</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">keith_miller: getters have a cost that has nothing to do with runtime perf :-p</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Fri Aug 28 2020 14:54:02 GMT-0700 (Pacific Daylight Time)">21:54</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">even though that comes with some performance cost for people who _do_ use proxies: because that price is paid _only_ by code that choses to use proxies, not by users of every single library which wants to rely on object invariants.</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Fri Aug 28 2020 14:54:28 GMT-0700 (Pacific Daylight Time)">21:54</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">*chooses</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Fri Aug 28 2020 14:55:31 GMT-0700 (Pacific Daylight Time)">21:55</a></td><td class="nick-cell">&lt;<span class="nick nick-8" title=Bakkot@irc>Bakkot</span>&gt;</td><td class="msg-cell">(Now, I also happen to think that Proxies were a mistake in the first place. But I&#039;m glad that they were done in such a way that you can still rely on certain invariants.)</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Fri Aug 28 2020 14:55:48 GMT-0700 (Pacific Daylight Time)">21:55</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">+2</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Fri Aug 28 2020 14:55:51 GMT-0700 (Pacific Daylight Time)">21:55</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">Oh, I agree that Proxies were a bad choice, no argument there</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Fri Aug 28 2020 14:58:04 GMT-0700 (Pacific Daylight Time)">21:58</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">keith_miller: so who are the people that want to use proxies and also have them be fast, and what are their use cases? (obv not implying there&#039;s no such people)</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Fri Aug 28 2020 14:58:50 GMT-0700 (Pacific Daylight Time)">21:58</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">ljharb: I&#039;ve seen people use them for matrices on a single ArrayBuffer. That was the case I was trying to optimize</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Fri Aug 28 2020 14:59:29 GMT-0700 (Pacific Daylight Time)">21:59</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">Basically they&#039;re migrating C code that has a float[3][3] and want to use the same coding style</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Fri Aug 28 2020 15:01:25 GMT-0700 (Pacific Daylight Time)">22:01</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">do you think &quot;i want to use the same style as a different language&quot; is a reasonable justification for invalidating existing language invariants?</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Fri Aug 28 2020 15:09:08 GMT-0700 (Pacific Daylight Time)">22:09</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">ljharb: ? I don&#039;t think that&#039;s the only case where you&#039;d want Proxies lol</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Fri Aug 28 2020 15:10:56 GMT-0700 (Pacific Daylight Time)">22:10</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">I feel like that&#039;s a loaded gun question lol</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Fri Aug 28 2020 15:15:50 GMT-0700 (Pacific Daylight Time)">22:15</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">fair, sorry, i&#039;m trying to understand why the invariants being there are a problem :-)</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Fri Aug 28 2020 15:20:43 GMT-0700 (Pacific Daylight Time)">22:20</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=keith_miller@irc>keith_miller</span>&gt;</td><td class="msg-cell">ljharb: Mostly the problem is that they&#039;re currently inconvenient for me :P</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Fri Aug 28 2020 15:21:16 GMT-0700 (Pacific Daylight Time)">22:21</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">lol ok</td></tr>

</tbody></table></div></div></div></body>
