<!doctype html>
<head>
  <title>#tc39 on 2020-06-26</title>
  <link rel="stylesheet" href="../style.css">
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">#tc39<br>2020-06-26<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2020-06-25" class="nav-link"><span>prev</span></a>
<a href="2020-06-27" class="nav-link"><span style="float:right">next</span></a>
</div>
    
<div class="room-list-wrapper">Active:<br>
<ul class="room-list">
<li><a href="../TC39_Delegates/">TC39 Delegates</a></li>
<li><a href="../TC39_Editors/">TC39 Editors</a></li>
<li><a href="../TC39_General/">TC39 General</a></li>
<li><a href="../WHATWG/">WHATWG</a></li>
</ul>
</div>
<br>
<div class="room-list-wrapper">Historical:<br>
<ul class="room-list">
<li><a href="../irc-tc39/" class="current-room">#tc39</a></li>
<li><a href="../irc-tc39-delegates/">#tc39-delegates</a></li>
<li><a href="../irc-tc39-editor-group/">#tc39-editor-group</a></li>
<li><a href="../irc-whatwg/">#whatwg</a></li>
</ul>
</div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs"><div class="log">
<table><tbody id="log-tbody">
  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Thu Jun 25 2020 19:34:44 GMT-0700 (Pacific Daylight Time)">02:34</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=jridgewell@irc>jridgewell</span>&gt;</td><td class="msg-cell">&gt; rlwarp</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Thu Jun 25 2020 19:34:44 GMT-0700 (Pacific Daylight Time)">02:34</a></td><td class="nick-cell">&lt;<span class="nick nick-4" title=jridgewell@irc>jridgewell</span>&gt;</td><td class="msg-cell">WHY HAVE I NEVER HEARD OF THIS?</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Fri Jun 26 2020 01:02:26 GMT-0700 (Pacific Daylight Time)">08:02</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">Hello. Is there any reliable mechanism to identify a type of a given function object? I want to know whether this function is normal, generator, async, and so on.</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Fri Jun 26 2020 01:26:43 GMT-0700 (Pacific Daylight Time)">08:26</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">Oh. *mechanism* seems misleading. I want to find a reliable way to identify a type of a function.</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Fri Jun 26 2020 06:59:58 GMT-0700 (Pacific Daylight Time)">13:59</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">Yoonseok: they do have different prototypes, but in general they could always return stuff and act as other things, e.g. it is common for a normal function to return the promise of an async function</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Fri Jun 26 2020 07:00:12 GMT-0700 (Pacific Daylight Time)">14:00</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">Yoonseok: so, even if you know the type, it generally isn&#039;t useful</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Fri Jun 26 2020 07:01:16 GMT-0700 (Pacific Daylight Time)">14:01</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">fun stuff also happens when sometimes we have seen functions passed into node&#039;s builtins with null prototypes via Object.setPrototypeOf(()=&gt;{}, null)</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Fri Jun 26 2020 07:01:26 GMT-0700 (Pacific Daylight Time)">14:01</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">so even prototypes aren&#039;t necessarily a good route</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Fri Jun 26 2020 07:02:09 GMT-0700 (Pacific Daylight Time)">14:02</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">yes. Indeed, prototypes is mutable. So, it is not reliable.</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Fri Jun 26 2020 07:02:39 GMT-0700 (Pacific Daylight Time)">14:02</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">hm. i&#039;m thinking about &quot;it generally isn&#039;t useful&quot;.</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Fri Jun 26 2020 07:03:20 GMT-0700 (Pacific Daylight Time)">14:03</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">for a given function, i want to provide a kind of secure layer that filter out leaking a secret by return value.</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Fri Jun 26 2020 07:04:28 GMT-0700 (Pacific Daylight Time)">14:04</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">but, without knowing the type of a given function, it is not possible to provide a secure layer for the function. (mostly, this layer is a wrapper function).</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Fri Jun 26 2020 07:05:27 GMT-0700 (Pacific Daylight Time)">14:05</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">in the case of generator, it returns a generator object, and you can call the it by <a href="http://generator.next">generator.next</a>(), which is out of my scope.</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Fri Jun 26 2020 07:06:43 GMT-0700 (Pacific Daylight Time)">14:06</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">indeed, it is not surprising even though js does not support a feature to identify a type of object.</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Fri Jun 26 2020 07:07:43 GMT-0700 (Pacific Daylight Time)">14:07</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">but, in other cases, such as Date, RegExp, we can observe the type by applying the object to &quot;Date.prototype.getTime&quot; or &quot;RegExp.prototype.test&quot;.</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Fri Jun 26 2020 07:08:39 GMT-0700 (Pacific Daylight Time)">14:08</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">but, I really cannot find it for generator or async functions.</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Fri Jun 26 2020 07:10:55 GMT-0700 (Pacific Daylight Time)">14:10</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">in practice, we can apply `Function.prototype.toString`, but it is not standard (so, XS or JerryScript does not return its content),</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Fri Jun 26 2020 07:11:12 GMT-0700 (Pacific Daylight Time)">14:11</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">moreover, Function.prototype.bind removes it.</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Fri Jun 26 2020 07:13:48 GMT-0700 (Pacific Daylight Time)">14:13</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">bradleymeck anyway. thank you for the response. :)</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Fri Jun 26 2020 07:15:47 GMT-0700 (Pacific Daylight Time)">14:15</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">Yoonseok: I mean, <a href="http://Function.prototype.bind.call">Function.prototype.bind.call</a>(fn) will give you a *new* function with the proper prototype</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Fri Jun 26 2020 07:15:59 GMT-0700 (Pacific Daylight Time)">14:15</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">ah.</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Fri Jun 26 2020 07:16:01 GMT-0700 (Pacific Daylight Time)">14:16</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">but it won&#039;t be useful for determining how the return value works</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Fri Jun 26 2020 07:16:13 GMT-0700 (Pacific Daylight Time)">14:16</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">normal functions can return iterators/promises/etc.</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Fri Jun 26 2020 07:16:51 GMT-0700 (Pacific Daylight Time)">14:16</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">or wait, not it won&#039;t it just inherits</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Fri Jun 26 2020 07:16:56 GMT-0700 (Pacific Daylight Time)">14:16</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">my brain is waking up still</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Fri Jun 26 2020 07:16:56 GMT-0700 (Pacific Daylight Time)">14:16</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">it is correct. okay. i had some assumption.</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Fri Jun 26 2020 07:21:25 GMT-0700 (Pacific Daylight Time)">14:21</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">okay. i will check it first. I&#039;m thinking about whether I can implement a membrane that allows me to pass a generator.</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Fri Jun 26 2020 07:56:43 GMT-0700 (Pacific Daylight Time)">14:56</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">bradleymeck thank you. i think that you&#039;re right. such type information is not useful. they are all just a function that returns a different type of values.</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Fri Jun 26 2020 07:59:06 GMT-0700 (Pacific Daylight Time)">14:59</a></td><td class="nick-cell">&lt;<span class="nick nick-2" title=bradleymeck@irc>bradleymeck</span>&gt;</td><td class="msg-cell">Yoonseok: in general what Membranes if they are crossing a barrier do for such things is to wrap all the return values if they are objects if you look at lightning web components, es-membrane, or SES</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Fri Jun 26 2020 08:03:44 GMT-0700 (Pacific Daylight Time)">15:03</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">i&#039;m looking at the current limitation of membranes. since membrane relies on proxy feature and proxy feature does not allow to access internal slots, membrane does not guarantee the identity of objects (here, identity means internal slots). for example, if a regular expression object o is passed via membrane, you cannot use &quot;abc&quot;.test(o) because o</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Fri Jun 26 2020 08:03:44 GMT-0700 (Pacific Daylight Time)">15:03</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">is not a regular expression object anymore.</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Fri Jun 26 2020 08:03:50 GMT-0700 (Pacific Daylight Time)">15:03</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">I think it is the same for the generator function.</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Fri Jun 26 2020 08:04:52 GMT-0700 (Pacific Daylight Time)">15:04</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">generator function returns a generator object, and (of course, no one really want to use this) if anyone want to call the generator object gfn by `(function*(){}).<a href="http://constructor.prototype.prototype.next">constructor.prototype.prototype.next</a>.apply(gfn)`, it will fail. because gfn is not a generator object (it is a proxy).</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Fri Jun 26 2020 08:05:57 GMT-0700 (Pacific Daylight Time)">15:05</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">ah. when gfn is obtained by a generator function passed via the membrane (the barrier).</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Fri Jun 26 2020 08:06:39 GMT-0700 (Pacific Daylight Time)">15:06</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">I thought that there is a way to improve it if we know the type of a function. but, you&#039;re right. we can&#039;t even if we know the type.</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Fri Jun 26 2020 08:12:38 GMT-0700 (Pacific Daylight Time)">15:12</a></td><td class="nick-cell">&lt;<span class="nick nick-11" title=Yoonseok@irc>Yoonseok</span>&gt;</td><td class="msg-cell">uh. i really want to rewrite whole sentences. sorry for the mess sentences. :/</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Fri Jun 26 2020 09:27:37 GMT-0700 (Pacific Daylight Time)">16:27</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">ljharb: i can&#039;t tell what your suggested change does</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Fri Jun 26 2020 09:27:47 GMT-0700 (Pacific Daylight Time)">16:27</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">i hate that github won&#039;t highlight it</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Fri Jun 26 2020 09:28:05 GMT-0700 (Pacific Daylight Time)">16:28</a></td><td class="nick-cell">&lt;<span class="nick nick-6" title=ljharb@irc>ljharb</span>&gt;</td><td class="msg-cell">spells additionally properly</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Fri Jun 26 2020 09:28:49 GMT-0700 (Pacific Daylight Time)">16:28</a></td><td class="nick-cell">&lt;<span class="nick nick-5" title=devsnek@irc>devsnek</span>&gt;</td><td class="msg-cell">oh cool</td></tr>
</tbody></table>
</div></div></div></body>
