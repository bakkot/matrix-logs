2023-07-26
[12:10:57.0875] <ljharb>
it is *very* confusing that in the chrome console, `class T{ #b = 1; }; const t = new T(); console.log(t.#b);` works instead of throws. is that a bug worth filing?

[12:12:07.0179] <ljharb>
 * it is _very_ confusing that in the chrome console, `class T{ #b = 1; }; const t = new T(); console.log(t.#b);` works instead of throws (it throws in safari, altho it doesn't parse so i have to do it in two lines). is that a bug worth filing?

[13:11:52.0535] <shu>
that is intentional afaik

[13:11:56.0448] <shu>
why is it very confusing?

[13:12:29.0684] <shu>
this was done with the hypothesis that when in a REPL debugging, developers expect to be able to access their private state

[13:12:48.0044] <littledan>
yeah it used to throw, and there was a particular effort to make it work. It's only in the console, so it doesn't violate privacy.

[13:12:48.0052] <shu>
otherwise you can't debug private state easily at all

[13:14:19.0213] <shu>
there are other non-conformant behavior in the console like allowing let/const redecls at the same scope

[13:14:36.0767] <shu>
for the same reasons, that is, of better DX during REPL debugging

[13:14:52.0110] <littledan>
What would be really great is if we could revive the effort to standardize JS console behavior, which has long differed from scripts and modules. Bradley was previously working on this.

[13:15:05.0648] <shu>
that was shut down by Allen last time IIRC

[13:15:12.0151] <shu>
but Allen is no longer actively participating

[13:15:49.0555] <littledan>
well, we can review the counterarguments he made previously and see what the committee thinks

[13:16:00.0108] <shu>
yeah

[13:16:25.0345] <littledan>
ultimately I think Allen's model of embedders/extensions and such differs from the way we've been moving, and I think that sort of thing was the sticking point

[13:17:28.0163] <littledan>
This is the previous repo: https://github.com/bmeck/js-repl-goal

