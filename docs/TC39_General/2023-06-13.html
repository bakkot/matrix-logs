<!DOCTYPE html><html><head>
  <title>TC39 General on 2023-06-13</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "TC39 General";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">TC39 General<br>2023-06-13<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2023-06-12" class="nav-link"><span>prev</span></a>
<a href="2023-06-14" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search TC39 General">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Mon Jun 12 2023 18:16:43 GMT-0700 (Pacific Daylight Time)">01:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell">tbh i'd say that if the catch is in a separate file from the finally, then the finally file probably shouldn't be assuming the promise is handled - iow, the author of one file shouldn't assume knowledge of the code in another one</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Jun 13 2023 04:05:33 GMT-0700 (Pacific Daylight Time)">11:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@twixes3d:matrix.org">matlokam</span>&gt;</div></td><td class="msg-cell">Hey! I have a random question: was the idea of <code>Array.prototype.clear()</code> ever struck down in TC39? I've had repeated experiences of <code>array.length = 0</code> not being trusted by developers, despite being the best way to do clear an array, so I was thinking if a <code>.clear()</code> proposal would have a future</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Jun 13 2023 04:06:33 GMT-0700 (Pacific Daylight Time)">11:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@twixes3d:matrix.org">matlokam</span>&gt;</div></td><td class="msg-cell">Just coming from Python, Java, C#, Rust, or almost any language, you expect <code>.clear()</code></td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue Jun 13 2023 04:07:12 GMT-0700 (Pacific Daylight Time)">11:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Why would <code>.clear</code> be trusted more? Btw, you can also use <code>arr.splice(0, arr.length)</code></td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Tue Jun 13 2023 04:08:33 GMT-0700 (Pacific Daylight Time)">11:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@twixes3d:matrix.org">matlokam</span>&gt;</div></td><td class="msg-cell">It <em>seems</em> sketchy, despite being valid, which is just an odd developer experience</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Tue Jun 13 2023 04:11:06 GMT-0700 (Pacific Daylight Time)">11:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@twixes3d:matrix.org">matlokam</span>&gt;</div></td><td class="msg-cell">It felt much more like regular JS in 2014, but JS has improved so much in terms of the developer experience since ES6, that now it just feels out of place :D</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Tue Jun 13 2023 04:14:28 GMT-0700 (Pacific Daylight Time)">11:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@twixes3d:matrix.org">matlokam</span>&gt;</div></td><td class="msg-cell">For instance, of course <code>.indexOf() &gt; -1</code> was and still is completely valid â€“ nonetheless <code>.includes()</code> is <em>the</em> clear way of doing the same since it was added ES2016</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Tue Jun 13 2023 04:16:32 GMT-0700 (Pacific Daylight Time)">11:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell">Not to mention the edge-case where you have non-array-index extra properties in an array instance, which will not be cleared by <code>array.length = 0;</code></td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Tue Jun 13 2023 04:16:58 GMT-0700 (Pacific Daylight Time)">11:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">would those be cleared by a <code>.clear()</code> method though?</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Tue Jun 13 2023 04:17:11 GMT-0700 (Pacific Daylight Time)">11:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell">Imo they should</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Tue Jun 13 2023 04:17:22 GMT-0700 (Pacific Daylight Time)">11:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">I can think of arguments in either direction</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Tue Jun 13 2023 04:18:02 GMT-0700 (Pacific Daylight Time)">11:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell">Well argument in favor of it is, if you <em>don't</em> want the behavior of clearing non-indexes, you can just resort back to the original length method</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Tue Jun 13 2023 04:19:13 GMT-0700 (Pacific Daylight Time)">11:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell">Thinking about it further, we could also take this further and invert it</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Tue Jun 13 2023 04:20:13 GMT-0700 (Pacific Daylight Time)">11:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell"><code>Map.prototype.clear</code> doesn't remove properties on the map object -- is array different because the indices are actual properties in the object?</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Tue Jun 13 2023 04:20:21 GMT-0700 (Pacific Daylight Time)">11:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell">While to Array there is the distinction between indexes and properties, from an Object perspective, both are just properties, so what if instead clear() was added as an Object method?</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Tue Jun 13 2023 04:20:38 GMT-0700 (Pacific Daylight Time)">11:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell">and it would just generically work on arrays</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Tue Jun 13 2023 04:21:15 GMT-0700 (Pacific Daylight Time)">11:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <code>Map.prototype.clear</code> doesn't remove properties on the map object -- is array different because the indices are actual properties in the object?</blockquote></mx-reply>That was my thinking at first there yes</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Tue Jun 13 2023 04:26:18 GMT-0700 (Pacific Daylight Time)">11:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@twixes3d:matrix.org">matlokam</span>&gt;</div></td><td class="msg-cell">Hmm, non-index properties on arrays seems like a niche use case outside of well-defined bounds of behavior</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Tue Jun 13 2023 04:26:57 GMT-0700 (Pacific Daylight Time)">11:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@twixes3d:matrix.org">matlokam</span>&gt;</div></td><td class="msg-cell">I would stick to Map-like semantics of just emptying the collection</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Tue Jun 13 2023 04:28:02 GMT-0700 (Pacific Daylight Time)">11:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@twixes3d:matrix.org">matlokam</span>&gt;</div></td><td class="msg-cell">That's up for further discussion though I suppose</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Tue Jun 13 2023 04:28:13 GMT-0700 (Pacific Daylight Time)">11:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@twixes3d:matrix.org">matlokam</span>&gt;</div></td><td class="msg-cell">Well, do y'all know if the method makes sense as a proposal, or is there a reason why the idea is dead in the water?</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Tue Jun 13 2023 04:28:59 GMT-0700 (Pacific Daylight Time)">11:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell">My idea now is that, since arrays don't need a special method to access their internal values due to being just regular object properties, we should just make a generic <em>object</em> clear() method, which just works generically on arrays by extension</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Tue Jun 13 2023 04:30:09 GMT-0700 (Pacific Daylight Time)">11:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell">So it is less niche and actually implements a new ability (clearing objects without manual looping of deletions) that was not previously possible unlike just clearing arrays with <code>.length = 0</code></td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Tue Jun 13 2023 04:31:37 GMT-0700 (Pacific Daylight Time)">11:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@twixes3d:matrix.org">matlokam</span>&gt;</div></td><td class="msg-cell">Well, if it clears non-indexes, then why wouldn't it also delete <code>.length</code>? ðŸ˜… That's a tricky bit</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Tue Jun 13 2023 04:32:40 GMT-0700 (Pacific Daylight Time)">11:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell"><p>It can be defined like so:<br><code>Object.clear(obj)</code> = Delete all <strong>own</strong>, <strong>enumerable</strong> properties of <code>obj</code></p>
<p><code>.length</code> is non-enumerable, so it would be preserved.</p>
</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Tue Jun 13 2023 04:32:50 GMT-0700 (Pacific Daylight Time)">11:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@twixes3d:matrix.org">matlokam</span>&gt;</div></td><td class="msg-cell">I think the semantics would be clearer language-wide if <code>.clear()</code> always meant â€“ clear collection. And <code>Object</code> is not necessarily the way of implementing a <em>collection</em>, given it's the building block for everything (e.g. if you want a mapping, well, <code>Map</code> is often the best option)</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Tue Jun 13 2023 04:34:16 GMT-0700 (Pacific Daylight Time)">11:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell"><code>Map</code> is often too verbose and unnecessary for quick mapping needs</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Tue Jun 13 2023 04:35:42 GMT-0700 (Pacific Daylight Time)">11:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell">In terms of data structures Map and Object are essentially the same, so saying Objects aren't collections is a bit illogical imo</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Tue Jun 13 2023 04:36:21 GMT-0700 (Pacific Daylight Time)">11:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell">Map is just Object with fancier methods to manage it, no reason Object couldn't get some for itself </td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Tue Jun 13 2023 04:37:00 GMT-0700 (Pacific Daylight Time)">11:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell">Although I did just realize .clear() in Object prototype would indeed be prone to a lot of conflicts and confusion so it'd be probably best as a static method</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Tue Jun 13 2023 04:37:15 GMT-0700 (Pacific Daylight Time)">11:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell"><code>Object.clear(arr)</code></td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Tue Jun 13 2023 04:37:31 GMT-0700 (Pacific Daylight Time)">11:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell">you'd also have to figure out what to do for own vs inherited properties</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Tue Jun 13 2023 04:37:45 GMT-0700 (Pacific Daylight Time)">11:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@abotella:igalia.com">Andreu Botella</span>&gt;</div></td><td class="msg-cell">are you deleting non-enumerable properties as well?</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Tue Jun 13 2023 04:37:53 GMT-0700 (Pacific Daylight Time)">11:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>It can be defined like so:<br><code>Object.prototype.clear()</code> = Delete all <strong>own</strong>, <strong>enumerable</strong> properties of <code>this</code></p>
<p><code>.length</code> is non-enumerable, so it would be preserved.</p>
</blockquote></mx-reply>^</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Tue Jun 13 2023 04:38:19 GMT-0700 (Pacific Daylight Time)">11:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell">Just own enumerable props, anything else would break prototypes and other things</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Tue Jun 13 2023 04:39:23 GMT-0700 (Pacific Daylight Time)">11:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell">it'd be a shallow clear, which follows suit with pretty much every other iterative operation in JS with the notable recent exception of the long awaited <code>structuredClone</code></td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Tue Jun 13 2023 04:39:41 GMT-0700 (Pacific Daylight Time)">11:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell">so JS devs are already used to these kinds of operations being shallow I'd say</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Tue Jun 13 2023 07:54:20 GMT-0700 (Pacific Daylight Time)">14:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell"><code>arr.splice(0)</code></td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Tue Jun 13 2023 07:55:44 GMT-0700 (Pacific Daylight Time)">14:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">so you're adding <code>arr.clear()</code> to accomplish <code>arr.splice(0)</code>.  does that seem worthwhile?</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Tue Jun 13 2023 08:40:16 GMT-0700 (Pacific Daylight Time)">15:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@twixes3d:matrix.org">matlokam</span>&gt;</div></td><td class="msg-cell">I would say the answer is exactly the same as with adding <code>.includes()</code></td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Tue Jun 13 2023 09:27:14 GMT-0700 (Pacific Daylight Time)">16:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">point taken.  there were some additional considerations for includes that don't apply here.  in any case, I'm not against convenience methods, though I'm not convinced in this particular case that splice or length leave much to be desired</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Tue Jun 13 2023 09:27:49 GMT-0700 (Pacific Daylight Time)">16:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">it's worth noting that additional methods on <code>Array.prototype</code> will face resistance in committee</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Tue Jun 13 2023 09:27:59 GMT-0700 (Pacific Daylight Time)">16:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell">(I haven't read the full thread, lots of messages since I last checked)<br>A few delegates said in the last meeting they're reluctant to add new methods to <code>Array.prototype</code> due to web compatibility issues we always have</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Tue Jun 13 2023 09:29:00 GMT-0700 (Pacific Daylight Time)">16:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell"><code><a href="http://Array.prototype.group">Array.prototype.group</a></code> was changed in the last meeting to use static methods on Map and Object instead</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Tue Jun 13 2023 09:29:48 GMT-0700 (Pacific Daylight Time)">16:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@jridgewell:matrix.org">Justin Ridgewell</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/tc39/notes/blob/main/meetings/2023-05/may-16.md#arrayprototypegroup-rename-for-web-compatibility">https://github.com/tc39/notes/blob/main/meetings/2023-05/may-16.md#arrayprototypegroup-rename-for-web-compatibility</a></td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Tue Jun 13 2023 09:29:53 GMT-0700 (Pacific Daylight Time)">16:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">ref 1: 
<a href="https://github.com/tc39/notes/blob/d2a0097ec28f18d221118577086e20f78c33b504/meetings/2023-05/may-16.md#speakers-summary-of-key-points-4">https://github.com/tc39/notes/blob/d2a0097ec28f18d221118577086e20f78c33b504/meetings/2023-05/may-16.md#speakers-summary-of-key-points-4</a>

ref 2: 
<a href="https://github.com/tc39/notes/blob/d2a0097ec28f18d221118577086e20f78c33b504/meetings/2023-05/may-18.md#speakers-summary-of-key-points-3">https://github.com/tc39/notes/blob/d2a0097ec28f18d221118577086e20f78c33b504/meetings/2023-05/may-18.md#speakers-summary-of-key-points-3</a></td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Tue Jun 13 2023 09:37:20 GMT-0700 (Pacific Daylight Time)">16:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">generally speaking, I think "some developers feel that the syntax for doing a thing is sketchy" is not a good enough reason to add a new stdlib method</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Tue Jun 13 2023 09:38:27 GMT-0700 (Pacific Daylight Time)">16:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><code>.length = 0</code> is not obscure or difficult to understand for readers, so I don't see much reason to add a <code>.clear</code> to arrays</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Tue Jun 13 2023 09:53:01 GMT-0700 (Pacific Daylight Time)">16:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ljharb:matrix.org">ljharb</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">matlokam</span>: i wouldn't want to add any new mutating methods to Array, personally. if you want an empty array, <code>[]</code> is right there :-)</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Tue Jun 13 2023 10:05:30 GMT-0700 (Pacific Daylight Time)">17:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell">I think assigning to <code>length</code> is at least somewhat obscure. For most collections <code>length</code> doesn't have a setter. Having parity with other collections makes sense to me.</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Tue Jun 13 2023 10:07:47 GMT-0700 (Pacific Daylight Time)">17:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">for most collections you can't use syntax to read from it either</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Tue Jun 13 2023 10:20:39 GMT-0700 (Pacific Daylight Time)">17:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">generally not prohibitive, but this won't work with <code>const</code>, so not always an option</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Tue Jun 13 2023 10:53:39 GMT-0700 (Pacific Daylight Time)">17:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:matrix.org">annevk</span>&gt;</div></td><td class="msg-cell">Right, there was a conscious decision to not carry that forward. I don't think that disqualifies adopting more modern APIs for the older collection type though.</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Tue Jun 13 2023 11:08:04 GMT-0700 (Pacific Daylight Time)">18:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I generally see APIs as being <em>worse</em> than syntax, though</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Tue Jun 13 2023 11:08:33 GMT-0700 (Pacific Daylight Time)">18:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">Like I'd prefer people not write <code><a href="http://array.at">array.at</a>(5)</code> even though that's more consistent with what you'd do with a Map</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Tue Jun 13 2023 11:08:45 GMT-0700 (Pacific Daylight Time)">18:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">similarly I'd prefer people not write <code>array.clear()</code> even though that's more consistent with what you'd do with a Map</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Tue Jun 13 2023 11:09:23 GMT-0700 (Pacific Daylight Time)">18:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I don't think it's really a matter of what's "more modern". Arrays are just a more foundational type and so have somewhat different affordances</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Tue Jun 13 2023 14:39:16 GMT-0700 (Pacific Daylight Time)">21:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">I agree that writing to <code>length</code> is somewhat obscure and so it wouldn't be bad to have a duplicate API around it. But also I don't understand why this method would be important/useful enough to be worth the high cost of adding Array methods.</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Tue Jun 13 2023 14:48:28 GMT-0700 (Pacific Daylight Time)">21:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell">Another reason I think making it a generic Object static method would be more worthwhile and easier to get going</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Tue Jun 13 2023 14:49:18 GMT-0700 (Pacific Daylight Time)">21:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell">It wouldn't go anywhere near Array but still be able to serve the task desired at hand, while also having other possible use-cases with non-arrays</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Tue Jun 13 2023 14:50:13 GMT-0700 (Pacific Daylight Time)">21:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">idk, I think it's generally not a good idea to encourage folks to treat Arrays like general objects API-wise (I think this doesn't match most JS developers' intuition)</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Tue Jun 13 2023 14:53:19 GMT-0700 (Pacific Daylight Time)">21:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">I also don't want to encourage people to clear properties from objects</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Tue Jun 13 2023 14:53:28 GMT-0700 (Pacific Daylight Time)">21:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">there are cases where that is the right thing but they are few and far between</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Tue Jun 13 2023 14:53:33 GMT-0700 (Pacific Daylight Time)">21:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> idk, I think it's generally not a good idea to encourage folks to treat Arrays like general objects API-wise (I think this doesn't match most JS developers' intuition)</blockquote></mx-reply>That's a fair point, and I kind of agree I suppose, but on the other hand there is plenty of existing stuff in the language that does that already, so i dunno it would just be 1 more to the pile</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Tue Jun 13 2023 14:57:39 GMT-0700 (Pacific Daylight Time)">21:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@voidhedron:matrix.org">voidhedron</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I also don't want to encourage people to clear properties from objects</blockquote></mx-reply>Well I suppose it could be <code>Array.clear</code> (static method) instead then, with a strict isArray check on the argument, I do would like that more as well personally, it just seems that it'd be harder to get it accepted due to being connected to <code>Array</code></td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Tue Jun 13 2023 14:59:48 GMT-0700 (Pacific Daylight Time)">21:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">Yeah and then my answer is, that is not worth having, vs just writing <code>arr.length = 0</code></td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Tue Jun 13 2023 15:00:52 GMT-0700 (Pacific Daylight Time)">22:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">Yeah I think, if we decide this kind of manipulation is important to support more intuitively, <code>Array.clear</code> is a good place to put it.</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Tue Jun 13 2023 15:35:47 GMT-0700 (Pacific Daylight Time)">22:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">is the proposed semantics of clearing actually <code>delete</code></td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Tue Jun 13 2023 15:35:49 GMT-0700 (Pacific Daylight Time)">22:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">if so please no</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Tue Jun 13 2023 16:09:42 GMT-0700 (Pacific Daylight Time)">23:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@twixes3d:matrix.org">matlokam</span>&gt;</div></td><td class="msg-cell">Really interesting points around here</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Tue Jun 13 2023 16:48:38 GMT-0700 (Pacific Daylight Time)">23:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@twixes3d:matrix.org">matlokam</span>&gt;</div></td><td class="msg-cell"><p>So to condense the point, in my view there are a <em>few</em> arguments for adding <code>Array.prototype.clear()</code> as stdlib sugar <em>for <code>.length = 0</code></em>:</p>
<ol>
<li>The base case for it is just that it would be the "one obvious way" of performing a common operation â€“ emptying an array. Obvious in terms of the developer experience as well as performance, which is not quite the case for any of the solutions JS developers have today (and usually have to learn from StackOverflow):
<ul>
<li><code>= []</code> for one requires usage of <code>var</code>/<code>let</code>; not in-place, which can be seen at a glance, so immediately not ideal performance-wise</li>
<li><code>.length = 0</code> is just not the way this works in any mainstream other language, this trips developers up</li>
<li><code>.splice(0)</code> works quite sensibly, but the semantics of splicing are a bit different, so this again isn't the obvious way of doing this</li>
</ul>
</li>
<li>Coming from most other mainstream languages (e.g. Java, C#, C++, Python, Rust, Kotlin), you just use <code>.clear()</code> to empty an array (aka vector/list). The convention is basic to the core.</li>
<li>In terms of the cost of adding Array methods, JS has come a long way since ES2015 and the new annual release process. There's really good precedent:
<ul>
<li><code>Array.prototype.find()</code> in ES2015 (just sugar over a <code>for</code> loop),</li>
<li><code>Array.prototype.includes()</code> in ES2016 (sugar over <code>.indexOf()</code>, which itself is sugar over a <code>for</code> loop)</li>
<li>or this year:&nbsp;<code>Array.prototype.toSorted()</code> (sugar over <code>.slice().sort()</code>, again all coming down to iteration).<br>All really good quality-of-life improvements, and rather comparable to <code>Array.prototype.clear()</code> both in terms of implementation complexity (low on the scale) and utility (fulfilling a specific but universal use case)</li>
</ul>
</li>
</ol>
</td></tr>

</tbody></table></div></div></div>
</body></html>