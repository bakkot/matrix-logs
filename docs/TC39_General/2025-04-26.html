<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>TC39 General on 2025-04-26</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "TC39 General";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">TC39 General<br>2025-04-26<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2025-04-25" class="nav-link"><span>prev</span></a>
<a href="2025-04-27" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search TC39 General">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Fri Apr 25 2025 21:29:24 GMT-0700 (Pacific Daylight Time)">04:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@kriskowal:aelf.land">kriskowal</span>&gt;</div></td><td class="msg-cell">Anyone know whether any VMs GC registered symbols? My impression is that none do but also that they could without observable differences.</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Sat Apr 26 2025 06:48:25 GMT-0700 (Pacific Daylight Time)">13:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@akaster:serenityos.org">akaster</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Anyone know whether any VMs GC registered symbols? My impression is that none do but also that they could without observable differences.</blockquote></mx-reply>Is your question whether any JS implementations put primitive Symbol objects on their GC heap? Because LibJS (ladybird) has always done that. <a href="https://github.com/LadybirdBrowser/ladybird/blob/master/Libraries/LibJS/Runtime/Symbol.h">https://github.com/LadybirdBrowser/ladybird/blob/master/Libraries/LibJS/Runtime/Symbol.h</a></td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Sat Apr 26 2025 07:00:37 GMT-0700 (Pacific Daylight Time)">14:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@akaster:serenityos.org">akaster</span>&gt;</div></td><td class="msg-cell">Oh, GC registered symbols meaning, "remove unreferenced symbols"? </td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Sat Apr 26 2025 07:03:20 GMT-0700 (Pacific Daylight Time)">14:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@akaster:serenityos.org">akaster</span>&gt;</div></td><td class="msg-cell">In that case we don't do anything to remove global symbols from the global symbol registry. We don't even destroy the VM at process exit. <a href="https://github.com/search?q=repo%3ALadybirdBrowser%2Fladybird%20GlobalSymbolRegistry&amp;type=code">https://github.com/search?q=repo%3ALadybirdBrowser%2Fladybird%20GlobalSymbolRegistry&amp;type=code</a></td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Sat Apr 26 2025 08:03:50 GMT-0700 (Pacific Daylight Time)">15:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@kriskowal:aelf.land">kriskowal</span>&gt;</div></td><td class="msg-cell">Yeah, I do mean the latter. It’s technically possible to drop entries from the registry since that is not an observable outcome. But that requires ephemeral book-keeping that I doubt any engine considers worth-while. That informs whether it’s a good idea to use registered symbols to reïfy distributed symbols over a network protocol. There’s a potential registry stuffing hazard and attack. So, I’ve been advising folks against using registered symbols to reflect the analogous interned symbols in scheme over OCapN. Just here to check my premises.</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Sat Apr 26 2025 08:05:21 GMT-0700 (Pacific Daylight Time)">15:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@kriskowal:aelf.land">kriskowal</span>&gt;</div></td><td class="msg-cell">(It’s also my understanding that Guile scheme does collect unreferenced interned symbols, so there’s no corresponding risk in that language.)</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Sat Apr 26 2025 08:08:34 GMT-0700 (Pacific Daylight Time)">15:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@akaster:serenityos.org">akaster</span>&gt;</div></td><td class="msg-cell">Well. Not really familiar with your use case at all. But at least in LibJS, the spec's distinction between "global" and "not global" symbols is taken to heart. Calling the Symbol constructor creates a local symbol that will be GC'd. Calling Symbol.for (<a href="https://tc39.es/ecma262/#sec-symbol.for">https://tc39.es/ecma262/#sec-symbol.for</a>) will create a global symbol attached to the VM that outlives even the realm that was executing when it was created.</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Sat Apr 26 2025 13:03:51 GMT-0700 (Pacific Daylight Time)">20:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@aclaymore:matrix.org">Ashley Claymore</span>&gt;</div></td><td class="msg-cell">I thought SpiderMonkey does collect registered symbols&nbsp;</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Sat Apr 26 2025 16:34:39 GMT-0700 (Pacific Daylight Time)">23:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@kriskowal:aelf.land">kriskowal</span>&gt;</div></td><td class="msg-cell">If V8, JSC, and XS do too, that would change my mind about using them. Think JSON but with support for symbols. Should they be registered symbols?</td></tr>

</tbody></table></div></div></div>
</body></html>