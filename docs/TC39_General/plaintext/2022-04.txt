2022-04-01
[17:57:53.0235] <shu>
ljharb: i apologize for my tone earlier

[14:58:47.0336] <ljharb>
> <@shuyuguo:matrix.org> ljharb: i apologize for my tone earlier

thanks, i apologize for getting worked up.


2022-04-02
[09:56:55.0474] <DerekNonGeneric>
> The Closure type system was originally based on the EcmaScript 4 spec.
> â€” https://github.com/google/closure-compiler/wiki/Types-in-the-Closure-Type-System#javascript-types

By chance, would anyone here happen to know where this is specified in the ES4 spec? The link provided is broken, but [here's the Wayback Machine's backup](https://web.archive.org/web/20161006100721/http://wiki.ecmascript.org/doku.php?id=spec:spec) if anyone knows where to look (it's pretty extensive).

[10:35:24.0676] <DerekNonGeneric>
3rd section of the [Core language](https://web.archive.org/web/20160802002701/http://wiki.ecmascript.org/lib/exe/fetch.php?id=spec%3Aspec&cache=cache&media=spec:core-language-d2.html) document seems like what that was referring to so maybe never mind? (much of that notation looks unfamiliar even having used Closure myself for several years)

[10:38:35.0267] <DerekNonGeneric>
 * 3rd section of the [Core language](https://web.archive.org/web/20160802002701/http://wiki.ecmascript.org/lib/exe/fetch.php?id=spec%3Aspec&cache=cache&media=spec:core-language-d2.html) document seems like what that was referring to so maybe never mind? (much of that notation looks unfamiliar even having used Closure myself for several years)

[12:17:04.0117] <DerekNonGeneric>
> Deprecated syntax: adding a dot before the `<` (e.g. `!Array.<string>`) is also accepted.

Okay, makes sense now; more modern Closure (and TS) annotations don't look like this due to the syntax for parametric type application using the dot now being deprecated (at least by Closure)


2022-04-06
[07:18:15.0402] <sideshowbarker>
for https://github.com/mdn/content/issues/14744, comments in that issue or here would be welcome

[08:12:09.0824] <Ashley Claymore>
Hey sideshowbarker I'll try and add some more info or raise a PR soon. I raised it quickly before I forgot. Context: https://es.discourse.group/t/how-does-super-work-as-an-object/1279/4

[08:13:10.0686] <Ashley Claymore>
 * Hey sideshowbarker I'll try and add some more info or raise a PR soon. I raised it quickly before I forgot. Context: https://es.discourse.group/t/how-does-super-work-as-an-object/1279/4

[10:35:03.0438] <sideshowbarker>
> <@aclaymore:matrix.org> Hey sideshowbarker I'll try and add some more info or raise a PR soon. I raised it quickly before I forgot. Context: https://es.discourse.group/t/how-does-super-work-as-an-object/1279/4

ah thanks â€” I hadnâ€™t realized it was you who raised it


2022-04-08
[20:18:01.0218] <sideshowbarker>
Iâ€™m confused about why we have an article at https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/GeneratorFunction in MDN for a `GeneratorFunction()` constructor and global object when there is no such constructor and object in th spec

[20:18:51.0868] <sideshowbarker>
but then I look in the spec at https://tc39.es/ecma262/multipage/control-abstraction-objects.html#sec-generatorfunction-constructor and I see a whole section on **The GeneratorFunction Constructor**â€¦

[20:19:33.0455] <sideshowbarker>
ah I see the spec defines it as an intrinsic

[20:23:25.0438] <bakkot>
it exists it's just not a property of the global object

[20:27:56.0944] <sideshowbarker>
bakkot: so in looking at the spec, how can I tell that itâ€™s not a property of the global object?

[20:28:31.0320] <sideshowbarker>
and does not being a property of the global object mean itâ€™s not callable at all from user JavaScript code?

[20:28:37.0814] <sideshowbarker>
not even observable?

[20:32:13.0244] <jmdyck>
You can tell it's not a property of the global object because it's not listed as such in section 19.

[20:34:27.0346] <jmdyck>
and also because 27.3.1 "The GeneratorFunction Constructor" doesn't have a bullet saying `is the initial value of the "Foo" property of the global object`

[20:36:43.0312] <jmdyck>
But you can't tell by looking at https://tc39.es/ecma262/multipage/control-abstraction-objects.html#sec-generatorfunction, which is maybe unfortunate.

[20:37:00.0540] <sideshowbarker>
yeah

[21:02:41.0819] <bakkot>
for the non-global-property ones we could reasonably add a bullet saying "Is not exposed as a property of the global object", I suppose

[21:04:27.0502] <jmdyck>
https://tc39.es/ecma262/#sec-%typedarray%-intrinsic-object says "does not have a global name or appear as a property of the global object", but it's the only one.

[14:25:07.0977] <ljharb>
we could also just â€¦ start exposing it


2022-04-09
[04:43:27.0656] <jmdyck>
Wasn't there some reason for not exposing it?


2022-04-11
[14:34:05.0995] <ptomato>
if we have a bunch of string options that come off of user-provided options bags, is it preferable to convert them to `~tilde enums~` when used internally? examples of what I'm talking about are the _disambiguation_ and _offsetOption_ parameters of this abstract operation: https://tc39.es/proposal-temporal/#sec-temporal-interpretisodatetimeoffset

[14:34:42.0200] <ptomato>
(the _offsetBehaviour_ parameter doesn't originate from a user-provided options bag, so that's why it's already got tilde values)

[14:35:24.0054] <ptomato>
ecma402 uses the string values (e.g. https://tc39.es/ecma402/#sec-initializedatetimeformat) but there isn't much precedent yet for options bags in ecma262


2022-04-12
[06:48:43.0954] <Jack Works>
so interesting!

[06:49:16.0971] <Jack Works>
https://twitter.com/jackworks_asref/status/1513876593021956103

[07:00:14.0747] <nicolo-ribaudo>
Is there any `export function then`? ðŸ˜›

[07:00:42.0785] <nicolo-ribaudo>
* Is there any `export function then`? ðŸ˜›

[07:47:10.0138] <Jack Works>
No, because the private field is on the import promise, not on the module object

[08:13:10.0150] <Ashley Claymore>
only using spec features? Or special stuff like node async-hooks?

[08:21:43.0703] <Jack Works>
> <@aclaymore:matrix.org> only using spec features? Or special stuff like node async-hooks?

Yeah you got it. It's Node only ðŸ˜‚


2022-04-13
[16:51:05.0997] <shu>
ptomato: why does Time Duration Record have [[Days]]?

[16:59:50.0825] <ptomato>
it's for when an operation that uses Time Duration Records overflows 24 hours and needs to indicate to the caller that if they care about days, they need to adjust their day total 


2022-04-14
[17:00:03.0346] <ptomato>
maybe a more descriptive name would've been [[DeltaDays]]

[17:00:54.0383] <shu>
i don't have anything against [[Days]], just didn't understand why

[17:01:53.0689] <ptomato>
I can give a more concrete example, maybe

[17:05:02.0314] <ptomato>
when you take the difference between two PlainDateTimes, you get the difference between the date parts from the calendar, then you need to take the difference between the time parts ([DifferenceTime](https://tc39.es/proposal-temporal/#sec-temporal-differencetime)). the time difference might be negative or wrap around 24h, so the [[Days]] field indicates that you need to adjust your date difference accordingly

[17:09:09.0560] <ptomato>
I hope that's not gibberish :-) it's hard to know sometimes how much detail to go into

[17:16:09.0527] <shu>
i think so? my confusion is probably because i have a naive understanding of how people do duration math

[17:16:52.0703] <shu>
like, i figured the duration between two times, even if it changes days, would still be represented only as some number of hours

[17:18:06.0736] <shu>
but it also makes sense to represent that the day changed, that seems more useful than just number of hours

[09:32:24.0457] <Richard Gibson>
for a concrete example, there is a difference between a duration of 1 day vs. 24 hours that is observable from `Temporal.ZonedDateTime.from("2022-03-13T00:00[America/New_York]").add(Temporal.Duration.from({days: 1}))` vs. `Temporal.ZonedDateTime.from("2022-03-13T00:00[America/New_York]").add(Temporal.Duration.from({hours: 24}))` because of the DST transition


2022-04-18
[13:26:25.0197] <sirisian>
Does anyone know if the iterator helper proposal has ever discussed parallel/batch features for v1? A lot of my use cases for lazy iterators involve async operations that benefit from parallel requests. Maybe I'm thinking of this wrong, but like for (const item of webpages.map(async url => return await op(url), { batch: 5 })){} where 5 are executed in parallel and are handled out of order first come. (In theory if a break is called then the other 4 pending would be cancelled by the generator's return). The big picture is handling tasks that might look like [500ms, 10ms, 10ms, 10ms, 10ms...] where a random long task blocks the whole pipeline. With more complex pipelines this snowballs into large delays.

[13:48:22.0103] <bakkot>
sirisian: not for v1, no. I would also like to see such a thing at some point but it doesn't really fit with the simpler v1 helpers; it would be its own thing

[13:48:58.0600] <sirisian>
As long as it's possible later, that's all that matters.

[13:49:50.0531] <bakkot>
I haven't thought about it really hard but I expect it should be. and at the very least nothing in this proposal is likely to make it harder.

[13:50:54.0884] <Ashley Claymore>
Ixjs has this with a `concurrent` param for `flatMap` https://github.com/ReactiveX/IxJS/blob/master/src/asynciterable/operators/flatmap.ts

