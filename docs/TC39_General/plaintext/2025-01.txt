2025-01-01
[01:03:40.0823] <Aapo Alasuutari>
Now here's a spec question: Can GetBindingValue of Module Environment Record call user code?

Inside the GetBindingValue AO when an indirect binding is accessed, the website thinks that the GetBindingValue call to get the value can call UC but the [[Get]] method of Module Namespace Exotic Objects does not think GetBindingValue can call UC.

[07:35:34.0480] <bakkot>
I don't believe so; that's probably a bug from when we were doing manual annotations

[07:37:29.0196] <bakkot>
GetBindingValue does sometimes invoke user code (because it can trigger getters) but in this case it's actually always invoking another module environment's GetBindingValue

[10:08:31.0109] <Aapo Alasuutari>
> <@bakkot:matrix.org> I don't believe so; that's probably a bug from when we were doing manual annotations

So in effect, neither should have UC on them. Can I open a PR somewhere to fix that?

[10:14:32.0775] <Aapo Alasuutari>
Unrelated question: I'm kind of wondering about OrdinarySetWithOwnDescriptor's AO step 2.e.i: We've just called GetOwnProperty on Receiver for property P, and if we get undefined from that then we assert that Receiver does not have a property P: What is this for specifically? 

