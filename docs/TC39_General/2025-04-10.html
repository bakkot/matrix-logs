<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>TC39 General on 2025-04-10</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "TC39 General";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">TC39 General<br>2025-04-10<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2025-04-09" class="nav-link"><span>prev</span></a>
<a href="2025-04-11" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search TC39 General">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Thu Apr 10 2025 04:59:46 GMT-0700 (Pacific Daylight Time)">11:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/tc39/ecma262/issues/3563">https://github.com/tc39/ecma262/issues/3563</a></td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Thu Apr 10 2025 04:59:58 GMT-0700 (Pacific Daylight Time)">11:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">found this when re-implementing RegExp in engine262</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Thu Apr 10 2025 05:36:49 GMT-0700 (Pacific Daylight Time)">12:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@seokho:matrix.org">Seokho Song</span>&gt;</div></td><td class="msg-cell"><p>I think between below the  following tests in test262 are contradictory.</p>
<ol>
<li><a href="https://github.com/tc39/test262/blob/main/test/staging/sm/class/superPropDelete.js">https://github.com/tc39/test262/blob/main/test/staging/sm/class/superPropDelete.js</a></li>
<li><a href="https://github.com/tc39/test262/blob/main/test/language/expressions/delete/super-property-uninitialized-this.js">https://github.com/tc39/test262/blob/main/test/language/expressions/delete/super-property-uninitialized-this.js</a></li>
</ol>
<p>And I guess the spec-compliant way is 2, because the ReferenceError exception will be occur by the spec - "envRec.[[ThisBindingStatus]] is uninitialized"  before accessing the property.</p>
<p>If it is, I'll open PR soon to test262. correct me if I'm wrong :)</p>
</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Thu Apr 10 2025 05:47:34 GMT-0700 (Pacific Daylight Time)">12:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jackworks:matrix.org">Jack Works</span>&gt;</div></td><td class="msg-cell">maybe it's related to <a href="https://github.com/tc39/ecma262/pull/2267">https://github.com/tc39/ecma262/pull/2267</a></td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Thu Apr 10 2025 13:18:51 GMT-0700 (Pacific Daylight Time)">20:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@misha98857:matrix.org">Mikhail Efanov</span>&gt;</div></td><td class="msg-cell"><p>Hey everyone! I had an idea to propose adding a native <code>deepEqual</code> to ECMAScript. I’ve written a small draft here: <a href="https://github.com/misha98857/proposal-object-deep-equal/blob/main/README.md">https://github.com/misha98857/proposal-object-deep-equal/blob/main/README.md</a>, but I wanted to ask how relevant this idea might be — and whether similar proposals have been made and rejected before?</p>
<p>The main goal is to move away from third-party libraries and custom solutions in favor of built-in functionality.</p>
</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Thu Apr 10 2025 13:29:46 GMT-0700 (Pacific Daylight Time)">20:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">the idea is tossed around occasionally. it is a very large problem space; there are many different notions of what it would mean to be "equal". if you want to make the case for it you should give motivating examples for why someone would want to do this (in the browser - things which are mainly useful in tests are not good candidates to add to the language).</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Thu Apr 10 2025 13:30:15 GMT-0700 (Pacific Daylight Time)">20:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">we really need a deep equality section in <a href="https://github.com/tc39/faq">https://github.com/tc39/faq</a></td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Thu Apr 10 2025 13:30:49 GMT-0700 (Pacific Daylight Time)">20:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell"><p>hi, welcome! and thanks for taking the time.</p>
<p>about the idea, I've heard people say that there are many possible semantics for deepEqual which are all valid depending on what your use case is. some are mutually exclusive. not sure how widespread this view is in committee. anyway, as a starting point I'd suggest making sure you've catalogued all the different semantics that people might possibly expect from a deepEqual function and come prepared with arguments why a standardized one should choose one semantic over another.</p>
<p>also see the Composites idea which is on the agenda for the upcoming TC39. there is a <code>Composite.equal</code> function which would not exactly be deepEqual, but might cover some of the use cases</p>
</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Thu Apr 10 2025 13:37:55 GMT-0700 (Pacific Daylight Time)">20:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell"><p>as to prior art, there's been one actual proposal (<a href="https://github.com/tc39/proposal-array-equality">https://github.com/tc39/proposal-array-equality</a>) although it didn't go anywhere; you can probably find it in the notes for more.</p>
<p>there's also</p>
<ul>
<li><a href="https://es.discourse.group/t/json-equals-x-y/2019">https://es.discourse.group/t/json-equals-x-y/2019</a></li>
<li><a href="https://es.discourse.group/t/proposal-object-equals-and-hashcode/1753">https://es.discourse.group/t/proposal-object-equals-and-hashcode/1753</a></li>
</ul>
<p>and others I'm sure</p>
</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Thu Apr 10 2025 13:39:50 GMT-0700 (Pacific Daylight Time)">20:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@misha98857:matrix.org">Mikhail Efanov</span>&gt;</div></td><td class="msg-cell">Thanks. I hadn't seen this proposal before. It seems similar — two composite objects are almost equal, like in "common" deepEqual logic</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Thu Apr 10 2025 13:41:41 GMT-0700 (Pacific Daylight Time)">20:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@michaelficarra:matrix.org">Michael Ficarra</span>&gt;</div></td><td class="msg-cell">also related is [<code data-md="`">structuredClone</code>](<a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/structuredClone">https://developer.mozilla.org/en-US/docs/Web/API/Window/structuredClone</a>) which has made a decision on some of the "deep" questions</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Thu Apr 10 2025 13:45:29 GMT-0700 (Pacific Daylight Time)">20:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@softwarechris:matrix.org">Chris de Almeida</span>&gt;</div></td><td class="msg-cell">also: <a href="https://github.com/tc39/proposal-record-tuple#equality">https://github.com/tc39/proposal-record-tuple#equality</a></td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Thu Apr 10 2025 14:30:01 GMT-0700 (Pacific Daylight Time)">21:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@littledan:matrix.org">littledan</span>&gt;</div></td><td class="msg-cell">yes but still, this is different from what you typically want in a test framework, to check whether two <em>mutable</em> arrays are (currently) equal. Such a function does not have that same stability property. So probably multiple things need to exist.</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Thu Apr 10 2025 15:06:21 GMT-0700 (Pacific Daylight Time)">22:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>as to prior art, there's been one actual proposal (<a href="https://github.com/tc39/proposal-array-equality">https://github.com/tc39/proposal-array-equality</a>) although it didn't go anywhere; you can probably find it in the notes for more.</p>
<p>there's also</p>
<ul>
<li><a href="https://es.discourse.group/t/json-equals-x-y/2019">https://es.discourse.group/t/json-equals-x-y/2019</a></li>
<li><a href="https://es.discourse.group/t/proposal-object-equals-and-hashcode/1753">https://es.discourse.group/t/proposal-object-equals-and-hashcode/1753</a></li>
</ul>
<p>and others I'm sure</p>
</blockquote></mx-reply><span class="nick-1">Hemanth H.M</span>, <span class="nick-6">ljharb</span>, and I talked about reviving proposal-array-equality a few years ago but none of us have had time.</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Thu Apr 10 2025 15:14:17 GMT-0700 (Pacific Daylight Time)">22:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">(Also, there were <a href="https://github.com/sebmarkbage/ecmascript-shallow-equal">https://github.com/sebmarkbage/ecmascript-shallow-equal</a>, <a href="https://es.discourse.group/t/native-deep-clone-algorithm/">https://es.discourse.group/t/native-deep-clone-algorithm/</a>, and the dormant <a href="https://github.com/tc39/ecma262/issues/2555">https://github.com/tc39/ecma262/issues/2555</a>.)</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Thu Apr 10 2025 15:24:16 GMT-0700 (Pacific Daylight Time)">22:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell">Also, I recall someone in the Committee saying once that we probably will never ever be able to add anything to Object.prototype ever again without breaking websites. Does that apply to static methods in Object?</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Thu Apr 10 2025 15:27:27 GMT-0700 (Pacific Daylight Time)">22:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">it was more about Array.prototype than Object.prototype</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Thu Apr 10 2025 15:27:30 GMT-0700 (Pacific Daylight Time)">22:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">static methods are fine</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Thu Apr 10 2025 15:27:59 GMT-0700 (Pacific Daylight Time)">22:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@bakkot:matrix.org">bakkot</span>&gt;</div></td><td class="msg-cell">this is also true of Object.prototype to be clear</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Thu Apr 10 2025 15:28:29 GMT-0700 (Pacific Daylight Time)">22:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">fair, i would also object to adding stuff to Object.prototype</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Thu Apr 10 2025 15:28:46 GMT-0700 (Pacific Daylight Time)">22:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@shuyuguo:matrix.org">shu</span>&gt;</div></td><td class="msg-cell">even if it's web compatible it's guaranteed to be a bugfarm or security thing</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Thu Apr 10 2025 15:46:47 GMT-0700 (Pacific Daylight Time)">22:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@jschoi:matrix.org">jschoi</span>&gt;</div></td><td class="msg-cell"><p>My feedback is that your proposal looks like a good start. Were I writing this proposal, I would make sure I do three more things:</p>
<ol start="0">
<li>Search thoroughly for similar official TC39 proposals, like proposal-array-equality, find the meeting notes when they were presented to the Committee in the <a href="https://github.com/tc39/notes/">meeting notes repository</a>, and determine the biggest barriers to them advancing. Other than the lack of time of the champions. If you want to try to revive any proposal you find, feel free to open an issue and start working on the next steps.</li>
<li>Search for more prior art of deep equality in JavaScript as practical—particularly popular deep-equality NPM packages. (Examples of deep equality in other languages also is good, but JavaScript has big differences from all other languages.)</li>
<li>Compare the behavior of the prior art (maybe in a table). Do they compare objects’ enumerated properties, use symbol-based protocols, or do something else?</li>
<li>Investigate how real-world codebases use the prior art—particularly popular NPM packages depending on the popular deep-equality NPM packages. I would be especially interested to find out whether those popular dependents on deep-equality packages use deep equality only in testing or for production code.</li>
</ol>
<p>For example, if you find that virtual-DOM libraries often use certain types of deep equality in hot loops, that could be a compelling-enough argument to add to the JS engines.</p>
<p>This would all be volunteer work, of course, and we know how thankless volunteer work can be. It must have been a lot of hard work for you already. Thank you for taking the time.</p>
</td></tr>

</tbody></table></div></div></div>
</body></html>