2024-11-12
[13:01:49.0584] <Jan Olaf Martin>
Spent some time gathering data on the portability on various `import.meta` patterns across tools & runtimes. TL;DR: It's effectively impossible to write fully portable code (across bundling & SSR) that makes use of any `import.meta` API. :D https://bundlers.dev/javascript/modules/import.meta/

[13:40:50.0324] <littledan>
tbh I'm kinda upset that this import.meta thing caught on at all; it seems like an abuse of the API.

[13:47:13.0077] <Jan Olaf Martin>
It does repeat some mistakes that I've seen from import resolution as well: TC39 spec'd a syntax and left the semantics as an exercise to the reader without established spec venue.

[13:48:28.0780] <Jan Olaf Martin>
I'm hoping we can find a way to get those kinds of cross-tooling concerns specified somewhere to at least have a common core of things that can be expected to work consistently.

[13:51:44.0202] <littledan>
I tried to make a repo where we could work out together what various environments' import.meta would be, but it didn't catch on (since I got it mixed up in the whole built-in modules debate)

[13:52:11.0706] <littledan>
maybe we should revive that effort

[13:52:27.0652] <littledan>
https://github.com/littledan/js-shared-interfaces

[14:03:24.0644] <Jan Olaf Martin>
That looks really neat! I think I'd also want to specify things like module resolution - would that be in scope for what you had in mind with that repo?


2024-11-13
[07:11:19.0808] <littledan>
> <@jkrems:matrix.org> That looks really neat! I think I'd also want to specify things like module resolution - would that be in scope for what you had in mind with that repo?

maybe, yeah!

[07:11:31.0137] <littledan>
going straight for the hard stuff, eh

[08:16:21.0385] <Jan Olaf Martin>
Right now I'm just collecting a long list of "things that people depend on in their code that maybe should have actually defined behavior that tools officially agree on". Given the length of that list, I'd want to make sure that there's a single place to work on them. Otherwise it would likely be meeting/communication hell.

[08:16:47.0771] <littledan>
oh yeah I'd love to see that long list!

[08:20:37.0915] <Jan Olaf Martin>
happy to share, although it's currently on my company account so I can only easily share with individuals. if you give me your email, I can give you access though. it's already marked as non-internal.

[08:21:00.0163] <Jan Olaf Martin>
igalia?

[08:22:14.0602] <Jan Olaf Martin>
(I added both your chromium and igalia addresses if either of those work.)

[08:38:36.0174] <Jan Olaf Martin>
(https://docs.google.com/document/d/1C3io9oXDjgp-bMNn806DXidCyasd6kOLVrM8sSqESNY/edit?tab=t.0 - not sure if "request access" works)

[09:47:27.0105] <littledan>
(Chromium works, Igalia is inactive)

[09:48:31.0530] <littledan>
This is a really great list

[09:48:48.0453] <littledan>
And (unfortunately?) forms a multi-year agenda of work

[10:55:05.0093] <nicolo-ribaudo>
Is it ok if I request access too? ðŸ‘€

[12:55:39.0701] <littledan>
Jan Olaf Martin: you may be able to ask for a chromium.org account for this sort of thing, btw

