2024-11-12
[13:01:49.0584] <Jan Olaf Martin>
Spent some time gathering data on the portability on various `import.meta` patterns across tools & runtimes. TL;DR: It's effectively impossible to write fully portable code (across bundling & SSR) that makes use of any `import.meta` API. :D https://bundlers.dev/javascript/modules/import.meta/

[13:40:50.0324] <littledan>
tbh I'm kinda upset that this import.meta thing caught on at all; it seems like an abuse of the API.

[13:47:13.0077] <Jan Olaf Martin>
It does repeat some mistakes that I've seen from import resolution as well: TC39 spec'd a syntax and left the semantics as an exercise to the reader without established spec venue.

[13:48:28.0780] <Jan Olaf Martin>
I'm hoping we can find a way to get those kinds of cross-tooling concerns specified somewhere to at least have a common core of things that can be expected to work consistently.

[13:51:44.0202] <littledan>
I tried to make a repo where we could work out together what various environments' import.meta would be, but it didn't catch on (since I got it mixed up in the whole built-in modules debate)

[13:52:11.0706] <littledan>
maybe we should revive that effort

[13:52:27.0652] <littledan>
https://github.com/littledan/js-shared-interfaces

[14:03:24.0644] <Jan Olaf Martin>
That looks really neat! I think I'd also want to specify things like module resolution - would that be in scope for what you had in mind with that repo?

