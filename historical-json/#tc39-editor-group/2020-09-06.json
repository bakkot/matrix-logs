[
{"content":{"body":"ljharb care to rubber-stamp https://github.com/tc39/ecmarkup/pull/246?","msgtype":"m.text"},"ts":1599351301000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"Bakkot: sure but it's 100% not necessary, since package-lock is dev-only","msgtype":"m.text"},"ts":1599366719000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"iow you can skip that and just do `npm update` in ecma262 and it'd work fine","msgtype":"m.text"},"ts":1599366720000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"ljharb grammarkdown is not a direct dependency of ecma262; I'm not sure how that would work","msgtype":"m.text"},"ts":1599373536000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"it's a transitive dep","msgtype":"m.text"},"ts":1599373544000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"`npm update` updates a package-lock including all transitive deps, to whatever the semver range allows","msgtype":"m.text"},"ts":1599373554000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"you only need to do an intermediate update when you're not using ^, or when you're crossing a major","msgtype":"m.text"},"ts":1599373577000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"but this does not appear to be the case","msgtype":"m.text"},"ts":1599373633000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"`cd ecma262; git co master; git reset --hard; npm update; git status` reports no changes, even though ecma262  has package-lock committed","msgtype":"m.text"},"ts":1599373670000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"hmm","msgtype":"m.text"},"ts":1599373708000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"that â€¦ does not match my understanding of npm update, but i see the same thing as you","msgtype":"m.text"},"ts":1599373836000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"certainly if you deleted the lockfile, ran `npm install`, you'd see the update, but that's a bit less precise than should be needed","msgtype":"m.text"},"ts":1599373855000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"that is also not true","msgtype":"m.text"},"ts":1599373869000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"run the experiment","msgtype":"m.text"},"ts":1599373871000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"(it does update if you also rm -rf node_modules)","msgtype":"m.text"},"ts":1599373887000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"hm","msgtype":"m.text"},"ts":1599373891000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"very strange","msgtype":"m.text"},"ts":1599373903000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"needing to remove n_m seems like a bug","msgtype":"m.text"},"ts":1599373923000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"seems likely to be intentional","msgtype":"m.text"},"ts":1599373936000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"maybe so","msgtype":"m.text"},"ts":1599373950000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"i'd expect npm update in npm 7 to work better","msgtype":"m.text"},"ts":1599373956000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"but that won't help us now","msgtype":"m.text"},"ts":1599373958000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"in any case, the point is to have version of ecmarkup which guarantees the right thing","msgtype":"m.text"},"ts":1599373967000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"absent a lockfile, it would, since the next npm install would grab the latest :-/","msgtype":"m.text"},"ts":1599374000000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"so that if someone has a dependency on precisely grammarkdown 2.2.0, and also a dependency on ecmarkup, they can get the right behavior by updating their version of ecmarkup","msgtype":"m.text"},"ts":1599374007000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"obv there's no harm in a release","msgtype":"m.text"},"ts":1599374009000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"npm inistall would only grab the latest if they did not also depend on the precise version 2.2.0","msgtype":"m.text"},"ts":1599374026000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"since 2.2.0 satisfies ecmarkup's requirement and npm tries to dedup","msgtype":"m.text"},"ts":1599374044000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"true","msgtype":"m.text"},"ts":1599374046000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"that's pretty unlikely tho","msgtype":"m.text"},"ts":1599374061000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"(absent a lockfile)","msgtype":"m.text"},"ts":1599374067000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"for this particular set of packages, pretty unlikely, agreed","msgtype":"m.text"},"ts":1599374159000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"I just always do this since I don't want to have to figure out how likely the scenario is to arise","msgtype":"m.text"},"ts":1599374177000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"easiest to just arrange that there is a version which guarantees the right thing","msgtype":"m.text"},"ts":1599374188000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"ljharb https://github.com/tc39/ecma262/pull/2151 should be good to land","msgtype":"m.text"},"ts":1599376411000,"senderName":"Bakkot","senderId":"Bakkot@irc"}
]