[
{"content":{"body":"Bakkot: ljharb: https://github.com/tc39/ecma262/pull/2116#pullrequestreview-563115638","msgtype":"m.text"},"ts":1609977710000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"i don't think anything needs to be threaded through -- the prepending bit is declarative prose, but it's already there","msgtype":"m.text"},"ts":1609977733000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"ah, so it doesn't use `prefix` because it's part of the `_name_`?","msgtype":"m.text"},"ts":1609977860000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"works for me","msgtype":"m.text"},"ts":1609977894000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"sgtm","msgtype":"m.text"},"ts":1609978224000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"that's my understanding, yeah","msgtype":"m.text"},"ts":1609979797000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"i must've fallen asleep during the discussion of #2216","msgtype":"m.text"},"ts":1609981401000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"what was decided about toString()?","msgtype":"m.text"},"ts":1609981406000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"we decided that was a worthy compat risk?","msgtype":"m.text"},"ts":1609981439000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"actually i'll ask in #tc39","msgtype":"m.text"},"ts":1609981449000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"ljharb: rebased https://github.com/tc39/ecma262/pull/1234","msgtype":"m.text"},"ts":1609994186000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"we weren't going to bother getting formal approvals for it, sounded like","msgtype":"m.text"},"ts":1609994203000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"shu: https://github.com/tc39/ecma262/pull/2116#discussion_r553314854","msgtype":"m.text"},"ts":1610043007000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"the subtlety here is that the [[InitialName]] slot is used for F.p.toString","msgtype":"m.text"},"ts":1610043025000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"so e.g. 'Object.getOwnPropertyDescriptor(Uint8Array.prototype.__proto__, Symbol.toStringTag).get.toString()' should include 'get', if the '.name' does","msgtype":"m.text"},"ts":1610043077000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"and it does not in spidermonkey","msgtype":"m.text"},"ts":1610043090000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"that said I am inclined to say it's not worth worrying about","msgtype":"m.text"},"ts":1610043206000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"Bakkot: i am not sure i understand","msgtype":"m.text"},"ts":1610043585000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"Bakkot: that PR removes the call to the SetFunctionName AO so now it only talks about how the \"name\" property ought to be set","msgtype":"m.text"},"ts":1610043614000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"what's the connection to [[InitialName]]? (i do agree that [[InitialName]] needs the latitude for toString, as you've said)","msgtype":"m.text"},"ts":1610043663000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"the PR does not remove the call to SetFunctionName, it just moves it into CreateBuiltinFunction","msgtype":"m.text"},"ts":1610043708000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"but I guess spidermonkey's current behavior - where `.name` and `.toString()` disagree about whether \"get \" is included - is not technically allowed by the current spec text","msgtype":"m.text"},"ts":1610043793000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"so this PR doesn't change anything","msgtype":"m.text"},"ts":1610043805000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"oh i see, whereas the previous declarative prose didn't really say anything about how the call to SetFunctionName is made","msgtype":"m.text"},"ts":1610043849000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1610043857000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"maybe you can handwave some auto-deconstruction-to-name-and-prefix","msgtype":"m.text"},"ts":1610043861000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"but it did specify the name you needed to end up with","msgtype":"m.text"},"ts":1610043863000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"but now, if the full name is \"get builtin\"","msgtype":"m.text"},"ts":1610043870000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"hmmm","msgtype":"m.text"},"ts":1610043884000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"then you don't get to take advantage of the \"Optionally, set F.[[InitialName]] to name.\" step, yeah","msgtype":"m.text"},"ts":1610043898000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"okay, in that case, to cover all our bases, i'll do the the thing i said to add a [ prefix ] to CreateBuiltinFunction","msgtype":"m.text"},"ts":1610043961000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"shouldn't be too bad","msgtype":"m.text"},"ts":1610043964000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"the signature's kinda gross but eh","msgtype":"m.text"},"ts":1610044174000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"works for me","msgtype":"m.text"},"ts":1610051674000,"senderName":"Bakkot","senderId":"Bakkot@irc"}
]