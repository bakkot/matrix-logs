[
{"content":{"body":"Bakkot: thanks","msgtype":"m.text"},"ts":1608164030000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"I guess to be pedantic you have to specify how to break ties when choosing the nearest float, which you should do with roundTiesToEven","msgtype":"m.text"},"ts":1608164120000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"though I doubt it affects anything here","msgtype":"m.text"},"ts":1608164130000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"also to be clear 'float' means double","msgtype":"m.text"},"ts":1608164385000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"Bakkot: i didn't get anything back very definitive","msgtype":"m.text"},"ts":1608222592000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"the two concrete suggestions were: 1) reformulate the question for float32 and enumerate all float32 values","msgtype":"m.text"},"ts":1608222618000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"though i don't actually understand that because the input domain is strings","msgtype":"m.text"},"ts":1608222628000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"i don't see how enumerating all float32s would help","msgtype":"m.text"},"ts":1608222634000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"and if we found an answer for float32, hope that it generalizes to float64?","msgtype":"m.text"},"ts":1608222644000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"and 2) read clinger's classic paper :)","msgtype":"m.text"},"ts":1608222663000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"alas","msgtype":"m.text"},"ts":1608225948000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"I guess I will attempt to figure it out on my own","msgtype":"m.text"},"ts":1608225955000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"I convinced myself of it for integers","msgtype":"m.text"},"ts":1608225962000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"specifically, the difference between the round-down and the round-up cases is always going to be strictly less than the difference between the two floats of that magnitude, so the intermediate one (produce by not rounding) must end up as one of those two","msgtype":"m.text"},"ts":1608226037000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"I suspect that generalizes to fractions, but I need to check","msgtype":"m.text"},"ts":1608226049000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"and I also need to look at subnormals as a distinct case","msgtype":"m.text"},"ts":1608226056000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"also, shu, you were the one who suggested the \"It is considered an editorial error\" phrasing in my lookahead PR; do you have thoughts on https://github.com/tc39/ecma262/pull/2254#issuecomment-747451174?","msgtype":"m.text"},"ts":1608226084000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"reading","msgtype":"m.text"},"ts":1608227739000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"fwiw i asked Raymond Toy, who knows a lot about ieee754 apparently","msgtype":"m.text"},"ts":1608232523000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"or who has a reputation of knowing","msgtype":"m.text"},"ts":1608232530000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"he didn't really know, but did get concerned that we still haven't yet tightened up the Math special functions to have a lower bound on accuracy :)","msgtype":"m.text"},"ts":1608232552000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"shu: i believe the last consensus we have on that is \"we want to do it, but none of us are expert enough to know how to specify it\"","msgtype":"m.text"},"ts":1608232627000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"shu: so if this person's an expert in it and wants to see it happen, they can be the change :-p","msgtype":"m.text"},"ts":1608232647000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"raymond's suggestion in the past was to pin it to the accuracy provided by fdlibm","msgtype":"m.text"},"ts":1608232657000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"which i don't love but who knows, maybe the best we can do","msgtype":"m.text"},"ts":1608232670000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"Bakkot: oh, one thing Raymond said was that's particularly relevant here is","msgtype":"m.text"},"ts":1608233035000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"we know this rounding languages goes to 1st edition, which is 1997","msgtype":"m.text"},"ts":1608233044000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"Clinger's classic paper https://www.researchgate.net/publication/2295884_How_to_Read_Floating_Point_Numbers_Accurately is 1999","msgtype":"m.text"},"ts":1608233066000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"it also seems true that the implementation reality is divorced from what the spec says about rounding","msgtype":"m.text"},"ts":1608233107000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"so raymond's suggestion is, can we just change the spec to reference Clinger's algorithm instead","msgtype":"m.text"},"ts":1608233127000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"instead of spend time disambiguating some inferior solution the 1st edition folks wrote up","msgtype":"m.text"},"ts":1608233149000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"I am not all that excited about trying to make a normative change here, tbh","msgtype":"m.text"},"ts":1608233510000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"fair enough","msgtype":"m.text"},"ts":1608233536000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"none of us wants to do the empirical work of figuring out what implementations do","msgtype":"m.text"},"ts":1608233549000,"senderName":"shu","senderId":"shu@irc"}
]