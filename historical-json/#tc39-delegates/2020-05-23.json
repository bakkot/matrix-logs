[
{"content":{"body":"so if species doesn't work core-js will polyfill it with a impl that does make it work, https://github.com/zloirock/core-js/blob/master/packages/core-js/modules/es.promise.js#L256","msgtype":"m.text"},"ts":1590192497000,"senderName":"bradleymeck","senderId":"bradleymeck@irc"},
{"content":{"body":"bradleymeck: make it work purely in user land?","msgtype":"m.text"},"ts":1590198647000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"It does, but has a minor bug with promise.finally polyfills detection not caring about species","msgtype":"m.text"},"ts":1590202240000,"senderName":"bradleymeck","senderId":"bradleymeck@irc"},
{"content":{"body":"fascinating","msgtype":"m.text"},"ts":1590203394000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"so if engines turn off subclassing sites might break not because they depend on it but because the corejs polyfill will suddenly kick in for promises","msgtype":"m.text"},"ts":1590203453000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"maybe it's still okay as long as the polyfill is spec-perfect?","msgtype":"m.text"},"ts":1590203573000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"bradleymeck: what's the bug in promise.finally? the polyfill doesn't appear to touch it","msgtype":"m.text"},"ts":1590203613000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"and finally calls .then so","msgtype":"m.text"},"ts":1590203620000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"Separate file, basically just checks if it can be called with 2 arg params","msgtype":"m.text"},"ts":1590203664000,"senderName":"bradleymeck","senderId":"bradleymeck@irc"},
{"content":{"body":"If it can't (such as missing) it replaces it with a species thing","msgtype":"m.text"},"ts":1590203737000,"senderName":"bradleymeck","senderId":"bradleymeck@irc"},
{"content":{"body":"rkirsling: yeah one can hope","msgtype":"m.text"},"ts":1590203745000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"https://github.com/zloirock/core-js/blob/master/packages/core-js/modules/es.promise.finally.js#L20","msgtype":"m.text"},"ts":1590203780000,"senderName":"bradleymeck","senderId":"bradleymeck@irc"},
{"content":{"body":"what’s the use case of corejs today","msgtype":"m.text"},"ts":1590203912000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"es6 has been a few years","msgtype":"m.text"},"ts":1590203927000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"my understanding is that it gets injected by babel","msgtype":"m.text"},"ts":1590203933000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"to polyfill modern features and fix bugs","msgtype":"m.text"},"ts":1590203943000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"i’m curious about the es6 era stuff, which are arguably no longer modern","msgtype":"m.text"},"ts":1590203977000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"well i mean if you're targeting ie8","msgtype":"m.text"},"ts":1590204043000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"i think babel-preset-env will stick in stuff like import { Promise } from 'core-js'","msgtype":"m.text"},"ts":1590204071000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"does anything get dropped from it?","msgtype":"m.text"},"ts":1590204187000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"wdym \"dropped\"","msgtype":"m.text"},"ts":1590204217000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"has any feature been removed from corejs because of widespread native support?","msgtype":"m.text"},"ts":1590204241000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"or is its mandate to shim all post es5 features?","msgtype":"m.text"},"ts":1590204265000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"oh i have no idea","msgtype":"m.text"},"ts":1590204306000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"it looks like it might even polyfill the JSON global?","msgtype":"m.text"},"ts":1590204364000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"which would be what, pre es5?","msgtype":"m.text"},"ts":1590204376000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"shu: there's still a large case for es6 polyfills","msgtype":"m.text"},"ts":1590204403000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"shu: and there's still large usage of older browsers.","msgtype":"m.text"},"ts":1590204409000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"and no, neither core-js, nor any of my stuff in the es-shims family, have or ever likely will \"drop\" anything","msgtype":"m.text"},"ts":1590204434000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"altho i'm sure there's stuff that hasn't been gotten around to yet","msgtype":"m.text"},"ts":1590204450000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"ljharb: how much older are we talking?","msgtype":"m.text"},"ts":1590204704000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"all my shims work in IE 6","msgtype":"m.text"},"ts":1590204719000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"(up to the limit of the engine; obv getters/setters requires native support, etc)","msgtype":"m.text"},"ts":1590204735000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"as far as usage, IE 9 is still frequent enough to warrant shimming","msgtype":"m.text"},"ts":1590204748000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"MS had that eradication campaign years ago though","msgtype":"m.text"},"ts":1590204748000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"yeah IE9 I'll believe","msgtype":"m.text"},"ts":1590204761000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"don't south korean banks have to use ie9 or 11 or smth","msgtype":"m.text"},"ts":1590204762000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"they didn't support newer IE on old enough windows to make that useful","msgtype":"m.text"},"ts":1590204762000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"IE 6-8 is largely dead because of SSL stuff","msgtype":"m.text"},"ts":1590204769000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"SK banks are heavy users of activex is what i recall","msgtype":"m.text"},"ts":1590204806000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"still can't shake how weird it is to have such technology be gov't-mandated","msgtype":"m.text"},"ts":1590204852000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"it happens in the US too","msgtype":"m.text"},"ts":1590204866000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"ljharb: how do you run ie6 to check support?","msgtype":"m.text"},"ts":1590204872000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"we used to have to maintain FIPS compliance in node's crypto module","msgtype":"m.text"},"ts":1590204877000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"shu: either via browserstack, or via the windows VMs that microsoft has distributed for that purpose for years","msgtype":"m.text"},"ts":1590204893000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"i see","msgtype":"m.text"},"ts":1590204921000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"I mean compliance is not gonna be avoidable but it was literally \"you have to use IE\" no?","msgtype":"m.text"},"ts":1590204945000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"(unless that was just the effect of whatever the law actually said)","msgtype":"m.text"},"ts":1590204983000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"i'm def not an expert on SK law","msgtype":"m.text"},"ts":1590205021000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"but i believe they had to use certain software to be in compliance (activex things) and that only works in old ie","msgtype":"m.text"},"ts":1590205063000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"a lot of the use of IE9 is employers who mandate it, which is in some ways similar","msgtype":"m.text"},"ts":1590205074000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"ljharb: just for your own packages, you don’t plan to drop eg ie6... ever?","msgtype":"m.text"},"ts":1590205114000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"or until MS makes it impossible to even run, or other considerations?","msgtype":"m.text"},"ts":1590205154000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"shu: i don't see much value in doing so. it's already both necessary and relatively trivial to swap out packages in the ecosystem as part of your build process when your supported browsers no longer need them","msgtype":"m.text"},"ts":1590205249000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"the other thing is, the delta between \"works in IE 6\" and \"works in IE 9\", or \"works in IE 11\" is actually pretty small","msgtype":"m.text"},"ts":1590205277000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"also it's not just IE. \"old android\" is a massive offende","msgtype":"m.text"},"ts":1590205289000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"r","msgtype":"m.text"},"ts":1590205289000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"pre 4.4?","msgtype":"m.text"},"ts":1590205298000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"and Opendoor had significant traffic from Safari 6.","msgtype":"m.text"},"ts":1590205300000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"devsnek: yes","msgtype":"m.text"},"ts":1590205303000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":":(","msgtype":"m.text"},"ts":1590205305000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"airbnb could afford to drop IE 9, because its marginal income per visitor was tiny","msgtype":"m.text"},"ts":1590205319000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"but opendoor could earn 100k from any *one* visitor","msgtype":"m.text"},"ts":1590205331000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"and safari 6 was like 2-3% of all traffic","msgtype":"m.text"},"ts":1590205338000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"compelling","msgtype":"m.text"},"ts":1590205363000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"also, tons of people are on \"not latest\" chrome and firefox","msgtype":"m.text"},"ts":1590205384000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"\"autoupdate means everyone is up to date\" is a huge lie","msgtype":"m.text"},"ts":1590205390000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"that is certainly true","msgtype":"m.text"},"ts":1590205394000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"https://gc.gy/57910391.png","msgtype":"m.text"},"ts":1590205396000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"i was wondering more about being 5+ years out of date","msgtype":"m.text"},"ts":1590205404000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"devsnek: rimshot","msgtype":"m.text"},"ts":1590205409000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"my working assumption is usually 5 years","msgtype":"m.text"},"ts":1590205414000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"shu: 5 years ago, zero browsers were fully ES5 compliant.","msgtype":"m.text"},"ts":1590205418000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"shu: let alone ES6","msgtype":"m.text"},"ts":1590205423000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"shu: the last 2-4 years has been amazing for compliance tho","msgtype":"m.text"},"ts":1590205437000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"my internal doc is called “operation extinction”","msgtype":"m.text"},"ts":1590205446000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"lol","msgtype":"m.text"},"ts":1590205455000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"ever since browsers transitioned to the evergreen idea its been fantastic","msgtype":"m.text"},"ts":1590205467000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"nothing like finding a kind of genocide that makes everyone happy","msgtype":"m.text"},"ts":1590205469000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"moving to new systems like turbofan to make shipping features easier","msgtype":"m.text"},"ts":1590205480000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"devsnek: post-auto-update tho, there's still *tons* of people who don't update","msgtype":"m.text"},"ts":1590205488000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"ljharb: i’m aware of that","msgtype":"m.text"},"ts":1590205507000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"autoupdate doesn't work if their hard disk is full of viruses and photos :-p","msgtype":"m.text"},"ts":1590205510000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"who are the folks who have not updated software in 5 years","msgtype":"m.text"},"ts":1590205521000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"my grandma was using 5 year old firefox","msgtype":"m.text"},"ts":1590205531000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"turns out, lots of people that own a home and want to sell it","msgtype":"m.text"},"ts":1590205533000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"until a few days ago","msgtype":"m.text"},"ts":1590205533000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"when i told her she should update it","msgtype":"m.text"},"ts":1590205540000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"well i’m sure we have stats for this but i am too lazy to get my laptop","msgtype":"m.text"},"ts":1590205579000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"i also often talk to older folks that don't know how to update, and also think machines shouldn't be replaced more often than every 7-10 years","msgtype":"m.text"},"ts":1590205586000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"hardware replacement is synonymous with downloading new software for them?","msgtype":"m.text"},"ts":1590205609000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"lol no, but i mean that they're also on older machines","msgtype":"m.text"},"ts":1590205621000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"that don't often support newer OS's, and thus browsers","msgtype":"m.text"},"ts":1590205629000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"when things don't support far enough back, it doesn't encourage users to update, it just encourages them not to stir the pot","msgtype":"m.text"},"ts":1590205658000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"nobody wants to fix what ain't broke","msgtype":"m.text"},"ts":1590205678000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"(also, when certain website just don't work, they think it's their fault, and are embarrassed to ask for help and thus find out that it's not their fault, they just need to update)","msgtype":"m.text"},"ts":1590205704000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"so i’m not really asking for anecdotes for people who don’t update software, i know that is true","msgtype":"m.text"},"ts":1590205716000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"lol k sorry","msgtype":"m.text"},"ts":1590205720000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"i guess i am surprised that half a decade of not stirring the pot still gives people enough working parts they can do useful things, like go to airbnb.com","msgtype":"m.text"},"ts":1590205763000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"but really, i shouldn’t be","msgtype":"m.text"},"ts":1590205804000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"i wonder how far back google.com works","msgtype":"m.text"},"ts":1590205821000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"i think the main page should work for basically anything","msgtype":"m.text"},"ts":1590205838000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"mosaic or bust","msgtype":"m.text"},"ts":1590205849000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"well you do get cut off by tls","msgtype":"m.text"},"ts":1590205874000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"in another 20 years i should like to commission a study on if the web platform was one big moral hazard","msgtype":"m.text"},"ts":1590205894000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"lol","msgtype":"m.text"},"ts":1590205924000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"snort","msgtype":"m.text"},"ts":1590206068000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"shu: I think there's a lot of people on > 5 year old phones, esp. outside of America","msgtype":"m.text"},"ts":1590206321000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"ah, and once the OEM stops support and no more over the air updates, software is frozen?","msgtype":"m.text"},"ts":1590206377000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"a lot of the cheap ones never get updates in the first place","msgtype":"m.text"},"ts":1590206443000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"this is why android is moving to the modular setup where they can push security updates and stuff through the play store","msgtype":"m.text"},"ts":1590206471000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"shu yup","msgtype":"m.text"},"ts":1590206536000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"and as devsnek says \"OEM stops support\" is often very soon after the phone is released","msgtype":"m.text"},"ts":1590206556000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"even flagship droids can have spotty updates","msgtype":"m.text"},"ts":1590206598000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"economics of it makes sense","msgtype":"m.text"},"ts":1590206614000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"well its only a problem because they all feel the need to add their weird patches into the kernel","msgtype":"m.text"},"ts":1590206645000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"then lo and behold updating those patches is hard","msgtype":"m.text"},"ts":1590206656000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"i’ve heard funny stories from the art (android runtime) vm team about working around buggy OEM vms that crash on specific opcode sequences","msgtype":"m.text"},"ts":1590206705000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"so you need to generate certain magic incantation gadgets for certain phones","msgtype":"m.text"},"ts":1590206735000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"aw man","msgtype":"m.text"},"ts":1590206738000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"reminds me of https://twitter.com/XMPPwocky/status/1261130110003843073","msgtype":"m.text"},"ts":1590206853000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":":(","msgtype":"m.text"},"ts":1590206912000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"I genuinely hate machines","msgtype":"m.text"},"ts":1590207284000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"lol","msgtype":"m.text"},"ts":1590207284000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"that is an amazing thread","msgtype":"m.text"},"ts":1590207388000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"ljharb: braces had nothing to do with what that guy was saying :-","msgtype":"m.text"},"ts":1590209217000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":":-/","msgtype":"m.text"},"ts":1590209220000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"the `if` was purely incidental","msgtype":"m.text"},"ts":1590209233000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"lol maybe but i can't understand the thesis of an essay that has spelling and grammar errors, they're too distracting","msgtype":"m.text"},"ts":1590209392000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"I mean it's pretty inflammatory to suggest that dropping braces isn't a valid style choice though","msgtype":"m.text"},"ts":1590209481000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"i don't see why, that's what caused heartbleed","msgtype":"m.text"},"ts":1590209525000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"i'd say it's a pretty bold claim to say that omitting them is safe","msgtype":"m.text"},"ts":1590209539000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"there's nothing hard to read about a two-line code example that doesn't use braces on a if","msgtype":"m.text"},"ts":1590209541000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"I don't know what to say","msgtype":"m.text"},"ts":1590209556000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"it's webkit style to always drop them for a one-line body","msgtype":"m.text"},"ts":1590209581000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"i'll hide my comment tho, since they edited the result","msgtype":"m.text"},"ts":1590209582000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"rkirsling: sure. from what i recall, webkit's style isn't what i'd call consistently readable anyways :-) (that's subjective, ofc)","msgtype":"m.text"},"ts":1590209601000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"it's not uncommon to drop them for a *same*-line body tho","msgtype":"m.text"},"ts":1590209616000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"I mean it's extremely consistent so I don't know why you wouldn't call it readable","msgtype":"m.text"},"ts":1590209623000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"consistency alone does not readable make","msgtype":"m.text"},"ts":1590209629000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"consistency is the important part","msgtype":"m.text"},"ts":1590209631000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"it's a minimum, but not sufficient, requirement","msgtype":"m.text"},"ts":1590209647000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"I mean this isn't about what one would recommend a codebase do","msgtype":"m.text"},"ts":1590209673000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"it truly had nothing to do with anything here...","msgtype":"m.text"},"ts":1590209731000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"sure, agreed","msgtype":"m.text"},"ts":1590209748000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"i just couldn't tell because the if statement distracted me","msgtype":"m.text"},"ts":1590209754000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"I actually thought the density of the original example was the strength of it","msgtype":"m.text"},"ts":1590209797000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"for me, the modified version makes the point clearly, and i totally missed it in the original one ¯\\_(ツ)_/¯","msgtype":"m.text"},"ts":1590209828000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"i.e. \"it would be easy to get lost reading this without making the placeholders explicit\"","msgtype":"m.text"},"ts":1590209833000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"now I'm not sure it's making a point at all","msgtype":"m.text"},"ts":1590209853000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"tbh i still can't remember which name goes with which style, nor have i totally made up my mind as to which form i prefer","msgtype":"m.text"},"ts":1590209855000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"though (8) is its own valid point","msgtype":"m.text"},"ts":1590209874000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"and those threads are often full of people who perceive every comment as a threat to their preferred style","msgtype":"m.text"},"ts":1590209876000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"he's arguing for the latter, not the former","msgtype":"m.text"},"ts":1590209900000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"gotcha","msgtype":"m.text"},"ts":1590209919000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"which is why I said the point got lost in the cleanup","msgtype":"m.text"},"ts":1590209919000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"hm, maybe so","msgtype":"m.text"},"ts":1590209972000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"clearly i missed the point in both cases, then","msgtype":"m.text"},"ts":1590209981000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"Bakkot: you know who else loves utf16...","msgtype":"m.text"},"ts":1590210125000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"shu: is it javascript","msgtype":"m.text"},"ts":1590213344000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"I feel like if JS loved UTF-16 it would have had UTF-16 in it somewhere, instead of the unholy thing we have","msgtype":"m.text"},"ts":1590213371000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"ljharb: re: https://github.com/tc39/proposal-promise-any/issues/38","msgtype":"m.text"},"ts":1590248503000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"it looks to me like everyone has said the things they have to say and everyone except you still wants it to be an own property","msgtype":"m.text"},"ts":1590248531000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"would you be willing to let it go so that the proposal can ship?","msgtype":"m.text"},"ts":1590248544000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"cc mathiasbynens ^","msgtype":"m.text"},"ts":1590248551000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"No, I’d like it discussed in plenary. It already has consensus as it is.","msgtype":"m.text"},"ts":1590250211000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"OK, I guess we can put something on the agenda.","msgtype":"m.text"},"ts":1590251605000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"I don't know what the benefit of that discussion will be though.","msgtype":"m.text"},"ts":1590251613000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"What benefit do you see in having the discussion there?","msgtype":"m.text"},"ts":1590251635000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"Except that we can put it to a vote if discussion fails again, I guess.","msgtype":"m.text"},"ts":1590251650000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"i also believe that discussion won’t be a good use of plenary time","msgtype":"m.text"},"ts":1590254642000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"ljharb: without new insight, and i know your position on voting, it’s unclear to me too what you want that agenda item to do","msgtype":"m.text"},"ts":1590255012000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"gather opinions from those not present in the github thread","msgtype":"m.text"},"ts":1590267606000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"mark gave consensus for the current approach, and seems to have changed his mind in the thread; as have others; i'm interested to know what the broader committee thinks about own data vs prototype accessor properties in a case like this","msgtype":"m.text"},"ts":1590267665000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"there's a lot of places in es6 that changed to be prototype accessors, and i'd been under the impression that was an intentional philosophical trend","msgtype":"m.text"},"ts":1590267703000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"in particular, changes in stage 3 generally are supposed to be those that arose from implementor or user feedback, that weren't considered previously. it was reopened with what seems to me like stage 2 design considerations (ones i don't agree with). i don't recall seeing any strong argument that a change is more implementable than the current spec - if i missed one, can you point me to it?","msgtype":"m.text"},"ts":1590267920000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"do any of the accessors we currently have return mutable structures","msgtype":"m.text"},"ts":1590269526000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"nope, they all happen to return primitives atm","msgtype":"m.text"},"ts":1590269679000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"everyone seems on board with primitive properties being accessors on the prototype; the own primitive properties are that way because legacy. this is just the first time an object property on an instance has come up afaik","msgtype":"m.text"},"ts":1590269798000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"I am not really on board with primitive properties being accessors on the prototype if there is not some underlying state they reflect which is otherwise available","msgtype":"m.text"},"ts":1590270822000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"I think it makes sense to use prototype accessors iff the information they give you is reflected elsewhere","msgtype":"m.text"},"ts":1590270849000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"if the property itself is all the data there is, I do not","msgtype":"m.text"},"ts":1590270858000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"(as I said in the thread)","msgtype":"m.text"},"ts":1590270861000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"ljharb: also fwiw I am the one who asked for stage three with accessor on prototype, and I regret doing so","msgtype":"m.text"},"ts":1590270998000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"what do you mean by \"reflected elsewhere\"?","msgtype":"m.text"},"ts":1590271032000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"regex flags is an accessor, for example","msgtype":"m.text"},"ts":1590271037000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"I mean that the information they give you, or some of that information, is available by other means","msgtype":"m.text"},"ts":1590271063000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"regex flags, for example, also affect behavior","msgtype":"m.text"},"ts":1590271068000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"right","msgtype":"m.text"},"ts":1590271074000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"so there is _underlying_ state which they reveal","msgtype":"m.text"},"ts":1590271076000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"so it makes sense for them to be accessors","msgtype":"m.text"},"ts":1590271080000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"imo the list of errors is underlying state for AggregateError objects","msgtype":"m.text"},"ts":1590271093000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"it's the only thing that differentiates it from the other error types","msgtype":"m.text"},"ts":1590271105000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"it is not underlying","msgtype":"m.text"},"ts":1590271132000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"there is no other way that information is reflected","msgtype":"m.text"},"ts":1590271136000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"that _is_  the state","msgtype":"m.text"},"ts":1590271142000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"compare, for example, the .name own property of functions","msgtype":"m.text"},"ts":1590271153000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"sure. but having a name doesn't make it a function","msgtype":"m.text"},"ts":1590271177000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"... what?","msgtype":"m.text"},"ts":1590271187000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"you can delete the property and it stil","msgtype":"m.text"},"ts":1590271196000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"it's still a function","msgtype":"m.text"},"ts":1590271199000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"... ok?","msgtype":"m.text"},"ts":1590271204000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"what does that have to do with anything?","msgtype":"m.text"},"ts":1590271209000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"so \"errors\" is the essence of an aggregate error instance","msgtype":"m.text"},"ts":1590271216000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"otherwise it's just a normal error with a property on it","msgtype":"m.text"},"ts":1590271224000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"are we suddenly aristotelians?","msgtype":"m.text"},"ts":1590271232000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"no idea what that means","msgtype":"m.text"},"ts":1590271241000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"I guess it's Plato not Aristotle really","msgtype":"m.text"},"ts":1590271262000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"https://en.wikipedia.org/wiki/Theory_of_forms","msgtype":"m.text"},"ts":1590271262000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"anyway my point is that it seems very strange to me to insist that things \"have essences\" distinct from... what they are","msgtype":"m.text"},"ts":1590271319000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"an aggregate error is a thing with errors, yes","msgtype":"m.text"},"ts":1590271330000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"that is why it has an errors property","msgtype":"m.text"},"ts":1590271335000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"right","msgtype":"m.text"},"ts":1590271339000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"but that doesn't mean it needs to be an accessor","msgtype":"m.text"},"ts":1590271351000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"but in JS, things are generally things because of slots (i'm sure there's counterexamples)","msgtype":"m.text"},"ts":1590271355000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"a function is a function because of [[Call]]. `name` is incidental","msgtype":"m.text"},"ts":1590271364000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"errors are weird in that there's no inherent difference between all the existing error types, and i don't want to add another weird error type","msgtype":"m.text"},"ts":1590271399000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"wait, you are the one who is trying to add another weird error type","msgtype":"m.text"},"ts":1590271434000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"to me this makes it a normal instance instead of a weird one","msgtype":"m.text"},"ts":1590271454000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"you just said you were opposed to AggregateError being a normal error with a list of errors attached","msgtype":"m.text"},"ts":1590271456000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"right","msgtype":"m.text"},"ts":1590271461000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"because that's weird","msgtype":"m.text"},"ts":1590271464000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"what","msgtype":"m.text"},"ts":1590271467000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"objects have properties in javascript","msgtype":"m.text"},"ts":1590271470000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"that is the normal state of affairs","msgtype":"m.text"},"ts":1590271473000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"slots are not the normal state of affairs","msgtype":"m.text"},"ts":1590271478000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"right but those properties are not their brand","msgtype":"m.text"},"ts":1590271483000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"things are what they brand check to be","msgtype":"m.text"},"ts":1590271489000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"otherwise they're just objects with properties that you're duck typing","msgtype":"m.text"},"ts":1590271505000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"I am not on board with the philosophy that brand checks are good, but leaving that aside for the sake of argument: OK, so that means you are introducing _a new brand check_, which is to say you are introducing _a new, distinct kind of object_","msgtype":"m.text"},"ts":1590271552000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"as opposed to just having the one kind of error","msgtype":"m.text"},"ts":1590271565000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"yes. Aggregate errors are a new distinct kind of object","msgtype":"m.text"},"ts":1590271599000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"not unless we choose to make them so","msgtype":"m.text"},"ts":1590271607000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"we do not need to make that choice","msgtype":"m.text"},"ts":1590271614000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"we did not make that choice for other error types","msgtype":"m.text"},"ts":1590271619000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"I don't think we should do so for this one","msgtype":"m.text"},"ts":1590271623000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"i think we should have","msgtype":"m.text"},"ts":1590271663000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"and tbh i don’t think that was an active choice, it was just legacy","msgtype":"m.text"},"ts":1590271675000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"I can call up my dad and ask I guess","msgtype":"m.text"},"ts":1590271700000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"that would be very interesting history to know","msgtype":"m.text"},"ts":1590271708000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"but I am reasonably confident that it was not just legacy","msgtype":"m.text"},"ts":1590271710000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"if there’s actually a philosophy behind it then that should inform this, and I’d love to know it","msgtype":"m.text"},"ts":1590271726000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"I'll ask next time I talk to him, I guess","msgtype":"m.text"},"ts":1590271749000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"but I don't think it's actually all that important","msgtype":"m.text"},"ts":1590271751000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"the language is what it is","msgtype":"m.text"},"ts":1590271761000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"absent one, i consider it a mistake (accidental or intentional), and i don’t want to worsen it by adding yet another error type","msgtype":"m.text"},"ts":1590271763000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"you are the one adding another error type!","msgtype":"m.text"},"ts":1590271774000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"I am so confused by your claim that you are not adding another error type!","msgtype":"m.text"},"ts":1590271783000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"\"things are what they brand check to be\" - you","msgtype":"m.text"},"ts":1590271802000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"lol, ok let me try again","msgtype":"m.text"},"ts":1590271805000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"error types, unlike other types, lack proper differentiation between themselves","msgtype":"m.text"},"ts":1590271818000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"i don’t want to add another error type that isn’t properly differentiated from the others","msgtype":"m.text"},"ts":1590271833000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"why","msgtype":"m.text"},"ts":1590271850000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"why not instead say that, consistent with the above, there is just one \"type\" of error from the brand check perspective","msgtype":"m.text"},"ts":1590271868000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"and that to add a new brand would be to split that type into two","msgtype":"m.text"},"ts":1590271881000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"for no reason","msgtype":"m.text"},"ts":1590271883000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"i see that argument","msgtype":"m.text"},"ts":1590271888000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"i mean, i don’t agree it’s for no reason. But i concede that it would result in two clouds of errors, one of improperly distinguished ones, and the other with aggregate error. And especially if we never add new error types, one might see that as a wart instead of as an improvement.","msgtype":"m.text"},"ts":1590272162000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"that is roughly my position, yes. actually mine is somewhat stronger: my position is that it is in general bad to make things brand-check distinguishable unless there is some reason to do so other than liking things to be brand-check distinguishable","msgtype":"m.text"},"ts":1590272487000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"entities should not be multiplied without necessity, and all that","msgtype":"m.text"},"ts":1590272491000,"senderName":"Bakkot","senderId":"Bakkot@irc"}
]