[
{"content":{"body":"umm I think however test262 report is running JSC needs to be updated, lol","msgtype":"m.text"},"ts":1586502914000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"https://test262.report/?date=2020-04-07","msgtype":"m.text"},"ts":1586502915000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"I assure you our overall conformance did not drop to 45% lol","msgtype":"m.text"},"ts":1586502946000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"(that V8 jumped from 89% to 96% in one day also seems quite dubious...the test count didn't even change on that day)","msgtype":"m.text"},"ts":1586503227000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"(hmm, I mean it is possible that a bunch work to perfect the implementation of classes was landed all at once, I guess? but if so, damn, I tip my hat)","msgtype":"m.text"},"ts":1586503633000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"anyway the JSC situation is almost certainly due to our ICU upgrade but I have no idea what test262 infra is doing wrong there","msgtype":"m.text"},"ts":1586503759000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"https://test262.report/browse/language/module-code/namespace/internals/set.js","msgtype":"m.text"},"ts":1586528354000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"everything is failing this test","msgtype":"m.text"},"ts":1586528359000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"probably because it expects the assignments to throw","msgtype":"m.text"},"ts":1586528452000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"oh wait its a module the assignments would throw","msgtype":"m.text"},"ts":1586528754000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"weird it passes locally","msgtype":"m.text"},"ts":1586528821000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"doesn't pass when using test262-harness https://gc.gy/54234503.png","msgtype":"m.text"},"ts":1586529515000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"hah https://github.com/tc39/test262/pull/2574/files","msgtype":"m.text"},"ts":1586529722000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"rkirsling, v8 shipped private methods/accessors last week","msgtype":"m.text"},"ts":1586533857000,"senderName":"gsathya","senderId":"gsathya@irc"},
{"content":{"body":"rkirsling: all the strict tests are failing, must have something to do with how they're being concatenated or something","msgtype":"m.text"},"ts":1586535286000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"gsathya: oho","msgtype":"m.text"},"ts":1586537570000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"really, private methods and accessors is 7% of all test262?","msgtype":"m.text"},"ts":1586541323000,"senderName":"shu","senderId":"shu@irc"},
{"content":{"body":"it's the main reason i'm in the 80s instead of the 90s in test262.report","msgtype":"m.text"},"ts":1586541467000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"my guess is that a lot of those tests are generated, so there's more of them. test generation is relatively new to test262 so the generated tests tend to correspond to new features, which means new features have more tests.","msgtype":"m.text"},"ts":1586541522000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"but that's just a guess.","msgtype":"m.text"},"ts":1586541533000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"probably true","msgtype":"m.text"},"ts":1586541535000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"it is a pervasive feature","msgtype":"m.text"},"ts":1586541548000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"and yet 7% is such an enormous figure here","msgtype":"m.text"},"ts":1586541558000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"I remain floored","msgtype":"m.text"},"ts":1586541565000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"shu wrt test262 on private methods and accessors: too much for syntax variation and too many details to cover","msgtype":"m.text"},"ts":1586557726000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"also, one thing that is distributed in many Test262 parts: destructuring assignment","msgtype":"m.text"},"ts":1586557834000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"and binding","msgtype":"m.text"},"ts":1586557845000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"you'll get a lot of that in any function form.","msgtype":"m.text"},"ts":1586557858000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"leobalter: you saw about the test262.report infra choking on JSC though?","msgtype":"m.text"},"ts":1586557903000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"not sure what ICU assumptions are being made but it must be related","msgtype":"m.text"},"ts":1586557929000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"all the strict tests are failing","msgtype":"m.text"},"ts":1586557983000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"rkirsling I have no more access to the test262.report repo","msgtype":"m.text"},"ts":1586557985000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"oh ack","msgtype":"m.text"},"ts":1586557994000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"I guess rwaldron then","msgtype":"m.text"},"ts":1586558003000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"and I can't even say what's going on with the JSC tests. There are CI reports for each one","msgtype":"m.text"},"ts":1586558012000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"yes, and I'm not sure if IRC would be the best way to reach out to Rick.","msgtype":"m.text"},"ts":1586558042000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"I'd recommend the https://github.com/bocoup/test262-report-issue-tracker","msgtype":"m.text"},"ts":1586558046000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"can do","msgtype":"m.text"},"ts":1586558052000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"it would be cool if the error messages were made public","msgtype":"m.text"},"ts":1586558060000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"rkirsling: https://github.com/tc39/test262/pull/2574#issuecomment-612248008","msgtype":"m.text"},"ts":1586558106000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"ohh wow","msgtype":"m.text"},"ts":1586558136000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"it wasn't ICU after all","msgtype":"m.text"},"ts":1586558141000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"so it's a bug in https://github.com/bterlson/test262-harness then?","msgtype":"m.text"},"ts":1586558347000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"rkirsling it might be? let me update everything here","msgtype":"m.text"},"ts":1586558550000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"wow, everything is wrong in my env, lol.","msgtype":"m.text"},"ts":1586558674000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"404 on installing JSC","msgtype":"m.text"},"ts":1586558681000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":":oh_no:","msgtype":"m.text"},"ts":1586558796000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"ok, I had a wrong version of jsvu and my PATH was messed up linking to it rather than the new version","msgtype":"m.text"},"ts":1586558859000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"404 webkit not found","msgtype":"m.text"},"ts":1586558876000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"rkirsling confirmed, it's test262-harness","msgtype":"m.text"},"ts":1586559161000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"probably eshost, but they are in the same family","msgtype":"m.text"},"ts":1586559176000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"i looked at the test262-harness code, the error message implies it's something about a string receiver being turned into an object in sloppy mode, but the code path doesn't seem related at all","msgtype":"m.text"},"ts":1586559212000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"\"Expected no error, got TypeError: Attempted to assign to readonly property\"","msgtype":"m.text"},"ts":1586559229000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"node's `path.relative` is throwing saying it needs a string, but `argv._` should only ever contain strings","msgtype":"m.text"},"ts":1586559232000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"(referring to the stack trace in the github comment linked earlier)","msgtype":"m.text"},"ts":1586559248000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"it seems like the previous option for JSC's strict mode is now for some sort of Frozen Realms?","msgtype":"m.text"},"ts":1586559255000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"what is \"jsc's strict mode\" and why would test262 be invoking it?","msgtype":"m.text"},"ts":1586559318000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"eg node's strict mode, via v8, breaks tons of things and shouldn't ever be used","msgtype":"m.text"},"ts":1586559329000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"(it's not \"use strict\", it's something wonky)","msgtype":"m.text"},"ts":1586559337000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"it's use strict but literally everywhere","msgtype":"m.text"},"ts":1586559366000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"i think there was some talk of removing it","msgtype":"m.text"},"ts":1586559371000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"the patch was just enforcing strict mode in all classes: https://bugs.webkit.org/show_bug.cgi?id=205578","msgtype":"m.text"},"ts":1586559399000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"right but that breaks things","msgtype":"m.text"},"ts":1586559406000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"sloppy code must be sloppy","msgtype":"m.text"},"ts":1586559408000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"class bodies are always strictg","msgtype":"m.text"},"ts":1586559439000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"strict","msgtype":"m.text"},"ts":1586559441000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"true","msgtype":"m.text"},"ts":1586559442000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"it is not meant to be breaking anything","msgtype":"m.text"},"ts":1586559476000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"in particular, it did not cause any test262 failures","msgtype":"m.text"},"ts":1586559495000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"ljharb on what's strict mode: most of engines have a strict mode by default from the cli as an argument","msgtype":"m.text"},"ts":1586559508000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"leobalter: sure, but why on earth would we want to use a mode that breaks javascript, which is sloppy by default?","msgtype":"m.text"},"ts":1586559547000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"like what's the value","msgtype":"m.text"},"ts":1586559558000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"if your intention is to put use strict at the top of every script you run","msgtype":"m.text"},"ts":1586559574000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"might as well save some labor and use a flag","msgtype":"m.text"},"ts":1586559580000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"sloppy by default != sloppy by req","msgtype":"m.text"},"ts":1586559582000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"lots of people tried to use it with node because they thought it'd be good to have everything be in `'use strict'` mode by default, but a) that's not actually what it does, and b) third party code relies on being in sloppy mode at time","msgtype":"m.text"},"ts":1586559598000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"*times","msgtype":"m.text"},"ts":1586559601000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"i don't like those flags","msgtype":"m.text"},"ts":1586559606000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"it'd be reasonable if it meant \"do what the strict pragma does by default\" but that's not what v8's flag does.","msgtype":"m.text"},"ts":1586559626000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"what's it do","msgtype":"m.text"},"ts":1586559636000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"so i assume that's not what the strict flag does on other runtimes too","msgtype":"m.text"},"ts":1586559637000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"it's been years, i'd have to check. it had subtly different semantics in various places","msgtype":"m.text"},"ts":1586559649000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"ljharb back in 2015 (or close) we found syntax tests that were just passing but then we found many valid and useful errors for duplicating test execution both on sloppy and strict mode","msgtype":"m.text"},"ts":1586559652000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"IIRC","msgtype":"m.text"},"ts":1586559666000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"so then the test would be run again with a strict flag, though nowadays the better way to do that is to concat the struct pragma to the test source","msgtype":"m.text"},"ts":1586559698000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"test262 tests everything in both modes unless it's explicitly said otherwise in the metadata","msgtype":"m.text"},"ts":1586559701000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"right, what devsnek said. run the test once normally and once with \"use strict\" prepended","msgtype":"m.text"},"ts":1586559718000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"devsnek if we do that, we duplicate literally all the tests","msgtype":"m.text"},"ts":1586559721000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"you can do it on the fly","msgtype":"m.text"},"ts":1586559726000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"test262-stream does it on the fly","msgtype":"m.text"},"ts":1586559735000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"wait","msgtype":"m.text"},"ts":1586559745000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"i think all implementer's test runners do it on the fly","msgtype":"m.text"},"ts":1586559747000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"or most","msgtype":"m.text"},"ts":1586559754000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"I'm confused. Test262-harness uses test262-stream, so it uses the pragma on the fly","msgtype":"m.text"},"ts":1586559770000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"(tbh there's no point in keeping generated tests committed/on disk, if the test generation is fast enough)","msgtype":"m.text"},"ts":1586559775000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"leobalter: ok then it wouldn't be using jsc's strict mode","msgtype":"m.text"},"ts":1586559783000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"yes it does","msgtype":"m.text"},"ts":1586559783000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"I worked more on other test262 runners than test262-harness (and family)","msgtype":"m.text"},"ts":1586559805000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"so I'm confused rn on what each one does","msgtype":"m.text"},"ts":1586559817000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"lol, I believe that WebKit's runner uses the cli","msgtype":"m.text"},"ts":1586559835000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"I'm trying to remember. so if test262-stream is already doing it the correct way, I wonder what JSC is actually doing","msgtype":"m.text"},"ts":1586559860000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"let me get a streamed file from test262 and run it with JSC directly","msgtype":"m.text"},"ts":1586559885000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"oh wow i just found a major slow area in my test262 runner","msgtype":"m.text"},"ts":1586560072000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"doubled me test speed with this one easy trick (CPUs hate me)","msgtype":"m.text"},"ts":1586560102000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"https://gc.gy/54265119.png","msgtype":"m.text"},"ts":1586560129000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"that's pretty neat, devsnek! are you reporting that in an issue?","msgtype":"m.text"},"ts":1586560206000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"like, I can use it","msgtype":"m.text"},"ts":1586560213000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"oh wait","msgtype":"m.text"},"ts":1586560219000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"oh that's my personal runner","msgtype":"m.text"},"ts":1586560221000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"that's your runner, right?","msgtype":"m.text"},"ts":1586560222000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"oh","msgtype":"m.text"},"ts":1586560224000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"not test262-harness","msgtype":"m.text"},"ts":1586560226000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"I'd love to do some performance work on test262-harness","msgtype":"m.text"},"ts":1586560240000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"did I just see a use case for logical assignment? :)","msgtype":"m.text"},"ts":1586560243000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"yes","msgtype":"m.text"},"ts":1586560259000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"I also wonder if I'll ever write a new runner for test262, lol","msgtype":"m.text"},"ts":1586560259000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"i was thinking of going and rewriting all the agents in eshost at some point","msgtype":"m.text"},"ts":1586560275000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"rkirsling: when i can do logical assignment in node i'll use it :P","msgtype":"m.text"},"ts":1586560306000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"hehehe","msgtype":"m.text"},"ts":1586560326000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"wao, `BigInt()` throws instead of defaulting to 0n, eh","msgtype":"m.text"},"ts":1586560354000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"(not that I'd ever do that I'm just writing tests)","msgtype":"m.text"},"ts":1586560372000,"senderName":"rkirsling","senderId":"rkirsling@irc"},
{"content":{"body":"devsnek: `realm.evaluateScript(includeCache[include] || fs.readFileSync(p, 'utf8'), { specifier: p });`","msgtype":"m.text"},"ts":1586560380000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"leobalter: that doesn't fill the cache though","msgtype":"m.text"},"ts":1586560410000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"oh I see","msgtype":"m.text"},"ts":1586560415000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"It was my next question if you actually used that cache. This seems to save a big chunk of time due to io","msgtype":"m.text"},"ts":1586560460000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"i run multiple tests inside the same process","msgtype":"m.text"},"ts":1586560499000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"so yeah only loading the file once is good","msgtype":"m.text"},"ts":1586560505000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"also gotta appreciate this https://gc.gy/54265476.png","msgtype":"m.text"},"ts":1586560514000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"well, my child skipped his nap time and now my planned time for open source today is over.","msgtype":"m.text"},"ts":1586560594000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"oh boy anonymous names were merged i can unskip so many tests","msgtype":"m.text"},"ts":1586561009000,"senderName":"devsnek","senderId":"devsnek@irc"}
]