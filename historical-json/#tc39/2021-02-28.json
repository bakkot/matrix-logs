[
{"content":{"body":"ljharb any further comments on the multipage build? gonna land it and get it upstreamed if not","msgtype":"m.text"},"ts":1614485736000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"I wonder if content-visibility: auto would improve the spec rendering","msgtype":"m.text"},"ts":1614489313000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"bakkot: i think the main thing is that the multipages should probably have a <link rel=\"canonical\"> that points to the single-page one?","msgtype":"m.text"},"ts":1614489438000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"oh yeah I forgot that one","msgtype":"m.text"},"ts":1614489455000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"devsnek see https://github.com/tc39/ecmarkup/pull/263","msgtype":"m.text"},"ts":1614489478000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"ljharb oh, wait, actually I decided not to do that","msgtype":"m.text"},"ts":1614489742000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"why not?","msgtype":"m.text"},"ts":1614489747000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"there should only be one canonical URL for any given piece of content","msgtype":"m.text"},"ts":1614489759000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"since it seems like the guidance from Google is that it is only for _duplicated_ pages, not _subsets_: https://developers.google.com/search/docs/advanced/crawling/consolidate-duplicate-urls","msgtype":"m.text"},"ts":1614489773000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"and since google (and other search engines) are the intended consumer, I figure we ought to follow their guidance","msgtype":"m.text"},"ts":1614489799000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"it says similar or duplicated","msgtype":"m.text"},"ts":1614490002000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"subsets are similar","msgtype":"m.text"},"ts":1614490004000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"is there anything that says that a subset is *not* \"similar\"?","msgtype":"m.text"},"ts":1614490015000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"it says \"Note that the pages do not need to be absolutely identical; minor changes in sorting or filtering of list pages do not make the page unique (for example, sorting by price or filtering by item color).\"","msgtype":"m.text"},"ts":1614490052000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"those seem much less major than \"having 50x more content\"","msgtype":"m.text"},"ts":1614490081000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"that's saying that the non-canonical and canonical don't have to be identical","msgtype":"m.text"},"ts":1614490092000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"iow, it's saying google will decide heuristically if two pages are \"similar\" and will pick one to be canonical, if the page fails to declare one as such","msgtype":"m.text"},"ts":1614490113000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"it will pick one even if the page does declare one","msgtype":"m.text"},"ts":1614490130000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"it has no obligation to honor it","msgtype":"m.text"},"ts":1614490139000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"sure","msgtype":"m.text"},"ts":1614490143000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"but it's a hint to it","msgtype":"m.text"},"ts":1614490146000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"so i don't see any guidance that says *not* to provide a rel","msgtype":"m.text"},"ts":1614490158000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"iow the guidance absolutely does _not_ say it's \"only\" for duplicated pages not subsets","msgtype":"m.text"},"ts":1614490175000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"it implies it is for use with a level of similarity which I do not think we meet","msgtype":"m.text"},"ts":1614490197000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"it says that \"google will do whatever it wants, and a rel=canonical can be used as a hint, and any similar pages might mean google pickes one\"","msgtype":"m.text"},"ts":1614490198000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"iow i see zero downsides to including it, and only upside to including it.","msgtype":"m.text"},"ts":1614490329000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"we can certainly wait to talk about it again on the editor call this week; but we'd agreed on the last one to include it.","msgtype":"m.text"},"ts":1614490376000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"ehhhh","msgtype":"m.text"},"ts":1614490404000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"i think it's the wrong call but I would prefer to land it than to wait","msgtype":"m.text"},"ts":1614490410000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"will make the change","msgtype":"m.text"},"ts":1614490414000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"if there's a downside to including it i'm happy to hear it","msgtype":"m.text"},"ts":1614490464000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"the downside is that the multipage builds won't show up in google search results, presumably","msgtype":"m.text"},"ts":1614490502000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"and at least when I am on my phone would prefer to at least be offered the multipage one, instead of only ever getting the one which takes thirty seconds to load","msgtype":"m.text"},"ts":1614490551000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"if neither is canonical then you’d be arbitrarily pointed to one or the other. Unless we had a server that could sniff the user agent and send you to the multioage version when you’re using the only browser that can’t handle the single page one, i don’t think the ideal ux is really achievable","msgtype":"m.text"},"ts":1614490686000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"(meaning, i see the worst outcome is that the search results are a mix of single and multi page)","msgtype":"m.text"},"ts":1614490709000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"either way, google docs you linked implies they’ll pick one anyways, so it might be moot","msgtype":"m.text"},"ts":1614490736000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"it wouldn't be arbitrary; google picks results based on the device you're on","msgtype":"m.text"},"ts":1614490774000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"that is, it ranks faster-loading pages higher when you are on mobile devices","msgtype":"m.text"},"ts":1614490792000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"that seems unfortunate; on my iOS devices i prefer the single page build, which loads quite fast.","msgtype":"m.text"},"ts":1614490814000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"I disagree with your reading of the document i linked","msgtype":"m.text"},"ts":1614490833000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"I really do not think it implies that it will pick a canonical one when the content is a subset","msgtype":"m.text"},"ts":1614490854000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"indeed, it does not appear to have done so for the html spec; it will regularly offer both the single-page and multi-page version","msgtype":"m.text"},"ts":1614490873000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"which is ideal: then you can pick","msgtype":"m.text"},"ts":1614490880000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"like I think it is worth noting that the HTML spec does not use it, in exactly this circumstance","msgtype":"m.text"},"ts":1614491128000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"if it can figure out that both links are different formats then yes, that’s ideal","msgtype":"m.text"},"ts":1614491130000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"and yeah i did look that up, and was surprised to see they don’t","msgtype":"m.text"},"ts":1614491140000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"but there’s no link rel=subset or anything so I’m not sure how a search engine would figure that out","msgtype":"m.text"},"ts":1614491177000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"(have you seen html spec search results that present both links?)","msgtype":"m.text"},"ts":1614491197000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"sure: I search `whatwg html` and the first two links are the multipage version and the single page version","msgtype":"m.text"},"ts":1614491225000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"I asked about this in #whatwg a couple days ago and Domenic said","msgtype":"m.text"},"ts":1614491374000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"> I usually apply canonical to mean \"the content is exactly the same, just don't search-engine-index this duplicate\"","msgtype":"m.text"},"ts":1614491375000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"sigh, alright then. Seems like a mistake to me tho.","msgtype":"m.text"},"ts":1614491403000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"well, it's easy enough to fix later","msgtype":"m.text"},"ts":1614491423000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"it's not like this is set in stone","msgtype":"m.text"},"ts":1614491427000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"ok, here: I will land it with the link rel=canonical included and open a PR to remove it, which we can discuss later","msgtype":"m.text"},"ts":1614491608000,"senderName":"bakkot","senderId":"bakkot@irc"},
{"content":{"body":"either way","msgtype":"m.text"},"ts":1614492178000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"https://gc.gy/82245375.png","msgtype":"m.text"},"ts":1614540377000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"could this just be `Return ! localEnv.BindThisValue(thisValue)`","msgtype":"m.text"},"ts":1614540385000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"yes, but the reasoning would still be a useful note","msgtype":"m.text"},"ts":1614542334000,"senderName":"ljharb","senderId":"ljharb@irc"}
]