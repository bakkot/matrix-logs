[
{"content":{"body":"re: `\\N{LATIN CAPITAL LETTER A}`, it came up every now and then when discussing property escapes and more recently with sequence properties. IMHO it only adds minimal value and doesn't pay for the increase in binary size it would require, and I'd not be in favor of such a proposal","msgtype":"m.text"},"ts":1565335230000,"senderName":"mathiasbynens","senderId":"mathiasbynens@irc"},
{"content":{"body":"mathiasbynens: the size could trivially be eliminated by minifiers, and it seems like a pretty big win in terms of readability","msgtype":"m.text"},"ts":1565372055000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"is the size overhead your only concern?","msgtype":"m.text"},"ts":1565372064000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"the size in the engine, or in code?","msgtype":"m.text"},"ts":1565372150000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"Yeah by \"binary size\" he means engine size","msgtype":"m.text"},"ts":1565372170000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"ohhhh, sure, ok.","msgtype":"m.text"},"ts":1565372185000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"you wouldn’t necessarily have to ship the strings tho","msgtype":"m.text"},"ts":1565372223000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"maybe I will make a babel plugin for it at some point","msgtype":"m.text"},"ts":1565372237000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"if for any given set of long names, there’s a deterministic computable small value for it, it’d work","msgtype":"m.text"},"ts":1565372252000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"like how php used to key on function names’ lengths :-p","msgtype":"m.text"},"ts":1565372262000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"*computable and unique","msgtype":"m.text"},"ts":1565372290000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"NamesList.txt is 1.5 megabytes; Chrome is currently... what, 400 megs?","msgtype":"m.text"},"ts":1565372332000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"I guess that's not trivial, but really does not seem that bad","msgtype":"m.text"},"ts":1565372340000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"\"It's just a third of a percent\" is how we got to 400mb in the first place","msgtype":"m.text"},"ts":1565372360000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"also it gzips doesn to 400k","msgtype":"m.text"},"ts":1565372386000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"*gzips down, not entirely sure how I made that typo","msgtype":"m.text"},"ts":1565372396000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"That doesn't help the binary while running ^_^","msgtype":"m.text"},"ts":1565372399000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"... sure it does, you don't need to hold the whole thing in memory at any point","msgtype":"m.text"},"ts":1565372415000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"Are you proposing a disk access every time the parser encounters a \\N{...}?","msgtype":"m.text"},"ts":1565372452000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"oh, and that's with all the commentary too, hm. I wonder how much it would actually end up being if you stripped all that. one sec...","msgtype":"m.text"},"ts":1565372490000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"why on earth would you ship the actual list of names","msgtype":"m.text"},"ts":1565372507000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"generate a perfect hash at build time","msgtype":"m.text"},"ts":1565372518000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"about a meg, uncompressed, without all the redundant stuff","msgtype":"m.text"},"ts":1565372908000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"devsnek: that would mean that random other strings would end up being valid, which is probably no good","msgtype":"m.text"},"ts":1565372930000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"hmm","msgtype":"m.text"},"ts":1565372966000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"anyway, yeah, I guess that's a lot for browsers to ship if they aren't already","msgtype":"m.text"},"ts":1565372972000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"cpython uses a tree structure of some sort","msgtype":"m.text"},"ts":1565372973000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"i think this can be compressed a lot smaller than a meg","msgtype":"m.text"},"ts":1565372988000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"Domenic: no, I was proposing that you hold the compressed thing in memory, and query it without completely decompressing it","msgtype":"m.text"},"ts":1565373022000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"Ah OK","msgtype":"m.text"},"ts":1565373030000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Still this is just not worth it, I'd give like a 5-10 KiB max budget for a feature of this importance","msgtype":"m.text"},"ts":1565373059000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Is gzip usable that way? I know there are compression schemes that allow you to work on the compressed form.","msgtype":"m.text"},"ts":1565373076000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins: kind of - it holds directory structure up front, IIRC, so you could e.g. split the table into files by first two letters of the character name and then only decompress the file which matched. but it would definitely not be the right choice for the kinds of query which would be relevant here; it was just an easy first approximation for compressed size.","msgtype":"m.text"},"ts":1565373263000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"Domenic: seems reasonable. it would make sense as a babel plugin though!","msgtype":"m.text"},"ts":1565373308000,"senderName":"Bakkot","senderId":"Bakkot@irc"},
{"content":{"body":"5-10 kib isn't enough to store the values of the mapping","msgtype":"m.text"},"ts":1565373334000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"mathiasbynens: do you know if browser's unicode data includes names","msgtype":"m.text"},"ts":1565375193000,"senderName":"devsnek","senderId":"devsnek@irc"}
]