[
{"content":{"body":"Anyone know why JSON modules allow implementers the options of simply throwing? https://github.com/tc39/proposal-json-modules/blob/74b2e89983e498b0d28ef6565658cbe4cca93e33/spec.html#L61","msgtype":"m.text"},"ts":1620423707000,"senderName":"jugglinmike","senderId":"jugglinmike@irc"},
{"content":{"body":"dandclark littledan MylesBorins perhaps? ^","msgtype":"m.text"},"ts":1620423823000,"senderName":"jugglinmike","senderId":"jugglinmike@irc"},
{"content":{"body":"jugglinmike: as opposed to which","msgtype":"m.text"},"ts":1620423960000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"ljharb: sorry, typo in my question. It should read \"the option of simply throwing\"","msgtype":"m.text"},"ts":1620424042000,"senderName":"jugglinmike","senderId":"jugglinmike@irc"},
{"content":{"body":"So, as opposed to not allowing that option","msgtype":"m.text"},"ts":1620424071000,"senderName":"jugglinmike","senderId":"jugglinmike@irc"},
{"content":{"body":"jugglinmike: the whole point of the import assertions proposal is that web browsers want to disallow json module imports when the user doesn't explicitly indicate they want json, to avoid someone getting json and then silently getting JS later","msgtype":"m.text"},"ts":1620424131000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"jugglinmike: so if i'm understanding your question correctly, that option is the mechanism by which an engine would be able to reject an import, based on the module and the requested type","msgtype":"m.text"},"ts":1620424170000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"The case of disallowing json when the user doesn't explicitly indicate they want json--that doesn't seem to describe imports that use {\"type\":\"json\"}","msgtype":"m.text"},"ts":1620424479000,"senderName":"jugglinmike","senderId":"jugglinmike@irc"},
{"content":{"body":"what i mean is, if they import with type json today and get .json, and tomorrow the server starts sending JS, browsers insist that must start erroring","msgtype":"m.text"},"ts":1620424510000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"and if you import without type json today and get .json, browsers insist that must always error, to avoid the footgun referenced just prior","msgtype":"m.text"},"ts":1620424539000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"Yeah, I've read some of the motivating discussion.","msgtype":"m.text"},"ts":1620424619000,"senderName":"jugglinmike","senderId":"jugglinmike@irc"},
{"content":{"body":"But isn't the rejection (and maybe most importantly, the refusal to execute code) covered by the semantics of ParseJSONModule?","msgtype":"m.text"},"ts":1620424687000,"senderName":"jugglinmike","senderId":"jugglinmike@irc"},
{"content":{"body":"In other words, if the server starts sending JS, won't the import naturally fail when it calls JSON.parse?","msgtype":"m.text"},"ts":1620424718000,"senderName":"jugglinmike","senderId":"jugglinmike@irc"},
{"content":{"body":"not necessarily - valid json can also be js","msgtype":"m.text"},"ts":1620425094000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"and browsers want to reject based on mime, not content","msgtype":"m.text"},"ts":1620425117000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"in the case of something with a filesystem itâ€™d likely be based on file extension, also not content","msgtype":"m.text"},"ts":1620425144000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"Ahah. I think this is the piece I was missing","msgtype":"m.text"},"ts":1620425487000,"senderName":"jugglinmike","senderId":"jugglinmike@irc"},
{"content":{"body":"I read through https://github.com/WICG/webcomponents/issues/839 but I didn't see how we got from there to the import assertions proposal","msgtype":"m.text"},"ts":1620425512000,"senderName":"jugglinmike","senderId":"jugglinmike@irc"},
{"content":{"body":"Because in that thread, I don't think the suggestion for a \"noexecute\" assertion was resolved","msgtype":"m.text"},"ts":1620425620000,"senderName":"jugglinmike","senderId":"jugglinmike@irc"},
{"content":{"body":"It sounds like the strict requirement on mimetype might be related, because from what I can see on that thread, it seems as though any assertion that prevents execution would satisfy the browsers' concerns","msgtype":"m.text"},"ts":1620425782000,"senderName":"jugglinmike","senderId":"jugglinmike@irc"},
{"content":{"body":"There was about six months between Dan's last comment and the creation of the proposal, so I probably have to keep looking for more context","msgtype":"m.text"},"ts":1620425894000,"senderName":"jugglinmike","senderId":"jugglinmike@irc"},
{"content":{"body":"Thanks for the help, ljharb!","msgtype":"m.text"},"ts":1620426054000,"senderName":"jugglinmike","senderId":"jugglinmike@irc"},
{"content":{"body":"jugglinmike: np!","msgtype":"m.text"},"ts":1620428231000,"senderName":"ljharb","senderId":"ljharb@irc"}
]