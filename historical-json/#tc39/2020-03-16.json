[
{"content":{"body":"devsnek: it seems it is currently only possible with cycles in cyclic module record where an error comes from tying to initialize the env of the cyclic submodule https://tc39.es/ecma262/#cyclic-module-record","msgtype":"m.text"},"ts":1584318403000,"senderName":"bradleymeck","senderId":"bradleymeck@irc"},
{"content":{"body":"so i dont think you can do it purely off JS","msgtype":"m.text"},"ts":1584318428000,"senderName":"bradleymeck","senderId":"bradleymeck@irc"},
{"content":{"body":"interesting...","msgtype":"m.text"},"ts":1584318497000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"bradleymeck: that's only if an impl explicitly tried to get the binding at that point though so","msgtype":"m.text"},"ts":1584318698000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"seems unlikely","msgtype":"m.text"},"ts":1584318710000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"it seems possible if 2 modules formed a export cycle","msgtype":"m.text"},"ts":1584318771000,"senderName":"bradleymeck","senderId":"bradleymeck@irc"},
{"content":{"body":"a exports a, a exports * from b; b exports b, b exports * from a","msgtype":"m.text"},"ts":1584318843000,"senderName":"bradleymeck","senderId":"bradleymeck@irc"},
{"content":{"body":"so i'd imagine an impl generating a binding for 1 of them before the 2nd one blows up","msgtype":"m.text"},"ts":1584318868000,"senderName":"bradleymeck","senderId":"bradleymeck@irc"},
{"content":{"body":"bradleymeck: but the exception is thrown at evaluation, after the environments exist","msgtype":"m.text"},"ts":1584319125000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"yea, but the environment stays null","msgtype":"m.text"},"ts":1584319149000,"senderName":"bradleymeck","senderId":"bradleymeck@irc"},
{"content":{"body":"undefined*","msgtype":"m.text"},"ts":1584319152000,"senderName":"bradleymeck","senderId":"bradleymeck@irc"},
{"content":{"body":"oh I see what you mean","msgtype":"m.text"},"ts":1584319160000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"makes sense","msgtype":"m.text"},"ts":1584319166000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"bradleymeck: devsnek should that then perhaps be an assert instead of a runtime exception, since it's something a host is expected to not do?","msgtype":"m.text"},"ts":1584368404000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"unclear, host may never have an environment record for that module idk what the host would do then","msgtype":"m.text"},"ts":1584368467000,"senderName":"bradleymeck","senderId":"bradleymeck@irc"},
{"content":{"body":"like if a module requires evaluation to form itself (wasm has a concept of eval during initialization)","msgtype":"m.text"},"ts":1584368497000,"senderName":"bradleymeck","senderId":"bradleymeck@irc"},
{"content":{"body":"i think it is fine as is","msgtype":"m.text"},"ts":1584368554000,"senderName":"bradleymeck","senderId":"bradleymeck@irc"},
{"content":{"body":"ok","msgtype":"m.text"},"ts":1584368576000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"node's primordials namespace and snapshot stuff is a trove of edge cases in APIs","msgtype":"m.text"},"ts":1584372852000,"senderName":"bradleymeck","senderId":"bradleymeck@irc"}
]