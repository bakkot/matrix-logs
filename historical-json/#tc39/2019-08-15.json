[
{"content":{"body":"leobalter: do you have a list of all the escaped tests","msgtype":"m.text"},"ts":1565835084000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"devsnek there is the PR 2295 but there are other tests here and there","msgtype":"m.text"},"ts":1565875954000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"like for await and yield","msgtype":"m.text"},"ts":1565875962000,"senderName":"leobalter","senderId":"leobalter@irc"},
{"content":{"body":"Hey! I'm working on a proposal for a few days and need help with creating the ecmarkup specs and would he happy to get some feedback about my idea. https://github.com/fernlop/Array.prototype.chunk","msgtype":"m.text"},"ts":1565885453000,"senderName":"fernlop","senderId":"fernlop@irc"},
{"content":{"body":"fernlop: this might help a bit https://timothygu.me/es-howto/","msgtype":"m.text"},"ts":1565886702000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"Thanks! At which stage should i look for a champion supporting my idea and most importantly, how? :)","msgtype":"m.text"},"ts":1565887128000,"senderName":"fernlop","senderId":"fernlop@irc"},
{"content":{"body":"fernlop: it needs a champion before it has any stage","msgtype":"m.text"},"ts":1565887166000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"Yes i know, i meant at which stage of developing the idea, not proposal stage, sorry","msgtype":"m.text"},"ts":1565887253000,"senderName":"fernlop","senderId":"fernlop@irc"},
{"content":{"body":"how do functions declared in modules get the proper ScriptOrModule slot","msgtype":"m.text"},"ts":1565904200000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"GetActiveScriptOrModule is always null in InitializeEnvironment","msgtype":"m.text"},"ts":1565904396000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"i think this might be a bug carried from how scripts work","msgtype":"m.text"},"ts":1565904476000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"they push scriptCtx onto the stack before doing GlobalDeclarationInstantiation","msgtype":"m.text"},"ts":1565904495000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"devsnek: why would `GetActiveScriptOrModule` not return the active module","msgtype":"m.text"},"ts":1565905343000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"ljharb: there is no active module","msgtype":"m.text"},"ts":1565905351000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"iow that seems like a bug in GetActiveScriptOrModule, not something FunctionInitialize would need","msgtype":"m.text"},"ts":1565905355000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"its not","msgtype":"m.text"},"ts":1565905364000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"the name of that abstract op suggests there should be","msgtype":"m.text"},"ts":1565905365000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"active means on the execution context stack","msgtype":"m.text"},"ts":1565905374000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"there is no active module during InitializeEnvironment","msgtype":"m.text"},"ts":1565905386000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"and when are these abstract ops called, from a module, during InitializeEnvironment?","msgtype":"m.text"},"ts":1565905416000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"InitializeEnvironment -> InstantiateFunctionObject -> FunctionCreate -> FunctionInitialize -> GetActiveScriptOrModule","msgtype":"m.text"},"ts":1565905462000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"but there's no module on the stack","msgtype":"m.text"},"ts":1565905480000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"so it returns null","msgtype":"m.text"},"ts":1565905482000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"devsnek: ahhh so you're saying that an exported function declaration will get its slot set to null","msgtype":"m.text"},"ts":1565905555000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"when it conceptually should be set to \"the module it's exported from\"?","msgtype":"m.text"},"ts":1565905569000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"any top level function declaration","msgtype":"m.text"},"ts":1565905569000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1565905573000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"dynamic import and import.meta rely on the ScriptOrModule slot on functions","msgtype":"m.text"},"ts":1565905594000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"otherwise they lose context","msgtype":"m.text"},"ts":1565905600000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"devsnek: ok so could this line https://github.com/tc39/ecma262/pull/1670/files#diff-3540caefa502006d8a33cb1385720803R22614 instead of passing `module` and plumbing that through everything, could it somehow *set* the active module, such that `GetActiveScriptOrModule` now returns it?","msgtype":"m.text"},"ts":1565905615000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"ie, making a change in two places instead of in like 7","msgtype":"m.text"},"ts":1565905621000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"(my relevant metaphor is, react context instead of react props)","msgtype":"m.text"},"ts":1565905631000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"that seems okay too","msgtype":"m.text"},"ts":1565905662000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"well","msgtype":"m.text"},"ts":1565905668000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"actually that seems iffy","msgtype":"m.text"},"ts":1565905670000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"how so?","msgtype":"m.text"},"ts":1565905673000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"we could set it as a slot somewhere, and clear it when initializeenvironment is done","msgtype":"m.text"},"ts":1565905693000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"cuz it breaks the current definition of active","msgtype":"m.text"},"ts":1565905737000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"how so? if `GetActiveScriptOrModule` can't ever return a module, it seems already broken","msgtype":"m.text"},"ts":1565905766000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"it can","msgtype":"m.text"},"ts":1565905792000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"it works fine during evaluation phase","msgtype":"m.text"},"ts":1565905797000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"the issue is just that uh","msgtype":"m.text"},"ts":1565905820000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"scripts have their context on the stack when they do GlobalDeclarationInstantiation","msgtype":"m.text"},"ts":1565905831000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"and modules don't","msgtype":"m.text"},"ts":1565905833000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"should they?","msgtype":"m.text"},"ts":1565905841000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"the context doesn't exist yet","msgtype":"m.text"},"ts":1565905850000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"its created during evaluation","msgtype":"m.text"},"ts":1565905858000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"it has a lexical environment tho","msgtype":"m.text"},"ts":1565905878000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"shouldn't that have a reference to the module?","msgtype":"m.text"},"ts":1565905883000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"not an execution context though","msgtype":"m.text"},"ts":1565905905000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"right, i'm convinced why gASoM can't return it","msgtype":"m.text"},"ts":1565905924000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"i'm open to other ways of solving this","msgtype":"m.text"},"ts":1565905933000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"but in the event that returns null, could we then get the module off the `scope` lexical environment?","msgtype":"m.text"},"ts":1565905941000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"i just think patching GetActiveScriptOrModule is messy","msgtype":"m.text"},"ts":1565905945000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"hmmm","msgtype":"m.text"},"ts":1565905951000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"surely the scope knows which Module it's in","msgtype":"m.text"},"ts":1565905966000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"let me see","msgtype":"m.text"},"ts":1565905978000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"we could add a ScriptOrModule slot to module environments maybe","msgtype":"m.text"},"ts":1565906006000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"assert that scope is a module environment","msgtype":"m.text"},"ts":1565906015000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"that sounds like it'd work","msgtype":"m.text"},"ts":1565906119000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"these tables should be autonumbered","msgtype":"m.text"},"ts":1565906228000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"lol the text \"table 15\" links to #table-16","msgtype":"m.text"},"ts":1565906252000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"probably should be named instead of numbers, since numbers change but names don't","msgtype":"m.text"},"ts":1565906321000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"ljharb: https://gc.gy/33611864.png","msgtype":"m.text"},"ts":1565906868000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"devsnek: looks nice and simple to me","msgtype":"m.text"},"ts":1565906986000,"senderName":"ljharb","senderId":"ljharb@irc"},
{"content":{"body":"Domenic: what was the reasoning behind having two callbacks for import.meta","msgtype":"m.text"},"ts":1565907342000,"senderName":"devsnek","senderId":"devsnek@irc"}
]