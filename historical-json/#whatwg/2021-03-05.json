[
{"content":{"body":"Is there any signal on Portals?","msgtype":"m.text"},"ts":1614904635000,"senderName":"howdoi","senderId":"howdoi@irc"},
{"content":{"body":"howdoi: they are being rebased on https://github.com/jeremyroman/alternate-loading-modes, both in spec and implementation. The implementation work is taking a long time so we are moving relatively slowly on the spec.","msgtype":"m.text"},"ts":1614905103000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: thanks! It was/is a very interesting proposal, chrome has it under flags for few year already no, hoping for the best.","msgtype":"m.text"},"ts":1614905291000,"senderName":"howdoi","senderId":"howdoi@irc"},
{"content":{"body":"Yeah, definitely still actively working on it!!","msgtype":"m.text"},"ts":1614905394000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"üôè","msgtype":"m.text"},"ts":1614905956000,"senderName":"howdoi","senderId":"howdoi@irc"},
{"content":{"body":"Hello there, been a while since I last came around that part of the relay chats,","msgtype":"m.text"},"ts":1614945706000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"I just stumbled on https://github.com/hyperium/http/blob/638928f561cef4c4ff8060152912382bdf9a2afd/src/uri/authority.rs#L124-L133 and from a cursory reading of the whatwg spec I can't find the bit that rejects percent-encoding in the authority part of an URL,","msgtype":"m.text"},"ts":1614945736000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"could someone link me to it, or maybe infirm that this is even rejected?","msgtype":"m.text"},"ts":1614945750000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: I'm not the most familiar with the URL spec, but it doesn't seem to be rejected","msgtype":"m.text"},"ts":1614947126000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"the host state doesn't deal with percents, and the host parser will accept them on opaque hosts and domains","msgtype":"m.text"},"ts":1614947165000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"Something like http://x%x/ will fail due to forbidden host code point including %","msgtype":"m.text"},"ts":1614947341000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"iirc","msgtype":"m.text"},"ts":1614947348000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Step 3 of https://url.spec.whatwg.org/#concept-opaque-host-parser seems to contradict that","msgtype":"m.text"},"ts":1614947432000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Step 7 in the host parser applies only for domains, and since it comes after step 4, only to percent characters that aren't part of an escape","msgtype":"m.text"},"ts":1614947603000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"Or that come from decoding the \"%25\" escape","msgtype":"m.text"},"ts":1614947660000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"andreubotella: And step 2 shortcircuits anyway","msgtype":"m.text"},"ts":1614948148000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Never mind I always forget that all the schemes we care about are actually special lol.","msgtype":"m.text"},"ts":1614948179000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"So just rejecting all percents in a hostname seems wrong to you, andreubotella?","msgtype":"m.text"},"ts":1614948235000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: I don't really understand the interplay between URL parsing and IDNA, so I don't know","msgtype":"m.text"},"ts":1614948338000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"new URL(\"http://g%6fogle.com/\") works in Firefox","msgtype":"m.text"},"ts":1614948480000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Right, the restriction comes after percent-decoding","msgtype":"m.text"},"ts":1614948937000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"And after IDNA","msgtype":"m.text"},"ts":1614948950000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I asked on Hyper's discord what's going with that code, thanks for the help","msgtype":"m.text"},"ts":1614949223000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: I'm trying to remember the conditions for the window being reused when an iframe is navigated from about:blank to something same-origin. Are the in the spec & correct?","msgtype":"m.text"},"ts":1614961926000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"ah, found https://github.com/whatwg/html/issues/3267","msgtype":"m.text"},"ts":1614961971000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: it‚Äôs in the spec, should be able to observe it by navigating a new iframe I think","msgtype":"m.text"},"ts":1614964722000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"We got rid of the other way around fortunately (document reused) üòÄ","msgtype":"m.text"},"ts":1614964997000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: it seems more subtle than that, and not cross browser, but I found a way that does it in all browsers (iframe with src followed by inline script)","msgtype":"m.text"},"ts":1614969809000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: yeah, initial about:blank is a bit of a minefield","msgtype":"m.text"},"ts":1614970706000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TIL: navigator.mediaDevices.getCurrentBrowsingContextMedia() would let us share the current tab, nice feature, but would be useful to have a search bar in the share window when we have too many tabs opened? [Or is it an overkill?]","msgtype":"m.text"},"ts":1614975834000,"senderName":"howdoi","senderId":"howdoi@irc"},
{"content":{"body":"Domenic: Navigating a portal to cross-origin content is not currently permitted and was blocked, so one must be on origin trial to avoid this?","msgtype":"m.text"},"ts":1614976112000,"senderName":"howdoi","senderId":"howdoi@irc"},
{"content":{"body":"howdoi: I think there is a separate chrome:flags for cross-origin portals since they are not very well audited for security","msgtype":"m.text"},"ts":1614976134000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"is trying that flag","msgtype":"m.emote"},"ts":1614976191000,"senderName":"howdoi","senderId":"howdoi@irc"},
{"content":{"body":"Domenic: nice, it works! But fails for those URLs which have CSP: \"frame-ancestors 'self' <domain>\"; this is expected right?","msgtype":"m.text"},"ts":1614976319000,"senderName":"howdoi","senderId":"howdoi@irc"},
{"content":{"body":"Yes","msgtype":"m.text"},"ts":1614976366000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Also, navigating back when we have multiple portal elements gets interesting","msgtype":"m.text"},"ts":1614976379000,"senderName":"howdoi","senderId":"howdoi@irc"}
]