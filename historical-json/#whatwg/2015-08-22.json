[
{"content":{"body":"nox: BTW, isn't it still the case that SSE2 is *way* quicker with aligned reads? Do you not want to check input is aligned first?","msgtype":"m.text"},"ts":1440202004000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: I guess I could.","msgtype":"m.text"},"ts":1440202048000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"jamesr___: Yeah, have to check.","msgtype":"m.text"},"ts":1440202057000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"gsnedders: I'm not sure the simd crate handle that though.","msgtype":"m.text"},"ts":1440202079000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"sse2 instructions generally require 16 byte alignment or they fault","msgtype":"m.text"},"ts":1440202135000,"senderName":"jamesr___","senderId":"jamesr___@irc"},
{"content":{"body":"or some do, it hink","msgtype":"m.text"},"ts":1440202161000,"senderName":"jamesr___","senderId":"jamesr___@irc"},
{"content":{"body":"Alignement matters only for load and store.","msgtype":"m.text"},"ts":1440202290000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"gsnedders: In general when handling multibyte encodings, you can't stay aligned during the whole reading anyway.","msgtype":"m.text"},"ts":1440202358000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"gsnedders: Maybe through very fancy shuffling to handle continuation bytes across chunks, but I'm not sure it's worth it.","msgtype":"m.text"},"ts":1440202388000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"hmm how did nobody else catch that ASCII to UTF8 is a memcpy...","msgtype":"m.text"},"ts":1440202500000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I was wondering about that; isn't the code actually UTF-8 to ASCII, which requires range validation?","msgtype":"m.text"},"ts":1440202574000,"senderName":"jsbell","senderId":"jsbell@irc"},
{"content":{"body":"(I glanced at the code only enough to realize I didn't care that much...)","msgtype":"m.text"},"ts":1440202643000,"senderName":"jsbell","senderId":"jsbell@irc"},
{"content":{"body":"yeah same...","msgtype":"m.text"},"ts":1440202652000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"\"ASCIIEncoder\" implies you are right","msgtype":"m.text"},"ts":1440202672000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"\"maybe ASCII\" -> utf8 is not a memcpy, if you want to map bytes with the high bit set to an error value in some way","msgtype":"m.text"},"ts":1440203692000,"senderName":"jamesr___","senderId":"jamesr___@irc"},
{"content":{"body":"TabAtkins: same line","msgtype":"m.text"},"ts":1440223682000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TabAtkins: also, I prefer <li><p>Text to be on one line if <li> only contains a single <p>","msgtype":"m.text"},"ts":1440223707000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jamesr___: yeah, seems to be about checking invalid bytes","msgtype":"m.text"},"ts":1440223776000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: UTF-8 is compatible with US-ASCII.","msgtype":"m.text"},"ts":1440230055000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Domenic: Not all bytes are US-ASCII code points.","msgtype":"m.text"},"ts":1440230071000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"So no, decoding ASCII into UTF-8 isnt memcpy.","msgtype":"m.text"},"ts":1440230098000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"What","msgtype":"m.text"},"ts":1440231001000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"If it's actually ASCII, there's no bytes with the high bit set, so it is a memcpy","msgtype":"m.text"},"ts":1440231022000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: In the context of rust-encoding, you don't know if input is actually in said encoding.","msgtype":"m.text"},"ts":1440231074000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Ms2ger: That's why the UTF-8 decoder isn't a noop either.","msgtype":"m.text"},"ts":1440231087000,"senderName":"nox","senderId":"nox@irc"}
]