[
{"content":{"body":"So I just filed this issue but I realized I can't possibly be the first person to raise this: https://github.com/whatwg/streams/issues/732","msgtype":"m.text"},"ts":1491955778000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"What is the deal with the pseudo-ECMAScript interface definitions in Streams?","msgtype":"m.text"},"ts":1491955834000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"[trigger sound of can of worms opening]","msgtype":"m.text"},"ts":1491955915000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"ah Domenic already responded there","msgtype":"m.text"},"ts":1491955991000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"yep","msgtype":"m.text"},"ts":1491956220000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"Domenic: I thought of one other question :). Why can’t ReturnTypes have extended attributes? I mean, they can, if you use a typedef, but there is no direct syntax to associate an extended attribute with an operation’s return type","msgtype":"m.text"},"ts":1491960032000,"senderName":"weinig","senderId":"weinig@irc"},
{"content":{"body":"Hmm, that might just be an oversight...","msgtype":"m.text"},"ts":1491960117000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Especially with the typedef thing","msgtype":"m.text"},"ts":1491960123000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"want me to file an issue?","msgtype":"m.text"},"ts":1491960138000,"senderName":"weinig","senderId":"weinig@irc"},
{"content":{"body":"Yeah, that'd be great :)","msgtype":"m.text"},"ts":1491960154000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"k, thanks","msgtype":"m.text"},"ts":1491960157000,"senderName":"weinig","senderId":"weinig@irc"},
{"content":{"body":"Although, this might be intentional, as bz says in https://github.com/heycam/webidl/pull/286#issuecomment-275307976 \" ReturnType definitely shouldn't have attributes. \" I don't quite understand why though, and we should if nothing else close the typedef loophole","msgtype":"m.text"},"ts":1491960225000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: Just a heads up regarding my inactivity on console - lots of exams and school work going on as the semester comes to a close - will be resuming as more time is available","msgtype":"m.text"},"ts":1491969012000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"is web.archive.org the only way to get a previous version of a spec?","msgtype":"m.text"},"ts":1491979997000,"senderName":"KiChjang","senderId":"KiChjang@irc"},
{"content":{"body":"annevk: in Fetch terms does a 50x result in a “network error”?","msgtype":"m.text"},"ts":1491980445000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"KiChjang: yes basically, though https://platform.html5.org/history/ has archived copies of some","msgtype":"m.text"},"ts":1491980478000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but just for the HTML spec","msgtype":"m.text"},"ts":1491980497000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: what is a 50x result?, is that like a 10x developer?","msgtype":"m.text"},"ts":1491980957000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: oh wait, it's a status code, no it doesn't","msgtype":"m.text"},"ts":1491980969000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yeah specifically meant a 504","msgtype":"m.text"},"ts":1491981153000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"if a server responds to a fetch with a 504 is there any way to get to the response?","msgtype":"m.text"},"ts":1491981190000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"is CORS not relevant in that case?","msgtype":"m.text"},"ts":1491981221000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: CORS is relevant if we're talking about a cross-origin request","msgtype":"m.text"},"ts":1491981240000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah cross-origin","msgtype":"m.text"},"ts":1491981260000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: in that case the 504 also needs to include the relevant CORS headers","msgtype":"m.text"},"ts":1491981278000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"OK so if the server sends CORS headers, can you get the status message from teh response?","msgtype":"m.text"},"ts":1491981299000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"doesn’t the fetch hit the .catch()?","msgtype":"m.text"},"ts":1491981344000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: yes and no","msgtype":"m.text"},"ts":1491981353000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: it might be tricky to configure the server  to send CORS headers for 5xx though","msgtype":"m.text"},"ts":1491981378000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"OK","msgtype":"m.text"},"ts":1491981382000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"well if it does send CORS headers can you get to the status code/message somehow from JavaScript?","msgtype":"m.text"},"ts":1491981437000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"context is https://stackoverflow.com/questions/43361789/fetch-api-how-to-get-response-body-in-catch/43361959#43361959","msgtype":"m.text"},"ts":1491981465000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"so feel free to answer there, or comment to correct anything","msgtype":"m.text"},"ts":1491981513000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"the OP just has the typical problem of wanting to get specific details from their JavaScript code about why exactly the fetch failed","msgtype":"m.text"},"ts":1491981577000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"(maybe this is already answered well somewhere else at stackoverflow)","msgtype":"m.text"},"ts":1491981621000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I added an answer","msgtype":"m.text"},"ts":1491981700000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"goes back to working on PRs","msgtype":"m.emote"},"ts":1491981700000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"ah cool","msgtype":"m.text"},"ts":1491981704000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"thanks","msgtype":"m.text"},"ts":1491981705000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"looking now","msgtype":"m.text"},"ts":1491981711000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"cheers","msgtype":"m.text"},"ts":1491982055000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"restored my answer, which I think is still correct","msgtype":"m.text"},"ts":1491982079000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but if not lemme know, or comment there","msgtype":"m.text"},"ts":1491982092000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: yeah, I think you were correct, I decided to leave a new reply since yours became a little confusing with the strike through and comments","msgtype":"m.text"},"ts":1491982190000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"at some point I want to mine some cors/fetch answers out from stackoverflow and use them to update the related MDN docs","msgtype":"m.text"},"ts":1491982203000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: yeah that’s better, and shorter, and clearer","msgtype":"m.text"},"ts":1491982240000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I have a hard time writing succinctly","msgtype":"m.text"},"ts":1491982257000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"anyway I 'as long as","msgtype":"m.text"},"ts":1491982284000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"oofs","msgtype":"m.text"},"ts":1491982288000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"anyway I’m happy as long as somebody ends up with an understanding that helps them","msgtype":"m.text"},"ts":1491982321000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"so many people show up on stackoverflow so very confused about CORS and often really frustrated","msgtype":"m.text"},"ts":1491982353000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"and very confused about fetch as well","msgtype":"m.text"},"ts":1491982373000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"they are often accustomed to using jQuery $.ajax or (nowadays) axios or something, and they are confused about why fetch doesn’t work the same way","msgtype":"m.text"},"ts":1491982427000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"confused that fetch is not doing some automatic magic for them","msgtype":"m.text"},"ts":1491982451000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"mkwst: maybe we should add nonce to all elements that might end up using it?","msgtype":"m.text"},"ts":1491984587000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"mkwst: all elements with src/href I guess?","msgtype":"m.text"},"ts":1491984598000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: *shrug* I'm fine with that. It would basically move back to the patch against HTML, and just make more elements implement the interface.","msgtype":"m.text"},"ts":1491984709000,"senderName":"mkwst","senderId":"mkwst@irc"},
{"content":{"body":"I'm not sure that's significantly different than putting it on `Element`, but it would reduce the perf overhead for things like `<div>` and `<span>`, which has to be good.","msgtype":"m.text"},"ts":1491984742000,"senderName":"mkwst","senderId":"mkwst@irc"},
{"content":{"body":"mkwst: well, yes, that would be the difference; I wouldn't necessarily make all those elements implement the interface though, just the attribute munging","msgtype":"m.text"},"ts":1491984821000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ah. So change their insertion steps?","msgtype":"m.text"},"ts":1491985088000,"senderName":"mkwst","senderId":"mkwst@irc"},
{"content":{"body":"And I guess cloning steps?","msgtype":"m.text"},"ts":1491985095000,"senderName":"mkwst","senderId":"mkwst@irc"},
{"content":{"body":"I mean, at that point they might as well implement the interface.","msgtype":"m.text"},"ts":1491985121000,"senderName":"mkwst","senderId":"mkwst@irc"},
{"content":{"body":"mkwst: just insertion steps, they only need the slot and cloning when you'd actually add the feature to them","msgtype":"m.text"},"ts":1491985173000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I guess. But Firefox has apparently already added it to some set of elements beyond the spec. I wonder if we should try to support those or punt on it.","msgtype":"m.text"},"ts":1491985216000,"senderName":"mkwst","senderId":"mkwst@irc"},
{"content":{"body":"Yeah, that seems a little weird and I wonder how that happened","msgtype":"m.text"},"ts":1491985248000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Clearly there's still stuff shipping without going through a vetted intent to ship","msgtype":"m.text"},"ts":1491985273000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"*shrug* I can imagine it was an oversight. I don't know much about mozilla's loading infrastructure, but it might have been easier to pass everything through rather than special-casing scripts.","msgtype":"m.text"},"ts":1491985407000,"senderName":"mkwst","senderId":"mkwst@irc"},
{"content":{"body":"But that's something of a side-concern. I'd be fine with what you're suggesting, I think.","msgtype":"m.text"},"ts":1491985469000,"senderName":"mkwst","senderId":"mkwst@irc"},
{"content":{"body":"It's a lot of copy/paste, and I'm not sure it'll make bz any happier, but I'm happy to spec it if that's what you'd like to see.","msgtype":"m.text"},"ts":1491985506000,"senderName":"mkwst","senderId":"mkwst@irc"},
{"content":{"body":"mkwst: alright, I'll make that suggestion on blink-dev and see what bz says later today?","msgtype":"m.text"},"ts":1491985692000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Thanks!","msgtype":"m.text"},"ts":1491985825000,"senderName":"mkwst","senderId":"mkwst@irc"},
{"content":{"body":"jgraham: miketaylr: do you know who at mozilla might have opinions about https://github.com/whatwg/html/issues/2464#issuecomment-290421056","msgtype":"m.text"},"ts":1491987377000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Budget API is interesting. I don't really understand at all what it is for","msgtype":"m.text"},"ts":1491987988000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"especially the cost part","msgtype":"m.text"},"ts":1491988018000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"beverloo: why does blink want to ship parts of the API which is super vague","msgtype":"m.text"},"ts":1491988143000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"beverloo: why https://wicg.github.io/budget-api/#budgetservice doesn't use SecureContext?","msgtype":"m.text"},"ts":1491988695000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"but explicitly check secure context in the algorithm","msgtype":"m.text"},"ts":1491988735000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"zcorpan: No idea, sorry","msgtype":"m.text"},"ts":1491988830000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"smaug: do you have any opinion ? https://github.com/whatwg/html/issues/2464#issuecomment-290421056","msgtype":"m.text"},"ts":1491988973000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: using toolbar for the noopener case feels like a hack","msgtype":"m.text"},"ts":1491989072000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"smaug: i guess. maybe noopener should have been specified in a new argument with a dictionary, but now it's implemented as a \"feature\"","msgtype":"m.text"},"ts":1491989207000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: why is toolbar special?","msgtype":"m.text"},"ts":1491989261000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"I would expect a new window with toolbar to be shown","msgtype":"m.text"},"ts":1491989275000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"smaug: because it's special in firefox (it opens a \"full\" browser window rather than a minimal-chrome window)","msgtype":"m.text"},"ts":1491989313000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"yes, sounds like FF's behavior is the expected one","msgtype":"m.text"},"ts":1491989346000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"zcorpan: how does one then open a new proper window with toolbar and all?","msgtype":"m.text"},"ts":1491989403000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"smaug: ok. in non-firefox browsers that is not possible","msgtype":"m.text"},"ts":1491989430000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"smaug: before the recent change in chromium you'd always get a minimal-chrome popup","msgtype":"m.text"},"ts":1491989445000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"smaug: in safari/chrome/opera/edge","msgtype":"m.text"},"ts":1491989460000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"what does Edge do?","msgtype":"m.text"},"ts":1491989518000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"smaug: and empty or missing features argument opens a tab (but then you can't use noopener if you *want* a tab)","msgtype":"m.text"},"ts":1491989522000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"er, you said edge","msgtype":"m.text"},"ts":1491989529000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"right","msgtype":"m.text"},"ts":1491989533000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"edge also doesn't support noopener here","msgtype":"m.text"},"ts":1491989542000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"afaik (maybe changed in edge15)","msgtype":"m.text"},"ts":1491989559000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"I might like more some new value","msgtype":"m.text"},"ts":1491989627000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"which actually tells to the API user what is probably happening","msgtype":"m.text"},"ts":1491989646000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"zcorpan: does just having 'toolbar' open a tab, even with any other features like size?","msgtype":"m.text"},"ts":1491989687000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"smaug: yes","msgtype":"m.text"},"ts":1491989701000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"confusing","msgtype":"m.text"},"ts":1491989716000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"smaug: thanks for the feedback. could you also clarify what you would like to see instead?","msgtype":"m.text"},"ts":1491989822000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: so for API users, shouldn't it be something like openInTab","msgtype":"m.text"},"ts":1491989856000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"new feature","msgtype":"m.text"},"ts":1491989859000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"zcorpan: what does Chrome do if you first open a new window (no toolbars) and then open a new window with 'toolbar' ?","msgtype":"m.text"},"ts":1491989894000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"smaug: note that all browsers already have ability to open in a new tab from window.open -  http://software.hixie.ch/utilities/js/live-dom-viewer/saved/5007","msgtype":"m.text"},"ts":1491989974000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"sure","msgtype":"m.text"},"ts":1491989989000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"I'm not talking about that","msgtype":"m.text"},"ts":1491990009000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"smaug: it first opens a popup and then a tab... http://software.hixie.ch/utilities/js/live-dom-viewer/saved/5008","msgtype":"m.text"},"ts":1491990118000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: you're opening from the same window","msgtype":"m.text"},"ts":1491990151000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"first open without toolbar, and then that one opens with toolbar","msgtype":"m.text"},"ts":1491990175000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"oh, i see","msgtype":"m.text"},"ts":1491990179000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"smaug: http://software.hixie.ch/utilities/js/live-dom-viewer/saved/5009 it opens a tab in the first window","msgtype":"m.text"},"ts":1491990413000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"huh","msgtype":"m.text"},"ts":1491990476000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"ok, I didn't know blink has this weird behavior","msgtype":"m.text"},"ts":1491990498000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"it's pretty new and hasn't shipped yet","msgtype":"m.text"},"ts":1491990528000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"CL https://codereview.chromium.org/2773573002","msgtype":"m.text"},"ts":1491990600000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"but why does it open a tab in an existing window","msgtype":"m.text"},"ts":1491990988000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"If anyone is waiting on for something it would be good if you could remind me, since I think I've officially lost track","msgtype":"m.text"},"ts":1492002462000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(apart from that assert_throws PR zcorpan)","msgtype":"m.text"},"ts":1492002482000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TabAtkins: curl https://api.csswg.org/bikeshed/ -F url=https://raw.githubusercontent.com/w3c/ServiceWorker/246340fce702bab2cce35b046f090606389b279a/docs/index.bs -F output=err","msgtype":"m.text"},"ts":1492010107000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"LINK ERROR: No 'attr-value' refs found for 'serviceworker'.","msgtype":"m.text"},"ts":1492010122000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"<a data-link-type=\"attr-value\" data-lt=\"serviceworker\" data-link-for=\"link/rel\">serviceworker</a>","msgtype":"m.text"},"ts":1492010124000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"hsivonen: I wonder if maybe it’s time to close https://bugzilla.validator.nu/ to new bugs","msgtype":"m.text"},"ts":1492010215000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"hsivonen: just noticing https://bugzilla.validator.nu/show_bug.cgi?id=1033 from Aaron Leventhal (will comment to ask that he re-raise it in the github tracker)","msgtype":"m.text"},"ts":1492010303000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"domfarolino: no problem, completely understandable!","msgtype":"m.text"},"ts":1492010998000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"MikeSmith: re previous versions, we also have /commit-snapshots/","msgtype":"m.text"},"ts":1492011034000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"MikeSmith: It's supposed to be data-dfn-for and data-dfn-type per https://tabatkins.github.io/bikeshed/#dfn-contract","msgtype":"m.text"},"ts":1492011225000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"That's dfn vs link","msgtype":"m.text"},"ts":1492011302000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"And none of that has to be typed out for a .bs spec","msgtype":"m.text"},"ts":1492011332000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"(I'll check the spec in a sec - are you sure the term is correctly defined already?)","msgtype":"m.text"},"ts":1492011392000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Oh I see that's the bikeshed error message containing link-","msgtype":"m.text"},"ts":1492013015000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"TabAtkins: the preprocessed source for the HTML spec has this:","msgtype":"m.text"},"ts":1492015166000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"  <dfn data-dfn-for=\"link/rel\" data-dfn-type=\"attr-value\" data-export=\"\"><code","msgtype":"m.text"},"ts":1492015168000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"  data-x=\"rel-serviceworker\">serviceworker</code></dfn>","msgtype":"m.text"},"ts":1492015169000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"the processed HTML output has this:","msgtype":"m.text"},"ts":1492015184000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"<dfn data-dfn-for=\"link/rel\" data-dfn-type=\"attr-value\" data-export=\"\"><code>serviceworker</code></dfn>","msgtype":"m.text"},"ts":1492015188000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"oh I see that output is exactly the same as the source","msgtype":"m.text"},"ts":1492015229000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"ah not exactly","msgtype":"m.text"},"ts":1492015255000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"the output drops the data-x=\"rel-serviceworker\"","msgtype":"m.text"},"ts":1492015267000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Which is weird? That's not something Bikeshed removes.","msgtype":"m.text"},"ts":1492015529000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Oh, that's HTML source.","msgtype":"m.text"},"ts":1492015542000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1492015611000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"this is in a heading element btw","msgtype":"m.text"},"ts":1492015643000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"dunno of that throws bikeshed off","msgtype":"m.text"},"ts":1492015655000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"<h5 id=\"link-type-serviceworker\">4.6.6.18 Link type \"<dfn data-dfn-for=\"link/rel\" data-dfn-type=\"attr-value\" data-export=\"\"><code>serviceworker</code></dfn>\"<a href=\"#link-type-serviceworker\" class=\"self-link\"></a></h5>","msgtype":"m.text"},"ts":1492015691000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Shouldn't. Checking.","msgtype":"m.text"},"ts":1492015775000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins: btw as far as xrefs to the HTML spec, for adding xrefs to the xref database, Bikeshed processes the HTML-output published spec? Or does it process the source file?","msgtype":"m.text"},"ts":1492015802000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Always HTML output.  The db-builder is a separate project entirely, that just spiders a bunch of specs.","msgtype":"m.text"},"ts":1492015827000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"(Which is one of the reasons naive ReSpec usage is so terrible - you just get unprocessed source.)","msgtype":"m.text"},"ts":1492015861000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"ah OK","msgtype":"m.text"},"ts":1492016097000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Ah, I see the problem. The <dfn> doesn't have an ID on it, so it obviously can't be picked up as an anchor.","msgtype":"m.text"},"ts":1492016755000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I guess we should put it all on the <h5> then","msgtype":"m.text"},"ts":1492016800000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"You can either put an ID there, or move the dfn attributes up to the heading instead (including data-lt, since the text content will no longer be your desired linktext) and remove the <dfn> element.","msgtype":"m.text"},"ts":1492016801000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Y'all should probably lint for ID-less <dfn> elements.","msgtype":"m.text"},"ts":1492016827000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I don't think so, they're auto-generated","msgtype":"m.text"},"ts":1492016880000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"It's just that it's slightly different from Bikeshed with headings, so maybe we should lint headings that contain <dfn>","msgtype":"m.text"},"ts":1492016906000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TabAtkins: OK, thanks","msgtype":"m.text"},"ts":1492016916000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: Well, it doesn't auto-generate in that case, is the issue.","msgtype":"m.text"},"ts":1492016955000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1492016961000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: I wonder will it work if I put <dfn id=rel-serviceworker>","msgtype":"m.text"},"ts":1492016978000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"in the source","msgtype":"m.text"},"ts":1492017004000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"or I guess the real fix may need some wattsi change","msgtype":"m.text"},"ts":1492017045000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but I dunno block this serviceworker xref on that","msgtype":"m.text"},"ts":1492017062000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"*don’t want to block","msgtype":"m.text"},"ts":1492017078000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"TabAtkins: it's a feature, since we want links to go to the heading","msgtype":"m.text"},"ts":1492017217000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Ah, kk. In that case, yeah, lint for \"<dfn>s in headings that people marked up for Bikeshed, accidentally thinking it would get an ID\". ^_^","msgtype":"m.text"},"ts":1492017258000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"MikeSmith: I'd prefer exporting from the heading over creating a new ID","msgtype":"m.text"},"ts":1492017264000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TabAtkins: yeah","msgtype":"m.text"},"ts":1492017287000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"exporting from the heading loses the value of being able to refer to it with just <{link/rel/serviceworker}> in bikeshed, right?","msgtype":"m.text"},"ts":1492017371000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"the problem I want to solve here is just to be able to use <{link/rel/serviceworker}>","msgtype":"m.text"},"ts":1492017391000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: no, you should still be able to do that","msgtype":"m.text"},"ts":1492017413000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: No, it's fine - headings can be definition-providers just like <dfn>.","msgtype":"m.text"},"ts":1492017413000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"ah OK","msgtype":"m.text"},"ts":1492017424000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"will raise a PR that does it that way, then","msgtype":"m.text"},"ts":1492017448000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"though I guess the next thing that we are gonna wonder about is, should I change all the other link-relation headings/dfn in the same way","msgtype":"m.text"},"ts":1492017519000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"wait though","msgtype":"m.text"},"ts":1492017542000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"nm","msgtype":"m.text"},"ts":1492017574000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"will just try it for the serviceworker heading from now","msgtype":"m.text"},"ts":1492017583000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"TabAtkins: OK so the following HTML will work as far as what Bikeshed needs?","msgtype":"m.text"},"ts":1492017893000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"<h5 data-dfn-for=link/rel id=link-type-serviceworker data-dfn-type=attr-value data-export=\"\">4.6.6.18 Link type \"<dfn><code>serviceworker</code></dfn>\"<a href=#link-type-serviceworker class=self-link></a></h5>","msgtype":"m.text"},"ts":1492017896000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"You want data-lt=serviceworker on there (unless you really want the attribute value to be \"4.6.6.18 Link Type \"serviceworker\"\").  And you can remove the `<dfn>` element entirely.","msgtype":"m.text"},"ts":1492017959000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"haha","msgtype":"m.text"},"ts":1492017969000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"ah OK yeah","msgtype":"m.text"},"ts":1492017971000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"TabAtkins: annevk Domenic https://github.com/whatwg/html/pull/2524","msgtype":"m.text"},"ts":1492018619000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"TabAtkins: what is the incantation to link to things that are for-now-not-exported? I thought there was something you could put in link-defaults?","msgtype":"m.text"},"ts":1492020257000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"spec=foo on the link, or a link-defaults line (which includes a spec:foo; entry)","msgtype":"m.text"},"ts":1492020305000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Hmm I tried `spec: URL; text: base URL` and it complained at me","msgtype":"m.text"},"ts":1492020336000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Definitely need at least a \"type\" in link defaults.","msgtype":"m.text"},"ts":1492020407000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Did it complain properly, telling you what was missing?","msgtype":"m.text"},"ts":1492020417000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"(If not, that's a Bikeshed bug.)","msgtype":"m.text"},"ts":1492020421000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"It did say it needed a type, but I am surprised since URL already defines the type (as dfn)","msgtype":"m.text"},"ts":1492020440000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Yeah, but Bikeshed needs to know what the type is so it can actually match things up.","msgtype":"m.text"},"ts":1492020457000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"But now I did `spec: URL; type: dfn; text: base URL` and it's complaining `[1;33mLINK ERROR:[0m No 'dfn' refs found for 'base url' that are marked for export.`","msgtype":"m.text"},"ts":1492020462000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Okay, will check in a sec, in an interview rn.","msgtype":"m.text"},"ts":1492020479000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"ok!","msgtype":"m.text"},"ts":1492020492000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"smaug: It's because of the NavigationPolicy we pick","msgtype":"m.text"},"ts":1492026105000,"senderName":"dcheng","senderId":"dcheng@irc"},
{"content":{"body":"smaug: I suppose we could make it always create a new window if it's created from a popup, would that make it less weird?","msgtype":"m.text"},"ts":1492026121000,"senderName":"dcheng","senderId":"dcheng@irc"},
{"content":{"body":"yes","msgtype":"m.text"},"ts":1492026188000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"TabAtkins: so https://html.spec.whatwg.org/ now has this:","msgtype":"m.text"},"ts":1492031042000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"  <h5 data-dfn-for=link/rel id=link-type-serviceworker data-dfn-type=attr-value data-lt=serviceworker data-export=\"\">4.6.6.18 Link","msgtype":"m.text"},"ts":1492031045000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"  type \"<dfn><code>serviceworker</code></dfn>\"<a href=#link-type-serviceworker class=self-link></a></h5>","msgtype":"m.text"},"ts":1492031048000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"yet:","msgtype":"m.text"},"ts":1492031051000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"curl https://api.csswg.org/bikeshed/ -F url=https://raw.githubusercontent.com/w3c/ServiceWorker/246340fce702bab2cce35b046f090606389b279a/docs/index.bs -F output=err","msgtype":"m.text"},"ts":1492031062000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"still gives:","msgtype":"m.text"},"ts":1492031088000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"LINK ERROR: No 'attr-value' refs found for 'serviceworker","msgtype":"m.text"},"ts":1492031091000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: it probably will take a day for it to propagate :-/","msgtype":"m.text"},"ts":1492031267000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"aha","msgtype":"m.text"},"ts":1492031272000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: UTF-8 decode produces a scalar value string, not a JavaScript string, right?","msgtype":"m.text"},"ts":1492031278000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"never any instant gratification in working on the web runtime 😞","msgtype":"m.text"},"ts":1492031341000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: kNah, it's already there.","msgtype":"m.text"},"ts":1492031379000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Just updated a few minutes ago to check, and it's returned by `bikeshed refs --text=serviceworker`","msgtype":"m.text"},"ts":1492031399000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"well wtf then","msgtype":"m.text"},"ts":1492031414000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I got <{link/rel/serviceworker}> in teh Service Worker source","msgtype":"m.text"},"ts":1492031510000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Oh, hm, it doesn't have a for value in the db.","msgtype":"m.text"},"ts":1492031517000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"ah yeah the full error is LINK ERROR: No 'attr-value' refs found for 'serviceworker' with for='link/rel'.","msgtype":"m.text"},"ts":1492031537000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"That's weird tho","msgtype":"m.text"},"ts":1492031551000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Gonna yell at plinss about it.","msgtype":"m.text"},"ts":1492031560000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"it doesn’t recognize data-dfn-for=link/rel ?","msgtype":"m.text"},"ts":1492031560000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"}
]