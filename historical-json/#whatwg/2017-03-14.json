[
{"content":{"body":"Domenic: re utf-16, iirc, in the era before https://encoding.spec.whatwg.org/ , if the encoding label is \"utf-16\", the BOM is mandatory; if the encoding label is \"utf-16le\" or \"utf-16be\", the BOM is forbidden","msgtype":"m.text"},"ts":1489477269000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Ah yeah, that sounds about right, but that wasn't actually how anything worked","msgtype":"m.text"},"ts":1489477429000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Regarding https://bugs.chromium.org/p/chromium/issues/detail?id=580796#c10, do you have any failing tests?","msgtype":"m.text"},"ts":1489481525000,"senderName":"yhirano__","senderId":"yhirano__@irc"},
{"content":{"body":"yhirano__: oh, I forgot to cc myself so I never saw the reply, looking","msgtype":"m.text"},"ts":1489481583000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yhirano__: I don't have any failing tests","msgtype":"m.text"},"ts":1489481698000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Thank you, then I will close the issue.","msgtype":"m.text"},"ts":1489481731000,"senderName":"yhirano__","senderId":"yhirano__@irc"},
{"content":{"body":"yhirano__: https://w3c-test.org/cors/redirect-preflight.htm should test the functionality","msgtype":"m.text"},"ts":1489481749000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yhirano__: I guess that means that only Firefox doesn't implement this yet","msgtype":"m.text"},"ts":1489481758000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yhirano__: thanks for letting me know","msgtype":"m.text"},"ts":1489481925000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"np, and thank you.","msgtype":"m.text"},"ts":1489482011000,"senderName":"yhirano__","senderId":"yhirano__@irc"},
{"content":{"body":"annevk: np, and thank you.","msgtype":"m.text"},"ts":1489482018000,"senderName":"yhirano__","senderId":"yhirano__@irc"},
{"content":{"body":"mounir: so about the mousedown/up","msgtype":"m.text"},"ts":1489494577000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"was it really designed so that mouseup isn't supposed to be dispatched at all, even if page got mousedown outside <video>?","msgtype":"m.text"},"ts":1489494692000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"or is that oversight?","msgtype":"m.text"},"ts":1489494713000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"smaug: I couldn't say for sure but likely an oversight","msgtype":"m.text"},"ts":1489496838000,"senderName":"mounir","senderId":"mounir@irc"},
{"content":{"body":"A question about https://html.spec.whatwg.org/multipage/browsers.html#dom-history-go...","msgtype":"m.text"},"ts":1489508524000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"should history.go(0) perform a security check?","msgtype":"m.text"},"ts":1489508546000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"the spec says it's the same as reload(), which does,","msgtype":"m.text"},"ts":1489508564000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"but this means that history.go(N) only performs a security check when N=0.","msgtype":"m.text"},"ts":1489508597000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"Is there some sample html5lib treewalker code somewhere I can copy-and-paste from?","msgtype":"m.text"},"ts":1489508834000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I need to iterate over a bunch of elements parsed from a document, look up some attributes and save the contents of one element, shouldn't be very hard, but with Python I never quite know how to reverse engineer a class","msgtype":"m.text"},"ts":1489508900000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ajeffrey_: good question; what do browsers do?","msgtype":"m.text"},"ts":1489509460000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"annevk: look at anything in html5lib/filters/","msgtype":"m.text"},"ts":1489509485000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Domenic: I realized that was most likely going to be the answer :)","msgtype":"m.text"},"ts":1489509616000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"I'll test and find out.","msgtype":"m.text"},"ts":1489509628000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"^_^","msgtype":"m.text"},"ts":1489509665000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"annevk: see, e..g, https://github.com/html5lib/html5lib-python/blob/master/html5lib/filters/inject_meta_charset.py","msgtype":"m.text"},"ts":1489509922000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Domenic: both FF and chrome actually throw a security exception on any cross-origin history.go(N).","msgtype":"m.text"},"ts":1489510547000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"we never actually get as far as the spec for go, I suspect.","msgtype":"m.text"},"ts":1489510598000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"Cross-origin how?","msgtype":"m.text"},"ts":1489510669000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"gsnedders: ta, will investigate tomorrow","msgtype":"m.text"},"ts":1489510697000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: using iframe.contentWindow on a cross-origin iframe.","msgtype":"m.text"},"ts":1489510722000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"ajeffrey_: history should not be accessible per WindowProxy limitations","msgtype":"m.text"},"ts":1489510762000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: hmm, interestingly FF and chrome disagree about same-origin history.go(0).","msgtype":"m.text"},"ts":1489510783000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"If you call iframe.contentWindow.history.go(0) in Chrome, it reloads the iframe,","msgtype":"m.text"},"ts":1489510823000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"in FF it reloads the current document.","msgtype":"m.text"},"ts":1489510836000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"ajeffrey_: then it's not cross-origin or we are missing something","msgtype":"m.text"},"ts":1489510898000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ajeffrey_: History is not a cross-origin object per standard","msgtype":"m.text"},"ts":1489510922000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"My read of \"When the go(delta) method is invoked, if delta is zero, the user agent must act as if the location.reload() method was called instead.\" is to reload the currently active document of the window the history came from.","msgtype":"m.text"},"ts":1489510959000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"That only matters if you can access history","msgtype":"m.text"},"ts":1489511002000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yes, this second point is re same-origin history.","msgtype":"m.text"},"ts":1489511035000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"it's that the spec says \"location.reload()\" but doesn't actually say which location object to use.","msgtype":"m.text"},"ts":1489511106000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"ajeffrey_: I see, that should probably be refactored","msgtype":"m.text"},"ts":1489514785000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ajeffrey_: I'm sorry they made you implement this, although I'm also somewhat happy we're getting all the issues logged","msgtype":"m.text"},"ts":1489514802000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: np, should I file an issue?","msgtype":"m.text"},"ts":1489515203000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"ajeffrey_: yeah, that's probably best","msgtype":"m.text"},"ts":1489515214000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Okay, will do.","msgtype":"m.text"},"ts":1489515237000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"ajeffrey_: if you have any tests those would be good to include btw","msgtype":"m.text"},"ts":1489515417000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: OK, I'll see if I can write something.","msgtype":"m.text"},"ts":1489515647000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"annevk: is there an easy way to check to see if a document is being loaded for the first time vs a reload?","msgtype":"m.text"},"ts":1489515834000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"ajeffrey_: there is some kind of state thing in web-platform-tests, but I'm not familiar enough to give advice","msgtype":"m.text"},"ts":1489515884000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: oh yes, I could use a stash.","msgtype":"m.text"},"ts":1489515915000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"ajeffrey_: yes, that thing","msgtype":"m.text"},"ts":1489516362000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Submitted https://github.com/whatwg/html/issues/2436","msgtype":"m.text"},"ts":1489519237000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"}
]