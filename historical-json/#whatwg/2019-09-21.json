[
{"content":{"body":"smaug____: not sure to what extent, but it has a number of features everyone wants","msgtype":"m.text"},"ts":1569024128000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"littledan: how does importing Wasm work again?","msgtype":"m.text"},"ts":1569024270000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: sure, but only one implementation. Perhaps the features should be exposed as lower level primitives.","msgtype":"m.text"},"ts":1569029354000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"Just a random thought","msgtype":"m.text"},"ts":1569029373000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"Yeah, true","msgtype":"m.text"},"ts":1569038221000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I've advocated for removing it but Apple has supported keeping it for some time so we're at multi-implementer support... But that second support does not appear to be of the sort \"we plan to implement this soon\"... so I'm unsure.","msgtype":"m.text"},"ts":1569042150000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"annevk: It's based on the MIME type, just like JSON","msgtype":"m.text"},"ts":1569047746000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"littledan: I meant more in terms of capabilities. Does the Wasm just run or do you have to invoke something for it to run?","msgtype":"m.text"},"ts":1569049676000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: It just runs, like JavaScript. It invokes a \"start function\"","msgtype":"m.text"},"ts":1569049732000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"It can only import things from other modules, but those modules may give it access to globals","msgtype":"m.text"},"ts":1569049770000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"I was hoping that the get-originals proposal would give it access to everything, but I don't understand the landscape of who likes those kinds of proposals at the moment","msgtype":"m.text"},"ts":1569049824000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"If it can import a JS module the threat model seems equivalent","msgtype":"m.text"},"ts":1569049878000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"To JS modules","msgtype":"m.text"},"ts":1569049894000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Someone might assume it's less powerful, if they hear about the Wasm sandbox and don't understand that module integration gives the power to import JS modules (unlike the JS API). I'm not sure if this makes it at all like JSON.","msgtype":"m.text"},"ts":1569080736000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"littledan: I don’t think it does. Going from data to code execution is bad as it’s not expected, but Wasm starts with code execution that’s equally capable","msgtype":"m.text"},"ts":1569105716000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: OK, seems reasonable to me, but I wonder what we will do to note module types explicitly. I don't remember when in TC39 we rejected adding syntax for this sort of thing. I am not sure we considered it. Maybe Domenic has more details. I would like to figure out how to enable JSON modules.","msgtype":"m.text"},"ts":1569107084000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"I just remember talking about things like SRI, but I think we can agree that this does not make as much sense  inline, because of tree cache invalidation.","msgtype":"m.text"},"ts":1569107159000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"littledan: agreed, though not having a solution for SRI at all is bad and arguably a step backward","msgtype":"m.text"},"ts":1569108046000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"littledan: might also lead to non-adoption depending on your threat model","msgtype":"m.text"},"ts":1569108075000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yeah, I think if we make a clear proposal to TC39 for this, it could work. I only remember a TC39 presentation encouraging us not to do this (IIRC for SRI) and some committee members agreed. We don't tend to resolve \"we will never do this\". So I think it's worth re-examining.","msgtype":"m.text"},"ts":1569108237000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"Annevk: Was there any concrete suggestion for the right way to include this data, either for SRI or JSON?","msgtype":"m.text"},"ts":1569108295000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"Do people want this to be inline in the JS?","msgtype":"m.text"},"ts":1569108310000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"I am not sure if there is some other proposal that would provide SRI that this would overlap with (signed exchange? It's been made clear that import maps would not have SRI information)","msgtype":"m.text"},"ts":1569108590000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"Import maps still seems like the most viable place","msgtype":"m.text"},"ts":1569108796000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"The downside is that you have to use import URLs for non-script resources, but that seems okayish","msgtype":"m.text"},"ts":1569109874000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Or perhaps with some other opt-in we just route all URLs through this map","msgtype":"m.text"},"ts":1569110039000,"senderName":"annevk","senderId":"annevk@irc"}
]