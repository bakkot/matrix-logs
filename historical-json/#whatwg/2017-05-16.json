[
{"content":{"body":"Does \"... and abort these steps\" add anything useful after \"return\" or \"throw\"? HTML uses \"return foo and abort these steps\" which I assume is just old-and-crufty style, but maybe people like it... ?","msgtype":"m.text"},"ts":1494893593000,"senderName":"jsbell","senderId":"jsbell@irc"},
{"content":{"body":"jsbell: I find it makes it *extremely* clear that the sync part ends there. Definitely superfluous, but still helpful imo.","msgtype":"m.text"},"ts":1494893642000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"jsbell: we've stopped using it as of the Infra Era, which formally defines return/throw to terminate the algorithm","msgtype":"m.text"},"ts":1494893714000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"As with most things in Infra, HTML is gradually updating to use them as we refactor various algorithms, so it'll be a mismash for a while.","msgtype":"m.text"},"ts":1494893744000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"https://infra.spec.whatwg.org/#algorithm-control-flow","msgtype":"m.text"},"ts":1494893763000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Thanks. \"use judiciously when it improves readability\" is a possible take-away, balancing the risk of making its absence confusing.","msgtype":"m.text"},"ts":1494894238000,"senderName":"jsbell","senderId":"jsbell@irc"},
{"content":{"body":"jsbell: it's fine until you have nested steps at which point it increases confusion","msgtype":"m.text"},"ts":1494894615000,"senderName":"tobie","senderId":"tobie@irc"},
{"content":{"body":"annevk: the problems with instability of w3c-test.org are basically just that wptserve isnâ€™t really suitable for being run as a persistent process. w3c-test.org is the only place where itâ€™s run persistently with any kind fo load; everybody else just runs it locally with insignificant load","msgtype":"m.text"},"ts":1494908669000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: the problem is that if wptserve running persistently under load leaks memory. Lots of it, til it eventually consumes 4GB+ of RAM. And it also starts to do other weird things","msgtype":"m.text"},"ts":1494908754000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: so anyway I've now made a cron job that just restarts it every 1 hour","msgtype":"m.text"},"ts":1494908793000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"As per the other channel, running a few thousand test files in CI doesn't seem like obviously insignificant load","msgtype":"m.text"},"ts":1494914820000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1494914845000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"So I wonder if there's something more specific that's problematic (e.g. specific tests that cause leaks)","msgtype":"m.text"},"ts":1494914848000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"dunno","msgtype":"m.text"},"ts":1494914856000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"very hard to troubleshoot","msgtype":"m.text"},"ts":1494914861000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I can maybe write a special patch to generate some memory logs","msgtype":"m.text"},"ts":1494915057000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"See if we can figure out what's goign on","msgtype":"m.text"},"ts":1494915065000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"that would be good","msgtype":"m.text"},"ts":1494915127000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"when I restarted it today, on the w3c-test.org which has 7.8GB of RAM and normally has about 5.8GB of that sitting free, there was instead only 1.7GB free","msgtype":"m.text"},"ts":1494915244000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"so hey on the bright side, it hadnâ€™t yet consumed all of the free RAM","msgtype":"m.text"},"ts":1494915263000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"rbyers: I lost Chromium issue privileges so I can no longer add labels and such","msgtype":"m.text"},"ts":1494919274000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"rbyers: intentional?","msgtype":"m.text"},"ts":1494919277000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"rbyers: https://bugs.chromium.org/p/chromium/issues/detail?id=722737 will be the kind of issues you get from now","msgtype":"m.text"},"ts":1494919307000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"sorry about that, I'll ping internally to restore your privs","msgtype":"m.text"},"ts":1494922849000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"annevk: https://html.spec.whatwg.org/#attr-label-for","msgtype":"m.text"},"ts":1494926194000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"\"same tree\"","msgtype":"m.text"},"ts":1494926209000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"but that doesn't care about in-document or anything","msgtype":"m.text"},"ts":1494926224000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"filed https://github.com/whatwg/html/issues/2686","msgtype":"m.text"},"ts":1494926591000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"smaug, What is the reason for the current instability in the released blink implementation?","msgtype":"m.text"},"ts":1494926967000,"senderName":"Younder","senderId":"Younder@irc"},
{"content":{"body":"?","msgtype":"m.text"},"ts":1494926980000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"doesn't know too much about blink","msgtype":"m.emote"},"ts":1494926999000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"Last time I hacked webkit (pre-blink) was after all 11+ years ago :p","msgtype":"m.text"},"ts":1494927057000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"jochen__: do you think you could describe what document.open() does exactly in https://github.com/whatwg/html/issues/1698?","msgtype":"m.text"},"ts":1494932104000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jochen__: I guess I can start writing some tests","msgtype":"m.text"},"ts":1494932113000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I can try, however, it's very different from what the spec says or Firefox does :/","msgtype":"m.text"},"ts":1494932471000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"annevk: Sorry, no of course it's not intentional ðŸ˜‰.  I'll investigate.","msgtype":"m.text"},"ts":1494932721000,"senderName":"rbyers","senderId":"rbyers@irc"},
{"content":{"body":"rbyers: i've sent an email to committers@","msgtype":"m.text"},"ts":1494933018000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"jochen__: what Fx and the spec do is overly complicated so I'd rather not go there","msgtype":"m.text"},"ts":1494933417000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: you said that WebKit doesn't implement document.open() with three arguments, but afaict it does","msgtype":"m.text"},"ts":1494934387000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: in https://github.com/whatwg/html/issues/1698","msgtype":"m.text"},"ts":1494934390000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: at least document.open(\"\",\"\",\"\") opens a new window in Safari TP","msgtype":"m.text"},"ts":1494934422000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Yeah that part was wrong","msgtype":"m.text"},"ts":1494934852000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: would you mind if I remove the comment?","msgtype":"m.text"},"ts":1494934902000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Nope.","msgtype":"m.text"},"ts":1494934917000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"ta","msgtype":"m.text"},"ts":1494934949000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Is the spec going to align to WebKit behaviour?","msgtype":"m.text"},"ts":1494934949000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"i hope not, unless WK meanwhile implements the origin check :)","msgtype":"m.text"},"ts":1494935732000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"nox: something that doesn't create a new global ideally","msgtype":"m.text"},"ts":1494935872000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: WOOOO","msgtype":"m.text"},"ts":1494936175000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"jochen__: What?","msgtype":"m.text"},"ts":1494936186000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: it's probably gonna take a while longer, but I've made some progress","msgtype":"m.text"},"ts":1494936582000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox, afaik WK hasn't implemented https://github.com/whatwg/html/pull/583 yet","msgtype":"m.text"},"ts":1494938294000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"jochen__: Oh.","msgtype":"m.text"},"ts":1494938684000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"jochen__: I meant the part where WK doesn't create a new Window.","msgtype":"m.text"},"ts":1494938695000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: I tried to summarize what blink does... at places, it's not quite clear to me how our code translates to spec text and vice versa","msgtype":"m.text"},"ts":1494944967000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"jochen__: ta, I'll have a look tomorrow or maybe later today, time to do some parenting","msgtype":"m.text"},"ts":1494945039000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"enjoy","msgtype":"m.text"},"ts":1494945282000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"It would be funny if W3C was to version HTML based on the WHATWG web developer edition.","msgtype":"m.text"},"ts":1494964434000,"senderName":"Yuhong","senderId":"Yuhong@irc"},
{"content":{"body":"Similar to what they did with HTML 3.2.","msgtype":"m.text"},"ts":1494964448000,"senderName":"Yuhong","senderId":"Yuhong@irc"},
{"content":{"body":"cdumez is quick with fixing bugs <3 https://bugs.webkit.org/show_bug.cgi?id=172114","msgtype":"m.text"},"ts":1494970426000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"in related news https://bugs.webkit.org/show_bug.cgi?id=110001 - yay!","msgtype":"m.text"},"ts":1494971001000,"senderName":"zcorpan","senderId":"zcorpan@irc"}
]