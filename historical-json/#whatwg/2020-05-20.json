[
{"content":{"body":"annevk: for the Origin-Isolation header PR should I use \"Is URL potentially trustworthy\" like the COOP PR currently does? Or are we going to create some new environment-accepting algorithm?","msgtype":"m.text"},"ts":1589990505000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: https://github.com/whatwg/html/issues/5558","msgtype":"m.text"},"ts":1589990577000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I'm not sure how that answers my question...","msgtype":"m.text"},"ts":1589990605000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: well that's my progress towards addressing the second question","msgtype":"m.text"},"ts":1589990647000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Got it","msgtype":"m.text"},"ts":1589990654000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"annevk: I guess my question is more, is using potentially-trustworthy URL incorrect? Or is it a reasonable thing to do for now, and we can maybe replace it later?","msgtype":"m.text"},"ts":1589990679000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"But it requires changes to Shivani's work which isn't great","msgtype":"m.text"},"ts":1589990679000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(in terms of timing)","msgtype":"m.text"},"ts":1589990690000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: it's reasonable for a top-level navigation","msgtype":"m.text"},"ts":1589990754000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I don't have Origin-Isolation paged in entirely","msgtype":"m.text"},"ts":1589990766000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Oh, OK, so not great for origin-isolation.","msgtype":"m.text"},"ts":1589990770000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: if you have a handle to the top-level document you could use it, but it might end up looking ungainly","msgtype":"m.text"},"ts":1589990835000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I see","msgtype":"m.text"},"ts":1589990878000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Maybe I should just try to help out with 5558...","msgtype":"m.text"},"ts":1589990884000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: review would be nice ðŸ™‚","msgtype":"m.text"},"ts":1589990895000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"5558 is complicated though :(","msgtype":"m.text"},"ts":1589990898000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Effectively it's merging target top-level origin and top-level origin (and place them both on environment) and adding top-level creation URL","msgtype":"m.text"},"ts":1589990969000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"So the reason we need top-level creation URL is because we want pages which are top-level data: or top-level about:blank to make all their descendants count as secure contexts?","msgtype":"m.text"},"ts":1589991018000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"annevk: ^","msgtype":"m.text"},"ts":1589991199000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: hmm maybe we don't need it then though then you have top-level origin potentially switching between two origins rather than null and an origin","msgtype":"m.text"},"ts":1589991234000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: I hadn't looked too closely at what the URL secure contexts thing did, I just saw that the environment thing was using it","msgtype":"m.text"},"ts":1589991273000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Cool, glad to be helpful","msgtype":"m.text"},"ts":1589991283000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: in fact, if we go with top-level document decides we could drop it entirely, which is nice","msgtype":"m.text"},"ts":1589991294000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: switching between two origins seems closer to what I'm understanding of the implementation","msgtype":"m.text"},"ts":1589991298000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: oh wait, an opaque origin doesn't have a scheme","msgtype":"m.text"},"ts":1589991320000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: so if the the top-level is sandboxed, how would you tell it's secure?","msgtype":"m.text"},"ts":1589991334000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"How can the top-level be sandboxed?","msgtype":"m.text"},"ts":1589991342000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"<iframe sandboxed>, right?","msgtype":"m.text"},"ts":1589991352000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: CSP: sandbox","msgtype":"m.text"},"ts":1589991360000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ah","msgtype":"m.text"},"ts":1589991366000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: I guess in theory that would create an insecure context, but I doubt that's what we want","msgtype":"m.text"},"ts":1589991383000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Looks like currently the Secure Contexts specs says it's insecure, yeah.","msgtype":"m.text"},"ts":1589991389000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I.e. \"Not Trustworthy\"","msgtype":"m.text"},"ts":1589991394000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"The number of yaks to shave is too damn high","msgtype":"m.text"},"ts":1589991430000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Oh, no, it says the URL is \"Not Trustworthy\", but the \"Is environment a secure context?\" returns \"Secure\", I think.","msgtype":"m.text"},"ts":1589991438000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"It doesn't bother checking the URL or origin if sandboxed origin browsing context flag is set.","msgtype":"m.text"},"ts":1589991471000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"aaah right","msgtype":"m.text"},"ts":1589991488000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"and that's why we need top-level creation URL","msgtype":"m.text"},"ts":1589991493000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ðŸ™‚","msgtype":"m.text"},"ts":1589991496000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"It is?","msgtype":"m.text"},"ts":1589991500000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I think so, because then you don't use an opaque origin but instead use the real URL","msgtype":"m.text"},"ts":1589991529000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"which will be secure","msgtype":"m.text"},"ts":1589991534000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Oh, step 5.3","msgtype":"m.text"},"ts":1589991536000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Note that I simplified that a bit in https://github.com/w3c/webappsec-secure-contexts/pull/75","msgtype":"m.text"},"ts":1589991573000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I'm inclined to let Shivani finish her PR using top-level origin, then just work on top of that as we need to, in a behavior-preserving way?","msgtype":"m.text"},"ts":1589991597000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"well, how many concepts do we want to end up with?","msgtype":"m.text"},"ts":1589991623000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"so then we have target top-level origin and top-level origin, which have some overlap","msgtype":"m.text"},"ts":1589991637000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"and we'll need top-level creation URL for secure contexts","msgtype":"m.text"},"ts":1589991646000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"gotta go for a bit","msgtype":"m.text"},"ts":1589991662000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"That seems acceptable to me, and then if we find a simplification we can do another PR on top of it to narrow them down","msgtype":"m.text"},"ts":1589991673000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Or we can convert top-level origin into top-level URL as part of our secure contexts fixup PR, but it can be our responsibility to do so in a way that preserves the behavior Shivani's PR introduces","msgtype":"m.text"},"ts":1589991707000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Yeah, I guess if Shivani is okay with this setup I can put some time into making it work","msgtype":"m.text"},"ts":1589993437000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I'd rather not clean up afterwards as I'm somewhat afraid there'll be many incoming references to these things","msgtype":"m.text"},"ts":1589993460000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Also put that in the issue","msgtype":"m.text"},"ts":1589993819000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: can you merge https://github.com/whatwg/infra/pull/306 so it gets picked up tonight?","msgtype":"m.text"},"ts":1589998096000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Done, sorry that slipped through","msgtype":"m.text"},"ts":1589998124000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: thanks, the Web storage thing is ready for hot takes btw","msgtype":"m.text"},"ts":1589998793000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I think that's all I got to today more or less","msgtype":"m.text"},"ts":1589998821000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Sounds good","msgtype":"m.text"},"ts":1589998957000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Why is disowned separate from opener = null again?","msgtype":"m.text"},"ts":1590000359000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: isnâ€™t it the result of setting to null?","msgtype":"m.text"},"ts":1590000455000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevkL We have two states on WindowProxy: opener BC, which can be either null or a BC, and disowned, a boolean.","msgtype":"m.text"},"ts":1590000479000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"It looks like \"familiar with\" consults opener BC and disregards disowned.","msgtype":"m.text"},"ts":1590000493000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I donâ€™t recall. Familiar with is 313 iirc","msgtype":"m.text"},"ts":1590000591000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Nice recall","msgtype":"m.text"},"ts":1590000622000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: I haven't created a issue about this because I wonder if I missed something obvious. Say the dialog is vertical (means `top:0, bottom:0`) , if we do `window.scroll(0, 2000); dialog.showModal()`, to make it's centered, we'd need to change the `top` value. Don't you feel this is a bit odd?","msgtype":"m.text"},"ts":1590013501000,"senderName":"saber1","senderId":"saber1@irc"},
{"content":{"body":"saber1: what is odd about it?","msgtype":"m.text"},"ts":1590013528000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: top is set to 0 by `inset-inline-start`?","msgtype":"m.text"},"ts":1590013572000,"senderName":"saber1","senderId":"saber1@irc"},
{"content":{"body":"Sure, but that's just the UA stylesheet. Centered alignment mode overrides that.","msgtype":"m.text"},"ts":1590013601000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"okay..let me think about this a bit more...","msgtype":"m.text"},"ts":1590014095000,"senderName":"saber1","senderId":"saber1@irc"}
]