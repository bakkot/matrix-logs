[
{"content":{"body":"cool...thnx","msgtype":"m.text"},"ts":1318809600000,"senderName":"robman","senderId":"robman@irc"},
{"content":{"body":"goes off to do some performance tests","msgtype":"m.emote"},"ts":1318809601000,"senderName":"robman","senderId":"robman@irc"},
{"content":{"body":"Hixie: The example in section 10.1.2.2 still uses the Web SQL Database as an example for Web Workers. Maybe that should change to IndexedDB or clientside DB du jour.","msgtype":"m.text"},"ts":1318820040000,"senderName":"ttepasse","senderId":"ttepasse@irc"},
{"content":{"body":"cpearce, so it sounds like the \"fullscreen flag\" really ought to be on top-level browsing context instead of Document if all Documents need to have it set","msgtype":"m.text"},"ts":1318822140000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"cpearce, also, thanks for the great comments","msgtype":"m.text"},"ts":1318822200000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"oh wait","msgtype":"m.text"},"ts":1318822740000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"you are saying something else","msgtype":"m.text"},"ts":1318822741000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"maky","msgtype":"m.text"},"ts":1318822742000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"mkay*","msgtype":"m.text"},"ts":1318822743000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: heh, comments are all the edge cases I've bumped into so far. ;)  hmm... without the Document.fullscreen attribute we can't represent that a document remains in fullscreen state if its fullscreen element is inserted into another document. Unless we cause that to exit fullscreen mode... not sure we want to do that.","msgtype":"m.text"},"ts":1318822800000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"I guess my idea was that all Documents would be fullscreen if their top-level browsing context is fullscreen","msgtype":"m.text"},"ts":1318822860000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"and then the documents which are highlighted is determined by the \"fullscreen element\"","msgtype":"m.text"},"ts":1318822920000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"are there use cases to make the moving around of elements not do the simplest thing?","msgtype":"m.text"},"ts":1318822980000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"it seems to me that removing an element that is the fullscreen element should simply clear the fullscreen element for that document and the fullscreen element of any descendant browsing context documents (if any)","msgtype":"m.text"},"ts":1318823040000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(and a move in the DOM is a remove followed by an insert so that would behave the same)","msgtype":"m.text"},"ts":1318823041000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"that makes sense. I think that's implied by the gecko spec, it's how I've implemented it so far.","msgtype":"m.text"},"ts":1318823100000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"then for the scenario where a new element becomes the fullscreen element I think nicest would be to find the nearest common ancestor fullscreen element of old and new, remove all old and dispatch events and then set new and dispatch mutation events","msgtype":"m.text"},"ts":1318823160000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"s/mutation/fullscreenchanged/","msgtype":"m.text"},"ts":1318823161000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yup. :)","msgtype":"m.text"},"ts":1318823220000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"the alternative would be to clear \"fullscreen element\" everywhere, set it anew, and dispatch fullscreenchanged on all documents","msgtype":"m.text"},"ts":1318823221000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"right, but then you'd see fullscreenchange twice on docs that toggle off and back on again.","msgtype":"m.text"},"ts":1318823280000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"which could confuse script.","msgtype":"m.text"},"ts":1318823281000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"good point","msgtype":"m.text"},"ts":1318823282000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"okay I'll take a look at fixing this","msgtype":"m.text"},"ts":1318823283000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"time for lunch here","msgtype":"m.text"},"ts":1318823340000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"thanks!","msgtype":"m.text"},"ts":1318823341000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"np.","msgtype":"m.text"},"ts":1318823342000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"ttepasse: if you have an example to replace it with, that'd be awesome. send me mail to ianâŠ™hc if you can help with that.","msgtype":"m.text"},"ts":1318826460000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"ah, cpearce left","msgtype":"m.text"},"ts":1318829340000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"so when removing a \"fullscreen element\" the order of fullscreenchange, fullscreenElement, and mutation listeners, may be somewhat tricky","msgtype":"m.text"},"ts":1318829580000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"btw anne i noticed when glancing at your draft that there's a step that says something like \"do animations\" in what looks like a synchronous algorithm","msgtype":"m.text"},"ts":1318829640000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"but animations need to spin the event loop to be done","msgtype":"m.text"},"ts":1318829641000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I guess fullscreenchange cannot be synchronous, because then it would be synchronous mutation event of sorts, but then is fullscreenElement changed by the time the mutation listener is there?","msgtype":"m.text"},"ts":1318829700000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hmm","msgtype":"m.text"},"ts":1318829701000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Hixie, so while doing the animation it needs to spin the event loop?","msgtype":"m.text"},"ts":1318829702000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Also, I guess we should name the event fullscreenchange and not fullscreenchanged","msgtype":"m.text"},"ts":1318830180000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: well more likely the algorithm just needs to be async while the event loop continues normally","msgtype":"m.text"},"ts":1318831320000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"annevk: but you need to handle what happens if fullscreen mode is exited while that's going on","msgtype":"m.text"},"ts":1318831321000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":":(","msgtype":"m.text"},"ts":1318831440000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MIkeSmith: ping","msgtype":"m.text"},"ts":1318834080000,"senderName":"myakura","senderId":"myakura@irc"},
{"content":{"body":"myakura: hey man","msgtype":"m.text"},"ts":1318834081000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"we are downstairs in front of the Square Tower","msgtype":"m.text"},"ts":1318834082000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"hiya","msgtype":"m.text"},"ts":1318834083000,"senderName":"myakura","senderId":"myakura@irc"},
{"content":{"body":"we?","msgtype":"m.text"},"ts":1318834084000,"senderName":"myakura","senderId":"myakura@irc"},
{"content":{"body":"noticed that he typed MIke and wonder if MIke is TM'd or not.","msgtype":"m.emote"},"ts":1318834140000,"senderName":"myakura","senderId":"myakura@irc"},
{"content":{"body":"myakura: me & secret visitor","msgtype":"m.text"},"ts":1318834200000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"hm. I have a meeting at 3pm and will back in an hour. Do you think you two'll still be there?","msgtype":"m.text"},"ts":1318834380000,"senderName":"myakura","senderId":"myakura@irc"},
{"content":{"body":"yeah, probably","msgtype":"m.text"},"ts":1318834440000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"if our battery power holds up","msgtype":"m.text"},"ts":1318834441000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but if you don't find us, just ping me","msgtype":"m.text"},"ts":1318834442000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"alright.","msgtype":"m.text"},"ts":1318834443000,"senderName":"myakura","senderId":"myakura@irc"},
{"content":{"body":"MikeSmith: so, I'm writing about the Testing Activity for my next Web Designing article.","msgtype":"m.text"},"ts":1318834500000,"senderName":"myakura","senderId":"myakura@irc"},
{"content":{"body":"aha","msgtype":"m.text"},"ts":1318834501000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"cool","msgtype":"m.text"},"ts":1318834502000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I'm happy to talk with you about it","msgtype":"m.text"},"ts":1318834503000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: probably not that big a deal. If anything happens during that step to cancel the fullscreening, just reverse the animation and don't fire anything.","msgtype":"m.text"},"ts":1318834560000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"MikeSmith: and http://www.w3.org/testing/browser/ says like that it hasn't been chartered yet.","msgtype":"m.text"},"ts":1318834561000,"senderName":"myakura","senderId":"myakura@irc"},
{"content":{"body":"myakura: oh, lemme change that now","msgtype":"m.text"},"ts":1318834562000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: thanks!","msgtype":"m.text"},"ts":1318834563000,"senderName":"myakura","senderId":"myakura@irc"},
{"content":{"body":"okay, bbl.","msgtype":"m.text"},"ts":1318834620000,"senderName":"myakura","senderId":"myakura@irc"},
{"content":{"body":"cheers","msgtype":"m.text"},"ts":1318834621000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Hixie, yeah, but I guess exitFullscreen() can be invoked then too and requestFullscreen() could be invoked again on some other element","msgtype":"m.text"},"ts":1318834680000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Hixie, so there probably needs to be some kind of state for all these edge cases","msgtype":"m.text"},"ts":1318834681000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: ah, yeah, i forgot this was element-based","msgtype":"m.text"},"ts":1318834740000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"annevk: btw, did you end up needing anything on the html side?","msgtype":"m.text"},"ts":1318834741000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"attribute or anything?","msgtype":"m.text"},"ts":1318834742000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"yeah we want <iframe allowfullscreen>","msgtype":"m.text"},"ts":1318834743000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"is there a bug on it?","msgtype":"m.text"},"ts":1318834744000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I will file one","msgtype":"m.text"},"ts":1318834745000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"cool","msgtype":"m.text"},"ts":1318834746000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"mark it blocker if you need it sooner rather than later","msgtype":"m.text"},"ts":1318834747000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"and the Gecko guys want to exit fullscreen when you navigate","msgtype":"m.text"},"ts":1318834800000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"roger","msgtype":"m.text"},"ts":1318834801000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i can add a hook","msgtype":"m.text"},"ts":1318834802000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"but I'm not sure how that would work yet with events yet","msgtype":"m.text"},"ts":1318834803000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"and what happens when you navigate when of the child browsing contexts instead of the top-level","msgtype":"m.text"},"ts":1318834804000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"sounds good btw","msgtype":"m.text"},"ts":1318834860000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"man if you want to be explicit about how to deal with moving the fullscreen element around it gets hairy","msgtype":"m.text"},"ts":1318836360000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"the fullscreen elements can be in the same document, one can be an ancestor document of the other, and they can share a common ancestor","msgtype":"m.text"},"ts":1318836420000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"in the ancestor case the fullscreen element in the ancestor might also need to be changed depending on what it is","msgtype":"m.text"},"ts":1318836780000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"i guess it's kind of equivalent to the common ancestor case in that way, except there are no descendant documents to notify","msgtype":"m.text"},"ts":1318836840000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hmm","msgtype":"m.text"},"ts":1318837680000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"\"first inclusive ancestor\" can probably work","msgtype":"m.text"},"ts":1318837681000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"* A is the old fullscreen element","msgtype":"m.text"},"ts":1318838580000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"* DA is A's node document","msgtype":"m.text"},"ts":1318838581000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"* B is the new fullscreen element","msgtype":"m.text"},"ts":1318838582000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"* DB is B's node document","msgtype":"m.text"},"ts":1318838583000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"* X is the first inclusive ancestor common to A and B","msgtype":"m.text"},"ts":1318838584000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"* Notify changes for descendant documents of X with a non-null fullscreen element","msgtype":"m.text"},"ts":1318838585000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"* Let Z be all descendants of X that are inclusive ancestors of DB","msgtype":"m.text"},"ts":1318838586000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"* Does X's fullscreen element change; if so change/notify","msgtype":"m.text"},"ts":1318838587000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"* Change/notify Z","msgtype":"m.text"},"ts":1318838588000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"that's a whole lot of complexity for a \"simple\" feature","msgtype":"m.text"},"ts":1318838589000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"open question is when the events are best dispatched","msgtype":"m.text"},"ts":1318838700000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"like do you update all the flags first and then dispatch all the events?","msgtype":"m.text"},"ts":1318838701000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"or do you do that kind of thing on a per document basis? change flag, dispatch event, change flag in next document, dispatch event in next document, etc.","msgtype":"m.text"},"ts":1318838760000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"whether X's fullscreen element changes is also fun...","msgtype":"m.text"},"ts":1318840800000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"  - If Z is empty and X's fullscreen element is not B","msgtype":"m.text"},"ts":1318840860000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"    - X needs to change","msgtype":"m.text"},"ts":1318840861000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"  - Let child be X's child document that is also in Z","msgtype":"m.text"},"ts":1318840862000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"  - If child's browsing context container is not X's fullscreen element","msgtype":"m.text"},"ts":1318840863000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"    - X needs to change","msgtype":"m.text"},"ts":1318840864000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"90% of the complexity of this feature is for something people will not run into","msgtype":"m.text"},"ts":1318840920000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"then again I don't really see a good alternative","msgtype":"m.text"},"ts":1318840921000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Hey I registered for a http://www.w3techcourses.com account but the email failed to send so now I can't confirm my registration. Is there anyone I can contact to fix this?","msgtype":"m.text"},"ts":1318852200000,"senderName":"markss","senderId":"markss@irc"},
{"content":{"body":"markss, this channel isn't affiliated with the W3C. Try #sysreq on the W3C's IRC server.","msgtype":"m.text"},"ts":1318853220000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"Lachy: Alright thanks","msgtype":"m.text"},"ts":1318854540000,"senderName":"markss","senderId":"markss@irc"},
{"content":{"body":"good morning, Whatwg!","msgtype":"m.text"},"ts":1318869780000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"every time i try to talk to people in the Semantic Web community i have the same troubles","msgtype":"m.text"},"ts":1318870740000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"sigh","msgtype":"m.text"},"ts":1318870741000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"zewt: the reason phone manufacturers rarely update *anything* is because there's no financial incentive to do so, and there is a fiscal penalty for doing so: if it breaks something on an operator's network, the operator will get pissed and ask for money back","msgtype":"m.text"},"ts":1318880220000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"plus, a mobile vendor (like nokia) makes money by selling (new) units, it doesn't make money from units once they are sold","msgtype":"m.text"},"ts":1318880280000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"and in the rare case that a browser actually results in revenue (home/search kickbacks), that money is not sent back to a maintenance team for the product that generated it, instead it is treated as some sort of windfall and absorbed by the company or some future product at large team","msgtype":"m.text"},"ts":1318880340000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"smaug____: fwiw, iPhone Safari doesn't get updated often, just look at how long it took for them to fix the certificate disaster","msgtype":"m.text"},"ts":1318880460000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"k","msgtype":"m.text"},"ts":1318880520000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"is certainly not going to buy any iPhone anyway","msgtype":"m.emote"},"ts":1318880521000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"N9 might be one option","msgtype":"m.text"},"ts":1318880580000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"but it is a bit too expensive","msgtype":"m.text"},"ts":1318880581000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"... but google should not have put phone manufacturers in control of updating the browser, just as they're not in control of updating google apps","msgtype":"m.text"},"ts":1318880582000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"depends on which browser the OS has","msgtype":"m.text"},"ts":1318880700000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"hopes phone manufacturers would use some better browsers than stock browser","msgtype":"m.emote"},"ts":1318880760000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"hopes Google will supply a sane browser (because it's their job) and phone manufacturers won't fragment things further","msgtype":"m.emote"},"ts":1318880820000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"it is bad if Google controls the whole stack","msgtype":"m.text"},"ts":1318880821000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: AIUI unless you pay Google (instead of getting Android for free) you can't ship the Google Apps and any non-standard application","msgtype":"m.text"},"ts":1318881660000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"smaug____: So OEMs take the default apps and Android for free","msgtype":"m.text"},"ts":1318881720000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"huh","msgtype":"m.text"},"ts":1318881960000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: The Google Apps are non-free.","msgtype":"m.text"},"ts":1318882140000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"smaug____: (like Gmail, Market, etc.)","msgtype":"m.text"},"ts":1318882141000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"smaug____: So you have to get a license from Google to distribute them. They let you have it free in return for advertising revenue, or you can pay and change stuff.","msgtype":"m.text"},"ts":1318882320000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"zewt: the reason phone manufacturers rarely update *anything* is because there's no financial incentive to do so, and there is a fiscal penalty for doing so: if it breaks something on an operator's network, the operator will get pissed and ask for money back","msgtype":"m.text"},"ts":1318882321000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"plus, a mobile vendor (like nokia) makes money by selling (new) units, it doesn't make money from units once they are sold. and in the rare case that a browser actually results in revenue (home/search kickbacks), that money is not sent back to a maintenance team for the product that generated it, instead it is treated as some sort of windfall and absorbed by the company or some future product at l","msgtype":"m.text"},"ts":1318882380000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"arge team","msgtype":"m.text"},"ts":1318882381000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"hober: out of curiosity, which mobile vendors are actually good at browser updates?","msgtype":"m.text"},"ts":1318882382000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"smaug____: fwiw, iPhone Safari doesn't get updated often, just look at how long it took for them to fix the certificate disaster","msgtype":"m.text"},"ts":1318882383000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"deja vu?","msgtype":"m.text"},"ts":1318882384000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"i'm using irccloud","msgtype":"m.text"},"ts":1318882385000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"you're repeating yourself, heh","msgtype":"m.text"},"ts":1318882386000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"i thought i was offline and that things i had said weren't said","msgtype":"m.text"},"ts":1318882387000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"so i queued them in notepad and then sent them again","msgtype":"m.text"},"ts":1318882440000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"it didn't occur to me that they would have been sent","msgtype":"m.text"},"ts":1318882441000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"stuff in other places wasn't sent!","msgtype":"m.text"},"ts":1318882442000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"i believe gsnedders is correct about the Google Apps","msgtype":"m.text"},"ts":1318882443000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"which is a pretty good reason for major vendors to pay in","msgtype":"m.text"},"ts":1318882444000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"as for the n9... dunno","msgtype":"m.text"},"ts":1318882445000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"what's shocked me of late is that i've met a couple of people interested in n8s","msgtype":"m.text"},"ts":1318882500000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"s/people/women/","msgtype":"m.text"},"ts":1318882501000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"timeless: AFAIK almost no vendors pay.","msgtype":"m.text"},"ts":1318882560000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"timeless: n8?","msgtype":"m.text"},"ts":1318883220000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"isn't that, hmm, old","msgtype":"m.text"},"ts":1318883280000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"n9 has got lots of media time in Finland","msgtype":"m.text"},"ts":1318883281000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"the n8 is what i got nokia to buy for me right before i left","msgtype":"m.text"},"ts":1318883282000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"and yeah, it's old and sucks","msgtype":"m.text"},"ts":1318883283000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"but has a 12mp camera","msgtype":"m.text"},"ts":1318883284000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"oh, and it turns out that the \"new\" ui for symbian actually eventually made it out the doors!","msgtype":"m.text"},"ts":1318883340000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"so if i can find Lucy, i can let her consider replacing the old symbian ui with a worse one!","msgtype":"m.text"},"ts":1318883341000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"(but hey, it's \"newer\")","msgtype":"m.text"},"ts":1318883342000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"does nobody implement body.onmessage?","msgtype":"m.text"},"ts":1318883640000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"or does nobody implement window.postMessage()?","msgtype":"m.text"},"ts":1318883700000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"nobodyâŠ™mo or nobodyâŠ™se ?","msgtype":"m.text"},"ts":1318883760000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"the latter exists in Chrome, anyway","msgtype":"m.text"},"ts":1318883761000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"https://developer.mozilla.org/en/DOM/window.postMessage","msgtype":"m.text"},"ts":1318883762000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"every browser i've tested fails http://www.hixie.ch/tests/adhoc/dom/web-apps/postMessage/002.html","msgtype":"m.text"},"ts":1318883763000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"msdn.microsoft.com/en-us/library/cc197057(v=vs.85).aspx","msgtype":"m.text"},"ts":1318883764000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"and i can't work out if it's my fault or not :-)","msgtype":"m.text"},"ts":1318883765000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"it seems that ms has documented body.onmessage","msgtype":"m.text"},"ts":1318883820000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"FAIL (message not received)","msgtype":"m.text"},"ts":1318883821000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"guess i should test windows","msgtype":"m.text"},"ts":1318883822000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"in IE10 on w8","msgtype":"m.text"},"ts":1318883823000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"IE?","msgtype":"m.text"},"ts":1318883824000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"k","msgtype":"m.text"},"ts":1318883825000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"so","msgtype":"m.text"},"ts":1318883826000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"is it my fault or what","msgtype":"m.text"},"ts":1318883827000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i'm confused","msgtype":"m.text"},"ts":1318883828000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"oh i guess i nuke the iframe","msgtype":"m.text"},"ts":1318883829000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"maybe that's why","msgtype":"m.text"},"ts":1318883830000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"let's fix that","msgtype":"m.text"},"ts":1318883831000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"timeless: how about now?","msgtype":"m.text"},"ts":1318883880000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"FAIL (message not received); TEST FRAME","msgtype":"m.text"},"ts":1318883940000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"test() not called from anywhere?","msgtype":"m.text"},"ts":1318883941000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"i.e. there's a frame with that other text","msgtype":"m.text"},"ts":1318883942000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"but i'm still getting the fail","msgtype":"m.text"},"ts":1318883943000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"zewt: 002a.html calls it onmessage","msgtype":"m.text"},"ts":1318883944000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"timeless: k. thanks for the help.","msgtype":"m.text"},"ts":1318883945000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i'll figure this out after lunch.","msgtype":"m.text"},"ts":1318883946000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hopefully it's my fault...","msgtype":"m.text"},"ts":1318883947000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"bbiab","msgtype":"m.text"},"ts":1318883948000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: FF9/10 have \"onmessage\" in document.body","msgtype":"m.text"},"ts":1318884240000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"fwiw, i get the same results in my slightly dated 32bit Nightly on w8 as i do w/ IE10","msgtype":"m.text"},"ts":1318884780000,"senderName":"timeless","senderId":"timeless@irc"},
{"content":{"body":"Hixie: i guess browsers don't support <body onmessage> properly","msgtype":"m.text"},"ts":1318885380000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: seems that way","msgtype":"m.text"},"ts":1318889220000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"yup, looks like no browser implements onmessage=\"\" right","msgtype":"m.text"},"ts":1318889520000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"oh well","msgtype":"m.text"},"ts":1318889521000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"files a bug","msgtype":"m.emote"},"ts":1318889522000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"http://www.hixie.ch/tests/adhoc/dom/web-apps/postMessage/002.html if you need a testcase","msgtype":"m.text"},"ts":1318889523000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"003.html tests window.onmessage and seems to work everywhere","msgtype":"m.text"},"ts":1318889524000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: Convert the tests to something that can be put in the oficial testsuite, please :)","msgtype":"m.text"},"ts":1318889700000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"is there documentation on how to do that?","msgtype":"m.text"},"ts":1318889701000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"http://www.w3.org/html/wg/wiki/Testing/Authoring/","msgtype":"m.text"},"ts":1318889760000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"wait why does a test have to include a js file?","msgtype":"m.text"},"ts":1318889820000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i just want to report the result to the harness","msgtype":"m.text"},"ts":1318889821000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Because there are tradeoffs in both directions","msgtype":"m.text"},"ts":1318889822000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"And this is the one we went with","msgtype":"m.text"},"ts":1318889823000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"wow this is far too complicated","msgtype":"m.text"},"ts":1318889824000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"the \"basic usage\" section of the documentation of the library is longer than most test harnesses i've written :-P","msgtype":"m.text"},"ts":1318889880000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: Having used the \"just report a result\" system at Opera, it turns out that often \"wow this is far too simplistic\"","msgtype":"m.text"},"ts":1318889881000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Anyway in your case there's no reason not to include the js file","msgtype":"m.text"},"ts":1318889940000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"tests should never include anything other than what is needed to run the test","msgtype":"m.text"},"ts":1318890000000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I really don't see the problem here","msgtype":"m.text"},"ts":1318890060000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"If it actually changes the results you get, that's differnet","msgtype":"m.text"},"ts":1318890120000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"But part of the point is that there isn't a way to \"just report the results to the harness\"","msgtype":"m.text"},"ts":1318890121000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"the test is 21 lines long. The script library is 1689 lines long. Reporting the result takes one line of code (if (parent.report) (parent.report(result))).","msgtype":"m.text"},"ts":1318890122000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"that's the problem","msgtype":"m.text"},"ts":1318890123000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"er, with one fewer parenthesis","msgtype":"m.text"},"ts":1318890180000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"That's not a problem","msgtype":"m.text"},"ts":1318890181000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Also, one of the main points is that there isn't a harness","msgtype":"m.text"},"ts":1318890182000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"everyone does something slightly different","msgtype":"m.text"},"ts":1318890183000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"including a library that is 80 times bigger than the test is a problem, imho. it means that the bulk of what the test is really testing has nothing to do with what it is trying to test.","msgtype":"m.text"},"ts":1318890240000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"We use some weird POST-to-localhost thing that will hopefully be replaced soon. Mozilla use moxhitests. Webkit use something that prints to stdout (I think?)","msgtype":"m.text"},"ts":1318890241000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"The library almost entirely assumes a good ecmascript implementation","msgtype":"m.text"},"ts":1318890242000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"That turns out to be a reasonable assumption","msgtype":"m.text"},"ts":1318890300000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"I consider the requirement to run the test in an iframe or popup window to be much more worrying","msgtype":"m.text"},"ts":1318890360000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"to each his own, i guess","msgtype":"m.text"},"ts":1318890420000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"when it comes to official test sets, i hope not :)","msgtype":"m.text"},"ts":1318890540000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"i don't understand opera's behaviour in http://www.hixie.ch/tests/adhoc/dom/web-apps/postMessage/001.html","msgtype":"m.text"},"ts":1318891020000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"webkit's behaviour is interesting. looks like it handles both postMessage(data, [], '*') and postMessage(data, '*', [])","msgtype":"m.text"},"ts":1318891080000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"might be worth putting that in the spec","msgtype":"m.text"},"ts":1318891081000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"ugh. please no","msgtype":"m.text"},"ts":1318891680000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"looks like only webkit implements it at all in a usable way, so i've changd the spec to match webkit","msgtype":"m.text"},"ts":1318891740000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"the number of people who have gotten confused as to the correct order of those arguments is sufficiently high that i think it's worth it","msgtype":"m.text"},"ts":1318891741000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"there doesn't seem to be a downside really","msgtype":"m.text"},"ts":1318891742000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"O_O","msgtype":"m.text"},"ts":1318891800000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"making code 50/50 inconsistent instead of people getting an error and learning to do it right is a very clear downside","msgtype":"m.text"},"ts":1318891801000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"i'm pretty sure our developers will refuse to implement that","msgtype":"m.text"},"ts":1318891860000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"well opera's implementation of the spec so far seems quite broken anyway, so... :-)","msgtype":"m.text"},"ts":1318891861000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"what's broken?","msgtype":"m.text"},"ts":1318891862000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"you fire a SYNTAX_ERR if there's three arguments","msgtype":"m.text"},"ts":1318891920000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"regardless of what they are","msgtype":"m.text"},"ts":1318891921000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"unless they're both '*'","msgtype":"m.text"},"ts":1318891922000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"(or presumably any valid origin, i haven't tested other origins)","msgtype":"m.text"},"ts":1318891923000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"what did you pass as argument?","msgtype":"m.text"},"ts":1318891980000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"i'll have to look at that tomorrow i guess. now sleep","msgtype":"m.text"},"ts":1318892100000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Hixie, I think we throw because you pass the arguments in the wrong order","msgtype":"m.text"},"ts":1318892101000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"i tried both orders","msgtype":"m.text"},"ts":1318892102000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"targetOrigin comes before transfer","msgtype":"m.text"},"ts":1318892103000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"i tried both orders","msgtype":"m.text"},"ts":1318892104000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hey, check it out. my test was bogus after all and opera is not buggy, and webkit doesn't support both orders","msgtype":"m.text"},"ts":1318892820000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"<-- idiot","msgtype":"m.text"},"ts":1318892821000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"still, opera should throw, and does not, for postMessage('', '*', '*')","msgtype":"m.text"},"ts":1318892880000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"if only you could read what you wrote the first time around","msgtype":"m.text"},"ts":1318892881000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Hixie: throw TypeError?","msgtype":"m.text"},"ts":1318892882000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1318892883000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"cpearce, if fullscreen element or its ancestor is removed from document and that document has descendant documents with non-null fullscreen elements, should we fire events on those documents?","msgtype":"m.text"},"ts":1318893840000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"cpearce, in Gecko per http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1210 that does not even seem possible","msgtype":"m.text"},"ts":1318893841000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"cpearce, also, I guess the other question is in what scenario something like that happens and whether we need to deal with it","msgtype":"m.text"},"ts":1318893842000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: if the descendents change out of full-screen mode due to an ancestor being removed, then yes, we should fire fullscreenchanged in them.","msgtype":"m.text"},"ts":1318893900000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"cpearce, but as my test shows in e.g. Gecko you no longer have Document objects in such a scenario","msgtype":"m.text"},"ts":1318893960000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: hmmm....","msgtype":"m.text"},"ts":1318894020000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"I also sort of fail to see the use case for catching this case, but it's not too hard","msgtype":"m.text"},"ts":1318894021000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"The other question I had was about order of events relative to setting the \"fullscreen element\"","msgtype":"m.text"},"ts":1318894080000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"do you fire the event after you have set/unset \"fullscreen element\" for the entire chain or do you do it per document?","msgtype":"m.text"},"ts":1318894081000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I queue a task to fire the event as I traverse the doc tree making changes.","msgtype":"m.text"},"ts":1318894140000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"I'm in fact firing the change events for enter before change events for exit, but that's easily changeable.","msgtype":"m.text"},"ts":1318894200000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"e.g. say the order becomes top-down when setting and bottom-up when unsetting, if I set and there's two documents, and the event dispatches on the first, the second still has a null fullscreen element?","msgtype":"m.text"},"ts":1318894201000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"The events won't dispatch until all docs in the tree have their fullscreen element set","msgtype":"m.text"},"ts":1318894260000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"but you just said you fire them as you traverse?","msgtype":"m.text"},"ts":1318894261000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"oh, queue a task","msgtype":"m.text"},"ts":1318894262000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"bingo.","msgtype":"m.text"},"ts":1318894263000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"but then you can observe state separately","msgtype":"m.text"},"ts":1318894320000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"how?","msgtype":"m.text"},"ts":1318894321000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"state change* e.g. in mutation events","msgtype":"m.text"},"ts":1318894322000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"or from a timer","msgtype":"m.text"},"ts":1318894380000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"state change and event dispatch should always be coupled I think","msgtype":"m.text"},"ts":1318894381000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"and I guess it makes sense you do it on a per-document basis since they might not be all related browsing contexts","msgtype":"m.text"},"ts":1318894440000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I'm not sure what you mean. All the state change happens in the task which queues tasks to fire the events.","msgtype":"m.text"},"ts":1318894441000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"doesn't that mean you can have other tasks running before the event is dispatched?","msgtype":"m.text"},"ts":1318894500000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yep...","msgtype":"m.text"},"ts":1318894501000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"e.g. in XHR you queue a task to change readyState and dispatch an event","msgtype":"m.text"},"ts":1318894502000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I think pretty much all APIs work that way","msgtype":"m.text"},"ts":1318894560000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"we have the same problem with the video spec, state can change before the event runs.","msgtype":"m.text"},"ts":1318894561000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"but fortunately you can query Document.fullscreen to tell if the target has entered or exited fullscreen...","msgtype":"m.text"},"ts":1318894562000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"I don't really know the media API","msgtype":"m.text"},"ts":1318894680000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"so why not have a single task which changes state and dispatches the event?","msgtype":"m.text"},"ts":1318894740000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: It is simpler to implement with the events queued, since if you dispatch them synchronously in the task to change state, the world could change underneath you in the event handler. I can't really think of any reason from a user's perspective though.","msgtype":"m.text"},"ts":1318894980000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"cpearce, so is requestFullscreen and exitFullscreen fully synchronous then?","msgtype":"m.text"},"ts":1318895160000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: at the moment they are for us.","msgtype":"m.text"},"ts":1318895161000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"we don't have an animation for enter, if you wanted an animation I think you'd need to make them async though.","msgtype":"m.text"},"ts":1318895162000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"yeah, it seems like we would want that down the road","msgtype":"m.text"},"ts":1318895220000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"we have a bug on file for that too.","msgtype":"m.text"},"ts":1318895221000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"I wonder what sicking thinks of changing state sync and notifying async","msgtype":"m.text"},"ts":1318895222000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I guess you pretty much have to change state sync for :fullscreen","msgtype":"m.text"},"ts":1318895340000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"and someone needs to verify for me this doesn't fuck with \"unit of related similar-origin browsing contexts\"","msgtype":"m.text"},"ts":1318895460000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"because I cannot really work it out","msgtype":"m.text"},"ts":1318895461000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I guess it might in a way","msgtype":"m.text"},"ts":1318895520000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"cpearce, what if the top-level browsing context is already busy while you call requestFullscreen, don't you get blockage?","msgtype":"m.text"},"ts":1318895580000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I guess currently there's no multi-process going on for that in Gecko","msgtype":"m.text"},"ts":1318895581000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"mmmm.... we have one process, and are moving to conceptually one process per tab, so that can't happen (I think...).","msgtype":"m.text"},"ts":1318895640000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"and in multi-process firefox I dispatch an event to the chrome process to make it fullscreen, so it is technically async to make the window full-screen, but I've not focused too much on that yet.","msgtype":"m.text"},"ts":1318895700000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"since we're a few months out from enabling multi-process by default.","msgtype":"m.text"},"ts":1318895760000,"senderName":"cpearce","senderId":"cpearce@irc"},
{"content":{"body":"yeah I guess the method can just wait","msgtype":"m.text"},"ts":1318895880000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"you can probably not cause deadlock so I guess it should be okay, but it would be nice if someone could verify","msgtype":"m.text"},"ts":1318895881000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"don't really want to prevent implementations that have multi-process outside per-tab","msgtype":"m.text"},"ts":1318895940000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I think e.g. Chrome wanted to move in that direction","msgtype":"m.text"},"ts":1318895941000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah.","msgtype":"m.text"},"ts":1318895942000,"senderName":"cpearce","senderId":"cpearce@irc"}
]