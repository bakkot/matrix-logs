[
{"content":{"body":"Was following various links and ended up on https://www.w3.org/wiki/IETF_HTML5_Meeting_March_2009 . So interesting to see, considering how things played out.","msgtype":"m.text"},"ts":1524203709000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"‚ÄúIETF does not want to do user interface recommendations‚Äù and yet HTTP does/did","msgtype":"m.text"},"ts":1524206373000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Thanks for finding that","msgtype":"m.text"},"ts":1524206473000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Btw, for those not wanting to deal with git much, GitHub Desktop now allows you to submit commits to all PRs (i.e., including non-local)","msgtype":"m.text"},"ts":1524208524000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Rebasing or cleaning up commits is still some command line from memory adventure though","msgtype":"m.text"},"ts":1524208558000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"zcorpan: yes, the HTML parser in Gecko waits for 1024 bytes or an encoding declaration (incl. BOM)","msgtype":"m.text"},"ts":1524211207000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"Ah, and that'll also apply to text/plain and such","msgtype":"m.text"},"ts":1524211283000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"So if you want to test any kind of streaming there you first have to send 1024 bytes","msgtype":"m.text"},"ts":1524211297000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hmm. I'm not sure that id does","msgtype":"m.text"},"ts":1524211303000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"if it does, it affect text/plain only as a side effect of sharing code with HTML","msgtype":"m.text"},"ts":1524211323000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"I guess it doesn't have to in theory at least as the encoding is derived differently (I haven't tested)","msgtype":"m.text"},"ts":1524211330000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"there isn't anything other than the BOM to wait for in the text/plain case","msgtype":"m.text"},"ts":1524211345000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"it's better to just declare charset on the HTTP layer than to pad by 1024 bytes","msgtype":"m.text"},"ts":1524211430000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: so if I include a BOM or HTTP charset it stops waiting?","msgtype":"m.text"},"ts":1524211504000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"That'd make sense","msgtype":"m.text"},"ts":1524211518000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: it doesn't wait in those cases","msgtype":"m.text"},"ts":1524211554000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"on a different topic: Is the Editor's Draft of Unicode public?","msgtype":"m.text"},"ts":1524211667000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: not that I know, sometimes there's drafts available for technical reports, but even those are not meant to be shared I think","msgtype":"m.text"},"ts":1524212020000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I wish someone would make them publish on GitHub and in HTML...","msgtype":"m.text"},"ts":1524212059000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: OK. I'll ask on the Unicode list to be sure and to express the idea that there's a use case for viewing the Editor's Draft","msgtype":"m.text"},"ts":1524212117000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: version control of some kind would be great too","msgtype":"m.text"},"ts":1524212154000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"use case being optimizing out feedback that's no longer relevant if already addressed","msgtype":"m.text"},"ts":1524212169000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: a public issue tracker would also help with that","msgtype":"m.text"},"ts":1524212209000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yes","msgtype":"m.text"},"ts":1524212215000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: where you can have some actual dialogue with folks...","msgtype":"m.text"},"ts":1524212220000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"the issue tracking is public but without search or interaction","msgtype":"m.text"},"ts":1524212235000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"anyway, I think I might send feedback on two things:","msgtype":"m.text"},"ts":1524212269000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"gsnedders, jgraham: https://github.com/servo/servo/blob/wptup/tests/wpt/web-platform-tests/tools/wptrunner/wptrunner/environment.py#L145:L149 It seems like 'wss' is lacking there.","msgtype":"m.text"},"ts":1524212287000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"1) to request informative discussion of alignment issues of reading in UTF-16 or UTF-32 in addition to the current discussion of endianness issues","msgtype":"m.text"},"ts":1524212305000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"2) to request an informative remark pointing the Encoding Standard and the security principle embodied by the encoding standard when it comes to securely decoding multi-byte legacy encodings in the case where the trail byte of an unmappable pair is in the ASCII range","msgtype":"m.text"},"ts":1524212384000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"\"The state of registerProtocolHandler\" there's someone else who cares \\o/","msgtype":"m.text"},"ts":1524212410000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"is looking at BlinkOn lightning talks","msgtype":"m.emote"},"ts":1524212420000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"well, slides","msgtype":"m.text"},"ts":1524212428000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hsivonen: what do you mean by 1?","msgtype":"m.text"},"ts":1524212483000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: when ingesting UTF-16 data from a byte-oriented I/O source, you not only need to make sure the endianness is right and that there are no unpaired surrogates. You also need to arrange the data to start from an even memory address","msgtype":"m.text"},"ts":1524212674000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"annevk: that is, UTF-16 and UTF-32 are even worse as on-disk or over-the-network representations than the Unicode Standard suggests","msgtype":"m.text"},"ts":1524212721000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: I'm afraid I don't understand the \"even memory address\" bit","msgtype":"m.text"},"ts":1524212846000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: even as in not odd","msgtype":"m.text"},"ts":1524212858000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"annevk: a memory address whose least significant bit is zero","msgtype":"m.text"},"ts":1524212869000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: I sorta got that, but I don't understand why","msgtype":"m.text"},"ts":1524212916000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: many CPU architectures and practically all programming languages require data to be aligned such that if you want to read a 16-bit unit in the usual way, it has to reside on a every-16-bits boundary","msgtype":"m.text"},"ts":1524213008000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"annevk: even where that might not be true for x86, it's true for C (and C++ and Rust) on x86","msgtype":"m.text"},"ts":1524213032000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: interesting; if I'm not mistaken the way JavaScript deals with bytes does not require that","msgtype":"m.text"},"ts":1524213046000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(e.g. the compiler is allowed to autovectorize on that assumption)","msgtype":"m.text"},"ts":1524213062000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"the offset on the ArrayBuffer on which you create a view can be arbitrary","msgtype":"m.text"},"ts":1524213070000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: in that case, ArrayBuffer views can't use the default read/write operations from C++ or on some architectures even in the JIT code","msgtype":"m.text"},"ts":1524213125000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"https://tc39.github.io/ecma262/#sec-typedarray-buffer-byteoffset-length fwiw","msgtype":"m.text"},"ts":1524213259000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"So instead of a byteOffset a wordOffset or some such would have been a faster design?","msgtype":"m.text"},"ts":1524213287000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Anyway, thanks for the lesson üòÉ","msgtype":"m.text"},"ts":1524213323000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: step 7","msgtype":"m.text"},"ts":1524213391000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"\"If offset modulo elementSize ‚â† 0, throw a RangeError exception.\"","msgtype":"m.text"},"ts":1524213408000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"annevk: so unaligned offsets are not allowed","msgtype":"m.text"},"ts":1524213425000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"oh, thanks for that additional lesson","msgtype":"m.text"},"ts":1524213445000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"the DataView API is suggestive of things being potentially slower than usual array accesses","msgtype":"m.text"},"ts":1524213460000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"annevk: you're welcome","msgtype":"m.text"},"ts":1524213476000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"I think the main aspect that makes ArrayBuffer slow (or hard to optimize for) is that it can be detached","msgtype":"m.text"},"ts":1524213522000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"mkwst: you around?","msgtype":"m.text"},"ts":1524219618000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"mkwst: I'm wondering whether you're gonna do another pass on https://github.com/whatwg/fetch/pull/715 or not","msgtype":"m.text"},"ts":1524219631000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: /html/browsers/browsing-the-web/scroll-to-fragid/replacement-enabled.html seems to be your test; we are having to disable it in gecko for being flaky","msgtype":"m.text"},"ts":1524227184000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Link to source? I'm on mobile.","msgtype":"m.text"},"ts":1524227573000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Well, file an issue I guess, and we can dig into whether the spec says the test should be nondeterministic, or if it's a Firefox bug.","msgtype":"m.text"},"ts":1524227833000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic, https://github.com/w3c/web-platform-tests/blob/master/html/browsers/browsing-the-web/scroll-to-fragid/replacement-enabled.html","msgtype":"m.text"},"ts":1524227843000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: Thanks","msgtype":"m.text"},"ts":1524227857000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Filed an issue","msgtype":"m.text"},"ts":1524227920000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Hmm seems like the issue is the Firefox bug mentioned in the test comment","msgtype":"m.text"},"ts":1524227937000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Maybe just increase from 100 to a larger number","msgtype":"m.text"},"ts":1524227952000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Oh you had a sneaky way of writing setTimeout","msgtype":"m.text"},"ts":1524228021000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"OK, that might help. Thanks","msgtype":"m.text"},"ts":1524228045000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"wanderview: domfarolino: if it helps I can land the same-origin change (and test)","msgtype":"m.text"},"ts":1524232199000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"wanderview: domfarolino: it seems folks want this to move forward and it seems unlikely it'll break things","msgtype":"m.text"},"ts":1524232220000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: works for me... or I was just going to do the test changes locally and sync up","msgtype":"m.text"},"ts":1524232232000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: which way you prefer?","msgtype":"m.text"},"ts":1524232260000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jgraham: if annevk lands some test changes upstream and I land the same changes in gecko... will we breach the warp core?","msgtype":"m.text"},"ts":1524232314000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: That is supposed to work these days","msgtype":"m.text"},"ts":1524232496000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"cool","msgtype":"m.text"},"ts":1524232509000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"annevk: I'd say go ahead and land them then","msgtype":"m.text"},"ts":1524232516000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"So hopefully not, but maybe? :)","msgtype":"m.text"},"ts":1524232517000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"(go for it, I'll be able to fix if there's a problem)","msgtype":"m.text"},"ts":1524232528000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"wanderview: Although I see you  haven't looked at the trees today","msgtype":"m.text"},"ts":1524232538000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Landing stuff in Gecko isn't possible :)","msgtype":"m.text"},"ts":1524232551000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: I guess that makes things easier","msgtype":"m.text"},"ts":1524232569000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"jgraham: btw, I don't recall seeing a gecko sync bug for this one? https://github.com/w3c/web-platform-tests/pull/10536","msgtype":"m.text"},"ts":1524232639000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"maybe due to the tree sadness","msgtype":"m.text"},"ts":1524232646000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: https://bugzilla.mozilla.org/show_bug.cgi?id=1455367 I think?","msgtype":"m.text"},"ts":1524232747000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: thanks!","msgtype":"m.text"},"ts":1524232762000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"jgraham: I see... it hasn't been moved to Core yet, so my search didn't find it","msgtype":"m.text"},"ts":1524232781000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"Ooh, I had already filed browser bugs too","msgtype":"m.text"},"ts":1524232857000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jgraham: although I'm having trouble finding the test changes in the try build on that bug...","msgtype":"m.text"},"ts":1524232959000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: I'll check after my meeting. I did notice some odd-looking try messages this morning","msgtype":"m.text"},"ts":1524233053000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"thanks","msgtype":"m.text"},"ts":1524233132000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"updates Edge and Safari bugs","msgtype":"m.emote"},"ts":1524233150000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: if it makes you feel any better the change to same-origin credentials blew up a bunch of internal gecko tests","msgtype":"m.text"},"ts":1524233815000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: makes me sad for you mostly (and a little sad we still have some many non-upstreamed stuff)","msgtype":"m.text"},"ts":1524234371000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"so much","msgtype":"m.text"},"ts":1524234378000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: its mostly duplicative of the WPT changes","msgtype":"m.text"},"ts":1524234662000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: it's not just worker module scripts btw; it's module scripts in general: https://github.com/whatwg/html/issues/2557","msgtype":"m.text"},"ts":1524234892000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"wanderview: I'll see if I can work out the spec changes later today for those","msgtype":"m.text"},"ts":1524234930000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ok","msgtype":"m.text"},"ts":1524234939000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"annevk: I don't think we ship modules for a few weeks... probably too far along to fix it before shipping, though","msgtype":"m.text"},"ts":1524234959000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"of course, everyone else has already shipped I think","msgtype":"m.text"},"ts":1524234966000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: yeah, as with fetch() I guess the upside will be that more things will work","msgtype":"m.text"},"ts":1524235061000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"wanderview: and maybe it's better to make the changes separately to measure impact separately (and maybe ensure tests)","msgtype":"m.text"},"ts":1524235092000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"wanderview: Simpson's GIFs will continue until morale improves","msgtype":"m.text"},"ts":1524235691000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yea...","msgtype":"m.text"},"ts":1524235736000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"annevk: thanks for landing that wpt PR, will get up to date on some of the surrounding stuff soon","msgtype":"m.text"},"ts":1524251487000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"domfarolino: thanks for looking at the tests... I had some time so I pushed the change through on the firefox side today","msgtype":"m.text"},"ts":1524253642000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: of course. Awesome, will be getting to finishing chrome shortly.","msgtype":"m.text"},"ts":1524255744000,"senderName":"domfarolino","senderId":"domfarolino@irc"}
]