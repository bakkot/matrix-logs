[
{"content":{"body":"muteki: without CORS, no site can make any cross-origin XHR/Fetch request from JavaScript to another site, period","msgtype":"m.text"},"ts":1513297688000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"browsers by default block all scripted cross-origin requests","msgtype":"m.text"},"ts":1513297753000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"CORS allows sites to opt-in to telling browsers that they are OK with receiving cross-origin requests","msgtype":"m.text"},"ts":1513297800000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"actually “browsers by default block all scripted cross-origin requests” is not quite correct","msgtype":"m.text"},"ts":1513297851000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"more accurately, browsers block frontend JavaScript code from accessing the response to any cross-origin request","msgtype":"m.text"},"ts":1513297900000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"so you can make a cross-origin GET request to another site, but unless the site sends back teh Access-Control-Allow-Origin response header, your browser blocks your JavaScript code from accessing the response","msgtype":"m.text"},"ts":1513297988000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: my bad, I was reading annevk's blog so what I meant is really without SOP, then CORS comes in and with CORS...","msgtype":"m.text"},"ts":1513298687000,"senderName":"muteki","senderId":"muteki@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1513298701000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"muteki: you might find https://w3c.github.io/webappsec-cors-for-developers/ worth reading","msgtype":"m.text"},"ts":1513298784000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: yeah, I think your differentiation of allowing javascript to process the code v.s. issuing request+getting response are two separate things that I was confused initially","msgtype":"m.text"},"ts":1513298819000,"senderName":"muteki","senderId":"muteki@irc"},
{"content":{"body":"yeah that is non-intuitive really","msgtype":"m.text"},"ts":1513298834000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I mean, by default you can even successfully make POST requests cross-origin","msgtype":"m.text"},"ts":1513298859000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"yeah, there is nothing really to protect that unless one leverages the preflight requirement","msgtype":"m.text"},"ts":1513298905000,"senderName":"muteki","senderId":"muteki@irc"},
{"content":{"body":"right, as long as your request doesn’t add any headers or set to the Content-Type header to application/json or something, then any POST request will succeed cross-origin","msgtype":"m.text"},"ts":1513298916000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"anyway I guess the https://w3c.github.io/webappsec-cors-for-developers/#csrf section in particular is where the problem case is explained","msgtype":"m.text"},"ts":1513298986000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"ok, thanks, let me read about it","msgtype":"m.text"},"ts":1513298999000,"senderName":"muteki","senderId":"muteki@irc"},
{"content":{"body":"the last paragraph of https://stackoverflow.com/questions/34650915/it-seems-the-pre-flight-for-cors-doesnt-make-sense-is-it-a-joke/34668785#34668785 from Domenic is also a very good succinct explanation","msgtype":"m.text"},"ts":1513299074000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"and https://stackoverflow.com/questions/9222822/why-do-browser-apis-restrict-cross-domain-requests/9223680#9223680 is very good too","msgtype":"m.text"},"ts":1513299126000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"thanks so much, I think I have a better idea what CORS really provide and the rationale behind using it","msgtype":"m.text"},"ts":1513299589000,"senderName":"muteki","senderId":"muteki@irc"},
{"content":{"body":"I that last link also implies why normal cross-origin img request via <img> tag is ok but canvas img loading is not ok....  (have been wondering that for a while) (because canvas can read back the img and potentially send it back to the bad site)","msgtype":"m.text"},"ts":1513300239000,"senderName":"muteki","senderId":"muteki@irc"},
{"content":{"body":"correction: canvas image loading is ok, but once tainted, can't pull data out","msgtype":"m.text"},"ts":1513300515000,"senderName":"muteki","senderId":"muteki@irc"},
{"content":{"body":"Domenic: about the checker problem that broke the HTML spec build, in https://github.com/w3c/web-platform-tests/commit/bf24230 I added a test to make sure it doesn’t regress","msgtype":"m.text"},"ts":1513302994000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: any clue about https://stackoverflow.com/questions/47158940/include-authorization-header-using-fetch-api-post-method","msgtype":"m.text"},"ts":1513322704000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Hmm, Ryosuke suggested somewhere else than Toronto, any idea if we do elsewhere?","msgtype":"m.text"},"ts":1513329254000,"senderName":"kochi","senderId":"kochi@irc"},
{"content":{"body":"kochi: where was that discussed?","msgtype":"m.text"},"ts":1513329807000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: https://github.com/w3c/webcomponents/issues/713","msgtype":"m.text"},"ts":1513329832000,"senderName":"kochi","senderId":"kochi@irc"},
{"content":{"body":"hmm, I'm so not getting emails about that issue","msgtype":"m.text"},"ts":1513329855000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"even though I'm subscribed :/","msgtype":"m.text"},"ts":1513329869000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: I thought you preferred somewhere in Europe","msgtype":"m.text"},"ts":1513329876000,"senderName":"kochi","senderId":"kochi@irc"},
{"content":{"body":"oh, now I got it","msgtype":"m.text"},"ts":1513329878000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"strange, I explicitly mentioned @smaug---- in my comment.","msgtype":"m.text"},"ts":1513329913000,"senderName":"kochi","senderId":"kochi@irc"},
{"content":{"body":"(there are direct flights from Helsinki to Tokyo, so it wouldn't be too hard for me)","msgtype":"m.text"},"ts":1513330099000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"Though, Google does have offices in London. Any blink folks there?","msgtype":"m.text"},"ts":1513330265000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"I think so","msgtype":"m.text"},"ts":1513330316000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"-> out","msgtype":"m.text"},"ts":1513330386000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"yes, Google has London office, and has Chrome people there.","msgtype":"m.text"},"ts":1513330627000,"senderName":"kochi","senderId":"kochi@irc"},
{"content":{"body":"London wouldn't be hard for me.","msgtype":"m.text"},"ts":1513330655000,"senderName":"kochi","senderId":"kochi@irc"},
{"content":{"body":"But I've never been there ;)","msgtype":"m.text"},"ts":1513330663000,"senderName":"kochi","senderId":"kochi@irc"},
{"content":{"body":"smaug____: beverloo and I work at Google in London","msgtype":"m.text"},"ts":1513331026000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"(although I don't work on blink)","msgtype":"m.text"},"ts":1513331056000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"So now Berlin (Mozilla), London (Google), Tokyo (Google), Toronto (Mozilla) are the options.","msgtype":"m.text"},"ts":1513331145000,"senderName":"kochi","senderId":"kochi@irc"},
{"content":{"body":"How the weather in Berlin in February/March?","msgtype":"m.text"},"ts":1513331187000,"senderName":"kochi","senderId":"kochi@irc"},
{"content":{"body":"Dan Abramov of React is in London too","msgtype":"m.text"},"ts":1513331236000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"Is London not as bad as Toronto in Feb/Mar?","msgtype":"m.text"},"ts":1513331462000,"senderName":"kochi","senderId":"kochi@irc"},
{"content":{"body":"Winters in southern UK aren't particularly serious. We very rarely get snow.","msgtype":"m.text"},"ts":1513331759000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"Then it's like Tokyo, or better maybe. We have snow once or twice a year.","msgtype":"m.text"},"ts":1513332167000,"senderName":"kochi","senderId":"kochi@irc"},
{"content":{"body":"is there any way to make Fetch compress the request body?","msgtype":"m.text"},"ts":1513339092000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"rbyers: any update on https://bugs.webkit.org/show_bug.cgi?id=5991#c17 ? :-)","msgtype":"m.text"},"ts":1513341551000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"doesn't understand what is wrong with snow ;)","msgtype":"m.emote"},"ts":1513341551000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"Not very relevant but you could also use the Mozilla London office for a SW meeting if you wanted.","msgtype":"m.text"},"ts":1513341552000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"There is Paris too. :P","msgtype":"m.text"},"ts":1513341591000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"jgraham: this is webcomponents, and thought there might be a bit too many people possibly coming","msgtype":"m.text"},"ts":1513341592000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: Ah. Well yeah I guess more than ~20 would be hard","msgtype":"m.text"},"ts":1513341761000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Maybe there won't be too many, but it is unclear still","msgtype":"m.text"},"ts":1513341788000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"Google is probably a better bet in London, just making sure you have options :)","msgtype":"m.text"},"ts":1513341789000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Does Google still have the office on the Buckingham Palace's backyard?","msgtype":"m.text"},"ts":1513341843000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"looks like so","msgtype":"m.text"},"ts":1513341923000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"annevk: is html5.org yours? is it really based on https://github.com/whatwg/misc-server/tree/master/html5.org?","msgtype":"m.text"},"ts":1513342290000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"foolip: it's not automatically deployed, but I try to keep those directories synchronized","msgtype":"m.text"},"ts":1513342351000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: OK, was thinking about deleting that, but I won't then","msgtype":"m.text"},"ts":1513342367000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"(In the context of maybe merging misc-server into whatwg.org/config/","msgtype":"m.text"},"ts":1513342382000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"They're kind of interdependent now...","msgtype":"m.text"},"ts":1513342404000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"You could just leave this in misc-server for now I suppose","msgtype":"m.text"},"ts":1513342431000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Just html5.org? That'd work, yeah.","msgtype":"m.text"},"ts":1513342446000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"I'm also happy to move it elsewhere, but not this week","msgtype":"m.text"},"ts":1513342455000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Nope, doesn't really matter.","msgtype":"m.text"},"ts":1513342463000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"wanderview: When did e10s become the default in Firefox?","msgtype":"m.text"},"ts":1513353985000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: single content process or multiple content processes?","msgtype":"m.text"},"ts":1513354003000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"JakeA: its actually a hard question to answer because it was a gradual rollout with all kinds of exceptions","msgtype":"m.text"},"ts":1513354023000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"JakeA: 57 may be the real first release where 100% users have e10s on desktop because legacy addons blocked e10s for many users","msgtype":"m.text"},"ts":1513354047000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: I guess I'm asking, when did JS in one tab stop blocking JS in an unrelated tab?","msgtype":"m.text"},"ts":1513354061000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: we enabled 4 content processes in FF54, but many users may not have seen that because of addons, etc: https://medium.com/mozilla-tech/the-search-for-the-goldilocks-browser-and-why-firefox-may-be-just-right-for-you-1f520506aa35","msgtype":"m.text"},"ts":1513354134000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"JakeA: pages that get put in the same process can still block each other","msgtype":"m.text"},"ts":1513354153000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: gotcha, cheers!","msgtype":"m.text"},"ts":1513354195000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: we have \"quantum DOM\" plans to fix that within a process, but its not ready yet","msgtype":"m.text"},"ts":1513354233000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: so does Firefox now create a new process per event loop?","msgtype":"m.text"},"ts":1513354305000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: no... we create up to four processes and assign tabs to them somewhat randomly","msgtype":"m.text"},"ts":1513354336000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: ahh ok, gotcha, thanks!","msgtype":"m.text"},"ts":1513354349000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: not sure if it matters or not, but we have a thing in \"Menu->Options search for perf\" that lets you choose up to 7 processes or as few as 2 processes","msgtype":"m.text"},"ts":1513354695000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"oh, it goes down to1 now","msgtype":"m.text"},"ts":1513354716000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"foolip: several times over the last couple of days I've browsed through wpt.fyi and found failing-in-all-four-browsers tests that seem pretty clearly incorrect. I guess I'll file bugs, but are you perhaps working on a larger project to canvas those?","msgtype":"m.text"},"ts":1513361569000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: we're not planning a repo-wide effort like that, but it is the obvious place to start if trying to improve the test suite itself as opposed to implementations","msgtype":"m.text"},"ts":1513361687000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"Hmm OK","msgtype":"m.text"},"ts":1513361697000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: as a start, https://metrics5-dot-wptdashboard.appspot.com/metrics/ will make it easy to find them","msgtype":"m.text"},"ts":1513361770000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"Ah nice","msgtype":"m.text"},"ts":1513361782000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"That'll become the default view (after some polish)","msgtype":"m.text"},"ts":1513361833000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"Hmm I guess the reliability of the data really hurts this","msgtype":"m.text"},"ts":1513362205000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"E.g. Firefox randomly missing results","msgtype":"m.text"},"ts":1513362209000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Or maybe it's just too beta","msgtype":"m.text"},"ts":1513362241000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"E.g. https://metrics5-dot-wptdashboard.appspot.com/metrics/dom/nodes/prepend-on-Document.html says there are 7 tests one of which passes nowhere, but there are 5 tests and they all pass in at least Firefox.","msgtype":"m.text"},"ts":1513362256000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: run cadance and completeness of results is a P1 for us, it'll get good.","msgtype":"m.text"},"ts":1513378290000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"Domenic: oh, but that might be a bug","msgtype":"m.text"},"ts":1513378314000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"Domenic: I told mditty (hi!) and there are actually 7 rows there","msgtype":"m.text"},"ts":1513382293000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"Domenic: The metrics view is showing all 7 rows listed at https://metrics5-dot-wptdashboard.appspot.com/dom/nodes/prepend-on-Document.html","msgtype":"m.text"},"ts":1513382357000,"senderName":"mditty","senderId":"mditty@irc"},
{"content":{"body":"Confusing bit is that testharness.js tests all get an extra line for the harness status, and that not the same commit of wpt was run on all browsers, so the last line is Edge only","msgtype":"m.text"},"ts":1513382391000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"It looks like Edge is the only one with a subtest named \"DocumentType.prepend\"","msgtype":"m.text"},"ts":1513382393000,"senderName":"mditty","senderId":"mditty@irc"}
]