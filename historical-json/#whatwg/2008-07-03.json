[
{"content":{"body":"jacobolus: http://krijnhoetmer.nl/irc-logs/whatwg/20080702#l-282","msgtype":"m.text"},"ts":1215051120000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: that may be, but that limits what you can do","msgtype":"m.text"},"ts":1215051300000,"senderName":"jacobolus","senderId":"jacobolus@irc"},
{"content":{"body":"Philip`: it's quite useful to draw a bit, then transform, then draw a bit more (in the same path)","msgtype":"m.text"},"ts":1215051360000,"senderName":"jacobolus","senderId":"jacobolus@irc"},
{"content":{"body":"Philip`: that spec wording you pasted in that chat seems about right to me, and is sufficiently explicit.  cool.","msgtype":"m.text"},"ts":1215051420000,"senderName":"jacobolus","senderId":"jacobolus@irc"},
{"content":{"body":"jacobolus: Only Opera prevents you from doing that, and nobody uses Opera so you could ignore it ;-)","msgtype":"m.text"},"ts":1215051421000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"yep","msgtype":"m.text"},"ts":1215051480000,"senderName":"jacobolus","senderId":"jacobolus@irc"},
{"content":{"body":"that's the plan","msgtype":"m.text"},"ts":1215051481000,"senderName":"jacobolus","senderId":"jacobolus@irc"},
{"content":{"body":"uses Opera :-(","msgtype":"m.emote"},"ts":1215051482000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: so my little test thing at http://www.orbited.org/wiki/CanvasShapes won’t work for you then","msgtype":"m.text"},"ts":1215051483000,"senderName":"jacobolus","senderId":"jacobolus@irc"},
{"content":{"body":"or rather, it will only draw circles","msgtype":"m.text"},"ts":1215051540000,"senderName":"jacobolus","senderId":"jacobolus@irc"},
{"content":{"body":"jacobolus: That's what happens in Opera, though I can trivially switch to Firefox to see it properly :-)","msgtype":"m.text"},"ts":1215051600000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"jacobolus: The arc() call for drawing circles should probably use false (clockwise) instead of true, else (according to the spec) it might (if Math.PI > π) draw nothing instead of a circle","msgtype":"m.text"},"ts":1215051780000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"okay","msgtype":"m.text"},"ts":1215051781000,"senderName":"jacobolus","senderId":"jacobolus@irc"},
{"content":{"body":"(because of the way angles get wrapped, depending on the clockwisity and the angles)","msgtype":"m.text"},"ts":1215051840000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: I would expect one of arc(x, y, radius, 0, 0, false) and arc(x, y, radius, 0, 0, true) to draw a whole circle","msgtype":"m.text"},"ts":1215051841000,"senderName":"jacobolus","senderId":"jacobolus@irc"},
{"content":{"body":"but both just do nothing","msgtype":"m.text"},"ts":1215051842000,"senderName":"jacobolus","senderId":"jacobolus@irc"},
{"content":{"body":"(Hmm, maybe \"clockwisdom\" is a better term)","msgtype":"m.text"},"ts":1215051843000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"hehe","msgtype":"m.text"},"ts":1215051844000,"senderName":"jacobolus","senderId":"jacobolus@irc"},
{"content":{"body":"arc() is a bit weird and unintuitive","msgtype":"m.text"},"ts":1215051960000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"but it's implemented interoperably in Firefox and WebKit, so I guess there'd need to be strong justification for changing the spec to not match those implementations","msgtype":"m.text"},"ts":1215052020000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: hmm, if I use a bit more than 2π for the second angle, it draws most of a circle whether I use true or false","msgtype":"m.text"},"ts":1215052560000,"senderName":"jacobolus","senderId":"jacobolus@irc"},
{"content":{"body":"jacobolus: Argh","msgtype":"m.text"},"ts":1215053040000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"You are entirely right, and that is the expected behaviour","msgtype":"m.text"},"ts":1215053041000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"I just get this all mixed up every time I look at arc() :-/","msgtype":"m.text"},"ts":1215053042000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"I remember not enough to be correct, but enough to be dangerous","msgtype":"m.text"},"ts":1215053043000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: is there a mathy explanation of how arc is supposed to work?","msgtype":"m.text"},"ts":1215053100000,"senderName":"jacobolus","senderId":"jacobolus@irc"},
{"content":{"body":"jacobolus: What do you consider \"mathy\"?","msgtype":"m.text"},"ts":1215053101000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"(particularly compared to what's in the spec already)","msgtype":"m.text"},"ts":1215053102000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"just unambiguous.  I haven't read what the spec says about arc :)","msgtype":"m.text"},"ts":1215053103000,"senderName":"jacobolus","senderId":"jacobolus@irc"},
{"content":{"body":"If start->end is clockwise (i.e. end > start), and anticlockwise=false, then it draws all the way from start to end and possibly goes all the way around the circle (though at most once); and if anticlockwise=true, then the angles are wrapped modulo 2pi and the shortest anticlockwise arc from start to end is drawn","msgtype":"m.text"},"ts":1215053280000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"and same if you swap all mentions of 'clockwise' and 'anticlockwise'","msgtype":"m.text"},"ts":1215053281000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"or at least I think that's what it is","msgtype":"m.text"},"ts":1215053282000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Oh, maybe the problem is if Math.PI < π, because drawing anticlockwise from 0 to 2π-ε would draw an ε-long line instead of a circle","msgtype":"m.text"},"ts":1215053460000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"But I could still be wrong, so I'll just give up and go to bed :-)","msgtype":"m.text"},"ts":1215053461000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: yes, that is true","msgtype":"m.text"},"ts":1215053580000,"senderName":"jacobolus","senderId":"jacobolus@irc"},
{"content":{"body":"Philip`: if you have Math.PI < π then arc(x, y, radius, 0, 2*Math.PI, true) draws nothing","msgtype":"m.text"},"ts":1215053640000,"senderName":"jacobolus","senderId":"jacobolus@irc"},
{"content":{"body":"so you’re right, to draw a circle I should use false","msgtype":"m.text"},"ts":1215053641000,"senderName":"jacobolus","senderId":"jacobolus@irc"},
{"content":{"body":"Drawing circles is quite irritatingly complex","msgtype":"m.text"},"ts":1215053760000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Anyway, good night for now","msgtype":"m.text"},"ts":1215053761000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"'night","msgtype":"m.text"},"ts":1215053820000,"senderName":"jacobolus","senderId":"jacobolus@irc"},
{"content":{"body":"thanks","msgtype":"m.text"},"ts":1215053821000,"senderName":"jacobolus","senderId":"jacobolus@irc"},
{"content":{"body":"\"Because of the number of legacy servers on the web (e.g. those that serve all files as text/plain) MIME-sniffing is an important compatibility feature.\"","msgtype":"m.text"},"ts":1215075060000,"senderName":"gDashiva","senderId":"gDashiva@irc"},
{"content":{"body":"Are these text/plain web servers related to hsivonen's transcoding proxies?","msgtype":"m.text"},"ts":1215075061000,"senderName":"gDashiva","senderId":"gDashiva@irc"},
{"content":{"body":"hsivonen: the most common errors i get are (1) mistyping the start tag (e.g. missing the leading <), and (2) getting hte wrong end tag.","msgtype":"m.text"},"ts":1215076260000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"these two errors both cause an inordinate number of errors to be reported and none of them really say what the actual mistake was.","msgtype":"m.text"},"ts":1215076261000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"e.g. <p> foo var title=\"\">x</vsr> </p>  and  <p> <a href=\"\">x</span> </p>","msgtype":"m.text"},"ts":1215076320000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I had a similar experience with the validator","msgtype":"m.text"},"ts":1215076321000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"although the mistake was missing close \"","msgtype":"m.text"},"ts":1215076380000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"the wrong end tag for an inline element in particular cascades into an error for almost every block-level element in the tree from the point of the error on.","msgtype":"m.text"},"ts":1215076440000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"which is exciting when the error is half way down the html5 spec","msgtype":"m.text"},"ts":1215076441000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"first draft of Web Sockets has now been completely defined","msgtype":"m.text"},"ts":1215076680000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: that sounds great.  I'll take a look tomorrow morning","msgtype":"m.text"},"ts":1215076740000,"senderName":"jacobolus","senderId":"jacobolus@irc"},
{"content":{"body":"http://www.whatwg.org/specs/web-apps/current-work/#network","msgtype":"m.text"},"ts":1215076860000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Lachy_: just listend to the podcast on the web, and i think you did great!","msgtype":"m.text"},"ts":1215077400000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: recorded http://bugzilla.validator.nu/show_bug.cgi?id=258","msgtype":"m.text"},"ts":1215077520000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"cool","msgtype":"m.text"},"ts":1215077521000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie, really? I couldn't listen to it all. The sound of my own voice is irritating.","msgtype":"m.text"},"ts":1215077640000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"heh","msgtype":"m.text"},"ts":1215078060000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"it was fine as far as i could tell :-)","msgtype":"m.text"},"ts":1215078061000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"one's own voice is often found to irritate one","msgtype":"m.text"},"ts":1215078062000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I tend to say um and ah far too often, at least at the beginning","msgtype":"m.text"},"ts":1215078120000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"I need to practice more","msgtype":"m.text"},"ts":1215078121000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"eh, everyone does :-)","msgtype":"m.text"},"ts":1215078122000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"you should hear my talks, i'm terrible","msgtype":"m.text"},"ts":1215078123000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"have you got any recorded?","msgtype":"m.text"},"ts":1215078124000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"not publicly :-)","msgtype":"m.text"},"ts":1215078360000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"right bed time","msgtype":"m.text"},"ts":1215078480000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"nn","msgtype":"m.text"},"ts":1215078481000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Lachy: It's a bit hard to comment, since I already know the topic, so I can't comment what it souded like to someone who doesn't.","msgtype":"m.text"},"ts":1215078660000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"Lachy: you did go a bit easy (non-controversially) on the XHTML vs. HTML question","msgtype":"m.text"},"ts":1215078661000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"(wow, julian was fast at sending that complaint about the Web Socket Protocol)","msgtype":"m.text"},"ts":1215078720000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hsivonen, of course I did. If I said anything bad about XHTML, think of the complaints I'd be getting from certain people","msgtype":"m.text"},"ts":1215079080000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"gotta go, bbl","msgtype":"m.text"},"ts":1215079140000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"Hixie: specifying the bytes is not really helpful to implementors (I don't think anyone will put an array of hex values in their code instead of a string)","msgtype":"m.text"},"ts":1215079380000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"othermaciej: for another part of the spec I did and later regretted","msgtype":"m.text"},"ts":1215079381000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"(not an array actually, but individual numbers)","msgtype":"m.text"},"ts":1215079440000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"yikes","msgtype":"m.text"},"ts":1215079500000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"I don't understand also why validating the response depends on details that are irrelevant from the HTTP point of view","msgtype":"m.text"},"ts":1215079560000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"that makes it harder to make a module for an existing web server that would implement this on the same port as the normal connection","msgtype":"m.text"},"ts":1215079620000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"seems like gratuitous draconianism (but maybe I am missing the motivation)","msgtype":"m.text"},"ts":1215079680000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"also the fact that it defaults to a weird port and doesn't rely on same-origin security at all partly misses the point of making it look like HTTP","msgtype":"m.text"},"ts":1215079740000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"I guess I can send email tomorrow","msgtype":"m.text"},"ts":1215079860000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"good evening","msgtype":"m.text"},"ts":1215081480000,"senderName":"mcarter","senderId":"mcarter@irc"},
{"content":{"body":"What is the browser supposed to do, when an author sets contenteditable for <title></title>?","msgtype":"m.text"},"ts":1215093540000,"senderName":"Windstoss","senderId":"Windstoss@irc"},
{"content":{"body":"Hixie, \"their originating server\" seems false, as it clearly allows cross-origin","msgtype":"m.text"},"ts":1215093600000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Windstoss, make it editable?","msgtype":"m.text"},"ts":1215093660000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Windstoss: same as any other element i guess","msgtype":"m.text"},"ts":1215093720000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Philip`: is there an easy way to sort the canvas results table so that tests that fail across the board are at the top, tests with 1 pass next, 2 passes next, and so forth?","msgtype":"m.text"},"ts":1215094260000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: The easy way is to just write a script that sorts them based on the class names, I would expect","msgtype":"m.text"},"ts":1215094920000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: ok","msgtype":"m.text"},"ts":1215094980000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: probably something like http://philip.html5.org/misc/canvas-table-sort.txt but less rubbish","msgtype":"m.text"},"ts":1215095100000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: thanks, you're faster than me :)","msgtype":"m.text"},"ts":1215095340000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"JS needs an operator like Perl's <=> and cmp","msgtype":"m.text"},"ts":1215095460000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"zcorpan: (Updated the script to give nicer output now)","msgtype":"m.text"},"ts":1215095760000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: thanks","msgtype":"m.text"},"ts":1215096120000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"http://simon.html5.org/dump/canvas-results-sorted.html","msgtype":"m.text"},"ts":1215096180000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"i think i'll go through the top ones and see if it makes sense to change the spec","msgtype":"m.text"},"ts":1215096240000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"It'd probably be sensible to ignore the Excanvas column","msgtype":"m.text"},"ts":1215096300000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"yeah but it's mostly fail anyway :)","msgtype":"m.text"},"ts":1215096360000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"is it defined somewhere what should happen in general with too few or too many arguments?","msgtype":"m.text"},"ts":1215096420000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: http://www.whatwg.org/specs/web-apps/current-work/multipage/infrastructure.html#common","msgtype":"m.text"},"ts":1215096480000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"wonder if it would be useful to have a standard exception for not enough arguments","msgtype":"m.text"},"ts":1215096840000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"that is different from NOT_SUPPORTED_ERR","msgtype":"m.text"},"ts":1215096841000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"if the use case is testing, no :)","msgtype":"m.text"},"ts":1215096960000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"WRONG_ARITY_ERR","msgtype":"m.text"},"ts":1215096961000,"senderName":"gDashiva","senderId":"gDashiva@irc"},
{"content":{"body":"well debugging for authors","msgtype":"m.text"},"ts":1215097020000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"\"not enough arguments\" is more helpful than \"NOT_SUPPORTED_ERR\" when the author looks in the error console to figure out why it doesn't work","msgtype":"m.text"},"ts":1215097080000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"usually exceptions have some message that could be more detailed","msgtype":"m.text"},"ts":1215097081000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"oh that's true","msgtype":"m.text"},"ts":1215097082000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"ok","msgtype":"m.text"},"ts":1215097083000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"hmm, is the imageData stuff not implemented yet?","msgtype":"m.text"},"ts":1215098100000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"it is","msgtype":"m.text"},"ts":1215098220000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"though in varying degree","msgtype":"m.text"},"ts":1215098221000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"now i wonder, should i post my notes to whatwg, public-html or file a bug?","msgtype":"m.text"},"ts":1215098880000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"posts to whatwg","msgtype":"m.emote"},"ts":1215098940000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: Nobody implements it all, as far as I'm aware","msgtype":"m.text"},"ts":1215099060000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Hixie, yt? any idea whether we postponed the meeting to 10AM again?","msgtype":"m.text"},"ts":1215101400000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"guess i'll be there at nine","msgtype":"m.text"},"ts":1215102180000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"seems I was wrong, nobody here :/","msgtype":"m.text"},"ts":1215105360000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Hixie: What's the justification for not just using full HTTP/1.1 for WebSockets?","msgtype":"m.text"},"ts":1215110100000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"it's the requirement to write a websockets server in only a few lines of code","msgtype":"m.text"},"ts":1215110220000,"senderName":"takkaria","senderId":"takkaria@irc"},
{"content":{"body":"I believe, anyway","msgtype":"m.text"},"ts":1215110221000,"senderName":"takkaria","senderId":"takkaria@irc"},
{"content":{"body":"indeed","msgtype":"m.text"},"ts":1215110280000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"right","msgtype":"m.text"},"ts":1215110281000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"peh. we already have perfectly good HTTP servers.","msgtype":"m.text"},"ts":1215110340000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"i'm not writing a whole web server just to do a chat client","msgtype":"m.text"},"ts":1215110341000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"the \"perfectly good HTTP servers\" don't do full duplex.","msgtype":"m.text"},"ts":1215110342000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"cos HTTP isn't full duplex.","msgtype":"m.text"},"ts":1215110343000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hmm, looking through the diff of spec-gen v. the CSS WG's postprocessor, a heckuva lot is just the difference between actually parsing it and serializing it v. rewriting parts of the document","msgtype":"m.text"},"ts":1215110520000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"brb (again)","msgtype":"m.text"},"ts":1215110521000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"(back)","msgtype":"m.text"},"ts":1215110580000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"othermaciej: the reason for having an exact hex dump is to make absolutely sure that the remote end really is a WebSocket server and isn't being tricked into pretending to be one","msgtype":"m.text"},"ts":1215111060000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Why claim to be an HTTP server?","msgtype":"m.text"},"ts":1215111061000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"(i.e., get off ma lawn!)","msgtype":"m.text"},"ts":1215111120000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"so that you can reuse the same port","msgtype":"m.text"},"ts":1215111121000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: it seems like the most likely thing to trick would be a generic web server that doesn't actually support WebSocket at all","msgtype":"m.text"},"ts":1215111122000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"in which case, requiring a particular header order does not seem like a strong defense","msgtype":"m.text"},"ts":1215111180000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"but it may well make it more of a pain in the ass to implement it integrated into normal web servers","msgtype":"m.text"},"ts":1215111240000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"well there's no way that a random HTTP server is going to be saying \"Upgrade: WebSocket\".","msgtype":"m.text"},"ts":1215111241000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"it seems unlikely that anything else could be made to produce something that looks like an http response with the right status code and response headers, but only with the headers in a different order","msgtype":"m.text"},"ts":1215111360000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"Hixie, looks you are making very good progress with the WebSocket section :)","msgtype":"m.text"},"ts":1215111361000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"john_fallows: it's basically done :-)","msgtype":"m.text"},"ts":1215111480000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i have a question about the step 11 in the handshake","msgtype":"m.text"},"ts":1215111481000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"...except for the implementations and tests and feedback and tutorials and ...","msgtype":"m.text"},"ts":1215111540000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"why use GET rather than OPTIONS?","msgtype":"m.text"},"ts":1215111541000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"(Note to self: Hash tables don't work well when you have ten thousand items and the hash function always returns 0)","msgtype":"m.text"},"ts":1215111600000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"is looking over an htmldiff of the real spec-gen's output and his own","msgtype":"m.emote"},"ts":1215111720000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"no breakage that I've seen yet","msgtype":"m.text"},"ts":1215111721000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"othermaciej: i don't think it's that unlikely. we'd still have to define error handling to a lot of detail, too, so it seems better to make that as simple as possible","msgtype":"m.text"},"ts":1215111722000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Philip`: i just meant the text in the spec :-)","msgtype":"m.text"},"ts":1215111723000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"(well, breakages due to one or two things not being supported yet)","msgtype":"m.text"},"ts":1215111780000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"john_fallows: OPTIONS means \"tell me about this resource\", GET means \"give me this resource\"","msgtype":"m.text"},"ts":1215111781000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"john_fallows: we don't want to know if it's possible, we just want to connect :-)","msgtype":"m.text"},"ts":1215111782000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"don't we need to wait for the 101 Switching Protocols to know if it's possible?","msgtype":"m.text"},"ts":1215111900000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"Hixie: sorry, did not prefix my last comment with your id","msgtype":"m.text"},"ts":1215112200000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"well, it's like with a normal GET request right? You don't know if the URL exists before you call it.","msgtype":"m.text"},"ts":1215112260000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: yes, that applies to many different HTTP methods with request paths, such as GET, POST, PUT, DELETE, HEAD, OPTIONS, so it doesn't seem to imply the use of GET","msgtype":"m.text"},"ts":1215112860000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"Hixie: OPTIONS implies we are negotiating capabilities of the conversation, which IMHO seems like the best fit for the WebSocket handshake","msgtype":"m.text"},"ts":1215113460000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"OPTIONS isn't negotiation, it's asking for information","msgtype":"m.text"},"ts":1215113520000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Now, I need help with a non-recursive algorithm","msgtype":"m.text"},"ts":1215113580000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Hixie: you are right, OPTIONS is asking for meta-information about a resource, not the resource itself - that's why OPTIONS is a better fit over GET","msgtype":"m.text"},"ts":1215113640000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"we want a resource here, not meta information","msgtype":"m.text"},"ts":1215113700000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Namely, http://pastebin.com/m2f04a2a","msgtype":"m.text"},"ts":1215113701000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"if we wanted to return the actual resource, wouldn't that be a 200 OK or similar with a request body?","msgtype":"m.text"},"ts":1215113760000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"it is","msgtype":"m.text"},"ts":1215113820000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"gsnedders, hey, how far is your specgen?","msgtype":"m.text"},"ts":1215113821000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"well","msgtype":"m.text"},"ts":1215113822000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"it's a 101","msgtype":"m.text"},"ts":1215113823000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"but 101 just means \"i'm moving to another protocol to give you the 200 OK\"","msgtype":"m.text"},"ts":1215113824000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"annevk: xref is more or less perfect, I just need to build the TOC from the internal structure and add section numbers","msgtype":"m.text"},"ts":1215113825000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"and that'll probably do for 1.0 (well, with some bugfixes)","msgtype":"m.text"},"ts":1215113880000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"is it available as web service already?","msgtype":"m.text"},"ts":1215113881000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nope","msgtype":"m.text"},"ts":1215113882000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Hixie: we do want meta-information about the resource, namely whether or not it supports Upgrade: WebSocket","msgtype":"m.text"},"ts":1215114120000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"john_fallows: no, we want it to actually upgrade","msgtype":"m.text"},"ts":1215114180000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"it's like saying when you go to ikea to buy a cupboard, you're looking for the instructions to build the cupboard, not the cupboard itself","msgtype":"m.text"},"ts":1215114240000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"looking at the TLS Upgrade scenario in RFC2817 - http://www.ietf.org/rfc/rfc2817.txt","msgtype":"m.text"},"ts":1215114480000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"they specify Optional Upgrade using GET and Mandatory Upgrade using OPTIONS","msgtype":"m.text"},"ts":1215114540000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"Hixie: I want the pieces to build the cupboard from too, when I go to IKEA","msgtype":"m.text"},"ts":1215114541000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"the WebSocket upgrade is mandatory, which seems to imply using OPTIONS rather than GET","msgtype":"m.text"},"ts":1215114600000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"2817 is on crack","msgtype":"m.text"},"ts":1215115080000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"note how nobody implements it","msgtype":"m.text"},"ts":1215115081000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"passes Hixie some crack so he can be on it too","msgtype":"m.emote"},"ts":1215115200000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"no thanks :-)","msgtype":"m.text"},"ts":1215115201000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"0.714s to xref HTML 5","msgtype":"m.text"},"ts":1215115320000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"how long to parse? :-)","msgtype":"m.text"},"ts":1215115380000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Far too long :)","msgtype":"m.text"},"ts":1215115381000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"13.106s","msgtype":"m.text"},"ts":1215115440000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"d'oh","msgtype":"m.text"},"ts":1215115560000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"if the handshake is forced to either Upgrade or fail, and can never return a non-upgraded response, i don't see how we can justify using GET over OPTIONS","msgtype":"m.text"},"ts":1215116460000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"i don't see how we can justify using OPTIONS","msgtype":"m.text"},"ts":1215116461000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"sorry Hixie, don't mean to bug you on this, just trying to better understand the \"is on crack\" response earlier :)","msgtype":"m.text"},"ts":1215116520000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"rfc2817 is just fundamentally not a sane spec","msgtype":"m.text"},"ts":1215116521000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"and is not likely to convince me as an appeal to authority :-)","msgtype":"m.text"},"ts":1215116522000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"maybe if i understood why you think that, it would be easier for me to reach your perspective","msgtype":"m.text"},"ts":1215116580000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"it makes fundamental mistakes like not having a way for pages to say that following a link must happen over an encrypted channel","msgtype":"m.text"},"ts":1215116760000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"is that relevant to the optional upgrade=GET, mandatory upgrade=OPTIONS?","msgtype":"m.text"},"ts":1215116820000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"well, that's just another example of something i don't think is sane in that spec :-)","msgtype":"m.text"},"ts":1215116821000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i'm just saying that RFC2817 being a proponent of something or not isn't a useful technical argument","msgtype":"m.text"},"ts":1215116880000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: If you made the encoded length value be big-endian instead of little-endian, then it'd be compatible with Perl's \"pack 'w'\", which might be nice","msgtype":"m.text"},"ts":1215116881000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"ok, understood","msgtype":"m.text"},"ts":1215116882000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"well, we're not even delivering a pseudo 200 OK after the 101, because after the protocol switch we are both sending and receiving bytes on the wire, it is no longer about resource retrieval","msgtype":"m.text"},"ts":1215116883000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"john_fallows: once it's upgraded, it is implied that it is OK :-)","msgtype":"m.text"},"ts":1215117000000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Philip`: hm, interesting","msgtype":"m.text"},"ts":1215117001000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"yeah, but you didn't actually retrieve any resource when it upgraded, you just changed the rules on how to communicate with that resource","msgtype":"m.text"},"ts":1215117060000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"well, the full duplex socket is the resource","msgtype":"m.text"},"ts":1215117240000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"identified by the request URI","msgtype":"m.text"},"ts":1215117241000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"right","msgtype":"m.text"},"ts":1215117360000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"so what are you saying?  GET makes sense to you because you are \"GET\"ing the full duplex socket resource?","msgtype":"m.text"},"ts":1215117600000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"right","msgtype":"m.text"},"ts":1215117960000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Philip`: i have switched to big endian","msgtype":"m.text"},"ts":1215117961000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"those semantics are not consistent with HTTP specification's definition of the GET method, to transfer an entity identified by request URI","msgtype":"m.text"},"ts":1215118200000,"senderName":"john_fallows","senderId":"john_fallows@irc"},
{"content":{"body":"Hixie: It should multiply 'length' by 128 in each iteration, not by 'multiple'","msgtype":"m.text"},"ts":1215118260000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: oops","msgtype":"m.text"},"ts":1215121080000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Does anyone want to bitch about how bad http://pastebin.com/m3f6dd4f4 is?","msgtype":"m.text"},"ts":1215121440000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"That's my first attempt at a non-recursive implementation of that (due to the need to be able to cope with infinitely deep nested sections)","msgtype":"m.text"},"ts":1215121500000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"(which jgraham's online viewer will hit the recursion limit with)","msgtype":"m.text"},"ts":1215121501000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Hixie: in the binary math, shifting left may be more intuitive that multiplication","msgtype":"m.text"},"ts":1215122040000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"true","msgtype":"m.text"},"ts":1215122400000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"too busy to change it right now","msgtype":"m.text"},"ts":1215122401000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Nobody's going to implement it correctly - they'll all wrap at 2^31 or 2^32 or 2^64 or something","msgtype":"m.text"},"ts":1215122880000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"probably","msgtype":"m.text"},"ts":1215122940000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"so maybe it should be defined so that a straightforward 32-bit implementation will work correctly, because nobody has a legitimate reason to send 4GB messages","msgtype":"m.text"},"ts":1215122941000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"today","msgtype":"m.text"},"ts":1215122942000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"4GB ought to be enough for anyone","msgtype":"m.text"},"ts":1215122943000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"Hmm, my HD is bigger than that.","msgtype":"m.text"},"ts":1215122944000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"already deals with terabyte files","msgtype":"m.emote"},"ts":1215122945000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"You can split the data up into multiple messages","msgtype":"m.text"},"ts":1215123000000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Hixie: yes, but will you really want to send those files over a WebSocket?","msgtype":"m.text"},"ts":1215123001000,"senderName":"takkaria","senderId":"takkaria@irc"},
{"content":{"body":"couple of MB was enough for anyone at some point in the past","msgtype":"m.text"},"ts":1215123002000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"gsnedders: Why re you using a deque?","msgtype":"m.text"},"ts":1215123003000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"even a couple of KB...","msgtype":"m.text"},"ts":1215123004000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jgraham: Well, it probably doesn't make much difference on such a small outline (even as big as HTML 5)","msgtype":"m.text"},"ts":1215123060000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"You don't really want to transmit 4.0GB of your 4.1GB file and then have the connection drop and have to resend the entire thing, so you'd always split it up and build some higher-level file transfer protocol on top of it","msgtype":"m.text"},"ts":1215123061000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"if you're dealing with 4GB of data transfer at one point, you're better using BitTorrent or something else","msgtype":"m.text"},"ts":1215123062000,"senderName":"takkaria","senderId":"takkaria@irc"},
{"content":{"body":"I thought WebSocket was there for chat applications and remote train control, not sending files","msgtype":"m.text"},"ts":1215123063000,"senderName":"takkaria","senderId":"takkaria@irc"},
{"content":{"body":"we can certainly define a limit after which the client should abort the connection","msgtype":"m.text"},"ts":1215123064000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"that's what i tried doing on the last checkin","msgtype":"m.text"},"ts":1215123065000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"gsnedders: Replace deque with list, and replace extendleft with push, and replace popleft with pop","msgtype":"m.text"},"ts":1215123066000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"s/push/append/ or whatever","msgtype":"m.text"},"ts":1215123120000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"gsnedders: what Philip` said","msgtype":"m.text"},"ts":1215123121000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"gsnedders: Also have a single list of (section, indent) tuples, instead of two lists","msgtype":"m.text"},"ts":1215123122000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Hey, I'm not a CS student!","msgtype":"m.text"},"ts":1215123123000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: Me neither :)","msgtype":"m.text"},"ts":1215123124000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"gsnedders: (unless that'd make the implementation ugly, but I don't see obvious problems)","msgtype":"m.text"},"ts":1215123180000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: Well, extend not push","msgtype":"m.text"},"ts":1215123181000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"was going to write you an implementation which just walked the tree iteratively","msgtype":"m.emote"},"ts":1215123182000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"gsnedders: Oh, right, I meant s/push/extend/","msgtype":"m.text"},"ts":1215123183000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"But that's only really easier if you have parent pointers and I don't know if you do","msgtype":"m.text"},"ts":1215123240000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"lxml has _Element.parent","msgtype":"m.text"},"ts":1215123241000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"takkaria: I'd be pretty worried if I was a passenger on a train that was being controlled by Web Sockets :-(","msgtype":"m.text"},"ts":1215123300000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"gsnedders: But a section is not an lxml element, right?","msgtype":"m.text"},"ts":1215123301000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: right","msgtype":"m.text"},"ts":1215123302000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"jgraham: It's a subclass of list, and has section.header and section.parent","msgtype":"m.text"},"ts":1215123303000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"You need to be able to get the parent to implement the algorithm anyway","msgtype":"m.text"},"ts":1215123360000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Philip`: How can I do something like l18?","msgtype":"m.text"},"ts":1215123480000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Philip`: not if you were a fly. :)","msgtype":"m.text"},"ts":1215123481000,"senderName":"takkaria","senderId":"takkaria@irc"},
{"content":{"body":"Philip`: All I can think to do is a loop over section and append a truple for each","msgtype":"m.text"},"ts":1215123540000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: section_and_indents_list.extend((s, indent+2) for s in sections) perhaps","msgtype":"m.text"},"ts":1215123600000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"gsnedders sections.extend((sec, indent+2) for sec on section)","msgtype":"m.text"},"ts":1215123601000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"ah, I don't often think of that, and not with truples","msgtype":"m.text"},"ts":1215123602000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"s/sections/section/","msgtype":"m.text"},"ts":1215123603000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"s/on/in/ of course","msgtype":"m.text"},"ts":1215123604000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"I've done something wrong.","msgtype":"m.text"},"ts":1215123720000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"q+","msgtype":"m.text"},"ts":1215123721000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"er","msgtype":"m.text"},"ts":1215123722000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"wc","msgtype":"m.text"},"ts":1215123723000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"That just looks messy.","msgtype":"m.text"},"ts":1215124080000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"http://pastebin.com/m7d7fc0a1","msgtype":"m.text"},"ts":1215124081000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"22*C here tomorrow.","msgtype":"m.text"},"ts":1215124200000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"http://languagelog.ldc.upenn.edu/myl/TranslateServerError.jpg","msgtype":"m.text"},"ts":1215124201000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"...","msgtype":"m.text"},"ts":1215124202000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: that's awesome","msgtype":"m.text"},"ts":1215124260000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"I think that's a bug.","msgtype":"m.text"},"ts":1215124261000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"owah","msgtype":"m.text"},"ts":1215124262000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"could it be photoshopped?","msgtype":"m.text"},"ts":1215124320000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"could be","msgtype":"m.text"},"ts":1215124321000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"wouldn't surprise me if it was real","msgtype":"m.text"},"ts":1215124322000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"http://xkcd.com/331/","msgtype":"m.text"},"ts":1215124380000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"it could be real, but a *lot* of Chinese people know English these days, especially ones involved in the Olympics I guess","msgtype":"m.text"},"ts":1215124381000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"so it would have to be a monumental stuff-up","msgtype":"m.text"},"ts":1215124440000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"which is of course entirely possible","msgtype":"m.text"},"ts":1215124441000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"Like, committing code that breaks everything thinking it's a tiny fix and can't possibly break anything?","msgtype":"m.text"},"ts":1215124442000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: You should do something like item = sections.pop(); section, indent = item","msgtype":"m.text"},"ts":1215124500000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"there's a massive screen in Manchester, UK, right in the middle of town, which every now and again has Windows error boxes about media types not being supported","msgtype":"m.text"},"ts":1215124501000,"senderName":"takkaria","senderId":"takkaria@irc"},
{"content":{"body":"jgraham: or just section, indent = sections.pop()","msgtype":"m.text"},"ts":1215124502000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Yeah, or just that :)","msgtype":"m.text"},"ts":1215124503000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: Myself coding half asleep isn't good :)","msgtype":"m.text"},"ts":1215124504000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Actually building the TOC, inevitably, is more complex.","msgtype":"m.text"},"ts":1215124560000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"I also need to deal with no-toc","msgtype":"m.text"},"ts":1215124740000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"How come I need reversed() like this, but not with the non-recursive algorithm?","msgtype":"m.text"},"ts":1215124860000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Do you mean not with the recursive algorithm?","msgtype":"m.text"},"ts":1215124920000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1215124921000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"I _am_ half asleep, remember :P","msgtype":"m.text"},"ts":1215124980000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Because at each stage you want to pick the first child of the current section to serialize next which means that it has to go on the far right of the array so it is popped off next","msgtype":"m.text"},"ts":1215124981000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"duh.","msgtype":"m.text"},"ts":1215125040000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Alternatively, if there are no children, you want the next sibling of the current node, so that has to be one to the left of the current node in the array","msgtype":"m.text"},"ts":1215125041000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Because I push and not pop now.","msgtype":"m.text"},"ts":1215125042000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"is really proving how silly his is when tired","msgtype":"m.emote"},"ts":1215125100000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"heads off to sleep","msgtype":"m.emote"},"ts":1215125101000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"His what is ? ;)","msgtype":"m.text"},"ts":1215125102000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":":)","msgtype":"m.text"},"ts":1215125103000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"s/his/he/","msgtype":"m.text"},"ts":1215125104000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Did anyone mention http://www.toolness.com/wp/?p=52 already?","msgtype":"m.text"},"ts":1215125160000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: So I could run Python code that's compiled into Python bytecode, executed by an interpreter that's written in C and compiled to LLVM IR then converted to opcodes for a virtual machine written in ActionScript, ...","msgtype":"m.text"},"ts":1215126540000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"which is compiled to ABC bytecode, which runs in an interpreter written in Forth, which gets JITted to x86 machine code, which is translated into micro-ops which get executed on the hardware","msgtype":"m.text"},"ts":1215126541000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Abstraction is great","msgtype":"m.text"},"ts":1215126542000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"it's amazing anything ever works at all","msgtype":"m.text"},"ts":1215126780000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"I wonder why the LLVM IR needs to be interpreted rather than translated to ABC directly","msgtype":"m.text"},"ts":1215126840000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"I imagine you could give LLVM an ABC back end, but maybe writing a back end is more complex than I thought","msgtype":"m.text"},"ts":1215126960000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"maybe the poster is just confused","msgtype":"m.text"},"ts":1215127140000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"if you delete the \"in\" before \"Actionscript\" in step 2 I think it would make more sense :-)","msgtype":"m.text"},"ts":1215127200000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"presumably we'd have to ask someone who has seen the presentation","msgtype":"m.text"},"ts":1215127380000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"I don't think it really matters, we can all see the ways it could work","msgtype":"m.text"},"ts":1215127440000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"and all those ways are similarly crazy","msgtype":"m.text"},"ts":1215127441000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"the only crazy thing is the prospect of JS as the universal compiler intermediate language","msgtype":"m.text"},"ts":1215127442000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"translating LLVM to a custom bytecode which is then interpreted by a VM written in ActionScript is certainly possible","msgtype":"m.text"},"ts":1215127500000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"though it does seem like needless extra steps compared to translating LLVM to ABC bytecode","msgtype":"m.text"},"ts":1215127501000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"or translating LLVM IR to ActionScript directly","msgtype":"m.text"},"ts":1215127502000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"rather than to a different bytecode interpreted by ActionScript","msgtype":"m.text"},"ts":1215127503000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"shrugs","msgtype":"m.emote"},"ts":1215127560000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"It would be fun to try debugging a performance problem in your Python code and having to traverse down a dozen levels to find the cause","msgtype":"m.text"},"ts":1215127561000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"s/levels/levels of abstraction/","msgtype":"m.text"},"ts":1215127562000,"senderName":"Philip`","senderId":"Philip`@irc"}
]