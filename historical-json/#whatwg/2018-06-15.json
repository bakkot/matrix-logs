[
{"content":{"body":"Domenic: whats your compulsion behind wanting to use existing url infra","msgtype":"m.text"},"ts":1529079843000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"for the std:x|y","msgtype":"m.text"},"ts":1529079960000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"devsnek: please keep it respectful","msgtype":"m.text"},"ts":1529080450000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: er","msgtype":"m.text"},"ts":1529080931000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"what did i do?","msgtype":"m.text"},"ts":1529080938000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"i was just asking for his reasoning behind wanting to use existing url stuff","msgtype":"m.text"},"ts":1529080957000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"Using “compulsion” is not just asking","msgtype":"m.text"},"ts":1529080989000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"sorry about the phrasing then","msgtype":"m.text"},"ts":1529081007000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"i didn't intend for it to come across in that way","msgtype":"m.text"},"ts":1529081016000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"devsnek: it's basically about simplicity. URLs are pretty good for locating resources. One might even say they're a universal way to do so. Why invent a new way to locate resources? Everyone thinks their specific resource type is so special it needs a new way of locating it, but I just don't see any advantage.","msgtype":"m.text"},"ts":1529082816000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: because its not just one resource","msgtype":"m.text"},"ts":1529082838000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"devsnek: it definitely is...","msgtype":"m.text"},"ts":1529082849000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"We don't somehow load two modules","msgtype":"m.text"},"ts":1529082856000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"its either std:x or some url","msgtype":"m.text"},"ts":1529082869000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"Maybe the ?fallback= syntax would make this clearer, interesting.,","msgtype":"m.text"},"ts":1529082869000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Here's the analogy","msgtype":"m.text"},"ts":1529082884000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"https://example.com/foo?fallback=bar returns the contents of https://example.com/foo if you're using a modern browser, or the contents of https://example.com/bar if you're using an old browser","msgtype":"m.text"},"ts":1529082926000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"https://example.com/foo?fallback=bar is a great way of locating the resource","msgtype":"m.text"},"ts":1529082937000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"The resource has different representations depending on your user agent","msgtype":"m.text"},"ts":1529082942000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"But it's still a single resource","msgtype":"m.text"},"ts":1529082946000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"well in the case of example.com","msgtype":"m.text"},"ts":1529082953000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"it should just be a query param","msgtype":"m.text"},"ts":1529082955000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"There are other identifiers for the same resource, only some of which work, depending on which UA you're using","msgtype":"m.text"},"ts":1529082962000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Yes, that's why I'm saying maybe this would be clearer for people if we did std:x?fallback=y","msgtype":"m.text"},"ts":1529082972000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"But there's nothing magical about query params, besides convention","msgtype":"m.text"},"ts":1529082985000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"std:x?fallback=y makes sense","msgtype":"m.text"},"ts":1529082992000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"Maybe I should take my own advice and not invent something new and special though","msgtype":"m.text"},"ts":1529082993000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I think | as an abbreviate for ?fallback= is nice, but maybe it's too confusing","msgtype":"m.text"},"ts":1529083020000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"URLs are supposed to be opaque in terms of how they map to resources, but some people really like attaching meanings to sigils like ?, and maybe I should just go along with that","msgtype":"m.text"},"ts":1529083067000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"std:x?fallback=y feels good to me because uh","msgtype":"m.text"},"ts":1529083076000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"std:x is just another thing you load","msgtype":"m.text"},"ts":1529083082000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"and it could theoretically be handling import.meta.url however it wants","msgtype":"m.text"},"ts":1529083091000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"even if that isn't what happens behind the scenes","msgtype":"m.text"},"ts":1529083099000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"You understand though that this is just the decision of the server","msgtype":"m.text"},"ts":1529083100000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"You could have example.com do https://example.com/foo|bar and do the exact same behavior","msgtype":"m.text"},"ts":1529083109000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"wdym","msgtype":"m.text"},"ts":1529083119000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"You can set up your server so that https://example.com/foo|bar returns the contents of https://example.com/foo if you're using a modern browser, or the contents of https://example.com/bar if you're using an old browser","msgtype":"m.text"},"ts":1529083134000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"oh yeah","msgtype":"m.text"},"ts":1529083142000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"It's just a random convention that sometimes people use ? instead of other sigils","msgtype":"m.text"},"ts":1529083154000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"i see what you're saying now","msgtype":"m.text"},"ts":1529083162000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"Yeah. But it does seem using the sigils people are used to would help.","msgtype":"m.text"},"ts":1529083183000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"maybe i was also misunderstanding the proposal a bit","msgtype":"m.text"},"ts":1529083202000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"i took it as a generic way to fallback between resources","msgtype":"m.text"},"ts":1529083214000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"Domenic: have you considered being able to specify multiple std: URLs, or a some kind of matching function, and then only falling back if they all fail?","msgtype":"m.text"},"ts":1529083222000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: yeah that's definitely an important open issue.","msgtype":"m.text"},"ts":1529083238000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"https://github.com/drufball/layered-apis/issues/5","msgtype":"m.text"},"ts":1529083256000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I'm just thinking if the URLs end up containing things like \"-v1\", \"-v2\", etc... then people may want to call out specific versions or match any version, etc","msgtype":"m.text"},"ts":1529083272000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"But overall I'm starting to feel like maybe we should remove this URL syntax and use package name maps instead...","msgtype":"m.text"},"ts":1529083275000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"thanks","msgtype":"m.text"},"ts":1529083278000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"package name maps as fallbacks","msgtype":"m.text"},"ts":1529083296000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"or specifying the fallbacks","msgtype":"m.text"},"ts":1529083305000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"sounds nice","msgtype":"m.text"},"ts":1529083306000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"Domenic: oh, that issue is about multiple fallbacks... I was talking about multiple standard things in the browser","msgtype":"m.text"},"ts":1529083327000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: oh interesting!","msgtype":"m.text"},"ts":1529083336000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Well I guess it would still work?","msgtype":"m.text"},"ts":1529083340000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"with a package name map","msgtype":"m.text"},"ts":1529083350000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"std:x-v1|std:x-v2","msgtype":"m.text"},"ts":1529083351000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"could you do like src=\"https://mypollyfill\"","msgtype":"m.text"},"ts":1529083364000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"and then in a package name map","msgtype":"m.text"},"ts":1529083369000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"intercept that","msgtype":"m.text"},"ts":1529083371000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"Yes!!","msgtype":"m.text"},"ts":1529083372000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: can you chain beyond that?  std:x-v1|std:x-v2|https://fallback.com","msgtype":"m.text"},"ts":1529083380000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"so older browsers get the polyfill","msgtype":"m.text"},"ts":1529083381000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"wanderview: well basically issue #5 is suggesting that","msgtype":"m.text"},"ts":1529083388000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"ok","msgtype":"m.text"},"ts":1529083392000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"devsnek: yeah that's one of the two big problems a package name map would solve","msgtype":"m.text"},"ts":1529083395000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"The std:x|y syntax only gives you fallbacks in browsers that support std:x|y","msgtype":"m.text"},"ts":1529083411000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Which is great in the future but hurts when trying to bootstrap the ecosystem","msgtype":"m.text"},"ts":1529083423000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"tfw package name maps are lowkey the solution to every problem","msgtype":"m.text"},"ts":1529083436000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"( The other big problem is https://github.com/drufball/layered-apis/issues/10 )","msgtype":"m.text"},"ts":1529083439000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"hmm about number 10","msgtype":"m.text"},"ts":1529083509000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"lets say BigInt was behind std:bigint","msgtype":"m.text"},"ts":1529083512000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"wouldn't it be wiser to do `import BigInt from 'std:bigint|x'` instead of `import 'std:bigint|x';` with attaching to global","msgtype":"m.text"},"ts":1529083554000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"That's a whole separate issue","msgtype":"m.text"},"ts":1529083627000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"But even if you did","msgtype":"m.text"},"ts":1529083651000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Imagine you then had two separate bigint polyfill instances floating around your pap","msgtype":"m.text"},"ts":1529083661000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"instanceof wouldn't work, semantics might be slightly different, not good","msgtype":"m.text"},"ts":1529083669000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"true","msgtype":"m.text"},"ts":1529083673000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"Even without global side effects it's still not great","msgtype":"m.text"},"ts":1529083682000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"i guess in that case enforcing fallbacks would make sense","msgtype":"m.text"},"ts":1529083763000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"Domenic: wouldn't ?fallback= require URL encoding the fallback URL in the search param?","msgtype":"m.text"},"ts":1529085253000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"Hmm, yeah, maybe :-/","msgtype":"m.text"},"ts":1529085264000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"whereas it was not clear to me that the URL would need to be encoded if it had special syntax like \"|\"","msgtype":"m.text"},"ts":1529085269000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"Domenic: I'll add the question to the issue I guess","msgtype":"m.text"},"ts":1529085300000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"annevk: I’ve got something started for console’s formal warning reporting, I’ll get something up for review soon just heads up.","msgtype":"m.text"},"ts":1529087660000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"(I know it was mentioned on that DOM PR by jungkees )","msgtype":"m.text"},"ts":1529087678000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"coool","msgtype":"m.text"},"ts":1529088669000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TabAtkins: status of https://github.com/tabatkins/highlighter/issues/5 ?","msgtype":"m.text"},"ts":1529096955000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Looking into it now. I can reproduce the issue.","msgtype":"m.text"},"ts":1529097160000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"download attribute still doesn't work properly? :|","msgtype":"m.text"},"ts":1529098023000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"(seems like browsers still only use it as the default filename if a link is downloaded, but don't actually cause the link to be downloaded by default)","msgtype":"m.text"},"ts":1529098085000,"senderName":"zewt","senderId":"zewt@irc"}
]