[
{"content":{"body":"annevk: RE https://github.com/whatwg/fetch/pull/834#issuecomment-439837919; I understand that the PR will add the opaque filter to A->B->A \"no-cors\" images. Thus HTML will have to penetrate this to get at it. I'm unclear on your last (sentence) though","msgtype":"m.text"},"ts":1542644252000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"I am marginally disappointed that the MDN page for <plaintext> doesn't say it's been obsolete since 1993.","msgtype":"m.text"},"ts":1542644328000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"if I have a document <script>location.href = \"http://example.com\"</script> the load event will never fire, right, but it will get readyState fired for complete just before unload?","msgtype":"m.text"},"ts":1542645282000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"domfarolino: the change would be to not poke through","msgtype":"m.text"},"ts":1542645724000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: But that would be up to HTML right, to poke through or not?","msgtype":"m.text"},"ts":1542645794000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"was confused with \"change things around __here__ if we wanted\"","msgtype":"m.text"},"ts":1542645852000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"what valid URL cases end up with identical serialized URL? http://foo.com ends up as http://foo.com/, what else?","msgtype":"m.text"},"ts":1542646020000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"oh, plenty of cases, I'm just searching for the wrong things in the spec","msgtype":"m.text"},"ts":1542646075000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"I just retweeted this but realized maybe it's not correct per spec https://twitter.com/_developit/status/1064548725891231745?s=19 isn't innerText supposed to only require style recalc these days?","msgtype":"m.text"},"ts":1542646499000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: v. layout? (Twitter isn't loading here for whatever reason.) Yeah, I think that's true.","msgtype":"m.text"},"ts":1542646597000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Yeah versus layout","msgtype":"m.text"},"ts":1542646620000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"annevk: My understanding is that #834 makes it so that A->B->A \"no-cors\" <img> responses will be opaque. youennf's WPT asserts this, so do we necessarily want HTML to poke through?","msgtype":"m.text"},"ts":1542646803000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"Domenic: I thought it just required style too, but for some reason a lot of things surfacing from a google search indicate people think it requires layout","msgtype":"m.text"},"ts":1542646865000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"Inner text collection steps require CSS \"computed values\", not sure what that requires though entirely","msgtype":"m.text"},"ts":1542646895000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"I think how this happened is that it required layout in WebKit then when Gecko went to standardize it they made a version that only requires style recalc. Blink is working on aligning with spec. No idea about Edge.","msgtype":"m.text"},"ts":1542646945000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"domfarolino: computed values are the output of style, essentially","msgtype":"m.text"},"ts":1542646984000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"That's what I figured","msgtype":"m.text"},"ts":1542646996000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"domfarolino: yeah, I think that's right","msgtype":"m.text"},"ts":1542646998000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"uh, Domenic: ^^","msgtype":"m.text"},"ts":1542647007000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"There's also the old Presto approach that just returns Element.textContent :)","msgtype":"m.text"},"ts":1542647022000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"domfarolino: yeah, it would be up to HTML, but I wanna figure that part out too ðŸ˜Š","msgtype":"m.text"},"ts":1542647024000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I think the other thing wrt the tweet is people just not realising layout recalc and style recalc can be done separately?","msgtype":"m.text"},"ts":1542647051000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"annevk: Ok that makes sense - is there currently a need right now for HTML to poke through?","msgtype":"m.text"},"ts":1542647135000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"(I think as per current spec the \"no-cors\" image responses are opaque and thus not \"poked through\")","msgtype":"m.text"},"ts":1542647400000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"domfarolino: perhaps, depends on what browsers wanna do, apparently thereâ€™s no interop","msgtype":"m.text"},"ts":1542647552000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Gotcha. FWIW Chrome is OK with #834's approach, but we want to collect UMAs before impl to see if it might break too much content","msgtype":"m.text"},"ts":1542647858000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"domfarolino: that PR restores the status quo for fetch(), which I think everyone is aligned on, hence leaving the issue open for the HTML side","msgtype":"m.text"},"ts":1542648653000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Makes sense. Iâ€™d like to see browsers also align on Safariâ€™s treatment of images","msgtype":"m.text"},"ts":1542649180000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"Domenic: This might be a dumb question, but what is the difference between HostResolveImportedModule and ...Dynamically?","msgtype":"m.text"},"ts":1542654800000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"domfarolino: HostResolveImportedModule translates (specifier, referencingScriptOrModule) pairs into modules synchronously. It's called a lot from various places in the ES spec. HostImportModuleDynamically actually does the fetch. It's only called by import().","msgtype":"m.text"},"ts":1542654869000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"(and it's async, in a funny way)","msgtype":"m.text"},"ts":1542654881000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: Ohh that's why FinishDynamicImport calls HostResolveImportedModule, because HostResolveImportedModuleDynamically actually does the fetching, and the fetching algorithms insert the script into the module map for later reuse by HostResolveImportedModule...that makes sense thanks","msgtype":"m.text"},"ts":1542655195000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"Yeah. Would welcome a PR making the flow a bit clearer.","msgtype":"m.text"},"ts":1542655217000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Thanks a lot for getting to https://github.com/whatwg/html/pull/4181, as I let it slip through the cracks.","msgtype":"m.text"},"ts":1542655249000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"Yeah I'm wondering about how that might be done","msgtype":"m.text"},"ts":1542655296000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"Probably too ambitious, but you could imagine a call graph...","msgtype":"m.text"},"ts":1542655329000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Kinda what I was thinking","msgtype":"m.text"},"ts":1542655359000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"Like, `<script type=module>` -> fetch a module script graph -> create a module script -> `import` statement parsing -> HostResolveImportedModule -> resolve a module specifier; `import()` expression -> HostImportModuleDynamically -> resolve a module specifier + FinishDynamicImport -> HostResolveImportedModule -> resolve a module specifier. Or something. Probably more things on each level.","msgtype":"m.text"},"ts":1542655464000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Is there an IRC channel where I can ask about HTTP specs? Having a hard time googling it","msgtype":"m.text"},"ts":1542657363000,"senderName":"ocket8888_","senderId":"ocket8888_@irc"},
{"content":{"body":"Yeah I like the idea of having a graph like that somewhere. Especially for all the script fetching algorithms too (IMSGFP and friends)","msgtype":"m.text"},"ts":1542658373000,"senderName":"domfarolino","senderId":"domfarolino@irc"}
]