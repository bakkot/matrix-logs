[
{"content":{"body":"Basically the manifest spec screwed us by setting that precedent so now we follow it","msgtype":"m.text"},"ts":1492220997000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Also, why is the stylesheet still not fixed for tables -__","msgtype":"m.text"},"ts":1492221202000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"-__-, even","msgtype":"m.text"},"ts":1492221207000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Can't we follow CSP report precedent instead? If that is different?","msgtype":"m.text"},"ts":1492231399000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP#Sample_violation_report","msgtype":"m.text"},"ts":1492236049000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"... huh, so it's dash-delimited. That seems... worse.","msgtype":"m.text"},"ts":1492236056000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"also still map CSP uses \"uri\"","msgtype":"m.text"},"ts":1492236069000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"*mad","msgtype":"m.text"},"ts":1492236074000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Yeah, I complained about that bit already, might be \"fixed\" by a newer version","msgtype":"m.text"},"ts":1492246075000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: this agent thing. What defines the concept which BroadcastChannel uses?","msgtype":"m.text"},"ts":1492253332000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"smaug: they are origin-bound, no? Kind of cross-cutting with agents","msgtype":"m.text"},"ts":1492253426000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ok, perhaps I don't understand what an agent is","msgtype":"m.text"},"ts":1492253450000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"or not perhaps, I just don't :)","msgtype":"m.text"},"ts":1492253507000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"smaug: a dedicated worker is an agent, or a set of windows that are similar-origin and can access each other","msgtype":"m.text"},"ts":1492253521000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ok, so that window part is like, hmm, DocGroup in Gecko","msgtype":"m.text"},"ts":1492253575000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"is there anything for non-similar-origin?","msgtype":"m.text"},"ts":1492253588000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"smaug: no, we should prolly have terms for that too at some point","msgtype":"m.text"},"ts":1492253624000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(that would be TabGroup in Gecko)","msgtype":"m.text"},"ts":1492253638000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"and the agent for BroadcastChannel isn't needed because something. ShareArrayBuffer just isn't supported by its postMessage","msgtype":"m.text"},"ts":1492254156000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"Should one be able to pass SharedArrayBuffer cross origin?","msgtype":"m.text"},"ts":1492254225000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"using window.postMessage","msgtype":"m.text"},"ts":1492254231000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"I would expect so, if window.postMessage supports it in same-origin case","msgtype":"m.text"},"ts":1492254259000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"smaug: no, that will fail","msgtype":"m.text"},"ts":1492258727000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"same-origin case?","msgtype":"m.text"},"ts":1492258749000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"No cross fails","msgtype":"m.text"},"ts":1492260546000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"you can pass cross-origin if the origins could become same-origin-domain via document.domain","msgtype":"m.text"},"ts":1492263631000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"i.e. you can pass from a.example.com to b.example.com","msgtype":"m.text"},"ts":1492263643000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"maybe we should add that to the list of examples","msgtype":"m.text"},"ts":1492263669000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"We should also add a note that same-origim can be different agents","msgtype":"m.text"},"ts":1492264913000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Eg two independently opened same-origin browsing contexts","msgtype":"m.text"},"ts":1492264952000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hi, i'm totally out of choice now. This is about XMLHttpRequest(...) , https://paste.ubuntu.com/24387209/","msgtype":"m.text"},"ts":1492266781000,"senderName":"knunger004","senderId":"knunger004@irc"},
{"content":{"body":"the issue i'm facing is regarding 307 url redirection by the proxy server at localhost:8080, when some resource isn't found.","msgtype":"m.text"},"ts":1492266828000,"senderName":"knunger004","senderId":"knunger004@irc"},
{"content":{"body":"locally.","msgtype":"m.text"},"ts":1492266838000,"senderName":"knunger004","senderId":"knunger004@irc"},
{"content":{"body":"i get the following error , \"Uncaught NetworkError: Failed to execute 'send' on 'XMLHttpRequest': Failed to load 'http://localhost:7860/data.json'","msgtype":"m.text"},"ts":1492266878000,"senderName":"knunger004","senderId":"knunger004@irc"},
{"content":{"body":"However, when the resource is found locally, it works perfectly fine.","msgtype":"m.text"},"ts":1492266901000,"senderName":"knunger004","senderId":"knunger004@irc"},
{"content":{"body":"https://paste.ubuntu.com/24387231/ this is the code that prepare a custom redirect response header.","msgtype":"m.text"},"ts":1492266984000,"senderName":"knunger004","senderId":"knunger004@irc"},
{"content":{"body":"knunger004: that is not really sufficient information to know where it goes wrong","msgtype":"m.text"},"ts":1492267902000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"knunger004: also, stackoverflow is prolly a better place","msgtype":"m.text"},"ts":1492267923000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk, alright","msgtype":"m.text"},"ts":1492268788000,"senderName":"knunger004","senderId":"knunger004@irc"},
{"content":{"body":"annevk: oooh, interesting, i didn't realize URSOBC excluded such cases","msgtype":"m.text"},"ts":1492277385000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"That might be a reason it's based on browsing contexts instead of realms","msgtype":"m.text"},"ts":1492277414000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"But the whole browsing context angle makes no sense given navigation","msgtype":"m.text"},"ts":1492278385000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Or I guess you can see it as some kind of snapshot, but still, we can do better eventually","msgtype":"m.text"},"ts":1492278433000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I mean, it makes sense if you think of it as a definition, instead of a set that gets statically added to and removed from","msgtype":"m.text"},"ts":1492279279000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"getCurrentURSOBCs() instead of const ursobcs = []","msgtype":"m.text"},"ts":1492279294000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"It's a bit confusing conceptually, but I think it all *works*","msgtype":"m.text"},"ts":1492279311000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"We add state to it though","msgtype":"m.text"},"ts":1492279485000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"We should move that state to the corresponding agent over time and then figure out when it gets created; that will make it all go away","msgtype":"m.text"},"ts":1492279601000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ah, yeah, we did","msgtype":"m.text"},"ts":1492279622000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"now i'm wondering if the custom elements reaction stack should be event-loop bound instead of URSOBC-bound","msgtype":"m.text"},"ts":1492279656000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"It should be similar-origin window agent bound","msgtype":"m.text"},"ts":1492279784000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"And some stuff in DOM should be too, I should export these agents","msgtype":"m.text"},"ts":1492279819000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"it seems more like a task queue-ish thing which makes me think event loop","msgtype":"m.text"},"ts":1492279870000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"i guess in implementations it's not going to be shared across processes?","msgtype":"m.text"},"ts":1492279916000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"But neither are event loops, in practice, I think","msgtype":"m.text"},"ts":1492279926000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Event loops cannot be shared across processes","msgtype":"m.text"},"ts":1492279942000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I thought per spec you could have one event loop for all browsing contexts...","msgtype":"m.text"},"ts":1492279959000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"yeah, there is at most one event loop per URSOBC, but not at least one (like I thought there was until recently)","msgtype":"m.text"},"ts":1492279985000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Sure, in a single-process impl","msgtype":"m.text"},"ts":1492279986000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"right ok so the mapping i have wrong is agent <-> process. it's agent <-> theoretically-possible process.","msgtype":"m.text"},"ts":1492280006000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: we don't want to export subcluster right?","msgtype":"m.text"},"ts":1492280036000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Agreed","msgtype":"m.text"},"ts":1492280043000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: agent's realm and agent's global object?","msgtype":"m.text"},"ts":1492280070000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I'd lean toward not exporting them for now, but maybe that's over-conservative.","msgtype":"m.text"},"ts":1492280096000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"seems fine to me, especially since they don't work across all agents","msgtype":"m.text"},"ts":1492280118000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yeah that's what's worrying","msgtype":"m.text"},"ts":1492280123000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Maybe they should be renamed \"worker agent's realm\" etc. Or... \"workerish\" so worklets are included? I dunno.","msgtype":"m.text"},"ts":1492280133000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"\"single-global agent's global object\" is not short enough IMO","msgtype":"m.text"},"ts":1492280146000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I think it's fine and we should worry about when either someone needs to use them elsewhere or someone gets confused","msgtype":"m.text"},"ts":1492280176000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"SGTM","msgtype":"m.text"},"ts":1492280227000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: with respect to event loop, I'd like that to just become a queue or some such on each agent","msgtype":"m.text"},"ts":1492281048000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"sure, 1:1 event loop <-> agent would work well for me","msgtype":"m.text"},"ts":1492281068000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: and then we'd allow UAs to merge queues of window agents or some such (no need to require those to be concurrent and not observable either)","msgtype":"m.text"},"ts":1492281114000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: which brings us back to the status quo, except the formal model is more sensible (and better grounded as event loops are currently located nowhere...)","msgtype":"m.text"},"ts":1492281167000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: other question, some of your JS PRs to remove willful violations gained consensus it seems","msgtype":"m.text"},"ts":1492281824000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: did you lose track or just waiting for something?","msgtype":"m.text"},"ts":1492281832000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: just hasn't gotten to the top of the priority queue unfortunately","msgtype":"m.text"},"ts":1492281946000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"oh, PRs?","msgtype":"m.text"},"ts":1492281951000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I think none of my actual PRs have consensus","msgtype":"m.text"},"ts":1492281957000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Unless I lost track","msgtype":"m.text"},"ts":1492281961000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: https://github.com/tc39/ecma262/pull/688, but it needs modifications","msgtype":"m.text"},"ts":1492281993000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ah right yeah","msgtype":"m.text"},"ts":1492282011000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Yeah doing that work is in a pile with a few others that got consensus","msgtype":"m.text"},"ts":1492282027000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"bterlson was supposed to do HTMLAllCollection to show me how he envisions HTML integration working per the consensus","msgtype":"m.text"},"ts":1492282048000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"But he never did, so I should probably do the work myself","msgtype":"m.text"},"ts":1492282055000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Ah okay, I'd just wait a bit on bterlson then","msgtype":"m.text"},"ts":1492282073000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Nah it's been like 7 months, I gotta do it myself","msgtype":"m.text"},"ts":1492282109000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"https://dl.dropboxusercontent.com/u/20140634/agents/multipage/webappapis.html#integration-with-the-javascript-agent-formalism is updated","msgtype":"m.text"},"ts":1492282111000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"annevk: should we specify worklet [[CanBlock]] in this PR?","msgtype":"m.text"},"ts":1492282130000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: I decided yes, based on flagxor's feedback and nobody objecting","msgtype":"m.text"},"ts":1492282151000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"CanBlock yes, or yes we should? It seems like it's not in the current PR","msgtype":"m.text"},"ts":1492282174000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: but easily changed if we get some feedback","msgtype":"m.text"},"ts":1492282178000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: oh nevermind","msgtype":"m.text"},"ts":1492282189000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"was looking in the wrong place","msgtype":"m.text"},"ts":1492282192000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"kk","msgtype":"m.text"},"ts":1492282196000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: seems we already had the same-origin domain iframe example too in your list of examples at the bottom of the PR btw, forgot to reply to that earlier","msgtype":"m.text"},"ts":1492282276000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Hmm yeah I guess I did say \"could be\" and \"cannot be\"","msgtype":"m.text"},"ts":1492282304000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Did you want to add the \"two independently opened windows\" example?","msgtype":"m.text"},"ts":1492282325000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: I think the note I added is good enough","msgtype":"m.text"},"ts":1492282353000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Oh I see","msgtype":"m.text"},"ts":1492282371000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"It seems better there, since it might directly conflict with what folks think when they see \"similar-origin\"","msgtype":"m.text"},"ts":1492282417000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I couldn't think of a better term though","msgtype":"m.text"},"ts":1492282426000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"The whole confusion with lth came from Gecko calling this a \"DocGroup\"","msgtype":"m.text"},"ts":1492282453000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I think","msgtype":"m.text"},"ts":1492282461000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: is Vat > Agent Cluster still true? I guess a Vat is the browser?","msgtype":"m.text"},"ts":1492282603000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I think vat is supposed to be agent","msgtype":"m.text"},"ts":1492282613000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: hmm no, I guess Vat is Agent Cluster or Agent, okay","msgtype":"m.text"},"ts":1492282621000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I was trying to figure out if there could be something between User agent and Agent Cluster, but that doesn't really seem possible due to BroadcastChannel and storage events","msgtype":"m.text"},"ts":1492282715000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Hmm I don't follow the connection, but I do think there's probably not anything between them","msgtype":"m.text"},"ts":1492283155000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I was imagining that something stronger than an Agent Cluster would not be able to use postMessage() between themselves","msgtype":"m.text"},"ts":1492284184000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"If we call that kind of thing a Super Agent, then the problem is that as soon as you have two Super Agents, and then one of them creates a Window that has the same origin as a Window of the other, you're in trouble, as those need to be able to message each other","msgtype":"m.text"},"ts":1492284308000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Through BroadcastChannel and storage events","msgtype":"m.text"},"ts":1492284327000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Oh, and shared workers of course.","msgtype":"m.text"},"ts":1492284417000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"And service workers.","msgtype":"m.text"},"ts":1492284428000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"So many holes.","msgtype":"m.text"},"ts":1492284442000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I think if we wanted to restrict sharing SABs to same-origin-domain, not just similar-origin, we would do that in the definition of agent clusters. I prefer being more permissive though.","msgtype":"m.text"},"ts":1492285399000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I guess an argument for more restrictive is that it helps us avoid propagating document.domain in the hope that maybe one day we could remove it or limit it to some mode","msgtype":"m.text"},"ts":1492287029000,"senderName":"Domenic","senderId":"Domenic@irc"}
]