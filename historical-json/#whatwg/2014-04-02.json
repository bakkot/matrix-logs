[
{"content":{"body":"still unnecessary :-)","msgtype":"m.text"},"ts":1396396803000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: can any browser actually compute the information required to \"await a stable state\" ?","msgtype":"m.text"},"ts":1396396815000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"i'm sure you can find a precedent for pretty much anything","msgtype":"m.text"},"ts":1396396816000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"abarth: how do you mean?","msgtype":"m.text"},"ts":1396396824000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: we're trying to implement some things related to HTMLImageElement","msgtype":"m.text"},"ts":1396396837000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"abarth: \"stable state\" is something you reach in the event loop.","msgtype":"m.text"},"ts":1396396848000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: that the spec says to \"await a stable state\" but it seems very hard","msgtype":"m.text"},"ts":1396396850000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"abarth: nothing to compute","msgtype":"m.text"},"ts":1396396853000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"what does \"nothing to compute\" mean?","msgtype":"m.text"},"ts":1396396864000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"there are always things scheduled in the event loop","msgtype":"m.text"},"ts":1396396873000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"you don't have to compute anything to reach a stable state","msgtype":"m.text"},"ts":1396396878000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"you just follow the loop processing model and it tells you when you're supposed to offer a stable state","msgtype":"m.text"},"ts":1396396892000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"(which is basically any time you run microtasks)","msgtype":"m.text"},"ts":1396396904000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"(but see the spec for specifics)","msgtype":"m.text"},"ts":1396396915000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"maybe I misunderstand the spec","msgtype":"m.text"},"ts":1396396925000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"but if there's an algorithm in the spec that spins the event loop","msgtype":"m.text"},"ts":1396396936000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"then isn't the stable state delayed until that algorithm completes?","msgtype":"m.text"},"ts":1396396947000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"\"provide a stable state\" happens on step 8 of the event loop.","msgtype":"m.text"},"ts":1396396997000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i see that","msgtype":"m.text"},"ts":1396397012000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"http://www.whatwg.org/specs/web-apps/current-work/#spin-the-event-loop","msgtype":"m.text"},"ts":1396397029000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"but it doesn't happen after step 6 of that algorithm","msgtype":"m.text"},"ts":1396397039000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"\"spin the event loop\" returns to step 4, so the stable state will happen shortly after.","msgtype":"m.text"},"ts":1396397041000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"that is, spin the event loop's step 7 returns the event loop to step 4","msgtype":"m.text"},"ts":1396397062000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"and from there it's quick work to reach 8.","msgtype":"m.text"},"ts":1396397075000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"since 4, 5, and 6 are trivial and 7 is microtasks","msgtype":"m.text"},"ts":1396397092000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i see","msgtype":"m.text"},"ts":1396397104000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"(there's an open bug on making stable state into a microtask)","msgtype":"m.text"},"ts":1396397106000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"(but that would make little difference)","msgtype":"m.text"},"ts":1396397112000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"so, when you spin the event loop, you actually return to the top-level event loop in the spec","msgtype":"m.text"},"ts":1396397129000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"so, why is there a microtask checkpoint at step 6 of spinning the event loop?","msgtype":"m.text"},"ts":1396397152000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"won't we get back to the main event loop and checkpoint there?","msgtype":"m.text"},"ts":1396397161000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"yeah, there's an open bug on that too iirc","msgtype":"m.text"},"ts":1396397169000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"basically, the person submitting the CL is trying to use the microtask checkpoints to implement stable states","msgtype":"m.text"},"ts":1396397195000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"(basically \"spin\" ends the current task, goes async (resuming the event loop), and then waits for the condition to be met and posts a continuation as a task. It never actually spins anything or resumes anything directly itself.)","msgtype":"m.text"},"ts":1396397205000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"and I'm trying to figure out if they're doing it right :)","msgtype":"m.text"},"ts":1396397207000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"abarth: foolip?","msgtype":"m.text"},"ts":1396397211000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"abarth: it's his bug asking for me to change the spec iirc","msgtype":"m.text"},"ts":1396397229000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"https://codereview.chromium.org/200923002/","msgtype":"m.text"},"ts":1396397232000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"cbiesinger","msgtype":"m.text"},"ts":1396397240000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"apparently HTMLImageElement waits for a stable state before kicking off the load","msgtype":"m.text"},"ts":1396397253000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"ugh, <picture>","msgtype":"m.text"},"ts":1396397253000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"that really is gonna cause you all kinds of trouble","msgtype":"m.text"},"ts":1396397259000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"<source> is a bad design","msgtype":"m.text"},"ts":1396397266000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: how could stable state be microtask?","msgtype":"m.text"},"ts":1396397267000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"but anyway","msgtype":"m.text"},"ts":1396397274000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"isn't stable state between tasks","msgtype":"m.text"},"ts":1396397275000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: microtasks are between tasks too","msgtype":"m.text"},"ts":1396397284000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: oh, is it only in the <picture> spec that HTMLImageElement waits?","msgtype":"m.text"},"ts":1396397288000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"there can be several microtasks in one task","msgtype":"m.text"},"ts":1396397298000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: in the impl, we can tell the difference between the nested checkpoints and the top-level checkpoint","msgtype":"m.text"},"ts":1396397333000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"they're triggered by different systems","msgtype":"m.text"},"ts":1396397341000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"e.g., the scripting engine versus the event loop","msgtype":"m.text"},"ts":1396397351000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"abarth: <img> as specced does a stable state too, <picture>'s problems are bigger than that.","msgtype":"m.text"},"ts":1396397356000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"smaug____: yeah, there can be several synchronous sections (stable state consumers) too","msgtype":"m.text"},"ts":1396397378000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"smaug____: it's all in the bugs","msgtype":"m.text"},"ts":1396397384000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"http://www.whatwg.org/specs/web-apps/current-work/#htmlimageelement step 8 says \"await a stable state\"","msgtype":"m.text"},"ts":1396397394000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"he's trying to implement that","msgtype":"m.text"},"ts":1396397399000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"but how could stable state be microtask ?","msgtype":"m.text"},"ts":1396397406000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: i don't understand the question. why would it be hard?","msgtype":"m.text"},"ts":1396397424000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I don't want to start handling stable state stuff after each event listener call","msgtype":"m.text"},"ts":1396397426000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"abarth: right","msgtype":"m.text"},"ts":1396397431000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"abarth: you really want to coordinate with foolip (philipj). He's doing this stuff in blink.","msgtype":"m.text"},"ts":1396397446000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"smaug____: comment on the relevant bug :-)","msgtype":"m.text"},"ts":1396397457000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"which one is the relevant bug","msgtype":"m.text"},"ts":1396397488000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"Hixie: yes, he's CCed","msgtype":"m.text"},"ts":1396397530000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"Hixie: what is the underlying problem that waiting for a stable state here is solving?","msgtype":"m.text"},"ts":1396397563000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"ah, https://www.w3.org/Bugs/Public/show_bug.cgi?id=24724","msgtype":"m.text"},"ts":1396397568000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"abarth: not wanting to do redundant work when a script modifies an attribute several times in a row","msgtype":"m.text"},"ts":1396397590000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"smaug____: that's the one","msgtype":"m.text"},"ts":1396397602000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: we sometimes load images synchronously out of the cache to avoid trashing layout","msgtype":"m.text"},"ts":1396397604000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"smaug____: you found it faster than me :-)","msgtype":"m.text"},"ts":1396397608000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"because image width / height is an input to layout","msgtype":"m.text"},"ts":1396397611000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"abarth: yeah, that's specced too iirc","msgtype":"m.text"},"ts":1396397617000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"abarth: though the img loading model needs updating to handle the two-image thing, there's a bug on that too","msgtype":"m.text"},"ts":1396397630000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I see the \"list of available images\"","msgtype":"m.text"},"ts":1396397664000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"https://www.w3.org/Bugs/Public/show_bug.cgi?id=24958 is the bug iirc","msgtype":"m.text"},"ts":1396397671000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: thanks for the info","msgtype":"m.text"},"ts":1396397764000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"sorry i can't be more helpful, not sure what to tell you :-)","msgtype":"m.text"},"ts":1396397851000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i really would highly encourage you to push back on a multi-element image-loading feature","msgtype":"m.text"},"ts":1396397872000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"it's a world of pain waiting for you","msgtype":"m.text"},"ts":1396397879000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"<picture><img srcset> + negotiation     <== sounds like fun","msgtype":"m.text"},"ts":1396398149000,"senderName":"a-ja","senderId":"a-ja@irc"},
{"content":{"body":"Ah, I didn't realize I had been volunteered to give a lightning talk at Extensible Web Summit.","msgtype":"m.text"},"ts":1396398338000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"That's fine, but I would have liked to be told by someone other than a Lanyrd update email.","msgtype":"m.text"},"ts":1396398351000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"uh","msgtype":"m.text"},"ts":1396398369000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"that's \"nice\" of them","msgtype":"m.text"},"ts":1396398373000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"At least it's just a lightning talk, not a full-session talk.","msgtype":"m.text"},"ts":1396398992000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I can do a lightning talk with 5 minutes prep.","msgtype":"m.text"},"ts":1396399003000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Is there no way to prevent input elements from streching their parent td?","msgtype":"m.text"},"ts":1396407219000,"senderName":"JosephSilber","senderId":"JosephSilber@irc"},
{"content":{"body":"Aaaah, what is this? http://dev.w3.org/csswg/css-sizing/","msgtype":"m.text"},"ts":1396412086000,"senderName":"Rastus_Vernon","senderId":"Rastus_Vernon@irc"},
{"content":{"body":"I guess still half an hour left of April Fools","msgtype":"m.text"},"ts":1396420437000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Hixie: it would be useful if you could be more specific about the problems with <picture>, maybe if you could read and review the current spec http://picture.responsiveimages.org/ (it's far from the same spec it was a year ago)","msgtype":"m.text"},"ts":1396424057000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"irccloud says i have a mention somewhere in the backlog but manual searching seems to disagree","msgtype":"m.text"},"ts":1396424092000,"senderName":"sangwhan","senderId":"sangwhan@irc"},
{"content":{"body":"Hixie: i think you're the only one at the moment pushing back","msgtype":"m.text"},"ts":1396424115000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"was hoping TabAtkins would have had a answer about prefixing","msgtype":"m.emote"},"ts":1396424126000,"senderName":"sangwhan","senderId":"sangwhan@irc"},
{"content":{"body":"SimonSapin & TabAtkins: If you guys are around. I've got a question regarding http://dev.w3.org/csswg/css-syntax/#consume-a-string-token0","msgtype":"m.text"},"ts":1396440407000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"If I understand correctly, under reverse solidus, the \"if the stream starts with a valid escape\" part is not needed","msgtype":"m.text"},"ts":1396440517000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"Is that correct?","msgtype":"m.text"},"ts":1396440524000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"can someone get rid of that stylesheet by now?","msgtype":"m.text"},"ts":1396441332000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: The April Fools joke was actually that you thought it was only for a day","msgtype":"m.text"},"ts":1396441433000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham :D","msgtype":"m.text"},"ts":1396442067000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"instead it will get worse every day. in a few hours the text will start following the cursor","msgtype":"m.text"},"ts":1396442151000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Nah, Bert would never approve the use of javascript","msgtype":"m.text"},"ts":1396442181000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"then an image of Bert will also start following the cursor","msgtype":"m.text"},"ts":1396442270000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"I think they'll go more subtle","msgtype":"m.text"},"ts":1396442288000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"CSS Filters + Animations will be used to subtly blur the text","msgtype":"m.text"},"ts":1396442314000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"So it will feel like it's going an and out of focus","msgtype":"m.text"},"ts":1396442328000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Because everyone knows that the CSS WG is actually run by a shady cabal of opticians","msgtype":"m.text"},"ts":1396442358000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Who else could these \"Members that aren't interested in browser applications\" be?","msgtype":"m.text"},"ts":1396442392000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"zcorpan: done","msgtype":"m.text"},"ts":1396444229000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"thx","msgtype":"m.text"},"ts":1396444254000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"You mean that Bert now follows the cursor?","msgtype":"m.text"},"ts":1396444266000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"yoav: it’s needed in case you have '\\' followed by a newline","msgtype":"m.text"},"ts":1396444311000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"Hi. :-)","msgtype":"m.text"},"ts":1396447491000,"senderName":"IZh","senderId":"IZh@irc"},
{"content":{"body":"How do you spell WHATWG? ;-)","msgtype":"m.text"},"ts":1396447548000,"senderName":"IZh","senderId":"IZh@irc"},
{"content":{"body":"W.H.A.T.W.G. or What W.G. or something else?","msgtype":"m.text"},"ts":1396447611000,"senderName":"IZh","senderId":"IZh@irc"},
{"content":{"body":"WHATWG.","msgtype":"m.text"},"ts":1396447632000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"do you mean pronounce?","msgtype":"m.text"},"ts":1396447643000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"Yes.","msgtype":"m.text"},"ts":1396447649000,"senderName":"IZh","senderId":"IZh@irc"},
{"content":{"body":"Double U eight ey tee double U Gee? What double U Gee?","msgtype":"m.text"},"ts":1396447707000,"senderName":"IZh","senderId":"IZh@irc"},
{"content":{"body":"The latter most go for. I don't think there's any official rule, though.","msgtype":"m.text"},"ts":1396447733000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"double hat wig","msgtype":"m.text"},"ts":1396447889000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"Whatwig","msgtype":"m.text"},"ts":1396447917000,"senderName":"IZh","senderId":"IZh@irc"},
{"content":{"body":"SimonSapin: Isn't that case covered by the \"Otherwise, if the next input code point is a newline, consume it.\" that comes right be before it?","msgtype":"m.text"},"ts":1396448203000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"yoav: wait, is this for \"consume a token\", \"consume an ident-like token\", or \"consume a string\" ?","msgtype":"m.text"},"ts":1396448266000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"consume a string","msgtype":"m.text"},"ts":1396448293000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"ah","msgtype":"m.text"},"ts":1396448298000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"I was looking at the wrong place","msgtype":"m.text"},"ts":1396448302000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"uhm, yes, it’s redundant now that we changed \\<EOF> to not be an error","msgtype":"m.text"},"ts":1396448358000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"SimonSapin: OK, great! I'll delete that if without guilt, then :)","msgtype":"m.text"},"ts":1396448468000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"yoav: Is this better? https://dvcs.w3.org/hg/csswg/raw-file/86568d6b9ce9/css-syntax/Overview.html#consume-a-string-token","msgtype":"m.text"},"ts":1396448779000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"(It’ll take a few minutes to propagate to dev.w3.org.)","msgtype":"m.text"},"ts":1396448791000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"SimonSapin: That's great!","msgtype":"m.text"},"ts":1396448867000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"SimonSapin: what is evil utf-8?","msgtype":"m.text"},"ts":1396451519000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: allows surrogates","msgtype":"m.text"},"ts":1396451542000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"SimonSapin: but is not CESU-8?","msgtype":"m.text"},"ts":1396451555000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"it’s unclear whether CESU-8 allows lone surrogate","msgtype":"m.text"},"ts":1396451571000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"I think it does not, as a consequence of UTF-16 not allowing them","msgtype":"m.text"},"ts":1396451588000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"SimonSapin: CESU-8 does not allow > U+FFFF","msgtype":"m.text"},"ts":1396451590000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"SimonSapin: that might be true in addition I suppose","msgtype":"m.text"},"ts":1396451610000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"what CESU-8 does is encode non-BMP stuff as a surrogate pair, which doesn’t affect the value-space","msgtype":"m.text"},"ts":1396451622000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"the point of \"evil UTF-8\" is to have the value space of JS strings","msgtype":"m.text"},"ts":1396451676000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"I proposed it as half a joke, but interestingly roc seems to think it’s realistic https://groups.google.com/forum/#!msg/mozilla.dev.servo/1K2-Qy27e3A/Q9DWOO8Nt3EJ","msgtype":"m.text"},"ts":1396451739000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"Looks interesting","msgtype":"m.text"},"ts":1396451803000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"SimonSapin: a problem with evil utf-8 is that its value space is actually bigger","msgtype":"m.text"},"ts":1396451856000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"how so?","msgtype":"m.text"},"ts":1396451863000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"SimonSapin: you can have paired surrogates as well as the actual code point","msgtype":"m.text"},"ts":1396451878000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"good point","msgtype":"m.text"},"ts":1396452024000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"hsivonen: congratulations!","msgtype":"m.text"},"ts":1396452048000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"so maybe it should be CESU-8 modified to allow lone surrogates","msgtype":"m.text"},"ts":1396452051000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"SimonSapin: the bad thing about that is that then you cannot just copy the input stream","msgtype":"m.text"},"ts":1396452077000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"SimonSapin: it's a tricky problem","msgtype":"m.text"},"ts":1396452100000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"indeed","msgtype":"m.text"},"ts":1396452102000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"would it make sense to only allow unpaired surrogates?","msgtype":"m.text"},"ts":1396452120000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"I guess you can accept that there will be two ways to represent certain code points","msgtype":"m.text"},"ts":1396452123000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"that sounds bad","msgtype":"m.text"},"ts":1396452145000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"makes == either wrong or hard to implement","msgtype":"m.text"},"ts":1396452165000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"It's a bit unclear to me how you can enforce that from JavaScript","msgtype":"m.text"},"ts":1396452169000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"If you can make it so that you only allow them unpaired, that would be interesting","msgtype":"m.text"},"ts":1396452187000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"when decoding a JS string, turn paired surrogates to 4-bytes sequences","msgtype":"m.text"},"ts":1396452208000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"There might be some tricky edge cases, where we store strings as a list and you use += with surrogates","msgtype":"m.text"},"ts":1396452281000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"But yeah, that seems sensible, especially since it should be the edge case, over time people will use the new Unicode escapes or utf-8 directly","msgtype":"m.text"},"ts":1396452329000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I don’t understand the list thing","msgtype":"m.text"},"ts":1396452463000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"but I think roc’s idea it to make this invisible from script, .charAt() would still give you UCS-2 units","msgtype":"m.text"},"ts":1396452499000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"SimonSapin: If you have a String stored as a fragment + pointer to next fragment","msgtype":"m.text"},"ts":1396452664000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Which I think spidermonkey sometimes does to make append fast","msgtype":"m.text"},"ts":1396452684000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: ok, what about it?","msgtype":"m.text"},"ts":1396452731000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"So if you had var a = low_surrogate + high_surrogate","msgtype":"m.text"},"ts":1396452753000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"You would have a string represented as (low_surrogate, pointer) (high_surrogate, null)","msgtype":"m.text"},"ts":1396452795000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"But semantically it would be one character","msgtype":"m.text"},"ts":1396452804000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"(I'm not sure this would be a big problem in practice)","msgtype":"m.text"},"ts":1396452862000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Presumably we would not use evil-utf-8 for those situations","msgtype":"m.text"},"ts":1396453035000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"good morning, Whatwg!","msgtype":"m.text"},"ts":1396453832000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"annevk: roc’s idea seems to be to use it for everything","msgtype":"m.text"},"ts":1396456320000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"SimonSapin: you mean he'd change all string types in SpiderMonkey? I somewhat doubt that","msgtype":"m.text"},"ts":1396456377000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk, hai! I think I'd like to explore your idea of an \"object list\" associated with Blobs a bit more.","msgtype":"m.text"},"ts":1396456464000,"senderName":"arunranga","senderId":"arunranga@irc"},
{"content":{"body":"https://groups.google.com/forum/#!msg/mozilla.dev.servo/1K2-Qy27e3A/Q9DWOO8Nt3EJ","msgtype":"m.text"},"ts":1396456472000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"annevk, doesn't this mean that user agents have to analyze code beforehand?","msgtype":"m.text"},"ts":1396456497000,"senderName":"arunranga","senderId":"arunranga@irc"},
{"content":{"body":"zcorpan: i went through it when srcset was first being discussed years ago.","msgtype":"m.text"},"ts":1396456526000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"arunranga: why?","msgtype":"m.text"},"ts":1396458656000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk, how is the object list constructed exactly?","msgtype":"m.text"},"ts":1396458683000,"senderName":"arunranga","senderId":"arunranga@irc"},
{"content":{"body":"arunranga: it's just something a blob has","msgtype":"m.text"},"ts":1396458754000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"arunranga: and other objects can use to make sure they can read the blob","msgtype":"m.text"},"ts":1396458767000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk, ok, but how do other objects get inserted into the list? How will a Blob deterministically add objects to it?","msgtype":"m.text"},"ts":1396458815000,"senderName":"arunranga","senderId":"arunranga@irc"},
{"content":{"body":"arunranga: the other objects would add themselves to it as part of their algorithms","msgtype":"m.text"},"ts":1396458866000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"arunranga: e.g. FormData would do it as part of serializing itself","msgtype":"m.text"},"ts":1396458879000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk, I see. So, if the Blob is CLOSED, an object can NOT add itself to the Blob's list. But pre-existing objects can still get serviced.","msgtype":"m.text"},"ts":1396458936000,"senderName":"arunranga","senderId":"arunranga@irc"},
{"content":{"body":"annevk, and CLOSED blobs might be GC'd when their object lists are empty.","msgtype":"m.text"},"ts":1396458964000,"senderName":"arunranga","senderId":"arunranga@irc"},
{"content":{"body":"yes","msgtype":"m.text"},"ts":1396458971000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk, I think this makes sense.","msgtype":"m.text"},"ts":1396459026000,"senderName":"arunranga","senderId":"arunranga@irc"},
{"content":{"body":"walks off to spec it","msgtype":"m.emote"},"ts":1396459044000,"senderName":"arunranga","senderId":"arunranga@irc"},
{"content":{"body":"is there no way to serialize an \"xml\" document as html?","msgtype":"m.text"},"ts":1396460567000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"i thought we'd extended XMLSerializer to support that?","msgtype":"m.text"},"ts":1396460581000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Create an HTML document, adopt node, then use that?","msgtype":"m.text"},"ts":1396460720000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"yeah, but that seems like a workaround","msgtype":"m.text"},"ts":1396461657000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"should be able to serialize it directly","msgtype":"m.text"},"ts":1396461666000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"<Hixie> zcorpan: i went through it when srcset was first being discussed years ago.","msgtype":"m.text"},"ts":1396463253000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"That was different.","msgtype":"m.text"},"ts":1396463379000,"senderName":"odinho","senderId":"odinho@irc"},
{"content":{"body":"what's an \"xml\" document, and how does it differ from an XML document","msgtype":"m.text"},"ts":1396463412000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"Proposal was very different back then. -- The way <picture> is being done now is vastly simpler. And the most interesting/needed parts of <picture> does not use the tag at all. The 90% use case is  <img> with \"sizes\" and \"srcset\" (albeit a different srcset than yours, the \"w\" modifier tells how wide the image is)","msgtype":"m.text"},"ts":1396463472000,"senderName":"odinho","senderId":"odinho@irc"},
{"content":{"body":"SamB: it doesn't differ. but it doesn't need to have come into being from parsing XML source. e.g. `new Document()` creates an XML document","msgtype":"m.text"},"ts":1396463516000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"SamB: whereas document.implementation.createHTMLDocument('foo') create an HTML document","msgtype":"m.text"},"ts":1396463537000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"<picture> is only metadata to an <img> that does the actual work.","msgtype":"m.text"},"ts":1396463543000,"senderName":"odinho","senderId":"odinho@irc"},
{"content":{"body":"Hixie: in http://lists.w3.org/Archives/Public/public-whatwg-archive/2012May/0247.html i see concern over verbosity, which i guess is still valid, but it turned out people didn't like the more terse solution with attributes on <img>","msgtype":"m.text"},"ts":1396463973000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Hixie: is it just verbosity or something else?","msgtype":"m.text"},"ts":1396463999000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"search for \"multiple-element\" in http://lists.w3.org/Archives/Public/public-whatwg-archive/2012Aug/0070.html","msgtype":"m.text"},"ts":1396464079000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"multiple-element structures are just a nightmare to manage","msgtype":"m.text"},"ts":1396464136000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"<video><source> and <select><option> are great examples","msgtype":"m.text"},"ts":1396464156000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"even <object> with its impact on descendants","msgtype":"m.text"},"ts":1396464165000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"zcorpan: is that the one with the crazy attribute naming?","msgtype":"m.text"},"ts":1396464170000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"they all suck so much","msgtype":"m.text"},"ts":1396464172000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: nightmare from which side(s)?","msgtype":"m.text"},"ts":1396464258000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"eveyone","msgtype":"m.text"},"ts":1396464267000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"authors, implementors, specs","msgtype":"m.text"},"ts":1396464274000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"so, um, what's better?","msgtype":"m.text"},"ts":1396464283000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"Hixie: i think <picture> sucks much less than <video>","msgtype":"m.text"},"ts":1396464287000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"SamB: anything that only involves one element, ideally one attribute.","msgtype":"m.text"},"ts":1396464299000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"zcorpan: i'd hope we'd have a higher bar than that...","msgtype":"m.text"},"ts":1396464315000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: that can perhaps get a bit TOO terse","msgtype":"m.text"},"ts":1396464317000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"though at least it doesn't have the crazy attribute names","msgtype":"m.text"},"ts":1396464357000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"SamB: an attribute just takes a string, there's nothing a priori terse or verbose about it","msgtype":"m.text"},"ts":1396464380000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"you could put an entire C++ program in there...","msgtype":"m.text"},"ts":1396464397000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hmm","msgtype":"m.text"},"ts":1396464397000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"or the machine code equivalent","msgtype":"m.text"},"ts":1396464409000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"or the java equivalent","msgtype":"m.text"},"ts":1396464417000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"maybe I'm just used to not being allowed newlines between \" and \"","msgtype":"m.text"},"ts":1396464418000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"just to give three examples along the line of \"terse-verbose\"","msgtype":"m.text"},"ts":1396464431000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: sure. we tried different things and so far it seems this sucks the least, and it seems implementors are on board now","msgtype":"m.text"},"ts":1396464440000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Hixie: anyway, looking at the email...","msgtype":"m.text"},"ts":1396464446000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Hixie: which one was supposed to be the terse one","msgtype":"m.text"},"ts":1396464448000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"zcorpan: yeah, well, i just hope someone else has to clean up the mess, cos i don't want to, that's for sure","msgtype":"m.text"},"ts":1396464466000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I'm afraid it's your job","msgtype":"m.text"},"ts":1396464477000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"zcorpan: took me long enough to clean up <select>'s mess","msgtype":"m.text"},"ts":1396464477000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: \"they introduce the need for much more elaborate error handling,\" is handled fine in the spec, it's not really much more elaborate","msgtype":"m.text"},"ts":1396464493000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"And maybe better to clean it up while it can still be changes","msgtype":"m.text"},"ts":1396464493000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"changed*","msgtype":"m.text"},"ts":1396464498000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Hixie: i'm pre-emptively working on having it clean :-)","msgtype":"m.text"},"ts":1396464522000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Hixie: but i have to monkey-patch html which sucks","msgtype":"m.text"},"ts":1396464537000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Hixie: \"the processing model has to deal with changes more complicated than just \"change\" (what if an element is added or removed, or moved?)\" - true, but it's covered. it's \"just\" a list of mutations that trigger an algorithm","msgtype":"m.text"},"ts":1396464607000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: would you like to just own the entire <img> section? I can just have it automatically import from some doc you maintain","msgtype":"m.text"},"ts":1396464638000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"zcorpan: when you say implementors are on board now, who are you referring to?","msgtype":"m.text"},"ts":1396464643000,"senderName":"hober","senderId":"hober@irc"},
{"content":{"body":"zcorpan: i'm sure it's covered, but how many bugs does it have? how many edge cases have you forgotten? how many race conditions will we run into?","msgtype":"m.text"},"ts":1396464795000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"zcorpan: we are _still_ fixing <source>, years later","msgtype":"m.text"},"ts":1396464804000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hober: mozilla and blink at least are working on implementing now. not sure about apple and microsoft but i don't think there have been negative signals","msgtype":"m.text"},"ts":1396464808000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: and the bugs we're finding aren't any simpler than they were at first, in fact i'd say they're much more insidious and hard to fix now than they were when we started","msgtype":"m.text"},"ts":1396464833000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"zcorpan: if i could go back, i'd never introduce <source>","msgtype":"m.text"},"ts":1396464841000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: yeah i agree about <video>'s <source>, but <picture>'s <source> isn't the same. i'm not saying there won't be bugs or that it will be easy this time, but i think i've learned the lesson about <video><source> :-)","msgtype":"m.text"},"ts":1396464896000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"what i'm saying is that the lesson i learnt is \"never again\"","msgtype":"m.text"},"ts":1396464912000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i'm serious about the offer to just give you ownership of <img>","msgtype":"m.text"},"ts":1396464924000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"(also, i assume there's no actual <source> in this <picture> thing? you're using <img>, right? not <source>?)","msgtype":"m.text"},"ts":1396464985000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"that's ok with me. let's wait a bit with that though to see how things shake out","msgtype":"m.text"},"ts":1396464987000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"it's <source>","msgtype":"m.text"},"ts":1396464997000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"please don't overload <source>","msgtype":"m.text"},"ts":1396465013000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"what's the problem with that? <source> in itself doesn't do anything. also the attributes are different","msgtype":"m.text"},"ts":1396465040000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"i don't want to have to deal with a bug where <source> is in a shadow dom and then grafted into a <video> while the <picture> processing model is running and then on the next microtask it's moved to a different shadow dom with an <audio>","msgtype":"m.text"},"ts":1396465076000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"we could call it something else i guess, but <img> would be bad for back-compat","msgtype":"m.text"},"ts":1396465104000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"(also, you say <picture> is simpler, but you have _three_ elements?)","msgtype":"m.text"},"ts":1396465110000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1396465132000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"that's not simpler.","msgtype":"m.text"},"ts":1396465137000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"you're gonna have so much pain.","msgtype":"m.text"},"ts":1396465145000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"anyway. please avoid interacting with other elements so we never have to worry about the case above.","msgtype":"m.text"},"ts":1396465170000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"e.g. overloading existing elements","msgtype":"m.text"},"ts":1396465181000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"let's keep this very self-contained","msgtype":"m.text"},"ts":1396465197000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i'll file a bug about the <source> tag name, thanks","msgtype":"m.text"},"ts":1396465207000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"https://github.com/ResponsiveImagesCG/picture-element/issues/133","msgtype":"m.text"},"ts":1396465769000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Hixie: let's go on with the old email, in case there's something more that isn't addressed already","msgtype":"m.text"},"ts":1396466041000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Hixie: \"it introduces complexities in the algorithms to deal with unexpected text nodes, comment nodes, PIs, etc.\" - that's handled, it just skips over anything that isn't a <source> or the <img> element itself","msgtype":"m.text"},"ts":1396466107000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"by \"it's handled\" in all these cases you presumably mean \"i think i have handled that because it does in fact need to be handled with this design, though it wouldn't have to be if we avoided a multiple element design, and i've no idea if there won't be subtle bugs found with it later\"","msgtype":"m.text"},"ts":1396466210000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: \"it introduces some complexity in the parser, ...\" - that's handled, the algorithm starts when <img> is seen (it's <img> that does the \"work\"), and at that point all information is already there. anything after it is ignored","msgtype":"m.text"},"ts":1396466216000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"what if the img is in a different document than the <picture>?","msgtype":"m.text"},"ts":1396466238000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"does it still handle it then?","msgtype":"m.text"},"ts":1396466247000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"yeah then the <picture> wouldn't be a parent of the <img> so it would act like it was just the <img> and no <picture>","msgtype":"m.text"},"ts":1396466285000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"my point is that these are questions that just don't come up if you don't do a multiple-element design","msgtype":"m.text"},"ts":1396466349000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"ok. yep that's true","msgtype":"m.text"},"ts":1396466482000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Hixie: thanks for the feedback","msgtype":"m.text"},"ts":1396466618000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: i've put markers in the spec for the part that i'm ready to hand off to you. let me know when you're ready to take it, and i'll replace that segment with a #include that merges your source in.","msgtype":"m.text"},"ts":1396466641000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"that way you shouldn't have to worry about hooks.","msgtype":"m.text"},"ts":1396466664000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"or monkeypatching.","msgtype":"m.text"},"ts":1396466668000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"ok cool","msgtype":"m.text"},"ts":1396466687000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"i'm ready when you've fixed my bugs :-D","msgtype":"m.text"},"ts":1396466715000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: if you're going to be fiddling with that stuff anyway, might be best for you to just fix them as part of rejigging that part of the spec :-)","msgtype":"m.text"},"ts":1396466825000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: sorry, not ready yet! :-P","msgtype":"m.text"},"ts":1396466858000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":":-)","msgtype":"m.text"},"ts":1396466872000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"multi-element images is bizarre and out of place because of the two xml-like axes for data (sub-elements and attributes), html has always chosen attributes","msgtype":"m.text"},"ts":1396467071000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"not always, but every time it's chosen elements it has been a mistake, imho.","msgtype":"m.text"},"ts":1396467154000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"wonders about title of this section: http://www.whatwg.org/html#the-document-object","msgtype":"m.emote"},"ts":1396468760000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"I mean, why's that called Document and not HTMLDocument","msgtype":"m.text"},"ts":1396469260000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"somehow doubts the people responsible for the package in question are at fault WRT the non-free junk","msgtype":"m.emote"},"ts":1396469431000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"er.","msgtype":"m.text"},"ts":1396469455000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"ECHAN","msgtype":"m.text"},"ts":1396469457000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"hates it when he does that","msgtype":"m.emote"},"ts":1396469462000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"SamB: some people think there should be only Document, not Document and HTMLDocument","msgtype":"m.text"},"ts":1396470454000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"that doesn't match the reality too well atm","msgtype":"m.text"},"ts":1396470472000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"it would perhaps be easier to work towards that by starting with the way things are now?","msgtype":"m.text"},"ts":1396471052000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"smaug____: it's not so much that we think there should only be one, it's that having two makes no sense in a multi-namespace world","msgtype":"m.text"},"ts":1396471072000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"SamB: specs point to where we should be, not where we are (or were)","msgtype":"m.text"},"ts":1396471109000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"well, it is not clear what kinds of documents XHR should return for example","msgtype":"m.text"},"ts":1396471266000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"if there's only one kind of document, it seems pretty clear :-)","msgtype":"m.text"},"ts":1396471290000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"adding all the legacy html stuff there doesn't make much sense","msgtype":"m.text"},"ts":1396471292000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"since lots of those APIs would be just broken","msgtype":"m.text"},"ts":1396471305000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"So yes, somebody needs to go through the various APIs returning documents and make suggestions","msgtype":"m.text"},"ts":1396471324000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Though I'm not super convinced that not exposing certain members here and there will actually be a large benefit","msgtype":"m.text"},"ts":1396471360000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"i don't understand","msgtype":"m.text"},"ts":1396471389000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"why would we want to hide certain APIs?","msgtype":"m.text"},"ts":1396471394000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"just have them return null, etc","msgtype":"m.text"},"ts":1396471398000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"pretty sure we already do that anyway","msgtype":"m.text"},"ts":1396471407000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"e.g. if you hold onto a Document that's been ungrafted from browsing contexts","msgtype":"m.text"},"ts":1396471428000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"We do, we also discussed this on the WHATWG list","msgtype":"m.text"},"ts":1396471446000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1396471466000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I'm not sure what camp I'm in, I'd like this to move forward though","msgtype":"m.text"},"ts":1396471472000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"i don't really understand what's controversial at this point","msgtype":"m.text"},"ts":1396471473000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i thought this was all long resolved","msgtype":"m.text"},"ts":1396471476000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"really? I thought this was never resolved","msgtype":"m.text"},"ts":1396471500000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"but was just a thing which was spec'ed to be different what implementations do","msgtype":"m.text"},"ts":1396471523000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"but I don't have a strong opinion on this one","msgtype":"m.text"},"ts":1396471535000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"claiming that we already have everything on Document doesn't seem to have made it happen, somehow ...","msgtype":"m.text"},"ts":1396471699000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"nobody is claiming that","msgtype":"m.text"},"ts":1396471712000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"wonders why nobody minds SVG being multi-element","msgtype":"m.emote"},"ts":1396472757000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"more than half the e-mails i have pending in my \"canvas\" folder are from adobe","msgtype":"m.text"},"ts":1396472955000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"and the majority of the rest are from junov...","msgtype":"m.text"},"ts":1396472980000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"perhaps we should hire junov...","msgtype":"m.emote"},"ts":1396473005000,"senderName":"astearns","senderId":"astearns@irc"},
{"content":{"body":"wonders how they add stuff to Java's DOM APIs ...","msgtype":"m.emote"},"ts":1396473820000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"hmm, I don't suppose anyone would much care if *these* actually stayed on HTMLDocument until the heat death of the universe: http://www.whatwg.org/specs/web-apps/current-work/multipage/obsolete.html#Document-partial","msgtype":"m.text"},"ts":1396474664000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"HTMLDocument doesn't exist anymore according to the HTML Spec.","msgtype":"m.text"},"ts":1396474679000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"per spec, document instanceof HTMLDocument returns true only because Document === HTMLDocument","msgtype":"m.text"},"ts":1396474715000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"(\"For historical reasons, Window objects must also have a writable, configurable, non-enumerable property named HTMLDocument whose value is the Document interface object.\")","msgtype":"m.text"},"ts":1396474732000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hmm, that wasn't in the index","msgtype":"m.text"},"ts":1396474795000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"which index would it be in? it's not an interface, event, element, attribute, or content model","msgtype":"m.text"},"ts":1396474870000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"it *used* to be an interface though","msgtype":"m.text"},"ts":1396474960000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"yes","msgtype":"m.text"},"ts":1396475010000,"senderName":"Hixie","senderId":"Hixie@irc"}
]