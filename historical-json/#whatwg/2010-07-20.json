[
{"content":{"body":"ugh, why won't black berry let me set a frame/iframe's src attribute in a loop ","msgtype":"m.text"},"ts":1279592460000,"senderName":"wirepair","senderId":"wirepair@irc"},
{"content":{"body":"hey all, anyone know how I could get a rough snapshot of how many Japanese pages declare their language (without having to take a random sample and check each one)?","msgtype":"m.text"},"ts":1279597980000,"senderName":"boblet","senderId":"boblet@irc"},
{"content":{"body":"watches the tumbleweed roll past","msgtype":"m.emote"},"ts":1279612740000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"bah, it looks like MIME for <video> is irreparably broken already","msgtype":"m.text"},"ts":1279618680000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"foolip: And you are surprised why?","msgtype":"m.text"},"ts":1279619040000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"It's not like Content-Type has a glorious history of success","msgtype":"m.text"},"ts":1279619100000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"because Safari and Chrome have been broken all along and I never noticed","msgtype":"m.text"},"ts":1279619101000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"so I thought the state of things were good","msgtype":"m.text"},"ts":1279619102000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"not so","msgtype":"m.text"},"ts":1279619160000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"By \"good\" I guess you mean \"good for theoretical purity\", not \"good for users\"?","msgtype":"m.text"},"ts":1279619220000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"mostly good as in \"can point browser to URL without getting a window-full of garbled text\"","msgtype":"m.text"},"ts":1279619280000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"as that tends to happen with things served as text/plain","msgtype":"m.text"},"ts":1279619281000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"(at least in Opera)","msgtype":"m.text"},"ts":1279619282000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"In general I think","msgtype":"m.text"},"ts":1279619340000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"But \"I want to reload this <video> as a top-level resource\" seems like rather a minor use0case compared to \"I want to serve some video and I have no idea how to configure my server\"","msgtype":"m.text"},"ts":1279619341000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Unless you believe that only qualified professionals will host <video> I guess","msgtype":"m.text"},"ts":1279619400000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"indeed, and many questions on e.g. stack overflow have turned out to be due to MIME","msgtype":"m.text"},"ts":1279619401000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"the \"youtube\" scenario","msgtype":"m.text"},"ts":1279619402000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"still, no one has argued this point on the lists, as far as I remember","msgtype":"m.text"},"ts":1279619403000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"Which point?","msgtype":"m.text"},"ts":1279619460000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"that we should simply ignore the MIME type because it's easier","msgtype":"m.text"},"ts":1279619461000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"Maybe people don't like getting into pointless discussions with Julian","msgtype":"m.text"},"ts":1279619462000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"It is easier if you point out that it is a compatibility requirement and so driven by market forces","msgtype":"m.text"},"ts":1279619520000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"I guess it's easier to just slide down the slippery slope and blame market forces when we have to change the spec to match reality","msgtype":"m.text"},"ts":1279619521000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"hehe, right","msgtype":"m.text"},"ts":1279619522000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"who is Julian, by the way?","msgtype":"m.text"},"ts":1279619640000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"Googles","msgtype":"m.emote"},"ts":1279619700000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"conclusion: someone who makes a WebDAV client for the iPhone ","msgtype":"m.text"},"ts":1279619760000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"Julian Reschke (+/- spelling)","msgtype":"m.text"},"ts":1279619761000,"senderName":"Workshiva","senderId":"Workshiva@irc"},
{"content":{"body":"He's the most active participant coming from the IETF side of things, more or less","msgtype":"m.text"},"ts":1279619880000,"senderName":"Workshiva","senderId":"Workshiva@irc"},
{"content":{"body":"foolip, jgraham: honestly a large part of our motivation was actual experience with people trying to move from the QuickTime plugin to <video>... they never even knew their server was configured wrong","msgtype":"m.text"},"ts":1279619881000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"othermaciej, was this communicated to the list?","msgtype":"m.text"},"ts":1279619940000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"I mentioned that it was for compatibility with content originally created for QuickTime in a public-html post","msgtype":"m.text"},"ts":1279619941000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"othermaciej, perhaps it was before my time","msgtype":"m.text"},"ts":1279619942000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"but anyway, it was more for existing video content than for new content","msgtype":"m.text"},"ts":1279619943000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"oh, you mean was it communicated before just now?","msgtype":"m.text"},"ts":1279619944000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"yes","msgtype":"m.text"},"ts":1279619945000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"I dunno","msgtype":"m.text"},"ts":1279620000000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"anyway, placing blame isn't the point, I'm just trying to figure out what to do now","msgtype":"m.text"},"ts":1279620001000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"when we first implemented <video> we were not following public-html much","msgtype":"m.text"},"ts":1279620002000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"the easiest is of course to always ignore the MIME type","msgtype":"m.text"},"ts":1279620003000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"IMO <video> should have the same \"ignore MIME type always sniff\" policy as <img>","msgtype":"m.text"},"ts":1279620004000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"is it even remotely possible to remove support for text/plain in Safari now?","msgtype":"m.text"},"ts":1279620005000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"I am also ok with reducing <video> sniffing to a few specific types","msgtype":"m.text"},"ts":1279620060000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"othermaciej, wouldn't that break deployed content?","msgtype":"m.text"},"ts":1279620061000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"i kind of like that 'open video in new tab' in the context menu would play the video in a new tab and not show garbage in a new tab","msgtype":"m.text"},"ts":1279620062000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"but maybe we should sniff there too","msgtype":"m.text"},"ts":1279620063000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"foolip: my guess is that there are only 3 kinds of errors that are remotely common","msgtype":"m.text"},"ts":1279620064000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"(a) video improperly served as application/octet-stream","msgtype":"m.text"},"ts":1279620120000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"(b) video improperly served as text/plain","msgtype":"m.text"},"ts":1279620121000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"zcorpan_, yeah, more sniffing would solve it, but that would mean duplicating the same sniffing in the browsers network layer and in the media framework","msgtype":"m.text"},"ts":1279620122000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"(or audio in both these cases!)","msgtype":"m.text"},"ts":1279620123000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"(c) audio/video served with a MIME type for some different audio/video type","msgtype":"m.text"},"ts":1279620124000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"right, I can't imagine there's anything outside of those that are relevant","msgtype":"m.text"},"ts":1279620180000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"the spec currently doesn't support text/plain from that list","msgtype":"m.text"},"ts":1279620181000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"does the spec support (c)?","msgtype":"m.text"},"ts":1279620182000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"yes","msgtype":"m.text"},"ts":1279620183000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"if the other type is supported at least","msgtype":"m.text"},"ts":1279620184000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"there's also the issue of which audio/video mime types should be supported","msgtype":"m.text"},"ts":1279620240000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"we could maybe do experiments to see if limiting sniffing to (a)+(c) or (a)+(b)+(c) is viable","msgtype":"m.text"},"ts":1279620241000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"right, the spec already implicitly requires sniffing after getting through the load-time \"canPlayType\"","msgtype":"m.text"},"ts":1279620242000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"e.g. audio/mp3 ?","msgtype":"m.text"},"ts":1279620243000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"I know that at the time we first implemented <video>, that video content served as text/plain was alarmingly common","msgtype":"m.text"},"ts":1279620244000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"my guess would be that the proportion is now lower but the absolute amount, maybe not","msgtype":"m.text"},"ts":1279620300000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"what you're saying is effectively that Safari will keep ignoring the MIME type","msgtype":"m.text"},"ts":1279620360000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"newer apaches don't send text/plain by default for unknown types","msgtype":"m.text"},"ts":1279620361000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"there's no point in limiting to video/known, application/octet-stream and text/plain, IMO","msgtype":"m.text"},"ts":1279620362000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"what do newer apaches send, nothing?","msgtype":"m.text"},"ts":1279620363000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"or application/octet-stream?","msgtype":"m.text"},"ts":1279620364000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"i think they moved from text/plain to application/octet-stream to no content-type header at all","msgtype":"m.text"},"ts":1279620420000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"don't know which versions","msgtype":"m.text"},"ts":1279620421000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"foolip: what would your preference be? no sniffing at all? current spec (a/o-s + video/known)?","msgtype":"m.text"},"ts":1279620422000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"othermaciej, my absolute preference would be Firefox's behavior, but it seems unlikely Safari could match that","msgtype":"m.text"},"ts":1279620480000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"what does Firefox do?","msgtype":"m.text"},"ts":1279620481000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"it only accepts its known media types and fails to play e.g. Ogg served as audio/wav","msgtype":"m.text"},"ts":1279620482000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"that's harder to do when using GStreamer/QuickTime, but possible","msgtype":"m.text"},"ts":1279620483000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"uh, I don't know why I said \"absolute preference\"","msgtype":"m.text"},"ts":1279620540000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"I guess they are less interested in mpeg-2, mpeg-4 or legacy QuickTime being served with wrong MIME types","msgtype":"m.text"},"ts":1279620541000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"indeed","msgtype":"m.text"},"ts":1279620542000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"presumably for ogg, there is no/less legacy of mislabeled content","msgtype":"m.text"},"ts":1279620543000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"but the day that Safari + everyone else support a common media type, this problem will show up","msgtype":"m.text"},"ts":1279620544000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"(or for WebM)","msgtype":"m.text"},"ts":1279620600000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"writes mail","msgtype":"m.emote"},"ts":1279620840000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"hsivonen: \"I don't know if it is even *possible* to make Apache omit the Content-Type header\" - like 'DefaultType none'? (http://httpd.apache.org/docs/2.2/mod/core.html#defaulttype)","msgtype":"m.text"},"ts":1279624440000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"(That took about one minute of documentation-reading to find)","msgtype":"m.text"},"ts":1279624441000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: Does that work now?","msgtype":"m.text"},"ts":1279624620000,"senderName":"Workshiva","senderId":"Workshiva@irc"},
{"content":{"body":"It says \"DefaultType None is only available in httpd-2.2.7 and later.\" so any version from January 2008 onwards should support it","msgtype":"m.text"},"ts":1279624680000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"(Confusingly 2.2.7 was never actually released)","msgtype":"m.text"},"ts":1279624681000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: Considering the upgrade rate on apache installs, it will be useful around 2015 then :)","msgtype":"m.text"},"ts":1279624980000,"senderName":"Workshiva","senderId":"Workshiva@irc"},
{"content":{"body":"Workshiva: Do you have data for that? :-)","msgtype":"m.text"},"ts":1279625220000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Even people who upgrade Apache may keep their existing config.","msgtype":"m.text"},"ts":1279625280000,"senderName":"Smylers","senderId":"Smylers@irc"},
{"content":{"body":"Philip`: No, just personal bitterness from having to use apache 1.x as recently as this year","msgtype":"m.text"},"ts":1279625340000,"senderName":"Workshiva","senderId":"Workshiva@irc"},
{"content":{"body":"And DefaultType none isn't the default, so people setting up sites with a sufficiently new Apache still need to know to change it.","msgtype":"m.text"},"ts":1279625341000,"senderName":"Smylers","senderId":"Smylers@irc"},
{"content":{"body":"Smylers: hsivonen was talking about not knowing how to configure Apache's default, not about what the default default is","msgtype":"m.text"},"ts":1279625400000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Workshiva: http://philip.html5.org/data/server-versions-2.txt","msgtype":"m.text"},"ts":1279625401000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Workshiva: Hmm, the 2.2s look fairly evently distributed before and after 2.2.7","msgtype":"m.text"},"ts":1279625460000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"plus there's still loads of 2.0 and 1.3","msgtype":"m.text"},"ts":1279625461000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Yeah, those numbers don't surprise me","msgtype":"m.text"},"ts":1279625520000,"senderName":"Workshiva","senderId":"Workshiva@irc"},
{"content":{"body":"(in data from early 2009)","msgtype":"m.text"},"ts":1279625521000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Apache 3.5.1, though? That's a surprise","msgtype":"m.text"},"ts":1279625522000,"senderName":"Workshiva","senderId":"Workshiva@irc"},
{"content":{"body":"Yeah, I know. I was just pointing out that Workshiva's 2015 estimate may still be optimistic for being able to expect sites to be configured correctly.","msgtype":"m.text"},"ts":1279625523000,"senderName":"Smylers","senderId":"Smylers@irc"},
{"content":{"body":"Smylers: The estimate for sites being configured correctly is and will remain Infinity","msgtype":"m.text"},"ts":1279625580000,"senderName":"Workshiva","senderId":"Workshiva@irc"},
{"content":{"body":"notes that Apache looks much more common that IIS (by over 3x), which seems significantly different to Netcraft's figures","msgtype":"m.emote"},"ts":1279625640000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"So the choice is between waiting for infinity, or deciding that if an author has used the <video> element and its contents are identifiable as being a video then the intention is to play it as a video?","msgtype":"m.text"},"ts":1279625700000,"senderName":"Smylers","senderId":"Smylers@irc"},
{"content":{"body":"Do Netcraft tally up pages or websites or IP addresses or servers?","msgtype":"m.text"},"ts":1279625701000,"senderName":"Smylers","senderId":"Smylers@irc"},
{"content":{"body":"what have I done","msgtype":"m.text"},"ts":1279625760000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"Workshiva: One of Apache/3.5.1 was on www.61.gov.cn, so presumably it's a secret project being developed for the Chinese government","msgtype":"m.text"},"ts":1279625820000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Smylers: They count something complex","msgtype":"m.text"},"ts":1279626000000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"http://news.netcraft.com/active-sites/","msgtype":"m.text"},"ts":1279626001000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"The third graph in http://news.netcraft.com/archives/2010/07/16/july-2010-web-server-survey-16.html doesn't look good for Microsoft","msgtype":"m.text"},"ts":1279626060000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"foolip: I'll continue that thread tomorrow after I've talked to Chris Double and got our story straight","msgtype":"m.text"},"ts":1279626120000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"and looks closer to the wildly inaccurate numbers that I have","msgtype":"m.text"},"ts":1279626180000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"so I guess one can conclude that the graphs are pretty meaningless as indicators of market share, since there's huge jumps when a single large provider changes or when the methodology changes","msgtype":"m.text"},"ts":1279626240000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: thanks","msgtype":"m.text"},"ts":1279626420000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"Alternatively, you can conclude that a wide range of graphs are available to pick from, to support your choice of view point...","msgtype":"m.text"},"ts":1279626480000,"senderName":"Smylers","senderId":"Smylers@irc"},
{"content":{"body":"Philip`: to split hairs, I didn't talk about not knowing how to configure the default. I was talking about how to take the header away by default.","msgtype":"m.text"},"ts":1279626481000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"aside: at one point, I configured hsivonen.iki.fi to default to application/octet-stream but somehow it has regressed to text/plain...","msgtype":"m.text"},"ts":1279626600000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: I thought you talked about how to \"configure to send no type as the fallback\", i.e. configuring the default that will be sent (or rather not sent) when no other type has been specified for the file","msgtype":"m.text"},"ts":1279626660000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"hsivonen: I'm sure the distros have a hand in the pie as well","msgtype":"m.text"},"ts":1279626720000,"senderName":"Workshiva","senderId":"Workshiva@irc"},
{"content":{"body":"Philip`: I know how to change it from text/plain to application/octet-stream. I didn't know how to change it to \"no type\"","msgtype":"m.text"},"ts":1279626780000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"Workshiva: they sure do","msgtype":"m.text"},"ts":1279626781000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: That makes it sound like you didn't know \"DefaultType none\", so I'm slightly confused as to what hairs are being split","msgtype":"m.text"},"ts":1279626900000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"(I think my original thought was just that claiming to not personally know something that's trivially findable in the documentation didn't seem like a compelling or relevant argument, and didn't seem like a reason to non-historically blame Apache for anything)","msgtype":"m.text"},"ts":1279627080000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"(I may just be misunderstanding the argument, though)","msgtype":"m.text"},"ts":1279627140000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: the argument is that you need to know or bother to find out stuff to make Apache behave","msgtype":"m.text"},"ts":1279627200000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"Apache probably can't change the default for compat reasons anyway","msgtype":"m.text"},"ts":1279627500000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"wouldn't e.g. README files get the default?","msgtype":"m.text"},"ts":1279627501000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"roc, OK, I'm holding off any changes, but thanks for taking the time","msgtype":"m.text"},"ts":1279627560000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"foolip: yes","msgtype":"m.text"},"ts":1279627561000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"is there any successful standard with lots of implementors and users that isn't a big pile of cruft?","msgtype":"m.text"},"ts":1279627680000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"maybe PNG? or maybe it's just the same if one looks closer...","msgtype":"m.text"},"ts":1279627681000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"I was thinking of Western Continental European electrical sockets, but even they have at least 3 points of compat cruft","msgtype":"m.text"},"ts":1279627740000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen, the kind we have in Sweden and presumably Finland?","msgtype":"m.text"},"ts":1279627800000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"foolip: right","msgtype":"m.text"},"ts":1279627801000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"(but, insanely, not in Denmark!)","msgtype":"m.text"},"ts":1279627802000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"the double ground is a bit odd, is that one of the 3?","msgtype":"m.text"},"ts":1279627803000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"foolip: I was thinking: 1) German ground, 2) French ground, 3) support for ungrounded devices in an Italian-compatible way","msgtype":"m.text"},"ts":1279627920000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"foolip: though one might argue that's only 2 pieces of cruft, since one grounding method has to count as non-cruft","msgtype":"m.text"},"ts":1279627921000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"oh, looks like I'm blissfully unaware of the inner workings of electrical sockets :)","msgtype":"m.text"},"ts":1279627922000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"and actually, these are plug features, not socket features, to be precise","msgtype":"m.text"},"ts":1279627980000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"thinks the EU should fine Denmark for the environmental waste of vendors having to ship different plugs there","msgtype":"m.emote"},"ts":1279628040000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"it makes *no* sense for Denmark to have differently shaped plugs","msgtype":"m.text"},"ts":1279628041000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"I say fine Denmark regardless :)","msgtype":"m.text"},"ts":1279628042000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"hsivonen: I note that the wiring laws in Sweden are insane (or have been so historically) and the design of the plug allows unsafe wiring","msgtype":"m.text"},"ts":1279648560000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Specifically grounding sockets is distressingly uncommon in residential properties (I think it is now required in new-build)","msgtype":"m.text"},"ts":1279648620000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"And the plug fails-unsafe if you plug into a non-grounded socket (i.e. it is possible to plug an appliance that should be grounded into a non-grounded socket and have it work, just without grounding)","msgtype":"m.text"},"ts":1279648680000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"So I would not really call that ideal design","msgtype":"m.text"},"ts":1279648740000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"(by contrast the UK plug design with a mandatoy ground pin seems safer)","msgtype":"m.text"},"ts":1279648860000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"UK shaver/bathroom plugs only have two pins","msgtype":"m.text"},"ts":1279649040000,"senderName":"hober","senderId":"hober@irc"},
{"content":{"body":"Indeed","msgtype":"m.text"},"ts":1279649100000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"They are low volatge though","msgtype":"m.text"},"ts":1279649101000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"(in general we don't have much in the way of electrics in the bathroom)","msgtype":"m.text"},"ts":1279649160000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"(because, uh, we don't like dying)","msgtype":"m.text"},"ts":1279649161000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"We just make sure that bathroom sockets have a breaker built-in, so they'll cut out quicker.","msgtype":"m.text"},"ts":1279649280000,"senderName":"tabatkins","senderId":"tabatkins@irc"},
{"content":{"body":"Swiss use three plugs, but apparently the middle one is optional because standard two-plug plugs work fine with three-hole sockets","msgtype":"m.text"},"ts":1279649281000,"senderName":"Workshiva","senderId":"Workshiva@irc"},
{"content":{"body":"Yeah, that's American sockets too.","msgtype":"m.text"},"ts":1279649400000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"high-fives the swiss.","msgtype":"m.emote"},"ts":1279649401000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins: OTOH the US plugs fricking *spark* when you insert them","msgtype":"m.text"},"ts":1279649520000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: They do!  It's kinda cool.","msgtype":"m.text"},"ts":1279649521000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"So you have nothing to be proud of","msgtype":"m.text"},"ts":1279649522000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"I have never known anyone to have ever actually been shocked by the sparking, so shrug.","msgtype":"m.text"},"ts":1279649640000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Standard European plugs are the only worthwhile ones","msgtype":"m.text"},"ts":1279649641000,"senderName":"Workshiva","senderId":"Workshiva@irc"},
{"content":{"body":"Everyone else needs to get in line","msgtype":"m.text"},"ts":1279649642000,"senderName":"Workshiva","senderId":"Workshiva@irc"},
{"content":{"body":"hopes like crazy Sweden at least has radial wiring","msgtype":"m.emote"},"ts":1279649880000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"umm... I'm not sure if that's what I mean","msgtype":"m.text"},"ts":1279650000000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"reads more","msgtype":"m.emote"},"ts":1279650001000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: yeah, the plug design isn't ideal","msgtype":"m.text"},"ts":1279650060000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"but I assume the ability to plug to a non-grounded socket is a deliberate design decision","msgtype":"m.text"},"ts":1279650120000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"IIRC, the North American gounding pin has the opposite design","msgtype":"m.text"},"ts":1279650121000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"Yes.","msgtype":"m.text"},"ts":1279650240000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"(it blew my mind when I learned that the UK design isn't electrically equivalent to the continental design)","msgtype":"m.text"},"ts":1279650241000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"jgraham: I misread that as “because, uh, we don't like drying” — which also kind-of works as an explanation.","msgtype":"m.text"},"ts":1279650242000,"senderName":"Smylers","senderId":"Smylers@irc"},
{"content":{"body":"non-grounded plugs can go to a grounded socket, but not the other way around.","msgtype":"m.text"},"ts":1279650243000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"(that is, in UK and Ireland, there's a device-side fuse in each plug, while the Continental design puts the fuse in a fuse box on the socket side)","msgtype":"m.text"},"ts":1279650300000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: In what way \"not electrically equivalent\" the ring main vs radial thing? Or something else?","msgtype":"m.text"},"ts":1279650301000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: fuse placement. see above","msgtype":"m.text"},"ts":1279650302000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"jgraham: and whatever ring vs. radial stuff comes with that","msgtype":"m.text"},"ts":1279650303000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"notes that the UK also typically has circuit breakers on the whole circuit","msgtype":"m.emote"},"ts":1279650304000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"AFAICT from wikipedia the whole UK design was inspired by a need to save copper when everything was rebuild post WW2","msgtype":"m.text"},"ts":1279650360000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"It seems that a ring main is a way to achieve that but you have to also have fuses in the appliances","msgtype":"m.text"},"ts":1279650420000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"(because the saving coppewr thing means that you are running lots of appliances off the same circuit)","msgtype":"m.text"},"ts":1279650480000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Is there a name for rgb color units?  The things that there are 255 of in each channel?","msgtype":"m.text"},"ts":1279650540000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"putting the fuse on the plug side implies that the treat model assumes the devices are trusted and cooperative","msgtype":"m.text"},"ts":1279650541000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: Howso?","msgtype":"m.text"},"ts":1279650542000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"I was aware that European voltages saved copper compared to American, but I wasn't aware that the UK design saved even more","msgtype":"m.text"},"ts":1279650600000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"jgraham: if the design requires a device-side fuse, the system isn' fused right if you plug in a rogue (cheap?) device that doesn't have a fuse","msgtype":"m.text"},"ts":1279650601000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: The whole circuit is still fused","msgtype":"m.text"},"ts":1279650660000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"has seen cheap adapters that allow fuseless devices to be plugged into UK sockets","msgtype":"m.emote"},"ts":1279650661000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"thought it was a legal requirement that devices do things correctly (i.e. have fuses, and are grounded or double-insulated)","msgtype":"m.emote"},"ts":1279650662000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: I think so too","msgtype":"m.text"},"ts":1279650663000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"I guess maybe you could buy an unfused travel adaptor and bring it to the UK","msgtype":"m.text"},"ts":1279650720000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"hsivonen: And the adapters themselves don't have fuses in them?","msgtype":"m.text"},"ts":1279650721000,"senderName":"Smylers","senderId":"Smylers@irc"},
{"content":{"body":"Smylers: proper ones have, but I've seen bogus ones","msgtype":"m.text"},"ts":1279650722000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: Yes, in that specific case you are in marginally more danger. Although wikipedia claims that modern circuit breakers are likely to trip before the fuse blows anyway","msgtype":"m.text"},"ts":1279650780000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Smylers: the bogus ones are a piece of plastic that has an extended that goes into the grounding hole openin the other slots for a continental plug","msgtype":"m.text"},"ts":1279650781000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"s/extended/extender/","msgtype":"m.text"},"ts":1279650782000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"In the common case (UK devices on a UK circuit) you are marginally better off since you can set the fuse to the right level for the device","msgtype":"m.text"},"ts":1279650840000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"I guess it's also easier to replace the fuse when it's in the plug","msgtype":"m.text"},"ts":1279650900000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: nope","msgtype":"m.text"},"ts":1279650901000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"No one uses real fuses now anyway","msgtype":"m.text"},"ts":1279650960000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"I'd assume just the opposite.","msgtype":"m.text"},"ts":1279650961000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Except in plugs","msgtype":"m.text"},"ts":1279650962000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"hsivonen: A plastic earth pin just means it isn't earthed. Double-insulated devices are allowed to do that anyway. But they can still have a fuse, which is in the connection to the live pin.","msgtype":"m.text"},"ts":1279650963000,"senderName":"Smylers","senderId":"Smylers@irc"},
{"content":{"body":"the UK design has merit, but the most annoying part is that the plugs are so big, so a person with a UK laptop power supply plus an adapter takes up 2 or 3 sockets at a conference","msgtype":"m.text"},"ts":1279651020000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"Yeah, the bigness is unfortunate","msgtype":"m.text"},"ts":1279651080000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"the same problem repeats with continental plugs in American conferences, though it tends to be less serious","msgtype":"m.text"},"ts":1279651081000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"has that problem a lot at home :)","msgtype":"m.emote"},"ts":1279651082000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"I guess the only redeeming feature of the Danish plug is that the gounding pin is on the plug side as in North America","msgtype":"m.text"},"ts":1279651260000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"so if hidden indicates that the element  is not visible or perceivable to any user, what do you call something visually hidden but not hidden to screen readers?","msgtype":"m.text"},"ts":1279660320000,"senderName":"JonathanNeal","senderId":"JonathanNeal@irc"},
{"content":{"body":"\"visually hidden\".","msgtype":"m.text"},"ts":1279660321000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Btw, if anyone's going to be at OSCON, I'm now going to be giving part of a talk there tomorrow.","msgtype":"m.text"},"ts":1279660380000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Bummer, I had no desire to be there this year and didn't try to go.","msgtype":"m.text"},"ts":1279660381000,"senderName":"JonathanNeal","senderId":"JonathanNeal@irc"},
{"content":{"body":"I wonder if some Liferay peeps will be there.","msgtype":"m.text"},"ts":1279660382000,"senderName":"JonathanNeal","senderId":"JonathanNeal@irc"},
{"content":{"body":"TabAtkins: filling in for mark p?","msgtype":"m.text"},"ts":1279663020000,"senderName":"hober","senderId":"hober@irc"},
{"content":{"body":"hober: Yeah.","msgtype":"m.text"},"ts":1279663260000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"are iframes that are not inserted into a document supposed to be able to navigate?","msgtype":"m.text"},"ts":1279663680000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"Hixie: if an iframe that has been in a document is removed from a document, is it supposed to be able to navigate?","msgtype":"m.text"},"ts":1279663800000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"it being the detached iframe that is","msgtype":"m.text"},"ts":1279663801000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"sure, why wouldn't it?","msgtype":"m.text"},"ts":1279663860000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"(no browsers except chrome currently do this)","msgtype":"m.text"},"ts":1279663861000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: it doesn't navigate before it has been inserted","msgtype":"m.text"},"ts":1279663862000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"Hixie: well, then, maybe it shouldn't!","msgtype":"m.text"},"ts":1279663863000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"possibly not. It's worth noting that gmail actually uses that feature to make gmail faster in chrome.","msgtype":"m.text"},"ts":1279663920000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"not sure how that affects things.","msgtype":"m.text"},"ts":1279663980000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"interesting...","msgtype":"m.text"},"ts":1279663981000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"the spec would have to be changed to somehow kill the nested browsing context when the iframe is removed from the document","msgtype":"m.text"},"ts":1279663982000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"would you want it to survive being removed then reinserted?","msgtype":"m.text"},"ts":1279663983000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"so does window.parent of the iframe point to the window of the owner doc, still?","msgtype":"m.text"},"ts":1279663984000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"Hixie: I'm not sure what I want yet, but Gecko misbehaves if it is tricked into loading into a detached iframe","msgtype":"m.text"},"ts":1279664040000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"via location.reload()","msgtype":"m.text"},"ts":1279664041000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"the answer to that rests on the interpretation of \"in\" in the context of an element being in a document","msgtype":"m.text"},"ts":1279664100000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"ah","msgtype":"m.text"},"ts":1279664101000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: a detached element still has the owner doc, right?","msgtype":"m.text"},"ts":1279664102000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1279664103000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"ah, i define \"in a document\"","msgtype":"m.text"},"ts":1279664160000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"so the answer is window.parent === window when the iframe is removed from the parent doc","msgtype":"m.text"},"ts":1279664161000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"currently, if Gecko is tricked into loading into a detached iframe, the inner window in the iframe is null","msgtype":"m.text"},"ts":1279664162000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"that seems bad","msgtype":"m.text"},"ts":1279664163000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: are you going to work on websockets this week?","msgtype":"m.text"},"ts":1279664220000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"zcorpan_: yp, starting now","msgtype":"m.text"},"ts":1279664221000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"yup, even","msgtype":"m.text"},"ts":1279664222000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: cool","msgtype":"m.text"},"ts":1279664223000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"window.parent === window looks like \"top level\" to me","msgtype":"m.text"},"ts":1279664224000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"vwls r vrrtd","msgtype":"m.text"},"ts":1279664225000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"I wonder if accidents happen if an iframe looks too much like \"top level\"","msgtype":"m.text"},"ts":1279664226000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"jgraham: rlly?","msgtype":"m.text"},"ts":1279664280000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"if chome gets perf benefits, maybe we should make the window exist in that case (as opposed to disallowing the load)","msgtype":"m.text"},"ts":1279664281000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"*chrome","msgtype":"m.text"},"ts":1279664340000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"zcorpan_: You decided not to file the ws:foo bug on browsers?","msgtype":"m.text"},"ts":1279664341000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"hsivonen: a lot of this stuff was defined by accident, as a side-effect of the spec covering all bases, and not intentionally","msgtype":"m.text"},"ts":1279664342000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"realises it looks like he is talking about web services","msgtype":"m.emote"},"ts":1279664343000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: no i filed it","msgtype":"m.text"},"ts":1279664344000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"https://bugzilla.mozilla.org/show_bug.cgi?id=580234 ","msgtype":"m.text"},"ts":1279664400000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"https://bugs.webkit.org/show_bug.cgi?id=42636","msgtype":"m.text"},"ts":1279664401000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"zcorpan_: OK. So what is the behaviour you expect in the WebSockets case?","msgtype":"m.text"},"ts":1279664402000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"hsivonen: my understanding is that what gmail is actually doing is grafting the iframe into a new document and having that work","msgtype":"m.text"},"ts":1279664403000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"(I assume you filed bug 10213)","msgtype":"m.text"},"ts":1279664460000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"hsivonen: not so much when the frame is an orphan","msgtype":"m.text"},"ts":1279664461000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hsivonen: though it'd be a bit weird to prevent the orphan case from working","msgtype":"m.text"},"ts":1279664462000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"jgraham: bz filed it","msgtype":"m.text"},"ts":1279664463000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"Hixie: ah. slightly different case","msgtype":"m.text"},"ts":1279664464000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: yeah","msgtype":"m.text"},"ts":1279664465000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"zcorpan_: Oh","msgtype":"m.text"},"ts":1279664466000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"hsivonen: i'm not 100% familiar with it","msgtype":"m.text"},"ts":1279664467000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"jgraham: i'd be fine with either syntax_err or implied //","msgtype":"m.text"},"ts":1279664520000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"zcorpan_: re bugs, if they're in the websocket component i'll see them","msgtype":"m.text"},"ts":1279664521000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: what's the websocket component? other hixie drafts?","msgtype":"m.text"},"ts":1279664580000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"it's whatever my script picks when you file a bug on the websockets part of the complete.html spec","msgtype":"m.text"},"ts":1279664760000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"\"WebSocket API (editor: Ian Hickson)\" in product \"WebAppsWG\"","msgtype":"m.text"},"ts":1279664761000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"changed","msgtype":"m.text"},"ts":1279664940000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"ta","msgtype":"m.text"},"ts":1279665120000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: <canvas> composite question.  We're all arguing about the interpretation of a term in the spec.  ^_^","msgtype":"m.text"},"ts":1279666080000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"in the globalCompositeOperation stuff, the term \"source image\" is used.  Is the source image a conceptually infinite canvas containing what is being drawn, or is it just the actual pixels dirtied by the latest draw operation?","msgtype":"m.text"},"ts":1279666140000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Which term?","msgtype":"m.text"},"ts":1279666141000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"TabAtkins: http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#drawing-model","msgtype":"m.text"},"ts":1279666200000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"The source image in the composite step is A","msgtype":"m.text"},"ts":1279666201000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"that drawing model is awkward","msgtype":"m.text"},"ts":1279666202000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"which is an infinite bitmap","msgtype":"m.text"},"ts":1279666203000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"what Philip` said","msgtype":"m.text"},"ts":1279666260000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Ok.","msgtype":"m.text"},"ts":1279666261000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"We're arguing because Safari/Chrome treat it as just the dirtied pixels, and will probably have difficulty changing.","msgtype":"m.text"},"ts":1279666380000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"\"pixels dirtied\" seems a difficult thing to define, when you can have transparent images and shadows and antialiasing","msgtype":"m.text"},"ts":1279666381000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"not to mention that some of the path routines can result in conceptually near-infinite lines iirc","msgtype":"m.text"},"ts":1279666440000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"The clipping region is finite so that doesn't seem like a problem","msgtype":"m.text"},"ts":1279666441000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"tabatkins: I believe the IE team prefers the Safari/Chrome interpretation of globalCompositeOperation","msgtype":"m.text"},"ts":1279666560000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"TabAtkins: Compute the bounding box of the dirtied pixels, draw the shape onto a layer of that size, draw the layer onto the canvas, then draw some conceptually transparent-black rectangles (in an efficient way) over the rest of the clipping region?","msgtype":"m.text"},"ts":1279666561000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"I advised them to post about this, I do not know if they did","msgtype":"m.text"},"ts":1279666562000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"Philip`: CoreGraphics does the dirtied-pixel thing, and Skia does the same (presumably for platform compat).","msgtype":"m.text"},"ts":1279666620000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins: I don't see why it would be hard to emulate the spec behaviour","msgtype":"m.text"},"ts":1279666680000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: The spec's definition of globalCompositeOperation requires most methods other than the defualt source-over to recompute every pixel in the canvas.","msgtype":"m.text"},"ts":1279666681000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Only 4 of the methods, I think","msgtype":"m.text"},"ts":1279666682000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Oh, 5","msgtype":"m.text"},"ts":1279666683000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"(The ones in http://philip.html5.org/tests/canvas/suite/tests/index.2d.composite.uncovered.html)","msgtype":"m.text"},"ts":1279666740000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"the two in/outs, and destinatop-atop.","msgtype":"m.text"},"ts":1279666741000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"In the common case (globalAlpha=1) the \"recompute\" is just \"clear to 0\"","msgtype":"m.text"},"ts":1279666742000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"othermaciej: Who'd you talk to on IE, if you remember?","msgtype":"m.text"},"ts":1279667040000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Oh, that's not just the common case","msgtype":"m.text"},"ts":1279667280000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"tabatkins: I think they ended up posting to the canvas api list that almost no one is on","msgtype":"m.text"},"ts":1279667281000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"That's every case","msgtype":"m.text"},"ts":1279667282000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"because the alpha multiplication happens before the compositing","msgtype":"m.text"},"ts":1279667283000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"so I think if the composite mode is one of the 5 then you can always just clear the whole canvas before drawing onto it","msgtype":"m.text"},"ts":1279667284000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"tabatkins: http://lists.w3.org/Archives/Public/public-canvas-api/2010AprJun/0046.html","msgtype":"m.text"},"ts":1279667340000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"which seems like it ought to be pretty trivial to implement","msgtype":"m.text"},"ts":1279667341000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"(unless I'm missing something important)","msgtype":"m.text"},"ts":1279667342000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"they emailed us privately after that, not sure if I should say who specifically (they are sensitive about private communication at times)","msgtype":"m.text"},"ts":1279667343000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"othermaciej: the reply to that email on public-canvas-api appears to say that roc is switching to match safari","msgtype":"m.text"},"ts":1279667520000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"which presumably means the spec is also changing?","msgtype":"m.text"},"ts":1279667521000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"jamesr: sounds like the spec should probably switch, then, if it says the other thing or is ambiguous","msgtype":"m.text"},"ts":1279667522000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"What does Safari do for http://software.hixie.ch/utilities/js/live-dom-viewer/saved/571 ?","msgtype":"m.text"},"ts":1279667580000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"only has a Chromium on Linux which doesn't support shadows","msgtype":"m.emote"},"ts":1279667581000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: i see just an image with the cats in safari","msgtype":"m.text"},"ts":1279667640000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"jamesr: you misunderstand","msgtype":"m.text"},"ts":1279667641000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"i think i do, the reply doesn't make much sense","msgtype":"m.text"},"ts":1279667642000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"we have some bugs where we don't currently follow the spec","msgtype":"m.text"},"ts":1279667643000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"particularly on Mac","msgtype":"m.text"},"ts":1279667700000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"I have patches to fix those bugs so we follow the spec always","msgtype":"m.text"},"ts":1279667701000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"Philip`: in firefox i see odd blue stuff on the left and cats on the right. in safari i just see some cats on the right","msgtype":"m.text"},"ts":1279667702000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"Yeah, following the email in Pritchard's email suggests that the spec was revised *to the current text*, describing FF/Opera's behavior.","msgtype":"m.text"},"ts":1279667703000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"It looks like Pritchard just totally misunderstood what the IE team email was talking about.","msgtype":"m.text"},"ts":1279667704000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"jamesr: In Firefox it breaks because of image compositing bugs","msgtype":"m.text"},"ts":1279667705000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"roc: ok. the post from the microsoft fellow was suggesting that the spec be changed, and then the reply implied that you were going to change firefox","msgtype":"m.text"},"ts":1279667706000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"othermaciej is right that the IE team prefers the source-bounded (Safari/Chrome) approach","msgtype":"m.text"},"ts":1279667707000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"so that reply is just wrong","msgtype":"m.text"},"ts":1279667708000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"zcorpan_: Hmm, that seems odd","msgtype":"m.text"},"ts":1279667760000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"zcorpan_: What do you get if you remove the shadow lines?","msgtype":"m.text"},"ts":1279667761000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"jamesr: I actually think you're misunderstanding Charles' email, maybe","msgtype":"m.text"},"ts":1279667762000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"Philip`: i don't think that it is as simple as \"just clear the whole canvas before drawing onto it\"","msgtype":"m.text"},"ts":1279667820000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"I think Charles is just saying that the spec unambiguously defines the behavior of globalCompositeOperation, and that Firefox will change to follow the spec, which is true","msgtype":"m.text"},"ts":1279667821000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"roc: Correct, we are (though I think it's because his email was phrased very badly).","msgtype":"m.text"},"ts":1279667822000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"sure","msgtype":"m.text"},"ts":1279667823000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"Philip`: then i get half the cats as blue and a blue rectangle below it","msgtype":"m.text"},"ts":1279667824000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"Philip`: you would have to calculate the compositing results, stick that somewhere (in a buffer on the side presumably), clear the canvas, then put the compositing results into the canvas","msgtype":"m.text"},"ts":1279667880000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"jamesr: I think I should have said \"just clear the whole region of the canvas which is outside the area you're drawing pixels into\"","msgtype":"m.text"},"ts":1279667881000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"the main problem with the Safari/Chrome(/IE?) approach is that you would need to add to the spec a definition of what the bounds of the source actually are, in all cases","msgtype":"m.text"},"ts":1279667882000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"and no-one has done that","msgtype":"m.text"},"ts":1279667883000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"jamesr: Yeah, but the buffer only needs to be the size of the dirtied pixels, not the whole canvas","msgtype":"m.text"},"ts":1279667884000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"and it doesn't seem particularly easy","msgtype":"m.text"},"ts":1279667885000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"roc: would you or anyone else at Mozilla be likely to object to changing the spec to the Safari/Chrome/IE-preferred behavior (assuming it was well-defined)?","msgtype":"m.text"},"ts":1279667886000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"it's not consistent in safari in all cases","msgtype":"m.text"},"ts":1279667887000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"it may add considerable complexity to spec","msgtype":"m.text"},"ts":1279667888000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"for example, imho drawing a circle should be the same as drawing an image that contains a circle with a transparent background","msgtype":"m.text"},"ts":1279667940000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"currently they render differently in safari","msgtype":"m.text"},"ts":1279667941000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"roc: Apparently, the definition is \"for images [and other things drawn onto the canvas, suitably defined], dirty region is the size of the image.  Everything else, it's all non-transparent pixels.\"","msgtype":"m.text"},"ts":1279667942000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"That's the definition that Safari/Chrome is using right now.","msgtype":"m.text"},"ts":1279667943000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"zcorpan_: Okay, that's what I see in Chromium","msgtype":"m.text"},"ts":1279667944000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"(Though the image case is dumb, for the reason that jamesr mentions.)","msgtype":"m.text"},"ts":1279667945000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins: That doesn't seem to work for shadows","msgtype":"m.text"},"ts":1279668000000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"If I'm not mistaken, http://software.hixie.ch/utilities/js/live-dom-viewer/saved/571 really ought to at least draw some blue where the rectangle and image and shadow overlap","msgtype":"m.text"},"ts":1279668001000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: Maybe not - we didn't look at shadows yet.","msgtype":"m.text"},"ts":1279668002000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins: so you're saying that for the \"copy\" operator, for every pixel in the source with alpha > 0, the corresponding destination pixel is set to the source pixel, but for every pixel in the source with alpha == 0, the corresponding destination pixel is unchanged?","msgtype":"m.text"},"ts":1279668060000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"that sounds very strange","msgtype":"m.text"},"ts":1279668061000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"I think so, yeah.","msgtype":"m.text"},"ts":1279668120000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"that doesn't match the behavior of any graphics library I know","msgtype":"m.text"},"ts":1279668121000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"I'm not looking at it right now, but I think that's precisely what CG does.","msgtype":"m.text"},"ts":1279668180000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"(also sounds far less efficient than just copying the data over)","msgtype":"m.text"},"ts":1279668181000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"goes to mock up that for himself to verify again.","msgtype":"m.emote"},"ts":1279668182000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"it's certainly not what cairo does","msgtype":"m.text"},"ts":1279668183000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"Yeah, Cairo does all the composite operations correctly.","msgtype":"m.text"},"ts":1279668184000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I'm also not sure what you mean by \"[and other things drawn onto the canvas, suitably defined]\"","msgtype":"m.text"},"ts":1279668240000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"TabAtkins: (I think it does copy wrong, at least in some version of Firefox on Linux)","msgtype":"m.text"},"ts":1279668360000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"roc: I mean drawing video and such on.  I haven't tested video drawing, but I suspect it's treated the same as image drawing.","msgtype":"m.text"},"ts":1279668361000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"oh, you mean everything drawn with the drawImage API?","msgtype":"m.text"},"ts":1279668362000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"In general, defining exactly what the source bounds are seems rather subtle. For example if you have a stroked path, the bounds can't just be the path bounds, they have to be inflated to include the stroke, but do you just include the stroke or the interior as well? What if the stroke is dashed? You can go with your definition, weird as it is, but it won't necessarily match what authors expect","msgtype":"m.text"},"ts":1279668420000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"and it certainly won't match with what graphics libraries do, other than CG if what you say is correct","msgtype":"m.text"},"ts":1279668421000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"Okay, yeah, copy is identical to source-over in CG and Skia.","msgtype":"m.text"},"ts":1279668480000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"so pixels with alpha==0 are transferred to the destination?","msgtype":"m.text"},"ts":1279668540000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"Yes.","msgtype":"m.text"},"ts":1279668541000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"phew","msgtype":"m.text"},"ts":1279668542000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"ok","msgtype":"m.text"},"ts":1279668543000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"Wait.","msgtype":"m.text"},"ts":1279668544000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"That's not what source-over does","msgtype":"m.text"},"ts":1279668545000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"What I mean is that if I draw a red rectangle, set composite to \"copy\", then draw a partially overlapping blue circle, what I get is a red rectangle overlapped by a blue circle, exactly the same as source-over.","msgtype":"m.text"},"ts":1279668600000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"othermaciej: if someone comes up with a proper definition for how source-bounded operators should behave, and that definition is simple and useful, then sure, we'd change","msgtype":"m.text"},"ts":1279668601000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"and if someone comes up with a proper definition for how source-bounded operators should behave, and that definition is simple and useful, i'd be happy to spec it","msgtype":"m.text"},"ts":1279668602000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"but so far nobody has","msgtype":"m.text"},"ts":1279668603000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"so...","msgtype":"m.text"},"ts":1279668604000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"otherwise, though, i'm not sure how we these composite operations will ever become interoperable","msgtype":"m.text"},"ts":1279668660000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"roc: Okay, yeah, alpha=0 pixels are copied over.  so it is different from source-over.","msgtype":"m.text"},"ts":1279668661000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins: what if you fill the circle with a gradient which is completely transparent in some region, then what?","msgtype":"m.text"},"ts":1279668662000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"still doesn't see why WebKits can't emulate the Firefox/Opera/spec behaviour easily, which would achieve interoperability","msgtype":"m.emote"},"ts":1279668720000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"I refuse to believe that any graphics library would just drop the transparent region out of the source bounds","msgtype":"m.text"},"ts":1279668721000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"The difference in behavior is completely described by CG/Skia doing the composite operation correctly, but in a *local* region rather than globally.","msgtype":"m.text"},"ts":1279668722000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins: sure, but you need to precisely define the bounds of that local region. That is the entire issue.","msgtype":"m.text"},"ts":1279668723000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"Right.","msgtype":"m.text"},"ts":1279668780000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Just clarifying what our behavior is.  ^_^","msgtype":"m.text"},"ts":1279668781000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Philip`: it is quite easy. I did it for the cairo CoreGraphics backend.","msgtype":"m.text"},"ts":1279668782000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"roc: where's the code?","msgtype":"m.text"},"ts":1279668783000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"othermaciej: if you want to change this in coregraphics webkit ports then we'd change the skia backend to match","msgtype":"m.text"},"ts":1279668840000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"of course microsoft also prefers the safari version, but they haven't proposed a tight definition of the source image bounds","msgtype":"m.text"},"ts":1279668900000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"jamesr: chrome could also lead the way, no need to follow apple on this :-P","msgtype":"m.text"},"ts":1279668901000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I can accept that the source-bounded version is more intuitive for authors","msgtype":"m.text"},"ts":1279668902000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"yeah i find the firefox behavior bizarre honestly. if i draw a 20x20 rectangle why would all the other pixels in the canvas change","msgtype":"m.text"},"ts":1279668960000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"Hixie: We have to have the same behavior on both CG and Skia, so having Apple fix CG is just easier.  ^_^","msgtype":"m.text"},"ts":1279668961000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"although, sometimes results that are \"more intuitive\" are actually less intuitive if you look at them closely","msgtype":"m.text"},"ts":1279668962000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"TabAtkins: lame :-P","msgtype":"m.text"},"ts":1279668963000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"TabAtkins: i'm not suggesting that someone at apple be forced to do the work, i'm wondering if that would make sense for the other folks who ship coregraphics webkit ports","msgtype":"m.text"},"ts":1279668964000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"I think the FF behavior is fine.  It's just something you generally have to use backing canvases to take proper advantage of.","msgtype":"m.text"},"ts":1279668965000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"jamesr: The other pixels would all change because you explicitly chose a composite operation that causes pixels to change :-)","msgtype":"m.text"},"ts":1279669020000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"But backing canvases are already an established technique in <canvas> use, so that seems fine.","msgtype":"m.text"},"ts":1279669021000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"i also think that it's likely nobody uses these modes given how non-interoperable the existing implementations are","msgtype":"m.text"},"ts":1279669022000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"If you don't want that to happen, don't use those composite operations","msgtype":"m.text"},"ts":1279669023000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"It would be somewhat nice to be able to spawn off a backing canvas directly from a single <canvas> tag, rather than creating and inserting a new canvas, but that can be fixed later.","msgtype":"m.text"},"ts":1279669080000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"jamesr: my cairo-quartz code is here: https://bugzilla.mozilla.org/show_bug.cgi?id=522859","msgtype":"m.text"},"ts":1279669081000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"the actual fix hasn't landed yet","msgtype":"m.text"},"ts":1279669140000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"TabAtkins: you don't need to insert a temporary canvas anywhere","msgtype":"m.text"},"ts":1279669141000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"roc: For some uses you do.  Frex, if you already have an image, and you want to draw some lines over it with, say, source-atop.  You can't just set globalCompositeOperation to source-atop and start drawing lines.","msgtype":"m.text"},"ts":1279669200000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins: (why can't you just clone it?)","msgtype":"m.text"},"ts":1279669201000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"WEll, actually, with source-atop you could.","msgtype":"m.text"},"ts":1279669202000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I mean you don't ned to insert it in the DOM","msgtype":"m.text"},"ts":1279669203000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"from an implementors point of view, the current spec wins","msgtype":"m.text"},"ts":1279669204000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"roc: Oh, for some reason I thought you needed to insert it into the document before it would work.  Shrug.","msgtype":"m.text"},"ts":1279669205000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I'm pretty sure that if we went with a source-bounded approach and nailed down exactly what the source bounds are in all cases, all but possibly one implementation/port would need significant changes","msgtype":"m.text"},"ts":1279669320000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"well, to implement the current spec also requires several implementations to make some changes (webkit/coregraphics webkit/skia and whatever IE has). i don't know if they would be significant in terms of code","msgtype":"m.text"},"ts":1279669380000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"roc: do you have a d2d backend for canvas yet in firefox?","msgtype":"m.text"},"ts":1279669560000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"yep","msgtype":"m.text"},"ts":1279669561000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"I don't know how compliant it is with this stuff","msgtype":"m.text"},"ts":1279669562000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"however","msgtype":"m.text"},"ts":1279669563000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"D2D does not really support compositing modes at all","msgtype":"m.text"},"ts":1279669620000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"you have to drop down to D3D/shaders","msgtype":"m.text"},"ts":1279669621000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"presumably you'll hit the same issues the IE9 team has","msgtype":"m.text"},"ts":1279669622000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"(in Gecko we don't have \"canvas backends\", there's just cairo which we use for everything)","msgtype":"m.text"},"ts":1279669623000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"jamesr: what issues are those?","msgtype":"m.text"},"ts":1279669860000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"well, to do something like fillRect() the most natural (to me) way to do that on a gfx card is to create a quad and draw it, using a fragment shader to implement the blending","msgtype":"m.text"},"ts":1279669980000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"but that doesn't work if you also have to do some composite operation on pixels that land outside the quad","msgtype":"m.text"},"ts":1279670040000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"that's probably why D2D doesn't support blend modes","msgtype":"m.text"},"ts":1279670280000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"the thing is, in shaders you generally don't get to read the destination pixel","msgtype":"m.text"},"ts":1279670340000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"so blend modes are a pain either way","msgtype":"m.text"},"ts":1279670341000,"senderName":"roc","senderId":"roc@irc"}
]