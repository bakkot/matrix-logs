[
{"content":{"body":"annevk: $(\"html\").focus() makes document.activeElement <html> in Firefox, but <body> in Chrome. Is this expected?","msgtype":"m.text"},"ts":1571829200000,"senderName":"ato","senderId":"ato@irc"},
{"content":{"body":"Well, no","msgtype":"m.text"},"ts":1571831338000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"I guess this is technically something a user could make happen through interaction with the Tab key.","msgtype":"m.text"},"ts":1571831386000,"senderName":"ato","senderId":"ato@irc"},
{"content":{"body":"But it’s more a concern for automation, e.g. WebDriver.","msgtype":"m.text"},"ts":1571831393000,"senderName":"ato","senderId":"ato@irc"},
{"content":{"body":"ato: dunno, https://html.spec.whatwg.org/#focusing-steps looks broken as it changes the focus target to the viewport, but then nothing seems to really account for that (and the way it becomes the viewport also uses the wrong language)","msgtype":"m.text"},"ts":1571832545000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"There's a mapping from viewport to document element somewhere","msgtype":"m.text"},"ts":1571839699000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"https://html.spec.whatwg.org/#dom-documentorshadowroot-activeelement I think viewport -> Document -> body element","msgtype":"m.text"},"ts":1571839740000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"This is extremely indirect and I suggested in https://github.com/whatwg/html/issues/4607 that we try to collapse everything to document element or body element and get rid of the \"viewport' business.","msgtype":"m.text"},"ts":1571839767000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Although zcorpan pointed out \"How should this work for viewports where there is no <body> element (like SVG)?\"","msgtype":"m.text"},"ts":1571839784000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"saying that it's the Document that has focus could work, but doesn't map so well to the API, since it's window.focus() not document.focus()","msgtype":"m.text"},"ts":1571840847000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"IMO activeElement is the more important API to match than the before-the-dot component of .focus()","msgtype":"m.text"},"ts":1571841097000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"So I would probably define something like \"the topmost focusable element\" which for HTML is body and for SVG is ???","msgtype":"m.text"},"ts":1571841119000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: #focusing-steps sometimes sets |new focus target| to a document, sometimes to a viewport. Is that a bug? (Haven't checked if the focus PR changes this)","msgtype":"m.text"},"ts":1571841141000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"(maybe \"default focused element\" I dunno. \"topmost\" is probably not right given <html tabindex=\"0\">)","msgtype":"m.text"},"ts":1571841145000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: but <body> itself is not focusable unless you set tabindex","msgtype":"m.text"},"ts":1571841164000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: yeah so \"default focused element\" seems better then","msgtype":"m.text"},"ts":1571841186000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"annevk: Thanks. I’ll file an issue later today.","msgtype":"m.text"},"ts":1571841491000,"senderName":"ato","senderId":"ato@irc"},
{"content":{"body":"Domenic: activeElement is 1:1 with :focus I hope?","msgtype":"m.text"},"ts":1571841608000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I hope so too! But now I'm wondering about body :/","msgtype":"m.text"},"ts":1571841639000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"http://software.hixie.ch/utilities/js/live-dom-viewer/saved/7303 is different between chrome and firefox","msgtype":"m.text"},"ts":1571841735000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"<body> doesn't match :focus when the viewport/document/BC has focus","msgtype":"m.text"},"ts":1571841802000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Domenic: http://software.hixie.ch/utilities/js/live-dom-viewer/saved/7306 for svg","msgtype":"m.text"},"ts":1571842122000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Well, lovely. So is activeElement or :focus the source of truth as to whether something's focused, I wonder.","msgtype":"m.text"},"ts":1571844972000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"(I mean, we kind of get to decide ourselves, since it's spec internal.)","msgtype":"m.text"},"ts":1571844987000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"My instinct is that saying that the body is the currently focused element, and patching things at :focus, is going to be easier than maintaining the body <-> viewport correspondence, and patching things up at activeElement.","msgtype":"m.text"},"ts":1571845035000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"But maybe that  doesn't work given <body tabindex=\"0\"> or some such.","msgtype":"m.text"},"ts":1571845053000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: you'll have to consider documents without <body> too","msgtype":"m.text"},"ts":1571845298000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: there's a lot of <body> special casing in specs so it might well make sense, but it can be removed or in case of SVG or something weird it might not be there to begin with","msgtype":"m.text"},"ts":1571845339000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Bleh","msgtype":"m.text"},"ts":1571845356000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Maybe document then. And patch up document -> body in the activeElement getter. The main thing I dislike is having non-nodes be focusable areas; it makes the model extra complicated.","msgtype":"m.text"},"ts":1571845399000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"But maybe using non-element nodes isn't much better than using non-nodes.","msgtype":"m.text"},"ts":1571845418000,"senderName":"Domenic","senderId":"Domenic@irc"}
]