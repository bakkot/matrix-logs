[
{"content":{"body":"annevk: Often I slowly click \"resolve conversation\" as I knock out individual review items on a PR locally. This is staggered due to interrupting homework or other things. If that ends up kicking off like 20 emails/notifs, lmk and I won't do that lol","msgtype":"m.text"},"ts":1550557091000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"domfarolino: I don't get email from GitHub, I only see it if it's reflected in /notifications","msgtype":"m.text"},"ts":1550566047000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: I published Quirks as it seems you forgot that","msgtype":"m.text"},"ts":1550566294000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I think Chrome and the spec disagree about <link rel=\"modulepreload\">, and they are the only major browser to implement that right?","msgtype":"m.text"},"ts":1550566596000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"When inserting <link rel=\"modulepreload\" href=\"data:text/html,\"> in a document, shouldn't step 12 of https://html.spec.whatwg.org/multipage/links.html#link-type-modulepreload%3Afetch-and-process-the-linked-resource-2 immediately fire an error event?","msgtype":"m.text"},"ts":1550566692000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Is it just a case of the spec being wrong? Step 3 fires an error event too but it does so by queuing a task, is it just missing that piece in step 12 and 13?","msgtype":"m.text"},"ts":1550566736000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: fetch a module script is a weird in parallel-like algorithm","msgtype":"m.text"},"ts":1550566800000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: step 12 happens from a task","msgtype":"m.text"},"ts":1550566810000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: it's on the list of things Domenic wants to refactor","msgtype":"m.text"},"ts":1550566824000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I feel like the weirdness sho-- ok","msgtype":"m.text"},"ts":1550566828000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"If that's something to refactor I have nothing more to say then. :)","msgtype":"m.text"},"ts":1550566852000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: Firefox might also support that btw","msgtype":"m.text"},"ts":1550566877000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: but load/error events should never be sync ideally","msgtype":"m.text"},"ts":1550566892000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: MDN said it doesn't but the support table was gigantic so maybe I didn't read it correctly, shrug anyway, if the events are not sync I can't observe them from a script being inserted at the same time so I don't care.","msgtype":"m.text"},"ts":1550566958000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: FYI https://github.com/whatwg/html/pull/4354#issuecomment-463693419 :)","msgtype":"m.text"},"ts":1550566963000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: \"<meta http-equiv> — How do I even observe those from JS?\" I should be able to observe http-equiv=\"default-style\" right?","msgtype":"m.text"},"ts":1550567203000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: yeah, I guess that should flip the disabled nature of a style sheet which you can observe synchronously","msgtype":"m.text"},"ts":1550567369000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Nice","msgtype":"m.text"},"ts":1550567376000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: I guess modulepreload you could detect in theory if the script removes it? Unless removing is specified to have an effect as well","msgtype":"m.text"},"ts":1550567446000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Ah right, if it's removed before it's handled, no event should be fired?","msgtype":"m.text"},"ts":1550567488000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: Nah the event should still be fired I think.","msgtype":"m.text"},"ts":1550567596000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"It's not like the spec says \"if it's not connected anymore by this point, just don't do anything anymore\".","msgtype":"m.text"},"ts":1550567629000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: yeah, but if they use some common code path and nobody tested for it, but I'm not going to block your stuff on testing for this","msgtype":"m.text"},"ts":1550567682000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Thanks. 😂","msgtype":"m.text"},"ts":1550567737000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"How come there is no emoji for \"wipe sweat off forehead\"","msgtype":"m.text"},"ts":1550567769000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: loading the quirks spec RD fails to load the stylesheet...","msgtype":"m.text"},"ts":1550570803000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"The FetchEvent for \"https://resources.whatwg.org/spec.css\" resulted in a network error response: an \"opaque\" response was used for a request whose type is not no-cors","msgtype":"m.text"},"ts":1550570807000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"spec.css:1 Failed to load resource: net::ERR_FAILED","msgtype":"m.text"},"ts":1550570808000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: I thought RDs did not have style sheets","msgtype":"m.text"},"ts":1550570847000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I guess it does","msgtype":"m.text"},"ts":1550570877000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"  <link crossorigin href=\"https://resources.whatwg.org/spec.css\" rel=\"stylesheet\">","msgtype":"m.text"},"ts":1550570887000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"  <link crossorigin href=\"https://resources.whatwg.org/review-draft.css\" rel=\"stylesheet\">","msgtype":"m.text"},"ts":1550570887000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: ah, if you clear the service worker it'll work","msgtype":"m.text"},"ts":1550570988000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"zcorpan: it seems we forgot to clear the cache when we updated the service worker to use CORS for all the things","msgtype":"m.text"},"ts":1550571009000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Caching is hard...","msgtype":"m.text"},"ts":1550571064000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Or cache invalidation, rather","msgtype":"m.text"},"ts":1550571076000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: hmm ok. does the serviceworker need a new version or something?","msgtype":"m.text"},"ts":1550571137000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: maybe, it does seem like the cache key was updated since this change, not sure what's going on","msgtype":"m.text"},"ts":1550571298000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"zcorpan: no, that seems to be automatically generated based on whatever the latest version of the backing script is","msgtype":"m.text"},"ts":1550571348000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"zcorpan: I see what the problem is, we match() against all caches, including prior caches","msgtype":"m.text"},"ts":1550571572000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I am surprised Mr. Service Worker didn't notice that!","msgtype":"m.text"},"ts":1550571650000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"attempts to write a patch","msgtype":"m.emote"},"ts":1550571660000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: All browsers handle meta after script, good thing I tested for that.","msgtype":"m.text"},"ts":1550572195000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"zcorpan: https://github.com/whatwg/whatwg.org/pull/239","msgtype":"m.text"},"ts":1550572296000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"foolip: zcorpan: if around, could you stamp https://github.com/whatwg/html/pull/4366?","msgtype":"m.text"},"ts":1550573045000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"foolip: zcorpan: (I'll merge)","msgtype":"m.text"},"ts":1550573057000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: reviewed","msgtype":"m.text"},"ts":1550573293000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"annevk: this is supposed to prune old cache entries, right?","msgtype":"m.text"},"ts":1550573373000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"    return Promise.all(keys.filter(key => key !== cacheKey).map(key => caches.delete(key)));","msgtype":"m.text"},"ts":1550573375000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: yes and it will, but it races with returning a response I think","msgtype":"m.text"},"ts":1550573407000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ok","msgtype":"m.text"},"ts":1550573422000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Hi, I am doing research on languages and semantics. I noticed that the HTML5 standard speaks about meaning, and was wondering if there was some kind of formal semantics for it that I could refer to...","msgtype":"m.text"},"ts":1550575293000,"senderName":"bblfish","senderId":"bblfish@irc"},
{"content":{"body":"bblfish: example of formal semantics?","msgtype":"m.text"},"ts":1550575811000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I guess it could be something topological. I thought I had seen something about areas of rectangles somewhere...","msgtype":"m.text"},"ts":1550575928000,"senderName":"bblfish","senderId":"bblfish@irc"},
{"content":{"body":"perhaps it is just informal, which is also fine for my needs","msgtype":"m.text"},"ts":1550575966000,"senderName":"bblfish","senderId":"bblfish@irc"},
{"content":{"body":"\"Because HTML conveys meaning, rather than presentation, the same page can also be used by a small browser on a mobile phone, without any change to the page. Instead of headings being in large letters as on the desktop, for example, the browser on the mobile phone might use the same size text for the whole page, but with the headings in bold.\"","msgtype":"m.text"},"ts":1550576393000,"senderName":"bblfish","senderId":"bblfish@irc"},
{"content":{"body":"That passage is quite nice.","msgtype":"m.text"},"ts":1550576467000,"senderName":"bblfish","senderId":"bblfish@irc"},
{"content":{"body":"It looks like it is quite recent, as I don't see that passage in the html5.3 on w3c","msgtype":"m.text"},"ts":1550576545000,"senderName":"bblfish","senderId":"bblfish@irc"},
{"content":{"body":"I got the passage from https://html.spec.whatwg.org/#semantics-2","msgtype":"m.text"},"ts":1550576639000,"senderName":"bblfish","senderId":"bblfish@irc"},
{"content":{"body":"btw, I have to write my thesis in LaTeX, and was wondering how I could site that in bibtex... (academia stuff ...)","msgtype":"m.text"},"ts":1550576681000,"senderName":"bblfish","senderId":"bblfish@irc"},
{"content":{"body":"annevk: I think I found yet another edge case.","msgtype":"m.text"},"ts":1550576802000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: Make an empty script. Insert a script and two text nodes in empty script. Make the inserted script replace the second text node by itself.","msgtype":"m.text"},"ts":1550576885000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"(or a different text node, that's not important here)","msgtype":"m.text"},"ts":1550576900000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Wait no, it's not a problem anymore with deferredStepsQueue, nice.","msgtype":"m.text"},"ts":1550576945000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"And the HTML spec does absolutely nothing when nodes are removed from a script element, so it's doubly not a problem, disregard me.","msgtype":"m.text"},"ts":1550576978000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"bblfish: I don’t really know, sorry","msgtype":"m.text"},"ts":1550577721000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: 👍🏻🎉","msgtype":"m.text"},"ts":1550577754000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: so <meta http-equiv=default-style> is queued as well? I guess we need to test removal then?","msgtype":"m.text"},"ts":1550578501000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Mmh?","msgtype":"m.text"},"ts":1550578712000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: Damn my comment is confusing.","msgtype":"m.text"},"ts":1550578735000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: No the test passes everywhere it seems.","msgtype":"m.text"},"ts":1550578817000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"I just wrote the opposite of what I wanted to say, I think.","msgtype":"m.text"},"ts":1550578830000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: I will double check when I’m back from lunch.","msgtype":"m.text"},"ts":1550578892000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Just realised I didn’t even push the damn test ugh","msgtype":"m.text"},"ts":1550578936000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: So yes, it's queued.","msgtype":"m.text"},"ts":1550584639000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: Fixed my comment https://github.com/whatwg/html/pull/4354#issuecomment-465078124","msgtype":"m.text"},"ts":1550584694000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Safari obviously handles it after script, given it inserts nodes from fragments one by one.","msgtype":"m.text"},"ts":1550584714000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"And I pushed the WPT test.","msgtype":"m.text"},"ts":1550584728000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: but if you have a script after the meta it'll execute after the style sheet change?","msgtype":"m.text"},"ts":1550584739000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Let me quickly check that.","msgtype":"m.text"},"ts":1550584757000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: …no except in Safari, omg this is so bad","msgtype":"m.text"},"ts":1550584815000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"so it's from a task, possibly async in some browsers","msgtype":"m.text"},"ts":1550584865000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Not exactly.","msgtype":"m.text"},"ts":1550584877000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"It has to be one or the other, no?","msgtype":"m.text"},"ts":1550584903000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: If I comment https://github.com/web-platform-tests/wpt/blob/9c8d1abc1f409bd01799cac2409367f5a5a4248c/dom/nodes/Node-appendChild-script-and-default-style-meta-from-fragment.html#L25","msgtype":"m.text"},"ts":1550584907000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Never mind I checked the wrong thing when I commented that.","msgtype":"m.text"},"ts":1550584939000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Let me check what .display says after the entire appendChild call.","msgtype":"m.text"},"ts":1550584951000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: Ok yes, it's a queued task in Firefox","msgtype":"m.text"},"ts":1550584997000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"and in Chrome too.","msgtype":"m.text"},"ts":1550585000000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: Wait no,","msgtype":"m.text"},"ts":1550585552000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: I'm not even sure Firefox supports http-equiv=\"default-style\" now…","msgtype":"m.text"},"ts":1550585565000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Ah yes, I was thinking that the css box model could be thought of as a model for html.","msgtype":"m.text"},"ts":1550585728000,"senderName":"bblfish","senderId":"bblfish@irc"},
{"content":{"body":"nox: hmm https://software.hixie.ch/utilities/js/live-dom-viewer/saved/6654 and https://software.hixie.ch/utilities/js/live-dom-viewer/saved/6655 suggest it does to me","msgtype":"m.text"},"ts":1550585841000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Mmh…","msgtype":"m.text"},"ts":1550585875000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Wtf am I doing wrong then…","msgtype":"m.text"},"ts":1550585888000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: contrast with https://software.hixie.ch/utilities/js/live-dom-viewer/saved/6657","msgtype":"m.text"},"ts":1550585899000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: there might be some issues here with dynamic updates","msgtype":"m.text"},"ts":1550585914000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: if I start playing with the <meta> element in that textarea some browsers persist the http-equiv stuff (though maybe that's how it should be)","msgtype":"m.text"},"ts":1550585941000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"zcorpan: testing blur() does nothing means something else has to do something","msgtype":"m.text"},"ts":1550585984000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"zcorpan: it means focus() has to result in something being focused","msgtype":"m.text"},"ts":1550585997000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: That's so weird.","msgtype":"m.text"},"ts":1550586060000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: If I open my test in Firefox, I can read \"hello\".","msgtype":"m.text"},"ts":1550586071000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: Oh. I have a clue.","msgtype":"m.text"},"ts":1550586139000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Or not.","msgtype":"m.text"},"ts":1550586202000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: \"data:text/css,#div{display:none}\" 😂","msgtype":"m.text"},"ts":1550586284000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: that # wants to be escaped","msgtype":"m.text"},"ts":1550586375000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yep","msgtype":"m.text"},"ts":1550586377000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: That's a bug in Safari too.","msgtype":"m.text"},"ts":1550586388000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Oh, I thought only Chrome had that bug","msgtype":"m.text"},"ts":1550586423000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"That's too bad, though Chrome is close with regards to fixing it","msgtype":"m.text"},"ts":1550586434000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Chrome doesn't have that bug anymore AFAICT.","msgtype":"m.text"},"ts":1550586441000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: I.e. if I don't escape '#', the div is never display:none.","msgtype":"m.text"},"ts":1550586482000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: Next problem,","msgtype":"m.text"},"ts":1550586538000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"ok","msgtype":"m.text"},"ts":1550586540000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"https://irccloud.mozilla.com/pastebin/v4cya5CY/","msgtype":"m.text"},"ts":1550586542000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"if it's a queued task, shouldn't the task run between the two tests, and my last assertion about .display be ok?","msgtype":"m.text"},"ts":1550586562000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"s/the two tests/the two scripts/","msgtype":"m.text"},"ts":1550586570000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: script's are not queued as tasks","msgtype":"m.text"},"ts":1550586584000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I know that, but doesn't the loop run queued tasks between scripts or whatever?","msgtype":"m.text"},"ts":1550586610000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: well, I guess the parser queues, but the priority could be different","msgtype":"m.text"},"ts":1550586611000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ok","msgtype":"m.text"},"ts":1550586617000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: not sure what a reliable signal would be tbh","msgtype":"m.text"},"ts":1550586672000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: So, should I file a different HTML issue about making <meta http-equiv=default-style> queue a task?","msgtype":"m.text"},"ts":1550586677000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: yeah, though maybe not be that certain about the solution, since the queueing might have to be in whatever it calls","msgtype":"m.text"},"ts":1550586756000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(thanks!)","msgtype":"m.text"},"ts":1550586778000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I will file one about how the change doesn't happen immediately and the spec implies it does, that's enough right?","msgtype":"m.text"},"ts":1550586814000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: aye","msgtype":"m.text"},"ts":1550586881000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I removed the test from my PR, and will file the issue and add a link to it to my summarising comment.","msgtype":"m.text"},"ts":1550586902000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"tusen takk","msgtype":"m.text"},"ts":1550586911000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: MFW I try to reproduce our discovery in Live DOM Viewer but the last browser I tested it is Safari and I keep tweaking my sample in it, the only browser which does observe the change immediately…","msgtype":"m.text"},"ts":1550587229000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: sorry, I should have given you glitch.com examples","msgtype":"m.text"},"ts":1550587264000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Nah it's ok.","msgtype":"m.text"},"ts":1550587280000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Now my changes don't apply anymore at all in Firefox when I add the meta element, this is confusing.","msgtype":"m.text"},"ts":1550587302000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: I think glitch.com is the way forward as there are far fewer surprises there; Live DOM Viewer has quite a few downsides","msgtype":"m.text"},"ts":1550587307000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Only downside with Glitch I've run into is that it creates a named window if you click on the preview link (for arguably good reasons)","msgtype":"m.text"},"ts":1550587338000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: http://software.hixie.ch/utilities/js/live-dom-viewer/?saved=6660","msgtype":"m.text"},"ts":1550587429000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Am I going crazy?","msgtype":"m.text"},"ts":1550587435000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Probs","msgtype":"m.text"},"ts":1550587471000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"I made a standalone HTML file and the background never goes green.","msgtype":"m.text"},"ts":1550587522000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"https://irccloud.mozilla.com/pastebin/SWQcGNQX/annevk.html","msgtype":"m.text"},"ts":1550587698000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"This writes rgb green in Safari and Chrome, so the thing doesn't actually happen through a queued task AFAICT.","msgtype":"m.text"},"ts":1550587743000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: sounds correct","msgtype":"m.text"},"ts":1550587856000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: perhaps Firefox only supports this if it comes from the parser?","msgtype":"m.text"},"ts":1550587867000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Which is the worst.","msgtype":"m.text"},"ts":1550587868000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: Yeah probs.","msgtype":"m.text"},"ts":1550587902000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: Ok, I checked the thing I was scared of, and it doesn't happen, yay.","msgtype":"m.text"},"ts":1550587912000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"https://irccloud.mozilla.com/pastebin/sodX8QU2/chrome.html","msgtype":"m.text"},"ts":1550587942000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"I thought this was failing in Chrome,","msgtype":"m.text"},"ts":1550587948000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"which would mean the switch happened after all scripts, which would mean we would need a second queue somehow.","msgtype":"m.text"},"ts":1550587964000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: filing follow-ups on these seems fine, since I think the general model for <script>, <style>, and <iframe> et al is sound and it seems like the remainder can be slotted into that if needed","msgtype":"m.text"},"ts":1550587965000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"But it passes, so just disregard that.","msgtype":"m.text"},"ts":1550587969000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: though focus handling might be good to test","msgtype":"m.text"},"ts":1550587981000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I didn't find any behaviour to observe for focus.","msgtype":"m.text"},"ts":1550588002000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: I'm still quite confident you can merge the DOM part, all the different behaviours I found can be implemented in terms of deferredStepsQueue.","msgtype":"m.text"},"ts":1550588185000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: you can test win.onblur = t.unreached_func(); win.blur(); frame.remove(); win.blur();","msgtype":"m.text"},"ts":1550588319000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"nox: I can get Chrome to fire onblur while a script invokes remove() on a focused element, but no other browser","msgtype":"m.text"},"ts":1550588414000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"fire blur*","msgtype":"m.text"},"ts":1550588418000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: FWIW, the reason I haven't merged that is because it seems cleaner to also fix dependencies at the same time","msgtype":"m.text"},"ts":1550588457000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: not because I think it's wrong or some such","msgtype":"m.text"},"ts":1550588467000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Ack","msgtype":"m.text"},"ts":1550588518000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: https://bugzilla.mozilla.org/show_bug.cgi?id=1528982","msgtype":"m.text"},"ts":1550588520000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: Link me to your onblur sample please.","msgtype":"m.text"},"ts":1550588807000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"I will try to make it a WPT test.","msgtype":"m.text"},"ts":1550588813000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: https://wistful-notify.glitch.me/","msgtype":"m.text"},"ts":1550588838000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"zcorpan: We are trying to test focus/blur as part of insertions with scripts.","msgtype":"m.text"},"ts":1550588845000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: I'm not sure what we want to do here though","msgtype":"m.text"},"ts":1550588851000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: not firing blur at all might be great?","msgtype":"m.text"},"ts":1550588859000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: zcorpan's comment was about some unrelated changes I'm making","msgtype":"m.text"},"ts":1550588875000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: No clue. :D","msgtype":"m.text"},"ts":1550588877000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: Hah, ok.","msgtype":"m.text"},"ts":1550588880000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"zcorpan: so my main problem is that it's not sufficient to make the feature a no-op","msgtype":"m.text"},"ts":1550589028000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"zcorpan: since a browser could bail out if it's not focused","msgtype":"m.text"},"ts":1550589042000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"zcorpan: then if we start testing focusing it, it'll turn out that that doesn't work in all browsers, at which point...","msgtype":"m.text"},"ts":1550589060000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"zcorpan: seems good for a follow-up?","msgtype":"m.text"},"ts":1550589073000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: i don't understand what \"a browser could bail out if it's not focused\" means, but follow-up sounds good","msgtype":"m.text"},"ts":1550589122000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"annevk: Why would blur not be emitted in Firefox?","msgtype":"m.text"},"ts":1550589143000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"fired*","msgtype":"m.text"},"ts":1550589148000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"zcorpan: I mean that unless there's a reliable way to focus a window and we use that way before invoking blur(), we might well end up testing only a very early return in the blur() implementation","msgtype":"m.text"},"ts":1550589171000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: I'm not very familiar with focus/blur","msgtype":"m.text"},"ts":1550589197000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: and even less with edge case focus/blur","msgtype":"m.text"},"ts":1550589212000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":":D","msgtype":"m.text"},"ts":1550589219000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: i see. yeah, if firefox or some other browser does something it would be good to exercise that something. as far as i can tell from chromium it's literally no-op","msgtype":"m.text"},"ts":1550589386000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"annevk: Re: filing follow-ups: it's not like my PR can be merged until someone from Chrome chimes in and discusses with bz about which behaviour should be specified.","msgtype":"m.text"},"ts":1550589487000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"So far, no one on the Chrome side of things commented in any of the three PRs. :(","msgtype":"m.text"},"ts":1550589508000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: did I copy tkent?","msgtype":"m.text"},"ts":1550589718000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I don't think so.","msgtype":"m.text"},"ts":1550589730000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"bz may have. Let me find his comment.","msgtype":"m.text"},"ts":1550589738000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: you did","msgtype":"m.text"},"ts":1550589868000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Hah!","msgtype":"m.text"},"ts":1550589879000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: Fun for the whole family https://bugzilla.mozilla.org/show_bug.cgi?id=1528982#c1","msgtype":"m.text"},"ts":1550590803000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: if it involved dinosaurs, maybe","msgtype":"m.text"},"ts":1550590943000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Hah","msgtype":"m.text"},"ts":1550590948000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: I believe everything has now been addressed for image{srcset,sizes} PR. Thanks for the reviews","msgtype":"m.text"},"ts":1550594603000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"domfarolino: I can look tomorrow I suspect","msgtype":"m.text"},"ts":1550602320000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"domfarolino: feel free to ping me again if I don’t","msgtype":"m.text"},"ts":1550602353000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"👍","msgtype":"m.text"},"ts":1550602515000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"Hi, if I can ask (and if there is anyone at this hour ;) ) because I'm just thinking now about it - what does W3C specifications and namespaces actually mean, especially for HTML5.x when you are making a web standard in fact?","msgtype":"m.text"},"ts":1550619186000,"senderName":"Nepose","senderId":"Nepose@irc"}
]