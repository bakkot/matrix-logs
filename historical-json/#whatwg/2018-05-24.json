[
{"content":{"body":"I really need to attend one of these times...","msgtype":"m.text"},"ts":1527125272000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"TabAtkins: you around at all?","msgtype":"m.text"},"ts":1527135976000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"I'm in NYC right now where it's past midnight, so: not really","msgtype":"m.text"},"ts":1527136028000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"No worries, question about some bikeshed syntax but very non-important, enjoy NYC","msgtype":"m.text"},"ts":1527136204000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"Domenic: I might","msgtype":"m.text"},"ts":1527144569000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"mathiasbynens: happy b-day!","msgtype":"m.text"},"ts":1527155703000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Having RescueTime extension is annoying when trying to debug in devtools...","msgtype":"m.text"},"ts":1527164004000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"o/","msgtype":"m.text"},"ts":1527170110000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"\\o","msgtype":"m.text"},"ts":1527170199000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"Some weird behaviour I found: I have attached an event handler via addEventListener. The event is being fired and inside of the event handler callback, I'm attaching another event handler, this time assigning it directly (channel.onmessage = handler2). What happens is that handler2 is being called with the same event that has already been handled inside of the event handler. Is that normal behaviour?","msgtype":"m.text"},"ts":1527170317000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: do you have a jsfiddle or something?","msgtype":"m.text"},"ts":1527170439000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"In Firefox, I can work around this with setTimeout(..., 0) (but not with Promise.resolve().then(...)). In Safari, I have been unsuccessful to avoid this unless using a timeout of > 1 second.","msgtype":"m.text"},"ts":1527170533000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"zcorpan_: Not yet, let me see if I can reproduce this in a short script","msgtype":"m.text"},"ts":1527170533000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl, not sure that would necessarily be against the spec","msgtype":"m.text"},"ts":1527171444000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"I have a suspicion that adding a new handler for an event while it's being fired is undefined","msgtype":"m.text"},"ts":1527171493000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"which is probably bad, given I can easily imagine things relying on it","msgtype":"m.text"},"ts":1527171503000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"zcorpan_: Mh, unsuccessful so far. Will continue to investigate this.","msgtype":"m.text"},"ts":1527171507000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"As a side question: I assume removeEventListener will also remove handlers that have been added with the { once: true } option?","msgtype":"m.text"},"ts":1527171507000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"gsnedders: i *think* it's well-defined, but haven't checked","msgtype":"m.text"},"ts":1527171554000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"annevk might know","msgtype":"m.text"},"ts":1527171559000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"I think it is too, but of course it might not work the way you expect","msgtype":"m.text"},"ts":1527171641000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"I mean I'm in a pub drinking coffee and working on non-web stuff at the moment, soâ€¦ :)","msgtype":"m.text"},"ts":1527171787000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"You'd need to look at the weird setup with the singleton event handler for onfoo attributes","msgtype":"m.text"},"ts":1527172331000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"lgrahl: yes (to side question)","msgtype":"m.text"},"ts":1527172851000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"gsnedders: it's well-defined","msgtype":"m.text"},"ts":1527172915000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"lgrahl: sounds like a bug","msgtype":"m.text"},"ts":1527172921000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I'm currently trying to rule out a bug on my side since I couldn't reproduce it outside of a fairly complex setup so far.","msgtype":"m.text"},"ts":1527172967000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: gsnedders: in particular see step 6 of https://dom.spec.whatwg.org/#concept-event-listener-invoke whereby a clone of current listeners is made","msgtype":"m.text"},"ts":1527172968000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"lgrahl: gsnedders: any added listeners would not be able to participate for the current object","msgtype":"m.text"},"ts":1527172994000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"gsnedders: disconnect and enjoy your coffee. then, when you get back, tell me what's wrong in https://github.com/w3c/web-platform-tests/pull/11092 :-)","msgtype":"m.text"},"ts":1527173002000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"Alternate plan: disconnect and feel existential dread that ruins your coffee","msgtype":"m.text"},"ts":1527173040000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"zcorpan_: but then what do I do to procrastinate from what I'm working on!","msgtype":"m.text"},"ts":1527173370000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"I suspected http://software.hixie.ch/utilities/js/live-dom-viewer/saved/5966 could do it, but it seems not","msgtype":"m.text"},"ts":1527173390000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"I'm starting to think the spec disagrees with browsers here","msgtype":"m.text"},"ts":1527173808000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Oh, no","msgtype":"m.text"},"ts":1527173899000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"zcorpan_: will look in a few mins","msgtype":"m.text"},"ts":1527173928000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Spec is right: http://software.hixie.ch/utilities/js/live-dom-viewer/saved/5967","msgtype":"m.text"},"ts":1527173940000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"lgrahl, ^","msgtype":"m.text"},"ts":1527173948000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Safari seems to get it wrong, though","msgtype":"m.text"},"ts":1527173957000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Or epiphany; can someone check actual safari?","msgtype":"m.text"},"ts":1527173975000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"log: 2 in safari tp","msgtype":"m.text"},"ts":1527176163000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"Ms2ger: So, what I described is supposed to happen?","msgtype":"m.text"},"ts":1527180082000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl, that is my understanding, yes","msgtype":"m.text"},"ts":1527180154000,"senderName":"Ms2ger_","senderId":"Ms2ger_@irc"},
{"content":{"body":"lgrahl: does your code also attach an event handler earlier on, like Ms2ger_'s examples?","msgtype":"m.text"},"ts":1527180534000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"lgrahl: event handlers are rather magical; they only add an event listener the first time; afterwards they just swap out the \"body\" of the listener they added","msgtype":"m.text"},"ts":1527180573000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Just changed it to this http://software.hixie.ch/utilities/js/live-dom-viewer/?saved=5968 which somewhat resembles what my code does. In that case, the event is not fired. Even though this puzzles me... I'm fine with it. I guess it's a bug in my code (or in the data channel implementation) then. I will try to investigate this further.","msgtype":"m.text"},"ts":1527180831000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"*event is not fired in both handlers","msgtype":"m.text"},"ts":1527180847000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: with that code you should see 2, not 3","msgtype":"m.text"},"ts":1527181032000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Yes, that's what Firefox does, too. Is there a way to list the event handlers? I have a slight feeling what the problem might be and that would help me.","msgtype":"m.text"},"ts":1527181112000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"Not except via dev tools","msgtype":"m.text"},"ts":1527181265000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"zcorpan: FWIW, on 11092 I still get way more than two failures","msgtype":"m.text"},"ts":1527181763000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"zcorpan: plz check you've actually pushed everything ;P","msgtype":"m.text"},"ts":1527181769000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":";_;","msgtype":"m.text"},"ts":1527181790000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"gsnedders: ok now","msgtype":"m.text"},"ts":1527182065000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"mathiasbynens: gefeliciteerd ðŸŽ‰","msgtype":"m.text"},"ts":1527182901000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: gesundheit","msgtype":"m.text"},"ts":1527183912000,"senderName":"jugglinmike","senderId":"jugglinmike@irc"},
{"content":{"body":"TabAtkins: If you have the time, I could use your input on a patch for a WPT test on font loading? https://github.com/w3c/web-platform-tests/pull/11082","msgtype":"m.text"},"ts":1527184050000,"senderName":"jugglinmike","senderId":"jugglinmike@irc"},
{"content":{"body":"wonders if anyone knows any major website using shadow DOM","msgtype":"m.emote"},"ts":1527187762000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"(v1)","msgtype":"m.text"},"ts":1527187767000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: doesn't youtube use it?","msgtype":"m.text"},"ts":1527188458000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"last time I checked, it was still on v0","msgtype":"m.text"},"ts":1527188473000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"perhaps I should re-check","msgtype":"m.text"},"ts":1527188496000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"zcorpan: thanks :)","msgtype":"m.text"},"ts":1527188907000,"senderName":"mathiasbynens","senderId":"mathiasbynens@irc"},
{"content":{"body":"wonders what to do with https://github.com/whatwg/html/issues/3699","msgtype":"m.emote"},"ts":1527192570000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"perhaps I should propose an algorithm which propagates directionality state through shadow DOM","msgtype":"m.text"},"ts":1527192625000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"MikeSmith: Okay, https://github.com/tabatkins/highlighter should be complete and usable now. Calling instructions are included in the README; the repo is self-contained and requires nothing but Python 2.7 to be run.","msgtype":"m.text"},"ts":1527193299000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"What on earth...","msgtype":"m.text"},"ts":1527195611000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"What does setting an event handler directly really do? Is \".onsomeevent = ...\" equal to \"addEventListener('someevent', ...)\"?","msgtype":"m.text"},"ts":1527195747000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: Nope: Under https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-attributes see \"When an event handler H of an EventTarget object T is first set to a non-null value,\"","msgtype":"m.text"},"ts":1527197404000,"senderName":"jyasskin","senderId":"jyasskin@irc"},
{"content":{"body":"Some neat ComeFrom stuff there, since the setter isn't defined to do that. Be an easy patch to fix that...","msgtype":"m.text"},"ts":1527197452000,"senderName":"jyasskin","senderId":"jyasskin@irc"},
{"content":{"body":"annevk: Do you know why \"\"Abort a document\" reads \"Cancel any instances of the fetch algorithm\" rather than referencing fetch's \"terminated\"?","msgtype":"m.text"},"ts":1527197531000,"senderName":"jugglinmike","senderId":"jugglinmike@irc"},
{"content":{"body":"jyasskin: Umm, that's a bit heavy to digest for me right now. But I think I found my bug. If there are code examples on how .onsomeevent and .addEventListener('someevent', ...) interact and possible quirks of using both, I'd be grateful.","msgtype":"m.text"},"ts":1527198008000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: The \"This example demonstrates the order in which event listeners are invoked.\" example under there has that kind of code example. I don't know of others.","msgtype":"m.text"},"ts":1527198135000,"senderName":"jyasskin","senderId":"jyasskin@irc"},
{"content":{"body":"And there are probably other quirks it doesn't cover.","msgtype":"m.text"},"ts":1527198147000,"senderName":"jyasskin","senderId":"jyasskin@irc"},
{"content":{"body":"I'm not worried about the order, I would more be interested in how they differ. For example, IIRC .onsomeevent replaces the former event handler (if any) but how does it interact with event handlers added via .addEventListener? Can .removeEventListener remove an existing handler registered via .onsomeevent = ...? These kinds of questions. :)","msgtype":"m.text"},"ts":1527198241000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"I believe the thing wrapping the .onsomeevent value is exactly the same as a listener added by .addEventListener(), except that user code doesn't have its value, so can't pass it to .removeEventListener().","msgtype":"m.text"},"ts":1527198316000,"senderName":"jyasskin","senderId":"jyasskin@irc"},
{"content":{"body":"TabAtkins: w00t","msgtype":"m.text"},"ts":1527199013000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"thanks thanks thanks","msgtype":"m.text"},"ts":1527199022000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Iâ€™ll work today on plugging it into the HTML build","msgtype":"m.text"},"ts":1527199072000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Cool, let me know if any problems or questions.","msgtype":"m.text"},"ts":1527199194000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins: will do","msgtype":"m.text"},"ts":1527200064000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"you still on US/East today/tomorrow?","msgtype":"m.text"},"ts":1527200090000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: yt?","msgtype":"m.text"},"ts":1527201526000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"smaug____: yt?","msgtype":"m.text"},"ts":1527201692000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"rniwa: pong","msgtype":"m.text"},"ts":1527201708000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: hi","msgtype":"m.text"},"ts":1527201711000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"smaug____: do you recall the discussion about the support for detecting the supported values of link rel","msgtype":"m.text"},"ts":1527201756000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"related to tokenlist?","msgtype":"m.text"},"ts":1527201807000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"https://github.com/whatwg/dom/pull/123 and such","msgtype":"m.text"},"ts":1527202030000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"uh, discussion happening in prs, not in issues","msgtype":"m.text"},"ts":1527202062000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: oh interesting","msgtype":"m.text"},"ts":1527202063000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"smaug____: yeah, i hate that :(","msgtype":"m.text"},"ts":1527202073000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"smaug____: it's one of the worst thing about Github","msgtype":"m.text"},"ts":1527202083000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"smaug____: anyway, thanks for the pointer!","msgtype":"m.text"},"ts":1527202123000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"(should have asked cdumez about this LOL)","msgtype":"m.text"},"ts":1527202134000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"yeah, it is somewhere there, in couple of issues and prs","msgtype":"m.text"},"ts":1527202148000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: by the way, about your question about lifecycle thing in blink-dev","msgtype":"m.text"},"ts":1527202411000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"yeah, just wondered if webkit folks have looked at the proposal","msgtype":"m.text"},"ts":1527202441000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: i've already given the feedback that \"freeze\" event won't work for us because we don't wanna run scripts at that point","msgtype":"m.text"},"ts":1527202473000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"smaug____: maybe my feedback wasn't communicated well :(","msgtype":"m.text"},"ts":1527202613000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"rniwa: here now","msgtype":"m.text"},"ts":1527202669000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: smaug____ answered my question. thanks for the reply!","msgtype":"m.text"},"ts":1527202684000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"hai~","msgtype":"m.text"},"ts":1527202691000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I was surprised to see that blink is about to ship the lifecycle thing","msgtype":"m.text"},"ts":1527202714000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"I mean, it feels like something to go through still couple of design iterations. But perhaps I'm wrong.","msgtype":"m.text"},"ts":1527202821000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: yeah, it doesn't seem ready at all","msgtype":"m.text"},"ts":1527202987000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"smaug____: but then blink ships a lot of things that i think aren't ready so... there's that","msgtype":"m.text"},"ts":1527203011000,"senderName":"rniwa","senderId":"rniwa@irc"}
]