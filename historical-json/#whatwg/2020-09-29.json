[
{"content":{"body":"Krinkle: are y’all use the Beacon API?","msgtype":"m.text"},"ts":1601339961000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"..and if so, is it working for you in the way you need?","msgtype":"m.text"},"ts":1601339998000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I ask because I’ve made some changes to the sendBeacon() MDN article recently, to try help steer developers in the right direction","msgtype":"m.text"},"ts":1601340102000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"https://wiki.developer.mozilla.org/en-US/docs/Web/API/Navigator/sendBeacon$history","msgtype":"m.text"},"ts":1601340109000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"see also https://github.com/mdn/sprints/issues/3722","msgtype":"m.text"},"ts":1601340143000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"...and if you have other suggestions about how MDN could be updated to give better guidance on the Beacon API, lemme know — or chime in on https://github.com/mdn/sprints/issues/3722","msgtype":"m.text"},"ts":1601340196000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: Domenic: by the way, see Phil Walton’s comments about the unload event at https://github.com/mdn/sprints/issues/3722#issuecomment-699526801","msgtype":"m.text"},"ts":1601340296000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: if y'all=Wikipedia, then yes, we have used this in production for a while now and happy with its results.","msgtype":"m.text"},"ts":1601343401000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"Krinkle: cool yeah (and that’s what I meant)","msgtype":"m.text"},"ts":1601343451000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"We don't use it for exit path generally. We do have one infrequent campaign to measure session duration which sometimes beacons from focus/blur/pagehide/visibilitychange, indeed never unload since that event wouldn't fire in most mobile scenarios due to freezing and closing without foregrounding.","msgtype":"m.text"},"ts":1601343466000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"ah I see","msgtype":"m.text"},"ts":1601343497000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"yeah unload is nearly useless for mobile","msgtype":"m.text"},"ts":1601343521000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: I vaguely recall seeing https://volument.com/blog/sendbeacon-is-broken and finding it deceptive since my gut feeling is that sendBeacon works fine wherever you call it, even unload. the issue is just that unload often doesnt fire, there isn't any cirumstances afaik where code runs and calls sendBeacon() but it gets discarded by a browser for reasons specifically relating with how the code calling it got scheduled, right?","msgtype":"m.text"},"ts":1601343542000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"yup","msgtype":"m.text"},"ts":1601343561000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"ok","msgtype":"m.text"},"ts":1601343564000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"I think the MDN currently is perhaps too strong and might leave a developer thinking there's a logical, spec or implemetnation correlation with unload specifically.","msgtype":"m.text"},"ts":1601343616000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"But..","msgtype":"m.text"},"ts":1601343617000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"I dont think that's harmful in any way.","msgtype":"m.text"},"ts":1601343625000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"yeah the person who wrote that blog post is well-intentioned but I think they seem to just be wedded to the idea that unload should be the thing to use (because of the the name) and somewhat unable to see that unload is not what they think it iss","msgtype":"m.text"},"ts":1601343656000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I'm aware you reduced the severity from a red warning to a little sentence. Just saying, it still certainly sounds like there is correlation. But I also can't think of a more concise way that's helpful.","msgtype":"m.text"},"ts":1601343666000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"Krinkle: well see https://github.com/mdn/sprints/issues/3722#issuecomment-699526801","msgtype":"m.text"},"ts":1601343688000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"> I'd also recommend updating the warning text to recommend never using the unload event—not with with API or any any other APIs","msgtype":"m.text"},"ts":1601343695000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"> On the Chrome team, we're trying to get the message out that using the unload event is never a good idea. For example, Lighthouse v6.2.0 has added a no-unload-listeners audit, which will warn developers if any JavaScript on their pages (including from third-party libraries) adds an unload event listener, and we may even add a console warning to pages where the unload event is used.","msgtype":"m.text"},"ts":1601343704000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"..","msgtype":"m.text"},"ts":1601343712000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"so that’s pretty strong","msgtype":"m.text"},"ts":1601343717000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Yeah, I think I commented on that post on some platform somewhere at the time that in our study the failure rate wasn't significantly different from e..g. new Image() or sync XHR from the same event handler. the issue was not with sendBeacon().","msgtype":"m.text"},"ts":1601343720000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"OK","msgtype":"m.text"},"ts":1601343732000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"about unload, given Phil Walton’s comments about what Chrome is doing for Lighthouse (and possible console warning), I think thinking we might want to add some kind of note/warning about unload to the HTML spec itself","msgtype":"m.text"},"ts":1601343830000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: So yeah, I think strong wording with unload is not accurate but also harmless, and probably useful even. But perhaps on a related note - after seeing this latest edit, I actually thought that maybe we're using it incorrrectly. That is, it sounds now like it is meant to *only* be used to track unload-like scenarios, e.g. that caling it from click() or other scenarios would be unintended use.","msgtype":"m.text"},"ts":1601343840000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"oh yeah I think so too","msgtype":"m.text"},"ts":1601343882000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"unintended use, from what you describe","msgtype":"m.text"},"ts":1601343894000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"though that doesn’t mean it won’t work, or would ever stop working","msgtype":"m.text"},"ts":1601343921000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"it is more just a side effect","msgtype":"m.text"},"ts":1601343936000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"well now that I say that, that might not be all true for Safari at least","msgtype":"m.text"},"ts":1601343970000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"hm.. why would you/browsers discourage use of sendBeacon() for e.g. regular UI events and things not relating to the page lifecycle? Is it not generally the recommended path for all async/expect completed beacons?","msgtype":"m.text"},"ts":1601344012000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"like a JS-click for opening a dialog or something.","msgtype":"m.text"},"ts":1601344034000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"annevk: Domenic: I think maybe we have no precedent for adding a warning for a case like the unload event. But I wonder if we should for this","msgtype":"m.text"},"ts":1601344045000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Krinkle: I don’t think it should be discouraged","msgtype":"m.text"},"ts":1601344069000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"actually I think you might want to even raise an issue in their github tracker to inform them of that use case","msgtype":"m.text"},"ts":1601344105000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"It might be something they already took into account, I dunno","msgtype":"m.text"},"ts":1601344129000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I am not very familiar at all with that API, so it could just be my own ignorance that makes me see that use case as surprising","msgtype":"m.text"},"ts":1601344170000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: I don't know if it's representative, but to me it's the opposite. We've never specifically targetted tracking unloads. Only every other use case imaginable :P","msgtype":"m.text"},"ts":1601345042000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"but then again, I suppose that might have something to do with working with a non-profit.","msgtype":"m.text"},"ts":1601345057000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"Krinkle: why would it have anything to do with working for a non-profit?","msgtype":"m.text"},"ts":1601345238000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I'm implying that heavy tracking of eye-ball time or page abandonment is something a non-profit is much less likely to be interested in.","msgtype":"m.text"},"ts":1601345287000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"aha","msgtype":"m.text"},"ts":1601345323000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"yeah, true","msgtype":"m.text"},"ts":1601345330000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"edited mdn:Beacon_API earlier today to say it is no longer experimental","msgtype":"m.emote"},"ts":1601345406000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"yeah I saw that","msgtype":"m.text"},"ts":1601345418000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"that is why I pinged you","msgtype":"m.text"},"ts":1601345426000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"k, I figured, but wasn't sure :)","msgtype":"m.text"},"ts":1601345460000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"yeah, I get notifications when basically every web-platform MDN article other that CSS stuff gets updates","msgtype":"m.text"},"ts":1601345471000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"..which is actually a lot less notifications than you imagine","msgtype":"m.text"},"ts":1601345488000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"*than you might imagine","msgtype":"m.text"},"ts":1601345513000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Krinkle: by the way, about WikiMedia and way off-topic, but I came across https://en.wikipedia.org/wiki/User:Guy_Macon/Wikipedia_has_Cancer due to http://calpaterson.com/mozilla.html linking to it","msgtype":"m.text"},"ts":1601345593000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"...which should have a far less obnoxious title but the data there still surprised md","msgtype":"m.text"},"ts":1601345625000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"specifically, that WikiMedia Foundation revenue was $120,067,266 last year, of which $91,414,010 was spent (I guess mostly on staff compensation; it shows currently 415 people on the payroll; 284 staff, 131 contractors","msgtype":"m.text"},"ts":1601345713000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"anyway, I guess I just had no idea of the scale, as far as revenue and costs and staffing","msgtype":"m.text"},"ts":1601345787000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"(That page is a personal sandbox and not a peer-reviewed article. I think that's clear, but just stating it for the record.)","msgtype":"m.text"},"ts":1601345863000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"those numbers sound about right yeah - https://wikimediafoundation.org/about/annualreport/2019-annual-report/financials/","msgtype":"m.text"},"ts":1601345988000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"looks","msgtype":"m.emote"},"ts":1601346048000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"For software engineering, SRE, DC ops, network ops its about ~250 globally I believe.","msgtype":"m.text"},"ts":1601346080000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"essentially running from about 400 apache servers with a 20 server in-house edge cache over 4 pop sites https://wikitech.wikimedia.org/wiki/Clusters","msgtype":"m.text"},"ts":1601346139000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"that seems about right, as far as staffing","msgtype":"m.text"},"ts":1601346175000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"well, actually, it seems very low staffing, for running one of the top 10 sites in the world","msgtype":"m.text"},"ts":1601346200000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"yeah, for sure. It's getting quite hard to fill positions where you're effectively required to know everything about everything in every area :P","msgtype":"m.text"},"ts":1601346235000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"it’s gotta be pretty fun to work on something which gets that scale of people using it","msgtype":"m.text"},"ts":1601346249000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"haha","msgtype":"m.text"},"ts":1601346257000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"this year we're getting our second dedicated full-time DBA to look after the MySQL/MariaDB core database cluster.","msgtype":"m.text"},"ts":1601346263000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"which is long long overdue","msgtype":"m.text"},"ts":1601346275000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"wow, only person been doing that?","msgtype":"m.text"},"ts":1601346297000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"well, DBAs are expensive","msgtype":"m.text"},"ts":1601346305000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"well, 1 full-time. but I suppose 0.1% of a few dozen folks does add up","msgtype":"m.text"},"ts":1601346320000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1601346327000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"anyway, as far as revenue \"Donations and contributions     110,972,163\" is inspiring","msgtype":"m.text"},"ts":1601346390000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"these last 3 years have been challenging, converting ourself from a \"we're tiny, just getting started, everybody knows each other and knows what to do and gets to do it\" to \"yeah, no, we're not small anymore, let's formalise things and add (some) bureaucracy\".","msgtype":"m.text"},"ts":1601346400000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"I believe our fundraisers like to say that the average donation is $10","msgtype":"m.text"},"ts":1601346418000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"specifically meant to convey that we're not reliant on any big corporate donors","msgtype":"m.text"},"ts":1601346449000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"the \"we're tiny, just getting started, everybody knows each other\" part I can imagine being hard. It’s hard and not as fun once you have to put more bureaucracy around it all","msgtype":"m.text"},"ts":1601346478000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"yeah.","msgtype":"m.text"},"ts":1601346491000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"I've seen the org double 3x in my time here. I joined when we were around 89 staff I think?","msgtype":"m.text"},"ts":1601346509000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"well, I guess that's 2x taking into account the first doubling","msgtype":"m.text"},"ts":1601346546000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"I would imagine myself hoping it could just stay small","msgtype":"m.text"},"ts":1601346575000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but I'm actually glad we're letting go of some of the informality. I've seen first-hand the problems it causes when inability to on-boarding means I'm personally on the hook to investigate any/all incidents","msgtype":"m.text"},"ts":1601346593000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"working for a big-staff organization is just less fun","msgtype":"m.text"},"ts":1601346597000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"ah yeah, about being on-hook","msgtype":"m.text"},"ts":1601346623000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"can’t do that forever","msgtype":"m.text"},"ts":1601346648000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"19 year old me certainly thought he could.","msgtype":"m.text"},"ts":1601346664000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"anyway for me personally, looking just at the donations side, if W3C could manage to get donations on the order of just 1% of that 110,972,163, I reckon that even that would be at least 10 times what donations we are getting at W3C now","msgtype":"m.text"},"ts":1601346786000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"the start of that 3-year \"let's get serious\" was the infamous period described in those links with keywords \"lila\" and \"knowledge/search engine\". Ideas I can't express much opinion over whether it was smart, but I do know that only a minority stood behind them, and within a few months those were no longer part of the org.","msgtype":"m.text"},"ts":1601346808000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"ah yeah","msgtype":"m.text"},"ts":1601346826000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"had very long and widespread moral implications beyond their tenure, but at least it was fairly quickly dealt with.","msgtype":"m.text"},"ts":1601346854000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"we lost some good folks during that time","msgtype":"m.text"},"ts":1601346865000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"I know fairly little about how the W3C is internally organised actually, come to think of it.","msgtype":"m.text"},"ts":1601346959000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"Are you full-time there?","msgtype":"m.text"},"ts":1601346968000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"yeah, we have almost no contractors","msgtype":"m.text"},"ts":1601346983000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"well that is not true: we have people who work on grant money, a lot for accessibility-related work","msgtype":"m.text"},"ts":1601347028000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I've mainly been exposed to the working groups part, which to my knowledge is mostly \"contributed/sponsored\" time, e.g. like how Wikimedia, and Google are members with some of their staff spending some or all of their time on standards work.","msgtype":"m.text"},"ts":1601347055000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"right","msgtype":"m.text"},"ts":1601347100000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"the staff mostly do not write specs nor chair groups","msgtype":"m.text"},"ts":1601347147000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but instead do on-boarding for chairs, and somewhat, management of chairs","msgtype":"m.text"},"ts":1601347176000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"many groups and chairs actually need a lot of pushing","msgtype":"m.text"},"ts":1601347200000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"groups tend to degrade a bit into inaction or infrequent action","msgtype":"m.text"},"ts":1601347232000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"..unless someone is pushing them to stay on top of things","msgtype":"m.text"},"ts":1601347266000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Philippe Le Hégaret is the one who does the best pushing","msgtype":"m.text"},"ts":1601347371000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"and he has people who report to him who are the ones that need to be pushing chairs and group","msgtype":"m.text"},"ts":1601347402000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"so Philippe pushes the pushers","msgtype":"m.text"},"ts":1601347413000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I see, and #lazyweb - who would generally be the stakholders for which pushers are activated on behalf of? Is that like other memberr orgs? Or does the formal line end there and would they proactively start this on their own based on public interest.","msgtype":"m.text"},"ts":1601347507000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"or based on agreed upon deadlines/commitments?","msgtype":"m.text"},"ts":1601347539000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"roughly based on schedules in working-group charters","msgtype":"m.text"},"ts":1601347564000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but more broadly based on a grander notion that working groups are assets held in trust for the wider web community, churning out new useful web technologies at a regular pace/heartbeat","msgtype":"m.text"},"ts":1601347657000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"drumbeat, etc","msgtype":"m.text"},"ts":1601347668000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"so, keep stuff moving through the pipeline and getting shipped in browsers and deployed adopted, so that we can have time/resources to work on the next new thing, and the next","msgtype":"m.text"},"ts":1601347759000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but we on the W3C team are in the weird position where we have zero authority to actually keep others working on schedule","msgtype":"m.text"},"ts":1601347836000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"right!","msgtype":"m.text"},"ts":1601347852000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1601347858000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"It's great that all that exists though. I wasn't specifically aware of this, but it makes a lot of sense and I'm glad the W3 is investing in that.","msgtype":"m.text"},"ts":1601347885000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"perhaps we've not yet been naughty enough to be deservant of said push :)","msgtype":"m.text"},"ts":1601347905000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"heh","msgtype":"m.text"},"ts":1601347920000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"anyway, there are only about 20 people in total who do the direct engagement like that with groups","msgtype":"m.text"},"ts":1601347932000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"and an order of magnitude more working groups, right?","msgtype":"m.text"},"ts":1601347962000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"or who are otherwise the “technical” people on staff who do that kind of problem-solving sfuff","msgtype":"m.text"},"ts":1601347966000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"distinct wgs*","msgtype":"m.text"},"ts":1601347970000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"yeah we have a lot of groups","msgtype":"m.text"},"ts":1601347977000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but some groups are run well without as much pushing","msgtype":"m.text"},"ts":1601347996000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but anway the only real authority I and others at W3C have is that we can replace working-group chairs who don’t do their jobs, and appoint chairs to begin with","msgtype":"m.text"},"ts":1601348039000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"well I can also get groups shut down, if they are not producing the way they should be","msgtype":"m.text"},"ts":1601348064000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but in practice it’s a lot of hard work to shut a group down — too much inertia","msgtype":"m.text"},"ts":1601348096000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"anyway, more than you wanted to know, I’m sure","msgtype":"m.text"},"ts":1601348117000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"that's alright. this is good to keep in the back of my mind.","msgtype":"m.text"},"ts":1601348134000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"as I slowly unwind down towards a more healthy 40h work week, I'd very much like to do more on the webapps/webperf/whatwg groups.","msgtype":"m.text"},"ts":1601348180000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"it would be really great if you could","msgtype":"m.text"},"ts":1601348196000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"for now my time is limited to reading up on emails 10min a week, and attending the bi-weekly video call","msgtype":"m.text"},"ts":1601348221000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"yup, understood","msgtype":"m.text"},"ts":1601348230000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but as far as WGs, webperf is one that could use more active participation from people who don’t work at Google","msgtype":"m.text"},"ts":1601348244000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Google is very much carrying most of the weight in webperf","msgtype":"m.text"},"ts":1601348262000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"you would be a major asset their","msgtype":"m.text"},"ts":1601348296000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"your insights from your experience","msgtype":"m.text"},"ts":1601348309000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"yeah, and generally upto 1 person from Apple or Mozilla","msgtype":"m.text"},"ts":1601348315000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"would like to see more involvement from there as well.","msgtype":"m.text"},"ts":1601348341000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"I often feel aligned with some of the ideas from Apple in that group, but not as much proactive work toward concrete ways to realize those ideas. I'd like to try some of that.","msgtype":"m.text"},"ts":1601348388000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"I hear you, about alignment","msgtype":"m.text"},"ts":1601348526000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"there are issues with some of webperf API designs","msgtype":"m.text"},"ts":1601348552000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but IMHO those are artifacts of not enough others paying attention and taking time to be involved","msgtype":"m.text"},"ts":1601348580000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"well, also webperf editors need to take more responsibility themselves for taking initiative to do better implementor engagement, the way that WHATWG editors do","msgtype":"m.text"},"ts":1601348686000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"browser implementor are chronically busy and lazy and have limited attention specs :p","msgtype":"m.text"},"ts":1601348712000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"*attention spans","msgtype":"m.text"},"ts":1601348769000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"ack yeah, we need that.","msgtype":"m.text"},"ts":1601349067000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"I admitedly have no experience doing that thus far, though.","msgtype":"m.text"},"ts":1601349078000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"MikeSmith: yeah maybe, although it has been improvement, the lifecycle of a document is still somewhat poorly written out so I suspect there's a bunch of browser inconsistencies too","msgtype":"m.text"},"ts":1601363985000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"improved*","msgtype":"m.text"},"ts":1601363993000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"or maybe I meant to write seen","msgtype":"m.text"},"ts":1601364001000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"GitHub Actions is so much faster than Travis CI, it's hard to believe","msgtype":"m.text"},"ts":1601364197000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"littledan: so what's really the difference conceptually between accomplishing error or module through keying or the PR mechanism? The module map isn't directly observable. Implementations can optimize this either way. I guess there's something I'm missing and we probably discussed this a couple months back as well?","msgtype":"m.text"},"ts":1601375059000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yoav: does chromium run \"update the image data\" during a forced reflow?","msgtype":"m.text"},"ts":1601375353000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: not sure off the top of my head...","msgtype":"m.text"},"ts":1601375547000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"related to https://github.com/whatwg/html/pull/5894 ?","msgtype":"m.text"},"ts":1601375563000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"yoav: yeah, I was playing around in live dom viewer. Seems this isn't interoperable: http://software.hixie.ch/utilities/js/live-dom-viewer/saved/8516","msgtype":"m.text"},"ts":1601375613000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"webkit even keeps the old dimensions applied","msgtype":"m.text"},"ts":1601375743000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"hmm","msgtype":"m.text"},"ts":1601375801000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"what's the specified behavior?","msgtype":"m.text"},"ts":1601375807000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"yoav: https://html.spec.whatwg.org/multipage/images.html#relevant-mutations runs \"update the image data\", which queues a microtask in step 7 before selecting an image source in step 9","msgtype":"m.text"},"ts":1601375965000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"yoav: so to the currently running script it's still the old image","msgtype":"m.text"},"ts":1601376020000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"ok, yeah","msgtype":"m.text"},"ts":1601376026000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"I believe that should be running for relevant mutations but not sure about other forced reflows","msgtype":"m.text"},"ts":1601376058000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"https://source.chromium.org/chromium/chromium/src/+/master:third_party/blink/renderer/core/html/html_source_element.cc;l=115?q=html_source_element&ss=chromium%2Fchromium%2Fsrc:third_party%2Fblink%2Frenderer%2F&start=1","msgtype":"m.text"},"ts":1601376116000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"(for HTMLSourceElement specifically)","msgtype":"m.text"},"ts":1601376128000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"andreubotella: I'll likely fix the JSON mistake in default-RD in https://github.com/tabatkins/bikeshed/pull/1726","msgtype":"m.text"},"ts":1601377408000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I did fix it in my PR, but if you're merging that first, sure","msgtype":"m.text"},"ts":1601377881000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"andreubotella: I think to merge your PR we need to merge the whatwg.org PR and you wanted to wait for the HTML PR before doing that, right? If so, I would expect this to go first","msgtype":"m.text"},"ts":1601377951000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"This does require a bunch of follow-up work, but none of it blocking","msgtype":"m.text"},"ts":1601377977000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I'm about to push the changes MikeSmith wanted me to do","msgtype":"m.text"},"ts":1601378027000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"they'll need some review, though, so yeah, go ahead","msgtype":"m.text"},"ts":1601378036000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"andreubotella: I can rebase if it comes to that, but I kinda hope that git is smart enough","msgtype":"m.text"},"ts":1601378148000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I think these differences are observable. For example, even with the `type`-only restriction, there are observably different numbers of fetches if you import with different types (I think we did discuss this some months ago, and I'm fine with concluding that this is an unimportant edge case).","msgtype":"m.text"},"ts":1601378818000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"The thing I'm more concerned about is non-type assertions. I'd prefer for these to be ignored and not treated as part of the cache key. If we can agree on that, then I'm fine with this greater number of fetches for varying `type`, though I still don't understand the motivation.","msgtype":"m.text"},"ts":1601378826000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"it's also observable what we choose for non-`type` assertions. For example, if we permitted them and ignored them but treated them as part of the key, or had an error on all of them. The choice here has implications for what other kinds of assertions we could compatibly add in the future.","msgtype":"m.text"},"ts":1601379243000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"yoav: what I really wanted to do was something more fancy: http://software.hixie.ch/utilities/js/live-dom-viewer/?saved=8517","msgtype":"m.text"},"ts":1601382992000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"littledan: so I'm not sure that's true in the context of the memory cache (which is undefined, but still)","msgtype":"m.text"},"ts":1601385389000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Does this depend on the cache headers of the response?","msgtype":"m.text"},"ts":1601385440000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"littledan: I think it would help to spell edge cases out to make an informed decision","msgtype":"m.text"},"ts":1601385447000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"littledan: well, there's that too, but the memory cache does not depend on that","msgtype":"m.text"},"ts":1601385459000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"oh, I see. where can I learn more about the memory cache?","msgtype":"m.text"},"ts":1601385471000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"littledan: I guess in WebKit/Chromium's codebase? https://github.com/whatwg/fetch/issues/590 has some context","msgtype":"m.text"},"ts":1601385501000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"andreubotella: seems git deals with it fine","msgtype":"m.text"},"ts":1601385769000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TabAtkins: can you separate text macros by anything other than a newline?","msgtype":"m.text"},"ts":1601385912000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TabAtkins: e.g. Text Macro: X XVAL, Y YVAL","msgtype":"m.text"},"ts":1601385938000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: rebased","msgtype":"m.text"},"ts":1601385982000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"TabAtkins: oh, I also get \"Unknown include/exclude-if condition 'boilerplate:ipr'\"","msgtype":"m.text"},"ts":1601385984000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Maybe csswg.org is not up-to-date yet","msgtype":"m.text"},"ts":1601386799000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Hmm no that doesn't make sense","msgtype":"m.text"},"ts":1601386871000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TabAtkins: could that be because there's no continue statements after the yield?","msgtype":"m.text"},"ts":1601387010000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk, TabAtkins: The conditional includes seem to be handled only after the macros are replaced, so the build is failing without the LATESTRD macro","msgtype":"m.text"},"ts":1601387461000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"this might not be something worth fixing, since if the include ends up in the spec, there's no downside in using [LATESTRD?]","msgtype":"m.text"},"ts":1601387486000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"*something worth fixing from the Bikeshed side, not from the WHATWG side","msgtype":"m.text"},"ts":1601387511000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"andreubotella: where did you see that failure?","msgtype":"m.text"},"ts":1601387583000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"building locally on my rebased branch","msgtype":"m.text"},"ts":1601387602000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"andreubotella: I see, we could make it LATESTRD? I guess","msgtype":"m.text"},"ts":1601387621000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"andreubotella: I'll do that and it seems to me that https://github.com/tabatkins/bikeshed/pull/1774 fixes the other issue","msgtype":"m.text"},"ts":1601387862000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"andreubotella: https://github.com/tabatkins/bikeshed/pull/1775 if that seems reasonable to you as well I'll land these so we can get on with it :-)","msgtype":"m.text"},"ts":1601388004000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"and if it continues to fail I'll back it all out","msgtype":"m.text"},"ts":1601388014000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"that's fine by me","msgtype":"m.text"},"ts":1601388030000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"It takes a long time to build DOM locally","msgtype":"m.text"},"ts":1601388187000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"andreubotella: bikeshed fixes are landed","msgtype":"m.text"},"ts":1601388535000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TabAtkins: please review when you're awake and let me know if I should never do that again 😊","msgtype":"m.text"},"ts":1601388578000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I don't follow how what the spec does for <script src=X></script> where X is: document.write(\"<script src=Y></script><img src=Z>\");","msgtype":"m.text"},"ts":1601388860000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"first there's https://html.spec.whatwg.org/multipage/parsing.html#scriptEndTag","msgtype":"m.text"},"ts":1601388877000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"\"Prepare\" will mark the script as the pending parser-blocking script, for the first script","msgtype":"m.text"},"ts":1601388908000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"\"script nesting level\" is zero, so the Otherwise steps are run","msgtype":"m.text"},"ts":1601388928000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"so far so good. This is where I want to kick off the (first) speculative parser","msgtype":"m.text"},"ts":1601388956000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"but then the script is loaded and executed (step 10), and the document.write will invoke the tree builder reentrantly, reaching this part again but with \"script nesting level\" being 1","msgtype":"m.text"},"ts":1601389069000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"where the spec says \"Set the parser pause flag to true, and abort the processing of any nested invocations of the tokenizer, yielding control back to the caller. (Tokenization will resume when the caller returns to the \"outer\" tree construction stage.)\"","msgtype":"m.text"},"ts":1601389109000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"and that's what I don't get. how is the Y script loaded and executed?","msgtype":"m.text"},"ts":1601389173000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"Where should I kick off a second speculative parser to find the img in the document.write string","msgtype":"m.text"},"ts":1601389195000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"Creating a bunch of PRs always leads to finding lots of novel xref issues, sigh","msgtype":"m.text"},"ts":1601389899000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: You do multiple text macros by supplying the key multiple times. Text macros can expand into *any* text, so I couldn't rely on any delimiter at all.","msgtype":"m.text"},"ts":1601397023000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins: yeah, fair","msgtype":"m.text"},"ts":1601397613000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(Newline happens to work because of the shorthanding where if you newline+indent, it's the same as repeating the previous key.)","msgtype":"m.text"},"ts":1601397646000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"annevk: I've also added a note to the docs about making sure you make the macro optional if you're conditioning on its existence; the ordering of macros vs conditionals isn't something I can change. Thanks for noticing it!","msgtype":"m.text"},"ts":1601399797000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"would the web still be interested in that \"blöcks\" proposal","msgtype":"m.text"},"ts":1601402487000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"i was thinking of looking at it again, my motivation more being node's worker api","msgtype":"m.text"},"ts":1601402529000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"TabAtkins: thanks, expected as much; credit to andreubotella though","msgtype":"m.text"},"ts":1601405552000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"devsnek: a while back folks from Chrome pivoted away from workers and to scheduling (https://github.com/WICG/main-thread-scheduling) because they found the cross-thread communication overhead was prohibitive for realistic use cases. I will see if I can find the analysis they did. So, it's no longer considered high priority to make workers more ergonomic, from Chrome's perspective.","msgtype":"m.text"},"ts":1601407908000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"That said, I think for people who *are* using workers on the web, blöcks would be nice. Maybe nice enough for the web to spec and ship a worker blöck, although as usual speccing/shipping sugar features that can also be accomplished in libraries seems hard for any vendor to prioritize.","msgtype":"m.text"},"ts":1601407964000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: thanks for the info","msgtype":"m.text"},"ts":1601408801000,"senderName":"devsnek","senderId":"devsnek@irc"}
]