[
{"content":{"body":"domfarolino: Our SVG <script>s use #prepare-a-script. It seemed logical that they behave the same as HTML, so the code is common to both. I think we just assumed other browsers did the same.","msgtype":"m.text"},"ts":1591604479000,"senderName":"PiersW","senderId":"PiersW@irc"},
{"content":{"body":"Chrome does the same","msgtype":"m.text"},"ts":1591604517000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"Yeah, I think the main difference is 1) the HTML parser and 2) the public API (xlink:href vs src for instance)","msgtype":"m.text"},"ts":1591604678000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"And arguably 1 is a duplicate of 2","msgtype":"m.text"},"ts":1591604713000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yeah, for 2 we haven't implemented all the attributes (async, etc) for SVG, though it'd be trivial to do so but it's not part of the SVG 2 spec.","msgtype":"m.text"},"ts":1591604902000,"senderName":"PiersW","senderId":"PiersW@irc"},
{"content":{"body":"HTML attrs, I mean.","msgtype":"m.text"},"ts":1591604919000,"senderName":"PiersW","senderId":"PiersW@irc"},
{"content":{"body":"I have a question regarding html5lib (Python): Is there support for \"diffing\" two html trees? In particular I'd like to check attributes, conditional comments etc. Also I want to check generated CSS in <style>  tags - probably via a separate library but the diffing should return the style contents so I can do the diff on my own.","msgtype":"m.text"},"ts":1591616609000,"senderName":"scfe","senderId":"scfe@irc"},
{"content":{"body":"any pointers?","msgtype":"m.text"},"ts":1591616612000,"senderName":"scfe","senderId":"scfe@irc"},
{"content":{"body":"I'm not looking for a turn-key solution - just some Python API I can use without resorting to raw parsing events.","msgtype":"m.text"},"ts":1591616651000,"senderName":"scfe","senderId":"scfe@irc"},
{"content":{"body":"I'm only aware of tools to diff documents, but those wouldn't do what you need (sounds like you're looking at XSS?)","msgtype":"m.text"},"ts":1591617155000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: No, actually I want to test html generation","msgtype":"m.text"},"ts":1591617330000,"senderName":"scfe","senderId":"scfe@irc"},
{"content":{"body":"basically I want to make sure that my new tool outputs (roughly) the same html as some external legacy tool.","msgtype":"m.text"},"ts":1591617364000,"senderName":"scfe","senderId":"scfe@irc"},
{"content":{"body":"The upstream tool generates html (mostly \"not crazy\") with conditional comments, some embedded style tags etc.","msgtype":"m.text"},"ts":1591617422000,"senderName":"scfe","senderId":"scfe@irc"},
{"content":{"body":"however this is html not xml so many xml differs won't work","msgtype":"m.text"},"ts":1591617449000,"senderName":"scfe","senderId":"scfe@irc"},
{"content":{"body":"so basically it'd like to answer the question \"is this html document (almost) the same as some other document\" and I probably need some hooks to do \"custom stuff\" (e.g. compare CSS rules)","msgtype":"m.text"},"ts":1591617523000,"senderName":"scfe","senderId":"scfe@irc"},
{"content":{"body":"I guess I'd try to write something from scratch that takes two trees and compares them and outputs/breaks on differences and then modify it as I go","msgtype":"m.text"},"ts":1591617552000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"the library I'm looking for should take care of the html rules (e.g. disregard ordering of attributes, optional closing tags, ...)","msgtype":"m.text"},"ts":1591617560000,"senderName":"scfe","senderId":"scfe@irc"},
{"content":{"body":"Assuming you have two parsed trees","msgtype":"m.text"},"ts":1591617563000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yes, html5lib (and others) can parse my html.","msgtype":"m.text"},"ts":1591617581000,"senderName":"scfe","senderId":"scfe@irc"},
{"content":{"body":"writing more or less from scratch is also one of my ideas but then I considered all the edge cases and I hope there is some library which does this. I mean comparing generated html should be a pretty common task, no?","msgtype":"m.text"},"ts":1591617630000,"senderName":"scfe","senderId":"scfe@irc"}
]