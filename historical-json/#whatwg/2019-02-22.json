[
{"content":{"body":"annevk: yt?","msgtype":"m.text"},"ts":1550809183000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"oh perhaps it's too early","msgtype":"m.text"},"ts":1550809195000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"Hmm, whatwg.dev sounds kinda cool https://domains.google.com/m/registrar/search?searchTerm=whatwg.dev","msgtype":"m.text"},"ts":1550809565000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"Ideally 5AM is too early, yes ðŸ˜Š","msgtype":"m.text"},"ts":1550815207000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic, do you want to do another review on https://github.com/heycam/webidl/pull/635 or should I land?","msgtype":"m.text"},"ts":1550823758000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"\"I guess I was never bothered by it because I see a return statement as a thing that returns the control back to the caller, not a thing that returns a value.\" I have questions rniwa ðŸ˜ƒ","msgtype":"m.text"},"ts":1550825854000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Update on WHATWG being blocked in Russia: https://twitter.com/serj_zavolzhski/status/1098762533924716544","msgtype":"m.text"},"ts":1550827518000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Reviews from Domenic \\o/","msgtype":"m.text"},"ts":1550829034000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I think that kind of brute-force hosting-service-based blocking goes beyond even what China does","msgtype":"m.text"},"ts":1550829211000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"it gives a big F U to all users of the web there I guess","msgtype":"m.text"},"ts":1550829233000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Russia's government is generally known for giving a big F U to its citizens","msgtype":"m.text"},"ts":1550829264000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah but the citizens are also good about giving a pretty good F U right back","msgtype":"m.text"},"ts":1550829298000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"and they are way smarter and more resourceful than the bureaucrats","msgtype":"m.text"},"ts":1550829323000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"anyway we really need to someday have a system that makes it impossible for state bad actors to do this kind of stuff","msgtype":"m.text"},"ts":1550829357000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"some kind of truly decentralized hosting on scale","msgtype":"m.text"},"ts":1550829410000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"some kind of magic to automatically (re)route around it all","msgtype":"m.text"},"ts":1550829449000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"or maybe just IPFS on real scale","msgtype":"m.text"},"ts":1550829492000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I dunno, completely unchecked systems have led to plenty of abuse too","msgtype":"m.text"},"ts":1550829588000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"true","msgtype":"m.text"},"ts":1550829725000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"canâ€™t have everything","msgtype":"m.text"},"ts":1550829735000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: in other news, about the issues filed around the integrity attribute and SRI supposedly working for inline scripts, I very much doubt whatâ€™s happening is what the OP claims","msgtype":"m.text"},"ts":1550829843000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I tried some tests and have not be able to reproduce that in any browser","msgtype":"m.text"},"ts":1550829866000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: ah good","msgtype":"m.text"},"ts":1550829878000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: thanks for looking into that","msgtype":"m.text"},"ts":1550829893000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah I could be wrong but I donâ€™t think so","msgtype":"m.text"},"ts":1550829909000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but I guess will wait for mkwst to reply on that","msgtype":"m.text"},"ts":1550829928000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"donâ€™t want to get into an unproductive back-and-forth with the OP there","msgtype":"m.text"},"ts":1550829962000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Next time I'm going to ask for a reduced test first","msgtype":"m.text"},"ts":1550830067000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah that would save some time","msgtype":"m.text"},"ts":1550830185000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"foolip: I assume you'll review and take care of https://github.com/whatwg/fullscreen/pull/145 mostly btw","msgtype":"m.text"},"ts":1550841327000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yep","msgtype":"m.text"},"ts":1550841351000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"foolip: I'll take care of the build errors though as they're my fault","msgtype":"m.text"},"ts":1550841351000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"foolip: which I guess means this cannot be merged today, but hopefully the HTML PR gets merged later so it can be done on Monday or so","msgtype":"m.text"},"ts":1550841393000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I don't really understand \"But in general, they need to remain in the group they were in when they were created.\"","msgtype":"m.text"},"ts":1550844501000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Once discarded, they should be in no group, right?","msgtype":"m.text"},"ts":1550844531000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: when the bc is discarded, the Window object needs to remain in the same agent, is what I was trying to say","msgtype":"m.text"},"ts":1550844589000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"They do?? Hmm, thinking...","msgtype":"m.text"},"ts":1550844628000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: so if you have a bc and a nested bc, and each has a document and those are same-origin with each other, there's 1 agent with 2 globals","msgtype":"m.text"},"ts":1550844641000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: if I then discard the nested bc, the agent still has 2 globals","msgtype":"m.text"},"ts":1550844651000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: but the second global's browsing context is now null","msgtype":"m.text"},"ts":1550844664000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: the UA might be able to collect the second global, if nobody holds a ref to it though","msgtype":"m.text"},"ts":1550844697000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yeah, I think I see...","msgtype":"m.text"},"ts":1550844730000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: I'm not sure if that means it should be removed from the agent's realms though","msgtype":"m.text"},"ts":1550844745000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Right, the question is whether can-share-memory-with should work...","msgtype":"m.text"},"ts":1550844767000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Which in turn impacts postMessaging","msgtype":"m.text"},"ts":1550844782000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"This might be moot because I'm not sure you can postMessage from a discarded BC's Window","msgtype":"m.text"},"ts":1550844798000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"It seems like removing might be better if we can get away with it because otherwise we're saying there's a strong reference UA -> Agent cluster -> Agent -> Realms -> Window which can't be cut","msgtype":"m.text"},"ts":1550844873000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: yeah, I'm coming around to that as well","msgtype":"m.text"},"ts":1550844906000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I agree conceptually that the realm still \"can share memory with\" others","msgtype":"m.text"},"ts":1550844928000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"But holding it in the realms set seems unfortunate","msgtype":"m.text"},"ts":1550844938000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: can-share-memory shouldn't be relevant within an agent","msgtype":"m.text"},"ts":1550844944000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Oh, that'd be good","msgtype":"m.text"},"ts":1550844952000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: ah I see, it's because of how we define that","msgtype":"m.text"},"ts":1550844992000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: yeah, so imperative allocation of agents would take care of that too","msgtype":"m.text"},"ts":1550845029000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"It seems like adding null checks at this stage would also work though","msgtype":"m.text"},"ts":1550845051000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: whenever we create an agent, it'd become part of some existing agent cluster","msgtype":"m.text"},"ts":1550845055000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: the null checks end up being weird because it would mean the Window is in a different agent, no? One with all the windows that don't have a bc","msgtype":"m.text"},"ts":1550845129000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Like I'm not sure how much you're planning on changing \"If A's relevant settings object's responsible browsing context's top-level browsing context's group is not B's relevant settings object's responsible browsing context's top-level browsing context's group, then return false.\" but it seems likely to me the end state will be similar.","msgtype":"m.text"},"ts":1550845132000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I think the Window is in no agent","msgtype":"m.text"},"ts":1550845141000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"That's the point, because then no agent is holding a reference to it","msgtype":"m.text"},"ts":1550845151000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Which allows it to be GCed","msgtype":"m.text"},"ts":1550845160000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: but that's not what that ends up meaning?","msgtype":"m.text"},"ts":1550845167000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"rereads","msgtype":"m.emote"},"ts":1550845178000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I guess without explicit agent allocation it's pretty unclear what would happen to Windows that are not same-agent Window objects with any other window object.","msgtype":"m.text"},"ts":1550845217000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"But I think the end state should be that discarded BC's Windows are in no agent. Agree?","msgtype":"m.text"},"ts":1550845240000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Well, I agree that the agent shouldn't hold a pointer to them","msgtype":"m.text"},"ts":1550845266000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I think I would be happy if we just amended the XXX box to say something like \"We're headed toward having discarded BC's Windows not be in the same agent as they originally were in.\" (OK that phrasing was terrible, but you get the idea.)","msgtype":"m.text"},"ts":1550845361000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Right now I interpret the XXX is saying \"we wish these pointers weren't null and these windows could just stay in their agent\"","msgtype":"m.text"},"ts":1550845400000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I see an agent as some kind of container and the Window would still be in that container, but the container itself would no longer keep it there","msgtype":"m.text"},"ts":1550845493000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Meaning that the Window can be GC'd if nothing holds a ref to it","msgtype":"m.text"},"ts":1550845509000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"But it wouldn't end up in its own container","msgtype":"m.text"},"ts":1550845518000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"So an Agent's [[Realms]] internal slot should be a weak set?","msgtype":"m.text"},"ts":1550845521000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Or alternately, you could have a realm -> agent pointer but no [[Realms]] list.","msgtype":"m.text"},"ts":1550845562000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Operationally I think this only affects whether discarded BC's windows can postMessage SABs around","msgtype":"m.text"},"ts":1550845586000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I think that's impossible anyway because the queued task is associated with a Document that will never be fully active.","msgtype":"m.text"},"ts":1550845654000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Yeah, agreed","msgtype":"m.text"},"ts":1550845662000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"With that last bit, but isn't an Agent also the container for all objects that can access each other?","msgtype":"m.text"},"ts":1550845678000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I guess it's all a bit vague in ECMAScript","msgtype":"m.text"},"ts":1550845693000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I think conceptually that's probably true, but the only spec consequence it has is when we check the agent cluster in structured serialize","msgtype":"m.text"},"ts":1550845706000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"(And event loop association?)","msgtype":"m.text"},"ts":1550845719000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"But I tend to agree that Window can be removed from Agent's [[Realms]] when it's discarded","msgtype":"m.text"},"ts":1550845727000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Hmm I think ES might crash if we said a global had no agent","msgtype":"m.text"},"ts":1550845754000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Well yeah, that was the other thing I was wondering about","msgtype":"m.text"},"ts":1550845767000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"creating SABs looks up things on the surrounding agent","msgtype":"m.text"},"ts":1550845774000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"OK so you're probably right, they need to stay with the agent","msgtype":"m.text"},"ts":1550845790000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I am coming around to keeping the XXX as-is","msgtype":"m.text"},"ts":1550845799000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"But I am glad we talked it through","msgtype":"m.text"},"ts":1550845806000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"So then [[Realms]] ends up a Weakmap I guess?","msgtype":"m.text"},"ts":1550845815000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Either that or we only do a realm -> agent pointer and no agent -> realm pointer","msgtype":"m.text"},"ts":1550845826000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Or would globals point to Agents?","msgtype":"m.text"},"ts":1550845828000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I am not sure what we actually would use [[Realms]] for","msgtype":"m.text"},"ts":1550845841000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"good point","msgtype":"m.text"},"ts":1550845849000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ES does use agent cluster -> agent mapping","msgtype":"m.text"},"ts":1550845861000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"With the signifier thingie","msgtype":"m.text"},"ts":1550845870000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"But that makes sense and we (need to) do similar things","msgtype":"m.text"},"ts":1550845885000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"To find other event loops for postMessage()","msgtype":"m.text"},"ts":1550845894000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: will you update the ES issue on clarifying agents with this point?","msgtype":"m.text"},"ts":1550845934000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(the global -> agent pointer)","msgtype":"m.text"},"ts":1550845957000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Can do","msgtype":"m.text"},"ts":1550845982000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic / annevk: either of you have (more) thoughts on https://github.com/heycam/webidl/pull/647 ?","msgtype":"m.text"},"ts":1550846402000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"looks","msgtype":"m.emote"},"ts":1550846423000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ms2ger: that looks great, thanks","msgtype":"m.text"},"ts":1550846488000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ms2ger: I don't get a notification when you force push, FWIW","msgtype":"m.text"},"ts":1550846515000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(at least, I think I don't)","msgtype":"m.text"},"ts":1550846531000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk, oh, that's good to know","msgtype":"m.text"},"ts":1550846533000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"https://github.com/whatwg/html/issues/4175#issuecomment-466047231 about a no-credentials mode instead of CORS is so weird to me.","msgtype":"m.text"},"ts":1550860900000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"If we thought intranets didn't matter, we would've just made no-credentials a requirement for outgoing requests long ago and never bothered inventing CORS.","msgtype":"m.text"},"ts":1550860914000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"That is exactly my feeling","msgtype":"m.text"},"ts":1550862076000,"senderName":"annevk","senderId":"annevk@irc"}
]