[
{"content":{"body":"oliverdunk: you won't get a response with type \"cors\" if the request didn't ask for CORS","msgtype":"m.text"},"ts":1561005023000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: https://travis-ci.org/whatwg/encoding/builds/547664070 is still failing so we can't publish the RD for Encoding","msgtype":"m.text"},"ts":1561005388000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: maybe it's taking to long?","msgtype":"m.text"},"ts":1561005397000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: it takes ~8 minutes to run","msgtype":"m.text"},"ts":1561005444000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: I just restarted it","msgtype":"m.text"},"ts":1561005476000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: hmm yeah, given that it fails 10min in I guess it's not the time","msgtype":"m.text"},"ts":1561005485000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I see it timed out after 10 minutes","msgtype":"m.text"},"ts":1561005485000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: I did a restart once already fwiw","msgtype":"m.text"},"ts":1561005499000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ah OK","msgtype":"m.text"},"ts":1561005510000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"https://www.w3.org/2019/06/12-w3m-minutes.html#item05","msgtype":"m.text"},"ts":1561005539000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Decision: Signing the Consortia letter to DoC","msgtype":"m.text"},"ts":1561005543000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"https://lists.w3.org/Archives/Team/w3mreq/2019Jun/att-0053/01-part","msgtype":"m.text"},"ts":1561005594000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"oofs","msgtype":"m.text"},"ts":1561006170000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"sorrt","msgtype":"m.text"},"ts":1561006175000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: so I can “fix” the Encoding build issue by making the checker emit that name of every filename it checks","msgtype":"m.text"},"ts":1561014749000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"that way there will be continuous log output while it’s checking, and we won’t his the Travis no-log-output-for-more-than-10-minutes timeout","msgtype":"m.text"},"ts":1561014813000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: that also has the advantage of making it not look like the build is hanging, when in fact it’s actually running the HTML checker but just on a really large number of files (as is the case with the Encoding standard)","msgtype":"m.text"},"ts":1561015140000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"actually the reason that checking the Encoding files takes so long isn’t just due to there being so many files to check (66 files), it’s also that 30+ of the files are bigger than 4MB","msgtype":"m.text"},"ts":1561016721000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: https://github.com/whatwg/whatwg.org/pull/259 will fix the Encoding build-timeout issue","msgtype":"m.text"},"ts":1561017491000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: approved","msgtype":"m.text"},"ts":1561019558000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"These kinds of things were why I was wondering whether maybe we should not check the encoding tables. But I guess it's still a good thing to do.","msgtype":"m.text"},"ts":1561019588000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: yeah but the changes are general improvements that we’re better off with anyway, so I guess it’s a net win","msgtype":"m.text"},"ts":1561024640000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Domenic: hmm well take a look at the current log output at https://travis-ci.org/whatwg/encoding/builds/547664070","msgtype":"m.text"},"ts":1561025906000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"are there multiple subdirectories there under encoding.spec.whatwg.org/commit-snapshots/ ?","msgtype":"m.text"},"ts":1561025957000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"or just one?","msgtype":"m.text"},"ts":1561025962000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"if there are subdirectories there for all previous snapshots.. that’s gonna take a while","msgtype":"m.text"},"ts":1561026005000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"There should only be one per build","msgtype":"m.text"},"ts":1561026182000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"OK","msgtype":"m.text"},"ts":1561026260000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"OK, green","msgtype":"m.text"},"ts":1561026461000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"https://travis-ci.org/whatwg/encoding/builds/547664070","msgtype":"m.text"},"ts":1561026463000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":">  Ran for 11 min 39 sec","msgtype":"m.text"},"ts":1561026471000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Woohoo!","msgtype":"m.text"},"ts":1561026473000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"yeah :)","msgtype":"m.text"},"ts":1561026479000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"so another reason it takes so long is that it’s essentionally checking all the files 3 times","msgtype":"m.text"},"ts":1561026515000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"once in encoding.spec.whatwg.org/commit-snapshots/753f0d461b3a1f04d0f8355052a5491e2629799e, once in encoding.spec.whatwg.org/review-drafts/2019-06, and once in the root encoding.spec.whatwg.org/","msgtype":"m.text"},"ts":1561026574000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"each run takes about 3 minutes and checks ~180MB of files, 66 files total","msgtype":"m.text"},"ts":1561026617000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"so it’s checking more than .5GB of HTML source in total","msgtype":"m.text"},"ts":1561026637000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"so it takes on average about 2.7 seconds to check each doc","msgtype":"m.text"},"ts":1561026686000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Not so bad :)","msgtype":"m.text"},"ts":1561026771000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"well actually for normal-sized docs, it takes only a few hundred milliseconds","msgtype":"m.text"},"ts":1561026805000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but in the case of Encoding, it’s heavily weighted by the fact that almost half the docs are 4MB+","msgtype":"m.text"},"ts":1561026851000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"anyway, I think we now have everything fixed as far as getting the review drafts built","msgtype":"m.text"},"ts":1561026896000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Yeah, a wild review draft has appeared! https://encoding.spec.whatwg.org/review-drafts/2019-06/","msgtype":"m.text"},"ts":1561028471000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Thanks for all your help :D","msgtype":"m.text"},"ts":1561028490000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"\\o/","msgtype":"m.text"},"ts":1561028511000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"https://travis-ci.org/whatwg/html/builds/548150617#L927 wattt svg <rect>s and <foreignObject>s need their width/height set as content attributes? CSS seems like it should work fine...","msgtype":"m.text"},"ts":1561028700000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"MikeSmith: I know it's getting late but IMO https://github.com/whatwg/html/pull/4713/files#diff-36cd38f49b9afa08222c0dc9ebfe35ebR88225 should be valid SVG. But it fails the build. I couldn't find any requirements in https://www.w3.org/TR/SVG2/shapes.html#RectElement to support the validator error.","msgtype":"m.text"},"ts":1561028802000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: looking now","msgtype":"m.text"},"ts":1561028822000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"it might actually be because the SVG WG changed the spec","msgtype":"m.text"},"ts":1561028861000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Hmmmm","msgtype":"m.text"},"ts":1561028872000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"https://www.w3.org/TR/SVG2/Overview.html is from 04 October 2018","msgtype":"m.text"},"ts":1561028876000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I know they made other changes that relaxed previous restrictions","msgtype":"m.text"},"ts":1561028907000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"https://www.w3.org/TR/SVG11/shapes.html#RectElement seems pretty similar","msgtype":"m.text"},"ts":1561028928000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"looks there too","msgtype":"m.emote"},"ts":1561029006000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Domenic: OK, yeah, the #REQUIRED restriction was in https://www.w3.org/TR/2003/REC-SVG11-20030114/shapes.html#RectElement","msgtype":"m.text"},"ts":1561029368000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Oh fascinating","msgtype":"m.text"},"ts":1561029400000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"DTDs with requirements imposed via comments. (Or is the # syntax not comments?)","msgtype":"m.text"},"ts":1561029436000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: I don’t actually remember how it was done for DTDs","msgtype":"m.text"},"ts":1561029511000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"kinda glad I don’t remember :p","msgtype":"m.text"},"ts":1561029520000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"anyway, as far as I can see, the current spec doesn’t define any attributes as required","msgtype":"m.text"},"ts":1561029547000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"which seems like maybe it’s an oversight","msgtype":"m.text"},"ts":1561029570000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I dunno, given how (almost?) everything can be set via CSS, it kind of makes sense to me.","msgtype":"m.text"},"ts":1561029583000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"well I see the prose of the original spec never defined anything as required either","msgtype":"m.text"},"ts":1561029603000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"it was only indicated with that #REQUIRED thing in the DTD","msgtype":"m.text"},"ts":1561029628000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"sigh, I really don’t want to bash other groups’ work but this is really really annoying","msgtype":"m.text"},"ts":1561029683000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I mean it’s now completely ambiguous whether they actually intend for no attributes to be required, or whether they just didn’t bother to carry any of the restrictions over","msgtype":"m.text"},"ts":1561029744000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"True :-/","msgtype":"m.text"},"ts":1561029756000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"OK, anyway, in the checker schema I can un-require the problem attributes","msgtype":"m.text"},"ts":1561029793000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I need to do this for foreignObject too, I think (becuase we are getting errors for that too)","msgtype":"m.text"},"ts":1561029819000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I can also add them to all the code I guess, just feels redundant given I could instead do it in CSS","msgtype":"m.text"},"ts":1561029834000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"will do that right now and push a new checker build","msgtype":"m.text"},"ts":1561029837000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"nah, easier to change the checker","msgtype":"m.text"},"ts":1561029860000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"<3","msgtype":"m.text"},"ts":1561029885000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Oh, wait","msgtype":"m.text"},"ts":1561029981000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Firefox does not seem to like setting width and height via CSS","msgtype":"m.text"},"ts":1561029990000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"MikeSmith: yeah, cancel that checker update, those errors prevented me from writing code that doesn't work in Firefox. Which means we have a separate interop issue, but meh...","msgtype":"m.text"},"ts":1561030253000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: ah OK","msgtype":"m.text"},"ts":1561030277000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Now I can show you all my beautiful diagram https://whatpr.org/html/4713/webappapis.html#module-script-fetching-diagram","msgtype":"m.text"},"ts":1561030541000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"(actually Hiroshige's, but I did the SVG conversion)","msgtype":"m.text"},"ts":1561030558000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"looks","msgtype":"m.emote"},"ts":1561030759000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Domenic: very ... utilitarian","msgtype":"m.text"},"ts":1561030796000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"lol","msgtype":"m.text"},"ts":1561030803000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I believe this style is called “brutalism”","msgtype":"m.text"},"ts":1561030813000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"hahahaha","msgtype":"m.text"},"ts":1561030839000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I suppose we could borrow some styles from https://html.spec.whatwg.org/multipage/parsing.html#overview-of-the-parsing-model","msgtype":"m.text"},"ts":1561031320000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: so by the way, we actually have existing tests that would fail if I made that SVG schema change","msgtype":"m.text"},"ts":1561032691000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"https://github.com/web-platform-tests/wpt/blob/master/conformance-checkers/html-svg/struct-dom-19-f-novalid.html","msgtype":"m.text"},"ts":1561032697000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"and https://github.com/web-platform-tests/wpt/blob/master/conformance-checkers/html-svg/struct-dom-17-f-novalid.html","msgtype":"m.text"},"ts":1561032748000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"so even if I had merged the schema change, I would have had to change those tests — because the checker build fails if any tests fail","msgtype":"m.text"},"ts":1561032791000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Always good to have test coverage :)","msgtype":"m.text"},"ts":1561033030000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1561033045000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"especially if the tests came from a 3rd-party contributor, which those are","msgtype":"m.text"},"ts":1561033079000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Anyone here familiar with https://www.w3.org/TR/trace-context/?","msgtype":"m.text"},"ts":1561033706000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Is this a web application protocol not intended to be natively implemented in browsers?","msgtype":"m.text"},"ts":1561033720000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"\"A simplistic regex-based implementation can be found in the test folder. This implementation has 100% compliance to the test suite.\" not browsers then","msgtype":"m.text"},"ts":1561033779000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I can doublecheck with plh (it’s his group) but as far as what I know about it, it’s not intended to be natively implemented in browsers","msgtype":"m.text"},"ts":1561034030000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: someone filed https://github.com/whatwg/fetch/issues/911","msgtype":"m.text"},"ts":1561034200000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"looks","msgtype":"m.emote"},"ts":1561034574000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: so, nowhere in the issue description at https://github.com/whatwg/fetch/issues/911 does the OP provide any explanation of any problem specific to exchanging “distributed trace contexts” that is caused by the CORS preflight","msgtype":"m.text"},"ts":1561040165000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"the two items described in the “this poses two challenges for observability providers” part are general problems/costs of the preflight for any case at all","msgtype":"m.text"},"ts":1561040250000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: yeah, true","msgtype":"m.text"},"ts":1561040270000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: might be worth asking about","msgtype":"m.text"},"ts":1561040308000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"well the two things that OP lists are, 1) The preflight request increases the latency for the original HTTP request and 2) Unless the server… is modified to respond appropriately to the preflight request the request would fail","msgtype":"m.text"},"ts":1561040362000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"as far as the second point, the server system already must be modified to do something with the `traceparent` and `tracestate` request headers","msgtype":"m.text"},"ts":1561040451000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"so it’s not clear why an admin of such a server system would not also be able to CORS-enable the server system, or why it would be any more trouble to do so","msgtype":"m.text"},"ts":1561040531000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: anyway, I will add a comment there","msgtype":"m.text"},"ts":1561040555000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: did you see my last message last night?","msgtype":"m.text"},"ts":1561041051000,"senderName":"oliverdunk","senderId":"oliverdunk@irc"},
{"content":{"body":"oliverdunk: I replied, no? See the logs","msgtype":"m.text"},"ts":1561041115000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Missed that somehow, thanks. Wouldn't it be set to cors by the otherwise of 4.1 step 5?","msgtype":"m.text"},"ts":1561041323000,"senderName":"oliverdunk","senderId":"oliverdunk@irc"},
{"content":{"body":"oliverdunk: oh if we’re talking fetch(), yes","msgtype":"m.text"},"ts":1561041505000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Cool. So for detecting a redirect with fetch(), everything sounds alright?","msgtype":"m.text"},"ts":1561041616000,"senderName":"oliverdunk","senderId":"oliverdunk@irc"},
{"content":{"body":"oliverdunk: I think so, but it’s been a while and have not looked at all steps","msgtype":"m.text"},"ts":1561041711000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"No worries, I appreciate your help :)","msgtype":"m.text"},"ts":1561041722000,"senderName":"oliverdunk","senderId":"oliverdunk@irc"}
]