[
{"content":{"body":"annevk: I'm working on several FETCH follow ups (the PR that's already up, service-workers, transfer-size etc). would it be better to put them up gradually by topic or to do one bigger one with all of them? either way works for me.","msgtype":"m.text"},"ts":1618316679000,"senderName":"noamr","senderId":"noamr@irc"},
{"content":{"body":"noamr: if they can be reasonably split that's easier","msgtype":"m.text"},"ts":1618316722000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"noamr: if you feel like you need to merge that works as well though","msgtype":"m.text"},"ts":1618316732000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: they can, but then dependencies between them are a little iffy. maybe I'll merge them together","msgtype":"m.text"},"ts":1618316771000,"senderName":"noamr","senderId":"noamr@irc"},
{"content":{"body":"annevk: how would you suggest to deal with the circular dependency? Service worker defines a struct, but we associate it with a response in FETCH... it's like a forward-declaration of sorts.","msgtype":"m.text"},"ts":1618316837000,"senderName":"noamr","senderId":"noamr@irc"},
{"content":{"body":"noamr: maybe define the struct in a SW PR, define the member in a Fetch PR, use them in a SW PR","msgtype":"m.text"},"ts":1618316920000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"noamr: there's a similar setup for referrer policy","msgtype":"m.text"},"ts":1618316976000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"noamr: the other thing you could do is add some kind of hardcoded links section in bikeshed and then remove that in a Meta PR","msgtype":"m.text"},"ts":1618317008000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I prefer the multiple PR approach for now, if JakeA is ok with that","msgtype":"m.text"},"ts":1618317052000,"senderName":"noamr","senderId":"noamr@irc"},
{"content":{"body":"noamr: works for me. I'll take another pass at your PR tomorrow if that's ok","msgtype":"m.text"},"ts":1618318247000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: sure, np","msgtype":"m.text"},"ts":1618319431000,"senderName":"noamr","senderId":"noamr@irc"},
{"content":{"body":"noamr: I think I got through all issues and PRs I was mentioned on or participated in, let me know if I missed something","msgtype":"m.text"},"ts":1618320335000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(related to RT, to be clear)","msgtype":"m.text"},"ts":1618320349000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: there is also https://github.com/whatwg/xhr/pull/319","msgtype":"m.text"},"ts":1618320712000,"senderName":"noamr","senderId":"noamr@irc"},
{"content":{"body":"annevk: otherwise, the ball is in my court. I'm following up on all the cross-repo issues here: https://docs.google.com/document/d/1c9q0frGeIuhINTr7k6IiR1oLb6oDkkCTbRn0sk1mmdE/edit?usp=sharing","msgtype":"m.text"},"ts":1618320736000,"senderName":"noamr","senderId":"noamr@irc"},
{"content":{"body":"thanks!","msgtype":"m.text"},"ts":1618320746000,"senderName":"noamr","senderId":"noamr@irc"},
{"content":{"body":"noamr: ah yeah, so that has an issue too with network errors that I forgot to describe (it's what caused me to raise the other issue)","msgtype":"m.text"},"ts":1618320777000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I'll note that down now","msgtype":"m.text"},"ts":1618320786000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"done","msgtype":"m.text"},"ts":1618320991000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: there's also https://github.com/whatwg/fetch/issues/1208, which I haven't started working on, but early input would help","msgtype":"m.text"},"ts":1618321254000,"senderName":"noamr","senderId":"noamr@irc"},
{"content":{"body":"noamr: is that a new feature or preserving the existing feature set? I didn't spot any obvious problems with it when I read it the first time and still don't","msgtype":"m.text"},"ts":1618321446000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"noamr: I guess the one subtlety there is the time coarsening","msgtype":"m.text"},"ts":1618321496000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"noamr: I guess we need to know if the SW had cross-origin isolation and if we don't, we coarsen at that point, otherwise we take values as-is","msgtype":"m.text"},"ts":1618321576000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I'll note that in the issue","msgtype":"m.text"},"ts":1618321584000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: the problem is that SW might have connection info attached to the response, but we override it with the original request's connection info (which is probably null). I'll try to tackle it more in detail after the other issues are resolved.","msgtype":"m.text"},"ts":1618322266000,"senderName":"noamr","senderId":"noamr@irc"},
{"content":{"body":"noamr: yeah, I'm just wondering if exposing that is new for implementations or not","msgtype":"m.text"},"ts":1618322351000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Implementations expose this.","msgtype":"m.text"},"ts":1618328840000,"senderName":"noamr","senderId":"noamr@irc"},
{"content":{"body":"annevk: regarding CORS, I'm proposing to remove the CORS bit from FETCH for now, and proceed with the other issues until there's some consensus about it. WDYT?","msgtype":"m.text"},"ts":1618329603000,"senderName":"noamr","senderId":"noamr@irc"},
{"content":{"body":"(... and open a new issue specifically for this)","msgtype":"m.text"},"ts":1618329616000,"senderName":"noamr","senderId":"noamr@irc"},
{"content":{"body":"noamr: yeah, I think that's reasonable if CORS was indeed an exception and network errors are generally ignored","msgtype":"m.text"},"ts":1618332024000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: what's generally ignored (spec-wise) are errors that come before CORS. errors that come afterwords pass through fetch-finale and create an RT entry.","msgtype":"m.text"},"ts":1618332076000,"senderName":"noamr","senderId":"noamr@irc"},
{"content":{"body":"noamr: how could you get a network error afterwards?","msgtype":"m.text"},"ts":1618332216000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"CSP rejecting a CORS response from a service worker or some such?","msgtype":"m.text"},"ts":1618332250000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yea, anything that goes through \"fetch finale\" should have an RT entry. I believe some of the network errors go through \"fetch finale\". but it's a bit tricky to decipher","msgtype":"m.text"},"ts":1618332421000,"senderName":"noamr","senderId":"noamr@irc"},
{"content":{"body":"annevk: but I believe it requires further investigation, so maybe for now leaving it out and treating as a separate issue.","msgtype":"m.text"},"ts":1618332470000,"senderName":"noamr","senderId":"noamr@irc"},
{"content":{"body":"annevk: if you have a chance to re-review https://github.com/whatwg/html/pull/6565 I'd appreciate it so as to unblock that chain of CLs","msgtype":"m.text"},"ts":1618332900000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: done","msgtype":"m.text"},"ts":1618333164000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"noamr: sounds reasonable, I'll try to prioritize the PR for tomorrow morning","msgtype":"m.text"},"ts":1618333185000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Thanks!","msgtype":"m.text"},"ts":1618333215000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"annevk: great, thanks!","msgtype":"m.text"},"ts":1618334141000,"senderName":"noamr","senderId":"noamr@irc"},
{"content":{"body":"Does WHATWG deal with \"mailto\" protocol?","msgtype":"m.text"},"ts":1618338737000,"senderName":"croraf","senderId":"croraf@irc"},
{"content":{"body":"croraf: I think it does to a limited extent. The URLs using the mainto: scheme should presumably comform to, and be interpreted based on the URL spec. https://url.spec.whatwg.org/ For the most part I imagine it's like most externally handled protocols in that it is browser/OS-defined. But in the specific case of mailto there appear to be actually a few nomimal refererences and special cases for it in the HTML spec:","msgtype":"m.text"},"ts":1618343538000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"https://duckduckgo.com/?q=mailto+site%3Awhatwg.org","msgtype":"m.text"},"ts":1618343538000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"the protocol itself is defined via IETF however, https://tools.ietf.org/html/rfc6068","msgtype":"m.text"},"ts":1618343566000,"senderName":"Krinkle","senderId":"Krinkle@irc"}
]