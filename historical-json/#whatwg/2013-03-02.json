[
{"content":{"body":"apparently the magic answer is \"Apply the Unicode Collation Algorithm, using the Default Unicode Collation Element Table as customized for the <span>language</span> of the element <var title=\"\">e</var> in the Common Locale Data Repository.","msgtype":"m.text"},"ts":1362182473000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"\"","msgtype":"m.text"},"ts":1362182477000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"who are you expecting to do this?","msgtype":"m.text"},"ts":1362182487000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"Presumably table sorters.","msgtype":"m.text"},"ts":1362182493000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"jamesr: ICU implements the UCA already","msgtype":"m.text"},"ts":1362182505000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"so that should be off-the-shelf","msgtype":"m.text"},"ts":1362182514000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"and you want browsers to do this whenever table cell values change or something like that?","msgtype":"m.text"},"ts":1362182527000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"i wouldn't say _I_ want that. but that's what people have been clamouring for, yeah.","msgtype":"m.text"},"ts":1362182551000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"and what lang do we use for this? the lang of the table or the page or something?","msgtype":"m.text"},"ts":1362182620000,"senderName":"jamesr","senderId":"jamesr@irc"},
{"content":{"body":"TabAtkins: That does seem conventional when comparing strings, but the phrase \"lexicographic sort by codepoint\" seems to be trying to be precise enough that I think it's not entirely unreasonable to expect it to say how lengths are handled instead of requiring you to infer it","msgtype":"m.text"},"ts":1362182630000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"jamesr: language of the <th> column's, currently, but that's a minor detail","msgtype":"m.text"},"ts":1362182645000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"might be overly sensitive to the term \"lexicographic\" though","msgtype":"m.emote"},"ts":1362182682000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: i ended up just using the UCA with the defaults in that case","msgtype":"m.text"},"ts":1362182723000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: why do you want to do locale-specific case-insensitivity? unicode case folding exists exactly to avoid that mess (for locale-insensitive case-insensitivty)","msgtype":"m.text"},"ts":1362186039000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"zewt: eh? how does locale-specific case-insensitivity differ from unicode case folding?","msgtype":"m.text"},"ts":1362187277000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"case folding is locale-insensitive by definition","msgtype":"m.text"},"ts":1362187439000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"afaik","msgtype":"m.text"},"ts":1362187445000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"zewt: you know wrong :-)","msgtype":"m.text"},"ts":1362187529000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"http://www.unicode.org/faq/casemap_charprop.html By contrast, case folding, which is based on the lowercase mapping, is intended to be language-neutral. Since the case folding rules do not vary by language or context, this makes them unsuitable as the basis for displaying or transforming text for human consumption.","msgtype":"m.text"},"ts":1362187556000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"e.g. look up \"turkish i\"","msgtype":"m.text"},"ts":1362187556000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i maps to i in all languages, including turkish, when you're using case folding","msgtype":"m.text"},"ts":1362187581000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"if you want language-specific lowercasing you want case mapping, not case folding","msgtype":"m.text"},"ts":1362187592000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"all i was is a sort which when in turkish puts lowercase dotted-i and uppercase dotted-i together, and in english does not.","msgtype":"m.text"},"ts":1362187633000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"that's not case folding then","msgtype":"m.text"},"ts":1362187657000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"which i believe is \"the Unicode Collation Algorithm using the Default Unicode Collation Element Table as customized for the language /foo/ in the Common Locale Data Repository, ignoring case\"","msgtype":"m.text"},"ts":1362187682000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"wow an actual switch statement in the spec","msgtype":"m.text"},"ts":1362201745000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"oh only in the source","msgtype":"m.text"},"ts":1362201942000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"so Hixie you have some tool for converting the swtich-statement stuff in the source into prose?","msgtype":"m.text"},"ts":1362201995000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"jgraham: please ping me if you are around today and have to chat about the websocket tests. I'm also getting intermittent Timeout errors for them. Maybe 25% or so of the time.","msgtype":"m.text"},"ts":1362206679000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"teers","msgtype":"m.text"},"ts":1362216104000,"senderName":"krijnh","senderId":"krijnh@irc"},
{"content":{"body":"Err, right","msgtype":"m.text"},"ts":1362216111000,"senderName":"krijnh","senderId":"krijnh@irc"},
{"content":{"body":"Of joy, of course","msgtype":"m.text"},"ts":1362216128000,"senderName":"krijnh","senderId":"krijnh@irc"},
{"content":{"body":"MikeSmith: Sure I am around today","msgtype":"m.text"},"ts":1362218394000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"hey jgraham","msgtype":"m.text"},"ts":1362218447000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"any clues on the timeouts errors?","msgtype":"m.text"},"ts":1362218458000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Well","msgtype":"m.text"},"ts":1362218469000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Nothing more than \"maybe the tests are just a bit close to the timeout\"","msgtype":"m.text"},"ts":1362218507000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"is it possible to increase the timeout per-test?","msgtype":"m.text"},"ts":1362218553000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Yeah","msgtype":"m.text"},"ts":1362218560000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"So, iirc, the default is like 1s","msgtype":"m.text"},"ts":1362218577000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"and the default timeout for the whole file is like 5s","msgtype":"m.text"},"ts":1362218591000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"To increase the former you pass an options dict like {timeout:timeout-in-ms} to the test constructor","msgtype":"m.text"},"ts":1362218631000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"ok","msgtype":"m.text"},"ts":1362218639000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"For the latter you do the same to the setup function","msgtype":"m.text"},"ts":1362218648000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"ok","msgtype":"m.text"},"ts":1362218671000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Do you have a browser/test combination that gives random behaviour that I can try?","msgtype":"m.text"},"ts":1362218693000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"I could try looking it at it from the server side but really that server has very llight load on it","msgtype":"m.text"},"ts":1362218700000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"jgraham: no they all give me timeout errors maybe 1 out of 4 times or so","msgtype":"m.text"},"ts":1362218739000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"hmm except for Opera right now","msgtype":"m.text"},"ts":1362218849000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: Well I tried http://w3c-test.org/webapps/WebSockets/tests/submissions/Opera/binary/001.html and couldn't see any timeouts","msgtype":"m.text"},"ts":1362218855000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"in Firefox/Chrome/Opera","msgtype":"m.text"},"ts":1362218863000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"OTOH 002.html appears to timeout in all but Chrome, but 100% of the time","msgtype":"m.text"},"ts":1362218911000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Maybe you just have more latency to w3c-test.org than me","msgtype":"m.text"},"ts":1362218940000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"002.html times out for me in Chrome too","msgtype":"m.text"},"ts":1362218976000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but only somtimes","msgtype":"m.text"},"ts":1362218983000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"not always","msgtype":"m.text"},"ts":1362218986000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"(this is why friends don't let friends run tests on infrastructure they don't control)","msgtype":"m.text"},"ts":1362218994000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"heh","msgtype":"m.text"},"ts":1362219036000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"What's your ping time to w3c-test.org?","msgtype":"m.text"},"ts":1362219053000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"PING w3c-test.org (128.30.52.118): 56 data bytes","msgtype":"m.text"},"ts":1362219179000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"64 bytes from 128.30.52.118: icmp_seq=0 ttl=35 time=274.241 ms","msgtype":"m.text"},"ts":1362219179000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"64 bytes from 128.30.52.118: icmp_seq=1 ttl=36 time=371.074 ms","msgtype":"m.text"},"ts":1362219179000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"64 bytes from 128.30.52.118: icmp_seq=2 ttl=35 time=291.444 ms","msgtype":"m.text"},"ts":1362219179000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Request timeout for icmp_seq 3","msgtype":"m.text"},"ts":1362219179000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"64 bytes from 128.30.52.118: icmp_seq=3 ttl=36 time=1144.780 ms","msgtype":"m.text"},"ts":1362219181000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"64 bytes from 128.30.52.118: icmp_seq=4 ttl=36 time=288.365 ms","msgtype":"m.text"},"ts":1362219184000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but hey I finally had the sense to actually look at the logs on the server and I'm seeing an error","msgtype":"m.text"},"ts":1362219221000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"\"mod_pywebsocket: web_socket_transfer_data raised exception for /ws/echo: Connection read error\"","msgtype":"m.text"},"ts":1362219285000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Yeah, well if you are geting 1 in 4 packets taking > 1s that is a problem on its own :)","msgtype":"m.text"},"ts":1362219373000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1362219409000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Hixie: Don't know if this is still applicable or what, but the Mac OS X sorting algorithm seems to take each embedded series of digits as a separate number, meaning hex numbers sort very unintuitively.","msgtype":"m.text"},"ts":1362261792000,"senderName":"GPHemsley","senderId":"GPHemsley@irc"}
]