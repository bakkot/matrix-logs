[
{"content":{"body":"benjamingr__: are you around? Do you want your name in the Acknowledgments section?","msgtype":"m.text"},"ts":1606987528000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: What's the COOP scenario, exactly? (my initial reaction is \"you get a contextDestroyed event for the old context and a contextCreated event for the new one, even if they're the same 'tab' from the point of view of the user\")","msgtype":"m.text"},"ts":1606994949000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: that is correct; I guess I'm mainly wondering if you know they relate to the same tab","msgtype":"m.text"},"ts":1606995059000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jgraham: HTML still needs to describe something called browsing session, which will provide some coherence for this","msgtype":"m.text"},"ts":1606995090000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(a browsing session is a tab, I guess)","msgtype":"m.text"},"ts":1606995119000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yeah, I guess that's an interesting point. For WebDriver/HTTP we have window handles that are supposed to be for the user-percieved windows","msgtype":"m.text"},"ts":1606995130000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"And these things are supposed to be compatible","msgtype":"m.text"},"ts":1606995143000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: and we might not discard in the future, but freeze the browsing context somehow so you can do fastback","msgtype":"m.text"},"ts":1606995202000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yeah, I assume that navigation can not discard nested contexts even in the no-COOP case, and it's not super clear if users will be confused by not getting events in that case","msgtype":"m.text"},"ts":1606995328000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"I was under the impression that a top-level browsing context was a tab","msgtype":"m.text"},"ts":1606995565000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"andreubotella: that was the case until we changed that with COOP","msgtype":"m.text"},"ts":1606995633000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"andreubotella: now it's N:1","msgtype":"m.text"},"ts":1606995657000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I see","msgtype":"m.text"},"ts":1606995715000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"annevk: btw, playing around with file inputs and urlencoded I found more newline normalization bugs","msgtype":"m.text"},"ts":1606996145000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"Cool, did you file bugs?","msgtype":"m.text"},"ts":1606996203000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"it's actually something all browsers share, even if imo it should count as a bug in the browsers, so I was gonna file a bug on the url standard when I had the tests on wpt","msgtype":"m.text"},"ts":1606996266000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"but I got slightly tripped by the fact that webkit somehow doesn't percent-encode \\x00 on urlencode over POST, leading to the same nonsense with the page being detected as a download","msgtype":"m.text"},"ts":1606996326000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"I'll file a bug for that one","msgtype":"m.text"},"ts":1606996352000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"That sounds like a fun, thanks for testing 🙂","msgtype":"m.text"},"ts":1606997337000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"andreubotella: that fileInput creation technique (with Object.assign) is rather clever","msgtype":"m.text"},"ts":1606998239000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I saw bsittler use it in the original multipart/form-data PR that got closed downstream","msgtype":"m.text"},"ts":1606998288000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"Heh, must have missed that cause I don't remember seeing this before","msgtype":"m.text"},"ts":1606998356000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"andreubotella: let me know if you want it to be boilerplate-free and I'll wait a bit with merging","msgtype":"m.text"},"ts":1606998506000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"sure, I'll make it window.js","msgtype":"m.text"},"ts":1606998519000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"andreubotella: so I realized something since you filed that issue","msgtype":"m.text"},"ts":1606999445000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"andreubotella: this is testing form submission, and that is doing the newline normalization, and only after that is it testing urlencoding","msgtype":"m.text"},"ts":1606999464000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: in multipart/form-data, newlines in filenames aren't touched","msgtype":"m.text"},"ts":1606999519000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"andreubotella: I see that you are suggesting that newline normalization should only happen for urlencoding and not multipart, but I'm not sure if that's correct as it also happens when creating a FormData from a <form> (or perhaps only in Chrome)","msgtype":"m.text"},"ts":1606999522000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I guess I should look up when we defined \"append an entry\" as I'm pretty sure we considered at least some of this","msgtype":"m.text"},"ts":1606999628000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"when I tested the newline normalization when creating a FormData from a form, I forgot to test filenames","msgtype":"m.text"},"ts":1606999764000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"I'll open a wpt PR for that later today","msgtype":"m.text"},"ts":1606999837000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"https://github.com/whatwg/html/commit/a1e8b1a9725dc716326f564b91a29aca19daf2f2 does seem to preserve intent in that it only happens for value if it's not a File, but maybe it could be read some other way that name should also not be affected?","msgtype":"m.text"},"ts":1606999887000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"will go further back in blame","msgtype":"m.emote"},"ts":1606999893000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I found something","msgtype":"m.text"},"ts":1607000123000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"https://github.com/whatwg/html/commit/d9fa54d643a7cd041ce31766f1ba5848cd76d18f","msgtype":"m.text"},"ts":1607000124000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"https://www.w3.org/Bugs/Public/show_bug.cgi?id=17460","msgtype":"m.text"},"ts":1607000147000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"zcorpan_ is to blame","msgtype":"m.text"},"ts":1607000150000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"wat","msgtype":"m.text"},"ts":1607000160000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"I'll look at it later, g2g","msgtype":"m.text"},"ts":1607000171000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"And as was tradition back then there are no tests, links to implementation bugs, or anything 🙂","msgtype":"m.text"},"ts":1607000179000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ah I remember that issue. I was going to say it predated testharness.js, but that wasn't the case. https://github.com/w3c/testharness.js/commit/1780607fc4582b65b7fcdded3e39e79e95c8d915","msgtype":"m.text"},"ts":1607000505000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"Has anyone written about the history of web-platform-tests?","msgtype":"m.text"},"ts":1607000654000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"I don't think jgraham has a blog or it must be very well hidden","msgtype":"m.text"},"ts":1607000682000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"If I do I also hid it from myself","msgtype":"m.text"},"ts":1607002253000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":":')","msgtype":"m.text"},"ts":1607003615000,"senderName":"jkt_","senderId":"jkt_@irc"},
{"content":{"body":"so apparently filenames just fell through the cracks?","msgtype":"m.text"},"ts":1607004126000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"andreubotella: yeah","msgtype":"m.text"},"ts":1607004145000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"I'd guess there are a lot of old spec changes like this","msgtype":"m.text"},"ts":1607004183000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"Now it escapes my mind... what is the name for the proposal to add some new/better widgets/controls to the web","msgtype":"m.text"},"ts":1607009452000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: open ui","msgtype":"m.text"},"ts":1607009575000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"thanks","msgtype":"m.text"},"ts":1607009594000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"https://lists.w3.org/Archives/Public/public-html/2007Apr/0564.html from Maciej is arguably where the history of web-platform-tests started (to trace it all the way back)","msgtype":"m.text"},"ts":1607010209000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"or from the same thread, https://lists.w3.org/Archives/Public/public-html/2007Apr/0532.html from DanC","msgtype":"m.text"},"ts":1607010256000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Well like with all history there are a number of different threads you can pull to unravel different parts of the story","msgtype":"m.text"},"ts":1607010368000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"finds https://lists.w3.org/Archives/Public/public-test-infra/2013JanMar/0052.html","msgtype":"m.emote"},"ts":1607010391000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I'm curious about the Opera side of the story","msgtype":"m.text"},"ts":1607010422000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Right, I think there's an intesting part that happened before I was involved where Opera ended up having a QA department with Hixie writing tests for web standards","msgtype":"m.text"},"ts":1607010493000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"https://krijnhoetmer.nl/irc-logs/html-wg/20090127","msgtype":"m.text"},"ts":1607010500000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"https://wiki.whatwg.org/index.php?title=Testsuite","msgtype":"m.text"},"ts":1607010531000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"https://lists.w3.org/Archives/Public/public-html/2009Jan/0471.html","msgtype":"m.text"},"ts":1607010538000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"And the way that interacted with the Acid tests for CSS","msgtype":"m.text"},"ts":1607010554000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: I think Hixie was the department (at least the automated part of it) and he got Kam hired to replace him at some point","msgtype":"m.text"},"ts":1607010581000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"But yeah, that's 2003-2005 or so","msgtype":"m.text"},"ts":1607010641000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Good thing we fixed all the problems we discussed in 2009 about how to get tests reviewed and how to link tests to the spec in a reliable way.","msgtype":"m.text"},"ts":1607010927000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Otherwise it might look like we hadn't achieved much in the last decade or so :p","msgtype":"m.text"},"ts":1607010948000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"On the other hand I guess these days we don't bother with an email every time a browser vendor contributes 43 tests.","msgtype":"m.text"},"ts":1607011099000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: also where Hixie wrote tests while a student ;P","msgtype":"m.text"},"ts":1607012261000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"MikeSmith: I forget the exact year when it was decided that CSS 3 should pretty much all be automated tests","msgtype":"m.text"},"ts":1607012296000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"annevk, jgraham: Hixie was an instrumental part of getting the tooling to run automated tests working within Opera, and it was that role which Kam was hired to take over, allowing Hixie to focus on the actual testing side of things","msgtype":"m.text"},"ts":1607012359000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: was before 2007 maybe?","msgtype":"m.text"},"ts":1607012516000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"at least I think the CSS test suite work started quite early","msgtype":"m.text"},"ts":1607012564000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Tantek would remember I guess","msgtype":"m.text"},"ts":1607012633000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: in the general case where some server-side application code for CORS handling throws for some reason, can you think of an HTTP status code that can be used to convey it?","msgtype":"m.text"},"ts":1607013377000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"context is https://stackoverflow.com/questions/42755131/enabling-cors-in-cloud-functions-for-firebase/65127649#65127649","msgtype":"m.text"},"ts":1607013390000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"... where the person has the applicaion code intentionally written to send a 500 response","msgtype":"m.text"},"ts":1607013433000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: 403 per https://fetch.spec.whatwg.org/#http-responses","msgtype":"m.text"},"ts":1607013442000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"looks","msgtype":"m.emote"},"ts":1607013468000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"(last paragraph)","msgtype":"m.text"},"ts":1607013474000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ok yeah but that says “In case a server does not wish to participate in the CORS protocol”","msgtype":"m.text"},"ts":1607013520000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"which makes sense","msgtype":"m.text"},"ts":1607013527000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but I often see people having application code written to send 500 responses in code that’s intended to participate in the CORS protocol but that throws due to some unexpected thing","msgtype":"m.text"},"ts":1607013625000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"to me, in general, it seems not optimal to send a 500 from application code — because that’s gonna make it harder for you to distinguish cases of your application code throwing an intended error from cases of the server/runtime code hitting some other kind of internal failure (maybe even before it ever executes your application code)","msgtype":"m.text"},"ts":1607013659000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"(but maybe that’s just me, and sending a 500 in such cases is actually a normal best practice)","msgtype":"m.text"},"ts":1607013727000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: we could clarify that line I suppose as it's a little vague","msgtype":"m.text"},"ts":1607013740000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"OK","msgtype":"m.text"},"ts":1607013752000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: what it really means is that if the server doesn't want to allow the particular request (or participate in the CORS protocol at all), do this","msgtype":"m.text"},"ts":1607013767000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"but it's still a suggestion since servers can do whatever","msgtype":"m.text"},"ts":1607013781000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"sure","msgtype":"m.text"},"ts":1607013787000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: 500 makes sense for me in cases like that. E.g. in all my Node servers, if an exception gets thrown while processing a request/preparing to create a response, we turn it into a 500 response. That code snippet just looks like someone manually doing the try/catch, instead of letting it bubble to their server-level error handler, which is somewhat understandable since I'm not sure how well generic server","msgtype":"m.text"},"ts":1607014151000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"request/response handling deals with preflight-type things.","msgtype":"m.text"},"ts":1607014151000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"(But, the OP's code for that question makes no sense, where they're always sending a 500.)","msgtype":"m.text"},"ts":1607014209000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: ah yeah, good point about this case — about just letting the exception bubble rather than catching it","msgtype":"m.text"},"ts":1607014639000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but otherwise yeah I guess if there’s nothing more specific that the application code can determine, then 500 works","msgtype":"m.text"},"ts":1607014763000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: pre-CSS3 it was all manual stuff though, that's the thing","msgtype":"m.text"},"ts":1607016624000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"well \"manual\", it was all screenshot based","msgtype":"m.text"},"ts":1607016638000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"MikeSmith: https://www.w3.org/blog/CSS/2009/06/23/resolutions_69/ seems like it was only June 2009 that reftests were officially adopted for CSS","msgtype":"m.text"},"ts":1607017022000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"is there an issue open anywhere for wpt.fyi trying to link to the nonexistent html source in github rather than to an .any.js?","msgtype":"m.text"},"ts":1607018030000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"nevermind, found it","msgtype":"m.text"},"ts":1607018145000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"https://github.com/web-platform-tests/wpt.fyi/issues/1476","msgtype":"m.text"},"ts":1607018151000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"annevk: I misinterpreted your earlier comment about FormData in Chrome","msgtype":"m.text"},"ts":1607025897000,"senderName":"andreubotella","senderId":"andreubotella@irc"},
{"content":{"body":"I wrote down the whole story about why this is a urlencoded-only thing in https://github.com/whatwg/url/issues/562#issuecomment-738276174","msgtype":"m.text"},"ts":1607025922000,"senderName":"andreubotella","senderId":"andreubotella@irc"}
]