[
{"content":{"body":"annevk: do you remember why [[CanBlock]] is true for shared workers?","msgtype":"m.text"},"ts":1585240553000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: mainly because there was no compelling reason to set it to false for them, I think","msgtype":"m.text"},"ts":1585240628000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"So for service workers it's false because blocking the network is bad, I guess? Not because it's a shared resource?","msgtype":"m.text"},"ts":1585240654000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: arguably it being the only agent cluster instantiating agent that can set it to true might be a reason to set it false","msgtype":"m.text"},"ts":1585240656000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: yeah","msgtype":"m.text"},"ts":1585240663000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Makes sense","msgtype":"m.text"},"ts":1585240672000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"And yeah we could potentially flip it","msgtype":"m.text"},"ts":1585240677000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Although I guess that would be a breaking change","msgtype":"m.text"},"ts":1585240683000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Firefox has it false at the moment, I believe","msgtype":"m.text"},"ts":1585240689000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Oh nice","msgtype":"m.text"},"ts":1585240695000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Because Firefox is the only affected browser I believe","msgtype":"m.text"},"ts":1585240706000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"(IIRC Chrome does not supported nested workers in shared workers?)","msgtype":"m.text"},"ts":1585240716000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: Chrome might still be affected due to Atomics.wait() not throwing","msgtype":"m.text"},"ts":1585240732000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: but that could be true; I have a hard time remembering because I never played with that myself","msgtype":"m.text"},"ts":1585240755000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yeah, true, \"affected\", but not web-compat issues (unless someone's doing something really weird)","msgtype":"m.text"},"ts":1585240757000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: if at some point you could give me some quick pointers to how Bikeshed's boilerplate system fits together that would help","msgtype":"m.text"},"ts":1585241748000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: I'm having a hard time figuring out how the Commit Snapshots come together now","msgtype":"m.text"},"ts":1585241764000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: so commit snapshots partly predate the boilerplate system so they don't use all the modern features that RDs do","msgtype":"m.text"},"ts":1585241793000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"https://github.com/whatwg/whatwg.org/blob/master/resources.whatwg.org/build/deploy.sh#L106-L110 basically patches a lot of the existing metadata, using WHATWG defaults as the base","msgtype":"m.text"},"ts":1585241850000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"WHATWG defaults are done in https://github.com/tabatkins/bikeshed/blob/master/bikeshed/boilerplate/whatwg/defaults.include and https://github.com/tabatkins/bikeshed/blob/master/bikeshed/boilerplate/whatwg/computed-metadata.include","msgtype":"m.text"},"ts":1585241868000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I think the ideal would be to create a computed-metadata-LS-COMMIT.include, like https://github.com/tabatkins/bikeshed/blob/master/bikeshed/boilerplate/whatwg/computed-metadata-RD.include","msgtype":"m.text"},"ts":1585241939000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Maybe also a head-LS-COMMIT to replace the Text Macro stuff","msgtype":"m.text"},"ts":1585241961000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Although I dunno, getting the SHA in there would be trickier","msgtype":"m.text"},"ts":1585241986000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Any particular questions?","msgtype":"m.text"},"ts":1585241991000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Hm, what's the SHA from?","msgtype":"m.text"},"ts":1585242012000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Scripts","msgtype":"m.text"},"ts":1585242029000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"It would have to be a new text macro","msgtype":"m.text"},"ts":1585242034000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"https://github.com/whatwg/whatwg.org/blob/master/resources.whatwg.org/build/deploy.sh#L33","msgtype":"m.text"},"ts":1585242050000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Hmmm, I already extract the repo information, I could just make that available as a predefined macro.","msgtype":"m.text"},"ts":1585242109000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins: wait you look at whatwg/dom when you get dom.bs?","msgtype":"m.text"},"ts":1585244109000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"If you don't specify a `Repository` metadata, I check if the document is in a git repo and infer the repo metadata from that.","msgtype":"m.text"},"ts":1585244144000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins: how does that work with the CLI?","msgtype":"m.text"},"ts":1585244284000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TabAtkins: sorry, the api.csswg.org thingie","msgtype":"m.text"},"ts":1585244297000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Oh, it doesn't. No git repo there, can't infer anything.","msgtype":"m.text"},"ts":1585244313000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins: that's what we use","msgtype":"m.text"},"ts":1585244321000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ok then yeah, y'all will have to keep doing it yourself.","msgtype":"m.text"},"ts":1585244332000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Out of curiosity, why y'all still using the API like that? It's so easy to just do it locally in a travis or whatever.","msgtype":"m.text"},"ts":1585244360000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Getting Travis to fetch all of bikeshed each time seems worse?","msgtype":"m.text"},"ts":1585244382000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I mean, bandwidth is free. ^_^","msgtype":"m.text"},"ts":1585244463000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins: it seems bad to use more computing resources than necessary","msgtype":"m.text"},"ts":1585244486000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"if you insist","msgtype":"m.text"},"ts":1585244622000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins, https://techcrunch.com/2020/03/25/88-out-of-top-200-u-s-cities-have-seen-internet-speeds-decline-this-past-week-3-cities-by-more-than-40/","msgtype":"m.text"},"ts":1585244623000,"senderName":"a-ja","senderId":"a-ja@irc"},
{"content":{"body":":)","msgtype":"m.text"},"ts":1585244626000,"senderName":"a-ja","senderId":"a-ja@irc"},
{"content":{"body":"\"only\" down 20% here","msgtype":"m.text"},"ts":1585244667000,"senderName":"a-ja","senderId":"a-ja@irc"},
{"content":{"body":"Domenic: why would getting the SHA into a template be trickier? Some of those files already seem to look at environment variables such as SHORTNAME and such","msgtype":"m.text"},"ts":1585244682000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: note that even for computed-metadata-RD.include we'd need the SHA in there as we put it in the title","msgtype":"m.text"},"ts":1585247086000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TabAtkins: can includes use md-Text-Macro?","msgtype":"m.text"},"ts":1585247357000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yeah, the `md-` flag syntax is just a way of adding metadata; you can any of that via <pre class=metadata> or any of the metadata includes.","msgtype":"m.text"},"ts":1585247397000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"https://tabatkins.github.io/bikeshed/#metadata-text-macro","msgtype":"m.text"},"ts":1585247444000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"great, then I can just pass the SHA in","msgtype":"m.text"},"ts":1585247476000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I guess I'll put something together tomorrow, bit late now","msgtype":"m.text"},"ts":1585247492000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"thanks!","msgtype":"m.text"},"ts":1585247501000,"senderName":"annevk","senderId":"annevk@irc"}
]