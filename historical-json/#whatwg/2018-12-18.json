[
{"content":{"body":"How does CSS background-image hook into the Fetch spec? I'm trying to determine what the spec says the referrer should be for those requests (the document or the stylesheet?). The closest I can find is https://drafts.csswg.org/css-backgrounds-3/#background-image which  leads to https://www.w3.org/TR/CSS21/syndata.html#value-def-uri which doesn't seem to hook into Fetch.","msgtype":"m.text"},"ts":1545112125000,"senderName":"falken","senderId":"falken@irc"},
{"content":{"body":"Browsers look all over the place here https://wpt.fyi/results/service-workers/service-worker/fetch-request-css-base-url.https.html?label=stable&aligned","msgtype":"m.text"},"ts":1545112463000,"senderName":"falken","senderId":"falken@irc"},
{"content":{"body":"falken: we need to work on that. I think this issue is the placeholder: https://github.com/w3c/csswg-drafts/issues/904","msgtype":"m.text"},"ts":1545113783000,"senderName":"astearns","senderId":"astearns@irc"},
{"content":{"body":"and/or this one: https://github.com/w3c/csswg-drafts/issues/562","msgtype":"m.text"},"ts":1545113815000,"senderName":"astearns","senderId":"astearns@irc"},
{"content":{"body":"Thanks! Do you know off-hand what the \"correct\" expectations should be for referrer of a subresource request from a stylesheet? It looks like Chrome/Firefox use the stylesheet URL after stripping the query, and Edge/Safari use the document URL. (at least for the referrer seen by a service worker)","msgtype":"m.text"},"ts":1545113903000,"senderName":"falken","senderId":"falken@irc"},
{"content":{"body":"If there's no CSS test for this without service workers, maybe this is an over enthusiastic test...","msgtype":"m.text"},"ts":1545113928000,"senderName":"falken","senderId":"falken@irc"},
{"content":{"body":"I think we discussed something in that area recently, let me look","msgtype":"m.text"},"ts":1545113949000,"senderName":"astearns","senderId":"astearns@irc"},
{"content":{"body":"great thanks","msgtype":"m.text"},"ts":1545114015000,"senderName":"falken","senderId":"falken@irc"},
{"content":{"body":"bah - I can't find it. ping TabAtkins about this (probably tomorrow during PST working hours)","msgtype":"m.text"},"ts":1545114333000,"senderName":"astearns","senderId":"astearns@irc"},
{"content":{"body":"OK thanks, np","msgtype":"m.text"},"ts":1545115088000,"senderName":"falken","senderId":"falken@irc"},
{"content":{"body":"falken: style sheet URL is the referrer","msgtype":"m.text"},"ts":1545135852000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(also seems fine to test)","msgtype":"m.text"},"ts":1545142652000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: ping on https://github.com/whatwg/html/pull/4234 ? I think it's good to go but would be ideal to have your sign-off.","msgtype":"m.text"},"ts":1545170257000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Oh hmm I guess no multi-implementer interest yet.","msgtype":"m.text"},"ts":1545170290000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"anyone know off-hand what browser first limited window.open to user-initated clicks?","msgtype":"m.text"},"ts":1545172588000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"I would guess Firefox","msgtype":"m.text"},"ts":1545173229000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I feel like they were the first to advertise \"built in popup blocker\"","msgtype":"m.text"},"ts":1545173242000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"was it really that late? geez! I know I remember the days before it being commonplace, but still, wow.","msgtype":"m.text"},"ts":1545173332000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"annevk: all right. do you know what the referrer policy is expected to be? Chrome and Firefox use the stylesheet URL after stripping the query. Tracing where referrer gets set in Fetch, looks like the default is \"no-referrer-when-downgrade\" which wouldn't strip the query.","msgtype":"m.text"},"ts":1545174031000,"senderName":"falken","senderId":"falken@irc"},
{"content":{"body":"falken: https://w3c.github.io/webappsec-referrer-policy/#integration-with-css","msgtype":"m.text"},"ts":1545174566000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: nice thanks","msgtype":"m.text"},"ts":1545175092000,"senderName":"falken","senderId":"falken@irc"}
]