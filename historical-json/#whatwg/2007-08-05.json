[
{"content":{"body":"annevk: ping","msgtype":"m.text"},"ts":1186322220000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"pong","msgtype":"m.text"},"ts":1186324080000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smaug, ...","msgtype":"m.text"},"ts":1186324081000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: about DOMActivate","msgtype":"m.text"},"ts":1186324140000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"annevk: according to html5 the default action is to dispatch DOMActivate","msgtype":"m.text"},"ts":1186324141000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"where does it say that only the first default action should occur?","msgtype":"m.text"},"ts":1186324200000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"the default action of some form of activation (Enter, clicking, etc.) is to dispatch a 'click' event","msgtype":"m.text"},"ts":1186324260000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"default action of that is to dispatch DOMActivate","msgtype":"m.text"},"ts":1186324261000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"the first element in tree order with activation behavior gets its activation behavior triggered at that point","msgtype":"m.text"},"ts":1186324320000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"reverse tree order*","msgtype":"m.text"},"ts":1186324321000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: but where does it say that only one DOMActivate gets activated","msgtype":"m.text"},"ts":1186324322000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"DOMActivate is not activated","msgtype":"m.text"},"ts":1186324380000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I thought all default actions should be triggered","msgtype":"m.text"},"ts":1186324381000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"it's just dispatched","msgtype":"m.text"},"ts":1186324382000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I would suggest to read http://www.whatwg.org/specs/web-apps/current-work/#interactive1 carefully although I suppose you have already done so... :)","msgtype":"m.text"},"ts":1186324383000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I've read it carefully","msgtype":"m.text"},"ts":1186324384000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"how does an element know whether to dispatch DOMActivate or not?","msgtype":"m.text"},"ts":1186324440000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"that doesn't matter","msgtype":"m.text"},"ts":1186324441000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"why not?","msgtype":"m.text"},"ts":1186324442000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"click is dispatched of which the default action is to dispatch DOMActivate","msgtype":"m.text"},"ts":1186324443000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"regardless of which element it is","msgtype":"m.text"},"ts":1186324500000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"click will always have DOMActivate triggered","msgtype":"m.text"},"ts":1186324501000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"what is the target of the DOMActivate?","msgtype":"m.text"},"ts":1186324502000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"the same element as that of the click event","msgtype":"m.text"},"ts":1186324560000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"\"must be to fire a further DOMActivate event at the same element\"","msgtype":"m.text"},"ts":1186324561000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"<a>foo<button>bar</button></a>","msgtype":"m.text"},"ts":1186324562000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"or, <a>foo<span>clickme</span></a>","msgtype":"m.text"},"ts":1186324563000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"span is the target of the click","msgtype":"m.text"},"ts":1186324564000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"how does <a> know to dispatch DOMActivate?","msgtype":"m.text"},"ts":1186324565000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"DOMActivate would be dispatched on <span>","msgtype":"m.text"},"ts":1186324620000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"and the first element with activation behavior it bubbles through (in the first case, <button>, second case, <a>) will have its activation behavior triggered (submission, following the link)","msgtype":"m.text"},"ts":1186324621000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"it's pretty clear in the specification","msgtype":"m.text"},"ts":1186324622000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"it is not clear","msgtype":"m.text"},"ts":1186324680000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"just read it literally without any bias of what prior specifications might have suggested","msgtype":"m.text"},"ts":1186324681000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ok, what part is not clear?","msgtype":"m.text"},"ts":1186324682000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"the chapter talks about \"interactive\" elements","msgtype":"m.text"},"ts":1186324800000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"should DOMActivate be dispatched whether or not click happens inside an interactive element?","msgtype":"m.text"},"ts":1186324860000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"yes","msgtype":"m.text"},"ts":1186324861000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"and it also talks about default action, but not where the default action should be handled","msgtype":"m.text"},"ts":1186324920000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"I suppose that could be made more clear","msgtype":"m.text"},"ts":1186324921000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I'm not sure I understand that","msgtype":"m.text"},"ts":1186324922000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"all the elements may have default actions","msgtype":"m.text"},"ts":1186324980000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"and also document could have default action","msgtype":"m.text"},"ts":1186324981000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"and it doesn't matter whether or not the target of the event is the element (or document)","msgtype":"m.text"},"ts":1186324982000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"it just defines what the default action of click and DOMActivate is","msgtype":"m.text"},"ts":1186325040000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"for click -> dispatch DOMActivate; for DOMActivate -> activate the first element with activation behavior in reverse tree order","msgtype":"m.text"},"ts":1186325041000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I understand activation behavior, since that is different than default action","msgtype":"m.text"},"ts":1186325100000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"but default action happens in all tree levels, in reverse tree order","msgtype":"m.text"},"ts":1186325101000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"what do you mean?","msgtype":"m.text"},"ts":1186325102000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"<a> has a default action for click","msgtype":"m.text"},"ts":1186325160000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"in gecko it is currently to dispatch DOMActivate","msgtype":"m.text"},"ts":1186325161000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"it overwrites all that","msgtype":"m.text"},"ts":1186325162000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"as I said, you have to interpret this literally, without bias","msgtype":"m.text"},"ts":1186325220000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"webkit has similar meaning for default actions","msgtype":"m.text"},"ts":1186325221000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"at least it used to have","msgtype":"m.text"},"ts":1186325222000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"for instance, the <a> element is defined to have activation behavior which would be triggered if anyone click on \"foo\" in the following cases <a>foo</a>, <a><span>foo</span></a>, <a><span>bar<span>foo</span></a>, etc.","msgtype":"m.text"},"ts":1186325280000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hmm, is the meaning of default action defined anywhere..","msgtype":"m.text"},"ts":1186325281000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"DOM2Events?","msgtype":"m.text"},"ts":1186325282000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"anyway, this new concept comes much closer to what IE (and Opera) do and is a bit more useful for cases such as <a> foo <input type=submit></a>","msgtype":"m.text"},"ts":1186325340000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"DOM2Events doesn't define default actions properly","msgtype":"m.text"},"ts":1186325400000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"it doesn't say whether or not they are happening in node level or document level","msgtype":"m.text"},"ts":1186325401000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-flow-cancelation","msgtype":"m.text"},"ts":1186325460000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nope","msgtype":"m.text"},"ts":1186325461000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"that just says that event listeners must fire before default action","msgtype":"m.text"},"ts":1186325520000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"hmm, they are happening at node-level I'd say","msgtype":"m.text"},"ts":1186325521000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"not sure how you can test that and I'm also not sure how that's relevant here","msgtype":"m.text"},"ts":1186325522000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"but for all elements there is the default action for \"click\" event to dispatch DOMActivate if the target of the \"click\" is the current node","msgtype":"m.text"},"ts":1186325580000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"?","msgtype":"m.text"},"ts":1186325581000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"(well, I see that in Gecko you could get Multiple DOMActivate events now because of how <a>.onclick is handled right now...)","msgtype":"m.text"},"ts":1186325582000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smaug, yes, the default action of a click event being dispatched is to dispatch a DOMActivate event","msgtype":"m.text"},"ts":1186325640000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"although not for synthetic click events aiui","msgtype":"m.text"},"ts":1186325641000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"but that happens only if the target of the element is the \"current\" element","msgtype":"m.text"},"ts":1186325642000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"there is after all some sort of posthandleevent phase","msgtype":"m.text"},"ts":1186325643000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"apparently in opera too","msgtype":"m.text"},"ts":1186325700000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"if default actions are node level","msgtype":"m.text"},"ts":1186325701000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"it doesn't happen during the bubbling phase, no","msgtype":"m.text"},"ts":1186325702000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"only when it's dispatched","msgtype":"m.text"},"ts":1186325703000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I suppose it might be worthwhile to be a bit more explicit about such details in the draft; either in HTML 5 or DOM3Events","msgtype":"m.text"},"ts":1186325760000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: hmm, but does that meaning of default actions apply to all cases","msgtype":"m.text"},"ts":1186326000000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"how about xbl2?","msgtype":"m.text"},"ts":1186326001000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"at least it used to be possible to define own default actions","msgtype":"m.text"},"ts":1186326002000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"node level, and not depending on whether or not the current node is the target of the event","msgtype":"m.text"},"ts":1186326060000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"I suppose HTML 5 should just be clarified that the click event only does that when the current node is also the target node","msgtype":"m.text"},"ts":1186326120000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yes, because that is a special case for a default action","msgtype":"m.text"},"ts":1186326180000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"xbl2 still has the way to define default actions","msgtype":"m.text"},"ts":1186326181000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"node level and triggered reversed tree order","msgtype":"m.text"},"ts":1186326182000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"Yeah, much like <html:form> has a default action for 'submit' too...","msgtype":"m.text"},"ts":1186326183000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"so html5 is not at all clear","msgtype":"m.text"},"ts":1186326240000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"it has special meaning for default action in one case","msgtype":"m.text"},"ts":1186326241000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"in gecko default actions happen always pretty much like in xbl2","msgtype":"m.text"},"ts":1186326300000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"what it says sort of implies the special case though","msgtype":"m.text"},"ts":1186326301000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"\"implies\" :)","msgtype":"m.text"},"ts":1186326302000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"by using \"the element\" etc. but it can be better :)","msgtype":"m.text"},"ts":1186326360000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I'd suggest raising it on the list and implementing it as if it was more clear :)","msgtype":"m.text"},"ts":1186326420000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"or maybe I should come up some more reasonable solution for the problem","msgtype":"m.text"},"ts":1186326480000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"special casing default action handling sounds like a hack","msgtype":"m.text"},"ts":1186326481000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"the default action of the click event, if the target node is the same as the current node, is to dispatch a DOMActivate at the current node","msgtype":"m.text"},"ts":1186326540000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"seems reasonable to me","msgtype":"m.text"},"ts":1186326541000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hmm, yes. that way","msgtype":"m.text"},"ts":1186326600000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"and it should be clear that it is not about interactive elements","msgtype":"m.text"},"ts":1186326601000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"but all elements","msgtype":"m.text"},"ts":1186326602000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"er, all nodes","msgtype":"m.text"},"ts":1186326603000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"(click may happen also on document, I think)","msgtype":"m.text"},"ts":1186326660000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"and for DOMActive you just have event listeners set up at the activation behavior elements and a special flag that tells you whether some element has its behavior triggered already","msgtype":"m.text"},"ts":1186326661000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"or some such","msgtype":"m.text"},"ts":1186326662000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"activation behavior is clear, sure","msgtype":"m.text"},"ts":1186326663000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"oh, ok, I thought there was some confusion about first in reverse tree order, but that might have been because of the multiple DOMActivate events...","msgtype":"m.text"},"ts":1186326720000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(need to still think about how the click event's default action work with XBL, when there is retargeting happening...)","msgtype":"m.text"},"ts":1186327140000,"senderName":"smaug","senderId":"smaug@irc"},
{"content":{"body":"hah, have fun with that, while I take a break from this stuff :)","msgtype":"m.text"},"ts":1186327200000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"http://htmlpurifier.org/","msgtype":"m.text"},"ts":1186344360000,"senderName":"hsivonen","senderId":"hsivonen@irc"}
]