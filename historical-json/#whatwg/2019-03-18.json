[
{"content":{"body":"JakeA: did bypassing the SW go anywhere yet?","msgtype":"m.text"},"ts":1552902071000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: I'm a little worried about its interaction with CSP and Fetch","msgtype":"m.text"},"ts":1552902087000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: did you'll think that through?","msgtype":"m.text"},"ts":1552902095000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Aside: is you all even you'll? I guess not.","msgtype":"m.text"},"ts":1552902115000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ah, y'all","msgtype":"m.text"},"ts":1552902165000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ah, what a weird set of contractions we've.","msgtype":"m.text"},"ts":1552904196000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"annevk, do you have a moment to review https://github.com/heycam/webidl/pull/688 ? It should avoid the confusing \"Parsing grammar in JS-format failed: %%\" errors","msgtype":"m.text"},"ts":1552904442000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: done","msgtype":"m.text"},"ts":1552904685000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk, thx","msgtype":"m.text"},"ts":1552904770000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"(I really don't want to look at that curlbikeshed shell script :))","msgtype":"m.text"},"ts":1552905017000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: it handles a bunch of cases this doesnâ€™t","msgtype":"m.text"},"ts":1552912567000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: in particular, https://github.com/mikewest/sec-metadata/issues/16#issuecomment-473911568 is what I'm concerned about","msgtype":"m.text"},"ts":1552916053000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: I created a bunch more tests for script insertion","msgtype":"m.text"},"ts":1552917783000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: browsers are a lil weird","msgtype":"m.text"},"ts":1552917791000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: I also feel like I'm losing grip on the correct solution the more I think about edge cases ðŸ˜Ÿ","msgtype":"m.text"},"ts":1552918582000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: the separate queue really creates a bunch of weird cases","msgtype":"m.text"},"ts":1552918609000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Like what?","msgtype":"m.text"},"ts":1552918615000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: you insert script1 and script2, script1 modifies script2 by inserting script3","msgtype":"m.text"},"ts":1552918646000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: and then maybe script3 removes script1 from the tree or some such","msgtype":"m.text"},"ts":1552918660000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"[ script1 [ script3 [ script2 ] ] ]","msgtype":"m.text"},"ts":1552918681000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"I don't find that weird.","msgtype":"m.text"},"ts":1552918690000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"I'm not sure I get the visual representation","msgtype":"m.text"},"ts":1552918708000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Removing script1 from the tree would be a no-op, come to think of it","msgtype":"m.text"},"ts":1552918721000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"[ /* script1 starts here */ script1 /* script1 stops here */ ]","msgtype":"m.text"},"ts":1552918728000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"script1 inserts script3 which immediately gets prepared, which modifies script2 which immediately gets prepared after the modification, control goes back to script3, control goes back to script1","msgtype":"m.text"},"ts":1552918761000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: so Chrome does script2 first, then script3","msgtype":"m.text"},"ts":1552918868000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: Safari does [script1] [script2] [script3]","msgtype":"m.text"},"ts":1552918899000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Do you have a Live DOM Viewer link to exhibit that? I thought I had checked that case but apparently I didn't. :(","msgtype":"m.text"},"ts":1552918901000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: https://github.com/web-platform-tests/wpt/pull/15886 last test","msgtype":"m.text"},"ts":1552918915000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ETOOMANYPUNCTUATIONSIGNS","msgtype":"m.text"},"ts":1552918961000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: I was trying to figure out what primitives the DOM needs to provide per my comment on the DOM PR","msgtype":"m.text"},"ts":1552918981000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: I still think it's feasible to only offer \"children changed\" without modifying parameter","msgtype":"m.text"},"ts":1552919000000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Mmhâ€¦","msgtype":"m.text"},"ts":1552919136000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: I see script3 before script2 in Safari.","msgtype":"m.text"},"ts":1552919148000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"http://software.hixie.ch/utilities/js/live-dom-viewer/saved/6774","msgtype":"m.text"},"ts":1552919157000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Damn,","msgtype":"m.text"},"ts":1552919173000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: are you using Safari TP?","msgtype":"m.text"},"ts":1552919174000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"wrong link.","msgtype":"m.text"},"ts":1552919175000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: Ah, no.","msgtype":"m.text"},"ts":1552919189000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"And it was the correct link nevermidn.","msgtype":"m.text"},"ts":1552919195000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: doesn't matter for me","msgtype":"m.text"},"ts":1552919198000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I see script3 before script2 in Firefox too.","msgtype":"m.text"},"ts":1552919210000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"In Safari I have \"Gotten order: 1,3,2,4\"","msgtype":"m.text"},"ts":1552919224000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"And in Chrome.","msgtype":"m.text"},"ts":1552919230000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Yes, same here.","msgtype":"m.text"},"ts":1552919235000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"In Chrome I have \"Gotten order: 1,2,4,3\"","msgtype":"m.text"},"ts":1552919239000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I don't.","msgtype":"m.text"},"ts":1552919243000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Chrome Canary?","msgtype":"m.text"},"ts":1552919250000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Chrome 72","msgtype":"m.text"},"ts":1552919259000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"This is 75","msgtype":"m.text"},"ts":1552919270000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"So Chrome got broken is what you mean :)","msgtype":"m.text"},"ts":1552919297000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: I don't see why that means script3 before script2 though","msgtype":"m.text"},"ts":1552919354000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Not sure what you mean.","msgtype":"m.text"},"ts":1552919371000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: 4 is from \"script3\"","msgtype":"m.text"},"ts":1552919382000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"script3.textContent = 'w(3); script2.textContent += \"w(4)\";';","msgtype":"m.text"},"ts":1552919399000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Ah I see what you mean, just a sec.","msgtype":"m.text"},"ts":1552919438000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Oh, you're talking about your test","msgtype":"m.text"},"ts":1552919443000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"For your test Chrome and Safari do not differ indeed","msgtype":"m.text"},"ts":1552919473000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Seems like it's not an equivalent test","msgtype":"m.text"},"ts":1552919488000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"http://software.hixie.ch/utilities/js/live-dom-viewer/?saved=6776","msgtype":"m.text"},"ts":1552919539000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"This ends with \"log: script3 ends\" in my Chrome, I don't have Canary, will install it later.","msgtype":"m.text"},"ts":1552919582000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: same here, but not in Safari","msgtype":"m.text"},"ts":1552919670000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Firefox and Safari seem equal for that one though...","msgtype":"m.text"},"ts":1552919785000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: I guess if you re-insert script2 during script1 it'll run at that point too? and then because it's already-run flag or whatever is set it won't execute when it's dequeued from the initial queue?","msgtype":"m.text"},"ts":1552920032000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Yeah that's what Chrome does, whereas Firefox sets already-started at queue time, so later mutations don't requeue it.","msgtype":"m.text"},"ts":1552920070000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: but Firefox does not do that when the contents are the empty string","msgtype":"m.text"},"ts":1552920095000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"okay","msgtype":"m.text"},"ts":1552920097000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Chrome also does something weird for append() vs append(new Text())","msgtype":"m.text"},"ts":1552920136000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: okay, so we need to make a decision on 1) when do we set already-started 2) how many children change variants do we distinguish between","msgtype":"m.text"},"ts":1552920303000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: So I finally know now why I think Chrome's behaviour wrt reentrancy (a script modifying another script which has been queued for preparation),","msgtype":"m.text"},"ts":1552920393000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"it's because that's how reentrancy is handled in many Rust libs hah.","msgtype":"m.text"},"ts":1552920414000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"I forgot a whole sentence in there,","msgtype":"m.text"},"ts":1552920428000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"So I finally know now why I think Chrome's behaviour wrt reentrancy (a script modifying another script which has been queued for preparation) makes more sense to me,*","msgtype":"m.text"},"ts":1552920435000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: it's still not really clear to me what the inputs are to be","msgtype":"m.text"},"ts":1552920934000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: e.g., removing a node from the script doesn't change its execution order, but appending or changing a node might","msgtype":"m.text"},"ts":1552920959000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: that just does not make much sense?","msgtype":"m.text"},"ts":1552920966000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: dom spec doesn't have the weird case for nested form element event dispatch, right?","msgtype":"m.text"},"ts":1552922953000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"or am I missing something","msgtype":"m.text"},"ts":1552922956000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"hmm, perhaps it is actually in HTML spec... /me looks","msgtype":"m.text"},"ts":1552922978000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"can't find","msgtype":"m.text"},"ts":1552923097000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: there's a flag in the form submission algorithm that was added as part of the formdata event","msgtype":"m.text"},"ts":1552923423000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: is that used also for submit event?","msgtype":"m.text"},"ts":1552923518000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"so that event dispatch stops during bubble phase so that outer form element doesn't get submit","msgtype":"m.text"},"ts":1552923542000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"I couldn't immediately find a spec issue, but this has been discussed somewhere","msgtype":"m.text"},"ts":1552923563000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: ooh that","msgtype":"m.text"},"ts":1552923660000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smaug____: that's https://github.com/whatwg/html/issues/3599","msgtype":"m.text"},"ts":1552923699000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"that one, yes, thanks","msgtype":"m.text"},"ts":1552923718000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"is it intentional that :defined matches HTMLUnknownElement without dashes in the name e.g. foobar ?","msgtype":"m.text"},"ts":1552925433000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: I think so","msgtype":"m.text"},"ts":1552925572000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: ok","msgtype":"m.text"},"ts":1552925634000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"I see Ian Fette is a Slack now","msgtype":"m.text"},"ts":1552950611000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"https://www.linkedin.com/in/ianfette/","msgtype":"m.text"},"ts":1552950618000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Senior Director Of Engineering at Slack","msgtype":"m.text"},"ts":1552950631000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"> Running the Search and Discovery team, and growing the NYC office","msgtype":"m.text"},"ts":1552950637000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"}
]