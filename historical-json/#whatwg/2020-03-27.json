[
{"content":{"body":"annevk: do you know what destination should an SVG image fetched as a `<use>` use? https://www.w3.org/TR/SVG2/linking.html#processingURL-fetch doesn't seem fetch integrated nor does it mention destinations :/","msgtype":"m.text"},"ts":1585301639000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"yoav: table at https://fetch.spec.whatwg.org/#concept-request-destination doesn't mention it either, not sure","msgtype":"m.text"},"ts":1585302401000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah, that's where I first checked :)","msgtype":"m.text"},"ts":1585302431000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"yoav: file an issue against each spec I guess?","msgtype":"m.text"},"ts":1585302433000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"and cross ref them","msgtype":"m.text"},"ts":1585302442000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ok","msgtype":"m.text"},"ts":1585302450000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"I suspect the answer depends a lot on what we'd want CSP to do","msgtype":"m.text"},"ts":1585302469000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"The immediate issue that brought me to poke at this is https://bugs.chromium.org/p/chromium/issues/detail?id=1065069","msgtype":"m.text"},"ts":1585302479000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"In Chromium's implementation, these images are fetched as an SVG document","msgtype":"m.text"},"ts":1585302513000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"which is very different \"ResourceType\" from images","msgtype":"m.text"},"ts":1585302540000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"yoav: what does that mean for CSP?","msgtype":"m.text"},"ts":1585302550000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"dunno, but I can find out","msgtype":"m.text"},"ts":1585302569000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"yoav: and yeah, if the result can execute script I don't think we want \"image\"","msgtype":"m.text"},"ts":1585302572000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yoav: maybe \"script\" would suffice","msgtype":"m.text"},"ts":1585302588000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"would be very hard to explain to devs that preloading SVG sprites need a \"script\" `as` value, but that's a second-order issue","msgtype":"m.text"},"ts":1585302644000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"I do vaguely recall a bunch of issues with SVG as image and SVG as document now that also pertain to CSS linking SVG","msgtype":"m.text"},"ts":1585302656000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Not sure those ever got solved properly","msgtype":"m.text"},"ts":1585302685000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"https://svg-discrimination.glitch.me/csp.html seems to indicate the SVG doc download is guarded by `img-src`","msgtype":"m.text"},"ts":1585303367000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"in Chrome but not in Firefox...","msgtype":"m.text"},"ts":1585303426000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"Safari also likes `img-src` here","msgtype":"m.text"},"ts":1585303494000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"I'll file issues","msgtype":"m.text"},"ts":1585303502000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"I guess the question is whether it can execute script","msgtype":"m.text"},"ts":1585303892000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"https://github.com/whatwg/fetch/issues/1012","msgtype":"m.text"},"ts":1585304037000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"doesn't seem like it can","msgtype":"m.text"},"ts":1585304217000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"added a script to the SVG in the test, and it's only running when the SVG is browsed to as the main document","msgtype":"m.text"},"ts":1585304239000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"Great, in that case image seems fine to me","msgtype":"m.text"},"ts":1585305978000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Though we should prolly investigate why Chrome has a different type","msgtype":"m.text"},"ts":1585306001000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: feel free to take over that Bikeshed PR btw to do your work on top and change it to how you like it to be, I don't care too strongly","msgtype":"m.text"},"ts":1585322310000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: OK cool, thanks","msgtype":"m.text"},"ts":1585322326000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"And just ping me when it's ready to merge","msgtype":"m.text"},"ts":1585326315000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TimothyGu: if you're around, is there a way to run specific tests?","msgtype":"m.text"},"ts":1585328286000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TimothyGu: and is it correct that the initial value of a DocumentFragment's _host is undefined?","msgtype":"m.text"},"ts":1585328309000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TimothyGu: and when does it give more detailed output from a particular test, only at the end?","msgtype":"m.text"},"ts":1585328346000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: https://github.com/jsdom/jsdom/blob/master/Contributing.md#tests `To run specific to-upstream web-platform-tests: yarn test-tuwpt --fgrep domparsing`","msgtype":"m.text"},"ts":1585328383000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"And yeah I think it'll save the detailed output to the end","msgtype":"m.text"},"ts":1585328396000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Sorry, I quoted the wrong line: `To run specific web-platform-tests already enabled via to-run.yaml: yarn test-wpt --fgrep dom/events`","msgtype":"m.text"},"ts":1585328414000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"annevk: yes, looks like the \"default\" host is undefined","msgtype":"m.text"},"ts":1585328449000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"but just to be safe I'd assume it could be either undefined or null","msgtype":"m.text"},"ts":1585328480000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"we haven't been super consistent with that unfortunately","msgtype":"m.text"},"ts":1585328490000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"I really dislike this issue","msgtype":"m.text"},"ts":1585329184000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Found the flaw in my logic, but still some test changes to analyze and not sure I’ll get to it today… Oh well, some progress at least. Thanks for the jsdom help! Works well with test-wpt plus grep","msgtype":"m.text"},"ts":1585331265000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Good to hear!","msgtype":"m.text"},"ts":1585331812000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"TabAtkins: the FileAPI spec doesn't seem to build anymore with the latest bikeshed version, failing with \"FATAL ERROR: Couldn't find the MDN data for 'fileapi' nor 'fileapi'.\"","msgtype":"m.text"},"ts":1585332579000,"senderName":"Mek","senderId":"Mek@irc"},
{"content":{"body":"(https://travis-ci.com/github/w3c/FileAPI/builds/155915673)","msgtype":"m.text"},"ts":1585332614000,"senderName":"Mek","senderId":"Mek@irc"},
{"content":{"body":"Ah, MikeSmith has been turning MDN annotations on for various groups, one of which includes FileAPI, and there must not be any MDN annotations for FileAPI.","msgtype":"m.text"},"ts":1585332664000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"not sure what it means for there to \"be MDN annotations\"?","msgtype":"m.text"},"ts":1585332801000,"senderName":"Mek","senderId":"Mek@irc"},
{"content":{"body":"https://w3c.github.io/mdn-spec-links/","msgtype":"m.text"},"ts":1585332850000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Means MDN has some articles that link back to your spec","msgtype":"m.text"},"ts":1585332859000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"fileapi is definitely listed there","msgtype":"m.text"},"ts":1585332876000,"senderName":"Mek","senderId":"Mek@irc"},
{"content":{"body":"ah indeed it is, and it's in bikeshed's data folder. HMM","msgtype":"m.text"},"ts":1585332942000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"i'll investigate","msgtype":"m.text"},"ts":1585332945000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Hm, I should probably also add a value to the metadata that allows \"add if present\", so it's safer to put into group boilerplates without new specs getting a fatal error.","msgtype":"m.text"},"ts":1585333299000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"yeah, having it in WICG especially seems problematic, as there are any wicg specs that aren't on mdn yet","msgtype":"m.text"},"ts":1585333347000,"senderName":"Mek","senderId":"Mek@irc"},
{"content":{"body":"After I diagnose and fix this issue with fileapi i'll add the metadata value and fix the boilerplates, because otherwise it would hide this issue. ^_^","msgtype":"m.text"},"ts":1585333694000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"okay, thanks!","msgtype":"m.text"},"ts":1585333767000,"senderName":"Mek","senderId":"Mek@irc"},
{"content":{"body":"I'm curious, where is bikeshed's data folder that is supposed to contain this mdn data?","msgtype":"m.text"},"ts":1585333843000,"senderName":"Mek","senderId":"Mek@irc"},
{"content":{"body":"bikeshed/spec-data/mdn","msgtype":"m.text"},"ts":1585334243000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"nope, no such directory","msgtype":"m.text"},"ts":1585334250000,"senderName":"Mek","senderId":"Mek@irc"},
{"content":{"body":"In your bikeshed directory, go to the bikeshed sub-directory?","msgtype":"m.text"},"ts":1585334329000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"yeah, no mdn subdirectory in the spec-data directory","msgtype":"m.text"},"ts":1585334353000,"senderName":"Mek","senderId":"Mek@irc"},
{"content":{"body":"(and I did run bikeshed update)","msgtype":"m.text"},"ts":1585334382000,"senderName":"Mek","senderId":"Mek@irc"},
{"content":{"body":"`bikeshed update --skip-manifest` seems to have done the trick? (I imagine `bikeshed update --mdn` would also have worked)","msgtype":"m.text"},"ts":1585334641000,"senderName":"Mek","senderId":"Mek@irc"},
{"content":{"body":"Hmmmm, okay I can reproduce the manifest update not picking up the new data, even tho it shows up in github.com/tabatkins/bikeshed-data/","msgtype":"m.text"},"ts":1585334922000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"thanks for pointing this out, will fix","msgtype":"m.text"},"ts":1585334938000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Mek: And this led me to find I was fucking up the updates a lot worse than I thought ^_^ thanks so much for pointing out the error ^_^","msgtype":"m.text"},"ts":1585335426000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins: so api.csswg.org was not updated to Python 3 but the Bikeshed copy was updated?","msgtype":"m.text"},"ts":1585337035000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"What do you mean by \"the Bikeshed copy\"?","msgtype":"m.text"},"ts":1585337056000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"At least, I think that's what https://travis-ci.org/github/whatwg/dom/builds/667847147 indicates","msgtype":"m.text"},"ts":1585337063000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TabAtkins: well, the Bikeshed instance that api.csswg.org uses","msgtype":"m.text"},"ts":1585337089000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yeah, something happened that caused the api server to update bikeshed unexpectedly, I'm talking with plinss about it now.","msgtype":"m.text"},"ts":1585337304000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"annevk: Try it again? plinss just manually set it to the last py2 commit","msgtype":"m.text"},"ts":1585337432000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"(and will be updating it to py3 and master this weekend)","msgtype":"m.text"},"ts":1585337447000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Great! Travis isn't loading for me, but maybe soon I can try again","msgtype":"m.text"},"ts":1585337538000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"The amount of Python 3 bullshit I've had to deal with in a time of international crisis is too damn high","msgtype":"m.text"},"ts":1585337602000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"heh, same","msgtype":"m.text"},"ts":1585337659000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"to be fair, we've all had like a year of warning and chose to procrastinate ^_^","msgtype":"m.text"},"ts":1585337682000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"If the changes didn't seem so artificial and pointless I would be less spiteful","msgtype":"m.text"},"ts":1585337955000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"is almost done making agent cluster allocation imperative...","msgtype":"m.emote"},"ts":1585337970000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"o_O","msgtype":"m.text"},"ts":1585338103000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I gotta watch some Mando, but tomorrow","msgtype":"m.text"},"ts":1585338136000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Travis will also have to wait, completely unresponsive somehow","msgtype":"m.text"},"ts":1585338175000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TabAtkins: do you know if any plans to reinstate `SVGUseElement`'s `instanceRoot` in Chrome or elsewhere?","msgtype":"m.text"},"ts":1585340348000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"Do I even want to know what that is","msgtype":"m.text"},"ts":1585340507000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Most things about SVGUseElement fill me with fear","msgtype":"m.text"},"ts":1585340516000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"SVGUseElement is defined in terms of shadow DOM these days, and instanceRoot is supposed to be the `<svg>` element in the shadow root, I think","msgtype":"m.text"},"ts":1585340660000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"TimothyGu: I doubt it, but I have no special insight into the matter.","msgtype":"m.text"},"ts":1585343375000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"got it","msgtype":"m.text"},"ts":1585343388000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"TabAtkins: Mek_: is the issue with the File API spec an MDN annotations fixed?","msgtype":"m.text"},"ts":1585350752000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"should be, yes","msgtype":"m.text"},"ts":1585350762000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"yes","msgtype":"m.text"},"ts":1585350762000,"senderName":"Mek_","senderId":"Mek_@irc"},
{"content":{"body":"Ok cool","msgtype":"m.text"},"ts":1585350775000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I think there is still the problem that most wicg specs won't have mdn annotations, so requiring that in the wicg template probably doesn't make sense","msgtype":"m.text"},"ts":1585350785000,"senderName":"Mek_","senderId":"Mek_@irc"},
{"content":{"body":"MikeSmith: Before adding to more boilerplates, wait for me to add the \"add if possible\" value to the metadata.","msgtype":"m.text"},"ts":1585350786000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins: OK","msgtype":"m.text"},"ts":1585350798000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"too busy with other stuff to do that yet","msgtype":"m.text"},"ts":1585350801000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"(I'll fix the ones you've already done.)","msgtype":"m.text"},"ts":1585350807000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"yeah I have been doing a ton of testing but I have to admit now that the only specs I have been testing with are the ones I know to have MDN annotations","msgtype":"m.text"},"ts":1585350915000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"it seems obvious now that I should have tested randomly with some others too","msgtype":"m.text"},"ts":1585350963000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"because even hitting on just one that didn’t have annos would have made me realize the problem","msgtype":"m.text"},"ts":1585350991000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"it's fine, we'll fix in a bit","msgtype":"m.text"},"ts":1585350996000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"ok","msgtype":"m.text"},"ts":1585351001000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"thanks","msgtype":"m.text"},"ts":1585351002000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"i haven't been regenning the tests yet, or else i'd have hit it too","msgtype":"m.text"},"ts":1585351014000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"ah","msgtype":"m.text"},"ts":1585351037000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"}
]