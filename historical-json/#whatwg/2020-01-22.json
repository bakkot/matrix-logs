[
{"content":{"body":"Does anyone know how `requestStorageAccess` works? As in, what happens to existing storage connections to things like idb and the cache API? Do storage events fire on localstorage as things change over?","msgtype":"m.text"},"ts":1579704448000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"Let me just consult the spec for that... oh wait...","msgtype":"m.text"},"ts":1579704706000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"indeed","msgtype":"m.text"},"ts":1579704787000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: I have tried to get that moving, but that is not defined and at least I have not seen much coordination around it","msgtype":"m.text"},"ts":1579704789000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: any idea what Firefox does? No worries if you don't know off the top of your head","msgtype":"m.text"},"ts":1579704859000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: iirc there's \"blocked\", \"third-party\", and \"first-party\" as modes, I'm not sure you can migrate from \"blocked\"","msgtype":"m.text"},"ts":1579704927000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: I think for localStorage you get new objects, but I haven't tested any of this in much detail as I was trying to get other people to work on it","msgtype":"m.text"},"ts":1579704978000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I wouldn't take whatever we do as a requirement though","msgtype":"m.text"},"ts":1579705010000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Fair enough. I kinda wish `requestStorageAccess` returned a 'storage bucket' for the top-level origin. That'd solve the open-connections issue, but I guess it'd create lots of other problems.","msgtype":"m.text"},"ts":1579705074000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: one thing I never really got clear in my head is what the threat model is during a transition","msgtype":"m.text"},"ts":1579705113000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: it might be good to start there before figuring out API specifics","msgtype":"m.text"},"ts":1579705132000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"True. Even in the current model you'll end up with a combination of data sources, even if some of them are just held in memory.","msgtype":"m.text"},"ts":1579705156000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"exactly","msgtype":"m.text"},"ts":1579705164000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA annevk Domenic: sorry it's taken so long. we're going to spin up an issue tracker in the privacycg for it; it got pretty difficult to follow all the discussion in whatwg/html#3338. the output of that work will be an HTML PR.","msgtype":"m.text"},"ts":1579708414000,"senderName":"hober","senderId":"hober@irc"},
{"content":{"body":"hober: ðŸŽ‰","msgtype":"m.text"},"ts":1579708460000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hober: Cheers! Does Safari treat a `window.open`'d  as third party, or is this fine since it's got the origin visible?","msgtype":"m.text"},"ts":1579708615000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: i don't know offhand","msgtype":"m.text"},"ts":1579708718000,"senderName":"hober","senderId":"hober@irc"},
{"content":{"body":"No worries, I can give it a test","msgtype":"m.text"},"ts":1579708733000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"Domenic: It's great to see your work on origin policy. I'm wondering, is this hoped to enable ServiceWorker on first load eventually?","msgtype":"m.text"},"ts":1579712897000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"littledan: I'm not aware of any such plans. We had Link: rel=serviceworker; at some point but unshipped that, so I assume the reasons for not pursuing service worker on first load are still valid.","msgtype":"m.text"},"ts":1579712940000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: Do you have a good reference for this? I'm asking because I'm reviewing another proposal that adds a response header that points to a script that runs before any other script.","msgtype":"m.text"},"ts":1579713030000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"and I'm curious whether there are some similar problems/solutions. Maybe it's not problematic to ask for a script to run \"first\" in a response header?","msgtype":"m.text"},"ts":1579713050000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"littledan: I don't, but JakeA might.","msgtype":"m.text"},"ts":1579713051000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"is reminded of https://en.wikipedia.org/wiki/Proxy_auto-config","msgtype":"m.emote"},"ts":1579713079000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(beware, that's terrible)","msgtype":"m.text"},"ts":1579713088000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"littledan: how is it different from starting your HTML document with that script?","msgtype":"m.text"},"ts":1579713148000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(I thought it was terrible but they say no one else raised this concern)","msgtype":"m.text"},"ts":1579713185000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"annevk: The idea is that this can be added centrally more easily, based on how sites are deployed in practice","msgtype":"m.text"},"ts":1579713214000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"I mean in general adding more means of script execution is a pretty big project, and I wouldn't advise people to take it on, but it keeps happening.","msgtype":"m.text"},"ts":1579713314000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"My comment was about PAC, I kinda like the idea of letting script run in response to a navigation, but not if the only aim is to make deployment easier","msgtype":"m.text"},"ts":1579713342000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"similar prototype systems showed that it was basically fatally impractical to try to get something to run first, it's claimed","msgtype":"m.text"},"ts":1579713400000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"this is for loading a security policy for the page","msgtype":"m.text"},"ts":1579713448000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"annevk: For what sorts of purposes do you think it'd be acceptable to let a script run in response to navigation?","msgtype":"m.text"},"ts":1579713653000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"littledan: mainly the case of being able to rely on a service worker being there","msgtype":"m.text"},"ts":1579713815000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(which as Domenic pointed out has been tricky historically and probably still us due to the performance impact)","msgtype":"m.text"},"ts":1579713871000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"well, thanks for your help understanding this","msgtype":"m.text"},"ts":1579714156000,"senderName":"littledan","senderId":"littledan@irc"}
]