[
{"content":{"body":"kochi1: I only just now finally had a chance to looks at your slides","msgtype":"m.text"},"ts":1377493092000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"they look great","msgtype":"m.text"},"ts":1377493096000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"the screenshots are great","msgtype":"m.text"},"ts":1377493106000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I think you'll be fine","msgtype":"m.text"},"ts":1377493113000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"heycam: Yeah, but the token characters are just single guillemets, so you were close enough. ^_^","msgtype":"m.text"},"ts":1377493367000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"all these different angle-looking brackets to get confused betwee :)","msgtype":"m.text"},"ts":1377493388000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"*between","msgtype":"m.text"},"ts":1377493390000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"ah shit, missed heycam","msgtype":"m.text"},"ts":1377509511000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"zcorpan, if you ever are looking for something to test, I'd love to see what you'd come up with for the named getter on form / form.elements","msgtype":"m.text"},"ts":1377519177000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: i've probably written tests for named getters on document and window, but maybe not on form","msgtype":"m.text"},"ts":1377519226000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Anyone with IE?","msgtype":"m.text"},"ts":1377520602000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Would be interested in its behaviour on http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2484","msgtype":"m.text"},"ts":1377520638000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Are there really no tests for document.cookie?","msgtype":"m.text"},"ts":1377520852000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Hrm, didn't I create a PR for https://github.com/Ms2ger/web-platform-tests/compare/form-named-item ?","msgtype":"m.text"},"ts":1377521117000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Or did I","msgtype":"m.text"},"ts":1377521175000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"https://github.com/w3c/web-platform-tests/pull/111","msgtype":"m.text"},"ts":1377521210000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"So, r? zcorpan gsnedders jgraham :)","msgtype":"m.text"},"ts":1377521227000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"If you tell me whether or not there are really no document.cookie tests?","msgtype":"m.text"},"ts":1377521251000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Where?","msgtype":"m.text"},"ts":1377521261000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"On web-platofmr-tests","msgtype":"m.text"},"ts":1377521270000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"I see some","msgtype":"m.text"},"ts":1377521307000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"There are a few, but only indirectly","msgtype":"m.text"},"ts":1377521314000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Some about sandboxed iframes","msgtype":"m.text"},"ts":1377521339000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"And otherwise mostly used for the sake of implementing the tests.","msgtype":"m.text"},"ts":1377521351000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Some for websockets and eventsource","msgtype":"m.text"},"ts":1377521359000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"./XMLHttpRequest/responsexml-document-properties.htm","msgtype":"m.text"},"ts":1377521446000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"./old-tests/submission/W3C/domhtml/HTMLDocument12.html","msgtype":"m.text"},"ts":1377521463000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"And that's about it","msgtype":"m.text"},"ts":1377521471000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Someone should write some.","msgtype":"m.text"},"ts":1377521853000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Yeah, someone","msgtype":"m.text"},"ts":1377521908000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"get on it already, someone!","msgtype":"m.text"},"ts":1377521915000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Someone is such a slacker.","msgtype":"m.text"},"ts":1377521936000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders, so I told you ;)","msgtype":"m.text"},"ts":1377521960000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"watcha waitin watcha waitin watcha waitin watcha waitin watcha waitin watcha waitin foooor?!","msgtype":"m.text"},"ts":1377521974000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Ms2ger: I didn't say I would straight away. ;)","msgtype":"m.text"},"ts":1377521988000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Ms2ger: critic link?","msgtype":"m.text"},"ts":1377522069000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"tries to get one","msgtype":"m.emote"},"ts":1377522092000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ah, https://critic.hoppipolla.co.uk/r/116","msgtype":"m.text"},"ts":1377522123000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Oh, jgraham reviewed it","msgtype":"m.text"},"ts":1377522133000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"looks at his comments","msgtype":"m.emote"},"ts":1377522154000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"jgraham, addressed your comments","msgtype":"m.text"},"ts":1377522557000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"ok, in css spirit, please bikeshed https://www.w3.org/Bugs/Public/show_bug.cgi?id=23066","msgtype":"m.text"},"ts":1377523192000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Ms2ger: I find it amusing that https://bugzilla.mozilla.org/show_bug.cgi?id=909188 was about the daily WTF","msgtype":"m.text"},"ts":1377523792000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"Ha","msgtype":"m.text"},"ts":1377523877000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"I hadn't even noticed that","msgtype":"m.text"},"ts":1377523884000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"zcorpan, contrary to popular belief, bz and dbaron are different people","msgtype":"m.text"},"ts":1377523913000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: yeah. i wonder if i have misattributed earlier without noticing. i seem to store them in the same bucket in my head. :-/","msgtype":"m.text"},"ts":1377524081000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"How about roc?","msgtype":"m.text"},"ts":1377524095000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"no he has a bucket of his own","msgtype":"m.text"},"ts":1377524107000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Oh, I guess the Brits take today off for some reason","msgtype":"m.text"},"ts":1377524481000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"hsivonen: re: http://mathiasbynens.be/notes/etago#comment-8, as long as the string literal is closed correctly, is `<!--` really harmful?","msgtype":"m.text"},"ts":1377525524000,"senderName":"matjas","senderId":"matjas@irc"},
{"content":{"body":"i.e. http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2485 seems safe","msgtype":"m.text"},"ts":1377525566000,"senderName":"matjas","senderId":"matjas@irc"},
{"content":{"body":"as long as the closing `\"` is there","msgtype":"m.text"},"ts":1377525581000,"senderName":"matjas","senderId":"matjas@irc"},
{"content":{"body":"Ms2ger: s/Brits/English/","msgtype":"m.text"},"ts":1377526542000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Ms2ger: \"Summer Bank Holiday (Not Scotland)\"","msgtype":"m.text"},"ts":1377526557000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders, apologies","msgtype":"m.text"},"ts":1377526557000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"So actually s/Brits/English, Welsh, and Northern Irish/","msgtype":"m.text"},"ts":1377526569000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"is left wondering if the republicans in NI can take the day off","msgtype":"m.emote"},"ts":1377526604000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"They probably use it to protest or something","msgtype":"m.text"},"ts":1377526897000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"question about MessagePort: there are 2 flags: shipped and messagePortEnabled. shipped is set to true when the port is cloned. messagePortEnabled is set to true when start() is called. It's not clear to me what happens when: shipped=true and messagePortEnabled=false, shipped=false and messagePortEnabled=true, shipped=false and messagePortEnabled=false","msgtype":"m.text"},"ts":1377529252000,"senderName":"baku","senderId":"baku@irc"},
{"content":{"body":"zcorpan: ^^","msgtype":"m.text"},"ts":1377529877000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"baku: shipped is only relevant for determining which task source to use","msgtype":"m.text"},"ts":1377529967000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan, so in which queue stores the task. is it?","msgtype":"m.text"},"ts":1377530003000,"senderName":"baku","senderId":"baku@irc"},
{"content":{"body":"s/stores/to store/","msgtype":"m.text"},"ts":1377530023000,"senderName":"baku","senderId":"baku@irc"},
{"content":{"body":"baku: e.g. if you create several MessageChannels in a document and post lots of messages on them, they all use the same task source so they are processed in the same order as posted","msgtype":"m.text"},"ts":1377530036000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"baku: but if you pass on the ports to other documents they use separate task sources so order is not guaranteed","msgtype":"m.text"},"ts":1377530062000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"matjas: your test case doesn't demonstrate the problem. also, behavior differs in pre-HTML5-parser browsers","msgtype":"m.text"},"ts":1377530181000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan, so, if a MessagePort is shipped (==cloned) the messages are enqueued to its port message queue.","msgtype":"m.text"},"ts":1377530274000,"senderName":"baku","senderId":"baku@irc"},
{"content":{"body":"matjas: it has nothing to do with the \"","msgtype":"m.text"},"ts":1377530280000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan, otherwise we have to use this unshipped port message queue that is per event loop.","msgtype":"m.text"},"ts":1377530293000,"senderName":"baku","senderId":"baku@irc"},
{"content":{"body":"baku: yeah. although it's not quite 'per event loop'","msgtype":"m.text"},"ts":1377530329000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"well.. this is what the spec says :) 'Each event loop has a task source called the unshipped port message queue'","msgtype":"m.text"},"ts":1377530375000,"senderName":"baku","senderId":"baku@irc"},
{"content":{"body":"oh. maybe you're right then :-)","msgtype":"m.text"},"ts":1377530419000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan, but I don't understand the porpoise ofthis unshipped port message queue and when it should be used.","msgtype":"m.text"},"ts":1377530428000,"senderName":"baku","senderId":"baku@irc"},
{"content":{"body":"zcorpan, I mean, I understand when elements are appended, but it's not clear when I should use its content.","msgtype":"m.text"},"ts":1377530455000,"senderName":"baku","senderId":"baku@irc"},
{"content":{"body":"baku: before the spec used separate task sources for all ports, but then people started using lots of MessageChannels within a single document as a poor man's setImmediate(), and so the spec had a problem that the order was not guaranteed","msgtype":"m.text"},"ts":1377530561000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"matjas: e.g. http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2486","msgtype":"m.text"},"ts":1377530769000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: yeah, but at that point it’s not part of a string literal anymore","msgtype":"m.text"},"ts":1377530799000,"senderName":"matjas","senderId":"matjas@irc"},
{"content":{"body":"matjas: not relevant. http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2487","msgtype":"m.text"},"ts":1377530829000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: but http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2489 is safe","msgtype":"m.text"},"ts":1377530872000,"senderName":"matjas","senderId":"matjas@irc"},
{"content":{"body":"so, it seems that as long as </script> is escaped as <\\/script> (or similar), there’s no need to escape <!-- if it’s to be injected as part of a string literal","msgtype":"m.text"},"ts":1377530902000,"senderName":"matjas","senderId":"matjas@irc"},
{"content":{"body":"matjas: only in browsers with html5 parser","msgtype":"m.text"},"ts":1377530912000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: ah, so _that_’s the gotcha","msgtype":"m.text"},"ts":1377530929000,"senderName":"matjas","senderId":"matjas@irc"},
{"content":{"body":"thanks!","msgtype":"m.text"},"ts":1377530938000,"senderName":"matjas","senderId":"matjas@irc"},
{"content":{"body":"matjas: e.g. http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2490 would make old browsers treat the whole thing as a big script","msgtype":"m.text"},"ts":1377530969000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"(if the last script end tag is missing they reparse)","msgtype":"m.text"},"ts":1377530985000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"confirmed, http://software.hixie.ch/utilities/js/live-dom-viewer/?saved=2489 displays the alert in e.g. Firefox 2","msgtype":"m.text"},"ts":1377531060000,"senderName":"matjas","senderId":"matjas@irc"},
{"content":{"body":"matjas: since it's easy to get a confusing result even in html5-parser browsers, the html spec makes unmatched <!-- an error","msgtype":"m.text"},"ts":1377531066000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"which v.nu checks","msgtype":"m.text"},"ts":1377531123000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"cool","msgtype":"m.text"},"ts":1377531172000,"senderName":"matjas","senderId":"matjas@irc"},
{"content":{"body":"good morning, Whatwg!","msgtype":"m.text"},"ts":1377535167000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"Good evening","msgtype":"m.text"},"ts":1377535192000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Good evening!","msgtype":"m.text"},"ts":1377535405000,"senderName":"jannis_1","senderId":"jannis_1@irc"},
{"content":{"body":"heycam|away: The confusion is why there's a markup shortcut for tokens if you use bikeshed - <<<foo>>> generates a token link with the appropriate brackets.","msgtype":"m.text"},"ts":1377535510000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"so how is \"unshipped port message queue\" supposed to work","msgtype":"m.text"},"ts":1377539060000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"say there are two channels A and B, and ports a1, a2, b1, b2. Then one does a1.postMessage(...), b2.onmessage = function() {}; b2.postMessage(...);","msgtype":"m.text"},"ts":1377539159000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"er, b1.postMessage()","msgtype":"m.text"},"ts":1377539168000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"so b2 should get the message","msgtype":"m.text"},"ts":1377539184000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"but what ends up to the \"unshipped port message queue\" ?","msgtype":"m.text"},"ts":1377539204000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"what happens to the message posted to a1?","msgtype":"m.text"},"ts":1377539236000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"Hixie_: ^","msgtype":"m.text"},"ts":1377539239000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"what's the relationship between a and b?","msgtype":"m.text"},"ts":1377539285000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"like, why does b affect a at all?","msgtype":"m.text"},"ts":1377539293000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"all the unshipped port message queue does is make sure that messages on channels that haven't been sent through channels are delivered in relative order","msgtype":"m.text"},"ts":1377539343000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"Hixie_: well, the spec says \"Each event loop has a task source called the unshipped port message queue. \"","msgtype":"m.text"},"ts":1377539353000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"relative to what?","msgtype":"m.text"},"ts":1377539387000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"to other things in that queue","msgtype":"m.text"},"ts":1377539406000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"Hixie_: so, if there is just one document/browsing context, there is one unshipped port message queue","msgtype":"m.text"},"ts":1377539438000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"when does something end up to that queue?","msgtype":"m.text"},"ts":1377539449000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"right","msgtype":"m.text"},"ts":1377539457000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"it means that when you do a1.postMessage(); b1.postMessage();, you first fire a message at a2, and then you fire a message at b2. you never fire on b2 before a2.","msgtype":"m.text"},"ts":1377539471000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"this isn't guaranteed once you have shipped, say, b2 across a1 to a2.","msgtype":"m.text"},"ts":1377539488000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"ahaa, so if a2 is never started, b2","msgtype":"m.text"},"ts":1377539491000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"never gets the message","msgtype":"m.text"},"ts":1377539496000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"what? no","msgtype":"m.text"},"ts":1377539501000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"I'm trying to understand why not","msgtype":"m.text"},"ts":1377539529000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"(note, I care only about the case when nothing is shipped)","msgtype":"m.text"},"ts":1377539555000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"looks like the spec is buggy in the case of unstarted ports","msgtype":"m.text"},"ts":1377539583000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"another unclear stuff is what about if the port is sent to the same window: window.postMessage(a.port1); do we consider it as shipped?","msgtype":"m.text"},"ts":1377539594000,"senderName":"baku","senderId":"baku@irc"},
{"content":{"body":"baku: ^","msgtype":"m.text"},"ts":1377539595000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"because we are still in the same document/browsing context.","msgtype":"m.text"},"ts":1377539607000,"senderName":"baku","senderId":"baku@irc"},
{"content":{"body":"baku: \"shipped\" is clearly defined -- you only consider something shipped once you run a step that says \"Set new port's has been shipped flag to true\"","msgtype":"m.text"},"ts":1377539624000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"Hixie_, right. but what is not clear to me is that: the unshipped port message queue is used to keep messages in order when they are 'dispatched' in the same event loop/browser context. shipped flag is set to true when the port is cloned.","msgtype":"m.text"},"ts":1377539761000,"senderName":"baku","senderId":"baku@irc"},
{"content":{"body":"smaug____: ok, fixed. the unshipped port message queue ignores disabled port message queues.","msgtype":"m.text"},"ts":1377539776000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"ok, thanks","msgtype":"m.text"},"ts":1377539789000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"so it means that, cloning a port changes the queue for the messages also when the event loop/browser context doesn't change.","msgtype":"m.text"},"ts":1377539790000,"senderName":"baku","senderId":"baku@irc"},
{"content":{"body":"smaug____: good catch, thank _you_!","msgtype":"m.text"},"ts":1377539802000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"baku: yes","msgtype":"m.text"},"ts":1377539809000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"baku: the idea is that you don't know if the message channel you're sending the port through goes to the same event loop or not","msgtype":"m.text"},"ts":1377539823000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"baku: so you should be ready for the order to get unreliable either way","msgtype":"m.text"},"ts":1377539840000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"Hixie_, ok","msgtype":"m.text"},"ts":1377539856000,"senderName":"baku","senderId":"baku@irc"},
{"content":{"body":"baku: in particular, some implementations turn all channels that have ever gone through another channel into a channel to a different \"grand central station\" thread","msgtype":"m.text"},"ts":1377539865000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"baku: so they actually can't guarantee order at that point anyway","msgtype":"m.text"},"ts":1377539872000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"(once you can cross threads, managing the messages when the end-points are flying around as well becomes kind of tricky)","msgtype":"m.text"},"ts":1377539893000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"(you either want a central dispatch thread to manage it, or you need to start setting up redirects to catch late messages)","msgtype":"m.text"},"ts":1377539918000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"Hixie_, sure","msgtype":"m.text"},"ts":1377539929000,"senderName":"baku","senderId":"baku@irc"},
{"content":{"body":"note that once a message port's queue gets enabled, the relative order of messages does come back into play","msgtype":"m.text"},"ts":1377539998000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"so e.g.  b2.start(); a1.postMessage(); b1.postMessage(); a2.start(); delivers a's message before b's.","msgtype":"m.text"},"ts":1377540026000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"you just silently ignore the disabled ones until it's started","msgtype":"m.text"},"ts":1377540043000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"smaug____: also moved some paragraphs around to try to make that area clearer.","msgtype":"m.text"},"ts":1377540221000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"k","msgtype":"m.text"},"ts":1377540232000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"will, re-read when reviewing the patch","msgtype":"m.text"},"ts":1377540240000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"anybody have a clue why the following document would be causing a fatal parse error in the validator?","msgtype":"m.text"},"ts":1377547337000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"http://w3c-test.org/web-platform-tests/master/html/semantics/forms/the-form-element/form-elements-nameditem-02.html","msgtype":"m.text"},"ts":1377547341000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"http://validator.w3.org/nu/?doc=http://w3c-test.org/web-platform-tests/master/html/semantics/forms/the-form-element/form-elements-nameditem-02.htmla","msgtype":"m.text"},"ts":1377547385000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"http://validator.w3.org/nu/?doc=http://w3c-test.org/web-platform-tests/master/html/semantics/forms/the-form-element/form-elements-nameditem-02.html","msgtype":"m.text"},"ts":1377547400000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Heh, I know that test","msgtype":"m.text"},"ts":1377547429000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Streaming","msgtype":"m.text"},"ts":1377547458000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"MikeSmith, try <table><input></table>","msgtype":"m.text"},"ts":1377547527000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: ok","msgtype":"m.text"},"ts":1377547685000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"the validator fails on it without indicating what the cause was","msgtype":"m.text"},"ts":1377547707000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"The DOM you need is <input><table></table>","msgtype":"m.text"},"ts":1377547728000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"But once you streamed the start of the table, you can't do that anymore","msgtype":"m.text"},"ts":1377547758000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"I see","msgtype":"m.text"},"ts":1377547788000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"yeah, v.nu's parser is configured to fatal error on errors that require doing stuff that are already streamed","msgtype":"m.text"},"ts":1377548293000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"e.g. </head><!----><link> or <body><body foo> or <table>x","msgtype":"m.text"},"ts":1377548350000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"(i guess the comment isn't required)","msgtype":"m.text"},"ts":1377548383000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"wycats: yt?","msgtype":"m.text"},"ts":1377549173000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"anyone have a pointer to the latest thinking on ES6 modules?","msgtype":"m.text"},"ts":1377549557000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"does anyone know how es6 module loading interacts with synchronous reentrant script execution?","msgtype":"m.text"},"ts":1377550749000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"Hixie: I'm here","msgtype":"m.text"},"ts":1377550992000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"wycats: hey","msgtype":"m.text"},"ts":1377550999000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"wycats: originally i was going to say \"please don't call ondemand that, it sounds like an event handler\"","msgtype":"m.text"},"ts":1377551018000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"wycats: but now i have so many more questions about es6 modules and module loading","msgtype":"m.text"},"ts":1377551030000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"ES6 module imports are always async (except during sync eval, when they must be importing modules that are already in the registry)","msgtype":"m.text"},"ts":1377551037000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"And we're not going to call it on demand; it's an intentionally absurd name so we fix it before shipping","msgtype":"m.text"},"ts":1377551060000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"wycats: so what happens if you document.appendChild() an inline script that attempts to import something that's not loaded?","msgtype":"m.text"},"ts":1377551075000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"Syntax error","msgtype":"m.text"},"ts":1377551085000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"where would that be defined? do i have to say something in HTML to the effect of \"this kind of script load is not allowed to be async\", or do you automatically figure it out from the way there's JS on the stack?","msgtype":"m.text"},"ts":1377551124000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"i mean, at the spec level","msgtype":"m.text"},"ts":1377551135000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"the loader hooks are eval and evalAsync","msgtype":"m.text"},"ts":1377551149000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"So you'd want to decide which of those hooks to use from any given place in HTML","msgtype":"m.text"},"ts":1377551178000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"oh, i'm supposed to be invoking those from the html spec somehow?","msgtype":"m.text"},"ts":1377551187000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"interesting","msgtype":"m.text"},"ts":1377551191000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"The spec language for this is coming shortly","msgtype":"m.text"},"ts":1377551222000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"how about the fetching, is the interaction with HTTP done straight from JS, or will there be a hook i can use to say \"use fetch.spec.whatwg.org\" ?","msgtype":"m.text"},"ts":1377551229000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"The loader API really tightens up the semantics","msgtype":"m.text"},"ts":1377551239000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"The browser loader will define what its fetch hook does","msgtype":"m.text"},"ts":1377551276000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"The ES spec just calls into the fetch hook","msgtype":"m.text"},"ts":1377551286000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"Which is user overridable","msgtype":"m.text"},"ts":1377551291000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"ah, excellent","msgtype":"m.text"},"ts":1377551293000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"So theoretically you could use XHR","msgtype":"m.text"},"ts":1377551298000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"all the hooks but normalize are async","msgtype":"m.text"},"ts":1377551326000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"so the background here is that i'm trying to define some sort of better script loading mechanism in html","msgtype":"m.text"},"ts":1377551367000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"but i want to make sure it works with modules","msgtype":"m.text"},"ts":1377551379000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"is there some way i can prefill es6's notion of what modules are available, without having to fetch them all? e.g. we could have <script module=\"jquery\" src=\"http://cdn.example.com/jquery.js\"> ?","msgtype":"m.text"},"ts":1377551418000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"Yep","msgtype":"m.text"},"ts":1377551426000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"There's an exposed registry","msgtype":"m.text"},"ts":1377551432000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"Module names are simple strings","msgtype":"m.text"},"ts":1377551448000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"So you can put in \"web/dom\"","msgtype":"m.text"},"ts":1377551468000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"r? http://critic.hoppipolla.co.uk/r/286","msgtype":"m.text"},"ts":1377551497000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"wycats: \"web/dom\"?","msgtype":"m.text"},"ts":1377551534000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"An example module name","msgtype":"m.text"},"ts":1377551564000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"oh ok","msgtype":"m.text"},"ts":1377551568000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"import { document } from \"web/Dom\"","msgtype":"m.text"},"ts":1377551575000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"document.getElementById etc","msgtype":"m.text"},"ts":1377551586000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"let's not confuse matters by having examples that sound like web apis :-)","msgtype":"m.text"},"ts":1377551593000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"Your hook for prepopulation is the registry","msgtype":"m.text"},"ts":1377551603000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"Oh I was intentionally using a web api","msgtype":"m.text"},"ts":1377551609000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"i'm confused","msgtype":"m.text"},"ts":1377551614000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"i meant a page that has many scripts","msgtype":"m.text"},"ts":1377551619000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"would maybe want this registry populated with those scripts, right?","msgtype":"m.text"},"ts":1377551634000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"rather than wait until they are parsed","msgtype":"m.text"},"ts":1377551638000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"Scripts aren't modules :/","msgtype":"m.text"},"ts":1377551659000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"oh? what's the difference","msgtype":"m.text"},"ts":1377551677000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"You're saying you want to populate the registry with module strings but not trigger an eager parse?","msgtype":"m.text"},"ts":1377551692000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"suppose the page has five scripts from CDNs","msgtype":"m.text"},"ts":1377551708000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"and they haven't arrived yet","msgtype":"m.text"},"ts":1377551712000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"Scripts are just top level programs. Modules are scoped","msgtype":"m.text"},"ts":1377551713000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"oh i mean <script>s","msgtype":"m.text"},"ts":1377551721000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"they could be modules","msgtype":"m.text"},"ts":1377551734000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"assume they are modules","msgtype":"m.text"},"ts":1377551736000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"anyway, there's also an inline <script> that says to import jquery or whatever","msgtype":"m.text"},"ts":1377551751000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"without some mechanism in the markup, the browser has no idea which of the five CDN-hosted files has jquery","msgtype":"m.text"},"ts":1377551772000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"since it won't even hear back from the CDN for another 200ms","msgtype":"m.text"},"ts":1377551789000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"I'm on my phone ATM... There are specific things to discuss here but they're hard to type on a phone","msgtype":"m.text"},"ts":1377551811000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"Tonight?","msgtype":"m.text"},"ts":1377551812000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"sure","msgtype":"m.text"},"ts":1377551848000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"ping me whenever","msgtype":"m.text"},"ts":1377551850000,"senderName":"Hixie_","senderId":"Hixie_@irc"},
{"content":{"body":"tl;dr there are thoughts on bundling that are related to what you're doing","msgtype":"m.text"},"ts":1377551936000,"senderName":"wycats","senderId":"wycats@irc"},
{"content":{"body":"annevk, smaug____ What was the reason to copy the encoding when we clone document nodes?","msgtype":"m.text"},"ts":1377554817000,"senderName":"arv","senderId":"arv@irc"},
{"content":{"body":"arv: reason? I dunno. I thought we just wanted to define what Gecko did...","msgtype":"m.text"},"ts":1377554947000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"arv: there's observable effects for URLs and <form> though","msgtype":"m.text"},"ts":1377554980000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"holy backlog","msgtype":"m.text"},"ts":1377555028000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Ah... thanks, that answers my question.","msgtype":"m.text"},"ts":1377555029000,"senderName":"arv","senderId":"arv@irc"}
]