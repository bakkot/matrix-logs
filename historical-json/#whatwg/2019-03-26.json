[
{"content":{"body":"annevk: o/ Can I store an \"internal slot\" on the realm?","msgtype":"m.text"},"ts":1553593849000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: settings object or global object please","msgtype":"m.text"},"ts":1553593910000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"lgrahl: at least, I think that's our strategy mostly","msgtype":"m.text"},"ts":1553593921000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"lgrahl: leaving the Realm to JavaScript","msgtype":"m.text"},"ts":1553593936000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Fine by me. :) Do you have a link to a spec that makes use of this?","msgtype":"m.text"},"ts":1553594012000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: HTML does a lot of this ðŸ˜ƒ","msgtype":"m.text"},"ts":1553594050000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I don't think I fully understand the difference between the current settings object and the environment settings object.","msgtype":"m.text"},"ts":1553595101000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: the former is an instance of the latter","msgtype":"m.text"},"ts":1553595269000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"iirc","msgtype":"m.text"},"ts":1553595283000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: So, can I say \"Let the current settings object have a [[Foo]] internal slot.\" and then \"Store x in the current settings object [[Foo]] internal slot.\"?","msgtype":"m.text"},"ts":1553595387000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: no, you'd have to modify the environment settings object (the class) and then you manipulate its state using some instance","msgtype":"m.text"},"ts":1553595517000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: \"Let the environment settings object have a [[Foo]] internal slot.\" then?","msgtype":"m.text"},"ts":1553595590000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: more like \"The environment settings object has a [[Foo]] internal slot.\"","msgtype":"m.text"},"ts":1553595666000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"lgrahl: https://ln.hixie.ch/?start=1140242962&count=1 might help","msgtype":"m.text"},"ts":1553595692000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Phew, don't read the WebRTC spec then. ^.^ It's full of that.","msgtype":"m.text"},"ts":1553595820000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"That's too bad, hopefully they'll fix it one day","msgtype":"m.text"},"ts":1553595895000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"\"Let\" is really only used for initializing variables within an algorithm","msgtype":"m.text"},"ts":1553595924000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Agree. But \"The environment settings object has a [[Foo]] internal slot.\" is also kind of an implicit definition if it's in the middle of a spec.","msgtype":"m.text"},"ts":1553596011000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: ideally at some point you'd also add a note to the HTML Standard or some such saying environment settings objects are patched in this manner","msgtype":"m.text"},"ts":1553596180000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"lgrahl: you're right that we don't really have a good way of handling extensions to those objects though","msgtype":"m.text"},"ts":1553596199000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: So, I guess since it's not scoped it's probably a good idea to prefix it, for example: [[WebRTCPCFoo]]?","msgtype":"m.text"},"ts":1553596249000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: yeah, though also, typically these kind of extensions are stored on global objects (or document)","msgtype":"m.text"},"ts":1553596380000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: To elaborate: I want to register an intent (read: permission request, but jib really wants to avoid prompting, so this API should encourage to not prompt) and then, if granted at some point, an event should fire on all RTCPeerConnection instances of that realm.","msgtype":"m.text"},"ts":1553596409000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: hmm, shouldn't that be origin-based? if you create an instance in an <iframe> it wouldn't work?","msgtype":"m.text"},"ts":1553596511000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Mhh... well, ideally, yes.","msgtype":"m.text"},"ts":1553596583000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"annevk: jib's idea for Firefox is that there's a toggle button like currently planned for the autoplay audio mute feature. But others should still be able to prompt.","msgtype":"m.text"},"ts":1553596697000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"So, I guess it should affect all windows of the same origin.","msgtype":"m.text"},"ts":1553596780000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"annevk: What would be the appropriate way to share an \"internal slot\" across same origin (and later, firing an event for all windows of the same origin)?","msgtype":"m.text"},"ts":1553596867000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: the permission store?","msgtype":"m.text"},"ts":1553597083000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"afaik that has most of the architecture","msgtype":"m.text"},"ts":1553597103000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Yeah, that might work.","msgtype":"m.text"},"ts":1553597234000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"annevk: apologies in advance for disappearing; I dropped that output review right before boarding a flight. Thanks so much for taking that on.","msgtype":"m.text"},"ts":1553605878000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: heh, safe travels","msgtype":"m.text"},"ts":1553606041000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"should any markup in html realistically become just Element? I didn't think so, but I want to be sure","msgtype":"m.text"},"ts":1553612749000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"like, as in should it be plausble to put markup in the document which winds up where a ref to that element's .constructor is Element itself","msgtype":"m.text"},"ts":1553612863000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"I'm not going to claim it's impossible, but I'd be surprised","msgtype":"m.text"},"ts":1553613621000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: I would have been yesterday too :)","msgtype":"m.text"},"ts":1553614105000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"It seemed strange to me and probably like it shouldn't be but I wanted some advice from folks here about whether that seemed probably strange/bad too","msgtype":"m.text"},"ts":1553614155000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"bkardell: depending on where you are going with this https://github.com/whatwg/html/issues/4436#issuecomment-476632809 might be relevant","msgtype":"m.text"},"ts":1553615188000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"bkardell: but also, <!-- ... --> does not become an Element, but that's probably not what you mean","msgtype":"m.text"},"ts":1553615244000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"https://codepen.io/bkardell/pen/EMJqYz","msgtype":"m.text"},"ts":1553615608000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"I am seeing the constructor there as Element in FF, chrome and webkit","msgtype":"m.text"},"ts":1553615664000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"that surprised me and I guess it causes a number of issues actually","msgtype":"m.text"},"ts":1553615696000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"it feels weird that that is what is happening and I just wanted to see what you all thought... agree that is weird?  IT's underspecified atm","msgtype":"m.text"},"ts":1553615769000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"bkardell: oh for MathML","msgtype":"m.text"},"ts":1553615827000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"bkardell: I think that's fine","msgtype":"m.text"},"ts":1553615837000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"bkardell: though maybe MathML should have something like MathMLElement for shared stuff","msgtype":"m.text"},"ts":1553615866000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"bkardell: e.g., this way it won't have .style I guess","msgtype":"m.text"},"ts":1553615873000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"it means that currently you don't have .style or access to custom properties and so on","msgtype":"m.text"},"ts":1553615875000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"yeah, this is where I was going","msgtype":"m.text"},"ts":1553615887000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"bkardell: okay, I agree that seems worth fixing","msgtype":"m.text"},"ts":1553615896000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"bkardell: it's mostly an issue with MathML","msgtype":"m.text"},"ts":1553615903000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"exactly... just wanted to see if that made sense before I suggested going down that path","msgtype":"m.text"},"ts":1553615909000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"bkardell: some folks restarted doing some work on that, perhaps file an issue there?","msgtype":"m.text"},"ts":1553615915000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah, there is where I am","msgtype":"m.text"},"ts":1553615937000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"that*","msgtype":"m.text"},"ts":1553615945000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"the alternative is to uplift stuff to Element","msgtype":"m.text"},"ts":1553615952000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"we've done that for className/id/slot","msgtype":"m.text"},"ts":1553615958000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"thoughts?","msgtype":"m.text"},"ts":1553616009000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"tbh, that caused me some confusion because I saw a lot on Element that I didn't think would be there","msgtype":"m.text"},"ts":1553616041000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"it seemed strange to see all that but not .style, for example","msgtype":"m.text"},"ts":1553616058000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"you tell me which way to pursue you think","msgtype":"m.text"},"ts":1553616105000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"I guess having MathElement or MathMLElement makes sense, to avoid putting too much on Element","msgtype":"m.text"},"ts":1553616117000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"and then some kind of HTMLElementOrSVGElementOrMathMLElement mixin","msgtype":"m.text"},"ts":1553616128000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"defined in HTML, for all the shared stuff","msgtype":"m.text"},"ts":1553616137000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"and then we only put on element what is truly globally useful","msgtype":"m.text"},"ts":1553616159000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ok","msgtype":"m.text"},"ts":1553616241000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"bkardell: thanks for potentially driving this, I know it's been bugging people","msgtype":"m.text"},"ts":1553616270000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"let me start with posting to the math refresh group and then I expect we'll at some point have to do the HTMLElementOrSVGElementOrMathMLElement stuff","msgtype":"m.text"},"ts":1553616286000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"bkardell: could you post here if you've done so? I'd like to follow along","msgtype":"m.text"},"ts":1553617606000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"https://github.com/mathml-refresh/mathml/issues/83","msgtype":"m.text"},"ts":1553618109000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"bkardell: fwiw, CSSOM should use that very long name HTML mixin too","msgtype":"m.text"},"ts":1553618277000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"oh it is not implied, let me re-read","msgtype":"m.text"},"ts":1553618299000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"updated - better?","msgtype":"m.text"},"ts":1553618369000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"Ta","msgtype":"m.text"},"ts":1553618396000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I guess I am trying to say there are at least 3 specs we need to get moving on here so we better get started :-p","msgtype":"m.text"},"ts":1553618403000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"Heh","msgtype":"m.text"},"ts":1553618414000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"if you want to weigh in on the comment that came in already that might be good in steering?","msgtype":"m.text"},"ts":1553619115000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"Seems FrÃ©dÃ©ric got it covered","msgtype":"m.text"},"ts":1553619952000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hey wait... sorry, I am confused about something. So  some stuff was moved up to element from HTMLElement and now element defines .innerHTML, but not .innerText?","msgtype":"m.text"},"ts":1553626207000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"I was trying to find some issue in the gh but 'element' is hard to search for there and HTMLElement didn't seem to turn up something on this","msgtype":"m.text"},"ts":1553626507000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"bkardell: these are not necessarily principled decisions","msgtype":"m.text"},"ts":1553629304000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I'm just curious why not move innerText along with innerHTML/outerHTML?","msgtype":"m.text"},"ts":1553629346000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"bkardell: you could start with what you think makes sense and then see if itâ€™s worth the effort to get there","msgtype":"m.text"},"ts":1553629360000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"bkardell: innerText is quite special and somewhat legacy","msgtype":"m.text"},"ts":1553629391000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ah... interesting","msgtype":"m.text"},"ts":1553629400000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"textContent?","msgtype":"m.text"},"ts":1553629407000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"bkardell: we could move it perhaps, but itâ€™s work","msgtype":"m.text"},"ts":1553629416000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"bkardell: thatâ€™s on Node","msgtype":"m.text"},"ts":1553629427000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1553629438000,"senderName":"bkardell","senderId":"bkardell@irc"},
{"content":{"body":"ok makes a little more sense now","msgtype":"m.text"},"ts":1553629448000,"senderName":"bkardell","senderId":"bkardell@irc"}
]