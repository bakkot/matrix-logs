[
{"content":{"body":"mkwst, at 2018-11-08 06:08 UTC, MikeSmith said: the Origin Policy bug, added comment at https://bugs.chromium.org/p/chromium/issues/detail?id=901477#c14 with NetLog dump attached","msgtype":"m.text"},"ts":1542010749000,"senderName":"botie","senderId":"botie@irc"},
{"content":{"body":"MikeSmith: Thanks for that. It was quite helpful in debugging the issue. There's a patch out to address the problem, just waiting on a review.","msgtype":"m.text"},"ts":1542013402000,"senderName":"mkwst","senderId":"mkwst@irc"},
{"content":{"body":"Anyone around that can quickly review https://github.com/whatwg/fetch/pull/828? It's very short","msgtype":"m.text"},"ts":1542013873000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: ta!","msgtype":"m.text"},"ts":1542014631000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: cheers","msgtype":"m.text"},"ts":1542014825000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: but that was the whole point, no?","msgtype":"m.text"},"ts":1542039236000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"annevk: I was trying to lay out all the IDL changes, to see if people would have a problem with that.","msgtype":"m.text"},"ts":1542039297000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"of course, I'm assuming that the non IDL changes are relatively obvious, given the IDL changes.","msgtype":"m.text"},"ts":1542039350000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"fserb: how is anyone supposed to implement from an IDL sketch what Chrome would end up shipping?","msgtype":"m.text"},"ts":1542039351000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"they are not.","msgtype":"m.text"},"ts":1542039356000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"we are doing the spec work anyway","msgtype":"m.text"},"ts":1542039361000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"but if they agree with the IDL changes","msgtype":"m.text"},"ts":1542039366000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"we can move forward with the spec work","msgtype":"m.text"},"ts":1542039376000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"it's more of an OK to the roadmap","msgtype":"m.text"},"ts":1542039401000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"fserb: it sounded like you wanted to ship if they agree to IDL changes, which isn't really something I'm familiar with","msgtype":"m.text"},"ts":1542039407000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"fserb: at least per WHATWG process it's agreement on a concrete a change","msgtype":"m.text"},"ts":1542039441000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"what do you meant by that?","msgtype":"m.text"},"ts":1542039452000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"fserb: https://whatwg.org/working-mode#changes","msgtype":"m.text"},"ts":1542039470000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I don't see how what I said goes against what's there.","msgtype":"m.text"},"ts":1542039530000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"I putting forward a proposed IDL, followed by a bunch of actual spec changes with tests and implementation bugs.","msgtype":"m.text"},"ts":1542039553000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"it doesn't say anything about shipping does it?","msgtype":"m.text"},"ts":1542039586000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"like","msgtype":"m.text"},"ts":1542039616000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"maybe I'm missing something","msgtype":"m.text"},"ts":1542039640000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"fserb: so some time ago you wrote here \"Could you help me get some feedback from other browsers? It would unblock the intent to ship on Chrome.\"","msgtype":"m.text"},"ts":1542039655000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yes.","msgtype":"m.text"},"ts":1542039664000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"fserb: perhaps I misunderstood and you elided a bunch of steps in between","msgtype":"m.text"},"ts":1542039681000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"well, I won't stop doing the spec changes.","msgtype":"m.text"},"ts":1542039710000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"fserb: but that came across as if the spec changes wouldn't be done first","msgtype":"m.text"},"ts":1542039711000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ahn","msgtype":"m.text"},"ts":1542039720000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"gotcha","msgtype":"m.text"},"ts":1542039723000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"so you are saying that you don't want chrome to ship before all the spec changes are landed, is that it?","msgtype":"m.text"},"ts":1542039736000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"but is that a thing?","msgtype":"m.text"},"ts":1542039740000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"fserb: I think normally it's much more concrete what will ship, yes","msgtype":"m.text"},"ts":1542039757000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I mean, if the chrome API owners are comfortable with the public support around something, why wouldn't that be enough?","msgtype":"m.text"},"ts":1542039770000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"I mean","msgtype":"m.text"},"ts":1542039776000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"fserb: and we try to make that even better over time","msgtype":"m.text"},"ts":1542039777000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"if the spec work is considered trivial;","msgtype":"m.text"},"ts":1542039786000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"I see","msgtype":"m.text"},"ts":1542039793000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"\"more concrete\" than the IDL changes.","msgtype":"m.text"},"ts":1542039807000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"hmmmmm","msgtype":"m.text"},"ts":1542039809000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"okey","msgtype":"m.text"},"ts":1542039810000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"Yeah, this needs an actual processing model, how the various numbers end up allocated in different color spaces, etc.","msgtype":"m.text"},"ts":1542039836000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I was under the impression that, for this particular change, if we agree on the IDL changes, the rest is relatively trivial - in the sense that is more \"spec work\" than actual changing the meaning of something.","msgtype":"m.text"},"ts":1542039837000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"(we are not doing color spaces here, btw)","msgtype":"m.text"},"ts":1542039847000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"(is JUST higher precision backing storages)","msgtype":"m.text"},"ts":1542039858000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"but if that's not the case, then I agree with you","msgtype":"m.text"},"ts":1542039879000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"looks again","msgtype":"m.emote"},"ts":1542039912000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"fserb: wide gamut isn't different colors?","msgtype":"m.text"},"ts":1542039954000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"kinda, but not really. What we want to spec out is: you can create a backing storage with float16, in which case you are by default in extended SRGB color space.","msgtype":"m.text"},"ts":1542040019000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"Which means: from 0-1.0 behaves exactly like the current SRGB.","msgtype":"m.text"},"ts":1542040030000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"and outside that, well, it behaves like extended SRGB.","msgtype":"m.text"},"ts":1542040039000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"so it does have a different color space","msgtype":"m.text"},"ts":1542040049000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"but it's just a natural extension of the current one.","msgtype":"m.text"},"ts":1542040055000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"eventually we will work on a second step for this, which would be actual color space selection (P3, etc..). But the problem is: the color space selection thing is much more controversial.","msgtype":"m.text"},"ts":1542040109000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"fserb: but ImageData would presumably have a different layout?","msgtype":"m.text"},"ts":1542040113000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"fserb: and you'd have to define what happens if you putImageData from a different layout onto this backing and such","msgtype":"m.text"},"ts":1542040132000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"what do you mean by layout?","msgtype":"m.text"},"ts":1542040147000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"fserb: I'd also think we want to extend the ImageData constructor and not createImageData()","msgtype":"m.text"},"ts":1542040153000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"fserb: u8 vs u16?","msgtype":"m.text"},"ts":1542040164000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"f16","msgtype":"m.text"},"ts":1542040172000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"but we did extend the constructor, no?","msgtype":"m.text"},"ts":1542040188000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"we did both.","msgtype":"m.text"},"ts":1542040197000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"sorry, yes, my bad","msgtype":"m.text"},"ts":1542040207000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I guess I'm not sure on createImageData(), if we consider that historical at this point","msgtype":"m.text"},"ts":1542040221000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I'd be fine with that.","msgtype":"m.text"},"ts":1542040231000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"fserb: and CanvasPixelFormat has float16 but there's no such primitive in the web platform (other than IDL maybe)","msgtype":"m.text"},"ts":1542040268000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yes.","msgtype":"m.text"},"ts":1542040297000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"I'm up to change that too, if we have a better suggestion on how to surface this.","msgtype":"m.text"},"ts":1542040318000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"(I'm updating the bug with some of the answers here)","msgtype":"m.text"},"ts":1542040382000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"(For the ImageData layout, it's sort of what we mean by typedef (Uint8ClampedArray or Uint16Array or Float32Array) ImageDataArray;, right?","msgtype":"m.text"},"ts":1542040567000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"yeah I had missed that, my bad","msgtype":"m.text"},"ts":1542040578000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"what's unclear is how the numbers are filled in, but I suppose you can imagine to some extent","msgtype":"m.text"},"ts":1542040597000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"specially in the non obvious cases (when you ask for something different than the backing storage). yes.","msgtype":"m.text"},"ts":1542040620000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"I guess if things go beyond 255 that's somewhat clear (if that's how wide gamut works), but it's not clear for transparency for instance","msgtype":"m.text"},"ts":1542040658000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"fserb: in general what ends up being important for features in terms of web compat is how they behave in edge cases, so that's why when judging features to impl it helps a lot if those are crystal clear; if not you basically have to reverse engineer to compete, which is no fun (a lot of what WHATWG defines is exactly such reverse engineering to allow engines","msgtype":"m.text"},"ts":1542041055000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"to compete)","msgtype":"m.text"},"ts":1542041055000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I can see that.","msgtype":"m.text"},"ts":1542041188000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"but I feel like the edge cases are easier to change after an initial release (on Chrome side, at least). And moving forward to ship on chrome would mean, in practice, that if we go forward today it goes to stable in 3 months, right?","msgtype":"m.text"},"ts":1542041311000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"so what I thought was: oh, if we agree on the overall plan, those edge cases I can fix as the come.","msgtype":"m.text"},"ts":1542041335000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"and the reason I try to go this way","msgtype":"m.text"},"ts":1542041411000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"is because I thought it would remove pressure from the whatwg reviews","msgtype":"m.text"},"ts":1542041420000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"but I don't know... if it makes you uncomfortable, it's maybe not worth it","msgtype":"m.text"},"ts":1542041443000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"that said, even if we don't ship right now on Chrome, I think having an overall tracking bug with the roadmap is useful","msgtype":"m.text"},"ts":1542041619000,"senderName":"fserb","senderId":"fserb@irc"},
{"content":{"body":"I think the question is really whether, *for other canvas implementers*, it's obvious how to implement from the IDL. For annevk and me, it's not so obvious, so it seems like you're underdefining the feature in a way that makes it hard to evaluate. But maybe for people with their head in the canvas realm, it's clear.","msgtype":"m.text"},"ts":1542042148000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"fserb: yeah, the tracking issue is helpful","msgtype":"m.text"},"ts":1542042241000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"fserb: in general it seems a bit weird to me how canvas features often appear to be discussed elsewhere already","msgtype":"m.text"},"ts":1542042264000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"fserb: but maybe that wasn't the case for this","msgtype":"m.text"},"ts":1542042272000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: I'd like to think I know a fair bit about canvas, but maybe not","msgtype":"m.text"},"ts":1542042420000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: in other news, I'm on track towards removing most \"(ignoring parameters)\" in Fetch, maybe even all, but I really need to leave it for today","msgtype":"m.text"},"ts":1542042444000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Well, maybe not at the color spaces and backing store level, is what I meant? I certainly don't :)","msgtype":"m.text"},"ts":1542042446000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"\\o/","msgtype":"m.text"},"ts":1542042453000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: I've been trying to describe the backing store more formally, but left it unfinished as there was some other stuff blocking it","msgtype":"m.text"},"ts":1542042486000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ah nice OK, I guess just me then","msgtype":"m.text"},"ts":1542042502000,"senderName":"Domenic","senderId":"Domenic@irc"}
]