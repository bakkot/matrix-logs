[
{"content":{"body":"annevk: hi","msgtype":"m.text"},"ts":1523350994000,"senderName":"yhirano__","senderId":"yhirano__@irc"},
{"content":{"body":"yhirano__: hey","msgtype":"m.text"},"ts":1523351130000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Regarding https://github.com/whatwg/html/pull/3592, are you talking about https://html.spec.whatwg.org/multipage/browsing-the-web.html#traverse-the-history? or do you have other call sites in your mind?","msgtype":"m.text"},"ts":1523351190000,"senderName":"yhirano__","senderId":"yhirano__@irc"},
{"content":{"body":"yhirano__: the other one I'm unclear on is reloading","msgtype":"m.text"},"ts":1523351289000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yhirano__: it says to use the Document object's URL, but it also takes into account other state such as whether the Document object was created as the result of a POST","msgtype":"m.text"},"ts":1523351320000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yhirano__: which leads me to think it doesn't actually use a URL","msgtype":"m.text"},"ts":1523351354000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: https://html.spec.whatwg.org/#traverse-the-history gives a URL to the navigate algorithm. I can give a request with body and method set from the history entry instead, I think. As reloading reuses the previously used resource that will fix the reload case as well. Does it make sense?","msgtype":"m.text"},"ts":1523351491000,"senderName":"yhirano__","senderId":"yhirano__@irc"},
{"content":{"body":"yhirano__: I'm not sure; I suspect that's still wrong for browsers with a \"fast\" back implementation, where they keep the tree alive","msgtype":"m.text"},"ts":1523351583000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"sorry, what does the \"fast\" case mean?","msgtype":"m.text"},"ts":1523351763000,"senderName":"yhirano__","senderId":"yhirano__@irc"},
{"content":{"body":"yhirano__: Firefox doesn't always rebuild the node tree","msgtype":"m.text"},"ts":1523351886000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yhirano__: so you go back and you end up with the same node instances as before","msgtype":"m.text"},"ts":1523351924000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: So are you talking about the case where the first step is skipped (i.e., Document is alive), right?","msgtype":"m.text"},"ts":1523351933000,"senderName":"yhirano__","senderId":"yhirano__@irc"},
{"content":{"body":"yhirano__: the HTML Standard supports this to some extent, though it's buggy","msgtype":"m.text"},"ts":1523351945000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yhirano__: I'm not sure what you're referring to; none of these algorithms are particularly fresh for me","msgtype":"m.text"},"ts":1523351973000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I wish I had managed to refactor these at some point so this wouldn't be such a problem, but I didn't succeed :/","msgtype":"m.text"},"ts":1523352013000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: thank you, I will file a bug. I'm not sure I can / should fix this issue soon though.","msgtype":"m.text"},"ts":1523352521000,"senderName":"yhirano__","senderId":"yhirano__@irc"},
{"content":{"body":"Thanks, note that there might well be one already, there's loads of issues tagged with topic: navigate","msgtype":"m.text"},"ts":1523353402000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"gsnedders: I might take over https://github.com/w3c/web-platform-tests/pull/5525 if you don't mind. Do you have any thoughts on whether the tests are still good according to your standards a year later? E.g. tests that take 5 seconds seem a bit suspect to me.","msgtype":"m.text"},"ts":1523369970000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: the JS side of an interface callback is a non-function object, no?","msgtype":"m.text"},"ts":1523370046000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I am 95% sure that is the case, yes","msgtype":"m.text"},"ts":1523370061000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I see","msgtype":"m.text"},"ts":1523370071000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: in that case the concern still applies unfortunately","msgtype":"m.text"},"ts":1523370074000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I remember us going through this in some incumbent global thing","msgtype":"m.text"},"ts":1523370089000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: 5s is mostly just trying to avoid any chance of flakiness, esp. with debug, given it's essentially racing the network","msgtype":"m.text"},"ts":1523370111000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Domenic: go ahead and take it over, though","msgtype":"m.text"},"ts":1523370128000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Domenic: I only hadn't done anything because there's not a huge amount of interop and no spec","msgtype":"m.text"},"ts":1523370139000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"The bad thing with these complex things is that there's months that go by sometimes before a bit more progress is made and then having to remember it all is just...","msgtype":"m.text"},"ts":1523370140000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"gsnedders: yeah, bz and I both seem to have gotten annoyed enough at this that we're going to make there be a clear spec.","msgtype":"m.text"},"ts":1523370167000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"and tests","msgtype":"m.text"},"ts":1523370170000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"annevk: So for https://heycam.github.io/webidl/#call-a-user-objects-operation we just decided to use the realm of the object, despite ES vs. reality concerns.","msgtype":"m.text"},"ts":1523370185000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"It links to https://heycam.github.io/webidl/#dfn-associated-realm","msgtype":"m.text"},"ts":1523370195000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: yeah, I saw","msgtype":"m.text"},"ts":1523370207000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Domenic: hah","msgtype":"m.text"},"ts":1523370224000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"It seems the lower bar for an edge case is a 50-50 split across browsers","msgtype":"m.text"},"ts":1523378551000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Not even too mad with such an outcome","msgtype":"m.text"},"ts":1523378558000,"senderName":"annevk","senderId":"annevk@irc"}
]