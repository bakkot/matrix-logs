[
{"content":{"body":"AryehGregor: I have now violently disagreed with you publicly.","msgtype":"m.text"},"ts":1279153080000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"After consulting with Chrome team.  ^_^","msgtype":"m.text"},"ts":1279153081000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"The main problem is that a true gaussian simply isn't fast enough, and Safari has seen negative effects from trying to use one for all shadows.","msgtype":"m.text"},"ts":1279153200000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins, rest assured you will see a violent response in return, likely tomorrow.","msgtype":"m.text"},"ts":1279154220000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Ok.  I'm basing my position on feedback from our graphics people (smfr, who you talked to as well, plus jamesr and a newer dude who previous worked on game graphics), so I think I'm on pretty solid ground wrt the \"gaussians are too expensive\" argument.","msgtype":"m.text"},"ts":1279154280000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Then how does everyone (3/3 tested on two platforms) do them interoperably in SVG filters?  Aren't those applied just as often as CSS shadows?","msgtype":"m.text"},"ts":1279154340000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Slowly, that's how.  And no, they're not.","msgtype":"m.text"},"ts":1279154341000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Why not?","msgtype":"m.text"},"ts":1279154342000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Why aren't SVG shadows applied as often as CSS shadows?  I dunno.","msgtype":"m.text"},"ts":1279154400000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"In Firefox you can even apply SVG filters to HTML content.","msgtype":"m.text"},"ts":1279154401000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Yes?","msgtype":"m.text"},"ts":1279154402000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Well, anyway, the spec should at least give a pixel-perfect reference shadow, and tell browsers \"try to get close to that\", so at least they're shooting at the same target.","msgtype":"m.text"},"ts":1279154403000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Hixie, do you think it would be worth it at this point to change the meaning of canvas.shadowBlur to something sane, instead of the weird kink at 8?  My testing indicates that browsers aren't interoperable here at all, so authors can't be relying too much on the current behavior.  If the answer is \"no\" then I'll close the HTML bug I filed and file some bugs against browsers that don't do it right (Firefox/Chrome).","msgtype":"m.text"},"ts":1279154460000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I'm fine with providing an informative reference.","msgtype":"m.text"},"ts":1279154461000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Also, if Gaussian blurs really are too slow here, surely that needs to be changed in SVG too, especially if SVG filters are allowed for HTML content.","msgtype":"m.text"},"ts":1279154520000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Perhaps.","msgtype":"m.text"},"ts":1279154521000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I assume there's no problem at all with canvas, since you only need to compute the shadow once.","msgtype":"m.text"},"ts":1279154522000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"(which is why it's ironic that we have so much less interop there than with SVG . . .)","msgtype":"m.text"},"ts":1279154523000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Yeah, most likely the slowness is unimportant in <canvas>.","msgtype":"m.text"},"ts":1279154580000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I can't see why SVG would be less of a perf problem than CSS, except because people rarely use SVG, which seems likely to change when IE9 becomes widely used.","msgtype":"m.text"},"ts":1279154581000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Also, as authors have direct control over their <canvas> stuff, they can choose to do a less expensive shadow manually if they find they need to.","msgtype":"m.text"},"ts":1279154582000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I expect that's precisely the reason.","msgtype":"m.text"},"ts":1279154583000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"SVG has many things that are bad perf-hits.","msgtype":"m.text"},"ts":1279154640000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"You're saying authors rolling their own shadow in JavaScript would be cheaper than Gaussian blur?  I find that unlikely.","msgtype":"m.text"},"ts":1279154641000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"AryehGregor: With a sufficiently large shadow?  Could be.","msgtype":"m.text"},"ts":1279154642000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Maybe CSS has the problem that it can be reflowed, so you might have to reevaluate the shadow many times per second as something moves across the screen or whatnot.","msgtype":"m.text"},"ts":1279154643000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Whereas if it's an SVG, this is less likely?  I dunno.","msgtype":"m.text"},"ts":1279154644000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"That is a significatn part of the CSS issue, yes.  I dunno what the deal is with SVG, so I can't really comment.","msgtype":"m.text"},"ts":1279154700000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"will seek clarification on the list.","msgtype":"m.emote"},"ts":1279154701000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"(tomorrow)","msgtype":"m.text"},"ts":1279154702000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"In any case, I still don't have a problem with an impl that can afford to burn the cycles doing a more realistic shadow than gaussian blurs can provide.  ^_^","msgtype":"m.text"},"ts":1279154760000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"What does \"more realistic\" mean?  Like more physically accurate?  Is it possible for a normal person to tell if a box shadow is more or less physically accurate?","msgtype":"m.text"},"ts":1279154820000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Probably not.","msgtype":"m.text"},"ts":1279154821000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Authors are looking for a specific visual style, surely, not physical accuracy.","msgtype":"m.text"},"ts":1279154822000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"So it doesn't matter so much what it looks like, as long as it's interoperable.","msgtype":"m.text"},"ts":1279154823000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"But then, a normal person can't tell the difference between a CG shadow and Skia shadow for normal font-sizes and blurs.","msgtype":"m.text"},"ts":1279154824000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Are you talking text-shadow or box-shadow?  For boxes, I can tell the difference between how Safari and Chrome do canvas shadows on Windows 7 very clearly.","msgtype":"m.text"},"ts":1279154880000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"They're similar, though.","msgtype":"m.text"},"ts":1279154881000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"(Firefox is much more different, IIRC)","msgtype":"m.text"},"ts":1279154882000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"What size, and is it a difference of actual blur radius producing different-sized shadows?","msgtype":"m.text"},"ts":1279154883000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Just the example I gave before.","msgtype":"m.text"},"ts":1279154940000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Okay, so that's a width of somewhere between 10px and 15px.","msgtype":"m.text"},"ts":1279154941000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"When I say \"normal font-sizes and blurs\" I mean smaller than that.","msgtype":"m.text"},"ts":1279154942000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"shadows on heading text, frex, are usually less than 8px.","msgtype":"m.text"},"ts":1279155000000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Often just 2px or 4px, I think.","msgtype":"m.text"},"ts":1279155001000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"data:text/html,<!doctype html><style>* { margin: 0 }</style><canvas height=\"300\" width=\"300\"></canvas><script>window.addEventListener('load', function () { context = document.getElementsByTagName(\"canvas\")[0].getContext(\"2d\"); context.shadowBlur = 12.5; context.shadowOffsetX = 400; context.shadowOffsetY = 400; context.shadowColor = 'black'; context.fillRect(-300, -300, 100, 100); }, false);</script>","msgtype":"m.text"},"ts":1279155002000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Blur on text-shadows might be less noticeable.  I dunno.  I'd think that simpler blur effects would make sense where you're working with so few pixels.","msgtype":"m.text"},"ts":1279155120000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Anyway, I'm off for the night.","msgtype":"m.text"},"ts":1279155121000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"That's precisely my point.  ^_^  Specifying that we *must* use a gaussian, though, prevents that.","msgtype":"m.text"},"ts":1279155180000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"AryehGregor: i would recommend getting the relevant browser devs together and getting them to implement something, then telling me what they implemented and i'll update the spec","msgtype":"m.text"},"ts":1279156440000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"What kind of shadow implementation would be faster than a Gaussian?","msgtype":"m.text"},"ts":1279156560000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Lots.","msgtype":"m.text"},"ts":1279156561000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"The only thing I can imagine is if you have a sharper falloff so you can use a smaller filter","msgtype":"m.text"},"ts":1279156620000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Frex, a downscale+upscale to fuzz details.","msgtype":"m.text"},"ts":1279156621000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Or the \"just average all the pixels\" that I think Skia does.","msgtype":"m.text"},"ts":1279156622000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"um","msgtype":"m.text"},"ts":1279157460000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i can't log into the wiki","msgtype":"m.text"},"ts":1279157461000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"wtf","msgtype":"m.text"},"ts":1279157462000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"AryehGregor!!!! help!!! :-)","msgtype":"m.text"},"ts":1279157520000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i get \"There seems to be a problem with your login session; this action has been canceled as a precaution against session hijacking. Please hit \"back\" and reload the page you came from, then try again\"","msgtype":"m.text"},"ts":1279157580000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"oh, i know why","msgtype":"m.text"},"ts":1279157640000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"the /tmp directory is full","msgtype":"m.text"},"ts":1279157641000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"variable: you around?","msgtype":"m.text"},"ts":1279157700000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie, yeah?","msgtype":"m.text"},"ts":1279157701000,"senderName":"variable","senderId":"variable@irc"},
{"content":{"body":"let me clear /tmp","msgtype":"m.text"},"ts":1279157702000,"senderName":"variable","senderId":"variable@irc"},
{"content":{"body":"thanks","msgtype":"m.text"},"ts":1279157703000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":":-)","msgtype":"m.text"},"ts":1279157704000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie, I just got back from dinner ;)","msgtype":"m.text"},"ts":1279157705000,"senderName":"variable","senderId":"variable@irc"},
{"content":{"body":"looks like it's making huge temp files in /tmp and preventing other things on my account from working (like the whatwg wiki)","msgtype":"m.text"},"ts":1279157760000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"is there some way to move it to using ~/tmp instead?","msgtype":"m.text"},"ts":1279157761000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"that would be ideal","msgtype":"m.text"},"ts":1279157762000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"the quota there is far bigger","msgtype":"m.text"},"ts":1279157763000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie, yeah - I'm looking now","msgtype":"m.text"},"ts":1279157764000,"senderName":"variable","senderId":"variable@irc"},
{"content":{"body":"find: cannot delete ./sess_l4orkhk5sgiish85nqv7dpck27: Operation not permitted","msgtype":"m.text"},"ts":1279157820000,"senderName":"variable","senderId":"variable@irc"},
{"content":{"body":"yeah don't worry about the ones you don't own","msgtype":"m.text"},"ts":1279157821000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"woohoo, that worked","msgtype":"m.text"},"ts":1279157822000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"ok, wiki login is fixed","msgtype":"m.text"},"ts":1279157823000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Oh wow, got a totally sweet embossing effect.","msgtype":"m.text"},"ts":1279157880000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"was trying to make the spec's edge-detection example for <canvas> work at a usable speed for live video.","msgtype":"m.emote"},"ts":1279157881000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"sorry about leaving it like that - I didn't realise other stuff was broken","msgtype":"m.text"},"ts":1279157882000,"senderName":"variable","senderId":"variable@irc"},
{"content":{"body":"variable: no worries, nor did i :-)","msgtype":"m.text"},"ts":1279157883000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I'm going to back to work on it.","msgtype":"m.text"},"ts":1279157884000,"senderName":"variable","senderId":"variable@irc"},
{"content":{"body":"I'll monitor the wiki while I'm trying to move to ~/tmp","msgtype":"m.text"},"ts":1279157885000,"senderName":"variable","senderId":"variable@irc"},
{"content":{"body":"so long as df doesn't say /tmp is at 100% you should be fine","msgtype":"m.text"},"ts":1279157940000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"heh - ok","msgtype":"m.text"},"ts":1279158000000,"senderName":"variable","senderId":"variable@irc"},
{"content":{"body":"I'm thinking this might be *svns* tmp dir and not WebSVN","msgtype":"m.text"},"ts":1279158001000,"senderName":"variable","senderId":"variable@irc"},
{"content":{"body":"the files were owned by your user so that's unlikely","msgtype":"m.text"},"ts":1279158060000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"it could be the svn client run by websvn","msgtype":"m.text"},"ts":1279158061000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"exactly: websvn runs the svn command using system() IIRC ","msgtype":"m.text"},"ts":1279158062000,"senderName":"variable","senderId":"variable@irc"},
{"content":{"body":"ah yeah","msgtype":"m.text"},"ts":1279158063000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"could totally be that","msgtype":"m.text"},"ts":1279158064000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"try changing the TMP variable maybe?","msgtype":"m.text"},"ts":1279158120000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"environment variable, i mean","msgtype":"m.text"},"ts":1279158121000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie, erm - that variable has to be set in the PHP file.","msgtype":"m.text"},"ts":1279158122000,"senderName":"variable","senderId":"variable@irc"},
{"content":{"body":"hmm","msgtype":"m.text"},"ts":1279158123000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"if I set TMP in the env. the PHP file won't see it.","msgtype":"m.text"},"ts":1279158180000,"senderName":"variable","senderId":"variable@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1279158240000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i have no idea how to change this","msgtype":"m.text"},"ts":1279158241000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie, I'm looking now","msgtype":"m.text"},"ts":1279158242000,"senderName":"variable","senderId":"variable@irc"},
{"content":{"body":" /tmp might fill up a few times while I test to see if it worked but I'll fix it ","msgtype":"m.text"},"ts":1279158300000,"senderName":"variable","senderId":"variable@irc"},
{"content":{"body":"no worries","msgtype":"m.text"},"ts":1279158360000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hi! I'm working on a html5 project which includes sharing the webapp I'm making between users, I was reading about the shared workers but it is not supported by firefox yet","msgtype":"m.text"},"ts":1279159980000,"senderName":"titacgs","senderId":"titacgs@irc"},
{"content":{"body":"is there a work around for this?","msgtype":"m.text"},"ts":1279159981000,"senderName":"titacgs","senderId":"titacgs@irc"},
{"content":{"body":"Shared Workers aren't meant for sharing computation across users.  They're meant for sharing computation (or providing communication) across windows opened by a single user.","msgtype":"m.text"},"ts":1279160220000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"(By \"arent' meant for\" I mean \"can't be used for\".)","msgtype":"m.text"},"ts":1279160221000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"mmmmmm","msgtype":"m.text"},"ts":1279160400000,"senderName":"titacgs","senderId":"titacgs@irc"},
{"content":{"body":"I see","msgtype":"m.text"},"ts":1279160401000,"senderName":"titacgs","senderId":"titacgs@irc"},
{"content":{"body":"and how can I accomplish this? I mean what tools will help me to share information between users in real time or at least with a small difference of time","msgtype":"m.text"},"ts":1279160640000,"senderName":"titacgs","senderId":"titacgs@irc"},
{"content":{"body":"www.un.org is down.","msgtype":"m.text"},"ts":1279161120000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"well, not so much down, as it appears someone deleted all of it.","msgtype":"m.text"},"ts":1279161180000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"WebSVN has absolutely 0 documentation other than the comments in the source code. Great!","msgtype":"m.text"},"ts":1279161240000,"senderName":"variable","senderId":"variable@irc"},
{"content":{"body":"nice","msgtype":"m.text"},"ts":1279161241000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"sanity check: Opera doesn’t support linear gradients yet?","msgtype":"m.text"},"ts":1279173600000,"senderName":"boblet","senderId":"boblet@irc"},
{"content":{"body":"you mean CSS gradients?","msgtype":"m.text"},"ts":1279174380000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"roc: yep","msgtype":"m.text"},"ts":1279176180000,"senderName":"boblet","senderId":"boblet@irc"},
{"content":{"body":"doh!","msgtype":"m.text"},"ts":1279176181000,"senderName":"boblet","senderId":"boblet@irc"},
{"content":{"body":"TabAtkins_: yt?","msgtype":"m.text"},"ts":1279176960000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"so anyone want to write the CP for ISSUE-109?","msgtype":"m.text"},"ts":1279177860000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"that is, a counter-CP to http://www.w3.org/html/wg/wiki/ChangeProposals/ariasection","msgtype":"m.text"},"ts":1279177861000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"that proposal is so trivial","msgtype":"m.text"},"ts":1279178100000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"i'm not even sure how to respond to it","msgtype":"m.text"},"ts":1279178101000,"senderName":"abarth","senderId":"abarth@irc"},
{"content":{"body":"abarth: i wrote one","msgtype":"m.text"},"ts":1279178940000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"boblet, I don't think so","msgtype":"m.text"},"ts":1279179000000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: thanks (will cry a little now)","msgtype":"m.text"},"ts":1279179001000,"senderName":"boblet","senderId":"boblet@irc"},
{"content":{"body":"how about issues 74 and 105, the canvas accessibility ones","msgtype":"m.text"},"ts":1279179060000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"anyone want to make a case for the existing text?","msgtype":"m.text"},"ts":1279179061000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"or 32, the summary=\"\" one","msgtype":"m.text"},"ts":1279179180000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"gotta love http://www.w3.org/html/wg/wiki/ChangeProposals/canvasaccessibility","msgtype":"m.text"},"ts":1279179300000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"\"Currently the spec does not include requirements for implementers on how to provide accessible focus rectangles [...] The details of the proposal are [...] A change to drawFocusRing()\"","msgtype":"m.text"},"ts":1279179360000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I think I've been Change Proposal tired since before we started with them","msgtype":"m.text"},"ts":1279179480000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"my god this proposal is messed up","msgtype":"m.text"},"ts":1279179481000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"it has authoring conformance criteria literally in the middle of a UA algorithm","msgtype":"m.text"},"ts":1279179540000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"it uses the wrong coordinate system","msgtype":"m.text"},"ts":1279179541000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"it's self-contradictory in fact about the coordinate system it uses","msgtype":"m.text"},"ts":1279179542000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"it has an entirely useless set of arguments for the focus ring","msgtype":"m.text"},"ts":1279179600000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"sigh","msgtype":"m.text"},"ts":1279179601000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"so anything goes as a Change Proposal?","msgtype":"m.text"},"ts":1279179602000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"maybe we should like MikeSmith's text generator come up with something good","msgtype":"m.text"},"ts":1279179603000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"s/like/let/","msgtype":"m.text"},"ts":1279179660000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"my text generator has taken on a life of its own","msgtype":"m.text"},"ts":1279179661000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"somebody told me it opened up a twitter account for itself","msgtype":"m.text"},"ts":1279179662000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"seriously, read this:","msgtype":"m.text"},"ts":1279179720000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"http://lists.w3.org/Archives/Public/public-canvas-api/2010AprJun/att-0054/2dcontext10-June-7.html#dom-context-2d-setCaretSelectionRect","msgtype":"m.text"},"ts":1279179721000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"the definition of setCaretSelectionRect","msgtype":"m.text"},"ts":1279179780000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"read that algorithm","msgtype":"m.text"},"ts":1279179781000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"it has authoring criteria, it has asynchronous requirements, and then it ends with \"return true\"","msgtype":"m.text"},"ts":1279179782000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"and that's ignoring the main problem of course, which is that the entire method is completely useless","msgtype":"m.text"},"ts":1279179840000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"it does nothing if you don't have an AT, so nobody will ever use it","msgtype":"m.text"},"ts":1279179841000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"plus it doesn't even do anything useful if you DO have an AT, since who on earth has a selection area that is just a rectangle with no associated selected text?","msgtype":"m.text"},"ts":1279179842000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"oh lol","msgtype":"m.text"},"ts":1279179960000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"and then we have http://www.w3.org/html/wg/wiki/ChangeProposals/canvasaccessibilitynonav which introduces a content attribute to do what two lines of JS can do, even though to use it properly you'll still need to do those lines of JS but you'll -- in addition -- have to remove the attribute","msgtype":"m.text"},"ts":1279179961000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"W3C should give a spec writing 101","msgtype":"m.text"},"ts":1279179962000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"and then we have http://www.w3.org/html/wg/wiki/ChangeProposals/addimagemaptocanvas which adds usemap to <canvas> despite there being basically no use cases for which that's useful","msgtype":"m.text"},"ts":1279180020000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"this is ridiculous","msgtype":"m.text"},"ts":1279180021000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Crap, I need to follow up on the reply my email pointing out the problems with the canvas accessibility proposal that Hixie just mentioned","msgtype":"m.text"},"ts":1279182900000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"can you just write a CCP instead? :-)","msgtype":"m.text"},"ts":1279183020000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: I'm told that the point of getCaretSelectionRect is just to provide the coordinates of the caret, not actually anything to do with selection","msgtype":"m.text"},"ts":1279183021000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"well then how is it different to the API we have in the spec today?","msgtype":"m.text"},"ts":1279183022000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"and why does it talk about the selection rect?","msgtype":"m.text"},"ts":1279183023000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Unless I am misremembering (which is possible), it is supposed to cover the one character covered by the caret","msgtype":"m.text"},"ts":1279183080000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"But I didn't understand either so I am the wrong person to ask","msgtype":"m.text"},"ts":1279183081000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"carets don't usually cover characters...?","msgtype":"m.text"},"ts":1279183082000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i wish that the change proposal process had a more defined problem description stage","msgtype":"m.text"},"ts":1279183140000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"as distinct from the solution proposal stage","msgtype":"m.text"},"ts":1279183141000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"currently we just run around like headless chickens spouting random proposals without ever considering what problem we're solving","msgtype":"m.text"},"ts":1279183142000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I can't write a CCP because I don't know what a good solution is","msgtype":"m.text"},"ts":1279183143000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"it's just amateurish","msgtype":"m.text"},"ts":1279183144000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I just know that CP isn't one","msgtype":"m.text"},"ts":1279183145000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: the solution in the spec :-)","msgtype":"m.text"},"ts":1279183146000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"regarding caret/selection position...","msgtype":"m.text"},"ts":1279183260000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"Hixie: Maybe :) I think trying to make a CP for an a11y topic that I don't have a strong view on is setting myself up for a world of hurt I don't need","msgtype":"m.text"},"ts":1279183261000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"(1) there is definitely a use case for saying where in the text the caret or selection is, although you can represent that via the child DOM","msgtype":"m.text"},"ts":1279183320000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"I think the existing CP should be rejected on the basis that it is not a) workable or b) camera ready spec text","msgtype":"m.text"},"ts":1279183321000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"othermaciej: that's already handled by the child DOM","msgtype":"m.text"},"ts":1279183322000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"(2) there is also a use case for the screen position of the caret or selection, for assistive technologies that would automatically zoom/center that area","msgtype":"m.text"},"ts":1279183323000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"and that's already handled by the current API","msgtype":"m.text"},"ts":1279183324000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I got the impression that 2) was the interesting case here","msgtype":"m.text"},"ts":1279183325000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"focus area is a rough approximation","msgtype":"m.text"},"ts":1279183380000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"but may not be specific enough","msgtype":"m.text"},"ts":1279183381000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"the current API has a focus ring and a specific point for centering on","msgtype":"m.text"},"ts":1279183382000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"But I don't know why you need a width to do that","msgtype":"m.text"},"ts":1279183383000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"so you should redraw the focus ring every time the caret moves?","msgtype":"m.text"},"ts":1279183384000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"yes","msgtype":"m.text"},"ts":1279183440000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"if I wrote code like that in WebKit I would be fired","msgtype":"m.text"},"ts":1279183441000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"but maybe the standards are lower for Web developers","msgtype":"m.text"},"ts":1279183442000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"well if you wrote code that had a text box in canvas i'd fire you long before you screwed up the caret painting","msgtype":"m.text"},"ts":1279183443000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"but apparently that's what we're trying to solve","msgtype":"m.text"},"ts":1279183444000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"so","msgtype":"m.text"},"ts":1279183445000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"well, I advocated not supporting text drawing on the canvas at all, but apparently there are use cases for it","msgtype":"m.text"},"ts":1279183500000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"they're trying to make bespin work","msgtype":"m.text"},"ts":1279183501000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"the problem with an explicit API just to focus on a caret is that there's no reason to call it _other_ than accessibility","msgtype":"m.text"},"ts":1279183502000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"which means most people won't call it, and most that will will call it in a buggy fashion","msgtype":"m.text"},"ts":1279183503000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"and we'll be no better off and possible worse off than if we had nothing","msgtype":"m.text"},"ts":1279183504000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"might be more fruitful for a11y to work on DOM Range + CSS styling so bespin can move into a <textarea>","msgtype":"m.text"},"ts":1279183560000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"at least with the focus ring API there's a use case, it gets you free native focus ring drawing","msgtype":"m.text"},"ts":1279183561000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"It does seem odd to move the focus ring for every caret move though","msgtype":"m.text"},"ts":1279183562000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"i agree that it's suboptimal","msgtype":"m.text"},"ts":1279183563000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I don't think the bespin guys are remotely interested in moving off canvas, even if you made a good enough alternative","msgtype":"m.text"},"ts":1279183564000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"Bespin doesn't even have a focus ring","msgtype":"m.text"},"ts":1279183565000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"you would have to draw one offscreen to use this API","msgtype":"m.text"},"ts":1279183620000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"heck, even in native Mac apps it's not uncommon that some text areas don't get focus rings","msgtype":"m.text"},"ts":1279183680000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"I suppose one could make the optimistic assumption that so few people will write editable-text-on-canvas that they will be unusually good developers and unusually likely to get it right","msgtype":"m.text"},"ts":1279183681000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Although I am not really an optimist","msgtype":"m.text"},"ts":1279183682000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"if it made sense to have an API to draw a caret, that would combine with a useful operation","msgtype":"m.text"},"ts":1279183740000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"oh we could do that","msgtype":"m.text"},"ts":1279183741000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"but typically a caret would blink, and you can't handle that part for the developer","msgtype":"m.text"},"ts":1279183742000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"have it automatically determine the baseline positioning and so on","msgtype":"m.text"},"ts":1279183743000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"so you just give it the text x,y and the width of the text so far or something","msgtype":"m.text"},"ts":1279183800000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"well, I suppose you can with a fancy enough API (you would have to call them to paint what was behind the caret, or save it in a buffer)","msgtype":"m.text"},"ts":1279183801000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"You could even support the blink rate stuff that they want :)","msgtype":"m.text"},"ts":1279183802000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1279183803000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"ignore the call if it's during an off period","msgtype":"m.text"},"ts":1279183860000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i don't understand why we're discussing this in the change proposal system and not in the bug system","msgtype":"m.text"},"ts":1279183861000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"did i reject a change to the focus ring API at some point?","msgtype":"m.text"},"ts":1279183862000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I don't remember how canvas accessibility made it into the issue system","msgtype":"m.text"},"ts":1279183863000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"I believe it was before the current decision policy","msgtype":"m.text"},"ts":1279183864000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"Yes, I think it was in the \"someone says this is a problem\" phase","msgtype":"m.text"},"ts":1279183920000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Where everything got put in Tracker","msgtype":"m.text"},"ts":1279183921000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"if you come up with a better caret API, I bet you could convince the accessibility folks to withdraw that proposal by consensus","msgtype":"m.text"},"ts":1279183922000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"well i'd be happy to do so, but i can't do it on the timetable that this issue is on","msgtype":"m.text"},"ts":1279183980000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i have like 200 bugs and 1000 e-mails ahead of it in the queue","msgtype":"m.text"},"ts":1279183981000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"maybe if you sketch it out you could convince them to wait to see it (not as sure on that though)","msgtype":"m.text"},"ts":1279184040000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"agree that bugs/emails should be higher priority","msgtype":"m.text"},"ts":1279184041000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"my personal technical opinion (off-the-cuff, have not thought about it super deeply) is that both nonav and usemap proposals are redundant with things you can already do in the existing spec, but there is some chance they could be a little bit more convenient for some use cases","msgtype":"m.text"},"ts":1279184100000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"not sure which side of the leger that ends up on","msgtype":"m.text"},"ts":1279184101000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"i'd love to see any examples of them being used realistically that showed such cases","msgtype":"m.text"},"ts":1279184160000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I will agree the respective proposed spec text for both is not the best quality drafting","msgtype":"m.text"},"ts":1279184400000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"you are a master of the understatement","msgtype":"m.text"},"ts":1279184460000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hmm","msgtype":"m.text"},"ts":1279185300000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"bit.ly even ate my fragment identifier","msgtype":"m.text"},"ts":1279185301000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"wtf twitter","msgtype":"m.text"},"ts":1279185302000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hmm, only when using the expanding feature","msgtype":"m.text"},"ts":1279185360000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Is there still no feedback from the Bespin team?","msgtype":"m.text"},"ts":1279185720000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"http://talk.maemo.org/showthread.php?p=752460","msgtype":"m.text"},"ts":1279186020000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Opera Mobile for Maemo now with JIT on ARM","msgtype":"m.text"},"ts":1279186021000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Hixie, for P2P, making the API protocol agnostic seems sort of like the wrong optimization as the API is very trivial compared to the protocol, but I guess you mostly mean you don't want to do the protocol :)","msgtype":"m.text"},"ts":1279186320000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"is bespin still even being actively maintained?","msgtype":"m.text"},"ts":1279187280000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: Yes","msgtype":"m.text"},"ts":1279187760000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"They seem to rewrite parts of it every so often","msgtype":"m.text"},"ts":1279187761000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"I think they just rewrote the server in node.js","msgtype":"m.text"},"ts":1279187820000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: cool","msgtype":"m.text"},"ts":1279187821000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"dinnet know that","msgtype":"m.text"},"ts":1279187822000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"hsivonen: It was claimed that they had been contacted directly and didn't respond","msgtype":"m.text"},"ts":1279187823000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"MikeSmith: http://groups.google.com/group/bespin/browse_thread/thread/6de8c718d64232a0","msgtype":"m.text"},"ts":1279187940000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"\"A frustrating point for working group members is that this proposal has been out for month and it was not until after an entire vote for consensus was reached that we get a comment from Opera.\" heh, and how long have we been awaiting feedback for proposals included in the HTML5 draft? ...","msgtype":"m.text"},"ts":1279190400000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I kind of figure that if you lockl yourself away in a taskforce it is not that surprising when you get fewer comments","msgtype":"m.text"},"ts":1279190460000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Yeah, it seems like if you want broader comments earlier, you should use the main discussion fora and not create your own . . .","msgtype":"m.text"},"ts":1279191000000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"gfxFloat sigma = CurrentState().shadowBlur > 8 ? sqrt(CurrentState().shadowBlur) : CurrentState().shadowBlur / 2;","msgtype":"m.text"},"ts":1279192860000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"http://hg.mozilla.org/mozilla-central/file/5fda39cd703c/content/canvas/src/nsCanvasRenderingContext2D.cpp#l1855","msgtype":"m.text"},"ts":1279192861000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Maybe that's why Firefox renders canvas shadows wrong?","msgtype":"m.text"},"ts":1279192862000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"You know, sqrt(CurrentState().shadowBlur) instead of sqrt(2*CurrentState().shadowBlur)?","msgtype":"m.text"},"ts":1279192863000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Or am I reading the spec wrong?","msgtype":"m.text"},"ts":1279192920000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"doesn't think so, since the Mozilla behavior makes shadowBlur = 8 the same as shadowBlur = 16","msgtype":"m.emote"},"ts":1279193040000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"tests that","msgtype":"m.emote"},"ts":1279193100000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"It should be 2*","msgtype":"m.text"},"ts":1279193101000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Conveniently, I've already basically written a reftest for this using SVG.  :)","msgtype":"m.text"},"ts":1279193102000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Yep, indeed, 8 and 16 look identical.","msgtype":"m.text"},"ts":1279193103000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"What a silly bug.  This is exactly the sort of thing we need an official test suite for.","msgtype":"m.text"},"ts":1279193160000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Then 9 is less blurry than 8","msgtype":"m.text"},"ts":1279193161000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Yep!","msgtype":"m.text"},"ts":1279193162000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Noticeably so.","msgtype":"m.text"},"ts":1279193163000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"which is a bigger discontinuity than the second-order one the bug was complaining about :-)","msgtype":"m.text"},"ts":1279193164000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"works on a patch","msgtype":"m.emote"},"ts":1279193165000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"if you could stick that in a patch, I'll review it for you :-)","msgtype":"m.text"},"ts":1279193166000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"We already have tests, and http://test.w3.org/html/tests/submission/PhilipTaylor/canvas/index.2d.shadow.blur.html makes it obvious when it's not right","msgtype":"m.text"},"ts":1279193220000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"has to remind himself how to actually compile Mozilla and such, should post a bug today and will CC roc ","msgtype":"m.emote"},"ts":1279193221000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"We just need people to run the tests and check for differences and file bugs and fix them","msgtype":"m.text"},"ts":1279193222000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Guess so.  :)","msgtype":"m.text"},"ts":1279193223000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"(and to fix bugs in the tests, and to write more tests, etc)","msgtype":"m.text"},"ts":1279193224000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"I suspect Chrome is wrong because they deliberately use some kind of non-Gaussian blur, on the other hand.  Not sure on that, though.  Chrome is way further off the mark than Firefox.","msgtype":"m.text"},"ts":1279193400000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"(which is saying a lot, when Firefox makes all blurs above 8 41% bigger)","msgtype":"m.text"},"ts":1279193401000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"jgraham: thanks for link about Bespin roadmap","msgtype":"m.text"},"ts":1279193402000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"(You probably mean smaller)","msgtype":"m.text"},"ts":1279193460000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Er, yes, probably.","msgtype":"m.text"},"ts":1279193461000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"stares at code compiling.","msgtype":"m.emote"},"ts":1279193462000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"will have to get some real CPUs if he gets more into compiling stuff, or get distcc working . . . now if only I had managed to persuade other household members to upgrade their computers to Linux, that'd be like six extra CPUs.","msgtype":"m.emote"},"ts":1279193520000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"https://bugzilla.mozilla.org/show_bug.cgi?id=310682 - hmm, looks like I got the calculation right in my early patch but didn't notice it was broken in the rewritten one","msgtype":"m.text"},"ts":1279193580000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"wonders if anyone does reviews on what CPUs are best for compiling.","msgtype":"m.emote"},"ts":1279194780000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Philip`, do you know if there's any reason anyone would want blurRadius/2 instead of sqrt(2*blurRadius) at 8 and below?","msgtype":"m.text"},"ts":1279194900000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"AryehGregor: No, unless it happens to give you a nicer range of blurs for small integers or something like that","msgtype":"m.text"},"ts":1279195320000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Would it make any sense as an optimization?","msgtype":"m.text"},"ts":1279195321000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I think I recall someone from Safari saying they considered it as a bug . . .","msgtype":"m.text"},"ts":1279195322000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"That equation just seemed to be the best match for what Safari looked like (I don't know if it what's they do internally)","msgtype":"m.text"},"ts":1279195323000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"we just do what CG does","msgtype":"m.text"},"ts":1279195380000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"(By \"they\" I meant the CG people :-) )","msgtype":"m.text"},"ts":1279195381000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"supposedly the threshold below 8 pixels gives a smoother progression for different radius sizes","msgtype":"m.text"},"ts":1279195440000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"at least that is what I have heard","msgtype":"m.text"},"ts":1279195441000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"So CG's blur function accepts this weird blurRadius instead of just accepting sigma directly?","msgtype":"m.text"},"ts":1279195442000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Do you think it would make sense to change it at this point, since we don't have interop on canvas shadows anyway?","msgtype":"m.text"},"ts":1279195443000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"well, we could always munge the blur radius to do what CG would do (assuming it takes a float; not sure)","msgtype":"m.text"},"ts":1279195500000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"I do not know what actually results in good looking shadows","msgtype":"m.text"},"ts":1279195501000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"http://developer.apple.com/mac/library/documentation/GraphicsImaging/Reference/CGContext/Reference/reference.html#//apple_ref/c/func/CGContextSetShadow","msgtype":"m.text"},"ts":1279195502000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"\"A non-negative number specifying the amount of blur.\"","msgtype":"m.text"},"ts":1279195560000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Do you think it's worth pursuing, or should we just leave it alone?","msgtype":"m.text"},"ts":1279195561000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"   CGFloat blur","msgtype":"m.text"},"ts":1279195562000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I don't think I've ever seen anything saying the scale of the number","msgtype":"m.text"},"ts":1279195563000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"I guess it's easiest at this point to just leave it alone.","msgtype":"m.text"},"ts":1279195680000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"It won't be anywhere near the biggest wart in the web platform.","msgtype":"m.text"},"ts":1279195681000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"It seems like converging on what the spec says will take less effort than converging on anything else (given that some people already implement the spec), and I don't think it's a particularly user-hostile definition (it's just a bit weird and unjustified but people can easily guess sensible numbers)","msgtype":"m.text"},"ts":1279195682000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Yeah, makes sense.","msgtype":"m.text"},"ts":1279195740000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"If anyone asks we will blame Apple","msgtype":"m.text"},"ts":1279195800000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"(Users aren't any more likely to understand sigmas anyway)","msgtype":"m.text"},"ts":1279195801000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Then they will either direct their righteous anger there or assume the design was perfect and it was them who was wrong","msgtype":"m.text"},"ts":1279195860000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Depending on their relationship with Apple","msgtype":"m.text"},"ts":1279195861000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"and the current state of the RDF","msgtype":"m.text"},"ts":1279195862000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Hmm, my change didn't seem to fix Firefox.","msgtype":"m.text"},"ts":1279195980000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Have to go now, I guess I'll look later today.","msgtype":"m.text"},"ts":1279195981000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"did you rebuild everything?","msgtype":"m.text"},"ts":1279195982000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"I was using a fresh mozilla-central checkout.","msgtype":"m.text"},"ts":1279195983000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Obvious question: Are you running the version you compiled, not a window of another version of Firefox that was already running?","msgtype":"m.text"},"ts":1279196040000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Mozilla/5.0 (X11; Linux i686; en-US; rv:2.0b2pre) Gecko/20100715 Minefield/4.0b2pre","msgtype":"m.text"},"ts":1279196041000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"annevk: Can you change the favicon for the webapps tracker, please","msgtype":"m.text"},"ts":1279196042000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"It is highly confusing that it has the same icon as the tabs with the spec open","msgtype":"m.text"},"ts":1279196100000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"It does seem to look a bit closer, maybe.","msgtype":"m.text"},"ts":1279196220000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Okay, got to go now . . .","msgtype":"m.text"},"ts":1279196221000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"annevk: (the same icon with the colours inverted or something simple would be fine)","msgtype":"m.text"},"ts":1279196222000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"about meta/@name=viewport","msgtype":"m.text"},"ts":1279196340000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"which already seems to have become a de facto standard","msgtype":"m.text"},"ts":1279196341000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"are there any other meta/@name values that have rendering effects in browsers?","msgtype":"m.text"},"ts":1279196342000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"and who is it at Apple who came up that thing to begin with?","msgtype":"m.text"},"ts":1279196400000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"and whoever it was, why didn't they find it worthwhile to ask for feedback on it before unleashing it on the world?","msgtype":"m.text"},"ts":1279196401000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: to the person's credit at Apple, they at least used meta/@name and not meta/@http-equiv","msgtype":"m.text"},"ts":1279196402000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"MikeSmith: it was created in the stealth mode before the iPhone was announced","msgtype":"m.text"},"ts":1279196460000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"I see","msgtype":"m.text"},"ts":1279196461000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"hsivonen: yeah, glad it's not http-equiv at least","msgtype":"m.text"},"ts":1279196520000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"When using Flash as a fallback for HTML5 <video>, is it a good idea to use an additional <source> for the .flv (Flash Video) file, or not?","msgtype":"m.text"},"ts":1279196880000,"senderName":"Matjas","senderId":"Matjas@irc"},
{"content":{"body":"Matjas: a quick test shows that no browser is capable of playing .flv files through <video>, next to that, it's called Flash Video for a reason. I wouldn't include it","msgtype":"m.text"},"ts":1279198020000,"senderName":"Peter`","senderId":"Peter`@irc"},
{"content":{"body":"Peter`: Okay, thanks.","msgtype":"m.text"},"ts":1279198080000,"senderName":"Matjas","senderId":"Matjas@irc"},
{"content":{"body":"jgraham, if you make one","msgtype":"m.text"},"ts":1279198140000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jgraham, can you make a pink one?","msgtype":"m.text"},"ts":1279198141000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Probably. Where is the original?","msgtype":"m.text"},"ts":1279198200000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"http://simon.html5.org/sandbox/svg/whatwg","msgtype":"m.text"},"ts":1279198260000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"maybe I can do this myself... but I rather just wget and remove the favicon line","msgtype":"m.text"},"ts":1279198320000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"so I tried fiddling with that icon and everything fall apart","msgtype":"m.text"},"ts":1279199520000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Oh","msgtype":"m.text"},"ts":1279199820000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"I made you a new one http://hoppipolla.co.uk/410/favicon.ico","msgtype":"m.text"},"ts":1279199880000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"If you can work out how to use it without everything dying","msgtype":"m.text"},"ts":1279199881000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"that's more like purple, no?","msgtype":"m.text"},"ts":1279199940000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Picky","msgtype":"m.text"},"ts":1279199941000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"I used one of those web colour scheme generator things to find some pinkish colour that would vaugely work with the dark green","msgtype":"m.text"},"ts":1279200000000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Since they will typically be next to each other","msgtype":"m.text"},"ts":1279200001000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"hotpink it is","msgtype":"m.text"},"ts":1279200300000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"That is hideous","msgtype":"m.text"},"ts":1279200480000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"you asked for it","msgtype":"m.text"},"ts":1279200481000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"complaining about a favicon, come on ;p","msgtype":"m.text"},"ts":1279200540000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Also, it only seems to be working in Opera","msgtype":"m.text"},"ts":1279200541000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"that sounds like a cache issue","msgtype":"m.text"},"ts":1279200542000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Maybe. It is just showing the default in the others though","msgtype":"m.text"},"ts":1279200543000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"wfm in Chrome","msgtype":"m.text"},"ts":1279200600000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"doesn't work in Firefox","msgtype":"m.text"},"ts":1279200601000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"but Firefox does work on my site","msgtype":"m.text"},"ts":1279200602000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hmm","msgtype":"m.text"},"ts":1279200603000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"maybe still a cache issue","msgtype":"m.text"},"ts":1279200604000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"wfm in firefox","msgtype":"m.text"},"ts":1279200605000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"weird, doesn't in mine","msgtype":"m.text"},"ts":1279200660000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"even after explicitly loading /favicon.ico","msgtype":"m.text"},"ts":1279200661000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"but someone else can fix that","msgtype":"m.text"},"ts":1279200662000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Works in Chromium after clearing the cache","msgtype":"m.text"},"ts":1279200720000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"But I kinda wish it didn't :(","msgtype":"m.text"},"ts":1279200721000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"I used http://www.whatwg.org/images/logo.svg eventually","msgtype":"m.text"},"ts":1279200722000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jgraham, hehe","msgtype":"m.text"},"ts":1279200723000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Also, what happened to the chromium menu. It's insane","msgtype":"m.text"},"ts":1279200724000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"the one from Simon is far more clever but SVG rendering tools are just too crappy to support that","msgtype":"m.text"},"ts":1279200780000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"they need explicit paths and such","msgtype":"m.text"},"ts":1279200781000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I used Simon's one and then edited around some of the problems inkscape had","msgtype":"m.text"},"ts":1279200782000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Seriously, apart from having buttons in the menu, it has submenus with disclosure arrows that will always be hard against the right of the screen","msgtype":"m.text"},"ts":1279200840000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"So that the submenu will always open on the left","msgtype":"m.text"},"ts":1279200841000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"It must be a bug","msgtype":"m.text"},"ts":1279200842000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Or unfinished change at least","msgtype":"m.text"},"ts":1279200900000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"at least they do not have 4 menu depth","msgtype":"m.text"},"ts":1279200901000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"like selecting an encoding in Opera requires","msgtype":"m.text"},"ts":1279200902000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"selecting an encoding is something that should not be in the UI anyway","msgtype":"m.text"},"ts":1279200903000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"no user gets such bullshit","msgtype":"m.text"},"ts":1279200904000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yeah, but at least our menus don't have arrows to the right and open to the left","msgtype":"m.text"},"ts":1279200905000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"agreed that is weird","msgtype":"m.text"},"ts":1279200960000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"maybe they optimized for RTL?","msgtype":"m.text"},"ts":1279200961000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":":)","msgtype":"m.text"},"ts":1279200962000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Opera's menus often open off my screen so I can't see them at all :-(","msgtype":"m.text"},"ts":1279200963000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"though maybe that's my fault for having a non-rectangular multi-monitor desktop","msgtype":"m.text"},"ts":1279201020000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: File a bug?","msgtype":"m.text"},"ts":1279201021000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"is too lazy and doesn't know if it's even fixable on Linux","msgtype":"m.emote"},"ts":1279201080000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"i like this new icon","msgtype":"m.text"},"ts":1279201200000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"should make one for http://webforms2.org/ too","msgtype":"m.text"},"ts":1279201201000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"That is quite hideous.","msgtype":"m.text"},"ts":1279203240000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Philip`, do you understand what the call to gfxAlphaBoxBlur::CalculateBlurRadius() does?  Maybe that's where the problem is . . . ?  Even after the extra factor of sqrt(2), Firefox is still showing significantly too little blurring.","msgtype":"m.text"},"ts":1279203780000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"The problem with me trying to write a patch here is I have no idea what any of this stuff does.","msgtype":"m.text"},"ts":1279203840000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Is this doing a real Gaussian blur at all?","msgtype":"m.text"},"ts":1279203900000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"It looks like it's not.","msgtype":"m.text"},"ts":1279203960000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Hmm, there's an approximation specified in the SVG spec itself.","msgtype":"m.text"},"ts":1279203961000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"http://en.wikipedia.org/wiki/Box_blur","msgtype":"m.text"},"ts":1279204020000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"AryehGregor: I have no idea what gfxAlphaBoxBlur does","msgtype":"m.text"},"ts":1279204320000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"It sounds like it ought to be a sufficiently close approximation of a Gaussian blur that you shouldn't see much difference","msgtype":"m.text"},"ts":1279204321000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"(as long as you don't exceed SIGMA_MAX)","msgtype":"m.text"},"ts":1279204380000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"(which is at shadowBlur=312.5)","msgtype":"m.text"},"ts":1279204440000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"It looks like it does three box blurs, which is supposed to be within 3% of a true Gaussian blur.","msgtype":"m.text"},"ts":1279205040000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"But canvas is the only caller of that.","msgtype":"m.text"},"ts":1279205041000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"So maybe it's just buggy.","msgtype":"m.text"},"ts":1279205042000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"That seems quite possible","msgtype":"m.text"},"ts":1279205100000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"given that the output is not what you expect","msgtype":"m.text"},"ts":1279205101000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"is looking at the code for feGaussianBlur now, since that works right","msgtype":"m.emote"},"ts":1279205340000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Yay, approximating integer division by multiplication and bitshifts.","msgtype":"m.text"},"ts":1279205341000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":" * If all that math confuses you, this should convince you:","msgtype":"m.text"},"ts":1279205342000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":" * > perl -e 'for($N=1;(255*$N*int(0xFFFFFFFF/(255*$N)))>>24==255;++$N){}print\"$N\\n\"'","msgtype":"m.text"},"ts":1279205343000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":" * 66052","msgtype":"m.text"},"ts":1279205344000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"That looks a lot like line noise","msgtype":"m.text"},"ts":1279205520000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Yes, sometimes it's hard to tell the difference between Perl and line noise.","msgtype":"m.text"},"ts":1279205521000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Also, why does it do anything? Where is $N mutated?","msgtype":"m.text"},"ts":1279205580000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"++$N","msgtype":"m.text"},"ts":1279205581000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Oh wait","msgtype":"m.text"},"ts":1279205582000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"I was being dumb","msgtype":"m.text"},"ts":1279205583000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Remove the '$'s and it's basically C","msgtype":"m.text"},"ts":1279205584000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"It's not doing anything Perlish","msgtype":"m.text"},"ts":1279205585000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Cramming an entire program on one line with no spaces except where required by syntax strikes me as very Perlish.","msgtype":"m.text"},"ts":1279205640000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"(What source file is this in?)","msgtype":"m.text"},"ts":1279205641000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"I think the maths would be easier to follow...","msgtype":"m.text"},"ts":1279205642000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"content/svg/content/src/nsSVGFilters.cpp","msgtype":"m.text"},"ts":1279205643000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"(what is the program trying to show?)","msgtype":"m.text"},"ts":1279205644000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"AryehGregor: only thing that's doing that isn't C is that C would need a main() function to work","msgtype":"m.text"},"ts":1279205700000,"senderName":"workmad3","senderId":"workmad3@irc"},
{"content":{"body":"(oh, and would probably use printf rather than print)","msgtype":"m.text"},"ts":1279205701000,"senderName":"workmad3","senderId":"workmad3@irc"},
{"content":{"body":"workmad3, and printf(\"%d\\n\", N) instead of print \"$N\\n\".","msgtype":"m.text"},"ts":1279205702000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Yar.","msgtype":"m.text"},"ts":1279205703000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"it isn't a very perlish version of getting it all onto one line though :)","msgtype":"m.text"},"ts":1279205704000,"senderName":"workmad3","senderId":"workmad3@irc"},
{"content":{"body":"jgraham, the program is trying to show that 255*$N*int(0xFFFFFFFF/(255*N))>>24 == 255 for numbers up to a fairly large amount, of course.","msgtype":"m.text"},"ts":1279205760000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Except with some more parentheses.","msgtype":"m.text"},"ts":1279205761000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I don't know what the 255's are doing there, isn't ($N*int(0xFFFFFFFF/(255*$N)))>>25 == 1 equivalent?","msgtype":"m.text"},"ts":1279205820000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Oh, hmm, no.","msgtype":"m.text"},"ts":1279205880000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Because the 255* is before the bitshift.","msgtype":"m.text"},"ts":1279205881000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Also, it's 24 and not 25.","msgtype":"m.text"},"ts":1279205882000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"saw this trick before when deciphering the assembly output of a trivial C program he wrote for fun, but you'd think the compiler would do this for you.","msgtype":"m.emote"},"ts":1279205883000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Okay, but anyway, I am totally incapable of figuring out what's wrong here.  I'm comparing BoxBlur() in nsSVGFilters.cpp and BoxBlurHorizontal()/BoxBlurVertical() in gfxBlur.cpp, and it's all gibberish to me.","msgtype":"m.text"},"ts":1279206060000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"(there seems to be considerable code duplication here, incidentally)","msgtype":"m.text"},"ts":1279206120000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":" static const gfxFloat GAUSSIAN_SCALE_FACTOR = (3 * sqrt(2 * M_PI) / 4) * (3/2);","msgtype":"m.text"},"ts":1279206121000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Surely that's not going to work","msgtype":"m.text"},"ts":1279206122000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"because (3/2) == 1","msgtype":"m.text"},"ts":1279206123000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Hmmm.","msgtype":"m.text"},"ts":1279206124000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"The rest will get promoted to doubles but that won't","msgtype":"m.text"},"ts":1279206180000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"In nsSVGFilters.cpp, it says: double size = aStdDev*3*sqrt(2*M_PI)/4;","msgtype":"m.text"},"ts":1279206181000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Then: return PRUint32(floor(size + 0.5));","msgtype":"m.text"},"ts":1279206182000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Well, that part is irrelevant, I guess.","msgtype":"m.text"},"ts":1279206240000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"The SVG spec says: let d = floor(s * 3*sqrt(2*pi)/4 + 0.5)","msgtype":"m.text"},"ts":1279206241000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"So maybe (3/2) == 1 is actually intentional somehow.  :P","msgtype":"m.text"},"ts":1279206242000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I could try changing that and recompiling, may as well give it a shot.","msgtype":"m.text"},"ts":1279206300000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Hmm, what does this mean: // Blur radius is approximately 3/2 times the box-blur size","msgtype":"m.text"},"ts":1279206301000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"InflateRectForBlurDXY does the 3/2 for SVG box blurs (vs Gaussian blurs), I think","msgtype":"m.text"},"ts":1279206302000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Quite possible.","msgtype":"m.text"},"ts":1279206303000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Well, let me see.","msgtype":"m.text"},"ts":1279206304000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Isn't it nice how one can spot bugs without actually having any idea what the code does?","msgtype":"m.text"},"ts":1279206360000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Changing the (3/2) to 1.5 or whatever should make the blurs somewhat bigger, which is hopefully a change in the right direction","msgtype":"m.text"},"ts":1279206420000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"wonders how the convention of \"compilers should spam your terminal with spectacular quantities of incomprehensible garbage\" developed","msgtype":"m.emote"},"ts":1279206480000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"That's probably the Makefile, not the compiler","msgtype":"m.text"},"ts":1279206481000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Then replace \"compilers\" with \"the compilation process\" if you like.","msgtype":"m.text"},"ts":1279206482000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"except in the case of compiler errors in STL code, which is totally the compiler's fault for not caring about users","msgtype":"m.text"},"ts":1279206483000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Okay, this is much better.","msgtype":"m.text"},"ts":1279206540000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Makefiles aren't a process as much as a somewhat deterministic trainwreck ","msgtype":"m.text"},"ts":1279206541000,"senderName":"Workshiva","senderId":"Workshiva@irc"},
{"content":{"body":"Now the HTML is somewhat more blurry than the SVG.","msgtype":"m.text"},"ts":1279206542000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Unlike Opera, where they're identical.","msgtype":"m.text"},"ts":1279206543000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"(open http://aryeh.name/tmp/test.svg and http://aryeh.name/tmp/test.html, tab between them, should see no noticeable change)","msgtype":"m.text"},"ts":1279206600000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Is there some way to toggle the SVG between Gaussian and box blurs?","msgtype":"m.text"},"ts":1279206660000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Oh, sorry, it always does box blurs","msgtype":"m.text"},"ts":1279206661000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Yeah, apparently no one does actual Gaussian blurs, too expensive when box blurs look the same.","msgtype":"m.text"},"ts":1279206720000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"notes that http://test.w3.org/html/tests/submission/PhilipTaylor/canvas/index.2d.shadow.blur.html uses a true Gaussian for comparison","msgtype":"m.emote"},"ts":1279206900000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"What margin of error>","msgtype":"m.text"},"ts":1279206901000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"?","msgtype":"m.text"},"ts":1279206902000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"and in Opera they look very similar","msgtype":"m.text"},"ts":1279206960000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Various sources say doing three box blurs in the right way gets you within 3% of a true Gaussian blur.","msgtype":"m.text"},"ts":1279206961000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Without all the exponentiation and things.","msgtype":"m.text"},"ts":1279206962000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"(except blur.low has some faintly visible banding in Opera's canvas)","msgtype":"m.text"},"ts":1279206963000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Your tests look about the same actual vs. expected in my patched Firefox.","msgtype":"m.text"},"ts":1279206964000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"It's hard to say for sure, though.  It's easier to see when they're superimposed and you can flip back and forth.","msgtype":"m.text"},"ts":1279207020000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Right click -> open image in tab","msgtype":"m.text"},"ts":1279207021000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"And for the canvas?","msgtype":"m.text"},"ts":1279207022000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Oh, that has \"View Image\" too.","msgtype":"m.text"},"ts":1279207080000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"At least in Firefox.","msgtype":"m.text"},"ts":1279207081000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Yeah","msgtype":"m.text"},"ts":1279207082000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"It's quite handy :-)","msgtype":"m.text"},"ts":1279207083000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Okay, they're definitely different in patched Firefox, but much less so.","msgtype":"m.text"},"ts":1279207084000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Is the difference smaller than the difference between canvas and SVG?","msgtype":"m.text"},"ts":1279207140000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Or, equivalently, do Firefox and Opera agree on the SVG blur?","msgtype":"m.text"},"ts":1279207141000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Everything agrees on the SVG blur as far as I can tell in a side-by-side comparison.","msgtype":"m.text"},"ts":1279207142000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I haven't tried superimposing them.","msgtype":"m.text"},"ts":1279207143000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"tries that","msgtype":"m.emote"},"ts":1279207144000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"is getting confused as to what's identical and what's a little different and what's a lot different","msgtype":"m.emote"},"ts":1279207260000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"I can't tell any difference between Firefox, Chrome, or Opera's renderings of my SVG when superimposed, nor any difference before Opera's canvas and SVG.","msgtype":"m.text"},"ts":1279207320000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Okay","msgtype":"m.text"},"ts":1279207321000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"I notice a distinct difference between my SVG and HTML in Chrome and (patched) Firefox when superimposed.","msgtype":"m.text"},"ts":1279207322000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"And also in your test case.","msgtype":"m.text"},"ts":1279207323000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Opera doesn't give me an image link for the canvas images.  :(","msgtype":"m.text"},"ts":1279207440000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"javascript:location=c.toDataURL();","msgtype":"m.text"},"ts":1279207500000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"sighs","msgtype":"m.emote"},"ts":1279207501000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Yeah, they look basically identical superimposed in Opera.","msgtype":"m.text"},"ts":1279207560000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":". . . c is the same as document.getElementById(\"c\")?  Really?  How did I never know that?","msgtype":"m.text"},"ts":1279207680000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I guess it's not encouraged to use it for serious stuff in case something else shadows the element, though.","msgtype":"m.text"},"ts":1279207681000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Okay, I'll just post the patch, I guess.","msgtype":"m.text"},"ts":1279207682000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"AryehGregor: I think the c shortcut doesn't work in e.g. standards mode in Firefox","msgtype":"m.text"},"ts":1279208100000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Interesting.","msgtype":"m.text"},"ts":1279208101000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"so don't rely on it","msgtype":"m.text"},"ts":1279208102000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"https://bugzilla.mozilla.org/show_bug.cgi?id=578995","msgtype":"m.text"},"ts":1279210620000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Philip`, roc: ^^","msgtype":"m.text"},"ts":1279210800000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"AryehGregor: So, actually inverting the gaussian (so I can get a function that takes the blur length and spits out the stdev) requires the Lambert W.  You're mathier than I.  I assume that's dumb to calculate?","msgtype":"m.text"},"ts":1279210920000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins, Lambert W is not expressible in terms of elementary functions.  It's probably fairly expensive to calculate, but it should only need to be calculated once per declaration, so shouldn't be a big deal.","msgtype":"m.text"},"ts":1279210980000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Unless you're animating the shadow, of course.","msgtype":"m.text"},"ts":1279211040000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Heh, yeah.","msgtype":"m.text"},"ts":1279211041000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Then you're going to have to cheat.","msgtype":"m.text"},"ts":1279211042000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"You can iterate it with some Newton's method, but still.","msgtype":"m.text"},"ts":1279211043000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I suspect that'd probably converge quickly.","msgtype":"m.text"},"ts":1279211044000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Since we can make a good guess already.","msgtype":"m.text"},"ts":1279211045000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Why would you want to force people to do something so complex?","msgtype":"m.text"},"ts":1279211100000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Yes, apparently you need to use Newton's method here.  No x86 instruction for it or anything.","msgtype":"m.text"},"ts":1279211101000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Philip`, so they have some idea of what it does instead of passing in arbitrary numbers.","msgtype":"m.text"},"ts":1279211102000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I don't.  I'm just providing an example of how to calculate the stdev, if you wanted to use an actual gaussian.  If you wanted to use something else, that's probably easier to calculate.","msgtype":"m.text"},"ts":1279211103000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Or maybe harder.","msgtype":"m.text"},"ts":1279211160000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"It seems like in practice \"something else\" is an approximation of a Gaussian, so you still calculate the same sigma","msgtype":"m.text"},"ts":1279211220000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Maybe.  Anyway, getting an approximation within the range I want to specify is good enough.","msgtype":"m.text"},"ts":1279211221000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"wonders if there's any point in adding [parity-opera][parity-ie][parity-safari] to the whiteboard of his bug, or if it's just noise","msgtype":"m.emote"},"ts":1279211280000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Probably just noise.  It's a clear and simple spec violation in the first place.","msgtype":"m.text"},"ts":1279211340000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"AryehGregor: You should probably add an r+ flag if you want the patch reviewed","msgtype":"m.text"},"ts":1279211400000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"I assume you mean r?.","msgtype":"m.text"},"ts":1279211401000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Oh","msgtype":"m.text"},"ts":1279211402000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Yeah","msgtype":"m.text"},"ts":1279211403000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"I think me adding r+ to my own patch would be considered objectionable.","msgtype":"m.text"},"ts":1279211404000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Also, it's obviously r-, because 1) it doesn't fully fix the problem, and 2) it has no tests.","msgtype":"m.text"},"ts":1279211460000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"So it's not ready for review yet.","msgtype":"m.text"},"ts":1279211461000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Oh, okay then","msgtype":"m.text"},"ts":1279211462000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Surely it has at least as many tests as the original shadow implementation, though","msgtype":"m.text"},"ts":1279211463000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"and presumably they were good enough then","msgtype":"m.text"},"ts":1279211464000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"I see no tests for the original shadow implementation.  That was in September 2008, maybe they weren't as picky about tests then?","msgtype":"m.text"},"ts":1279211580000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"That's when nobody implemented shadows at all, isn't it?","msgtype":"m.text"},"ts":1279211640000,"senderName":"Workshiva","senderId":"Workshiva@irc"},
{"content":{"body":"When I submitted a patch a few months ago, I was told every new commit had to have patches, except for security fixes and things that were just impossible to test.","msgtype":"m.text"},"ts":1279211641000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I mean, had to have tests.","msgtype":"m.text"},"ts":1279211642000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"It untodoed the tests in https://bug310682.bugzilla.mozilla.org/attachment.cgi?id=335212","msgtype":"m.text"},"ts":1279211643000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"I'm pretty sure commits were always required to have patches.  You aren't supposed to make empty commits to send messages to readers of the commit mailing list or anything.","msgtype":"m.text"},"ts":1279211700000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Oh, I missed that.","msgtype":"m.text"},"ts":1279211701000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Yeah, it had test updates in a separate commit.","msgtype":"m.text"},"ts":1279211702000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Sometimes you are, e.g. if you forget to mention the bug number in an earlier commit :-)","msgtype":"m.text"},"ts":1279211703000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Hmm, that's lots of isPixel tests.  I wonder how the original tests were devised?  What reference was used?","msgtype":"m.text"},"ts":1279211820000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Because if they pass, they're probably wrong.  :)","msgtype":"m.text"},"ts":1279211821000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"(but maybe just incomplete)","msgtype":"m.text"},"ts":1279211822000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"The original tests are the ones I wrote","msgtype":"m.text"},"ts":1279211823000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"So why didn't they fail?","msgtype":"m.text"},"ts":1279211824000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I think I didn't have any testing the shape/size of the blur precisely, though","msgtype":"m.text"},"ts":1279211825000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"since everyone will approximate it and round differently etc so it's hard to know what tolerances to allow","msgtype":"m.text"},"ts":1279211880000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"so I just stuck with manual visual verification tests for that","msgtype":"m.text"},"ts":1279211881000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"How do I run those tests to see if they still pass with my patch applied?","msgtype":"m.text"},"ts":1279211940000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"http://test.w3.org/html/tests/submission/PhilipTaylor/canvas/index.2d.shadow.html","msgtype":"m.text"},"ts":1279211941000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"I think that's basically all of them, except for boring attribute getting/setting/etc","msgtype":"m.text"},"ts":1279212000000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"(Don't remember if I've made many changes since the version imported into Mozilla)","msgtype":"m.text"},"ts":1279212001000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Oh, interesting.","msgtype":"m.text"},"ts":1279212002000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Hixie: given html like <svg></svg> I think the current spec has a crash. The </svg> fails to switch the parser out of foreign content mode. The EOF then keeps popping until an <svg> or <math> token is reached, which never happens because there isn't one","msgtype":"m.text"},"ts":1279212060000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"(if someone else fancies checking that before I file a bug it would be appreciated)","msgtype":"m.text"},"ts":1279212061000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Well, my change causes no extra failures on that page.","msgtype":"m.text"},"ts":1279212062000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"A reftest between SVG and canvas would be cool, if that could be arranged.","msgtype":"m.text"},"ts":1279212120000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"It would make sense for them to share code anyway, I would think, no?","msgtype":"m.text"},"ts":1279212121000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"(but if not, probably they won't be pixel-perfect, oh well)","msgtype":"m.text"},"ts":1279212122000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Philip`, you need to make one big page with all your tests, that outputs the number passed and failed without requiring you to count.  Then everyone will start using your tests as a barometer of how good their HTML5 compliance is.","msgtype":"m.text"},"ts":1279212540000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"AryehGregor: I've already got http://philip.html5.org/tests/canvas/suite/tests/results.html","msgtype":"m.text"},"ts":1279212541000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Is that updated automatically?","msgtype":"m.text"},"ts":1279212600000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"No","msgtype":"m.text"},"ts":1279212601000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Well, partly","msgtype":"m.text"},"ts":1279212602000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"realizes that IE9 is actually up to PP3, not PP2, oops","msgtype":"m.emote"},"ts":1279212603000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"http://philip.html5.org/tests/canvas/suite/reportgenentry.html lets you run the tests","msgtype":"m.text"},"ts":1279212660000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"and if you're me and you're running it on localhost then you can save the results to a database","msgtype":"m.text"},"ts":1279212661000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"and then regenerate the results table","msgtype":"m.text"},"ts":1279212662000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Nice.","msgtype":"m.text"},"ts":1279212663000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"It'd be nice if the W3C Testing TF got a system running for more easily running tests and submitting results","msgtype":"m.text"},"ts":1279212720000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"looks pointedly at TabAtkins.","msgtype":"m.emote"},"ts":1279212721000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Yes, yes, I'm working on it.","msgtype":"m.text"},"ts":1279212722000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"so I haven't bothered trying to upload my own test harness there","msgtype":"m.text"},"ts":1279212723000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"TabAtkins: Work faster :-p","msgtype":"m.text"},"ts":1279212780000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"I try, but then I get distracted by shiny objects and CSS emails.","msgtype":"m.text"},"ts":1279212781000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"The fate of the web depends on you","msgtype":"m.text"},"ts":1279212782000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"o_O","msgtype":"m.text"},"ts":1279212783000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"notes that we are, indeed, fucked.","msgtype":"m.emote"},"ts":1279212784000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Philip`: fwiw webkit will be a loot greener in the next update of that page :)","msgtype":"m.text"},"ts":1279212840000,"senderName":"kling","senderId":"kling@irc"},
{"content":{"body":"lot*","msgtype":"m.text"},"ts":1279212841000,"senderName":"kling","senderId":"kling@irc"},
{"content":{"body":"kling: Yeah, I've been seeing lots of nice-looking commit messages :-)","msgtype":"m.text"},"ts":1279212842000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Interesting, Opera maxes out both cores while loading the full page.","msgtype":"m.text"},"ts":1279212900000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"At least part of the time.","msgtype":"m.text"},"ts":1279212901000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"(unless it's something else that's randomly running at the same time)","msgtype":"m.text"},"ts":1279212902000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Maybe it's just running an idle loop in a background thread, to trick you into thinking it's making full use of your hardware","msgtype":"m.text"},"ts":1279212903000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Those sneaky Europeans.","msgtype":"m.text"},"ts":1279212960000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Philip`: jresig was at one time working on something like that (test swarm?)","msgtype":"m.text"},"ts":1279213020000,"senderName":"jwalden","senderId":"jwalden@irc"},
{"content":{"body":"We don't need anything fancy.  For starters, just have a JavaScript framework that can be run as a regular old web page.","msgtype":"m.text"},"ts":1279213080000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"finds Chrome dev channel at 82.1%, Firefox nightly at 77.0%, Opera 10.60 at 79.8%","msgtype":"m.emote"},"ts":1279213380000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"maliciously gave three significant figures so Opera would be below 80%","msgtype":"m.emote"},"ts":1279213381000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"For the canvas tests?","msgtype":"m.text"},"ts":1279213560000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"This is for all of Philip`'s tests.","msgtype":"m.text"},"ts":1279214040000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"observes that gmail.com is the domain name of 50% of the addresses notified when he changes his bug, and the runner-up is . . . a 16-way tie between 16 different domains, most of them personal domains.  Interesting.","msgtype":"m.emote"},"ts":1279214640000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Gmail seems like the only webmail service you wouldn't be embarrassed to use","msgtype":"m.text"},"ts":1279214700000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"e.g. nobody would take you seriously if you were @hotmail.com","msgtype":"m.text"},"ts":1279214701000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"One of the addresses was @aol.com!","msgtype":"m.text"},"ts":1279214760000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I also know someone @earthlink.net.","msgtype":"m.text"},"ts":1279214761000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"(That person uses dial-up too.)","msgtype":"m.text"},"ts":1279214762000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Is hixie.ch slow for everyone?","msgtype":"m.text"},"ts":1279214763000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"No.","msgtype":"m.text"},"ts":1279214764000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Someone needs to make slowforeveryoneorjustme.com.","msgtype":"m.text"},"ts":1279214820000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Specifically the live dom viewer","msgtype":"m.text"},"ts":1279214821000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"... I was going to say that, AryehGregor !","msgtype":"m.text"},"ts":1279214822000,"senderName":"Workshiva","senderId":"Workshiva@irc"},
{"content":{"body":"Actauuly that is timing out in firefox","msgtype":"m.text"},"ts":1279214823000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Which is causing a YSOD","msgtype":"m.text"},"ts":1279214824000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Because of a missing entity in the error document","msgtype":"m.text"},"ts":1279214825000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Nm, yes it is running a bit slow.","msgtype":"m.text"},"ts":1279214880000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Okay, time to stop dilly-dallying and go study some math for the next half of my six-ish-hour day.  Back in a few hours.","msgtype":"m.text"},"ts":1279214881000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Writing on the @srcdoc proposal was making me wonder why a <sandbox @flags @length></sandbox> tag wouldn't work, then it hit me - encoding differences.  Many/most authors have no idea that there's a difference between bytes and characters, and the sort of minefield that most languages make them step through to deal with unicode properly.","msgtype":"m.text"},"ts":1279216200000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"also the fallback behavior would be insecure","msgtype":"m.text"},"ts":1279216380000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"Ah, right, yeah.","msgtype":"m.text"},"ts":1279216381000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"rather than failing","msgtype":"m.text"},"ts":1279216382000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"which may or may not be better, depending on your use case","msgtype":"m.text"},"ts":1279216383000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"if you are also doing server-side filtering and want sandbox for defense in depth, it would be better","msgtype":"m.text"},"ts":1279216440000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"it would also be oddly non-orthogonal for the parser to sometimes ignore a close tag in this case","msgtype":"m.text"},"ts":1279216500000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"<sandbox @secure-token> </sandbox @secure-token> could work but carries risk if the token is predictable","msgtype":"m.text"},"ts":1279216560000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"It would be a matter of \"consume @length characters from the stream - if the next 10 characters are not </sandbox>, ??? (abort, retry, continue)\"","msgtype":"m.text"},"ts":1279216561000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Yeah, the rest of the suggestions I remembered the problems with.","msgtype":"m.text"},"ts":1279216562000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I guess both that and encoding issues are harder to deal with correctly than the minimal escaping required for @srcdoc","msgtype":"m.text"},"ts":1279216620000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"Yes.","msgtype":"m.text"},"ts":1279216621000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"@srcdoc is just data: with slightly easier escaping and a slightly better fail model.","msgtype":"m.text"},"ts":1279216622000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"yeah, I guess a hypothetical inline sandboxing mechanism would have to not parse its contents normally at all, if it was going to put it in an imaginary frame","msgtype":"m.text"},"ts":1279216680000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"people also suggested these mechanisms as things would actually put the sandboxed content in the same document tree, but that makes it hard to implement anything other than just disabling of scripts in the sandboxed content","msgtype":"m.text"},"ts":1279216740000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"Presumably it would be \"consume @length characters, then continue consuming characters until </sandbox> is encountered, and stuff everything so consumed into a sandboxed context\".","msgtype":"m.text"},"ts":1279216741000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"It looks like the failure mode for @length would be subtle and insecure - you insert some Unicode characters so the server thinks length=1000 (bytes) and the browser reads 1000 characters which causes it to skip over </sandbox>...<sandbox> into the next comment where you carefully insert your own </sandbox> and break out","msgtype":"m.text"},"ts":1279216742000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"fancier sandbox flag like unique origin would be harder","msgtype":"m.text"},"ts":1279216743000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"But (1) that makes it easy to eat the entire page if you compute it wrong, and (2) it makes it easy to just say length=0 because it \"always works\" until someone malicious puts </sandbox> in their content.","msgtype":"m.text"},"ts":1279216744000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Philip`: Yeah, all sorts of issues around @length.  They just weren't immediately obvious, so I had to spend some time thinking about it.","msgtype":"m.text"},"ts":1279216800000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"length=0 doesn't always work - it would expect the </sandbox> tag immediately and go into failure mode (whatever that is)","msgtype":"m.text"},"ts":1279216801000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"length=0 is assuming my \"forgiving\" mode of seeking forward to the next </sandbox>.","msgtype":"m.text"},"ts":1279216860000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"if you don't find a </sandbox> tag in the right place, presumably the only safe thing to do is eat the rest of the page","msgtype":"m.text"},"ts":1279216861000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"ah","msgtype":"m.text"},"ts":1279216862000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"Because the strict mode could only, um, kill the page?","msgtype":"m.text"},"ts":1279216863000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"doesn't think security and forgiveness mix well","msgtype":"m.emote"},"ts":1279216864000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"using <sandbox length=0> with those semantics would add no security whatsoever","msgtype":"m.text"},"ts":1279216865000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"Exactly.","msgtype":"m.text"},"ts":1279216866000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"So, that's junked.","msgtype":"m.text"},"ts":1279216867000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"(The problem is it *appears* to work just fine, until the obvious exploit happens.)","msgtype":"m.text"},"ts":1279216920000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"any plausible @length proposal would need to not have such an escape clause","msgtype":"m.text"},"ts":1279216980000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"Yes.","msgtype":"m.text"},"ts":1279216981000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I think the main problem with nonzero length is the bytes vs. characters trap as discussed","msgtype":"m.text"},"ts":1279216982000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"And if the failure mode is \"eat the page\" and it only happens in rare cases, that's not very good.","msgtype":"m.text"},"ts":1279217040000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I wonder how tricky it is to escape any </sandbox> tags vs. the escaping required for @srcdoc","msgtype":"m.text"},"ts":1279217041000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"A decent bit.","msgtype":"m.text"},"ts":1279217042000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"s/</&lt;/g vs s/\"/&quot;/g","msgtype":"m.text"},"ts":1279217100000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Especially if you allow *only* </sandbox> or every valid syntactic variant.","msgtype":"m.text"},"ts":1279217101000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"is there any way to stick one in that won't appear in an obvious literal search?","msgtype":"m.text"},"ts":1279217102000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"Isn't something like <  /  sandbox  > allowed?","msgtype":"m.text"},"ts":1279217103000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"The problem with only requiring escaping of </sandbox> is that people will forget to escape it, and then won't notice until they're attacked","msgtype":"m.text"},"ts":1279217104000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: You can't just generally escape <, because that defeats the entire purpose of allowing markup, which is why sandbox exists in the first place.","msgtype":"m.text"},"ts":1279217160000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"if you fail to escape quotes in @srcdoc I guess you notice immediately","msgtype":"m.text"},"ts":1279217161000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"whereas with @srcdoc, they'll notice as soon as they try to write any \" character","msgtype":"m.text"},"ts":1279217162000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"which is likely to happen in common usage","msgtype":"m.text"},"ts":1279217163000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"othermaciej: Precisely - quotes are common, and will fail with non-malicious content.","msgtype":"m.text"},"ts":1279217164000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"And will fail in an obvious way.","msgtype":"m.text"},"ts":1279217165000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"has dealt with forgetting to escape quotes before - it's really easy to see what you did wrong.","msgtype":"m.emote"},"ts":1279217220000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"It'll be obvious if they have a syntax-highlighting view-source feature, at least","msgtype":"m.text"},"ts":1279217221000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"I mean it's obvious in the page itself, when you have a sentence cut off like \"And I think it isn\".","msgtype":"m.text"},"ts":1279217280000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins: Why can't you generally escape <, and define <sandbox> so that it unescapes the content before inserting into an iframe for rendering?","msgtype":"m.text"},"ts":1279217281000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: I suppose that fixes the fallback for <sandbox>, but not the other issues with @length.","msgtype":"m.text"},"ts":1279217282000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins: People don't use single-quotes for attributes","msgtype":"m.text"},"ts":1279217283000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: Yes they do?","msgtype":"m.text"},"ts":1279217340000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Much less than double-quotes","msgtype":"m.text"},"ts":1279217341000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Okay, sure, but double-quotes are still pretty common in content.","msgtype":"m.text"},"ts":1279217342000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"single-quotes all the time to avoid hitting shift.","msgtype":"m.emote"},"ts":1279217343000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"(I forget the numbers but I think there was well over 10x difference in popularity of \" vs ')","msgtype":"m.text"},"ts":1279217344000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Maybe we should use e as the sandbox delimiter","msgtype":"m.text"},"ts":1279217460000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Heh.","msgtype":"m.text"},"ts":1279217461000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"so that people are extremely likely to notice when they forget it","msgtype":"m.text"},"ts":1279217462000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"That fails for chinese!","msgtype":"m.text"},"ts":1279217463000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"unless they're Chinese","msgtype":"m.text"},"ts":1279217464000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Yeah :-(","msgtype":"m.text"},"ts":1279217465000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Do statistical analysis of the page's textContent and escape on the top 5 characters in the histogram.","msgtype":"m.text"},"ts":1279217520000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Just hard-code it based on TLD","msgtype":"m.text"},"ts":1279217521000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"What about data:?","msgtype":"m.text"},"ts":1279217580000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Or localhost, I suppose.  Intranets in general.","msgtype":"m.text"},"ts":1279217581000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Base it on the user's locale","msgtype":"m.text"},"ts":1279217582000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Add a series of submenus to let users override the default if it's wrong","msgtype":"m.text"},"ts":1279217640000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Anyway, @srcdoc still seems like the least bad option","msgtype":"m.text"},"ts":1279217641000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Indeed.","msgtype":"m.text"},"ts":1279217760000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"also expects @length to fail from authors, frex, measuring length and *then* escaping & or something.","msgtype":"m.emote"},"ts":1279217820000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"<select id=\"intCountriesList\" name=\"intCountriesList\" size=\"5\"","msgtype":"m.text"},"ts":1279218180000,"senderName":"dandaman","senderId":"dandaman@irc"},
{"content":{"body":"              onchange=\"regionsOrCities($('intCountriesList').value)\" style=\"height: 63px;\">","msgtype":"m.text"},"ts":1279218181000,"senderName":"dandaman","senderId":"dandaman@irc"},
{"content":{"body":"        <option value=\"\" title=\"--Select Country--\">--Select Country--</option>","msgtype":"m.text"},"ts":1279218182000,"senderName":"dandaman","senderId":"dandaman@irc"},
{"content":{"body":"      </select>","msgtype":"m.text"},"ts":1279218183000,"senderName":"dandaman","senderId":"dandaman@irc"},
{"content":{"body":"my onchange isnt doing anything?","msgtype":"m.text"},"ts":1279218184000,"senderName":"dandaman","senderId":"dandaman@irc"},
{"content":{"body":"minus a question mark, anyone have an idea","msgtype":"m.text"},"ts":1279218185000,"senderName":"dandaman","senderId":"dandaman@irc"},
{"content":{"body":"Do you unfocus the select?","msgtype":"m.text"},"ts":1279218186000,"senderName":"Workshiva","senderId":"Workshiva@irc"},
{"content":{"body":"yea","msgtype":"m.text"},"ts":1279218187000,"senderName":"dandaman","senderId":"dandaman@irc"},
{"content":{"body":"but i click back into it","msgtype":"m.text"},"ts":1279218240000,"senderName":"dandaman","senderId":"dandaman@irc"},
{"content":{"body":"But you don't need the $(), you can just use this.value (or even value)","msgtype":"m.text"},"ts":1279218241000,"senderName":"Workshiva","senderId":"Workshiva@irc"},
{"content":{"body":"Does @onchange=\"alert('foo')\" work?","msgtype":"m.text"},"ts":1279218242000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"hold on","msgtype":"m.text"},"ts":1279218243000,"senderName":"dandaman","senderId":"dandaman@irc"},
{"content":{"body":"TabAtkins: yeah alert foo works","msgtype":"m.text"},"ts":1279218300000,"senderName":"dandaman","senderId":"dandaman@irc"},
{"content":{"body":"i didnt have tha @ symbol though","msgtype":"m.text"},"ts":1279218301000,"senderName":"dandaman","senderId":"dandaman@irc"},
{"content":{"body":"Yeah, that's just me referring to an attribute.","msgtype":"m.text"},"ts":1279218360000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"kk","msgtype":"m.text"},"ts":1279218361000,"senderName":"dandaman","senderId":"dandaman@irc"},
{"content":{"body":"What about onchange=\"alert(this.value)\"?","msgtype":"m.text"},"ts":1279218362000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"yep","msgtype":"m.text"},"ts":1279218420000,"senderName":"dandaman","senderId":"dandaman@irc"},
{"content":{"body":"that works","msgtype":"m.text"},"ts":1279218421000,"senderName":"dandaman","senderId":"dandaman@irc"},
{"content":{"body":"Then try onchange=\"regionsOrCities(this.value)\"","msgtype":"m.text"},"ts":1279218422000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"(Note that the jQuery object returned by $('intCountriesList') doesn't have a .value property, though it does have a .value() method.)","msgtype":"m.text"},"ts":1279218480000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"tried that, didnt work","msgtype":"m.text"},"ts":1279218481000,"senderName":"dandaman","senderId":"dandaman@irc"},
{"content":{"body":"im gonna try fiddling around with the function","msgtype":"m.text"},"ts":1279218482000,"senderName":"dandaman","senderId":"dandaman@irc"},
{"content":{"body":"Well, you've isolated the problem at least.  It's with the function, not your onchange.","msgtype":"m.text"},"ts":1279218540000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Shouldn't it be $('#intCountriesList')?","msgtype":"m.text"},"ts":1279218541000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"its the function","msgtype":"m.text"},"ts":1279218542000,"senderName":"dandaman","senderId":"dandaman@irc"},
{"content":{"body":"Depends; if it's Prototype, no.","msgtype":"m.text"},"ts":1279218543000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Maybe Prototype has .value, I dunno.","msgtype":"m.text"},"ts":1279218544000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"ty for the help","msgtype":"m.text"},"ts":1279218600000,"senderName":"dandaman","senderId":"dandaman@irc"},
{"content":{"body":"np","msgtype":"m.text"},"ts":1279218601000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"god damn this channel is so much more useful than C++ or C, those Aholes just call me a retard constantly","msgtype":"m.text"},"ts":1279218602000,"senderName":"dandaman","senderId":"dandaman@irc"},
{"content":{"body":"Testing with alert() is the equivalent of debugging with printf.","msgtype":"m.text"},"ts":1279218603000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Not best practice, but damned if it doesn't work.","msgtype":"m.text"},"ts":1279218604000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"ill keep it in mind, thanks","msgtype":"m.text"},"ts":1279218660000,"senderName":"dandaman","senderId":"dandaman@irc"},
{"content":{"body":"wouldn't recommend going to a c++ channel for javascript help in the first place.","msgtype":"m.emote"},"ts":1279218661000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"i meant for c++ help","msgtype":"m.text"},"ts":1279218720000,"senderName":"dandaman","senderId":"dandaman@irc"},
{"content":{"body":"ok back to work, thanks again","msgtype":"m.text"},"ts":1279218721000,"senderName":"dandaman","senderId":"dandaman@irc"},
{"content":{"body":"The reasoning against <sandbox content=[base64-encoded]> is just that base64 makes things considerably larger, right?  Are there other security considerations I don't get?","msgtype":"m.text"},"ts":1279218722000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Well, content-in-base64-in-attributes is presumably even more of an antipattern than content-in-attributes.","msgtype":"m.text"},"ts":1279218780000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"it's certainly no better, although it requires 0 additional escaping","msgtype":"m.text"},"ts":1279218781000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"though if you are base-64 encoding you may as well use a data: attribute so no new feature would really be needed","msgtype":"m.text"},"ts":1279218782000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"Yeah, I don't see the gain","msgtype":"m.text"},"ts":1279218840000,"senderName":"Workshiva","senderId":"Workshiva@irc"},
{"content":{"body":"A data: url used in <iframe @src> is automatically unique-origin, right? (Though presumably we could change that, so @sandbox's origin flag could actually have an effect.)","msgtype":"m.text"},"ts":1279218960000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"[100715 13:13:39] <Philip`> TabAtkins: Why can't you generally escape <, and define <sandbox> so that it unescapes the content before inserting into an iframe for rendering? <-- This was my suggestion, which I think I came up with before srcdoc was added to the spec, or certainly before I knew about it.  But srcdoc is a better solution.","msgtype":"m.text"},"ts":1279219140000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"AryehGregor: That's just a solution to the bad-fallback problem, though.  It doesn't solve any of the other problems.","msgtype":"m.text"},"ts":1279219141000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"No, it solves all the same problems srcdoc does.","msgtype":"m.text"},"ts":1279219200000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Well, what happens if the parser sees <sandbox><b>foo!</b></sandbox>?","msgtype":"m.text"},"ts":1279219201000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"If it sees <>\"'& unescaped, it consumes everything up to the next </sandbox> and displays the iframe as empty or with an error message or something.","msgtype":"m.text"},"ts":1279219260000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"This means that lack of escaping will be quickly caught, same as srcdoc.","msgtype":"m.text"},"ts":1279219261000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Although if it's not caught, then of course it will be vulnerable, same as srcdoc (unless you eat the page).","msgtype":"m.text"},"ts":1279219262000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"with the track record of people escaping <>\"'& i'd say base64 encoding would be a safer solution","msgtype":"m.text"},"ts":1279219320000,"senderName":"wirepair","senderId":"wirepair@irc"},
{"content":{"body":"And what if the user content is \"<b>Foo!</b></sandbox><script src=evil></script>\"?","msgtype":"m.text"},"ts":1279219321000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins exactly ;)","msgtype":"m.text"},"ts":1279219322000,"senderName":"wirepair","senderId":"wirepair@irc"},
{"content":{"body":"With srcdoc, what if the user content is: \"></sandbox><script src=evil></script>","msgtype":"m.text"},"ts":1279219323000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"i do pen-testing / security research for a living, and trust me, escaping/encoding \"> seems to be beyond a lot of people","msgtype":"m.text"},"ts":1279219380000,"senderName":"wirepair","senderId":"wirepair@irc"},
{"content":{"body":"If there's no escaping, you're screwed, sure.  But if it fails fast on innocuous content with no escaping, people will escape.","msgtype":"m.text"},"ts":1279219381000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I think that people using \" in their comments is more common than people using <, personally.","msgtype":"m.text"},"ts":1279219382000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I said it should fail on \" for exactly that reason.","msgtype":"m.text"},"ts":1279219383000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"But it may not be a hugely significant difference.","msgtype":"m.text"},"ts":1279219384000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Even though there's technically no reason it should have to.","msgtype":"m.text"},"ts":1279219385000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Oh, I see.","msgtype":"m.text"},"ts":1279219386000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"(I mean, no reason you'd need to escape \" otherwise.)","msgtype":"m.text"},"ts":1279219387000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"And ' too, even.","msgtype":"m.text"},"ts":1279219388000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I missed that part, yeah.","msgtype":"m.text"},"ts":1279219389000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Base64 means you need to understand encodings","msgtype":"m.text"},"ts":1279219390000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"So it will fail even faster than srcdoc.","msgtype":"m.text"},"ts":1279219391000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"(since you have to apply it to bytes, and have to agree with the browser on the interpretation of those bytes)","msgtype":"m.text"},"ts":1279219440000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"ah right.","msgtype":"m.text"},"ts":1279219441000,"senderName":"wirepair","senderId":"wirepair@irc"},
{"content":{"body":"which seems like a pain","msgtype":"m.text"},"ts":1279219442000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"srcdoc in general seems like a pain though","msgtype":"m.text"},"ts":1279219443000,"senderName":"wirepair","senderId":"wirepair@irc"},
{"content":{"body":";)","msgtype":"m.text"},"ts":1279219444000,"senderName":"wirepair","senderId":"wirepair@irc"},
{"content":{"body":"wonders if having to escape <>&'\" is worth the convenience of having the content as \"real\" elements.","msgtype":"m.emote"},"ts":1279219500000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"With @srcdoc there's no additional character encoding issue over what's already needed for the rest of your content","msgtype":"m.text"},"ts":1279219501000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"what exactly is the benefit of having the data inline as opposed to it being an external document?","msgtype":"m.text"},"ts":1279219502000,"senderName":"wirepair","senderId":"wirepair@irc"},
{"content":{"body":"Saving a network request.","msgtype":"m.text"},"ts":1279219503000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"And saving authoring complexity.","msgtype":"m.text"},"ts":1279219560000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"(Possibly *many*, if you have, say, 200 blog comments that each need to be sandboxed.)","msgtype":"m.text"},"ts":1279219561000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"So you don't have to write a separate script that will repeat all your permissions checks and whatever all over again.","msgtype":"m.text"},"ts":1279219562000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"well, could you not put those 200 blog comments in a single file, but yeah i get your point","msgtype":"m.text"},"ts":1279219563000,"senderName":"wirepair","senderId":"wirepair@irc"},
{"content":{"body":"wirepair: Not if you want to be able to put stuff on the comment structure that needs to run scripts, like a thumbs up voter or something.","msgtype":"m.text"},"ts":1279219620000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Then they can interfere with each other.  Not necessarily so bad, but not preferable.  Ideally any monkey business should be isolated.","msgtype":"m.text"},"ts":1279219621000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Right, that too.","msgtype":"m.text"},"ts":1279219622000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"yeah no i understand ;)","msgtype":"m.text"},"ts":1279219623000,"senderName":"wirepair","senderId":"wirepair@irc"},
{"content":{"body":"You could absolutely-position stuff over it, if you're insane, but . . .","msgtype":"m.text"},"ts":1279219624000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Yeah, no, that's stupid.  ^_^","msgtype":"m.text"},"ts":1279219625000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"so far what has the most 'votes' for srcdoc, just escaping \"<>&' ?","msgtype":"m.text"},"ts":1279219680000,"senderName":"wirepair","senderId":"wirepair@irc"},
{"content":{"body":"No, just escape \" and & (or ', if you use that for your attributes).","msgtype":"m.text"},"ts":1279219681000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"ah gotcha","msgtype":"m.text"},"ts":1279219740000,"senderName":"wirepair","senderId":"wirepair@irc"},
{"content":{"body":"And escaping & isn't even necessary for security; skipping it just means that sometimes things will get eaten as escapes when they aren't.","msgtype":"m.text"},"ts":1279219741000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"So really, just escape whatever quote character you're ursing.","msgtype":"m.text"},"ts":1279219742000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"and the source documents content encoding has precedence yeah? my concern would be malformed multibyte sequences","msgtype":"m.text"},"ts":1279219800000,"senderName":"wirepair","senderId":"wirepair@irc"},
{"content":{"body":"Yes.","msgtype":"m.text"},"ts":1279219801000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"If you're not encoding everything in utf-8 you're doing it wrong anyway.","msgtype":"m.text"},"ts":1279219802000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"jeez, please tell that to japan ;)","msgtype":"m.text"},"ts":1279219860000,"senderName":"wirepair","senderId":"wirepair@irc"},
{"content":{"body":"I will.","msgtype":"m.text"},"ts":1279219861000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"shakes his fist vaguely west-ward.","msgtype":"m.emote"},"ts":1279219862000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"haha","msgtype":"m.text"},"ts":1279219863000,"senderName":"wirepair","senderId":"wirepair@irc"},
{"content":{"body":"What's Japan's common encoding?  utf-16, or one of those legacy encodings designed just for japanese?","msgtype":"m.text"},"ts":1279219920000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"well my customers used Shift_JIS a lot","msgtype":"m.text"},"ts":1279219921000,"senderName":"wirepair","senderId":"wirepair@irc"},
{"content":{"body":"on rare occassions you'll come across euc-jp","msgtype":"m.text"},"ts":1279219922000,"senderName":"wirepair","senderId":"wirepair@irc"},
{"content":{"body":"but yeah utf-8 is becoming more commonplace for sure","msgtype":"m.text"},"ts":1279219980000,"senderName":"wirepair","senderId":"wirepair@irc"},
{"content":{"body":"the main problem with a caret blinking API is that you need a way to know what to repaint","msgtype":"m.text"},"ts":1279221360000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"we could have a method that takes the x,y position of the center of the caret and works out (from the font size and baseline settings and from the OS caret width preferences) where to draw the caret, and then have it return an object that's x,y,w,h","msgtype":"m.text"},"ts":1279221480000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"but that seems like a pain","msgtype":"m.text"},"ts":1279221540000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"the alternative is to just have the method take an x,y,w,h and draw a caret at that position, potentially not following the OS rules on caret width if the given width isn't enough to draw the caret","msgtype":"m.text"},"ts":1279221541000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"we could also tell authors to provide a big width with the x,y being in the center, but then the problem is dealing with edge cases","msgtype":"m.text"},"ts":1279221600000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"maybe we should have the method take x,y,w,h of the text field, then a separate x,y of the caret","msgtype":"m.text"},"ts":1279221601000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"and the caret just gets clipped to the x,y,w,h","msgtype":"m.text"},"ts":1279221660000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"or we could say you have to repaint whatever your clip region is","msgtype":"m.text"},"ts":1279221840000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"and then just clip it to the clip region","msgtype":"m.text"},"ts":1279221900000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"so if you want to reduce your workload you just set your clip region to just the control before calling the method, or something","msgtype":"m.text"},"ts":1279221901000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"which is better, having the caret drawing code take a callback that is invoked when the caret needs to be redrawn for blinking, or having the author just call the caret code 20 times a second just in case the user has a 10Hz blink rate?","msgtype":"m.text"},"ts":1279223340000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Based on my limited experience with <canvas>, I prefer something that I can call myself whenever I repaint.","msgtype":"m.text"},"ts":1279223460000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"well for a caret you don't want to repaint the whole canvas each time","msgtype":"m.text"},"ts":1279223520000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Pfft.  My text editor will have a live video background.","msgtype":"m.text"},"ts":1279223521000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"there is so much wrong with that sentence...","msgtype":"m.text"},"ts":1279223580000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Then I can use webkit's background-clip:text to play a *different* video for the text itself.","msgtype":"m.text"},"ts":1279223640000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Though that's silly, obviously.  The video itself should play in the text, then a grayscale in the background.","msgtype":"m.text"},"ts":1279223641000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"there's no _canvas_ in this fantasy :-P","msgtype":"m.text"},"ts":1279223642000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"You can't use video directly as a background, I don't think.  So you have to draw it into a canvas at 50 fps.","msgtype":"m.text"},"ts":1279223700000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Also, grayscaling the video needs canvas.","msgtype":"m.text"},"ts":1279223701000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Or SVG, I suppose.","msgtype":"m.text"},"ts":1279223702000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"wonders if SVG filters on a <video> can get copied into a <canvas>.","msgtype":"m.emote"},"ts":1279223760000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"i know i may be out of luck, since we're talking about drawing a caret to a canvas, but does anyone have any _sane_ use case experience to provide here? :-P","msgtype":"m.text"},"ts":1279223761000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"You've already lost the sane people.","msgtype":"m.text"},"ts":1279223762000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I'm going to implement a text editor that plays pong with the letters.","msgtype":"m.text"},"ts":1279223763000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"But seriously, I don't want my caret to blink out too fast just because a callback happened to trigger a few milliseconds before I was otherwise going to repaint.","msgtype":"m.text"},"ts":1279223940000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I'd just end up using the callback to flip a variable that I then check in my actual drawing code, and then I might as well just have a property that exposes whether the caret should be visible or not.","msgtype":"m.text"},"ts":1279223941000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"the way i envision this, you don't worry about blinking the caret","msgtype":"m.text"},"ts":1279224000000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"drawCaret() just decides based on a timer whether to draw the caret or not for this frame","msgtype":"m.text"},"ts":1279224001000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Yes, that would be fine.  I can call drawCaret() in the rest of my drawing code, right?","msgtype":"m.text"},"ts":1279224002000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":" I vaugely feel like a callback is better if the browser is providing the timing","msgtype":"m.text"},"ts":1279224003000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"or maybe an event?","msgtype":"m.text"},"ts":1279224060000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"But I have nothing to go on there","msgtype":"m.text"},"ts":1279224061000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"<canvas onredrawcaret=\"\"> ?","msgtype":"m.text"},"ts":1279224062000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"yuck","msgtype":"m.text"},"ts":1279224063000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"had problems with flickering when he tried to have things draw on separate schedules.","msgtype":"m.emote"},"ts":1279224064000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Hmm, I can see that could be an issue","msgtype":"m.text"},"ts":1279224120000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"So, do we also need drawSelection?","msgtype":"m.text"},"ts":1279224780000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"It seems like canvas apps could always put the caret at the end of the selection","msgtype":"m.text"},"ts":1279224781000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Althought I suppose that would be bad if they tried to differentiate their behaviour based on OS","msgtype":"m.text"},"ts":1279224840000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"(which seems unlikely but possible)","msgtype":"m.text"},"ts":1279224841000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"It also seems possible that people will fail to move the caret when drawing a selection if they have to do it manually","msgtype":"m.text"},"ts":1279224842000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"(I'm not sure how draw selection could work really)","msgtype":"m.text"},"ts":1279224900000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"(so it may not even be possible to do in a sane way)","msgtype":"m.text"},"ts":1279224901000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Hixie: BTW I filed a bug in the handling of EOF after a foreign-content closing tag ","msgtype":"m.text"},"ts":1279225080000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"e.g. <svg></svg>","msgtype":"m.text"},"ts":1279225081000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: i haven't been able to find good documentation on accessibility APIs' handling of selections","msgtype":"m.text"},"ts":1279225200000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"(accessibility APIs in general are pretty poorly documented)","msgtype":"m.text"},"ts":1279225201000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Do most browsers cache HTTP redirects already?  Apparently IE9 now does.","msgtype":"m.text"},"ts":1279225260000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"i don't really see what such an API would do, though","msgtype":"m.text"},"ts":1279225261000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"AryehGregor: Yes.","msgtype":"m.text"},"ts":1279225262000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"At least, it is indeed done.","msgtype":"m.text"},"ts":1279225263000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"we don't need an API to say what the selected text _is_, which might well be something AAPIs would care about","msgtype":"m.text"},"ts":1279225264000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"(we don't need it because the UA already knows what the text is since they have the control itself in the DOM)","msgtype":"m.text"},"ts":1279225320000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: AFAICT the only point is to control where the magnifier is positioned","msgtype":"m.text"},"ts":1279225440000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"It has to be at the end of the selection","msgtype":"m.text"},"ts":1279225441000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"For reasons I don't follow Richard seems to think that the fact that OSX doesn't move the caret to the end of selections means that we need a seperate API","msgtype":"m.text"},"ts":1279225500000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"(or an accessibility-specific API)","msgtype":"m.text"},"ts":1279225501000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Hixie: Your change proposal for ISSUE 32 fails to make the case for UAs being required to implement the summary attribute. Given the arguments presented above it seems like they would be better off not doing that","msgtype":"m.text"},"ts":1279225800000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"there is no caret when you have a non-caret selection established","msgtype":"m.text"},"ts":1279225801000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"let me check how/whether carets or selections are represented via Accessibility Inspector","msgtype":"m.text"},"ts":1279225920000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"both are exposed via the http://axdb.apple.com/AXSelectedTextMarkerRange property","msgtype":"m.text"},"ts":1279226100000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"ignore the URLey bits, it's just AXSelectedTextMarkerRange","msgtype":"m.text"},"ts":1279226101000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"and the assistive technology is allowed to query the bounding box of the reported text marker range","msgtype":"m.text"},"ts":1279226280000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"so to fulfill the selection-related accessibility APIs, we would need to know the bounding box of the current selection or caret","msgtype":"m.text"},"ts":1279226281000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"there's also a way to request the text marker (and thereby if needed a string for a range) for a point, but that aspect seems impractical to do with canvas (you'd have to have a JS callback for the web developer's code to do hit testing)","msgtype":"m.text"},"ts":1279226460000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"AryehGregor: You around?","msgtype":"m.text"},"ts":1279228560000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Yes.","msgtype":"m.text"},"ts":1279228561000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"On this: http://forums.xkcd.com/viewtopic.php?p=2236984#p2236984 is the second step valid?  I see they've moved the 2 out of e's power's denominator by squaring, but I think it should have more effect than just squaring the G.","msgtype":"m.text"},"ts":1279228620000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"just uses AryehGregor for math from now on.","msgtype":"m.emote"},"ts":1279228621000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Ugh, don't they have a LaTeX display extension there?","msgtype":"m.text"},"ts":1279228680000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Yes they do.  Do you have js turned on?","msgtype":"m.text"},"ts":1279228681000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Yes.","msgtype":"m.text"},"ts":1279228682000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Yes, if you wait ten seconds for it to load","msgtype":"m.text"},"ts":1279228683000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Not working for me.","msgtype":"m.text"},"ts":1279228740000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I'll screenshot then.","msgtype":"m.text"},"ts":1279228741000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I presume they should have had (2\\pi)^2 on the left","msgtype":"m.text"},"ts":1279228800000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: Plus squaring the 1/omega^2 on the right.","msgtype":"m.text"},"ts":1279228801000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Oh, I missed that","msgtype":"m.text"},"ts":1279228860000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"http://www.xanthir.com/etc/math.png","msgtype":"m.text"},"ts":1279228920000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"The last line should have x^2 on the top of the fraction","msgtype":"m.text"},"ts":1279228980000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"The second step looks okay, multiply by 2pi and square both sides.  Except that you should have (2pi)^2 on the left.","msgtype":"m.text"},"ts":1279228981000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"AryehGregor: (ab)^2 is a^2 * b^2, though.","msgtype":"m.text"},"ts":1279228982000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"So the rhs should square the 1/omega^2 as well.","msgtype":"m.text"},"ts":1279228983000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"You mean sigma?","msgtype":"m.text"},"ts":1279228984000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Um, yes.","msgtype":"m.text"},"ts":1279229040000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Oh, right, I missed that.","msgtype":"m.text"},"ts":1279229041000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"That is true","msgtype":"m.text"},"ts":1279229042000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Yes, should be sigma^4.","msgtype":"m.text"},"ts":1279229043000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"kk, so it's all kinds of messed up.  Great.","msgtype":"m.text"},"ts":1279229044000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Well, the important part was done for me.","msgtype":"m.text"},"ts":1279229045000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"The general idea is right, though.","msgtype":"m.text"},"ts":1279229046000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I somehow doubt we actually want to mandate this in CSS.","msgtype":"m.text"},"ts":1279229047000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"No, we don't.  But I was asked for it.  ^_^","msgtype":"m.text"},"ts":1279229048000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"There are much easier approximations that should get close enough.","msgtype":"m.text"},"ts":1279229100000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"That means it doesn't end up in the nice simple W exp(W) form they want though","msgtype":"m.text"},"ts":1279229101000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Oh, hm.","msgtype":"m.text"},"ts":1279229102000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"(the 1/sigma^4)","msgtype":"m.text"},"ts":1279229103000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Oh, you're trying to isolate sigma, hmm?","msgtype":"m.text"},"ts":1279229104000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Well, so don't square.","msgtype":"m.text"},"ts":1279229105000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Just go with 37% instead of 1% and it's trivial :-p","msgtype":"m.text"},"ts":1279229106000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Just multiply both sides by -x^2/pi.","msgtype":"m.text"},"ts":1279229107000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I mean.","msgtype":"m.text"},"ts":1279229108000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"-x^2 * pi.","msgtype":"m.text"},"ts":1279229109000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Yes","msgtype":"m.text"},"ts":1279229110000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Whatever.","msgtype":"m.text"},"ts":1279229160000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"AryehGregor: Yeah.","msgtype":"m.text"},"ts":1279229161000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Then take the W function.","msgtype":"m.text"},"ts":1279229162000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"kk","msgtype":"m.text"},"ts":1279229163000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Hm, yeah, not sure why they thought it was necessary to pull the 2 out of the exp.","msgtype":"m.text"},"ts":1279229164000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"So yeah, basically it is all kinds of wrong","msgtype":"m.text"},"ts":1279229165000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"But the right general idea :)","msgtype":"m.text"},"ts":1279229166000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"K, I've posted an updated version that I think fixed the original flaws.","msgtype":"m.text"},"ts":1279229460000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Urg, wait, G is still getting squared.","msgtype":"m.text"},"ts":1279229461000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"k, fixed.","msgtype":"m.text"},"ts":1279229520000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Hmm...  The starting point is still wrong, though - there's a sqrt in the original equation that got dropped.","msgtype":"m.text"},"ts":1279229580000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"wtf is leif on about","msgtype":"m.text"},"ts":1279229581000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"i explained why i didn't entirely agreed","msgtype":"m.text"},"ts":1279229582000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"oh well","msgtype":"m.text"},"ts":1279229640000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TabAtkins, you seem to be using some mix of the two-dimensional and one-dimensional equations from Wikipedia.","msgtype":"m.text"},"ts":1279229641000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"not like this is anything new","msgtype":"m.text"},"ts":1279229642000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I never understand his emails","msgtype":"m.text"},"ts":1279229643000,"senderName":"hober","senderId":"hober@irc"},
{"content":{"body":"AryehGregor: I'm not, the responder is.  I'm fixing it now.","msgtype":"m.text"},"ts":1279229644000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I'm Xanthir in this conversation.","msgtype":"m.text"},"ts":1279229645000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I know.","msgtype":"m.text"},"ts":1279229700000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"You can drop the \\pm, by the way.  Standard deviations are always treated as positive.","msgtype":"m.text"},"ts":1279229701000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Yeah.","msgtype":"m.text"},"ts":1279229702000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Lessee... 1/sqrt(2*pi*sigma^2) is the same as 1/(sqrt(2*pi)*sigma), right?","msgtype":"m.text"},"ts":1279229760000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"knows this is basic algebra.","msgtype":"m.emote"},"ts":1279229761000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Hm, though.  That then seems to make it more difficult to get the RHS into the correct form.  Damn.","msgtype":"m.text"},"ts":1279229880000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I'm no longer going to contribute to polyglot discussions","msgtype":"m.text"},"ts":1279229940000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"waste of time","msgtype":"m.text"},"ts":1279229941000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Welcome to the club of \"everyone else in the world\", anne.","msgtype":"m.text"},"ts":1279229942000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"If sigma is positive, then yes, it's the same.","msgtype":"m.text"},"ts":1279229943000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"This is where you want to square it.","msgtype":"m.text"},"ts":1279229944000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"That won't harm the exponential (just knock out a constant), but it will get the sigma squared.","msgtype":"m.text"},"ts":1279229945000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Ah, you're right.","msgtype":"m.text"},"ts":1279230000000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Maybe the original poster's mistakes weren't where you thought.  :)","msgtype":"m.text"},"ts":1279230001000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"(we, whateveR)","msgtype":"m.text"},"ts":1279230002000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I can't believe there are so many replies and nobody called Leif on his nonsense","msgtype":"m.text"},"ts":1279230003000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(for the record, my latest reply was before the \"I'm no longer ...\" above; though I should at least rectify such nonsense for once)","msgtype":"m.text"},"ts":1279230060000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"thought*","msgtype":"m.text"},"ts":1279230061000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"AryehGregor: Yup, you're right.  If we pretend that the first step has a \\sqrt where it needs to, then the second step is correct.","msgtype":"m.text"},"ts":1279230062000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"annevk: I don't think that anyone understand much of what leif says tbh","msgtype":"m.text"},"ts":1279230063000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"So he is often just ignored","msgtype":"m.text"},"ts":1279230120000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Sam replied directly to him","msgtype":"m.text"},"ts":1279230240000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"still not sure what a good color for webforms2.org would be","msgtype":"m.text"},"ts":1279230300000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"what can beat hotpink? ;p","msgtype":"m.text"},"ts":1279230301000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: What part of MQ did you want reviewed?","msgtype":"m.text"},"ts":1279230302000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"annevk: It should blink","msgtype":"m.text"},"ts":1279230480000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"(using APNG)","msgtype":"m.text"},"ts":1279230481000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Aw yeah.","msgtype":"m.text"},"ts":1279230540000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"jgraham: feel free to write another CP that removes the need for UAs to implement it too","msgtype":"m.text"},"ts":1279233300000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"jgraham: you can copy mine and just change that bit if you want","msgtype":"m.text"},"ts":1279233301000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"othermaciej: so wait, what do we need to expose?","msgtype":"m.text"},"ts":1279233302000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"othermaciej: just the bounding box of the selection? not the actual selection?","msgtype":"m.text"},"ts":1279233303000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"othermaciej: does OS X have wide carets?","msgtype":"m.text"},"ts":1279233304000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"othermaciej: (in windows you can set the width of the caret apparently)","msgtype":"m.text"},"ts":1279233305000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"(which makes a caret drawing function hard)","msgtype":"m.text"},"ts":1279233360000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"when you are in a normal editable text area on OS X (at least in WebKit), the following pieces of data can be obtained:","msgtype":"m.text"},"ts":1279233361000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"- the endpoints of the selection range (equal to each other if the selection is a caret), in an abstract form that isn't exactly a character offset","msgtype":"m.text"},"ts":1279233362000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"- the ability to get the string of text in that range","msgtype":"m.text"},"ts":1279233420000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"- the ability to get the visual bounding box of that range","msgtype":"m.text"},"ts":1279233421000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"there is also the means in the API to ask for a text marker for a given point, but I am not sure if any assistive technologies actually use that","msgtype":"m.text"},"ts":1279233480000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"well the first two are easy since we have the underlying control already","msgtype":"m.text"},"ts":1279233481000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"the third one is harder... what can we use as a surrogate in the API for exposing that?","msgtype":"m.text"},"ts":1279233482000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"right, the first two don't require any additions to what HTML5 has, if you put a text control in the child DOM","msgtype":"m.text"},"ts":1279233483000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"for just a caret we can just have a caret drawing function","msgtype":"m.text"},"ts":1279233484000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"but for a selection...","msgtype":"m.text"},"ts":1279233485000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"drawing a caret or selection is one possibility","msgtype":"m.text"},"ts":1279233486000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"of course, it may be hard to spec drawing a selection in a way that is both cross-platform and useful to web developers","msgtype":"m.text"},"ts":1279233540000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"hard is one way to put it","msgtype":"m.text"},"ts":1279233541000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i wonder what the equivalent is on windows","msgtype":"m.text"},"ts":1279233600000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I tried to look at some MSAA docs and I couldn't find anything for the selection, as opposed to the caret, and Rich claimed Windows apps report the end of the selection as the caret position","msgtype":"m.text"},"ts":1279233660000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"but I have no firsthand knowledge of that","msgtype":"m.text"},"ts":1279233661000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"Philip`, sweet","msgtype":"m.text"},"ts":1279233662000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Philip`, can you make one?","msgtype":"m.text"},"ts":1279233663000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TabAtkins, just what changed; section 2/3","msgtype":"m.text"},"ts":1279233720000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TabAtkins, but only if you have time, it's not necessary","msgtype":"m.text"},"ts":1279233721000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I've forgotten how to do it","msgtype":"m.text"},"ts":1279233722000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"annevk: I've had it sitting in my open tabs since yesterday, so I might as well.","msgtype":"m.text"},"ts":1279233723000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Most of my APNGs were created by a Perl script I wrote, but that's not so great since I didn't implement any of the decent PNG compression methods","msgtype":"m.text"},"ts":1279233780000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"TabAtkins, though please no feature requests ;p","msgtype":"m.text"},"ts":1279233781000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"othermaciej: he also claimed something similar for OS X which is apparently wrong","msgtype":"m.text"},"ts":1279233782000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Philip`, it's a 32x32 image...","msgtype":"m.text"},"ts":1279233840000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: No promises.","msgtype":"m.text"},"ts":1279233841000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I think there might have been a Firefox extension that made APNGs easily","msgtype":"m.text"},"ts":1279233842000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Please no flashing favicons","msgtype":"m.text"},"ts":1279233843000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"wonders if support has become more widespread recently","msgtype":"m.emote"},"ts":1279233844000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"I will have to kill you","msgtype":"m.text"},"ts":1279233900000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: What about subtle pulsing?","msgtype":"m.text"},"ts":1279233901000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"And then we will have even fewer editors for web specs","msgtype":"m.text"},"ts":1279233902000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Hixie: I think he may be confused about how selections work on OS X","msgtype":"m.text"},"ts":1279233903000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"means you'll finally come to the Netherlands?","msgtype":"m.text"},"ts":1279233904000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"still likes http://zaynar.co.uk/favicon.ico","msgtype":"m.emote"},"ts":1279233905000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"when you hit an arrow key when you have a selection, you do get a caret at a specific point","msgtype":"m.text"},"ts":1279233906000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"might be worth it ;p","msgtype":"m.text"},"ts":1279233907000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"but prior to that point, there *is* no caret","msgtype":"m.text"},"ts":1279233908000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"but he interprets that as the caret was secretly at the end of the selection","msgtype":"m.text"},"ts":1279233960000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"Philip`: \"subtle\" meaning with a ime period of > 1 week, say?","msgtype":"m.text"},"ts":1279233961000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"s/ime//","msgtype":"m.text"},"ts":1279233962000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"that's not how the AX APIs expose it, afaict","msgtype":"m.text"},"ts":1279233963000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"still likes http://www.p01.org/releases/DEFENDER_of_the_favicon/","msgtype":"m.emote"},"ts":1279233964000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"jgraham: APNG has a maximum of 65535 seconds per frame, so I suppose you'd only need ten frames for that","msgtype":"m.text"},"ts":1279234020000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"although I don't know how well implementations handle timers like that","msgtype":"m.text"},"ts":1279234021000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"(I don't fancy testing it)","msgtype":"m.text"},"ts":1279234022000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"A time period of a few minutes sounds good to me.  Maybe half an hour.","msgtype":"m.text"},"ts":1279234080000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Once in a while, someone will notice some movement out of the corner of their eye.","msgtype":"m.text"},"ts":1279234081000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Then go crazy trying to figure out what it is.","msgtype":"m.text"},"ts":1279234082000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Sounds like what I did with the tech support portal at my old job.","msgtype":"m.text"},"ts":1279234140000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"a speed that drives jgraham temporarily insane is acceptable I think","msgtype":"m.text"},"ts":1279234141000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"there's no reason to visit webforms2.org anyway","msgtype":"m.text"},"ts":1279234200000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"it's a reminder of what that was","msgtype":"m.text"},"ts":1279234201000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TabAtkins, what did you do with the tech support portal at your old job?","msgtype":"m.text"},"ts":1279234202000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"It was named GLaDOS for no particular reason, so of course I needed to put in more references to insane AIs.  1 out of every 3 pageloads, the PHP writes in some js that flashes a full-screen picture of SHODAN for a fraction of a second (the delay of a setTimeout(func,0) call) with a random timer of roughly 5 minutes.","msgtype":"m.text"},"ts":1279234260000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Your company sounds fun to work for.","msgtype":"m.text"},"ts":1279234261000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"That was an internal tool, so I could fuck around.","msgtype":"m.text"},"ts":1279234262000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"But you shouldn't rely on setTimeout(func,0) taking a nonzero amount of time.  That's not forward-compatible.","msgtype":"m.text"},"ts":1279234263000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I expect the level of fun depends on whether you're TabAtkins or one of his victims","msgtype":"m.text"},"ts":1279234320000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Or at least, you shouldn't rely on it taking an appreciable amount of time.","msgtype":"m.text"},"ts":1279234321000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"AryehGregor: True.  I suppose a setTimeout(func,10) would be safer.  Even if browsers actually run it at the stated speed, it'll be up for long enough.","msgtype":"m.text"},"ts":1279234322000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"10 ms isn't enough to be perceptible, I don't think.","msgtype":"m.text"},"ts":1279234323000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I'm pretty sure 50 ms is the bare minimum.","msgtype":"m.text"},"ts":1279234324000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Philip`: To my knowledge, nobody's ever consciously realized it, but they have mentioned something odd.","msgtype":"m.text"},"ts":1279234380000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"othermaciej: i can't find anything about exposing a selection in MSAA or MUIA","msgtype":"m.text"},"ts":1279234381000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"AryehGregor: setTimeout generally delays by about 30ms, which is actually a relatively long period of time for it to be up, from experience.","msgtype":"m.text"},"ts":1279234382000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I'd flash it for less if I could.","msgtype":"m.text"},"ts":1279234383000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"30ms? Are you sure?","msgtype":"m.text"},"ts":1279234384000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: No, I'm not, just going off of memory.  The MDC says that Gecko uses 10ms minimum.","msgtype":"m.text"},"ts":1279234440000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"And HTML5 apparently defines a minimum of 4ms, which means that 0 is forward-compatible enough for me.","msgtype":"m.text"},"ts":1279234441000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"So, if it's flashing for 10ms in Gecko (the browser I used for testing when I was doing more webdev) then that's plenty enough.","msgtype":"m.text"},"ts":1279234620000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"AryehGregor: It's possible that 50ms or so is the minimum to *comprehend* what's seen, but it's definitely not the minimum to note that *something* is there.","msgtype":"m.text"},"ts":1279234621000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Seems to be about 10 in Opera and Firefox but 5 in Chrome","msgtype":"m.text"},"ts":1279234680000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"othermaciej: http://www.mozilla.org/access/windows/msaa-server#Hacky_caret_tracking_not_working","msgtype":"m.text"},"ts":1279234681000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Sigh.","msgtype":"m.text"},"ts":1279234740000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Sigh is one way to put it","msgtype":"m.text"},"ts":1279234800000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"I can identify the word \"Test\" here something like half the time: time.sleep(0.5); print \"Test\",; sys.stdout.flush(); time.sleep(0.025); print \"\\b\\b\\b\\b\\b    \"; sys.stdout.flush()","msgtype":"m.text"},"ts":1279234801000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"No, less.","msgtype":"m.text"},"ts":1279234802000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"If I bump 0.025 to 0.03, I can distinguish it clearly all the time, if I'm looking.","msgtype":"m.text"},"ts":1279234860000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"At 0.02 I can't see anything, but it's not perfect, since it adds newlines and the cursor gets in the way.","msgtype":"m.text"},"ts":1279234980000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Hixie: that seems to be par for the course for Windows accessibility...","msgtype":"m.text"},"ts":1279234981000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"a whole lot of hacky screenscraping","msgtype":"m.text"},"ts":1279234982000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"i can't find _anything_ about the text selection being exposed","msgtype":"m.text"},"ts":1279234983000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"TabAtkins, http://pastebin.com/WvfYS5LM","msgtype":"m.text"},"ts":1279235220000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"What do you see from that?","msgtype":"m.text"},"ts":1279235221000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I can clearly see the word \"Test\" flash.","msgtype":"m.text"},"ts":1279235280000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"What if you adjust the DELAY?","msgtype":"m.text"},"ts":1279235460000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I see it flash at 0.025, but not 0.02.","msgtype":"m.text"},"ts":1279235461000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"There's some odd effects here.  At .025 it flashes, at .024 it's completely invisible.","msgtype":"m.text"},"ts":1279235520000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I think I only see it at 0.025 because of intermittent additional delays, though.  I only see it some of the time.","msgtype":"m.text"},"ts":1279235521000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"It's not flashing at all.","msgtype":"m.text"},"ts":1279235522000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Maybe it would be more accurate to spin and poll the current time.  Probably time.sleep() isn't so accurate.","msgtype":"m.text"},"ts":1279235523000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Yeah.","msgtype":"m.text"},"ts":1279235524000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"doing it in js is much better.  Load this up in your console: unction flash(delay,visible) { document.body.innerHTML = visible ? \"test\" : \"\"; setTimeout(function(){ flash(delay, !visible); }, visible ? delay : 1000); }","msgtype":"m.text"},"ts":1279235760000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"How do you get a JavaScript console?  I've never had to.","msgtype":"m.text"},"ts":1279235761000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"What browser you got?","msgtype":"m.text"},"ts":1279235762000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Chrome right now.","msgtype":"m.text"},"ts":1279235763000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"right click, inspect element, hit Esc if the console isn't already up.","msgtype":"m.text"},"ts":1279235764000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Even at 0 it's clearly visible.","msgtype":"m.text"},"ts":1279235880000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Clearly JS timers stink.","msgtype":"m.text"},"ts":1279235881000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"TabAtkins, should I report the totally bogus canvas shadows on the Chromium tracker, or will it just be WontFix?  Does canvas really need such fast shadow drawing?","msgtype":"m.text"},"ts":1279236000000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I dunno.  Go ahead and report.","msgtype":"m.text"},"ts":1279236001000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Maybe I'll do that tomorrow.","msgtype":"m.text"},"ts":1279236420000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"annevk: In the grammar for media_query_list, you're missing a S* after the first media_query.","msgtype":"m.text"},"ts":1279236600000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"aha!","msgtype":"m.text"},"ts":1279236660000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"othermaciej: http://msdn.microsoft.com/en-us/library/ff384841(v=VS.85).aspx","msgtype":"m.text"},"ts":1279236661000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"TabAtkins, no","msgtype":"m.text"},"ts":1279236720000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"othermaciej: specifically, ITextRangeProvider::GetBoundingRectangles ","msgtype":"m.text"},"ts":1279236721000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"TabAtkins, that S* can be found elsewhere","msgtype":"m.text"},"ts":1279236722000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Not in all circumstances.","msgtype":"m.text"},"ts":1279236723000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins, nested :)","msgtype":"m.text"},"ts":1279236724000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Oh, wait.  Damn, you're right.","msgtype":"m.text"},"ts":1279236725000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I missed the S* trailing the expression token.","msgtype":"m.text"},"ts":1279236780000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"CSS grammar is evil","msgtype":"m.text"},"ts":1279236781000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ftfy: grammar is evil","msgtype":"m.text"},"ts":1279236782000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"we should have HTML5-like style imo","msgtype":"m.text"},"ts":1279236783000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"that would also exemplify how fricking complex it is","msgtype":"m.text"},"ts":1279236784000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"othermaciej: apparently on windows you have to use a \"system caret\" rather than draw your own: http://msdn.microsoft.com/en-us/library/ms646968(v=VS.85).aspx and the section at the end of the earlier cited http://msdn.microsoft.com/en-us/library/ff384841(v=VS.85).aspx","msgtype":"m.text"},"ts":1279236785000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Maybe for core grammar.  For properties the CSS grammar is a big win in general.","msgtype":"m.text"},"ts":1279236840000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"properties are defined in woefully inconsistent ways","msgtype":"m.text"},"ts":1279236841000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"and the grammar for properties is usually some kind of adhoc stuff made up on the fly","msgtype":"m.text"},"ts":1279236900000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Inconsistency can and should be fixed.  But the principle is sound and usually easily readable.","msgtype":"m.text"},"ts":1279236901000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I guess it works because you sort of understand what is going on, but it's not particularly great","msgtype":"m.text"},"ts":1279236902000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Frex, what's easier, seeing \"::cue( [ <voice> || <type> || <time> ] )\" (or whatever), or seeing a parser for the same?","msgtype":"m.text"},"ts":1279236960000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"just ::cue is actually buggy somewhat","msgtype":"m.text"},"ts":1279237140000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"should be something like \"::\"{C}{U}{E}","msgtype":"m.text"},"ts":1279237141000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"If we're writing a *real* grammar, yes.  But we're not.","msgtype":"m.text"},"ts":1279237200000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"This is just a shorthand for describing the grammar.","msgtype":"m.text"},"ts":1279237201000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"no even in the shorthand you need to do that","msgtype":"m.text"},"ts":1279237202000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I have never seen that in any property ever. ","msgtype":"m.text"},"ts":1279237260000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"You could have non-normative text giving a basic description of the property, then have a real parser defined for actual implementations.","msgtype":"m.text"},"ts":1279237261000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"see e.g. how :not is defined","msgtype":"m.text"},"ts":1279237262000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"And it would be silly to do so, imo, because it drastically reduces readability for no good reason.","msgtype":"m.text"},"ts":1279237263000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"which is kind of what HTML5 does.","msgtype":"m.text"},"ts":1279237264000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I mean, it has the nice foo(bar [ , baz [ , quuz ] ] ) stuff.","msgtype":"m.text"},"ts":1279237265000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Just not normatively.","msgtype":"m.text"},"ts":1279237320000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"annevk: :not() only receives that treatment in the official grammar section.","msgtype":"m.text"},"ts":1279237321000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"There, yes, use the normal rules for whatever language we're expressing this stuff in.","msgtype":"m.text"},"ts":1279237380000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"we're discussing grammar, no?","msgtype":"m.text"},"ts":1279237381000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I'm discussing the grammar that you see in property blocks and similar.","msgtype":"m.text"},"ts":1279237382000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"i'll be damned if i can work out what we need to do for caret and selection accessibility on windows","msgtype":"m.text"},"ts":1279237383000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"You can't just ask someone at Microsoft?","msgtype":"m.text"},"ts":1279237680000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"You know, like you asked Maciej about OS X?","msgtype":"m.text"},"ts":1279237681000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"i didn't ask maciej, he just told me :-)","msgtype":"m.text"},"ts":1279237740000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"who should i ask?","msgtype":"m.text"},"ts":1279237741000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I dunno directly, but you could start by hitting up Sylvain I guess, and he could direct you accordingly.","msgtype":"m.text"},"ts":1279237800000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"There are Microsoft people in the HTMLWG, no?","msgtype":"m.text"},"ts":1279237801000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"Probably they won't know themselves, but they can forward your request someplace.","msgtype":"m.text"},"ts":1279237802000,"senderName":"AryehGregor","senderId":"AryehGregor@irc"},
{"content":{"body":"I suspect Frank Olivier would know well","msgtype":"m.text"},"ts":1279237860000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Hixie: would this relate to drag-and-drop as well?","msgtype":"m.text"},"ts":1279237920000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I mean to keyboard activatability of text selection in drag-and-drop ?","msgtype":"m.text"},"ts":1279237980000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"hmm, I guess those are actually orthogonal","msgtype":"m.text"},"ts":1279237981000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"yeah i don't see how","msgtype":"m.text"},"ts":1279238100000,"senderName":"Hixie","senderId":"Hixie@irc"}
]