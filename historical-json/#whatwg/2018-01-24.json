[
{"content":{"body":"Domenic: I think there's a bug in https://html.spec.whatwg.org/#HTMLAllCollection-call","msgtype":"m.text"},"ts":1516778760000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"noooo","msgtype":"m.text"},"ts":1516778769000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"just a small one","msgtype":"m.text"},"ts":1516778773000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"what should document.all(undefined) do?","msgtype":"m.text"},"ts":1516778779000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"Unless there's something is JS that I don't know about, these \"custom bindings\" need to handle it to be consistent with document.all.item(undefined), right?","msgtype":"m.text"},"ts":1516778812000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"I don't know if consistency is the goal","msgtype":"m.text"},"ts":1516778837000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"The goal was matching browsers IIRC","msgtype":"m.text"},"ts":1516778843000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I think we covered this case...","msgtype":"m.text"},"ts":1516778850000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: you're right, that'd be fine, but Safari now passes a test that contradicts the spec on this point","msgtype":"m.text"},"ts":1516778866000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"do other browsers fail the test?","msgtype":"m.text"},"ts":1516778896000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"So apparently it was intentional to make it return the element with ID \"undefined\" https://github.com/whatwg/html/pull/2932#issuecomment-327085227","msgtype":"m.text"},"ts":1516778925000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"It's the \"legacy caller with undefined\" one in https://wpt.fyi/html/infrastructure/common-dom-interfaces/collections/htmlallcollection.html, although the Safari run there is busted (bug filed yesterday)","msgtype":"m.text"},"ts":1516778926000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"I wish wpt.fyi were reliable :(","msgtype":"m.text"},"ts":1516778940000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: it will be!","msgtype":"m.text"},"ts":1516778950000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"fails to find anyone at Bocoup to poke right here :)","msgtype":"m.emote"},"ts":1516778974000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"It's been hyped for so long, I look forward to the day it's usable","msgtype":"m.text"},"ts":1516778982000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"too bad there is no Edge result there","msgtype":"m.text"},"ts":1516778987000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"(Though I don't know if there are ven to be most trusted on the most compatible document.all emulation)","msgtype":"m.text"},"ts":1516779008000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"\"Make document.all.item(undefined)\" huh, that's not what I get by just trying to implement the spec though","msgtype":"m.text"},"ts":1516779028000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"The tests basically don't seem to match the spec PR","msgtype":"m.text"},"ts":1516779034000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"How could it, given the \"(HTMLCollection or Element)? item(optional DOMString nameOrIndex)\" IDL?","msgtype":"m.text"},"ts":1516779047000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"Hmm right I'm confused and maybe that post is confused","msgtype":"m.text"},"ts":1516779088000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Sigh maybe trying to decipher our intent here is stupid and we should try to figure it out from compat matrices again","msgtype":"m.text"},"ts":1516779105000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"The addition in https://github.com/whatwg/html/pull/2932/commits/ec03b38df55f8fddf115d9c704babd0710966ccc that would have made it so seems to not have been landed","msgtype":"m.text"},"ts":1516779135000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"OK so I think your original diagnosis was right","msgtype":"m.text"},"ts":1516779191000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"The [[Call]] should be consistent with item()","msgtype":"m.text"},"ts":1516779198000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"https://github.com/whatwg/html/commit/0679448c59cb4cd69019be1e1f35fee1bcbc9c66 was supposed to be editorial","msgtype":"m.text"},"ts":1516779225000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"But it didn't take care of aligning document.all(undefined) with document.all.item(undefined)","msgtype":"m.text"},"ts":1516779239000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: https://wpt.fyi/html/infrastructure/common-dom-interfaces/collections/htmlallcollection.html?sha=13eaad17a4 had good runs for Edge and Safari","msgtype":"m.text"},"ts":1516779297000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"So like a 2/2 split it looks like","msgtype":"m.text"},"ts":1516779323000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: I have a fix I'm about to send, saying \"If argumentsList's size is zero, or if argumentsList[0] is undefined, return null.\"","msgtype":"m.text"},"ts":1516779329000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"But we went with Safari because they'd been keeping up to date with spec updates and we didn't want to keep churning them","msgtype":"m.text"},"ts":1516779336000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Yes that sounds perfect","msgtype":"m.text"},"ts":1516779340000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Is that a coherent say to thing, or does JS do something?","msgtype":"m.text"},"ts":1516779342000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"Domenic: https://github.com/whatwg/html/pull/3392 (commit message a bit rushed, feel free to nitpick)","msgtype":"m.text"},"ts":1516779521000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"Given that the time from \"there's a bug to PR\" is rather short, maybe give it a day before merging?","msgtype":"m.text"},"ts":1516779575000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I dunno seems like a straightforward regression fix","msgtype":"m.text"},"ts":1516779621000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"nm","msgtype":"m.text"},"ts":1516779640000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I'm not in a rush if you want to ask someone","msgtype":"m.text"},"ts":1516779643000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"Nah, I'm just scared of document.all","msgtype":"m.text"},"ts":1516779655000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"This is from me reviving my old change to match the spec to be able to forget about it forever, when I found that legacycaller was gone and custom bindings still needed :)","msgtype":"m.text"},"ts":1516779700000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"Whoa, Promise.prototype.finally","msgtype":"m.text"},"ts":1516779803000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"The good news is that legacycaller is gone from everywhere else that would need it, like object and embed","msgtype":"m.text"},"ts":1516779824000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: looks like that's even true in Blink actually, amazing","msgtype":"m.text"},"ts":1516780101000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"removes remaining traces: https://chromium-review.googlesource.com/c/chromium/src/+/883002","msgtype":"m.emote"},"ts":1516782087000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"annevk: do you happen to know which spec might refer to \"add a PerformanceResourceTiming entry\" in https://w3c.github.io/resource-timing/#idl-def-performanceresourcetiming","msgtype":"m.text"},"ts":1516791246000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"wonders what sync event dispatch there","msgtype":"m.emote"},"ts":1516791279000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"s/what/that/","msgtype":"m.text"},"ts":1516791478000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: all I know is that WG routinely does bad layering so I'm not surprised","msgtype":"m.text"},"ts":1516791545000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1516791561000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"I'm trying to figure out what should happen for example with sync XHR","msgtype":"m.text"},"ts":1516791573000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: file an issue?","msgtype":"m.text"},"ts":1516791741000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah, just writing it","msgtype":"m.text"},"ts":1516791749000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: it seems like that should be integrated with XHR or Fetch somehow and I know for a fact it's not","msgtype":"m.text"},"ts":1516791756000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smaug____: apparently they also uniquely identified XHR despite nothing else in the networking stack doing so :/","msgtype":"m.text"},"ts":1516791774000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smaug____: I've yet to complain though, still working through review / issues I wanted to tackle yesterday","msgtype":"m.text"},"ts":1516791790000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk & smaug____: please file issues","msgtype":"m.text"},"ts":1516791873000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"yoav: these specs are so... unimplementable","msgtype":"m.text"},"ts":1516791891000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"implementations seem to be full of guesswork","msgtype":"m.text"},"ts":1516791912000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"yoav: I wish whoever wrote these specs would file issues as you're supposed to do when you monkey patch all the things","msgtype":"m.text"},"ts":1516791924000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"we've inherited that spec along with its tech debt. Currently figuring out who can dedicate time to work on open issues","msgtype":"m.text"},"ts":1516791936000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"yoav: having to find out someone added yet more junk to XHR in 2018 is not great","msgtype":"m.text"},"ts":1516791950000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"https://github.com/w3c/resource-timing/milestone/2","msgtype":"m.text"},"ts":1516791968000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"Is the XHR stuff a recent addition/","msgtype":"m.text"},"ts":1516791976000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"?","msgtype":"m.text"},"ts":1516791978000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"I have no idea, but I learned about it a couple hours ago","msgtype":"m.text"},"ts":1516792005000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Which is weird, being the maintainer of XHR for over a decade","msgtype":"m.text"},"ts":1516792026000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I'm guessing you're referring to the `initiatorType`","msgtype":"m.text"},"ts":1516792115000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"yoav: yeah!","msgtype":"m.text"},"ts":1516792154000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Feels like something that can be fixed, as initiatorType is extremely broken and inconsistent","msgtype":"m.text"},"ts":1516792157000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"I want to kill it and create an \"initiator\" that is (at least roughly) based on Request.destination","msgtype":"m.text"},"ts":1516792187000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"but for that we need to fix all the L2 bugs first...","msgtype":"m.text"},"ts":1516792222000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"annevk: unrelated, if a Link header has a relative URL, what URL is that relative to?","msgtype":"m.text"},"ts":1516792276000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"The document or the resource?","msgtype":"m.text"},"ts":1516792284000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"https://tools.ietf.org/html/rfc5988#section-5.1 seems relevant","msgtype":"m.text"},"ts":1516792326000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"Note that any base IRI","msgtype":"m.text"},"ts":1516792362000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"   from the message's content is not applied.","msgtype":"m.text"},"ts":1516792362000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"but I don't understand what \"Note that any base IRI from the message's content is not applied.\"","msgtype":"m.text"},"ts":1516792378000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"actually means","msgtype":"m.text"},"ts":1516792384000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"(sorry for the copy/paste shenanigans)","msgtype":"m.text"},"ts":1516792396000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"I think it refers to <base href>","msgtype":"m.text"},"ts":1516792424000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"but not sure","msgtype":"m.text"},"ts":1516792438000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"and not clear what to do if the Link header is on a subresource","msgtype":"m.text"},"ts":1516792454000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"https://github.com/w3c/resource-timing/issues/142","msgtype":"m.text"},"ts":1516792911000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"yoav: I'd use the same as the Location header","msgtype":"m.text"},"ts":1516792925000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"where is that defined?","msgtype":"m.text"},"ts":1516792936000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"yoav: 5.3 of https://fetch.spec.whatwg.org/#concept-http-fetch","msgtype":"m.text"},"ts":1516792961000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yoav: you probably need to consider service workers somehow and actually define when Link gets parsed","msgtype":"m.text"},"ts":1516793013000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"OK, so relative to the subresource URL?","msgtype":"m.text"},"ts":1516793021000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"yoav: message contents would indeed be <base>","msgtype":"m.text"},"ts":1516793026000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yoav: yeah, I'm not entirely sure what that means for synthetic responses atm","msgtype":"m.text"},"ts":1516793062000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"what do you mean by \"synthetic responses\"?","msgtype":"m.text"},"ts":1516793151000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"yoav: new Response()","msgtype":"m.text"},"ts":1516793213000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ko","msgtype":"m.text"},"ts":1516793223000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"ok","msgtype":"m.text"},"ts":1516793225000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"intuitively, seems like that would depend on the Request the Response is sent on","msgtype":"m.text"},"ts":1516793393000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"annevk: Does a step before 5 in the HTTP fetch concept make sense for such processing?","msgtype":"m.text"},"ts":1516793525000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"yoav: yeah seems reasonable","msgtype":"m.text"},"ts":1516793690000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yoav_: thanks for filing that issue, added a comment","msgtype":"m.text"},"ts":1516797968000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"<canvas> is such a mess","msgtype":"m.text"},"ts":1516805584000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I hope nobody uses it as a copy-and-paste template","msgtype":"m.text"},"ts":1516805603000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I wish Ms2ger never filed those issues so I could have stayed ignorant","msgtype":"m.text"},"ts":1516805651000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I'm going to interpret that as a compliment :)","msgtype":"m.text"},"ts":1516805687000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Sigh, and the checks createPattern and createImageBitmap do are not quite equivalent","msgtype":"m.text"},"ts":1516805919000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Although maybe that's doable still","msgtype":"m.text"},"ts":1516805951000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Can someone else add themself as an owner in wpt for canvas BTW?","msgtype":"m.text"},"ts":1516808351000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Wait only Safari supports OffscreenCanvas?","msgtype":"m.text"},"ts":1516808621000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Maybe that makes sense given that Safari was first with <canvas> too","msgtype":"m.text"},"ts":1516808675000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I didn't think Safari supported it? Chrome does, behind flag, and Firefox does, behind flag, WebGL only","msgtype":"m.text"},"ts":1516808824000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Per https://webkit.org/blog/8039/release-notes-for-safari-technology-preview-45/ it does, but only webgl","msgtype":"m.text"},"ts":1516808912000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"And also per my local testing, which is always extremely reliable...","msgtype":"m.text"},"ts":1516808944000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"You can trust me since I once got paid to do QA","msgtype":"m.text"},"ts":1516809026000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":":)","msgtype":"m.text"},"ts":1516809493000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"annevk, that matches the code I've read","msgtype":"m.text"},"ts":1516810295000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Igalia is working on 2d support, I believe","msgtype":"m.text"},"ts":1516810342000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"}
]