[
{"content":{"body":"Does anyone know where we handle the maximum length of a URL?","msgtype":"m.text"},"ts":1543278781000,"senderName":"jyasskin","senderId":"jyasskin@irc"},
{"content":{"body":"is there a maximum length for URLs in general? https://tools.ietf.org/html/rfc7230#section-3.1.1 seems to describe how servers should treat URLs that are too long, and mentions that clients and servers should support at least ~8K","msgtype":"m.text"},"ts":1543279053000,"senderName":"Mek","senderId":"Mek@irc"},
{"content":{"body":"Mek: I think it varies by browser, in practice, but I don't see even permission in Fetch for a browser to reject a too-long URL.","msgtype":"m.text"},"ts":1543292193000,"senderName":"jyasskin","senderId":"jyasskin@irc"},
{"content":{"body":"fetch just seems to leave that part up to the set of http specs?","msgtype":"m.text"},"ts":1543292227000,"senderName":"Mek","senderId":"Mek@irc"},
{"content":{"body":"but yeah, I have no idea what browsers actually do","msgtype":"m.text"},"ts":1543292254000,"senderName":"Mek","senderId":"Mek@irc"},
{"content":{"body":"Yeah, some bits of HTTP are being incorporated such as header parsing, so there is room for this. HTTP defining it for all clients is preferable though.","msgtype":"m.text"},"ts":1543303836000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: I was hoping someone else would do an initial pass","msgtype":"m.text"},"ts":1543304310000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: seems domfarolino might have done so from a quick glance","msgtype":"m.text"},"ts":1543304333000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yeah I briefly looked earlier when I saw the link. Happy to check it out in more detail though.","msgtype":"m.text"},"ts":1543304407000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"domfarolino: that’d be great","msgtype":"m.text"},"ts":1543304553000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: https://gist.github.com/annevk/5c2df7a49db621a2c1cd4f3fb78210af","msgtype":"m.text"},"ts":1543326469000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: I was thinking of posting that to the issue, for additional context, but happy to expand on things if it's unclear still","msgtype":"m.text"},"ts":1543326496000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I'd prefer making the top-level BC and auxiliary BC set explicit independent slots, instead of one big set","msgtype":"m.text"},"ts":1543326554000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I'm also a bit concerned about doing the worker changes separately leaving us with a hard-to-understand mismash, but wanting to chunk the work is also understandable...","msgtype":"m.text"},"ts":1543326669000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: for the worker stuff the current declarative definition doesn't seem entirely problematic","msgtype":"m.text"},"ts":1543326721000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yeah agreed, but having two different styles for very similar things seems like it'd be confusing.","msgtype":"m.text"},"ts":1543326748000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: I'm not really sure what independent slots buys us here and it might make things more complicated for various traversal operations","msgtype":"m.text"},"ts":1543326757000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Independent slots make the model a lot clearer to me. You don't think there will be a use for getting the single top-level BC?","msgtype":"m.text"},"ts":1543326786000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I'm afraid folks would use that kind of thing instead of finding the root of their tree, which is what they really need to be doing","msgtype":"m.text"},"ts":1543326837000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(most of the time)","msgtype":"m.text"},"ts":1543326844000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Because of the long conflation of top-level and auxiliary to mostly mean the same thing","msgtype":"m.text"},"ts":1543326863000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Hmm","msgtype":"m.text"},"ts":1543326868000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Well, I guess keep it in mind while writing the algorithms... I suspect it'll be clearer than a big bag that has hidden structure.","msgtype":"m.text"},"ts":1543326899000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I guess if some state from top-level is important, it'd be better to store that directly on BCG","msgtype":"m.text"},"ts":1543326912000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Though it's unclear what would happen if the top-level was closed","msgtype":"m.text"},"ts":1543326926000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(which is another thing I wouldn't expect folks to deal well with)","msgtype":"m.text"},"ts":1543326936000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Right... wait, doens't the definition of top-level handle that?","msgtype":"m.text"},"ts":1543326961000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Oh, so right now I think all auxiliary BCs are also top-level BCs","msgtype":"m.text"},"ts":1543326992000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"right","msgtype":"m.text"},"ts":1543327002000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Let's not change that?","msgtype":"m.text"},"ts":1543327009000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"E.g. there is a bunch of spec work like https://github.com/w3c/payment-request/pull/811","msgtype":"m.text"},"ts":1543327035000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Agreed, perhaps I'm stressing the difference I want to point out incorrectly","msgtype":"m.text"},"ts":1543327044000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yeah, probably need new terms","msgtype":"m.text"},"ts":1543327053000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I guess I could say there's at most one non-auxiliary browsing context","msgtype":"m.text"},"ts":1543327060000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"\"root browsing context\"? \"original browsing context\"?","msgtype":"m.text"},"ts":1543327086000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"root would ideally be equal to top-level if we reuse DOM tree terms","msgtype":"m.text"},"ts":1543327108000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"This section will benefit from examples that map more directly to tabbed browsers than we usually talk about in the spec","msgtype":"m.text"},"ts":1543327123000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Maybe I can work on some diagrams and ask you to write nice text around them :)","msgtype":"m.text"},"ts":1543327149000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"That sounds great","msgtype":"m.text"},"ts":1543327177000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I think there's an open clarification issue about diagrams","msgtype":"m.text"},"ts":1543327178000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Maybe the distinction top-level/auxiliary doesn't even matter as much anymore with BCGs","msgtype":"m.text"},"ts":1543327212000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Because any important state would be anchored there","msgtype":"m.text"},"ts":1543327225000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Well it's not a distinction","msgtype":"m.text"},"ts":1543327245000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"And any BC can be an opener BC","msgtype":"m.text"},"ts":1543327248000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: sorry, the non-auxiliary/auxiliary distinction","msgtype":"m.text"},"ts":1543327259000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I think specs like https://github.com/w3c/payment-request/pull/811 or feature policy do care about top-level-ness","msgtype":"m.text"},"ts":1543327266000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Not sure who if anyone cares about auxiliaryness","msgtype":"m.text"},"ts":1543327273000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Care about non-auxiliaryness or care about top-levelness?","msgtype":"m.text"},"ts":1543327297000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I can't think of anything besides the window.opener spec that cares about auxiliariness","msgtype":"m.text"},"ts":1543327316000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Although I guess maybe some of the security stuff gets inherited into auxiliary... but maybe that's better served by BC groups...","msgtype":"m.text"},"ts":1543327400000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Yeah, we might be able to do away with that term","msgtype":"m.text"},"ts":1543327406000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"It still seems roughly useful to be able to talk about popup windows in some way, but maybe it's more confusing than helpful, and it's better to just talk about top-level BCs that have an opener versus don't.","msgtype":"m.text"},"ts":1543327436000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Have an opener is dangerous as you can set it to null, but it might still be too late","msgtype":"m.text"},"ts":1543327490000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"That's why BCGs also help","msgtype":"m.text"},"ts":1543327500000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(Although not to locate popups, as the initial top-level might be closed.)","msgtype":"m.text"},"ts":1543327529000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I guess we'll probably also get to clean that up and have disowning actually set opener to null","msgtype":"m.text"},"ts":1543327530000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Right now I think we keep it around so that they stay in the same URSOBCs","msgtype":"m.text"},"ts":1543327545000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"We cannot, because the WindowProxy can be leaked at any point","msgtype":"m.text"},"ts":1543327549000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"We can set the opener to null and keep them in the same BCG I think","msgtype":"m.text"},"ts":1543327562000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"So they'll have to stay in the same BCG and the same agent cluster","msgtype":"m.text"},"ts":1543327564000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ah yes","msgtype":"m.text"},"ts":1543327568000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Whereas right now we \"disown the opener\" but leave the pointer there","msgtype":"m.text"},"ts":1543327576000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Which is confusing","msgtype":"m.text"},"ts":1543327579000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Yeah it's bad","msgtype":"m.text"},"ts":1543327591000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"wonders if anyone has ever considered to merge Referrer Policy into Fetch.","msgtype":"m.emote"},"ts":1543332771000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: I don’t think that has come up","msgtype":"m.text"},"ts":1543334868000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"it just might, or might not, make fetch handling easier to read.","msgtype":"m.text"},"ts":1543335770000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"Not quite how to put it - but is it possible for a portion of an HTML page to define and use its own namespace?","msgtype":"m.text"},"ts":1543349287000,"senderName":"innovati","senderId":"innovati@irc"},
{"content":{"body":"TabAtkins: does anything define how CSS background images or fonts get fetched? E.g. what referrer URL they send?","msgtype":"m.text"},"ts":1543363014000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I guess maybe https://w3c.github.io/webappsec-referrer-policy/#integration-with-css implies the answer is \"no\", but I can just point to that spec instead...","msgtype":"m.text"},"ts":1543363068000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"There is none, yes.","msgtype":"m.text"},"ts":1543363077000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"}
]