[
{"content":{"body":"rniwa: https://github.com/whatwg/dom/issues/685#issuecomment-419551665 is untrue","msgtype":"m.text"},"ts":1536378523000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"rniwa: the proposed behavior flips the listener invocation order for my example","msgtype":"m.text"},"ts":1536378556000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"rniwa: the capture listener would be invoked first; smaug____ was indicating Gecko already has this behavior sometimes","msgtype":"m.text"},"ts":1536378616000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"rniwa: i.e., even without shadow trees there would be a subtle change, but we need to make it as otherwise we expose shadow trees","msgtype":"m.text"},"ts":1536378673000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: which example?","msgtype":"m.text"},"ts":1536383252000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"rniwa: https://github.com/whatwg/dom/issues/685#issuecomment-419355034","msgtype":"m.text"},"ts":1536386476000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yeah don't have a different behavior between Gecko vs WebKit/Blink, right?","msgtype":"m.text"},"ts":1536386520000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"that* don't","msgtype":"m.text"},"ts":1536386526000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"ugh... that* doesn't*","msgtype":"m.text"},"ts":1536386559000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"rniwa: per smaug____ for <input> there would be a difference","msgtype":"m.text"},"ts":1536386574000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I don't think so","msgtype":"m.text"},"ts":1536386584000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"rniwa: and with the PR there would be a difference","msgtype":"m.text"},"ts":1536386597000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: how?","msgtype":"m.text"},"ts":1536386609000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"rniwa: capture listeners run first","msgtype":"m.text"},"ts":1536386624000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yeah but that has always been the case","msgtype":"m.text"},"ts":1536386632000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"No, for target the listeners would run in register order","msgtype":"m.text"},"ts":1536386657000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: the only difference here is that capturing event listeners on the target that exists within a shadow tree gets invoked AFTER all capturing event listeners on ancestors of a shadow host were invoked","msgtype":"m.text"},"ts":1536386669000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"So bubble if registered first would run first","msgtype":"m.text"},"ts":1536386678000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: right but only within shadow trees","msgtype":"m.text"},"ts":1536386688000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"rniwa: the PR affects the normal case too, no?","msgtype":"m.text"},"ts":1536386717000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: i don't think so","msgtype":"m.text"},"ts":1536386722000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"annevk: i'm pretty certain it wouldn't","msgtype":"m.text"},"ts":1536386736000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"annevk: what happens is that in the world without a shadow tree","msgtype":"m.text"},"ts":1536386742000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"annevk: the target's capturing event listener is the last thing we invoke in the capturing phase","msgtype":"m.text"},"ts":1536386761000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"annevk: what breaks down in shadow DOM is that there could be multiple even targets on which event listeners are invoked with AT_TARGET","msgtype":"m.text"},"ts":1536386792000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"annevk: as long as there is a single target, this odd capturing event listener ordering won't be happening","msgtype":"m.text"},"ts":1536386817000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"annevk: it's true that capturing event listeners within UA shadow trees are happening after capturing event listeners of ancestors of those UA shadow hosts but I doubt any UA is exposing that kind of detail to the user land","msgtype":"m.text"},"ts":1536386857000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"annevk: since most of events fired within a shadow tree aren't even exposed to the user land","msgtype":"m.text"},"ts":1536386873000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"I think we are still talking past each other","msgtype":"m.text"},"ts":1536386918000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ya","msgtype":"m.text"},"ts":1536386933000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"If a target has first a non-capture listener added and then a capture listener","msgtype":"m.text"},"ts":1536386954000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: could you post an example in which event listeners will be invoked in different orders before/after your change / on Gecko vs. WebKit/Blink","msgtype":"m.text"},"ts":1536386968000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"The invocation order today is non-capture, then capture","msgtype":"m.text"},"ts":1536386982000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Per PR it is capture, then non-capture","msgtype":"m.text"},"ts":1536386997000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: oh I see.","msgtype":"m.text"},"ts":1536387009000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"In Gecko it depends on the target element type","msgtype":"m.text"},"ts":1536387023000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: you're saying that on the target element, we'd invoke event listeners in the order they were registered","msgtype":"m.text"},"ts":1536387029000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"Today, yes","msgtype":"m.text"},"ts":1536387041000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: as opposed to in the capturing then bubbling","msgtype":"m.text"},"ts":1536387046000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"Yes","msgtype":"m.text"},"ts":1536387052000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yeah, i'm a lot less concerned about that.","msgtype":"m.text"},"ts":1536387068000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"Ok","msgtype":"m.text"},"ts":1536387073000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Good","msgtype":"m.text"},"ts":1536387078000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: what's concerning is the event listeners on different elements getting invoked in different orders","msgtype":"m.text"},"ts":1536387085000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"annevk: that's a lot likely to cause havocs in scripts that rely on particular ordering for stopping propagation, etc...","msgtype":"m.text"},"ts":1536387103000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"Yeah, I agree there is real risk for WebKit/Chromium here","msgtype":"m.text"},"ts":1536387124000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I hope the experiment works out","msgtype":"m.text"},"ts":1536387139000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: ya, i hope so too because what we have today is nuts","msgtype":"m.text"},"ts":1536387270000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"annevk: so apparently ea.com and a bunch of other EA properties are using Polymer & web components in real","msgtype":"m.text"},"ts":1536387479000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"smaug____: ^","msgtype":"m.text"},"ts":1536387482000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"oh my word, what is this?? https://tools.ietf.org/html/rfc2396.html#section-3.3","msgtype":"m.text"},"ts":1536420672000,"senderName":"GPHemsley","senderId":"GPHemsley@irc"},
{"content":{"body":"allowing parameters within each segment of a URL path??","msgtype":"m.text"},"ts":1536420692000,"senderName":"GPHemsley","senderId":"GPHemsley@irc"},
{"content":{"body":"wait, what ever are parameters","msgtype":"m.text"},"ts":1536420823000,"senderName":"GPHemsley","senderId":"GPHemsley@irc"},
{"content":{"body":"*even","msgtype":"m.text"},"ts":1536420828000,"senderName":"GPHemsley","senderId":"GPHemsley@irc"},
{"content":{"body":"The \"newer\" URI syntax still allows those, but only references them obliquely; they're not reified in the grammar itself.","msgtype":"m.text"},"ts":1536427102000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"https://tools.ietf.org/html/rfc3986#section-3.3","msgtype":"m.text"},"ts":1536427118000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"this <p> doesn't get a foster parent http://software.hixie.ch/utilities/js/live-dom-viewer/saved/6210","msgtype":"m.text"},"ts":1536435279000,"senderName":"zcorpan","senderId":"zcorpan@irc"}
]