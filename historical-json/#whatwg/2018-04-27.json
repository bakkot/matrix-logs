[
{"content":{"body":"wanderview: I don't think so. The SW still only intercepts requests from the page it's a controller of. In this case the page is a chrome extension.","msgtype":"m.text"},"ts":1524789155000,"senderName":"falken","senderId":"falken@irc"},
{"content":{"body":"falken: not sure if you missed that you have github invite waiting, for push access to the web-platform-tests repo","msgtype":"m.text"},"ts":1524792406000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: thanks... I can't find the invite. Is this different from joining the web-platform-tests org?","msgtype":"m.text"},"ts":1524792486000,"senderName":"falken","senderId":"falken@irc"},
{"content":{"body":"falken: no different; if youâ€™re already part of the org, you can just ignore it","msgtype":"m.text"},"ts":1524793109000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I sent it to the account https://github.com/mattto","msgtype":"m.text"},"ts":1524793140000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"maybe thatâ€™s not you..","msgtype":"m.text"},"ts":1524793147000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: Yep that's me. I think I'm a member now. I guess that might be why the invite doesn't show up anywhere for me?","msgtype":"m.text"},"ts":1524793205000,"senderName":"falken","senderId":"falken@irc"},
{"content":{"body":"dunno","msgtype":"m.text"},"ts":1524793223000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"oh wait, the web-platform-tests org is different","msgtype":"m.text"},"ts":1524793226000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I misspoke before","msgtype":"m.text"},"ts":1524793231000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: oh...","msgtype":"m.text"},"ts":1524793235000,"senderName":"falken","senderId":"falken@irc"},
{"content":{"body":"this is for https://github.com/w3c/web-platform-tests/","msgtype":"m.text"},"ts":1524793273000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"which is in the in github w3c org","msgtype":"m.text"},"ts":1524793282000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"anyway, annevk is the one who actually requested that you have access","msgtype":"m.text"},"ts":1524793289000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I assume so that you could do approved revieww","msgtype":"m.text"},"ts":1524793308000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but I see now you already have read access to that repo","msgtype":"m.text"},"ts":1524793355000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"which should be enough to allow you to approve reviews","msgtype":"m.text"},"ts":1524793367000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: OK, sounds good. odd","msgtype":"m.text"},"ts":1524793401000,"senderName":"falken","senderId":"falken@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1524793411000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"anyway, it will all be moved over to the web-platform-tests org soon","msgtype":"m.text"},"ts":1524793434000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"in the mean time I can ask annevk about it later when heâ€™s around","msgtype":"m.text"},"ts":1524793467000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: The invite arrived!","msgtype":"m.text"},"ts":1524796200000,"senderName":"falken","senderId":"falken@irc"},
{"content":{"body":"MikeSmith: It just arrived now. Joined.","msgtype":"m.text"},"ts":1524796293000,"senderName":"falken","senderId":"falken@irc"},
{"content":{"body":"MikeSmith: Well 45 minutes ago","msgtype":"m.text"},"ts":1524796328000,"senderName":"falken","senderId":"falken@irc"},
{"content":{"body":"falken: cool","msgtype":"m.text"},"ts":1524796445000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"yeah thatâ€™s because I had the system re-send it","msgtype":"m.text"},"ts":1524796460000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I think foolip also invited falken","msgtype":"m.text"},"ts":1524802405000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yes foolip invited me to web-platform-tests org and MikeSmith to w3c org","msgtype":"m.text"},"ts":1524802590000,"senderName":"falken","senderId":"falken@irc"},
{"content":{"body":"annevk: https://github.com/servo/servo/pull/20698/files#diff-e55587046e2aec44dd25e5e4a8958217 Does that ring a bell? Any recent changes to those?","msgtype":"m.text"},"ts":1524816160000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: dunno, sorry","msgtype":"m.text"},"ts":1524816236000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: No problem. Pinged you just in case, will look for the answer myself. :)","msgtype":"m.text"},"ts":1524816314000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: https://github.com/w3c/web-platform-tests/commit/3e538e72b8f12de065612862486c3fc24beb9c53#diff-26c995600d11355f7b4b03f54d96cd82 ðŸ˜±","msgtype":"m.text"},"ts":1524816393000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: getting rid of document.origin in favor of self.origin is generally good?","msgtype":"m.text"},"ts":1524816429000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Oh yes yes, I know those changes are made for good reasons.","msgtype":"m.text"},"ts":1524816442000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"But stop pointing out Servo's deficiencies with clever changes, it makes me sad. :P","msgtype":"m.text"},"ts":1524816470000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"I'm pretty sure nobody writes async/await or self.origin to spite Servo ðŸ˜ƒ","msgtype":"m.text"},"ts":1524816553000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"IT'S A CONSPIRACY","msgtype":"m.text"},"ts":1524817047000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: Can we land https://github.com/whatwg/fetch/pull/659? Or do we need to wait for the official Edge bug?","msgtype":"m.text"},"ts":1524817808000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"(I wanna land https://chromium-review.googlesource.com/c/chromium/src/+/1029858 and prefer to do it after the spec change lands)","msgtype":"m.text"},"ts":1524817835000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"yoav: nah, landed","msgtype":"m.text"},"ts":1524818208000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yoav: thanks for working on that","msgtype":"m.text"},"ts":1524818215000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yoav: the only other thing that can help make it go even smoother is preparing a commit message that has all the details, but happy to take care of that","msgtype":"m.text"},"ts":1524818251000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ahaa, webkit doesn't seem to implement delegateFocus stuff","msgtype":"m.text"},"ts":1524819328000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"https://trac.webkit.org/browser/webkit/trunk/Source/WebCore/dom/Element.idl#L156 vs https://cs.chromium.org/chromium/src/third_party/blink/renderer/core/dom/shadow_root_init.idl?q=ShadowRootInit&sq=package:chromium&dr=C&l=11","msgtype":"m.text"},"ts":1524819425000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"I hope that's only because of lack of time and not some disagreement","msgtype":"m.text"},"ts":1524819431000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I don't recall any disagreements at least","msgtype":"m.text"},"ts":1524819448000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1524819453000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"annevk: I'mâ€¦ I'm lost. Where does window.origin come from?","msgtype":"m.text"},"ts":1524819626000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: WindowOrWorkerGlobalScope","msgtype":"m.text"},"ts":1524819758000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TIL, thanks.","msgtype":"m.text"},"ts":1524819801000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk:   // [Replaceable] readonly attribute USVString origin;","msgtype":"m.text"},"ts":1524819819000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Well that explains things. :)","msgtype":"m.text"},"ts":1524819823000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"foolip: did you ever figure out if LockCompatibilityMode et al are redundant?","msgtype":"m.text"},"ts":1524831416000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: that doesn't even ring a bell, so no :)","msgtype":"m.text"},"ts":1524831528000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"Nothing in my inbox either, what is this?","msgtype":"m.text"},"ts":1524831545000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"foolip: I thought I asked you (on IRC) if compatibility_mode_locked_ was ever false or if it could ever be","msgtype":"m.text"},"ts":1524831576000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"foolip: from document.cc (used to be Document.cpp; took a while to find the new location...)","msgtype":"m.text"},"ts":1524831595000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: oh, that. yes, my change finished running, and the results weren't what I thought. let me find it","msgtype":"m.text"},"ts":1524831607000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"annevk: https://chromium-review.googlesource.com/c/chromium/src/+/986136","msgtype":"m.text"},"ts":1524831669000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"annevk: hmm, results don't seem to load now, I'll rebase and run again","msgtype":"m.text"},"ts":1524831689000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"foolip: I can reproduce it sometimes changing now, but I don't really understand what I'm looking at: https://github.com/w3c/web-platform-tests/pull/10679","msgtype":"m.text"},"ts":1524832089000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: ah, actually, some results work, and point to a bunch of tests which trigger the code path we suspected was dead: https://ci.chromium.org/buildbot/tryserver.chromium.win/win7_chromium_rel_ng/133394","msgtype":"m.text"},"ts":1524832136000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"actually https://test-results.appspot.com/data/layout_results/win7_chromium_rel_ng/133394/layout-test-results/results.html is the best starting point","msgtype":"m.text"},"ts":1524832153000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"and https://test-results.appspot.com/data/layout_results/mac_chromium_rel_ng/682797/layout-test-results/results.html","msgtype":"m.text"},"ts":1524832176000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"the first failure I looked at is a simple file at least: https://chromium.googlesource.com/chromium/src/+/1a52caad09e40377c58296887635640ec21c102b/third_party/WebKit/LayoutTests/dom/legacy_dom_conformance/html/level1/core/documentgetdoctypenodtd.html","msgtype":"m.text"},"ts":1524832218000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"annevk: does that provide any clues?","msgtype":"m.text"},"ts":1524832317000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"No","msgtype":"m.text"},"ts":1524832323000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: is it a minimized test case you need, or just to figure out what the spec should say around this?","msgtype":"m.text"},"ts":1524832346000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"\"just\"","msgtype":"m.text"},"ts":1524832348000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"foolip: I found a minimal test of sorts: https://github.com/w3c/web-platform-tests/pull/10679 but I've no idea what's going on","msgtype":"m.text"},"ts":1524832382000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"foolip: and yeah, I want to figure out if the spec should match this or not","msgtype":"m.text"},"ts":1524832397000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I guess what's happening is that it starts out in standards mode, but then the parser can change that or some such","msgtype":"m.text"},"ts":1524832453000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ah yeah, I think I understand what's happening now","msgtype":"m.text"},"ts":1524832490000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"The testharness is delayed due to not getting a load event","msgtype":"m.text"},"ts":1524832504000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: looks like in addition to document.open(), navigation and parsing of document in XHR can also reach this code path, although I don't know if the change of mode is possible in those cases, would have to look at the different failures.","msgtype":"m.text"},"ts":1524832571000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"foolip: I suspect all HTML parser-related cases start out as no-quirks and can then be changed","msgtype":"m.text"},"ts":1524832648000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"foolip: I wonder how deterministic it changing is here though","msgtype":"m.text"},"ts":1524832677000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: from the failed assert it actually looks like it started out in quirks mode and then became standards mode","msgtype":"m.text"},"ts":1524832689000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"foolip: since you can feed the parser the doctype bits very incrementally","msgtype":"m.text"},"ts":1524832694000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"foolip: document.open() made it no-quirks; then document.close() would've made it quirks due to EOF","msgtype":"m.text"},"ts":1524832738000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: it is the transition in document.open() that you're wondering about, right? or is the document.close() thing also not well defined/interoperable?","msgtype":"m.text"},"ts":1524832782000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"annevk: do you have results from all browsers for https://github.com/w3c/web-platform-tests/pull/10679?","msgtype":"m.text"},"ts":1524832830000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"foolip: I figured out how Chrome et al work for that","msgtype":"m.text"},"ts":1524832989000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"foolip: it also appears to be fully deterministic","msgtype":"m.text"},"ts":1524832998000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"foolip: though a tad weird","msgtype":"m.text"},"ts":1524833006000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"trying Edge and Safari on BrowserStack","msgtype":"m.text"},"ts":1524833019000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"foolip: they are identical to Chrome","msgtype":"m.text"},"ts":1524833027000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Firefox Nightly passes, but I think you knew that","msgtype":"m.text"},"ts":1524833027000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"foolip: I pushed an update that makes it match Chrome/Edge/Safari","msgtype":"m.text"},"ts":1524833038000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Safari fails just like Chrome","msgtype":"m.text"},"ts":1524833041000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"Edge passes, but maybe you *just* updated it?","msgtype":"m.text"},"ts":1524833070000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"did","msgtype":"m.text"},"ts":1524833077000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Still not entirely sure why it can be locked down though","msgtype":"m.text"},"ts":1524833475000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: ah, so Firefox just never \"locks\" it?","msgtype":"m.text"},"ts":1524833635000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"Given the 3/1 split it seems sensible to match that for test cases that aren't contrived, but I don't know if there is a simpler model than what's implemented in Blink. Maybe tkent would know this better.","msgtype":"m.text"},"ts":1524833681000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"foolip: well Firefox doesn't seem to change it here","msgtype":"m.text"},"ts":1524833725000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"foolip: I don't know if Firefox locks it","msgtype":"m.text"},"ts":1524833733000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(or when that's observable)","msgtype":"m.text"},"ts":1524833741000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"falken: huh... so an extension couldn't redirect a page resource to a chrome-extension:// URL and intercept it?  I thought that was a prime use case","msgtype":"m.text"},"ts":1524834983000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"https://stackoverflow.com/questions/50062084/how-to-fallback-to-browsers-default-fetch-handling-within-event-respondwith","msgtype":"m.text"},"ts":1524836516000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"JakeA: â¬†","msgtype":"m.text"},"ts":1524836536000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: I commented... it looks like a firefox bug that is fixed in 60","msgtype":"m.text"},"ts":1524836693000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"they are probably using view-source or a session restore which tries to set force-cache... but in FF59 we accidentally use only-if-cached","msgtype":"m.text"},"ts":1524836743000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"oh, I also commented","msgtype":"m.text"},"ts":1524836892000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"but I did not know that!","msgtype":"m.text"},"ts":1524836908000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"wanderview: oh cool, thanks!","msgtype":"m.text"},"ts":1524836927000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"thanks too annevk","msgtype":"m.text"},"ts":1524837024000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I guess I want make it a third comment then ðŸ˜€","msgtype":"m.text"},"ts":1524837763000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"the real  surprise is that Jeff Posnick did not comment 30 seconds after the question was asked","msgtype":"m.text"},"ts":1524837894000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"foolip: so when this file rename was done, did nobody care all the external links would be broken?","msgtype":"m.text"},"ts":1524838114000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"foolip: e.g., I have https://cs.chromium.org/chromium/src/third_party/WebKit/Source/core/dom/Node.cpp?l=2054&gsn=RemoveAllEventListenersRecursively here and it's useless now...","msgtype":"m.text"},"ts":1524838125000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(I can make it work, but still)","msgtype":"m.text"},"ts":1524838140000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: http://w3c-test.org/html/browsers/origin/relaxing-the-same-origin-restriction/document_domain_setter.html","msgtype":"m.text"},"ts":1524838597000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"This seems to pass nowhere.","msgtype":"m.text"},"ts":1524838601000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"We didn't have WindowOrWorkerGlobalScope.domain in Servo, just implemented it, this failed with `assert_equals: expected \"http://web-platform.test:8000\" but got \"http://www1.web-platform.test:8000\"`,","msgtype":"m.text"},"ts":1524838630000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"on all other browsers, the test doesn't even seem to pass security checks, so am scared.","msgtype":"m.text"},"ts":1524838641000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: Yeah that always gets&annoys me too","msgtype":"m.text"},"ts":1524839345000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"I don't even understand why that test should pass. :/","msgtype":"m.text"},"ts":1524839354000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: does cs.chromium.org not offer permalinks?","msgtype":"m.text"},"ts":1524839472000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: dunno, the links I had don't work across renames at least","msgtype":"m.text"},"ts":1524839535000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: hmm","msgtype":"m.text"},"ts":1524839554000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: we have the same problem in gecko... but we suggest people use permalinks in code comments and bugs, etc","msgtype":"m.text"},"ts":1524839557000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"nox: I guess you'd have to look into blames","msgtype":"m.text"},"ts":1524839607000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"wanderview: ooh I see, with the commit in there","msgtype":"m.text"},"ts":1524839623000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"dunno if that's available","msgtype":"m.text"},"ts":1524839632000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"wanderview: those also annoy me a tiny bit because it's always hard to work myself back to master","msgtype":"m.text"},"ts":1524839662000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Is there anything in the specs that say that .origin should be stripped of some subdomain prefix?","msgtype":"m.text"},"ts":1524839677000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: the serialized origin should be immutable I think","msgtype":"m.text"},"ts":1524839722000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"double checks","msgtype":"m.emote"},"ts":1524839725000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: yeah, it doesn't care about origin's domain field","msgtype":"m.text"},"ts":1524839757000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: so document.domain can't affect origin","msgtype":"m.text"},"ts":1524839766000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Mmhâ€¦","msgtype":"m.text"},"ts":1524839771000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"(i mean, it can affect the concept, but not self.origin)","msgtype":"m.text"},"ts":1524839782000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Ok, so I *think* the test is just dumb, even disregarding the security failures on all major browsers.","msgtype":"m.text"},"ts":1524839860000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: This https://github.com/w3c/web-platform-tests/blob/master/html/browsers/origin/relaxing-the-same-origin-restriction/document_domain_setter.html#L19-L20 sets the iframe URL to some www1.â€¦ URL,","msgtype":"m.text"},"ts":1524839876000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"and window.origin is http://web-platform.test:8000,","msgtype":"m.text"},"ts":1524839905000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"so AFAIK iframe.contentWindow.origin can never be equal to window.origin.","msgtype":"m.text"},"ts":1524839925000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: you might wanna look at blame","msgtype":"m.text"},"ts":1524840201000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: Servo folks wrote that test","msgtype":"m.text"},"ts":1524840209000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"LOL","msgtype":"m.text"},"ts":1524840214000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: I just pinged Alan because I knew he did cross-origin stuff and he may be interested into looking at the failures, and I had not even noticed he wrote it. :)","msgtype":"m.text"},"ts":1524840264000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: if you're worried about security run https://github.com/w3c/web-platform-tests/tree/master/html/browsers/origin/cross-origin-objects btw","msgtype":"m.text"},"ts":1524840327000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Noted.","msgtype":"m.text"},"ts":1524840336000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: I'm under three layers of interdependent blocked upgrades, I just want to land stuff rn. :)","msgtype":"m.text"},"ts":1524840351000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"I've lost trace of my stack, but I'm still doing stuff with document.open() so I guess it's all good","msgtype":"m.text"},"ts":1524840408000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Ah ah ah.","msgtype":"m.text"},"ts":1524840487000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: okay, looking...","msgtype":"m.text"},"ts":1524841073000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"nox: OK, so there's three things going on in https://github.com/w3c/web-platform-tests/blob/master/html/browsers/origin/relaxing-the-same-origin-restriction/document_domain_setter.html...","msgtype":"m.text"},"ts":1524841717000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"1) https://github.com/w3c/web-platform-tests/blob/master/html/browsers/origin/relaxing-the-same-origin-restriction/document_domain_setter.html#L49 does look to be a bug, it assumes origin gets changed to match domain, which it shouldn't.","msgtype":"m.text"},"ts":1524841794000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"2) Rather annoyingly, some of the tests are failing under FF because it's throwing a different kind of security error: \"function() { document.domain = SUFFIX_HOST; }\" threw object \"NS_ERROR_DOM_BAD_DOCUMENT_DOMAIN: Illegal document.domain value\" that is not a DOMException SecurityError","msgtype":"m.text"},"ts":1524841873000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"3) The test assumes that a cross-origin frameElement is null rather than a security exception. I'd need to check the spec here, but there's a good chance this is also a bug with the test.","msgtype":"m.text"},"ts":1524841942000,"senderName":"ajeffrey_","senderId":"ajeffrey_@irc"},
{"content":{"body":"ajeffrey_: I marked it as failing in Servo, FYI.","msgtype":"m.text"},"ts":1524842244000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Would be good to have an issue on that test too","msgtype":"m.text"},"ts":1524858936000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I can look at fixing itâ€¦","msgtype":"m.text"},"ts":1524858951000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: https://github.com/w3c/web-platform-tests/issues/10695","msgtype":"m.text"},"ts":1524859263000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: I assume people realized that would happen but weren't the same people who could set up a bunch of redirects","msgtype":"m.text"},"ts":1524860450000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"FWIW, whenever I link to something with line numbers I make sure it includes the hash, otherwise it'll be broken before long rename or not","msgtype":"m.text"},"ts":1524860493000,"senderName":"foolip","senderId":"foolip@irc"},
{"content":{"body":"A bit of extra work, I know","msgtype":"m.text"},"ts":1524860503000,"senderName":"foolip","senderId":"foolip@irc"}
]