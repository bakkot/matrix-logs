[
{"content":{"body":"AutomatedTester: Are you familiar with https://www.w3.org/2001/tag/doc/promises-guide/? It has terminology for manipulating promises.","msgtype":"m.text"},"ts":1486771577000,"senderName":"jyasskin","senderId":"jyasskin@irc"},
{"content":{"body":"annevk: now wondering under what conditions browsers send Origin: null. I realize for script running from file: origins, and data:, and for <iframe sandbox=\"allow-same-origin\">. Are there other cases?","msgtype":"m.text"},"ts":1486803973000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: redirects across origins","msgtype":"m.text"},"ts":1486804008000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: if iframe has allow-same-origin it will not be null","msgtype":"m.text"},"ts":1486804039000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: effectively when a request was from an opague origin or more than one origin was involved in the request due to redirects","msgtype":"m.text"},"ts":1486804102000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: oh I guess I meant without allow-same-origin","msgtype":"m.text"},"ts":1486805531000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"so about redirects across origins, to be clear, you mean if a request to, e.g., http://example.com/api redirects to http://api.example.com then the Origin gets set to null?","msgtype":"m.text"},"ts":1486805658000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: if the request to example.com/api was a cross-origin request to begin with","msgtype":"m.text"},"ts":1486805836000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah that’s the context I meant","msgtype":"m.text"},"ts":1486805857000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"then yes","msgtype":"m.text"},"ts":1486805879000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"oK","msgtype":"m.text"},"ts":1486805907000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"thanks","msgtype":"m.text"},"ts":1486805908000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: what happens is that request's origin gets set to a new opaque origin, and when that is serialized you get `null`","msgtype":"m.text"},"ts":1486805909000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yup","msgtype":"m.text"},"ts":1486805917000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I knew about the opaque origin gets serialized null thing, just didn’t realize it happened for redirects in that context","msgtype":"m.text"},"ts":1486805978000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"this is in the Fetch spec?","msgtype":"m.text"},"ts":1486805986000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: https://fetch.spec.whatwg.org/#http-redirect-fetch step 10","msgtype":"m.text"},"ts":1486806199000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: arigatou","msgtype":"m.text"},"ts":1486806374000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: curious spelling","msgtype":"m.text"},"ts":1486806473000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hipster Japanese","msgtype":"m.text"},"ts":1486806514000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hah","msgtype":"m.text"},"ts":1486806520000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: that’s a actually pretty-traditional way to romanize it. It’s the most literal transliteration of the actual phonetics","msgtype":"m.text"},"ts":1486806595000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"a-ri-ga-to-u","msgtype":"m.text"},"ts":1486806604000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"あ-り-が-と-う","msgtype":"m.text"},"ts":1486806624000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Oh","msgtype":"m.text"},"ts":1486806870000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"in this context \"ou\" is pronounced as a \"long o\". I enjoy the romanization where they go the extra step for you and use ō, so \"arigatō\"","msgtype":"m.text"},"ts":1486823848000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"annevk: danke","msgtype":"m.text"},"ts":1486851020000,"senderName":"GPHemsley","senderId":"GPHemsley@irc"}
]