[
{"content":{"body":"Stackoverflow finally moving away fully from non-TLS https://meta.stackexchange.com/questions/292058/network-wide-https-its-time","msgtype":"m.text"},"ts":1489022483000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"about time","msgtype":"m.text"},"ts":1489023184000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"srsly","msgtype":"m.text"},"ts":1489024190000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"MikeSmith: Bugzilla spam: https://www.w3.org/Bugs/Public/show_bug.cgi?id=30073","msgtype":"m.text"},"ts":1489047861000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"looks","msgtype":"m.emote"},"ts":1489047873000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"noah, at 2017-03-08 05:55 UTC, annevk said: we can reword the IPv6 serializer to make it clearer","msgtype":"m.text"},"ts":1489048504000,"senderName":"botie","senderId":"botie@irc"},
{"content":{"body":"annevk: üëçüèª","msgtype":"m.text"},"ts":1489048563000,"senderName":"noah","senderId":"noah@irc"},
{"content":{"body":"noah: if you want, you can even try to do so yourself","msgtype":"m.text"},"ts":1489048630000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"wondering why https://github.com/jsdom/whatwg-url uses https://github.com/Sebmaster/tr46.js as opposed to https://github.com/jcranmer/idna-uts46","msgtype":"m.text"},"ts":1489048638000,"senderName":"noah","senderId":"noah@irc"},
{"content":{"body":"if i can make sense of it yeah","msgtype":"m.text"},"ts":1489048699000,"senderName":"noah","senderId":"noah@irc"},
{"content":{"body":"Subresource Integrity getting implemented in WebKit https://bugs.webkit.org/show_bug.cgi?id=148363 patch under review","msgtype":"m.text"},"ts":1489049040000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Sebmaster: Domenic: maybe you know the answer?‚òùüèª","msgtype":"m.text"},"ts":1489049130000,"senderName":"noah","senderId":"noah@irc"},
{"content":{"body":"Domenic: thanks... so Unloaded is not a thing anymore","msgtype":"m.text"},"ts":1489068241000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: would appreciate input on https://github.com/whatwg/fetch/pull/502","msgtype":"m.text"},"ts":1489068667000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I'm sorry, but I don't have an opinion on that... seems fine either way","msgtype":"m.text"},"ts":1489068931000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"annevk: maybe mcmanus or someone on his team would have an opinion","msgtype":"m.text"},"ts":1489068951000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: I mostly want to know whether we can change","msgtype":"m.text"},"ts":1489068958000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"wanderview: I wish it was easier to get input from them","msgtype":"m.text"},"ts":1489068967000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"anyway, thanks","msgtype":"m.text"},"ts":1489068985000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I mean, we can do anything we want... but I doubt we would make a change immediately","msgtype":"m.text"},"ts":1489068989000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"annevk: sorry, I'm really slammed with this deadline","msgtype":"m.text"},"ts":1489068998000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: I found a bug in https://github.com/w3c/web-platform-tests/blob/master/XMLHttpRequest/open-url-redirected-worker-origin.htm and will post a patch to WPT","msgtype":"m.text"},"ts":1489069008000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: oh?","msgtype":"m.text"},"ts":1489069045000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: I changed a whole lot of XHR infrastructure to be more sensitive to casing","msgtype":"m.text"},"ts":1489069066000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"wanderview: so this test ends up failing because it expects lowercase header names","msgtype":"m.text"},"ts":1489069078000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ah, ok","msgtype":"m.text"},"ts":1489069085000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"sounds good","msgtype":"m.text"},"ts":1489069112000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"annevk: I was worried the referer behavior was wrong or something","msgtype":"m.text"},"ts":1489069123000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"annevk: I copied most of that test from another test (like all good tests are created)","msgtype":"m.text"},"ts":1489069152000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"annevk: maybe you know? wondering why github.com/jsdom/whatwg-url uses github.com/Sebmaster/tr46.js as opposed to github.com/jcranmer/idna-uts46","msgtype":"m.text"},"ts":1489087873000,"senderName":"noah","senderId":"noah@irc"},
{"content":{"body":"i guess idna-uts46 is older... but tr46.js has this worrisome issue https://github.com/Sebmaster/tr46.js/issues/6","msgtype":"m.text"},"ts":1489087995000,"senderName":"noah","senderId":"noah@irc"},
{"content":{"body":"is there a decent implementation of uts46 in any language? :-|","msgtype":"m.text"},"ts":1489088066000,"senderName":"noah","senderId":"noah@irc"},
{"content":{"body":"noah: that issue doesn't really count. The unicode tests are... subpar to say the least. A lot of the tests do not apply to uts46","msgtype":"m.text"},"ts":1489088210000,"senderName":"Sebmaster","senderId":"Sebmaster@irc"},
{"content":{"body":"Sebmaster: oh?","msgtype":"m.text"},"ts":1489088318000,"senderName":"noah","senderId":"noah@irc"},
{"content":{"body":"Yeah. It seems there is a single test file for all unicode url standards... which are incompatible with each other sooo","msgtype":"m.text"},"ts":1489088356000,"senderName":"Sebmaster","senderId":"Sebmaster@irc"},
{"content":{"body":"Doesn't really make sense","msgtype":"m.text"},"ts":1489088360000,"senderName":"Sebmaster","senderId":"Sebmaster@irc"},
{"content":{"body":"Not quite sure why we didn't use that other lib. Might not have found it in time","msgtype":"m.text"},"ts":1489088387000,"senderName":"Sebmaster","senderId":"Sebmaster@irc"},
{"content":{"body":"you mean IdnaTest.txt i assume, and by \"all unicode url standards\" do you mean idna2003, idna2008 and uts46?","msgtype":"m.text"},"ts":1489088430000,"senderName":"noah","senderId":"noah@irc"},
{"content":{"body":"noah: I also found IdnaTest.txt problematic: https://lists.w3.org/Archives/Public/www-archive/2017Jan/0011.html","msgtype":"m.text"},"ts":1489088941000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I haven't really started digging yet because I want to hear from implementers","msgtype":"m.text"},"ts":1489088967000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"And from the UTS46 people","msgtype":"m.text"},"ts":1489088978000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Sebmaster: annevk: well, i took a look at the first test failure \"Web Platform Tests Converting <√†◊ê> with type B: AssertionError: toASCII should result in an error\", and chromium seems to agree with IdnaTest.txt, not with tr46.js","msgtype":"m.text"},"ts":1489089097000,"senderName":"noah","senderId":"noah@irc"},
{"content":{"body":"annevk: you ran IdnaTest.txt tests across all browsers and found failures and inconsistencies among browsers. disappointing but good to know, thanks for doing that work","msgtype":"m.text"},"ts":1489089450000,"senderName":"noah","senderId":"noah@irc"},
{"content":{"body":"MikeSmith: fyi https://github.com/htacg/tidy-html5/issues/352#issuecomment-285449909","msgtype":"m.text"},"ts":1489098062000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"looks","msgtype":"m.emote"},"ts":1489098433000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"zcorpan: maybe I should make the checker emit a link to the URL spec in the error messages for URL checks?","msgtype":"m.text"},"ts":1489098604000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: does the checker implement the url spec?","msgtype":"m.text"},"ts":1489098629000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"to the degree that galimatias does","msgtype":"m.text"},"ts":1489098712000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"is it wrong in this case?","msgtype":"m.text"},"ts":1489098722000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I‚Äôm running a fork of galimatias so if it is wrong in any particular case I can just fix it in the fork","msgtype":"m.text"},"ts":1489098771000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"upstream galimatias is no longer being maintained and there are some places where I know it‚Äôs not conforming with the current spec","msgtype":"m.text"},"ts":1489098801000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"and I have been having discussions with somebody who may end up providing a new implementation that attempts to fully conform to the current spec and who will maintain it to keep up with any changes to the spec","msgtype":"m.text"},"ts":1489098863000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but don‚Äôt have that in hand yet","msgtype":"m.text"},"ts":1489098876000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"so for now I just have to patch galimatias if any problems are found","msgtype":"m.text"},"ts":1489098895000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"dbaron: any chance I can get your feedback on https://github.com/w3c/csswg-drafts/issues/993 ? :)","msgtype":"m.text"},"ts":1489098906000,"senderName":"mounir","senderId":"mounir@irc"},
{"content":{"body":"i don't know, but was under the impression that galimatias kinda pre-dated whatwg url","msgtype":"m.text"},"ts":1489098930000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: well is there some problem in this particular case? is <a href=\":|\"> valid?","msgtype":"m.text"},"ts":1489098971000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"is there some online conforming parser I can against?","msgtype":"m.text"},"ts":1489099012000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I thought annevk maintained one","msgtype":"m.text"},"ts":1489099021000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: https://a/?| is i think?","msgtype":"m.text"},"ts":1489099036000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"https://quuz.org/url/liveview.html#https://a/?|","msgtype":"m.text"},"ts":1489099048000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"no it's not. https://url.spec.whatwg.org/#url-query-string","msgtype":"m.text"},"ts":1489099152000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1489099163000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"so I guess quuz.org/url doesn‚Äôt show errors for syntax violations","msgtype":"m.text"},"ts":1489099222000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"the code snippet that he posted is an implementation of https://url.spec.whatwg.org/#url-code-points right?","msgtype":"m.text"},"ts":1489099235000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"yup","msgtype":"m.text"},"ts":1489099245000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"though btw what I do in the checker is, it uses http://example.com/foo as the base","msgtype":"m.text"},"ts":1489099301000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"which is arbitrary but it needs a base to parse against","msgtype":"m.text"},"ts":1489099320000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"https://github.com/validator/validator/blob/master/src/nu/validator/datatype/IriRef.java#L129","msgtype":"m.text"},"ts":1489099478000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"anyway as far as tidy goes, the much bigger problem with it is, it‚Äôs using an ad-hoc parser that‚Äôs not anywhere even close to conforming to the HTML spec","msgtype":"m.text"},"ts":1489099540000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"mounir: done","msgtype":"m.text"},"ts":1489099557000,"senderName":"dbaron","senderId":"dbaron@irc"},
{"content":{"body":"zcorpan: hmm it just now occurred to me that I may be able to use jsdom/whatwg-url as the URL parser for the HTML checker","msgtype":"m.text"},"ts":1489099720000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"zcorpan: by using the Java8 Nashorn stuff to expose it to the checker Java code","msgtype":"m.text"},"ts":1489099771000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"oh but only if jsdom/whatwg-url emits good errors for syntax violations","msgtype":"m.text"},"ts":1489099859000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: it does not tell you what's wrong","msgtype":"m.text"},"ts":1489099983000,"senderName":"Sebmaster","senderId":"Sebmaster@irc"},
{"content":{"body":"only that there is (and slightly more detailed if you use private api)","msgtype":"m.text"},"ts":1489100000000,"senderName":"Sebmaster","senderId":"Sebmaster@irc"},
{"content":{"body":"Sebmaster: yeah just discovered that from looking at the code :(","msgtype":"m.text"},"ts":1489100001000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"mounir: wonder if we should drop the recommendation about clamping to 24? or try to somehow research what the web compat impact would be for returning lower values","msgtype":"m.text"},"ts":1489100034000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Sebmaster: I think it would be useful to a lot of people if it did emit error messages to the console for the parseError = true cases","msgtype":"m.text"},"ts":1489100076000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Sebmaster: I thought there was another JS URL parser that did implement error messages","msgtype":"m.text"},"ts":1489100107000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"console is definitely not an option. saving it in the private api might be, but we're currently trying to just very explicitly do what's in the spec so you can put the text next to the code and it lines up perfectly","msgtype":"m.text"},"ts":1489100148000,"senderName":"Sebmaster","senderId":"Sebmaster@irc"},
{"content":{"body":"well a private API would work fine too","msgtype":"m.text"},"ts":1489100227000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"and I support the design choice of having it explicitly do what‚Äôs in the spec so it lines up clearly :)","msgtype":"m.text"},"ts":1489100310000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"makes it much easier to understand the code","msgtype":"m.text"},"ts":1489100327000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Sebmaster: anyway the code for the HTML checker is in Java but Java8 now has this built-in way to use JavaScript code in Java, so if whatwg-url had a way to emit error messages I could (maybe) use it as the URL parser for the HTML checker","msgtype":"m.text"},"ts":1489100482000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I still think the best way to validate URLs is to implement the grammar in the \"URL writing\" section of the spec","msgtype":"m.text"},"ts":1489101246000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"That'll be much easier","msgtype":"m.text"},"ts":1489101250000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"https://url.spec.whatwg.org/#url-writing this would take like an hour","msgtype":"m.text"},"ts":1489101287000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"zcorpan: I can't remember off hand why I campled to 24 but it sounds that it would provide little benefit to give lower values, wouldn't it?","msgtype":"m.text"},"ts":1489102169000,"senderName":"mounir","senderId":"mounir@irc"},
{"content":{"body":"zcorpan: though, Blink, I believe, would return 2 for BW devices (at least, I think the color MQ does)","msgtype":"m.text"},"ts":1489102185000,"senderName":"mounir","senderId":"mounir@irc"},
{"content":{"body":"I guess maybe 1 :)","msgtype":"m.text"},"ts":1489102196000,"senderName":"mounir","senderId":"mounir@irc"},
{"content":{"body":"mounir: maybe it was something I suggested ^_^","msgtype":"m.text"},"ts":1489102223000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: happy to drop it","msgtype":"m.text"},"ts":1489102339000,"senderName":"mounir","senderId":"mounir@irc"},
{"content":{"body":"dbaron: would you be happy with this?","msgtype":"m.text"},"ts":1489102353000,"senderName":"mounir","senderId":"mounir@irc"},
{"content":{"body":"mounir: I'd be ok with allowing <24.","msgtype":"m.text"},"ts":1489102385000,"senderName":"dbaron","senderId":"dbaron@irc"},
{"content":{"body":"zcorpan, dbaron: updated :)","msgtype":"m.text"},"ts":1489102859000,"senderName":"mounir","senderId":"mounir@irc"}
]