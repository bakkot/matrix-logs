[
{"content":{"body":"annevk: workers currently use \"same-origin\"? So they don't work cross origin at all??","msgtype":"m.text"},"ts":1454374607000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I think I'll just loosen that...","msgtype":"m.text"},"ts":1454374620000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"this turns out to be something web developers are doing massive hacks to get around","msgtype":"m.text"},"ts":1454375493000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"hosting .html files on a domain that postmessage back and forth","msgtype":"m.text"},"ts":1454375499000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"i am happy with my decision to loosen this","msgtype":"m.text"},"ts":1454375508000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: i would think this is something that has been discussed before. i don't recall off the top of my head but i think this is something that we'd allow at some point but there are some security things to consider, maybe for shared workers in particular","msgtype":"m.text"},"ts":1454375768000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"yeah maybe i am getting overzealous here...","msgtype":"m.text"},"ts":1454375782000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"i can probably manage not to for now","msgtype":"m.text"},"ts":1454375796000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"beverloo: https://tools.ietf.org/id/draft-thomson-webpush-vapid-02.html doesn't define any requirements for UAs?","msgtype":"m.text"},"ts":1454384897000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"beverloo: the interaction is strictly between a conforming Application Server being required to send a JWT to make use of the feature, and a conforming Push Service being required to act on that as specified?","msgtype":"m.text"},"ts":1454385104000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"mkwst, yt?","msgtype":"m.text"},"ts":1454389215000,"senderName":"tripu","senderId":"tripu@irc"},
{"content":{"body":"I think CORS workers might be fine, as long as they execute with the correct origin","msgtype":"m.text"},"ts":1454395820000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"So I'm guessing I need to update all the build script things to continue doing things?","msgtype":"m.text"},"ts":1454405652000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: thank you for the review on cross-origin objects, much appreciated","msgtype":"m.text"},"ts":1454405694000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yeah, please start by pulling from the watssi repo and rebuilding it","msgtype":"m.text"},"ts":1454406699000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"then the html-build repo","msgtype":"m.text"},"ts":1454406712000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"though there's still a lot that needs to be done yet to eliminate the need to rebuild the cldr and entity stuff every single time","msgtype":"m.text"},"ts":1454406883000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"But the state of master in both places is progress","msgtype":"m.text"},"ts":1454406924000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith, there are two concepts in that draft","msgtype":"m.text"},"ts":1454407542000,"senderName":"beverloo","senderId":"beverloo@irc"},
{"content":{"body":"(1) server authentication, which is between the application server and the push service","msgtype":"m.text"},"ts":1454407551000,"senderName":"beverloo","senderId":"beverloo@irc"},
{"content":{"body":"and (2) subscription restriction (neï¿½ subscription association), which uses the public key of said authentication to link a subscription to a certain application server","msgtype":"m.text"},"ts":1454407577000,"senderName":"beverloo","senderId":"beverloo@irc"},
{"content":{"body":"MikeSmith: what did you think of my suggestions in that thread?","msgtype":"m.text"},"ts":1454407594000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"the UA implication of creating a subscription restriction is documented in 5.1, with the Crypto-Key header","msgtype":"m.text"},"ts":1454407597000,"senderName":"beverloo","senderId":"beverloo@irc"},
{"content":{"body":"W3C PR is here: https://github.com/w3c/push-api/pull/182","msgtype":"m.text"},"ts":1454407612000,"senderName":"beverloo","senderId":"beverloo@irc"},
{"content":{"body":"Documented merge policy for Notifications API","msgtype":"m.text"},"ts":1454408141000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Will slowly copy-and-paste that throughout repositories, it basically defers to whatwg/html TEAM","msgtype":"m.text"},"ts":1454408160000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Is it fair to say that the way <link rel=\"stylesheet\"> blocks rendering until the sheet loads is totally undefined?","msgtype":"m.text"},"ts":1454408472000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"annevk, thanks :) much more discoverable!","msgtype":"m.text"},"ts":1454408634000,"senderName":"beverloo","senderId":"beverloo@irc"},
{"content":{"body":"JakeA: rendering is mostly undefined","msgtype":"m.text"},"ts":1454408886000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: we sorta defined when it can happen","msgtype":"m.text"},"ts":1454408898000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: right, but I don't see anything that skips rendering if there's a pending stylesheet","msgtype":"m.text"},"ts":1454408922000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"Yeah I don't think that exists, stylesheet loading is also somewhat tricky due to media queries","msgtype":"m.text"},"ts":1454408959000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"We do define that <script>s are blocked based on stylesheets that need to load I think","msgtype":"m.text"},"ts":1454408991000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Although you could implement that by halting script execution the moment script asks for something layouty, like getComputedStyle()","msgtype":"m.text"},"ts":1454409021000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Script asking for something layouty is also not defined","msgtype":"m.text"},"ts":1454409041000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I keep hoping zcorpan will get to that one day","msgtype":"m.text"},"ts":1454409048000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk, spec does say \"feel free to stop blocking scripts at any time\", though","msgtype":"m.text"},"ts":1454409213000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"That is not a literal quote it seems","msgtype":"m.text"},"ts":1454409255000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"It is not :)","msgtype":"m.text"},"ts":1454409259000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Look for pending script-blocking stylesheet or something along those lines","msgtype":"m.text"},"ts":1454409281000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"heycam|away: ping","msgtype":"m.text"},"ts":1454411845000,"senderName":"mounir","senderId":"mounir@irc"},
{"content":{"body":"So now you can no longer annotate PDFs with signatures in Acrobat Reader unless you buy some pro option, what's a good alternative?","msgtype":"m.text"},"ts":1454415635000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"It seems I'm dumb and Preview can handle that perfectly fine still","msgtype":"m.text"},"ts":1454416092000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"So maybe I should just review Adobe software","msgtype":"m.text"},"ts":1454416105000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"s/review/remove/","msgtype":"m.text"},"ts":1454416110000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"beverloo: thanksãƒ¼it's interesting to finally see all the Push stuff becoming real","msgtype":"m.text"},"ts":1454416181000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: which thread? > what did you think of my suggestions in that thread?","msgtype":"m.text"},"ts":1454418845000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: https://github.com/whatwg/html-build/issues/62#issuecomment-177497253","msgtype":"m.text"},"ts":1454418912000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ah that yeah","msgtype":"m.text"},"ts":1454419041000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: yeah I pretty much agree. It seems like we're really over-automating it all","msgtype":"m.text"},"ts":1454419129000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I think it makes sense to keep the existing build tooling that we have for generating the end results, but we can just periodically run it manually to see if anything's actually changed would cause a diff in the spec","msgtype":"m.text"},"ts":1454419234000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"just eyeball it, and if we find that anything's changed, then as you said, somebody just opens a PR and somebody else reviews it, etc.","msgtype":"m.text"},"ts":1454419298000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I'll see if I can make a suitable PR for the entity stuff","msgtype":"m.text"},"ts":1454419329000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"OK","msgtype":"m.text"},"ts":1454419335000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"A proper fix for the CLDR stuff would involve new specification text I think","msgtype":"m.text"},"ts":1454419346000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah I guess so","msgtype":"m.text"},"ts":1454419361000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"it's sort of moot since maybe nobody actually is even attempting to follow the spec on that","msgtype":"m.text"},"ts":1454419386000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but instead using whatever result they get from their own ICU integration","msgtype":"m.text"},"ts":1454419405000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"and maybe not even that","msgtype":"m.text"},"ts":1454419412000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but the entities stuff is different, as you pointed out","msgtype":"m.text"},"ts":1454419438000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"that would be more or less what we require though","msgtype":"m.text"},"ts":1454419444000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"so yeah I think re-wording the requirements along those lines would be an improvement","msgtype":"m.text"},"ts":1454419478000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"and would address the \"moving target\" problem that philipj pointed out","msgtype":"m.text"},"ts":1454419499000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"anyway the entities stuff more clearly has actual impact and I agree that we should not just be silently introducing changes to the spec from the build without noticing it","msgtype":"m.text"},"ts":1454419575000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"or rather more like we should only be intentionally changing those requirements and never unintentionally","msgtype":"m.text"},"ts":1454419616000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"well stated like that, it's true of anything in the spec of course","msgtype":"m.text"},"ts":1454419650000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but you know what I mean","msgtype":"m.text"},"ts":1454419655000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Are there other parts of the spec that change silently?","msgtype":"m.text"},"ts":1454419675000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"good point","msgtype":"m.text"},"ts":1454419704000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"yeah it doesn't actually happen","msgtype":"m.text"},"ts":1454419709000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"in practice when we ran the entities build stuff and it actually resulted in a difference, we would notice","msgtype":"m.text"},"ts":1454419756000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"and then we would decide whether to actually commit the resulting change or not","msgtype":"m.text"},"ts":1454419802000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith, yes :) we're implementing it in both gcm and chrome","msgtype":"m.text"},"ts":1454420554000,"senderName":"beverloo","senderId":"beverloo@irc"},
{"content":{"body":"Mozilla will adopt as well, which will bring our implementations completely in line","msgtype":"m.text"},"ts":1454420570000,"senderName":"beverloo","senderId":"beverloo@irc"},
{"content":{"body":"super","msgtype":"m.text"},"ts":1454420599000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"gcm?","msgtype":"m.text"},"ts":1454420635000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Google Cloud Messaging, our backend for the Push API","msgtype":"m.text"},"ts":1454420731000,"senderName":"beverloo","senderId":"beverloo@irc"},
{"content":{"body":"Oh my, trying to extract the entity stuff is harder than I thought","msgtype":"m.text"},"ts":1454421263000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"bash is not for me I think","msgtype":"m.text"},"ts":1454421273000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I don't think bash is for anyone","msgtype":"m.text"},"ts":1454421333000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"sure it is","msgtype":"m.text"},"ts":1454421614000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"that's what TimBl said at the Olympics","msgtype":"m.text"},"ts":1454421624000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"So it's not even clear to me what we want to do here","msgtype":"m.text"},"ts":1454421629000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"\"Bash is for everyone\"","msgtype":"m.text"},"ts":1454421633000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"We could store unicode.xml, we could just store the output of that","msgtype":"m.text"},"ts":1454421642000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"we just need the output of it","msgtype":"m.text"},"ts":1454421662000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"we don't need to store unicode.xml","msgtype":"m.text"},"ts":1454421679000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Yeah, I think we want some kind of build-entities.sh script","msgtype":"m.text"},"ts":1454421695000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"And put that in whatwg/html","msgtype":"m.text"},"ts":1454421700000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"And store the final entity files in whatwg/html too","msgtype":"m.text"},"ts":1454421717000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"And remove everything from html-build except for merging those entity files into the final output","msgtype":"m.text"},"ts":1454421734000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Does that make sense? That way entities and any changes to them become version controlled and whenever someone wants to change them you just run the build-entities.inc script and create a PR for that","msgtype":"m.text"},"ts":1454421800000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"That sounds reasonable","msgtype":"m.text"},"ts":1454421908000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"I agree we whould put the output in whatwg/html under version control","msgtype":"m.text"},"ts":1454421932000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but I suspect that Domenic would say that we don't want build scripts in the html repo","msgtype":"m.text"},"ts":1454421959000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"and I pretty much agree with that","msgtype":"m.text"},"ts":1454421982000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Ms2ger: Like JS? :3","msgtype":"m.text"},"ts":1454422003000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"(That bash isn't for anyone.)","msgtype":"m.text"},"ts":1454422011000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"No comment","msgtype":"m.text"},"ts":1454422026000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"MikeSmith: I guess we can put the actual script in html-build","msgtype":"m.text"},"ts":1454422047000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yeah, and it can write the output back to the html repo","msgtype":"m.text"},"ts":1454422077000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"if we want to do it that way","msgtype":"m.text"},"ts":1454422085000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: yeah","msgtype":"m.text"},"ts":1454422089000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: you know, I'll give it a go and I'll keep asking questions here","msgtype":"m.text"},"ts":1454422251000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"good plan","msgtype":"m.text"},"ts":1454422293000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Ms2ger: Hah.","msgtype":"m.text"},"ts":1454422381000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"MikeSmith: how does entities-dtd.url end up in the HTML standard?","msgtype":"m.text"},"ts":1454423609000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: I have a somewhat standalone bash script now that generates all these files (though not super clean yet), but I'm not sure how to hook up the pieces","msgtype":"m.text"},"ts":1454423636000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I think I found it, pre-process-main.pl does some magic","msgtype":"m.text"},"ts":1454424012000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Pfff","msgtype":"m.text"},"ts":1454424051000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah that","msgtype":"m.text"},"ts":1454424082000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"JakeA: what is a URI? :( :( :(","msgtype":"m.text"},"ts":1454424375000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: An amputated URL.","msgtype":"m.text"},"ts":1454424406000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Domenic: I went with the wording in document.baseURI","msgtype":"m.text"},"ts":1454424419000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"It's a URL that says \"I hang out with Roy\"","msgtype":"m.text"},"ts":1454424425000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"JakeA: legacy API boo","msgtype":"m.text"},"ts":1454424453000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Ah, I need to consistently annotate those with [sic] just like we do with Referer","msgtype":"m.text"},"ts":1454424480000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Folks keep copying from that pattern rather than something like new URL()","msgtype":"m.text"},"ts":1454424514000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: ah, had no idea it was legacy. What's the non-legacy version?","msgtype":"m.text"},"ts":1454424555000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: oh there's no replacement. Just it is a legacy name.","msgtype":"m.text"},"ts":1454424646000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"But yeah, the HTML standard calls this the \"base URL\"","msgtype":"m.text"},"ts":1454425369000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I still think it would be super weird if service workers ended up with a different answer there from the rest of the platform, although that redirect case you pointed out is interesting (and probably a security bug)","msgtype":"m.text"},"ts":1454425419000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hmm, is it possible to extend an ES6 class using ES5 syntax, i.e. class Parent {}; var Child = function() { Parent.call(this, throws); } ?","msgtype":"m.text"},"ts":1454425431000,"senderName":"ondras","senderId":"ondras@irc"},
{"content":{"body":"ondras: no","msgtype":"m.text"},"ts":1454425549000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: okay, and via Reflect.construct ?","msgtype":"m.text"},"ts":1454425583000,"senderName":"ondras","senderId":"ondras@irc"},
{"content":{"body":"ondras: pretty sure still no, but maybe there is a clever hack","msgtype":"m.text"},"ts":1454425614000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: okay, thanks","msgtype":"m.text"},"ts":1454425634000,"senderName":"ondras","senderId":"ondras@irc"},
{"content":{"body":"annevk: @fetchstandard should retweet https://twitter.com/webkit/status/694536332941627393","msgtype":"m.text"},"ts":1454425822000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Also http://trac.webkit.org/changeset/195954 \"reviewed by Darin Adler\"","msgtype":"m.text"},"ts":1454425849000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"annevk: I don't think it's as simple as that. Firefox may use response.url as the base for pages, but that's not in the spec, and SW is the first time it matters vs request.url","msgtype":"m.text"},"ts":1454426136000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"annevk: fwiw, developers seem to be thinking of the SW as a server, so they're happy for even CSS to get the base of the request url in SW responses :/","msgtype":"m.text"},"ts":1454426178000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: I suspect Firefox doesn't actually do that, I'm just saying that you can explain the entire platform today through that behavior","msgtype":"m.text"},"ts":1454426180000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: that was the original argument, but we wanted fetch() to be a no-op","msgtype":"m.text"},"ts":1454426207000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yeah, surprised that devs don't seem to want that. Going to make sure those that run large SW projects chime in (eg Guardian, who rely on pass-through fetch)","msgtype":"m.text"},"ts":1454426254000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"I'm somewhat uncomfortable by the way we seem to go about deciding this","msgtype":"m.text"},"ts":1454426506000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"E.g., a proxy server cannot trigger dialogs either, should we remove the window feature?","msgtype":"m.text"},"ts":1454426529000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"What about mixed content?","msgtype":"m.text"},"ts":1454426535000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I really wish it was a bit more principled rather than ad-hoc","msgtype":"m.text"},"ts":1454426567000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: supplied PRs","msgtype":"m.text"},"ts":1454428051000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: Domenic: I tested it locally and it seems to work fine","msgtype":"m.text"},"ts":1454428116000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"philipj: Domenic: downloading here is nearly instant... generating is what you call slooow","msgtype":"m.text"},"ts":1454434451000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"philipj: Domenic: maybe because of my 2012 MacBook Air, I guess you both might have a Pro?","msgtype":"m.text"},"ts":1454434482000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: there are two kinds of generating... the initial \"building the database\" from unicode.xml, and the creation of the .inc and .xml files","msgtype":"m.text"},"ts":1454434526000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I think currently it does unicode.xml -> database -> { .inc, .json, .url }, with the first arrow being slow","msgtype":"m.text"},"ts":1454434549000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"If we turned it into .json -> { .inc, url } that should be fast","msgtype":"m.text"},"ts":1454434562000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"(with a precomutation of unicode.xml -> database -> .json)","msgtype":"m.text"},"ts":1454434572000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Hmm, I'm not super happy on spending much more time on this, but if you both are...","msgtype":"m.text"},"ts":1454434623000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I see your point of view about source of truth though, but that would mean we should check in unicode.xml rather than the output of our scripts","msgtype":"m.text"},"ts":1454434789000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Otherwise you're always somewhere in the middle","msgtype":"m.text"},"ts":1454434801000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"it depends... I think it would be OK to check in entities.json and then have a update-entities-json that pulls in unicode.xml. That will generate readable entities.json diffs","msgtype":"m.text"},"ts":1454434957000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"All right, you guys didn't exactly thrill me with your brainstorming last time, but what's a good example of a module worker. Basically, what's a good example of a small worker that might need to call out to a library.","msgtype":"m.text"},"ts":1454436202000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: some networking worker that imports a library from a service?","msgtype":"m.text"},"ts":1454436290000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"import starwars; starwars.findAll(\"rey\").then(...)","msgtype":"m.text"},"ts":1454436364000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"seems reasonable, i can work with that","msgtype":"m.text"},"ts":1454436476000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"annevk: would love to hear your thoughts on https://github.com/w3c/preload/issues/55 < getting lots of inbound pings from developers asking for this.","msgtype":"m.text"},"ts":1454436499000,"senderName":"igrigorik","senderId":"igrigorik@irc"},
{"content":{"body":"igrigorik: expose more Fetch parameters?","msgtype":"m.text"},"ts":1454436550000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"igrigorik: the alternative would be that \"as\" doesn't map to \"type\", but that it maps to \"initiator\" and we just add a bunch of stuff there","msgtype":"m.text"},"ts":1454436607000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"igrigorik: worker/sharedworker should be \"script\" though I think","msgtype":"m.text"},"ts":1454436653000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"re-reading through the spec.. I guess extending initiator would do the trick. although I'm not entirely clear on difference between initiator and type?","msgtype":"m.text"},"ts":1454436772000,"senderName":"igrigorik","senderId":"igrigorik@irc"},
{"content":{"body":"igrigorik: type is a category","msgtype":"m.text"},"ts":1454437297000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"igrigorik: initiator is ideally a single thing","msgtype":"m.text"},"ts":1454437308000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"igrigorik: though it's also a bit of a hack, see https://github.com/whatwg/fetch/issues/93","msgtype":"m.text"},"ts":1454437317000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Any googlers with good contacts to AdSense team?","msgtype":"m.text"},"ts":1454437745000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"annevk: ah, right.. trying to page that discussion back into my head.","msgtype":"m.text"},"ts":1454438053000,"senderName":"igrigorik","senderId":"igrigorik@irc"},
{"content":{"body":"annevk: http://output.jsbin.com/teyede < wdyt?","msgtype":"m.text"},"ts":1454438069000,"senderName":"igrigorik","senderId":"igrigorik@irc"},
{"content":{"body":"I think we should only have initiator","msgtype":"m.text"},"ts":1454438157000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"But for <object> that becomes a little weird","msgtype":"m.text"},"ts":1454438199000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Is the <a> that targets it the initiator?","msgtype":"m.text"},"ts":1454438209000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"agreed, I just added new column so we can compare, we definitely don't need both","msgtype":"m.text"},"ts":1454438216000,"senderName":"igrigorik","senderId":"igrigorik@irc"},
{"content":{"body":"Same for <iframe> and such","msgtype":"m.text"},"ts":1454438230000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"That's why we added the destination column","msgtype":"m.text"},"ts":1454438243000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah, except destination doesn't help the preload use case.. I'm thinking we can just split the initiator further -- e.g. break object/embed apart, and give iframe/frame their own?","msgtype":"m.text"},"ts":1454438559000,"senderName":"igrigorik","senderId":"igrigorik@irc"},
{"content":{"body":"annevk: another attempt @ https://docs.google.com/spreadsheets/d/1YXoso_Vm0tCuGjFxNmD70UlQd87PKIgGBM97DG9E2L0/edit#gid=0 (easier to iterate on it in a spreadsheet :))","msgtype":"m.text"},"ts":1454439073000,"senderName":"igrigorik","senderId":"igrigorik@irc"},
{"content":{"body":"annevk: if that looks ~reasonable, I can PR it.","msgtype":"m.text"},"ts":1454439546000,"senderName":"igrigorik","senderId":"igrigorik@irc"},
{"content":{"body":"jsbell: I think I reviewed something in critic...","msgtype":"m.text"},"ts":1454439610000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"That's how much confidence I have in my use of critic too","msgtype":"m.text"},"ts":1454439670000,"senderName":"jsbell","senderId":"jsbell@irc"},
{"content":{"body":"jsbell: any thoughts on when the .add() and .addAll() changes might happen in blink?","msgtype":"m.text"},"ts":1454440059000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: which specifically? (sorry, I haven't been thinking about SW/Cache at all lately)","msgtype":"m.text"},"ts":1454440161000,"senderName":"jsbell","senderId":"jsbell@irc"},
{"content":{"body":"jsbell: making them reject if any response.ok() returns false","msgtype":"m.text"},"ts":1454440182000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"to prevent 40x and 50x responses getting cached","msgtype":"m.text"},"ts":1454440196000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"ah, right. checking...","msgtype":"m.text"},"ts":1454440197000,"senderName":"jsbell","senderId":"jsbell@irc"},
{"content":{"body":"wanderview: not even finding a tracking bug on that. :P Seems easy though. (aside; need to ensure the JakeA -> crbug pipeline is unclogged)","msgtype":"m.text"},"ts":1454440634000,"senderName":"jsbell","senderId":"jsbell@irc"},
{"content":{"body":"wanderview: crbug.com/583407 I'll try and bash that out","msgtype":"m.text"},"ts":1454440777000,"senderName":"jsbell","senderId":"jsbell@irc"},
{"content":{"body":"igrigorik: I guess the problem is that those are not the actual initiators","msgtype":"m.text"},"ts":1454441803000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"igrigorik: e.g., often it would be <a> or <form>","msgtype":"m.text"},"ts":1454441814000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jsbell: I'm going to try to get it in FF45 which releases mid-March...  want to minimize chance people start using opaque responses a lot in their caches","msgtype":"m.text"},"ts":1454441914000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"annevk: current definition doesn't seem to address that either though, right?","msgtype":"m.text"},"ts":1454442319000,"senderName":"igrigorik","senderId":"igrigorik@irc"},
{"content":{"body":"anyone seen rniwa?","msgtype":"m.text"},"ts":1454442353000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"annevk: or, I guess <a> would fall under \"HTML's navigate algorithm\" row?","msgtype":"m.text"},"ts":1454442389000,"senderName":"igrigorik","senderId":"igrigorik@irc"},
{"content":{"body":"igrigorik: <a> and <form> are navigate","msgtype":"m.text"},"ts":1454442544000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"igrigorik: as is <iframe src>","msgtype":"m.text"},"ts":1454442553000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"igrigorik: <object src> is ambiguous","msgtype":"m.text"},"ts":1454442560000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"<a> targeted at <object> is ambiguous (may or may not work, depending on what mode <object> is in)","msgtype":"m.text"},"ts":1454442608000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"right, ok. so, perhaps \"initiator\" is not the right tool for the job here then?","msgtype":"m.text"},"ts":1454442822000,"senderName":"igrigorik","senderId":"igrigorik@irc"},
{"content":{"body":"yeah, several axes might be the way to go after all","msgtype":"m.text"},"ts":1454442898000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"axis?","msgtype":"m.text"},"ts":1454442907000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hmm, what if we \"refined\" destination? https://docs.google.com/spreadsheets/d/1YXoso_Vm0tCuGjFxNmD70UlQd87PKIgGBM97DG9E2L0/edit#gid=0 (reload)","msgtype":"m.text"},"ts":1454443101000,"senderName":"igrigorik","senderId":"igrigorik@irc"},
{"content":{"body":"that seems more reasonable, basically splitting subresource","msgtype":"m.text"},"ts":1454443304000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"well, and unknown","msgtype":"m.text"},"ts":1454443319000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yep. should I take a run at a PR?","msgtype":"m.text"},"ts":1454443529000,"senderName":"igrigorik","senderId":"igrigorik@irc"},
{"content":{"body":"igrigorik: I think it would be good to start with an issue to get feedback from the people that helped design type/destination","msgtype":"m.text"},"ts":1454443693000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"igrigorik: I'd like to hear what ehsan and sicking think","msgtype":"m.text"},"ts":1454443714000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"igrigorik: issue + PR is fine too though","msgtype":"m.text"},"ts":1454443723000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"sgtm, on it.","msgtype":"m.text"},"ts":1454443732000,"senderName":"igrigorik","senderId":"igrigorik@irc"},
{"content":{"body":"wanderview: merged!","msgtype":"m.text"},"ts":1454443767000,"senderName":"jsbell","senderId":"jsbell@irc"},
{"content":{"body":"thanks!","msgtype":"m.text"},"ts":1454443774000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"now AFK","msgtype":"m.text"},"ts":1454443776000,"senderName":"jsbell","senderId":"jsbell@irc"},
{"content":{"body":"jgraham_: can you let me know when we next merge wpt to gecko?","msgtype":"m.text"},"ts":1454443794000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"(the indexeddb test fixes should be much simpler)","msgtype":"m.text"},"ts":1454443806000,"senderName":"jsbell","senderId":"jsbell@irc"},
{"content":{"body":"igrigorik: quite a neat solution I think","msgtype":"m.text"},"ts":1454444480000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"igrigorik: hopefully that feeling remains ðŸ˜ƒ","msgtype":"m.text"},"ts":1454444492000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"wanderview: Is that a request? I can kick it off now if you like","msgtype":"m.text"},"ts":1454445318000,"senderName":"jgraham_","senderId":"jgraham_@irc"},
{"content":{"body":"jgraham_: if its not too inconvenient... I have a bug I want to implement soon, but I'd like to base it on top of jsbell's test changes","msgtype":"m.text"},"ts":1454445943000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"tomorrow is fine too","msgtype":"m.text"},"ts":1454445951000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"worker modules \\o/","msgtype":"m.text"},"ts":1454446135000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"wanderview; will you fail everything in an addAll batch if any response is !ok?","msgtype":"m.text"},"ts":1454446324000,"senderName":"jsbell","senderId":"jsbell@irc"},
{"content":{"body":"jsbell: I thought that was the intention","msgtype":"m.text"},"ts":1454446341000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: I'm still parsing the discussion","msgtype":"m.text"},"ts":1454446354000,"senderName":"jsbell","senderId":"jsbell@irc"},
{"content":{"body":"jsbell: I guess we could clarify with JakeA (but I hear he is at the pub)","msgtype":"m.text"},"ts":1454446359000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: implication, then, is that everything is delayed until we have headers back on all of them, which is a bit of a bummer, but I suppose you can just add() in a loop instead if you want speed.","msgtype":"m.text"},"ts":1454446482000,"senderName":"jsbell","senderId":"jsbell@irc"},
{"content":{"body":"jsbell: we already need that in order to do the \"reject if an entry matches an earlier entry in the same addAll()\" because matching requires vary header stuff","msgtype":"m.text"},"ts":1454446531000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: ... right. Okay, and we already do wait in our code. So ignore me, carry on. :)","msgtype":"m.text"},"ts":1454446695000,"senderName":"jsbell","senderId":"jsbell@irc"},
{"content":{"body":"jsbell: while you are looking at it... do you guys do the \"incumbent record\" stuff that lets .match() read a response whose body is till being written to disk?","msgtype":"m.text"},"ts":1454446749000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"my impression is no one implements that yet","msgtype":"m.text"},"ts":1454446757000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: so far as I can tell, no - we wait for the content to be fully streamed into the cache before we execute the next cache operation (e.g. match)","msgtype":"m.text"},"ts":1454447078000,"senderName":"jsbell","senderId":"jsbell@irc"},
{"content":{"body":"ok, thanks","msgtype":"m.text"},"ts":1454447095000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"its a maze of twisty callbacks all alike, so I may have missed something","msgtype":"m.text"},"ts":1454447101000,"senderName":"jsbell","senderId":"jsbell@irc"},
{"content":{"body":"we allow matches to continue, but don't commit the .put() or .add() until the body is completely there","msgtype":"m.text"},"ts":1454447113000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"jsbell: JakeA has a cache transaction proposal to fix compat on that issue","msgtype":"m.text"},"ts":1454447139000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"our cache doesn't have fancy transaction semantics","msgtype":"m.text"},"ts":1454447141000,"senderName":"jsbell","senderId":"jsbell@irc"},
{"content":{"body":"we don't have fancy transactions either... but we store the body in flat files, so we don't touch the underlying DB until its fully on disk","msgtype":"m.text"},"ts":1454447169000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: FYI, add/addAll !ok test changes: https://codereview.chromium.org/1664473002/diff/1/third_party/WebKit/LayoutTests/http/tests/cachestorage/script-tests/cache-add.js?context=10&column_width=80&tab_spaces=8","msgtype":"m.text"},"ts":1454449378000,"senderName":"jsbell","senderId":"jsbell@irc"},
{"content":{"body":"thanks","msgtype":"m.text"},"ts":1454449421000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"mounir: pong","msgtype":"m.text"},"ts":1454449817000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"wanderview: It can take a while for upgrades to get the minimum of two required try runs, so if I start now it may or may not be done by tomorrow","msgtype":"m.text"},"ts":1454450156000,"senderName":"jgraham_","senderId":"jgraham_@irc"},
{"content":{"body":"jgraham_: that would be fine... whatever is convenient for you... if it waits another day its not a crisis","msgtype":"m.text"},"ts":1454450188000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"jsbell: what are you rejecting addAll() with for !ok()?","msgtype":"m.text"},"ts":1454450376000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: TypeError","msgtype":"m.text"},"ts":1454453401000,"senderName":"jsbell","senderId":"jsbell@irc"},
{"content":{"body":"annevk: looking at build PRs now","msgtype":"m.text"},"ts":1454454667000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"}
]