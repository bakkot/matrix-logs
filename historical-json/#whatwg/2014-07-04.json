[
{"content":{"body":"While autofocus should only be used once per document, if there were more than one in the document, the autofocus attribute used to target the last element with the autofocus attribute. I tested 3 months ago, and all browsers tested did this. testing again today, Chrome and Firefox now give focus to the first occurrence of autofocus. Did the spec change. I’ve failed to successfully Google any discussion on that topic.","msgtype":"m.text"},"ts":1404437124000,"senderName":"estellevw","senderId":"estellevw@irc"},
{"content":{"body":"> If the user agent has already reached the last step of this list of steps in response to an element being inserted into a Document whose top-level browsing context's active document is the same as target's top-level browsing context's active document, abort these steps.","msgtype":"m.text"},"ts":1404437668000,"senderName":"caitp","senderId":"caitp@irc"},
{"content":{"body":"I take that to mean, for a given browsing context, only autofocus the first control with an autofocus attribute?","msgtype":"m.text"},"ts":1404437688000,"senderName":"caitp","senderId":"caitp@irc"},
{"content":{"body":"started in chrome 34","msgtype":"m.text"},"ts":1404437736000,"senderName":"estellevw","senderId":"estellevw@irc"},
{"content":{"body":"they used to all focus on the last occurence of autofocus","msgtype":"m.text"},"ts":1404437747000,"senderName":"estellevw","senderId":"estellevw@irc"},
{"content":{"body":"34+ focuses on the first instead","msgtype":"m.text"},"ts":1404437776000,"senderName":"estellevw","senderId":"estellevw@irc"},
{"content":{"body":"yes","msgtype":"m.text"},"ts":1404437784000,"senderName":"estellevw","senderId":"estellevw@irc"},
{"content":{"body":"you can probably find discussion on it if you svn/git blame it","msgtype":"m.text"},"ts":1404437838000,"senderName":"caitp","senderId":"caitp@irc"},
{"content":{"body":"github doesn't feel it's worth its effort though :>","msgtype":"m.text"},"ts":1404437925000,"senderName":"caitp","senderId":"caitp@irc"},
{"content":{"body":"can’t even find it in svn  — then, of course, not sure of the exact range to inspect","msgtype":"m.text"},"ts":1404437985000,"senderName":"estellevw","senderId":"estellevw@irc"},
{"content":{"body":"might be able to find mention of it in implementation code, too","msgtype":"m.text"},"ts":1404438102000,"senderName":"caitp","senderId":"caitp@irc"},
{"content":{"body":"not sure if that would live in parsing or DOM though, otoh","msgtype":"m.text"},"ts":1404438114000,"senderName":"caitp","senderId":"caitp@irc"},
{"content":{"body":"trying to figure out if it’s a bug or feature. The spec doesn’t clarify it for me http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#autofocusing-a-form-control:-the-autofocus-attribute","msgtype":"m.text"},"ts":1404438203000,"senderName":"estellevw","senderId":"estellevw@irc"},
{"content":{"body":"Figuring out context is hard :-(","msgtype":"m.text"},"ts":1404453788000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: During the SW registration process, which is not a task as you told,","msgtype":"m.text"},"ts":1404454441000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"annevk: If I resolve a promise in a step..","msgtype":"m.text"},"ts":1404454455000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"annevk: is it queued as a microtask?","msgtype":"m.text"},"ts":1404454468000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"jungkees: no, but unless you change state as well, that is fine, as a promise can only be observed from a microtask","msgtype":"m.text"},"ts":1404454491000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I don't think I understood the term \"state\" you explained. Is it a term defined in a spec or general word to designate platform state?","msgtype":"m.text"},"ts":1404454730000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"jungkees: general; like changing properties, dispatching events","msgtype":"m.text"},"ts":1404454771000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jungkees: I think we should define asynchronous as a term to make this whole thing more clear, but Hixie disagrees so far","msgtype":"m.text"},"ts":1404454809000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: then in SW registration I just mentioned, when I resolve a promise in step A, the fulfillment cb is executed first? or the subsequent steps in the algorithm executed first?","msgtype":"m.text"},"ts":1404454937000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"looks","msgtype":"m.emote"},"ts":1404454957000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jungkees: oh, if the  algorithm is asynchronous, you can't predict that","msgtype":"m.text"},"ts":1404455008000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yeah.. it seems if the asynch part of the algorithm is a definitive task in a queue, it'll be clearer to reason it about","msgtype":"m.text"},"ts":1404455114000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"jungkees: you don't want your algorithms to interfere with the main thread","msgtype":"m.text"},"ts":1404455143000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jungkees: the event loop is off limits, it's synchronous code","msgtype":"m.text"},"ts":1404455165000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jungkees: delaying painting and whatnot","msgtype":"m.text"},"ts":1404455175000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: weird you express the event loop is synchronous code though..","msgtype":"m.text"},"ts":1404455267000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"jungkees: why? It's just a queue of bits of code run after each other, nothing goes in parallel","msgtype":"m.text"},"ts":1404455304000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: so you meant the queue implement itself.. the while loop","msgtype":"m.text"},"ts":1404455328000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"jungkees: you lost me","msgtype":"m.text"},"ts":1404455353000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jungkees: the rules are very simple, specification algorithms run in parallel (unless they're super cheap and can be done synchronous) and only ever queue tasks or microtasks to set a property or dispatch an event","msgtype":"m.text"},"ts":1404455556000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"and, yes, the event loop is in fact a loop","msgtype":"m.text"},"ts":1404455583000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"annevk: SamB alright","msgtype":"m.text"},"ts":1404455631000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"annevk: is there any reason you don't queue a task to fire events in XHR? it just fire events without queuing a task","msgtype":"m.text"},"ts":1404456281000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"annevk: I've done the same in SW registration","msgtype":"m.text"},"ts":1404456297000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"annevk: think it should queue a task instead?","msgtype":"m.text"},"ts":1404456310000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"jungkees: XMLHttpRequest queues tasks for events, pointer?","msgtype":"m.text"},"ts":1404456887000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jungkees: it also does a bunch of other stuff on such tasks usually","msgtype":"m.text"},"ts":1404457010000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: like step11.2 in http://xhr.spec.whatwg.org/#dom-xmlhttprequest-send","msgtype":"m.text"},"ts":1404457255000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"annevk: maybe because it's in main thread?","msgtype":"m.text"},"ts":1404457306000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"annevk: then in SW case, I think I need to queue a task for firing the events","msgtype":"m.text"},"ts":1404457399000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"jungkees: yeah, that's synchronous","msgtype":"m.text"},"ts":1404458799000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"wait, are they seriously using segmentation for NaCl?","msgtype":"m.text"},"ts":1404458939000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"jungkees: it's also necessary for updating .state","msgtype":"m.text"},"ts":1404458959000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yeah, i'll do that; queue a task to update .state and fire events on the object","msgtype":"m.text"},"ts":1404459013000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"ECHAN","msgtype":"m.text"},"ts":1404459076000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"annevk: per https://github.com/w3ctag/promises-guide#queue-tasks-to-invoke-user-code, when asynchronously running algorithm do \"resolve p with x\", it seems do \"queue a task to call the callback cb with x,\"","msgtype":"m.text"},"ts":1404459642000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"annevk: is this fulfillment cb queued in task queue? or microtask queue?","msgtype":"m.text"},"ts":1404459701000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"jungkees: if you resolve a promise from asynchronous code it's callbacks will run in the next available microtask slot; so the latter","msgtype":"m.text"},"ts":1404459746000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jungkees: it's the same really as whenever you'd resolve a promise from synchronous code","msgtype":"m.text"},"ts":1404459765000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jungkees: however, if you change state on an object, such as a property, and announce that also through a promise, you need to queue a task to change state and resolve","msgtype":"m.text"},"ts":1404459813000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Okay","msgtype":"m.text"},"ts":1404459865000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"annevk: An asynchronously running steps in algorithm A declared a variable foo and queued a task (B) in a subsequent step; Does it make sense the queued task B set a value to A's foo?","msgtype":"m.text"},"ts":1404469422000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"jungkees: so 1. Let /foo/ be X. 2. Queue a task to set /value/ to /foo/? That could make sense","msgtype":"m.text"},"ts":1404474282000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: oh i see","msgtype":"m.text"},"ts":1404474526000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"jungkees: unfortunately the best way to get knowledge of this stuff is to carefully study algorithms in HTML, XMLHttpRequest, Notifications, etc.","msgtype":"m.text"},"ts":1404474612000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jungkees: while keeping in mind that none of those is perfect","msgtype":"m.text"},"ts":1404474619000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jungkees: I'll be away for three weeks or so, hopefully this is enough for now, otherwise I recommend asking Hixie or Domenic","msgtype":"m.text"},"ts":1404474780000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: thanks for help","msgtype":"m.text"},"ts":1404474820000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"annevk: going on a vacation?","msgtype":"m.text"},"ts":1404474830000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"annevk: Enjoy your holidays and let's sync-up when you get back","msgtype":"m.text"},"ts":1404474876000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"annevk: I think I'll refine the algorithms better till then though I'll may take a week off during the time","msgtype":"m.text"},"ts":1404474915000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"jungkees: yes & sounds good","msgtype":"m.text"},"ts":1404480740000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"\"The RDF Working Group [1] is now closed.\"","msgtype":"m.text"},"ts":1404483403000,"senderName":"wilhelm","senderId":"wilhelm@irc"},
{"content":{"body":"wonders if the CSSWG is still open","msgtype":"m.emote"},"ts":1404483730000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Yes, they just got their charter renewed. :P","msgtype":"m.text"},"ts":1404483883000,"senderName":"wilhelm","senderId":"wilhelm@irc"},
{"content":{"body":"So we need to split request's context into two things","msgtype":"m.text"},"ts":1404484517000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"The first is more or less like context is now, the second will be the browsing context \"type\"","msgtype":"m.text"},"ts":1404484539000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"contextSource == \"hyperlink\" && contextFrame == \"top-level\"","msgtype":"m.text"},"ts":1404484587000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Anyone want to bikeshed, jgraham?","msgtype":"m.text"},"ts":1404484607000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Why are we bikeshedding me?","msgtype":"m.text"},"ts":1404484632000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"annevk: Well apart from the obvious fact that js needs an enum type, assuming that does what it sounds like it seems like a reasonable choice of names","msgtype":"m.text"},"ts":1404484703000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"I don't have more context than that line though","msgtype":"m.text"},"ts":1404484713000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"If you want more context (hah!) you could read https://github.com/slightlyoff/ServiceWorker/issues/352","msgtype":"m.text"},"ts":1404484741000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Might be hard to introduce an enum type now IDL settled on strings","msgtype":"m.text"},"ts":1404484795000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Strings are pretty terrible :(","msgtype":"m.text"},"ts":1404484855000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"I guess frame is somewhat misleading","msgtype":"m.text"},"ts":1404484882000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Could be contextType or something","msgtype":"m.text"},"ts":1404484906000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"(because it doesn't tell you what actual frame you used, just what type of browsing context it was)","msgtype":"m.text"},"ts":1404484951000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"context frame type","msgtype":"m.text"},"ts":1404485616000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"and just context I guess, you don't always need/use context frame type","msgtype":"m.text"},"ts":1404485631000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Hmm, need more contexts to complete the context alphabet","msgtype":"m.text"},"ts":1404487214000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Oh my, even <embed> can create a nested browsing context!","msgtype":"m.text"},"ts":1404487505000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"SVG, WHYYYYYY","msgtype":"m.text"},"ts":1404487520000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"https://www.w3.org/Bugs/Public/show_bug.cgi?id=26247#c14","msgtype":"m.text"},"ts":1404491209000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I guess I could read the spec, but if [i]frame and hyperlink are orthogonal it's not clear what happens with <iframe name=bar> and <a href=\"foo\" target=bar>","msgtype":"m.text"},"ts":1404491390000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: they're not, the former would be setting their src attribute","msgtype":"m.text"},"ts":1404499889000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"for this to be defined in detail requires all end points to be in terms of fetch however","msgtype":"m.text"},"ts":1404499944000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Hixie: whatwg.org is down","msgtype":"m.text"},"ts":1404500950000,"senderName":"cmr","senderId":"cmr@irc"},
{"content":{"body":"cmr: there was some issue a couple of hours ago, yeah. seems resolved.","msgtype":"m.text"},"ts":1404506557000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: indeed it does, thanks","msgtype":"m.text"},"ts":1404506667000,"senderName":"cmr","senderId":"cmr@irc"},
{"content":{"body":"wha, why does the background give out in the middle of the section http://perldoc.perl.org/perlmodlib.html#Asia here ...","msgtype":"m.text"},"ts":1404511531000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"well, part of it starts there, part of it gets a bit further","msgtype":"m.text"},"ts":1404511571000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"huh?","msgtype":"m.text"},"ts":1404511892000,"senderName":"caitp","senderId":"caitp@irc"},
{"content":{"body":"caitp: does that not happen for you?","msgtype":"m.text"},"ts":1404512517000,"senderName":"SamB","senderId":"SamB@irc"},
{"content":{"body":"typed \"background: none\" into a style in the FF inspector ... got \"background: none; -repeatndoundkface-visibility\"","msgtype":"m.text"},"ts":1404516904000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"^5 braindamaged autocomplete","msgtype":"m.text"},"ts":1404516909000,"senderName":"zewt","senderId":"zewt@irc"}
]