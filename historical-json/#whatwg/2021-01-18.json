[
{"content":{"body":"JakeA: I still need to look into this more, but I just realized that if we put the valid opaque response URL on the request we don't need to have a side table in the network layer anymore, that's a lot cleaner","msgtype":"m.text"},"ts":1610971667000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: and I guess we do want to merge the two efforts somehow, although I'm not sure if I want to sign up for fixing media element loading","msgtype":"m.text"},"ts":1610971715000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yeah, I agree that data could go onto the request, and a future 'fix' to media elements could use it","msgtype":"m.text"},"ts":1610971798000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: did browsers ever implement your fixes?","msgtype":"m.text"},"ts":1610971843000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: The big security issues are handled by preventing redirects that go to different places, but I don't think it's interoperable","msgtype":"m.text"},"ts":1610971991000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"Putting it on a request also makes it scoped to a single media element, which seems a lot cleaner. I guess there is an assumption that service workers would always do pass through for these though.","msgtype":"m.text"},"ts":1610972008000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"But maybe the Cache API deals poorly with 206 anyway?","msgtype":"m.text"},"ts":1610972049000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: the request would only have its \"valid opaque response URL\" set if the response has to come from that location, so the service worker would need to do pass-through in that case","msgtype":"m.text"},"ts":1610972077000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"If a media element only uses non-opaque responses then the service worker can get the data from wherever it wants","msgtype":"m.text"},"ts":1610972146000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"Yeah, I mean that's an implication of doing it that way and not having the network layer track these responses in some way...","msgtype":"m.text"},"ts":1610972151000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ahh ok","msgtype":"m.text"},"ts":1610972169000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"But that also relied on a media element doing the initiation so never mind","msgtype":"m.text"},"ts":1610972206000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: since the HTML PR never went anywhere, do you know if bugs got filed against all browsers?","msgtype":"m.text"},"ts":1610982090000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I only filed bugs for the actual security issues I found. I didn't file bugs to converge behaviour. In some ways it's good I didn't, since my proposal in that PR wasn't solid enough.","msgtype":"m.text"},"ts":1610982159000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: if you still have those somewhere I'd love the Fx bug","msgtype":"m.text"},"ts":1610982213000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: also, is this something you are willing to spend more time on? Perhaps the HTML part only and I'll do the Fetch part as part of ORB?","msgtype":"m.text"},"ts":1610982252000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: https://bugzilla.mozilla.org/show_bug.cgi?id=1441153","msgtype":"m.text"},"ts":1610982273000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"annevk: I'll put it on my TODO list, although there are more folks waiting on me to do the browser session & session history stuff first","msgtype":"m.text"},"ts":1610982342000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: ah yeah, that's important too","msgtype":"m.text"},"ts":1610982476000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: okay, maybe I'll make time for it, but this ORB thing is becoming quite the yak shave with embed/object/media elements","msgtype":"m.text"},"ts":1610982541000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: reading https://bugs.chromium.org/p/chromium/issues/detail?id=532569 I also wonder if we need changes to CORS to allow for Range to be set and not cause a preflight","msgtype":"m.text"},"ts":1610984199000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"what a mess","msgtype":"m.text"},"ts":1610984244000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ah, https://github.com/whatwg/fetch/issues/145 mentions this at least","msgtype":"m.text"},"ts":1610984465000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I wonder if https://fetch.spec.whatwg.org/#privileged-no-cors-request-header-name helps there?","msgtype":"m.text"},"ts":1610988780000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: yeah I think so, we just need to use that as a way to bypass the preflight","msgtype":"m.text"},"ts":1610989364000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: but more annoyingly it'll need tests","msgtype":"m.text"},"ts":1610989374000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Hopefully I'll have some time this week to look into all that","msgtype":"m.text"},"ts":1610989397000,"senderName":"annevk","senderId":"annevk@irc"}
]