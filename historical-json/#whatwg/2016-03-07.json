[
{"content":{"body":"annevk: I gotta tell you upgrading custom elements is a mess :(","msgtype":"m.text"},"ts":1457335233000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"rniwa: not surprised really","msgtype":"m.text"},"ts":1457335574000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I filed a whole bunch of issues on the github if you didn't see","msgtype":"m.text"},"ts":1457335844000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"annevk: I think https://github.com/w3c/webcomponents/issues/421 is the most fatal one","msgtype":"m.text"},"ts":1457335879000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"with https://github.com/w3c/webcomponents/issues/419 coming after that","msgtype":"m.text"},"ts":1457335890000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"(along with https://github.com/w3c/webcomponents/issues/420)","msgtype":"m.text"},"ts":1457335908000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"I just had breakfast","msgtype":"m.text"},"ts":1457335986000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: no worries, just FYI'ing","msgtype":"m.text"},"ts":1457336001000,"senderName":"rniwa","senderId":"rniwa@irc"},
{"content":{"body":"I'll get to them today","msgtype":"m.text"},"ts":1457336084000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"zcorpan, heyo","msgtype":"m.text"},"ts":1457352307000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"hi","msgtype":"m.text"},"ts":1457352313000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"If you feel like it at some point, https://github.com/w3c/csswg-test/pull/1060 and https://github.com/w3c/csswg-test/pull/1061","msgtype":"m.text"},"ts":1457352336000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Can someone tell me where it is defined that new WebSocket(\"wss://example.com:80/test\", { protocols:\"test\" }) throws?","msgtype":"m.text"},"ts":1457352376000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"> If any of the values in protocols occur more than once or otherwise fail to match the requirements for elements that comprise the value of Sec-WebSocket-Protocol fields as defined by the WebSocket protocol specification, then throw a SyntaxError exception and abort these steps. [WSP]","msgtype":"m.text"},"ts":1457352629000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"I guess?","msgtype":"m.text"},"ts":1457352631000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"No idea why","msgtype":"m.text"},"ts":1457352674000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Except that [WSP] defines it to be any kind of random value","msgtype":"m.text"},"ts":1457352811000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"As long as it meets the token production","msgtype":"m.text"},"ts":1457352831000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: step 4 or 5 of http://heycam.github.io/webidl/#es-sequence maybe?","msgtype":"m.text"},"ts":1457352867000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"the idl is [Constructor(DOMString url, optional (DOMString or sequence<DOMString>) protocols), Exposed=(Window,Worker)]","msgtype":"m.text"},"ts":1457352886000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"not dictionary","msgtype":"m.text"},"ts":1457352893000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"oooh doh","msgtype":"m.text"},"ts":1457352901000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Doh","msgtype":"m.text"},"ts":1457352950000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Thanks","msgtype":"m.text"},"ts":1457352953000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Also, time to merge WSP back into HTML?","msgtype":"m.text"},"ts":1457352982000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: see https://github.com/whatwg/fetch/issues/235 for some kind of intermediate solution","msgtype":"m.text"},"ts":1457353010000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ms2ger: I suppose we could put the entire protocol in Fetch, but ...","msgtype":"m.text"},"ts":1457353026000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I'm working on a \"monkey patch\" solution at the moment, that replaces most of the client handshake section so that it shares all logic with Fetch","msgtype":"m.text"},"ts":1457353074000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Solving the HSTS, Mixed Content, cookie, upgrade insecure requests, etc. problems","msgtype":"m.text"},"ts":1457353093000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Sounds sensible","msgtype":"m.text"},"ts":1457353109000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"8","msgtype":"m.text"},"ts":1457354373000,"senderName":"ondras","senderId":"ondras@irc"},
{"content":{"body":"oops sorry","msgtype":"m.text"},"ts":1457354379000,"senderName":"ondras","senderId":"ondras@irc"},
{"content":{"body":"someone with Edge want to test https://github.com/whatwg/html/issues/823 ?","msgtype":"m.text"},"ts":1457355110000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"annevk: I'm a bit lost with https://github.com/w3c/webcomponents/issues/362","msgtype":"m.text"},"ts":1457362514000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: shoot","msgtype":"m.text"},"ts":1457362533000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"if the notification is only about inserted / removed from a document, why we need any params?","msgtype":"m.text"},"ts":1457362539000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"ownerDocument should always tell the document, and ancestor is easy to find, especially if there is something like nodeRoot or such","msgtype":"m.text"},"ts":1457362617000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: you're right about ownerDocument, that's easy enough","msgtype":"m.text"},"ts":1457362641000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smaug____: there's node.rootNode now, but how does that help crossing shadow tree boundaries?","msgtype":"m.text"},"ts":1457362661000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"so what is newAncestor about?","msgtype":"m.text"},"ts":1457362711000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"in the node to which some other node was added as a child?","msgtype":"m.text"},"ts":1457362727000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"s/in//","msgtype":"m.text"},"ts":1457362732000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: \"insertion steps\" used to get passed \"newParent\", when we realized we needed to notify descendants too we made that \"newAncestor\"","msgtype":"m.text"},"ts":1457362755000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smaug____: it's the parent of the node that had its parent node change","msgtype":"m.text"},"ts":1457362801000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smaug____: same for oldAncestor in the \"removing steps\"","msgtype":"m.text"},"ts":1457362816000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smaug____: there might not be a reason to pass either to script though, but I'm fairly certain UAs expose these internally","msgtype":"m.text"},"ts":1457362853000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"do we need to notify descendants about the node to which the subtree was added?","msgtype":"m.text"},"ts":1457362856000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"Yes.","msgtype":"m.text"},"ts":1457362862000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"why?","msgtype":"m.text"},"ts":1457362867000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"Because there are things that must be done only when you are a child of newAncestor, and some you need to do when you are unbound from the tree.","msgtype":"m.text"},"ts":1457362898000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: note that this conversation is about the custom elements API, not the internal API, although I'm still uncertain why they need to be different","msgtype":"m.text"},"ts":1457362902000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Gecko doesn't tell to descendants to which node a subtree root was added","msgtype":"m.text"},"ts":1457362931000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: and removal?","msgtype":"m.text"},"ts":1457362955000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Oh. I don't know anything abotu custom elements so I'll just shut up.","msgtype":"m.text"},"ts":1457362996000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: same there. subtree root gets param that it has now null parent node, and descendants effectively are just notified that their ancestor chain has got shorter (something got removed from a parent)","msgtype":"m.text"},"ts":1457363071000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: I see, so maybe I should change the internal API","msgtype":"m.text"},"ts":1457363125000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smaug____: so that \"insertion steps\" only get passed newParent for the \"root\" and not the descendants","msgtype":"m.text"},"ts":1457363160000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smaug____: and the same for \"removing steps\"","msgtype":"m.text"},"ts":1457363169000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smaug____: that would still argue for sometimes passing newParent/oldParent to connected/disconnected, no? When they're root","msgtype":"m.text"},"ts":1457363211000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"thinking","msgtype":"m.text"},"ts":1457363368000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"maybe newAncestor isn't that bad. One can always check if parentNode == newAncestor and that means we're at the top of the subtree","msgtype":"m.text"},"ts":1457363400000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: the main problem is that it could leak a closed shadow tree, as I pointed out there","msgtype":"m.text"},"ts":1457363489000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Hmm, maybe not? If something closed has something open attached, is it still perceived as closed all the way down from the closed tree's host?","msgtype":"m.text"},"ts":1457363591000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Well, that matters and it matters whether closed means just closed from where it is hosted or also closed from everything the closed thing hosts...","msgtype":"m.text"},"ts":1457363685000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"what if closed (A) has something closed (B) attached. that should still work since B can see A. Closed-ness hides things only from top(root)-down","msgtype":"m.text"},"ts":1457363812000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"Yeah, I guess there's no problem then with closedness","msgtype":"m.text"},"ts":1457363910000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smaug____: updated the issue with your feedback","msgtype":"m.text"},"ts":1457364207000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"is there some easy way to make github's commenting area to work sanely when there are some <tags>s in the text?","msgtype":"m.text"},"ts":1457364772000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"zcorpan: https://github.com/whatwg/html/issues/823 updated, Edge strips","msgtype":"m.text"},"ts":1457365088000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"smaug____: use ` and ` to escape code","msgtype":"m.text"},"ts":1457365173000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smaug____: I meant, wrap code in `","msgtype":"m.text"},"ts":1457365192000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: thanks. so currently 3 vs 1","msgtype":"m.text"},"ts":1457365298000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Presto also strips","msgtype":"m.text"},"ts":1457365354000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"annevk: any opinion what the \"trim\" step should be called after dropping trimming? \"parse\"? \"resolve\"?","msgtype":"m.text"},"ts":1457365921000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"possibly this algorithm should be rewritten to not use GOTO, but don't want to do that today","msgtype":"m.text"},"ts":1457366303000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan: Parse or maybe \"URL\" seem good","msgtype":"m.text"},"ts":1457366351000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"i'll go with parse. the string can contain \"URL=\" which could make URL confusing.","msgtype":"m.text"},"ts":1457366430000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"zcorpan, https://github.com/w3c/csswg-test/pull/1061 seems ready to merge","msgtype":"m.text"},"ts":1457366526000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: thx done","msgtype":"m.text"},"ts":1457366604000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Thank you","msgtype":"m.text"},"ts":1457366612000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"down to 0 *participating* notifications... good time to call it a day and work on my snatch","msgtype":"m.text"},"ts":1457370032000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"created a public TODO document: https://gist.github.com/annevk/4a7b51b8669c0dca4c53","msgtype":"m.emote"},"ts":1457373763000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Not entirely sure yet whether that's useful, but if anyone has feedback, most welcome","msgtype":"m.text"},"ts":1457373784000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith, annevk: I've found it useful to add explainer sections to some of my specs for complicated bits, giving some explanation and examples of common usage.  Flex and Grid both have them, for example.  Would probably be useful in Fetch.","msgtype":"m.text"},"ts":1457375905000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins: re https://github.com/whatwg/html/issues/807#issuecomment-193405543 it's (for not-gigantic files) simpler than that; just click \"edit\", it seamlessly creates a fork and a new branch and gives you a \"make a PR\" button","msgtype":"m.text"},"ts":1457379253000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"Ah, indeed.","msgtype":"m.text"},"ts":1457379275000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"I often see URIs on the web which contain Unicode characters in them, which is wrong. I know the typical thing to do is to UTF-8-encode them and then urlencode on the results, but is there any specification for that?","msgtype":"m.text"},"ts":1457383361000,"senderName":"Jasper","senderId":"Jasper@irc"},
{"content":{"body":"Or is the behavior of Firefox, e.g. more complicated?","msgtype":"m.text"},"ts":1457383377000,"senderName":"Jasper","senderId":"Jasper@irc"},
{"content":{"body":"Jasper: https://url.spec.whatwg.org/","msgtype":"m.text"},"ts":1457384170000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I thought I had a cursory look at that and didn't find anything","msgtype":"m.text"},"ts":1457384223000,"senderName":"Jasper","senderId":"Jasper@irc"},
{"content":{"body":"looks closer","msgtype":"m.emote"},"ts":1457384224000,"senderName":"Jasper","senderId":"Jasper@irc"},
{"content":{"body":"Jasper: what you mentioned is approximately what happens for path and query components","msgtype":"m.text"},"ts":1457384308000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Jasper: host has IDNA handling, fragment might leave things as-is atm","msgtype":"m.text"},"ts":1457384350000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Jasper: URL parser defines the details","msgtype":"m.text"},"ts":1457384387000,"senderName":"annevk","senderId":"annevk@irc"}
]