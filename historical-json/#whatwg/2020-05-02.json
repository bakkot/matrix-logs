[
{"content":{"body":"has there ever been any discussion about the reviver function and response.json()","msgtype":"m.text"},"ts":1588379381000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"I'm guessing response.text() + JSON.parse is just good enough","msgtype":"m.text"},"ts":1588379405000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"devsnek: https://github.com/whatwg/fetch/issues/104","msgtype":"m.text"},"ts":1588380926000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: thanks for the link","msgtype":"m.text"},"ts":1588383469000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"it looks like it's assumed there that streaming json on main thread < buffer text and parse?","msgtype":"m.text"},"ts":1588383509000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"I'm not sure how to parse that sentence","msgtype":"m.text"},"ts":1588385047000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: it seems like it was assumed in that thread that streaming parsing on the main thread isn't worth it compared to building up a string with .text() and calling parse","msgtype":"m.text"},"ts":1588388006000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"which is surprising to me but of course I'm not an expert on performance","msgtype":"m.text"},"ts":1588388036000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"reading https://groups.google.com/a/chromium.org/forum/#!topic/blink-dev/bKn2DLuRdeU","msgtype":"m.text"},"ts":1588388906000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"about <iframe loading=\"lazy\">","msgtype":"m.text"},"ts":1588388919000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"> the <img> portions of the spec have landed, whereas we dropped a ball on the <iframe> variant landing in the HTML spec …","msgtype":"m.text"},"ts":1588388950000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"> some have suggested","msgtype":"m.text"},"ts":1588388969000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"un-shipping the feature.","msgtype":"m.text"},"ts":1588388970000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Why?","msgtype":"m.text"},"ts":1588388999000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Where? Who?","msgtype":"m.text"},"ts":1588389004000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I realize the message also says it’s not gonna be un-shipped, but I don’t understand why anybody would have suggested it to begin with","msgtype":"m.text"},"ts":1588389078000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: first message of https://groups.google.com/a/chromium.org/forum/#!topic/blink-api-owners-discuss/JjETiVoN6l8 has yoav suggesting removing the feature as one course of action","msgtype":"m.emote"},"ts":1588392225000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"aha","msgtype":"m.text"},"ts":1588392239000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"(did not mean to /me that, I guess there's some IRCCloud keyboard shortcut that automatically inserts a /me prefix...)","msgtype":"m.text"},"ts":1588392248000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"devsnek: \"streaming parsing on the main thread\" isn't well-defined.","msgtype":"m.text"},"ts":1588392262000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"https://groups.google.com/a/chromium.org/d/msg/blink-api-owners-discuss/JjETiVoN6l8/3JeXh6rjAAAJ has Addy Osmani also suggesting moving it back behind a flag","msgtype":"m.text"},"ts":1588392331000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"my thinking was that with the json source proposal it might be worth taking another look","msgtype":"m.text"},"ts":1588392380000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"I imagine parsing out bigints will be somewhat common","msgtype":"m.text"},"ts":1588392402000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"Domenic: thanks!","msgtype":"m.text"},"ts":1588392440000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"devsnek: I think step 1 would be someone proposing an actual processing model for streaming JSON that has well-defined semantics. So far nobody has. The closest is NLDJSON.","msgtype":"m.text"},"ts":1588392478000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"s/NLDJSON/NDJSON","msgtype":"m.text"},"ts":1588392498000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I was thinking step 0 would be \"does anyone actually want this\"","msgtype":"m.text"},"ts":1588392550000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"Right, well, it's not clear what \"this\" is","msgtype":"m.text"},"ts":1588392568000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"well parsing a bunch of json that might be broken into pieces is not difficult","msgtype":"m.text"},"ts":1588392611000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"In a way different than just buffering into text and parsing all at once?","msgtype":"m.text"},"ts":1588392633000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"well since all the modern json parsers in engines are loop based instead of recursion based","msgtype":"m.text"},"ts":1588392657000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"Domenic: I had actually just mis-took the message I cited as being about un-shipping img[loading]..","msgtype":"m.text"},"ts":1588392659000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"it should be as simple as just calling into a function every time you get more data","msgtype":"m.text"},"ts":1588392673000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"devsnek: you can't produce any incremental results because if you have `{ ... 500 KiB of valid object literal JSON ... ]` then the whole thing must be a parse error.","msgtype":"m.text"},"ts":1588392695000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"ah I see what you mean","msgtype":"m.text"},"ts":1588392716000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"yeah that is unfortunate I guess","msgtype":"m.text"},"ts":1588392722000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"scrap everything I said","msgtype":"m.text"},"ts":1588392743000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"You need a new format that can have \"checkpoints\" for validity. NDJSON is one stab at that, but I'm unsure on the adoption.","msgtype":"m.text"},"ts":1588392743000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"ndjson would serve the use cases I know of but I wouldn't suggest it being part of browsers","msgtype":"m.text"},"ts":1588392845000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"https://siguza.github.io/psychicpaper/ (test your parsers or ideally just have one of them)","msgtype":"m.text"},"ts":1588394462000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Oh lol, they mitigated with more parsers","msgtype":"m.text"},"ts":1588394640000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"But also, what I thought was usage of XML is in fact several terrible dialects of XML","msgtype":"m.text"},"ts":1588394853000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: wow","msgtype":"m.text"},"ts":1588396926000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"> We can also ask ourselves how a bug like that could ever exist. Why the hell there are 4 different plist parsers on iOS. Why we are still using XML even. But I figure those are more philosophical than technical in nature.","msgtype":"m.text"},"ts":1588396962000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"haha","msgtype":"m.text"},"ts":1588396966000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Another instance of technical debt not being prioritized","msgtype":"m.text"},"ts":1588397506000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hi","msgtype":"m.text"},"ts":1588406445000,"senderName":"nixi","senderId":"nixi@irc"},
{"content":{"body":"i have been looking for a formal specifications on which codecs to use in html video and i am not sure there is any","msgtype":"m.text"},"ts":1588406487000,"senderName":"nixi","senderId":"nixi@irc"},
{"content":{"body":"i have ben searching here mainly: https://html.spec.whatwg.org/multipage/media.html#the-video-element","msgtype":"m.text"},"ts":1588406548000,"senderName":"nixi","senderId":"nixi@irc"},
{"content":{"body":"nixi: there are no mandated formats atm","msgtype":"m.text"},"ts":1588416681000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: ah ok, so it is a free-for-all in terms of browser implementation of formats","msgtype":"m.text"},"ts":1588416912000,"senderName":"nixi","senderId":"nixi@irc"},
{"content":{"body":"unfortunately, yes, though I think through WebRTC there might be some mandated formats, but those might be scoped to WebRTC specifically, not sure","msgtype":"m.text"},"ts":1588416955000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Hopefully AV1 is the way out of this mess","msgtype":"m.text"},"ts":1588416985000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"no daala?","msgtype":"m.text"},"ts":1588417659000,"senderName":"nixi","senderId":"nixi@irc"},
{"content":{"body":"If anyone is interested in somewhat more formalized storage architecture: https://github.com/whatwg/storage/pull/86","msgtype":"m.text"},"ts":1588425348000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Another thing, I noticed that our snapshots now use the snapshot logos and it's rather nice: https://whatpr.org/storage/86.html","msgtype":"m.text"},"ts":1588428920000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"There's a bug with the warning that I can't repro locally... it should say \"this is a PR preview\" not \"not ready for implementation\". But it only shows up on whatpr.org, not when I run the same commands locally.","msgtype":"m.text"},"ts":1588432354000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: I suspect the PR preview software might need changes; tobie added that warning before we had something iirc","msgtype":"m.text"},"ts":1588432865000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Hmm","msgtype":"m.text"},"ts":1588432885000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Ah, yeah... https://github.com/tobie/pr-preview/blob/a38138ef02f65d8829a2c01c5a7195fa7b4ea941/lib/models/config.js#L44-L47","msgtype":"m.text"},"ts":1588432981000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"It overrides the default md-warning set by our boilerplate","msgtype":"m.text"},"ts":1588432994000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"That's awkward","msgtype":"m.text"},"ts":1588433003000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Maybe we can hard-code a WHATWG exception","msgtype":"m.text"},"ts":1588433015000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Filed https://github.com/tobie/pr-preview/issues/55","msgtype":"m.text"},"ts":1588433244000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"We could branch on params[\"md-status\"] I guess","msgtype":"m.text"},"ts":1588433355000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yeah that's what I ended up suggesting","msgtype":"m.text"},"ts":1588433418000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"https://github.com/tobie/pr-preview/pull/56","msgtype":"m.text"},"ts":1588433760000,"senderName":"annevk","senderId":"annevk@irc"}
]