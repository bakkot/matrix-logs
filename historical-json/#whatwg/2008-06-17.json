[
{"content":{"body":"could anyone confirm my reading of the tokenisation part of the spec, that '<h a=\"&not\">' should result in an 'a' attribute containing the not symbol?","msgtype":"m.text"},"ts":1213664640000,"senderName":"takkaria","senderId":"takkaria@irc"},
{"content":{"body":"oh, wait, I think I see my problem","msgtype":"m.text"},"ts":1213664700000,"senderName":"takkaria","senderId":"takkaria@irc"},
{"content":{"body":"Dashiiva, fixed the thing you mentioned earlier","msgtype":"m.text"},"ts":1213686000000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"Hixie: sicking said almost everything I would have said in his reply to Microsoft's feedback","msgtype":"m.text"},"ts":1213686840000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"I am tempted to +1","msgtype":"m.text"},"ts":1213686841000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"heh","msgtype":"m.text"},"ts":1213686900000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i haven't read it yet","msgtype":"m.text"},"ts":1213686901000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i can't believe they stuffed so much filler crap into that feedback","msgtype":"m.text"},"ts":1213686902000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"on another note, the htmlwg bugzilla hasn't had any activity for at least 6 hours","msgtype":"m.text"},"ts":1213686960000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I was dismayed that many of their quotes were clearly out of context","msgtype":"m.text"},"ts":1213686961000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"or at least, they turned them towards ends that I am pretty sure the authors of said comments did not intend","msgtype":"m.text"},"ts":1213687020000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"this cast doubt on the contextual validity of their other quotes for me","msgtype":"m.text"},"ts":1213687021000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"hence the version i provded that just has their actual feedback","msgtype":"m.text"},"ts":1213687080000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"stripping out the stuff that doesn't actually contibute","msgtype":"m.text"},"ts":1213687081000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Dashiva, in your mail you said s14 of the [[Put]] can be removed.  why's that?","msgtype":"m.text"},"ts":1213689900000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"heycam: If you would jump in s14 there's no such property. That means that in s15, there can't be a property with putforwards either (since there's no property)","msgtype":"m.text"},"ts":1213690380000,"senderName":"Dashiva","senderId":"Dashiva@irc"},
{"content":{"body":"but you jump in s14 if there is no property","msgtype":"m.text"},"ts":1213690500000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"confused","msgtype":"m.emote"},"ts":1213690501000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"And you jump in s15 if there is no property (or there is a property, and it's not putforwards)","msgtype":"m.text"},"ts":1213690560000,"senderName":"Dashiva","senderId":"Dashiva@irc"},
{"content":{"body":"Essentially s15 is all of s14 + check putforwards","msgtype":"m.text"},"ts":1213690561000,"senderName":"Dashiva","senderId":"Dashiva@irc"},
{"content":{"body":"true i could combine s14 and s15 to say \"If O does not have a property with name P, or if it does but it does not blah blah [PutForwards] ...\"","msgtype":"m.text"},"ts":1213690680000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"i split them only to avoid a big conditional thing like that","msgtype":"m.text"},"ts":1213690740000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"I just figured 'does not correspond to an attribute' included the case 'there is no such attribute'","msgtype":"m.text"},"ts":1213690741000,"senderName":"Dashiva","senderId":"Dashiva@irc"},
{"content":{"body":"ah, k","msgtype":"m.text"},"ts":1213690800000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"Also, it seems a bit string to split on attribute exists/not in step 14, and then combine them into step 19, and then split again in step 21","msgtype":"m.text"},"ts":1213690801000,"senderName":"Dashiva","senderId":"Dashiva@irc"},
{"content":{"body":"s/string/strange/","msgtype":"m.text"},"ts":1213690802000,"senderName":"Dashiva","senderId":"Dashiva@irc"},
{"content":{"body":"or you figured \"If the property on O with name P does not correspond ...\" could still evaluate to false if there is no such property","msgtype":"m.text"},"ts":1213690803000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"Yeah. I see it might not be spec-level clarity.","msgtype":"m.text"},"ts":1213690860000,"senderName":"Dashiva","senderId":"Dashiva@irc"},
{"content":{"body":"so with the splitting on 14 / combining on 19 / splitting on 21... could you elaborate?","msgtype":"m.text"},"ts":1213690980000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"If the property does not exist, or if the property exists but is not putforward, in both cases it is necessary to run [[CanPut]].","msgtype":"m.text"},"ts":1213691040000,"senderName":"Dashiva","senderId":"Dashiva@irc"},
{"content":{"body":"(which is step 19)","msgtype":"m.text"},"ts":1213691041000,"senderName":"Dashiva","senderId":"Dashiva@irc"},
{"content":{"body":"yep...","msgtype":"m.text"},"ts":1213691160000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"And step 19 leads to step 21, where it checks if the property exists. Again.","msgtype":"m.text"},"ts":1213691161000,"senderName":"Dashiva","senderId":"Dashiva@irc"},
{"content":{"body":"so you'd rather have two branches from s14/s15, and include the [[CanPut]] in both?","msgtype":"m.text"},"ts":1213691400000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"or i could bring the [[CanPut]] up above s14 (but then it's irrelevant if we get to s16)","msgtype":"m.text"},"ts":1213691460000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"I'd rather not branch on 14, and just send both cases to 19.","msgtype":"m.text"},"ts":1213691461000,"senderName":"Dashiva","senderId":"Dashiva@irc"},
{"content":{"body":"Hmm... actually...","msgtype":"m.text"},"ts":1213691520000,"senderName":"Dashiva","senderId":"Dashiva@irc"},
{"content":{"body":"PutForwards implies a Readonly attribute, so we can't CanPut before it anyhows, I believe","msgtype":"m.text"},"ts":1213691580000,"senderName":"Dashiva","senderId":"Dashiva@irc"},
{"content":{"body":"right (well, the [[CanPut]] could be done, but not the return based on it)","msgtype":"m.text"},"ts":1213691640000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"wonders if he should write up his algorithms as C code and then run gcc -S -O9 on them to try to minimise them :)","msgtype":"m.emote"},"ts":1213691700000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"Would unifying 14 and 15 be easier if the conditional was inverted? e.g. if there is a property with name P  and that property has extattr putforwards, jump to steps equivalent to 16-18. And then the canput stuff following instead of in a jump.","msgtype":"m.text"},"ts":1213691760000,"senderName":"Dashiva","senderId":"Dashiva@irc"},
{"content":{"body":"yeah that probably would","msgtype":"m.text"},"ts":1213691880000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"Oh well. As long as [[CanPut]] happens for both new and old properties, I suppose this is just bikeshedding.","msgtype":"m.text"},"ts":1213691940000,"senderName":"Dashiva","senderId":"Dashiva@irc"},
{"content":{"body":"i should have a \"you can implement these how you want as long as the observable effects are the same\" in the spec somewhere (but don't yet)","msgtype":"m.text"},"ts":1213692000000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"By the way, is the special casing of 2^32-1 for integer indexes explained somewhere?","msgtype":"m.text"},"ts":1213692060000,"senderName":"Dashiva","senderId":"Dashiva@irc"},
{"content":{"body":"not in the document","msgtype":"m.text"},"ts":1213692120000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"although now i wonder if it is really necessary","msgtype":"m.text"},"ts":1213692121000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"since such host objects won't necessarily have a .length property on them","msgtype":"m.text"},"ts":1213692122000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"(which is the reason it is like that for Array objects)","msgtype":"m.text"},"ts":1213692123000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"Oh, of course. Then it makes perfect sense.","msgtype":"m.text"},"ts":1213692240000,"senderName":"Dashiva","senderId":"Dashiva@irc"},
{"content":{"body":"I didn't think of .length being greater than the max index","msgtype":"m.text"},"ts":1213692300000,"senderName":"Dashiva","senderId":"Dashiva@irc"},
{"content":{"body":"yeah it makes sense for Array.  not sure for IndexSetters...","msgtype":"m.text"},"ts":1213692301000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"adds an ednote","msgtype":"m.emote"},"ts":1213692302000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"It's good for consistency, though. :)","msgtype":"m.text"},"ts":1213692303000,"senderName":"Dashiva","senderId":"Dashiva@irc"},
{"content":{"body":"true","msgtype":"m.text"},"ts":1213692360000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"dinners","msgtype":"m.emote"},"ts":1213692720000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"avoids comments about barbies","msgtype":"m.emote"},"ts":1213692721000,"senderName":"Dashiiva","senderId":"Dashiiva@irc"},
{"content":{"body":"Dashiiva: wanna go shopping?","msgtype":"m.text"},"ts":1213692900000,"senderName":"virtuelv","senderId":"virtuelv@irc"},
{"content":{"body":"rb is 50% of the html4all traffic too","msgtype":"m.text"},"ts":1213697940000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"that's funny","msgtype":"m.text"},"ts":1213697941000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: does it make sense for the ratechange event to be cancelable?","msgtype":"m.text"},"ts":1213698000000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"does it have a default action?","msgtype":"m.text"},"ts":1213698060000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"not afaict","msgtype":"m.text"},"ts":1213698061000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"then it doesn't matter","msgtype":"m.text"},"ts":1213698062000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"fair enough","msgtype":"m.text"},"ts":1213698063000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"teehee, on june 6th rb asked gregory to forward many of his comments on html5 to the xhtml2 group","msgtype":"m.text"},"ts":1213698180000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"but as far as i can tell, that didn't happen","msgtype":"m.text"},"ts":1213698181000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"\"When the defaultPlaybackRate or playbackRate attributes change value\", setting to the value it already has means it hasn't changed right","msgtype":"m.text"},"ts":1213698360000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"i guess","msgtype":"m.text"},"ts":1213698660000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i can specify it the other way if that's what UAs want","msgtype":"m.text"},"ts":1213698720000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hey does anyone know what the status of the svgwg's work on the svg parsing thing is?","msgtype":"m.text"},"ts":1213698721000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i don't recall ever hearing back from them","msgtype":"m.text"},"ts":1213698722000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"and it's been what, two months now?","msgtype":"m.text"},"ts":1213698723000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"ouch. document.write writing a script that document.writes is more complex than I first thought :-(","msgtype":"m.text"},"ts":1213698840000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"Hixie: do you know if Gecko and WebKit really call the parser re-entrantly or whether they interleave parser and script execution using a run queue?","msgtype":"m.text"},"ts":1213698900000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"no idea what their implementation does","msgtype":"m.text"},"ts":1213698901000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"the net result is basically what the spec says though","msgtype":"m.text"},"ts":1213698902000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"though the spec is mildly more complex to handle script async and script defer","msgtype":"m.text"},"ts":1213698903000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I had happily assumed a run queue model, but now that I try to write it down in the case where document.write document.writes, it starts to get ugly","msgtype":"m.text"},"ts":1213698960000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: document write is evil","msgtype":"m.text"},"ts":1213698961000,"senderName":"virtuelv","senderId":"virtuelv@irc"},
{"content":{"body":"I hacked up a bunch of testcases that indicates that no two browsers behave the same","msgtype":"m.text"},"ts":1213699020000,"senderName":"virtuelv","senderId":"virtuelv@irc"},
{"content":{"body":"the browsers are pretty close to each other, most of the differences are obvious bugs","msgtype":"m.text"},"ts":1213699021000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: I'll ask if I can release the TC's somewhere","msgtype":"m.text"},"ts":1213699022000,"senderName":"virtuelv","senderId":"virtuelv@irc"},
{"content":{"body":"I'm not sure what are bugs or not","msgtype":"m.text"},"ts":1213699023000,"senderName":"virtuelv","senderId":"virtuelv@irc"},
{"content":{"body":"document.write in setTimeout calls are so much fun","msgtype":"m.text"},"ts":1213699080000,"senderName":"virtuelv","senderId":"virtuelv@irc"},
{"content":{"body":"Hixie: anyway, I have trouble wrapping my head around the spec assertion that the tree builder is re-entrant","msgtype":"m.text"},"ts":1213699081000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"they should just blow away the document","msgtype":"m.text"},"ts":1213699082000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hsivonen: oh?","msgtype":"m.text"},"ts":1213699083000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: it seems to me that the parser doesn't need to be re-entrant","msgtype":"m.text"},"ts":1213699084000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"Hixie: suffice it to say that browsers in general don't cancel the timeout","msgtype":"m.text"},"ts":1213699140000,"senderName":"virtuelv","senderId":"virtuelv@irc"},
{"content":{"body":"hsivonen: just like any thing that you can implement as a recursive function can be implemented with a hand-managed stack? or more so?","msgtype":"m.text"},"ts":1213699141000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: right","msgtype":"m.text"},"ts":1213699142000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: well sure","msgtype":"m.text"},"ts":1213699143000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hsivonen: recursive algorithms are what the spec uses generally because they're easier to explain and understand, but they're not what i'd recommend implementing","msgtype":"m.text"},"ts":1213699200000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hsivonen: though iirc the parser's re-entrancy is only ever one level deep","msgtype":"m.text"},"ts":1213699201000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: instead of recursing, a single-threaded browser engine should be able to put the parser state on the heap and spin through the event loop","msgtype":"m.text"},"ts":1213699260000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"well the parser has to be interruptible in a browser anyway","msgtype":"m.text"},"ts":1213699320000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"so it would just interrupt itself","msgtype":"m.text"},"ts":1213699321000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"returning to the vent loop","msgtype":"m.text"},"ts":1213699322000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"event","msgtype":"m.text"},"ts":1213699380000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: right. and once you make it interruptible, I don't see why you'd ever want the *tree builder* to be re-entrant","msgtype":"m.text"},"ts":1213699381000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"indeed","msgtype":"m.text"},"ts":1213699382000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"So I'm again in a situation where I'm trying to unroll the spec definition into something else but equivalent","msgtype":"m.text"},"ts":1213699383000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"that is an expected situation, yes","msgtype":"m.text"},"ts":1213699384000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"no spec will ever directly map to all implementations","msgtype":"m.text"},"ts":1213699440000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hmm. I can't figure how to make three-level-deep document.write have the right execution order in a GWT context where the browser owns the script execution but the script owns the parser","msgtype":"m.text"},"ts":1213699620000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"too bad. I can't use GWT to fully try stuff out then","msgtype":"m.text"},"ts":1213699621000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"heh","msgtype":"m.text"},"ts":1213699740000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"http://www.p01.org/releases/DHTML_contests/files/20lines_hypno_trip_down_the_fractal_rug/","msgtype":"m.text"},"ts":1213699741000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Hixie: there was a discussion here with Doug Schepers a while ago about the SVG parsing thing","msgtype":"m.text"},"ts":1213699800000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"roc: yeah, i think i saw that","msgtype":"m.text"},"ts":1213699801000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"annevk: wow","msgtype":"m.text"},"ts":1213699802000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"hmm. I'm starting to suspect the \"generic [R]CDATA algoritm\" and the way Gecko executes document.written scripts doesn't match","msgtype":"m.text"},"ts":1213699803000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hmm.","msgtype":"m.text"},"ts":1213699804000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"annevk: somewhat abusive use of \"20 lines\" though","msgtype":"m.text"},"ts":1213699860000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"Hixie, I don't think there was much progress, though they assigned some actions","msgtype":"m.text"},"ts":1213699861000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"roc, \"20 lines\" is a dubious concept anyway :)","msgtype":"m.text"},"ts":1213699862000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"roc: I seriously think the same tokenizer should handle both HTML and SVG islands","msgtype":"m.text"},"ts":1213699863000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: gecko has some thing where adding text to a script that hasn't executed will still execute","msgtype":"m.text"},"ts":1213699920000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hsivonen: i'm not sure if we need to put that in html5 or if gecko can change, it's something i should probably look at","msgtype":"m.text"},"ts":1213699921000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"it seemed clear that a) the SVG group has a requirement that parsing of SVG fragments should impose XML-esque validation with strict error handling and that b) you have a requirement that parsing SVG fragments should not impose strict error handling ","msgtype":"m.text"},"ts":1213699922000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"that appears to be the case, yes","msgtype":"m.text"},"ts":1213699980000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"roc: in addition to requiring non-strict error handling for SVG fragments, I also want to require avoiding complexity in the parser","msgtype":"m.text"},"ts":1213699981000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"so it doesn't really matter what the proposed solution is, since those two requirements are irreconcilable","msgtype":"m.text"},"ts":1213699982000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"roc: I'm OK with complexity imposed by the legacy Web","msgtype":"m.text"},"ts":1213700040000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"roc: I'm not OK with introducing new complexity for XML purity","msgtype":"m.text"},"ts":1213700041000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"we have to define what document.write does inside an SVG fragment","msgtype":"m.text"},"ts":1213700042000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"if the same tokenizer is used, document.write inside SVG doesn't cause new complexity","msgtype":"m.text"},"ts":1213700100000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"roc: they're not completely irreconcilable, you could come up with some schemes where you fall from one to the other (and the remainder is treated as html, not svg)","msgtype":"m.text"},"ts":1213700101000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"roc: but it does seem unlikely that such a scheme would fit into the various constraints we have","msgtype":"m.text"},"ts":1213700102000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"anyway","msgtype":"m.text"},"ts":1213700103000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"if we'd change to an XML parser mid-stream, we'd have to figure out what exactly document.write does and how it can be implemented sanely","msgtype":"m.text"},"ts":1213700104000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"that's what they're looking at, but it's not really clear to me how that works with tokenizing etc.","msgtype":"m.text"},"ts":1213700105000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"that's what Doug wanted to do actually","msgtype":"m.text"},"ts":1213700106000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"i was just wondering if there was anything i needed to work on","msgtype":"m.text"},"ts":1213700160000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"apparently there isn't yet","msgtype":"m.text"},"ts":1213700161000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"<keygen>","msgtype":"m.text"},"ts":1213700162000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"<keygen>?","msgtype":"m.text"},"ts":1213700163000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"okay, so if you would accept strict SVG parsing with errors falling back to HTML parsing, then progress is possible","msgtype":"m.text"},"ts":1213700164000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"in theory","msgtype":"m.text"},"ts":1213700165000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"potentially","msgtype":"m.text"},"ts":1213700220000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I'd much rather spend my time delivering an additional serializer to address the copy-paste requirements of the SVG WG than to spend my time writing two tokenizers that can be switched mid-stream","msgtype":"m.text"},"ts":1213700221000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"i'm not convinced such a scheme would work, but we'll find out in due course","msgtype":"m.text"},"ts":1213700222000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie, I guess that's part of WF2, but it'd be nice if it was in a spec so it becomes easier to advocate Koreans for instance into using it","msgtype":"m.text"},"ts":1213700223000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"someone should ping them","msgtype":"m.text"},"ts":1213700224000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"hsivonen: it's clear that having browsers reserialize as XML when copy/pasting is the right thing, but the SVG WG insists that copy-pasting in a text editor is a requirement","msgtype":"m.text"},"ts":1213700280000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"I'm not convinced the complexity imposed by additional strictness is a good use of anyone's limited resources","msgtype":"m.text"},"ts":1213700281000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"roc: I'd prefer to go with the right thing","msgtype":"m.text"},"ts":1213700282000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"they want both","msgtype":"m.text"},"ts":1213700283000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"<pony/>","msgtype":"m.text"},"ts":1213700340000,"senderName":"Dashiiiva","senderId":"Dashiiiva@irc"},
{"content":{"body":"roc: it's easy to want it if writing the parser is Someone Else's Problem","msgtype":"m.text"},"ts":1213700400000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"such is the life of the implementor","msgtype":"m.text"},"ts":1213700401000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"it doesn't really make sense to just accept that roc, imo","msgtype":"m.text"},"ts":1213700460000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I'm just the messenger","msgtype":"m.text"},"ts":1213700461000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"annevk: send me a spec","msgtype":"m.text"},"ts":1213700462000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"if we just implemented whatever the W3C came up with we'd never beat Flash","msgtype":"m.text"},"ts":1213700520000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I think it wasn't clear whether they'd be unhappy with using the current SVG-in-HTML parsing rules and just defining conformance so that the content must be well-formed XML, so that conforming HTML5 SVG could always be copied into a real XML document, which seems to me kind of nicer than actual XML parsing since it wouldn't affect the parser at all","msgtype":"m.text"},"ts":1213700521000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Hixie, I can't really get anything better than the old Netscape one, I guess I should try harder","msgtype":"m.text"},"ts":1213700522000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":":/","msgtype":"m.text"},"ts":1213700523000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Philip`: what do you mean \"conforming\"? They want browsers to check for well-formed XML of the SVG fragment before rendering it.","msgtype":"m.text"},"ts":1213700524000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"suggests black-box reverse engineering of <keygen>","msgtype":"m.emote"},"ts":1213700580000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: it does affect at least *a* parser if you expect that level of conformange to be checked in software","msgtype":"m.text"},"ts":1213700581000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"annevk: neither could i, and that was basically useless","msgtype":"m.text"},"ts":1213700582000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"right well. bed time. nn.","msgtype":"m.text"},"ts":1213700640000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A%3Cscript%3E%0Adocument.write(%27a%27)%3B%0Adocument.write(%27%3Cscript%3Edocument.write(%22c%22)%3C\\%2Fscript%3E%27)%3B%0Adocument.write(%27b%27)%3B%0A%3C%2Fscript%3E%0A has the same result in Gecko and WebKit","msgtype":"m.text"},"ts":1213700641000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"roc: I don't think all of 'they' considers that as an absolute requirement, so they could perhaps be convinced away from that","msgtype":"m.text"},"ts":1213700642000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"I tried","msgtype":"m.text"},"ts":1213700700000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"with Doug at least. The WG as a whole hasn't been all that responsive to my other issues","msgtype":"m.text"},"ts":1213700760000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"I wonder what heycam's position is on all this","msgtype":"m.text"},"ts":1213700761000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"I guess I should go read some browser source on how document.write is implemented","msgtype":"m.text"},"ts":1213701540000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"document.write writes at the current insertion point","msgtype":"m.text"},"ts":1213701660000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"which might be beyond the end of the current script element","msgtype":"m.text"},"ts":1213701661000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"if it document.wrote something already","msgtype":"m.text"},"ts":1213701720000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"othermaciej: in WebKit, does the script engine call into the parser on document.write or schedule stuff for running and return to the main loop? ","msgtype":"m.text"},"ts":1213701780000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"actually the insertion point starts right after the script, per-script, so when you document.write a script and then document.write something else, and that script document.writes, I think the content gets inserted before whatever was written after the second script","msgtype":"m.text"},"ts":1213701781000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"it just inserts stuff into the queue of characters to process","msgtype":"m.text"},"ts":1213701782000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"it does not return to the main loop at all","msgtype":"m.text"},"ts":1213701783000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"script execution during parsing is synchronous and blocks the parser","msgtype":"m.text"},"ts":1213701784000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"but when document.written data gets parsed, are there script engine stack frames on the call stack?","msgtype":"m.text"},"ts":1213701840000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"so if document.write document.writes, will the script engine be entered re-entrantly?","msgtype":"m.text"},"ts":1213701900000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"the script engine can be re-entered via the parser using innerHTML","msgtype":"m.text"},"ts":1213701901000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"but not document.write, I don't think","msgtype":"m.text"},"ts":1213701902000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"since nothing that document.write writes (to the current, parsing document) is processed until after the script completes execution","msgtype":"m.text"},"ts":1213701903000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"othermaciej: that doesn't seem to be the case","msgtype":"m.text"},"ts":1213701960000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A%3Cscript%3E%0Adocument.write('a')%3B%0Adocument.write('%3Cscript%3Edocument.write(%22b%22)%3C%5C%2Fscript%3E')%3B%0Adocument.write('c')%3B%0A%3C%2Fscript%3E","msgtype":"m.text"},"ts":1213701961000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"well I could be misremembering it, this is a very confusing area","msgtype":"m.text"},"ts":1213701962000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"the document.written script runs before the script that wrote it finishes","msgtype":"m.text"},"ts":1213702020000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"is that true?","msgtype":"m.text"},"ts":1213702021000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"the live dom viewer does not prove that","msgtype":"m.text"},"ts":1213702022000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"the output (\"abc\") is consistent with what I described","msgtype":"m.text"},"ts":1213702023000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"hsivonen, no, othermaciej is right.","msgtype":"m.text"},"ts":1213702080000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"first 'a<script>document.write(\"b\")<\\/script>c' is injected into the character stream right after the first script","msgtype":"m.text"},"ts":1213702081000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"then a is parsed","msgtype":"m.text"},"ts":1213702082000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"then the second script","msgtype":"m.text"},"ts":1213702083000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"which causes b to be injected into the token stream right after the second script","msgtype":"m.text"},"ts":1213702084000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"then c is parsed","msgtype":"m.text"},"ts":1213702140000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"each script starts with an insertion point right after its end tag","msgtype":"m.text"},"ts":1213702141000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"ah. excellent. That's what I thought at first, and then I got tangled in confusion","msgtype":"m.text"},"ts":1213702142000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"which may not be the same as the end of all currently inserted content","msgtype":"m.text"},"ts":1213702143000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"I wonder why Opera has two separate text nodes for bc","msgtype":"m.text"},"ts":1213702144000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"so why does the spec talk about re-entrant calls to the tree builder?","msgtype":"m.text"},"ts":1213702200000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hmm, maybe not.","msgtype":"m.text"},"ts":1213702201000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"document.write('a');","msgtype":"m.text"},"ts":1213702202000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"w(1);","msgtype":"m.text"},"ts":1213702203000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"document.write('<script>document.write(\"b\");w(3);<\\/script>');","msgtype":"m.text"},"ts":1213702204000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"w(2);","msgtype":"m.text"},"ts":1213702205000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"document.write('c');","msgtype":"m.text"},"ts":1213702206000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"that doesn't work as I'd expect it to.","msgtype":"m.text"},"ts":1213702207000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"at least in Firefox.","msgtype":"m.text"},"ts":1213702260000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"or in WebKit.","msgtype":"m.text"},"ts":1213702320000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"w(3) is executing before w(2), so it seems it's not waiting until the first script is finished.","msgtype":"m.text"},"ts":1213702321000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"yeah that didn't do what I expected either","msgtype":"m.text"},"ts":1213702680000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"seems like it can re-enter to arbitrary levels","msgtype":"m.text"},"ts":1213702740000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"<script>","msgtype":"m.text"},"ts":1213702741000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"document.write('a');","msgtype":"m.text"},"ts":1213702742000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"alert(1);","msgtype":"m.text"},"ts":1213702743000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"document.write('<script>document.write(\"b<script>document.write(\\'c\\'); alert(4);<\\\\/script>\"); alert(3);<\\/script>');","msgtype":"m.text"},"ts":1213702744000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"alert(2);","msgtype":"m.text"},"ts":1213702745000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"document.write('d');","msgtype":"m.text"},"ts":1213702746000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"</script>","msgtype":"m.text"},"ts":1213702747000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"alert requires UI to be responsive","msgtype":"m.text"},"ts":1213702920000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"does alert establish a nested event loop or does alert cause the call stack to unwind to the main event loop?","msgtype":"m.text"},"ts":1213702921000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"document.write is hard","msgtype":"m.text"},"ts":1213702980000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"alert makes a modal event loop","msgtype":"m.text"},"ts":1213703700000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"it does not cause all UI to be responsive","msgtype":"m.text"},"ts":1213703701000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"in Firefox 3, alert is window-modal, although, as I understand it, the windows have their UI run on one thread","msgtype":"m.text"},"ts":1213703760000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"alert seems app-modal is Safari","msgtype":"m.text"},"ts":1213703820000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"roc, sorry for the delay on your www-svg issues","msgtype":"m.text"},"ts":1213704420000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"(note that a couple of them are on the agenda for today's telcon (which i won't be at))","msgtype":"m.text"},"ts":1213704421000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"I'm getting curious about support for incremental rendering of document.written content","msgtype":"m.text"},"ts":1213704480000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"<script> without async is not so good for incremental rendering","msgtype":"m.text"},"ts":1213704540000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"as for html in svg, i have to say that i (persionally) haven't had time to look into it.  i believe the others did something on it at the F2F recently, and are writing up some text, but i haven't seen it.","msgtype":"m.text"},"ts":1213704660000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"tv ⇒ afk","msgtype":"m.emote"},"ts":1213704661000,"senderName":"heycam","senderId":"heycam@irc"},
{"content":{"body":"annevk: <script> without async *could* be good for incremental rendering, if a) layout runs on a different thread or b) the script engine stack is really on the heap, so that the C++ stack can unwind without breaking script state","msgtype":"m.text"},"ts":1213704900000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"however, I just saw some Gecko code that makes me want to write a test case to see if incremental layout works from document.written content","msgtype":"m.text"},"ts":1213704960000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"it seems safe to assume that Presto and Trident have concurrency models that differ significantly from Gecko and WebKit, which I gather are more alike","msgtype":"m.text"},"ts":1213705020000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hey, I just realised that <iframe sandbox=\"\"> could potentially create a false sense of security. If a website author uses it to embed user comments and hosts the comment file on the same domain as the parent page, it only protects the user as long as the comment page isn't viewed outside of the iframe. ","msgtype":"m.text"},"ts":1213707000000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"so websites would still need to filter out as much as possible, and keep sandbox=\"\" only as a last line of defence.","msgtype":"m.text"},"ts":1213707120000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"That would matter if you used <iframe sandbox src=...>, but you can't use that because it's unsafe in UAs that don't support sandboxing","msgtype":"m.text"},"ts":1213707240000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"at the moment, that's the only way to do it, since there isn't yet a way to embed the markup inline.","msgtype":"m.text"},"ts":1213707241000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"so you'd have to use <iframe sandbox doc=\"user's raw comment\" src=\"some-file-with-user's-sanitised-comment.html\"> and then it's alright anyway","msgtype":"m.text"},"ts":1213707242000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"doc=\"\" isn't specced yet.","msgtype":"m.text"},"ts":1213707300000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"if you were going to sanitise the comment, then why embed the raw comment inline?","msgtype":"m.text"},"ts":1213707360000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"I'm just not convinced sandox is a good solution for sandboxing user contribued content. It could be good for embedding content from 3rd party sites though.","msgtype":"m.text"},"ts":1213707420000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"The sanitised comment might strip out lots of safe content and styles that aren't in the whitelist, so it's uglier for users than the original unsanitised (sandboxed) comment","msgtype":"m.text"},"ts":1213707480000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"so if their UA supports sandboxing then they can benefit from getting the unsanitised version","msgtype":"m.text"},"ts":1213707540000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"if your sanitiser code is that bad, it's time to rewrite it.","msgtype":"m.text"},"ts":1213707541000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"If it was possible to write a sanitiser that wasn't bad, why would anyone want client-side sandboxing?","msgtype":"m.text"},"ts":1213707660000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"I just don't think it's a good idea to ever send unsanitised code to browsers. Imagine if there was a browser bug that inadvertently allowed something it shouldn't, and there were sites that published fully unsanitised comments, then you can bet there would be exploits pretty quickly.","msgtype":"m.text"},"ts":1213707661000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"incase their sanitiser missed something by mistake, not because it could accidently remove something it shouldn't.","msgtype":"m.text"},"ts":1213707720000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"having both sanitization and client-side sandboxing is safer","msgtype":"m.text"},"ts":1213707840000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"to get an exploit through, you'd need matching mistakes on both ends","msgtype":"m.text"},"ts":1213707841000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"is failing to sleep","msgtype":"m.emote"},"ts":1213707842000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"othermaciej, right. But if the server didn't sanitise, then the browser is the only line of defence, and you'd better hope there's no bug in it.","msgtype":"m.text"},"ts":1213707900000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"why is that a \"but\"?","msgtype":"m.text"},"ts":1213707901000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"because I'm concerned that sandbox=\"\" could create a false sense of security, where silly developers don't bother sanitising the code, and then it really doesn't depend on there being matching mistakes on both ends.","msgtype":"m.text"},"ts":1213707960000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"it's just one really big mistake on the server side and whatever small mistake in the browser is enough.","msgtype":"m.text"},"ts":1213708020000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"and if even Philip` is suggesting sending unsanitised code to browsers, I'm sure there will be developers in the wild crazy enough to do so as well.","msgtype":"m.text"},"ts":1213708080000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"one obviously shouldn't even remotely consider sending unsanitized code to browsers until sandbox=\"\" is widely implemented, which won't be for a while","msgtype":"m.text"},"ts":1213708200000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"but even then it's probably not a good idea","msgtype":"m.text"},"ts":1213708260000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"defense in depth and all","msgtype":"m.text"},"ts":1213708261000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"You could send unsanitised code in doc=\"\" even if sandbox=\"\" isn't implemented yet, as long as nobody implements doc=\"\" before implementing sandbox=\"\"","msgtype":"m.text"},"ts":1213708262000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"I'm willing to entertain the notion that adding sandbox=\"\" could in some cases hurt security through second-order effects like you describe","msgtype":"m.text"},"ts":1213708320000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"but I think it is likely not the case, because the vast number of sites currently doing blacklist-based instead of whitelist-based sanitization may well be better off with sandbox=\"\" and no server-side sanitization at all","msgtype":"m.text"},"ts":1213708380000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"why? Blacklist sanitation is better than nothing, even though it's clearly a flawed approach.","msgtype":"m.text"},"ts":1213708740000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"blacklists do not scale","msgtype":"m.text"},"ts":1213708800000,"senderName":"virtuelv","senderId":"virtuelv@irc"},
{"content":{"body":"virtuelv, yeah, I know that.","msgtype":"m.text"},"ts":1213708801000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"and especially if it's about cleaning markup","msgtype":"m.text"},"ts":1213708802000,"senderName":"virtuelv","senderId":"virtuelv@irc"},
{"content":{"body":"I would expect every blacklist-based filter to have holes, while browsers  could plausibly implement sandbox=\"\" close to correctly","msgtype":"m.text"},"ts":1213708803000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"nontheless, I think it is best to both filter on the server and use client-side restrictions","msgtype":"m.text"},"ts":1213708860000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"jgraham__, yt?","msgtype":"m.text"},"ts":1213709220000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"jgraham__, are you ever intending to finish and publish that @media blog post on the whatwg blog?","msgtype":"m.text"},"ts":1213709280000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"Hixie: shouldn't currentLoop be readonly?","msgtype":"m.text"},"ts":1213710540000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"If someone else wants to reply again to the sandboxing thread, be my guest. It seems obvious to me that his solution is flawed, but I can't really put it in words.","msgtype":"m.text"},"ts":1213718100000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"<applet> use case: http://wordle.net/gallery/Faux_Columns","msgtype":"m.text"},"ts":1213718220000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"can't see the outcome","msgtype":"m.emote"},"ts":1213718221000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"isn't sure whether that justifies <applet> or whether it's a sign that plugins are harmful","msgtype":"m.emote"},"ts":1213718280000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"<applet ... /> ... </applet>","msgtype":"m.text"},"ts":1213718281000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Oh wait","msgtype":"m.text"},"ts":1213718340000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Ignore me, I can't read","msgtype":"m.text"},"ts":1213718341000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"(I missed the '><param' in the middle)","msgtype":"m.text"},"ts":1213718342000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"quirks mode :/","msgtype":"m.text"},"ts":1213718343000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"That seems like an unnecessarily fancy way to display a static image","msgtype":"m.text"},"ts":1213718400000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"<applet> has a print() method?","msgtype":"m.text"},"ts":1213718460000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Oh, apparently that is actually necessary, in order to put the computation load on the clients instead of the server","msgtype":"m.text"},"ts":1213718461000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"(and it's not possible to do on the client even with the not-yet-implemented canvas text support, since it needs to analyse the shape of the characters)","msgtype":"m.text"},"ts":1213718640000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Is Safari treating it properly if <object type=\"text/html\" data=\"#foo\"></object> includes the current document? Firefox2, Opera9.5 and IE7 doesn't.","msgtype":"m.text"},"ts":1213720500000,"senderName":"csarven","senderId":"csarven@irc"},
{"content":{"body":"per HTML5, yes","msgtype":"m.text"},"ts":1213720560000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"per HTML4, probably also yes","msgtype":"m.text"},"ts":1213720620000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Good to here that.","msgtype":"m.text"},"ts":1213720800000,"senderName":"csarven","senderId":"csarven@irc"},
{"content":{"body":"Except that Safari includes the whole document and not just the contents of the element with id \"foo\"","msgtype":"m.text"},"ts":1213720980000,"senderName":"csarven","senderId":"csarven@irc"},
{"content":{"body":"csarven: that's right","msgtype":"m.text"},"ts":1213720981000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"csarven, that would be correct, actually","msgtype":"m.text"},"ts":1213720982000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"csarven: It should load the same as what loading a URI with a fragment would do normally","msgtype":"m.text"},"ts":1213720983000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"csarven, there's no special treatment specified","msgtype":"m.text"},"ts":1213720984000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Is there a user for the fragment identifier then?","msgtype":"m.text"},"ts":1213721040000,"senderName":"csarven","senderId":"csarven@irc"},
{"content":{"body":"s/user/use","msgtype":"m.text"},"ts":1213721041000,"senderName":"csarven","senderId":"csarven@irc"},
{"content":{"body":"it will show that within the <object>","msgtype":"m.text"},"ts":1213721520000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"http://simon.html5.org/html5-elements uses that for instance","msgtype":"m.text"},"ts":1213721521000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk I see an <iframe> instead of <object>","msgtype":"m.text"},"ts":1213722060000,"senderName":"csarven","senderId":"csarven@irc"},
{"content":{"body":"it would work the same way","msgtype":"m.text"},"ts":1213722061000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk If data value is a fragment identifier of the current page, is it expected for the UA to not request the current page seperately?","msgtype":"m.text"},"ts":1213723200000,"senderName":"csarven","senderId":"csarven@irc"},
{"content":{"body":"they're not handled specifically so I'd expect an additional request","msgtype":"m.text"},"ts":1213723320000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"though given that three browsers disagree with WebKit it might be worth noting somewhere to see whether Opera/Firefox are planning on fixing this","msgtype":"m.text"},"ts":1213723321000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hsivonen: as far as i can tell, all the examples you posted and what othermaciej was saying are consistent with the spec","msgtype":"m.text"},"ts":1213730100000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: yeah, they are. my understanding of document.write was flawed. sorry.","msgtype":"m.text"},"ts":1213730160000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"np","msgtype":"m.text"},"ts":1213730340000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I could use a more detailed diagram of how document.write is supposed to work","msgtype":"m.text"},"ts":1213733040000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"I'm having doubts about whether the \"insertion point\" is the most intuitive concept","msgtype":"m.text"},"ts":1213733100000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"and if treating document.written data as separate buffers that get pushed to the tokenizer would be easier to grasp","msgtype":"m.text"},"ts":1213733160000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"googling for \"acid3\" shows a link \"FAIL\" to http://acid3.acidtests.org/empty.txt , that's pretty funny","msgtype":"m.text"},"ts":1213733940000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"Hixie: clearly, google isn't standards compliant","msgtype":"m.text"},"ts":1213734000000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"is anyone here actually able to load getfirefox.com and download FF3 now? I can't connect.","msgtype":"m.text"},"ts":1213734120000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"Lachy: That's a common experience.","msgtype":"m.text"},"ts":1213734121000,"senderName":"webben","senderId":"webben@irc"},
{"content":{"body":"it's not good enough. How do they expect to break a world record like this?","msgtype":"m.text"},"ts":1213734180000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"are they trying to?","msgtype":"m.text"},"ts":1213734181000,"senderName":"webben","senderId":"webben@irc"},
{"content":{"body":"yes, haven't you heard?","msgtype":"m.text"},"ts":1213734182000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"Lachy: wfm","msgtype":"m.text"},"ts":1213734183000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"Lachy, John Gruber at Daring Fireball is saying the same thing","msgtype":"m.text"},"ts":1213734184000,"senderName":"didymos","senderId":"didymos@irc"},
{"content":{"body":"http://weblogs.mozillazine.org/asa/archives/2008/06/download_day_st.html","msgtype":"m.text"},"ts":1213734240000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"nah, I've studiously avoided all the hypes and just kept downloading latest prereleases ;)","msgtype":"m.text"},"ts":1213734241000,"senderName":"webben","senderId":"webben@irc"},
{"content":{"body":"personally, I got there at first attempt (just now)","msgtype":"m.text"},"ts":1213734242000,"senderName":"didymos","senderId":"didymos@irc"},
{"content":{"body":"the link to the world record page won't work either.","msgtype":"m.text"},"ts":1213734243000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"yeah, was just gonna say ;)","msgtype":"m.text"},"ts":1213734244000,"senderName":"webben","senderId":"webben@irc"},
{"content":{"body":"google fails acid2 as well iirc","msgtype":"m.text"},"ts":1213734300000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: that clearly shows google's commitment to standards ;)","msgtype":"m.text"},"ts":1213734360000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"google is a non-visual UA with little, if any, support for JS. So it doesn't really have much hope of fully passing the tests.","msgtype":"m.text"},"ts":1213734361000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"finds registerProtocolHandler() in the firefox advanced tips","msgtype":"m.emote"},"ts":1213734720000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"finds that http://www.mozilla.com/js/firefox-video-launch.js is text/html","msgtype":"m.emote"},"ts":1213735020000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"zcorpan_: Who needs correct MIME types?","msgtype":"m.text"},"ts":1213735080000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: indeed","msgtype":"m.text"},"ts":1213735081000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"Hixie: I'm reading https://bugzilla.mozilla.org/show_bug.cgi?id=95487#c39","msgtype":"m.text"},"ts":1213735980000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"learns his backup system has been broken since february","msgtype":"m.emote"},"ts":1213735981000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"\"oops\"","msgtype":"m.text"},"ts":1213735982000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: which seems to confirm my guess that document.written content is parsed without letting the event loop breathe","msgtype":"m.text"},"ts":1213736040000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"sounds plausible","msgtype":"m.text"},"ts":1213736041000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: does the spec expect the relationship of normal parsing and the first level of doc.write and the relationship of the first and second levels of doc.write to be different somehow","msgtype":"m.text"},"ts":1213736100000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"?","msgtype":"m.text"},"ts":1213736101000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"yes, you can only recurse once","msgtype":"m.text"},"ts":1213736102000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: what takes care of preventing deeper recursion?","msgtype":"m.text"},"ts":1213736160000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"looks","msgtype":"m.emote"},"ts":1213736161000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"wonders if document.write was considered a simple feature in the Netscape 2 design phase","msgtype":"m.emote"},"ts":1213736220000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"I imagine they designed it to be simple to implement in their architecture, and as hard as possible for any competitors to implement in their different architectures :-)","msgtype":"m.text"},"ts":1213736280000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"hsivonen: step 3 of document.write()","msgtype":"m.text"},"ts":1213736400000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"\"If there is a script that will execute as soon as the parser resumes, then the method must now return without further processing of the input stream.\"?","msgtype":"m.text"},"ts":1213736401000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"why does the behavior othermaciej showed earlier follow? ","msgtype":"m.text"},"ts":1213736460000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1213736461000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"in that case, the second level of document.write wrote a third level of script that executed similarly relative to the second level as the second level did relative to the first level","msgtype":"m.text"},"ts":1213736520000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"give me a concrete example and i'll try to describe how it runs","msgtype":"m.text"},"ts":1213736580000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0D%0A%3Cscript%3E%0D%0Adocument.write('a')%3B%0D%0Aalert(1)%3B%0D%0Adocument.write('%3Cscript%3Edocument.write(%22b%3Cscript%3Edocument.write(%5C'c%5C')%3B%20alert(4)%3B%3C%5C%5C%2Fscript%3E%22)%3B%20alert(3)%3B%3C%5C%2Fscript%3E')%3B%0D%0Aalert(2)%3B%0D%0Adocument.write('d')%3B%0D%0A%3C%2Fscript%3E%0D%0A","msgtype":"m.text"},"ts":1213736581000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"it looks like in Firefox and WebKit at least execute scripts that are document.written while executing another script","msgtype":"m.text"},"ts":1213736582000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"I made this test case:","msgtype":"m.text"},"ts":1213736583000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"<script>","msgtype":"m.text"},"ts":1213736584000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"document.write('a');","msgtype":"m.text"},"ts":1213736585000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"alert(1);","msgtype":"m.text"},"ts":1213736586000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"document.write('<script>document.write(\"b<script>document.write(\\'c\\'); alert(4);<\\\\/script>\"); alert(3);<\\/scr\\","msgtype":"m.text"},"ts":1213736587000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"ipt>');","msgtype":"m.text"},"ts":1213736588000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"alert(2);","msgtype":"m.text"},"ts":1213736589000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"document.write('d');","msgtype":"m.text"},"ts":1213736590000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"</script>","msgtype":"m.text"},"ts":1213736591000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"(sorry for bad line break)","msgtype":"m.text"},"ts":1213736592000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"it alerts 1 4 3 2","msgtype":"m.text"},"ts":1213736593000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"but prints abcd","msgtype":"m.text"},"ts":1213736594000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"ok hsivonen","msgtype":"m.text"},"ts":1213736700000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"so","msgtype":"m.text"},"ts":1213736701000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"jgraham__: ping","msgtype":"m.text"},"ts":1213736702000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"we tokenise up to the bottom of the input","msgtype":"m.text"},"ts":1213736760000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"gsnedders: Here, sorta","msgtype":"m.text"},"ts":1213736761000,"senderName":"jgraham_","senderId":"jgraham_@irc"},
{"content":{"body":"jgraham_: How do you get what's under `elif rank(element) >= rank(self.current_section.heading):` from the spec?","msgtype":"m.text"},"ts":1213736820000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"then we create a <Script> element and mark it \"parser-inserted\"","msgtype":"m.text"},"ts":1213736821000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"let \"old insertion point\" be \"uninitialised\"","msgtype":"m.text"},"ts":1213736880000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"let \"insertion point\" be just after the </script>","msgtype":"m.text"},"ts":1213736881000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"we then insert the element into the DOM and run the script, which goes as follows:","msgtype":"m.text"},"ts":1213736940000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"first a call to document.write()","msgtype":"m.text"},"ts":1213737000000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"step 1: insertion point is defined, skip this step","msgtype":"m.text"},"ts":1213737001000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"step 2: \"a\" is inserted after </script>","msgtype":"m.text"},"ts":1213737060000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"step 3: skip this step","msgtype":"m.text"},"ts":1213737061000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"jgraham_: As far as I can see, you deviate from the spec","msgtype":"m.text"},"ts":1213737062000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"step 4: run the tokeniser on the new input (just \"a\"), which just causes a text node saying \"a\" to be appended after the <script> in the DOM","msgtype":"m.text"},"ts":1213737120000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"step 5: return","msgtype":"m.text"},"ts":1213737121000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"next an alert. we alert \"1\".","msgtype":"m.text"},"ts":1213737122000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"next another document.write().","msgtype":"m.text"},"ts":1213737123000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"step 1: insertion point is defined, skip this step","msgtype":"m.text"},"ts":1213737124000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"gsnedders: I'll have a look. ","msgtype":"m.text"},"ts":1213737125000,"senderName":"jgraham_","senderId":"jgraham_@irc"},
{"content":{"body":"jgraham_: Meaning Hixie's algorithm is broken, and it's not an implementation bug on my behalf","msgtype":"m.text"},"ts":1213737180000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"hopes it is Hixie's fault so then he doesn't have to deal with it :P","msgtype":"m.emote"},"ts":1213737181000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"step 2: just after the \"a\" (and before the insertion point) we insert |<script>document.write(\"b<script>document.write('c'); alert(4);<\\/script>\"); alert(3);</script>|.","msgtype":"m.text"},"ts":1213737182000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"step 3: skip this step","msgtype":"m.text"},"ts":1213737183000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"step 4: run the tokeniser:","msgtype":"m.text"},"ts":1213737240000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"we tokenise a <script>","msgtype":"m.text"},"ts":1213737241000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"create a <script> element.","msgtype":"m.text"},"ts":1213737242000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"mark it as \"parser-inserted\".","msgtype":"m.text"},"ts":1213737243000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"tokenise until we get the </script>, and append that string to the <script>","msgtype":"m.text"},"ts":1213737300000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"let \"old insertion point\" be just after the last inserted piece of text (basically the end of the file)","msgtype":"m.text"},"ts":1213737301000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"jgraham_: I must be blind if it is in the spec :)","msgtype":"m.text"},"ts":1213737360000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"we let \"insertion point\" be the same, actually.","msgtype":"m.text"},"ts":1213737361000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"append the <script> to the DOM","msgtype":"m.text"},"ts":1213737420000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hmm, weird. Whenver I'm able to load getfirefox.com, it still links to Firefox 2","msgtype":"m.text"},"ts":1213737421000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"this is the script that says |document.write(\"b<script>document.write('c'); alert(4);<\\/script>\");alert(3);|","msgtype":"m.text"},"ts":1213737422000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"it's inline, so it executes.","msgtype":"m.text"},"ts":1213737480000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"gsnedders: I really should have commented this code more :)","msgtype":"m.text"},"ts":1213737481000,"senderName":"jgraham_","senderId":"jgraham_@irc"},
{"content":{"body":"we call document.write() again.","msgtype":"m.text"},"ts":1213737482000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"The relevant part of the spec is \"Otherwise, if the element being entered has a rank equal to or greater than the heading of the current section, then create a new section and append it to the outline of the current outlinee element, so that this new section is the new last section of that outline. Let current section be that new section. Let the element being entered be the new heading for the current section.\"","msgtype":"m.text"},"ts":1213737483000,"senderName":"jgraham_","senderId":"jgraham_@irc"},
{"content":{"body":"But I have no idea if that's the same as my implementation or not","msgtype":"m.text"},"ts":1213737484000,"senderName":"jgraham_","senderId":"jgraham_@irc"},
{"content":{"body":"Hixie: so far, we haven't had \"a script that will execute as soon as the parser resumes\", right?","msgtype":"m.text"},"ts":1213737540000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"correct (in fact i think we won't because in this example you never have <script src=\"\">)","msgtype":"m.text"},"ts":1213737541000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"jgraham_: It's totally different","msgtype":"m.text"},"ts":1213737542000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"jgraham_: the spec needs three lines","msgtype":"m.text"},"ts":1213737600000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"so i guess the spec doesn't (and shouldn't) limit it to two deep for inline scripts","msgtype":"m.text"},"ts":1213737601000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"jgraham_: and no loop","msgtype":"m.text"},"ts":1213737602000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"do you want me to continue?","msgtype":"m.text"},"ts":1213737603000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: no need to. thank you.","msgtype":"m.text"},"ts":1213737604000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"k","msgtype":"m.text"},"ts":1213737605000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"breathes a sigh of relief because this was getting complicated","msgtype":"m.emote"},"ts":1213737660000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: the concept of \"a script that will execute as soon as the parser resumes\" could be more clearly named so that the reader wouldn't try to see if an inline script can be it","msgtype":"m.text"},"ts":1213737661000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"any suggestions for a better name?","msgtype":"m.text"},"ts":1213737662000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"an external script, maybe?","msgtype":"m.text"},"ts":1213737720000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"not before I have figured out what exactly it is","msgtype":"m.text"},"ts":1213737721000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"http://pastebin.com/m7524f744 — that's the rather bogus TOC I'm getting","msgtype":"m.text"},"ts":1213737722000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: http://lists.w3.org/Archives/Public/public-html/2008Mar/0032.html","msgtype":"m.text"},"ts":1213737723000,"senderName":"jgraham_","senderId":"jgraham_@irc"},
{"content":{"body":"if it always an external script, then, yes, \"external script\" would be good","msgtype":"m.text"},"ts":1213737724000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"Hixie: Fix that!","msgtype":"m.text"},"ts":1213737725000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"no I have to learn why their execution has different steps :-/","msgtype":"m.text"},"ts":1213737726000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"runs and hides","msgtype":"m.emote"},"ts":1213737727000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"implements jgraham_'s prose","msgtype":"m.emote"},"ts":1213737780000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"hsivonen: external scripts have to be downloaded","msgtype":"m.text"},"ts":1213737781000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: did my email \"Re-entrant invocation of the tree builder\" make sense?","msgtype":"m.text"},"ts":1213737782000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"when did you send it?","msgtype":"m.text"},"ts":1213737783000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"public-html","msgtype":"m.text"},"ts":1213737784000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"wonders if public-html is a moment in time","msgtype":"m.emote"},"ts":1213737840000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"oh just now","msgtype":"m.text"},"ts":1213737841000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"oops. I misread when as where","msgtype":"m.text"},"ts":1213737842000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"45 minutes ago","msgtype":"m.text"},"ts":1213737900000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"works out why his backup wasn't working","msgtype":"m.emote"},"ts":1213737960000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"it was trying to back up three machines","msgtype":"m.text"},"ts":1213738020000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"the first one is one that i turned off in february","msgtype":"m.text"},"ts":1213738021000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"so my makefile was failing","msgtype":"m.text"},"ts":1213738022000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"oops","msgtype":"m.text"},"ts":1213738023000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"gsnedders: You can always vote in favour of the issue :)","msgtype":"m.text"},"ts":1213738080000,"senderName":"jgraham_","senderId":"jgraham_@irc"},
{"content":{"body":"jgraham_: Coward! Just bully Hixie!","msgtype":"m.text"},"ts":1213738081000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"a <script src> load stops the world until loaded, right?","msgtype":"m.text"},"ts":1213738082000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"gsnedders: (will get to your issue momentarily)","msgtype":"m.text"},"ts":1213738140000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hsivonen: not if it's nested deeply enough, iirc","msgtype":"m.text"},"ts":1213738141000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"realises he has no way to get at the parent of a section","msgtype":"m.emote"},"ts":1213738260000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Hixie: I guess I should convert othermaciej's example to use external scripts and see how the scripts run","msgtype":"m.text"},"ts":1213738320000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"having them run differently than in the inline case seems counter-intuitive","msgtype":"m.text"},"ts":1213738321000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"jgraham_: self[::-1] — what do two colons do?","msgtype":"m.text"},"ts":1213738380000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"hsivonen: oh, no, wait","msgtype":"m.text"},"ts":1213738381000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hsivonen: the problem is this","msgtype":"m.text"},"ts":1213738382000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hsivonen: it's a script the document.write()s multiple things in a row","msgtype":"m.text"},"ts":1213738383000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hsivonen: one of which is external","msgtype":"m.text"},"ts":1213738384000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hsivonen: it doesn't block script execution iirc","msgtype":"m.text"},"ts":1213738385000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hsivonen: only the parser","msgtype":"m.text"},"ts":1213738386000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"like document.write(\"<script src=foo><\\/script><script src=bar><\\/script>\")","msgtype":"m.text"},"ts":1213738440000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"?","msgtype":"m.text"},"ts":1213738441000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"gsnedders: things[x:y:z] means things[x], things[x+z], things[x+2*z], ... up to things[x+n*z] where n is the maximum number such that x+n*z < y, or something like that","msgtype":"m.text"},"ts":1213738500000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"gsnedders: and if x is omitted it means 0, and if y is omitted it means len(things)","msgtype":"m.text"},"ts":1213738501000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"gsnedders: oh but my explanation breaks down a bit","msgtype":"m.text"},"ts":1213738560000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"hsivonen: more like document.write(\"<script src=alert2><\\/script>\");alert(1);","msgtype":"m.text"},"ts":1213738561000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"gsnedders: but if you ignore all the details, then that means self[::-1] is just reversed(self)","msgtype":"m.text"},"ts":1213738562000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Hixie: that seems counter-intuitive","msgtype":"m.text"},"ts":1213738563000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"gsnedders: (but compatible with older Pythons that don't have 'reversed')","msgtype":"m.text"},"ts":1213738564000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: ah","msgtype":"m.text"},"ts":1213738620000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"hsivonen: specifically, <script>document.write(\"<script src=alert2><\\/script>\");document.write(\"this won't be tokenised until after the alert1 and alert2\");alert(1);</script>","msgtype":"m.text"},"ts":1213738621000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hsivonen: see the /topic","msgtype":"m.text"},"ts":1213738622000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: thanks. I need to study this in detail.","msgtype":"m.text"},"ts":1213738623000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"when you test this beware of hitting the cache; in some browsers that changes the behaviour","msgtype":"m.text"},"ts":1213738740000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"html5 goes out of its way not to be cache-sensitive here","msgtype":"m.text"},"ts":1213738741000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"fun!","msgtype":"m.text"},"ts":1213738742000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"gsnedders: What Philip` said. http://www.python.org/doc/2.3.5/whatsnew/section-slices.html","msgtype":"m.text"},"ts":1213738860000,"senderName":"jgraham_","senderId":"jgraham_@irc"},
{"content":{"body":"hsivonen: specifically in the spec this is implemented by having the \"pause until the script has completed loading\" be only ever executed in the very outer tree construction invokcation","msgtype":"m.text"},"ts":1213738861000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"invocation","msgtype":"m.text"},"ts":1213738862000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: so regarding my email, I could substitute checking if the tree builder is invoked recursively with checking if there's a document.write on the call stack?","msgtype":"m.text"},"ts":1213739220000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"i believe that is currently equivalent, yes","msgtype":"m.text"},"ts":1213739340000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"be wary of changes that violate that assumption, in case we ever add other ways to be reentrant","msgtype":"m.text"},"ts":1213739341000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: thanks","msgtype":"m.text"},"ts":1213739342000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"Hixie: it seems that it's necessary to keep track of document.write nesting level anyway: http://bonsai.mozilla.org/cvsblame.cgi?file=mozilla/content/html/document/src/nsHTMLDocument.cpp&rev=3.785&mark=2417-2420#2413","msgtype":"m.text"},"ts":1213739400000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: there are other ways to implement that restriction","msgtype":"m.text"},"ts":1213739580000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"replid to your mail btw","msgtype":"m.text"},"ts":1213739581000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"replied","msgtype":"m.text"},"ts":1213739640000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: restricting recursion depth?","msgtype":"m.text"},"ts":1213739641000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"Hixie: thanks","msgtype":"m.text"},"ts":1213739642000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"well what you really want to make sure is that a document.write() doesn't write a script that does another document.write(), but there's no guarantee that the second will be run while the first is on the call stack","msgtype":"m.text"},"ts":1213739700000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"(or rather, you want to block that but only when it's in an infinite loop)","msgtype":"m.text"},"ts":1213739701000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"another way is just to limit how much cpu/ram a script can use","msgtype":"m.text"},"ts":1213739760000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Infinite loops are _awesome_!","msgtype":"m.text"},"ts":1213739761000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"I mean, how else are you going to use a modern CPU?","msgtype":"m.text"},"ts":1213739820000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Hixie: I'll have to ponder your point about appending to a buffer on stack tomorrow","msgtype":"m.text"},"ts":1213739821000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"it's past my bed time","msgtype":"m.text"},"ts":1213739822000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"nn","msgtype":"m.text"},"ts":1213739823000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"nn.","msgtype":"m.text"},"ts":1213739880000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"and thanks for implementing this","msgtype":"m.text"},"ts":1213739881000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"it's good to have someone look at it this closely","msgtype":"m.text"},"ts":1213739882000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: the spec annotation system gives 500 when trying to log in","msgtype":"m.text"},"ts":1213740840000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1213740900000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i need to reboot the server","msgtype":"m.text"},"ts":1213740901000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"was going to add a pointer to http://simon.html5.org/test/html/dom/interfaces/HTMLElement/HTMLMediaElement/ somewhere","msgtype":"m.emote"},"ts":1213740902000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"for some reason dreamhost have apache set to spawn more processes than the server can handle, and it doesn't reap them","msgtype":"m.text"},"ts":1213740903000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"so we run out of ram","msgtype":"m.text"},"ts":1213740904000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"buy more ram :)","msgtype":"m.text"},"ts":1213740905000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"send me money :-)","msgtype":"m.text"},"ts":1213740960000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"doh :(","msgtype":"m.text"},"ts":1213740961000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"you should be happy i'm writing tests! :-p","msgtype":"m.text"},"ts":1213740962000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"though the ones i've got so far are pretty boring","msgtype":"m.text"},"ts":1213741020000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":":-)","msgtype":"m.text"},"ts":1213741080000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"try now","msgtype":"m.text"},"ts":1213741081000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"still 500","msgtype":"m.text"},"ts":1213741140000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"sigh","msgtype":"m.text"},"ts":1213741141000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"try now","msgtype":"m.text"},"ts":1213741200000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"still","msgtype":"m.text"},"ts":1213741201000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"i'll try tomorrow","msgtype":"m.text"},"ts":1213741202000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"bedtime","msgtype":"m.text"},"ts":1213741203000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"nn","msgtype":"m.text"},"ts":1213741204000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"nn","msgtype":"m.text"},"ts":1213741260000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"Hixie, how much does dreamhost charge for your private server?","msgtype":"m.text"},"ts":1213741380000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"$1 per 10 MHz CPU and 10MB RAM per month","msgtype":"m.text"},"ts":1213741440000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"and how much do you pay for?","msgtype":"m.text"},"ts":1213741441000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"varies based on load","msgtype":"m.text"},"ts":1213741500000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"ok","msgtype":"m.text"},"ts":1213741501000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"right now (high load on acid3 for no apparent reason) i'm using just under 1.5GB RAM","msgtype":"m.text"},"ts":1213741502000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"The release of Firefox 3 seems like an apparent reason for people to try Acid3","msgtype":"m.text"},"ts":1213741620000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"it only scores 51","msgtype":"m.text"},"ts":1213741680000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"yeah that was my reasoning too, but the referrers were all over hte place","msgtype":"m.text"},"ts":1213741681000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Lachy: no way, it should be over 70","msgtype":"m.text"},"ts":1213741682000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"oh, 71. It just paused at 51 for some reasonj","msgtype":"m.text"},"ts":1213741683000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"You ought to just cache the results based on UA string - there's no point having a hundred million people run the same test with an identical browser, and it's an awful waste of energy","msgtype":"m.text"},"ts":1213741684000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"heh","msgtype":"m.text"},"ts":1213741685000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"there's some networking in the middle of the test","msgtype":"m.text"},"ts":1213741740000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"yeah run it twice to get real results, otherwise your network will have too much effect on the test","msgtype":"m.text"},"ts":1213741741000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"just runs his localhost copy of the test so it doesn't suffer from network issues","msgtype":"m.emote"},"ts":1213741800000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"I told people to try the Safari 4 Developer Preview on Acid3 at WWDC, but I doubt that generated a whole lot of traffic","msgtype":"m.text"},"ts":1213741801000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"ok yeah running the logs through just checking the UA string instead of the referrer does indeed indicate that it's all ff3 users","msgtype":"m.text"},"ts":1213741802000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"mostly on xp","msgtype":"m.text"},"ts":1213741803000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"just looks on Wikipedia to get the Acid3 results","msgtype":"m.emote"},"ts":1213741804000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"some opera 9.5 users too","msgtype":"m.text"},"ts":1213741805000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"othermaciej, how recent is Safari 4 compared to the latest nightly WebKit?","msgtype":"m.text"},"ts":1213741860000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"Hixie: Can you deal with <http://lists.w3.org/Archives/Public/public-html/2008Mar/0032.html> over night?","msgtype":"m.text"},"ts":1213741861000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Lachy: it's an older WebKit, but a newer Safari (although you can run a nightly with S4DP installed)","msgtype":"m.text"},"ts":1213741862000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"is Safari 4 only available to people with ADC accounts?","msgtype":"m.text"},"ts":1213741920000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"the preview is up on ADC, which you need an account to access, but getting an ADC account is free","msgtype":"m.text"},"ts":1213741921000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"ok, I have a free account.","msgtype":"m.text"},"ts":1213741980000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"gsnedders: ok","msgtype":"m.text"},"ts":1213741981000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Lachy: you should be able to get it then (though I am not sure how to find the download, probably the search feature will find it)","msgtype":"m.text"},"ts":1213742040000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"yeah, found it.","msgtype":"m.text"},"ts":1213742100000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"when you log in, there's a link that says downloads and it's the 3rd listed under What's New","msgtype":"m.text"},"ts":1213742101000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"cool","msgtype":"m.text"},"ts":1213742102000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"does it have any cool new UI features that weren't in Safari 3?","msgtype":"m.text"},"ts":1213742160000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"Lachy: It handles what Fluid does nicely http://fluidapp.com/ (creating dedicated \"apps\" for websites)","msgtype":"m.text"},"ts":1213742220000,"senderName":"smedero","senderId":"smedero@irc"},
{"content":{"body":"ok. Why do I have to restart after installing Safari? It's like a Windows installer! :-(","msgtype":"m.text"},"ts":1213742340000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"brb","msgtype":"m.text"},"ts":1213742341000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"Lachy: you can actually force quit the installer when it tells you to reboot, as long as you quit all WebKit apps","msgtype":"m.text"},"ts":1213742640000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"Lachy: if you are willing to live on the edge a little","msgtype":"m.text"},"ts":1213742641000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"ah, too late. I already restarted.","msgtype":"m.text"},"ts":1213742700000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"anyway, it has \"Save as Web Application\" which among other things supports HTML5 <link rel=\"icon\" sizes=...> and <meta name=\"application-name\" ...>","msgtype":"m.text"},"ts":1213742701000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"oh, nice.","msgtype":"m.text"},"ts":1213742702000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"the installer should probably list the applications you have to close instead of just rebooting :-)","msgtype":"m.text"},"ts":1213742760000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"http://webkit.org/blog has the right markup","msgtype":"m.text"},"ts":1213742761000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"if you wanna test it out","msgtype":"m.text"},"ts":1213742762000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"better yet, the installer should just tell me which applications it wants to close, ask if it's ok and do it automatically","msgtype":"m.text"},"ts":1213742763000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"(but it will genreate a name and icon if needed)","msgtype":"m.text"},"ts":1213742820000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"sadly I am not an installer engineer, but I see you rpoint","msgtype":"m.text"},"ts":1213742821000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"othermaciej, http://webkit.org/images/surfin-safari.icns is served as text/plain.","msgtype":"m.text"},"ts":1213743060000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"Lachy: I guess I should figure out how to reconfigure the server","msgtype":"m.text"},"ts":1213743061000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"and although Firefox sniffed it as binary, Safari didn't and displayed a lot of jibberish.","msgtype":"m.text"},"ts":1213743062000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"if it's Apache, then .htaccess: AddType image/whatever-it-is .icns","msgtype":"m.text"},"ts":1213743120000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"that it works in safari4 when using the save as app feature is a bug in safari4 according to the spec :-)","msgtype":"m.text"},"ts":1213743360000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"(spec doesn't allow sniffing of types for <link> at the moment)","msgtype":"m.text"},"ts":1213743361000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Is it common for favicons to be sent with the wrong MIME type?","msgtype":"m.text"},"ts":1213743600000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"hey, with Web Applications like that, adding support for the new <menu> features in HTML5 would be cool, since the app could add its own menus to the system's menu bar.","msgtype":"m.text"},"ts":1213743601000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"(though I guess we could at least avoid poisoning the new thing)","msgtype":"m.text"},"ts":1213743602000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"othermaciej: i expect so","msgtype":"m.text"},"ts":1213743603000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"othermaciej: i expect to change the spec at some point and allow sniffing, frankly","msgtype":"m.text"},"ts":1213743660000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"yes, a way to add to app menus would be cool , though I don't think HTML5 <menu> is sufficient for that as currently spec'd","msgtype":"m.text"},"ts":1213743720000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"we're looking at what kinds of things developers want to add","msgtype":"m.text"},"ts":1213743721000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"back in a few, getting coffee","msgtype":"m.text"},"ts":1213743722000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"othermaciej, I don't think the default apache inlcudes the correct MIME type for .ico files, so probably quite a lot are sent as text/plain.","msgtype":"m.text"},"ts":1213743723000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"you'd need a new type on the menu element","msgtype":"m.text"},"ts":1213743724000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I thought that's what the type=\"toolbar\" was for","msgtype":"m.text"},"ts":1213743840000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"have I remembered incorrectly?","msgtype":"m.text"},"ts":1213743841000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"that's inline","msgtype":"m.text"},"ts":1213743842000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"oh, ok.","msgtype":"m.text"},"ts":1213743900000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"well, do we want to add a new type for it then?","msgtype":"m.text"},"ts":1213743901000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"what would it do when the page isn't installed?","msgtype":"m.text"},"ts":1213744020000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"dunno.","msgtype":"m.text"},"ts":1213744021000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"probably nothing. It could be reserved for when it is installed as a web app.","msgtype":"m.text"},"ts":1213744022000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"that would be bad","msgtype":"m.text"},"ts":1213744080000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"or fallback to type=toolbar","msgtype":"m.text"},"ts":1213744081000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"that would make people use it as toolbar and then installing pages would break their rendering","msgtype":"m.text"},"ts":1213744082000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: (and by overnight, I mean anytime by 20080618T154500+01)","msgtype":"m.text"},"ts":1213744083000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"hmm, then I don't know. This is obviously not a well thought out idea.","msgtype":"m.text"},"ts":1213744084000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"(which is a bit longer than overnight)","msgtype":"m.text"},"ts":1213744140000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: am having mail problems right now but it's next on my list :-)","msgtype":"m.text"},"ts":1213744141000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Out of 99 favicons, I see 53 image/x-icon, 20 text/html, 15 text/plain, 4 image/vnd.microsoft.icon, 4 image/gif, 3 image/png","msgtype":"m.text"},"ts":1213744142000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Lachy: it's something i spent a lot of time thinking about when speccing <menu> :-)","msgtype":"m.text"},"ts":1213744143000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Philip`: send mail asking for me to make sniffing allowed :-)","msgtype":"m.text"},"ts":1213744144000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"sniffles","msgtype":"m.emote"},"ts":1213744145000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"(That's counting 404 pages, which is probably exaggerated by there being a few months between getting the list of icons and checking the content-types)","msgtype":"m.text"},"ts":1213744146000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"right, so this probably was discsussed back then, and that's probably why I thought toolbar worked like that!","msgtype":"m.text"},"ts":1213744200000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"Lachy: :-)","msgtype":"m.text"},"ts":1213744201000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"(Oh, not that many - 81 were 200, 13 were 404)","msgtype":"m.text"},"ts":1213744202000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"othermaciej: Speaking of Saf4, does it support @rel='feed'?","msgtype":"m.text"},"ts":1213744260000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Maybe when it's not installed as a webapp, the browser could add some UI to indicate that there's a menu available and allow the user to switch into webapp mode for that site, which would then replace the menu bar.","msgtype":"m.text"},"ts":1213744320000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"though I have no idea what kind of UI would be appropriate for that.","msgtype":"m.text"},"ts":1213744380000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"What other site-specific browsers are there? Prism (web-runner). Fluid. Safari 4. (there's also several kiosk-mode like browser plugins, hacks, and modified versions.)","msgtype":"m.text"},"ts":1213744381000,"senderName":"smedero","senderId":"smedero@irc"},
{"content":{"body":"gsnedders: for feed autodiscovery? I assume so","msgtype":"m.text"},"ts":1213744440000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"though probably not w/ the HTML5 algorithm for such","msgtype":"m.text"},"ts":1213744441000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"othermaciej: @rel='feed' _is_ the HTML 5 way","msgtype":"m.text"},"ts":1213744442000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"othermaciej: it seems not","msgtype":"m.text"},"ts":1213744560000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"I think Firefox 3 supports rel=feed.","msgtype":"m.text"},"ts":1213744561000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"Lachy: Yeah, it does","msgtype":"m.text"},"ts":1213744620000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"confusing webpge... but I guess Hana (http://alloutsoftware.com/hana/) is another WebKit based site-specific browser tool ","msgtype":"m.text"},"ts":1213745100000,"senderName":"smedero","senderId":"smedero@irc"},
{"content":{"body":"There's also an my.opera blog entry on how to do something similar to Prism with Opera: http://my.opera.com/zomg/blog/2007/10/29/mozilla-prism-a-fancy-name-for-a-technology-as-old-as-the-browser","msgtype":"m.text"},"ts":1213745101000,"senderName":"smedero","senderId":"smedero@irc"},
{"content":{"body":"that blog entry is a bit confused","msgtype":"m.text"},"ts":1213745280000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"agreed.","msgtype":"m.text"},"ts":1213745281000,"senderName":"smedero","senderId":"smedero@irc"},
{"content":{"body":"indeed. Although we can make Opera behave in a similar way, the steps for setting it up is way too complicated.","msgtype":"m.text"},"ts":1213745340000,"senderName":"Lachy","senderId":"Lachy@irc"},
{"content":{"body":"Just finished reading through it... it only grazes the point of Prism.","msgtype":"m.text"},"ts":1213745341000,"senderName":"smedero","senderId":"smedero@irc"},
{"content":{"body":"but still, was just curious as to what other implementations were out in the wild....","msgtype":"m.text"},"ts":1213745342000,"senderName":"smedero","senderId":"smedero@irc"},
{"content":{"body":"goes back to his cave","msgtype":"m.emote"},"ts":1213745400000,"senderName":"smedero","senderId":"smedero@irc"},
{"content":{"body":"gsnedders: what's the pre-HTML5 way?","msgtype":"m.text"},"ts":1213745760000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"othermaciej: link[@alt='alternate'][@rel='application/atom+xml'], link[@alt='alternate'][@rel='application/rss+xml']","msgtype":"m.text"},"ts":1213745761000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"(that's also supported in html5, iirc)","msgtype":"m.text"},"ts":1213745820000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"(yes, it is)","msgtype":"m.text"},"ts":1213745821000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"(but link[@alt='feed'] is preferred IIRC)","msgtype":"m.text"},"ts":1213745822000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: ok, I'll make sure we put rel=\"feed\" on the roadmap","msgtype":"m.text"},"ts":1213745823000,"senderName":"othermaciej","senderId":"othermaciej@irc"},
{"content":{"body":"othermaciej: thx","msgtype":"m.text"},"ts":1213745880000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: fixed the spec","msgtype":"m.text"},"ts":1213745940000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: I'll fix the implementation when I get back from school, having gone to bed and got back up before hand","msgtype":"m.text"},"ts":1213745941000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"hehe","msgtype":"m.text"},"ts":1213746000000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"it's a very simply fix","msgtype":"m.text"},"ts":1213746001000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"makes the naïve mistake of looking","msgtype":"m.emote"},"ts":1213746002000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"probably a one line fix in your code","msgtype":"m.text"},"ts":1213746120000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1213746121000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"No, the comment that quotes the spec text too :)","msgtype":"m.text"},"ts":1213746122000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"heh","msgtype":"m.text"},"ts":1213746123000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: That still looks badly wrong","msgtype":"m.text"},"ts":1213746240000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"oh?","msgtype":"m.text"},"ts":1213746241000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"does it fix jgraham__'s example, at least?","msgtype":"m.text"},"ts":1213746242000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"http://pastebin.com/m7a8c10a9","msgtype":"m.text"},"ts":1213746243000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Hixie: yeah, it does","msgtype":"m.text"},"ts":1213746244000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"That's the TOC of the HTML5 spec according to the outline algorithm","msgtype":"m.text"},"ts":1213746300000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Which is obviously rather broken","msgtype":"m.text"},"ts":1213746301000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1213746302000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"looks like it's breaking on <body><h1><h2><h3><h3>","msgtype":"m.text"},"ts":1213746360000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"treating it as <body><h1><h2><h3><h1> or something","msgtype":"m.text"},"ts":1213746361000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"i can't see why that would happen, i expect you have a bug :-)","msgtype":"m.text"},"ts":1213746362000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Hixie: I've looked over it endlessly :)","msgtype":"m.text"},"ts":1213746363000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"is the source online?","msgtype":"m.text"},"ts":1213746420000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"It'd be easier to check if there were more impls of the spec (as jgraham__'s moves away from it)","msgtype":"m.text"},"ts":1213746421000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"http://pastebin.com/m2141a4ca — that's the latest copy","msgtype":"m.text"},"ts":1213746422000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"uh","msgtype":"m.text"},"ts":1213746600000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"line 136","msgtype":"m.text"},"ts":1213746601000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"shouldbn't the > be < ?","msgtype":"m.text"},"ts":1213746602000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"No, my impl. is just odd :)","msgtype":"m.text"},"ts":1213746603000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"See line 31","msgtype":"m.text"},"ts":1213746604000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"I need to make that more logical, though","msgtype":"m.text"},"ts":1213746660000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"notes that his outline algorithm only diverges from the spec in the exact way specified in the email he sent","msgtype":"m.emote"},"ts":1213746661000,"senderName":"jgraham__","senderId":"jgraham__@irc"},
{"content":{"body":"i changed the spec in a way different than what you suggested","msgtype":"m.text"},"ts":1213746720000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"gsnedders: i'd need to step through your code with a debugger to really figure out what's going on","msgtype":"m.text"},"ts":1213746780000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"I seem to recall thinking for a bit about the changes that were needed to make it work as expected, so if it turns out it works in all cases using a much simpler algorithm, it means that I'm even stupider than I previously thought :)","msgtype":"m.text"},"ts":1213746781000,"senderName":"jgraham__","senderId":"jgraham__@irc"},
{"content":{"body":"gsnedders: i recommend finding the smallest source markup you can and then walking through the code with it","msgtype":"m.text"},"ts":1213746782000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"gsnedders: and seeing why it backs out so far","msgtype":"m.text"},"ts":1213746783000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"s/as expected/as I expected/","msgtype":"m.text"},"ts":1213746784000,"senderName":"jgraham__","senderId":"jgraham__@irc"},
{"content":{"body":"tries hacking jgraham__'s impl to match the spec","msgtype":"m.emote"},"ts":1213746840000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Yeah, it must be an impl bug","msgtype":"m.text"},"ts":1213746841000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"jgraham__: i just checked in the change in reply to your e-mail, if you want to compare","msgtype":"m.text"},"ts":1213746842000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"Heh. Slight understatement of the difference in complexity :)","msgtype":"m.text"},"ts":1213746900000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Hmm I should go to sleep at the moment. gsnedders: I'll be interested to see what happens if you implement the new spec in my code","msgtype":"m.text"},"ts":1213747080000,"senderName":"jgraham__","senderId":"jgraham__@irc"},
{"content":{"body":"wonders why Yahoo Slurp seemingly follows links in <a src=\"...\">, as well as <a href> and <embed src> and <object data> and none of the other elements/attributes he's tested","msgtype":"m.emote"},"ts":1213747081000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"also wonders why Googlebot seemingly follows <a href> and <embed src> and nothing else, since he expects it to be far more aggressive than that","msgtype":"m.emote"},"ts":1213747140000,"senderName":"Philip`","senderId":"Philip`@irc"}
]