[
{"content":{"body":"where does the fetch spec sit in relation to reading and writing bytes over a tcp socket","msgtype":"m.text"},"ts":1532305481000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"two levels above that","msgtype":"m.text"},"ts":1532306757000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"tfw you click on \"handle fetch\" and now you have to think about service workers","msgtype":"m.text"},"ts":1532307628000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"devsnek: is this related in anyway to zero","msgtype":"m.text"},"ts":1532308035000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"TimothyGu: yes","msgtype":"m.text"},"ts":1532308043000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"ah","msgtype":"m.text"},"ts":1532308049000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"i have a socket binding","msgtype":"m.text"},"ts":1532308063000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"just need to plug fetch into it","msgtype":"m.text"},"ts":1532308067000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"but this spec is spaghetti","msgtype":"m.text"},"ts":1532308070000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"i've gone through like 5 different \"concept fetch\" algorithms and i still haven't found where an actual network request happens","msgtype":"m.text"},"ts":1532308103000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"ah yeah","msgtype":"m.text"},"ts":1532308138000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"hmmm here we go \"concept-http-network-fetch\"","msgtype":"m.text"},"ts":1532308149000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"so all fetch requests are pooled with keepalive","msgtype":"m.text"},"ts":1532308162000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"devsnek: btw I'd heavily recommend using node-fetch as a guide","msgtype":"m.text"},"ts":1532308355000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"this API is just so enormous ðŸ˜“","msgtype":"m.text"},"ts":1532308356000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"I looked at it","msgtype":"m.text"},"ts":1532308364000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"would be a good guide if I had an existing http interface","msgtype":"m.text"},"ts":1532308391000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"but I'm going from scratch","msgtype":"m.text"},"ts":1532308396000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"still","msgtype":"m.text"},"ts":1532308426000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":" you can kind of see what steps are required","msgtype":"m.text"},"ts":1532308442000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"up to you ofc","msgtype":"m.text"},"ts":1532308453000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"yeah I've looked through it a few times","msgtype":"m.text"},"ts":1532308475000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"believe me I'm trying to take every shortcut I can","msgtype":"m.text"},"ts":1532308486000,"senderName":"devsnek","senderId":"devsnek@irc"},
{"content":{"body":"bluh, browsers sure don't like nesting hover transitions inside scroll-behavior: smooth","msgtype":"m.text"},"ts":1532329205000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"man, smooth scrolling is nasty","msgtype":"m.text"},"ts":1532329753000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"doesn't even send mouseover events until it stops completely","msgtype":"m.text"},"ts":1532329772000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"smells like ancient optimizations that just make a mess of things now","msgtype":"m.text"},"ts":1532329797000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"and chrome doesn't send them at all until the mouse moves","msgtype":"m.text"},"ts":1532329906000,"senderName":"zewt","senderId":"zewt@irc"},
{"content":{"body":"Are commit snapshots available for the HTML spec?","msgtype":"m.text"},"ts":1532374462000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"TimothyGu: yeah, /commit-snapshots/","msgtype":"m.text"},"ts":1532378612000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"MikeSmith: highlighter is not working on Ci despite my best efforts :-/. https://travis-ci.org/whatwg/html/jobs/407320112#L2920","msgtype":"m.text"},"ts":1532378623000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: heh ok","msgtype":"m.text"},"ts":1532378659000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"Also, is there a way to get a reference to a document that's not in the origin of the current window?","msgtype":"m.text"},"ts":1532378664000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"You can get documents that are cross-origin but not ones that are cross-origin-domain","msgtype":"m.text"},"ts":1532378681000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Basically, use document.domain","msgtype":"m.text"},"ts":1532378688000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Hmm IDL highlighting is working though","msgtype":"m.text"},"ts":1532378861000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"MikeSmith: but non-Web IDL blocks have gotten their contents stripped to zero","msgtype":"m.text"},"ts":1532379033000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"s/zero/empty string","msgtype":"m.text"},"ts":1532379039000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: I'm trying to use document.domain to get around the port restriction","msgtype":"m.text"},"ts":1532379112000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"As the warning says \"as the ports are ignored when comparing origins after the document.domain attribute has been used\"","msgtype":"m.text"},"ts":1532379119000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"yeah that should work","msgtype":"m.text"},"ts":1532379128000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"But I haven't been able to do that","msgtype":"m.text"},"ts":1532379131000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"Both pages need to set document.domain","msgtype":"m.text"},"ts":1532379135000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Yeah I'm doing that","msgtype":"m.text"},"ts":1532379180000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"I'm also using localhost for testing","msgtype":"m.text"},"ts":1532379187000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"Maybe that's part of the reason?","msgtype":"m.text"},"ts":1532379193000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"specifically, I don't see how the effect of the port is cancelled out in domain's setter: https://html.spec.whatwg.org/#dom-document-domain","msgtype":"m.text"},"ts":1532379284000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"It sets the domain component. And all same-origin-domain checks (including property access) only compare domain","msgtype":"m.text"},"ts":1532379480000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"https://html.spec.whatwg.org/#same-origin-domain","msgtype":"m.text"},"ts":1532379489000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"jk I got it","msgtype":"m.text"},"ts":1532379495000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"\\o/","msgtype":"m.text"},"ts":1532379513000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"If anyone understands how Python include paths works and wants to help debug... https://github.com/whatwg/html-build/issues/169","msgtype":"m.text"},"ts":1532381625000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"annevk / Domenic: thoughts on what to do for https://github.com/whatwg/html/issues/3836? Haven't tested Edge yet, but aligning with three browsers sounds fine to me","msgtype":"m.text"},"ts":1532382094000,"senderName":"TimothyGu","senderId":"TimothyGu@irc"},
{"content":{"body":"TimothyGu: agreed!","msgtype":"m.text"},"ts":1532382148000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: No idea what you are doing there, but if you're hacking PYTHONPATH something has gone wrong","msgtype":"m.text"},"ts":1532382190000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Pretty sure you want to be running pip install on pygments at some point, which I don't see in your revert","msgtype":"m.text"},"ts":1532382217000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: yeah that was my impression","msgtype":"m.text"},"ts":1532382225000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"No he doesn't. I've already diagnosed the error.","msgtype":"m.text"},"ts":1532382229000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"But like I say I don't know what the overall setup is here","msgtype":"m.text"},"ts":1532382232000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"(It's a bug on Pygments' part, but I can fix it locally.)","msgtype":"m.text"},"ts":1532382239000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"jgraham: pygments is bundled somewhere","msgtype":"m.text"},"ts":1532382242000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"(The bug you're running into: https://bitbucket.org/birkenfeld/pygments-main/issues/1448/pygments-relies-on-global-imports-of-its)","msgtype":"m.text"},"ts":1532382297000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Maybe it expects to be pip installed but in our setup it's bundled so this causes issues?","msgtype":"m.text"},"ts":1532382304000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: You... you can see my messages, right?","msgtype":"m.text"},"ts":1532382324000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Sorta, on a train so laggy :)","msgtype":"m.text"},"ts":1532382335000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Ah, kk. ^_^","msgtype":"m.text"},"ts":1532382340000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Thanks for the diagnosing","msgtype":"m.text"},"ts":1532382342000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"TabAtkins: Seems like in a docker image just doing a global install is the fast path to the solution","msgtype":"m.text"},"ts":1532382387000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Anyway sleep","msgtype":"m.text"},"ts":1532382391000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: That doesn't help everyone else who might use this package. ^_^","msgtype":"m.text"},"ts":1532382403000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"And Domenic already has a fast-path fix for right now.","msgtype":"m.text"},"ts":1532382420000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"It does seem like the ecosystem is built on the assumption of global installs with pip, patched over with virtualenv or something. So when you want to do local installs manually a lot of code breaks.","msgtype":"m.text"},"ts":1532382719000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Yeah, but that's clumsy and terrible, and I really want a pure-local install for this. So I'm fixing it.","msgtype":"m.text"},"ts":1532383036000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"The bug is marked \"Major\" in their bug tracker, so maybe they'll actually fix it themselves.","msgtype":"m.text"},"ts":1532383049000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"Domenic: sorry about the build breakage","msgtype":"m.text"},"ts":1532384834000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"well, spec breakage actually","msgtype":"m.text"},"ts":1532384896000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I need to figure out why the code isnâ€™t working that I wrote for falling back to the source contents when the hightlighter fails","msgtype":"m.text"},"ts":1532384946000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"hmm, I canâ€™t reproduce the problem locally, even though I now have Pygments uninstalled (so it should just be using the Pygments copy from the highlighter submodule)","msgtype":"m.text"},"ts":1532385210000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"nm, managed to reproduce it","msgtype":"m.text"},"ts":1532386058000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I've documented the problem in the README for now, with the obvious workaround (install Pygments globally) until I get it fixed.","msgtype":"m.text"},"ts":1532386126000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"ok cool","msgtype":"m.text"},"ts":1532386136000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"hmm, but even though I now have the highlighter failing in my environment too, my code for falling back to the source still works. I donâ€™t get any empty <pre>s. Instead I just get the original <pre> contents (unhighlighted)","msgtype":"m.text"},"ts":1532386311000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"}
]