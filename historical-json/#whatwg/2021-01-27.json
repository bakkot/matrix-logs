[
{"content":{"body":"Oh, we already have /img/bird-webpage.svg which we could reuse, although we'd need to create a colored version","msgtype":"m.text"},"ts":1611706202000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"annevk: Does this sound true to you: An auxiliary browsing context can only be created during the creation of a new browsing session (although not all new browsing sessions contain auxiliary contexts)","msgtype":"m.text"},"ts":1611743544000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: yeah, because browsing session is 1:1 with top-level and top-level > auxiliary","msgtype":"m.text"},"ts":1611743809000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(I'm not sure if > denotes superset, but let's assume it does.)","msgtype":"m.text"},"ts":1611743828000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: although top-level browsing contexts can be created at other times, such as navigations that need to be in another context group","msgtype":"m.text"},"ts":1611743907000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"But auxiliary contexts are always created at the same time as a browsing session","msgtype":"m.text"},"ts":1611743945000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: oh, I see, yeah, I think that makes sense, though I still haven't explored when we want to split browsing session for those scenarios","msgtype":"m.text"},"ts":1611743993000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: in particular, if the user really does a new navigation, should sessionStorage survive? should history.back()? I'm not sure","msgtype":"m.text"},"ts":1611744029000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: we should probably explore that more as it seems those will be the XS-Leaks of the future","msgtype":"m.text"},"ts":1611744167000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I think the back button should work, but I'm less sure about `history.back`. But that doesn't need anything like a session swap, we can just have logic like \"if the previous session history entry uses a different browsing context, do nothing\"","msgtype":"m.text"},"ts":1611744169000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: right, but that doesn't work for sessionStorage","msgtype":"m.text"},"ts":1611744188000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: isn't session storage associated with the browsing context?","msgtype":"m.text"},"ts":1611744215000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: in the current spec it's associated with the browsing session, maybe that's a bug","msgtype":"m.text"},"ts":1611744232000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(I guess it's confusing that session storage is associated with the browsing context, rather than the browsing session, but that seems to be the way it should work)","msgtype":"m.text"},"ts":1611744242000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: if we associate it with the top-level bc (I don't think it ever makes sense to be associated with a nested one) COOP will \"break\" sessionStorage","msgtype":"m.text"},"ts":1611744293000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"So one question is whether it's okay for COOP to do that and if not, whether a user-driven navigation is different from COOP in that matter","msgtype":"m.text"},"ts":1611744347000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: it'd be sad to have to add yet another layer, but yeah there's a strong case for having session storage survive one or both of those cases","msgtype":"m.text"},"ts":1611744440000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"annevk: I guess I can either associate session storage with the browsing session (so it remains there after all session navigations), the context (so it changes with context changes) or associate it with session history entries, meaning we can choose to carry it over or not in different situations, independent of the context","msgtype":"m.text"},"ts":1611744572000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"Not something we need to solve right now, thankfully","msgtype":"m.text"},"ts":1611744602000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"I think it needs to survive COOP so you can do site A -> site B -> site A and not lose your \"session\", but I'm less convinced if the user then navigated to site C (through the address bar) and that redirects to site A","msgtype":"m.text"},"ts":1611744707000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Maybe it's reasonable to leave that up to the browser though, whether they start a new browsing session or not and what that means for their UI","msgtype":"m.text"},"ts":1611744780000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I guess we should just call it out whenever we define address bar navigation","msgtype":"m.text"},"ts":1611744794000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Does that seem like a reasonable resolution JakeA?","msgtype":"m.text"},"ts":1611744810000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I'd like to avoid switching the browsing session for a window/tab, unless the UA wants it to be equivalent to closing the tab and creating a new one","msgtype":"m.text"},"ts":1611744873000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"But I think there are reasonable ways to achieve all the options here, so I'm not worried","msgtype":"m.text"},"ts":1611744891000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"Cloning session history is also an option, but I don't think that achieves anything","msgtype":"m.text"},"ts":1611744931000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"(unless it can be used as a communication channel)","msgtype":"m.text"},"ts":1611744959000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: right, I think that's what I'm saying, a UA may treat it as closing the tab and creating a new one and since the UI is UA-controlled they can also carry over some back-button state","msgtype":"m.text"},"ts":1611744967000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: although I guess if not all UAs do that you still get weird sessionStorage corner cases","msgtype":"m.text"},"ts":1611745000000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"but once the address bar is invoked that seems hard to avoid","msgtype":"m.text"},"ts":1611745026000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"invoked works, but I meant involved","msgtype":"m.text"},"ts":1611745040000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I guess I'm trying to explain the behavior of the back button too, but I suppose I don't need to do that","msgtype":"m.text"},"ts":1611745071000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"sflhfbrelksjhf now I want to rename browsing session since it doesn't match up with session storage","msgtype":"m.text"},"ts":1611745241000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"I can do that later if needed","msgtype":"m.text"},"ts":1611745250000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: anything about the back button is a suggestion at most, it's UI and doesn't even have to exist in theory","msgtype":"m.text"},"ts":1611745338000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: I think we should only rename it if they don't end up being 1:1, my suggestion above is that they are 1:1","msgtype":"m.text"},"ts":1611745377000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: and that's also what we ended up specifying thus far (which is not much, admittedly)","msgtype":"m.text"},"ts":1611745406000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: specing how session history works is kinda hard if the back button ends up undefined","msgtype":"m.text"},"ts":1611745449000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: fair, I think it's valid to say that if UI is exposed it must act in this way, similar to address bar navigations","msgtype":"m.text"},"ts":1611745671000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: we just can't dictate that it exists or that it exposes all the entries the spec might have found","msgtype":"m.text"},"ts":1611745700000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yeah that's fair. Certain kinds of JS-initiated history traversals will be disallowed due to browsing context changes, but the back button would be allowed to cross that boundary.","msgtype":"m.text"},"ts":1611745811000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"annevk: It feels like session storage could be associated with the browsing context, and the reference could be shared by multiple contexts in cases where that's allowed (in-page COOP navigations)","msgtype":"m.text"},"ts":1611745854000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"eh feels like we've got a lot of ways to do whatever we end up wanting to do","msgtype":"m.text"},"ts":1611745876000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"Yeah ðŸ˜Š","msgtype":"m.text"},"ts":1611746239000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: https://html.spec.whatwg.org/multipage/browsers.html#the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name \"User agents are encouraged to provide a way for users to configure the user agent to always reuse current.\" - what is this referring to? An option to avoid creating new browser windows/tabs on navigations? Or specifically browsing contexts? I guess it's the former else it's COOP-breaky","msgtype":"m.text"},"ts":1611756360000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: yeah, avoid new tab","msgtype":"m.text"},"ts":1611756397000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ta!","msgtype":"m.text"},"ts":1611756407000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: it's really old text that could use some polish","msgtype":"m.text"},"ts":1611756410000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: I think we also lack force new tab","msgtype":"m.text"},"ts":1611756427000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: There's \"If the user agent has been configured such that in this instance it will create a new browsing context\"","msgtype":"m.text"},"ts":1611756550000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"ah","msgtype":"m.text"},"ts":1611756604000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"but yeah I'll reword that","msgtype":"m.text"},"ts":1611756614000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"TabAtkins: https://drafts.csswg.org/web-animations-1/ seems to now be missing its *.html","msgtype":"m.text"},"ts":1611766914000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"and https://drafts.csswg.org/ homepage now has no index","msgtype":"m.text"},"ts":1611766943000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"ah, all directories missing their *.html now, it looks like","msgtype":"m.text"},"ts":1611767027000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"https://drafts.csswg.org/css-align-3/","msgtype":"m.text"},"ts":1611767042000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: yeah, fixed now. Ping plinss when this happens. It's been happening a bunch lately, I'm trying to get him to up priority of saving a statically-served version of the specs. (Right now there's a dynamic redirect to where the static version is saved, which can fall over.)","msgtype":"m.text"},"ts":1611769738000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"TabAtkins: ah OK thanks","msgtype":"m.text"},"ts":1611769757000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"will ping plinss if I run into it again","msgtype":"m.text"},"ts":1611769779000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"this is the first time I have ever personally run into it, as far as I can can recall","msgtype":"m.text"},"ts":1611769810000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Domenic and I restored tweeting: https://twitter.com/thedomstandard/status/1354496441859899400 (hopefully it works for other standards too)","msgtype":"m.text"},"ts":1611773922000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I really like that we now control the format and can trim lines and make the links into cards and such","msgtype":"m.text"},"ts":1611774791000,"senderName":"Domenic","senderId":"Domenic@irc"}
]