[
{"content":{"body":"annevk: care to take a look at https://github.com/whatwg/fetch/pull/881? Want to get a read of general direction before I rebase the HTML PR on it","msgtype":"m.text"},"ts":1553160769000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"thx!","msgtype":"m.text"},"ts":1553163143000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"o/ Quick question: In WebIDL, can \"readonly attribute\"s contain an algorithm with \"steps\" like methods can?","msgtype":"m.text"},"ts":1553173053000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: yes, it's a getter","msgtype":"m.text"},"ts":1553175477000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"lgrahl: however, please ensure obj.attr === obj.attr","msgtype":"m.text"},"ts":1553175491000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Do you have an example for such a check?","msgtype":"m.text"},"ts":1553175733000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: check?","msgtype":"m.text"},"ts":1553175777000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"lgrahl: it's a design principle: https://w3ctag.github.io/design-principles/#attributes-like-data","msgtype":"m.text"},"ts":1553175813000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"lgrahl: the way to write the prose is typically something like \"The fooBar attribute's getter must run these steps:\"","msgtype":"m.text"},"ts":1553175880000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"lgrahl: and then depending on what it returns you might need [SameObject] in IDL, an internal slot to store some value in, etc.","msgtype":"m.text"},"ts":1553175917000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I wonder... do you consider a getter appropriate for a result that depends on whether or not a permission has been granted via the permission API?","msgtype":"m.text"},"ts":1553175960000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: stuff that's tied to permissions should be a promise","msgtype":"m.text"},"ts":1553176097000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: When requesting, definitely. But when just fetching the current state?","msgtype":"m.text"},"ts":1553176118000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: could be returned from a getter, but managing lifetime might be icky","msgtype":"m.text"},"ts":1553176124000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"lgrahl: what's the current state when you start out?","msgtype":"m.text"},"ts":1553176147000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"lgrahl: if it requires accessing the permission store, you introduced synchronous IPC","msgtype":"m.text"},"ts":1553176160000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: It might require accessing the permission store.","msgtype":"m.text"},"ts":1553176180000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: then you use a promise","msgtype":"m.text"},"ts":1553176187000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Then I'm confused by the spec. https://www.w3.org/TR/permissions/#reading-current-states looks sync to me.","msgtype":"m.text"},"ts":1553176202000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"please no new synchronous IPC APIs üòä","msgtype":"m.text"},"ts":1553176211000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"lgrahl: that might need patching in some way","msgtype":"m.text"},"ts":1553176256000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"The spec?","msgtype":"m.text"},"ts":1553176272000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: yeah, it's definitely somewhat wrong","msgtype":"m.text"},"ts":1553176284000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I'm happy to use a Promise, don't get me wrong. :)","msgtype":"m.text"},"ts":1553176294000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"Then I'll just change that to a promise.","msgtype":"m.text"},"ts":1553176304000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"üëçüèª","msgtype":"m.text"},"ts":1553176350000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Can you tell me what the \"current realm\" in the Permission API refers to? What is the scope of that realm? The domain name?","msgtype":"m.text"},"ts":1553182073000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: a realm is 1:1 with a JavaScript global","msgtype":"m.text"},"ts":1553182432000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"lgrahl: and it's effectively a container of sorts for one","msgtype":"m.text"},"ts":1553182445000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: So, in my head, can I map that to the \"page\"? :)","msgtype":"m.text"},"ts":1553182714000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"annevk: Or does it also affect other pages on the same domain? For example, when a permission storage entry has been made.","msgtype":"m.text"},"ts":1553182764000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: I guess you can consider it roughly analogous to document (which I guess means page, that's not really a term we use)","msgtype":"m.text"},"ts":1553182802000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(except for printing)","msgtype":"m.text"},"ts":1553182814000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Heh, document is alright.","msgtype":"m.text"},"ts":1553182826000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"annevk: Let me rephrase that question then: If a permission storage entry has been made, will that be effective immediately to other documents? Furthermore, will it affect any other documents but those shipped from hat precise domain (such as subdomains)?","msgtype":"m.text"},"ts":1553183083000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: I think that depends on the implementation and the permission","msgtype":"m.text"},"ts":1553183121000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Hrm, I haven't seen any spec defining that (or I missed something).","msgtype":"m.text"},"ts":1553183215000,"senderName":"lgrahl","senderId":"lgrahl@irc"},
{"content":{"body":"lgrahl: I mean, ISSUE 1 under https://www.w3.org/TR/permissions/#reading-current-states hints at it and that algorithm basically doesn't describe any scoping or keying","msgtype":"m.text"},"ts":1553183515000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I see. Thanks for your help so far! I'm working on a use case neutral permission request for WebRTC.","msgtype":"m.text"},"ts":1553183706000,"senderName":"lgrahl","senderId":"lgrahl@irc"}
]