[
{"content":{"body":"smola: : failing is because of port parsing","msgtype":"m.text"},"ts":1389657815000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smola: so it doesn't really count I think","msgtype":"m.text"},"ts":1389657848000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yes, and then if you do a.host = 'a:b' the behaviour also differs","msgtype":"m.text"},"ts":1389658231000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"smola: yeah I know, URLs are a mess","msgtype":"m.text"},"ts":1389658254000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smola: I personally like what we have now, modulo the check needing to come after IDNA","msgtype":"m.text"},"ts":1389658280000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smola: I'd really like to let someone else do the domain parsing entirely","msgtype":"m.text"},"ts":1389658320000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smola: but the IETF / Unicode crowd isn't doing much at the moment","msgtype":"m.text"},"ts":1389658342000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"as far as I see, the post-ToASCII checks (and deciding which characters to allow there) are the only thing left?","msgtype":"m.text"},"ts":1389658427000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"well, there's other stuff such as length limits according to DNS","msgtype":"m.text"},"ts":1389658605000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"not sure if that should be part of the spec though","msgtype":"m.text"},"ts":1389658613000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"if they are observable before we hit DNS, yes","msgtype":"m.text"},"ts":1389658765000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"IDNA does those checks","msgtype":"m.text"},"ts":1389658771000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah, that is, max 127 labels, 63 bytes per label, 253 bytes in the full textual representation","msgtype":"m.text"},"ts":1389658774000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"or something like that","msgtype":"m.text"},"ts":1389658779000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"but maybe they are skipped if everything is ASCII?","msgtype":"m.text"},"ts":1389658781000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Firefox checks some of them","msgtype":"m.text"},"ts":1389658784000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"I think they're done independently of it being ASCII or not","msgtype":"m.text"},"ts":1389658879000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"but it's too late to check it :p","msgtype":"m.text"},"ts":1389658884000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"oh, 12:21, I'll have a look tomorrow I suppose","msgtype":"m.text"},"ts":1389658888000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yup, I'm leaving for today, good night","msgtype":"m.text"},"ts":1389659010000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"nn","msgtype":"m.text"},"ts":1389659285000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk-cloud: re http://krijnhoetmer.nl/irc-logs/whatwg/20140113#l-961 check the error console","msgtype":"m.text"},"ts":1389682901000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"annevk-cloud: you probably want document.documentElement.removeChild","msgtype":"m.text"},"ts":1389682912000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"oh that was pointed out already","msgtype":"m.text"},"ts":1389683089000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"annevk-cloud: presto's xml parser (and old html parser) would go wacky when removing an element during parsing, iirc","msgtype":"m.text"},"ts":1389683240000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"wonders what happened to initialTime","msgtype":"m.emote"},"ts":1389688520000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"http://html5.org/tools/web-apps-tracker?from=7045&to=7046 apparently","msgtype":"m.text"},"ts":1389688874000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Lol at www-tag","msgtype":"m.text"},"ts":1389695837000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"If server configuration became easier CORS could be a setting at the DNS level. Where servers announce they know CORS exists, thereby avoiding the need for preflight requests.","msgtype":"m.text"},"ts":1389696342000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Could also configure HSTS there...","msgtype":"m.text"},"ts":1389696378000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"and CSP","msgtype":"m.text"},"ts":1389696824000,"senderName":"darobin","senderId":"darobin@irc"},
{"content":{"body":"CSP is not quite global; CORS isn't quite either of course...","msgtype":"m.text"},"ts":1389696905000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"zcorpan_: you mentioned a set of 102,000 pages containing weird URLs","msgtype":"m.text"},"ts":1389698286000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"zcorpan_: is that public?","msgtype":"m.text"},"ts":1389698290000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"smola: http://webdevdata.org","msgtype":"m.text"},"ts":1389698340000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"smola: https://www.w3.org/Bugs/Public/show_bug.cgi?id=23009","msgtype":"m.text"},"ts":1389698415000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yeah, I was checking now, thanks","msgtype":"m.text"},"ts":1389698599000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"smola: I guess I should also ban 0x09, 0x0A, and 0x0D","msgtype":"m.text"},"ts":1389698636000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"zcorpan_: awesome, thank you","msgtype":"m.text"},"ts":1389698666000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"adds those","msgtype":"m.emote"},"ts":1389698695000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: if re-parsing must give the same result, yes","msgtype":"m.text"},"ts":1389698719000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"smola: we want idempotency as much as possible for security","msgtype":"m.text"},"ts":1389698754000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yes, I also want idempotency because I use this code for URL normalization in crawling","msgtype":"m.text"},"ts":1389698804000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"non-idempoency: more duplicates","msgtype":"m.text"},"ts":1389698813000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"Still a bunch of open bugs around percent encoding :/","msgtype":"m.text"},"ts":1389698961000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I hate that shit","msgtype":"m.text"},"ts":1389698962000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Hi","msgtype":"m.text"},"ts":1389699184000,"senderName":"gjsrivastava","senderId":"gjsrivastava@irc"},
{"content":{"body":"annevk: btw, has someone ever seen such weird hostnames in weird intranet configurations?","msgtype":"m.text"},"ts":1389699387000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"thinks those intranets are just magic elves","msgtype":"m.emote"},"ts":1389699411000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"annevk: lots of cool things could be done if 1) DNS was easy to configure (it actually can be pretty easy), 2) DNSSEC was deployed (can be bought as a service already) and 3) middle boxes allowed currently-unusual DNS responses to flow through","msgtype":"m.text"},"ts":1389699426000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"annevk: the situation with #3 is really sad","msgtype":"m.text"},"ts":1389699437000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"middle boxes are sad","msgtype":"m.text"},"ts":1389699446000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"middleware is sad","msgtype":"m.text"},"ts":1389699449000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smola: hmm, I should have done some testing maybe, I cannot reproduce even the label limits","msgtype":"m.text"},"ts":1389699495000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"E.g. try","msgtype":"m.text"},"ts":1389699590000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"<a href=\"http://0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789/\">test</a>","msgtype":"m.text"},"ts":1389699594000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"<script>w(document.querySelector(\"a\").host.length)</script>","msgtype":"m.text"},"ts":1389699595000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"IDNA interoperability is so sad","msgtype":"m.text"},"ts":1389699638000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: true, it actually works in chrome","msgtype":"m.text"},"ts":1389699710000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"of course it'll never resolve","msgtype":"m.text"},"ts":1389699720000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"smola: works in Firefox too","msgtype":"m.text"},"ts":1389699726000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hm, or it might resolve with /etc/hosts ?","msgtype":"m.text"},"ts":1389699761000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"I suppose it could, I don't really have any desire to go lower on the stack at the moment","msgtype":"m.text"},"ts":1389699828000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"This part is fucked up enough as is","msgtype":"m.text"},"ts":1389699833000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"on Firefox+Linux it does not resolve it in any case","msgtype":"m.text"},"ts":1389699882000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"\"A new body is required to take on the responsibility of providing standards for an open web.\" http://lists.w3.org/Archives/Public/public-restrictedmedia/2014Jan/0070.html","msgtype":"m.text"},"ts":1389701133000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"WHATWG?","msgtype":"m.text"},"ts":1389701177000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Not the Web Hypermedia Including Concessions for Hollywood Working Group?","msgtype":"m.text"},"ts":1389701394000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Clever, sir, clever","msgtype":"m.text"},"ts":1389701648000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"anti-DRM candidate emailing from @live.com, interesting :p","msgtype":"m.text"},"ts":1389702824000,"senderName":"smola","senderId":"smola@irc"},
{"content":{"body":"nice one jgraham, really nice one","msgtype":"m.text"},"ts":1389703427000,"senderName":"darobin","senderId":"darobin@irc"},
{"content":{"body":"and then we could go WHICH hunting","msgtype":"m.text"},"ts":1389703435000,"senderName":"darobin","senderId":"darobin@irc"},
{"content":{"body":"sankha93 are you around?","msgtype":"m.text"},"ts":1389703597000,"senderName":"gjsrivastava","senderId":"gjsrivastava@irc"},
{"content":{"body":"gjsrivastava: I know sankha but he is not here right now","msgtype":"m.text"},"ts":1389703645000,"senderName":"blackhair","senderId":"blackhair@irc"},
{"content":{"body":"Domenic_: Note that \"will\" in spec language is a statement of fact","msgtype":"m.text"},"ts":1389710515000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"So if you were to say \"these steps will be run asynchronously\", there would have to be text elsewhere that actually caused those steps to run","msgtype":"m.text"},"ts":1389710612000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Why do we not have utility functions for specifications?","msgtype":"m.text"},"ts":1389713389000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"E.g. hex bytes to number","msgtype":"m.text"},"ts":1389713399000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jgraham: hmm thanks, good to note","msgtype":"m.text"},"ts":1389713570000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"In fact, that's not much more than a note","msgtype":"m.text"},"ts":1389713601000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"A statement of fact is more like \"A has an associated B.\"","msgtype":"m.text"},"ts":1389713619000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Facts describe the world, notes explain it, and requirements make it run.","msgtype":"m.text"},"ts":1389713659000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"It felt like a fact to me. It's a requirement to run those steps, but a fact about those steps is that they will happen asynchronously.","msgtype":"m.text"},"ts":1389713681000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"although, they don't have to be asynchronous","msgtype":"m.text"},"ts":1389713694000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"if e.g. that data is cached in memory","msgtype":"m.text"},"ts":1389713699000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"Well, notes should be factual, but they are usually duplicative.","msgtype":"m.text"},"ts":1389713718000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic_: http://ln.hixie.ch/?start=1140242962&count=1 is the canonical source on this","msgtype":"m.text"},"ts":1389713914000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: ah excellent.","msgtype":"m.text"},"ts":1389713932000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"Seems I use statement of fact more as a definition. I try to avoid the statements of facts Hixie talks about, as, as he points out, they are confusing","msgtype":"m.text"},"ts":1389714385000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yeah. In this case I think it would be very confusing.","msgtype":"m.text"},"ts":1389714455000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"http://www.w3.org/TR/2014/NOTE-calendar-api-20140114/","msgtype":"m.text"},"ts":1389714473000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"http://www.w3.org/TR/2014/NOTE-messaging-api-20140114/","msgtype":"m.text"},"ts":1389714473000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"http://www.w3.org/TR/2014/NOTE-system-info-api-20140114/","msgtype":"m.text"},"ts":1389714473000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"http://www.w3.org/TR/2014/NOTE-contacts-api-20140114/","msgtype":"m.text"},"ts":1389714475000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"http://www.w3.org/TR/2014/NOTE-gallery-20140114/","msgtype":"m.text"},"ts":1389714477000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"http://www.w3.org/TR/2014/NOTE-webintents-local-services-20140114/","msgtype":"m.text"},"ts":1389714479000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"bye bye APIs?","msgtype":"m.text"},"ts":1389714485000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic_: in https://github.com/domenic/promises-unwrapping/issues/85 what does getWebApplicationsMetadata() do?","msgtype":"m.text"},"ts":1389714876000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic_: if that's about asking the user something, I don't really get how it can be synchronous","msgtype":"m.text"},"ts":1389714903000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I think marcosc's intent was that it gets <title> and some <meta> tags, or some manifest stuff. The user-asking happens in userAgentSpecificChoooser","msgtype":"m.text"},"ts":1389714987000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"Domenic_: which also seems sync in your text","msgtype":"m.text"},"ts":1389715013000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic_: in particular https://github.com/domenic/promises-unwrapping/blob/master/docs/writing-specifications-with-promises.md#addbookmark-- seems very bad","msgtype":"m.text"},"ts":1389715035000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: userAgentSpecificChoooser is async","msgtype":"m.text"},"ts":1389715055000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"Domenic_: you cannot tell from that example text","msgtype":"m.text"},"ts":1389715071000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yeah, we are discussing on www-tag how I seem to have implicitly assumed (as a JS programmer) that any algorithmic step that involves asking the user would automatically be async","msgtype":"m.text"},"ts":1389715098000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"Domenic_: from that example spec text you'd implement a sync chooser and resolve and then return","msgtype":"m.text"},"ts":1389715102000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"you can see similar confusion in my https://github.com/domenic/promises-unwrapping/blob/master/docs/writing-specifications-with-promises.md#delay-ms-, which as boris points out would naively block for ms milliseconds","msgtype":"m.text"},"ts":1389715134000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"Domenic_: yes","msgtype":"m.text"},"ts":1389715160000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic_: that's why the return early, but continue running steps in the background makes a lot of sense","msgtype":"m.text"},"ts":1389715192000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic_: I haven't seen anyone been confused with those","msgtype":"m.text"},"ts":1389715200000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I maintain that it makes zero sense at all","msgtype":"m.text"},"ts":1389715205000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"to me it translates to return x; setImmediate(function () { /* do those extra steps */ })","msgtype":"m.text"},"ts":1389715220000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"(pretending that setImmediate is a thing)","msgtype":"m.text"},"ts":1389715225000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"no, it's much more like set up an internal event listener to wait for something and then return","msgtype":"m.text"},"ts":1389715255000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"the remainder of the steps explain what","msgtype":"m.text"},"ts":1389715264000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"you don't queue a task to wait for something, you wait for something to be queued","msgtype":"m.text"},"ts":1389715279000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"well, where does that internal event listener get set up","msgtype":"m.text"},"ts":1389715373000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"it certainly can't get set up after you return","msgtype":"m.text"},"ts":1389715378000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"catches up... denies everything while doing so ","msgtype":"m.emote"},"ts":1389715399000,"senderName":"marcosc","senderId":"marcosc@irc"},
{"content":{"body":"Domenic_: shrug","msgtype":"m.text"},"ts":1389715411000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Whether you say \"The remainder is run asynchronous. Return here.\" \"Return here, but continue doing this\" seems immaterial","msgtype":"m.text"},"ts":1389715446000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"So the Hixie model isn't beautiful in that it doesn't map directly to programming language constructs","msgtype":"m.text"},"ts":1389715464000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"I'm interested in cleaning it up further, but it's much more clear than what you have, which leads everyone to assume we suddenly have sync constructs","msgtype":"m.text"},"ts":1389715472000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"But it does do the right thing","msgtype":"m.text"},"ts":1389715481000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"yes, what i have right now is clearly wrong","msgtype":"m.text"},"ts":1389715613000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"and, after everyone explaining exactly how wrong, i'll agree it's more wrong than the current model","msgtype":"m.text"},"ts":1389715638000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"but i think it's important to clean up the current model","msgtype":"m.text"},"ts":1389715645000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"oh, seems I missed the update to that bug","msgtype":"m.text"},"ts":1389715751000,"senderName":"marcosc","senderId":"marcosc@irc"},
{"content":{"body":"I'll have to re-read the document","msgtype":"m.text"},"ts":1389715771000,"senderName":"marcosc","senderId":"marcosc@irc"},
{"content":{"body":"Domenic_: thanks anyway for notifying me of the update - sorry I missed it. Should I review the doc now?","msgtype":"m.text"},"ts":1389715794000,"senderName":"marcosc","senderId":"marcosc@irc"},
{"content":{"body":"marcosc: sure! everyone else is doing it now :). http://lists.w3.org/Archives/Public/www-tag/2014Jan/0038.html http://lists.w3.org/Archives/Public/www-tag/2014Jan/0052.html","msgtype":"m.text"},"ts":1389715851000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"Domenic_: ok, will try to do it later today","msgtype":"m.text"},"ts":1389715921000,"senderName":"marcosc","senderId":"marcosc@irc"},
{"content":{"body":"Btw, I found it quite helpful last time around. It was the missing manual :)","msgtype":"m.text"},"ts":1389715954000,"senderName":"marcosc","senderId":"marcosc@irc"},
{"content":{"body":"Domenic_: so I think typically you want to listen for activity and then queue a task to do several things in response","msgtype":"m.text"},"ts":1389716009000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic_: e.g. XHR listens to network activity and then queues a single task to dispatch several events and update some properties","msgtype":"m.text"},"ts":1389716031000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic_: it's very common to group updating a property and dispatching the event directly after","msgtype":"m.text"},"ts":1389716054000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic_: I suspect most things can be implemented given those two concepts","msgtype":"m.text"},"ts":1389716093000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic_: prolly some legacy exceptions in HTML though","msgtype":"m.text"},"ts":1389716105000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: hmm ok, will study.","msgtype":"m.text"},"ts":1389716158000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"annevk: I find the task queues confusing though; e.g. it seems like it should be possible to call back from C++ to JS without using a task queue","msgtype":"m.text"},"ts":1389716195000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"Domenic_: if it's sync, sure","msgtype":"m.text"},"ts":1389716212000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic_: if it's async, not really, you'd get race issues","msgtype":"m.text"},"ts":1389716231000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Right. Task queues are just the event loop for the spec","msgtype":"m.text"},"ts":1389716239000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"even if it's async... e.g. in Node when I program C++ extensions, I can just call back into JS.","msgtype":"m.text"},"ts":1389716239000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"Domenic_: how do you know JS is not running?","msgtype":"m.text"},"ts":1389716252000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"it can be either sync or async; promises normalize it to async","msgtype":"m.text"},"ts":1389716255000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"annevk: fair point","msgtype":"m.text"},"ts":1389716268000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"I don't know what Node's model looks like unfortunately, but I do know that for the web platform we need a task queue.","msgtype":"m.text"},"ts":1389716346000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nah, I think it has a task queue, I just didn't realize I was using it.","msgtype":"m.text"},"ts":1389716499000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"this helped click with me exactly what \"queue a task\" means...","msgtype":"m.text"},"ts":1389716514000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"I thought it was something like setImmediate(taskCode), albeit with a task queue name that the loop does complicated stuff with","msgtype":"m.text"},"ts":1389716537000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"but it's really more about proxying back to JS from C++ land, it sounds like...","msgtype":"m.text"},"ts":1389716567000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"The name isn't complicated","msgtype":"m.text"},"ts":1389716567000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"the event loop pulls a task off one of the task queues to run","msgtype":"m.text"},"ts":1389716607000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"The name tells you which task queue","msgtype":"m.text"},"ts":1389716617000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"it's a lot more complicated that fifo","msgtype":"m.text"},"ts":1389716618000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"a task goes on","msgtype":"m.text"},"ts":1389716624000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"So things are fifo per queue","msgtype":"m.text"},"ts":1389716643000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"But not fifo overall","msgtype":"m.text"},"ts":1389716651000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"But of course UAs don't pick a queue at random","msgtype":"m.text"},"ts":1389716675000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"A simpler example of the listen, queue thing is setTimeout()","msgtype":"m.text"},"ts":1389716698000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"They can have internal priority e.g. always process user events like click or whatever first","msgtype":"m.text"},"ts":1389716701000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"First you listen until some period of time has passed, then you queue a task to do some operation","msgtype":"m.text"},"ts":1389716717000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"You need to queue a task because mouse events, network events, parsing, etc. might all go on as well and they need to be ordered somehow","msgtype":"m.text"},"ts":1389716741000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yeah","msgtype":"m.text"},"ts":1389716985000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"I should blog all this learnings","msgtype":"m.text"},"ts":1389716990000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"Domenic_: as for the ES being complicated and more precise, that's kinda why we have IDL","msgtype":"m.text"},"ts":1389717411000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic_: now if the ES spec defined IDL and had some of its own stuff in terms of that, we might be able to make the whole thing more portable...","msgtype":"m.text"},"ts":1389717442000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: this is more about algorithmic steps though","msgtype":"m.text"},"ts":1389717615000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"annevk: I feel I often see web specs say things in one or two sentences that would take a page to express in ES-spec's precision","msgtype":"m.text"},"ts":1389717643000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"So one of the main complaints that we get about web specs is that we aim for precision rather than the touchy-feely specs of yore","msgtype":"m.text"},"ts":1389717722000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"It's funny really","msgtype":"m.text"},"ts":1389717920000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"But I do admit to taking shortcuts now and then","msgtype":"m.text"},"ts":1389717937000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"There's too much to define","msgtype":"m.text"},"ts":1389717941000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"But I'm not sure if it then immediately lacks precision. It only lacks precision if you can implement it in two different ways...","msgtype":"m.text"},"ts":1389717982000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Right... I'm not sure I'd know how to spot such instances. For the ES spec I can always see how you would, e.g. by inserting objects that trigger edge case behaviors, or testing esoteric properties of the objects you are given.","msgtype":"m.text"},"ts":1389718279000,"senderName":"Domenic_","senderId":"Domenic_@irc"},
{"content":{"body":"IDL cleans most of that up","msgtype":"m.text"},"ts":1389718322000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Indeed, IDL takes care of a lot of the sanitisation","msgtype":"m.text"},"ts":1389718391000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Domenic_: as for the algorithmic steps, you could have shorthands for all the common operations","msgtype":"m.text"},"ts":1389718410000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic_: that do the magic, but it'd require a huge amount of effort to figure out all the primitives across the many many APIs","msgtype":"m.text"},"ts":1389718475000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"You also run the risk of lasagne specs","msgtype":"m.text"},"ts":1389718540000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Which are neatly divided into layers, but impossible to understand overall by reading any one bit of text","msgtype":"m.text"},"ts":1389718571000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"But but but layering","msgtype":"m.text"},"ts":1389718584000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"good morning, Whatwg!","msgtype":"m.text"},"ts":1389721484000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"Good morning to you, dglazkov.","msgtype":"m.text"},"ts":1389721535000,"senderName":"jory","senderId":"jory@irc"},
{"content":{"body":"http://lists.w3.org/Archives/Public/www-dom/2014JanMar/0016.html","msgtype":"m.text"},"ts":1389729129000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"how very sad, scrollable regions don't get 'focus' events","msgtype":"m.text"},"ts":1389741069000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hm, they do if you tab, in firefox","msgtype":"m.text"},"ts":1389741195000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"hah, chrome gets <area> focusing wrong","msgtype":"m.text"},"ts":1389742111000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"if two <img>s use the same <area>, and you click on the second <img>'s use of the <area>, the first one gets the focus ring","msgtype":"m.text"},"ts":1389742137000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"firefox renders them right but sends a focus event again if you just tap from one to the other","msgtype":"m.text"},"ts":1389742165000,"senderName":"Hixie","senderId":"Hixie@irc"},
{"content":{"body":"even though nothing changed focus at the element level","msgtype":"m.text"},"ts":1389742171000,"senderName":"Hixie","senderId":"Hixie@irc"}
]