[
{"content":{"body":"twitter thread but... what do you think? https://twitter.com/jessidhia/status/1092975303171833856","msgtype":"m.text"},"ts":1549420711000,"senderName":"Jessidhia","senderId":"Jessidhia@irc"},
{"content":{"body":"adding HTMLElement#scrollBlock and HTMLElement#scrollInline to make writing-mode aware scroll properties instead of having to do various magic with #scrollLeft","msgtype":"m.text"},"ts":1549420769000,"senderName":"Jessidhia","senderId":"Jessidhia@irc"},
{"content":{"body":"annevk: https://github.com/web-platform-tests/wpt/pull/15264","msgtype":"m.text"},"ts":1549456093000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: I feel like the spec behaviour is saner, but then I don't forget this channel's topic nor that most browsers don't follow that bit of the spec.","msgtype":"m.text"},"ts":1549464582000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: again, the spec is broken due to <iframe>, no?","msgtype":"m.text"},"ts":1549464627000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Mmmh","msgtype":"m.text"},"ts":1549464650000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Hmm, maybe it's not broken, but it just doesn't match implementations","msgtype":"m.text"},"ts":1549464667000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"It's been a while","msgtype":"m.text"},"ts":1549464673000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yeah, that I agree with.","msgtype":"m.text"},"ts":1549464675000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: I guess the question is to what extent https://github.com/whatwg/dom/pull/576#issuecomment-368522669 true is","msgtype":"m.text"},"ts":1549464842000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I don't even compute what a \"safe point\" is.","msgtype":"m.text"},"ts":1549464915000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: script can execute without messing up assumed invariants","msgtype":"m.text"},"ts":1549464950000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Which invariants?","msgtype":"m.text"},"ts":1549464960000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"I'm curious where the current behaviour of Firefox comes from, why was it deemed important to be able to access iframes' browsing contexts from scripts that are inserted before them iframes.","msgtype":"m.text"},"ts":1549464985000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: e.g. the script removes some reference node","msgtype":"m.text"},"ts":1549464986000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: leading following insertions astray somehow","msgtype":"m.text"},"ts":1549465002000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: this is also a problem with the eventual speccing of mutation events (unless they get removed, any day now I'm sure)","msgtype":"m.text"},"ts":1549465031000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Before or after Attr stops being a Node? :p","msgtype":"m.text"},"ts":1549465048000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: so yeah, the current algorithm doesn't defend against child moving around","msgtype":"m.text"},"ts":1549465106000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: child's index could become much larger therefore than parent has children","msgtype":"m.text"},"ts":1549465128000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Not sure what you mean.","msgtype":"m.text"},"ts":1549465471000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: 7.2 of https://dom.spec.whatwg.org/#concept-node-insert is not robust against script execution","msgtype":"m.text"},"ts":1549465525000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: if a script moved child around, it's index could end up much larger, and you'd have an out-of-bounds error for the insert operation it invokes","msgtype":"m.text"},"ts":1549465545000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"mmh","msgtype":"m.text"},"ts":1549465562000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"(which is not defined since Infra assumes error-free invocation atm)","msgtype":"m.text"},"ts":1549465565000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I don't follow, child's index is always ok","msgtype":"m.text"},"ts":1549465576000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"I mean, the child maybe could have been moved to somewhere entirely different, in which case it's a problem, but child's index is always the correct index of child.","msgtype":"m.text"},"ts":1549465630000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: it's correct for the child, but not correct for the parent anymore","msgtype":"m.text"},"ts":1549465654000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ok, I see.","msgtype":"m.text"},"ts":1549465661000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: and it's the parent where we are inserting","msgtype":"m.text"},"ts":1549465662000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I guess I should make a test that plays with that.","msgtype":"m.text"},"ts":1549465673000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Domenic: https://github.com/whatwg/html/pull/4214 is ready once more \\o/","msgtype":"m.text"},"ts":1549470204000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Anyone know if there's already tests for named property getters with custom elements?","msgtype":"m.text"},"ts":1549471175000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: rniwa might, but I suspect not","msgtype":"m.text"},"ts":1549471539000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Nice, new data: URL spec being implemented in WebKit https://trac.webkit.org/changeset/240706/webkit/","msgtype":"m.text"},"ts":1549478268000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"https://trac.webkit.org/browser/webkit/trunk/Source/WebCore/platform/network/ParsedContentType.h?rev=240706#L39 is a little worrying though","msgtype":"m.text"},"ts":1549478356000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Hmm yeah, I guess we should ask","msgtype":"m.text"},"ts":1549480299000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: why is X unclear to you? If you navigate a browsing context you might get a different agent and loop, as the event loop link explains","msgtype":"m.text"},"ts":1549480477000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: it's not clear to me that clicking on one of the many terms referenced in that paragraph will lead to an explanation for X, right?","msgtype":"m.text"},"ts":1549480983000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"annevk: sorry for review delay today, having computer problems :(","msgtype":"m.text"},"ts":1549480995000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"annevk: I wonder what happens if you insert 3 scripts from a div and the first one changes the third one during its execution.","msgtype":"m.text"},"ts":1549482057000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: Wrote a quite interesting test for that, found difference between Safari and rest of the world again.","msgtype":"m.text"},"ts":1549482511000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Ah no, Firefox fails it but Chrome passes it.","msgtype":"m.text"},"ts":1549482538000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"https://github.com/web-platform-tests/wpt/commit/b1247749f1ac2e0fcc440e3cc0f8b1a10e9eeb42","msgtype":"m.text"},"ts":1549482612000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Domenic: you mean for a reader not knowing anything? Seems you first need to read about event loops anyway and then you get this","msgtype":"m.text"},"ts":1549482713000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I mean for reader trying to understand session history, yeah.","msgtype":"m.text"},"ts":1549482770000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: it seems you would naturally read up on event loops as this is similarly called","msgtype":"m.text"},"ts":1549482814000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Maybe, but I think the previous state made it easier to understand without having to assume people will do that","msgtype":"m.text"},"ts":1549482844000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: perhaps, but we also want to change most things session history so it’s not clear that investing in clarity helps here when it doesn’t much match what is going on","msgtype":"m.text"},"ts":1549482930000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I just much prefer a style of making incremental improvements, not regressions, and not saying that it's OK to make things worse because they're already bad.","msgtype":"m.text"},"ts":1549482956000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"nox: pass/fail remain confusing to me when we are not sure on the model","msgtype":"m.text"},"ts":1549482959000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Fair","msgtype":"m.text"},"ts":1549482977000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: I don't really care which pass or fail, just stating that it does to show that things are unclear.","msgtype":"m.text"},"ts":1549483001000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Domenic: it’s not clear to me this is worse, but okay","msgtype":"m.text"},"ts":1549483124000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"The last test I added definitely feels like Firefox is wrong on this one.","msgtype":"m.text"},"ts":1549483218000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: I wonder if we need to test mutation events too","msgtype":"m.text"},"ts":1549485145000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Step 8 you mean? It happens after the two loops of step 7 so I don't think so.","msgtype":"m.text"},"ts":1549486726000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Oh, mutation events from DOM mutations happening from a script inserted in tree through JS?","msgtype":"m.text"},"ts":1549486760000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Hey! Is there an HTML concept that maps to \"browser process\"?","msgtype":"m.text"},"ts":1549486766000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"yoav: only aspirational: agent cluster","msgtype":"m.text"},"ts":1549486809000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yoav: in practice they often share one","msgtype":"m.text"},"ts":1549486831000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yoav: more of an ES concept, too","msgtype":"m.text"},"ts":1549486846000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Cool, thanks. I'll read up on that!","msgtype":"m.text"},"ts":1549486888000,"senderName":"yoav","senderId":"yoav@irc"},
{"content":{"body":"that actually maps more to \"renderer process\" than \"browser process\", at least in chromium lingo","msgtype":"m.text"},"ts":1549487416000,"senderName":"Mek","senderId":"Mek@irc"},
{"content":{"body":"browser process would just be \"user agent\" or something like that I imagine","msgtype":"m.text"},"ts":1549487433000,"senderName":"Mek","senderId":"Mek@irc"},
{"content":{"body":"annevk: I also wonder what happens if you do script.append(\"\", \"foo();\")","msgtype":"m.text"},"ts":1549488607000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Whether foo() gets executed or not I mean.","msgtype":"m.text"},"ts":1549488619000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"https://html.spec.whatwg.org/multipage/history.html#session-history seems to say that when a Document is discarded, it gets removed from its session history entry, but https://html.spec.whatwg.org/multipage/window-object.html#discard-a-document doesn't actually say to touch the session history. Am I missing something?","msgtype":"m.text"},"ts":1549496966000,"senderName":"jyasskin","senderId":"jyasskin@irc"}
]