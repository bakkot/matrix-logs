[
{"content":{"body":"Per spec, can an async script execute in between the time when a pending parsing-blocking script is \"prepared\", and when it is executed?","msgtype":"m.text"},"ts":1588129758000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"I'm not sure if the behavior asserted by https://github.com/web-platform-tests/wpt/blob/master/html/semantics/scripting-1/the-script-element/script-text-modifications.html is mandated by spec","msgtype":"m.text"},"ts":1588129805000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"domfarolino: that looks wrong to me, but what do browsers do?","msgtype":"m.text"},"ts":1588131400000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Looks like that's a chrome-only test https://wpt.fyi/results/html/semantics/scripting-1/the-script-element/script-text-modifications.html?label=master&label=experimental&aligned&q=html%2Fsemantics%2Fscripting-1%2Fthe-script-element","msgtype":"m.text"},"ts":1588131470000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"domfarolino: I’m pretty sure that’s wrong per spec. File an issue?","msgtype":"m.text"},"ts":1588131617000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Will do","msgtype":"m.text"},"ts":1588131625000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"Ms2ger, at 2020-04-28 04:51 UTC, MikeSmith said: https://www.w3.org/TR/domcore/ now redirects; thanks for catching that","msgtype":"m.text"},"ts":1588158927000,"senderName":"botie","senderId":"botie@irc"},
{"content":{"body":"MikeSmith, thanks!","msgtype":"m.text"},"ts":1588158963000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"annevk: Actually I think the test is right","msgtype":"m.text"},"ts":1588187364000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"The parser \"prepares\" a script even while the script-blocking style sheet. Once preparing is complete, the parser runs these \"otherwise\": https://html.spec.whatwg.org/multipage/parsing.html#parsing-main-incdata:pending-parsing-blocking-script. Meanwhile, the async script runs, modifying the script's text, after the classic pending script has already been created with the old source text","msgtype":"m.text"},"ts":1588188269000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"domfarolino: isn’t async excluded from being a blocking script?","msgtype":"m.text"},"ts":1588189734000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: blocking what? The test I guess relies on the async script executing before the pending parsing-blocking script","msgtype":"m.text"},"ts":1588189819000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"domfarolino: that expectation makes lil sense to me","msgtype":"m.text"},"ts":1588190060000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Yeah I guess there's nothing mandating that really. I think we could change the test to set the pending parsing script's innerText not via an async script, but via setTimeout from the previous pending parsing-blocking script","msgtype":"m.text"},"ts":1588190151000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"That way it's testing what it needs to test, and not that + async script scheduling","msgtype":"m.text"},"ts":1588190168000,"senderName":"domfarolino","senderId":"domfarolino@irc"}
]