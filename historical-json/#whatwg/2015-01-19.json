[
{"content":{"body":"annevk, <annevk> Ms2ger: remind me Monday and I'll just do it, custom elements is making good progress :-)","msgtype":"m.text"},"ts":1421656876000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: come on, I'm barely awake","msgtype":"m.text"},"ts":1421656897000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ms2ger: but yeah, I'll make some tea and get on that","msgtype":"m.text"},"ts":1421656911000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"No hurry, but you asked to be reminded :)","msgtype":"m.text"},"ts":1421656928000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: yeah, thanks :-)","msgtype":"m.text"},"ts":1421656945000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"^_^","msgtype":"m.text"},"ts":1421657043000,"senderName":"hemanth","senderId":"hemanth@irc"},
{"content":{"body":"jgraham: could we make it so that \"sign in\" is \"clicked\" as some background process?","msgtype":"m.text"},"ts":1421657123000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: No","msgtype":"m.text"},"ts":1421660152000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"annevk: That doesn't work if you don't have a github account or haven't used critic before (you end up on a github login page for some unknown reason)","msgtype":"m.text"},"ts":1421660198000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: what if we XHR it?","msgtype":"m.text"},"ts":1421660219000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"It was the original design and I spent all my time explaining to people that ending up at a github page was expected behaviour","msgtype":"m.text"},"ts":1421660232000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"<iframe>?","msgtype":"m.text"},"ts":1421660263000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I guess the problem with that is that a) you won't actually end up logged in until you navigate and b) you don't want to keep sending failed login attempts on every page navigation for non-signed-in users","msgtype":"m.text"},"ts":1421660360000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Really the only problem here is that the cookie shouldn't be a session cookie","msgtype":"m.text"},"ts":1421660381000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: what's a session cookie?","msgtype":"m.text"},"ts":1421660574000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jgraham: very low Max-Age?","msgtype":"m.text"},"ts":1421660583000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Oooh, having neither Expires nor Max-Age","msgtype":"m.text"},"ts":1421660636000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"learned about the persistent-flag today","msgtype":"m.emote"},"ts":1421660650000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"any work around to avoid a feedback on local audio streaming with webrtc?","msgtype":"m.text"},"ts":1421662296000,"senderName":"hemanth","senderId":"hemanth@irc"},
{"content":{"body":"for example http://jsfiddle.net/gazq9nwy/ gives a horrible feedback, strangely works well on headphones...did try mediaStream.getAudioStreams()[0].enabled = false; wasn't useful, also tried setting the volume level to 0.7, no use...","msgtype":"m.text"},"ts":1421662412000,"senderName":"hemanth","senderId":"hemanth@irc"},
{"content":{"body":"hemanth: might just be your OS being crappy","msgtype":"m.text"},"ts":1421662699000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk, might be i'm on OSX heh heh","msgtype":"m.text"},"ts":1421662766000,"senderName":"hemanth","senderId":"hemanth@irc"},
{"content":{"body":"https://code.google.com/p/webrtc/source/detail?r=5159 should have fixed it...but not really","msgtype":"m.text"},"ts":1421662810000,"senderName":"hemanth","senderId":"hemanth@irc"},
{"content":{"body":"Darwin Kernel Version 14.0.0 to be specific","msgtype":"m.text"},"ts":1421662875000,"senderName":"hemanth","senderId":"hemanth@irc"},
{"content":{"body":"annevk, there is no feedback on your machine?","msgtype":"m.text"},"ts":1421663382000,"senderName":"hemanth","senderId":"hemanth@irc"},
{"content":{"body":"hsivonen: bit unclear whether to add ms932 given the lack of web pressure","msgtype":"m.text"},"ts":1421666666000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: What's the best error for \"You're not allowed to open a window right now\", security or invalidState?","msgtype":"m.text"},"ts":1421669066000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"Why are you not allowed?","msgtype":"m.text"},"ts":1421669107000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"JakeA: TypeError all the things :-)","msgtype":"m.text"},"ts":1421669365000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ms2ger: https://html.spec.whatwg.org/multipage/browsers.html#allowed-to-show-a-popup","msgtype":"m.text"},"ts":1421669628000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"annevk: What's the rationale there? I mean, with the fetch spec it mean you don't have a DOM dependency","msgtype":"m.text"},"ts":1421669667000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"RangeError :)","msgtype":"m.text"},"ts":1421669671000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"but this is for a spec that already has a DOM dependency","msgtype":"m.text"},"ts":1421669681000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: unless there's a use case for branching I fail to see the point to make an effort","msgtype":"m.text"},"ts":1421669735000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: and DOMException doesn't really match what how JavaScript designed exceptions","msgtype":"m.text"},"ts":1421669758000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"s/what//","msgtype":"m.text"},"ts":1421669764000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: So why TypeError and not just Error?","msgtype":"m.text"},"ts":1421669772000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: that's what awb seems to default to","msgtype":"m.text"},"ts":1421669787000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: and sometimes RangeError","msgtype":"m.text"},"ts":1421669803000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Anyway, I guess I'd InvalidAccess","msgtype":"m.text"},"ts":1421669865000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"feels like if the answer is \"TypeError all the things\" the question was probably \"what sucks about exceptions in js?\"","msgtype":"m.emote"},"ts":1421669915000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"there are lots of valid answers to that question though","msgtype":"m.text"},"ts":1421670411000,"senderName":"caitp","senderId":"caitp@irc"},
{"content":{"body":"Ugh, the people suggesting self-signed certificates are fine are many","msgtype":"m.text"},"ts":1421670682000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yeah, it isn't clear what the right call on the ms932 thing is. you are the editor. :-) However, if the Encoding Standard doesn't add it, it looks pretty clear that Thunderbird will.","msgtype":"m.text"},"ts":1421673139000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"annevk: to the extent email deliberately wants to have extra labels, I think not having them everywhere consistently is sad","msgtype":"m.text"},"ts":1421673195000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"email having extra encodings like UTF-7 is another story","msgtype":"m.text"},"ts":1421673208000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: it's weird that per https://wiki.whatwg.org/wiki/Web_Encodings#Firefox Firefox never supported that label","msgtype":"m.text"},"ts":1421673834000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hsivonen: I guess I'll wait a bit and if there's no negative feedback I'll add it","msgtype":"m.text"},"ts":1421673858000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Also, www-tag...","msgtype":"m.text"},"ts":1421673877000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"More people arguing for OE","msgtype":"m.text"},"ts":1421673899000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ugh","msgtype":"m.text"},"ts":1421673901000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hsivonen: time for an Email Encodings spec? :)","msgtype":"m.text"},"ts":1421674357000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"annevk: the comments on the Thunderbird bug suggest that we started doing less autodetection and previously it was caught by the detector","msgtype":"m.text"},"ts":1421674812000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"annevk: or something","msgtype":"m.text"},"ts":1421674819000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"annevk: more labels is better than more autodetection","msgtype":"m.text"},"ts":1421674864000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: perhaps Thunderbird always used the \"Universal\" detector?","msgtype":"m.text"},"ts":1421674865000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: IIRC that was only when you attached files--not for incoming email","msgtype":"m.text"},"ts":1421674886000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"annevk: but yeah, there was that lurking in the code!","msgtype":"m.text"},"ts":1421674900000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: however, adding a label has a problem we've seen before: Content-Type:text/html; charset=shift-jis; \\n\\n <meta charset=utf-8>","msgtype":"m.text"},"ts":1421674927000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yeah. I don't know what the right call is","msgtype":"m.text"},"ts":1421674951000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"I'll add a comment to the bug, perhaps someone can supply data","msgtype":"m.text"},"ts":1421674969000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"also, I'm not happy about how much time pondering about edge cases like this takes","msgtype":"m.text"},"ts":1421674969000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: yeah, see e.g. blink-dev thread on navigator.vendor","msgtype":"m.text"},"ts":1421675111000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hsivonen: there's some kind of inverse graph for the core primitives of the platform","msgtype":"m.text"},"ts":1421675144000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hsivonen: which is probably why infrastructure does not get fixed, but papered over","msgtype":"m.text"},"ts":1421675181000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hello all, I write a tool that generates websites, for our japanese users I’ve been trying to figure out how to handle hiragana and katakana characters in the URL path part (i.e. the filename produced by my app), I understand browsers request percent escaped UTF8, and I’m pretty sure there’s a unicode normalization step (which makes sense), but don’t know what it is","msgtype":"m.text"},"ts":1421675815000,"senderName":"duncanw","senderId":"duncanw@irc"},
{"content":{"body":"Doesn't url.spec.whatwg.org tell you?","msgtype":"m.text"},"ts":1421675852000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"duncanw: what part of the URL are we talking about?","msgtype":"m.text"},"ts":1421675854000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ms2ger: wouldn’t look like it","msgtype":"m.text"},"ts":1421675869000,"senderName":"duncanw","senderId":"duncanw@irc"},
{"content":{"body":"annevk: the path part","msgtype":"m.text"},"ts":1421675878000,"senderName":"duncanw","senderId":"duncanw@irc"},
{"content":{"body":"duncanw: there's no Unicode normalization going on there","msgtype":"m.text"},"ts":1421675886000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"e.g. http://something.jp/ < japanese glyphs >","msgtype":"m.text"},"ts":1421675900000,"senderName":"duncanw","senderId":"duncanw@irc"},
{"content":{"body":"duncanw: end of https://url.spec.whatwg.org/#path-state explains what happens to the input","msgtype":"m.text"},"ts":1421676034000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: um, I don’t see that fragment, https://url.spec.whatwg.org/#relative-path-state perhaps?","msgtype":"m.text"},"ts":1421676113000,"senderName":"duncanw","senderId":"duncanw@irc"},
{"content":{"body":"duncanw: yeah, sorry","msgtype":"m.text"},"ts":1421676126000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"kk","msgtype":"m.text"},"ts":1421676130000,"senderName":"duncanw","senderId":"duncanw@irc"},
{"content":{"body":"annevk: this explains why unicode normalization is necessary, and I can only assume browsers do it before encoding the path: https://tools.ietf.org/html/rfc5198#section-3","msgtype":"m.text"},"ts":1421676299000,"senderName":"duncanw","senderId":"duncanw@irc"},
{"content":{"body":"duncanw: why can you only assume?","msgtype":"m.text"},"ts":1421676326000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: but I haven’t found anything official looking or even unofficial… perhaps I should dig in the webkit source","msgtype":"m.text"},"ts":1421676332000,"senderName":"duncanw","senderId":"duncanw@irc"},
{"content":{"body":"duncanw: you could just test it and see it's false?","msgtype":"m.text"},"ts":1421676336000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"duncanw: that RFC is immaterial when it comes to URLs or HTTP","msgtype":"m.text"},"ts":1421676363000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: the RFC is irrelevant but it shows cases where something the user enters can have different code points for an identical glyph","msgtype":"m.text"},"ts":1421676412000,"senderName":"duncanw","senderId":"duncanw@irc"},
{"content":{"body":"duncanw: yes, that can happen","msgtype":"m.text"},"ts":1421676434000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: and even unicode terminology considers them canonically equivalent","msgtype":"m.text"},"ts":1421676440000,"senderName":"duncanw","senderId":"duncanw@irc"},
{"content":{"body":"duncanw: sure","msgtype":"m.text"},"ts":1421676446000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"duncanw: you would have to implement Unicode normalization yourself though","msgtype":"m.text"},"ts":1421676472000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: my app runs on Macs, and Cocoa has pretty good normalization… that’s not my problem, my problem is figuring out which normalization form to use. I was hoping to find something documenting exactly which one it is, if there is one. I assume it is either NFC or NFKC http://unicode.org/reports/tr15/#Norm_Forms","msgtype":"m.text"},"ts":1421676577000,"senderName":"duncanw","senderId":"duncanw@irc"},
{"content":{"body":"duncanw: which one what is?","msgtype":"m.text"},"ts":1421676598000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: the unicode normalized form used by browsers","msgtype":"m.text"},"ts":1421676626000,"senderName":"duncanw","senderId":"duncanw@irc"},
{"content":{"body":"(if you want to avoid being thrown off bridges, use NFC)","msgtype":"m.text"},"ts":1421676631000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"duncanw: I just told you browsers don't do that","msgtype":"m.text"},"ts":1421676640000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: well I have had an instance with german where a user entered filename had an u+umlaut, it was properly encoded as UTF8 by the browser but the file couldn’t be loaded from the server… if the browsers don’t do it then perhaps the server filesystem does","msgtype":"m.text"},"ts":1421676751000,"senderName":"duncanw","senderId":"duncanw@irc"},
{"content":{"body":"annevk: I had “fixed” it by removing non-ascii characters, which clearly doesn’t work for CJK text","msgtype":"m.text"},"ts":1421676776000,"senderName":"duncanw","senderId":"duncanw@irc"},
{"content":{"body":"duncanw: so, you want to run Unicode normalization on the filename you get on the server side","msgtype":"m.text"},"ts":1421676815000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"duncanw: and you need to be careful since the filename might not be Unicode (if someone is tricking you or using some weird Linux variant)","msgtype":"m.text"},"ts":1421676843000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: right, I don’t control the server so I guess I can only do normalization on the filename before sending it to the server...","msgtype":"m.text"},"ts":1421676907000,"senderName":"duncanw","senderId":"duncanw@irc"},
{"content":{"body":"duncanw: sure, I recommend implementing NFC or using the normalize method from ES6 (might not be implemented yet though)","msgtype":"m.text"},"ts":1421676985000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: ok, thanks a lot for your help","msgtype":"m.text"},"ts":1421677065000,"senderName":"duncanw","senderId":"duncanw@irc"},
{"content":{"body":"browsers may do normalization on URLs entered by the user, but may just vary based on how the OS hands them the string from the input (which may or may not be normalised)","msgtype":"m.text"},"ts":1421677369000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: thanks! You’ve seen this or know of browsers that do it?","msgtype":"m.text"},"ts":1421678977000,"senderName":"duncanw","senderId":"duncanw@irc"},
{"content":{"body":"duncanw: I know OSes do interesting stuff to text input. :)","msgtype":"m.text"},"ts":1421679009000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: right well I guess I’m just wondering if you have a specific example that I might try to track down","msgtype":"m.text"},"ts":1421679042000,"senderName":"duncanw","senderId":"duncanw@irc"},
{"content":{"body":"duncanw: IIRC OS X does interesting stuff with composing characters as you type them, with interesting intermediatry values","msgtype":"m.text"},"ts":1421679080000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: right, I write diacritics on a US keyboard layout by doing the composition (like opt-e plus e to get é), and I see something similar happening when entering japanese text","msgtype":"m.text"},"ts":1421679182000,"senderName":"duncanw","senderId":"duncanw@irc"},
{"content":{"body":"annevk: the spec says shift-jis is a known label. is that intentional?","msgtype":"m.text"},"ts":1421681989000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"zcorpan: I confused with euc_jp","msgtype":"m.text"},"ts":1421683805000,"senderName":"annevk","senderId":"annevk@irc"}
]