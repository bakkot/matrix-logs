[
{"content":{"body":"botie, inform a-ja I added scope/updateviacache/workertype support to the checker sources and pushed to https://checker.html5.org/ & https://validator.w3.org/nu/ I also added some filtering for now to suppress the warning about child-src","msgtype":"m.text"},"ts":1499659926000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"will do","msgtype":"m.text"},"ts":1499659927000,"senderName":"botie","senderId":"botie@irc"},
{"content":{"body":"domfarolino: sounds like you didn't leave your sense of logic at the door","msgtype":"m.text"},"ts":1499670430000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: if/when you have time please read https://stackoverflow.com/questions/45004354/when-should-i-really-set-access-control-allow-credentials-to-true-in-my-resp/45005539#45005539 and either comment to correct anything I might have gotten wrong there, or else post another answer (and I can delete mine)","msgtype":"m.text"},"ts":1499671187000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"steps away for a while pick up the master of the house from daycare","msgtype":"m.emote"},"ts":1499671222000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: added a minor comment","msgtype":"m.text"},"ts":1499672112000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: master of the house, hah, that escalated quickly","msgtype":"m.text"},"ts":1499672142000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: :) “There can be only one” ... I’m Ramirez and he’s the younger guy","msgtype":"m.text"},"ts":1499677101000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"(and thanks for the comment and reviewing the answer)","msgtype":"m.text"},"ts":1499677119000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: True lol. Gonna chime in on (https://github.com/whatwg/html/issues/1679) in the morning. I would like to help clean up the section if necessary, a little confused about a couple things regarding the algorithm","msgtype":"m.text"},"ts":1499679237000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"JakeA: how does canceling and no-cors interact?","msgtype":"m.text"},"ts":1499683206000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: can you create a partial response body that way?","msgtype":"m.text"},"ts":1499683225000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: I think there's an issue on that somewhere","msgtype":"m.text"},"ts":1499683241000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: hmm yeah, I guess it's something to point the security folks at. I mean, you'd have a stream that definitely errored, and probably related violations in terms of content-length","msgtype":"m.text"},"ts":1499683316000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"I'd expect a script element to not-execute if the content stream errored","msgtype":"m.text"},"ts":1499683334000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: yeah, it's related to the old content-length issue","msgtype":"m.text"},"ts":1499683340000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"but I guess that's worth investigating","msgtype":"m.text"},"ts":1499683345000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"annevk: the tests I wrote expect no-cors cancelling to \"work\", but it is new","msgtype":"m.text"},"ts":1499683362000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: https://github.com/tc39/proposal-cancelable-promises/issues/4","msgtype":"m.text"},"ts":1499683390000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: yeah, your tests reminded me","msgtype":"m.text"},"ts":1499683406000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: what's the best way to track the no-cors issue? Should I just open it as a new issue against Fetch that we link from all the various places?","msgtype":"m.text"},"ts":1499683811000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Yeah, and I'll email our security folks and get them involved","msgtype":"m.text"},"ts":1499683916000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: I noticed btw that we have a similar \"how to design canceling\" problem with HTML's navigate algorithm","msgtype":"m.text"},"ts":1499684004000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: it's rather vague and hand-wavy","msgtype":"m.text"},"ts":1499684022000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: XHR has some state stuff, but also not great","msgtype":"m.text"},"ts":1499684040000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I've been using XHR to validate my tests to some extent, and there's a few weird race conditions which I guess is the result of hand-waving in the spec","msgtype":"m.text"},"ts":1499684084000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"annevk: actually, this email I'm writing would make a good intro to the issue, so if you haven't started already, I can create the issue","msgtype":"m.text"},"ts":1499684347000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: I PM'd you my notes","msgtype":"m.text"},"ts":1499684394000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: feel free to finish","msgtype":"m.text"},"ts":1499684403000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: so I think what you said about <script> and erred streams makes sense","msgtype":"m.text"},"ts":1499684554000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: the problem would be with streaming stuff","msgtype":"m.text"},"ts":1499684563000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: e.g., CSS that gets applied incrementally (is that a thing?)","msgtype":"m.text"},"ts":1499684575000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"it isn't a thing","msgtype":"m.text"},"ts":1499684583000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"but HTML parsing","msgtype":"m.text"},"ts":1499684596000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: we have incremental HTML rendering, but that's already required to be non-opaque","msgtype":"m.text"},"ts":1499684605000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: there's img, video, audio","msgtype":"m.text"},"ts":1499684627000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: well, do we want to prevent incremental CSS?","msgtype":"m.text"},"ts":1499684637000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: those are good examples too","msgtype":"m.text"},"ts":1499684650000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I think streaming CSS would result in a lot of shifting around during page load","msgtype":"m.text"},"ts":1499684674000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: I'm guessing if we don't want to make things worse we'd just not error streams","msgtype":"m.text"},"ts":1499684685000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Eg .hide-this {…} at the end of the CSS resource","msgtype":"m.text"},"ts":1499684688000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: we could still error the request though, but once you have the whole response header, no more canceling","msgtype":"m.text"},"ts":1499684711000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: even if layout isn't done yet, should the CSSOM be allocated all at once?","msgtype":"m.text"},"ts":1499684746000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: that's an interesting question. I thought it'd be all at once.","msgtype":"m.text"},"ts":1499684790000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"But I guess I have no reason to think that","msgtype":"m.text"},"ts":1499684802000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"I thought the CSSOM would represent actionable CSS","msgtype":"m.text"},"ts":1499684820000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"The spec doesn't really say it either way I think","msgtype":"m.text"},"ts":1499684826000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA:  fetch/api/abort/general.js contains the majority of tests, right?","msgtype":"m.text"},"ts":1499689114000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yeah","msgtype":"m.text"},"ts":1499689125000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"annevk: re html issue 2792 - I don't get your comment?","msgtype":"m.text"},"ts":1499689243000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"jochen__: can cookies be shared across ports, can WebAuthn be shared across ports?","msgtype":"m.text"},"ts":1499689285000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"document.domain is a script only feature, no?","msgtype":"m.text"},"ts":1499689302000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"jochen__: it builds upon a shared primitive","msgtype":"m.text"},"ts":1499689311000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"i'm not sure I agree","msgtype":"m.text"},"ts":1499689342000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"You don't agree with the specs?","msgtype":"m.text"},"ts":1499689377000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"now that there's something shared in how document.domain and cookies work","msgtype":"m.text"},"ts":1499689392000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"s/now/no,/","msgtype":"m.text"},"ts":1499689399000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"JakeA: \"() => log.push(`${bodyMethod}-resolve`)\" any reason that's not assert_unreached?","msgtype":"m.text"},"ts":1499689407000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jochen__: cookies share in a very similar way, they just don't have the opt-in switch","msgtype":"m.text"},"ts":1499689451000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: assert_unreached seems like a more standard way. Will push a change now","msgtype":"m.text"},"ts":1499689545000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"annevk: webauthn tries to match cookies, and explicitly states that that's different from what same-origin domain means :/","msgtype":"m.text"},"ts":1499689756000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"jochen__: WebAuthn integrates with HTML directly","msgtype":"m.text"},"ts":1499689816000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jochen__: that refactoring landed earlier this year","msgtype":"m.text"},"ts":1499689831000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jochen__: and unless you can tell me how cookies are different, I think you might be missing something","msgtype":"m.text"},"ts":1499689848000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"jochen__: see https://bugzilla.mozilla.org/show_bug.cgi?id=1329764 for such refactoring making its way into Fx","msgtype":"m.text"},"ts":1499689938000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: in webauthn, a token's scope is the relying parties origin, or any registratable domain suffix","msgtype":"m.text"},"ts":1499690089000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"annevk: for document.domain, you have to decide for one domain, suffixes won't match","msgtype":"m.text"},"ts":1499690106000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"jochen__: what do you mean with having to decide for one domain, suffixes won't match?","msgtype":"m.text"},"ts":1499690190000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"if I want to access another iframe","msgtype":"m.text"},"ts":1499690204000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"my document.domain has to be the same as the other iframe's document.domain","msgtype":"m.text"},"ts":1499690218000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"if I want to access a token","msgtype":"m.text"},"ts":1499690225000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"my document.domain has to be the same or any suffix of the token's domain","msgtype":"m.text"},"ts":1499690240000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"it's about what document.domain can be set to","msgtype":"m.text"},"ts":1499690241000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"what's the reach it gives you","msgtype":"m.text"},"ts":1499690259000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"that's the shared primitive","msgtype":"m.text"},"ts":1499690272000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I see","msgtype":"m.text"},"ts":1499690328000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"then I think the reach is too broad if it ignores the port","msgtype":"m.text"},"ts":1499690341000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"that's fair and I'm wondering if we also want to make that decision for Webauthn and cookies then","msgtype":"m.text"},"ts":1499690378000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"as there ports are also not considered","msgtype":"m.text"},"ts":1499690385000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"cookies have a ton of options","msgtype":"m.text"},"ts":1499690400000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"or if we want to fork the shared primitive somehow","msgtype":"m.text"},"ts":1499690402000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I could imagine to add a kind of cookies that is only usable via default ports","msgtype":"m.text"},"ts":1499690418000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"to make cookies and Webauthn similar you'd just restrict them to the same port","msgtype":"m.text"},"ts":1499690452000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"well, basically, if you're on a non-default port, I don't care, as long as you don't match default ports","msgtype":"m.text"},"ts":1499690474000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"Cookies additionally ignore scheme, I guess for document.domain that's no longer an issue because of mixed content blocking","msgtype":"m.text"},"ts":1499690519000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"And I guess/hope Webauthn requires HTTPS too?","msgtype":"m.text"},"ts":1499690528000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Anyway, all I meant to say with my comment is that I want them considered together, since they all have the same kind of leak","msgtype":"m.text"},"ts":1499690570000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"If we only patch one, that should be a conscious decision","msgtype":"m.text"},"ts":1499690589000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yes, it's https only","msgtype":"m.text"},"ts":1499690769000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"ok, makes sense. Thx for clarifying :)","msgtype":"m.text"},"ts":1499690777000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"JakeA: damnit, can't better .310s","msgtype":"m.text"},"ts":1499699712000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: I wonder if it differs from device to device. I can't better .200, but some people are claiming 0.01","msgtype":"m.text"},"ts":1499699770000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"They might be liars :D","msgtype":"m.text"},"ts":1499699774000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: Are you sure they aren't Valtteri's throwaways?","msgtype":"m.text"},"ts":1499699822000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"haha","msgtype":"m.text"},"ts":1499699832000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"I'm pretty consistently around 0.330s","msgtype":"m.text"},"ts":1499699883000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"But really clicking is easy, no coordination between hands and feet needed","msgtype":"m.text"},"ts":1499699954000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Anyhow, yes, work.","msgtype":"m.text"},"ts":1499700043000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"annevk: I realize I woke up too late to make this a realistic ping, but ping on writing tests for https://github.com/whatwg/html/issues/2753#issuecomment-311753445","msgtype":"m.text"},"ts":1499706488000,"senderName":"Domenic","senderId":"Domenic@irc"}
]