[
{"content":{"body":"fjdslfs","msgtype":"m.text"},"ts":1388293040000,"senderName":"malaclyps","senderId":"malaclyps@irc"},
{"content":{"body":"hsivonen: ping","msgtype":"m.text"},"ts":1388356331000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"or who might remember parsing well","msgtype":"m.text"},"ts":1388356345000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"<script>document.write('<div><iframe src=\"http://example.com\"><\\/iframe><\\/div>');</script>","msgtype":"m.text"},"ts":1388356422000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"should div be added to the document before iframe added to div?","msgtype":"m.text"},"ts":1388356443000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"Yes.","msgtype":"m.text"},"ts":1388357011000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"That's parsed no differently to <script></script><div><iframe src=\"http://example.com\"></iframe></div>","msgtype":"m.text"},"ts":1388357041000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"smaug____: ^^","msgtype":"m.text"},"ts":1388357045000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: but does the spec say the order","msgtype":"m.text"},"ts":1388357086000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: Yes, it does for both.","msgtype":"m.text"},"ts":1388357097000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"so, what does it say?","msgtype":"m.text"},"ts":1388357106000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"is div added to the document before iframe is added to div?","msgtype":"m.text"},"ts":1388357125000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: the script is added to the document, then the div, then the iframe","msgtype":"m.text"},"ts":1388357130000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"smaug____: My \"yes\" above was in answer to that question — it is added before the iframe is added to the div.","msgtype":"m.text"},"ts":1388357156000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"(document.write isn't actually that interesting unless parsing has already finished or a script element is written)","msgtype":"m.text"},"ts":1388357207000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: do you happen to remember where the spec says that?","msgtype":"m.text"},"ts":1388357346000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"(Gecko doesn't seem to do that, and I'm not sure IE11 does it either)","msgtype":"m.text"},"ts":1388357366000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"gsnedders: should fragmentClass be added to that list of required things? https://github.com/html5lib/html5lib-python/blob/c36197d01779cbb48d66563cf149af202ba6b7fc/html5lib/treebuilders/__init__.py#L16-L19","msgtype":"m.text"},"ts":1388357797000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"SimonSapin: idk","msgtype":"m.text"},"ts":1388359011000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"ok, I’ll try and find out","msgtype":"m.text"},"ts":1388359033000,"senderName":"SimonSapin","senderId":"SimonSapin@irc"},
{"content":{"body":"SimonSapin: (Note that I would not be in the least bit surprised if the comment was wrong)","msgtype":"m.text"},"ts":1388359053000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"smaug____: It's implicit of the whole parser section, where document.write is processed (upon script execution) by inserting characters into the input stream, and then just a matter of when elements get added during parsing, which is always as they're created.","msgtype":"m.text"},"ts":1388359121000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"yeah, looks like so","msgtype":"m.text"},"ts":1388359798000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"I wonder if that is actually a bug","msgtype":"m.text"},"ts":1388359808000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"or something which should be changed","msgtype":"m.text"},"ts":1388359815000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: Observing this through mutation observers?","msgtype":"m.text"},"ts":1388360873000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"yup","msgtype":"m.text"},"ts":1388360946000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"I could also just let hsivonen to fix his parser :)","msgtype":"m.text"},"ts":1388360977000,"senderName":"smaug____","senderId":"smaug____@irc"}
]