[
{"content":{"body":"annevk: I edited https://wiki.developer.mozilla.org/en-US/docs/Web/API/ProcessingInstruction to add a link to the DOM spec","msgtype":"m.text"},"ts":1575941225000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"...and to re-work the content to have it actually make sense","msgtype":"m.text"},"ts":1575941253000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"https://wiki.developer.mozilla.org/en-US/docs/Web/API/ProcessingInstruction$compare?to=1594758&from=1522738","msgtype":"m.text"},"ts":1575941260000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"the anno for it will be added/picked-up the next time I run the scripts that (re)generate the https://raw.githubusercontent.com/w3c/mdn-spec-links/master/dom.json file","msgtype":"m.text"},"ts":1575941333000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: I really like the <hr>s in the generated annotations","msgtype":"m.text"},"ts":1575953874000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: yeah I think there have always been too many browsers in those annotations (the Can I Use and MDN ones in the HTML spec, the Bikeshed-generated ones) to not have them logically separated somehow","msgtype":"m.text"},"ts":1575954333000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"why/how would an element in the DOM end up with no parentNode?","msgtype":"m.text"},"ts":1575959497000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"rather, I mean an event target","msgtype":"m.text"},"ts":1575959570000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"how would event target end up with no parentNode?","msgtype":"m.text"},"ts":1575959597000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"if you look at https://serviceworkerspec.herokuapp.com/docs/ and inspect the \"Collapse Sidebar\" arrow/button","msgtype":"m.text"},"ts":1575959641000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"... and if you set a click event listener, and check the event target for when that \"Collapse Sidebar\" arrow/button is clicked","msgtype":"m.text"},"ts":1575959688000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"... you will find that it’s either the span whose text content is \"Collapse Sidebar\" or else the span[aria-hidden] element with the arrow","msgtype":"m.text"},"ts":1575959908000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"... and if you inspect those, you find they have no parentNode","msgtype":"m.text"},"ts":1575959933000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"... despite them being children of the a[#toc-toggle] element","msgtype":"m.text"},"ts":1575959962000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"ah, I think I see now: those nodes are getting removed from the DOM by another listener","msgtype":"m.text"},"ts":1575960411000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: that sounds very strange. Is there a library involved? Ah","msgtype":"m.text"},"ts":1575960424000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: https://www.w3.org/scripts/TR/2016/fixup.js is what does that ToC collapsing","msgtype":"m.text"},"ts":1575960459000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I guess I have to look at .composedPath() in this case","msgtype":"m.text"},"ts":1575960490000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"... because I don’t see where it would otherwise be exposed at that point","msgtype":"m.text"},"ts":1575960510000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"jgraham: is there a way to tell WPT testharness.js that the test will renavigate before onload fires and, therefore, unload is not an error?","msgtype":"m.text"},"ts":1575964065000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"jgraham: use case: encoding tests where the encoding is discovered after 1024 bytes","msgtype":"m.text"},"ts":1575964092000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: can you run it in a popup?","msgtype":"m.text"},"ts":1575966656000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Maybe. I'll fix other things first. (Obviously, non-UTF-8 tests are hard to edit, so I'll need to figure out a way to edit them without corrupting the tests.)","msgtype":"m.text"},"ts":1575966864000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: I quite like Hex Fiend, though it's mainly useful if you have the bulk of the test already written","msgtype":"m.text"},"ts":1575967066000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"these are already written","msgtype":"m.text"},"ts":1575967126000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"I'm getting spammed with \"Run failed for master (ccf3169)\" on my fork of web-platform-tests. How do I make it stop?","msgtype":"m.text"},"ts":1575967602000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"in other news, various test cases that have undeclared UTF-8 seem to want windows-1252 specifically, so one needs to detect the UTF-8 and then respond windows-1252 instead of just allowing whatever the outcome would be from excluding UTF-8 from detection","msgtype":"m.text"},"ts":1575967664000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"(both intentional and addidental tests)","msgtype":"m.text"},"ts":1575967737000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"argh. accidental","msgtype":"m.text"},"ts":1575967746000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"accidental tests include things like not declaring the encoding but copying and pasting smart quotes from the spec into a comment in the test","msgtype":"m.text"},"ts":1575967780000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"in a UTF-8 editor","msgtype":"m.text"},"ts":1575967788000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"JakeA: W3C IRC, #testing might be a better place","msgtype":"m.text"},"ts":1575968008000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"JakeA: if you haven't rebased in a while, that's usually a good bet btw","msgtype":"m.text"},"ts":1575968017000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ta. Nah, it started when I rebased :D","msgtype":"m.text"},"ts":1575968036000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"good times","msgtype":"m.text"},"ts":1575968049000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hsivonen: that doesn't sound like fun to have to debug at all","msgtype":"m.text"},"ts":1575968086000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"mkwst: why did https://bugs.chromium.org/p/chromium/issues/detail?id=691930 stall?","msgtype":"m.text"},"ts":1575968667000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"mkwst: the localhost thing","msgtype":"m.text"},"ts":1575968673000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Hrm. It's implemented. Let me find the patch and close that bug.","msgtype":"m.text"},"ts":1575968700000,"senderName":"mkwst","senderId":"mkwst@irc"},
{"content":{"body":"mkwst: even if \"Let 'localhost' be localhost.\" is not standardized, applications are still permitted to always use the loopback address, right?","msgtype":"m.text"},"ts":1575968712000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"mkwst: ah okay, for all .localhost. addresses? I guess that means Firefox could follow","msgtype":"m.text"},"ts":1575968737000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I don't recall that detail. Let me find the patches so I don't lie to you. :)","msgtype":"m.text"},"ts":1575968780000,"senderName":"mkwst","senderId":"mkwst@irc"},
{"content":{"body":"ta!","msgtype":"m.text"},"ts":1575968810000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: https://chromium-review.googlesource.com/c/chromium/src/+/598068/","msgtype":"m.text"},"ts":1575968900000,"senderName":"mkwst","senderId":"mkwst@irc"},
{"content":{"body":"Tests say that we do indeed resolve `*.localhost` to loopback (both ipv4 and ipv6).","msgtype":"m.text"},"ts":1575968922000,"senderName":"mkwst","senderId":"mkwst@irc"},
{"content":{"body":"mkwst: great, thanks!","msgtype":"m.text"},"ts":1575968965000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I gave up on getting it through DNSOP. :(","msgtype":"m.text"},"ts":1575969095000,"senderName":"mkwst","senderId":"mkwst@irc"},
{"content":{"body":"mkwst: we could put it in Fetch still, adding a comment to standards-positions atm","msgtype":"m.text"},"ts":1575969161000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"In \"obtain a connection\"? That's pretty hand-wavey as-is, and I don't think anyone has the energy to make it less so.","msgtype":"m.text"},"ts":1575969207000,"senderName":"mkwst","senderId":"mkwst@irc"},
{"content":{"body":"Fair","msgtype":"m.text"},"ts":1575969257000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Could add a note, I guess? I'm not sure how we'd add a normative requirement there, given that DNS isn't really described at all.","msgtype":"m.text"},"ts":1575969285000,"senderName":"mkwst","senderId":"mkwst@irc"},
{"content":{"body":"We could add more hand-wavy things about what obtaining a connection involves and make that part normative","msgtype":"m.text"},"ts":1575969373000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"But doesn't seem super important","msgtype":"m.text"},"ts":1575969385000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yup. And yup.","msgtype":"m.text"},"ts":1575969402000,"senderName":"mkwst","senderId":"mkwst@irc"},
{"content":{"body":"I'm not sure if we still support that eager DNS lookup feature, defining that would also want some kind of hook","msgtype":"m.text"},"ts":1575969412000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Happily(?), there is always more work to do.","msgtype":"m.text"},"ts":1575969434000,"senderName":"mkwst","senderId":"mkwst@irc"},
{"content":{"body":"annevk: fortunately, it didn't require debugging","msgtype":"m.text"},"ts":1575969811000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: No for tests that do weird navigation things you need to use a popup","msgtype":"m.text"},"ts":1575971200000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Unfortunately","msgtype":"m.text"},"ts":1575971212000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: can you suggest an example that I should look at?","msgtype":"m.text"},"ts":1575971340000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: Not off the top of my head, will look in a bit when I'm not on a rather crowded train","msgtype":"m.text"},"ts":1575971867000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: ok. thanks.","msgtype":"m.text"},"ts":1575971892000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"jgraham: is adding a setup() argument allow_unload out of the question?","msgtype":"m.text"},"ts":1575971919000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: I suspect it interferes too much with the way that the testdriver bits work","msgtype":"m.text"},"ts":1575971955000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: ok. :-(","msgtype":"m.text"},"ts":1575971965000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"So we'd need some way to communicate that a specific test wasn't using testdriver and then more codepaths and complexity","msgtype":"m.text"},"ts":1575971983000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"hsivonen: I’d make the popup message the results to the opener once done, that’s easiest","msgtype":"m.text"},"ts":1575974050000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hsivonen: if you grep for window.open you’ll find some examples; if that doesn’t help let me know and I’ll create an example","msgtype":"m.text"},"ts":1575974118000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hsivonen: Right so https://searchfox.org/mozilla-central/source/testing/web-platform/tests/html/browsers/browsing-the-web/unloading-documents/001.html is a somewhat old example that uses the properties of the opener directly","msgtype":"m.text"},"ts":1575974154000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"But as annevk says, using postMessage to return the results is probably better","msgtype":"m.text"},"ts":1575974175000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"https://searchfox.org/mozilla-central/source/testing/web-platform/tests/content-security-policy/unsafe-hashes/javascript_src_denied_missing_unsafe_hashes-window_location.html is a pretty simple example of that","msgtype":"m.text"},"ts":1575974286000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"(I guess there are bonus points if you do things like forward onerror to the parent)","msgtype":"m.text"},"ts":1575974320000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"PSA: If you ever run any scripts that make requests to https://tools.ietf.org/, make sure the requests are sent with a User-Agent header; otherwise your IP address will get blocked for 7 days.","msgtype":"m.text"},"ts":1575976172000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"... and apparently, urllib3 doesn’t send a User-Agent header in requests https://github.com/urllib3/urllib3/issues/1296","msgtype":"m.text"},"ts":1575976223000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"jgraham, annevk: thanks","msgtype":"m.text"},"ts":1575976705000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"Domenic: so afaict there's multiple numbers in use for the same email on lists.whatwg.org","msgtype":"m.text"},"ts":1575997735000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: e.g., http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2009-May/019595.html and http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2009-May/061868.html are identical, just accessed from a different index","msgtype":"m.text"},"ts":1575997759000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Oh... fun?","msgtype":"m.text"},"ts":1575997778000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"(it's https://lists.w3.org/Archives/Public/public-whatwg-archive/2009May/0030.html)","msgtype":"m.text"},"ts":1575997786000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I bet if we knew the logic behind it, we could still figure that out, since they still seem date-sequential. But I'm not sure how to.","msgtype":"m.text"},"ts":1575997831000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I do continue to get the same email if I increment both numbers","msgtype":"m.text"},"ts":1575997857000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"So the numbers are not related to the type of index","msgtype":"m.text"},"ts":1575997881000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Does someone here know of a more public / official-looking signal from Mozilla of their intent to cap cookies to 7 days?","msgtype":"m.text"},"ts":1576004729000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"I found https://groups.google.com/forum/m/#!topic/mozilla.dev.platform/lECBPeiGTy4 and https://bugzilla.mozilla.org/show_bug.cgi?id=1529836 but both seem a bit internal / non-representative.","msgtype":"m.text"},"ts":1576004747000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"Krinkle: for document.cookie? If Ehsan is involved that seems official","msgtype":"m.text"},"ts":1576007703000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Krinkle: Safari does a similar thing iirc","msgtype":"m.text"},"ts":1576007722000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah, apple talked about it very clearly on their blog","msgtype":"m.text"},"ts":1576007884000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"I'm looking for something less obscure than an engineering ticket or obscure mailing list :)","msgtype":"m.text"},"ts":1576007939000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"Krinkle: you prolly know how to get hold of Ehsan","msgtype":"m.text"},"ts":1576009075000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ha, hadn't thought of that. Thanks :)","msgtype":"m.text"},"ts":1576009107000,"senderName":"Krinkle","senderId":"Krinkle@irc"},
{"content":{"body":"Krinkle: he might be able to make things look more official if there’s a need","msgtype":"m.text"},"ts":1576009107000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1576009113000,"senderName":"Krinkle","senderId":"Krinkle@irc"}
]