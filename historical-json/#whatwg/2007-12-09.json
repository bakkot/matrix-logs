[
{"content":{"body":"anyone able to be conned into writing some JavaScript for the HTTP parsing test suite?","msgtype":"m.text"},"ts":1197204780000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"What is that likely to involve?","msgtype":"m.text"},"ts":1197204960000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: Loading files from one folder, then checking that the headers/body/status match up with a JSON file in another folder (where the two files are related by filename)","msgtype":"m.text"},"ts":1197209220000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"http://hg.gsnedders.com/cgi-bin/hgwebdir.cgi/http-parsing/file/c550df97477b/tests/response/ shows the basic structure of the files","msgtype":"m.text"},"ts":1197209221000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: How is it meant to determine the headers/body/status?","msgtype":"m.text"},"ts":1197214500000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"(Using XHR, I guess)","msgtype":"m.text"},"ts":1197214501000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"(since I can't think of any alternatives)","msgtype":"m.text"},"ts":1197214502000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"gsnedders: How is it meant to know which files to load?","msgtype":"m.text"},"ts":1197214560000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: Yeah, XHR. I guess the best would be to load /tests and use getElementsByTagName('a')","msgtype":"m.text"},"ts":1197219120000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Philip`: (then assume the filenames in /expected have the extension .expected instead of .http)","msgtype":"m.text"},"ts":1197219180000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: Ah, okay","msgtype":"m.text"},"ts":1197221100000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Why not write it yourself? :-)","msgtype":"m.text"},"ts":1197221101000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: Because I suck and I've already wasted ages failing :)","msgtype":"m.text"},"ts":1197221160000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"(or rather, my knowledge of JS in general is minimal)","msgtype":"m.text"},"ts":1197221161000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: Ah, fair enough :-)","msgtype":"m.text"},"ts":1197222060000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: I'd say I'd add you to the list of contributors in the spec if you helped, but there again, you're already there :)","msgtype":"m.text"},"ts":1197222300000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"the current wikitruth about HTML5 does not acknowledge APIs","msgtype":"m.text"},"ts":1197223080000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"gsnedders: It seems not entirely easy to test HTTP header parsing with XHR, because getAllResponseHeaders is largely undefined and inconsistently implemented","msgtype":"m.text"},"ts":1197224280000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: surely getResponseHeader() would be easier?","msgtype":"m.text"},"ts":1197224281000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"I keep refinding issues that I've already reported...","msgtype":"m.text"},"ts":1197224340000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"ins/del datetime syntax this time","msgtype":"m.text"},"ts":1197224341000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"gsnedders: Then the .expected format would have to be able to say that it expects a certain header to not exist","msgtype":"m.text"},"ts":1197224342000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: some headers are created by the UA though, like the cache ones, in my experience","msgtype":"m.text"},"ts":1197224400000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"(so you can test that things don't get misinterpreted as headers when they shouldn't)","msgtype":"m.text"},"ts":1197224401000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: but surely some other header value or the body will be wrong?","msgtype":"m.text"},"ts":1197224460000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: If you have \"HTTP/1.0 200 OK\\r\\nSome-Garbage\\r\\nContent-Type: text/html\\r\\n\\r\\nBody\" then I guess maybe the Some-Garbage would just get ignored, and wouldn't affect anything else, and the tests should check there isn't a parsed header named \"Some-Garbage\"","msgtype":"m.text"},"ts":1197224760000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: ah. true.","msgtype":"m.text"},"ts":1197224761000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"but maybe that's not too important","msgtype":"m.text"},"ts":1197224762000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"but getAllResponseHeaders is useless anyway so there's not much choice","msgtype":"m.text"},"ts":1197224820000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: does getResponseHeader() consistently return null when it doesn't exist?","msgtype":"m.text"},"ts":1197225120000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"(where it == the header)","msgtype":"m.text"},"ts":1197225121000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: No - looks like FF returns null, IE/Opera return \"\"","msgtype":"m.text"},"ts":1197225240000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"ergh.","msgtype":"m.text"},"ts":1197225241000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Could use that to check, but if that isn't consistent either.","msgtype":"m.text"},"ts":1197225242000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"tries to document the time element \"vague\" datetime format in one paragraph...","msgtype":"m.emote"},"ts":1197225300000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"wonders if XHR getResponseHeader uses the same HTTP parser as the rest of the browser engine does","msgtype":"m.emote"},"ts":1197225301000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"(given that IE's getAllResponseHeaders returns the originl raw HTTP header string, so it has at least some kind of lower-level hook)","msgtype":"m.text"},"ts":1197225360000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"+a","msgtype":"m.text"},"ts":1197225361000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"Philip`: in IE and Opera, yes. In Fx it does for some headers, and not for others, IIRC.","msgtype":"m.text"},"ts":1197225420000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Hmm, is it impossible to do multiline createTextNode? IE requires \"\\r\" and treats \"\\n\" like a space, but FF requires \"\\n\" and ignores a lone \"\\r\"","msgtype":"m.text"},"ts":1197225480000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"(...inside <pre>, in particular)","msgtype":"m.text"},"ts":1197225540000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"whoa. the vague time format sucks","msgtype":"m.text"},"ts":1197225541000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"(IIS and IE don't use the same HTTP parser, though, BTW)","msgtype":"m.text"},"ts":1197225600000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Philip`: when does your term end, BTW?","msgtype":"m.text"},"ts":1197225780000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: did you send feedback about the time formats as part of your microsyntax review? I don't see your messages in the WHATWG issue folder","msgtype":"m.text"},"ts":1197225781000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: no, I never got around to doing them","msgtype":"m.text"},"ts":1197225782000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"gsnedders: ok","msgtype":"m.text"},"ts":1197225783000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"gsnedders: Is something like http://canvex.lazyilluminati.com/misc/http-test-runner.patch vaguely useful?","msgtype":"m.text"},"ts":1197226080000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"gsnedders: I don't really do terms now, since I've stopped being an undergraduate, so I can go home whenever I want as long as nobody minds :-)","msgtype":"m.text"},"ts":1197226200000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"is forgetting too much","msgtype":"m.emote"},"ts":1197226260000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"Philip`: yeah","msgtype":"m.text"},"ts":1197226261000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"(That is, as long as nobody minds who is important enough that I mind them minding)","msgtype":"m.text"},"ts":1197226262000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"thanks Philip` loads :P","msgtype":"m.emote"},"ts":1197226500000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"hopes his code isn't too horribly broken","msgtype":"m.emote"},"ts":1197226620000,"senderName":"Philip`","senderId":"Philip`@irc"},
{"content":{"body":"hasn't tried running it yet","msgtype":"m.emote"},"ts":1197227820000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"hopes Philip` did","msgtype":"m.emote"},"ts":1197227821000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"wonders if the Connection header should be case sensitive","msgtype":"m.emote"},"ts":1197228120000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"occasionally one has to wonder how this Web thing works at all","msgtype":"m.text"},"ts":1197228121000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"It's like an ogre","msgtype":"m.text"},"ts":1197228900000,"senderName":"mpt","senderId":"mpt@irc"},
{"content":{"body":"Onions are like ogres. They both have layers.","msgtype":"m.text"},"ts":1197234780000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"That's what I was referring to, yes","msgtype":"m.text"},"ts":1197234900000,"senderName":"mpt_","senderId":"mpt_@irc"},
{"content":{"body":"I guessed :)","msgtype":"m.text"},"ts":1197234901000,"senderName":"gsnedders","senderId":"gsnedders@irc"}
]