[
{"content":{"body":"I'm guessing there is no way to change the cache key for type=module's module map at this point, but I was wondering why it was chosen to be the request url. that maps to --perserve-symlinks approximately in node which was attempted to be the default and then backed out due to problems","msgtype":"m.text"},"ts":1523412631000,"senderName":"bradleymeck","senderId":"bradleymeck@irc"},
{"content":{"body":"I've heard some claims of optimizations being doable on the request url based cache but haven't managed to dig up talks about them","msgtype":"m.text"},"ts":1523412662000,"senderName":"bradleymeck","senderId":"bradleymeck@irc"},
{"content":{"body":"Domenic: The Console wpt PRs very well may be on your post-vacation todo list but just pinging here in case they got buried; they might be some low-hanging fruit :)","msgtype":"m.text"},"ts":1523413126000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"domfarolino: oh, nope, totally forgot, thanks for the ping!","msgtype":"m.text"},"ts":1523413215000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"üëç","msgtype":"m.text"},"ts":1523413229000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"did not know you could have avatars in irc(cloud)...","msgtype":"m.emote"},"ts":1523413259000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"Sometimes I wonder if ekr ever expresses any positive thoughts about any changes to the web platform","msgtype":"m.text"},"ts":1523423608000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"You'd think stricter content-type checking would be a slam dunk, but no...","msgtype":"m.text"},"ts":1523423622000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: where is this?","msgtype":"m.text"},"ts":1523423806000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"https://github.com/mozilla/standards-positions/issues/81#issuecomment-380328972 in particular, mozilla/standards-positions in general","msgtype":"m.text"},"ts":1523423831000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: I think ekr would be pretty positive on TLS, but since he's very involved I'd expect him to be critical of that too üòÉ","msgtype":"m.text"},"ts":1523423872000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Also some hurtful words from Martin Thomson, but I guess that's just people being mean on the internet.","msgtype":"m.text"},"ts":1523423943000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"s/mean/inconsiderate/","msgtype":"m.text"},"ts":1523423967000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Yeah, though I agree that it's hard to digest","msgtype":"m.text"},"ts":1523423986000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"And I actually had a wrong take on the whole thing initially so fortunately no PRs landed yet and JakeA chimed in","msgtype":"m.text"},"ts":1523424009000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Concern from ekr seems valid though, esp for the sniffing bits","msgtype":"m.text"},"ts":1523424490000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I agree that some more Content-Type enforcement might be good, but this also introduces new complexity (such as a new response type) to do it","msgtype":"m.text"},"ts":1523424537000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I thought they were changing that to just network error","msgtype":"m.text"},"ts":1523424829000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: but that would be observable via fetch(). I think it needs to return an empty response instead.","msgtype":"m.text"},"ts":1523426638000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"Domenic: I'm proposing the same thing for a similar issue https://github.com/whatwg/fetch/pull/560/files#comment-180417935","msgtype":"m.text"},"ts":1523426741000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"Well that was the original proposal","msgtype":"m.text"},"ts":1523426861000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"But to align with existing nosniff it could just be a network error if we think we could get away with it","msgtype":"m.text"},"ts":1523426885000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"After some time, and being unable to sleep due to it. I think I want to suggest changing import.meta.url to be on the request URL not the response URL","msgtype":"m.text"},"ts":1523426958000,"senderName":"bradleymeck_","senderId":"bradleymeck_@irc"},
{"content":{"body":"I guess making a new issue on just HTML would be the way to do that?","msgtype":"m.text"},"ts":1523426999000,"senderName":"bradleymeck_","senderId":"bradleymeck_@irc"},
{"content":{"body":"Domenic: unfortunately it does not quite align and the other bits would require a different factoring too","msgtype":"m.text"},"ts":1523427794000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"bradleymeck_: I guess, but does not seem acceptable","msgtype":"m.text"},"ts":1523427822000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"bradleymeck_: you can open the issue, but we won't change. It makes it useless for its primary use case.","msgtype":"m.text"},"ts":1523427828000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I claim that use case analysis is flawed after being unable to sleep thinking on it","msgtype":"m.text"},"ts":1523427851000,"senderName":"bradleymeck_","senderId":"bradleymeck_@irc"},
{"content":{"body":"I claim knowing the module map key is not a use case we care for on the web","msgtype":"m.text"},"ts":1523427887000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I don't think the use case is just around that","msgtype":"m.text"},"ts":1523427906000,"senderName":"bradleymeck_","senderId":"bradleymeck_@irc"},
{"content":{"body":"I think using the Response has mental model problems with `import()` using `import.meta.url`","msgtype":"m.text"},"ts":1523427928000,"senderName":"bradleymeck_","senderId":"bradleymeck_@irc"},
{"content":{"body":"mostly due to how the module map works","msgtype":"m.text"},"ts":1523427944000,"senderName":"bradleymeck_","senderId":"bradleymeck_@irc"},
{"content":{"body":"I recommend getting some sleep first","msgtype":"m.text"},"ts":1523427945000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"import() also resolves relative to the response URL fwiw","msgtype":"m.text"},"ts":1523427962000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"well this is a can of worms if true","msgtype":"m.text"},"ts":1523427980000,"senderName":"bradleymeck_","senderId":"bradleymeck_@irc"},
{"content":{"body":"since all of this conflicts with node","msgtype":"m.text"},"ts":1523427987000,"senderName":"bradleymeck_","senderId":"bradleymeck_@irc"},
{"content":{"body":"and we can't reenable the --perserve-symlinks approach that this resembles due to resource usage issues","msgtype":"m.text"},"ts":1523428009000,"senderName":"bradleymeck_","senderId":"bradleymeck_@irc"},
{"content":{"body":"Yeah not really sure what node is thinking.","msgtype":"m.text"},"ts":1523428012000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"well it tried this approach","msgtype":"m.text"},"ts":1523428025000,"senderName":"bradleymeck_","senderId":"bradleymeck_@irc"},
{"content":{"body":"But they can make their own decisions and balance priorities","msgtype":"m.text"},"ts":1523428028000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: it tried this approach and backed away after problems","msgtype":"m.text"},"ts":1523428048000,"senderName":"bradleymeck_","senderId":"bradleymeck_@irc"},
{"content":{"body":"it isn't like it just does what it wants without thinking","msgtype":"m.text"},"ts":1523428059000,"senderName":"bradleymeck_","senderId":"bradleymeck_@irc"},
{"content":{"body":"To be clear, this approach has worked fine for CSS et al","msgtype":"m.text"},"ts":1523428080000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Sure that's why I said make their own decisions and balance priorities not randomly pick something.","msgtype":"m.text"},"ts":1523428085000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"The web has tested this long before Node","msgtype":"m.text"},"ts":1523428097000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"in CSS I'm not sure how to compare the extra load operations that this incurs","msgtype":"m.text"},"ts":1523428125000,"senderName":"bradleymeck_","senderId":"bradleymeck_@irc"},
{"content":{"body":"or maybe I'm misreading something about how resolve works","msgtype":"m.text"},"ts":1523428149000,"senderName":"bradleymeck_","senderId":"bradleymeck_@irc"},
{"content":{"body":"(in case you weren't aware static import *also* resolves relative to the response URL)","msgtype":"m.text"},"ts":1523428154000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"still bad situation in my mind","msgtype":"m.text"},"ts":1523428184000,"senderName":"bradleymeck_","senderId":"bradleymeck_@irc"},
{"content":{"body":"And with shared workers","msgtype":"m.text"},"ts":1523428200000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"unsure how having multiple module records for a response URL is a good thing","msgtype":"m.text"},"ts":1523428202000,"senderName":"bradleymeck_","senderId":"bradleymeck_@irc"},
{"content":{"body":"Shared workers even has the request map thingy","msgtype":"m.text"},"ts":1523428220000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Anyway, I'm heading to sleep. Hope Node can figure something out, but the web has a solution it's happy with.","msgtype":"m.text"},"ts":1523428234000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I'm glad this talk has been as unwelcoming to my hopes as the last 12+months","msgtype":"m.text"},"ts":1523428261000,"senderName":"bradleymeck_","senderId":"bradleymeck_@irc"},
{"content":{"body":"anywho seems like no point in interacting","msgtype":"m.text"},"ts":1523428277000,"senderName":"bradleymeck_","senderId":"bradleymeck_@irc"},
{"content":{"body":"bradleymeck_: I‚Äôd be interested in seeing how the mismatch might end up affecting developers, but the response URL being authoritative is a long established fact on the web","msgtype":"m.text"},"ts":1523428413000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: if the module map was response URL based I wouldn't think it a problem","msgtype":"m.text"},"ts":1523428448000,"senderName":"bradleymeck_","senderId":"bradleymeck_@irc"},
{"content":{"body":"Oooh before I fell asleep I had a hunch and it was ima","msgtype":"m.text"},"ts":1523428679000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Er, it was right. The image cache is also request URL keyed. https://html.spec.whatwg.org/multipage/images.html#the-list-of-available-images","msgtype":"m.text"},"ts":1523428710000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I don't think that is really a decent comparison when it doesn't run code. Unclear on if your concern is about the HTTP requests being made or the Module Records being made","msgtype":"m.text"},"ts":1523428841000,"senderName":"bradleymeck_","senderId":"bradleymeck_@irc"},
{"content":{"body":"With ESM at least you have to do all the redirects before linking stuff anyway","msgtype":"m.text"},"ts":1523428980000,"senderName":"bradleymeck_","senderId":"bradleymeck_@irc"},
{"content":{"body":"bradleymeck_: found the last time this was discussed: https://github.com/whatwg/html/issues/613","msgtype":"m.text"},"ts":1523430156000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: (re Mozilla's CORB position) If we started the web again, no-cors wouldn't exist. Therefore I like CORB, and I'd like to see further efforts to limit no-cors. It has merits other than Spectre protection.","msgtype":"m.text"},"ts":1523430908000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"(I'm not involved in the CORB effort internally at all, so that's a personal view)","msgtype":"m.text"},"ts":1523430942000,"senderName":"JakeA","senderId":"JakeA@irc"},
{"content":{"body":"JakeA: yeah, I'm definitely sympathetic to that point of view","msgtype":"m.text"},"ts":1523430965000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Why does mimesniff  allow whitespace bytes to precede \"<?xml\"  when sniffing for XML?","msgtype":"m.text"},"ts":1523435729000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: perhaps a mistake, seems to have been there since it first got added","msgtype":"m.text"},"ts":1523436033000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hsivonen: I'm also not sure how well implemented/tested mimesniff is in general","msgtype":"m.text"},"ts":1523436051000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: ok","msgtype":"m.text"},"ts":1523436058000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: the code in Firefox is really old, afaict","msgtype":"m.text"},"ts":1523436060000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hsivonen: and this algorithm seems to mostly match it, so maybe it was written for Chrome/Safari","msgtype":"m.text"},"ts":1523436083000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Good to see people are still being helpful in bug trackers: https://bz.apache.org/bugzilla/show_bug.cgi?id=62273#c2","msgtype":"m.text"},"ts":1523440050000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"annevk, is it supposed to be possible to create a zero-sized ImageBitmap?","msgtype":"m.text"},"ts":1523440433000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: dunno, need to get back to that PR at some point","msgtype":"m.text"},"ts":1523440547000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: do you know if anyone is dealing with https://drafts.csswg.org/cssom related issues","msgtype":"m.text"},"ts":1523445715000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"(context is https://bugzilla.mozilla.org/show_bug.cgi?id=1449584#c11)","msgtype":"m.text"},"ts":1523445776000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: we just appointed Emilio Cobos √Ålvarez editor of CSSOM (an hour or so ago?)","msgtype":"m.text"},"ts":1523445816000,"senderName":"astearns_","senderId":"astearns_@irc"},
{"content":{"body":"smaug____: We're dealing with them piecemeal at the moment; emilio just agreed to be the editor","msgtype":"m.text"},"ts":1523445820000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"dangit, ninja'd","msgtype":"m.text"},"ts":1523445823000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":":)","msgtype":"m.text"},"ts":1523445828000,"senderName":"astearns_","senderId":"astearns_@irc"},
{"content":{"body":"nice","msgtype":"m.text"},"ts":1523445977000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: I guess now I'm to blame? :-)","msgtype":"m.text"},"ts":1523446611000,"senderName":"ecobos","senderId":"ecobos@irc"},
{"content":{"body":"ecobos: thanks for taking that on; hope you got a lot of spare time üòõ","msgtype":"m.text"},"ts":1523447735000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"https://github.com/w3c/css-houdini-drafts/issues/751","msgtype":"m.text"},"ts":1523450396000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"MFW a ticket becomes a wish list","msgtype":"m.text"},"ts":1523450404000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"hi","msgtype":"m.text"},"ts":1523451339000,"senderName":"Newbie","senderId":"Newbie@irc"},
{"content":{"body":"anybody","msgtype":"m.text"},"ts":1523451344000,"senderName":"Newbie","senderId":"Newbie@irc"},
{"content":{"body":"trhy","msgtype":"m.text"},"ts":1523451380000,"senderName":"Newbie","senderId":"Newbie@irc"},
{"content":{"body":"Bye","msgtype":"m.text"},"ts":1523451839000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Domenic: counter example: https://github.com/mozilla/standards-positions/issues/82#issuecomment-380448688 üòÉ","msgtype":"m.text"},"ts":1523452951000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: interested in reviewing https://github.com/w3c/web-platform-tests/pull/8449 too?","msgtype":"m.text"},"ts":1523453172000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I guess nobody else is stepping up, might as well. Assign me so I get an email I can flag? Will do today.","msgtype":"m.text"},"ts":1523453218000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Thanks, I suspect most people moved on ten years ago or so","msgtype":"m.text"},"ts":1523453350000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ajax() works just fine Anne, I don't know why you bother","msgtype":"m.text"},"ts":1523453395000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"foolip: ganesh move + rename seems to have been successful.","msgtype":"m.text"},"ts":1523479466000,"senderName":"tobie","senderId":"tobie@irc"},
{"content":{"body":"foolip: LMK if you see anything fishy","msgtype":"m.text"},"ts":1523479479000,"senderName":"tobie","senderId":"tobie@irc"},
{"content":{"body":"tobie: will do, thanks!","msgtype":"m.text"},"ts":1523484868000,"senderName":"foolip","senderId":"foolip@irc"}
]