[
{"content":{"body":"wanderview: FWIW, you might be interested in https://bug1507508.bmoattachments.org/attachment.cgi?id=9065280 Google Maps relies on Chrome janking badly on setTimeout(,0)","msgtype":"m.text"},"ts":1558343863000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: re this promise stuff","msgtype":"m.text"},"ts":1558346228000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"jochen__: yup","msgtype":"m.text"},"ts":1558346252000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: my main point is that a Promise is an ES object, so no operation can happen on it without a realm","msgtype":"m.text"},"ts":1558346253000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"jochen__: sure","msgtype":"m.text"},"ts":1558346262000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"but the spec relies on having a script from which 'muted errors' flag can be read","msgtype":"m.text"},"ts":1558346286000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"https://html.spec.whatwg.org/#the-hostpromiserejectiontracker-implementation","msgtype":"m.text"},"ts":1558346314000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"jochen__: and what that 'running script' is in different cases if unclear to me","msgtype":"m.text"},"ts":1558346372000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"hum","msgtype":"m.text"},"ts":1558346433000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"as defined in the spec?","msgtype":"m.text"},"ts":1558346443000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"the realm should have a pointer to a script in ScriptOrModule","msgtype":"m.text"},"ts":1558346456000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"https://html.spec.whatwg.org/#running-script","msgtype":"m.text"},"ts":1558346510000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"jochen__: ok, so when https://w3c.github.io/ServiceWorker/#serviceworkercontainer-ready-promise, what is the script?","msgtype":"m.text"},"ts":1558346595000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"s/, what/is run, what/","msgtype":"m.text"},"ts":1558346618000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"do we need something in the specs to explicitly forcing Promise creation to happen only when there actually is a script running","msgtype":"m.text"},"ts":1558346674000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"but then, rejection can anyhow happen when there isn't a script running ,so I'm not sure what 'muted  errors' behavior we want.","msgtype":"m.text"},"ts":1558346862000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: should match the script used to create the promise I suppose","msgtype":"m.text"},"ts":1558348106000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smaug____: but yeah, if the UA creates itâ€¦","msgtype":"m.text"},"ts":1558348134000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"if a spec require a promise to be created without a realm then the spec should be fixed, yes","msgtype":"m.text"},"ts":1558349184000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"rejection requires a script","msgtype":"m.text"},"ts":1558349198000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"it's an ES operation, it always requires a realm","msgtype":"m.text"},"ts":1558349210000,"senderName":"jochen__","senderId":"jochen__@irc"},
{"content":{"body":"jochen__: it's not so much a realm, it's a script in this case, which has a mute errors flag","msgtype":"m.text"},"ts":1558353091000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: https://bugs.chromium.org/p/chromium/issues/list?can=2&q=getAllResponseHeaders suggests there isn't even a bug on file about sorting XHR headers in Chrome","msgtype":"m.text"},"ts":1558353939000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"annevk: how are they passing any test cases?","msgtype":"m.text"},"ts":1558353956000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: they're not passing the relevant getAllResponseHeaders test as I noted?","msgtype":"m.text"},"ts":1558354009000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: ah, ok","msgtype":"m.text"},"ts":1558354018000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"out of order IRC and Bugzilla reading for me","msgtype":"m.text"},"ts":1558354055000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"hsivonen: this was quite an old change though so some of the testing and bug filing was likely subpar","msgtype":"m.text"},"ts":1558354055000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"hsivonen: ah","msgtype":"m.text"},"ts":1558354061000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"at least, I think it's old","msgtype":"m.text"},"ts":1558354075000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ok","msgtype":"m.text"},"ts":1558354083000,"senderName":"hsivonen","senderId":"hsivonen@irc"},
{"content":{"body":"I'm trying to trace where in the specs origin checks happen. I can see how it works for method calls from WebIDL, or the special checks for Document and Location, but I'm having trouble finding the checks for ordinary objects. Does anyone know where these are specified?","msgtype":"m.text"},"ts":1558355365000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"littledan: what kind of object are you thinking of?","msgtype":"m.text"},"ts":1558355938000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"littledan: are you specifically asking about infrastructure Fx has that no other browser has?","msgtype":"m.text"},"ts":1558355971000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"no, I think all browsers have this. Or at least V8 has it.","msgtype":"m.text"},"ts":1558356005000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"I'll write a test case, just a minute","msgtype":"m.text"},"ts":1558356011000,"senderName":"littledan","senderId":"littledan@irc"},
{"content":{"body":"I thought the idea was that it was impossible to get your hands on such an object?","msgtype":"m.text"},"ts":1558356076000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: khan.gif, alt: Khan screaming DOCUMENT.DOMAIN","msgtype":"m.text"},"ts":1558356261000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ha","msgtype":"m.text"},"ts":1558356274000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"euh, Khan isn't the one screaming, but you got it","msgtype":"m.text"},"ts":1558356281000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"For a moment there I managed to forgot about it","msgtype":"m.text"},"ts":1558356293000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Way to ruin my day :)","msgtype":"m.text"},"ts":1558356350000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"right, I was mistaken; sorry for the noise","msgtype":"m.text"},"ts":1558359541000,"senderName":"littledan","senderId":"littledan@irc"}
]