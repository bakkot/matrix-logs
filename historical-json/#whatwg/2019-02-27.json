[
{"content":{"body":"annevk: so the person who filed the issues about the integrity attribute with inline script elements seems to have deleted their GitHub account","msgtype":"m.text"},"ts":1551261510000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but looking again at https://after-dark.habd.as/ I think the claim that integrity works for inline scripts may not be wrong after all","msgtype":"m.text"},"ts":1551261623000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I couldnâ€™t reproduce it when I tested, yet if I look at the source of that document, I donâ€™t see how the inline scripts there could actually be working unless the browser is allowing it based on checking the hashes","msgtype":"m.text"},"ts":1551261777000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"the policy does specify 'unsafe-inline' but that should be getting ignored since the policy also specifies a hash","msgtype":"m.text"},"ts":1551261836000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: it also specifies hashes in the CSP though","msgtype":"m.text"},"ts":1551263811000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: so it's not clear to me if it's that or the integrity attribute","msgtype":"m.text"},"ts":1551263829000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk, what kind of changes in DOM do you expect in https://github.com/heycam/webidl/issues/540#issuecomment-467841401 , besides updating the constructor to look more like https://heycam.github.io/webidl/#dom-domexception-domexception ?","msgtype":"m.text"},"ts":1551275140000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: I think there's some stuff I'm missing; where does [[Realm]] come from?","msgtype":"m.text"},"ts":1551275444000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ms2ger: and how is that determined for a subclass?","msgtype":"m.text"},"ts":1551275453000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk, 1.8 in https://heycam.github.io/webidl/#create-an-interface-object","msgtype":"m.text"},"ts":1551275476000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: is there a bug against Chrome for the difference I mentioned?","msgtype":"m.text"},"ts":1551275480000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ms2ger: (or Firefox, if wrong)","msgtype":"m.text"},"ts":1551275493000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ms2ger: and can we use \"this\" now? ðŸ˜ƒ","msgtype":"m.text"},"ts":1551275503000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I haven't filed a but yet, but there's a test in wpt","msgtype":"m.text"},"ts":1551275504000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"I'm working on a PR to make \"this\" more explicitly available","msgtype":"m.text"},"ts":1551275593000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: so create an interface object takes a realm, it doesn't see how it obtains it","msgtype":"m.text"},"ts":1551275609000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Would it be useful to make 2 patches against HTML: one describing Chrome, the other Firefox? I mean for the insertion steps changes.","msgtype":"m.text"},"ts":1551275699000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: do Chrome and Firefox agree on <script>?","msgtype":"m.text"},"ts":1551275817000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"From https://heycam.github.io/webidl/#define-the-global-property-references , which gets it from https://heycam.github.io/webidl/#new , which gets it from... https://html.spec.whatwg.org/multipage/browsers.html#creating-browsing-contexts:creating-a-new-javascript-realm I guess","msgtype":"m.text"},"ts":1551275849000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: the idea was that \"create a new object implementing the interface\" is used by others, right? So they'd always have to supply a Realm?","msgtype":"m.text"},"ts":1551276028000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yes","msgtype":"m.text"},"ts":1551276040000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: so what's the recommendation for that? E.g., https://url.spec.whatwg.org/#dom-url-url creates URLSearchParams in which Realm?","msgtype":"m.text"},"ts":1551276101000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"was hoping there could be a default for IDL-algorithms","msgtype":"m.emote"},"ts":1551276131000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk, this.[[Realm]]","msgtype":"m.text"},"ts":1551276132000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"and that's 1:1 with this's relevant realm?","msgtype":"m.text"},"ts":1551276166000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: No they donâ€™t.","msgtype":"m.text"},"ts":1551276227000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk, I need to double-check if \"relevant realm\" is defined properly yet, but that's the idea","msgtype":"m.text"},"ts":1551276255000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: we might as well stop using relevant realm I guess","msgtype":"m.text"},"ts":1551276278000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"(iirc it's only defined for platform objects)","msgtype":"m.text"},"ts":1551276287000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Noooo","msgtype":"m.text"},"ts":1551276289000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"heh","msgtype":"m.text"},"ts":1551276294000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"We've done so much work to educate people","msgtype":"m.text"},"ts":1551276295000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Also I think eventually it will be a useful abstraction around both ES and platform objects","msgtype":"m.text"},"ts":1551276331000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"if ES objects will also get [[Realm]] it seems like that's the abstraction","msgtype":"m.text"},"ts":1551276359000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"but I guess that's unclear as of yet","msgtype":"m.text"},"ts":1551276369000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"As for a default, that was debated in https://github.com/heycam/webidl/issues/135","msgtype":"m.text"},"ts":1551276396000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Note that now that we have something set up \"this\" before calling constructor steps, relevant realm of \"this\" does exist in the constructor.","msgtype":"m.text"},"ts":1551276470000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"With the previous setup it didn't so we suggested current realm","msgtype":"m.text"},"ts":1551276494000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Although I guess there's still debate in https://github.com/heycam/webidl/issues/135#issuecomment-411109348","msgtype":"m.text"},"ts":1551276524000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"hmm","msgtype":"m.text"},"ts":1551276564000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I'd like to see https://heycam.github.io/webidl/#dom-domexception-domexception for something more complex, such as URL","msgtype":"m.text"},"ts":1551276587000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: sorry, I'm beginning to lose track given the longish timespan","msgtype":"m.text"},"ts":1551276614000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I mean, the only complexity with URL is that it creates a new platform object, right?","msgtype":"m.text"},"ts":1551276633000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"nox: I suspect two PRs doesn't make it easier for other folks to know what's going on","msgtype":"m.text"},"ts":1551276637000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: That's fine. That's why maybe I should just describe both for all the cases I described and then we can pick which one we want.","msgtype":"m.text"},"ts":1551276641000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"So it's a question as to whether when creating the URLSearchParams you do \"new URLSearchParams\" and it picks a right default, or you do \"new URLSearchParams in the current realm/relevant realm of this\"","msgtype":"m.text"},"ts":1551276662000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"nox: if there's a way to describe both abstractly in a comment that might be easier","msgtype":"m.text"},"ts":1551276666000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Ok, then I'll make the changes for each thing I found with the behaviour I prefer, and I guess I can describe the other possible behaviours in a comment.","msgtype":"m.text"},"ts":1551276676000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Domenic: or do you use this's [[Realm]]","msgtype":"m.text"},"ts":1551276683000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"All three are equivalent","msgtype":"m.text"},"ts":1551276690000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"or this.[[Realm]]!","msgtype":"m.text"},"ts":1551276694000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: That's kinda what I did in https://github.com/whatwg/html/pull/4354#issuecomment-463566900","msgtype":"m.text"},"ts":1551276701000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"Well, this's [[Realm]] is just an awkward way of writing this.[[Realm]], I guess.","msgtype":"m.text"},"ts":1551276708000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: I'm not a big fan of not having canonical answers","msgtype":"m.text"},"ts":1551276711000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Use relevant realm then","msgtype":"m.text"},"ts":1551276725000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"That's been our canonical answer up until now and I don't see a reason to churn all that","msgtype":"m.text"},"ts":1551276737000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Or, wait for a default. That's the real debate.","msgtype":"m.text"},"ts":1551276743000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"annevk, I can probably write a pr for url today or tomorrow","msgtype":"m.text"},"ts":1551276747000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: no need, I think I sorta got where things are at now based on this discussion","msgtype":"m.text"},"ts":1551276859000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Probably we should add a default. Even if relevant is \"wrong\" in methods, and we eventually decide to change it (very unlikely it seems given bz's preferences), for constructors there wouldn't be any switch. And, by having a default, spec-writers would be abstracted away from the mess.","msgtype":"m.text"},"ts":1551276870000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Ok, cc me?","msgtype":"m.text"},"ts":1551276872000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: I'll wait and see a bit before cleaning things up","msgtype":"m.text"},"ts":1551276875000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: so that only describes Firefox and not Chrome and doesn't go into tradeoffs","msgtype":"m.text"},"ts":1551276912000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Yeah, that's not clear expect in my head.","msgtype":"m.text"},"ts":1551276936000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: ideally, it's something like Firefox does A, Chrome does B, A is nice because C, B is nice because D","msgtype":"m.text"},"ts":1551276941000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I described Firefox because Chrome does what is in the PR.","msgtype":"m.text"},"ts":1551276950000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"annevk: Ok, I'll think about describing things that way.","msgtype":"m.text"},"ts":1551276968000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"nox: for a higher-level discussion you want everything in a single place so folks can quickly grasp what's going on","msgtype":"m.text"},"ts":1551277008000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"nox: ta!","msgtype":"m.text"},"ts":1551277018000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I still quite like https://www.w3.org/Bugs/Public/show_bug.cgi?id=27301#c2","msgtype":"m.text"},"ts":1551280331000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Maybe I'll file an issue later","msgtype":"m.text"},"ts":1551280340000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk, do we have/want something in infra to concatenate two lists?","msgtype":"m.text"},"ts":1551282752000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: an open issue perhaps?","msgtype":"m.text"},"ts":1551283484000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ms2ger: do not recall that happening anywhere","msgtype":"m.text"},"ts":1551283512000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: should all instances of <span>Content-Type</span> become `<code>Content-Type</code>`? I only changed the one that was already backticked from <span> to <code>.","msgtype":"m.text"},"ts":1551287129000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: I guess not then","msgtype":"m.text"},"ts":1551287346000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: a lot of that needs modernizing anyway","msgtype":"m.text"},"ts":1551287355000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"OK, I'll make a note and leave the rest","msgtype":"m.text"},"ts":1551287362000,"senderName":"Domenic","senderId":"Domenic@irc"}
]