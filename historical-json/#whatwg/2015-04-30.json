[
{"content":{"body":"caitp: about what's hot, 100% agree with what smaug said about ServiceWorker and the Web Components renaissance","msgtype":"m.text"},"ts":1430357484000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"looks back through his list of other stuff","msgtype":"m.emote"},"ts":1430357510000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"that comment was really more like \"what will be getting deprecated in the next 5 years\"","msgtype":"m.text"},"ts":1430357936000,"senderName":"caitp-","senderId":"caitp-@irc"},
{"content":{"body":"because you know, some of this stuff is gonna fall apart","msgtype":"m.text"},"ts":1430357948000,"senderName":"caitp-","senderId":"caitp-@irc"},
{"content":{"body":"and it will be sad","msgtype":"m.text"},"ts":1430357955000,"senderName":"caitp-","senderId":"caitp-@irc"},
{"content":{"body":"caitp: oh, well that's an interesting question too","msgtype":"m.text"},"ts":1430361916000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"caitp: so in that light, not sure the future looks so bright for IndexedDB","msgtype":"m.text"},"ts":1430362062000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"caitp: maybe you know this already but annevk has been driving some effort on a more rational \"unified architecture for storage on the web\" https://wiki.whatwg.org/wiki/Storage","msgtype":"m.text"},"ts":1430362142000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"other stuff... I wonder (hope) that a lot of use cases for Web Sockets might get obviated by WebRTC DataChannel","msgtype":"m.text"},"ts":1430362232000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: why do you say \"not so bright for IndexedDB\"?","msgtype":"m.text"},"ts":1430362249000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"hey roc","msgtype":"m.text"},"ts":1430362265000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"from talking with annevk and slightlyoff and others last week","msgtype":"m.text"},"ts":1430362301000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"we already know webdevs aren't exactly warm to that API","msgtype":"m.text"},"ts":1430362333000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"roc: lemme get you a URL for the notes from annevk session on storage last week","msgtype":"m.text"},"ts":1430362362000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"roc: or did you see those notes already?","msgtype":"m.text"},"ts":1430362382000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"roc: https://pad.w3ctag.org/p/EWS-20April2015-Breakout1.1.md","msgtype":"m.text"},"ts":1430362417000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"hmm I see now those a pretty sketchy as far as capturing the comments about IndexedDB","msgtype":"m.text"},"ts":1430362463000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"to be precise, it captured none of them :-)","msgtype":"m.text"},"ts":1430362521000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"yeah I'm looking to see if some of slightlyoff comments elsewhere got recorded","msgtype":"m.text"},"ts":1430362599000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"roc: in the mean time if you want a more informed view, you probably want to ask annevk to share some thoughts with you directly","msgtype":"m.text"},"ts":1430362662000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I hardly ever get to talk to Anne, he's on the wrong side of the planet :-)","msgtype":"m.text"},"ts":1430362704000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"well","msgtype":"m.text"},"ts":1430362721000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"you just need to travel more","msgtype":"m.text"},"ts":1430362729000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but yeah, sucks for us","msgtype":"m.text"},"ts":1430362738000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"probably you're in the worst possible timezone for wide real-time collaboration","msgtype":"m.text"},"ts":1430362768000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Tokyo is just slightly better","msgtype":"m.text"},"ts":1430362773000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"roc: https://pad.w3ctag.org/p/22-minutes","msgtype":"m.text"},"ts":1430362781000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"see the first part on Storage","msgtype":"m.text"},"ts":1430362796000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"e.g., slightlyoff comments about \"likely we'll struggle with the storage mechanismsm we have right now, because they're not integrated. Re the locking propblem: IndexDB has a similar problem\"","msgtype":"m.text"},"ts":1430362849000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"and \"How do we deal with storage locking? Now, IndexDB has a nasty way of daling with this: it closes transactions at the end of the task.  You could extend the life of the transaction (artifically), â€” but it's there to keep developers from getting themselves into an inconsistent state.... This goes badly with other apps wanting access to the storage and trying to coordinate about the transaction lifet","msgtype":"m.text"},"ts":1430362895000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"ime\"","msgtype":"m.text"},"ts":1430362901000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"\"But now, It isn't possible to coordinate your rights to a cached storage area with a indexDB transaction.  We're clearly missing a locking system\"","msgtype":"m.text"},"ts":1430362928000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"this reminds me, Travis is pretty great a scribing","msgtype":"m.text"},"ts":1430362984000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I was there in the room for that discussion and those notes do a very good job of capturing it in good detail","msgtype":"m.text"},"ts":1430363027000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: so that's the underlying architecture of IDB and localStorage et al","msgtype":"m.text"},"ts":1430372581000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: there's no plans for getting rid of IDB","msgtype":"m.text"},"ts":1430372588000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: in fact, we're extending it","msgtype":"m.text"},"ts":1430372595000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ah so I was confused","msgtype":"m.text"},"ts":1430372635000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"so you're documenting the underlying architecture but not changing it?","msgtype":"m.text"},"ts":1430372666000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I mean it can be changed fundamentally at this point can it?","msgtype":"m.text"},"ts":1430372697000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: yeah, in a way","msgtype":"m.text"},"ts":1430372703000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: what I want to define is what all these APIs are grounded in, what their underlying storage box is","msgtype":"m.text"},"ts":1430372720000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: and then define ways to make that box persistent","msgtype":"m.text"},"ts":1430372726000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ok","msgtype":"m.text"},"ts":1430372741000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: and then define ways to make additional boxes and allow IDB and Cache API etc to use those newly created boxes","msgtype":"m.text"},"ts":1430372748000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: ok what about the IndexedDB locking issue that slightlyoff pointed out?","msgtype":"m.text"},"ts":1430372749000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I see","msgtype":"m.text"},"ts":1430372754000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"so I guess there's no plan to expose a different higher-level API","msgtype":"m.text"},"ts":1430372823000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: due to IDB having transactions it doesn't actually have a locking problem","msgtype":"m.text"},"ts":1430372843000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"realizes now he'd been reading too much into this","msgtype":"m.emote"},"ts":1430372844000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: but the way it does transactions is also what makes it complicated","msgtype":"m.text"},"ts":1430372862000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I thought slightlyoff or somebody brought this up at the summit session too","msgtype":"m.text"},"ts":1430372883000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I mean the thing I pointed roc too","msgtype":"m.text"},"ts":1430372892000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"in the TAG minutes","msgtype":"m.text"},"ts":1430372899000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"https://gist.github.com/inexorabletash/8c122c84a65de65c35b3 and https://gist.github.com/inexorabletash/a53c6add9fbc8b9b1191 have ideas around new higher-level APIs and new lower-level APIs around IDB","msgtype":"m.text"},"ts":1430372903000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ah ok","msgtype":"m.text"},"ts":1430372911000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"To model IDB with promises you basically need to create some kind of promise subclass to handle transactions","msgtype":"m.text"},"ts":1430372951000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"so maybe I wasn't completely imagining it","msgtype":"m.text"},"ts":1430372952000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"my memory is pretty sketchy even in the best of times, let alone when jetlagged and hung over","msgtype":"m.text"},"ts":1430372984000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"looks at annevk links","msgtype":"m.emote"},"ts":1430372992000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"phew!","msgtype":"m.text"},"ts":1430373005000,"senderName":"roc","senderId":"roc@irc"},
{"content":{"body":"heh","msgtype":"m.text"},"ts":1430373023000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I'm still sure I didn't imagine the think slightlyoff said about the locking-like problem","msgtype":"m.text"},"ts":1430373058000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: from http://krijnhoetmer.nl/irc-logs/whatwg/20150430#l-139","msgtype":"m.text"},"ts":1430373150000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"\"Re the locking propblem: IndexDB has a similar problem\" and the other quoted stuff after that","msgtype":"m.text"},"ts":1430373190000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: sure, I addressed that above","msgtype":"m.text"},"ts":1430373199000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"oh","msgtype":"m.text"},"ts":1430373206000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I guess I should actually read stuff","msgtype":"m.text"},"ts":1430373216000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: all storage has a locking issue since two tabs can address the same storage at the same time","msgtype":"m.text"},"ts":1430373222000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: IDB deals with this by having transactions, but not everyone is a fan of the way it does those","msgtype":"m.text"},"ts":1430373245000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"ah flags","msgtype":"m.text"},"ts":1430373249000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: localStorage has a theoretical \"storage mutex\", but in practice it's racy","msgtype":"m.text"},"ts":1430373265000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"right yeah that much I already understood","msgtype":"m.text"},"ts":1430373283000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"and knew too that IndexedDB by design didn't need a mutex","msgtype":"m.text"},"ts":1430373334000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"hmm I also recall now that I only caught half your session because I was in whatever session that was next door the other half of that hour","msgtype":"m.text"},"ts":1430373420000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"anyway I'm glad there's a way forward and things will get rationalized further","msgtype":"m.text"},"ts":1430373503000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"We have some cross-browser agreement to add persistent storage","msgtype":"m.text"},"ts":1430373578000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"But there's quite a bit of demand from e.g. gaming to go beyond that as per the wiki page","msgtype":"m.text"},"ts":1430373609000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Need to flush that out some more and I guess write down persistent storage and storage architecture...","msgtype":"m.text"},"ts":1430373621000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I guess that's what I had been thinking about, along with thinking it was planned to supersede/obsolete both IndexedDB and localStorage","msgtype":"m.text"},"ts":1430373680000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Ah I see, underpinnings != primitives, at least not yet","msgtype":"m.text"},"ts":1430373727000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"aha","msgtype":"m.text"},"ts":1430373988000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"ok","msgtype":"m.text"},"ts":1430373989000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Hmm","msgtype":"m.text"},"ts":1430379290000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Were accounts moved to this new discuss.webplatform.org thing too?","msgtype":"m.text"},"ts":1430379311000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Not sure I'm super happy contributing to webplatform.org branded stuff given the disaster they made out of docs","msgtype":"m.text"},"ts":1430379348000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: please keep an open mind there","msgtype":"m.text"},"ts":1430380110000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"at this point everybody recognizes that the docs thing didn't work out","msgtype":"m.text"},"ts":1430380143000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"IMHO it was a failed plan from the get-go but I don't fault others for having thought differently and having actually tried in good faith to make it happen as planned","msgtype":"m.text"},"ts":1430380214000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but there is some momentum toward making a reborn webplatform.org that discuss.webplatform.org will be part of, and I think you'll see it transition into being much more of a genuinely community-driven project that you'll be much happier to participate in","msgtype":"m.text"},"ts":1430380369000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"more like web-platform-tests","msgtype":"m.text"},"ts":1430380380000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I don't know, I wasn't particularly thrilled either with the forking of URL to yet another location either","msgtype":"m.text"},"ts":1430380406000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I've yet to see the benefit of that","msgtype":"m.text"},"ts":1430380419000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"well that was not a top-down thing","msgtype":"m.text"},"ts":1430380426000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"iirc","msgtype":"m.text"},"ts":1430380429000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"that was a choice that Sam made","msgtype":"m.text"},"ts":1430380435000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"and maybe it's not going to work out at that other place but if so we can write it off a lesson learned I guess","msgtype":"m.text"},"ts":1430380499000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"And that community supported that action apparently rather than pushing back","msgtype":"m.text"},"ts":1430380547000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I don't know that anybody \"supported\" it other than in the sense of facilitating Sam's choice to experiment with it there","msgtype":"m.text"},"ts":1430380624000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"anyway to be clear I think when the dust settles for discuss.webplatform.org it will be  minus any of the docs.webplatform.org stuff, which at this point pretty clearly to everybody is now completely obviated by MDN (or clearly now always has been)","msgtype":"m.text"},"ts":1430380635000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"just please don't feed into killing new ideas for what to do with webplatform.org before anybody's had a chance to try more","msgtype":"m.text"},"ts":1430380688000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Well, what good stuff has happened there so far?","msgtype":"m.text"},"ts":1430380719000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"the basic goal here really is to try to faciliate more real colloboration","msgtype":"m.text"},"ts":1430380720000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: the specifiction stuff","msgtype":"m.text"},"ts":1430380741000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"It seems to me that happened elsewhere and just got folded in, as they tried to do with MDN and failed pretty drastically at","msgtype":"m.text"},"ts":1430380784000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"which is just changing from being run at Robin's own domain into being something that tries to fit in with a bigger picture around collaboration","msgtype":"m.text"},"ts":1430380800000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"no the analogy would be more like MDN having been moved to a new domain","msgtype":"m.text"},"ts":1430380831000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"so it's not a fair comparison","msgtype":"m.text"},"ts":1430380847000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"philipj: yo","msgtype":"m.text"},"ts":1430381805000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"philipj: I guess you can rename that repo now","msgtype":"m.text"},"ts":1430381813000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"philipj: let me know when you're all set up and then I can add the commit hook and such","msgtype":"m.text"},"ts":1430381845000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: looks like fixing file URLs on windows will be easier than you thought: https://github.com/jsdom/whatwg-url/commit/c13670dffdef1f31cb53d9c342076a27a5742760","msgtype":"m.text"},"ts":1430382034000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: the lack of tests is disturbing","msgtype":"m.text"},"ts":1430382075000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: heh yeah that commit was 14 commits ago before he put the web-platform-tests in place. It was just a prototype.","msgtype":"m.text"},"ts":1430382101000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Ah okay","msgtype":"m.text"},"ts":1430382110000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I am pretty sure Sebmaster is waiting to get 100% pass rate on web-platform-tests before starting to make spec modifications","msgtype":"m.text"},"ts":1430382123000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I am hopeful that we can convince Sebmaster to start submitting PRs to url.spec.whatwg.org :). We can probably tackle lots of the cases at https://url.spec.whatwg.org/interop/test-results/?select=current too","msgtype":"m.text"},"ts":1430382149000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Do you think he's willing to help edit the spec? Sam hasn't really been making progress and I don't think the diagramification of parsing is the way to go anymore...","msgtype":"m.text"},"ts":1430382171000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Sounds good","msgtype":"m.text"},"ts":1430382182000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yeah I mean even if he's not then I might be up for doing literal translation from JS to spec-ese since the implementation follows the spec so closely it should be quite easy","msgtype":"m.text"},"ts":1430382207000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Agreed that diagramification was not so great... I mean I think state machines are pretty reasonable for implementers. Maybe not for authors, but that's a separate issue IMO.","msgtype":"m.text"},"ts":1430382295000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"is very surprised","msgtype":"m.emote"},"ts":1430382346000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"o/","msgtype":"m.text"},"ts":1430382373000,"senderName":"Sebmaster","senderId":"Sebmaster@irc"},
{"content":{"body":"I slightly prefer the functional variant SimonSapin came up with for Rust, I think that could work well in the specification and make it a little easier to comprehend","msgtype":"m.text"},"ts":1430382435000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Not sure if I'm good at writing specs","msgtype":"m.text"},"ts":1430382447000,"senderName":"Sebmaster","senderId":"Sebmaster@irc"},
{"content":{"body":"But I could live with keeping the current state-based version","msgtype":"m.text"},"ts":1430382460000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Sebmaster: it's translating code to English and coming up with \"good\" terms","msgtype":"m.text"},"ts":1430382478000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"my modification to the algorithm is buggy at the moment in any case, it doesn't work well with resolving //C:/abc on base file:///D:/","msgtype":"m.text"},"ts":1430382515000,"senderName":"Sebmaster","senderId":"Sebmaster@irc"},
{"content":{"body":"Hmm.  No matches for that, Sebmaster.","msgtype":"m.text"},"ts":1430382516000,"senderName":"botie","senderId":"botie@irc"},
{"content":{"body":"but that shouldnt be hard to fix","msgtype":"m.text"},"ts":1430382521000,"senderName":"Sebmaster","senderId":"Sebmaster@irc"},
{"content":{"body":"wait, what triggered botie, that was weird","msgtype":"m.text"},"ts":1430382617000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: yeah I guess that triggered the thing in botie where looks for \"x is y\" stuff but not sure why botie seems to have thought Sebmaster was asking for a match for something","msgtype":"m.text"},"ts":1430383041000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"annevk: richt and I are setting it up right now, I'll ping you shortly","msgtype":"m.text"},"ts":1430383469000,"senderName":"philipj","senderId":"philipj@irc"},
{"content":{"body":"philipj: cool, I agree that the renaming is better","msgtype":"m.text"},"ts":1430383529000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"philipj: GitHub takes care of redirects and you keep everyone that already starred and forked engaged","msgtype":"m.text"},"ts":1430383556000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I didn't know about renames before Marcos told me yesterday :)","msgtype":"m.text"},"ts":1430383993000,"senderName":"philipj","senderId":"philipj@irc"},
{"content":{"body":"annevk: https://github.com/whatwg/mediasession now has a mediasession.html, any time the master branch changes we'd like that to be published to https://mediasession.spec.whatwg.org","msgtype":"m.text"},"ts":1430384310000,"senderName":"philipj","senderId":"philipj@irc"},
{"content":{"body":"philipj: it's live","msgtype":"m.text"},"ts":1430384735000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"philipj: you need to update some links in the spec to reflect the new GitHub URL","msgtype":"m.text"},"ts":1430384757000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"philipj: I also have it on my todo list to hook up automatic compilation so you don't have to commit output to repos","msgtype":"m.text"},"ts":1430384895000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"philipj: you also need a logo :p","msgtype":"m.text"},"ts":1430386333000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Oh yeah, annevk","msgtype":"m.text"},"ts":1430387221000,"senderName":"Sebmaster","senderId":"Sebmaster@irc"},
{"content":{"body":"the url test suite expects some test cases to fail; does \"fail\" in that context mean parse error or return failure?","msgtype":"m.text"},"ts":1430387257000,"senderName":"Sebmaster","senderId":"Sebmaster@irc"},
{"content":{"body":"Sebmaster: not sure","msgtype":"m.text"},"ts":1430388187000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Sebmaster: prolly return failure","msgtype":"m.text"},"ts":1430388197000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah, i think so too","msgtype":"m.text"},"ts":1430388207000,"senderName":"Sebmaster","senderId":"Sebmaster@irc"},
{"content":{"body":"Sebmaster: I don't think parse errors are tested","msgtype":"m.text"},"ts":1430388222000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"since as far as i read, parse errors arent even exposed on the final url object?","msgtype":"m.text"},"ts":1430388234000,"senderName":"Sebmaster","senderId":"Sebmaster@irc"},
{"content":{"body":"Anyone experience with WiFi repeaters? Wondering whether to buy an Airport Express since there's some lag between floors...","msgtype":"m.text"},"ts":1430388250000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Sebmaster: correct, they're an error console affair","msgtype":"m.text"},"ts":1430388264000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Sebmaster: well, potential error console affair","msgtype":"m.text"},"ts":1430388274000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Sebmaster: it's not entirely clear what we want to do with them yet","msgtype":"m.text"},"ts":1430388288000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: cheers for responses yestrerday","msgtype":"m.text"},"ts":1430388294000,"senderName":"SteveF_","senderId":"SteveF_@irc"},
{"content":{"body":"14 test cases still failing then, most of them due to unicode / host verification","msgtype":"m.text"},"ts":1430388369000,"senderName":"Sebmaster","senderId":"Sebmaster@irc"},
{"content":{"body":"Sounds like we need more tests","msgtype":"m.text"},"ts":1430388408000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"i think i won't be able to continue with host validation without someone implementing this flavor of TR46 in JS :(","msgtype":"m.text"},"ts":1430391009000,"senderName":"Sebmaster","senderId":"Sebmaster@irc"},
{"content":{"body":"Sebmaster: I think rubys might have done so. At least, he has a JS implementation that passes all the tests.","msgtype":"m.text"},"ts":1430391151000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"where's that?","msgtype":"m.text"},"ts":1430391163000,"senderName":"Sebmaster","senderId":"Sebmaster@irc"},
{"content":{"body":"https://github.com/rubys/url/tree/peg.js/reference-implementation I think... there's some Ruby-to-JS stuff going on...","msgtype":"m.text"},"ts":1430391207000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"ah, that retrieves the mapping table thing","msgtype":"m.text"},"ts":1430391315000,"senderName":"Sebmaster","senderId":"Sebmaster@irc"},
{"content":{"body":"then https://github.com/rubys/url/blob/peg.js/url.pegjs#L600-L616","msgtype":"m.text"},"ts":1430391336000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"annevk: awesome, thanks you!","msgtype":"m.text"},"ts":1430395559000,"senderName":"philipj","senderId":"philipj@irc"},
{"content":{"body":"Domenic: that would be cleaner, but I quite like that I can go back in the history of specs to see what they looked like at each point, which is a lot harder if toolchains and build scripts change over the years","msgtype":"m.text"},"ts":1430395617000,"senderName":"philipj","senderId":"philipj@irc"},
{"content":{"body":"philipj: Domenic keeps static snapshots for that","msgtype":"m.text"},"ts":1430395734000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: in a separate repo?","msgtype":"m.text"},"ts":1430395749000,"senderName":"philipj","senderId":"philipj@irc"},
{"content":{"body":"philipj: no repo, similar to what browsers do for nightly builds","msgtype":"m.text"},"ts":1430395769000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"auto-generated and uploaded to the server on every push. https://streams.spec.whatwg.org/commit-snapshots","msgtype":"m.text"},"ts":1430395783000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"oh, I guess that works if you're looking for a specific version","msgtype":"m.text"},"ts":1430395798000,"senderName":"philipj","senderId":"philipj@irc"},
{"content":{"body":"https://streams.spec.whatwg.org/commit-snapshots/?C=M;O=D gives a nice chronological view too","msgtype":"m.text"},"ts":1430396016000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"annevk: is the webhook installed now? https://mediasession.spec.whatwg.org/ is no longer in sync with Git","msgtype":"m.text"},"ts":1430396369000,"senderName":"philipj","senderId":"philipj@irc"},
{"content":{"body":"or does it update once an hour or something?","msgtype":"m.text"},"ts":1430396379000,"senderName":"philipj","senderId":"philipj@irc"},
{"content":{"body":"philipj: oh maybe I forgot to set chmod","msgtype":"m.text"},"ts":1430396419000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"philipj: seems to work?","msgtype":"m.text"},"ts":1430396549000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: now it's up to date, did you have to poke something?","msgtype":"m.text"},"ts":1430396591000,"senderName":"philipj","senderId":"philipj@irc"},
{"content":{"body":"philipj: well I poked something that should be poked automatically","msgtype":"m.text"},"ts":1430396606000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: hmm, is the webhook on a specific port that needs to be opened?","msgtype":"m.text"},"ts":1430396639000,"senderName":"philipj","senderId":"philipj@irc"},
{"content":{"body":"(that's how I did mine)","msgtype":"m.text"},"ts":1430396645000,"senderName":"philipj","senderId":"philipj@irc"},
{"content":{"body":"philipj: no","msgtype":"m.text"},"ts":1430396650000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"philipj: it says it already worked a couple times successfully","msgtype":"m.text"},"ts":1430396669000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"philipj: perhaps you had a cache hit?","msgtype":"m.text"},"ts":1430396680000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I reloaded a bunch, so I don't think so","msgtype":"m.text"},"ts":1430396735000,"senderName":"philipj","senderId":"philipj@irc"},
{"content":{"body":"philipj: hmm let me know if this persists","msgtype":"m.text"},"ts":1430396746000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: where are the logs on the server so I can check myself if it fails again?","msgtype":"m.text"},"ts":1430396748000,"senderName":"philipj","senderId":"philipj@irc"},
{"content":{"body":"philipj: in logs top-level dir","msgtype":"m.text"},"ts":1430396758000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I guess it's not on the same machine as html5.org where I'm looking?","msgtype":"m.text"},"ts":1430396843000,"senderName":"philipj","senderId":"philipj@irc"},
{"content":{"body":"philipj: oh right","msgtype":"m.text"},"ts":1430396851000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"philipj: let me try to copy your key to this other server too","msgtype":"m.text"},"ts":1430396969000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I guess I can then just ssh to mediasession.spec.whatwg.org?","msgtype":"m.text"},"ts":1430397021000,"senderName":"philipj","senderId":"philipj@irc"},
{"content":{"body":"philipj: yeah, if only I could figure out how to copy a line from nano","msgtype":"m.text"},"ts":1430397042000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: ctrl+k, but I don't know if that puts it in any clipboard","msgtype":"m.text"},"ts":1430397149000,"senderName":"philipj","senderId":"philipj@irc"},
{"content":{"body":"doesn't","msgtype":"m.text"},"ts":1430397167000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: I feel like you hijacked that thread a bit... oh well, hopefully everyone can still follow","msgtype":"m.text"},"ts":1430399327000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I was trying to come up with a way to solve the \"when do we call distributeCallback\" and \"how do we get consistency on offsetTop etc.\" problem.","msgtype":"m.text"},"ts":1430399370000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"we can't","msgtype":"m.text"},"ts":1430399386000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"that's why you throw offsetTop of the rails","msgtype":"m.text"},"ts":1430399399000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"it wasn't clear to me at the time. last message helps a bit.","msgtype":"m.text"},"ts":1430399433000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"To understand this is a bit like baking apple pie","msgtype":"m.text"},"ts":1430399482000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Actually, the first invent the universe analogy doesn't hold up too well","msgtype":"m.text"},"ts":1430399525000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: so Layout is async. But offsetTop forces Layout to be sync.","msgtype":"m.text"},"ts":1430399564000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: Distribution is async but needs to happen before Layout. So offsetTop forces it to be sync.","msgtype":"m.text"},"ts":1430399589000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"sure. still seems OK to me for .offsetTop to invoke distributeCallback.","msgtype":"m.text"},"ts":1430399591000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"why is distribution async","msgtype":"m.text"},"ts":1430399596000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: well say it's sync","msgtype":"m.text"},"ts":1430399623000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: then modifying the DOM invokes distribution sync","msgtype":"m.text"},"ts":1430399634000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Domenic: and then we have mutation events back","msgtype":"m.text"},"ts":1430399640000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"we want sync mutation events less than we want offsetTop to work, imo","msgtype":"m.text"},"ts":1430399667000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"maybe. I dunno, I can see authors adding `set offsetTop(v) { this.distribute(); super.offsetTop = v; }` etc. to get the behavior back.","msgtype":"m.text"},"ts":1430399713000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"seems fine","msgtype":"m.text"},"ts":1430399731000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"and they could likewise overload appendChild and such like that","msgtype":"m.text"},"ts":1430399740000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah, someone will make a mixin that just overrides everything necessary.","msgtype":"m.text"},"ts":1430399758000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"almost some sort of ... shadow DOM polyfill ....","msgtype":"m.text"},"ts":1430399774000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"which is why I'd prefer not do anything with timing or doing anything automatically for v1","msgtype":"m.text"},"ts":1430399778000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"although timing equivalent to mutation observers seems reasonable and not too hard to add","msgtype":"m.text"},"ts":1430399810000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TabAtkins: so if I want to link \"environment settings object\" in HTML, what's the easiest way to do that?","msgtype":"m.text"},"ts":1430409214000,"senderName":"annevk_","senderId":"annevk_@irc"},
{"content":{"body":"annevk: have to be careful here with offsetTop et al.","msgtype":"m.text"},"ts":1430410142000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"I agree they're terrible APIs, but they also are widely used","msgtype":"m.text"},"ts":1430410159000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"so we need to make darn sure we don't turn the distribution API into something that you can only use on in a small set of the web that doesn't use these terrible APIs","msgtype":"m.text"},"ts":1430410207000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"As long as we leave timing to users of the API there's no problem","msgtype":"m.text"},"ts":1430410249000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"can you explain this a bit more?","msgtype":"m.text"},"ts":1430410262000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"Distribution only happens when you invoke distribute()","msgtype":"m.text"},"ts":1430410278000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"btw, my concern is captured well here: https://gist.github.com/rniwa/2f14588926e1a11c65d3#extention-to-custom-elements-for-consistency","msgtype":"m.text"},"ts":1430410321000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"I think the question is: who needs to invoke the distribute()? In a situation where component is developed by dev A and is being used by dev B, specifically.","msgtype":"m.text"},"ts":1430410391000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"annevk: well, we may need to define some way to trigger callbacks at the end of nanotasks, in order to have distribution happening early enough","msgtype":"m.text"},"ts":1430410436000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"what if we just run them in a separate environment, pure-function-style","msgtype":"m.text"},"ts":1430410474000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"?","msgtype":"m.text"},"ts":1430410475000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"don't understand that question","msgtype":"m.text"},"ts":1430410500000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"separate environment?","msgtype":"m.text"},"ts":1430410533000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"run distribution callback in a separate script environment, with no access to the docs global","msgtype":"m.text"},"ts":1430410534000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"like, adding isolation ;)","msgtype":"m.text"},"ts":1430410542000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"sort of, except in a very limited way","msgtype":"m.text"},"ts":1430410552000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"like a pure function, where there's really nothing else but the arguments of the function","msgtype":"m.text"},"ts":1430410570000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"that way, there will never be a problem with timing and we don't have to specify how the execution of the distribution callback correlates with the style resolution or anything like that","msgtype":"m.text"},"ts":1430410613000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"well, if arguments are like nodelists, you can access the global object from there","msgtype":"m.text"},"ts":1430410628000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"they would be some dumb objects","msgtype":"m.text"},"ts":1430410639000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"oh, some kind of weird proxy objects around the actual nodes","msgtype":"m.text"},"ts":1430410664000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"like a serialization of an element","msgtype":"m.text"},"ts":1430410670000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"or a proxy","msgtype":"m.text"},"ts":1430410676000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"s/weird/dummy/","msgtype":"m.text"},"ts":1430410677000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"waves hands","msgtype":"m.emote"},"ts":1430410684000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"I'm not sure that's gonna work","msgtype":"m.text"},"ts":1430410878000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"that would defeat things like using Media Queries as input to distribute nodes","msgtype":"m.text"},"ts":1430410892000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"or require adding all those APIs in an \"separate script environment\"","msgtype":"m.text"},"ts":1430410907000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"true","msgtype":"m.text"},"ts":1430410935000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"dglazkov: A needs to invoke distribute(), though B could too I suppose if it's not closed","msgtype":"m.text"},"ts":1430410935000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smaug____: do we need to do that for v1?","msgtype":"m.text"},"ts":1430410960000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"add a flag to MutationObserver whether it should be called at the end of microtask or nanotask, and let shadow dom users then call distribute if needed ?","msgtype":"m.text"},"ts":1430410962000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"annevk: when does A invoke distribute(), then?","msgtype":"m.text"},"ts":1430410983000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"smaug____: nanotask observers seems useful, but I wonder whether we need it for v1","msgtype":"m.text"},"ts":1430410992000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: maybe not for v1, but need to think about v2 too a bit","msgtype":"m.text"},"ts":1430410993000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"dglazkov: whenever they think that is needed","msgtype":"m.text"},"ts":1430410999000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I would like to flesh this out a bit more :)","msgtype":"m.text"},"ts":1430411021000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"dglazkov: I think I would put advice to devs to use mutation observers","msgtype":"m.text"},"ts":1430411099000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"dglazkov: but they have the freedom to call it at other times or provide hooks to the outside world, etc.","msgtype":"m.text"},"ts":1430411120000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah, I like the freedom distribute() gives","msgtype":"m.text"},"ts":1430411151000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"we're just missing the nanotask-like thing from the platform atm, and that will be needed at some point","msgtype":"m.text"},"ts":1430411178000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"(perhaps we need nanotasks only for DOM mutations, so it wouldn't be a generic thing, but MutationObserver only)","msgtype":"m.text"},"ts":1430411214000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"nanotasks are like IDL exit callbacks","msgtype":"m.text"},"ts":1430411226000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"let's try to make this a bit more concrete: https://gist.github.com/dglazkov/bdbe817b9cce48e4d072","msgtype":"m.text"},"ts":1430411227000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"when does A have a chance to run distribute in that gist?","msgtype":"m.text"},"ts":1430411244000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"dglazkov: as I said elsewhere that fails","msgtype":"m.text"},"ts":1430411260000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"dglazkov: though not with a future nanotasks thingie","msgtype":"m.text"},"ts":1430411270000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"dglazkov: here is the tradeoff: https://lists.w3.org/Archives/Public/public-webapps/2015AprJun/0450.html","msgtype":"m.text"},"ts":1430411285000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"dglazkov: if you can defeat the tradeoff you win, but otherwise we should just make a choice and move on","msgtype":"m.text"},"ts":1430411302000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: we don't want distribute() to be called at the end of any nanotask, only after dom mutations, I think","msgtype":"m.text"},"ts":1430411314000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"annevk: I am confused. Are you saying that you would put the burden on B to make this work?","msgtype":"m.text"},"ts":1430411336000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"smaug____: I agree that we want to scope nanotasks","msgtype":"m.text"},"ts":1430411339000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"dglazkov: yeah","msgtype":"m.text"},"ts":1430411357000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: that means that shadow DOM components can't be used in pretty much any framework that exists today.","msgtype":"m.text"},"ts":1430411378000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"that seems... drastic?","msgtype":"m.text"},"ts":1430411387000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"dglazkov: again see tradeoff?","msgtype":"m.text"},"ts":1430411392000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I saw the link, but I am not sure that the cost of web component not being adopted anywhere in any foreseable future is worth the benefit in this trade-off","msgtype":"m.text"},"ts":1430411477000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"right?","msgtype":"m.text"},"ts":1430411494000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"I mean.. the whole point of web components is to conform to DOM contract that exists currently","msgtype":"m.text"},"ts":1430411513000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"dglazkov: I don't think there's another tradeoff?","msgtype":"m.text"},"ts":1430411545000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"the separate environment is one","msgtype":"m.text"},"ts":1430411569000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"you're trading hypothetical media query use cases for being able to satisfy all other requirements","msgtype":"m.text"},"ts":1430411605000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"dglazkov: that seems very unlikely to happen to me","msgtype":"m.text"},"ts":1430411610000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"tell me more","msgtype":"m.text"},"ts":1430411672000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"As far as I know this has been a research area for TC39 for quite a while","msgtype":"m.text"},"ts":1430411702000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"oh, I see","msgtype":"m.text"},"ts":1430411716000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"At least subclassing was a somewhat concrete idea when we started Shadow DOM","msgtype":"m.text"},"ts":1430411716000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I mean, Web Components","msgtype":"m.text"},"ts":1430411727000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"you're worried that if we pursue true pure functions, we'll be blocked on TC39 for a while","msgtype":"m.text"},"ts":1430411754000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"Another five years?","msgtype":"m.text"},"ts":1430411778000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"that seems _awesome_","msgtype":"m.text"},"ts":1430411791000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":":D","msgtype":"m.text"},"ts":1430411797000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"would like to ship something...","msgtype":"m.emote"},"ts":1430411799000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"dglazkov: so nanotasks?","msgtype":"m.text"},"ts":1430411815000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"dglazkov: mutation observer nanotasks, that is","msgtype":"m.text"},"ts":1430411829000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"dglazkov: that gives A a callback at the end of B's call to appendChild(), which can invoke distribute(), which means B's call to offset gets the right answer","msgtype":"m.text"},"ts":1430411868000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"you know what","msgtype":"m.text"},"ts":1430411892000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"maybe!","msgtype":"m.text"},"ts":1430411895000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"let me think about this","msgtype":"m.text"},"ts":1430411898000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"Hahaha","msgtype":"m.text"},"ts":1430413337000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"<a>origin</a> links to http://dev.w3.org/csswg/css-cascade-4/#origin","msgtype":"m.text"},"ts":1430413349000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"TabAtkins: so what I'd like is something like <a from=html>origin</a>","msgtype":"m.text"},"ts":1430413579000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Pure functions can be defined without TC39 I think","msgtype":"m.text"},"ts":1430414993000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"You serialize the function to a string","msgtype":"m.text"},"ts":1430415000000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"If it works in the other environment then it's pure","msgtype":"m.text"},"ts":1430415012000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"That is what came up when I asked TC39 about this","msgtype":"m.text"},"ts":1430415032000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: you can also parse out if a function is pure, but it is pricey in JS","msgtype":"m.text"},"ts":1430415325000,"senderName":"bradleymeck","senderId":"bradleymeck@irc"},
{"content":{"body":"parse/analyze","msgtype":"m.text"},"ts":1430415345000,"senderName":"bradleymeck","senderId":"bradleymeck@irc"},
{"content":{"body":"jgraham: I think this one is ready for merge: https://critic.hoppipolla.co.uk/r/4838","msgtype":"m.text"},"ts":1430416978000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: Done. How many of your PRs are left?","msgtype":"m.text"},"ts":1430417436000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Just one?","msgtype":"m.text"},"ts":1430417461000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"jgraham: just one :-) https://critic.hoppipolla.co.uk/r/4825","msgtype":"m.text"},"ts":1430417462000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"OK, I'll kick off an update in gecko as soon as that one gets reviewed","msgtype":"m.text"},"ts":1430417506000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"and merged","msgtype":"m.text"},"ts":1430417509000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Domenic: how quickly can we confirm/reject the hypothesis that we don't need TC39 for pure functions?","msgtype":"m.text"},"ts":1430417822000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"I would like to keep all ideas on the table","msgtype":"m.text"},"ts":1430417838000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"do we even need pure functions?","msgtype":"m.text"},"ts":1430417848000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"trys to follow shadow dom/web components discussion, totally out of my league","msgtype":"m.emote"},"ts":1430418169000,"senderName":"SteveF_","senderId":"SteveF_@irc"},
{"content":{"body":"botie, inform SteveF_ re: \"SteveF_ trys to follow shadow dom/web components discussion, totally out of my league\", you're in good company. I think the set of people who actually understand all of this well can be counted on two hands","msgtype":"m.text"},"ts":1430418826000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"will do","msgtype":"m.text"},"ts":1430418826000,"senderName":"botie","senderId":"botie@irc"},
{"content":{"body":"trevnorris, re: optimizing subclasses, i wouldn't expect hydrogen to deal with them, but turbofan might already","msgtype":"m.text"},"ts":1430419376000,"senderName":"caitp-","senderId":"caitp-@irc"},
{"content":{"body":"caitp-: not as of 4.4.44. was trying to get some info out for IRHydra and there was no output.","msgtype":"m.text"},"ts":1430419420000,"senderName":"trevnorris","senderId":"trevnorris@irc"},
{"content":{"body":"does IRHydra deal with TF at all?","msgtype":"m.text"},"ts":1430419445000,"senderName":"caitp-","senderId":"caitp-@irc"},
{"content":{"body":"yup.","msgtype":"m.text"},"ts":1430419456000,"senderName":"trevnorris","senderId":"trevnorris@irc"},
{"content":{"body":"anyways, it will end up optimized in TF at some point","msgtype":"m.text"},"ts":1430419471000,"senderName":"caitp-","senderId":"caitp-@irc"},
{"content":{"body":"no doubt. it just threw me when there wasn't any output. thought there was something wrong with the internal V8 tracing.","msgtype":"m.text"},"ts":1430419502000,"senderName":"trevnorris","senderId":"trevnorris@irc"},
{"content":{"body":"dglazkov: we can do a slow polyfill (web workers + actual JS serialization) in a day or two.","msgtype":"m.text"},"ts":1430421022000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"SteveF_, at 2015-04-30 18:33 UTC, MikeSmith said: re: \"SteveF_ trys to follow shadow dom/web components discussion, totally out of my league\", you're in good company. I think the set of people who actually understand all of this well can be counted on two hands","msgtype":"m.text"},"ts":1430421335000,"senderName":"botie","senderId":"botie@irc"},
{"content":{"body":"botie: gotcha player ;-)","msgtype":"m.text"},"ts":1430421400000,"senderName":"SteveF_","senderId":"SteveF_@irc"},
{"content":{"body":"SteveF_: i'm not following you...","msgtype":"m.text"},"ts":1430421400000,"senderName":"botie","senderId":"botie@irc"},
{"content":{"body":"Anyone know why this expects to throw an error? https://github.com/w3c/web-platform-tests/blob/master/workers/interfaces/WorkerGlobalScope/close/setTimeout.html","msgtype":"m.text"},"ts":1430421496000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Domenic: its unfortunate Response.body.getReader() does not have backpressure yet","msgtype":"m.text"},"ts":1430424838000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"I guess I can build backpressure at the app level","msgtype":"m.text"},"ts":1430424896000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"Hixie: Did the spec at some point change so that a worker that does close(); setTimeout(function(){},0) would no longer fire an error event?","msgtype":"m.text"},"ts":1430429182000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"MikeSmith: can you give rniwa w3c/webcomponents commit bit?","msgtype":"m.text"},"ts":1430429873000,"senderName":"dglazkov","senderId":"dglazkov@irc"},
{"content":{"body":"JakeA: w/r/t your tweet, it's something I certainly want to do","msgtype":"m.text"},"ts":1430430546000,"senderName":"terinjokes","senderId":"terinjokes@irc"},
{"content":{"body":"annevk: You're looking for the spec='' attribute.  The problem, though, is that HTML is really incredibly terrible for Bikeshed links.  Nothing is \"exported\", in Bikeshed's terms, and it's all typed as \"dfn\" type definitions.  That's why CSS's \"origin\" definition is winning; Bikeshed prefers exported definitions by default.","msgtype":"m.text"},"ts":1430432556000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"After I finish up this File API spec, though, I'm gonna roll up something to do some manual link-adding, so we can put HTML terms in manually and let everyone use them.","msgtype":"m.text"},"ts":1430432603000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"(Technically I can add custom definitions right now, but they all get interpreted as being \"local\" definitions, which auto-win over cross-spec defs, which isn't the behavior I want here.  It won't be hard to fix.)","msgtype":"m.text"},"ts":1430432660000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"annevk: For arbitrary terms that you want to link to in a one-off fashion, tho, just add them to the <pre class=anchors> block in your spec.  There should already be a bunch of HTML anchors in there, so it'll be obvious how to do so.","msgtype":"m.text"},"ts":1430432745000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"annevk: Oh man, just realized why a bunch of terms aren't linking to DOM; they're not exported either.  Do you want a PR for exporting all the stuff, or is it okay for me to push directly to the spec?","msgtype":"m.text"},"ts":1430433468000,"senderName":"TabAtkins","senderId":"TabAtkins@irc"},
{"content":{"body":"dglazkov: Yeah will try to do that right now (from my mobile) cc rniwa","msgtype":"m.text"},"ts":1430437034000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"dglazkov: Ok, invite sent","msgtype":"m.text"},"ts":1430437274000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"rniwa: you should have perms now","msgtype":"m.text"},"ts":1430437300000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"}
]