[
{"content":{"body":"mathiasbynens: is the note at https://html.spec.whatwg.org/multipage/obsolete.html#dom-document-all still accurate? (“These requirements are a willful violation of the JavaScript specification current at the time of writing…”) cc Domenic","msgtype":"m.text"},"ts":1471235180000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"yep","msgtype":"m.text"},"ts":1471235190000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I wonder if we should bother trying to get ES to allow those things... document.all is such a one-off","msgtype":"m.text"},"ts":1471235230000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"oh hey Domenic","msgtype":"m.text"},"ts":1471235308000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"wasn’t sure you were still awake","msgtype":"m.text"},"ts":1471235323000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"so I guess that requirement was out of scope for the WHATWG JavaScript spec anyway","msgtype":"m.text"},"ts":1471235351000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"anyway yeah I guess it is maybe not worth escalating to ES","msgtype":"m.text"},"ts":1471235382000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Yeah I'm unsure myself","msgtype":"m.text"},"ts":1471235388000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"I just noticed it because of https://twitter.com/luke_dot_js/status/764291949863985153","msgtype":"m.text"},"ts":1471235398000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"and https://twitter.com/dazabani/status/764428885081460736","msgtype":"m.text"},"ts":1471235409000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I mean if you defined it in ES you'd define some kind of generic concept (e.g. what V8 calls \"undetectable object\")","msgtype":"m.text"},"ts":1471235409000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"oh","msgtype":"m.text"},"ts":1471235415000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but then you'd want people to never use that generic concept, except for document.all","msgtype":"m.text"},"ts":1471235428000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"that is an turn of phrase, \"undetectable object","msgtype":"m.text"},"ts":1471235438000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"oh man","msgtype":"m.text"},"ts":1471235445000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"in general the way ES defines things in abstract terms seems really odd to me","msgtype":"m.text"},"ts":1471235524000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I guess it enables stuff liek that when you need it","msgtype":"m.text"},"ts":1471235537000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"so there is probably a lot of other utility to it that I don not have insight into","msgtype":"m.text"},"ts":1471235561000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"and anyway I have never read specs for other programming languages","msgtype":"m.text"},"ts":1471235588000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"maybe this is how they all do things","msgtype":"m.text"},"ts":1471235599000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Domenic: does https://github.com/whatwg/html/pull/1516 affect the case of using <style>@import url( '/common-style.css' )</style> inside shadow dom?","msgtype":"m.text"},"ts":1471241570000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"or is it meant to?","msgtype":"m.text"},"ts":1471241575000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"hayato: ⬆","msgtype":"m.text"},"ts":1471241888000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"We have not discussed it yet for  <style>@import url( '/common-style.css' )</style>, I think.","msgtype":"m.text"},"ts":1471242128000,"senderName":"hayato","senderId":"hayato@irc"},
{"content":{"body":"The issue is https://github.com/w3c/webcomponents/issues/56","msgtype":"m.text"},"ts":1471242274000,"senderName":"hayato","senderId":"hayato@irc"},
{"content":{"body":"hayato: super, thanks","msgtype":"m.text"},"ts":1471242618000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"ah I see rniwa asked specifically about that case in https://github.com/w3c/webcomponents/issues/56#issuecomment-234480024","msgtype":"m.text"},"ts":1471242690000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"anyway, devs are using <template>…<style>@import url( '/common-style.css' )</style> in the wild now, so if UAs change to not supporting that, it’s gonna break some things","msgtype":"m.text"},"ts":1471242825000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"https://github.com/w3c/webpayments-payment-apps-api/blob/gh-pages/proposals/jsapi.md#invocation","msgtype":"m.text"},"ts":1471250650000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"see the bulleted list","msgtype":"m.text"},"ts":1471250660000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"“A global property can only be set by the user agent or the payment app itself. Therefore, the payment app can be assured that requests it receives originate from the user agent. This ensures that an arbitrary origin is unable to instantiate a payment app and impersonate this API.”","msgtype":"m.text"},"ts":1471250681000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"do we have any precedent for something like that?","msgtype":"m.text"},"ts":1471250695000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"oh maybe http://w3c.github.io/webrtc-pc/#sec.create-identity-proxy","msgtype":"m.text"},"ts":1471250713000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"ah yeah it is pretty much exactly the same as that","msgtype":"m.text"},"ts":1471250738000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: Domenic: filed https://github.com/tc39/ecma262/issues/668 to see what folks say about document.all today","msgtype":"m.text"},"ts":1471257543000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"how much stuff actually breaks if a browser stopped doing weird things for HTMLAllCollection ?","msgtype":"m.text"},"ts":1471282396000,"senderName":"caitp","senderId":"caitp@irc"},
{"content":{"body":"caitp: like the ToBoolean stuff?","msgtype":"m.text"},"ts":1471282444000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"document.all == undefined, and all the rest","msgtype":"m.text"},"ts":1471282460000,"senderName":"caitp","senderId":"caitp@irc"},
{"content":{"body":"Last use counters I saw said something like 2% of all pages","msgtype":"m.text"},"ts":1471282504000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"as far as I remember, you basically have to have document.attachEvent among other non-standard APIs if you don't hide document.all","msgtype":"m.text"},"ts":1471282543000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"by use counters, yabut that's presumably measuring use of document.all, not necessarily brokenness of document.all not being all weird?","msgtype":"m.text"},"ts":1471282547000,"senderName":"caitp","senderId":"caitp@irc"},
{"content":{"body":"Measuring cases where the weirdness gets triggered","msgtype":"m.text"},"ts":1471282566000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"if we added a bunch more duplicate APIs it /might/ not break that much","msgtype":"m.text"},"ts":1471282578000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"but not necessarily a better thing","msgtype":"m.text"},"ts":1471282604000,"senderName":"caitp","senderId":"caitp@irc"},
{"content":{"body":"(at the same time, having those other APIs may throw you down other non-standard codepaths that will break in different ways)","msgtype":"m.text"},"ts":1471282656000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"well, getting rid of it some day is a nice pipedream anyway","msgtype":"m.text"},"ts":1471282762000,"senderName":"caitp","senderId":"caitp@irc"},
{"content":{"body":"the bit on v8 hidden classes that decides whether an object behaves like document.all or not could be put to better use","msgtype":"m.text"},"ts":1471282792000,"senderName":"caitp","senderId":"caitp@irc"},
{"content":{"body":"are they actually that much in need? (the bits I mean?)","msgtype":"m.text"},"ts":1471283160000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"well you wouldn't want to add another word to those structures when you need more bits","msgtype":"m.text"},"ts":1471283329000,"senderName":"caitp","senderId":"caitp@irc"},
{"content":{"body":"but reclaiming the bit would only be a small part of cleaning it up","msgtype":"m.text"},"ts":1471283358000,"senderName":"caitp","senderId":"caitp@irc"},
{"content":{"body":"maybe some day *-*","msgtype":"m.text"},"ts":1471283388000,"senderName":"caitp","senderId":"caitp@irc"},
{"content":{"body":"well, I mean, it's not like it's a bit on every object","msgtype":"m.text"},"ts":1471283414000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"it absolutely is","msgtype":"m.text"},"ts":1471283423000,"senderName":"caitp","senderId":"caitp@irc"},
{"content":{"body":"it is? not just on each class?","msgtype":"m.text"},"ts":1471283440000,"senderName":"gsnedders","senderId":"gsnedders@irc"},
{"content":{"body":"well, depends how much map sharing is going on in a given codebase","msgtype":"m.text"},"ts":1471283497000,"senderName":"caitp","senderId":"caitp@irc"},
{"content":{"body":"but the bit isn't the big win for getting rid of it, really the win is getting rid of support for some weirdness that only one thing really uses or cares about","msgtype":"m.text"},"ts":1471283608000,"senderName":"caitp","senderId":"caitp@irc"},
{"content":{"body":"admittedly, it doesn't make that much of a difference, but getting rid of vestigial organs isn't bad or anything","msgtype":"m.text"},"ts":1471283715000,"senderName":"caitp","senderId":"caitp@irc"},
{"content":{"body":"caitp: There has been discussions about document.all recently.","msgtype":"m.text"},"ts":1471285331000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"caitp: https://github.com/whatwg/html/issues/775 https://github.com/whatwg/html/pull/780 https://github.com/whatwg/html/issues/1379","msgtype":"m.text"},"ts":1471285406000,"senderName":"nox","senderId":"nox@irc"}
]