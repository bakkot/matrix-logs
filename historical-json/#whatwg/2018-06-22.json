[
{"content":{"body":"heh","msgtype":"m.text"},"ts":1529626472000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I always like the laziest choice best","msgtype":"m.text"},"ts":1529626490000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"and whatever the opposite if overengineering is, that‚Äôs me","msgtype":"m.text"},"ts":1529626523000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"well maybe that‚Äôs under-engineering that would be not good I guess","msgtype":"m.text"},"ts":1529626555000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"just-right engineering, like Goldilocks and the three bears","msgtype":"m.text"},"ts":1529626593000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"anyway I think we right-engineered the hell out of this one","msgtype":"m.text"},"ts":1529626636000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I‚Äôm still auditing the output but so far what I‚Äôve seen all looks perfect","msgtype":"m.text"},"ts":1529626680000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"so I think we can land this very soon","msgtype":"m.text"},"ts":1529626819000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but yeah after that clearly the next step is to do caching","msgtype":"m.text"},"ts":1529626879000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I would imagine it‚Äôs possible that could be done just by having the highlight server send the right caching headers","msgtype":"m.text"},"ts":1529626954000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"Domenic: does it make sense for a task running in a worker event loop to queue a task to a browsing context's event loop without going in parallel?","msgtype":"m.text"},"ts":1529628809000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"Domenic: I'm looking at https://w3c.github.io/ServiceWorker/v1/#dom-windowclient-focus","msgtype":"m.text"},"ts":1529628823000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"Domenic: There it runs in parallel in the step 3 and it queues a task to the browsing context's event loop from its substeps","msgtype":"m.text"},"ts":1529628889000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"I'm curious if I can just queue a task directly to the browsing context without going in parallel there","msgtype":"m.text"},"ts":1529628927000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"jungkees: yeah, that makes sense. Good exception to the general rule.","msgtype":"m.text"},"ts":1529630439000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"jungkees: I guess the \"wait for task to be executed\" is the part that needs to be in paralllel","msgtype":"m.text"},"ts":1529630496000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: that's right. That bit has to wait for the queued task to finish, in parallel, and then I think I need to make it queue another task to the original worker thread to Create Window Client there","msgtype":"m.text"},"ts":1529631618000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"Domenic: Or can I even just queue a task to the browsing context and \"Wait for task to have executed, in parallel\", and then just run the rest of the steps assuming they are still in the original worker's even loop?","msgtype":"m.text"},"ts":1529631876000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"Domenic: is that what you meant?","msgtype":"m.text"},"ts":1529631885000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"Domenic: that'd conceptually sound like *await* ;). Queuing a new task from steps in parallel sounds like more accurate way to make it I guess","msgtype":"m.text"},"ts":1529632150000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"Yeah, I think queuing a new task is a bit better","msgtype":"m.text"},"ts":1529632425000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"jungkees: why not queue a task from the queued task? Seems simpler than ‚Äúwaiting‚Äù for it","msgtype":"m.text"},"ts":1529633109000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Q for WebIDL people: is https://heycam.github.io/webidl/#create-an-interface-object ever explicitly called?","msgtype":"m.text"},"ts":1529672583000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: I don't think so. There's a lot of \"create the X\" algorithms that eventually we hope to tie into a big old \"create a realm\" algorithm. But right now we are mid-refactoring from declarative \"X must exist\" to \"to create an X\"","msgtype":"m.text"},"ts":1529679532000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic, ok, thank","msgtype":"m.text"},"ts":1529679553000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"-s","msgtype":"m.text"},"ts":1529679556000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"M2ger","msgtype":"m.text"},"ts":1529691025000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: so what happens if a SharedArrayBuffer is transferred via postMessage() from a window to a ServiceWorker?  if window and ServiceWorker are in different agent clusters...","msgtype":"m.text"},"ts":1529691832000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"I think you're supposed to get a onmessageerror event","msgtype":"m.text"},"ts":1529691867000,"senderName":"Mek","senderId":"Mek@irc"},
{"content":{"body":"hmm, ok","msgtype":"m.text"},"ts":1529691889000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"and where does it say ServiceWorker is in a different agent cluster?","msgtype":"m.text"},"ts":1529691921000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"in the definition of agent clusters... let me find the spot...","msgtype":"m.text"},"ts":1529691932000,"senderName":"Mek","senderId":"Mek@irc"},
{"content":{"body":"https://html.spec.whatwg.org/multipage/webappapis.html#integration-with-the-javascript-agent-cluster-formalism","msgtype":"m.text"},"ts":1529691957000,"senderName":"Mek","senderId":"Mek@irc"},
{"content":{"body":"Mek: isn't agent cluster in the es spec? I didn't think it talked about DOM things","msgtype":"m.text"},"ts":1529691957000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"the concept is in the ES spec, but the actual equivalence relation is in the html spec","msgtype":"m.text"},"ts":1529691987000,"senderName":"Mek","senderId":"Mek@irc"},
{"content":{"body":"oh, I see","msgtype":"m.text"},"ts":1529691988000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"Mek: thanks!","msgtype":"m.text"},"ts":1529691991000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"ok... so dedicated workers seem like the only thing that can share memory","msgtype":"m.text"},"ts":1529692145000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"I guess that makes sense","msgtype":"m.text"},"ts":1529692150000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"and all windows in the same unit of related similar origin browsing contexts","msgtype":"m.text"},"ts":1529692181000,"senderName":"Mek","senderId":"Mek@irc"},
{"content":{"body":"(as those are all the same agent)","msgtype":"m.text"},"ts":1529692195000,"senderName":"Mek","senderId":"Mek@irc"},
{"content":{"body":"yea","msgtype":"m.text"},"ts":1529692605000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"Thanks Mek üòä","msgtype":"m.text"},"ts":1529693904000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"sorry for my confusion","msgtype":"m.text"},"ts":1529694262000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"No worries","msgtype":"m.text"},"ts":1529694755000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"This is rather new too","msgtype":"m.text"},"ts":1529694775000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"well, its nice that its a new thing for a change... usually its ancient legacy web behavior that I'm shocked to discover","msgtype":"m.text"},"ts":1529695105000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"Give it ten years","msgtype":"m.text"},"ts":1529695206000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: that was my original thought: queue a task from the queued task. I think that sounds good","msgtype":"m.text"},"ts":1529704768000,"senderName":"jungkees","senderId":"jungkees@irc"},
{"content":{"body":"jungkees: seems less complicated too","msgtype":"m.text"},"ts":1529704998000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: Yes. Although the implementations may have some more async calls between the worker and the browsing context event loop, spec'ing it in that way (without parallel steps involved) sounds simpler","msgtype":"m.text"},"ts":1529705150000,"senderName":"jungkees","senderId":"jungkees@irc"}
]