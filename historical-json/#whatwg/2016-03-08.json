[
{"content":{"body":"TabAtkins: yeah I agree it would help for Fetch to have an explainer section. I guess I can make an attempt to write one myself if nobody else beats me to it","msgtype":"m.text"},"ts":1457410600000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: TabAtkins: I missed the context for this, but I agree Fetch could use more language here","msgtype":"m.text"},"ts":1457423499000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: TabAtkins: I always find it a little hard to justify working on such things while there's still a ton of incorrect implementer language around","msgtype":"m.text"},"ts":1457423532000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I have a hard time not reading https://github.com/whatwg/dom/issues/102 as \"Make Attr great again\"","msgtype":"m.text"},"ts":1457424842000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: That issue makes me very sad. :(","msgtype":"m.text"},"ts":1457436592000,"senderName":"nox","senderId":"nox@irc"},
{"content":{"body":"can we also disable features when document.write is used? :-D","msgtype":"m.text"},"ts":1457438288000,"senderName":"zcorpan","senderId":"zcorpan@irc"},
{"content":{"body":"maybe we could just disable loading webpages when document.write is used :)","msgtype":"m.text"},"ts":1457438754000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"Although the servo people claim that not supporting document.write is a zero-cost ad-blocker","msgtype":"m.text"},"ts":1457438787000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"(this is not really true)","msgtype":"m.text"},"ts":1457438794000,"senderName":"jgraham","senderId":"jgraham@irc"},
{"content":{"body":"ok, so I wonder how many specs are now inconsistent with http://w3c.github.io/webappsec-mixed-content/ :/","msgtype":"m.text"},"ts":1457446878000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"this is a great mess atm","msgtype":"m.text"},"ts":1457446883000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"oh well","msgtype":"m.text"},"ts":1457446886000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"such is life :)","msgtype":"m.text"},"ts":1457446895000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"solution: just set Content-Security-Policy: upgrade-insecure-requests and forget it","msgtype":"m.text"},"ts":1457446943000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"smaug____: only WebSocket is","msgtype":"m.text"},"ts":1457447016000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smaug____: everything else should route through Fetch already which dispatches to that specification","msgtype":"m.text"},"ts":1457447033000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"one day I'll read Fetch spec","msgtype":"m.text"},"ts":1457447049000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: soon WebSocket will also route through Fetch and things will be wonderful","msgtype":"m.text"},"ts":1457447054000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"maybe not wonderful, but slightly better anyway","msgtype":"m.text"},"ts":1457447072000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"so how is http://w3c.github.io/webappsec-mixed-content/ related to this all then?","msgtype":"m.text"},"ts":1457447082000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: Fetch uses that specification to define the Mixed Content check","msgtype":"m.text"},"ts":1457447131000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"smaug____: step 5 of https://fetch.spec.whatwg.org/#main-fetch","msgtype":"m.text"},"ts":1457447154000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"misunderstood; thought smaug____ was talking about the resources of the spec source","msgtype":"m.emote"},"ts":1457447196000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: nah, just trying to figure out how many specs I need to review before reviewing a patch.","msgtype":"m.text"},"ts":1457447297000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"looks like 3","msgtype":"m.text"},"ts":1457447302000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"well that seems manageable","msgtype":"m.text"},"ts":1457448072000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"zcorpan_: if you want I can introduce such a default User-Agent value concept now","msgtype":"m.text"},"ts":1457448425000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"zcorpan_: I mean, I'll do it unless you see a problem","msgtype":"m.text"},"ts":1457448439000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: sure","msgtype":"m.text"},"ts":1457448445000,"senderName":"zcorpan_","senderId":"zcorpan_@irc"},
{"content":{"body":"today’s SO question where somebody had a problem that turned out to be due just to them not knowing that Fetch doesn’t send credentials by default http://stackoverflow.com/questions/35868312/django-1-9-ajax-form-csrf-token-403-error-csrf-cookie-not-set/35869947#35869947","msgtype":"m.text"},"ts":1457448452000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: yeah, this safe default is tripping up many folks","msgtype":"m.text"},"ts":1457448499000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"MikeSmith: maybe I should've used XHR's default... so little feedback during the development of that API","msgtype":"m.text"},"ts":1457448528000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I think partly it just takes time for it to enter into the collective developer consciousness","msgtype":"m.text"},"ts":1457448646000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I mean, there are many more arcane/esoteric things about the platform that developers just sorta know","msgtype":"m.text"},"ts":1457448682000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: hopefully, I know Mark Miller will be pleased with this default, although not everyone will see that as a good sign","msgtype":"m.text"},"ts":1457448695000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk, what's the \"local-URLs-only flag\" for?","msgtype":"m.text"},"ts":1457451680000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: CSS/SVG","msgtype":"m.text"},"ts":1457451753000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ms2ger: they haven't really defined their fetching model yet, though, but this is what I think they'll need to define \"SVG as image\" and \"SVG as gradient\" and such","msgtype":"m.text"},"ts":1457451807000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ms2ger: although maybe they're a little closer now, but nothing to the level of detail I'd like","msgtype":"m.text"},"ts":1457451828000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I see, thanks","msgtype":"m.text"},"ts":1457451830000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"annevk, is there a reason not to return the network error in step 2 of https://fetch.spec.whatwg.org/#concept-main-fetch ?","msgtype":"m.text"},"ts":1457451933000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: yeah, async callers wouldn't know what happened","msgtype":"m.text"},"ts":1457452371000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Still trying to figure the control flow here","msgtype":"m.text"},"ts":1457452437000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: main fetch returns for recursive and synchronous invocations; for async it ends up queuing stuff in the end","msgtype":"m.text"},"ts":1457452514000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Ms2ger: it's not the best and I've tried to get input on the design, but as with most things I write I'm kinda left to figure it out on my own","msgtype":"m.text"},"ts":1457452582000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Yeah","msgtype":"m.text"},"ts":1457452597000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"Ms2ger: not sure if that's due to me or simply a result of the problems I tackle not being super interesting to others","msgtype":"m.text"},"ts":1457452599000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"Or designing stuff like this being Hard(TM) :)","msgtype":"m.text"},"ts":1457452640000,"senderName":"Ms2ger","senderId":"Ms2ger@irc"},
{"content":{"body":"wanderview: oooh I see","msgtype":"m.text"},"ts":1457452720000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"wanderview: you'd wait all the way until the network","msgtype":"m.text"},"ts":1457452728000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yea, that was the idea","msgtype":"m.text"},"ts":1457452738000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"try to make all the credential stuff work the same","msgtype":"m.text"},"ts":1457452744000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: network or cache API?","msgtype":"m.text"},"ts":1457452748000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"wanderview: otherwise you're in trouble offline","msgtype":"m.text"},"ts":1457452765000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"well, cookies don't go in cache API requests now","msgtype":"m.text"},"ts":1457452783000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"wanderview: no, but they get stored somewhere","msgtype":"m.text"},"ts":1457452793000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"wanderview: I guess these get stored too someplace","msgtype":"m.text"},"ts":1457452813000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"I would have to think about Cache a bit","msgtype":"m.text"},"ts":1457452814000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"it might be fine, given that there is a credential store","msgtype":"m.text"},"ts":1457452829000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: yea, but the cookie connection to the Request is automatic... here script is attaching the Credential object","msgtype":"m.text"},"ts":1457452841000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"and that association of the Credential to Request should happen at constructor time","msgtype":"m.text"},"ts":1457452865000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"I think you might still want to pass it to request somehow and request might want to identify it will get those things attached","msgtype":"m.text"},"ts":1457452870000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1457452876000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"but it sorta makes sense to not do it straight away to avoid a bunch of the pitfalls","msgtype":"m.text"},"ts":1457452899000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: I'll write some github issues this afternoon so mikewest can see them","msgtype":"m.text"},"ts":1457452904000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"sounds good","msgtype":"m.text"},"ts":1457452919000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: want to wait for another look from aklein or shall I sanity-check compile and merge the structured clone fix?","msgtype":"m.text"},"ts":1457455384000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: happy to wait","msgtype":"m.text"},"ts":1457457189000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: turned out \"create an element\" was a really good idea, if only for deduping code between createElement and createElementNS. So yay.","msgtype":"m.text"},"ts":1457458615000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Yay abstractions","msgtype":"m.text"},"ts":1457458653000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"annevk: https://github.com/w3c/webappsec-credential-management/issues/11","msgtype":"m.text"},"ts":1457458859000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"Why are we passing attribute namespace to attributeChangedCallback. It's so useless.","msgtype":"m.text"},"ts":1457460484000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic: consistency with MutationObserver?","msgtype":"m.text"},"ts":1457461809000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"just a guess","msgtype":"m.text"},"ts":1457461814000,"senderName":"smaug____","senderId":"smaug____@irc"},
{"content":{"body":"smaug____: seems legit","msgtype":"m.text"},"ts":1457462165000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Domenic, annevk: structured clone fix looks good now","msgtype":"m.text"},"ts":1457466037000,"senderName":"aklein","senderId":"aklein@irc"},
{"content":{"body":"aklein: ta, landed","msgtype":"m.text"},"ts":1457469026000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"aklein: I guess now we can work on the serialize/deserialize rewrite -_-","msgtype":"m.text"},"ts":1457469063000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"writes the promise-returning withFrame(url) function a lot too...","msgtype":"m.emote"},"ts":1457470258000,"senderName":"wanderview","senderId":"wanderview@irc"},
{"content":{"body":"Starting to feel like the custom elements spec is something we can be proud of...","msgtype":"m.text"},"ts":1457475831000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"Big remaining issues are nanotasks and parser","msgtype":"m.text"},"ts":1457475844000,"senderName":"Domenic","senderId":"Domenic@irc"},
{"content":{"body":"https://github.com/w3c/webcomponents/issues/412#issuecomment-193935169 is also interesting, should be pretty easy once we figure out what we want though","msgtype":"m.text"},"ts":1457475964000,"senderName":"Domenic","senderId":"Domenic@irc"}
]