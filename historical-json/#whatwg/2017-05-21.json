[
{"content":{"body":"Why exactly are module scripts requested with CORS? This comment https://github.com/whatwg/html/pull/443#r48677306 indicates it's necessary for security but I don't quite get \"introduce new ways to leak data from existing file types\" /cc annevk","msgtype":"m.text"},"ts":1495337936000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"There was additional discussion about it at https://github.com/whatwg/html/issues/1888","msgtype":"m.text"},"ts":1495338092000,"senderName":"not-an-aardvark","senderId":"not-an-aardvark@irc"},
{"content":{"body":"not-an-aardvark: thank you, will read","msgtype":"m.text"},"ts":1495338124000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"domfarolino: that has all my points in it too","msgtype":"m.text"},"ts":1495366278000,"senderName":"annevk","senderId":"annevk@irc"},
{"content":{"body":"HTML standard (among other places) indicates a benefit to loading classic scripts via CORS is so that rich error information can be exposed to the client. I'm having trouble simulating this though...","msgtype":"m.text"},"ts":1495387087000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"The document I'm running locally can be found here https://gist.github.com/domfarolino/62ad3d9ccdcc160c62ec99b0b52d033b and basically I don't see a difference in logged errors with either script tag in that gist..am I doing something wrong?","msgtype":"m.text"},"ts":1495387147000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"Ah ok. It seems that it's the error information specifically exposed to window.onerror (like message, url, line, column, error) that is obfuscated..not the uncaught error's stacktrace which still shows up in console","msgtype":"m.text"},"ts":1495388353000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"Hmm however it doesn't seem that Firefox's window.onerror has this same obfuscation...is this not standardized behavior?","msgtype":"m.text"},"ts":1495388868000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"domfarolino: not exposing it to frontend JavaScript code is required by the Fetch spec, right?","msgtype":"m.text"},"ts":1495405382000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith: not sure I can check when I get home. If so then I guess that's an FF bug unless I'm missing something, bc iirc I got all the info passed to window.onerror","msgtype":"m.text"},"ts":1495405489000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"if https://demo1426415.mockable.io/errorjs is served with no Access-Control-Allow-Origin then Fetch requires that no part of the response be accessible to frontend JavaScript","msgtype":"m.text"},"ts":1495405548000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"the detailed error information is part of the response","msgtype":"m.text"},"ts":1495405571000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"I wasn't fetching it, was using it as the src attr on script tag","msgtype":"m.text"},"ts":1495405591000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"ah yeah","msgtype":"m.text"},"ts":1495405600000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but in that case the Fetch is done with no-cors I think","msgtype":"m.text"},"ts":1495405634000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"which means the response is not exposed to frontend JS no matter what","msgtype":"m.text"},"ts":1495405661000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"opaque response","msgtype":"m.text"},"ts":1495405720000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"anyway annevk would be the best person to ask and get an explanation from, when he’s not away","msgtype":"m.text"},"ts":1495405795000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith hmm,  using <script src=\"//example.com/script.js\"></script>, the response should still be avail in developer tools right? Either way, Issue with this is people say the data passed to window.onerror is obfuscated when window.onerror gets an error from script.js","msgtype":"m.text"},"ts":1495409152000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"This gist: https://gist.github.com/domfarolino/28725582270679b9e17fa74922cbfd65 produces this output in Chrome: https://image.ibb.co/gSgWyF/Screen_Shot_2017_05_21_at_4_27_06_PM.png","msgtype":"m.text"},"ts":1495409303000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"However in FF we don't get the \"Script error\" 0 0 thing...we just straight up get the real data","msgtype":"m.text"},"ts":1495409339000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"domfarolino: yeah the response will always be available in devtools","msgtype":"m.text"},"ts":1495410433000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"right, wanted to make sure we were on the same page","msgtype":"m.text"},"ts":1495410455000,"senderName":"domfarolino","senderId":"domfarolino@irc"},
{"content":{"body":"as far as why there’s a difference between Firefox and Chrome in what you get from window.onerror I dunno","msgtype":"m.text"},"ts":1495410502000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"it could be a bug in Firefox that it’s not conforming to the Fetch spec on this","msgtype":"m.text"},"ts":1495410529000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"or I could just not be understanding","msgtype":"m.text"},"ts":1495410542000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"but annevk will be able to give you a clear answer","msgtype":"m.text"},"ts":1495410553000,"senderName":"MikeSmith","senderId":"MikeSmith@irc"},
{"content":{"body":"MikeSmith could you help find the section in the fetch spec you are referring to? I know that HTML refers to the `crossorigin` attribute and how it helps expose more specific error data (https://html.spec.whatwg.org/multipage/scripting.html#attr-script-crossorigin) but don't know where this sort of thing is in fetch","msgtype":"m.text"},"ts":1495410783000,"senderName":"domfarolino","senderId":"domfarolino@irc"}
]