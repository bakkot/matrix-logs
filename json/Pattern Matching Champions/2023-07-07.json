[
{"content":{"body":"sounds good.","msgtype":"m.text"},"ts":1688748023017,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$gCPwi5odxYh-29H9BQd8NnBODgOoRTBmnikn3BRTqqo"},
{"content":{"body":"If we're chunking `${}` for now, how do you reference variables to match against? Are we going to move the syntax around so binding patterns have some prefix and naked idents are resolved as variable references?","format":"org.matrix.custom.html","formatted_body":"If we're chunking <code>${}</code> for now, how do you reference variables to match against? Are we going to move the syntax around so binding patterns have some prefix and naked idents are resolved as variable references?","msgtype":"m.text"},"ts":1688748069130,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$xEVLHEkW0tpfvKS1cKmu3xnzgvUbn4tqNDP3U86kS4Y"},
{"content":{"body":"(Assuming we have a solution for variable refs, I'm okay with dropping `${}` in favor of array extractors, fwiw.)","format":"org.matrix.custom.html","formatted_body":"(Assuming we have a solution for variable refs, I'm okay with dropping <code>${}</code> in favor of array extractors, fwiw.)","msgtype":"m.text"},"ts":1688748396738,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$nCWrQBryGgNlZUNovsTh124wazcjsr8JCOOKMhzavtI"},
{"content":{"body":"And by \"a solution\" I think the only reasonable one is indeed that a bare ident is a variable ref rather than an irrefutable binding pattern. It should precisely the same syntax restrictions and resolution rules as array extractors does.","msgtype":"m.text"},"ts":1688748506090,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$mx4Z-bWr_VqyanN26U-ZiZSsKRpgM2H0vkas3pmb_QQ"},
{"content":{"body":"That is, if `when foo(): ...` works, then `when foo:` also needs to work and find the same variable. (But do a value match instead of forcing an array-extractor match.)","format":"org.matrix.custom.html","formatted_body":"That is, if <code>when foo(): ...</code> works, then <code>when foo:</code> also needs to work and find the same variable. (But do a value match instead of forcing an array-extractor match.)","msgtype":"m.text"},"ts":1688748562051,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$V3d2ml_Qu6N1jQBZkkKA0r65JxoJ8cYughR7UalDL2M"},
{"content":{"body":"And I suppose `when foo` would still try to find a custom matcher on the value. Difference from `when foo()` is that it would accept any successful result, while `foo()` further matches the successful result against a `[]` pattern. Right?","format":"org.matrix.custom.html","formatted_body":"And I suppose <code>when foo</code> would still try to find a custom matcher on the value. Difference from <code>when foo()</code> is that it would accept any successful result, while <code>foo()</code> further matches the successful result against a <code>[]</code> pattern. Right?","msgtype":"m.text"},"ts":1688749955534,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$rZ6Wfq5RGtf1oZvjOXvWKtaVdJg9i7-BTY8xRgm5Cts"},
{"content":{"body":"Does this end up removing the `with <matcher>` suffix entirely? We still have it on regex matchers right now, is that okay? (If we remove it, we have to rely entirely on named capture groups to pull things out of a regex matcher.)","format":"org.matrix.custom.html","formatted_body":"Does this end up removing the <code>with &lt;matcher&gt;</code> suffix entirely? We still have it on regex matchers right now, is that okay? (If we remove it, we have to rely entirely on named capture groups to pull things out of a regex matcher.)","msgtype":"m.text"},"ts":1688750891287,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$wtyvVkxVenXBV-yDdVfRXBjdV3eN5dmab379IbK_csk"},
{"content":{"body":"> <@tabatkins:matrix.org> If we're chunking `${}` for now, how do you reference variables to match against? Are we going to move the syntax around so binding patterns have some prefix and naked idents are resolved as variable references?\n\nyes, that's the current thinking","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!XyZDxqjPFLRXDgUzhD:matrix.org/$xEVLHEkW0tpfvKS1cKmu3xnzgvUbn4tqNDP3U86kS4Y?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@tabatkins:matrix.org\">@tabatkins:matrix.org</a><br>If we're chunking <code>${}</code> for now, how do you reference variables to match against? Are we going to move the syntax around so binding patterns have some prefix and naked idents are resolved as variable references?</blockquote></mx-reply>yes, that's the current thinking","m.relates_to":{"m.in_reply_to":{"event_id":"$xEVLHEkW0tpfvKS1cKmu3xnzgvUbn4tqNDP3U86kS4Y"}},"msgtype":"m.text"},"ts":1688765641908,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$Oub5_OTFwAZ-O94R-zEB3AQ8Bb8J3E-LIFT7yUOK5iM"}
]