[
{"content":{"body":"If there's no binding on an array rest pattern, is the binding code still required to exhaust the iteration? \n\nie. \n\n```js\n\nlet generated = 0;\nfunction* counting_generator() {\n    generated = 0;\n    for (var i = 0; i < 10; i++) {\n        generated++;\n        yield i;\n    }\n}\n\nmatch (counting_generator()) {\n    when [a,b,...]: {\n        console.log(generated); // This prints... 3? 10?\n    }\n}\n```","format":"org.matrix.custom.html","formatted_body":"<p>If there's no binding on an array rest pattern, is the binding code still required to exhaust the iteration?</p>\n<p>ie.</p>\n<pre><code class=\"language-js\">\nlet generated = 0;\nfunction* counting_generator() {\n    generated = 0;\n    for (var i = 0; i &lt; 10; i++) {\n        generated++;\n        yield i;\n    }\n}\n\nmatch (counting_generator()) {\n    when [a,b,...]: {\n        console.log(generated); // This prints... 3? 10?\n    }\n}\n</code></pre>\n","msgtype":"m.text"},"ts":1681831064492,"senderName":"mgaudet","senderId":"@mgaudet:mozilla.org","id":"$bGq7h3ZwJmFP-jelf8VQbMopx0Q5oWgnONcoSssEdTk"},
{"content":{"body":"(if you give a binding to the rest pattern, it of course is exhausted matching array destructuring, but it's unclear what the semantics are for matching 'at least two' ) ","msgtype":"m.text"},"ts":1681831123617,"senderName":"mgaudet","senderId":"@mgaudet:mozilla.org","id":"$Agk-sxGay2sMMK3m7GUkfkAvxgLjzlRxFx4k4bQAQi0"},
{"content":{"body":" * (if you give a binding to the rest pattern, it of course is exhausted, matching array destructuring, but it's unclear what the semantics are for matching 'at least two' ) ","m.new_content":{"body":"(if you give a binding to the rest pattern, it of course is exhausted, matching array destructuring, but it's unclear what the semantics are for matching 'at least two' ) ","msgtype":"m.text"},"m.relates_to":{"event_id":"$Agk-sxGay2sMMK3m7GUkfkAvxgLjzlRxFx4k4bQAQi0","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1681831190843,"senderName":"mgaudet","senderId":"@mgaudet:mozilla.org","id":"$t4nyTEHeAwzt1xFwn5ShbqM0tsdAn0sb_y5X40429ws"},
{"content":{"body":" * (if you give a binding to the rest pattern, it of course is exhausted, matching array destructuring, but it's unclear what the semantics are for matching 'at least three' ) ","m.new_content":{"body":"(if you give a binding to the rest pattern, it of course is exhausted, matching array destructuring, but it's unclear what the semantics are for matching 'at least three' ) ","msgtype":"m.text"},"m.relates_to":{"event_id":"$Agk-sxGay2sMMK3m7GUkfkAvxgLjzlRxFx4k4bQAQi0","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1681831199465,"senderName":"mgaudet","senderId":"@mgaudet:mozilla.org","id":"$u7ZwKenin_wTk04lc5QYBDuu_caRml8j-QG6sI9ZTfc"},
{"content":{"body":"yes, that's the purpose of the lone ellipsis","msgtype":"m.text"},"ts":1681833959334,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$JEHe2XsUflliHygfHQX0k5XqzXoXJ6oznX7eMgZIG2k"},
{"content":{"body":" * yes, that's the purpose of the lone ellipsis iirc","m.new_content":{"body":"yes, that's the purpose of the lone ellipsis iirc","msgtype":"m.text"},"m.relates_to":{"event_id":"$JEHe2XsUflliHygfHQX0k5XqzXoXJ6oznX7eMgZIG2k","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1681833982063,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$A1fV2sEva-XNbzZ5yh6-rpF1omlDw_lCPS7qVIBVn_k"},
{"content":{"body":"My read of the explainer had been that the ellipsis was used to disambiguate between an array with _n_ elements and an array with at least _n+1_ elements -- but you could validly make that distinction without consuming the rest of the iterator ","format":"org.matrix.custom.html","formatted_body":"My read of the explainer had been that the ellipsis was used to disambiguate between an array with <em>n</em> elements and an array with at least <em>n+1</em> elements -- but you could validly make that distinction without consuming the rest of the iterator","msgtype":"m.text"},"ts":1681837137839,"senderName":"mgaudet","senderId":"@mgaudet:mozilla.org","id":"$OmAGTAWPeoO1GwOkGXb_sFaERnhPXXdoKeQhpfEcYqQ"},
{"content":{"body":"> <@ljharb:matrix.org> yes, that's the purpose of the lone ellipsis iirc\n\nMy understanding was that it *didn't* exhaust the iterator, but instead calls `return`. ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!XyZDxqjPFLRXDgUzhD:matrix.org/$JEHe2XsUflliHygfHQX0k5XqzXoXJ6oznX7eMgZIG2k?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br />yes, that's the purpose of the lone ellipsis iirc</blockquote></mx-reply>My understanding was that it <em>didn't</em> exhaust the iterator, but instead calls <code>return</code>.","m.relates_to":{"m.in_reply_to":{"event_id":"$JEHe2XsUflliHygfHQX0k5XqzXoXJ6oznX7eMgZIG2k"}},"msgtype":"m.text"},"ts":1681837284596,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$nRTSI3mPtjtiijxGLUoKfYWFzZ7MIeddKIgcFde-l7g"},
{"content":{"body":"> <@mgaudet:mozilla.org> My read of the explainer had been that the ellipsis was used to disambiguate between an array with _n_ elements and an array with at least _n+1_ elements -- but you could validly make that distinction without consuming the rest of the iterator \n\nI wouldn't expect `...` to test for _n_+1. I would expect both to test for at least _n_, but for a fixed size like `[1, 2]` to test that _n_+1 doesn't exist. ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!XyZDxqjPFLRXDgUzhD:matrix.org/$OmAGTAWPeoO1GwOkGXb_sFaERnhPXXdoKeQhpfEcYqQ?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@mgaudet:mozilla.org\">@mgaudet:mozilla.org</a><br />My read of the explainer had been that the ellipsis was used to disambiguate between an array with <em>n</em> elements and an array with at least <em>n+1</em> elements -- but you could validly make that distinction without consuming the rest of the iterator</blockquote></mx-reply>I wouldn't expect <code>...</code> to test for <em>n</em>+1. I would expect both to test for at least <em>n</em>, but for a fixed size like <code>[1, 2]</code> to test that <em>n</em>+1 doesn't exist.","m.relates_to":{"m.in_reply_to":{"event_id":"$OmAGTAWPeoO1GwOkGXb_sFaERnhPXXdoKeQhpfEcYqQ"}},"msgtype":"m.text"},"ts":1681837380571,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$F14Di5JDNGgffqPjQQCdLTZApOVW5ENrTkEJoYVtPmM"},
{"content":{"body":"hm, i might be remembering wrong","msgtype":"m.text"},"ts":1681837402768,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$ORNLRJmgtjVqyn2gs4PLH0FcFmn4hYVingJ9au27gPU"},
{"content":{"body":"let me read up and page it back in :-)","msgtype":"m.text"},"ts":1681837412059,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$IlKHvb-fq3rcWiURaJ8vqIRdQDUZvcMMN5apmYYAj08"},
{"content":{"body":"`[1,2,...]` should be satisfied by `[1,2]`. An ellipsis means \"zero or more\", which matches assignment/binding patterns","format":"org.matrix.custom.html","formatted_body":"<code>[1,2,...]</code> should be satisfied by <code>[1,2]</code>. An ellipsis means &quot;zero or more&quot;, which matches assignment/binding patterns","msgtype":"m.text"},"ts":1681837479171,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$elID4T62CrRrCrPexFf2qc4hjTqnM3OpYtHYLAZA_wA"},
{"content":{"body":"ah ok, so then â€¦ is when it doesn't check for a next one","msgtype":"m.text"},"ts":1681837662024,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$ZTr2B_LZb74a_QSXaV3vx6SculIxrdYR9L-kturCVUY"},
{"content":{"body":"Right, `[a, b, ...]` pulls two elements from the iterator and no more.","format":"org.matrix.custom.html","formatted_body":"Right, <code>[a, b, ...]</code> pulls two elements from the iterator and no more.","msgtype":"m.text"},"ts":1681842357995,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$GhVNrvDYybYz6LCWmflF-5gtcWOS7hKY4z_53W_QJko"},
{"content":{"body":"So what's the value of `[a,b,...]` vs writing `[a,b]`? ","format":"org.matrix.custom.html","formatted_body":"So what's the value of <code>[a,b,...]</code> vs writing <code>[a,b]</code>?","msgtype":"m.text"},"ts":1681847878393,"senderName":"mgaudet","senderId":"@mgaudet:mozilla.org","id":"$Lh68c2oQuU51IcULeKf30s8KUUp9tGTPW4ljJRi64Sc"},
{"content":{"body":"apologies if I'm being slow","msgtype":"m.text"},"ts":1681847890786,"senderName":"mgaudet","senderId":"@mgaudet:mozilla.org","id":"$cr2wsprHde0JSF3XiPxALX-12PCydL6UZxHsFlFHrts"},
{"content":{"body":"`[a, b]` matches exactly two elements, no more, no fewer. `[a, b, ...]` matches at least two elements. ","format":"org.matrix.custom.html","formatted_body":"<code>[a, b]</code> matches exactly two elements, no more, no fewer. <code>[a, b, ...]</code> matches at least two elements.","msgtype":"m.text"},"ts":1681848030054,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$AMNcs33T4EjqLkud_92A1LBjmV7LJseEHAuXfNf2GW4"},
{"content":{"body":"Oh... that seems wrong","msgtype":"m.text"},"ts":1681848471941,"senderName":"mgaudet","senderId":"@mgaudet:mozilla.org","id":"$_4LVMVylu1nte699MgkcOL-vOrnlnvdla0R1Q5rpn9M"},
{"content":{"body":"(like, from a design / understanding bit)","msgtype":"m.text"},"ts":1681848483060,"senderName":"mgaudet","senderId":"@mgaudet:mozilla.org","id":"$bKQX2Q9bebtGkGZfnOJqaVp3jsRlz3EWKVygZtJemVc"},
{"content":{"body":"because that's not how destructuring works... `let [a,b] = [1,2,3,4,5]`; and I get patterns are not destructuring, but that seems weird to me  ","format":"org.matrix.custom.html","formatted_body":"because that's not how destructuring works... <code>let [a,b] = [1,2,3,4,5]</code>; and I get patterns are not destructuring, but that seems weird to me","msgtype":"m.text"},"ts":1681848531480,"senderName":"mgaudet","senderId":"@mgaudet:mozilla.org","id":"$ccuvSYdaPqkIBrtxDSeF2HywHaxny50-xfKgTRrssSk"},
{"content":{"body":"I'll think on it some more","msgtype":"m.text"},"ts":1681848545957,"senderName":"mgaudet","senderId":"@mgaudet:mozilla.org","id":"$fjvWt3uWFojZ_LJs9VR9I_1-huhPL3PecB7Sx-yXn5E"},
{"content":{"body":"Destructuring doesn't require exact matches, patterns do (mostly). ","format":"org.matrix.custom.html","formatted_body":"Destructuring doesn't require exact matches, patterns do (mostly).","msgtype":"m.text"},"ts":1681848776428,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$HYBp39HC6efqGLe35qLvk_XJPfuL5YxnQQTpGkuny5w"},
{"content":{"body":"And it sort of has to be this way if you want array length checking... ðŸ˜¬ ","msgtype":"m.text"},"ts":1681848813976,"senderName":"mgaudet","senderId":"@mgaudet:mozilla.org","id":"$7WelaUIZiQqpFjxus695aCge-LKwDqcrUHnvY2HErn4"}
]