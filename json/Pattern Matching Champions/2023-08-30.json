[
{"content":{"body":"> <@ljharb:matrix.org> i think it would be *super* weird for a lone boolean test to produce bindings\n\n`is` introducing bindings is this proposals version of `if let` in Rust. It's extremely valuable in control flow and loops. ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!XyZDxqjPFLRXDgUzhD:matrix.org/$1mMMSIAHkpgponMSQLWB9weWRdNFdsP2J6bsRQ8Rj-o?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br />i think it would be <em>super</em> weird for a lone boolean test to produce bindings</blockquote></mx-reply><code>is</code> introducing bindings is this proposals version of <code>if let</code> in Rust. It's extremely valuable in control flow and loops.","m.relates_to":{"m.in_reply_to":{"event_id":"$1mMMSIAHkpgponMSQLWB9weWRdNFdsP2J6bsRQ8Rj-o"}},"msgtype":"m.text"},"ts":1693354300647,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$d4LVF1RVYOZeu3dz9fdWtB-MUzIoGTituh7-bDZYmDQ"},
{"content":{"body":"It's more obviously useful when paired with something complex like extractors, i.e.:\n\n```js\nif (x is Option.Some(let value)) {\n  // 'value' is in scope\n}\nelse {\n}\n```\nBut is also useful in conditionals:\n\n```js\nconst res = x is Option.Some(let value) ? Option.Some(compute(value)) : Option.None;\n```\n\nBecause `let` bindings are just a pattern, they're fairly flexible:\n\n```js\nwhile (queue.shift() is { name: let jobName, arguments: let jobArgs }) {\n  processJob(jobName, jobArgs);  \n}\n```\n\n","format":"org.matrix.custom.html","formatted_body":"<p>It's more obviously useful when paired with something complex like extractors, i.e.:</p>\n<pre><code class=\"language-js\">if (x is Option.Some(let value)) {\n  // 'value' is in scope\n}\nelse {\n}\n</code></pre>\n<p>But is also useful in conditionals:</p>\n<pre><code class=\"language-js\">const res = x is Option.Some(let value) ? Option.Some(compute(value)) : Option.None;\n</code></pre>\n<p>Because <code>let</code> bindings are just a pattern, they're fairly flexible:</p>\n<pre><code class=\"language-js\">while (queue.shift() is { name: let jobName, arguments: let jobArgs }) {\n  processJob(jobName, jobArgs);  \n}\n</code></pre>\n","msgtype":"m.text"},"ts":1693354825543,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$G78Nv1FlvPBiw6YlBkb2KHyFEwl2Py1baDPc3tFicXc"},
{"content":{"body":"> <@ljharb:matrix.org> you'd be able to like\n> \n> ```\n> {\n>    x is y;\n>    /* bindings here */\n> }\n> ```\n\n`x is y` doesn't produce a binding. `x is let y` would, but that's not the common case.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!XyZDxqjPFLRXDgUzhD:matrix.org/$O6hdSkQHuPm1Gu9cmhX8onTNMj4HjgediM1jf6lw674?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br><p>you'd be able to like</p>\n<pre><code>{\n   x is y;\n   /* bindings here */\n}\n</code></pre>\n</blockquote></mx-reply><code>x is y</code> doesn't produce a binding. <code>x is let y</code> would, but that's not the common case.","m.relates_to":{"m.in_reply_to":{"event_id":"$O6hdSkQHuPm1Gu9cmhX8onTNMj4HjgediM1jf6lw674"}},"msgtype":"m.text"},"ts":1693357549849,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$gL-Um1V0bbSLYU_IeKA8bDqRtYJhP2_9KPvkTYWEG8g"},
{"content":{"body":"hmm ok","msgtype":"m.text"},"ts":1693358279730,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$aHzRh_RH4FBdq49UHbFI3JS3opHuICqWdNjgiAafp_s"},
{"content":{"body":"I’m fine with it working in the positive branch of ternaries fwiw","msgtype":"m.text"},"ts":1693358292839,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$692xbfj53Pw21W5kj6GpGQCeF3nGwY07tPNGSRIipBE"},
{"content":{"body":"but I’d expect the bare expression form to forbid let/const","msgtype":"m.text"},"ts":1693358316840,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$jm187sIzukSW9WxN_oEk8TdOrCLCwNV189UvMPQZlQE"},
{"content":{"body":"I'd hope we don't lose that, its one of the big reasons I suggested `is` in the first place.","format":"org.matrix.custom.html","formatted_body":"I'd hope we don't lose that, its one of the big reasons I suggested <code>is</code> in the first place.","msgtype":"m.text"},"ts":1693368057593,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$nCICaCYGD5jT75TUHMjk8Ks0lA5OHZepEgnxOguxJfg"},
{"content":{"body":"Plus there's been a long standing request from Anders Hejlsberg that JavaScript needs some way to introduce variables in-situ in expressions. He hasn't been partial to `do` expressions, so I'm hoping this would address that as well. `x is let y` could theoretically fill the same role as a `let..in` expression in other languages:\n\n```\n// PowerQuery\nx = let a = foo() in\n    let b = a.b in\n    [a, b];\n\n// OpenSCAD\nx = let (a = foo())\n    let (b = a[0])\n    [a, b];\n```\n\nvs.\n\n```\n// same thing with `let` patterns:\nx = foo() is let a,\n    a.b is let b,\n    [a, b];\n```\n","format":"org.matrix.custom.html","formatted_body":"<p>Plus there's been a long standing request from Anders Hejlsberg that JavaScript needs some way to introduce variables in-situ in expressions. He hasn't been partial to <code>do</code> expressions, so I'm hoping this would address that as well. <code>x is let y</code> could theoretically fill the same role as a <code>let..in</code> expression in other languages:</p>\n<pre><code>// PowerQuery\nx = let a = foo() in\n    let b = a.b in\n    [a, b];\n\n// OpenSCAD\nx = let (a = foo())\n    let (b = a[0])\n    [a, b];\n</code></pre>\n<p>vs.</p>\n<pre><code>// same thing with `let` patterns:\nx = foo() is let a,\n    a.b is let b,\n    [a, b];\n</code></pre>\n","msgtype":"m.text"},"ts":1693368785732,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$Xva49IaU4zcea5PwvUiVhivLEzz3tm0BWaZci6SKlQc"},
{"content":{"body":"But be more expressive since you can use patterns:\n```\nx = foo() is let a and { b: let b } && [a, b];\n```\nThis is a more expressive since it validates that `a` is actually an object with a `b` property.","format":"org.matrix.custom.html","formatted_body":"<p>But be more expressive since you can use patterns:</p>\n<pre><code>x = foo() is let a and { b: let b } &amp;&amp; [a, b];\n</code></pre>\n<p>This is a more expressive since it validates that <code>a</code> is actually an object with a <code>b</code> property.</p>\n","msgtype":"m.text"},"ts":1693368963348,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$z7UlN-OUOo-UE0pwrex1XiEhwNXIijtfXTEGmlbv83g"},
{"content":{"body":"why that request tho","msgtype":"m.text"},"ts":1693370628434,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$4yBaKNvdRVsuv4MyUHG1xDjO1N_VqsuQfYlTABltZ_8"},
{"content":{"body":"that seems a very strange ability to have","msgtype":"m.text"},"ts":1693370633243,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$0DaEbR9ZFX_WzWgrIazAXOTIQrbySL4810fwOOmIzs8"}
]