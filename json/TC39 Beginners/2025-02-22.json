[
{"content":{"body":"CyanChanges: HMR is specifically one of the cases I hope motivates a Module constructor and possibly even Evaluators","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@cyanc:matrix.org\">CyanChanges</a>: HMR is specifically one of the cases I hope motivates a Module constructor and possibly even Evaluators","msgtype":"m.text"},"ts":1740237997875,"senderName":"kriskowal","senderId":"@kriskowal:aelf.land","id":"$J9BAozSpqwrYvNgn6v0J-r4IYVhbHEAaUiG0HvUYDzM"},
{"content":{"body":"It would at least let you create a virtual cache that overshadows the host ESM cache","msgtype":"m.text"},"ts":1740238102944,"senderName":"kriskowal","senderId":"@kriskowal:aelf.land","id":"$8kByP0fRoHvbMGBJZpqjQvFtr8So_XhvNgLK26YIZ7I"},
{"content":{"body":"> <@kriskowal:aelf.land> It would at least let you create a virtual cache that overshadows the host ESM cache\n\nWell, won't that cause memory leak?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!OXhgybpQzCtnugpzuz:matrix.org/$8kByP0fRoHvbMGBJZpqjQvFtr8So_XhvNgLK26YIZ7I\">In reply to</a> <a href=\"https://matrix.to/#/@kriskowal:aelf.land\">@kriskowal:aelf.land</a><br>It would at least let you create a virtual cache that overshadows the host ESM cache</blockquote></mx-reply>Well, won&#39;t that cause memory leak?","m.relates_to":{"m.in_reply_to":{"event_id":"$8kByP0fRoHvbMGBJZpqjQvFtr8So_XhvNgLK26YIZ7I"}},"msgtype":"m.text"},"ts":1740238202648,"senderName":"CyanChanges","senderId":"@cyanc:matrix.org","id":"$AQhbY6cpwZlA05hdsWUKhWJIfqw7os-fK338qcGZdgU"},
{"content":{"body":"The caches will keeps growing.","msgtype":"m.text"},"ts":1740238235201,"senderName":"CyanChanges","senderId":"@cyanc:matrix.org","id":"$FSbZvpi51gatbObkE_nAafcdONYmkTcksHDs0Iw7mjU"},
{"content":{"body":"No, the caches themelves are eligible for collection","msgtype":"m.text"},"ts":1740238298464,"senderName":"kriskowal","senderId":"@kriskowal:aelf.land","id":"$CTfT1mkZn3U0mnWV2uC3IXVkbHIh981gbDckgT6cIR0"},
{"content":{"body":"So for HMR, you would need to release the previous generationâ€™s module instances when retaining the new root. The usual amount of care is needed only to avoid chaining retention between successive generations","msgtype":"m.text"},"ts":1740238427865,"senderName":"kriskowal","senderId":"@kriskowal:aelf.land","id":"$LKFa5CF5eh9Lxap7qMhK25awbqFm2KmgFP0QyOAJTZQ"},
{"content":{"body":"In general, it should be sufficient to drop the root Module when you import the next root","msgtype":"m.text"},"ts":1740238467158,"senderName":"kriskowal","senderId":"@kriskowal:aelf.land","id":"$sw7pDo0O4p9G5AqVip0ZrH3JTVRTy578kHooMtRb_pI"},
{"content":{"body":"Looks pretty good.","msgtype":"m.text"},"ts":1740238561594,"senderName":"CyanChanges","senderId":"@cyanc:matrix.org","id":"$FQfpvL6GfgEdrntVqLx8JzJM_wlp1iuCSkdR0lUErD0"}
]