[
{"content":{"body":"> <@noamr:matrix.org> HTML spec local build question: is there a way to make it fail on HTML parsing issues? I often get success on local build and then a failure on PR preview build (e.g. missing end-tags)\n\nThis is a regression since the Rust build tools since they autocorrect bad tags. Jeremy Roman might have ideas. Ideally the Rust parser we're using would have a validating mode, but I'm not sure it does...\n\nFiling a tracking issue on html-build would be helpful.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$SyUjQisGJ1gTerNHqU1rDIb1VN4ncNjld9ATjnAigek?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@noamr:matrix.org\">@noamr:matrix.org</a><br />HTML spec local build question: is there a way to make it fail on HTML parsing issues? I often get success on local build and then a failure on PR preview build (e.g. missing end-tags)</blockquote></mx-reply><p>This is a regression since the Rust build tools since they autocorrect bad tags. <a href=\"https://matrix.to/#/@jbroman:matrix.org\">Jeremy Roman</a> might have ideas. Ideally the Rust parser we're using would have a validating mode, but I'm not sure it does...</p>\n<p>Filing a tracking issue on html-build would be helpful.</p>","m.relates_to":{"m.in_reply_to":{"event_id":"$SyUjQisGJ1gTerNHqU1rDIb1VN4ncNjld9ATjnAigek"}},"msgtype":"m.text"},"ts":1707267690376,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$MpjdUk5UCW7rhoD2KNHwu00gWp1_8L2wa3ZIFZXXqcI"},
{"content":{"body":"> <@annevk:matrix.org> Domenic: minor [SecureContext] mess: https://github.com/w3c/webref/issues/1142#issuecomment-1930188979. Thoughts?\n\nNo particular thoughts from me...","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$6xjKSih-Nu8qZd3bQ_jgpAM7poqaf4st9aqzIT73vbg?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br /><a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: minor [SecureContext] mess: https://github.com/w3c/webref/issues/1142#issuecomment-1930188979. Thoughts?</blockquote></mx-reply>No particular thoughts from me...","m.relates_to":{"m.in_reply_to":{"event_id":"$6xjKSih-Nu8qZd3bQ_jgpAM7poqaf4st9aqzIT73vbg"}},"msgtype":"m.text"},"ts":1707267770004,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$6vEtXKZa-7N7M6Asi78TSvXjJSith6dJrlBpZKOPrrM"},
{"content":{"body":"> <@domenicdenicola:matrix.org> This is a regression since the Rust build tools since they autocorrect bad tags. Jeremy Roman might have ideas. Ideally the Rust parser we're using would have a validating mode, but I'm not sure it does...\n> \n> Filing a tracking issue on html-build would be helpful.\n\nOK will file a bug there, thanks!","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs%3Amatrix.org/%24MpjdUk5UCW7rhoD2KNHwu00gWp1_8L2wa3ZIFZXXqcI\">In reply to</a> <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">@domenicdenicola:matrix.org</a><br><p>This is a regression since the Rust build tools since they autocorrect bad tags. <a href=\"https://matrix.to/#/@jbroman:matrix.org\">Jeremy Roman</a> might have ideas. Ideally the Rust parser we're using would have a validating mode, but I'm not sure it does...</p>\n<p>Filing a tracking issue on html-build would be helpful.</p></blockquote></mx-reply>OK will file a bug there, thanks!","m.relates_to":{"m.in_reply_to":{"event_id":"$MpjdUk5UCW7rhoD2KNHwu00gWp1_8L2wa3ZIFZXXqcI"}},"msgtype":"m.text"},"ts":1707287856404,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$TgSNruxEsqH8KlLnIJq30gXeIbge6rwNEUXWubw_LF8"},
{"content":{"body":"annevk: Not sure what to think of the lab9.be link at the bottom on https://util.unicode.org/UnicodeJsps/idna.jsp . The page says that Firefox resolves the link, but Firefox no longer does (because Firefox calls into ICU4C on a per-label basis and has incorrect special-case code for CJK characters that normalize to period). That is, Firefox, Chrome, and Safari fail to implement the spec mutually consistently. This raises the question if we should change the specs or the browsers. I can see arguments both ways.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: Not sure what to think of the lab9.be link at the bottom on https://util.unicode.org/UnicodeJsps/idna.jsp . The page says that Firefox resolves the link, but Firefox no longer does (because Firefox calls into ICU4C on a per-label basis and has incorrect special-case code for CJK characters that normalize to period). That is, Firefox, Chrome, and Safari fail to implement the spec mutually consistently. This raises the question if we should change the specs or the browsers. I can see arguments both ways.","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1707299628297,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$9Lue2Ljvw7fO2UxHCrjUVi9iEP5DGlvDoICD4SB4wDM"},
{"content":{"body":" * annevk: Not sure what to think of the lab9.be link at the bottom on https://util.unicode.org/UnicodeJsps/idna.jsp . The page says that Firefox resolves the link, but Firefox no longer does (because Firefox calls into ICU4C on a per-label basis and has incorrect special-case code for CJK characters that normalize to period). That is, Firefox, Chrome, and Safari mutually consistently fail to implement the spec. This raises the question if we should change the specs or the browsers. I can see arguments both ways.","format":"org.matrix.custom.html","formatted_body":" * <a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: Not sure what to think of the lab9.be link at the bottom on https://util.unicode.org/UnicodeJsps/idna.jsp . The page says that Firefox resolves the link, but Firefox no longer does (because Firefox calls into ICU4C on a per-label basis and has incorrect special-case code for CJK characters that normalize to period). That is, Firefox, Chrome, and Safari mutually consistently fail to implement the spec. This raises the question if we should change the specs or the browsers. I can see arguments both ways.","m.mentions":{},"m.new_content":{"body":"annevk: Not sure what to think of the lab9.be link at the bottom on https://util.unicode.org/UnicodeJsps/idna.jsp . The page says that Firefox resolves the link, but Firefox no longer does (because Firefox calls into ICU4C on a per-label basis and has incorrect special-case code for CJK characters that normalize to period). That is, Firefox, Chrome, and Safari mutually consistently fail to implement the spec. This raises the question if we should change the specs or the browsers. I can see arguments both ways.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: Not sure what to think of the lab9.be link at the bottom on https://util.unicode.org/UnicodeJsps/idna.jsp . The page says that Firefox resolves the link, but Firefox no longer does (because Firefox calls into ICU4C on a per-label basis and has incorrect special-case code for CJK characters that normalize to period). That is, Firefox, Chrome, and Safari mutually consistently fail to implement the spec. This raises the question if we should change the specs or the browsers. I can see arguments both ways.","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$9Lue2Ljvw7fO2UxHCrjUVi9iEP5DGlvDoICD4SB4wDM","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1707299657364,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$fXgjmXbSAzTGFv6vrfKRbqViOcMZkEoQx-CoBZFgr9Q"},
{"content":{"body":"I'm on track to writing code that would make the link resolve in Firefox again. Making it _not_ resolve takes its own kind of special effort.","format":"org.matrix.custom.html","formatted_body":"I'm on track to writing code that would make the link resolve in Firefox again. Making it <em>not</em> resolve takes its own kind of special effort.","m.mentions":{},"msgtype":"m.text"},"ts":1707300567613,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$bQ92eOCWlVZ6vgRSwEVrnA6jMR-fbw4oTXyrzpV_bC0"},
{"content":{"body":"looks like we had some data loss here https://blog.whatwg.org/implementation-progress-on-the-html5-ruby-element","m.mentions":{},"msgtype":"m.text"},"ts":1707300836134,"senderName":"mathiasbynens","senderId":"@mathiasbynens:matrix.org","id":"$ityy4UGnwKxZFBPvGnSHbuAtF3LjZA41LEbE_hjU7YA"},
{"content":{"body":"the “???” in the examples are real U+003F QUESTION MARK characters instead of the intended non-ASCII characters","m.mentions":{},"msgtype":"m.text"},"ts":1707301025242,"senderName":"mathiasbynens","senderId":"@mathiasbynens:matrix.org","id":"$-9XUuSkp_TByl_yVminDlWpQe0kDZ0zuq1W42IE8Bog"},
{"content":{"body":"https://web.archive.org/web/20120522110923/https://blog.whatwg.org/implementation-progress-on-the-html5-ruby-element is what it used to be","m.mentions":{},"msgtype":"m.text"},"ts":1707301033620,"senderName":"mathiasbynens","senderId":"@mathiasbynens:matrix.org","id":"$xm7cnOMwHgitYZDUEQOLu_h3CVyVyLgqfKf_Xl6B6cQ"},
{"content":{"body":"hsivonen: that should not resolve I think. Not sure what U+2490 gets mapped to though.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@hsivonen:mozilla.org\">hsivonen</a>: that should not resolve I think. Not sure what U+2490 gets mapped to though.","m.mentions":{"user_ids":["@hsivonen:mozilla.org"]},"msgtype":"m.text"},"ts":1707302201007,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$LVk0dz-Pt53536nTskE2v1ryGgW11YN-gk8cGW8kAQ8"},
{"content":{"body":"> <@annevk:matrix.org> hsivonen: that should not resolve I think. Not sure what U+2490 gets mapped to though.\n\nOoh. Indeed. It's disallowed. Nevermind then. Sorry.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$LVk0dz-Pt53536nTskE2v1ryGgW11YN-gk8cGW8kAQ8?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@hsivonen:mozilla.org\">hsivonen</a>: that should not resolve I think. Not sure what U+2490 gets mapped to though.</blockquote></mx-reply>Ooh. Indeed. It's disallowed. Nevermind then. Sorry.","m.mentions":{"user_ids":["@annevk:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$LVk0dz-Pt53536nTskE2v1ryGgW11YN-gk8cGW8kAQ8"}},"msgtype":"m.text"},"ts":1707302292850,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$qy_63HtarU_E3arZlzGFLSRzOA5dVC3uMWV0e-68ccg"},
{"content":{"body":"Well, at least I do also find actual bugs: https://unicode-org.atlassian.net/browse/ICU-22658","m.mentions":{},"msgtype":"m.text"},"ts":1707302353570,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$JyI3dBSRKCoHqeYk8-dsIOw3tqQiyQk9NTl7U80mQRw"},
{"content":{"body":"> <@tabatkins:matrix.org> All right, https://github.com/w3c/htmldiff-ui/pull/10 filed\n\nAnd merged! HTMLDiff should hopefully be generating good diff colors now.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$xTOujrCwOT7Q20aRq86WaeSDuwFrsyAc8gfrp1m9L2I?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@tabatkins:matrix.org\">@tabatkins:matrix.org</a><br>All right, https://github.com/w3c/htmldiff-ui/pull/10 filed</blockquote></mx-reply>And merged! HTMLDiff should hopefully be generating good diff colors now.","m.mentions":{},"m.relates_to":{"m.in_reply_to":{"event_id":"$xTOujrCwOT7Q20aRq86WaeSDuwFrsyAc8gfrp1m9L2I"}},"msgtype":"m.text"},"ts":1707332501561,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$pNbvQOURZjIZfYYyPak-DKOAxSIwKn8tLvbjgvpG8LU"},
{"content":{"body":"Does that fix help at all with <https://github.com/whatwg/html/issues/10072>? 🙏","msgtype":"m.text"},"ts":1707332965819,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$4uRBR02u70W1KJ_1Qsq1LpdnPrXDIRu7wg7PbTTtnzo"},
{"content":{"body":"> <@akaster:serenityos.org> Does that fix help at all with <https://github.com/whatwg/html/issues/10072>? 🙏\n\nNo, but let me go fix that now.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$4uRBR02u70W1KJ_1Qsq1LpdnPrXDIRu7wg7PbTTtnzo?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@akaster:serenityos.org\">@akaster:serenityos.org</a><br>Does that fix help at all with &lt;https://github.com/whatwg/html/issues/10072&gt;? 🙏</blockquote></mx-reply>No, but let me go fix that now.","m.mentions":{"user_ids":["@akaster:serenityos.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$4uRBR02u70W1KJ_1Qsq1LpdnPrXDIRu7wg7PbTTtnzo"}},"msgtype":"m.text"},"ts":1707333933103,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$HVSto5j2ihGn9WxuVvb3vw6tgDZsiStC5xtKDXgQoYU"},
{"content":{"body":"Domenic: I have another case for sequential focus which I am not sure which behaviour is correct. https://jsfiddle.net/qyuc0otf/ If you focus the first input and then press <TAB>, firefox moves the focus to the \"second\" input, Chrome and Safari moves to the <area> element","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: I have another case for sequential focus which I am not sure which behaviour is correct. https://jsfiddle.net/qyuc0otf/ If you focus the first input and then press &lt;TAB&gt;, firefox moves the focus to the \"second\" input, Chrome and Safari moves to the &lt;area&gt; element","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"ts":1707339049873,"senderName":"sefeng","senderId":"@sefeng:mozilla.org","id":"$NBsQ0aLgBTJzysd2BDC76Uh-QfkPUySmlG0vKQVQ3fU"},
{"content":{"body":"I think we should do DOM orders here, so that's what Chrome and Safari do. ","m.mentions":{},"msgtype":"m.text"},"ts":1707339938045,"senderName":"sefeng","senderId":"@sefeng:mozilla.org","id":"$XvlIkaVGcAQS9w25axgV-w3kXkuRs2lnNwLJp2ibiU0"}
]