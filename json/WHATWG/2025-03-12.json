[
{"content":{"body":"Hmm, the `location.hostname` setter is still kinda bogus. E.g., set it to `^` and it throws in most implementations. But what argues for that?","format":"org.matrix.custom.html","formatted_body":"Hmm, the <code>location.hostname</code> setter is still kinda bogus. E.g., set it to <code>^</code> and it throws in most implementations. But what argues for that?","m.mentions":{},"msgtype":"m.text"},"ts":1741741962686,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$l8gOkkbfT4YrCVdQ74TbCCreOUCYtqNeJSwubnhjsGI"},
{"content":{"body":"(I'm still trying to unravel `URLPattern` nonsense. But turns out there's non-`URLPattern` nonsense too.)","format":"org.matrix.custom.html","formatted_body":"(I'm still trying to unravel <code>URLPattern</code> nonsense. But turns out there's non-<code>URLPattern</code> nonsense too.)","m.mentions":{},"msgtype":"m.text"},"ts":1741741995788,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$w3pG5TR90zW2k_C8pBbxvCxrfHUDSStkzzig5w8t1l0"},
{"content":{"body":"Is it supposed to be legal to reject and resolve promises while \"in parallel\"? Or should spec authors wrap those in \"queue a task on the such and such task source given such and such global object to resolve/reject `promise` with XYZ\"","msgtype":"m.text"},"ts":1741746039377,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$TLMwW8FOxD1qkjOAj5er-ZDRAcf_kmlQBrtoZ4IxTa8"},
{"content":{"body":"Oh I asked this and then realized that the latest WebCrypto spec has a \"when we say throw, we mean queue a task to resolve the promise with\" in the latest draft and our implementation is wrong ðŸ˜…","msgtype":"m.text"},"ts":1741746221665,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$CF4wW_gpZLIxAkoZB581YD586BAhoIMeJr5hG5I7vjk"},
{"content":{"body":"but then there's this from `extract a body` in Fetch https://fetch.spec.whatwg.org/#concept-bodyinit-extract, that says to create a Uint8Array while \"in parallel\", which seems unfortunate. I thought that \"in parallel\" was supposed to only operate on realm-independent WebIDL objects. \n> 12. If action is non-null, then run these steps in parallel:\n>   1. Run action.\n>   2. Whenever one or more bytes are available and stream is not errored, enqueue the result of creating a Uint8Array from the available bytes into stream.\n>   3. When running action is done, close stream.\n","format":"org.matrix.custom.html","formatted_body":"<p>but then there's this from <code>extract a body</code> in Fetch https://fetch.spec.whatwg.org/#concept-bodyinit-extract, that says to create a Uint8Array while \"in parallel\", which seems unfortunate. I thought that \"in parallel\" was supposed to only operate on realm-independent WebIDL objects.</p>\n<blockquote>\n<ol start=\"12\">\n<li>If action is non-null, then run these steps in parallel:</li>\n<li>Run action.</li>\n<li>Whenever one or more bytes are available and stream is not errored, enqueue the result of creating a Uint8Array from the available bytes into stream.</li>\n<li>When running action is done, close stream.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"msgtype":"m.text"},"ts":1741746470396,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$NZuALtyCIiQeAwGI8Qiqske6JGWsQfTs9WWNlpNjALc"},
{"content":{"body":"* but then there's this from `extract a body` in Fetch https://fetch.spec.whatwg.org/#concept-bodyinit-extract, that says to create a Uint8Array while \"in parallel\", which seems unfortunate. I thought that \"in parallel\" was supposed to only operate on realm-independent WebIDL objects.\n\n> 12. If action is non-null, then run these steps in parallel:\n>     1. Run action.\n>     2. Whenever one or more bytes are available and stream is not errored, enqueue the result of creating a Uint8Array from the available bytes into stream.\n>     3. When running action is done, close stream.","format":"org.matrix.custom.html","formatted_body":"* <p>but then there's this from <code>extract a body</code> in Fetch https://fetch.spec.whatwg.org/#concept-bodyinit-extract, that says to create a Uint8Array while \"in parallel\", which seems unfortunate. I thought that \"in parallel\" was supposed to only operate on realm-independent WebIDL objects.</p>\n<blockquote>\n<ol start=\"12\">\n<li>If action is non-null, then run these steps in parallel:\n<ol>\n<li>Run action.</li>\n<li>Whenever one or more bytes are available and stream is not errored, enqueue the result of creating a Uint8Array from the available bytes into stream.</li>\n<li>When running action is done, close stream.</li>\n</ol>\n</li>\n</ol>\n</blockquote>\n","m.mentions":{},"m.new_content":{"body":"but then there's this from `extract a body` in Fetch https://fetch.spec.whatwg.org/#concept-bodyinit-extract, that says to create a Uint8Array while \"in parallel\", which seems unfortunate. I thought that \"in parallel\" was supposed to only operate on realm-independent WebIDL objects.\n\n> 12. If action is non-null, then run these steps in parallel:\n>     1. Run action.\n>     2. Whenever one or more bytes are available and stream is not errored, enqueue the result of creating a Uint8Array from the available bytes into stream.\n>     3. When running action is done, close stream.","format":"org.matrix.custom.html","formatted_body":"<p>but then there's this from <code>extract a body</code> in Fetch https://fetch.spec.whatwg.org/#concept-bodyinit-extract, that says to create a Uint8Array while \"in parallel\", which seems unfortunate. I thought that \"in parallel\" was supposed to only operate on realm-independent WebIDL objects.</p>\n<blockquote>\n<ol start=\"12\">\n<li>If action is non-null, then run these steps in parallel:\n<ol>\n<li>Run action.</li>\n<li>Whenever one or more bytes are available and stream is not errored, enqueue the result of creating a Uint8Array from the available bytes into stream.</li>\n<li>When running action is done, close stream.</li>\n</ol>\n</li>\n</ol>\n</blockquote>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$NZuALtyCIiQeAwGI8Qiqske6JGWsQfTs9WWNlpNjALc","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1741746492457,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$c6cnXTltza8_FCffBN_VkrIn27-ZjrnZPxLVs56-Td0"},
{"content":{"body":"> The next complication is that, in algorithm sections that are in parallel, you must not create or manipulate objects associated to a specific realm, global, or environment settings object. (Stated in more familiar terms, you must not directly access main-thread artifacts from a background thread.) Doing so would create data races observable to JavaScript code, since after all, your algorithm steps are running in parallel to the JavaScript code.\nhttps://html.spec.whatwg.org/multipage/webappapis.html#event-loop-for-spec-authors","format":"org.matrix.custom.html","formatted_body":"<blockquote>\n<p>The next complication is that, in algorithm sections that are in parallel, you must not create or manipulate objects associated to a specific realm, global, or environment settings object. (Stated in more familiar terms, you must not directly access main-thread artifacts from a background thread.) Doing so would create data races observable to JavaScript code, since after all, your algorithm steps are running in parallel to the JavaScript code.<br>https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-for-spec-authors</p>\n</blockquote>\n","m.mentions":{},"msgtype":"m.text"},"ts":1741746614612,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$rQ_A5hdDBDG8dfAgtMQPZvD7I1tFFqXyvP8spyxnWo8"},
{"content":{"body":"* > The next complication is that, in algorithm sections that are in parallel, you must not create or manipulate objects associated to a specific realm, global, or environment settings object. (Stated in more familiar terms, you must not directly access main-thread artifacts from a background thread.) Doing so would create data races observable to JavaScript code, since after all, your algorithm steps are running in parallel to the JavaScript code.\n\nhttps://html.spec.whatwg.org/multipage/webappapis.html#event-loop-for-spec-authors","format":"org.matrix.custom.html","formatted_body":"* <blockquote>\n<p>The next complication is that, in algorithm sections that are in parallel, you must not create or manipulate objects associated to a specific realm, global, or environment settings object. (Stated in more familiar terms, you must not directly access main-thread artifacts from a background thread.) Doing so would create data races observable to JavaScript code, since after all, your algorithm steps are running in parallel to the JavaScript code.</p>\n</blockquote>\n<p>https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-for-spec-authors</p>\n","m.mentions":{},"m.new_content":{"body":"> The next complication is that, in algorithm sections that are in parallel, you must not create or manipulate objects associated to a specific realm, global, or environment settings object. (Stated in more familiar terms, you must not directly access main-thread artifacts from a background thread.) Doing so would create data races observable to JavaScript code, since after all, your algorithm steps are running in parallel to the JavaScript code.\n\nhttps://html.spec.whatwg.org/multipage/webappapis.html#event-loop-for-spec-authors","format":"org.matrix.custom.html","formatted_body":"<blockquote>\n<p>The next complication is that, in algorithm sections that are in parallel, you must not create or manipulate objects associated to a specific realm, global, or environment settings object. (Stated in more familiar terms, you must not directly access main-thread artifacts from a background thread.) Doing so would create data races observable to JavaScript code, since after all, your algorithm steps are running in parallel to the JavaScript code.</p>\n</blockquote>\n<p>https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-for-spec-authors</p>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$rQ_A5hdDBDG8dfAgtMQPZvD7I1tFFqXyvP8spyxnWo8","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1741746627055,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$pqvFnSdWyibIQ5WlR_6ygjASXpcVaOlt4PpoaW7LZPU"},
{"content":{"body":"relatedly, I wrote up some thoughts about interacting with the HTML event loop from concurrent Swift code here today, if anyone in this forum is interested. https://forums.swift.org/t/ladybird-browser-event-loop-integration-with-swift-concurrency/78453","m.mentions":{},"msgtype":"m.text"},"ts":1741747154897,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$_bXPQPqWRiVhzpmjgxaA18Ij7_cbfGY5-z84Lyrpc8E"},
{"content":{"body":"akaster: you may enjoy my recent braindump in this space. https://github.com/w3c/ServiceWorker/pull/1755#issuecomment-2661941708","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@akaster:serenityos.org\">akaster</a>: you may enjoy my recent braindump in this space. https://github.com/w3c/ServiceWorker/pull/1755#issuecomment-2661941708","m.mentions":{"user_ids":["@akaster:serenityos.org"]},"msgtype":"m.text"},"ts":1741748433626,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$Ul0DRudFI1pDAj81aFKxV0hZAugusjIRaNkLtjKvsSE"},
{"content":{"body":"I pinged Shunya internally. Unfortunately we lost Jeremy to a reorg...","m.mentions":{"user_ids":["@annevk:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$0vPRMnYJkiECHTGmu02gOd_EKz4MmDwYH5nqRhAVv-Y"}},"msgtype":"m.text"},"ts":1741748655499,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$39jEd03cyO8xNdCCYNbhtuhQfldGMAvr01l4LyQWuXY"},
{"content":{"body":"Oh that is interesting yeah. It's definitely the case for me that when I was reading through the Service worker spec a few months ago it was difficult to wrap my head around what spec objects were supposed to be \"agent global\" vs \"event loop\" vs \"browser process/user agent global\" ","msgtype":"m.text"},"ts":1741748683433,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$gaduu9vTEzxloXmLum8gcZq08pG3XHCQt3aJSl1b6iU"},
{"content":{"body":"And the spec at the time seemed to mix subobjects with different lifetimes in the same spec object.","msgtype":"m.text"},"ts":1741748712363,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$moXV0KaEip80vWRnUik13A2fSLBB7Di7-vU7nGPQXXE"},
{"content":{"body":"Layout-computation question: Given the following:\n```html\n<style>\n    .visually-hidden {\n        position: absolute;\n    }\n    .icon {\n        display: inline-block;\n    }\n    dt a {\n        position: relative;\n    }\n</style>\n<body>\n    <dt>\n        <a>\n            <abbr class=\"icon\">\n                <span class=\"visually-hidden\">Non-standard</span>\n            </abbr>\n        </a>\n    </dt>\n</body>\n```\nâ€¦The containing block for the layout node for that `span` should be the `abbr` block, right?\n\nAnd if the `a` block is ending up as the containing block for that `span`, thatâ€™s just wrong?","format":"org.matrix.custom.html","formatted_body":"<p>Layout-computation question: Given the following:</p>\n<pre><code class=\"language-html\">&lt;style&gt;\n    .visually-hidden {\n        position: absolute;\n    }\n    .icon {\n        display: inline-block;\n    }\n    dt a {\n        position: relative;\n    }\n&lt;/style&gt;\n&lt;body&gt;\n    &lt;dt&gt;\n        &lt;a&gt;\n            &lt;abbr class=\"icon\"&gt;\n                &lt;span class=\"visually-hidden\"&gt;Non-standard&lt;/span&gt;\n            &lt;/abbr&gt;\n        &lt;/a&gt;\n    &lt;/dt&gt;\n&lt;/body&gt;\n</code></pre>\n<p>â€¦The containing block for the layout node for that <code>span</code> should be the <code>abbr</code> block, right?</p>\n<p>And if the <code>a</code> block is ending up as the containing block for that <code>span</code>, thatâ€™s just wrong?</p>\n","m.mentions":{},"msgtype":"m.text"},"ts":1741762576569,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$eLOsZ__meSKhhxZEVXQ44gfOa60sra8yYftCROXztHA"},
{"content":{"body":"https://drafts.csswg.org/css-position-3/#def-cb\n> If the box has position: absolute:\n>    The containing block is established by the nearest ancestor box that establishes an absolute positioning containing block [...}\n> \n> Note: Properties that can cause a box to establish an absolute positioning containing block include position, transform, will-change, containâ€¦","format":"org.matrix.custom.html","formatted_body":"<p>https://drafts.csswg.org/css-position-3/#def-cb</p>\n<blockquote>\n<p>If the box has position: absolute:<br>The containing block is established by the nearest ancestor box that establishes an absolute positioning containing block [...}</p>\n<p>Note: Properties that can cause a box to establish an absolute positioning containing block include position, transform, will-change, containâ€¦</p>\n</blockquote>\n","m.mentions":{},"msgtype":"m.text"},"ts":1741763856493,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$z0I9RVnCDEWababtg_8sbYrLf4Ua-_jtkiUCPvF5AGg"},
{"content":{"body":"The spec doesn't say `display: inline-block` can make an abspos containing block","format":"org.matrix.custom.html","formatted_body":"The spec doesn't say <code>display: inline-block</code> can make an abspos containing block","m.mentions":{},"msgtype":"m.text"},"ts":1741763893789,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$IXbcP2o9sMAVSitX7B4AL0iY6Z52__ttklS3AKJHjnM"},
{"content":{"body":"annevk: let me know if you have any thoughts on https://github.com/httpwg/http-extensions/issues/2907 . I'll probably default to Martin's preference absent other thoughts.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: let me know if you have any thoughts on https://github.com/httpwg/http-extensions/issues/2907 . I'll probably default to Martin's preference absent other thoughts.","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1741764431464,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$tmBgw97X1sIXhcIws6o5DZxIxzlKHFkzAX9x0nGBlEM"},
{"content":{"body":"Domenic: I guess I would try to get away with it as it would seem annoying to adopt a different editorial style for the IETF, but it also doesn't matter too much.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: I guess I would try to get away with it as it would seem annoying to adopt a different editorial style for the IETF, but it also doesn't matter too much.","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"ts":1741784328079,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$4BZWfPVA4MfVip9wLCPlnTi8eYOUDXzIQ3MRdCN9rLg"},
{"content":{"body":"No, `inline-block` isn't one of the properties/values that magically creates a CB, so the CB will be generated by the `a` ancestor instead.","format":"org.matrix.custom.html","formatted_body":"No, <code>inline-block</code> isn't one of the properties/values that magically creates a CB, so the CB will be generated by the <code>a</code> ancestor instead.","m.mentions":{"user_ids":["@sideshowbarker:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$eLOsZ__meSKhhxZEVXQ44gfOa60sra8yYftCROXztHA"}},"msgtype":"m.text"},"ts":1741799472200,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$VM597sKSBxwDwm4mljxW2h0JJ66poZnrMqyYvYaNdz8"},
{"content":{"body":"Yagiz Nizipli: can you explain why \"`https://{sub.}?example{.com/}foo`\" as input would throw? I think I end up with a host of `{sub}`.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@yagiznizipli:matrix.org\">Yagiz Nizipli</a>: can you explain why \"<code>https://{sub.}?example{.com/}foo</code>\" as input would throw? I think I end up with a host of <code>{sub}</code>.","m.mentions":{"user_ids":["@yagiznizipli:matrix.org"]},"msgtype":"m.text"},"ts":1741823312670,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$-LLKYUUti4UkwlBYAJxTzMiSofRXgdUsbpBR4J2T7K4"},
{"content":{"body":"* Yagiz Nizipli: can you explain why \"`https://{sub.}?example{.com/}foo`\" as input would throw? I think I end up with a host of `{sub.}`.","format":"org.matrix.custom.html","formatted_body":"* <a href=\"https://matrix.to/#/@yagiznizipli:matrix.org\">Yagiz Nizipli</a>: can you explain why \"<code>https://{sub.}?example{.com/}foo</code>\" as input would throw? I think I end up with a host of <code>{sub.}</code>.","m.mentions":{},"m.new_content":{"body":"Yagiz Nizipli: can you explain why \"`https://{sub.}?example{.com/}foo`\" as input would throw? I think I end up with a host of `{sub.}`.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@yagiznizipli:matrix.org\">Yagiz Nizipli</a>: can you explain why \"<code>https://{sub.}?example{.com/}foo</code>\" as input would throw? I think I end up with a host of <code>{sub.}</code>.","m.mentions":{"user_ids":["@yagiznizipli:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$-LLKYUUti4UkwlBYAJxTzMiSofRXgdUsbpBR4J2T7K4","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1741823503615,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$w2KkF38TXVi_dFP213fbAOs1dbQD4q5r3cjk43h4BV8"},
{"content":{"body":"Iâ€™m not sure. This is the only failing test on Node.js and Cloudflare Workers. I think this test is invalid. ","format":"org.matrix.custom.html","formatted_body":"Iâ€™m not sure. This is the only failing test on Node.js and Cloudflare Workers. I think this test is invalid.","m.relates_to":{"event_id":"$-LLKYUUti4UkwlBYAJxTzMiSofRXgdUsbpBR4J2T7K4","is_falling_back":true,"m.in_reply_to":{"event_id":"$-LLKYUUti4UkwlBYAJxTzMiSofRXgdUsbpBR4J2T7K4"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1741823665135,"senderName":"Yagiz Nizipli","senderId":"@yagiznizipli:matrix.org","id":"$uvIaW8-8TdmdB2KdM3raHMQuQOLQpEXM4shMEprEsm4"},
{"content":{"body":"I see. I think so too.","m.mentions":{},"m.relates_to":{"event_id":"$-LLKYUUti4UkwlBYAJxTzMiSofRXgdUsbpBR4J2T7K4","is_falling_back":true,"m.in_reply_to":{"event_id":"$uvIaW8-8TdmdB2KdM3raHMQuQOLQpEXM4shMEprEsm4"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1741823692639,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$UXZnGpZEdBXvziIjnlbw3KLAyhlH_B3V9djBsYJ3xKo"}
]