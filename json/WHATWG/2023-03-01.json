[
{"content":{"body":"this might be a dumb question, but at step 4 of https://url.spec.whatwg.org/#host-parsing , what exactly is meant by \"UTF-8 decode\"?","msgtype":"m.text"},"ts":1677637122118,"senderName":"zero-one","senderId":"@zero-one:matrix.zer0-one.net","id":"$UIsWNBaw3yPr3lDA17RhGVdKvhPlRc8QV6phNUim_Vg"},
{"content":{"body":"decoded into... UTF32? i.e, the codepoint value?","msgtype":"m.text"},"ts":1677637139817,"senderName":"zero-one","senderId":"@zero-one:matrix.zer0-one.net","id":"$3WuuuOAGS8Zheynpr4F_xOZEyMmca9D-E27IRdIn8Zc"},
{"content":{"body":"the link to the encoding spec doesn't really clear it up for me","msgtype":"m.text"},"ts":1677637184728,"senderName":"zero-one","senderId":"@zero-one:matrix.zer0-one.net","id":"$fZtLCHCSCmPuVL-MAqteg0ganjmT9_-1qRX6yWh9HBo"},
{"content":{"body":"It means \"run the algorithm given at that link\"","msgtype":"m.text"},"ts":1677638199003,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$JmOZKq4np7amxBbEOQ1BG6TABnJI5M8X42YgA0meNrc"},
{"content":{"body":"It's not super explicit; the algorithm at that link yields an I/O queue of scalar values","msgtype":"m.text"},"ts":1677638218432,"senderName":"Jeremy Roman","senderId":"@jbroman:matrix.org","id":"$0i7q4AktAJMOncDPOKdN6KXDmVA2s1ETEEhRca6ZbpI"},
{"content":{"body":"yeah, but the algorithm just says that UTF-8 has a decoder, it doesn't explain what that means","msgtype":"m.text"},"ts":1677638249631,"senderName":"zero-one","senderId":"@zero-one:matrix.zer0-one.net","id":"$SfbmOAY2a-6v-X7GtBr8ZNDAdH3QqTn05VPwApN2_QQ"},
{"content":{"body":"and to run it","msgtype":"m.text"},"ts":1677638253678,"senderName":"zero-one","senderId":"@zero-one:matrix.zer0-one.net","id":"$jxnB4xoXOxH5wc4tOHl93jUJe3kNxgj6tqlCUoQ1cPU"},
{"content":{"body":"Well, if you try to implement it, I wonder where you get stuck","msgtype":"m.text"},"ts":1677638259995,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$eorN_8RQOiiHLYGRcGDyqhQLzOxY-jKL0KZXv9EsarA"},
{"content":{"body":"You need to keep following the links","msgtype":"m.text"},"ts":1677638264804,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$145D-a-jB2DfIaS1j3o2Gu9MIS3amen1MIsBWXtnXf4"},
{"content":{"body":"https://encoding.spec.whatwg.org/#concept-encoding-run , https://encoding.spec.whatwg.org/#concept-encoding-process , etc.","msgtype":"m.text"},"ts":1677638281157,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$ZRTyq0QwhhW94aWhyL1q36PBAU63bI9UVB77zM51i6c"},
{"content":{"body":"at no point does it ever actually construct a string though","msgtype":"m.text"},"ts":1677638296646,"senderName":"Jeremy Roman","senderId":"@jbroman:matrix.org","id":"$ar9St0M6lRBOU9Fu05ozqz6mlg4vR6tphNMwwCF1afI"},
{"content":{"body":"(that I could find)","msgtype":"m.text"},"ts":1677638323384,"senderName":"Jeremy Roman","senderId":"@jbroman:matrix.org","id":"$QN_VbC8uApeVXeWu6TqH78VbeMbuz1yDPwXrYzE4yW0"},
{"content":{"body":"Eventually you end up running the UTF-8 decoder's [handler](https://encoding.spec.whatwg.org/#handler). That is defined at https://encoding.spec.whatwg.org/#ref-for-handler%E2%91%A3 .","format":"org.matrix.custom.html","formatted_body":"Eventually you end up running the UTF-8 decoder's <a href=\"https://encoding.spec.whatwg.org/#handler\">handler</a>. That is defined at https://encoding.spec.whatwg.org/#ref-for-handler%E2%91%A3 .","msgtype":"m.text"},"ts":1677638333453,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$3PyXm0n5IbiMT08ahZ23pzQk7McNwBofH0v3Q5QxuGQ"},
{"content":{"body":"process an item pushes said code points into the I/O queue output, and process a queue does so until it fails or reaches the end of the input queue","msgtype":"m.text"},"ts":1677638434616,"senderName":"Jeremy Roman","senderId":"@jbroman:matrix.org","id":"$AEGruIcwO1bPKalOCRrZx0fyPgpyZQyuxazQF9iF7zg"},
{"content":{"body":"but UTF-8 decode simply returns that I/O queue of scalar values (code points)","msgtype":"m.text"},"ts":1677638470265,"senderName":"Jeremy Roman","senderId":"@jbroman:matrix.org","id":"$heACTZQSWQ3aglQvNGsBmAs5pg8-mrMLX4tfYt9WzUc"},
{"content":{"body":"whereas infra describes a string as consisting of code units and then handwaves at ECMA-262 to say that if you have code units you can think of them as code points","msgtype":"m.text"},"ts":1677638504014,"senderName":"Jeremy Roman","senderId":"@jbroman:matrix.org","id":"$ZFT-CJ-STiNEXX5MxzMxG66LldZM4c5yCibKPLMN07Q"},
{"content":{"body":"even though afaict the linked section of ECMA-262 only actually describes how to interpret code units as code points (and not the reverse), the intent seems to be that a conversion takes place and the URL spec is operating on infra strings","msgtype":"m.text"},"ts":1677638580047,"senderName":"Jeremy Roman","senderId":"@jbroman:matrix.org","id":"$Ut_PSEaH2ySfskcGDMNQjxZlG7cBJvm-6HsuKfQ0YAc"},
{"content":{"body":"(because nothing else would be sensible)","msgtype":"m.text"},"ts":1677638623157,"senderName":"Jeremy Roman","senderId":"@jbroman:matrix.org","id":"$tnjwn_rohAgUmfZ47S9G_q7mo0c5qBbaqu5ESaDj0gY"},
{"content":{"body":"The conversion is defined here: https://encoding.spec.whatwg.org/#from-i-o-queue-convert . I think it is intended to be explicit, but it used to be implicit, and maybe not all cases were updated...","msgtype":"m.text"},"ts":1677638633828,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$ZnYp3-cqteS3tgS-aqynQADtwJuf3hVfKFxBZ20NrlE"},
{"content":{"body":"Or maybe https://github.com/whatwg/infra/issues/319 is saying that it's meant to be implicit, but not defined yet","msgtype":"m.text"},"ts":1677638688171,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$4WI36hndYqSoa1WhfExY_Lv88dma6I2vEvfB931UVjo"}
]