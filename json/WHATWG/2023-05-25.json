[
{"content":{"body":"zcorpan: so weird how `naturalHeight` returns the density-corrected natural height, that's just confusing af","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: so weird how <code>naturalHeight</code> returns the density-corrected natural height, that's just confusing af","msgtype":"m.text"},"ts":1685025570465,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$9w5oM07nUlBcmkN3pY3xilCfviIh-TUzl_6EYGRixps"},
{"content":{"body":"Noam Rosenthal: heyo! I'm integrating https://github.com/whatwg/fetch/pull/1645 in our fetch implementation, could you help me understand why we don't use the internal response for processResponse, and only for processResponseConsumeBody?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: heyo! I'm integrating https://github.com/whatwg/fetch/pull/1645 in our fetch implementation, could you help me understand why we don't use the internal response for processResponse, and only for processResponseConsumeBody?","msgtype":"m.text"},"ts":1685030384414,"senderName":"awesomekling","senderId":"@awesomekling:serenityos.org","id":"$cn_ZOPuT1AstYYsNYauRlVpU9i_lPED9uaJm96FT9aE"},
{"content":{"body":"annevk: https://github.com/ResponsiveImagesCG/picture-element/issues/247 - but the irc log is no longer available and wasn't indexed in waybackmachine","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: https://github.com/ResponsiveImagesCG/picture-element/issues/247 - but the irc log is no longer available and wasn't indexed in waybackmachine","msgtype":"m.text"},"ts":1685030439959,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$Hpcnr0e-_6aQ3ZKt53_LrOdu2wG_MOlrcneZHHnqOoY"},
{"content":{"body":"awesomekling: we only use it to collect the response body, right? I think if we only passed the internal response the caller wouldn't have access to the opaque response, which could be bad as they wouldn't have sufficient information to make the correct security decision","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@awesomekling:serenityos.org\">awesomekling</a>: we only use it to collect the response body, right? I think if we only passed the internal response the caller wouldn't have access to the opaque response, which could be bad as they wouldn't have sufficient information to make the correct security decision","msgtype":"m.text"},"ts":1685030980921,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$OcPJ6zxdr4k190U40r6KjZPYCxm8u8Yw4zWvXZMm5f0"},
{"content":{"body":"awesomekling: e.g., whether it's CORS-same-origin","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@awesomekling:serenityos.org\">awesomekling</a>: e.g., whether it's CORS-same-origin","msgtype":"m.text"},"ts":1685031012901,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$XKmO4FbNGrp4_jhfgQiozKH6g4vGRtd150OrOC0XWHM"},
{"content":{"body":"awesomekling: that's a good question, more for annevk. The way I see it internal response is a mechanism to make sure that invokers of no-cors fetch know that they're dealing with hot unsafe stuff. But I'm not sure it's a good mechanism for that, as the invoker probably wants the data anyway and most HTML callers hide this using \"unsafe response\". We relaxed it for `processResponseConsumeBody` because it's the less \"advanced\" callback but I'm not sure if we should keep it for the other callbacks.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@awesomekling:serenityos.org\">awesomekling</a>: that's a good question, more for <a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>. The way I see it internal response is a mechanism to make sure that invokers of no-cors fetch know that they're dealing with hot unsafe stuff. But I'm not sure it's a good mechanism for that, as the invoker probably wants the data anyway and most HTML callers hide this using &quot;unsafe response&quot;. We relaxed it for <code>processResponseConsumeBody</code> because it's the less &quot;advanced&quot; callback but I'm not sure if we should keep it for the other callbacks.","msgtype":"m.text"},"ts":1685031110245,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$BHETcPMA5ap3ph-JqhbBPdDzi5nniQtrHubaQz5jgYc"},
{"content":{"body":"annevk: hmm, all right. I'm trying to work out if https://github.com/whatwg/html/issues/9066 is \"solvable\" now, or if there are more bits needed","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: hmm, all right. I'm trying to work out if https://github.com/whatwg/html/issues/9066 is &quot;solvable&quot; now, or if there are more bits needed","msgtype":"m.text"},"ts":1685031139281,"senderName":"awesomekling","senderId":"@awesomekling:serenityos.org","id":"$ccq7ymeQ8Z1kh3Zzz3o9SnkX6xv_MQsMsHCo2ioXHpA"},
{"content":{"body":"awesomekling: Noam Rosenthal: looking at the spec again I think we did it wrong; \"internalResponse and nullOrBytes\" should have been \"response and nullOrBytes\"","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@awesomekling:serenityos.org\">awesomekling</a>: <a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: looking at the spec again I think we did it wrong; &quot;internalResponse and nullOrBytes&quot; should have been &quot;response and nullOrBytes&quot;","msgtype":"m.text"},"ts":1685032387358,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$i8jHqSKpIC_sseAFteBmLm4MTlJmG_ISbcrcjVMba8E"},
{"content":{"body":"Same for the one below.","msgtype":"m.text"},"ts":1685032401986,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$vqadjZbZhn_hZ8aQB8ErYfRt2ZHusMAxpvvqay4OJ28"},
{"content":{"body":"We have to use the internal response after all to actually get all the bytes, but we don't have to use the internal response for the first argument and it's safer not to.","msgtype":"m.text"},"ts":1685032448442,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$rhcfVnhK30n67ca5p-Dz-NuqGVwJlPyrhc7ejWWEKlQ"},
{"content":{"body":"I'll put up a PR.","msgtype":"m.text"},"ts":1685032455528,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$DgZHwOCN5C_5Kc1Lvn9fAfzG_9mS2vLowAseHTgQ3Vk"}
]