[
{"content":{"body":"Is it possible to tell from a Fetch request whether the request was initiated by the parser or by script execution?","msgtype":"m.text","org.matrix.msc1767.text":"Is it possible to tell from a Fetch request whether the request was initiated by the parser or by script execution?"},"ts":1666698024398,"senderName":"jgraham","senderId":"@jgraham_:matrix.org","id":"$xOuCnTkAQSsus79Q-byQkHbzWcnpA2AtGVbIPTeLuCY"},
{"content":{"body":"(other things initiating the request are of course possible, but the question is about the difference between `<img src=foo>` and `img=document.createElement(\"img\"); img.src = \"foo\"; document.body.appendChlld(img)`)","format":"org.matrix.custom.html","formatted_body":"(other things initiating the request are of course possible, but the question is about the difference between <code>&lt;img src=foo&gt;</code> and <code>img=document.createElement(&quot;img&quot;); img.src = &quot;foo&quot;; document.body.appendChlld(img)</code>)","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"(other things initiating the request are of course possible, but the question is about the difference between `<img src=foo>` and `img=document.createElement(\"img\"); img.src = \"foo\"; document.body.appendChlld(img)`)","mimetype":"text/plain"},{"body":"(other things initiating the request are of course possible, but the question is about the difference between <code>&lt;img src=foo&gt;</code> and <code>img=document.createElement(&quot;img&quot;); img.src = &quot;foo&quot;; document.body.appendChlld(img)</code>)","mimetype":"text/html"}]},"ts":1666698119687,"senderName":"jgraham","senderId":"@jgraham_:matrix.org","id":"$6WOyibefcDRvw2p2qmyRQ5xsLu2frWvbrEX2DS2yJhQ"},
{"content":{"body":" * (other things initiating the request are of course possible, but the question is about the difference between `<img src=foo>` and `img=document.createElement(\"img\"); img.src = \"foo\"; document.body.appendChlld(img)`)","format":"org.matrix.custom.html","formatted_body":" * (other things initiating the request are of course possible, but the question is about the difference between <code>&lt;img src=foo&gt;</code> and <code>img=document.createElement(&quot;img&quot;); img.src = &quot;foo&quot;; document.body.appendChlld(img)</code>)","m.new_content":{"body":"(other things initiating the request are of course possible, but the question is about the difference between `<img src=foo>` and `img=document.createElement(\"img\"); img.src = \"foo\"; document.body.appendChlld(img)`)","format":"org.matrix.custom.html","formatted_body":"(other things initiating the request are of course possible, but the question is about the difference between <code>&lt;img src=foo&gt;</code> and <code>img=document.createElement(&quot;img&quot;); img.src = &quot;foo&quot;; document.body.appendChlld(img)</code>)","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"(other things initiating the request are of course possible, but the question is about the difference between `<img src=foo>` and `img=document.createElement(\"img\"); img.src = \"foo\"; document.body.appendChlld(img)`)","mimetype":"text/plain"},{"body":"(other things initiating the request are of course possible, but the question is about the difference between <code>&lt;img src=foo&gt;</code> and <code>img=document.createElement(&quot;img&quot;); img.src = &quot;foo&quot;; document.body.appendChlld(img)</code>)","mimetype":"text/html"}]},"m.relates_to":{"event_id":"$6WOyibefcDRvw2p2qmyRQ5xsLu2frWvbrEX2DS2yJhQ","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":" * (other things initiating the request are of course possible, but the question is about the difference between `<img src=foo>` and `img=document.createElement(\"img\"); img.src = \"foo\"; document.body.appendChlld(img)`)","mimetype":"text/plain"},{"body":" * (other things initiating the request are of course possible, but the question is about the difference between <code>&lt;img src=foo&gt;</code> and <code>img=document.createElement(&quot;img&quot;); img.src = &quot;foo&quot;; document.body.appendChlld(img)</code>)","mimetype":"text/html"}]},"ts":1666698124901,"senderName":"jgraham","senderId":"@jgraham_:matrix.org","id":"$-CW_zPytXdvttUNQt6YHMDhj6rJZdE8_JOB1HQtwBa0"},
{"content":{"body":"> <@jgraham_:matrix.org> (other things initiating the request are of course possible, but the question is about the difference between `<img src=foo>` and `img=document.createElement(\"img\"); img.src = \"foo\"; document.body.appendChlld(img)`)\n\nhttps://fetch.spec.whatwg.org/#concept-request-parser-metadata seems to fit the bill","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$6WOyibefcDRvw2p2qmyRQ5xsLu2frWvbrEX2DS2yJhQ?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@jgraham_:matrix.org\">@jgraham_:matrix.org</a><br>(other things initiating the request are of course possible, but the question is about the difference between <code>&lt;img src=foo&gt;</code> and <code>img=document.createElement(\"img\"); img.src = \"foo\"; document.body.appendChlld(img)</code>)</blockquote></mx-reply>https://fetch.spec.whatwg.org/#concept-request-parser-metadata seems to fit the bill","m.relates_to":{"m.in_reply_to":{"event_id":"$6WOyibefcDRvw2p2qmyRQ5xsLu2frWvbrEX2DS2yJhQ"}},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":"> <@jgraham_:matrix.org> (other things initiating the request are of course possible, but the question is about the difference between `<img src=foo>` and `img=document.createElement(\"img\"); img.src = \"foo\"; document.body.appendChlld(img)`)\n\nhttps://fetch.spec.whatwg.org/#concept-request-parser-metadata seems to fit the bill","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$6WOyibefcDRvw2p2qmyRQ5xsLu2frWvbrEX2DS2yJhQ?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@jgraham_:matrix.org\">@jgraham_:matrix.org</a><br>(other things initiating the request are of course possible, but the question is about the difference between <code>&lt;img src=foo&gt;</code> and <code>img=document.createElement(\"img\"); img.src = \"foo\"; document.body.appendChlld(img)</code>)</blockquote></mx-reply>https://fetch.spec.whatwg.org/#concept-request-parser-metadata seems to fit the bill","mimetype":"text/html"}]},"ts":1666699769560,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$M2SoWUxSq6FqDoZ_qLWzdB0IxgxTsR-XUPOVT7vrsaA"},
{"content":{"body":"Hmm only used for scripts it looks like","msgtype":"m.text","org.matrix.msc1767.text":"Hmm only used for scripts it looks like"},"ts":1666699803248,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$cpfOkx4BuxbrqAtsaFTCfH9jThdPdYNY99sncHgtqhs"},
{"content":{"body":"Because that's all CSP needs","msgtype":"m.text","org.matrix.msc1767.text":"Because that's all CSP needs"},"ts":1666699841159,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$NOgbEfwz0NHkzG9R4obC7sQk91nHHqrQ_ok_R2NMEWU"},
{"content":{"body":"I had indeed missed that one, but indeed it doesn't seem to work without setting the flag on all element initiated fetches.","msgtype":"m.text","org.matrix.msc1767.text":"I had indeed missed that one, but indeed it doesn't seem to work without setting the flag on all element initiated fetches."},"ts":1666701563429,"senderName":"jgraham","senderId":"@jgraham_:matrix.org","id":"$I7-moec9nNblxHjAkRbtwAlvx4V-jzt-kWQu245ZBrw"}
]