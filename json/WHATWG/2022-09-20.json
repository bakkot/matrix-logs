[
{"content":{"body":"Domenic: curious, how are you reviewing the session history rewrite, I mean using what kinds of tools?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: curious, how are you reviewing the session history rewrite, I mean using what kinds of tools?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Domenic: curious, how are you reviewing the session history rewrite, I mean using what kinds of tools?","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: curious, how are you reviewing the session history rewrite, I mean using what kinds of tools?","mimetype":"text/html"}]},"ts":1663654579461,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$bgEzaNdZ2aSaqd523msZYX0VLLwAAC78ydaTZ2Ha_Jw"},
{"content":{"body":"I found another Chromium-originating WPT that assumes that on non-initial about:blank, `location.href == \"about:blank\"` implies that the `about:blank` DOM has been built. Still no idea if this is a thing test authors assume or a thing that Web authors also assume.","format":"org.matrix.custom.html","formatted_body":"I found another Chromium-originating WPT that assumes that on non-initial about:blank, <code>location.href == &quot;about:blank&quot;</code> implies that the <code>about:blank</code> DOM has been built. Still no idea if this is a thing test authors assume or a thing that Web authors also assume.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"I found another Chromium-originating WPT that assumes that on non-initial about:blank, `location.href == \"about:blank\"` implies that the `about:blank` DOM has been built. Still no idea if this is a thing test authors assume or a thing that Web authors also assume.","mimetype":"text/plain"},{"body":"I found another Chromium-originating WPT that assumes that on non-initial about:blank, <code>location.href == &quot;about:blank&quot;</code> implies that the <code>about:blank</code> DOM has been built. Still no idea if this is a thing test authors assume or a thing that Web authors also assume.","mimetype":"text/html"}]},"ts":1663661875656,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$mPC0FZ4Cc07MD9jIgZUQ6g8xhPRMfHTRz0JV9Uz18b4"},
{"content":{"body":" * I found another Chromium-originating WPT that assumes that on non-initial about:blank, `location.href == \"about:blank\"` implies that the `about:blank` DOM has been built. Still no idea if this is a thing test authors assume or a thing that Web authors also assume.","format":"org.matrix.custom.html","formatted_body":" * I found another Chromium-originating WPT that assumes that on non-initial about:blank, <code>location.href == &quot;about:blank&quot;</code> implies that the <code>about:blank</code> DOM has been built. Still no idea if this is a thing test authors assume or a thing that Web authors also assume.","m.new_content":{"body":"I found another Chromium-originating WPT that assumes that on non-initial about:blank, `location.href == \"about:blank\"` implies that the `about:blank` DOM has been built. Still no idea if this is a thing test authors assume or a thing that Web authors also assume.","format":"org.matrix.custom.html","formatted_body":"I found another Chromium-originating WPT that assumes that on non-initial about:blank, <code>location.href == &quot;about:blank&quot;</code> implies that the <code>about:blank</code> DOM has been built. Still no idea if this is a thing test authors assume or a thing that Web authors also assume.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"I found another Chromium-originating WPT that assumes that on non-initial about:blank, `location.href == \"about:blank\"` implies that the `about:blank` DOM has been built. Still no idea if this is a thing test authors assume or a thing that Web authors also assume.","mimetype":"text/plain"},{"body":"I found another Chromium-originating WPT that assumes that on non-initial about:blank, <code>location.href == &quot;about:blank&quot;</code> implies that the <code>about:blank</code> DOM has been built. Still no idea if this is a thing test authors assume or a thing that Web authors also assume.","mimetype":"text/html"}]},"m.relates_to":{"event_id":"$mPC0FZ4Cc07MD9jIgZUQ6g8xhPRMfHTRz0JV9Uz18b4","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":" * I found another Chromium-originating WPT that assumes that on non-initial about:blank, `location.href == \"about:blank\"` implies that the `about:blank` DOM has been built. Still no idea if this is a thing test authors assume or a thing that Web authors also assume.","mimetype":"text/plain"},{"body":" * I found another Chromium-originating WPT that assumes that on non-initial about:blank, <code>location.href == &quot;about:blank&quot;</code> implies that the <code>about:blank</code> DOM has been built. Still no idea if this is a thing test authors assume or a thing that Web authors also assume.","mimetype":"text/html"}]},"ts":1663661908248,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$DXAAWEdjIYmjryZbYoCcriSz5g7csbDDv17rWfU287A"},
{"content":{"body":"> <@hsivonen:mozilla.org> I found another Chromium-originating WPT that assumes that on non-initial about:blank, `location.href == \"about:blank\"` implies that the `about:blank` DOM has been built. Still no idea if this is a thing test authors assume or a thing that Web authors also assume.\n\nhttps://github.com/web-platform-tests/wpt/blob/master/content-security-policy/inheritance/window-open-local-after-network-scheme.sub.html","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$mPC0FZ4Cc07MD9jIgZUQ6g8xhPRMfHTRz0JV9Uz18b4?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@hsivonen:mozilla.org\">@hsivonen:mozilla.org</a><br>I found another Chromium-originating WPT that assumes that on non-initial about:blank, <code>location.href == \"about:blank\"</code> implies that the <code>about:blank</code> DOM has been built. Still no idea if this is a thing test authors assume or a thing that Web authors also assume.</blockquote></mx-reply>https://github.com/web-platform-tests/wpt/blob/master/content-security-policy/inheritance/window-open-local-after-network-scheme.sub.html","m.relates_to":{"m.in_reply_to":{"event_id":"$mPC0FZ4Cc07MD9jIgZUQ6g8xhPRMfHTRz0JV9Uz18b4"}},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":"> <@hsivonen:mozilla.org> I found another Chromium-originating WPT that assumes that on non-initial about:blank, `location.href == \"about:blank\"` implies that the `about:blank` DOM has been built. Still no idea if this is a thing test authors assume or a thing that Web authors also assume.\n\nhttps://github.com/web-platform-tests/wpt/blob/master/content-security-policy/inheritance/window-open-local-after-network-scheme.sub.html","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$mPC0FZ4Cc07MD9jIgZUQ6g8xhPRMfHTRz0JV9Uz18b4?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@hsivonen:mozilla.org\">@hsivonen:mozilla.org</a><br>I found another Chromium-originating WPT that assumes that on non-initial about:blank, <code>location.href == \"about:blank\"</code> implies that the <code>about:blank</code> DOM has been built. Still no idea if this is a thing test authors assume or a thing that Web authors also assume.</blockquote></mx-reply>https://github.com/web-platform-tests/wpt/blob/master/content-security-policy/inheritance/window-open-local-after-network-scheme.sub.html","mimetype":"text/html"}]},"ts":1663661936022,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$ZzJfUFO44DApExj1a9aI0QsmGFe9yFxAGDf4jaiazwU"},
{"content":{"body":"> <@hsivonen:mozilla.org> https://github.com/web-platform-tests/wpt/blob/master/content-security-policy/inheritance/window-open-local-after-network-scheme.sub.html\n\nThe spec sure reads to me like the URL of the `Location` object should update when a new `Document` is created by the parse as opposed to being deferred to the end of the parse: https://html.spec.whatwg.org/#concept-location-url","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$ZzJfUFO44DApExj1a9aI0QsmGFe9yFxAGDf4jaiazwU?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@hsivonen:mozilla.org\">@hsivonen:mozilla.org</a><br>https://github.com/web-platform-tests/wpt/blob/master/content-security-policy/inheritance/window-open-local-after-network-scheme.sub.html</blockquote></mx-reply>The spec sure reads to me like the URL of the <code>Location</code> object should update when a new <code>Document</code> is created by the parse as opposed to being deferred to the end of the parse: https://html.spec.whatwg.org/#concept-location-url","m.relates_to":{"m.in_reply_to":{"event_id":"$ZzJfUFO44DApExj1a9aI0QsmGFe9yFxAGDf4jaiazwU"}},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":"> <@hsivonen:mozilla.org> https://github.com/web-platform-tests/wpt/blob/master/content-security-policy/inheritance/window-open-local-after-network-scheme.sub.html\n\nThe spec sure reads to me like the URL of the `Location` object should update when a new `Document` is created by the parse as opposed to being deferred to the end of the parse: https://html.spec.whatwg.org/#concept-location-url","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$ZzJfUFO44DApExj1a9aI0QsmGFe9yFxAGDf4jaiazwU?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@hsivonen:mozilla.org\">@hsivonen:mozilla.org</a><br>https://github.com/web-platform-tests/wpt/blob/master/content-security-policy/inheritance/window-open-local-after-network-scheme.sub.html</blockquote></mx-reply>The spec sure reads to me like the URL of the <code>Location</code> object should update when a new <code>Document</code> is created by the parse as opposed to being deferred to the end of the parse: https://html.spec.whatwg.org/#concept-location-url","mimetype":"text/html"}]},"ts":1663662104509,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$Z8HmCs5XwxNKu3ds1W1rf7Ex-MT-pVN6Nl-BXqIunuo"},
{"content":{"body":"Hmm. Chromium seems to force synchronous HTML parsing for `javascript:` URLs. Is there a justification for that? (Gecko doesn't do that.)","format":"org.matrix.custom.html","formatted_body":"Hmm. Chromium seems to force synchronous HTML parsing for <code>javascript:</code> URLs. Is there a justification for that? (Gecko doesn't do that.)","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Hmm. Chromium seems to force synchronous HTML parsing for `javascript:` URLs. Is there a justification for that? (Gecko doesn't do that.)","mimetype":"text/plain"},{"body":"Hmm. Chromium seems to force synchronous HTML parsing for <code>javascript:</code> URLs. Is there a justification for that? (Gecko doesn't do that.)","mimetype":"text/html"}]},"ts":1663663337732,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$RB5b3hS3tiI1iARGIhgblFAxW1zLTNRG9-9dTyzBd8U"},
{"content":{"body":"I suspect Chromium's implementation of how about:blank URLs result in a (zero-length) stream of data might have the side effect of the HTML tokenizer getting pumped to EOF in the same task that creates the `Document` object. Is that the case, Yoav Weiss ?","format":"org.matrix.custom.html","formatted_body":"I suspect Chromium's implementation of how about:blank URLs result in a (zero-length) stream of data might have the side effect of the HTML tokenizer getting pumped to EOF in the same task that creates the <code>Document</code> object. Is that the case, <a href=\"https://matrix.to/#/@yoavweiss:matrix.org\">Yoav Weiss</a> ?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"I suspect Chromium's implementation of how about:blank URLs result in a (zero-length) stream of data might have the side effect of the HTML tokenizer getting pumped to EOF in the same task that creates the `Document` object. Is that the case, Yoav Weiss ?","mimetype":"text/plain"},{"body":"I suspect Chromium's implementation of how about:blank URLs result in a (zero-length) stream of data might have the side effect of the HTML tokenizer getting pumped to EOF in the same task that creates the <code>Document</code> object. Is that the case, <a href=\"https://matrix.to/#/@yoavweiss:matrix.org\">Yoav Weiss</a> ?","mimetype":"text/html"}]},"ts":1663663796394,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$UazW5bJTLyMmi5xFlLlMQQXyRwL9sl2F3myOHH1MucE"},
{"content":{"body":"My current patch removes the remains of the Netscape-era HTML parser that we were using for `about:blank` only, but it looks a lot like I might have to re-introduce an `about:blank`-specific parser or parse mode for non-initial `about:blank` if Web sites assume what Chromium-originating WPTs assume. :-(","format":"org.matrix.custom.html","formatted_body":"My current patch removes the remains of the Netscape-era HTML parser that we were using for <code>about:blank</code> only, but it looks a lot like I might have to re-introduce an <code>about:blank</code>-specific parser or parse mode for non-initial <code>about:blank</code> if Web sites assume what Chromium-originating WPTs assume. :-(","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"My current patch removes the remains of the Netscape-era HTML parser that we were using for `about:blank` only, but it looks a lot like I might have to re-introduce an `about:blank`-specific parser or parse mode for non-initial `about:blank` if Web sites assume what Chromium-originating WPTs assume. :-(","mimetype":"text/plain"},{"body":"My current patch removes the remains of the Netscape-era HTML parser that we were using for <code>about:blank</code> only, but it looks a lot like I might have to re-introduce an <code>about:blank</code>-specific parser or parse mode for non-initial <code>about:blank</code> if Web sites assume what Chromium-originating WPTs assume. :-(","mimetype":"text/html"}]},"ts":1663663900917,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$ee3lKX_OWa_X01r3r_UVkCUsqFEhDr-U87WSSk4kwrQ"}
]