[
{"content":{"body":"jarhar: The http://wpt.live/html/semantics/forms/the-button-element/button-submit-remove-children.html times out in WebKit because (as far as I can see) the `load` event never fires at the iframe that’s the target of the form action in that test. Any clue as to why the event never fires?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jarhar:matrix.org\">jarhar</a>: The http://wpt.live/html/semantics/forms/the-button-element/button-submit-remove-children.html times out in WebKit because (as far as I can see) the <code>load</code> event never fires at the iframe that’s the target of the form action in that test. Any clue as to why the event never fires?","msgtype":"m.text"},"ts":1695089849580,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$-RJv7jK2oLFsP7unV9qluqfWqfbDNYVbj5Lyg8TO8l8"},
{"content":{"body":" * jarhar: The http://wpt.live/html/semantics/forms/the-button-element/button-submit-remove-children.html test times out in WebKit because (as far as I can see) the `load` event never fires at the iframe that’s the target of the form action in that test. Any clue as to why the event never fires?","format":"org.matrix.custom.html","formatted_body":" * <a href=\"https://matrix.to/#/@jarhar:matrix.org\">jarhar</a>: The http://wpt.live/html/semantics/forms/the-button-element/button-submit-remove-children.html test times out in WebKit because (as far as I can see) the <code>load</code> event never fires at the iframe that’s the target of the form action in that test. Any clue as to why the event never fires?","m.new_content":{"body":"jarhar: The http://wpt.live/html/semantics/forms/the-button-element/button-submit-remove-children.html test times out in WebKit because (as far as I can see) the `load` event never fires at the iframe that’s the target of the form action in that test. Any clue as to why the event never fires?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jarhar:matrix.org\">jarhar</a>: The http://wpt.live/html/semantics/forms/the-button-element/button-submit-remove-children.html test times out in WebKit because (as far as I can see) the <code>load</code> event never fires at the iframe that’s the target of the form action in that test. Any clue as to why the event never fires?","msgtype":"m.text"},"m.relates_to":{"event_id":"$-RJv7jK2oLFsP7unV9qluqfWqfbDNYVbj5Lyg8TO8l8","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695089858428,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$DvfhDr0tZ4mdVnBkT0UXINiMIqCOS4-LOXFO2gbRmiw"},
{"content":{"body":"hmm, the fact that im not seeing a 404 page in the iframe makes me wonder if webkit legitimately fails this test","m.relates_to":{"event_id":"$-RJv7jK2oLFsP7unV9qluqfWqfbDNYVbj5Lyg8TO8l8","is_falling_back":true,"m.in_reply_to":{"event_id":"$-RJv7jK2oLFsP7unV9qluqfWqfbDNYVbj5Lyg8TO8l8"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1695090271328,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$sdPENTwsN9Xf9ciB3b0PTrMPqm9tjRP8pBpcVYZ6s7M"},
{"content":{"body":"i wrote this test in response to one of many regression bugs that were filed when i did a refactor to form submission","m.relates_to":{"event_id":"$-RJv7jK2oLFsP7unV9qluqfWqfbDNYVbj5Lyg8TO8l8","is_falling_back":true,"m.in_reply_to":{"event_id":"$sdPENTwsN9Xf9ciB3b0PTrMPqm9tjRP8pBpcVYZ6s7M"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1695090321106,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$P1zl2BPRmzwy4yLvBAemwVrHkJ5xxzaqRc5KZ9WoR_8"},
{"content":{"body":"i wrote it here: https://chromium-review.googlesource.com/c/chromium/src/+/1983547","m.relates_to":{"event_id":"$-RJv7jK2oLFsP7unV9qluqfWqfbDNYVbj5Lyg8TO8l8","is_falling_back":true,"m.in_reply_to":{"event_id":"$P1zl2BPRmzwy4yLvBAemwVrHkJ5xxzaqRc5KZ9WoR_8"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1695090377700,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$H9xkiXxn9wtM_lpmDvwLxYpQdEqQm7S1enJqdbaFBfM"},
{"content":{"body":"I see","m.relates_to":{"event_id":"$-RJv7jK2oLFsP7unV9qluqfWqfbDNYVbj5Lyg8TO8l8","is_falling_back":true,"m.in_reply_to":{"event_id":"$H9xkiXxn9wtM_lpmDvwLxYpQdEqQm7S1enJqdbaFBfM"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1695090391581,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$RwuygON_o21potdeKP1KHKs6_IhD3smaL6wnXF96hnc"},
{"content":{"body":"lol this was really complicated, but i suppose you could try implementing this patch in webkit to see if it makes the test pass","m.relates_to":{"event_id":"$-RJv7jK2oLFsP7unV9qluqfWqfbDNYVbj5Lyg8TO8l8","is_falling_back":true,"m.in_reply_to":{"event_id":"$RwuygON_o21potdeKP1KHKs6_IhD3smaL6wnXF96hnc"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1695090472067,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$V5cHSGXebNKMTte6f5CA1LQJntUDvyCxXAVo8lyAjlE"},
{"content":{"body":"Yeah I'll try it I guess","m.relates_to":{"event_id":"$-RJv7jK2oLFsP7unV9qluqfWqfbDNYVbj5Lyg8TO8l8","is_falling_back":true,"m.in_reply_to":{"event_id":"$V5cHSGXebNKMTte6f5CA1LQJntUDvyCxXAVo8lyAjlE"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1695090550587,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$QWZbrb_jdUAeyG2y59aNkBZy_uhluOCSHyreGRPj-Bc"},
{"content":{"body":"This is the only complete fail in WebKit in https://wpt.fyi/results/html/semantics/forms/the-button-element — so, would be nice to make it all go green","m.relates_to":{"event_id":"$-RJv7jK2oLFsP7unV9qluqfWqfbDNYVbj5Lyg8TO8l8","is_falling_back":true,"m.in_reply_to":{"event_id":"$QWZbrb_jdUAeyG2y59aNkBZy_uhluOCSHyreGRPj-Bc"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1695090729980,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$cs_KFXau74Hqwi_BrJr3VFqLLmE4goEgz_hNl1izK3Y"},
{"content":{"body":"that said, there is also https://wpt.fyi/results/html/semantics/forms/the-button-element/button-click-submits.html, which has a test that fails both in Blink and WebKit (but not in Gecko)","m.relates_to":{"event_id":"$-RJv7jK2oLFsP7unV9qluqfWqfbDNYVbj5Lyg8TO8l8","is_falling_back":true,"m.in_reply_to":{"event_id":"$cs_KFXau74Hqwi_BrJr3VFqLLmE4goEgz_hNl1izK3Y"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1695090786712,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$VA0OpVSYfY8Q8BHznxL0JS9Bj3KSpjArUIfAnRoQq78"},
{"content":{"body":"OK, ported that patch but in WebKit, still timing out anyway.","m.relates_to":{"event_id":"$-RJv7jK2oLFsP7unV9qluqfWqfbDNYVbj5Lyg8TO8l8","is_falling_back":true,"m.in_reply_to":{"event_id":"$VA0OpVSYfY8Q8BHznxL0JS9Bj3KSpjArUIfAnRoQq78"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1695094179868,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$4UbvaQ22WGpUCGd4n4jQ46ap0B-atnVp35BEqEUwtnk"},
{"content":{"body":"so I guess for now I’ll put this test on the back burner and look at it more again some time later","m.relates_to":{"event_id":"$-RJv7jK2oLFsP7unV9qluqfWqfbDNYVbj5Lyg8TO8l8","is_falling_back":true,"m.in_reply_to":{"event_id":"$4UbvaQ22WGpUCGd4n4jQ46ap0B-atnVp35BEqEUwtnk"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1695094211881,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$qvQmU5TA6_UymTDlpNXA4tJuk-deOWdNk9HeeO0vjNI"},
{"content":{"body":"Domenic: can you review the encoding-parse a URL refactor?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: can you review the encoding-parse a URL refactor?","msgtype":"m.text"},"ts":1695106390455,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$EG5mFrlmRNfHqQJDydaR28iQUK-7X9fhlsqt_kiE9v8"},
{"content":{"body":"Would be nice to unblock some of the follow-up work","msgtype":"m.text"},"ts":1695106406420,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$pGjsiVDh7e0lDYLOzumMCiQyOVTHattRAIwYhUlAKOY"},
{"content":{"body":"zcorpan: regarding the media/supports thing, I felt it was a bit inconsistent that in CSS those are separate @ rules and in the link element they are both folded into the `media` attribute. perhaps there's a more elegant solution?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: regarding the media/supports thing, I felt it was a bit inconsistent that in CSS those are separate @ rules and in the link element they are both folded into the <code>media</code> attribute. perhaps there's a more elegant solution?","msgtype":"m.text"},"ts":1695108924687,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$cnVrGKpW7E0VNrc9n3yDxnrsKvYtx1MmK3syZVopLFo"},
{"content":{"body":"Noam Rosenthal: perhaps. We want it to fail closed, so that the stylesheet isn't applied in legacy browsers. (But maybe the importance of this property is debatable, since it's temporary and we have faster update cycles now compared to, say, a decade ago)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: perhaps. We want it to fail closed, so that the stylesheet isn't applied in legacy browsers. (But maybe the importance of this property is debatable, since it's temporary and we have faster update cycles now compared to, say, a decade ago)","msgtype":"m.text"},"ts":1695109016169,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$RoAUa4_JkTWbp_KHQp8BrC2NtSaGjWT_1ZFfjrHnF8U"},
{"content":{"body":"... I would expect it to be in a separate cssSupports attribute, and deal with legacy in a way that's a bit more consistent with the meaning of the attributes","msgtype":"m.text"},"ts":1695109054820,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$9RKXrGFzLzRCRxUzfG-vpM4zACyaiP-rikU-c0eOnB4"},
{"content":{"body":"Ways to fail closed other than stuffing it in `media` (and still work in `head`): change `rel` to something else (seems not so elegant long term), use `type` attribute (should ideally be possible to not have to write `text/css` since we made that optional)","format":"org.matrix.custom.html","formatted_body":"Ways to fail closed other than stuffing it in <code>media</code> (and still work in <code>head</code>): change <code>rel</code> to something else (seems not so elegant long term), use <code>type</code> attribute (should ideally be possible to not have to write <code>text/css</code> since we made that optional)","msgtype":"m.text"},"ts":1695109165425,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$tQVLYy1Kr5cOaEht6gr-1rtWi8D0OUMPafAdhcae1Zs"},
{"content":{"body":"Maybe we can use a new attribute and in the transition period people can use `media=\"not all\"` and change that with script (or use other rel/type to avoid the download)","format":"org.matrix.custom.html","formatted_body":"Maybe we can use a new attribute and in the transition period people can use <code>media=\"not all\"</code> and change that with script (or use other rel/type to avoid the download)","msgtype":"m.text"},"ts":1695109297425,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$6HUm_WhK_XFHmROME5AQj2gdRR3vKNSX6KV4xuP01R8"},
{"content":{"body":"For now there is a convenient way to do this:\n```\n<style>\n   @import url(\"...\") supports(...);\n</style>\n```\n\nI wonder if making the media attribute inconsistent is worth it","format":"org.matrix.custom.html","formatted_body":"<p>For now there is a convenient way to do this:</p>\n<pre><code>&lt;style&gt;\n   @import url(\"...\") supports(...);\n&lt;/style&gt;\n</code></pre>\n<p>I wonder if making the media attribute inconsistent is worth it</p>\n","msgtype":"m.text"},"ts":1695109302851,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$xcdmRzoKI_EEkgm1QmqnG7l0a6vQHp0Cn74Aw1K_upw"},
{"content":{"body":"good point","msgtype":"m.text"},"ts":1695109321915,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$cs59yUKsEQdhGTtg5Sve8J_618QtAyoavSL8mqMTlkE"},
{"content":{"body":"I didn't quite get if adding this as a link provides anything material","msgtype":"m.text"},"ts":1695109326442,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$k6vadarD3WMiS64pyN-t492OlrfkDO4o_s8L8UCkhoM"},
{"content":{"body":"It might be loaded earlier by the speculative parser. Not sure if all browsers speculatively load `@import`s","format":"org.matrix.custom.html","formatted_body":"It might be loaded earlier by the speculative parser. Not sure if all browsers speculatively load <code>@import</code>s","msgtype":"m.text"},"ts":1695109367456,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$JOZqC039nTlGZ9Y7ZOFxbDwjvvbg-sudZ4F0pehJ0YE"},
{"content":{"body":"they don't in chrome AFAIK","msgtype":"m.text"},"ts":1695109383905,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$PxKO1GULf8FE-pLXjvfI9OLNYBjrbwmA3sRKp3__PpU"},
{"content":{"body":"I think adding a `rel=css` or `rel=style` which can take `layer` and `cssSupports` attributes is not that bad, and when everyone supports layers we can make them aliases of each other","format":"org.matrix.custom.html","formatted_body":"I think adding a <code>rel=css</code> or <code>rel=style</code> which can take <code>layer</code> and <code>cssSupports</code> attributes is not that bad, and when everyone supports layers we can make them aliases of each other","msgtype":"m.text"},"ts":1695109512923,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$qbbkyOPSfbTG-caSAkoIcYfib_D4hbjU3Sj46nD82aU"},
{"content":{"body":"I mean it's not that pretty but it's at least straightforward in a way","msgtype":"m.text"},"ts":1695109616364,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$JZTxNeBa0KL1_AVIKaRmXyS4r24BHpUdTh_WlvmIJZ4"},
{"content":{"body":"I don't like adding alias `rel`s, but I'm warming up to just adding `supports` attribute and let it fail open in legacy. Use `style` element or script hack if you need to fail closed","format":"org.matrix.custom.html","formatted_body":"I don't like adding alias <code>rel</code>s, but I'm warming up to just adding <code>supports</code> attribute and let it fail open in legacy. Use <code>style</code> element or script hack if you need to fail closed","msgtype":"m.text"},"ts":1695109660905,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$YTkRfhOelZL1tkX9izxWyzx25-BHZxVHri9qw3Ukpug"},
{"content":{"body":"The linked stylesheet can repeat the `@supports` too if you can control what it contains","format":"org.matrix.custom.html","formatted_body":"The linked stylesheet can repeat the <code>@supports</code> too if you can control what it contains","msgtype":"m.text"},"ts":1695109709212,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$zPL5IqKFzblNPaCc6y2PxwRunBSbPj5jo2C0cRR8Hp0"},
{"content":{"body":"yea that's probably safer, you use the supports attribute as an optimization to avoid loading the link at all rather than as a way to not apply the CSS","msgtype":"m.text"},"ts":1695109758371,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$x182cGiX3wZd6wPT-A90O0sisX3ee5FhKMqUK43G_9M"}
]