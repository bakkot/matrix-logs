[
{"content":{"body":"... actually, I think we can get rid of \"ongoing API method tracker\" as well since it's all now in parameters","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$8iG0EezSswWToun0PB4rYowmpkxGxhR-RpLbcnIWYBQ"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760425366257,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$MoEsboJw3X1P4ZeT42Aca7n5_Yok3uG3By6-5dwu6SU"},
{"content":{"body":"(but will look at that as a followup)","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$MoEsboJw3X1P4ZeT42Aca7n5_Yok3uG3By6-5dwu6SU"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760427600319,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$VOAS6Sr6TH5V03NUGCIWCAkql27Va2a3vcnMOukf8io"},
{"content":{"body":"Noam Rosenthal: I think (unless I missed something) that we broke traversal navigations: The traverse navigate event (which would set the promoted flag) runs [async](https://html.spec.whatwg.org/#updating-the-traversable:fire-a-traverse-navigate-event), therefore _after_ we [created the result](https://whatpr.org/html/11762/305f5a1...d89ce86/nav-history-apis.html#:~:text=Return%20a%20navigation%20API%20method%20tracker%2Dderived%20result%20for%20apiMethodTracker%20%2E,-An), which checks aborts if the promoted flag is not set.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: I think (unless I missed something) that we broke traversal navigations: The traverse navigate event (which would set the promoted flag) runs <a href=\"https://html.spec.whatwg.org/#updating-the-traversable:fire-a-traverse-navigate-event\">async</a>, therefore <em>after</em> we <a href=\"https://whatpr.org/html/11762/305f5a1...d89ce86/nav-history-apis.html#:~:text=Return%20a%20navigation%20API%20method%20tracker%2Dderived%20result%20for%20apiMethodTracker%20%2E,-An\">created the result</a>, which checks aborts if the promoted flag is not set.","m.mentions":{"user_ids":["@noamr:matrix.org"]},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$VOAS6Sr6TH5V03NUGCIWCAkql27Va2a3vcnMOukf8io"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760440903028,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$yLDw0oFvuD7yH1kjAPGbk1IgB9AlXqgfYuDDDql6Jvs"},
{"content":{"body":"oh ok those checks should only occur for reload/navigate","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$yLDw0oFvuD7yH1kjAPGbk1IgB9AlXqgfYuDDDql6Jvs"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760451998629,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$f_rAoBi9GKX9Af8f21I3RXW8alqrOqk3bWam9u_bK-A"}
]