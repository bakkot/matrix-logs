[
{"content":{"body":"bkardell: yeah a new issue for the follow-up stuff would be great","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@bkardell:igalia.com\">bkardell</a>: yeah a new issue for the follow-up stuff would be great","m.mentions":{"user_ids":["@bkardell:igalia.com"]},"msgtype":"m.text"},"ts":1695965334725,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$MRouubd77rFAXR8BfNbd0Jrudjry9-8wvsdOiZrENEY"},
{"content":{"body":"How high is the barrier to removing redundant parse errors from the HTML spec? I'd assume this should be coordinated with another PR to remove the respective errors from html5lib-tests?","msgtype":"m.text"},"ts":1695965632746,"senderName":"martin","senderId":"@martin:push-f.com","id":"$9nx77P6EwSUbb_GRhFpxkKR_RzYRxkt3lCTsGfaxXRg"},
{"content":{"body":"Domenic: so when \"prepare to run script\" is called the currently running task is always non-null? So it's never called from a microtask? I.e., you cannot get there through calling navigate() from a promise callback or some such?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: so when \"prepare to run script\" is called the currently running task is always non-null? So it's never called from a microtask? I.e., you cannot get there through calling navigate() from a promise callback or some such?","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"ts":1695969826565,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$0xUCeEOUjxpxUHOthwLs2v7bRcabpdWb9TCl29BP3Mo"},
{"content":{"body":"What's up with the Wattsi builds failing for HTML PRs?","msgtype":"m.text"},"ts":1695970109462,"senderName":"martin","senderId":"@martin:push-f.com","id":"$HfJXgFa46LKdTZAs8AGRQC55n3Ex84kN9YVaxphZ9Eg"},
{"content":{"body":" * What's up with the Wattsi server errors for HTML PRs?","m.new_content":{"body":"What's up with the Wattsi server errors for HTML PRs?","msgtype":"m.text"},"m.relates_to":{"event_id":"$HfJXgFa46LKdTZAs8AGRQC55n3Ex84kN9YVaxphZ9Eg","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695970127946,"senderName":"martin","senderId":"@martin:push-f.com","id":"$a8iaMcjhfWavJNxmStXSXZqBLggaIa6vL1w5HTrPI_Y"},
{"content":{"body":"martin: what kind of server error?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@martin:push-f.com\">martin</a>: what kind of server error?","m.mentions":{"user_ids":["@martin:push-f.com"]},"msgtype":"m.text"},"ts":1695970198869,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$rJOlENANOntZwkUn1v7gR3tCTf2CIxWXiXBosH4MC9o"},
{"content":{"body":"> <@annevk:matrix.org> martin: what kind of server error?\n\ne.g. https://github.com/whatwg/html/pull/9797 or https://github.com/whatwg/html/pull/9809","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$rJOlENANOntZwkUn1v7gR3tCTf2CIxWXiXBosH4MC9o?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@martin:push-f.com\">martin</a>: what kind of server error?</blockquote></mx-reply>e.g. https://github.com/whatwg/html/pull/9797 or https://github.com/whatwg/html/pull/9809","m.relates_to":{"m.in_reply_to":{"event_id":"$rJOlENANOntZwkUn1v7gR3tCTf2CIxWXiXBosH4MC9o"}},"msgtype":"m.text"},"ts":1695970410174,"senderName":"martin","senderId":"@martin:push-f.com","id":"$nd5fMC3ay1V-LylLTIAL4_LStLxhe3s3WN3IqC1Kx4M"},
{"content":{"body":"> <@annevk:matrix.org> martin: what kind of server error?\n\n * e.g. https://github.com/whatwg/html/pull/9797 or https://github.com/whatwg/html/pull/9809\n\nThe PR description says:\n\n> ðŸ’¥ Error: Wattsi server error ðŸ’¥\n\ninstead of linking the previews","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$rJOlENANOntZwkUn1v7gR3tCTf2CIxWXiXBosH4MC9o?via=matrix.org&amp;via=mozilla.org&amp;via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@martin:push-f.com\">martin</a>: what kind of server error?</blockquote></mx-reply> * <p>e.g. https://github.com/whatwg/html/pull/9797 or https://github.com/whatwg/html/pull/9809</p>\n<p>The PR description says:</p>\n<blockquote>\n<p>ðŸ’¥ Error: Wattsi server error ðŸ’¥</p>\n</blockquote>\n<p>instead of linking the previews</p>\n","m.new_content":{"body":"e.g. https://github.com/whatwg/html/pull/9797 or https://github.com/whatwg/html/pull/9809\n\nThe PR description says:\n\n> ðŸ’¥ Error: Wattsi server error ðŸ’¥\n\ninstead of linking the previews","format":"org.matrix.custom.html","formatted_body":"<p>e.g. https://github.com/whatwg/html/pull/9797 or https://github.com/whatwg/html/pull/9809</p>\n<p>The PR description says:</p>\n<blockquote>\n<p>ðŸ’¥ Error: Wattsi server error ðŸ’¥</p>\n</blockquote>\n<p>instead of linking the previews</p>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$nd5fMC3ay1V-LylLTIAL4_LStLxhe3s3WN3IqC1Kx4M","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695970451265,"senderName":"martin","senderId":"@martin:push-f.com","id":"$dRxLTQPOCTYmt_S7Akx_qbrVDcwBteeQ99j9vVSTfRc"},
{"content":{"body":"dbaron: could you please stop at-mentioning folks in commit messages? Unfortunately it's rather spammy.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@dbaron:w3ctag.org\">dbaron</a>: could you please stop at-mentioning folks in commit messages? Unfortunately it's rather spammy.","m.mentions":{"user_ids":["@dbaron:w3ctag.org"]},"msgtype":"m.text"},"ts":1695970815826,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$JbJmowaMp4Ybiq0UfFvIOVdc5a8tIBv0i3590VzGAqU"},
{"content":{"body":"martin: ooh that's weird, Build is succeeding so I guess there's a PR Preview outage","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@martin:push-f.com\">martin</a>: ooh that's weird, Build is succeeding so I guess there's a PR Preview outage","m.mentions":{"user_ids":["@martin:push-f.com"]},"msgtype":"m.text"},"ts":1695970866682,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$r1LXKUuZIaX99Q6IjYkvQi-x6ZWRD_f6CUxIh13fY5M"},
{"content":{"body":"I wonder if we could run PR Preview through GitHub instead, saving Tobie some resources.","m.mentions":{},"msgtype":"m.text"},"ts":1695970916866,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$kUt3i1mOfWhrh6Epg0hOTHTLbTp9cxGyEuLGM7WsEn4"},
{"content":{"body":" * martin: ooh that's weird, Build is succeeding. Domenic can prolly take a look in a bit.","format":"org.matrix.custom.html","formatted_body":" * <a href=\"https://matrix.to/#/@martin:push-f.com\">martin</a>: ooh that's weird, Build is succeeding. <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a> can prolly take a look in a bit.","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"m.new_content":{"body":"martin: ooh that's weird, Build is succeeding. Domenic can prolly take a look in a bit.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@martin:push-f.com\">martin</a>: ooh that's weird, Build is succeeding. <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a> can prolly take a look in a bit.","m.mentions":{"user_ids":["@martin:push-f.com","@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$r1LXKUuZIaX99Q6IjYkvQi-x6ZWRD_f6CUxIh13fY5M","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695970988112,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$-JwCFpIsKd0vbL3wS-8NhU5NJ3CVzvbBSCpRCwjzRqU"},
{"content":{"body":"(for what it's worth I just force pushed the same commit without any content changes and the preview now worked ðŸ¤·)","msgtype":"m.text"},"ts":1695971751540,"senderName":"martin","senderId":"@martin:push-f.com","id":"$3nxRV7H8yk5NVLnHAhGnJnFPc3v9qfPY3emHho4vwec"},
{"content":{"body":"Oh okay, sometimes our hosting provider is a bit flaky.","m.mentions":{},"msgtype":"m.text"},"ts":1695971855454,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$Ew5Gs57n_nSTislkbBNQVVNN4bM0NZdU_i-krj1VBzU"},
{"content":{"body":"Neat, https://github.com/whatwg/fetch/issues/new/choose already has an option to report a security vulnerability.","m.mentions":{},"msgtype":"m.text"},"ts":1695971872884,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$RCXB96PLlITr7AZGrkjoXjoq_8N6lxdVVMx-FEr1L3A"},
{"content":{"body":"> <@annevk:matrix.org> Neat, https://github.com/whatwg/fetch/issues/new/choose already has an option to report a security vulnerability.\n\nI see it in the web UI but not in the GitHub mobile app","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$RCXB96PLlITr7AZGrkjoXjoq_8N6lxdVVMx-FEr1L3A?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br />Neat, https://github.com/whatwg/fetch/issues/new/choose already has an option to report a security vulnerability.</blockquote></mx-reply>I see it in the web UI but not in the GitHub mobile app","m.relates_to":{"m.in_reply_to":{"event_id":"$RCXB96PLlITr7AZGrkjoXjoq_8N6lxdVVMx-FEr1L3A"}},"msgtype":"m.text"},"ts":1695972251785,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$W6APcJZqxMjmCKFPElFo_nDL3i2Rpb87ZRmXMz54JGU"},
{"content":{"body":"And the mobile app still shows the choices in a different order (with the Chat choice first)","msgtype":"m.text"},"ts":1695972334567,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$OO5fDykv9yarKkRIhZEEr6MS-RerTFiBpWaF4OIPTzI"},
{"content":{"body":"File an issue against the app?","m.mentions":{},"msgtype":"m.text"},"ts":1695972435431,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$Yr5BkmKE3-WAq7_O486aVwtLo2P7gepvrG4ok_fR8UA"},
{"content":{"body":"(I use the mobile app because I can swipe to mark as done in the Notifications UI)","msgtype":"m.text"},"ts":1695972442949,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$bIxOOvZ4AJJDkTWUR8mIxE2ntgRTjpggM8qNktMuVuM"},
{"content":{"body":"keithamus might be able to forward it internally \\o/","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@keithamus:matrix.org\">keithamus</a> might be able to forward it internally \\o/","m.mentions":{"user_ids":["@keithamus:matrix.org"]},"msgtype":"m.text"},"ts":1695972455650,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$4AvlJ2Yd-XKAqBPOiXLGpNVLK5fIGCMWbbWvIOASu-o"},
{"content":{"body":"Oh interesting. Iâ€™ll forward to the mobile team","msgtype":"m.text"},"ts":1695972506290,"senderName":"keithamus","senderId":"@keithamus:matrix.org","id":"$TIk_N-FL6oQmk-NesdjDxehTyjcnqk0S4lrihK0YoPk"},
{"content":{"body":"If I did GitHub on mobile my work-life balance would worsen.","m.mentions":{},"msgtype":"m.text"},"ts":1695972521689,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$jSMNGryMwawevNMJWoSvGQ1Ar2mveBANq2JZ_qP_VZQ"},
{"content":{"body":"I just wish the web-app UI let me swipe. If it did then I'd not have any other use for the mobile appâ€¦","msgtype":"m.text"},"ts":1695972530324,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$SVPsx-R_RMjmWIukVvkROA00u-7FRZeT3ovQPlWrkAw"},
{"content":{"body":"But also a lot of what I do is review which even on a laptop sucks due to screen width limitations","m.mentions":{},"msgtype":"m.text"},"ts":1695972594207,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$54TY-bp2-FLVIEkUN5QL4-E2rKN8WURhZHegX28Xb50"},
{"content":{"body":"Yeah","msgtype":"m.text"},"ts":1695972661423,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$N-v96ANRVSDCWIm0P_eTCV-4KMtIRyxID84L5nnil_Y"},
{"content":{"body":"> <@annevk:matrix.org> Domenic: so when \"prepare to run script\" is called the currently running task is always non-null? So it's never called from a microtask? I.e., you cannot get there through calling navigate() from a promise callback or some such?\n\nThe currently running task may be null. The surrounding agent cannot be null.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$0xUCeEOUjxpxUHOthwLs2v7bRcabpdWb9TCl29BP3Mo?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: so when \"prepare to run script\" is called the currently running task is always non-null? So it's never called from a microtask? I.e., you cannot get there through calling navigate() from a promise callback or some such?</blockquote></mx-reply>The currently running task may be null. The surrounding agent cannot be null.","m.mentions":{"user_ids":["@annevk:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$0xUCeEOUjxpxUHOthwLs2v7bRcabpdWb9TCl29BP3Mo"}},"msgtype":"m.text"},"ts":1695973077249,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$_RyXlZM-M_i-Wdk_nnDR3OLmYiNkT70OrFLcfeEC-p4"},
{"content":{"body":"Hmm I see the problem","m.mentions":{},"msgtype":"m.text"},"ts":1695973100874,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$LJgV6hoYhOijiSk5LlTVgIuPkIdEaDoHm3ZHIObhclI"},
{"content":{"body":"Note that this is not navigation API specific. Every Web IDL callback call ends up in \"prepare to run script\"","m.mentions":{},"msgtype":"m.text"},"ts":1695973195628,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$8Vf55X94I2Ozr6PyKYLnyU1zoQEgPAMN6XoYs_lyW5U"},
{"content":{"body":"I think the spec is not very prepared for the currently running task to be null. We should probably let it be a microtask.","m.mentions":{},"msgtype":"m.text"},"ts":1695973238151,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$EpN2-gZOSk37F0lJFxVerqE18Qsh_iKDPwGrTN5hawo"},
{"content":{"body":"Oh, it's not null during microtasks after all, I was just wrong yesterday: https://html.spec.whatwg.org/#perform-a-microtask-checkpoint","m.mentions":{},"msgtype":"m.text"},"ts":1695973279951,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$IW_4D6BbrWoy-5WQI_gZ3vKpDoVNEuDsBAB4dhEiQRQ"},
{"content":{"body":"It is null during update the rendering though","m.mentions":{},"msgtype":"m.text"},"ts":1695973284199,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$1U1_GnCgyKgMGbxTjDle_UAjMTxXPbaf7IEZt2zX0e4"},
{"content":{"body":"Which is maybe why \"long animation frames\" is a helpful thing to add, even though we are already tracking long tasks?","m.mentions":{},"msgtype":"m.text"},"ts":1695973306929,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$0BxMUy2-UmcFgzcwomH4sgBEMxOWbcdsHefyD9uEIAY"},
{"content":{"body":"yea the relationship between tasks and rendering in the HTML spec is science fiction atm","m.mentions":{},"msgtype":"m.text"},"ts":1695973717288,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$XpgxgnCwKf16WszhhEAyorSUILuZlQ2_jjYib502vJ4"},
{"content":{"body":"Domenic: someone was suggesting the other day that update the rendering should be a task of its own","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: someone was suggesting the other day that update the rendering should be a task of its own","msgtype":"m.text"},"ts":1695975395347,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$y4LczMOQqWTTPkaAALNHBkc16TXk5J-st1-ygpqH5Zw"},
{"content":{"body":"Domenic: I guess that would solve this","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: I guess that would solve this","msgtype":"m.text"},"ts":1695975408644,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$KQNpXeuJ6HAwv5Lw9NtRHIvnNH4QCKjkk_mkVj6YfkU"},
{"content":{"body":"Domenic: we should also assert currently running task in queue a microtask then","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: we should also assert currently running task in queue a microtask then","msgtype":"m.text"},"ts":1695975426164,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$Y4rv9iQmSmvh4VNFTwmhAsGJfeumhn1h6hfxdHLGuJ4"},
{"content":{"body":"I get kind of upset when people talk about it this way, because the spec is observably equivalent to what browsers do today, and people are just complaining that the spec doesn't match their particular browser engine code.","m.mentions":{},"msgtype":"m.text"},"ts":1695975460566,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$c4pMZULRGyN0no71f7VRRg697nRtGlgS1ZIR28W3uUs"},
{"content":{"body":"Like we shouldn't always reflect browser code directly in specs, and I don't like calling specs fiction if they are observably equivalent but don't match specific implementation choices.","m.mentions":{},"msgtype":"m.text"},"ts":1695975515357,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$Ilb1p2w5uDcLvB8ebrOUjX6SVKbMusCrQiNgWvnlzWg"},
{"content":{"body":"But ultimately, fine, if someone else wants to refactor the rendering steps to match how Chrome or Firefox or Safari works, go for it, I guess.","m.mentions":{},"msgtype":"m.text"},"ts":1695975549052,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$tbQhvS-IBvfi33RtrUrQRGz7O1lSPc-NQSo69x9FTGo"},
{"content":{"body":"Yeah I'm not sure it's science fiction either, but it does seem problematic that currently running task can be null.","m.mentions":{},"msgtype":"m.text"},"ts":1695975708130,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$4RRn5LyOgvPIcOmjKSzYlMw_6yTs6h6tpsaUOs7CzRw"},
{"content":{"body":"> <@domenicdenicola:matrix.org> Like we shouldn't always reflect browser code directly in specs, and I don't like calling specs fiction if they are observably equivalent but don't match specific implementation choices.\n\nApologies for saying this as a general statement. Was frustrated with this before, we seriously need to address it","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs%3Amatrix.org/%24Ilb1p2w5uDcLvB8ebrOUjX6SVKbMusCrQiNgWvnlzWg\">In reply to</a> <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">@domenicdenicola:matrix.org</a><br>Like we shouldn't always reflect browser code directly in specs, and I don't like calling specs fiction if they are observably equivalent but don't match specific implementation choices.</blockquote></mx-reply>Apologies for saying this as a general statement. Was frustrated with this before, we seriously need to address it","m.relates_to":{"m.in_reply_to":{"event_id":"$Ilb1p2w5uDcLvB8ebrOUjX6SVKbMusCrQiNgWvnlzWg"}},"msgtype":"m.text"},"ts":1695976349991,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$EAkQBoUd248xyYav66F_IjbWrPU2TPPSsagH7A0gK0A"},
{"content":{"body":"The update the rendering steps are different from implementations in two key ways: one is that it's outside a task and the other is that it's unclear where ui events are handled","msgtype":"m.text"},"ts":1695976452028,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$Llb8evRodpKZKS3AUdGkd5vzhnvv4rxqrbacxROnmrs"},
{"content":{"body":"I mean UI events have been only moderately specified since 1994... if someone wants to fix that I'm definitely rooting for them, but not holding my breath :)","m.mentions":{},"msgtype":"m.text"},"ts":1695976531202,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$kuoXK7m05HcU_sIUlFvu1am23P5onixExMu8OrjUXRI"},
{"content":{"body":"Yeah, we've been frustrated with them for a while. I outlined a plan for fixing them and Gary at one point was going to tackle it, but it hasn't happened. Perhaps you want to give it a go Noam?","m.mentions":{},"msgtype":"m.text"},"ts":1695976744539,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$JDj1Fgj77u6-USAi8dEeLD0Ec3wQAeLuKCgryiveMC4"},
{"content":{"body":"I might have to as part of speccing long animation frames ","format":"org.matrix.custom.html","formatted_body":"I might have to as part of speccing long animation frames","msgtype":"m.text"},"ts":1695976769209,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$B1qRjzhasmti1YffSBNrDa7aDHEI7_ywE39J5yhdpb0"},
{"content":{"body":"I can't find the issue for this in the uievents repository","m.mentions":{},"msgtype":"m.text"},"ts":1695977086785,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$BbWjdwHMaWtIuwmRsgw1DcqhSBgfVsg0R81wXlVNXIE"},
{"content":{"body":"There should be one somewhere about defining a proper processing model ","m.mentions":{},"msgtype":"m.text"},"ts":1695977102774,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$umnjKe_bBGVI24TePBl2hMdYA5GbP2JrQF0MwMMomiE"},
{"content":{"body":"this is what I meant when I said science-fiction: UI events are tightly integrated into rendering cycle in implementation, and there is always a task, probably a \"rendering task\". those two things ARE web-observable (e.g. in longtasks). Wrong choice of words, but I'd happy to try to tackle it.","m.mentions":{},"msgtype":"m.text"},"ts":1695977158512,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$WELUuVnFAHld1HwrcZNRGPikPshAPDqs99D24oTjxos"},
{"content":{"body":"I think it's https://github.com/w3c/uievents/issues/238#issuecomment-510106422","m.mentions":{},"msgtype":"m.text"},"ts":1695977243019,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$xROuil-OhUwoUNDk7HFDH6FoKFd39wMgaIQ3WlbmntE"},
{"content":{"body":"We need the abstract algorithms of \"user moves mouse\", \"user presses key\", etc. and then bind those to the event loop somehow.","m.mentions":{},"msgtype":"m.text"},"ts":1695977287359,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$vXmGlCFRRakaCmm5tHSnH93DV5Dse3YfaoEugRHSqSc"},
{"content":{"body":"Hmm someone seems to have totally ignored our new issue template https://github.com/whatwg/html/issues/9812","m.mentions":{},"msgtype":"m.text"},"ts":1695977931260,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$pAVh918XoeY1DsIDsKvw-ioUxn1z91qSBQ_rb0P7JhI"},
{"content":{"body":"> <@domenicdenicola:matrix.org> Hmm someone seems to have totally ignored our new issue template https://github.com/whatwg/html/issues/9812\n\nWell the first option is labeled \"New issue\" ... and the description just says:\n\n>  File a new issue against the HTML Standard. \n\nif you stop reading there you haven't really knowingly ignored anything.\n\nThe description should probably say something that this shouldn't be used for feature requests. Perhaps \"New issues\" should be changed to \"Report problem\" or something like that.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$pAVh918XoeY1DsIDsKvw-ioUxn1z91qSBQ_rb0P7JhI?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">@domenicdenicola:matrix.org</a><br>Hmm someone seems to have totally ignored our new issue template https://github.com/whatwg/html/issues/9812</blockquote></mx-reply><p>Well the first option is labeled &quot;New issue&quot; ... and the description just says:</p>\n<blockquote>\n<p>File a new issue against the HTML Standard.</p>\n</blockquote>\n<p>if you stop reading there you haven't really knowingly ignored anything.</p>\n<p>The description should probably say something that this shouldn't be used for feature requests. Perhaps &quot;New issues&quot; should be changed to &quot;Report problem&quot; or something like that.</p>\n","m.relates_to":{"m.in_reply_to":{"event_id":"$pAVh918XoeY1DsIDsKvw-ioUxn1z91qSBQ_rb0P7JhI"}},"msgtype":"m.text"},"ts":1695979080167,"senderName":"martin","senderId":"@martin:push-f.com","id":"$Aw8_BAPVddqGtWYtdxMJ4PWzvreYfQBuagSNhzEkrq0"},
{"content":{"body":"How about \"Propose a new feature\" and \"Report an issue\" in that order?","m.mentions":{},"msgtype":"m.text"},"ts":1695981612851,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$kC-zIAXhsnjQM7kEkACtEiDO0FgZvwrT8qlt-WsUFxc"},
{"content":{"body":"Domenic, annevk: regarding event loop spec vs implementation, according to Ryosuke (at TPAC) webkit doesn't run everything through the event loop so there might be quite a few issues there that would arise if we try to make things more observably interoperable, especially around microtasks","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>, <a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: regarding event loop spec vs implementation, according to Ryosuke (at TPAC) webkit doesn't run everything through the event loop so there might be quite a few issues there that would arise if we try to make things more observably interoperable, especially around microtasks","m.mentions":{"user_ids":["@domenicdenicola:matrix.org","@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1695982149437,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$HdHKGrE_9pCKILtlObT3cavjRnpeaNA13NMHbia_H7o"},
{"content":{"body":"Noam Rosenthal: hmm I thought when I spoke with rniwa he said \"update the rendering\" was essentially its own task","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: hmm I thought when I spoke with rniwa he said \"update the rendering\" was essentially its own task","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1695986434334,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$ERhYf74svvqW7DaCDL95DVbw12jYE3cyQ2EwTvFp_JI"},
{"content":{"body":"Noam Rosenthal: scheduling might be different, but everything has to run within the context of the event loop","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: scheduling might be different, but everything has to run within the context of the event loop","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1695986471622,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$RtdDK2sjLENhoig_6lBHVRc7PryGATexuenmTIQLx9k"},
{"content":{"body":"annevk: \"not everything is hooked up to go through that execute loop. We're in the process of adopting that but it's nowhere near complete.\"","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: \"not everything is hooked up to go through that execute loop. We're in the process of adopting that but it's nowhere near complete.\"","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1695986560724,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$hEOn-3euo0tP4NujSRmMAJANQREDCzPF0ZiLThgyoxM"},
{"content":{"body":"(quoting our chat, as a follow up to the TPAC discussion about long animation frames)","m.mentions":{},"msgtype":"m.text"},"ts":1695986613547,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$UIV-GBDD5hXIfU8ZsHMER7_pipLdY0jhM_mJSoa6oM0"},
{"content":{"body":"would be amazing if webkit actually had everything in an event loop and could support long animation frames/tasks etc. I was surprised to hear that this is a problem.","m.mentions":{},"msgtype":"m.text"},"ts":1695986644792,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$fHnvq-KVUNE9CNqmZM5VgX1QCN1v2eAWESmVEEZoLfo"},
{"content":{"body":"Anyway, I don't really see a problem with surfacing more interop issues, they're already out there anyway","m.mentions":{},"msgtype":"m.text"},"ts":1695986646454,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$xCUeFw5mIXOm9_uqQyxglUhQkRYbZRrhyUCOWRG5IBk"},
{"content":{"body":"Absolutely agree about the value of surfacing, my concern spec-wise is that if we tried to move the event-loop + ui event spec into something more rigorous we'd get webkit pushback because of this kind of issues, so I wanted to surface this with you early. ","m.mentions":{},"msgtype":"m.text"},"ts":1695986844023,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$MDaNJZyiiBILijA6x_D_olNL6WOEm7BNpbcZplQiHHA"},
{"content":{"body":"Noam Rosenthal: it'd be interesting to see a more concrete example of a problem I suppose","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: it'd be interesting to see a more concrete example of a problem I suppose","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1695987924911,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$KJFhNJp4ImFBQGs4A-d5qzjDlMkXjCSKvl3mZNdINmg"},
{"content":{"body":"Noam Rosenthal: if we need some ambiguity around which events end up in the same task that doesn't seem out of the realm of options per se, but at the moment we don't even have a framework to talk about that kind of stuff","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: if we need some ambiguity around which events end up in the same task that doesn't seem out of the realm of options per se, but at the moment we don't even have a framework to talk about that kind of stuff","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1695987965440,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$ZlgtpYNNOr1rh0oXwLwf5-oftuzTqyP3kLH-isGwwGs"},
{"content":{"body":"annevk: agreed.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: agreed.","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1695988032180,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$jwIW66aeawx6F69TzxQwW3_VFKP0wntQ1pTAvN___PA"},
{"content":{"body":"(I don't have concrete examples myself, less familiar of this part of webkit in its current form)","m.mentions":{},"msgtype":"m.text"},"ts":1695988072514,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$qLzFRk2TXU5O0MQRFJVizFQGl3V7oHuEp7Z_WJoOcLo"},
{"content":{"body":"Sigh, the HTML declarative shadow tree PR reached the unicorn level","m.mentions":{},"msgtype":"m.text"},"ts":1695996436389,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$Q2CT5xWzKKqLU1USfCdnGaXFVOOdTDiiOJl3VQilHrA"},
{"content":{"body":"We should develop these things as monkeypatch specs and only write a PR after there's consensus. ;)","msgtype":"m.text"},"ts":1695996538735,"senderName":"Jeffrey Yasskin","senderId":"@jyasskin:matrix.org","id":"$557K4L7T6pPH3kjqdZ-Nt7NdOCtWUgdDyNvIUpkI-3g"},
{"content":{"body":"Heh, surely there's a middle ground here somewhere. But it's hard to know upfront sometimes.","m.mentions":{},"msgtype":"m.text"},"ts":1695996996386,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$_wFdmsqFlZtL3-vpHNqZXmo5CspR2yOtEHC-9Cmoh1k"},
{"content":{"body":"TabAtkins: I can't tell if you and I are saying the same thing, close to the same thing, or totally opposite things on that heading levels start thing - would you be interested in figuring it out together and creating a reply/plan (or just new follow up issue as suggested above) that we agree on?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@tabatkins:matrix.org\">TabAtkins</a>: I can't tell if you and I are saying the same thing, close to the same thing, or totally opposite things on that heading levels start thing - would you be interested in figuring it out together and creating a reply/plan (or just new follow up issue as suggested above) that we agree on?","msgtype":"m.text"},"ts":1696000248579,"senderName":"bkardell","senderId":"@bkardell:igalia.com","id":"$DfoqdEPJXR8jXbqtAYWpB_ORcx60oSnAVK8LTS_09fw"},
{"content":{"body":"bkardell: as far as I can tell all TabAtkins is asking for recursion when determining `headingstart`; I think it'd be good if someone could determine the perf cost of that is indeed about the same and it doesn't create any problems when you try to optimize things","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@bkardell:igalia.com\">bkardell</a>: as far as I can tell all <a href=\"https://matrix.to/#/@tabatkins:matrix.org\">TabAtkins</a> is asking for recursion when determining <code>headingstart</code>; I think it'd be good if someone could determine the perf cost of that is indeed about the same and it doesn't create any problems when you try to optimize things","m.mentions":{"user_ids":["@bkardell:igalia.com","@tabatkins:matrix.org"]},"msgtype":"m.text"},"ts":1696000525705,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$iSkcm9u6FdigRbjr5MRSKVnSkprr4eUv4-_02Wzxfqs"},
{"content":{"body":"Yes, that's correct. Given that every heading will have to search to the root anyway to determine its actual level, the only thing you're gaining from avoiding recursion is that *sometimes* you can stop earlier than the root. That's effectively nil perf benefit.","msgtype":"m.text"},"ts":1696000621359,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$knCqHuRX8s1_xylkI5ggqSshHLYRSsG51CjDwQtbBJs"},
{"content":{"body":"someoneâ„¢","m.mentions":{},"msgtype":"m.text"},"ts":1696000651702,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$r7WZaGRtZJpnYb0xeGHhpZ0LYfSnFLTUeFS4_rZBMCQ"},
{"content":{"body":"in other words the *existence* of this feature already has some (fairly minimal) perf hit.","msgtype":"m.text"},"ts":1696000681483,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$XGJ5LB3ZB8oYi6XYDumMJ0sK6GWEm-JeQjrec4v5Yz4"},
{"content":{"body":"TabAtkins: well, that's only the first pass, there's also dynamic manipulation and such","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@tabatkins:matrix.org\">TabAtkins</a>: well, that's only the first pass, there's also dynamic manipulation and such","m.mentions":{"user_ids":["@tabatkins:matrix.org"]},"msgtype":"m.text"},"ts":1696000688497,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$xUS8C9XRNT_0WuqnSAkSDApHEAqysApMvZ66X8whim0"},
{"content":{"body":"feels like we do this with css already, but  maybe there is something real tricky there idk","msgtype":"m.text"},"ts":1696000964403,"senderName":"bkardell","senderId":"@bkardell:igalia.com","id":"$IznI4m2dOXaCNSmvwSK4n3OmMPOug8T1W8p1D_Vw4a4"},
{"content":{"body":"Yeah, I think that still applies. The existence of the feature imposes a (small) cost on maintaining correct heading levels on mutation for *all* pages, regardless of whether they use it. Absolute vs recursive just, at best, avoids ah extra walk to root.","msgtype":"m.text"},"ts":1696001148010,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$aB2-2dPR1OCQW8Y9hzhBZOq6ZwfR__YaY9QG4wEQuXk"},
{"content":{"body":"Any perf implications are *worst* for existing pages that don't use the feature at all. Recursive is the *same* cost. Absolute might let you save a tiny amount of effort in some cases, at the cost of the page structure breaking when you nest.","msgtype":"m.text"},"ts":1696001228046,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$f2G1HykQHnap9tJe2NUpe-HGHdm-V1xTU9eMx28aS88"},
{"content":{"body":"bkardell: doesn't make it free :-)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@bkardell:igalia.com\">bkardell</a>: doesn't make it free :-)","m.mentions":{"user_ids":["@bkardell:igalia.com"]},"msgtype":"m.text"},"ts":1696001406991,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$9NxZYoyKDmUHOsy25DaksohO0DbjXRKgJIUuP8HmAsc"},
{"content":{"body":"annevk: I'm trying to find time for the :dir review asap, but curious, is there some particular hurry with that?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: I'm trying to find time for the :dir review asap, but curious, is there some particular hurry with that?","msgtype":"m.text"},"ts":1696001519987,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$4sMSytySA6bBSQUpYhWsZGPLH-D3qyWjIxurADu8ykQ"},
{"content":{"body":"smaug: I don't think so, happy to wait","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a>: I don't think so, happy to wait","m.mentions":{"user_ids":["@smaug:mozilla.org"]},"msgtype":"m.text"},"ts":1696001553843,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$Os-noc6ISM_ZhV3DhxxSDMFITTINH4afdtzdvW2zRkQ"},
{"content":{"body":"smaug: I guess I was trying to move a bit faster since it's been overdue, but might as well take a bit longer and get it right","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a>: I guess I was trying to move a bit faster since it's been overdue, but might as well take a bit longer and get it right","m.mentions":{"user_ids":["@smaug:mozilla.org"]},"msgtype":"m.text"},"ts":1696001588990,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$WK2yaXutrMDafNAlM-93lnjhWtIOrZEKEF4pH8qWaQU"},
{"content":{"body":"sure, it has taken lots of time","msgtype":"m.text"},"ts":1696001601885,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$PZl0PcV9F3ZNeF1q_g4GWiUlr7wudhI8jmJEShjlQLs"},
{"content":{"body":"but ok,I'll review during the weekend","msgtype":"m.text"},"ts":1696001610669,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$ROSAz-ECIWTfPz744V7sFozMUZqB0_PohOyCt7wuGfM"},
{"content":{"body":"smaug: please, take your time and just say when you've done it","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a>: please, take your time and just say when you've done it","m.mentions":{"user_ids":["@smaug:mozilla.org"]},"msgtype":"m.text"},"ts":1696001639700,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$LW18Cgx9sMh9kFHCwTZBiUZCdB-JznCTDVGEmUlRGA4"},
{"content":{"body":"> <@annevk:matrix.org> bkardell: doesn't make it free :-)\n\nI could be wrong (pronounced \"am probably wrong\"), but I think we have other things which, implementation-wise, lean on internal css properties to do what is basically similar things.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$9NxZYoyKDmUHOsy25DaksohO0DbjXRKgJIUuP8HmAsc?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@bkardell:igalia.com\">bkardell</a>: doesn't make it free :-)</blockquote></mx-reply>I could be wrong (pronounced \"am probably wrong\"), but I think we have other things which, implementation-wise, lean on internal css properties to do what is basically similar things.","m.relates_to":{"m.in_reply_to":{"event_id":"$9NxZYoyKDmUHOsy25DaksohO0DbjXRKgJIUuP8HmAsc"}},"msgtype":"m.text"},"ts":1696001799241,"senderName":"bkardell","senderId":"@bkardell:igalia.com","id":"$CL1tT-gSQx3NLI1pzAsM8RMEwOuQ9s3SZKya8PywAEM"},
{"content":{"body":"which would at least make it \"seemingly affordable\" :)","msgtype":"m.text"},"ts":1696001874515,"senderName":"bkardell","senderId":"@bkardell:igalia.com","id":"$LfiC_U6VlolwftYdfUWeVK7yylljQxJyLs9L8JiFb_g"},
{"content":{"body":"I mean, I guess it is not exactly like anything in css so maybe that doesn't help ","msgtype":"m.text"},"ts":1696002660811,"senderName":"bkardell","senderId":"@bkardell:igalia.com","id":"$lIZNfD0ymogCmw37ynrR9NEv-w_Om7kY5Beq1Otvtlw"},
{"content":{"body":" * I guess it is not exactly like anything in css so maybe that doesn't help ","m.new_content":{"body":"I guess it is not exactly like anything in css so maybe that doesn't help ","msgtype":"m.text"},"m.relates_to":{"event_id":"$lIZNfD0ymogCmw37ynrR9NEv-w_Om7kY5Beq1Otvtlw","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1696002673038,"senderName":"bkardell","senderId":"@bkardell:igalia.com","id":"$vH2C2R6ZAiNnub1e6R0w5CDP2I5DbkjEBHTK2edyLEY"}
]