[
{"content":{"body":"bkardell: yeah a new issue for the follow-up stuff would be great","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@bkardell:igalia.com\">bkardell</a>: yeah a new issue for the follow-up stuff would be great","m.mentions":{"user_ids":["@bkardell:igalia.com"]},"msgtype":"m.text"},"ts":1695965334725,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$MRouubd77rFAXR8BfNbd0Jrudjry9-8wvsdOiZrENEY"},
{"content":{"body":"How high is the barrier to removing redundant parse errors from the HTML spec? I'd assume this should be coordinated with another PR to remove the respective errors from html5lib-tests?","msgtype":"m.text"},"ts":1695965632746,"senderName":"martin","senderId":"@martin:push-f.com","id":"$9nx77P6EwSUbb_GRhFpxkKR_RzYRxkt3lCTsGfaxXRg"},
{"content":{"body":"Domenic: so when \"prepare to run script\" is called the currently running task is always non-null? So it's never called from a microtask? I.e., you cannot get there through calling navigate() from a promise callback or some such?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: so when \"prepare to run script\" is called the currently running task is always non-null? So it's never called from a microtask? I.e., you cannot get there through calling navigate() from a promise callback or some such?","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"ts":1695969826565,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$0xUCeEOUjxpxUHOthwLs2v7bRcabpdWb9TCl29BP3Mo"},
{"content":{"body":"What's up with the Wattsi builds failing for HTML PRs?","msgtype":"m.text"},"ts":1695970109462,"senderName":"martin","senderId":"@martin:push-f.com","id":"$HfJXgFa46LKdTZAs8AGRQC55n3Ex84kN9YVaxphZ9Eg"},
{"content":{"body":" * What's up with the Wattsi server errors for HTML PRs?","m.new_content":{"body":"What's up with the Wattsi server errors for HTML PRs?","msgtype":"m.text"},"m.relates_to":{"event_id":"$HfJXgFa46LKdTZAs8AGRQC55n3Ex84kN9YVaxphZ9Eg","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695970127946,"senderName":"martin","senderId":"@martin:push-f.com","id":"$a8iaMcjhfWavJNxmStXSXZqBLggaIa6vL1w5HTrPI_Y"},
{"content":{"body":"martin: what kind of server error?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@martin:push-f.com\">martin</a>: what kind of server error?","m.mentions":{"user_ids":["@martin:push-f.com"]},"msgtype":"m.text"},"ts":1695970198869,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$rJOlENANOntZwkUn1v7gR3tCTf2CIxWXiXBosH4MC9o"},
{"content":{"body":"> <@annevk:matrix.org> martin: what kind of server error?\n\ne.g. https://github.com/whatwg/html/pull/9797 or https://github.com/whatwg/html/pull/9809","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$rJOlENANOntZwkUn1v7gR3tCTf2CIxWXiXBosH4MC9o?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@martin:push-f.com\">martin</a>: what kind of server error?</blockquote></mx-reply>e.g. https://github.com/whatwg/html/pull/9797 or https://github.com/whatwg/html/pull/9809","m.relates_to":{"m.in_reply_to":{"event_id":"$rJOlENANOntZwkUn1v7gR3tCTf2CIxWXiXBosH4MC9o"}},"msgtype":"m.text"},"ts":1695970410174,"senderName":"martin","senderId":"@martin:push-f.com","id":"$nd5fMC3ay1V-LylLTIAL4_LStLxhe3s3WN3IqC1Kx4M"},
{"content":{"body":"> <@annevk:matrix.org> martin: what kind of server error?\n\n * e.g. https://github.com/whatwg/html/pull/9797 or https://github.com/whatwg/html/pull/9809\n\nThe PR description says:\n\n> ðŸ’¥ Error: Wattsi server error ðŸ’¥\n\ninstead of linking the previews","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$rJOlENANOntZwkUn1v7gR3tCTf2CIxWXiXBosH4MC9o?via=matrix.org&amp;via=mozilla.org&amp;via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@martin:push-f.com\">martin</a>: what kind of server error?</blockquote></mx-reply> * <p>e.g. https://github.com/whatwg/html/pull/9797 or https://github.com/whatwg/html/pull/9809</p>\n<p>The PR description says:</p>\n<blockquote>\n<p>ðŸ’¥ Error: Wattsi server error ðŸ’¥</p>\n</blockquote>\n<p>instead of linking the previews</p>\n","m.new_content":{"body":"e.g. https://github.com/whatwg/html/pull/9797 or https://github.com/whatwg/html/pull/9809\n\nThe PR description says:\n\n> ðŸ’¥ Error: Wattsi server error ðŸ’¥\n\ninstead of linking the previews","format":"org.matrix.custom.html","formatted_body":"<p>e.g. https://github.com/whatwg/html/pull/9797 or https://github.com/whatwg/html/pull/9809</p>\n<p>The PR description says:</p>\n<blockquote>\n<p>ðŸ’¥ Error: Wattsi server error ðŸ’¥</p>\n</blockquote>\n<p>instead of linking the previews</p>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$nd5fMC3ay1V-LylLTIAL4_LStLxhe3s3WN3IqC1Kx4M","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695970451265,"senderName":"martin","senderId":"@martin:push-f.com","id":"$dRxLTQPOCTYmt_S7Akx_qbrVDcwBteeQ99j9vVSTfRc"},
{"content":{"body":"dbaron: could you please stop at-mentioning folks in commit messages? Unfortunately it's rather spammy.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@dbaron:w3ctag.org\">dbaron</a>: could you please stop at-mentioning folks in commit messages? Unfortunately it's rather spammy.","m.mentions":{"user_ids":["@dbaron:w3ctag.org"]},"msgtype":"m.text"},"ts":1695970815826,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$JbJmowaMp4Ybiq0UfFvIOVdc5a8tIBv0i3590VzGAqU"},
{"content":{"body":"martin: ooh that's weird, Build is succeeding so I guess there's a PR Preview outage","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@martin:push-f.com\">martin</a>: ooh that's weird, Build is succeeding so I guess there's a PR Preview outage","m.mentions":{"user_ids":["@martin:push-f.com"]},"msgtype":"m.text"},"ts":1695970866682,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$r1LXKUuZIaX99Q6IjYkvQi-x6ZWRD_f6CUxIh13fY5M"},
{"content":{"body":"I wonder if we could run PR Preview through GitHub instead, saving Tobie some resources.","m.mentions":{},"msgtype":"m.text"},"ts":1695970916866,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$kUt3i1mOfWhrh6Epg0hOTHTLbTp9cxGyEuLGM7WsEn4"},
{"content":{"body":" * martin: ooh that's weird, Build is succeeding. Domenic can prolly take a look in a bit.","format":"org.matrix.custom.html","formatted_body":" * <a href=\"https://matrix.to/#/@martin:push-f.com\">martin</a>: ooh that's weird, Build is succeeding. <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a> can prolly take a look in a bit.","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"m.new_content":{"body":"martin: ooh that's weird, Build is succeeding. Domenic can prolly take a look in a bit.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@martin:push-f.com\">martin</a>: ooh that's weird, Build is succeeding. <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a> can prolly take a look in a bit.","m.mentions":{"user_ids":["@martin:push-f.com","@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$r1LXKUuZIaX99Q6IjYkvQi-x6ZWRD_f6CUxIh13fY5M","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695970988112,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$-JwCFpIsKd0vbL3wS-8NhU5NJ3CVzvbBSCpRCwjzRqU"},
{"content":{"body":"(for what it's worth I just force pushed the same commit without any content changes and the preview now worked ðŸ¤·)","msgtype":"m.text"},"ts":1695971751540,"senderName":"martin","senderId":"@martin:push-f.com","id":"$3nxRV7H8yk5NVLnHAhGnJnFPc3v9qfPY3emHho4vwec"},
{"content":{"body":"Oh okay, sometimes our hosting provider is a bit flaky.","m.mentions":{},"msgtype":"m.text"},"ts":1695971855454,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$Ew5Gs57n_nSTislkbBNQVVNN4bM0NZdU_i-krj1VBzU"},
{"content":{"body":"Neat, https://github.com/whatwg/fetch/issues/new/choose already has an option to report a security vulnerability.","m.mentions":{},"msgtype":"m.text"},"ts":1695971872884,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$RCXB96PLlITr7AZGrkjoXjoq_8N6lxdVVMx-FEr1L3A"},
{"content":{"body":"> <@annevk:matrix.org> Neat, https://github.com/whatwg/fetch/issues/new/choose already has an option to report a security vulnerability.\n\nI see it in the web UI but not in the GitHub mobile app","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$RCXB96PLlITr7AZGrkjoXjoq_8N6lxdVVMx-FEr1L3A?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br />Neat, https://github.com/whatwg/fetch/issues/new/choose already has an option to report a security vulnerability.</blockquote></mx-reply>I see it in the web UI but not in the GitHub mobile app","m.relates_to":{"m.in_reply_to":{"event_id":"$RCXB96PLlITr7AZGrkjoXjoq_8N6lxdVVMx-FEr1L3A"}},"msgtype":"m.text"},"ts":1695972251785,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$W6APcJZqxMjmCKFPElFo_nDL3i2Rpb87ZRmXMz54JGU"},
{"content":{"body":"And the mobile app still shows the choices in a different order (with the Chat choice first)","msgtype":"m.text"},"ts":1695972334567,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$OO5fDykv9yarKkRIhZEEr6MS-RerTFiBpWaF4OIPTzI"},
{"content":{"body":"File an issue against the app?","m.mentions":{},"msgtype":"m.text"},"ts":1695972435431,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$Yr5BkmKE3-WAq7_O486aVwtLo2P7gepvrG4ok_fR8UA"},
{"content":{"body":"(I use the mobile app because I can swipe to mark as done in the Notifications UI)","msgtype":"m.text"},"ts":1695972442949,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$bIxOOvZ4AJJDkTWUR8mIxE2ntgRTjpggM8qNktMuVuM"},
{"content":{"body":"keithamus might be able to forward it internally \\o/","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@keithamus:matrix.org\">keithamus</a> might be able to forward it internally \\o/","m.mentions":{"user_ids":["@keithamus:matrix.org"]},"msgtype":"m.text"},"ts":1695972455650,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$4AvlJ2Yd-XKAqBPOiXLGpNVLK5fIGCMWbbWvIOASu-o"},
{"content":{"body":"Oh interesting. Iâ€™ll forward to the mobile team","msgtype":"m.text"},"ts":1695972506290,"senderName":"keithamus","senderId":"@keithamus:matrix.org","id":"$TIk_N-FL6oQmk-NesdjDxehTyjcnqk0S4lrihK0YoPk"},
{"content":{"body":"If I did GitHub on mobile my work-life balance would worsen.","m.mentions":{},"msgtype":"m.text"},"ts":1695972521689,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$jSMNGryMwawevNMJWoSvGQ1Ar2mveBANq2JZ_qP_VZQ"},
{"content":{"body":"I just wish the web-app UI let me swipe. If it did then I'd not have any other use for the mobile appâ€¦","msgtype":"m.text"},"ts":1695972530324,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$SVPsx-R_RMjmWIukVvkROA00u-7FRZeT3ovQPlWrkAw"},
{"content":{"body":"But also a lot of what I do is review which even on a laptop sucks due to screen width limitations","m.mentions":{},"msgtype":"m.text"},"ts":1695972594207,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$54TY-bp2-FLVIEkUN5QL4-E2rKN8WURhZHegX28Xb50"},
{"content":{"body":"Yeah","msgtype":"m.text"},"ts":1695972661423,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$N-v96ANRVSDCWIm0P_eTCV-4KMtIRyxID84L5nnil_Y"},
{"content":{"body":"> <@annevk:matrix.org> Domenic: so when \"prepare to run script\" is called the currently running task is always non-null? So it's never called from a microtask? I.e., you cannot get there through calling navigate() from a promise callback or some such?\n\nThe currently running task may be null. The surrounding agent cannot be null.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$0xUCeEOUjxpxUHOthwLs2v7bRcabpdWb9TCl29BP3Mo?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: so when \"prepare to run script\" is called the currently running task is always non-null? So it's never called from a microtask? I.e., you cannot get there through calling navigate() from a promise callback or some such?</blockquote></mx-reply>The currently running task may be null. The surrounding agent cannot be null.","m.mentions":{"user_ids":["@annevk:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$0xUCeEOUjxpxUHOthwLs2v7bRcabpdWb9TCl29BP3Mo"}},"msgtype":"m.text"},"ts":1695973077249,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$_RyXlZM-M_i-Wdk_nnDR3OLmYiNkT70OrFLcfeEC-p4"},
{"content":{"body":"Hmm I see the problem","m.mentions":{},"msgtype":"m.text"},"ts":1695973100874,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$LJgV6hoYhOijiSk5LlTVgIuPkIdEaDoHm3ZHIObhclI"},
{"content":{"body":"Note that this is not navigation API specific. Every Web IDL callback call ends up in \"prepare to run script\"","m.mentions":{},"msgtype":"m.text"},"ts":1695973195628,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$8Vf55X94I2Ozr6PyKYLnyU1zoQEgPAMN6XoYs_lyW5U"},
{"content":{"body":"I think the spec is not very prepared for the currently running task to be null. We should probably let it be a microtask.","m.mentions":{},"msgtype":"m.text"},"ts":1695973238151,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$EpN2-gZOSk37F0lJFxVerqE18Qsh_iKDPwGrTN5hawo"},
{"content":{"body":"Oh, it's not null during microtasks after all, I was just wrong yesterday: https://html.spec.whatwg.org/#perform-a-microtask-checkpoint","m.mentions":{},"msgtype":"m.text"},"ts":1695973279951,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$IW_4D6BbrWoy-5WQI_gZ3vKpDoVNEuDsBAB4dhEiQRQ"},
{"content":{"body":"It is null during update the rendering though","m.mentions":{},"msgtype":"m.text"},"ts":1695973284199,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$1U1_GnCgyKgMGbxTjDle_UAjMTxXPbaf7IEZt2zX0e4"},
{"content":{"body":"Which is maybe why \"long animation frames\" is a helpful thing to add, even though we are already tracking long tasks?","m.mentions":{},"msgtype":"m.text"},"ts":1695973306929,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$0BxMUy2-UmcFgzcwomH4sgBEMxOWbcdsHefyD9uEIAY"},
{"content":{"body":"yea the relationship between tasks and rendering in the HTML spec is science fiction atm","m.mentions":{},"msgtype":"m.text"},"ts":1695973717288,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$XpgxgnCwKf16WszhhEAyorSUILuZlQ2_jjYib502vJ4"},
{"content":{"body":"Domenic: someone was suggesting the other day that update the rendering should be a task of its own","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: someone was suggesting the other day that update the rendering should be a task of its own","msgtype":"m.text"},"ts":1695975395347,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$y4LczMOQqWTTPkaAALNHBkc16TXk5J-st1-ygpqH5Zw"},
{"content":{"body":"Domenic: I guess that would solve this","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: I guess that would solve this","msgtype":"m.text"},"ts":1695975408644,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$KQNpXeuJ6HAwv5Lw9NtRHIvnNH4QCKjkk_mkVj6YfkU"},
{"content":{"body":"Domenic: we should also assert currently running task in queue a microtask then","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: we should also assert currently running task in queue a microtask then","msgtype":"m.text"},"ts":1695975426164,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$Y4rv9iQmSmvh4VNFTwmhAsGJfeumhn1h6hfxdHLGuJ4"},
{"content":{"body":"I get kind of upset when people talk about it this way, because the spec is observably equivalent to what browsers do today, and people are just complaining that the spec doesn't match their particular browser engine code.","m.mentions":{},"msgtype":"m.text"},"ts":1695975460566,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$c4pMZULRGyN0no71f7VRRg697nRtGlgS1ZIR28W3uUs"},
{"content":{"body":"Like we shouldn't always reflect browser code directly in specs, and I don't like calling specs fiction if they are observably equivalent but don't match specific implementation choices.","m.mentions":{},"msgtype":"m.text"},"ts":1695975515357,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$Ilb1p2w5uDcLvB8ebrOUjX6SVKbMusCrQiNgWvnlzWg"},
{"content":{"body":"But ultimately, fine, if someone else wants to refactor the rendering steps to match how Chrome or Firefox or Safari works, go for it, I guess.","m.mentions":{},"msgtype":"m.text"},"ts":1695975549052,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$tbQhvS-IBvfi33RtrUrQRGz7O1lSPc-NQSo69x9FTGo"},
{"content":{"body":"Yeah I'm not sure it's science fiction either, but it does seem problematic that currently running task can be null.","m.mentions":{},"msgtype":"m.text"},"ts":1695975708130,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$4RRn5LyOgvPIcOmjKSzYlMw_6yTs6h6tpsaUOs7CzRw"},
{"content":{"body":"> <@domenicdenicola:matrix.org> Like we shouldn't always reflect browser code directly in specs, and I don't like calling specs fiction if they are observably equivalent but don't match specific implementation choices.\n\nApologies for saying this as a general statement. Was frustrated with this before, we seriously need to address it","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs%3Amatrix.org/%24Ilb1p2w5uDcLvB8ebrOUjX6SVKbMusCrQiNgWvnlzWg\">In reply to</a> <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">@domenicdenicola:matrix.org</a><br>Like we shouldn't always reflect browser code directly in specs, and I don't like calling specs fiction if they are observably equivalent but don't match specific implementation choices.</blockquote></mx-reply>Apologies for saying this as a general statement. Was frustrated with this before, we seriously need to address it","m.relates_to":{"m.in_reply_to":{"event_id":"$Ilb1p2w5uDcLvB8ebrOUjX6SVKbMusCrQiNgWvnlzWg"}},"msgtype":"m.text"},"ts":1695976349991,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$EAkQBoUd248xyYav66F_IjbWrPU2TPPSsagH7A0gK0A"},
{"content":{"body":"The update the rendering steps are different from implementations in two key ways: one is that it's outside a task and the other is that it's unclear where ui events are handled","msgtype":"m.text"},"ts":1695976452028,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$Llb8evRodpKZKS3AUdGkd5vzhnvv4rxqrbacxROnmrs"}
]