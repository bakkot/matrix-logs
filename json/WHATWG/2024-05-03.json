[
{"content":{"body":"i dont think we have usecounters for that particular case","msgtype":"m.text"},"ts":1714695276492,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$rZE68Tju8Gqv2YLbmFousiiymTGDFHcImqKuIM4FW-0"},
{"content":{"body":"the new select would be a regular element which gets popover behavior, so it wouldnt escape outside its frame ","format":"org.matrix.custom.html","formatted_body":"the new select would be a regular element which gets popover behavior, so it wouldnt escape outside its frame","msgtype":"m.text"},"ts":1714695308874,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$e32b_yifI3H4973U_ainuicLusRcAq5E4BYrbSG2KUc"},
{"content":{"body":"right","m.mentions":{},"msgtype":"m.text"},"ts":1714695379953,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$ERu-19aMOVpmz167YgSJBnUJKDp2e97ZxBBnj-SNbWY"},
{"content":{"body":"jarhar: does the parser allow anything inside <option> ?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jarhar:matrix.org\">jarhar</a>: does the parser allow anything inside &lt;option&gt; ?","m.mentions":{"user_ids":["@jarhar:matrix.org"]},"msgtype":"m.text"},"ts":1714695602972,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$RgIFlWo6PbiyB8U32GjIihbkKoOBNtOaL41Fx_Lc0vA"},
{"content":{"body":" * jarhar: does the parser allow all the possible elements inside \\<option> ?","format":"org.matrix.custom.html","formatted_body":" * <a href=\"https://matrix.to/#/@jarhar:matrix.org\">jarhar</a>: does the parser allow all the possible elements inside &lt;option&gt; ?","m.mentions":{},"m.new_content":{"body":"jarhar: does the parser allow all the possible elements inside \\<option> ?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jarhar:matrix.org\">jarhar</a>: does the parser allow all the possible elements inside &lt;option&gt; ?","m.mentions":{"user_ids":["@jarhar:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$RgIFlWo6PbiyB8U32GjIihbkKoOBNtOaL41Fx_Lc0vA","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1714695625276,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$pSNXH4k1rIMdmyuSOinXSQJU8Jqm4L-5icQGMWXdRI0"},
{"content":{"body":"oh, that  would be approach 3","m.mentions":{},"msgtype":"m.text"},"ts":1714695679400,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$Jh4fK2nBfPsp_dzGAZIHw-R-u2o5Mtuik-MXm63o-QE"},
{"content":{"body":"my proposal would allow everything in option","msgtype":"m.text"},"ts":1714695729924,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$Zwa6VCLCazUp6rJeMv0mUbLjwkcH_SF6sOH5HmFc178"},
{"content":{"body":"jarhar: hmm, what is the difference between 2 and 3 then? 2 requires use of datalist but 3 wouldn't since one could just use anything inside option?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jarhar:matrix.org\">jarhar</a>: hmm, what is the difference between 2 and 3 then? 2 requires use of datalist but 3 wouldn't since one could just use anything inside option?","m.mentions":{"user_ids":["@jarhar:matrix.org"]},"msgtype":"m.text"},"ts":1714695829914,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$ltgIksa97mO9RdvSXGwJZst3PNZugKv3Pu_15QU1ZPw"},
{"content":{"body":"option 2 doesnt relax the parser at all except within button and datalist tags. so the following would be parsed in option 3, but option 2 would continue to throw away the div:\n<select>\n  <option>\n    <div>hello","format":"org.matrix.custom.html","formatted_body":"<p>option 2 doesnt relax the parser at all except within button and datalist tags. so the following would be parsed in option 3, but option 2 would continue to throw away the div:<br />\n<!-- raw HTML omitted --></p>\n<!-- raw HTML omitted -->","msgtype":"m.text"},"ts":1714696027129,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$uFBXeYuts8xvCzbe6iaG66P8tKosgkjrVUKpEF_u8RQ"},
{"content":{"body":"ah the html i wrote is gone","msgtype":"m.text"},"ts":1714696036054,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$2Srd4HGbWpJ_Nosw83vl_MVbMRksWPD3-QjX9zBIbFE"},
{"content":{"body":"select\n  option\n    div\n      text node","format":"org.matrix.custom.html","formatted_body":"select<br />\noption<br />\ndiv<br />\ntext node","msgtype":"m.text"},"ts":1714696078051,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$XjqYLQlp7l11r0wNRyFofjpo0hzFhkjGTf5dZnRiqXc"},
{"content":{"body":"option 2 would do what the parser currently does here and turn it into this","msgtype":"m.text"},"ts":1714696094365,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$bsMP6OudI1Ka2qC3D3rn1AakUZrrWv-7ahfBSY6mtWk"},
{"content":{"body":"select\noption\ntext node","format":"org.matrix.custom.html","formatted_body":"select<br />\noption<br />\ntext node","msgtype":"m.text"},"ts":1714696100647,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$9FcZiFgyiJI7rWR4VMNhx7ntiQG3fKiKPy2VNFgdAFc"},
{"content":{"body":"to get the div in option 2 you have to wrap the option in a datalist, which also acts as the popover element","msgtype":"m.text"},"ts":1714696132956,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$pjMhDc8bAsgVL3v_1dZ-E_l-gPXuABH89QUZt-VczME"},
{"content":{"body":"and still one more question today - before it is getting too late for me. If one doesn't use `<button>` inside `<select>`, what is the expected behavior? Browser would effectively have button as part of internal shadow DOM and that button has then `<selectedoption>` ?","format":"org.matrix.custom.html","formatted_body":"and still one more question today - before it is getting too late for me. If one doesn't use <code>&lt;button&gt;</code> inside <code>&lt;select&gt;</code>, what is the expected behavior? Browser would effectively have button as part of internal shadow DOM and that button has then <code>&lt;selectedoption&gt;</code> ?","m.mentions":{},"msgtype":"m.text"},"ts":1714696221400,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$8BA4YZ8mfHxhR4DHXE_CFE-11KtOSqfJxMynsCwjvZw"},
{"content":{"body":"yes, but in my current implementation we just copy the text content from the selected option rather than having a full on selectedoption element so we dont have unsanitized content in the ua shadowroot","msgtype":"m.text"},"ts":1714696296258,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$dig9-04G-8jcaSKkYoREGwSwqZrVOizyKsWuIfUNEUU"},
{"content":{"body":"option 2 is implemented in chrome behind experimental web platform features if you want to try it out","msgtype":"m.text"},"ts":1714696299717,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$Nu_snqsxqQcEdTH-1zrTwmxWjVEKDmvOWg02bY8TJ7Y"},
{"content":{"body":"you just have to add appearance:base-select to the select element to make it render the new stuff","msgtype":"m.text"},"ts":1714696344872,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$MVwB9PVTjxz3ZH8fFMCdz905tVnBhtykWQxqyO1d2Ns"},
{"content":{"body":"oh, text content. That is something what was unclear in the explainer, since in one place it is talking about text content and in other place cloning","m.mentions":{},"msgtype":"m.text"},"ts":1714696379511,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$AMUw6-bwVfZmJr_9fnsFCzq86smeNxHpW3luC7nBUR4"},
{"content":{"body":"\"<selectedoption> - The element which contains the text of the currently selected option. Every time that the user selects an option, the browser will replace the text content of this element with the text content of the selected option.\"","m.mentions":{},"msgtype":"m.text"},"ts":1714696391842,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$qN33QG0SfIB1dhdB9uqWzldov9CwxsgYki74CrCkM-U"},
{"content":{"body":"\"The <selectedoption> element enables developers to declaratively clone the content of the selected <option> element to the button and to style it distinctly from the <option>\"","m.mentions":{},"msgtype":"m.text"},"ts":1714696409274,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$zlV809RPDJYb3a8I57174NXH7MjNEdDmymVEBMtHsAI"},
{"content":{"body":"ah thanks for pointing that out ill fix it right away","msgtype":"m.text"},"ts":1714696494039,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$g063oDh9HmAxEoKM5Y9Z2cgGooJdLKqnKyq-m-0kwWg"},
{"content":{"body":"when the author used the selectedoption element, it clones the node not just the text content","msgtype":"m.text"},"ts":1714696514629,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$Tm0e9mCABWyyf6dg0uj0W_5afXUnvW7TVkpmdY0uJtI"}
]