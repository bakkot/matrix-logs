[
{"content":{"body":"annevk: \nThanks your help,Could you please give me the relevant forum link?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>:<br>Thanks your help,Could you please give me the relevant forum link?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"annevk: \nThanks your help,Could you please give me the relevant forum link?","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>:<br>Thanks your help,Could you please give me the relevant forum link?","mimetype":"text/html"}]},"ts":1647825979998,"senderName":"Alex.hsu","senderId":"@alex.hsu:matrix.org","id":"$KSmGb5Ug7S3q1UjO8GIt5PV3dywu_Q9sgg6rafLicyg"},
{"content":{"body":"Need help with streams!\nHow do I find the byte size of a chunk, or the total bytes written/read so far?\nI need to understand the total byte-size of the stream once it's flushed (it's for https://github.com/w3c/navigation-timing/issues/124).\n\nMaybe Mattias Buelens?","format":"org.matrix.custom.html","formatted_body":"<p>Need help with streams!<br>How do I find the byte size of a chunk, or the total bytes written/read so far?<br>I need to understand the total byte-size of the stream once it's flushed (it's for https://github.com/w3c/navigation-timing/issues/124).</p>\n<p>Maybe <a href=\"https://matrix.to/#/@mattiasbuelens:matrix.org\">Mattias Buelens</a>?</p>\n","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Need help with streams!\nHow do I find the byte size of a chunk, or the total bytes written/read so far?\nI need to understand the total byte-size of the stream once it's flushed (it's for https://github.com/w3c/navigation-timing/issues/124).\n\nMaybe Mattias Buelens?","mimetype":"text/plain"},{"body":"<p>Need help with streams!<br>How do I find the byte size of a chunk, or the total bytes written/read so far?<br>I need to understand the total byte-size of the stream once it's flushed (it's for https://github.com/w3c/navigation-timing/issues/124).</p>\n<p>Maybe <a href=\"https://matrix.to/#/@mattiasbuelens:matrix.org\">Mattias Buelens</a>?</p>\n","mimetype":"text/html"}]},"ts":1647848581564,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$byUiwX7iU39LRaTvNV4o_DmKuXm7w_7k88L-jGYYhag"},
{"content":{"body":"> <@noamr:matrix.org> Need help with streams!\n> How do I find the byte size of a chunk, or the total bytes written/read so far?\n> I need to understand the total byte-size of the stream once it's flushed (it's for https://github.com/w3c/navigation-timing/issues/124).\n> \n> Maybe Mattias Buelens?\n\nThe idiomatic solution would be to pipe it through a `TransformStream` that adds up the `byteLength` of each chunk.\n```\nlet totalBytes = 0;\nconst transform = new TransformStream({\n  transform(chunk, controller) {\n      totalBytes += chunk.byteLength;\n      controller.enqueue(chunk);\n  },\n  flush() {\n      console.log(`Downloaded ${totalBytes} bytes`);\n  }\n});\n```","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$byUiwX7iU39LRaTvNV4o_DmKuXm7w_7k88L-jGYYhag?via=mozilla.org&via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@noamr:matrix.org\">@noamr:matrix.org</a><br><p>Need help with streams!<br />How do I find the byte size of a chunk, or the total bytes written/read so far?<br />I need to understand the total byte-size of the stream once it's flushed (it's for https://github.com/w3c/navigation-timing/issues/124).</p>\n<p>Maybe <a href=\"https://matrix.to/#/@mattiasbuelens:matrix.org\">Mattias Buelens</a>?</p>\n</blockquote></mx-reply><p>The idiomatic solution would be to pipe it through a <code>TransformStream</code> that adds up the <code>byteLength</code> of each chunk.</p>\n<pre><code>let totalBytes = 0;\nconst transform = new TransformStream({\n  transform(chunk, controller) {\n      totalBytes += chunk.byteLength;\n      controller.enqueue(chunk);\n  },\n  flush() {\n      console.log(`Downloaded ${totalBytes} bytes`);\n  }\n});\n</code></pre>\n","m.relates_to":{"m.in_reply_to":{"event_id":"$byUiwX7iU39LRaTvNV4o_DmKuXm7w_7k88L-jGYYhag"}},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":"> <@noamr:matrix.org> Need help with streams!\n> How do I find the byte size of a chunk, or the total bytes written/read so far?\n> I need to understand the total byte-size of the stream once it's flushed (it's for https://github.com/w3c/navigation-timing/issues/124).\n> \n> Maybe Mattias Buelens?\n\nThe idiomatic solution would be to pipe it through a `TransformStream` that adds up the `byteLength` of each chunk.\n```\nlet totalBytes = 0;\nconst transform = new TransformStream({\n  transform(chunk, controller) {\n      totalBytes += chunk.byteLength;\n      controller.enqueue(chunk);\n  },\n  flush() {\n      console.log(`Downloaded ${totalBytes} bytes`);\n  }\n});\n```","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$byUiwX7iU39LRaTvNV4o_DmKuXm7w_7k88L-jGYYhag?via=mozilla.org&via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@noamr:matrix.org\">@noamr:matrix.org</a><br><p>Need help with streams!<br />How do I find the byte size of a chunk, or the total bytes written/read so far?<br />I need to understand the total byte-size of the stream once it's flushed (it's for https://github.com/w3c/navigation-timing/issues/124).</p>\n<p>Maybe <a href=\"https://matrix.to/#/@mattiasbuelens:matrix.org\">Mattias Buelens</a>?</p>\n</blockquote></mx-reply><p>The idiomatic solution would be to pipe it through a <code>TransformStream</code> that adds up the <code>byteLength</code> of each chunk.</p>\n<pre><code>let totalBytes = 0;\nconst transform = new TransformStream({\n  transform(chunk, controller) {\n      totalBytes += chunk.byteLength;\n      controller.enqueue(chunk);\n  },\n  flush() {\n      console.log(`Downloaded ${totalBytes} bytes`);\n  }\n});\n</code></pre>\n","mimetype":"text/html"}]},"ts":1647849580818,"senderName":"Mattias Buelens","senderId":"@mattiasbuelens:matrix.org","id":"$cWWWoCbLoWtwnRR0JRgXBziT1Vhv_Hra6Zv2BGqeyHE"}
]