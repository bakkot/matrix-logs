[
{"content":{"body":"Domenic: maybe an initial goal should be to just get a decent overview of document state APIs may depend on: bfcache/fully active/prerender/focused/visible?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: maybe an initial goal should be to just get a decent overview of document state APIs may depend on: bfcache/fully active/prerender/focused/visible?","msgtype":"m.text"},"ts":1643216616661,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$xmjKZmacObPgyLnJKhglV_-Ndu4jYEzThsxk-vAcvWE"},
{"content":{"body":"And yeah, delay makes sense to me given that the event loop runs.","msgtype":"m.text"},"ts":1643216680869,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$bKWY_Y2nRT_Hi6zwaOLxU5qrp8MeKPu5C2lzoGomUDg"},
{"content":{"body":"annevk: yeah I like that goal. Especially now that we have things like system focus more well-defined.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: yeah I like that goal. Especially now that we have things like system focus more well-defined.","msgtype":"m.text"},"ts":1643217135430,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$0BoBTIXG0Ie3cYNKcwZn4BuXog4siXyd_A08lhSGmmo"},
{"content":{"body":"User activation is another one we found, e.g. a lot of APIs needed no changes for prerendering since they were dependent on user activation which can never happen while prerendered.","msgtype":"m.text"},"ts":1643217150632,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$50dPgkm4u_-mrGJY7AFllY_dSEoH2bj5ZUQZw0ZW7Bc"},
{"content":{"body":"Domenic: hmm, I guess that depends on how user activation delegation works, does that do some kind of same TLBC check?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: hmm, I guess that depends on how user activation delegation works, does that do some kind of same TLBC check?","msgtype":"m.text"},"ts":1643217258869,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$BfVjjJtQJ_v0c0FLHumtsq3gWBiHh_AhUUo3kP9ZqAE"},
{"content":{"body":"Well we made prerendering BCs top-level BCs so I think it wouldn't impact it?","msgtype":"m.text"},"ts":1643217287524,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$Zk5SnlSmO4cGOrfTEqF0EX-exeOd4cSehbtOpCj14TU"},
{"content":{"body":"Oh, and even with that it might go wrong? If the same TLBC is used for the prerendered doc? Or maybe that doesn't work. How does that work? ðŸ™‚","msgtype":"m.text"},"ts":1643217289062,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$UGDLEwdfLzgoA4RM0VyCnMK3x-2DaD0kiIrQLiOEiEw"},
{"content":{"body":"They get an entirely separate TLBC","msgtype":"m.text"},"ts":1643217312456,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$5sNp98rbHXo2tXbnvGssU8coZFZooxGXtH01IMICf04"},
{"content":{"body":"Domenic: so if you prerender a same-origin doc and then navigate to it, you break opener relationships?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: so if you prerender a same-origin doc and then navigate to it, you break opener relationships?","msgtype":"m.text"},"ts":1643217341298,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$kpZeTP4p2vEdsj1tl6kKfRYd_Y6PXe_Gg4LZO7750d4"},
{"content":{"body":"Anyway, it would still require user activation delegation to do a TLBC check but I guess it already has to. You don't want it to travel to some other tab.","msgtype":"m.text"},"ts":1643217397458,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$JumMAvYOXX-chXabTOBuJlc3aNUUi2bYgQVnf7w_w98"},
{"content":{"body":"Yeah I think that's the current plan, like a COOP switch","msgtype":"m.text"},"ts":1643217398558,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$Eu6YQp025CglhYokJVsx2ZoxYXxrsvtRCoTGXUYxUMU"},
{"content":{"body":"Let me double-check...","msgtype":"m.text"},"ts":1643217420029,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$7JfI7Ote9gDtahUsBDHjyC2euyah-zeBGReFGIOpmc4"}
]