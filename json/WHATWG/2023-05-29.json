[
{"content":{"body":"zcorpan:  About the validator-nu/Mozilla HTML parser: It seems like either we must not have any good tests for reporting of invalid character references in html5lib-tests, or else we do but we’re just not running them in CI anywhere for the validator-nu/Mozilla HTML parser code. Otherwise I would have caught https://github.com/validator/htmlparser/issues/82 long ago.\n\nA few years back, I did try to set up the htmlparser repo CI to run the html5lib-tests suite, but it was failing due to known issues with it not conforming to encoding handling. So in https://github.com/validator/htmlparser/pull/48 I had spent a bunch of time trying to patch it before I ended up realizing that Henri had long before that already started a branch to fix it properly (but subsequently ended up abandoning it).\n\nBut I guess what I should do at this point is to try to set up CI for it again — but have it ignore all the failing encoding tests from the html5lib-tests suite.","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>:  About the validator-nu/Mozilla HTML parser: It seems like either we must not have any good tests for reporting of invalid character references in html5lib-tests, or else we do but we’re just not running them in CI anywhere for the validator-nu/Mozilla HTML parser code. Otherwise I would have caught https://github.com/validator/htmlparser/issues/82 long ago.</p>\n<p>A few years back, I did try to set up the htmlparser repo CI to run the html5lib-tests suite, but it was failing due to known issues with it not conforming to encoding handling. So in https://github.com/validator/htmlparser/pull/48 I had spent a bunch of time trying to patch it before I ended up realizing that Henri had long before that already started a branch to fix it properly (but subsequently ended up abandoning it).</p>\n<p>But I guess what I should do at this point is to try to set up CI for it again — but have it ignore all the failing encoding tests from the html5lib-tests suite.</p>\n","msgtype":"m.text"},"ts":1685351733945,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$Dl0zCzGlUFCF7xQSNKXjVlSwBQ4tnBIkB5uso_PwoaA"},
{"content":{"body":"Maybe that’s what the Mozilla CI is actually already doing, I dunno. But if it is, then I think that CI must also not be running the error-reporting tests for invalid character references. Otherwise it would have caught the https://github.com/validator/htmlparser/issues/82 regression.","msgtype":"m.text"},"ts":1685352240693,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$DeNB-VFwRBYQtLe6THLqRG6tCbvmkxDmmDJ8ZHpXNO0"},
{"content":{"body":"zcorpan: And the context for me mentioning this now is https://github.com/validator/htmlparser/issues/82 — which I fixed today in ttps://github.com/validator/htmlparser/pull/83.\n\nBut that needs review before merging into the main branch, and I guess it might be a while before Henri is able to review it. And I don’t know who else from Mozilla is currently able to review HTML parser patches\n\nBut anyway, after looking at the issue and the code and testing it, I realized it’s a pretty serious regression in the expected error-reporting behavior for invalid named character references.  I think it’s probably causing no error to be reported for most “normal” cases of invalid character references (not just the pathological cases like the `&ThisAmpersandShouldBeDeemedAmbiguous;` case reported in that issue) — and it’s been that way for nearly 2 years now, since https://github.com/validator/htmlparser/commit/44427c0df60ec899c52b149bba03e1abffad2f5e.\n\nAll that said, I guess this doesn’t affect Firefox behavior at all beyond the error flagging that’s shown in View Source. And for the HTML checker for now, I’m going ahead and temporarily switching back to having the HTML checker build use a feature branch rather than then main branch (until the fix can be merged). So it’s not really urgent.\n\nBut as I mentioned above, it has made me realize that we really should consider having CI set up somewhere to properly run all the right html5lib-tests — before any further changes get committed to the sources.","format":"org.matrix.custom.html","formatted_body":"<p>zcorpan: And the context for me mentioning this now is https://github.com/validator/htmlparser/issues/82 — which I fixed today in ttps://github.com/validator/htmlparser/pull/83.</p>\n<p>But that needs review before merging into the main branch, and I guess it might be a while before Henri is able to review it. And I don’t know who else from Mozilla is currently able to review HTML parser patches</p>\n<p>But anyway, after looking at the issue and the code and testing it, I realized it’s a pretty serious regression in the expected error-reporting behavior for invalid named character references.  I think it’s probably causing no error to be reported for most “normal” cases of invalid character references (not just the pathological cases like the <code>&amp;ThisAmpersandShouldBeDeemedAmbiguous;</code> case reported in that issue) — and it’s been that way for nearly 2 years now, since https://github.com/validator/htmlparser/commit/44427c0df60ec899c52b149bba03e1abffad2f5e.</p>\n<p>All that said, I guess this doesn’t affect Firefox behavior at all beyond the error flagging that’s shown in View Source. And for the HTML checker for now, I’m going ahead and temporarily switching back to having the HTML checker build use a feature branch rather than then main branch (until the fix can be merged). So it’s not really urgent.</p>\n<p>But as I mentioned above, it has made me realize that we really should consider having CI set up somewhere to properly run all the right html5lib-tests — before any further changes get committed to the sources.</p>\n","msgtype":"m.text"},"ts":1685352412342,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$IVEdNACbz4ay28GVF2pLB4_rTIpk8ubt-w4atqvA0kk"},
{"content":{"body":" * zcorpan:  And the context for me mentioning this now is https://github.com/validator/htmlparser/issues/82 — which I fixed today in ttps://github.com/validator/htmlparser/pull/83.\n\nBut that needs review before merging into the main branch, and I guess it might be a while before Henri is able to review it. And I don’t know who else from Mozilla is currently able to review HTML parser patches\n\nBut anyway, after looking at the issue and the code and testing it, I realized it’s a pretty serious regression in the expected error-reporting behavior for invalid named character references.  I think it’s probably causing no error to be reported for most “normal” cases of invalid character references (not just the pathological cases like the `&ThisAmpersandShouldBeDeemedAmbiguous;` case reported in that issue) — and it’s been that way for nearly 2 years now, since https://github.com/validator/htmlparser/commit/44427c0df60ec899c52b149bba03e1abffad2f5e.\n\nAll that said, I guess this doesn’t affect Firefox behavior at all beyond the error flagging that’s shown in View Source. And for the HTML checker for now, I’m going ahead and temporarily switching back to having the HTML checker build use a feature branch rather than then main branch (until the fix can be merged). So it’s not really urgent.\n\nBut as I mentioned above, it has made me realize that we really should consider having CI set up somewhere to properly run all the right html5lib-tests — before any further changes get committed to the sources.","format":"org.matrix.custom.html","formatted_body":" * <p><a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>:  And the context for me mentioning this now is https://github.com/validator/htmlparser/issues/82 — which I fixed today in ttps://github.com/validator/htmlparser/pull/83.</p>\n<p>But that needs review before merging into the main branch, and I guess it might be a while before Henri is able to review it. And I don’t know who else from Mozilla is currently able to review HTML parser patches</p>\n<p>But anyway, after looking at the issue and the code and testing it, I realized it’s a pretty serious regression in the expected error-reporting behavior for invalid named character references.  I think it’s probably causing no error to be reported for most “normal” cases of invalid character references (not just the pathological cases like the <code>&amp;ThisAmpersandShouldBeDeemedAmbiguous;</code> case reported in that issue) — and it’s been that way for nearly 2 years now, since https://github.com/validator/htmlparser/commit/44427c0df60ec899c52b149bba03e1abffad2f5e.</p>\n<p>All that said, I guess this doesn’t affect Firefox behavior at all beyond the error flagging that’s shown in View Source. And for the HTML checker for now, I’m going ahead and temporarily switching back to having the HTML checker build use a feature branch rather than then main branch (until the fix can be merged). So it’s not really urgent.</p>\n<p>But as I mentioned above, it has made me realize that we really should consider having CI set up somewhere to properly run all the right html5lib-tests — before any further changes get committed to the sources.</p>\n","m.new_content":{"body":"zcorpan:  And the context for me mentioning this now is https://github.com/validator/htmlparser/issues/82 — which I fixed today in ttps://github.com/validator/htmlparser/pull/83.\n\nBut that needs review before merging into the main branch, and I guess it might be a while before Henri is able to review it. And I don’t know who else from Mozilla is currently able to review HTML parser patches\n\nBut anyway, after looking at the issue and the code and testing it, I realized it’s a pretty serious regression in the expected error-reporting behavior for invalid named character references.  I think it’s probably causing no error to be reported for most “normal” cases of invalid character references (not just the pathological cases like the `&ThisAmpersandShouldBeDeemedAmbiguous;` case reported in that issue) — and it’s been that way for nearly 2 years now, since https://github.com/validator/htmlparser/commit/44427c0df60ec899c52b149bba03e1abffad2f5e.\n\nAll that said, I guess this doesn’t affect Firefox behavior at all beyond the error flagging that’s shown in View Source. And for the HTML checker for now, I’m going ahead and temporarily switching back to having the HTML checker build use a feature branch rather than then main branch (until the fix can be merged). So it’s not really urgent.\n\nBut as I mentioned above, it has made me realize that we really should consider having CI set up somewhere to properly run all the right html5lib-tests — before any further changes get committed to the sources.","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>:  And the context for me mentioning this now is https://github.com/validator/htmlparser/issues/82 — which I fixed today in ttps://github.com/validator/htmlparser/pull/83.</p>\n<p>But that needs review before merging into the main branch, and I guess it might be a while before Henri is able to review it. And I don’t know who else from Mozilla is currently able to review HTML parser patches</p>\n<p>But anyway, after looking at the issue and the code and testing it, I realized it’s a pretty serious regression in the expected error-reporting behavior for invalid named character references.  I think it’s probably causing no error to be reported for most “normal” cases of invalid character references (not just the pathological cases like the <code>&amp;ThisAmpersandShouldBeDeemedAmbiguous;</code> case reported in that issue) — and it’s been that way for nearly 2 years now, since https://github.com/validator/htmlparser/commit/44427c0df60ec899c52b149bba03e1abffad2f5e.</p>\n<p>All that said, I guess this doesn’t affect Firefox behavior at all beyond the error flagging that’s shown in View Source. And for the HTML checker for now, I’m going ahead and temporarily switching back to having the HTML checker build use a feature branch rather than then main branch (until the fix can be merged). So it’s not really urgent.</p>\n<p>But as I mentioned above, it has made me realize that we really should consider having CI set up somewhere to properly run all the right html5lib-tests — before any further changes get committed to the sources.</p>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$IVEdNACbz4ay28GVF2pLB4_rTIpk8ubt-w4atqvA0kk","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1685352428593,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$Ty7AM4UeX697mR619T5uJPV03-zhb10elvgqLoEJWos"},
{"content":{"body":" * zcorpan:  And the context for me mentioning this now is https://github.com/validator/htmlparser/issues/82 — which I fixed today in https://github.com/validator/htmlparser/pull/83.\n\nBut that needs review before merging into the main branch, and I guess it might be a while before Henri is able to review it. And I don’t know who else from Mozilla is currently able to review HTML parser patches\n\nBut anyway, after looking at the issue and the code and testing it, I realized it’s a pretty serious regression in the expected error-reporting behavior for invalid named character references.  I think it’s probably causing no error to be reported for most “normal” cases of invalid character references (not just the pathological cases like the `&ThisAmpersandShouldBeDeemedAmbiguous;` case reported in that issue) — and it’s been that way for nearly 2 years now, since https://github.com/validator/htmlparser/commit/44427c0df60ec899c52b149bba03e1abffad2f5e.\n\nAll that said, I guess this doesn’t affect Firefox behavior at all beyond the error flagging that’s shown in View Source. And for the HTML checker for now, I’m going ahead and temporarily switching back to having the HTML checker build use a feature branch rather than then main branch (until the fix can be merged). So it’s not really urgent.\n\nBut as I mentioned above, it has made me realize that we really should consider having CI set up somewhere to properly run all the right html5lib-tests — before any further changes get committed to the sources.","format":"org.matrix.custom.html","formatted_body":" * <p><a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>:  And the context for me mentioning this now is https://github.com/validator/htmlparser/issues/82 — which I fixed today in https://github.com/validator/htmlparser/pull/83.</p>\n<p>But that needs review before merging into the main branch, and I guess it might be a while before Henri is able to review it. And I don’t know who else from Mozilla is currently able to review HTML parser patches</p>\n<p>But anyway, after looking at the issue and the code and testing it, I realized it’s a pretty serious regression in the expected error-reporting behavior for invalid named character references.  I think it’s probably causing no error to be reported for most “normal” cases of invalid character references (not just the pathological cases like the <code>&amp;ThisAmpersandShouldBeDeemedAmbiguous;</code> case reported in that issue) — and it’s been that way for nearly 2 years now, since https://github.com/validator/htmlparser/commit/44427c0df60ec899c52b149bba03e1abffad2f5e.</p>\n<p>All that said, I guess this doesn’t affect Firefox behavior at all beyond the error flagging that’s shown in View Source. And for the HTML checker for now, I’m going ahead and temporarily switching back to having the HTML checker build use a feature branch rather than then main branch (until the fix can be merged). So it’s not really urgent.</p>\n<p>But as I mentioned above, it has made me realize that we really should consider having CI set up somewhere to properly run all the right html5lib-tests — before any further changes get committed to the sources.</p>\n","m.new_content":{"body":"zcorpan:  And the context for me mentioning this now is https://github.com/validator/htmlparser/issues/82 — which I fixed today in https://github.com/validator/htmlparser/pull/83.\n\nBut that needs review before merging into the main branch, and I guess it might be a while before Henri is able to review it. And I don’t know who else from Mozilla is currently able to review HTML parser patches\n\nBut anyway, after looking at the issue and the code and testing it, I realized it’s a pretty serious regression in the expected error-reporting behavior for invalid named character references.  I think it’s probably causing no error to be reported for most “normal” cases of invalid character references (not just the pathological cases like the `&ThisAmpersandShouldBeDeemedAmbiguous;` case reported in that issue) — and it’s been that way for nearly 2 years now, since https://github.com/validator/htmlparser/commit/44427c0df60ec899c52b149bba03e1abffad2f5e.\n\nAll that said, I guess this doesn’t affect Firefox behavior at all beyond the error flagging that’s shown in View Source. And for the HTML checker for now, I’m going ahead and temporarily switching back to having the HTML checker build use a feature branch rather than then main branch (until the fix can be merged). So it’s not really urgent.\n\nBut as I mentioned above, it has made me realize that we really should consider having CI set up somewhere to properly run all the right html5lib-tests — before any further changes get committed to the sources.","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>:  And the context for me mentioning this now is https://github.com/validator/htmlparser/issues/82 — which I fixed today in https://github.com/validator/htmlparser/pull/83.</p>\n<p>But that needs review before merging into the main branch, and I guess it might be a while before Henri is able to review it. And I don’t know who else from Mozilla is currently able to review HTML parser patches</p>\n<p>But anyway, after looking at the issue and the code and testing it, I realized it’s a pretty serious regression in the expected error-reporting behavior for invalid named character references.  I think it’s probably causing no error to be reported for most “normal” cases of invalid character references (not just the pathological cases like the <code>&amp;ThisAmpersandShouldBeDeemedAmbiguous;</code> case reported in that issue) — and it’s been that way for nearly 2 years now, since https://github.com/validator/htmlparser/commit/44427c0df60ec899c52b149bba03e1abffad2f5e.</p>\n<p>All that said, I guess this doesn’t affect Firefox behavior at all beyond the error flagging that’s shown in View Source. And for the HTML checker for now, I’m going ahead and temporarily switching back to having the HTML checker build use a feature branch rather than then main branch (until the fix can be merged). So it’s not really urgent.</p>\n<p>But as I mentioned above, it has made me realize that we really should consider having CI set up somewhere to properly run all the right html5lib-tests — before any further changes get committed to the sources.</p>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$IVEdNACbz4ay28GVF2pLB4_rTIpk8ubt-w4atqvA0kk","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1685352452919,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$YCzVKCtG7HfqVmaipAII75sfzQx9iJsyWXD0nIrswCo"},
{"content":{"body":" * zcorpan:  And the context for me mentioning this now is https://github.com/validator/htmlparser/issues/82 — which I fixed today in https://github.com/validator/htmlparser/pull/83.\n\nBut that needs review before merging into the main branch, and I guess it might be a while before Henri is able to review it. And I don’t know who else from Mozilla is currently able to review HTML parser patches\n\nBut anyway, after looking at the issue and the code and testing it, I realized it’s a pretty serious regression in the expected error-reporting behavior for invalid named character references.  I think it’s probably causing no error to be reported for most “normal” cases of invalid character references (not just the pathological cases like the `&ThisAmpersandShouldBeDeemedAmbiguous;` case reported in that issue) — and it’s been that way for nearly 2 years now, since https://github.com/validator/htmlparser/commit/44427c0df60ec899c52b149bba03e1abffad2f5e.\n\nAll that said, I guess this doesn’t affect Firefox behavior at all beyond the error flagging that’s shown in View Source. And for the HTML checker for now, I’m going ahead and temporarily switching back to having the HTML checker build use a feature branch rather than the main branch (until the fix can be merged). So it’s not really urgent.\n\nBut as I mentioned above, it has made me realize that we really should consider having CI set up somewhere to properly run all the right html5lib-tests — before any further changes get committed to the sources.","format":"org.matrix.custom.html","formatted_body":" * <p><a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>:  And the context for me mentioning this now is https://github.com/validator/htmlparser/issues/82 — which I fixed today in https://github.com/validator/htmlparser/pull/83.</p>\n<p>But that needs review before merging into the main branch, and I guess it might be a while before Henri is able to review it. And I don’t know who else from Mozilla is currently able to review HTML parser patches</p>\n<p>But anyway, after looking at the issue and the code and testing it, I realized it’s a pretty serious regression in the expected error-reporting behavior for invalid named character references.  I think it’s probably causing no error to be reported for most “normal” cases of invalid character references (not just the pathological cases like the <code>&amp;ThisAmpersandShouldBeDeemedAmbiguous;</code> case reported in that issue) — and it’s been that way for nearly 2 years now, since https://github.com/validator/htmlparser/commit/44427c0df60ec899c52b149bba03e1abffad2f5e.</p>\n<p>All that said, I guess this doesn’t affect Firefox behavior at all beyond the error flagging that’s shown in View Source. And for the HTML checker for now, I’m going ahead and temporarily switching back to having the HTML checker build use a feature branch rather than the main branch (until the fix can be merged). So it’s not really urgent.</p>\n<p>But as I mentioned above, it has made me realize that we really should consider having CI set up somewhere to properly run all the right html5lib-tests — before any further changes get committed to the sources.</p>\n","m.new_content":{"body":"zcorpan:  And the context for me mentioning this now is https://github.com/validator/htmlparser/issues/82 — which I fixed today in https://github.com/validator/htmlparser/pull/83.\n\nBut that needs review before merging into the main branch, and I guess it might be a while before Henri is able to review it. And I don’t know who else from Mozilla is currently able to review HTML parser patches\n\nBut anyway, after looking at the issue and the code and testing it, I realized it’s a pretty serious regression in the expected error-reporting behavior for invalid named character references.  I think it’s probably causing no error to be reported for most “normal” cases of invalid character references (not just the pathological cases like the `&ThisAmpersandShouldBeDeemedAmbiguous;` case reported in that issue) — and it’s been that way for nearly 2 years now, since https://github.com/validator/htmlparser/commit/44427c0df60ec899c52b149bba03e1abffad2f5e.\n\nAll that said, I guess this doesn’t affect Firefox behavior at all beyond the error flagging that’s shown in View Source. And for the HTML checker for now, I’m going ahead and temporarily switching back to having the HTML checker build use a feature branch rather than the main branch (until the fix can be merged). So it’s not really urgent.\n\nBut as I mentioned above, it has made me realize that we really should consider having CI set up somewhere to properly run all the right html5lib-tests — before any further changes get committed to the sources.","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>:  And the context for me mentioning this now is https://github.com/validator/htmlparser/issues/82 — which I fixed today in https://github.com/validator/htmlparser/pull/83.</p>\n<p>But that needs review before merging into the main branch, and I guess it might be a while before Henri is able to review it. And I don’t know who else from Mozilla is currently able to review HTML parser patches</p>\n<p>But anyway, after looking at the issue and the code and testing it, I realized it’s a pretty serious regression in the expected error-reporting behavior for invalid named character references.  I think it’s probably causing no error to be reported for most “normal” cases of invalid character references (not just the pathological cases like the <code>&amp;ThisAmpersandShouldBeDeemedAmbiguous;</code> case reported in that issue) — and it’s been that way for nearly 2 years now, since https://github.com/validator/htmlparser/commit/44427c0df60ec899c52b149bba03e1abffad2f5e.</p>\n<p>All that said, I guess this doesn’t affect Firefox behavior at all beyond the error flagging that’s shown in View Source. And for the HTML checker for now, I’m going ahead and temporarily switching back to having the HTML checker build use a feature branch rather than the main branch (until the fix can be merged). So it’s not really urgent.</p>\n<p>But as I mentioned above, it has made me realize that we really should consider having CI set up somewhere to properly run all the right html5lib-tests — before any further changes get committed to the sources.</p>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$IVEdNACbz4ay28GVF2pLB4_rTIpk8ubt-w4atqvA0kk","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1685352506526,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$q77hTi8Io-7bJh9cZwOCMRc4Dww35LB6IX21_ifPdIQ"},
{"content":{"body":"sideshowbarker: thanks for the heads up. Seems like it can wait for Henri, but ideally we ought to have another reviewer :)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">sideshowbarker</a>: thanks for the heads up. Seems like it can wait for Henri, but ideally we ought to have another reviewer :)","msgtype":"m.text"},"ts":1685365957139,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$KZOc2iUViNz1wDcqAE-4HpQQF-MONDsrugQWoScKGUA"},
{"content":{"body":"annevk or Domenic : https://github.com/whatwg/html/pull/8008 seems ready. Do either of you want to do an editorial pass? Thx","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a> or <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a> : https://github.com/whatwg/html/pull/8008 seems ready. Do either of you want to do an editorial pass? Thx","msgtype":"m.text"},"ts":1685368189730,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$0vfSJrJnlFS4onLxXPI-KuaKQ-yY45NURhzob8o4rJY"}
]