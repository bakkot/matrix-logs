[
{"content":{"body":"I like Domenic's explanation in the issue. That AbortSignal can be thought of as an \"ExceptionSignal\". The way we did aborting it was a never a third completion state after all.","format":"org.matrix.custom.html","formatted_body":"I like <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>'s explanation in the issue. That AbortSignal can be thought of as an &quot;ExceptionSignal&quot;. The way we did aborting it was a never a third completion state after all.","msgtype":"m.text"},"ts":1637571121291,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$iVQ3XCSowbMiR9lX6RzabcYHnKHRdlaa8dd65twxSNI"},
{"content":{"body":"annevk / Domenic : ping re. my 3 pending timing-related PRs when you get a chance :)\n\nhttps://github.com/whatwg/fetch/pull/1311\nhttps://github.com/whatwg/html/pull/7260\nhttps://github.com/whatwg/html/pull/7339","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a> / <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a> : ping re. my 3 pending timing-related PRs when you get a chance :)</p>\n<p>https://github.com/whatwg/fetch/pull/1311<br>https://github.com/whatwg/html/pull/7260<br>https://github.com/whatwg/html/pull/7339</p>\n","msgtype":"m.text"},"ts":1637581953973,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$qJVBYM6itiMJooEjV6CeGlYIrSqwN0RxZVQreF5sR1c"},
{"content":{"body":"So I was giving it a try at rewriting Deno's implementation of timers, and I noticed some non-timer WPT tests failing","msgtype":"m.text"},"ts":1637583330540,"senderName":"Andreu Botella (he/they)","senderId":"@andreubotella:mozilla.org","id":"$3a-0U8-3qTRyvD7JcBhu48ptCbW-WX51zT6eCTXV8Dg"},
{"content":{"body":"Turns out, according to the spec, calling `clearInterval` inside an interval's callback should _not_ clear it – but every browser does","format":"org.matrix.custom.html","formatted_body":"Turns out, according to the spec, calling <code>clearInterval</code> inside an interval's callback should <em>not</em> clear it – but every browser does","msgtype":"m.text"},"ts":1637583371304,"senderName":"Andreu Botella (he/they)","senderId":"@andreubotella:mozilla.org","id":"$DyXHPlm_zUllIsMzBG3A0YB28vYNOrqnPMS21pKD2yU"},
{"content":{"body":"The handle's entry in the map of active timers is set no matter what in the timer initialization steps for the next iteration of the interval","msgtype":"m.text"},"ts":1637583418217,"senderName":"Andreu Botella (he/they)","senderId":"@andreubotella:mozilla.org","id":"$Ik08hY2F-sDNMi0buH-v_gjuOGNi5JihbmHC66hvbVI"},
{"content":{"body":" * The handle's entry in the map of active timers is set no matter what in the timer initialization steps for the next iteration of the interval","m.new_content":{"body":"The handle's entry in the map of active timers is set no matter what in the timer initialization steps for the next iteration of the interval","msgtype":"m.text"},"m.relates_to":{"event_id":"$Ik08hY2F-sDNMi0buH-v_gjuOGNi5JihbmHC66hvbVI","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1637583472767,"senderName":"Andreu Botella (he/they)","senderId":"@andreubotella:mozilla.org","id":"$y2A4-6Fep6zJkGf2pvJ3t4FNbZlxO7KL9EhrxlY09sE"},
{"content":{"body":"Can you elaborate? Doesn't the spec synchronously mutate the map of active timers?","msgtype":"m.text"},"ts":1637584736837,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$7W9CKZkgESzWONiAxXDd-aP3Xp7H0zIHUuHYCNVbhrE"},
{"content":{"body":"After the callback, if `repeat` is true, the timer initialization steps are run again, whether the handle is in the map of active timers or not","format":"org.matrix.custom.html","formatted_body":"After the callback, if <code>repeat</code> is true, the timer initialization steps are run again, whether the handle is in the map of active timers or not","msgtype":"m.text"},"ts":1637584800885,"senderName":"Andreu Botella (he/they)","senderId":"@andreubotella:mozilla.org","id":"$gx4O6Qr5Hph1iiDf7K-SQ7N4_Q5JX2JyQB3UauCxDyo"},
{"content":{"body":"And the timer initialization steps, in step 14, will add the handle to the map of active timers","msgtype":"m.text"},"ts":1637584828109,"senderName":"Andreu Botella (he/they)","senderId":"@andreubotella:mozilla.org","id":"$KuhPSIaZC34rM96B3Y4Qbsfc0acw6m7lnnvKWf4lCQQ"},
{"content":{"body":"Ah I see. It should probably do the same check as it does in step 1 of the task, after executing the callback.","msgtype":"m.text"},"ts":1637585072233,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$DtsYzvNhyE__nZ6pl3_39oBeOAficHnfHDTz4KmkCYo"},
{"content":{"body":"Indeed","msgtype":"m.text"},"ts":1637585080984,"senderName":"Andreu Botella (he/they)","senderId":"@andreubotella:mozilla.org","id":"$dzmo1GRcYCg_ENps0AFj1L21zyafvwVU0-s4-EwuFKw"},
{"content":{"body":"Noam Rosenthal: 1311 still seems to have unaddressed comments from Yutaka","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: 1311 still seems to have unaddressed comments from Yutaka","msgtype":"m.text"},"ts":1637585864132,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$Nh4hlty8hrDEh-cvYH2Xs8JF5vOyiqhIRM7MjWWKbM4"},
{"content":{"body":"Noam Rosenthal: also, is the discussion with Yoav Weiss and npm1 resolved? Did anything change as a result?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: also, is the discussion with <a href=\"https://matrix.to/#/@yoavweiss:matrix.org\">Yoav Weiss</a> and npm1 resolved? Did anything change as a result?","msgtype":"m.text"},"ts":1637585944282,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$dLPGBhrddFSPFcIl8JAyDpMG0uoh9N-GVv-xNGnTHq4"},
{"content":{"body":"Going to leave the others to Domenic.","format":"org.matrix.custom.html","formatted_body":"Going to leave the others to <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>.","msgtype":"m.text"},"ts":1637586045120,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$DqfoWw4i_LZYt54v5QcQwQHky-PkakN6f92Ip1AFSTQ"},
{"content":{"body":"I've addressed them by changing the scope of the PR for what's already implemented  modulu a few open bugs. Anything missing from the discussion Yoav?","msgtype":"m.text"},"ts":1637586058573,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$_iehNq_WhEwZOq8xBeqB2TasGJN_d-uC_Mz-L3urzJM"},
{"content":{"body":"I see, excluding non-HTTP(S) and abort network errors. I guess that works.","msgtype":"m.text"},"ts":1637586292043,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$NMouNlA29Orlhxl00kno02hTsClzCDv1FFnzJm_4L9E"},
{"content":{"body":"Yutaka's comments still seem applicable though.","msgtype":"m.text"},"ts":1637586323266,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$GtNcuHPDlyh7tcvjoSrqqo0B0wq1yTR27UDIF-bfhbA"}
]