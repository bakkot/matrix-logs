[
{"content":{"body":"Hi all, ","m.mentions":{},"msgtype":"m.text"},"ts":1697175935588,"senderName":"sbastiandev","senderId":"@sbastiandev:matrix.org","id":"$CS-vVu_4mex37N7No7faVZdmIvrncUgVY0yJ0MqalXo"},
{"content":{"body":"I wanted to let you guys know that I open-sourced a Java implementation of WhatWg-Url. It passes relevant Web platform tests (url parsing, setters) and is up to date with the September 2023 spec. Any feedback is more than welcome ;) over here=> https://github.com/stephanebastian/whatwg-url","m.mentions":{},"msgtype":"m.text"},"ts":1697176135874,"senderName":"sbastiandev","senderId":"@sbastiandev:matrix.org","id":"$jGyIBYHHq58V0SlrgCyb4StwjQH9xawAfKGqJqNrGmU"},
{"content":{"body":"That's great!!","m.mentions":{},"msgtype":"m.text"},"ts":1697176989877,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$-LKULDclzOwi4Q1z76XFBuwWghPUKp2omIfvY79wfbU"},
{"content":{"body":"Thx ðŸ˜ƒ","m.mentions":{},"msgtype":"m.text"},"ts":1697178788494,"senderName":"sbastiandev","senderId":"@sbastiandev:matrix.org","id":"$DsAHb5ufkNc0_7noSgcgamXYlAtvHcFwLbrmvJMPzNk"},
{"content":{"body":"> <@sbastiandev:matrix.org> I wanted to let you guys know that I open-sourced a Java implementation of WhatWg-Url. It passes relevant Web platform tests (url parsing, setters) and is up to date with the September 2023 spec. Any feedback is more than welcome ;) over here=> https://github.com/stephanebastian/whatwg-url\n\nI may end up wanting to switch the https://validator.w3.org/nu/ HTML checker to using your implementation rather than the one we are currently using â€” https://github.com/smola/galimatias (which stopped being maintained years ago).","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$jGyIBYHHq58V0SlrgCyb4StwjQH9xawAfKGqJqNrGmU?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@sbastiandev:matrix.org\">@sbastiandev:matrix.org</a><br>I wanted to let you guys know that I open-sourced a Java implementation of WhatWg-Url. It passes relevant Web platform tests (url parsing, setters) and is up to date with the September 2023 spec. Any feedback is more than welcome ;) over here=&gt; https://github.com/stephanebastian/whatwg-url</blockquote></mx-reply>I may end up wanting to switch the https://validator.w3.org/nu/ HTML checker to using your implementation rather than the one we are currently using â€” https://github.com/smola/galimatias (which stopped being maintained years ago).","m.mentions":{"user_ids":["@sbastiandev:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$jGyIBYHHq58V0SlrgCyb4StwjQH9xawAfKGqJqNrGmU"}},"msgtype":"m.text"},"ts":1697180844982,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$krX5kbCjt1IbHIBrbmTwaiFmcXNt1D-XBJ371viYQts"},
{"content":{"body":"sbastiandev: Does yours implement error reporting?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sbastiandev:matrix.org\">sbastiandev</a>: Does yours implement error reporting?","m.mentions":{"user_ids":["@sbastiandev:matrix.org"]},"msgtype":"m.text"},"ts":1697180881454,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$DjK2mpWDwVCzQFH952x3ciedhVK8Mtpe2S4a-stBTPA"},
{"content":{"body":"Whooa cool ! :)","m.mentions":{},"msgtype":"m.text"},"ts":1697180940223,"senderName":"sbastiandev","senderId":"@sbastiandev:matrix.org","id":"$HBTlMu9kJy9tmYYaUlaJMVwRoMNR4YdqJOwyxBexBVM"},
{"content":{"body":"For error reporting there is the method Url.validationErrors() returning all validation errors or failures","m.mentions":{},"msgtype":"m.text"},"ts":1697180996447,"senderName":"sbastiandev","senderId":"@sbastiandev:matrix.org","id":"$fWTnnDDkVBbvtrWFC8TvWv1ZBKWGO_5iyLVIf5rvt-I"},
{"content":{"body":"Thanks, I see https://github.com/stephanebastian/whatwg-url#how-to-get-validation-errors now","m.mentions":{},"msgtype":"m.text"},"ts":1697181017024,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$o1v_VYInUjNxIjGuy9TAqEGoFty5lPDKEwUrn1yFSDU"},
{"content":{"body":"sideshowbarker: Obviously, dont't hesitate to contact me if you've got remarks/questions/feedback or ideas for improvements","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">sideshowbarker</a>: Obviously, dont't hesitate to contact me if you've got remarks/questions/feedback or ideas for improvements","m.mentions":{"user_ids":["@sideshowbarker:matrix.org"]},"msgtype":"m.text"},"ts":1697181410553,"senderName":"sbastiandev","senderId":"@sbastiandev:matrix.org","id":"$vXJxs6yqNZwb1FZUCtvzh_3q7e5RfnaeUBwGRxai-NY"},
{"content":{"body":"sbastiandev: minor nit, we prefer WHATWG, all capitals (it stands for Web Hypertext Application Technology Working Group, but like W3C it's mostly used as its own \"word\")","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sbastiandev:matrix.org\">sbastiandev</a>: minor nit, we prefer WHATWG, all capitals (it stands for Web Hypertext Application Technology Working Group, but like W3C it's mostly used as its own \"word\")","m.mentions":{"user_ids":["@sbastiandev:matrix.org"]},"msgtype":"m.text"},"ts":1697181787139,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$sTRiWBDP6C106vmDEEDW9Cgtgg6trTrsViYUzQF9D4I"},
{"content":{"body":"annevk: Sure, I updated the README, should be ok now. Thanks","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: Sure, I updated the README, should be ok now. Thanks","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1697182140335,"senderName":"sbastiandev","senderId":"@sbastiandev:matrix.org","id":"$mtrywAox4lL9E7c54777JyJxci199AJHMn9juWDbLEk"},
{"content":{"body":"keithamus: that relatedTarget issue is interesting. Maybe invoke event should use different name for that, since I _think_ we don't want the event propagation to stop at shadow boundary","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@keithamus:matrix.org\">keithamus</a>: that relatedTarget issue is interesting. Maybe invoke event should use different name for that, since I <em>think</em> we don't want the event propagation to stop at shadow boundary","m.mentions":{"user_ids":["@keithamus:matrix.org"]},"msgtype":"m.text"},"ts":1697192764745,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$o-o6TC4bWp5iwPPoint84tGVqVOSO33RCjCOLY3pu4g"},
{"content":{"body":"Yes I was just commenting in the issue smaug; I think it's okay because the invoke event doesn't bubble by default and so if you force it with manual dispatch in userland then you'll be dealing with the caveats that come with it. There is precedent of this behaviour with focusin/focusout which _does_ bubble and also has a relatedTarget and so sometimes won't propagate across the shadow boundary.","format":"org.matrix.custom.html","formatted_body":"Yes I was just commenting in the issue <a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a>; I think it's okay because the invoke event doesn't bubble by default and so if you force it with manual dispatch in userland then you'll be dealing with the caveats that come with it. There is precedent of this behaviour with focusin/focusout which <em>does</em> bubble and also has a relatedTarget and so sometimes won't propagate across the shadow boundary.","m.mentions":{"user_ids":["@smaug:mozilla.org"]},"msgtype":"m.text"},"ts":1697192872677,"senderName":"keithamus","senderId":"@keithamus:matrix.org","id":"$PEgbIXp12MdWkGqsijjc_ZiIfCliX9zo1t6dda1tpkg"},
{"content":{"body":"bubbling isn't interesting","m.mentions":{},"msgtype":"m.text"},"ts":1697192892521,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$bmB9Hi42SfV-Q6LeZbxYnHEE7m7OPUmzMA4FVPnEWj4"},
{"content":{"body":"(I mean, there is always capture phase)","m.mentions":{},"msgtype":"m.text"},"ts":1697192907584,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$ghTVN824dmeTVfQoUQ2lXaYILDy6m6Jsh6ESehedIIs"},
{"content":{"body":"For me the important use cases (slash my opinions on this) are:\n\n - invoke dispatches in light dom as you'd expect\n - a button invoking into a shadowroot shouldn't really be possible\n - a button within a shadowroot invoking an element outside the shadowroot should be possible, but the relatedtarget should be retargeted to the host","format":"org.matrix.custom.html","formatted_body":"<p>For me the important use cases (slash my opinions on this) are:</p>\n<ul>\n<li>invoke dispatches in light dom as you'd expect</li>\n<li>a button invoking into a shadowroot shouldn't really be possible</li>\n<li>a button within a shadowroot invoking an element outside the shadowroot should be possible, but the relatedtarget should be retargeted to the host</li>\n</ul>\n","m.mentions":{},"msgtype":"m.text"},"ts":1697192979351,"senderName":"keithamus","senderId":"@keithamus:matrix.org","id":"$BbgCztqFMNkyaEr8ioDh9bx0Agx6i3dGQKxiFOl-I7c"},
{"content":{"body":"A question is that if invoke is dispatched to a shadow element, should the user of the web component be able to call preventDefault()","m.mentions":{},"msgtype":"m.text"},"ts":1697193087957,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$kAjAw7uVQoenuf1f47ZCpGlj7gMYX1DMDzsiyqTS8U0"},
{"content":{"body":"They should","m.mentions":{},"msgtype":"m.text"},"ts":1697193116963,"senderName":"keithamus","senderId":"@keithamus:matrix.org","id":"$lXzo0yYZ9DNLhfQETUby5mvThyuOCp4blpk6Z0z6SCE"},
{"content":{"body":"But I believe an invoke event can only be dispatched to a shadow element _from_ a shadow element in the same tree, or a tree within that tree.","format":"org.matrix.custom.html","formatted_body":"But I believe an invoke event can only be dispatched to a shadow element <em>from</em> a shadow element in the same tree, or a tree within that tree.","m.mentions":{},"msgtype":"m.text"},"ts":1697193167863,"senderName":"keithamus","senderId":"@keithamus:matrix.org","id":"$xKP6jtnNE1hdgI_LOgvhxSdQBN4LqhtA8TlC0cFXa74"},
{"content":{"body":"I don't think any other cancelable event has .relatedTarget","m.mentions":{},"msgtype":"m.text"},"ts":1697193192196,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$d-lIfTkt-gLyFeUyWEjjXklUWuuku6Q1PzDcXiSRsco"},
{"content":{"body":"Does that become a problem?","m.mentions":{},"msgtype":"m.text"},"ts":1697193237411,"senderName":"keithamus","senderId":"@keithamus:matrix.org","id":"$2RDZduMsFh6NK0j6IMYWV9HNvjjFPxxTygZSdREO8Gc"},
{"content":{"body":"Just that this in a new case","m.mentions":{},"msgtype":"m.text"},"ts":1697193260679,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$55PLQxDND7I6fwJStJmwn9pAsjzKZ0HwFp4Ha14p9XQ"},
{"content":{"body":"What if you explicitly set invokeTargetElement to point to some element in another shadow dom?","m.mentions":{},"msgtype":"m.text"},"ts":1697193301482,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$rwDhpipTK3JpwxVVxhGyO1hIFD6q7VhaoSMJzubaYa8"}
]