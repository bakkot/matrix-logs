[
{"content":{"body":"> <@gibson042:matrix.org> it's allowed; see https://www.rfc-editor.org/rfc/rfc9110#section-5.3 (emphasis mine):\n> > a sender MUST NOT generate multiple field lines with the same name in a message (whether in the headers or trailers) or append a field line when a field line of the same name already exists in the message, **_unless_ that field's definition allows multiple field line values to be recombined as a comma-separated list** (i.e., at least one alternative of the field's definition allows a comma-separated list, **such as an ABNF rule of #(values) defined in [Section 5.6.1](https://www.rfc-editor.org/rfc/rfc9110#abnf.extension)**).\n> \n> [Section 5.6.1](https://www.rfc-editor.org/rfc/rfc9110#section-5.6.1) defines \"_a #rule extension to the ABNF rules of [RFC5234](https://www.rfc-editor.org/rfc/rfc9110#RFC5234)… for defining comma-delimited lists of elements… and optional whitespace_\".\n> \n> [`Access-Control-Request-Headers` is registered](https://www.iana.org/assignments/http-fields/http-fields.xhtml#field-names) with reference to WHATWG Fetch, which [describes its values](https://fetch.spec.whatwg.org/#http-new-header-syntax) as ABNF `1#field-name`, where [\"ABNF\" explicitly includes HTTP `#`](https://fetch.spec.whatwg.org/#infrastructure).\n\nVery interesting! Thanks for the pointers.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$31wEzybNU-BhcJTj7InnRV9B6ZJxCgUeMcXlD3dCs4o?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@gibson042:matrix.org\">@gibson042:matrix.org</a><br><p>it's allowed; see https://www.rfc-editor.org/rfc/rfc9110#section-5.3 (emphasis mine):</p>\n<blockquote>\n<p>a sender MUST NOT generate multiple field lines with the same name in a message (whether in the headers or trailers) or append a field line when a field line of the same name already exists in the message, <strong><em>unless</em> that field's definition allows multiple field line values to be recombined as a comma-separated list</strong> (i.e., at least one alternative of the field's definition allows a comma-separated list, <strong>such as an ABNF rule of #(values) defined in <a href=\"https://www.rfc-editor.org/rfc/rfc9110#abnf.extension\">Section 5.6.1</a></strong>).</p>\n</blockquote>\n<p><a href=\"https://www.rfc-editor.org/rfc/rfc9110#section-5.6.1\">Section 5.6.1</a> defines \"<em>a #rule extension to the ABNF rules of <a href=\"https://www.rfc-editor.org/rfc/rfc9110#RFC5234\">RFC5234</a>… for defining comma-delimited lists of elements… and optional whitespace</em>\".</p>\n<p><a href=\"https://www.iana.org/assignments/http-fields/http-fields.xhtml#field-names\"><code>Access-Control-Request-Headers</code> is registered</a> with reference to WHATWG Fetch, which <a href=\"https://fetch.spec.whatwg.org/#http-new-header-syntax\">describes its values</a> as ABNF <code>1#field-name</code>, where <a href=\"https://fetch.spec.whatwg.org/#infrastructure\">\"ABNF\" explicitly includes HTTP <code>#</code></a>.</p>\n</blockquote></mx-reply>Very interesting! Thanks for the pointers.","m.mentions":{"user_ids":["@gibson042:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$31wEzybNU-BhcJTj7InnRV9B6ZJxCgUeMcXlD3dCs4o"}},"msgtype":"m.text"},"ts":1723917836090,"senderName":"jub0bs","senderId":"@jub0bs:matrix.org","id":"$71C52kc0efZwT1MuVO2jnH_JmSBKtaTd5JUEgl0_IbU"}
]