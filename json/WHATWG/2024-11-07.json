[
{"content":{"body":"Anyone here signed up for bsky.app? I'm @annevk.nl.","m.mentions":{},"msgtype":"m.text"},"ts":1730969420343,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$3qQ9XYr5rFAKtC7T3ZYKA1zMgIQ--xg1K9FvkiYWu78"},
{"content":{"body":":target and text fragments only work for the first page load if the element or text is available before onload. If the content is created from a `fetch()` + script, that can happen after onload. Should we have an explicit API to delay the load event, or to go \"try again now to hash-navigate\" ?","format":"org.matrix.custom.html","formatted_body":":target and text fragments only work for the first page load if the element or text is available before onload. If the content is created from a <code>fetch()</code> + script, that can happen after onload. Should we have an explicit API to delay the load event, or to go \"try again now to hash-navigate\" ?","m.mentions":{},"msgtype":"m.text"},"ts":1730971788990,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$ArtF1sIlHYoHcqutmjUEspR2-Uf2ub8c4mhzuKIwPTU"},
{"content":{"body":"Hmm, `fetch()` normally delays the `load` event as well I think, but of course not if you use it after it. Perhaps what you suggest is okay within some timeout, but it doesn't seem generally okay.","format":"org.matrix.custom.html","formatted_body":"Hmm, <code>fetch()</code> normally delays the <code>load</code> event as well I think, but of course not if you use it after it. Perhaps what you suggest is okay within some timeout, but it doesn't seem generally okay.","m.mentions":{},"msgtype":"m.text"},"ts":1730972813758,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$f68z-NmiiApRrxpb-guxr7FjygYYGRtLwRudLWvc-EI"},
{"content":{"body":"zcorpan: Given the following WPT test case:\n\n```html\n<img title=\"title\" data-expectedlabel=\"title\" alt=\"\" data-testname=\"img with tooltip label with empty alt\" class=\"ex\" src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\">\n```\n…and given the spec requirements at https://w3c.github.io/html-aam/#img-element-accessible-name-computation — specifically this requirement:\n> *Otherwise use `alt` attribute, even if its value is the empty string.*\n…then it seems that the expectation for that test should be the empty string.\nBut as you case, instead the expectation is `title` (from the `title` attribute value).\nAnd https://wpt.fyi/results/accname/name/comp_tooltip.html shows that all engines pass that test.\nSo it seems like they’re all violating that _“use `alt` attribute, even if its value is the empty string”_ spec requirement.","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: Given the following WPT test case:</p>\n<pre><code class=\"language-html\">&lt;img title=\"title\" data-expectedlabel=\"title\" alt=\"\" data-testname=\"img with tooltip label with empty alt\" class=\"ex\" src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\"&gt;\n</code></pre>\n<p>…and given the spec requirements at https://w3c.github.io/html-aam/#img-element-accessible-name-computation — specifically this requirement:</p>\n<blockquote>\n<p><em>Otherwise use <code>alt</code> attribute, even if its value is the empty string.</em><br>…then it seems that the expectation for that test should be the empty string.<br>But as you case, instead the expectation is <code>title</code> (from the <code>title</code> attribute value).<br>And https://wpt.fyi/results/accname/name/comp_tooltip.html shows that all engines pass that test.<br>So it seems like they’re all violating that <em>“use <code>alt</code> attribute, even if its value is the empty string”</em> spec requirement.</p>\n</blockquote>\n","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"msgtype":"m.text"},"ts":1730974740155,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$1J-kFRFFUSt0AYKAytqKhBR1yvA2p4dIccog8lKFB7A"},
{"content":{"body":" * zcorpan: Given the following WPT test case:\n\n```html\n<img title=\"title\" data-expectedlabel=\"title\" alt=\"\" data-testname=\"img with tooltip label with empty alt\" class=\"ex\" src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\">\n```\n\n…and given the spec requirements at https://w3c.github.io/html-aam/#img-element-accessible-name-computation — specifically this requirement:\n\n> _Otherwise use `alt` attribute, even if its value is the empty string._\n\n …then it seems that the expectation for that test should be the empty string.\nBut as you case, instead the expectation is `title` (from the `title` attribute value).\nAnd https://wpt.fyi/results/accname/name/comp\\_tooltip.html shows that all engines pass that test.\nSo it seems like they’re all violating that _“use `alt` attribute, even if its value is the empty string”_ spec requirement.","format":"org.matrix.custom.html","formatted_body":" * <p><a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: Given the following WPT test case:</p>\n<pre><code class=\"language-html\">&lt;img title=\"title\" data-expectedlabel=\"title\" alt=\"\" data-testname=\"img with tooltip label with empty alt\" class=\"ex\" src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\"&gt;\n</code></pre>\n<p>…and given the spec requirements at https://w3c.github.io/html-aam/#img-element-accessible-name-computation — specifically this requirement:</p>\n<blockquote>\n<p><em>Otherwise use <code>alt</code> attribute, even if its value is the empty string.</em></p>\n</blockquote>\n<p>…then it seems that the expectation for that test should be the empty string.<br>But as you case, instead the expectation is <code>title</code> (from the <code>title</code> attribute value).<br>And https://wpt.fyi/results/accname/name/comp_tooltip.html shows that all engines pass that test.<br>So it seems like they’re all violating that <em>“use <code>alt</code> attribute, even if its value is the empty string”</em> spec requirement.</p>\n","m.mentions":{},"m.new_content":{"body":"zcorpan: Given the following WPT test case:\n\n```html\n<img title=\"title\" data-expectedlabel=\"title\" alt=\"\" data-testname=\"img with tooltip label with empty alt\" class=\"ex\" src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\">\n```\n\n…and given the spec requirements at https://w3c.github.io/html-aam/#img-element-accessible-name-computation — specifically this requirement:\n\n> _Otherwise use `alt` attribute, even if its value is the empty string._\n\n …then it seems that the expectation for that test should be the empty string.\nBut as you case, instead the expectation is `title` (from the `title` attribute value).\nAnd https://wpt.fyi/results/accname/name/comp\\_tooltip.html shows that all engines pass that test.\nSo it seems like they’re all violating that _“use `alt` attribute, even if its value is the empty string”_ spec requirement.","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: Given the following WPT test case:</p>\n<pre><code class=\"language-html\">&lt;img title=\"title\" data-expectedlabel=\"title\" alt=\"\" data-testname=\"img with tooltip label with empty alt\" class=\"ex\" src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\"&gt;\n</code></pre>\n<p>…and given the spec requirements at https://w3c.github.io/html-aam/#img-element-accessible-name-computation — specifically this requirement:</p>\n<blockquote>\n<p><em>Otherwise use <code>alt</code> attribute, even if its value is the empty string.</em></p>\n</blockquote>\n<p>…then it seems that the expectation for that test should be the empty string.<br>But as you case, instead the expectation is <code>title</code> (from the <code>title</code> attribute value).<br>And https://wpt.fyi/results/accname/name/comp_tooltip.html shows that all engines pass that test.<br>So it seems like they’re all violating that <em>“use <code>alt</code> attribute, even if its value is the empty string”</em> spec requirement.</p>\n","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$1J-kFRFFUSt0AYKAytqKhBR1yvA2p4dIccog8lKFB7A","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1730974762610,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$fUQNHsJD0w6lriEVBFL_k2EGuXbhVj5Ob9tVZ8AMOBg"},
{"content":{"body":"Or else, is there something I’m misunderstanding?","m.mentions":{},"msgtype":"m.text"},"ts":1730974796103,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$jEmsI03k2JC5EKmEOCl4HpEoTmgg8LldgXqcI_CU67I"},
{"content":{"body":" * zcorpan: Given the following WPT test case:\n\n```html\n<img title=\"title\" data-expectedlabel=\"title\" alt=\"\" data-testname=\"img with tooltip label with empty alt\" class=\"ex\" src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\">\n```\n\n…and given the spec requirements at https://w3c.github.io/html-aam/#img-element-accessible-name-computation — specifically this requirement:\n\n> _Otherwise use `alt` attribute, even if its value is the empty string._\n\n…then it seems that the expectation for that test should be the empty string.\nBut as you can ses, instead the expectation is `title` (from the `title` attribute value).\nAnd https://wpt.fyi/results/accname/name/comp\\_tooltip.html shows that all engines pass that test.\nSo it seems like they’re all violating that _“use `alt` attribute, even if its value is the empty string”_ spec requirement.","format":"org.matrix.custom.html","formatted_body":" * <p><a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: Given the following WPT test case:</p>\n<pre><code class=\"language-html\">&lt;img title=\"title\" data-expectedlabel=\"title\" alt=\"\" data-testname=\"img with tooltip label with empty alt\" class=\"ex\" src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\"&gt;\n</code></pre>\n<p>…and given the spec requirements at https://w3c.github.io/html-aam/#img-element-accessible-name-computation — specifically this requirement:</p>\n<blockquote>\n<p><em>Otherwise use <code>alt</code> attribute, even if its value is the empty string.</em></p>\n</blockquote>\n<p>…then it seems that the expectation for that test should be the empty string.<br>But as you can ses, instead the expectation is <code>title</code> (from the <code>title</code> attribute value).<br>And https://wpt.fyi/results/accname/name/comp_tooltip.html shows that all engines pass that test.<br>So it seems like they’re all violating that <em>“use <code>alt</code> attribute, even if its value is the empty string”</em> spec requirement.</p>\n","m.mentions":{},"m.new_content":{"body":"zcorpan: Given the following WPT test case:\n\n```html\n<img title=\"title\" data-expectedlabel=\"title\" alt=\"\" data-testname=\"img with tooltip label with empty alt\" class=\"ex\" src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\">\n```\n\n…and given the spec requirements at https://w3c.github.io/html-aam/#img-element-accessible-name-computation — specifically this requirement:\n\n> _Otherwise use `alt` attribute, even if its value is the empty string._\n\n…then it seems that the expectation for that test should be the empty string.\nBut as you can ses, instead the expectation is `title` (from the `title` attribute value).\nAnd https://wpt.fyi/results/accname/name/comp\\_tooltip.html shows that all engines pass that test.\nSo it seems like they’re all violating that _“use `alt` attribute, even if its value is the empty string”_ spec requirement.","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: Given the following WPT test case:</p>\n<pre><code class=\"language-html\">&lt;img title=\"title\" data-expectedlabel=\"title\" alt=\"\" data-testname=\"img with tooltip label with empty alt\" class=\"ex\" src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\"&gt;\n</code></pre>\n<p>…and given the spec requirements at https://w3c.github.io/html-aam/#img-element-accessible-name-computation — specifically this requirement:</p>\n<blockquote>\n<p><em>Otherwise use <code>alt</code> attribute, even if its value is the empty string.</em></p>\n</blockquote>\n<p>…then it seems that the expectation for that test should be the empty string.<br>But as you can ses, instead the expectation is <code>title</code> (from the <code>title</code> attribute value).<br>And https://wpt.fyi/results/accname/name/comp_tooltip.html shows that all engines pass that test.<br>So it seems like they’re all violating that <em>“use <code>alt</code> attribute, even if its value is the empty string”</em> spec requirement.</p>\n","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$1J-kFRFFUSt0AYKAytqKhBR1yvA2p4dIccog8lKFB7A","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1730974831924,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$L2jtYduRt6tHOstKmc65HMEMOuQ7JtyjOzMQmJzuE88"},
{"content":{"body":" * zcorpan: Given the following WPT test case:\n\n```html\n<img title=\"title\" data-expectedlabel=\"title\" alt=\"\" data-testname=\"img with tooltip label with empty alt\" class=\"ex\" src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\">\n```\n\n…and given the spec requirements at https://w3c.github.io/html-aam/#img-element-accessible-name-computation — specifically this requirement:\n\n> _Otherwise use `alt` attribute, even if its value is the empty string._\n\n…then it seems that the expectation for that test should be the empty string.\nBut as you can see, instead the expectation is `title` (from the `title` attribute value).\nAnd https://wpt.fyi/results/accname/name/comp\\_tooltip.html shows that all engines pass that test.\nSo it seems like they’re all violating that _“use `alt` attribute, even if its value is the empty string”_ spec requirement.","format":"org.matrix.custom.html","formatted_body":" * <p><a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: Given the following WPT test case:</p>\n<pre><code class=\"language-html\">&lt;img title=\"title\" data-expectedlabel=\"title\" alt=\"\" data-testname=\"img with tooltip label with empty alt\" class=\"ex\" src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\"&gt;\n</code></pre>\n<p>…and given the spec requirements at https://w3c.github.io/html-aam/#img-element-accessible-name-computation — specifically this requirement:</p>\n<blockquote>\n<p><em>Otherwise use <code>alt</code> attribute, even if its value is the empty string.</em></p>\n</blockquote>\n<p>…then it seems that the expectation for that test should be the empty string.<br>But as you can see, instead the expectation is <code>title</code> (from the <code>title</code> attribute value).<br>And https://wpt.fyi/results/accname/name/comp_tooltip.html shows that all engines pass that test.<br>So it seems like they’re all violating that <em>“use <code>alt</code> attribute, even if its value is the empty string”</em> spec requirement.</p>\n","m.mentions":{},"m.new_content":{"body":"zcorpan: Given the following WPT test case:\n\n```html\n<img title=\"title\" data-expectedlabel=\"title\" alt=\"\" data-testname=\"img with tooltip label with empty alt\" class=\"ex\" src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\">\n```\n\n…and given the spec requirements at https://w3c.github.io/html-aam/#img-element-accessible-name-computation — specifically this requirement:\n\n> _Otherwise use `alt` attribute, even if its value is the empty string._\n\n…then it seems that the expectation for that test should be the empty string.\nBut as you can see, instead the expectation is `title` (from the `title` attribute value).\nAnd https://wpt.fyi/results/accname/name/comp\\_tooltip.html shows that all engines pass that test.\nSo it seems like they’re all violating that _“use `alt` attribute, even if its value is the empty string”_ spec requirement.","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: Given the following WPT test case:</p>\n<pre><code class=\"language-html\">&lt;img title=\"title\" data-expectedlabel=\"title\" alt=\"\" data-testname=\"img with tooltip label with empty alt\" class=\"ex\" src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\"&gt;\n</code></pre>\n<p>…and given the spec requirements at https://w3c.github.io/html-aam/#img-element-accessible-name-computation — specifically this requirement:</p>\n<blockquote>\n<p><em>Otherwise use <code>alt</code> attribute, even if its value is the empty string.</em></p>\n</blockquote>\n<p>…then it seems that the expectation for that test should be the empty string.<br>But as you can see, instead the expectation is <code>title</code> (from the <code>title</code> attribute value).<br>And https://wpt.fyi/results/accname/name/comp_tooltip.html shows that all engines pass that test.<br>So it seems like they’re all violating that <em>“use <code>alt</code> attribute, even if its value is the empty string”</em> spec requirement.</p>\n","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$1J-kFRFFUSt0AYKAytqKhBR1yvA2p4dIccog8lKFB7A","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1730974839946,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$fOwE-cPW_m6A1Re484hKx3WfHyo9-I8iBA17FYc4KYM"},
{"content":{"body":"> <@zcorpan:mozilla.org> :target and text fragments only work for the first page load if the element or text is available before onload. If the content is created from a `fetch()` + script, that can happen after onload. Should we have an explicit API to delay the load event, or to go \"try again now to hash-navigate\" ?\n\nWouldn't this allow delaying the load event indefinitely and various similar footguns?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$ArtF1sIlHYoHcqutmjUEspR2-Uf2ub8c4mhzuKIwPTU?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">@zcorpan:mozilla.org</a><br>:target and text fragments only work for the first page load if the element or text is available before onload. If the content is created from a <code>fetch()</code> + script, that can happen after onload. Should we have an explicit API to delay the load event, or to go \"try again now to hash-navigate\" ?</blockquote></mx-reply>Wouldn't this allow delaying the load event indefinitely and various similar footguns?","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$ArtF1sIlHYoHcqutmjUEspR2-Uf2ub8c4mhzuKIwPTU"}},"msgtype":"m.text"},"ts":1730975464588,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$sfUpoAnibGh9s028AGSsq6KsTuCTkqKoy3kOzlZNhN4"},
{"content":{"body":"I think that's possible in theory already as the specification doesn't have network timeouts. But yeah, I'm not entirely convinced the load event is the correct primitive to build more upon.","m.mentions":{},"msgtype":"m.text"},"ts":1730977071179,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$HyYKy31WyEiuJzq7VtTmZkQppjmaqtwl-aoD2ZOHXe8"},
{"content":{"body":"Noam Rosenthal: yes","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: yes","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1730977400892,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$ct0qUIzCwBmYtCS4QVID3Iud-PTENkv7RfeAypUnnGk"},
{"content":{"body":"though the \"try now\" API doesn't","m.mentions":{},"msgtype":"m.text"},"ts":1730977417051,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$E7W9FE-EiH-vH2hAMvdBzG6PCyxUS60A0iIJuA3n0eQ"},
{"content":{"body":"annevk: await res.json() doesn't delay","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: await res.json() doesn't delay","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1730977447844,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$i38jC3rdcPgKqJ-t7b1jRcLZqsrvIZSZl470Z8qSgV8"},
{"content":{"body":"zcorpan: Ah wait I see: https://w3c.github.io/accname/#step2E says:\n> E. Host Language Label: Otherwise, if the current node's native markup provides an attribute (e.g. alt) or element (e.g. HTML label or SVG title) that defines a text alternative, return that alternative in the form of a flat string as defined by the host language, **unless the element is marked as presentational (role=\"presentation\" or role=\"none\").**\n\n…`<img alt=\"\">` is `role=\"presentation\"`","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: Ah wait I see: https://w3c.github.io/accname/#step2E says:</p>\n<blockquote>\n<p>E. Host Language Label: Otherwise, if the current node's native markup provides an attribute (e.g. alt) or element (e.g. HTML label or SVG title) that defines a text alternative, return that alternative in the form of a flat string as defined by the host language, <strong>unless the element is marked as presentational (role=\"presentation\" or role=\"none\").</strong></p>\n</blockquote>\n<p>…<code>&lt;img alt=\"\"&gt;</code> is <code>role=\"presentation\"</code></p>\n","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"msgtype":"m.text"},"ts":1730977510938,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$FZ5CHUqWO8DLTXF28BfLNUEJASms9T4o3Xhbq-RqphI"},
{"content":{"body":"sideshowbarker: somewhat action at a distance","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">sideshowbarker</a>: somewhat action at a distance","m.mentions":{"user_ids":["@sideshowbarker:matrix.org"]},"msgtype":"m.text"},"ts":1730977682323,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$wWUyGKsuHgXoIfyULjVC2K4b0YOTW2OgMc4j3zD0wkE"},
{"content":{"body":"annevk: actually where does the spec say to delay the load event for `fetch()`?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: actually where does the spec say to delay the load event for <code>fetch()</code>?","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1730977757679,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$7XV-3vLLBlhZCTW5sgWOBhxFcgrshvQ12ij4sNaMfvQ"},
{"content":{"body":"zcorpan: it's prolly an open issue? At least I was under the impression that most fetches initiated before `load` fires end up delaying the `load` event, but maybe `fetch()` is somehow exempted?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: it's prolly an open issue? At least I was under the impression that most fetches initiated before <code>load</code> fires end up delaying the <code>load</code> event, but maybe <code>fetch()</code> is somehow exempted?","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"msgtype":"m.text"},"ts":1730984086592,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$3spwaK5tSIVXIAcsScYpJrvyjN7rng5pGChOgXWrsvo"},
{"content":{"body":"annevk: I think https://searchfox.org/mozilla-central/search?q=symbol:_ZN7mozilla3dom8Document13UnblockOnloadEb&redirect=false is relevant for gecko. Includes e.g. fonts but not `fetch()` afaict","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: I think https://searchfox.org/mozilla-central/search?q=symbol:_ZN7mozilla3dom8Document13UnblockOnloadEb&amp;redirect=false is relevant for gecko. Includes e.g. fonts but not <code>fetch()</code> afaict","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1730986312110,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$vqQFe3LACpwPhRqmZ2HCYqwrnxvbsw_LnF5Ff_C9o7A"},
{"content":{"body":"> <@annevk:matrix.org> zcorpan: it's prolly an open issue? At least I was under the impression that most fetches initiated before `load` fires end up delaying the `load` event, but maybe `fetch()` is somehow exempted?\n\nIn HTML this is explicitly specified for each operation that delays the load event, there's nothing general for fetches","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$3spwaK5tSIVXIAcsScYpJrvyjN7rng5pGChOgXWrsvo?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: it's prolly an open issue? At least I was under the impression that most fetches initiated before <code>load</code> fires end up delaying the <code>load</code> event, but maybe <code>fetch()</code> is somehow exempted?</blockquote></mx-reply>In HTML this is explicitly specified for each operation that delays the load event, there's nothing general for fetches","m.mentions":{"user_ids":["@annevk:matrix.org","@zcorpan:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$3spwaK5tSIVXIAcsScYpJrvyjN7rng5pGChOgXWrsvo"}},"msgtype":"m.text"},"ts":1730987389799,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$7SMND0YgxnOZNHp5JDnLfz0ewi2siwLrFZYLg-qrAFs"},
{"content":{"body":"Noam Rosenthal: I know, but I'm pretty sure we discovered holes in that model","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: I know, but I'm pretty sure we discovered holes in that model","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1730987949736,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$myRECvp8YYoub4kb41XBpQ1wUynfe4ZLRdkp-E9B0Qc"},
{"content":{"body":"> <@annevk:matrix.org> Noam Rosenthal: I know, but I'm pretty sure we discovered holes in that model\n\nOK gotcha","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$myRECvp8YYoub4kb41XBpQ1wUynfe4ZLRdkp-E9B0Qc?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: I know, but I'm pretty sure we discovered holes in that model</blockquote></mx-reply>OK gotcha","m.mentions":{"user_ids":["@annevk:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$myRECvp8YYoub4kb41XBpQ1wUynfe4ZLRdkp-E9B0Qc"}},"msgtype":"m.text"},"ts":1730987991900,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$eE0tAMfv-5Q6OfRg44qpVn94A015sOpHCqvLFHjPRCI"},
{"content":{"body":"jarhar: just looking at the patches... which one defines what select::picker(select) maps to?  ","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jarhar:matrix.org\">jarhar</a>: just looking at the patches... which one defines what select::picker(select) maps to?","m.mentions":{"user_ids":["@jarhar:matrix.org"]},"msgtype":"m.text"},"ts":1731010750246,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$9OYUGU1AsOAB1D2ajM85eb0OSJASKwsNgflTerZuf6k"},
{"content":{"body":"are you talking about the chromium implementation? if so, this is it: https://chromium-review.googlesource.com/c/chromium/src/+/5817433","m.mentions":{},"m.relates_to":{"event_id":"$9OYUGU1AsOAB1D2ajM85eb0OSJASKwsNgflTerZuf6k","is_falling_back":true,"m.in_reply_to":{"event_id":"$9OYUGU1AsOAB1D2ajM85eb0OSJASKwsNgflTerZuf6k"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1731014026804,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$E4wUXJ_aV06lOyjYv3jMmiFgGTwxt16Rf1Im_jaSxng"},
{"content":{"body":"annevk smaug: We didn't get to it on the WHATNOT agenda today, but we were hoping to discuss graduating `moveBefore()` to stage 3 — what do you think? I've marked the DOM PR as ready to review.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a> <a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a>: We didn't get to it on the WHATNOT agenda today, but we were hoping to discuss graduating <code>moveBefore()</code> to stage 3 — what do you think? I've marked the DOM PR as ready to review.","m.mentions":{"user_ids":["@annevk:matrix.org","@smaug:mozilla.org"]},"msgtype":"m.text"},"ts":1731014786795,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$in7f1SARvyYklGZo3uJ-guK-81l-qSSSxeAkxzmqxjE"},
{"content":{"body":"spec prs","m.mentions":{},"m.relates_to":{"event_id":"$9OYUGU1AsOAB1D2ajM85eb0OSJASKwsNgflTerZuf6k","is_falling_back":true,"m.in_reply_to":{"event_id":"$E4wUXJ_aV06lOyjYv3jMmiFgGTwxt16Rf1Im_jaSxng"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1731014848286,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$sVVZ5vjQvR7DwCd3Z7uFtgD8cMMhZr2_dLN2B56gpeo"},
{"content":{"body":"Well, I look at the diff views, and the many prs are split to quite a few diffs ","m.mentions":{},"m.relates_to":{"event_id":"$9OYUGU1AsOAB1D2ajM85eb0OSJASKwsNgflTerZuf6k","is_falling_back":true,"m.in_reply_to":{"event_id":"$sVVZ5vjQvR7DwCd3Z7uFtgD8cMMhZr2_dLN2B56gpeo"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1731014885990,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$pv4um7VkvIdva80z8oPoAbh0IRKFk-GW72qvc8YlNIQ"},
{"content":{"body":"From implementation point of view I need to still check session history handling, that is the most worrisome to me","m.mentions":{},"msgtype":"m.text"},"ts":1731014917002,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$6fwod6sV2YFYuC7lmnPosHh3fG9O3OqSp6v9UBk1qM0"},
{"content":{"body":"Like if you have iframes, and you navigate all them multiple times. Now you reorder the iframe elements and load some more pages to them. Then load a new top level page in a way which doesn't put the first top level page to bfcache. Then go back to the first top level page. What gets loaded to which iframe?","m.mentions":{},"msgtype":"m.text"},"ts":1731015082920,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$bEB56GfQzP6UwFnY4xmCC9qHZkfo56O1LnPfHW68AGU"},
{"content":{"body":"Somewhat related to my ancient testcase http://mozilla.pettay.fi/moztests/history2/Start.html Chrome's behavior there is quite surprising, but at least it doesn't load the url to a wrong iframe anymore","m.mentions":{},"m.relates_to":{"event_id":"$bEB56GfQzP6UwFnY4xmCC9qHZkfo56O1LnPfHW68AGU","is_falling_back":true,"m.in_reply_to":{"event_id":"$bEB56GfQzP6UwFnY4xmCC9qHZkfo56O1LnPfHW68AGU"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1731015908757,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$5nBxJHDqY1Dy88BagskURK7rDP9NQlcnlKQIZQXyAyU"}
]