[
{"content":{"body":"Is there something we can do about the pr-preview[bot] using stale data to overwrite issue comments. It makes it quite error prone to edit PR descriptions","m.mentions":{},"msgtype":"m.text"},"ts":1759223395985,"senderName":"keithamus","senderId":"@keithamus:matrix.org","id":"$lOhNUwzhfrMZiH5OaUnQ17iYFeOEnKGQ0_bt1Tbgfm8"},
{"content":{"body":"In the image above you can see i added a webkit bug for this PR, but the pr-previewbot updated the preview but in doing so used state comment data and undid the change, removing the webkit bug. ","m.mentions":{},"msgtype":"m.text"},"ts":1759223440599,"senderName":"keithamus","senderId":"@keithamus:matrix.org","id":"$P_r2SUgHjyt9YBnYb6MAr6advccxC52-tsIPf2vd46A"},
{"content":{"body":"We have instructions for how to deal with this in the PR template as I mentioned. The alternative would be attempting to patch https://github.com/tobie/pr-preview I suppose. I'm not entirely sure how that would work as I think the comment has to be submitted as a whole to GitHub so there would always be a bit of a race.","m.mentions":{},"msgtype":"m.text"},"ts":1759223841610,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$3N_4QZoXxZGZrxK-dCrEwX1vnHQNg-mojfRgIK0VB7c"},
{"content":{"body":"(And you could imagine alternatives such as PR Preview always creating its own comment, but that adds noise for everyone that's not really desirable.)","m.mentions":{},"msgtype":"m.text"},"ts":1759223932389,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$yZFC5qrOjU-ZEfQs5XFTToqWGVIezM23Ks3jkTA19z4"},
{"content":{"body":"Ideally GitHub would have some way for a bot to annotate issues/PRs with Markdown in a way that doesn't result in notifications, but we lost our resident GitHub person. ðŸ˜€","m.mentions":{},"msgtype":"m.text"},"ts":1759225550556,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$tVhzpVdlvjhfit5b_7MgBn3D2cj9KpxUIbdaQa33ATM"},
{"content":{"body":"I think typically bots add a comment to the timeline. There's also the \"deployments\" feature which was theoretically designed to solve this kind of issue - it adds a new timeline entry. Both of these have quite large trade-offs compared to updating OP though. ","m.mentions":{},"msgtype":"m.text"},"ts":1759225632066,"senderName":"keithamus","senderId":"@keithamus:matrix.org","id":"$u9sGsGt_JFbCaFNzVHZQOWspasKKTL8Y7KJ9p0ZeVng"},
{"content":{"body":"If \"minimal notifications\" is also acceptable, we could have a single comment that the bot updates as needed","m.mentions":{},"msgtype":"m.text"},"ts":1759225637148,"senderName":"Ms2ger","senderId":"@ms2ger:igalia.com","id":"$mQj8Zf-ZvHjfQEwFvxBkMGWLr-QaXkh7Z2A7LAl27jc"},
{"content":{"body":"WPT used to have a single comment and that was a huge source of frustration. At least for Domenic and I.","m.mentions":{},"msgtype":"m.text"},"ts":1759225773875,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$MlYThNxhVziF-_nt56wGURUVhJBwztv7yC7Hb4tjY7U"},
{"content":{"body":"https://github.com/tobie/pr-preview/pull/163 hopefully this goes some of the way to minimising the issue at least.","m.mentions":{},"msgtype":"m.text"},"ts":1759225806077,"senderName":"keithamus","senderId":"@keithamus:matrix.org","id":"$yBpF-dJV-jANIrg3pUfbvzAsDHeQxAKNXpXO1cvA96s"},
{"content":{"body":"Noam Rosenthal: hey, I'm trying to figure out a buggy navigation api test case. I'm looking at [navigate-event/navigate-navigation-navigate.html](https://searchfox.org/firefox-main/source/testing/web-platform/tests/navigation-api/navigate-event/navigate-navigation-navigate.html), and tracing it, I can only find that this should fire a navigate event with `navigationType` == `\"push\"`. It does so in gecko, but chromium disagrees","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: hey, I'm trying to figure out a buggy navigation api test case. I'm looking at <a href=\"https://searchfox.org/firefox-main/source/testing/web-platform/tests/navigation-api/navigate-event/navigate-navigation-navigate.html\">navigate-event/navigate-navigation-navigate.html</a>, and tracing it, I can only find that this should fire a navigate event with <code>navigationType</code> == <code>\"push\"</code>. It does so in gecko, but chromium disagrees","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1759234139096,"senderName":"farre","senderId":"@afarre:mozilla.org","id":"$jrM5Ur33D5DEKPb9RhZXHD_IqMpKwdw1sSEC0yqPcvg"},
{"content":{"body":"(and I got extra eyes from smaug, so I don't think I'm missing anything)","format":"org.matrix.custom.html","formatted_body":"(and I got extra eyes from <a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a>, so I don't think I'm missing anything)","m.mentions":{"user_ids":["@smaug:mozilla.org"]},"msgtype":"m.text"},"ts":1759234196419,"senderName":"farre","senderId":"@afarre:mozilla.org","id":"$Tsoa6xtk6miMWtdR4fTmwvGbvlqazh8qU5hrsIhIGFM"},
{"content":{"body":"location.href setter doesn't behave like navigate() when it comes to 'completely loaded' checks.","m.mentions":{},"msgtype":"m.text"},"ts":1759234287801,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$l12Psecqa-TJmYy1xpW0Hqs6p11ZgBi88gIaX6B9Nds"},
{"content":{"body":"Taking a look. ","m.mentions":{"user_ids":["@afarre:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$jrM5Ur33D5DEKPb9RhZXHD_IqMpKwdw1sSEC0yqPcvg"}},"msgtype":"m.text"},"ts":1759236336021,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$qu2AFfkwBF2VdiWZc9dzyMLwqR9B_lDCH3083ifwJrQ"},
{"content":{"body":"zcorpan: how do you want to handle that reformat thing? Should I rubber stamp it? Will a follow-up Meta commit ensure blame is not impacted?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: how do you want to handle that reformat thing? Should I rubber stamp it? Will a follow-up Meta commit ensure blame is not impacted?","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"msgtype":"m.text"},"ts":1759236372283,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$IEWkKMmoAZ5jHLYfKJDweFqLeIUBHmnLTso-8KOz0Rc"},
{"content":{"body":"Also not sure if jmdyck wants to take a look before it happens.","format":"org.matrix.custom.html","formatted_body":"Also not sure if <a href=\"https://matrix.to/#/@jmdyck:matrix.org\">jmdyck</a> wants to take a look before it happens.","m.mentions":{"user_ids":["@jmdyck:matrix.org"]},"msgtype":"m.text"},"ts":1759236422730,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$btD8Q4BdncJjMWmQ_BxF_vNmrjg5P1ZklziNSaF-djo"}
]