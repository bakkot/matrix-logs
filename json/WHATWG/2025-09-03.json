[
{"content":{"body":"I am staring at this part of the permission policy spec: https://www.w3.org/TR/permissions-policy-1/#declared-origin - it seems to imply that an iframe uses its src attribute to determine its \"declared origin\" and I don't understand how this makes sense, given that an iframe can be navigated and src won't change.","m.mentions":{},"msgtype":"m.text"},"ts":1756900799720,"senderName":"Simon☀️","senderId":"@simon_f:mozilla.org","id":"$8b3fj2kVpJ0xHez4z8SDsDJpdL41v0-kRSK-u6g7OlM"},
{"content":{"body":"> The declared origin concept is intended to represent the origin of the document which the embedding page intends to load into a frame. This means, for instance, that if the browser does not support the sandbox or srcdoc attributes, it should not take those attributes into account when computing the declared origin.","format":"org.matrix.custom.html","formatted_body":"<blockquote>\n<p>The declared origin concept is intended to represent the origin of the document which the embedding page intends to load into a frame. This means, for instance, that if the browser does not support the sandbox or srcdoc attributes, it should not take those attributes into account when computing the declared origin.</p>\n</blockquote>\n","m.mentions":{},"msgtype":"m.text"},"ts":1756900816469,"senderName":"Simon☀️","senderId":"@simon_f:mozilla.org","id":"$A3p0LpvumyqlMih3y1IufaS22kZkcw0jXq3cZFv9SXc"},
{"content":{"body":"If a page denies a frame access to e.g. geolocation, the frame shouldn't be able to get around it by navigating, right?","m.mentions":{},"msgtype":"m.text"},"ts":1756900860632,"senderName":"Simon☀️","senderId":"@simon_f:mozilla.org","id":"$leWgTT83FFZlggwDvlLKIeSiOpgj5vnJv6mXCKAYBKE"},
{"content":{"body":"Simon☀️: https://w3c.github.io/webappsec-permissions-policy/#declared-origin is the editor's draft\n\nBut yeah, it uses the origin of the URL in `src` if `src` is present. Even if the  frame has been navigated elsewhere.","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@simon_f:mozilla.org\">Simon☀️</a>: https://w3c.github.io/webappsec-permissions-policy/#declared-origin is the editor's draft</p>\n<p>But yeah, it uses the origin of the URL in <code>src</code> if <code>src</code> is present. Even if the  frame has been navigated elsewhere.</p>\n","m.mentions":{"user_ids":["@simon_f:mozilla.org"]},"msgtype":"m.text"},"ts":1756909401932,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$oQ6F8788TrRWuW8oPg1JhVjumwB8B5qy5tOtpAZJbgo"},
{"content":{"body":"Simon☀️: https://w3c.github.io/webappsec-permissions-policy/#algo-process-policy-attributes is the relevant caller","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@simon_f:mozilla.org\">Simon☀️</a>: https://w3c.github.io/webappsec-permissions-policy/#algo-process-policy-attributes is the relevant caller","m.mentions":{"user_ids":["@simon_f:mozilla.org"]},"msgtype":"m.text"},"ts":1756909633606,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$NzK-a2C9fl34NgJn_99IulRxt9djqmnQaIryXG_OUhY"},
{"content":{"body":"hmm, window.location = \"foo\"; consumes transient activation in Chrome. I wonder why ","m.mentions":{},"msgtype":"m.text"},"ts":1756910579345,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$H3dhhR_7ZBxfpV9YiDnTWDEMEWv0Cmw17u3QWhABnN8"}
]