[
{"content":{"body":"LOGO ","msgtype":"m.text","org.matrix.msc1767.text":"LOGO "},"ts":1656894558405,"senderName":"Nikola Abkniky","senderId":"@abkforever:matrix.org","id":"$humqGQtk2JPI7sPJuxWI-TYjD8Q1WE6FKaZamSXSlV0"},
{"content":{"body":"Hi! I recently joined a company that already signed the participation agreement - How do I make https://participate.whatwg.org/agreement-status?user=nicolo-ribaudo&repo=html pick it up, rather than being stuck on a non-verified signature I submitted last year?","msgtype":"m.text","org.matrix.msc1767.text":"Hi! I recently joined a company that already signed the participation agreement - How do I make https://participate.whatwg.org/agreement-status?user=nicolo-ribaudo&repo=html pick it up, rather than being stuck on a non-verified signature I submitted last year?"},"ts":1656937248201,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$MkKgh4xJJ1y7xcyFFTmMOb676qO8rjWl2A3g7-jvv9c"},
{"content":{"body":"nicolo-ribaudo: the reviewer of your first PR should verify it","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@nicolo-ribaudo:matrix.org\">nicolo-ribaudo</a>: the reviewer of your first PR should verify it","msgtype":"m.text"},"ts":1656937308926,"senderName":"Luca Casonato","senderId":"@lucacasonato:matrix.org","id":"$RxpODIYuToF0IuJ3EnrAkaUFgdFNebapExBdrRtcxFk"},
{"content":{"body":"Ok thanks! I'll wait until my PR is non-draft before worrying about it","msgtype":"m.text","org.matrix.msc1767.text":"Ok thanks! I'll wait until my PR is non-draft before worrying about it"},"ts":1656937357802,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$Kwh7PoOZRkrkpfCcxxXJTFamY0q-pGSv10hibr9OJ_k"},
{"content":{"body":" * Ok thanks! I'll wait until my PR is non-draft before worrying about it","m.new_content":{"body":"Ok thanks! I'll wait until my PR is non-draft before worrying about it","msgtype":"m.text","org.matrix.msc1767.text":"Ok thanks! I'll wait until my PR is non-draft before worrying about it"},"m.relates_to":{"event_id":"$Kwh7PoOZRkrkpfCcxxXJTFamY0q-pGSv10hibr9OJ_k","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.text":" * Ok thanks! I'll wait until my PR is non-draft before worrying about it"},"ts":1656937364682,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$GOK-pjazK5EthqzqjcAeIb833PDYBKPVqAoz18_kKzw"},
{"content":{"body":"annevk: is there anything in the websocket spec that still requires what this test is testing? http://wpt.live/websockets/constructor/014.html (i.e. to wait with establishing another websocket connection to the same host while the previous is still connecting, as a DOS prevention mechanism)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: is there anything in the websocket spec that still requires what this test is testing? http://wpt.live/websockets/constructor/014.html (i.e. to wait with establishing another websocket connection to the same host while the previous is still connecting, as a DOS prevention mechanism)","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"annevk: is there anything in the websocket spec that still requires what this test is testing? http://wpt.live/websockets/constructor/014.html (i.e. to wait with establishing another websocket connection to the same host while the previous is still connecting, as a DOS prevention mechanism)","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: is there anything in the websocket spec that still requires what this test is testing? http://wpt.live/websockets/constructor/014.html (i.e. to wait with establishing another websocket connection to the same host while the previous is still connecting, as a DOS prevention mechanism)","mimetype":"text/html"}]},"ts":1656946414933,"senderName":"zcorpan","senderId":"@zcorpan_:matrix.org","id":"$1s1Ma3BiWGj0_Uc6rq9SG3llHOgsw7gycu7S3P4ybkA"},
{"content":{"body":"zcorpan: https://datatracker.ietf.org/doc/html/rfc6455#section-4.1 ","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan_:matrix.org\">zcorpan</a>: https://datatracker.ietf.org/doc/html/rfc6455#section-4.1","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"zcorpan: https://datatracker.ietf.org/doc/html/rfc6455#section-4.1 ","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@zcorpan_:matrix.org\">zcorpan</a>: https://datatracker.ietf.org/doc/html/rfc6455#section-4.1","mimetype":"text/html"}]},"ts":1656946625009,"senderName":"Yutaka Hirano","senderId":"@yhirano:matrix.org","id":"$NN-S7lSaBEnFph9oVm9hLjlztC-9l01nNv-BIAY_Y74"},
{"content":{"body":"If the client already has a WebSocket connection to the remote\nhost (IP address) identified by /host/ and port /port/ pair, even\nif the remote host is known by another name, the client MUST wait\nuntil that connection has been established or for that connection\nto have failed.  There MUST be no more than one connection in a\nCONNECTING state.","msgtype":"m.text","org.matrix.msc1767.text":"If the client already has a WebSocket connection to the remote\nhost (IP address) identified by /host/ and port /port/ pair, even\nif the remote host is known by another name, the client MUST wait\nuntil that connection has been established or for that connection\nto have failed.  There MUST be no more than one connection in a\nCONNECTING state."},"ts":1656946660307,"senderName":"Yutaka Hirano","senderId":"@yhirano:matrix.org","id":"$-K_w9-WKvSuPzcwpn6ijsBauDkQVkCxdW3HObJD6tDQ"},
{"content":{"body":"Maybe this?","msgtype":"m.text","org.matrix.msc1767.text":"Maybe this?"},"ts":1656946664433,"senderName":"Yutaka Hirano","senderId":"@yhirano:matrix.org","id":"$F4Bw6gCSqbZmKqeTP8ehJIyyLv7laITvVWc7aHXtzo0"},
{"content":{"body":"Yutaka Hirano: Thanks! Yes. I thought it was defined in the API rather than the protocol","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@yhirano:matrix.org\">Yutaka Hirano</a>: Thanks! Yes. I thought it was defined in the API rather than the protocol","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Yutaka Hirano: Thanks! Yes. I thought it was defined in the API rather than the protocol","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@yhirano:matrix.org\">Yutaka Hirano</a>: Thanks! Yes. I thought it was defined in the API rather than the protocol","mimetype":"text/html"}]},"ts":1656946700905,"senderName":"zcorpan","senderId":"@zcorpan_:matrix.org","id":"$3EzWJKDVoabQlBVFMD4sdSiDAmS1cDA1SLWSgCvS4Jk"},
{"content":{"body":"It shouldn't delay the first connection though, but maybe browsers have to wait a microtask or a task to avoid race conditions?","msgtype":"m.text","org.matrix.msc1767.text":"It shouldn't delay the first connection though, but maybe browsers have to wait a microtask or a task to avoid race conditions?"},"ts":1656946765189,"senderName":"zcorpan","senderId":"@zcorpan_:matrix.org","id":"$947yvFxUu4F00BnnKycgLyNn17oVxv363-oYUQJuSd8"},
{"content":{"body":"Context: https://github.com/whatwg/html/issues/8037","msgtype":"m.text","org.matrix.msc1767.text":"Context: https://github.com/whatwg/html/issues/8037"},"ts":1656946780700,"senderName":"zcorpan","senderId":"@zcorpan_:matrix.org","id":"$0qhtaecEEldBRshCVqHlltSiFH1h3jEUJt9kAmrWwEQ"},
{"content":{"body":"zcorpan: Interesting! As long as the connection establishment is fast enough, subsequent WebSocket connections will not be suffered, right?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan_:matrix.org\">zcorpan</a>: Interesting! As long as the connection establishment is fast enough, subsequent WebSocket connections will not be suffered, right?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"zcorpan: Interesting! As long as the connection establishment is fast enough, subsequent WebSocket connections will not be suffered, right?","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@zcorpan_:matrix.org\">zcorpan</a>: Interesting! As long as the connection establishment is fast enough, subsequent WebSocket connections will not be suffered, right?","mimetype":"text/html"}]},"ts":1656947120928,"senderName":"Yutaka Hirano","senderId":"@yhirano:matrix.org","id":"$kQWnFMkAQhNBJjBq7uZwLLQvkdP6x53SeYkY5ihbUxY"},
{"content":{"body":"Yutaka Hirano: The delaying while connecting applies equally for all subsequent connections","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@yhirano:matrix.org\">Yutaka Hirano</a>: The delaying while connecting applies equally for all subsequent connections","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Yutaka Hirano: The delaying while connecting applies equally for all subsequent connections","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@yhirano:matrix.org\">Yutaka Hirano</a>: The delaying while connecting applies equally for all subsequent connections","mimetype":"text/html"}]},"ts":1656947254880,"senderName":"zcorpan","senderId":"@zcorpan_:matrix.org","id":"$qmT1cF0uLLVBKEJcJFDbU-HHYVH4gnPFubWzi2ysTaA"},
{"content":{"body":"Yutaka Hirano: but I mean, for the first connection, there is no prior connection, so no reason for the browser to wait. But how does the browser know for sure that a connection is the first one, without incurring any delay for the first connection? The \"establish a WebSocket connection\" steps are defined to be in parallel","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@yhirano:matrix.org\">Yutaka Hirano</a>: but I mean, for the first connection, there is no prior connection, so no reason for the browser to wait. But how does the browser know for sure that a connection is the first one, without incurring any delay for the first connection? The &quot;establish a WebSocket connection&quot; steps are defined to be in parallel","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Yutaka Hirano: but I mean, for the first connection, there is no prior connection, so no reason for the browser to wait. But how does the browser know for sure that a connection is the first one, without incurring any delay for the first connection? The \"establish a WebSocket connection\" steps are defined to be in parallel","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@yhirano:matrix.org\">Yutaka Hirano</a>: but I mean, for the first connection, there is no prior connection, so no reason for the browser to wait. But how does the browser know for sure that a connection is the first one, without incurring any delay for the first connection? The &quot;establish a WebSocket connection&quot; steps are defined to be in parallel","mimetype":"text/html"}]},"ts":1656947345964,"senderName":"zcorpan","senderId":"@zcorpan_:matrix.org","id":"$uo5vdXaQlxcWsO_hU9CLnmy4JMOTljz0Y1-h3_1JLHY"},
{"content":{"body":"Also with the guarantee to never violate the requirement","msgtype":"m.text","org.matrix.msc1767.text":"Also with the guarantee to never violate the requirement"},"ts":1656947388003,"senderName":"zcorpan","senderId":"@zcorpan_:matrix.org","id":"$cf7vZItrnSXhTThM5gIStPBDrA-ah_0761iSFRzfyTo"},
{"content":{"body":"@zcorpan: Our implementation runs all the websocket network activities on the same sequence, though It is different from the scripting sequence.","msgtype":"m.text","org.matrix.msc1767.text":"@zcorpan: Our implementation runs all the websocket network activities on the same sequence, though It is different from the scripting sequence."},"ts":1656947524790,"senderName":"Yutaka Hirano","senderId":"@yhirano:matrix.org","id":"$q0e0eJGyCxyXeeKNCzIlVUqBiOFccQEE9ae-FnKPZYI"},
{"content":{"body":"zcorpan: Thus it is easy for us to distinguish the \"first\" request (for a server).","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan_:matrix.org\">zcorpan</a>: Thus it is easy for us to distinguish the &quot;first&quot; request (for a server).","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"zcorpan: Thus it is easy for us to distinguish the \"first\" request (for a server).","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@zcorpan_:matrix.org\">zcorpan</a>: Thus it is easy for us to distinguish the &quot;first&quot; request (for a server).","mimetype":"text/html"}]},"ts":1656947588876,"senderName":"Yutaka Hirano","senderId":"@yhirano:matrix.org","id":"$M-_08atC1fOrMwqgThGA1mhCZddE-fm6Sz9Vlk-jAdc"},
{"content":{"body":" * @zcorpan: Our implementation runs all the websocket network activities on the same sequence, though It is different from the scripting sequence.","m.new_content":{"body":"@zcorpan: Our implementation runs all the websocket network activities on the same sequence, though It is different from the scripting sequence.","msgtype":"m.text","org.matrix.msc1767.text":"@zcorpan: Our implementation runs all the websocket network activities on the same sequence, though It is different from the scripting sequence."},"m.relates_to":{"event_id":"$q0e0eJGyCxyXeeKNCzIlVUqBiOFccQEE9ae-FnKPZYI","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.text":" * @zcorpan: Our implementation runs all the websocket network activities on the same sequence, though It is different from the scripting sequence."},"ts":1656947620036,"senderName":"Yutaka Hirano","senderId":"@yhirano:matrix.org","id":"$JQ3pKA6HRyKtCgik7dgXSkkVfkF-7XyKy4cza9Oxql8"},
{"content":{"body":"Yutaka Hirano: is strelec's claim \"I think that the remainder of the main thread execution delays the connection to the socket (if not according to the spec, then by browser implementations)\" true in chromium? That is, does the script that calls the WebSocket constructor need to complete before the network connection is started?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@yhirano:matrix.org\">Yutaka Hirano</a>: is strelec's claim &quot;I think that the remainder of the main thread execution delays the connection to the socket (if not according to the spec, then by browser implementations)&quot; true in chromium? That is, does the script that calls the WebSocket constructor need to complete before the network connection is started?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Yutaka Hirano: is strelec's claim \"I think that the remainder of the main thread execution delays the connection to the socket (if not according to the spec, then by browser implementations)\" true in chromium? That is, does the script that calls the WebSocket constructor need to complete before the network connection is started?","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@yhirano:matrix.org\">Yutaka Hirano</a>: is strelec's claim &quot;I think that the remainder of the main thread execution delays the connection to the socket (if not according to the spec, then by browser implementations)&quot; true in chromium? That is, does the script that calls the WebSocket constructor need to complete before the network connection is started?","mimetype":"text/html"}]},"ts":1656947748977,"senderName":"zcorpan","senderId":"@zcorpan_:matrix.org","id":"$ITSnDgG2Ex2mR83mzNy6WApH2ocsaPl-fkEjA0rhLnI"},
{"content":{"body":"zcorpan: Sorry, what do you mean by \"complete\"?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan_:matrix.org\">zcorpan</a>: Sorry, what do you mean by &quot;complete&quot;?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"zcorpan: Sorry, what do you mean by \"complete\"?","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@zcorpan_:matrix.org\">zcorpan</a>: Sorry, what do you mean by &quot;complete&quot;?","mimetype":"text/html"}]},"ts":1656947934037,"senderName":"Yutaka Hirano","senderId":"@yhirano:matrix.org","id":"$aqcavAzqg4VULlv5syDYppY7HoVOSBB97eN3PCSf3rc"},
{"content":{"body":"Due to \"in parallel\", `new WebSocket(...)` returns immediately. The network connection will be done later.","format":"org.matrix.custom.html","formatted_body":"Due to &quot;in parallel&quot;, <code>new WebSocket(...)</code> returns immediately. The network connection will be done later.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Due to \"in parallel\", `new WebSocket(...)` returns immediately. The network connection will be done later.","mimetype":"text/plain"},{"body":"Due to &quot;in parallel&quot;, <code>new WebSocket(...)</code> returns immediately. The network connection will be done later.","mimetype":"text/html"}]},"ts":1656947993597,"senderName":"Yutaka Hirano","senderId":"@yhirano:matrix.org","id":"$1H3Rt11wNmlnqM9gFBLPSFmrLJPnNPmAQE0MW_P5uwI"},
{"content":{"body":"Yutaka Hirano: the sync part of the script is run, e.g. in `<script>const ws = new WebSocket(url); ws.onopen = handleOpen; await new Promise(resolve => resolve())</script>` after the onopen handler is registered but before the promise has resolved","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@yhirano:matrix.org\">Yutaka Hirano</a>: the sync part of the script is run, e.g. in <code>&lt;script&gt;const ws = new WebSocket(url); ws.onopen = handleOpen; await new Promise(resolve =&gt; resolve())&lt;/script&gt;</code> after the onopen handler is registered but before the promise has resolved","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Yutaka Hirano: the sync part of the script is run, e.g. in `<script>const ws = new WebSocket(url); ws.onopen = handleOpen; await new Promise(resolve => resolve())</script>` after the onopen handler is registered but before the promise has resolved","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@yhirano:matrix.org\">Yutaka Hirano</a>: the sync part of the script is run, e.g. in <code>&lt;script&gt;const ws = new WebSocket(url); ws.onopen = handleOpen; await new Promise(resolve =&gt; resolve())&lt;/script&gt;</code> after the onopen handler is registered but before the promise has resolved","mimetype":"text/html"}]},"ts":1656948159435,"senderName":"zcorpan","senderId":"@zcorpan_:matrix.org","id":"$e4RQp7VPsW-m571rqeyAUp-sXTt_6JZubQw46oKB5v4"},
{"content":{"body":"The question is how much later, and does it depend on when the \"script\" is done?","msgtype":"m.text","org.matrix.msc1767.text":"The question is how much later, and does it depend on when the \"script\" is done?"},"ts":1656948227288,"senderName":"zcorpan","senderId":"@zcorpan_:matrix.org","id":"$TNjpBtxSpkGkzH71x0gVDpGTP4IgMC-muNpgUOEnlnE"},
{"content":{"body":"zcorpan: In our implentation, the script completes immediately. The WebSocket constructor kicks the connection procedure in another sequence (\"the network thread\"). The waiting behavior is implemented in the network thread. Does this answer your question?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan_:matrix.org\">zcorpan</a>: In our implentation, the script completes immediately. The WebSocket constructor kicks the connection procedure in another sequence (&quot;the network thread&quot;). The waiting behavior is implemented in the network thread. Does this answer your question?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"zcorpan: In our implentation, the script completes immediately. The WebSocket constructor kicks the connection procedure in another sequence (\"the network thread\"). The waiting behavior is implemented in the network thread. Does this answer your question?","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@zcorpan_:matrix.org\">zcorpan</a>: In our implentation, the script completes immediately. The WebSocket constructor kicks the connection procedure in another sequence (&quot;the network thread&quot;). The waiting behavior is implemented in the network thread. Does this answer your question?","mimetype":"text/html"}]},"ts":1656948348576,"senderName":"Yutaka Hirano","senderId":"@yhirano:matrix.org","id":"$Mimo-tsrLzhI5gFk5XO7klI68Wdd3tbALq4kKfUlupY"},
{"content":{"body":"Yutaka Hirano: I think so. It sounds like strelec's claim is then not correct (for chromium). To verify, I could do `alert(true) {}` right after the WebSocket constructor, and the browser would still open a connection from the network thread while the main thread is busy running the infinite loop?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@yhirano:matrix.org\">Yutaka Hirano</a>: I think so. It sounds like strelec's claim is then not correct (for chromium). To verify, I could do <code>alert(true) {}</code> right after the WebSocket constructor, and the browser would still open a connection from the network thread while the main thread is busy running the infinite loop?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Yutaka Hirano: I think so. It sounds like strelec's claim is then not correct (for chromium). To verify, I could do `alert(true) {}` right after the WebSocket constructor, and the browser would still open a connection from the network thread while the main thread is busy running the infinite loop?","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@yhirano:matrix.org\">Yutaka Hirano</a>: I think so. It sounds like strelec's claim is then not correct (for chromium). To verify, I could do <code>alert(true) {}</code> right after the WebSocket constructor, and the browser would still open a connection from the network thread while the main thread is busy running the infinite loop?","mimetype":"text/html"}]},"ts":1656948477333,"senderName":"zcorpan","senderId":"@zcorpan_:matrix.org","id":"$vT3CSyKrAw_QIKQ5ao7M-DgAhnykNQuWJAIsFtVkbe8"},
{"content":{"body":"zcorpan: Yes, the connection will be established, but the script wouldn't be able to know that because the `onopen` handler is blocked by the busy loop.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan_:matrix.org\">zcorpan</a>: Yes, the connection will be established, but the script wouldn't be able to know that because the <code>onopen</code> handler is blocked by the busy loop.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"zcorpan: Yes, the connection will be established, but the script wouldn't be able to know that because the `onopen` handler is blocked by the busy loop.","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@zcorpan_:matrix.org\">zcorpan</a>: Yes, the connection will be established, but the script wouldn't be able to know that because the <code>onopen</code> handler is blocked by the busy loop.","mimetype":"text/html"}]},"ts":1656948564380,"senderName":"Yutaka Hirano","senderId":"@yhirano:matrix.org","id":"$xvVB2W7pDCbvh3lnCCQlQtT43kp1iQ7ScWcAZEO_0Vg"},
{"content":{"body":"Yutaka Hirano: right. Thanks!","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@yhirano:matrix.org\">Yutaka Hirano</a>: right. Thanks!","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Yutaka Hirano: right. Thanks!","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@yhirano:matrix.org\">Yutaka Hirano</a>: right. Thanks!","mimetype":"text/html"}]},"ts":1656948595820,"senderName":"zcorpan","senderId":"@zcorpan_:matrix.org","id":"$xPEsugnCPkWaUytosy4P2d31LUyaENUsCiWdmh7pBB8"}
]