[
{"content":{"body":"selection in shadow DOM issue will have its birthday in a month: https://www.w3.org/Bugs/Public/show_bug.cgi?id=15444 , later https://github.com/WICG/webcomponents/issues/79","msgtype":"m.text"},"ts":1638872356515,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$gRO4ri0RZe-MtkRdBHzChIqx6Zx36e9ezRom0YpFx8o"},
{"content":{"body":"Maybe make a cake in the shape of a \"10\", and give it a selection of fillings.","msgtype":"m.text"},"ts":1638872585595,"senderName":"jgraham","senderId":"@jgraham_:matrix.org","id":"$ocAX2wyth5W19NYfi9I5n6LbZsmquUcKuV8baTSXzeU"},
{"content":{"body":"(I'm so sorry)","msgtype":"m.text"},"ts":1638872591393,"senderName":"jgraham","senderId":"@jgraham_:matrix.org","id":"$9usvybJ2Y4NWyo1Bnr5qr1PlDbm2lOXet7ccbZftSTs"},
{"content":{"body":"Noam Rosenthal: ≫ is not »","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: ≫ is not »","msgtype":"m.text"},"ts":1638879565375,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$zRh7_rdAC8K2pQb6r6r5At6aYqagNVd_u45gC2kaxXM"},
{"content":{"body":"Noam Rosenthal: if they are indistinguishable in your editor, I recommend copying from https://infra.spec.whatwg.org/#lists","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: if they are indistinguishable in your editor, I recommend copying from https://infra.spec.whatwg.org/#lists","msgtype":"m.text"},"ts":1638879579493,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$ZxzwR3EMsrIRBzeSEp4cykTsk9g0u4GLSLct-qbrO6w"},
{"content":{"body":"gotcha annevk. I must say I find these ambiguous unicode characters in specs somewhat cumbersome...","format":"org.matrix.custom.html","formatted_body":"gotcha <a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>. I must say I find these ambiguous unicode characters in specs somewhat cumbersome...","msgtype":"m.text"},"ts":1638879677162,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$8UoL4KnzfUbjiW0NIrr0RuwXlVbgYCU6GamAM2fey7g"},
{"content":{"body":"annevk: regarding `allow preloads` and custom headers, how would you suggest to ignore preloads when custom XHR/fetch() headers are present?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: regarding <code>allow preloads</code> and custom headers, how would you suggest to ignore preloads when custom XHR/fetch() headers are present?","msgtype":"m.text"},"ts":1638879874955,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$V8MT3uHWpam8C5mRgqFNIu2JFZLR6GkAVRmEQcZq_-A"},
{"content":{"body":"Noam Rosenthal: I think the presence of any header would indicate a custom header","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: I think the presence of any header would indicate a custom header","msgtype":"m.text"},"ts":1638879911207,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$5Zyqoc7K-BpkwsxhtmKr8W3WYLlSt4g7yIb1F_Z4kbw"},
{"content":{"body":"annevk: ok","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: ok","msgtype":"m.text"},"ts":1638879955977,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$8iiDvjVe7kJdFPTZ8LF7EZtxitaIoWBvrCLzajWoQoQ"},
{"content":{"body":"Noam Rosenthal: you can guard the check with \"unsafe-request flag\" which only fetch() and XHR set","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: you can guard the check with &quot;unsafe-request flag&quot; which only fetch() and XHR set","msgtype":"m.text"},"ts":1638879974255,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$kYv548MaOgzdY-4mJYJ0GaxOABaijbcZqAuyKKbibm0"},
{"content":{"body":"As for the Unicode characters, they generally seem to work okay for me as long as I copy-and-paste. Could you elaborate on what makes them cumbersome?","msgtype":"m.text"},"ts":1638880019578,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$TYZnHLHBLPPj4clXvaWEP2VIjYfB_hBTkfqoCwJ76zk"},
{"content":{"body":"they're cumbersome because mistakes are not visible to the naked eye","msgtype":"m.text"},"ts":1638880039047,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$bj2XfzueI-7JNIzMEdOAQn_hBUP5TiQQICybx-HumsM"},
{"content":{"body":"and they're not common characters in other forms of programming, and don't appear on keyboards","msgtype":"m.text"},"ts":1638880065123,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$PjcKtNzDkPssyWSnWP6ztQOLz2kPJWr8WVOLX5A8ADQ"},
{"content":{"body":"I think that makes them unique among characters used in specs, but I might be wrong about that","msgtype":"m.text"},"ts":1638880094394,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$k1uP163Wz-Kyd4ucNcptEhHI7ElBHGM1t2eUmBTQSQk"},
{"content":{"body":"Well, the precedent here is JavaScript, which uses the same characters for its internal List type","msgtype":"m.text"},"ts":1638880167331,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$Iofa2LXsopaybVr4N8lRfuat2JsZl_0b6xz2tWJOKSg"},
{"content":{"body":"Yea, I figured there's some historical reason for this","msgtype":"m.text"},"ts":1638880195962,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$2RPbnRShVCKSox4lNb1A6Th7F0r8JL6-du1NLog7Tjc"},
{"content":{"body":"@annevk: regarding \"allow preloads\", I thought to keep it for now for the \"sync XHR\" case, I don't think there's another way for fetch to know that this is a case where preload should be avoided","msgtype":"m.text"},"ts":1638880324578,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$1IsySWWbCmnA9oUYTcZD63DoCTbJRZEuXz0vdmAToLs"},
{"content":{"body":"Noam Rosenthal: sync xhr always bypasses preloads? I didn't know. Seems somewhat unfortunate to give sync xhr a special ability. Might make people want to use it more.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: sync xhr always bypasses preloads? I didn't know. Seems somewhat unfortunate to give sync xhr a special ability. Might make people want to use it more.","msgtype":"m.text"},"ts":1638880615012,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$rAN_9DVftz4MFdQLIA9in7PGm83lzGg7qsXdb3ngmsk"},
{"content":{"body":"annevk: yea, actually I should dig more into why chrome does that. I don't think other implementations do. Maybe that part should be outside the spec for now and added separately with a separate discussion","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: yea, actually I should dig more into why chrome does that. I don't think other implementations do. Maybe that part should be outside the spec for now and added separately with a separate discussion","msgtype":"m.text"},"ts":1638880712968,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$tFA1t-47UyDo5EEO3j4bD0jiClI8xgk9pF-C82Eh5zU"},
{"content":{"body":"Noam Rosenthal: to be clear, \"done\" running before \"end-of-body\" is also bad","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: to be clear, &quot;done&quot; running before &quot;end-of-body&quot; is also bad","msgtype":"m.text"},"ts":1638880961338,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$nZOn9CrH5c23o00gMo4oZpr1WXwTPlIOf4Dueu9f-o8"},
{"content":{"body":"annevk: not sure why, but I can follow along","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: not sure why, but I can follow along","msgtype":"m.text"},"ts":1638881112916,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$--HgKjH13h4aPAcIIsWyOS8ql8RQXxHrJo9GUlZR7ic"},
{"content":{"body":"Noam Rosenthal: because whoever is passing these callbacks might set up state accordingly, if they get them out of order that could lead to unexpected results","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: because whoever is passing these callbacks might set up state accordingly, if they get them out of order that could lead to unexpected results","msgtype":"m.text"},"ts":1638881174405,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$Gl6zEXYERHqJPW-3ynkIrMDkrPej9oMwGowEbnrTlUw"},
{"content":{"body":"annevk: right, and I thought that saying that `done` always come before `end of body` is equivalent to the opposite","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: right, and I thought that saying that <code>done</code> always come before <code>end of body</code> is equivalent to the opposite","msgtype":"m.text"},"ts":1638881219563,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$iIyaedrM_FHC9QfoWRx8ZC5hIGt4YsXRV0YBx7kGOLU"},
{"content":{"body":"though maybe it's less intuitive, naming-wise","msgtype":"m.text"},"ts":1638881237595,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$eH8XRpdUIKL1YdYR_ypYJ2rc8K2G3Ew_95NIgRvGUic"},
{"content":{"body":"\"done\" is the last thing, after \"end-of-body\" you might get trailers (though they are not exposed atm)","msgtype":"m.text"},"ts":1638881265013,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$JvDPQ1pDFRnk9oEENAJ2w2JsgC_7n_vetPSzDxkb5PA"},
{"content":{"body":"In any event, we wouldn't want to change the order as part of a PR to expose network errors better, right?","msgtype":"m.text"},"ts":1638881326799,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$0K854y7TjQQmFyFY3fPhsUcuGzTW4JgbhS2FqhAddgI"},
{"content":{"body":"annevk: currently there are no callers of both \"done\" and \"end of body\". maybe they should be either/or? It would make things clearer. IMO having both callbacks doesn't make sense","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: currently there are no callers of both &quot;done&quot; and &quot;end of body&quot;. maybe they should be either/or? It would make things clearer. IMO having both callbacks doesn't make sense","msgtype":"m.text"},"ts":1638881469068,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$r3pGSf3R_qIt3NDiuHjTUciOQ1efZTbenzZUgN8I9xA"},
{"content":{"body":"\"end of body\" sort-of encapsulates \"done\"","msgtype":"m.text"},"ts":1638881486721,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$HZDotu5vm3dbYX3GmZdvtLDcOvs6Gr2HzbpAjbK_EGk"},
{"content":{"body":"Noam Rosenthal: we could merge them potentially","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: we could merge them potentially","msgtype":"m.text"},"ts":1638881647169,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$XjBzESnSRlkEKp6HUuydE8BcOrkfmjt7V0wVCs-2qCA"},
{"content":{"body":"Noam Rosenthal: oh wait, end-of-body does its reading thing","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: oh wait, end-of-body does its reading thing","msgtype":"m.text"},"ts":1638881667334,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$a8rLYufNvH0nRefjJbhF9NN0WHis4fHoCVKYF7o1JP0"},
{"content":{"body":"yes exactly, we added done for `fetch()` and for random things which don't need the response body, such as `sendBeacon`","format":"org.matrix.custom.html","formatted_body":"yes exactly, we added done for <code>fetch()</code> and for random things which don't need the response body, such as <code>sendBeacon</code>","msgtype":"m.text"},"ts":1638881725067,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$yVUc11CqVdlWZ0yG_Z4DCP0HzkYjn5heOLBx_tgJ9uM"},
{"content":{"body":"I think it's okay to use both, especially once we have trailers, but I could see adding that requirement for now","msgtype":"m.text"},"ts":1638881732368,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$VLlwH_VQ7wE2tupzCry2y0OZr7lP7kOxTwfCjc23pfg"},
{"content":{"body":"annevk: OK, so I can keep the order as is, but add an assert at the beginning of fetch. would that work?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: OK, so I can keep the order as is, but add an assert at the beginning of fetch. would that work?","msgtype":"m.text"},"ts":1638881781551,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$7jbXtdjq8_tSO8CU_JKHCyJt_yyN8MpjMvFKLDXb2vE"},
{"content":{"body":"Noam Rosenthal: I'm not sure I follow, what kind of assertion?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: I'm not sure I follow, what kind of assertion?","msgtype":"m.text"},"ts":1638881905734,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$ve91ahvzTmSdw5sElfIvu1fTVKADrYZkDAc7EQrC_uo"},
{"content":{"body":"> <@annevk:mozilla.org> Noam Rosenthal: I'm not sure I follow, what kind of assertion?\n\nhow would you specify an either/or parameter to fetch?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$ve91ahvzTmSdw5sElfIvu1fTVKADrYZkDAc7EQrC_uo?via=mozilla.org&via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:mozilla.org\">@annevk:mozilla.org</a><br><a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: I'm not sure I follow, what kind of assertion?</blockquote></mx-reply>how would you specify an either/or parameter to fetch?","m.relates_to":{"m.in_reply_to":{"event_id":"$ve91ahvzTmSdw5sElfIvu1fTVKADrYZkDAc7EQrC_uo"}},"msgtype":"m.text"},"ts":1638881941157,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$WSguuvNAR-zzpPuxg6UxHh-YvYS7xcZOd4ZvlXz5M2E"},
{"content":{"body":"Noam Rosenthal: I suggest we leave that to a follow-up PR, I'm not entirely convinced yet it's worth doing","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: I suggest we leave that to a follow-up PR, I'm not entirely convinced yet it's worth doing","msgtype":"m.text"},"ts":1638881989826,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$xAJiI3wwXxfFzc6yu-GnkCd29wUcR8EkIV-gfMmlKsY"},
{"content":{"body":"annevk: ok, so is it still necessary to change the order right now? it complicates the logic a bit but doable","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: ok, so is it still necessary to change the order right now? it complicates the logic a bit but doable","msgtype":"m.text"},"ts":1638882033573,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$kMOx4VfEf9ZcbvRutJy-EEkF4Asa5HahxdSeBw7aK1I"},
{"content":{"body":"Noam Rosenthal: yeah, because we should set things like the done flag in the right order","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: yeah, because we should set things like the done flag in the right order","msgtype":"m.text"},"ts":1638882302730,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$oRw87eqaDz5a5dRh4WuPYm7xMnunIco2DobH2zxPtuM"},
{"content":{"body":"annevk: updated both PRs, thanks for your time. btw with the » thingy, maybe it's worthwhile to add a lint rule to disallow the character that looks like it?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: updated both PRs, thanks for your time. btw with the » thingy, maybe it's worthwhile to add a lint rule to disallow the character that looks like it?","msgtype":"m.text"},"ts":1638883469642,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$VNdBcpoFjCz2fNwqZlj-_wLD0ZkhriHyfcvbn28xIfU"},
{"content":{"body":"Noam Rosenthal: https://github.com/whatwg/whatwg.org/blob/main/resources.whatwg.org/build/deploy.sh has some lint rules you could update","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: https://github.com/whatwg/whatwg.org/blob/main/resources.whatwg.org/build/deploy.sh has some lint rules you could update","msgtype":"m.text"},"ts":1638883579143,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$AV6pQlp3KQAYlJEDA6I6UeeAqhvj7q7C3hPE-elKhXk"},
{"content":{"body":"> <@annevk:mozilla.org> Noam Rosenthal: https://github.com/whatwg/whatwg.org/blob/main/resources.whatwg.org/build/deploy.sh has some lint rules you could update\n\nhttps://github.com/whatwg/whatwg.org/pull/387","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$AV6pQlp3KQAYlJEDA6I6UeeAqhvj7q7C3hPE-elKhXk?via=mozilla.org&via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:mozilla.org\">@annevk:mozilla.org</a><br><a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: https://github.com/whatwg/whatwg.org/blob/main/resources.whatwg.org/build/deploy.sh has some lint rules you could update</blockquote></mx-reply>https://github.com/whatwg/whatwg.org/pull/387","m.relates_to":{"m.in_reply_to":{"event_id":"$AV6pQlp3KQAYlJEDA6I6UeeAqhvj7q7C3hPE-elKhXk"}},"msgtype":"m.text"},"ts":1638884247667,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$lWLPa4yPf0Tdb-Bgge4gLSH8EI1E6btZkuOVpuL2tVU"},
{"content":{"body":"https://stackoverflow.com/questions/70261043/fetch-cancels-with-an-abortsignal-does-res-json-too","msgtype":"m.text"},"ts":1638889374107,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$P3v2bbcC6FZ75fUs_eFKEZxyS7JZAjdxg5sx02Pcs14"},
{"content":{"body":"Added an answer","msgtype":"m.text"},"ts":1638891456186,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$9GIJ4ijERYhjFw8dd-Waw8PXo7kqKOVcCJia_0wJx_8"},
{"content":{"body":"cac","msgtype":"m.text"},"ts":1638904524162,"senderName":"Nghien Con","senderId":"@battam:matrix.org","id":"$5eqQzc71vXDoenSKypt6gusQST6bEl5qnpYF12wi9qE"}
]