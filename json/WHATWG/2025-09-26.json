[
{"content":{"body":"I just noticed that, in the HTML spec, if you have a variable like `<var>x<sub>current</sub></var>` and you click on the 'x' part, it highlights, but if you click on the 'current' part, it doesn't. I guess that's because the target of the click event is the sub, not the var, and the sub doesn't care about clicks.","format":"org.matrix.custom.html","formatted_body":"I just noticed that, in the HTML spec, if you have a variable like <code>&lt;var&gt;x&lt;sub&gt;current&lt;/sub&gt;&lt;/var&gt;</code> and you click on the 'x' part, it highlights, but if you click on the 'current' part, it doesn't. I guess that's because the target of the click event is the sub, not the var, and the sub doesn't care about clicks.","m.mentions":{},"msgtype":"m.text"},"ts":1758846270718,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$kIMQUt5kg1LrikUwXPiD5mLM8mwiXaRPqivoNmXLNMg"},
{"content":{"body":"We should be able to fix this with a .closest() check in the click handler. (Ideally we should PR also to the Bikeshed version as having them diverge could cause problems down the line, but that's not a big deal.)","m.mentions":{"user_ids":["@jmdyck:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$kIMQUt5kg1LrikUwXPiD5mLM8mwiXaRPqivoNmXLNMg"}},"msgtype":"m.text"},"ts":1758850556690,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$4fUYheluL83yEPdTaWM-ij-euFd96pLvHPtZ96D_4BY"},
{"content":{"body":"bakkot: I've been banging the drum about how event-based aborting and internal web platform aborting having different semantics is bad for quite a while, but annevk always insists it's a feature not a bug. I appreciate you laying out all the problems it causes clearly.\n\nMy preferred fix would be to improve the event-based infrastructure until it has all the nice properties, and then make the internal web platform code paths use it as well. There are various issues gesturing in that direction; I guess https://github.com/whatwg/dom/issues/1195 is the latest.\n\nIt feels like something that _might_ be simple enough that one person writing spec + tests, and attending WHATNOT to pin down implementer interest, could succeed.","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@bakkot:matrix.org\">bakkot</a>: I've been banging the drum about how event-based aborting and internal web platform aborting having different semantics is bad for quite a while, but <a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a> always insists it's a feature not a bug. I appreciate you laying out all the problems it causes clearly.</p>\n<p>My preferred fix would be to improve the event-based infrastructure until it has all the nice properties, and then make the internal web platform code paths use it as well. There are various issues gesturing in that direction; I guess https://github.com/whatwg/dom/issues/1195 is the latest.</p>\n<p>It feels like something that <em>might</em> be simple enough that one person writing spec + tests, and attending WHATNOT to pin down implementer interest, could succeed.</p>\n","m.mentions":{"user_ids":["@bakkot:matrix.org","@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1758850963420,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$XiIaMJixV5EiL2tbC0lm5_6QCZ7IJ3vjY9bKgkJV37s"},
{"content":{"body":"Do you think we could get away with changing the way the event-based infrastructure currently works? I would not be surprised to learn e.g. someone is relying on the `stopImmediatePropagation` behavior","format":"org.matrix.custom.html","formatted_body":"Do you think we could get away with changing the way the event-based infrastructure currently works? I would not be surprised to learn e.g. someone is relying on the <code>stopImmediatePropagation</code> behavior","m.mentions":{},"msgtype":"m.text"},"ts":1758851291029,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$hK_-2KqfMta3S8pCHfXwVKKK5qrO1HbsTP4FkL4rxbI"},
{"content":{"body":"though, I mean, it is a pretty weird thing to rely on, so maybe we could","m.mentions":{},"msgtype":"m.text"},"ts":1758851308436,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$SCoLMnggeG5ja8qcd2YlGGlDoTSWVjMmF--jjuvXHtA"},
{"content":{"body":"I don't think it's currently possible to make an event which doesn't respect `stopImmediatePropagation`, but I suppose we could introduce such a thing. Domenic is that the kind of thing you mean by \"improve the event-based infrastructure\"?","format":"org.matrix.custom.html","formatted_body":"I don't think it's currently possible to make an event which doesn't respect <code>stopImmediatePropagation</code>, but I suppose we could introduce such a thing. <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a> is that the kind of thing you mean by \"improve the event-based infrastructure\"?","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"ts":1758851450912,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$NpdtK_kVg_X7nAl7s7kelmgvIzUI0V-hvPLSb_Y4x1Y"},
{"content":{"body":"Yes exactly.","m.mentions":{},"msgtype":"m.text"},"ts":1758851472974,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$8AnneG5wz_t6ATTf0FZgc8onGgW-2kR_MaTc-jQGQaE"},
{"content":{"body":"One possible end result would be that to get good behavior you have to do `abortSignal.addEventListener(\"abort\", listener, { a bunch of strange options })` and then we sugar that over with `abortSignal.whenAborted(listener)`?? Or something??? Not 100% satisfying; just spit balling.","format":"org.matrix.custom.html","formatted_body":"One possible end result would be that to get good behavior you have to do <code>abortSignal.addEventListener(\"abort\", listener, { a bunch of strange options })</code> and then we sugar that over with <code>abortSignal.whenAborted(listener)</code>?? Or something??? Not 100% satisfying; just spit balling.","m.mentions":{},"msgtype":"m.text"},"ts":1758851535563,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$MZbspSI2iiNMHWv2dQmahJMBPMMncXbwsTyzZLa-9Ds"},
{"content":{"body":"Or maybe it's configurable at the `new EventTarget()` level instead of the `addEventListener()` level, and then we can hopefully retroactively say all `AbortSignal`s are configured that way.","format":"org.matrix.custom.html","formatted_body":"Or maybe it's configurable at the <code>new EventTarget()</code> level instead of the <code>addEventListener()</code> level, and then we can hopefully retroactively say all <code>AbortSignal</code>s are configured that way.","m.mentions":{},"msgtype":"m.text"},"ts":1758851590279,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$7RzsagDows7SNVQqJ2Tbg7TRiEvXvBQv1VHhdpxdYLQ"}
]