[
{"content":{"body":"foolip: is there some way to get a higher priority on https://github.com/web-platform-tests/wpt/issues/27868? Not being able to add new HTML elements seems kinda bad. Or perhaps we should ask zcorpan if he wants to perform the import dance once more...","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@foolip:matrix.org\">foolip</a>: is there some way to get a higher priority on https://github.com/web-platform-tests/wpt/issues/27868? Not being able to add new HTML elements seems kinda bad. Or perhaps we should ask <a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a> if he wants to perform the import dance once more...","msgtype":"m.text"},"ts":1679556196888,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$FQLpwTPJQlYqglDw7XMP4uB8sLs5BNqaDOBxX9lLC0U"},
{"content":{"body":"> <@annevk:matrix.org> foolip: is there some way to get a higher priority on https://github.com/web-platform-tests/wpt/issues/27868? Not being able to add new HTML elements seems kinda bad. Or perhaps we should ask zcorpan if he wants to perform the import dance once more...\n\nI’m guessing all it would take is for someone to write the PR. Or do you expect it’s risky and it needs an RFC or someone?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs%3Amatrix.org/%24FQLpwTPJQlYqglDw7XMP4uB8sLs5BNqaDOBxX9lLC0U\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@foolip:matrix.org\">foolip</a>: is there some way to get a higher priority on https://github.com/web-platform-tests/wpt/issues/27868? Not being able to add new HTML elements seems kinda bad. Or perhaps we should ask <a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a> if he wants to perform the import dance once more...</blockquote></mx-reply>I’m guessing all it would take is for someone to write the PR. Or do you expect it’s risky and it needs an RFC or someone?","m.relates_to":{"m.in_reply_to":{"event_id":"$FQLpwTPJQlYqglDw7XMP4uB8sLs5BNqaDOBxX9lLC0U"}},"msgtype":"m.text"},"ts":1679563199400,"senderName":"foolip","senderId":"@foolip:matrix.org","id":"$JQgCkXxE8a9Ad5rDXwmS229m1HzK1wiKigYTeLknE2s"},
{"content":{"body":"annevk: foolip : I will fix it by upstreaming mozilla's html5lib-test runner to wpt and then move the test data to wpt","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: <a href=\"https://matrix.to/#/@foolip:matrix.org\">foolip</a> : I will fix it by upstreaming mozilla's html5lib-test runner to wpt and then move the test data to wpt","msgtype":"m.text"},"ts":1679565489504,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$ytcD9Z0XJefgoubPGIasEPCZsM2BTbiriZnGs5dr-mA"},
{"content":{"body":"> <@zcorpan:mozilla.org> annevk: foolip : I will fix it by upstreaming mozilla's html5lib-test runner to wpt and then move the test data to wpt\n\nwe should check that all the other consumers of `html5lib-tests` are okay with it moving to WPT; it seems unfortunate if we stop having other implementations tested against the tests.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$ytcD9Z0XJefgoubPGIasEPCZsM2BTbiriZnGs5dr-mA?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">@zcorpan:mozilla.org</a><br><a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: <a href=\"https://matrix.to/#/@foolip:matrix.org\">foolip</a> : I will fix it by upstreaming mozilla's html5lib-test runner to wpt and then move the test data to wpt</blockquote></mx-reply>we should check that all the other consumers of <code>html5lib-tests</code> are okay with it moving to WPT; it seems unfortunate if we stop having other implementations tested against the tests.","m.relates_to":{"m.in_reply_to":{"event_id":"$ytcD9Z0XJefgoubPGIasEPCZsM2BTbiriZnGs5dr-mA"}},"msgtype":"m.text"},"ts":1679566508850,"senderName":"Sam Sneddon [:gsnedders]","senderId":"@gsnedders:mozilla.org","id":"$k4OhGSho6baHjqPuCnYA6kpBFVhpWppdlgD-X4-Mrec"},
{"content":{"body":"And AFAIK there are more other consumers of it now then when we had the prior discussion","msgtype":"m.text"},"ts":1679566568280,"senderName":"Sam Sneddon [:gsnedders]","senderId":"@gsnedders:mozilla.org","id":"$sWY4U7_nJVjLvKqyHkPUD0z8vVdEpRsAg_N5jomdbeM"},
{"content":{"body":"I thought the plan was to make WPT directly depend on html5lib-tests rather than html5lib in general. And then use the JS parser Henri wrote to run the tests somehow","msgtype":"m.text"},"ts":1679566621568,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$H5jrAMpP7IcGrd2tio3TNzo-dI4g3Q5XP8SbAgzcL2o"},
{"content":{"body":"That issue has zcorpan saying:\n\n> Having the sources files in the same format in wpt\n\nWhich very much sounds like them moving them.","format":"org.matrix.custom.html","formatted_body":"<p>That issue has <a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a> saying:</p>\n<blockquote>\n<p>Having the sources files in the same format in wpt</p>\n</blockquote>\n<p>Which very much sounds like them moving them.</p>\n","msgtype":"m.text"},"ts":1679566715907,"senderName":"Sam Sneddon [:gsnedders]","senderId":"@gsnedders:mozilla.org","id":"$lIiWSp53qd_M_nBOdXMd7FugqBOXT1bi2uSxDw1ZuJU"},
{"content":{"body":" * That issue has zcorpan saying:\n\n> Having the sources files in the same format in wpt\n\nWhich very much sounds like moving them.","format":"org.matrix.custom.html","formatted_body":" * <p>That issue has <a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a> saying:</p>\n<blockquote>\n<p>Having the sources files in the same format in wpt</p>\n</blockquote>\n<p>Which very much sounds like moving them.</p>\n","m.new_content":{"body":"That issue has zcorpan saying:\n\n> Having the sources files in the same format in wpt\n\nWhich very much sounds like moving them.","format":"org.matrix.custom.html","formatted_body":"<p>That issue has <a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a> saying:</p>\n<blockquote>\n<p>Having the sources files in the same format in wpt</p>\n</blockquote>\n<p>Which very much sounds like moving them.</p>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$lIiWSp53qd_M_nBOdXMd7FugqBOXT1bi2uSxDw1ZuJU","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1679566720053,"senderName":"Sam Sneddon [:gsnedders]","senderId":"@gsnedders:mozilla.org","id":"$RZPpPBTK2HQ4AXAhevWL7_EWsyYe5LQd_39ZUSQWBM8"},
{"content":{"body":"But also, copying it wholesale is preferable over doing nothing.","msgtype":"m.text"},"ts":1679566723966,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$jW7v4knMFLSjz8h_Dgl2aB5wQhQfxABvaIcRtAkaRCs"},
{"content":{"body":"I still think we should do https://github.com/web-platform-tests/wpt/issues/27868#issuecomment-1039321578 as a first step, which means we avoid having to have the same version of html5lib-tests as html5lib-python uses, merely using html5lib-python as a glorified parser","msgtype":"m.text"},"ts":1679566786140,"senderName":"Sam Sneddon [:gsnedders]","senderId":"@gsnedders:mozilla.org","id":"$IhOiZjkF4xurKVdt95l-fy5D7c6JEPYFXNU2Ng-cX1Y"},
{"content":{"body":"(I still think moving to a JS parser is the right thing longer term, but that takes more work, especially if we want to preserve the current test names which are sha1s of the input. Tho I guess we could just move all the parsing tests to a secure context, then that becomes slightly less painful.)","msgtype":"m.text"},"ts":1679566857982,"senderName":"Sam Sneddon [:gsnedders]","senderId":"@gsnedders:mozilla.org","id":"$yZuoktY56bwJEY3D_T8ASpnNB9MRI1lQ-DBB9p6-NLA"},
{"content":{"body":"Thinking about it more I actually like the idea of copying it wholesale and declaring the era of html5lib-tests to be over. We manage just fine hosting host-independent URL parser tests in WPT and such.","msgtype":"m.text"},"ts":1679566860568,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$UDzRjiymFEazi8FVWs7WlOBRevAIOk7K61WDnJ_kn3Y"},
{"content":{"body":"And also, lowering the bar for browser engineers to contribute HTML parser tests is probably the best thing we could be doing for the HTML parser.","msgtype":"m.text"},"ts":1679567422848,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$vewaFtSpCAlLboM2hCc5_lr2NoXeN-GJu8Pi4kfiuMo"},
{"content":{"body":"At this point this problem has been unsolved for so long I am totally fine abandoning every part of the dependency chain apart from wpt. Go go Simon!","msgtype":"m.text"},"ts":1679568417957,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$T4DjSIki1xJr6CmmANXrG9Aloj1byf59R8C5Kftd2xQ"},
{"content":{"body":"https://github.com/web-platform-tests/wpt/pull/39158 implements what I said we should do as a first step, fwiw.","msgtype":"m.text"},"ts":1679568656204,"senderName":"Sam Sneddon [:gsnedders]","senderId":"@gsnedders:mozilla.org","id":"$AotAZJHhDE5NEFst5QBoTPqcP2CZoTEA6M7Dt4mJUac"},
{"content":{"body":"I still desperately wish we had more meaningful test names","msgtype":"m.text"},"ts":1679569214098,"senderName":"Sam Sneddon [:gsnedders]","senderId":"@gsnedders:mozilla.org","id":"$4SJQVT15BkOE97bsrpFnInHpRoaeiWSMdR3poeiagJQ"},
{"content":{"body":"Yeah what's generated there is very hard to read. Having the actual data files and operating on those would be an improvement","msgtype":"m.text"},"ts":1679574250163,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$PiUK0moauof1mnAX0FKm0GucvkYZ0HRxPpLvvH-k9M8"},
{"content":{"body":"Do we have a list of consumers of html5lib-tests?","msgtype":"m.text"},"ts":1679578044202,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$nqnB5RGRvFrFPZStjqzDKmTtlTCtyGmKu-wugrQBXwE"},
{"content":{"body":"Do all browsers double-key their caches by first-party site (or even frame tree)? Are there WPT for this kind of behavior?","msgtype":"m.text"},"ts":1679581376159,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$TQdOFNu4HSelZNwp9yrQ_ewsG3TGF6LLQcuPsVi7xn0"},
{"content":{"body":"freddy: there are some tests, e.g., for the CORS-preflight cache","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@fbraun:mozilla.org\">freddy</a>: there are some tests, e.g., for the CORS-preflight cache","msgtype":"m.text"},"ts":1679581537900,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$RfbQ4KSRouLZhE45Paha55698u7LKP2Tloh1mKw4uW4"},
{"content":{"body":"Whether a resource passed a CORS-preflight is cached? Is that web observable? I suppose caches are generally not supposed to be observable (except for timing side channels), right?","msgtype":"m.text"},"ts":1679581705870,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$SQ9Moin-Vk4mLr0NwdfI4IEm1BohChL_oiXvob_8-i0"},
{"content":{"body":"freddy: the whole point of partitioning caches is because they're very much observable :-)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@fbraun:mozilla.org\">freddy</a>: the whole point of partitioning caches is because they're very much observable :-)","msgtype":"m.text"},"ts":1679581875321,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$0s00epwwHBrbkcyO25_kWvp3MnvaAhOKQkOzzlwfkAk"},
{"content":{"body":"Though I suppose you're right they're not observable in the traditional sense; timing channels count for a change.","msgtype":"m.text"},"ts":1679581913674,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$IWyeoBbvqpbW-KNqEzv1i8P_tzPKmA5o3ot6LhlS0jc"},
{"content":{"body":"I mean, it's not like you can query a specific API, right? it's a timing side channel, i.e., a probablistic query","msgtype":"m.text"},"ts":1679581938262,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$M45aAlbrAZsKn41LHZb40HVwMiR56Vh8qZ5wmmMDzWQ"},
{"content":{"body":"Yeah, though there is some of that too in the larger partitioning state effort. It's observable in the traditional sense if your storage is partitioned for instance, provided you can open a popup.","msgtype":"m.text"},"ts":1679582028924,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$vLX5ZRWsas-_sRG1ZA43s-IOrUKGQAW1inf8SIHPAK4"},
{"content":{"body":"probably tricky to have WPT for (:","msgtype":"m.text"},"ts":1679582036726,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$G9A5KeyGR1yRyzwzR1lytTN4nRSDndt6x9PcYGGzkOU"},
{"content":{"body":"freddy: well in the case of CORS preflights the server can observe, and WPT controls the server","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@fbraun:mozilla.org\">freddy</a>: well in the case of CORS preflights the server can observe, and WPT controls the server","msgtype":"m.text"},"ts":1679582078876,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$oDUAoPcB28U4nHFYHNfQtnasVECz_EbX8yjGeR4-COw"},
{"content":{"body":"the server can observe whether the browser will do another OPTIONS request. right.","msgtype":"m.text"},"ts":1679582112359,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$7gGZDQc87qk68lNo7LM_u8-57pqpeqG69Do5nVC820o"},
{"content":{"body":"freddy: that also applies to HTTP cache revalidation requests and such","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@fbraun:mozilla.org\">freddy</a>: that also applies to HTTP cache revalidation requests and such","msgtype":"m.text"},"ts":1679582114077,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$ubsgBRxLJib5ohBrIQ_iSlcaSVI2uvSA3ax85qO1PYg"},
{"content":{"body":"Ah, right. Thanks!","msgtype":"m.text"},"ts":1679582195081,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$JAU7Gx2ePFU8-YuLpf7OXw3lvFhlf04V6Wq4SrpOQQI"}
]