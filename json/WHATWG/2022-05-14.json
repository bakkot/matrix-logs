[
{"content":{"body":"> <@etportis:matrix.org> A question someone has surely asked before... if I, a subresource host, have already granted cross-origin read access with `Access-Control-Allow-Origin: *`, why would I ever *not* want to grant embed access via `Cross-Origin-Resource-Policy: cross-origin`?\n\nIIRC it has to do with how CORS also impacts the requests. (Which you can most easily see when preflights are required.) If you do a \"no-cors\" request (e.g. <img>, not <img crossorigin>) and get back ACAO: *, what does that mean? Saying that it roughly means CORP: cross-origin is a bit strange/maybe broken in some more specific way I can't think of right now.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$m_q8YDXlcEPv-t4vyB-2GyuDfFhaVpQbH-bL6ld6T6E?via=mozilla.org&via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@etportis:matrix.org\">@etportis:matrix.org</a><br>A question someone has surely asked before... if I, a subresource host, have already granted cross-origin read access with <code>Access-Control-Allow-Origin: *</code>, why would I ever <em>not</em> want to grant embed access via <code>Cross-Origin-Resource-Policy: cross-origin</code>?</blockquote></mx-reply>IIRC it has to do with how CORS also impacts the requests. (Which you can most easily see when preflights are required.) If you do a &quot;no-cors&quot; request (e.g. &lt;img&gt;, not &lt;img crossorigin&gt;) and get back ACAO: *, what does that mean? Saying that it roughly means CORP: cross-origin is a bit strange/maybe broken in some more specific way I can't think of right now.","m.relates_to":{"m.in_reply_to":{"event_id":"$m_q8YDXlcEPv-t4vyB-2GyuDfFhaVpQbH-bL6ld6T6E"}},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":"> <@etportis:matrix.org> A question someone has surely asked before... if I, a subresource host, have already granted cross-origin read access with `Access-Control-Allow-Origin: *`, why would I ever *not* want to grant embed access via `Cross-Origin-Resource-Policy: cross-origin`?\n\nIIRC it has to do with how CORS also impacts the requests. (Which you can most easily see when preflights are required.) If you do a \"no-cors\" request (e.g. <img>, not <img crossorigin>) and get back ACAO: *, what does that mean? Saying that it roughly means CORP: cross-origin is a bit strange/maybe broken in some more specific way I can't think of right now.","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$m_q8YDXlcEPv-t4vyB-2GyuDfFhaVpQbH-bL6ld6T6E?via=mozilla.org&via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@etportis:matrix.org\">@etportis:matrix.org</a><br>A question someone has surely asked before... if I, a subresource host, have already granted cross-origin read access with <code>Access-Control-Allow-Origin: *</code>, why would I ever <em>not</em> want to grant embed access via <code>Cross-Origin-Resource-Policy: cross-origin</code>?</blockquote></mx-reply>IIRC it has to do with how CORS also impacts the requests. (Which you can most easily see when preflights are required.) If you do a &quot;no-cors&quot; request (e.g. &lt;img&gt;, not &lt;img crossorigin&gt;) and get back ACAO: *, what does that mean? Saying that it roughly means CORP: cross-origin is a bit strange/maybe broken in some more specific way I can't think of right now.","mimetype":"text/html"}]},"ts":1652491851299,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$UPNlsIcTpK4Os1i4dY1DZbturovqnAWTN-9bF8tKdbI"},
{"content":{"body":"Eric Portis (he/him):  ACAO/CORS allows you to make a decision of what data to send based on the origin of the request. e.g. you can send a different response if your data is requested by `origin-a.com` and `origin-b.com`, because CORS requests contain the `Origin` header. CORP is more like a fallback to still allow embedding the content even without knowing the origin. ","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@etportis:matrix.org\">Eric Portis (he/him)</a>:  ACAO/CORS allows you to make a decision of what data to send based on the origin of the request. e.g. you can send a different response if your data is requested by <code>origin-a.com</code> and <code>origin-b.com</code>, because CORS requests contain the <code>Origin</code> header. CORP is more like a fallback to still allow embedding the content even without knowing the origin.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Eric Portis (he/him):  ACAO/CORS allows you to make a decision of what data to send based on the origin of the request. e.g. you can send a different response if your data is requested by `origin-a.com` and `origin-b.com`, because CORS requests contain the `Origin` header. CORP is more like a fallback to still allow embedding the content even without knowing the origin. ","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@etportis:matrix.org\">Eric Portis (he/him)</a>:  ACAO/CORS allows you to make a decision of what data to send based on the origin of the request. e.g. you can send a different response if your data is requested by <code>origin-a.com</code> and <code>origin-b.com</code>, because CORS requests contain the <code>Origin</code> header. CORP is more like a fallback to still allow embedding the content even without knowing the origin.","mimetype":"text/html"}]},"ts":1652510964796,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$DdV0321fseoUxsqwN0yUKP47PsEwf_1rsRbuYrJMCtg"},
{"content":{"body":"Having `Access-Control-Allow-Origin: *` doesn't mean that you send all/the same data to every origin, while `Cross-Origin-Resource-Policy: *` kind of does, but for the latter the use of the resource is limited (showing the image, using it in timing-attack-prone situations but not read the data directly)","format":"org.matrix.custom.html","formatted_body":"Having <code>Access-Control-Allow-Origin: *</code> doesn't mean that you send all/the same data to every origin, while <code>Cross-Origin-Resource-Policy: *</code> kind of does, but for the latter the use of the resource is limited (showing the image, using it in timing-attack-prone situations but not read the data directly)","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Having `Access-Control-Allow-Origin: *` doesn't mean that you send all/the same data to every origin, while `Cross-Origin-Resource-Policy: *` kind of does, but for the latter the use of the resource is limited (showing the image, using it in timing-attack-prone situations but not read the data directly)","mimetype":"text/plain"},{"body":"Having <code>Access-Control-Allow-Origin: *</code> doesn't mean that you send all/the same data to every origin, while <code>Cross-Origin-Resource-Policy: *</code> kind of does, but for the latter the use of the resource is limited (showing the image, using it in timing-attack-prone situations but not read the data directly)","mimetype":"text/html"}]},"ts":1652511073057,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$3kdBZvCDVBgFKwMquf6TRpbOKrg5HS3xtYwPryanRt4"},
{"content":{"body":"Having both without extra checks means \"If I know the origin of the request then allow reading this data, and also allow embedding it even if I don't know the origin\". It's not *too* redundant","format":"org.matrix.custom.html","formatted_body":"Having both without extra checks means &quot;If I know the origin of the request then allow reading this data, and also allow embedding it even if I don't know the origin&quot;. It's not <em>too</em> redundant","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Having both without extra checks means \"If I know the origin of the request then allow reading this data, and also allow embedding it even if I don't know the origin\". It's not *too* redundant","mimetype":"text/plain"},{"body":"Having both without extra checks means &quot;If I know the origin of the request then allow reading this data, and also allow embedding it even if I don't know the origin&quot;. It's not <em>too</em> redundant","mimetype":"text/html"}]},"ts":1652511242261,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$859qW4140TtGHMB-B0R_PC65Y-2utip8Q8PkaRn4ta4"}
]