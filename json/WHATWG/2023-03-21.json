[
{"content":{"body":"I guess we never figured out the WHATWG spec issue where the style sheets randomly fail to load huh?","msgtype":"m.text"},"ts":1679364911100,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$zl4ciWIl96q67jWD3yXTKqQErPLytF_oWesiqkcdpFM"},
{"content":{"body":"It just happened to me and I see a 'The FetchEvent for \"https://resources.whatwg.org/standard.css\" resulted in a network error response: an \"opaque\" response was used for a request whose type is not no-cors' warning in DevTools (3 times for 3 different scripts)","msgtype":"m.text"},"ts":1679365021373,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$DtfzRRXyK-grClsLiD_a5_7EfdiVKwuh6S4SXBQKLOA"},
{"content":{"body":"Yep. It honestly seems like a browser bug. There's no way that <link rel=stylesheet crossorigin> should ever result in an opaque response.","msgtype":"m.text"},"ts":1679368641513,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$8F-7yx-ouon8XhjNmuVNJVziEDi3CSraaZOZRi_k27M"},
{"content":{"body":"The only way that can happen is if there's some whatwg.org website where we link to that style sheet without `crossorigin`","format":"org.matrix.custom.html","formatted_body":"The only way that can happen is if there's some whatwg.org website where we link to that style sheet without <code>crossorigin</code>","msgtype":"m.text"},"ts":1679383877846,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$u7ARDXMM2cbTcqZJfD5NQWKQO-fJrdIEjpGwKw7P8UM"},
{"content":{"body":"Perhaps historical versions end up poisoning the cache?","msgtype":"m.text"},"ts":1679383908435,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$HjoQQqY80Sty_1l0k-3cGeMqJcO58vYV7961dOMdSu4"},
{"content":{"body":"One thing we haven't tried is renaming the style sheet and ensuring all new places that link to it have the attribute set, but then we have versioning :/","msgtype":"m.text"},"ts":1679383966592,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$ZR6mU1iD9lg5Z2Va_8j2IiHJgyNRcyYcYFyMD3SpfUg"},
{"content":{"body":"dlrobertson: found some more issues, now also in the spec; out-of-range start/end values are normalized by the File API, but then result in an inaccurate `content-range` header","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@dlrobertson:mozilla.org\">dlrobertson</a>: found some more issues, now also in the spec; out-of-range start/end values are normalized by the File API, but then result in an inaccurate <code>content-range</code> header","msgtype":"m.text"},"ts":1679387229483,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$h1Ii-T5GrHNo7yMKDHxOR-GFuf7Xe-oxRBtTxI_6XMo"},
{"content":{"body":"dlrobertson: they probably need to be normalized upfront; the default for end is also wrong, it should be total - 1","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@dlrobertson:mozilla.org\">dlrobertson</a>: they probably need to be normalized upfront; the default for end is also wrong, it should be total - 1","msgtype":"m.text"},"ts":1679387256574,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$jRXL2Izv3WiSwW1JdyAj6su4CGE0kbKf-hD1ooBmEVs"},
{"content":{"body":"I'll work on some patches","msgtype":"m.text"},"ts":1679387345739,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$E_H2A7pn3WGBvTlncWMBm0QDTFkY9CSIu7i-j7CSeB0"},
{"content":{"body":"annevk, Domenic can either of you review https://github.com/whatwg/fetch/pull/1614? It's been pre-reviewed by Jeffrey Yasskin and others already\nthanks!","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>, <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a> can either of you review https://github.com/whatwg/fetch/pull/1614? It's been pre-reviewed by <a href=\"https://matrix.to/#/@jyasskin:matrix.org\">Jeffrey Yasskin</a> and others already<br>thanks!","msgtype":"m.text"},"ts":1679393723212,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$xn-DAykFSTHBjVfMDkqjUUTTAY52kV6tN0_MOJ99lbY"},
{"content":{"body":"annevk: Yeah it looks like we don't check the end value of the range. The start value we use for the content range comes from parsing a [single-range-header](https://fetch.spec.whatwg.org/#simple-range-header-value), and if I'm reading things right would mean we'd return failure from the parser and return a network error in fetch","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: Yeah it looks like we don't check the end value of the range. The start value we use for the content range comes from parsing a <a href=\"https://fetch.spec.whatwg.org/#simple-range-header-value\">single-range-header</a>, and if I'm reading things right would mean we'd return failure from the parser and return a network error in fetch","msgtype":"m.text"},"ts":1679404165510,"senderName":"dlrobertson","senderId":"@dlrobertson:mozilla.org","id":"$sIGtuHgKQPS9-saoVnyGiGrAlNwa0jnUFmqGONGKCZs"},
{"content":{"body":"Good catch!","msgtype":"m.text"},"ts":1679404245900,"senderName":"dlrobertson","senderId":"@dlrobertson:mozilla.org","id":"$myv4bplxfuZSmYh1LfENTBDRXlaGu3XoeUWW0XyGZt4"}
]