[
{"content":{"body":"TabAtkins: not sure if this is a problem, but when I updated WHATWG's bikeshed boilerplate for a change in new issue URLs, it was picked up automatically without me having to generate the manifest","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@tabatkins:matrix.org\">TabAtkins</a>: not sure if this is a problem, but when I updated WHATWG's bikeshed boilerplate for a change in new issue URLs, it was picked up automatically without me having to generate the manifest","m.mentions":{"user_ids":["@tabatkins:matrix.org"]},"msgtype":"m.text"},"ts":1696230050505,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$fbN64B9MH8_iL1DAgoRj42yxsEvSmpFo1p6cidG-cnI"},
{"content":{"body":"TabAtkins: I have now updated the manifest as well, but that makes it seem redundant","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@tabatkins:matrix.org\">TabAtkins</a>: I have now updated the manifest as well, but that makes it seem redundant","m.mentions":{"user_ids":["@tabatkins:matrix.org"]},"msgtype":"m.text"},"ts":1696230083037,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$tYS79m6rE_psmJxo_1NwOhM7YihpJpqYe22TPW6DosQ"},
{"content":{"body":"Domenic: added https://github.com/whatwg/html/issues/9824 to track the event loop spec vs. impl differences. hoping to tackle it gradually","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: added https://github.com/whatwg/html/issues/9824 to track the event loop spec vs. impl differences. hoping to tackle it gradually","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"ts":1696236655658,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$EVDJaore4iynYnr6iYW9IwVlOCtwApaVt4_CdXQqO-w"},
{"content":{"body":"smaug: I think I said something misleading about `fetchLater` when we spoke about it a few days ago. It *is* reliable in the \"renderer process is killed\" scenario, as the whole logic is spec'ed to work in the network process (inside fetch, in spec terms). It's actually a main feature of `fetchLater` as opposed to sending beacons in `pagehide`.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a>: I think I said something misleading about <code>fetchLater</code> when we spoke about it a few days ago. It <em>is</em> reliable in the \"renderer process is killed\" scenario, as the whole logic is spec'ed to work in the network process (inside fetch, in spec terms). It's actually a main feature of <code>fetchLater</code> as opposed to sending beacons in <code>pagehide</code>.","m.mentions":{"user_ids":["@smaug:mozilla.org"]},"msgtype":"m.text"},"ts":1696236798743,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$2g3pkHimIQGygdnAJePhfG11iXvE3H-rd6O3qkIC9Es"},
{"content":{"body":"ok, so whatever is representing a \"network process\" in each browser","msgtype":"m.text"},"ts":1696236883388,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$HcbHoHrH9fZWUWQsEBAOrm-yHt2BzMrBgE8uCZRR2-0"},
{"content":{"body":"OS can still kill those processes on mobile, no?","msgtype":"m.text"},"ts":1696236938886,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$Gw_XZcBywDQswHfAim7duqojqnII-RsONKfaXdbgr4w"},
{"content":{"body":"smaug: yes, but that's equivalent to killing the whole browser in a way.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a>: yes, but that's equivalent to killing the whole browser in a way.","m.mentions":{"user_ids":["@smaug:mozilla.org"]},"msgtype":"m.text"},"ts":1696237166473,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$wNSwTtLtLa7kfkQOxvbzUy646F8sT__Q6m1xfLvE2KE"},
{"content":{"body":"our recommendation (it's also in the spec) is that if there are indication that the browser itself is about to lose execution rights or be killed (e.g. backgrounded on iOS) then flush those ASAP","m.mentions":{},"msgtype":"m.text"},"ts":1696237269518,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$UxCd3deB_VoDesiCtQp3MgH-pDj_Q6Cbed8pYplKWvk"},
{"content":{"body":"depends on the browser.  But yes. And the point is still that we are replacing one unreliable API with another one. The new one is likely less unreliable.","msgtype":"m.text"},"ts":1696237301780,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$6mFhlNHf2a7hMBGJLdljo6nyR2wWGgSUTGhK1R4aRBQ"},
{"content":{"body":"smaug: It's as reliable as calling `fetch`, which can also not happen if the network process gets killed","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a>: It's as reliable as calling <code>fetch</code>, which can also not happen if the network process gets killed","m.mentions":{"user_ids":["@smaug:mozilla.org"]},"msgtype":"m.text"},"ts":1696237414746,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$v5BCOwD0veHSHk5we_T4Qf3dbobsKYIQPW_m0Cdcj4Y"},
{"content":{"body":"and browsers could have implemented also the old API in a more reliable way, but have chosen not to","msgtype":"m.text"},"ts":1696237415334,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$S0cFxfVyCUVHpi27YRJdVZeHdAlmpsge_EUnq2pyA1c"},
{"content":{"body":"they couldn't. because if the renderer process is killed, you wouldn't get JS execution and `pagehide`","format":"org.matrix.custom.html","formatted_body":"they couldn't. because if the renderer process is killed, you wouldn't get JS execution and <code>pagehide</code>","m.mentions":{},"msgtype":"m.text"},"ts":1696237445761,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$uu0zavhhtMp96JjFZIPujj1Tcm0Gv7YEKNuxJGKEhj0"},
{"content":{"body":"I didn't say the old one would be as reliable. I said they could have implemented it in a more reliable way.","msgtype":"m.text"},"ts":1696237569623,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$XPvi0lISMqqHTQwyb8nF2ss__LOfdCfiLQ1JmsXGvSw"},
{"content":{"body":"you'd need something like \"you're about to lose execution rights or be killed, please fire this event\"","m.mentions":{},"msgtype":"m.text"},"ts":1696237610378,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$g6uyLNlgxwkoMUdsTU4cclR7o03EhyxupiwHLB3Pe3c"},
{"content":{"body":"That's not a feasible premise","m.mentions":{},"msgtype":"m.text"},"ts":1696237624896,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$tchDsSiEAfWJ1Z37eOD7xgu1tiP34ZdNYXGVCo38DPk"},
{"content":{"body":"I would say that `fetchLater(url)` is a practical alternative to something like firing `pagehide` as a kill signal... note that renderer processes that get killed might have already crashed or have a hanging main thread","format":"org.matrix.custom.html","formatted_body":"I would say that <code>fetchLater(url)</code> is a practical alternative to something like firing <code>pagehide</code> as a kill signal... note that renderer processes that get killed might have already crashed or have a hanging main thread","m.mentions":{},"msgtype":"m.text"},"ts":1696237672093,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$TcOUUg1_5lBjCkArKYpcjSp8Wr9RmtE4lN0Aisgg_Fg"},
{"content":{"body":"I haven't said fetchLater is somehow bad API ðŸ™‚ ","msgtype":"m.text"},"ts":1696237724558,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$fHlA2fkSWHWdJ84ghSG-gSnVnuY6HjR-7GnwFzcrXrI"},
{"content":{"body":"if your renderer process crashed/hang, `fetchLater` would still work while I don't see how we could make `addEventListener('pagehide', () => fetch(...)` work","format":"org.matrix.custom.html","formatted_body":"if your renderer process crashed/hang, <code>fetchLater</code> would still work while I don't see how we could make <code>addEventListener('pagehide', () =&gt; fetch(...)</code> work","m.mentions":{},"msgtype":"m.text"},"ts":1696237730643,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$KEcIVKL-EbbZvQowcdEBJkxbAa6K-HHa6U__6jlGSbc"},
{"content":{"body":"But we need to always think what extra complexity we want to add to the platform","msgtype":"m.text"},"ts":1696237741952,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$B0SWyjdDYULIAe15C31bDoMl93y8rHbZFMq8fElB2Pk"},
{"content":{"body":"per the proposal, implementation could handle fetchLater asap a page is being unloaded or moved to bfcache, right?","msgtype":"m.text"},"ts":1696237814574,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$42UEzoqKx63whPlLuC_43QwBfGVGerNqIcZ4rIo9LjE"},
{"content":{"body":"yes","m.mentions":{},"msgtype":"m.text"},"ts":1696237841319,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$8Lsv2DOBzhCyB5-u60gQY3OFWh38F6LF4vN4_U1ypDM"},
{"content":{"body":"we try to leave a lot of room for simpler implementations","m.mentions":{},"msgtype":"m.text"},"ts":1696237857478,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$2ud9PukuXH4ENZJJGoS8Gj-KfzfPiAFHf30yzbQRpBk"},
{"content":{"body":"What about the page becoming a background page, I mean user switches tab (or whatever similar concepts mobile has)? Ah, looks like activationTimeout is just a hint","msgtype":"m.text"},"ts":1696238559023,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$_NZnvhqxTwZ2_UKqRUoX3af70Zhbj7RPbICw9m6JRCQ"},
{"content":{"body":"So UA could trigger fetchLater fetches immediately also in that case","msgtype":"m.text"},"ts":1696238588206,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$4f9xGLeTzFmn98jhNT83ohlp6-I4Cq3mNNJQOrMYCOM"},
{"content":{"body":"smaug: yes, it's \"please fetch this, no later than `activationTimeout` if posslbe\"","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a>: yes, it's \"please fetch this, no later than <code>activationTimeout</code> if posslbe\"","m.mentions":{"user_ids":["@smaug:mozilla.org"]},"msgtype":"m.text"},"ts":1696238594437,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$b0lEzr_Vt6iiErc8Ba6f9LsV0hn7c0MNksahBN0tsO0"},
{"content":{"body":"I wonder if that property should have \"hint\" in its name, or perhaps deadline or some such, just to give the impression that it isn't by no means accurate ","msgtype":"m.text"},"ts":1696238653175,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$6AoJ0FTYqwNyjO8mmD_TIvuQ4OTXOWaJoKNhc7CHtnE"},
{"content":{"body":"I'm fine with calling it deadline","m.mentions":{},"msgtype":"m.text"},"ts":1696238676787,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$MuidwFq8iJOnf7cGuL3q5AxqEOOf7Yt3jVXd7io7g-4"},
{"content":{"body":"(by \"fine with\" I mean I agree that it tells a more accurate story)","m.mentions":{},"msgtype":"m.text"},"ts":1696239013969,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$FGCP6as5_YKa7cdXfT6mBD4quEXqZ6x1gr-kYIEx_fs"},
{"content":{"body":"Noam Rosenthal: so there is no way to track which fetches have been processed?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: so there is no way to track which fetches have been processed?","msgtype":"m.text"},"ts":1696239176411,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$Y8c8AGbc-kOsKOdcWsp_q-Px5f2usMO9hNM2vWy-z-Q"},
{"content":{"body":"smaug: sure, the return value of `fetchLater` has an `activated` boolean","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a>: sure, the return value of <code>fetchLater</code> has an <code>activated</code> boolean","m.mentions":{"user_ids":["@smaug:mozilla.org"]},"msgtype":"m.text"},"ts":1696239345097,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$odunvu0yfolaRXGj_E5fEK89YIDu9HFAJ7lnc0W14qU"},
{"content":{"body":"how does that tell it?","msgtype":"m.text"},"ts":1696239368309,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$eA0Hsk9B4Ed66prrGE0A-AqHN2Aphy8M3BPa-2mfqaQ"},
{"content":{"body":"oh, I see","msgtype":"m.text"},"ts":1696239381127,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$SalDqnyaSCn-MVLVw6y31J5g3-yVIAGagtdAqEtvDqc"},
{"content":{"body":"yea when the fetch is activated the network process also posts a task on the document to flip the flag","m.mentions":{},"msgtype":"m.text"},"ts":1696239429557,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$RQQZBMkgzBDRMlzkt_fYno4tCtTDb1h4dACMzRySHY8"},
{"content":{"body":"... if the document is still around","m.mentions":{},"msgtype":"m.text"},"ts":1696239438327,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$hqkqpdQ2QepcpGa-j2qAHtD3SBLhqCShnZFk4kylOqc"},
{"content":{"body":"Jeffrey Yasskin: thanks, that indeed seems to work well!","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jyasskin:matrix.org\">Jeffrey Yasskin</a>: thanks, that indeed seems to work well!","m.mentions":{"user_ids":["@jyasskin:matrix.org"]},"msgtype":"m.text"},"ts":1696244573331,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$J9_JRzCGYKs9omE8JdOrREqLTk8EMbEtMExKmsbPoyM"},
{"content":{"body":"Was `MessageEvent.userActivation` ever added to the HTML spec, afaict only the navigator interface was? (ref https://github.com/whatwg/html/pull/8254)","format":"org.matrix.custom.html","formatted_body":"Was <code>MessageEvent.userActivation</code> ever added to the HTML spec, afaict only the navigator interface was? (ref https://github.com/whatwg/html/pull/8254)","msgtype":"m.text"},"ts":1696246374772,"senderName":"canadahonk","senderId":"@canada_goose:mozilla.org","id":"$pf_V3zmYIRCBwWtZVm-l_tlI2xT1mZw4__3xa_tVQ_U"},
{"content":{"body":"canadahonk: I don't think it was, nor was that proposal ever finalized afaik","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@canada_goose:mozilla.org\">canadahonk</a>: I don't think it was, nor was that proposal ever finalized afaik","m.mentions":{"user_ids":["@canada_goose:mozilla.org"]},"msgtype":"m.text"},"ts":1696246498128,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$XT7XQVJ9pd5ZxRnh6oESI9gCc-i8EYNF_EbRu0fRjjY"},
{"content":{"body":"What would be needed to get it in the spec? (Chrome has been shipping since 2018)","msgtype":"m.text"},"ts":1696246589108,"senderName":"canadahonk","senderId":"@canada_goose:mozilla.org","id":"$u0KeM-d0FdaqnaM3utBw50vy1Jmrr7HPLP4wZjFzUpI"},
{"content":{"body":"canadahonk: a specification with a design that has agreement?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@canada_goose:mozilla.org\">canadahonk</a>: a specification with a design that has agreement?","m.mentions":{"user_ids":["@canada_goose:mozilla.org"]},"msgtype":"m.text"},"ts":1696247007609,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$vvl3RotZrHAZHMDC6X9R3gQqtXWk8ctXsDT3LSPc_KA"},
{"content":{"body":"canadahonk: I haven't looked at this recently, but I believe this feature has a repository with a number of outstanding issues","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@canada_goose:mozilla.org\">canadahonk</a>: I haven't looked at this recently, but I believe this feature has a repository with a number of outstanding issues","m.mentions":{"user_ids":["@canada_goose:mozilla.org"]},"msgtype":"m.text"},"ts":1696247043818,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$dNjwk42oLfPR4X70cFD85BzjLKOMqzXK4peNUxo25dY"},
{"content":{"body":"Yeah https://github.com/dtapuska/useractivation","msgtype":"m.text"},"ts":1696247059912,"senderName":"canadahonk","senderId":"@canada_goose:mozilla.org","id":"$becrjsd4zF_GgTBmrnhTCA7LyOu-wrf3QIaGgvDtr5E"},
{"content":{"body":"fwiw I'll probably leave it as it doesn't look like it even has a positive consesus","msgtype":"m.text"},"ts":1696247189843,"senderName":"canadahonk","senderId":"@canada_goose:mozilla.org","id":"$upwyZ4om6dwniDNoy2BGfbHsaTx_4wNpzucOptMVLIw"},
{"content":{"body":"canadahonk: yeah I think that proposal was superseded by https://github.com/WICG/capability-delegation but then they never completed that new one","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@canada_goose:mozilla.org\">canadahonk</a>: yeah I think that proposal was superseded by https://github.com/WICG/capability-delegation but then they never completed that new one","m.mentions":{"user_ids":["@canada_goose:mozilla.org"]},"msgtype":"m.text"},"ts":1696247231575,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$vqRwOih10BFluGVQxrD1UNUyY-JPYWxFSUI8Cwlpyyo"},
{"content":{"body":"smaug: when you say something isn't a \"UI event\", what do you mean by that? Not sure why `scroll` and `resize` are not it. Because they don't use `UIEvent` or some such?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a>: when you say something isn't a \"UI event\", what do you mean by that? Not sure why <code>scroll</code> and <code>resize</code> are not it. Because they don't use <code>UIEvent</code> or some such?","m.mentions":{"user_ids":["@smaug:mozilla.org"]},"msgtype":"m.text"},"ts":1696251391325,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$a71_Ks48y7QyMAMezsPm5rGbvkerQGTR-Uf-tUYunF0"},
{"content":{"body":"Those aren't any sort of input events, triggered by the user","msgtype":"m.text"},"ts":1696251429882,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$4R3ISWL_0mQMlAFe2CYD0p6pn8adOCzVw_YUyzWu0pk"},
{"content":{"body":"They are just plain normal Events, dispatched when either scrolling or resizing has happened","msgtype":"m.text"},"ts":1696251451742,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$C7vOj7n-jky9fidOHAnCD3afzXeDuvmRoQesGxtmbFk"},
{"content":{"body":"smaug: is that because there's some more fundamental event that ultimately caused the scrolling to happen, such as keyboard or mouse input? Would that make click not a UI event either?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a>: is that because there's some more fundamental event that ultimately caused the scrolling to happen, such as keyboard or mouse input? Would that make click not a UI event either?","m.mentions":{"user_ids":["@smaug:mozilla.org"]},"msgtype":"m.text"},"ts":1696251534198,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$OM9JQUh-8XJ4HElcOnqMVuM9SGm2BzvZ-CiX-D1FcKM"},
{"content":{"body":"Click isn't user input, no.","msgtype":"m.text"},"ts":1696251563321,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$zmOxBcZvjmAC26Es13rqGYto_2svGm6OHfIr12S-WRE"},
{"content":{"body":"click is normally the \"default action\" after user has done mousedown and mouseup","msgtype":"m.text"},"ts":1696251597420,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$ptlA7OXXhNL4d-JL9G3in_hSfKI2Jyd4IiJKIByrSuw"},
{"content":{"body":"click is synchronous","msgtype":"m.text"},"ts":1696251607755,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$0Yixut4rWN5b_v3d4D4Wf1xWnHW1Q2og0-W10NMIv8s"},
{"content":{"body":"Right, I think we still want to define it in relation to those other events precisely because of that, but they might be simpler as they're more of a side effect","m.mentions":{},"msgtype":"m.text"},"ts":1696251702468,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$-utoeIU-yPrHh7KjRc5OVvWJicVwusZu7BPFEQrE_EQ"},
{"content":{"body":"defining when mousedown and up fire would naturally define when click fires (assuming we think about pointer triggered click).  Similarly to keyboard triggered click.","msgtype":"m.text"},"ts":1696251778964,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$Svcby0FimtcZiW1hZWFUBMKlhmm8qxoqIw0lTyUhg7U"},
{"content":{"body":"But the scheduling part is mostly about *down/*move/*up","msgtype":"m.text"},"ts":1696251823442,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$DGlWtDFBmlQdjQFDMSHPXE43C378JmE04wKNyQRjLCo"},
{"content":{"body":"Browsers have some scheduling for those, but it is still unclear what is the best in which situations","msgtype":"m.text"},"ts":1696251856984,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$2id413C-YF8z31ccscx_y6x-kd7u1_zAN2f8XoUYoag"},
{"content":{"body":"we could start by making rendering step its own task, given that all the browsers do that","msgtype":"m.text"},"ts":1696252152477,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$GPjBSbl6ck8I1AyL9495m2-OKJImW7QnKQ2t5APw_WU"},
{"content":{"body":"Thanks, makes sense to me","m.mentions":{},"msgtype":"m.text"},"ts":1696253270358,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$Rl9oClR9Ih1X2CjRBcfzhJTe1Ggy_mxaIXKYmd4ig84"},
{"content":{"body":"I checked webkit code and it's not exactly a task there, in the `EventLoop` sense from what I could tell","format":"org.matrix.custom.html","formatted_body":"I checked webkit code and it's not exactly a task there, in the <code>EventLoop</code> sense from what I could tell","m.mentions":{},"msgtype":"m.text"},"ts":1696253892559,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$1bI109XM-mGyCmVcdrJookj0v0dTRJSYe_2ysSFSJ-c"},
{"content":{"body":"ah. I based my comment on what was discussed during tpac","msgtype":"m.text"},"ts":1696255862528,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$lt0KAoA14z8gXLkawuriqaVu_pAtrVvm90URHkgEwgU"},
{"content":{"body":"I could be wrong, my webkit foo is a bit out of date","m.mentions":{},"msgtype":"m.text"},"ts":1696256325924,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$vgLMD0gsrEXBFGHwsSMrw23cdfybiz848TKskr08TBg"},
{"content":{"body":"but I would suggest to double check","m.mentions":{},"msgtype":"m.text"},"ts":1696256338051,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$MzYmeLSDODhJofKX_rTHYbXR0MUGlcWKH1g5g5XH5Lk"},
{"content":{"body":"I wouldn't focus too much on the exact code, only on observable differences. We need script to run in the context of a task as otherwise a number of things seem to break down, so we should move \"update the rendering\" to that model. That it also makes the event loop more readable is a nice bonus.","m.mentions":{},"msgtype":"m.text"},"ts":1696258741522,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$D24UBXgr57uH-mAKo-i1U5wmhI-iov9IEah3Vpne3Mw"},
{"content":{"body":"> <@annevk:matrix.org> TabAtkins: not sure if this is a problem, but when I updated WHATWG's bikeshed boilerplate for a change in new issue URLs, it was picked up automatically without me having to generate the manifest\n\nHuh, it's definitely not redundant - I've forgotten to update the manifest before and *not* had changes picked up. (Plus that's just how it's specified - it checks against the manifest to see what it needs to download.) ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$fbN64B9MH8_iL1DAgoRj42yxsEvSmpFo1p6cidG-cnI?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@tabatkins:matrix.org\">TabAtkins</a>: not sure if this is a problem, but when I updated WHATWG's bikeshed boilerplate for a change in new issue URLs, it was picked up automatically without me having to generate the manifest</blockquote></mx-reply>Huh, it's definitely not redundant - I've forgotten to update the manifest before and <em>not</em> had changes picked up. (Plus that's just how it's specified - it checks against the manifest to see what it needs to download.)","m.mentions":{"user_ids":["@annevk:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$fbN64B9MH8_iL1DAgoRj42yxsEvSmpFo1p6cidG-cnI"}},"msgtype":"m.text"},"ts":1696261851878,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$KAAmodHYRvPcz572H2d6TodjMjqT0aNlYeSEnjgtrp4"},
{"content":{"body":"Oh tho, hm, it's been a while since I updated the built-in data; it predates the slight change to manifest format. I wonder if it's just noticing that the local manifest is borked and downloading everything (and the fact that the has was wrong on the remote manifest didn't matter, so long as the file is in there).","m.mentions":{},"msgtype":"m.text"},"ts":1696261960352,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$KPPV7iEGKp6a6-YJ2Rfr1JnU3DZvLRpfAcfYYtm43gs"},
{"content":{"body":" * Oh tho, hm, it's been a while since I updated the built-in data; it predates the slight change to manifest format. I wonder if it's just noticing that the local manifest is borked and downloading everything (and the fact that the hash was wrong on the remote manifest didn't matter, so long as the file is in there).","m.mentions":{},"m.new_content":{"body":"Oh tho, hm, it's been a while since I updated the built-in data; it predates the slight change to manifest format. I wonder if it's just noticing that the local manifest is borked and downloading everything (and the fact that the hash was wrong on the remote manifest didn't matter, so long as the file is in there).","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$KPPV7iEGKp6a6-YJ2Rfr1JnU3DZvLRpfAcfYYtm43gs","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1696261965736,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$TSb5aNUu6KPCoE97N3s95W7xAGThvqGeDmCN6pbVJZs"},
{"content":{"body":"annevk: curious what breaks by not having a current task apart from microtasks?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: curious what breaks by not having a current task apart from microtasks?","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1696262630994,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$dRp8u_m6uNOh2oNsT_cx9SvJLZePOo-lletFW-4ABjc"}
]