[
{"content":{"body":"happy to leave a similar comment on https://github.com/whatwg/html/pull/9166 but I feel like it might be better to get past simple confusions in chat, so I'd like to clarify something. annevk are you suggesting that you are opposed to the rearranging vs what we tried to do in the original PR that this was replacing - to weave shadow into that already complex but flat version?  I found it very complex, some others here seemed to also think there was room for improvement. I tried and shopped it to at least 3 others before assuming this would be an improvement and make shadow dom fit easier, but... you don't think so?","format":"org.matrix.custom.html","formatted_body":"happy to leave a similar comment on https://github.com/whatwg/html/pull/9166 but I feel like it might be better to get past simple confusions in chat, so I'd like to clarify something. <a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a> are you suggesting that you are opposed to the rearranging vs what we tried to do in the original PR that this was replacing - to weave shadow into that already complex but flat version?  I found it very complex, some others here seemed to also think there was room for improvement. I tried and shopped it to at least 3 others before assuming this would be an improvement and make shadow dom fit easier, but... you don't think so?","msgtype":"m.text"},"ts":1687356978513,"senderName":"bkardell","senderId":"@bkardell:igalia.com","id":"$rt05D-z-wVuKfls5MBGw4GUyWXn8Reg3mYZTCv-1sZo"},
{"content":{"body":"(I'd just like to clarify / not misunderstand the comment before I reply)","msgtype":"m.text"},"ts":1687357006620,"senderName":"bkardell","senderId":"@bkardell:igalia.com","id":"$hY0zBBT7lVA11i9a-7XKV7vj6wdirfqUZYgXxlxQzSQ"},
{"content":{"body":"bkardell: I don't think it works as-is, you definitely need to introduce each `<dl>` list with a preceding sentence as we do elsewhere","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@bkardell:igalia.com\">bkardell</a>: I don't think it works as-is, you definitely need to introduce each <code>&lt;dl&gt;</code> list with a preceding sentence as we do elsewhere","msgtype":"m.text"},"ts":1687357530099,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$lkmpTDXKw6BoR7pMfRYdjnABqhnghEYiqIuKxXObAcQ"},
{"content":{"body":"bkardell: I would have preferred the restructuring to be a separate editorial change from the shadow tree changes, as reviewing the combination is hard","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@bkardell:igalia.com\">bkardell</a>: I would have preferred the restructuring to be a separate editorial change from the shadow tree changes, as reviewing the combination is hard","msgtype":"m.text"},"ts":1687357566104,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$JsM5xbdLV7SXF5w9HHa9CacSEQ2wbULWJYVk7MADlCc"},
{"content":{"body":"> <@annevk:matrix.org> bkardell: I don't think it works as-is, you definitely need to introduce each `<dl>` list with a preceding sentence as we do elsewhere\n\nits not the only nested dl that's in there, I took the idea from others","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$lkmpTDXKw6BoR7pMfRYdjnABqhnghEYiqIuKxXObAcQ?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@bkardell:igalia.com\">bkardell</a>: I don't think it works as-is, you definitely need to introduce each <code>&lt;dl&gt;</code> list with a preceding sentence as we do elsewhere</blockquote></mx-reply>its not the only nested dl that's in there, I took the idea from others","m.relates_to":{"m.in_reply_to":{"event_id":"$lkmpTDXKw6BoR7pMfRYdjnABqhnghEYiqIuKxXObAcQ"}},"msgtype":"m.text"},"ts":1687357654424,"senderName":"bkardell","senderId":"@bkardell:igalia.com","id":"$OMcZ0bb8QNi-BidfO5EZI00gWUpP-8cmtAwnVKDUmuY"},
{"content":{"body":"> <@annevk:matrix.org> bkardell: I would have preferred the restructuring to be a separate editorial change from the shadow tree changes, as reviewing the combination is hard\n\nyeah, I think that makes a lot of sense and regret not doing that. It's mainly the priority is to get the shadow dom stuff in more than make it easier to follow, but trying to weave the shadow dom stuff in is so much harder unless you rearrange it first, I think","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$JsM5xbdLV7SXF5w9HHa9CacSEQ2wbULWJYVk7MADlCc?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@bkardell:igalia.com\">bkardell</a>: I would have preferred the restructuring to be a separate editorial change from the shadow tree changes, as reviewing the combination is hard</blockquote></mx-reply>yeah, I think that makes a lot of sense and regret not doing that. It's mainly the priority is to get the shadow dom stuff in more than make it easier to follow, but trying to weave the shadow dom stuff in is so much harder unless you rearrange it first, I think","m.relates_to":{"m.in_reply_to":{"event_id":"$JsM5xbdLV7SXF5w9HHa9CacSEQ2wbULWJYVk7MADlCc"}},"msgtype":"m.text"},"ts":1687357747067,"senderName":"bkardell","senderId":"@bkardell:igalia.com","id":"$4ATtquWYPiX-ISBhbwkMwduZnvMvkJhed9224HZC3cc"},
{"content":{"body":"also, my time on this is just limited","msgtype":"m.text"},"ts":1687357765547,"senderName":"bkardell","senderId":"@bkardell:igalia.com","id":"$0dUVk4EwEZWxKN3pxh2NIOM9MF93jLY4zPcgft7vhJc"},
{"content":{"body":"where do you prefer we go from here?  I suppose I can _try_  doing a lesser pull first","format":"org.matrix.custom.html","formatted_body":"where do you prefer we go from here?  I suppose I can <em>try</em>  doing a lesser pull first","msgtype":"m.text"},"ts":1687357792964,"senderName":"bkardell","senderId":"@bkardell:igalia.com","id":"$SjJKCgTQM3-f5YI5g73zhmXqZabpdaM8GWU_wJ-6u4w"},
{"content":{"body":"I'm not sure what precedent you mean. HTML has a lot of old algorithms that could do with some refactoring. They might not be a good source for inspiration. As for what to tackle next, if you feel tackling all the feedback at once is too much I'd recommend focusing on a restructuring PR first. It seems like it should then not be a whole lot of effort to put the shadow root stuff in.","msgtype":"m.text"},"ts":1687357957109,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$BGHN4SzS_wgSUGeUdOFrMbmxFnNrDzho0UE754yySis"},
{"content":{"body":"But if you want to address it all at once that's okay too.","msgtype":"m.text"},"ts":1687358020147,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$aEbrz992QO2zsga05hc4MASYPli61LXVw6EAfjEtExc"},
{"content":{"body":"I think the case for rearranging it is weaker without having to incorporate shadow dom but if you think we can be aware of that, I'm willing to try 2 steps","msgtype":"m.text"},"ts":1687367248093,"senderName":"bkardell","senderId":"@bkardell:igalia.com","id":"$MOUOzeoqRwfVmNR_ex1XsPAOA-fdO72sJN1HLX7HlAo"},
{"content":{"body":"bkardell: yeah, we'd view it through that lens (and you can make it explicit in your commit message)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@bkardell:igalia.com\">bkardell</a>: yeah, we'd view it through that lens (and you can make it explicit in your commit message)","msgtype":"m.text"},"ts":1687369215853,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$iqVCEioANm_TUWAyRm_8bgJNOz2wOGtF92pXhS8Rr18"},
{"content":{"body":"interesting... does the html build use Prince XML?","msgtype":"m.text"},"ts":1687370630536,"senderName":"bkardell","senderId":"@bkardell:igalia.com","id":"$e-nRGdtV2dzNcFyhiagKClieNsWmHOyGO_VGfDDMS2U"},
{"content":{"body":"for what?","msgtype":"m.text"},"ts":1687370633875,"senderName":"bkardell","senderId":"@bkardell:igalia.com","id":"$MjgURD8swttVXjZo9CDJutrxBoQjrDDls4pBp-ugWmQ"},
{"content":{"body":"https://wicg.github.io/turtledove/ has a couple fields that are passed to the browser in one realm, stored for a while, and then passed to a function in another realm. The spec currently uses JSON for this, where it might be able to use  StructuredSerializeForStorage() instead, but my question for this group is whether there's a good WebIDL pattern for documenting that restriction on types and creating the resulting objects in the right realm? \n\nhttps://w3c.github.io/IndexedDB/ does it all manually, but maybe something better has come along since then...","msgtype":"m.text"},"ts":1687370950028,"senderName":"Jeffrey Yasskin","senderId":"@jyasskin:matrix.org","id":"$5n1Xz__5yMcNoa6F7eiT_CMs7mXot_Zif1G40LYyJJg"}
]