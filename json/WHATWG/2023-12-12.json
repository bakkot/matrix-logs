[
{"content":{"body":"does mdn web doc discord channel work on element?","m.mentions":{},"msgtype":"m.text"},"ts":1702373144895,"senderName":"chargeitall","senderId":"@chargeitall:matrix.org","id":"$rSjPMuf3BdRmAhUPC5TGrYxCjK5R23XI6H72C5Cxjhk"},
{"content":{"body":"annevk: would you take a PR to add `<div algorithm>` to some or all algorithms in DOM (no promises when I might have time, but the lack of them means that variable highlighting doesn't work)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: would you take a PR to add <code>&lt;div algorithm&gt;</code> to some or all algorithms in DOM (no promises when I might have time, but the lack of them means that variable highlighting doesn't work)","msgtype":"m.text"},"ts":1702388238141,"senderName":"Ms2ger","senderId":"@ms2ger:igalia.com","id":"$KoihAS7vx8BJ8LTWAuXNq0v47a_ulNL9vVaBUTvUK5s"},
{"content":{"body":"Ms2ger: yes, see Fetch for my preferred style","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@ms2ger:igalia.com\">Ms2ger</a>: yes, see Fetch for my preferred style","m.mentions":{"user_ids":["@ms2ger:igalia.com"]},"msgtype":"m.text"},"ts":1702397589681,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$cAThJsCN1cvhSnl0uOxoROhO71IeX-XB2tgPK34uTzg"},
{"content":{"body":"Is it correct to assume that the kind of  \"requirement on callers\" listed here is discouraged for future specs/spec updates? https://html.spec.whatwg.org/multipage/structured-data.html#performing-structured-clones-from-other-specifications\n\n> Call sites that are not invoked as a result of author code synchronously calling into a user agent method must take care to properly prepare to run script and prepare to run a callback before invoking StructuredSerialize, StructuredSerializeForStorage, or StructuredSerializeWithTransfer abstract operations, if they are being performed on arbitrary objects.","msgtype":"m.text"},"ts":1702410826628,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$Ot_4mSZY1RyqZd2aujxMam684zGKqMYLwmbQjWQ0wfY"},
{"content":{"body":"And following that, is there any kind of tracking issue for places that \"should be\" updated to explicitly manipulate the surrounding agent's execution context stack?","msgtype":"m.text"},"ts":1702410879220,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$ay3u46ZXaSJK5sT5yVHvWkQSeLX3Lf6s-qxCa6w0lpc"},
{"content":{"body":"As a side note, it seems that Domenic's navigation apis will do that sort of \"deferred structured serialize\" mentioned in the second example if a navigation history entry needs its history API state serialized/deserialized \"in parallel\" or on the traversal task source ðŸ¤”","msgtype":"m.text"},"ts":1702411068102,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$PLhQoYyUC8xb1TFSwLY3phsnB8mxvgkQKDm-G-E3oEk"},
{"content":{"body":"Or maybe it was from a webidl callback context in the WaitForAll in navigation history event processing ðŸ¤”ðŸ¤”. I'll have to revive my branch implementing that","msgtype":"m.text"},"ts":1702411297991,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$ae2xA4OBWHvI0x246hnXoxsC1jz9Kbhsa9ofPBb1VPc"},
{"content":{"body":"I think we also ran into this kind of implicit execution context stack issue within the module loading implementation, though that was mostly Andreas this month","msgtype":"m.text"},"ts":1702413519646,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$LVLILvZYkMAKHFkCPf8RWTvZ-veMxZcKP413dlcssAg"},
{"content":{"body":"Hm, why would you think it's discouraged? It's useful to know what implicit assumptions an algorithm makes, when relevant, which might affect how you can/should call it.","m.mentions":{},"msgtype":"m.text"},"ts":1702413694974,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$QfD3E1sdBQij2_vZ6jaed3A6XJ9VI1qAXSOzuGDAz0A"},
{"content":{"body":"I would rather see the explicit steps on the actual callers as well, rather than make it implicit","msgtype":"m.text"},"ts":1702413940417,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$hrXlXc6QS-FLE7ELx70gNpNOZhKR_KAnaNe0MK5Yi3U"},
{"content":{"body":"When implementing algorithms that call that method, it's hard to keep track of all the context of which algorithms have special requirements ","msgtype":"m.text"},"ts":1702413970115,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$91as_G_sjtBQbGXUfMKlmml7PiT_tSGdBiihKefJAKs"},
{"content":{"body":"In Ladybird at the moment, that manifests as a test failing with an assertion that the execution context stack is not empty, and we then have to go put a RAII helper into the part of the algorithm that needs one. Rather than seeing \"prepare to run a script and a callback\" as a spec step, we need to hit the code path from the event loop or as a result of the UI process poking the renderer and recognize the source of the assertion failure","msgtype":"m.text"},"ts":1702414149883,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$3k55WvtBGxwCreBhoPpIwoeJuxM-yhjbVpqmyBFCyKQ"},
{"content":{"body":"Those requirements on callers are not meant to be action at a distance. They're meant to be advice to future spec writers.","msgtype":"m.text"},"ts":1702424139082,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$LMIdBarbhPsol_ydMOoKjvVcxENragiXeVjsp4wwp3A"},
{"content":{"body":"Navigation API serialization/deserialization is always on the main thread.","msgtype":"m.text"},"ts":1702424202155,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$MP1VKo3r-sonvchyuypz0Nzf1H1__IVoiWWWnvod9jU"},
{"content":{"body":"Hmm okay, in that case I'll try to document all the \"extra\" prepare to run script/callback steps we've had to add and see if we're doing something wrong for them or if the steps should be added ","msgtype":"m.text"},"ts":1702424371602,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$sYBb4KngWcAPtGbnTWHkYZNbgkBDc5E7GM11uzUbRps"}
]