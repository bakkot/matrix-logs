[
{"content":{"body":"Domenic: I have a calendar entry for an ‚ÄúHTML spec triage‚Äù meeting starting 10 minutes from now. I guess that‚Äôs some ghost entry leftover?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: I have a calendar entry for an ‚ÄúHTML spec triage‚Äù meeting starting 10 minutes from now. I guess that‚Äôs some ghost entry leftover?","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"ts":1721893925142,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$OZdA--S0UwJ_9GuX0bO2-GvKNRDjTPgIQNV_ToQ6eWE"},
{"content":{"body":"> <@sideshowbarker:matrix.org> Domenic: I have a calendar entry for an ‚ÄúHTML spec triage‚Äù meeting starting 10 minutes from now. I guess that‚Äôs some ghost entry leftover?\n\nHmm I think so, I don't have one myself.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$OZdA--S0UwJ_9GuX0bO2-GvKNRDjTPgIQNV_ToQ6eWE?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">@sideshowbarker:matrix.org</a><br><a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: I have a calendar entry for an ‚ÄúHTML spec triage‚Äù meeting starting 10 minutes from now. I guess that‚Äôs some ghost entry leftover?</blockquote></mx-reply>Hmm I think so, I don't have one myself.","m.mentions":{"user_ids":["@sideshowbarker:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$OZdA--S0UwJ_9GuX0bO2-GvKNRDjTPgIQNV_ToQ6eWE"}},"msgtype":"m.text"},"ts":1721893977561,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$QiF5Xj4M7VvC-g6gczdxHkUktqnQvVAayrZ3n05vnvw"},
{"content":{"body":"keithamus: related to the hint/tooltip discussion, I wonder if github would have used context menu if it had been supported everywhere (It was removed in https://github.com/whatwg/html/pull/2742)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@keithamus:matrix.org\">keithamus</a>: related to the hint/tooltip discussion, I wonder if github would have used context menu if it had been supported everywhere (It was removed in https://github.com/whatwg/html/pull/2742)","m.mentions":{"user_ids":["@keithamus:matrix.org"]},"msgtype":"m.text"},"ts":1721923414840,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$esgPo8ZvgqzVvgLUW1P2jXqXloG6boP_2j_39oHNPK8"},
{"content":{"body":"I can‚Äôt say for sure but we‚Äôve definitely tried to provide our own context menus in places before but due to the missing expected experience we saw user pushback. It would be helpful to have a similar concept or revive that spec üòõ","msgtype":"m.text"},"ts":1721923601139,"senderName":"keithamus","senderId":"@keithamus:matrix.org","id":"$kDOFvqIkpPRoKrfUlpotZAjXJ5FO-7najAUjHOQ-rAg"},
{"content":{"body":"Hey folks. I have a basic question for my understanding. Can someone help me understand why don't <img> tags have the ability to support request headers for urls that have such requirements for e.g. authorization token?","m.mentions":{},"msgtype":"m.text"},"ts":1721935437019,"senderName":"Ira Kaundal","senderId":"@irakaundal:matrix.org","id":"$9fKbxW-1XaZDKolI4ZV6XnkpaZitrHRpnnisO-CJl9I"},
{"content":{"body":" * Hey folks! I have a basic question for my understanding. Can someone help me understand why don't \\<img> tags have the ability to support request headers for urls that have such requirements for e.g. authorization token?","format":"org.matrix.custom.html","formatted_body":" * Hey folks! I have a basic question for my understanding. Can someone help me understand why don't &lt;img&gt; tags have the ability to support request headers for urls that have such requirements for e.g. authorization token?","m.mentions":{},"m.new_content":{"body":"Hey folks! I have a basic question for my understanding. Can someone help me understand why don't \\<img> tags have the ability to support request headers for urls that have such requirements for e.g. authorization token?","format":"org.matrix.custom.html","formatted_body":"Hey folks! I have a basic question for my understanding. Can someone help me understand why don't &lt;img&gt; tags have the ability to support request headers for urls that have such requirements for e.g. authorization token?","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$9fKbxW-1XaZDKolI4ZV6XnkpaZitrHRpnnisO-CJl9I","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1721935446918,"senderName":"Ira Kaundal","senderId":"@irakaundal:matrix.org","id":"$l0yEzGYJZsmrFyeikDrzGCogWpW6HeIgrHhKxR-XcXM"},
{"content":{"body":"You can use javascript for that.","m.mentions":{},"m.relates_to":{"event_id":"$9fKbxW-1XaZDKolI4ZV6XnkpaZitrHRpnnisO-CJl9I","is_falling_back":true,"m.in_reply_to":{"event_id":"$9fKbxW-1XaZDKolI4ZV6XnkpaZitrHRpnnisO-CJl9I"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1721935494883,"senderName":"easrng","senderId":"@easrng:yuri.im","id":"$3qjcW7uj4cE_8y-8Ex2k-fUi-D15kpWJqXr5m8pWQw0"},
{"content":{"body":"try `URL.createObjectURL(await(await fetch(/* whatever */)).blob())`","format":"org.matrix.custom.html","formatted_body":"try <code>URL.createObjectURL(await(await fetch(/* whatever */)).blob())</code>","m.mentions":{},"m.relates_to":{"event_id":"$9fKbxW-1XaZDKolI4ZV6XnkpaZitrHRpnnisO-CJl9I","is_falling_back":true,"m.in_reply_to":{"event_id":"$3qjcW7uj4cE_8y-8Ex2k-fUi-D15kpWJqXr5m8pWQw0"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1721935527887,"senderName":"easrng","senderId":"@easrng:yuri.im","id":"$ILgMLbfzNVONXCAX9piAuVYwJvwfaChMNY9ZN6a5fzA"},
{"content":{"body":" * try setting src to `URL.createObjectURL(await(await fetch(/* whatever */)).blob())`","format":"org.matrix.custom.html","formatted_body":" * try setting src to <code>URL.createObjectURL(await(await fetch(/* whatever */)).blob())</code>","m.mentions":{},"m.new_content":{"body":"try setting src to `URL.createObjectURL(await(await fetch(/* whatever */)).blob())`","format":"org.matrix.custom.html","formatted_body":"try setting src to <code>URL.createObjectURL(await(await fetch(/* whatever */)).blob())</code>","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$ILgMLbfzNVONXCAX9piAuVYwJvwfaChMNY9ZN6a5fzA","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1721935534716,"senderName":"easrng","senderId":"@easrng:yuri.im","id":"$MK0GU5Qfq9Hl9Ry-WMgKgGGRSLlQz7RTxnAY0xXV3iQ"},
{"content":{"body":"Yes, that is the option I am implementing but it comes with its own set of challenges like creating in-memory blobs that need to be released from memory. Current recommendation is to release the memory when component unmounts but when the application is huge and performance is crucial, the intention is to have this more centralized as we don't cannot rely on all components doing this.","m.mentions":{},"m.relates_to":{"event_id":"$9fKbxW-1XaZDKolI4ZV6XnkpaZitrHRpnnisO-CJl9I","is_falling_back":true,"m.in_reply_to":{"event_id":"$ILgMLbfzNVONXCAX9piAuVYwJvwfaChMNY9ZN6a5fzA"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1721939450219,"senderName":"Ira Kaundal","senderId":"@irakaundal:matrix.org","id":"$BPAo2P1SUGTaEDYHM2Xoquk048FvmQ77rZU-uN5xWTA"},
{"content":{"body":"try adding the headers in a service worker perhaps","m.mentions":{},"m.relates_to":{"event_id":"$9fKbxW-1XaZDKolI4ZV6XnkpaZitrHRpnnisO-CJl9I","is_falling_back":true,"m.in_reply_to":{"event_id":"$BPAo2P1SUGTaEDYHM2Xoquk048FvmQ77rZU-uN5xWTA"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1721939485346,"senderName":"easrng","senderId":"@easrng:yuri.im","id":"$Vgud1iEilquS-N2Ww0h8YL1UoLOUTUMe1XhvLRnFPkE"},
{"content":{"body":"There are concerns with this approach as well since service works are not expected to always be available. For now blob url is still the most favorable option only.","m.mentions":{},"m.relates_to":{"event_id":"$9fKbxW-1XaZDKolI4ZV6XnkpaZitrHRpnnisO-CJl9I","is_falling_back":true,"m.in_reply_to":{"event_id":"$Vgud1iEilquS-N2Ww0h8YL1UoLOUTUMe1XhvLRnFPkE"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1721939891244,"senderName":"Ira Kaundal","senderId":"@irakaundal:matrix.org","id":"$KBIqrNHiXeh-zWFHeNI75WK_EcMrUrDOAD-dq7XGtws"},
{"content":{"body":"could feature detect and switch to whichever is available","m.mentions":{},"m.relates_to":{"event_id":"$9fKbxW-1XaZDKolI4ZV6XnkpaZitrHRpnnisO-CJl9I","is_falling_back":true,"m.in_reply_to":{"event_id":"$KBIqrNHiXeh-zWFHeNI75WK_EcMrUrDOAD-dq7XGtws"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1721939939151,"senderName":"easrng","senderId":"@easrng:yuri.im","id":"$kDBrIQK-iHS_V2yMfn-G550MVzcmSEJRiyX_oDBWefY"},
{"content":{"body":"Possibly, but right now we are trying to figure out ways to handle the memory problem. It would be preferable to just have one path without adding too much complexity.","m.mentions":{},"m.relates_to":{"event_id":"$9fKbxW-1XaZDKolI4ZV6XnkpaZitrHRpnnisO-CJl9I","is_falling_back":true,"m.in_reply_to":{"event_id":"$kDBrIQK-iHS_V2yMfn-G550MVzcmSEJRiyX_oDBWefY"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1721940111273,"senderName":"Ira Kaundal","senderId":"@irakaundal:matrix.org","id":"$JznrAtugWhTF_f4kYPyo-AgBKWOQFaqsNNEjMZoJqhg"},
{"content":{"body":"I was majorly curious why <img> tag cannot support this. It seems like a common enough concern which would make things a lot easier.","m.mentions":{},"m.relates_to":{"event_id":"$9fKbxW-1XaZDKolI4ZV6XnkpaZitrHRpnnisO-CJl9I","is_falling_back":true,"m.in_reply_to":{"event_id":"$JznrAtugWhTF_f4kYPyo-AgBKWOQFaqsNNEjMZoJqhg"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1721940185619,"senderName":"Ira Kaundal","senderId":"@irakaundal:matrix.org","id":"$OBl8FTxUGKw73Rz9oVTvOBYz4_b1VIs7ppeJnkpd2gA"},
{"content":{"body":"because img tags are significantly older than the ability to make any kind of request with custom headers on the web","m.mentions":{},"m.relates_to":{"event_id":"$9fKbxW-1XaZDKolI4ZV6XnkpaZitrHRpnnisO-CJl9I","is_falling_back":true,"m.in_reply_to":{"event_id":"$OBl8FTxUGKw73Rz9oVTvOBYz4_b1VIs7ppeJnkpd2gA"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1721940225407,"senderName":"easrng","senderId":"@easrng:yuri.im","id":"$QYYgAmZ6nXFYYqNnL-5tB4oajvc3CrFfbPpmLsNwYEA"},
{"content":{"body":"Okay I see.","m.mentions":{},"m.relates_to":{"event_id":"$9fKbxW-1XaZDKolI4ZV6XnkpaZitrHRpnnisO-CJl9I","is_falling_back":true,"m.in_reply_to":{"event_id":"$QYYgAmZ6nXFYYqNnL-5tB4oajvc3CrFfbPpmLsNwYEA"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1721940294598,"senderName":"Ira Kaundal","senderId":"@irakaundal:matrix.org","id":"$HpBukOFAzr6Th_1w36lWBBSNBFiCFqXmbww8YEnmqy4"},
{"content":{"body":"Thanks for the information and the help! Appreciate it!","m.mentions":{},"m.relates_to":{"event_id":"$9fKbxW-1XaZDKolI4ZV6XnkpaZitrHRpnnisO-CJl9I","is_falling_back":true,"m.in_reply_to":{"event_id":"$HpBukOFAzr6Th_1w36lWBBSNBFiCFqXmbww8YEnmqy4"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1721940388674,"senderName":"Ira Kaundal","senderId":"@irakaundal:matrix.org","id":"$YckhqlnI7gDTi983e0GX6C8KiLV9ih9iAqkET4pD0tc"},
{"content":{"body":"Some other unsolicited thoughts:\n* you could make a web component for this, so that at least the fetch is papered over and you just make a <my-fetch-img src=‚Ä¶ /> etc. The fetch itself will potentially be cached (if crafted correctly, right headers from the server), can use a map from original urls to object urls to provide your own caching, and web component lifecycle to revoke the object urls (so that as long as at least one image is attached to the dom, the object url won‚Äôt be revoked and can be loaded without hitting fetch at all). \n * img tags can, by dint of being as old as html (‚Ä¶ish), send cookies already, and have some protection against the app loading it being able to see contents. Additionally, cookies can be set to not permit being sent when a different site tries to load an image from the domain that originally set the cookie. On the other hand, authorization (sic) headers are not sent for image resources. Changing either rule could make it possible for an external site (evil.com) to craft img tags and load urls (that might not even be images) from servers that were previously secure from such attacks","format":"org.matrix.custom.html","formatted_body":"<p>Some other unsolicited thoughts:</p>\n<ul>\n<li>you could make a web component for this, so that at least the fetch is papered over and you just make a <!-- raw HTML omitted --> etc. The fetch itself will potentially be cached (if crafted correctly, right headers from the server), can use a map from original urls to object urls to provide your own caching, and web component lifecycle to revoke the object urls (so that as long as at least one image is attached to the dom, the object url won‚Äôt be revoked and can be loaded without hitting fetch at all).</li>\n<li>img tags can, by dint of being as old as html (‚Ä¶ish), send cookies already, and have some protection against the app loading it being able to see contents. Additionally, cookies can be set to not permit being sent when a different site tries to load an image from the domain that originally set the cookie. On the other hand, authorization (sic) headers are not sent for image resources. Changing either rule could make it possible for an external site (evil.com) to craft img tags and load urls (that might not even be images) from servers that were previously secure from such attacks</li>\n</ul>","m.relates_to":{"event_id":"$9fKbxW-1XaZDKolI4ZV6XnkpaZitrHRpnnisO-CJl9I","is_falling_back":true,"m.in_reply_to":{"event_id":"$YckhqlnI7gDTi983e0GX6C8KiLV9ih9iAqkET4pD0tc"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1721948404836,"senderName":"Colin Alworth","senderId":"@niloc132:delightfullyoffto.pics","id":"$ctfKoRAVqnHbvsda6XRLwM33ZFXUQITiFzGdbVNAU0U"}
]