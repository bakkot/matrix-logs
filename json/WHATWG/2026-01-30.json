[
{"content":{"body":"https://x.com/filpizlo/status/2017074082249048347","m.mentions":{},"msgtype":"m.text"},"ts":1769750401698,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$oAOpJSzSE7waUz98X3eJrI8nuU8duBYah00znv_powA"},
{"content":{"body":"Commented. Thanks","m.mentions":{},"m.relates_to":{"event_id":"$n87fNeNL_5aey_5CZcAhBZLdeBUwlNhZZH-7g6523U0","is_falling_back":true,"m.in_reply_to":{"event_id":"$lR8C7xnHwKTBW77PMCBTCqCPs8IJD6JPw--oMd4qzVA"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1769757261715,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$qW4bypDftNpTn-lLnS7qnjNMRvTy4zYjir7LEiMd3aA"},
{"content":{"body":"zcorpan: We were talking on the whattnot call about the *“Why not just use PIs instead of minting a new exclamation point syntax?”* question for the marker thing, and Noam mentioned you had expressed some rationale for why. What was that? Or could you give a link(s) to your comment(s) on that?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: We were talking on the whattnot call about the <em>“Why not just use PIs instead of minting a new exclamation point syntax?”</em> question for the marker thing, and Noam mentioned you had expressed some rationale for why. What was that? Or could you give a link(s) to your comment(s) on that?","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"msgtype":"m.text"},"ts":1769757555348,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$KHrvF7AztEGmSVkRsgp30GipvMUqbJinVl958UvVVe0"},
{"content":{"body":"IMHO Henri makes a pretty strong case for why we should just use PIs — unless there’s some really compelling reason not to.","m.mentions":{},"msgtype":"m.text"},"ts":1769757642326,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$dtjc14XwORTD3F4gAOoND2haVFwUxA_qLoGQb1lxJR0"},
{"content":{"body":"> <@sideshowbarker:matrix.org> IMHO Henri makes a pretty strong case for why we should just use PIs — unless there’s some really compelling reason not to.\n\nFWIW I was convinced especially by the arguments that extensions might be incompat; I think we can have something like ProcessingInstruction.prototype.marker that points to the actual clean marker data, not even a subclass, and can respond to mutations of the PI's data. This allows zero modifications to DOM and makes marker inspection and manipulation agnostic of whether its xml or HTML ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$dtjc14XwORTD3F4gAOoND2haVFwUxA_qLoGQb1lxJR0?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">@sideshowbarker:matrix.org</a><br />IMHO Henri makes a pretty strong case for why we should just use PIs — unless there’s some really compelling reason not to.</blockquote></mx-reply>FWIW I was convinced especially by the arguments that extensions might be incompat; I think we can have something like ProcessingInstruction.prototype.marker that points to the actual clean marker data, not even a subclass, and can respond to mutations of the PI's data. This allows zero modifications to DOM and makes marker inspection and manipulation agnostic of whether its xml or HTML","m.relates_to":{"m.in_reply_to":{"event_id":"$dtjc14XwORTD3F4gAOoND2haVFwUxA_qLoGQb1lxJR0"}},"msgtype":"m.text"},"ts":1769758404380,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$nM5TxpGfbFmRbaBgaWy3E2u-2u8JIRHpGKn_PHWk-0A"},
{"content":{"body":"sideshowbarker: I proposed it in https://github.com/whatwg/html/issues/11542#issuecomment-3759955087\n\nThe main benefit I think is less confusion about the end of the \"tag\" in the syntax. In XML PIs end with ?> but in the HTML parser it ends with >. But the compat with XML tooling and DOM traversal scripts is more important, so I think now we should use PIs and live with mutability. We can trim a trailing \"?\" in the parser so polyglot is still possible.","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">sideshowbarker</a>: I proposed it in https://github.com/whatwg/html/issues/11542#issuecomment-3759955087</p>\n<p>The main benefit I think is less confusion about the end of the \"tag\" in the syntax. In XML PIs end with ?&gt; but in the HTML parser it ends with &gt;. But the compat with XML tooling and DOM traversal scripts is more important, so I think now we should use PIs and live with mutability. We can trim a trailing \"?\" in the parser so polyglot is still possible.</p>\n","m.mentions":{"user_ids":["@sideshowbarker:matrix.org"]},"msgtype":"m.text"},"ts":1769759134110,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$YEEzT-VnmVs04BT8hdGAiQs7Wj7vRGaK473jVJVK5-Q"},
{"content":{"body":"Ah I see:\n\n> _If we're going to use a new node type instead of ProcessingInstruction, there's no need to use the syntax for processing instructions._\n\nSo yeah, objectively it’d make sense _if_ we did have a very good reason to use a new node type. Which takes it back more to just being about the question of whether we need to use a new node type. And yeah the _“the compat with XML tooling and DOM traversal scripts”_ argument seems to weigh things more heavily toward not doing that.","format":"org.matrix.custom.html","formatted_body":"<p>Ah I see:</p>\n<blockquote>\n<p><em>If we're going to use a new node type instead of ProcessingInstruction, there's no need to use the syntax for processing instructions.</em></p>\n</blockquote>\n<p>So yeah, objectively it’d make sense <em>if</em> we did have a very good reason to use a new node type. Which takes it back more to just being about the question of whether we need to use a new node type. And yeah the <em>“the compat with XML tooling and DOM traversal scripts”</em> argument seems to weigh things more heavily toward not doing that.</p>\n","m.mentions":{},"msgtype":"m.text"},"ts":1769759513829,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$00Worvo6HYPAO9viohKWkbhz6swDSHmQSTFcVWbhFkE"},
{"content":{"body":"Note that `ProcessingInstruction`'s \"target\" is immutable, so at least the marker type can remain immutable and mutating the data only affects the name and whatever attributes future usages of this process","format":"org.matrix.custom.html","formatted_body":"Note that <code>ProcessingInstruction</code>'s \"target\" is immutable, so at least the marker type can remain immutable and mutating the data only affects the name and whatever attributes future usages of this process","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$YEEzT-VnmVs04BT8hdGAiQs7Wj7vRGaK473jVJVK5-Q"}},"msgtype":"m.text"},"ts":1769759671145,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$CbiCIDzzUFp53-Ph0PCvPHMLjB-NOPVsxyW_xdxYgTY"},
{"content":{"body":"Noam Rosenthal: ah yes. Simplest would be to not have pseudo-attributes but just take the data and treat as the name. If we want fail-open future compat: no have pseudo-attributes for now, but let the name be the part in the data before any whitespace.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: ah yes. Simplest would be to not have pseudo-attributes but just take the data and treat as the name. If we want fail-open future compat: no have pseudo-attributes for now, but let the name be the part in the data before any whitespace.","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1769760202756,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$YQc6m5r9B3G7WI3z58enZoErT5Qt3RZJLVCvAePT8j4"},
{"content":{"body":"> <@zcorpan:mozilla.org> Noam Rosenthal: ah yes. Simplest would be to not have pseudo-attributes but just take the data and treat as the name. If we want fail-open future compat: no have pseudo-attributes for now, but let the name be the part in the data before any whitespace.\n\nYes I think the latter. There are already emerging cases for pseudo attributes, eg for using this for css custom highlights ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$YQc6m5r9B3G7WI3z58enZoErT5Qt3RZJLVCvAePT8j4?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">@zcorpan:mozilla.org</a><br /><a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: ah yes. Simplest would be to not have pseudo-attributes but just take the data and treat as the name. If we want fail-open future compat: no have pseudo-attributes for now, but let the name be the part in the data before any whitespace.</blockquote></mx-reply>Yes I think the latter. There are already emerging cases for pseudo attributes, eg for using this for css custom highlights","m.relates_to":{"m.in_reply_to":{"event_id":"$YQc6m5r9B3G7WI3z58enZoErT5Qt3RZJLVCvAePT8j4"}},"msgtype":"m.text"},"ts":1769760258087,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$exTlQNWBjVipZplshfhpnvCI4TMo8UysmuGwpAoysGI"},
{"content":{"body":"I wonder if it's important to have it as a property of a PI rather than a subclass. HTML elements are subclasses despite not being known to XML","msgtype":"m.text"},"ts":1769760311846,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$v-BINTwLvzjhdNyjiz7pIPbe1tFOAjGSpRf79AvvMUI"},
{"content":{"body":"Hmm yeah, subclass seems like it should be compatible enough. I think it would only break checks like `node.constructor.name` but probably scripts usually use `nodeType`","format":"org.matrix.custom.html","formatted_body":"Hmm yeah, subclass seems like it should be compatible enough. I think it would only break checks like <code>node.constructor.name</code> but probably scripts usually use <code>nodeType</code>","m.mentions":{},"msgtype":"m.text"},"ts":1769761199238,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$3Gt42ZmPp7GCgODU67e2EGXmmZHjHMg-d_PfRDKKEFk"},
{"content":{"body":"Do we need a subclass? If we actually define how the pseudo-attributes are parsed in a way that exactly matches what we do for style sheets we could just repurpose all of it.","m.mentions":{},"msgtype":"m.text"},"ts":1769763508482,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$pMoDVg5mD1fVlpjIp5WM2pcOdRftKdC6FXrvgwyTjGQ"},
{"content":{"body":"We might have some flexibility to start allowing unquoted values in there or names without values. Not sure.","m.mentions":{},"msgtype":"m.text"},"ts":1769763608743,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$uUKlET9Uo-tcRwL8jknqI7Di_87ruIyQVpNs2DAFuFE"},
{"content":{"body":"> <@annevk:matrix.org> Do we need a subclass? If we actually define how the pseudo-attributes are parsed in a way that exactly matches what we do for style sheets we could just repurpose all of it.\n\nProbably for the case where a plain xml PI is adopted in an HTML doc ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$pMoDVg5mD1fVlpjIp5WM2pcOdRftKdC6FXrvgwyTjGQ?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br />Do we need a subclass? If we actually define how the pseudo-attributes are parsed in a way that exactly matches what we do for style sheets we could just repurpose all of it.</blockquote></mx-reply>Probably for the case where a plain xml PI is adopted in an HTML doc","m.relates_to":{"m.in_reply_to":{"event_id":"$pMoDVg5mD1fVlpjIp5WM2pcOdRftKdC6FXrvgwyTjGQ"}},"msgtype":"m.text"},"ts":1769763699166,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$bnbq2Mspl2x1ZsZkAp-C9xNGT3QDSwYyVAppq0gpUt0"},
{"content":{"body":"But not 100% certain ","msgtype":"m.text"},"ts":1769763722378,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$x6nULLQ-yKxsrgcwHdTD1i_tqOh67Oruw9uXLhtYsj4"},
{"content":{"body":"I'm not sure I understand. I think Henri's idea is that we essentially have PIs with as much structure as they have today and then the structured data is created lazily on top, perhaps exposed through an API. And the syntax for the structured data follows what we already implement for the xml-stylesheet PI.","m.mentions":{},"msgtype":"m.text"},"ts":1769763838056,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$ZHWpsUDpxvXbcFFTNCybV0wMjrRGne4pS-xqqK26NRI"},
{"content":{"body":"> <@annevk:matrix.org> I'm not sure I understand. I think Henri's idea is that we essentially have PIs with as much structure as they have today and then the structured data is created lazily on top, perhaps exposed through an API. And the syntax for the structured data follows what we already implement for the xml-stylesheet PI.\n\nYes, the question is if the marker specific API is exposed for things that are not a marker target. Currently though it's just a name","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$ZHWpsUDpxvXbcFFTNCybV0wMjrRGne4pS-xqqK26NRI?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br />I'm not sure I understand. I think Henri's idea is that we essentially have PIs with as much structure as they have today and then the structured data is created lazily on top, perhaps exposed through an API. And the syntax for the structured data follows what we already implement for the xml-stylesheet PI.</blockquote></mx-reply>Yes, the question is if the marker specific API is exposed for things that are not a marker target. Currently though it's just a name","m.relates_to":{"m.in_reply_to":{"event_id":"$ZHWpsUDpxvXbcFFTNCybV0wMjrRGne4pS-xqqK26NRI"}},"msgtype":"m.text"},"ts":1769763901653,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$URBTywQuPS0b0djYqlxA_6HDZUMXxQP4ITfqIxSYzgw"},
{"content":{"body":"I think we just make all PIs possible markers and all of them support some kind of attribute API. So you can do <?highlight> and such.","m.mentions":{},"msgtype":"m.text"},"ts":1769763960545,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$ZemvmwvI05EcJcdCm-nRMOi5uzYy5qFh95_ELUN-35Q"},
{"content":{"body":"and then highlightPI.setAttribute('type', 'syntax-error') or some such.","m.mentions":{},"msgtype":"m.text"},"ts":1769763999391,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$fSGg8hQk2J_nFJQxa-prc8qyv6VdrEHubuLilvXBHDM"},
{"content":{"body":"* And then highlightPI.setAttribute('type', 'syntax-error') or some such.","m.mentions":{},"m.new_content":{"body":"And then highlightPI.setAttribute('type', 'syntax-error') or some such.","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$fSGg8hQk2J_nFJQxa-prc8qyv6VdrEHubuLilvXBHDM","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1769764006830,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$JGvS0aXnCjN6O0DMd_e-dDiVFhRishAvo5jRLpPwNN8"},
{"content":{"body":"> <@annevk:matrix.org> I think we just make all PIs possible markers and all of them support some kind of attribute API. So you can do <?highlight> and such.\n\nThat's also ok though the parser needs to know which ones to parse, to avoid web compat issues","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$ZemvmwvI05EcJcdCm-nRMOi5uzYy5qFh95_ELUN-35Q?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br />I think we just make all PIs possible markers and all of them support some kind of attribute API. So you can do &lt;?highlight&gt; and such.</blockquote></mx-reply>That's also ok though the parser needs to know which ones to parse, to avoid web compat issues","m.relates_to":{"m.in_reply_to":{"event_id":"$ZemvmwvI05EcJcdCm-nRMOi5uzYy5qFh95_ELUN-35Q"}},"msgtype":"m.text"},"ts":1769764015719,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$TVIjqggMbBFdZ_9ttAPHyAN4v4em76v2GwJZw0THhdQ"},
{"content":{"body":"Ie parse unknown ones as bogus comments ","msgtype":"m.text"},"ts":1769764045739,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$U96DYqOXQxVJ_dSjI3ifxphibBAoOLlN1mMfgXMBi1g"},
{"content":{"body":"Have we already identified we can't parse <? as PIs universally?","m.mentions":{},"msgtype":"m.text"},"ts":1769764058909,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$ozsVZPpOoAnC4QgAwf0csqywtlmtmDX2bIBB1vohP6Q"},
{"content":{"body":"We identified that there is use of them in the wild as bogus comments ","msgtype":"m.text"},"ts":1769764078651,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$NP5az5HQuTYTFKK2wIDQgp-8ctVdc8hL-VgSx2PIw6g"},
{"content":{"body":"Not a whole lot but some target names are in use","msgtype":"m.text"},"ts":1769764106918,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$XEdkPGY_N0Pcnxg_kDau6haBe1ZdzewPpC8pRkgQRvc"},
{"content":{"body":"Do you think we can blocklist?","m.mentions":{},"msgtype":"m.text"},"ts":1769764123865,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$xh3vi_x8u6GOEY6RTX40d70f59ffGyj6ckjtbDyb_Vo"},
{"content":{"body":"At the very least extending it to the full range of names is something we can do gradually ","msgtype":"m.text"},"ts":1769764130101,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$TW7Hru6PtP5HakJxA-ykayo3oNNnOuOl_2ARN5e-LuU"},
{"content":{"body":"As in first just parse an allowlist and continue from there with a separate compat rollout ","msgtype":"m.text"},"ts":1769764166980,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$Y8wtEorN4YgKE_xZ6rP4rlMW0rk-8VF_WVNGeX0J9rM"},
{"content":{"body":"If we just ban xml/xml-stylesheet/php/?","m.mentions":{},"msgtype":"m.text"},"ts":1769764177245,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$vyms7LjjFjI2SedyasIQd1xB2XFd7vod9SUv89E_7WY"},
{"content":{"body":"Probably a few more common ones in the HA IIRC","msgtype":"m.text"},"ts":1769764203692,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$ubnXwJt6fFsASHPJYJz3EewCYgHtgnQfEFqFajea4mE"},
{"content":{"body":"It seems like we should be able to get some data on that and then just forever let those names be bogus comments.","m.mentions":{},"msgtype":"m.text"},"ts":1769764235815,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$tG5MsIk_TFwEKYQCz5rZWRm3_CKkAWEqrUv5xU1rPco"},
{"content":{"body":"I am not opposed to that. In the end it's the same feature with different compat strategies.","msgtype":"m.text"},"ts":1769764287991,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$QSjqEOtR8fWTBZBSYln8m1JqnhO5q9t_le7vKSVrbFs"},
{"content":{"body":"I think figuring that out first will give us a bit more room when we get to concrete features that will use these PIs. So doing the parser changes to enable PIs in HTML and figuring out the syntax xml-stylesheet PIs use in a bit more detail.","m.mentions":{},"msgtype":"m.text"},"ts":1769764446623,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$DcZ_-LoGkgJZgZhSTuNnDywHjBGxIRf9MYPYBKU6LyY"},
{"content":{"body":"Btw another feature I can envision for these markers/PIs is a directive for the parser to buffer instead of stream, to help authors avoid rendering at intermediate points... But that needs some incubation ","msgtype":"m.text"},"ts":1769765473899,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$7uyu_5CEK5T5x14xWfxs7kHA4Xky3MQmOEPStb1Pkvc"},
{"content":{"body":"https://docs.google.com/spreadsheets/d/1VZDB3BA-G5VZpHdpYAEczVB1u2iEkN2YC-6dZdNuyBU/edit?gid=0#gid=0\n\nxml, php, ra-page, xpacket, if, echo, import appear in more than 0.001% of main document responses in January 2026.\nOnly <?xml and <?php appear in more than 0.1% of pages, Up to us where we want to draw the line","m.mentions":{},"msgtype":"m.text"},"ts":1769769237934,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$-A-B-GkZsBzCzd6_FIShMU_VCZpgKTMqnRG8WfKifU4"},
{"content":{"body":"<?xpacket?> is usually inside svg for embedding XMP info about the SVG. I don't think anyone relies on these becoming comments in particular","m.mentions":{},"msgtype":"m.text"},"ts":1769770156707,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$dVIskXGCKmgJ3wyxmvyBC7dIw4UQOw-QNGsH9eWW6Zo"},
{"content":{"body":"<?ra-page?> is in Japanese government websites but I don't think it's queried client-side. <?if and <?echo are leaks from PHP","m.mentions":{},"msgtype":"m.text"},"ts":1769770219168,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$0ElNoMxEczh47RIA8vyl7E9m-EWVEdJfzQLdK6Lxh8Y"},
{"content":{"body":"When implementation uses separate processes per site, what is the current global supposed to be in [focus()](https://html.spec.whatwg.org/#dom-window-focus) when site A calls siteBWindow.focus().  I assume it is null, given that current realm is \"running execution context, or am I missing something.  (This is related to the focus-without-user-activation)","format":"org.matrix.custom.html","formatted_body":"When implementation uses separate processes per site, what is the current global supposed to be in <a href=\"https://html.spec.whatwg.org/#dom-window-focus\">focus()</a> when site A calls siteBWindow.focus().  I assume it is null, given that current realm is \"running execution context, or am I missing something.  (This is related to the focus-without-user-activation)","m.mentions":{},"msgtype":"m.text"},"ts":1769770309155,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$TB12LxL7oVRjFPliy932lH7QukA8A4wr7F-AK3sWtQk"},
{"content":{"body":"Though, even currently, similar question applies to window.close() and its use of incumbent global.","m.mentions":{},"msgtype":"m.text"},"ts":1769770370478,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$5gg9r4FCzxy3UqlqbqgdY6WVKrqNNa2WR_40jXNbmVY"},
{"content":{"body":"* When implementation uses separate processes per site, what is the current global supposed to be in [focus()](https://html.spec.whatwg.org/#dom-window-focus) when site A calls siteBWindow.focus().  I assume it is null, given that current realm is \"running execution context\", or am I missing something.  (This is related to the focus-without-user-activation)","format":"org.matrix.custom.html","formatted_body":"* When implementation uses separate processes per site, what is the current global supposed to be in <a href=\"https://html.spec.whatwg.org/#dom-window-focus\">focus()</a> when site A calls siteBWindow.focus().  I assume it is null, given that current realm is \"running execution context\", or am I missing something.  (This is related to the focus-without-user-activation)","m.mentions":{},"m.new_content":{"body":"When implementation uses separate processes per site, what is the current global supposed to be in [focus()](https://html.spec.whatwg.org/#dom-window-focus) when site A calls siteBWindow.focus().  I assume it is null, given that current realm is \"running execution context\", or am I missing something.  (This is related to the focus-without-user-activation)","format":"org.matrix.custom.html","formatted_body":"When implementation uses separate processes per site, what is the current global supposed to be in <a href=\"https://html.spec.whatwg.org/#dom-window-focus\">focus()</a> when site A calls siteBWindow.focus().  I assume it is null, given that current realm is \"running execution context\", or am I missing something.  (This is related to the focus-without-user-activation)","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$TB12LxL7oVRjFPliy932lH7QukA8A4wr7F-AK3sWtQk","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1769770737460,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$lo9lvmvr9PHVxPaTcAUwj-cc0OEfeIk-Z0ZHKZvYBNk"},
{"content":{"body":"Isn't it a `SecurityError`?","format":"org.matrix.custom.html","formatted_body":"Isn't it a <code>SecurityError</code>?","m.mentions":{"user_ids":["@smaug:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$TB12LxL7oVRjFPliy932lH7QukA8A4wr7F-AK3sWtQk"}},"msgtype":"m.text"},"ts":1769771009151,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$1XrRhxpbBawKWCgJZqcNvs-erBEtD6LodGfeeCNZfAU"},
{"content":{"body":"It's defined as a cross-origin property on WindowProxy","m.mentions":{},"msgtype":"m.text"},"ts":1769771031055,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$tq7StTEuoM51yUduJS2iU1rU20Rg8A5iO1DXqG1tZeA"},
{"content":{"body":"I mean, you can call siteBWindow.focus()","m.mentions":{},"msgtype":"m.text"},"ts":1769771034107,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$OnFQ7w3oseU46N8ad_iPhG6pGvuPxY6sqNfpuchG8o4"},
{"content":{"body":"right","m.mentions":{},"msgtype":"m.text"},"ts":1769771042900,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$CHSfN5NAqhczLderwfGoJvo5dE9X3hU3EW-JM3FIgA4"}
]