[
{"content":{"body":"annevk: for the fetch issue, can we count on client to always be task destination? `useParallelQueue` seems to change that, e.g. for sync XHR but I guess it's not in use much?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: for the fetch issue, can we count on client to always be task destination? <code>useParallelQueue</code> seems to change that, e.g. for sync XHR but I guess it's not in use much?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"annevk: for the fetch issue, can we count on client to always be task destination? `useParallelQueue` seems to change that, e.g. for sync XHR but I guess it's not in use much?","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: for the fetch issue, can we count on client to always be task destination? <code>useParallelQueue</code> seems to change that, e.g. for sync XHR but I guess it's not in use much?","mimetype":"text/html"}]},"ts":1655198528249,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$bXB6v5ndmDwKQYD4AulCoakKUtki7mkQ0762CnXPyqI"},
{"content":{"body":"I guess it's OK in that case to use the parallel queue as the task destination anyway (thinking out loud)","msgtype":"m.text","org.matrix.msc1767.text":"I guess it's OK in that case to use the parallel queue as the task destination anyway (thinking out loud)"},"ts":1655198596352,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$kTnfVgWeix-Bl-K1zGfP_B6izUzHin2EVDb5bxnXeWU"},
{"content":{"body":"Noam Rosenthal: I'm not sure, I suspect that in general we have to do more of that and less useParallelQueue","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: I'm not sure, I suspect that in general we have to do more of that and less useParallelQueue","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Noam Rosenthal: I'm not sure, I suspect that in general we have to do more of that and less useParallelQueue","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: I'm not sure, I suspect that in general we have to do more of that and less useParallelQueue","mimetype":"text/html"}]},"ts":1655199439734,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$QVYAWvtC1wUVNpsmJsnNa0CGoMlx9po5r5H52F_0TvM"},
{"content":{"body":"Noam Rosenthal: the effect could be that if you have to use a parallel queue you don't get automatic timing reporting?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: the effect could be that if you have to use a parallel queue you don't get automatic timing reporting?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Noam Rosenthal: the effect could be that if you have to use a parallel queue you don't get automatic timing reporting?","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: the effect could be that if you have to use a parallel queue you don't get automatic timing reporting?","mimetype":"text/html"}]},"ts":1655199471271,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$_hbNIxVE9I_2FOt7_Gu4T7Oad4w4AQwxfvHrwxDfP4w"},
{"content":{"body":"I suspect you're more familiar with callers at this point, I haven't reviewed those in quite a while","msgtype":"m.text","org.matrix.msc1767.text":"I suspect you're more familiar with callers at this point, I haven't reviewed those in quite a while"},"ts":1655199497134,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$LYBK4iYtgMJj9K3ATOBr68kXUBiJMdK7xKkx1oWvCzM"},
{"content":{"body":"annevk: only sync-xhr uses parallel queue from what I could gather. Also there are barely any callers of `processResponseEndOfBody` once we do the automatic reporting. From what I see it's OK to use the regular task destination and perform both operations","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: only sync-xhr uses parallel queue from what I could gather. Also there are barely any callers of <code>processResponseEndOfBody</code> once we do the automatic reporting. From what I see it's OK to use the regular task destination and perform both operations","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"annevk: only sync-xhr uses parallel queue from what I could gather. Also there are barely any callers of `processResponseEndOfBody` once we do the automatic reporting. From what I see it's OK to use the regular task destination and perform both operations","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: only sync-xhr uses parallel queue from what I could gather. Also there are barely any callers of <code>processResponseEndOfBody</code> once we do the automatic reporting. From what I see it's OK to use the regular task destination and perform both operations","mimetype":"text/html"}]},"ts":1655199564516,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$RDHrPqC3Wq-jpNXU-bAinNvIq1zP9YnaO1AeTVHj6wo"},
{"content":{"body":"That would be great","msgtype":"m.text","org.matrix.msc1767.text":"That would be great"},"ts":1655199596604,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$HoP9V9xwkaYxADqKiht5eUeIl2jz7nXRAboQ5GtDX04"},
{"content":{"body":"I'll make sure to take another look later today","msgtype":"m.text","org.matrix.msc1767.text":"I'll make sure to take another look later today"},"ts":1655199608873,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$t1Xn-IHNlOAiaSMzViT_fuQsI1Zu50RbTUJpGPGOpEA"},
{"content":{"body":"> <@annevk:matrix.org> I'll make sure to take another look later today\n\nThanks, I'll have the new revision up shortly","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$t1Xn-IHNlOAiaSMzViT_fuQsI1Zu50RbTUJpGPGOpEA?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br>I&#39;ll make sure to take another look later today</blockquote></mx-reply>Thanks, I'll have the new revision up shortly","m.relates_to":{"m.in_reply_to":{"event_id":"$t1Xn-IHNlOAiaSMzViT_fuQsI1Zu50RbTUJpGPGOpEA"}},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":"> <@annevk:matrix.org> I'll make sure to take another look later today\n\nThanks, I'll have the new revision up shortly","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$t1Xn-IHNlOAiaSMzViT_fuQsI1Zu50RbTUJpGPGOpEA?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br>I&#39;ll make sure to take another look later today</blockquote></mx-reply>Thanks, I'll have the new revision up shortly","mimetype":"text/html"}]},"ts":1655199640694,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$Ex61xM5Am1y0wbXp8qqWa8b0icazcbTQfmY5vhO-2i8"},
{"content":{"body":"Does anyone know folks from Github?","msgtype":"m.text","org.matrix.msc1767.text":"Does anyone know folks from Github?"},"ts":1655204555174,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$fPdok9LWjNGBodCr9AWBbcwCx_3Te48iWc1HXUazmMI"},
{"content":{"body":"It seems to be relying on very specific bfcache behavior https://bugzilla.mozilla.org/show_bug.cgi?id=1772739#c10","msgtype":"m.text","org.matrix.msc1767.text":"It seems to be relying on very specific bfcache behavior https://bugzilla.mozilla.org/show_bug.cgi?id=1772739#c10"},"ts":1655204622704,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$_-Gw2MuTMil9uEKgY7_6TQM2JgdgD-Ke6ohW8wnLoOc"},
{"content":{"body":"Luca Casonato: I saw you agreed to forbidding H/1 connections for upload streams, are you going to look at the full duplex issue still? I think we should solve that, although I suppose I could merge this PR and we'd leave the \"blocking\" label there for now; Yutaka Hirano thoughts?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@lucacasonato:matrix.org\">Luca Casonato</a>: I saw you agreed to forbidding H/1 connections for upload streams, are you going to look at the full duplex issue still? I think we should solve that, although I suppose I could merge this PR and we'd leave the &quot;blocking&quot; label there for now; <a href=\"https://matrix.to/#/@yhirano:matrix.org\">Yutaka Hirano</a> thoughts?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Luca Casonato: I saw you agreed to forbidding H/1 connections for upload streams, are you going to look at the full duplex issue still? I think we should solve that, although I suppose I could merge this PR and we'd leave the \"blocking\" label there for now; Yutaka Hirano thoughts?","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@lucacasonato:matrix.org\">Luca Casonato</a>: I saw you agreed to forbidding H/1 connections for upload streams, are you going to look at the full duplex issue still? I think we should solve that, although I suppose I could merge this PR and we'd leave the &quot;blocking&quot; label there for now; <a href=\"https://matrix.to/#/@yhirano:matrix.org\">Yutaka Hirano</a> thoughts?","mimetype":"text/html"}]},"ts":1655206534919,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$L4dlosHUkOAdghnASfunL2m4TG3pPQyl5byQvCzLuRs"},
{"content":{"body":"annevk: yeah that sounds good. I am at https://webengineshackfest.org/2022/ until tomorrow, and then at another conf on Thursday, so I wonâ€™t get to the full duplex streaming until Friday ","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: yeah that sounds good. I am at https://webengineshackfest.org/2022/ until tomorrow, and then at another conf on Thursday, so I wonâ€™t get to the full duplex streaming until Friday","msgtype":"m.text"},"ts":1655210124152,"senderName":"Luca Casonato","senderId":"@lucacasonato:matrix.org","id":"$v81ywCLfxCkFRtdvMEzRURFqP3toAG69BYYmVtmcAfM"},
{"content":{"body":"Ooh cool, still hope to be able to visit that one year; enjoy!","msgtype":"m.text","org.matrix.msc1767.text":"Ooh cool, still hope to be able to visit that one year; enjoy!"},"ts":1655211429411,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$f7j2CHqbCi_kVS5nY4JmeYF5iQr876dTcwd-1sgelYY"},
{"content":{"body":"> <@smaug:mozilla.org> It seems to be relying on very specific bfcache behavior https://bugzilla.mozilla.org/show_bug.cgi?id=1772739#c10\n\nRelated, https://github.com/whatwg/html/issues/7253","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$_-Gw2MuTMil9uEKgY7_6TQM2JgdgD-Ke6ohW8wnLoOc?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@smaug:mozilla.org\">@smaug:mozilla.org</a><br>It seems to be relying on very specific bfcache behavior https://bugzilla.mozilla.org/show_bug.cgi?id=1772739#c10</blockquote></mx-reply>Related, https://github.com/whatwg/html/issues/7253","m.relates_to":{"m.in_reply_to":{"event_id":"$_-Gw2MuTMil9uEKgY7_6TQM2JgdgD-Ke6ohW8wnLoOc"}},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":"> <@smaug:mozilla.org> It seems to be relying on very specific bfcache behavior https://bugzilla.mozilla.org/show_bug.cgi?id=1772739#c10\n\nRelated, https://github.com/whatwg/html/issues/7253","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$_-Gw2MuTMil9uEKgY7_6TQM2JgdgD-Ke6ohW8wnLoOc?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@smaug:mozilla.org\">@smaug:mozilla.org</a><br>It seems to be relying on very specific bfcache behavior https://bugzilla.mozilla.org/show_bug.cgi?id=1772739#c10</blockquote></mx-reply>Related, https://github.com/whatwg/html/issues/7253","mimetype":"text/html"}]},"ts":1655214214159,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$GEU4MtdHNtoHYhvLcYJgvB1Q7nMW7BBLjpxj_woZYUg"},
{"content":{"body":"> <@annevk:matrix.org> Ooh cool, still hope to be able to visit that one year; enjoy!\n\nThanks ðŸ˜Š ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs%3Amatrix.org/%24f7j2CHqbCi_kVS5nY4JmeYF5iQr876dTcwd-1sgelYY\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br>Ooh cool, still hope to be able to visit that one year; enjoy!</blockquote></mx-reply>Thanks ðŸ˜Š","m.relates_to":{"m.in_reply_to":{"event_id":"$f7j2CHqbCi_kVS5nY4JmeYF5iQr876dTcwd-1sgelYY"}},"msgtype":"m.text"},"ts":1655220581786,"senderName":"Luca Casonato","senderId":"@lucacasonato:matrix.org","id":"$LzR1eJfKIlX765i76og5bnPCnKLcghK2Ys3f07zPKC0"},
{"content":{"body":"Domenic: Thinking about my next partitioning PR, I think we need to populate environment's top-level origin for SharedWorker.  In implementation, though, we only populate the origin with the top-level site.  Its the only consistent value to use when top-level site partitioning is in use.  (We don't want different values depending on which document first created the worker.)  Does that sound like a reasonable approach to take in the spec as well?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: Thinking about my next partitioning PR, I think we need to populate environment's top-level origin for SharedWorker.  In implementation, though, we only populate the origin with the top-level site.  Its the only consistent value to use when top-level site partitioning is in use.  (We don't want different values depending on which document first created the worker.)  Does that sound like a reasonable approach to take in the spec as well?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Domenic: Thinking about my next partitioning PR, I think we need to populate environment's top-level origin for SharedWorker.  In implementation, though, we only populate the origin with the top-level site.  Its the only consistent value to use when top-level site partitioning is in use.  (We don't want different values depending on which document first created the worker.)  Does that sound like a reasonable approach to take in the spec as well?","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: Thinking about my next partitioning PR, I think we need to populate environment's top-level origin for SharedWorker.  In implementation, though, we only populate the origin with the top-level site.  Its the only consistent value to use when top-level site partitioning is in use.  (We don't want different values depending on which document first created the worker.)  Does that sound like a reasonable approach to take in the spec as well?","mimetype":"text/html"}]},"ts":1655230751381,"senderName":"wanderview","senderId":"@wanderview:matrix.org","id":"$PLo62m0ZASI7TGsmsdozd6_w3f91I-H4Rq5rO1Zjd3A"},
{"content":{"body":"wanderview: I *think* so. I'd prefer to get annevk's feedback, but from what I can tell from e.g. https://github.com/whatwg/html/pull/5491#issuecomment-638989208 and related comments, we have so far punted on defining top-level origin for workers until storage partitioning was in place, and we knew that we would eventually need it to ensure that e.g. network caches work well. Or at least, we would need enough info to feed into \"obtain a storage key\" / \"obtain a storage key for non-storage purposes\". Which I guess is just the site.\n\nWhat's unclear to me is whether this means \"top-level origin\" is not a good primitive, and if so what we would do about it. But e.g. it is used in origin form for window-specific things like showPicker() or COOP enforcement. So maybe the best we can do is say that it's sometimes an origin and sometimes a scheme-and-host, and maybe rename it slightly to reflect that?","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@wanderview:matrix.org\">wanderview</a>: I <em>think</em> so. I'd prefer to get <a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>'s feedback, but from what I can tell from e.g. https://github.com/whatwg/html/pull/5491#issuecomment-638989208 and related comments, we have so far punted on defining top-level origin for workers until storage partitioning was in place, and we knew that we would eventually need it to ensure that e.g. network caches work well. Or at least, we would need enough info to feed into &quot;obtain a storage key&quot; / &quot;obtain a storage key for non-storage purposes&quot;. Which I guess is just the site.</p>\n<p>What's unclear to me is whether this means &quot;top-level origin&quot; is not a good primitive, and if so what we would do about it. But e.g. it is used in origin form for window-specific things like showPicker() or COOP enforcement. So maybe the best we can do is say that it's sometimes an origin and sometimes a scheme-and-host, and maybe rename it slightly to reflect that?</p>\n","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"wanderview: I *think* so. I'd prefer to get annevk's feedback, but from what I can tell from e.g. https://github.com/whatwg/html/pull/5491#issuecomment-638989208 and related comments, we have so far punted on defining top-level origin for workers until storage partitioning was in place, and we knew that we would eventually need it to ensure that e.g. network caches work well. Or at least, we would need enough info to feed into \"obtain a storage key\" / \"obtain a storage key for non-storage purposes\". Which I guess is just the site.\n\nWhat's unclear to me is whether this means \"top-level origin\" is not a good primitive, and if so what we would do about it. But e.g. it is used in origin form for window-specific things like showPicker() or COOP enforcement. So maybe the best we can do is say that it's sometimes an origin and sometimes a scheme-and-host, and maybe rename it slightly to reflect that?","mimetype":"text/plain"},{"body":"<p><a href=\"https://matrix.to/#/@wanderview:matrix.org\">wanderview</a>: I <em>think</em> so. I'd prefer to get <a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>'s feedback, but from what I can tell from e.g. https://github.com/whatwg/html/pull/5491#issuecomment-638989208 and related comments, we have so far punted on defining top-level origin for workers until storage partitioning was in place, and we knew that we would eventually need it to ensure that e.g. network caches work well. Or at least, we would need enough info to feed into &quot;obtain a storage key&quot; / &quot;obtain a storage key for non-storage purposes&quot;. Which I guess is just the site.</p>\n<p>What's unclear to me is whether this means &quot;top-level origin&quot; is not a good primitive, and if so what we would do about it. But e.g. it is used in origin form for window-specific things like showPicker() or COOP enforcement. So maybe the best we can do is say that it's sometimes an origin and sometimes a scheme-and-host, and maybe rename it slightly to reflect that?</p>\n","mimetype":"text/html"}]},"ts":1655233057246,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$NowjHqV-utcSuamhvVSfurXbjzsMdr9Gx6m0cYDg1OI"}
]