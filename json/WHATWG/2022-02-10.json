[
{"content":{"body":"annevk: with the fetch API, if a response has no body — for example, for a 204 response — will `response.body` be null? context: https://github.com/mdn/content/issues/12862#issuecomment-1034609833 ","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: with the fetch API, if a response has no body — for example, for a 204 response — will <code>response.body</code> be null? context: https://github.com/mdn/content/issues/12862#issuecomment-1034609833","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"annevk: with the fetch API, if a response has no body — for example, for a 204 response — will `response.body` be null? context: https://github.com/mdn/content/issues/12862#issuecomment-1034609833 ","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: with the fetch API, if a response has no body — for example, for a 204 response — will <code>response.body</code> be null? context: https://github.com/mdn/content/issues/12862#issuecomment-1034609833","mimetype":"text/html"}]},"ts":1644486125670,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$UGMNClDw0tfDkdtVJZ1xnEqRK-aXV0WNLUsJI0NikYQ"},
{"content":{"body":"sideshowbarker: yeah, it would make sense for it to be null in that case","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sideshowbarker:mozilla.org\">sideshowbarker</a>: yeah, it would make sense for it to be null in that case","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"sideshowbarker: yeah, it would make sense for it to be null in that case","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@sideshowbarker:mozilla.org\">sideshowbarker</a>: yeah, it would make sense for it to be null in that case","mimetype":"text/html"}]},"ts":1644486320312,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$jbPhY5USv7IHAvnI6M3YcF40_C0V-roDzGXWZBfjjSg"},
{"content":{"body":"(and the spec allows for it to return null)","msgtype":"m.text","org.matrix.msc1767.text":"(and the spec allows for it to return null)"},"ts":1644486331156,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$sU4cYBYFkJYCNm0kHvYfCon_oC3d2abLw-EWMjscJFQ"},
{"content":{"body":"> <@annevk:mozilla.org> sideshowbarker: yeah, it would make sense for it to be null in that case\n\nOK, thanks — though in the case of the response from https://httpstat.us/204 it does seem to end up being a `ReadableStream` and not null. But maybe that’s due to them sending a 0-byte response? (if that’s actually possible)","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$jbPhY5USv7IHAvnI6M3YcF40_C0V-roDzGXWZBfjjSg?via=mozilla.org&via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:mozilla.org\">@annevk:mozilla.org</a><br><a href=\"https://matrix.to/#/@sideshowbarker:mozilla.org\">sideshowbarker</a>: yeah, it would make sense for it to be null in that case</blockquote></mx-reply>OK, thanks — though in the case of the response from https://httpstat.us/204 it does seem to end up being a <code>ReadableStream</code> and not null. But maybe that’s due to them sending a 0-byte response? (if that’s actually possible)","m.relates_to":{"m.in_reply_to":{"event_id":"$jbPhY5USv7IHAvnI6M3YcF40_C0V-roDzGXWZBfjjSg"}},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":"> <@annevk:mozilla.org> sideshowbarker: yeah, it would make sense for it to be null in that case\n\nOK, thanks — though in the case of the response from https://httpstat.us/204 it does seem to end up being a `ReadableStream` and not null. But maybe that’s due to them sending a 0-byte response? (if that’s actually possible)","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$jbPhY5USv7IHAvnI6M3YcF40_C0V-roDzGXWZBfjjSg?via=mozilla.org&via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:mozilla.org\">@annevk:mozilla.org</a><br><a href=\"https://matrix.to/#/@sideshowbarker:mozilla.org\">sideshowbarker</a>: yeah, it would make sense for it to be null in that case</blockquote></mx-reply>OK, thanks — though in the case of the response from https://httpstat.us/204 it does seem to end up being a <code>ReadableStream</code> and not null. But maybe that’s due to them sending a 0-byte response? (if that’s actually possible)","mimetype":"text/html"}]},"ts":1644486468659,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$ug_d3YB5_9XyGN_2cKozlJMmUjldsQ0tjAJcUfDkOKg"},
{"content":{"body":"sideshowbarker: that would be a browser bug per spec...","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sideshowbarker:mozilla.org\">sideshowbarker</a>: that would be a browser bug per spec...","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"sideshowbarker: that would be a browser bug per spec...","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@sideshowbarker:mozilla.org\">sideshowbarker</a>: that would be a browser bug per spec...","mimetype":"text/html"}]},"ts":1644486521733,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$QIMFKWsnA-Bprsx4Fg4SJvutmjC-a2QnTDJWQIHBXNE"},
{"content":{"body":"sideshowbarker: spec special cases a couple of response codes","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sideshowbarker:mozilla.org\">sideshowbarker</a>: spec special cases a couple of response codes","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"sideshowbarker: spec special cases a couple of response codes","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@sideshowbarker:mozilla.org\">sideshowbarker</a>: spec special cases a couple of response codes","mimetype":"text/html"}]},"ts":1644486540944,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$ZfOQjMEYijjXd9EClckr2pzXm58LbKiak3q8ERBsWVY"},
{"content":{"body":"ah","msgtype":"m.text","org.matrix.msc1767.text":"ah"},"ts":1644486552184,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$R-Cjt29BafJpR-MrSTHHi9-fBw34VhAdkNMzGO_PZRw"},
{"content":{"body":"looks back at the spec","msgtype":"m.emote","org.matrix.msc1767.text":"looks back at the spec"},"ts":1644486560973,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$jq6LFllCbTC9LMpZiwXde0E6hEhbSemeAbI3oEo57AM"},
{"content":{"body":"hmm I’m not finding anything about special-casing in the spec that would allow an empty response to ever be a `ReadableStream` rather than null","format":"org.matrix.custom.html","formatted_body":"hmm I’m not finding anything about special-casing in the spec that would allow an empty response to ever be a <code>ReadableStream</code> rather than null","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"hmm I’m not finding anything about special-casing in the spec that would allow an empty response to ever be a `ReadableStream` rather than null","mimetype":"text/plain"},{"body":"hmm I’m not finding anything about special-casing in the spec that would allow an empty response to ever be a <code>ReadableStream</code> rather than null","mimetype":"text/html"}]},"ts":1644486799898,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$_d0R7gUuQx-QSMrBf8ntl07XSJteiigD6dxTGvYrw5c"},
{"content":{"body":"https://fetch.spec.whatwg.org/#ref-for-null-body-status","msgtype":"m.text"},"ts":1644486843040,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$P7CKOfx4adnP7jg_Tm45vfFcFprdQ0sdeU8X-S_Bcxs"},
{"content":{"body":"and even testing with a HEAD request, I still get a `ReadableStream`","format":"org.matrix.custom.html","formatted_body":"and even testing with a HEAD request, I still get a <code>ReadableStream</code>","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"and even testing with a HEAD request, I still get a `ReadableStream`","mimetype":"text/plain"},{"body":"and even testing with a HEAD request, I still get a <code>ReadableStream</code>","mimetype":"text/html"}]},"ts":1644486859543,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$FW6nwLJfiCkSQ_731AZ9n2QrrS1mcGd5u3qDBWK_sLU"},
{"content":{"body":"```js\nfetch(\"https://httpstat.us/200\", { method: \"HEAD\" }).then(response => console.log(response.body))\n```","format":"org.matrix.custom.html","formatted_body":"<pre><code class=\"language-js\">fetch(&quot;https://httpstat.us/200&quot;, { method: &quot;HEAD&quot; }).then(response =&gt; console.log(response.body))\n</code></pre>\n","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"```js\nfetch(\"https://httpstat.us/200\", { method: \"HEAD\" }).then(response => console.log(response.body))\n```","mimetype":"text/plain"},{"body":"<pre><code class=\"language-js\">fetch(&quot;https://httpstat.us/200&quot;, { method: &quot;HEAD&quot; }).then(response =&gt; console.log(response.body))\n</code></pre>\n","mimetype":"text/html"}]},"ts":1644486873744,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$6CXGDcfGEIf4CTnTs-DdUBXCAzPh5Y8FDaee488sC5w"},
{"content":{"body":"```js\nfetch(\"https://httpstat.us/204\").then(response => console.log(response.body))\n```","format":"org.matrix.custom.html","formatted_body":"<pre><code class=\"language-js\">fetch(&quot;https://httpstat.us/204&quot;).then(response =&gt; console.log(response.body))\n</code></pre>\n","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"```js\nfetch(\"https://httpstat.us/204\").then(response => console.log(response.body))\n```","mimetype":"text/plain"},{"body":"<pre><code class=\"language-js\">fetch(&quot;https://httpstat.us/204&quot;).then(response =&gt; console.log(response.body))\n</code></pre>\n","mimetype":"text/html"}]},"ts":1644486892936,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$VAOWsROSYf1go1uxqWxoBswlV3Dq_ioQIIKjYC25ipQ"},
{"content":{"body":"> <@abotella:igalia.com> https://fetch.spec.whatwg.org/#ref-for-null-body-status\n\nthanks, looking now","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$P7CKOfx4adnP7jg_Tm45vfFcFprdQ0sdeU8X-S_Bcxs?via=mozilla.org&via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@abotella:igalia.com\">@abotella:igalia.com</a><br>https://fetch.spec.whatwg.org/#ref-for-null-body-status</blockquote></mx-reply>thanks, looking now","m.relates_to":{"m.in_reply_to":{"event_id":"$P7CKOfx4adnP7jg_Tm45vfFcFprdQ0sdeU8X-S_Bcxs"}},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":"> <@abotella:igalia.com> https://fetch.spec.whatwg.org/#ref-for-null-body-status\n\nthanks, looking now","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$P7CKOfx4adnP7jg_Tm45vfFcFprdQ0sdeU8X-S_Bcxs?via=mozilla.org&via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@abotella:igalia.com\">@abotella:igalia.com</a><br>https://fetch.spec.whatwg.org/#ref-for-null-body-status</blockquote></mx-reply>thanks, looking now","mimetype":"text/html"}]},"ts":1644486906499,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$RWEk4r7lVHMkYCEENGeg0WfZThh5u5zMV0n6kdohi8E"},
{"content":{"body":"That's a browser bug","msgtype":"m.text","org.matrix.msc1767.text":"That's a browser bug"},"ts":1644486908080,"senderName":"Luca Casonato","senderId":"@lucacasonato:matrix.org","id":"$JFNHusWEYFIyQBOOdboqmoE2bswE6Z7tY4TpRNPA2jQ"},
{"content":{"body":"OK","msgtype":"m.text","org.matrix.msc1767.text":"OK"},"ts":1644486923772,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$8-a4lnk5GoS1te2ei9HHiwTQRwHbfrDD-ILCK6tC5v4"},
{"content":{"body":"Deno does this correctly: \n```js\n/m/s/P/g/denoland ❯❯❯ deno\nDeno 1.18.2\nexit using ctrl+d or close()\n> fetch(\"https://httpstat.us/200\", { method: \"HEAD\" }).then(response => console.log(response.body))\n\nPromise { <pending> }\n> null\n> fetch(\"https://httpstat.us/204\").then(response => console.log(response.body))\n\nPromise { <pending> }\n> null\n```","format":"org.matrix.custom.html","formatted_body":"<p>Deno does this correctly:</p>\n<pre><code class=\"language-js\">/m/s/P/g/denoland ❯❯❯ deno\nDeno 1.18.2\nexit using ctrl+d or close()\n&gt; fetch(&quot;https://httpstat.us/200&quot;, { method: &quot;HEAD&quot; }).then(response =&gt; console.log(response.body))\n\nPromise { &lt;pending&gt; }\n&gt; null\n&gt; fetch(&quot;https://httpstat.us/204&quot;).then(response =&gt; console.log(response.body))\n\nPromise { &lt;pending&gt; }\n&gt; null\n</code></pre>\n","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Deno does this correctly: \n```js\n/m/s/P/g/denoland ❯❯❯ deno\nDeno 1.18.2\nexit using ctrl+d or close()\n> fetch(\"https://httpstat.us/200\", { method: \"HEAD\" }).then(response => console.log(response.body))\n\nPromise { <pending> }\n> null\n> fetch(\"https://httpstat.us/204\").then(response => console.log(response.body))\n\nPromise { <pending> }\n> null\n```","mimetype":"text/plain"},{"body":"<p>Deno does this correctly:</p>\n<pre><code class=\"language-js\">/m/s/P/g/denoland ❯❯❯ deno\nDeno 1.18.2\nexit using ctrl+d or close()\n&gt; fetch(&quot;https://httpstat.us/200&quot;, { method: &quot;HEAD&quot; }).then(response =&gt; console.log(response.body))\n\nPromise { &lt;pending&gt; }\n&gt; null\n&gt; fetch(&quot;https://httpstat.us/204&quot;).then(response =&gt; console.log(response.body))\n\nPromise { &lt;pending&gt; }\n&gt; null\n</code></pre>\n","mimetype":"text/html"}]},"ts":1644486938276,"senderName":"Luca Casonato","senderId":"@lucacasonato:matrix.org","id":"$PHl32NKdK-awpINObMjA5AgA2QVGJBSIJsAVMyIS1Qo"}
]