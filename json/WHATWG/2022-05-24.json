[
{"content":{"body":"Andreu Botella: if you do something like `class CustomError extends Error { name = \"CustomError\" }` the `name` won't get preserved (and neither will the subclass)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@abotella:igalia.com\">Andreu Botella</a>: if you do something like <code>class CustomError extends Error { name = &quot;CustomError&quot; }</code> the <code>name</code> won't get preserved (and neither will the subclass)","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Andreu Botella: if you do something like `class CustomError extends Error { name = \"CustomError\" }` the `name` won't get preserved (and neither will the subclass)","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@abotella:igalia.com\">Andreu Botella</a>: if you do something like <code>class CustomError extends Error { name = &quot;CustomError&quot; }</code> the <code>name</code> won't get preserved (and neither will the subclass)","mimetype":"text/html"}]},"ts":1653385810383,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$Lrc0CeWlA7ybreTw0GnYJeWdJmcbsEXbWgk7xgybhTg"},
{"content":{"body":"Perhaps that's not a concern though. If they don't end up doing anything like serialization/deserialization I won't care too much.","msgtype":"m.text","org.matrix.msc1767.text":"Perhaps that's not a concern though. If they don't end up doing anything like serialization/deserialization I won't care too much."},"ts":1653385902636,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$LHawPq9m93Y07IVegHv8lq7rYA8jBQ_tjPH-SSAItyM"},
{"content":{"body":"annevk: re fetch controller, the initial plan was to have it reported from within fetch, but then we wanted to allow callers to be in charge of when reporting happens, whether it happens at all, and to affect the `response end` time. The change of behavior would be mainly for scripts, because they won't be able to report timing as if it was a network error after the response has arrived, but maybe that's OK","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: re fetch controller, the initial plan was to have it reported from within fetch, but then we wanted to allow callers to be in charge of when reporting happens, whether it happens at all, and to affect the <code>response end</code> time. The change of behavior would be mainly for scripts, because they won't be able to report timing as if it was a network error after the response has arrived, but maybe that's OK","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"annevk: re fetch controller, the initial plan was to have it reported from within fetch, but then we wanted to allow callers to be in charge of when reporting happens, whether it happens at all, and to affect the `response end` time. The change of behavior would be mainly for scripts, because they won't be able to report timing as if it was a network error after the response has arrived, but maybe that's OK","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: re fetch controller, the initial plan was to have it reported from within fetch, but then we wanted to allow callers to be in charge of when reporting happens, whether it happens at all, and to affect the <code>response end</code> time. The change of behavior would be mainly for scripts, because they won't be able to report timing as if it was a network error after the response has arrived, but maybe that's OK","mimetype":"text/html"}]},"ts":1653389488178,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$oU0fdNHi48bUv4rbugIWXkB3rnh5WGyNVOrnbqiEkhM"},
{"content":{"body":"Noam Rosenthal: yeah, I guess I'm wondering whether we now know enough to invert control, but I would be okay with keeping the existing setup","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: yeah, I guess I'm wondering whether we now know enough to invert control, but I would be okay with keeping the existing setup","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Noam Rosenthal: yeah, I guess I'm wondering whether we now know enough to invert control, but I would be okay with keeping the existing setup","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: yeah, I guess I'm wondering whether we now know enough to invert control, but I would be okay with keeping the existing setup","mimetype":"text/html"}]},"ts":1653394113300,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$P3LE5Vm2PcbhvftTd16zToDM7HY5M8EiI_h_mKbKAh8"},
{"content":{"body":"Noam Rosenthal: if we keep the existing setup, perhaps we shouldn't rename it to \"conclude\" though","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: if we keep the existing setup, perhaps we shouldn't rename it to &quot;conclude&quot; though","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Noam Rosenthal: if we keep the existing setup, perhaps we shouldn't rename it to \"conclude\" though","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: if we keep the existing setup, perhaps we shouldn't rename it to &quot;conclude&quot; though","mimetype":"text/html"}]},"ts":1653394126732,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$NrDW4zqwpNBg1EsdqDLJ2C_5nRqULO4D8B6Hw9tuXlI"},
{"content":{"body":"Noam Rosenthal: and just refactor where we keep some of the structs","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: and just refactor where we keep some of the structs","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Noam Rosenthal: and just refactor where we keep some of the structs","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: and just refactor where we keep some of the structs","mimetype":"text/html"}]},"ts":1653394146550,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$6XSmUozhX53bPq2t-BkxzJeXVgxHLtFsvgsiIvnc56g"},
{"content":{"body":"annevk: it doesn't really finalize anything, so perhaps \"report timing\" is enough","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: it doesn't really finalize anything, so perhaps &quot;report timing&quot; is enough","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"annevk: it doesn't really finalize anything, so perhaps \"report timing\" is enough","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: it doesn't really finalize anything, so perhaps &quot;report timing&quot; is enough","mimetype":"text/html"}]},"ts":1653394160997,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$RoWLl6Hf8kUIJr9qVu2t_FYXBOj03hPtBHOA7gQg4LE"},
{"content":{"body":"annevk: What does it mean \"some of the structs\"?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: What does it mean &quot;some of the structs&quot;?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"annevk: What does it mean \"some of the structs\"?","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: What does it mean &quot;some of the structs&quot;?","mimetype":"text/html"}]},"ts":1653394199587,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$9dR8p-_IjasylfN2pGzZf_gUXrVzbWIDjJyFrYF-tDM"},
{"content":{"body":"Noam Rosenthal: moving timing info from response to controller and creating body info","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: moving timing info from response to controller and creating body info","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Noam Rosenthal: moving timing info from response to controller and creating body info","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: moving timing info from response to controller and creating body info","mimetype":"text/html"}]},"ts":1653394268562,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$zc5bcKYI0Q_wjsOyihHMMptad29RnbnpiriXBD1g0vM"},
{"content":{"body":"annevk: one thing that would simplify the HTML PR a lot is if we allowed inversion of control as a default but allowed to override it like in the case of CSS and scripts","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: one thing that would simplify the HTML PR a lot is if we allowed inversion of control as a default but allowed to override it like in the case of CSS and scripts","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"annevk: one thing that would simplify the HTML PR a lot is if we allowed inversion of control as a default but allowed to override it like in the case of CSS and scripts","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: one thing that would simplify the HTML PR a lot is if we allowed inversion of control as a default but allowed to override it like in the case of CSS and scripts","mimetype":"text/html"}]},"ts":1653394308375,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$DIWCcL3hp-gtjBR6rODcSwJCe9BHFmqZRfPSfskY_tQ"},
{"content":{"body":"like, pass on an initiator type and an auto-report boolean","msgtype":"m.text","org.matrix.msc1767.text":"like, pass on an initiator type and an auto-report boolean"},"ts":1653394364637,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$8cwAk1aHGWGFEqp3Uyt0BNVFkkkl4pw4t8bFK9mNzuQ"},
{"content":{"body":"So 95% of callers would not need to do extra work reporting stuff","msgtype":"m.text","org.matrix.msc1767.text":"So 95% of callers would not need to do extra work reporting stuff"},"ts":1653394389381,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$TfsLSxPPXQePBFX0j9dMcflTKvC54AhhmfthCFOO1qs"},
{"content":{"body":"... anyway, I updated the PR based on this conversation.","msgtype":"m.text","org.matrix.msc1767.text":"... anyway, I updated the PR based on this conversation."},"ts":1653394837432,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$menBQnOgiA6TuFiZAfHZo-VkRdXLwlbUzMsE0DBEOKc"},
{"content":{"body":"Noam Rosenthal: yeah that would make sense; I'd also be curious to learn why CSS and scripts cannot use it, but probably best discussed in a new issue then","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: yeah that would make sense; I'd also be curious to learn why CSS and scripts cannot use it, but probably best discussed in a new issue then","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Noam Rosenthal: yeah that would make sense; I'd also be curious to learn why CSS and scripts cannot use it, but probably best discussed in a new issue then","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: yeah that would make sense; I'd also be curious to learn why CSS and scripts cannot use it, but probably best discussed in a new issue then","mimetype":"text/html"}]},"ts":1653394953494,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$s0CnmaRQNji_PvV_00WxsQvWgYbVxDbpqsNR64DEQFM"},
{"content":{"body":"annevk: scripts report an error for non-script mime types ","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: scripts report an error for non-script mime types","msgtype":"m.text"},"ts":1653398634094,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$8LGeStp3GRNSNVlK5_AOXh1ff67pkodOeogcmQskqWU"},
{"content":{"body":"Noam Rosenthal: hmm, some of those checks happen before the script element so it wouldn't be able to distinguish those from a network error","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: hmm, some of those checks happen before the script element so it wouldn't be able to distinguish those from a network error","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Noam Rosenthal: hmm, some of those checks happen before the script element so it wouldn't be able to distinguish those from a network error","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: hmm, some of those checks happen before the script element so it wouldn't be able to distinguish those from a network error","mimetype":"text/html"}]},"ts":1653398704109,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$aDZmYrwBkRju-b5-3SYyyhepKwKV1NbONZE3rwEr-k4"},
{"content":{"body":"Noam Rosenthal: and classic scripts don't do that, they accept most types","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: and classic scripts don't do that, they accept most types","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Noam Rosenthal: and classic scripts don't do that, they accept most types","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: and classic scripts don't do that, they accept most types","mimetype":"text/html"}]},"ts":1653398721368,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$IfnXsY1qj3TjHHHvpCsxcyGied9l1ZqXmHvw1wwok9c"},
{"content":{"body":"Noam Rosenthal: anyway, I gotta go for a bit (not sure if I will have time to look into this more today); could you create an issue to track this? (https://fetch.spec.whatwg.org/#should-response-to-request-be-blocked-due-to-mime-type? is the algorithm that's part of fetch that ends up blocking certain responses on the network layer which the caller would be unaware of.)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: anyway, I gotta go for a bit (not sure if I will have time to look into this more today); could you create an issue to track this? (https://fetch.spec.whatwg.org/#should-response-to-request-be-blocked-due-to-mime-type? is the algorithm that's part of fetch that ends up blocking certain responses on the network layer which the caller would be unaware of.)","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Noam Rosenthal: anyway, I gotta go for a bit (not sure if I will have time to look into this more today); could you create an issue to track this? (https://fetch.spec.whatwg.org/#should-response-to-request-be-blocked-due-to-mime-type? is the algorithm that's part of fetch that ends up blocking certain responses on the network layer which the caller would be unaware of.)","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: anyway, I gotta go for a bit (not sure if I will have time to look into this more today); could you create an issue to track this? (https://fetch.spec.whatwg.org/#should-response-to-request-be-blocked-due-to-mime-type? is the algorithm that's part of fetch that ends up blocking certain responses on the network layer which the caller would be unaware of.)","mimetype":"text/html"}]},"ts":1653398828267,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$FVqHVVP1oA48GRa0afVlBNPVFEIlnbrFQV0RcAGQoqg"},
{"content":{"body":"> <@annevk:mozilla.org> Noam Rosenthal: hmm, some of those checks happen before the script element so it wouldn't be able to distinguish those from a network error\n\nThanks! For CSS I'm sure we can manage, for scripts I'll investigate. I remember that in some areas HTML sets a network error","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$aDZmYrwBkRju-b5-3SYyyhepKwKV1NbONZE3rwEr-k4?via=mozilla.org&via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:mozilla.org\">@annevk:mozilla.org</a><br><a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: hmm, some of those checks happen before the script element so it wouldn't be able to distinguish those from a network error</blockquote></mx-reply>Thanks! For CSS I'm sure we can manage, for scripts I'll investigate. I remember that in some areas HTML sets a network error","m.relates_to":{"m.in_reply_to":{"event_id":"$aDZmYrwBkRju-b5-3SYyyhepKwKV1NbONZE3rwEr-k4"}},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":"> <@annevk:mozilla.org> Noam Rosenthal: hmm, some of those checks happen before the script element so it wouldn't be able to distinguish those from a network error\n\nThanks! For CSS I'm sure we can manage, for scripts I'll investigate. I remember that in some areas HTML sets a network error","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$aDZmYrwBkRju-b5-3SYyyhepKwKV1NbONZE3rwEr-k4?via=mozilla.org&via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:mozilla.org\">@annevk:mozilla.org</a><br><a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: hmm, some of those checks happen before the script element so it wouldn't be able to distinguish those from a network error</blockquote></mx-reply>Thanks! For CSS I'm sure we can manage, for scripts I'll investigate. I remember that in some areas HTML sets a network error","mimetype":"text/html"}]},"ts":1653399297071,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$KadtCCOobOBryNoqRs4GsfejLY4PnXC5FhY5BZ4URaI"}
]