[
{"content":{"body":"Help wanted / Good first issue: For anybody interested in contributing to the HTML standard, https://github.com/whatwg/html/issues/1102 might be a good issue you could resolve, by writing a spec patch for it with a modest amount of effort — perhaps mostly by just porting over the existing `<input capture>` spec text from https://w3c.github.io/html-media-capture/\n","format":"org.matrix.custom.html","formatted_body":"Help wanted / Good first issue: For anybody interested in contributing to the HTML standard, https://github.com/whatwg/html/issues/1102 might be a good issue you could resolve, by writing a spec patch for it with a modest amount of effort — perhaps mostly by just porting over the existing <code>&lt;input capture&gt;</code> spec text from https://w3c.github.io/html-media-capture/","msgtype":"m.text"},"ts":1688603825283,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$VRY77lKHaLjmjeFfjVDGk54Pa4CwxF17sEH5lcD2wC8"},
{"content":{"body":"I'm confused about why you cannot directly download the resource (file) on the local machine using JS, but you can do it with JS if you fetch the resource, construct the a element with the fetched resource as URL and then click it using JS?","msgtype":"m.text"},"ts":1688634096187,"senderName":"vrafaeli","senderId":"@vrafaeli:matrix.org","id":"$qwUJh70Ox3bLmXJRVaOBw9jYHrM8SZrD2Za2VPSWYeA"},
{"content":{"body":"Is there a spec issue about upstreaming https://wicg.github.io/document-policy/#integrations ?","msgtype":"m.text"},"ts":1688635615782,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$g9QScVbecAhOCKNZNEeMMevsmPAqQfedG_VDYbvrspw"},
{"content":{"body":"zcorpan: I don't think there is one against HTML","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: I don't think there is one against HTML","msgtype":"m.text"},"ts":1688646713649,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$bv-pCFuofkRuU3lQJgPW6P6xNDsIYbTMtEn2-kCRgi4"},
{"content":{"body":"annevk: ok","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: ok","msgtype":"m.text"},"ts":1688646730718,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$dj5amMwPivFToMuQyTr2zINN_pyA7MXPNhJBIaOFHXA"},
{"content":{"body":"vrafaeli: example? I thought `<a download>.click()` would generally work. Seems weird if it performs a same-origin check ahead of time given redirects.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@vrafaeli:matrix.org\">vrafaeli</a>: example? I thought <code>&lt;a download&gt;.click()</code> would generally work. Seems weird if it performs a same-origin check ahead of time given redirects.","msgtype":"m.text"},"ts":1688648254326,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$BfxRzJyDZFwvkr3E33Uk6MyERy9_NhHGu1kqz4U57UA"},
{"content":{"body":"I initially thought https://github.com/whatwg/html/issues/9491 was about making `/>` conforming on all tags but also have it continue to be meaningless","format":"org.matrix.custom.html","formatted_body":"I initially thought https://github.com/whatwg/html/issues/9491 was about making <code>/&gt;</code> conforming on all tags but also have it continue to be meaningless","msgtype":"m.text"},"ts":1688649511899,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$9Z797hRC_ZGkzNBDRbeQB_CRjIR_nL2w_fVaezzOysI"},
{"content":{"body":"So you can write `<div />yolo</div>`  and the HTML checker won't yell","format":"org.matrix.custom.html","formatted_body":"So you can write <code>&lt;div /&gt;yolo&lt;/div&gt;</code>  and the HTML checker won't yell","msgtype":"m.text"},"ts":1688649551958,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$qWJfaUl1sba9lbIzDS0F7N4FnDJhZ-gPG6FhNX5xNBU"},
{"content":{"body":"Anyway, if we do a flag it should just be \"XML5\"","msgtype":"m.text"},"ts":1688649612335,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$dfTNXyuPsh5A4EE0Ud01xml54yXJM-kaST6ztAh_G1c"},
{"content":{"body":" * Anyway, if we do a flag it should just be \"XML5\" (and the flag is `text/xml`)","format":"org.matrix.custom.html","formatted_body":" * Anyway, if we do a flag it should just be \"XML5\" (and the flag is <code>text/xml</code>)","m.new_content":{"body":"Anyway, if we do a flag it should just be \"XML5\" (and the flag is `text/xml`)","format":"org.matrix.custom.html","formatted_body":"Anyway, if we do a flag it should just be \"XML5\" (and the flag is <code>text/xml</code>)","msgtype":"m.text"},"m.relates_to":{"event_id":"$dfTNXyuPsh5A4EE0Ud01xml54yXJM-kaST6ztAh_G1c","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1688649640427,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$w_H8hq-gRKya0HNDZi4NPpDruruQx840hWAFjydGZdA"},
{"content":{"body":"> <@annevk:matrix.org> vrafaeli: example? I thought `<a download>.click()` would generally work. Seems weird if it performs a same-origin check ahead of time given redirects.\n\nhttps://codesandbox.io/s/interesting-nightingale-vkpy9s?file=/src/index.js\n\nI use a plugin to inject response header \"content-disposition: attachment\".\n\n\nI was expecting that after the response has been received the browser would initialte a download to the local machine.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$BfxRzJyDZFwvkr3E33Uk6MyERy9_NhHGu1kqz4U57UA?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@vrafaeli:matrix.org\">vrafaeli</a>: example? I thought <code>&lt;a download&gt;.click()</code> would generally work. Seems weird if it performs a same-origin check ahead of time given redirects.</blockquote></mx-reply><p>https://codesandbox.io/s/interesting-nightingale-vkpy9s?file=/src/index.js</p>\n<p>I use a plugin to inject response header \"content-disposition: attachment\".</p>\n<p>I was expecting that after the response has been received the browser would initialte a download to the local machine.</p>\n","m.relates_to":{"m.in_reply_to":{"event_id":"$BfxRzJyDZFwvkr3E33Uk6MyERy9_NhHGu1kqz4U57UA"}},"msgtype":"m.text"},"ts":1688651153442,"senderName":"vrafaeli","senderId":"@vrafaeli:matrix.org","id":"$Q7pfAtvkWqCoSkwAizzSSm-tPgvU2xL5uBM6z2s3c6Q"},
{"content":{"body":"but the download to local machine does not happen","msgtype":"m.text"},"ts":1688651207247,"senderName":"vrafaeli","senderId":"@vrafaeli:matrix.org","id":"$vM3ATixyTJ0kmfpIlboL9JFNXlkqHBikgPSIb1orqy4"},
{"content":{"body":"> <@annevk:matrix.org> vrafaeli: example? I thought `<a download>.click()` would generally work. Seems weird if it performs a same-origin check ahead of time given redirects.\n\n * https://codesandbox.io/s/interesting-nightingale-vkpy9s?file=/src/index.js\n\nI use a Chrome plugin to inject response header \"content-disposition: attachment\".\n\nI was expecting that after the response has been received the Chrome browser would initialte a download to the local machine.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$BfxRzJyDZFwvkr3E33Uk6MyERy9_NhHGu1kqz4U57UA?via=matrix.org&amp;via=mozilla.org&amp;via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@vrafaeli:matrix.org\">vrafaeli</a>: example? I thought <code>&lt;a download&gt;.click()</code> would generally work. Seems weird if it performs a same-origin check ahead of time given redirects.</blockquote></mx-reply> * <p>https://codesandbox.io/s/interesting-nightingale-vkpy9s?file=/src/index.js</p>\n<p>I use a Chrome plugin to inject response header \"content-disposition: attachment\".</p>\n<p>I was expecting that after the response has been received the Chrome browser would initialte a download to the local machine.</p>\n","m.new_content":{"body":"https://codesandbox.io/s/interesting-nightingale-vkpy9s?file=/src/index.js\n\nI use a Chrome plugin to inject response header \"content-disposition: attachment\".\n\nI was expecting that after the response has been received the Chrome browser would initialte a download to the local machine.","format":"org.matrix.custom.html","formatted_body":"<p>https://codesandbox.io/s/interesting-nightingale-vkpy9s?file=/src/index.js</p>\n<p>I use a Chrome plugin to inject response header \"content-disposition: attachment\".</p>\n<p>I was expecting that after the response has been received the Chrome browser would initialte a download to the local machine.</p>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$Q7pfAtvkWqCoSkwAizzSSm-tPgvU2xL5uBM6z2s3c6Q","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1688651244110,"senderName":"vrafaeli","senderId":"@vrafaeli:matrix.org","id":"$LgJukzh1GbO9mLG2YS9F2yzcxGNJkFpvFOEL_Fmb-kE"},
{"content":{"body":" * https://codesandbox.io/s/interesting-nightingale-vkpy9s?file=/src/index.js\n\nI use a Chrome plugin to inject response header \"content-disposition: attachment\".\n\nI was expecting that this would make the Chrome browser to do a download to the local machine.","format":"org.matrix.custom.html","formatted_body":" * <p>https://codesandbox.io/s/interesting-nightingale-vkpy9s?file=/src/index.js</p>\n<p>I use a Chrome plugin to inject response header \"content-disposition: attachment\".</p>\n<p>I was expecting that this would make the Chrome browser to do a download to the local machine.</p>\n","m.new_content":{"body":"https://codesandbox.io/s/interesting-nightingale-vkpy9s?file=/src/index.js\n\nI use a Chrome plugin to inject response header \"content-disposition: attachment\".\n\nI was expecting that this would make the Chrome browser to do a download to the local machine.","format":"org.matrix.custom.html","formatted_body":"<p>https://codesandbox.io/s/interesting-nightingale-vkpy9s?file=/src/index.js</p>\n<p>I use a Chrome plugin to inject response header \"content-disposition: attachment\".</p>\n<p>I was expecting that this would make the Chrome browser to do a download to the local machine.</p>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$Q7pfAtvkWqCoSkwAizzSSm-tPgvU2xL5uBM6z2s3c6Q","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1688651277211,"senderName":"vrafaeli","senderId":"@vrafaeli:matrix.org","id":"$l0Fvrqqydgs-XjQw3PTECoG4k4LG94pdcVFwZsn9N_w"},
{"content":{"body":" * https://codesandbox.io/s/interesting-nightingale-vkpy9s?file=/src/index.js\n\nI use a Chrome plugin to inject response header \"content-disposition: attachment\". (in my real case the server sets it)\n\nI was expecting that this would make the Chrome browser to do a download to the local machine.","format":"org.matrix.custom.html","formatted_body":" * <p>https://codesandbox.io/s/interesting-nightingale-vkpy9s?file=/src/index.js</p>\n<p>I use a Chrome plugin to inject response header \"content-disposition: attachment\". (in my real case the server sets it)</p>\n<p>I was expecting that this would make the Chrome browser to do a download to the local machine.</p>\n","m.new_content":{"body":"https://codesandbox.io/s/interesting-nightingale-vkpy9s?file=/src/index.js\n\nI use a Chrome plugin to inject response header \"content-disposition: attachment\". (in my real case the server sets it)\n\nI was expecting that this would make the Chrome browser to do a download to the local machine.","format":"org.matrix.custom.html","formatted_body":"<p>https://codesandbox.io/s/interesting-nightingale-vkpy9s?file=/src/index.js</p>\n<p>I use a Chrome plugin to inject response header \"content-disposition: attachment\". (in my real case the server sets it)</p>\n<p>I was expecting that this would make the Chrome browser to do a download to the local machine.</p>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$Q7pfAtvkWqCoSkwAizzSSm-tPgvU2xL5uBM6z2s3c6Q","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1688651428748,"senderName":"vrafaeli","senderId":"@vrafaeli:matrix.org","id":"$gljIJ0IUob4IJQLtUMbvmpeaKt-yTPT-8fuUfrr7MzY"},
{"content":{"body":"Hm, is there a term I can reference for \"frames that can be communicated with\"? Basically just anything you can postMessage to?","msgtype":"m.text"},"ts":1688667249413,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$o0vgSp4eWWb4yM8DMx7nhDEQwe9Imu0kSHd78KfDDT0"},
{"content":{"body":"browsing context group?","msgtype":"m.text"},"ts":1688667472867,"senderName":"Jeremy Roman","senderId":"@jbroman:matrix.org","id":"$T2fDA7wyEhDH4boY8eTS_-1uS5przob_NqP1tQdYotM"},
{"content":{"body":"(though BroadcastChannel is an exception)","msgtype":"m.text"},"ts":1688667502678,"senderName":"Jeremy Roman","senderId":"@jbroman:matrix.org","id":"$phwKDYDOjZICvre-RIhdLNT-WtBKhQHa7Ysio-cAZSU"},
{"content":{"body":"(Context is \"things that should be able to see an MQ change if it gets toggled by script\", re: https://github.com/w3c/csswg-drafts/issues/6517)","msgtype":"m.text"},"ts":1688667531279,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$UYDgiHK9Q5crD-RF0tfcBcoZooNr45fa1VXqID1mFeM"},
{"content":{"body":"Because if you darkmode a site via an in-site toggle you'd like iframes to darkmode as well, ideally.","msgtype":"m.text"},"ts":1688667563758,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$BnuUudKB3Z8Wcp7H1IWpzOav_xnsF-KxroUPYaHiHo0"},
{"content":{"body":"TabAtkins: you can postMessage() across origins. In the issue you say it shouldn't be visible to cross-origin iframes","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@tabatkins:matrix.org\">TabAtkins</a>: you can postMessage() across origins. In the issue you say it shouldn't be visible to cross-origin iframes","msgtype":"m.text"},"ts":1688672501422,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$_UZtknYIMiT0j9TCEqgbrEqRWZpwRuEOXJkn6Adg7o8"},
{"content":{"body":"Basically I just don't want to invent a new security boundary. If you can already freely message a cross-domain frame, you should be able to affect their MQs.","msgtype":"m.text"},"ts":1688674468268,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$WX4YqfGGaYBWvDBZ2HWnRwKu39lY6MW1bGWn1RsaIBA"},
{"content":{"body":"TabAtkins: for popups you can communicate between opener and openee unless it was opened with `noopener`. For iframes I *think* you can always send a message (if embedding is allowed). When same-origin, you can communicate even if there's no reference to the window (with `BroadcastChannel` or `localStorage` or `document.cookie` or a shared worker)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@tabatkins:matrix.org\">TabAtkins</a>: for popups you can communicate between opener and openee unless it was opened with <code>noopener</code>. For iframes I <em>think</em> you can always send a message (if embedding is allowed). When same-origin, you can communicate even if there's no reference to the window (with <code>BroadcastChannel</code> or <code>localStorage</code> or <code>document.cookie</code> or a shared worker)","msgtype":"m.text"},"ts":1688675412475,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$h7x8NVkNExLP5XHY9Djr-T-V2JWbJMNqE-BXs9TFjng"},
{"content":{"body":"Right, all this detail is why I was asking if there's already a spec concept for communicating subframes.","msgtype":"m.text"},"ts":1688675443752,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$I9L_pgN9bNTnhJqNFbCxuW7CD2INodK_x9fk50SjNrg"},
{"content":{"body":"TabAtkins: it's still not clear to me what you want","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@tabatkins:matrix.org\">TabAtkins</a>: it's still not clear to me what you want","msgtype":"m.text"},"ts":1688675657414,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$BkJsCWSG14EHukxM6HotSRbboNaniS7m0yB20Ui5Yxw"},
{"content":{"body":"I want to define that you can toggle certain MQs from script. These MQs want to transmit their script-changed values to subframes (so an iframe will also be darkmode if the top-level frame was set to darkmode). But I don't want to open a new communication channel. I'm *presuming* that \"frames you can postMessage\" is a reasonable description of the boundary for things that can see the altered MQs.","format":"org.matrix.custom.html","formatted_body":"I want to define that you can toggle certain MQs from script. These MQs want to transmit their script-changed values to subframes (so an iframe will also be darkmode if the top-level frame was set to darkmode). But I don't want to open a new communication channel. I'm <em>presuming</em> that \"frames you can postMessage\" is a reasonable description of the boundary for things that can see the altered MQs.","msgtype":"m.text"},"ts":1688675966232,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$6XdkVFnFmjsN59GPYr52eWun9qtS8BEMRPeX6rV80Lg"}
]