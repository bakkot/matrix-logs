[
{"content":{"body":"About the “sandboxed origin browsing context flag”, how I can figure out which APIs it affects in addition to `document.cookies` and `localStorage`?","format":"org.matrix.custom.html","formatted_body":"About the “sandboxed origin browsing context flag”, how I can figure out which APIs it affects in addition to <code>document.cookies</code> and <code>localStorage</code>?","msgtype":"m.text"},"ts":1690684454882,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$uK-5x_MM3rQrHZe12Rijh21fVtN8meSBtNJnPgJGTY8"},
{"content":{"body":" * About the “sandboxed origin browsing context flag”, how I can figure out which APIs it affects in addition to `document.cookies` and `localStorage`? https://html.spec.whatwg.org/multipage/browsers.html#sandboxed-origin-browsing-context-flag\n\nOr more specifically, if I have an iframe without `allow-same-origin`, which APIs are not going to work in that iframe?","format":"org.matrix.custom.html","formatted_body":" * <p>About the “sandboxed origin browsing context flag”, how I can figure out which APIs it affects in addition to <code>document.cookies</code> and <code>localStorage</code>? https://html.spec.whatwg.org/multipage/browsers.html#sandboxed-origin-browsing-context-flag</p>\n<p>Or more specifically, if I have an iframe without <code>allow-same-origin</code>, which APIs are not going to work in that iframe?</p>\n","m.new_content":{"body":"About the “sandboxed origin browsing context flag”, how I can figure out which APIs it affects in addition to `document.cookies` and `localStorage`? https://html.spec.whatwg.org/multipage/browsers.html#sandboxed-origin-browsing-context-flag\n\nOr more specifically, if I have an iframe without `allow-same-origin`, which APIs are not going to work in that iframe?","format":"org.matrix.custom.html","formatted_body":"<p>About the “sandboxed origin browsing context flag”, how I can figure out which APIs it affects in addition to <code>document.cookies</code> and <code>localStorage</code>? https://html.spec.whatwg.org/multipage/browsers.html#sandboxed-origin-browsing-context-flag</p>\n<p>Or more specifically, if I have an iframe without <code>allow-same-origin</code>, which APIs are not going to work in that iframe?</p>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$uK-5x_MM3rQrHZe12Rijh21fVtN8meSBtNJnPgJGTY8","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1690684515768,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$drhSJP6VbEmcVd5E2e1or8Y4lmZRJQwRwxq1TOb2zXA"},
{"content":{"body":"> <@sideshowbarker:matrix.org> About the “sandboxed origin browsing context flag”, how I can figure out which APIs it affects in addition to `document.cookies` and `localStorage`? https://html.spec.whatwg.org/multipage/browsers.html#sandboxed-origin-browsing-context-flag\n> \n> Or more specifically, if I have an iframe without `allow-same-origin`, which APIs are not going to work in that iframe?\n\nAny API which does origin checks will be affected... so, many of them. Searching for links to #concept-document-origin will work...","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$uK-5x_MM3rQrHZe12Rijh21fVtN8meSBtNJnPgJGTY8?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">@sideshowbarker:matrix.org</a><br><p>About the “sandboxed origin browsing context flag”, how I can figure out which APIs it affects in addition to <code>document.cookies</code> and <code>localStorage</code>? https://html.spec.whatwg.org/multipage/browsers.html#sandboxed-origin-browsing-context-flag</p>\n<p>Or more specifically, if I have an iframe without <code>allow-same-origin</code>, which APIs are not going to work in that iframe?</p>\n</blockquote></mx-reply>Any API which does origin checks will be affected... so, many of them. Searching for links to #concept-document-origin will work...","m.relates_to":{"m.in_reply_to":{"event_id":"$uK-5x_MM3rQrHZe12Rijh21fVtN8meSBtNJnPgJGTY8"}},"msgtype":"m.text"},"ts":1690684699680,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$GA7zmZlPGGcp7xg9yJOxN9ADF2jifAqaeWX1F_X_Mws"},
{"content":{"body":"incidentally, the specific context is the behavior of the “Playground” in MDN — which is a feature where you can directly edit code MDN-article code snippets directly in the browser, and see the results immediately.\n\nSo if you go for example to https://webdocs.dev/en-us/docs/web/api/document/cookie#example_1_simple_usage and click the Play link, it opens a new tab to https://webdocs.dev/en-us/play with the content of the snippets from that MDN article. And if you inspect the source for the iframe in the right-hand side there, you’ll see this:\n```html\n<iframe title=\"runner\" src=\"https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/en-US/docs/Web/CSS/minmax/runner.html\" sandbox=\"allow-scripts allow-same-origin\"></iframe>\n```\nnotice the URL, https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/en-US/docs/Web/CSS/minmax/runner.html\n\nIt’s a dynamically-generated subdomain. And if you want to try replicating the hosting for that, it requires some relatively complex DNS setup.","format":"org.matrix.custom.html","formatted_body":"<p>incidentally, the specific context is the behavior of the “Playground” in MDN — which is a feature where you can directly edit code MDN-article code snippets directly in the browser, and see the results immediately.</p>\n<p>So if you go for example to https://webdocs.dev/en-us/docs/web/api/document/cookie#example_1_simple_usage and click the Play link, it opens a new tab to https://webdocs.dev/en-us/play with the content of the snippets from that MDN article. And if you inspect the source for the iframe in the right-hand side there, you’ll see this:</p>\n<pre><code class=\"language-html\">&lt;iframe title=\"runner\" src=\"https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/en-US/docs/Web/CSS/minmax/runner.html\" sandbox=\"allow-scripts allow-same-origin\"&gt;&lt;/iframe&gt;\n</code></pre>\n<p>notice the URL, https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/en-US/docs/Web/CSS/minmax/runner.html</p>\n<p>It’s a dynamically-generated subdomain. And if you want to try replicating the hosting for that, it requires some relatively complex DNS setup.</p>\n","msgtype":"m.text"},"ts":1690686328619,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$V0GbNgFpFIpSPyY6Iyl-6ae6a-SSgr7EqJa31gg3Uqs"},
{"content":{"body":"But if instead you just don’t use `allow-same-origin` in the `sandbox` value of the iframe, then you can just use the same origin, and you don’t need to do any complex DNS setup.\n\nThe tradeoff is that anything you run from that iframe that requires an origin check won’t work in the “Playground” environment.\n\nSo for users, that would mean that for any of those articles that have code snippets with features that `allow-same-origin` to work as expected, the users won’t be able to have the convenience of using the Playground to test changing the code from the snippets and to see the effects.","format":"org.matrix.custom.html","formatted_body":"<p>But if instead you just don’t use <code>allow-same-origin</code> in the <code>sandbox</code> value of the iframe, then you can just use the same origin, and you don’t need to do any complex DNS setup.</p>\n<p>The tradeoff is that anything you run from that iframe that requires an origin check won’t work in the “Playground” environment.</p>\n<p>So for users, that would mean that for any of those articles that have code snippets with features that <code>allow-same-origin</code> to work as expected, the users won’t be able to have the convenience of using the Playground to test changing the code from the snippets and to see the effects.</p>\n","msgtype":"m.text"},"ts":1690686608253,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$CZDBhwL8OTvqZH5nJfoXxIL6hSjqn1ajdYhWEQ4JSVc"},
{"content":{"body":" * incidentally, the specific context is the behavior of the “Playground” in MDN — which is a feature where you can directly edit MDN-article code snippets directly in the browser, and see the results immediately.\n\nSo if you go for example to https://webdocs.dev/en-us/docs/web/api/document/cookie#example\\_1\\_simple\\_usage and click the Play link, it opens a new tab to https://webdocs.dev/en-us/play with the content of the snippets from that MDN article. And if you inspect the source for the iframe in the right-hand side there, you’ll see this:\n\n```html\n<iframe title=\"runner\" src=\"https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/en-US/docs/Web/CSS/minmax/runner.html\" sandbox=\"allow-scripts allow-same-origin\"></iframe>\n```\n\nnotice the URL, https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/en-US/docs/Web/CSS/minmax/runner.html\n\nIt’s a dynamically-generated subdomain. And if you want to try replicating the hosting for that, it requires some relatively complex DNS setup.","format":"org.matrix.custom.html","formatted_body":" * <p>incidentally, the specific context is the behavior of the “Playground” in MDN — which is a feature where you can directly edit MDN-article code snippets directly in the browser, and see the results immediately.</p>\n<p>So if you go for example to https://webdocs.dev/en-us/docs/web/api/document/cookie#example_1_simple_usage and click the Play link, it opens a new tab to https://webdocs.dev/en-us/play with the content of the snippets from that MDN article. And if you inspect the source for the iframe in the right-hand side there, you’ll see this:</p>\n<pre><code class=\"language-html\">&lt;iframe title=\"runner\" src=\"https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/en-US/docs/Web/CSS/minmax/runner.html\" sandbox=\"allow-scripts allow-same-origin\"&gt;&lt;/iframe&gt;\n</code></pre>\n<p>notice the URL, https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/en-US/docs/Web/CSS/minmax/runner.html</p>\n<p>It’s a dynamically-generated subdomain. And if you want to try replicating the hosting for that, it requires some relatively complex DNS setup.</p>\n","m.new_content":{"body":"incidentally, the specific context is the behavior of the “Playground” in MDN — which is a feature where you can directly edit MDN-article code snippets directly in the browser, and see the results immediately.\n\nSo if you go for example to https://webdocs.dev/en-us/docs/web/api/document/cookie#example\\_1\\_simple\\_usage and click the Play link, it opens a new tab to https://webdocs.dev/en-us/play with the content of the snippets from that MDN article. And if you inspect the source for the iframe in the right-hand side there, you’ll see this:\n\n```html\n<iframe title=\"runner\" src=\"https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/en-US/docs/Web/CSS/minmax/runner.html\" sandbox=\"allow-scripts allow-same-origin\"></iframe>\n```\n\nnotice the URL, https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/en-US/docs/Web/CSS/minmax/runner.html\n\nIt’s a dynamically-generated subdomain. And if you want to try replicating the hosting for that, it requires some relatively complex DNS setup.","format":"org.matrix.custom.html","formatted_body":"<p>incidentally, the specific context is the behavior of the “Playground” in MDN — which is a feature where you can directly edit MDN-article code snippets directly in the browser, and see the results immediately.</p>\n<p>So if you go for example to https://webdocs.dev/en-us/docs/web/api/document/cookie#example_1_simple_usage and click the Play link, it opens a new tab to https://webdocs.dev/en-us/play with the content of the snippets from that MDN article. And if you inspect the source for the iframe in the right-hand side there, you’ll see this:</p>\n<pre><code class=\"language-html\">&lt;iframe title=\"runner\" src=\"https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/en-US/docs/Web/CSS/minmax/runner.html\" sandbox=\"allow-scripts allow-same-origin\"&gt;&lt;/iframe&gt;\n</code></pre>\n<p>notice the URL, https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/en-US/docs/Web/CSS/minmax/runner.html</p>\n<p>It’s a dynamically-generated subdomain. And if you want to try replicating the hosting for that, it requires some relatively complex DNS setup.</p>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$V0GbNgFpFIpSPyY6Iyl-6ae6a-SSgr7EqJa31gg3Uqs","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1690686623017,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$M4yttXbvzRBxnr6IT5q7rXRRkUcJjMv83-LKCuCDuIs"},
{"content":{"body":" * But if instead you just don’t use `allow-same-origin` in the `sandbox` value of the iframe, then you can just use the same origin, and you don’t need to do any complex DNS setup.\n\nThe tradeoff is that anything you run from that iframe that requires an origin check won’t work in the “Playground” environment.\n\nSo for users, that would mean that for any of those articles that have code snippets with features which require `allow-same-origin` to work as expected, the users won’t be able to have the convenience of using the Playground to test changing the code from the snippets and to see the effects.","format":"org.matrix.custom.html","formatted_body":" * <p>But if instead you just don’t use <code>allow-same-origin</code> in the <code>sandbox</code> value of the iframe, then you can just use the same origin, and you don’t need to do any complex DNS setup.</p>\n<p>The tradeoff is that anything you run from that iframe that requires an origin check won’t work in the “Playground” environment.</p>\n<p>So for users, that would mean that for any of those articles that have code snippets with features which require <code>allow-same-origin</code> to work as expected, the users won’t be able to have the convenience of using the Playground to test changing the code from the snippets and to see the effects.</p>\n","m.new_content":{"body":"But if instead you just don’t use `allow-same-origin` in the `sandbox` value of the iframe, then you can just use the same origin, and you don’t need to do any complex DNS setup.\n\nThe tradeoff is that anything you run from that iframe that requires an origin check won’t work in the “Playground” environment.\n\nSo for users, that would mean that for any of those articles that have code snippets with features which require `allow-same-origin` to work as expected, the users won’t be able to have the convenience of using the Playground to test changing the code from the snippets and to see the effects.","format":"org.matrix.custom.html","formatted_body":"<p>But if instead you just don’t use <code>allow-same-origin</code> in the <code>sandbox</code> value of the iframe, then you can just use the same origin, and you don’t need to do any complex DNS setup.</p>\n<p>The tradeoff is that anything you run from that iframe that requires an origin check won’t work in the “Playground” environment.</p>\n<p>So for users, that would mean that for any of those articles that have code snippets with features which require <code>allow-same-origin</code> to work as expected, the users won’t be able to have the convenience of using the Playground to test changing the code from the snippets and to see the effects.</p>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$CZDBhwL8OTvqZH5nJfoXxIL6hSjqn1ajdYhWEQ4JSVc","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1690686722220,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$4hbKvb6a8M-yCGph_KPsg3_dACvG-4JW-PhJwZVXEV8"},
{"content":{"body":" * incidentally, the specific context is the behavior of the “Playground” in MDN — which is a feature where you can directly edit MDN-article code snippets directly in the browser, and see the results immediately.\n\nSo if you go for example to https://webdocs.dev/en-us/docs/web/api/document/cookie#example\\_1\\_simple\\_usage and click the Play link, it opens a new tab to https://webdocs.dev/en-us/play with the content of the snippets from that MDN article. And if you inspect the source for the iframe in the right-hand side there, you’ll see this:\n\n```html\n<iframe title=\"runner\" sandbox=\"allow-scripts allow-same-origin\"\n  src=\"https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/en-US/docs/Web/CSS/minmax/runner.html\" ></iframe>\n```\n\nnotice the URL, https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/en-US/docs/Web/CSS/minmax/runner.html\n\nIt’s a dynamically-generated subdomain. And if you want to try replicating the hosting for that, it requires some relatively complex DNS setup.","format":"org.matrix.custom.html","formatted_body":" * <p>incidentally, the specific context is the behavior of the “Playground” in MDN — which is a feature where you can directly edit MDN-article code snippets directly in the browser, and see the results immediately.</p>\n<p>So if you go for example to https://webdocs.dev/en-us/docs/web/api/document/cookie#example_1_simple_usage and click the Play link, it opens a new tab to https://webdocs.dev/en-us/play with the content of the snippets from that MDN article. And if you inspect the source for the iframe in the right-hand side there, you’ll see this:</p>\n<pre><code class=\"language-html\">&lt;iframe title=\"runner\" sandbox=\"allow-scripts allow-same-origin\"\n  src=\"https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/en-US/docs/Web/CSS/minmax/runner.html\" &gt;&lt;/iframe&gt;\n</code></pre>\n<p>notice the URL, https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/en-US/docs/Web/CSS/minmax/runner.html</p>\n<p>It’s a dynamically-generated subdomain. And if you want to try replicating the hosting for that, it requires some relatively complex DNS setup.</p>\n","m.new_content":{"body":"incidentally, the specific context is the behavior of the “Playground” in MDN — which is a feature where you can directly edit MDN-article code snippets directly in the browser, and see the results immediately.\n\nSo if you go for example to https://webdocs.dev/en-us/docs/web/api/document/cookie#example\\_1\\_simple\\_usage and click the Play link, it opens a new tab to https://webdocs.dev/en-us/play with the content of the snippets from that MDN article. And if you inspect the source for the iframe in the right-hand side there, you’ll see this:\n\n```html\n<iframe title=\"runner\" sandbox=\"allow-scripts allow-same-origin\"\n  src=\"https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/en-US/docs/Web/CSS/minmax/runner.html\" ></iframe>\n```\n\nnotice the URL, https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/en-US/docs/Web/CSS/minmax/runner.html\n\nIt’s a dynamically-generated subdomain. And if you want to try replicating the hosting for that, it requires some relatively complex DNS setup.","format":"org.matrix.custom.html","formatted_body":"<p>incidentally, the specific context is the behavior of the “Playground” in MDN — which is a feature where you can directly edit MDN-article code snippets directly in the browser, and see the results immediately.</p>\n<p>So if you go for example to https://webdocs.dev/en-us/docs/web/api/document/cookie#example_1_simple_usage and click the Play link, it opens a new tab to https://webdocs.dev/en-us/play with the content of the snippets from that MDN article. And if you inspect the source for the iframe in the right-hand side there, you’ll see this:</p>\n<pre><code class=\"language-html\">&lt;iframe title=\"runner\" sandbox=\"allow-scripts allow-same-origin\"\n  src=\"https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/en-US/docs/Web/CSS/minmax/runner.html\" &gt;&lt;/iframe&gt;\n</code></pre>\n<p>notice the URL, https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/en-US/docs/Web/CSS/minmax/runner.html</p>\n<p>It’s a dynamically-generated subdomain. And if you want to try replicating the hosting for that, it requires some relatively complex DNS setup.</p>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$V0GbNgFpFIpSPyY6Iyl-6ae6a-SSgr7EqJa31gg3Uqs","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1690687544451,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$HOp3RntazPGQriPt6KebawjzOu0XdW7O5ekB1Jfb2ww"},
{"content":{"body":" * But if instead you just don’t use `allow-same-origin` in the `sandbox` value of the iframe, then you can just host the iframe from the same origin, and you don’t need to do any complex DNS setup.\n\nThe tradeoff is that anything you run from that iframe that requires an origin check won’t work in the “Playground” environment.\n\nSo for users, that would mean that for any of those articles that have code snippets with features which require `allow-same-origin` to work as expected, the users won’t be able to have the convenience of using the Playground to test changing the code from the snippets and to see the effects.","format":"org.matrix.custom.html","formatted_body":" * <p>But if instead you just don’t use <code>allow-same-origin</code> in the <code>sandbox</code> value of the iframe, then you can just host the iframe from the same origin, and you don’t need to do any complex DNS setup.</p>\n<p>The tradeoff is that anything you run from that iframe that requires an origin check won’t work in the “Playground” environment.</p>\n<p>So for users, that would mean that for any of those articles that have code snippets with features which require <code>allow-same-origin</code> to work as expected, the users won’t be able to have the convenience of using the Playground to test changing the code from the snippets and to see the effects.</p>\n","m.new_content":{"body":"But if instead you just don’t use `allow-same-origin` in the `sandbox` value of the iframe, then you can just host the iframe from the same origin, and you don’t need to do any complex DNS setup.\n\nThe tradeoff is that anything you run from that iframe that requires an origin check won’t work in the “Playground” environment.\n\nSo for users, that would mean that for any of those articles that have code snippets with features which require `allow-same-origin` to work as expected, the users won’t be able to have the convenience of using the Playground to test changing the code from the snippets and to see the effects.","format":"org.matrix.custom.html","formatted_body":"<p>But if instead you just don’t use <code>allow-same-origin</code> in the <code>sandbox</code> value of the iframe, then you can just host the iframe from the same origin, and you don’t need to do any complex DNS setup.</p>\n<p>The tradeoff is that anything you run from that iframe that requires an origin check won’t work in the “Playground” environment.</p>\n<p>So for users, that would mean that for any of those articles that have code snippets with features which require <code>allow-same-origin</code> to work as expected, the users won’t be able to have the convenience of using the Playground to test changing the code from the snippets and to see the effects.</p>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$CZDBhwL8OTvqZH5nJfoXxIL6hSjqn1ajdYhWEQ4JSVc","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1690687574918,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$E9Jf7bNn4JSTkWZf2Ai0nXDcg934bfZsgaY6n17vpIY"},
{"content":{"body":"Yeah, but if you allow same-origin access, then playground scripts can steal cookies and such. Not sure what MDN's security model is for the playground but it's generally best practice not to let arbitrary script run in such un-sandboxed iframes. (allow-same-origin undoes most of what we think of as sandboxing.)","msgtype":"m.text"},"ts":1690692225591,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$5eNjUNpwLDegQV-x5PoiQRUDy2xkks_A9tGkCwDLrIY"},
{"content":{"body":"> <@domenicdenicola:matrix.org> Yeah, but if you allow same-origin access, then playground scripts can steal cookies and such. Not sure what MDN's security model is for the playground but it's generally best practice not to let arbitrary script run in such un-sandboxed iframes. (allow-same-origin undoes most of what we think of as sandboxing.)\n\nOK thanks — that makes me even more convinced that it’d be much better not use `allow-same-origin` on those iframes. Given that the goal is to give developers authoritative guidance on how to use web-platform features, deploying the article code content in a way that conflicts with best practices is not a great way to model things for developers.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$5eNjUNpwLDegQV-x5PoiQRUDy2xkks_A9tGkCwDLrIY?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">@domenicdenicola:matrix.org</a><br>Yeah, but if you allow same-origin access, then playground scripts can steal cookies and such. Not sure what MDN&#39;s security model is for the playground but it&#39;s generally best practice not to let arbitrary script run in such un-sandboxed iframes. (allow-same-origin undoes most of what we think of as sandboxing.)</blockquote></mx-reply>OK thanks — that makes me even more convinced that it’d be much better not use <code>allow-same-origin</code> on those iframes. Given that the goal is to give developers authoritative guidance on how to use web-platform features, deploying the article code content in a way that conflicts with best practices is not a great way to model things for developers.","m.relates_to":{"m.in_reply_to":{"event_id":"$5eNjUNpwLDegQV-x5PoiQRUDy2xkks_A9tGkCwDLrIY"}},"msgtype":"m.text"},"ts":1690693482082,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$I-O3cK3NWvzaY1r0kv7Fo3ASQ0lAGZWLYOB9u8LjsZ8"},
{"content":{"body":"Domenic: I now wonder if we should a (non-normative) Note to the spec:\n> Using the `allow-same-origin` keyword undoes most of what we think of as sandboxing. In particular, it’s generally best practice not to let arbitrary scripts run in iframes that have effectively been un-sandboxed due to the `allow-same-origin` keyword being specified.","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: I now wonder if we should a (non-normative) Note to the spec:</p>\n<blockquote>\n<p>Using the <code>allow-same-origin</code> keyword undoes most of what we think of as sandboxing. In particular, it’s generally best practice not to let arbitrary scripts run in iframes that have effectively been un-sandboxed due to the <code>allow-same-origin</code> keyword being specified.</p>\n</blockquote>\n","msgtype":"m.text"},"ts":1690694098272,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$OBejktsH-Ovm0kn2ZjYDigI1kDxyRp7i6x-bBbWj4FM"},
{"content":{"body":" * Domenic: I now wonder if we should a (non-normative) Note to the spec:\n\n> _Using the `allow-same-origin` keyword undoes most of what we think of as sandboxing. In particular, it’s generally best practice not to let arbitrary scripts run in iframes that have effectively been un-sandboxed due to the `allow-same-origin` keyword being specified._","format":"org.matrix.custom.html","formatted_body":" * <p><a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: I now wonder if we should a (non-normative) Note to the spec:</p>\n<blockquote>\n<p><em>Using the <code>allow-same-origin</code> keyword undoes most of what we think of as sandboxing. In particular, it’s generally best practice not to let arbitrary scripts run in iframes that have effectively been un-sandboxed due to the <code>allow-same-origin</code> keyword being specified.</em></p>\n</blockquote>\n","m.new_content":{"body":"Domenic: I now wonder if we should a (non-normative) Note to the spec:\n\n> _Using the `allow-same-origin` keyword undoes most of what we think of as sandboxing. In particular, it’s generally best practice not to let arbitrary scripts run in iframes that have effectively been un-sandboxed due to the `allow-same-origin` keyword being specified._","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: I now wonder if we should a (non-normative) Note to the spec:</p>\n<blockquote>\n<p><em>Using the <code>allow-same-origin</code> keyword undoes most of what we think of as sandboxing. In particular, it’s generally best practice not to let arbitrary scripts run in iframes that have effectively been un-sandboxed due to the <code>allow-same-origin</code> keyword being specified.</em></p>\n</blockquote>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$OBejktsH-Ovm0kn2ZjYDigI1kDxyRp7i6x-bBbWj4FM","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1690694106215,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$JIAr9kbVZ-MAoFhpKY23onH846NDFbtXixA4NQvMaKk"},
{"content":{"body":" * Domenic: I now wonder if we should a (non-normative) Note to the spec:\n\n> _Using the `allow-same-origin` keyword undoes most of what we think of as sandboxing. In particular, it’s generally best practice not to let arbitrary script run in iframes that have effectively been un-sandboxed due to the `allow-same-origin` keyword being specified._","format":"org.matrix.custom.html","formatted_body":" * <p><a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: I now wonder if we should a (non-normative) Note to the spec:</p>\n<blockquote>\n<p><em>Using the <code>allow-same-origin</code> keyword undoes most of what we think of as sandboxing. In particular, it’s generally best practice not to let arbitrary script run in iframes that have effectively been un-sandboxed due to the <code>allow-same-origin</code> keyword being specified.</em></p>\n</blockquote>\n","m.new_content":{"body":"Domenic: I now wonder if we should a (non-normative) Note to the spec:\n\n> _Using the `allow-same-origin` keyword undoes most of what we think of as sandboxing. In particular, it’s generally best practice not to let arbitrary script run in iframes that have effectively been un-sandboxed due to the `allow-same-origin` keyword being specified._","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: I now wonder if we should a (non-normative) Note to the spec:</p>\n<blockquote>\n<p><em>Using the <code>allow-same-origin</code> keyword undoes most of what we think of as sandboxing. In particular, it’s generally best practice not to let arbitrary script run in iframes that have effectively been un-sandboxed due to the <code>allow-same-origin</code> keyword being specified.</em></p>\n</blockquote>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$OBejktsH-Ovm0kn2ZjYDigI1kDxyRp7i6x-bBbWj4FM","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1690694165811,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$KpJGJmbMGXdIdJNLkmqj3gMonCgSeNeyB_4r3tYgkl0"},
{"content":{"body":"Sorry, I think there are a lot of double-negatives that are confusing things...","msgtype":"m.text"},"ts":1690694194964,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$ADijZkoxun_8UOmCMOyMDbSWoRccgTHxFZrqrjBJ8gs"},
{"content":{"body":"> `sandbox=\"allow-same-origin\"`: this is insecure. This allows cookie-stealing.\n\n> `sandbox=\"\"`: this is more secure. This prevents bad things.","format":"org.matrix.custom.html","formatted_body":"<blockquote>\n<p><code>sandbox=\"allow-same-origin\"</code>: this is insecure. This allows cookie-stealing.</p>\n</blockquote>\n<blockquote>\n<p><code>sandbox=\"\"</code>: this is more secure. This prevents bad things.</p>\n</blockquote>\n","msgtype":"m.text"},"ts":1690694216237,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$k1qfH7XJtOw9J45ZQLyY71biSCW_VMoIaHZ5k5b7Tsw"},
{"content":{"body":"OK that I understand — but I guess my (re)wording doesn’t convey that clearly","msgtype":"m.text"},"ts":1690694383295,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$t4m7nAvhI0dm7pAqMih8SBR9r2-mc_JWWPje5ES4m4U"},
{"content":{"body":"the iframes in this case would still be deployed with `sandbox=\"allow-scripts` — just not with `sandbox=\"allow-scripts allow-same-origin\"` (as MDN is currently doing, and which is insecure)","format":"org.matrix.custom.html","formatted_body":"the iframes in this case would still be deployed with <code>sandbox=\"allow-scripts</code> —&nbsp;just not with <code>sandbox=\"allow-scripts allow-same-origin\"</code> (as MDN is currently doing, and which is insecure)","msgtype":"m.text"},"ts":1690694496343,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$0vBmLiJ09XtgqypQztsc-gYDY93f-f0nHAkb8LWxHNE"},
{"content":{"body":" * the iframes in this case would still be deployed with `sandbox=\"allow-scripts`\" — just not with `sandbox=\"allow-scripts allow-same-origin\"` (as MDN is currently doing, and which is insecure)","format":"org.matrix.custom.html","formatted_body":" * the iframes in this case would still be deployed with <code>sandbox=\"allow-scripts</code>\" —&nbsp;just not with <code>sandbox=\"allow-scripts allow-same-origin\"</code> (as MDN is currently doing, and which is insecure)","m.new_content":{"body":"the iframes in this case would still be deployed with `sandbox=\"allow-scripts`\" — just not with `sandbox=\"allow-scripts allow-same-origin\"` (as MDN is currently doing, and which is insecure)","format":"org.matrix.custom.html","formatted_body":"the iframes in this case would still be deployed with <code>sandbox=\"allow-scripts</code>\" —&nbsp;just not with <code>sandbox=\"allow-scripts allow-same-origin\"</code> (as MDN is currently doing, and which is insecure)","msgtype":"m.text"},"m.relates_to":{"event_id":"$0vBmLiJ09XtgqypQztsc-gYDY93f-f0nHAkb8LWxHNE","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1690694509577,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$8wxXHpbQLqnwrmQCtplQ-cH9akN4jfwENRmHySbyXXo"},
{"content":{"body":" * the iframes in this case would still be deployed with `sandbox=\"allow-scripts\"` — just not with `sandbox=\"allow-scripts allow-same-origin\"` (as MDN is currently doing, and which is insecure)","format":"org.matrix.custom.html","formatted_body":" * the iframes in this case would still be deployed with <code>sandbox=\"allow-scripts\"</code> —&nbsp;just not with <code>sandbox=\"allow-scripts allow-same-origin\"</code> (as MDN is currently doing, and which is insecure)","m.new_content":{"body":"the iframes in this case would still be deployed with `sandbox=\"allow-scripts\"` — just not with `sandbox=\"allow-scripts allow-same-origin\"` (as MDN is currently doing, and which is insecure)","format":"org.matrix.custom.html","formatted_body":"the iframes in this case would still be deployed with <code>sandbox=\"allow-scripts\"</code> —&nbsp;just not with <code>sandbox=\"allow-scripts allow-same-origin\"</code> (as MDN is currently doing, and which is insecure)","msgtype":"m.text"},"m.relates_to":{"event_id":"$0vBmLiJ09XtgqypQztsc-gYDY93f-f0nHAkb8LWxHNE","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1690694535369,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$8iR0QYVrsh7FazSEFhp_vmQexkoywtBW1BdIhAY17Hc"},
{"content":{"body":"I guess MDN's setup is \"insecure\" in that code running on `https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/` can mess with other code running on that domain. But presumably the idea is that only one piece of code ever runs on that domain? So it's probably secure enough.","format":"org.matrix.custom.html","formatted_body":"I guess MDN's setup is \"insecure\" in that code running on <code>https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/</code> can mess with other code running on that domain. But presumably the idea is that only one piece of code ever runs on that domain? So it's probably secure enough.","msgtype":"m.text"},"ts":1690695293715,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$Fkjd75nIQjKTRtqFuyjoEthm1nBtyWXKI8rZ6SaEF7Q"},
{"content":{"body":"Yeah, all the content at those URLs is ephemeral. If you navigate directly to https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/, you’ll see there’s no `body` content there at all, and if you navigate directly to the https://webdocs.dev/en-us/play parent, it’s not populated with anything. It only gets populated when you open a Play link from any particular MDN article.","format":"org.matrix.custom.html","formatted_body":"Yeah, all the content at those URLs is ephemeral. If you navigate directly to https://ab457e4a-7a76-49c5-ad28-d5b08e7bfbdc.mdnplay.dev/, you’ll see there’s no <code>body</code> content there at all, and if you navigate directly to the https://webdocs.dev/en-us/play parent, it’s not populated with anything. It only gets populated when you open a Play link from any particular MDN article.","msgtype":"m.text"},"ts":1690695562057,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$Ta8wwfiWkX9ZTwViaNvVqimW_GgrlG5duScn3dv1geI"},
{"content":{"body":"Hello, I want to implement a subset of the HTML standard and from what I've gathered the strings in the DOM need to be UTF-16 encoded. Is this caused by JavaScript and, if yes, what would it change if I were to use UTF-8 instead?","msgtype":"m.text"},"ts":1690745571111,"senderName":"radr72","senderId":"@radr72:matrix.org","id":"$3RJndd_92tg4Lel5eJnEIU7nCyG06rIqe7wLLt5eZfA"}
]