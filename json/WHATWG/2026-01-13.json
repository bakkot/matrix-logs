[
{"content":{"body":"@sideshowbarker:matrix.org who was that guy","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">@sideshowbarker</a> who was that guy","m.mentions":{"user_ids":["@sideshowbarker:matrix.org"]},"msgtype":"m.text"},"ts":1768279418877,"senderName":"aresuii","senderId":"@aresuii:xmr.se","id":"$LpCoPmgvxXuszp8Vpk1ztjt9n4r2AkZmoGnxyMZv_es"},
{"content":{"body":"no idea","m.mentions":{},"msgtype":"m.text"},"ts":1768279442951,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$jnTYepmC9Z8jVoGZeavJObanS2umC3g6pjBIdArfx80"},
{"content":{"body":"ok but what is \"Guest Standard\"","m.mentions":{},"msgtype":"m.text"},"ts":1768280250936,"senderName":"aresuii","senderId":"@aresuii:xmr.se","id":"$XwMJJZGPTTsIxU0WsZASOnELWQQZnLojqBkRWSnVWdw"},
{"content":{"body":"We can do something like that yes, and have consistent behavior for all Promise APIs. It does change the meaning of microtasks though, a bit, if JS doesn't really run. But anyhow, that would be better than having the current ad-hoc \"let's run microtasks here\".","m.mentions":{},"m.relates_to":{"event_id":"$OMxfb0uMQHFUMnQTbk7QZRgkpHzGNN9Uo0dan-qcPKc","is_falling_back":true,"m.in_reply_to":{"event_id":"$OMxfb0uMQHFUMnQTbk7QZRgkpHzGNN9Uo0dan-qcPKc"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1768297440860,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$r5tLGpEX9jvOPQbeAwl321j5B1mcPg8Mwh4dRWpFMrc"},
{"content":{"body":"Does something like \"Perform a promise entry point with the following step: activate view transition\" sound right?","m.mentions":{},"m.relates_to":{"event_id":"$OMxfb0uMQHFUMnQTbk7QZRgkpHzGNN9Uo0dan-qcPKc","is_falling_back":true,"m.in_reply_to":{"event_id":"$r5tLGpEX9jvOPQbeAwl321j5B1mcPg8Mwh4dRWpFMrc"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1768301765398,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$GZHNjLlA0Qw7RNxc0vhbvxIYFTLbq6xspzesYvsDiqc"},
{"content":{"body":"There are a few promise entry points which don't work like this, e.g. ones that fire multiple promises and events as part of one stack and rely on the behavior of the microtask queue firing at the end of the stack. but I think probably that should be the exception","m.mentions":{},"m.relates_to":{"event_id":"$OMxfb0uMQHFUMnQTbk7QZRgkpHzGNN9Uo0dan-qcPKc","is_falling_back":true,"m.in_reply_to":{"event_id":"$GZHNjLlA0Qw7RNxc0vhbvxIYFTLbq6xspzesYvsDiqc"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1768302157245,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$hYJ5q41xZo5pwqxk2VWbzQYkVnZxBh1asYmUd0gSAGA"},
{"content":{"body":"zcorpan: rs? https://github.com/whatwg/html/pull/12060","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: rs? https://github.com/whatwg/html/pull/12060","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"msgtype":"m.text"},"ts":1768302335082,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$rkXCMar4nZVllPcYZa2j5D71UyjYKzzPx4nbmVokYFI"},
{"content":{"body":"Approved, but I now see you asked specifically from zcorpan ","format":"org.matrix.custom.html","formatted_body":"Approved, but I now see you asked specifically from <a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>","m.mentions":{"user_ids":["@annevk:matrix.org","@zcorpan:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$rkXCMar4nZVllPcYZa2j5D71UyjYKzzPx4nbmVokYFI"}},"msgtype":"m.text"},"ts":1768302465023,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$_zpCdJPz_tO01Ll0JCuOpw9L_LwcQke_bXkJxiKThW0"},
{"content":{"body":"annevk: reviewed and merged","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: reviewed and merged","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1768302772316,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$p7J4f3onIACLfqJnjBQCSP18KhoFKLHN63DfpUYE9IY"},
{"content":{"body":"I've added a comment to out-of-order streaming with the thinking around markers after the last WHATNOT. https://github.com/whatwg/html/issues/11542#issuecomment-3743936051\n\nzcorpan keithamus Jake Archibald it attempts to answer some of your questions about processing instructions, polyfills, and developer ergonomics.","format":"org.matrix.custom.html","formatted_body":"<p>I've added a comment to out-of-order streaming with the thinking around markers after the last WHATNOT. https://github.com/whatwg/html/issues/11542#issuecomment-3743936051</p>\n<p><a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a> <a href=\"https://matrix.to/#/@keithamus:matrix.org\">keithamus</a> <a href=\"https://matrix.to/#/@jakea:matrix.org\">Jake Archibald</a> it attempts to answer some of your questions about processing instructions, polyfills, and developer ergonomics.</p>\n","m.mentions":{"user_ids":["@zcorpan:mozilla.org","@keithamus:matrix.org","@jakea:matrix.org"]},"msgtype":"m.text"},"ts":1768305634383,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$GBqpE_L1ROSSJS4IlrAdFh-I0o8-42T2Nj_YEFxRcls"},
{"content":{"body":"https://github.com/whatwg/html/issues/12080","m.mentions":{},"m.relates_to":{"event_id":"$OMxfb0uMQHFUMnQTbk7QZRgkpHzGNN9Uo0dan-qcPKc","is_falling_back":true,"m.in_reply_to":{"event_id":"$hYJ5q41xZo5pwqxk2VWbzQYkVnZxBh1asYmUd0gSAGA"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1768306227916,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$iLp16Z6A64jM-hXtDql84o5wxRVUvasz7PyojMMa5Dw"},
{"content":{"body":"Noam Rosenthal: Can marker-start and marker-end be anywhere (in normal elements), or do they need to be siblings?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: Can marker-start and marker-end be anywhere (in normal elements), or do they need to be siblings?","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1768306612656,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$kJ_wAJUcS3obvcYQGAcUX0KuoAPcMc78MwgWPvqlvPY"},
{"content":{"body":"If they're not siblings they don't match each other because you'd hit the end of the marker's parent before hitting the matching marker-end","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$kJ_wAJUcS3obvcYQGAcUX0KuoAPcMc78MwgWPvqlvPY"}},"msgtype":"m.text"},"ts":1768306678668,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$4Uehz-Z-4_YvIFmwzdLHJUU7jnC-YtV3X0JUpsVAf-s"},
{"content":{"body":"IOW only sibling marker-start/marker-end pairs create an automatic range for <template contentfor>","m.mentions":{},"msgtype":"m.text"},"ts":1768306711700,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$DERK6zL7HOMLqI2SJ3mW_0QrGFzGihcsmaYIW-0o66M"},
{"content":{"body":"What if you have `<div><?marker-start name=x ?><span><?marker-end name=x ?></span></div>`","format":"org.matrix.custom.html","formatted_body":"What if you have <code>&lt;div&gt;&lt;?marker-start name=x ?&gt;&lt;span&gt;&lt;?marker-end name=x ?&gt;&lt;/span&gt;&lt;/div&gt;</code>","m.mentions":{},"msgtype":"m.text"},"ts":1768306789067,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$GtoXpOfienNuf4d4N6hhaEJ88b2LWvZWuC8shmfE-ys"},
{"content":{"body":"it's a good case, but it would resolve to siblings in some way or another. probably the ancestor of the span that's a sibling of marker-start","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$GtoXpOfienNuf4d4N6hhaEJ88b2LWvZWuC8shmfE-ys"}},"msgtype":"m.text"},"ts":1768306869662,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$HyplyzM5PvjsPdYHKRvWOfXduj4xOxqODpKNF7uTZCo"},
{"content":{"body":"though by how I put it in the comment it only iterates on the siblings, so it would simply ignore marker-end and reach the end of the DIV. Perhaps that's better","m.mentions":{},"msgtype":"m.text"},"ts":1768306922083,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$YFN7GTBbF_gc39sV8bl6wDUobw2ZRyj7TQeGxWGZQB8"},
{"content":{"body":"(less recursive iteration)","m.mentions":{},"msgtype":"m.text"},"ts":1768306971378,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$wCxDAZ-6oEIn5xDu2BL9hzR9jJ2C1SnahkJ34_Bxr9M"},
{"content":{"body":"I was thinking it might be better to require an attribute on the element, and allow marker-start and marker-end PIs (without name pseudo attribute) as direct children","m.mentions":{},"msgtype":"m.text"},"ts":1768306982737,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$-p1PMUf0qW5n3LdPR1adjBSftqiqhJFctRrHu6dQSHo"},
{"content":{"body":"But doesn't support multiple marker-starts with different names in one element","m.mentions":{},"msgtype":"m.text"},"ts":1768307004819,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$wMaJS6ya7BD76YfUVxuT56IKTqvGkNnaZl-a_beRH0U"},
{"content":{"body":"yea but that would make it so that you can only have one marker-pair per element","m.mentions":{},"msgtype":"m.text"},"ts":1768307007433,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$Qf9aJ1vwOc_lrOtOWtQJBhWG6dNOoOsc9emW9hpTvlI"},
{"content":{"body":"exactly","m.mentions":{},"msgtype":"m.text"},"ts":1768307010860,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$4XQJzfe2o8J_3QyaHeeWgz9Fc9oYE75vzBOLKqhP03Q"},
{"content":{"body":"Or we can have `markers=\"results more-results\"`","format":"org.matrix.custom.html","formatted_body":"Or we can have <code>markers=\"results more-results\"</code>","m.mentions":{},"msgtype":"m.text"},"ts":1768307181726,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$434J3S8Tuz2qTDvTbojPtmFMIjwrB5sqPcs437YEmHs"},
{"content":{"body":"instead of attributes on the markers? seems a bit less ergonomic though no? What's the rationale?","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$434J3S8Tuz2qTDvTbojPtmFMIjwrB5sqPcs437YEmHs"}},"msgtype":"m.text"},"ts":1768307224589,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$K-TFxRQYelI_ZJKICR2H_q5u0gaZ0FGk1iIUsRBg4sI"},
{"content":{"body":"Yes. Seems more ergonomic if you have one marker and both start and end, but can be less for other cases. Or hard to follow which marker is which if the names depend on ordering. Rationale is attributes on elements are better understood and supported in various tooling","m.mentions":{},"msgtype":"m.text"},"ts":1768307386758,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$_e1EQN9n9EzFE78TsBNkvjbGkulJ03IC9sr8QMy7q40"},
{"content":{"body":"Easy to query for an element with an attribute, then iterate children to find markers","m.mentions":{},"msgtype":"m.text"},"ts":1768307421573,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$365_2nh2fEke8dLsSOs4AyTq9b5Db8RCa59hV3L49Aw"},
{"content":{"body":"Gotcha. It also works nicely when you want the simple case of replacing everything (just don't have marker PIs), and works nicer for polyfills. I can see the appeal given that multiple marker-pairs inside the same element is probably more rare to beginwith","m.mentions":{},"msgtype":"m.text"},"ts":1768307494262,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$pkuK5dxXkO4b2ne2lXh0uQNDRGIPYFMXB4eHB2spdzE"},
{"content":{"body":"Yeah. Also makes for one way to do things","m.mentions":{},"msgtype":"m.text"},"ts":1768307551567,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$x11LWR_ZgwOFaXDZkqY-kwghKw2ZySwIuHbGXwXk7Xw"},
{"content":{"body":"I'd use `marker` rather than `markers` though (I don't think we tend to use plural in attribute names?)","format":"org.matrix.custom.html","formatted_body":"I'd use <code>marker</code> rather than <code>markers</code> though (I don't think we tend to use plural in attribute names?)","m.mentions":{},"msgtype":"m.text"},"ts":1768307577718,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$S6c-w4nSOSl-ANHgEdnH7pquotHqZvcEvRIBr2Q_TUY"},
{"content":{"body":"We have `headers` but also `class` ","format":"org.matrix.custom.html","formatted_body":"We have <code>headers</code> but also <code>class</code>","m.mentions":{},"msgtype":"m.text"},"ts":1768307873660,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$n6zPfN_j9mxIlklvq6jpv69tzVu6A8ZaskgLRRy9u0E"},
{"content":{"body":"And `srcset` :)","format":"org.matrix.custom.html","formatted_body":"And <code>srcset</code> :)","m.mentions":{},"msgtype":"m.text"},"ts":1768309019377,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$jg_Unk2pYBRiue42B9ENtNksgk8j73zVgfBxsDHlOyM"},
{"content":{"body":"what this doesn't allow doing is complex overlaps, but perhaps it's OK. e.g.:\n\n<?marker-start name=a?>\n\nContent\n<?marker-start name=b?>\nContent\n<?marker-end name=a?>\nContent\n<?marker-end name=b?>","m.mentions":{},"msgtype":"m.text"},"ts":1768309093620,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$X_nefpCB2Ps_rM0wp4HgGHh0w0tzsPgRMCIhGmn1mEg"},
{"content":{"body":"Yeah, though we can allow `name` pseudoatt to override implicit name assignment","format":"org.matrix.custom.html","formatted_body":"Yeah, though we can allow <code>name</code> pseudoatt to override implicit name assignment","m.mentions":{},"msgtype":"m.text"},"ts":1768309169755,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$l18JgeGuOyVOoBmjvlzSSIWgQnFD69iatpAEGiYglRA"},
{"content":{"body":"yea sure. so use the DOMTokenList thingy as a default index, and then those PI attributes for complex things","m.mentions":{},"msgtype":"m.text"},"ts":1768309218733,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$2H7jxHQcjTQyJaVoHEnU8oY6hbX2QsHqCnLYKrmRMmo"},
{"content":{"body":"Yep","m.mentions":{},"msgtype":"m.text"},"ts":1768309266657,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$stlk4ieQmzWmJJjlW4bfzVGIHv5T2_001VSLKMhLMDg"},
{"content":{"body":"I want to find out if it's compatible to change from comment to ProcessingInstruction generally for <?foo > in HTML, and also whether we want the trailing \"?\"","m.mentions":{},"msgtype":"m.text"},"ts":1768309353765,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$CjBG-I8aOq3FUrgq6MeXAIji5V3HkzQ712neuJIPr9E"}
]