[
{"content":{"body":"Dictionaries are ordered maps. https://webidl.spec.whatwg.org/#idl-dictionaries","m.mentions":{"user_ids":["@smaug:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$uC5eUBE7dW2sWxNdAmukyesdNbXvmR_xOgE-F5XdrhE"}},"msgtype":"m.text"},"ts":1745540676578,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$ztmN1WxZRmXyGesbdU87cB5F5sxpMWflsFLTb9FIY9A"},
{"content":{"body":"akaster: in general, it seems like null client fetches are not stress-tested. (annevk has expressed a similar opinion.) I filled in fields based on https://fetch.spec.whatwg.org/#fetch-elsewhere-request (originally written by Noam Rosenthal) which says you need \"leave request’s client as null and set the request’s origin, policy container, service-workers mode, and referrer to appropriate values instead\". It's very possible that list is not exhaustive.\n\nHowever, I'm unsure whether we should fix it in fetch or in all call sites (e.g. in HTML).","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@akaster:serenityos.org\">akaster</a>: in general, it seems like null client fetches are not stress-tested. (<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a> has expressed a similar opinion.) I filled in fields based on https://fetch.spec.whatwg.org/#fetch-elsewhere-request (originally written by <a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>) which says you need \"leave request’s client as null and set the request’s origin, policy container, service-workers mode, and referrer to appropriate values instead\". It's very possible that list is not exhaustive.</p>\n<p>However, I'm unsure whether we should fix it in fetch or in all call sites (e.g. in HTML).</p>\n","m.mentions":{"user_ids":["@akaster:serenityos.org","@annevk:matrix.org","@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1745540867146,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$20NsIxbALQT3rQkjFdXqYV1RohETGDxzwumxIBiE16Y"},
{"content":{"body":"those two (request's window and the 3 algorithms from mixed-content we have) are the only places I saw that needed help in the PR at least. seems to not have tripped up fetch too badly","m.mentions":{},"msgtype":"m.text"},"ts":1745540963784,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$cWBbdUzFZrCJGhcupGclVVAU4dh1w6MK6kAtnFi2plw"},
{"content":{"body":"smaug: A dictionary is a definition (matching Dictionary) used to define an ordered map data type\nhttps://webidl.spec.whatwg.org/#idl-dictionaries","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a>: A dictionary is a definition (matching Dictionary) used to define an ordered map data type<br>https://webidl.spec.whatwg.org/#idl-dictionaries","m.mentions":{"user_ids":["@smaug:mozilla.org"]},"msgtype":"m.text"},"ts":1745566425382,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$mvxihb8em75yMZBj6iBTDNvFViSQsny6PNSMqRCi8F0"},
{"content":{"body":"I see now Domenic already said so :)","m.mentions":{},"msgtype":"m.text"},"ts":1745566532792,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$ZhMPsDGSnKgLG7QEy4T3bczCRWb4ndpl5hqDcsMR2yk"},
{"content":{"body":"aha","m.mentions":{},"msgtype":"m.text"},"ts":1745569074890,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$AzykZHzeWWcXYIhZMENxaGdq66eMbEuH-y81-gox970"},
{"content":{"body":"The issue is about removing composed from CommandEvent, and my related proposal to modify event propagation logic for events with a `source` ","format":"org.matrix.custom.html","formatted_body":"The issue is about removing composed from CommandEvent, and my related proposal to modify event propagation logic for events with a <code>source</code>","m.mentions":{},"m.relates_to":{"event_id":"$axCkpriOVdFIlTeq7Z1lOEo2SAXV2DJJBErLyfjLV5w","is_falling_back":true,"m.in_reply_to":{"event_id":"$mvKTNxIZxbItp5o3iXSG9dPpJUOUVud_Lj5BCLcUIEk"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1745570196193,"senderName":"Alice (in Sydney)","senderId":"@alice:igalia.com","id":"$saSh2RL0zFohE9qnElJtyn6GoddGIrrGbl_ohExDxxo"},
{"content":{"body":"So, for ToggleEvent, they would also use the modified logic since they also have a `source` (but IMO that's a good thing)","format":"org.matrix.custom.html","formatted_body":"So, for ToggleEvent, they would also use the modified logic since they also have a <code>source</code> (but IMO that's a good thing)","m.mentions":{},"m.relates_to":{"event_id":"$axCkpriOVdFIlTeq7Z1lOEo2SAXV2DJJBErLyfjLV5w","is_falling_back":true,"m.in_reply_to":{"event_id":"$saSh2RL0zFohE9qnElJtyn6GoddGIrrGbl_ohExDxxo"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1745570243858,"senderName":"Alice (in Sydney)","senderId":"@alice:igalia.com","id":"$l1Itp9BV_XkfoBBahZ3ZUGZSQXVWbBEF3RA9W8Taj90"},
{"content":{"body":"foolip: no pressure, but very excited you're taking on the Document problem","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@foolip:matrix.org\">foolip</a>: no pressure, but very excited you're taking on the Document problem","m.mentions":{"user_ids":["@foolip:matrix.org"]},"msgtype":"m.text"},"ts":1745584008822,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$BUeR6GuGeZHjRMKsD0MGzVELmlPhxGExZ87JrdmjuPk"},
{"content":{"body":"annevk: well, I mostly wanted to unassign the Chromium bug since I don't think it's worth the risk, but couldn't help but comment on the spec issue too","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a>: well, I mostly wanted to unassign the Chromium bug since I don't think it's worth the risk, but couldn't help but comment on the spec issue too","msgtype":"m.text"},"ts":1745584976169,"senderName":"foolip","senderId":"@foolip:matrix.org","id":"$dF_ALutz4tDLxJ-bDSRsfcH3ppT6-0T9QAWAfar2mnA"},
{"content":{"body":"Hello, I have a clarification question concerning the HTML Tokenizer;\nThe [\"named character reference state\"](https://html.spec.whatwg.org/multipage/parsing.html#named-character-reference-state) states that characters consumed as part of a character reference should be flushed if there was no match. However, it also requires to *\"Consume the maximum number of characters possible, where the consumed characters are one of the identifiers in the first column of the named character references table\"*.\n\nI'm a bit confused on what this is supposed to mean. Should it only consume characters (as in pop off the incoming stream) if they have a matching entry in the spec table or unconditionally? In the latter case, how much characters would need to be consumed?","format":"org.matrix.custom.html","formatted_body":"<p>Hello, I have a clarification question concerning the HTML Tokenizer;<br>The <a href=\"https://html.spec.whatwg.org/multipage/parsing.html#named-character-reference-state\">\"named character reference state\"</a> states that characters consumed as part of a character reference should be flushed if there was no match. However, it also requires to <em>\"Consume the maximum number of characters possible, where the consumed characters are one of the identifiers in the first column of the named character references table\"</em>.</p>\n<p>I'm a bit confused on what this is supposed to mean. Should it only consume characters (as in pop off the incoming stream) if they have a matching entry in the spec table or unconditionally? In the latter case, how much characters would need to be consumed?</p>\n","m.mentions":{},"msgtype":"m.text"},"ts":1745587193872,"senderName":"rshadr","senderId":"@radr72:matrix.org","id":"$32knFBuD9xgaFXbAudslcZXLsD_V8O-gXn-KXuT60Ro"},
{"content":{"body":"* Hello, I have a clarification question concerning the HTML Tokenizer;\nThe [\"named character reference state\"](https://html.spec.whatwg.org/multipage/parsing.html#named-character-reference-state) states that characters consumed as part of a character reference should be flushed if there was **no match**. However, it also requires to _\"Consume the maximum number of characters possible, where the consumed characters are one of the identifiers in the first column of the named character references table\"_.\n\nI'm a bit confused on what this is supposed to mean. Should it only consume characters (as in pop off the incoming stream) if they have a matching entry in the spec table or unconditionally? In the latter case, how much characters would need to be consumed?","format":"org.matrix.custom.html","formatted_body":"* <p>Hello, I have a clarification question concerning the HTML Tokenizer;<br>The <a href=\"https://html.spec.whatwg.org/multipage/parsing.html#named-character-reference-state\">\"named character reference state\"</a> states that characters consumed as part of a character reference should be flushed if there was <strong>no match</strong>. However, it also requires to <em>\"Consume the maximum number of characters possible, where the consumed characters are one of the identifiers in the first column of the named character references table\"</em>.</p>\n<p>I'm a bit confused on what this is supposed to mean. Should it only consume characters (as in pop off the incoming stream) if they have a matching entry in the spec table or unconditionally? In the latter case, how much characters would need to be consumed?</p>\n","m.mentions":{},"m.new_content":{"body":"Hello, I have a clarification question concerning the HTML Tokenizer;\nThe [\"named character reference state\"](https://html.spec.whatwg.org/multipage/parsing.html#named-character-reference-state) states that characters consumed as part of a character reference should be flushed if there was **no match**. However, it also requires to _\"Consume the maximum number of characters possible, where the consumed characters are one of the identifiers in the first column of the named character references table\"_.\n\nI'm a bit confused on what this is supposed to mean. Should it only consume characters (as in pop off the incoming stream) if they have a matching entry in the spec table or unconditionally? In the latter case, how much characters would need to be consumed?","format":"org.matrix.custom.html","formatted_body":"<p>Hello, I have a clarification question concerning the HTML Tokenizer;<br>The <a href=\"https://html.spec.whatwg.org/multipage/parsing.html#named-character-reference-state\">\"named character reference state\"</a> states that characters consumed as part of a character reference should be flushed if there was <strong>no match</strong>. However, it also requires to <em>\"Consume the maximum number of characters possible, where the consumed characters are one of the identifiers in the first column of the named character references table\"</em>.</p>\n<p>I'm a bit confused on what this is supposed to mean. Should it only consume characters (as in pop off the incoming stream) if they have a matching entry in the spec table or unconditionally? In the latter case, how much characters would need to be consumed?</p>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$32knFBuD9xgaFXbAudslcZXLsD_V8O-gXn-KXuT60Ro","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1745587223950,"senderName":"rshadr","senderId":"@radr72:matrix.org","id":"$94TXdHBrrrUD77SAQ0TpC03iOa7_KloBBQWNNQFITYc"},
{"content":{"body":"* Hello, I have a clarification question concerning the HTML Tokenizer;\nThe [\"named character reference state\"](https://html.spec.whatwg.org/multipage/parsing.html#named-character-reference-state) states that characters consumed as part of a character reference should be flushed if there was **no match**. However, it also requires to _\"Consume the maximum number of characters possible, where the consumed characters are one of the identifiers in the first column of the named character references table\"_ beforehand.\n\nI'm a bit confused on what this is supposed to mean. Should it only consume characters (as in pop off the incoming stream) if they have a matching entry in the spec table or unconditionally? In the latter case, how much characters would need to be consumed?","format":"org.matrix.custom.html","formatted_body":"* <p>Hello, I have a clarification question concerning the HTML Tokenizer;<br>The <a href=\"https://html.spec.whatwg.org/multipage/parsing.html#named-character-reference-state\">\"named character reference state\"</a> states that characters consumed as part of a character reference should be flushed if there was <strong>no match</strong>. However, it also requires to <em>\"Consume the maximum number of characters possible, where the consumed characters are one of the identifiers in the first column of the named character references table\"</em> beforehand.</p>\n<p>I'm a bit confused on what this is supposed to mean. Should it only consume characters (as in pop off the incoming stream) if they have a matching entry in the spec table or unconditionally? In the latter case, how much characters would need to be consumed?</p>\n","m.mentions":{},"m.new_content":{"body":"Hello, I have a clarification question concerning the HTML Tokenizer;\nThe [\"named character reference state\"](https://html.spec.whatwg.org/multipage/parsing.html#named-character-reference-state) states that characters consumed as part of a character reference should be flushed if there was **no match**. However, it also requires to _\"Consume the maximum number of characters possible, where the consumed characters are one of the identifiers in the first column of the named character references table\"_ beforehand.\n\nI'm a bit confused on what this is supposed to mean. Should it only consume characters (as in pop off the incoming stream) if they have a matching entry in the spec table or unconditionally? In the latter case, how much characters would need to be consumed?","format":"org.matrix.custom.html","formatted_body":"<p>Hello, I have a clarification question concerning the HTML Tokenizer;<br>The <a href=\"https://html.spec.whatwg.org/multipage/parsing.html#named-character-reference-state\">\"named character reference state\"</a> states that characters consumed as part of a character reference should be flushed if there was <strong>no match</strong>. However, it also requires to <em>\"Consume the maximum number of characters possible, where the consumed characters are one of the identifiers in the first column of the named character references table\"</em> beforehand.</p>\n<p>I'm a bit confused on what this is supposed to mean. Should it only consume characters (as in pop off the incoming stream) if they have a matching entry in the spec table or unconditionally? In the latter case, how much characters would need to be consumed?</p>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$32knFBuD9xgaFXbAudslcZXLsD_V8O-gXn-KXuT60Ro","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1745587346665,"senderName":"rshadr","senderId":"@radr72:matrix.org","id":"$rF_4I54eNFiizkHsd123ZDW_nKSOzFy8U1IpoO5arkE"},
{"content":{"body":"rshadr: you need to keep consuming into the buffer for as long as you have a prefix match","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@radr72:matrix.org\">rshadr</a>: you need to keep consuming into the buffer for as long as you have a prefix match","m.mentions":{"user_ids":["@radr72:matrix.org"]},"msgtype":"m.text"},"ts":1745587412902,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$BDVxFNNUB1vzCfZUbduN3NNZ4c5nz4AXxmp428b3q2Q"},
{"content":{"body":"rshadr: it seems reasonable to file an issue against the standard to more clearly stipulate the expected operations there","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@radr72:matrix.org\">rshadr</a>: it seems reasonable to file an issue against the standard to more clearly stipulate the expected operations there","m.mentions":{"user_ids":["@radr72:matrix.org"]},"msgtype":"m.text"},"ts":1745587480402,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$1NUKvW1tK23Ed1Whl6QSgkPUqEA5kVqGSqNFCPqafWM"}
]