[
{"content":{"body":"> <@noamr:matrix.org> Domenic: I gave a first shot at the `navigation.activation` thingy, if you want to take a look: https://github.com/whatwg/html/pull/9856\n> Still need to add tests (and implementation of course) but want to make sure I'm on the right track\n\nIt's looking quite nice. I'm sorry you ran into a preexisting issue, per https://github.com/whatwg/html/pull/9856#discussion_r1361569089 . I guess it's good to confirm the direction I was leaning for a fix though. Your help implementing that fix would be much appreciated.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$hS3NyxPwaY7x8KRk6RLtuFAIZZc1V8MNd6S5y4QZ62M?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@noamr:matrix.org\">@noamr:matrix.org</a><br><a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: I gave a first shot at the <code>navigation.activation</code> thingy, if you want to take a look: https://github.com/whatwg/html/pull/9856<br />Still need to add tests (and implementation of course) but want to make sure I'm on the right track</blockquote></mx-reply>It's looking quite nice. I'm sorry you ran into a preexisting issue, per https://github.com/whatwg/html/pull/9856#discussion_r1361569089 . I guess it's good to confirm the direction I was leaning for a fix though. Your help implementing that fix would be much appreciated.","m.mentions":{"user_ids":["@noamr:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$hS3NyxPwaY7x8KRk6RLtuFAIZZc1V8MNd6S5y4QZ62M"}},"msgtype":"m.text"},"ts":1697524724684,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$JLHq0fx5kX0e1VTz-Q-nkFLItYsFhMVynBOixbUUSaY"},
{"content":{"body":"> <@domenicdenicola:matrix.org> It's looking quite nice. I'm sorry you ran into a preexisting issue, per https://github.com/whatwg/html/pull/9856#discussion_r1361569089 . I guess it's good to confirm the direction I was leaning for a fix though. Your help implementing that fix would be much appreciated.\n\nYea the having to compute navigation type… sure let me have a go at it. Thanks for the review!","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs%3Amatrix.org/%24JLHq0fx5kX0e1VTz-Q-nkFLItYsFhMVynBOixbUUSaY\">In reply to</a> <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">@domenicdenicola:matrix.org</a><br>It's looking quite nice. I'm sorry you ran into a preexisting issue, per https://github.com/whatwg/html/pull/9856#discussion_r1361569089 . I guess it's good to confirm the direction I was leaning for a fix though. Your help implementing that fix would be much appreciated.</blockquote></mx-reply>Yea the having to compute navigation type… sure let me have a go at it. Thanks for the review!","m.relates_to":{"m.in_reply_to":{"event_id":"$JLHq0fx5kX0e1VTz-Q-nkFLItYsFhMVynBOixbUUSaY"}},"msgtype":"m.text"},"ts":1697525409218,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$e82LMifDvdLvKAwVvPkQIV4HTduWX7E9WoAf1QTQMjk"},
{"content":{"body":"Domenic: re having a new ActivationInfo with each activation, that would mean that a BFCache restore would replace the whole object: are we ok with that? This is the reason I went with an additional internal struct","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: re having a new ActivationInfo with each activation, that would mean that a BFCache restore would replace the whole object: are we ok with that? This is the reason I went with an additional internal struct","msgtype":"m.text"},"ts":1697525574914,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$BAVTcFVRMZncbc8HcnHZs0t3Vj0KnuImA8eNwgUV3W0"},
{"content":{"body":"> <@noamr:matrix.org> Domenic: re having a new ActivationInfo with each activation, that would mean that a BFCache restore would replace the whole object: are we ok with that? This is the reason I went with an additional internal struct\n\nAh, good point. PRobably updating the existing object is nicer. But you can still do that, just have the \"update the navigation API for reactivation\" poke at the current NavigationActivation's fields.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$BAVTcFVRMZncbc8HcnHZs0t3Vj0KnuImA8eNwgUV3W0?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@noamr:matrix.org\">@noamr:matrix.org</a><br><a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: re having a new ActivationInfo with each activation, that would mean that a BFCache restore would replace the whole object: are we ok with that? This is the reason I went with an additional internal struct</blockquote></mx-reply>Ah, good point. PRobably updating the existing object is nicer. But you can still do that, just have the \"update the navigation API for reactivation\" poke at the current NavigationActivation's fields.","m.mentions":{"user_ids":["@noamr:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$BAVTcFVRMZncbc8HcnHZs0t3Vj0KnuImA8eNwgUV3W0"}},"msgtype":"m.text"},"ts":1697525631347,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$KETh9aFnbJJbrcPIbTC-vxlFT4Znd2NrB0x1yJhBVUE"},
{"content":{"body":"Domenic: `python3 factory.py --single urlpattern \"URL Pattern\"` should work","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: <code>python3 factory.py --single urlpattern \"URL Pattern\"</code> should work","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"ts":1697529656791,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$fNSgDoI-jnVMDURSOltTHlMmUoGOWekCE5cV1vZirZY"},
{"content":{"body":"Domenic: only `--all` requires `db.json` to be up-to-date","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: only <code>--all</code> requires <code>db.json</code> to be up-to-date","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"ts":1697529701370,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$U9CXNqx33PlYp2wX_Ywstecp7c3I0V0Jvd9OX-XAcEY"},
{"content":{"body":"Domenic: you'll have to create a PR manually but for a one-off that seems fine","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: you'll have to create a PR manually but for a one-off that seems fine","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"ts":1697529719135,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$5uBU0scBf_UGOL2iCiXAB6z9_F6LIhMK2vfzcRKRL20"},
{"content":{"body":"Ah, nice. I ran out of time for today but will do that tomorrow.","m.mentions":{},"msgtype":"m.text"},"ts":1697532406272,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$v2qFbE3I1Nukp-mvvE-HlYZzPRKjiAAR4JDCYYmDEl0"},
{"content":{"body":"Hello, the BFCache team in Chromium has a couple of spec discussions/PRs that are awaiting response from other vendors for a while, and I've been told that it might be good to ask about them here :)\n\nThe first is about [queueing messages on BroadcastChannel](https://github.com/whatwg/html/pull/8972#issuecomment-1730905420), which I think got agreement from Firefox but pending some thoughts from annevk . Anne, do you think that all your concerns have been addressed there?\n\nThe second is about [NotRestoredReasons](https://github.com/whatwg/html/pull/9360#issuecomment-1733061660): there was a controversial part that smaug and peterv pointed out about randomly exposing cross-origin blocking reasons, which has been removed now. If there's no remaining problem, can we get approval from Firefox folks there? (There is also a [question](https://github.com/whatwg/html/pull/9360#issuecomment-1733467050) about exposing line numbers and URLs there)\n\nFinally this is not under WHATWG but since it's also bfcache related, there's also a discussion about [Clear-Site-Data <> BFCache eviction](https://github.com/w3c/webappsec-clear-site-data/pull/77#issuecomment-1707836953) with annevk. It seems like at least the top-level-frame header eviction shouldn't be controversial, is there any problem with specifying that?\n\nLMK if there's more context needed for any of those. We can also join the WHATWG triage meeting if needed, but we're all in APAC so we'll need to wait for the APAC friendly one.","format":"org.matrix.custom.html","formatted_body":"<p>Hello, the BFCache team in Chromium has a couple of spec discussions/PRs that are awaiting response from other vendors for a while, and I've been told that it might be good to ask about them here :)</p>\n<p>The first is about <a href=\"https://github.com/whatwg/html/pull/8972#issuecomment-1730905420\">queueing messages on BroadcastChannel</a>, which I think got agreement from Firefox but pending some thoughts from <a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a> .&nbsp;Anne, do you think that all your concerns have been addressed there?</p>\n<p>The second is about <a href=\"https://github.com/whatwg/html/pull/9360#issuecomment-1733061660\">NotRestoredReasons</a>: there was a controversial part that <a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a> and <a href=\"https://matrix.to/#/@pvanderbeken:mozilla.org\">peterv</a> pointed out about randomly exposing cross-origin blocking reasons, which has been removed now. If there's no remaining problem, can we get approval from Firefox folks there? (There is also a <a href=\"https://github.com/whatwg/html/pull/9360#issuecomment-1733467050\">question</a> about exposing line numbers and URLs there)</p>\n<p>Finally this is not under WHATWG but since it's also bfcache related, there's also a discussion about <a href=\"https://github.com/w3c/webappsec-clear-site-data/pull/77#issuecomment-1707836953\">Clear-Site-Data &lt;&gt; BFCache eviction</a> with <a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>. It seems like at least the top-level-frame header eviction shouldn't be controversial, is there any problem with specifying that?</p>\n<p>LMK if there's more context needed for any of those. We can also join the WHATWG triage meeting if needed, but we're all in APAC so we'll need to wait for the APAC friendly one.</p>\n","m.mentions":{"user_ids":["@annevk:matrix.org","@smaug:mozilla.org","@pvanderbeken:mozilla.org"]},"msgtype":"m.text"},"ts":1697539151268,"senderName":"Rakina Zata Amni","senderId":"@rakina:matrix.org","id":"$RYQ7BmluQTiP8GX8kxL6bCdMUfrIuI5GyA9H5DVfcHc"},
{"content":{"body":"Rakina Zata Amni: FWIW, I and peterv will discuss about that NotRestoredReasons later today. We'll comment in the spec issue.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@rakina:matrix.org\">Rakina Zata Amni</a>: FWIW, I and peterv will discuss about that NotRestoredReasons later today. We'll comment in the spec issue.","m.mentions":{"user_ids":["@rakina:matrix.org"]},"msgtype":"m.text"},"ts":1697539196046,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$6vdY9d-S2GCG3bgm1GZTGUqnO_92KGvnEl8gAEo_3fU"}
]