[
{"content":{"body":"Is there anything we need to protect against when it comes to navigation cross-origin redirects?\nI know we don't expose the redirect timing itself, but other than that do we consider this a same-origin navigation? (e.g. `example.com` has a link to `auth.com` that redirects back to `example.com/logged-in`)\n","format":"org.matrix.custom.html","formatted_body":"Is there anything we need to protect against when it comes to navigation cross-origin redirects?<br>I know we don't expose the redirect timing itself, but other than that do we consider this a same-origin navigation? (e.g. <code>example.com</code> has a link to <code>auth.com</code> that redirects back to <code>example.com/logged-in</code>)","msgtype":"m.text"},"ts":1688127305920,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$uy9C1FbJB44gxvn1KOZ23eyGobjqIEv3gyhtggmhLkw"},
{"content":{"body":"(context: https://github.com/w3c/csswg-drafts/issues/8684)","msgtype":"m.text"},"ts":1688127328716,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$TthRRHLTOZxUqGUw34rvmlf_510bMXCQ1RcqFoUS4XY"},
{"content":{"body":"Noam Rosenthal: there are definitely exceptions, but also https://en.wikipedia.org/wiki/Confused_deputy_problem","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: there are definitely exceptions, but also https://en.wikipedia.org/wiki/Confused_deputy_problem","msgtype":"m.text"},"ts":1688127435181,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$g455uCAmEzk4JbITgwwgwM6lz2u775Dm0S4_9fwmd0o"},
{"content":{"body":"annevk: I know about confused deputy, especially for subresources, trying to understand if and how it applies to navigations","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: I know about confused deputy, especially for subresources, trying to understand if and how it applies to navigations","msgtype":"m.text"},"ts":1688127487618,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$nhUzva-cehUkKNE0C4p5YiTicZyBaisaKuUxmQmlBmI"},
{"content":{"body":"It's not very different, e.g., we'll give a different set of cookies","msgtype":"m.text"},"ts":1688127688298,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$tETwegDWJ72B8APwBxBWckBBlp0qH1nffx2Yl-eJOcM"},
{"content":{"body":"ok this is about the fetching itself though. With transitions, I guess the developer could, without any new API, put some info in localStorage, navigate to `auth.com`, and then when reaching `example.com/logged-in` check that `localStorage` entry and `history.length` and perform their own transition","format":"org.matrix.custom.html","formatted_body":"ok this is about the fetching itself though. With transitions, I guess the developer could, without any new API, put some info in localStorage, navigate to <code>auth.com</code>, and then when reaching <code>example.com/logged-in</code> check that <code>localStorage</code> entry and <code>history.length</code> and perform their own transition","msgtype":"m.text"},"ts":1688128058232,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$DxXH9vO2X2ukDSIQpIqveKtHMAzUQxDWuT9Bl8OpmGk"},
{"content":{"body":"It's probably minor, but the transition could give the end user the impression that all is in order, while in fact there's some form of XSS going on. I'd just not add exceptions. We ended up regretting pretty much all same-origin policy exceptions.","msgtype":"m.text"},"ts":1688128583474,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$lBY5Xt8ZgNkSWrR87VyDbpjhx3lrBwTEwxK1xgTDsXA"}
]