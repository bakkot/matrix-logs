[
{"content":{"body":"Andreu Botella (he/they): yeah, otherwise it would have used ASCII whitespace (I think it might have done so initially, even)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@andreubotella:mozilla.org\">Andreu Botella (he/they)</a>: yeah, otherwise it would have used ASCII whitespace (I think it might have done so initially, even)","msgtype":"m.text"},"ts":1632719922615,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$0EVO9ZsEM9nKCtnYgAHyY5KPkt5TA1EzicAIqRc_mnA"},
{"content":{"body":"timothygu: that's a nice find, also :-(","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@timothygu:matrix.org\">timothygu</a>: that's a nice find, also :-(","msgtype":"m.text"},"ts":1632720071903,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$veZ0YtqvN2S1U-nH-DLj2_ysQvB7vYX7elP5UfLMKxw"},
{"content":{"body":"Feeling conflicted about tests like https://github.com/web-platform-tests/wpt/blob/master/html/semantics/scripting-1/the-script-element/script-charset-02.html passing review. On one hand, it caught a bug (not yet sure what) in my code. On the other hand, it tests something more than it's meant to. (Note the location of the `meta` after a `div`.)","format":"org.matrix.custom.html","formatted_body":"Feeling conflicted about tests like https://github.com/web-platform-tests/wpt/blob/master/html/semantics/scripting-1/the-script-element/script-charset-02.html passing review. On one hand, it caught a bug (not yet sure what) in my code. On the other hand, it tests something more than it's meant to. (Note the location of the <code>meta</code> after a <code>div</code>.)","msgtype":"m.text"},"ts":1632720293490,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$SmaXvQZKo2qA8bcbzYIHmkBbI6rzGk5RKFkHUPq_Y6U"},
{"content":{"body":"hsivonen: that's likely to happen I think if there isn't a lot of good coverage to begin with, but I also suspect that the <div> coming before was overlooked and considered inconsequential","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@hsivonen:mozilla.org\">hsivonen</a>: that's likely to happen I think if there isn't a lot of good coverage to begin with, but I also suspect that the &lt;div&gt; coming before was overlooked and considered inconsequential","msgtype":"m.text"},"ts":1632724523673,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$XNuIsARBYo9GcLYSfolDqVqGidtOmQcqRQCHdL9wGTU"},
{"content":{"body":" * hsivonen: that's likely to happen I think if there isn't a lot of good coverage to begin with, but I also suspect that the <div> coming before was overlooked or considered inconsequential","format":"org.matrix.custom.html","formatted_body":" * <a href=\"https://matrix.to/#/@hsivonen:mozilla.org\">hsivonen</a>: that's likely to happen I think if there isn't a lot of good coverage to begin with, but I also suspect that the &lt;div&gt; coming before was overlooked or considered inconsequential","m.new_content":{"body":"hsivonen: that's likely to happen I think if there isn't a lot of good coverage to begin with, but I also suspect that the <div> coming before was overlooked or considered inconsequential","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@hsivonen:mozilla.org\">hsivonen</a>: that's likely to happen I think if there isn't a lot of good coverage to begin with, but I also suspect that the &lt;div&gt; coming before was overlooked or considered inconsequential","msgtype":"m.text"},"m.relates_to":{"event_id":"$XNuIsARBYo9GcLYSfolDqVqGidtOmQcqRQCHdL9wGTU","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1632724533990,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$5rmfKdsU9X65cs07y6EiR_4_ZVkcSZuJyAzMkIsC_v0"},
{"content":{"body":"Earlier, I found a bug in my code due to WPT author metadata having non-ASCII even though the test lacked `<meta charset=utf-8>`, so I guess that was good actually.","format":"org.matrix.custom.html","formatted_body":"Earlier, I found a bug in my code due to WPT author metadata having non-ASCII even though the test lacked <code>&lt;meta charset=utf-8&gt;</code>, so I guess that was good actually.","msgtype":"m.text"},"ts":1632724620169,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$MYj68A97AQnoOidSv1AMMVQL_X4AaRK3UA1LeG6Dhpc"},
{"content":{"body":"therealandrecasal: commits prefixed with Meta:, Editorial:, or Review Draft Publication: don't make it to Twitter","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@therealandrecasal:matrix.org\">therealandrecasal</a>: commits prefixed with Meta:, Editorial:, or Review Draft Publication: don't make it to Twitter","msgtype":"m.text"},"ts":1632725239005,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$AAy8o_6Q0Yfqt-V2OqvrrdpJ63sQ7F0HPUxdClPGY38"},
{"content":{"body":"Hi annevk , seems like I'm back in the business of HTML/Fetch/resource-timing integration :) have a couple of PRs for when you have the time (https://github.com/whatwg/fetch/pull/1311 and https://github.com/whatwg/fetch/pull/1309)","format":"org.matrix.custom.html","formatted_body":"Hi <a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a> , seems like I'm back in the business of HTML/Fetch/resource-timing integration :) have a couple of PRs for when you have the time (https://github.com/whatwg/fetch/pull/1311 and https://github.com/whatwg/fetch/pull/1309)","msgtype":"m.text"},"ts":1632726473513,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$E6crYiPdghb7Ma04w5qTBjehfEvB4eitK-1YAFA2cj4"},
{"content":{"body":"I am new here. Don't know much about this.\nhttps://sixtimesanhour.com/","msgtype":"m.text"},"ts":1632731589692,"senderName":"ali ikram","senderId":"@tammyy:matrix.org","id":"$s9Rt63q-Okq0XXMdKZFpiiDo_zZoZQWaxkvfU3XXxfA"},
{"content":{"body":"Noam Rosenthal: that's great, I have a bit of a backlog today; not sure if there's anyone else that can help with reviewing but that would be nice","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: that's great, I have a bit of a backlog today; not sure if there's anyone else that can help with reviewing but that would be nice","msgtype":"m.text"},"ts":1632732216817,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$nioP4pYaP1XmYN8qbFJXXdcXJQeX3ZOmBpQSFgLy0kw"},
{"content":{"body":"annevk: no problem, it's there and ready for when your backlog permits. ","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: no problem, it's there and ready for when your backlog permits.","msgtype":"m.text"},"ts":1632732990368,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$GE_43WcD-mouKTwaJaSIPkb8l9B2np5n_pffpzO1RCw"},
{"content":{"body":"Jake Archibald: are you taking document.domain into account when determining the origin for history entries? I guess if the origin is the result of URL + sandbox it won't matter, but if the origin is taken from the document/global somehow we have to be careful.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jakea:matrix.org\">Jake Archibald</a>: are you taking document.domain into account when determining the origin for history entries? I guess if the origin is the result of URL + sandbox it won't matter, but if the origin is taken from the document/global somehow we have to be careful.","msgtype":"m.text"},"ts":1632736371420,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$sJbS_9eRiGyBZ5b0JGiPR_rlDcaIC-YtNtHEyzhy25A"},
{"content":{"body":"Jake Archibald: it came to mind when reading the history.state issue","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jakea:matrix.org\">Jake Archibald</a>: it came to mind when reading the history.state issue","msgtype":"m.text"},"ts":1632736410145,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$NzSAEVw_4lqOgF71JQjWvJQQZTmTTjB5YsKGxrAqbj8"},
{"content":{"body":"annevk: yeah, I haven't fully understood `document.domain` yet. Eg, does it change storage buckets? What happens to an existing IDB connection?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: yeah, I haven't fully understood <code>document.domain</code> yet. Eg, does it change storage buckets? What happens to an existing IDB connection?","msgtype":"m.text"},"ts":1632736521668,"senderName":"Jake Archibald","senderId":"@jakea:matrix.org","id":"$gWvRIURIUIXoZyD0fusYG_4FvBIjqaBDjt37GXbFvOM"},
{"content":{"body":"Jake Archibald: storage doesn't work for opaque origins and we essentially use the unmodified tuple origin and you'd do a same origin comparison with that (rather than same origin-domain)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jakea:matrix.org\">Jake Archibald</a>: storage doesn't work for opaque origins and we essentially use the unmodified tuple origin and you'd do a same origin comparison with that (rather than same origin-domain)","msgtype":"m.text"},"ts":1632736741685,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$mnOYhzl3bXcEjr_985lOcbhFCeLjW1CpyfHj-bGWQiQ"},
{"content":{"body":"annevk: I'm not 100% what to do with the origin of history entries yet, but my gut feeling is:\n\n- If there's a redirect on traversal, clear state associated with the history entry, and update the entry URL.\n- If the document is 'born' in a different origin than the entry URL (sandboxing, error documents) then the history state remains there, but the document cannot access it.\n- `document.domain` has no impact.\n\n`appHistory` introduces a new 'thing' here, in that a sandboxed page an do a series of fragment navigations, and the data in those fragments will later be revealed to a non-sandboxed page, because the entries are same-origin. I'm not really sure what to do about that.","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: I'm not 100% what to do with the origin of history entries yet, but my gut feeling is:</p>\n<ul>\n<li>If there's a redirect on traversal, clear state associated with the history entry, and update the entry URL.</li>\n<li>If the document is 'born' in a different origin than the entry URL (sandboxing, error documents) then the history state remains there, but the document cannot access it.</li>\n<li><code>document.domain</code> has no impact.</li>\n</ul>\n<p><code>appHistory</code> introduces a new 'thing' here, in that a sandboxed page an do a series of fragment navigations, and the data in those fragments will later be revealed to a non-sandboxed page, because the entries are same-origin. I'm not really sure what to do about that.</p>\n","msgtype":"m.text"},"ts":1632737346388,"senderName":"Jake Archibald","senderId":"@jakea:matrix.org","id":"$G1tr59rB35rYAn7jGcZW0mk1PvYxetVa_jEcF695dfM"},
{"content":{"body":"Jake Archibald: perhaps we can store an opaque flag on the history entry that would avoid revealing it in those cases?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jakea:matrix.org\">Jake Archibald</a>: perhaps we can store an opaque flag on the history entry that would avoid revealing it in those cases?","msgtype":"m.text"},"ts":1632737507299,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$DITQw3kKT3VrigoPwLnmrgmBFfQ2OHpIkzShviTUoCo"},
{"content":{"body":"Jake Archibald: the 'born' case also seems reason to clear state to me","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jakea:matrix.org\">Jake Archibald</a>: the 'born' case also seems reason to clear state to me","msgtype":"m.text"},"ts":1632737560493,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$g7-EhXkNbzJSwaEvpYfyHh15UWaLfd5qVFEcsfPBmcc"},
{"content":{"body":"annevk: The 'born in different domain' case can only happen due to errors and sandboxing right? With sandboxing we don't grant access to storage anyway, and in the error case clearing state seems bad, since a refresh might recover from the error","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: The 'born in different domain' case can only happen due to errors and sandboxing right? With sandboxing we don't grant access to storage anyway, and in the error case clearing state seems bad, since a refresh might recover from the error","msgtype":"m.text"},"ts":1632737711370,"senderName":"Jake Archibald","senderId":"@jakea:matrix.org","id":"$bku0gRJ2mcrxyFbc9wXGBNBQmsQ5GRocmlO1fZzDr84"},
{"content":{"body":"Yeah, maybe. I guess in the specific scenario of short-lived history that is the most likely. Also when coupled with the same origin limitation as if the domain was retired none of the other pages would work either.","msgtype":"m.text"},"ts":1632738092414,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$Ouz0qNALum0YEja0HpsJCgIXs2U1-aL0srYsnb8-aaY"},
{"content":{"body":"annevk: If a script is no-cors, and it triggers an unhandled exception, we normalise the error and remove the stack. But, if a another script catches the error via `try`/`catch`, you get the full error & stack. Is that right? Why is the latter ok?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: If a script is no-cors, and it triggers an unhandled exception, we normalise the error and remove the stack. But, if a another script catches the error via <code>try</code>/<code>catch</code>, you get the full error &amp; stack. Is that right? Why is the latter ok?","msgtype":"m.text"},"ts":1632744016921,"senderName":"Jake Archibald","senderId":"@jakea:matrix.org","id":"$8OWnUGOFObJHDetojn4jCunBrQpDRU_qEVCX7LDKSfs"},
{"content":{"body":"Jake Archibald: see https://github.com/whatwg/html/issues/2440 and https://github.com/whatwg/html/issues/958","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jakea:matrix.org\">Jake Archibald</a>: see https://github.com/whatwg/html/issues/2440 and https://github.com/whatwg/html/issues/958","msgtype":"m.text"},"ts":1632744200304,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$5z6hvY3sJOhwVXi6EjRCYZSgI4FwoBCVl9cgIzZ5b5Y"},
{"content":{"body":"ta","msgtype":"m.text"},"ts":1632744216902,"senderName":"Jake Archibald","senderId":"@jakea:matrix.org","id":"$bB6nASlKd0AGqJJCndxNs8Iy1pTAGEkO6_tkbtvgM5U"},
{"content":{"body":"annevk should I get a spec PR together for https://github.com/whatwg/fetch/issues/1310#issuecomment-927889382, or does it need more discussion?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a> should I get a spec PR together for https://github.com/whatwg/fetch/issues/1310#issuecomment-927889382, or does it need more discussion?","msgtype":"m.text"},"ts":1632762655534,"senderName":"Jake Archibald","senderId":"@jakea:matrix.org","id":"$ETJqYVHyb6tMm8CUpIIwejL4BpZawBKM04XE3THBHYg"},
{"content":{"body":"Jake Archibald: did Chrome's networking and security team have a look? It's probably okay though, within those limits","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jakea:matrix.org\">Jake Archibald</a>: did Chrome's networking and security team have a look? It's probably okay though, within those limits","msgtype":"m.text"},"ts":1632763251153,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$23HXI5IErLX9TXNfumJtt2nBYWf1AxthNKfPw4YDcgE"},
{"content":{"body":"What I'd prefer btw is standardize a TLS handshake that removes the need for the preflight","msgtype":"m.text"},"ts":1632763280363,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$4_88a9YWWvrXdZKelD3AsYhzDjyOAbil_fJ-vnc9r2Y"},
{"content":{"body":"annevk I'll loop them in. The TLS sounds interesting","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a> I'll loop them in. The TLS sounds interesting","msgtype":"m.text"},"ts":1632763310479,"senderName":"Jake Archibald","senderId":"@jakea:matrix.org","id":"$VBN2KnjSzjAQ41N9mzRWnKcbgVqkH6R7XlgSnmVUJGI"},
{"content":{"body":"Jake Archibald: basically something like My-Server-Is-CORS-Aware: [insert origin here] in TLS speak","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jakea:matrix.org\">Jake Archibald</a>: basically something like My-Server-Is-CORS-Aware: [insert origin here] in TLS speak","msgtype":"m.text"},"ts":1632763483468,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$jmONARvmT1Y2dR022S0yDNR4ajhz0hJZFBIC-rqHCa4"},
{"content":{"body":"The badness is that someone could declare this as a policy and the server not actually being aware as these things are somewhat far apart from each other, but hopefully it being somewhat difficult helps with that","msgtype":"m.text"},"ts":1632763546765,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$Qeb4PALSbPQlqkyGuSO_gNJRArv9Qc4-qjJwtYLUOBY"},
{"content":{"body":"sideshowbarker: You probably want to block this dude <https://github.com/mdn/content/issues/9306>; he's a crank who's escaped the JS Pipeline Operator repo and started spamming a bunch of other places.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sideshowbarker:mozilla.org\">sideshowbarker</a>: You probably want to block this dude <a href=\"https://github.com/mdn/content/issues/9306\">https://github.com/mdn/content/issues/9306</a>; he's a crank who's escaped the JS Pipeline Operator repo and started spamming a bunch of other places.","msgtype":"m.text"},"ts":1632783398496,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$i3vXLdgWDwvnfyXiWFPHtQud4lePqW-fLJ6A3deEnnw"},
{"content":{"body":"Are the environment discarding steps ever actually overridden?","msgtype":"m.text"},"ts":1632784478960,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$7kfRH_oHr5xbFq0uLPlRYTDVquG5hjvViy4xgDhSwbI"},
{"content":{"body":"When it doubt, check the service worker spec. Yep, they are defined there","msgtype":"m.text"},"ts":1632784517457,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$eIYCNK0CHOUKGVKxWhO8TMiTl79rt1MVdR4iQkeRlzA"}
]