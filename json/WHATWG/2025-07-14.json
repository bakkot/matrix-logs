[
{"content":{"body":"[Create and initialize a Document object](https://html.spec.whatwg.org/multipage/document-lifecycle.html#initialise-the-document-object)\n> 3. Let creationURL be navigationParams's response's URL.\n> 4. If navigationParams's request is non-null, then set creationURL to navigationParams's request's current URL.\n\nCould anyone explain the meaning of these two lines? Why does the request case prevail over the response case?","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://html.spec.whatwg.org/multipage/document-lifecycle.html#initialise-the-document-object\">Create and initialize a Document object</a></p>\n<blockquote>\n<ol start=\"3\">\n<li>Let creationURL be navigationParams's response's URL.</li>\n<li>If navigationParams's request is non-null, then set creationURL to navigationParams's request's current URL.</li>\n</ol>\n</blockquote>\n<p>Could anyone explain the meaning of these two lines? Why does the request case prevail over the response case?</p>\n","m.mentions":{},"msgtype":"m.text"},"ts":1752470582977,"senderName":"Maxim Vaarwel","senderId":"@dmaxim:matrix.org","id":"$ThSX5SxRbUdxU0mXY0y_XDJsKmdXiqgZHqOKY8r0pp4"},
{"content":{"body":"I think it is more, let url = hasRequest ? request's current url : fallback to response url since that's all we have.","m.mentions":{},"msgtype":"m.text"},"ts":1752471365801,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$SSXPp3tLXxoJvKCmeZaAKzxCk0H8Ri3gncRP872NE7s"},
{"content":{"body":"I think the network error case is a good example of when they would be different and request's would be more correct.","m.mentions":{},"msgtype":"m.text"},"ts":1752471437647,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$4_CY26IFa9f3SYcJ9UADbUagMZYlazZkD_byqQ0z4gI"},
{"content":{"body":"Luke Warlow: FWIW, I tend to agree with Domenic that mutually exclusive `ReflectX` attributes are nicer. Much easier to tell if someone made a mistake that way and also what something means. I.e., I'd rather see `[ReflectURL]` than `[Reflect, ReflectURL]`.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@lwarlow:igalia.com\">Luke Warlow</a>: FWIW, I tend to agree with Domenic that mutually exclusive <code>ReflectX</code> attributes are nicer. Much easier to tell if someone made a mistake that way and also what something means. I.e., I'd rather see <code>[ReflectURL]</code> than <code>[Reflect, ReflectURL]</code>.","m.mentions":{"user_ids":["@lwarlow:igalia.com"]},"msgtype":"m.text"},"ts":1752471634902,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$QmdF2HOBVlTIvrLu2N9AOzKFsg3A5zlQKw8WxO1lAmA"},
{"content":{"body":"Got it, but what about a network error, could you give an example?","m.mentions":{},"m.relates_to":{"event_id":"$4_CY26IFa9f3SYcJ9UADbUagMZYlazZkD_byqQ0z4gI","is_falling_back":true,"m.in_reply_to":{"event_id":"$4_CY26IFa9f3SYcJ9UADbUagMZYlazZkD_byqQ0z4gI"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1752471751690,"senderName":"Maxim Vaarwel","senderId":"@dmaxim:matrix.org","id":"$R0ahjsFcKZJsjkr8G6b15HQtRm0b2GzoSv5CUYc0_6o"},
{"content":{"body":"A network error is defined in the Fetch spec to be a response whose only property is that its response code is 0. So if the response gets set to a network error, then it'd not be correct to set the resulting document's URL to the network error response's URL (which is left as the default of null).","m.mentions":{},"m.relates_to":{"event_id":"$4_CY26IFa9f3SYcJ9UADbUagMZYlazZkD_byqQ0z4gI","is_falling_back":true,"m.in_reply_to":{"event_id":"$R0ahjsFcKZJsjkr8G6b15HQtRm0b2GzoSv5CUYc0_6o"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1752472168876,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$StgpdDSQ38phcAKP5IdFtk4kLvTntenOn1Il6XuWIMo"},
{"content":{"body":"* A network error is defined in the Fetch spec to be a response with very few properties set https://fetch.spec.whatwg.org/#concept-network-error. So if the response gets set to a network error, then it'd not be correct to set the resulting document's URL to the network error response's URL (which is left as the default of null).","m.mentions":{"user_ids":["@dmaxim:matrix.org"]},"m.new_content":{"body":"A network error is defined in the Fetch spec to be a response with very few properties set https://fetch.spec.whatwg.org/#concept-network-error. So if the response gets set to a network error, then it'd not be correct to set the resulting document's URL to the network error response's URL (which is left as the default of null).","m.mentions":{"user_ids":["@dmaxim:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$StgpdDSQ38phcAKP5IdFtk4kLvTntenOn1Il6XuWIMo","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1752472190494,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$YEGUJXU_wYR_0Pnw8JuKI7Q-7l3eZwnM46xoQWdTN4o"},
{"content":{"body":"waz up","m.mentions":{},"msgtype":"m.text"},"ts":1752474988710,"senderName":"Vince Lam","senderId":"@xxddscoolxx:matrix.org","id":"$cUlE1YHIuzZqEJWlrVyEnc_ih2s-MP17PjYMC1lMnXg"}
]