[
{"content":{"body":"Yeah, that seems to have worked. Thanks!","m.mentions":{},"m.relates_to":{"event_id":"$qKcLYbMtsCNLujcrasYZuj0nJt6agx_Hegt00rrOudY","is_falling_back":true,"m.in_reply_to":{"event_id":"$3csztQ7zWhQR1qpYputXV0tp_xyLMZ0L5MNHwcWMzQQ"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1696921183721,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$2basHpo4ewmaaZtzoHQM9jM2amdz7dIvnZl7g-51kms"},
{"content":{"body":"Note that OP had already left the channel.","m.mentions":{},"m.relates_to":{"event_id":"$Hk_ohWjwsvqPVwR1AvtBAyagaR57P6euT9IybsL0A0Q","is_falling_back":true,"m.in_reply_to":{"event_id":"$6CaAz7q6OqwHdNZ3l0PUP-tlg8tIt7fK47QwLz_WJrs"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1696921271847,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$HZj8jPBqqGoX7Xyt0S6Qh53Y5E54G_7IFrpcRSnpFPI"},
{"content":{"body":"Domenic: https://github.com/whatwg/html/pull/9538#discussion_r1328593134 still seems concerning with the unsafe parser methods","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: https://github.com/whatwg/html/pull/9538#discussion_r1328593134 still seems concerning with the unsafe parser methods","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"ts":1696925220577,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$iCeghw4p4UZb1hsYhCSVKa0eIxGE8UmINg1mlRW5g5g"},
{"content":{"body":"Domenic: is there test coverage for that state? In particular because implementations also are not aligned on HTMLDocument vs XMLDocument vs Document and such","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: is there test coverage for that state? In particular because implementations also are not aligned on HTMLDocument vs XMLDocument vs Document and such","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"ts":1696925248443,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$yiBq4Wy6xC90ANRb-MSy19Tmlo_kvV8Owoy_N3VLjcc"},
{"content":{"body":"annevk: I agree with Joey here that everything is initialized and all spec code that can be shared, is shared.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: I agree with Joey here that everything is initialized and all spec code that can be shared, is shared.","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1696925259394,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$uWtxntnebLwsnb6EQUjE5Cbxt0Ok3Ey050DYbzQgA8c"},
{"content":{"body":"Domenic: so you're saying type should be \"xml\"?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: so you're saying type should be \"xml\"?","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"ts":1696925270867,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$lviti1PBgilvb7OGbucIx6IDgPooh4GgNaHDZ1wlLh8"},
{"content":{"body":"There is test coverage for that state.","m.mentions":{},"msgtype":"m.text"},"ts":1696925271439,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$6PSMnUvu68cvlC5r_2TZKLuziH3YaJ__tM63VmW2J5o"},
{"content":{"body":"No, type gets set to xml elsewhere","m.mentions":{},"msgtype":"m.text"},"ts":1696925279757,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$PoevoEL0vhndMDOQMtckVPakpm5bDUJFKt2OSTImKYc"},
{"content":{"body":"Domenic: note that type and content type are distinct","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: note that type and content type are distinct","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"ts":1696925303509,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$Bz5XxVvNt8HmsIL9u30HnJHiCQ7WeZmWOeNQ5k4_VDo"},
{"content":{"body":"https://whatpr.org/html/9538/dynamic-markup-insertion.html#parse-html-from-a-string","m.mentions":{},"msgtype":"m.text"},"ts":1696925312006,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$cfE-ddL29PKIFHnY6EZULYr9hW1bfSuSXQ0lP5Sn--w"},
{"content":{"body":" * No, type gets set to html elsewhere","m.mentions":{},"m.new_content":{"body":"No, type gets set to html elsewhere","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$PoevoEL0vhndMDOQMtckVPakpm5bDUJFKt2OSTImKYc","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1696925325325,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$nCbFRdEvFYsWVR5iDlkFMSWwKPhfmfn6jCGojJQ1BM8"},
{"content":{"body":"Domenic: I see, so URL will be about:blank meaning relative URLs will break?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: I see, so URL will be about:blank meaning relative URLs will break?","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"ts":1696925420589,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$pOyecjPzg6h_gfcc4Z2QDMoIgF5QXM9xvWSKsoBo12U"},
{"content":{"body":"Yes, this is intentional.","m.mentions":{},"msgtype":"m.text"},"ts":1696925428911,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$A8CCsJ4QL0KGgkpiqA-IwilMX-PHm1SlRmUDk_iTOBE"},
{"content":{"body":"We discussed it upthread in the PR","m.mentions":{},"msgtype":"m.text"},"ts":1696925434659,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$rB2Jk8qdwtKT-VjajHtAklJFiYVH2Rvu7aNbxww4Cn8"},
{"content":{"body":"If people want URL inheritance we can add a { url } option in the future.","m.mentions":{},"msgtype":"m.text"},"ts":1696925446122,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$gyU9pRHQGOpFPsnfQJTieqgCA6nz4uN4TDxhxlafWH0"},
{"content":{"body":"https://github.com/whatwg/html/pull/9538#discussion_r1293136059 is hard to find and the commit message doesn't describe it, but okay.","m.mentions":{},"msgtype":"m.text"},"ts":1696925597164,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$0QKpwT1_nSH9ZxdgGgkgVLxaAhl4q1jecSPIyihHuOM"},
{"content":{"body":"Anyway, I guess that's fine. Though `new Document()` does inherit the origin. Hmm.","format":"org.matrix.custom.html","formatted_body":"Anyway, I guess that's fine. Though <code>new Document()</code> does inherit the origin. Hmm.","m.mentions":{},"msgtype":"m.text"},"ts":1696925722324,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$GdLcoJMgKSgFblEvmprKi3bsgtadtDZ6Z5ivh8a74z8"},
{"content":{"body":" * Anyway, I guess that's fine. Though `new Document()` does inherit the origin. Hmm. Maybe it shouldn't have?","format":"org.matrix.custom.html","formatted_body":" * Anyway, I guess that's fine. Though <code>new Document()</code> does inherit the origin. Hmm. Maybe it shouldn't have?","m.mentions":{},"m.new_content":{"body":"Anyway, I guess that's fine. Though `new Document()` does inherit the origin. Hmm. Maybe it shouldn't have?","format":"org.matrix.custom.html","formatted_body":"Anyway, I guess that's fine. Though <code>new Document()</code> does inherit the origin. Hmm. Maybe it shouldn't have?","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$GdLcoJMgKSgFblEvmprKi3bsgtadtDZ6Z5ivh8a74z8","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1696925738974,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$ittWdxwtkz9L7xR4hxh5mL3EFjdGnQHfq7M7jZe8PGQ"},
{"content":{"body":"Yeah the inheritance seems all very magic to me, I say, if you want it, we should make that the non-default.","m.mentions":{},"msgtype":"m.text"},"ts":1696929865462,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$L8yoMgDHvgy8y7YHy-X5nf3YhGuJVFu42MmiPhvdg1E"},
{"content":{"body":"I recorded that we need tests for document.origin in Joey's CL, I missed that one, thanks.","m.mentions":{},"msgtype":"m.text"},"ts":1696929984233,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$ZQlOVrnbzXf_9pqksKJ3ci-2OqnKAOLqUUODOIqD1xQ"},
{"content":{"body":"Domenic: not sure what I want, but I can imagine web developers wanting it for URL at least, having `<img>` not work has been an issue of sorts before I vaguely recall","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: not sure what I want, but I can imagine web developers wanting it for URL at least, having <code>&lt;img&gt;</code> not work has been an issue of sorts before I vaguely recall","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"ts":1696931472622,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$fzEPj8fOnSWG_jPtDwQM-ZaiXjbNjH6ALEawJtigW3M"},
{"content":{"body":"(work in the sense of `.href` not returning something useful)","format":"org.matrix.custom.html","formatted_body":"(work in the sense of <code>.href</code> not returning something useful)","m.mentions":{},"msgtype":"m.text"},"ts":1696931500785,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$9GL9tDgQMkh33M7QK-CzhYf5914tEnXCPehxXnpekY0"},
{"content":{"body":"zcorpan: https://github.com/whatwg/html/pull/9689 should be good now, but happy to wait a bit to see if more people want to chime in","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: https://github.com/whatwg/html/pull/9689 should be good now, but happy to wait a bit to see if more people want to chime in","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"msgtype":"m.text"},"ts":1696931549366,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$joJiMQVgHZNC_pNREvo5IqGF7kgKLpVeCHdWDQDdqu0"},
{"content":{"body":"annevk: about https://bugs.webkit.org/show_bug.cgi?id=192000, would a patch that conforms WebKit to the `Content-Type` parsing requirements in the Fetch spec actually be accepted? Or instead not — because it would break on too many existing sites?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: about https://bugs.webkit.org/show_bug.cgi?id=192000, would a patch that conforms WebKit to the <code>Content-Type</code> parsing requirements in the Fetch spec actually be accepted? Or instead not — because it would break on too many existing sites?","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1696938870815,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$lNFYP8SBe_Wuj1iKHQQbmM3f4NDnG1PlRh7GoB7ZrvA"},
{"content":{"body":"> <@annevk:matrix.org> Domenic: not sure what I want, but I can imagine web developers wanting it for URL at least, having `<img>` not work has been an issue of sorts before I vaguely recall\n\nThe simplest workaround is for them to inject a <base> element. But yeah, we could add something if we hear a request.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$fzEPj8fOnSWG_jPtDwQM-ZaiXjbNjH6ALEawJtigW3M?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br /><a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: not sure what I want, but I can imagine web developers wanting it for URL at least, having <code>&lt;img&gt;</code> not work has been an issue of sorts before I vaguely recall</blockquote></mx-reply>The simplest workaround is for them to inject a <base> element. But yeah, we could add something if we hear a request.","m.relates_to":{"m.in_reply_to":{"event_id":"$fzEPj8fOnSWG_jPtDwQM-ZaiXjbNjH6ALEawJtigW3M"}},"msgtype":"m.text"},"ts":1696942697538,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$VH4aB1yCXrJbPxWrPM7K5ksfuBLeqvfmiKkgrshXJJQ"},
{"content":{"body":"* In reply to @annevk:matrix.org\nDomenic: not sure what I want, but I can imagine web developers wanting it for URL at least, having <img> not work has been an issue of sorts before I vaguely recall\n\nThe simplest workaround is for them to inject a `<base>` element. But yeah, we could add something to configure the URL and/or base URL out of band, if we hear a request.","m.new_content":{"body":"> <@annevk:matrix.org> Domenic: not sure what I want, but I can imagine web developers wanting it for URL at least, having `<img>` not work has been an issue of sorts before I vaguely recall\n\nIn reply to @annevk:matrix.org\nDomenic: not sure what I want, but I can imagine web developers wanting it for URL at least, having <img> not work has been an issue of sorts before I vaguely recall\n\nThe simplest workaround is for them to inject a `<base>` element. But yeah, we could add something to configure the URL and/or base URL out of band, if we hear a request.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$fzEPj8fOnSWG_jPtDwQM-ZaiXjbNjH6ALEawJtigW3M?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a><br /><a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: not sure what I want, but I can imagine web developers wanting it for URL at least, having <code>&lt;img&gt;</code> not work has been an issue of sorts before I vaguely recall</blockquote></mx-reply><p>In reply to @annevk:matrix.org<br />Domenic: not sure what I want, but I can imagine web developers wanting it for URL at least, having <img> not work has been an issue of sorts before I vaguely recall</p>\n<p>The simplest workaround is for them to inject a <code>&lt;base&gt;</code> element. But yeah, we could add something to configure the URL and/or base URL out of band, if we hear a request.</p>","msgtype":"m.text"},"m.relates_to":{"event_id":"$VH4aB1yCXrJbPxWrPM7K5ksfuBLeqvfmiKkgrshXJJQ","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1696942738777,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$GlUv-OY77YgMRMt2qeSrLqdqBV_Kq-OuxtATUZi8V-0"},
{"content":{"body":"sideshowbarker: not sure all of it can be fixed in WebKit, but I think it's an area we'd be willing to clean up, might need some kind of preference so it's easy to revert for select sites?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">sideshowbarker</a>: not sure all of it can be fixed in WebKit, but I think it's an area we'd be willing to clean up, might need some kind of preference so it's easy to revert for select sites?","m.mentions":{"user_ids":["@sideshowbarker:matrix.org"]},"msgtype":"m.text"},"ts":1696942985907,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$MbcoW8z3sTbY6Sk_XA6tF7bvoEOqMDKZ0GPv28noS2E"},
{"content":{"body":"Domenic: I guess Google should know since iirc Google mainly pushed for this method?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: I guess Google should know since iirc Google mainly pushed for this method?","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"ts":1696943127069,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$cFS-U_mG2yD1yA9yrj-k4JPkppBnCqOC0lE3g_HvQVU"},
{"content":{"body":"Yeah we haven't heard any, that's why I promoted the simpler option.","m.mentions":{},"msgtype":"m.text"},"ts":1696943264731,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$oNq0sN7XQ1tvuxgwKSLhq61420h81T6CGZelidmBGtQ"},
{"content":{"body":"I wonder if it's too late to change `new Document()`, but I also don't really want to work on it myself","format":"org.matrix.custom.html","formatted_body":"I wonder if it's too late to change <code>new Document()</code>, but I also don't really want to work on it myself","m.mentions":{},"msgtype":"m.text"},"ts":1696946531320,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$77TzAHktaK0_cFrJyKnmeHrZtGBBjtEMo_1iHHoQgbU"}
]