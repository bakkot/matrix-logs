[
{"content":{"body":"> <@domfarolino:matrix.org> > there are lots of APIs which are not related to the DOM.\n> \n> So \"related to the DOM\" means having a content attribute then?\n\nBy \"related to the DOM\" I mean \"related to the structure of nodes and attributes, i.e. the DOM tree\"","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$1wtY68_RO-QyMIJjLN9leOxBicQcS2ruRpSgxZDZB_0?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@domfarolino:matrix.org\">@domfarolino:matrix.org</a><br><blockquote>\n<p>there are lots of APIs which are not related to the DOM.</p>\n</blockquote>\n<p>So \"related to the DOM\" means having a content attribute then?</p>\n</blockquote></mx-reply>By \"related to the DOM\" I mean \"related to the structure of nodes and attributes, i.e. the DOM tree\"","m.mentions":{"user_ids":["@domfarolino:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$1wtY68_RO-QyMIJjLN9leOxBicQcS2ruRpSgxZDZB_0"}},"msgtype":"m.text"},"ts":1701660964271,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$J7mya9eLPX6yzCFGcp1j03apYOS-7nyiNHo8p7n8ufY"},
{"content":{"body":"> <@domfarolino:matrix.org> If someone introduces an IDL attribute, but also wants to trigger the underlying behavior without script, then they'd have to have it reflect a content attribute with the same name. Is that a good enough \"justification\" / reason for doing that.\n\nI would work the other way around. Content attributes first; if they exist you automatically get an IDL attribute. If you don't need a content attribute then you are just doing normal JS API design.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$D2leos334G1_1crZ5vRrj70Rq4cXjX4NxGHBYiGeo_I?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@domfarolino:matrix.org\">@domfarolino:matrix.org</a><br>If someone introduces an IDL attribute, but also wants to trigger the underlying behavior without script, then they&#39;d have to have it reflect a content attribute with the same name. Is that a good enough &quot;justification&quot; / reason for doing that.</blockquote></mx-reply>I would work the other way around. Content attributes first; if they exist you automatically get an IDL attribute. If you don't need a content attribute then you are just doing normal JS API design.","m.mentions":{"user_ids":["@domfarolino:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$D2leos334G1_1crZ5vRrj70Rq4cXjX4NxGHBYiGeo_I"}},"msgtype":"m.text"},"ts":1701661006580,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$Jf5kP_WlwRVyZNssksN3SINsuevACqE-52aW9q-UQwc"},
{"content":{"body":"> <@domfarolino:matrix.org> It seems like \"wanting to do things that you can do with an IDL attribute, but without JS\" is the big motivation for wanting to reflect an IDL attribute?\n\nNo, the motivation is wanting to do things in JS, slightly easier and more idiomatically. Without IDL attribute reflection: `el.setAttribute(\"foo\", \"\")`. With IDL attribute reflection: `el.foo = true`.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$oaVpJ8w3i8LHCFOAIZKQP5eYQsKaPLt1_55ysCIdcaQ?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@domfarolino:matrix.org\">@domfarolino:matrix.org</a><br>It seems like &quot;wanting to do things that you can do with an IDL attribute, but without JS&quot; is the big motivation for wanting to reflect an IDL attribute?</blockquote></mx-reply>No, the motivation is wanting to do things in JS, slightly easier and more idiomatically. Without IDL attribute reflection: <code>el.setAttribute(\"foo\", \"\")</code>. With IDL attribute reflection: <code>el.foo = true</code>.","m.mentions":{"user_ids":["@domfarolino:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$oaVpJ8w3i8LHCFOAIZKQP5eYQsKaPLt1_55ysCIdcaQ"}},"msgtype":"m.text"},"ts":1701661054515,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$Z4HrOn4vIquTXdgQjtAMzzMwIBX5mRk1NNGPZLWzUB8"},
{"content":{"body":"Thanks for the heads-up!","m.mentions":{},"m.relates_to":{"event_id":"$ow-O5tejdGrHxL73IQQvf_u1aYI82qp-8xGHV7J1gbc","is_falling_back":true,"m.in_reply_to":{"event_id":"$ow-O5tejdGrHxL73IQQvf_u1aYI82qp-8xGHV7J1gbc"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1701686091212,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$LV2AvpyVdr4KrlZxPnvqYQDvP-toW2yD1s06x3Gw4yA"},
{"content":{"body":"Eric Portis (he/him): I think the main issue is when the w and the image's actual width don't match. Let's say in your example \"a\" actual width is 4 pixels, then the layout width becomes 2px after loading the image, which would cause the next image to load, etc.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@etportis:matrix.org\">Eric Portis (he/him)</a>: I think the main issue is when the w and the image's actual width don't match. Let's say in your example \"a\" actual width is 4 pixels, then the layout width becomes 2px after loading the image, which would cause the next image to load, etc.","m.mentions":{"user_ids":["@etportis:matrix.org"]},"msgtype":"m.text"},"ts":1701686460360,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$sQ23bwblBdsWpXJVEUzkfeQCHkv08z7x-H0kzrWhb5o"},
{"content":{"body":"Eric Portis (he/him): a proposed alternative fix iirc was to stop the \"loop\" after the second load, but based on prior feedback about double downloads I think it's not acceptable to have double downloads even if it only happens sometimes","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@etportis:matrix.org\">Eric Portis (he/him)</a>: a proposed alternative fix iirc was to stop the \"loop\" after the second load, but based on prior feedback about double downloads I think it's not acceptable to have double downloads even if it only happens sometimes","m.mentions":{"user_ids":["@etportis:matrix.org"]},"msgtype":"m.text"},"ts":1701686595741,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$pggb2Dm4YY8ycB4lsIoqaUTlgl6MX_eR_2RU-cLyj3I"},
{"content":{"body":"Eric Portis (he/him): the other reason is to make it look wrong when not using width/height attributes (or have dimensions with css). Otherwise people might omit dimensions and we would likely double-download in such cases without size containment","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@etportis:matrix.org\">Eric Portis (he/him)</a>: the other reason is to make it look wrong when not using width/height attributes (or have dimensions with css). Otherwise people might omit dimensions and we would likely double-download in such cases without size containment","m.mentions":{"user_ids":["@etportis:matrix.org"]},"msgtype":"m.text"},"ts":1701686795914,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$LUUtbvaoTnxHaUzQdT2S5zqiPwhr6qFsCHeJeYM4dfY"},
{"content":{"body":"Eric Portis (he/him): I suspect size containment for images will be more annoying, and that's unfortunate but I hope acceptable!","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@etportis:matrix.org\">Eric Portis (he/him)</a>: I suspect size containment for images will be more annoying, and that's unfortunate but I hope acceptable!","m.mentions":{"user_ids":["@etportis:matrix.org"]},"msgtype":"m.text"},"ts":1701686886936,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$qn7Nq4B5Ifk4f4mMwtf8oWsxW66MIG1rfEQv0Y2LU8o"},
{"content":{"body":"> If you don't need a content attribute then you are just doing normal JS API design.\n\nThis is the part I'm curious about. I just don't really know when you would \"need\" a content attribute vs just stick with JS API design on the element's IDL interface. If someone says \"I want to introduce a new 'attribute' on this element\", then they've two options: (1) content attribute with automatic IDL reflection, vs (2) just IDL attribute, for a JS API. I'm not clear on how to provide guidance to select between those two. I would need to ask them a question relating to \"If you need/don't need a content attribute\" above. So I guess I'd ask \"Can this just be a JS API on the element's interface, or do you need it to also be a content attribute\". But to \"need a content attribute\" (i.e., an IDL attribute alone is insufficient) means your design desires to trigger the attribute's behavior without script... I think.. like just from HTML.","format":"org.matrix.custom.html","formatted_body":"<blockquote>\n<p>If you don't need a content attribute then you are just doing normal JS API design.</p>\n</blockquote>\n<p>This is the part I'm curious about. I just don't really know when you would \"need\" a content attribute vs just stick with JS API design on the element's IDL interface. If someone says \"I want to introduce a new 'attribute' on this element\", then they've two options: (1) content attribute with automatic IDL reflection, vs (2) just IDL attribute, for a JS API. I'm not clear on how to provide guidance to select between those two. I would need to ask them a question relating to \"If you need/don't need a content attribute\" above. So I guess I'd ask \"Can this just be a JS API on the element's interface, or do you need it to also be a content attribute\". But to \"need a content attribute\" (i.e., an IDL attribute alone is insufficient) means your design desires to trigger the attribute's behavior without script... I think.. like just from HTML.</p>\n","m.mentions":{},"msgtype":"m.text"},"ts":1701699641214,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$i00Z_ryFb71FkF6KqC9rUg7wDJpKrXe9O5XXl68cGco"},
{"content":{"body":"Dominic Farolino: I think usually it would become pretty clear, pretty fast","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domfarolino:matrix.org\">Dominic Farolino</a>: I think usually it would become pretty clear, pretty fast","m.mentions":{"user_ids":["@domfarolino:matrix.org"]},"msgtype":"m.text"},"ts":1701701899984,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$WDzw_FXqGHHu_gOxh0MB2ElhHBjpmtMonx2U8YeWkIU"},
{"content":{"body":"zcorpan: Thanks! The incorrect w attribute thing makes sense; looks like you suggested a fix for exactly that here https://github.com/whatwg/html/issues/9448#issuecomment-1611905790 (damn my memory)... but... seems like containment just felt cleaner from a spec/implementation perspective. An explicit severing of any possible way intrinsic size will or could ever influence layout size.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: Thanks! The incorrect w attribute thing makes sense; looks like you suggested a fix for exactly that here https://github.com/whatwg/html/issues/9448#issuecomment-1611905790 (damn my memory)... but... seems like containment just felt cleaner from a spec/implementation perspective. An explicit severing of any possible way intrinsic size will or could ever influence layout size.","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"msgtype":"m.text"},"ts":1701703646670,"senderName":"Eric Portis (he/him)","senderId":"@etportis:matrix.org","id":"$4ldQ-qKlzLoqKoHahND_Waj5d8-6OO8fzCb5hwgzwN4"},
{"content":{"body":"the current idea as i would like it is to do whats in the explainer here but reuse the select element instead of creating a selectlist element: https://open-ui.org/components/selectlist/","m.relates_to":{"event_id":"$s_DQtg5DhGRBS8shi4Kh9uWKqhrqr4xEp8OYPXP-NbA","is_falling_back":true,"m.in_reply_to":{"event_id":"$s_DQtg5DhGRBS8shi4Kh9uWKqhrqr4xEp8OYPXP-NbA"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1701703671578,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$ZNC6kqIjDglLejLw-oSwvfd9hiUsnHSZE9ofCfQFOHo"},
{"content":{"body":"oh and it seems likely that we will reuse the datalist element instead of creating a listbox element","m.relates_to":{"event_id":"$s_DQtg5DhGRBS8shi4Kh9uWKqhrqr4xEp8OYPXP-NbA","is_falling_back":true,"m.in_reply_to":{"event_id":"$ZNC6kqIjDglLejLw-oSwvfd9hiUsnHSZE9ofCfQFOHo"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1701703705152,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$FZdwIGcVouXbZ0nHrwHnpSZZfozvDDVEdhh8gzZYRzo"},
{"content":{"body":"so basically if you provide a <button> child to a select element, that will be slotted in to the default button and replace it","format":"org.matrix.custom.html","formatted_body":"so basically if you provide a <!-- raw HTML omitted --> child to a select element, that will be slotted in to the default button and replace it","m.relates_to":{"event_id":"$s_DQtg5DhGRBS8shi4Kh9uWKqhrqr4xEp8OYPXP-NbA","is_falling_back":true,"m.in_reply_to":{"event_id":"$FZdwIGcVouXbZ0nHrwHnpSZZfozvDDVEdhh8gzZYRzo"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1701703730926,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$OHM07s9tl5FjFL2NVVcDOQSborQ3vyzvBl71tcGE67s"},
{"content":{"body":"same with the datalist element replacing the native/default listbox","m.relates_to":{"event_id":"$s_DQtg5DhGRBS8shi4Kh9uWKqhrqr4xEp8OYPXP-NbA","is_falling_back":true,"m.in_reply_to":{"event_id":"$OHM07s9tl5FjFL2NVVcDOQSborQ3vyzvBl71tcGE67s"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1701703746391,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$FJTl9CTK3ntaGG8x5G-_AlkyCDH--uK7n5V8FrV3H1o"}
]