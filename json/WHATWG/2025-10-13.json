[
{"content":{"body":"Noam Rosenthal: why does https://html.spec.whatwg.org/#prepare-an-image-for-presentation return early in several steps, without getting to one of step 14 or 15? Also step 16 is only run if no other step returns.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: why does https://html.spec.whatwg.org/#prepare-an-image-for-presentation return early in several steps, without getting to one of step 14 or 15? Also step 16 is only run if no other step returns.","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1760352762488,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$D0dGGcLaj4t1Cnb2Xq6acDpkhFLT4cBpLAJ-BFJ41kc"},
{"content":{"body":"will take a look. Haven't touched that since 2020.","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$D0dGGcLaj4t1Cnb2Xq6acDpkhFLT4cBpLAJ-BFJ41kc"}},"msgtype":"m.text"},"ts":1760352827149,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$Pzhr4AQ0JiLLuI-XsGuZLN7AI2fPKDDCXEZoJyO8UUY"},
{"content":{"body":"Regarding step 16 - it's perhaps ambiguous from reading but this step is optional... it's not like the image is not going to be presented without it. Step 16 is like saying \"adjust the image presentation, now that the preferred density-correction dimensions are set\"","m.mentions":{},"m.relates_to":{"m.in_reply_to":{"event_id":"$Pzhr4AQ0JiLLuI-XsGuZLN7AI2fPKDDCXEZoJyO8UUY"}},"msgtype":"m.text"},"ts":1760353041140,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$bb_gsfpbFECQGWntWwwpf9CrGoRsKYy94gcCOJZSTBc"},
{"content":{"body":"Steps 8, 9, 10: it was a mitigation to having the density set accidentally due to e.g. EXIF information being copied around.\nRequiring the dimensions to have positive numbers and only use inches narrows the spectrum for accidental density setting.\nWe can reason about making it more lax, it was a bit of a judgement call at the time","m.mentions":{},"msgtype":"m.text"},"ts":1760353164033,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$kQxjierM2Z2llmUhLnEuH2Vy7BLA0jHXeheTktAKH2w"},
{"content":{"body":"Noam Rosenthal: so then PixelXDimension and PixelYDimension are also ignored for the early return cases","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: so then PixelXDimension and PixelYDimension are also ignored for the early return cases","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1760353266950,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$XhVEAvBXcQ-u5nHElPyNQ_9aWH4TD-XXV8Ubj4qlRzc"},
{"content":{"body":"yea they are","m.mentions":{},"msgtype":"m.text"},"ts":1760353280621,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$PK1NYymzHYhVrGuWT-T8Zw8kHVY5phBM5uKMYgOKv8U"},
{"content":{"body":"it's like \"this is accidental EXIF information\"","m.mentions":{},"msgtype":"m.text"},"ts":1760353294369,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$q0D5x5jtpR7C9YmUt1HSf7CgqaxMNqDf5LbYQBDWuwM"},
{"content":{"body":"I see, thanks. It's still not clear to me that step 16 is not important, as it was the text in place of this algorithm before. It can be read as \"don't render cross-origin images\" or \"don't render images with bogus EXIF\"","m.mentions":{},"msgtype":"m.text"},"ts":1760353397354,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$WZv-nDTBQm6JMaflrajbtPi8oVZ8NLeXoVacNVMWwVc"},
{"content":{"body":"I'll file an issue","m.mentions":{},"msgtype":"m.text"},"ts":1760353467589,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$lyUDVcK34p38Wsdzphe8Lize8pQY7ymTzaBzhIG5mGY"},
{"content":{"body":"Agreed, it can&should be made clearer. If you file an issue I'm happy to file a PR","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$WZv-nDTBQm6JMaflrajbtPi8oVZ8NLeXoVacNVMWwVc"}},"msgtype":"m.text"},"ts":1760353539502,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$nZDHOoo-GyGDfevY38MSH8YEZpJ-Fdv9VseSVFSiMnw"},
{"content":{"body":"Noam Rosenthal: https://github.com/whatwg/html/issues/11777","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: https://github.com/whatwg/html/issues/11777","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1760353703812,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$zfeMxP4uC1LNwgqa_-3pyVnbkErDiLAXk4R8mF4O-Fc"},
{"content":{"body":"Noam Rosenthal: Reviewing [#11762](https://github.com/whatwg/html/pull/11762) right now, thanks for working on this! I like the idea of passing the upcoming tracker into the event firing mechanism, but now I wonder if we need to keep the upcoming trackers in the global state at all, or if we can get away with just passing them around. That way we're less prone to accidentally breaking global state. \nThe only reason I see currently (I may be wrong though) why we need the `upcoming non-traverse API method tracker` would be to signal that navigation has aborted ([this step in `navigate()`](https://html.spec.whatwg.org/#dom-navigation-navigate:~:text=If%20this%27s%20upcoming%20non%2Dtraverse%20API%20method%20tracker%20is%20apiMethodTracker%2C%20then)), but I bet we can transport this information in another fashion (which may even be easier to understand). \nWDYT?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: Reviewing <a href=\"https://github.com/whatwg/html/pull/11762\">#11762</a> right now, thanks for working on this! I like the idea of passing the upcoming tracker into the event firing mechanism, but now I wonder if we need to keep the upcoming trackers in the global state at all, or if we can get away with just passing them around. That way we're less prone to accidentally breaking global state.<br>The only reason I see currently (I may be wrong though) why we need the <code>upcoming non-traverse API method tracker</code> would be to signal that navigation has aborted (<a href=\"https://html.spec.whatwg.org/#dom-navigation-navigate:~:text=If%20this%27s%20upcoming%20non%2Dtraverse%20API%20method%20tracker%20is%20apiMethodTracker%2C%20then\">this step in <code>navigate()</code></a>), but I bet we can transport this information in another fashion (which may even be easier to understand).<br>WDYT?","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1760358401187,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$RtFdGccZAVX7NJ-zpxDBLd6-kOOIqXko-0nSM3kJyFg"},
{"content":{"body":"Yea it would be great not to have those tidbits of global state... let me scan it a few times :)","m.mentions":{"user_ids":["@jjaschke:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$RtFdGccZAVX7NJ-zpxDBLd6-kOOIqXko-0nSM3kJyFg"}},"msgtype":"m.text"},"ts":1760358771111,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$-4-9K240joTsZueAExZI4WgfPGrMVOzaf1S0rjL9UZo"},
{"content":{"body":"Oh, also just noticed, the promote upcoming to ongoing algorithm that you inlined is also used in [reload()](https://html.spec.whatwg.org/#navigation-api-initiating-navigations:reload-2:~:text=Let%20apiMethodTracker%20be%20the%20result%20of%20maybe%20setting%20the%20upcoming%20non%2Dtraverse%20API%20method%20tracker%20for%20this%20given%20info%20and%20serializedState%2E,-Reload).","format":"org.matrix.custom.html","formatted_body":"Oh, also just noticed, the promote upcoming to ongoing algorithm that you inlined is also used in <a href=\"https://html.spec.whatwg.org/#navigation-api-initiating-navigations:reload-2:~:text=Let%20apiMethodTracker%20be%20the%20result%20of%20maybe%20setting%20the%20upcoming%20non%2Dtraverse%20API%20method%20tracker%20for%20this%20given%20info%20and%20serializedState%2E,-Reload\">reload()</a>.","m.mentions":{},"msgtype":"m.text"},"ts":1760358838758,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$mLEODH7OUwTc9UW2Q5K5UlbX6cYZ8Ad01q3Ayegx0C4"},
{"content":{"body":"THat's not that algo, it's \"maybe setting\", not \"promote\". There was only one use of \"promote\"","m.mentions":{"user_ids":["@jjaschke:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$mLEODH7OUwTc9UW2Q5K5UlbX6cYZ8Ad01q3Ayegx0C4"}},"msgtype":"m.text"},"ts":1760359169910,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$ib5GQFRmvwA5dvgoAIn9z-97RL6k7IOvj3fkbU5138o"},
{"content":{"body":"I think `navigate` can have a return value of whether the navigation was aborted prior to the promotion step","format":"org.matrix.custom.html","formatted_body":"I think <code>navigate</code> can have a return value of whether the navigation was aborted prior to the promotion step","m.mentions":{"user_ids":["@jjaschke:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$RtFdGccZAVX7NJ-zpxDBLd6-kOOIqXko-0nSM3kJyFg"}},"msgtype":"m.text"},"ts":1760359206788,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$320ekRBnOd3CWmD5jSnwNJN4JSZUHomdTy9PXMb1248"},
{"content":{"body":"Ugh, of course. \nBut, shouldn't we do the same we do for navigate (extract the upcoming tracker, then run the abort loop, then pass it back in) for reload? ","m.mentions":{"user_ids":["@noamr:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$ib5GQFRmvwA5dvgoAIn9z-97RL6k7IOvj3fkbU5138o"}},"msgtype":"m.text"},"ts":1760359505580,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$O_fnBEnpx0swZA_sR6PQpQtdlDLju-FxkO9c7o9BTGs"},
{"content":{"body":"No need. Because we do that at the beginning of https://html.spec.whatwg.org/#fire-a-push/replace/reload-navigate-event before we abort the previous one. It's only needed in the regular `navigate()` because it's also aborted earlier","format":"org.matrix.custom.html","formatted_body":"No need. Because we do that at the beginning of https://html.spec.whatwg.org/#fire-a-push/replace/reload-navigate-event before we abort the previous one. It's only needed in the regular <code>navigate()</code> because it's also aborted earlier","m.mentions":{"user_ids":["@jjaschke:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$O_fnBEnpx0swZA_sR6PQpQtdlDLju-FxkO9c7o9BTGs"}},"msgtype":"m.text"},"ts":1760359635524,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$K3crtd1fjCgteU9q7M2W0viV7o2kD82VIpAAZmxUdfI"},
{"content":{"body":"Oh sorry we don't. sec","m.mentions":{},"msgtype":"m.text"},"ts":1760359670309,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$6IqZtfxn7hUQCa6NuY5HD4OXNqvmujVFPulpCLxFcsQ"},
{"content":{"body":"* Oh sorry we don't. will update","m.mentions":{},"m.new_content":{"body":"Oh sorry we don't. will update","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$6IqZtfxn7hUQCa6NuY5HD4OXNqvmujVFPulpCLxFcsQ","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1760359858185,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$6T3QQpYeMibqyCb7JDRrrlkArRPX8cwKkxzv2zmw8yY"},
{"content":{"body":"Noam Rosenthal : I see two ways we could follow. One would be to remove `upcoming non-traverse API method tracker` altogether and just pass it around (if that works, I'd prefer that). Or we keep it, but then I think it should be enough to move it out of the global state [here](https://whatpr.org/html/11762/305f5a1...3f2f0bc/nav-history-apis.html#:~:text=If%20upcomingMethodTracker%20is%20null%2C%20then%20set%20upcomingMethodTracker%20to%20the%20upcoming%20non%2Dtraverse%20API%20method%20tracker%20%2E), then I don't think we need the change in the navigate algorithm (and pass the upcoming non-traverse tracker into the event firing algorithm)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a> : I see two ways we could follow. One would be to remove <code>upcoming non-traverse API method tracker</code> altogether and just pass it around (if that works, I'd prefer that). Or we keep it, but then I think it should be enough to move it out of the global state <a href=\"https://whatpr.org/html/11762/305f5a1...3f2f0bc/nav-history-apis.html#:~:text=If%20upcomingMethodTracker%20is%20null%2C%20then%20set%20upcomingMethodTracker%20to%20the%20upcoming%20non%2Dtraverse%20API%20method%20tracker%20%2E\">here</a>, then I don't think we need the change in the navigate algorithm (and pass the upcoming non-traverse tracker into the event firing algorithm)","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1760359996753,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$r9jh3V7fd1tUjVNNCW-1OZJUs0GQhiEr8olMAYKfb5o"},
{"content":{"body":"That's not enough because `navigateerror` can also be called from https://html.spec.whatwg.org/#beginning-navigation:set-the-ongoing-navigation","format":"org.matrix.custom.html","formatted_body":"That's not enough because <code>navigateerror</code> can also be called from https://html.spec.whatwg.org/#beginning-navigation:set-the-ongoing-navigation","m.mentions":{"user_ids":["@jjaschke:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$r9jh3V7fd1tUjVNNCW-1OZJUs0GQhiEr8olMAYKfb5o"}},"msgtype":"m.text"},"ts":1760360128887,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$uQGi5bwZkI-TrbGsHeukUIG1Fls21sAfkb9MaewzLMI"},
{"content":{"body":"Thanks. Then I'd hope we can go for variant one and remove it from the global state whatsoever.","m.mentions":{},"msgtype":"m.text"},"ts":1760360212686,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$dj6p3A58DdKJqBsRctmRhgree6RJriFE5Ghn78YH6Ec"},
{"content":{"body":"https://github.com/whatwg/html/pull/11779","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$zfeMxP4uC1LNwgqa_-3pyVnbkErDiLAXk4R8mF4O-Fc"}},"msgtype":"m.text"},"ts":1760360551192,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$m7LKYXrnpLUarwCrDU1MjMaiY3ygpPrBw-XOr7eeTSs"},
{"content":{"body":"OK I think I got it (in the new PR). I moved that state to be a boolean \"has been promoted\" on the method tracker. then we don't have to mess so much with `navigate`","format":"org.matrix.custom.html","formatted_body":"OK I think I got it (in the new PR). I moved that state to be a boolean \"has been promoted\" on the method tracker. then we don't have to mess so much with <code>navigate</code>","m.mentions":{"user_ids":["@jjaschke:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$dj6p3A58DdKJqBsRctmRhgree6RJriFE5Ghn78YH6Ec"}},"msgtype":"m.text"},"ts":1760363046352,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$JaNvogePHEitZq-XCEGdNUY2SdUCVrMmOH0FLoarXIk"},
{"content":{"body":"this \"upcoming method tracker\" bit is only for `navigate()` and `reload()` calls to ensure that those calls return value is in sync with `navigation.transition` etc. so I think this new design is cleaner... it's either created early in those calls and passed as an argument, or later on for use of `navigation.transition` and the rest.","format":"org.matrix.custom.html","formatted_body":"this \"upcoming method tracker\" bit is only for <code>navigate()</code> and <code>reload()</code> calls to ensure that those calls return value is in sync with <code>navigation.transition</code> etc. so I think this new design is cleaner... it's either created early in those calls and passed as an argument, or later on for use of <code>navigation.transition</code> and the rest.","m.mentions":{},"msgtype":"m.text"},"ts":1760363197990,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE"},
{"content":{"body":"(threading this for less noise)\nNoam Rosenthal : Why do we still need the upcoming non-traverse API method tracker as an object on the navigation object?","format":"org.matrix.custom.html","formatted_body":"(threading this for less noise)<br><a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a> : Why do we still need the upcoming non-traverse API method tracker as an object on the navigation object?","m.mentions":{"user_ids":["@noamr:matrix.org"]},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760363868160,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$a_SGsd8iSRgfKcfsLVAcGCVvhvcV46yn9ZRNTdgGrio"},
{"content":{"body":"sorry, PR is not finished I realized","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$a_SGsd8iSRgfKcfsLVAcGCVvhvcV46yn9ZRNTdgGrio"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760363918321,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$WtR1I3Kn5S8Gq7bSULHJYDHV0dweZzDQ1LQSV9X2zms"},
{"content":{"body":"OK I think it's ready","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$WtR1I3Kn5S8Gq7bSULHJYDHV0dweZzDQ1LQSV9X2zms"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760366709925,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$bplWG3oFfVfrf5hjHNUKxCUW8IQEDN-KfuAbNFuJ0dw"},
{"content":{"body":"looking","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$bplWG3oFfVfrf5hjHNUKxCUW8IQEDN-KfuAbNFuJ0dw"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760366728338,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$cZRaISXQuo5tn371Uk7phyPlFf4g4qPrVn754tbn-9c"},
{"content":{"body":"I think there is a missing thing there (and probably in existing implementation) - throwing an error when `reload()` fails. e.g. if your reload in an iframe aborts an existing navigation and the `navigateerror` event made the parent remove the iframe. this would currently return a defunct method tracker","format":"org.matrix.custom.html","formatted_body":"I think there is a missing thing there (and probably in existing implementation) - throwing an error when <code>reload()</code> fails. e.g. if your reload in an iframe aborts an existing navigation and the <code>navigateerror</code> event made the parent remove the iframe. this would currently return a defunct method tracker","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$cZRaISXQuo5tn371Uk7phyPlFf4g4qPrVn754tbn-9c"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760366940287,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$FL2w2bVweafvZTdxiVIKa4C71JzOn8-HX1XoKZi08iU"},
{"content":{"body":"in general I think this PR doesn't handle well the case that the document becomes inactive in the `navigateerror` even during a reload/navigate, because of the early \"upcoming\" check. ","format":"org.matrix.custom.html","formatted_body":"in general I think this PR doesn't handle well the case that the document becomes inactive in the <code>navigateerror</code> even during a reload/navigate, because of the early \"upcoming\" check.","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$FL2w2bVweafvZTdxiVIKa4C71JzOn8-HX1XoKZi08iU"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760367498069,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$NnTfftG846-bz-_Oeyo2s_eH5jW8zmGrlNtcuTNFjfo"},
{"content":{"body":"(taking a look, I think it was OK before *because* we were making those checks a bit late)","format":"org.matrix.custom.html","formatted_body":"(taking a look, I think it was OK before <em>because</em> we were making those checks a bit late)","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$NnTfftG846-bz-_Oeyo2s_eH5jW8zmGrlNtcuTNFjfo"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760367823976,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$Hcd14-tLtx2MOHkoCdMdzuTDo0MHrlmHMJak-FXrY1w"},
{"content":{"body":"Shouldn't we just hit the document-is-active check in [commit](https://whatpr.org/html/11762/305f5a1...83c1c84/nav-history-apis.html#inner-navigate-event-firing-algorithm:~:text=If%20event%20%27s%20relevant%20global%20object%20%27s%20associated%20Document%20is%20not%20fully%20active%20%2C%20then%20return%2E), which would then fail, and then we bail?","format":"org.matrix.custom.html","formatted_body":"Shouldn't we just hit the document-is-active check in <a href=\"https://whatpr.org/html/11762/305f5a1...83c1c84/nav-history-apis.html#inner-navigate-event-firing-algorithm:~:text=If%20event%20%27s%20relevant%20global%20object%20%27s%20associated%20Document%20is%20not%20fully%20active%20%2C%20then%20return%2E\">commit</a>, which would then fail, and then we bail?","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$Hcd14-tLtx2MOHkoCdMdzuTDo0MHrlmHMJak-FXrY1w"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760367868992,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$A9fqZdUta8vtYY3FtRNxqS0ZPFlhjWpt_m4biqvBoV8"},
{"content":{"body":"yea, but `navigate()` and `reload()` think everything is OK, and return a {committed, finished} promise dictionary that's never resolved","format":"org.matrix.custom.html","formatted_body":"yea, but <code>navigate()</code> and <code>reload()</code> think everything is OK, and return a {committed, finished} promise dictionary that's never resolved","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$A9fqZdUta8vtYY3FtRNxqS0ZPFlhjWpt_m4biqvBoV8"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760367963702,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$x_IvQf_btsGkB_6hwIj6AVHNjR16y433kSNsrsTk_Qo"},
{"content":{"body":"(nobody rejects those promises because they're only \"upcoming\")","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$x_IvQf_btsGkB_6hwIj6AVHNjR16y433kSNsrsTk_Qo"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760368309362,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$8Kw5rF_2cEavyLhuSKHKkYl15eCSlHRra82hukGy_nM"},
{"content":{"body":"Where would they have been rejected before? Wouldn't the old implementation also go into the commit step and return early?","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$8Kw5rF_2cEavyLhuSKHKkYl15eCSlHRra82hukGy_nM"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760369130057,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$2syVovUKcuB0LC2K1ZlurZ2Mk9ShzpkGGDXn_hQ9zSo"},
{"content":{"body":"yea but they were created after the abort phase (which is the original issue)","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$2syVovUKcuB0LC2K1ZlurZ2Mk9ShzpkGGDXn_hQ9zSo"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760369257584,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$w3psU9DN9skQAQClf6Zef6nS2RbUvYyE7dwyDW-wW-c"},
{"content":{"body":"so the \"upcoming\" and the \"ongoing\" trackers would be the same, and the \"early error\" result (rejected promises) would be returned","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$w3psU9DN9skQAQClf6Zef6nS2RbUvYyE7dwyDW-wW-c"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760369296859,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$5Na19J9k_dfDIOyxq68_PZURwjfgjrm0SJiPOJnv_no"},
{"content":{"body":"What if we did another document-is-active check at after the abort loop? ","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$5Na19J9k_dfDIOyxq68_PZURwjfgjrm0SJiPOJnv_no"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760369379778,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$XTwPnsC8JIH6rPVjTgOaDAOQ8d74-eg6HjpOKzAk7LE"},
{"content":{"body":"Uploaded a new revision","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$XTwPnsC8JIH6rPVjTgOaDAOQ8d74-eg6HjpOKzAk7LE"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760369395703,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$yXUYy2rj6sMq63cmkZf-UWTjleQeJmIRW4gAUH14urs"},
{"content":{"body":"there is another active check at \"fire the inner navigate event\", but it asserts if \"upcoming method tracker\" was passed in","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$yXUYy2rj6sMq63cmkZf-UWTjleQeJmIRW4gAUH14urs"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760369421875,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$xB_MrLZonPQ8xJCTA9sypcQxtg63OTTAs9NiXmB1DJU"},
{"content":{"body":"I removed this assert. Instead, when we are about to return from reload/navigate, we check that the tracker was indeed promoted. Otherwise we return the rejected thingy","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$xB_MrLZonPQ8xJCTA9sypcQxtg63OTTAs9NiXmB1DJU"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760369471123,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$OtOqk1OhwRB3DFyqHJ0hbWR-8LSt2NHwnsa6iCjGYww"},
{"content":{"body":"But wouldn't we set the promoted flag even if the document is not active anymore?","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$OtOqk1OhwRB3DFyqHJ0hbWR-8LSt2NHwnsa6iCjGYww"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760369744165,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$KNNLIY243ggO16k2iNVrry-XPSIPeAUx7rBXbzRQgxY"},
{"content":{"body":"nope","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$KNNLIY243ggO16k2iNVrry-XPSIPeAUx7rBXbzRQgxY"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760369757066,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$lnxIjdC75HCYh_2hjEA4DvHZZyeHjqgcygKNp7YwYLg"},
{"content":{"body":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#navigate-event-firing%3Ahas-entries-and-events-disabled","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$lnxIjdC75HCYh_2hjEA4DvHZZyeHjqgcygKNp7YwYLg"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760369805082,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$Zj9JPtVUggKsOvP0ktxoJBwfPyq21vDPFCPFq0Keuhg"},
{"content":{"body":"inactive documents will get \"has entries and events disabled\". So \"inner navigate\" would assert (or return early if I remove the assert)","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$Zj9JPtVUggKsOvP0ktxoJBwfPyq21vDPFCPFq0Keuhg"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760369834920,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$5zQJldn03n0SWPvrxYQ5MlykcEgFMwLTs18Jcl5OuwY"},
{"content":{"body":"Ohh, forgot about has entries and events disabled","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$5zQJldn03n0SWPvrxYQ5MlykcEgFMwLTs18Jcl5OuwY"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760369844448,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$JyJwK2TXStIGyp_MaRF0UhVUseJFhOj_FKkY-5whupc"},
{"content":{"body":"We really need a spec DSL so that we can run step by step and see state changes and such","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$JyJwK2TXStIGyp_MaRF0UhVUseJFhOj_FKkY-5whupc"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760369903891,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$jHP0i49_uKoUePkKtAhB1Euxhk8cif8wadNL55Wqz8E"},
{"content":{"body":"hehe yea, my brain gets into labyrinth mode when I have to do this stuff. ","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$jHP0i49_uKoUePkKtAhB1Euxhk8cif8wadNL55Wqz8E"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760369997274,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$_NmS5Q-cjr3gy71mAuP-d-kD_DtKanw6jisI70Tk4GQ"},
{"content":{"body":"Should firing the event still continue true in that case? ","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$_NmS5Q-cjr3gy71mAuP-d-kD_DtKanw6jisI70Tk4GQ"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760370025834,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$BTGnebYod9oU1cIO-xooBgpAoZvc6wx6tUxPJuRy9gg"},
{"content":{"body":"no","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$BTGnebYod9oU1cIO-xooBgpAoZvc6wx6tUxPJuRy9gg"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760370121386,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$UU0Fjd9ZOoZXaSpOZiHSzOOghdSkTiwwoatp40hKBW4"},
{"content":{"body":"* Should firing the event still return true in that case? ","m.mentions":{"user_ids":["@noamr:matrix.org"]},"m.new_content":{"body":"Should firing the event still return true in that case? ","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$BTGnebYod9oU1cIO-xooBgpAoZvc6wx6tUxPJuRy9gg","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1760370122152,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$y82Otc0zI_99wm4pTyZt7jwIevWXCp_o8oiiHjRbMTU"},
{"content":{"body":"it should return rejected promises","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$UU0Fjd9ZOoZXaSpOZiHSzOOghdSkTiwwoatp40hKBW4"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760370154740,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$jfAtcpWwtxc-OydZKW_W1UlZUbeqCwWhMipfym_KXAU"},
{"content":{"body":"I mean [this](https://whatpr.org/html/11762/305f5a1...3b1e3e2/nav-history-apis.html#:~:text=empty%20%2E-,Return%20true)","format":"org.matrix.custom.html","formatted_body":"I mean <a href=\"https://whatpr.org/html/11762/305f5a1...3b1e3e2/nav-history-apis.html#:~:text=empty%20%2E-,Return%20true\">this</a>","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$jfAtcpWwtxc-OydZKW_W1UlZUbeqCwWhMipfym_KXAU"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760370190547,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$jJvltdL96P504YDIsng-TaERPSgeZt9JM8-kkVs7lmw"},
{"content":{"body":"Which would mean we don't early return [here](https://whatpr.org/html/11762/305f5a1...3b1e3e2/browsing-the-web.html#navigate:~:text=continue,-be)","format":"org.matrix.custom.html","formatted_body":"Which would mean we don't early return <a href=\"https://whatpr.org/html/11762/305f5a1...3b1e3e2/browsing-the-web.html#navigate:~:text=continue,-be\">here</a>","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$jJvltdL96P504YDIsng-TaERPSgeZt9JM8-kkVs7lmw"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760370241110,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$it9jii7GaJTheydCQoRzBe1VGVRglJsEhjLCcpAENNw"},
{"content":{"body":"(I don't know off the top of my head what happens after that)","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$it9jii7GaJTheydCQoRzBe1VGVRglJsEhjLCcpAENNw"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760370304166,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$rIOyLeW5iNfY0EIFvPI1d2TSyLEiwte1lIiNV9XeeOs"},
{"content":{"body":"yea it should be true. otherwise about:blank and opaque origins couldn't navigate at all","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$rIOyLeW5iNfY0EIFvPI1d2TSyLEiwte1lIiNV9XeeOs"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760370382427,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$-IMiMCKS3oIr8Mcj8ZQyMWNbbXNZNBVlwxHySvivU8s"},
{"content":{"body":"but perhaps it should return false specifically when aborting made the document inactive, or there should be a check for that at the call site","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$-IMiMCKS3oIr8Mcj8ZQyMWNbbXNZNBVlwxHySvivU8s"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760370470004,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$ONdyjcgUz_qWLjvBP7XVWGqjTnjVNzN08kygbU2D3s0"},
{"content":{"body":"I guess we can return `false` if `apiMethodTracker` is not null","format":"org.matrix.custom.html","formatted_body":"I guess we can return <code>false</code> if <code>apiMethodTracker</code> is not null","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$ONdyjcgUz_qWLjvBP7XVWGqjTnjVNzN08kygbU2D3s0"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760370520295,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$V4-zwrQ6_ReM1uJWfFbwdYephWfm83GGC0Wao0BDGFI"},
{"content":{"body":"I think that makes sense","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$V4-zwrQ6_ReM1uJWfFbwdYephWfm83GGC0Wao0BDGFI"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760370587285,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$SAekQyGWq92H51DwC2nZAyeeVH_H_NFVMOaQR0QaRWA"},
{"content":{"body":"Let me try to implement these changes real quick to see if it breaks anything :)","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$SAekQyGWq92H51DwC2nZAyeeVH_H_NFVMOaQR0QaRWA"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760370644975,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$5fh2o64s9vnSzTb-q1d--Ae7t2KAKrElIIp5S-e2-8g"},
{"content":{"body":"Hi all, just a friendly reminder to post any discussion topics for this Thursday's joint CSSWG/WHATWG/OpenUI task force meeting to the meeting agenda issue: https://github.com/whatwg/html/issues/11740","m.mentions":{},"msgtype":"m.text"},"ts":1760372981998,"senderName":"mfreed","senderId":"@mfreed:matrix.org","id":"$54Mwwr1yDzQGPhyuxCSvoSgKoS8L2HZD97dhiLf5Cn4"},
{"content":{"body":"Noam Rosenthal: Looking quite good, I only get a few fails, and I'm not sure if that's just a bug in my changes. [This test](https://searchfox.org/firefox-main/source/testing/web-platform/tests/navigation-api/navigation-methods/return-value/navigate-initial-about-blank.html#17) fails because the promise gets rejected instead of just never settling. \n\nI think that is because we don't fire the [push/replace event](https://whatpr.org/html/11762/305f5a1...4c4aef6/browsing-the-web.html#navigate:~:text=navigable%20%27s%20active%20document%20%27s%20is%20initial%20about%3Ablank%20is%20false%3B%20and). Does that make sense?","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: Looking quite good, I only get a few fails, and I'm not sure if that's just a bug in my changes. <a href=\"https://searchfox.org/firefox-main/source/testing/web-platform/tests/navigation-api/navigation-methods/return-value/navigate-initial-about-blank.html#17\">This test</a> fails because the promise gets rejected instead of just never settling.</p>\n<p>I think that is because we don't fire the <a href=\"https://whatpr.org/html/11762/305f5a1...4c4aef6/browsing-the-web.html#navigate:~:text=navigable%20%27s%20active%20document%20%27s%20is%20initial%20about%3Ablank%20is%20false%3B%20and\">push/replace event</a>. Does that make sense?</p>\n","m.mentions":{"user_ids":["@noamr:matrix.org"]},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$5fh2o64s9vnSzTb-q1d--Ae7t2KAKrElIIp5S-e2-8g"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760375305622,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$Aa7ZwD2uoWPrdaiwFruuBn4LTPC7OcmI0o8EFq8vi5w"},
{"content":{"body":"(EOD for me)","m.mentions":{},"m.relates_to":{"event_id":"$KdS_FfmSwet-sYBOp3nySTpsnlvz6IBiF1lQbW9TbCE","is_falling_back":true,"m.in_reply_to":{"event_id":"$Aa7ZwD2uoWPrdaiwFruuBn4LTPC7OcmI0o8EFq8vi5w"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1760375399583,"senderName":"jjaschke","senderId":"@jjaschke:mozilla.org","id":"$wuTNglWNB6in0xKXwPoINvRzCctNuRotAC7xug2sN7o"}
]