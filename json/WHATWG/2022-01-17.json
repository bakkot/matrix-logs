[
{"content":{"body":"oops didn't mean to leave","msgtype":"m.text"},"ts":1642393681383,"senderName":"Anton M.","senderId":"@amcclure:matrix.org","id":"$bcvrMKynAzcqpRm36MFkNSlN61ADR_othvZkQSkHLCw"},
{"content":{"body":"zcorpan: had you seen https://bugzilla.mozilla.org/show_bug.cgi?id=1687557?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan_:matrix.org\">zcorpan</a>: had you seen https://bugzilla.mozilla.org/show_bug.cgi?id=1687557?","msgtype":"m.text"},"ts":1642406276477,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$2ioJjRmtUCl1QqE34zM9Z1GBwu9Urwq6Yo96F3ORtZQ"},
{"content":{"body":"annevk: Hey, I was just going through my old needinfos and noticed https://bugzilla.mozilla.org/show_bug.cgi?id=1708354","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: Hey, I was just going through my old needinfos and noticed https://bugzilla.mozilla.org/show_bug.cgi?id=1708354","msgtype":"m.text"},"ts":1642410195541,"senderName":"johannhof","senderId":"@johannhof:matrix.org","id":"$ZsixlKI1JLQH8n_Zvzht4TBvAfOqIsxi5x4QGVoL_RE"},
{"content":{"body":"And that bug itself aside, it feels to me like Chrome and Firefox both shipped this restriction but didn't end up updating the spec (I can't even find an issue for it)","msgtype":"m.text"},"ts":1642410242243,"senderName":"johannhof","senderId":"@johannhof:matrix.org","id":"$rlfrqERT9zAlNitpdaMD4278K6re3p1P6J0-nDkNCzk"},
{"content":{"body":"But I'm slightly confused about which spec is responsible for defining these restrictions, is it the Notifications spec or Permissions?","msgtype":"m.text"},"ts":1642410392535,"senderName":"johannhof","senderId":"@johannhof:matrix.org","id":"$9AqAZqIF2sLvQz2hXqdwRteLyEcmUzffR97xzTbm054"},
{"content":{"body":"i.e. would it be enough that Notifications says \"this is a powerful feature\" and then we derive somehow that these are either PP controlled in iframes or forbidden?","msgtype":"m.text"},"ts":1642410428350,"senderName":"johannhof","senderId":"@johannhof:matrix.org","id":"$6XpVZM4l9CbGGuFo5cm86RAivk9_I-I2CbGuP8Deoko"},
{"content":{"body":"johannhof: I think the idea was that Permissions Policy would take care of this, but it might not have been integrated everywhere just yet","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@johannhof:matrix.org\">johannhof</a>: I think the idea was that Permissions Policy would take care of this, but it might not have been integrated everywhere just yet","msgtype":"m.text"},"ts":1642412757823,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$QmDHKdR0mOgAZXZnQfAfuDk0nc5o5eIzA1LupThRtQo"},
{"content":{"body":"annevk: Right, so, I guess there are two things here. As per that bug, these checks should not only apply when requesting permission but also when notifications are sent. The second question is what does PP do for features that are powerful but not explicitly part of PP (which I think notifications is not?)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: Right, so, I guess there are two things here. As per that bug, these checks should not only apply when requesting permission but also when notifications are sent. The second question is what does PP do for features that are powerful but not explicitly part of PP (which I think notifications is not?)","msgtype":"m.text"},"ts":1642412952581,"senderName":"johannhof","senderId":"@johannhof:matrix.org","id":"$cG_fAGsCh1hMaLMutgv1mhvlsz75Y3fBLCTQLgdwBRg"},
{"content":{"body":"Oh right, I guess those we have to update, but that hasn't happened. Same for persistent storage.","msgtype":"m.text"},"ts":1642413033578,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$tiEqIet4qycEbiykbDF4N1QftNebF0LKqrc_D73OBY8"},
{"content":{"body":"I guess point 1 might be captured by having the permission check in the constructor https://notifications.spec.whatwg.org/#constructors, so that might only be a Firefox implementation issue","msgtype":"m.text"},"ts":1642413062101,"senderName":"johannhof","senderId":"@johannhof:matrix.org","id":"$y3R5GhVp9Pikvcxo5yGmv7HIuDaSiQf6-FXS3sXunOY"},
{"content":{"body":"And then step 3 of https://w3c.github.io/permissions/#reading-current-states will only do the correct thing (deny the request) if there's a policy controlled feature for \"notifications\" that's always forbidden","msgtype":"m.text"},"ts":1642413177366,"senderName":"johannhof","senderId":"@johannhof:matrix.org","id":"$1zZaKxVBwRYJtKC9XUTNA2mxvB-EDk3QsXLJczh2-JE"},
{"content":{"body":"What is the state of the registry for permissions policy? Is it still up to the individual standards to define their own entry? So would this be a change in Notifications and Storage?","msgtype":"m.text"},"ts":1642413303551,"senderName":"johannhof","senderId":"@johannhof:matrix.org","id":"$7LL_8R_v7davrDUYWM7j0-mYlwjsf3a1wlYieHdJUEk"},
{"content":{"body":"johannhof: for notifications it probably needs to be a local change; for persistent storage I'm not entirely sure what the model should be","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@johannhof:matrix.org\">johannhof</a>: for notifications it probably needs to be a local change; for persistent storage I'm not entirely sure what the model should be","msgtype":"m.text"},"ts":1642415387243,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$skH73dFawG0_e4qpKefnX8xeup5XLiOT2ifUS1dxQM8"},
{"content":{"body":"It makes sense to me that you cannot ask for persistent storage permission, but if you're non-partitioned (i.e., have \"storage access\") you should probably have persistent storage there","msgtype":"m.text"},"ts":1642415431764,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$LI0GPwL-yHlSgh1IBIy07xdH8-neY1g70-FOP8ZEefE"},
{"content":{"body":"The equivalent doesn't make sense for notifications however","msgtype":"m.text"},"ts":1642415456498,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$ElTNh8lVMKzSTJWS9IqklAT4ecVHpM7-eIRtHcu1EXo"},
{"content":{"body":"Although I guess for storage as well it being non-partitioned is a thing that will soonish no longer be possible","msgtype":"m.text"},"ts":1642415488802,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$jfPaDw3XpXTN10saccfxRr0YqjFpDFSZ1mus5uYE8HU"},
{"content":{"body":"Yeah, you're right, storage is more complicated...","msgtype":"m.text"},"ts":1642416512157,"senderName":"johannhof","senderId":"@johannhof:matrix.org","id":"$zRAKeKtrzltnVRCzJIfB9E9cgV-J9QnpKABBD75bCB4"},
{"content":{"body":"Another edge case that always partitioning helps with :)","msgtype":"m.text"},"ts":1642416541523,"senderName":"johannhof","senderId":"@johannhof:matrix.org","id":"$6p4GXQEUBOh0aRWTEFabpHYdYwyXN2NLUMUXIPBjtZ8"},
{"content":{"body":"annevk: thought about this some more and filed https://github.com/whatwg/notifications/issues/177","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: thought about this some more and filed https://github.com/whatwg/notifications/issues/177","msgtype":"m.text"},"ts":1642418390589,"senderName":"johannhof","senderId":"@johannhof:matrix.org","id":"$hyHts2cyOXFh8mrLrRammsXfEGRsEVOxgK2TkxYK1kk"}
]