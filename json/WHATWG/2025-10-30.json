[
{"content":{"body":"Question about https://github.com/whatwg/html/issues/10673: would those modules also be importable through JS `import ... with { type: \"css\" }`? Or is the reason we are talking about the import map something else?","format":"org.matrix.custom.html","formatted_body":"Question about https://github.com/whatwg/html/issues/10673: would those modules also be importable through JS <code>import ... with { type: \"css\" }</code>? Or is the reason we are talking about the import map something else?","m.mentions":{},"msgtype":"m.text"},"ts":1761812127506,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$ArIscTFgtUdyohReOet8AWCHWCPxbIW3Yez4fGwPyDE"},
{"content":{"body":"Andreu Botella: remind me, was there some good solution for the sync cross-origin asyncContext case?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@abotella:igalia.com\">Andreu Botella</a>: remind me, was there some good solution for the sync cross-origin asyncContext case?","m.mentions":{"user_ids":["@abotella:igalia.com"]},"msgtype":"m.text"},"ts":1761814450694,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$KDWFuk7ttMiG7lsz8Rj0CjiZVBy8jQRCqKjIxDe7n-0"},
{"content":{"body":"nicolo-ribaudo: I think the idea is that they would be when you use the specifier, yes","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@nicolo-ribaudo:matrix.org\">nicolo-ribaudo</a>: I think the idea is that they would be when you use the specifier, yes","m.mentions":{"user_ids":["@nicolo-ribaudo:matrix.org"]},"msgtype":"m.text"},"ts":1761814481937,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$Hx2KgRpnQp_5LqsdZrQCX5Wr-9-lsztsvXhgxYYVFbs"},
{"content":{"body":"> <@smaug:mozilla.org> Andreu Botella: remind me, was there some good solution for the sync cross-origin asyncContext case?\n\nThe solution so far would be to switch to an empty context before firing the cross-origin event, but I still need to investigate this in more detail","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$KDWFuk7ttMiG7lsz8Rj0CjiZVBy8jQRCqKjIxDe7n-0?via=igalia.com&via=matrix.org&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@smaug:mozilla.org\">@smaug:mozilla.org</a><br /><a href=\"https://matrix.to/#/@abotella:igalia.com\">Andreu Botella</a>: remind me, was there some good solution for the sync cross-origin asyncContext case?</blockquote></mx-reply>The solution so far would be to switch to an empty context before firing the cross-origin event, but I still need to investigate this in more detail","m.relates_to":{"m.in_reply_to":{"event_id":"$KDWFuk7ttMiG7lsz8Rj0CjiZVBy8jQRCqKjIxDe7n-0"}},"msgtype":"m.text"},"ts":1761814544651,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$Lg80el3CqMZS-i5lD-DoRYdC3OJCkQaBqGqGMRDLbBw"},
{"content":{"body":"hmm, how do we know something is cross-origin event?","m.mentions":{},"msgtype":"m.text"},"ts":1761814612130,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$HmwOaRngOUyiwNLNB7_afSHWQYlgaGtda47pf8Ak_lI"},
{"content":{"body":"I guess one could have something on stack and when trying to access it do some check. Maybe that works.","m.mentions":{},"msgtype":"m.text"},"ts":1761814715676,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$Nd22o0hF_NpFWjLZCuOonjdeVo3F-p6IYzuijje_Xv0"},
{"content":{"body":"and the new realm would effectively need to push something to stack and once done, pop","m.mentions":{},"msgtype":"m.text"},"ts":1761814747981,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$Dbr3sH9a6LN_K-qdgpbB_QUNNQr5q_hOCZx1c1t87sQ"},
{"content":{"body":"Is this about same-site-cross-origin or cross-origin due to process limitations on certain platforms?","m.mentions":{},"msgtype":"m.text"},"ts":1761820255143,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$y0ay_VsYTGVrHj2LKfkCUpVLbKv1LfJ7rDR8X3fVjUc"},
{"content":{"body":"So far when considering the interaction with origins, we've only been considering the \"same origin\" spec check and ignoring sites, so both","msgtype":"m.text"},"ts":1761820376098,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$UIqisBty-AweFCxtZLRZ5b1sWV5SgKf9YzKABuw7D8A"},
{"content":{"body":"But I guess the interaction with sites is far from settled","msgtype":"m.text"},"ts":1761820414401,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$HrNpRm64EvFG7B9qFmqvWmmD7Ih25nIBUPsXaQEVyOc"},
{"content":{"body":"annevk: and smaug \n\nGiven the below html what do we think the end result should be:\n\n```html","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: and <a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a></p>\n<p>Given the below html what do we think the end result should be:</p>\n<pre><code class=\"language-html\"></code></pre>\n","m.mentions":{"user_ids":["@annevk:matrix.org","@smaug:mozilla.org"]},"msgtype":"m.text"},"ts":1761821125048,"senderName":"Luke Warlow","senderId":"@lwarlow:igalia.com","id":"$8DuIp6PZ2LUsfTtCe1nvATVbuiaeUGOT77NGs7AY2Fs"},
{"content":{"body":"* annevk: and smaug\n\nGiven the below html what do we think the end result should be:\n\n```html\n<head>\n    <meta http-equiv=\"content-security-policy\" content=\"require-trusted-types-for 'script'\">\n</head>\n<div id=\"div1\" onclick=\"alert(1)\"></div>\n<span id=\"div2\"></span>\n<script>\n    let count = 0;\ntrustedTypes.createPolicy('default', {\n    createScript: (a, b, c) => {\n        count++;\n        if (count > 1) {\n            return a;\n        }\n        const attr = div1.attributes.getNamedItem('onclick');\n        div1.removeAttributeNode(attr);\n        div2.attributes.setNamedItem(attr);\n        return a;\n    }\n});\n\ndiv1.attributes[1].value = 'alert(2)';\n</script>","format":"org.matrix.custom.html","formatted_body":"* <p><a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: and <a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a></p>\n<p>Given the below html what do we think the end result should be:</p>\n<pre><code class=\"language-html\">&lt;head&gt;\n    &lt;meta http-equiv=\"content-security-policy\" content=\"require-trusted-types-for 'script'\"&gt;\n&lt;/head&gt;\n&lt;div id=\"div1\" onclick=\"alert(1)\"&gt;&lt;/div&gt;\n&lt;span id=\"div2\"&gt;&lt;/span&gt;\n&lt;script&gt;\n    let count = 0;\ntrustedTypes.createPolicy('default', {\n    createScript: (a, b, c) =&gt; {\n        count++;\n        if (count &gt; 1) {\n            return a;\n        }\n        const attr = div1.attributes.getNamedItem('onclick');\n        div1.removeAttributeNode(attr);\n        div2.attributes.setNamedItem(attr);\n        return a;\n    }\n});\n\ndiv1.attributes[1].value = 'alert(2)';\n&lt;/script&gt;\n</code></pre>\n","m.mentions":{},"m.new_content":{"body":"annevk: and smaug\n\nGiven the below html what do we think the end result should be:\n\n```html\n<head>\n    <meta http-equiv=\"content-security-policy\" content=\"require-trusted-types-for 'script'\">\n</head>\n<div id=\"div1\" onclick=\"alert(1)\"></div>\n<span id=\"div2\"></span>\n<script>\n    let count = 0;\ntrustedTypes.createPolicy('default', {\n    createScript: (a, b, c) => {\n        count++;\n        if (count > 1) {\n            return a;\n        }\n        const attr = div1.attributes.getNamedItem('onclick');\n        div1.removeAttributeNode(attr);\n        div2.attributes.setNamedItem(attr);\n        return a;\n    }\n});\n\ndiv1.attributes[1].value = 'alert(2)';\n</script>","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: and <a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a></p>\n<p>Given the below html what do we think the end result should be:</p>\n<pre><code class=\"language-html\">&lt;head&gt;\n    &lt;meta http-equiv=\"content-security-policy\" content=\"require-trusted-types-for 'script'\"&gt;\n&lt;/head&gt;\n&lt;div id=\"div1\" onclick=\"alert(1)\"&gt;&lt;/div&gt;\n&lt;span id=\"div2\"&gt;&lt;/span&gt;\n&lt;script&gt;\n    let count = 0;\ntrustedTypes.createPolicy('default', {\n    createScript: (a, b, c) =&gt; {\n        count++;\n        if (count &gt; 1) {\n            return a;\n        }\n        const attr = div1.attributes.getNamedItem('onclick');\n        div1.removeAttributeNode(attr);\n        div2.attributes.setNamedItem(attr);\n        return a;\n    }\n});\n\ndiv1.attributes[1].value = 'alert(2)';\n&lt;/script&gt;\n</code></pre>\n","m.mentions":{"user_ids":["@annevk:matrix.org","@smaug:mozilla.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$8DuIp6PZ2LUsfTtCe1nvATVbuiaeUGOT77NGs7AY2Fs","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1761821137429,"senderName":"Luke Warlow","senderId":"@lwarlow:igalia.com","id":"$RdIgesvPEGGBMyO0crniwN6p7qAqfp4TdoSiT85VgdM"},
{"content":{"body":"Chrome stable results in\n\n```html\n<div id=\"div1\" onclick=\"alert(1)\"></div>\n<span id=\"div2\"></span>\n```","format":"org.matrix.custom.html","formatted_body":"<p>Chrome stable results in</p>\n<pre><code class=\"language-html\">&lt;div id=\"div1\" onclick=\"alert(1)\"&gt;&lt;/div&gt;\n&lt;span id=\"div2\"&gt;&lt;/span&gt;\n</code></pre>\n","m.mentions":{},"msgtype":"m.text"},"ts":1761821194522,"senderName":"Luke Warlow","senderId":"@lwarlow:igalia.com","id":"$ZVb7PrjbTWPFBqx47QKQtIAIiatT02FwDq5jc9YR-ec"},
{"content":{"body":"annevk: it is not limitation on certain platforms. It is because of .domain.  So, same-site. But perhaps it could apply to some platforms in different-site case too.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: it is not limitation on certain platforms. It is because of .domain.  So, same-site. But perhaps it could apply to some platforms in different-site case too.","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1761821250863,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$Y7kPxmj4-2QLhWN6VJA4jFHcmxg-w9s-7xEp7yM-OIo"},
{"content":{"body":"* Chrome stable results in\n\n```html\n<div id=\"div1\" onclick=\"alert(2)\"></div>\n<span id=\"div2\" onclick=\"alert(1)\"></span>\n```\n\nFirefox Nightly in:\n\n```html\n<div id=\"div1\"></div>\n<span id=\"div2\" onclick=\"alert(2)\"></span>\n```\n\nWebKit Trunk and Spec in:\n\n```html\n<div id=\"div1\"></div>\n<span id=\"div2\" onclick=\"alert(1)\"></span>\n```","format":"org.matrix.custom.html","formatted_body":"* <p>Chrome stable results in</p>\n<pre><code class=\"language-html\">&lt;div id=\"div1\" onclick=\"alert(2)\"&gt;&lt;/div&gt;\n&lt;span id=\"div2\" onclick=\"alert(1)\"&gt;&lt;/span&gt;\n</code></pre>\n<p>Firefox Nightly in:</p>\n<pre><code class=\"language-html\">&lt;div id=\"div1\"&gt;&lt;/div&gt;\n&lt;span id=\"div2\" onclick=\"alert(2)\"&gt;&lt;/span&gt;\n</code></pre>\n<p>WebKit Trunk and Spec in:</p>\n<pre><code class=\"language-html\">&lt;div id=\"div1\"&gt;&lt;/div&gt;\n&lt;span id=\"div2\" onclick=\"alert(1)\"&gt;&lt;/span&gt;\n</code></pre>\n","m.mentions":{},"m.new_content":{"body":"Chrome stable results in\n\n```html\n<div id=\"div1\" onclick=\"alert(2)\"></div>\n<span id=\"div2\" onclick=\"alert(1)\"></span>\n```\n\nFirefox Nightly in:\n\n```html\n<div id=\"div1\"></div>\n<span id=\"div2\" onclick=\"alert(2)\"></span>\n```\n\nWebKit Trunk and Spec in:\n\n```html\n<div id=\"div1\"></div>\n<span id=\"div2\" onclick=\"alert(1)\"></span>\n```","format":"org.matrix.custom.html","formatted_body":"<p>Chrome stable results in</p>\n<pre><code class=\"language-html\">&lt;div id=\"div1\" onclick=\"alert(2)\"&gt;&lt;/div&gt;\n&lt;span id=\"div2\" onclick=\"alert(1)\"&gt;&lt;/span&gt;\n</code></pre>\n<p>Firefox Nightly in:</p>\n<pre><code class=\"language-html\">&lt;div id=\"div1\"&gt;&lt;/div&gt;\n&lt;span id=\"div2\" onclick=\"alert(2)\"&gt;&lt;/span&gt;\n</code></pre>\n<p>WebKit Trunk and Spec in:</p>\n<pre><code class=\"language-html\">&lt;div id=\"div1\"&gt;&lt;/div&gt;\n&lt;span id=\"div2\" onclick=\"alert(1)\"&gt;&lt;/span&gt;\n</code></pre>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$ZVb7PrjbTWPFBqx47QKQtIAIiatT02FwDq5jc9YR-ec","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1761821324321,"senderName":"Luke Warlow","senderId":"@lwarlow:igalia.com","id":"$kIT51UsGp4rkNc264J3WF3cuLq6TbTjD3zqSccmNMLY"}
]