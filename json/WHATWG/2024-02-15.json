[
{"content":{"body":"hmm, dom spec has some animation when clicking on an algorithm (to get the popup where it is referred from) Maybe it has been there for quite some time, but it is a bit annoying","m.mentions":{},"msgtype":"m.text"},"ts":1707990295858,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$vTRVnjcMRnPWNE4FTqotoIFre4TlIO_REB6Si45FRbE"},
{"content":{"body":"smaug: hsivonen any thoughts on https://github.com/whatwg/html/pull/9970#discussion_r1489167432?\n\nThere was a question whether allowing the new `<link rel=expect>` to also consider `<a name>` and not just IDs would have a parser performance implications...\n\n(My sense of logic says it would be fine but I'm reading the room's topic).","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a>: <a href=\"https://matrix.to/#/@hsivonen:mozilla.org\">hsivonen</a> any thoughts on https://github.com/whatwg/html/pull/9970#discussion_r1489167432?</p>\n<p>There was a question whether allowing the new <code>&lt;link rel=expect&gt;</code> to also consider <code>&lt;a name&gt;</code> and not just IDs would have a parser performance implications...</p>\n<p>(My sense of logic says it would be fine but I'm reading the room's topic).</p>\n","m.mentions":{"user_ids":["@smaug:mozilla.org","@hsivonen:mozilla.org"]},"msgtype":"m.text"},"ts":1707992350285,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$Mo-rdtL2QxBr53JTEBehtLJTPFnQMyHMq4eILxIJhC4"},
{"content":{"body":"> <@noamr:matrix.org> smaug: hsivonen any thoughts on https://github.com/whatwg/html/pull/9970#discussion_r1489167432?\n> \n> There was a question whether allowing the new `<link rel=expect>` to also consider `<a name>` and not just IDs would have a parser performance implications...\n> \n> (My sense of logic says it would be fine but I'm reading the room's topic).\n\nI can't say for perf for real right now.\n\n(In any case, we should file the `id` vs. `name` thing on some list of mistakes that can be referred to when someone suggests giving some pre-existing thing a second better-bikeshedded name. This one is from 1998 (or earlier?) and still keeps popping up like this.)","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$Mo-rdtL2QxBr53JTEBehtLJTPFnQMyHMq4eILxIJhC4?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@noamr:matrix.org\">@noamr:matrix.org</a><br><p><a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a>: <a href=\"https://matrix.to/#/@hsivonen:mozilla.org\">hsivonen</a> any thoughts on https://github.com/whatwg/html/pull/9970#discussion_r1489167432?</p>\n<p>There was a question whether allowing the new <code>&lt;link rel=expect&gt;</code> to also consider <code>&lt;a name&gt;</code> and not just IDs would have a parser performance implications...</p>\n<p>(My sense of logic says it would be fine but I'm reading the room's topic).</p>\n</blockquote></mx-reply><p>I can't say for perf for real right now.</p>\n<p>(In any case, we should file the <code>id</code> vs. <code>name</code> thing on some list of mistakes that can be referred to when someone suggests giving some pre-existing thing a second better-bikeshedded name. This one is from 1998 (or earlier?) and still keeps popping up like this.)</p>\n","m.mentions":{"user_ids":["@noamr:matrix.org","@smaug:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$Mo-rdtL2QxBr53JTEBehtLJTPFnQMyHMq4eILxIJhC4"}},"msgtype":"m.text"},"ts":1707998074553,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$SAck1N86i7Xa7s6TI05i8WObZ8dBaLSLV0wmUkibbvc"},
{"content":{"body":"I do expect taking `name` into account to be more complex and to have some gotcha. Not sure if I can claim a perf effect, though.","format":"org.matrix.custom.html","formatted_body":"I do expect taking <code>name</code> into account to be more complex and to have some gotcha. Not sure if I can claim a perf effect, though.","m.mentions":{},"msgtype":"m.text"},"ts":1707998169354,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$E9t7c5wX2HscHOvwQWzvcFh3Td0BDhbmWeLC1i_mVTc"},
{"content":{"body":"it feels very surprising to support name","m.mentions":{},"msgtype":"m.text"},"ts":1707998199731,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$dr4sy8YPnIHSVlUatcMePlVmW3vUniQfwkuNqs-1Lps"},
{"content":{"body":"it isn't then idref but something else","m.mentions":{},"msgtype":"m.text"},"ts":1707998214305,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$VehvBeeGkLp2T6bKnNkLK0FR3g2fdF6zO1RnKByQhmQ"},
{"content":{"body":"what is the need?","m.mentions":{},"msgtype":"m.text"},"ts":1707998221975,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$9Ynu2BMIzXLsa2wEIrz27_6GMH0fu-TyrqbnFpbPjTY"},
{"content":{"body":"Just `<a name>` like when scrolling","format":"org.matrix.custom.html","formatted_body":"Just <code>&lt;a name&gt;</code> like when scrolling","m.mentions":{},"msgtype":"m.text"},"ts":1707998227853,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$351zbyWUsWQ1gIvOj2KVnvFOZWQi2IYoWRFXlS3tu5c"},
{"content":{"body":"there is no need except from being consistent with other links with `href` that take this into consideration","format":"org.matrix.custom.html","formatted_body":"there is no need except from being consistent with other links with <code>href</code> that take this into consideration","m.mentions":{},"msgtype":"m.text"},"ts":1707998250439,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$XlCz82inHHRmId7c6z3KVmnQ3G7IT-B_z696snv7xZY"},
{"content":{"body":"I'm also fine with starting with ID only and then see later if we need to follow up. I don't find the consistency argument strong here, `<link rel=expect>` is a new thing anyway and you don't necessarily need to be consistent with some old way we used to create scroll-to points in the document","format":"org.matrix.custom.html","formatted_body":"I'm also fine with starting with ID only and then see later if we need to follow up. I don't find the consistency argument strong here, <code>&lt;link rel=expect&gt;</code> is a new thing anyway and you don't necessarily need to be consistent with some old way we used to create scroll-to points in the document","m.mentions":{},"msgtype":"m.text"},"ts":1707998360613,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$JBtEaSh3_0HzD5l7ogS9hkftEQrjEg6kOuG5vISlQak"},
{"content":{"body":"yeah, I don't think this is really about consistency","m.mentions":{},"msgtype":"m.text"},"ts":1707998426237,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$wCws7nXMVQCafHtzv45B1-W-2_BJNkf53o2ZR1V9k-4"},
{"content":{"body":"<a name> and render blocking are quite different concepts ","m.mentions":{},"msgtype":"m.text"},"ts":1707998443206,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$2nVc1DuPmSKhsLsnxcmq-iJuLIiUCQdsm-WwcxxcAms"},
{"content":{"body":"so, I'd rather prefer simplicity here","m.mentions":{},"msgtype":"m.text"},"ts":1707998473502,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$dai3JfRn2zZQSCg_yHk7bAMmz3-hV0jgsfShT0M2iaY"},
{"content":{"body":"zcorpan: thoughts on ^^^ ?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: thoughts on ^^^ ?","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"msgtype":"m.text"},"ts":1707998745711,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$HB75GOICqdnEG19CFG1qU8_KzmUdQ7NVVZJcHd73Wq0"},
{"content":{"body":"Noam Rosenthal: oh, wait, I change my mind. The syntax is really href","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: oh, wait, I change my mind. The syntax is really href","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1707999189170,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$wtP2difKV9ei8BsPmC7-AzcuP83H_Je12AG5i1bv3_o"},
{"content":{"body":"smaug: yes, the syntax is href.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a>: yes, the syntax is href.","m.mentions":{"user_ids":["@smaug:mozilla.org"]},"msgtype":"m.text"},"ts":1707999324314,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$uiMl3tSMa8UQc7fSUILiFvQ3qb79W995f6fu3CF4MtY"},
{"content":{"body":"so it is resolved as an url ","m.mentions":{},"msgtype":"m.text"},"ts":1707999347128,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$2qFE6EMynt1JRccMhyiiwiIgvGoVmxHMKgvcfV9ID4A"},
{"content":{"body":"I assume","m.mentions":{},"msgtype":"m.text"},"ts":1707999356997,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$9KPul-Fnc7wBwCP2e69myQj9bXWHMtJtiZa0aBqjnNc"},
{"content":{"body":"yes. you can also put a whole URL in there and as long as it resolves to a same-document fragment in the end (given `base` etc) it would try to match","format":"org.matrix.custom.html","formatted_body":"yes. you can also put a whole URL in there and as long as it resolves to a same-document fragment in the end (given <code>base</code> etc) it would try to match","m.mentions":{},"msgtype":"m.text"},"ts":1707999389672,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$WNfEPCuNtyFg7GD_mSINcsHuz1VvjfO0N2Ee96ZelLY"},
{"content":{"body":"it uses the same matching algorithm for the normal scroll-to (try first without percent encoding, then with)","m.mentions":{},"msgtype":"m.text"},"ts":1707999418902,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$cl8jfkgQu6lBo8MZm5B6ZH9PSSrErqD4kEn-ZHyQdww"},
{"content":{"body":"OTOH it doesn't respect \"top\" etc because that's nonsensical","m.mentions":{},"msgtype":"m.text"},"ts":1707999455771,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$PbxN-JbjwJdN15yqMg4KdR4IpvCokz6fSbKrLK9NsVM"},
{"content":{"body":"other thing is that rel=expect ... blocking=render feels a bit verbose. I need to read some discussion why we ended up with rel=expect","m.mentions":{},"msgtype":"m.text"},"ts":1707999455979,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$svktTdj-2Ich_WkqFJNOlAFmnLGpk1--pNEmUF0EEuI"},
{"content":{"body":"there was a loooong discussion about it","m.mentions":{},"msgtype":"m.text"},"ts":1707999474818,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$RaFnsbWI8qCJH36V1b8FDg6sQQgoOr4mW3iXFY9yle0"},
{"content":{"body":"you mean as opposed to not having rel at all?","m.mentions":{},"msgtype":"m.text"},"ts":1707999517321,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$u8jyp5nlzb8CbnzHge-L8UGZsOUti3JS1kfjCHsc8cI"},
{"content":{"body":"(I personally don't mind that if you want to render-block on things you have to be a bit verbose. This is an advanced feature in a way)","m.mentions":{},"msgtype":"m.text"},"ts":1707999551017,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$Lea3a31YxMgcp8ft3oZen-qeLheVAddSVjiD2GYiJIk"},
{"content":{"body":"...looked, and ok, seems fine. verbose but fine","m.mentions":{},"msgtype":"m.text"},"ts":1707999641035,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$0V737A2p6lrLrQqwmqVHASlFNslLrv_DQu5S80bZG9A"},
{"content":{"body":"Noam Rosenthal: smaug: We do have an opportunity to move away from rel/href for same-document references. I know we had a long discussion already. But `<link expect=someid blocking=render>` is less verbose and could have a real idref like `<label for>`","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: <a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a>: We do have an opportunity to move away from rel/href for same-document references. I know we had a long discussion already. But <code>&lt;link expect=someid blocking=render&gt;</code> is less verbose and could have a real idref like <code>&lt;label for&gt;</code>","m.mentions":{"user_ids":["@noamr:matrix.org","@smaug:mozilla.org"]},"msgtype":"m.text"},"ts":1708006797465,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$RAHuxZv_3dHi03T86fcwB_ZWkuVEsk7IMqGqegvteGY"},
{"content":{"body":"it feels weird to have a `link` without a `rel`.","format":"org.matrix.custom.html","formatted_body":"it feels weird to have a <code>link</code> without a <code>rel</code>.","m.mentions":{},"msgtype":"m.text"},"ts":1708006954075,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$xzv2zS44dh9FqjppGLYSjzlXmb7E-0mNGQMgORS__Rs"},
{"content":{"body":"Noam Rosenthal: same for `<meta charset=utf-8>`, but we did that anyway","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: same for <code>&lt;meta charset=utf-8&gt;</code>, but we did that anyway","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1708006993957,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$Yw8cz5wCE95myPDCLjEF_faYeYwv_NnL1VyJXQp8F-s"},
{"content":{"body":" It does feel that adding all these URL-ish things to this feature doesn't add value, but at this point I don't think those options are materially different.","m.mentions":{},"msgtype":"m.text"},"ts":1708007094967,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$u-rHurFsiZupoeSzsIJVItgxFzKrcn9-sDxbvsrjTAY"},
{"content":{"body":"... as in, their differences relate to options that people are not going to use in practice","m.mentions":{},"msgtype":"m.text"},"ts":1708007215426,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$WgqE53Car4zNe0j-Czpw7dNIYia68jADcepJvo3Cxd8"},
{"content":{"body":"<link> is already weird in many ways, since what people usually think as link is <a href>","m.mentions":{},"msgtype":"m.text"},"ts":1708007357752,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$gHBo3aMHmBYV4rZwwcHwX3awZg_g5F0qqjV6dGw3hNA"},
{"content":{"body":"Noam Rosenthal: I think the `base` handling is a disadvantage with `href` - people will just use a hash, and if they put a `base` element in then the render blocking thing stops working (while `label for` continues to work). I don't know how common `base` is, but it seems avoidable.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: I think the <code>base</code> handling is a disadvantage with <code>href</code> - people will just use a hash, and if they put a <code>base</code> element in then the render blocking thing stops working (while <code>label for</code> continues to work). I don't know how common <code>base</code> is, but it seems avoidable.","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1708007499219,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$FKp-V1N9Zmxm1cxFip8HkWYexHlKgkYexsPoDLbdIwo"},
{"content":{"body":"Can you do this? `<link expect=id blocking=render rel=stylesheet href=\"style.css\">`","format":"org.matrix.custom.html","formatted_body":"Can you do this? <code>&lt;link expect=id blocking=render rel=stylesheet href=\"style.css\"&gt;</code>","m.mentions":{},"msgtype":"m.text"},"ts":1708007550323,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$q7lsG6w_xToUMASGnuqkwlylZwBjD_1WysMn2DQqUEc"},
{"content":{"body":"(link used to be more like a normal link before https://github.com/whatwg/html/pull/6269 )","m.mentions":{},"msgtype":"m.text"},"ts":1708007573911,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$eRChaXhIG5ewUidV9_qXhn5wpR9eCz1Zd5mAN7WlpZ8"},
{"content":{"body":"zcorpan: I agree that the `base` thing is error-prone","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: I agree that the <code>base</code> thing is error-prone","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"msgtype":"m.text"},"ts":1708007782546,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$gMbFnQVqkAoNzAji9Us7i71Z6oN6hqB3knyU2sj4dt0"},
{"content":{"body":"> <@noamr:matrix.org> Can you do this? `<link expect=id blocking=render rel=stylesheet href=\"style.css\">`\n\nSure, but we can make it a document conformance error","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$q7lsG6w_xToUMASGnuqkwlylZwBjD_1WysMn2DQqUEc?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@noamr:matrix.org\">@noamr:matrix.org</a><br>Can you do this? <code>&lt;link expect=id blocking=render rel=stylesheet href=\"style.css\"&gt;</code></blockquote></mx-reply>Sure, but we can make it a document conformance error","m.mentions":{"user_ids":["@noamr:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$q7lsG6w_xToUMASGnuqkwlylZwBjD_1WysMn2DQqUEc"}},"msgtype":"m.text"},"ts":1708008108549,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$BY9JxzPn4dxS5PNqLx8IErqVNmYLQdFa3Xuel2oJ--s"},
{"content":{"body":"OK. I wonder what Domenic thinks about these alternatives (in Tokyo business hours :))","format":"org.matrix.custom.html","formatted_body":"OK. I wonder what <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a> thinks about these alternatives (in Tokyo business hours :))","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"ts":1708008155528,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$iQz-h8fTraXgaQ2r9mfeyxi8GoS4bwQoailnSeZ2K-E"}
]