[
{"content":{"body":"javascript: URL navigation is just a normal navigation I believe. It's a new Window, and a new Document.","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$z0wCv2A0OQYBp3_1ZUbJDCUcwJwLki82pWCRXRdnF0Y"}},"msgtype":"m.text"},"ts":1744243552562,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$TYf1SGGH6qE-LrAnXGN4t3ofEugvAe-iOG7CydbRaZo"},
{"content":{"body":"annevk: WPTs for revamped scoped custom elements test `Element` `customElementRegistry` - but the spec IDL has `Element` `customElements` - which one is the most up to date? Was this the compat issue?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: WPTs for revamped scoped custom elements test <code>Element</code> <code>customElementRegistry</code> - but the spec IDL has <code>Element</code> <code>customElements</code> - which one is the most up to date? Was this the compat issue?","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1744275553483,"senderName":"keithamus","senderId":"@keithamus:matrix.org","id":"$a0VxmDyNGGZrb2hy-SJFSGfWTLStNHVlIAn9wytFzNo"},
{"content":{"body":"nvm, looks like I answered my own question looking at https://github.com/web-platform-tests/wpt/commit/1b4c64d41f2b8f41b7b6215900eaf63e2e8a9f94","m.mentions":{},"msgtype":"m.text"},"ts":1744275604756,"senderName":"keithamus","senderId":"@keithamus:matrix.org","id":"$ig_yKBhXkjiqyuWHIgdRDEllht0ddHl5I6O3Ful7mps"},
{"content":{"body":"jmdyck: thanks, that's fixed now.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jmdyck:matrix.org\">jmdyck</a>: thanks, that's fixed now.","m.mentions":{"user_ids":["@jmdyck:matrix.org"]},"msgtype":"m.text"},"ts":1744278962809,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$X1Gh_wwg4N4-trOrXVGu-4ZAV9D895hJrd61QRt3tWY"},
{"content":{"body":"LI Daobing: file an issue against whatwg/html on GitHub. Also linked from the top of https://html.spec.whatwg.org/multipage/","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@lidaobing:matrix.org\">LI Daobing</a>: file an issue against whatwg/html on GitHub. Also linked from the top of https://html.spec.whatwg.org/multipage/","m.mentions":{"user_ids":["@lidaobing:matrix.org"]},"msgtype":"m.text"},"ts":1744279020892,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$6bmgh_cRJfk2T_JgKMukBJhLXXOE2uMdTN4BGRmtFtI"},
{"content":{"body":"keithamus: which specification still has `customElements`? I thought I had updated all of that quite a while back.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@keithamus:matrix.org\">keithamus</a>: which specification still has <code>customElements</code>? I thought I had updated all of that quite a while back.","m.mentions":{"user_ids":["@keithamus:matrix.org"]},"msgtype":"m.text"},"ts":1744279091399,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$Lx8ZdhWlfLW_dlbkdNu0mYZyd33l6cqhwIHDjXefRdk"},
{"content":{"body":"* keithamus: which specification PR still has `customElements`? I thought I had updated all of that quite a while back.","format":"org.matrix.custom.html","formatted_body":"* <a href=\"https://matrix.to/#/@keithamus:matrix.org\">keithamus</a>: which specification PR still has <code>customElements</code>? I thought I had updated all of that quite a while back.","m.mentions":{},"m.new_content":{"body":"keithamus: which specification PR still has `customElements`? I thought I had updated all of that quite a while back.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@keithamus:matrix.org\">keithamus</a>: which specification PR still has <code>customElements</code>? I thought I had updated all of that quite a while back.","m.mentions":{"user_ids":["@keithamus:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$Lx8ZdhWlfLW_dlbkdNu0mYZyd33l6cqhwIHDjXefRdk","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1744279188830,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$qwAjCOW96P3ngZ7E6djVtmZEDyGW01-M-RylAL3esrA"},
{"content":{"body":"I think it's actually just the comment: https://github.com/whatwg/html/issues/10854#issue-2735341285","m.mentions":{},"msgtype":"m.text"},"ts":1744279196705,"senderName":"keithamus","senderId":"@keithamus:matrix.org","id":"$QBA619FKdTUowuKl_ApFJY3KXl1g7NSXv-iTtI63nMg"},
{"content":{"body":"Oh, well please don't implement based on that.","m.mentions":{},"msgtype":"m.text"},"ts":1744279221592,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$qVu4MAQHBmHbKvZMpscQczA6sT-21PDPZZAEAzggf-o"},
{"content":{"body":"I was just stubbing out the necessary APIs based on it","m.mentions":{},"msgtype":"m.text"},"ts":1744279244925,"senderName":"keithamus","senderId":"@keithamus:matrix.org","id":"$_r_ji6fTpvSaOPN_vhuQIm_RoM6zB7zPpT7nUkTLPuc"},
{"content":{"body":"Oh no. Well, I'll update it, but please don't do that again. We really need implementers to implement based from the specification drafts.","m.mentions":{},"msgtype":"m.text"},"ts":1744279279640,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$l8TJzauZjwpKZx1ItUWZUXL22XjQGDoaegsXDSoE3HE"},
{"content":{"body":"Please tell me to what case this condition is applicable? What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n>    1. Set noopener to true.\n>    2. Set name to \"_blank\".\n>    3. Set windowType to \"new with no opener\".\n\n","format":"org.matrix.custom.html","formatted_body":"<p>Please tell me to what case this condition is applicable? What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n<ol>\n<li>Set noopener to true.</li>\n<li>Set name to \"_blank\".</li>\n<li>Set windowType to \"new with no opener\".</li>\n</ol>\n</li>\n</ol>\n</blockquote>\n","m.mentions":{},"msgtype":"m.text"},"ts":1744294826332,"senderName":"Maxim Vaarwel","senderId":"@dmaxim:matrix.org","id":"$QmJ31NvbGD1-a2VQz-yGMCGGiREFMNM45dl6by93VAQ"},
{"content":{"body":"* What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n\n>     1. Set noopener to true.\n>     2. Set name to \"\\_blank\".\n>     3. Set windowType to \"new with no opener\".","format":"org.matrix.custom.html","formatted_body":"* <p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:</li>\n</ol>\n</blockquote>\n<blockquote>\n<pre><code>1. Set noopener to true.\n2. Set name to \"\\_blank\".\n3. Set windowType to \"new with no opener\".\n</code></pre>\n</blockquote>\n","m.mentions":{},"m.new_content":{"body":"What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n\n>     1. Set noopener to true.\n>     2. Set name to \"\\_blank\".\n>     3. Set windowType to \"new with no opener\".","format":"org.matrix.custom.html","formatted_body":"<p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:</li>\n</ol>\n</blockquote>\n<blockquote>\n<pre><code>1. Set noopener to true.\n2. Set name to \"\\_blank\".\n3. Set windowType to \"new with no opener\".\n</code></pre>\n</blockquote>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$QmJ31NvbGD1-a2VQz-yGMCGGiREFMNM45dl6by93VAQ","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1744294885616,"senderName":"Maxim Vaarwel","senderId":"@dmaxim:matrix.org","id":"$IhjTSD8JZGQeReEhvXgZfNoYzfCQdt9HPpT9hO1E0nE"},
{"content":{"body":"* What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n>    1. Set noopener to true.\n>    2. Set name to \"\\_blank\".\n>    3. Set windowType to \"new with no opener\".","format":"org.matrix.custom.html","formatted_body":"* <p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n<ol>\n<li>Set noopener to true.</li>\n<li>Set name to \"_blank\".</li>\n<li>Set windowType to \"new with no opener\".</li>\n</ol>\n</li>\n</ol>\n</blockquote>\n","m.mentions":{},"m.new_content":{"body":"What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n>    1. Set noopener to true.\n>    2. Set name to \"\\_blank\".\n>    3. Set windowType to \"new with no opener\".","format":"org.matrix.custom.html","formatted_body":"<p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n<ol>\n<li>Set noopener to true.</li>\n<li>Set name to \"_blank\".</li>\n<li>Set windowType to \"new with no opener\".</li>\n</ol>\n</li>\n</ol>\n</blockquote>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$QmJ31NvbGD1-a2VQz-yGMCGGiREFMNM45dl6by93VAQ","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1744294910650,"senderName":"Maxim Vaarwel","senderId":"@dmaxim:matrix.org","id":"$WbbiqUc3p0BQSTWbA41ZiiZ4adZqRaNs5lmPiRWLK2Q"},
{"content":{"body":"* What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n\n>     1. Set noopener to true.\n>     2. Set name to \"\\_blank\".\n>     3. Set windowType to \"new with no opener\".\n> ...\n> 9. Return chosen and windowType.\n\n[window open steps](https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps)\n> 17. If noopener is true or windowType is \"new with no opener\", then return null.","format":"org.matrix.custom.html","formatted_body":"* <p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:</li>\n</ol>\n</blockquote>\n<blockquote>\n<pre><code>1. Set noopener to true.\n2. Set name to \"\\_blank\".\n3. Set windowType to \"new with no opener\".\n</code></pre>\n<p>...<br>9. Return chosen and windowType.</p>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\">window open steps</a></p>\n<blockquote>\n<ol start=\"17\">\n<li>If noopener is true or windowType is \"new with no opener\", then return null.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"m.new_content":{"body":"What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n\n>     1. Set noopener to true.\n>     2. Set name to \"\\_blank\".\n>     3. Set windowType to \"new with no opener\".\n> ...\n> 9. Return chosen and windowType.\n\n[window open steps](https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps)\n> 17. If noopener is true or windowType is \"new with no opener\", then return null.","format":"org.matrix.custom.html","formatted_body":"<p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:</li>\n</ol>\n</blockquote>\n<blockquote>\n<pre><code>1. Set noopener to true.\n2. Set name to \"\\_blank\".\n3. Set windowType to \"new with no opener\".\n</code></pre>\n<p>...<br>9. Return chosen and windowType.</p>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\">window open steps</a></p>\n<blockquote>\n<ol start=\"17\">\n<li>If noopener is true or windowType is \"new with no opener\", then return null.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$QmJ31NvbGD1-a2VQz-yGMCGGiREFMNM45dl6by93VAQ","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1744295077375,"senderName":"Maxim Vaarwel","senderId":"@dmaxim:matrix.org","id":"$2CWlSh8Z1FpD2UVf4PmT96sxcgk0oSkneRf8vK78KQc"},
{"content":{"body":"* What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n>    1. Set noopener to true.\n>    2. Set name to \"\\_blank\".\n>    3. Set windowType to \"new with no opener\".\n> ...\n> 9. Return chosen and windowType.\n\n[window open steps](https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps)\n\n> 17. If noopener is true or windowType is \"new with no opener\", then return null.","format":"org.matrix.custom.html","formatted_body":"* <p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n<ol>\n<li>Set noopener to true.</li>\n<li>Set name to \"_blank\".</li>\n<li>Set windowType to \"new with no opener\".<br>...</li>\n</ol>\n</li>\n<li>Return chosen and windowType.</li>\n</ol>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\">window open steps</a></p>\n<blockquote>\n<ol start=\"17\">\n<li>If noopener is true or windowType is \"new with no opener\", then return null.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"m.new_content":{"body":"What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n>    1. Set noopener to true.\n>    2. Set name to \"\\_blank\".\n>    3. Set windowType to \"new with no opener\".\n> ...\n> 9. Return chosen and windowType.\n\n[window open steps](https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps)\n\n> 17. If noopener is true or windowType is \"new with no opener\", then return null.","format":"org.matrix.custom.html","formatted_body":"<p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n<ol>\n<li>Set noopener to true.</li>\n<li>Set name to \"_blank\".</li>\n<li>Set windowType to \"new with no opener\".<br>...</li>\n</ol>\n</li>\n<li>Return chosen and windowType.</li>\n</ol>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\">window open steps</a></p>\n<blockquote>\n<ol start=\"17\">\n<li>If noopener is true or windowType is \"new with no opener\", then return null.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$QmJ31NvbGD1-a2VQz-yGMCGGiREFMNM45dl6by93VAQ","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1744295091170,"senderName":"Maxim Vaarwel","senderId":"@dmaxim:matrix.org","id":"$GQoocXg2llFkI0scDeKlSiYhwxzvwD97dgQuF7KbHJg"},
{"content":{"body":"* What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n\n>     1. Set noopener to true.\n>     2. Set name to \"\\_blank\".\n>     3. Set windowType to \"new with no opener\".\n>     ...\n> 9. Return chosen and windowType.\n\n[window open steps](https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps)\n\n> 17. If noopener is true or windowType is \"new with no opener\", then return null.","format":"org.matrix.custom.html","formatted_body":"* <p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:</li>\n</ol>\n</blockquote>\n<blockquote>\n<pre><code>1. Set noopener to true.\n2. Set name to \"\\_blank\".\n3. Set windowType to \"new with no opener\".\n...\n</code></pre>\n<ol start=\"9\">\n<li>Return chosen and windowType.</li>\n</ol>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\">window open steps</a></p>\n<blockquote>\n<ol start=\"17\">\n<li>If noopener is true or windowType is \"new with no opener\", then return null.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"m.new_content":{"body":"What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n\n>     1. Set noopener to true.\n>     2. Set name to \"\\_blank\".\n>     3. Set windowType to \"new with no opener\".\n>     ...\n> 9. Return chosen and windowType.\n\n[window open steps](https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps)\n\n> 17. If noopener is true or windowType is \"new with no opener\", then return null.","format":"org.matrix.custom.html","formatted_body":"<p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:</li>\n</ol>\n</blockquote>\n<blockquote>\n<pre><code>1. Set noopener to true.\n2. Set name to \"\\_blank\".\n3. Set windowType to \"new with no opener\".\n...\n</code></pre>\n<ol start=\"9\">\n<li>Return chosen and windowType.</li>\n</ol>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\">window open steps</a></p>\n<blockquote>\n<ol start=\"17\">\n<li>If noopener is true or windowType is \"new with no opener\", then return null.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$QmJ31NvbGD1-a2VQz-yGMCGGiREFMNM45dl6by93VAQ","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1744295128672,"senderName":"Maxim Vaarwel","senderId":"@dmaxim:matrix.org","id":"$7GGUvMSjYNhWnm4QHXkOSYlDF-9SM3KlEhXsZK9VbCA"},
{"content":{"body":"* What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n\n> \n> 1. Set noopener to true.\n> 2. Set name to \"\\_blank\".\n> 3. Set windowType to \"new with no opener\".\n> ...\n> \n> \n> 9. Return chosen and windowType.\n\n[window open steps](https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps)\n\n> 17. If noopener is true or windowType is \"new with no opener\", then return null.","format":"org.matrix.custom.html","formatted_body":"* <p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:</li>\n</ol>\n</blockquote>\n<blockquote>\n<ol>\n<li>\n<p>Set noopener to true.</p>\n</li>\n<li>\n<p>Set name to \"_blank\".</p>\n</li>\n<li>\n<p>Set windowType to \"new with no opener\".<br>...</p>\n</li>\n<li>\n<p>Return chosen and windowType.</p>\n</li>\n</ol>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\">window open steps</a></p>\n<blockquote>\n<ol start=\"17\">\n<li>If noopener is true or windowType is \"new with no opener\", then return null.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"m.new_content":{"body":"What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n\n> \n> 1. Set noopener to true.\n> 2. Set name to \"\\_blank\".\n> 3. Set windowType to \"new with no opener\".\n> ...\n> \n> \n> 9. Return chosen and windowType.\n\n[window open steps](https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps)\n\n> 17. If noopener is true or windowType is \"new with no opener\", then return null.","format":"org.matrix.custom.html","formatted_body":"<p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:</li>\n</ol>\n</blockquote>\n<blockquote>\n<ol>\n<li>\n<p>Set noopener to true.</p>\n</li>\n<li>\n<p>Set name to \"_blank\".</p>\n</li>\n<li>\n<p>Set windowType to \"new with no opener\".<br>...</p>\n</li>\n<li>\n<p>Return chosen and windowType.</p>\n</li>\n</ol>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\">window open steps</a></p>\n<blockquote>\n<ol start=\"17\">\n<li>If noopener is true or windowType is \"new with no opener\", then return null.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$QmJ31NvbGD1-a2VQz-yGMCGGiREFMNM45dl6by93VAQ","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1744295152988,"senderName":"Maxim Vaarwel","senderId":"@dmaxim:matrix.org","id":"$6KTpeyEgTLd5Kakc9Hk8WX4ybCcwmahxJ-W4phW6qVU"},
{"content":{"body":"* What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n>    1. Set noopener to true.\n>    2. Set name to \"\\_blank\".\n>    3. Set windowType to \"new with no opener\".\n> ...\n> 9. Return chosen and windowType.\n\n[window open steps](https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps)\n\n> 17. If noopener is true or windowType is \"new with no opener\", then return null.","format":"org.matrix.custom.html","formatted_body":"* <p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n<ol>\n<li>Set noopener to true.</li>\n<li>Set name to \"_blank\".</li>\n<li>Set windowType to \"new with no opener\".<br>...</li>\n</ol>\n</li>\n<li>Return chosen and windowType.</li>\n</ol>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\">window open steps</a></p>\n<blockquote>\n<ol start=\"17\">\n<li>If noopener is true or windowType is \"new with no opener\", then return null.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"m.new_content":{"body":"What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n>    1. Set noopener to true.\n>    2. Set name to \"\\_blank\".\n>    3. Set windowType to \"new with no opener\".\n> ...\n> 9. Return chosen and windowType.\n\n[window open steps](https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps)\n\n> 17. If noopener is true or windowType is \"new with no opener\", then return null.","format":"org.matrix.custom.html","formatted_body":"<p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n<ol>\n<li>Set noopener to true.</li>\n<li>Set name to \"_blank\".</li>\n<li>Set windowType to \"new with no opener\".<br>...</li>\n</ol>\n</li>\n<li>Return chosen and windowType.</li>\n</ol>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\">window open steps</a></p>\n<blockquote>\n<ol start=\"17\">\n<li>If noopener is true or windowType is \"new with no opener\", then return null.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$QmJ31NvbGD1-a2VQz-yGMCGGiREFMNM45dl6by93VAQ","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1744295172914,"senderName":"Maxim Vaarwel","senderId":"@dmaxim:matrix.org","id":"$OPbpXCQEJUotHlvguk5cGOAhRUFOp2BuwqQX7JNx1lY"},
{"content":{"body":"* What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n\n>     1. Set noopener to true.\n>     2. Set name to \"\\_blank\".\n>     3. Set windowType to \"new with no opener\".\n>     ...\n> 5. Return chosen and windowType.\n\n[window open steps](https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps)\n> 13. Let targetNavigable and windowType be the result of applying the rules for choosing a navigable given target, sourceDocument's node navigable, and noopener.\n> 17. If noopener is true or windowType is \"new with no opener\", then return null.","format":"org.matrix.custom.html","formatted_body":"* <p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:</li>\n</ol>\n</blockquote>\n<blockquote>\n<pre><code>1. Set noopener to true.\n2. Set name to \"\\_blank\".\n3. Set windowType to \"new with no opener\".\n...\n</code></pre>\n<ol start=\"5\">\n<li>Return chosen and windowType.</li>\n</ol>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\">window open steps</a></p>\n<blockquote>\n<ol start=\"13\">\n<li>Let targetNavigable and windowType be the result of applying the rules for choosing a navigable given target, sourceDocument's node navigable, and noopener.</li>\n<li>If noopener is true or windowType is \"new with no opener\", then return null.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"m.new_content":{"body":"What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n\n>     1. Set noopener to true.\n>     2. Set name to \"\\_blank\".\n>     3. Set windowType to \"new with no opener\".\n>     ...\n> 5. Return chosen and windowType.\n\n[window open steps](https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps)\n> 13. Let targetNavigable and windowType be the result of applying the rules for choosing a navigable given target, sourceDocument's node navigable, and noopener.\n> 17. If noopener is true or windowType is \"new with no opener\", then return null.","format":"org.matrix.custom.html","formatted_body":"<p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:</li>\n</ol>\n</blockquote>\n<blockquote>\n<pre><code>1. Set noopener to true.\n2. Set name to \"\\_blank\".\n3. Set windowType to \"new with no opener\".\n...\n</code></pre>\n<ol start=\"5\">\n<li>Return chosen and windowType.</li>\n</ol>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\">window open steps</a></p>\n<blockquote>\n<ol start=\"13\">\n<li>Let targetNavigable and windowType be the result of applying the rules for choosing a navigable given target, sourceDocument's node navigable, and noopener.</li>\n<li>If noopener is true or windowType is \"new with no opener\", then return null.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$QmJ31NvbGD1-a2VQz-yGMCGGiREFMNM45dl6by93VAQ","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1744295241573,"senderName":"Maxim Vaarwel","senderId":"@dmaxim:matrix.org","id":"$xbko-frLSoXd-9qxWanKI0L36imkcbG6aPgEkcMBWvc"},
{"content":{"body":"* What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n> 1. Set noopener to true.\n> 2. Set name to \"\\_blank\".\n> 3. Set windowType to \"new with no opener\".\n> ...\n> 5. Return chosen and windowType.\n\n[window open steps](https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps)\n\n> 13. Let targetNavigable and windowType be the result of applying the rules for choosing a navigable given target, sourceDocument's node navigable, and noopener.\n> 17. If noopener is true or windowType is \"new with no opener\", then return null.","format":"org.matrix.custom.html","formatted_body":"* <p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:</li>\n<li>Set noopener to true.</li>\n<li>Set name to \"_blank\".</li>\n<li>Set windowType to \"new with no opener\".<br>...</li>\n<li>Return chosen and windowType.</li>\n</ol>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\">window open steps</a></p>\n<blockquote>\n<ol start=\"13\">\n<li>Let targetNavigable and windowType be the result of applying the rules for choosing a navigable given target, sourceDocument's node navigable, and noopener.</li>\n<li>If noopener is true or windowType is \"new with no opener\", then return null.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"m.new_content":{"body":"What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n> 1. Set noopener to true.\n> 2. Set name to \"\\_blank\".\n> 3. Set windowType to \"new with no opener\".\n> ...\n> 5. Return chosen and windowType.\n\n[window open steps](https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps)\n\n> 13. Let targetNavigable and windowType be the result of applying the rules for choosing a navigable given target, sourceDocument's node navigable, and noopener.\n> 17. If noopener is true or windowType is \"new with no opener\", then return null.","format":"org.matrix.custom.html","formatted_body":"<p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:</li>\n<li>Set noopener to true.</li>\n<li>Set name to \"_blank\".</li>\n<li>Set windowType to \"new with no opener\".<br>...</li>\n<li>Return chosen and windowType.</li>\n</ol>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\">window open steps</a></p>\n<blockquote>\n<ol start=\"13\">\n<li>Let targetNavigable and windowType be the result of applying the rules for choosing a navigable given target, sourceDocument's node navigable, and noopener.</li>\n<li>If noopener is true or windowType is \"new with no opener\", then return null.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$QmJ31NvbGD1-a2VQz-yGMCGGiREFMNM45dl6by93VAQ","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1744295279479,"senderName":"Maxim Vaarwel","senderId":"@dmaxim:matrix.org","id":"$Ur39fAWraKF8HCuQUOXuJg_oUNgA7hfFH2X-XC3iDVs"},
{"content":{"body":"* What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n>    5. Set noopener to true.\n>    6. Set name to \"\\_blank\".\n>    7. Set windowType to \"new with no opener\".\n> ...\n> 8. Return chosen and windowType.\n\n[window open steps](https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps)\n\n> 13. Let targetNavigable and windowType be the result of applying the rules for choosing a navigable given target, sourceDocument's node navigable, and noopener.\n> 14. If noopener is true or windowType is \"new with no opener\", then return null.","format":"org.matrix.custom.html","formatted_body":"* <p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:<br>5. Set noopener to true.<br>6. Set name to \"_blank\".<br>7. Set windowType to \"new with no opener\".<br>...</li>\n<li>Return chosen and windowType.</li>\n</ol>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\">window open steps</a></p>\n<blockquote>\n<ol start=\"13\">\n<li>Let targetNavigable and windowType be the result of applying the rules for choosing a navigable given target, sourceDocument's node navigable, and noopener.</li>\n<li>If noopener is true or windowType is \"new with no opener\", then return null.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"m.new_content":{"body":"What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n>    5. Set noopener to true.\n>    6. Set name to \"\\_blank\".\n>    7. Set windowType to \"new with no opener\".\n> ...\n> 8. Return chosen and windowType.\n\n[window open steps](https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps)\n\n> 13. Let targetNavigable and windowType be the result of applying the rules for choosing a navigable given target, sourceDocument's node navigable, and noopener.\n> 14. If noopener is true or windowType is \"new with no opener\", then return null.","format":"org.matrix.custom.html","formatted_body":"<p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:<br>5. Set noopener to true.<br>6. Set name to \"_blank\".<br>7. Set windowType to \"new with no opener\".<br>...</li>\n<li>Return chosen and windowType.</li>\n</ol>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\">window open steps</a></p>\n<blockquote>\n<ol start=\"13\">\n<li>Let targetNavigable and windowType be the result of applying the rules for choosing a navigable given target, sourceDocument's node navigable, and noopener.</li>\n<li>If noopener is true or windowType is \"new with no opener\", then return null.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$QmJ31NvbGD1-a2VQz-yGMCGGiREFMNM45dl6by93VAQ","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1744295294322,"senderName":"Maxim Vaarwel","senderId":"@dmaxim:matrix.org","id":"$8ANX9PAg2dLloGy14DcGfZt-23Q-sLOEU1ffRWpoA20"},
{"content":{"body":"* What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n>    1. Set noopener to true.\n>    2. Set name to \"\\_blank\".\n>    3. Set windowType to \"new with no opener\".\n> ...\n> 5. Return chosen and windowType.\n\n[window open steps](https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps)\n\n> 13. Let targetNavigable and windowType be the result of applying the rules for choosing a navigable given target, sourceDocument's node navigable, and noopener.\n> 14. If noopener is true or windowType is \"new with no opener\", then return null.","format":"org.matrix.custom.html","formatted_body":"* <p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n<ol>\n<li>Set noopener to true.</li>\n<li>Set name to \"_blank\".</li>\n<li>Set windowType to \"new with no opener\".<br>...</li>\n</ol>\n</li>\n<li>Return chosen and windowType.</li>\n</ol>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\">window open steps</a></p>\n<blockquote>\n<ol start=\"13\">\n<li>Let targetNavigable and windowType be the result of applying the rules for choosing a navigable given target, sourceDocument's node navigable, and noopener.</li>\n<li>If noopener is true or windowType is \"new with no opener\", then return null.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"m.new_content":{"body":"What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n>    1. Set noopener to true.\n>    2. Set name to \"\\_blank\".\n>    3. Set windowType to \"new with no opener\".\n> ...\n> 5. Return chosen and windowType.\n\n[window open steps](https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps)\n\n> 13. Let targetNavigable and windowType be the result of applying the rules for choosing a navigable given target, sourceDocument's node navigable, and noopener.\n> 14. If noopener is true or windowType is \"new with no opener\", then return null.","format":"org.matrix.custom.html","formatted_body":"<p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n<ol>\n<li>Set noopener to true.</li>\n<li>Set name to \"_blank\".</li>\n<li>Set windowType to \"new with no opener\".<br>...</li>\n</ol>\n</li>\n<li>Return chosen and windowType.</li>\n</ol>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\">window open steps</a></p>\n<blockquote>\n<ol start=\"13\">\n<li>Let targetNavigable and windowType be the result of applying the rules for choosing a navigable given target, sourceDocument's node navigable, and noopener.</li>\n<li>If noopener is true or windowType is \"new with no opener\", then return null.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$QmJ31NvbGD1-a2VQz-yGMCGGiREFMNM45dl6by93VAQ","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1744295316664,"senderName":"Maxim Vaarwel","senderId":"@dmaxim:matrix.org","id":"$fErXmwwQFzJJYb1JiOaxgWCm7uvRw5T8IBgP7R7AszA"},
{"content":{"body":"* What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n\n>     1. Set noopener to true.\n>     2. Set name to \"\\_blank\".\n>     3. Set windowType to \"new with no opener\".\n>     ...\n> 5. Return chosen and windowType.\n\n[window open steps](https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps)\n\n> 13. Let targetNavigable and windowType be the result of [applying the rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable) given target, sourceDocument's node navigable, and noopener.\n> 14. If noopener is true or windowType is \"new with no opener\", then return null.","format":"org.matrix.custom.html","formatted_body":"* <p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:</li>\n</ol>\n</blockquote>\n<blockquote>\n<pre><code>1. Set noopener to true.\n2. Set name to \"\\_blank\".\n3. Set windowType to \"new with no opener\".\n...\n</code></pre>\n<ol start=\"5\">\n<li>Return chosen and windowType.</li>\n</ol>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\">window open steps</a></p>\n<blockquote>\n<ol start=\"13\">\n<li>Let targetNavigable and windowType be the result of <a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">applying the rules for choosing a navigable</a> given target, sourceDocument's node navigable, and noopener.</li>\n<li>If noopener is true or windowType is \"new with no opener\", then return null.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"m.new_content":{"body":"What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n\n>     1. Set noopener to true.\n>     2. Set name to \"\\_blank\".\n>     3. Set windowType to \"new with no opener\".\n>     ...\n> 5. Return chosen and windowType.\n\n[window open steps](https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps)\n\n> 13. Let targetNavigable and windowType be the result of [applying the rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable) given target, sourceDocument's node navigable, and noopener.\n> 14. If noopener is true or windowType is \"new with no opener\", then return null.","format":"org.matrix.custom.html","formatted_body":"<p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:</li>\n</ol>\n</blockquote>\n<blockquote>\n<pre><code>1. Set noopener to true.\n2. Set name to \"\\_blank\".\n3. Set windowType to \"new with no opener\".\n...\n</code></pre>\n<ol start=\"5\">\n<li>Return chosen and windowType.</li>\n</ol>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\">window open steps</a></p>\n<blockquote>\n<ol start=\"13\">\n<li>Let targetNavigable and windowType be the result of <a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">applying the rules for choosing a navigable</a> given target, sourceDocument's node navigable, and noopener.</li>\n<li>If noopener is true or windowType is \"new with no opener\", then return null.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$QmJ31NvbGD1-a2VQz-yGMCGGiREFMNM45dl6by93VAQ","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1744295405425,"senderName":"Maxim Vaarwel","senderId":"@dmaxim:matrix.org","id":"$-pqe1njx1uC3SF1IGs6lQ9HRDhLE05tV52uawPGvXF0"},
{"content":{"body":"* What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n>    1. Set noopener to true.\n>    2. Set name to \"\\_blank\".\n>    3. Set windowType to \"new with no opener\".\n> ...\n> 5. Return chosen and windowType.\n\n[window open steps](https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps)\n\n> 13. Let targetNavigable and windowType be the result of applying [the rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable) given target, sourceDocument's node navigable, and noopener.\n> 14. If noopener is true or windowType is \"new with no opener\", then return null.","format":"org.matrix.custom.html","formatted_body":"* <p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n<ol>\n<li>Set noopener to true.</li>\n<li>Set name to \"_blank\".</li>\n<li>Set windowType to \"new with no opener\".<br>...</li>\n</ol>\n</li>\n<li>Return chosen and windowType.</li>\n</ol>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\">window open steps</a></p>\n<blockquote>\n<ol start=\"13\">\n<li>Let targetNavigable and windowType be the result of applying <a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">the rules for choosing a navigable</a> given target, sourceDocument's node navigable, and noopener.</li>\n<li>If noopener is true or windowType is \"new with no opener\", then return null.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"m.new_content":{"body":"What example satisfies it? I tried many ways and none of them worked.\n\n[The rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable)\n\n> 4. If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n>    1. Set noopener to true.\n>    2. Set name to \"\\_blank\".\n>    3. Set windowType to \"new with no opener\".\n> ...\n> 5. Return chosen and windowType.\n\n[window open steps](https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps)\n\n> 13. Let targetNavigable and windowType be the result of applying [the rules for choosing a navigable](https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable) given target, sourceDocument's node navigable, and noopener.\n> 14. If noopener is true or windowType is \"new with no opener\", then return null.","format":"org.matrix.custom.html","formatted_body":"<p>What example satisfies it? I tried many ways and none of them worked.</p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">The rules for choosing a navigable</a></p>\n<blockquote>\n<ol start=\"4\">\n<li>If currentDocument's opener policy's value is \"same-origin\" or \"same-origin-plus-COEP\", and currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then:\n<ol>\n<li>Set noopener to true.</li>\n<li>Set name to \"_blank\".</li>\n<li>Set windowType to \"new with no opener\".<br>...</li>\n</ol>\n</li>\n<li>Return chosen and windowType.</li>\n</ol>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\">window open steps</a></p>\n<blockquote>\n<ol start=\"13\">\n<li>Let targetNavigable and windowType be the result of applying <a href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable\">the rules for choosing a navigable</a> given target, sourceDocument's node navigable, and noopener.</li>\n<li>If noopener is true or windowType is \"new with no opener\", then return null.</li>\n</ol>\n</blockquote>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$QmJ31NvbGD1-a2VQz-yGMCGGiREFMNM45dl6by93VAQ","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1744295456076,"senderName":"Maxim Vaarwel","senderId":"@dmaxim:matrix.org","id":"$Vm8IH57PfMP8Gh6e9RMJK3WZzmve1Q5JHfmpfcKs6qI"},
{"content":{"body":"Hey, I have a question about this part of the Streams spec.\n\nIn the spec, there's this assertion during return():\n\nAssert: reader.[[readRequests]] is empty, as the async iterator machinery guarantees that any previous calls to next() have settled before this is called.\n\nBut it seems like this assumption can be broken if you call return() directly before the previous next() settles.\n\nHere’s a minimal example:\n```\nlet controller;\nconst stream = new ReadableStream({\n  start(c) {\n    controller = c;\n  }\n});\n\nconst iter = stream[Symbol.asyncIterator]();\nlet next1Promise = iter.next();\nlet next2Promise = iter.next();\n\ncontroller.enqueue(\"Hello\");\n\nawait next1Promise;\n\niter.return();  \n```\n\nThis was originally raised in Node.js here:\nhttps://github.com/nodejs/node/issues/57679","format":"org.matrix.custom.html","formatted_body":"<p>Hey, I have a question about this part of the Streams spec.</p>\n<p>In the spec, there's this assertion during return():</p>\n<p>Assert: reader.[[readRequests]] is empty, as the async iterator machinery guarantees that any previous calls to next() have settled before this is called.</p>\n<p>But it seems like this assumption can be broken if you call return() directly before the previous next() settles.</p>\n<p>Here’s a minimal example:</p>\n<pre><code>let controller;\nconst stream = new ReadableStream({\n  start(c) {\n    controller = c;\n  }\n});\n\nconst iter = stream[Symbol.asyncIterator]();\nlet next1Promise = iter.next();\nlet next2Promise = iter.next();\n\ncontroller.enqueue(\"Hello\");\n\nawait next1Promise;\n\niter.return();  \n</code></pre>\n<p>This was originally raised in Node.js here:<br>https://github.com/nodejs/node/issues/57679</p>\n","m.mentions":{},"msgtype":"m.text"},"ts":1744300267789,"senderName":"Shima Ryuhei","senderId":"@islandryu:matrix.org","id":"$hjl_nltj4US4eZxPZY7fcUNI6pSSC5WeP-pW5kTIQjs"},
{"content":{"body":"* Hey, I have a question about this part of the Streams spec.\n\nIn the spec, there's this assertion during return():\n\n> Assert: reader.\\[\\[readRequests\\]\\] is empty, as the async iterator machinery guarantees that any previous calls to next() have settled before this is called.\n\nBut it seems like this assumption can be broken if you call return() directly before the previous next() settles.\n\nHere’s a minimal example:\n\n```\nlet controller;\nconst stream = new ReadableStream({\n  start(c) {\n    controller = c;\n  }\n});\n\nconst iter = stream[Symbol.asyncIterator]();\nlet next1Promise = iter.next();\nlet next2Promise = iter.next();\n\ncontroller.enqueue(\"Hello\");\n\nawait next1Promise;\n\niter.return();  \n```\n\nThis was originally raised in Node.js here:\nhttps://github.com/nodejs/node/issues/57679","format":"org.matrix.custom.html","formatted_body":"* <p>Hey, I have a question about this part of the Streams spec.</p>\n<p>In the spec, there's this assertion during return():</p>\n<blockquote>\n<p>Assert: reader.[[readRequests]] is empty, as the async iterator machinery guarantees that any previous calls to next() have settled before this is called.</p>\n</blockquote>\n<p>But it seems like this assumption can be broken if you call return() directly before the previous next() settles.</p>\n<p>Here’s a minimal example:</p>\n<pre><code>let controller;\nconst stream = new ReadableStream({\n  start(c) {\n    controller = c;\n  }\n});\n\nconst iter = stream[Symbol.asyncIterator]();\nlet next1Promise = iter.next();\nlet next2Promise = iter.next();\n\ncontroller.enqueue(\"Hello\");\n\nawait next1Promise;\n\niter.return();  \n</code></pre>\n<p>This was originally raised in Node.js here:<br>https://github.com/nodejs/node/issues/57679</p>\n","m.mentions":{},"m.new_content":{"body":"Hey, I have a question about this part of the Streams spec.\n\nIn the spec, there's this assertion during return():\n\n> Assert: reader.\\[\\[readRequests\\]\\] is empty, as the async iterator machinery guarantees that any previous calls to next() have settled before this is called.\n\nBut it seems like this assumption can be broken if you call return() directly before the previous next() settles.\n\nHere’s a minimal example:\n\n```\nlet controller;\nconst stream = new ReadableStream({\n  start(c) {\n    controller = c;\n  }\n});\n\nconst iter = stream[Symbol.asyncIterator]();\nlet next1Promise = iter.next();\nlet next2Promise = iter.next();\n\ncontroller.enqueue(\"Hello\");\n\nawait next1Promise;\n\niter.return();  \n```\n\nThis was originally raised in Node.js here:\nhttps://github.com/nodejs/node/issues/57679","format":"org.matrix.custom.html","formatted_body":"<p>Hey, I have a question about this part of the Streams spec.</p>\n<p>In the spec, there's this assertion during return():</p>\n<blockquote>\n<p>Assert: reader.[[readRequests]] is empty, as the async iterator machinery guarantees that any previous calls to next() have settled before this is called.</p>\n</blockquote>\n<p>But it seems like this assumption can be broken if you call return() directly before the previous next() settles.</p>\n<p>Here’s a minimal example:</p>\n<pre><code>let controller;\nconst stream = new ReadableStream({\n  start(c) {\n    controller = c;\n  }\n});\n\nconst iter = stream[Symbol.asyncIterator]();\nlet next1Promise = iter.next();\nlet next2Promise = iter.next();\n\ncontroller.enqueue(\"Hello\");\n\nawait next1Promise;\n\niter.return();  \n</code></pre>\n<p>This was originally raised in Node.js here:<br>https://github.com/nodejs/node/issues/57679</p>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$hjl_nltj4US4eZxPZY7fcUNI6pSSC5WeP-pW5kTIQjs","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1744300440915,"senderName":"Shima Ryuhei","senderId":"@islandryu:matrix.org","id":"$96BMTtDSWm_AYBe1o56faY_GwTeqBKKMMwjD40RCY88"},
{"content":{"body":"* Hey, I have a question about this part of the Streams spec.\n\nIn the spec, there's this assertion during return():\nhttps://streams.spec.whatwg.org/#rs-asynciterator\n\n> Assert: reader.\\[\\[readRequests\\]\\] is empty, as the async iterator machinery guarantees that any previous calls to next() have settled before this is called.\n\nBut it seems like this assumption can be broken if you call return() directly before the previous next() settles.\n\nHere’s a minimal example:\n\n```\nlet controller;\nconst stream = new ReadableStream({\n  start(c) {\n    controller = c;\n  }\n});\n\nconst iter = stream[Symbol.asyncIterator]();\nlet next1Promise = iter.next();\nlet next2Promise = iter.next();\n\ncontroller.enqueue(\"Hello\");\n\nawait next1Promise;\n\niter.return();  \n```\n\nThis was originally raised in Node.js here:\nhttps://github.com/nodejs/node/issues/57679\n\nIn this section of the Web IDL spec, should the return method call the asynchronous iterator return steps only after the previous next call has settled?\n\nOr am I missing something?","format":"org.matrix.custom.html","formatted_body":"* <p>Hey, I have a question about this part of the Streams spec.</p>\n<p>In the spec, there's this assertion during return():<br>https://streams.spec.whatwg.org/#rs-asynciterator</p>\n<blockquote>\n<p>Assert: reader.[[readRequests]] is empty, as the async iterator machinery guarantees that any previous calls to next() have settled before this is called.</p>\n</blockquote>\n<p>But it seems like this assumption can be broken if you call return() directly before the previous next() settles.</p>\n<p>Here’s a minimal example:</p>\n<pre><code>let controller;\nconst stream = new ReadableStream({\n  start(c) {\n    controller = c;\n  }\n});\n\nconst iter = stream[Symbol.asyncIterator]();\nlet next1Promise = iter.next();\nlet next2Promise = iter.next();\n\ncontroller.enqueue(\"Hello\");\n\nawait next1Promise;\n\niter.return();  \n</code></pre>\n<p>This was originally raised in Node.js here:<br>https://github.com/nodejs/node/issues/57679</p>\n<p>In this section of the Web IDL spec, should the return method call the asynchronous iterator return steps only after the previous next call has settled?</p>\n<p>Or am I missing something?</p>\n","m.mentions":{},"m.new_content":{"body":"Hey, I have a question about this part of the Streams spec.\n\nIn the spec, there's this assertion during return():\nhttps://streams.spec.whatwg.org/#rs-asynciterator\n\n> Assert: reader.\\[\\[readRequests\\]\\] is empty, as the async iterator machinery guarantees that any previous calls to next() have settled before this is called.\n\nBut it seems like this assumption can be broken if you call return() directly before the previous next() settles.\n\nHere’s a minimal example:\n\n```\nlet controller;\nconst stream = new ReadableStream({\n  start(c) {\n    controller = c;\n  }\n});\n\nconst iter = stream[Symbol.asyncIterator]();\nlet next1Promise = iter.next();\nlet next2Promise = iter.next();\n\ncontroller.enqueue(\"Hello\");\n\nawait next1Promise;\n\niter.return();  \n```\n\nThis was originally raised in Node.js here:\nhttps://github.com/nodejs/node/issues/57679\n\nIn this section of the Web IDL spec, should the return method call the asynchronous iterator return steps only after the previous next call has settled?\n\nOr am I missing something?","format":"org.matrix.custom.html","formatted_body":"<p>Hey, I have a question about this part of the Streams spec.</p>\n<p>In the spec, there's this assertion during return():<br>https://streams.spec.whatwg.org/#rs-asynciterator</p>\n<blockquote>\n<p>Assert: reader.[[readRequests]] is empty, as the async iterator machinery guarantees that any previous calls to next() have settled before this is called.</p>\n</blockquote>\n<p>But it seems like this assumption can be broken if you call return() directly before the previous next() settles.</p>\n<p>Here’s a minimal example:</p>\n<pre><code>let controller;\nconst stream = new ReadableStream({\n  start(c) {\n    controller = c;\n  }\n});\n\nconst iter = stream[Symbol.asyncIterator]();\nlet next1Promise = iter.next();\nlet next2Promise = iter.next();\n\ncontroller.enqueue(\"Hello\");\n\nawait next1Promise;\n\niter.return();  \n</code></pre>\n<p>This was originally raised in Node.js here:<br>https://github.com/nodejs/node/issues/57679</p>\n<p>In this section of the Web IDL spec, should the return method call the asynchronous iterator return steps only after the previous next call has settled?</p>\n<p>Or am I missing something?</p>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$hjl_nltj4US4eZxPZY7fcUNI6pSSC5WeP-pW5kTIQjs","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1744300661637,"senderName":"Shima Ryuhei","senderId":"@islandryu:matrix.org","id":"$YeDLodrVaFWLkvolp2VkmLv3Kfz-EDSjjg67yHYgZRo"},
{"content":{"body":"Hmmm. The test uses the initial about:blank document and then sets `src`, which is a case where Window is not replaced ( https://software.hixie.ch/utilities/js/live-dom-viewer/saved/13663 ). But even when navigating from a document that is not the initial about:blank, I get window reuse when navigating to a javascript: URL, see https://software.hixie.ch/utilities/js/live-dom-viewer/saved/13662","format":"org.matrix.custom.html","formatted_body":"Hmmm. The test uses the initial about:blank document and then sets <code>src</code>, which is a case where Window is not replaced ( https://software.hixie.ch/utilities/js/live-dom-viewer/saved/13663 ). But even when navigating from a document that is not the initial about:blank, I get window reuse when navigating to a javascript: URL, see https://software.hixie.ch/utilities/js/live-dom-viewer/saved/13662","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$TYf1SGGH6qE-LrAnXGN4t3ofEugvAe-iOG7CydbRaZo"}},"msgtype":"m.text"},"ts":1744301459820,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$N-xEupxoDzMV3ekRg-n827tKSRUGBF24WzzPGcBVKug"},
{"content":{"body":"The first case is https://html.spec.whatwg.org/#initialise-the-document-object:~:text=If%20browsingContext%27s%20active%20document%27s%20is%20initial%20about%3Ablank%20is%20true%2C%20and%20browsingContext%27s%20active%20document%27s%20origin%20is%20same%20origin%2Ddomain%20with%20navigationParams%27s%20origin%2C%20then%20set%20window%20to%20browsingContext%27s%20active%20window%2E","m.mentions":{},"msgtype":"m.text"},"ts":1744301580858,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$zyp7LkcfukEhw3uLO1fCZyC5PBEZHvBeXWkPCONkmFE"},
{"content":{"body":"The javascript: case is https://html.spec.whatwg.org/#the-javascript:-url-special-case which creates a Document (if a string is returned) but I'm not sure now if it says to reuse the window","m.mentions":{},"msgtype":"m.text"},"ts":1744301716518,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$qzOv2rMzwGlNhUBaep2mbEytOkyOyTgaEUgplQ2_zNw"},
{"content":{"body":"Wait, === will compare the WindowProxy, right? How do I tell if the Window was replaced?","m.mentions":{},"msgtype":"m.text"},"ts":1744303758289,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$dZhjGUMl_p9IW8ehpwojESaS-wDwoMgqxAAb4WiSqtE"}
]