[
{"content":{"body":"Note that we have several large changes in flight: my speculation rules (large addition), jmdyck's <div algorithm> work https://github.com/whatwg/html/pull/11392, and zcorpan's reformatting https://github.com/whatwg/html/pull/11640 .\n\nI landed speculation rules, so the other two will need a bit of rebasing.\n\nIt seems like at least zcorpan's work is easy to rebase. Maybe we should target landing jmdyck's algorithm work first, since it seems more painful to rebase?","format":"org.matrix.custom.html","formatted_body":"<p>Note that we have several large changes in flight: my speculation rules (large addition), <a href=\"https://matrix.to/#/@jmdyck:matrix.org\">jmdyck</a>'s &lt;div algorithm&gt; work https://github.com/whatwg/html/pull/11392, and <a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>'s reformatting https://github.com/whatwg/html/pull/11640 .</p>\n<p>I landed speculation rules, so the other two will need a bit of rebasing.</p>\n<p>It seems like at least <a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>'s work is easy to rebase. Maybe we should target landing <a href=\"https://matrix.to/#/@jmdyck:matrix.org\">jmdyck</a>'s algorithm work first, since it seems more painful to rebase?</p>\n","m.mentions":{"user_ids":["@jmdyck:matrix.org","@zcorpan:mozilla.org"]},"msgtype":"m.text"},"ts":1757467907958,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$Fdh2z2xttz8iol3BM5MmgnA6Z6lln4XCFPnwoMbEF2Y"},
{"content":{"body":"Yes. I was thinking of running reformahtml in ci so that PRs fail if they use formatting that the script would change","msgtype":"m.text"},"ts":1757479390748,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$3E83U8JXmsHvbxTfTJOACokxlcZrNIYKICvnz56dMjY"},
{"content":{"body":"zcorpan: can we make it work for Bikeshed too you think? Would be nice if we can apply it everywhere","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: can we make it work for Bikeshed too you think? Would be nice if we can apply it everywhere","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"msgtype":"m.text"},"ts":1757483985483,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$Rm7kAPrinh-38FmqQSwb8Pv1XSZicwZTYYs_4TD5ong"},
{"content":{"body":"I'll have a word with chatgpt ðŸ™‚","msgtype":"m.text"},"ts":1757485045853,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$k6-L5tACf6C4htHSThAKpkbnTdZFlHrzfmrniJ0Z6Ck"},
{"content":{"body":"zcorpan, annevk \nWe would like to move HTML out-of-order streaming to stage 1 (https://github.com/whatwg/html/issues/11542)\nIt seems to pass the bar we've defined for stage 1 (see https://github.com/whatwg/html/issues/11542#issuecomment-3269569121)\nObviously there are still details to flesh out before it makes it in.\nAny thoughts/objections?\ncc foolip ","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>, <a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a><br>We would like to move HTML out-of-order streaming to stage 1 (https://github.com/whatwg/html/issues/11542)<br>It seems to pass the bar we've defined for stage 1 (see https://github.com/whatwg/html/issues/11542#issuecomment-3269569121)<br>Obviously there are still details to flesh out before it makes it in.<br>Any thoughts/objections?<br>cc <a href=\"https://matrix.to/#/@foolip:matrix.org\">foolip</a>","m.mentions":{"user_ids":["@zcorpan:mozilla.org","@annevk:matrix.org","@foolip:matrix.org"]},"msgtype":"m.text"},"ts":1757495613258,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$4kVYxO1_DQ0OmbC-NJhK-zvjJkSzE74zyPkA9IDAXPY"},
{"content":{"body":"Noam Rosenthal: OK with me","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: OK with me","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1757496577111,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$F2dvJMMOx7kdyC6xNtavkwMETwCrS3W12eXcGqNCN-0"},
{"content":{"body":"Noam Rosenthal: stage 1 seems okay. I do think the API shape will need some changes. We need to come up with a coherent story for all HTML manipulation methods going forward, including replacement for `insertAdjacentHTML()` and such.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: stage 1 seems okay. I do think the API shape will need some changes. We need to come up with a coherent story for all HTML manipulation methods going forward, including replacement for <code>insertAdjacentHTML()</code> and such.","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1757497429422,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$oAjL8hEDtbYQ0L7cl0X6zlD9fVLpSdRtzjfz4DYpVFk"},
{"content":{"body":"Yeah, the API shape if definitely not stable.","m.mentions":{},"msgtype":"m.text"},"ts":1757497454118,"senderName":"foolip","senderId":"@foolip:matrix.org","id":"$Oya1DX9upKsVDQFEx9YWs92kqpweJQRd84lfVLp5W6E"},
{"content":{"body":"specfmt --full-spec  0.18s user 0.04s system 86% cpu 0.256 total\npython3 reformahtml.py ../../whatwg/html/source  1.37s user 0.05s system 97% cpu 1.467 total","m.mentions":{},"msgtype":"m.text"},"ts":1757498742920,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$aNEhtL_GZvi9yrupceq_Lanf6yvcmmt3qUumUOFEPbw"},
{"content":{"body":"Is Python vs Rust perf difference important here? Contributors won't need to run it locally going forward (just once for existing PRs)","m.mentions":{},"msgtype":"m.text"},"ts":1757498959491,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$zfwP8TxSJIscILM7ixtaM2C0gtmQzx8V9lzqU_p34bI"},
{"content":{"body":"Adam Rice would you be interested in becoming the Streams Workstream editor? Mattias Buelens would you be okay with that as well? (Both of you will continue to be editor of the Streams Standard. This is primarily to establish who gets to handle disputes.)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@ricea:matrix.org\">Adam Rice</a> would you be interested in becoming the Streams Workstream editor? <a href=\"https://matrix.to/#/@mattiasbuelens:matrix.org\">Mattias Buelens</a> would you be okay with that as well? (Both of you will continue to be editor of the Streams Standard. This is primarily to establish who gets to handle disputes.)","m.mentions":{"user_ids":["@ricea:matrix.org","@mattiasbuelens:matrix.org"]},"msgtype":"m.text"},"ts":1757499058931,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$ajhugT260vi70sxVjyb2zzmvDyE3Zcz7bkYmY7qK6-Y"},
{"content":{"body":"I think it's fine as long as these are separate tools used at will/on CI. (Like `specfmt` is only used at-will today.)\n\nEventually an ideal architecture would probably be to incorporate it into whatwg/html-build so that `./build.sh` errors on formatting issues, so people can detect them locally without running CI. At that point faster would be better.\n\nI do suspect ChatGPT could do a good job porting the Python to Rust. If you check out the recent PRs to whatwg/html-build from today, it's been helpful.","format":"org.matrix.custom.html","formatted_body":"<p>I think it's fine as long as these are separate tools used at will/on CI. (Like <code>specfmt</code> is only used at-will today.)</p>\n<p>Eventually an ideal architecture would probably be to incorporate it into whatwg/html-build so that <code>./build.sh</code> errors on formatting issues, so people can detect them locally without running CI. At that point faster would be better.</p>\n<p>I do suspect ChatGPT could do a good job porting the Python to Rust. If you check out the recent PRs to whatwg/html-build from today, it's been helpful.</p>\n","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$zfwP8TxSJIscILM7ixtaM2C0gtmQzx8V9lzqU_p34bI"}},"msgtype":"m.text"},"ts":1757499272009,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$kTCldt5iilQHBEfSEYdV6Bxp5SbQe-tyGj_OlyNSgK8"},
{"content":{"body":"Domenic: integrating with the build step (and maybe bikeshed?) seems like a good idea. I'm wondering if we should make specfmt support a no-breaking mode and improve the output for --full-spec (e.g. right now it reformats tags in head), or continue with reformahtml to support bikeshed syntax, add tests, and then convert to rust","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: integrating with the build step (and maybe bikeshed?) seems like a good idea. I'm wondering if we should make specfmt support a no-breaking mode and improve the output for --full-spec (e.g. right now it reformats tags in head), or continue with reformahtml to support bikeshed syntax, add tests, and then convert to rust","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"ts":1757499583516,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$xbagVG4nvCcxTSpVwWiAWYiwvVIO9yWh268l5FGVOxY"},
{"content":{"body":"What Bikeshed syntax were you thinking about?\n\nOur strategy so far has been to add various Bikeshed functionality to Wattsi + html-build.","m.mentions":{},"msgtype":"m.text"},"ts":1757499654773,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$xnHm5QMfHA9-cZ8nWZhP93prFS4AkyKuYsDACEGwWGI"},
{"content":{"body":"I was thinking of supporting markdown. But I guess we don't use markdown for whatwg specs, and csswg prefer semantic breaks, so maybe it's not needed","m.mentions":{},"msgtype":"m.text"},"ts":1757499724201,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$VGTuZoeDFx8mHz-4HX8LtvKF9w4v1lIEqen8Bo-YIks"},
{"content":{"body":"DOM uses `<p>`-less markdown paragraphs","format":"org.matrix.custom.html","formatted_body":"DOM uses <code>&lt;p&gt;</code>-less markdown paragraphs","m.mentions":{},"msgtype":"m.text"},"ts":1757499883708,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$AMYyiw8sjYNXe-U-yfFl0N7EDaPpwdyBoHcnyY5RT_U"},
{"content":{"body":"Streams is pretty much as Markdown as it can be","m.mentions":{},"msgtype":"m.text"},"ts":1757500089848,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$oLp7_ntf_9ZMwaXzzHMRLLaN3qkW9vRPmRJJBQwDD48"},
{"content":{"body":"But yeah I'd suggest just contributing directly to the Rust parts of html-build. With AI, Rust is not so bad.","m.mentions":{},"msgtype":"m.text"},"ts":1757500120694,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$AajIAYOnm4Eyw-B036lP9KNidKkiPXKNfYhWMcaEZBs"},
{"content":{"body":"annevk wanted to be able to reformat the bikeshed specs also though","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a> wanted to be able to reformat the bikeshed specs also though","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1757500346497,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$OWaBK5X5eKBiJiQYt-X_7fDvSMSI9FsrWBlNyIR8T4M"},
{"content":{"body":"Oh, I see, I totally misunderstood. That explains why you were thinking of updating specfmt, since it already supports those...","m.mentions":{},"msgtype":"m.text"},"ts":1757500777045,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$V927bVQrNpU-1EXyyiWvwew_J00gVdoXhztFBQWrc4E"},
{"content":{"body":"Yeah","m.mentions":{},"msgtype":"m.text"},"ts":1757503177678,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$nMnVJZUl5EorqBU60s_pB_58AalGzkHNnm93Q3WFexA"},
{"content":{"body":"It seems easy enough to support markdown paragraphs and lists though","m.mentions":{},"msgtype":"m.text"},"ts":1757503217405,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$Y1KRBEuXWHv5kHNXj6rfA6tRpMkEx1nVUqxq6YJYeEw"},
{"content":{"body":"DOM using `<p>`-less paragraphs seems like a mistake, but there's definitely a few WHATWG specifications leaning more heavily into Markdown these days. If we could agree on some kind of canonical format I'd happily switch to that though.","format":"org.matrix.custom.html","formatted_body":"DOM using <code>&lt;p&gt;</code>-less paragraphs seems like a mistake, but there's definitely a few WHATWG specifications leaning more heavily into Markdown these days. If we could agree on some kind of canonical format I'd happily switch to that though.","m.mentions":{},"msgtype":"m.text"},"ts":1757504346132,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$0rEpCFQSrfGdpl4pWgfWY2aBh7O8nV1vxcxIvGIuyXM"},
{"content":{"body":"What do you mean no-breaking mode?","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$xbagVG4nvCcxTSpVwWiAWYiwvVIO9yWh268l5FGVOxY"}},"msgtype":"m.text"},"ts":1757510300225,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$KY4G24FJoB8cgbE0tEH3PbmcPf_23m9n44v5fXLahJk"},
{"content":{"body":"Fwiw I use specfmt all the time on bikeshed specs. It works for markdown lists and other markdown features/syntax. The Observable spec is very markdown-ey and I've used specfmt constantly throughout development","m.mentions":{},"msgtype":"m.text"},"ts":1757510349266,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$N4bYsbahp9OMCVhTwHBCMSx46isfCDlxk9k3CKmiphI"},
{"content":{"body":"Dominic Farolino: https://github.com/whatwg/html/pull/11640","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domfarolino:matrix.org\">Dominic Farolino</a>: https://github.com/whatwg/html/pull/11640","m.mentions":{"user_ids":["@domfarolino:matrix.org"]},"msgtype":"m.text"},"ts":1757511208818,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$tYFdNKxMkTplexzmWRmyoy-ChbudnZw7FtMDcQJd0PA"},
{"content":{"body":"jmdyck: I guess if Simon's PR doesn't address the whitespace issues you found then a separate PR would be helpful, yes.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jmdyck:matrix.org\">jmdyck</a>: I guess if Simon's PR doesn't address the whitespace issues you found then a separate PR would be helpful, yes.","m.mentions":{"user_ids":["@jmdyck:matrix.org"]},"msgtype":"m.text"},"ts":1757513414729,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$hlFn3bK93yB9dDecTF8UJECj9m4AsKpQwVlwAVbXV34"},
{"content":{"body":"OK sorry for my ignorance, are we reformatting HTML to have no line breaks then? Apologies if I missed a bunch of upstream conversation about this.","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$tYFdNKxMkTplexzmWRmyoy-ChbudnZw7FtMDcQJd0PA"}},"msgtype":"m.text"},"ts":1757528180021,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$6WOJIH0fZ3Qsf4G4iSylwWWZt7Gu3bp9buaysFjSbcA"},
{"content":{"body":"> <@annevk:matrix.org> DOM using `<p>`-less paragraphs seems like a mistake, but there's definitely a few WHATWG specifications leaning more heavily into Markdown these days. If we could agree on some kind of canonical format I'd happily switch to that though.\n\nFwiw if we could align the formats used by the various specs as much as possible that would be great! It's something I run into when switching between Dom and html how the rules are different.\n\nMy two cents are that we should do away with the optional closing tags everywhere for example.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$0rEpCFQSrfGdpl4pWgfWY2aBh7O8nV1vxcxIvGIuyXM?via=igalia.com&via=matrix.org&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br />DOM using <code>&lt;p&gt;</code>-less paragraphs seems like a mistake, but there's definitely a few WHATWG specifications leaning more heavily into Markdown these days. If we could agree on some kind of canonical format I'd happily switch to that though.</blockquote></mx-reply><p>Fwiw if we could align the formats used by the various specs as much as possible that would be great! It's something I run into when switching between Dom and html how the rules are different.</p>\n<p>My two cents are that we should do away with the optional closing tags everywhere for example.</p>","m.relates_to":{"m.in_reply_to":{"event_id":"$0rEpCFQSrfGdpl4pWgfWY2aBh7O8nV1vxcxIvGIuyXM"}},"msgtype":"m.text"},"ts":1757529036542,"senderName":"Luke Warlow","senderId":"@lwarlow:igalia.com","id":"$fVkQaAnga7Eklr6IObP90yZ1jd-WGV44ro6Qdxba-D4"},
{"content":{"body":"* Fwiw if we could align the formats used by the various (whatwg) specs as much as possible that would be great! It's something I run into when switching between Dom and html how the rules are different.\nMy two cents are that we should do away with the optional closing tags everywhere for example.\n","m.new_content":{"body":"> <@annevk:matrix.org> DOM using `<p>`-less paragraphs seems like a mistake, but there's definitely a few WHATWG specifications leaning more heavily into Markdown these days. If we could agree on some kind of canonical format I'd happily switch to that though.\n\nFwiw if we could align the formats used by the various (whatwg) specs as much as possible that would be great! It's something I run into when switching between Dom and html how the rules are different.\nMy two cents are that we should do away with the optional closing tags everywhere for example.\n","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$0rEpCFQSrfGdpl4pWgfWY2aBh7O8nV1vxcxIvGIuyXM?via=igalia.com&via=matrix.org&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a><br />DOM using <code>&lt;p&gt;</code>-less paragraphs seems like a mistake, but there's definitely a few WHATWG specifications leaning more heavily into Markdown these days. If we could agree on some kind of canonical format I'd happily switch to that though.</blockquote></mx-reply>Fwiw if we could align the formats used by the various (whatwg) specs as much as possible that would be great! It's something I run into when switching between Dom and html how the rules are different.<br />My two cents are that we should do away with the optional closing tags everywhere for example.","msgtype":"m.text"},"m.relates_to":{"event_id":"$fVkQaAnga7Eklr6IObP90yZ1jd-WGV44ro6Qdxba-D4","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1757529069409,"senderName":"Luke Warlow","senderId":"@lwarlow:igalia.com","id":"$ELqH8NPHuNfEER0-bgZ8lEUXriiE8WlFPk7KgbcoFMc"},
{"content":{"body":"11640 is proposing no line-breaks within `<p>` and similar. Conversation started with zcorpan's question (in this room) on Friday, I believe.","format":"org.matrix.custom.html","formatted_body":"11640 is proposing no line-breaks within <code>&lt;p&gt;</code> and similar. Conversation started with <a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>'s question (in this room) on Friday, I believe.","m.mentions":{"user_ids":["@domfarolino:matrix.org","@zcorpan:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$6WOJIH0fZ3Qsf4G4iSylwWWZt7Gu3bp9buaysFjSbcA"}},"msgtype":"m.text"},"ts":1757532141413,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$-H1kgUG7zENuENSNwOSur8AtopWhl7hOcf7M0lTAsQI"},
{"content":{"body":"Dominic Farolino: no worries! Yes, that's my proposal. Maybe for all whatwg specs, if editors agree. I think it will make things simpler for contributors.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domfarolino:matrix.org\">@domfarolino:matrix.org</a>: no worries! Yes, that's my proposal. Maybe for all whatwg specs, if editors agree. I think it will make things simpler for contributors.","msgtype":"m.text"},"ts":1757533920851,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$PNdPw-ahT09fh1sCnKsWn4lT7yF1ippjEJ1J0p7baY0"},
{"content":{"body":"Dominic Farolino: I started vibe-coding reformahtml this week as an experiment, but not married to it.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domfarolino:matrix.org\">@domfarolino:matrix.org</a>: I started vibe-coding reformahtml this week as an experiment, but not married to it.","msgtype":"m.text"},"ts":1757533996686,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$ewt7XFuAljllUKxV00d1-MtlLQZr3tOKjoIwblu8cKM"}
]