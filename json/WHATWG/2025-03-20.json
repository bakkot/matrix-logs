[
{"content":{"body":"Luke Warlow: in the setAttribute algorithm, isn't it a bit odd that step 5 may create a new attribute, which isn't necessarily used at all","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@lwarlow:igalia.com\">Luke Warlow</a>: in the setAttribute algorithm, isn't it a bit odd that step 5 may create a new attribute, which isn't necessarily used at all","m.mentions":{"user_ids":["@lwarlow:igalia.com"]},"msgtype":"m.text"},"ts":1742463102126,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$lzMSxXzO7rzDe6_RMFEKq-4TFFVEHI9s6NyfIensnqY"},
{"content":{"body":"Why would it not be used?","m.mentions":{},"msgtype":"m.text"},"ts":1742463201941,"senderName":"Luke Warlow","senderId":"@lwarlow:igalia.com","id":"$1dbLMevXG_uGqq1Wdt5AO1jgyYc-5Uc_fbskbYg6gVA"},
{"content":{"body":"I guess if veriying an attribute value throws?","m.mentions":{},"msgtype":"m.text"},"ts":1742463210598,"senderName":"Luke Warlow","senderId":"@lwarlow:igalia.com","id":"$SZBbje7acV2InMcupITYu5SrGvgwFtRhhBa4PBuJQ5o"},
{"content":{"body":"oh wait, I'm missing something","m.mentions":{},"msgtype":"m.text"},"ts":1742463220277,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$peC4e090XEp8ZY-WF7GRZzHqCePEoqRVUzYb7TPYhP8"},
{"content":{"body":"step 7 does explicit attribute check ","m.mentions":{},"msgtype":"m.text"},"ts":1742463240058,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$5fKRrwCAH4IRSJVPTW3TkCZMpYYwxng5JBi0BAjDuF8"},
{"content":{"body":"hmm, how would I implement that efficiently ...","m.mentions":{},"msgtype":"m.text"},"ts":1742463287479,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$YrZ_s9HkiaCHxjyz-ea-CevyfzqWI5ea42WIcmRulUY"},
{"content":{"body":"you can skip steps 6 and 7 if the CSP isn't enabled. And 7 if the attribute is a safe attribute","m.mentions":{},"msgtype":"m.text"},"ts":1742463379732,"senderName":"Luke Warlow","senderId":"@lwarlow:igalia.com","id":"$xT6zGLO5hZDNsnKPn8xk-bvsv7LNco2lww520oGnxzk"},
{"content":{"body":"* you can skip steps 6 and 7 if the CSP isn't enabled (in at least report only). And 7 if the attribute is a safe attribute","m.mentions":{},"m.new_content":{"body":"you can skip steps 6 and 7 if the CSP isn't enabled (in at least report only). And 7 if the attribute is a safe attribute","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$xT6zGLO5hZDNsnKPn8xk-bvsv7LNco2lww520oGnxzk","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1742463411011,"senderName":"Luke Warlow","senderId":"@lwarlow:igalia.com","id":"$_V2m7AIsSFOTuxivNIXVItZu3lqYCfPY08ZVivM9rG4"},
{"content":{"body":"It is just the identity of the attribute I'm pondering","m.mentions":{},"msgtype":"m.text"},"ts":1742463547992,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$rQLis6COVFi--cPqEzCS5nHDO8JBe9ieLecK_83UVz0"},
{"content":{"body":"Luke Warlow: how does that work in webkit if the TT callback removes the relevant attribute and adds back an attribute with same qname?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@lwarlow:igalia.com\">Luke Warlow</a>: how does that work in webkit if the TT callback removes the relevant attribute and adds back an attribute with same qname?","m.mentions":{"user_ids":["@lwarlow:igalia.com"]},"msgtype":"m.text"},"ts":1742463710096,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$Vnet6JrlVhLoxpcRR1MuWHtqpS8rGRfA20JoWYP2mqA"},
{"content":{"body":"it resyncs the attribute index before setting the value","m.mentions":{},"msgtype":"m.text"},"ts":1742463759732,"senderName":"Luke Warlow","senderId":"@lwarlow:igalia.com","id":"$aI70NCNup6vpriMcMj3litL5xUpuf8Ckodn-UjT-BSM"},
{"content":{"body":"but what does step 7 do?","m.mentions":{},"msgtype":"m.text"},"ts":1742463794480,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$KjM_g6tEpoQZYf8G_R8PsfJyR-mA3leBYccmdED8sKg"},
{"content":{"body":"* it resyncs the attribute index before setting the value (but it only needs to do this when CSP is present AND when the attribute is one that requires a TrustedType)","m.mentions":{},"m.new_content":{"body":"it resyncs the attribute index before setting the value (but it only needs to do this when CSP is present AND when the attribute is one that requires a TrustedType)","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$aI70NCNup6vpriMcMj3litL5xUpuf8Ckodn-UjT-BSM","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1742463797820,"senderName":"Luke Warlow","senderId":"@lwarlow:igalia.com","id":"$eJCxMn4ViYv1DpsZSfJ8naV6623JfEVDST60Np0ZeG4"},
{"content":{"body":"It is not anymore the same attribute","m.mentions":{},"msgtype":"m.text"},"ts":1742463801828,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$HYFIfpMhL28Cg0Y4SJJXBAsyb1jEn7XKyVRbe36OWPU"}
]