[
{"content":{"body":"Domenic: I think special cased is the way to go, though it makes me wonder how the other positional methods should end up working there, `beforeUnsafeHTML` and such","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: I think special cased is the way to go, though it makes me wonder how the other positional methods should end up working there, <code>beforeUnsafeHTML</code> and such","msgtype":"m.text"},"ts":1692941464111,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$8q9s3gYtHFKG3HUCOnVoWGJCbRuzue8g9lC7IoauEio"},
{"content":{"body":"Domenic: and yeah, it should be available on `ShadowRoot` too","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: and yeah, it should be available on <code>ShadowRoot</code> too","msgtype":"m.text"},"ts":1692941501949,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$1UFd2Jsgx3LGFXqg7tvVlpwenMtSUm-s-ZYOtOvaM4w"},
{"content":{"body":"I'm looking at the URL object protocol setter: https://url.spec.whatwg.org/#dom-url-protocol","msgtype":"m.text"},"ts":1692983981717,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$4Ytr2nGdIj4nnhhVh0bzKrMNDxTBe1wjCeRxWFB05hI"},
{"content":{"body":"it runs https://url.spec.whatwg.org/#concept-basic-url-parser","msgtype":"m.text"},"ts":1692983994230,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$sLKdQEazf5c6kpmpjG64Gb341lxDfwxA7G1yw7WFtAw"},
{"content":{"body":"the latter has\n\n> If state override is given, then:\n> If url’s scheme is a special scheme and buffer is not a special scheme, then return.\n\n","format":"org.matrix.custom.html","formatted_body":"<p>the latter has</p>\n<blockquote>\n<p>If state override is given, then:<br>If url’s scheme is a special scheme and buffer is not a special scheme, then return.</p>\n</blockquote>\n","msgtype":"m.text"},"ts":1692984008390,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$TGdEGsGt9KH7H7Raklo0NA5yIDIZgN-dq43MopzEQcM"},
{"content":{"body":"\"special scheme\" meaning http, https, etc","msgtype":"m.text"},"ts":1692984024537,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$-_6lrGA6c_HbpcEMMlykgm_63t9La1qJSg5C0T8YfAA"},
{"content":{"body":"does that mean that `x = new URL('http:bar'); x.protocol = 'notspecial'; x.protocol` should give me `http`?","format":"org.matrix.custom.html","formatted_body":"does that mean that <code>x = new URL('http:bar'); x.protocol = 'notspecial'; x.protocol</code> should give me <code>http</code>?","msgtype":"m.text"},"ts":1692984059965,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$qoVUfAGqhqQSx6LbaYSyqUQOlt8PmYsppcc8Zndm-nI"},
{"content":{"body":"because it does not","msgtype":"m.text"},"ts":1692984062581,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$ESIQR11-srNFlbx8e-v49bnVjZJgKnUxxZmlJ7aKetw"},
{"content":{"body":"in any browser","msgtype":"m.text"},"ts":1692984068067,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$tM9hgA6CP4hZYXic4asUrEkt7vZNNOtsusr0nxfk7Jk"},
{"content":{"body":" * does that mean that `x = new URL('http:bar'); x.protocol = 'notspecial'; x.protocol` should give me `http:`?","format":"org.matrix.custom.html","formatted_body":" * does that mean that <code>x = new URL('http:bar'); x.protocol = 'notspecial'; x.protocol</code> should give me <code>http:</code>?","m.new_content":{"body":"does that mean that `x = new URL('http:bar'); x.protocol = 'notspecial'; x.protocol` should give me `http:`?","format":"org.matrix.custom.html","formatted_body":"does that mean that <code>x = new URL('http:bar'); x.protocol = 'notspecial'; x.protocol</code> should give me <code>http:</code>?","msgtype":"m.text"},"m.relates_to":{"event_id":"$qoVUfAGqhqQSx6LbaYSyqUQOlt8PmYsppcc8Zndm-nI","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1692984076539,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$zc1X2lokfhlB7pj0KuoBH9K2J10lU6J3OLSCYIcwO2E"},
{"content":{"body":"it does in Node though, possibly because they were following the spec","msgtype":"m.text"},"ts":1692984130463,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$y67w8aQlY6JpbVd5zmqfvqR_iywRB-wo2nKbhv8hqEE"},
{"content":{"body":"Web-platform tests show that all browsers are behind in URL tests - https://wpt.fyi/results/url?label=experimental&label=master&aligned","msgtype":"m.text"},"ts":1692988601331,"senderName":"Yagiz Nizipli","senderId":"@yagiznizipli:matrix.org","id":"$VNm0_f5i_Zgv2YEylZ1bAGkcdu0VAbOQBO3X1HSWFBQ"},
{"content":{"body":"Here is a relevant test for non-special scheme to special scheme setter: https://github.com/web-platform-tests/wpt/blob/da479d7ffdf4231062582eb84f1a0309e1e8d7fd/url/resources/setters_tests.json#L205","msgtype":"m.text"},"ts":1692988858552,"senderName":"Yagiz Nizipli","senderId":"@yagiznizipli:matrix.org","id":"$3AOdKTr3M_o4YPz7TweAAtPF2lN4Fb-ZSwK7y4KcGUU"},
{"content":{"body":"https://infosec.zeyu2001.com/2023/from-xs-leaks-to-ss-leaks I wonder if the <object> behavior for a samesite leak could be fixed across browsers?","format":"org.matrix.custom.html","formatted_body":"https://infosec.zeyu2001.com/2023/from-xs-leaks-to-ss-leaks I wonder if the <!-- raw HTML omitted --> behavior for a samesite leak could be fixed across browsers?","msgtype":"m.text"},"ts":1692989895956,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$cDrEudHqFQPkgwzZAVpm6AJGi-E9vXJWck5CGIs5qGU"},
{"content":{"body":"bakkot: yeah, that's the idea","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@bakkot:matrix.org\">bakkot</a>: yeah, that's the idea","msgtype":"m.text"},"ts":1692989910948,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$9Ao9PlGkNP3Jg9KqHsOfBFkRAzk546-nxJcxIzVo4xc"},
{"content":{"body":"bakkot: there's an open issue on this and we might change it, but it would require a reparse of the entire URL, which is rather ugly, so I hope browsers can get this fixed","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@bakkot:matrix.org\">bakkot</a>: there's an open issue on this and we might change it, but it would require a reparse of the entire URL, which is rather ugly, so I hope browsers can get this fixed","msgtype":"m.text"},"ts":1692989952804,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$a5rtcr6yE7mJ-jxzz08k1ezbpHlJ_D3yvYNdN7F1JKM"},
{"content":{"body":"> The <object> element differs from iframes in a major way. If the status code of the requested resource is 404, the object is not at all rendered in the DOM. While the object element exists in the DOM tree, none of the page contents are actually rendered in the DOM.","format":"org.matrix.custom.html","formatted_body":"<blockquote>\n<p>The <!-- raw HTML omitted --> element differs from iframes in a major way. If the status code of the requested resource is 404, the object is not at all rendered in the DOM. While the object element exists in the DOM tree, none of the page contents are actually rendered in the DOM.</p>\n</blockquote>","msgtype":"m.text"},"ts":1692990068286,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$GdGik0YXRL5QkHxoA-NMrhb_Rp0Os7H9DbL7cq9V-ek"},
{"content":{"body":"freddy: there's a number of issues on <object> loading against whatwg/html; someone would have to try I suppose","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@fbraun:mozilla.org\">freddy</a>: there's a number of issues on &lt;object&gt; loading against whatwg/html; someone would have to try I suppose","msgtype":"m.text"},"ts":1692990280102,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$JgjCLTytbQBVdnMgAs15I4lxeKi1BVnSLCDdoCYSW14"}
]