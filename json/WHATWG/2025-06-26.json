[
{"content":{"body":"Does the HTML spec consider \"returning an ECMA-262-style throw completion\" be  the same as throwing? If not, I cannot find where the QuotaExceededError in the last step of [run a classic script](https://html.spec.whatwg.org/#run-a-classic-script) is ever used.","format":"org.matrix.custom.html","formatted_body":"Does the HTML spec consider \"returning an ECMA-262-style throw completion\" be  the same as throwing? If not, I cannot find where the QuotaExceededError in the last step of <a href=\"https://html.spec.whatwg.org/#run-a-classic-script\">run a classic script</a> is ever used.","m.mentions":{},"msgtype":"m.text"},"ts":1750939602395,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$K5HUc-y_6FwEu7EjJK59yeeUzmlOy73CxYrLimEqlGs"},
{"content":{"body":"And I feel like it interacts in some what with the \"let the aborting continue\" in the last step of https://html.spec.whatwg.org/#import-scripts-into-worker-global-scope, but it's not clear if that means that it re-returns that throw completion","m.mentions":{},"msgtype":"m.text"},"ts":1750939735541,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$GXIHQ-W9NU07NbYJVv8iq4C1D39mVKCdfWHc8l-fT14"},
{"content":{"body":"* And I feel like it interacts in some way with the \"let the aborting continue\" in the last step of https://html.spec.whatwg.org/#import-scripts-into-worker-global-scope, but it's not clear if that means that it re-returns that throw completion","m.mentions":{},"m.new_content":{"body":"And I feel like it interacts in some way with the \"let the aborting continue\" in the last step of https://html.spec.whatwg.org/#import-scripts-into-worker-global-scope, but it's not clear if that means that it re-returns that throw completion","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$GXIHQ-W9NU07NbYJVv8iq4C1D39mVKCdfWHc8l-fT14","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1750939791739,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$1OARWRvg6kBf7I3NIIcAVcQEeK0ueqE95nKdcZuZYdQ"},
{"content":{"body":"nicolo-ribaudo: isn't throwing an abrupt completion and handled in step 8?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@nicolo-ribaudo:matrix.org\">nicolo-ribaudo</a>: isn't throwing an abrupt completion and handled in step 8?","m.mentions":{"user_ids":["@nicolo-ribaudo:matrix.org"]},"msgtype":"m.text"},"ts":1750939799755,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$U-IngDIP6yMDJxTc1EByDTyHVEpQKhq5-MvcyTBeNR8"},
{"content":{"body":"I mean the throw completion it creates at step 11","m.mentions":{},"msgtype":"m.text"},"ts":1750939824302,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$f0-lC87XPw6_0q6EY-Ee_9cHBc6iRhkYBq4yMoiderQ"},
{"content":{"body":"Oh I wonder if that's a leftover from a refactor. Looking at 8.2.2 I think that should also be just a throw.","m.mentions":{},"msgtype":"m.text"},"ts":1750939878826,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$WQfErtHGJN_VvmGpCD247ARAAiWwUXH_UvgfTPFC3yw"},
{"content":{"body":"Or at least they ought to be consistent.","m.mentions":{},"msgtype":"m.text"},"ts":1750939907599,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$xrHcTJXanloczU4Rm55mQH9GRCS1x3bwtMxTJWzm88I"},
{"content":{"body":"There is one caller that checks the completion record returned by that algorithm (https://html.spec.whatwg.org/#the-javascript:-url-special-case:run-a-classic-script), but it then never actually checks the error if it returns a non-normal completion","m.mentions":{},"msgtype":"m.text"},"ts":1750939920350,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$mpcl_-xXu0t46Bn3ddY_fl5riHAPUdgMV91XaWDiA04"},
{"content":{"body":"* There is one caller that checks the completion record returned by that algorithm (https://html.spec.whatwg.org/#the-javascript:-url-special-case:run-a-classic-script, step 9), but it then never actually checks the error if it returns a non-normal completion","m.mentions":{},"m.new_content":{"body":"There is one caller that checks the completion record returned by that algorithm (https://html.spec.whatwg.org/#the-javascript:-url-special-case:run-a-classic-script, step 9), but it then never actually checks the error if it returns a non-normal completion","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$mpcl_-xXu0t46Bn3ddY_fl5riHAPUdgMV91XaWDiA04","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1750939929071,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$fQ6ml8H9EB1QXg_UQxS9DpY2YCv6aZaD2tgJMMbGA4I"},
{"content":{"body":"So a question would also be: should that \"evaluate a javascript: URL\" algorithm re-throw errors thrown by running a classic script, or should it handle them as if they were throw completions and thus just return null at step 10 (rather than propagating the exception at step 7)","m.mentions":{},"msgtype":"m.text"},"ts":1750939999961,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$Z-9gdF-urit92nzb2KDYd3PVGhtvee-xAyZqhu28zIo"},
{"content":{"body":"Yeah, makes sense. If you have the time figuring that out would be good, failing that an issue would be appreciated.","m.mentions":{},"msgtype":"m.text"},"ts":1750940066009,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$ls29agi-J7Eow1rSynCklampZezaublzID25-dASfzo"},
{"content":{"body":"I'll open an issue but figuring it would will be very low in my priority list of things to do :P","m.mentions":{},"msgtype":"m.text"},"ts":1750940104159,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$6Q4fRcyERC6MzXJYuFkS7-S2GlHbcgup-6-UfEq2jAs"},
{"content":{"body":"I guess for this I can actually write a test and see what is the expected behavior","m.mentions":{},"m.relates_to":{"m.in_reply_to":{"event_id":"$Z-9gdF-urit92nzb2KDYd3PVGhtvee-xAyZqhu28zIo"}},"msgtype":"m.text"},"ts":1750940117035,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$FGcu0eZOf482wcjR0PmRW-ncW9pH5M5yLE3XW2Ki7Cg"},
{"content":{"body":"Maybe we can nerd snipe zcorpan","format":"org.matrix.custom.html","formatted_body":"Maybe we can nerd snipe <a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"msgtype":"m.text"},"ts":1750940144734,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$-e7ipQk8XR67192xfu1tMrRon4fINQ2otDbZsG3_OcU"},
{"content":{"body":"https://github.com/whatwg/html/issues/11404","m.mentions":{},"msgtype":"m.text"},"ts":1750940463887,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$5bdMk6k-SPuCsfqud5zW4fsgMQVROxbhoJZovkcZJko"},
{"content":{"body":"nicolo-ribaudo: it seems to me returning null at step 10 is what was intended, but if so the spec should be changed to explicitly catch it per https://infra.spec.whatwg.org/#algorithm-control-flow","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@nicolo-ribaudo:matrix.org\">nicolo-ribaudo</a>: it seems to me returning null at step 10 is what was intended, but if so the spec should be changed to explicitly catch it per https://infra.spec.whatwg.org/#algorithm-control-flow","m.mentions":{"user_ids":["@nicolo-ribaudo:matrix.org"]},"msgtype":"m.text"},"ts":1750940749307,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$UemA0SF74aiX5BLijQVM8UoeWeRmGwNeIofNrGiWvMI"},
{"content":{"body":"If we rely on rethrow elsewhere (and it seems like we do), yes. Also, if we only return a value for `javascript:` URLs we don't have to return an ECMAScript-style completion.","format":"org.matrix.custom.html","formatted_body":"If we rely on rethrow elsewhere (and it seems like we do), yes. Also, if we only return a value for <code>javascript:</code> URLs we don't have to return an ECMAScript-style completion.","m.mentions":{},"msgtype":"m.text"},"ts":1750941535389,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$feZrjyN5eJv05RNOSByMVxsXFa9iEQeA-f_kH-g1Nx8"},
{"content":{"body":"I'm not seeing any agenda items on today's WHATNOT meeting (https://github.com/whatwg/html/issues/11386, nothing agenda+ in the repo).  Should we cancel?","m.mentions":{},"msgtype":"m.text"},"ts":1750949561191,"senderName":"cwilso","senderId":"@cwilso:matrix.org","id":"$gmIcau5cv0U4vJkSHGTM29wecbVBAnmGUbqoKoJMBiM"},
{"content":{"body":"I think so, it is the meeting which gets least participation in general, I believe","m.mentions":{},"msgtype":"m.text"},"ts":1750950003975,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$bbxYOKKQpu4h1TQvcYMlt012A2tvxNwOtnJgAtLR_bU"},
{"content":{"body":"With the release of Firefox 140 I found out about https://github.com/whatwg/html/pull/7829 One part of the outline algorithm I heavily rely on, is the ability to just use `h1` tags everywhere, and have them rendered at the expected level (this is e.g., really helpful when moving sections/articles around in a document and not having to worry about updating their header tags to the level of their new location). Are there any plans to bring back this part of the algorithm or to provide a replacement feature (e.g., a `hn` tag)? Or is the recommendation to implement this myself with a custom element? Thanks in advance for any insights.","format":"org.matrix.custom.html","formatted_body":"With the release of Firefox 140 I found out about https://github.com/whatwg/html/pull/7829 One part of the outline algorithm I heavily rely on, is the ability to just use <code>h1</code> tags everywhere, and have them rendered at the expected level (this is e.g., really helpful when moving sections/articles around in a document and not having to worry about updating their header tags to the level of their new location). Are there any plans to bring back this part of the algorithm or to provide a replacement feature (e.g., a <code>hn</code> tag)? Or is the recommendation to implement this myself with a custom element? Thanks in advance for any insights.","m.mentions":{},"msgtype":"m.text"},"ts":1750960843326,"senderName":"anthonyv.be","senderId":"@anthonyv.be:matrix.org","id":"$8i20A6DCnIcsRqA9u82a7KrdLEUviO0VWvND_cPSyjQ"}
]