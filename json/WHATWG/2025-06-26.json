[
{"content":{"body":"Does the HTML spec consider \"returning an ECMA-262-style throw completion\" be  the same as throwing? If not, I cannot find where the QuotaExceededError in the last step of [run a classic script](https://html.spec.whatwg.org/#run-a-classic-script) is ever used.","format":"org.matrix.custom.html","formatted_body":"Does the HTML spec consider \"returning an ECMA-262-style throw completion\" be  the same as throwing? If not, I cannot find where the QuotaExceededError in the last step of <a href=\"https://html.spec.whatwg.org/#run-a-classic-script\">run a classic script</a> is ever used.","m.mentions":{},"msgtype":"m.text"},"ts":1750939602395,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$K5HUc-y_6FwEu7EjJK59yeeUzmlOy73CxYrLimEqlGs"},
{"content":{"body":"And I feel like it interacts in some what with the \"let the aborting continue\" in the last step of https://html.spec.whatwg.org/#import-scripts-into-worker-global-scope, but it's not clear if that means that it re-returns that throw completion","m.mentions":{},"msgtype":"m.text"},"ts":1750939735541,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$GXIHQ-W9NU07NbYJVv8iq4C1D39mVKCdfWHc8l-fT14"},
{"content":{"body":"* And I feel like it interacts in some way with the \"let the aborting continue\" in the last step of https://html.spec.whatwg.org/#import-scripts-into-worker-global-scope, but it's not clear if that means that it re-returns that throw completion","m.mentions":{},"m.new_content":{"body":"And I feel like it interacts in some way with the \"let the aborting continue\" in the last step of https://html.spec.whatwg.org/#import-scripts-into-worker-global-scope, but it's not clear if that means that it re-returns that throw completion","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$GXIHQ-W9NU07NbYJVv8iq4C1D39mVKCdfWHc8l-fT14","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1750939791739,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$1OARWRvg6kBf7I3NIIcAVcQEeK0ueqE95nKdcZuZYdQ"},
{"content":{"body":"nicolo-ribaudo: isn't throwing an abrupt completion and handled in step 8?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@nicolo-ribaudo:matrix.org\">nicolo-ribaudo</a>: isn't throwing an abrupt completion and handled in step 8?","m.mentions":{"user_ids":["@nicolo-ribaudo:matrix.org"]},"msgtype":"m.text"},"ts":1750939799755,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$U-IngDIP6yMDJxTc1EByDTyHVEpQKhq5-MvcyTBeNR8"},
{"content":{"body":"I mean the throw completion it creates at step 11","m.mentions":{},"msgtype":"m.text"},"ts":1750939824302,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$f0-lC87XPw6_0q6EY-Ee_9cHBc6iRhkYBq4yMoiderQ"},
{"content":{"body":"Oh I wonder if that's a leftover from a refactor. Looking at 8.2.2 I think that should also be just a throw.","m.mentions":{},"msgtype":"m.text"},"ts":1750939878826,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$WQfErtHGJN_VvmGpCD247ARAAiWwUXH_UvgfTPFC3yw"},
{"content":{"body":"Or at least they ought to be consistent.","m.mentions":{},"msgtype":"m.text"},"ts":1750939907599,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$xrHcTJXanloczU4Rm55mQH9GRCS1x3bwtMxTJWzm88I"},
{"content":{"body":"There is one caller that checks the completion record returned by that algorithm (https://html.spec.whatwg.org/#the-javascript:-url-special-case:run-a-classic-script), but it then never actually checks the error if it returns a non-normal completion","m.mentions":{},"msgtype":"m.text"},"ts":1750939920350,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$mpcl_-xXu0t46Bn3ddY_fl5riHAPUdgMV91XaWDiA04"},
{"content":{"body":"* There is one caller that checks the completion record returned by that algorithm (https://html.spec.whatwg.org/#the-javascript:-url-special-case:run-a-classic-script, step 9), but it then never actually checks the error if it returns a non-normal completion","m.mentions":{},"m.new_content":{"body":"There is one caller that checks the completion record returned by that algorithm (https://html.spec.whatwg.org/#the-javascript:-url-special-case:run-a-classic-script, step 9), but it then never actually checks the error if it returns a non-normal completion","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$mpcl_-xXu0t46Bn3ddY_fl5riHAPUdgMV91XaWDiA04","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1750939929071,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$fQ6ml8H9EB1QXg_UQxS9DpY2YCv6aZaD2tgJMMbGA4I"},
{"content":{"body":"So a question would also be: should that \"evaluate a javascript: URL\" algorithm re-throw errors thrown by running a classic script, or should it handle them as if they were throw completions and thus just return null at step 10 (rather than propagating the exception at step 7)","m.mentions":{},"msgtype":"m.text"},"ts":1750939999961,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$Z-9gdF-urit92nzb2KDYd3PVGhtvee-xAyZqhu28zIo"},
{"content":{"body":"Yeah, makes sense. If you have the time figuring that out would be good, failing that an issue would be appreciated.","m.mentions":{},"msgtype":"m.text"},"ts":1750940066009,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$ls29agi-J7Eow1rSynCklampZezaublzID25-dASfzo"},
{"content":{"body":"I'll open an issue but figuring it would will be very low in my priority list of things to do :P","m.mentions":{},"msgtype":"m.text"},"ts":1750940104159,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$6Q4fRcyERC6MzXJYuFkS7-S2GlHbcgup-6-UfEq2jAs"},
{"content":{"body":"I guess for this I can actually write a test and see what is the expected behavior","m.mentions":{},"m.relates_to":{"m.in_reply_to":{"event_id":"$Z-9gdF-urit92nzb2KDYd3PVGhtvee-xAyZqhu28zIo"}},"msgtype":"m.text"},"ts":1750940117035,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$FGcu0eZOf482wcjR0PmRW-ncW9pH5M5yLE3XW2Ki7Cg"},
{"content":{"body":"Maybe we can nerd snipe zcorpan","format":"org.matrix.custom.html","formatted_body":"Maybe we can nerd snipe <a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"msgtype":"m.text"},"ts":1750940144734,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$-e7ipQk8XR67192xfu1tMrRon4fINQ2otDbZsG3_OcU"}
]