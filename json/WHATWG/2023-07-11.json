[
{"content":{"body":"Heads up: I just pushed the first phase of my html parser rewrite (take 2). It looks like it should be great; in particular, I got *zero* output changes in WHATWG specs. I did spot checks on several specs to make sure I wasn't outputting spurious new warnings, but as I don't yet have console text logged as part of tests, I'm not 100% sure about that. Please let me know if anything looks wrong.","format":"org.matrix.custom.html","formatted_body":"Heads up: I just pushed the first phase of my html parser rewrite (take 2). It looks like it should be great; in particular, I got <em>zero</em> output changes in WHATWG specs. I did spot checks on several specs to make sure I wasn't outputting spurious new warnings, but as I don't yet have console text logged as part of tests, I'm not 100% sure about that. Please let me know if anything looks wrong.","msgtype":"m.text"},"ts":1689108479760,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$et8Zd9q0_LXNL-E5IL1XRQwsJuQ9Zh4wP13P2LRap2A"},
{"content":{"body":"(It's in the new version 3.14.0)","msgtype":"m.text"},"ts":1689108488208,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$06tBEXXPXjE6hvdyJy28dX2V4V_voybiED7CNU7UF38"},
{"content":{"body":"> <@tabatkins:matrix.org> Heads up: I just pushed the first phase of my html parser rewrite (take 2). It looks like it should be great; in particular, I got *zero* output changes in WHATWG specs. I did spot checks on several specs to make sure I wasn't outputting spurious new warnings, but as I don't yet have console text logged as part of tests, I'm not 100% sure about that. Please let me know if anything looks wrong.\n\nPython parser? Embedded in Bikeshed?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$et8Zd9q0_LXNL-E5IL1XRQwsJuQ9Zh4wP13P2LRap2A?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@tabatkins:matrix.org\">@tabatkins:matrix.org</a><br />Heads up: I just pushed the first phase of my html parser rewrite (take 2). It looks like it should be great; in particular, I got <em>zero</em> output changes in WHATWG specs. I did spot checks on several specs to make sure I wasn't outputting spurious new warnings, but as I don't yet have console text logged as part of tests, I'm not 100% sure about that. Please let me know if anything looks wrong.</blockquote></mx-reply>Python parser? Embedded in Bikeshed?","m.relates_to":{"m.in_reply_to":{"event_id":"$et8Zd9q0_LXNL-E5IL1XRQwsJuQ9Zh4wP13P2LRap2A"}},"msgtype":"m.text"},"ts":1689116512481,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$B8e1T70aPHalEQYgSsk8vW2FIxCwGBrRXZkOEVKJkCk"},
{"content":{"body":"Yeah, plan for a long while has been to integrate all of Bikeshed's core parsing into one (heavily modified) parser.","msgtype":"m.text"},"ts":1689116549891,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$hBGc_l-b_n5jBiw3T01r8ebPW25RWfhOvd2CTHm0Oe4"},
{"content":{"body":"HTML, markdown, and all of bikeshed's varied shorthand syntaxes","msgtype":"m.text"},"ts":1689116574306,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$fRh4sg411hjIV6-fd7Zk2eDAYXFdwYjFTedlC6bakgM"},
{"content":{"body":"Excellent","msgtype":"m.text"},"ts":1689116580878,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$POcMh6I4dI2khtiPoVxwQzcnVu-XEf8a2naqhL5Z8ws"},
{"content":{"body":"Optimized for performance? Or instead that's not a priority?","msgtype":"m.text"},"ts":1689116673351,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$l2_iRGY6YbgLUQenKruQqS_Aj0G-wecCYcknvlrrVi4"},
{"content":{"body":"Definitely not a priority at this phase, but I'm pretty confident it will be a perf benefit over the \"run shitloads of regexes over the document repeatedly\" process that I do today.","msgtype":"m.text"},"ts":1689116733485,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$4RItFRsz93IbOCOEvDl34V6FfvoEm1NMYABf29jyG64"},
{"content":{"body":"But mostly it's about correctness; processing things in the distinct phases that I do today just doesn't work","msgtype":"m.text"},"ts":1689116760269,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$PzrtD0seBEJ8lRrQslCNgVjps0NJ-1afXfcF_mcuS8M"},
{"content":{"body":"(There's a bunch of places where, say, I have to handle something before the HTML parser sees it, but I have to avoid messing with it if it shows up inside an XMP or markdown code span, etc. All my inline shorthands work only if you nest them in the order that I happen to process them. etc.)","msgtype":"m.text"},"ts":1689116861283,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$-onjQAfofp1e45_LuXt-pInQbb1hoOZEXFVXzNYfQEc"}
]