[
{"content":{"body":"I'm OK to skip.","m.relates_to":{"event_id":"$6xKXqg40-Y7NaJlely-sJLZ1q4yIFwpN1GdN_CBgYlg","is_falling_back":true,"m.in_reply_to":{"event_id":"$lhrm1_AuQwXgdQLEC18oiWyD6_bKLZVRYauyPwAHHlk"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1726618614280,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$N7xJkKbV3nl16_dh3O2O0BnoNSESl46lYk30bgsHtpc"},
{"content":{"body":"> <@annevk:matrix.org> Domenic: do the changes in https://github.com/w3c/csswg-drafts/issues/10550#issuecomment-2328247135 work for you? Any preferred text for referencing this kind of serialization from HTML?\n\nYes, they work! I think I suggested some reference text in the last sentence of https://github.com/w3c/csswg-drafts/issues/10550#issuecomment-2292850688 . (Although I used `<a href=\"...\">` instead of `<span data-x=\"...\">` for clarity since they don't know Wattsi over there.)","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$J5ANulxVruQXm1n01nomGOMlGZYK6WaN5Gzs0g8CxEk?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: do the changes in https://github.com/w3c/csswg-drafts/issues/10550#issuecomment-2328247135 work for you? Any preferred text for referencing this kind of serialization from HTML?</blockquote></mx-reply>Yes, they work! I think I suggested some reference text in the last sentence of https://github.com/w3c/csswg-drafts/issues/10550#issuecomment-2292850688 . (Although I used <code>&lt;a href=\"...\"&gt;</code> instead of <code>&lt;span data-x=\"...\"&gt;</code> for clarity since they don't know Wattsi over there.)","m.mentions":{"user_ids":["@annevk:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$J5ANulxVruQXm1n01nomGOMlGZYK6WaN5Gzs0g8CxEk"}},"msgtype":"m.text"},"ts":1726637813795,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$4SuYmBlTKBtzw6N4KVmo5ao331ZFxmDiLo9IvxQlHTs"},
{"content":{"body":"I'm okay to skip as well.","m.mentions":{},"m.relates_to":{"event_id":"$6xKXqg40-Y7NaJlely-sJLZ1q4yIFwpN1GdN_CBgYlg","is_falling_back":true,"m.in_reply_to":{"event_id":"$N7xJkKbV3nl16_dh3O2O0BnoNSESl46lYk30bgsHtpc"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1726640004595,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$iB9iZNlBnKJi8nBNqvx3koANSfQFTXtrt8vn2T88OuM"},
{"content":{"body":"hsivonen: Adam Rice: I'd appreciate your thoughts on https://github.com/whatwg/encoding/pull/335. I'm convinced we should do GB18030-2022, but not entirely sure whether it should impact GBK or not. It seems about as incompatible for either encoding so maybe keeping them aligned is better? That would require updating the underlying table and have 18 additional encoder mappings. The alternative would be not touching the table and have 18 encoder/decoder mappings solely for gb18030.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@hsivonen:mozilla.org\">hsivonen</a>: <a href=\"https://matrix.to/#/@ricea:matrix.org\">Adam Rice</a>: I'd appreciate your thoughts on https://github.com/whatwg/encoding/pull/335. I'm convinced we should do GB18030-2022, but not entirely sure whether it should impact GBK or not. It seems about as incompatible for either encoding so maybe keeping them aligned is better? That would require updating the underlying table and have 18 additional encoder mappings. The alternative would be not touching the table and have 18 encoder/decoder mappings solely for gb18030.","m.mentions":{"user_ids":["@hsivonen:mozilla.org","@ricea:matrix.org"]},"msgtype":"m.text"},"ts":1726640200584,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$9H_plC6IKGMKN8yyfuHhyHwKPIt9aLqLcTJo5zpYxzU"},
{"content":{"body":"> <@annevk:matrix.org> hsivonen: Adam Rice: I'd appreciate your thoughts on https://github.com/whatwg/encoding/pull/335. I'm convinced we should do GB18030-2022, but not entirely sure whether it should impact GBK or not. It seems about as incompatible for either encoding so maybe keeping them aligned is better? That would require updating the underlying table and have 18 additional encoder mappings. The alternative would be not touching the table and have 18 encoder/decoder mappings solely for gb18030.\n\nIt seems bad to tweak legacy encodings, and I'm not sure how much this matters in practice. I'm quite skeptical of there being real interest these days in GB18030-the-encoding as opposed to GB18030-the-repertoire with UTF-8. Making WHATWG gbk diverge from Windows 936 does not seem nice in principle, but I could see an argument why changing WHATWG gbk might make sense in practice if any of this matters in practice. Do you know if Microsoft intends to change Windows code pages 936 and 54936?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$9H_plC6IKGMKN8yyfuHhyHwKPIt9aLqLcTJo5zpYxzU?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@hsivonen:mozilla.org\">hsivonen</a>: <a href=\"https://matrix.to/#/@ricea:matrix.org\">Adam Rice</a>: I'd appreciate your thoughts on https://github.com/whatwg/encoding/pull/335. I'm convinced we should do GB18030-2022, but not entirely sure whether it should impact GBK or not. It seems about as incompatible for either encoding so maybe keeping them aligned is better? That would require updating the underlying table and have 18 additional encoder mappings. The alternative would be not touching the table and have 18 encoder/decoder mappings solely for gb18030.</blockquote></mx-reply>It seems bad to tweak legacy encodings, and I'm not sure how much this matters in practice. I'm quite skeptical of there being real interest these days in GB18030-the-encoding as opposed to GB18030-the-repertoire with UTF-8. Making WHATWG gbk diverge from Windows 936 does not seem nice in principle, but I could see an argument why changing WHATWG gbk might make sense in practice if any of this matters in practice. Do you know if Microsoft intends to change Windows code pages 936 and 54936?","m.mentions":{"user_ids":["@annevk:matrix.org","@ricea:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$9H_plC6IKGMKN8yyfuHhyHwKPIt9aLqLcTJo5zpYxzU"}},"msgtype":"m.text"},"ts":1726648554786,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$D17UkC35R2bss-4QCyA1sIQ4JNETMaXHXRCo-VLoLsA"},
{"content":{"body":"hsivonen: I know ICU doesn't plan to make changes to GBK. I doubt Windows would make changes. The main reason to change GBK as well is because it already inherits most of gb18030 in the Encoding Standard. E.g., GBK uses the gb18030 decoder. Anyway, we could decide to safeguard GBK from these additional changes and defend it with test coverage, I'm just not sure it's worth it. Especially as it's mainly PUA code points.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@hsivonen:mozilla.org\">hsivonen</a>: I know ICU doesn't plan to make changes to GBK. I doubt Windows would make changes. The main reason to change GBK as well is because it already inherits most of gb18030 in the Encoding Standard. E.g., GBK uses the gb18030 decoder. Anyway, we could decide to safeguard GBK from these additional changes and defend it with test coverage, I'm just not sure it's worth it. Especially as it's mainly PUA code points.","m.mentions":{"user_ids":["@hsivonen:mozilla.org"]},"msgtype":"m.text"},"ts":1726648804398,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$tpl5khBMqLmmt9F4xlhDXH5tg0b5o3yMDqXGOANz3ck"},
{"content":{"body":"And it already regressed in Chromium and WebKit for about a year without anybody complaining...","m.mentions":{},"msgtype":"m.text"},"ts":1726648824868,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$bL3_riDvTjMaJFMCcF5IbgvBCTH30RBFvrZA_tO9IFA"},
{"content":{"body":"> <@annevk:matrix.org> And it already regressed in Chromium and WebKit for about a year without anybody complaining...\n\nDo you mean Chromium has implemented the gb18030 label as gb18030-2022?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$bL3_riDvTjMaJFMCcF5IbgvBCTH30RBFvrZA_tO9IFA?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br>And it already regressed in Chromium and WebKit for about a year without anybody complaining...</blockquote></mx-reply>Do you mean Chromium has implemented the gb18030 label as gb18030-2022?","m.mentions":{"user_ids":["@annevk:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$bL3_riDvTjMaJFMCcF5IbgvBCTH30RBFvrZA_tO9IFA"}},"msgtype":"m.text"},"ts":1726648871053,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$JYJA00DK2WihvpKrJuIsbU-pNI5R07P--hdhqrHP25w"},
{"content":{"body":"hsivonen: some variant of gb18030-2022, yes. I think the one they currently ship is not the Unicode recommendation as they just copied the code from WebKit without much discussion. And it has impacted their implementation of GBK as well (because of the Encoding Standard sharing a lot of logic between GBK and gb18030), just like it has in WebKit...","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@hsivonen:mozilla.org\">hsivonen</a>: some variant of gb18030-2022, yes. I think the one they currently ship is not the Unicode recommendation as they just copied the code from WebKit without much discussion. And it has impacted their implementation of GBK as well (because of the Encoding Standard sharing a lot of logic between GBK and gb18030), just like it has in WebKit...","m.mentions":{"user_ids":["@hsivonen:mozilla.org"]},"msgtype":"m.text"},"ts":1726648997235,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$zt_VkPJDZAb9c-B-HbBqw6szAfrTXMxdUsOvZ3VPnAs"},
{"content":{"body":"🙈","m.mentions":{},"msgtype":"m.text"},"ts":1726649014114,"senderName":"Ms2ger","senderId":"@ms2ger:igalia.com","id":"$vOG5QbGjaW7trQJLgANDvGU2YqmBEzJXbY2cvymuiUc"},
{"content":{"body":"I'm already sad that our EUC-KR isn't an exact PUA match for Windows code page 949, but my sadness about this isn't really a good technical argument.","m.mentions":{},"msgtype":"m.text"},"ts":1726649109160,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$mCMJE_FG73vL7sM4mat426g0jZXrC31SI0BRWWkLA4w"},
{"content":{"body":"If gbk in both WebKit and Chromium has diverged from Windows code page 936 for a year towards less PUA, I guess it's a rather convincing sign of it being Web-compatible. What happens if you try to encode the relevant PUA code points?","m.mentions":{},"msgtype":"m.text"},"ts":1726649244013,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$MFj82ROlmHZIhk6bJUaw6NGy25rlzzlEpdzxJ1Zus8w"},
{"content":{"body":"Yeah, I can't say I'm thrilled about how all this went down with some flip-flopping along the way as to how exactly GB18030-2022 is to be implemented coupled with unforeseen side effects for GBK. But it is what it is.","m.mentions":{},"msgtype":"m.text"},"ts":1726649283676,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$JESOqMv1nnsF4_aep2amN1yBsko2zXFZlCG4uDcnUeU"},
{"content":{"body":"hsivonen: that currently fails. https://github.com/web-platform-tests/wpt/pull/48240 demonstrates this. The reason is that the additional encoder code points are guarded by a gb18030 check. It's like the worst solution one can imagine.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@hsivonen:mozilla.org\">hsivonen</a>: that currently fails. https://github.com/web-platform-tests/wpt/pull/48240 demonstrates this. The reason is that the additional encoder code points are guarded by a gb18030 check. It's like the worst solution one can imagine.","m.mentions":{"user_ids":["@hsivonen:mozilla.org"]},"msgtype":"m.text"},"ts":1726649379671,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$cGH3sR_7gAYbM_VobNVlHue9hdNMMVeCU2M6GJPhSsk"},
{"content":{"body":"hsivonen: given the three lists in https://github.com/whatwg/encoding/issues/312#issuecomment-2354764499 my idea for the best solution given today's knowledge is as follows:\n\n1. We encode the 18 bidirectional mappings (the first set) directly in the gb18030 index.\n2. We encode the 18 from Unicode mappings (the second set) as an additional encoder step shared by GBK and gb18030.\n3. We leave the third set alone as the gb18030 decoder (and GBK decoder for that matter) already handle those as-is.","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@hsivonen:mozilla.org\">hsivonen</a>: given the three lists in https://github.com/whatwg/encoding/issues/312#issuecomment-2354764499 my idea for the best solution given today's knowledge is as follows:</p>\n<ol>\n<li>We encode the 18 bidirectional mappings (the first set) directly in the gb18030 index.</li>\n<li>We encode the 18 from Unicode mappings (the second set) as an additional encoder step shared by GBK and gb18030.</li>\n<li>We leave the third set alone as the gb18030 decoder (and GBK decoder for that matter) already handle those as-is.</li>\n</ol>\n","m.mentions":{"user_ids":["@hsivonen:mozilla.org"]},"msgtype":"m.text"},"ts":1726649551801,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$_G_AUx78nd6E7f0absRylQ71iUNNeRQjildpzRXF3aU"},
{"content":{"body":"> <@annevk:matrix.org> hsivonen: given the three lists in https://github.com/whatwg/encoding/issues/312#issuecomment-2354764499 my idea for the best solution given today's knowledge is as follows:\n> \n> 1. We encode the 18 bidirectional mappings (the first set) directly in the gb18030 index.\n> 2. We encode the 18 from Unicode mappings (the second set) as an additional encoder step shared by GBK and gb18030.\n> 3. We leave the third set alone as the gb18030 decoder (and GBK decoder for that matter) already handle those as-is.\n\nDoes 'as-is' in item 3 mean doing the Unicode recommendation of decoding the 4-byte sequences (as gb18030) to non-PUA (and errors in gbk)?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$_G_AUx78nd6E7f0absRylQ71iUNNeRQjildpzRXF3aU?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><p><a href=\"https://matrix.to/#/@hsivonen:mozilla.org\">hsivonen</a>: given the three lists in https://github.com/whatwg/encoding/issues/312#issuecomment-2354764499 my idea for the best solution given today's knowledge is as follows:</p>\n<ol>\n<li>We encode the 18 bidirectional mappings (the first set) directly in the gb18030 index.</li>\n<li>We encode the 18 from Unicode mappings (the second set) as an additional encoder step shared by GBK and gb18030.</li>\n<li>We leave the third set alone as the gb18030 decoder (and GBK decoder for that matter) already handle those as-is.</li>\n</ol>\n</blockquote></mx-reply>Does 'as-is' in item 3 mean doing the Unicode recommendation of decoding the 4-byte sequences (as gb18030) to non-PUA (and errors in gbk)?","m.mentions":{"user_ids":["@annevk:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$_G_AUx78nd6E7f0absRylQ71iUNNeRQjildpzRXF3aU"}},"msgtype":"m.text"},"ts":1726649722073,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$gN5_nsadW6lhs9-VLzfjx01feIf5AUbMktTNFDgiXlQ"}
]