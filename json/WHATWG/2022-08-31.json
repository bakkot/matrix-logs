[
{"content":{"body":"Domenic: What's the story behind https://wpt.fyi/results/html?label=master&label=experimental&aligned&view=subtest&q=window-reuse-in-nested-browsing-contexts.tentative.html ? I'm trying to make Gecko's initial about:blank more Web-compatible, and I now have a patch that results in Chrome-consistent behavior on that test: 6 fails and 1 pass (the single pass being \"iframe with initial src == same-origin resource.\"). Despite what I have said earlier (when I believed it was worthwhile to pursue Presto-style initial about:blank), I now have strong doubts about the usefulness of pursuing the expectations of this test.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: What's the story behind https://wpt.fyi/results/html?label=master&amp;label=experimental&amp;aligned&amp;view=subtest&amp;q=window-reuse-in-nested-browsing-contexts.tentative.html ? I'm trying to make Gecko's initial about:blank more Web-compatible, and I now have a patch that results in Chrome-consistent behavior on that test: 6 fails and 1 pass (the single pass being &quot;iframe with initial src == same-origin resource.&quot;). Despite what I have said earlier (when I believed it was worthwhile to pursue Presto-style initial about:blank), I now have strong doubts about the usefulness of pursuing the expectations of this test.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Domenic: What's the story behind https://wpt.fyi/results/html?label=master&label=experimental&aligned&view=subtest&q=window-reuse-in-nested-browsing-contexts.tentative.html ? I'm trying to make Gecko's initial about:blank more Web-compatible, and I now have a patch that results in Chrome-consistent behavior on that test: 6 fails and 1 pass (the single pass being \"iframe with initial src == same-origin resource.\"). Despite what I have said earlier (when I believed it was worthwhile to pursue Presto-style initial about:blank), I now have strong doubts about the usefulness of pursuing the expectations of this test.","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: What's the story behind https://wpt.fyi/results/html?label=master&amp;label=experimental&amp;aligned&amp;view=subtest&amp;q=window-reuse-in-nested-browsing-contexts.tentative.html ? I'm trying to make Gecko's initial about:blank more Web-compatible, and I now have a patch that results in Chrome-consistent behavior on that test: 6 fails and 1 pass (the single pass being &quot;iframe with initial src == same-origin resource.&quot;). Despite what I have said earlier (when I believed it was worthwhile to pursue Presto-style initial about:blank), I now have strong doubts about the usefulness of pursuing the expectations of this test.","mimetype":"text/html"}]},"ts":1661927838065,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$7z5xTmC2SuXSYE_m2KEWBT1mBXH9EQ2VK55zAkrBbVM"},
{"content":{"body":"Hmm!","msgtype":"m.text","org.matrix.msc1767.text":"Hmm!"},"ts":1661927890151,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$1gtAff6KrjjMj6gDY32Fb7Ch0VaM0UoSqw8EiLmYMMw"},
{"content":{"body":"Where is that open issue....","msgtype":"m.text","org.matrix.msc1767.text":"Where is that open issue...."},"ts":1661927959572,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$S4N_jys68BaXfDfjVpi76NBSz9hEGqXuTggoavuoH90"},
{"content":{"body":"https://github.com/whatwg/html/issues/546 and https://github.com/whatwg/html/issues/3267 I think","msgtype":"m.text","org.matrix.msc1767.text":"https://github.com/whatwg/html/issues/546 and https://github.com/whatwg/html/issues/3267 I think"},"ts":1661928027935,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$yhKBCYOA_vAZuaQwVairMMnLti2NHXbuQ-cQV-6TVTU"},
{"content":{"body":"> <@domenicdenicola:matrix.org> https://github.com/whatwg/html/issues/546 and https://github.com/whatwg/html/issues/3267 I think\n\nThanks. I apologize for advocating for Presto-style about:blank for the past 11 years. It now seems to me that the path to interop is WebKit/Blink-style about:blank.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$yhKBCYOA_vAZuaQwVairMMnLti2NHXbuQ-cQV-6TVTU?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">@domenicdenicola:matrix.org</a><br>https://github.com/whatwg/html/issues/546 and https://github.com/whatwg/html/issues/3267 I think</blockquote></mx-reply>Thanks. I apologize for advocating for Presto-style about:blank for the past 11 years. It now seems to me that the path to interop is WebKit/Blink-style about:blank.","m.relates_to":{"m.in_reply_to":{"event_id":"$yhKBCYOA_vAZuaQwVairMMnLti2NHXbuQ-cQV-6TVTU"}},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":"> <@domenicdenicola:matrix.org> https://github.com/whatwg/html/issues/546 and https://github.com/whatwg/html/issues/3267 I think\n\nThanks. I apologize for advocating for Presto-style about:blank for the past 11 years. It now seems to me that the path to interop is WebKit/Blink-style about:blank.","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$yhKBCYOA_vAZuaQwVairMMnLti2NHXbuQ-cQV-6TVTU?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">@domenicdenicola:matrix.org</a><br>https://github.com/whatwg/html/issues/546 and https://github.com/whatwg/html/issues/3267 I think</blockquote></mx-reply>Thanks. I apologize for advocating for Presto-style about:blank for the past 11 years. It now seems to me that the path to interop is WebKit/Blink-style about:blank.","mimetype":"text/html"}]},"ts":1661928149119,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$qmDC1_dI4cM_lyi3AQF9PePSFnmESsKfnoBsdkZ3omA"},
{"content":{"body":"My position is pretty generic: we should do anything that we can get interop on and is web-compatible; ideally that thing should be somewhat principled.","msgtype":"m.text","org.matrix.msc1767.text":"My position is pretty generic: we should do anything that we can get interop on and is web-compatible; ideally that thing should be somewhat principled."},"ts":1661928157425,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$xfSPga2PvGMUMaa8DGecPmoa1_BdXClXN_BAK9nuXCc"},
{"content":{"body":"In the past I've been reluctant to change the spec away from Gecko behavior because Gecko put a lot of work into this and their approach seemed principled. But if you're up for it, let's do so.","msgtype":"m.text","org.matrix.msc1767.text":"In the past I've been reluctant to change the spec away from Gecko behavior because Gecko put a lot of work into this and their approach seemed principled. But if you're up for it, let's do so."},"ts":1661928203071,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$Q5UnFS7YKgk7OJhcpnTyCQYOsErvvCH1T7_LUm7eklQ"},
{"content":{"body":"Now I need to figure out how to spec it. It'll be on top of https://github.com/whatwg/html/pull/6315 although I don't think the Window reuse parts changed much.","msgtype":"m.text","org.matrix.msc1767.text":"Now I need to figure out how to spec it. It'll be on top of https://github.com/whatwg/html/pull/6315 although I don't think the Window reuse parts changed much."},"ts":1661928232872,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$PkRBmjsam_bFPM6dMphS9yfhUHRAW8i-ONVIVF5NfVo"},
{"content":{"body":"I have a hard time seeing Gecko's currently-released about:blank behavior as principled.","msgtype":"m.text","org.matrix.msc1767.text":"I have a hard time seeing Gecko's currently-released about:blank behavior as principled."},"ts":1661928265402,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$5XzaTXcUkM7OuYwmKVuGqakFS520cnXuUHNKUI20qZY"},
{"content":{"body":"Would you be kind enough to drop a comment in one of those issues explaining exactly what WebKit/Blink-style about:blank is and how you might spec it? I see the test results matrix but it'd take me some time to reload this all into my brain enough to understand the right approach.","msgtype":"m.text","org.matrix.msc1767.text":"Would you be kind enough to drop a comment in one of those issues explaining exactly what WebKit/Blink-style about:blank is and how you might spec it? I see the test results matrix but it'd take me some time to reload this all into my brain enough to understand the right approach."},"ts":1661928326781,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$LgEdOKLlN2MWf_iIdFJ6B9MlQVdNoYLQhYC4p6NsoBk"},
{"content":{"body":"Also, it sounds like you might be supportive of my upcoming pitch to add navigation/history to Interop 2023 :)","msgtype":"m.text","org.matrix.msc1767.text":"Also, it sounds like you might be supportive of my upcoming pitch to add navigation/history to Interop 2023 :)"},"ts":1661928455414,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$X8AIKyUzJFmnlMf2bitHaXYPql4G-fA3x3SIUTjQzRI"},
{"content":{"body":"> <@domenicdenicola:matrix.org> Would you be kind enough to drop a comment in one of those issues explaining exactly what WebKit/Blink-style about:blank is and how you might spec it? I see the test results matrix but it'd take me some time to reload this all into my brain enough to understand the right approach.\n\nCommented: https://github.com/whatwg/html/issues/3267#issuecomment-1232545141","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$LgEdOKLlN2MWf_iIdFJ6B9MlQVdNoYLQhYC4p6NsoBk?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">@domenicdenicola:matrix.org</a><br>Would you be kind enough to drop a comment in one of those issues explaining exactly what WebKit/Blink-style about:blank is and how you might spec it? I see the test results matrix but it&#39;d take me some time to reload this all into my brain enough to understand the right approach.</blockquote></mx-reply>Commented: https://github.com/whatwg/html/issues/3267#issuecomment-1232545141","m.relates_to":{"m.in_reply_to":{"event_id":"$LgEdOKLlN2MWf_iIdFJ6B9MlQVdNoYLQhYC4p6NsoBk"}},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":"> <@domenicdenicola:matrix.org> Would you be kind enough to drop a comment in one of those issues explaining exactly what WebKit/Blink-style about:blank is and how you might spec it? I see the test results matrix but it'd take me some time to reload this all into my brain enough to understand the right approach.\n\nCommented: https://github.com/whatwg/html/issues/3267#issuecomment-1232545141","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$LgEdOKLlN2MWf_iIdFJ6B9MlQVdNoYLQhYC4p6NsoBk?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">@domenicdenicola:matrix.org</a><br>Would you be kind enough to drop a comment in one of those issues explaining exactly what WebKit/Blink-style about:blank is and how you might spec it? I see the test results matrix but it&#39;d take me some time to reload this all into my brain enough to understand the right approach.</blockquote></mx-reply>Commented: https://github.com/whatwg/html/issues/3267#issuecomment-1232545141","mimetype":"text/html"}]},"ts":1661929584844,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$92iZG0cxG5wTad7h6vYL2udhYC1kuX-2xHRUorvzcd8"},
{"content":{"body":"Perfect, thank you! I will add that into https://github.com/whatwg/html/pull/6315 so we can close the two issues. I will also happily approve any WPT changes in that direction. You might want to adopt the tests from the abandoned https://chromium-review.googlesource.com/c/chromium/src/+/804797 to make sure the full matrix from that issue is covered...","msgtype":"m.text","org.matrix.msc1767.text":"Perfect, thank you! I will add that into https://github.com/whatwg/html/pull/6315 so we can close the two issues. I will also happily approve any WPT changes in that direction. You might want to adopt the tests from the abandoned https://chromium-review.googlesource.com/c/chromium/src/+/804797 to make sure the full matrix from that issue is covered..."},"ts":1661930470992,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$GsxMA1GUG6dK_MvLqb5MKPQyyVJ_Td_CPYixJ8NCo6U"},
{"content":{"body":"I guess I should say that on the issue to record our plan of record","msgtype":"m.text","org.matrix.msc1767.text":"I guess I should say that on the issue to record our plan of record"},"ts":1661930481061,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$rdu1tr3n2Pk6DD4wGoOZzOWZdXwqdt8gyKEi0J8q-dc"},
{"content":{"body":"> <@sideshowbarker:matrix.org> zcorpan: (or anybody familiar with DOMMatrix) Shouldn’t https://drafts.fxtf.org/geometry/#intro say “**3x3** and 4x4” rather than “3x2 and 4x4”?\n> \n> …Or even just only say 4x4 — because, as far as I can understand it at least, DOMMatrix can represent matrices of at most 4x4, but can also represent 2x2 matrices (along with 3x3)\n\nNo, it's correct. The \"2D\" variant is m11,m12,m21,m22,m41,m42 (also exposed as .a to .f)","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$QW4sO2wiyyqIRII8_qn8shxurEaTnGr5KvwDl-uKAGc?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">@sideshowbarker:matrix.org</a><br><p><a href=\"https://matrix.to/#/@zcorpan_:matrix.org\">zcorpan</a>: (or anybody familiar with DOMMatrix) Shouldn’t https://drafts.fxtf.org/geometry/#intro say “<strong>3x3</strong> and 4x4” rather than “3x2 and 4x4”?</p>\n<p>…Or even just only say 4x4 — because, as far as I can understand it at least, DOMMatrix can represent matrices of at most 4x4, but can also represent 2x2 matrices (along with 3x3)</p>\n</blockquote></mx-reply>No, it's correct. The &quot;2D&quot; variant is m11,m12,m21,m22,m41,m42 (also exposed as .a to .f)","m.relates_to":{"m.in_reply_to":{"event_id":"$QW4sO2wiyyqIRII8_qn8shxurEaTnGr5KvwDl-uKAGc"}},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":"> <@sideshowbarker:matrix.org> zcorpan: (or anybody familiar with DOMMatrix) Shouldn’t https://drafts.fxtf.org/geometry/#intro say “**3x3** and 4x4” rather than “3x2 and 4x4”?\n> \n> …Or even just only say 4x4 — because, as far as I can understand it at least, DOMMatrix can represent matrices of at most 4x4, but can also represent 2x2 matrices (along with 3x3)\n\nNo, it's correct. The \"2D\" variant is m11,m12,m21,m22,m41,m42 (also exposed as .a to .f)","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$QW4sO2wiyyqIRII8_qn8shxurEaTnGr5KvwDl-uKAGc?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">@sideshowbarker:matrix.org</a><br><p><a href=\"https://matrix.to/#/@zcorpan_:matrix.org\">zcorpan</a>: (or anybody familiar with DOMMatrix) Shouldn’t https://drafts.fxtf.org/geometry/#intro say “<strong>3x3</strong> and 4x4” rather than “3x2 and 4x4”?</p>\n<p>…Or even just only say 4x4 — because, as far as I can understand it at least, DOMMatrix can represent matrices of at most 4x4, but can also represent 2x2 matrices (along with 3x3)</p>\n</blockquote></mx-reply>No, it's correct. The &quot;2D&quot; variant is m11,m12,m21,m22,m41,m42 (also exposed as .a to .f)","mimetype":"text/html"}]},"ts":1661952306087,"senderName":"zcorpan","senderId":"@zcorpan_:matrix.org","id":"$jrRU2rPoU5gCzbawofq02XzxSgi9TzGa5BuLuKMxGUw"},
{"content":{"body":"Is there a guarantee that aborting a fetch will result in the promise being rejecting? Wondering if it's possible to abort a fetch after the resolve microtask is already queued, in which case I'd expect the fetch promise to resolve (since the abort came in too late). Is that how it works?","msgtype":"m.text","org.matrix.msc1767.text":"Is there a guarantee that aborting a fetch will result in the promise being rejecting? Wondering if it's possible to abort a fetch after the resolve microtask is already queued, in which case I'd expect the fetch promise to resolve (since the abort came in too late). Is that how it works?"},"ts":1661957058715,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$mLUBegvKR2DPFQKUn1kOMPvOWoAnTuVU3k06GK3nQ-I"},
{"content":{"body":"Dominic Farolino: yeah, since abort also queues so that would happen after (it doesn't reach into the queue and modify things)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domfarolino:matrix.org\">Dominic Farolino</a>: yeah, since abort also queues so that would happen after (it doesn't reach into the queue and modify things)","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Dominic Farolino: yeah, since abort also queues so that would happen after (it doesn't reach into the queue and modify things)","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@domfarolino:matrix.org\">Dominic Farolino</a>: yeah, since abort also queues so that would happen after (it doesn't reach into the queue and modify things)","mimetype":"text/html"}]},"ts":1661957359027,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$TUOIuL1xBIHOkkTLimNCQH5_DozVoOD6VEHTowbKlL0"},
{"content":{"body":"https://dom.spec.whatwg.org/#abortcontroller-api-integration","msgtype":"m.text","org.matrix.msc1767.text":"https://dom.spec.whatwg.org/#abortcontroller-api-integration"},"ts":1661957465975,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$z0_KOV2sJHXJLtIF41VLiVGTXfUw70hKaCX0eiUza5Q"},
{"content":{"body":"annevk: Thanks! Btw do you have any opinions on: when abort() is called, whether the promise-returning API should immediately reject while it kicks off its cancelation steps, vs rejecting *after* we wait on some cancelation steps to \"finish up\"?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: Thanks! Btw do you have any opinions on: when abort() is called, whether the promise-returning API should immediately reject while it kicks off its cancelation steps, vs rejecting <em>after</em> we wait on some cancelation steps to &quot;finish up&quot;?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"annevk: Thanks! Btw do you have any opinions on: when abort() is called, whether the promise-returning API should immediately reject while it kicks off its cancelation steps, vs rejecting *after* we wait on some cancelation steps to \"finish up\"?","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: Thanks! Btw do you have any opinions on: when abort() is called, whether the promise-returning API should immediately reject while it kicks off its cancelation steps, vs rejecting <em>after</em> we wait on some cancelation steps to &quot;finish up&quot;?","mimetype":"text/html"}]},"ts":1661957898833,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$Fl5pzU7t8PJqT86-JCc9YW9UV1QqfRUK80yb6_M5w9A"},
{"content":{"body":"I'm seeing this done in a mixed way, but didn't know if there was a clearly recommended path.","msgtype":"m.text","org.matrix.msc1767.text":"I'm seeing this done in a mixed way, but didn't know if there was a clearly recommended path."},"ts":1661957923412,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$1i6V_3tpImltGgUdc_zfioO6nXt_QMlNVHfQWeXcJKQ"}
]