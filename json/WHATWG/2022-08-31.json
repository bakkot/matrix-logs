[
{"content":{"body":"Domenic: What's the story behind https://wpt.fyi/results/html?label=master&label=experimental&aligned&view=subtest&q=window-reuse-in-nested-browsing-contexts.tentative.html ? I'm trying to make Gecko's initial about:blank more Web-compatible, and I now have a patch that results in Chrome-consistent behavior on that test: 6 fails and 1 pass (the single pass being \"iframe with initial src == same-origin resource.\"). Despite what I have said earlier (when I believed it was worthwhile to pursue Presto-style initial about:blank), I now have strong doubts about the usefulness of pursuing the expectations of this test.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: What's the story behind https://wpt.fyi/results/html?label=master&amp;label=experimental&amp;aligned&amp;view=subtest&amp;q=window-reuse-in-nested-browsing-contexts.tentative.html ? I'm trying to make Gecko's initial about:blank more Web-compatible, and I now have a patch that results in Chrome-consistent behavior on that test: 6 fails and 1 pass (the single pass being &quot;iframe with initial src == same-origin resource.&quot;). Despite what I have said earlier (when I believed it was worthwhile to pursue Presto-style initial about:blank), I now have strong doubts about the usefulness of pursuing the expectations of this test.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Domenic: What's the story behind https://wpt.fyi/results/html?label=master&label=experimental&aligned&view=subtest&q=window-reuse-in-nested-browsing-contexts.tentative.html ? I'm trying to make Gecko's initial about:blank more Web-compatible, and I now have a patch that results in Chrome-consistent behavior on that test: 6 fails and 1 pass (the single pass being \"iframe with initial src == same-origin resource.\"). Despite what I have said earlier (when I believed it was worthwhile to pursue Presto-style initial about:blank), I now have strong doubts about the usefulness of pursuing the expectations of this test.","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: What's the story behind https://wpt.fyi/results/html?label=master&amp;label=experimental&amp;aligned&amp;view=subtest&amp;q=window-reuse-in-nested-browsing-contexts.tentative.html ? I'm trying to make Gecko's initial about:blank more Web-compatible, and I now have a patch that results in Chrome-consistent behavior on that test: 6 fails and 1 pass (the single pass being &quot;iframe with initial src == same-origin resource.&quot;). Despite what I have said earlier (when I believed it was worthwhile to pursue Presto-style initial about:blank), I now have strong doubts about the usefulness of pursuing the expectations of this test.","mimetype":"text/html"}]},"ts":1661927838065,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$7z5xTmC2SuXSYE_m2KEWBT1mBXH9EQ2VK55zAkrBbVM"},
{"content":{"body":"Hmm!","msgtype":"m.text","org.matrix.msc1767.text":"Hmm!"},"ts":1661927890151,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$1gtAff6KrjjMj6gDY32Fb7Ch0VaM0UoSqw8EiLmYMMw"},
{"content":{"body":"Where is that open issue....","msgtype":"m.text","org.matrix.msc1767.text":"Where is that open issue...."},"ts":1661927959572,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$S4N_jys68BaXfDfjVpi76NBSz9hEGqXuTggoavuoH90"},
{"content":{"body":"https://github.com/whatwg/html/issues/546 and https://github.com/whatwg/html/issues/3267 I think","msgtype":"m.text","org.matrix.msc1767.text":"https://github.com/whatwg/html/issues/546 and https://github.com/whatwg/html/issues/3267 I think"},"ts":1661928027935,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$yhKBCYOA_vAZuaQwVairMMnLti2NHXbuQ-cQV-6TVTU"},
{"content":{"body":"> <@domenicdenicola:matrix.org> https://github.com/whatwg/html/issues/546 and https://github.com/whatwg/html/issues/3267 I think\n\nThanks. I apologize for advocating for Presto-style about:blank for the past 11 years. It now seems to me that the path to interop is WebKit/Blink-style about:blank.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$yhKBCYOA_vAZuaQwVairMMnLti2NHXbuQ-cQV-6TVTU?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">@domenicdenicola:matrix.org</a><br>https://github.com/whatwg/html/issues/546 and https://github.com/whatwg/html/issues/3267 I think</blockquote></mx-reply>Thanks. I apologize for advocating for Presto-style about:blank for the past 11 years. It now seems to me that the path to interop is WebKit/Blink-style about:blank.","m.relates_to":{"m.in_reply_to":{"event_id":"$yhKBCYOA_vAZuaQwVairMMnLti2NHXbuQ-cQV-6TVTU"}},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":"> <@domenicdenicola:matrix.org> https://github.com/whatwg/html/issues/546 and https://github.com/whatwg/html/issues/3267 I think\n\nThanks. I apologize for advocating for Presto-style about:blank for the past 11 years. It now seems to me that the path to interop is WebKit/Blink-style about:blank.","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$yhKBCYOA_vAZuaQwVairMMnLti2NHXbuQ-cQV-6TVTU?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">@domenicdenicola:matrix.org</a><br>https://github.com/whatwg/html/issues/546 and https://github.com/whatwg/html/issues/3267 I think</blockquote></mx-reply>Thanks. I apologize for advocating for Presto-style about:blank for the past 11 years. It now seems to me that the path to interop is WebKit/Blink-style about:blank.","mimetype":"text/html"}]},"ts":1661928149119,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$qmDC1_dI4cM_lyi3AQF9PePSFnmESsKfnoBsdkZ3omA"},
{"content":{"body":"My position is pretty generic: we should do anything that we can get interop on and is web-compatible; ideally that thing should be somewhat principled.","msgtype":"m.text","org.matrix.msc1767.text":"My position is pretty generic: we should do anything that we can get interop on and is web-compatible; ideally that thing should be somewhat principled."},"ts":1661928157425,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$xfSPga2PvGMUMaa8DGecPmoa1_BdXClXN_BAK9nuXCc"},
{"content":{"body":"In the past I've been reluctant to change the spec away from Gecko behavior because Gecko put a lot of work into this and their approach seemed principled. But if you're up for it, let's do so.","msgtype":"m.text","org.matrix.msc1767.text":"In the past I've been reluctant to change the spec away from Gecko behavior because Gecko put a lot of work into this and their approach seemed principled. But if you're up for it, let's do so."},"ts":1661928203071,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$Q5UnFS7YKgk7OJhcpnTyCQYOsErvvCH1T7_LUm7eklQ"},
{"content":{"body":"Now I need to figure out how to spec it. It'll be on top of https://github.com/whatwg/html/pull/6315 although I don't think the Window reuse parts changed much.","msgtype":"m.text","org.matrix.msc1767.text":"Now I need to figure out how to spec it. It'll be on top of https://github.com/whatwg/html/pull/6315 although I don't think the Window reuse parts changed much."},"ts":1661928232872,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$PkRBmjsam_bFPM6dMphS9yfhUHRAW8i-ONVIVF5NfVo"},
{"content":{"body":"I have a hard time seeing Gecko's currently-released about:blank behavior as principled.","msgtype":"m.text","org.matrix.msc1767.text":"I have a hard time seeing Gecko's currently-released about:blank behavior as principled."},"ts":1661928265402,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$5XzaTXcUkM7OuYwmKVuGqakFS520cnXuUHNKUI20qZY"},
{"content":{"body":"Would you be kind enough to drop a comment in one of those issues explaining exactly what WebKit/Blink-style about:blank is and how you might spec it? I see the test results matrix but it'd take me some time to reload this all into my brain enough to understand the right approach.","msgtype":"m.text","org.matrix.msc1767.text":"Would you be kind enough to drop a comment in one of those issues explaining exactly what WebKit/Blink-style about:blank is and how you might spec it? I see the test results matrix but it'd take me some time to reload this all into my brain enough to understand the right approach."},"ts":1661928326781,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$LgEdOKLlN2MWf_iIdFJ6B9MlQVdNoYLQhYC4p6NsoBk"},
{"content":{"body":"Also, it sounds like you might be supportive of my upcoming pitch to add navigation/history to Interop 2023 :)","msgtype":"m.text","org.matrix.msc1767.text":"Also, it sounds like you might be supportive of my upcoming pitch to add navigation/history to Interop 2023 :)"},"ts":1661928455414,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$X8AIKyUzJFmnlMf2bitHaXYPql4G-fA3x3SIUTjQzRI"},
{"content":{"body":"> <@domenicdenicola:matrix.org> Would you be kind enough to drop a comment in one of those issues explaining exactly what WebKit/Blink-style about:blank is and how you might spec it? I see the test results matrix but it'd take me some time to reload this all into my brain enough to understand the right approach.\n\nCommented: https://github.com/whatwg/html/issues/3267#issuecomment-1232545141","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$LgEdOKLlN2MWf_iIdFJ6B9MlQVdNoYLQhYC4p6NsoBk?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">@domenicdenicola:matrix.org</a><br>Would you be kind enough to drop a comment in one of those issues explaining exactly what WebKit/Blink-style about:blank is and how you might spec it? I see the test results matrix but it&#39;d take me some time to reload this all into my brain enough to understand the right approach.</blockquote></mx-reply>Commented: https://github.com/whatwg/html/issues/3267#issuecomment-1232545141","m.relates_to":{"m.in_reply_to":{"event_id":"$LgEdOKLlN2MWf_iIdFJ6B9MlQVdNoYLQhYC4p6NsoBk"}},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":"> <@domenicdenicola:matrix.org> Would you be kind enough to drop a comment in one of those issues explaining exactly what WebKit/Blink-style about:blank is and how you might spec it? I see the test results matrix but it'd take me some time to reload this all into my brain enough to understand the right approach.\n\nCommented: https://github.com/whatwg/html/issues/3267#issuecomment-1232545141","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$LgEdOKLlN2MWf_iIdFJ6B9MlQVdNoYLQhYC4p6NsoBk?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">@domenicdenicola:matrix.org</a><br>Would you be kind enough to drop a comment in one of those issues explaining exactly what WebKit/Blink-style about:blank is and how you might spec it? I see the test results matrix but it&#39;d take me some time to reload this all into my brain enough to understand the right approach.</blockquote></mx-reply>Commented: https://github.com/whatwg/html/issues/3267#issuecomment-1232545141","mimetype":"text/html"}]},"ts":1661929584844,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$92iZG0cxG5wTad7h6vYL2udhYC1kuX-2xHRUorvzcd8"},
{"content":{"body":"Perfect, thank you! I will add that into https://github.com/whatwg/html/pull/6315 so we can close the two issues. I will also happily approve any WPT changes in that direction. You might want to adopt the tests from the abandoned https://chromium-review.googlesource.com/c/chromium/src/+/804797 to make sure the full matrix from that issue is covered...","msgtype":"m.text","org.matrix.msc1767.text":"Perfect, thank you! I will add that into https://github.com/whatwg/html/pull/6315 so we can close the two issues. I will also happily approve any WPT changes in that direction. You might want to adopt the tests from the abandoned https://chromium-review.googlesource.com/c/chromium/src/+/804797 to make sure the full matrix from that issue is covered..."},"ts":1661930470992,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$GsxMA1GUG6dK_MvLqb5MKPQyyVJ_Td_CPYixJ8NCo6U"},
{"content":{"body":"I guess I should say that on the issue to record our plan of record","msgtype":"m.text","org.matrix.msc1767.text":"I guess I should say that on the issue to record our plan of record"},"ts":1661930481061,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$rdu1tr3n2Pk6DD4wGoOZzOWZdXwqdt8gyKEi0J8q-dc"},
{"content":{"body":"> <@sideshowbarker:matrix.org> zcorpan: (or anybody familiar with DOMMatrix) Shouldn‚Äôt https://drafts.fxtf.org/geometry/#intro say ‚Äú**3x3** and 4x4‚Äù rather than ‚Äú3x2 and 4x4‚Äù?\n> \n> ‚Ä¶Or even just only say 4x4 ‚Äî because, as far as I can understand it at least, DOMMatrix can represent matrices of at most 4x4, but can also represent 2x2 matrices (along with 3x3)\n\nNo, it's correct. The \"2D\" variant is m11,m12,m21,m22,m41,m42 (also exposed as .a to .f)","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$QW4sO2wiyyqIRII8_qn8shxurEaTnGr5KvwDl-uKAGc?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">@sideshowbarker:matrix.org</a><br><p><a href=\"https://matrix.to/#/@zcorpan_:matrix.org\">zcorpan</a>: (or anybody familiar with DOMMatrix) Shouldn‚Äôt https://drafts.fxtf.org/geometry/#intro say ‚Äú<strong>3x3</strong> and 4x4‚Äù rather than ‚Äú3x2 and 4x4‚Äù?</p>\n<p>‚Ä¶Or even just only say 4x4 ‚Äî because, as far as I can understand it at least, DOMMatrix can represent matrices of at most 4x4, but can also represent 2x2 matrices (along with 3x3)</p>\n</blockquote></mx-reply>No, it's correct. The &quot;2D&quot; variant is m11,m12,m21,m22,m41,m42 (also exposed as .a to .f)","m.relates_to":{"m.in_reply_to":{"event_id":"$QW4sO2wiyyqIRII8_qn8shxurEaTnGr5KvwDl-uKAGc"}},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":"> <@sideshowbarker:matrix.org> zcorpan: (or anybody familiar with DOMMatrix) Shouldn‚Äôt https://drafts.fxtf.org/geometry/#intro say ‚Äú**3x3** and 4x4‚Äù rather than ‚Äú3x2 and 4x4‚Äù?\n> \n> ‚Ä¶Or even just only say 4x4 ‚Äî because, as far as I can understand it at least, DOMMatrix can represent matrices of at most 4x4, but can also represent 2x2 matrices (along with 3x3)\n\nNo, it's correct. The \"2D\" variant is m11,m12,m21,m22,m41,m42 (also exposed as .a to .f)","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$QW4sO2wiyyqIRII8_qn8shxurEaTnGr5KvwDl-uKAGc?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">@sideshowbarker:matrix.org</a><br><p><a href=\"https://matrix.to/#/@zcorpan_:matrix.org\">zcorpan</a>: (or anybody familiar with DOMMatrix) Shouldn‚Äôt https://drafts.fxtf.org/geometry/#intro say ‚Äú<strong>3x3</strong> and 4x4‚Äù rather than ‚Äú3x2 and 4x4‚Äù?</p>\n<p>‚Ä¶Or even just only say 4x4 ‚Äî because, as far as I can understand it at least, DOMMatrix can represent matrices of at most 4x4, but can also represent 2x2 matrices (along with 3x3)</p>\n</blockquote></mx-reply>No, it's correct. The &quot;2D&quot; variant is m11,m12,m21,m22,m41,m42 (also exposed as .a to .f)","mimetype":"text/html"}]},"ts":1661952306087,"senderName":"zcorpan","senderId":"@zcorpan_:matrix.org","id":"$jrRU2rPoU5gCzbawofq02XzxSgi9TzGa5BuLuKMxGUw"},
{"content":{"body":"Is there a guarantee that aborting a fetch will result in the promise being rejecting? Wondering if it's possible to abort a fetch after the resolve microtask is already queued, in which case I'd expect the fetch promise to resolve (since the abort came in too late). Is that how it works?","msgtype":"m.text","org.matrix.msc1767.text":"Is there a guarantee that aborting a fetch will result in the promise being rejecting? Wondering if it's possible to abort a fetch after the resolve microtask is already queued, in which case I'd expect the fetch promise to resolve (since the abort came in too late). Is that how it works?"},"ts":1661957058715,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$mLUBegvKR2DPFQKUn1kOMPvOWoAnTuVU3k06GK3nQ-I"},
{"content":{"body":"Dominic Farolino: yeah, since abort also queues so that would happen after (it doesn't reach into the queue and modify things)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domfarolino:matrix.org\">Dominic Farolino</a>: yeah, since abort also queues so that would happen after (it doesn't reach into the queue and modify things)","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Dominic Farolino: yeah, since abort also queues so that would happen after (it doesn't reach into the queue and modify things)","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@domfarolino:matrix.org\">Dominic Farolino</a>: yeah, since abort also queues so that would happen after (it doesn't reach into the queue and modify things)","mimetype":"text/html"}]},"ts":1661957359027,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$TUOIuL1xBIHOkkTLimNCQH5_DozVoOD6VEHTowbKlL0"},
{"content":{"body":"https://dom.spec.whatwg.org/#abortcontroller-api-integration","msgtype":"m.text","org.matrix.msc1767.text":"https://dom.spec.whatwg.org/#abortcontroller-api-integration"},"ts":1661957465975,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$z0_KOV2sJHXJLtIF41VLiVGTXfUw70hKaCX0eiUza5Q"},
{"content":{"body":"annevk: Thanks! Btw do you have any opinions on: when abort() is called, whether the promise-returning API should immediately reject while it kicks off its cancelation steps, vs rejecting *after* we wait on some cancelation steps to \"finish up\"?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: Thanks! Btw do you have any opinions on: when abort() is called, whether the promise-returning API should immediately reject while it kicks off its cancelation steps, vs rejecting <em>after</em> we wait on some cancelation steps to &quot;finish up&quot;?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"annevk: Thanks! Btw do you have any opinions on: when abort() is called, whether the promise-returning API should immediately reject while it kicks off its cancelation steps, vs rejecting *after* we wait on some cancelation steps to \"finish up\"?","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: Thanks! Btw do you have any opinions on: when abort() is called, whether the promise-returning API should immediately reject while it kicks off its cancelation steps, vs rejecting <em>after</em> we wait on some cancelation steps to &quot;finish up&quot;?","mimetype":"text/html"}]},"ts":1661957898833,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$Fl5pzU7t8PJqT86-JCc9YW9UV1QqfRUK80yb6_M5w9A"},
{"content":{"body":"I'm seeing this done in a mixed way, but didn't know if there was a clearly recommended path.","msgtype":"m.text","org.matrix.msc1767.text":"I'm seeing this done in a mixed way, but didn't know if there was a clearly recommended path."},"ts":1661957923412,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$1i6V_3tpImltGgUdc_zfioO6nXt_QMlNVHfQWeXcJKQ"},
{"content":{"body":"Dominic Farolino: the link Chris de Almeida posted above addresses how we expect integration to work. Which boil down to cancelation happening first (though possibly later if that's async) and then rejecting the promise.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domfarolino:matrix.org\">Dominic Farolino</a>: the link <a href=\"https://matrix.to/#/@softwarechris:matrix.org\">Chris de Almeida</a> posted above addresses how we expect integration to work. Which boil down to cancelation happening first (though possibly later if that's async) and then rejecting the promise.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Dominic Farolino: the link Chris de Almeida posted above addresses how we expect integration to work. Which boil down to cancelation happening first (though possibly later if that's async) and then rejecting the promise.","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@domfarolino:matrix.org\">Dominic Farolino</a>: the link <a href=\"https://matrix.to/#/@softwarechris:matrix.org\">Chris de Almeida</a> posted above addresses how we expect integration to work. Which boil down to cancelation happening first (though possibly later if that's async) and then rejecting the promise.","mimetype":"text/html"}]},"ts":1661958432363,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$cuVb6aYI-U8h4zAHeL6ruqZps0PYEycMMv25ei31or4"},
{"content":{"body":"Oh my, that example doesn't queue a task to resolve despite it clearly happening in parallel.","msgtype":"m.text","org.matrix.msc1767.text":"Oh my, that example doesn't queue a task to resolve despite it clearly happening in parallel."},"ts":1661958460660,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$4Ak_AaiadwTM7RxI8F8mO-EROhiHtEywzdDt833At1k"},
{"content":{"body":"what do you mean?  isn't that in step 3 ?","m.relates_to":{"event_id":"$4Ak_AaiadwTM7RxI8F8mO-EROhiHtEywzdDt833At1k","is_falling_back":true,"m.in_reply_to":{"event_id":"$4Ak_AaiadwTM7RxI8F8mO-EROhiHtEywzdDt833At1k"},"rel_type":"m.thread"},"msgtype":"m.text","org.matrix.msc1767.text":"what do you mean?  isn't that in step 3 ?"},"ts":1661958664919,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$THAz719qSnycZ6kX-qSon60gEWaLWc23vXO0oIQdeSg"},
{"content":{"body":"Chris de Almeida: I think promise resolution has to happen on a task on the \"main\" thread","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@softwarechris:matrix.org\">Chris de Almeida</a>: I think promise resolution has to happen on a task on the &quot;main&quot; thread","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Chris de Almeida: I think promise resolution has to happen on a task on the \"main\" thread","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@softwarechris:matrix.org\">Chris de Almeida</a>: I think promise resolution has to happen on a task on the &quot;main&quot; thread","mimetype":"text/html"}]},"ts":1661958863588,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$VNGi66BxxqeCPAHFxygQp3A6ugpbPDFX3-9VjU4qvbg"},
{"content":{"body":"So the timing would be (1) Queue a task to resolve the promise, (2) One microtask later, the promise gets resolved","msgtype":"m.text","org.matrix.msc1767.text":"So the timing would be (1) Queue a task to resolve the promise, (2) One microtask later, the promise gets resolved"},"ts":1661958883579,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$pqJ0A_MD5G6kt_7hFOER7qp59cOqQeXNwnWXxk-h63g"},
{"content":{"body":"step 3.2 needs to queue a task","m.relates_to":{"event_id":"$4Ak_AaiadwTM7RxI8F8mO-EROhiHtEywzdDt833At1k","is_falling_back":true,"m.in_reply_to":{"event_id":"$4Ak_AaiadwTM7RxI8F8mO-EROhiHtEywzdDt833At1k"},"rel_type":"m.thread"},"msgtype":"m.text","org.matrix.msc1767.text":"step 3.2 needs to queue a task"},"ts":1661958905552,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$mNCK2kePrdiTojyINkHEWpV2vxACqA3WNw9IFkqA3Tc"},
{"content":{"body":"annevk: I believe that's covered by saying \"in parallel\" where parallel links to the queue details","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: I believe that's covered by saying &quot;in parallel&quot; where parallel links to the queue details","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"annevk: I believe that's covered by saying \"in parallel\" where parallel links to the queue details","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: I believe that's covered by saying &quot;in parallel&quot; where parallel links to the queue details","mimetype":"text/html"}]},"ts":1661958988251,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$1EvTB-39l0pQHAoQit44-GNIX6geORxBabur9QhP_VY"},
{"content":{"body":"annevk: Regarding that spec integration link, the example shows that we first \"Stop doing [...]\", and then we reject the promise. But if \"Stop doing [...]\" kicks off a ton of async work in another process, my question is: should we block the rejection on all that work completing?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: Regarding that spec integration link, the example shows that we first &quot;Stop doing [...]&quot;, and then we reject the promise. But if &quot;Stop doing [...]&quot; kicks off a ton of async work in another process, my question is: should we block the rejection on all that work completing?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"annevk: Regarding that spec integration link, the example shows that we first \"Stop doing [...]\", and then we reject the promise. But if \"Stop doing [...]\" kicks off a ton of async work in another process, my question is: should we block the rejection on all that work completing?","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: Regarding that spec integration link, the example shows that we first &quot;Stop doing [...]&quot;, and then we reject the promise. But if &quot;Stop doing [...]&quot; kicks off a ton of async work in another process, my question is: should we block the rejection on all that work completing?","mimetype":"text/html"}]},"ts":1661959061504,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$TQZCUdu4ZqTetZfYxJwMkf3cyNAKYOquWZZMmDwoPB8"},
{"content":{"body":"That example indicates the answer is no, but it isn't in the normative requirements so I'm not totally sure","msgtype":"m.text","org.matrix.msc1767.text":"That example indicates the answer is no, but it isn't in the normative requirements so I'm not totally sure"},"ts":1661959077204,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$0U7KhAolqp09EhElT-dDlLBvItwkXS3jKzm_lullZ_A"},
{"content":{"body":"Chris de Almeida: it's not","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@softwarechris:matrix.org\">Chris de Almeida</a>: it's not","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Chris de Almeida: it's not","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@softwarechris:matrix.org\">Chris de Almeida</a>: it's not","mimetype":"text/html"}]},"ts":1661959166753,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$7KMfiDCWEJhjvken5QDPBkSigEwg6j94rzBuRRsh5MI"},
{"content":{"body":"Dominic Farolino: pretty sure \"no\", but worth filing an issue to stipulate that more clearly (as well as to fix the queuing)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domfarolino:matrix.org\">Dominic Farolino</a>: pretty sure &quot;no&quot;, but worth filing an issue to stipulate that more clearly (as well as to fix the queuing)","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Dominic Farolino: pretty sure \"no\", but worth filing an issue to stipulate that more clearly (as well as to fix the queuing)","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@domfarolino:matrix.org\">Dominic Farolino</a>: pretty sure &quot;no&quot;, but worth filing an issue to stipulate that more clearly (as well as to fix the queuing)","mimetype":"text/html"}]},"ts":1661959253658,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$3SsPBKffjwLlNrwl3eoh0mPOR_jNI3eXdAck2QFM5nY"},
{"content":{"body":"https://github.com/whatwg/dom/issues/1031","msgtype":"m.text","org.matrix.msc1767.text":"https://github.com/whatwg/dom/issues/1031"},"ts":1661959295228,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$N9L_3lIaK4r_6uIaDwu0Rf_AsN8lDx3EToOPIO-GhM8"},
{"content":{"body":"see last comment in particular.. I see you've already seen this issue üôÇ","msgtype":"m.text","org.matrix.msc1767.text":"see last comment in particular.. I see you've already seen this issue üôÇ"},"ts":1661959361543,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$3_1qQp8y_wQ7cQzIsTi1FHNJAeenM6ielksFa3W8i_w"},
{"content":{"body":"I have not seen this issue","msgtype":"m.text","org.matrix.msc1767.text":"I have not seen this issue"},"ts":1661959446715,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$PI3NBl9WcHsNth8-1SvFFKSc3hORhOBxcKlaOBHUa6w"},
{"content":{"body":"Different Dom(i|e)nic","msgtype":"m.text","org.matrix.msc1767.text":"Different Dom(i|e)nic"},"ts":1661959463785,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$DDi4w3t02SB888DRCflCNrGaxarB_HQJ6gf3YYZXRZ8"},
{"content":{"body":"I meant `annevk` ","format":"org.matrix.custom.html","formatted_body":"I meant <code>annevk</code>","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"I meant `annevk` ","mimetype":"text/plain"},{"body":"I meant <code>annevk</code>","mimetype":"text/html"}]},"ts":1661959468312,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$-PdgQOv7q4yaQ5ttd5NHox07n-2V_G2NnYCW9z-OJ2o"},
{"content":{"body":"Ah haha. Thanks for finding it though! Looks like Domenic's opinion is that we should block rejection on the cancelation steps \"going through\"","msgtype":"m.text","org.matrix.msc1767.text":"Ah haha. Thanks for finding it though! Looks like Domenic's opinion is that we should block rejection on the cancelation steps \"going through\""},"ts":1661959492089,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$tUL93CgeQ1fsS1PI6wgHnar9p6TNzqQvrGqowtVaVXw"},
{"content":{"body":"Thanks for finding that Chris de Almeida . I personally think that we should reject early and then do our best to abort the actual operation. That's what `fetch()` does as well.","format":"org.matrix.custom.html","formatted_body":"Thanks for finding that <a href=\"https://matrix.to/#/@softwarechris:matrix.org\">Chris de Almeida</a> . I personally think that we should reject early and then do our best to abort the actual operation. That's what <code>fetch()</code> does as well.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Thanks for finding that Chris de Almeida . I personally think that we should reject early and then do our best to abort the actual operation. That's what `fetch()` does as well.","mimetype":"text/plain"},{"body":"Thanks for finding that <a href=\"https://matrix.to/#/@softwarechris:matrix.org\">Chris de Almeida</a> . I personally think that we should reject early and then do our best to abort the actual operation. That's what <code>fetch()</code> does as well.","mimetype":"text/html"}]},"ts":1661962173553,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$zOv-YvBZGPxJHIvDqv7DhshjlEb3kn62j1505aSuR4o"},
{"content":{"body":"annevk: You mentioned that for e.g., `fetch()`, the promise could still resolve after `abort()` is called since \"abort also queues\". But I can't see where it queues, can you point it out to me?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: You mentioned that for e.g., <code>fetch()</code>, the promise could still resolve after <code>abort()</code> is called since &quot;abort also queues&quot;. But I can't see where it queues, can you point it out to me?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"annevk: You mentioned that for e.g., `fetch()`, the promise could still resolve after `abort()` is called since \"abort also queues\". But I can't see where it queues, can you point it out to me?","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: You mentioned that for e.g., <code>fetch()</code>, the promise could still resolve after <code>abort()</code> is called since &quot;abort also queues&quot;. But I can't see where it queues, can you point it out to me?","mimetype":"text/html"}]},"ts":1661962361108,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$uf4nEl9PfC5cEnry1_MHHe3zuNZgFcFMzPawQYbR4EA"},
{"content":{"body":"Hmm, does anyone have data about Origin-Agent-Cluster usage?","msgtype":"m.text","org.matrix.msc1767.text":"Hmm, does anyone have data about Origin-Agent-Cluster usage?"},"ts":1661963091353,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$VlaZPpxmhRry59DukDJ2RxOpsCLNkJsyG1xVIeH1yNM"}
]