[
{"content":{"body":"@allstarschh: In general pinging someone less than 24 hours after you've already done so is not necessary. Especially for such a non-urgent PR. I'll try to make time for the PR next week, but it's 17:30 and tomorrow's a holiday, so please have some patience.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@allstarschh:mozilla.org\">@allstarschh</a>: In general pinging someone less than 24 hours after you've already done so is not necessary. Especially for such a non-urgent PR. I'll try to make time for the PR next week, but it's 17:30 and tomorrow's a holiday, so please have some patience.","msgtype":"m.text"},"ts":1691655852288,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$43yex6mMtIPDU-Cix8yIWyjevCh5UmZRa0RDJADv_uE"},
{"content":{"body":"Domenic: oh, thanks, I saw the reviewer is not set and I don't know if I should set that or someone will set it, the issue is not urgent, ","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: oh, thanks, I saw the reviewer is not set and I don't know if I should set that or someone will set it, the issue is not urgent,","msgtype":"m.text"},"ts":1691655965870,"senderName":"@allstarschh","senderId":"@allstarschh:mozilla.org","id":"$2pzrPvxXV_vlD1wdPdS8snJ_MxmSB2ASU34Nya9uiCE"},
{"content":{"body":"Jake Archibald: there's an (early stage) proposal for websites to mark a blob as crossOrigin accessible. https://github.com/w3c/FileAPI/issues/192. In your case, this would require Origin B to opt in.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jakea:matrix.org\">Jake Archibald</a>: there's an (early stage) proposal for websites to mark a blob as crossOrigin accessible. https://github.com/w3c/FileAPI/issues/192. In your case, this would require Origin B to opt in.","msgtype":"m.text"},"ts":1691657216336,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$tWiFxIx5O1969GuN_Tk2adW0wNgSxONKeuTPZb3pl4Y"},
{"content":{"body":"freddy: isn't that the opposite of what I'm looking for? It seems like the resulting resource would be different-origin to Origin B.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@fbraun:mozilla.org\">freddy</a>: isn't that the opposite of what I'm looking for? It seems like the resulting resource would be different-origin to Origin B.","msgtype":"m.text"},"ts":1691658314048,"senderName":"Jake Archibald","senderId":"@jakea:matrix.org","id":"$jMqiBtYXdcjkniqPiIXiXVv3qzMmll1e0uWQJH_pHpM"},
{"content":{"body":"Right. ü§¶‚Äç‚ôÇÔ∏è","msgtype":"m.text"},"ts":1691658474309,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$3MwMthgywd6fqYBqg3GytPThNYi4a6hyL2k5FecJSZs"},
{"content":{"body":"I guess that confirms annevk's worry about the property name. It does initially look like it means the opposite.","format":"org.matrix.custom.html","formatted_body":"I guess that confirms <a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>'s worry about the property name. It does initially look like it means the opposite.","msgtype":"m.text"},"ts":1691658654475,"senderName":"Jake Archibald","senderId":"@jakea:matrix.org","id":"$Ekc_9uAPis7yD4gKK-BGSD6ZItEP4LBZjdw2kSf-YxU"},
{"content":{"body":"The spec describes both classic async scripts and module async scripts as executing as soon as they are available. In reality, classic async scripts may execute a tiny bit later, but since the exact moment of network response finishing isn't exposed, the tiny bit later looks as if it was part of the network timing. However, for inline async scripts that have no external dependencies, \"as soon as they are available\" in principle has a well-defined point in time relative to the HTML parse. However, it seems bad to grant special guarantees to that case. Do I understand correctly that the spec doesn't mean to grant guarantees about that special case and it's OK for the parse to progress a bit before an inline async module script without external dependencies executes?","msgtype":"m.text"},"ts":1691659788230,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$HHzwCs9d3k7afK1KsY65s2IgnCdoescflr8JNqhMCH4"},
{"content":{"body":"^ @allstarschh ","format":"org.matrix.custom.html","formatted_body":"^ <a href=\"https://matrix.to/#/@allstarschh:mozilla.org\">@allstarschh</a>","msgtype":"m.text"},"ts":1691659812235,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$JuAhdk_XwBWxL-SVrnbW25KH6TlDOksZZkN6uZ0gx7A"},
{"content":{"body":" * The spec describes both classic async scripts and module async scripts as executing as soon as they are available. In reality, classic async scripts may execute a tiny bit later, but since the exact moment of network response finishing isn't exposed, the tiny bit later looks as if it was part of the network timing. However, for inline async module scripts that have no external dependencies, \"as soon as they are available\" in principle has a well-defined point in time relative to the HTML parse. However, it seems bad to grant special guarantees to that case. Do I understand correctly that the spec doesn't mean to grant guarantees about that special case and it's OK for the parse to progress a bit before an inline async module script without external dependencies executes?","m.new_content":{"body":"The spec describes both classic async scripts and module async scripts as executing as soon as they are available. In reality, classic async scripts may execute a tiny bit later, but since the exact moment of network response finishing isn't exposed, the tiny bit later looks as if it was part of the network timing. However, for inline async module scripts that have no external dependencies, \"as soon as they are available\" in principle has a well-defined point in time relative to the HTML parse. However, it seems bad to grant special guarantees to that case. Do I understand correctly that the spec doesn't mean to grant guarantees about that special case and it's OK for the parse to progress a bit before an inline async module script without external dependencies executes?","msgtype":"m.text"},"m.relates_to":{"event_id":"$HHzwCs9d3k7afK1KsY65s2IgnCdoescflr8JNqhMCH4","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1691659848126,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$uIxI0dRhY2QnXNLL9Kc8qMeEiyPA4oPke1sWobUk97I"},
{"content":{"body":"It would be unfortunate to have to use the `document.write` accommodating execution path in Gecko for inline async module scripts just because the spec granted that special case a special guarantee that goes away as soon as the module has an external dependency.","format":"org.matrix.custom.html","formatted_body":"It would be unfortunate to have to use the <code>document.write</code> accommodating execution path in Gecko for inline async module scripts just because the spec granted that special case a special guarantee that goes away as soon as the module has an external dependency.","msgtype":"m.text"},"ts":1691659922728,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$YTWRtc79DRwp3g6jmQcVddvsRcYTCNUcLakPpG6J810"},
{"content":{"body":"(I gather that in any case, module scripts are prohibited from using `document.write`, so the guarantee would be only about the specific observable DOM shape.)","format":"org.matrix.custom.html","formatted_body":"(I gather that in any case, module scripts are prohibited from using <code>document.write</code>, so the guarantee would be only about the specific observable DOM shape.)","msgtype":"m.text"},"ts":1691659958061,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$bt4agmvaHVMsk6Jq7FOojAAAY4fiIya7kEUgKBXKXSU"},
{"content":{"body":"Well, at least Chrome doesn't grant that guarantee. I guess I need to file a spec issue to avoid suggesting a specific execution time.","msgtype":"m.text"},"ts":1691660636922,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$tJmlnLrrnlLcmEwXsa1htY-TWSFLc_4xmk5vFHZ48OY"},
{"content":{"body":"Demo: https://hsivonen.com/test/moz/inline-async-module-script-without-deps.html","msgtype":"m.text"},"ts":1691660772059,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$mpBUQm-I-HVT3KyKw_zuskC8Ft4B3BQkIUq5mkL_ITw"},
{"content":{"body":"Filed as https://github.com/whatwg/html/issues/9597","msgtype":"m.text"},"ts":1691661959860,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$ObCvHDcEuvN60wyk6T99lyj44nf-8bATreDLaJ9Ba4c"},
{"content":{"body":"Noam Rosenthal: Re: https://github.com/whatwg/html/issues/9332#issuecomment-1673580721, do you have any sense of what % of sites currently render before all of the ~final/stable above-the-fold DOM nodes are in the DOM? I guess 100% of client side rendered sites -- is that the main (only?) use case here?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: Re: https://github.com/whatwg/html/issues/9332#issuecomment-1673580721, do you have any sense of what % of sites currently render before all of the ~final/stable above-the-fold DOM nodes are in the DOM? I guess 100% of client side rendered sites -- is that the main (only?) use case here?","msgtype":"m.text"},"ts":1691688903534,"senderName":"Eric Portis (he/him)","senderId":"@etportis:matrix.org","id":"$mGsTV_D9JbpGU4p4qcfc7AQyrUsWw3dxftHTnv0y7bc"},
{"content":{"body":"> <@etportis:matrix.org> Noam Rosenthal: Re: https://github.com/whatwg/html/issues/9332#issuecomment-1673580721, do you have any sense of what % of sites currently render before all of the ~final/stable above-the-fold DOM nodes are in the DOM? I guess 100% of client side rendered sites -- is that the main (only?) use case here?\n\nI don‚Äôt think we can have that info, stable is subjective and dependent on content","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs%3Amatrix.org/%24mGsTV_D9JbpGU4p4qcfc7AQyrUsWw3dxftHTnv0y7bc\">In reply to</a> <a href=\"https://matrix.to/#/@etportis:matrix.org\">@etportis:matrix.org</a><br><a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: Re: https://github.com/whatwg/html/issues/9332#issuecomment-1673580721, do you have any sense of what % of sites currently render before all of the ~final/stable above-the-fold DOM nodes are in the DOM? I guess 100% of client side rendered sites -- is that the main (only?) use case here?</blockquote></mx-reply>I don‚Äôt think we can have that info, stable is subjective and dependent on content","m.relates_to":{"m.in_reply_to":{"event_id":"$mGsTV_D9JbpGU4p4qcfc7AQyrUsWw3dxftHTnv0y7bc"}},"msgtype":"m.text"},"ts":1691689394323,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$YUpsrTT9lBScPJfelRQPwxUbwJwoOszHhkrkYSTbmR4"},
{"content":{"body":"Noam Rosenthal: That makes sense. I'm just trying to get a sense of the need, here -- what's driving this. Paving a bad cowpath (anti-flicker snippets, used for all kinds of reasons) is a cost.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: That makes sense. I'm just trying to get a sense of the need, here -- what's driving this. Paving a bad cowpath (anti-flicker snippets, used for all kinds of reasons) is a cost.","msgtype":"m.text"},"ts":1691689828143,"senderName":"Eric Portis (he/him)","senderId":"@etportis:matrix.org","id":"$T5mxbYNVPlRodYztXQPA2THH9OifkxJAKlwE9u_8S0M"},
{"content":{"body":" * Noam Rosenthal: That makes sense. I'm just trying to get a sense of the need, here -- what's driving this. Paving a bad cowpath (anti-flicker snippets, used for all kinds of reasons) is a cost.(","format":"org.matrix.custom.html","formatted_body":" * <a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: That makes sense. I'm just trying to get a sense of the need, here -- what's driving this. Paving a bad cowpath (anti-flicker snippets, used for all kinds of reasons) is a cost.(","m.new_content":{"body":"Noam Rosenthal: That makes sense. I'm just trying to get a sense of the need, here -- what's driving this. Paving a bad cowpath (anti-flicker snippets, used for all kinds of reasons) is a cost.(","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: That makes sense. I'm just trying to get a sense of the need, here -- what's driving this. Paving a bad cowpath (anti-flicker snippets, used for all kinds of reasons) is a cost.(","msgtype":"m.text"},"m.relates_to":{"event_id":"$T5mxbYNVPlRodYztXQPA2THH9OifkxJAKlwE9u_8S0M","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1691689946446,"senderName":"Eric Portis (he/him)","senderId":"@etportis:matrix.org","id":"$yJIFvtVdTc7xM8tU9klTWcdEyZqGWb-akatK4C7yNBA"},
{"content":{"body":"(And hunt around for a more-scoped solution for the subset of problematic cases)","msgtype":"m.text"},"ts":1691689949508,"senderName":"Eric Portis (he/him)","senderId":"@etportis:matrix.org","id":"$YSZL3gDYBCRTaWFIJkGHLBTSSRRVvMc39ib9mTxK128"},
{"content":{"body":" * Noam Rosenthal: That makes sense. I'm just trying to get a sense of the need, here -- what's driving this. Paving a bad cowpath (anti-flicker snippets, used for all kinds of reasons) is a cost.","format":"org.matrix.custom.html","formatted_body":" * <a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: That makes sense. I'm just trying to get a sense of the need, here -- what's driving this. Paving a bad cowpath (anti-flicker snippets, used for all kinds of reasons) is a cost.","m.new_content":{"body":"Noam Rosenthal: That makes sense. I'm just trying to get a sense of the need, here -- what's driving this. Paving a bad cowpath (anti-flicker snippets, used for all kinds of reasons) is a cost.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: That makes sense. I'm just trying to get a sense of the need, here -- what's driving this. Paving a bad cowpath (anti-flicker snippets, used for all kinds of reasons) is a cost.","msgtype":"m.text"},"m.relates_to":{"event_id":"$T5mxbYNVPlRodYztXQPA2THH9OifkxJAKlwE9u_8S0M","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1691689978828,"senderName":"Eric Portis (he/him)","senderId":"@etportis:matrix.org","id":"$Mea52jm1yjT2VpF8AmBy_8xv3ObIdVvoabO0cyOGINU"},
{"content":{"body":"> <@etportis:matrix.org> (And hunt around for a more-scoped solution for the subset of problematic cases)\n\nWhat‚Äôs driving this is view transitions. But the use case has been around way before that, to avoid ugly layout shifts and flashes due to important elements not being parsed yet ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs%3Amatrix.org/%24YSZL3gDYBCRTaWFIJkGHLBTSSRRVvMc39ib9mTxK128\">In reply to</a> <a href=\"https://matrix.to/#/@etportis:matrix.org\">@etportis:matrix.org</a><br>(And hunt around for a more-scoped solution for the subset of problematic cases)</blockquote></mx-reply>What‚Äôs driving this is view transitions. But the use case has been around way before that, to avoid ugly layout shifts and flashes due to important elements not being parsed yet","m.relates_to":{"m.in_reply_to":{"event_id":"$YSZL3gDYBCRTaWFIJkGHLBTSSRRVvMc39ib9mTxK128"}},"msgtype":"m.text"},"ts":1691690141378,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$LssQ2jtWxGZvUX5Tg4ptSA0wosZrlMxpMFc84T1AD7Q"},
{"content":{"body":"Right. Something slowly animating out and then popping back in, in the same spot, late is much, much worse than something just popping in late -- I get the extra need for it for View Transitions. But is there a subset of sites that this affects? It's pages that are fetching content in JS, right? I could put a view-transition-name on something at the bottom of HTML spec single-page and it won't matter that the parser has already yielded to the renderer, because that element is a mile outside of the viewport...?","msgtype":"m.text"},"ts":1691690331996,"senderName":"Eric Portis (he/him)","senderId":"@etportis:matrix.org","id":"$1Mt_HXXBPoQ4CaHckBDdSJa8SNSIcof0269qkifLUhc"},
{"content":{"body":"> <@etportis:matrix.org> Right. Something slowly animating out and then popping back in, in the same spot, late is much, much worse than something just popping in late -- I get the extra need for it for View Transitions. But is there a subset of sites that this affects? It's pages that are fetching content in JS, right? I could put a view-transition-name on something at the bottom of HTML spec single-page and it won't matter that the parser has already yielded to the renderer, because that element is a mile outside of the viewport...?\n\nIt would be relevant for any page that has cross-document view transitions and its elements are chunked in slowly. It‚Äôs actually less relevant to SPA where you can do this with a render-blocking script ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs%3Amatrix.org/%241Mt_HXXBPoQ4CaHckBDdSJa8SNSIcof0269qkifLUhc\">In reply to</a> <a href=\"https://matrix.to/#/@etportis:matrix.org\">@etportis:matrix.org</a><br>Right. Something slowly animating out and then popping back in, in the same spot, late is much, much worse than something just popping in late -- I get the extra need for it for View Transitions. But is there a subset of sites that this affects? It's pages that are fetching content in JS, right? I could put a view-transition-name on something at the bottom of HTML spec single-page and it won't matter that the parser has already yielded to the renderer, because that element is a mile outside of the viewport...?</blockquote></mx-reply>It would be relevant for any page that has cross-document view transitions and its elements are chunked in slowly. It‚Äôs actually less relevant to SPA where you can do this with a render-blocking script","m.relates_to":{"m.in_reply_to":{"event_id":"$1Mt_HXXBPoQ4CaHckBDdSJa8SNSIcof0269qkifLUhc"}},"msgtype":"m.text"},"ts":1691690703360,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$ptbP1LrWFvhfvloJCG9FUxFYU-aIviYz-FrTs_f03SM"},
{"content":{"body":"> and its elements are chunked in slowly\n...and those elements have view-transition-names, right?\n\nHypothetically, would this problem be solved if everyone ensured that everything they put a view-transition-name on was in the HTML response. (I know we can't ask authors to do that... just trying to build a mental model of the problem)","format":"org.matrix.custom.html","formatted_body":"<blockquote>\n<p>and its elements are chunked in slowly<br>...and those elements have view-transition-names, right?</p>\n</blockquote>\n<p>Hypothetically, would this problem be solved if everyone ensured that everything they put a view-transition-name on was in the HTML response. (I know we can't ask authors to do that... just trying to build a mental model of the problem)</p>\n","msgtype":"m.text"},"ts":1691690839388,"senderName":"Eric Portis (he/him)","senderId":"@etportis:matrix.org","id":"$MmZPe0DCpLaAkKcuRVfmjES0_3-PDNiSIqhmAsc_rSE"},
{"content":{"body":" * > and its elements are chunked in slowly\n\n...and those elements have view-transition-names, right?\n\nHypothetically, would this problem be solved if everyone ensured that everything they put a view-transition-name on was in the HTML response. (I know we can't ask authors to do that... just trying to build a mental model of the problem)","format":"org.matrix.custom.html","formatted_body":" * <blockquote>\n<p>and its elements are chunked in slowly</p>\n</blockquote>\n<p>...and those elements have view-transition-names, right?</p>\n<p>Hypothetically, would this problem be solved if everyone ensured that everything they put a view-transition-name on was in the HTML response. (I know we can't ask authors to do that... just trying to build a mental model of the problem)</p>\n","m.new_content":{"body":"> and its elements are chunked in slowly\n\n...and those elements have view-transition-names, right?\n\nHypothetically, would this problem be solved if everyone ensured that everything they put a view-transition-name on was in the HTML response. (I know we can't ask authors to do that... just trying to build a mental model of the problem)","format":"org.matrix.custom.html","formatted_body":"<blockquote>\n<p>and its elements are chunked in slowly</p>\n</blockquote>\n<p>...and those elements have view-transition-names, right?</p>\n<p>Hypothetically, would this problem be solved if everyone ensured that everything they put a view-transition-name on was in the HTML response. (I know we can't ask authors to do that... just trying to build a mental model of the problem)</p>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$MmZPe0DCpLaAkKcuRVfmjES0_3-PDNiSIqhmAsc_rSE","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1691690847994,"senderName":"Eric Portis (he/him)","senderId":"@etportis:matrix.org","id":"$K63SmzI8XhmhduOUN0fHEnmHksVRCzyOSNm0YJYc7xE"},
{"content":{"body":"> <@etportis:matrix.org> > and its elements are chunked in slowly\n> \n> ...and those elements have view-transition-names, right?\n> \n> Hypothetically, would this problem be solved if everyone ensured that everything they put a view-transition-name on was in the HTML response. (I know we can't ask authors to do that... just trying to build a mental model of the problem)\n\nHTML responses are chunked though ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs%3Amatrix.org/%24MmZPe0DCpLaAkKcuRVfmjES0_3-PDNiSIqhmAsc_rSE\">In reply to</a> <a href=\"https://matrix.to/#/@etportis:matrix.org\">@etportis:matrix.org</a><br><blockquote>\n<p>and its elements are chunked in slowly</p>\n</blockquote>\n<p>...and those elements have view-transition-names, right?</p>\n<p>Hypothetically, would this problem be solved if everyone ensured that everything they put a view-transition-name on was in the HTML response. (I know we can't ask authors to do that... just trying to build a mental model of the problem)</p>\n</blockquote></mx-reply>HTML responses are chunked though","m.relates_to":{"m.in_reply_to":{"event_id":"$MmZPe0DCpLaAkKcuRVfmjES0_3-PDNiSIqhmAsc_rSE"}},"msgtype":"m.text"},"ts":1691690921089,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$58w-n5jPmJGovrkCu17nqJKI8gR01sSzwBDse-_sJ0o"},
{"content":{"body":"I don‚Äôt think you and I are talking about the same issue ","format":"org.matrix.custom.html","formatted_body":"I don‚Äôt think you and I are talking about the same issue","msgtype":"m.text"},"ts":1691690967349,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$IfZQ0vOfUnmIDEFD8a4Iw2h86XuaRBHr2Wn0V8lgCpA"}
]