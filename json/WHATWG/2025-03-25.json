[
{"content":{"body":"Yes, I think we ended up needing to figure out what CSS properties apply and don't apply, and I didn't have the bandwidth for it?","m.mentions":{"user_ids":["@akaster:serenityos.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$xcbnN114Gg0ow6BOBCPaTUGQ7f6aD0MnZ56GfBlGkY0"}},"msgtype":"m.text"},"ts":1742865609708,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$lLqyDZBKMZK26XMfSE6WEgRz4kIg2njc2-H_aSjf3S0"},
{"content":{"body":"Sounds like https://github.com/whatwg/fetch/issues/526","m.mentions":{"user_ids":["@gernknod:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$X-8CKp_7OG05otFdNS5GFj4vT1rcsHU1IWUYqXs2Zpo"}},"msgtype":"m.text"},"ts":1742865812894,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$EQnTRrM3-Fh-W3LkXsiujyW48yVOSTTQzQLsGmXFgrk"},
{"content":{"body":"Given `<p> HI </p>`, what per-spec is the expected result for running `.innerText` for that element?\n\nI’m looking at https://github.com/LadybirdBrowser/ladybird/issues/4048, which is about that ` returning `\" HI \"` (whitespace preserved) in Ladybird — but returning `\"HI\"` (whitespace trimmed) in all other engines.\n\nBut looking the source at https://github.com/LadybirdBrowser/ladybird/blob/6b9e8cf40c89c75d95f855b5c244c3382984eaa9/Libraries/LibWeb/HTML/HTMLElement.cpp#L368 for the Ladybird implementation of the “get the text steps” https://html.spec.whatwg.org/multipage/dom.html#get-the-text-steps, it looks to me like Ladybird has correctly implemented the spec requirements.\n\nSo I’m wondering if the difference is due to a bug in Ladybird’s implementation — or else due to other engines not strictly implementing the spec requirements.","format":"org.matrix.custom.html","formatted_body":"<p>Given <code>&lt;p&gt; HI &lt;/p&gt;</code>, what per-spec is the expected result for running <code>.innerText</code> for that element?</p>\n<p>I’m looking at https://github.com/LadybirdBrowser/ladybird/issues/4048, which is about that <code>returning</code>\" HI \"<code>(whitespace preserved) in Ladybird — but returning</code>\"HI\"` (whitespace trimmed) in all other engines.</p>\n<p>But looking the source at https://github.com/LadybirdBrowser/ladybird/blob/6b9e8cf40c89c75d95f855b5c244c3382984eaa9/Libraries/LibWeb/HTML/HTMLElement.cpp#L368 for the Ladybird implementation of the “get the text steps” https://html.spec.whatwg.org/multipage/dom.html#get-the-text-steps, it looks to me like Ladybird has correctly implemented the spec requirements.</p>\n<p>So I’m wondering if the difference is due to a bug in Ladybird’s implementation — or else due to other engines not strictly implementing the spec requirements.</p>\n","m.mentions":{},"msgtype":"m.text"},"ts":1742884509761,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$BwhuWTN0CkmHz2-b-Smbi9vipJbKpbYbZct6QtJi_KY"},
{"content":{"body":"* Given `<p> HI </p>`, what per-spec is the expected result for running `.innerText` for that element?\n\nI’m looking at https://github.com/LadybirdBrowser/ladybird/issues/4048, which is about that returning `\" HI \"` (whitespace preserved) in Ladybird — but returning `\"HI\"` (whitespace trimmed) in all other engines.\n\nBut looking the source at https://github.com/LadybirdBrowser/ladybird/blob/6b9e8cf40c89c75d95f855b5c244c3382984eaa9/Libraries/LibWeb/HTML/HTMLElement.cpp#L368 for the Ladybird implementation of the “get the text steps” https://html.spec.whatwg.org/multipage/dom.html#get-the-text-steps, it looks to me like Ladybird has correctly implemented the spec requirements.\n\nSo I’m wondering if the difference is due to a bug in Ladybird’s implementation — or else due to other engines not strictly implementing the spec requirements.","format":"org.matrix.custom.html","formatted_body":"* <p>Given <code>&lt;p&gt; HI &lt;/p&gt;</code>, what per-spec is the expected result for running <code>.innerText</code> for that element?</p>\n<p>I’m looking at https://github.com/LadybirdBrowser/ladybird/issues/4048, which is about that returning <code>\" HI \"</code> (whitespace preserved) in Ladybird — but returning <code>\"HI\"</code> (whitespace trimmed) in all other engines.</p>\n<p>But looking the source at https://github.com/LadybirdBrowser/ladybird/blob/6b9e8cf40c89c75d95f855b5c244c3382984eaa9/Libraries/LibWeb/HTML/HTMLElement.cpp#L368 for the Ladybird implementation of the “get the text steps” https://html.spec.whatwg.org/multipage/dom.html#get-the-text-steps, it looks to me like Ladybird has correctly implemented the spec requirements.</p>\n<p>So I’m wondering if the difference is due to a bug in Ladybird’s implementation — or else due to other engines not strictly implementing the spec requirements.</p>\n","m.mentions":{},"m.new_content":{"body":"Given `<p> HI </p>`, what per-spec is the expected result for running `.innerText` for that element?\n\nI’m looking at https://github.com/LadybirdBrowser/ladybird/issues/4048, which is about that returning `\" HI \"` (whitespace preserved) in Ladybird — but returning `\"HI\"` (whitespace trimmed) in all other engines.\n\nBut looking the source at https://github.com/LadybirdBrowser/ladybird/blob/6b9e8cf40c89c75d95f855b5c244c3382984eaa9/Libraries/LibWeb/HTML/HTMLElement.cpp#L368 for the Ladybird implementation of the “get the text steps” https://html.spec.whatwg.org/multipage/dom.html#get-the-text-steps, it looks to me like Ladybird has correctly implemented the spec requirements.\n\nSo I’m wondering if the difference is due to a bug in Ladybird’s implementation — or else due to other engines not strictly implementing the spec requirements.","format":"org.matrix.custom.html","formatted_body":"<p>Given <code>&lt;p&gt; HI &lt;/p&gt;</code>, what per-spec is the expected result for running <code>.innerText</code> for that element?</p>\n<p>I’m looking at https://github.com/LadybirdBrowser/ladybird/issues/4048, which is about that returning <code>\" HI \"</code> (whitespace preserved) in Ladybird — but returning <code>\"HI\"</code> (whitespace trimmed) in all other engines.</p>\n<p>But looking the source at https://github.com/LadybirdBrowser/ladybird/blob/6b9e8cf40c89c75d95f855b5c244c3382984eaa9/Libraries/LibWeb/HTML/HTMLElement.cpp#L368 for the Ladybird implementation of the “get the text steps” https://html.spec.whatwg.org/multipage/dom.html#get-the-text-steps, it looks to me like Ladybird has correctly implemented the spec requirements.</p>\n<p>So I’m wondering if the difference is due to a bug in Ladybird’s implementation — or else due to other engines not strictly implementing the spec requirements.</p>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$BwhuWTN0CkmHz2-b-Smbi9vipJbKpbYbZct6QtJi_KY","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1742884547992,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$msYMX3y-wi2ABmke2SoOIdKiWtCLMPqqlbdZ2GE2cRQ"},
{"content":{"body":"thanks, yeah it seems there's not really a lot of interest in finding a solution for this :/","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$EQnTRrM3-Fh-W3LkXsiujyW48yVOSTTQzQLsGmXFgrk"}},"msgtype":"m.text"},"ts":1742889038376,"senderName":"gernknod","senderId":"@gernknod:matrix.org","id":"$VXUGdRgA8ev4V_kB0aRnf3f1UkD8ReYe_-LLUKlwDh8"},
{"content":{"body":"I think\n\n> If node is a Text node, then for each CSS text box produced by node, in content order, compute the text of the box after application of the CSS 'white-space' processing rules and 'text-transform' rules, set items to the list of the resulting strings, and return items.\n\nTrims the text. For the same reason that the rendering of `<p>Hi</p>` is the same as the rendering of `<p>\\n   Hi\\n</p>`.","format":"org.matrix.custom.html","formatted_body":"<p>I think</p>\n<blockquote>\n<p>If node is a Text node, then for each CSS text box produced by node, in content order, compute the text of the box after application of the CSS 'white-space' processing rules and 'text-transform' rules, set items to the list of the resulting strings, and return items.</p>\n</blockquote>\n<p>Trims the text. For the same reason that the rendering of <code>&lt;p&gt;Hi&lt;/p&gt;</code> is the same as the rendering of <code>&lt;p&gt;\\n   Hi\\n&lt;/p&gt;</code>.</p>\n","m.mentions":{"user_ids":["@sideshowbarker:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$BwhuWTN0CkmHz2-b-Smbi9vipJbKpbYbZct6QtJi_KY"}},"msgtype":"m.text"},"ts":1742889569305,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$kdy9gIQ67V_XS9_60MkmC97TJdt2rJoNXTsVOa6-TTU"},
{"content":{"body":"So I'd look in whatever part of Ladybird corresponds to https://drafts.csswg.org/css-text/#white-space-rules","m.mentions":{},"msgtype":"m.text"},"ts":1742889753097,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$hIyMe974ypyiC02i06-YkMca37YIjkeGcUSdyzGgJPI"},
{"content":{"body":"OK — thanks much","m.mentions":{},"msgtype":"m.text"},"ts":1742889833570,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$1QLOYKfOydqIC5WGoZfE6iAXHl2ypHKA_yakZt6EfOI"},
{"content":{"body":"So it’s looking like https://github.com/LadybirdBrowser/ladybird/blob/88e11eea2d1f079675bf86496c63e49f16f4a1c6/Libraries/LibWeb/Layout/TextNode.cpp#L322 might be what I need to look at further","m.mentions":{},"msgtype":"m.text"},"ts":1742889890742,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$mcPJ5RnVe88VcD1_L_JGDzj8gtagXdqy0flWmjM29pI"},
{"content":{"body":"or need to be ensure that https://github.com/LadybirdBrowser/ladybird/blob/88e11eea2d1f079675bf86496c63e49f16f4a1c6/Libraries/LibWeb/HTML/HTMLElement.cpp#L320 is actually causing the CSS \"white-space\" processing rules and \"text-transform\" rules to actually be applied. Because i’s not clear the one `text_for_rendering` function which it’s calling is actually doing that","format":"org.matrix.custom.html","formatted_body":"or need to be ensure that https://github.com/LadybirdBrowser/ladybird/blob/88e11eea2d1f079675bf86496c63e49f16f4a1c6/Libraries/LibWeb/HTML/HTMLElement.cpp#L320 is actually causing the CSS \"white-space\" processing rules and \"text-transform\" rules to actually be applied. Because i’s not clear the one <code>text_for_rendering</code> function which it’s calling is actually doing that","m.mentions":{},"msgtype":"m.text"},"ts":1742890162640,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$8AqOCOPT5gxgeBsIq-A0hSumQ3tSnMXYCCZX_Qj6tJg"},
{"content":{"body":"anyway, thanks again","m.mentions":{},"msgtype":"m.text"},"ts":1742890187941,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$jct0NnTcrewAQjSqi4MF_I1i39DcurGmQBxrvtmg9P8"},
{"content":{"body":"Yeah, if `// This collapses whitespace into a single ASCII space if the CSS white-space property tells us to.` is correct, then probably it's not quite right: I think sometimes it should collapse down to zero spaces.","format":"org.matrix.custom.html","formatted_body":"Yeah, if <code>// This collapses whitespace into a single ASCII space if the CSS white-space property tells us to.</code> is correct, then probably it's not quite right: I think sometimes it should collapse down to zero spaces.","m.mentions":{},"msgtype":"m.text"},"ts":1742890290349,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$I_suiJVCzHN3sNFKYkb_T3e9Z4-v4b9z4y6CRsDO3IU"},
{"content":{"body":"yeah, seems so","m.mentions":{},"msgtype":"m.text"},"ts":1742890305989,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$34KaSKm46nnEbfWe2w6WFitutpgCNVHOL010itiH9Xg"},
{"content":{"body":"https://software.hixie.ch/utilities/js/live-dom-viewer/?saved=13586","m.mentions":{},"msgtype":"m.text"},"ts":1742890364674,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$f3Hx1gKZRfTtTB3ISC6oQsvIxL5Oog0qoQpnMK2mq4Y"},
{"content":{"body":"How is image sizing still not interopable? I created an SVG referenced from `<img>` and typo'd the `height` attribute (no `viewBox`). Firefox ended up with a different height from Chrome and Safari. Not entirely sure who is correct as I'm not sure what the current algorithm to be used is. (I remember there being a change since the 300x150 days.)","format":"org.matrix.custom.html","formatted_body":"How is image sizing still not interopable? I created an SVG referenced from <code>&lt;img&gt;</code> and typo'd the <code>height</code> attribute (no <code>viewBox</code>). Firefox ended up with a different height from Chrome and Safari. Not entirely sure who is correct as I'm not sure what the current algorithm to be used is. (I remember there being a change since the 300x150 days.)","m.mentions":{},"msgtype":"m.text"},"ts":1742913663977,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$1B5B9gkmPk-tEDzRRB-6SID1zXQcghjNYDr6_cKo1S4"}
]