[
{"content":{"body":"> <@jarhar:matrix.org> a friend of mine is asking about how to make use of native context menus on the web, and told me that there was an old now removed thing in firefox which included the menuitem element. are yall aware of any current work or plans to make this kind of thing possible?\n\nSee https://platform.html5.org/history/webapps/r4636.html#context-menus ‚Äî not as far as current work, but just as far as what the spec once had before it was eventually removed (due to lack of implementor interest).","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$5mPEpBQiAyKh164n-Fxk7FWrJvjb7xuT9_PJ6wcdMvk?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@jarhar:matrix.org\">@jarhar:matrix.org</a><br>a friend of mine is asking about how to make use of native context menus on the web, and told me that there was an old now removed thing in firefox which included the menuitem element. are yall aware of any current work or plans to make this kind of thing possible?</blockquote></mx-reply>See https://platform.html5.org/history/webapps/r4636.html#context-menus ‚Äî not as far as current work, but just as far as what the spec once had before it was eventually removed (due to lack of implementor interest).","m.relates_to":{"m.in_reply_to":{"event_id":"$5mPEpBQiAyKh164n-Fxk7FWrJvjb7xuT9_PJ6wcdMvk"}},"msgtype":"m.text"},"ts":1695256291948,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$cjy3YccPefOLbDsr3O9lCjQzHdemNS_OdPimA_Zpmwc"},
{"content":{"body":"was there any issues that implementors brought up?","msgtype":"m.text"},"ts":1695256390532,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$DdMDFc22sjTLnv9Y4ib8JxLeUf6RyE1g7W_i_-xdB3Q"},
{"content":{"body":"At this point I don‚Äôt recall. Would need to do some archaeology. Anne or Domenic might remember more ","msgtype":"m.text"},"ts":1695256469323,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$VgMowWuhKro9zIPJusMzJsumKDL7hhicNMxK49zP0NU"},
{"content":{"body":"I just now looked through the commit history, but can‚Äôt even find the commit that removed it‚Ä¶","msgtype":"m.text"},"ts":1695256665830,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$3Flit59vhVlA9YwlckbjwFXKJw8MEOK7BRzMZVsaknc"},
{"content":{"body":"found https://github.com/whatwg/html/commit/e7e8c88e","msgtype":"m.text"},"ts":1695256708764,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$maBr7ppfR3mMgUTHGBUqheg525VEcCIjV1PeuCq1yr4"},
{"content":{"body":" * <del>I just now looked through the commit history, but can‚Äôt even find the commit that removed it‚Ä¶</del>","format":"org.matrix.custom.html","formatted_body":" * <del>I just now looked through the commit history, but can‚Äôt even find the commit that removed it‚Ä¶</del>","m.new_content":{"body":"<del>I just now looked through the commit history, but can‚Äôt even find the commit that removed it‚Ä¶</del>","format":"org.matrix.custom.html","formatted_body":"<del>I just now looked through the commit history, but can‚Äôt even find the commit that removed it‚Ä¶</del>","msgtype":"m.text"},"m.relates_to":{"event_id":"$3Flit59vhVlA9YwlckbjwFXKJw8MEOK7BRzMZVsaknc","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695256726964,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$5q0uMUPASl8SlupjIHCRyBq7mmCnP6lWk6M9cNZT2ko"},
{"content":{"body":"‚Ä¶which links to https://bugs.chromium.org/p/chromium/issues/detail?id=87553&desc=2#c64","msgtype":"m.text"},"ts":1695256751138,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$gMJ1eV8MwneYSgQfC3Bdth92QxqkI3LmKdmNgXzmkmw"},
{"content":{"body":"> - There is doubt whether the API is well designed.\n> - This may not be a high enough priority right now. Part of the team is responsible for implementing new \"capabilities\". Reaching outside the content area and contributing items to the browser's context menu is a new capability. yuzus, tkent and I are not on the capabilities part of the team; they are busy bringing web developers other new capabilities. They should be heavily involved in the decision to implement this but they can't right now.\n> - It is hard to prioritize for other reasons. For example, this feature only exists in Firefox, so we're not making interoperability better by implementing this.","format":"org.matrix.custom.html","formatted_body":"<blockquote>\n<ul>\n<li>There is doubt whether the API is well designed.</li>\n<li>This may not be a high enough priority right now. Part of the team is responsible for implementing new \"capabilities\". Reaching outside the content area and contributing items to the browser's context menu is a new capability. yuzus, tkent and I are not on the capabilities part of the team; they are busy bringing web developers other new capabilities. They should be heavily involved in the decision to implement this but they can't right now.</li>\n<li>It is hard to prioritize for other reasons. For example, this feature only exists in Firefox, so we're not making interoperability better by implementing this.</li>\n</ul>\n</blockquote>\n","msgtype":"m.text"},"ts":1695256802756,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$rUafihssi2m6bTXnXE844l3Lr3cUxBTfl-EJjAMGNMY"},
{"content":{"body":"‚Ä¶for which one way of reading it is, _‚Äúbecause WebKit hasn‚Äôt implemented it, we don‚Äôt think it‚Äôs enough of a priority‚Äù_","format":"org.matrix.custom.html","formatted_body":"‚Ä¶for which one way of reading it is, <em>‚Äúbecause WebKit hasn‚Äôt implemented it, we don‚Äôt think it‚Äôs enough of a priority‚Äù</em>","msgtype":"m.text"},"ts":1695256891344,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$uPvFAuShlbCNmrlnOC2O9lcIqP2RzmC0lmFIpZpin6k"},
{"content":{"body":"thank you for finding this!","msgtype":"m.text"},"ts":1695257164284,"senderName":"jarhar","senderId":"@jarhar:matrix.org","id":"$r6MpliOqTbSLszmTJHPzMVUJ5I7Sl3RlK7I3AJhC84o"},
{"content":{"body":"cheers","msgtype":"m.text"},"ts":1695257188601,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$fQgsorSkEMLqdYNXXgdotCZatmzfntnV5C2E4vn-izQ"},
{"content":{"body":"akaster: oh wow, file an issue? I guess we should just update the spec then.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@akaster:serenityos.org\">akaster</a>: oh wow, file an issue? I guess we should just update the spec then.","msgtype":"m.text"},"ts":1695278352501,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$NKGamUPENF0ZuJSSkwA61mOBCsuqb90TrbOZaGt-LNo"},
{"content":{"body":"Sure thing! I was wondering if maybe my interpretation of \"HTML Element\" was wrong given how they all agreed üòÖ","msgtype":"m.text"},"ts":1695278472621,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$KL5WcQfrJ_Um9khAoMrYM8M-4PRggCkYcKXVUAIaflA"},
{"content":{"body":"I made issue 9766 for this ","msgtype":"m.text"},"ts":1695279348196,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$sqgdcU_De-M9eMB13zbEXZqN3orvzCy9ljSK3XjKVjQ"},
{"content":{"body":"Thanks! (HTML element definitely means HTML namespace.)","msgtype":"m.text"},"ts":1695280106471,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$Y0sMp8ikNYvqYYFbIdUVvG8EHPjGnkqCwLaxD2nFUmY"},
{"content":{"body":"> <@jyasskin:matrix.org> The team working on HTTPS auto-upgrades would like to get https://github.com/whatwg/fetch/pull/1655 into Fetch. What's their next step toward merging it?\n\nI'd be happy to help with some editorial reviews if annevk gives a green light for the general direction of the feature etc","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$wCIlDQihCTM1cQI0q2p_mfRvcILp1gwpj1d4SZCMmv0?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@jyasskin:matrix.org\">@jyasskin:matrix.org</a><br>The team working on HTTPS auto-upgrades would like to get https://github.com/whatwg/fetch/pull/1655 into Fetch. What&#39;s their next step toward merging it?</blockquote></mx-reply>I'd be happy to help with some editorial reviews if <a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a> gives a green light for the general direction of the feature etc","m.relates_to":{"m.in_reply_to":{"event_id":"$wCIlDQihCTM1cQI0q2p_mfRvcILp1gwpj1d4SZCMmv0"}},"msgtype":"m.text"},"ts":1695281606183,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$bPrULJ274oZC56HDkgGvV8TZQ9_ncE2FgwuFDmk5a-8"},
{"content":{"body":"about the _‚Äúdocument.open() does not change document's URL (active but not fully active document‚Äù_ test case at https://github.com/web-platform-tests/wpt/blob/db6e5032915eb0dcb1d8b8b249488055378245fd/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.js#L28 : in light of https://github.com/whatwg/html/pull/4076 ‚Äî¬†and specifically the requirement _‚ÄúA [Location](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object has an associated url, which is this [Location](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object's [relevant Document](https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document)'s [URL](https://dom.spec.whatwg.org/#concept-document-url), if this [Location](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object's [relevant Document](https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document) is non-null, and [about:blank](https://html.spec.whatwg.org/multipage/infrastructure.html#about:blank) otherwise‚Äù_ ‚Äî shouldn‚Äôt that test be updated to change the assert there to `assert_equals(childWin.location.href, \"about:blank\")`?\n","format":"org.matrix.custom.html","formatted_body":"about the <em>‚Äúdocument.open() does not change document's URL (active but not fully active document‚Äù</em> test case at https://github.com/web-platform-tests/wpt/blob/db6e5032915eb0dcb1d8b8b249488055378245fd/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.js#L28 : in light of https://github.com/whatwg/html/pull/4076 ‚Äî&nbsp;and specifically the requirement <em>‚ÄúA <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\">Location</a> object has an associated url, which is this <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\">Location</a> object's <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document\">relevant Document</a>'s <a href=\"https://dom.spec.whatwg.org/#concept-document-url\">URL</a>, if this <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\">Location</a> object's <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document\">relevant Document</a> is non-null, and <a href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#about:blank\">about:blank</a> otherwise‚Äù</em> ‚Äî shouldn‚Äôt that test be updated to change the assert there to <code>assert_equals(childWin.location.href, \"about:blank\")</code>?","msgtype":"m.text"},"ts":1695284216829,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$T_jWudao1Q_9yZtguXiYEHziM8igUm48QyFwmI-fy7o"},
{"content":{"body":" * annevk:  about the _‚Äúdocument.open() does not change document's URL (active but not fully active document‚Äù_ test case at https://github.com/web-platform-tests/wpt/blob/db6e5032915eb0dcb1d8b8b249488055378245fd/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.js#L28 : in light of https://github.com/whatwg/html/pull/4076 ‚Äî¬†and specifically the requirement _‚ÄúA [Location](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object has an associated url, which is this [Location](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object's [relevant Document](https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document)'s [URL](https://dom.spec.whatwg.org/#concept-document-url), if this [Location](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object's [relevant Document](https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document) is non-null, and [about:blank](https://html.spec.whatwg.org/multipage/infrastructure.html#about:blank) otherwise‚Äù_ ‚Äî shouldn‚Äôt that test be updated to change the assert there to `assert_equals(childWin.location.href, \"about:blank\")`?","format":"org.matrix.custom.html","formatted_body":" * <a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>:  about the <em>‚Äúdocument.open() does not change document's URL (active but not fully active document‚Äù</em> test case at https://github.com/web-platform-tests/wpt/blob/db6e5032915eb0dcb1d8b8b249488055378245fd/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.js#L28 : in light of https://github.com/whatwg/html/pull/4076 ‚Äî&nbsp;and specifically the requirement <em>‚ÄúA <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\">Location</a> object has an associated url, which is this <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\">Location</a> object's <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document\">relevant Document</a>'s <a href=\"https://dom.spec.whatwg.org/#concept-document-url\">URL</a>, if this <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\">Location</a> object's <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document\">relevant Document</a> is non-null, and <a href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#about:blank\">about:blank</a> otherwise‚Äù</em> ‚Äî shouldn‚Äôt that test be updated to change the assert there to <code>assert_equals(childWin.location.href, \"about:blank\")</code>?","m.new_content":{"body":"annevk:  about the _‚Äúdocument.open() does not change document's URL (active but not fully active document‚Äù_ test case at https://github.com/web-platform-tests/wpt/blob/db6e5032915eb0dcb1d8b8b249488055378245fd/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.js#L28 : in light of https://github.com/whatwg/html/pull/4076 ‚Äî¬†and specifically the requirement _‚ÄúA [Location](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object has an associated url, which is this [Location](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object's [relevant Document](https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document)'s [URL](https://dom.spec.whatwg.org/#concept-document-url), if this [Location](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object's [relevant Document](https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document) is non-null, and [about:blank](https://html.spec.whatwg.org/multipage/infrastructure.html#about:blank) otherwise‚Äù_ ‚Äî shouldn‚Äôt that test be updated to change the assert there to `assert_equals(childWin.location.href, \"about:blank\")`?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>:  about the <em>‚Äúdocument.open() does not change document's URL (active but not fully active document‚Äù</em> test case at https://github.com/web-platform-tests/wpt/blob/db6e5032915eb0dcb1d8b8b249488055378245fd/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.js#L28 : in light of https://github.com/whatwg/html/pull/4076 ‚Äî&nbsp;and specifically the requirement <em>‚ÄúA <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\">Location</a> object has an associated url, which is this <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\">Location</a> object's <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document\">relevant Document</a>'s <a href=\"https://dom.spec.whatwg.org/#concept-document-url\">URL</a>, if this <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\">Location</a> object's <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document\">relevant Document</a> is non-null, and <a href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#about:blank\">about:blank</a> otherwise‚Äù</em> ‚Äî shouldn‚Äôt that test be updated to change the assert there to <code>assert_equals(childWin.location.href, \"about:blank\")</code>?","msgtype":"m.text"},"m.relates_to":{"event_id":"$T_jWudao1Q_9yZtguXiYEHziM8igUm48QyFwmI-fy7o","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695284224450,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$hKHsIOOknn9jQBAriMUUqgtH2c6k3jpAkwnWN5txUOI"},
{"content":{"body":" * annevk:  about the _‚Äúdocument.open() does not change document's URL (active but not fully active document‚Äù_ test case at https://github.com/web-platform-tests/wpt/blob/db6e5032915eb0dcb1d8b8b249488055378245fd/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.js#L28 : in light of https://github.com/whatwg/html/pull/4076 ‚Äî¬†and specifically the requirement _‚ÄúA [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object has an associated url, which is this [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object's [relevant Document](https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document)'s [`URL`](https://dom.spec.whatwg.org/#concept-document-url), if this [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object's [relevant Document](https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document) is non-null, and [**`about:blank`**](https://html.spec.whatwg.org/multipage/infrastructure.html#about:blank) otherwise‚Äù_ ‚Äî shouldn‚Äôt that test be updated to change the assert there to `assert_equals(childWin.location.href, \"about:blank\")`?","format":"org.matrix.custom.html","formatted_body":" * <a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>:  about the <em>‚Äúdocument.open() does not change document's URL (active but not fully active document‚Äù</em> test case at https://github.com/web-platform-tests/wpt/blob/db6e5032915eb0dcb1d8b8b249488055378245fd/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.js#L28 : in light of https://github.com/whatwg/html/pull/4076 ‚Äî&nbsp;and specifically the requirement <em>‚ÄúA <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object has an associated url, which is this <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object's <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document\">relevant Document</a>'s <a href=\"https://dom.spec.whatwg.org/#concept-document-url\"><code>URL</code></a>, if this <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object's <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document\">relevant Document</a> is non-null, and <a href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#about:blank\"><strong><code>about:blank</code></strong></a> otherwise‚Äù</em> ‚Äî shouldn‚Äôt that test be updated to change the assert there to <code>assert_equals(childWin.location.href, \"about:blank\")</code>?","m.new_content":{"body":"annevk:  about the _‚Äúdocument.open() does not change document's URL (active but not fully active document‚Äù_ test case at https://github.com/web-platform-tests/wpt/blob/db6e5032915eb0dcb1d8b8b249488055378245fd/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.js#L28 : in light of https://github.com/whatwg/html/pull/4076 ‚Äî¬†and specifically the requirement _‚ÄúA [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object has an associated url, which is this [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object's [relevant Document](https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document)'s [`URL`](https://dom.spec.whatwg.org/#concept-document-url), if this [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object's [relevant Document](https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document) is non-null, and [**`about:blank`**](https://html.spec.whatwg.org/multipage/infrastructure.html#about:blank) otherwise‚Äù_ ‚Äî shouldn‚Äôt that test be updated to change the assert there to `assert_equals(childWin.location.href, \"about:blank\")`?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>:  about the <em>‚Äúdocument.open() does not change document's URL (active but not fully active document‚Äù</em> test case at https://github.com/web-platform-tests/wpt/blob/db6e5032915eb0dcb1d8b8b249488055378245fd/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.js#L28 : in light of https://github.com/whatwg/html/pull/4076 ‚Äî&nbsp;and specifically the requirement <em>‚ÄúA <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object has an associated url, which is this <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object's <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document\">relevant Document</a>'s <a href=\"https://dom.spec.whatwg.org/#concept-document-url\"><code>URL</code></a>, if this <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object's <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document\">relevant Document</a> is non-null, and <a href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#about:blank\"><strong><code>about:blank</code></strong></a> otherwise‚Äù</em> ‚Äî shouldn‚Äôt that test be updated to change the assert there to <code>assert_equals(childWin.location.href, \"about:blank\")</code>?","msgtype":"m.text"},"m.relates_to":{"event_id":"$T_jWudao1Q_9yZtguXiYEHziM8igUm48QyFwmI-fy7o","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695284757742,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$_IM0xw88A_jTycJj6RllHhIXCcHyCVjJatY7CuoAGBQ"},
{"content":{"body":" * annevk:  about the _‚Äúdocument.open() does not change document's URL (active but not fully active document‚Äù_ test case at https://github.com/web-platform-tests/wpt/blob/db6e5032915eb0dcb1d8b8b249488055378245fd/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.js#L28 : in light of https://github.com/whatwg/html/pull/4076 ‚Äî¬†and specifically the requirement _‚ÄúA [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object has an associated url, which is this [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object's [relevant Document](https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document)'s [`URL`](https://dom.spec.whatwg.org/#concept-document-url), if this [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object's [relevant Document](https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document) is non-null, and [**`about:blank`**](https://html.spec.whatwg.org/multipage/infrastructure.html#about:blank) otherwise‚Äù_ ‚Äî shouldn‚Äôt that test be updated to change the assert there to `assert_equals(childWin.location.href, \"**about:blank**\")`?","format":"org.matrix.custom.html","formatted_body":" * <a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>:  about the <em>‚Äúdocument.open() does not change document's URL (active but not fully active document‚Äù</em> test case at https://github.com/web-platform-tests/wpt/blob/db6e5032915eb0dcb1d8b8b249488055378245fd/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.js#L28 : in light of https://github.com/whatwg/html/pull/4076 ‚Äî&nbsp;and specifically the requirement <em>‚ÄúA <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object has an associated url, which is this <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object's <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document\">relevant Document</a>'s <a href=\"https://dom.spec.whatwg.org/#concept-document-url\"><code>URL</code></a>, if this <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object's <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document\">relevant Document</a> is non-null, and <a href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#about:blank\"><strong><code>about:blank</code></strong></a> otherwise‚Äù</em> ‚Äî shouldn‚Äôt that test be updated to change the assert there to <code>assert_equals(childWin.location.href, \"**about:blank**\")</code>?","m.new_content":{"body":"annevk:  about the _‚Äúdocument.open() does not change document's URL (active but not fully active document‚Äù_ test case at https://github.com/web-platform-tests/wpt/blob/db6e5032915eb0dcb1d8b8b249488055378245fd/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.js#L28 : in light of https://github.com/whatwg/html/pull/4076 ‚Äî¬†and specifically the requirement _‚ÄúA [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object has an associated url, which is this [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object's [relevant Document](https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document)'s [`URL`](https://dom.spec.whatwg.org/#concept-document-url), if this [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object's [relevant Document](https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document) is non-null, and [**`about:blank`**](https://html.spec.whatwg.org/multipage/infrastructure.html#about:blank) otherwise‚Äù_ ‚Äî shouldn‚Äôt that test be updated to change the assert there to `assert_equals(childWin.location.href, \"**about:blank**\")`?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>:  about the <em>‚Äúdocument.open() does not change document's URL (active but not fully active document‚Äù</em> test case at https://github.com/web-platform-tests/wpt/blob/db6e5032915eb0dcb1d8b8b249488055378245fd/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.js#L28 : in light of https://github.com/whatwg/html/pull/4076 ‚Äî&nbsp;and specifically the requirement <em>‚ÄúA <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object has an associated url, which is this <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object's <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document\">relevant Document</a>'s <a href=\"https://dom.spec.whatwg.org/#concept-document-url\"><code>URL</code></a>, if this <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object's <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document\">relevant Document</a> is non-null, and <a href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#about:blank\"><strong><code>about:blank</code></strong></a> otherwise‚Äù</em> ‚Äî shouldn‚Äôt that test be updated to change the assert there to <code>assert_equals(childWin.location.href, \"**about:blank**\")</code>?","msgtype":"m.text"},"m.relates_to":{"event_id":"$T_jWudao1Q_9yZtguXiYEHziM8igUm48QyFwmI-fy7o","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695284801569,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$MZTSh905VOhvE9KHwxnDPydP2VKQwgFIX28DKVqO1Yg"},
{"content":{"body":" * annevk:  about the _‚Äúdocument.open() does not change document's URL (active but not fully active document‚Äù_ test case at https://github.com/web-platform-tests/wpt/blob/db6e5032915eb0dcb1d8b8b249488055378245fd/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.js#L28 : in light of https://github.com/whatwg/html/pull/4076 ‚Äî¬†and specifically the requirement _‚ÄúA [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object has an associated url, which is this [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object's [relevant Document](https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document)'s [`URL`](https://dom.spec.whatwg.org/#concept-document-url), if this [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object's [relevant Document](https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document) is non-null, and [**`about:blank`**](https://html.spec.whatwg.org/multipage/infrastructure.html#about:blank) otherwise‚Äù_ ‚Äî shouldn‚Äôt that test be updated to change the assert there to `assert_equals(childWin.location.href, \"`**`about:blank`**`\")`?","format":"org.matrix.custom.html","formatted_body":" * <a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>:  about the <em>‚Äúdocument.open() does not change document's URL (active but not fully active document‚Äù</em> test case at https://github.com/web-platform-tests/wpt/blob/db6e5032915eb0dcb1d8b8b249488055378245fd/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.js#L28 : in light of https://github.com/whatwg/html/pull/4076 ‚Äî&nbsp;and specifically the requirement <em>‚ÄúA <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object has an associated url, which is this <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object's <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document\">relevant Document</a>'s <a href=\"https://dom.spec.whatwg.org/#concept-document-url\"><code>URL</code></a>, if this <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object's <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document\">relevant Document</a> is non-null, and <a href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#about:blank\"><strong><code>about:blank</code></strong></a> otherwise‚Äù</em> ‚Äî shouldn‚Äôt that test be updated to change the assert there to <code>assert_equals(childWin.location.href, \"</code><strong><code>about:blank</code></strong><code>\")</code>?","m.new_content":{"body":"annevk:  about the _‚Äúdocument.open() does not change document's URL (active but not fully active document‚Äù_ test case at https://github.com/web-platform-tests/wpt/blob/db6e5032915eb0dcb1d8b8b249488055378245fd/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.js#L28 : in light of https://github.com/whatwg/html/pull/4076 ‚Äî¬†and specifically the requirement _‚ÄúA [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object has an associated url, which is this [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object's [relevant Document](https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document)'s [`URL`](https://dom.spec.whatwg.org/#concept-document-url), if this [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object's [relevant Document](https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document) is non-null, and [**`about:blank`**](https://html.spec.whatwg.org/multipage/infrastructure.html#about:blank) otherwise‚Äù_ ‚Äî shouldn‚Äôt that test be updated to change the assert there to `assert_equals(childWin.location.href, \"`**`about:blank`**`\")`?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>:  about the <em>‚Äúdocument.open() does not change document's URL (active but not fully active document‚Äù</em> test case at https://github.com/web-platform-tests/wpt/blob/db6e5032915eb0dcb1d8b8b249488055378245fd/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.js#L28 : in light of https://github.com/whatwg/html/pull/4076 ‚Äî&nbsp;and specifically the requirement <em>‚ÄúA <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object has an associated url, which is this <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object's <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document\">relevant Document</a>'s <a href=\"https://dom.spec.whatwg.org/#concept-document-url\"><code>URL</code></a>, if this <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object's <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document\">relevant Document</a> is non-null, and <a href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#about:blank\"><strong><code>about:blank</code></strong></a> otherwise‚Äù</em> ‚Äî shouldn‚Äôt that test be updated to change the assert there to <code>assert_equals(childWin.location.href, \"</code><strong><code>about:blank</code></strong><code>\")</code>?","msgtype":"m.text"},"m.relates_to":{"event_id":"$T_jWudao1Q_9yZtguXiYEHziM8igUm48QyFwmI-fy7o","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695284839737,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$xcqgU5jI_BsWcx2Rjo2jUpR5ozDM7Y9ouzfZBhON9vc"},
{"content":{"body":" * annevk:  about the _‚Äúdocument.open() does not change document's URL (active but not fully active document)‚Äù_ test case at https://github.com/web-platform-tests/wpt/blob/db6e5032915eb0dcb1d8b8b249488055378245fd/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.js#L28 : in light of https://github.com/whatwg/html/pull/4076 ‚Äî¬†and specifically the requirement _‚ÄúA [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object has an associated url, which is this [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object's [relevant Document](https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document)'s [`URL`](https://dom.spec.whatwg.org/#concept-document-url), if this [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object's [relevant Document](https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document) is non-null, and [**`about:blank`**](https://html.spec.whatwg.org/multipage/infrastructure.html#about:blank) otherwise‚Äù_ ‚Äî shouldn‚Äôt that test be updated to change the assert there to `assert_equals(childWin.location.href, \"`**`about:blank`**`\")`?","format":"org.matrix.custom.html","formatted_body":" * <a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>:  about the <em>‚Äúdocument.open() does not change document's URL (active but not fully active document)‚Äù</em> test case at https://github.com/web-platform-tests/wpt/blob/db6e5032915eb0dcb1d8b8b249488055378245fd/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.js#L28 : in light of https://github.com/whatwg/html/pull/4076 ‚Äî&nbsp;and specifically the requirement <em>‚ÄúA <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object has an associated url, which is this <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object's <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document\">relevant Document</a>'s <a href=\"https://dom.spec.whatwg.org/#concept-document-url\"><code>URL</code></a>, if this <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object's <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document\">relevant Document</a> is non-null, and <a href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#about:blank\"><strong><code>about:blank</code></strong></a> otherwise‚Äù</em> ‚Äî shouldn‚Äôt that test be updated to change the assert there to <code>assert_equals(childWin.location.href, \"</code><strong><code>about:blank</code></strong><code>\")</code>?","m.new_content":{"body":"annevk:  about the _‚Äúdocument.open() does not change document's URL (active but not fully active document)‚Äù_ test case at https://github.com/web-platform-tests/wpt/blob/db6e5032915eb0dcb1d8b8b249488055378245fd/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.js#L28 : in light of https://github.com/whatwg/html/pull/4076 ‚Äî¬†and specifically the requirement _‚ÄúA [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object has an associated url, which is this [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object's [relevant Document](https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document)'s [`URL`](https://dom.spec.whatwg.org/#concept-document-url), if this [`Location`](https://html.spec.whatwg.org/multipage/nav-history-apis.html#location) object's [relevant Document](https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document) is non-null, and [**`about:blank`**](https://html.spec.whatwg.org/multipage/infrastructure.html#about:blank) otherwise‚Äù_ ‚Äî shouldn‚Äôt that test be updated to change the assert there to `assert_equals(childWin.location.href, \"`**`about:blank`**`\")`?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>:  about the <em>‚Äúdocument.open() does not change document's URL (active but not fully active document)‚Äù</em> test case at https://github.com/web-platform-tests/wpt/blob/db6e5032915eb0dcb1d8b8b249488055378245fd/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.js#L28 : in light of https://github.com/whatwg/html/pull/4076 ‚Äî&nbsp;and specifically the requirement <em>‚ÄúA <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object has an associated url, which is this <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object's <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document\">relevant Document</a>'s <a href=\"https://dom.spec.whatwg.org/#concept-document-url\"><code>URL</code></a>, if this <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#location\"><code>Location</code></a> object's <a href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#relevant-document\">relevant Document</a> is non-null, and <a href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#about:blank\"><strong><code>about:blank</code></strong></a> otherwise‚Äù</em> ‚Äî shouldn‚Äôt that test be updated to change the assert there to <code>assert_equals(childWin.location.href, \"</code><strong><code>about:blank</code></strong><code>\")</code>?","msgtype":"m.text"},"m.relates_to":{"event_id":"$T_jWudao1Q_9yZtguXiYEHziM8igUm48QyFwmI-fy7o","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695284969798,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$yM_OCTPfymWdPzeLOl6LdVBmaCbS7heGp9ehHhAGk2g"},
{"content":{"body":"sideshowbarker: I'm not sure that's accurate, relevant Document is childFrame.contentDocument, which is non-null, right?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">sideshowbarker</a>: I'm not sure that's accurate, relevant Document is childFrame.contentDocument, which is non-null, right?","msgtype":"m.text"},"ts":1695287560827,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$w3ELkdEt0pEZvOFFVoJPyso2wrLkoUHthLM-QTmkys8"},
{"content":{"body":"Jeffrey Yasskin: Noam Rosenthal: I gave it another pass; things that could help in the future: ensure Build is passing, commit message is clear, checklist in OP is filled out, there's a PR somewhere for renaming tentative tests to non-tentative tests; if either of you wants to review it as well that'd be appreciated","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jyasskin:matrix.org\">Jeffrey Yasskin</a>: <a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: I gave it another pass; things that could help in the future: ensure Build is passing, commit message is clear, checklist in OP is filled out, there's a PR somewhere for renaming tentative tests to non-tentative tests; if either of you wants to review it as well that'd be appreciated","msgtype":"m.text"},"ts":1695288567034,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$eRoNst7XvM_u7lC03XyD44vEd8AwR029JvvrA7BDxXQ"},
{"content":{"body":"> <@annevk:matrix.org> Jeffrey Yasskin: Noam Rosenthal: I gave it another pass; things that could help in the future: ensure Build is passing, commit message is clear, checklist in OP is filled out, there's a PR somewhere for renaming tentative tests to non-tentative tests; if either of you wants to review it as well that'd be appreciated\n\nSure I will give it a pass. Wanted to see that it's not outright rejected or so. Thanks üôè","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs%3Amatrix.org/%24eRoNst7XvM_u7lC03XyD44vEd8AwR029JvvrA7BDxXQ\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@jyasskin:matrix.org\">Jeffrey Yasskin</a>: <a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: I gave it another pass; things that could help in the future: ensure Build is passing, commit message is clear, checklist in OP is filled out, there's a PR somewhere for renaming tentative tests to non-tentative tests; if either of you wants to review it as well that'd be appreciated</blockquote></mx-reply>Sure I will give it a pass. Wanted to see that it's not outright rejected or so. Thanks üôè","m.relates_to":{"m.in_reply_to":{"event_id":"$eRoNst7XvM_u7lC03XyD44vEd8AwR029JvvrA7BDxXQ"}},"msgtype":"m.text"},"ts":1695289963723,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$VatglDpjoA0VbI5_xO5PRMXT_D6KSEVvGdrRbq5yeJE"},
{"content":{"body":"Euh, XML doesn't define what to do with `data:text/xml,<?xml%20version=\"1.0\"%20encoding=\"a\"?><b/>`? Five editions!","format":"org.matrix.custom.html","formatted_body":"Euh, XML doesn't define what to do with <code>data:text/xml,&lt;?xml%20version=\"1.0\"%20encoding=\"a\"?&gt;&lt;b/&gt;</code>? Five editions!","msgtype":"m.text"},"ts":1695290186548,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$8LQtR5Q4Ih79eQm9XcARgL88ntcopafZhCIVhmucmW8"},
{"content":{"body":"(Tracked in https://bugs.webkit.org/show_bug.cgi?id=18110 for now.)","msgtype":"m.text"},"ts":1695290470527,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$0vQ3EbyZvuS0N8qss0CITouVXCvR1g82FwuYsaUY7PI"},
{"content":{"body":"> <@annevk:matrix.org> sideshowbarker: I'm not sure that's accurate, relevant Document is childFrame.contentDocument, which is non-null, right?\n\nYeah, seems so ‚Äî and that‚Äôs also what I had thought, but WebKit is the only UA to have implemented that spec change, and WebKit returns `about:blank` there. So it appears to be a bug in WebKit, caused by the Location code not having the Frame object that it should have.\n\nTake a look at https://searchfox.org/wubkat/source/Source/WebCore/page/Location.cpp#53-54. That entire code assumes there‚Äôs a single `frame()` Frame object that it gets the location from. But for that test case, it‚Äôs null. So I guess changing  the `src` value of that iframe either causes the `childDoc` to be prematurely completely disassociated from `childFrame`, or else that `childFrame` gets prematurely destroyed.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$w3ELkdEt0pEZvOFFVoJPyso2wrLkoUHthLM-QTmkys8?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">sideshowbarker</a>: I'm not sure that's accurate, relevant Document is childFrame.contentDocument, which is non-null, right?</blockquote></mx-reply><p>Yeah, seems so ‚Äî and that‚Äôs also what I had thought, but WebKit is the only UA to have implemented that spec change, and WebKit returns <code>about:blank</code> there. So it appears to be a bug in WebKit, caused by the Location code not having the Frame object that it should have.</p>\n<p>Take a look at https://searchfox.org/wubkat/source/Source/WebCore/page/Location.cpp#53-54. That entire code assumes there‚Äôs a single <code>frame()</code> Frame object that it gets the location from. But for that test case, it‚Äôs null. So I guess changing  the <code>src</code> value of that iframe either causes the <code>childDoc</code> to be prematurely completely disassociated from <code>childFrame</code>, or else that <code>childFrame</code> gets prematurely destroyed.</p>\n","m.relates_to":{"m.in_reply_to":{"event_id":"$w3ELkdEt0pEZvOFFVoJPyso2wrLkoUHthLM-QTmkys8"}},"msgtype":"m.text"},"ts":1695290489298,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$iX_viSfTwPnp3riApnpPAwNl-KMoLMknzdqsAxjFHUs"},
{"content":{"body":"Does anyone know how you find out if indexing a spec got stuck? XHR still doesn't pick up terms we introduced in HTML two days ago.","msgtype":"m.text"},"ts":1695291181952,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$_9XDBMiYIatE3lRO-3OqZOF2guwu5kLHTK-JNCST0Tk"},
{"content":{"body":"TabAtkins maybe?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@tabatkins:matrix.org\">TabAtkins</a> maybe?","msgtype":"m.text"},"ts":1695291189307,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$XE7OpkfS-KhTy2oe_tgTl1yGOLzWnj1PLljxR1t6kQU"},
{"content":{"body":"sideshowbarker: are you saying `Frame` is 1:1 with `Document`? I'm not familiar with how this stuff is implemented in browsers unfortunately.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">sideshowbarker</a>: are you saying <code>Frame</code> is 1:1 with <code>Document</code>? I'm not familiar with how this stuff is implemented in browsers unfortunately.","msgtype":"m.text"},"ts":1695291269456,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$MQiV6Z8OWDkZRzqLZ-Cxl93kXYMmqbQw_rNW_CYuwMQ"},
{"content":{"body":"> <@annevk:matrix.org> sideshowbarker: are you saying `Frame` is 1:1 with `Document`? I'm not familiar with how this stuff is implemented in browsers unfortunately.\n\nI don‚Äôt know ‚Äî¬†I need to trace through the rest of the code more. But code-wise, I see that Location code has access to a LocalDOMWindow window, along with access to that frame() Frame, and na√Øvely I wonder if it should be getting the document from that LocalDOMWindow object rather the Frame.\n\nAnyway, if I can‚Äôt get it figured out, I‚Äôll raise a bugs.webkit.org bug.\n\nThe failing test case is at https://wpt.fyi/results/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.html","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$MQiV6Z8OWDkZRzqLZ-Cxl93kXYMmqbQw_rNW_CYuwMQ?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">sideshowbarker</a>: are you saying <code>Frame</code> is 1:1 with <code>Document</code>? I'm not familiar with how this stuff is implemented in browsers unfortunately.</blockquote></mx-reply><p>I don‚Äôt know ‚Äî&nbsp;I need to trace through the rest of the code more. But code-wise, I see that Location code has access to a LocalDOMWindow window, along with access to that frame() Frame, and na√Øvely I wonder if it should be getting the document from that LocalDOMWindow object rather the Frame.</p>\n<p>Anyway, if I can‚Äôt get it figured out, I‚Äôll raise a bugs.webkit.org bug.</p>\n<p>The failing test case is at https://wpt.fyi/results/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.html</p>\n","m.relates_to":{"m.in_reply_to":{"event_id":"$MQiV6Z8OWDkZRzqLZ-Cxl93kXYMmqbQw_rNW_CYuwMQ"}},"msgtype":"m.text"},"ts":1695293153567,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$unXwAP8zSnxHiSbYhjhF5iUHtMpS4sCMPp-RIke89tM"},
{"content":{"body":"> <@annevk:matrix.org> sideshowbarker: are you saying `Frame` is 1:1 with `Document`? I'm not familiar with how this stuff is implemented in browsers unfortunately.\n\n * I don‚Äôt know ‚Äî¬†I need to trace through the rest of the code more. But code-wise, I see that Location code has access to a LocalDOMWindow window, along with access to that frame() Frame, and na√Øvely I wonder if it should be getting the document from that LocalDOMWindow object rather than from the Frame.\n\nAnyway, if I can‚Äôt get it figured out, I‚Äôll raise a bugs.webkit.org bug.\n\nThe failing test case is at https://wpt.fyi/results/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.html","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$MQiV6Z8OWDkZRzqLZ-Cxl93kXYMmqbQw_rNW_CYuwMQ?via=matrix.org&amp;via=mozilla.org&amp;via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">sideshowbarker</a>: are you saying <code>Frame</code> is 1:1 with <code>Document</code>? I'm not familiar with how this stuff is implemented in browsers unfortunately.</blockquote></mx-reply> * <p>I don‚Äôt know ‚Äî&nbsp;I need to trace through the rest of the code more. But code-wise, I see that Location code has access to a LocalDOMWindow window, along with access to that frame() Frame, and na√Øvely I wonder if it should be getting the document from that LocalDOMWindow object rather than from the Frame.</p>\n<p>Anyway, if I can‚Äôt get it figured out, I‚Äôll raise a bugs.webkit.org bug.</p>\n<p>The failing test case is at https://wpt.fyi/results/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.html</p>\n","m.new_content":{"body":"I don‚Äôt know ‚Äî¬†I need to trace through the rest of the code more. But code-wise, I see that Location code has access to a LocalDOMWindow window, along with access to that frame() Frame, and na√Øvely I wonder if it should be getting the document from that LocalDOMWindow object rather than from the Frame.\n\nAnyway, if I can‚Äôt get it figured out, I‚Äôll raise a bugs.webkit.org bug.\n\nThe failing test case is at https://wpt.fyi/results/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.html","format":"org.matrix.custom.html","formatted_body":"<p>I don‚Äôt know ‚Äî&nbsp;I need to trace through the rest of the code more. But code-wise, I see that Location code has access to a LocalDOMWindow window, along with access to that frame() Frame, and na√Øvely I wonder if it should be getting the document from that LocalDOMWindow object rather than from the Frame.</p>\n<p>Anyway, if I can‚Äôt get it figured out, I‚Äôll raise a bugs.webkit.org bug.</p>\n<p>The failing test case is at https://wpt.fyi/results/html/webappapis/dynamic-markup-insertion/opening-the-input-stream/url.window.html</p>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$unXwAP8zSnxHiSbYhjhF5iUHtMpS4sCMPp-RIke89tM","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695293237707,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$x7JQ6DYvYocTBDuEyOWhiQnHuABzWP6pJbw74m79x5M"},
{"content":{"body":"Huh, I see that I was mentioned but can't find the message with it","msgtype":"m.text"},"ts":1695295528085,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$JSqwmydSi_bLXA8ZMIcWbwh2AAw6nhsbqKfqFkpqPzs"},
{"content":{"body":"Oh I skipped right past it, nm. I'll check in a bit, annevk: ","format":"org.matrix.custom.html","formatted_body":"Oh I skipped right past it, nm. I'll check in a bit, <a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: ","msgtype":"m.text"},"ts":1695295813860,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$bLPgvlH0Sp2KFPR5G9oMf8K6hoW1I6VmyqGQig8IZmo"},
{"content":{"body":"(it's 4am right now, my sleep is disordered due to COVID)","msgtype":"m.text"},"ts":1695295853418,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$_ZbvkZZX90yLKcPMlr0MObSnXU4AJSLco7kdvDmgJjw"},
{"content":{"body":"Sorry to hear that. I guess the number of people impacted by TPAC is still rising. üôÉ","msgtype":"m.text"},"ts":1695297985513,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$HZF7hMA7qfROQDpTTrI_bc0JM96eGpje14BqvP_l2xU"},
{"content":{"body":"(Although if you're in California again I wonder if it's not jetlag as that's my usual visiting-California-wake-up time.)","msgtype":"m.text"},"ts":1695298645614,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$GDgJ0dtKU6b_aKa-gpJZqv8SWcS90kNpZhAp5ZntXpU"},
{"content":{"body":"I got home on Saturday night, my jetlag doesn't last that long. üòÖ","msgtype":"m.text"},"ts":1695299145310,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$4HHQcr8cgFbD6SzRVHS7hwQv5dM10pwA2fdT5mLpGEU"},
{"content":{"body":"at least you're not still stuck at DFW","msgtype":"m.text"},"ts":1695299244332,"senderName":"aja","senderId":"@aja:mozilla.org","id":"$kxIX_m8REsPixfqHZKUn_5LKS_aSCHGJDtMj7W0SUiM"},
{"content":{"body":"Lord, yeah. Actually got home *faster* than planned, the Atlantic flight got in early and I got myself bumped to an earlier flight for my last leg.","msgtype":"m.text"},"ts":1695299509085,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$Z7oCfRihcsDUDf_vZGcYUrlD3bKEHGCFpJr9OfiW9fw"},
{"content":{"body":"annevk: If I make a change to the Location-handling code in WebKit (specifically, to the `Location::url()` code), what WPT tests should I check for regressions?\n\nI just locally ran all 926 tests in the `html/webappapis` and `html/browsers` subtrees. Are there WPT subtrees in addition to those that I should also run and look at results for?","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: If I make a change to the Location-handling code in WebKit (specifically, to the <code>Location::url()</code> code), what WPT tests should I check for regressions?</p>\n<p>I just locally ran all 926 tests in the <code>html/webappapis</code> and <code>html/browsers</code> subtrees. Are there WPT subtrees in addition to those that I should also run and look at results for?</p>\n","msgtype":"m.text"},"ts":1695300179038,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$tDUuQ_zIlsYD5Cnqm2W3vFEiyyrpPbiZEnN08Vtmu2A"},
{"content":{"body":"annevk: sorry for the [massive comment](https://github.com/whatwg/html/pull/9546#issuecomment-1729500041) in the switch issue :/","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: sorry for the <a href=\"https://github.com/whatwg/html/pull/9546#issuecomment-1729500041\">massive comment</a> in the switch issue :/","msgtype":"m.text"},"ts":1695300644923,"senderName":"emilio","senderId":"@emilio:mozilla.org","id":"$s_4QSVPytEfX-WqzH0-lTiM59WtSZ4IZr-vJwdvzHOY"},
{"content":{"body":"annevk: but I think it's important we get these details right to avoid the kind of mess we're in with some of the other form controls","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: but I think it's important we get these details right to avoid the kind of mess we're in with some of the other form controls","msgtype":"m.text"},"ts":1695300666049,"senderName":"emilio","senderId":"@emilio:mozilla.org","id":"$2oJHAzKxg00qCRez3lYBz4g2yGkhrjiE0laH5I3MKyc"},
{"content":{"body":"sideshowbarker: that seems about right","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">sideshowbarker</a>: that seems about right","msgtype":"m.text"},"ts":1695304301410,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$aA9XHYQ5YlRZpnYBX7K337f0QTsuFOIdu3HwPMWLvLA"},
{"content":{"body":"emilio: that's very useful, thanks!","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@emilio:mozilla.org\">emilio</a>: that's very useful, thanks!","msgtype":"m.text"},"ts":1695304478747,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$MryqIlwo4QrBpwc3kt7DA4z9nJfggKssb2eqSYkchZo"},
{"content":{"body":"emilio: I'll do some more investigation. Might take a while. If zcorpan has some notes somewhere from when he investigated all this for `<input type=checkbox>` that might be useful too.\n\nIdeally I'd like to tackle this in stages, but there should be sufficient information for each stage and earlier design decisions shouldn't cause us to run into issues later on.","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@emilio:mozilla.org\">emilio</a>: I'll do some more investigation. Might take a while. If <a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a> has some notes somewhere from when he investigated all this for <code>&lt;input type=checkbox&gt;</code> that might be useful too.</p>\n<p>Ideally I'd like to tackle this in stages, but there should be sufficient information for each stage and earlier design decisions shouldn't cause us to run into issues later on.</p>\n","msgtype":"m.text"},"ts":1695304741570,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$GuSS9p_ZhpfIE-myRUuA2c1kQ3F_djZoSMbw15fJp8o"},
{"content":{"body":"IIRC I didn't investigate checkboxes so much","msgtype":"m.text"},"ts":1695304908482,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$RHy9ifeZqbTRTgvl5KGWBCezDngj5nV5nNLQ833-71k"},
{"content":{"body":"zcorpan: it's not too late üòÖ","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: it's not too late üòÖ","msgtype":"m.text"},"ts":1695305037590,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$LURom473PKSwGvCyMWMEqXJbWJuXWNr5gpFGjIHtOF8"},
{"content":{"body":"annevk: it never is :)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: it never is :)","msgtype":"m.text"},"ts":1695305117946,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$CXBA6dB7rBCBjhN0PmGr2w3SJSVrfxoLZZlU78T7IaI"},
{"content":{"body":"annevk: implementer interest or opposition for webkit? https://github.com/whatwg/html/pull/9538","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: implementer interest or opposition for webkit? https://github.com/whatwg/html/pull/9538","msgtype":"m.text"},"ts":1695315260537,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$SZMXY3XHHKbBWG_IHy3zn3F80PgAvONRkH0RPjQxtS8"},
{"content":{"body":"zcorpan: support, made me remember to actually label https://github.com/WebKit/standards-positions/issues/86 properly","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: support, made me remember to actually label https://github.com/WebKit/standards-positions/issues/86 properly","msgtype":"m.text"},"ts":1695316016054,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$Ccumidx04ek2bLsI8filiY0DU92zyAqh-BUCgGUoAe8"},
{"content":{"body":"annevk: will see what Chris says about https://github.com/WebKit/WebKit/pull/18026. I don‚Äôt yet understand exactly that the `Frame` abstraction maps to in the spec ‚Äî but whatever its purpose, it seems like the code can and should just be using the available Window instead. And the test results also seem to indicate that‚Äôs what should be happening.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: will see what Chris says about https://github.com/WebKit/WebKit/pull/18026. I don‚Äôt yet understand exactly that the <code>Frame</code> abstraction maps to in the spec ‚Äî but whatever its purpose, it seems like the code can and should just be using the available Window instead. And the test results also seem to indicate that‚Äôs what should be happening.","msgtype":"m.text"},"ts":1695317684686,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$MNubwAeG5p7XeIARqwVwxGPKyXYYg0ePDslMr1sn3TQ"}
]