[
{"content":{"body":"Dominic Farolino: no, a preflight only validates if the server is capable of handling the request, it doesn't validate if a specific resource wants to hand over data; you can kinda think of it as request vs response authorization","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domfarolino:matrix.org\">Dominic Farolino</a>: no, a preflight only validates if the server is capable of handling the request, it doesn't validate if a specific resource wants to hand over data; you can kinda think of it as request vs response authorization","msgtype":"m.text"},"ts":1679037084607,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$SVYBgqXqwV4KpnSMDYrc1m-RAD1GWuD4fWp9CJXrW-8"},
{"content":{"body":"annevk: looking at https://stackoverflow.com/questions/75764299/lack-of-automatic-encoding-of-get-parameters-a-bug-chrome-and-edge and wondering what’s supposed to happen there per-spec, and why. I would think that browsers should percent-encode that square bracket, as the OP expects. But no browsers do.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: looking at https://stackoverflow.com/questions/75764299/lack-of-automatic-encoding-of-get-parameters-a-bug-chrome-and-edge and wondering what’s supposed to happen there per-spec, and why. I would think that browsers should percent-encode that square bracket, as the OP expects. But no browsers do.","msgtype":"m.text"},"ts":1679037562763,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$I7B10AD0-2zk0ajT5qNs0cw-AviUMhO6i_L7P00pHNI"},
{"content":{"body":"> <@sideshowbarker:matrix.org> annevk: looking at https://stackoverflow.com/questions/75764299/lack-of-automatic-encoding-of-get-parameters-a-bug-chrome-and-edge and wondering what’s supposed to happen there per-spec, and why. I would think that browsers should percent-encode that square bracket, as the OP expects. But no browsers do.\n\n] is not in the percent-encode set. https://jsdom.github.io/whatwg-url/#url=aHR0cHM6Ly9leGFtcGxlLmNvbS9wYV10aD9xdT9lcnkjaGFzXWg=&base=YWJvdXQ6Ymxhbms= https://url.spec.whatwg.org/#query-percent-encode-set","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$I7B10AD0-2zk0ajT5qNs0cw-AviUMhO6i_L7P00pHNI?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">@sideshowbarker:matrix.org</a><br><a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: looking at https://stackoverflow.com/questions/75764299/lack-of-automatic-encoding-of-get-parameters-a-bug-chrome-and-edge and wondering what’s supposed to happen there per-spec, and why. I would think that browsers should percent-encode that square bracket, as the OP expects. But no browsers do.</blockquote></mx-reply>] is not in the percent-encode set. https://jsdom.github.io/whatwg-url/#url=aHR0cHM6Ly9leGFtcGxlLmNvbS9wYV10aD9xdT9lcnkjaGFzXWg=&amp;base=YWJvdXQ6Ymxhbms= https://url.spec.whatwg.org/#query-percent-encode-set","m.relates_to":{"m.in_reply_to":{"event_id":"$I7B10AD0-2zk0ajT5qNs0cw-AviUMhO6i_L7P00pHNI"}},"msgtype":"m.text"},"ts":1679040996605,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$3_n2Zf-ydGnQZ1CZ1SlI6FlivcgUMzzcQ613_73x1qY"},
{"content":{"body":"> <@domenicdenicola:matrix.org> ] is not in the percent-encode set. https://jsdom.github.io/whatwg-url/#url=aHR0cHM6Ly9leGFtcGxlLmNvbS9wYV10aD9xdT9lcnkjaGFzXWg=&base=YWJvdXQ6Ymxhbms= https://url.spec.whatwg.org/#query-percent-encode-set\n\nAh ok, I assumed that because it's not a URL code point, the spec would require it to be percent encoded","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$3_n2Zf-ydGnQZ1CZ1SlI6FlivcgUMzzcQ613_73x1qY?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">@domenicdenicola:matrix.org</a><br />] is not in the percent-encode set. https://jsdom.github.io/whatwg-url/#url=aHR0cHM6Ly9leGFtcGxlLmNvbS9wYV10aD9xdT9lcnkjaGFzXWg=&amp;base=YWJvdXQ6Ymxhbms= https://url.spec.whatwg.org/#query-percent-encode-set</blockquote></mx-reply>Ah ok, I assumed that because it's not a URL code point, the spec would require it to be percent encoded","m.relates_to":{"m.in_reply_to":{"event_id":"$3_n2Zf-ydGnQZ1CZ1SlI6FlivcgUMzzcQ613_73x1qY"}},"msgtype":"m.text"},"ts":1679041136308,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$gAcisZBTUW_AYQhke41FwKL3urTeM3NgJIm94Yt_f5o"},
{"content":{"body":"https://github.com/whatwg/url/issues/753 and https://github.com/whatwg/url/issues/379 are relevant","msgtype":"m.text"},"ts":1679041184078,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$CaeLIeNBg7wiffcvery54iiOfOrwp8oz_Ocn47fHtcw"},
{"content":{"body":"I guess the specific relevant set here is https://url.spec.whatwg.org/#query-percent-encode-set","msgtype":"m.text"},"ts":1679041319913,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$QIT8Cuj2W_cEJT3qoSxhrPRoapmHpBX4Re9-laPWon4"},
{"content":{"body":"I mean, for the SO question","msgtype":"m.text"},"ts":1679041358620,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$wQ6WKPbtFdkUlXP-_8lk3SKaKbTOd-kXcc94XluN_rs"},
{"content":{"body":"sideshowbarker: right, the validation requirements currently match RFC 3986 and 3987 (I thought I had stopped caring about 3987 and personally I might have, but the spec seems to match still)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">sideshowbarker</a>: right, the validation requirements currently match RFC 3986 and 3987 (I thought I had stopped caring about 3987 and personally I might have, but the spec seems to match still)","msgtype":"m.text"},"ts":1679044680369,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$ue1vcoM2YLzdktAaV7W8_i6tohgo6U-SAeVICXFdbww"},
{"content":{"body":"Maybe I should say \"aim to match\", as Domenic likes to point out we haven't done anything close to formally proving that","format":"org.matrix.custom.html","formatted_body":"Maybe I should say &quot;aim to match&quot;, as <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a> likes to point out we haven't done anything close to formally proving that","msgtype":"m.text"},"ts":1679044712567,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$q8wLLDzxNRY8oDVrVdY1OsXCkuOmb364P9W4IF9qdnE"},
{"content":{"body":"smaug: perhaps we could require element(s)-reflecting attributes to be connected and create more GC opportunities when they are not? Though I think this would require an element was disconnected listener to clear any cached object.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a>: perhaps we could require element(s)-reflecting attributes to be connected and create more GC opportunities when they are not? Though I think this would require an element was disconnected listener to clear any cached object.","msgtype":"m.text"},"ts":1679045908192,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$oNqE-iSg5jnHBeKjDRsmzIw5uAfhUn9FEdRvd6QUOmM"}
]