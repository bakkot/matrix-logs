[
{"content":{"body":"Is there a room for bikeshed questions? I'm hitting linking errors in my setup and others don't and I'd love some help debugging it..","m.mentions":{},"msgtype":"m.text"},"ts":1732529229228,"senderName":"Yoav Weiss","senderId":"@yoavweiss:matrix.org","id":"$u6DQ5ch2NWMgLB3-mzRBoXWTzYyf1zElZY3_YT0EAGw"},
{"content":{"body":"Noam Rosenthal: note that moving in and out of a disconnected node now works, right? So the DocumentFragment example seems wrong.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: note that moving in and out of a disconnected node now works, right? So the DocumentFragment example seems wrong.","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1732532386891,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$GmGFLZWL4F9y7sCsGLTtK_ENBzzPPc8_x44aiXzhzOo"},
{"content":{"body":"annevk: only disconnected->disconnected works","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: only disconnected-&gt;disconnected works","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1732532404527,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$6-8HHuCxfMFy0Pc3gyH0haHe7Tpg-y55cyfdk6tXK58"},
{"content":{"body":"Yoav Weiss: I usually use this room. Tab is here. ðŸ˜Š","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@yoavweiss:matrix.org\">Yoav Weiss</a>: I usually use this room. Tab is here. ðŸ˜Š","m.mentions":{"user_ids":["@yoavweiss:matrix.org"]},"msgtype":"m.text"},"ts":1732532428613,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$vpb3XU3I491ItsrrHeiNViY56X3AOxr-W4dPp-R2PLw"},
{"content":{"body":"I mean we can fallback to insertion for disconnected->connected / connected->disconnected, but that would not be the \"move steps\", it would be \"falling back to `insertBefore`\" which is exactly what they're asking","format":"org.matrix.custom.html","formatted_body":"I mean we can fallback to insertion for disconnected-&gt;connected / connected-&gt;disconnected, but that would not be the \"move steps\", it would be \"falling back to <code>insertBefore</code>\" which is exactly what they're asking","m.mentions":{},"msgtype":"m.text"},"ts":1732532454432,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$TlTp5ohieTOeCPJXG1MniCdxElGnDt5f2aA8T9TTe6I"},
{"content":{"body":"Right. I guess we might never be able to support disconnected <> connected. But we might be able to support connected/disconnected <> other document connected/disconnected.","m.mentions":{},"msgtype":"m.text"},"ts":1732532536775,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$vFUDaHaJvzLW0_F1etKyuqI3H_9TwWx3wh7YSz26Zso"},
{"content":{"body":"> <@annevk:matrix.org> Right. I guess we might never be able to support disconnected <> connected. But we might be able to support connected/disconnected <> other document connected/disconnected.\n\nRight, in the future perhaps we'll be able to move cross-origin iframes across documents without reloading them, that would be neat","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$vFUDaHaJvzLW0_F1etKyuqI3H_9TwWx3wh7YSz26Zso?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br>Right. I guess we might never be able to support disconnected &lt;&gt; connected. But we might be able to support connected/disconnected &lt;&gt; other document connected/disconnected.</blockquote></mx-reply>Right, in the future perhaps we'll be able to move cross-origin iframes across documents without reloading them, that would be neat","m.mentions":{"user_ids":["@annevk:matrix.org"]},"m.relates_to":{"is_falling_back":false,"m.in_reply_to":{"event_id":"$vFUDaHaJvzLW0_F1etKyuqI3H_9TwWx3wh7YSz26Zso"}},"msgtype":"m.text"},"ts":1732532576655,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$2fYFCJG4bXhCHoK_YJKbN_2e_tmRn4km4qDdSy9Bbz4"},
{"content":{"body":"annevk: but this shouldn't preclude us from also having a `moveOrInsertBefore` version and/or something like a `canMove` function, don't you think?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: but this shouldn't preclude us from also having a <code>moveOrInsertBefore</code> version and/or something like a <code>canMove</code> function, don't you think?","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1732532819652,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$wjNBmnYu5eOefNmUS4uzi8eQ8rCLB2B_Uu4B5ynxCL0"},
{"content":{"body":"I'm not really convinced by the people in that thread thus far. There's a lot of hyperbole and very little concrete arguments.","m.mentions":{},"msgtype":"m.text"},"ts":1732532899792,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$dbrUDw6NcHr247M5weT7-_DrByrWOo-YT1oy7mX6ja0"},
{"content":{"body":"annevk:  I guess we can also fall back to insert when it's something that inherently doesn't have state, like comment nodes or processing instructions etc, then throwing would be just for disconnected<->connected and across documents","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>:  I guess we can also fall back to insert when it's something that inherently doesn't have state, like comment nodes or processing instructions etc, then throwing would be just for disconnected&lt;-&gt;connected and across documents","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1732533235413,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$Fbo-71VySy_lLgVjoSSRSVEaFZVhQimuehlNpc9DNoM"},
{"content":{"body":"I think this method should treat all nodes the same as much as it can.","m.mentions":{},"msgtype":"m.text"},"ts":1732533465144,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$FS6FjE_-aGraa1crgihJN9KzXw8f34A2xbmtcSi7JTU"},
{"content":{"body":"(And as far as I can tell it does.)","m.mentions":{},"msgtype":"m.text"},"ts":1732533587313,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$cHOK9edyhKGC9eD1Q2cjeoD4gTVjBTd7Wt3-z21T52Y"},
{"content":{"body":"annevk: currently it only allows moving elements & document fragments, perhaps we can remove that restricition","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: currently it only allows moving elements &amp; document fragments, perhaps we can remove that restricition","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1732533599119,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$WDw_ATaN1YZDG5slCAJAIiyjeVXeXi8S1S46TJJ-HLU"},
{"content":{"body":"annevk: since comments etc don't have \"insertion steps\" anyway it should just work spec-wise I think","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: since comments etc don't have \"insertion steps\" anyway it should just work spec-wise I think","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1732533620582,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$1CSekGGvRHzubImTNRzOWg1PBU5B2jEccj4CKz8XzUc"},
{"content":{"body":"As in we might not need this line: https://github.com/whatwg/dom/pull/1307/files#diff-30f698d9b4650514daf7a04de5e44eebf8feff1a30e0505f8eeaf06703b2777dR2679","m.mentions":{},"msgtype":"m.text"},"ts":1732533803744,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$prb2M20txvb4d-R0uOle3rf3zpFbwLteNgG-iqvt4HY"},
{"content":{"body":" * As in we might not need this line: https://github.com/whatwg/dom/pull/1307/files#diff-30f698d9b4650514daf7a04de5e44eebf8feff1a30e0505f8eeaf06703b2777dR2685","m.mentions":{},"m.new_content":{"body":"As in we might not need this line: https://github.com/whatwg/dom/pull/1307/files#diff-30f698d9b4650514daf7a04de5e44eebf8feff1a30e0505f8eeaf06703b2777dR2685","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$prb2M20txvb4d-R0uOle3rf3zpFbwLteNgG-iqvt4HY","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1732533831556,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$0xInq7KYl3dYsV7gAdlIFyZrYxi9pn7RhWcO2k0hpZg"},
{"content":{"body":"Ah sorry, there is no such restriction, I was reading the parent vs. node thing wrong","m.mentions":{},"msgtype":"m.text"},"ts":1732533888518,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$U7i9UYNA72D6hEtI7LkQU3RFj_p8wjwZLErAhOxpx1g"},
{"content":{"body":"Noam Rosenthal: yeah, the only restriction is on DocumentType and that seems reasonable as it's not really something we care to support beyond the bare necessity. And there's a restriction on the root element, but that makes sense. Though maybe the root element restriction should be lifted (by allowing parent to be a Document) so it falls out of other conditions.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: yeah, the only restriction is on DocumentType and that seems reasonable as it's not really something we care to support beyond the bare necessity. And there's a restriction on the root element, but that makes sense. Though maybe the root element restriction should be lifted (by allowing parent to be a Document) so it falls out of other conditions.","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1732538898200,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$BZ0NYzXYfkqr46GnANDhn0klkO5ze4MgqWUZMQWhOto"},
{"content":{"body":"It seems that `insertBefore()` only works if `Document` has no element children currently. So I think behavior-wise it's going to be identical.","format":"org.matrix.custom.html","formatted_body":"It seems that <code>insertBefore()</code> only works if <code>Document</code> has no element children currently. So I think behavior-wise it's going to be identical.","m.mentions":{},"msgtype":"m.text"},"ts":1732539947750,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$5qX_3f1ggkO6L9COkIluWmDP35YjwUCznARpweNV9yQ"},
{"content":{"body":"Oh, but for non-elements it's not. Okay, leaving another comment.","m.mentions":{},"msgtype":"m.text"},"ts":1732540180208,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$f6wdfUk6WSrMieTV0pVUOspyLYzkj6Ype85cUKucj5g"},
{"content":{"body":"That issue btw has seen 30 new comments in 3 days. That's a good way to get your feedback ignored. :/","m.mentions":{},"msgtype":"m.text"},"ts":1732540626955,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$WHMkKznQeAiL8Vrihf27s_p36vPAffOT_GCK98UWSgQ"},
{"content":{"body":"> <@annevk:matrix.org> That issue btw has seen 30 new comments in 3 days. That's a good way to get your feedback ignored. :/\n\nYea several people trying to chime in to repeat the same point... not very helpful","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$WHMkKznQeAiL8Vrihf27s_p36vPAffOT_GCK98UWSgQ?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br>That issue btw has seen 30 new comments in 3 days. That&#39;s a good way to get your feedback ignored. :/</blockquote></mx-reply>Yea several people trying to chime in to repeat the same point... not very helpful","m.mentions":{"user_ids":["@annevk:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$WHMkKznQeAiL8Vrihf27s_p36vPAffOT_GCK98UWSgQ"}},"msgtype":"m.text"},"ts":1732541433484,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$mDekzPrVMSBSowce0jvwXu4l9q2kXJeGMHrdz4FWdc4"},
{"content":{"body":"Domenic: any latent thoughts on scoped custom element registries? Scoping for `innerHTML` and the like came up and it made me think that maybe decoupling from shadow roots could be nice. Would be interested to hear your thoughts. https://github.com/WICG/webcomponents/issues/1040#issuecomment-2498031090","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: any latent thoughts on scoped custom element registries? Scoping for <code>innerHTML</code> and the like came up and it made me think that maybe decoupling from shadow roots could be nice. Would be interested to hear your thoughts. https://github.com/WICG/webcomponents/issues/1040#issuecomment-2498031090","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"ts":1732543271765,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$XJ6au3_xfz3xwvkh7VRCVTXzFEq6eP8JALhXFVsc7Kw"},
{"content":{"body":"Domenic: the other thing that irks me a bit about https://github.com/WICG/webcomponents/blob/gh-pages/proposals/Scoped-Custom-Element-Registries.md is importNode() and createElement[NS] on ShadowRoot. Import does not at all imply clone to me. And createElementNS doesn't seem needed? But maybe these should also be on CustomElementRegistry to begin with.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: the other thing that irks me a bit about https://github.com/WICG/webcomponents/blob/gh-pages/proposals/Scoped-Custom-Element-Registries.md is importNode() and createElement[NS] on ShadowRoot. Import does not at all imply clone to me. And createElementNS doesn't seem needed? But maybe these should also be on CustomElementRegistry to begin with.","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"ts":1732543622559,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$n6DK-TRyipTTmzA6Uzjy2m76qt8PDgxLfotHeO2RHY8"},
{"content":{"body":"I've been hoping to not have to think too hard about them, heh...","msgtype":"m.text"},"ts":1732543879614,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$LflvdIeemTFT80exfwyn91KGttwNX29_BAGDAAqg3gU"},
{"content":{"body":"Ms2ger: nicolo-ribaudo: I think it would be useful if we had a WHATNOT call with a short presentation on ShadowRealm integration to get everyone on the same page. One thing you mentioned is that certain concepts are not applicable inside ShadowRealm, but couldn't someone just make the Image constructor available? I thought that was a thing.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@ms2ger:igalia.com\">Ms2ger</a>: <a href=\"https://matrix.to/#/@nicolo-ribaudo:matrix.org\">nicolo-ribaudo</a>: I think it would be useful if we had a WHATNOT call with a short presentation on ShadowRealm integration to get everyone on the same page. One thing you mentioned is that certain concepts are not applicable inside ShadowRealm, but couldn't someone just make the Image constructor available? I thought that was a thing.","m.mentions":{"user_ids":["@ms2ger:igalia.com","@nicolo-ribaudo:matrix.org"]},"msgtype":"m.text"},"ts":1732549635971,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$ilzjhxx2puj_yvxMcJg-8n_22hJ3F87k57FPJ1q1V90"},
{"content":{"body":"annevk: what's the schedule for those? ","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: what's the schedule for those?","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1732552170193,"senderName":"Ms2ger","senderId":"@ms2ger:igalia.com","id":"$lDkyJz0TwlcHB7Ve2dFUK55l_vCU2aTsHBZFx09_nvc"},
{"content":{"body":"annevk: you can only pass functions and primitives, so (unless I've confused myself again), you could pass the Image constructor into the shadow realm, but if you then called (the wrapper for) that constructor, you'd get an exception because it returns an object","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: you can only pass functions and primitives, so (unless I've confused myself again), you could pass the Image constructor into the shadow realm, but if you then called (the wrapper for) that constructor, you'd get an exception because it returns an object","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1732552292371,"senderName":"Ms2ger","senderId":"@ms2ger:igalia.com","id":"$_5EUcU4vSaLYZpfzyOeJLmPUm73000qTZEDfWhFSMNE"},
{"content":{"body":"Ms2ger: I think the most useful one to present at is bi-weekly at 6PM Amsterdam/Berlin/Paris on Thursday, next week being the next one of those. There's also a 10AM and 12AM variant the latter of which I only attend when I'm in the US and the former of which sees quite a bit less attendance. The 10AM one is this Thursday and the other one is two weeks from now.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@ms2ger:igalia.com\">Ms2ger</a>: I think the most useful one to present at is bi-weekly at 6PM Amsterdam/Berlin/Paris on Thursday, next week being the next one of those. There's also a 10AM and 12AM variant the latter of which I only attend when I'm in the US and the former of which sees quite a bit less attendance. The 10AM one is this Thursday and the other one is two weeks from now.","m.mentions":{"user_ids":["@ms2ger:igalia.com"]},"msgtype":"m.text"},"ts":1732553290572,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$WN9egdyVbfQzk2MZDFjOCG6sUHS-kPajee54nKw6n_g"},
{"content":{"body":"Ms2ger: so it would call it in the parent global first and then try to proxy the outcome? So there's no way the global could be something else? I guess that makes sense.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@ms2ger:igalia.com\">Ms2ger</a>: so it would call it in the parent global first and then try to proxy the outcome? So there's no way the global could be something else? I guess that makes sense.","m.mentions":{"user_ids":["@ms2ger:igalia.com"]},"msgtype":"m.text"},"ts":1732553362981,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$8sT9Xes08fvqTeZ691OgihXWnRoecWgD6zxAwmhAElo"},
{"content":{"body":"I think so, yes","m.mentions":{},"msgtype":"m.text"},"ts":1732553496454,"senderName":"Ms2ger","senderId":"@ms2ger:igalia.com","id":"$HKyJqLGqPRTVou96xivkj47kSYkMqn0KRoasBwF4akc"},
{"content":{"body":"annevk: so 5 Dec at 6pm, right? I'll see if someone can make that work","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: so 5 Dec at 6pm, right? I'll see if someone can make that work","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1732553652900,"senderName":"Ms2ger","senderId":"@ms2ger:igalia.com","id":"$Avh07QWqeE31rSCWmzyCF09vwZBx0G5eUg-cN0rKRzg"},
{"content":{"body":"Ms2ger: yes and please tell Panos Astithas early next week if it's happening so we can reserve time","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@ms2ger:igalia.com\">Ms2ger</a>: yes and please tell <a href=\"https://matrix.to/#/@pastith:matrix.org\">Panos Astithas</a> early next week if it's happening so we can reserve time","m.mentions":{"user_ids":["@ms2ger:igalia.com","@pastith:matrix.org"]},"msgtype":"m.text"},"ts":1732554395542,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$C8IeQarjum-WkSF4779xTqv-_a3ONvAbfdvnNQ_neJg"},
{"content":{"body":"In this test case:\n```\nlet xmlString = '<html><head></head><body><div></div><span></span></body></html>';\nlet root = (new DOMParser()).parseFromString(xmlString, 'text/xml').documentElement\nlet serialized = (new XMLSerializer()).serializeToString(root.ownerDocument);\n// serialized == '<html><head/><body><div/><span/></body></html>'\n```\nWhy is it incorrect to have the XHTML namespace on the html element? (i.e. `<html xmlns=\\\"http://www.w3.org/1999/xhtml\\\">`)","format":"org.matrix.custom.html","formatted_body":"<p>In this test case:</p>\n<pre><code>let xmlString = '&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;div&gt;&lt;/div&gt;&lt;span&gt;&lt;/span&gt;&lt;/body&gt;&lt;/html&gt;';\nlet root = (new DOMParser()).parseFromString(xmlString, 'text/xml').documentElement\nlet serialized = (new XMLSerializer()).serializeToString(root.ownerDocument);\n// serialized == '&lt;html&gt;&lt;head/&gt;&lt;body&gt;&lt;div/&gt;&lt;span/&gt;&lt;/body&gt;&lt;/html&gt;'\n</code></pre>\n<p>Why is it incorrect to have the XHTML namespace on the html element? (i.e. <code>&lt;html xmlns=\\\"http://www.w3.org/1999/xhtml\\\"&gt;</code>)</p>\n","m.mentions":{},"msgtype":"m.text"},"ts":1732563844437,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$zfZnL8pGj3t0q0_ca3uf8hTcBdIMDzXW6x52_ZeCnLY"}
]