[
{"content":{"body":"mfreed: I think it would be nice if you or we together drafted a small blog post around the shadow tree changes","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@mfreed:matrix.org\">mfreed</a>: I think it would be nice if you or we together drafted a small blog post around the shadow tree changes","m.mentions":{"user_ids":["@mfreed:matrix.org"]},"msgtype":"m.text"},"ts":1706856216613,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$E5mVC5GOcmFCcued8k_GuOfmJrrdrRKy13wB_Tg6-48"},
{"content":{"body":"Regarding trailing (not leading) characters in floating-point number values: Does the parsing algorithm at https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#rules-for-parsing-floating-point-number-values require implementations to ignore all trailing characters that are not ASCII digits?","m.mentions":{},"msgtype":"m.text"},"ts":1706861268300,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$6L4hAPXEksMeaCEKmQGIw-LTnymQ5msf33AxerXyesM"},
{"content":{"body":"sideshowbarker: yeah, it ends up ignoring essentially everything at a certain point. Whereas before that it is quite strict.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">sideshowbarker</a>: yeah, it ends up ignoring essentially everything at a certain point. Whereas before that it is quite strict.","m.mentions":{"user_ids":["@sideshowbarker:matrix.org"]},"msgtype":"m.text"},"ts":1706862921240,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$tjurM6tE3D7eIy6v-5EtNNMyodUaeDGcTT6MnJ6awmk"},
{"content":{"body":"OK, thanks","m.mentions":{},"msgtype":"m.text"},"ts":1706862960858,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$W_3FgQqJBU8L9W06dxJT7w1u1Kjj6qvLm10K7dywK9Q"},
{"content":{"body":"That complicates dealing with U+000B… Implementation-wise, it would be easier to just reject it everywhere","m.mentions":{},"msgtype":"m.text"},"ts":1706863038064,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$v2qdeAGiNSwWPDekzArgcOWBdNK2H1sgDRXTjVfyPuM"},
{"content":{"body":"sideshowbarker: I left a comment on your implementation. You need to go deeper. :-)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">sideshowbarker</a>: I left a comment on your implementation. You need to go deeper. :-)","m.mentions":{"user_ids":["@sideshowbarker:matrix.org"]},"msgtype":"m.text"},"ts":1706863593257,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$IuU2sBHFGBX1jw_iSSliB-SvhIPiBOARYDceme-djq0"},
{"content":{"body":"The source of the problem is WebKit's (copied by Chromium) string to double operations. They do a bit too much.","m.mentions":{},"msgtype":"m.text"},"ts":1706863661550,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$HRJ0xUFlAk0VYqRJzZ2hEmLo-mMr7U5rLwkkuAgnRWc"},
{"content":{"body":"> <@annevk:matrix.org> The source of the problem is WebKit's (copied by Chromium) string to double operations. They do a bit too much.\n\nYeah, I’m discovering that now…","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$HRJ0xUFlAk0VYqRJzZ2hEmLo-mMr7U5rLwkkuAgnRWc?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br>The source of the problem is WebKit&#39;s (copied by Chromium) string to double operations. They do a bit too much.</blockquote></mx-reply>Yeah, I’m discovering that now…","m.mentions":{"user_ids":["@annevk:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$HRJ0xUFlAk0VYqRJzZ2hEmLo-mMr7U5rLwkkuAgnRWc"}},"msgtype":"m.text"},"ts":1706863912182,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$pY1UdLPHhe2SsEwNBImjfi6TrSFzl8E6umPR10-WYo0"},
{"content":{"body":"sideshowbarker: It might be a bit much though so not handling U+000B for now would be reasonable too.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">sideshowbarker</a>: It might be a bit much though so not handling U+000B for now would be reasonable too.","m.mentions":{"user_ids":["@sideshowbarker:matrix.org"]},"msgtype":"m.text"},"ts":1706863922089,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$eCb1iyOtkz3sBVa6sKejkbNjlSg15W-5QSNzDCcpGOU"},
{"content":{"body":" * sideshowbarker: It might be a bit much though so not handling U+000B correctly for now would be reasonable too.","format":"org.matrix.custom.html","formatted_body":" * <a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">sideshowbarker</a>: It might be a bit much though so not handling U+000B correctly for now would be reasonable too.","m.mentions":{},"m.new_content":{"body":"sideshowbarker: It might be a bit much though so not handling U+000B correctly for now would be reasonable too.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">sideshowbarker</a>: It might be a bit much though so not handling U+000B correctly for now would be reasonable too.","m.mentions":{"user_ids":["@sideshowbarker:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$eCb1iyOtkz3sBVa6sKejkbNjlSg15W-5QSNzDCcpGOU","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1706863945817,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$TG6tSJzFdf6kqzIYUuq5WKovfdMrCNmTndQpDEk4bWs"},
{"content":{"body":"OK","m.mentions":{},"msgtype":"m.text"},"ts":1706863949143,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$GrOZT-Tv5SSIm7vNjDijQ8cFkrFAXlky3uGwwcdkxBQ"},
{"content":{"body":"Ideally string to double would just do the minimal thing. It would progress some character pointer and return failure or a number. And then after that the caller gets to decide whether to ignore trailing characters or not.","m.mentions":{},"msgtype":"m.text"},"ts":1706864016470,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$rtJksWTCHGw3sGWfAblwZydwyxIXYNn7VSaptEHCTfQ"},
{"content":{"body":"And the caller also gets to decide where the character pointer starts (i.e., whether to skip whitespace and what type of whitespace beforehand).","m.mentions":{},"msgtype":"m.text"},"ts":1706864044471,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$L1Xny3xoV8x6GtQP41oRJPnKkXYQu3a954R1gPD1oq8"},
{"content":{"body":"And had already thought about changing `parseDouble()` to disallow U+000B as leading whitespace, but figured the problem with hard-coding it that way would be that it could regress other existing code that does expect `parseDouble()` allow U+000B.\n\nSo yeah — ideally would need to be made configurable, as you said in your comment.\n","format":"org.matrix.custom.html","formatted_body":"<p>And had already thought about changing <code>parseDouble()</code> to disallow U+000B as leading whitespace, but figured the problem with hard-coding it that way would be that it could regress other existing code that does expect <code>parseDouble()</code> allow U+000B.</p>\n<p>So yeah —&nbsp;ideally would need to be made configurable, as you said in your comment.</p>\n","m.mentions":{},"msgtype":"m.text"},"ts":1706864240664,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$5_TR3io8A8J3eUKFnbgJT2dyZ20r6HTGdGsCEJHmyx0"},
{"content":{"body":"sideshowbarker: It looks like the other callers are in JSC. You could ask in the WebKit JSC channel maybe.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sideshowbarker:matrix.org\">sideshowbarker</a>: It looks like the other callers are in JSC. You could ask in the WebKit JSC channel maybe.","m.mentions":{"user_ids":["@sideshowbarker:matrix.org"]},"msgtype":"m.text"},"ts":1706864524717,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$Fr_HfG96ySvKse3JBbfPXWvoBfk1hxTdSWjcKvQD_rI"},
{"content":{"body":"OK","m.mentions":{},"msgtype":"m.text"},"ts":1706864540086,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$xGWcBFrxgrjZru--ulRxgnHl6m86AU0lEi3txBfHvew"},
{"content":{"body":"For now I guess I may also go ahead and hard-code the `parseDouble()` code to disallow U+000B, and see what that breaks","format":"org.matrix.custom.html","formatted_body":"For now I guess I may also go ahead and hard-code the <code>parseDouble()</code> code to disallow U+000B, and see what that breaks","m.mentions":{},"msgtype":"m.text"},"ts":1706864614771,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$tuxUt9OcIfuj4iqa4H_ZVFQ0K_2GflYVj8Lx_bx8bWs"},
{"content":{"body":"(just locally, I mean)","m.mentions":{},"msgtype":"m.text"},"ts":1706864636255,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$pNcmYKBTCtpIPR1DJP_Kx6UHShO7ruBM3nTNnEpZkyA"},
{"content":{"body":"Yeah seems reasonable to try. JavaScript should be concerned about more whitespace than just ASCII anyway, but maybe that's handled separately?","m.mentions":{},"msgtype":"m.text"},"ts":1706864670266,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$iSwAUn6N8foVDIY2M6JqOHuzr0pcxGPC5HHd_fTljL0"},
{"content":{"body":"maybe so… we’ll see, anyway","m.mentions":{},"msgtype":"m.text"},"ts":1706864697620,"senderName":"sideshowbarker","senderId":"@sideshowbarker:matrix.org","id":"$pyCcuzHjsLuwwrMeph6c6KWSF9YJ_GW-h5_yaYQ-8eM"},
{"content":{"body":"CSS seems to have mostly its own conversion, which seems suboptimal.","m.mentions":{},"msgtype":"m.text"},"ts":1706864720657,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$Gr-GAWKFfzqGVwHONBY26n6gOSpUvFk7Ep1w52VsMyk"}
]