[
{"content":{"body":"> <@annevk:mozilla.org> Jake Archibald: sideshowbarker: https://github.com/whatwg/fetch/pull/1330 might be of interest\n\nThanks for the heads-up about that. I think it’s a great addition that’ll be quite helpful — but I took the opportunity to suggest we consider dropping the existing statement that encourages sending 403 errors for the “opting out of CORS” case.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$Hz3GEyxGOsoOg8dkfsU0lmn_VA5KmZsnGFu68EGvxUE?via=mozilla.org&via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:mozilla.org\">@annevk:mozilla.org</a><br><a href=\"https://matrix.to/#/@jakea:matrix.org\">Jake Archibald</a>: <a href=\"https://matrix.to/#/@sideshowbarker:mozilla.org\">sideshowbarker</a>: https://github.com/whatwg/fetch/pull/1330 might be of interest</blockquote></mx-reply>Thanks for the heads-up about that. I think it’s a great addition that’ll be quite helpful — but I took the opportunity to suggest we consider dropping the existing statement that encourages sending 403 errors for the “opting out of CORS” case.","m.relates_to":{"m.in_reply_to":{"event_id":"$Hz3GEyxGOsoOg8dkfsU0lmn_VA5KmZsnGFu68EGvxUE"}},"msgtype":"m.text"},"ts":1634091871945,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$7LYWJEmQR3yDEjzdLnDxmV4hFqihFbnSEhYn6ylx1PM"},
{"content":{"body":"and  don’t think anybody mentioned https://jakearchibald.com/2021/cors/ here yet, but everybody who cares anything about CORS should really read that","msgtype":"m.text"},"ts":1634091937950,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$U7k0AacrJaTCiyfkUlwXkToKlaNwFFwRlvFN6wz-yJ0"},
{"content":{"body":"annevk: I think I found a good solution for the race-condition thingy (https://github.com/whatwg/fetch/pull/1311/files). Using existing queues for synchronization instead of introducing atomic lingo. Hope this works :)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: I think I found a good solution for the race-condition thingy (https://github.com/whatwg/fetch/pull/1311/files). Using existing queues for synchronization instead of introducing atomic lingo. Hope this works :)","msgtype":"m.text"},"ts":1634107633813,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$LNqIM5HV3wL7tNiSRLqqVfoXopqW-B73hPUUTAR6_14"},
{"content":{"body":"Jake Archibald: By the way, about CORS pain points for developers, from what I’ve observed in the thousands of Stack Overflow CORS questions I’ve read, by far the single biggest pain point is that developers see a CORS error get logged in the devtools console and assume the cause is some problem with the CORS config on the server side — when in fact, the real problem is that the response is 400 or 500 error or other 4xx/5xx error","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jakea:matrix.org\">Jake Archibald</a>: By the way, about CORS pain points for developers, from what I’ve observed in the thousands of Stack Overflow CORS questions I’ve read, by far the single biggest pain point is that developers see a CORS error get logged in the devtools console and assume the cause is some problem with the CORS config on the server side — when in fact, the real problem is that the response is 400 or 500 error or other 4xx/5xx error","msgtype":"m.text"},"ts":1634113905633,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$vv6FxkpHt2UsUQs7uSp0tw2xEJzrOQChDeVnBVY2VVQ"},
{"content":{"body":"but, browsers don’t log those 4xx/5xx errors to the devtools console, so all that the developers see is the CORS error","msgtype":"m.text"},"ts":1634113949299,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$6Sms7GSerXDWMKOeKCCk7ZssXz95xiToY1beppa6Soo"},
{"content":{"body":"so they reasonably assume the cause is some CORS-config issue, and then each of those developers spends literally hours trying to figure out what they got wrong in their CORS config","msgtype":"m.text"},"ts":1634114023405,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$_yGTNC0GPWia5PNAsjx4lGsBZ2s-ZBdmA9kgFHAobUw"},
{"content":{"body":"I've now tweaked https://github.com/whatwg/html/pull/7205 after reading it again after sleeping overnight between writing and reading. It could use spec-ese review. In particular, review of how the tree builder parts connect by reference to metaParser instead of minting a new concept for the thing that metaParser is.","msgtype":"m.text"},"ts":1634114067150,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$6bklGW6y-MjAJaAQEKO5pJdCnmT3GG4ECFoceTqtiAk"}
]