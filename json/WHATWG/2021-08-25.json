[
{"content":{"body":"has there ever been discussion of making XPathResult iterable?","msgtype":"m.text"},"ts":1629855976872,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$JWulvJfUjupX0zCUBCQFOLAR4SxGpFXmNvRnmhClmRs"},
{"content":{"body":"every time I write `while (next = result.iterateNext())` I feel slightly unclean","format":"org.matrix.custom.html","formatted_body":"every time I write <code>while (next = result.iterateNext())</code> I feel slightly unclean","msgtype":"m.text"},"ts":1629855990339,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$exvS6XSrDh5pHbgS7rf36vmPeL0Nlg7F21E-9tjK1N8"},
{"content":{"body":"bakkot: I think we donâ€™t even have proper spec for XPathResult","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@bakkot:matrix.org\">bakkot</a>: I think we donâ€™t even have proper spec for XPathResult","msgtype":"m.text"},"ts":1629856552929,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$4BvfVVHs3tt5Of612h1myk9SBndThvud9okDNdzbRZw"},
{"content":{"body":"oof","msgtype":"m.text"},"ts":1629856754462,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$qbyGEjsboordtxTG-0aEA7RefG-5N4_gHbtbyx45gZM"},
{"content":{"body":"what is a foreign element in the html tree construction stage?","msgtype":"m.text"},"ts":1629865388315,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$okjbKy-L5BzNCREuUfAC724enedBPVvO2oBaGvGG2is"},
{"content":{"body":"sujaldev: an element in the SVG or MathML namespace","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sujaldev:matrix.org\">sujaldev</a>: an element in the SVG or MathML namespace","msgtype":"m.text"},"ts":1629870018319,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$H22682k_Gbuf4OYffrnRMrz4InUfZLuKeJbeGan1-4c"},
{"content":{"body":" * sujaldev: an element in the SVG namespace or an element in the MathML namespace","format":"org.matrix.custom.html","formatted_body":" * <a href=\"https://matrix.to/#/@sujaldev:matrix.org\">sujaldev</a>: an element in the SVG namespace or an element in the MathML namespace","m.new_content":{"body":"sujaldev: an element in the SVG namespace or an element in the MathML namespace","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sujaldev:matrix.org\">sujaldev</a>: an element in the SVG namespace or an element in the MathML namespace","msgtype":"m.text"},"m.relates_to":{"event_id":"$H22682k_Gbuf4OYffrnRMrz4InUfZLuKeJbeGan1-4c","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1629870044940,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$WgozJQ-HT_7hZsiUgWxP1D69YQL_hvli67JfzggRS0k"},
{"content":{"body":"ok but how do you know, where did you find this?","msgtype":"m.text"},"ts":1629873721556,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$DNcqx5LWnOzrcI_Rh98ZAzCscQmqiqGsDJVDhTAjgb0"},
{"content":{"body":"It's in the spec, in the parsing algorithm","msgtype":"m.text"},"ts":1629873839223,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$VRuNgL-Ky0EOlVbcvOUiuBDqxkWabV5V6JgQDzFoQJg"},
{"content":{"body":"oki Thank you!","msgtype":"m.text"},"ts":1629873867764,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$M4rQL9j2sX3VC3Frq5XKmb1nddgsZZL6orNJq3UJrb4"},
{"content":{"body":"You want to look at the call sites that call the parts that have to do with handling \"foreign element\", and look at call parameters, or see what the conditions are that lead to those calls getting made","msgtype":"m.text"},"ts":1629874161926,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$1dntUQgtE9fjxVYmolpezZOMED3fnkUteNCCQ2XvGf0"},
{"content":{"body":"I'd look it up but I'm on from my phone and also a bit preoccupied","msgtype":"m.text"},"ts":1629874216732,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$iuIWnJ6o30rLVq32o4MSrxx1ij3YhNdespWURAJzjyw"},
{"content":{"body":"yeah no problem, I was getting an idea from the name that any non html tag would be considered foreign just wanted to make sure.","msgtype":"m.text"},"ts":1629874273251,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$vYS1jCmWmhfk1oXhZkr64vmuLvVfbrJPqO1JvjPDooU"},
{"content":{"body":"by the way, if I don't want to parse foreign elements","msgtype":"m.text"},"ts":1629874292945,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$Y1ljL9dHgsTGY37En3xl_lQdRPgG_Av3P_X6gy98rgw"},
{"content":{"body":"are there any parts in the specs that become irrelevant for me?","msgtype":"m.text"},"ts":1629874322218,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$_sJ3C2WxRuP1aFVApmDBNt5dM2WCFiY62xQAv5-nfCE"},
{"content":{"body":"I just want to implement a simple html parser, no handling for wrongly nested content, no namespaces, just valid html.","msgtype":"m.text"},"ts":1629874394799,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$6j4PMAYyEsR_cVQ91hy-r3rvq3eWqUkPqr9THPBw6rw"},
{"content":{"body":"I don't think anybody would recommend you do that","msgtype":"m.text"},"ts":1629874694362,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$gNHp2jc-Q1v86d4oFIXsqFQB4jvgAXvxsPdcI4f0jXU"},
{"content":{"body":"you can implement an html parser, but it will be hard to implement a simple _html_ parser :|","format":"org.matrix.custom.html","formatted_body":"you can implement an html parser, but it will be hard to implement a simple <em>html</em> parser :|","msgtype":"m.text"},"ts":1629874743404,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$DfN4yG1s6Qsgj68Aub39MyppBhANT7B-F84FXQ8GwjQ"},
{"content":{"body":" * you can implement an html parser, but it will be hard to implement a _simple_ html parser :|","format":"org.matrix.custom.html","formatted_body":" * you can implement an html parser, but it will be hard to implement a <em>simple</em> html parser :|","m.new_content":{"body":"you can implement an html parser, but it will be hard to implement a _simple_ html parser :|","format":"org.matrix.custom.html","formatted_body":"you can implement an html parser, but it will be hard to implement a <em>simple</em> html parser :|","msgtype":"m.text"},"m.relates_to":{"event_id":"$DfN4yG1s6Qsgj68Aub39MyppBhANT7B-F84FXQ8GwjQ","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1629874750158,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$PCECGXIkOteivk2cgWB5riWBm6E-8oS_vyoSg1YSmO0"},
{"content":{"body":"You would end up with something that doesn't parse HTML the same way that browsers do","msgtype":"m.text"},"ts":1629874760071,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$VrHhZ7yaKxg2d30Bg6j69Xf_DKcX2kFUJPgzMwmDHww"},
{"content":{"body":"And that would make the parser not very useful for anything in practice","msgtype":"m.text"},"ts":1629874798042,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$j9NejKNI0YRQl6WpEHPvI_aYr44fa-l5Y9gGJR4l5RQ"},
{"content":{"body":"Admittedly, I don't know your use case, but there are security risks.","msgtype":"m.text"},"ts":1629874820682,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$e66SQy9Kmqv6ccEGRaiCEqXE8bA3ULK6H9g_IUzLXa4"},
{"content":{"body":"my use case being a school project, I thought building it would be fun(it is fun just not when under pressure) easy and quick. Now, I have missed several deadlines.","msgtype":"m.text"},"ts":1629874890060,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$B4WWeZY7TEbZb8aE7dgv49i2FHNXTGbxzW_AGdTNpOg"},
{"content":{"body":"> <@sideshowbarker:mozilla.org> And that would make the parser not very useful for anything in practice\n\nwhich part causes that?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$j9NejKNI0YRQl6WpEHPvI_aYr44fa-l5Y9gGJR4l5RQ?via=mozilla.org&via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@sideshowbarker:mozilla.org\">@sideshowbarker:mozilla.org</a><br>And that would make the parser not very useful for anything in practice</blockquote></mx-reply>which part causes that?","m.relates_to":{"m.in_reply_to":{"event_id":"$j9NejKNI0YRQl6WpEHPvI_aYr44fa-l5Y9gGJR4l5RQ"}},"msgtype":"m.text"},"ts":1629874905434,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$PXCWsknoTIl0g99I4mmhIgfh65vjyTebEnJ8THLS0L0"},
{"content":{"body":"the no support for misnested tags?","msgtype":"m.text"},"ts":1629874912363,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$2NAyj0rAV1r06oh19Uze_DCQ5jx4GVfINaukxri75nw"},
{"content":{"body":"or the no support for namespaces?","msgtype":"m.text"},"ts":1629874923811,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$oyEBuJ1P_L1FKxe0mt4Bn8RUyaeCfByAt8hV0tmvh_I"},
{"content":{"body":"But if you really wanted to do that I guess you'd make certain steps a no-op rather than doing what the spec says","msgtype":"m.text"},"ts":1629874960595,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$E4jnCWNL_5Yu1iAyUP8C8bkPqSe2BUVPEbq9R3E_dOA"},
{"content":{"body":"For a school project, I'd re-use an existing parser. There are many useful parsers out there. When on a web page, just use the JS DOMParser API. When in Python use html5lib, Rust has html5ever","msgtype":"m.text"},"ts":1629874983855,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$y3yPZUfaUENnclcMPyCHtII04761rMiCFoBmK5tIrbg"},
{"content":{"body":"there's also a java parser","msgtype":"m.text"},"ts":1629875001854,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$FgxzXx4bnRoW-7ctCxjcOr-jMpgh-sKlXiTV6GLXnik"},
{"content":{"body":"Or else make them fatal parsing failures","msgtype":"m.text"},"ts":1629875029864,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$5SPUbuHdcG0YRLIeM7Bh6uTS5VR3ZuGHxXxgA3mKmCs"},
{"content":{"body":"> <@sideshowbarker:mozilla.org> But if you really wanted to do that I guess you'd make certain steps a no-op rather than doing what the spec says\n\nI am doing something similar:\nI just raise a NotImplementedError wherever I feel the feature isn't quite necessary","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$E4jnCWNL_5Yu1iAyUP8C8bkPqSe2BUVPEbq9R3E_dOA?via=mozilla.org&via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@sideshowbarker:mozilla.org\">@sideshowbarker:mozilla.org</a><br>But if you really wanted to do that I guess you&#39;d make certain steps a no-op rather than doing what the spec says</blockquote></mx-reply>I am doing something similar:<br>I just raise a NotImplementedError wherever I feel the feature isn't quite necessary","m.relates_to":{"m.in_reply_to":{"event_id":"$E4jnCWNL_5Yu1iAyUP8C8bkPqSe2BUVPEbq9R3E_dOA"}},"msgtype":"m.text"},"ts":1629875044968,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$wrKfIMzKX5LpDic7oVNiCLBCwZ1kH6akCvDVq9ZUrFg"},
{"content":{"body":"You can decide on your own what you want to no-op or fail on","msgtype":"m.text"},"ts":1629875045043,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$PSQH2BynK7zTAV-L9j4fV3ujfnS_c8TAmz4hOCAw7YM"},
{"content":{"body":"> <@fbraun:mozilla.org> For a school project, I'd re-use an existing parser. There are many useful parsers out there. When on a web page, just use the JS DOMParser API. When in Python use html5lib, Rust has html5ever\n\nusing a library would mean I'd have to be able to answer all questions related to that library, so instead I am just writing my own, that way I understand...","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$y3yPZUfaUENnclcMPyCHtII04761rMiCFoBmK5tIrbg?via=mozilla.org&via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@fbraun:mozilla.org\">@fbraun:mozilla.org</a><br>For a school project, I&#39;d re-use an existing parser. There are many useful parsers out there. When on a web page, just use the JS DOMParser API. When in Python use html5lib, Rust has html5ever</blockquote></mx-reply>using a library would mean I'd have to be able to answer all questions related to that library, so instead I am just writing my own, that way I understand...","m.relates_to":{"m.in_reply_to":{"event_id":"$y3yPZUfaUENnclcMPyCHtII04761rMiCFoBmK5tIrbg"}},"msgtype":"m.text"},"ts":1629875136192,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$vYvM8Zhunk9NpgcNcA15GgCNd7kpMGDb9NDoDBx0Tz4"},
{"content":{"body":"one Thing i am really confused about is","msgtype":"m.text"},"ts":1629875171506,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$OGoa5cdXOo8acYhHnKg3pbJBMZi4LOn4GlCdrYbHtkE"},
{"content":{"body":"what's next step after creating the dom","msgtype":"m.text"},"ts":1629875184157,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$i2HjVwT2dtabGyfJE2vfViVhVTq12HPmz5ISImuiC5Y"},
{"content":{"body":"and the cssom","msgtype":"m.text"},"ts":1629875187504,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$34glseCIBeAfCCsFV6C6_LVt7p1QQAdZT6Ncs95R0Ik"},
{"content":{"body":"I know the render tree is to be created","msgtype":"m.text"},"ts":1629875197640,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$GnrFmVJOtfgfg53eehgu5VI0n7LE0qaSEPxvQfvWZQo"},
{"content":{"body":"but where I do find the specs?","msgtype":"m.text"},"ts":1629875216713,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$pNotayyvoK6F0l7eYGQFZVlsDqP7S5ZVmJUTiG1TimE"},
{"content":{"body":"https://html.spec.whatwg.org/multipage/parsing.html","msgtype":"m.text"},"ts":1629875283902,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$hsvVEOzJubjlr4LiPkJMlVo12hhlz73x0MX7KFNhN3Y"},
{"content":{"body":"yeah this page I know about, but where are the step in this to combine cssom tree and the dom tree?","msgtype":"m.text"},"ts":1629875333228,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$5kcfeYZbF-hWBEYrEt3dN0pHFbGcA5JnQ0glDGPNetc"},
{"content":{"body":"maybe this non-normative reference is helpful? https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#building_the_dom_tree","msgtype":"m.text"},"ts":1629875378960,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$vEvx44GNKrm0et5NvSNW98MHVIceWnf_sKsDQOTJFHQ"},
{"content":{"body":"at this point, you'll end up in all sorts of other specs, including the DOM and the CSS specs","msgtype":"m.text"},"ts":1629875402732,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$Gybrb0V8SLYDbde6jxSPd4Lu6MzFMAjdEpfMndrutys"},
{"content":{"body":"articles like these are helpful but do not provide the standard way to do it, like parsing is defined ","msgtype":"m.text"},"ts":1629875529440,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$qfnBhFOw5yxLtbZFSIlzTtMcVOfO3SYwFT5eA2MSc1g"},
{"content":{"body":"I don't want to stop you from learning. Trying hard stuff yourself is a great way to learn, but it seems to me that you're doing something that I wouldn't even take on myself :-) just so you don't dig yourself a hole too deep to get out of.","msgtype":"m.text"},"ts":1629875663688,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$SAjiF5bsoKpihPlVKXy2BaQIKLaObLJGJvYz0_BYsKg"},
{"content":{"body":"at this point, I can't really switch projects. Looks like I am already stuck in the deep hole...","msgtype":"m.text"},"ts":1629875767752,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$akQ2aGC4_E9toV4TBJYU7VEIDeCprjxav8rFBNODao4"},
{"content":{"body":"Maybe I'll just use something like pyqt's web view as a last resort.","msgtype":"m.text"},"ts":1629875849803,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$NXN1NAO9UiwM6Ginp3vZjkUBocPU_7Qk7jqYPzbHiIU"},
{"content":{"body":"Thank you all for your help!","msgtype":"m.text"},"ts":1629876011661,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$ii4oShnxzsJR2gdP22PRTv1QR4RmXWFVSfx5pcc7j4A"},
{"content":{"body":"talk to your advisor when things get messy. At best, they will appreciate the attempt. Going back to your CSS question, I honestly don't know. parsing seems to be here https://www.w3.org/TR/css-syntax-3/ but there are various other specs in https://www.w3.org/TR/css-syntax-3/","msgtype":"m.text"},"ts":1629876011920,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$Ir62oRYB5ZRzpoQZYorwDK0Deet9XJRICxu_2RCt-t4"},
{"content":{"body":"Yes I implemented the css tokenizer and parser from this specification but after that I don't know which specification to implement next.","msgtype":"m.text"},"ts":1629876120595,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$Lxvk_Xs8WnGCLvqBLRuXXnxDt6CYDpaf24oUyRboMlI"},
{"content":{"body":"wow.","msgtype":"m.text"},"ts":1629876219999,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$hsFmp9_Zem3jRXha_Re3Vor6KUDCRx49CahnfHjxoyo"},
{"content":{"body":"why? ðŸ˜†","msgtype":"m.text"},"ts":1629876243948,"senderName":"sujaldev","senderId":"@sujaldev:matrix.org","id":"$pIeyR374ueAE_xHwZoe66SYtBnZO-hP5jkNvjKyH3Wg"},
{"content":{"body":"at this point, I'd make a plan with a list of things to do, finding out what's optional and what's required and maybe text rendering / layout will be tricky enough without css? :-) ","msgtype":"m.text"},"ts":1629876268899,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$soGatUUuwGA-RBu60InJZpoHqxshLYeJN-Jx6_MyYgo"}
]