[
{"content":{"body":"annevk: https://twitter.com/jub0bs/status/1432025056234835980","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:mozilla.org\">annevk</a>: https://twitter.com/jub0bs/status/1432025056234835980","msgtype":"m.text"},"ts":1630636616259,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$6NQJ_B9Mz9wbCL9PGKvMjWqCvR8Ji7_13UvKnnLZCPY"},
{"content":{"body":"that's what we call a \"simple request\" though, isn't it? Also looking at https://twitter.com/bcrypt/status/1422243807328804882 and responses in the thread (e.g., https://twitter.com/shhnjk/status/1423013294860767237)","msgtype":"m.text"},"ts":1630648815807,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$vq_gfxG2kopPpYMubft_I1AA8l07QfVK4Qyh9xCAJ3M"},
{"content":{"body":"freddy: yeah I know;\n* per-spec it’s a simple request since the “essence” of the Content-Type header is `text/plain`, and\n* any server that’s treating a request body with `text/plain; application/json` as JSON has broken content-type handling that should be fixed\n…but I think in practice there are many servers that have broken content-type handling for JSON","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@fbraun:mozilla.org\">freddy</a>: yeah I know;</p>\n<ul>\n<li>per-spec it’s a simple request since the “essence” of the Content-Type header is <code>text/plain</code>, and</li>\n<li>any server that’s treating a request body with <code>text/plain; application/json</code> as JSON has broken content-type handling that should be fixed<br>…but I think in practice there are many servers that have broken content-type handling for JSON</li>\n</ul>\n","msgtype":"m.text"},"ts":1630650487565,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$J2xtJdLTUbhLZuOh9IOg07eNOGnauWB4-_jWOPiySVc"},
{"content":{"body":" * freddy: yeah I know;\n- per-spec it’s a simple request since the “essence” of the Content-Type header is `text/plain`, and\n- any server that’s treating a request body with `text/plain; application/json` as JSON has broken content-type handling that should be fixed\n\n…but I think in practice there are many servers that have broken content-type handling for JSON","format":"org.matrix.custom.html","formatted_body":" * <p><a href=\"https://matrix.to/#/@fbraun:mozilla.org\">freddy</a>: yeah I know;</p>\n<ul>\n<li>per-spec it’s a simple request since the “essence” of the Content-Type header is <code>text/plain</code>, and</li>\n<li>any server that’s treating a request body with <code>text/plain; application/json</code> as JSON has broken content-type handling that should be fixed</li>\n</ul>\n<p>…but I think in practice there are many servers that have broken content-type handling for JSON</p>\n","m.new_content":{"body":"freddy: yeah I know;\n- per-spec it’s a simple request since the “essence” of the Content-Type header is `text/plain`, and\n- any server that’s treating a request body with `text/plain; application/json` as JSON has broken content-type handling that should be fixed\n\n…but I think in practice there are many servers that have broken content-type handling for JSON","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@fbraun:mozilla.org\">freddy</a>: yeah I know;</p>\n<ul>\n<li>per-spec it’s a simple request since the “essence” of the Content-Type header is <code>text/plain</code>, and</li>\n<li>any server that’s treating a request body with <code>text/plain; application/json</code> as JSON has broken content-type handling that should be fixed</li>\n</ul>\n<p>…but I think in practice there are many servers that have broken content-type handling for JSON</p>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$J2xtJdLTUbhLZuOh9IOg07eNOGnauWB4-_jWOPiySVc","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1630650496510,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$vBV7tHUjnyirBDNiNY3nApOgKW_b9IuKb-hKhxn6uu8"},
{"content":{"body":"sideshowbarker: that's been known for ages I think, there's an open issue against the specification about it","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sideshowbarker:mozilla.org\">sideshowbarker</a>: that's been known for ages I think, there's an open issue against the specification about it","msgtype":"m.text"},"ts":1630650644840,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$tnSMq72f0gkTtNH-OS8Pz3rORE_6kMAaj5Rr6fYoyXs"},
{"content":{"body":"ah OK","msgtype":"m.text"},"ts":1630650710747,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$D8npTbuOc1Yu1WY7u5SgdgjvcvUae4iuLJ6rMOljflc"},
{"content":{"body":"well I guess a similar real-world case is maybe https://stackoverflow.com/a/45752919/441757","msgtype":"m.text"},"ts":1630650739075,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$r0vvd0zBWfq4Yhe0wlkw85qk72Rfq6J8x2wco8_4qd4"},
{"content":{"body":"sideshowbarker: text/plain; application/json isn't actually the evil example, https://github.com/whatwg/fetch/issues/838 has the worse attacks","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sideshowbarker:mozilla.org\">sideshowbarker</a>: text/plain; application/json isn't actually the evil example, https://github.com/whatwg/fetch/issues/838 has the worse attacks","msgtype":"m.text"},"ts":1630650781278,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$I1kIBlz5uS6OV_c1WA0QLJeCbt0NIgsM7XEMPcIiZsw"},
{"content":{"body":"looks","msgtype":"m.emote"},"ts":1630650793238,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$MhHPC-DbNn8EexdhDcI78ofAtXiwPPPOsj6tbx61Pns"},
{"content":{"body":"aha","msgtype":"m.text"},"ts":1630650822171,"senderName":"sideshowbarker","senderId":"@sideshowbarker:mozilla.org","id":"$HUsxHEteLtwLKsbjQVeCGBYJqae5MRbhe0hJueDNNYk"},
{"content":{"body":"The only complete solution here would be for the browser to take ownership of setting Content-Type, but I think that ends up breaking things, but it could be tried again I suppose","msgtype":"m.text"},"ts":1630650837453,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$5dIGOedxHo9wqNO4KfimfmYFax3LiIEr-i8KBYnqcTg"}
]