[
{"content":{"body":"annevk: https://nastystereo.com/security/cross-site-post-without-content-type.html -- Uh, why are they posting this instead of reporting a bug with browsers? Is that a standards bug, a browser bug or both?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: https://nastystereo.com/security/cross-site-post-without-content-type.html -- Uh, why are they posting this instead of reporting a bug with browsers? Is that a standards bug, a browser bug or both?","msgtype":"m.text"},"ts":1732781318036,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$nD0CUrLex2ghMnLSvG8eR2al1KXZ1KJrFv2USqNklZU"},
{"content":{"body":"zcorpan (OOO 22 Nov): suggested forwarding this here. Copying his take from elsewhere:\n\nhttps://fetch.spec.whatwg.org/#concept-bodyinit-extract\n10. Switch on object:\nBlob\nSet source to object.\nSet length to object’s size.\nIf object’s type attribute is not the empty byte sequence, set type to its value.\n...\n14. Return (body, type).\nthat is called from https://fetch.spec.whatwg.org/#ref-for-concept-bodyinit-extract%E2%91%A1\n4. If type is non-null and https://webidl.spec.whatwg.org/#this’s https://fetch.spec.whatwg.org/#request-headers’s https://fetch.spec.whatwg.org/#concept-headers-header-list https://fetch.spec.whatwg.org/#header-list-contains `Content-Type`, then https://fetch.spec.whatwg.org/#concept-headers-append (`Content-Type`, type) to https://webidl.spec.whatwg.org/#this’s https://fetch.spec.whatwg.org/#request-headers.\n\nI suppose that step could throw if type is null and there's no content-type header, and method is POST (or disallow no content-type for all methods?)","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan (OOO 22 Nov)</a>: suggested forwarding this here. Copying his take from elsewhere:</p>\n<p>https://fetch.spec.whatwg.org/#concept-bodyinit-extract<br />\n10. Switch on object:<br />\nBlob<br />\nSet source to object.<br />\nSet length to object’s size.<br />\nIf object’s type attribute is not the empty byte sequence, set type to its value.<br />\n...<br />\n14. Return (body, type).<br />\nthat is called from https://fetch.spec.whatwg.org/#ref-for-concept-bodyinit-extract%E2%91%A1<br />\n4. If type is non-null and https://webidl.spec.whatwg.org/#this’s https://fetch.spec.whatwg.org/#request-headers’s https://fetch.spec.whatwg.org/#concept-headers-header-list https://fetch.spec.whatwg.org/#header-list-contains <code>Content-Type</code>, then https://fetch.spec.whatwg.org/#concept-headers-append (<code>Content-Type</code>, type) to https://webidl.spec.whatwg.org/#this’s https://fetch.spec.whatwg.org/#request-headers.</p>\n<p>I suppose that step could throw if type is null and there's no content-type header, and method is POST (or disallow no content-type for all methods?)</p>","m.relates_to":{"event_id":"$nD0CUrLex2ghMnLSvG8eR2al1KXZ1KJrFv2USqNklZU","is_falling_back":true,"m.in_reply_to":{"event_id":"$nD0CUrLex2ghMnLSvG8eR2al1KXZ1KJrFv2USqNklZU"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1732781389790,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$jWinoskclaxcdXc_j1JPPBWKYWnj5lJqHNSj1SXQRF4"},
{"content":{"body":"> XMLHttpRequest does the same (per spec). You can also use an ArrayBuffer or ArrayBufferView I think","format":"org.matrix.custom.html","formatted_body":"<blockquote>\n<p>XMLHttpRequest does the same (per spec). You can also use an ArrayBuffer or ArrayBufferView I think</p>\n</blockquote>","m.relates_to":{"event_id":"$nD0CUrLex2ghMnLSvG8eR2al1KXZ1KJrFv2USqNklZU","is_falling_back":true,"m.in_reply_to":{"event_id":"$jWinoskclaxcdXc_j1JPPBWKYWnj5lJqHNSj1SXQRF4"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1732781401390,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$VjcEhGTCknrBwrjNPrMGpA3v49SQ31gGNlEQV2kc-I8"},
{"content":{"body":"Why does Chromium have a layer between its URL parser and the ICU4C IDNA code that introduces non-conforming behaviors? Given that Firefox and Safari work well enough without such a layer suggests that it's not absolutely necessary for Web compat for Chromium to second-guess ICU4C. https://wpt.fyi/results/url/IdnaTestV2.window.html?label=master&label=experimental&aligned&q=%2Furl%2FIdnaTestV2.window.html Now that UTS 46 has an IgnoreInvalidPunycode flag, some folks think that Chromium sets that flag and think that behaviors not actually covered by that flag are legitimate. annevk , might be worthwhile to resolve https://github.com/whatwg/url/issues/821 sooner than later. ","format":"org.matrix.custom.html","formatted_body":"Why does Chromium have a layer between its URL parser and the ICU4C IDNA code that introduces non-conforming behaviors? Given that Firefox and Safari work well enough without such a layer suggests that it's not absolutely necessary for Web compat for Chromium to second-guess ICU4C. https://wpt.fyi/results/url/IdnaTestV2.window.html?label=master&amp;label=experimental&amp;aligned&amp;q=%2Furl%2FIdnaTestV2.window.html Now that UTS 46 has an IgnoreInvalidPunycode flag, some folks think that Chromium sets that flag and think that behaviors not actually covered by that flag are legitimate. <a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a> , might be worthwhile to resolve https://github.com/whatwg/url/issues/821 sooner than later.","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1732782231785,"senderName":"hsivonen","senderId":"@hsivonen:mozilla.org","id":"$aZT7FlZ9BipSmyYATeePgfHdyozwxF7Kggza5qk2F4c"}
]