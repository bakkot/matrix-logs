[
{"content":{"body":"Dominic Farolino: shadow tree integration with the wider web platform was never really fully finished and I doubt we actually have tests covering all these scenarios, so that seems plausible unfortunately","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domfarolino:matrix.org\">Dominic Farolino</a>: shadow tree integration with the wider web platform was never really fully finished and I doubt we actually have tests covering all these scenarios, so that seems plausible unfortunately","m.mentions":{"user_ids":["@domfarolino:matrix.org"]},"msgtype":"m.text"},"ts":1728541157267,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$UQWimklXD4aL38kVDQ7zUvFKTK31h2xZRqYkabXOIlc"},
{"content":{"body":"Dominic Farolino: in particular when you see something say \"in a document\" it hasn't been looked at yet, but a lot of these things could do with more review and tests: https://dom.spec.whatwg.org/#document-trees ","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domfarolino:matrix.org\">Dominic Farolino</a>: in particular when you see something say \"in a document\" it hasn't been looked at yet, but a lot of these things could do with more review and tests: https://dom.spec.whatwg.org/#document-trees","m.mentions":{"user_ids":["@domfarolino:matrix.org"]},"msgtype":"m.text"},"ts":1728541308030,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$g-sAgg-NwoFY01vSl1aUWs5VqjlVo2AhEIgqnyi3Y1g"},
{"content":{"body":"Domenic: look at what you made me do: https://github.com/w3c/csswg-drafts/issues/11008 (Luke Warlow shares some of the blame, but the suggestion for fancy serialization was yours alone)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: look at what you made me do: https://github.com/w3c/csswg-drafts/issues/11008 (<a href=\"https://matrix.to/#/@lwarlow:igalia.com\">Luke Warlow</a> shares some of the blame, but the suggestion for fancy serialization was yours alone)","m.mentions":{"user_ids":["@domenicdenicola:matrix.org","@lwarlow:igalia.com"]},"msgtype":"m.text"},"ts":1728544005125,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$GD2PDfQaKZ0bJbjK8GIqCnWw_o7XNgSBb2G9n4oDLK0"},
{"content":{"body":"Fun times...","m.mentions":{},"msgtype":"m.text"},"ts":1728544137971,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$RF9MDWWQTtF4-QykoLC7JUD8mJmSuA2Z04DoKIGBaE8"},
{"content":{"body":"To be fair, it has been fun figuring out all the C++ primitives in WebKit. The APIs are not always as straightforward as one might like, but there is a way.","m.mentions":{},"msgtype":"m.text"},"ts":1728544683909,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$uhNI4d7lIMpSohMycgG4UYhTb2MfAuEeNYKROXxdtro"},
{"content":{"body":"> <@annevk:matrix.org> To be fair, it has been fun figuring out all the C++ primitives in WebKit. The APIs are not always as straightforward as one might like, but there is a way.\n\nOut of interest do you have a draft PR for this prototype I was looking at the available APIs for parsing and serialising CSS colours in 4 engines and was stumped a bit in all of them. WebKit and chrome both seemed to have stub functions for the parsing for example.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$uhNI4d7lIMpSohMycgG4UYhTb2MfAuEeNYKROXxdtro?via=igalia.com&via=matrix.org&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br />To be fair, it has been fun figuring out all the C++ primitives in WebKit. The APIs are not always as straightforward as one might like, but there is a way.</blockquote></mx-reply>Out of interest do you have a draft PR for this prototype I was looking at the available APIs for parsing and serialising CSS colours in 4 engines and was stumped a bit in all of them. WebKit and chrome both seemed to have stub functions for the parsing for example.","m.relates_to":{"m.in_reply_to":{"event_id":"$uhNI4d7lIMpSohMycgG4UYhTb2MfAuEeNYKROXxdtro"}},"msgtype":"m.text"},"ts":1728546270541,"senderName":"Luke Warlow","senderId":"@lwarlow:igalia.com","id":"$NZdYneAF5dPbEfQs3tkPYcGQx9KlkUMTy41xsqla15Y"},
{"content":{"body":"I'm planning to put it up later today. I wanted to make sure modifications to the colorspace and alpha attributes were properly reflected, but it seems that `::value()` already does the correct thing. (I suppose there is a case to consider about what to do when the picker is open, but I'm not quite there yet.)","format":"org.matrix.custom.html","formatted_body":"I'm planning to put it up later today. I wanted to make sure modifications to the colorspace and alpha attributes were properly reflected, but it seems that <code>::value()</code> already does the correct thing. (I suppose there is a case to consider about what to do when the picker is open, but I'm not quite there yet.)","m.mentions":{},"msgtype":"m.text"},"ts":1728550287242,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$0zsXp0UBvt8LXluvZr1F7-OI6EuNBBtm52jqYFCPoK8"},
{"content":{"body":"Luke Warlow: https://github.com/WebKit/WebKit/pull/34970","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@lwarlow:igalia.com\">Luke Warlow</a>: https://github.com/WebKit/WebKit/pull/34970","m.mentions":{"user_ids":["@lwarlow:igalia.com"]},"m.relates_to":{"event_id":"$0zsXp0UBvt8LXluvZr1F7-OI6EuNBBtm52jqYFCPoK8","is_falling_back":true,"m.in_reply_to":{"event_id":"$0zsXp0UBvt8LXluvZr1F7-OI6EuNBBtm52jqYFCPoK8"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1728552909214,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$MH1KpTDG66oB6kDWfQcr2GITyYRuPkqos1XZeFhIY_Y"},
{"content":{"body":"jarhar: for reconstructing formatting elements, the interesting cases are\n- <select><div><i></div><option>\n- <div><i></div><option>\nThe not-in-select case should reconstruct to match what happens today. I know I suggested not doing that for option-in-select, but maybe it should also reconstruct so that handling of option is a bit more consistent between the two cases. (Same deal for optgroup)","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@jarhar:matrix.org\">jarhar</a>: for reconstructing formatting elements, the interesting cases are</p>\n<ul>\n<li>&lt;select&gt;&lt;div&gt;&lt;i&gt;&lt;option&gt;</li>\n<li>&lt;div&gt;&lt;i&gt;&lt;/div&gt;&lt;option&gt;</li>\n</ul>\n<p>The not-in-select case should reconstruct to match what happens today. I know I suggested not doing that for option-in-select, but maybe it should also reconstruct so that handling of option is a bit more consistent between the two cases. (Same deal for optgroup)</p>\n","m.mentions":{"user_ids":["@jarhar:matrix.org"]},"msgtype":"m.text"},"ts":1728560720122,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$4e9_YcJ-YxspAvbmxtMQ6aM2aTnMOoy_YTdCyzpaOPc"},
{"content":{"body":" * jarhar: for reconstructing formatting elements, the interesting cases are\n\n- \\<select>\\<div>\\<i>\\</div>\\<option>\n- \\<div>\\<i>\\</div>\\<option>\n\nThe not-in-select case should reconstruct to match what happens today. I know I suggested not doing that for option-in-select, but maybe it should also reconstruct so that handling of option is a bit more consistent between the two cases. (Same deal for optgroup)","format":"org.matrix.custom.html","formatted_body":" * <p><a href=\"https://matrix.to/#/@jarhar:matrix.org\">jarhar</a>: for reconstructing formatting elements, the interesting cases are</p>\n<ul>\n<li>&lt;select&gt;&lt;div&gt;&lt;i&gt;&lt;/div&gt;&lt;option&gt;</li>\n<li>&lt;div&gt;&lt;i&gt;&lt;/div&gt;&lt;option&gt;</li>\n</ul>\n<p>The not-in-select case should reconstruct to match what happens today. I know I suggested not doing that for option-in-select, but maybe it should also reconstruct so that handling of option is a bit more consistent between the two cases. (Same deal for optgroup)</p>\n","m.mentions":{},"m.new_content":{"body":"jarhar: for reconstructing formatting elements, the interesting cases are\n\n- \\<select>\\<div>\\<i>\\</div>\\<option>\n- \\<div>\\<i>\\</div>\\<option>\n\nThe not-in-select case should reconstruct to match what happens today. I know I suggested not doing that for option-in-select, but maybe it should also reconstruct so that handling of option is a bit more consistent between the two cases. (Same deal for optgroup)","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@jarhar:matrix.org\">jarhar</a>: for reconstructing formatting elements, the interesting cases are</p>\n<ul>\n<li>&lt;select&gt;&lt;div&gt;&lt;i&gt;&lt;/div&gt;&lt;option&gt;</li>\n<li>&lt;div&gt;&lt;i&gt;&lt;/div&gt;&lt;option&gt;</li>\n</ul>\n<p>The not-in-select case should reconstruct to match what happens today. I know I suggested not doing that for option-in-select, but maybe it should also reconstruct so that handling of option is a bit more consistent between the two cases. (Same deal for optgroup)</p>\n","m.mentions":{"user_ids":["@jarhar:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$4e9_YcJ-YxspAvbmxtMQ6aM2aTnMOoy_YTdCyzpaOPc","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1728560754082,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$NgICcWFG1IZINdfBmy7o_QKtuaR1oGJqj_mJG_dpYUI"},
{"content":{"body":"Yall tapn\nhttps://t.me/+32cFzLuOiacxZmM0\n","msgtype":"m.text"},"ts":1728564186498,"senderName":"sauceee","senderId":"@sauceee:matrix.org","id":"$tg8eYbiIO3aqxF2e3cueW4C2DOf77JffqOTSXXqFU5s"},
{"content":{"body":"> <@annevk:matrix.org> Dominic Farolino: in particular when you see something say \"in a document\" it hasn't been looked at yet, but a lot of these things could do with more review and tests: https://dom.spec.whatwg.org/#document-trees\n\nRight, I knew \"in a document\" usages were pretty suspicious; I had assumed that \"in a document tree\" usages were fully vetted though. Oh well","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$g-sAgg-NwoFY01vSl1aUWs5VqjlVo2AhEIgqnyi3Y1g?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br><a href=\"https://matrix.to/#/@domfarolino:matrix.org\">Dominic Farolino</a>: in particular when you see something say \"in a document\" it hasn't been looked at yet, but a lot of these things could do with more review and tests: https://dom.spec.whatwg.org/#document-trees</blockquote></mx-reply>Right, I knew \"in a document\" usages were pretty suspicious; I had assumed that \"in a document tree\" usages were fully vetted though. Oh well","m.mentions":{"user_ids":["@annevk:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$g-sAgg-NwoFY01vSl1aUWs5VqjlVo2AhEIgqnyi3Y1g"}},"msgtype":"m.text"},"ts":1728567175038,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$03e8jaCHAfjbYtXNZkTam7D55lSqoP1kU5DhwuCR-fI"},
{"content":{"body":"Dominic Farolino: we might have decided, but it also predated writing tests for all changes I suspect","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domfarolino:matrix.org\">Dominic Farolino</a>: we might have decided, but it also predated writing tests for all changes I suspect","m.mentions":{"user_ids":["@domfarolino:matrix.org"]},"msgtype":"m.text"},"ts":1728572893044,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$wG9gm3rtEsUUegz07ptD-6-rdy1yY8Nu9bH8V_-1BQ8"},
{"content":{"body":"Dominic Farolino: please do file issues if you spot mismatches","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domfarolino:matrix.org\">Dominic Farolino</a>: please do file issues if you spot mismatches","m.mentions":{"user_ids":["@domfarolino:matrix.org"]},"msgtype":"m.text"},"ts":1728572904372,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$HWOtnRvc5Vqn7Mqv7HRzqBGcF7Jhuz29wD83UH5Gqww"},
{"content":{"body":"Yep, will do!","m.mentions":{},"msgtype":"m.text"},"ts":1728576099619,"senderName":"Dominic Farolino","senderId":"@domfarolino:matrix.org","id":"$1gSBs6msv2OBN5ShnpL7TKhM3wHQ6kuxIrsSA7vlv0I"},
{"content":{"body":"oh, HTML spec doesn't even define focusin? It has only blur and focus. And per UI event, focusout/in are basically just bubbling variants of blur/focus. But what implementations actually do...","m.mentions":{},"msgtype":"m.text"},"ts":1728579949252,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$ZuBW_MAZLIYOsAcAwawTjlhH4Tgc4Pw2gkiIiso_U6M"},
{"content":{"body":" * oh, HTML spec doesn't even define focusin? It has only blur and focus. And per UI events, focusout/in are basically just bubbling variants of blur/focus. But what implementations actually do...","m.mentions":{},"m.new_content":{"body":"oh, HTML spec doesn't even define focusin? It has only blur and focus. And per UI events, focusout/in are basically just bubbling variants of blur/focus. But what implementations actually do...","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$ZuBW_MAZLIYOsAcAwawTjlhH4Tgc4Pw2gkiIiso_U6M","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1728580091984,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$czaZmL4gUZTZqYhTWBh2bVIxBt9jJ5u0aBtFLS9aYDE"},
{"content":{"body":"smaug: there's an issue on adding them, as well as FocusEvent","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a>: there's an issue on adding them, as well as FocusEvent","m.mentions":{"user_ids":["@smaug:mozilla.org"]},"msgtype":"m.text"},"ts":1728580239309,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$GaDptP5Jav0FkqRQirddy9Alt8HuwMJqkseFKcvPfRk"},
{"content":{"body":"smaug: it was unfortunately not as easy as I hoped, but I last looked at that many years ago, so maybe it's easier today","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@smaug:mozilla.org\">smaug</a>: it was unfortunately not as easy as I hoped, but I last looked at that many years ago, so maybe it's easier today","m.mentions":{"user_ids":["@smaug:mozilla.org"]},"msgtype":"m.text"},"ts":1728580260175,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$zSAiAvPlYpSUNu9u7T8SUqkkyF7s9Ayzal7b_YvoaYg"},
{"content":{"body":"https://github.com/whatwg/html/pull/10235","msgtype":"m.text"},"ts":1728580294174,"senderName":"Luke Warlow","senderId":"@lwarlow:igalia.com","id":"$2T-sMfa6y2BQcpajonvKXuB-6P8aV1svKxpTVknYz7E"},
{"content":{"body":"Ah I forgot about that patch. Hopefully Joey didn't","m.mentions":{},"msgtype":"m.text"},"ts":1728580357465,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$FcVmMWTYtfUA2Bd103jzpLQvUITQVov5vrCi3qiT-jo"},
{"content":{"body":"There's been some implementation differences, https://searchfox.org/mozilla-central/rev/9f49f28c3b7f53b1a1f47350ed38437d113d1aa6/dom/base/nsFocusManager.cpp#2848-2849 Not sure if webkit still differs ","m.mentions":{},"msgtype":"m.text"},"ts":1728580541665,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$7jbHiCqqQxgF9mqrshzouGaO1NGsQ_44b3xohuLyT-k"},
{"content":{"body":"> <@smaug:mozilla.org> There's been some implementation differences, https://searchfox.org/mozilla-central/rev/9f49f28c3b7f53b1a1f47350ed38437d113d1aa6/dom/base/nsFocusManager.cpp#2848-2849 Not sure if webkit still differs \n\nIirc not all browsers offer the IDL attributes for the event listeners either. Which I believe has actively caused issues in Preact. (https://github.com/preactjs/preact/issues/4314)","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$7jbHiCqqQxgF9mqrshzouGaO1NGsQ_44b3xohuLyT-k?via=igalia.com&via=matrix.org&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@smaug:mozilla.org\">@smaug:mozilla.org</a><br />There's been some implementation differences, https://searchfox.org/mozilla-central/rev/9f49f28c3b7f53b1a1f47350ed38437d113d1aa6/dom/base/nsFocusManager.cpp#2848-2849 Not sure if webkit still differs</blockquote></mx-reply>Iirc not all browsers offer the IDL attributes for the event listeners either. Which I believe has actively caused issues in Preact. (https://github.com/preactjs/preact/issues/4314)","m.relates_to":{"m.in_reply_to":{"event_id":"$7jbHiCqqQxgF9mqrshzouGaO1NGsQ_44b3xohuLyT-k"}},"msgtype":"m.text"},"ts":1728580904505,"senderName":"Luke Warlow","senderId":"@lwarlow:igalia.com","id":"$0jaSyjz0x00QzsJo9QVkH1E518S1fkiXbDeUH92xMBw"},
{"content":{"body":"ah, Gecko doesn't have event handlers. And webkit has some unusual kinds of event handlers, https://searchfox.org/wubkat/rev/1146c56cb9208244b769da6dc2b7b708a8c4fb5b/Source/WebCore/dom/Element.idl#77-78","m.mentions":{},"msgtype":"m.text"},"ts":1728581033664,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$pTTt2dcaxcAUO0clw-aNl3yLq4TC_Hkd-_gRGVg1e3A"}
]