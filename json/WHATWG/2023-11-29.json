[
{"content":{"body":"Domenic: looking at a script's \"base URL\", is there any use for it in classic scripts? seems like it's only used for modules","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">Domenic</a>: looking at a script's \"base URL\", is there any use for it in classic scripts? seems like it's only used for modules","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"msgtype":"m.text"},"ts":1701251783608,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$6L2Tymyd08UfV4E0bp7rFEXFMJq8uMEcHaxq7euNO6g"},
{"content":{"body":"Noam Rosenthal: dynamic imports maybe?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: dynamic imports maybe?","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1701252384486,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$l_8pZIFz2A2denWS8gHXokcRD1jLOWkyrDsmyBurIWk"},
{"content":{"body":"nicolo-ribaudo: while looking at that I noticed HTML still references (but doesn't use) FinishDynamicImport; could that be due to your refactoring work?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@nicolo-ribaudo:matrix.org\">nicolo-ribaudo</a>: while looking at that I noticed HTML still references (but doesn't use) FinishDynamicImport; could that be due to your refactoring work?","m.mentions":{"user_ids":["@nicolo-ribaudo:matrix.org"]},"msgtype":"m.text"},"ts":1701252440910,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$Sb8BuYeg6NUgq8ZaMAYC0dp8xrnMNPUwmGJR4y8ZDW8"},
{"content":{"body":"> <@annevk:matrix.org> nicolo-ribaudo: while looking at that I noticed HTML still references (but doesn't use) FinishDynamicImport; could that be due to your refactoring work?\n\nOh I'll take a look, I probably just forgot to remove it","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$Sb8BuYeg6NUgq8ZaMAYC0dp8xrnMNPUwmGJR4y8ZDW8?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:matrix.org\">@annevk:matrix.org</a><br /><a href=\"https://matrix.to/#/@nicolo-ribaudo:matrix.org\">nicolo-ribaudo</a>: while looking at that I noticed HTML still references (but doesn't use) FinishDynamicImport; could that be due to your refactoring work?</blockquote></mx-reply>Oh I'll take a look, I probably just forgot to remove it","m.relates_to":{"m.in_reply_to":{"event_id":"$Sb8BuYeg6NUgq8ZaMAYC0dp8xrnMNPUwmGJR4y8ZDW8"}},"msgtype":"m.text"},"ts":1701252494575,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$HjzsH8uxssO1vUF9bZNnAGP8z3rBQuK7kXBQzAy_jUg"},
{"content":{"body":"annevk: dynamic imports are possible in classic scripts?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: dynamic imports are possible in classic scripts?","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1701252513277,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$M7X9fc5xot5Aw8bIYcTZ2Gto-EEYIaNdM4TPoDc_zho"},
{"content":{"body":"Noam Rosenthal: http://software.hixie.ch/utilities/js/live-dom-viewer/?%3Cscript%3E%0Aimport(%22.%2Fscript%22).then(w%2C%20w)%0A%3C%2Fscript%3E","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: http://software.hixie.ch/utilities/js/live-dom-viewer/?%3Cscript%3E%0Aimport(%22.%2Fscript%22).then(w%2C%20w)%0A%3C%2Fscript%3E","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1701252620582,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$otl4CcuLqPgQxh-y8H2cpH-qn603tiykFf9Y9-2VF2U"},
{"content":{"body":"ok TIL","m.mentions":{},"msgtype":"m.text"},"ts":1701252747507,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$Z4Mwds6fQD5nUpsKw94OrNL2o3zwgwJbkdgONL2i0cA"},
{"content":{"body":"Luca Casonato: unless you tell me otherwise I'm not gonna ask for a Deno issue for https://github.com/whatwg/fetch/pull/1655","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@lucacasonato:matrix.org\">Luca Casonato</a>: unless you tell me otherwise I'm not gonna ask for a Deno issue for https://github.com/whatwg/fetch/pull/1655","m.mentions":{"user_ids":["@lucacasonato:matrix.org"]},"msgtype":"m.text"},"ts":1701255376050,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$8oOGd3NuqEJDIVvToSEfPzCUrLwDNu5nnhMtG9zYXm4"},
{"content":{"body":"Yeah, it's not relevant. Thanks :)","m.mentions":{},"msgtype":"m.text"},"ts":1701257941507,"senderName":"Luca Casonato","senderId":"@lucacasonato:matrix.org","id":"$kCmrDyN9FusxkTgCAsNdF-SPlmafk2Tyyyd7kIlTTCY"},
{"content":{"body":" * Yeah, it's not relevant.","m.mentions":{},"m.new_content":{"body":"Yeah, it's not relevant.","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$kCmrDyN9FusxkTgCAsNdF-SPlmafk2Tyyyd7kIlTTCY","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1701257945830,"senderName":"Luca Casonato","senderId":"@lucacasonato:matrix.org","id":"$8yfzFCwRDUVrEHmEYoz5RlnKKHLBmrGoZCBhW9LGnyc"},
{"content":{"body":"Just let us know when you at deno are ready to start rendering documents :)","m.mentions":{},"msgtype":"m.text"},"ts":1701263120883,"senderName":"freddy","senderId":"@fbraun:mozilla.org","id":"$tJwLvHvN5JG2hgh57GGOLruZILjh-TZKXkjGm4Pw4d8"},
{"content":{"body":"Do we have any principles/prior art about hiding things related to CORS cross-origin (opaque) scripts? I know about hiding their base URL and muting errors","msgtype":"m.text"},"ts":1701264146515,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$9FGGX-2KAnJ8qnLFG7WJRN5RjoJKbaG1M5sge07N35Q"},
{"content":{"body":"Noam Rosenthal: as much as we can?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@noamr:matrix.org\">Noam Rosenthal</a>: as much as we can?","m.mentions":{"user_ids":["@noamr:matrix.org"]},"msgtype":"m.text"},"ts":1701264357694,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$JjsPbXXTdmyYes0NCp7z0NYcJQXmwEE8bo4GjnOu8cQ"},
{"content":{"body":"@annevk Thinking if itâ€™s safe to expose that they took a lot of time in timing APIs, seems like everything you do in them is quite observable anyway","msgtype":"m.text"},"ts":1701264404379,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$ifG5eLdqMey-F_BKjb7ifZCW-FQWfF6aupHgRQZDPVI"},
{"content":{"body":"You could check the current time in a script before and a script after. Would timing APIs for scripts expose other/new information?","m.mentions":{},"msgtype":"m.text"},"ts":1701264614399,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$oUQN58lxxy-eqg6p5ce7QMQxwkoUviLbw2ecwAG68vk"},
{"content":{"body":"zcorpan: we expose time after parse and before execution. I don't mind omitting that for opaque scripts","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a>: we expose time after parse and before execution. I don't mind omitting that for opaque scripts","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"msgtype":"m.text"},"ts":1701264734878,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$XC1uSYhrv_KwwHH-bM1AgMgm74N6Mqpqy9IyTm0Zuk8"},
{"content":{"body":"@zcorpan: but my bigger doubt is about the source URL of callbacks that take a long time. The problem is that once a callbacks goes into the JS engine soup it doesn't know anymore if it came from an opaque script. the alternative would be to either mark all JS functions with that info or stop reporting source URLs at all for a document that saw an opaque script","m.mentions":{},"msgtype":"m.text"},"ts":1701264785757,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$9XbTgN7qf7mLRBl2iPTzAcjHQMgi7fcQKLUkbAxDhTw"},
{"content":{"body":" * @zcorpan: but my bigger doubt is about exposing the source URL of callbacks that take a long time. The problem is that once a callbacks goes into the JS engine soup it doesn't know anymore if it came from an opaque script. the alternative would be to either mark all JS functions with that info or stop reporting source URLs at all for a document that saw an opaque script","m.mentions":{},"m.new_content":{"body":"@zcorpan: but my bigger doubt is about exposing the source URL of callbacks that take a long time. The problem is that once a callbacks goes into the JS engine soup it doesn't know anymore if it came from an opaque script. the alternative would be to either mark all JS functions with that info or stop reporting source URLs at all for a document that saw an opaque script","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$9XbTgN7qf7mLRBl2iPTzAcjHQMgi7fcQKLUkbAxDhTw","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1701264799769,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$CqvpV9tFxpXLhbIhaUAAZvSRw9bOv1ZvIc4SJQKwygI"},
{"content":{"body":"Right, I think the original reason to mute errors was to avoid exposing information from loading content that wasn't a script as a script (and thus would fail to parse and invoke window.onerror)","m.mentions":{},"msgtype":"m.text"},"ts":1701265009799,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$GDB29tlx2XiQuK-Qe5FJNpKaBm7raBGJfcnOt5_HVSs"},
{"content":{"body":"scripts have a \"muted errors\" flag, maybe you can use that to hide URLs","m.mentions":{},"msgtype":"m.text"},"ts":1701265136561,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$0Y-REDMNmmktVBf4Pg_5PXfyf7NRDBBB_P3sYAGUFEA"},
{"content":{"body":"the mechanics of the spec are less of a problem","m.mentions":{},"msgtype":"m.text"},"ts":1701265154016,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$fUGMSQloKkBd6rld4XFnge914e7nYUDfSBbBDhuXmyA"},
{"content":{"body":"Does a particular callable have a spec way to link it back to a \"[=script=]\" in the spec?","m.mentions":{},"msgtype":"m.text"},"ts":1701265196202,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$ipP9OC8VKUjv5dQwsqZy80HUDzwtOMKCTOFFJjujF6E"},
{"content":{"body":" * Does a particular callable have a spec way to link it back to a `[=script=]` in the spec?","format":"org.matrix.custom.html","formatted_body":" * Does a particular callable have a spec way to link it back to a <code>[=script=]</code> in the spec?","m.mentions":{},"m.new_content":{"body":"Does a particular callable have a spec way to link it back to a `[=script=]` in the spec?","format":"org.matrix.custom.html","formatted_body":"Does a particular callable have a spec way to link it back to a <code>[=script=]</code> in the spec?","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$ipP9OC8VKUjv5dQwsqZy80HUDzwtOMKCTOFFJjujF6E","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1701265210103,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$GfJoGlKz9Y8mJ9AtQzovNROP5Z4PYaoeNABufZSBLHI"},
{"content":{"body":"(I'll try to look it up myself if no one knows this off the top of their head)","m.mentions":{},"msgtype":"m.text"},"ts":1701265257940,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$-ZiGmUsczGhtNFIjmwQchCZoJEiO7OdDgtCaXpyBk5g"},
{"content":{"body":"I don't know but https://html.spec.whatwg.org/#report-the-exception references \"the relevant script\" for exceptions","m.mentions":{},"msgtype":"m.text"},"ts":1701265313153,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$MsFSETZbqiyIaKLlaHaOUrlMj5wmaoBcopXNrCBxCuE"},
{"content":{"body":"The relevant issue would be https://github.com/whatwg/html/issues/958","m.mentions":{},"msgtype":"m.text"},"ts":1701265351872,"senderName":"zcorpan","senderId":"@zcorpan:mozilla.org","id":"$fd2QAe68tE9TnEggBtEpI7A69efxCyreaDi6Cfex_uQ"},
{"content":{"body":"I guess \"active script\" will do it https://html.spec.whatwg.org/multipage/webappapis.html#active-script","m.mentions":{},"msgtype":"m.text"},"ts":1701265393902,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$BhTmtrqWZeYIWyPUZGjjdjcft-WPvcA7L4glQfUdKlw"},
{"content":{"body":"thanks zcorpan I'll take a look","format":"org.matrix.custom.html","formatted_body":"thanks <a href=\"https://matrix.to/#/@zcorpan:mozilla.org\">zcorpan</a> I'll take a look","m.mentions":{"user_ids":["@zcorpan:mozilla.org"]},"msgtype":"m.text"},"ts":1701265454170,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$f5CHKscAXYsOFYJ3sU7DbK-6Jy--JjKTgUuChrSWbyk"}
]