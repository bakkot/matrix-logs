[
{"content":{"body":"> <@akaster:serenityos.org> hm. maybe our patch to add that was in error anyway. doesn't fail any of our local tests to remove it 😅\n\nDid you see the big red box saying that there are lots of problems with the DOMParser / XMLSerializer specs? This one reminds me of one of them... https://github.com/w3c/DOM-Parsing/issues","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$TOQLleSwHwQkFRek_gmxvw-Q7he0P5qOWdZZMBreAGA?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@akaster:serenityos.org\">@akaster:serenityos.org</a><br>hm. maybe our patch to add that was in error anyway. doesn&#39;t fail any of our local tests to remove it 😅</blockquote></mx-reply>Did you see the big red box saying that there are lots of problems with the DOMParser / XMLSerializer specs? This one reminds me of one of them... https://github.com/w3c/DOM-Parsing/issues","m.mentions":{"user_ids":["@akaster:serenityos.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$TOQLleSwHwQkFRek_gmxvw-Q7he0P5qOWdZZMBreAGA"}},"msgtype":"m.text"},"ts":1732591565791,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$Dcw-ia5oFTI6r1br0uNDmZleMEnpFjeTYXkvCl9X3bQ"},
{"content":{"body":"None of the other engines produce a result with the xml ns applied. We just slapped that into our XML document parser while referencing https://html.spec.whatwg.org/multipage/infrastructure.html#xml","m.mentions":{},"msgtype":"m.text"},"ts":1732591781695,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$UgWJUSLhqJT239-1uhEnBp3lTMGNjG8_8BYGPcC_4a0"},
{"content":{"body":"/     To ease migration from HTML to XML, user agents conforming to this specification will place elements in HTML\n//     in the http://www.w3.org/1999/xhtml namespace, at least for the purposes of the DOM and CSS.\n//     The term \"HTML elements\" refers to any element in that namespace, even in XML documents.\n\nBasically asserting that the spec is telling us \"any element placed in any XML or HTML document shall have the xhtml namespace\"","m.mentions":{},"msgtype":"m.text"},"ts":1732591843674,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$LZzFvye3GxzXV6z6NfWu_7t_2WluDI9vZ_O-0iaYR8A"},
{"content":{"body":"which seems... unlikely to be the desired effect","m.mentions":{},"msgtype":"m.text"},"ts":1732591850688,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$Yh3gL1JW_kAhqsJkoMqXWrYCdl1zUUAJ61b0bc-EbH4"},
{"content":{"body":"There's a PR reverting that behavior that causes us to now pass https://github.com/web-platform-tests/wpt/blob/24c2e5fb6c/domparsing/XMLSerializer-serializeToString.html#L34 🤷‍♂️","m.mentions":{},"msgtype":"m.text"},"ts":1732592061311,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$OV7mXRJy1Fl9XMVLXjwuF7x6GkmfQL8D_HpWWx5PjJ0"},
{"content":{"body":"https://github.com/LadybirdBrowser/ladybird/pull/2579/files#diff-607aaf214af29d5eaa606d04c2e53b4a0e931f713843fd158cf1f47a6f84d2cbL95","m.mentions":{},"msgtype":"m.text"},"ts":1732592137424,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$FwMQjAbjGEAqhstZUkrTzh_uRYwkOmkD-iRjfSlwN4A"},
{"content":{"body":"Oh I guess I missed this part on my read-through: \"An XML parser, for the purposes of this specification, is a construct that follows the rules given in XML to map a string of bytes or characters into a Document object. NOTE: At the time of writing, no such rules actually exist\"\n\n... I guess we're purely in \"wing it and run the tests\" territory","m.mentions":{},"msgtype":"m.text"},"ts":1732593039100,"senderName":"akaster","senderId":"@akaster:serenityos.org","id":"$ZZs6Naaoyp4WOopRRZ523pQu7SduIWp_OFNq-UwBrn8"},
{"content":{"body":"> <@akaster:serenityos.org> /     To ease migration from HTML to XML, user agents conforming to this specification will place elements in HTML\n> //     in the http://www.w3.org/1999/xhtml namespace, at least for the purposes of the DOM and CSS.\n> //     The term \"HTML elements\" refers to any element in that namespace, even in XML documents.\n> \n> Basically asserting that the spec is telling us \"any element placed in any XML or HTML document shall have the xhtml namespace\"\n\nYeah that is not saying what you're thinking. That's just saying \"we recognize that XML namespaces are, unfortunately, part of the web. Therefore, instead of completely ignoring them, https://html.spec.whatwg.org/#insert-an-html-element uses the XHTML namespace.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$LZzFvye3GxzXV6z6NfWu_7t_2WluDI9vZ_O-0iaYR8A?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@akaster:serenityos.org\">@akaster:serenityos.org</a><br>/     To ease migration from HTML to XML, user agents conforming to this specification will place elements in HTML<br/>//     in the http://www.w3.org/1999/xhtml namespace, at least for the purposes of the DOM and CSS.<br/>//     The term &quot;HTML elements&quot; refers to any element in that namespace, even in XML documents.<br/><br/>Basically asserting that the spec is telling us &quot;any element placed in any XML or HTML document shall have the xhtml namespace&quot;</blockquote></mx-reply>Yeah that is not saying what you're thinking. That's just saying \"we recognize that XML namespaces are, unfortunately, part of the web. Therefore, instead of completely ignoring them, https://html.spec.whatwg.org/#insert-an-html-element uses the XHTML namespace.","m.mentions":{"user_ids":["@akaster:serenityos.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$LZzFvye3GxzXV6z6NfWu_7t_2WluDI9vZ_O-0iaYR8A"}},"msgtype":"m.text"},"ts":1732595549472,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$0xHKoVKGHCozTkEKojFCZWSMSENxfskvqhZrkcsUU7M"},
{"content":{"body":"You can kind of tell that because it says \"will place\" instead of \"must place\", it means \"there's a normative requirement somewhere else\".","m.mentions":{},"msgtype":"m.text"},"ts":1732595594253,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$GKqvVz0dMKNXtIoX5ofguC6RmvZ8Pkh-LsN9lweufEE"},
{"content":{"body":"keithamus: https://github.com/whatwg/html/pull/9841 still has a number of (hidden) unresolved conversations","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@keithamus:matrix.org\">keithamus</a>: https://github.com/whatwg/html/pull/9841 still has a number of (hidden) unresolved conversations","m.mentions":{"user_ids":["@keithamus:matrix.org"]},"msgtype":"m.text"},"ts":1732614902293,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$nEpXAuAHO5timzi7RDXNpqYQmG3HZaZetNLvV1cbytU"},
{"content":{"body":"annevk: I've resolved a couple that I believe are outdated (namely one around linking \"no state\", an outdated one about the table enumeration, and one around event retargeting which I feel I addressed but didn't get a response on).\n","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: I've resolved a couple that I believe are outdated (namely one around linking \"no state\", an outdated one about the table enumeration, and one around event retargeting which I feel I addressed but didn't get a response on).","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1732615283995,"senderName":"keithamus","senderId":"@keithamus:matrix.org","id":"$V0yqOG0dnWikNdKNNUIV7_FqZJGgw352Ss_T402_31w"},
{"content":{"body":"That means a few are left:\n\n - Two comments from you about the retargeting, which we discussed yesterday (https://github.com/whatwg/html/pull/9841#discussion_r1732959104, https://github.com/whatwg/html/pull/9841#discussion_r1834134022). \n - A comment about the `--` vs `-` (https://github.com/whatwg/html/pull/9841#discussion_r1834121434).\n - A comment from you about `DOMString` vs `DOMString` (https://github.com/whatwg/html/pull/9841#discussion_r1834130209).\n\nIs that all of them or am I missing some?","format":"org.matrix.custom.html","formatted_body":"<p>That means a few are left:</p>\n<ul>\n<li>Two comments from you about the retargeting, which we discussed yesterday (https://github.com/whatwg/html/pull/9841#discussion_r1732959104, https://github.com/whatwg/html/pull/9841#discussion_r1834134022).</li>\n<li>A comment about the <code>--</code> vs <code>-</code> (https://github.com/whatwg/html/pull/9841#discussion_r1834121434).</li>\n<li>A comment from you about <code>DOMString</code> vs <code>DOMString</code> (https://github.com/whatwg/html/pull/9841#discussion_r1834130209).</li>\n</ul>\n<p>Is that all of them or am I missing some?</p>\n","m.mentions":{},"msgtype":"m.text"},"ts":1732615329177,"senderName":"keithamus","senderId":"@keithamus:matrix.org","id":"$aeqaOxCsu2yavnBe3VBhWH6dcVJIp0eKk4wpieiuBk4"},
{"content":{"body":"annevk: I just resolved all but the `--` vs `-` one, as I think they're addressed with the changes from yesterday. I _think_ the `--` vs `-` one is resolved, certainly feedback from OpenUI folks landed on `--` as an ergonomic preference. ","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: I just resolved all but the <code>--</code> vs <code>-</code> one, as I think they're addressed with the changes from yesterday. I <em>think</em> the <code>--</code> vs <code>-</code> one is resolved, certainly feedback from OpenUI folks landed on <code>--</code> as an ergonomic preference.","m.mentions":{"user_ids":["@annevk:matrix.org"]},"msgtype":"m.text"},"ts":1732615560674,"senderName":"keithamus","senderId":"@keithamus:matrix.org","id":"$q_DJAj4mjoljox_gl4VEYqg-XmuFBd6RVnyKwfxaz5I"},
{"content":{"body":"In fact I'll resolve that too as you say in the comment you don't feel strongly and that we can relax it later if we see a need. I'd like to go ahead with `--` considering the feedback from OpenUI.","format":"org.matrix.custom.html","formatted_body":"In fact I'll resolve that too as you say in the comment you don't feel strongly and that we can relax it later if we see a need. I'd like to go ahead with <code>--</code> considering the feedback from OpenUI.","m.mentions":{},"msgtype":"m.text"},"ts":1732615626176,"senderName":"keithamus","senderId":"@keithamus:matrix.org","id":"$Q8nIFWoNFAlw7_rDVzzTVRkc0Mra7IcZXb2a9kAa6vo"},
{"content":{"body":"keithamus: I've seen more. It also seems the latest rebase wasn't proofread. There are concerning rebase artifacts in the commit.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@keithamus:matrix.org\">keithamus</a>: I've seen more. It also seems the latest rebase wasn't proofread. There are concerning rebase artifacts in the commit.","m.mentions":{"user_ids":["@keithamus:matrix.org"]},"msgtype":"m.text"},"ts":1732616513584,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$0rBDd_i8ryQ6f9ZcP7q6-27ztXcs6eHk57XExqoynA4"},
{"content":{"body":":( ","m.mentions":{},"msgtype":"m.text"},"ts":1732616523735,"senderName":"keithamus","senderId":"@keithamus:matrix.org","id":"$uHXPi1Cc3BfpY_1EeWp0FtMbdPbY2LAX4Ee97b12kjM"},
{"content":{"body":"I prefer 10AM this thursday because next week it conflicts with TC39, but I can adapt","m.mentions":{},"m.relates_to":{"event_id":"$WN9egdyVbfQzk2MZDFjOCG6sUHS-kPajee54nKw6n_g","is_falling_back":true,"m.in_reply_to":{"event_id":"$WN9egdyVbfQzk2MZDFjOCG6sUHS-kPajee54nKw6n_g"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1732616921763,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$HNMfRy4iIcgFIMLfmNyrVBy7-7ohh49IwZcEk7bioRU"},
{"content":{"body":" * annevk Ms2ger 🇧🇪 \nI prefer 10AM this Thursday because next week it conflicts with TC39, but I can adapt","format":"org.matrix.custom.html","formatted_body":" * <a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a> <a href=\"https://matrix.to/#/@ms2ger:igalia.com\">Ms2ger 🇧🇪</a><br>I prefer 10AM this Thursday because next week it conflicts with TC39, but I can adapt","m.mentions":{"user_ids":["@annevk:matrix.org","@ms2ger:igalia.com"]},"m.new_content":{"body":"annevk Ms2ger 🇧🇪 \nI prefer 10AM this Thursday because next week it conflicts with TC39, but I can adapt","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a> <a href=\"https://matrix.to/#/@ms2ger:igalia.com\">Ms2ger 🇧🇪</a><br>I prefer 10AM this Thursday because next week it conflicts with TC39, but I can adapt","m.mentions":{"user_ids":["@annevk:matrix.org","@ms2ger:igalia.com"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$HNMfRy4iIcgFIMLfmNyrVBy7-7ohh49IwZcEk7bioRU","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1732616952410,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$gAdMrOPp5goNaSeMff0THPnlBRaTmObgdMgPzRC3pHc"},
{"content":{"body":"akaster: when you parse XML and there's no namespace, you can't infer a namespace, not during parsing or serialization","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@akaster:serenityos.org\">akaster</a>: when you parse XML and there's no namespace, you can't infer a namespace, not during parsing or serialization","m.mentions":{"user_ids":["@akaster:serenityos.org"]},"msgtype":"m.text"},"ts":1732622052788,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$hBvv0DANUbJFVvshQ1vgwBwDc68UQX6GtJJ1tF4mfF4"},
{"content":{"body":"I wonder if there could be some useful APIs to detect memory leaks, or give hints to devs about problematic patterns (like anti-AsyncContext 😉 ). Just debugging a youtube leak where iframe's window adds an event listener to window.top, and then iframe is removed from DOM. ","m.mentions":{},"msgtype":"m.text"},"ts":1732632963503,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$-M1HVc_GISRedUxBAPOOrxdl9qYoIyWNiIrkfXxo99I"},
{"content":{"body":"We should just make it harder and harder for windows to reach each other without postMessage().","m.mentions":{},"msgtype":"m.text"},"ts":1732633067192,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$JY1j7aPTJ9B1Po9K1njQ4fsLQJRU4V_rTfbuLtVrruY"},
{"content":{"body":"that might be the best solution yes","m.mentions":{},"msgtype":"m.text"},"ts":1732633081575,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$JEJDeVX1xfHtBi6rwXNWOp2cZ3Xp3JJZF8ZSEVCCta8"},
{"content":{"body":"There are also other common leaks, like the one Element has atm, where it accidentally keeps large disconnected subtrees around because of some DOM event kept alive by JS, and event's *target points to that subtree.","m.mentions":{},"msgtype":"m.text"},"ts":1732633241018,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$jBecyiSqPQJU0m3BtQMfnhaCiHcnbVIZJ7aufrxeNXg"},
{"content":{"body":"> <@smaug:mozilla.org> I wonder if there could be some useful APIs to detect memory leaks, or give hints to devs about problematic patterns (like anti-AsyncContext 😉 ). Just debugging a youtube leak where iframe's window adds an event listener to window.top, and then iframe is removed from DOM.\n\nThe WebPerf WG might be the right place for this; perhaps <brainstorming> marking some interfaces in WebIDL as being \"short lived\" and having some way to report this to the timeline/reporting API if they're held for a long time","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$-M1HVc_GISRedUxBAPOOrxdl9qYoIyWNiIrkfXxo99I?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@smaug:mozilla.org\">@smaug:mozilla.org</a><br>I wonder if there could be some useful APIs to detect memory leaks, or give hints to devs about problematic patterns (like anti-AsyncContext 😉 ). Just debugging a youtube leak where iframe&#39;s window adds an event listener to window.top, and then iframe is removed from DOM. </blockquote></mx-reply>The WebPerf WG might be the right place for this; perhaps &lt;brainstorming&gt; marking some interfaces in WebIDL as being \"short lived\" and having some way to report this to the timeline/reporting API if they're held for a long time","m.mentions":{"user_ids":["@smaug:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$-M1HVc_GISRedUxBAPOOrxdl9qYoIyWNiIrkfXxo99I"}},"msgtype":"m.text"},"ts":1732633869260,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$hlFtEl7W3WUlwk8_BGbGQFB0Xioe75aOZhMOM9Y4mFQ"},
{"content":{"body":"> <@smaug:mozilla.org> I wonder if there could be some useful APIs to detect memory leaks, or give hints to devs about problematic patterns (like anti-AsyncContext 😉 ). Just debugging a youtube leak where iframe's window adds an event listener to window.top, and then iframe is removed from DOM.\n\n * The WebPerf WG might be an interesting place to incubate this; perhaps \\<brainstorming> marking some interfaces in WebIDL as being \"short lived\" and having some way to report this to the timeline/reporting API if they're held for a long time","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!AGetWbsMpFPdSgUrbs:matrix.org/$-M1HVc_GISRedUxBAPOOrxdl9qYoIyWNiIrkfXxo99I?via=matrix.org&amp;via=mozilla.org&amp;via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@smaug:mozilla.org\">@smaug:mozilla.org</a><br>I wonder if there could be some useful APIs to detect memory leaks, or give hints to devs about problematic patterns (like anti-AsyncContext 😉 ). Just debugging a youtube leak where iframe's window adds an event listener to window.top, and then iframe is removed from DOM. </blockquote></mx-reply> * The WebPerf WG might be an interesting place to incubate this; perhaps &lt;brainstorming&gt; marking some interfaces in WebIDL as being \"short lived\" and having some way to report this to the timeline/reporting API if they're held for a long time","m.mentions":{},"m.new_content":{"body":"The WebPerf WG might be an interesting place to incubate this; perhaps \\<brainstorming> marking some interfaces in WebIDL as being \"short lived\" and having some way to report this to the timeline/reporting API if they're held for a long time","format":"org.matrix.custom.html","formatted_body":"The WebPerf WG might be an interesting place to incubate this; perhaps &lt;brainstorming&gt; marking some interfaces in WebIDL as being \"short lived\" and having some way to report this to the timeline/reporting API if they're held for a long time","m.mentions":{"user_ids":["@smaug:mozilla.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$hlFtEl7W3WUlwk8_BGbGQFB0Xioe75aOZhMOM9Y4mFQ","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1732633893840,"senderName":"Noam Rosenthal","senderId":"@noamr:matrix.org","id":"$YrDTJmZuwkOGs0dHRueGjP-4NaWYLQYDuR4nY71s6vA"},
{"content":{"body":"(\"short lived\" smells like the annotation Gecko has ProbablyShortLivingWrapper 😉 though that is a GC optimization )","m.mentions":{},"msgtype":"m.text"},"ts":1732633975186,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$1eRLfwifVnkc5VAeX3yj_VWDQDyKryKOLfIiDfb3crw"},
{"content":{"body":" * (\"short lived\" smells like the webidl annotation Gecko has ProbablyShortLivingWrapper 😉 though that is a GC optimization )","m.mentions":{},"m.new_content":{"body":"(\"short lived\" smells like the webidl annotation Gecko has ProbablyShortLivingWrapper 😉 though that is a GC optimization )","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$1eRLfwifVnkc5VAeX3yj_VWDQDyKryKOLfIiDfb3crw","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1732633987014,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$JZ7wwnbFauodhTE_aO1N5kH_xvwMf4sdPAlYqRJ9nuA"},
{"content":{"body":" * (\"short lived\" sounds like the webidl annotation Gecko has ProbablyShortLivingWrapper 😉 though that is a GC optimization )","m.mentions":{},"m.new_content":{"body":"(\"short lived\" sounds like the webidl annotation Gecko has ProbablyShortLivingWrapper 😉 though that is a GC optimization )","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$1eRLfwifVnkc5VAeX3yj_VWDQDyKryKOLfIiDfb3crw","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1732634004212,"senderName":"smaug","senderId":"@smaug:mozilla.org","id":"$Lpr9-3VkkbB8XITYRKyKopKZQD8knIsGWqfEVF3LctE"},
{"content":{"body":"annevk: Panos Astithas would that work as well?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@annevk:matrix.org\">annevk</a>: <a href=\"https://matrix.to/#/@pastith:matrix.org\">Panos Astithas</a> would that work as well?","m.mentions":{"user_ids":["@annevk:matrix.org","@pastith:matrix.org"]},"m.relates_to":{"event_id":"$WN9egdyVbfQzk2MZDFjOCG6sUHS-kPajee54nKw6n_g","is_falling_back":true,"m.in_reply_to":{"event_id":"$HNMfRy4iIcgFIMLfmNyrVBy7-7ohh49IwZcEk7bioRU"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1732635712268,"senderName":"Ms2ger 🇧🇪","senderId":"@ms2ger:igalia.com","id":"$PknQEhGqRg8ZMIv7Nulb2fQlYsDGAMEe8OjQ6JdlsMM"}
]