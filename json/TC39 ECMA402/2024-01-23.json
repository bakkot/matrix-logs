[
{"content":{"body":"should it be possible to observe the change of system default locale over the course of a single program execution?","m.mentions":{},"msgtype":"m.text"},"ts":1706035281700,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$zN6OHEy7YudmB4Y6yFMPfa0NpAAvCYrnjVlytosYrMw"},
{"content":{"body":"I don't see any constraint on deterministic behaviour of https://tc39.es/ecma402/#sec-defaultlocale","m.mentions":{},"msgtype":"m.text"},"ts":1706035291063,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$utW_WHhEIcSODJHC3Ka4HzZQjbb3N5fhKr9bC15uzHs"},
{"content":{"body":"> <@michaelficarra:matrix.org> should it be possible to observe the change of system default locale over the course of a single program execution?\n\nI don't believe so","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!pGTjbcoTUqwfzHcRaW:matrix.org/$zN6OHEy7YudmB4Y6yFMPfa0NpAAvCYrnjVlytosYrMw?via=igalia.com&via=matrix.org&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@michaelficarra:matrix.org\">@michaelficarra:matrix.org</a><br />should it be possible to observe the change of system default locale over the course of a single program execution?</blockquote></mx-reply>I don't believe so","m.relates_to":{"m.in_reply_to":{"event_id":"$zN6OHEy7YudmB4Y6yFMPfa0NpAAvCYrnjVlytosYrMw"}},"msgtype":"m.text"},"ts":1706036131803,"senderName":"ryzokuken","senderId":"@usharma:igalia.com","id":"$2doYBsZoF7n2c0Qk6gmDcEzzEJHDa32zDpgPGfyt_84"},
{"content":{"body":"ryzokuken: where is that constraint expressed?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@usharma:igalia.com\">ryzokuken</a>: where is that constraint expressed?","m.mentions":{"user_ids":["@usharma:igalia.com"]},"msgtype":"m.text"},"ts":1706036152530,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$m6AVM5gPxyO-TYzHp1YJvgs76sjYPJmhK8rVf85lIX0"},
{"content":{"body":"right, there are no constraints and the specification text is analogous to that of [SystemTimeZoneIdentifier](https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-systemtimezoneidentifier). I'd expect most if not all implementations to reflect changes.","format":"org.matrix.custom.html","formatted_body":"right, there are no constraints and the specification text is analogous to that of <a href=\"https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-systemtimezoneidentifier\">SystemTimeZoneIdentifier</a>. I'd expect most if not all implementations to reflect changes.","m.mentions":{},"msgtype":"m.text"},"ts":1706036162882,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$5XuFVueqcEDkrnZaqhFMVIlnJ0G_ZzXd_JCmMx7Hhcw"},
{"content":{"body":"I think on the web platform side ","msgtype":"m.text"},"ts":1706036166892,"senderName":"ryzokuken","senderId":"@usharma:igalia.com","id":"$MgGnnV0gcTtjeeYnWfXBz5jgDwbotsl2GIXVbIjTAuQ"},
{"content":{"body":"There was this PR Frank wax working on to address that ","msgtype":"m.text"},"ts":1706036189691,"senderName":"ryzokuken","senderId":"@usharma:igalia.com","id":"$a8cdtNZ8zOiS-PV38Rl-kWunshFdC4wA6OyYmvJQkvA"},
{"content":{"body":"On the whatwg side if I remember correctly ","msgtype":"m.text"},"ts":1706036196852,"senderName":"ryzokuken","senderId":"@usharma:igalia.com","id":"$fFwYKzdMKyDCuPOJEdjAAZuWJ6EADjbCZqzVyS-NeM8"},
{"content":{"body":"Let me try to find it now ","msgtype":"m.text"},"ts":1706036202484,"senderName":"ryzokuken","senderId":"@usharma:igalia.com","id":"$SH5z5tVC0t-2GmcNJkG-eEE1Pd2gRYNPdQOSM3gqzEg"},
{"content":{"body":" * there are no constraints and the specification text is analogous to that of [SystemTimeZoneIdentifier](https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-systemtimezoneidentifier). I'd expect most if not all implementations to reflect changes.","format":"org.matrix.custom.html","formatted_body":" * there are no constraints and the specification text is analogous to that of <a href=\"https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-systemtimezoneidentifier\">SystemTimeZoneIdentifier</a>. I'd expect most if not all implementations to reflect changes.","m.mentions":{},"m.new_content":{"body":"there are no constraints and the specification text is analogous to that of [SystemTimeZoneIdentifier](https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-systemtimezoneidentifier). I'd expect most if not all implementations to reflect changes.","format":"org.matrix.custom.html","formatted_body":"there are no constraints and the specification text is analogous to that of <a href=\"https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-systemtimezoneidentifier\">SystemTimeZoneIdentifier</a>. I'd expect most if not all implementations to reflect changes.","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$5XuFVueqcEDkrnZaqhFMVIlnJ0G_ZzXd_JCmMx7Hhcw","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1706036206520,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$QdETNuj7yNootSs7BaGH44dUjDZFtAQ9K0cLbsU0vew"},
{"content":{"body":" * there are no constraints and the specification text is analogous to that of [SystemTimeZoneIdentifier](https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-systemtimezoneidentifier). I'd expect most if not all implementations to reflect changes (but they should not be required to do so).","format":"org.matrix.custom.html","formatted_body":" * there are no constraints and the specification text is analogous to that of <a href=\"https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-systemtimezoneidentifier\">SystemTimeZoneIdentifier</a>. I'd expect most if not all implementations to reflect changes (but they should not be required to do so).","m.mentions":{},"m.new_content":{"body":"there are no constraints and the specification text is analogous to that of [SystemTimeZoneIdentifier](https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-systemtimezoneidentifier). I'd expect most if not all implementations to reflect changes (but they should not be required to do so).","format":"org.matrix.custom.html","formatted_body":"there are no constraints and the specification text is analogous to that of <a href=\"https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-systemtimezoneidentifier\">SystemTimeZoneIdentifier</a>. I'd expect most if not all implementations to reflect changes (but they should not be required to do so).","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$5XuFVueqcEDkrnZaqhFMVIlnJ0G_ZzXd_JCmMx7Hhcw","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1706036234775,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$yDDayoiVvZGrfslTn9CoKPsWioejM1KfO8eDaAu6Ul0"},
{"content":{"body":"Frank was working on an ontimezonechange event. I recall discussion of a onlocalechange event but I'm not sure what came of that","m.mentions":{},"msgtype":"m.text"},"ts":1706036241219,"senderName":"sffc","senderId":"@sffc:mozilla.org","id":"$qy3pQCkquES6YX5pb2U9ymO8zPIAUlMcJm7jcDBuj_o"},
{"content":{"body":"It might not work for locale-change since it is intended to be consistent with the Accept-Language header","m.mentions":{},"msgtype":"m.text"},"ts":1706036270240,"senderName":"sffc","senderId":"@sffc:mozilla.org","id":"$cTiDKabc5eUUUWP8zNQcN5FYhF5Hae9tVhAcRXiXmiQ"},
{"content":{"body":"> <@sffc:mozilla.org> Frank was working on an ontimezonechange event. I recall discussion of a onlocalechange event but I'm not sure what came of that\n\nIt was discussed but I don't remember it moving forward, there was something it was blocked on","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!pGTjbcoTUqwfzHcRaW:matrix.org/$qy3pQCkquES6YX5pb2U9ymO8zPIAUlMcJm7jcDBuj_o?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@sffc:mozilla.org\">@sffc:mozilla.org</a><br>Frank was working on an ontimezonechange event. I recall discussion of a onlocalechange event but I&#39;m not sure what came of that</blockquote></mx-reply>It was discussed but I don't remember it moving forward, there was something it was blocked on","m.mentions":{"user_ids":["@sffc:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$qy3pQCkquES6YX5pb2U9ymO8zPIAUlMcJm7jcDBuj_o"}},"msgtype":"m.text"},"ts":1706036322567,"senderName":"ryzokuken","senderId":"@usharma:igalia.com","id":"$jtTkDJiKKMnil_clcOlNsYRfJfaUbjcJSNfLF1Am2eM"},
{"content":{"body":"okay so it sounds like it's not a JS constraint but a web constraint because of that header consistency","m.mentions":{},"msgtype":"m.text"},"ts":1706036413331,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$f8Dy28Lr8pI1iqyLiPUyLscpcdUnq47yg3KYvQQ90_s"},
{"content":{"body":"HTML has an event for observing the locale change (but I'm not sure if that's plumbed through to being the same as Intl's locale, necessarily). Last I heard, only Firefox ever fired it.","m.mentions":{},"msgtype":"m.text"},"ts":1706040755182,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$aiU6iMD1-IlgNYhyyU2AylqTevfyzCKspW3gbPI8eL8"},
{"content":{"body":"the header, then, only indicates the locale at the time of the request","m.mentions":{},"msgtype":"m.text"},"ts":1706040768056,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$4CjqA3K2I_bl5Hgkf2JNFh3Osdt_lc2yONQmqVrwDRk"},
{"content":{"body":"I think this is a hole we should fill--we should develop a clear model, shared by JS and HTML, of whether the locale can change, and make sure it's noted in both places and appropriate APIs exist (or don't exist)","m.mentions":{},"msgtype":"m.text"},"ts":1706040805006,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$KnNXjgOOXTiqozmpJNt05N-54EjfgerPzXOEbJuVC-M"},
{"content":{"body":"Mozilla people have raised the importance of live locale changing. We should figure out whether we want that to be part of our shared model *as it relates to the default locale* or whether it should just be an application-level thing.","format":"org.matrix.custom.html","formatted_body":"Mozilla people have raised the importance of live locale changing. We should figure out whether we want that to be part of our shared model <em>as it relates to the default locale</em> or whether it should just be an application-level thing.","m.mentions":{},"msgtype":"m.text"},"ts":1706040846853,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$KdDKLyPEs5d6NrvxILKpRxcbKnJfFzq6KQgjibmDO88"}
]