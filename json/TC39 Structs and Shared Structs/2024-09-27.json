[
{"content":{"body":"i'm confused, so it'd be an object but `Object.getOwnPropertyDescriptor` could *ever* throw on it? that's breaking an existing invariant.","format":"org.matrix.custom.html","formatted_body":"i'm confused, so it'd be an object but <code>Object.getOwnPropertyDescriptor</code> could <em>ever</em> throw on it? that's breaking an existing invariant.","m.mentions":{},"msgtype":"m.text"},"ts":1727395491606,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$NQwR_k65FcBH7MM8TmmcaItw2Om2dlZ-_vRk7oYbX8M"},
{"content":{"body":"Not really. `Object.getOwnPropertyDescriptor` on a `Proxy` can throw if they throw in the `getOwnPropertyDescriptor` trap.","format":"org.matrix.custom.html","formatted_body":"Not really. <code>Object.getOwnPropertyDescriptor</code> on a <code>Proxy</code> can throw if they throw in the <code>getOwnPropertyDescriptor</code> trap.","m.mentions":{},"msgtype":"m.text"},"ts":1727395539227,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$zttd1GXzkJ08ZuIGlkEq78oi5wEKDRXMCo1eY_Tb0Ww"},
{"content":{"body":"I still think that no value would be less surprising for existing usages, but throwing is technically legal (but I find that more exotic)","m.mentions":{},"msgtype":"m.text"},"ts":1727395633492,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$Luzq5mDZuJ9dbRusbJRAyysD0Eb4EZRgsZLClv_k_vA"},
{"content":{"body":"can't all MOPs throw because of Proxis","m.mentions":{},"msgtype":"m.text"},"ts":1727395741515,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$fieOxqB7Hd9mjG54UIKAV-gJw1Q0EuQh50OYWulrVOs"},
{"content":{"body":" * can't all MOPs throw because of Proxies","m.mentions":{},"m.new_content":{"body":"can't all MOPs throw because of Proxies","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$fieOxqB7Hd9mjG54UIKAV-gJw1Q0EuQh50OYWulrVOs","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1727395745205,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$Uy1-fTzINykFxQaKmg6JEXXtgbB4Nq7zHVyvhLfnp9I"},
{"content":{"body":"> <@mhofman:matrix.org> I still think that no value would be less surprising for existing usages, but throwing is technically legal (but I find that more exotic)\n\nlook man if you wanna propose to unship Proxies i'm on board!!","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!fmLqwwrfASaCrzNjAk:matrix.org/$Luzq5mDZuJ9dbRusbJRAyysD0Eb4EZRgsZLClv_k_vA?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@mhofman:matrix.org\">@mhofman:matrix.org</a><br>I still think that no value would be less surprising for existing usages, but throwing is technically legal (but I find that more exotic)</blockquote></mx-reply>look man if you wanna propose to unship Proxies i'm on board!!","m.mentions":{"user_ids":["@mhofman:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$Luzq5mDZuJ9dbRusbJRAyysD0Eb4EZRgsZLClv_k_vA"}},"msgtype":"m.text"},"ts":1727395999261,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$Kup6_G8M_T7FUTKY3EX5meiY1I9xj3T4fRojq_o7Nus"},
{"content":{"body":"Oh proxies are definitely opening a lot of can of worms I'd rather not be open","m.mentions":{},"msgtype":"m.text"},"ts":1727396115244,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$2FUBYUnAMVB73UzOS0HwqkL4iGXJZRAbNW9IqQJaOl8"},
{"content":{"body":"ok well then let’s please not repeat any of the horrific decisions Proxy made","msgtype":"m.text"},"ts":1727411255136,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$SfDBZTvCJMKpqvH2KjJYPM_-xPKBWem75GPe-fdBO3A"},
{"content":{"body":"don't unevaluated module namespaces throw in inconvenient places as well ","msgtype":"m.text"},"ts":1727447738118,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$UCSXBPxKBtg750I_refj5BDsD2Zu5vKiJ2SiHm1hKZg"},
{"content":{"body":"> <@devsnek:matrix.org> don't unevaluated module namespaces throw in inconvenient places as well\n\nOnly on [[Get]]","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!fmLqwwrfASaCrzNjAk:matrix.org/$UCSXBPxKBtg750I_refj5BDsD2Zu5vKiJ2SiHm1hKZg?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@devsnek:matrix.org\">@devsnek:matrix.org</a><br>don&#39;t unevaluated module namespaces throw in inconvenient places as well </blockquote></mx-reply>Only on [[Get]]","m.mentions":{"user_ids":["@devsnek:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$UCSXBPxKBtg750I_refj5BDsD2Zu5vKiJ2SiHm1hKZg"}},"msgtype":"m.text"},"ts":1727447862039,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$iCq8n42KMzc07iu9TkC7F0TfCpL76tAxwjU3s10RdXw"},
{"content":{"body":"> <@devsnek:matrix.org> don't unevaluated module namespaces throw in inconvenient places as well\n\n * Only on \\[\\[Get\\]\\] and [[Delete]]","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!fmLqwwrfASaCrzNjAk:matrix.org/$UCSXBPxKBtg750I_refj5BDsD2Zu5vKiJ2SiHm1hKZg?via=matrix.org&amp;via=mozilla.org&amp;via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@devsnek:matrix.org\">@devsnek:matrix.org</a><br>don't unevaluated module namespaces throw in inconvenient places as well </blockquote></mx-reply> * Only on [[Get]] and [[Delete]]","m.mentions":{},"m.new_content":{"body":"Only on \\[\\[Get\\]\\] and [[Delete]]","format":"org.matrix.custom.html","formatted_body":"Only on [[Get]] and [[Delete]]","m.mentions":{"user_ids":["@devsnek:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$iCq8n42KMzc07iu9TkC7F0TfCpL76tAxwjU3s10RdXw","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1727447872270,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$Wf6dAckimjh3F_JomeueqhTsH0rxW6Osfj2PyyvTcc8"},
{"content":{"body":" * Only on \\[\\[Get\\]\\]","format":"org.matrix.custom.html","formatted_body":" * Only on [[Get]]","m.mentions":{},"m.new_content":{"body":"Only on \\[\\[Get\\]\\]","format":"org.matrix.custom.html","formatted_body":"Only on [[Get]]","m.mentions":{"user_ids":["@devsnek:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$iCq8n42KMzc07iu9TkC7F0TfCpL76tAxwjU3s10RdXw","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1727447880216,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$CskXh0LjnY_WtQp7G0NL0wtpSKqPYXQtjJEon4IO8d8"},
{"content":{"body":"Which is annoying but like objects with getters","m.mentions":{},"msgtype":"m.text"},"ts":1727447889662,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$y0HxOc11jelOo9fIyQjUJP56-kub8mbk8utBmx9VbLI"},
{"content":{"body":" * Only on \\[\\[Get\\]\\] due to tdz","format":"org.matrix.custom.html","formatted_body":" * Only on [[Get]] due to tdz","m.mentions":{},"m.new_content":{"body":"Only on \\[\\[Get\\]\\] due to tdz","format":"org.matrix.custom.html","formatted_body":"Only on [[Get]] due to tdz","m.mentions":{"user_ids":["@devsnek:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$iCq8n42KMzc07iu9TkC7F0TfCpL76tAxwjU3s10RdXw","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1727447903455,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$TfRnNZBJfzn5L8Kh4f2SjyPX0LhkBXYgfij6gaHl9Ew"},
{"content":{"body":"but its GetOwnProperty calls Get","m.mentions":{},"msgtype":"m.text"},"ts":1727447971657,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$uxsXVQPsifvxvIK7KIv-zmodjA2EY4nw5As31VPsQSI"},
{"content":{"body":"Mh yeah","m.mentions":{},"msgtype":"m.text"},"ts":1727448012088,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$ZKYjbf1YU87pl3_aT9nKr5DRMGJelqokUVmNeC7upzI"},
{"content":{"body":"https://github.com/tc39/ecma262/issues/1209","m.mentions":{},"msgtype":"m.text"},"ts":1727448101228,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$nAe1hcoStMiF46512oq3VPeMQIcWAD1-Iyj4xIfNatQ"},
{"content":{"body":"> <@ljharb:matrix.org> ok well then let’s please not repeat any of the horrific decisions Proxy made\n\nthe horrible decision being that user code is run?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!fmLqwwrfASaCrzNjAk:matrix.org/$SfDBZTvCJMKpqvH2KjJYPM_-xPKBWem75GPe-fdBO3A?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>ok well then let’s please not repeat any of the horrific decisions Proxy made</blockquote></mx-reply>the horrible decision being that user code is run?","m.mentions":{"user_ids":["@ljharb:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$SfDBZTvCJMKpqvH2KjJYPM_-xPKBWem75GPe-fdBO3A"}},"msgtype":"m.text"},"ts":1727459447894,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$bjMf-il-Cxvrx6EaeahmMociNa1KFPSgV2mG1zcVMbE"},
{"content":{"body":"i mean there's no compelling argument to be made against not throwing because there is no alternative world where you don't have to check for MOPs throwing","m.mentions":{},"msgtype":"m.text"},"ts":1727459472213,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$iyx_239z1rbJOgVnbF7DtMCj7OoWoxxdym3gqBDhpqo"},
{"content":{"body":"so there's no decision to \"repeat\", it's not another case of throwing you have to guard against","m.mentions":{},"msgtype":"m.text"},"ts":1727459482058,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$R-NaxYYEmp4XkYZEScdMfs-Sax-F8RHvUdcz-cn05Jg"},
{"content":{"body":"without proxy Object.getOwnPropertyDescriptor never throws afaik","msgtype":"m.text"},"ts":1727459522065,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$RyXtTI7y1RJuBDFY63pKukStgtTGgpq53SJDIp0KR44"},
{"content":{"body":"> <@ljharb:matrix.org> without proxy Object.getOwnPropertyDescriptor never throws afaik\n\nExcept for `null` and `undefined`","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!fmLqwwrfASaCrzNjAk:matrix.org/$RyXtTI7y1RJuBDFY63pKukStgtTGgpq53SJDIp0KR44?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>without proxy Object.getOwnPropertyDescriptor never throws afaik</blockquote></mx-reply>Except for <code>null</code> and <code>undefined</code>","m.mentions":{"user_ids":["@ljharb:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$RyXtTI7y1RJuBDFY63pKukStgtTGgpq53SJDIp0KR44"}},"msgtype":"m.text"},"ts":1727459629641,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$nxr7MDKA8L56Sek-lhJpSpuwZ2fGfKL95oZ0cbcbuhQ"},
{"content":{"body":"lol sorry yes, i meant never throws on an object","m.mentions":{},"msgtype":"m.text"},"ts":1727459650943,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$nmS1NqRx85NVPwmMds5b05MJImzSbVkN7Bz3dm5D25s"},
{"content":{"body":"And host objects could potentially throw","m.mentions":{},"msgtype":"m.text"},"ts":1727459731077,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$1av-jG3ThEjegz1XKssD0CRWA7tDe4RtcorjMLA2Tok"},
{"content":{"body":"\"if we ignore this part of the language, this property holds\" is not an invariant...","m.mentions":{},"msgtype":"m.text"},"ts":1727459766732,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$Whjk4MBjZw8qZYtRXbL7dh0HyRKeKdWS44ZCt5FIFsE"},
{"content":{"body":" * \"if we ignore this part of the language, this property holds\" is not a design invariant...","m.mentions":{},"m.new_content":{"body":"\"if we ignore this part of the language, this property holds\" is not a design invariant...","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$Whjk4MBjZw8qZYtRXbL7dh0HyRKeKdWS44ZCt5FIFsE","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1727459774581,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$H7YsDciE-YAU3W0ALdOk15XNN3qy1KTp_Z6pEJ4M2q4"},
{"content":{"body":"major host builtins don't but who knows with NAPI","m.mentions":{},"msgtype":"m.text"},"ts":1727459799880,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$79tBW2w4IHxl2zenDfyeaUmPQwGHY587_AAds7igxwA"},
{"content":{"body":"The only thing we probably could rely on as a basis in the language is that `Object.getOwnPropertyDescriptor` on a `TypedArray` backed by `SharedArrayBuffer` is racy.","format":"org.matrix.custom.html","formatted_body":"The only thing we probably could rely on as a basis in the language is that <code>Object.getOwnPropertyDescriptor</code> on a <code>TypedArray</code> backed by <code>SharedArrayBuffer</code> is racy.","m.mentions":{},"msgtype":"m.text"},"ts":1727459945679,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$VO-l76yuRo9QMQsK5y21WYwPYfYmgSKNmESGkNOriAI"},
{"content":{"body":"Which is why I argued that reaching for an API means `unsafe` is implied.","format":"org.matrix.custom.html","formatted_body":"Which is why I argued that reaching for an API means <code>unsafe</code> is implied.","m.mentions":{},"msgtype":"m.text"},"ts":1727459998473,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$dqZ--OOtR9XMM_4cyDoa1yieGp0gmP8tSJ3KOlkLICM"}
]