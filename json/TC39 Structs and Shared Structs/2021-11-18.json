[
{"content":{"body":"rbuckton: working session call happening now if you can make it","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@rbuckton:matrix.org\">rbuckton</a>: working session call happening now if you can make it","msgtype":"m.text"},"ts":1637258562521,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$SvFs6lO-pooQTT9HrWm4KLCbZ7t3iWUr1AeV1bbo2J8"},
{"content":{"body":"Mathieu Hofman: so if we do allow them in weak collections, it's probably not the case that they become eternal the minute they get put in there, but that they become eternal if there is a cycle","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@mhofman:matrix.org\">Mathieu Hofman</a>: so if we do allow them in weak collections, it's probably not the case that they become eternal the minute they get put in there, but that they become eternal if there is a cycle","msgtype":"m.text"},"ts":1637263043183,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$avRZhQLVql-bzhEJG-2Vmp6t5gaf48cMKhK6_EUC4K8"},
{"content":{"body":"which is an implementation problem that i can live with, i guess","msgtype":"m.text"},"ts":1637263065535,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$xYqixJuYltb8g8_2N1O0AIpuEgRGH0P2sTs0xtpDhqQ"},
{"content":{"body":"the spec can say, they are allowed in weak collections","msgtype":"m.text"},"ts":1637263072062,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$YnFXStjrG7X4GZCTIselslSc7U_30iVG_7ruRMY4_1I"},
{"content":{"body":"correct, engines could always figure out directed graph through internal weakrefs","msgtype":"m.text"},"ts":1637263079157,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$sAu13G_C20taPfPNk18Lnb6Svqz4Hz9yq9G9vr9FmZw"},
{"content":{"body":"but until XX years from now when massive rearchitecting has been undertaken, know that in practice cycles will leak","msgtype":"m.text"},"ts":1637263089299,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$xrXck8vovpTlU7JfpHPZjS1tfAQfOsarLMBkAfuvywk"},
{"content":{"body":"which is still compliant, but unfortunate","msgtype":"m.text"},"ts":1637263096934,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$x43S3CqxhSMPaUaKQupuy_fXqGg7Bh-tpBKJ-GeDAvE"},
{"content":{"body":"there's no good language reason to disallow them","msgtype":"m.text"},"ts":1637263110939,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$mxjJb44Gn2n-sRaDVBtYxbAsPFJOkCGSQt0KEghDd5w"},
{"content":{"body":"I just wanted to point out you were opening pandora's box","msgtype":"m.text"},"ts":1637263132442,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$Z8cYB6zQzJzU1kFPwjJCG1ZSuuVwm0FF_CB2cptPL5U"},
{"content":{"body":"there is a safety aspect of disallowing shared -> unshared edges, since obviously multiple threads accessing an unshared thing can't work","msgtype":"m.text"},"ts":1637263134333,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$BJpe7ebxCX7s9WeBOcxa-OiKyqiNsMErx6KokbapTy4"},
{"content":{"body":"I've been trying to keep it closed in a few places where these things came up","msgtype":"m.text"},"ts":1637263150615,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$Mfn6s1F8yCNks9VR4PL4SMp53mVc8xQ2cErNhleikSI"},
{"content":{"body":"this is not a problem for weak collections, since there's a per-thread view of the weak collection","msgtype":"m.text"},"ts":1637263152759,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$omxC5OugP51enA60o7dwVOzvfmC0oHOQGJ3LRzfy6Ss"},
{"content":{"body":"what's the pandora's box? cycles between shared and unshared?","msgtype":"m.text"},"ts":1637263163472,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$27G5Jm85CK_fBtWx2RR73J0pBiuhWsbGMUKnBDUHpHo"},
{"content":{"body":"the requirement for a distributed garbage collection","msgtype":"m.text"},"ts":1637263182145,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$3DSGMV2AsK3UxhAko-_Rk53DHjkI-aHZWA5VSsF_4hg"},
{"content":{"body":"ah, i see","msgtype":"m.text"},"ts":1637263191024,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$0_Gb0qneF1VQSOFglszoMYhLhj43O5mEw3ug0kZS9kE"},
{"content":{"body":"yes, indeed, it is inherent in a shared memory proposal to open that pandora's box","msgtype":"m.text"},"ts":1637263206268,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$VghwIBs-l9FbHClvxvDNBsIl2kri68g1ESH-n67F4RE"},
{"content":{"body":"much of the work internally i've been doing before proposing this in public is to get a roadmap worked out for GC evolution to support a shared memory future","msgtype":"m.text"},"ts":1637263225698,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$MGSljXt0OURou5aAibUk5sfL5qHAfD_FmGb1w_nD4RU"},
{"content":{"body":"and it sounds like at least V8 and JSC are converging on what to do","msgtype":"m.text"},"ts":1637263233458,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$dMwCuAMNjAVU0ujAqSfZAHjWyU5k4E3wTiFZEiob7IY"},
{"content":{"body":"well SharedArrayBuffer avoided that bullet with unstable identities between agents","msgtype":"m.text"},"ts":1637263235075,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$W7nfYYHLi0B1y8rfCHsLFYTO5cueZUYcUGx1V5gTC0c"},
{"content":{"body":"correct","msgtype":"m.text"},"ts":1637263240801,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$AnYu2cb8MXGAMAulx0UrLahIOkPYbUI-8SFbj1xOoqA"},
{"content":{"body":"but it's also a \"solved\" problem in the literature, at least","msgtype":"m.text"},"ts":1637263254568,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$WR2CWV4DYhVWaH4ue_rBLOyNjAhh92EJ2J9r-8G_AVE"},
{"content":{"body":"there are plenty of GCed languages with shared memory","msgtype":"m.text"},"ts":1637263262921,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$DkIxpLPuF2fGjTSq_LTcqbolPRKEVrfiPtd6XaKa_D8"},
{"content":{"body":"it's solved if you have a single GC, nothing is published for cooperative distributed gc","msgtype":"m.text"},"ts":1637263299604,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$btH9ZBoMcpK6EjimgFBS3eF_xHj0U0E5X2DARWvZhco"},
{"content":{"body":"i guess i don't know what you mean by distributed","msgtype":"m.text"},"ts":1637263315710,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$o3kpLiYvDlYtkzSScOjiJkcH8tyGKZc0u3dSCG_l--I"},
{"content":{"body":"independently collected heaps that point to each other?","msgtype":"m.text"},"ts":1637263324184,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$Zb0eryvn4OsrClLU9DTPCuFiEe2XwJj_uEYrUKilLEg"},
{"content":{"body":"multiple local GCs coordinating to identify and prune distributed cycles","msgtype":"m.text"},"ts":1637263348793,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$UBwtt1hHj9gLVB_L-NNFAfo2fGlNOIQ89FkmodN7oBU"},
{"content":{"body":"ah i see","msgtype":"m.text"},"ts":1637263357738,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$5P8dcqJRJXRPMfbKfxygMWcj7smvCOBINxsKDgtIkhA"},
{"content":{"body":"but that implementation is not a requirement","msgtype":"m.text"},"ts":1637263369652,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$stJhZk2GPwpvZbInwIM4-RGN0Z_swCsMI6zsDlRK8IA"},
{"content":{"body":"the prevailing wisdom seems to be to do a single marking phase across all threads","msgtype":"m.text"},"ts":1637263402610,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$9HIiABiVQFBATCSoY_6ODtnwOd_CJywUKAh-N-qWxTU"},
{"content":{"body":"I do have a proposal to solve that, but as you mentioned, the motivation is probably not going to be Web user agents","msgtype":"m.text"},"ts":1637263412718,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$blCP76MP4rckzWThqSi5fY34MqHUPCdrvPSlwsIN1Vo"}
]