[
{"content":{"body":"> <@devsnek:matrix.org> i guess more concretely, introducing an object environment record using `with` and the proxy in your issue does not behave strangely in v8, its only the vm code that uses interceptors that is weird.\n\nCould you clarify the interaction of `with` and `Proxy` in v8? This could be relevant to the SES shim","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$D1h-w1kSupn9zdV_n-NTxxow-s8PC2t-3lq_4YkBROI?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@devsnek:matrix.org\">@devsnek:matrix.org</a><br>i guess more concretely, introducing an object environment record using <code>with</code> and the proxy in your issue does not behave strangely in v8, its only the vm code that uses interceptors that is weird.</blockquote></mx-reply>Could you clarify the interaction of <code>with</code> and <code>Proxy</code> in v8? This could be relevant to the SES shim","m.mentions":{"user_ids":["@devsnek:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$D1h-w1kSupn9zdV_n-NTxxow-s8PC2t-3lq_4YkBROI"}},"msgtype":"m.text"},"ts":1724693983882,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$-mlJXbekHv6yy922XscAUZtI4AEhnRkO6hHgegUzDiA"},
{"content":{"body":"huh did you delete another message","m.mentions":{},"msgtype":"m.text"},"ts":1724694434373,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$LjZ_dXyK7dVgdOrBhsKsL6aYQCRlVfGN_rFcJpNzu5I"},
{"content":{"body":"anyway it just behaves as you would expect based on the spec","m.mentions":{},"msgtype":"m.text"},"ts":1724694443306,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$e_ru2WZ2bjS1MDqJiVaTo00mfcRCPFX3zwZlBZ_yN1Y"},
{"content":{"body":"v8 interceptors don't really align with the spec though. some of them do have names that seem as though they match the MOP but they are called at the wrong time or in the wrong contexts. just generally confusing.","m.mentions":{},"msgtype":"m.text"},"ts":1724694486220,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$wz4ZiqtosqY4QDrNI8fZTyfjMqlhk62lUj6AIPxkNRk"},
{"content":{"body":" * anyway with+Proxy just behaves as you would expect based on the spec","m.mentions":{},"m.new_content":{"body":"anyway with+Proxy just behaves as you would expect based on the spec","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$e_ru2WZ2bjS1MDqJiVaTo00mfcRCPFX3zwZlBZ_yN1Y","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1724694550583,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$DPnroj5gCJAA3fIvMU8dybUrCwWzG21I-yQyjEka4M8"}
]