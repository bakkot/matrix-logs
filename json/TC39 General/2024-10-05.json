[
{"content":{"body":"\nHey guys I was reading about environment records and lexical environment and I got a confusion. Don't know if this is the right channel to discuss about this. But basically my question is this:\n\nIf we have this code:\n\n{\n    const x = 2;\n    var y = 3;\n}\n\nconsole.log(x); // will fail\nconsole.log(y); // will work fine\n\nThen here x was part of lexical environment(and ultimately environment record) of the block. That's why it will not be accessible outside the block.\n\nBut var is accessible becasue it's not block scoped. So does that mean it's not stored in environment record of block and stored directly in global environment record (and global object basically?) or in both global environment record and environment record of block.","m.mentions":{},"msgtype":"m.text"},"ts":1728103751458,"senderName":"Tushar Vaswani","senderId":"@tushar123:matrix.org","id":"$HMiGUACn5nOidvW4Cb8FWsarxn5gc6swhP3xx2cHiLk"},
{"content":{"body":" * \nHey guys I was reading about environment records and lexical environment and I got a confusion. Don't know if this is the right channel to discuss about this. But basically my question is this:\n\nIf we have this code:\n\n```js\n{\n    const x = 2;\n    var y = 3;\n}\n\nconsole.log(x); // will fail\nconsole.log(y); // will work fine\n```\n\nThen here x was part of lexical environment(and ultimately environment record) of the block. That's why it will not be accessible outside the block.\n\nBut var is accessible becasue it's not block scoped. So does that mean it's not stored in environment record of block and stored directly in global environment record (and global object basically?) or in both global environment record and environment record of block.","format":"org.matrix.custom.html","formatted_body":" * <p>Hey guys I was reading about environment records and lexical environment and I got a confusion. Don't know if this is the right channel to discuss about this. But basically my question is this:</p>\n<p>If we have this code:</p>\n<pre><code class=\"language-js\">{\n    const x = 2;\n    var y = 3;\n}\n\nconsole.log(x); // will fail\nconsole.log(y); // will work fine\n</code></pre>\n<p>Then here x was part of lexical environment(and ultimately environment record) of the block. That's why it will not be accessible outside the block.</p>\n<p>But var is accessible becasue it's not block scoped. So does that mean it's not stored in environment record of block and stored directly in global environment record (and global object basically?) or in both global environment record and environment record of block.</p>\n","m.mentions":{},"m.new_content":{"body":"\nHey guys I was reading about environment records and lexical environment and I got a confusion. Don't know if this is the right channel to discuss about this. But basically my question is this:\n\nIf we have this code:\n\n```js\n{\n    const x = 2;\n    var y = 3;\n}\n\nconsole.log(x); // will fail\nconsole.log(y); // will work fine\n```\n\nThen here x was part of lexical environment(and ultimately environment record) of the block. That's why it will not be accessible outside the block.\n\nBut var is accessible becasue it's not block scoped. So does that mean it's not stored in environment record of block and stored directly in global environment record (and global object basically?) or in both global environment record and environment record of block.","format":"org.matrix.custom.html","formatted_body":"<p>Hey guys I was reading about environment records and lexical environment and I got a confusion. Don't know if this is the right channel to discuss about this. But basically my question is this:</p>\n<p>If we have this code:</p>\n<pre><code class=\"language-js\">{\n    const x = 2;\n    var y = 3;\n}\n\nconsole.log(x); // will fail\nconsole.log(y); // will work fine\n</code></pre>\n<p>Then here x was part of lexical environment(and ultimately environment record) of the block. That's why it will not be accessible outside the block.</p>\n<p>But var is accessible becasue it's not block scoped. So does that mean it's not stored in environment record of block and stored directly in global environment record (and global object basically?) or in both global environment record and environment record of block.</p>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$HMiGUACn5nOidvW4Cb8FWsarxn5gc6swhP3xx2cHiLk","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1728103768654,"senderName":"Tushar Vaswani","senderId":"@tushar123:matrix.org","id":"$BFOCnfjc2zZskmzbY7c4HqvAiDylU_Ylp8rLO6GqwS0"},
{"content":{"body":"yeah, `var` effectively \"doesn't see\" `{}`","format":"org.matrix.custom.html","formatted_body":"yeah, <code>var</code> effectively \"doesn't see\" <code>{}</code>","m.mentions":{},"msgtype":"m.text"},"ts":1728103893444,"senderName":"rkirsling","senderId":"@rkirsling:matrix.org","id":"$xFENbBIHn4d1uiXsiNG69hGT-1dpLF2d2BW2SVq1JiQ"},
{"content":{"body":"> <@rkirsling:matrix.org> yeah, `var` effectively \"doesn't see\" `{}`\n\nThanks for help, so that basically means it will be be stored in global environment record only?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$xFENbBIHn4d1uiXsiNG69hGT-1dpLF2d2BW2SVq1JiQ?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@rkirsling:matrix.org\">@rkirsling:matrix.org</a><br>yeah, <code>var</code> effectively \"doesn't see\" <code>{}</code></blockquote></mx-reply>Thanks for help, so that basically means it will be be stored in global environment record only?","m.mentions":{"user_ids":["@rkirsling:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$xFENbBIHn4d1uiXsiNG69hGT-1dpLF2d2BW2SVq1JiQ"}},"msgtype":"m.text"},"ts":1728103984827,"senderName":"Tushar Vaswani","senderId":"@tushar123:matrix.org","id":"$DDNBHV-e_QHNPaCc2_Jn50jh2h4J6MRsrdvk0jlLA0w"},
{"content":{"body":"I am mainly confused because its not clearly outlined in spec","m.mentions":{},"msgtype":"m.text"},"ts":1728104040086,"senderName":"Tushar Vaswani","senderId":"@tushar123:matrix.org","id":"$aY_GhmWdnKMT0_B4MY4sB7w0cMa50vESaqtzPQJ_Lt4"},
{"content":{"body":" * I was mainly confused because its not clearly outlined in spec","m.mentions":{},"m.new_content":{"body":"I was mainly confused because its not clearly outlined in spec","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$aY_GhmWdnKMT0_B4MY4sB7w0cMa50vESaqtzPQJ_Lt4","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1728104045630,"senderName":"Tushar Vaswani","senderId":"@tushar123:matrix.org","id":"$1UloShfHvmEMtajwkQxNMTsxr75A2kt-LL1jPaEIaeI"},
{"content":{"body":"yeah, \"lexical\" refers to the `{}`, `let`, `const` mechanism","format":"org.matrix.custom.html","formatted_body":"yeah, \"lexical\" refers to the <code>{}</code>, <code>let</code>, <code>const</code> mechanism","m.mentions":{},"msgtype":"m.text"},"ts":1728104123191,"senderName":"rkirsling","senderId":"@rkirsling:matrix.org","id":"$1rFp99cnTN_YJ3PcHtnsjaYQY3x2gnksodE1mlUWfAE"},
{"content":{"body":"`var` just knows about function scopes and global scope","format":"org.matrix.custom.html","formatted_body":"<code>var</code> just knows about function scopes and global scope","m.mentions":{},"msgtype":"m.text"},"ts":1728104145030,"senderName":"rkirsling","senderId":"@rkirsling:matrix.org","id":"$7a5OP4wOve-9Tv5N-0LCChLUidp8agTKhJQl9gw-iWA"},
{"content":{"body":"that depends on strict mode and on whether it’s inside or outside a function body","msgtype":"m.text"},"ts":1728104151177,"senderName":"Jessidhia","senderId":"@jessidhia:matrix.org","id":"$PflsF_P7z14xI1yvfypDh7icrdmNWTZrLnZju2O6sLg"},
{"content":{"body":"it won’t be global on a strict mode script… IIRC","msgtype":"m.text"},"ts":1728104186859,"senderName":"Jessidhia","senderId":"@jessidhia:matrix.org","id":"$6Ndb3Qh8ujadkRXntyzHMfPV2WWR_IpeOn5tHO3xbVQ"},
{"content":{"body":"> <@rkirsling:matrix.org> `var` just knows about function scopes and global scope\n\nThanks that makes a lot more sense now","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$7a5OP4wOve-9Tv5N-0LCChLUidp8agTKhJQl9gw-iWA?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@rkirsling:matrix.org\">@rkirsling:matrix.org</a><br><code>var</code> just knows about function scopes and global scope</blockquote></mx-reply>Thanks that makes a lot more sense now","m.mentions":{"user_ids":["@rkirsling:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$7a5OP4wOve-9Tv5N-0LCChLUidp8agTKhJQl9gw-iWA"}},"msgtype":"m.text"},"ts":1728104307791,"senderName":"Tushar Vaswani","senderId":"@tushar123:matrix.org","id":"$7E9DSK7YoCsMp6a1Em8QsKjkfiWdnZ4Yw8NxyeVwBQg"},
{"content":{"body":"> <@jessidhia:matrix.org> it won’t be global on a strict mode script… IIRC\n\nso does that mean we wont be able to access var variables outside block in strict mode?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$6Ndb3Qh8ujadkRXntyzHMfPV2WWR_IpeOn5tHO3xbVQ?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@jessidhia:matrix.org\">@jessidhia:matrix.org</a><br>it won’t be global on a strict mode script… IIRC</blockquote></mx-reply>so does that mean we wont be able to access var variables outside block in strict mode?","m.mentions":{"user_ids":["@jessidhia:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$6Ndb3Qh8ujadkRXntyzHMfPV2WWR_IpeOn5tHO3xbVQ"}},"msgtype":"m.text"},"ts":1728104470967,"senderName":"Tushar Vaswani","senderId":"@tushar123:matrix.org","id":"$mDfI1lzQFE0-VCTPNB17sWYI62PLHAQsDZNEHUfoSF4"},
{"content":{"body":"Well actually maybe I misunderstood it because I just tried it and it seems to work still:\n\n```js\n\"use strict\";\n{\n    var a = 1;\n    console.log(a);\n}\nconsole.log(a);\n```","format":"org.matrix.custom.html","formatted_body":"<p>Well actually maybe I misunderstood it because I just tried it and it seems to work still:</p>\n<pre><code class=\"language-js\">\"use strict\";\n{\n    var a = 1;\n    console.log(a);\n}\nconsole.log(a);\n</code></pre>\n","m.mentions":{},"msgtype":"m.text"},"ts":1728104544524,"senderName":"Tushar Vaswani","senderId":"@tushar123:matrix.org","id":"$-CSTMr3ZzngtMRrKs93Ev0-sYVDYymJPLHHYvbB089o"},
{"content":{"body":"you'd want to check `globalThis.a` but I do think it works, yeah","msgtype":"m.text"},"ts":1728104617861,"senderName":"rkirsling","senderId":"@rkirsling:matrix.org","id":"$_--86hSuivmJ94VGfZniwKuLkUm7Wit7DQb-5dIYgNc"},
{"content":{"body":" * you'd want to check `globalThis.a` but I do think it works, yeah","format":"org.matrix.custom.html","formatted_body":" * you'd want to check <code>globalThis.a</code> but I do think it works, yeah","m.mentions":{},"m.new_content":{"body":"you'd want to check `globalThis.a` but I do think it works, yeah","format":"org.matrix.custom.html","formatted_body":"you'd want to check <code>globalThis.a</code> but I do think it works, yeah","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$_--86hSuivmJ94VGfZniwKuLkUm7Wit7DQb-5dIYgNc","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1728104629080,"senderName":"rkirsling","senderId":"@rkirsling:matrix.org","id":"$ddlknHR3aLMTXbe9ggJX-c9XudH1Yue_bXtqiYE4VKA"},
{"content":{"body":"> <@rkirsling:matrix.org> you'd want to check `globalThis.a` but I do think it works, yeah\n\nyeah even that is printing the value","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$_--86hSuivmJ94VGfZniwKuLkUm7Wit7DQb-5dIYgNc?via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@rkirsling:matrix.org\">@rkirsling:matrix.org</a><br>you'd want to check <code>globalThis.a</code> but I do think it works, yeah</blockquote></mx-reply>yeah even that is printing the value","m.mentions":{"user_ids":["@rkirsling:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$_--86hSuivmJ94VGfZniwKuLkUm7Wit7DQb-5dIYgNc"}},"msgtype":"m.text"},"ts":1728104665768,"senderName":"Tushar Vaswani","senderId":"@tushar123:matrix.org","id":"$LjChg2H7j1eADw7HTFwHV3iTwtBULF1McZJUs8ptmNc"}
]