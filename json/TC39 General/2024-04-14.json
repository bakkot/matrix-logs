[
{"content":{"body":"Random question: Is there any instances of Array exotic objects outside of the ECMAScript spec itself? There are lots of array-like objects in HTML spec but is there any object that's defined to use the DefineOwnProperty from 10.4.2.1 and otherwise use normal internal methods from 10.1?","msgtype":"m.text"},"ts":1713076929211,"senderName":"Aapo Alasuutari","senderId":"@aapo.alasuutari:matrix.org","id":"$l6YbQ7HHIKdJnRcnMae1Ig7xW4SipRtOOTGrM32aKsM"},
{"content":{"body":"* Random question: Are there any instances of Array exotic objects outside of the ECMAScript spec itself? There are lots of array-like objects in HTML spec but is there any object that's defined to use the DefineOwnProperty from 10.4.2.1 and otherwise use normal internal methods from 10.1?","m.new_content":{"body":"Random question: Are there any instances of Array exotic objects outside of the ECMAScript spec itself? There are lots of array-like objects in HTML spec but is there any object that's defined to use the DefineOwnProperty from 10.4.2.1 and otherwise use normal internal methods from 10.1?","msgtype":"m.text"},"m.relates_to":{"event_id":"$l6YbQ7HHIKdJnRcnMae1Ig7xW4SipRtOOTGrM32aKsM","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1713077115444,"senderName":"Aapo Alasuutari","senderId":"@aapo.alasuutari:matrix.org","id":"$vfnRWsghy5fnG-fVuD4Toumv4mjs_RMIi9ZsmF6jrA4"},
{"content":{"body":"Anything in web specs that returns a `sequence<...>` is returning an array, for example `navigation.entries()`: https://html.spec.whatwg.org/#navigation-interface. It's defined at https://webidl.spec.whatwg.org/#js-sequence","format":"org.matrix.custom.html","formatted_body":"Anything in web specs that returns a <code>sequence&lt;...&gt;</code> is returning an array, for example <code>navigation.entries()</code>: https://html.spec.whatwg.org/#navigation-interface. It's defined at https://webidl.spec.whatwg.org/#js-sequence","msgtype":"m.text"},"ts":1713077950501,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$Djz3vG6YxXU_AxoiyHL7bxivbQWy2VzHOiERkeRzfDE"},
{"content":{"body":"That seems to be just The Array exotic object, not some other object that would pass the test of \"uses DefineOwnProperty from 10.4.2.1 and otherwise normal object internal methods\".\n\nI'm looking for cases where an external spec defines a custom exotic object type that behaves exactly like the Array exotic object but with some additions over the top, e.g.. an added internal slot that is used as a marker.","msgtype":"m.text"},"ts":1713079737162,"senderName":"Aapo Alasuutari","senderId":"@aapo.alasuutari:matrix.org","id":"$usrE6gZYXeuQR5r-5H5OpQuHAEtUCAI2h92QkRMBjyM"},
{"content":{"body":"> That seems to be just The Array exotic object, not some other object that would pass the test of \"uses DefineOwnProperty from 10.4.2.1 and otherwise normal object internal methods\".\n\nthose are defined to be the same thing","format":"org.matrix.custom.html","formatted_body":"<blockquote>\n<p>That seems to be just The Array exotic object, not some other object that would pass the test of \"uses DefineOwnProperty from 10.4.2.1 and otherwise normal object internal methods\".</p>\n</blockquote>\n<p>those are defined to be the same thing</p>\n","m.mentions":{},"msgtype":"m.text"},"ts":1713079819701,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$angCCCLJvX1N8mLhtn-dYJLEQpvo1YCWzlP9YYtyD5c"},
{"content":{"body":"if it uses DefineOwnProperty from 10.4.2.1 and otherwise normal object internal methods, then it is, by definition, an array exotic object; that is what it means to be an array exotic object","m.mentions":{},"msgtype":"m.text"},"ts":1713079862545,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$W8md9KI0KmqNp9nHpKJOgcfO0JRtBC0zXmFXKCYcM40"},
{"content":{"body":"Or in other words, I'm wondering if an engine should provide embedders a way to say \"this object returns true from Array.isArray\": It's unwieldy to test all internal method function pointers after all.","msgtype":"m.text"},"ts":1713079877803,"senderName":"Aapo Alasuutari","senderId":"@aapo.alasuutari:matrix.org","id":"$AdoqHJyiyfm25_Dykary99mWxBUV8yhNTEzfye9Iz-M"},
{"content":{"body":"generally speaking engines provide embedders a way to say \"create an Array\", which is sufficient; engines do not generally literally implement the [[DefineOwnProperty]] (etc) methods as actual functions to be tested","m.mentions":{},"msgtype":"m.text"},"ts":1713080030107,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$JhYZheU-oi0Hibd_8gleIxdguxoLZQpEb2ngfBgG8Gg"},
{"content":{"body":"I guess another way to phrase the same question is: Does the HTML spec define any Arrays that couldn't be created from within the ECMAScript language itself? And I think the only thing that can answer \"yes\" to this is added internal slots.\n\nChanging internal methods can't be done from the language itself but it would also make the object no longer an Array exotic object so it's not relevant in this case. Internal slots cannot be added or removed from within the language and do not change the Array exotic object -ness of the object so that would be a possible case.","msgtype":"m.text"},"ts":1713082042147,"senderName":"Aapo Alasuutari","senderId":"@aapo.alasuutari:matrix.org","id":"$qkNHmIk-4M97oG27c45CMG6ia0CGhqZsnfiOrmViLSg"},
{"content":{"body":"Matrix is super niche, fwiw","m.relates_to":{"event_id":"$L1kuDyaN9cXGSQRiQ1UeD14rh-9CkI9Z8BHD18ofekA","is_falling_back":true,"m.in_reply_to":{"event_id":"$O77C0c8wn2s2MRGHXbQHv-oBLs7Xa0K24RWHQsXAP_E"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1713101347033,"senderName":"nullvoxpopuli","senderId":"@nullvoxpopuli:matrix.org","id":"$M7JEvNCEm8GWhtDaokQhHTfIvQXM7-CaoKr_KyZpbbA"}
]