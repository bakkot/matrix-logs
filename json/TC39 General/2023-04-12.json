[
{"content":{"body":"does anyone know of npm packages / libraries that depend on the non-standard `.stack`?","format":"org.matrix.custom.html","formatted_body":"does anyone know of npm packages / libraries that depend on the non-standard <code>.stack</code>?","msgtype":"m.text"},"ts":1681309370964,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$ZByyWldfsG8Hs06JWrsl45d9NfF3iS6nv69H1832KKg"},
{"content":{"body":"> <@shuyuguo:matrix.org> does anyone know of npm packages / libraries that depend on the non-standard `.stack`?\n\nhttps://www.npmjs.com/package/get-caller-file","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq%3Amatrix.org/%24ZByyWldfsG8Hs06JWrsl45d9NfF3iS6nv69H1832KKg\">In reply to</a> <a href=\"https://matrix.to/#/@shuyuguo:matrix.org\">@shuyuguo:matrix.org</a><br>does anyone know of npm packages / libraries that depend on the non-standard <code>.stack</code>?</blockquote></mx-reply>https://www.npmjs.com/package/get-caller-file","m.relates_to":{"m.in_reply_to":{"event_id":"$ZByyWldfsG8Hs06JWrsl45d9NfF3iS6nv69H1832KKg"}},"msgtype":"m.text"},"ts":1681309872573,"senderName":"Luca Casonato","senderId":"@lucacasonato:matrix.org","id":"$nt2GUqiFCujq9HX-GWZk7tr2BPMXHqn-N7gndKfktlQ"},
{"content":{"body":"It also depends on v8 specific Error APIs","msgtype":"m.text"},"ts":1681309996172,"senderName":"Luca Casonato","senderId":"@lucacasonato:matrix.org","id":"$FzCI2YthpSPdCGVde7o8zzpamVLvpLlbxMLChkXWQNQ"},
{"content":{"body":"Babel does some stack trace manipulation to show both plugin files and the code that originally called Babel","msgtype":"m.text"},"ts":1681310015228,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$1zsC1n9OXRZMyDP5wUGnIB_KWz2jF8lHh66SNk4UKnU"},
{"content":{"body":"(It also uses prepareStackTrace)","msgtype":"m.text"},"ts":1681310124834,"senderName":"Luca Casonato","senderId":"@lucacasonato:matrix.org","id":"$WppcDtbQdew3uzYKCdU75cCda7WQDCNJEcD6pQeMhZw"},
{"content":{"body":"thanks luca and nicolo","msgtype":"m.text"},"ts":1681310235861,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$QxHoFfH23zaC7j_viz8pO_PiF-nrC4wssoeibiG_uyA"},
{"content":{"body":"the context here is we're going to make it an accessor property instead of a data property because that's the right thing to do","msgtype":"m.text"},"ts":1681310252659,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$1XwuOLePcq2IPm8TiOWSkiM0hGZa9VUbcYOb0UP7zuI"},
{"content":{"body":"hopefully we don't break too anything but now i need to read these packages","msgtype":"m.text"},"ts":1681310265200,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$FX41p7vqvVFXJ2ZBkz83VGOfF3cm6aPtB2uyz4QvrXk"},
{"content":{"body":"(we not only use `.stack`, but also do very bad things like relying on `.prepareStackTrace`)","format":"org.matrix.custom.html","formatted_body":"(we not only use <code>.stack</code>, but also do very bad things like relying on <code>.prepareStackTrace</code>)","msgtype":"m.text"},"ts":1681310320740,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$hwMQ_a92BLKuTYYNF_cudZv4UIC3YsdrSGntnt3QS7A"},
{"content":{"body":"> <@shuyuguo:matrix.org> the context here is we're going to make it an accessor property instead of a data property because that's the right thing to do\n\nIt won't break Babel","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$1XwuOLePcq2IPm8TiOWSkiM0hGZa9VUbcYOb0UP7zuI?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@shuyuguo:matrix.org\">@shuyuguo:matrix.org</a><br>the context here is we&#39;re going to make it an accessor property instead of a data property because that&#39;s the right thing to do</blockquote></mx-reply>It won't break Babel","m.relates_to":{"m.in_reply_to":{"event_id":"$1XwuOLePcq2IPm8TiOWSkiM0hGZa9VUbcYOb0UP7zuI"}},"msgtype":"m.text"},"ts":1681310332216,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$-kBBH9Y9pNV5d8WmVtjaZlU8NEByzcv15IVmU779cwI"},
{"content":{"body":"Some of our enterprise customers also make use of Error.stack in various ways","msgtype":"m.text"},"ts":1681310336662,"senderName":"Luca Casonato","senderId":"@lucacasonato:matrix.org","id":"$MAtQf3OGFpvXXevOKJNC4Co7IJTaHZmW_NyusSht_9M"},
{"content":{"body":"> <@nicolo-ribaudo:matrix.org> It won't break Babel\n\nOh actually, we do reassign `.stack`, so if it's only a getter it might throw on assignment","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$-kBBH9Y9pNV5d8WmVtjaZlU8NEByzcv15IVmU779cwI?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@nicolo-ribaudo:matrix.org\">@nicolo-ribaudo:matrix.org</a><br>It won't break Babel</blockquote></mx-reply>Oh actually, we do reassign <code>.stack</code>, so if it's only a getter it might throw on assignment","m.relates_to":{"m.in_reply_to":{"event_id":"$-kBBH9Y9pNV5d8WmVtjaZlU8NEByzcv15IVmU779cwI"}},"msgtype":"m.text"},"ts":1681310391471,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$jO_HhYamvd9yo-I21HFZyFT1u870Ro6pxPSo68ciZNE"},
{"content":{"body":"I‚Äôll check with our customers whether this will break them","msgtype":"m.text"},"ts":1681310409110,"senderName":"Luca Casonato","senderId":"@lucacasonato:matrix.org","id":"$KvFQuGtVkeL8jQ_-AeVbkzUxyrXTqFDZXTbeVjIisTM"},
{"content":{"body":"so, currently it's not a _real_ data property. it appears as one but it as C++ getter and setter","format":"org.matrix.custom.html","formatted_body":"so, currently it's not a <em>real</em> data property. it appears as one but it as C++ getter and setter","msgtype":"m.text"},"ts":1681310471437,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$RhhTJFYWhmZKve1TrKIDvMT_9IBVkxPs4qxfqdWkAD0"},
{"content":{"body":"we want to change it to an accessor property, it'll have the same getter and setter","msgtype":"m.text"},"ts":1681310479918,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$iixln8IcQzLFVCSX8yPodboT_Ew58yFIy4WjZkBGYN0"},
{"content":{"body":"assignment should still work","msgtype":"m.text"},"ts":1681310485845,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$lrA-TPNq0qsNQG8tfCbzuiHI64nKJS8ImKj27dS8ZFI"},
{"content":{"body":"what'll break is stuff like `getOwnPropertyDescriptor` and depending on its being a data property","format":"org.matrix.custom.html","formatted_body":"what'll break is stuff like <code>getOwnPropertyDescriptor</code> and depending on its being a data property","msgtype":"m.text"},"ts":1681310496788,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$Zjgv_-iJQOo5Dw76QZaQDKOSFFsnZqD0IKOKkKj7rGU"},
{"content":{"body":"> <@lucacasonato:matrix.org> I‚Äôll check with our customers whether this will break them\n\nthanks!","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$KvFQuGtVkeL8jQ_-AeVbkzUxyrXTqFDZXTbeVjIisTM?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@lucacasonato:matrix.org\">@lucacasonato:matrix.org</a><br>I‚Äôll check with our customers whether this will break them</blockquote></mx-reply>thanks!","m.relates_to":{"m.in_reply_to":{"event_id":"$KvFQuGtVkeL8jQ_-AeVbkzUxyrXTqFDZXTbeVjIisTM"}},"msgtype":"m.text"},"ts":1681310504129,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$YVXHsF37SizSOJZBxd8kg-XgJnTuMl-UcHjH93s4cxc"},
{"content":{"body":" * so, currently it's not a _real_ data property. it appears as one but it has C++ getter and setter","format":"org.matrix.custom.html","formatted_body":" * so, currently it's not a <em>real</em> data property. it appears as one but it has C++ getter and setter","m.new_content":{"body":"so, currently it's not a _real_ data property. it appears as one but it has C++ getter and setter","format":"org.matrix.custom.html","formatted_body":"so, currently it's not a <em>real</em> data property. it appears as one but it has C++ getter and setter","msgtype":"m.text"},"m.relates_to":{"event_id":"$RhhTJFYWhmZKve1TrKIDvMT_9IBVkxPs4qxfqdWkAD0","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1681310518266,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$V6B5oPjjZOMJR9KGTCveM9L-5NWT-RD3yk0wHW88YGU"},
{"content":{"body":"I like this change. I'll note that I previously changed some random Intl/Promise stuff into getters/setters when trying to deprecate them, and it didn't seem to break anything. But each case is random and different.","msgtype":"m.text"},"ts":1681310538495,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$Zglw3DoidglTahqVqtk6Zqlf83dt-rpX42aOdPHxfDo"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1681310567811,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$g6OVWQJkbwU45KhnyTQCHcT1DCBnC8jg_biqcmw6YeQ"},
{"content":{"body":"that's amazing, thank you - it will dramatically reduce the web reality that the stack proposal has to account for","msgtype":"m.text"},"ts":1681314634784,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$rpQQCyPi8rghuRGGlaCxS8Z2ebsKzeHm8GUQyoOnWDE"},
{"content":{"body":"fingers crossed on no breakages","msgtype":"m.text"},"ts":1681315342255,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$ybJvoATDRXQrgA8YCIXBtsAf_E19fs1im-bJVP5TcvY"},
{"content":{"body":"> <@shuyuguo:matrix.org> thanks!\n\nYeah, no breakages for the customer I was concerned about. üëç from me ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq%3Amatrix.org/%24YVXHsF37SizSOJZBxd8kg-XgJnTuMl-UcHjH93s4cxc\">In reply to</a> <a href=\"https://matrix.to/#/@shuyuguo:matrix.org\">@shuyuguo:matrix.org</a><br>thanks!</blockquote></mx-reply>Yeah, no breakages for the customer I was concerned about. üëç from me","m.relates_to":{"m.in_reply_to":{"event_id":"$YVXHsF37SizSOJZBxd8kg-XgJnTuMl-UcHjH93s4cxc"}},"msgtype":"m.text"},"ts":1681316193084,"senderName":"Luca Casonato","senderId":"@lucacasonato:matrix.org","id":"$7bYqdr9lRtjvRbfTPVNU9EeAqzlxBHVXU8BkLJYoNVA"}
]