[
{"content":{"body":"we might've accidentally made template literal arrays eternal again?","msgtype":"m.text","org.matrix.msc1767.text":"we might've accidentally made template literal arrays eternal again?"},"ts":1665526557649,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$93KGN31QdYZwN3QcU4zv4DJt7036BLDJKvyHI5t-p0Y"},
{"content":{"body":"we (chrome) recently discovered the note for [[TemplateMap]] in https://tc39.es/ecma262/#table-realm-record-fields is not true, because, well, WeakMaps and WeakRefs exist","msgtype":"m.text","org.matrix.msc1767.text":"we (chrome) recently discovered the note for [[TemplateMap]] in https://tc39.es/ecma262/#table-realm-record-fields is not true, because, well, WeakMaps and WeakRefs exist"},"ts":1665526604165,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$szcCTlSpOc8VebfgYHS9qb6PuHMoyyho_8IyX8-2ASo"},
{"content":{"body":"It seems to just not be true general. The array could still be reachable by anything live having a reference to it. The array can be passed around. Unless it means the literal accessing of the [[array]] field rather than the value?","msgtype":"m.text"},"ts":1665528263294,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$464zvm-dLd9dPC1YYAFcrTiqv4V2DYXkk_Rtv4q4oDg"},
{"content":{"body":"* It seems to just not be true in general. The array could still be reachable by anything live having a reference to it. The array can be passed around. Unless it means the literal accessing of the [[array]] field rather than the value?","m.new_content":{"body":"It seems to just not be true in general. The array could still be reachable by anything live having a reference to it. The array can be passed around. Unless it means the literal accessing of the [[array]] field rather than the value?","msgtype":"m.text"},"m.relates_to":{"event_id":"$464zvm-dLd9dPC1YYAFcrTiqv4V2DYXkk_Rtv4q4oDg","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1665528334544,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$LjmkUnI0mCOQBZDUTvFRMmRuzNnV6FeJCc8qREizLmc"},
{"content":{"body":"good point, i think that note is probably in general wrong","msgtype":"m.text","org.matrix.msc1767.text":"good point, i think that note is probably in general wrong"},"ts":1665528335790,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$HbYUpZTMnmdwnogxBlghDWkIKtfeSZ-xA88Xx14JpD4"},
{"content":{"body":"but the original intention was assuming no live strong references to the template array, we _could_ collect it if the parse node was no longer reachable","format":"org.matrix.custom.html","formatted_body":"but the original intention was assuming no live strong references to the template array, we <em>could</em> collect it if the parse node was no longer reachable","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"but the original intention was assuming no live strong references to the template array, we _could_ collect it if the parse node was no longer reachable","mimetype":"text/plain"},{"body":"but the original intention was assuming no live strong references to the template array, we <em>could</em> collect it if the parse node was no longer reachable","mimetype":"text/html"}]},"ts":1665528364832,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$ucHcuOHI6jc4xwvfPVQNLMEE4yvqa-u37tk3U7EjIlY"},
{"content":{"body":"That seems OK? Even if the array is in a WeakRef. Or is there a risk to making that collection observable?","msgtype":"m.text"},"ts":1665528479188,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$IpzQy9QGfdBEhRYVZz82qPlC92WylcTVm0iS0ZeDsb8"},
{"content":{"body":"but it is not in fact unobservable to collect them, because of weakrefs","msgtype":"m.text","org.matrix.msc1767.text":"but it is not in fact unobservable to collect them, because of weakrefs"},"ts":1665528487126,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$iEs5by4eYMhJ8-vs1hd1A7FljZo36QT-LZm3qAAUCe4"},
{"content":{"body":"i think we should clarify that note because it's saying a collecting implementation strategy is allowed because of unobservability, which is false","msgtype":"m.text","org.matrix.msc1767.text":"i think we should clarify that note because it's saying a collecting implementation strategy is allowed because of unobservability, which is false"},"ts":1665528530782,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$7crlXwIwKur3mwTKfaBW97ttHCJVKcUfDIJOnJmC-9Q"},
{"content":{"body":"maybe we don't need to say anything more than \"it's observable in weak collections and weakrefs and that's fine\"","msgtype":"m.text","org.matrix.msc1767.text":"maybe we don't need to say anything more than \"it's observable in weak collections and weakrefs and that's fine\""},"ts":1665528553749,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$AdWoyDKhbRmVgQO5p5SR8HQAdCQThbNNt1C91eCd3Qg"},
{"content":{"body":"it's also not very clear to me what a Parse Node becoming unreachable means","msgtype":"m.text","org.matrix.msc1767.text":"it's also not very clear to me what a Parse Node becoming unreachable means"},"ts":1665528643003,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$otPnpKV60-Wgz7zEBXHUg3zuxvmeCBT9aVaAyhkHW5w"},
{"content":{"body":"now that we talk about liveness for other things in the spec, we should give these the same treatment","msgtype":"m.text","org.matrix.msc1767.text":"now that we talk about liveness for other things in the spec, we should give these the same treatment"},"ts":1665528661188,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$3XTL_01HVldLmxvrLorXwatjk7i2X4A5V23j6iDvb40"},
{"content":{"body":"When can parse nodes be collected? Eval and script tags?","msgtype":"m.text"},"ts":1665528661328,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$TCGk7sa1JG3WKAS0aCSNL9oRMVSWFRW0yJGAcfT-MjU"},
{"content":{"body":"beats me!","msgtype":"m.text","org.matrix.msc1767.text":"beats me!"},"ts":1665528680206,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$Lw_FcjQhPPJX7XeVd4TX7fQ9vzeOmNA3BN2SMUejSBw"},
{"content":{"body":"they're technically spec fiction","msgtype":"m.text","org.matrix.msc1767.text":"they're technically spec fiction"},"ts":1665528686084,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$iMsS5BMMafwjBTbRgf2pr-cST0HKzUQZPNeb1oiJEvU"},
{"content":{"body":"oh no, maybe not, because functions hold on to them?","msgtype":"m.text","org.matrix.msc1767.text":"oh no, maybe not, because functions hold on to them?"},"ts":1665528711402,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$sAPImJ8Ivwpkwxi3418pmcAuhnCr_kX3u5IG94neKFk"},
{"content":{"body":"yeah, functions hold on to them","msgtype":"m.text","org.matrix.msc1767.text":"yeah, functions hold on to them"},"ts":1665529508331,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$eBhMB6_Z1S2X7SX3XzA4781ugi4oe9IDb_FITAydrnQ"},
{"content":{"body":"and that's how you'd normally re-manifest it: `` () => tag`foo` `` or whatever","format":"org.matrix.custom.html","formatted_body":"and that's how you'd normally re-manifest it: <code>() =&gt; tag`foo`</code> or whatever","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"and that's how you'd normally re-manifest it: `` () => tag`foo` `` or whatever","mimetype":"text/plain"},{"body":"and that's how you'd normally re-manifest it: <code>() =&gt; tag`foo`</code> or whatever","mimetype":"text/html"}]},"ts":1665529527142,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$6A_nQIppIyX1E-JrcVcr7ZVfhatiHEDtq3SMSTzvpn0"},
{"content":{"body":" * and that's how you'd normally re-manifest it: ``() => tag`foo``` or whatever","m.new_content":{"body":"and that's how you'd normally re-manifest it: ``() => tag`foo``` or whatever","msgtype":"m.text","org.matrix.msc1767.text":"and that's how you'd normally re-manifest it: ``() => tag`foo``` or whatever"},"m.relates_to":{"event_id":"$6A_nQIppIyX1E-JrcVcr7ZVfhatiHEDtq3SMSTzvpn0","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.text":" * and that's how you'd normally re-manifest it: ``() => tag`foo``` or whatever"},"ts":1665529535105,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$A62URtNxt8zWrbeh58Jl2W0xO1E21qJ-xD9g-FprJw4"},
{"content":{"body":" * and that's how you'd normally re-manifest it: `` () => tag`foo` `` or whatever","format":"org.matrix.custom.html","formatted_body":" * and that's how you'd normally re-manifest it: <code>() =&gt; tag`foo`</code> or whatever","m.new_content":{"body":"and that's how you'd normally re-manifest it: `` () => tag`foo` `` or whatever","format":"org.matrix.custom.html","formatted_body":"and that's how you'd normally re-manifest it: <code>() =&gt; tag`foo`</code> or whatever","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"and that's how you'd normally re-manifest it: `` () => tag`foo` `` or whatever","mimetype":"text/plain"},{"body":"and that's how you'd normally re-manifest it: <code>() =&gt; tag`foo`</code> or whatever","mimetype":"text/html"}]},"m.relates_to":{"event_id":"$6A_nQIppIyX1E-JrcVcr7ZVfhatiHEDtq3SMSTzvpn0","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":" * and that's how you'd normally re-manifest it: `` () => tag`foo` `` or whatever","mimetype":"text/plain"},{"body":" * and that's how you'd normally re-manifest it: <code>() =&gt; tag`foo`</code> or whatever","mimetype":"text/html"}]},"ts":1665529547999,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$_FxHaQckfCtpAlR9fwLnuXdodJpmsUChLzAre9EfUzE"},
{"content":{"body":"but the only way we would collect them is if the toplevel Script or Module that has the root Parse Node itself becomes unreachable at some point","msgtype":"m.text","org.matrix.msc1767.text":"but the only way we would collect them is if the toplevel Script or Module that has the root Parse Node itself becomes unreachable at some point"},"ts":1665529818506,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$3cdLxWPjfjCGue30eWuYVx4QM6j3khNPUOH_ZoP0yaI"},
{"content":{"body":"and that i guess is currently up to the host","msgtype":"m.text","org.matrix.msc1767.text":"and that i guess is currently up to the host"},"ts":1665529827696,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$rfdTDiqfrE_T1faTBPyR1JVl6UWVmnN-1yYQGxe7okY"}
]