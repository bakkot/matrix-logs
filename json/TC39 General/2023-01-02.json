[
{"content":{"body":"> <@ljharb:matrix.org> Promise has the brand checks but no non-side-effect way to check it; and error sadly has no way to do the brand check, yes. Yet.\n\nWe did discuss this on matrix a [few months ago](https://matrixlogs.bakkot.com/TC39_General/2022-05-11#L9). The inability to brand check a promise without side effects (in particular triggering proxy traps) is a major pain for us, and I would very much would like to find a way to make this possible. But a lot of people expressed concerns with revealing such a power, mostly about users doing conditional work based on the result type (promise or not, aka releasing Zalgo)","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$WOZVLGo9zM5uh9eCPutzFCgbpXG8eru_IiFZFtuu2E4?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>Promise has the brand checks but no non-side-effect way to check it; and error sadly has no way to do the brand check, yes. Yet.</blockquote></mx-reply>We did discuss this on matrix a <a href=\"https://matrixlogs.bakkot.com/TC39_General/2022-05-11#L9\">few months ago</a>. The inability to brand check a promise without side effects (in particular triggering proxy traps) is a major pain for us, and I would very much would like to find a way to make this possible. But a lot of people expressed concerns with revealing such a power, mostly about users doing conditional work based on the result type (promise or not, aka releasing Zalgo)","m.relates_to":{"m.in_reply_to":{"event_id":"$WOZVLGo9zM5uh9eCPutzFCgbpXG8eru_IiFZFtuu2E4"}},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":"> <@ljharb:matrix.org> Promise has the brand checks but no non-side-effect way to check it; and error sadly has no way to do the brand check, yes. Yet.\n\nWe did discuss this on matrix a [few months ago](https://matrixlogs.bakkot.com/TC39_General/2022-05-11#L9). The inability to brand check a promise without side effects (in particular triggering proxy traps) is a major pain for us, and I would very much would like to find a way to make this possible. But a lot of people expressed concerns with revealing such a power, mostly about users doing conditional work based on the result type (promise or not, aka releasing Zalgo)","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$WOZVLGo9zM5uh9eCPutzFCgbpXG8eru_IiFZFtuu2E4?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>Promise has the brand checks but no non-side-effect way to check it; and error sadly has no way to do the brand check, yes. Yet.</blockquote></mx-reply>We did discuss this on matrix a <a href=\"https://matrixlogs.bakkot.com/TC39_General/2022-05-11#L9\">few months ago</a>. The inability to brand check a promise without side effects (in particular triggering proxy traps) is a major pain for us, and I would very much would like to find a way to make this possible. But a lot of people expressed concerns with revealing such a power, mostly about users doing conditional work based on the result type (promise or not, aka releasing Zalgo)","mimetype":"text/html"}]},"ts":1672626415326,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$G-Iog_-Cp1quKoiX4v5tBduU8bkS6qvl8h5Ah-rsApg"},
{"content":{"body":"Yes, and my recommendation is that our stance should be to enable and help people to avoid releasing Zalgo, not prevent people from releasing Zalgo. The latter is not possible. The former is possible while still revealing a brand check. It’s not the same magnitude of hazard as, say, an API to synchronously query the state of a promise.","msgtype":"m.text","org.matrix.msc1767.text":"Yes, and my recommendation is that our stance should be to enable and help people to avoid releasing Zalgo, not prevent people from releasing Zalgo. The latter is not possible. The former is possible while still revealing a brand check. It’s not the same magnitude of hazard as, say, an API to synchronously query the state of a promise."},"ts":1672626882565,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$xyvHyLBmVKsicay1UY7rzvuMM4EIXSjQhOAopPf0aw4"},
{"content":{"body":"Since we're talking about this stuff, reminder that https://github.com/tc39/proposal-faster-promise-adoption exists","msgtype":"m.text","org.matrix.msc1767.text":"Since we're talking about this stuff, reminder that https://github.com/tc39/proposal-faster-promise-adoption exists"},"ts":1672633917810,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$p-MpT-7z0IYwpuwxT4ohWf8CiAwjIx-kT82SAKsSS6s"}
]