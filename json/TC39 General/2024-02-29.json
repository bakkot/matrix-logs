[
{"content":{"body":"Is it better to return null or undefined for a Rust API that returns Option?\nhttps://github.com/rust-diplomat/diplomat/pull/435","msgtype":"m.text"},"ts":1709188673253,"senderName":"sffc","senderId":"@sffc:mozilla.org","id":"$KoVWZpZ_HbZViQstfU7261-zho71g7gZtAw1RrT6kTE"},
{"content":{"body":"* In JS/TS, is it better to return null or undefined for a Rust API that returns Option?\nhttps://github.com/rust-diplomat/diplomat/pull/435","m.new_content":{"body":"In JS/TS, is it better to return null or undefined for a Rust API that returns Option?\nhttps://github.com/rust-diplomat/diplomat/pull/435","msgtype":"m.text"},"m.relates_to":{"event_id":"$KoVWZpZ_HbZViQstfU7261-zho71g7gZtAw1RrT6kTE","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1709188698226,"senderName":"sffc","senderId":"@sffc:mozilla.org","id":"$1zmys-bFbCZZ89jBbfzGT92nFMU2yVWZ1usu2kyWIfg"},
{"content":{"body":"* In JS/TS, is it better to return null or undefined for a Rust API that returns Option? Trying to decide the default behavior in ICU4X.\nhttps://github.com/rust-diplomat/diplomat/pull/435","m.new_content":{"body":"In JS/TS, is it better to return null or undefined for a Rust API that returns Option? Trying to decide the default behavior in ICU4X.\nhttps://github.com/rust-diplomat/diplomat/pull/435","msgtype":"m.text"},"m.relates_to":{"event_id":"$KoVWZpZ_HbZViQstfU7261-zho71g7gZtAw1RrT6kTE","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1709188736511,"senderName":"sffc","senderId":"@sffc:mozilla.org","id":"$qqLfxY3-WfpOcIbCUFb3zImI-ci01O0l8kuVdEXJZ4w"},
{"content":{"body":"sadly we don't have an Option type (alternatively, a sync Promise), and there's no ecosystem consensus on that kind of thing. some people only use one or the other and hate the one they don't use, some people don't care. i don't have a hard rule for myself either, it's more of a \"i usually know which one it should be when i see it\"","m.mentions":{},"msgtype":"m.text"},"ts":1709190351803,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$2eFmmH-l-Yw-y0sdvDHIcAKyJj2k2OvD6Y-aXTk3lPc"},
{"content":{"body":"if it's representing an options object, then i'd say undefined, because then that'll trigger arg defaulting if it's passed elsewhere","m.mentions":{},"msgtype":"m.text"},"ts":1709190408910,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$65Bc50RtifIZcFbWOIWzwlASCAnJsl3bx4ouILdWnAQ"},
{"content":{"body":"sffc: personally I would use `null`, but the precedent here is firmly set by wasm-bindgen / wasm-pack, and it uses `undefined`","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sffc:mozilla.org\">sffc</a>: personally I would use <code>null</code>, but the precedent here is firmly set by wasm-bindgen / wasm-pack, and it uses <code>undefined</code>","m.mentions":{"user_ids":["@sffc:mozilla.org"]},"msgtype":"m.text"},"ts":1709227284493,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$NisC_j_arNZ6QwzP9OYqhOcGNgApPXVATDyoL-dvEPM"},
{"content":{"body":" * sffc: personally I would use `null` if I were doing this without consideration of precedent, but the precedent here is firmly set by wasm-bindgen / wasm-pack, and it uses `undefined`","format":"org.matrix.custom.html","formatted_body":" * <a href=\"https://matrix.to/#/@sffc:mozilla.org\">sffc</a>: personally I would use <code>null</code> if I were doing this without consideration of precedent, but the precedent here is firmly set by wasm-bindgen / wasm-pack, and it uses <code>undefined</code>","m.mentions":{},"m.new_content":{"body":"sffc: personally I would use `null` if I were doing this without consideration of precedent, but the precedent here is firmly set by wasm-bindgen / wasm-pack, and it uses `undefined`","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@sffc:mozilla.org\">sffc</a>: personally I would use <code>null</code> if I were doing this without consideration of precedent, but the precedent here is firmly set by wasm-bindgen / wasm-pack, and it uses <code>undefined</code>","m.mentions":{"user_ids":["@sffc:mozilla.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$NisC_j_arNZ6QwzP9OYqhOcGNgApPXVATDyoL-dvEPM","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1709227339175,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$yMwOAR3b1oqhZ8MKcUciteTh_FDXg6GsZq30btqBLLg"},
{"content":{"body":"https://github.com/rustwasm/wasm-bindgen/pull/3245 contains a recent discussion of that decision","m.mentions":{},"msgtype":"m.text"},"ts":1709227429302,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$3FnWF4OTkM0_s7yu2DqiQS30XLtlJ8MChOWjG-KdlBY"},
{"content":{"body":"relevantly to you:\n\n> But, although I agree that mapping `None` to `null` makes more sense, I think it'll break people's code that relies on the current behaviour of it getting mapped to undefined. So, I'm not going to merge this, but I'll leave it open so that it can get merged if/when wasm-bindgen makes a breaking release.","format":"org.matrix.custom.html","formatted_body":"<p>relevantly to you:</p>\n<blockquote>\n<p>But, although I agree that mapping <code>None</code> to <code>null</code> makes more sense, I think it'll break people's code that relies on the current behaviour of it getting mapped to undefined. So, I'm not going to merge this, but I'll leave it open so that it can get merged if/when wasm-bindgen makes a breaking release.</p>\n</blockquote>\n","m.mentions":{},"msgtype":"m.text"},"ts":1709227448558,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$rPxZHy_U9NbSUtBo1xHo42W93Pg_a8tE-zM_P1X9hgA"},
{"content":{"body":"I fairly strongly feel that using `undefined` works better, because it triggers argument defaulting. JS having two nulls has always been weird.","format":"org.matrix.custom.html","formatted_body":"I fairly strongly feel that using <code>undefined</code> works better, because it triggers argument defaulting. JS having two nulls has always been weird.","m.mentions":{},"msgtype":"m.text"},"ts":1709233587146,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$sB7aFQ0s3ggGqP31ox_FDQG_HRR3ucc-cuP7qTmn0OY"},
{"content":{"body":"This argument cuts both waysâ€”you can recover the defaulting with ?? !","msgtype":"m.text"},"ts":1709243522632,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$zTCVowC1bl1gby6p-88w4DKaCCfyQfxjCJ1wvSCWcOA"},
{"content":{"body":"you'd have to do `?? undefined` tho, if you wanted to then trigger the defaulting somewhere else, which is weird and unergonomic and uncommon to know you need to do it","format":"org.matrix.custom.html","formatted_body":"you'd have to do <code>?? undefined</code> tho, if you wanted to then trigger the defaulting somewhere else, which is weird and unergonomic and uncommon to know you need to do it","m.mentions":{},"msgtype":"m.text"},"ts":1709249430187,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$vlursNldJHdKeEOf553S39Gi-mLMF-lUgRVY9yHxuuQ"}
]