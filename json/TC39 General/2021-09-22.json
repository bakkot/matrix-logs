[
{"content":{"body":"In Chrome:\n\n```\nconsole.log((new class {\n  #id;\n  \n  test(a,b) {\n    return a << #id in b\n  }\n}).test(0, {}))\n```\n\nParses without a SyntaxError and results with 'Uncaught TypeError: Cannot convert a Symbol value to a number'  when it does `(a << #id)`\nCould someone confirm if this is expected?","format":"org.matrix.custom.html","formatted_body":"<p>In Chrome:</p>\n<pre><code>console.log((new class {\n  #id;\n  \n  test(a,b) {\n    return a &lt;&lt; #id in b\n  }\n}).test(0, {}))\n</code></pre>\n<p>Parses without a SyntaxError and results with 'Uncaught TypeError: Cannot convert a Symbol value to a number'  when it does <code>(a &lt;&lt; #id)</code><br>Could someone confirm if this is expected?</p>\n","msgtype":"m.text"},"ts":1632319396325,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$m3jVyNylQmMpOyZXes6EMqP7YbTqVdj_6qKP9ygGO-o"},
{"content":{"body":"It should be a parse error, we had the same bug in Babel","msgtype":"m.text"},"ts":1632319463774,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$mN-reMmTzl-5HNXSOKVR6qYC7kuh_fHaz3BvrNObWhM"},
{"content":{"body":" * It should be a parser error, we had the same bug in Babel","m.new_content":{"body":"It should be a parser error, we had the same bug in Babel","msgtype":"m.text"},"m.relates_to":{"event_id":"$mN-reMmTzl-5HNXSOKVR6qYC7kuh_fHaz3BvrNObWhM","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1632319469650,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$lO7hIHxQs2QWnaP342ShDOkozrj9_EGg6LeadwQgnes"},
{"content":{"body":"Thanks nicolo-ribaudo - yes Babel emits a parser error as you say","format":"org.matrix.custom.html","formatted_body":"Thanks <a href=\"https://matrix.to/#/@nicolo-ribaudo:matrix.org\">nicolo-ribaudo</a> - yes Babel emits a parser error as you say","msgtype":"m.text"},"ts":1632319518629,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$_1BDWch4-cG04H53D3XudRbGZ-CwYLyp5Jx23Uscjvw"},
{"content":{"body":"I've just realized that I'm making the same mistake in the TypeScript parser","msgtype":"m.text"},"ts":1632319566103,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$wKPSwcCW9tGNC3dWtCOjB0sXz73x2LM9Hew00Lp1vhc"},
{"content":{"body":"It looks like JSC has the same bug:\n```\n➜ eshost -e \"class C { #x; test() { 0 << #x in {} } }\" -t\n┌────────────────┬──────────────────────────────────────────────────────────┐\n│ ChakraCore     │                                                          │\n│                │ SyntaxError: Invalid character                           │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ Hermes         │                                                          │\n│                │ SyntaxError: invalid expression                          │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ JavaScriptCore │ class C { #x; test() { 0 << #x in {} } }                 │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ Moddable XS    │                                                          │\n│                │ SyntaxError: missing expression                          │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ SpiderMonkey   │                                                          │\n│                │ SyntaxError: private names aren't valid in this context: │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ V8             │ class C { #x; test() { 0 << #x in {} } }                 │\n└────────────────┴──────────────────────────────────────────────────────────┘\n\n```","format":"org.matrix.custom.html","formatted_body":"<p>It looks like JSC has the same bug:</p>\n<pre><code>➜ eshost -e &quot;class C { #x; test() { 0 &lt;&lt; #x in {} } }&quot; -t\n┌────────────────┬──────────────────────────────────────────────────────────┐\n│ ChakraCore     │                                                          │\n│                │ SyntaxError: Invalid character                           │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ Hermes         │                                                          │\n│                │ SyntaxError: invalid expression                          │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ JavaScriptCore │ class C { #x; test() { 0 &lt;&lt; #x in {} } }                 │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ Moddable XS    │                                                          │\n│                │ SyntaxError: missing expression                          │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ SpiderMonkey   │                                                          │\n│                │ SyntaxError: private names aren't valid in this context: │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ V8             │ class C { #x; test() { 0 &lt;&lt; #x in {} } }                 │\n└────────────────┴──────────────────────────────────────────────────────────┘\n\n</code></pre>\n","msgtype":"m.text"},"ts":1632319745875,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$MCMQRTdaye7TNKHiAeS_6R2k0cite7RFMWmaw2iY43w"},
{"content":{"body":" * It looks like JSC has the same bug:\n```\n➜ eshost -e \"class C { #x; test() { 0 << #x in {} } }\" -t\n┌────────────────┬──────────────────────────────────────────────────────────┐\n│ ChakraCore     │                                                          │\n│                │ SyntaxError: Invalid character                           │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ Hermes         │                                                          │\n│                │ SyntaxError: invalid expression                          │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ JavaScriptCore │ class C { #x; test() { 0 << #x in {} } }                 │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ Moddable XS    │                                                          │\n│                │ SyntaxError: missing expression                          │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ SpiderMonkey   │                                                          │\n│                │ SyntaxError: private names aren't valid in this context: │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ V8             │ class C { #x; test() { 0 << #x in {} } }                 │\n└────────────────┴──────────────────────────────────────────────────────────┘\n```","format":"org.matrix.custom.html","formatted_body":" * <p>It looks like JSC has the same bug:</p>\n<pre><code>➜ eshost -e &quot;class C { #x; test() { 0 &lt;&lt; #x in {} } }&quot; -t\n┌────────────────┬──────────────────────────────────────────────────────────┐\n│ ChakraCore     │                                                          │\n│                │ SyntaxError: Invalid character                           │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ Hermes         │                                                          │\n│                │ SyntaxError: invalid expression                          │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ JavaScriptCore │ class C { #x; test() { 0 &lt;&lt; #x in {} } }                 │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ Moddable XS    │                                                          │\n│                │ SyntaxError: missing expression                          │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ SpiderMonkey   │                                                          │\n│                │ SyntaxError: private names aren't valid in this context: │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ V8             │ class C { #x; test() { 0 &lt;&lt; #x in {} } }                 │\n└────────────────┴──────────────────────────────────────────────────────────┘\n</code></pre>\n","m.new_content":{"body":"It looks like JSC has the same bug:\n```\n➜ eshost -e \"class C { #x; test() { 0 << #x in {} } }\" -t\n┌────────────────┬──────────────────────────────────────────────────────────┐\n│ ChakraCore     │                                                          │\n│                │ SyntaxError: Invalid character                           │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ Hermes         │                                                          │\n│                │ SyntaxError: invalid expression                          │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ JavaScriptCore │ class C { #x; test() { 0 << #x in {} } }                 │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ Moddable XS    │                                                          │\n│                │ SyntaxError: missing expression                          │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ SpiderMonkey   │                                                          │\n│                │ SyntaxError: private names aren't valid in this context: │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ V8             │ class C { #x; test() { 0 << #x in {} } }                 │\n└────────────────┴──────────────────────────────────────────────────────────┘\n```","format":"org.matrix.custom.html","formatted_body":"<p>It looks like JSC has the same bug:</p>\n<pre><code>➜ eshost -e &quot;class C { #x; test() { 0 &lt;&lt; #x in {} } }&quot; -t\n┌────────────────┬──────────────────────────────────────────────────────────┐\n│ ChakraCore     │                                                          │\n│                │ SyntaxError: Invalid character                           │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ Hermes         │                                                          │\n│                │ SyntaxError: invalid expression                          │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ JavaScriptCore │ class C { #x; test() { 0 &lt;&lt; #x in {} } }                 │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ Moddable XS    │                                                          │\n│                │ SyntaxError: missing expression                          │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ SpiderMonkey   │                                                          │\n│                │ SyntaxError: private names aren't valid in this context: │\n├────────────────┼──────────────────────────────────────────────────────────┤\n│ V8             │ class C { #x; test() { 0 &lt;&lt; #x in {} } }                 │\n└────────────────┴──────────────────────────────────────────────────────────┘\n</code></pre>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$MCMQRTdaye7TNKHiAeS_6R2k0cite7RFMWmaw2iY43w","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1632319767126,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$vN0pcm2poffVpsCY56KIYzhaDK0xU_tMrWK_8GzcZ2A"},
{"content":{"body":"ah, and we do as well","msgtype":"m.text"},"ts":1632322565164,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$InFKTZNko4824IxYWI3yFp_Go1Bc3s_rC5KUq7YGELo"},
{"content":{"body":"should fix","msgtype":"m.text"},"ts":1632322566534,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$D4_zwst1hC0GX34LvKrsyshQy13FywPzrVNahdeS8hA"},
{"content":{"body":"want me to raise an issue?","msgtype":"m.text"},"ts":1632322622240,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$7_rvp311yHi27ULZTCvDT79vn-dIVxDxBWe2D4BUpLc"},
{"content":{"body":"sure, feel free to file, i haven't done it yet","msgtype":"m.text"},"ts":1632322644675,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$8-kpgLks4v2CqDr4HkDRcmLIHt2MZZRcja-F5BazW_g"},
{"content":{"body":"https://bugs.chromium.org/p/v8/issues/detail?id=12259","msgtype":"m.text"},"ts":1632323531766,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$6HhLLqbfnlPxEcAsOx1U3HFxBfo4AD6uce9ZDQp2z3A"},
{"content":{"body":"thank you kindly","msgtype":"m.text"},"ts":1632324835959,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$m7thM6t5goNamkiokpb4TFCv4AmUKq5-NJP9Vu-Qwzo"},
{"content":{"body":"Wait till you see `#id in #id in obj`","format":"org.matrix.custom.html","formatted_body":"Wait till you see <code>#id in #id in obj</code>","msgtype":"m.text"},"ts":1632337680601,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$MCiCrHluJzulCLTYswy8tYtQ2FygEe1OZCcDP2vayzU"},
{"content":{"body":"that's fixed by the same fix","msgtype":"m.text"},"ts":1632337840964,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$fA8WakdX2KVCCj7HLwCbJSIxf0AwQTLYtgHfUa3vM-w"},
{"content":{"body":"which hopefully will land tomorrow","msgtype":"m.text"},"ts":1632337883946,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$bsukEsKQV0OwyZo6ibQ9_I7bv0HZqG2bG95EDss2nxw"}
]