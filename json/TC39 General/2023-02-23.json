[
{"content":{"body":"Hey, I noticed that the spec says `[[IsLockFree1]]` and `[[IsLockFree2]]` must be set for an agent cluster and can't change, but it doesn't say anything about `[[IsLockFree8]]`","format":"org.matrix.custom.html","formatted_body":"Hey, I noticed that the spec says <code>[[IsLockFree1]]</code> and <code>[[IsLockFree2]]</code> must be set for an agent cluster and can't change, but it doesn't say anything about <code>[[IsLockFree8]]</code>","msgtype":"m.text"},"ts":1677143938654,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$nG0pZ8OHddVcGU7_991WzJWXh9D4BEuD71zmxv6Zclg"},
{"content":{"body":"I thought this must have been intentional, but then I realized that `BigInt64Array` was of course added after the rest of TypedArrays","format":"org.matrix.custom.html","formatted_body":"I thought this must have been intentional, but then I realized that <code>BigInt64Array</code> was of course added after the rest of TypedArrays","msgtype":"m.text"},"ts":1677143970044,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$6x5PBlRytSXpndEdlr0jAmTr6jfjcUOD3sTEN6hu_YY"},
{"content":{"body":" * I thought this must have been intentional, but then I realized that `BigInt64Array` was of course added after the rest of TypedArrays","format":"org.matrix.custom.html","formatted_body":" * I thought this must have been intentional, but then I realized that <code>BigInt64Array</code> was of course added after the rest of TypedArrays","m.new_content":{"body":"I thought this must have been intentional, but then I realized that `BigInt64Array` was of course added after the rest of TypedArrays","format":"org.matrix.custom.html","formatted_body":"I thought this must have been intentional, but then I realized that <code>BigInt64Array</code> was of course added after the rest of TypedArrays","msgtype":"m.text"},"m.relates_to":{"event_id":"$6x5PBlRytSXpndEdlr0jAmTr6jfjcUOD3sTEN6hu_YY","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1677143982403,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$3VyQln52kp9TSrXdv7gojlk3WhrON7FJgOMMGp2oMZc"},
{"content":{"body":"so was this an oversight? or is it intended for some reason?","msgtype":"m.text"},"ts":1677143992091,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$cHc-_T04evCOqsprxmMeinPN3nqwa4InstOHZM-qGy4"},
{"content":{"body":"also, there are two notes on the meaning of those slots that seem to contradict each other","msgtype":"m.text"},"ts":1677144033357,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$GBaoamNmsW_Y-S4WVTE6A4piHR1GHAPhcS9W34XTQfc"},
{"content":{"body":"9.7 says they're set \"if atomic operations on 1/2/8-byte values are lock-free\", \"if an atomic operation is implemented with any type of lock the operation is not lock-free\"","msgtype":"m.text"},"ts":1677144080978,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$rD3KxHXTrcmWVf8vgSE0CcO66ZKc7buOG6sMwFLBSFo"},
{"content":{"body":"but the note in the definition of `Atomics.isLockFree()` says","format":"org.matrix.custom.html","formatted_body":"but the note in the definition of <code>Atomics.isLockFree()</code> says","msgtype":"m.text"},"ts":1677144104958,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$Mf1de2LxRrVhm-30104cV4-tIQaej5kDN3tRYCzj1Qk"},
{"content":{"body":"> if the atomic step of an atomic primitive \\[...\\] on a datum of size n bytes will be performed without the surrounding agent acquiring a lock _**outside the n bytes comprising the datum**_, then `Atomics.isLockFree(n)` will return true","format":"org.matrix.custom.html","formatted_body":"<blockquote>\n<p>if the atomic step of an atomic primitive [...] on a datum of size n bytes will be performed without the surrounding agent acquiring a lock <em><strong>outside the n bytes comprising the datum</strong></em>, then <code>Atomics.isLockFree(n)</code> will return true</p>\n</blockquote>\n","msgtype":"m.text"},"ts":1677144129622,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$RZ-3UGDeMyJEWDEsAuzKjj8HyZnbaM9b33Lw6a2UAlU"},
{"content":{"body":" * > if the atomic step of an atomic primitive \\[...\\] on a datum of size n bytes will be performed without the surrounding agent acquiring a lock _**outside the n bytes comprising the datum**_, then `Atomics.isLockFree(n)` will return true","format":"org.matrix.custom.html","formatted_body":" * <blockquote>\n<p>if the atomic step of an atomic primitive [...] on a datum of size n bytes will be performed without the surrounding agent acquiring a lock <em><strong>outside the n bytes comprising the datum</strong></em>, then <code>Atomics.isLockFree(n)</code> will return true</p>\n</blockquote>\n","m.new_content":{"body":"> if the atomic step of an atomic primitive \\[...\\] on a datum of size n bytes will be performed without the surrounding agent acquiring a lock _**outside the n bytes comprising the datum**_, then `Atomics.isLockFree(n)` will return true","format":"org.matrix.custom.html","formatted_body":"<blockquote>\n<p>if the atomic step of an atomic primitive [...] on a datum of size n bytes will be performed without the surrounding agent acquiring a lock <em><strong>outside the n bytes comprising the datum</strong></em>, then <code>Atomics.isLockFree(n)</code> will return true</p>\n</blockquote>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$RZ-3UGDeMyJEWDEsAuzKjj8HyZnbaM9b33Lw6a2UAlU","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1677144147048,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$r-e9O-9DZEQzBIn-VGKX_D7hUesqjcpWoWiQSVG_PF4"},
{"content":{"body":"those don't seem to be equivalent","msgtype":"m.text"},"ts":1677144164521,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$wG4LqeJHVUbK32OKtuL_M5cT-koU2LIVF6vpo6IDsas"},
{"content":{"body":"I don't know too much about memory models, so I might very well be missing stuff, but if so, that could use more clarification","msgtype":"m.text"},"ts":1677144249841,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$_GOHulm55MV6B-ruUcqo5I_K97WVfTYMdM_aXlGBrJc"},
{"content":{"body":"Andreu Botella: there are some (or maybe just one) open issues around the memory model, though I don't recall seeing this particular one being raised","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@abotella:igalia.com\">Andreu Botella</a>: there are some (or maybe just one) open issues around the memory model, though I don't recall seeing this particular one being raised","msgtype":"m.text"},"ts":1677144530151,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$5HhgM1l7YIy8X52ecFwFKeK4tr_8tzYjU9B-8NZV9cY"},
{"content":{"body":"In general the formality around agents also leaves a lot to be desired (also filed)","msgtype":"m.text"},"ts":1677144564754,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$GKxy_hajYsKV99kSeEv_9qLbfbdMem-M5DQdJqpwMu4"},
{"content":{"body":"Has Map.prototype.extend() or equivalent ever been discussed?","msgtype":"m.text"},"ts":1677160787173,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$YvrqQpbr3ym3OyKJNHZKr4fpaqTgaMyv34EvG3FLKcs"},
{"content":{"body":"Andreu Botella: sounds like an oversight to me","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@abotella:igalia.com\">Andreu Botella</a>: sounds like an oversight to me","msgtype":"m.text"},"ts":1677168218113,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$wVwn5TMWqjhWyP6o-E3O4kVvpcFEd4kVmsN3nEeyinY"},
{"content":{"body":"those are both in non-normative notes, but they also seem roughly equivalent to me for building intuition","msgtype":"m.text"},"ts":1677170215800,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$cdA_IfVjCv3B3f-4ydnLSG_sdoVCqqN4mzeGoT6_Bys"},
{"content":{"body":"can you expand on what the confusion is?","msgtype":"m.text"},"ts":1677170220521,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$2k7K9hSmg-F126mIftbdsptdR6fHgIyyLHWfKiqxQ3I"},
{"content":{"body":"one is \"atomic operations of size n will be performed without acquiring a lock, at all\", the other is \"without acquiring a lock outside of those specific n bytes\"","msgtype":"m.text"},"ts":1677170269762,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$pjh6t42Tu-vlqhTqghpAtuzYp8ndOmslH5etZjmigdc"},
{"content":{"body":"agreed the second one is more confusing, don't recall why we called out \"specific N bytes\", that doesn't seem useful to call out","msgtype":"m.text"},"ts":1677170315125,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$9gGoBzH1ac2PYXdtnA3gLlFrzerOjV9fuhH9WaIKDY8"},
{"content":{"body":"our original intention of the meaning of \"lock-free\" is the formal one","msgtype":"m.text"},"ts":1677170353039,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$cGqCkvR0O-SrYb43pRORVP1D-oauqUpCgu2LfZ_H8vM"}
]