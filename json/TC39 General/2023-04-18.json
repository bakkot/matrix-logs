[
{"content":{"body":"is there any way to represent an \"anywhere on earth\" (AoE) time in Temporal, or am I just expected to know what the timezone with the biggest negative offset is at all times?","msgtype":"m.text"},"ts":1681776756244,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$9p5PjN8ONc7vzCshJ1Rm8PesxbDN2yAkQTxrkvdmqeI"},
{"content":{"body":"it would be up to the TZDB to add such a time zone, I guess. if there was a mechanism to find the time zone with the biggest negative offset, it would not work on hosts that ship no TZDB. it would also leak fingerprinting information without obviously doing so","msgtype":"m.text"},"ts":1681777103622,"senderName":"ptomato","senderId":"@pchimento:igalia.com","id":"$Qyef6gvdJWAfjto3BnBKPNn6eyiBrpqzUVhDHZUc35w"},
{"content":{"body":"I guess both \"everywhere on earth\" (highest magnitude negative offset) and \"somewhere on earth\" (highest magnitude positive offset) are useful, though I have only seen a use for the former","msgtype":"m.text"},"ts":1681777134180,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$a6hmKfKF5sALyGRQyGOBUoMTTsD0OOLWjCt_4dvM4RY"},
{"content":{"body":"ptomato: it's not a unique timezone, but it could be an alias I guess?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@pchimento:igalia.com\">ptomato</a>: it's not a unique timezone, but it could be an alias I guess?","msgtype":"m.text"},"ts":1681777159273,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$YFoRFepZ81tF_KJbaTyIbKnq-_HMRaSiOOStNEKgw9w"},
{"content":{"body":"here's an off-the-cuff code snippet that will give you the last possible local time when it is still 2023-04-20 anywhere on earth:\n```js\nconst aoeWallTime = Temporal.PlainDateTime.from('2023-04-20T23:59:59.999999999');\nconst aoeExactTime = Intl.supportedValuesOf('timeZone').reduce((last, id) => {\n  const candidate = aoeWallTime.toZonedDateTime(id);\n  if (!last || Temporal.ZonedDateTime.compare(candidate, last) > 0) return candidate;\n  return last;\n}, null);\nconst localTime = aoeExactTime.withTimeZone(Temporal.Now.timeZoneId());\nconsole.log(localTime.toString());\n```","format":"org.matrix.custom.html","formatted_body":"<p>here's an off-the-cuff code snippet that will give you the last possible local time when it is still 2023-04-20 anywhere on earth:</p>\n<pre><code class=\"language-js\">const aoeWallTime = Temporal.PlainDateTime.from('2023-04-20T23:59:59.999999999');\nconst aoeExactTime = Intl.supportedValuesOf('timeZone').reduce((last, id) =&gt; {\n  const candidate = aoeWallTime.toZonedDateTime(id);\n  if (!last || Temporal.ZonedDateTime.compare(candidate, last) &gt; 0) return candidate;\n  return last;\n}, null);\nconst localTime = aoeExactTime.withTimeZone(Temporal.Now.timeZoneId());\nconsole.log(localTime.toString());\n</code></pre>\n","msgtype":"m.text"},"ts":1681777906054,"senderName":"ptomato","senderId":"@pchimento:igalia.com","id":"$YnYn7YeRu2UWvtcsvvVdNKQJT2ZI_jn5ozAt_IRfp6E"},
{"content":{"body":"eh, that works well enough for me","msgtype":"m.text"},"ts":1681778394295,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$5JXCOnv_NCDXvNMkoJpSXXFQJtAWo3rp4XmWf0-nuiA"},
{"content":{"body":"might still be nice to be able to actually represent that time in a way that you can pass around to other APIs or store for later","msgtype":"m.text"},"ts":1681778569041,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$B0yqmvobAHYj8n5edNOaASWNrQYQAk5WeodJUWdknjE"},
{"content":{"body":"what you store for later depends on whether you want the stored time to change if the host updates its TZDB","msgtype":"m.text"},"ts":1681778710092,"senderName":"ptomato","senderId":"@pchimento:igalia.com","id":"$YyNcKzNr6FbPBTmFQYuUhzQYCLMi2jeyuQDfEnxJYa8"},
{"content":{"body":"I do","msgtype":"m.text"},"ts":1681778719638,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$NCVxJnpaXyVBEzU_AAoHlR1lzWUgKeTTy8fdEEv9Flk"},
{"content":{"body":"if you don't, storing `aoeExactTime.toInstant()` is enough. if you do, you have to store `aoeWallTime` and run this snippet again","format":"org.matrix.custom.html","formatted_body":"if you don't, storing <code>aoeExactTime.toInstant()</code> is enough. if you do, you have to store <code>aoeWallTime</code> and run this snippet again","msgtype":"m.text"},"ts":1681778768970,"senderName":"ptomato","senderId":"@pchimento:igalia.com","id":"$gecwYgMqYRqsbbwgrk18k7qUe9DKuJ0wEwWanGODRXA"},
{"content":{"body":"yes, exactly, that's the thing I am asking for","msgtype":"m.text"},"ts":1681778826483,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$BBxRn45xIyZHrmc_JEmKdtgQWGKnjcBXXtjyKKNWCms"},
{"content":{"body":"it sounds like it will require a timezone alias be added to tzdb","msgtype":"m.text"},"ts":1681778835898,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$wzyd8TTQzZZ2rpg7emb6amkSxjetg2ZSGCCLd62QygY"},
{"content":{"body":"I mean ... this _could_ be a TC39 thing - but that seems like the wrong domain to solve the problem in","format":"org.matrix.custom.html","formatted_body":"I mean ... this <em>could</em> be a TC39 thing - but that seems like the wrong domain to solve the problem in","msgtype":"m.text"},"ts":1681778914523,"senderName":"ptomato","senderId":"@pchimento:igalia.com","id":"$aWkKyaAPJAtlt03KRJQ2GQIKfeHDv8p7jiT_G6p1XI0"},
{"content":{"body":"Could this be achieved through custom timezones?","msgtype":"m.text"},"ts":1681818585015,"senderName":"ryzokuken","senderId":"@usharma:igalia.com","id":"$GxiqJlYt-Lm0KkasBPhsIoqJ2rWYZygw2Yy_rPT_57Y"},
{"content":{"body":"Although I guess all the rest of Temporal would need to know how to handle that... We do need an `Etc/AoE` or something of the sort","msgtype":"m.text"},"ts":1681818642271,"senderName":"ryzokuken","senderId":"@usharma:igalia.com","id":"$kV2PiLn9C3oBzvcSmtNzJ_z9-m9DpWdu-DzNxbzM_AM"},
{"content":{"body":" * Although I guess all the rest of Temporal would need to know how to handle that... We do need an `Etc/AoE` or something of the sort","format":"org.matrix.custom.html","formatted_body":" * Although I guess all the rest of Temporal would need to know how to handle that... We do need an <code>Etc/AoE</code> or something of the sort","m.new_content":{"body":"Although I guess all the rest of Temporal would need to know how to handle that... We do need an `Etc/AoE` or something of the sort","format":"org.matrix.custom.html","formatted_body":"Although I guess all the rest of Temporal would need to know how to handle that... We do need an <code>Etc/AoE</code> or something of the sort","msgtype":"m.text"},"m.relates_to":{"event_id":"$kV2PiLn9C3oBzvcSmtNzJ_z9-m9DpWdu-DzNxbzM_AM","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1681818670708,"senderName":"ryzokuken","senderId":"@usharma:igalia.com","id":"$dEzM8dlIS58a6dXvUFxJRWODttFdAK22SiviXLNtbio"}
]