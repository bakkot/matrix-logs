[
{"content":{"body":"I just don't think there is a way in JS to express linear types, which would pretty much be required for any sender opt-in of exclusive use ","msgtype":"m.text"},"ts":1670371210493,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$vx8Vsd2Akm7YE9wjWy28nvBK2G_C_lltycM_pAByW4A"},
{"content":{"body":"True.","msgtype":"m.text","org.matrix.msc1767.text":"True."},"ts":1670371236424,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$lqDaX5F6AE_ejA6JybhRN7oTZGe4gVRcohjujMHzn7o"},
{"content":{"body":"Are you arguing that detachment is a composition hazard we shouldn’t tolerate?","msgtype":"m.text","org.matrix.msc1767.text":"Are you arguing that detachment is a composition hazard we shouldn’t tolerate?"},"ts":1670371260864,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$iHGu9AYqHehg1AVqxPU4V72WduZhGD9qwZQbqcoOapw"},
{"content":{"body":"Ah you'd need to add an explicit \"detach\" for CoW to make sense, so that the program can express release of the copy before GC can figure that out","msgtype":"m.text"},"ts":1670371305363,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$B5sqQaMcmfvtQot1PEqwq0ajaMOTPmY4Th6k_K17PtQ"},
{"content":{"body":"And the sender and receiver would need separate views so the sender’s detachment doesn’t break the receiver.","msgtype":"m.text","org.matrix.msc1767.text":"And the sender and receiver would need separate views so the sender’s detachment doesn’t break the receiver."},"ts":1670371368156,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$WrhMCBp4zuIInrQsNbgk4O8GcqpdLy33NC17d3euxZc"},
{"content":{"body":"> <@kriskowal:matrix.org> Are you arguing that detachment is a composition hazard we shouldn’t tolerate?\n\nCorrect. The sender would need to somehow opt-in it expect the receiver to temporarily claim a lock ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$iHGu9AYqHehg1AVqxPU4V72WduZhGD9qwZQbqcoOapw?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@kriskowal:matrix.org\">@kriskowal:matrix.org</a><br />Are you arguing that detachment is a composition hazard we shouldn’t tolerate?</blockquote></mx-reply>Correct. The sender would need to somehow opt-in it expect the receiver to temporarily claim a lock","m.relates_to":{"m.in_reply_to":{"event_id":"$iHGu9AYqHehg1AVqxPU4V72WduZhGD9qwZQbqcoOapw"}},"msgtype":"m.text"},"ts":1670371371787,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$e8WWyN9eyltJzKkiNX0dJiiTHIkqPyeZ8Sq8kvgMWxk"},
{"content":{"body":"Thus `take()`","format":"org.matrix.custom.html","formatted_body":"Thus <code>take()</code>","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Thus `take()`","mimetype":"text/plain"},{"body":"Thus <code>take()</code>","mimetype":"text/html"}]},"ts":1670371374708,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$w34PCQtbYd-uqqUTmzGEUgho7zOYky7Eyrucknlj7lk"},
{"content":{"body":"Or rather, `give()`","format":"org.matrix.custom.html","formatted_body":"Or rather, <code>give()</code>","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Or rather, `give()`","mimetype":"text/plain"},{"body":"Or rather, <code>give()</code>","mimetype":"text/html"}]},"ts":1670371391947,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$PUdq5YZrV1HrwQS1YDemkZ-LtgAAx8Xh12utLLe2E4g"},
{"content":{"body":"Or rather, `transfer()`? I think I see where this is headed.","format":"org.matrix.custom.html","formatted_body":"Or rather, <code>transfer()</code>? I think I see where this is headed.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Or rather, `transfer()`? I think I see where this is headed.","mimetype":"text/plain"},{"body":"Or rather, <code>transfer()</code>? I think I see where this is headed.","mimetype":"text/html"}]},"ts":1670371418061,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$9Ae85NBrxb_dXIFSI184GljgzkRsqkpHZgryFRuCkLs"},
{"content":{"body":"> <@kriskowal:matrix.org> And the sender and receiver would need separate views so the sender’s detachment doesn’t break the receiver.\n\nIf by view you mean the array buffer, then there's already an API for that: `slice()`","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$WrhMCBp4zuIInrQsNbgk4O8GcqpdLy33NC17d3euxZc?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@kriskowal:matrix.org\">@kriskowal:matrix.org</a><br />And the sender and receiver would need separate views so the sender’s detachment doesn’t break the receiver.</blockquote></mx-reply>If by view you mean the array buffer, then there's already an API for that: <code>slice()</code>","m.relates_to":{"m.in_reply_to":{"event_id":"$WrhMCBp4zuIInrQsNbgk4O8GcqpdLy33NC17d3euxZc"}},"msgtype":"m.text"},"ts":1670371435004,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$kSYqqaEhTwis2S9klSXKVBOKHeFGoohZ2agOpGo26Jo"},
{"content":{"body":"Fair.","msgtype":"m.text","org.matrix.msc1767.text":"Fair."},"ts":1670371454971,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$-NwbuZdkJ4sjW9NT820SOJxS9azokZsK27bYkjVZ7YA"},
{"content":{"body":"(for CoW)","msgtype":"m.text"},"ts":1670371455505,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$4WkGPpEnrwVRwfuKThEI5vo1URiIZ3w0bGHdP-F0KNY"},
{"content":{"body":"Sorry I'm jumping back and forth between the 2 approaches.","msgtype":"m.text"},"ts":1670371486865,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$yhWa_I2ZJbX6Quk7yTpwfi7VdEArchIag88edr76FAs"}
]