[
{"content":{"body":"> <@tewuzij:tzchat.org> What is the TC39 space id on Matrix?\n\nhttps://matrix.to/#/#tc39-space:matrix.org","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$iqR3a0GG5ZpB5YhLuQnksNxuf2D_QFfpwoxO8o453BE?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@tewuzij:tzchat.org\">@tewuzij:tzchat.org</a><br>What is the TC39 space id on Matrix?</blockquote></mx-reply>https://matrix.to/#/#tc39-space:matrix.org","m.relates_to":{"m.in_reply_to":{"event_id":"$iqR3a0GG5ZpB5YhLuQnksNxuf2D_QFfpwoxO8o453BE"}},"msgtype":"m.text"},"ts":1692627809333,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$OtATYnRJI7wK5aMpGdjx34XxaiL7s6zVu6GsdKl1rFg"},
{"content":{"body":"Hey there! üëã \nI had an idea for a long time related to static variables inside the functions like how it's implemented in other low-level languages like C++ and I finally and I finally decided to start describing the document. Unfortunately, I have not yet figured out exactly how to describe it correctly and where I should publish it, but I found this chat in the CONTRIBUTING document of the ecma262 repo.\n\nHere is my proposal: https://github.com/yehoryatskevych/proposal-function-static-variables\nPlease correct me if I'm wrong somewhere and I'm open for the discussion.\nThanks! üôè\n\n```javascript\nfunction func() {\n    static let isFirstCall = true;\n    static let counter = 0;\n\n    if (isFirstCall) {\n        isFirstCall = false;\n        console.log('Static variables initialized!');\n    }\n\n    console.log(\"Counter:\", counter);\n\n    counter++;\n}\n\nfunc(); // OUT: \"Static variables initialized!\", \"Counter: 0\"\nfunc(); // OUT: \"Counter: 1\"\nfunc(); // OUT: \"Counter: 2\"\n```","format":"org.matrix.custom.html","formatted_body":"<p>Hey there! üëã<br>I had an idea for a long time related to static variables inside the functions like how it's implemented in other low-level languages like C++ and I finally and I finally decided to start describing the document. Unfortunately, I have not yet figured out exactly how to describe it correctly and where I should publish it, but I found this chat in the CONTRIBUTING document of the ecma262 repo.</p>\n<p>Here is my proposal: https://github.com/yehoryatskevych/proposal-function-static-variables<br>Please correct me if I'm wrong somewhere and I'm open for the discussion.<br>Thanks! üôè</p>\n<pre><code class=\"language-javascript\">function func() {\n    static let isFirstCall = true;\n    static let counter = 0;\n\n    if (isFirstCall) {\n        isFirstCall = false;\n        console.log('Static variables initialized!');\n    }\n\n    console.log(\"Counter:\", counter);\n\n    counter++;\n}\n\nfunc(); // OUT: \"Static variables initialized!\", \"Counter: 0\"\nfunc(); // OUT: \"Counter: 1\"\nfunc(); // OUT: \"Counter: 2\"\n</code></pre>\n","msgtype":"m.text"},"ts":1692655123458,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$Cxq9ISESOg15QYL5S_INZhqMfFw39kmk4yCo-dKc9NA"},
{"content":{"body":" * Hey there! üëã\nI had an idea for a long time related to static variables inside the functions like how it's implemented in other low-level languages like C++ and I finally and I finally decided to start describing the document. Unfortunately, I have not yet figured out exactly how to describe it correctly and where I should publish it, but I found this chat in the CONTRIBUTING document of the ecma262 repo.\n\nHere is my proposal: https://github.com/yehoryatskevych/proposal-function-static-variables\n\nPlease correct me if I'm wrong somewhere and I'm open for the discussion.\nThanks! üôè\n\n```javascript\nfunction func() {\n    static let isFirstCall = true;\n    static let counter = 0;\n\n    if (isFirstCall) {\n        isFirstCall = false;\n        console.log('Static variables initialized!');\n    }\n\n    console.log(\"Counter:\", counter);\n\n    counter++;\n}\n\nfunc(); // OUT: \"Static variables initialized!\", \"Counter: 0\"\nfunc(); // OUT: \"Counter: 1\"\nfunc(); // OUT: \"Counter: 2\"\n```","format":"org.matrix.custom.html","formatted_body":" * <p>Hey there! üëã<br>I had an idea for a long time related to static variables inside the functions like how it's implemented in other low-level languages like C++ and I finally and I finally decided to start describing the document. Unfortunately, I have not yet figured out exactly how to describe it correctly and where I should publish it, but I found this chat in the CONTRIBUTING document of the ecma262 repo.</p>\n<p>Here is my proposal: https://github.com/yehoryatskevych/proposal-function-static-variables</p>\n<p>Please correct me if I'm wrong somewhere and I'm open for the discussion.<br>Thanks! üôè</p>\n<pre><code class=\"language-javascript\">function func() {\n    static let isFirstCall = true;\n    static let counter = 0;\n\n    if (isFirstCall) {\n        isFirstCall = false;\n        console.log('Static variables initialized!');\n    }\n\n    console.log(\"Counter:\", counter);\n\n    counter++;\n}\n\nfunc(); // OUT: \"Static variables initialized!\", \"Counter: 0\"\nfunc(); // OUT: \"Counter: 1\"\nfunc(); // OUT: \"Counter: 2\"\n</code></pre>\n","m.new_content":{"body":"Hey there! üëã\nI had an idea for a long time related to static variables inside the functions like how it's implemented in other low-level languages like C++ and I finally and I finally decided to start describing the document. Unfortunately, I have not yet figured out exactly how to describe it correctly and where I should publish it, but I found this chat in the CONTRIBUTING document of the ecma262 repo.\n\nHere is my proposal: https://github.com/yehoryatskevych/proposal-function-static-variables\n\nPlease correct me if I'm wrong somewhere and I'm open for the discussion.\nThanks! üôè\n\n```javascript\nfunction func() {\n    static let isFirstCall = true;\n    static let counter = 0;\n\n    if (isFirstCall) {\n        isFirstCall = false;\n        console.log('Static variables initialized!');\n    }\n\n    console.log(\"Counter:\", counter);\n\n    counter++;\n}\n\nfunc(); // OUT: \"Static variables initialized!\", \"Counter: 0\"\nfunc(); // OUT: \"Counter: 1\"\nfunc(); // OUT: \"Counter: 2\"\n```","format":"org.matrix.custom.html","formatted_body":"<p>Hey there! üëã<br>I had an idea for a long time related to static variables inside the functions like how it's implemented in other low-level languages like C++ and I finally and I finally decided to start describing the document. Unfortunately, I have not yet figured out exactly how to describe it correctly and where I should publish it, but I found this chat in the CONTRIBUTING document of the ecma262 repo.</p>\n<p>Here is my proposal: https://github.com/yehoryatskevych/proposal-function-static-variables</p>\n<p>Please correct me if I'm wrong somewhere and I'm open for the discussion.<br>Thanks! üôè</p>\n<pre><code class=\"language-javascript\">function func() {\n    static let isFirstCall = true;\n    static let counter = 0;\n\n    if (isFirstCall) {\n        isFirstCall = false;\n        console.log('Static variables initialized!');\n    }\n\n    console.log(\"Counter:\", counter);\n\n    counter++;\n}\n\nfunc(); // OUT: \"Static variables initialized!\", \"Counter: 0\"\nfunc(); // OUT: \"Counter: 1\"\nfunc(); // OUT: \"Counter: 2\"\n</code></pre>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$Cxq9ISESOg15QYL5S_INZhqMfFw39kmk4yCo-dKc9NA","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1692655150764,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$x6cOw8TZfkPaOHB63dudayql5XJ-MVeqhquFZpDFQg8"},
{"content":{"body":"Yehor Yatskevych the most important part of any proposal is to explain what problem you're solving, compared to what you'd currently do.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@yehoryatskevych:matrix.org\">Yehor Yatskevych</a> the most important part of any proposal is to explain what problem you're solving, compared to what you'd currently do.","msgtype":"m.text"},"ts":1692655704988,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$ajMv28p7L4Kw_UY8ttoX_GgjrQBuM8w5aWLGXAlS4Ks"},
{"content":{"body":"What's the problem this is solving? How would this work better than:\n```\nlet isFirstCall = true;\nlet counter = 0;\nfunction func() {\n  ‚Ä¶\n```\n?","format":"org.matrix.custom.html","formatted_body":"<p>What's the problem this is solving? How would this work better than:</p>\n<pre><code>let isFirstCall = true;\nlet counter = 0;\nfunction func() {\n  ‚Ä¶\n</code></pre>\n<p>?</p>\n","msgtype":"m.text"},"ts":1692655728762,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$g_FLnv06gW60GXrow7IP36APAo0KX0SSjSD28G-WswA"},
{"content":{"body":"Right now the thing you'd do is use a closure, and hoist the `static` variables out of the closure. How is your suggestion better than that?","format":"org.matrix.custom.html","formatted_body":"Right now the thing you'd do is use a closure, and hoist the <code>static</code> variables out of the closure. How is your suggestion better than that?","msgtype":"m.text"},"ts":1692655728878,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$x4KVsTikmjkyd9YUiQgAo0RZvtQJBbBjsxINmSkNWFU"},
{"content":{"body":"(also the main place suggestions go is the discourse; in this case this exact thing was proposed a few years ago; you may find the discussion helpful though it's pretty brief https://es.discourse.group/t/c-style-static-variables/511 )","msgtype":"m.text"},"ts":1692655993187,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$E5xp3Ub3xTH1k1O0UPiCUoR3L6saK9Tim_oPboUaMO0"},
{"content":{"body":"> <@bakkot:matrix.org> Right now the thing you'd do is use a closure, and hoist the `static` variables out of the closure. How is your suggestion better than that?\n\nI see, I'll try to write about the problem more, thanks for your answer!","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$x4KVsTikmjkyd9YUiQgAo0RZvtQJBbBjsxINmSkNWFU?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@bakkot:matrix.org\">@bakkot:matrix.org</a><br>Right now the thing you'd do is use a closure, and hoist the <code>static</code> variables out of the closure. How is your suggestion better than that?</blockquote></mx-reply>I see, I'll try to write about the problem more, thanks for your answer!","m.relates_to":{"m.in_reply_to":{"event_id":"$x4KVsTikmjkyd9YUiQgAo0RZvtQJBbBjsxINmSkNWFU"}},"msgtype":"m.text"},"ts":1692656013820,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$BfwtQiQGilZ4TxkenOAdjXhNnSnI7I3E4zdswM-_jfE"},
{"content":{"body":"> <@bakkot:matrix.org> (also the main place suggestions go is the discourse; in this case this exact thing was proposed a few years ago; you may find the discussion helpful though it's pretty brief https://es.discourse.group/t/c-style-static-variables/511 )\n\nOh, let me take a look! Thanks!","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$E5xp3Ub3xTH1k1O0UPiCUoR3L6saK9Tim_oPboUaMO0?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@bakkot:matrix.org\">@bakkot:matrix.org</a><br>(also the main place suggestions go is the discourse; in this case this exact thing was proposed a few years ago; you may find the discussion helpful though it&#39;s pretty brief https://es.discourse.group/t/c-style-static-variables/511 )</blockquote></mx-reply>Oh, let me take a look! Thanks!","m.relates_to":{"m.in_reply_to":{"event_id":"$E5xp3Ub3xTH1k1O0UPiCUoR3L6saK9Tim_oPboUaMO0"}},"msgtype":"m.text"},"ts":1692656103081,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$6RMM7VUZq_sMIrkXk_BEBwawfgFKTMK2ubKn3qEbIVM"},
{"content":{"body":"> <@ljharb:matrix.org> What's the problem this is solving? How would this work better than:\n> ```\n> let isFirstCall = true;\n> let counter = 0;\n> function func() {\n>   ‚Ä¶\n> ```\n> ?\n\nBetter, because functions can have their own state independently from the global context and remove the problem with naming variables and name conflicts, also the function can be easily refactored and moved to another file without wasting time on finding all variables the function depends on.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$g_FLnv06gW60GXrow7IP36APAo0KX0SSjSD28G-WswA?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br><p>What's the problem this is solving? How would this work better than:</p>\n<pre><code>let isFirstCall = true;\nlet counter = 0;\nfunction func() {\n  ‚Ä¶\n</code></pre>\n<p>?</p>\n</blockquote></mx-reply>Better, because functions can have their own state independently from the global context and remove the problem with naming variables and name conflicts, also the function can be easily refactored and moved to another file without wasting time on finding all variables the function depends on.","m.relates_to":{"m.in_reply_to":{"event_id":"$g_FLnv06gW60GXrow7IP36APAo0KX0SSjSD28G-WswA"}},"msgtype":"m.text"},"ts":1692656301931,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$3fiKjZzv3j82XKDOtCh8k4cP2tCH5nHS1wnMKZPyCIE"},
{"content":{"body":"If it's just about encapsulation, you can do that pretty easily:\n\n```\nlet fn = (() => {\n  let isFirstCall = true;\n  let counter = 0;\n  return function fn() {...};\n})();\n```","format":"org.matrix.custom.html","formatted_body":"<p>If it's just about encapsulation, you can do that pretty easily:</p>\n<pre><code>let fn = (() =&gt; {\n  let isFirstCall = true;\n  let counter = 0;\n  return function fn() {...};\n})();\n</code></pre>\n","msgtype":"m.text"},"ts":1692656370883,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$AsIyBZyQqK9bB9VlNRSTFJldbjs5JnswSn2BOIklvQk"},
{"content":{"body":"That would get even simpler with https://github.com/tc39/proposal-do-expressions/, if that ends up happening","msgtype":"m.text"},"ts":1692656398578,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$OyAZdWLjkByc2xxx5CVhOpvkiB5cJmvk-OLUveMsDy4"},
{"content":{"body":"> <@bakkot:matrix.org> If it's just about encapsulation, you can do that pretty easily:\n> \n> ```\n> let fn = (() => {\n>   let isFirstCall = true;\n>   let counter = 0;\n>   return function fn() {...};\n> })();\n> ```\n\nof course, that's how you can do it right now, but that's dirty code and it is already problematic to use this in methods. At the moment I'm looking for solutions and I'm trying to create a concept in which JS can be used as scripting engine for the gamedev and static variables is extremely useful for \"update\" and other functions which should be called every frame.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$AsIyBZyQqK9bB9VlNRSTFJldbjs5JnswSn2BOIklvQk?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@bakkot:matrix.org\">@bakkot:matrix.org</a><br><p>If it's just about encapsulation, you can do that pretty easily:</p>\n<pre><code>let fn = (() =&gt; {\n  let isFirstCall = true;\n  let counter = 0;\n  return function fn() {...};\n})();\n</code></pre>\n</blockquote></mx-reply>of course, that's how you can do it right now, but that's dirty code and it is already problematic to use this in methods. At the moment I'm looking for solutions and I'm trying to create a concept in which JS can be used as scripting engine for the gamedev and static variables is extremely useful for \"update\" and other functions which should be called every frame.","m.relates_to":{"m.in_reply_to":{"event_id":"$AsIyBZyQqK9bB9VlNRSTFJldbjs5JnswSn2BOIklvQk"}},"msgtype":"m.text"},"ts":1692656650580,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$yRqKBcKEP3fEopsBE-PBjEFHcxZLi1eHOiSy1nqGInM"},
{"content":{"body":"I don't think it's especially dirty code? And it works fine for methods, not sure what you mean there.","msgtype":"m.text"},"ts":1692656688225,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$QFavKiQCesWzWzAKUvUvGuMVhpY1yNW2MHHnr5d5nzo"},
{"content":{"body":" * of course, that's how you can do it right now, but that's dirty code and it is already problematic to use this in methods. At the moment I'm looking for solutions and I'm trying to create a concept in which JS can be used as scripting engine for the gamedev and static variables is extremely useful for \"update\" and other functions which should be called every frame. This is also applicable for other high performance programs and recursion to avoid unnecessary allocations.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$AsIyBZyQqK9bB9VlNRSTFJldbjs5JnswSn2BOIklvQk?via=matrix.org&amp;via=mozilla.org&amp;via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@bakkot:matrix.org\">@bakkot:matrix.org</a><br><p>If it's just about encapsulation, you can do that pretty easily:</p>\n<pre><code>let fn = (() =&gt; {\n  let isFirstCall = true;\n  let counter = 0;\n  return function fn() {...};\n})();\n</code></pre>\n</blockquote></mx-reply> * of course, that's how you can do it right now, but that's dirty code and it is already problematic to use this in methods. At the moment I'm looking for solutions and I'm trying to create a concept in which JS can be used as scripting engine for the gamedev and static variables is extremely useful for \"update\" and other functions which should be called every frame. This is also applicable for other high performance programs and recursion to avoid unnecessary allocations.","m.new_content":{"body":"of course, that's how you can do it right now, but that's dirty code and it is already problematic to use this in methods. At the moment I'm looking for solutions and I'm trying to create a concept in which JS can be used as scripting engine for the gamedev and static variables is extremely useful for \"update\" and other functions which should be called every frame. This is also applicable for other high performance programs and recursion to avoid unnecessary allocations.","format":"org.matrix.custom.html","formatted_body":"of course, that's how you can do it right now, but that's dirty code and it is already problematic to use this in methods. At the moment I'm looking for solutions and I'm trying to create a concept in which JS can be used as scripting engine for the gamedev and static variables is extremely useful for \"update\" and other functions which should be called every frame. This is also applicable for other high performance programs and recursion to avoid unnecessary allocations.","msgtype":"m.text"},"m.relates_to":{"event_id":"$yRqKBcKEP3fEopsBE-PBjEFHcxZLi1eHOiSy1nqGInM","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1692656701023,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$nXhL-P57ARPoUj2hvVpmV1_xSAkir9a_NYL6LOekuyA"},
{"content":{"body":"Closure\n```javascript\nGameEvents.subscribe('frame', (\n    () => {\n        let velocity = new Vec3();\n\n        return () => {\n            for (player of getPlayers()) {\n                const position = player.getPosition();\n                const dir = player.getAngles().toVector();\n                velocity.set(position).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)());\n```\n\n```javascript\nconst onServerFrame = (\n    () => {\n        let velocity = new Vec3();\n\n        return () => {\n            for (player of getPlayers()) {\n                const position = player.getPosition();\n                const dir = player.getAngles().toVector();\n                velocity.set(position).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)();\n\nGameEvents.subscribe('frame', onServerFrame);\n```\n\nVersus static proposal.\n\n```javascript\nGameEvents.subscribe('frame', () => {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const position = player.getPosition();\n        const dir = player.getAngles().toVector();\n        velocity.set(position).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n});\n```\n```javascript\nGameEvents.subscribe('frame', onServerFrame);\n\nfunction onServerFrame() {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const position = player.getPosition();\n        const dir = player.getAngles().toVector();\n        velocity.set(position).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n}\n```\n\nBetter readability, function declaration pattern support, less code","format":"org.matrix.custom.html","formatted_body":"<p>Closure</p>\n<pre><code class=\"language-javascript\">GameEvents.subscribe('frame', (\n    () =&gt; {\n        let velocity = new Vec3();\n\n        return () =&gt; {\n            for (player of getPlayers()) {\n                const position = player.getPosition();\n                const dir = player.getAngles().toVector();\n                velocity.set(position).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)());\n</code></pre>\n<pre><code class=\"language-javascript\">const onServerFrame = (\n    () =&gt; {\n        let velocity = new Vec3();\n\n        return () =&gt; {\n            for (player of getPlayers()) {\n                const position = player.getPosition();\n                const dir = player.getAngles().toVector();\n                velocity.set(position).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)();\n\nGameEvents.subscribe('frame', onServerFrame);\n</code></pre>\n<p>Versus static proposal.</p>\n<pre><code class=\"language-javascript\">GameEvents.subscribe('frame', () =&gt; {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const position = player.getPosition();\n        const dir = player.getAngles().toVector();\n        velocity.set(position).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n});\n</code></pre>\n<pre><code class=\"language-javascript\">GameEvents.subscribe('frame', onServerFrame);\n\nfunction onServerFrame() {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const position = player.getPosition();\n        const dir = player.getAngles().toVector();\n        velocity.set(position).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n}\n</code></pre>\n<p>Better readability, function declaration pattern support, less code</p>\n","msgtype":"m.text"},"ts":1692657466861,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$7sxr72ujHPjvexuGTRJ7nXlEUF52XYsFVM_bCHiQWVA"},
{"content":{"body":" * Closure\n\n```javascript\nGameEvents.subscribe('frame', (\n    () => {\n        let velocity = new Vec3();\n\n        return () => {\n            for (player of getPlayers()) {\n                const position = player.getPosition();\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)());\n```\n\n```javascript\nconst onServerFrame = (\n    () => {\n        let velocity = new Vec3();\n\n        return () => {\n            for (player of getPlayers()) {\n                const position = player.getPosition();\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)();\n\nGameEvents.subscribe('frame', onServerFrame);\n```\n\nVersus static proposal.\n\n```javascript\nGameEvents.subscribe('frame', () => {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const position = player.getPosition();\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n});\n```\n\n```javascript\nGameEvents.subscribe('frame', onServerFrame);\n\nfunction onServerFrame() {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const position = player.getPosition();\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n}\n```\n\nBetter readability, function declaration pattern support, less code","format":"org.matrix.custom.html","formatted_body":" * <p>Closure</p>\n<pre><code class=\"language-javascript\">GameEvents.subscribe('frame', (\n    () =&gt; {\n        let velocity = new Vec3();\n\n        return () =&gt; {\n            for (player of getPlayers()) {\n                const position = player.getPosition();\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)());\n</code></pre>\n<pre><code class=\"language-javascript\">const onServerFrame = (\n    () =&gt; {\n        let velocity = new Vec3();\n\n        return () =&gt; {\n            for (player of getPlayers()) {\n                const position = player.getPosition();\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)();\n\nGameEvents.subscribe('frame', onServerFrame);\n</code></pre>\n<p>Versus static proposal.</p>\n<pre><code class=\"language-javascript\">GameEvents.subscribe('frame', () =&gt; {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const position = player.getPosition();\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n});\n</code></pre>\n<pre><code class=\"language-javascript\">GameEvents.subscribe('frame', onServerFrame);\n\nfunction onServerFrame() {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const position = player.getPosition();\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n}\n</code></pre>\n<p>Better readability, function declaration pattern support, less code</p>\n","m.new_content":{"body":"Closure\n\n```javascript\nGameEvents.subscribe('frame', (\n    () => {\n        let velocity = new Vec3();\n\n        return () => {\n            for (player of getPlayers()) {\n                const position = player.getPosition();\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)());\n```\n\n```javascript\nconst onServerFrame = (\n    () => {\n        let velocity = new Vec3();\n\n        return () => {\n            for (player of getPlayers()) {\n                const position = player.getPosition();\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)();\n\nGameEvents.subscribe('frame', onServerFrame);\n```\n\nVersus static proposal.\n\n```javascript\nGameEvents.subscribe('frame', () => {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const position = player.getPosition();\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n});\n```\n\n```javascript\nGameEvents.subscribe('frame', onServerFrame);\n\nfunction onServerFrame() {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const position = player.getPosition();\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n}\n```\n\nBetter readability, function declaration pattern support, less code","format":"org.matrix.custom.html","formatted_body":"<p>Closure</p>\n<pre><code class=\"language-javascript\">GameEvents.subscribe('frame', (\n    () =&gt; {\n        let velocity = new Vec3();\n\n        return () =&gt; {\n            for (player of getPlayers()) {\n                const position = player.getPosition();\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)());\n</code></pre>\n<pre><code class=\"language-javascript\">const onServerFrame = (\n    () =&gt; {\n        let velocity = new Vec3();\n\n        return () =&gt; {\n            for (player of getPlayers()) {\n                const position = player.getPosition();\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)();\n\nGameEvents.subscribe('frame', onServerFrame);\n</code></pre>\n<p>Versus static proposal.</p>\n<pre><code class=\"language-javascript\">GameEvents.subscribe('frame', () =&gt; {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const position = player.getPosition();\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n});\n</code></pre>\n<pre><code class=\"language-javascript\">GameEvents.subscribe('frame', onServerFrame);\n\nfunction onServerFrame() {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const position = player.getPosition();\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n}\n</code></pre>\n<p>Better readability, function declaration pattern support, less code</p>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$7sxr72ujHPjvexuGTRJ7nXlEUF52XYsFVM_bCHiQWVA","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1692657540675,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$3emzPqTYJcyuWEK30-GqUTZUs35h9EZD9_Ohp3qlU5Q"},
{"content":{"body":" * Closure\n\n```javascript\nGameEvents.subscribe('frame', (\n    () => {\n        let velocity = new Vec3();\n\n        return () => {\n            for (player of getPlayers()) {\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)());\n```\n\n```javascript\nconst onServerFrame = (\n    () => {\n        let velocity = new Vec3();\n\n        return () => {\n            for (player of getPlayers()) {\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)();\n\nGameEvents.subscribe('frame', onServerFrame);\n```\n\nVersus static proposal.\n\n```javascript\nGameEvents.subscribe('frame', () => {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n});\n```\n\n```javascript\nGameEvents.subscribe('frame', onServerFrame);\n\nfunction onServerFrame() {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n}\n```\n\nBetter readability, function declaration pattern support, less code","format":"org.matrix.custom.html","formatted_body":" * <p>Closure</p>\n<pre><code class=\"language-javascript\">GameEvents.subscribe('frame', (\n    () =&gt; {\n        let velocity = new Vec3();\n\n        return () =&gt; {\n            for (player of getPlayers()) {\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)());\n</code></pre>\n<pre><code class=\"language-javascript\">const onServerFrame = (\n    () =&gt; {\n        let velocity = new Vec3();\n\n        return () =&gt; {\n            for (player of getPlayers()) {\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)();\n\nGameEvents.subscribe('frame', onServerFrame);\n</code></pre>\n<p>Versus static proposal.</p>\n<pre><code class=\"language-javascript\">GameEvents.subscribe('frame', () =&gt; {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n});\n</code></pre>\n<pre><code class=\"language-javascript\">GameEvents.subscribe('frame', onServerFrame);\n\nfunction onServerFrame() {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n}\n</code></pre>\n<p>Better readability, function declaration pattern support, less code</p>\n","m.new_content":{"body":"Closure\n\n```javascript\nGameEvents.subscribe('frame', (\n    () => {\n        let velocity = new Vec3();\n\n        return () => {\n            for (player of getPlayers()) {\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)());\n```\n\n```javascript\nconst onServerFrame = (\n    () => {\n        let velocity = new Vec3();\n\n        return () => {\n            for (player of getPlayers()) {\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)();\n\nGameEvents.subscribe('frame', onServerFrame);\n```\n\nVersus static proposal.\n\n```javascript\nGameEvents.subscribe('frame', () => {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n});\n```\n\n```javascript\nGameEvents.subscribe('frame', onServerFrame);\n\nfunction onServerFrame() {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n}\n```\n\nBetter readability, function declaration pattern support, less code","format":"org.matrix.custom.html","formatted_body":"<p>Closure</p>\n<pre><code class=\"language-javascript\">GameEvents.subscribe('frame', (\n    () =&gt; {\n        let velocity = new Vec3();\n\n        return () =&gt; {\n            for (player of getPlayers()) {\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)());\n</code></pre>\n<pre><code class=\"language-javascript\">const onServerFrame = (\n    () =&gt; {\n        let velocity = new Vec3();\n\n        return () =&gt; {\n            for (player of getPlayers()) {\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)();\n\nGameEvents.subscribe('frame', onServerFrame);\n</code></pre>\n<p>Versus static proposal.</p>\n<pre><code class=\"language-javascript\">GameEvents.subscribe('frame', () =&gt; {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n});\n</code></pre>\n<pre><code class=\"language-javascript\">GameEvents.subscribe('frame', onServerFrame);\n\nfunction onServerFrame() {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n}\n</code></pre>\n<p>Better readability, function declaration pattern support, less code</p>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$7sxr72ujHPjvexuGTRJ7nXlEUF52XYsFVM_bCHiQWVA","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1692657616588,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$WYNS-dEmfScEFNJ6yWxavXO8q0R-hqeddSeBebmcFTM"},
{"content":{"body":" * Closure\n\n```javascript\nGameEvents.subscribe('frame', (\n    () => {\n        let velocity = new Vec3();\n\n        return () => {\n            for (player of getPlayers()) {\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)());\n```\n\n```javascript\nconst onServerFrame = (\n    () => {\n        let velocity = new Vec3();\n\n        return () => {\n            for (player of getPlayers()) {\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)();\n\nGameEvents.subscribe('frame', onServerFrame);\n```\n\nVersus static proposal.\n\n```javascript\nGameEvents.subscribe('frame', () => {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n});\n```\n\n```javascript\nGameEvents.subscribe('frame', onServerFrame);\n\nfunction onServerFrame() {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n}\n```\n\nBetter readability, function declaration support, less code","format":"org.matrix.custom.html","formatted_body":" * <p>Closure</p>\n<pre><code class=\"language-javascript\">GameEvents.subscribe('frame', (\n    () =&gt; {\n        let velocity = new Vec3();\n\n        return () =&gt; {\n            for (player of getPlayers()) {\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)());\n</code></pre>\n<pre><code class=\"language-javascript\">const onServerFrame = (\n    () =&gt; {\n        let velocity = new Vec3();\n\n        return () =&gt; {\n            for (player of getPlayers()) {\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)();\n\nGameEvents.subscribe('frame', onServerFrame);\n</code></pre>\n<p>Versus static proposal.</p>\n<pre><code class=\"language-javascript\">GameEvents.subscribe('frame', () =&gt; {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n});\n</code></pre>\n<pre><code class=\"language-javascript\">GameEvents.subscribe('frame', onServerFrame);\n\nfunction onServerFrame() {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n}\n</code></pre>\n<p>Better readability, function declaration support, less code</p>\n","m.new_content":{"body":"Closure\n\n```javascript\nGameEvents.subscribe('frame', (\n    () => {\n        let velocity = new Vec3();\n\n        return () => {\n            for (player of getPlayers()) {\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)());\n```\n\n```javascript\nconst onServerFrame = (\n    () => {\n        let velocity = new Vec3();\n\n        return () => {\n            for (player of getPlayers()) {\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)();\n\nGameEvents.subscribe('frame', onServerFrame);\n```\n\nVersus static proposal.\n\n```javascript\nGameEvents.subscribe('frame', () => {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n});\n```\n\n```javascript\nGameEvents.subscribe('frame', onServerFrame);\n\nfunction onServerFrame() {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n}\n```\n\nBetter readability, function declaration support, less code","format":"org.matrix.custom.html","formatted_body":"<p>Closure</p>\n<pre><code class=\"language-javascript\">GameEvents.subscribe('frame', (\n    () =&gt; {\n        let velocity = new Vec3();\n\n        return () =&gt; {\n            for (player of getPlayers()) {\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)());\n</code></pre>\n<pre><code class=\"language-javascript\">const onServerFrame = (\n    () =&gt; {\n        let velocity = new Vec3();\n\n        return () =&gt; {\n            for (player of getPlayers()) {\n                const dir = player.getAngles().toVector();\n                velocity.set(0, 0, 0).addScaled(dir, 200);\n                player.setVelocity(velocity);\n            }\n        };\n    }\n)();\n\nGameEvents.subscribe('frame', onServerFrame);\n</code></pre>\n<p>Versus static proposal.</p>\n<pre><code class=\"language-javascript\">GameEvents.subscribe('frame', () =&gt; {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n});\n</code></pre>\n<pre><code class=\"language-javascript\">GameEvents.subscribe('frame', onServerFrame);\n\nfunction onServerFrame() {\n    static let velocity = new Vec3();\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n}\n</code></pre>\n<p>Better readability, function declaration support, less code</p>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$7sxr72ujHPjvexuGTRJ7nXlEUF52XYsFVM_bCHiQWVA","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1692657633636,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$O24CnOdPgS0aK2ABTM0w6UTR-RrO0c8XtU344Q0FP0c"},
{"content":{"body":"Yeah, I don't think that difference is significant enough to warrant new syntax. In practice, in almost all code, you'd just put the \"static\" variable immediately before the function, which has the advantage of having completely unambiguous semantics (for example: with `static`, what happens if you have multiple such declarations and one of them throws the first time you call the function?). In the rare cases where putting your variables before the function doesn't work, the IIFE pattern is not really that bad.","format":"org.matrix.custom.html","formatted_body":"Yeah, I don't think that difference is significant enough to warrant new syntax. In practice, in almost all code, you'd just put the \"static\" variable immediately before the function, which has the advantage of having completely unambiguous semantics (for example: with <code>static</code>, what happens if you have multiple such declarations and one of them throws the first time you call the function?). In the rare cases where putting your variables before the function doesn't work, the IIFE pattern is not really that bad.","msgtype":"m.text"},"ts":1692657683095,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$BEEOvnGhwrRCbjmIShy-PhElo2zlwL6WpMscDzC03OY"},
{"content":{"body":"That is to say, in practice, what you'd write is usually\n\n```\nlet velocity = new Vec3();\nfunction onServerFrame() {\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n}\n\nGameEvents.subscribe('frame', onServerFrame);\n```","format":"org.matrix.custom.html","formatted_body":"<p>That is to say, in practice, what you'd write is usually</p>\n<pre><code>let velocity = new Vec3();\nfunction onServerFrame() {\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n}\n\nGameEvents.subscribe('frame', onServerFrame);\n</code></pre>\n","msgtype":"m.text"},"ts":1692657746790,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$XvptHKgQqZ1tyQl39ngH4x_pIota7J_kTQoLcbOvqYg"},
{"content":{"body":"maybe I'm not understanding the API of `Vec3` there, but it looks like the variable doesn't need to be static at all in this example? isn't it always reset with `.set(0, 0, 0)` before it is accessed?","format":"org.matrix.custom.html","formatted_body":"maybe I'm not understanding the API of <code>Vec3</code> there, but it looks like the variable doesn't need to be static at all in this example? isn't it always reset with <code>.set(0, 0, 0)</code> before it is accessed?","msgtype":"m.text"},"ts":1692657754959,"senderName":"ptomato","senderId":"@pchimento:igalia.com","id":"$sIS4VUT5lRF0Ve2drfbr8BbnAKZnLdpvmN3h3AS8vnY"},
{"content":{"body":"> <@pchimento:igalia.com> maybe I'm not understanding the API of `Vec3` there, but it looks like the variable doesn't need to be static at all in this example? isn't it always reset with `.set(0, 0, 0)` before it is accessed?\n\njust an example, but at least it not allocate object every frame which save time, function can be called thousand times per second and for example logic can be moved to separate function then complexity will be `playersNum * serverFps`","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$sIS4VUT5lRF0Ve2drfbr8BbnAKZnLdpvmN3h3AS8vnY?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@pchimento:igalia.com\">@pchimento:igalia.com</a><br>maybe I'm not understanding the API of <code>Vec3</code> there, but it looks like the variable doesn't need to be static at all in this example? isn't it always reset with <code>.set(0, 0, 0)</code> before it is accessed?</blockquote></mx-reply>just an example, but at least it not allocate object every frame which save time, function can be called thousand times per second and for example logic can be moved to separate function then complexity will be <code>playersNum * serverFps</code>","m.relates_to":{"is_falling_back":false,"m.in_reply_to":{"event_id":"$sIS4VUT5lRF0Ve2drfbr8BbnAKZnLdpvmN3h3AS8vnY"}},"msgtype":"m.text"},"ts":1692657882532,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$1WbSukPiGw8dWGOaPNAsO1lKoFGQC5SDNGjHvWyrT58"},
{"content":{"body":"> <@pchimento:igalia.com> maybe I'm not understanding the API of `Vec3` there, but it looks like the variable doesn't need to be static at all in this example? isn't it always reset with `.set(0, 0, 0)` before it is accessed?\n\n * just an example, but at least it not allocate object every frame which save time, function can be called thousand times per second and for example logic can be moved to separate function then allocation complexity will be `playersNum * serverFps`","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$sIS4VUT5lRF0Ve2drfbr8BbnAKZnLdpvmN3h3AS8vnY?via=matrix.org&amp;via=mozilla.org&amp;via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@pchimento:igalia.com\">@pchimento:igalia.com</a><br>maybe I'm not understanding the API of <code>Vec3</code> there, but it looks like the variable doesn't need to be static at all in this example? isn't it always reset with <code>.set(0, 0, 0)</code> before it is accessed?</blockquote></mx-reply> * just an example, but at least it not allocate object every frame which save time, function can be called thousand times per second and for example logic can be moved to separate function then allocation complexity will be <code>playersNum * serverFps</code>","m.new_content":{"body":"just an example, but at least it not allocate object every frame which save time, function can be called thousand times per second and for example logic can be moved to separate function then allocation complexity will be `playersNum * serverFps`","format":"org.matrix.custom.html","formatted_body":"just an example, but at least it not allocate object every frame which save time, function can be called thousand times per second and for example logic can be moved to separate function then allocation complexity will be <code>playersNum * serverFps</code>","msgtype":"m.text"},"m.relates_to":{"event_id":"$1WbSukPiGw8dWGOaPNAsO1lKoFGQC5SDNGjHvWyrT58","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1692657889774,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$ztGn2PEgWUykq_Gjc7SSzNGivmTRBNR6OQWOVSj20X4"},
{"content":{"body":"in case server updates 10000 times per second and we have for example 100 players it will be 100000 calls per second and the same allocations number ","msgtype":"m.text"},"ts":1692657949770,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$8cUfMNEZ-xyTonBW10IXbuR2Vn1lnlejLzabEyb7jKs"},
{"content":{"body":" * in case server updates 10000 times per second and we have for example 100 players it will be 100000 calls per second and the same allocations number, some the number of variables needed may also be significantly larger","m.new_content":{"body":"in case server updates 10000 times per second and we have for example 100 players it will be 100000 calls per second and the same allocations number, some the number of variables needed may also be significantly larger","msgtype":"m.text"},"m.relates_to":{"event_id":"$8cUfMNEZ-xyTonBW10IXbuR2Vn1lnlejLzabEyb7jKs","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1692657995410,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$-iKsH2h3kXyvGcZL7rc0SaROwaGpwX9XqDTkQJDR308"},
{"content":{"body":" * in case server updates 10000 times per second and we have for example 100 players it will be 100000 calls per second and the same allocations number, some the number of variables needed may also be significantly larger, it's just an example with one variable","m.new_content":{"body":"in case server updates 10000 times per second and we have for example 100 players it will be 100000 calls per second and the same allocations number, some the number of variables needed may also be significantly larger, it's just an example with one variable","msgtype":"m.text"},"m.relates_to":{"event_id":"$8cUfMNEZ-xyTonBW10IXbuR2Vn1lnlejLzabEyb7jKs","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1692658009036,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$2Uz7HiaQ-3wph3AJPvn74TdVYaa1kR1y90TswFtzzdk"},
{"content":{"body":"> <@bakkot:matrix.org> That is to say, in practice, what you'd write is usually\n> \n> ```\n> let velocity = new Vec3();\n> function onServerFrame() {\n>     for (player of getPlayers()) {\n>         const dir = player.getAngles().toVector();\n>         velocity.set(0, 0, 0).addScaled(dir, 200);\n>         player.setVelocity(velocity);\n>     }\n> }\n> \n> GameEvents.subscribe('frame', onServerFrame);\n> ```\n\ngame script usually contains a huge number of functions and every of this function may have their own \"velocity\" variable, moving it to global context is not a solution, in case you need to somehow read previous state you should create the same variable for each function in global context with different names.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$XvptHKgQqZ1tyQl39ngH4x_pIota7J_kTQoLcbOvqYg?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@bakkot:matrix.org\">@bakkot:matrix.org</a><br><p>That is to say, in practice, what you'd write is usually</p>\n<pre><code>let velocity = new Vec3();\nfunction onServerFrame() {\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n}\n\nGameEvents.subscribe('frame', onServerFrame);\n</code></pre>\n</blockquote></mx-reply>game script usually contains a huge number of functions and every of this function may have their own \"velocity\" variable, moving it to global context is not a solution, in case you need to somehow read previous state you should create the same variable for each function in global context with different names.","m.relates_to":{"m.in_reply_to":{"event_id":"$XvptHKgQqZ1tyQl39ngH4x_pIota7J_kTQoLcbOvqYg"}},"msgtype":"m.text"},"ts":1692658174684,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$JQbTAc-MmSByb5NjelDJygVdbIGtbwIT5pcvTp3EoG8"},
{"content":{"body":" * game script usually contains a huge number of functions and every of this function may have their own \"velocity\" variable, moving it to global context is not a solution, in case you need to somehow read previous state you should create the same variable for each function in global context with different names.\nIt's easiest for me to describe it like for games, but it almost the same for other high loading programs and calculations.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$XvptHKgQqZ1tyQl39ngH4x_pIota7J_kTQoLcbOvqYg?via=matrix.org&amp;via=mozilla.org&amp;via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@bakkot:matrix.org\">@bakkot:matrix.org</a><br><p>That is to say, in practice, what you'd write is usually</p>\n<pre><code>let velocity = new Vec3();\nfunction onServerFrame() {\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n}\n\nGameEvents.subscribe('frame', onServerFrame);\n</code></pre>\n</blockquote></mx-reply> * game script usually contains a huge number of functions and every of this function may have their own \"velocity\" variable, moving it to global context is not a solution, in case you need to somehow read previous state you should create the same variable for each function in global context with different names.<br>It's easiest for me to describe it like for games, but it almost the same for other high loading programs and calculations.","m.new_content":{"body":"game script usually contains a huge number of functions and every of this function may have their own \"velocity\" variable, moving it to global context is not a solution, in case you need to somehow read previous state you should create the same variable for each function in global context with different names.\nIt's easiest for me to describe it like for games, but it almost the same for other high loading programs and calculations.","format":"org.matrix.custom.html","formatted_body":"game script usually contains a huge number of functions and every of this function may have their own \"velocity\" variable, moving it to global context is not a solution, in case you need to somehow read previous state you should create the same variable for each function in global context with different names.<br>It's easiest for me to describe it like for games, but it almost the same for other high loading programs and calculations.","msgtype":"m.text"},"m.relates_to":{"event_id":"$JQbTAc-MmSByb5NjelDJygVdbIGtbwIT5pcvTp3EoG8","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1692658289865,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$0q0s86H8u8oY4-s4jE10gGTR5cY7mb79N_QXbXrGeD8"},
{"content":{"body":" * game scripts usually contain a huge number of functions and every of this function may have their own \"velocity\" variable, moving it to global context is not a solution, in case you need to somehow read the previous state you should create the same variable for each function in global context with different names.\nIt's easiest for me to describe it like for games, but it almost the same for other high loading programs and calculations. Currently math is one of the weakest points of js <del>and mine</del>.","format":"org.matrix.custom.html","formatted_body":" * game scripts usually contain a huge number of functions and every of this function may have their own \"velocity\" variable, moving it to global context is not a solution, in case you need to somehow read the previous state you should create the same variable for each function in global context with different names.<br>It's easiest for me to describe it like for games, but it almost the same for other high loading programs and calculations. Currently math is one of the weakest points of js <del>and mine</del>.","m.new_content":{"body":"game scripts usually contain a huge number of functions and every of this function may have their own \"velocity\" variable, moving it to global context is not a solution, in case you need to somehow read the previous state you should create the same variable for each function in global context with different names.\nIt's easiest for me to describe it like for games, but it almost the same for other high loading programs and calculations. Currently math is one of the weakest points of js <del>and mine</del>.","format":"org.matrix.custom.html","formatted_body":"game scripts usually contain a huge number of functions and every of this function may have their own \"velocity\" variable, moving it to global context is not a solution, in case you need to somehow read the previous state you should create the same variable for each function in global context with different names.<br>It's easiest for me to describe it like for games, but it almost the same for other high loading programs and calculations. Currently math is one of the weakest points of js <del>and mine</del>.","msgtype":"m.text"},"m.relates_to":{"event_id":"$JQbTAc-MmSByb5NjelDJygVdbIGtbwIT5pcvTp3EoG8","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1692658346785,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$MSRJ6S6q5ldtUqL3x3MQI1QXWGZ3bcJMnZ8zURBTUE0"},
{"content":{"body":"Hoisting variables to the outer scope is in fact a solution. I agree that there are cases where that means you will need to spend slightly more effort naming things, or otherwise have some awkwardness, but I don't think this is bad enough to warrant new syntax.","msgtype":"m.text"},"ts":1692658374842,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$hLeVrjFsalfXt-VYUWO2E9I7X5ADQHmcuhbQV5_qC_c"},
{"content":{"body":" * game scripts usually contain a huge number of functions and each of these functions may have its own \"velocity\" variable, moving it to a global context is not a solution, in case you need to somehow read the previous state you should create the same variable for each function in the global context with different names.\nIt's easiest for me to describe it as for games, but it is almost the same for other high-loading programs and calculations. Currently, math is one of the weakest points of js <del>and my</del>.","format":"org.matrix.custom.html","formatted_body":" * game scripts usually contain a huge number of functions and each of these functions may have its own \"velocity\" variable, moving it to a global context is not a solution, in case you need to somehow read the previous state you should create the same variable for each function in the global context with different names.<br>It's easiest for me to describe it as for games, but it is almost the same for other high-loading programs and calculations. Currently, math is one of the weakest points of js <del>and my</del>.","m.new_content":{"body":"game scripts usually contain a huge number of functions and each of these functions may have its own \"velocity\" variable, moving it to a global context is not a solution, in case you need to somehow read the previous state you should create the same variable for each function in the global context with different names.\nIt's easiest for me to describe it as for games, but it is almost the same for other high-loading programs and calculations. Currently, math is one of the weakest points of js <del>and my</del>.","format":"org.matrix.custom.html","formatted_body":"game scripts usually contain a huge number of functions and each of these functions may have its own \"velocity\" variable, moving it to a global context is not a solution, in case you need to somehow read the previous state you should create the same variable for each function in the global context with different names.<br>It's easiest for me to describe it as for games, but it is almost the same for other high-loading programs and calculations. Currently, math is one of the weakest points of js <del>and my</del>.","msgtype":"m.text"},"m.relates_to":{"event_id":"$JQbTAc-MmSByb5NjelDJygVdbIGtbwIT5pcvTp3EoG8","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1692658406089,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$LdPFheHIZMtUUeidphcE9mNkwfOo6r9YKGQnjlhs63E"},
{"content":{"body":"in practice how the process works is that you identify the problem first, before proposing a solution - this proposed solution moves a feature from C into JS which brings its own problems along. for example, the cognitive load for learning it due to most JS developers not being familiar with C; even in C, the feature is named confusingly, because `static` means two different things, 3 in C++. so during the early stages of such a proposal, there'd be a search through the solution space for a more \"JavaScript-y\" solution","format":"org.matrix.custom.html","formatted_body":"in practice how the process works is that you identify the problem first, before proposing a solution - this proposed solution moves a feature from C into JS which brings its own problems along. for example, the cognitive load for learning it due to most JS developers not being familiar with C; even in C, the feature is named confusingly, because <code>static</code> means two different things, 3 in C++. so during the early stages of such a proposal, there'd be a search through the solution space for a more \"JavaScript-y\" solution","msgtype":"m.text"},"ts":1692658736065,"senderName":"ptomato","senderId":"@pchimento:igalia.com","id":"$N6HOIMfGGB-RIlrONK7_zBSdatn3cV9JHXk3JbpZNts"},
{"content":{"body":"(& I think bakkot's point is that such a \"JavaScript-y\" solution already exists)","msgtype":"m.text"},"ts":1692658759228,"senderName":"ptomato","senderId":"@pchimento:igalia.com","id":"$t9Wh0oyVhicjNRHeTREtO7QiqqlT3tE0fntW9nBnXyU"},
{"content":{"body":"how about, by the way:\n```js\nGameEvents.subscribe('frame', () => {\n    let {velocity} = this;\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n}.bind({\n});\n```","format":"org.matrix.custom.html","formatted_body":"<p>how about, by the way:</p>\n<pre><code class=\"language-js\">GameEvents.subscribe('frame', () =&gt; {\n    let {velocity} = this;\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(velocity);\n    }\n}.bind({\n});\n</code></pre>\n","msgtype":"m.text"},"ts":1692658813891,"senderName":"ptomato","senderId":"@pchimento:igalia.com","id":"$tdA_JeRomJOHK6OMIBHY2AKljy5H__EgslFHv73oPKk"},
{"content":{"body":" * how about, by the way:\n\n```js\nGameEvents.subscribe('frame', () => {\n    let {state} = this;\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        state.velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(state.velocity);\n    }\n}.bind({\n  state: { velocity: new Vec3() },\n});\n```","format":"org.matrix.custom.html","formatted_body":" * <p>how about, by the way:</p>\n<pre><code class=\"language-js\">GameEvents.subscribe('frame', () =&gt; {\n    let {state} = this;\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        state.velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(state.velocity);\n    }\n}.bind({\n  state: { velocity: new Vec3() },\n});\n</code></pre>\n","m.new_content":{"body":"how about, by the way:\n\n```js\nGameEvents.subscribe('frame', () => {\n    let {state} = this;\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        state.velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(state.velocity);\n    }\n}.bind({\n  state: { velocity: new Vec3() },\n});\n```","format":"org.matrix.custom.html","formatted_body":"<p>how about, by the way:</p>\n<pre><code class=\"language-js\">GameEvents.subscribe('frame', () =&gt; {\n    let {state} = this;\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        state.velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(state.velocity);\n    }\n}.bind({\n  state: { velocity: new Vec3() },\n});\n</code></pre>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$tdA_JeRomJOHK6OMIBHY2AKljy5H__EgslFHv73oPKk","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1692658857837,"senderName":"ptomato","senderId":"@pchimento:igalia.com","id":"$frf6sHEtwPWuKrUfsyr8Z1VfUuzGaJp--09TZfD3x_I"},
{"content":{"body":"> <@bakkot:matrix.org> Hoisting variables to the outer scope is in fact a solution. I agree that there are cases where that means you will need to spend slightly more effort naming things, or otherwise have some awkwardness, but I don't think this is bad enough to warrant new syntax.\n\nI think any proposal is almost always about effort and time, that's why there are many syntax stuff proposals and why programmers love new syntax updates especially updates that improve development speed and the ability to make prototypes in minutes. JS is currently one of the best language to prototype something. The problem I want to solve is somewhat deeper than what I described here and I'll think how to describe it better.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$hLeVrjFsalfXt-VYUWO2E9I7X5ADQHmcuhbQV5_qC_c?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@bakkot:matrix.org\">@bakkot:matrix.org</a><br>Hoisting variables to the outer scope is in fact a solution. I agree that there are cases where that means you will need to spend slightly more effort naming things, or otherwise have some awkwardness, but I don&#39;t think this is bad enough to warrant new syntax.</blockquote></mx-reply>I think any proposal is almost always about effort and time, that's why there are many syntax stuff proposals and why programmers love new syntax updates especially updates that improve development speed and the ability to make prototypes in minutes. JS is currently one of the best language to prototype something. The problem I want to solve is somewhat deeper than what I described here and I'll think how to describe it better.","m.relates_to":{"m.in_reply_to":{"event_id":"$hLeVrjFsalfXt-VYUWO2E9I7X5ADQHmcuhbQV5_qC_c"}},"msgtype":"m.text"},"ts":1692658971169,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$WFW1D1KyNv8FRqslzvm4kS-WklLCpzIYaRG-Kvyea90"},
{"content":{"body":"I don't think I would say without qualification that programmers love new syntax updates.","msgtype":"m.text"},"ts":1692659021731,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$g2ybDnGQz32wJNi_8qXnDqjilayekHLkgkoZamtPsMI"},
{"content":{"body":"If we added all the syntax people have proposed which would solve a problem they had, without considering the cost of new syntax, the language would be completely unusable. So we have to think carefully about how bad the problem is, and how costly the solution would be.","msgtype":"m.text"},"ts":1692659089184,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$CwuazWG8Vhum9db9UUzJhJCqFItXdasDMIY9o30rm6g"},
{"content":{"body":"In this case I think the problem is not all that bad, and the proposed solution is very costly (mostly because of the potential for confusion).","msgtype":"m.text"},"ts":1692659108542,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$mCvC66fayBMFTvkJJtw6frvUhLme_dKbhf8rESiYOaw"},
{"content":{"body":"> <@pchimento:igalia.com> how about, by the way:\n> \n> ```js\n> GameEvents.subscribe('frame', () => {\n>     let {state} = this;\n> \n>     for (player of getPlayers()) {\n>         const dir = player.getAngles().toVector();\n>         state.velocity.set(0, 0, 0).addScaled(dir, 200);\n>         player.setVelocity(state.velocity);\n>     }\n> }.bind({\n>   state: { velocity: new Vec3() },\n> });\n> ```\n\nhm, there is a mistake, but I get the idea! Looks as interesting solution, however only in case you have free context.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$tdA_JeRomJOHK6OMIBHY2AKljy5H__EgslFHv73oPKk?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@pchimento:igalia.com\">@pchimento:igalia.com</a><br><p>how about, by the way:</p>\n<pre><code class=\"language-js\">GameEvents.subscribe('frame', () =&gt; {\n    let {state} = this;\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        state.velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(state.velocity);\n    }\n}.bind({\n  state: { velocity: new Vec3() },\n});\n</code></pre>\n</blockquote></mx-reply>hm, there is a mistake, but I get the idea! Looks as interesting solution, however only in case you have free context.","m.relates_to":{"m.in_reply_to":{"event_id":"$tdA_JeRomJOHK6OMIBHY2AKljy5H__EgslFHv73oPKk"}},"msgtype":"m.text"},"ts":1692659186564,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$310P6mYqrctQaqFztzvnyKVVqdO0vj9K7k6ZtJCppVY"},
{"content":{"body":" * hm, there is a mistake, but I get the idea! Looks like the interesting solution, however only in case you have \"free\" context.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$tdA_JeRomJOHK6OMIBHY2AKljy5H__EgslFHv73oPKk?via=matrix.org&amp;via=mozilla.org&amp;via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@pchimento:igalia.com\">@pchimento:igalia.com</a><br><p>how about, by the way:</p>\n<pre><code class=\"language-js\">GameEvents.subscribe('frame', () =&gt; {\n    let {state} = this;\n\n    for (player of getPlayers()) {\n        const dir = player.getAngles().toVector();\n        state.velocity.set(0, 0, 0).addScaled(dir, 200);\n        player.setVelocity(state.velocity);\n    }\n}.bind({\n  state: { velocity: new Vec3() },\n});\n</code></pre>\n</blockquote></mx-reply> * hm, there is a mistake, but I get the idea! Looks like the interesting solution, however only in case you have \"free\" context.","m.new_content":{"body":"hm, there is a mistake, but I get the idea! Looks like the interesting solution, however only in case you have \"free\" context.","format":"org.matrix.custom.html","formatted_body":"hm, there is a mistake, but I get the idea! Looks like the interesting solution, however only in case you have \"free\" context.","msgtype":"m.text"},"m.relates_to":{"event_id":"$310P6mYqrctQaqFztzvnyKVVqdO0vj9K7k6ZtJCppVY","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1692659239462,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$8kVBvulRiRS0YzaPj3IJqgLBZu3p7OHCW0IC3NxrMms"},
{"content":{"body":"no doubt there is a mistake but now I'm curious what it is üòÖ","msgtype":"m.text"},"ts":1692659268344,"senderName":"ptomato","senderId":"@pchimento:igalia.com","id":"$DDT3YpU5v78k0aQ0tpJ8dMrbGteVE1759sm5k9YriFU"},
{"content":{"body":"> <@bakkot:matrix.org> If we added all the syntax people have proposed which would solve a problem they had, without considering the cost of new syntax, the language would be completely unusable. So we have to think carefully about how bad the problem is, and how costly the solution would be.\n\nsure, you are right, let me make more investigation and try to describe the problem better and also advantages of this propose.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$CwuazWG8Vhum9db9UUzJhJCqFItXdasDMIY9o30rm6g?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@bakkot:matrix.org\">@bakkot:matrix.org</a><br>If we added all the syntax people have proposed which would solve a problem they had, without considering the cost of new syntax, the language would be completely unusable. So we have to think carefully about how bad the problem is, and how costly the solution would be.</blockquote></mx-reply>sure, you are right, let me make more investigation and try to describe the problem better and also advantages of this propose.","m.relates_to":{"m.in_reply_to":{"event_id":"$CwuazWG8Vhum9db9UUzJhJCqFItXdasDMIY9o30rm6g"}},"msgtype":"m.text"},"ts":1692659354296,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$k43Rhbds9RmHr9d50pbTlMGGS5jtJ12VpGAU_FMIejw"},
{"content":{"body":"> <@bakkot:matrix.org> If we added all the syntax people have proposed which would solve a problem they had, without considering the cost of new syntax, the language would be completely unusable. So we have to think carefully about how bad the problem is, and how costly the solution would be.\n\n * sure, you are right, let me make more investigation and try to describe the problem better and also advantages of this propose. I think functions with their own states can bring many new possibilities, not only for optimization proposals.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$CwuazWG8Vhum9db9UUzJhJCqFItXdasDMIY9o30rm6g?via=matrix.org&amp;via=mozilla.org&amp;via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@bakkot:matrix.org\">@bakkot:matrix.org</a><br>If we added all the syntax people have proposed which would solve a problem they had, without considering the cost of new syntax, the language would be completely unusable. So we have to think carefully about how bad the problem is, and how costly the solution would be.</blockquote></mx-reply> * sure, you are right, let me make more investigation and try to describe the problem better and also advantages of this propose. I think functions with their own states can bring many new possibilities, not only for optimization proposals.","m.new_content":{"body":"sure, you are right, let me make more investigation and try to describe the problem better and also advantages of this propose. I think functions with their own states can bring many new possibilities, not only for optimization proposals.","format":"org.matrix.custom.html","formatted_body":"sure, you are right, let me make more investigation and try to describe the problem better and also advantages of this propose. I think functions with their own states can bring many new possibilities, not only for optimization proposals.","msgtype":"m.text"},"m.relates_to":{"event_id":"$k43Rhbds9RmHr9d50pbTlMGGS5jtJ12VpGAU_FMIejw","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1692659498894,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$RfA4-E-lo7cBkxRQf7nKVnbgkVM04FhIw_fe9p9P72M"},
{"content":{"body":" * sure, you are right, let me make more investigation and try to describe the problem better and also advantages of this propose. I think functions with their own states can bring many new possibilities, not only for optimizations proposals.","format":"org.matrix.custom.html","formatted_body":" * sure, you are right, let me make more investigation and try to describe the problem better and also advantages of this propose. I think functions with their own states can bring many new possibilities, not only for optimizations proposals.","m.new_content":{"body":"sure, you are right, let me make more investigation and try to describe the problem better and also advantages of this propose. I think functions with their own states can bring many new possibilities, not only for optimizations proposals.","format":"org.matrix.custom.html","formatted_body":"sure, you are right, let me make more investigation and try to describe the problem better and also advantages of this propose. I think functions with their own states can bring many new possibilities, not only for optimizations proposals.","msgtype":"m.text"},"m.relates_to":{"event_id":"$k43Rhbds9RmHr9d50pbTlMGGS5jtJ12VpGAU_FMIejw","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1692659505693,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$1gBbsfngG2bMt8UDbs81zSmyt5t0eDgXTu_psg5Vo9A"},
{"content":{"body":"> <@pchimento:igalia.com> no doubt there is a mistake but now I'm curious what it is üòÖ\n\nI mean binding context to arrow function plus operation priority","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$DDT3YpU5v78k0aQ0tpJ8dMrbGteVE1759sm5k9YriFU?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@pchimento:igalia.com\">@pchimento:igalia.com</a><br>no doubt there is a mistake but now I&#39;m curious what it is üòÖ</blockquote></mx-reply>I mean binding context to arrow function plus operation priority","m.relates_to":{"m.in_reply_to":{"event_id":"$DDT3YpU5v78k0aQ0tpJ8dMrbGteVE1759sm5k9YriFU"}},"msgtype":"m.text"},"ts":1692659876628,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$lQ2PueYzidy-FAhR9IKHoQ77AVjAigt9ZJVO--u1jCc"},
{"content":{"body":"> <@pchimento:igalia.com> no doubt there is a mistake but now I'm curious what it is üòÖ\n\n * I mean binding context to arrow function and operation priority","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$DDT3YpU5v78k0aQ0tpJ8dMrbGteVE1759sm5k9YriFU?via=matrix.org&amp;via=mozilla.org&amp;via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@pchimento:igalia.com\">@pchimento:igalia.com</a><br>no doubt there is a mistake but now I'm curious what it is üòÖ</blockquote></mx-reply> * I mean binding context to arrow function and operation priority","m.new_content":{"body":"I mean binding context to arrow function and operation priority","format":"org.matrix.custom.html","formatted_body":"I mean binding context to arrow function and operation priority","msgtype":"m.text"},"m.relates_to":{"event_id":"$lQ2PueYzidy-FAhR9IKHoQ77AVjAigt9ZJVO--u1jCc","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1692659884330,"senderName":"Yehor Yatskevych","senderId":"@yehoryatskevych:matrix.org","id":"$at25JkJvVVNw4SmLwvby1sBMPHgjjQ3UXn97KkiHtjI"}
]