[
{"content":{"body":"in implementations that model weakmaps as hidden fields on the keys, how do they in practice clean those up when the weakmap is no longer reachable?","m.mentions":{},"msgtype":"m.text"},"ts":1725045024046,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$TVXrsS15cSGJ2STJS98ssa7vLeQOvzlXM1Gwb_W93Xw"},
{"content":{"body":"> <@devsnek:matrix.org> in implementations that model weakmaps as hidden fields on the keys, how do they in practice clean those up when the weakmap is no longer reachable?\n\nI believe chakra works or worked that way; you could check","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$TVXrsS15cSGJ2STJS98ssa7vLeQOvzlXM1Gwb_W93Xw?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@devsnek:matrix.org\">@devsnek:matrix.org</a><br>in implementations that model weakmaps as hidden fields on the keys, how do they in practice clean those up when the weakmap is no longer reachable?</blockquote></mx-reply>I believe chakra works or worked that way; you could check","m.mentions":{"user_ids":["@devsnek:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$TVXrsS15cSGJ2STJS98ssa7vLeQOvzlXM1Gwb_W93Xw"}},"msgtype":"m.text"},"ts":1725047305632,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$WFhpdq6_RtbeaX9H1SiOsWklq6jDuKSjhw235RmlCrc"}
]