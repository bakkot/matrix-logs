[
{"content":{"body":"No action needed for some time, but here are some musings on how to specify `ErrorEvent`'s `filename`, `lineno`, `colno`, and cross-origin muting behavior better in the future: https://github.com/whatwg/html/issues/958#issuecomment-2182299223\n\nSummary: every throw completion should store the active ScriptOrModule + relevant ParseNode. (Either directly in the JS spec, or via a host hook.) And we'd need some way of translating ParseNode into lineno + colno, which I don't think there's any spec machinery for right now.","format":"org.matrix.custom.html","formatted_body":"<p>No action needed for some time, but here are some musings on how to specify <code>ErrorEvent</code>'s <code>filename</code>, <code>lineno</code>, <code>colno</code>, and cross-origin muting behavior better in the future: https://github.com/whatwg/html/issues/958#issuecomment-2182299223</p>\n<p>Summary: every throw completion should store the active ScriptOrModule + relevant ParseNode. (Either directly in the JS spec, or via a host hook.) And we'd need some way of translating ParseNode into lineno + colno, which I don't think there's any spec machinery for right now.</p>\n","m.mentions":{},"msgtype":"m.text"},"ts":1718959675265,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$9zG3pp8jFN6KxkB225-ZgZxq94wGPvs8xeQ-utNeWwM"},
{"content":{"body":"> <@domenicdenicola:matrix.org> No action needed for some time, but here are some musings on how to specify `ErrorEvent`'s `filename`, `lineno`, `colno`, and cross-origin muting behavior better in the future: https://github.com/whatwg/html/issues/958#issuecomment-2182299223\n> \n> Summary: every throw completion should store the active ScriptOrModule + relevant ParseNode. (Either directly in the JS spec, or via a host hook.) And we'd need some way of translating ParseNode into lineno + colno, which I don't think there's any spec machinery for right now.\n\nAny chance we could, in the future, store the current AsyncContext.Snapshot at this point?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$9zG3pp8jFN6KxkB225-ZgZxq94wGPvs8xeQ-utNeWwM?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@domenicdenicola:matrix.org\">@domenicdenicola:matrix.org</a><br><p>No action needed for some time, but here are some musings on how to specify <code>ErrorEvent</code>'s <code>filename</code>, <code>lineno</code>, <code>colno</code>, and cross-origin muting behavior better in the future: https://github.com/whatwg/html/issues/958#issuecomment-2182299223</p>\n<p>Summary: every throw completion should store the active ScriptOrModule + relevant ParseNode. (Either directly in the JS spec, or via a host hook.) And we'd need some way of translating ParseNode into lineno + colno, which I don't think there's any spec machinery for right now.</p>\n</blockquote></mx-reply>Any chance we could, in the future, store the current AsyncContext.Snapshot at this point?","m.mentions":{"user_ids":["@domenicdenicola:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$9zG3pp8jFN6KxkB225-ZgZxq94wGPvs8xeQ-utNeWwM"}},"msgtype":"m.text"},"ts":1718959718642,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$uHta08fRdssshS1oRP4solINosZh27nGGJ_EK2Azy8I"},
{"content":{"body":"If that'd be useful by whatever's consuming the end result, for sure. Do you have thoughts on exposing that on `ErrorEvent`?","format":"org.matrix.custom.html","formatted_body":"If that'd be useful by whatever's consuming the end result, for sure. Do you have thoughts on exposing that on <code>ErrorEvent</code>?","m.mentions":{},"msgtype":"m.text"},"ts":1718959817124,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$qhdGAm1qyiTNIKfjgL1s-BYaXJq67aCPhCfZZqu7YuI"},
{"content":{"body":"Right, either that or just automatically running the event within that snapshot (initially leaning towards the latter, now considering the former)","m.mentions":{},"msgtype":"m.text"},"ts":1718959959156,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$XkYG-XSqdInRByq0yLAIuhIh4lGh4YKRXcjmskVpdUg"},
{"content":{"body":"https://github.com/tc39/proposal-async-context/issues/90","m.mentions":{},"msgtype":"m.text"},"ts":1718959990120,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$2Mz0PMSvh4uHLoh0SoJmnTJrRi1NU6Nt85bfwb7VyE4"},
{"content":{"body":"and the same for unhandled rejections","m.mentions":{},"msgtype":"m.text"},"ts":1718960014143,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$1B5F-_CrssdGZCpM2qQ00nebrXGU7hinIBBN7rnZUD4"},
{"content":{"body":"Nice, that might be motivation for doing some of this work sooner rather than later, then.","m.mentions":{},"msgtype":"m.text"},"ts":1718960023376,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$dvXJRVOiDoleiPNH4DRbq6W6ADAhZc2-eJhb0GfiruY"},
{"content":{"body":"Or at least provide a path to follow if we ever do get around to cleaning up the `ErrorEvent` spec to the degree I'm talking about.","format":"org.matrix.custom.html","formatted_body":"Or at least provide a path to follow if we ever do get around to cleaning up the <code>ErrorEvent</code> spec to the degree I'm talking about.","m.mentions":{},"msgtype":"m.text"},"ts":1718960041984,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$v58OcfnJTlNjbHT1TpN_0T2DOxh56V7EAGfF1WdephQ"},
{"content":{"body":"is there some cross-browser difference in when these properties are assigned? (allocation vs throw time)","m.mentions":{},"msgtype":"m.text"},"ts":1718960121934,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$EOh0ZFEnGEpuQUbxFD4w2SQrmzz-mgoTWyWMMLOmsGo"},
{"content":{"body":"also re muting: now that we're standardizing ignoreList in TC39-TG4 (source maps), we might want to say something about how that relates to other parts of black boxing","m.mentions":{},"msgtype":"m.text"},"ts":1718960166521,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$D_CG16aIFHDiInY4-roN_4GO9Trj2X5FSx2iyly_syk"},
{"content":{"body":"for example we might want ignoreList2 which does full black boxing (apparently Mozilla initially implemented it this way, probably because we didn't have specs for anything)","m.mentions":{},"msgtype":"m.text"},"ts":1718960199036,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$kqVVe0tJGWPguB2c3lJlWApo_5y662orcYfP3ST1pAk"},
{"content":{"body":"There are definitely differences in muting. There are also reportedly differences in pre- vs. post-redirect URLs for `filename`. Not sure about allocation vs. throw time but I kind of remember that also being different, hmm.","format":"org.matrix.custom.html","formatted_body":"There are definitely differences in muting. There are also reportedly differences in pre- vs. post-redirect URLs for <code>filename</code>. Not sure about allocation vs. throw time but I kind of remember that also being different, hmm.","m.mentions":{},"msgtype":"m.text"},"ts":1718960254892,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$8VdQ0DkKFasBySfunCdPQ5KsRKbvtBocSHav1FbR4Gs"},
{"content":{"body":"sounds like fun, I'm glad you're working on that!","m.mentions":{},"msgtype":"m.text"},"ts":1718960278653,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$P-Cd16h0c5blVQ7zjI59pZbVmviklS_LXeihNmcPtS8"},
{"content":{"body":"Ehhhh am I though...","m.mentions":{},"msgtype":"m.text"},"ts":1718960304055,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$YDPmbPYyK_oZNR643EPZTLdOtJ1HfB3FJAetfrV65PU"},
{"content":{"body":"if you're not, then maybe we can recruit others here to try to help","m.mentions":{},"msgtype":"m.text"},"ts":1718960346549,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$aoYifeKBO8XPPnP5tm-uJSw9l4w7xjMDen4-CiLKFGc"},
{"content":{"body":"(e.g., from the source map or AsyncContext groups)","m.mentions":{},"msgtype":"m.text"},"ts":1718960376091,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$I46TkpchESR0HH1z1NHhOm5w_6BMYLSFqg8yO-uWKII"},
{"content":{"body":"A coworker (Jeremy) is doing some spec cleanup work as part of a rotation, and I got sniped into spending Friday evening musing about this stuff, so I dropped some ideas into the thread for the future :). Any help would definitely be appreciated.","m.mentions":{},"msgtype":"m.text"},"ts":1718960507567,"senderName":"Domenic","senderId":"@domenicdenicola:matrix.org","id":"$WHztJQcCZPwiTgFylo4xGJbn-0XS4BrM4jMxyWt05Zs"}
]