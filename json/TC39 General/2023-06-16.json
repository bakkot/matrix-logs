[
{"content":{"body":"HTML disagrees? I thought it was TC39 folks who insisted on using the same MIME type for classic and module scripts?","msgtype":"m.text"},"ts":1686899152909,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$1cRmTvTKdFLsACMh_tZnY6fb5oATl-x1gws0GR1nSDY"},
{"content":{"body":"Anyway, too late now either way.","msgtype":"m.text"},"ts":1686899174444,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$m_NQtw-paz62yH-h6A6bHVAuP4_gaCaANSw-V-QlgnU"},
{"content":{"body":"sorry I meant the HTML spec, not its authors","msgtype":"m.text"},"ts":1686899175812,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$kiKtNrB-x7NpIqAjDFAMyWhJjCVCD_VkX3ljeMf2P0E"},
{"content":{"body":"I do not recall who was responsible for that decision","msgtype":"m.text"},"ts":1686899182194,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$9evtnZbr9AdSKpsHZdN3bNF8yuMyPTtRGbpLoHvsYr8"},
{"content":{"body":"I think the module champions at the time felt pretty strongly about it. Any kind of additional hurdle was thought to be too much. (The HTML side did end up imposing CORS much to the chagrin of the champions.)","msgtype":"m.text"},"ts":1686899279841,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$joLzQypX_EyWH8mcYZWUIaPiuQmZ_RZ7OC5AxhaounY"},
{"content":{"body":"anyway I think it's probably the right thing, given how subtle the difference is","msgtype":"m.text"},"ts":1686899328301,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$pskvubucFDSvArW4Hd2XOQXpXwaFSdStQYxgLVqfxa4"},
{"content":{"body":"There are some disadvantages in that for certain optimizations you need to pipe through who requested the resource and then if the resource ends up being requested by something else as well that might get invalidated and such. But in practice I don't think anyone has attempted those.","msgtype":"m.text"},"ts":1686899428484,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$wKI3aiA73xk8lJAZPVOZIUcHCIQxNFrw_8_mlAxRPo0"},
{"content":{"body":"If we did something like type: \"script\" (\"script module script\" lol) I guess we would enforce CORS and UTF-8 just like we do for all modules, so might not be completely 1:1.","msgtype":"m.text"},"ts":1686899524757,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$ovrEhiaWsj3PsBS5WYV5hxWvEbBnHTX1twcetZHQCVo"},
{"content":{"body":"Ah, \"classic JavaScript module script\" I guess","msgtype":"m.text"},"ts":1686899582130,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$Pae30fkI5Jk1aNI5e1cedUU-djpU_FZ3XWwFdcp25V8"},
{"content":{"body":"We've had a lot of turnover among module champions, maybe Kris Kowal  or caridy remembers this discussion. Anyway there was lots of discussion about \"use module\" or something like that, which was rejected in favor of the idea that you could just change the script tag and that was it for the transition. Using the same mime type follows the same principle","format":"org.matrix.custom.html","formatted_body":"We've had a lot of turnover among module champions, maybe <a href=\"https://matrix.to/#/@kriskowal:matrix.org\">Kris Kowal</a>  or <a href=\"https://matrix.to/#/@caridy:matrix.org\">caridy</a> remembers this discussion. Anyway there was lots of discussion about \"use module\" or something like that, which was rejected in favor of the idea that you could just change the script tag and that was it for the transition. Using the same mime type follows the same principle","msgtype":"m.text"},"ts":1686918514475,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$_tpGX0RSX-F6eXa1LHGAgIv9ypwfJ3aslMgerXRTeUw"},
{"content":{"body":"I remember discussing this with dherman at Mozilla","msgtype":"m.text"},"ts":1686919723173,"senderName":"annevk","senderId":"@annevk:matrix.org","id":"$nc_JK1cTHAvmL4BLW44RdYbSZFbol7UxZ-N7d_P32LY"},
{"content":{"body":"I wasn’t participating at the time these decisions were made, but, this module champion doesn’t think it’s weird that CORS applies to modules. I don’t have strong feelings about the MIME type homo/heterogeneity issue, and though I don’t love the `.mjs` extension, the costs of that choice have been paid already. I also don’t hate “import with type script”. We wouldn’t emulate it in Hardened JavaScript but I don’t think that would meaningfully hurt the portability path. I imagine this being used to incorporate a jquery import or some such in the import graph.","format":"org.matrix.custom.html","formatted_body":"I wasn’t participating at the time these decisions were made, but, this module champion doesn’t think it’s weird that CORS applies to modules. I don’t have strong feelings about the MIME type homo/heterogeneity issue, and though I don’t love the <code>.mjs</code> extension, the costs of that choice have been paid already. I also don’t hate “import with type script”. We wouldn’t emulate it in Hardened JavaScript but I don’t think that would meaningfully hurt the portability path. I imagine this being used to incorporate a jquery import or some such in the import graph.","msgtype":"m.text"},"ts":1686936400316,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$6BqUiMgv5PqqtqiXjMZ69JGrXbbPXeeTvoyvYUgPfiY"},
{"content":{"body":"(The reason we wouldn’t emulate it in Hardened JavaScript, and would actively prevent it with Module hooks, is that sloppy mode escapes confinement.)","msgtype":"m.text"},"ts":1686936448463,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$_KAcQtQn-Y_gF5Pau5d0XiIflhH8I4HahfP9NqpzIMY"}
]