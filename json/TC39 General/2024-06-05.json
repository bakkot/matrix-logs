[
{"content":{"body":"I wonder if there's any want for a `Promise.sleep( duration )`. I find myself writing one-liners for this in many a project.\ne.g.\n`const sleep = durationMs => new Promise( resolve => setTimeout( resolve, durationMs ) );`","format":"org.matrix.custom.html","formatted_body":"I wonder if there's any want for a <code>Promise.sleep( duration )</code>. I find myself writing one-liners for this in many a project.<br>e.g.<br><code>const sleep = durationMs =&gt; new Promise( resolve =&gt; setTimeout( resolve, durationMs ) );</code>","m.mentions":{},"msgtype":"m.text"},"ts":1717628117220,"senderName":"whosy","senderId":"@whosy:matrix.org","id":"$dVz6shrkdVsjYYyvfZdU1_LM3qkQa5Zpsg3s6W_aBa4"},
{"content":{"body":"> <@whosy:matrix.org> I wonder if there's any want for a `Promise.sleep( duration )`. I find myself writing one-liners for this in many a project.\n> e.g.\n> `const sleep = durationMs => new Promise( resolve => setTimeout( resolve, durationMs ) );`\n\nThere are already solutions for this. scheduler.wait is mostly this. Node.js has timers/promises, etc. Given that timers tend to be implementation specific, it's likely best left as a web platform API ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$dVz6shrkdVsjYYyvfZdU1_LM3qkQa5Zpsg3s6W_aBa4?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@whosy:matrix.org\">@whosy:matrix.org</a><br />I wonder if there's any want for a <code>Promise.sleep( duration )</code>. I find myself writing one-liners for this in many a project.<br>e.g.<br><code>const sleep = durationMs =&gt; new Promise( resolve =&gt; setTimeout( resolve, durationMs ) );</code></blockquote></mx-reply>There are already solutions for this. scheduler.wait is mostly this. Node.js has timers/promises, etc. Given that timers tend to be implementation specific, it's likely best left as a web platform API","m.relates_to":{"m.in_reply_to":{"event_id":"$dVz6shrkdVsjYYyvfZdU1_LM3qkQa5Zpsg3s6W_aBa4"}},"msgtype":"m.text"},"ts":1717628332861,"senderName":"James M Snell","senderId":"@jasnell:matrix.org","id":"$QrtTHxAkuN3RS5GwBH6-OHvxItE6KPr6uNyoJoHfs4o"},
{"content":{"body":"Might I ask what `schedular.wait` is?\n \nAnd I really did mean as a simple shorthand for wrapping whatever native implementation of setTimeout is in a promise.\n\nThough I guess that does leave a big question mark about what value is returned (if any). I am very green when it comes to actual implementations and the specification side of the language, by the way.","format":"org.matrix.custom.html","formatted_body":"<p>Might I ask what <code>schedular.wait</code> is?</p>\n<p>And I really did mean as a simple shorthand for wrapping whatever native implementation of setTimeout is in a promise.</p>\n<p>Though I guess that does leave a big question mark about what value is returned (if any). I am very green when it comes to actual implementations and the specification side of the language, by the way.</p>\n","m.mentions":{},"m.relates_to":{"event_id":"$QrtTHxAkuN3RS5GwBH6-OHvxItE6KPr6uNyoJoHfs4o","is_falling_back":true,"m.in_reply_to":{"event_id":"$QrtTHxAkuN3RS5GwBH6-OHvxItE6KPr6uNyoJoHfs4o"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1717628567786,"senderName":"whosy","senderId":"@whosy:matrix.org","id":"$G_DVf9sB3UzOrEFFmy8q0_JzgKACg_aCcR4GUBj9NFc"},
{"content":{"body":"`scheduler.wait(...)` is defined https://github.com/WICG/scheduling-apis ... there's more to it but it essentially allows you to do `await scheduler.wait(duration)` ","format":"org.matrix.custom.html","formatted_body":"<code>scheduler.wait(...)</code> is defined https://github.com/WICG/scheduling-apis ... there's more to it but it essentially allows you to do <code>await scheduler.wait(duration)</code>","m.mentions":{},"m.relates_to":{"event_id":"$QrtTHxAkuN3RS5GwBH6-OHvxItE6KPr6uNyoJoHfs4o","is_falling_back":true,"m.in_reply_to":{"event_id":"$G_DVf9sB3UzOrEFFmy8q0_JzgKACg_aCcR4GUBj9NFc"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1717628695785,"senderName":"James M Snell","senderId":"@jasnell:matrix.org","id":"$2uQif9dpJi-jp2BV0H32asnoIJdrBvSfDfsE5X7mY24"},
{"content":{"body":"Ah, I see. I couldn't find any reference to this when I tried a quick search for npm/JavaScript or the proposals listings.\n\nIt's an interesting read, and would definitely encompass this use-case.","m.mentions":{},"m.relates_to":{"event_id":"$QrtTHxAkuN3RS5GwBH6-OHvxItE6KPr6uNyoJoHfs4o","is_falling_back":true,"m.in_reply_to":{"event_id":"$2uQif9dpJi-jp2BV0H32asnoIJdrBvSfDfsE5X7mY24"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1717628858109,"senderName":"whosy","senderId":"@whosy:matrix.org","id":"$uYGy__MLy5-5YSdIljPNhKzymgheInU_hcvQA1cuEFI"},
{"content":{"body":"> <@whosy:matrix.org> I wonder if there's any want for a `Promise.sleep( duration )`. I find myself writing one-liners for this in many a project.\n> e.g.\n> `const sleep = durationMs => new Promise( resolve => setTimeout( resolve, durationMs ) );`\n\n`setTimeout` is not part of JS","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$dVz6shrkdVsjYYyvfZdU1_LM3qkQa5Zpsg3s6W_aBa4?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@whosy:matrix.org\">@whosy:matrix.org</a><br>I wonder if there's any want for a <code>Promise.sleep( duration )</code>. I find myself writing one-liners for this in many a project.<br />e.g.<br /><code>const sleep = durationMs =&gt; new Promise( resolve =&gt; setTimeout( resolve, durationMs ) );</code></blockquote></mx-reply><code>setTimeout</code> is not part of JS","m.mentions":{"user_ids":["@whosy:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$dVz6shrkdVsjYYyvfZdU1_LM3qkQa5Zpsg3s6W_aBa4"}},"msgtype":"m.text"},"ts":1717628944518,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$h5odvfQLTqC3dsiwwPeBHWdFe3LIVG25V93bcxsUcvs"},
{"content":{"body":"the longer answer is that in order to get some flavor of `sleep()`, you would have to add various other things in the language first in order to support it","format":"org.matrix.custom.html","formatted_body":"the longer answer is that in order to get some flavor of <code>sleep()</code>, you would have to add various other things in the language first in order to support it","m.mentions":{},"msgtype":"m.text"},"ts":1717629126675,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$mMV31dlaZatm4taXRjwJ87qDKb708RbtLaSGV7EG6lI"},
{"content":{"body":"> <@softwarechris:matrix.org> `setTimeout` is not part of JS\n\nYes..that's something I only considered and realised after thinking about the differing return types across implementations. As I said in the thread now, I am very much not clued in on the language spec. I've mostly just used the language without considering its development until very recently.\n\nBut the lack of a spec-defined timing mechanism, I'm guessing is why the aforementioned Scheduler API is being developed?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$h5odvfQLTqC3dsiwwPeBHWdFe3LIVG25V93bcxsUcvs?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@softwarechris:matrix.org\">@softwarechris:matrix.org</a><br><code>setTimeout</code> is not part of JS</blockquote></mx-reply><p>Yes..that's something I only considered and realised after thinking about the differing return types across implementations. As I said in the thread now, I am very much not clued in on the language spec. I've mostly just used the language without considering its development until very recently.</p>\n<p>But the lack of a spec-defined timing mechanism, I'm guessing is why the aforementioned Scheduler API is being developed?</p>\n","m.mentions":{"user_ids":["@softwarechris:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$h5odvfQLTqC3dsiwwPeBHWdFe3LIVG25V93bcxsUcvs"}},"msgtype":"m.text"},"ts":1717629152675,"senderName":"whosy","senderId":"@whosy:matrix.org","id":"$2lhKveNpc5wvUFW3rznZk7Bi0PK4PAx8BGmDITcUIm8"},
{"content":{"body":"even if the core js language had timers, the web would still need a more complex scheduling api. you can read the details about that in the scheduling api readme","m.mentions":{},"msgtype":"m.text"},"ts":1717629231441,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$IDFKOSiUJZMwgjGKCb0x6P7li5PhjmWcE7rUqTTTGGs"},
{"content":{"body":"I can't speak to the motivation of the folks that advanced Scheduler, but if you already have an environment where you have production-ready foundational components available, like timing, eventing, and cancellation, and that environment is the same one in which you want to have `sleep()`, then that seems like a faster path to that goal","format":"org.matrix.custom.html","formatted_body":"I can't speak to the motivation of the folks that advanced Scheduler, but if you already have an environment where you have production-ready foundational components available, like timing, eventing, and cancellation, and that environment is the same one in which you want to have <code>sleep()</code>, then that seems like a faster path to that goal","m.mentions":{},"msgtype":"m.text"},"ts":1717629343452,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$b1NBuM0unM4UTFcj85CvbAoe4tYHDHq445ge1OEU1bo"},
{"content":{"body":"that doesn't mean it can't be pursued in the language, or that it's not still useful to add to the language","m.mentions":{},"msgtype":"m.text"},"ts":1717629476442,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$jnOa5VGC-l_hajpKwg1Qnc1y6huwnEWxenZVySuKSWg"},
{"content":{"body":"I very much hope `scheduler.wait` does not become the way to do this, but it seems pretty likely unfortunately ","format":"org.matrix.custom.html","formatted_body":"I very much hope <code>scheduler.wait</code> does not become the way to do this, but it seems pretty likely unfortunately","m.mentions":{},"msgtype":"m.text"},"ts":1717629650448,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$1lPshy_S8LtT5oM_fxpg7gss-y-V0u4nBW55Se5g8L0"},
{"content":{"body":"we generally try to avoid duplicating things on the web platform, so if that ships it will not be in the language probably","m.mentions":{},"msgtype":"m.text"},"ts":1717629685676,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$z8R4Nqx6V6ZYzrqh1bivrvMjEvHppaaji0UU31wlzic"},
{"content":{"body":"> <@bakkot:matrix.org> we generally try to avoid duplicating things on the web platform, so if that ships it will not be in the language probably\n\nThat was my immediate concern as well. At this point the only way to avoid duplication is to adopt part of the spec into the language, or to try and rush through a proposal to the same effect faster than Scheduler.wait it can be adopted into major browsers.\nBoth of which have their own challenges and pitfalls..","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$z8R4Nqx6V6ZYzrqh1bivrvMjEvHppaaji0UU31wlzic?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@bakkot:matrix.org\">@bakkot:matrix.org</a><br>we generally try to avoid duplicating things on the web platform, so if that ships it will not be in the language probably</blockquote></mx-reply>That was my immediate concern as well. At this point the only way to avoid duplication is to adopt part of the spec into the language, or to try and rush through a proposal to the same effect faster than Scheduler.wait it can be adopted into major browsers.<br>Both of which have their own challenges and pitfalls..","m.mentions":{"user_ids":["@bakkot:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$z8R4Nqx6V6ZYzrqh1bivrvMjEvHppaaji0UU31wlzic"}},"msgtype":"m.text"},"ts":1717629821732,"senderName":"whosy","senderId":"@whosy:matrix.org","id":"$zOUpEGVD6RXz3abZEwPa2ZNepHYpCqj_yzJPcNpteK8"},
{"content":{"body":"Or I guess option 3, create a stage-0 proposal and just ask them very nicely to drop parts of their work which..I also don't see happening.","m.mentions":{},"msgtype":"m.text"},"ts":1717629872596,"senderName":"whosy","senderId":"@whosy:matrix.org","id":"$aCa-3elNhL_90Ig7dJVXMiMv-rtoQWsI-CUh9K6kxsc"}
]