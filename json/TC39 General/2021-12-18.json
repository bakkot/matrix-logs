[
{"content":{"body":"There's resistance against adding syntax to ECMAScript and implicit tail-call elimination doesn't seem to be working out from engine implementers. Then how about explicit, magical `Function.prototype.callWithElimination(this, ...params)` that gives an error during AST generation if the call is not in correct place for eliminating the tail call?","format":"org.matrix.custom.html","formatted_body":"There's resistance against adding syntax to ECMAScript and implicit tail-call elimination doesn't seem to be working out from engine implementers. Then how about explicit, magical <code>Function.prototype.callWithElimination(this, ...params)</code> that gives an error during AST generation if the call is not in correct place for eliminating the tail call?","msgtype":"m.text"},"ts":1639798940130,"senderName":"pokute","senderId":"@pokute:matrix.org","id":"$scQf4W2eCqufuXDd0MKlkv2QjViG42PHkjE-xry9QDk"},
{"content":{"body":"what is \"AST generation\"? that's not a thing in the spec afaict","msgtype":"m.text"},"ts":1639811635005,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$K3NHcvrbGJvUD4fKNaYLHAZksiBhg1MR16-CguWNswY"},
{"content":{"body":" * what is \"AST generation\"? that's not a thing in the spec afaict","m.new_content":{"body":"what is \"AST generation\"? that's not a thing in the spec afaict","msgtype":"m.text"},"m.relates_to":{"event_id":"$K3NHcvrbGJvUD4fKNaYLHAZksiBhg1MR16-CguWNswY","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1639811647498,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$tlRZX48B2Bj6_zZ8QF4YlZB5diFV773D_Vl8801Cyl8"},
{"content":{"body":"> <@ljharb:matrix.org> what is \"AST generation\"? that's not a thing in the spec afaict\n\nThey mean \"while parsing\" ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$K3NHcvrbGJvUD4fKNaYLHAZksiBhg1MR16-CguWNswY?via=igalia.com&via=matrix.org&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br />what is \"AST generation\"? that's not a thing in the spec afaict</blockquote></mx-reply>They mean \"while parsing\" ","m.relates_to":{"m.in_reply_to":{"event_id":"$K3NHcvrbGJvUD4fKNaYLHAZksiBhg1MR16-CguWNswY"}},"msgtype":"m.text"},"ts":1639812037042,"senderName":"ryzokuken","senderId":"@usharma:igalia.com","id":"$N7iCxhlM5gnIF0V6RDR7ewLruqv8jw6e2fYHNvRUosI"},
{"content":{"body":"But I don't think a function call should fail while parsing? ","msgtype":"m.text"},"ts":1639812054770,"senderName":"ryzokuken","senderId":"@usharma:igalia.com","id":"$_8Xmhneun1SXqroyau9nYmRUz0OzG1Mdj76W27mjs0E"},
{"content":{"body":"sure, but how could you parse an API call like that?","msgtype":"m.text"},"ts":1639812054914,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$bJmgWbrejCxxx1NcCfXT6Ro4lPK0heGlmCh5RPHd95w"},
{"content":{"body":"Exactly","msgtype":"m.text"},"ts":1639812061967,"senderName":"ryzokuken","senderId":"@usharma:igalia.com","id":"$T0l2SyLuAYzKO9DYgl5Gg68DE-lt7R6YHjCd36wSzZo"},
{"content":{"body":"`const x = Function.prototype.callWithElimination; return x.call(f);`","format":"org.matrix.custom.html","formatted_body":"<code>const x = Function.prototype.callWithElimination; return x.call(f);</code>","msgtype":"m.text"},"ts":1639812073936,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$Ei81P2iHaWGFr_fT2_1bKLUCZK4z-5m4WBZ2pJXDM-0"},
{"content":{"body":"pretty sure it requires syntax to detect the position of something, eg tail call position","msgtype":"m.text"},"ts":1639812093009,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$u5IT7BFdVa0CWaB2fKyH9qT6kIcDyb_p_g23RxqUMz4"},
{"content":{"body":"I don't think this will work, it's valid syntax and shouldn't fail. ","format":"org.matrix.custom.html","formatted_body":"I don't think this will work, it's valid syntax and shouldn't fail.","msgtype":"m.text"},"ts":1639812095122,"senderName":"ryzokuken","senderId":"@usharma:igalia.com","id":"$1nUyDIoX2W5lLhWDGPL5j6r1Sj-wBgeOdNDikQFF1gM"},
{"content":{"body":"> <@ljharb:matrix.org> pretty sure it requires syntax to detect the position of something, eg tail call position\n\nYou mean syntax around the expression inside the function? ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$u5IT7BFdVa0CWaB2fKyH9qT6kIcDyb_p_g23RxqUMz4?via=igalia.com&via=matrix.org&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br />pretty sure it requires syntax to detect the position of something, eg tail call position</blockquote></mx-reply>You mean syntax around the expression inside the function? ","m.relates_to":{"m.in_reply_to":{"event_id":"$u5IT7BFdVa0CWaB2fKyH9qT6kIcDyb_p_g23RxqUMz4"}},"msgtype":"m.text"},"ts":1639812195618,"senderName":"ryzokuken","senderId":"@usharma:igalia.com","id":"$8SoHz6jOeQYkFUN6fq03-dtHLgxwENrryt_Eg8Gi1Lg"},
{"content":{"body":"The expression containing the tail call I mean. ","format":"org.matrix.custom.html","formatted_body":"The expression containing the tail call I mean.","msgtype":"m.text"},"ts":1639812223763,"senderName":"ryzokuken","senderId":"@usharma:igalia.com","id":"$Rufob1LuYYL4D6Xywx4xQbgB09V2Y796XPBrGyRinLc"},
{"content":{"body":"Yeah I don't see how something that isn't syntax could cause a parsing time error. Now the premise about syntax is that it should pay for itself. If there is a way to add something without syntax, then there is little justification to add syntax. If the only option is syntax (like in this suggestion) then the question becomes, is it worth the cost? I'm not sure I know enough about tail call use cases to form a complete opinion, but the fact we've gotten away without it for so long is an indicator there are likely ways to avoid a tail call optimization requirements.","msgtype":"m.text"},"ts":1639812901564,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$jfnBn7lztF_xCbuqxWYyZA_O21aU3Hr9TrYSC69tDBE"},
{"content":{"body":"* Yeah I don't see how something that isn't syntax could cause a parsing time error. Now the premise about syntax is that it should pay for itself. If there is a way to add something without syntax, then there is little justification to add syntax. If the only option is syntax (like in this idea of explicit tail call) then the question becomes, is it worth the cost? I'm not sure I know enough about tail call use cases to form a complete opinion, but the fact we've gotten away without it for so long is an indicator there are likely ways to avoid a tail call optimization requirements.","m.new_content":{"body":"Yeah I don't see how something that isn't syntax could cause a parsing time error. Now the premise about syntax is that it should pay for itself. If there is a way to add something without syntax, then there is little justification to add syntax. If the only option is syntax (like in this idea of explicit tail call) then the question becomes, is it worth the cost? I'm not sure I know enough about tail call use cases to form a complete opinion, but the fact we've gotten away without it for so long is an indicator there are likely ways to avoid a tail call optimization requirements.","msgtype":"m.text"},"m.relates_to":{"event_id":"$jfnBn7lztF_xCbuqxWYyZA_O21aU3Hr9TrYSC69tDBE","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1639813262937,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$53YBJXYdlaAZMuIqyrLckCScQvBeoXOP8tdoFb7l3jU"}
]