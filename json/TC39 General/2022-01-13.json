[
{"content":{"body":"yeah it's not easy to know what's what…","msgtype":"m.text"},"ts":1642040963543,"senderName":"sachag","senderId":"@sachag:matrix.org","id":"$0ogcatVbOSTau95WMsyh4Herc-clTQhse6EXtoINMXQ"},
{"content":{"body":"Intl is sort of in the middle, but it's in browsers and node, so it feels more language than web to me","msgtype":"m.text"},"ts":1642097102884,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$MB2okprtyxY71PS60oSW_o2sQzcvYWPRWwwlR20lErQ"},
{"content":{"body":"and i do actually think most devs end up with a mental model of \"browser stuff\", \"node stuff\", and \"universal/isomorphic stuff\", and are pretty aware of the difference","msgtype":"m.text"},"ts":1642097130018,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$xWU43Poq0jCFYgN8exJ6K_HCiM6UcWEG-N7Y7_7HMjo"},
{"content":{"body":" * and i do actually think most devs end up with a mental model of \"browser stuff\", \"node stuff\", and \"universal/isomorphic stuff\", and are pretty aware of the difference","m.new_content":{"body":"and i do actually think most devs end up with a mental model of \"browser stuff\", \"node stuff\", and \"universal/isomorphic stuff\", and are pretty aware of the difference","msgtype":"m.text"},"m.relates_to":{"event_id":"$xWU43Poq0jCFYgN8exJ6K_HCiM6UcWEG-N7Y7_7HMjo","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1642097142956,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$epJHkJ8tQxzC07RMRHfSwk1Cr6orzpv11k5t1ngNasQ"},
{"content":{"body":"things like setTimeout, that are universal but not in the language spec, muddy the waters a bit, ofc","msgtype":"m.text"},"ts":1642097159879,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$43UYjuiezvh5-L4Eg7Na3TyNpDznicndLC1ouk9X6K0"},
{"content":{"body":"and URL","msgtype":"m.text"},"ts":1642097312719,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$9IY5F81ShJYudsYeWRtxn5jBt2M4H0TuKkzXYc96VS0"},
{"content":{"body":"someday, fetch","msgtype":"m.text"},"ts":1642097314442,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$nZt_dNJ1LAkM7ZFxEDutMs4zsApGcXHJPGMBeCad18E"},
{"content":{"body":"I think the distinction is mostly relevant for IO things","msgtype":"m.text"},"ts":1642097376826,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$4gGXRzUIDmcAGLJzUvl4ybrLFdKMFRBfVrZWxCTxSYA"},
{"content":{"body":"like, `fs` is node-only, the DOM is browser-only","format":"org.matrix.custom.html","formatted_body":"like, <code>fs</code> is node-only, the DOM is browser-only","msgtype":"m.text"},"ts":1642097388634,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$qbDziZ0IFGdbvm2QrlAnTjpP90CB5N6kbbBA29zb9R0"},
{"content":{"body":"that doesn't map that cleanly to \"tc39 spec vs whatwg spec\"","msgtype":"m.text"},"ts":1642097424903,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$GIGVVvNow7T5LLVdMTXY1-iHwafrIYhBP7qA3_0kEKM"},
{"content":{"body":"URL true. fetch never, because a compliant fetch isn't possible outside a browser (i'd love a universal abstraction for \"make an http request and get a promise\", but fetch sadly isn't eligible to be it)","msgtype":"m.text"},"ts":1642097468719,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$9sbsvxNuW9i6nF3h7seMV6vjct82H58CED1Xve3HD9s"},
{"content":{"body":"very true tho, it's not a clean mental model around spec boundaries","msgtype":"m.text"},"ts":1642097482716,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$0MH0QOv_8BzxjKutxoQYqTzOy_a6Z1oaru2yP1-OgnQ"},
{"content":{"body":"but it's pretty close","msgtype":"m.text"},"ts":1642097486692,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$HKYuTJLP6IWpjXsvcitL6z9ItiPgiOq_Am2Z7kx-044"},
{"content":{"body":" * URL true. fetch never, because a compliant fetch isn't possible outside a browser (i'd love a universal abstraction for \"make an http request and get a promise\", but fetch sadly isn't eligible to be it)","m.new_content":{"body":"URL true. fetch never, because a compliant fetch isn't possible outside a browser (i'd love a universal abstraction for \"make an http request and get a promise\", but fetch sadly isn't eligible to be it)","msgtype":"m.text"},"m.relates_to":{"event_id":"$9sbsvxNuW9i6nF3h7seMV6vjct82H58CED1Xve3HD9s","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1642097514629,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$3FB9TIYpEdvuhQBellhash5OQqiaTQcQ01FtAUhkjno"},
{"content":{"body":"aw I thought they were gonna do that","msgtype":"m.text"},"ts":1642097591229,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$Ht8r_TMWJBPGWt5HvSD569F7IBOs7NG4pLFbhX896vE"},
{"content":{"body":"what makes it not possible outside a browser?","msgtype":"m.text"},"ts":1642097597558,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$bq0Xyks5BXzs1N-O1kZBRSJekgKlS-RTVt3l5fGXHjk"},
{"content":{"body":"> <@ljharb:matrix.org> things like setTimeout, that are universal but not in the language spec, muddy the waters a bit, ofc\n\nI don't know if it's TC39's place to provide this but it'd be great to have a signal about what things are \"universal\" - we don't have setTimeout in GNOME's JS environment, for example, because GNOME's platform libraries already provide equivalent functionality. but we are nonetheless planning to add it soon, just because more beginners are familiar with it. we've had a bunch of discussion about which WHATWG facilities are in scope and which only make sense in browsers","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$43UYjuiezvh5-L4Eg7Na3TyNpDznicndLC1ouk9X6K0?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>things like setTimeout, that are universal but not in the language spec, muddy the waters a bit, ofc</blockquote></mx-reply>I don't know if it's TC39's place to provide this but it'd be great to have a signal about what things are &quot;universal&quot; - we don't have setTimeout in GNOME's JS environment, for example, because GNOME's platform libraries already provide equivalent functionality. but we are nonetheless planning to add it soon, just because more beginners are familiar with it. we've had a bunch of discussion about which WHATWG facilities are in scope and which only make sense in browsers","m.relates_to":{"m.in_reply_to":{"event_id":"$43UYjuiezvh5-L4Eg7Na3TyNpDznicndLC1ouk9X6K0"}},"msgtype":"m.text"},"ts":1642100137323,"senderName":"ptomato","senderId":"@pchimento:igalia.com","id":"$geIIibRv4y4hEBVmOtVNokrbkFX-iWRQocUqhFWQVcI"},
{"content":{"body":"bakkot: node doesn't have cookies, or a \"current URL\", and a bunch of other stuff","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@bakkot:matrix.org\">bakkot</a>: node doesn't have cookies, or a &quot;current URL&quot;, and a bunch of other stuff","msgtype":"m.text"},"ts":1642100201629,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$lJ49dwpSHMuqTVLazEBwG3Dkb9l7BwT02CsIx1xBpwQ"},
{"content":{"body":"node could ship a partial fetch but it's either 100% fetch or it's not fetch ¯\\\\\\_(ツ)_/¯ ","format":"org.matrix.custom.html","formatted_body":"node could ship a partial fetch but it's either 100% fetch or it's not fetch ¯\\_(ツ)_/¯","msgtype":"m.text"},"ts":1642100213489,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$WxixeBNNNovHEGmeNvVyVvtElJwODP3XXN2Ir1xQJtE"},
{"content":{"body":" * node could ship a partial fetch but it's either 100% fetch or it's not fetch","m.new_content":{"body":"node could ship a partial fetch but it's either 100% fetch or it's not fetch","msgtype":"m.text"},"m.relates_to":{"event_id":"$WxixeBNNNovHEGmeNvVyVvtElJwODP3XXN2Ir1xQJtE","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1642100217776,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$C8esNdUCf2NqbnDJlF_c4wz7X-BjqmF6Au2_2cPDrw8"},
{"content":{"body":" * node could ship a partial fetch but it's either 100% fetch or it's not fetch ¯\\\\\\_(ツ)_/¯ ","format":"org.matrix.custom.html","formatted_body":" * node could ship a partial fetch but it's either 100% fetch or it's not fetch ¯\\_(ツ)_/¯","m.new_content":{"body":"node could ship a partial fetch but it's either 100% fetch or it's not fetch ¯\\\\\\_(ツ)_/¯ ","format":"org.matrix.custom.html","formatted_body":"node could ship a partial fetch but it's either 100% fetch or it's not fetch ¯\\_(ツ)_/¯","msgtype":"m.text"},"m.relates_to":{"event_id":"$WxixeBNNNovHEGmeNvVyVvtElJwODP3XXN2Ir1xQJtE","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1642100221010,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$toqGNCM6n6pRp4vTodc9MU38S_Fo2XIFOlRMKC3555Q"},
{"content":{"body":"Just default \"current URL\" to \"https://example.com\", done","msgtype":"m.text"},"ts":1642100289369,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$y31L-Rzy3YwDgUBwh8AGhj4uZwwWay_6vn11avmDDhI"},
{"content":{"body":"then iirc node would have to factor in same-origin restrictions, CORS, local cookies, etc, none of which apply to node","msgtype":"m.text"},"ts":1642100754702,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$gqgyutcrMQXm7EK_oOCKAFY_QVa1kcH_CPCxvIdJuMo"},
{"content":{"body":"it's just a category error to try to use `fetch` outside a browser; it (like most web things) just wasn't designed for non-web use","format":"org.matrix.custom.html","formatted_body":"it's just a category error to try to use <code>fetch</code> outside a browser; it (like most web things) just wasn't designed for non-web use","msgtype":"m.text"},"ts":1642100776588,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$ALK2sW-HiN-UNnLv_l3GYVvAXI5o117qoq_zchRPX3U"},
{"content":{"body":"(My suggestion was shitposting.)","msgtype":"m.text"},"ts":1642100937857,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$z4htUBH5H934LzZ2nKBDWbrRo9vy0T0tJChz-dbWFpk"},
{"content":{"body":"ehhhhhhhhhh this sounds like one of those distinctions which is unlikely to matter to users in practice","msgtype":"m.text"},"ts":1642101013827,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$OHHDT07jKBvhcCYO1Y9G1sqAo7MqJ9_BfOJvhWshnZU"},
{"content":{"body":"if node has a global named `fetch` that I can use the way I would use `fetch` I do not care if the lack of cookies means that in fact they do not \"have fetch\"","format":"org.matrix.custom.html","formatted_body":"if node has a global named <code>fetch</code> that I can use the way I would use <code>fetch</code> I do not care if the lack of cookies means that in fact they do not &quot;have fetch&quot;","msgtype":"m.text"},"ts":1642101051664,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$uPWBvOfgszut8iHWYIrAxKb21jdJwA-mdGpmxRpzkOo"},
{"content":{"body":"> <@bakkot:matrix.org> what makes it not possible outside a browser?\n\nIt is very possible. Both Cloudflare and Deno have demonstrated it is very possible to create a rather spec compliant server side `fetch` implementation. Deno only really leaves out two main specification features: cookie jars and CORS.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$bq0Xyks5BXzs1N-O1kZBRSJekgKlS-RTVt3l5fGXHjk?via=igalia.com&via=matrix.org&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@bakkot:matrix.org\">@bakkot:matrix.org</a><br>what makes it not possible outside a browser?</blockquote></mx-reply>It is very possible. Both Cloudflare and Deno have demonstrated it is very possible to create a rather spec compliant server side <code>fetch</code> implementation. Deno only really leaves out two main specification features: cookie jars and CORS.","m.relates_to":{"m.in_reply_to":{"event_id":"$bq0Xyks5BXzs1N-O1kZBRSJekgKlS-RTVt3l5fGXHjk"}},"msgtype":"m.text"},"ts":1642101511798,"senderName":"Luca Casonato","senderId":"@lucacasonato:matrix.org","id":"$fVFY9s6nVx_jckLfdryX4o8yvx1cWuHMMR6kom63NHs"},
{"content":{"body":"something that you can use in the ways you would use `fetch`, but not in *all* the ways you would use `fetch`, will cause more harm than good. i'm aware of deno's implementation.","format":"org.matrix.custom.html","formatted_body":"something that you can use in the ways you would use <code>fetch</code>, but not in <em>all</em> the ways you would use <code>fetch</code>, will cause more harm than good. i'm aware of deno's implementation.","msgtype":"m.text"},"ts":1642102969168,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$UX_is4CjCFhNzhWrfJIMAA4VhWcRC1fBXNRzFAmMATc"},
{"content":{"body":"it's the same harm caused by a noncompliant polyfill. if you want less than 100% compliance, then it's better to use something that isn't purporting to match a spec.","msgtype":"m.text"},"ts":1642103003607,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$Yaou_Jm431NGYHCYbVyaGqMfIetI-zdq90gpN7b1jLg"},
{"content":{"body":"Let's chat about it some time. I don't think this is the right venue though :-)","msgtype":"m.text"},"ts":1642103019470,"senderName":"Luca Casonato","senderId":"@lucacasonato:matrix.org","id":"$dPhZir6EMAuYQFyitTcJWja2T7S31jpZ7BCcdYkNl4I"},
{"content":{"body":"fair enough :-)","msgtype":"m.text"},"ts":1642103046040,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$KT1JCtVm8588ep6c7lt6k15kEDAurZgI1PcF-CqS-qc"}
]