[
{"content":{"body":"@snek Do you mean 3600Ws¯¹s?","m.mentions":{},"msgtype":"m.text"},"ts":1763605088875,"senderName":"whosy","senderId":"@whosy:matrix.org","id":"$SY-TK86XErGC_RyjKZugDzDkagiorKPqMY8rcqtIDbI"},
{"content":{"body":"* snek:  Do you mean 3600Ws¯¹s?","format":"org.matrix.custom.html","formatted_body":"* <a href=\"https://matrix.to/#/@devsnek:matrix.org\">snek</a>:  Do you mean 3600Ws¯¹s?","m.mentions":{"user_ids":["@devsnek:matrix.org"]},"m.new_content":{"body":"snek:  Do you mean 3600Ws¯¹s?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@devsnek:matrix.org\">snek</a>:  Do you mean 3600Ws¯¹s?","m.mentions":{"user_ids":["@devsnek:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$SY-TK86XErGC_RyjKZugDzDkagiorKPqMY8rcqtIDbI","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1763605096270,"senderName":"whosy","senderId":"@whosy:matrix.org","id":"$9_2aTnFc4PjliDSvWjtSYtWs7bPMagbXXf2ks3FoKaE"},
{"content":{"body":"* snek:  Do you mean 3600Js¯¹s?","format":"org.matrix.custom.html","formatted_body":"* <a href=\"https://matrix.to/#/@devsnek:matrix.org\">snek</a>:  Do you mean 3600Js¯¹s?","m.mentions":{},"m.new_content":{"body":"snek:  Do you mean 3600Js¯¹s?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@devsnek:matrix.org\">snek</a>:  Do you mean 3600Js¯¹s?","m.mentions":{"user_ids":["@devsnek:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$SY-TK86XErGC_RyjKZugDzDkagiorKPqMY8rcqtIDbI","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1763605117081,"senderName":"whosy","senderId":"@whosy:matrix.org","id":"$COtKGPGXaAns_ieqwZEMEus8wAzhCraIGWcC7rL3hyQ"},
{"content":{"body":":>","m.mentions":{},"msgtype":"m.text"},"ts":1763605123772,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$qQq65DM4gLuRXYaklBDLFZ4EhKqb77MXAUujyztCjho"},
{"content":{"body":"Mmyup, I indeed just had a bug in my code and got quite confused about the incorrect description comment.","m.mentions":{"user_ids":["@iain:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$_LDPxi4XfK9W02SxCd_tibbBW4KPynKNr4aadrxEBTs"}},"msgtype":"m.text"},"ts":1763622122684,"senderName":"Aapo Alasuutari","senderId":"@aapo.alasuutari:matrix.org","id":"$bB82UNiq_v_yfks7BrvO0N1MjFdVhvvGYHGyCwebd2c"},
{"content":{"body":"On a related note, the `INTERPRETING.md` is a little out of date, eg. broadcast doesn't take or pass two parameters but instead just takes and passes a single SharedArrayBuffer between agents.\n\nAlso the document is seemingly missing a note about `setTimeout` which seems to be a requirement for a whopping three `waitAsync` tests. `atomicsHelper.js` does set up a custom `setTimeout` function if none exist in the global but that function is based on just `Promise.resolve().then(cb)`'ing recursively. That exercises the microtask queue until timeout, which means that the `Atomics.waitAsync` timeouts that the test is exercising do not get a chance to run (best as I can tell anyway). eg. Running the test in Node with the custom `setTimeout` function used unconditionally fails from a timeout.","format":"org.matrix.custom.html","formatted_body":"<p>On a related note, the <code>INTERPRETING.md</code> is a little out of date, eg. broadcast doesn't take or pass two parameters but instead just takes and passes a single SharedArrayBuffer between agents.</p>\n<p>Also the document is seemingly missing a note about <code>setTimeout</code> which seems to be a requirement for a whopping three <code>waitAsync</code> tests. <code>atomicsHelper.js</code> does set up a custom <code>setTimeout</code> function if none exist in the global but that function is based on just <code>Promise.resolve().then(cb)</code>'ing recursively. That exercises the microtask queue until timeout, which means that the <code>Atomics.waitAsync</code> timeouts that the test is exercising do not get a chance to run (best as I can tell anyway). eg. Running the test in Node with the custom <code>setTimeout</code> function used unconditionally fails from a timeout.</p>\n","m.mentions":{},"msgtype":"m.text"},"ts":1763622778689,"senderName":"Aapo Alasuutari","senderId":"@aapo.alasuutari:matrix.org","id":"$yE5qbDu0PGq1cQthxG0gp_cYyf4hh0wnvWb_dHeHTXc"},
{"content":{"body":"https://github.com/tc39/test262/pull/4692\nhttps://github.com/tc39/test262/pull/4693","m.mentions":{},"msgtype":"m.text"},"ts":1763624588530,"senderName":"Aapo Alasuutari","senderId":"@aapo.alasuutari:matrix.org","id":"$Pwm7o5nTBShsm0oxOE6bZkLfxuRiZXsp0iTMbKhtNH8"},
{"content":{"body":"> <@aapo.alasuutari:matrix.org> On a related note, the `INTERPRETING.md` is a little out of date, eg. broadcast doesn't take or pass two parameters but instead just takes and passes a single SharedArrayBuffer between agents.\n> \n> Also the document is seemingly missing a note about `setTimeout` which seems to be a requirement for a whopping three `waitAsync` tests. `atomicsHelper.js` does set up a custom `setTimeout` function if none exist in the global but that function is based on just `Promise.resolve().then(cb)`'ing recursively. That exercises the microtask queue until timeout, which means that the `Atomics.waitAsync` timeouts that the test is exercising do not get a chance to run (best as I can tell anyway). eg. Running the test in Node with the custom `setTimeout` function used unconditionally fails from a timeout.\n\n> That exercises the microtask queue until timeout, which means that the Atomics.waitAsync timeouts that the test is exercising do not get a chance to run (best as I can tell anyway).\n\nIs that the correct behaviour? I would expect the event loop to interweave promise jobs with timeout jobs instead of trying to execute all pending promise jobs first","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!wbACpffbfxANskIFZq:matrix.org/$yE5qbDu0PGq1cQthxG0gp_cYyf4hh0wnvWb_dHeHTXc?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@aapo.alasuutari:matrix.org\">@aapo.alasuutari:matrix.org</a><br><p>On a related note, the <code>INTERPRETING.md</code> is a little out of date, eg. broadcast doesn't take or pass two parameters but instead just takes and passes a single SharedArrayBuffer between agents.</p>\n<p>Also the document is seemingly missing a note about <code>setTimeout</code> which seems to be a requirement for a whopping three <code>waitAsync</code> tests. <code>atomicsHelper.js</code> does set up a custom <code>setTimeout</code> function if none exist in the global but that function is based on just <code>Promise.resolve().then(cb)</code>'ing recursively. That exercises the microtask queue until timeout, which means that the <code>Atomics.waitAsync</code> timeouts that the test is exercising do not get a chance to run (best as I can tell anyway). eg. Running the test in Node with the custom <code>setTimeout</code> function used unconditionally fails from a timeout.</p>\n</blockquote></mx-reply><blockquote>\n<p>That exercises the microtask queue until timeout, which means that the Atomics.waitAsync timeouts that the test is exercising do not get a chance to run (best as I can tell anyway).</p>\n</blockquote>\n<p>Is that the correct behaviour? I would expect the event loop to interweave promise jobs with timeout jobs instead of trying to execute all pending promise jobs first</p>\n","m.mentions":{"user_ids":["@aapo.alasuutari:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$yE5qbDu0PGq1cQthxG0gp_cYyf4hh0wnvWb_dHeHTXc"}},"msgtype":"m.text"},"ts":1763651713942,"senderName":"Jedel","senderId":"@jedel:matrix.org","id":"$rhrj1wjka2BEtRJv1-lerPbcEZI2p556Dy6jiwc-wXo"},
{"content":{"body":"That does sound like yes, those 3 tests do seem to rely on the host providing a event loop with a timeout event ","format":"org.matrix.custom.html","formatted_body":"That does sound like yes, those 3 tests do seem to rely on the host providing a event loop with a timeout event ","msgtype":"m.text"},"ts":1763660539985,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$VIdqYrjQ4Bi58lqx5mXUj4uL6_CWm_qV1anhNoC53p0"}
]