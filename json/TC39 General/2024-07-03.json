[
{"content":{"body":"could WeakRef have something like an `is(obj) -> bool` api? i feel like that's safe since `obj` has to be held strongly and any other mismatch is false.","format":"org.matrix.custom.html","formatted_body":"could WeakRef have something like an <code>is(obj) -&gt; bool</code> api? i feel like that's safe since <code>obj</code> has to be held strongly and any other mismatch is false.","m.mentions":{},"msgtype":"m.text"},"ts":1719981067465,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$CGVVX9BZbZHjBEbxMUn9zGqIglk7cRZqFMqUzCoqCQo"},
{"content":{"body":" * could WeakRef have something like an `is(obj) -> bool` method? i feel like that's safe since `obj` has to be held strongly and any other mismatch is false.","format":"org.matrix.custom.html","formatted_body":" * could WeakRef have something like an <code>is(obj) -&gt; bool</code> method? i feel like that's safe since <code>obj</code> has to be held strongly and any other mismatch is false.","m.mentions":{},"m.new_content":{"body":"could WeakRef have something like an `is(obj) -> bool` method? i feel like that's safe since `obj` has to be held strongly and any other mismatch is false.","format":"org.matrix.custom.html","formatted_body":"could WeakRef have something like an <code>is(obj) -&gt; bool</code> method? i feel like that's safe since <code>obj</code> has to be held strongly and any other mismatch is false.","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$CGVVX9BZbZHjBEbxMUn9zGqIglk7cRZqFMqUzCoqCQo","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1719981075209,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$ICAqQ_LQewaELQZs79SPkBvxsNel9tItYkI2_2HEAB8"},
{"content":{"body":"would that be different from `.deref() == obj`?","format":"org.matrix.custom.html","formatted_body":"would that be different from <code>.deref() == obj</code>?","m.mentions":{},"msgtype":"m.text"},"ts":1719982438403,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$MN15Ef6PZMZBmwKRYINQTu2vYD4OOama-T_YXH3XPCE"},
{"content":{"body":"if not it doesn't seem necessary, unless I'm missing something","m.mentions":{},"msgtype":"m.text"},"ts":1719982462387,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$vxeCqVKRqbnvklHP7sPj6V2-wByW3hUox2q5MMB33ec"},
{"content":{"body":" * would that be different from `.deref() === obj`?","format":"org.matrix.custom.html","formatted_body":" * would that be different from <code>.deref() === obj</code>?","m.mentions":{},"m.new_content":{"body":"would that be different from `.deref() === obj`?","format":"org.matrix.custom.html","formatted_body":"would that be different from <code>.deref() === obj</code>?","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$MN15Ef6PZMZBmwKRYINQTu2vYD4OOama-T_YXH3XPCE","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1719982475718,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$NQ8tXnNsvsmsQeemNTPox0mVQhdxwr4iabxThltMIzc"},
{"content":{"body":"Would it still `AddToKeptObjects`?","format":"org.matrix.custom.html","formatted_body":"Would it still `AddToKeptObjects`?","msgtype":"m.text"},"ts":1719990465211,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$Xkxt5qArgpsvY0SPtPhmjDgysXmq23gJUgkAUbmwJv0"},
{"content":{"body":"I presume the idea is that it could skip that? But then I think that means this is possible:\n\n```\nref.is(obj); // true\nobj = null;\nref.deref(); // undefined, we observed sync GC\n```","format":"org.matrix.custom.html","formatted_body":"I presume the idea is that it could skip that? But then I think that means this is possible:<br /><br />```<br />ref.is(obj); // true<br />obj = null;<br />ref.deref(); // undefined, we observed sync GC<br />```","msgtype":"m.text"},"ts":1719992746426,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$7qlqxi8iEoE5MslcKUhjaDk_S6TUqNPaxGC8FsKP2Ew"}
]