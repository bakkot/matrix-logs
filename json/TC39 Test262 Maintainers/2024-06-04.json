[
{"content":{"body":"i agree that lots of them might stay there forever. but it's still \"temporary\" in intention","m.mentions":{},"msgtype":"m.text"},"ts":1717520109580,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$UCudUTu1qDKU-t3scwE5kTJqqJeLvm9Jcgq76jyZ9f8"},
{"content":{"body":"Sure, that works for me as well - as long as we don't commit ourselves as maintainers to do it","msgtype":"m.text"},"ts":1717525299327,"senderName":"ptomato","senderId":"@pchimento:igalia.com","id":"$H5e7nR1xH0cFK3u19TUlFH8Fuw0_L1EWPy9aj__50Yk"},
{"content":{"body":"I guess there's still a difference in intention though; what's been in staging so far has been coverage for pre-stage 4 stuff that needs to get migrated before stage 4.","msgtype":"m.text"},"ts":1717525377913,"senderName":"ptomato","senderId":"@pchimento:igalia.com","id":"$f06hUMM3lxsmi-7IIb5lPvli53lubqE5uf9fmBAAFk4"},
{"content":{"body":"i mean the goal isn't to have an implementer not have to have local tests - it's to upstream tests that others can benefit from. and anything that applies across implementations probably should be in the main suite, right","m.mentions":{},"msgtype":"m.text"},"ts":1717533784104,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$3ifXVLyi15WXlJruA_PCKOpf9UrY-b9Vw-cUg7jc2Ew"},
{"content":{"body":" * i mean the goal isn't to have an implementer not have to have local tests - it's to upstream tests that others can benefit from. and anything that applies across implementations probably should be in the main suite, right?","m.mentions":{},"m.new_content":{"body":"i mean the goal isn't to have an implementer not have to have local tests - it's to upstream tests that others can benefit from. and anything that applies across implementations probably should be in the main suite, right?","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$3ifXVLyi15WXlJruA_PCKOpf9UrY-b9Vw-cUg7jc2Ew","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1717533785643,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$eOSMlxAS5EW_3mE3WsSnmOugVowbW_NhwzfpiL32-fw"},
{"content":{"body":"> <@ljharb:matrix.org> i mean the goal isn't to have an implementer not have to have local tests - it's to upstream tests that others can benefit from. and anything that applies across implementations probably should be in the main suite, right?\n\ni'd say yes, only if we expand the notion of what kind of tests the main suite ought to contain","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!dGIsaFIukRWLdpurvh:matrix.org/$3ifXVLyi15WXlJruA_PCKOpf9UrY-b9Vw-cUg7jc2Ew?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>i mean the goal isn&#39;t to have an implementer not have to have local tests - it&#39;s to upstream tests that others can benefit from. and anything that applies across implementations probably should be in the main suite, right?</blockquote></mx-reply>i'd say yes, only if we expand the notion of what kind of tests the main suite ought to contain","m.mentions":{"user_ids":["@ljharb:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$3ifXVLyi15WXlJruA_PCKOpf9UrY-b9Vw-cUg7jc2Ew"}},"msgtype":"m.text"},"ts":1717534147117,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$JMqSnCneNCgZr7VIGwmGWlf3xSUjg_YhXmVlrIkZG7U"},
{"content":{"body":"what are some examples of tests that wouldn't currently fit?","m.mentions":{},"msgtype":"m.text"},"ts":1717534163308,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$2C5tpzteRkZ1ICr6NWinTwI7GXmA5ll-5klztcEZLqY"},
{"content":{"body":"currently the norm for a test262 test is that it tests a spec concept as isolated as possible, if preferable\n\nto contrast, there are a lot of tests that engine implementers write that're testing interactions between N features that's hard to tease apart","m.mentions":{},"msgtype":"m.text"},"ts":1717534246769,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$cVwD7FtS2SuQtz8_A3vIgKWzPRQXwEfUWklY-Pv0TBg"},
{"content":{"body":" * currently the norm for a test262 test is that it tests a spec concept as isolated as possible\n\nto contrast, there are a lot of tests that engine implementers write that're testing interactions between N features that's hard to tease apart","m.mentions":{},"m.new_content":{"body":"currently the norm for a test262 test is that it tests a spec concept as isolated as possible\n\nto contrast, there are a lot of tests that engine implementers write that're testing interactions between N features that's hard to tease apart","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$cVwD7FtS2SuQtz8_A3vIgKWzPRQXwEfUWklY-Pv0TBg","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1717534313582,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$s44Tq5Z81AJqDclS7ok4DYxUtp3DVJ7HEnreIebuKBs"},
{"content":{"body":"as a concrete example, engines do some form of conservative TDZ elision analysis in the parser","m.mentions":{},"msgtype":"m.text"},"ts":1717534346723,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$lxr1-N2MsscmkWio7X3fmWCwqi-VjQ_Ms5KEh4bsvJY"},
{"content":{"body":"if V8 writes a bunch of tests that covers its analysis, it seems helpful (or at least non-harmful outside of taking time) for other engines to run them too","m.mentions":{},"msgtype":"m.text"},"ts":1717534457665,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$a05RSSfkSfsgeuXVs26CO7MnygS22dSgaEhrpPASpQM"},
{"content":{"body":"from the spec's POV a lot of these tests are going to be redundant as they test the same spec steps over and over","m.mentions":{},"msgtype":"m.text"},"ts":1717534475055,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$iOD9fh0L0fNU6BmWNgZF1qF7ibnNvSeR4CyBC_JsOXA"},
{"content":{"body":"what would such a test look like in test262?","m.mentions":{},"msgtype":"m.text"},"ts":1717534476481,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$AFwCThGr1fRcTFKqzh-f5PfH3B3YsEKt05b-GOUKJLA"},
{"content":{"body":"you'd test that a certain program correctly throws / or not throw due to TDZ","m.mentions":{},"msgtype":"m.text"},"ts":1717534505735,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$4-S6_NsnDjGEoe9rXHJJON1XhULjUQ-FfexMmlvAoPs"},
{"content":{"body":"but there might be multiple tests that look like they're testing the exact same 5 steps of the spec that has to do with TDZ","m.mentions":{},"msgtype":"m.text"},"ts":1717534525893,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$2C8isg_R6wCgNeVMrDslTl7AkR3bPTQBE46yLToUKd0"},
{"content":{"body":"but might be testing how different productions get analyzed","m.mentions":{},"msgtype":"m.text"},"ts":1717534534454,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$4-matmaB0tTR507qdWpcJERwtlf6-Cwek4duYi0MS8s"},
{"content":{"body":"how would i organize those tests in test262?","m.mentions":{},"msgtype":"m.text"},"ts":1717534541796,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$sDuZVD8y3y9OgovD6_EcqP-T9KACfFPwdoVT3naZ620"},
{"content":{"body":"i would love to just be able to put those in the main suite, personally","m.mentions":{},"msgtype":"m.text"},"ts":1717534569842,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$RmmXD8G8jcR8qyacXulBQzGUqT_VloX2hnRGj9Hr3NQ"},
{"content":{"body":"but i also know i don't care nearly enough about how the suite is organized as others","m.mentions":{},"msgtype":"m.text"},"ts":1717534593742,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$pld5ML9Tgx7l38Munxi89lEuNLKgtGDDYTH9TFAhwFI"},
{"content":{"body":"put another way, if we broadly think of test262 tests as written so as to maximize spec step coverage, and engine tests as written so as to maximize engine code coverage, the latter often don't map cleanly onto the first. and if they don't, and the organization depends on this mapping, i think either we \n\n1. relax the organizational requirements of the main suite\n2. put them somewhere else so the main suite can retain its existing organizational structure","format":"org.matrix.custom.html","formatted_body":"<p>put another way, if we broadly think of test262 tests as written so as to maximize spec step coverage, and engine tests as written so as to maximize engine code coverage, the latter often don't map cleanly onto the first. and if they don't, and the organization depends on this mapping, i think either we</p>\n<ol>\n<li>relax the organizational requirements of the main suite</li>\n<li>put them somewhere else so the main suite can retain its existing organizational structure</li>\n</ol>\n","m.mentions":{},"msgtype":"m.text"},"ts":1717534794717,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$zQWJrhaqCVExq0okZn_ffa_Zd3_QeSW6z_HlIzI2Baw"},
{"content":{"body":" * put another way, if we broadly think of test262 tests as written so as to maximize spec step coverage, and engine tests as written so as to maximize engine code coverage, the latter often don't map cleanly onto the former. and if they don't, and the organization depends on this mapping, i think either we\n\n1. relax the organizational requirements of the main suite\n2. put them somewhere else so the main suite can retain its existing organizational structure","format":"org.matrix.custom.html","formatted_body":" * <p>put another way, if we broadly think of test262 tests as written so as to maximize spec step coverage, and engine tests as written so as to maximize engine code coverage, the latter often don't map cleanly onto the former. and if they don't, and the organization depends on this mapping, i think either we</p>\n<ol>\n<li>relax the organizational requirements of the main suite</li>\n<li>put them somewhere else so the main suite can retain its existing organizational structure</li>\n</ol>\n","m.mentions":{},"m.new_content":{"body":"put another way, if we broadly think of test262 tests as written so as to maximize spec step coverage, and engine tests as written so as to maximize engine code coverage, the latter often don't map cleanly onto the former. and if they don't, and the organization depends on this mapping, i think either we\n\n1. relax the organizational requirements of the main suite\n2. put them somewhere else so the main suite can retain its existing organizational structure","format":"org.matrix.custom.html","formatted_body":"<p>put another way, if we broadly think of test262 tests as written so as to maximize spec step coverage, and engine tests as written so as to maximize engine code coverage, the latter often don't map cleanly onto the former. and if they don't, and the organization depends on this mapping, i think either we</p>\n<ol>\n<li>relax the organizational requirements of the main suite</li>\n<li>put them somewhere else so the main suite can retain its existing organizational structure</li>\n</ol>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$zQWJrhaqCVExq0okZn_ffa_Zd3_QeSW6z_HlIzI2Baw","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1717534824595,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$wen_tYI6X2amh3h4bu1SRcnfwO49KoIqQvz00XI6i-M"},
{"content":{"body":"another concrete example: for resizable buffers, we wrote a lot of tests testing that the TA methods work on normal JS arrays with different kinds of contents (like, an array only containing doubles, or ints, since V8 has special optimizations for those)","m.mentions":{},"msgtype":"m.text"},"ts":1717534917233,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$25QrT-tLHyEAt3gTRkPTLs4HHBex2bou-5c2yQDkUkA"},
{"content":{"body":"i think those are also valuable for other engines to run","m.mentions":{},"msgtype":"m.text"},"ts":1717534921374,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$AxqbSQizOCUMew-VdhpHVd3RUNGNolAJgH7NLsd0QHY"},
{"content":{"body":"but the spec doesn't have a notion of a JS array containing only ints or doubles being anything special. it's just an array","m.mentions":{},"msgtype":"m.text"},"ts":1717534943372,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$ap-gIJTvEvCK-munMEB-RjsESLX1wi51dmnT6NZa2_Q"},
{"content":{"body":"so how should i organize that?","m.mentions":{},"msgtype":"m.text"},"ts":1717534949634,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$TXhpDEWgLN-IYrCdMnuxL7OoGK76t6jPEqym0HmcfYk"},
{"content":{"body":"i very much agree these kinds of tests are valuable for other engines to run","m.mentions":{},"msgtype":"m.text"},"ts":1717535148600,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$CleH7HU6VYqYGLu_LEabchEMETyAXStxfcv6sC1wWT4"},
{"content":{"body":"and thanks, that helps me see the ideological divide between test262 now, and a test262 that would contain these","m.mentions":{},"msgtype":"m.text"},"ts":1717535166434,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$JwaFGJE1bqKAZd57VIAagJzQqzDf0gdGsHtYSoyNH3A"},
{"content":{"body":"I think that would look like the directories in https://github.com/tc39/test262/tree/main/test/language/block-scope","m.mentions":{},"msgtype":"m.text"},"ts":1717535169153,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$7CSIfN5Vw3P7TC8tkN1j_QrdfJXFt2XaiFt5aeWZU8Q"},
{"content":{"body":"(as an ad-hoc improvement)","m.mentions":{},"msgtype":"m.text"},"ts":1717535189766,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$H-hKFTRKFUC2ez_GbGZLJPChUoX3_W9M7j1zuxVLfMY"},
{"content":{"body":"fwiw i think there is also tremendous value in the \"purity\" of the existing way test262  is organized","m.mentions":{},"msgtype":"m.text"},"ts":1717535665138,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$0RX3jzIuEZraDPxRN5mkV3qk2zCEqQ666SSYZStnim8"},
{"content":{"body":"for new entrants it's valuable to know that it's just testing spec coverage","m.mentions":{},"msgtype":"m.text"},"ts":1717535683415,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$YCc2XqUmKvlTSMzPxNkhKxsiKEo8C7fKRUv14tI-CTE"},
{"content":{"body":"> <@ljharb:matrix.org> i agree that lots of them might stay there forever. but it's still \"temporary\" in intention\n\nthis is the part that we are disagreeing on","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!dGIsaFIukRWLdpurvh%3Amatrix.org/%24UCudUTu1qDKU-t3scwE5kTJqqJeLvm9Jcgq76jyZ9f8\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>i agree that lots of them might stay there forever. but it's still \"temporary\" in intention</blockquote></mx-reply>this is the part that we are disagreeing on","m.relates_to":{"m.in_reply_to":{"event_id":"$UCudUTu1qDKU-t3scwE5kTJqqJeLvm9Jcgq76jyZ9f8"}},"msgtype":"m.text"},"ts":1717536073151,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$j1HP06QGjMCdTy81FQoSaIboB7RvZJFB70No8_yO2ew"},
{"content":{"body":"The intention. It seemed like the intention was the part that made dminor uncomfortable.","msgtype":"m.text"},"ts":1717536109765,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$MWswsN4GeT52LhrVFcc-Jr1FSMBDju1W9o3CB4-uXjg"},
{"content":{"body":"In particular I don’t want to return to the practice of “pruning” tests which are understood to be duplicates just because they refer to the same line of spec. This may reduce test coverage because it may hit different paths in implementations, and implementations sometimes repeat each other’s bugs, even for reasons that don’t correspond to a spec line","msgtype":"m.text"},"ts":1717536321895,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$pkGnsfoJHadKL4dLcIIEa2XlwTVN_HWbQBP3-93Va90"},
{"content":{"body":"So if staging must have this “temporary” idea attached to it, that sounds like a reason to use a differently-named directory which avoids this implication.","msgtype":"m.text"},"ts":1717536371924,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$WIG_fVJqkWMcjKNzF8vQ9UOIchg14XQLR_z9cYKV4V8"},
{"content":{"body":" * I think that would look like the directories in https://github.com/tc39/test262/tree/main/test/language/block-scope and https://github.com/tc39/test262/tree/main/test/language/statements/const and https://github.com/tc39/test262/tree/main/test/language/statements/let , which do have multiple files covering the same TDZ requirements","m.mentions":{},"m.new_content":{"body":"I think that would look like the directories in https://github.com/tc39/test262/tree/main/test/language/block-scope and https://github.com/tc39/test262/tree/main/test/language/statements/const and https://github.com/tc39/test262/tree/main/test/language/statements/let , which do have multiple files covering the same TDZ requirements","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$7CSIfN5Vw3P7TC8tkN1j_QrdfJXFt2XaiFt5aeWZU8Q","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1717536902159,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$ixJgrZWMEvoDoZ2dhXfldPdwqFfO89CiI_XUodD-eik"},
{"content":{"body":"if we do put them somewhere other than the main suite i'd like the two suites to be messaged as siblings","m.mentions":{},"msgtype":"m.text"},"ts":1717537796867,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$vYf49piEZTqakzczAr9XzZ_nDVK1RXhDmDzg_N4oCgU"}
]