[
{"content":{"body":"I'd rather have an inline explanation/justification for tests that seem redundant than a separate parallel suite","m.mentions":{},"msgtype":"m.text"},"ts":1717635263154,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$yCHE5JRLLhQwr4mfTnmG46maZmlbWaU4lfvcj6vwxl8"},
{"content":{"body":"that could work too, depending on the ratio/quantity of them","m.mentions":{},"msgtype":"m.text"},"ts":1717651175334,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$egfTBWNQwc3sqXaYID_9M21vV4bW67umSJalNdz2XDo"},
{"content":{"body":"> <@gibson042:matrix.org> I'd rather have an inline explanation/justification for tests that seem redundant than a separate parallel suite\n\nThis is the key issue: asking for all of these justifications leads to lower test coverage in practice.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!dGIsaFIukRWLdpurvh%3Amatrix.org/%24yCHE5JRLLhQwr4mfTnmG46maZmlbWaU4lfvcj6vwxl8\">In reply to</a> <a href=\"https://matrix.to/#/@gibson042:matrix.org\">@gibson042:matrix.org</a><br>I'd rather have an inline explanation/justification for tests that seem redundant than a separate parallel suite</blockquote></mx-reply>This is the key issue: asking for all of these justifications leads to lower test coverage in practice.","m.relates_to":{"m.in_reply_to":{"event_id":"$yCHE5JRLLhQwr4mfTnmG46maZmlbWaU4lfvcj6vwxl8"}},"msgtype":"m.text"},"ts":1717651183189,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$IrpDLf4hiBUQLsX6RII2Y7QNxF7g6GnCDg1MJSVjSCY"},
{"content":{"body":"And it will be less overhead to share the tests if we can do them in a separate directory within test262 as opposed to using a separate repo‚Äîusing a directory in the shared repo will lead to the tests being run in more cases","msgtype":"m.text"},"ts":1717651278886,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$zrzRDpTF47ABEpVonUgMRiO83xigTV7shcCpYhJkBdc"},
{"content":{"body":"> <@ljharb:matrix.org> that could work too, depending on the ratio/quantity of them\n\nWhat do you mean?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!dGIsaFIukRWLdpurvh%3Amatrix.org/%24egfTBWNQwc3sqXaYID_9M21vV4bW67umSJalNdz2XDo\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>that could work too, depending on the ratio/quantity of them</blockquote></mx-reply>What do you mean?","m.relates_to":{"m.in_reply_to":{"event_id":"$egfTBWNQwc3sqXaYID_9M21vV4bW67umSJalNdz2XDo"}},"msgtype":"m.text"},"ts":1717651284272,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$Eoi4ONBbeVkIDqOeJ6QChx1s1VdPR89q-ssT9HDu6xs"},
{"content":{"body":"like, if there's a lot, then it'd be worse to have inline comments to have a parallel suite","m.mentions":{},"msgtype":"m.text"},"ts":1717651309720,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$gM4aCqZUA0FIsLp5nJdBgv6mkF-z-UCZaSfcmuFEdK0"},
{"content":{"body":"inline exceptions only make sense when it applies to a minority of cases","m.mentions":{},"msgtype":"m.text"},"ts":1717651332718,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$d7183_5DqxP-LRl7WxdZsukcrwQ5paZaMm97pj9eoL4"},
{"content":{"body":"The question for us to answer is whether we oppose the proposal for various JS engines to implement two-way sync to share tests with literally no code review or documentation requirements. Bloomberg is funding Igalia to implement parts of this infrastructure, and Shu and dminor have expressed interest in making it part of their development processes.","msgtype":"m.text"},"ts":1717651405803,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$_HPSM8YjUlbXc1IDPDR_Xlq0oDdax_4PMyUrJoGVcKI"},
{"content":{"body":"> <@littledan:matrix.org> This is the key issue: asking for all of these justifications leads to lower test coverage in practice.\n\ncan you provide an example? Because I have already identified instances of that _not_ happening: https://matrix.to/#/!dGIsaFIukRWLdpurvh:matrix.org/$7CSIfN5Vw3P7TC8tkN1j_QrdfJXFt2XaiFt5aeWZU8Q?via=matrix.org&via=igalia.com&via=mozilla.org","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!dGIsaFIukRWLdpurvh:matrix.org/$IrpDLf4hiBUQLsX6RII2Y7QNxF7g6GnCDg1MJSVjSCY?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@littledan:matrix.org\">@littledan:matrix.org</a><br>This is the key issue: asking for all of these justifications leads to lower test coverage in practice.</blockquote></mx-reply>can you provide an example? Because I have already identified instances of that <em>not</em> happening: https://matrix.to/#/!dGIsaFIukRWLdpurvh:matrix.org/$7CSIfN5Vw3P7TC8tkN1j_QrdfJXFt2XaiFt5aeWZU8Q?via=matrix.org&amp;via=igalia.com&amp;via=mozilla.org","m.mentions":{"user_ids":["@littledan:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$IrpDLf4hiBUQLsX6RII2Y7QNxF7g6GnCDg1MJSVjSCY"}},"msgtype":"m.text"},"ts":1717654158668,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$DiqekXTrj0QQeerg2nd0K1AefkK8st-S4iDa-vuQxuc"},
{"content":{"body":"you've identified cases where people have been able to land tests that exercised the same line of spec, but this is different from showing that this other potential source of tests never increases coverage. (I'm not going to dig up an example right now.)","m.mentions":{},"msgtype":"m.text"},"ts":1717673648371,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$Ubh16qntivNMIuDxo6X3B_GVY7y4McfgcKmar5ri0Gw"},
{"content":{"body":"But I wonder why Mozilla has its non262 directory; presumably some of the tests there provide some value","msgtype":"m.text"},"ts":1717674348719,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$z7pVs02l2WtYCSnMt0784B93y8PLaYKr6T5_SSB0BS0"},
{"content":{"body":"üò±üçá","m.mentions":{},"msgtype":"m.text"},"ts":1717676303510,"senderName":"Ms2ger","senderId":"@ms2ger:igalia.com","id":"$XL0lKP2NDxRkV5pobNx5HQ5ik_q9M4Az4bkx6X8gbSg"},
{"content":{"body":"It's largely historical reasons, from what I can tell. My preference would be for us to write new tests in `staging`, but we still see value in keeping the older tests around, and sharing them with other implementations. I think there's around 4000 of them, so inline comments is a non-starter for me for this use case.","format":"org.matrix.custom.html","formatted_body":"It's largely historical reasons, from what I can tell. My preference would be for us to write new tests in <code>staging</code>, but we still see value in keeping the older tests around, and sharing them with other implementations. I think there's around 4000 of them, so inline comments is a non-starter for me for this use case.","m.mentions":{},"msgtype":"m.text"},"ts":1717676399835,"senderName":"dminor","senderId":"@dminor:mozilla.org","id":"$D63JOVTNd5OqDMbqb04GrCphBz-5E36F0zGYTp9pZJ4"},
{"content":{"body":"right I think there's value in sharing tests","m.mentions":{},"msgtype":"m.text"},"ts":1717677632543,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$urZkUU2f-tSWNRJTgD7ZR34MylMRkzBBWellRMoZ7WY"},
{"content":{"body":"likewise","m.mentions":{},"msgtype":"m.text"},"ts":1717680816284,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$w5haQgsBJROw4k6WxDbmklttv7nmYMuMcC76QqwW7qI"},
{"content":{"body":"so, how do you feel about having a parallel suite, to support that goal?","m.mentions":{},"msgtype":"m.text"},"ts":1717680922328,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$aB5qhKiXY6A4jP6XHPW3QUr66C2FVxItlP7814V3V4M"},
{"content":{"body":"opposed, with mild to moderate strength. As described above, I would rather satisfy that goal without a parallel suite (and to clarify, I consider inline explanation/justification for tests that seem redundant to be valuable but not necessary)","m.mentions":{},"msgtype":"m.text"},"ts":1717682564977,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$kuVjKxKzpD9B_i0EOGfu2Ac7D9TZxlsytGHohWp7xEE"},
{"content":{"body":"sorry, so how would you like to satisfy the goal?","m.mentions":{},"msgtype":"m.text"},"ts":1717687102616,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$xt-IidILsf6euUTgOXcsd0dPnFHCOsyOnWetED49NJ8"},
{"content":{"body":"by including tests that seem redundant inside the existing suite, ideally with inline explanation/justification for the apparent redundancy but not forcing that as a requirement (since we already have examples of this pattern without such explanations)","m.mentions":{},"msgtype":"m.text"},"ts":1717687247746,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$b6tmdmn6ZRrpYEQ5BC7dppisgVI3GMD2Xou5yItGaGY"},
{"content":{"body":"since we're exporting the tests by means of a script, I guess we could automatically add a comment indicating that these are historical (and potentially redundant) tests. but I'm not seeing the advantage of having these tests added to the main corpus as opposed to kept separate. could you expand on why you think this option is better?","m.mentions":{},"msgtype":"m.text"},"ts":1717687709423,"senderName":"dminor","senderId":"@dminor:mozilla.org","id":"$wbl3QQpyoOKw3JG00PwqdmwQFSS-CoPMxCoP5JzOXq8"}
]