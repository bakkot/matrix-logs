[
{"content":{"body":"For the \"names\" PR: I updated it with the changes that we discussed in the last \"Scopes\" meeting and now I'm waiting for reviews.","m.mentions":{},"msgtype":"m.text"},"ts":1728290386371,"senderName":"Simon ZÃ¼nd","senderId":"@szuend:matrix.org","id":"$PqvFEAnaN8raHRtZ3EOI_BnlDjJB6pPgGofohlZR-e0"},
{"content":{"body":"Perfect, ty!","m.mentions":{},"msgtype":"m.text"},"ts":1728290693166,"senderName":"jkup","senderId":"@jkup:matrix.org","id":"$w303Hr65sIKvrTDBxjl38ppJ1vm9KLyGXX6J2XfiX8g"},
{"content":{"body":"https://x.com/naugtur/status/1843235330406945272","msgtype":"m.text"},"ts":1728297379454,"senderName":"jkup","senderId":"@jkup:matrix.org","id":"$D6ZVjEDli02_kcGKpKWCE4lbO7WX-q7ytbm1EClrYas"},
{"content":{"body":"Is this about sourceMappingUrl not being allowed in multiline comments?","msgtype":"m.text"},"ts":1728297399715,"senderName":"jkup","senderId":"@jkup:matrix.org","id":"$iKPBhg6TvBSl-zdKV9hSBNHn7a3CJgi97Gb_AeFcmLM"},
{"content":{"body":"Curious which tool produces them ","format":"org.matrix.custom.html","formatted_body":"Curious which tool produces them","msgtype":"m.text"},"ts":1728297424125,"senderName":"jkup","senderId":"@jkup:matrix.org","id":"$7NLTZn62dljjKlWcy0QyolRDQG6eGMxMe7cA07cADQ0"},
{"content":{"body":"Just to be clear, multi line comments are `/* #sourceMappingUrl= */`? The spec never mentions these so they are implicitly disallowed anyway? I'm not opposed to calling it out explicitly though.","format":"org.matrix.custom.html","formatted_body":"Just to be clear, multi line comments are <code>/* #sourceMappingUrl= */</code>? The spec never mentions these so they are implicitly disallowed anyway? I'm not opposed to calling it out explicitly though.","m.mentions":{},"msgtype":"m.text"},"ts":1728297904383,"senderName":"Simon ZÃ¼nd","senderId":"@szuend:matrix.org","id":"$A45h1omWITWk4opAT1BVOBcdVxiJlPiU4OBnZ9dmAAk"},
{"content":{"body":"That was my guess. We don't mention either way right now, for some reason I thought Nic had some thoughts about what we can and can't say about the comment. I know we discussed last line of file which we decided *not* to specify, instead specifying the last occurence via https://github.com/tc39/source-map/blob/main/source-map.bs#L796","format":"org.matrix.custom.html","formatted_body":"That was my guess. We don't mention either way right now, for some reason I thought <a href=\"https://matrix.to/#/@nribaudo:igalia.com\">Nic</a> had some thoughts about what we can and can't say about the comment. I know we discussed last line of file which we decided <em>not</em> to specify, instead specifying the last occurence via https://github.com/tc39/source-map/blob/main/source-map.bs#L796","m.mentions":{"user_ids":["@nribaudo:igalia.com"]},"msgtype":"m.text"},"ts":1728298285394,"senderName":"jkup","senderId":"@jkup:matrix.org","id":"$Q9HL1rePb01PyQR-aHcyvre3l4EopOU4sQZF7lE9_BQ"},
{"content":{"body":"Multiline comments are indeed supported: https://tc39.es/source-map/#extraction-javascript","m.mentions":{},"msgtype":"m.text"},"ts":1728299976384,"senderName":"Nic","senderId":"@nribaudo:igalia.com","id":"$n2ukF_Ll4DIvWvOP_g6sxUrey7Wu2TMzPzSKnkWiPso"},
{"content":{"body":"But removing them seems very risky, we would need first to make sure no tool actually generates them","m.mentions":{},"msgtype":"m.text"},"ts":1728299993739,"senderName":"Nic","senderId":"@nribaudo:igalia.com","id":"$JbYfwhieSpE-_GalisuPRs40YPjBp7qX_majZnfWtxs"},
{"content":{"body":"I was thinking about replying to the post asking if they know which tool was generating them? I haven't seen the before","m.mentions":{},"msgtype":"m.text"},"ts":1728300016162,"senderName":"jkup","senderId":"@jkup:matrix.org","id":"$Djza2EbF4Zpk11ojwtqXybMVrfi_Qml4nUdPs5XJPZU"},
{"content":{"body":"From that tweet:\n\n> nested sourcemap multiline comments\n\nIf it's nested in a bundle, it's not a source map comment so the tool was _correctly_ removing it","format":"org.matrix.custom.html","formatted_body":"<p>From that tweet:</p>\n<blockquote>\n<p>nested sourcemap multiline comments</p>\n</blockquote>\n<p>If it's nested in a bundle, it's not a source map comment so the tool was <em>correctly</em> removing it</p>\n","m.mentions":{},"msgtype":"m.text"},"ts":1728300036504,"senderName":"Nic","senderId":"@nribaudo:igalia.com","id":"$yjQpDRKXRKf-jnBsAGu4Sk8039Xq0K-JN3G-3PZiEJQ"},
{"content":{"body":"i.e. in\n```js\nlet modules = {\n  0: () => {\n    console.log(\"hi from mod a\");\n    // #sourceMappingURL=./a.js.map\n  },\n  1: () => {\n    console.log(\"hi from mod b\");\n    /* #sourceMappingURL=./b.js.map */\n  }\n}\n```\n\nthere are no source map comments","format":"org.matrix.custom.html","formatted_body":"<p>i.e. in</p>\n<pre><code class=\"language-js\">let modules = {\n  0: () =&gt; {\n    console.log(\"hi from mod a\");\n    // #sourceMappingURL=./a.js.map\n  },\n  1: () =&gt; {\n    console.log(\"hi from mod b\");\n    /* #sourceMappingURL=./b.js.map */\n  }\n}\n</code></pre>\n<p>there are no source map comments</p>\n","m.mentions":{},"msgtype":"m.text"},"ts":1728300102136,"senderName":"Nic","senderId":"@nribaudo:igalia.com","id":"$KcKxwkmuELjAPHDO8tXLcCRk6waYY3UG1rKNu-sn2gk"},
{"content":{"body":"You are saying that bundlers should remove sourceMappingUrl comments from individual files as it bundles them together?","m.mentions":{},"msgtype":"m.text"},"ts":1728300167950,"senderName":"jkup","senderId":"@jkup:matrix.org","id":"$x_-JaBZ29slika33jn9wDXpRaVd85sD6Ig7uCLdK4ck"},
{"content":{"body":"They don't need to remove them, because \"adding some code after the comment\" already has the effect of making it not a source map comment","m.mentions":{},"msgtype":"m.text"},"ts":1728300277866,"senderName":"Nic","senderId":"@nribaudo:igalia.com","id":"$G2vVhE_HlfrBeBOjMpRd6Qauva8lXpiT6t8slM9Nvuk"},
{"content":{"body":"Bundlers removing them is equivalent to removing `/* hello! */`","format":"org.matrix.custom.html","formatted_body":"Bundlers removing them is equivalent to removing <code>/* hello! */</code>","m.mentions":{},"msgtype":"m.text"},"ts":1728300289435,"senderName":"Nic","senderId":"@nribaudo:igalia.com","id":"$Ef4ElP5caZGk9gIQ5N8rv80ixOsEupPUZybFZKN0p8c"},
{"content":{"body":"It's not wrong","m.mentions":{},"msgtype":"m.text"},"ts":1728300292465,"senderName":"Nic","senderId":"@nribaudo:igalia.com","id":"$nb9IAjwKlweOGZzmHDEAScWNH3XGkYXHo66LLv7lKx8"},
{"content":{"body":"It's just useless, other than to save code size","m.mentions":{},"msgtype":"m.text"},"ts":1728300299857,"senderName":"Nic","senderId":"@nribaudo:igalia.com","id":"$uSEThHghpNvmyZMYTjDLt4gxQPwQVdlopOpzqLuteTg"},
{"content":{"body":"Do you want me to reply to that tweet?","m.mentions":{},"msgtype":"m.text"},"ts":1728300359630,"senderName":"Nic","senderId":"@nribaudo:igalia.com","id":"$uM1l_hKKMLHcbioAetVt56ltIumCi24_-Msvm7MbWJ0"},
{"content":{"body":"Sorry yeah if you don't mind. I'm not following but also distracted in this community event.","m.mentions":{},"msgtype":"m.text"},"ts":1728300386299,"senderName":"jkup","senderId":"@jkup:matrix.org","id":"$QDovP3pF7263-6Nujn03g-_JHGY7olOxi8uovhRIDwc"},
{"content":{"body":"V8 does not support magic comments in multi line comments.","m.mentions":{},"msgtype":"m.text"},"ts":1728301121111,"senderName":"Simon ZÃ¼nd","senderId":"@szuend:matrix.org","id":"$Kyfp8XQy4MDTTJjBRkvqAmvtRavSQCy9xqOPb0yiSZA"},
{"content":{"body":"https://source.chromium.org/chromium/chromium/src/+/main:v8/src/parsing/scanner-inl.h;l=459-478;drc=e80189412946ddb08c948ff7a40c48273c69b23d","m.mentions":{},"msgtype":"m.text"},"ts":1728301157673,"senderName":"Simon ZÃ¼nd","senderId":"@szuend:matrix.org","id":"$Snc41c2dvz5wN_KTGowaOCr_CEFr7aQFQkJ9sdJ_Lo8"},
{"content":{"body":"Oh well, that's good to know and probably means that nobody relies on it :)","m.mentions":{},"msgtype":"m.text"},"ts":1728301239998,"senderName":"Nic","senderId":"@nribaudo:igalia.com","id":"$QY8cvODq6evD07ivjM-l2pYPOS5-JPFF-VlZ95IPdao"},
{"content":{"body":"I now remember that initially my PR only had `//`, and then _for some reason_ I updated the algorithm to include `/*`. I'd need to check in the meeting notes if we captured why","format":"org.matrix.custom.html","formatted_body":"I now remember that initially my PR only had <code>//</code>, and then <em>for some reason</em> I updated the algorithm to include <code>/*</code>. I'd need to check in the meeting notes if we captured why","m.mentions":{},"msgtype":"m.text"},"ts":1728301340549,"senderName":"Nic","senderId":"@nribaudo:igalia.com","id":"$ZY7F3Nr3Frv-X3oLjfk9-CUZb1bsoZJeDDc3S_oaFuU"},
{"content":{"body":"yeah i also cannot remember ","m.mentions":{},"msgtype":"m.text"},"ts":1728301487387,"senderName":"jkup","senderId":"@jkup:matrix.org","id":"$4f4GnMwy5CPw2ZlB8BC8VVkcZVjriICk-cW22AYsocA"},
{"content":{"body":"It seems like Firefox supports both: https://searchfox.org/mozilla-central/source/js/src/frontend/TokenStream.cpp#1961-1962","m.mentions":{},"msgtype":"m.text"},"ts":1728301583003,"senderName":"Nic","senderId":"@nribaudo:igalia.com","id":"$GlCXff1JSq5XcO567NdjDiS4KX2Idod_jg0Am1OcN8k"},
{"content":{"body":"Just wanted to post the same link","m.mentions":{},"msgtype":"m.text"},"ts":1728301602749,"senderName":"Simon ZÃ¼nd","senderId":"@szuend:matrix.org","id":"$d4KS-YCxBXLFpIg3du6_zLErHOOfBcR7WDNQVYyIixM"},
{"content":{"body":"But the comment says that the multiline form is `/* //# sourceMappingURL=... */` and not /*# sourceMappingURL=... */ ðŸ¤”","format":"org.matrix.custom.html","formatted_body":"But the comment says that the multiline form is <code>/* //# sourceMappingURL=... */</code> and not /*# sourceMappingURL=... */ ðŸ¤”","m.mentions":{},"msgtype":"m.text"},"ts":1728301616293,"senderName":"Nic","senderId":"@nribaudo:igalia.com","id":"$WIsYBxYDt7kuIyP6Yp7fAQe9v85ROEkuHNsF2hoNbmM"},
{"content":{"body":" * But the comment says that the multiline form is `/* //# sourceMappingURL=... */` and not `/*# sourceMappingURL=... */` ðŸ¤”","format":"org.matrix.custom.html","formatted_body":" * But the comment says that the multiline form is <code>/* //# sourceMappingURL=... */</code> and not <code>/*# sourceMappingURL=... */</code> ðŸ¤”","m.mentions":{},"m.new_content":{"body":"But the comment says that the multiline form is `/* //# sourceMappingURL=... */` and not `/*# sourceMappingURL=... */` ðŸ¤”","format":"org.matrix.custom.html","formatted_body":"But the comment says that the multiline form is <code>/* //# sourceMappingURL=... */</code> and not <code>/*# sourceMappingURL=... */</code> ðŸ¤”","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$WIsYBxYDt7kuIyP6Yp7fAQe9v85ROEkuHNsF2hoNbmM","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1728301631068,"senderName":"Nic","senderId":"@nribaudo:igalia.com","id":"$UNHqRx_DMLw7ZCAFFoESejWKZAAglMYIVtF225Bw1zQ"},
{"content":{"body":"You'd probably have to check the test cases or trace the scanner code to figure out exactly what it supports","m.mentions":{},"msgtype":"m.text"},"ts":1728301666973,"senderName":"Simon ZÃ¼nd","senderId":"@szuend:matrix.org","id":"$scp75akuxZQakI-AntpxJdldmh4BI-aC43dZdTmYYpg"},
{"content":{"body":"One more signal, I don't know of any bugs filed against DevTools where someone required support for `/* #sourceMappingURL=...*/`","format":"org.matrix.custom.html","formatted_body":"One more signal, I don't know of any bugs filed against DevTools where someone required support for <code>/* #sourceMappingURL=...*/</code>","m.mentions":{},"msgtype":"m.text"},"ts":1728301714405,"senderName":"Simon ZÃ¼nd","senderId":"@szuend:matrix.org","id":"$Kh3jz8obdy9Kg_H1lxgzYs7Zv0C0y3IQCu-iq2-vMU8"},
{"content":{"body":" * One more signal, I don't know of any bugs filed against Chrome DevTools where someone required support for `/* #sourceMappingURL=...*/`","format":"org.matrix.custom.html","formatted_body":" * One more signal, I don't know of any bugs filed against Chrome DevTools where someone required support for <code>/* #sourceMappingURL=...*/</code>","m.mentions":{},"m.new_content":{"body":"One more signal, I don't know of any bugs filed against Chrome DevTools where someone required support for `/* #sourceMappingURL=...*/`","format":"org.matrix.custom.html","formatted_body":"One more signal, I don't know of any bugs filed against Chrome DevTools where someone required support for <code>/* #sourceMappingURL=...*/</code>","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$Kh3jz8obdy9Kg_H1lxgzYs7Zv0C0y3IQCu-iq2-vMU8","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1728301730151,"senderName":"Simon ZÃ¼nd","senderId":"@szuend:matrix.org","id":"$ebG4vW4Z86Gcp-530dEYFxL56tGYu-HKehz8Aby2LvQ"},
{"content":{"body":"Firefox's scanner: https://searchfox.org/mozilla-central/source/js/src/frontend/TokenStream.cpp#3172\n\nIt seems like it parses `/*# sourceMappingURL=... */`","format":"org.matrix.custom.html","formatted_body":"<p>Firefox's scanner: https://searchfox.org/mozilla-central/source/js/src/frontend/TokenStream.cpp#3172</p>\n<p>It seems like it parses <code>/*# sourceMappingURL=... */</code></p>\n","m.mentions":{},"msgtype":"m.text"},"ts":1728301945184,"senderName":"Nic","senderId":"@nribaudo:igalia.com","id":"$hEF8YnaLuLtg5wZPjTmy3MSwAPAoJFWjsxA2FYGs6YI"},
{"content":{"body":"For many tools it's easier to support multine comments, because it means that you need just a single regexp for both CSS and JS","m.mentions":{},"msgtype":"m.text"},"ts":1728302048808,"senderName":"Nic","senderId":"@nribaudo:igalia.com","id":"$uKSTk288Moq-Awnjb7XTvy0nGBXUE_6ZU-2QkurayBg"},
{"content":{"body":"Babel supports both btw","m.mentions":{},"msgtype":"m.text"},"ts":1728302246179,"senderName":"Nic","senderId":"@nribaudo:igalia.com","id":"$9KOKJIjeeFm6wVfKxfU8onYD6lypoWKv5W1TGjdYTLo"},
{"content":{"body":" * Babel supports both btw, when looking for a pre-existing source map","m.mentions":{},"m.new_content":{"body":"Babel supports both btw, when looking for a pre-existing source map","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$9KOKJIjeeFm6wVfKxfU8onYD6lypoWKv5W1TGjdYTLo","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1728302258231,"senderName":"Nic","senderId":"@nribaudo:igalia.com","id":"$ftADlm5R5xC8ONO7HL81bMxKsz7Zs6zHsvcCZXTd0eY"},
{"content":{"body":"It seems like DuckDuckGo's build system uses multi-line comments, at least for `sourceURL`: https://github.com/duckduckgo/content-scope-scripts/blob/8da65a0fdf4fc9e61f38961a453975c238e32b53/scripts/utils/build.js#L102","format":"org.matrix.custom.html","formatted_body":"It seems like DuckDuckGo's build system uses multi-line comments, at least for <code>sourceURL</code>: https://github.com/duckduckgo/content-scope-scripts/blob/8da65a0fdf4fc9e61f38961a453975c238e32b53/scripts/utils/build.js#L102","m.mentions":{},"msgtype":"m.text"},"ts":1728302380304,"senderName":"Nic","senderId":"@nribaudo:igalia.com","id":"$_x6gIgLUsPrt-H5nRHlNRRm9r7ODwwnmi_wedCGJtvw"},
{"content":{"body":"Another one here: https://github.com/cobolab/jsfix/blob/bff0e763625a7901521036e9a17a58003f738010/build.js#L49","m.mentions":{},"msgtype":"m.text"},"ts":1728302507692,"senderName":"Nic","senderId":"@nribaudo:igalia.com","id":"$BSK5kTimbdXzmq5c6anAOUeqfoc5k18yIXYrBSNw5GE"},
{"content":{"body":"Their production site doesn't include the comments so I can't double check what DevTools is doing","m.mentions":{},"msgtype":"m.text"},"ts":1728302507795,"senderName":"Simon ZÃ¼nd","senderId":"@szuend:matrix.org","id":"$n9D_KnUtkkJS_JjVFW6W-R6ejFaKgcGpBnq6BJFvsxQ"},
{"content":{"body":"But it's difficult to find examples, because there is a lot of noise from CSS","m.mentions":{},"msgtype":"m.text"},"ts":1728302522640,"senderName":"Nic","senderId":"@nribaudo:igalia.com","id":"$9JwWdDaDsuCAk5V5aDG7___pjdCrklP5XD5bw5byeIw"},
{"content":{"body":"JSC also only supports single line comments: https://github.com/WebKit/WebKit/blob/main/Source/JavaScriptCore/parser/Lexer.cpp#L2560","m.mentions":{},"msgtype":"m.text"},"ts":1728303895227,"senderName":"Simon ZÃ¼nd","senderId":"@szuend:matrix.org","id":"$d_xwUX5OJpyQ3fsahi3uAOFJv6-wR3gSGZVdpGLBjpU"},
{"content":{"body":"TypeScript (this vscode?) also only supports single line: https://github.com/microsoft/TypeScript/blob/b845fd2434f255ba35b0bb143a65172c8985e467/src/compiler/sourcemap.ts#L365","m.mentions":{},"msgtype":"m.text"},"ts":1728304254355,"senderName":"Nic","senderId":"@nribaudo:igalia.com","id":"$dMwmjpuGJ3K7jVMOakdIro98dXfipcz7gHTeu5mZgM0"}
]