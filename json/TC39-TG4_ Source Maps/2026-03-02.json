[
{"content":{"body":"Trying to implement the consumer side tests now. What does a `generatedPositionFor()` return when the regular mapping was a range?\n```\nconst tracer = new TraceMap({\n  version: 3,\n  sources: ['input.js'],\n  sourceRoot: 'https://astexplorer.net/',\n  names: ['foo'],\n  mappings: 'AAAA', // (0, 0) -> (0, 0)\n  rangeMappings: 'B', // first mapping is range\n});\n\nconst pos = generatedPositionFor(traceMap, {\n  source: 'input.js',\n  line: 2,\n  column: 2,\n});\n// ^?\n```","format":"org.matrix.custom.html","formatted_body":"<p>Trying to implement the consumer side tests now. What does a <code>generatedPositionFor()</code> return when the regular mapping was a range?</p>\n<pre><code>const tracer = new TraceMap({\n  version: 3,\n  sources: ['input.js'],\n  sourceRoot: 'https://astexplorer.net/',\n  names: ['foo'],\n  mappings: 'AAAA', // (0, 0) -&gt; (0, 0)\n  rangeMappings: 'B', // first mapping is range\n});\n\nconst pos = generatedPositionFor(traceMap, {\n  source: 'input.js',\n  line: 2,\n  column: 2,\n});\n// ^?\n</code></pre>\n","m.mentions":{},"msgtype":"m.text"},"ts":1772436643046,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$ItJeaGsP4zqXi1jaqPM_4JXj5-caSmCAvU39OS2LE4k"},
{"content":{"body":"Do ranges cover original source code until the next mapping position in the original file?","m.mentions":{},"msgtype":"m.text"},"ts":1772436676855,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$4IAQYHsQMW09hYYvVWJk8yVwrl1XhqQKpiskoYpkbH8"},
{"content":{"body":"The ranges could be differently sized. Eg, `AAAA,BAee` only covers 0 lines/1 column in generated code, but 15 lines/15 columns in original code.","format":"org.matrix.custom.html","formatted_body":"The ranges could be differently sized. Eg, <code>AAAA,BAee</code> only covers 0 lines/1 column in generated code, but 15 lines/15 columns in original code.","m.mentions":{},"msgtype":"m.text"},"ts":1772438347715,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$j2cBYrBX3AT9ZqJztWa1zYPzlYkAJku5AMzNkTr6fPo"},
{"content":{"body":"This is even worse:\n```\nmappings: 'AAAA,BAee'\nrangeMappings: 'B'\n```\n","format":"org.matrix.custom.html","formatted_body":"<p>This is even worse:</p>\n<pre><code>mappings: 'AAAA,BAee'\nrangeMappings: 'B'\n</code></pre>\n","m.mentions":{},"msgtype":"m.text"},"ts":1772441252707,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$rP0mTuIDP1bCSrK9PAS6513tJYO4GYOnkLBilSU3wNw"},
{"content":{"body":"Doing `generatedPositionFor({ line: 1, column: 10 })` would return `{ line: 1, column: 10 }` offset from the range mapping, which is beyond the start of the `BAee` segement.","format":"org.matrix.custom.html","formatted_body":"Doing <code>generatedPositionFor({ line: 1, column: 10 })</code> would return <code>{ line: 1, column: 10 }</code> offset from the range mapping, which is beyond the start of the <code>BAee</code> segement.","m.mentions":{},"msgtype":"m.text"},"ts":1772441332580,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$lMHDhdi8aM2Aq6yF9dRqqvFTkImTrJHkHZ4NAd_RwiE"},
{"content":{"body":"We have to cap these so that only 1 column (in this case) of source code is reverse mapped.","m.mentions":{},"msgtype":"m.text"},"ts":1772441363188,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$dev_E4N53G8p1m40jj0rhM9DBX_1LFdy_Xdhk6CO0LI"}
]