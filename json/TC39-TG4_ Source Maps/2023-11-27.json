[
{"content":{"body":"Simon Zünd: I was trying to set up a test harness for the source maps tests, starting from testing the stack trace output of a simple error thrown. I was using \"puppeteer\" and before that \"chrome-remote-interface\", they're both clients for chrome devtools protocol, in both cases I was not able to get the original file names, it looks like the events I'm listening to are fired before the source maps are applied (e.g. Runtime.exceptionThrown)? Do you have some recommendation on what to use for the test harness, which events or maybe a completely different approach? Thanks! ","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@szuend:matrix.org\">Simon Zünd</a>: I was trying to set up a test harness for the source maps tests, starting from testing the stack trace output of a simple error thrown. I was using \"puppeteer\" and before that \"chrome-remote-interface\", they're both clients for chrome devtools protocol, in both cases I was not able to get the original file names, it looks like the events I'm listening to are fired before the source maps are applied (e.g. Runtime.exceptionThrown)? Do you have some recommendation on what to use for the test harness, which events or maybe a completely different approach? Thanks!","m.mentions":{"user_ids":["@szuend:matrix.org"]},"msgtype":"m.text"},"ts":1701096788132,"senderName":"abelkius","senderId":"@abelkius:matrix.org","id":"$xPqtHOommU8hyBg7e7b20KpCvo8e0TiQdBTPjw1h39g"},
{"content":{"body":"We don't apply source maps on the CDP level. At the most you get the \"sourceMappingUrl\" in the \"Debugger#scriptParsed\" event.","m.mentions":{},"msgtype":"m.text"},"ts":1701099023140,"senderName":"Simon Zünd","senderId":"@szuend:matrix.org","id":"$ZHP9LSjHGhD2nmVkgxXnmjqrlzVNryLgsWtgRgikch4"},
{"content":{"body":"Source mapping happens in the DevTools frontend itself.","m.mentions":{},"msgtype":"m.text"},"ts":1701099038297,"senderName":"Simon Zünd","senderId":"@szuend:matrix.org","id":"$a3P9HTfo5CfvB-JPm5golqX36NGU0lqOJKdZ7Us6PPE"},
{"content":{"body":"e.g. for the stack trace when the debugger pauses, we resolve the names using this function: https://source.chromium.org/chromium/chromium/src/+/main:third_party/devtools-frontend/src/front_end/models/source_map_scopes/NamesResolver.ts;l=707;drc=d618a37b054370dc425983d3044bef7694d8a0e5","m.mentions":{},"msgtype":"m.text"},"ts":1701099115357,"senderName":"Simon Zünd","senderId":"@szuend:matrix.org","id":"$EZf6dUbXc0n1Gj7ZGHdxzCHT5rfMC1Lzk3kfLM5ihak"},
{"content":{"body":"Thanks, in this case I think we would need to have tests that dev tools and other consumers would be able to run internally rather then hooking into the events from CDP. I'll still give it a think, if you have any suggestions or ideas feel free to share. ","m.mentions":{},"msgtype":"m.text"},"ts":1701099818165,"senderName":"abelkius","senderId":"@abelkius:matrix.org","id":"$jGYEB18_gUcCGkLSxTBe3SVSBeC9jeCYVPr3XNs1R74"}
]