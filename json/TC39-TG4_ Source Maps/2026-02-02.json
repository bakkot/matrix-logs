[
{"content":{"body":"Holger Benl: I'm taking a look at your branch there and I'm wondering what do you consider it mostly hack there. Is it because it is doing an additional pass on each original and another on generated AST to get scopes info, or is there anything else?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@holger_benl:matrix.org\">Holger Benl</a>: I'm taking a look at your branch there and I'm wondering what do you consider it mostly hack there. Is it because it is doing an additional pass on each original and another on generated AST to get scopes info, or is there anything else?","m.mentions":{"user_ids":["@holger_benl:matrix.org"]},"msgtype":"m.text"},"ts":1770052026015,"senderName":"Caio Lima","senderId":"@caiolima:igalia.com","id":"$prwFdQOg0aZu-tK9rwjyAu70Vgc6tD6uX6CLx3GTCDU"},
{"content":{"body":"* Holger Benl: I'm taking a look at your branch for scopes on Terser there and I'm wondering what do you consider it mostly hack there. Is it because it is doing an additional pass on each original and another on generated AST to get scopes info, or is there anything else?","format":"org.matrix.custom.html","formatted_body":"* <a href=\"https://matrix.to/#/@holger_benl:matrix.org\">Holger Benl</a>: I'm taking a look at your branch for scopes on Terser there and I'm wondering what do you consider it mostly hack there. Is it because it is doing an additional pass on each original and another on generated AST to get scopes info, or is there anything else?","m.mentions":{},"m.new_content":{"body":"Holger Benl: I'm taking a look at your branch for scopes on Terser there and I'm wondering what do you consider it mostly hack there. Is it because it is doing an additional pass on each original and another on generated AST to get scopes info, or is there anything else?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@holger_benl:matrix.org\">Holger Benl</a>: I'm taking a look at your branch for scopes on Terser there and I'm wondering what do you consider it mostly hack there. Is it because it is doing an additional pass on each original and another on generated AST to get scopes info, or is there anything else?","m.mentions":{"user_ids":["@holger_benl:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$prwFdQOg0aZu-tK9rwjyAu70Vgc6tD6uX6CLx3GTCDU","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1770052062491,"senderName":"Caio Lima","senderId":"@caiolima:igalia.com","id":"$n7wSxxVfkZed98Mn8zeN64AYR4XlZ1Fs9IId6krZL1U"},
{"content":{"body":"I'm wondering here if it's possible to embed original scopes while traversing for parsing and generated scopes when traversing for optimizing/printing, but I particularly like that it's a separated pass.","m.mentions":{},"msgtype":"m.text"},"ts":1770052171844,"senderName":"Caio Lima","senderId":"@caiolima:igalia.com","id":"$b6OxkJYyuea5IX_ejsq1Fk5zs_WAfIQLGicXPNYGN3w"},
{"content":{"body":"I called it a hack because my changes were very ad-hoc, I was just looking at a couple of simple examples and adding fixes to make them work, without really trying to fully understand how terser works and how to best fit this feature into its architecture. For many of these fixes (especially how the original locations attached to the AST nodes are handled while terser transforms the code) I am not sure if they're correct in all situations.","m.mentions":{},"msgtype":"m.text"},"ts":1770054114239,"senderName":"Holger Benl","senderId":"@holger_benl:matrix.org","id":"$8kKHAVgKyUG2rDVcKTF6vQGnOzAWZhaZY4tCb0VdxmQ"}
]