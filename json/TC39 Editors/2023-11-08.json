[
{"content":{"body":"Let me see if I've got this straight...","m.mentions":{},"msgtype":"m.text"},"ts":1699452042905,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$dNufsxkE7UkMjiLPoxPkhhtBnnoMunByTILCqcO21Xk"},
{"content":{"body":"Symbols can be put into 3 categories:","m.mentions":{},"msgtype":"m.text"},"ts":1699452090673,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$B89MVCn2wveL19fYROhiJXA4iyrDLITqi4ZgmuKvdO0"},
{"content":{"body":"- Well-known symbols","format":"org.matrix.custom.html","formatted_body":"<ul>\n<li>Well-known symbols</li>\n</ul>\n","m.mentions":{},"msgtype":"m.text"},"ts":1699452099294,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$NUZTQEZu1phlzaB61N5lzihhK6o-SjVF0ENqEBGI4Tc"},
{"content":{"body":"- Symbols created by the Symbol constructor","format":"org.matrix.custom.html","formatted_body":"<ul>\n<li>Symbols created by the Symbol constructor</li>\n</ul>\n","m.mentions":{},"msgtype":"m.text"},"ts":1699452209800,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$f6qbrVDNoK-7mj5P4qIiBuuGOqyFCg_wFeqtTA_pxx4"},
{"content":{"body":"- Symbols created by Symbol.for","format":"org.matrix.custom.html","formatted_body":"<ul>\n<li>Symbols created by Symbol.for</li>\n</ul>\n","m.mentions":{},"msgtype":"m.text"},"ts":1699452231419,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$8TM9qE9YBVQg6ATBMel3hU27vrtxNMUXhCn0FL9KGmc"},
{"content":{"body":"Symbols created by the Symbol constructor have language identity, the others don't. So Symbols created by Symbol() are suitable for use as a weak reference, and the others aren't, *except* that well-known symbols are.","format":"org.matrix.custom.html","formatted_body":"Symbols created by the Symbol constructor have language identity, the others don't. So Symbols created by Symbol() are suitable for use as a weak reference, and the others aren't, <em>except</em> that well-known symbols are.","m.mentions":{},"msgtype":"m.text"},"ts":1699452794866,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$3dqCK8gGAqerBOrtaUU50dP3HZf-gskQYSzBTAQSjho"},
{"content":{"body":"So in the one place that the spec uses the concept of 'language identity' (in the Note for CanBeHeldWeakly), it isn't even exactly the necessary concept.","m.mentions":{},"msgtype":"m.text"},"ts":1699452993948,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$PSAbNRg-jhsJwHRcea7Q8SKcvJONHLXOLi94s7xolGw"},
{"content":{"body":"(Actually, the 'Identity' section implies that well-known symbols *have* language identity, but I don't see how that could be. E.g., you can manifest @@match just by saying `Symbol.match`.)","format":"org.matrix.custom.html","formatted_body":"(Actually, the 'Identity' section implies that well-known symbols <em>have</em> language identity, but I don't see how that could be. E.g., you can manifest @@match just by saying <code>Symbol.match</code>.)","m.mentions":{},"msgtype":"m.text"},"ts":1699455631994,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$li3es4WJaAGIQk19SPkytBaSCqT05IB-IFcGsXDOZWQ"},
{"content":{"body":"so.... any thoughts on whether well-known symbols have language identity?","m.mentions":{},"msgtype":"m.text"},"ts":1699472528770,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$PGKjhVDCUcepVloHc0wEvMsp18UmhFmql-vvy8oBtJQ"},
{"content":{"body":"they do","m.mentions":{},"msgtype":"m.text"},"ts":1699472779540,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$Oj0kH9qaZ289sfjZJ7-8QmBLe8AGEfkiSpowAtVm56s"},
{"content":{"body":"kinda by fiat, i guess","m.mentions":{},"msgtype":"m.text"},"ts":1699472798171,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$ASpbexiuG3wRHc7XooRWXRi8St_9Yc3_qE0OEvkmQnA"},
{"content":{"body":"let me see if i can dig up any discussion","m.mentions":{},"msgtype":"m.text"},"ts":1699472805500,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$zWYJSUID1CTqPzfjpUkMYkm0sErvud7oaQtO5ZcZ0HM"},
{"content":{"body":"i cannot dig up discussion","m.mentions":{},"msgtype":"m.text"},"ts":1699472938985,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$A3miprEFCuZRTYIuGx3Po2lUoRHQX5tCpnULJWY9p2E"},
{"content":{"body":"So how to reconcile that with the ability to manifest them without prior reference?","m.mentions":{},"msgtype":"m.text"},"ts":1699472992872,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$EnFaDyWsM_KHwRjkKABCY90bQirP7x-LzF4zOJtTR0o"},
{"content":{"body":"i can only offer the practical GC difference, which is that well-known symbols are eternal roots and there is a bounded set of them. it doesn't matter much whether we say they have or have not language identity, there is no danger in holding them weakly because they will never be collected","m.mentions":{},"msgtype":"m.text"},"ts":1699473036008,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$BEnj7vUYBCsdlu6ZyvfLDPmVgpI-SRTjHQ_Zfq9ubhM"},
{"content":{"body":"it was decided it was easier to think of them as having identity, since that's the line we wanted to draw for CanBeHeldWeakly, and identity was the best-matched concept to explain the line to draw","m.mentions":{},"msgtype":"m.text"},"ts":1699473070659,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$v0MLPdg2stvYRrGYnnH63pQcXMeqNkWjiNXXNg5xgDg"},
{"content":{"body":"Symbol.for symbols are unbounded and users can generate new ones (the \"manifesting\")","m.mentions":{},"msgtype":"m.text"},"ts":1699473091329,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$8-nNf3vwe-dgpJISqQXWEqm_YVjKeR99W6GJFyGIIDo"},
{"content":{"body":"i don't think of \"manifesting\" as simply referencing","m.mentions":{},"msgtype":"m.text"},"ts":1699473099299,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$qQM4GgSa5D1MC3taqPnsNUl_eC6u30MyuIjNQEkZXlo"},
{"content":{"body":"i don't \"manifest\" the built-in Object by typing `Object`","format":"org.matrix.custom.html","formatted_body":"i don't \"manifest\" the built-in Object by typing <code>Object</code>","m.mentions":{},"msgtype":"m.text"},"ts":1699473107202,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$u9mdz5X1DDzXP-zKZBKzSbiOUjpwwiiv-s5mMBp7wVE"},
{"content":{"body":"Hm, spec doesn't define \"manifest\".","m.mentions":{},"msgtype":"m.text"},"ts":1699473154182,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$Fy1BgRzrP9uZs9usZqYga8xodZFgDm1EHVT9YWvksIw"},
{"content":{"body":"indeed it does not","m.mentions":{},"msgtype":"m.text"},"ts":1699473167825,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$Vazj_ISNXwbS3ljiNeYPY8JxVrOlpPr4eNevANyLklA"},
{"content":{"body":"i don't think we have it in us to define manifest either","m.mentions":{},"msgtype":"m.text"},"ts":1699473175139,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$28EVmVzt0t-lTVmjfG4uykpl_n7chzhZMrumxXr5SzA"},
{"content":{"body":"but it's something like \"causing things to be created that wasn't already there\"","m.mentions":{},"msgtype":"m.text"},"ts":1699473188868,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$pHvRbHNqEcC5Uz-4x-q0z-yjAhTsXcANpHdfHU8cPy0"},
{"content":{"body":"but that is like, a concrete way to think about it, not a spec way to think about it","m.mentions":{},"msgtype":"m.text"},"ts":1699473209147,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$in-b2bp0Qh1dWwlUTwTInZHOH2jB1ZJ0udbMOxCojIM"},
{"content":{"body":"the spec does not preclude a world where, for example, the set of all floating point Number values are already there, just floating around","m.mentions":{},"msgtype":"m.text"},"ts":1699473233427,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$tJAhx5VuTDbzIIEfkDX8E3HKFnWB1lyHMjHBQWt-kyM"},
{"content":{"body":"and that idea doesn't work with \"Values without identity may be manifest ...\"","m.mentions":{},"msgtype":"m.text"},"ts":1699473243963,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$xWIrN0XfIA5XtkQKFB2deVZbC_WvSD7F4GtbK4pcVhQ"},
{"content":{"body":"and each time you need one you just \"reference\" it instead of \"manifest\" it","m.mentions":{},"msgtype":"m.text"},"ts":1699473244769,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$_-GNNv01pg3GaID0v5G4XmsbKpQktLn0yPzFuxsy-Yg"},
{"content":{"body":"> and that idea doesn't work with \"Values without identity may be manifest ...\"\n\nhow so?","format":"org.matrix.custom.html","formatted_body":"<blockquote>\n<p>and that idea doesn't work with \"Values without identity may be manifest ...\"</p>\n</blockquote>\n<p>how so?</p>\n","m.mentions":{},"msgtype":"m.text"},"ts":1699473260040,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$tqi6CjwUXfDlr4puwxogKv-ovcPXpAsUp4YuefV9Kyc"},
{"content":{"body":"Well, like in your example, `3.2` doesn't cause a Number value to be 'created'.","format":"org.matrix.custom.html","formatted_body":"Well, like in your example, <code>3.2</code> doesn't cause a Number value to be 'created'.","m.mentions":{},"msgtype":"m.text"},"ts":1699473344310,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$7bK3SvSLdn0plPYQ9S4eqmbcw4bF922y7bSi3r4FhxU"},
{"content":{"body":"the point is that concretely, in the real world where JS is implemented, it does","m.mentions":{},"msgtype":"m.text"},"ts":1699473364300,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$WQyI0gk9dcX4LsrFyR2xTlnnBisIktxAdf9W-5YHhfk"},
{"content":{"body":"the parallel is stronger with strongs","m.mentions":{},"msgtype":"m.text"},"ts":1699473379742,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$PfSeZmv966NQ_8r4AGrdli3NNvxsyAt2HdYJ6nobFXM"},
{"content":{"body":"it is not possible, in a real implementation, to pre-create the infinite set of all possible string values","m.mentions":{},"msgtype":"m.text"},"ts":1699473390041,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$92q_rKq4Hw4vj0e3w1gkR2nnKwFLwxYcYWGcDP3pRHk"},
{"content":{"body":"the spec does not preclude such an implementation, though","m.mentions":{},"msgtype":"m.text"},"ts":1699473403602,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$LxkBshoGmcmrwcpB81cDR9xhGaCK84TaQ2ZGWBJT04c"},
{"content":{"body":" * the parallel is stronger with strings","m.mentions":{},"m.new_content":{"body":"the parallel is stronger with strings","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$PfSeZmv966NQ_8r4AGrdli3NNvxsyAt2HdYJ6nobFXM","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1699473416273,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$iYCr-IUrzghWYs4OkV2ifp8p18BQ2XxZKDzOM0H-TeI"},
{"content":{"body":"agree that \"causing things to be created that wasn't already there\" is an implementation way of thinking about \"manifest\".","m.mentions":{},"msgtype":"m.text"},"ts":1699473450756,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$6CaNE5mA1cwNIpkBZJJ1ADcI_2tVR4fc7PmrbEaJHmA"},
{"content":{"body":"(it is actually possible, if pointless, to do it for all 64bit floating point values at least)","m.mentions":{},"msgtype":"m.text"},"ts":1699473458272,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$7rkztMQNCuF2s3oPcb0us-4JCTJm5_lKVXqfxvT3TNQ"},
{"content":{"body":"but we work backwards -- we're not interested in defining an ontology per se","m.mentions":{},"msgtype":"m.text"},"ts":1699473482543,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$SdeYgZtTVRqFM43i9b7ziu_MVksAFCW1muS1VRD_toI"},
{"content":{"body":"we're interested in capturing some way, in the spec, to explain why Symbol.for symbols can't be weak keys","m.mentions":{},"msgtype":"m.text"},"ts":1699473506330,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$IHMxM4cHUBWq-rzB_8E99fyhflSsUXX7wEeinif8Pfs"},
{"content":{"body":"right, but it seems to me that bringing in the idea of \"language identity\" is maybe counter-productive","m.mentions":{},"msgtype":"m.text"},"ts":1699473550056,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$43UXmXVsb6YmbuZcLO96WAucRAeuHxxwV9P_Wy_3Ggo"},
{"content":{"body":"suggestions welcome, the last time we tried it it was... hard and contentious","m.mentions":{},"msgtype":"m.text"},"ts":1699473566391,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$8rFVPScQxJGMMCgXwVtt1E7s9Hp44FqK15vRjCFJx-w"},
{"content":{"body":"hm","m.mentions":{},"msgtype":"m.text"},"ts":1699473573336,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$G8FtYg1SueEEwit1Qqs9ewxu0KSCvGEKYZ5iOxyPdXA"},
{"content":{"body":"kevin and i felt \"identity\" was the right concept, and i continue to feel that way","m.mentions":{},"msgtype":"m.text"},"ts":1699473575644,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$-djyIot3BGkeE8apILe1-qPo1UEWY7Rw6EvW7_il0VA"},
{"content":{"body":"most programmers have some intuitive notion of \"identity\" that mostly matches up","m.mentions":{},"msgtype":"m.text"},"ts":1699473585294,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$rdhKUkyDVxN-Q7n6jtfk1yqi-7_0Hr-AbgbOtUkyx9s"},
{"content":{"body":"So you would say that \"language identity\" perfectly matches the semantics of CanBeHeldWeakly?","m.mentions":{},"msgtype":"m.text"},"ts":1699473651617,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$8N_jtrlznx_LyfbrWaxx9rO7KF9T8egx3BUpDJnC830"},
{"content":{"body":"i would, yes","m.mentions":{},"msgtype":"m.text"},"ts":1699473678212,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$iDFT8DXze10Sg_eIkmJtLglxgVLib5MjvhinST7Se14"},
{"content":{"body":"ok","m.mentions":{},"msgtype":"m.text"},"ts":1699473711723,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$Tz4u0Jh6_qHxZTe6u-DEHqv4KsKaaHnQ3cLSlkl-MLc"},
{"content":{"body":"(although we chose \"CanBeHeldWeakly\" instead of my [or someone's anyway] original \"HasIdentity\" specifically to avoid needing that to be true)","m.mentions":{},"msgtype":"m.text"},"ts":1699474911649,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$XsYX4BtEq65icBLn8L_XNI_B3gcY007el6UTnS5W0Sc"},
{"content":{"body":"I think I'd have difficulty justifying the statement \"Symbols produced by Symbol.for do not have language identity\" using only what the spec says about identity. (I note that the spec doesn't try to justify it.)","m.mentions":{},"msgtype":"m.text"},"ts":1699474985451,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$DQ8rQANtyACp4HzA5ojgXPGDr3sAIPnkmhr9bQYknxI"},
{"content":{"body":"Symbol.for symbols are very much an edge case, basically _the_ edge case","format":"org.matrix.custom.html","formatted_body":"Symbol.for symbols are very much an edge case, basically <em>the</em> edge case","m.mentions":{},"msgtype":"m.text"},"ts":1699475015463,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$DERAWbgSDe0q4kibdYGrSuZcD4kIdOhm_3KbReBMgxk"},
{"content":{"body":"yup","m.mentions":{},"msgtype":"m.text"},"ts":1699475045177,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$_4vBc-HD_5v-aSRNx5NmwS-hmpIva18iRV2XQxh6_ro"},
{"content":{"body":"it depends on whether you think of Symbol.for as being a registry which holds the symbols it has produced, or being a factory which produces indistinguishable values when given the same input","m.mentions":{},"msgtype":"m.text"},"ts":1699475046656,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$zfO_S3JXm5HFwGxAqInpcY-c5oaj_j0d_TJvSD2Lur4"},
{"content":{"body":"both are compatible with the observable behavior","m.mentions":{},"msgtype":"m.text"},"ts":1699475053753,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$7AWNvON25OXeK4T6K3pN8f3lQXI8Xk5BJybY5WNx_V8"},
{"content":{"body":"engines I think tend to take the latter perspective, which means they do not have identity because you can manifest the values without having had a handle to them","m.mentions":{},"msgtype":"m.text"},"ts":1699475074682,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$maQ0BQHRJnFim7smjSHNUrBDVPDoGzt5kisUciOVprw"}
]