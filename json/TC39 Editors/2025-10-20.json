[
{"content":{"body":"ljharb: can you say more about what's worse with trusted publishing than our current setup?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@ljharb:matrix.org\">ljharb</a>: can you say more about what's worse with trusted publishing than our current setup?","m.mentions":{"user_ids":["@ljharb:matrix.org"]},"msgtype":"m.text"},"ts":1760979357852,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$4leniO3RHAmkHBWqVpOpb3ukp-jGpPUKmsBkqtk9ILU"},
{"content":{"body":"possibly at editor call if that would be easier","m.mentions":{},"msgtype":"m.text"},"ts":1760979364350,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$qECCKA6bY5uOp2AQ27qc-GQeismpeJgOelgbpzt6sCc"},
{"content":{"body":"I’ll pop in and disclose, sure. either way tho it wouldn’t be any more secure, even if the flaw I’m referring to was addressed","msgtype":"m.text"},"ts":1760979524201,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$uK1nkAgYz_gMHOys8FU3bJsfV79Aszw1ujj6JSUY3HU"},
{"content":{"body":"... wouldn't it? right now compromise of the publish job would allow an attacker to exfiltrate the token, which gives persistent access to publishing until the token is revoked, and would allow publishing all packages controlled by the tc39 user. with trusted publishing, assuming we remove the secret, it only gives one-off access and only to the one package","m.mentions":{},"msgtype":"m.text"},"ts":1760981456037,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$5DxybWeb-mwdC_sMm9TMukeMPPXIbN5ASfwqKHMmgyc"},
{"content":{"body":"we can switch it to a granular token, so at least it’d be only that package. but even in a properly functioning oidc setup it’s single factor. so in that scenario we could set up an environment that requires a second approval, and then it’s actually two factor, making it safer. (but GitHub’s impl is broken)","msgtype":"m.text"},"ts":1760987103945,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$qDJW9eRdQUWcw3unI7FVUcbno6x-t1azdYCHRwakpX8"},
{"content":{"body":"nobody’s in the call, but tldr the flaw (via an exploited workflow) allows for permanent issuing of new tokens and there’s nothing package owners can do to stop it.","msgtype":"m.text"},"ts":1760987157708,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$tXqP1dPdaOKYS_Bt2BIah1GQIl1__usIxM-vWscOtMY"},
{"content":{"body":"call moved to 2pm, sorry","m.mentions":{},"msgtype":"m.text"},"ts":1760987172528,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$hyqvcn0vM8xnbJfgqhoMr5detdpSiPzDiaEGjGu76FA"},
{"content":{"body":"I agree that if there was a second factor in our current setup then that would be more secure than trusted publishing, but there isn't","m.mentions":{},"msgtype":"m.text"},"ts":1760987269875,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$SSEKZXslxVExjiX3qLC83B8t_PBJQEsFQT3-7kzOIo8"},
{"content":{"body":"so as it stands, from what I can tell, trusted publishing is more secure than our current setup","m.mentions":{},"msgtype":"m.text"},"ts":1760987294891,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$Xz3IHyKaizsw5LiruPuPLZfbPsZW4CA8NQcJwHwcup8"},
{"content":{"body":"except for this flaw you describe","m.mentions":{},"msgtype":"m.text"},"ts":1760987309132,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$ggvhD1y1ycoGloZhkfHX5dw0IrJVcGItLxNPMaeCr7U"},
{"content":{"body":"also I am not interested in setups where there's a second factor required to publish the biblio, I want it to be automated and run on every commit with no manual intervention","m.mentions":{},"msgtype":"m.text"},"ts":1760987384136,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$qpqr7dQ7V4rnryVSJvp7IwQyIJ70NeAjipn_KRy1P4A"}
]