[
{"content":{"body":"shu: https://github.com/tc39/ecma262/pull/2566","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@shuyuguo:matrix.org\">shu</a>: https://github.com/tc39/ecma262/pull/2566","msgtype":"m.text"},"ts":1635992703398,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$kReNohKcOposdAvhpwtOQHa9WE54fTlqDR4g48zmbFs"},
{"content":{"body":"will look today","msgtype":"m.text"},"ts":1636035713122,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$To7ycF-eIak8HAN5NiZbfLZVJn-Axr4wkRF24TFgeMw"},
{"content":{"body":"shu: re: https://github.com/tc39/ecma262/pull/2548, it looks like very nearly every `!`-prefixed call gets the user-code effect suppressed (possibly actually all of them?). maybe worth building that heuristic into ecmarkup?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@shuyuguo:matrix.org\">shu</a>: re: https://github.com/tc39/ecma262/pull/2548, it looks like very nearly every <code>!</code>-prefixed call gets the user-code effect suppressed (possibly actually all of them?). maybe worth building that heuristic into ecmarkup?","msgtype":"m.text"},"ts":1636054910583,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$ifGwKB91Ugc2iTl0ulFoFnhOzct0RP5Fp7LBh0kr5M8"},
{"content":{"body":"bakkot: almost all, yes. worth thinking about building it in. it puts the burden of vigilance on us (the PR reviewers) to remember to check if a `!` shouldn't be suppressed. otherwise it puts the burden on authors","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@bakkot:matrix.org\">bakkot</a>: almost all, yes. worth thinking about building it in. it puts the burden of vigilance on us (the PR reviewers) to remember to check if a <code>!</code> shouldn't be suppressed. otherwise it puts the burden on authors","msgtype":"m.text"},"ts":1636059423652,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$NCv-xL1uRLcxZ_aDf6DGtWdF9d1QcklkLzVnCd6p0Hk"},
{"content":{"body":"putting it on us is probably the right choice","msgtype":"m.text"},"ts":1636059434233,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$9xDk4tsy6DAqXWSUMfks_FMowzLNGGgKlJ-A_40MZW8"},
{"content":{"body":"bakkot: Michael Ficarra oh, for the \"*default*\" stuff, the point is that \"*default*\" is used only as a [[LocalName]] and not as an [[ExportName]] in ExportEntry Records, and therefore is not user visible?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@bakkot:matrix.org\">bakkot</a>: <a href=\"https://matrix.to/#/@michaelficarra:matrix.org\">Michael Ficarra</a> oh, for the &quot;<em>default</em>&quot; stuff, the point is that &quot;<em>default</em>&quot; is used only as a [[LocalName]] and not as an [[ExportName]] in ExportEntry Records, and therefore is not user visible?","msgtype":"m.text"},"ts":1636062046069,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$k-6qlYidXjgSyGTRmkYHRwg3lLcA67t4xjFEo8VtJ0g"},
{"content":{"body":"so if a module exports a value named `\"*default*\"`, that could be imported, since the magical [[ExportName]] name is `\"default\"`, which has always been user exposed?","format":"org.matrix.custom.html","formatted_body":"so if a module exports a value named <code>&quot;*default*&quot;</code>, that could be imported, since the magical [[ExportName]] name is <code>&quot;default&quot;</code>, which has always been user exposed?","msgtype":"m.text"},"ts":1636062414179,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$TfiKor5EjbJZEs5EbuhRoXB-_EoqQYVWaynDGy5bZ24"},
{"content":{"body":"yeah exactly","msgtype":"m.text"},"ts":1636063153612,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$5dYcd51-0QJJelwpWddQQeNr24qq1PABlmlmrQjIcag"},
{"content":{"body":"(It also gets into the [[BindingName]] of ResolvedBinding Records, but that's basically the same as the [[LocalName]] of ExportEntry Records)","msgtype":"m.text"},"ts":1636063310746,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$m1UhJq1DjIAB1EG8zPqZi5cG8esMRoEl73FmLs-E9gI"},
{"content":{"body":"right","msgtype":"m.text"},"ts":1636063410496,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$GHtU9Rouo7uUogozJ_KyHwGaYn_oMBNDP0lXFGX4JfU"},
{"content":{"body":"whereas `\"*\"` and `\"*namespace*\"` leak into [[BindingName]], which is the problem","format":"org.matrix.custom.html","formatted_body":"whereas <code>&quot;*&quot;</code> and <code>&quot;*namespace*&quot;</code> leak into [[BindingName]], which is the problem","msgtype":"m.text"},"ts":1636063429878,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$6HDHPhP95JCiHyJT9-2aGnLdMztEUkJPKmqIYh8_eUI"},
{"content":{"body":"into [[ImportName]], rather","msgtype":"m.text"},"ts":1636063453456,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$AxJ8cYyY1FEbmNtJy66sNrhoa8am2CU2SRLYnmRK4AM"},
{"content":{"body":"ah right, that's the usual case","msgtype":"m.text"},"ts":1636063566263,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$gya2BImjiMlt1cfGHVLyb2G-HidrwJ5KlgyNDjdpV_w"},
{"content":{"body":"the [[BindingName]] problem is for accessing via a namespace object","msgtype":"m.text"},"ts":1636063573167,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$7fjgHvyldcc4YT3xl5fadEWp8jcErqeh5XHfLzaHAKs"},
{"content":{"body":"ah, yes, right","msgtype":"m.text"},"ts":1636063719010,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$jRyiQHPEv2W-XHODWKOZs5K--Mus3bmwHLVQCiv_5ag"},
{"content":{"body":"actually I thinking further I'm not 100% sure `\"*namespace*\"` is actually a problem, hm","format":"org.matrix.custom.html","formatted_body":"actually I thinking further I'm not 100% sure <code>&quot;*namespace*&quot;</code> is actually a problem, hm","msgtype":"m.text"},"ts":1636063812697,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$P7qgmtJqCiDoVaGSBaDtHaI_ARmzEd-qwpw5ga2B_XA"},
{"content":{"body":"`\"*\"` definitely is though","format":"org.matrix.custom.html","formatted_body":"<code>&quot;*&quot;</code> definitely is though","msgtype":"m.text"},"ts":1636063885971,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$CkM2rVH0m3PsfcnaFWAZk5PYAzaWRUR0gCM3N09_zXY"},
{"content":{"body":"why isn't \"*namespace*\" a problem?","format":"org.matrix.custom.html","formatted_body":"why isn't &quot;<em>namespace</em>&quot; a problem?","msgtype":"m.text"},"ts":1636063908836,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$eZaUAuwLi6L8MllgxsaW_PEtZLZulymcU4hZcZtwJUk"},
{"content":{"body":"because the lookup that's happening in step 10 of 10.4.6.8 (module NS [[Get]]) is of the post-resolution name","msgtype":"m.text"},"ts":1636063963383,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$8JxQvHQPAx6MCLcpDlI0Qq7rOP1E5yYOHoeoztjJb_g"},
{"content":{"body":"which is strictly internal, same as `\"*default*\"`","format":"org.matrix.custom.html","formatted_body":"which is strictly internal, same as <code>&quot;*default*&quot;</code>","msgtype":"m.text"},"ts":1636063972123,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$pL8A6CRUIi6OQSuCwTEHGj0ofyNmzDMMeCR3HySk-us"},
{"content":{"body":"[[BindingName]] tells you where to find the binding of interest _within_ the module; it's not the externally-facing name","format":"org.matrix.custom.html","formatted_body":"[[BindingName]] tells you where to find the binding of interest <em>within</em> the module; it's not the externally-facing name","msgtype":"m.text"},"ts":1636064035842,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$SsiuaFciCiSaAkxFvc3Mb3Ng9ZskLQDBEsUSK5cDuqE"},
{"content":{"body":"exactly the same same as [[LocalName]] of ExportEntry Records","msgtype":"m.text"},"ts":1636064069620,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$K5lPb8zLJWUwEF5SplMf9YRVX0EfjXy2MdGUGb3VCEQ"},
{"content":{"body":"oh, and `export *` has no [[LocalName]]","format":"org.matrix.custom.html","formatted_body":"oh, and <code>export *</code> has no [[LocalName]]","msgtype":"m.text"},"ts":1636064096673,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$z3lTsyLTpc3CUa_b4nJsBx-kp1c3xHuwxmeJNmjur0A"},
{"content":{"body":"so if i did an `import \"*namespace*\"` it would not resolve to the actual NS object, since that has special handling","format":"org.matrix.custom.html","formatted_body":"so if i did an <code>import &quot;*namespace*&quot;</code> it would not resolve to the actual NS object, since that has special handling","msgtype":"m.text"},"ts":1636064112753,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$6BfU7lb70HI73Y4hpCmzR21aDpWGSMpFnTIbp-l-bMY"},
{"content":{"body":"okay, but also _because_ of the special handling everywhere for NS objects, it's certainly also correct and clearer if we just globally replaced it with `~namespace~`","format":"org.matrix.custom.html","formatted_body":"okay, but also <em>because</em> of the special handling everywhere for NS objects, it's certainly also correct and clearer if we just globally replaced it with <code>~namespace~</code>","msgtype":"m.text"},"ts":1636064162503,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$GS9S4OzysmZkq2P4X2Qu2qt2ZL3R8dALpHL0JSffScc"},
{"content":{"body":"`export * from 'mod'` has no [[LocalName]], right (none of the `export from` forms do)","format":"org.matrix.custom.html","formatted_body":"<code>export * from 'mod'</code> has no [[LocalName]], right (none of the <code>export from</code> forms do)","msgtype":"m.text"},"ts":1636064168401,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$5wHPz6R66iidiW8RmiRO5Uof3Bqy_WG5PHzoBf1eRsA"},
{"content":{"body":"(there is no `export *;`)","format":"org.matrix.custom.html","formatted_body":"(there is no <code>export *;</code>)","msgtype":"m.text"},"ts":1636064178884,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$uhBRHsx4kvYJ44lWHSDLllenYMm89BI_DgLB0B-PICQ"},
{"content":{"body":"yes, i meant with the `from` tail","format":"org.matrix.custom.html","formatted_body":"yes, i meant with the <code>from</code> tail","msgtype":"m.text"},"ts":1636064186094,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$22NsqKKh9tQkGHe73csyK5XwGSW9EBGL_VMDyeVnNJ0"},
{"content":{"body":"yeah, right","msgtype":"m.text"},"ts":1636064188365,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$rkYNlUdQz-QHxx34Z-rtdyTyGX07fjDA-P-0vt1wwIY"},
{"content":{"body":"> if i did an import `\"*namespace*\"` it would not resolve to the actual NS object\n\nright, though not because of specially handling `\"*namespace*\"`; rather, it's because that gets resolved with `ResolveExport(\"*namespace*\")`, which looks for an ExportEntry Record whose [[ExportName]] is `\"*namespace*\"`, which is not a thing we ever create (except of course with bradley's PR you could make one explicitly)","format":"org.matrix.custom.html","formatted_body":"<blockquote>\n<p>if i did an import <code>&quot;*namespace*&quot;</code> it would not resolve to the actual NS object</p>\n</blockquote>\n<p>right, though not because of specially handling <code>&quot;*namespace*&quot;</code>; rather, it's because that gets resolved with <code>ResolveExport(&quot;*namespace*&quot;)</code>, which looks for an ExportEntry Record whose [[ExportName]] is <code>&quot;*namespace*&quot;</code>, which is not a thing we ever create (except of course with bradley's PR you could make one explicitly)</p>\n","msgtype":"m.text"},"ts":1636065056103,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$8NYClzfcjo-Mz4mWsWhpjyde8hLVFgEvF1sSXT-cS74"},
{"content":{"body":"ah, yes, right","msgtype":"m.text"},"ts":1636065084801,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$Z8HDJaSe6QUFfjGqk8YvYYDMNW-4n-fQG3x6-C8NRBE"},
{"content":{"body":"anyways lgtm. further classification of the various meanings of `\"*\"` is a nice added bonus","format":"org.matrix.custom.html","formatted_body":"anyways lgtm. further classification of the various meanings of <code>&quot;*&quot;</code> is a nice added bonus","msgtype":"m.text"},"ts":1636065124124,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$TnwAZaPpcnWLj4_9uk-k64ec6nFQZpLkq2CpJ3adHVg"},
{"content":{"body":"if you did `export { f as \"*namespace*\" }`, then that would resolve to a ResolvedBinding Record whose [[BindingName]] is `f`, so again no problems there","format":"org.matrix.custom.html","formatted_body":"if you did <code>export { f as &quot;*namespace*&quot; }</code>, then that would resolve to a ResolvedBinding Record whose [[BindingName]] is <code>f</code>, so again no problems there","msgtype":"m.text"},"ts":1636065137384,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$HuxT9Hto5DKvHARSxe_nHY2Go6PCYfjSKrDT69PmwBw"}
]