[
{"content":{"body":"So from the ES spec's PoV, the JS -> wasm interface is some non-standard host-provided functions?","m.mentions":{},"msgtype":"m.text"},"ts":1722384039362,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$EWC4sI0u5XWMruw1AXK_JVjhpgaa5hMpMFUVtdX75bE"},
{"content":{"body":"yes, it is this spec: https://www.w3.org/TR/wasm-js-api-2/","m.mentions":{},"msgtype":"m.text"},"ts":1722384065270,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$nSu4I-6VuQWPuayzKLU6_Vy87QZMrp0sUGgwsULGowE"},
{"content":{"body":"how kosher it is idk, i didn't review it","m.mentions":{},"msgtype":"m.text"},"ts":1722384069652,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$h5Uunq93p4rbuawnX-C4tjD7_0rxZa6dLseUlBLbZek"},
{"content":{"body":"https://www.w3.org/TR/wasm-js-api-2/#run-a-host-function 's step 5 invokes ES's Call operation, that's how control shifts back to ES semantics?","m.mentions":{},"msgtype":"m.text"},"ts":1722384400175,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$Z1RkCsNwad__hvl02mIe-SWq38SsrP3IpgqXTFgExXk"},
{"content":{"body":"So Call invokes the (host) function's [[Call]], which is (say) 10.2.1, which invokes PrepareForOrdinaryCall, which is where the stack manipulation happens.","m.mentions":{},"msgtype":"m.text"},"ts":1722384758337,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$O-cZ8_zfjXYfmaNhwC-2h6d3PPOVg_d7cm7z7cH6EXg"},
{"content":{"body":"... hm, if I understand correctly, your questions are independent of what the host function *does*, you're just asking about what happens when the host function returns?","format":"org.matrix.custom.html","formatted_body":"... hm, if I understand correctly, your questions are independent of what the host function <em>does</em>, you're just asking about what happens when the host function returns?","m.mentions":{},"msgtype":"m.text"},"ts":1722385984936,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$coL40UhFyXjMtsFAUJlRbfYscTtGz1pKuY-Gv-euh2c"},
{"content":{"body":"\"my question is: the entry EC is suspended in the middle of wasm doing its own thing in step 2. when we resume, is it reasonable to say that we'll magically return to step 3 and then 2?\" Modulo some terminology, and assuming I'm not misunderstanding, yes, I think it's reasonable.","m.mentions":{},"msgtype":"m.text"},"ts":1722386541467,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$i8mntlEOfvd23CyUaoHbR4QtwY48Kb30QZ6VWyxCPck"}
]