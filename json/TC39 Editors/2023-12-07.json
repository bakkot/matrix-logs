[
{"content":{"body":"writing up the spec for base64 and I really want to use break/continue","m.mentions":{},"msgtype":"m.text"},"ts":1701972797920,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$lpVEFH8mWXfZadwePjSkSOZZVIEjBZsPR4bHJvSeXLg"},
{"content":{"body":"what if we defined those","m.mentions":{},"msgtype":"m.text"},"ts":1701972802442,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$2ZpLjl32ylVIjKRXoVCHhw8qV0rXcHt8kq23Zy7gmsk"},
{"content":{"body":"the alternative is \"repeat, while done is false\" and then a great deal of nesting","m.mentions":{},"msgtype":"m.text"},"ts":1701972837741,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$h3K8fRIHFyiu3wARQhq2veVZZJUNIoXcxJEbsXL0lv0"},
{"content":{"body":"we have early returns, so you could technically use that","m.mentions":{},"msgtype":"m.text"},"ts":1701973117654,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$Iy1dxL_od3PsdqITTI-AIANktj7RxdqPQ0-He1kRlfs"},
{"content":{"body":"also, that reminds me that I wanted to clarify that early returns do, in fact, skip steps that follow","m.mentions":{},"msgtype":"m.text"},"ts":1701973263933,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$2PuOqVr_u2UhmrGc6Rs3hEsNB0QAMOKK-L5hMrJNjps"},
{"content":{"body":"a separate AO with early returns seems nice","m.mentions":{},"msgtype":"m.text"},"ts":1701975102391,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$jhQTW-ekiwkQYhUkfJc6nabht7ZbyYrpi3uySGieZBc"},
{"content":{"body":"> <@michaelficarra:matrix.org> also, that reminds me that I wanted to clarify that early returns do, in fact, skip steps that follow\n\n… how would anyone assume otherwise?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!nSLHQtIRJQxUJbEuGt:matrix.org/$2PuOqVr_u2UhmrGc6Rs3hEsNB0QAMOKK-L5hMrJNjps?via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@michaelficarra:matrix.org\">@michaelficarra:matrix.org</a><br>also, that reminds me that I wanted to clarify that early returns do, in fact, skip steps that follow</blockquote></mx-reply>… how would anyone assume otherwise?","m.mentions":{"user_ids":["@michaelficarra:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$2PuOqVr_u2UhmrGc6Rs3hEsNB0QAMOKK-L5hMrJNjps"}},"msgtype":"m.text"},"ts":1701975112513,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$iMSzkYbMezgBFoTBmPMI3BYPkjuuGSJJebSWebcTZWw"},
{"content":{"body":"in some (older) programming languages, you could just set a return value at any point in the program (or multiple points) and continue execution","m.mentions":{},"msgtype":"m.text"},"ts":1701975319984,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$00GiLfPiXlvzDVK3kXii1457y5fh1cb-Ur60AQlmlNM"},
{"content":{"body":"there's no reason to believe that someone reading the spec steps should assume \"return\" also means \"and stop executing further steps\"","m.mentions":{},"msgtype":"m.text"},"ts":1701975379972,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$msOxfaGz7pHrrM9iIEA1cM8f3-tKouNN7vZh_w9LjVw"},
{"content":{"body":"it could reasonably be understood to mean \"set the return value to this\"","m.mentions":{},"msgtype":"m.text"},"ts":1701975396466,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$7BxFIuyEIeS3odcfmraU9UdCsCzLRt4AZc_Tdv47W9E"},
{"content":{"body":" * in some (older) programming languages, you could just set a return value at any point in the function (or multiple points) and continue execution","m.mentions":{},"m.new_content":{"body":"in some (older) programming languages, you could just set a return value at any point in the function (or multiple points) and continue execution","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$00GiLfPiXlvzDVK3kXii1457y5fh1cb-Ur60AQlmlNM","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1701975411996,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$zB8dIWbzA8QRp-d1VhUzmOqYXNA1ZXVs6kW_JhiZ6hc"},
{"content":{"body":"i think you're confusing setting the return value to a statement saying, control is returned","m.mentions":{},"msgtype":"m.text"},"ts":1701975419127,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$o2BZx0ROIDeEXTjF5DYdcLQMZ_XilmyzDCbr5D1sSII"},
{"content":{"body":"the older PLs separated the two, but i don't know of any PL that has something that says \"return\" but doesn't return control","m.mentions":{},"msgtype":"m.text"},"ts":1701975441772,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$uw6e4MoudAB4WhWW2QE_-L7bJuIvHIxOl40g84BW-SM"},
{"content":{"body":" * i think you're confusing setting the return value with a statement saying, control is returned","m.mentions":{},"m.new_content":{"body":"i think you're confusing setting the return value with a statement saying, control is returned","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$o2BZx0ROIDeEXTjF5DYdcLQMZ_XilmyzDCbr5D1sSII","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1701975475895,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$cBPWkOI-Dcvb6-EwX7TVH-D2WL31oZg-szrQ3HgIKNY"},
{"content":{"body":"restructuring flow to use early returns instead of break/continue can make it worse","m.mentions":{},"msgtype":"m.text"},"ts":1701975494045,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$oWIFQdwQf5qGdXpVhTTfOSJ1m5zIWOAS_alHfnxzyzA"},
{"content":{"body":"in this case there is a fair bit of state which would need to be passed into the continuation AO","m.mentions":{},"msgtype":"m.text"},"ts":1701975518061,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$botSPVGKy7iDsPvYp5AJp3pByZRW4Ig5x216U2meJCI"},
{"content":{"body":"also that doesn't work for continue unless we replace the whole loop with recursion, which would also be worse","m.mentions":{},"msgtype":"m.text"},"ts":1701975565636,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$anotqxM2KmYX7xKgxs8xzZhg25LcImcDe-b_lHELvGA"},
{"content":{"body":"> <@shuyuguo:matrix.org> the older PLs separated the two, but i don't know of any PL that has something that says \"return\" but doesn't return control\n\nthat's fair, I don't know of any that used the keyword \"return\" for this","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!nSLHQtIRJQxUJbEuGt:matrix.org/$uw6e4MoudAB4WhWW2QE_-L7bJuIvHIxOl40g84BW-SM?via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@shuyuguo:matrix.org\">@shuyuguo:matrix.org</a><br>the older PLs separated the two, but i don&#39;t know of any PL that has something that says &quot;return&quot; but doesn&#39;t return control</blockquote></mx-reply>that's fair, I don't know of any that used the keyword \"return\" for this","m.mentions":{"user_ids":["@shuyuguo:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$uw6e4MoudAB4WhWW2QE_-L7bJuIvHIxOl40g84BW-SM"}},"msgtype":"m.text"},"ts":1701975882912,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$HOdYODK3lzj3u4hXZN7hAUxNIukQXldRaQWqsleuR2E"},
{"content":{"body":"> <@bakkot:matrix.org> restructuring flow to use early returns instead of break/continue can make it worse\n\nyes I believe this, and was only somewhat serious in my suggestion","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!nSLHQtIRJQxUJbEuGt:matrix.org/$oWIFQdwQf5qGdXpVhTTfOSJ1m5zIWOAS_alHfnxzyzA?via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@bakkot:matrix.org\">@bakkot:matrix.org</a><br>restructuring flow to use early returns instead of break/continue can make it worse</blockquote></mx-reply>yes I believe this, and was only somewhat serious in my suggestion","m.mentions":{"user_ids":["@bakkot:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$oWIFQdwQf5qGdXpVhTTfOSJ1m5zIWOAS_alHfnxzyzA"}},"msgtype":"m.text"},"ts":1701975925845,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$1FKct-yo7Jz4OJJAOLn5sEXVKNfQ6tgg-YQx_odwLOw"},
{"content":{"body":"so, agreed we should add break/continue?","m.mentions":{},"msgtype":"m.text"},"ts":1701975950432,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$ljqsDPuYmVBg8dQ57ThEfVSbicGUb28pIfbyYoLDYqY"},
{"content":{"body":"no","m.mentions":{},"msgtype":"m.text"},"ts":1701975955058,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$2cCra94IcfOrmipkg6w6DXRQ1zQ8enslpAvppXMMXOw"},
{"content":{"body":"aww","m.mentions":{},"msgtype":"m.text"},"ts":1701975962619,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$CQTj0DG-GYUfgA2D5QU1TI8rGYKteMYXSPZrgZ4Dl8I"},
{"content":{"body":"what do you think about \"go to step `<emu-xref ...`\"","format":"org.matrix.custom.html","formatted_body":"what do you think about \"go to step <code>&lt;emu-xref ...</code>\"","m.mentions":{},"msgtype":"m.text"},"ts":1701975972087,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$JDcxa6elk6Lm7loVM4cwYSyI64xLXmtO2ME7cXFk9lI"},
{"content":{"body":"at least a couple other proposal authors have asked for it","m.mentions":{},"msgtype":"m.text"},"ts":1701975972817,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$GccnfCVjRos74TLndJ3Q4gOhWen-le0YOpUUYSh9JJg"},
{"content":{"body":"uhhhhhhhh","m.mentions":{},"msgtype":"m.text"},"ts":1701975985991,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$xONmLWZ9DS6qjUwiYPU0IrLHI0BQ4dltz4WpSuzaC_M"},
{"content":{"body":"you like it, don't you?","m.mentions":{},"msgtype":"m.text"},"ts":1701975999582,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$sAOHD5WQeOq_r1tZRie6XCfXsIzvbxkdCsi1OjzxVhw"},
{"content":{"body":"not sure goto is better than break/continue but I guess if we carefully don't abuse it it would be ok?","m.mentions":{},"msgtype":"m.text"},"ts":1701976016323,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$KNYsO0ZcFZHw4iwpRpYVvotBFNVOTZO29MQzG7IktrE"},
{"content":{"body":"I think I prefer it","m.mentions":{},"msgtype":"m.text"},"ts":1701976060340,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$KRGNwxsdQBObX1kDHKedq8Ktqyq0KpS6dJW0wBBtu1o"},
{"content":{"body":"I think that most proposal authors / readers would be more comfortable with break/continue than goto","m.mentions":{},"msgtype":"m.text"},"ts":1701976100279,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$TZK2UByApfI45vh_CkIgbl6ha84IHuKXH50IojrloOM"},
{"content":{"body":"so can you say more about why you would prefer it?","m.mentions":{},"msgtype":"m.text"},"ts":1701976108960,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$bU76eWnAQ8qPmgSP3knCe2c3fYRu_Bls0jwNjCnc3Ho"},
{"content":{"body":"it's dead simple for a reader","m.mentions":{},"msgtype":"m.text"},"ts":1701976189678,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$_pYBZ7wkrPHSvbLZ6zW9J3uc_jy2pms_1dwn-g4Kjmw"},
{"content":{"body":"so is break/continue, as long as the reader is at all technical","m.mentions":{},"msgtype":"m.text"},"ts":1701976208459,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$IkuuQkrdYx4ZFKLIbjo7ao8m-vF_HEJ81nfzaNBR1EI"},
{"content":{"body":"no chance to like incorrectly match it up with the containing repetition or go to the wrong instruction","m.mentions":{},"msgtype":"m.text"},"ts":1701976215733,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$pK7vvjT8Ajo4nqrwYy7MIV_lMPK6y_y1NJf0m70QSB0"},
{"content":{"body":"also, \"go to step X\" is familiar for *any* reader","format":"org.matrix.custom.html","formatted_body":"also, \"go to step X\" is familiar for <em>any</em> reader","m.mentions":{},"msgtype":"m.text"},"ts":1701976300448,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$UeFXYMQ89ws0cATvboBE_pqs3igQ5G-qBl8w4dLR8so"},
{"content":{"body":"yeah but many possible uses are incoherent so when you read it you need to convince yourself it's coherent","m.mentions":{},"msgtype":"m.text"},"ts":1701976332681,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$DOfzKcr1-lLcS6Sw9Wi2oxvjSHyYra_8k17bg75fH0U"},
{"content":{"body":"and the only uses I would want to allow are break/continue","m.mentions":{},"msgtype":"m.text"},"ts":1701976342378,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$HXfJCwuqgp8iOiUbKL3Hq6vcpfrgUru_RA1V26smyJE"},
{"content":{"body":"so for technical readers, you'd have to manually translate it to break/continue","m.mentions":{},"msgtype":"m.text"},"ts":1701976352673,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$d9h4aTGKGpsOWad2BnxsjQY601AFRkigbos5yXNEt-s"},
{"content":{"body":"which is dumb","m.mentions":{},"msgtype":"m.text"},"ts":1701976353972,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$mkRnuq1pVQpldLpbjNk-0WyZTZEIhOVGOR4oI-dtncM"},
{"content":{"body":"we should just write the thing we mean","m.mentions":{},"msgtype":"m.text"},"ts":1701976357867,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$9I3T-IuYbUUqRN7S_OFMAgqKk9oU34l8BwRFGlFUI0s"},
{"content":{"body":"anyway I would be ok with goto instead, it just seems dumb","m.mentions":{},"msgtype":"m.text"},"ts":1701977079222,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$tNjup4HvcR-Z4nM7-s0mwn08OfvWLsFKk3f98P3l4rE"},
{"content":{"body":"would like to hear from shu I guess","format":"org.matrix.custom.html","formatted_body":"would like to hear from <a href=\"https://matrix.to/#/@shuyuguo:matrix.org\">shu</a> I guess","m.mentions":{"user_ids":["@shuyuguo:matrix.org"]},"msgtype":"m.text"},"ts":1701977085019,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$vdqVxNGmVDn5pUAbFPGafUmRVtRcoHLeZOi0xOYKuC0"},
{"content":{"body":"with the AO and state passing, would a Record cover that?","m.mentions":{},"msgtype":"m.text"},"ts":1701977434328,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$GD7E5Jujcmh4U31LsznqfyH5K227YLsRyQEsKTOE2vE"},
{"content":{"body":"you still have to construct and pass said record, and record fields are more annoying than local variables, so no, not really","m.mentions":{},"msgtype":"m.text"},"ts":1701977772573,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$30VeENmYV7Tvh6Vj5inWCbNU-mwfr02p43SFNDswYBA"}
]