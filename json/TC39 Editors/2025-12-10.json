[
{"content":{"body":"bakkot: i think you can log in as tc39-user on npm? if so, it’d be great if you could make a new granular token for that one package that lasts 90 days, and update it in the spec repo secrets ","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@bakkot:matrix.org\">bakkot</a>: i think you can log in as tc39-user on npm? if so, it’d be great if you could make a new granular token for that one package that lasts 90 days, and update it in the spec repo secrets","msgtype":"m.text"},"ts":1765350842602,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$OC-M9X8gRyERjPKF8U8vW_HCsco5uCZYdYyOug7TZjk"},
{"content":{"body":"ljharb: I would prefer to merge https://github.com/tc39/ecma262/pull/3706 instead, unless there's a reason not to. You've said it has security issues, which would be a good reason, but I'd like to understand what those are before rejecting that approach.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@ljharb:matrix.org\">ljharb</a>: I would prefer to merge https://github.com/tc39/ecma262/pull/3706 instead, unless there's a reason not to. You've said it has security issues, which would be a good reason, but I'd like to understand what those are before rejecting that approach.","m.mentions":{"user_ids":["@ljharb:matrix.org"]},"msgtype":"m.text"},"ts":1765379636620,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$fAlRMB2mgNzhvFrcADegXMntit1Y8pbvPeYydqdMKJI"},
{"content":{"body":"OIDC tokens can be exfiltrated, allowing an attacker to mint new publish tokens forever and there's no way for maintainers to mitigate it","m.mentions":{},"msgtype":"m.text"},"ts":1765384053866,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$nSSUphxUvERh7vSBoL0xCjMyhZ-NQvS3bTfpGKa2w84"},
{"content":{"body":"when github fixes that, then it'll no longer be worse than a 1FA token","m.mentions":{},"msgtype":"m.text"},"ts":1765384070199,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$E_TXDuTACbwYy8IW6o3f9_Qeb9A7wWiIlkq1nGntqGk"},
{"content":{"body":"OIDC tokens are normally pretty short-lived. Are the OIDC tokens really eternal? That definitely does seem bad","m.mentions":{},"msgtype":"m.text"},"ts":1765385167598,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$3OFuwS1EjWcXgIWWEqEvxl_zEOoTL3qVQsZfQDchDtc"},
{"content":{"body":"* OIDC tokens are normally pretty short-lived. Are the OIDC tokens in trusted publishing really eternal? That definitely does seem bad","m.mentions":{},"m.new_content":{"body":"OIDC tokens are normally pretty short-lived. Are the OIDC tokens in trusted publishing really eternal? That definitely does seem bad","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$3OFuwS1EjWcXgIWWEqEvxl_zEOoTL3qVQsZfQDchDtc","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1765385173996,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$-BE250ufZX-IfS6twE1JYWTcrOYuJqQ585IkAUzVWjU"},
{"content":{"body":"docs definitely claim it is short-lived https://docs.github.com/en/actions/concepts/security/openid-connect#adding-permissions-settings","m.mentions":{},"msgtype":"m.text"},"ts":1765385398189,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$GEPMvqZYGekQJ_QDd7JFVTR7KYje09rCwip_A3rAhXk"},
{"content":{"body":"someone else claims 5 minutes https://github.com/google-github-actions/auth?tab=readme-ov-file#inputs-workload-identity-federation","m.mentions":{},"msgtype":"m.text"},"ts":1765385416832,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$gI5IJ7xTu52f6OTHhxwX1E5TG1GlEGjLIHFoBKSlBRQ"},
{"content":{"body":"do you have a specific reason to think that the ODIC token lives forever? I could go to the effort of exfiltrating one and confirm I guess","m.mentions":{},"msgtype":"m.text"},"ts":1765385464879,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$sZ3_ig2bpL3psCVhIKjicCTOqoQupqQ7SND4pb-1n-Y"},
{"content":{"body":"their sample token in the docs also lives for 5 minutes so that number seems plausible","m.mentions":{},"msgtype":"m.text"},"ts":1765385536698,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$iu61LPQmkegeD6JemOQv70mTKlprHVCKhgAjh_W_Bu8"},
{"content":{"body":"i'm not talking about the short-lived npm publish token that oidc generates","m.mentions":{},"msgtype":"m.text"},"ts":1765386241845,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$sh3lQA4UyROBCQOClMMLgtn8m0zBcsX1riEMSVCTYSA"},
{"content":{"body":"i'm talking about the oidc credentials THEMSELVES that let you mint infinite short-lived tokens","m.mentions":{},"msgtype":"m.text"},"ts":1765386252001,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$Daidtk7hb-qkI7_eMEEMB8dv9k_VJEfz-qYrvLlGLj0"},
{"content":{"body":"(that github shouldn't be exposing to the actions workflow, which is the flaw)","m.mentions":{},"msgtype":"m.text"},"ts":1765386308347,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$oUbLseENnRBEbrnfYu_XIvkAFbt_Q1Z6alb4i9uvRas"},
{"content":{"body":"this isn't just me, to be clear, this is why the public position of OpenJS is that nobody should use OIDC yet","m.mentions":{},"msgtype":"m.text"},"ts":1765386336028,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$bvlND0NIYNivMOZnQqaY_QBZgYEzmOW1PjAnbxYZdwQ"},
{"content":{"body":"Is there more about that written somewhere? The only guidance from openjs I can find is talking more about lack of 2fa and manual setup https://openjsf.org/blog/publishing-securely-on-npm","m.mentions":{},"msgtype":"m.text"},"ts":1765387215154,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$pedAD4hICYPlpK-FP9zSV5l9rU1AfzrkNNpqKnCDNaA"},
{"content":{"body":"no, the discoverer hasn't published a blog post yet","m.mentions":{},"msgtype":"m.text"},"ts":1765387462124,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$3wNa5EVhS3iNVY4El1p9mrXPHetr2-SMC-pYGCcUHGA"},
{"content":{"body":"I think we should go with whatever publicly available guidance we have from trusted sources","m.mentions":{},"msgtype":"m.text"},"ts":1765390954413,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$QvUsAKw9lP_xY9GlOdn7dOmPWaSRVzOXM8veWZhp3G0"},
{"content":{"body":"if we're really concerned, can't we do something like this temporarily? https://github.com/step-security/wait-for-secrets#publish-to-npm-registry-using-one-time-password-otp","m.mentions":{},"msgtype":"m.text"},"ts":1765390983788,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$FfbNORPsFgXjcxllaPH9jthR27B01LNR98YgJ6oTWBg"},
{"content":{"body":"that would be on every single commit though","m.mentions":{},"msgtype":"m.text"},"ts":1765391044350,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$m3Kh-jSXxrDaBGYwawTD4mNFKzn-1XrrBnpshbmWwfA"}
]