[
{"content":{"body":"it seems weird to me that SetTypedArrayFromArrayLike allows targetOffset to be a non-neg int, or ∞, but then it throws a RangeError if it's ∞ in step 11. why not throw that sooner, or disallow it entirely?","msgtype":"m.text"},"ts":1689201286280,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$384eIePwwkpWDYy4jxOXRFyY9AcHfbWh4qEmWaLsGb8"},
{"content":{"body":"i'd guess because that's just how it was copy/pasted during refactoring","msgtype":"m.text"},"ts":1689205244436,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$sLp6mFXiTPVqGpX0XRXR2dBTgFf5I9QuYaQYCPr0VAo"},
{"content":{"body":"i can see an argument for helper AOs having tighter, already-checked types","msgtype":"m.text"},"ts":1689205262014,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$9VU8fwyZ_gDmeO6zGmZI_5hKUv26aS65p8jr-2_QIAQ"},
{"content":{"body":"file an issue?","msgtype":"m.text"},"ts":1689205301539,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$ofckcS9x_KTfPUCHL8OsxVKLE64ct724DiLgRvXbBgo"},
{"content":{"body":"`%TypedArray%.prototype.set` has `Let _targetOffset_ be ? ToIntegerOrInfinity(...)`, so SetTypedArrayFromTypedArray and SetTypedArrayFromArrayLike have to accept infinity for that param. Both of them end up throwing a RangeError on infinity, BUT only if they haven't thrown for some other reason before then. So it's tempting to throw on infinity way up in `%TypedArray%.prototype.set`, but that would be a change in behaviour for some (pathological) cases.","format":"org.matrix.custom.html","formatted_body":"<code>%TypedArray%.prototype.set</code> has <code>Let _targetOffset_ be ? ToIntegerOrInfinity(...)</code>, so SetTypedArrayFromTypedArray and SetTypedArrayFromArrayLike have to accept infinity for that param. Both of them end up throwing a RangeError on infinity, BUT only if they haven't thrown for some other reason before then. So it's tempting to throw on infinity way up in <code>%TypedArray%.prototype.set</code>, but that would be a change in behaviour for some (pathological) cases.","msgtype":"m.text"},"ts":1689205868934,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$moxdNZkWsPQb0mxC7CxEJULVg-dMV5iPQHxj31ex-As"}
]