[
{"content":{"body":"In the post-2547 spec, is implicit unwrapping (conversion from normal completion to non-completion value) not supposed to happen?","msgtype":"m.text","org.matrix.msc1767.text":"In the post-2547 spec, is implicit unwrapping (conversion from normal completion to non-completion value) not supposed to happen?"},"ts":1646719360802,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$VHPJwzLIMKWRDKft2hAMVW6qpEiwtPgmWawCEfgrZC0"},
{"content":{"body":"indeed not","msgtype":"m.text","org.matrix.msc1767.text":"indeed not"},"ts":1646720394697,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$CINw1ARNirIvwKxphpDT6j38Wuce5AVea5V3egr0QmI"},
{"content":{"body":"that was the title of the pr, even","msgtype":"m.text","org.matrix.msc1767.text":"that was the title of the pr, even"},"ts":1646722289452,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$KKb8i1we4vCVK9kC3_Wqgw2d8HxcQK8VwxdRWwZXhVE"},
{"content":{"body":"If you invoke an op that returns a Completion Record, and you don't mark it with `!`, `?`, or `Completion()`, is that an editorial error? Seems like that was one of the points of 2547, but I don't see it in the spec.","format":"org.matrix.custom.html","formatted_body":"If you invoke an op that returns a Completion Record, and you don't mark it with <code>!</code>, <code>?</code>, or <code>Completion()</code>, is that an editorial error? Seems like that was one of the points of 2547, but I don't see it in the spec.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"If you invoke an op that returns a Completion Record, and you don't mark it with `!`, `?`, or `Completion()`, is that an editorial error? Seems like that was one of the points of 2547, but I don't see it in the spec.","mimetype":"text/plain"},{"body":"If you invoke an op that returns a Completion Record, and you don't mark it with <code>!</code>, <code>?</code>, or <code>Completion()</code>, is that an editorial error? Seems like that was one of the points of 2547, but I don't see it in the spec.","mimetype":"text/html"}]},"ts":1646756863692,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$EYib6U0r3j6jkr0UF--F92veuRA96uzotAGr6b9C9PE"},
{"content":{"body":"Yes, but yeah it's not written down because it's still coherent to omit `Completion`","format":"org.matrix.custom.html","formatted_body":"Yes, but yeah it's not written down because it's still coherent to omit <code>Completion</code>","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Yes, but yeah it's not written down because it's still coherent to omit `Completion`","mimetype":"text/plain"},{"body":"Yes, but yeah it's not written down because it's still coherent to omit <code>Completion</code>","mimetype":"text/html"}]},"ts":1646757347042,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$ujuHzvCpji3PkpgtyHZ0DorXTRix67FtHGA8GjZ18gw"},
{"content":{"body":"ecmarkup enforces it for things other than internal/concrete methods","msgtype":"m.text","org.matrix.msc1767.text":"ecmarkup enforces it for things other than internal/concrete methods"},"ts":1646757357447,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$myVFlJcJ8b_dQYlDxgtMfyHUB69Q9Hn9Vidsr2eR17s"},
{"content":{"body":"and Evaluation","msgtype":"m.text","org.matrix.msc1767.text":"and Evaluation"},"ts":1646757388979,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$RyqWxQPS6sQVJNTX6TVvB2-oLkZH2sr8xPnL7YZ9uwY"},
{"content":{"body":"ah, yes, also that","msgtype":"m.text","org.matrix.msc1767.text":"ah, yes, also that"},"ts":1646757400608,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$NORRbXC89KYaAkkvB3xXCriKC_KhTobRM2bffm47G54"},
{"content":{"body":"since it has its own invocation form","msgtype":"m.text","org.matrix.msc1767.text":"since it has its own invocation form"},"ts":1646757406979,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$XiLPy6X78hO9AVGf0ixLpMa6naft8bukFgpHLCDDN5s"},
{"content":{"body":"Is there a desire/intent to give Evaluation a conventional invocation form?","msgtype":"m.text","org.matrix.msc1767.text":"Is there a desire/intent to give Evaluation a conventional invocation form?"},"ts":1646763345612,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$GP9mn475w1IjN58znJg09MxBg870Nd_GAyoPV3fAPy4"},
{"content":{"body":"Michael Ficarra wants that, I do not","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@michaelficarra:matrix.org\">Michael Ficarra</a> wants that, I do not","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Michael Ficarra wants that, I do not","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@michaelficarra:matrix.org\">Michael Ficarra</a> wants that, I do not","mimetype":"text/html"}]},"ts":1646764971331,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$0cSfQzz08pMvgzy1z5e9y5hQMZmQxqNT3mdFI4MQNIc"},
{"content":{"body":"what would that form look like?","msgtype":"m.text","org.matrix.msc1767.text":"what would that form look like?"},"ts":1646765530859,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$wybdIeBwDXUuzC7cIfT5p-tu1fMtJQJ4KPgyVFi1JPg"},
{"content":{"body":"e.g. `Let _ref_ be Evaluation of |Expression|.`","format":"org.matrix.custom.html","formatted_body":"e.g. <code>Let _ref_ be Evaluation of |Expression|.</code>","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"e.g. `Let _ref_ be Evaluation of |Expression|.`","mimetype":"text/plain"},{"body":"e.g. <code>Let _ref_ be Evaluation of |Expression|.</code>","mimetype":"text/html"}]},"ts":1646765578954,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$rnZavhTQUpkxGd0BSjGQHwdpGIlhO5jNuyMT88R5kp0"},
{"content":{"body":"regular SDO-invocation syntax","msgtype":"m.text","org.matrix.msc1767.text":"regular SDO-invocation syntax"},"ts":1646765595035,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$49ZjMPWpTENtvPrhmzcxHBNzxYasZo6TCezfEUWWqi8"},
{"content":{"body":"(you could use a different name for the op, but `Evaluation` appears to be what it's currently called.)","format":"org.matrix.custom.html","formatted_body":"(you could use a different name for the op, but <code>Evaluation</code> appears to be what it's currently called.)","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"(you could use a different name for the op, but `Evaluation` appears to be what it's currently called.)","mimetype":"text/plain"},{"body":"(you could use a different name for the op, but <code>Evaluation</code> appears to be what it's currently called.)","mimetype":"text/html"}]},"ts":1646765642177,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$8_moDdCKHieB5__SglwNtaRNo1CxaUjJ-oTGeerzOhY"},
{"content":{"body":" * (you could use a different name for the op, but `Evaluation` appears to be what it's currently called.)","format":"org.matrix.custom.html","formatted_body":" * (you could use a different name for the op, but <code>Evaluation</code> appears to be what it's currently called.)","m.new_content":{"body":"(you could use a different name for the op, but `Evaluation` appears to be what it's currently called.)","format":"org.matrix.custom.html","formatted_body":"(you could use a different name for the op, but <code>Evaluation</code> appears to be what it's currently called.)","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"(you could use a different name for the op, but `Evaluation` appears to be what it's currently called.)","mimetype":"text/plain"},{"body":"(you could use a different name for the op, but <code>Evaluation</code> appears to be what it's currently called.)","mimetype":"text/html"}]},"m.relates_to":{"event_id":"$8_moDdCKHieB5__SglwNtaRNo1CxaUjJ-oTGeerzOhY","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":" * (you could use a different name for the op, but `Evaluation` appears to be what it's currently called.)","mimetype":"text/plain"},{"body":" * (you could use a different name for the op, but <code>Evaluation</code> appears to be what it's currently called.)","mimetype":"text/html"}]},"ts":1646765675466,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$wvs1v9Sa8AhrmnAzA72283SBN8VbTFfwCgZLfdSU1K4"},
{"content":{"body":"pretty neutral","msgtype":"m.text","org.matrix.msc1767.text":"pretty neutral"},"ts":1646765853373,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$xgb0LF8X55DqNHTROgG3tpjAwoLpbgmNP0JzJcNBwv4"},
{"content":{"body":"i don't hate it","msgtype":"m.text","org.matrix.msc1767.text":"i don't hate it"},"ts":1646765854781,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$qwTW8kCaI2kVc-01CHo_2GXpy5Xnot9mU8kBkBSOnsw"},
{"content":{"body":"Okay, I was just curious.","msgtype":"m.text","org.matrix.msc1767.text":"Okay, I was just curious."},"ts":1646766205868,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$rHpBPtecWuEDxXnAVA_MJa6Rk0g8hEKlp2WGoUgP6bY"},
{"content":{"body":"The non-tangent is that I've found a class of editorial errors/bugs of the form:","msgtype":"m.text","org.matrix.msc1767.text":"The non-tangent is that I've found a class of editorial errors/bugs of the form:"},"ts":1646766228183,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$pPDuSsxfzyHhpGpUVvcv6wm9sASu9anQxB1u4SyN4dQ"},
{"content":{"body":"```\n  1. Let _CR_ be the result of evaluation |Something|.\n  1. Let _notCR_ be ? GetValue(_CR_).\n  1. something involving _CR_ that assumes it isn't a Completion Record.\n```","format":"org.matrix.custom.html","formatted_body":"<pre><code>  1. Let _CR_ be the result of evaluation |Something|.\n  1. Let _notCR_ be ? GetValue(_CR_).\n  1. something involving _CR_ that assumes it isn't a Completion Record.\n</code></pre>\n","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"```\n  1. Let _CR_ be the result of evaluation |Something|.\n  1. Let _notCR_ be ? GetValue(_CR_).\n  1. something involving _CR_ that assumes it isn't a Completion Record.\n```","mimetype":"text/plain"},{"body":"<pre><code>  1. Let _CR_ be the result of evaluation |Something|.\n  1. Let _notCR_ be ? GetValue(_CR_).\n  1. something involving _CR_ that assumes it isn't a Completion Record.\n</code></pre>\n","mimetype":"text/html"}]},"ts":1646766258247,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$yXGT7lHi8ChSrjb_NcYPHZZAY2fNRD0Iki4k_RWsYSU"},
{"content":{"body":"E.g. https://tc39.es/ecma262/#sec-function-calls-runtime-semantics-evaluation","msgtype":"m.text","org.matrix.msc1767.text":"E.g. https://tc39.es/ecma262/#sec-function-calls-runtime-semantics-evaluation"},"ts":1646766365911,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$v4jkKUF67jam3NvPYeQMwZtulXA2B1yHijkHS8Fc9TQ"},
{"content":{"body":"steps 4, 5, 6, 9","msgtype":"m.text","org.matrix.msc1767.text":"steps 4, 5, 6, 9"},"ts":1646766378823,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$asC1d5mdXrwVI0c7Co1rW72wNDctg-mHSJPvjC1gb0U"},
{"content":{"body":"Steps 6 and 9 are handling `_ref_` as if it's been implicitly unwrapped.","format":"org.matrix.custom.html","formatted_body":"Steps 6 and 9 are handling <code>_ref_</code> as if it's been implicitly unwrapped.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Steps 6 and 9 are handling `_ref_` as if it's been implicitly unwrapped.","mimetype":"text/plain"},{"body":"Steps 6 and 9 are handling <code>_ref_</code> as if it's been implicitly unwrapped.","mimetype":"text/html"}]},"ts":1646766427975,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$HUKdRxmVRkejI9uYCgwBuF-54d7p7qzcGun9Ue6Q5Jg"},
{"content":{"body":"I think putting a `?` before \"the result of evaluating\" would avoid the error and preserve semantics (because of what `? GetValue(_CR_)` does).","format":"org.matrix.custom.html","formatted_body":"I think putting a <code>?</code> before &quot;the result of evaluating&quot; would avoid the error and preserve semantics (because of what <code>? GetValue(_CR_)</code> does).","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"I think putting a `?` before \"the result of evaluating\" would avoid the error and preserve semantics (because of what `? GetValue(_CR_)` does).","mimetype":"text/plain"},{"body":"I think putting a <code>?</code> before &quot;the result of evaluating&quot; would avoid the error and preserve semantics (because of what <code>? GetValue(_CR_)</code> does).","mimetype":"text/html"}]},"ts":1646766928186,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$d38x3nSdmgpH4Sbra8PjlmBrL43qm4sMVMPLPdqYzhI"},
{"content":{"body":"However, you can't just put `?` before *every* occurrence of \"the result of evaluating\", because they aren't all immediately followed by `? GetValue()`.","format":"org.matrix.custom.html","formatted_body":"However, you can't just put <code>?</code> before <em>every</em> occurrence of &quot;the result of evaluating&quot;, because they aren't all immediately followed by <code>? GetValue()</code>.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"However, you can't just put `?` before *every* occurrence of \"the result of evaluating\", because they aren't all immediately followed by `? GetValue()`.","mimetype":"text/plain"},{"body":"However, you can't just put <code>?</code> before <em>every</em> occurrence of &quot;the result of evaluating&quot;, because they aren't all immediately followed by <code>? GetValue()</code>.","mimetype":"text/html"}]},"ts":1646766983427,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$5T0QQHSewYpEsyuBmMBjxosDIvcdvxVFOoyk3e_UDsQ"},
{"content":{"body":"offhand I think that for-of is the only place that does evaluation and does not immediately propagate errors","msgtype":"m.text","org.matrix.msc1767.text":"offhand I think that for-of is the only place that does evaluation and does not immediately propagate errors"},"ts":1646767132158,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$M9LenjA_TupWOMxQf5VHtAd13hCK35bwarwzVgKoA54"},
{"content":{"body":"No, there are some others","msgtype":"m.text","org.matrix.msc1767.text":"No, there are some others"},"ts":1646767157868,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$f8u3u1MqO1fPWNuyhnVtMNjhufYqoqro6il3MuOAwJU"},
{"content":{"body":"E.g., in evaluation of a Block, you have to reset the the running execution context's LexicalEnvironment before returning the result of evaluating |StatementList|.","msgtype":"m.text","org.matrix.msc1767.text":"E.g., in evaluation of a Block, you have to reset the the running execution context's LexicalEnvironment before returning the result of evaluating |StatementList|."},"ts":1646767299040,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$Zof6JYdQF5Z4osjhdtEHXVvWzkOB1IxsV2-Isi6Jfkk"},
{"content":{"body":"oh, yeah","msgtype":"m.text","org.matrix.msc1767.text":"oh, yeah"},"ts":1646767339128,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$UMufKysAKpCVJFy1RLs0s9Y124JV5WOvkxK3B-j0V54"},
{"content":{"body":"So I'm planning to submit a PR, not sure what it'll be yet.","msgtype":"m.text","org.matrix.msc1767.text":"So I'm planning to submit a PR, not sure what it'll be yet."},"ts":1646767601402,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$GkX8nD2Zjq0B8NjM_Mh3yXjug0f-_bWpG4o4PKK8QOY"},
{"content":{"body":"but before i get much farther: any objection to putting `?` before \"the result of evaluating\"?","format":"org.matrix.custom.html","formatted_body":"but before i get much farther: any objection to putting <code>?</code> before &quot;the result of evaluating&quot;?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"but before i get much farther: any objection to putting `?` before \"the result of evaluating\"?","mimetype":"text/plain"},{"body":"but before i get much farther: any objection to putting <code>?</code> before &quot;the result of evaluating&quot;?","mimetype":"text/html"}]},"ts":1646767688449,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$J3OrAM_Tmi9JJNbh_pEaEvc0B3abbBL_RDr42wVYwxg"},
{"content":{"body":"(It doesn't currently occur)","msgtype":"m.text","org.matrix.msc1767.text":"(It doesn't currently occur)"},"ts":1646767739040,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$WKMKJmYZvpHPvCiSl-xfRF-_4zIkKgLmNmMlzEG6ZgA"},
{"content":{"body":"(Other places we don't immediately propagate abrupts from evaluation is [I think] anywhere that the evaluation is followed by a call to `UpdateEmpty`.)","format":"org.matrix.custom.html","formatted_body":"(Other places we don't immediately propagate abrupts from evaluation is [I think] anywhere that the evaluation is followed by a call to <code>UpdateEmpty</code>.)","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"(Other places we don't immediately propagate abrupts from evaluation is [I think] anywhere that the evaluation is followed by a call to `UpdateEmpty`.)","mimetype":"text/plain"},{"body":"(Other places we don't immediately propagate abrupts from evaluation is [I think] anywhere that the evaluation is followed by a call to <code>UpdateEmpty</code>.)","mimetype":"text/html"}]},"ts":1646768195039,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$3K-ZC58DXGnXOF3NKn_eH4dFfbi2tWiExFop6_kGOyI"},
{"content":{"body":" * (Other places we don't immediately propagate abrupts from evaluation is [I think] anywhere where that the evaluation is followed by a call to `UpdateEmpty`.)","format":"org.matrix.custom.html","formatted_body":" * (Other places we don't immediately propagate abrupts from evaluation is [I think] anywhere where that the evaluation is followed by a call to <code>UpdateEmpty</code>.)","m.new_content":{"body":"(Other places we don't immediately propagate abrupts from evaluation is [I think] anywhere where that the evaluation is followed by a call to `UpdateEmpty`.)","format":"org.matrix.custom.html","formatted_body":"(Other places we don't immediately propagate abrupts from evaluation is [I think] anywhere where that the evaluation is followed by a call to <code>UpdateEmpty</code>.)","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"(Other places we don't immediately propagate abrupts from evaluation is [I think] anywhere where that the evaluation is followed by a call to `UpdateEmpty`.)","mimetype":"text/plain"},{"body":"(Other places we don't immediately propagate abrupts from evaluation is [I think] anywhere where that the evaluation is followed by a call to <code>UpdateEmpty</code>.)","mimetype":"text/html"}]},"m.relates_to":{"event_id":"$3K-ZC58DXGnXOF3NKn_eH4dFfbi2tWiExFop6_kGOyI","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":" * (Other places we don't immediately propagate abrupts from evaluation is [I think] anywhere where that the evaluation is followed by a call to `UpdateEmpty`.)","mimetype":"text/plain"},{"body":" * (Other places we don't immediately propagate abrupts from evaluation is [I think] anywhere where that the evaluation is followed by a call to <code>UpdateEmpty</code>.)","mimetype":"text/html"}]},"ts":1646768298711,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$tmUhWGf4hbHAEIIWUzv7THMnM4X11a5OUClAodHM5nU"},
{"content":{"body":" * (Other places we don't immediately propagate abrupts from evaluation is [I think] anywhere that the evaluation is followed by a call to `UpdateEmpty`.)","format":"org.matrix.custom.html","formatted_body":" * (Other places we don't immediately propagate abrupts from evaluation is [I think] anywhere that the evaluation is followed by a call to <code>UpdateEmpty</code>.)","m.new_content":{"body":"(Other places we don't immediately propagate abrupts from evaluation is [I think] anywhere that the evaluation is followed by a call to `UpdateEmpty`.)","format":"org.matrix.custom.html","formatted_body":"(Other places we don't immediately propagate abrupts from evaluation is [I think] anywhere that the evaluation is followed by a call to <code>UpdateEmpty</code>.)","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"(Other places we don't immediately propagate abrupts from evaluation is [I think] anywhere that the evaluation is followed by a call to `UpdateEmpty`.)","mimetype":"text/plain"},{"body":"(Other places we don't immediately propagate abrupts from evaluation is [I think] anywhere that the evaluation is followed by a call to <code>UpdateEmpty</code>.)","mimetype":"text/html"}]},"m.relates_to":{"event_id":"$3K-ZC58DXGnXOF3NKn_eH4dFfbi2tWiExFop6_kGOyI","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":" * (Other places we don't immediately propagate abrupts from evaluation is [I think] anywhere that the evaluation is followed by a call to `UpdateEmpty`.)","mimetype":"text/plain"},{"body":" * (Other places we don't immediately propagate abrupts from evaluation is [I think] anywhere that the evaluation is followed by a call to <code>UpdateEmpty</code>.)","mimetype":"text/html"}]},"ts":1646768322695,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$FszmsLTiNg8oJ2hxVgcCaYSvjihMRvlZwdmMUSRhP_M"},
{"content":{"body":"Also, how do you feel about putting `Completion()` around \"the result of evaluating foo\"?","format":"org.matrix.custom.html","formatted_body":"Also, how do you feel about putting <code>Completion()</code> around &quot;the result of evaluating foo&quot;?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Also, how do you feel about putting `Completion()` around \"the result of evaluating foo\"?","mimetype":"text/plain"},{"body":"Also, how do you feel about putting <code>Completion()</code> around &quot;the result of evaluating foo&quot;?","mimetype":"text/html"}]},"ts":1646769752071,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$aEeOCrVa4hViUTORMxqdcd_QEr4-vPW7TSo1U4KQQHg"}
]