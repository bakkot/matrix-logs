[
{"content":{"body":"is it weird to anyone else that https://tc39.es/ecma262/#sec-property-descriptor-specification-type says that an empty Record is a Property Descriptor?","m.mentions":{},"msgtype":"m.text"},"ts":1736824756812,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$RN3HybjDsA-HsrTv1C3-2N4_qq5ogdaUh7O_Kmdtmhg"},
{"content":{"body":"it is, though","m.mentions":{},"msgtype":"m.text"},"ts":1736825625104,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$ulafndVVGK2ltef0x73c2smvw8nwfEjnCHNqQEK71o4"},
{"content":{"body":"that's so `Object.defineProperty(foo, 'bar', {})` works","format":"org.matrix.custom.html","formatted_body":"that's so <code>Object.defineProperty(foo, 'bar', {})</code> works","m.mentions":{},"msgtype":"m.text"},"ts":1736825635823,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$nl80S4QCe9vIMwcq3szf7iVqHiRKl4HtVlGc3XdLAtk"},
{"content":{"body":"i mean i get that an empty object has to work in a number of places. but since `{ enumerable: true }` isn't a property descriptor record either (that'd be `{ [[Enumerable]]: true }`) i'm not sure why an empty record needs to be one","format":"org.matrix.custom.html","formatted_body":"i mean i get that an empty object has to work in a number of places. but since <code>{ enumerable: true }</code> isn't a property descriptor record either (that'd be <code>{ [[Enumerable]]: true }</code>) i'm not sure why an empty record needs to be one","m.mentions":{},"msgtype":"m.text"},"ts":1736839946900,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$cPLwZZ2CLzW_LXNsjWd_1M2WGqdLFFTaVdtV_d1dlos"},
{"content":{"body":"if you look at how `Object.defineProperty` works it basically mechanically converts the object into a spec record by copying over each of the relevant fields https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-topropertydescriptor","format":"org.matrix.custom.html","formatted_body":"if you look at how <code>Object.defineProperty</code> works it basically mechanically converts the object into a spec record by copying over each of the relevant fields https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-topropertydescriptor","m.mentions":{},"msgtype":"m.text"},"ts":1736875495943,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$xwjhQqgmS-Aou6W8jDvLQrbMAzG_-CF7PaKgHh7ON5k"},
{"content":{"body":"and then passing it to definePropertyOrThrow which switches on presence of various fields","m.mentions":{},"msgtype":"m.text"},"ts":1736875568934,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$GVwmppeblzcCuxccXpdn-fbcwVczws6GAigSEPIzLbY"},
{"content":{"body":"it could work some other way but the reason an empty record is a property descriptor record is to allow it to be written this way","m.mentions":{},"msgtype":"m.text"},"ts":1736875967429,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$wuL3iFPWG5YO56mzZz2K5vMv_gudvlHGukrmMbNJN74"},
{"content":{"body":"I think if we were writing it today we'd probably avoid having optional fields in the record, which we usually avoid, but it would require a bit more machinery","m.mentions":{},"msgtype":"m.text"},"ts":1736876063359,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$Mj3ToBr4bGjFlxvDYOolyAekXEkZ-mEZLQ38dikmO14"},
{"content":{"body":"I definitely understand why it's written this way","m.mentions":{},"msgtype":"m.text"},"ts":1736876736783,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$C8QM_iubaeLPGLZrfMxOsJt7iDQTIOiZ2URlLEB8l40"},
{"content":{"body":"i'm wondering if it would be cleaner to special-case \"no fields\" rather than having the bottom type of all records be Property Descriptor","m.mentions":{},"msgtype":"m.text"},"ts":1736876760803,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$zbKrHXkvjlCWmBv2L2gDsi8zY0eS9O-8MvlTPvhcgcU"}
]