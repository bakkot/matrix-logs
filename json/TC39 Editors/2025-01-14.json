[
{"content":{"body":"is it weird to anyone else that https://tc39.es/ecma262/#sec-property-descriptor-specification-type says that an empty Record is a Property Descriptor?","m.mentions":{},"msgtype":"m.text"},"ts":1736824756812,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$RN3HybjDsA-HsrTv1C3-2N4_qq5ogdaUh7O_Kmdtmhg"},
{"content":{"body":"it is, though","m.mentions":{},"msgtype":"m.text"},"ts":1736825625104,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$ulafndVVGK2ltef0x73c2smvw8nwfEjnCHNqQEK71o4"},
{"content":{"body":"that's so `Object.defineProperty(foo, 'bar', {})` works","format":"org.matrix.custom.html","formatted_body":"that's so <code>Object.defineProperty(foo, 'bar', {})</code> works","m.mentions":{},"msgtype":"m.text"},"ts":1736825635823,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$nl80S4QCe9vIMwcq3szf7iVqHiRKl4HtVlGc3XdLAtk"},
{"content":{"body":"i mean i get that an empty object has to work in a number of places. but since `{ enumerable: true }` isn't a property descriptor record either (that'd be `{ [[Enumerable]]: true }`) i'm not sure why an empty record needs to be one","format":"org.matrix.custom.html","formatted_body":"i mean i get that an empty object has to work in a number of places. but since <code>{ enumerable: true }</code> isn't a property descriptor record either (that'd be <code>{ [[Enumerable]]: true }</code>) i'm not sure why an empty record needs to be one","m.mentions":{},"msgtype":"m.text"},"ts":1736839946900,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$cPLwZZ2CLzW_LXNsjWd_1M2WGqdLFFTaVdtV_d1dlos"},
{"content":{"body":"if you look at how `Object.defineProperty` works it basically mechanically converts the object into a spec record by copying over each of the relevant fields https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-topropertydescriptor","format":"org.matrix.custom.html","formatted_body":"if you look at how <code>Object.defineProperty</code> works it basically mechanically converts the object into a spec record by copying over each of the relevant fields https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-topropertydescriptor","m.mentions":{},"msgtype":"m.text"},"ts":1736875495943,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$xwjhQqgmS-Aou6W8jDvLQrbMAzG_-CF7PaKgHh7ON5k"},
{"content":{"body":"and then passing it to definePropertyOrThrow which switches on presence of various fields","m.mentions":{},"msgtype":"m.text"},"ts":1736875568934,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$GVwmppeblzcCuxccXpdn-fbcwVczws6GAigSEPIzLbY"},
{"content":{"body":"it could work some other way but the reason an empty record is a property descriptor record is to allow it to be written this way","m.mentions":{},"msgtype":"m.text"},"ts":1736875967429,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$wuL3iFPWG5YO56mzZz2K5vMv_gudvlHGukrmMbNJN74"},
{"content":{"body":"I think if we were writing it today we'd probably avoid having optional fields in the record, which we usually avoid, but it would require a bit more machinery","m.mentions":{},"msgtype":"m.text"},"ts":1736876063359,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$Mj3ToBr4bGjFlxvDYOolyAekXEkZ-mEZLQ38dikmO14"},
{"content":{"body":"I definitely understand why it's written this way","m.mentions":{},"msgtype":"m.text"},"ts":1736876736783,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$C8QM_iubaeLPGLZrfMxOsJt7iDQTIOiZ2URlLEB8l40"},
{"content":{"body":"i'm wondering if it would be cleaner to special-case \"no fields\" rather than having the bottom type of all records be Property Descriptor","m.mentions":{},"msgtype":"m.text"},"ts":1736876760803,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$zbKrHXkvjlCWmBv2L2gDsi8zY0eS9O-8MvlTPvhcgcU"},
{"content":{"body":"ah","m.mentions":{},"msgtype":"m.text"},"ts":1736877681893,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$VJBArqoYwPwHvxbn6iW65O2-AbwZHyQj7SgGLGTAams"},
{"content":{"body":"I prefer not to; I don't think of records as really sharing types","m.mentions":{},"msgtype":"m.text"},"ts":1736877704264,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$xSPUCjlvWjJyqm-QJrdcomS_dFrDpkoT7r3ty6QHiqY"},
{"content":{"body":"it's not like you come across a random record with no context in the spec; they're always being passed around between specific algorithms which make it clear what kind of thing they're working with","m.mentions":{},"msgtype":"m.text"},"ts":1736877730775,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$tyt9v4OYdk3VCWm7-YgoqAiyzIyArfoHmjlv6qpEi4Q"},
{"content":{"body":"lmao is this guy trying to save disk space on GitHub's servers? https://github.com/tc39/ecma262/pull/3478#issuecomment-2589138113","msgtype":"m.text"},"ts":1736879100257,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$S45dyvQ7tG1ZFYwFfR0lF46gh04BI91yExJtc_vg7pk"},
{"content":{"body":"who does this?","msgtype":"m.text"},"ts":1736879102465,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$b0GLDeey_0XvNbWJNR09g_pEIH9pzi442Z0T8ldt36Q"},
{"content":{"body":"Maybe he's saving space locally then pushing to github?","m.mentions":{},"msgtype":"m.text"},"ts":1736879346425,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$mCiJtg6vi41tbbcCuSWJwF2DyWC9LnZRKekPS28ILeQ"},
{"content":{"body":"ljharb: Given `Let _e_ be Record {}. If _e_ is a Property Descriptor, then ...`, are you thinking that the condition would succeed?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@ljharb:matrix.org\">ljharb</a>: Given <code>Let _e_ be Record {}. If _e_ is a Property Descriptor, then ...</code>, are you thinking that the condition would succeed?","m.mentions":{"user_ids":["@ljharb:matrix.org"]},"msgtype":"m.text"},"ts":1736880325342,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$b-E83Ertl1fJBkgg0kVe1D9ozB_u7JNwFenGvVwPYJM"},
{"content":{"body":"> <@michaelficarra:matrix.org> who does this?\n\nI’ve encountered many; some are the rare folks who use the PRs and issues tab, and are also stuck on the idea of “clean”, meaning they want to remove things from the list, and that requires closing PRs. In this case, i think he looks at his own profile and says “ick, too many forks” and tries to “clean” them up. But this is like the third time this guy;s done this with the same 262 PR, so i dunno what he’s thinking","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!nSLHQtIRJQxUJbEuGt%3Amatrix.org/%24b0GLDeey_0XvNbWJNR09g_pEIH9pzi442Z0T8ldt36Q\">In reply to</a> <a href=\"https://matrix.to/#/@michaelficarra:matrix.org\">@michaelficarra:matrix.org</a><br>who does this?</blockquote></mx-reply>I’ve encountered many; some are the rare folks who use the PRs and issues tab, and are also stuck on the idea of “clean”, meaning they want to remove things from the list, and that requires closing PRs. In this case, i think he looks at his own profile and says “ick, too many forks” and tries to “clean” them up. But this is like the third time this guy;s done this with the same 262 PR, so i dunno what he’s thinking","m.relates_to":{"m.in_reply_to":{"event_id":"$b0GLDeey_0XvNbWJNR09g_pEIH9pzi442Z0T8ldt36Q"}},"msgtype":"m.text"},"ts":1736880455394,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$Tjz18NBgSgTZ0TI_5ptqDugU5WfI61bSo1TKDCJT7Vs"},
{"content":{"body":"> <@jmdyck:matrix.org> ljharb: Given `Let _e_ be Record {}. If _e_ is a Property Descriptor, then ...`, are you thinking that the condition would succeed?\n\nit does, right now, to my reading.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!nSLHQtIRJQxUJbEuGt%3Amatrix.org/%24b-E83Ertl1fJBkgg0kVe1D9ozB_u7JNwFenGvVwPYJM\">In reply to</a> <a href=\"https://matrix.to/#/@jmdyck:matrix.org\">@jmdyck:matrix.org</a><br><a href=\"https://matrix.to/#/@ljharb:matrix.org\">ljharb</a>: Given <code>Let _e_ be Record {}. If _e_ is a Property Descriptor, then ...</code>, are you thinking that the condition would succeed?</blockquote></mx-reply>it does, right now, to my reading.","m.relates_to":{"m.in_reply_to":{"event_id":"$b-E83Ertl1fJBkgg0kVe1D9ozB_u7JNwFenGvVwPYJM"}},"msgtype":"m.text"},"ts":1736880469956,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$oCZ4XCTOSE786ZtAWThoFyfm2lmBMe2ReVjYYvLz3hU"},
{"content":{"body":"So you think \"is a Foo Record\" could be true of any record, regardless of how created, as long as it only has fields that a Foo Record can have?","m.mentions":{},"msgtype":"m.text"},"ts":1736880598792,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$Tm4XqvRNBGr9e28TFOCGZ5lKWtwQpXKPaCTyT_eJT5I"},
{"content":{"body":"yes, we have structural not nominal typing on records","msgtype":"m.text"},"ts":1736880680786,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$eg6y63QuAVRmzg9TpKC1fb4Hp6l3b04-7ZtXorOVfBA"},
{"content":{"body":"What suggests this to you?","m.mentions":{},"msgtype":"m.text"},"ts":1736880787502,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$2_BzPTIA4-P53JIBXofj7TxRL7kJpIh5UR1Pq9j7SUI"},
{"content":{"body":"well, we do for property descriptors specifically per the introductory paragraph of https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-property-descriptor-specification-type","m.mentions":{},"msgtype":"m.text"},"ts":1736881019636,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$UJdYiqn31cM4JZtiCCC5BQ7JzRropglnvtV9JanMtyQ"},
{"content":{"body":"I think/hope that everywhere else in the spec the difference would be never be observable; we're not really switching on the types of internal records much (ever?)","m.mentions":{},"msgtype":"m.text"},"ts":1736881062071,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$HAv79jVItzCxrEeZvw3ILlkN_-lRqimnLUjw-cEqZIk"},
{"content":{"body":"there're a few places around Reference Records, and class fields","m.mentions":{},"msgtype":"m.text"},"ts":1736881122160,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$_HBvDiPXN3VgZDCvB_7ZJ1sqgdWouEtbK9BSA2tef_4"},
{"content":{"body":"but yes i also hope the difference is never observable","m.mentions":{},"msgtype":"m.text"},"ts":1736881142581,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$qFcZZd4XY5Z-JvvX_9_enyyF0_U-GP5KTJm-iAfGl_g"},
{"content":{"body":"more specifically i hope, for named records, we never create record literals without the name (but with all the fields) and use it like the named records","m.mentions":{},"msgtype":"m.text"},"ts":1736881202254,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$l_jWF4HddUJc5NBT8i2psnSBJWBhbHdVrinj6cUkucc"},
{"content":{"body":"ooh, found one but it's silly https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-symbol.for","m.mentions":{},"msgtype":"m.text"},"ts":1736881348308,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$L5R3F0-9QAmmq9HhCjLodSY05OvAW_NjCSthDKZLjg4"},
{"content":{"body":"bakkot: you're saying that that intro paragraph says that property descriptors have structural not nominal typing?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@bakkot:matrix.org\">bakkot</a>: you're saying that that intro paragraph says that property descriptors have structural not nominal typing?","m.mentions":{"user_ids":["@bakkot:matrix.org"]},"msgtype":"m.text"},"ts":1736881375535,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$I8MLq09xwpSDpKdBD29a4JhyEzOvNi7DiF114I1CnSs"},
{"content":{"body":"oh boo but at least it's right above the table","m.mentions":{"user_ids":["@bakkot:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$L5R3F0-9QAmmq9HhCjLodSY05OvAW_NjCSthDKZLjg4"}},"msgtype":"m.text"},"ts":1736881410674,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$zAPPOQC8BUzy44UCi0SF0MICmeP4_a_5_oiWO084kao"},
{"content":{"body":"jmdyck that's my reading of it yes:\n\n> Property Descriptor values may be further classified as data Property Descriptors and accessor Property Descriptors based upon the existence or use of certain fields","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@jmdyck:matrix.org\">jmdyck</a> that's my reading of it yes:</p>\n<blockquote>\n<p>Property Descriptor values may be further classified as data Property Descriptors and accessor Property Descriptors based upon the existence or use of certain fields</p>\n</blockquote>\n","m.mentions":{"user_ids":["@jmdyck:matrix.org"]},"msgtype":"m.text"},"ts":1736881412636,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$yM5R8XbC8gGL8x2hJYuFvzE-MdU-kCOmvqyxwP5aWxE"},
{"content":{"body":"I also really dislike the reference to the ambient \"GlobalSymbolRegistry List\" in `Symbol.for`","format":"org.matrix.custom.html","formatted_body":"I also really dislike the reference to the ambient \"GlobalSymbolRegistry List\" in <code>Symbol.for</code>","m.mentions":{},"msgtype":"m.text"},"ts":1736881498617,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$kLgJ6nDVv8qVLV10pSMPM8xY6CYUpiL8MnwDQqxJhV0"},
{"content":{"body":"I'm sure Michael Ficarra dislikes it more","format":"org.matrix.custom.html","formatted_body":"I'm sure <a href=\"https://matrix.to/#/@michaelficarra:matrix.org\">Michael Ficarra</a> dislikes it more","m.mentions":{"user_ids":["@michaelficarra:matrix.org"]},"msgtype":"m.text"},"ts":1736881502067,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$iqz9E_It3rKNC1dy6Th3-M6ZxUmfWGYpdH7hrMUqoV4"},
{"content":{"body":"oh, the *second* paragraph, hm.","format":"org.matrix.custom.html","formatted_body":"oh, the <em>second</em> paragraph, hm.","m.mentions":{},"msgtype":"m.text"},"ts":1736881503771,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$wCC7VcCJewDvVM9ZDGGaMQ_MfKmpUSaIFIdwiqxJDHU"},
{"content":{"body":"oh sorry yes","m.mentions":{},"msgtype":"m.text"},"ts":1736881527726,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$J-5siV-ljbjkl4kCQU8KV8eMJ9lZfcp3KYPJs7rnlwc"},
{"content":{"body":"but it really is so global","m.mentions":{"user_ids":["@bakkot:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$kLgJ6nDVv8qVLV10pSMPM8xY6CYUpiL8MnwDQqxJhV0"}},"msgtype":"m.text"},"ts":1736881586456,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$G3ukN4E9U6iikOBw8YiiOlDj1yJEJ6dXxtspLJNozL4"},
{"content":{"body":"it transcends all realms","m.mentions":{},"msgtype":"m.text"},"ts":1736881592076,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$khBmwSOdUCxB7fZj3dIk9HSqJs759mWLbvE0lGFT0a4"},
{"content":{"body":"yes but we should `<dfn>` it or something at the very least","format":"org.matrix.custom.html","formatted_body":"yes but we should <code>&lt;dfn&gt;</code> it or something at the very least","m.mentions":{},"msgtype":"m.text"},"ts":1736881598801,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$jhfps1pVku6q0vTQNv8flr4UGUKmBAuXt_-QD2fDji0"},
{"content":{"body":"yeah, and... i guess we should also build in locking?","m.mentions":{},"msgtype":"m.text"},"ts":1736881637669,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$NYFvZvBpponYLqVRi7rOLlqa5LeLbI7nvwIPd1LBSDA"},
{"content":{"body":"oh yeah fun","m.mentions":{},"msgtype":"m.text"},"ts":1736881661466,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$SCwbIV1Bceq-waZQ9YZmYm45WdE5dcLiYujotKwp2O0"},
{"content":{"body":"we can just handwave that","m.mentions":{},"msgtype":"m.text"},"ts":1736881664188,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$nczgmhnSQxyP1my5uIE_OfLDJxTqbAR5hIKK3JJso34"},
{"content":{"body":"actually, would it be observable? they're not cloneable","m.mentions":{},"msgtype":"m.text"},"ts":1736881677421,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$1eIHyPju9UlhrrK8cOhNPiz4ymqRn_eQ0d9c34_l3co"},
{"content":{"body":"* actually, would it be observable? they're not structured-cloneable","m.mentions":{},"m.new_content":{"body":"actually, would it be observable? they're not structured-cloneable","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$1eIHyPju9UlhrrK8cOhNPiz4ymqRn_eQ0d9c34_l3co","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1736881686299,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$yMz4n8JnR4fFLq_QQwT3CTr-DNLZabxwhb1NvyrAJlo"},
{"content":{"body":"(GlobalSymbolRegistry is called out in MF's 2724: https://github.com/tc39/ecma262/issues/2724#issuecomment-1093579455)","m.mentions":{},"msgtype":"m.text"},"ts":1736881760093,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$uGs9NCmjOpK6K01ZPRE4uYtRLkMrIvhJAsm1yGbeIXA"},
{"content":{"body":"ah, good good","m.mentions":{},"msgtype":"m.text"},"ts":1736881770546,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$DIGoi7hKlTUCibfpEWQr1VDYxbV18kZzPLBWrwcYT9A"},
{"content":{"body":"i didn't realize they weren't actually","m.mentions":{"user_ids":["@bakkot:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$1eIHyPju9UlhrrK8cOhNPiz4ymqRn_eQ0d9c34_l3co"}},"msgtype":"m.text"},"ts":1736881809564,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$3e1gPJCpL2mvEbGE6YRcmYQpBW-aMj-LKP4odAHnLaw"},
{"content":{"body":"symbols aren't cloneable at all","m.mentions":{},"msgtype":"m.text"},"ts":1736881848053,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$MQoUmQeAwLT8zF7rwK_1KXMHRDexGM0NhmCsIMXrjlY"},
{"content":{"body":"it's a bit silly","m.mentions":{},"msgtype":"m.text"},"ts":1736881854664,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$VHwcCl021Wai401lJD7cKFs8wrq5m2r3JVClz4gHrDg"},
{"content":{"body":"registered symbols probably should be","m.mentions":{},"msgtype":"m.text"},"ts":1736881859413,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$UhMSEg0ZyzOx6ZadIEw6JgstBct1_Yj6iYSxKL7eNHo"},
{"content":{"body":"https://html.spec.whatwg.org/multipage/structured-data.html#structuredserializeinternal step 5","m.mentions":{},"msgtype":"m.text"},"ts":1736881885928,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$mlHzyHpFSgqXs2yFeKg0xFpZN87btULwi5COZquT9uU"},
{"content":{"body":"that is eminently silly yes","m.mentions":{},"msgtype":"m.text"},"ts":1736881973936,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$yOFacUjNSOp37_DRlZYoYzUX0v8sCD_Xe8pByr8MpG8"}
]