[
{"content":{"body":"styfle guybedford The \"JSON modules\" proposal is stage 4 and part of ecma-262, there is no need for the import bytes proposal to \"build o top of it\"","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@styfle:matrix.org\">styfle</a> <a href=\"https://matrix.to/#/@guybedford:matrix.org\">guybedford</a> The \"JSON modules\" proposal is stage 4 and part of ecma-262, there is no need for the import bytes proposal to \"build o top of it\"","m.mentions":{"user_ids":["@styfle:matrix.org","@guybedford:matrix.org"]},"msgtype":"m.text"},"ts":1753867233258,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$J9ajBObsH0q7h9mTQVMBlOrJKr6C3ekTZysS1qws_Ko"},
{"content":{"body":"styfle Can you link to https://styfle.github.io/proposal-import-buffer/ in the repo metadata?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@styfle:matrix.org\">styfle</a> Can you link to https://styfle.github.io/proposal-import-buffer/ in the repo metadata?","m.mentions":{"user_ids":["@styfle:matrix.org"]},"msgtype":"m.text"},"ts":1753867287797,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$x_ynvQBIqlNerwblMOqfd1zADt1uBwUqbLf5659zMQg"},
{"content":{"body":"Two questions also:\n- Why does CreateBufferModule accept a SharedArrayBuffer? If implementations don't want a mutable ArrayBuffer, a SharedArrayBuffer seems even worse\n- I missed when we switched from Uint8Array to ArrayBuffer. Why that change? Every API that accepts an ArrayBuffer also accepts a Uint8Array anyway, but Uint8Array avoid the \"conversion step\" for the most common use cases of needing the bytes.","format":"org.matrix.custom.html","formatted_body":"<p>Two questions also:</p>\n<ul>\n<li>Why does CreateBufferModule accept a SharedArrayBuffer? If implementations don't want a mutable ArrayBuffer, a SharedArrayBuffer seems even worse</li>\n<li>I missed when we switched from Uint8Array to ArrayBuffer. Why that change? Every API that accepts an ArrayBuffer also accepts a Uint8Array anyway, but Uint8Array avoid the \"conversion step\" for the most common use cases of needing the bytes.</li>\n</ul>\n","m.mentions":{},"msgtype":"m.text"},"ts":1753867464189,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$3iT4T3HaAHInbXueWxjiDm8gZW6DN6mSki6rAXjibHs"},
{"content":{"body":"Editorially speaking, I think it would be enough to say in HostLoadImportedModule \"must perform FinishLoadingImportedModule(referrer, moduleRequest, payload, result), where result is either the Completion Record returned by an invokation of  CreateDefaultExportSyntheticModule with an immutable ArrayBuffer parameter or a throw completion\" without needing the new CreateBufferModule AO, but the current approach is also fine","m.mentions":{},"msgtype":"m.text"},"ts":1753867582184,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$Yh_bRFigFj8RoQErL4MOCUac1wKIxStGCrYBK_OiREM"},
{"content":{"body":"* Editorially speaking, I think it would be better to say in HostLoadImportedModule \"must perform FinishLoadingImportedModule(referrer, moduleRequest, payload, result), where result is either the Completion Record returned by an invokation of  CreateDefaultExportSyntheticModule with an immutable ArrayBuffer parameter or a throw completion\" without needing the new CreateBufferModule AO, but the current approach is also fine","m.mentions":{},"m.new_content":{"body":"Editorially speaking, I think it would be better to say in HostLoadImportedModule \"must perform FinishLoadingImportedModule(referrer, moduleRequest, payload, result), where result is either the Completion Record returned by an invokation of  CreateDefaultExportSyntheticModule with an immutable ArrayBuffer parameter or a throw completion\" without needing the new CreateBufferModule AO, but the current approach is also fine","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$Yh_bRFigFj8RoQErL4MOCUac1wKIxStGCrYBK_OiREM","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1753867588790,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$BdLXrQF1ccHqgCfpd1T3mf7g5qePbK2_brbecTVIZwU"},
{"content":{"body":"Note that https://github.com/styfle/proposal-import-buffer/issues/5 was asking for the _backing ArrayBuffer_ of the Uint8Array to be an immutable ArrayBuffer, not for the Uint8Array to be _replaced_ with an immutable ArrayBuffer","format":"org.matrix.custom.html","formatted_body":"Note that https://github.com/styfle/proposal-import-buffer/issues/5 was asking for the <em>backing ArrayBuffer</em> of the Uint8Array to be an immutable ArrayBuffer, not for the Uint8Array to be <em>replaced</em> with an immutable ArrayBuffer","m.mentions":{},"msgtype":"m.text"},"ts":1753867884989,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$0sdAY1MUgk1HvLZ3Xezl09pUTt_u5cTJHLub5eU-yi4"},
{"content":{"body":"Oh, I see, https://github.com/styfle/proposal-import-buffer/issues/5#issuecomment-3059482682. I'll bring it up in plenary","m.mentions":{},"msgtype":"m.text"},"ts":1753867949697,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$wt61hF67dwhcHDPQQgMsEcalYEc9R_QJuM7fXOGHWiM"},
{"content":{"body":"w3c guidelines say to use Uint8Array for sequences of bytes https://www.w3.org/TR/design-principles/#uint8array","m.mentions":{},"msgtype":"m.text"},"ts":1753868853912,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$7_Vq0wrCaSCgqBjx382hnsH9Sc_uMsg80JkxuEeGuiE"},
{"content":{"body":"(disclosure: I wrote this rule)","m.mentions":{},"msgtype":"m.text"},"ts":1753868859276,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$-6092GyO2sCeE2ev-TyD7UqHqQoYQG3ErEhQJrQG9OU"},
{"content":{"body":"Oh thank you","m.mentions":{},"msgtype":"m.text"},"ts":1753868888525,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$X2vH8tJX8zx1pApNQsb_Aig45ANL6d5inPT7LbqT2-s"},
{"content":{"body":"the Response type has a `bytes` method for getting a Uint8Array as well as a now-consider-mistake `arrayBuffer` method for getting an ArrayBuffer and `json` for getting json and `text` for getting text","format":"org.matrix.custom.html","formatted_body":"the Response type has a <code>bytes</code> method for getting a Uint8Array as well as a now-consider-mistake <code>arrayBuffer</code> method for getting an ArrayBuffer and <code>json</code> for getting json and <code>text</code> for getting text","m.mentions":{},"msgtype":"m.text"},"ts":1753868955370,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$qiHocCqL_3YzbC9ihr9qlD-4YG2BfR_35vhxTH9QUVU"},
{"content":{"body":"whichever type we chose I think the names should match","m.mentions":{},"msgtype":"m.text"},"ts":1753868972032,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$T2wfCo9P04_G84ZYF7iTfSAHloqT122wEwrRXgVDoew"},
{"content":{"body":"Do you know if there is any API that accepts array buffers but not uint8arrays?","m.mentions":{},"msgtype":"m.text"},"ts":1753868984813,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$JdG7g4j-rr4laHgkShFyyFcS42I2S9keySUNFEYFlhM"},
{"content":{"body":"so if we do ArrayBuffer it should be `with { type: \"arrayBuffer\" }`","format":"org.matrix.custom.html","formatted_body":"so if we do ArrayBuffer it should be <code>with { type: \"arrayBuffer\" }</code>","m.mentions":{},"msgtype":"m.text"},"ts":1753868994473,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$D5sRQmrN6GHPrBHKDHCEJ_dLLC8HF_1z8HWv7J2OPQI"}
]