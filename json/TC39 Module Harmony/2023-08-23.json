[
{"content":{"body":"> <@kriskowal:matrix.org> Am I right that we’re in agreement that “module phase imports” means that the module has advanced to at least the “linked” phase before you get a handle on the instance?\n\nNo, I always assumed that the \"module instance phase\" is equivalent to\n```js\nimport module mod from \"m\";\n\n// equivalent to\n\nimport source _s from \"m\";\nconst mod = new Module(_s, {\n  importHook: <the import hook from this module>\n});\n```","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!RkpmGMjJtqLKXzByOT:matrix.org/$Ecf-kHgbaNnc88GnK4xJtgeeqAom6SQ4O3hECDXFAfw?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@kriskowal:matrix.org\">@kriskowal:matrix.org</a><br>Am I right that we’re in agreement that “module phase imports” means that the module has advanced to at least the “linked” phase before you get a handle on the instance?</blockquote></mx-reply><p>No, I always assumed that the \"module instance phase\" is equivalent to</p>\n<pre><code class=\"language-js\">import module mod from \"m\";\n\n// equivalent to\n\nimport source _s from \"m\";\nconst mod = new Module(_s, {\n  importHook: &lt;the import hook from this module&gt;\n});\n</code></pre>\n","m.relates_to":{"m.in_reply_to":{"event_id":"$Ecf-kHgbaNnc88GnK4xJtgeeqAom6SQ4O3hECDXFAfw"}},"msgtype":"m.text"},"ts":1692782222585,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$2J5VAjPo9kRBMP5yIYSzTGMZfp0tGpXwkFCvIvoGxPM"},
{"content":{"body":"> <@kriskowal:matrix.org> Am I right that we’re in agreement that “module phase imports” means that the module has advanced to at least the “linked” phase before you get a handle on the instance?\n\n * No, I always assumed that the \"module instance phase\" is equivalent to\n\n```js\nimport module mod from \"m\";\n\n// equivalent to\n\nimport source _s from \"m\";\nconst mod = new Module(_s, {\n  importHook: <the import hook from this module>,\n  ...<context needed for the import hook>,\n});\n```","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!RkpmGMjJtqLKXzByOT:matrix.org/$Ecf-kHgbaNnc88GnK4xJtgeeqAom6SQ4O3hECDXFAfw?via=matrix.org&amp;via=igalia.com&amp;via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@kriskowal:matrix.org\">@kriskowal:matrix.org</a><br>Am I right that we’re in agreement that “module phase imports” means that the module has advanced to at least the “linked” phase before you get a handle on the instance?</blockquote></mx-reply> * <p>No, I always assumed that the \"module instance phase\" is equivalent to</p>\n<pre><code class=\"language-js\">import module mod from \"m\";\n\n// equivalent to\n\nimport source _s from \"m\";\nconst mod = new Module(_s, {\n  importHook: &lt;the import hook from this module&gt;,\n  ...&lt;context needed for the import hook&gt;,\n});\n</code></pre>\n","m.new_content":{"body":"No, I always assumed that the \"module instance phase\" is equivalent to\n\n```js\nimport module mod from \"m\";\n\n// equivalent to\n\nimport source _s from \"m\";\nconst mod = new Module(_s, {\n  importHook: <the import hook from this module>,\n  ...<context needed for the import hook>,\n});\n```","format":"org.matrix.custom.html","formatted_body":"<p>No, I always assumed that the \"module instance phase\" is equivalent to</p>\n<pre><code class=\"language-js\">import module mod from \"m\";\n\n// equivalent to\n\nimport source _s from \"m\";\nconst mod = new Module(_s, {\n  importHook: &lt;the import hook from this module&gt;,\n  ...&lt;context needed for the import hook&gt;,\n});\n</code></pre>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$2J5VAjPo9kRBMP5yIYSzTGMZfp0tGpXwkFCvIvoGxPM","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1692782275897,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$XYkVL-qlGnYh6gNew4jpMPsqLT3SfRHfY6SCtoroGPc"},
{"content":{"body":"That is, it's not linked but it has the necessary info to then link it (either \"here\" or \"on the other side\")","msgtype":"m.text"},"ts":1692782290233,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$hoWM0tvQGZUgZQ_9DISHyHZkP8de0aNU33nXRL1pygs"},
{"content":{"body":"That’s interesting. That suggests that we may need to think more rigorously on this, that there may need to be a mechanism to explicitly advance to the linked phase.","msgtype":"m.text"},"ts":1692807031278,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$W0OmM6W1ALtArntCkkEdy9_KzllI0Nkjnu-03NueLN4"},
{"content":{"body":"Either that or put bundlers or module-instance-transfer mechanism at liberty to advance to the linked phase for a module instance by some other means.","msgtype":"m.text"},"ts":1692807111981,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$UDXlBFfDKI6zKWq45gwCJCBzP1k2udwrpsT6NHoCJcA"},
{"content":{"body":"I’m tentatively assuming we’ll need `import.link(mod)` for that.","format":"org.matrix.custom.html","formatted_body":"I’m tentatively assuming we’ll need <code>import.link(mod)</code> for that.","msgtype":"m.text"},"ts":1692807223711,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$2vU0HbJcumgNaQ-gPWdkUkckOEHvYT42EimQbrd2ovI"},
{"content":{"body":"I realized during the tc39 tools meeting just now that you also get a form of asset references with module instance imports: `import module a from \"data:application/javascript,export * from './a.js'\";`","format":"org.matrix.custom.html","formatted_body":"I realized during the tc39 tools meeting just now that you also get a form of asset references with module instance imports: <code>import module a from \"data:application/javascript,export * from './a.js'\";</code>","msgtype":"m.text"},"ts":1692810019049,"senderName":"Luca Casonato","senderId":"@lucacasonato:matrix.org","id":"$9K9QsZbASGUmXS4910i_2furH8ymmMuCM0GrYpwZDbU"},
{"content":{"body":"it's very cheaty","msgtype":"m.text"},"ts":1692810028480,"senderName":"Luca Casonato","senderId":"@lucacasonato:matrix.org","id":"$CSkQQHwGg6BvASYEQ_-WkFQdZ-FkG7jmxc5gFu7MW-w"},
{"content":{"body":"Well it doesn't actually work because of relative specifiers in data URLs, but it can nearly work","msgtype":"m.text"},"ts":1692810066250,"senderName":"Luca Casonato","senderId":"@lucacasonato:matrix.org","id":"$36VRyvNcJdQHSNrVot4Md_8ru8WfQ2STjICuElqhSkA"},
{"content":{"body":" * Well it doesn't actually work because you can't have relative specifiers in data URLs, but it can nearly work","m.new_content":{"body":"Well it doesn't actually work because you can't have relative specifiers in data URLs, but it can nearly work","msgtype":"m.text"},"m.relates_to":{"event_id":"$36VRyvNcJdQHSNrVot4Md_8ru8WfQ2STjICuElqhSkA","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1692810076438,"senderName":"Luca Casonato","senderId":"@lucacasonato:matrix.org","id":"$WSAiT3uUdhnT1auoMN9WxTiz5mUwr4O9ZMmU4fveXlw"}
]