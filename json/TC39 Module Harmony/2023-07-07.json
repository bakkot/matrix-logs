[
{"content":{"body":"Mathieu Hofman’s points are all correct. ShadowRealm is an orthogonal and sometimes complementary approach to Lockdown and Compartments (or the more surgical Evaluators + Module Harmony)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@mhofman:matrix.org\">Mathieu Hofman</a>’s points are all correct. ShadowRealm is an orthogonal and sometimes complementary approach to Lockdown and Compartments (or the more surgical Evaluators + Module Harmony)","msgtype":"m.text"},"ts":1688688022217,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$Z60wmFES8ZJFh0Qt064kBYbhV-d3B5OD2oJJXv8NbFY"},
{"content":{"body":"Lockdown makes the surrounding realm suitable for multiple guest programs. The surrounding realm can be a ShadowRealm, but does not have to be.","msgtype":"m.text"},"ts":1688688116081,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$3DKsGpSvIaJS9PGoUSS4hsgwEdiZUPVKvNi9Frzl2zk"},
{"content":{"body":"danielrosenwasser So, point 3 is not the case: it is practical to lockdown() an ordinary realm.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@danielrosenwasser:matrix.org\">danielrosenwasser</a> So, point 3 is not the case: it is practical to lockdown() an ordinary realm.","msgtype":"m.text"},"ts":1688688284700,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$kBrz1awnvDrbcj1QlN_LjFHSQEotzTqYwPK_V-Zl3iE"},
{"content":{"body":"But running lockdown in the primary realm does mean less JavaScript will function normally in that realm. So, a shadow realm could be useful for those cases.","msgtype":"m.text"},"ts":1688688378391,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$9JIGCQV5vchkzAUy24FvgpqRzXmX7SlKRwQGp3KmP40"},
{"content":{"body":"right, that's really what I meant","msgtype":"m.text"},"ts":1688688396377,"senderName":"danielrosenwasser","senderId":"@danielrosenwasser:matrix.org","id":"$lwyVVES4-yodUlAk_rd1wWfVdjdY3mONn8ex4_oHgHY"},
{"content":{"body":"e.g. your own code expects an \"unlocked\" realm, but it's a sufficient constraint on guest code where you want to reused the same Realm instead of spinning up a Shadow Realm per guest","msgtype":"m.text"},"ts":1688688410595,"senderName":"danielrosenwasser","senderId":"@danielrosenwasser:matrix.org","id":"$ihqzyBECq61hMz3X59VCiP2oU_bcagHZ5Vrg-qb-1f8"},
{"content":{"body":" * e.g. your own code expects an \"unlocked\" realm, but it's a sufficient constraint on guest code where you want to reuse the same Realm instead of spinning up a Shadow Realm per guest","m.new_content":{"body":"e.g. your own code expects an \"unlocked\" realm, but it's a sufficient constraint on guest code where you want to reuse the same Realm instead of spinning up a Shadow Realm per guest","msgtype":"m.text"},"m.relates_to":{"event_id":"$ihqzyBECq61hMz3X59VCiP2oU_bcagHZ5Vrg-qb-1f8","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1688688416563,"senderName":"danielrosenwasser","senderId":"@danielrosenwasser:matrix.org","id":"$nj3gesN2oReE-059tRKCvUb80i1PSlOQFwnY0tpF_IA"},
{"content":{"body":"Yes, that is a nice arrangement.","msgtype":"m.text"},"ts":1688688427526,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$_Hg1NzmntBI44Kq0CiP14PkZK7HFa8cuSlU6jzn913s"},
{"content":{"body":"Not one we’ve had the opportunity to try yet though! We’ve been locking down primary realms, including worker realms, for all of Agoric’s work.","msgtype":"m.text"},"ts":1688688470976,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$B49HEaK95OJ8948OdIlxzvPuwQRpeWWM9iK3l5BK7MY"},
{"content":{"body":"Shims are not really a problem. Lockdown just has to cooperate with the shim. After shims, the biggest problem is usually property override mistakes, which aren’t really detectable until you’ve frozen some intrinsics.","msgtype":"m.text"},"ts":1688688553675,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$IhANDrjHTGShc9heIq7zWpCiiB1W0P3dsjfbGGxAQRc"}
]