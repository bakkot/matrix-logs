[
{"content":{"body":"I’ve finished a deck for tomorrow, should time permit. I added this to the end of the meeting as it shows where I think we’re converging. https://drive.google.com/file/d/1_juf8l8PCrVHA4iA1G4BwQ1JsuXMjOVa/view","msgtype":"m.text","org.matrix.msc1767.text":"I’ve finished a deck for tomorrow, should time permit. I added this to the end of the meeting as it shows where I think we’re converging. https://drive.google.com/file/d/1_juf8l8PCrVHA4iA1G4BwQ1JsuXMjOVa/view"},"ts":1657069626251,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$p6hyPwxe9z3nkLsvgELZphMdRieClvuSgw_0CTn57Rc"},
{"content":{"body":"> <@kriskowal:matrix.org> I’ve finished a deck for tomorrow, should time permit. I added this to the end of the meeting as it shows where I think we’re converging. https://drive.google.com/file/d/1_juf8l8PCrVHA4iA1G4BwQ1JsuXMjOVa/view\n\nI like this. Where does the module descriptor go? ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!RkpmGMjJtqLKXzByOT:matrix.org/$p6hyPwxe9z3nkLsvgELZphMdRieClvuSgw_0CTn57Rc?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@kriskowal:matrix.org\">@kriskowal:matrix.org</a><br />I’ve finished a deck for tomorrow, should time permit. I added this to the end of the meeting as it shows where I think we’re converging. https://drive.google.com/file/d/1_juf8l8PCrVHA4iA1G4BwQ1JsuXMjOVa/view</blockquote></mx-reply>I like this. Where does the module descriptor go?","m.relates_to":{"m.in_reply_to":{"event_id":"$p6hyPwxe9z3nkLsvgELZphMdRieClvuSgw_0CTn57Rc"}},"msgtype":"m.text"},"ts":1657090408016,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$5b0M73VDwaHHJzGCucLr2LCEAhsboEWn9OH1K11c5Ys"},
{"content":{"body":"Module descriptors cease to be necessary. When implementing a Compartment in user code, module instances replace module descriptors. User-mode Compartments aren’t able to address modules from the host compartment by name, but import reflection replaces that role.","msgtype":"m.text","org.matrix.msc1767.text":"Module descriptors cease to be necessary. When implementing a Compartment in user code, module instances replace module descriptors. User-mode Compartments aren’t able to address modules from the host compartment by name, but import reflection replaces that role."},"ts":1657091482336,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$_fwAwC8wqEtcDtM-8v6574m8hGDi7CJSc760cRuc5pY"},
{"content":{"body":"e.g., `defer import fs from 'fs'; new Compartment{{ modules: { fs } }).import('fs')` is a possible solution with a user-code Compartment implementation.","format":"org.matrix.custom.html","formatted_body":"e.g., <code>defer import fs from 'fs'; new Compartment{{ modules: { fs } }).import('fs')</code> is a possible solution with a user-code Compartment implementation.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"e.g., `defer import fs from 'fs'; new Compartment{{ modules: { fs } }).import('fs')` is a possible solution with a user-code Compartment implementation.","mimetype":"text/plain"},{"body":"e.g., <code>defer import fs from 'fs'; new Compartment{{ modules: { fs } }).import('fs')</code> is a possible solution with a user-code Compartment implementation.","mimetype":"text/html"}]},"ts":1657091636058,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$Lp24nRR1lBwHHLpx6LAByuXUqMiJB-Ey6DnXu2Aj0mc"},
{"content":{"body":"(where `defer import` is import reflection. I haven’t seen a syntax I like for that yet, so just riffing here.)","format":"org.matrix.custom.html","formatted_body":"(where <code>defer import</code> is import reflection. I haven’t seen a syntax I like for that yet, so just riffing here.)","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"(where `defer import` is import reflection. I haven’t seen a syntax I like for that yet, so just riffing here.)","mimetype":"text/plain"},{"body":"(where <code>defer import</code> is import reflection. I haven’t seen a syntax I like for that yet, so just riffing here.)","mimetype":"text/html"}]},"ts":1657091697283,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$IWz-3DDWrpMDpFPKSOYn-iXnMbAiDTH5PPCTofLgeuE"},
{"content":{"body":"Actually, for inter-compartment linkage, we would have to implement module-descriptors in user code.","msgtype":"m.text","org.matrix.msc1767.text":"Actually, for inter-compartment linkage, we would have to implement module-descriptors in user code."},"ts":1657092186820,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$tHe6r4t-dCREn05tfyLscFYhBv-TFfulHUhbdzrhPiA"},
{"content":{"body":"Are any champions going to seek advancement for module proposals at the next plenary?","msgtype":"m.text","org.matrix.msc1767.text":"Are any champions going to seek advancement for module proposals at the next plenary?"},"ts":1657135780452,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$YzBsoqbG5mXJmMzPdV2Q-UMxMl8waDC5xwvMORdMy5M"},
{"content":{"body":"We are planning to seek stage 2","msgtype":"m.text"},"ts":1657135840510,"senderName":"Luca Casonato","senderId":"@lucacasonato:matrix.org","id":"$XuIdDYZ3t30NWL-q6_hzfuqOQAhhdI_kS5GjmEFsUrA"},
{"content":{"body":"I propose that I repurpose the slot I’ve reserved for compartments to deliver a module harmony, based on where we are as of this morning. My impression is that we need more work on module harmony before we have a proposal that can advance to Stage 2.","msgtype":"m.text","org.matrix.msc1767.text":"I propose that I repurpose the slot I’ve reserved for compartments to deliver a module harmony, based on where we are as of this morning. My impression is that we need more work on module harmony before we have a proposal that can advance to Stage 2."},"ts":1657135941263,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$vrefnSWy6HfswECvv6YVOe6t4xJ4o_t42jh6pKOfZdo"},
{"content":{"body":"In my opinion, none of our proposals should advance until we have a shared foundation, and as far as I’m concerned, that shared foundation could be bundled into any proposal seeking stage 2 or greater.","msgtype":"m.text","org.matrix.msc1767.text":"In my opinion, none of our proposals should advance until we have a shared foundation, and as far as I’m concerned, that shared foundation could be bundled into any proposal seeking stage 2 or greater."},"ts":1657136010932,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$FEEkM4jmm606sOEO62S-BefCOezGsjoZF-A4SCvKxzA"},
{"content":{"body":"By the shared foundation, I mean the modifications to the abstract module record hierarchy on which we all likely depend.","msgtype":"m.text","org.matrix.msc1767.text":"By the shared foundation, I mean the modifications to the abstract module record hierarchy on which we all likely depend."},"ts":1657136067119,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$GDOl3L5G6OP1a1ElhhaPHxfvhpTuBj3i1XjmqpEhPyk"},
{"content":{"body":" * I propose that I repurpose the slot I’ve reserved for compartments to deliver a module harmony report, based on where we are as of this morning. My impression is that we need more work on module harmony before we have a proposal that can advance to Stage 2.","m.new_content":{"body":"I propose that I repurpose the slot I’ve reserved for compartments to deliver a module harmony report, based on where we are as of this morning. My impression is that we need more work on module harmony before we have a proposal that can advance to Stage 2.","msgtype":"m.text","org.matrix.msc1767.text":"I propose that I repurpose the slot I’ve reserved for compartments to deliver a module harmony report, based on where we are as of this morning. My impression is that we need more work on module harmony before we have a proposal that can advance to Stage 2."},"m.relates_to":{"event_id":"$vrefnSWy6HfswECvv6YVOe6t4xJ4o_t42jh6pKOfZdo","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.text":" * I propose that I repurpose the slot I’ve reserved for compartments to deliver a module harmony report, based on where we are as of this morning. My impression is that we need more work on module harmony before we have a proposal that can advance to Stage 2."},"ts":1657136122467,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$bgPBE4D8k0RIHTFteOrpKr1wgLu4ObwZCuZy6Pjxn1A"},
{"content":{"body":" * By the shared foundation, I mean the additions to the abstract module record hierarchy on which we all likely depend.","m.new_content":{"body":"By the shared foundation, I mean the additions to the abstract module record hierarchy on which we all likely depend.","msgtype":"m.text","org.matrix.msc1767.text":"By the shared foundation, I mean the additions to the abstract module record hierarchy on which we all likely depend."},"m.relates_to":{"event_id":"$GDOl3L5G6OP1a1ElhhaPHxfvhpTuBj3i1XjmqpEhPyk","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.text":" * By the shared foundation, I mean the additions to the abstract module record hierarchy on which we all likely depend."},"ts":1657136184472,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$LyFWrmt_NGeH2_E7PrNlFunwl7AukHX6vTEQcxM8wSY"},
{"content":{"body":"Kris Kowal: I'm not sure we should let specification editorial details block individual proposals. As long as each proposal is semantically sound, and we are tackling the shared interaction problems, I don't think we need to converge on sharing exact spec text between proposals especially at this stage.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@kriskowal:matrix.org\">Kris Kowal</a>: I'm not sure we should let specification editorial details block individual proposals. As long as each proposal is semantically sound, and we are tackling the shared interaction problems, I don't think we need to converge on sharing exact spec text between proposals especially at this stage.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Kris Kowal: I'm not sure we should let specification editorial details block individual proposals. As long as each proposal is semantically sound, and we are tackling the shared interaction problems, I don't think we need to converge on sharing exact spec text between proposals especially at this stage.","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@kriskowal:matrix.org\">Kris Kowal</a>: I'm not sure we should let specification editorial details block individual proposals. As long as each proposal is semantically sound, and we are tackling the shared interaction problems, I don't think we need to converge on sharing exact spec text between proposals especially at this stage.","mimetype":"text/html"}]},"ts":1657136252950,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$MAd-i-d3nsbIXMAY_fCyfgwxd8TNfHdfQXCyzr1fxLs"},
{"content":{"body":"For import reflection, I think the syntax pivot is good. I can see `import module` and `import static module`. I would be okay with `import static module` reifying the literal WASM `Module` object provided that it can be passed to a `new Module(wasmSource, importHook, importMeta)` when first-class modules come.","format":"org.matrix.custom.html","formatted_body":"For import reflection, I think the syntax pivot is good. I can see <code>import module</code> and <code>import static module</code>. I would be okay with <code>import static module</code> reifying the literal WASM <code>Module</code> object provided that it can be passed to a <code>new Module(wasmSource, importHook, importMeta)</code> when first-class modules come.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"For import reflection, I think the syntax pivot is good. I can see `import module` and `import static module`. I would be okay with `import static module` reifying the literal WASM `Module` object provided that it can be passed to a `new Module(wasmSource, importHook, importMeta)` when first-class modules come.","mimetype":"text/plain"},{"body":"For import reflection, I think the syntax pivot is good. I can see <code>import module</code> and <code>import static module</code>. I would be okay with <code>import static module</code> reifying the literal WASM <code>Module</code> object provided that it can be passed to a <code>new Module(wasmSource, importHook, importMeta)</code> when first-class modules come.","mimetype":"text/html"}]},"ts":1657136305970,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$8K5RIJn4ygbXfDPd2MG6EA8JvNG8PZallxCXLkcZcD0"},
{"content":{"body":"My understanding is that stage 2 requires tentative spec text. I’m asking that any proposal that advances have tentative spec text that is sufficient for any other module proposal to build upon.","msgtype":"m.text","org.matrix.msc1767.text":"My understanding is that stage 2 requires tentative spec text. I’m asking that any proposal that advances have tentative spec text that is sufficient for any other module proposal to build upon."},"ts":1657136400590,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$mm4GZ9ReJ436FPYqEEiYUmI89-u7eG7yYd6JugvpSxs"},
{"content":{"body":"I could be wrong. This is my first stage advancement rodeo.","msgtype":"m.text","org.matrix.msc1767.text":"I could be wrong. This is my first stage advancement rodeo."},"ts":1657136425575,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$qnCotwoHKd_YgKiKhezY6glj6FZPlecziVDNZNH8Hxg"},
{"content":{"body":"But I believe the guiding principle is right: we should not paint ourselves into a corner that would preclude advancement of other proposals, or produce avoidablee scar tissue.","msgtype":"m.text","org.matrix.msc1767.text":"But I believe the guiding principle is right: we should not paint ourselves into a corner that would preclude advancement of other proposals, or produce avoidablee scar tissue."},"ts":1657136471948,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$F7A0EJmOO6X39ytcqCv0zpKBGhUW6siDJAEASFvBvM4"},
{"content":{"body":" * But I believe the guiding principle is right: we should not paint ourselves into a corner that would preclude advancement of other proposals, or produce avoidable scar tissue.","m.new_content":{"body":"But I believe the guiding principle is right: we should not paint ourselves into a corner that would preclude advancement of other proposals, or produce avoidable scar tissue.","msgtype":"m.text","org.matrix.msc1767.text":"But I believe the guiding principle is right: we should not paint ourselves into a corner that would preclude advancement of other proposals, or produce avoidable scar tissue."},"m.relates_to":{"event_id":"$F7A0EJmOO6X39ytcqCv0zpKBGhUW6siDJAEASFvBvM4","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.text":" * But I believe the guiding principle is right: we should not paint ourselves into a corner that would preclude advancement of other proposals, or produce avoidable scar tissue."},"ts":1657136478814,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$hJuGlPrh1jWux4z242J6b9kZtLjIYf7UdYLsKZbaWyE"},
{"content":{"body":"But I’ll qualify that: spec text scar tissue does not bother me. Reified object scar tissue does.","msgtype":"m.text","org.matrix.msc1767.text":"But I’ll qualify that: spec text scar tissue does not bother me. Reified object scar tissue does."},"ts":1657136502719,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$fQHi_t8rO682X7hgGabYEhMRjKUy26_TqBF6SnoGrK4"},
{"content":{"body":"Right, although Stage 2 is not an implementation stage","msgtype":"m.text","org.matrix.msc1767.text":"Right, although Stage 2 is not an implementation stage"},"ts":1657136530007,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$BlCJNDWGPUiYGlVMfvBwiMRv1SdUOeqIwmmd9Z99c5E"},
{"content":{"body":"Only at Stage 3 does scarring start to occur!","msgtype":"m.text","org.matrix.msc1767.text":"Only at Stage 3 does scarring start to occur!"},"ts":1657136544275,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$nDZO8FTic7rwexgZX_HABIcsW-NoZoMdjCrZHC6Xt1U"},
{"content":{"body":"In our current specification we defined the mechanics of the reflection, but we have left the actual reflection object being returned to be entirely defined by the host for now","msgtype":"m.text","org.matrix.msc1767.text":"In our current specification we defined the mechanics of the reflection, but we have left the actual reflection object being returned to be entirely defined by the host for now"},"ts":1657136590411,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$NtfYUlwKHjLhHklkP0BoayEWHmU_rweus3TX9ocZlx8"},
{"content":{"body":"through a HostResolveModuleReflection hook","msgtype":"m.text","org.matrix.msc1767.text":"through a HostResolveModuleReflection hook"},"ts":1657136602001,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$5CFfJCW6bY59dDJr7OXn-enRq2aK2Fm4yc2YLhmd4qc"},
{"content":{"body":"our hope is that this is clear enough for stage 2, without being too prescriptive yet","msgtype":"m.text","org.matrix.msc1767.text":"our hope is that this is clear enough for stage 2, without being too prescriptive yet"},"ts":1657136616348,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$DxkrTsJmLBwfuXNHAz1iBMF6UA9k6kNbEujjfmeqg5c"},
{"content":{"body":"we would hope to refine for stage 3 some further invariants around the resolution and exact JS reflection object","msgtype":"m.text","org.matrix.msc1767.text":"we would hope to refine for stage 3 some further invariants around the resolution and exact JS reflection object"},"ts":1657136634298,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$IfKGpDPnxjCcsFqghShp5TaEFgL05A7I9dqw9oO5WQ4"},
{"content":{"body":"but for now we just treat it as host defined","msgtype":"m.text","org.matrix.msc1767.text":"but for now we just treat it as host defined"},"ts":1657136642690,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$B6qr85RmWoYufWA_lkXXoo-OfZSj7z76YbWYbzOXG0A"},
{"content":{"body":"I would be interested to hear if that mitigates your concerns, the spec text PR is up at https://github.com/tc39/proposal-import-reflection/pull/21 and should be landing soon","msgtype":"m.text","org.matrix.msc1767.text":"I would be interested to hear if that mitigates your concerns, the spec text PR is up at https://github.com/tc39/proposal-import-reflection/pull/21 and should be landing soon"},"ts":1657136675315,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$_LXZyET_KPEirlRiZe8yz8oQBkWi8qOp7OxB7mVLFxI"},
{"content":{"body":"I’ll give it a read.","msgtype":"m.text","org.matrix.msc1767.text":"I’ll give it a read."},"ts":1657136687021,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$gRnFQogQPw5t-rGYQatZDpLtNFLfXYWXfv2m87sH1Ac"},
{"content":{"body":"The invariant I would hope to preserve would be `new Module(x, …rest)` would work for any `x` reflected by `import static module ...`.","format":"org.matrix.custom.html","formatted_body":"The invariant I would hope to preserve would be <code>new Module(x, …rest)</code> would work for any <code>x</code> reflected by <code>import static module ...</code>.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"The invariant I would hope to preserve would be `new Module(x, …rest)` would work for any `x` reflected by `import static module ...`.","mimetype":"text/plain"},{"body":"The invariant I would hope to preserve would be <code>new Module(x, …rest)</code> would work for any <code>x</code> reflected by <code>import static module ...</code>.","mimetype":"text/html"}]},"ts":1657136726526,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$y_f0LlPJHvNdCqDzI8T6JAVnW7uzEx8KONDBoCwlVcQ"},
{"content":{"body":"And I would cut it as fine as differentiating `import module` from `import module static`.","format":"org.matrix.custom.html","formatted_body":"And I would cut it as fine as differentiating <code>import module</code> from <code>import module static</code>.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"And I would cut it as fine as differentiating `import module` from `import module static`.","mimetype":"text/plain"},{"body":"And I would cut it as fine as differentiating <code>import module</code> from <code>import module static</code>.","mimetype":"text/html"}]},"ts":1657136753729,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$6_fadF0OFKbRUusHi8WDvsFN1NqNlC9mk_xnEh2T0vA"},
{"content":{"body":"I think it is important that `import module x from 'x.any'` should always produce `x instanceof Module` whereas there’re more degrees of freedom for `import static module x from 'x.any'`.","format":"org.matrix.custom.html","formatted_body":"I think it is important that <code>import module x from 'x.any'</code> should always produce <code>x instanceof Module</code> whereas there’re more degrees of freedom for <code>import static module x from 'x.any'</code>.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"I think it is important that `import module x from 'x.any'` should always produce `x instanceof Module` whereas there’re more degrees of freedom for `import static module x from 'x.any'`.","mimetype":"text/plain"},{"body":"I think it is important that <code>import module x from 'x.any'</code> should always produce <code>x instanceof Module</code> whereas there’re more degrees of freedom for <code>import static module x from 'x.any'</code>.","mimetype":"text/html"}]},"ts":1657136829639,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$y915Wg31uV3RPNsAFTcyY89F19R2JrMWWele79RYOA8"},
{"content":{"body":"as mentioned in the meeting, we are only interested in the `import module` being the `import static module` case you describe","format":"org.matrix.custom.html","formatted_body":"as mentioned in the meeting, we are only interested in the <code>import module</code> being the <code>import static module</code> case you describe","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"as mentioned in the meeting, we are only interested in the `import module` being the `import static module` case you describe","mimetype":"text/plain"},{"body":"as mentioned in the meeting, we are only interested in the <code>import module</code> being the <code>import static module</code> case you describe","mimetype":"text/html"}]},"ts":1657136846843,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$X9VxWn18VzdwWrVfhSQk8JGZuNu7as-ZQspEL-GznJM"},
{"content":{"body":"I’m interested in both existing.","msgtype":"m.text","org.matrix.msc1767.text":"I’m interested in both existing."},"ts":1657136861074,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$VsoN6GpguNBrKv2OGDm2w_vY-437792udNLDZ1lhGqU"},
{"content":{"body":"we don't have a use case for the module instance reflection","msgtype":"m.text","org.matrix.msc1767.text":"we don't have a use case for the module instance reflection"},"ts":1657136861815,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$dkTrzrKKokLyi9ysEVugJKVMidkj4Df3v6dxR2hDORA"},
{"content":{"body":"Deferred execution is the motivating case for module instance reflection.","msgtype":"m.text","org.matrix.msc1767.text":"Deferred execution is the motivating case for module instance reflection."},"ts":1657136877458,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$aULs1U5HhIB4fp9a4j1SeVZQ8YFkl8jP1Tqt6pgXOLA"},
{"content":{"body":"specifically - what would the import hook be for an implicit instance reflection?","msgtype":"m.text","org.matrix.msc1767.text":"specifically - what would the import hook be for an implicit instance reflection?"},"ts":1657136885160,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$imM0mvINOmQmKYdOixnSMcBRvvxGP7R14R4meJsjqHo"},
{"content":{"body":"deferred execution is not a use case of reflection either, and we have mentioned before this is separate specification work","msgtype":"m.text","org.matrix.msc1767.text":"deferred execution is not a use case of reflection either, and we have mentioned before this is separate specification work"},"ts":1657136919833,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$vhGYjtEQIBKFmrtcrkuC0aD5mD9glPOREmBJPX0x9yY"},
{"content":{"body":"import instance reflection would inherit the surrounding module instance’s import hook.","msgtype":"m.text","org.matrix.msc1767.text":"import instance reflection would inherit the surrounding module instance’s import hook."},"ts":1657136931661,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$B1nXGY3Zz81JVbXwUEN9Mnrfozr2JaJLpJi4fQMDMUc"},
{"content":{"body":"In my current mental model, these occupy overlapping syntactic space that should be coherent when we have solutions to both problems.","msgtype":"m.text","org.matrix.msc1767.text":"In my current mental model, these occupy overlapping syntactic space that should be coherent when we have solutions to both problems."},"ts":1657136977897,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$bGavyQCdeXVKbX9NRFZ_ZirR2OFzJRpZqQbKCNWdj6g"},
{"content":{"body":"it sounds very much like a deferred import","msgtype":"m.text","org.matrix.msc1767.text":"it sounds very much like a deferred import"},"ts":1657136987079,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$X8FD7ADlAqT-0Bg0Cot6cOihZLd4QwpFXzhF1tYtn84"},
{"content":{"body":"It is.","msgtype":"m.text","org.matrix.msc1767.text":"It is."},"ts":1657136991555,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$X3WgV5wDt3dxlwroT0kUlGzQrH1_eEyovU7rJDYycJc"},
{"content":{"body":"That is Yulias area not ours","msgtype":"m.text","org.matrix.msc1767.text":"That is Yulias area not ours"},"ts":1657136998888,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$l3N5bSt2jtCz44KXOJbfNgBeKpEK0yoJXJai0vRhM60"},
{"content":{"body":"I think it can be achieved but it is a separate specification to what we are working on with module reflection","msgtype":"m.text","org.matrix.msc1767.text":"I think it can be achieved but it is a separate specification to what we are working on with module reflection"},"ts":1657137024947,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$CwzIUyRAzCWzyLPu88ZbslSu7w2MXalufTnYszEvqC0"},
{"content":{"body":"\"reflection\" by its nature is about a higher order import","msgtype":"m.text","org.matrix.msc1767.text":"\"reflection\" by its nature is about a higher order import"},"ts":1657137032196,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$UlzS_jKxKwwAkUK9WMDd4xUCJg52Ka9xD9-9R2ublYA"},
{"content":{"body":"not an instance import","msgtype":"m.text","org.matrix.msc1767.text":"not an instance import"},"ts":1657137034997,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$HC32fybFHp09skRmBgL1PFk_ETc-zAHGu1pHE67TUd8"},
{"content":{"body":"I do not mean to suggest that your proposal should solve both motivating use cases.","msgtype":"m.text","org.matrix.msc1767.text":"I do not mean to suggest that your proposal should solve both motivating use cases."},"ts":1657137052573,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$2jEhThttKcfF3OR_tOpEcEAzE_-iRN-hAK6dPZiwSjI"},
{"content":{"body":"I do suggest that we are responsible for ensuring that these merge without conflict.","msgtype":"m.text","org.matrix.msc1767.text":"I do suggest that we are responsible for ensuring that these merge without conflict."},"ts":1657137067454,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$JQqBbiCTfcVoB__bT-6JwosVlEQ_ddThmZiIe_k844I"},
{"content":{"body":"it is our collective responsibility to not conflict eachother yes :)","msgtype":"m.text","org.matrix.msc1767.text":"it is our collective responsibility to not conflict eachother yes :)"},"ts":1657137096073,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$OPNM91h9Okuo0bpXKxNUFzH0qmUgiyhk5fLBcU4989E"},
{"content":{"body":"I suggest that in the end we should have syntax for both cases.","msgtype":"m.text","org.matrix.msc1767.text":"I suggest that in the end we should have syntax for both cases."},"ts":1657137097690,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$qc0cVyvZzftYRnrxg_v4Z123sOqm8HcLiFYqxhHBUxs"},
{"content":{"body":"that's fine, and nothing is precluded","msgtype":"m.text","org.matrix.msc1767.text":"that's fine, and nothing is precluded"},"ts":1657137123680,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$rH1cLYLKPqARoqhVa2pIpF5A6DtF-M8dm6BeCIIIKK4"},
{"content":{"body":"specifically we have further constrained import reflection to module import reflection","msgtype":"m.text","org.matrix.msc1767.text":"specifically we have further constrained import reflection to module import reflection"},"ts":1657137145221,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$lawQl046HCdXbD8qEpAd0MV-xyrbK3doKeKfnC1enr4"},
{"content":{"body":"other proposals for other types of imports like assets or deferred execution can easily coexist","msgtype":"m.text","org.matrix.msc1767.text":"other proposals for other types of imports like assets or deferred execution can easily coexist"},"ts":1657137171516,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$GFpce3_QD_ol656dirYuXMC71s28bH9Lovhd14yLB_8"},
{"content":{"body":"`import module x from 'x.js'` meaning x instanceof `WASM.Module` would preclude `import module x from 'x.js'` alternately meaning `x instanceof Module`.","format":"org.matrix.custom.html","formatted_body":"<code>import module x from 'x.js'</code> meaning x instanceof <code>WASM.Module</code> would preclude <code>import module x from 'x.js'</code> alternately meaning <code>x instanceof Module</code>.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"`import module x from 'x.js'` meaning x instanceof `WASM.Module` would preclude `import module x from 'x.js'` alternately meaning `x instanceof Module`.","mimetype":"text/plain"},{"body":"<code>import module x from 'x.js'</code> meaning x instanceof <code>WASM.Module</code> would preclude <code>import module x from 'x.js'</code> alternately meaning <code>x instanceof Module</code>.","mimetype":"text/html"}]},"ts":1657137174094,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$Uo-V8gtxkhhV5U5L5vcsKqcDhPaxmyrYx77odHfZTHQ"},
{"content":{"body":"right but it doesn't preclude `import defer x from 'x.js'`","format":"org.matrix.custom.html","formatted_body":"right but it doesn't preclude <code>import defer x from 'x.js'</code>","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"right but it doesn't preclude `import defer x from 'x.js'`","mimetype":"text/plain"},{"body":"right but it doesn't preclude <code>import defer x from 'x.js'</code>","mimetype":"text/html"}]},"ts":1657137187575,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$qIrw-bLbUWuMp3KsTwNi-mT4PZQI40Ky8hlfYie6DnM"},
{"content":{"body":"I agree that is possible.","msgtype":"m.text","org.matrix.msc1767.text":"I agree that is possible."},"ts":1657137202366,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$XcRXeP7zff1SRF_Cou9i23U7ldRb4mQb8nZRAB_A8ss"},
{"content":{"body":"In a universe with both, are we creating another footnote in WAT.js?","msgtype":"m.text","org.matrix.msc1767.text":"In a universe with both, are we creating another footnote in WAT.js?"},"ts":1657137231490,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$Wc39-U6IsFw0JE2iHVt_8p1ohxqy_B21M_a41LGD2aI"},
{"content":{"body":"if there is issue with the `module` term not being clear enough, we can consider other options","format":"org.matrix.custom.html","formatted_body":"if there is issue with the <code>module</code> term not being clear enough, we can consider other options","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"if there is issue with the `module` term not being clear enough, we can consider other options","mimetype":"text/plain"},{"body":"if there is issue with the <code>module</code> term not being clear enough, we can consider other options","mimetype":"text/html"}]},"ts":1657137251585,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$o92sJBEQhqFy2ZELXTjtcJ099oPpeyHlQSAwpW9kZo8"},
{"content":{"body":"the hope was too avoid too much of a bikeshed of course","msgtype":"m.text","org.matrix.msc1767.text":"the hope was too avoid too much of a bikeshed of course"},"ts":1657137259362,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$c74pwwCSalzWosJo-iiuv30LdabziYgHGa-1Z_wKq1U"},
{"content":{"body":"```\nimport module x from 'x.wasm';\nx instanceof Module; // false WAT?\n```","format":"org.matrix.custom.html","formatted_body":"<pre><code>import module x from 'x.wasm';\nx instanceof Module; // false WAT?\n</code></pre>\n","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"```\nimport module x from 'x.wasm';\nx instanceof Module; // false WAT?\n```","mimetype":"text/plain"},{"body":"<pre><code>import module x from 'x.wasm';\nx instanceof Module; // false WAT?\n</code></pre>\n","mimetype":"text/html"}]},"ts":1657137259804,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$qrql9IhIlPxG0piTsJEx0K36BQTS7jAGNakuNlKpFW0"},
{"content":{"body":"I hope we could consider this mostly aesthetic as opposed to a primary stage 2 concern","msgtype":"m.text","org.matrix.msc1767.text":"I hope we could consider this mostly aesthetic as opposed to a primary stage 2 concern"},"ts":1657137271687,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$7TAhUyXBr4pYa70of-WpbwN1SRBUxjtDJhMsbq-OPDM"},
{"content":{"body":"I’ll grant this is aesthetic. What stage do aesthetics become a concern?","msgtype":"m.text","org.matrix.msc1767.text":"I’ll grant this is aesthetic. What stage do aesthetics become a concern?"},"ts":1657137314000,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$qhJKS6-OovJVphMCPHBxGWbXnzbImcOu_UB_6135asg"},
{"content":{"body":"Soft concern for 2, hard concern for 3?","msgtype":"m.text","org.matrix.msc1767.text":"Soft concern for 2, hard concern for 3?"},"ts":1657137348931,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$UQCNIaxc3eA3gwZF2hQ_pS-C2ds8QxyJd82bBkWXfnI"},
{"content":{"body":"From what I believe, stage 2 is expected to be complete specification but can still have open questions","msgtype":"m.text","org.matrix.msc1767.text":"From what I believe, stage 2 is expected to be complete specification but can still have open questions"},"ts":1657137526093,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$Lrv_fSGCuF3m1sVCKL7J4PsDvYwQ727bdtus2HNUCqQ"},
{"content":{"body":"I’ll also grant that `import defer x from 'x.any'` has a nice ring to it.","format":"org.matrix.custom.html","formatted_body":"I’ll also grant that <code>import defer x from 'x.any'</code> has a nice ring to it.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"I’ll also grant that `import defer x from 'x.any'` has a nice ring to it.","mimetype":"text/plain"},{"body":"I’ll also grant that <code>import defer x from 'x.any'</code> has a nice ring to it.","mimetype":"text/html"}]},"ts":1657137538353,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$CzJMbm88Il-v3bRcqzIK3cqcYJm7qkmiP3MYasEmDoI"},
{"content":{"body":"we'll make sure to highlight these points, this has been useful","msgtype":"m.text","org.matrix.msc1767.text":"we'll make sure to highlight these points, this has been useful"},"ts":1657137579632,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$WkUEaGWjWUkighjHqAaYqHyEOO4wJ9iyYxng6sWp4nA"},
{"content":{"body":"I think we still have a number of foundational questions to answer, for all of the proposals we're discussing. A number of unresolved points of disagreement just came up in that meeting. I'm fine with things moving to Stage 2 as long as this is to be interpreted explicitly as \"we agree that we want to move forward as a committee in this area, and have one concrete idea of how it might work, but we're still open to resolving these foundational questions in multiple ways\"","msgtype":"m.text","org.matrix.msc1767.text":"I think we still have a number of foundational questions to answer, for all of the proposals we're discussing. A number of unresolved points of disagreement just came up in that meeting. I'm fine with things moving to Stage 2 as long as this is to be interpreted explicitly as \"we agree that we want to move forward as a committee in this area, and have one concrete idea of how it might work, but we're still open to resolving these foundational questions in multiple ways\""},"ts":1657139746505,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$h6hxAUt7_NanLCnBp5U677e3On_YJLuyOeJSnde1XFU"},
{"content":{"body":"> <@guybedford:matrix.org> From what I believe, stage 2 is expected to be complete specification but can still have open questions\n\nStage 3 is complete specification, for stage 2 you need a draft ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!RkpmGMjJtqLKXzByOT:matrix.org/$Lrv_fSGCuF3m1sVCKL7J4PsDvYwQ727bdtus2HNUCqQ?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@guybedford:matrix.org\">@guybedford:matrix.org</a><br />From what I believe, stage 2 is expected to be complete specification but can still have open questions</blockquote></mx-reply>Stage 3 is complete specification, for stage 2 you need a draft","m.relates_to":{"m.in_reply_to":{"event_id":"$Lrv_fSGCuF3m1sVCKL7J4PsDvYwQ727bdtus2HNUCqQ"}},"msgtype":"m.text"},"ts":1657139778817,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$IsvpROEi4vy3988ldw7OXi84JWjpQjzdwmbHDR1uaCc"},
{"content":{"body":"I mean, module blocks seems to be one of these proposals which has these unresolved foundational questions, and it's already at Stage 2! But this is largely because it hadn't yet occurred to us that module blocks might be referrer-less, which Caridy is now advocating","msgtype":"m.text","org.matrix.msc1767.text":"I mean, module blocks seems to be one of these proposals which has these unresolved foundational questions, and it's already at Stage 2! But this is largely because it hadn't yet occurred to us that module blocks might be referrer-less, which Caridy is now advocating"},"ts":1657139801320,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$tj8bRIIwv3BdcIouwyOTanYdKruhdFTwjAMMjQn_Wfg"},
{"content":{"body":"I don't tend to agree with people who insist that all foundational questions be addressed by Stage 2. It's just too common for us to find that we need to revisit foundational issues during Stage 2. I think it's more that, Stage 2 indicates a level of interest/resolve to work things out, together with concreteness on *some* possibility","format":"org.matrix.custom.html","formatted_body":"I don't tend to agree with people who insist that all foundational questions be addressed by Stage 2. It's just too common for us to find that we need to revisit foundational issues during Stage 2. I think it's more that, Stage 2 indicates a level of interest/resolve to work things out, together with concreteness on <em>some</em> possibility","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"I don't tend to agree with people who insist that all foundational questions be addressed by Stage 2. It's just too common for us to find that we need to revisit foundational issues during Stage 2. I think it's more that, Stage 2 indicates a level of interest/resolve to work things out, together with concreteness on *some* possibility","mimetype":"text/plain"},{"body":"I don't tend to agree with people who insist that all foundational questions be addressed by Stage 2. It's just too common for us to find that we need to revisit foundational issues during Stage 2. I think it's more that, Stage 2 indicates a level of interest/resolve to work things out, together with concreteness on <em>some</em> possibility","mimetype":"text/html"}]},"ts":1657139855721,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$g0AYMYI5VbOVYTplVIKJxfgOgWenOTunXcvGyf5YaH0"},
{"content":{"body":"the bikeshed is definitely not a Stage 2 blocker","msgtype":"m.text","org.matrix.msc1767.text":"the bikeshed is definitely not a Stage 2 blocker"},"ts":1657139871214,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$cDbqlG55YPkecYES41WSVNMXOyyaGnyiNWJ19vmRk7A"},
{"content":{"body":"I think we should at least wait until Yulia is back to conclude that deferred module evaluation is separate from Guy's and Luca's proposal. I've heard multiple suggestions that these are really the same space. So if Stage 2 were to be taken to mean, \"these are definitely separate\"... I wouldn't be ready to say that yet.","msgtype":"m.text","org.matrix.msc1767.text":"I think we should at least wait until Yulia is back to conclude that deferred module evaluation is separate from Guy's and Luca's proposal. I've heard multiple suggestions that these are really the same space. So if Stage 2 were to be taken to mean, \"these are definitely separate\"... I wouldn't be ready to say that yet."},"ts":1657139942468,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$Y7dThN_JCbOcGvoup__AWryjgaoZ5DIME7PomR_GXlo"},
{"content":{"body":"Concretely, I hope we can all get more space to decide whether module blocks and reflective modules are ModuleSource or Module values. My expectation was that they were both Module, but Guy was proposing that reflective modules be ModuleSource, and Caridy was proposing that module blocks be ModuleSource","msgtype":"m.text","org.matrix.msc1767.text":"Concretely, I hope we can all get more space to decide whether module blocks and reflective modules are ModuleSource or Module values. My expectation was that they were both Module, but Guy was proposing that reflective modules be ModuleSource, and Caridy was proposing that module blocks be ModuleSource"},"ts":1657140065854,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$5D-kruRlH0if7lHMLNOqI0IxqsQkG_3IN7Zwh9PZZjA"},
{"content":{"body":"I think we can iterate here after Stage 2 but before Stage 3","msgtype":"m.text","org.matrix.msc1767.text":"I think we can iterate here after Stage 2 but before Stage 3"},"ts":1657140077273,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$2CJLfJo1MViKWpEuoF9Ruk0-ZUnkXgET8NpaG5V-feg"},
{"content":{"body":" * I think we can iterate on this question after Stage 2 but before Stage 3","m.new_content":{"body":"I think we can iterate on this question after Stage 2 but before Stage 3","msgtype":"m.text","org.matrix.msc1767.text":"I think we can iterate on this question after Stage 2 but before Stage 3"},"m.relates_to":{"event_id":"$2CJLfJo1MViKWpEuoF9Ruk0-ZUnkXgET8NpaG5V-feg","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.text":" * I think we can iterate on this question after Stage 2 but before Stage 3"},"ts":1657140087307,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$kcfOe4aDE9SA7WAKL7hLysr0n8Z3VJneAGtE7q04CdU"},
{"content":{"body":"I was disappointed that asset references fell out of what Guy and Luca are proposing initially. I'd be interested in hearing more about what's behind that decision, and how soon you'd like to follow up with asset references, since they seem quite useful.","msgtype":"m.text","org.matrix.msc1767.text":"I was disappointed that asset references fell out of what Guy and Luca are proposing initially. I'd be interested in hearing more about what's behind that decision, and how soon you'd like to follow up with asset references, since they seem quite useful."},"ts":1657140197831,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$IfhOBt_kdep01c0WIYqOZuovFu57pF83yqen3CIl--g"},
{"content":{"body":"guybedford: Luca Casonato I'd be happy to have a call with you some time soon to discuss all this more if you're interested","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@guybedford:matrix.org\">guybedford</a>: <a href=\"https://matrix.to/#/@lucacasonato:matrix.org\">Luca Casonato</a> I'd be happy to have a call with you some time soon to discuss all this more if you're interested","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"guybedford: Luca Casonato I'd be happy to have a call with you some time soon to discuss all this more if you're interested","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@guybedford:matrix.org\">guybedford</a>: <a href=\"https://matrix.to/#/@lucacasonato:matrix.org\">Luca Casonato</a> I'd be happy to have a call with you some time soon to discuss all this more if you're interested","mimetype":"text/html"}]},"ts":1657140734399,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$TnhNKupA8LMOTMonIn6BBAemE11r8nAKbCmMS17s9I0"},
{"content":{"body":"Same","msgtype":"m.text","org.matrix.msc1767.text":"Same"},"ts":1657144526362,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$GwOXFFQU1W-zE9AUy_QTwrHKV1Ph0N2A23JLvKgIbzw"},
{"content":{"body":"And I’m putting together a review to call out at least where I think we’re headed tentatively where it doesn’t match. Emphasis on tentative.","msgtype":"m.text","org.matrix.msc1767.text":"And I’m putting together a review to call out at least where I think we’re headed tentatively where it doesn’t match. Emphasis on tentative."},"ts":1657144566763,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$wnMvfjnDL1CqdVhDkJ8a9wWqUr6G7fJneDGeT4_4Eko"},
{"content":{"body":"If I read the room right, I should hurry up and put together some spec text for first class modules (Module and ModuleSource) and shoot for the two.","msgtype":"m.text","org.matrix.msc1767.text":"If I read the room right, I should hurry up and put together some spec text for first class modules (Module and ModuleSource) and shoot for the two."},"ts":1657144612905,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$SXa9BVS7E8rdssqA9cUYHyQf2fiOLCe92cMnnJ1pYhc"},
{"content":{"body":"And I think Caridy and I both suggest `module {} instanceof Module` and `static module {} instanceof ModuleSource`. Serializing ModuleSource is uncontroversial. Serializing Module is controversial. By the end of the call, I think we had agreement that Module, if serializable, is intentionally cherry picking the serializable subset of the instance. However, Caridy, Guy, Shu, and I all have misgivings. I have made peace with my misgivings.","format":"org.matrix.custom.html","formatted_body":"And I think Caridy and I both suggest <code>module {} instanceof Module</code> and <code>static module {} instanceof ModuleSource</code>. Serializing ModuleSource is uncontroversial. Serializing Module is controversial. By the end of the call, I think we had agreement that Module, if serializable, is intentionally cherry picking the serializable subset of the instance. However, Caridy, Guy, Shu, and I all have misgivings. I have made peace with my misgivings.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"And I think Caridy and I both suggest `module {} instanceof Module` and `static module {} instanceof ModuleSource`. Serializing ModuleSource is uncontroversial. Serializing Module is controversial. By the end of the call, I think we had agreement that Module, if serializable, is intentionally cherry picking the serializable subset of the instance. However, Caridy, Guy, Shu, and I all have misgivings. I have made peace with my misgivings.","mimetype":"text/plain"},{"body":"And I think Caridy and I both suggest <code>module {} instanceof Module</code> and <code>static module {} instanceof ModuleSource</code>. Serializing ModuleSource is uncontroversial. Serializing Module is controversial. By the end of the call, I think we had agreement that Module, if serializable, is intentionally cherry picking the serializable subset of the instance. However, Caridy, Guy, Shu, and I all have misgivings. I have made peace with my misgivings.","mimetype":"text/html"}]},"ts":1657144943610,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$UX-NVjmRZhYV5WYTSVo3joQv5vYuaXArB1BoJeY09TM"},
{"content":{"body":"My feeling is that trusting the sender and receiver to have identical importHook behavior is possible but fragile. But, if we have blocks, static blocks, `Module` and `ModuleSource` to work with, I think that the ecosystem will have everything it needs to come up with more sensible protocols for sending modules to workers.","format":"org.matrix.custom.html","formatted_body":"My feeling is that trusting the sender and receiver to have identical importHook behavior is possible but fragile. But, if we have blocks, static blocks, <code>Module</code> and <code>ModuleSource</code> to work with, I think that the ecosystem will have everything it needs to come up with more sensible protocols for sending modules to workers.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"My feeling is that trusting the sender and receiver to have identical importHook behavior is possible but fragile. But, if we have blocks, static blocks, `Module` and `ModuleSource` to work with, I think that the ecosystem will have everything it needs to come up with more sensible protocols for sending modules to workers.","mimetype":"text/plain"},{"body":"My feeling is that trusting the sender and receiver to have identical importHook behavior is possible but fragile. But, if we have blocks, static blocks, <code>Module</code> and <code>ModuleSource</code> to work with, I think that the ecosystem will have everything it needs to come up with more sensible protocols for sending modules to workers.","mimetype":"text/html"}]},"ts":1657145108714,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$pcrozUCqlo8e3M0XKHTzQindBjI_Jr2v5kBTKYZAPMs"},
{"content":{"body":"That is to say, I predict that `worker.import(module {})` will look good in examples but will otherwise have limited utility. But, that’s okay with me.","format":"org.matrix.custom.html","formatted_body":"That is to say, I predict that <code>worker.import(module {})</code> will look good in examples but will otherwise have limited utility. But, that’s okay with me.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"That is to say, I predict that `worker.import(module {})` will look good in examples but will otherwise have limited utility. But, that’s okay with me.","mimetype":"text/plain"},{"body":"That is to say, I predict that <code>worker.import(module {})</code> will look good in examples but will otherwise have limited utility. But, that’s okay with me.","mimetype":"text/html"}]},"ts":1657145239410,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$Xz8Gr8YONZomurI2hAv_GUVd7f2XBXNwpHvVGKBCVzc"},
{"content":{"body":"@littledan thanks for the feedback, we see module reflection as laying down an approach that asset reflection and deferred execution can follow in, as opposed to the original more abstract view of a generical mechanic. Trying to be practical and use case focused while treating generalization as a possibility but not to over-generalize. We are keen to see asset references and deferred module loading move forward, we are just trying to focus our efforts in a way that keeps scope clear in the staging process. We currently are underspecifying what exactly the shape of the reflection object is though, and treating this as a detail to be refined as opposed to prescribing it at this point. The way we do this for now is to entirely delegate it to a host hook, then the hope for Stage 3 would be to follow-up with an exact definition for JS that will hopefully have progressed by then. We need the host hook regardless for Wasm though.","msgtype":"m.text","org.matrix.msc1767.text":"@littledan thanks for the feedback, we see module reflection as laying down an approach that asset reflection and deferred execution can follow in, as opposed to the original more abstract view of a generical mechanic. Trying to be practical and use case focused while treating generalization as a possibility but not to over-generalize. We are keen to see asset references and deferred module loading move forward, we are just trying to focus our efforts in a way that keeps scope clear in the staging process. We currently are underspecifying what exactly the shape of the reflection object is though, and treating this as a detail to be refined as opposed to prescribing it at this point. The way we do this for now is to entirely delegate it to a host hook, then the hope for Stage 3 would be to follow-up with an exact definition for JS that will hopefully have progressed by then. We need the host hook regardless for Wasm though."},"ts":1657147142649,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$jnkP4LOgeDWjVWQX11yFfm9GARo-OkptA9BWGWyZcmE"},
{"content":{"body":"all good points, will do our best to address the various nuances!","msgtype":"m.text","org.matrix.msc1767.text":"all good points, will do our best to address the various nuances!"},"ts":1657147169094,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$6J51ozIEd6k31WmX4PiglytCIjM0r2MqHU4gGokEULo"},
{"content":{"body":"Definitely agreed feedback from Yulia is needed to progress in many of these discussions at this point","msgtype":"m.text","org.matrix.msc1767.text":"Definitely agreed feedback from Yulia is needed to progress in many of these discussions at this point"},"ts":1657147192568,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$QIYFIv8org-_kTcs5EgGoKp8Hp5d6UZSXQg2fgx9_JA"},
{"content":{"body":"guybedford Am I correct that `new Module(wasmModule, importHook, importMeta)` where `wasmModule instanceof WebAssembly.Module` is a sensible way import reflection for WASM and first-class modules would compose?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@guybedford:matrix.org\">guybedford</a> Am I correct that <code>new Module(wasmModule, importHook, importMeta)</code> where <code>wasmModule instanceof WebAssembly.Module</code> is a sensible way import reflection for WASM and first-class modules would compose?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"guybedford Am I correct that `new Module(wasmModule, importHook, importMeta)` where `wasmModule instanceof WebAssembly.Module` is a sensible way import reflection for WASM and first-class modules would compose?","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@guybedford:matrix.org\">guybedford</a> Am I correct that <code>new Module(wasmModule, importHook, importMeta)</code> where <code>wasmModule instanceof WebAssembly.Module</code> is a sensible way import reflection for WASM and first-class modules would compose?","mimetype":"text/html"}]},"ts":1657147435520,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$5FuBVLKA-K54BFYCTP6KBZGjF7tiwoI-4qHPrKbhVyg"},
{"content":{"body":"That implies that the WASM module can both import and export.","msgtype":"m.text","org.matrix.msc1767.text":"That implies that the WASM module can both import and export."},"ts":1657147456523,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$nWjT-ZdsjxjsWHEXAeTgmq3Q49g7dLjboIxTXBIuSi0"},
{"content":{"body":"Or is it only sensible to link WASM modules manually?","msgtype":"m.text","org.matrix.msc1767.text":"Or is it only sensible to link WASM modules manually?"},"ts":1657147482370,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$Auzzn-rAx9eFoxDDmQR-JesqgTTS0NXX1rU87Gn6DRg"},
{"content":{"body":"Kris Kowal: that is definitely an option, and something to be discussed further","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@kriskowal:matrix.org\">Kris Kowal</a>: that is definitely an option, and something to be discussed further","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Kris Kowal: that is definitely an option, and something to be discussed further","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@kriskowal:matrix.org\">Kris Kowal</a>: that is definitely an option, and something to be discussed further","mimetype":"text/html"}]},"ts":1657147484384,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$nwg4WYNucBnnlbE5D7sdatZHJlyrk3isCicRHDgmST4"},
{"content":{"body":"We don't currently have a strong opinion on this","msgtype":"m.text","org.matrix.msc1767.text":"We don't currently have a strong opinion on this"},"ts":1657147509999,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$DpBA4sD1nyb15oK7GDC9OnDz80PlPKr86I3nmF3kWIQ"},
{"content":{"body":"definitely keen for more feedback","msgtype":"m.text","org.matrix.msc1767.text":"definitely keen for more feedback"},"ts":1657147516105,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$14yoiPXxf0RRNOIP5K41wYNFrHi_hG__hgWF3ou0Tg0"},
{"content":{"body":"I would say that is less an option and more a requirement, in my opinion.","msgtype":"m.text","org.matrix.msc1767.text":"I would say that is less an option and more a requirement, in my opinion."},"ts":1657147535338,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$uyhh5bHWi-ftVsaPgaT_pkODUm1D9Z-oHzvkE_3tLvo"},
{"content":{"body":"Unless web assembly modules are indeed merely resources.","msgtype":"m.text","org.matrix.msc1767.text":"Unless web assembly modules are indeed merely resources."},"ts":1657147561337,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$sQE9n374tl5G_BNKQu5YvTEJ4Qfs9xsBtYi0HD_IgYo"},
{"content":{"body":"And I think that decision pivots on whether there’s one or more sensible ways to interpret WASM as a participant in a module graph.","msgtype":"m.text","org.matrix.msc1767.text":"And I think that decision pivots on whether there’s one or more sensible ways to interpret WASM as a participant in a module graph."},"ts":1657147632831,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$DCvlv3p1W7c2wE1FeYUyPMNuNlYGhW1xPd9rFgDKGWw"},
{"content":{"body":"If there’s more than one way, I would lean more in the “web assembly modules are assets / resources that we want vetted for CSP, but require further programming to participate in a JS module graph” direction.","msgtype":"m.text","org.matrix.msc1767.text":"If there’s more than one way, I would lean more in the “web assembly modules are assets / resources that we want vetted for CSP, but require further programming to participate in a JS module graph” direction."},"ts":1657147736629,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$n4c3ZiNe8A11ghlRZWiAMKUHUz1dUs9t8nv4zf6mjlo"},
{"content":{"body":"But if there’s one way that always works, I’d lean more toward putting them on equal footing with *static* module blocks and `ModuleSource` instances.","format":"org.matrix.custom.html","formatted_body":"But if there’s one way that always works, I’d lean more toward putting them on equal footing with <em>static</em> module blocks and <code>ModuleSource</code> instances.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"But if there’s one way that always works, I’d lean more toward putting them on equal footing with *static* module blocks and `ModuleSource` instances.","mimetype":"text/plain"},{"body":"But if there’s one way that always works, I’d lean more toward putting them on equal footing with <em>static</em> module blocks and <code>ModuleSource</code> instances.","mimetype":"text/html"}]},"ts":1657147791672,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$AaAI8VKEZRpNGuYrRQUhqYK5psNRUpWZU9HotEBLCMw"},
{"content":{"body":"From a loader perspective - if we used synthetic module wrappers that would involve using dynamic import to reentrantly load the dependencies. By making Wasm first-class module records they could participate in the module graph equally in the same execution algorithm as opposed to being treated as having reentrant dependencies which would otherwise deadlock for cycles","msgtype":"m.text","org.matrix.msc1767.text":"From a loader perspective - if we used synthetic module wrappers that would involve using dynamic import to reentrantly load the dependencies. By making Wasm first-class module records they could participate in the module graph equally in the same execution algorithm as opposed to being treated as having reentrant dependencies which would otherwise deadlock for cycles"},"ts":1657147985573,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$ptns1TTjMddhJs-gdb7qIvsP482YJTemOpyEPkfJkn8"},
{"content":{"body":"Wasm doesn't strictly need cycles, but the point stands that it would involve user instrumentation for loader support using reentrant dynamic imports that could deadlock","msgtype":"m.text","org.matrix.msc1767.text":"Wasm doesn't strictly need cycles, but the point stands that it would involve user instrumentation for loader support using reentrant dynamic imports that could deadlock"},"ts":1657148024050,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$-ujyzFhDGGfkElMkefQhg0Oh9L2i7TmibP73rOCidhE"},
{"content":{"body":"a lot of the questions are about expectations and how much work they will be to support in loaders certainly","msgtype":"m.text","org.matrix.msc1767.text":"a lot of the questions are about expectations and how much work they will be to support in loaders certainly"},"ts":1657148055961,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$nc_UGLvTNFI9gf2BYNVjni-ftoNu24L8V8hm3hH0JJw"},
{"content":{"body":"That’s a lot to unpack.","msgtype":"m.text","org.matrix.msc1767.text":"That’s a lot to unpack."},"ts":1657148066104,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$9Yd0fl1tmN-wZzEkrJFJQLMHCff_ebfbrzwpeI80g3U"},
{"content":{"body":"I don’t think literal deadlock is on the table in any framing.","msgtype":"m.text","org.matrix.msc1767.text":"I don’t think literal deadlock is on the table in any framing."},"ts":1657148099450,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$Eh0nFxWIHR9ovfuMQtr2F0iAZdpCWbEvKfaouOPPf9U"},
{"content":{"body":"I also don’t think reentrance is on the table.","msgtype":"m.text","org.matrix.msc1767.text":"I also don’t think reentrance is on the table."},"ts":1657148139944,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$uLmr-zsMxsJ493EPB62pTXnVeQp13ajjQbLGpOsWTWM"},
{"content":{"body":"importHooks are recursive but non-reentrant. They would only run under dynamic import during the load phase, for growing the working set of module records.","msgtype":"m.text","org.matrix.msc1767.text":"importHooks are recursive but non-reentrant. They would only run under dynamic import during the load phase, for growing the working set of module records."},"ts":1657148223419,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$ONw-SUBEHGGTMlb6f-mD6W5-dWrFjNBTMLox5WzOvS8"},
{"content":{"body":"I think WASM modules being inherently acyclic is handy, but I also think it’s possible to fully virtualize even ESM, including cycles.","msgtype":"m.text","org.matrix.msc1767.text":"I think WASM modules being inherently acyclic is handy, but I also think it’s possible to fully virtualize even ESM, including cycles."},"ts":1657148296596,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$GkO27N5ZX7apfmxZ7BKJuP9m7zjYiEq-rLvvbEl0HEM"},
{"content":{"body":"There are a bunch of complexities making them first class to delve into, perhaps we can go through the exercise some time","msgtype":"m.text","org.matrix.msc1767.text":"There are a bunch of complexities making them first class to delve into, perhaps we can go through the exercise some time"},"ts":1657148499273,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$SKjgeQwQzT3BILGKb_cA6cB8ZMm-xONZxmm_D1COL-M"},
{"content":{"body":"I think we agree actually that WASM modules _ideally_ participate in module graphs on equal footing with module sources. But, if there’s no sensible default behavior, virtualized module sources are certainly option. Caridy would point out though that virtual module sources don’t serialize and probably would also lose their CSP metadata.","format":"org.matrix.custom.html","formatted_body":"I think we agree actually that WASM modules <em>ideally</em> participate in module graphs on equal footing with module sources. But, if there’s no sensible default behavior, virtualized module sources are certainly option. Caridy would point out though that virtual module sources don’t serialize and probably would also lose their CSP metadata.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"I think we agree actually that WASM modules _ideally_ participate in module graphs on equal footing with module sources. But, if there’s no sensible default behavior, virtualized module sources are certainly option. Caridy would point out though that virtual module sources don’t serialize and probably would also lose their CSP metadata.","mimetype":"text/plain"},{"body":"I think we agree actually that WASM modules <em>ideally</em> participate in module graphs on equal footing with module sources. But, if there’s no sensible default behavior, virtualized module sources are certainly option. Caridy would point out though that virtual module sources don’t serialize and probably would also lose their CSP metadata.","mimetype":"text/html"}]},"ts":1657148499824,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$kYx43LMHIE-BokTWmvFmAC32JF7AnRsSMOFUxMUAgAU"},
{"content":{"body":"definitely could workshop some example workflows around loader instrumentation and Wasm","msgtype":"m.text","org.matrix.msc1767.text":"definitely could workshop some example workflows around loader instrumentation and Wasm"},"ts":1657148534310,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$-T6DcMN4ZvxHFfWbZ_8jCEDztW_0viHL1NeFAitDbw4"},
{"content":{"body":"So ideally we find a good default behavior.","msgtype":"m.text","org.matrix.msc1767.text":"So ideally we find a good default behavior."},"ts":1657148538796,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$s58jBijxkIOCrjEq2P8rNvWrYQZnBcRm4XJpb4FM4ZE"},
{"content":{"body":"and work through tradeoffs","msgtype":"m.text","org.matrix.msc1767.text":"and work through tradeoffs"},"ts":1657148540143,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$0PsWOFhy-2ZOq_pqsG7-PYw3OreC3a9LUeRRkrSSn1Q"},
{"content":{"body":"ideally having Dan and Caridy present for that would help","msgtype":"m.text","org.matrix.msc1767.text":"ideally having Dan and Caridy present for that would help"},"ts":1657148552466,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$AyOUWZ7GXCRdqIyI5o7vTyrkFFD_JxUi1Co7Bd_YQZQ"},
{"content":{"body":"That would be a good exercise.","msgtype":"m.text","org.matrix.msc1767.text":"That would be a good exercise."},"ts":1657148569024,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$FwXKsLhY43g9alFrgCmAyWUD_ZYfztSN4lUNZa7iPx8"},
{"content":{"body":"I don't get the feeling it is too pressing right now","msgtype":"m.text","org.matrix.msc1767.text":"I don't get the feeling it is too pressing right now"},"ts":1657148699719,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$-SQgb6ZOPG0RnwABR9faAWlbkH98wCNzetnG_Brjj9g"},
{"content":{"body":"or needed before this coming meeting","msgtype":"m.text","org.matrix.msc1767.text":"or needed before this coming meeting"},"ts":1657148709646,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$DIj8btkQGGia2_jrABWxX2D6UwF3rLadt4W8W3QzpGY"},
{"content":{"body":"but if it's something on your critical path there happy to arrange anytime","msgtype":"m.text","org.matrix.msc1767.text":"but if it's something on your critical path there happy to arrange anytime"},"ts":1657148731439,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$ySKFRbnJ-zebn6KnvvsIN_BfSUx5JJMyAh3eGMhIzfU"},
{"content":{"body":"I think that’s necessary to answer the question of whether `WebAseembly.Module` should be reified as a module source or a resource. I’m pretty sure we need to know the answer before stage 2 since that constitutes a big difference in what you’d be proposing.","format":"org.matrix.custom.html","formatted_body":"I think that’s necessary to answer the question of whether <code>WebAseembly.Module</code> should be reified as a module source or a resource. I’m pretty sure we need to know the answer before stage 2 since that constitutes a big difference in what you’d be proposing.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"I think that’s necessary to answer the question of whether `WebAseembly.Module` should be reified as a module source or a resource. I’m pretty sure we need to know the answer before stage 2 since that constitutes a big difference in what you’d be proposing.","mimetype":"text/plain"},{"body":"I think that’s necessary to answer the question of whether <code>WebAseembly.Module</code> should be reified as a module source or a resource. I’m pretty sure we need to know the answer before stage 2 since that constitutes a big difference in what you’d be proposing.","mimetype":"text/html"}]},"ts":1657148913187,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$pW_C1G84rGkZvN3wq6ogwTQKnqH-GjuI9K-A2rUe8xw"},
{"content":{"body":" * I think that’s necessary to answer the question of whether `WebAssembly.Module` should be reified as a module source or a resource. I’m pretty sure we need to know the answer before stage 2 since that constitutes a big difference in what you’d be proposing.","format":"org.matrix.custom.html","formatted_body":" * I think that’s necessary to answer the question of whether <code>WebAssembly.Module</code> should be reified as a module source or a resource. I’m pretty sure we need to know the answer before stage 2 since that constitutes a big difference in what you’d be proposing.","m.new_content":{"body":"I think that’s necessary to answer the question of whether `WebAssembly.Module` should be reified as a module source or a resource. I’m pretty sure we need to know the answer before stage 2 since that constitutes a big difference in what you’d be proposing.","format":"org.matrix.custom.html","formatted_body":"I think that’s necessary to answer the question of whether <code>WebAssembly.Module</code> should be reified as a module source or a resource. I’m pretty sure we need to know the answer before stage 2 since that constitutes a big difference in what you’d be proposing.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"I think that’s necessary to answer the question of whether `WebAssembly.Module` should be reified as a module source or a resource. I’m pretty sure we need to know the answer before stage 2 since that constitutes a big difference in what you’d be proposing.","mimetype":"text/plain"},{"body":"I think that’s necessary to answer the question of whether <code>WebAssembly.Module</code> should be reified as a module source or a resource. I’m pretty sure we need to know the answer before stage 2 since that constitutes a big difference in what you’d be proposing.","mimetype":"text/html"}]},"m.relates_to":{"event_id":"$pW_C1G84rGkZvN3wq6ogwTQKnqH-GjuI9K-A2rUe8xw","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":" * I think that’s necessary to answer the question of whether `WebAssembly.Module` should be reified as a module source or a resource. I’m pretty sure we need to know the answer before stage 2 since that constitutes a big difference in what you’d be proposing.","mimetype":"text/plain"},{"body":" * I think that’s necessary to answer the question of whether <code>WebAssembly.Module</code> should be reified as a module source or a resource. I’m pretty sure we need to know the answer before stage 2 since that constitutes a big difference in what you’d be proposing.","mimetype":"text/html"}]},"ts":1657148955100,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$6m77B2_ChzGDyXAqywB31A7ANdw2i4ZMOYBwy6xfFY0"},
{"content":{"body":"That is, if import reflection is `import module x from 'x.wasm'`, that’s only coherent if `x` is a module source and requires no further programming to participate in a module graph.","format":"org.matrix.custom.html","formatted_body":"That is, if import reflection is <code>import module x from 'x.wasm'</code>, that’s only coherent if <code>x</code> is a module source and requires no further programming to participate in a module graph.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"That is, if import reflection is `import module x from 'x.wasm'`, that’s only coherent if `x` is a module source and requires no further programming to participate in a module graph.","mimetype":"text/plain"},{"body":"That is, if import reflection is <code>import module x from 'x.wasm'</code>, that’s only coherent if <code>x</code> is a module source and requires no further programming to participate in a module graph.","mimetype":"text/html"}]},"ts":1657149065010,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$toVcRUz6DDWRiEUNgGMgzKf-TUQFshS7PcoX8dQ_oZ8"},
{"content":{"body":"Follow-up question: Is this example coherent in your mental model:\n```\nimport module x from 'x.wasm';\nawait import(x);\n```","format":"org.matrix.custom.html","formatted_body":"<p>Follow-up question: Is this example coherent in your mental model:</p>\n<pre><code>import module x from 'x.wasm';\nawait import(x);\n</code></pre>\n","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Follow-up question: Is this example coherent in your mental model:\n```\nimport module x from 'x.wasm';\nawait import(x);\n```","mimetype":"text/plain"},{"body":"<p>Follow-up question: Is this example coherent in your mental model:</p>\n<pre><code>import module x from 'x.wasm';\nawait import(x);\n</code></pre>\n","mimetype":"text/html"}]},"ts":1657149559948,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$snGJGfOyJSR6DqmYjSD9h17dF_P2brpoMH48ZBWMnSs"},
{"content":{"body":"Oh, I know the answer already. That depends on the same exercise.","msgtype":"m.text","org.matrix.msc1767.text":"Oh, I know the answer already. That depends on the same exercise."},"ts":1657149606477,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$0WnLepPSGTsLvnRzXL_Q67agpgpDUg56x069A3xheyU"},
{"content":{"body":"yes exactly that is the question I think","msgtype":"m.text","org.matrix.msc1767.text":"yes exactly that is the question I think"},"ts":1657149772741,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$RtlKooP0cRmBMeIuwj1iPXzbE9uVC3RAmMg2gEBqj5A"},
{"content":{"body":"(I don’t think the example is coherent, but if your answer is yes, that _would_ put WASM modules on equal footing with module blocks and imply that a WebAssembly.Module is linkable without further programming.)","format":"org.matrix.custom.html","formatted_body":"(I don’t think the example is coherent, but if your answer is yes, that <em>would</em> put WASM modules on equal footing with module blocks and imply that a WebAssembly.Module is linkable without further programming.)","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"(I don’t think the example is coherent, but if your answer is yes, that _would_ put WASM modules on equal footing with module blocks and imply that a WebAssembly.Module is linkable without further programming.)","mimetype":"text/plain"},{"body":"(I don’t think the example is coherent, but if your answer is yes, that <em>would</em> put WASM modules on equal footing with module blocks and imply that a WebAssembly.Module is linkable without further programming.)","mimetype":"text/html"}]},"ts":1657149777208,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$Fg6cFZs3RLAzH1Z3j_XXCJt4YwtqrD_4YRp67EDmviw"},
{"content":{"body":"coherency is exactly the question there","msgtype":"m.text","org.matrix.msc1767.text":"coherency is exactly the question there"},"ts":1657149784894,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$Ub1mCrNzVvDxXgwBdERq5SO2_zxHZl20rLSrPbDR5DI"},
{"content":{"body":"if we want Wasm and JS to work the same","msgtype":"m.text","org.matrix.msc1767.text":"if we want Wasm and JS to work the same"},"ts":1657149790071,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$2bUelgIpyN_YH6NJOH4CrR_H9gStvHWBanuhfhRUjTQ"},
{"content":{"body":"or if there will be this difference","msgtype":"m.text","org.matrix.msc1767.text":"or if there will be this difference"},"ts":1657149794078,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$Czfy4rzZyLv3h2NVduBhl_dI8l9bwxbME_K7MCjJpoM"},
{"content":{"body":"I’m sure that your motivating use case is adequately addressed just by carrying CSP into WebAssembly.Module and never incorporating it in a JS module graph.","msgtype":"m.text","org.matrix.msc1767.text":"I’m sure that your motivating use case is adequately addressed just by carrying CSP into WebAssembly.Module and never incorporating it in a JS module graph."},"ts":1657149884550,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$OkO-8eEnO6Tb7PhTo6--v1uteJmHrrI236RT1Rg2Szs"},
{"content":{"body":"I guess it would be gross but not broken if `import module x from 'x.wasm'` was completely different than `import module y from 'y.js'`.","format":"org.matrix.custom.html","formatted_body":"I guess it would be gross but not broken if <code>import module x from 'x.wasm'</code> was completely different than <code>import module y from 'y.js'</code>.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"I guess it would be gross but not broken if `import module x from 'x.wasm'` was completely different than `import module y from 'y.js'`.","mimetype":"text/plain"},{"body":"I guess it would be gross but not broken if <code>import module x from 'x.wasm'</code> was completely different than <code>import module y from 'y.js'</code>.","mimetype":"text/html"}]},"ts":1657149969061,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$t3P0GJRhzvoVAzpIhR1BjvX1thMbcdedq6xFVuQo2_Q"},
{"content":{"body":"But if that’s the case and a WASM module can’t participate in a JS graph, you wouldn’t need anything from 262. WASM could just as well be a module that exports a CSP vetted default WebAssembly.Module.","msgtype":"m.text","org.matrix.msc1767.text":"But if that’s the case and a WASM module can’t participate in a JS graph, you wouldn’t need anything from 262. WASM could just as well be a module that exports a CSP vetted default WebAssembly.Module."},"ts":1657150051277,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$nYTZ0OVbzZqrqa8zPNmQxSDR7X8rhG7cOCSgWgSOKVI"},
{"content":{"body":"the problem is how you obtain the `WebAssembly.Module`, also this is a feature Wasm modules themselves in the ESM integration want to be able to get ahold of","format":"org.matrix.custom.html","formatted_body":"the problem is how you obtain the <code>WebAssembly.Module</code>, also this is a feature Wasm modules themselves in the ESM integration want to be able to get ahold of","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"the problem is how you obtain the `WebAssembly.Module`, also this is a feature Wasm modules themselves in the ESM integration want to be able to get ahold of","mimetype":"text/plain"},{"body":"the problem is how you obtain the <code>WebAssembly.Module</code>, also this is a feature Wasm modules themselves in the ESM integration want to be able to get ahold of","mimetype":"text/html"}]},"ts":1657151098503,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$PW-tEPlDjDB8fCBFZkIhyiMnUx0LAzie_ylj1QhPKC8"},
{"content":{"body":"Wasm wants to be able to import its own records","msgtype":"m.text","org.matrix.msc1767.text":"Wasm wants to be able to import its own records"},"ts":1657151109674,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$YTWUaPUUZ6lZwxeYfIcI1iRkUoj3isDhezBleC7kaag"},
{"content":{"body":"that's an important aspect of the component model","msgtype":"m.text","org.matrix.msc1767.text":"that's an important aspect of the component model"},"ts":1657151125845,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$L-eckEwUCJ1miLhOIFzX_fb3DGA9Or8VghXVUXk3QgU"},
{"content":{"body":"there are also further static benefits and static security benefits over arbitrary URL fetching","msgtype":"m.text","org.matrix.msc1767.text":"there are also further static benefits and static security benefits over arbitrary URL fetching"},"ts":1657151175210,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$V_G_tBTrQpHQLobYxezdLcNyRa3tyfn1hwwidUnXEqQ"},
{"content":{"body":"I’m reading https://github.com/WebAssembly/esm-integration/tree/main/proposals/esm-integration","msgtype":"m.text","org.matrix.msc1767.text":"I’m reading https://github.com/WebAssembly/esm-integration/tree/main/proposals/esm-integration"},"ts":1657151193378,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$rCDzRENiz4OsH-0dlLU6Gt9vjXYNq3nF0KesTAAKx5o"},
{"content":{"body":"See also https://github.com/WebAssembly/component-model/blob/main/design/mvp/Explainer.md#ESM-integration","msgtype":"m.text","org.matrix.msc1767.text":"See also https://github.com/WebAssembly/component-model/blob/main/design/mvp/Explainer.md#ESM-integration"},"ts":1657151225478,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$D4Qfon8IOpZnUGpk-8ZbkBv_VOwimMuLuSoC0nJEBfc"},
{"content":{"body":"Oh, wow. This depends on `as` notation.","format":"org.matrix.custom.html","formatted_body":"Oh, wow. This depends on <code>as</code> notation.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Oh, wow. This depends on `as` notation.","mimetype":"text/plain"},{"body":"Oh, wow. This depends on <code>as</code> notation.","mimetype":"text/html"}]},"ts":1657151280866,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$ZgPA6hoK1DblTtt-IEmpkgzkyuCTDd0rE5TN1vAkRf0"},
{"content":{"body":"Oh, I’m going to assume this just isn’t synced with your most recent work.","msgtype":"m.text","org.matrix.msc1767.text":"Oh, I’m going to assume this just isn’t synced with your most recent work."},"ts":1657151313999,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$X0JSD5jnhAg3T423yM7iMmXuHmekNaXWm-4iV97SzIg"},
{"content":{"body":"yes exactly","msgtype":"m.text","org.matrix.msc1767.text":"yes exactly"},"ts":1657151393818,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$MohsT8xJzgnZA7GbxJS_OjwPGLFgk5CAmY4DI9AFYqw"},
{"content":{"body":"Am I right that `esm-integration` answers the question that WASM does have a sensible way to integrate in a JS graph?","format":"org.matrix.custom.html","formatted_body":"Am I right that <code>esm-integration</code> answers the question that WASM does have a sensible way to integrate in a JS graph?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Am I right that `esm-integration` answers the question that WASM does have a sensible way to integrate in a JS graph?","mimetype":"text/plain"},{"body":"Am I right that <code>esm-integration</code> answers the question that WASM does have a sensible way to integrate in a JS graph?","mimetype":"text/html"}]},"ts":1657151431405,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$OnezLDrv3laU_IO75s7WPijjgUS2KpR0PSb14tGP4gU"},
{"content":{"body":"I’m reviewing your draft rn, and I noticed that your primary motivating case is the cases where the default integration isn’t sufficient.","msgtype":"m.text","org.matrix.msc1767.text":"I’m reviewing your draft rn, and I noticed that your primary motivating case is the cases where the default integration isn’t sufficient."},"ts":1657151479338,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$9zHhP8UcWft0nLEshchageDyA62Q6aitv2OyT3xilGE"},
{"content":{"body":"yes although the esm integration is currently awaiting our progress on reflection to move forward","msgtype":"m.text","org.matrix.msc1767.text":"yes although the esm integration is currently awaiting our progress on reflection to move forward"},"ts":1657151484734,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$KOXhjSq1Be4BIFL9Ph0gNHK19vgy27EFh_x1oMpBFd8"},
{"content":{"body":"Is it dependent?","msgtype":"m.text","org.matrix.msc1767.text":"Is it dependent?"},"ts":1657151499009,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$r5ViAAEd_Nzy5cbIjaYFozxoC16FXbdw0C1BfILaJBI"},
{"content":{"body":"in some sense the solution space is dependent in that this is what is needed ergonomically right now","msgtype":"m.text","org.matrix.msc1767.text":"in some sense the solution space is dependent in that this is what is needed ergonomically right now"},"ts":1657151525868,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$Q9eWc26Y9ITQeQYzJ36wVX4-5fj6ZfxaZGhdk5hT0VU"},
{"content":{"body":"Well, I understand your conundrum better now.","msgtype":"m.text","org.matrix.msc1767.text":"Well, I understand your conundrum better now."},"ts":1657151812306,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$pinzgJ5g8ssiVb1GoXHRPw23gv7RYXzyWdmFaC8j9q8"},
{"content":{"body":"Let’s assume `import module x from 'x.any'` produces `x` such that `x instanceof ModuleSource` and `import defer x from 'x.any'` produces `x` such that `x instanceof Module`.","format":"org.matrix.custom.html","formatted_body":"Let’s assume <code>import module x from 'x.any'</code> produces <code>x</code> such that <code>x instanceof ModuleSource</code> and <code>import defer x from 'x.any'</code> produces <code>x</code> such that <code>x instanceof Module</code>.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Let’s assume `import module x from 'x.any'` produces `x` such that `x instanceof ModuleSource` and `import defer x from 'x.any'` produces `x` such that `x instanceof Module`.","mimetype":"text/plain"},{"body":"Let’s assume <code>import module x from 'x.any'</code> produces <code>x</code> such that <code>x instanceof ModuleSource</code> and <code>import defer x from 'x.any'</code> produces <code>x</code> such that <code>x instanceof Module</code>.","mimetype":"text/html"}]},"ts":1657151907491,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$D8ArzbVJ2oIB7twj22bpZ6ExSGSD0kgQIJSVJBpsPwc"},
{"content":{"body":"there is an inferior solution the wasm folks can choose without our involvement at all, by making the default kind of thing returned by `import 'x.wasm'` a `WebAssembly.Module` instead of an instance","format":"org.matrix.custom.html","formatted_body":"there is an inferior solution the wasm folks can choose without our involvement at all, by making the default kind of thing returned by <code>import 'x.wasm'</code> a <code>WebAssembly.Module</code> instead of an instance","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"there is an inferior solution the wasm folks can choose without our involvement at all, by making the default kind of thing returned by `import 'x.wasm'` a `WebAssembly.Module` instead of an instance","mimetype":"text/plain"},{"body":"there is an inferior solution the wasm folks can choose without our involvement at all, by making the default kind of thing returned by <code>import 'x.wasm'</code> a <code>WebAssembly.Module</code> instead of an instance","mimetype":"text/html"}]},"ts":1657151921822,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$nVA1Z3x5JUsfSFSRrPV21TQCholLmgAKoaYRyXt3BYo"},
{"content":{"body":"it breaks symmetry down the road, however","msgtype":"m.text","org.matrix.msc1767.text":"it breaks symmetry down the road, however"},"ts":1657151927025,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$ZOFJ03mkKrk2J5cUWfjHLld8su5FuAO3bm2_tDavPWQ"},
{"content":{"body":"Right, I was about to propose that strawman until I started reading esm-integration, which suggests there is a reasonable default interpretation of a WASM module as it participates in a JS graph, importing and exporting.","msgtype":"m.text","org.matrix.msc1767.text":"Right, I was about to propose that strawman until I started reading esm-integration, which suggests there is a reasonable default interpretation of a WASM module as it participates in a JS graph, importing and exporting."},"ts":1657151976333,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$Um61oRoaos0HNgSJ8ZXjrR9rBclsYWV_k83XifI-b0o"}
]