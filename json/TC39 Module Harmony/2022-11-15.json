[
{"content":{"body":"I do not think my understanding of the meaning of “initialization” matches in that case, but this is an area I haven’t read 262 closely enough to speak with confidence. I interpret “link” to mean “establish connections between the module lexical scopes of a module graph such that corresponding imported and exported values refer to the same memory”. I interpret “initialize” to mean “assign initial values into the module lexical scope for hoisted imports and exports like function declarations”. I interpret “evaluate” to be the subsequent execution of the module, which is synchronous up to the first await. I’m foggy on top-level-await behavior beyond that.","msgtype":"m.text","org.matrix.msc1767.text":"I do not think my understanding of the meaning of “initialization” matches in that case, but this is an area I haven’t read 262 closely enough to speak with confidence. I interpret “link” to mean “establish connections between the module lexical scopes of a module graph such that corresponding imported and exported values refer to the same memory”. I interpret “initialize” to mean “assign initial values into the module lexical scope for hoisted imports and exports like function declarations”. I interpret “evaluate” to be the subsequent execution of the module, which is synchronous up to the first await. I’m foggy on top-level-await behavior beyond that."},"ts":1668535652556,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$4MUeveIJWJG8lwJ4Jsbd9_KC5zu3jNr9poUq2f9s6WM"},
{"content":{"body":"Please correct me where my terms don’t match the shared vernacular as writ.","msgtype":"m.text","org.matrix.msc1767.text":"Please correct me where my terms don’t match the shared vernacular as writ."},"ts":1668535704324,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$S2bwm0m1hzMB7UZl_4rOGJOxdAst_QLF0p0l-Cjvcno"},
{"content":{"body":"The spec matches your wording, except that the Initialize AO is called by the Link AO for each module (so they are interleaved processes)","msgtype":"m.text"},"ts":1668536084669,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$-7owZ51Xu0r2MbHvb80f89rD2504MKox0sC8yb0z3U4"},
{"content":{"body":"That’s good to know.","msgtype":"m.text","org.matrix.msc1767.text":"That’s good to know."},"ts":1668536589251,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$dBf6oNK09fK6K54gNBwotlIK03cIGHUKkSLayT3C2uc"},
{"content":{"body":"> <@yulia:mozilla.org> when you say \"since the module initialization of (presumably) x.js has run to completion by the time x’s namespace is seen in a new event.\" -- do you mean module evaluation? because initialization has run in the deferred case, not in the dynamic import case. Evaluation for both happens at the same point in time.\n\nAnd I think that yulia is correct that I meant evaluation, not link/init, but I’m again foggy on the ramifications of top-level-await in relation to the time that the promise returned by a dynamic import settles.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!RkpmGMjJtqLKXzByOT:matrix.org/$7vXb4_jP46zcKW4ql_rW4y9NvPn7sGtRiaQPhloRygw?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@yulia:mozilla.org\">@yulia:mozilla.org</a><br>when you say &quot;since the module initialization of (presumably) x.js has run to completion by the time x’s namespace is seen in a new event.&quot; -- do you mean module evaluation? because initialization has run in the deferred case, not in the dynamic import case. Evaluation for both happens at the same point in time. </blockquote></mx-reply>And I think that <a href=\"https://matrix.to/#/@yulia:mozilla.org\">yulia</a> is correct that I meant evaluation, not link/init, but I’m again foggy on the ramifications of top-level-await in relation to the time that the promise returned by a dynamic import settles.","m.relates_to":{"m.in_reply_to":{"event_id":"$7vXb4_jP46zcKW4ql_rW4y9NvPn7sGtRiaQPhloRygw"}},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":"> <@yulia:mozilla.org> when you say \"since the module initialization of (presumably) x.js has run to completion by the time x’s namespace is seen in a new event.\" -- do you mean module evaluation? because initialization has run in the deferred case, not in the dynamic import case. Evaluation for both happens at the same point in time.\n\nAnd I think that yulia is correct that I meant evaluation, not link/init, but I’m again foggy on the ramifications of top-level-await in relation to the time that the promise returned by a dynamic import settles.","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!RkpmGMjJtqLKXzByOT:matrix.org/$7vXb4_jP46zcKW4ql_rW4y9NvPn7sGtRiaQPhloRygw?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@yulia:mozilla.org\">@yulia:mozilla.org</a><br>when you say &quot;since the module initialization of (presumably) x.js has run to completion by the time x’s namespace is seen in a new event.&quot; -- do you mean module evaluation? because initialization has run in the deferred case, not in the dynamic import case. Evaluation for both happens at the same point in time. </blockquote></mx-reply>And I think that <a href=\"https://matrix.to/#/@yulia:mozilla.org\">yulia</a> is correct that I meant evaluation, not link/init, but I’m again foggy on the ramifications of top-level-await in relation to the time that the promise returned by a dynamic import settles.","mimetype":"text/html"}]},"ts":1668536717073,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$_Gacbt6094BHhTe34KVL7n3J4YyEEmKw9T3jp_P9e74"}
]