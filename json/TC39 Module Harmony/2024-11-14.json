[
{"content":{"body":"I'm a couple minutes late","msgtype":"m.text"},"ts":1731600016326,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$9Fxt_UxDtuAKSO86ftQcwxLHFTf7xnUag_NDkutybcc"},
{"content":{"body":"guybedford nicolo-ribaudo i took a quick look, and i might actually be able to facilitate import.meta.load(). I'm doing a quick PoC right now.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@guybedford:matrix.org\">guybedford</a> <a href=\"https://matrix.to/#/@nicolo-ribaudo:matrix.org\">nicolo-ribaudo</a> i took a quick look, and i might actually be able to facilitate import.meta.load(). I'm doing a quick PoC right now.","msgtype":"m.text"},"ts":1731603655497,"senderName":"jakobjingleheimer","senderId":"@jakobjingleheimer:matrix.org","id":"$jgFxMbOxz-nOwHhbANQR5ca8C20AfVUMm5irBanNYMQ"},
{"content":{"body":"I assume that is as much problematic to Guy as .require :P","msgtype":"m.text"},"ts":1731603824092,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$coQXguNaNAeqmOJrdU-c-ddHGgKfrGsFk4Fj1b8jB8A"},
{"content":{"body":"Why? Isn't his objection about commonjs? (import.meta.load() would use esm)","msgtype":"m.text"},"ts":1731603991846,"senderName":"jakobjingleheimer","senderId":"@jakobjingleheimer:matrix.org","id":"$4VNa1JPK4LmW0mnqJu8nkmye6kj7xcyWZyQ5Sn0ZMDk"},
{"content":{"body":"Recording and summary of today's meeting: https://app.fireflies.ai/view/TC39-Module-Harmony::qn4hiX7NVrtLJ7ax","msgtype":"m.text"},"ts":1731604012296,"senderName":"jakobjingleheimer","senderId":"@jakobjingleheimer:matrix.org","id":"$Ul17MzZHABXIJCoIMI7G_vbK8311eIbwQBhAEzZk2aE"},
{"content":{"body":"> <@jakobjingleheimer:matrix.org> Why? Isn't his objection about commonjs? (import.meta.load() would use esm)\n\nI think the objection is to it being just a function that you can grab and pass around, making it as hard to statically analyze as require calls","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!RkpmGMjJtqLKXzByOT:matrix.org/$4VNa1JPK4LmW0mnqJu8nkmye6kj7xcyWZyQ5Sn0ZMDk?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@jakobjingleheimer:matrix.org\">@jakobjingleheimer:matrix.org</a><br />Why? Isn't his objection about commonjs? (import.meta.load() would use esm)</blockquote></mx-reply>I think the objection is to it being just a function that you can grab and pass around, making it as hard to statically analyze as require calls","m.relates_to":{"m.in_reply_to":{"event_id":"$4VNa1JPK4LmW0mnqJu8nkmye6kj7xcyWZyQ5Sn0ZMDk"}},"msgtype":"m.text"},"ts":1731604093037,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$xDt5By0mb7gwen2RaTywYZRzs7p5PJuXLdY0-XxX9xU"},
{"content":{"body":"I think statically analyzable import capabilities belong in TC39","m.mentions":{},"msgtype":"m.text"},"ts":1731604455950,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$uz5zE02KYa0xW3fKJNBW5rxm9bdpVzC0AAYWl_6JrWs"},
{"content":{"body":"and `import.meta` is a dangerous place for things in general","format":"org.matrix.custom.html","formatted_body":"and <code>import.meta</code> is a dangerous place for things in general","m.mentions":{},"msgtype":"m.text"},"ts":1731604479037,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$2-5NyoGSojV_wCkVaUu2SospkOMNj7NheYoLfg-9xuE"},
{"content":{"body":"that we should have a very high bar for","m.mentions":{},"msgtype":"m.text"},"ts":1731604487654,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$qZ1VaVfMSYsQsk61jniQMwoEWgaHK7q4nTDb9IQlNA0"},
{"content":{"body":"but Node.js can have module loading helpers under its builtin modules that offer features like preloading etc for sure","m.mentions":{},"msgtype":"m.text"},"ts":1731604506660,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$bG2cnCi-g4T89rahRDdsyPSP8IUETYTEjQIwM-5q1MU"},
{"content":{"body":"just like browsers have custom preloading","m.mentions":{},"msgtype":"m.text"},"ts":1731604513371,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$g6aCmGeH5Rvw0IaCQd6iIG4BcHgPg5XMJ1BzQbcZL_Y"},
{"content":{"body":"I'd just suggest it be a `import { preload } from 'node:module'` or something like that so it's clear it's Node.js specific","format":"org.matrix.custom.html","formatted_body":"I'd just suggest it be a <code>import { preload } from 'node:module'</code> or something like that so it's clear it's Node.js specific","m.mentions":{},"msgtype":"m.text"},"ts":1731604532878,"senderName":"guybedford","senderId":"@guybedford:matrix.org","id":"$aRxsKawugYduui0WVsW5rY2J19STqzwk34l6elGmmj4"},
{"content":{"body":"Isn't import.meta that space? Also, that's where node-like runtimes are supposed to put these sorts of things.\n\nThere are cumbersome drawbacks to it being on node:module instead of import.meta. Notably:\n\nThis is possible:\nimport.meta.load('./foo.js')\n\nThis is not:\npreload('./foo.js')\n\nInstead it would have to be\npreload(import.meta.resolve('./foo.js'))\n\nOr\n\npreload('./foo.js', import.meta.url)","format":"org.matrix.custom.html","formatted_body":"<p>Isn't import.meta that space? Also, that's where node-like runtimes are supposed to put these sorts of things.</p>\n<p>There are cumbersome drawbacks to it being on node:module instead of import.meta. Notably:</p>\n<p>This is possible:<br />\nimport.meta.load('./foo.js')</p>\n<p>This is not:<br />\npreload('./foo.js')</p>\n<p>Instead it would have to be<br />\npreload(import.meta.resolve('./foo.js'))</p>\n<p>Or</p>\n<p>preload('./foo.js', import.meta.url)</p>","msgtype":"m.text"},"ts":1731604984241,"senderName":"jakobjingleheimer","senderId":"@jakobjingleheimer:matrix.org","id":"$ws5ccn4c5PAX2Ij4zCqmqdeZonseupUXNcOSVVRLL7s"},
{"content":{"body":"Btw my initial PoC for import.meta.load is working. I'd need to try it with a loader registered to say it's likely possible.\n\nBut if it doesn't facilitate what you want, then i won't bother","format":"org.matrix.custom.html","formatted_body":"<p>Btw my initial PoC for import.meta.load is working. I'd need to try it with a loader registered to say it's likely possible.</p>\n<p>But if it doesn't facilitate what you want, then i won't bother</p>","msgtype":"m.text"},"ts":1731605078925,"senderName":"jakobjingleheimer","senderId":"@jakobjingleheimer:matrix.org","id":"$fyLvQ2OhDmi4e7iX6R41cO7uN88Mt_BERgXLtxJ3R6U"},
{"content":{"body":"It facilitates what i want though ðŸ˜œ","msgtype":"m.text"},"ts":1731605216558,"senderName":"jakobjingleheimer","senderId":"@jakobjingleheimer:matrix.org","id":"$e4rhTnsWLD8YiI6rlkVWNmhflU2cVTxz4OaF43T8Pms"},
{"content":{"body":"guybedford ðŸ‘€","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@guybedford:matrix.org\">guybedford</a> ðŸ‘€","m.mentions":{"user_ids":["@guybedford:matrix.org"]},"msgtype":"m.text"},"ts":1731611545123,"senderName":"jakobjingleheimer","senderId":"@jakobjingleheimer:matrix.org","id":"$L0hPnf7jVdEamnVCm7HDb84BHsSkAG36sfAPu-YyVzU"}
]