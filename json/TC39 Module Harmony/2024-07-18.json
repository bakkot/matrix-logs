[
{"content":{"body":"guybedford I have another question about ModuleSources across workers. Consider this example:\n\n1. you open your webpage\n2. you serve a file `console.log(1)` at `http://localhost:8080/a.js`\n3. you do `const source = await import.source(\"http://localhost:8080/a.js\")` in the main thread\n4. you change `http://localhost:8080/a.js` to instead serve `console.log(2)`\n5. you do `await import(source)` in the main thread\n6. you spawn a worker\n7. in the worker, you do `await import(\"http://localhost:8080/a.js\")`\n8. you postMessage `source` from the main thread to the worker\n9. in the worker, you do `await import(source)`\n\n(a) What does the main thread log?\n(b) What does the worker log?\n(c) Does moving step 7 to the end change what the worker logs?","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@guybedford:matrix.org\">guybedford</a> I have another question about ModuleSources across workers. Consider this example:</p>\n<ol>\n<li>you open your webpage</li>\n<li>you serve a file <code>console.log(1)</code> at <code>http://localhost:8080/a.js</code></li>\n<li>you do <code>const source = await import.source(\"http://localhost:8080/a.js\")</code> in the main thread</li>\n<li>you change <code>http://localhost:8080/a.js</code> to instead serve <code>console.log(2)</code></li>\n<li>you do <code>await import(source)</code> in the main thread</li>\n<li>you spawn a worker</li>\n<li>in the worker, you do <code>await import(\"http://localhost:8080/a.js\")</code></li>\n<li>you postMessage <code>source</code> from the main thread to the worker</li>\n<li>in the worker, you do <code>await import(source)</code></li>\n</ol>\n<p>(a) What does the main thread log?<br>(b) What does the worker log?<br>(c) Does moving step 7 to the end change what the worker logs?</p>\n","m.mentions":{"user_ids":["@guybedford:matrix.org"]},"msgtype":"m.text"},"ts":1721297272230,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$qD1DGdY5QxCMI5828HRmDc9QgBMfxj72gswVvD4eFT0"}
]