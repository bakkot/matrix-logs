[
{"content":{"body":"oof, that is a super gross user experience :-/","msgtype":"m.text","org.matrix.msc1767.text":"oof, that is a super gross user experience :-/"},"ts":1670889704517,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$uYVWHeWpq7AafplhaSDTPX3WrrothuDOAiDCvAZJaGk"},
{"content":{"body":"so everyone basically has to wrap their return in `[]`, ugh","format":"org.matrix.custom.html","formatted_body":"so everyone basically has to wrap their return in <code>[]</code>, ugh","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"so everyone basically has to wrap their return in `[]`, ugh","mimetype":"text/plain"},{"body":"so everyone basically has to wrap their return in <code>[]</code>, ugh","mimetype":"text/html"}]},"ts":1670889755166,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$CGJMSNYn77bLtsZiyiMJlELlVncCWHDhVXopQkRSA1U"},
{"content":{"body":"point 2 of https://github.com/tc39/proposal-iterator-helpers/issues/55 sold me on those semantics, personally","msgtype":"m.text","org.matrix.msc1767.text":"point 2 of https://github.com/tc39/proposal-iterator-helpers/issues/55 sold me on those semantics, personally"},"ts":1670889893933,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$sL426AXUShY3vj___z_tqW93wUw5_eL-Lwa8kucsdvE"},
{"content":{"body":"yes - but since the time that decision was made in 2019, iterator helpers now (in from i think) only treats Object iterables as iterable","msgtype":"m.text","org.matrix.msc1767.text":"yes - but since the time that decision was made in 2019, iterator helpers now (in from i think) only treats Object iterables as iterable"},"ts":1670889920854,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$Q01n0D_t4x0KXghSCKcEfCSUZxk0aVELnjZ59W3C-uE"},
{"content":{"body":"meaning, strings would not be auto-flattened, which resolves point 2","msgtype":"m.text","org.matrix.msc1767.text":"meaning, strings would not be auto-flattened, which resolves point 2"},"ts":1670889928698,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$DRpiu6uR3TNo1SZjYv9Zulzwb4wMtXXsbIm3F4c4HcE"},
{"content":{"body":"iow, if flatMap only considered Object as potential iterables, and all primitives were allowed, i think it'd maximize usability without causing any of the footguns mentioned","msgtype":"m.text","org.matrix.msc1767.text":"iow, if flatMap only considered Object as potential iterables, and all primitives were allowed, i think it'd maximize usability without causing any of the footguns mentioned"},"ts":1670889958589,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$L0-QORV6li_lE3z0P4pkL_3TNXisV1C_jdrVj3rL-TE"},
{"content":{"body":"I am still confused about, why would you be returning something which is not already iterable from flatMap?","msgtype":"m.text","org.matrix.msc1767.text":"I am still confused about, why would you be returning something which is not already iterable from flatMap?"},"ts":1670890005985,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$r0f3Tye2bkcUHpnVEWgrHcF9LeyAI0CuOlap189wZiM"},
{"content":{"body":"like","msgtype":"m.text","org.matrix.msc1767.text":"like"},"ts":1670890011100,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$ePfM5L3nOp8vdmDbpweJyhQGBwydcqJCfnCdHDgEH3U"},
{"content":{"body":"if you don't do that, you don't need to wrap","msgtype":"m.text","org.matrix.msc1767.text":"if you don't do that, you don't need to wrap"},"ts":1670890019596,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$-FM1tM8pavL4kjtkjNFdFKgT70Cw-A2YJjNm2jsi0xs"},
{"content":{"body":"and I don't know why you would do that","msgtype":"m.text","org.matrix.msc1767.text":"and I don't know why you would do that"},"ts":1670890025412,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$gK4rccjmMEd2A7M7_4ytEbsR8Vd7pyT0zCqAj6aRHf8"},
{"content":{"body":"in any case I consider the third item in the issue linked above (i.e., auto-boxing means adding Symbol.iterator is basically always a breaking change) to be sufficient on its own","msgtype":"m.text","org.matrix.msc1767.text":"in any case I consider the third item in the issue linked above (i.e., auto-boxing means adding Symbol.iterator is basically always a breaking change) to be sufficient on its own"},"ts":1670890081862,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$AFh9A10xtcpQ8y_3xBclpU0V_18aLXHms-TmWRPfUsk"},
{"content":{"body":"specifically because i don't want to have to care if the item i'm returning is iterable or not","msgtype":"m.text","org.matrix.msc1767.text":"specifically because i don't want to have to care if the item i'm returning is iterable or not"},"ts":1670890093384,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$JGTqxb8AXQGgoTv801921ZSUA3sKuR2kx-ZcS86ifxI"},
{"content":{"body":"I guess we already had this conversation in this thread","msgtype":"m.text","org.matrix.msc1767.text":"I guess we already had this conversation in this thread"},"ts":1670890108809,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$iX8hqjsXIJZF6Iqham3GRyDdQDOJpS-XQ069kUmN48Q"},
{"content":{"body":"that is also addressed by disallowing a non-iterable Object","msgtype":"m.text","org.matrix.msc1767.text":"that is also addressed by disallowing a non-iterable Object"},"ts":1670890111092,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$xohwiI6GZaNc69ZadL5Of0Kw91-px2eJPfz2PCkOGfA"},
{"content":{"body":"don't need to repeat it","msgtype":"m.text","org.matrix.msc1767.text":"don't need to repeat it"},"ts":1670890114551,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$Lzn93rRHIoiMRhHNpjaez1HpxTKL4GmTgDpfcdjGZhg"},
{"content":{"body":"iow, currently you're allowed \"only iterable objects\", i'd like to see \"primitive, or iterable objects\"","msgtype":"m.text","org.matrix.msc1767.text":"iow, currently you're allowed \"only iterable objects\", i'd like to see \"primitive, or iterable objects\""},"ts":1670890125663,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$IBu-OXJLMwlYPq6TCt9RG17tCBzKKv_E9nYrHiXwRzU"},
{"content":{"body":"but... why","msgtype":"m.text","org.matrix.msc1767.text":"but... why"},"ts":1670890136736,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$JJw_c0TbHYFoR9Kts-TxHimLEmpRQJC_MTFiPXN-hM0"},
{"content":{"body":"that's even weirder","msgtype":"m.text","org.matrix.msc1767.text":"that's even weirder"},"ts":1670890138599,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$uT5icrbLTcJN2WF7AQS5V2jFKsRWzDgtQEyuHDZx72s"},
{"content":{"body":"why? a common case of a mapper is to produce a primitive","msgtype":"m.text","org.matrix.msc1767.text":"why? a common case of a mapper is to produce a primitive"},"ts":1670890150551,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$xB_NHSo3r3M1es3toyGzh8ZfV4VP4OzTYyvVMeG0pSQ"},
{"content":{"body":"yeah but if you are mapping you use `.map`, not `.flatMap`","format":"org.matrix.custom.html","formatted_body":"yeah but if you are mapping you use <code>.map</code>, not <code>.flatMap</code>","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"yeah but if you are mapping you use `.map`, not `.flatMap`","mimetype":"text/plain"},{"body":"yeah but if you are mapping you use <code>.map</code>, not <code>.flatMap</code>","mimetype":"text/html"}]},"ts":1670890163495,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$X1RmADi_4rSB_um-yv4rJLeJx1d9q2Da7Jpu_xTPPLw"},
{"content":{"body":"not if i sometimes want to return an array","msgtype":"m.text","org.matrix.msc1767.text":"not if i sometimes want to return an array"},"ts":1670890172477,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$FyBXi6LOHDVGe3U0oaP2xLgIkH6QwQG-MjRALVN1BFI"},
{"content":{"body":"flatMap is for when you are producing a sequence","msgtype":"m.text","org.matrix.msc1767.text":"flatMap is for when you are producing a sequence"},"ts":1670890174524,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$Vkpo2tlT41nG1YBibTv8qKTGR-SqmbB3aQYOiEHo4Ls"},
{"content":{"body":"map and flatMap on arrays already work this way","msgtype":"m.text","org.matrix.msc1767.text":"map and flatMap on arrays already work this way"},"ts":1670890178255,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$zahIW4FdezANOMjSBgGhyOf63M5dxbvQnrUJWV80u8U"},
{"content":{"body":"yes, flatMap is for when i want to produce a sequence at the end","msgtype":"m.text","org.matrix.msc1767.text":"yes, flatMap is for when i want to produce a sequence at the end"},"ts":1670890187046,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$L5xTP-PAB3w4hL4eGianB-nC8wtf-6Q2ykj54oreHK4"},
{"content":{"body":"it is NOT for \"each callback produces a sequence\"","msgtype":"m.text","org.matrix.msc1767.text":"it is NOT for \"each callback produces a sequence\""},"ts":1670890194171,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$VLlWR0vqV8IXfQGez-pGKehCCfWnlwJhCzv9bm2XVtM"},
{"content":{"body":"yes it is","msgtype":"m.text","org.matrix.msc1767.text":"yes it is"},"ts":1670890199445,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$Zb51G3YSsqpyRQDwsfFvKFfkqtXB-hQIveuparWvZvU"},
{"content":{"body":"that is what it is for","msgtype":"m.text","org.matrix.msc1767.text":"that is what it is for"},"ts":1670890202018,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$cCY7lR5RmI5VferZykq8LvBuJOYfZpro9kj0V0Lkf78"}
]