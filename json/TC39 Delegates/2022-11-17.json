[
{"content":{"body":"ljharb: you've been vocal in the past about coercing arguments in the order in which they appear. is there code that you've seen that actually depends on that ordering?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@ljharb:matrix.org\">ljharb</a>: you've been vocal in the past about coercing arguments in the order in which they appear. is there code that you've seen that actually depends on that ordering?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"ljharb: you've been vocal in the past about coercing arguments in the order in which they appear. is there code that you've seen that actually depends on that ordering?","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@ljharb:matrix.org\">ljharb</a>: you've been vocal in the past about coercing arguments in the order in which they appear. is there code that you've seen that actually depends on that ordering?","mimetype":"text/html"}]},"ts":1668649992244,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$w59i87mnvpl7t6TWAPCn1kEOC2M8SGMqzte2sxmG1VA"},
{"content":{"body":"i'm thinking of proposing a breaking change to the order of coercion for Atomics methods like `Atomics.store(ta, idx, val)` to coerce idx, val, *then* validate the TA","format":"org.matrix.custom.html","formatted_body":"i'm thinking of proposing a breaking change to the order of coercion for Atomics methods like <code>Atomics.store(ta, idx, val)</code> to coerce idx, val, <em>then</em> validate the TA","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"i'm thinking of proposing a breaking change to the order of coercion for Atomics methods like `Atomics.store(ta, idx, val)` to coerce idx, val, *then* validate the TA","mimetype":"text/plain"},{"body":"i'm thinking of proposing a breaking change to the order of coercion for Atomics methods like <code>Atomics.store(ta, idx, val)</code> to coerce idx, val, <em>then</em> validate the TA","mimetype":"text/html"}]},"ts":1668650036053,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$JNx2OXxdVX01aMN0PzBWig-2WRnS8udwHJzw8Lcqd-w"},
{"content":{"body":"with resizable buffers, having to recheck detached/out-of-boundness and reloading the length after each argument coercion is really unfortunate","msgtype":"m.text","org.matrix.msc1767.text":"with resizable buffers, having to recheck detached/out-of-boundness and reloading the length after each argument coercion is really unfortunate"},"ts":1668650061473,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$gV4uyH0CK1aEg3JnV63A8pXHh5OnXq0hY2X08DSMGMc"},
{"content":{"body":"it's kind of a bugfarm (sometimes security bugs)","msgtype":"m.text","org.matrix.msc1767.text":"it's kind of a bugfarm (sometimes security bugs)"},"ts":1668650118726,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$UoEWY6r5Zye8cGmrqZHoY-QWIQbBVuLFYtHWc5FP96s"},
{"content":{"body":"no code i think the committee would respect, I’d guess. why is it a bug farm?","msgtype":"m.text"},"ts":1668652283879,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$pfu-wvtdW-88mFFIYYAoOM1G6MGqeCWSwnXS5A8e2Ko"},
{"content":{"body":"I’m confused about the problem it’d be solving","msgtype":"m.text"},"ts":1668652299838,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$V6FKGeTcS0FpXtAMoPmCb8tpJ7lqHEH0CHqG1NNEW8o"},
{"content":{"body":"Agree with shu. Don't think coerce order will break anything ","msgtype":"m.text"},"ts":1668652548758,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$ZBTfsiKaA8y88MqL4YWP19uplHUxdLFIhWG8_9kbOBI"},
{"content":{"body":"it's a bug farm because it's easy to forget that coercing `idx` and `val` can detach `ta`","format":"org.matrix.custom.html","formatted_body":"it's a bug farm because it's easy to forget that coercing <code>idx</code> and <code>val</code> can detach <code>ta</code>","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"it's a bug farm because it's easy to forget that coercing `idx` and `val` can detach `ta`","mimetype":"text/plain"},{"body":"it's a bug farm because it's easy to forget that coercing <code>idx</code> and <code>val</code> can detach <code>ta</code>","mimetype":"text/html"}]},"ts":1668653103984,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$NVqRABKQq1MCTzv58nb8UL48iNeKlgR5umlqFGZ_UKk"},
{"content":{"body":"(and with resizable buffers, can resize `ta`)","format":"org.matrix.custom.html","formatted_body":"(and with resizable buffers, can resize <code>ta</code>)","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"(and with resizable buffers, can resize `ta`)","mimetype":"text/plain"},{"body":"(and with resizable buffers, can resize <code>ta</code>)","mimetype":"text/html"}]},"ts":1668653115655,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$Iuq9-xurHg3lmraFbFoIS8qttYyZkTRx6Rv7VBi4d1A"},
{"content":{"body":"TA detachment and resizing is a qualitatively worse kind of user code than other arbitrary user code, because code that forget to recheck for detachedness after each argument coercion can end up reading out-of-bounds into the buffer, depending on the implementation","msgtype":"m.text","org.matrix.msc1767.text":"TA detachment and resizing is a qualitatively worse kind of user code than other arbitrary user code, because code that forget to recheck for detachedness after each argument coercion can end up reading out-of-bounds into the buffer, depending on the implementation"},"ts":1668653163551,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$mOxig-DLXsQPtrpMyvaNGqGXWcXLWJKSryCytYDe-t4"},
{"content":{"body":" * TA detachment and resizing is a qualitatively worse kind of user code than other arbitrary user code, because code that forget to recheck for detachedness after each argument coercion can end up reading out-of-bounds into the buffer, depending on the implementation","m.new_content":{"body":"TA detachment and resizing is a qualitatively worse kind of user code than other arbitrary user code, because code that forget to recheck for detachedness after each argument coercion can end up reading out-of-bounds into the buffer, depending on the implementation","msgtype":"m.text","org.matrix.msc1767.text":"TA detachment and resizing is a qualitatively worse kind of user code than other arbitrary user code, because code that forget to recheck for detachedness after each argument coercion can end up reading out-of-bounds into the buffer, depending on the implementation"},"m.relates_to":{"event_id":"$mOxig-DLXsQPtrpMyvaNGqGXWcXLWJKSryCytYDe-t4","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.text":" * TA detachment and resizing is a qualitatively worse kind of user code than other arbitrary user code, because code that forget to recheck for detachedness after each argument coercion can end up reading out-of-bounds into the buffer, depending on the implementation"},"ts":1668653172006,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$R4zaNTts0byM_MuBV-sjJJJJ-XXrVnKdNMA67CTyzcA"},
{"content":{"body":"\"easy to forget\" do you mean when v8 is optimizing code? ","msgtype":"m.text"},"ts":1668653180487,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$KuCf43oZveHAKkAi10cFzS71lvqxj_-1MLF_DAlb9Tg"},
{"content":{"body":"that, and i also mean engineers or spec authors actually forgetting even when implementing the slow path","msgtype":"m.text","org.matrix.msc1767.text":"that, and i also mean engineers or spec authors actually forgetting even when implementing the slow path"},"ts":1668653201711,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$3uXanfyJD2_nQ46o8nJAc5KNgFVXXd6o9LvhMqD36uM"},
{"content":{"body":"i personally missed a bunch of these in the resizable buffers spec draft","msgtype":"m.text","org.matrix.msc1767.text":"i personally missed a bunch of these in the resizable buffers spec draft"},"ts":1668653215241,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$8EvFsIFK4ETIEFOLXWx3_9LhiAeu6X4OU6X6s5Dowck"},
{"content":{"body":"TA and Atomics methods depend on the TA being in a valid state, life will just be a lot easier if we can rework these methods to 1) validate once instead of multiple times and 2) after validation, check that no user code can ever be called again until method exit","msgtype":"m.text","org.matrix.msc1767.text":"TA and Atomics methods depend on the TA being in a valid state, life will just be a lot easier if we can rework these methods to 1) validate once instead of multiple times and 2) after validation, check that no user code can ever be called again until method exit"},"ts":1668653306482,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$_aEpPpWSL8pmB-MDnNThwcCC1XDeryDbuLcX8vD0KqI"},
{"content":{"body":" * TA and Atomics methods depend on the TA being in a valid state, life will just be a lot easier if we can rework these methods to 1) validate once instead of multiple times and 2) after validation, check that no user code can ever be called again until method exit","m.new_content":{"body":"TA and Atomics methods depend on the TA being in a valid state, life will just be a lot easier if we can rework these methods to 1) validate once instead of multiple times and 2) after validation, check that no user code can ever be called again until method exit","msgtype":"m.text","org.matrix.msc1767.text":"TA and Atomics methods depend on the TA being in a valid state, life will just be a lot easier if we can rework these methods to 1) validate once instead of multiple times and 2) after validation, check that no user code can ever be called again until method exit"},"m.relates_to":{"event_id":"$_aEpPpWSL8pmB-MDnNThwcCC1XDeryDbuLcX8vD0KqI","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.text":" * TA and Atomics methods depend on the TA being in a valid state, life will just be a lot easier if we can rework these methods to 1) validate once instead of multiple times and 2) after validation, check that no user code can ever be called again until method exit"},"ts":1668653339753,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$_csAI-ZqjflaiVHLd4zawjM6rADPvWC45-grkfQVgzw"},
{"content":{"body":"> <@ljharb:matrix.org> I’m confused about the problem it’d be solving\n\nwhat i'm solving for is \"increasing likelihood of correct implementation, where incorrect implementation is often a security bug and not just misbehavior\"","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$V6FKGeTcS0FpXtAMoPmCb8tpJ7lqHEH0CHqG1NNEW8o?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>I’m confused about the problem it’d be solving</blockquote></mx-reply>what i'm solving for is &quot;increasing likelihood of correct implementation, where incorrect implementation is often a security bug and not just misbehavior&quot;","m.relates_to":{"m.in_reply_to":{"event_id":"$V6FKGeTcS0FpXtAMoPmCb8tpJ7lqHEH0CHqG1NNEW8o"}},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":"> <@ljharb:matrix.org> I’m confused about the problem it’d be solving\n\nwhat i'm solving for is \"increasing likelihood of correct implementation, where incorrect implementation is often a security bug and not just misbehavior\"","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$V6FKGeTcS0FpXtAMoPmCb8tpJ7lqHEH0CHqG1NNEW8o?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>I’m confused about the problem it’d be solving</blockquote></mx-reply>what i'm solving for is &quot;increasing likelihood of correct implementation, where incorrect implementation is often a security bug and not just misbehavior&quot;","mimetype":"text/html"}]},"ts":1668653400631,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$QWMo4LN32KbJUBC5-wIUU-d1EHJGNgN77mcNejUkyYo"},
{"content":{"body":"to be clear, user code re-entrancy is a general problem. i'm singling out TAs because TA bugs result in more, and more serious, security bugs","msgtype":"m.text","org.matrix.msc1767.text":"to be clear, user code re-entrancy is a general problem. i'm singling out TAs because TA bugs result in more, and more serious, security bugs"},"ts":1668653512837,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$q9DZ-6qkxL_73vVAIeYW197zhnkhUx7GzuEVbxdZPBI"},
{"content":{"body":"So the ideal order is: idx check, val check, (no user code now), TA check, Atomics.store, (user code again)?","msgtype":"m.text"},"ts":1668653647978,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$NmpvXc0w6qJ-vfLwOWSuDJrxHsY-I8ASXXObcKDIDX0"},
{"content":{"body":"it's a little trickier than that unfortunately, because `val` coercion depends on looking at whether `ta` is a BigInt TA or a non-BigInt TA","format":"org.matrix.custom.html","formatted_body":"it's a little trickier than that unfortunately, because <code>val</code> coercion depends on looking at whether <code>ta</code> is a BigInt TA or a non-BigInt TA","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"it's a little trickier than that unfortunately, because `val` coercion depends on looking at whether `ta` is a BigInt TA or a non-BigInt TA","mimetype":"text/plain"},{"body":"it's a little trickier than that unfortunately, because <code>val</code> coercion depends on looking at whether <code>ta</code> is a BigInt TA or a non-BigInt TA","mimetype":"text/html"}]},"ts":1668653677225,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$cg2l_bzo-HdkXhNtcZ5tedtHS7r2ckLONRnieLzWhiM"},
{"content":{"body":"so i think the ideal order is: coerce *but not validate* left-to-right, then validate left-to-right","format":"org.matrix.custom.html","formatted_body":"so i think the ideal order is: coerce <em>but not validate</em> left-to-right, then validate left-to-right","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"so i think the ideal order is: coerce *but not validate* left-to-right, then validate left-to-right","mimetype":"text/plain"},{"body":"so i think the ideal order is: coerce <em>but not validate</em> left-to-right, then validate left-to-right","mimetype":"text/html"}]},"ts":1668653702921,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$6CvcURxhEnyMNAk8S072j_JhUf1X1XGZvwz2ACIXvZQ"},
{"content":{"body":"lgtm","msgtype":"m.text"},"ts":1668653754505,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$bD5jDi1OQ4Gkr6jWUkWSYhrIUmosBJLPZdRNIXQWw8s"},
{"content":{"body":"so the order is: 1) ensure `ta` has the right internal slots, 2) coerce `idx`, 3) coerce `val`, (no user code after this point) 4) validate `ta`, 5) validate `idx` (if needed for atomic access)","format":"org.matrix.custom.html","formatted_body":"so the order is: 1) ensure <code>ta</code> has the right internal slots, 2) coerce <code>idx</code>, 3) coerce <code>val</code>, (no user code after this point) 4) validate <code>ta</code>, 5) validate <code>idx</code> (if needed for atomic access)","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"so the order is: 1) ensure `ta` has the right internal slots, 2) coerce `idx`, 3) coerce `val`, (no user code after this point) 4) validate `ta`, 5) validate `idx` (if needed for atomic access)","mimetype":"text/plain"},{"body":"so the order is: 1) ensure <code>ta</code> has the right internal slots, 2) coerce <code>idx</code>, 3) coerce <code>val</code>, (no user code after this point) 4) validate <code>ta</code>, 5) validate <code>idx</code> (if needed for atomic access)","mimetype":"text/html"}]},"ts":1668653756734,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$7hHeXGAsH0qtvJrrMQsgQWnXX4V55-sA2xTcH7t0fjA"},
{"content":{"body":" * so the order is: 1) ensure `ta` has the right internal slots, 2) coerce `idx`, 3) coerce `val`, (no user code after this point) 4) validate `ta`, 5) validate `idx\\` (if needed for atomic access)","format":"org.matrix.custom.html","formatted_body":" * so the order is: 1) ensure <code>ta</code> has the right internal slots, 2) coerce <code>idx</code>, 3) coerce <code>val</code>, (no user code after this point) 4) validate <code>ta</code>, 5) validate <code>idx\\</code> (if needed for atomic access)","m.new_content":{"body":"so the order is: 1) ensure `ta` has the right internal slots, 2) coerce `idx`, 3) coerce `val`, (no user code after this point) 4) validate `ta`, 5) validate `idx\\` (if needed for atomic access)","format":"org.matrix.custom.html","formatted_body":"so the order is: 1) ensure <code>ta</code> has the right internal slots, 2) coerce <code>idx</code>, 3) coerce <code>val</code>, (no user code after this point) 4) validate <code>ta</code>, 5) validate <code>idx\\</code> (if needed for atomic access)","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"so the order is: 1) ensure `ta` has the right internal slots, 2) coerce `idx`, 3) coerce `val`, (no user code after this point) 4) validate `ta`, 5) validate `idx\\` (if needed for atomic access)","mimetype":"text/plain"},{"body":"so the order is: 1) ensure <code>ta</code> has the right internal slots, 2) coerce <code>idx</code>, 3) coerce <code>val</code>, (no user code after this point) 4) validate <code>ta</code>, 5) validate <code>idx\\</code> (if needed for atomic access)","mimetype":"text/html"}]},"m.relates_to":{"event_id":"$7hHeXGAsH0qtvJrrMQsgQWnXX4V55-sA2xTcH7t0fjA","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":" * so the order is: 1) ensure `ta` has the right internal slots, 2) coerce `idx`, 3) coerce `val`, (no user code after this point) 4) validate `ta`, 5) validate `idx\\` (if needed for atomic access)","mimetype":"text/plain"},{"body":" * so the order is: 1) ensure <code>ta</code> has the right internal slots, 2) coerce <code>idx</code>, 3) coerce <code>val</code>, (no user code after this point) 4) validate <code>ta</code>, 5) validate <code>idx\\</code> (if needed for atomic access)","mimetype":"text/html"}]},"ts":1668653768694,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$vVe2FaqHAvmMJaPr3iEywsTpX0NvF5KCO2VKyET_Mgs"},
{"content":{"body":" * so the order is: 1) ensure `ta` has the right internal slots, 2) coerce `idx`, 3) coerce `val`, (no user code after this point) 4) validate `ta`, 5) validate `idx` (if needed for atomic access)","format":"org.matrix.custom.html","formatted_body":" * so the order is: 1) ensure <code>ta</code> has the right internal slots, 2) coerce <code>idx</code>, 3) coerce <code>val</code>, (no user code after this point) 4) validate <code>ta</code>, 5) validate <code>idx</code> (if needed for atomic access)","m.new_content":{"body":"so the order is: 1) ensure `ta` has the right internal slots, 2) coerce `idx`, 3) coerce `val`, (no user code after this point) 4) validate `ta`, 5) validate `idx` (if needed for atomic access)","format":"org.matrix.custom.html","formatted_body":"so the order is: 1) ensure <code>ta</code> has the right internal slots, 2) coerce <code>idx</code>, 3) coerce <code>val</code>, (no user code after this point) 4) validate <code>ta</code>, 5) validate <code>idx</code> (if needed for atomic access)","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"so the order is: 1) ensure `ta` has the right internal slots, 2) coerce `idx`, 3) coerce `val`, (no user code after this point) 4) validate `ta`, 5) validate `idx` (if needed for atomic access)","mimetype":"text/plain"},{"body":"so the order is: 1) ensure <code>ta</code> has the right internal slots, 2) coerce <code>idx</code>, 3) coerce <code>val</code>, (no user code after this point) 4) validate <code>ta</code>, 5) validate <code>idx</code> (if needed for atomic access)","mimetype":"text/html"}]},"m.relates_to":{"event_id":"$7hHeXGAsH0qtvJrrMQsgQWnXX4V55-sA2xTcH7t0fjA","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":" * so the order is: 1) ensure `ta` has the right internal slots, 2) coerce `idx`, 3) coerce `val`, (no user code after this point) 4) validate `ta`, 5) validate `idx` (if needed for atomic access)","mimetype":"text/plain"},{"body":" * so the order is: 1) ensure <code>ta</code> has the right internal slots, 2) coerce <code>idx</code>, 3) coerce <code>val</code>, (no user code after this point) 4) validate <code>ta</code>, 5) validate <code>idx</code> (if needed for atomic access)","mimetype":"text/html"}]},"ts":1668653777296,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$SqkMSExNPS6YIIdUSxfxgJI_OA4HwM4dx8frXgx-1g0"},
{"content":{"body":"in general, does anything validate besides TAs and Proxy?","msgtype":"m.text"},"ts":1668656731834,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$ywK6B6_EstRQQQurxy10Y0xPu51wMG86yBnmPZIaf2E"},
{"content":{"body":"* in general, does anything validate besides TAs and Proxy?","m.new_content":{"body":"in general, does anything validate besides TAs and Proxy?","msgtype":"m.text"},"m.relates_to":{"event_id":"$ywK6B6_EstRQQQurxy10Y0xPu51wMG86yBnmPZIaf2E","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1668656740016,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$LgUDGp7DCqcu2F0KvOI8UktkMz7gzYxJQcdMXktAmiM"},
{"content":{"body":"ljharb: I think that depends upon your definition of \"validate\". For example, there are six opportunities for [String.prototype.split](https://tc39.es/ecma262/multipage/text-processing.html#sec-string.prototype.split) to throw an exception (and also observably checks arguments out-of-order)—does that count?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@ljharb:matrix.org\">ljharb</a>: I think that depends upon your definition of &quot;validate&quot;. For example, there are six opportunities for <a href=\"https://tc39.es/ecma262/multipage/text-processing.html#sec-string.prototype.split\">String.prototype.split</a> to throw an exception (and also observably checks arguments out-of-order)—does that count?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"ljharb: I think that depends upon your definition of \"validate\". For example, there are six opportunities for [String.prototype.split](https://tc39.es/ecma262/multipage/text-processing.html#sec-string.prototype.split) to throw an exception (and also observably checks arguments out-of-order)—does that count?","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@ljharb:matrix.org\">ljharb</a>: I think that depends upon your definition of &quot;validate&quot;. For example, there are six opportunities for <a href=\"https://tc39.es/ecma262/multipage/text-processing.html#sec-string.prototype.split\">String.prototype.split</a> to throw an exception (and also observably checks arguments out-of-order)—does that count?","mimetype":"text/html"}]},"ts":1668667818463,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$gPvBe1XVVAU3smAMQp6H_jyW28cP6SBSdaDahRxoigk"},
{"content":{"body":"im trying to understand she’s mental model here; it’s probably fine if TA/Proxy is “special” but i still don’t understand why it’s not easier to implement correctly if you fully process args left to right","msgtype":"m.text"},"ts":1668696778584,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$_XWfvCqhLtVTQ1ooOyYD3OU5giPXRZO2nWTrR-eFQvI"},
{"content":{"body":"because processing later args can invalidate previous validations","msgtype":"m.text","org.matrix.msc1767.text":"because processing later args can invalidate previous validations"},"ts":1668697368197,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$E9u2MnbjPM9lSYBcLXiK1Z3RN6ADDNYom-aSQFkQZQ0"},
{"content":{"body":" * because processing later args can invalidate previous validations","m.new_content":{"body":"because processing later args can invalidate previous validations","msgtype":"m.text","org.matrix.msc1767.text":"because processing later args can invalidate previous validations"},"m.relates_to":{"event_id":"$E9u2MnbjPM9lSYBcLXiK1Z3RN6ADDNYom-aSQFkQZQ0","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.text":" * because processing later args can invalidate previous validations"},"ts":1668697375893,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$QEbHo_PxjoxjuZgN8TgHCfmuiYsxoYgF1Gc5GuxWEJ4"},
{"content":{"body":"ljharb: yeah what Ashley Claymore said. fully left-to-right means you validate `ta`, then validate `idx`, then validate `val`, then need to validate `ta` *again*","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@ljharb:matrix.org\">ljharb</a>: yeah what <a href=\"https://matrix.to/#/@aclaymore:matrix.org\">Ashley Claymore</a> said. fully left-to-right means you validate <code>ta</code>, then validate <code>idx</code>, then validate <code>val</code>, then need to validate <code>ta</code> <em>again</em>","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"ljharb: yeah what Ashley Claymore said. fully left-to-right means you validate `ta`, then validate `idx`, then validate `val`, then need to validate `ta` *again*","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@ljharb:matrix.org\">ljharb</a>: yeah what <a href=\"https://matrix.to/#/@aclaymore:matrix.org\">Ashley Claymore</a> said. fully left-to-right means you validate <code>ta</code>, then validate <code>idx</code>, then validate <code>val</code>, then need to validate <code>ta</code> <em>again</em>","mimetype":"text/html"}]},"ts":1668699039760,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$ZnIW4hUxiCWSEkXLo6YKCWnmQb0rBQwUpdCWf-4raTc"},
{"content":{"body":"ahhhhh ok","msgtype":"m.text"},"ts":1668699112767,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$KN63iGE5YfL1-d6rJYiczldEKFtgTQIynMp3RO73Diw"},
{"content":{"body":"cause of, you know, `valueOf` and whatnot","format":"org.matrix.custom.html","formatted_body":"cause of, you know, <code>valueOf</code> and whatnot","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"cause of, you know, `valueOf` and whatnot","mimetype":"text/plain"},{"body":"cause of, you know, <code>valueOf</code> and whatnot","mimetype":"text/html"}]},"ts":1668699126151,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$3QlXalLTy0nPU9AE2XwhpE_Y5AZ3PLXcOB2-Cqzp3pk"},
{"content":{"body":"thanks, that makes sense now, let me think about it","msgtype":"m.text"},"ts":1668699131621,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$527Xf-KXsxu2zzQhJ2qc390babvR4zI8Tu6ayO5HWSQ"},
{"content":{"body":"actually in the resizable case it's even dumber","msgtype":"m.text","org.matrix.msc1767.text":"actually in the resizable case it's even dumber"},"ts":1668699197256,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$xS-pqE7Zo-jJ6OcMe5_TK5Xf_Jp9b_2kcdNZt0C6nkU"},
{"content":{"body":"it's validate `ta`, validate `idx`, validate `val`, re-validate `ta`, then also re-validate `idx` because `ta` might not be out of bounds but just shrunk a little bit","format":"org.matrix.custom.html","formatted_body":"it's validate <code>ta</code>, validate <code>idx</code>, validate <code>val</code>, re-validate <code>ta</code>, then also re-validate <code>idx</code> because <code>ta</code> might not be out of bounds but just shrunk a little bit","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"it's validate `ta`, validate `idx`, validate `val`, re-validate `ta`, then also re-validate `idx` because `ta` might not be out of bounds but just shrunk a little bit","mimetype":"text/plain"},{"body":"it's validate <code>ta</code>, validate <code>idx</code>, validate <code>val</code>, re-validate <code>ta</code>, then also re-validate <code>idx</code> because <code>ta</code> might not be out of bounds but just shrunk a little bit","mimetype":"text/html"}]},"ts":1668699216960,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$qr6glWyyBTCp42S4lVb4eBGIiH3SG1Oo8jv0x4nVVqs"},
{"content":{"body":"`while (somethingCouldChange) validateArgs(...args)`","format":"org.matrix.custom.html","formatted_body":"<code>while (somethingCouldChange) validateArgs(...args)</code>","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"`while (somethingCouldChange) validateArgs(...args)`","mimetype":"text/plain"},{"body":"<code>while (somethingCouldChange) validateArgs(...args)</code>","mimetype":"text/html"}]},"ts":1668699278561,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$laaQm6-VCmT83BxiWBe0CvQKu9bvNVHUYt1AASQOYGk"},
{"content":{"body":"rbuckton: just checking, did you see my invite for today?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@rbuckton:matrix.org\">rbuckton</a>: just checking, did you see my invite for today?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"rbuckton: just checking, did you see my invite for today?","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@rbuckton:matrix.org\">rbuckton</a>: just checking, did you see my invite for today?","mimetype":"text/html"}]},"ts":1668702747243,"senderName":"yulia","senderId":"@yulia:mozilla.org","id":"$2rMlXG7CUNNxQAllv_6-e2JLNamdYlHgrW5sHXzv-l4"},
{"content":{"body":"I did not, no.","msgtype":"m.text","org.matrix.msc1767.text":"I did not, no."},"ts":1668702825873,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$MSuAYAYPKGXVrZ8LD9wb0tWZFwpLEeaKUGgXpPSNcI8"}
]