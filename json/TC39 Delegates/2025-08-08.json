[
{"content":{"body":"> <@mhofman:matrix.org> However I haven't heard a request for userland to be able to implement the safe resolve operation itself. Just that whatever hosts can do, that userland can do it just as much (aka a virtualization constraint, which of course I'm 100% behind)\n\nUnfortunately this approach may not be web compatible, based on Svelte.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw%3Amatrix.org/%24xpiT9VqKHVQ81LKskCijDETPunQQaIJlZR1q86xUw44\">In reply to</a> <a href=\"https://matrix.to/#/@mhofman:matrix.org\">@mhofman:matrix.org</a><br>However I haven't heard a request for userland to be able to implement the safe resolve operation itself. Just that whatever hosts can do, that userland can do it just as much (aka a virtualization constraint, which of course I'm 100% behind)</blockquote></mx-reply>Unfortunately this approach may not be web compatible, based on Svelte.","m.relates_to":{"m.in_reply_to":{"event_id":"$xpiT9VqKHVQ81LKskCijDETPunQQaIJlZR1q86xUw44"}},"msgtype":"m.text"},"ts":1754617852690,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$HNQZdTa08RPZxPgKVl-JHGnzQDZ-wZ3CRRdcTgluOV4"},
{"content":{"body":"I realize svelte just added it, but the fact that anyoneâ€™s done a get accessor that depends on immediate access makes me wary that others may have done it.","msgtype":"m.text"},"ts":1754617900351,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$YOPoIEpc5pkkVcjTBDi3ezS8zr2iBMk8VCP3xCJz1wE"},
{"content":{"body":"The idea would be to only use this in certain places not by default, I think?","msgtype":"m.text"},"ts":1754617950057,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$96h2v1iBm4T0ZM_PBDfTuEnvIlwucZANT2riJkYWkgk"},
{"content":{"body":"If we limit this to just a safe capability that does the proxy check, thatâ€™s work.","msgtype":"m.text"},"ts":1754617952884,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$eB8uYyMhQDo2shDL0J53ro3DTrNv4gwgV3tEtTqmjVg"},
{"content":{"body":"Yah, thatâ€™d be fine.","msgtype":"m.text"},"ts":1754617962701,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$557GzlIFTDyS3bis-SuaFmVckqlhJZKgnFoRNKJLAaw"},
{"content":{"body":"The default promise capability (and then return value, and promise constructor) could use the current immediate then access. The safe capability does a check to immediately resolve a non-thenable, or defers then access if proxy or then accessor is defined.","msgtype":"m.text"},"ts":1754618060159,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$PXOe6lxGSOmOIaHFR6h8ETNBAMIFRRm-9z36ebQZNGk"},
{"content":{"body":"Although, `Fulfilled` wrapper could do this without us having to switch everything to a new capability","format":"org.matrix.custom.html","formatted_body":"Although, <code>Fulfilled</code> wrapper could do this without us having to switch everything to a new capability","m.mentions":{},"msgtype":"m.text"},"ts":1754618132791,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$r0tl9Me4MZqjbR5zllJ8LZHbIKAq23P-lLClMLiVk7M"},
{"content":{"body":"* Although, `Fulfilled` wrapper could do this without us having to switch everything to a new capability ðŸ˜‰","format":"org.matrix.custom.html","formatted_body":"* Although, <code>Fulfilled</code> wrapper could do this without us having to switch everything to a new capability ðŸ˜‰","m.mentions":{},"m.new_content":{"body":"Although, `Fulfilled` wrapper could do this without us having to switch everything to a new capability ðŸ˜‰","format":"org.matrix.custom.html","formatted_body":"Although, <code>Fulfilled</code> wrapper could do this without us having to switch everything to a new capability ðŸ˜‰","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$r0tl9Me4MZqjbR5zllJ8LZHbIKAq23P-lLClMLiVk7M","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1754618139680,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$WsCvTAb8Kd_1JgSKwbwrKu4Rkk9KLYddVz5hhtiBwx8"},
{"content":{"body":"Catching up on the discussion right as I head into a late night chat, so can't participate too much at the moment, but, I just want to explicitly say how much I appreciate how much thought and discussion is going into trying to fix this. It really is wonderful to see. Thanks everyone. ","m.mentions":{},"msgtype":"m.text"},"ts":1754620065942,"senderName":"mgaudet","senderId":"@mgaudet:mozilla.org","id":"$H5eu8y-o28fUpUjXdAsP6mTS07EPKiJAXZSYxZSxqgY"},
{"content":{"body":"* If we limit this to just a safe capability that does the proxy check, thatâ€™d work.","m.new_content":{"body":"If we limit this to just a safe capability that does the proxy check, thatâ€™d work.","msgtype":"m.text"},"m.relates_to":{"event_id":"$eB8uYyMhQDo2shDL0J53ro3DTrNv4gwgV3tEtTqmjVg","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1754621126432,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$RgloEsjreajiEgPIX0YhkJcbiM9JzXeB75ikI5oStTw"},
{"content":{"body":"mgaudet: Can we get access to the test case mentioned in https://bugzilla.mozilla.org/show_bug.cgi?id=1923344#c11?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@mgaudet:mozilla.org\">mgaudet</a>: Can we get access to the test case mentioned in https://bugzilla.mozilla.org/show_bug.cgi?id=1923344#c11?","m.mentions":{"user_ids":["@mgaudet:mozilla.org"]},"msgtype":"m.text"},"ts":1754682563448,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$v0shkQmbUkHTP-_nh-HvUb8VIk6sc-goH2LpO2UYTOE"},
{"content":{"body":"I mainly want to see what the thenable implementation was","m.mentions":{},"msgtype":"m.text"},"ts":1754682580268,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$F8E5C0snFKc2vHzZnpvLMsPrDWhndxMBEoSjxUKLuRA"},
{"content":{"body":"* I mainly want to see what the thenable implementation was, if it had some exploit code to it","m.mentions":{},"m.new_content":{"body":"I mainly want to see what the thenable implementation was, if it had some exploit code to it","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$F8E5C0snFKc2vHzZnpvLMsPrDWhndxMBEoSjxUKLuRA","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1754682590943,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$9cNv65VE0srOL4McoLNfaT-NkV9wW4IWjtyoZ4C0q5M"},
{"content":{"body":"Or does the animation just being a thenable cause the exploit?","m.mentions":{},"msgtype":"m.text"},"ts":1754682610612,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$kyqsGdIDTOtC9rJzdCWNvq0DkI90JLv-TDspuwQn0cg"},
{"content":{"body":"This affects Mathieu Hofman's preferred solution to delay thenable access, if just being a thenable is the problem then this solution will not solve that case.","format":"org.matrix.custom.html","formatted_body":"This affects <a href=\"https://matrix.to/#/@mhofman:matrix.org\">Mathieu Hofman</a>'s preferred solution to delay thenable access, if just being a thenable is the problem then this solution will not solve that case.","m.mentions":{"user_ids":["@mhofman:matrix.org"]},"msgtype":"m.text"},"ts":1754682660395,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$RGP3VM7nheCdRg5UeYu4_PUJwvOouHCIraWPoGY3U5E"},
{"content":{"body":"it definitely had exploit code in it; but the problem was _where_ the code ran (synchronously at a point not forseen) ","format":"org.matrix.custom.html","formatted_body":"it definitely had exploit code in it; but the problem was <em>where</em> the code ran (synchronously at a point not forseen)","m.mentions":{},"msgtype":"m.text"},"ts":1754682787847,"senderName":"mgaudet","senderId":"@mgaudet:mozilla.org","id":"$jySIwIErBvakY5U1XfEONGvAYafPlfVMLQ_jLbxHWhg"}
]