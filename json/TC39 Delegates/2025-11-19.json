[
{"content":{"body":"And we begin day 2!","m.mentions":{},"msgtype":"m.text"},"ts":1763514006885,"senderName":"Rob Palmer","senderId":"@robpalme:matrix.org","id":"$fOZD1LJKu4JnTbm2NHiiwcSTxFMIsndW7oHQe8w-3KM"},
{"content":{"body":"I think array iterators not closing when you call `return` was a mistake","format":"org.matrix.custom.html","formatted_body":"I think array iterators not closing when you call <code data-md=\"`\">return</code> was a mistake","m.mentions":{},"msgtype":"m.text"},"ts":1763514665305,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$3ZAUHTx0PdrRW_-QZEYsp4lvxyX0fTwZqlgiELJ4Lj8"},
{"content":{"body":"i think `return` was a mistake","format":"org.matrix.custom.html","formatted_body":"i think <code>return</code> was a mistake","m.mentions":{},"msgtype":"m.text"},"ts":1763514732280,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$SGTZZEATOkeP9sxHV9-ypt8DpAA6kg2qABVRfvwnaFA"},
{"content":{"body":"the generator protocol maybe, but return is fine","m.mentions":{},"msgtype":"m.text"},"ts":1763514785488,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$Niid0DnVtoagyam1N0ec4_lue9WgU7gcDfoQXLzl3qI"},
{"content":{"body":"separately, i'm not actually sure when you'd want to close the database connection - in most apps i've worked in, the database stays open and the connection is shared/pooled, and times out eventually","m.mentions":{},"msgtype":"m.text"},"ts":1763514990970,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$C2zvNsns439-sFn2hb89uU8WUyMGIHS16geqnDn_sh0"},
{"content":{"body":"Michael Ficarra: Sorry, accidentally deleted your topic while clearing the +1s","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@michaelficarra:matrix.org\">Michael Ficarra</a>: Sorry, accidentally deleted your topic while clearing the +1s","m.mentions":{"user_ids":["@michaelficarra:matrix.org"]},"msgtype":"m.text"},"ts":1763516000602,"senderName":"dminor","senderId":"@dminor:mozilla.org","id":"$vOml9idaOkpL9jLRD9sy6AAi0w5uYVL-rTvHtorNjeE"},
{"content":{"body":"these 1 or 2 or 2.7 presentations are a pretty amusing modern TC39 phenomenon","m.mentions":{},"msgtype":"m.text"},"ts":1763516010752,"senderName":"rkirsling","senderId":"@rkirsling:matrix.org","id":"$LuyLbTGBCA7ohSh1wR7nvNQg4Wvw9ct1jBcjJ4rVkm8"},
{"content":{"body":"that and conditional consensus ","m.mentions":{},"msgtype":"m.text"},"ts":1763516103850,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$FKPHzaMoaTZ_gRIsxCx5PO9-93mINX_HkdN4Pi2jLkc"},
{"content":{"body":"its nice we have ways to speed things up though","m.mentions":{},"msgtype":"m.text"},"ts":1763516117941,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$XOMc3_Yaa3HKK1C9fvcbhd6jD48ZpsNZ_lrf-zTNpc8"},
{"content":{"body":"conditional consensus is good efficiency","m.mentions":{},"msgtype":"m.text"},"ts":1763516128462,"senderName":"rkirsling","senderId":"@rkirsling:matrix.org","id":"$7gqJOw_iGNDGBYkl0v_eTxOjnKtf3Q1I1Hi5mHvGo9A"},
{"content":{"body":"@bakkot:matrix.org Can you link your async iterator slides when youâ€™re done","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@bakkot:matrix.org\">@bakkot</a> Can you link your async iterator slides when youâ€™re done","m.mentions":{"user_ids":["@bakkot:matrix.org"]},"msgtype":"m.text"},"ts":1763516225789,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$PTHMEn-3a9EhdIeFrtM9qCyWScZ5Un55cENAHXFVufQ"},
{"content":{"body":"Dumb question: Where is  CreateAsyncIteratorFromClosure defined? (re: async interator helpers-- it links to the main spec where I can't find it) ","m.mentions":{},"msgtype":"m.text"},"ts":1763516308996,"senderName":"mgaudet|travelling","senderId":"@mgaudet:mozilla.org","id":"$udZJLV_TmyPVGGBMMSTgWbfIvEo5B3mNLF3FdmODXno"},
{"content":{"body":"@mgaudet:mozilla.org https://github.com/tc39/ecma262/pull/3628","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@mgaudet:mozilla.org\">@mgaudet|travelling</a> https://github.com/tc39/ecma262/pull/3628","m.mentions":{"user_ids":["@mgaudet:mozilla.org"]},"msgtype":"m.text"},"ts":1763516396646,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$pOBonSluO5Qt2isPn9ASsyUqp-EXCVj5MoG_nCLaW6M"},
{"content":{"body":"thanks :) ","m.mentions":{},"msgtype":"m.text"},"ts":1763516447896,"senderName":"mgaudet|travelling","senderId":"@mgaudet:mozilla.org","id":"$LLtcgKakN17jGfk3kzgbrWJIZHSmmrRdWye7AcIs4Is"},
{"content":{"body":"What happens if you get an infinite loop inside a spec function? Is there any defined behavior?","m.mentions":{},"msgtype":"m.text"},"ts":1763516655644,"senderName":"waldemar","senderId":"@waldemarh:matrix.org","id":"$hAH06GJihdhHzbPtSMgXXKFJDCozV9mll8sIHxzEFgA"},
{"content":{"body":"I guess the algorithm would just never terminate until the host process does","m.mentions":{},"msgtype":"m.text"},"ts":1763516738058,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$hae96Ios0p0oebIkSxiFKQX7nDdzFT6DP6Sg30JQimk"},
{"content":{"body":"i don't think any spec function current or proposed lets you get into a true infinite loop, they all dispatch on user code","m.mentions":{},"msgtype":"m.text"},"ts":1763516782979,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$BocQXu0KzYqkMtdaNSF-jxjn9eTgdgBaSahspt4ZQQs"},
{"content":{"body":"* i don't think any spec function current or proposed lets you get into a true infinite loop, they all predicate on user code","m.mentions":{},"m.new_content":{"body":"i don't think any spec function current or proposed lets you get into a true infinite loop, they all predicate on user code","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$BocQXu0KzYqkMtdaNSF-jxjn9eTgdgBaSahspt4ZQQs","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1763516815166,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$IgmLYRwRbsmkFicdTJaVMzbzUVezDDN76jpA4fEQeA4"},
{"content":{"body":"sorry the async iterators item was so incoherent, I'd meant to do prep this weekend but I was/am down with some sort of horrible virus and am not able to think clearly enough for reasoning about concurrency code","m.mentions":{},"msgtype":"m.text"},"ts":1763517090069,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$UFMl2NzPtd3bq3msBYNCuXX0RmvGZswXuErlsv9x6DM"},
{"content":{"body":"No special casing for infinite loops; the spec technically just says you have to keep doing it forever","m.mentions":{"user_ids":["@waldemarh:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$hAH06GJihdhHzbPtSMgXXKFJDCozV9mll8sIHxzEFgA"}},"msgtype":"m.text"},"ts":1763517113723,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$zihLQpCoSesg3uu-rwzrVk0r2ikXiVjRkY5f--WwXQ8"},
{"content":{"body":"this is part of its general refusal to admit any resource constraints","m.mentions":{},"msgtype":"m.text"},"ts":1763517123160,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$lgnbpz_0NBD0QVEX_YDEPb62ic6-IqXHTohjMbR0B_g"},
{"content":{"body":"maybe, but not if we introduce a built-in infinite iterator","m.mentions":{"user_ids":["@devsnek:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$BocQXu0KzYqkMtdaNSF-jxjn9eTgdgBaSahspt4ZQQs"}},"msgtype":"m.text"},"ts":1763517127014,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$CCQ_u-bR11Myt_RvdIkDox8ujfm791BWmGeYN4XUZrI"},
{"content":{"body":"forgive me for my naiivety (or for the lack of knowing the proper spelling), but composites are tought to be immutable, aren't they?","m.mentions":{},"msgtype":"m.text"},"ts":1763517799015,"senderName":"Christian Ulbrich","senderId":"@christianulbrich:matrix.org","id":"$5F997xphaCZWuozfb16x2xJIdFWcTxH-Bsnr5peZarA"},
{"content":{"body":"Yes","m.mentions":{},"msgtype":"m.text"},"ts":1763517828170,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$x6NnQf4bArpayG9rcD7unkY9nPftbCj85mDJIj8rdoY"},
{"content":{"body":"Shallowly ","format":"org.matrix.custom.html","formatted_body":"Shallowly","m.mentions":{},"msgtype":"m.text"},"ts":1763517830957,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$PzcZ0oLVHkFLLANy6XY8igX8tKsrFbbxRF0W13Qb9DI"},
{"content":{"body":"Shallowly?","m.mentions":{},"msgtype":"m.text"},"ts":1763517849848,"senderName":"Christian Ulbrich","senderId":"@christianulbrich:matrix.org","id":"$zU2vbdTQ82T5B7kV38FAeYzoSxifRHWMyf-ZZ_zENmc"},
{"content":{"body":"They can contain mutable stuff","m.mentions":{},"msgtype":"m.text"},"ts":1763517862673,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$lk5QSk6HlUOPSM2Yoy7QdHMCh77qxjbcepePYWIdHgc"},
{"content":{"body":"is implementation concern the only factor for interned vs unique? or are there other constraints?","m.mentions":{},"msgtype":"m.text"},"ts":1763517865776,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$mylVYaTPogAeILW8GffW8aWWZKRNAa3-nft3dRRJ2bw"},
{"content":{"body":"c1.wallet.amount is not immutable?","m.mentions":{},"msgtype":"m.text"},"ts":1763517867069,"senderName":"Christian Ulbrich","senderId":"@christianulbrich:matrix.org","id":"$df__NAPV0z7c3K2pEVx98kDApFQ6-IHTBt2xO9Tjnoc"},
{"content":{"body":"correct","m.mentions":{},"msgtype":"m.text"},"ts":1763517873249,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$p3iGMqqz7AxmItFx7onTVmkh2Z-jEDasHOnM9LBhNd4"},
{"content":{"body":"* `c1.wallet.amount` is not immutable?","format":"org.matrix.custom.html","formatted_body":"* <code>c1.wallet.amount</code> is not immutable?","m.mentions":{},"m.new_content":{"body":"`c1.wallet.amount` is not immutable?","format":"org.matrix.custom.html","formatted_body":"<code>c1.wallet.amount</code> is not immutable?","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$df__NAPV0z7c3K2pEVx98kDApFQ6-IHTBt2xO9Tjnoc","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1763517876331,"senderName":"Christian Ulbrich","senderId":"@christianulbrich:matrix.org","id":"$FAGyT1XNTrkfn8I-sVh8VHwqEKUV3qU6DJtSs-gL_cs"},
{"content":{"body":"You can make wallet a composite too ","format":"org.matrix.custom.html","formatted_body":"You can make wallet a composite too","m.mentions":{},"msgtype":"m.text"},"ts":1763517891889,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$cNFKIOHbezhw5HxRm_mdLy4Hk3Y9cS8Je8Z2J1GmTag"},
{"content":{"body":"can but shouldn't, wallets have identity","m.mentions":{},"msgtype":"m.text"},"ts":1763517927023,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$TTtwySIUn5618oU4Jg6xTT8m2iHh3mp2y5swWSR67yI"},
{"content":{"body":"my wallet is not your wallet just because we both have no money","m.mentions":{},"msgtype":"m.text"},"ts":1763517936503,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$omsGQ1XDJ86yGlyCJqNQFhLarrlnceaQ51vsGjf21S4"},
{"content":{"body":"@keith_miller:matrix.org Is spec convienence causing real slowdowns for TAs?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@keith_miller:matrix.org\">@keith_miller</a> Is spec convienence causing real slowdowns for TAs?","m.mentions":{"user_ids":["@keith_miller:matrix.org"]},"msgtype":"m.text"},"ts":1763517959863,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$3YxkOspYI4s05AqHKRsHd8STnFsuqH_Q6HK7qKZWCfE"},
{"content":{"body":"so `let c1 = Composite({wallet: amount: 20}); \nlet c2 = Composite({wallet: amount: 20});\nc1 === c2; // true\nc1.wallet.amount+=20;\nc1 === c2 // ??\n`","format":"org.matrix.custom.html","formatted_body":"so <code>let c1 = Composite({wallet: amount: 20});  let c2 = Composite({wallet: amount: 20}); c1 === c2; // true c1.wallet.amount+=20; c1 === c2 // ?? </code>","m.mentions":{},"msgtype":"m.text"},"ts":1763518022320,"senderName":"Christian Ulbrich","senderId":"@christianulbrich:matrix.org","id":"$du-oFGP_4bk38VGFq_lm3VJ34LkjUYXee9jOcmhwBEo"},
{"content":{"body":"i would hope that composites are never mutable","m.mentions":{},"msgtype":"m.text"},"ts":1763518045289,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$P-nXZiwzRMpzoM1I-CQ12aUpimHYgyMK3Bm2Ldu1qZI"},
{"content":{"body":"in either case","m.mentions":{},"msgtype":"m.text"},"ts":1763518048772,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$DSMMmh9UaG4Fiu1-fMlj7BXLBTnRfmmwecInUqThxNM"},
{"content":{"body":"No, those two wallets are different objects, so the composites are different","m.mentions":{"user_ids":["@christianulbrich:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$du-oFGP_4bk38VGFq_lm3VJ34LkjUYXee9jOcmhwBEo"}},"msgtype":"m.text"},"ts":1763518053260,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$8-7SpVt5iosZouASmmhA2lq74VNGVkhkax0y51J89uI"},
{"content":{"body":"You need nested composites, right?","format":"org.matrix.custom.html","formatted_body":"You need nested composites, right?","m.mentions":{"user_ids":["@christianulbrich:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$du-oFGP_4bk38VGFq_lm3VJ34LkjUYXee9jOcmhwBEo"}},"msgtype":"m.text"},"ts":1763518056007,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$z8gDiuWF9XKHR1urEbwIITp96zkmg2TwpOwM0_ytb04"},
{"content":{"body":"* so ```\nlet c1 = Composite({wallet: amount: 20});  \nlet c2 = Composite({wallet: amount: 20}); \nc1 === c2; // true \nc1.wallet.amount+=20;\n c1 === c2 // ?? \n```","format":"org.matrix.custom.html","formatted_body":"* <p>so ```<br>let c1 = Composite({wallet: amount: 20});<br>\nlet c2 = Composite({wallet: amount: 20});<br>c1 === c2; // true<br>c1.wallet.amount+=20;<br>c1 === c2 // ??</p>\n<pre><code></code></pre>\n","m.mentions":{},"m.new_content":{"body":"so ```\nlet c1 = Composite({wallet: amount: 20});  \nlet c2 = Composite({wallet: amount: 20}); \nc1 === c2; // true \nc1.wallet.amount+=20;\n c1 === c2 // ?? \n```","format":"org.matrix.custom.html","formatted_body":"<p>so ```<br>let c1 = Composite({wallet: amount: 20});<br>\nlet c2 = Composite({wallet: amount: 20});<br>c1 === c2; // true<br>c1.wallet.amount+=20;<br>c1 === c2 // ??</p>\n<pre><code></code></pre>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$du-oFGP_4bk38VGFq_lm3VJ34LkjUYXee9jOcmhwBEo","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1763518058167,"senderName":"Christian Ulbrich","senderId":"@christianulbrich:matrix.org","id":"$GN8k2rMi5iay7OLw6edNJqFoQ3Myir7tJpfs5HFrgAE"},
{"content":{"body":"But these would be the same:\n```\nlet wallet = Composite({ amount: 20 });\nlet c1 = Composite({ wallet });\nlet c2 = Composite({ wallet });\n```","format":"org.matrix.custom.html","formatted_body":"<p>But these would be the same:</p>\n<pre><code>let wallet = Composite({ amount: 20 });\nlet c1 = Composite({ wallet });\nlet c2 = Composite({ wallet });\n</code></pre>\n","m.mentions":{},"msgtype":"m.text"},"ts":1763518079060,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$ExSycJbluiZrUd8Z5c4NNTyPfJiY-TdKsB7BMDTuQ3U"},
{"content":{"body":"* But these would be the same:\n\n```\nlet wallet =({ amount: 20 });\nlet c1 = Composite({ wallet });\nlet c2 = Composite({ wallet });\n```","format":"org.matrix.custom.html","formatted_body":"* <p>But these would be the same:</p>\n<pre><code>let wallet =({ amount: 20 });\nlet c1 = Composite({ wallet });\nlet c2 = Composite({ wallet });\n</code></pre>\n","m.mentions":{},"m.new_content":{"body":"But these would be the same:\n\n```\nlet wallet =({ amount: 20 });\nlet c1 = Composite({ wallet });\nlet c2 = Composite({ wallet });\n```","format":"org.matrix.custom.html","formatted_body":"<p>But these would be the same:</p>\n<pre><code>let wallet =({ amount: 20 });\nlet c1 = Composite({ wallet });\nlet c2 = Composite({ wallet });\n</code></pre>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$ExSycJbluiZrUd8Z5c4NNTyPfJiY-TdKsB7BMDTuQ3U","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1763518085991,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$okQvimsF8Jn43ST7qY_9jwnEyK_Fd1nOhcKXW7I5xgw"},
{"content":{"body":"The alternative is `wallet = { amount: 20 }; c1 = Composite({ `â€¦ Nicolo beat me to it.","format":"org.matrix.custom.html","formatted_body":"The alternative is <code data-md=\"`\">wallet = { amount: 20 }; c1 = Composite({ </code>â€¦ Nicolo beat me to it.","m.mentions":{},"msgtype":"m.text"},"ts":1763518089414,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$mIdIhdgavwysFkhBDzfVjUzp1CZYujFY8CuQ3F60Gi0"},
{"content":{"body":"* But these would be the same:\n\n```\nlet wallet = { amount: 20 };\nlet c1 = Composite({ wallet });\nlet c2 = Composite({ wallet });\n```","format":"org.matrix.custom.html","formatted_body":"* <p>But these would be the same:</p>\n<pre><code>let wallet = { amount: 20 };\nlet c1 = Composite({ wallet });\nlet c2 = Composite({ wallet });\n</code></pre>\n","m.mentions":{},"m.new_content":{"body":"But these would be the same:\n\n```\nlet wallet = { amount: 20 };\nlet c1 = Composite({ wallet });\nlet c2 = Composite({ wallet });\n```","format":"org.matrix.custom.html","formatted_body":"<p>But these would be the same:</p>\n<pre><code>let wallet = { amount: 20 };\nlet c1 = Composite({ wallet });\nlet c2 = Composite({ wallet });\n</code></pre>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$ExSycJbluiZrUd8Z5c4NNTyPfJiY-TdKsB7BMDTuQ3U","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1763518103104,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$nzYoZePEez3Dv4RVEJt9E8k27AWqcA2iVL5777A6bog"},
{"content":{"body":"Yeah, 100%","m.mentions":{"user_ids":["@jridgewell:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$3YxkOspYI4s05AqHKRsHd8STnFsuqH_Q6HK7qKZWCfE"}},"msgtype":"m.text"},"ts":1763518331659,"senderName":"keith_miller","senderId":"@keith_miller:matrix.org","id":"$ZSa1hQ6NLX-uk3F0RjE7sHJYMrzqm_VpEeMPhWSIAtM"},
{"content":{"body":"Mathieu Hofman: We also have current _custom Iterability_ with `Symbol.iterator`.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@mhofman:matrix.org\">Mathieu Hofman</a>: We also have current <em>custom Iterability</em> with <code>Symbol.iterator</code>.","m.mentions":{"user_ids":["@mhofman:matrix.org"]},"msgtype":"m.text"},"ts":1763518342238,"senderName":"Christian Ulbrich","senderId":"@christianulbrich:matrix.org","id":"$bBZaqe9eDGtuEwvDzY-VwD7STaARDVzR6gran7A-Xls"},
{"content":{"body":"please do not look at the current spec, it means nothing","m.mentions":{"user_ids":["@mgaudet:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$udZJLV_TmyPVGGBMMSTgWbfIvEo5B3mNLF3FdmODXno"}},"msgtype":"m.text"},"ts":1763518342939,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$4u5pE0EN5n9CPllYst5JnpNRxNaY5Up6wV9iI86qQnQ"},
{"content":{"body":"I should remove it","m.mentions":{},"msgtype":"m.text"},"ts":1763518344510,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$Yb5OV5oXbLvqM4_GwjyI4xx5UiyDMYDOYEbkcmJj5Co"},
{"content":{"body":"@olivf.o1o.ch:immer.chat Does V8 have this same problem?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@olivf.o1o.ch:immer.chat\">@Olivier FlÃ¼ckiger</a> Does V8 have this same problem?","m.mentions":{"user_ids":["@olivf.o1o.ch:immer.chat","@keith_miller:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$ZSa1hQ6NLX-uk3F0RjE7sHJYMrzqm_VpEeMPhWSIAtM"}},"msgtype":"m.text"},"ts":1763518358595,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$qM--Vpjs4tBPzZZphJmtrqD6D6lBcdpHePBO8z3ybao"},
{"content":{"body":"In particular because you have to do n shape checks for each of the different views","m.mentions":{},"msgtype":"m.text"},"ts":1763518358871,"senderName":"keith_miller","senderId":"@keith_miller:matrix.org","id":"$s1BT1Eb4mMmuhtuJ1MtNvUpiq9nVIIBAumkckyEwnIU"},
{"content":{"body":"Should we be splitting the methods onto the sepcific TA subtype classes?","m.mentions":{},"msgtype":"m.text"},"ts":1763518379092,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$AyKDaSbVKfZllZPmnSJKIGWeiJGcdl4IZCQE1amg61E"},
{"content":{"body":"That is ok-ish. The place it shows up in syntax (array spread) was a mistake","m.mentions":{"user_ids":["@christianulbrich:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$bBZaqe9eDGtuEwvDzY-VwD7STaARDVzR6gran7A-Xls"}},"msgtype":"m.text"},"ts":1763518381315,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$cCe1TsRkKZ7y2GgUpRt2u7fNQjEaOZLHlDqaSHhKlL0"},
{"content":{"body":"Sometimes it will get inlined enough that we can prove only one shape shows up but there's many examples I've seen where that doesn't happen","m.mentions":{},"m.relates_to":{"m.in_reply_to":{"event_id":"$s1BT1Eb4mMmuhtuJ1MtNvUpiq9nVIIBAumkckyEwnIU"}},"msgtype":"m.text"},"ts":1763518424628,"senderName":"keith_miller","senderId":"@keith_miller:matrix.org","id":"$0J3eG09MvUwQsaEk8vpla2_Tpj9QHbH7S2EsDzmGVaE"},
{"content":{"body":"my memory of v8 is that it generally does a switch over different object kinds. i guess that could be compiled to a bunch of if/else branches but hopefully it does better than ","m.mentions":{},"msgtype":"m.text"},"ts":1763518474186,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$N6IVCSiVJClL-_R1KP4pCE2KufYyeFpT6F1GNdD3Cds"},
{"content":{"body":"* my memory of v8 is that it generally does a switch over different object kinds. i guess that could be compiled to a bunch of if/else branches but hopefully it does better than that","m.mentions":{},"m.new_content":{"body":"my memory of v8 is that it generally does a switch over different object kinds. i guess that could be compiled to a bunch of if/else branches but hopefully it does better than that","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$N6IVCSiVJClL-_R1KP4pCE2KufYyeFpT6F1GNdD3Cds","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1763518479613,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$WA77a0YnyyCtqix0h6eGOknm60KembK2eQ8qdkRxWF8"},
{"content":{"body":"which is certainly still some overhead, but its not a function of the number of things you're switching over","m.mentions":{},"msgtype":"m.text"},"ts":1763518512352,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$pXbNctBy7s61ZzpKwcj6az9-WcoEQvkpulwnMw1NL_o"},
{"content":{"body":"Mathieu Hofman: `Array.prototype[Symbol.iterator] = function* () { yield 2; yield 3; }`","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@mhofman:matrix.org\">Mathieu Hofman</a>: <code>Array.prototype[Symbol.iterator] = function* () { yield 2; yield 3; }</code>","m.mentions":{"user_ids":["@mhofman:matrix.org"]},"msgtype":"m.text"},"ts":1763518537047,"senderName":"Christian Ulbrich","senderId":"@christianulbrich:matrix.org","id":"$2JgE4OJuTNlMH8H_KGK9ouaPbV58PSBVgN3hFykeCws"},
{"content":{"body":"The problem is that you also need to make the index access polymorphic","m.mentions":{},"msgtype":"m.text"},"ts":1763518545211,"senderName":"keith_miller","senderId":"@keith_miller:matrix.org","id":"$opafoHr-4MIgEBAWD0jlCF6-ovBpW8I4BmZuKwnb6OE"},
{"content":{"body":"So it's not just a check you're in bounds and load","m.mentions":{},"msgtype":"m.text"},"ts":1763518558442,"senderName":"keith_miller","senderId":"@keith_miller:matrix.org","id":"$U0p-ksfSrGd6wlHUwZGcPjWD1ZML6FIskocDSFFWC1E"},
{"content":{"body":"It's a switch over the element size then pick the right load for the active size","m.mentions":{},"msgtype":"m.text"},"ts":1763518573541,"senderName":"keith_miller","senderId":"@keith_miller:matrix.org","id":"$qkF9UZI_tFyscbh3zfaVVA4M5wya4kXT-np5fU2mxuM"},
{"content":{"body":"yeah it remains polymorphic until it can be found to be exactly 1 kind","m.mentions":{},"msgtype":"m.text"},"ts":1763518584872,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$j7G2YVstMP74YgxfLuAU0jHsnYfhsMp9_F_3Enf3Jm4"},
{"content":{"body":"Right but that wouldn't be a problem if each of the views had their own copy of the various methods","m.mentions":{},"msgtype":"m.text"},"ts":1763518609387,"senderName":"keith_miller","senderId":"@keith_miller:matrix.org","id":"$zXuo0z56dQzovS61pLMBUmjcUB3-VXVbsyUx-WaWQbo"},
{"content":{"body":"Mathieu Hofman: What I am trying to say, and I am leaning towards some, what I think Ron said, custom equality is not a bad thing per sÃ¨. We already have so many things in the language, that are powerful.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@mhofman:matrix.org\">Mathieu Hofman</a>: What I am trying to say, and I am leaning towards some, what I think Ron said, custom equality is not a bad thing per sÃ¨. We already have so many things in the language, that are powerful.","m.mentions":{"user_ids":["@mhofman:matrix.org"]},"msgtype":"m.text"},"ts":1763518655801,"senderName":"Christian Ulbrich","senderId":"@christianulbrich:matrix.org","id":"$zw7vr86OV6Pw5Gewyz-K9Z9Ngi64fqaTWd_WENy9eig"},
{"content":{"body":"Letâ€™s fix that. Doing something for convenience in the spec is much less important that actual impl difficulties.","m.mentions":{},"msgtype":"m.text"},"ts":1763518658873,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$O9aASOv1t9oQU-M1Iq-ik5-ymwuC7Ilv5HMgBhNxbOk"},
{"content":{"body":"its definitely web reality at this point","m.mentions":{},"msgtype":"m.text"},"ts":1763518681386,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$AOJB8vaVg0rILp9152weCUfmmW0rYRDK5LZy4sqZbdQ"},
{"content":{"body":"There's some compatibility risk although I don't know how high it is in practice","m.mentions":{},"msgtype":"m.text"},"ts":1763518682863,"senderName":"keith_miller","senderId":"@keith_miller:matrix.org","id":"$WwU0SMt1nekUZUlR_GjuI8_dobKKuaMijLy4PmoTeEE"},
{"content":{"body":"i've seen code in the wild using TypedArray.prototype.foo.call","m.mentions":{},"msgtype":"m.text"},"ts":1763518712867,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$CW3h6ppysytCU4WTd4CB9gcos3zL_cB_3DtWh9EdxQM"},
{"content":{"body":"actually i guess that doesn't actually preclude adding more methods","m.mentions":{},"msgtype":"m.text"},"ts":1763518733340,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$-0PSroC7OIRcsuRCGtDFFROgVUOmRc2NTRWE2VuoyK4"},
{"content":{"body":"Maybe you could just shadow the current one","m.mentions":{},"msgtype":"m.text"},"ts":1763518744110,"senderName":"keith_miller","senderId":"@keith_miller:matrix.org","id":"$jPWdoHAVVvus2mFt_XERD6tM_Q8BUy_zMXmJxdsZA8k"},
{"content":{"body":"* actually i guess that doesn't actually preclude adding more methods on the subclasses","m.mentions":{},"m.new_content":{"body":"actually i guess that doesn't actually preclude adding more methods on the subclasses","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$-0PSroC7OIRcsuRCGtDFFROgVUOmRc2NTRWE2VuoyK4","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1763518745199,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$ZXHnx5v8tovWldXdCq--rFAYytCF6zAUEjCoZ0fw3ig"},
{"content":{"body":"It would be weird but I doubt anyone would really know","m.mentions":{},"msgtype":"m.text"},"ts":1763518759585,"senderName":"keith_miller","senderId":"@keith_miller:matrix.org","id":"$N3khxchziCDuluz1Vi9m06JH-BwQob7BG_od39YEREs"},
{"content":{"body":"we did a similar change moving around where some error properties were located in webkit and chrome and no one noticed","m.mentions":{},"msgtype":"m.text"},"ts":1763518803225,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$qx__IzvxGyMrq6VkHYajuwxe5pw3CWaEC69bqWNfSuc"},
{"content":{"body":"That's just prototype pollution. Which is a much more general problem. But yeah you could have an array instance with an shadowed Symbol.iterator that does something weird, and I don't like that array spread would be affected by that.","m.mentions":{"user_ids":["@christianulbrich:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$2JgE4OJuTNlMH8H_KGK9ouaPbV58PSBVgN3hFykeCws"}},"msgtype":"m.text"},"ts":1763518816293,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$vQ5TT9Ghkik2WcocSpZy8n-iMt6149G-bRpeHlJwDJg"},
{"content":{"body":"I think it is not weird to get custom behavior when spreading an object which happens to be IsArray but which has a custom `Symbol.iterator`","format":"org.matrix.custom.html","formatted_body":"I think it is not weird to get custom behavior when spreading an object which happens to be IsArray but which has a custom <code>Symbol.iterator</code>","m.mentions":{},"msgtype":"m.text"},"ts":1763518889626,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$jUPFbm_IgLcm-1cZ6MzKJyWcoJe1AXOQ_Oxzpcfv35Y"},
{"content":{"body":"as to the Array prototype Symbol.iterator pollution problem, I have a proposal for fixing that!","m.mentions":{},"msgtype":"m.text"},"ts":1763518918076,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$LzawGoFan655oeRopIQmtnn4puMf-JBtwZ0PN2tBXZ4"},
{"content":{"body":"ah actually it was the opposite direction https://github.com/WebKit/WebKit/commit/96efcf1f1c011efd5946d053272581e0a3d6c3b2 (my only webkit commit ðŸ˜„)","m.mentions":{},"m.relates_to":{"m.in_reply_to":{"event_id":"$qx__IzvxGyMrq6VkHYajuwxe5pw3CWaEC69bqWNfSuc"}},"msgtype":"m.text"},"ts":1763518939247,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$9GOjpnWs61WEDE-MezR6WlEF8LQh2FjKuBgo00Bb41w"},
{"content":{"body":"What exactly is the spec convenience we are talking about? That they all share a common proto?","m.mentions":{"user_ids":["@jridgewell:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$qM--Vpjs4tBPzZZphJmtrqD6D6lBcdpHePBO8z3ybao"}},"msgtype":"m.text"},"ts":1763519735208,"senderName":"Olivier FlÃ¼ckiger","senderId":"@olivf.o1o.ch:immer.chat","id":"$en5YKAY86NGb10vezAx8EDVOFMmO2jXDEXV9e7q92kQ"},
{"content":{"body":"Looks like, _native equality_ comes quite at some cost, of those _interned objects_ not being so _native_ anymore...","format":"org.matrix.custom.html","formatted_body":"Looks like, <em>native equality</em> comes quite at some cost, of those <em>interned objects</em> not being so <em>native</em> anymore...","m.mentions":{},"msgtype":"m.text"},"ts":1763519742722,"senderName":"Christian Ulbrich","senderId":"@christianulbrich:matrix.org","id":"$Toi5KEoMfbQPDK5ofDu7vYPcMZkqd1mldChpyQasc0g"},
{"content":{"body":"Yah, and the methods are defined on the common proto","format":"org.matrix.custom.html","formatted_body":"Yah, and the methods are defined on the common proto","m.mentions":{"user_ids":["@olivf.o1o.ch:immer.chat"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$en5YKAY86NGb10vezAx8EDVOFMmO2jXDEXV9e7q92kQ"}},"msgtype":"m.text"},"ts":1763519943574,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$XagM8z_Jo5qpxI_X8EOqWq4EXRdvawD4VyBeyg2FAIk"},
{"content":{"body":"Though apparently index access is also slower than it should be","format":"org.matrix.custom.html","formatted_body":"Though apparently index access is also slower than it should be","m.mentions":{"user_ids":["@keith_miller:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$opafoHr-4MIgEBAWD0jlCF6-ovBpW8I4BmZuKwnb6OE"}},"msgtype":"m.text"},"ts":1763520000351,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$JUrscMDGA9gB41VCnSPU3J-d6pydOv8lZdONLkqvgtY"},
{"content":{"body":"Would this be a first for the language? Is there any object, that is specially handled somewhere, somehow, besides being an object, I mean apart from `null`?","format":"org.matrix.custom.html","formatted_body":"Would this be a first for the language? Is there any object, that is specially handled somewhere, somehow, besides being an object, I mean apart from <code>null</code>?","m.mentions":{},"msgtype":"m.text"},"ts":1763520224648,"senderName":"Christian Ulbrich","senderId":"@christianulbrich:matrix.org","id":"$enIxVjiRmEQD0vHt-gjVxkfLl7eFeBknEaR4nOAJDt8"},
{"content":{"body":"It's probably not our main worry for TA... But in principle all for not doing convenience in the spec if it makes implementation harder.","m.mentions":{},"msgtype":"m.text"},"ts":1763520227103,"senderName":"Olivier FlÃ¼ckiger","senderId":"@olivf.o1o.ch:immer.chat","id":"$7jWDVfJ-GPDFS5DzmNf3GiPFqklBMyiANFl6eHNh-So"}
]