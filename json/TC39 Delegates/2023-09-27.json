[
{"content":{"body":"> <@tabatkins:matrix.org> I think we just need a `\"use semicolons\"` parser switch that turns off ASI honestly.\n\nAnti proposal: `\"no asi harzards\"` parser switch that fix ASI hazards according to developer's expectation. (Yeah , it's very very impossible , especially the committee introduced the very serious new hazards in ES2020)","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$nLJgloqsZbsmmX6x9bWOrQqGNb_jsEJ0IQy7RivduAE?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@tabatkins:matrix.org\">@tabatkins:matrix.org</a><br>I think we just need a <code>\"use semicolons\"</code> parser switch that turns off ASI honestly.</blockquote></mx-reply>Anti proposal: <code>\"no asi harzards\"</code> parser switch that fix ASI hazards according to developer's expectation. (Yeah , it's very very impossible , especially the committee introduced the very serious new hazards in ES2020)","m.mentions":{"user_ids":["@tabatkins:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$nLJgloqsZbsmmX6x9bWOrQqGNb_jsEJ0IQy7RivduAE"}},"msgtype":"m.text"},"ts":1695772888520,"senderName":"hax (HE Shi-Jun)","senderId":"@haxjs:matrix.org","id":"$DtFfNTVeW31f0QBEySA8ykcvI2ANy7Mw2-tnHG-09_A"},
{"content":{"body":"i doubt anything that even tacitly encourages omission of semicolons will achieve consensus :-)","m.mentions":{},"msgtype":"m.text"},"ts":1695776089093,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$US81hfi4So6AlHwhjZ3AvGupnB21CDC9QJtsPej83qs"},
{"content":{"body":"I've updated https://github.com/tc39/proposal-throw-expressions/pull/18 to use Static Semantics rules to avoid ASI for `+`, `-`, `/`, and `/=`, in keeping with how we also use Static Semantics rules to avoid ASI for optional chains followed by a template literal on a following line. I don't believe the end result is quite so complex, but I'd appreciate if anyone with time could take a look over it as I am still short a reviewer.","format":"org.matrix.custom.html","formatted_body":"I've updated https://github.com/tc39/proposal-throw-expressions/pull/18 to use Static Semantics rules to avoid ASI for <code>+</code>, <code>-</code>, <code>/</code>, and <code>/=</code>, in keeping with how we also use Static Semantics rules to avoid ASI for optional chains followed by a template literal on a following line. I don't believe the end result is quite so complex, but I'd appreciate if anyone with time could take a look over it as I am still short a reviewer.","m.mentions":{},"msgtype":"m.text"},"ts":1695776461249,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$O-6QnHimmNH412I3selHH_a8woMOcR5tC-c5U9kquRc"},
{"content":{"body":" * I've updated https://github.com/tc39/proposal-throw-expressions/pull/18 to use Static Semantics rules to avoid ASI for `+`, `-`, `/`, and `/=`, in keeping with how we also use Static Semantics rules to avoid ASI for optional chains followed by a template literal on a following line. I don't believe the end result is as complex as was suggested, but I'd appreciate if anyone with time could take a look over it as I am still short a reviewer.","format":"org.matrix.custom.html","formatted_body":" * I've updated https://github.com/tc39/proposal-throw-expressions/pull/18 to use Static Semantics rules to avoid ASI for <code>+</code>, <code>-</code>, <code>/</code>, and <code>/=</code>, in keeping with how we also use Static Semantics rules to avoid ASI for optional chains followed by a template literal on a following line. I don't believe the end result is as complex as was suggested, but I'd appreciate if anyone with time could take a look over it as I am still short a reviewer.","m.mentions":{},"m.new_content":{"body":"I've updated https://github.com/tc39/proposal-throw-expressions/pull/18 to use Static Semantics rules to avoid ASI for `+`, `-`, `/`, and `/=`, in keeping with how we also use Static Semantics rules to avoid ASI for optional chains followed by a template literal on a following line. I don't believe the end result is as complex as was suggested, but I'd appreciate if anyone with time could take a look over it as I am still short a reviewer.","format":"org.matrix.custom.html","formatted_body":"I've updated https://github.com/tc39/proposal-throw-expressions/pull/18 to use Static Semantics rules to avoid ASI for <code>+</code>, <code>-</code>, <code>/</code>, and <code>/=</code>, in keeping with how we also use Static Semantics rules to avoid ASI for optional chains followed by a template literal on a following line. I don't believe the end result is as complex as was suggested, but I'd appreciate if anyone with time could take a look over it as I am still short a reviewer.","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$O-6QnHimmNH412I3selHH_a8woMOcR5tC-c5U9kquRc","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695776534400,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$4QnUNqm9CTk3jZIgiAHOqihRu_JT56pRRWW0G7NRQio"},
{"content":{"body":"i was going to say \"tcq needs updating\" but i refreshed and it's not loading at all for me","m.mentions":{},"msgtype":"m.text"},"ts":1695776545385,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$g3Snko8c6Vj1QI7-Pm7yIrQu8l0WfCSNXvslCd6zWz4"},
{"content":{"body":"TCQ down for everyone or just me?","m.mentions":{},"msgtype":"m.text"},"ts":1695776548740,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$-WtcZ7PSDNHwflZNTIo7qCiuuGwZPCbgpHE04lHimQs"},
{"content":{"body":" * i was going to say \"tcq needs updating\" but i refreshed and it's not loading at all for me now, just hanging","m.mentions":{},"m.new_content":{"body":"i was going to say \"tcq needs updating\" but i refreshed and it's not loading at all for me now, just hanging","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$g3Snko8c6Vj1QI7-Pm7yIrQu8l0WfCSNXvslCd6zWz4","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695776550410,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$c6bFeh-sPzy92hrx8sF6A1Kb6fyhiU_pkM3r8X5ScWs"},
{"content":{"body":"tcqdownforeveryone.status","msgtype":"m.text"},"ts":1695776565036,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$9jOtK1wedpJoH8SuSdEB80goixT23rmT7uRaFMT48OA"},
{"content":{"body":"this would never happen if it was using IBM infra!  `/s`","format":"org.matrix.custom.html","formatted_body":"this would never happen if it was using IBM infra!  <code>/s</code>","m.mentions":{},"msgtype":"m.text"},"ts":1695776597945,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$orIhslyNuTzUz4JzJR4Rajy03Cuob800aKMwINuDsfg"},
{"content":{"body":"TCQ appears to be operational once again","m.mentions":{},"msgtype":"m.text"},"ts":1695776638288,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$5NUmRZpzdStQKeDVIM_eux1omOQ4zQGLtvSlEfvxYVg"},
{"content":{"body":"🤞","m.mentions":{},"msgtype":"m.text"},"ts":1695776649407,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$BlpjI7jMEQOvHRUmOM-f1er8wWdGhB8hUopBJtqRLII"},
{"content":{"body":"> <@ljharb:matrix.org> i doubt anything that even tacitly encourages omission of semicolons will achieve consensus :-)\n\nyeah , we lost the feasibility forever after ES2020.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$US81hfi4So6AlHwhjZ3AvGupnB21CDC9QJtsPej83qs?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>i doubt anything that even tacitly encourages omission of semicolons will achieve consensus :-)</blockquote></mx-reply>yeah , we lost the feasibility forever after ES2020.","m.mentions":{"user_ids":["@ljharb:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$US81hfi4So6AlHwhjZ3AvGupnB21CDC9QJtsPej83qs"}},"msgtype":"m.text"},"ts":1695776663496,"senderName":"hax (HE Shi-Jun)","senderId":"@haxjs:matrix.org","id":"$yPjxCVbrDlJhwbO_x7JeilqTwWCird2e_hBsPJzaAbA"},
{"content":{"body":"not because of that, but because some number of us (at least one :-) ) feel that omitting semicolons isn't a good style to encourage.","m.mentions":{},"msgtype":"m.text"},"ts":1695776721460,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$nxnQlcuPzwE296SiJ8lC-cxsOjPQJg0Nhtv1Ln2dUzg"},
{"content":{"body":" * not because of that, but because some number of us (at least one 😄) feel that omitting semicolons isn't a good style to encourage.","m.mentions":{},"m.new_content":{"body":"not because of that, but because some number of us (at least one 😄) feel that omitting semicolons isn't a good style to encourage.","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$nxnQlcuPzwE296SiJ8lC-cxsOjPQJg0Nhtv1Ln2dUzg","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695776786918,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$6n3v9CbDVLP91w0rMF3eH9NSxn8ULwRXGMEJsGEM4Ok"},
{"content":{"body":" * not because of that, but because some number of us (at least one 😄) feel that omitting semicolons ~isn't a good~ is a harmful style to encourage.","m.mentions":{},"m.new_content":{"body":"not because of that, but because some number of us (at least one 😄) feel that omitting semicolons ~isn't a good~ is a harmful style to encourage.","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$nxnQlcuPzwE296SiJ8lC-cxsOjPQJg0Nhtv1Ln2dUzg","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695776846481,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$G21Gc3wp-V_wXPjP35rJMllCSutETJEVSs6-0KAX82U"},
{"content":{"body":" * not because of that, but because some number of us (at least one 😄) feel that omitting semicolons ~~isn't a good~~ is a harmful style to encourage.","m.mentions":{},"m.new_content":{"body":"not because of that, but because some number of us (at least one 😄) feel that omitting semicolons ~~isn't a good~~ is a harmful style to encourage.","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$nxnQlcuPzwE296SiJ8lC-cxsOjPQJg0Nhtv1Ln2dUzg","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695776850216,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$fNKVdNZpwSdvGKX8NMBiXRyjU6rOB7fnBAecJrUn7ko"},
{"content":{"body":" * not because of that, but because some number of us (at least one 😄) feel that omitting semicolons ~isn't a good~ is a harmful style to encourage.","m.mentions":{},"m.new_content":{"body":"not because of that, but because some number of us (at least one 😄) feel that omitting semicolons ~isn't a good~ is a harmful style to encourage.","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$nxnQlcuPzwE296SiJ8lC-cxsOjPQJg0Nhtv1Ln2dUzg","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695776853583,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$qYwT4HmIcokGO92RYhw1Fg_uoifgfzanCsL4EpfeZVM"},
{"content":{"body":"we should make a t-shirt","m.mentions":{},"msgtype":"m.text"},"ts":1695776965661,"senderName":"rkirsling","senderId":"@rkirsling:matrix.org","id":"$WusfujhuJ6plx89M4_kSc0njAphwBd-6ZCmAVLH0YQ8"},
{"content":{"body":"\"eat your vegetables and use your semicolons\"","m.mentions":{},"msgtype":"m.text"},"ts":1695776975487,"senderName":"rkirsling","senderId":"@rkirsling:matrix.org","id":"$TrrlAgSaBiXxotToajKAGcHgB1GeCHZy3vTTgw9J75U"},
{"content":{"body":"you should use your whole colon tbh","msgtype":"m.text"},"ts":1695776994889,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$untOo0KAzFBR2JsiVfvQC-gfIDqoXarcps1nHq9lxFk"},
{"content":{"body":"omitting semicolons is `eval()`!","format":"org.matrix.custom.html","formatted_body":"omitting semicolons is <code>eval()</code>!","m.mentions":{},"msgtype":"m.text"},"ts":1695777000020,"senderName":"Christian Ulbrich","senderId":"@christianulbrich:matrix.org","id":"$qwbUza0exY0hLh9I_HOYrb3g5qujD7vYmMIw042NOEs"},
{"content":{"body":"I never know how to understand the feedback \"we would like to see this done but are unwilling to dedicate resources to doing it ourselves\"","m.mentions":{},"msgtype":"m.text"},"ts":1695777416618,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$HLGrkIgYR1MiCliVNpC7Su6yiUpaULHnrKiB1J5Sdv4"},
{"content":{"body":"is there not an inherent conflict there?","m.mentions":{},"msgtype":"m.text"},"ts":1695777440621,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$ExhAdKSmFbqMckC-0h8CSra4b648PMRYtXa98SEOIhQ"},
{"content":{"body":"Michael Ficarra: i think you know in your heart how to understand that feedback","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@michaelficarra:matrix.org\">Michael Ficarra</a>: i think you know in your heart how to understand that feedback","msgtype":"m.text"},"ts":1695777472781,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$j-r656jo2ybzmRjOxmHYR59X5WQx9xDK7yAnR_l-lII"},
{"content":{"body":"> <@ljharb:matrix.org> not because of that, but because some number of us (at least one 😄) feel that omitting semicolons ~isn't a good~ is a harmful style to encourage.\n\nWhile I understand there are always people don't like omitting semicolons, also there are always people don't like to be forced to add semicolons. After all, I believe the original design of the language (by BE) encourage omitting semicolon, just like the most recent new application programming languages (swift, kotlin,  scala3, etc.) Unfortunately BE made some small mistakes and introduce ASI hazards (though the most ASI hazards patterns were not used by any one in early days), but it still fixable IMO, until ES2020 (the best time is ES5 of coz).","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$nxnQlcuPzwE296SiJ8lC-cxsOjPQJg0Nhtv1Ln2dUzg?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>not because of that, but because some number of us (at least one 😄) feel that omitting semicolons ~isn&#39;t a good~ is a harmful style to encourage.</blockquote></mx-reply>While I understand there are always people don't like omitting semicolons, also there are always people don't like to be forced to add semicolons. After all, I believe the original design of the language (by BE) encourage omitting semicolon, just like the most recent new application programming languages (swift, kotlin,  scala3, etc.) Unfortunately BE made some small mistakes and introduce ASI hazards (though the most ASI hazards patterns were not used by any one in early days), but it still fixable IMO, until ES2020 (the best time is ES5 of coz).","m.mentions":{"user_ids":["@ljharb:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$nxnQlcuPzwE296SiJ8lC-cxsOjPQJg0Nhtv1Ln2dUzg"}},"msgtype":"m.text"},"ts":1695777479549,"senderName":"hax (HE Shi-Jun)","senderId":"@haxjs:matrix.org","id":"$TdAmqIa3C_WRY2OvbUTIlMfNJ9s4ojC9KrbzMfXDqq8"},
{"content":{"body":"> <@ljharb:matrix.org> not because of that, but because some number of us (at least one 😄) feel that omitting semicolons ~isn't a good~ is a harmful style to encourage.\n\n * While I understand there are always people don't like omitting semicolons, also there are always people don't like to be forced to add semicolons. After all, I believe the original design of the language (by BE) encourage omitting semicolon, just like the most recent new application programming languages (swift, kotlin,  scala3, etc.) Unfortunately BE made some small mistakes and introduce ASI hazards (though the most ASI hazards patterns were not used by any one in early days), but it still fixable IMO, until ES2020 (the best time to fix asi harzards was ES5 strict mode, of coz).","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$nxnQlcuPzwE296SiJ8lC-cxsOjPQJg0Nhtv1Ln2dUzg?via=matrix.org&amp;via=mozilla.org&amp;via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>not because of that, but because some number of us (at least one 😄) feel that omitting semicolons ~isn't a good~ is a harmful style to encourage.</blockquote></mx-reply> * While I understand there are always people don't like omitting semicolons, also there are always people don't like to be forced to add semicolons. After all, I believe the original design of the language (by BE) encourage omitting semicolon, just like the most recent new application programming languages (swift, kotlin,  scala3, etc.) Unfortunately BE made some small mistakes and introduce ASI hazards (though the most ASI hazards patterns were not used by any one in early days), but it still fixable IMO, until ES2020 (the best time to fix asi harzards was ES5 strict mode, of coz).","m.mentions":{},"m.new_content":{"body":"While I understand there are always people don't like omitting semicolons, also there are always people don't like to be forced to add semicolons. After all, I believe the original design of the language (by BE) encourage omitting semicolon, just like the most recent new application programming languages (swift, kotlin,  scala3, etc.) Unfortunately BE made some small mistakes and introduce ASI hazards (though the most ASI hazards patterns were not used by any one in early days), but it still fixable IMO, until ES2020 (the best time to fix asi harzards was ES5 strict mode, of coz).","format":"org.matrix.custom.html","formatted_body":"While I understand there are always people don't like omitting semicolons, also there are always people don't like to be forced to add semicolons. After all, I believe the original design of the language (by BE) encourage omitting semicolon, just like the most recent new application programming languages (swift, kotlin,  scala3, etc.) Unfortunately BE made some small mistakes and introduce ASI hazards (though the most ASI hazards patterns were not used by any one in early days), but it still fixable IMO, until ES2020 (the best time to fix asi harzards was ES5 strict mode, of coz).","m.mentions":{"user_ids":["@ljharb:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$TdAmqIa3C_WRY2OvbUTIlMfNJ9s4ojC9KrbzMfXDqq8","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695777643778,"senderName":"hax (HE Shi-Jun)","senderId":"@haxjs:matrix.org","id":"$qiZnEtF0548aHu9h6m-FOXpWtCbvkiReBxtnb1bdrXg"},
{"content":{"body":"We should probably take this to TDZ;","m.mentions":{},"msgtype":"m.text"},"ts":1695777696244,"senderName":"Christian Ulbrich","senderId":"@christianulbrich:matrix.org","id":"$0jUSspuf7_lMd1TFe6zjDmEUWz09A7skanxSQj6Q4rg"},
{"content":{"body":"this still assumes that removing hazards from something hazardous is a \"fix\"","m.mentions":{},"m.relates_to":{"event_id":"$TdAmqIa3C_WRY2OvbUTIlMfNJ9s4ojC9KrbzMfXDqq8","is_falling_back":true,"m.in_reply_to":{"event_id":"$TdAmqIa3C_WRY2OvbUTIlMfNJ9s4ojC9KrbzMfXDqq8"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1695777724635,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$LKEWJbWyr0gqimSbt76KvcukiwtQgCQ4BuvhqS9qAYY"},
{"content":{"body":"this is a cool and relevant pr https://github.com/nodejs/node/pull/48528","m.mentions":{},"msgtype":"m.text"},"ts":1695777829092,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$zOnFQDpxbM2fJ_7ormtctJrCwgPIUBBM6sguE--maHc"},
{"content":{"body":"we actually see some huge performance boosts here","m.mentions":{},"msgtype":"m.text"},"ts":1695777937679,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$E_k-Imk6vMLxGqbybd5J66UzVBWzKuJAxjVD42DjgeI"},
{"content":{"body":"Yah, this will be considerably faster than `AsyncLocalStorage` in Node.js","format":"org.matrix.custom.html","formatted_body":"Yah, this will be considerably faster than <code>AsyncLocalStorage</code> in Node.js","msgtype":"m.text"},"ts":1695777958596,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$TX9npF4-ojDB_-Ikj9mYKl0dIl8Wc4Xl9hsMr1SH6LI"},
{"content":{"body":"Can you help me understanding this better?\n\n","format":"org.matrix.custom.html","formatted_body":"Can you help me understanding this better?","m.relates_to":{"event_id":"$HLGrkIgYR1MiCliVNpC7Su6yiUpaULHnrKiB1J5Sdv4","is_falling_back":true,"m.in_reply_to":{"event_id":"$HLGrkIgYR1MiCliVNpC7Su6yiUpaULHnrKiB1J5Sdv4"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1695778127666,"senderName":"leobalter","senderId":"@leobalter:matrix.org","id":"$QUp4mPaY0rRsNNWy_HyWqxAg0h0ToOroah1iyDTrXUc"},
{"content":{"body":"And it is using mechanisms that is already available in V8","m.mentions":{},"msgtype":"m.text"},"ts":1695778436057,"senderName":"Chengzhong Wu","senderId":"@legendecas:matrix.org","id":"$gMV6chkCF9rk3T5EW7NkcVfS00Nf6kXbGyBQceKXqyg"},
{"content":{"body":" * And it is using mechanisms that are already available in V8","m.mentions":{},"m.new_content":{"body":"And it is using mechanisms that are already available in V8","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$gMV6chkCF9rk3T5EW7NkcVfS00Nf6kXbGyBQceKXqyg","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695778439884,"senderName":"Chengzhong Wu","senderId":"@legendecas:matrix.org","id":"$iW81mhExx3ky-Wb2oTDLK9Hlh8oSGduatFdPPDVl6P8"},
{"content":{"body":"I was hoping for the same","m.mentions":{},"m.relates_to":{"event_id":"$HLGrkIgYR1MiCliVNpC7Su6yiUpaULHnrKiB1J5Sdv4","is_falling_back":true,"m.in_reply_to":{"event_id":"$QUp4mPaY0rRsNNWy_HyWqxAg0h0ToOroah1iyDTrXUc"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1695778543362,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$niC14mN98gP4JlHacbT5XRHEHM-1V8txRxxkE9sM-5w"},
{"content":{"body":"V8 is a mutable codebase","msgtype":"m.text"},"ts":1695778806233,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$B7P_gHDXHAG9R5sAmUmdS-Q8bD8MrnEYh-bPA1BFXjk"},
{"content":{"body":"i'd not consider the state things are today to be immutable -- e.g., don't assume `ContinuationPreservedEmbedderData` and its current performance characteristics to be like, unchanging facts of the world forever and forever","format":"org.matrix.custom.html","formatted_body":"i'd not consider the state things are today to be immutable -- e.g., don't assume <code>ContinuationPreservedEmbedderData</code> and its current performance characteristics to be like, unchanging facts of the world forever and forever","msgtype":"m.text"},"ts":1695778916541,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$YDyVAC8alp5PvuOoYHLNl9gZ3odcPmhbGrETBiKTiqk"},
{"content":{"body":"I still not convinced by the motivation of get-intrinsics. it looks tooooo specialized to me, only spec lawyer will use it","m.mentions":{},"msgtype":"m.text"},"ts":1695778923804,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$byc4VomRa46CQAPFEBPo9IzDTNkoGpEuU_uFgwVFkl4"},
{"content":{"body":"> <@shuyuguo:matrix.org> i'd not consider the state things are today to be immutable -- e.g., don't assume `ContinuationPreservedEmbedderData` and its current performance characteristics to be like, unchanging facts of the world forever and forever\n\nyeah that's why it hasn't merged yet","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$YDyVAC8alp5PvuOoYHLNl9gZ3odcPmhbGrETBiKTiqk?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@shuyuguo:matrix.org\">@shuyuguo:matrix.org</a><br>i'd not consider the state things are today to be immutable -- e.g., don't assume <code>ContinuationPreservedEmbedderData</code> and its current performance characteristics to be like, unchanging facts of the world forever and forever</blockquote></mx-reply>yeah that's why it hasn't merged yet","m.mentions":{"user_ids":["@shuyuguo:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$YDyVAC8alp5PvuOoYHLNl9gZ3odcPmhbGrETBiKTiqk"}},"msgtype":"m.text"},"ts":1695778975484,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$6RFa8KZqj1O9ejdyonne6Z99xE_tD7MaFbTw6Q1OTTg"},
{"content":{"body":"upstream discussion","m.mentions":{},"msgtype":"m.text"},"ts":1695778990119,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$a0YMus29cT8hcM3LOgSXsgVZA724DNZUfI4gzmkHZnQ"},
{"content":{"body":"sometimes in readmes, I link to issues for open questions. Or at least I try not to claim that they are already solved.","msgtype":"m.text"},"ts":1695779013029,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$lIgFzRnKwp-fr2wyoO8WRjqMsaFJZhCcPB9TE9uovGA"},
{"content":{"body":"> <@devsnek:matrix.org> yeah that's why it hasn't merged yet\n\nyet champions keep repeating the argument that \"no performance problem because V8 already ships this\"","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$6RFa8KZqj1O9ejdyonne6Z99xE_tD7MaFbTw6Q1OTTg?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@devsnek:matrix.org\">@devsnek:matrix.org</a><br>yeah that's why it hasn't merged yet</blockquote></mx-reply>yet champions keep repeating the argument that \"no performance problem because V8 already ships this\"","m.relates_to":{"m.in_reply_to":{"event_id":"$6RFa8KZqj1O9ejdyonne6Z99xE_tD7MaFbTw6Q1OTTg"}},"msgtype":"m.text"},"ts":1695779030980,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$NgtwvjJTzVYehUuM86Tyuuh1RZKnycZLURM4F3d-S14"},
{"content":{"body":"I can tell from my perspective how I want to dedicate resources on a proposal I’m championing going through a part that depends dedicated expertise that is out of my domain. This requires cross collaboration and contracting in which I’m doing. \n\nYet I’m not sure if you’re referring to me on ShadowRealm, so I don’t know if that’s the clarification you’re looking for, as you are also not asking for me directly or in a way that makes it seem you’re actually trying to understand.\n\nWith that said, it took us time, but we are happy to work again with people that can provide the expertise to complete the tasks needed.\n\nI’m also glad that TC39 is composed by a diverse set of expertises and backgrounds. We all must aim for the goal of interoperability, which is the best value of JS.","format":"org.matrix.custom.html","formatted_body":"<p>I can tell from my perspective how I want to dedicate resources on a proposal I’m championing going through a part that depends dedicated expertise that is out of my domain. This requires cross collaboration and contracting in which I’m doing.</p>\n<p>Yet I’m not sure if you’re referring to me on ShadowRealm, so I don’t know if that’s the clarification you’re looking for, as you are also not asking for me directly or in a way that makes it seem you’re actually trying to understand.</p>\n<p>With that said, it took us time, but we are happy to work again with people that can provide the expertise to complete the tasks needed.</p>\n<p>I’m also glad that TC39 is composed by a diverse set of expertises and backgrounds. We all must aim for the goal of interoperability, which is the best value of JS.</p>","m.relates_to":{"event_id":"$HLGrkIgYR1MiCliVNpC7Su6yiUpaULHnrKiB1J5Sdv4","is_falling_back":true,"m.in_reply_to":{"event_id":"$niC14mN98gP4JlHacbT5XRHEHM-1V8txRxxkE9sM-5w"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1695779038618,"senderName":"leobalter","senderId":"@leobalter:matrix.org","id":"$_G386P-ALhX3C3AtWg92LOoYD21PVvx6-vTh4Hb7GWI"},
{"content":{"body":"> <@shuyuguo:matrix.org> i'd not consider the state things are today to be immutable -- e.g., don't assume `ContinuationPreservedEmbedderData` and its current performance characteristics to be like, unchanging facts of the world forever and forever\n\nIt's more like an existence proof that this technique isn't way too slow--I would've assumed the opposite before this had shipped.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$YDyVAC8alp5PvuOoYHLNl9gZ3odcPmhbGrETBiKTiqk?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@shuyuguo:matrix.org\">@shuyuguo:matrix.org</a><br>i'd not consider the state things are today to be immutable -- e.g., don't assume <code>ContinuationPreservedEmbedderData</code> and its current performance characteristics to be like, unchanging facts of the world forever and forever</blockquote></mx-reply>It's more like an existence proof that this technique isn't way too slow--I would've assumed the opposite before this had shipped.","m.relates_to":{"m.in_reply_to":{"event_id":"$YDyVAC8alp5PvuOoYHLNl9gZ3odcPmhbGrETBiKTiqk"}},"msgtype":"m.text"},"ts":1695779067886,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$kGBXzJTBnwKfdsLkywbf15jLYYkYOuwSj9pIwPlVz7k"},
{"content":{"body":"> <@littledan:matrix.org> It's more like an existence proof that this technique isn't way too slow--I would've assumed the opposite before this had shipped.\n\nor it isn't way too much used","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$kGBXzJTBnwKfdsLkywbf15jLYYkYOuwSj9pIwPlVz7k?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@littledan:matrix.org\">@littledan:matrix.org</a><br>It's more like an existence proof that this technique isn't way too slow--I would've assumed the opposite before this had shipped.</blockquote></mx-reply>or it isn't way too much used","m.mentions":{"user_ids":["@littledan:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$kGBXzJTBnwKfdsLkywbf15jLYYkYOuwSj9pIwPlVz7k"}},"msgtype":"m.text"},"ts":1695779082841,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$LYueoY3xUE25zDp40ga4oUo4MISJYEfROqMkYsN2ZFc"},
{"content":{"body":"like with.","m.mentions":{},"msgtype":"m.text"},"ts":1695779095799,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$NhiLGN1DVf5RXc4_hMSSSItGeP9XbzUz501gV-Lib70"},
{"content":{"body":"the copy is being done unconditionally","msgtype":"m.text"},"ts":1695779096045,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$OLch1S-lCEr4VfKRf-qZ88aMaOrConJgUWqcc70OTsI"},
{"content":{"body":"i understand the state of the world today","msgtype":"m.text"},"ts":1695779115720,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$5rCt0r9iqJnJpSRF7p5o06Sr8QUSpB1Lf5_vgCQDyP4"},
{"content":{"body":"> <@devsnek:matrix.org> yeah that's why it hasn't merged yet\n\nWhat is it that hasn't merged?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$6RFa8KZqj1O9ejdyonne6Z99xE_tD7MaFbTw6Q1OTTg?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@devsnek:matrix.org\">@devsnek:matrix.org</a><br>yeah that's why it hasn't merged yet</blockquote></mx-reply>What is it that hasn't merged?","m.relates_to":{"m.in_reply_to":{"event_id":"$6RFa8KZqj1O9ejdyonne6Z99xE_tD7MaFbTw6Q1OTTg"}},"msgtype":"m.text"},"ts":1695779117153,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$dVpHmb8TFyVxxZQGyhGHO02B7l9Nf1FuOpGCiCJQjnA"},
{"content":{"body":"(but actually I found `with` does not _that_ bad on performance, at least in JSC)","format":"org.matrix.custom.html","formatted_body":"(but actually I found <code>with</code> does not <em>that</em> bad on performance, at least in JSC)","m.mentions":{},"msgtype":"m.text"},"ts":1695779122993,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$FYqzeM02BtqiZ6brE6BgGBtRT6F6mz8d8X91RF9BtZg"},
{"content":{"body":"the pr i linked","m.mentions":{},"msgtype":"m.text"},"ts":1695779126822,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$GKPQVFpSoq8eaACp84LOOdH_HsL3fyG_uOoy6CEwG5w"},
{"content":{"body":"i am saying, V8 retains the optionality to _become_ unhappy with CPED","format":"org.matrix.custom.html","formatted_body":"i am saying, V8 retains the optionality to <em>become</em> unhappy with CPED","msgtype":"m.text"},"ts":1695779132897,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$Xn5V9HYYA2P4WKTG70knirf24qEpBrCGVLWsmi8rQbY"},
{"content":{"body":"because like shu said, google isn't sure that CPED will continue to exist","m.mentions":{},"msgtype":"m.text"},"ts":1695779142894,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$GfS1tE-2LVbTuSJCG6FZv4RIlw8qYJS7vNfL_oOGSA0"},
{"content":{"body":"what is CPED, Carnegie Project on the Education Doctorate?","m.mentions":{},"msgtype":"m.text"},"ts":1695779169450,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$PKnfN8sOfTf7YSZjl5lUZewzegw0mTPWrwf3peedB2M"},
{"content":{"body":"ContinuationPreservedEmbedderData","m.mentions":{},"msgtype":"m.text"},"ts":1695779178239,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$7SBznR6gYltjRwLM3s8-SN9dIX05hCjwILdkXj43dJM"},
{"content":{"body":"> <@devsnek:matrix.org> ContinuationPreservedEmbedderData\n\nStill not understand what is it 🤣","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$7SBznR6gYltjRwLM3s8-SN9dIX05hCjwILdkXj43dJM?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@devsnek:matrix.org\">@devsnek:matrix.org</a><br>ContinuationPreservedEmbedderData</blockquote></mx-reply>Still not understand what is it 🤣","m.mentions":{"user_ids":["@devsnek:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$7SBznR6gYltjRwLM3s8-SN9dIX05hCjwILdkXj43dJM"}},"msgtype":"m.text"},"ts":1695779241963,"senderName":"hax (HE Shi-Jun)","senderId":"@haxjs:matrix.org","id":"$eQMJUYI8-0rYHzisxMZBWnobPhFhkrqkJMw2VcWEWN0"},
{"content":{"body":"> <@haxjs:matrix.org> Still not understand what is it 🤣\n\nits sort of like [[AsyncContextSnapshot]] in the async context proposal","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$eQMJUYI8-0rYHzisxMZBWnobPhFhkrqkJMw2VcWEWN0?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@haxjs:matrix.org\">@haxjs:matrix.org</a><br>Still not understand what is it 🤣</blockquote></mx-reply>its sort of like [[AsyncContextSnapshot]] in the async context proposal","m.mentions":{"user_ids":["@haxjs:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$eQMJUYI8-0rYHzisxMZBWnobPhFhkrqkJMw2VcWEWN0"}},"msgtype":"m.text"},"ts":1695779291133,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$Q0HkLKNMWxC_xc0r0zWoFttXLsVaI2F1VissKi3Od4I"},
{"content":{"body":"though it doesn't map exactly","m.mentions":{},"msgtype":"m.text"},"ts":1695779294838,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$kmjtjiFwqR5o6k-dTaUe1whRQ0oHv1Kp9a94SJL6IjQ"},
{"content":{"body":"every variadic function makes TS team sweat...","m.mentions":{},"msgtype":"m.text"},"ts":1695779296328,"senderName":"Christian Ulbrich","senderId":"@christianulbrich:matrix.org","id":"$V0DiP7uifPoA-8LnTQIuKUa6gvqWp_dKsdHG8-ldskw"},
{"content":{"body":"> <@christianulbrich:matrix.org> every variadic function makes TS team sweat...\n\n<T>(a: T): [T]\n<T, T1>(a: T, b: T1): [T, T1]\n<T, T1, T2>(a: T, b: T1, c: T2): [T, T1, T2]\n...","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$V0DiP7uifPoA-8LnTQIuKUa6gvqWp_dKsdHG8-ldskw?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@christianulbrich:matrix.org\">@christianulbrich:matrix.org</a><br>every variadic function makes TS team sweat...</blockquote></mx-reply>&lt;T&gt;(a: T): [T]<br>&lt;T, T1&gt;(a: T, b: T1): [T, T1]<br>&lt;T, T1, T2&gt;(a: T, b: T1, c: T2): [T, T1, T2]<br>...","m.mentions":{"user_ids":["@christianulbrich:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$V0DiP7uifPoA-8LnTQIuKUa6gvqWp_dKsdHG8-ldskw"}},"msgtype":"m.text"},"ts":1695779379722,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$d0Y2gWhTsH23QMvVy39QeT4cL5GDI2Z5J5Up3jVlpWw"},
{"content":{"body":"it happens in many languages","m.mentions":{},"msgtype":"m.text"},"ts":1695779390146,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$9H2vR8ndyYBOFmLkHwfJVGvtMzv7BckZ0tGMRyxtugQ"},
{"content":{"body":"i don't think \"i don't have an iterable\" is a problem in practice","m.mentions":{},"msgtype":"m.text"},"ts":1695779524019,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$QDMX1YHLPnpvzuA_8ee2eIVYI5VWpo_yhUGs5NvR1nI"},
{"content":{"body":"if you have more than 0 things, there is generally a way to turn at least one of them into the head of the iterator","m.mentions":{},"msgtype":"m.text"},"ts":1695779559033,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$x1-2bqzkG9CLO_5C9va7aERe6bplKvLRsgfbIcEUT9w"},
{"content":{"body":"[].values, Iterator.from, etc etc","m.mentions":{},"msgtype":"m.text"},"ts":1695779566987,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$18mYEc-Rs9JZoQ_4Dy3qIAe_zvS4WMPWNsC2WmH_q10"},
{"content":{"body":"`Iterator.once(value)` is potentially an option, assuming it were lighter weight than just using a single-element array.","format":"org.matrix.custom.html","formatted_body":"<code>Iterator.once(value)</code> is potentially an option, assuming it were lighter weight than just using a single-element array.","m.mentions":{},"msgtype":"m.text"},"ts":1695779857289,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$MyipAQpTBgNB8QBR8-GeT7a_R_FntzcZYyhI2-6C-vs"},
{"content":{"body":"`Iterator.of`, surely?","format":"org.matrix.custom.html","formatted_body":"<code>Iterator.of</code>, surely?","m.mentions":{},"msgtype":"m.text"},"ts":1695779871482,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$HpnlmLKIIAjxya5J2GeVuWAyPSi7qTb0RSq6bagPJRo"},
{"content":{"body":"> <@shuyuguo:matrix.org> i'd not consider the state things are today to be immutable -- e.g., don't assume `ContinuationPreservedEmbedderData` and its current performance characteristics to be like, unchanging facts of the world forever and forever\n\nMy design for AsyncContext was independent of CPED, it just happens that CPED is the exact same thing that's needed (it's based on the poorlyfill I implemented for Vercel). The priority is today's code is unaffected by the proposal (tasks need to store an additional pointer), resuming a task is unaffected (only a pointer swap), and we can figure out how to optimize creating new context afterwards. I found CPED while digging through the V8 codebase's host hooks afterwards, and it did exactly what I wanted.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$YDyVAC8alp5PvuOoYHLNl9gZ3odcPmhbGrETBiKTiqk?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@shuyuguo:matrix.org\">@shuyuguo:matrix.org</a><br>i'd not consider the state things are today to be immutable -- e.g., don't assume <code>ContinuationPreservedEmbedderData</code> and its current performance characteristics to be like, unchanging facts of the world forever and forever</blockquote></mx-reply>My design for AsyncContext was independent of CPED, it just happens that CPED is the exact same thing that's needed (it's based on the poorlyfill I implemented for Vercel). The priority is today's code is unaffected by the proposal (tasks need to store an additional pointer), resuming a task is unaffected (only a pointer swap), and we can figure out how to optimize creating new context afterwards. I found CPED while digging through the V8 codebase's host hooks afterwards, and it did exactly what I wanted.","m.relates_to":{"m.in_reply_to":{"event_id":"$YDyVAC8alp5PvuOoYHLNl9gZ3odcPmhbGrETBiKTiqk"}},"msgtype":"m.text"},"ts":1695779904821,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$Mfd6y4Dt6zWUpGBcNOch2KgRQ8H425VQZGx9Wvl2GQg"},
{"content":{"body":"But generally, I'm fine with `concat`/`append`. I use them in my own packages.","format":"org.matrix.custom.html","formatted_body":"But generally, I'm fine with <code>concat</code>/<code>append</code>. I use them in my own packages.","m.mentions":{},"msgtype":"m.text"},"ts":1695779905933,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$nrJoaJRY5DxJL0LvpZ5p_UBzGlHQRDe9JDDdD2RYPzQ"},
{"content":{"body":"there is iter::once(value) in rust but i have basically never seen any code that uses it","m.mentions":{},"msgtype":"m.text"},"ts":1695779943803,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$_TQgvQnIeQnKp4DDyOrQg9D-LkuqUKTZaQ3EAX_qVXw"},
{"content":{"body":"i'm sure it exists","m.mentions":{},"msgtype":"m.text"},"ts":1695779945603,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$YUGD1-TZCh08QyqFp_n_6TIQ78FubC1-ce1XrBpuFY8"},
{"content":{"body":"but its far more uncommon than chaining so i wouldn't want to over-index on that","m.mentions":{},"msgtype":"m.text"},"ts":1695779955094,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$jKP7zllO8g3qKb60duRVzF4dZndN1mP0huM75SyJM04"},
{"content":{"body":"Justin Ridgewell: i am responding to the argument that's repeatedly been put forth that this will not have performance problems because CPED exists in V8","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jridgewell:matrix.org\">Justin Ridgewell</a>: i am responding to the argument that's repeatedly been put forth that this will not have performance problems because CPED exists in V8","msgtype":"m.text"},"ts":1695779961562,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$VFZ4RGr9-BYxxL9g-xT4uSCK4_w0VzN-FUbmUJhqc4M"},
{"content":{"body":"When I saw `Iterator.of` I immediately thought of `RxJS.of()` , though it has been while, that I did reactive streams, `.of()` looks like a good choice...","format":"org.matrix.custom.html","formatted_body":"When I saw <code>Iterator.of</code> I immediately thought of <code>RxJS.of()</code> , though it has been while, that I did reactive streams, <code>.of()</code> looks like a good choice...","m.mentions":{},"msgtype":"m.text"},"ts":1695779976878,"senderName":"Christian Ulbrich","senderId":"@christianulbrich:matrix.org","id":"$Hwy01WmEcmZaEPaa59xstU7WhGaaDhODvH3ycjBI9Rw"},
{"content":{"body":"Also `Array.of`","format":"org.matrix.custom.html","formatted_body":"Also <code>Array.of</code>","m.mentions":{},"msgtype":"m.text"},"ts":1695779996005,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$lubkpa_SOPkAHdnCd4J_E5ELE8ygN6VPh35qON-9gjA"},
{"content":{"body":"Justin Ridgewell: i just want to make the point that that argument is not strictly true, since V8 retains the optionality to become unhappy with the performance CPED as it stands today","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jridgewell:matrix.org\">Justin Ridgewell</a>: i just want to make the point that that argument is not strictly true, since V8 retains the optionality to become unhappy with the performance CPED as it stands today","msgtype":"m.text"},"ts":1695779996046,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$g80isv_OMNzWZ8mGwbMuHkWBjMikaZhWtRaKUHF3Uy8"},
{"content":{"body":"all this being said, i don't know *why* v8 doesn't like CPED ","format":"org.matrix.custom.html","formatted_body":"all this being said, i don't know <em>why</em> v8 doesn't like CPED","m.mentions":{},"msgtype":"m.text"},"ts":1695780017512,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$rcczl3B3YvwjTt4qTGHMcNWkf6KkfhJFiZVbENYr0Ks"},
{"content":{"body":"i just know that every time it comes up someone from v8 makes sure to say that","m.mentions":{},"msgtype":"m.text"},"ts":1695780025943,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$vF-RWR_j1rWAVIJiK7Qp1ccTHf2sfZFiuU2dqvZ8Rvg"},
{"content":{"body":"I'll also add the C# has `Concat`, `Append`, and `Prepend` as well.","format":"org.matrix.custom.html","formatted_body":"I'll also add the C# has <code>Concat</code>, <code>Append</code>, and <code>Prepend</code> as well.","m.mentions":{},"msgtype":"m.text"},"ts":1695780043205,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$Kt4sya7brEv2EanvfrZRpR_GpptVRVma3t39cng0iBI"},
{"content":{"body":"we don't like it because it unconditionally incurs memory cost on every callback","msgtype":"m.text"},"ts":1695780048238,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$LmFUOeTGRjfZmvZAbH8NjYuxFgu9FKbUbRUg1Z1seVY"},
{"content":{"body":"> <@shuyuguo:matrix.org> Justin Ridgewell: i just want to make the point that that argument is not strictly true, since V8 retains the optionality to become unhappy with the performance CPED as it stands today\n\nIf CPED is changed, that's fine. I think we're abusing it because it exists. AsyncContext requires something with similar functionality (global pointer, store a pointer on tasks, restore that pointer to resume). ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$g80isv_OMNzWZ8mGwbMuHkWBjMikaZhWtRaKUHF3Uy8?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@shuyuguo:matrix.org\">@shuyuguo:matrix.org</a><br><a href=\"https://matrix.to/#/@jridgewell:matrix.org\">Justin Ridgewell</a>: i just want to make the point that that argument is not strictly true, since V8 retains the optionality to become unhappy with the performance CPED as it stands today</blockquote></mx-reply>If CPED is changed, that's fine. I think we're abusing it because it exists. AsyncContext requires something with similar functionality (global pointer, store a pointer on tasks, restore that pointer to resume).","m.relates_to":{"m.in_reply_to":{"event_id":"$g80isv_OMNzWZ8mGwbMuHkWBjMikaZhWtRaKUHF3Uy8"}},"msgtype":"m.text"},"ts":1695780084413,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$ZC3sJVmUHfYfo8lK2yGIdCpJoE4eX1bhHBUNBuaFoCM"},
{"content":{"body":"sounds good","msgtype":"m.text"},"ts":1695780096026,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$hO2KrTRSmf6QYZMXYWsx7DaH-3gElqe55fg4ZiVBpTA"},
{"content":{"body":"that matches my understanding","msgtype":"m.text"},"ts":1695780100377,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$Gnzm0k9U6g6MRnpV-sSLGjxeLmA_L7mj0tNSIRM0o1M"},
{"content":{"body":"> <@shuyuguo:matrix.org> Justin Ridgewell: i am responding to the argument that's repeatedly been put forth that this will not have performance problems because CPED exists in V8\n\nIt just proves that it can be implemented in a way that gives you the same performance as today's V8, which as Dan said, was unexpected for everyone.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$VFZ4RGr9-BYxxL9g-xT4uSCK4_w0VzN-FUbmUJhqc4M?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@shuyuguo:matrix.org\">@shuyuguo:matrix.org</a><br><a href=\"https://matrix.to/#/@jridgewell:matrix.org\">Justin Ridgewell</a>: i am responding to the argument that's repeatedly been put forth that this will not have performance problems because CPED exists in V8</blockquote></mx-reply>It just proves that it can be implemented in a way that gives you the same performance as today's V8, which as Dan said, was unexpected for everyone.","m.relates_to":{"m.in_reply_to":{"event_id":"$VFZ4RGr9-BYxxL9g-xT4uSCK4_w0VzN-FUbmUJhqc4M"}},"msgtype":"m.text"},"ts":1695780130512,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$1OvnwAYIUfRQYXfyajpX_pP1nfAGAcU0NhBWud3XkyE"},
{"content":{"body":"maybe in a few more years, we'll catch up with Python Itertools as of 2007!","msgtype":"m.text"},"ts":1695780141573,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$WytVq7oZXQ_5IedGqdkqmHon2z6HjfGSSyyBNEp70Qw"},
{"content":{"body":"great work Michael Ficarra ","format":"org.matrix.custom.html","formatted_body":"great work <a href=\"https://matrix.to/#/@michaelficarra:matrix.org\">Michael Ficarra</a>","msgtype":"m.text"},"ts":1695780151347,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$W7JfPnA1L6Upp9EN949IATiTztvlk_JjhwCcRpphUow"},
{"content":{"body":"it is funny how much effort it takes to add a suite of functionality to js","m.mentions":{},"msgtype":"m.text"},"ts":1695780163919,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$d2aH84uTs1ykhRXll73KwWwixGzgilesO1FWNr7NWQk"},
{"content":{"body":"thanks littledan 🙂","format":"org.matrix.custom.html","formatted_body":"thanks <a href=\"https://matrix.to/#/@littledan:matrix.org\">littledan</a> 🙂","m.mentions":{"user_ids":["@littledan:matrix.org"]},"msgtype":"m.text"},"ts":1695780164825,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$xHzrghvwe9Yvsox3cNQNKkWiX-XLL9LbFoEzVbKIdf8"},
{"content":{"body":"watching how rust has evolved. stuff like \"chain\" barely gets any attention by anyone, whereas we have an entire proposal dedicated just to it","m.mentions":{},"msgtype":"m.text"},"ts":1695780185636,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$vC-eZjoOxFXh3XxxbENdbacX7syEDQQdwL6qbfRwAfU"},
{"content":{"body":"snek: I actually appreciate that because I didn't realise how many possible shapes of solutions there were to these problem spaces","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@devsnek:matrix.org\">snek</a>: I actually appreciate that because I didn't realise how many possible shapes of solutions there were to these problem spaces","m.mentions":{"user_ids":["@devsnek:matrix.org"]},"msgtype":"m.text"},"ts":1695780197511,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$-VrLEf27WY98kFT8kmu-WVZtif7Bi_Q8PjcW7aHi1Yc"},
{"content":{"body":"need conclusion+summary for iterator sequencing  🙏","m.mentions":{},"msgtype":"m.text"},"ts":1695780212205,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$XRssQ8pCs1BLpQFIh295yk4xE5prLz_OkoPHPE9gin0"},
{"content":{"body":"oh yeah its definitely important to consider these things","m.mentions":{},"msgtype":"m.text"},"ts":1695780215459,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$2k5ND0MdS4eKm9G4brSRC0jIq3hVFOt8wfz588Heh1A"},
{"content":{"body":"I am confident that our process will produce a great solution here","m.mentions":{},"msgtype":"m.text"},"ts":1695780222754,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$tuDZIaJKd_ulHu_3IGdWdFnFEYlAvNqdaAqxPIxv2ro"},
{"content":{"body":"I think I'm still confused by the use of `.values`","format":"org.matrix.custom.html","formatted_body":"I think I'm still confused by the use of <code>.values</code>","m.mentions":{},"msgtype":"m.text"},"ts":1695780256451,"senderName":"rkirsling","senderId":"@rkirsling:matrix.org","id":"$N9rdCkkBPtCGU_UE59T4W-4pjzY7MXZ9rvM3Is8LoYs"},
{"content":{"body":"can we advance the queue","m.mentions":{},"msgtype":"m.text"},"ts":1695780258862,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$KcknSJ-hpCQgu3ewzxe-XrrDgkcgeZsSct0lx-gRhko"},
{"content":{"body":" * I think I'm still confused by the use of `.values()`","format":"org.matrix.custom.html","formatted_body":" * I think I'm still confused by the use of <code>.values()</code>","m.mentions":{},"m.new_content":{"body":"I think I'm still confused by the use of `.values()`","format":"org.matrix.custom.html","formatted_body":"I think I'm still confused by the use of <code>.values()</code>","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$N9rdCkkBPtCGU_UE59T4W-4pjzY7MXZ9rvM3Is8LoYs","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1695780258974,"senderName":"rkirsling","senderId":"@rkirsling:matrix.org","id":"$cUOO3Sy1TROfmlGbKvfe_NfP4LJ0xN-GQIP5FF8oblo"},
{"content":{"body":"rkirsling: don't worry about it, you will never need to use that","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@rkirsling:matrix.org\">rkirsling</a>: don't worry about it, you will never need to use that","m.mentions":{"user_ids":["@rkirsling:matrix.org"]},"msgtype":"m.text"},"ts":1695780274282,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$MvzWCSjDZ6tBKWZxc0fmmC7TrBlTOG79HWrfYy4ymtE"},
{"content":{"body":"> <@michaelficarra:matrix.org> I am confident that our process will produce a great solution here\n\nIt's just to get an iterator from which you can call flatMap, which will then do the concat","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$tuDZIaJKd_ulHu_3IGdWdFnFEYlAvNqdaAqxPIxv2ro?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@michaelficarra:matrix.org\">@michaelficarra:matrix.org</a><br>I am confident that our process will produce a great solution here</blockquote></mx-reply>It's just to get an iterator from which you can call flatMap, which will then do the concat","m.relates_to":{"m.in_reply_to":{"event_id":"$tuDZIaJKd_ulHu_3IGdWdFnFEYlAvNqdaAqxPIxv2ro"}},"msgtype":"m.text"},"ts":1695780303617,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$tSAZ2wN-enNl_fK7dBuRRuRmVydKhQeDqUDv-wTk0Ps"},
{"content":{"body":"rkirsling: ^","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@rkirsling:matrix.org\">rkirsling</a>: ^","m.mentions":{"user_ids":["@rkirsling:matrix.org"]},"msgtype":"m.text"},"ts":1695780327135,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$cV_0uOyabq1t4TWtSiASD4yFefpgBFCz4tVc9EVfyoo"},
{"content":{"body":"TCQ has returned","m.mentions":{},"msgtype":"m.text"},"ts":1695780333029,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$0s-2xpHgUurtu9Vcyxnvq8bs1w85tl2MQQ4xPcdVzCQ"},
{"content":{"body":"high level the pattern is just flatMap(iterator of iterators)","m.mentions":{},"msgtype":"m.text"},"ts":1695780339267,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$thWsHlECxajrq4z4IuMb9w4atCP5ZHCDOrMP05ox6Cw"},
{"content":{"body":"oh thank god","m.mentions":{},"msgtype":"m.text"},"ts":1695780340447,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$Y0iuapuCOZnz0UWwgTrYC3xPDLeqkWyGDKDMlly-eO0"},
{"content":{"body":"petition to add `iter` as an alias for symbol.iterator on all built-in iterators","format":"org.matrix.custom.html","formatted_body":"petition to add <code>iter</code> as an alias for symbol.iterator on all built-in iterators","m.mentions":{},"msgtype":"m.text"},"ts":1695780364433,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$0SvNSt8c2nu5n836lVxQIvWiG6pjKFlUVqaxFHh5T2w"},
{"content":{"body":"only if we can use `::`","format":"org.matrix.custom.html","formatted_body":"only if we can use <code>::</code>","m.mentions":{},"msgtype":"m.text"},"ts":1695780374183,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$GTaKSnM-kdWBPGb_rsmRbqX35xVD8Cr-oEqlptnH0LU"},
{"content":{"body":":(","m.mentions":{},"msgtype":"m.text"},"ts":1695780383302,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$UFbyrdhJeqHa7NvfcAIO3It-cpYRB5O5QILNlQRWSxc"},
{"content":{"body":"> <@bakkot:matrix.org> petition to add `iter` as an alias for symbol.iterator on all built-in iterators\n\ni think i'd be OK with this","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$0SvNSt8c2nu5n836lVxQIvWiG6pjKFlUVqaxFHh5T2w?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@bakkot:matrix.org\">@bakkot:matrix.org</a><br>petition to add <code>iter</code> as an alias for symbol.iterator on all built-in iterators</blockquote></mx-reply>i think i'd be OK with this","m.mentions":{"user_ids":["@bakkot:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$0SvNSt8c2nu5n836lVxQIvWiG6pjKFlUVqaxFHh5T2w"}},"msgtype":"m.text"},"ts":1695780401693,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$VJmlooW-peBj9lAunxIw4n-YVNS6vDA9H3EhvFdzYaA"},
{"content":{"body":"so from the discussion today, I think I will lean toward `Iterator.of/Iterator.prototype.flat` for iterator sequencing stage 2","format":"org.matrix.custom.html","formatted_body":"so from the discussion today, I think I will lean toward <code>Iterator.of/Iterator.prototype.flat</code> for iterator sequencing stage 2","m.mentions":{},"msgtype":"m.text"},"ts":1695780502647,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$40o3U34I0KU1v6hbM9C92GttgIsw50apmxuaQEHyr-0"},
{"content":{"body":":(","m.mentions":{},"msgtype":"m.text"},"ts":1695780522670,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$rjs3iKra2BWQeLJ_q3OJ2fY9PEUw428j83HSbnU54GM"},
{"content":{"body":"and as a bonus, those methods are useful for other things","m.mentions":{},"msgtype":"m.text"},"ts":1695780524119,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$x0SnfmByF0t5GdiHz2SrM_GB-zuotBAwaexiewzaa3w"},
{"content":{"body":"I do not think people will reach for that","m.mentions":{},"msgtype":"m.text"},"ts":1695780526246,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$L30szf43eY8iLsC_0JO-yH2waf8XQHSLM34npxHem7Y"},
{"content":{"body":"I would really like a method named something obvious","m.mentions":{},"msgtype":"m.text"},"ts":1695780530678,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$HXrGZHLaD8Dd_PrBRVuNBjBIEU8owux3kSNLxuZ7M9E"},
{"content":{"body":"that makes it clear you are doing concatenation","m.mentions":{},"msgtype":"m.text"},"ts":1695780536851,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$cTE5ASByS_Aar9ZtH6qEoj-P49ymCZ-V659BH44iFvM"},
{"content":{"body":"i think a static method is a non-starter","m.mentions":{},"msgtype":"m.text"},"ts":1695780540203,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$gpbfg7jp7oFcU2Q9hSOpHspSPl8s7enRxjXD4MVvWpY"},
{"content":{"body":"for this problem space","m.mentions":{},"msgtype":"m.text"},"ts":1695780543284,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$vRg03dIGiUPuvhsEbwgbbsM-vNRO2Rw2gcE1Y6guQwo"},
{"content":{"body":"I'd be perfectly happy with `.concat`, `.append`, and `.prepend`","format":"org.matrix.custom.html","formatted_body":"I'd be perfectly happy with <code>.concat</code>, <code>.append</code>, and <code>.prepend</code>","m.mentions":{},"msgtype":"m.text"},"ts":1695780563164,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$GF6L_pkwdypoDpH-omhKb8zePg_icSfwi71Aml_1MKk"},
{"content":{"body":"also `flat` is problematic in ways that `concat` is not, wrt handling of non-iterable values","format":"org.matrix.custom.html","formatted_body":"also <code>flat</code> is problematic in ways that <code>concat</code> is not, wrt handling of non-iterable values","m.mentions":{},"msgtype":"m.text"},"ts":1695780583996,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$owEFQ3GjIjzdPQhINbqNBIg8nrJT8Db3N689Te9uxuU"},
{"content":{"body":"> <@devsnek:matrix.org> i don't think \"i don't have an iterable\" is a problem in practice\n\nit is very common in practice to have something that can either be one thing, or a list of things, and `[].concat(x)` is incredibly useful and commonplace to ensure one always has an array without having to care","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$QDMX1YHLPnpvzuA_8ee2eIVYI5VWpo_yhUGs5NvR1nI?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@devsnek:matrix.org\">@devsnek:matrix.org</a><br>i don&#39;t think &quot;i don&#39;t have an iterable&quot; is a problem in practice</blockquote></mx-reply>it is very common in practice to have something that can either be one thing, or a list of things, and <code>[].concat(x)</code> is incredibly useful and commonplace to ensure one always has an array without having to care","m.mentions":{"user_ids":["@devsnek:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$QDMX1YHLPnpvzuA_8ee2eIVYI5VWpo_yhUGs5NvR1nI"}},"msgtype":"m.text"},"ts":1695780604981,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$C1tc38PEcomKwKu2xw72GDgTeBtMWk7stEffYv0OvrE"}
]