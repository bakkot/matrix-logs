[
{"content":{"body":"> <@shuyuguo:matrix.org> i guarantee you adding a check to Array.prototype object lookups will regress speedometer\n\nIs this done by analyzing the creation of, or transition to, a new map that has an JS_ARRAY_TYPE type, or are you talking about patching actual assignments (i.e., to catch code that may not have moved to the optimizing compiler)?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$RmdoURPrz0GlnmwaETsc49Ko29zKy5zAhQ1YwXCAhaY?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@shuyuguo:matrix.org\">@shuyuguo:matrix.org</a><br>i guarantee you adding a check to Array.prototype object lookups will regress speedometer</blockquote></mx-reply>Is this done by analyzing the creation of, or transition to, a new map that has an JS_ARRAY_TYPE type, or are you talking about patching actual assignments (i.e., to catch code that may not have moved to the optimizing compiler)?","m.relates_to":{"m.in_reply_to":{"event_id":"$RmdoURPrz0GlnmwaETsc49Ko29zKy5zAhQ1YwXCAhaY"}},"msgtype":"m.text"},"ts":1683670706636,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$pIv9jyOsx2jl6iUCbOsNY1wsBhaC10aC3Vi95GWbz3k"},
{"content":{"body":"well, i elided a few thoughts","msgtype":"m.text"},"ts":1683670964497,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$LsMXSGKZR5d2mR2r-MF1VWG5oUq27jExoksZ22W_62M"},
{"content":{"body":"i don't think it's sufficient to just check if e.g. someone added a new property named `group` to `Array.prototype`, because we know unconditional assignment is unproblematic","format":"org.matrix.custom.html","formatted_body":"i don't think it's sufficient to just check if e.g. someone added a new property named <code>group</code> to <code>Array.prototype</code>, because we know unconditional assignment is unproblematic","msgtype":"m.text"},"ts":1683671009218,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$rKsKSZk0HTUkrMyzBfbq8WZro7UuTuuJEe5_znqJCbY"},
{"content":{"body":"so to add a more nuanced check that's a better measure of whether there's a problematic assignment to a particular `Array.prototype` name:\n\n1. i don't know how to write that use counter\n2. it's probably spread through enough parts of the code that adding that many branches is slow?","format":"org.matrix.custom.html","formatted_body":"<p>so to add a more nuanced check that's a better measure of whether there's a problematic assignment to a particular <code>Array.prototype</code> name:</p>\n<ol>\n<li>i don't know how to write that use counter</li>\n<li>it's probably spread through enough parts of the code that adding that many branches is slow?</li>\n</ol>\n","msgtype":"m.text"},"ts":1683671055807,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$tWTPyE0Ok2Q7CnXl0UNUiRTLr5S-P6N2xtc1TyAULAk"},
{"content":{"body":"we _could_ probably add a check just to see if someone added a new property named `group` to Array.prototype but i'd need to audit for all the places where we do that","format":"org.matrix.custom.html","formatted_body":"we <em>could</em> probably add a check just to see if someone added a new property named <code>group</code> to Array.prototype but i'd need to audit for all the places where we do that","msgtype":"m.text"},"ts":1683671125388,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$MheHfkgsKLDs8ql2nb0DoOM_kMj7b9v6HRqys8GZWGQ"}
]