[
{"content":{"body":"@shu We do a thing in SES that Mark calls “enablements” to compensate for the override mistake which may be of interest: We replace the non-writable property with a getter/setter pair. The prototype is still effectively frozen, but assignment-override works. We’d be delighted to be in touch.","msgtype":"m.text"},"ts":1693541195425,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$ilDQrOi727lfOVYvSz5N95lSxcWtpVW5EyZxO-a82e0"},
{"content":{"body":"Kris Kowal: Yes, we considered taking this approach for `Iterator.prototype[Symbol.toStringTag]` because of this exact issue with regenerator-runtime (see https://github.com/tc39/proposal-iterator-helpers/pull/213), but instead decided to just make the property writable","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@kriskowal:matrix.org\">Kris Kowal</a>: Yes, we considered taking this approach for <code>Iterator.prototype[Symbol.toStringTag]</code> because of this exact issue with regenerator-runtime (see https://github.com/tc39/proposal-iterator-helpers/pull/213), but instead decided to just make the property writable","msgtype":"m.text"},"ts":1693586865295,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$WeTF7oB5FVFSPXEeoxHgQgztAU82o3x9PYeLKCKTBOE"},
{"content":{"body":"this is interesting: https://twitter.com/webreflection/status/1697518069554299121 - isn't there some security thing around SAB that this seems to bypass via wasm?","msgtype":"m.text"},"ts":1693587064788,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$MqNlEi0fE56pc1rR9-z8k4_cKqMGhl7TgcKRqxaB4X8"},
{"content":{"body":"that's always been the case (since COOP/COEP shipped)","msgtype":"m.text"},"ts":1693587259787,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$K0v9g7sYbwF6M7D7rKEM6FUT-qTTzCdgn8kfx-haih4"},
{"content":{"body":"it's explicitly allowed, and wpt uses it in testing","msgtype":"m.text"},"ts":1693587268257,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$nDkiKzF74ww5wulA-jmJtLy7_UzW0501RcMGnz2Tkn0"},
{"content":{"body":"the actual capability is the sharing of memory, not the SAB constructor. without COI you still can't postMessage the buffer across workers","msgtype":"m.text"},"ts":1693587292234,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$-L-ewHdxesYsb5NZHK-KrWSQ9KuDOgI9yvyU_AoG1Xk"},
{"content":{"body":"the problem isn't getting a SAB, it's being able to share it to workers","msgtype":"m.text"},"ts":1693587294258,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$gsWAqdOUfu8KZ7_KHkrWF2BYTjeIloWLCNhPxa6loxs"},
{"content":{"body":"see step 13.1.1 of https://html.spec.whatwg.org/#structuredserializeinternal","msgtype":"m.text"},"ts":1693587305686,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$s_bhS-wCgFILP2SgokKWvZIdpXatenX0PwcrHvIOb-Q"},
{"content":{"body":"this is my \"fault\" technically: https://github.com/whatwg/html/issues/4732#issuecomment-598470434","msgtype":"m.text"},"ts":1693587359074,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$8o2dHkaIylocBJUsEV5hMvG3M2pruRAYep78yPyBgMQ"},
{"content":{"body":"but we did it for compat reasons for chrome users","msgtype":"m.text"},"ts":1693587373482,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$ljjErSCUV7lyy4LAvvJdwgmxmlNkcuhlZlVpuQXJjmA"},
{"content":{"body":"> <@michaelficarra:matrix.org> Kris Kowal: Yes, we considered taking this approach for `Iterator.prototype[Symbol.toStringTag]` because of this exact issue with regenerator-runtime (see https://github.com/tc39/proposal-iterator-helpers/pull/213), but instead decided to just make the property writable\n\nI don’t think we’d recommend “enablements” as a general language compensation for override-mistake, but we do recommend replacing certain properties with accessors as a preparation for freezing a prototype in environments that freeze shared prototypes.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$WeTF7oB5FVFSPXEeoxHgQgztAU82o3x9PYeLKCKTBOE?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@michaelficarra:matrix.org\">@michaelficarra:matrix.org</a><br><a href=\"https://matrix.to/#/@kriskowal:matrix.org\">Kris Kowal</a>: Yes, we considered taking this approach for <code>Iterator.prototype[Symbol.toStringTag]</code> because of this exact issue with regenerator-runtime (see https://github.com/tc39/proposal-iterator-helpers/pull/213), but instead decided to just make the property writable</blockquote></mx-reply>I don’t think we’d recommend “enablements” as a general language compensation for override-mistake, but we do recommend replacing certain properties with accessors as a preparation for freezing a prototype in environments that freeze shared prototypes.","m.relates_to":{"m.in_reply_to":{"event_id":"$WeTF7oB5FVFSPXEeoxHgQgztAU82o3x9PYeLKCKTBOE"}},"msgtype":"m.text"},"ts":1693587393040,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$NTob1f7U09f7aQgTCOQ9CvcMw1oAA6ww7ef1RZRLXbA"},
{"content":{"body":"the original plan, was, in fact, to make SAB always available","msgtype":"m.text"},"ts":1693587542493,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$HEEZkJgsOTxII7yXxPNQJZPu9FhZRRruAQxPIjpEFjA"}
]