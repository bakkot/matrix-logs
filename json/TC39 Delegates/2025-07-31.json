[
{"content":{"body":"Thanks! I updated the readme and transferred it to the org: https://github.com/tc39-transfer/proposal-import-bytes","m.mentions":{},"msgtype":"m.text"},"ts":1753920774999,"senderName":"styfle","senderId":"@styfle:matrix.org","id":"$oAnGY4uaWlRWo0cuUEeLv7fVoAaeB-YsMaAEfeQnhp0"},
{"content":{"body":"queue needs to be advanced I think","m.mentions":{},"msgtype":"m.text"},"ts":1753981605296,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$-IQBE16-4Qi4gglGhTbjE4wT4UKf61MtcKfOT9NI6ds"},
{"content":{"body":"reminder: add your slides links to the notes","m.mentions":{},"msgtype":"m.text"},"ts":1753981607910,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$UL8iglhxJJDbkVKPC5wDs1SpojrbbZ9cXfPZlrf2sqo"},
{"content":{"body":"Does anybody have the link to share here?","m.mentions":{},"msgtype":"m.text"},"ts":1753981805718,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$k8h9GUx3iIHTPoO1txemOReTto9_tEmGs5q5Gq772IU"},
{"content":{"body":"Also, I still see the queue at the notetakers item","m.mentions":{},"msgtype":"m.text"},"ts":1753981907025,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$JGyGa157aMQm0ZHa9kFSl_7MKFjK7G457T56ewwMWxM"},
{"content":{"body":"I advanced the queue","m.mentions":{},"msgtype":"m.text"},"ts":1753981989467,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$NEpWqLgHvmBOGUIqpBvjWZvM975I2vYhz0ZyQBeVizw"},
{"content":{"body":"if this gets stage 2, don't let us forget to assign reviewers  😇","m.mentions":{},"msgtype":"m.text"},"ts":1753982459183,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$m0P6YVVb6pbQfK0VFF8YVQMeoXLkE_CpVUXSljsYoRA"},
{"content":{"body":"kevin, those don't cover symbols, only strings (re tcq)","m.mentions":{},"msgtype":"m.text"},"ts":1753982714892,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$2aWZ1xjhnnnTJPcYTK2w29fq9HoDbLli145bmCr-oGk"},
{"content":{"body":"but if you mean the weird API design part, yes, and it's gross","m.mentions":{},"msgtype":"m.text"},"ts":1753982775424,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$k-LnuGuJw9Lo9saV3qK0skqks9HuRxBh22r1atG5acY"},
{"content":{"body":"Are there use cases for having just the number of symbols?","m.mentions":{},"msgtype":"m.text"},"ts":1753983017069,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$3VPtaRTmm0a33u3ggW2zxf9lQNbXLjWrPFA6ZZzRno8"},
{"content":{"body":"I like the -Length functions design","m.mentions":{},"msgtype":"m.text"},"ts":1753983103431,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$UYObMOo_mfrFD0BG6fisPONKqErZC1iUUtPvRDykPjQ"},
{"content":{"body":"The readme has a ton of links, last time I asked to write for the various links which option they are supporting, but it has not been done, so it's difficult to actually navigate through them","m.mentions":{},"msgtype":"m.text"},"ts":1753983108759,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$fHs1X2WvNnVwxoX4Oh5p8e2nPWvsAEKY91AH9cinunA"},
{"content":{"body":"I like -Length and has- as a mnemonic pattern.","m.mentions":{},"msgtype":"m.text"},"ts":1753983162204,"senderName":"kriskowal","senderId":"@kriskowal:aelf.land","id":"$8mrTmMs90jRQ0H1khKp2DHAfKNewyygXrbzfxhl487s"},
{"content":{"body":"I really struggle to imagine use cases other than for:\n- count all properties\n- count all enumerable properties\n\nmaybe with the matrix of \"include all properties, or just string properties\"","format":"org.matrix.custom.html","formatted_body":"<p>I really struggle to imagine use cases other than for:</p>\n<ul>\n<li>count all properties</li>\n<li>count all enumerable properties</li>\n</ul>\n<p>maybe with the matrix of \"include all properties, or just string properties\"</p>\n","m.mentions":{},"msgtype":"m.text"},"ts":1753983174310,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$nVu-O4c8or37m88Qkys1ar6A2-Lt6bK7cze3GaZI0jk"},
{"content":{"body":"MarkM wrote a summary of property enumeration for our own edification at Agoric/Endo and I captured them for posterity here https://kriskowal.com/enumerating-properties/","m.mentions":{},"msgtype":"m.text"},"ts":1753983248377,"senderName":"kriskowal","senderId":"@kriskowal:aelf.land","id":"$T6EtCjvxvwJfewxOisIQHJwf5QQ_eNblM2oa1FOh3Ic"},
{"content":{"body":"steal time from the other presentations?","m.mentions":{},"msgtype":"m.text"},"ts":1753983421871,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$ayXoWU9y58RqlGks-myY4LN8NQK2NhGQ_Ek73W43-V4"},
{"content":{"body":"@erights Mark Miller (Agoric) MM: fwiw it does whatever you'd expect it to do on proxies, via the internal methods, just like the existing methods","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@erights:matrix.org\">@erights Mark Miller (Agoric) MM</a>: fwiw it does whatever you'd expect it to do on proxies, via the internal methods, just like the existing methods","m.mentions":{"user_ids":["@erights:matrix.org"]},"msgtype":"m.text"},"ts":1753983452569,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$oLs1UfiOE2VdTVegD0Fowi-h61m7MmepF7sHQnVHLYA"},
{"content":{"body":"Ruben: assuming you mean https://github.com/tc39/proposal-object-property-count/issues/2#issuecomment-2784901702, almost all of those examples are devtools or otherwise not super relevant (like babel's object spread helper)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@bridgear:matrix.org\">Ruben</a>: assuming you mean https://github.com/tc39/proposal-object-property-count/issues/2#issuecomment-2784901702, almost all of those examples are devtools or otherwise not super relevant (like babel's object spread helper)","m.mentions":{"user_ids":["@bridgear:matrix.org"]},"msgtype":"m.text"},"ts":1753983505827,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$ighQ67iCAoY1UyxbGMK1NyhrKx67M67sOWi0bZsZUsk"},
{"content":{"body":"I don't think \"whatever you'd expect\" is coherent, because property keys are reported by one trap while property attributes are reported by another, so the two can disagree","m.mentions":{"user_ids":["@ljharb:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$oLs1UfiOE2VdTVegD0Fowi-h61m7MmepF7sHQnVHLYA"}},"msgtype":"m.text"},"ts":1753983518417,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$uGbNa7HBl4hW6q7bTTYqRqVtavJEFbqzHQdgJLxCqS4"},
{"content":{"body":"* Ruben: assuming you mean https://github.com/tc39/proposal-object-property-count/issues/2#issuecomment-2784901702, many of those examples are devtools or otherwise not super relevant (like babel's object spread helper)","format":"org.matrix.custom.html","formatted_body":"* <a href=\"https://matrix.to/#/@bridgear:matrix.org\">Ruben</a>: assuming you mean https://github.com/tc39/proposal-object-property-count/issues/2#issuecomment-2784901702, many of those examples are devtools or otherwise not super relevant (like babel's object spread helper)","m.mentions":{},"m.new_content":{"body":"Ruben: assuming you mean https://github.com/tc39/proposal-object-property-count/issues/2#issuecomment-2784901702, many of those examples are devtools or otherwise not super relevant (like babel's object spread helper)","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@bridgear:matrix.org\">Ruben</a>: assuming you mean https://github.com/tc39/proposal-object-property-count/issues/2#issuecomment-2784901702, many of those examples are devtools or otherwise not super relevant (like babel's object spread helper)","m.mentions":{"user_ids":["@bridgear:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$ighQ67iCAoY1UyxbGMK1NyhrKx67M67sOWi0bZsZUsk","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1753983537807,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$_f2nupgzRWYjkN08i6Xa7GY9bxjBj6wFH6HjsQuIYgU"},
{"content":{"body":"i mean, in terms of impact - babel's object spread helper alone is probably more beneficial to the web than many of the proposals we've advanced in the last couple years","m.mentions":{"user_ids":["@bakkot:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$ighQ67iCAoY1UyxbGMK1NyhrKx67M67sOWi0bZsZUsk"}},"msgtype":"m.text"},"ts":1753983543255,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$KC_WnhlOdTWNPCJv7rhiAhtORoX4Mi5jUbVAWwXO1-o"},
{"content":{"body":"* i mean, in terms of impact - babel's object spread helper alone being made faster is probably more beneficial to the web than many of the proposals we've advanced in the last couple years","m.mentions":{},"m.new_content":{"body":"i mean, in terms of impact - babel's object spread helper alone being made faster is probably more beneficial to the web than many of the proposals we've advanced in the last couple years","m.mentions":{"user_ids":["@bakkot:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$KC_WnhlOdTWNPCJv7rhiAhtORoX4Mi5jUbVAWwXO1-o","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1753983574542,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$r6tviPa9a1SxIrgDZ276DCgXYZmXt21Ot7nAu3SELAw"},
{"content":{"body":"the spread operator isn't doing a count, to be clear","m.mentions":{},"msgtype":"m.text"},"ts":1753983586137,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$KIJT4qQsmDFFFahXy18Mik7H0505PKtQiGMfEDFdEkg"},
{"content":{"body":"ah, ok fair. the current spec did make a choice, iirc it's calling \"ownpropertykeys\"","m.mentions":{"user_ids":["@gibson042:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$uGbNa7HBl4hW6q7bTTYqRqVtavJEFbqzHQdgJLxCqS4"}},"msgtype":"m.text"},"ts":1753983587800,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$jE_dAFdJTj55RngJmLT8xt828OZRFJxWwxwikbJNn1A"},
{"content":{"body":"it's actually spreading enumerable symbols","m.mentions":{},"msgtype":"m.text"},"ts":1753983591946,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$BILrm7gOoq2bEzRUNeawYsXGCa54ndXSMGyfh3-nbBI"},
{"content":{"body":"ah k","m.mentions":{},"msgtype":"m.text"},"ts":1753983594645,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$jA-PLoQzWVLTGeucdFUa44autN2jAw2JwFuDjNk2_S0"},
{"content":{"body":"so it isn't relevant to this proposal","m.mentions":{},"msgtype":"m.text"},"ts":1753983596694,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$hS0bh34BuVqevZV2T5s4CteL1N1TzifpJTXDfUiuwos"},
{"content":{"body":"right, but that doesn't expose enumerability","m.mentions":{"user_ids":["@ljharb:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$jE_dAFdJTj55RngJmLT8xt828OZRFJxWwxwikbJNn1A"}},"msgtype":"m.text"},"ts":1753983670928,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$OztF4OZduqgnCRdg9udkZ5bFUFGp5qOwpMRRiLpD49E"},
{"content":{"body":"it has to get the property descriptor for each key as well, yep","m.mentions":{},"msgtype":"m.text"},"ts":1753983709478,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$DnjibenPlv6_meSCJb5iFydSjbiQLC8vGVRoajgpgWc"},
{"content":{"body":"same approach as https://tc39.es/ecma262/#sec-object.getownpropertydescriptors, iirc","m.mentions":{},"msgtype":"m.text"},"ts":1753983755726,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$N0eqkvbbs5GSlkiFG7LK5LmXI1wt10hcz0IVLKGE5Q8"},
{"content":{"body":"I still like my \"just add fooLength versions of all the foo methods\" suggestion, which answers this trivially","m.mentions":{},"msgtype":"m.text"},"ts":1753983772262,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$K2B6zPZPHnBt6afwVKV3Yd4762rV5SdkqarGEgmdMKs"},
{"content":{"body":"so the question basically comes down to: what happens when `getOwnPropertyDescriptor` reports nonexistence of a key that was returned from `ownKeys`?","format":"org.matrix.custom.html","formatted_body":"so the question basically comes down to: what happens when <code>getOwnPropertyDescriptor</code> reports nonexistence of a key that was returned from <code>ownKeys</code>?","m.mentions":{"user_ids":["@ljharb:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$DnjibenPlv6_meSCJb5iFydSjbiQLC8vGVRoajgpgWc"}},"msgtype":"m.text"},"ts":1753983779465,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$C12bUyND9L77PO2ol_z8LqYoAMZVA8N18D0i9nnTrYs"},
{"content":{"body":"the same thing that Object.getOwnPropertyDescriptors does - it skips it","m.mentions":{},"msgtype":"m.text"},"ts":1753983805875,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$j7-Siffn6KavKdxbCMY9DuqRK--iSyxW0v0X7sCGMPY"},
{"content":{"body":"What happens is you know you've found a proxy ","format":"org.matrix.custom.html","formatted_body":"What happens is you know you've found a proxy","msgtype":"m.text"},"ts":1753983820772,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$keqTm8UC7NWz6kaPzUs2HRWelTU7TjfpLB3D2nnMMpM"},
{"content":{"body":"|             | **enmumerable** | **non-enumerable** | **all** |\n| ----------- | --------------- | ------------------ | ------- |\n| **strings** | ✔️              |                    | ✔️      |\n| **symbols** | ?               |                    |\n| **all**     | ✔️              |                    | ✔️      |\n\nFyi here the checkmark is for where I'm convinced that there may be a use case (the question mark is where I'm very little convinced but more than zero). I'd like to see examples showing that the usage of the rest is so widespread that it makes more sense to design an API to explicitly support it rather than just do the difference of the other two things in the same row/column.\n","format":"org.matrix.custom.html","formatted_body":"<p>|             | <strong>enmumerable</strong> | <strong>non-enumerable</strong> | <strong>all</strong> |<br>| ----------- | --------------- | ------------------ | ------- |<br>| <strong>strings</strong> | ✔️              |                    | ✔️      |<br>| <strong>symbols</strong> | ?               |                    |<br>| <strong>all</strong>     | ✔️              |                    | ✔️      |</p>\n<p>Fyi here the checkmark is for where I'm convinced that there may be a use case (the question mark is where I'm very little convinced but more than zero). I'd like to see examples showing that the usage of the rest is so widespread that it makes more sense to design an API to explicitly support it rather than just do the difference of the other two things in the same row/column.</p>\n","m.mentions":{},"msgtype":"m.text"},"ts":1753983844301,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$ZQZAxD9DR7SUDL3yUlNtpxpYkW4LrhBcPIqvLbRQ1Nk"},
{"content":{"body":"(tbh i'm not sure why it's important what happens with a misbehaving proxy as long as it accounts for it)","m.mentions":{},"msgtype":"m.text"},"ts":1753983847375,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$OK6f15Z99FRAUTN9ljiJobpAN5hM2cpVnrpFMhVp45s"},
{"content":{"body":"Come on matrix","m.mentions":{},"msgtype":"m.text"},"ts":1753983855510,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$H_TF5mB6IpF4nDT7ucRj3a5MvrgrkoSt3vhYNWABcTQ"},
{"content":{"body":"Because a 3x3 matrix with only the corners filled in is just a complete 2x2 matrix","m.mentions":{},"msgtype":"m.text"},"ts":1753983875407,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$ne338AtbSR09e67YxD5hRLWKJgmWSZNIvtfZEFsK3jQ"},
{"content":{"body":"i often need all symbols","m.mentions":{},"msgtype":"m.text"},"ts":1753983878377,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$np00WJZDZUC9qh-MtQmejBZPWk07segdFDT-UK8QeZk"},
{"content":{"body":"Can you show me one code example?","m.mentions":{},"msgtype":"m.text"},"ts":1753983890355,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$xxN6boe6y-fMn3vOL0FgUeFd3XEFXRruNef_bq1NyxM"},
{"content":{"body":"I have ever needed all symbols but I don't think I've ever need the _number_ of all symbols","format":"org.matrix.custom.html","formatted_body":"I have ever needed all symbols but I don't think I've ever need the <em>number</em> of all symbols","m.mentions":{},"msgtype":"m.text"},"ts":1753983916063,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$fR5l5vdY-K2AQHkOrVEG7dmB0ZhdHP21cc0TnPFdAIE"},
{"content":{"body":"true, the code example i was about to provide isn't getting the count, let me look more","m.mentions":{},"msgtype":"m.text"},"ts":1753983958993,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$5ZjvMeSPceJhHT7FGsX-Gln5SqArAC4jfBkuzoR7Gac"},
{"content":{"body":"k well i can't actually find a case where i need the count of symbols and not the actual symbols themselves","m.mentions":{},"msgtype":"m.text"},"ts":1753984413148,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$qGjcXen5dpRK2uU8M92R-rBLOpM0qSeOnj9iGscGy6k"},
{"content":{"body":"although if getting the count was much faster than getting the symbols themselves, i'd probably change a bunch of places to check the count first - that's a lot of \"if\"s tho","m.mentions":{},"msgtype":"m.text"},"ts":1753984441815,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$GyRjyrGCsBt7MEo7Y-14U5N7Q4Fg72qVwecrA9mcTUY"},
{"content":{"body":"`arr.toSliced()` will give you a dense array even if the original had holes","format":"org.matrix.custom.html","formatted_body":"<code>arr.toSliced()</code> will give you a dense array even if the original had holes","msgtype":"m.text"},"ts":1753984626128,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$_SMqxpbLtet5XEGJIZl8jnh0-RZBacFm4G1X-AZtmj4"},
{"content":{"body":"oh no, not that one that my brain llm made up ","format":"org.matrix.custom.html","formatted_body":"oh no, not that one that my brain llm made up","msgtype":"m.text"},"ts":1753984659650,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$HL_lVVtrGZnktX2sFiGtTSDN8PORoak6RAFQjakyH2k"},
{"content":{"body":"The other ones ","format":"org.matrix.custom.html","formatted_body":"The other ones","msgtype":"m.text"},"ts":1753984662311,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$BMGnxd_iL4XxTN3mT3b9KACVBvbv1piK5EQryislY_U"},
{"content":{"body":"- Reflect.ownKeysLength\n- Object.keysLength\n- Object.getOwnPropertyNamesLength\n- Object.getOwnPropertySymbolsLength\n\ndoesn't give you (string + symbol) x (enumerable) though I guess I would be open to a proposal for a new way to get _values_ for (string + symbol) x (enumerable), and then also have the `fooLength` version of that","format":"org.matrix.custom.html","formatted_body":"<ul>\n<li>Reflect.ownKeysLength</li>\n<li>Object.keysLength</li>\n<li>Object.getOwnPropertyNamesLength</li>\n<li>Object.getOwnPropertySymbolsLength</li>\n</ul>\n<p>doesn't give you (string + symbol) x (enumerable) though I guess I would be open to a proposal for a new way to get <em>values</em> for (string + symbol) x (enumerable), and then also have the <code>fooLength</code> version of that</p>\n","m.mentions":{},"msgtype":"m.text"},"ts":1753984727995,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$d1pPvbeGaL9Uq8rrG1BgRoyHsBZpVBHkkENz-YpNSEY"},
{"content":{"body":"that method doesn't exist, but `arr.toSpliced()` does","format":"org.matrix.custom.html","formatted_body":"that method doesn't exist, but <code>arr.toSpliced()</code> does","m.mentions":{"user_ids":["@aclaymore:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$_SMqxpbLtet5XEGJIZl8jnh0-RZBacFm4G1X-AZtmj4"}},"msgtype":"m.text"},"ts":1753984807689,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$AZMZ7-t3iPRRnsgoZR0jZLyBHr24A7fPWBTWe83Gddw"},
{"content":{"body":"`.slice()`","format":"org.matrix.custom.html","formatted_body":"<code>.slice()</code>","m.mentions":{},"msgtype":"m.text"},"ts":1753984828349,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$4lTYDv8oKq_pHGs93VClrTIrSI9OazBXQgXQl9ago4o"},
{"content":{"body":"nope, `.slice()` preserves holes","format":"org.matrix.custom.html","formatted_body":"nope, <code>.slice()</code> preserves holes","m.mentions":{},"msgtype":"m.text"},"ts":1753984841708,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$h1cCOr4aZsdHo9mevMkwIZ1vmq-KnYYYI1bIKxf6rrE"},
{"content":{"body":"oh oof, ok","m.mentions":{},"msgtype":"m.text"},"ts":1753984849903,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$cDS4AG_n9KRRBB-rCchWy8HZVBwHLmtJiFgVfuTBGqE"},
{"content":{"body":"`.flatMap(x => [x])` :-p","format":"org.matrix.custom.html","formatted_body":"<code>.flatMap(x =&gt; [x])</code> :-p","m.mentions":{},"msgtype":"m.text"},"ts":1753984869388,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$9KxdM3mmNtkSk4JyeUgTzxj5-gfhlDFe_mIXxcpwMAE"},
{"content":{"body":"so like, `Reflect.ownEnumerableKeys`?","format":"org.matrix.custom.html","formatted_body":"so like, <code>Reflect.ownEnumerableKeys</code>?","m.mentions":{"user_ids":["@bakkot:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$d1pPvbeGaL9Uq8rrG1BgRoyHsBZpVBHkkENz-YpNSEY"}},"msgtype":"m.text"},"ts":1753984899112,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$Zt6xNaQoKuHXWruHx_8L3CX4BNUg2giXCxUzG7476Rk"},
{"content":{"body":"yeah sure","m.mentions":{},"msgtype":"m.text"},"ts":1753984911943,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$RlZ4i9DvBRjxkCNo-YdJiZyb6R9YPc-L1OYmCc0ZuzI"},
{"content":{"body":"seeing those written out, I would prefer \"count\" rather than \"length\"","m.mentions":{"user_ids":["@bakkot:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$d1pPvbeGaL9Uq8rrG1BgRoyHsBZpVBHkkENz-YpNSEY"}},"msgtype":"m.text"},"ts":1753984982837,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$CWgcXSfSjyUF38DUIM0hPnReqmSKjb8OBdp-Ocf0jww"},
{"content":{"body":"`[...array]` kills holes right","format":"org.matrix.custom.html","formatted_body":"<code>[...array]</code> kills holes right","m.mentions":{},"msgtype":"m.text"},"ts":1753984987327,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$OHyAnkkGlKgjPvSdStqgms2ygKzp4RBNrzK9EBikMlw"},
{"content":{"body":"and ensures you have a real array","m.mentions":{},"msgtype":"m.text"},"ts":1753984991835,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$8y9TxoIOPuqOszpIqJZ9z51uc77pHqaNhkP0pJxmNKM"},
{"content":{"body":"all in one glorious expression","m.mentions":{},"msgtype":"m.text"},"ts":1753984999999,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$mPVxQI-8yMs_EtgLWVovpC0KlkOatOzsXjC5Dgsf4cU"},
{"content":{"body":"Yes, though holes are removed rather than replaced with `undefined`, so indices to elements change.","format":"org.matrix.custom.html","formatted_body":"Yes, though holes are removed rather than replaced with <code>undefined</code>, so indices to elements change.","m.mentions":{},"msgtype":"m.text"},"ts":1753985044819,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$rtWMAuOrfTSVWwrtYgG8V4N7MQzhfOikU3YHVId7rqE"},
{"content":{"body":"nicolo-ribaudo: your topic is still in the queue","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@nicolo-ribaudo:matrix.org\">nicolo-ribaudo</a>: your topic is still in the queue","m.mentions":{"user_ids":["@nicolo-ribaudo:matrix.org"]},"msgtype":"m.text"},"ts":1753985054746,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$Hd5wiPiUE4dkwGNHw38W-ipYNFJa5U6_G6p904BIaas"},
{"content":{"body":"(next)","m.mentions":{},"msgtype":"m.text"},"ts":1753985057630,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$lwrtBW5Yfa7hIEm2IM2QyxCcdT7BaaAtUVz7roCNf6Y"},
{"content":{"body":"looks like they are replaced with undefined","m.mentions":{"user_ids":["@rbuckton:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$rtWMAuOrfTSVWwrtYgG8V4N7MQzhfOikU3YHVId7rqE"}},"msgtype":"m.text"},"ts":1753985089428,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$QGW9UtA28_vzq7JGQdfprY6SWORXUhUbWlafx9YQTBM"},
{"content":{"body":"a glorious one that uses the much slower iterator protocol :-(","m.mentions":{"user_ids":["@devsnek:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$mPVxQI-8yMs_EtgLWVovpC0KlkOatOzsXjC5Dgsf4cU"}},"msgtype":"m.text"},"ts":1753985109176,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$1FPR0Qf2XXVGEmsvrrqD2Jt8A_7eqKhJ03cJHGx8hDo"},
{"content":{"body":"`Array.from()` might work tho","format":"org.matrix.custom.html","formatted_body":"<code>Array.from()</code> might work tho","m.mentions":{},"msgtype":"m.text"},"ts":1753985119709,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$wMwU7FbvJTsc_GwH_goX3VyS3MEexGpgDW2meEI5VEI"},
{"content":{"body":"Array.from does it too","m.mentions":{},"msgtype":"m.text"},"ts":1753985137550,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$QP8y-lp7ewKtQLOa0Y3ECgnVCHbLylDtPN9XzSxr0r4"},
{"content":{"body":"both are probably better optimization targets than isSparse branches","m.mentions":{},"msgtype":"m.text"},"ts":1753985147014,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$-yPt_7Vymr_b-qniOK_xdZcTRL9jNCEOh0DWLJKVMoQ"},
{"content":{"body":"+1 on Nicolo's comment","m.mentions":{},"msgtype":"m.text"},"ts":1753985154651,"senderName":"waldemar","senderId":"@waldemarh:matrix.org","id":"$RskJ8fYzKluwWBV0C_ujtOoZlJ4qZsgwzsFffqEvJCY"},
{"content":{"body":"`.toSpliced()` does not use Symbol.iterator","format":"org.matrix.custom.html","formatted_body":"<code>.toSpliced()</code> does not use Symbol.iterator","m.mentions":{},"msgtype":"m.text"},"ts":1753985169228,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$tM8X0sbZ5iVDDkprARtaxdIlBfSwBbOSk-DIsrHvgpA"},
{"content":{"body":"the problem tho isn't \"we don't want sparse arrays\", it's \"to accurately describe this object we need to know if it's sparse\", so densification doesn't help","m.mentions":{},"msgtype":"m.text"},"ts":1753985192360,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$zmsyIphXwcfs0H_0qF6gM7ytLAyRgQSwAPyKoTonV2o"},
{"content":{"body":"My topic: we can solve this with the previous property count proposal.","m.mentions":{},"msgtype":"m.text"},"ts":1753985224062,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$FLjxf3r9c2BKduM667-8HvIx8nHOzwXPra-2klr6gbI"},
{"content":{"body":"We don't need a sparse check that depends on internal engine details","m.mentions":{},"msgtype":"m.text"},"ts":1753985237309,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$LeEBcudeOlszBPpB6aitl5mXh3MkmOjJ8eeW2lUz5XQ"},
{"content":{"body":"Wouldn;t `[1, , 3, foo: 4]` look like it's dense","format":"org.matrix.custom.html","formatted_body":"Wouldn;t <code>[1, , 3, foo: 4]</code> look like it's dense","m.mentions":{"user_ids":["@jridgewell:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$FLjxf3r9c2BKduM667-8HvIx8nHOzwXPra-2klr6gbI"}},"msgtype":"m.text"},"ts":1753985248594,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$XhlAyAhoxWQqAvJVACfVSFVZWB7iGi9bkgXDUfyU3uM"},
{"content":{"body":"A dense array has `Object.keys(arr).length === arr.length`","format":"org.matrix.custom.html","formatted_body":"A dense array has <code>Object.keys(arr).length === arr.length</code>","m.mentions":{},"msgtype":"m.text"},"ts":1753985255753,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$aq8KcXqzqygHKE90OI0-5n-Zje3yS8vsgPblIGI_QfI"},
{"content":{"body":"only if there's an \"index\" filter","m.mentions":{"user_ids":["@jridgewell:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$FLjxf3r9c2BKduM667-8HvIx8nHOzwXPra-2klr6gbI"}},"msgtype":"m.text"},"ts":1753985256918,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$5a6k5BBXDpAg6SEfX0_346exkTi0wujAa0cu5LEQ82o"},
{"content":{"body":"No","m.mentions":{"user_ids":["@nicolo-ribaudo:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$XhlAyAhoxWQqAvJVACfVSFVZWB7iGi9bkgXDUfyU3uM"}},"msgtype":"m.text"},"ts":1753985261673,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$mRKxm_nbuW1z7z1_WilINMSVaQo2JADq9B0qfYOOqCU"},
{"content":{"body":"Yes","m.mentions":{"user_ids":["@gibson042:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$5a6k5BBXDpAg6SEfX0_346exkTi0wujAa0cu5LEQ82o"}},"msgtype":"m.text"},"ts":1753985270341,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$lHHl7_NLbTToB3dYSUYsmvSrMSAiJbnJyKkwJD-LxMY"},
{"content":{"body":"It has three properties and a length of three","m.mentions":{},"msgtype":"m.text"},"ts":1753985272633,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$1LEbVdX5QN2YbMVcmx8HoJJrbMtSaaeWyaq_QM-hD7E"},
{"content":{"body":"Oh ok","m.mentions":{},"msgtype":"m.text"},"ts":1753985276306,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$9tTohLhuXORqkOay_VID4cDiC58tJrU9snCNM7CO2Vk"},
{"content":{"body":"It has 2 index properties","m.mentions":{"user_ids":["@nicolo-ribaudo:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$1LEbVdX5QN2YbMVcmx8HoJJrbMtSaaeWyaq_QM-hD7E"}},"msgtype":"m.text"},"ts":1753985288509,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$Xu2PK_KM5UpPO2FCk9cFlPpkRvSotgQZbHr5OYzBC7s"},
{"content":{"body":"Well, `Object.keys(arr).length === arr.length` returns true on that","format":"org.matrix.custom.html","formatted_body":"Well, <code>Object.keys(arr).length === arr.length</code> returns true on that","m.mentions":{},"msgtype":"m.text"},"ts":1753985304153,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$hfDx4gW-K2_c2gTEbg1v6E9trb-OcNtVHnsaheH0fYo"},
{"content":{"body":"That's why we need the property count proposal","m.mentions":{},"msgtype":"m.text"},"ts":1753985336817,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$yTsmZXVXGv8BJG7RG29e1oNrt2uyip7R18bjT5uaLxA"},
{"content":{"body":"I was giving a really basic case","m.mentions":{},"msgtype":"m.text"},"ts":1753985342342,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$qTGUWzqk2pduhXy75TNDGbfC3n_ifvjdiLN6y2ne-VE"},
{"content":{"body":"But we can build on the previous proposal for \"sparse\" checks","m.mentions":{},"msgtype":"m.text"},"ts":1753985353212,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$6nIK-p6T_FKa_7d0ym1EMLaJmt-M794UI41bYhUlexc"},
{"content":{"body":"My point about time-of-check vs time-of-use still stands though","m.mentions":{},"msgtype":"m.text"},"ts":1753985375725,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$9ZvUcJVghLwvg_Oz0ynclacCaXiBr5Fr-mL1u9qUrKA"},
{"content":{"body":"Yes","m.mentions":{},"msgtype":"m.text"},"ts":1753985383294,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$M2VWvHPR_qvAI08XdSnlV8vzVX59FY_T3kRZBrETyoM"},
{"content":{"body":"Even if you check like that","m.mentions":{},"msgtype":"m.text"},"ts":1753985383501,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$tzrZpLurzCG2XP2rNLyCwnWUZeGO3ZIjTiaT748HbUA"},
{"content":{"body":"{0: 0, 1: 0,  3: 0, 17: 0, length: 4} would have a length of 4 and four index-named properties","m.mentions":{},"msgtype":"m.text"},"ts":1753985393286,"senderName":"waldemar","senderId":"@waldemarh:matrix.org","id":"$lnkA4jO-7RdUKQzwiM_2FcyJOOwgCsYpS2to6kEgIV8"},
{"content":{"body":"but it'd not be Array.isArray. almost all these use cases are inside a context where that's already been checked","m.mentions":{},"msgtype":"m.text"},"ts":1753985465320,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$q-qI5yOnPpud3BeLYDqTYRwPqSXMP_H2HhL4sjUyTug"},
{"content":{"body":"I though the proposal only worked on Arrays","m.mentions":{"user_ids":["@waldemarh:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$lnkA4jO-7RdUKQzwiM_2FcyJOOwgCsYpS2to6kEgIV8"}},"msgtype":"m.text"},"ts":1753985480712,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$ALSuXe7JqYktS5ZRx3PKNM4NObvVhD2RuvTe7SD163I"},
{"content":{"body":"* I thought the proposal only worked on Arrays","m.mentions":{},"m.new_content":{"body":"I thought the proposal only worked on Arrays","m.mentions":{"user_ids":["@waldemarh:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$ALSuXe7JqYktS5ZRx3PKNM4NObvVhD2RuvTe7SD163I","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1753985493772,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$dh5idYtsAKCulfddLDcPv5CJhgB35peDr4obr9s23LQ"},
{"content":{"body":"That's still being debated.","m.mentions":{},"msgtype":"m.text"},"ts":1753985596503,"senderName":"waldemar","senderId":"@waldemarh:matrix.org","id":"$SbYQT49bcLN7jbdm_kJlwu2UrbmY11wxWaELzXoo2eM"},
{"content":{"body":"I continue to wish JS had syntax and semantics for custom indexers, much like how TypedArrays are handled. This proposal brings that back to mind.","m.mentions":{},"msgtype":"m.text"},"ts":1753985596947,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$U3c6xy3axsKBCe_xXlj9QnjfjEzHI71P2WmDV1hTWlQ"},
{"content":{"body":"we are going to go over time most likely.  please indicate your preference:\n\n🦆 - continue the meeting into the lunch break, and conclude plenary\n🐓 - break for lunch, and return after to continue meeting ,then conclude","m.mentions":{},"msgtype":"m.text"},"ts":1753985637912,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$L8x1B2nZ6wZFQVxnW6_ZaSQSGRfmmgGkygH0JcI_PZU"},
{"content":{"body":"Wouldn't any handling of array-like (specifically excluding arrays here) have to be linear?","m.mentions":{"user_ids":["@waldemarh:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$SbYQT49bcLN7jbdm_kJlwu2UrbmY11wxWaELzXoo2eM"}},"msgtype":"m.text"},"ts":1753985643829,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$EMWH5u7uVwjCZntSPByW8_mXQc5kzMPhsWXfWDMQHtA"},
{"content":{"body":"We could just implement in userland, there's no benefit of a native API","m.mentions":{},"msgtype":"m.text"},"ts":1753985668698,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$bzrLc9_JwycvUGYalbTEeOZjcAewN-GOQiNlaPOwelI"},
{"content":{"body":"Yes, it would be linear. But, given today's comments, a lot of cases on Arrays would also be linear.","m.mentions":{},"msgtype":"m.text"},"ts":1753985700554,"senderName":"waldemar","senderId":"@waldemarh:matrix.org","id":"$1YFZfy0nGUUoiB2u2dJFgasXrnGZZb-XHgp5asDhJl8"},
{"content":{"body":"Not if we use property count, since the length is 🪄","m.mentions":{},"msgtype":"m.text"},"ts":1753985737387,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$w2XjVmyfN725E37juCHuxzeOTBjFNonxdQ8FjvM3TlQ"},
{"content":{"body":"Index keys are stored in a special array (in V8), and length is always guaranteed to be the max index's value +1.","m.mentions":{},"msgtype":"m.text"},"ts":1753985795704,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$XWNAS0WTH7iM0X0mPMGqiItShKPf1FKfPjvDerZ-YAU"},
{"content":{"body":"So the check could be constant for arrays specifically","m.mentions":{},"msgtype":"m.text"},"ts":1753985808759,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$PtiieqyTgV23MadnbXBlxls3oMipSxZtFv7_o8nAC1E"},
{"content":{"body":"So you're saying that it is possible to implement Array.isSparse in O(1) time?","m.mentions":{},"msgtype":"m.text"},"ts":1753985865013,"senderName":"waldemar","senderId":"@waldemarh:matrix.org","id":"$32-WI5A4-8CeQM6uKa-e8kVo0qmfq4pGErVP0BZU70M"},
{"content":{"body":"In V8 at least, without depending on the element's kind internal stucture.","m.mentions":{},"msgtype":"m.text"},"ts":1753985891497,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$vo6raLuwU_H4jY7T4eGnYwLR7fKW2HubEV2gaJ8lzvc"},
{"content":{"body":"Don't know about the other engines, but they had to implement special ordering rules for Object.keys(), so they may have index keys stored separately.","m.mentions":{},"msgtype":"m.text"},"ts":1753985924389,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$rzEAvmIKl66HaEszkWgtUFteUyCiLqL6KJ_vNwcS83A"},
{"content":{"body":"Only `Object.keys` and `Object.propertyCount`, passing as the second parameter a bitflag to do all the filtering 🧠","format":"org.matrix.custom.html","formatted_body":"Only <code>Object.keys</code> and <code>Object.propertyCount</code>, passing as the second parameter a bitflag to do all the filtering 🧠","m.mentions":{},"msgtype":"m.text"},"ts":1753986135522,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$AfqfH6QaDQL0ylyE0RHeTUIUnZacwzwL9HKV11rN9bI"},
{"content":{"body":"now you're thinking like a 1990s DOM API 😎","m.mentions":{"user_ids":["@nicolo-ribaudo:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$AfqfH6QaDQL0ylyE0RHeTUIUnZacwzwL9HKV11rN9bI"}},"msgtype":"m.text"},"ts":1753986182808,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$GY4KSqmDWTA6yvd2EiwcL8ZPc505o_tl_aRYQDbxojc"},
{"content":{"body":"proposal: add a one true Object.getPropertyNames which accepts this options bag: https://docs.rs/v8/latest/v8/struct.GetPropertyNamesArgs.html","m.mentions":{},"msgtype":"m.text"},"ts":1753986332987,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$5_eEzdYG2aSGhT5yjZyR3J6RtkV2p6buKGVxoRnmcH0"},
{"content":{"body":"no. it's O(1) to skip indices (which might or might not have holes)","m.mentions":{"user_ids":["@waldemarh:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$32-WI5A4-8CeQM6uKa-e8kVo0qmfq4pGErVP0BZU70M"}},"msgtype":"m.text"},"ts":1753986575084,"senderName":"Olivier Flückiger","senderId":"@olivf.o1o.ch:immer.chat","id":"$vyQ5-NY5Z7hYvogI-whOyLMdJo1yijw0HiI9pA7MWtY"},
{"content":{"body":"Rather than using `'all'` to fight defaults, why not have these APIs always include everything by default and use the presence and value of `enumerable` et al to control behavior, much like `defineProperty` (which ignores missing attributes as long as the property already exists).","format":"org.matrix.custom.html","formatted_body":"Rather than using <code>'all'</code> to fight defaults, why not have these APIs always include everything by default and use the presence and value of <code>enumerable</code> et al to control behavior, much like <code>defineProperty</code> (which ignores missing attributes as long as the property already exists).","m.mentions":{},"msgtype":"m.text"},"ts":1753986588065,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$AUukGuDpyt-5eWmfeRxNn2a41l4tFJLUxj5I-dVbGlE"}
]