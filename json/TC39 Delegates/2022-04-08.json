[
{"content":{"body":"> <@rbuckton:matrix.org> I think the issue with using AbortSignal for proxy revocation is the async callback nature of EventTarget. When you revoke a proxy you want it revoked immediately. Yes, a proxy can check if the AbortSignal has been aborted when the proxy is used, but that still introduces GC issues.\n\nit's not observable in the user land. so \"check signal when use\" is equal to \"GC on aborted\"","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$70l5bDVohYJcJnCXqyAb0TeE4lFoAAz9_3ATNdkDYhE?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@rbuckton:matrix.org\">@rbuckton:matrix.org</a><br>I think the issue with using AbortSignal for proxy revocation is the async callback nature of EventTarget. When you revoke a proxy you want it revoked immediately. Yes, a proxy can check if the AbortSignal has been aborted when the proxy is used, but that still introduces GC issues.</blockquote></mx-reply>it's not observable in the user land. so &quot;check signal when use&quot; is equal to &quot;GC on aborted&quot;","m.relates_to":{"m.in_reply_to":{"event_id":"$70l5bDVohYJcJnCXqyAb0TeE4lFoAAz9_3ATNdkDYhE"}},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":"> <@rbuckton:matrix.org> I think the issue with using AbortSignal for proxy revocation is the async callback nature of EventTarget. When you revoke a proxy you want it revoked immediately. Yes, a proxy can check if the AbortSignal has been aborted when the proxy is used, but that still introduces GC issues.\n\nit's not observable in the user land. so \"check signal when use\" is equal to \"GC on aborted\"","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$70l5bDVohYJcJnCXqyAb0TeE4lFoAAz9_3ATNdkDYhE?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@rbuckton:matrix.org\">@rbuckton:matrix.org</a><br>I think the issue with using AbortSignal for proxy revocation is the async callback nature of EventTarget. When you revoke a proxy you want it revoked immediately. Yes, a proxy can check if the AbortSignal has been aborted when the proxy is used, but that still introduces GC issues.</blockquote></mx-reply>it's not observable in the user land. so &quot;check signal when use&quot; is equal to &quot;GC on aborted&quot;","mimetype":"text/html"}]},"ts":1649397233221,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$ApeOdHncl8qeyABw_1YV6W9q0sP2battS_s3eavQOck"}
]