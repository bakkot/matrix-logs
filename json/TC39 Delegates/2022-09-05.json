[
{"content":{"body":"i didn’t realize that. It shouldn’t use instanceof - like everything else in the language, it should use a brand.","msgtype":"m.text"},"ts":1662340382539,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$-C59eABB4tLopeNA70QDInrmx_ThLOoRp6L0LOZJonA"},
{"content":{"body":"no, it's an interface","msgtype":"m.text","org.matrix.msc1767.text":"no, it's an interface"},"ts":1662340671847,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$w_9mcym64NeBW1BahlfAYlH2DwZ5c0Z8gW2xaUjVGlY"},
{"content":{"body":"it's not a class","msgtype":"m.text","org.matrix.msc1767.text":"it's not a class"},"ts":1662340674377,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$zQwnLrkplEET2n3l_ubfUJWj5ldoCufSJFnEKGajrQI"},
{"content":{"body":"I mean, it is also a class","msgtype":"m.text","org.matrix.msc1767.text":"I mean, it is also a class"},"ts":1662340678963,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$4QMhEifke8dCmYYJAOv8_dbL-_2mH_8tjhu4K2UL1z4"},
{"content":{"body":"but there is no particular reason a userland instance needs to have the brand","msgtype":"m.text","org.matrix.msc1767.text":"but there is no particular reason a userland instance needs to have the brand"},"ts":1662340710356,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$gd1aFxN8Oom6Gn5Bh4cnX54Xt-Ix69VjfCVbA5E1Msc"},
{"content":{"body":"> <@ljharb:matrix.org> i didn’t realize that. It shouldn’t use instanceof - like everything else in the language, it should use a brand.\n\nhow do you brand something whose definition is \"has a next method that returns { value, done }\"","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$-C59eABB4tLopeNA70QDInrmx_ThLOoRp6L0LOZJonA?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>i didn’t realize that. It shouldn’t use instanceof - like everything else in the language, it should use a brand.</blockquote></mx-reply>how do you brand something whose definition is &quot;has a next method that returns { value, done }&quot;","m.relates_to":{"m.in_reply_to":{"event_id":"$-C59eABB4tLopeNA70QDInrmx_ThLOoRp6L0LOZJonA"}},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":"> <@ljharb:matrix.org> i didn’t realize that. It shouldn’t use instanceof - like everything else in the language, it should use a brand.\n\nhow do you brand something whose definition is \"has a next method that returns { value, done }\"","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$-C59eABB4tLopeNA70QDInrmx_ThLOoRp6L0LOZJonA?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>i didn’t realize that. It shouldn’t use instanceof - like everything else in the language, it should use a brand.</blockquote></mx-reply>how do you brand something whose definition is &quot;has a next method that returns { value, done }&quot;","mimetype":"text/html"}]},"ts":1662344055471,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$wjliZHNiid8QGrTB7kgtS87RG_3zjE_CgbtSVqha9IM"},
{"content":{"body":"or if you subscribe to the other idea, \"an object inheriting Iterator.prototype\"","msgtype":"m.text","org.matrix.msc1767.text":"or if you subscribe to the other idea, \"an object inheriting Iterator.prototype\""},"ts":1662344156312,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$TM2MohzNM668zrEC6G5fWwteSc68jC9fWX0q8u-DZws"},
{"content":{"body":"objects in the language that inherit from a prototype also have a brand, thats checked in places. ","format":"org.matrix.custom.html","formatted_body":"objects in the language that inherit from a prototype also have a brand, thats checked in places.","msgtype":"m.text"},"ts":1662348923409,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$q70-jSJ6c-bbc5zHbFu0diwU0_yWY-nqXO_pK6pqwF4"},
{"content":{"body":"no i like","msgtype":"m.text","org.matrix.msc1767.text":"no i like"},"ts":1662349115852,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$yLzX0qD9MSI4rNSHJguAS5gaBdVQ8PzVuFGjzDweC-E"},
{"content":{"body":"i do not understand the mechanic by which this would work","msgtype":"m.text","org.matrix.msc1767.text":"i do not understand the mechanic by which this would work"},"ts":1662349122553,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$BNxdPSLejvoMef5pSzoqcJdFd48xGGEJ6Dpodd9PWR4"},
{"content":{"body":"anything that's `instanceof Iterator` in the language would have an internal slot, which is what Iterator.from would check","format":"org.matrix.custom.html","formatted_body":"anything that's <code>instanceof Iterator</code> in the language would have an internal slot, which is what Iterator.from would check","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"anything that's `instanceof Iterator` in the language would have an internal slot, which is what Iterator.from would check","mimetype":"text/plain"},{"body":"anything that's <code>instanceof Iterator</code> in the language would have an internal slot, which is what Iterator.from would check","mimetype":"text/html"}]},"ts":1662398246579,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$cTKEEmqCQeaiaaSXLxkAUeRjkbM9cPLH43JTd3s12eo"},
{"content":{"body":"in the language or, presumably, the web platform?","msgtype":"m.text","org.matrix.msc1767.text":"in the language or, presumably, the web platform?"},"ts":1662398894641,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$H699GBWUMXeVf7zL4ti-BDABSHratzi_FVj05gDIvCg"},
{"content":{"body":"I suppose that would be possible but... why?","msgtype":"m.text","org.matrix.msc1767.text":"I suppose that would be possible but... why?"},"ts":1662398908850,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$yVcmyI3OOTUnDho7vxgNnhNnhlRSTXon5I9LAelmfDo"},
{"content":{"body":"> <@ljharb:matrix.org> anything that's `instanceof Iterator` in the language would have an internal slot, which is what Iterator.from would check\n\nhow do they get the internal slot? they're just random objects","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$cTKEEmqCQeaiaaSXLxkAUeRjkbM9cPLH43JTd3s12eo?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>anything that's <code>instanceof Iterator</code> in the language would have an internal slot, which is what Iterator.from would check</blockquote></mx-reply>how do they get the internal slot? they're just random objects","m.relates_to":{"m.in_reply_to":{"event_id":"$cTKEEmqCQeaiaaSXLxkAUeRjkbM9cPLH43JTd3s12eo"}},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":"> <@ljharb:matrix.org> anything that's `instanceof Iterator` in the language would have an internal slot, which is what Iterator.from would check\n\nhow do they get the internal slot? they're just random objects","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$cTKEEmqCQeaiaaSXLxkAUeRjkbM9cPLH43JTd3s12eo?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>anything that's <code>instanceof Iterator</code> in the language would have an internal slot, which is what Iterator.from would check</blockquote></mx-reply>how do they get the internal slot? they're just random objects","mimetype":"text/html"}]},"ts":1662402129722,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$X1gvWyi6YDLpBtZ1pshW4hk0Ha5h0d7OC4R4WQkYiOI"},
{"content":{"body":"oh are you saying Iterator.from would be the thing that produces objects with that slot","msgtype":"m.text","org.matrix.msc1767.text":"oh are you saying Iterator.from would be the thing that produces objects with that slot"},"ts":1662402220028,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$p6nqnnB3vTDL1nXXRSti-FSYP7YyD337OrpVUqA_eeQ"},
{"content":{"body":"technically the new object it returns has `[[Iterated]]`","format":"org.matrix.custom.html","formatted_body":"technically the new object it returns has <code>[[Iterated]]</code>","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"technically the new object it returns has `[[Iterated]]`","mimetype":"text/plain"},{"body":"technically the new object it returns has <code>[[Iterated]]</code>","mimetype":"text/html"}]},"ts":1662402330272,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$GbZ5clIaMu45qRy04EdC3eOYkZctSQyTu8dcqIbTF0Y"},
{"content":{"body":"but","msgtype":"m.text","org.matrix.msc1767.text":"but"},"ts":1662402331130,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$rnVb2gNeBFL4S4ui_67If6vaoHCrxfeN-KJ-Og_8iSM"},
{"content":{"body":"it doesn't have to return the new object","msgtype":"m.text","org.matrix.msc1767.text":"it doesn't have to return the new object"},"ts":1662402337717,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$FImd2mhLwI5KJblBv9c0IqQmVgECw6pKxoILQur6oac"},
{"content":{"body":"like if i run `Iterator.from({ next() {}, __proto__: Iterator.prototype })`, it should return that argument unchanged","format":"org.matrix.custom.html","formatted_body":"like if i run <code>Iterator.from({ next() {}, __proto__: Iterator.prototype })</code>, it should return that argument unchanged","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"like if i run `Iterator.from({ next() {}, __proto__: Iterator.prototype })`, it should return that argument unchanged","mimetype":"text/plain"},{"body":"like if i run <code>Iterator.from({ next() {}, __proto__: Iterator.prototype })</code>, it should return that argument unchanged","mimetype":"text/html"}]},"ts":1662402370577,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$OWQs9dKQ1qBGHbp2eP5FuuM2feT22tcVozo8XegTveM"},
{"content":{"body":"that doesn’t seem like what it should be doing at all.","msgtype":"m.text"},"ts":1662405990104,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$LU3cw5R66YweG_OuBW8UbulR5gu5Wx_RLoEV3Y_i8wY"},
{"content":{"body":"Array.from doesnt pass through return an arraylike object that has a proto of Array.prototype - it returns a proper array. So should Iterator.from.","msgtype":"m.text"},"ts":1662406037394,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$sMBNGrmFsAXPnpyBfRa1GixxF0X4RoFX09Do9UvEwRQ"},
{"content":{"body":"the definition of \"proper iterator\" _is_ \"inherits from Iterator.prototype\", in this context","format":"org.matrix.custom.html","formatted_body":"the definition of &quot;proper iterator&quot; <em>is</em> &quot;inherits from Iterator.prototype&quot;, in this context","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"the definition of \"proper iterator\" _is_ \"inherits from Iterator.prototype\", in this context","mimetype":"text/plain"},{"body":"the definition of &quot;proper iterator&quot; <em>is</em> &quot;inherits from Iterator.prototype&quot;, in this context","mimetype":"text/html"}]},"ts":1662406111086,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$rhIFVxAciD99tFkC1diOBZ1-Z4iNfndgvnCzRnGua7s"},
{"content":{"body":"i don't think that is or should be the definition","msgtype":"m.text","org.matrix.msc1767.text":"i don't think that is or should be the definition"},"ts":1662407070140,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$PkFPIq2S9HNVlb-gv81EDgh6WJbXSugsyO114Vh91ic"}
]