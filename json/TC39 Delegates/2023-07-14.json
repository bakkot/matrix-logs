[
{"content":{"body":"A question about `import defer`. Currently, a module include top level-await will not be deferred. Could we allow implementations do some static analysis and optimization to defer the sync part (code after the last `await` expression) ?","format":"org.matrix.custom.html","formatted_body":"A question about <code>import defer</code>. Currently, a module include top level-await will not be deferred. Could we allow implementations do some static analysis and optimization to defer the sync part (code after the last <code>await</code> expression) ?","msgtype":"m.text"},"ts":1689328490361,"senderName":"HE Shi-Jun","senderId":"@haxjs:matrix.org","id":"$P8EtzwVwBtBPzX2QexRWYAScUWiI7RAkAcOIEGjrdEk"},
{"content":{"body":"Wouldn't that break run until completion semantics?","msgtype":"m.text"},"ts":1689331515747,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$JfqPJRk5SJ0mAatRUs9ZHyt2xWbjkSaspFmKjn4s16A"},
{"content":{"body":"Maybe not if it, as you say,  doesn't start to run ","format":"org.matrix.custom.html","formatted_body":"Maybe not if it, as you say,  doesn't start to run","msgtype":"m.text"},"ts":1689331548760,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$O1HHR2JBvHW8uY8Fa1mMXtA4sIxUZ1j6LD7saq3pXsk"},
{"content":{"body":"I'm not sure how big a saving g that would add, just the last part of one module ","format":"org.matrix.custom.html","formatted_body":"I'm not sure how big a saving g that would add, just the last part of one module","msgtype":"m.text"},"ts":1689331590487,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$NXQiX6p9-io2IRudr8p91Huotm9LkkuhcG2FjGTRcYs"},
{"content":{"body":"* I'm not sure how big a saving that would add, just the last part of one module","m.new_content":{"body":"I'm not sure how big a saving that would add, just the last part of one module","msgtype":"m.text"},"m.relates_to":{"event_id":"$NXQiX6p9-io2IRudr8p91Huotm9LkkuhcG2FjGTRcYs","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1689331640037,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$Gm0k7SO_tQ3fYfyC9xkDGbtgAF8uC8KKSF8xm_sj4DE"},
{"content":{"body":"Interesting idea though, I'd love to try it out on our version of `import defer` at Bloomberg but our equivalent of TLA isn't as statically analysable so not really possible ","format":"org.matrix.custom.html","formatted_body":"Interesting idea though, I'd love to try it out on our version of <code>import defer</code> at Bloomberg but our equivalent of TLA isn't as statically analysable so not really possible","msgtype":"m.text"},"ts":1689331797507,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$WGSG69fn0Jxf5nJ61DWfXFEBIgjEB9XzvX-yCE9hgm0"},
{"content":{"body":"* I'm not sure how big a saving that would add, just the last part of the N preloaded async modules ","format":"org.matrix.custom.html","formatted_body":"* I'm not sure how big a saving that would add, just the last part of the N preloaded async modules","m.new_content":{"body":"I'm not sure how big a saving that would add, just the last part of the N preloaded async modules ","format":"org.matrix.custom.html","formatted_body":"I'm not sure how big a saving that would add, just the last part of the N preloaded async modules","msgtype":"m.text"},"m.relates_to":{"event_id":"$NXQiX6p9-io2IRudr8p91Huotm9LkkuhcG2FjGTRcYs","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1689333067057,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$QB7xfKP9vXc_CninELOnxgE4rGOcjoHIEgwBDxKds44"},
{"content":{"body":"The tricky part of \"defer the sync part\" is that TLA can be conditional, with the final `await` sitting behind a branch that might not be evaluated. You cannot know whether it will be until the condition is evaluated. Which part, then, is the sync part?","format":"org.matrix.custom.html","formatted_body":"The tricky part of &quot;defer the sync part&quot; is that TLA can be conditional, with the final <code>await</code> sitting behind a branch that might not be evaluated. You cannot know whether it will be until the condition is evaluated. Which part, then, is the sync part?","msgtype":"m.text"},"ts":1689346843789,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$yYU5l9yqfrGIKnTMgUJPqQs1bR7k5gHr3Iic43n01I4"}
]