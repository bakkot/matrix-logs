[
{"content":{"body":"Is it essential that the user of the disposable resource gets to decide whether or not the dispose should be asyncly waited on? \n\nAs opposed to the resource itself deciding that, via the way it sets us the disposable symbol/prototocol.","format":"org.matrix.custom.html","formatted_body":"<p>Is it essential that the user of the disposable resource gets to decide whether or not the dispose should be asyncly waited on?</p>\n<p>As opposed to the resource itself deciding that, via the way it sets us the disposable symbol/prototocol.</p>","msgtype":"m.text"},"ts":1675518808528,"senderName":"Rob Palmer","senderId":"@robpalme:matrix.org","id":"$OfuTZfbUMcOnAAug_xRHKWiGUavzVPGzWh7mTI73gJI"},
{"content":{"body":"* Is it essential that the user of the disposable resource gets to decide whether or not the dispose should be asyncly waited on? \n\nAs opposed to the resource itself deciding that, via the way it sets up the disposable symbol/prototocol.","m.new_content":{"body":"Is it essential that the user of the disposable resource gets to decide whether or not the dispose should be asyncly waited on? \n\nAs opposed to the resource itself deciding that, via the way it sets up the disposable symbol/prototocol.","format":"org.matrix.custom.html","formatted_body":"<p>Is it essential that the user of the disposable resource gets to decide whether or not the dispose should be asyncly waited on?</p>\n<p>As opposed to the resource itself deciding that, via the way it sets up the disposable symbol/prototocol.</p>","msgtype":"m.text"},"m.relates_to":{"event_id":"$OfuTZfbUMcOnAAug_xRHKWiGUavzVPGzWh7mTI73gJI","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1675519524426,"senderName":"Rob Palmer","senderId":"@robpalme:matrix.org","id":"$jS8q4TPfjf_R1M9oLjENocmr8Yleiovscqze9kheyfo"},
{"content":{"body":"Well, I think this is just like async/await in general: if you want to defensively allow waiting for the thing, but you donâ€™t know whether it is really needed, use the await form. This is why using await falls back to the sync dispose method.","msgtype":"m.text"},"ts":1675523224043,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$En0ZvMeq68fkNNlZCqG8FbLUG1_WqXMbsGoRZO8hbrg"},
{"content":{"body":"Remember, sync dispose can already fire off some kind of async cleanup action if it wants, it just cannot force the caller to block for its completion. Using await is for exactly this purpose of when you want blocking on dispose.","msgtype":"m.text"},"ts":1675523348184,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$qe2Bz7Hi8zdmvDlLgQhxv9JvbQw_LWQPdj2gwNttbFo"},
{"content":{"body":"> <@robpalme:matrix.org> Is it essential that the user of the disposable resource gets to decide whether or not the dispose should be asyncly waited on? \n> \n> As opposed to the resource itself deciding that, via the way it sets up the disposable symbol/prototocol.\n\nWe made the decision early on to ensure the object matches the user's intent, not the other way around, not unlike `for` vs `for await`. ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$OfuTZfbUMcOnAAug_xRHKWiGUavzVPGzWh7mTI73gJI?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@robpalme:matrix.org\">@robpalme:matrix.org</a><br /><p>Is it essential that the user of the disposable resource gets to decide whether or not the dispose should be asyncly waited on?</p>\n<p>As opposed to the resource itself deciding that, via the way it sets up the disposable symbol/prototocol.</p></blockquote></mx-reply>We made the decision early on to ensure the object matches the user's intent, not the other way around, not unlike <code>for</code> vs <code>for await</code>.","m.relates_to":{"m.in_reply_to":{"event_id":"$OfuTZfbUMcOnAAug_xRHKWiGUavzVPGzWh7mTI73gJI"}},"msgtype":"m.text"},"ts":1675528193937,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$m7ztVFap4EWv2zchCrZQ9vPLLI0ZXGX4Om5vazpj-og"}
]