[
{"content":{"body":"ðŸ¤”","msgtype":"m.text","org.matrix.msc1767.text":"ðŸ¤”"},"ts":1649320839544,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$-aWGpGQSkBFCly6wpT5Baat82Kn5vUuZRY7mZHBoRmw"},
{"content":{"body":"take use of `AbortSignal` into the language without bring `EventTarget` into the language. How do you think this","format":"org.matrix.custom.html","formatted_body":"take use of <code>AbortSignal</code> into the language without bring <code>EventTarget</code> into the language. How do you think this","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"take use of `AbortSignal` into the language without bring `EventTarget` into the language. How do you think this","mimetype":"text/plain"},{"body":"take use of <code>AbortSignal</code> into the language without bring <code>EventTarget</code> into the language. How do you think this","mimetype":"text/html"}]},"ts":1649320867018,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$MItc3bvEH3hY1J3uqoPGdFmfBHOKdqXg-fP1I9CZ4OM"},
{"content":{"body":"FYI, it happens at https://github.com/ajvincent/proposal-mass-proxy-revocation/pull/12","msgtype":"m.text","org.matrix.msc1767.text":"FYI, it happens at https://github.com/ajvincent/proposal-mass-proxy-revocation/pull/12"},"ts":1649320880562,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$ZMp17KaiL2PFqWPOTXyxqliNHl8c0aL7BnZzQBLTgeA"},
{"content":{"body":"Jack Works: why not use the contract from DOM? As in you hand the abort signal some set of steps to run upon aborting","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jackworks:matrix.org\">Jack Works</a>: why not use the contract from DOM? As in you hand the abort signal some set of steps to run upon aborting","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Jack Works: why not use the contract from DOM? As in you hand the abort signal some set of steps to run upon aborting","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@jackworks:matrix.org\">Jack Works</a>: why not use the contract from DOM? As in you hand the abort signal some set of steps to run upon aborting","mimetype":"text/html"}]},"ts":1649330325445,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$TOquv9usvbWWKMlDMyxbBaXueMuRvBu6glLWJGyZ3Ls"},
{"content":{"body":"Jack Works: also a slot containing a slot seems dubious","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jackworks:matrix.org\">Jack Works</a>: also a slot containing a slot seems dubious","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Jack Works: also a slot containing a slot seems dubious","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@jackworks:matrix.org\">Jack Works</a>: also a slot containing a slot seems dubious","mimetype":"text/html"}]},"ts":1649330389101,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$7MvZOwC_L2UL4NPbBkO6a5w_zL0McaqgNb_7uV-UWH4"},
{"content":{"body":"> <@annevk:mozilla.org> Jack Works: why not use the contract from DOM? As in you hand the abort signal some set of steps to run upon aborting\n\nDOM contract uses async callback which we want to avoid","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$TOquv9usvbWWKMlDMyxbBaXueMuRvBu6glLWJGyZ3Ls?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@annevk:mozilla.org\">@annevk:mozilla.org</a><br /><a href=\"https://matrix.to/#/@jackworks:matrix.org\">Jack Works</a>: why not use the contract from DOM? As in you hand the abort signal some set of steps to run upon aborting</blockquote></mx-reply>DOM contract uses async callback which we want to avoid","m.relates_to":{"m.in_reply_to":{"event_id":"$TOquv9usvbWWKMlDMyxbBaXueMuRvBu6glLWJGyZ3Ls"}},"msgtype":"m.text"},"ts":1649331903891,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$qsuqmoCYUc3WAZw2dII_Ehs6o_mlOORoPSjaWBtv2yE"},
{"content":{"body":"And it's more dubious if we write ? Get(signal, \"addEventListener\")","msgtype":"m.text"},"ts":1649332144478,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$eXqNQoqcLDF35wcUS9rKH1X_u_ZQC9fqJhHXB9yfFLU"},
{"content":{"body":"Jack Works: that would be dubious, but there's a non-script-exposed mechanism which is what I was referring to","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jackworks:matrix.org\">Jack Works</a>: that would be dubious, but there's a non-script-exposed mechanism which is what I was referring to","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Jack Works: that would be dubious, but there's a non-script-exposed mechanism which is what I was referring to","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@jackworks:matrix.org\">Jack Works</a>: that would be dubious, but there's a non-script-exposed mechanism which is what I was referring to","mimetype":"text/html"}]},"ts":1649333169687,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$DdSDQRq1scKWHDpxKkQzij48Q2h8cKOyNOsx8pSBuGc"},
{"content":{"body":"And if you want this to be useful beyond this API you'd need some kind of callback-style thing I'd think, not everything can lazily check whether the signal is aborted","msgtype":"m.text","org.matrix.msc1767.text":"And if you want this to be useful beyond this API you'd need some kind of callback-style thing I'd think, not everything can lazily check whether the signal is aborted"},"ts":1649333246279,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$XlU5ZBQkrxHX1jZi6LEjIrxBOJsw2GNoCZutuled3rk"},
{"content":{"body":"Yeah I agree. Since it will be much harder to design a general signal (with callback) I think it's somehow ok since we don't have anywhere else that requires a signal","msgtype":"m.text"},"ts":1649334842660,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$5zRXCPmw1oL4iu74AgL5OBgg-YJWdRVtJM6XlFEyEIQ"},
{"content":{"body":"I've wanted to push cancellation forward, but I keep getting the same response from Domenic and he seems to have no interest in discussing the point further. ","format":"org.matrix.custom.html","formatted_body":"I've wanted to push cancellation forward, but I keep getting the same response from Domenic and he seems to have no interest in discussing the point further.","msgtype":"m.text"},"ts":1649340267841,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$cl83nuspd2bKblEx5-waCrD5g5dCx-R3Sdu12vW7TNo"},
{"content":{"body":"There are multiple issues with AbortController that make it not ideal for inclusion in ECMA-262","msgtype":"m.text"},"ts":1649340446450,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$mcO9bDhKcIL1x2PcFSkGz_ApsLgtFaqkP42mjTzMcwA"},
{"content":{"body":"> <@jackworks:matrix.org> Yeah I agree. Since it will be much harder to design a general signal (with callback) I think it's somehow ok since we don't have anywhere else that requires a signal\n\nThere are other places where it would be useful","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$5zRXCPmw1oL4iu74AgL5OBgg-YJWdRVtJM6XlFEyEIQ?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@jackworks:matrix.org\">@jackworks:matrix.org</a><br />Yeah I agree. Since it will be much harder to design a general signal (with callback) I think it's somehow ok since we don't have anywhere else that requires a signal</blockquote></mx-reply>There are other places where it would be useful","m.relates_to":{"m.in_reply_to":{"event_id":"$5zRXCPmw1oL4iu74AgL5OBgg-YJWdRVtJM6XlFEyEIQ"}},"msgtype":"m.text"},"ts":1649340495390,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$5S-W_8NxcEn7a6KRaj_Ppq1YdDw4CI_fhCUJiIcNicU"},
{"content":{"body":"I think Domenic gave a reasonable way forward that Jack Works seems to be pursuing? You make the signal host-supplied and define a compatible not-script-visible contract with it.","format":"org.matrix.custom.html","formatted_body":"I think Domenic gave a reasonable way forward that <a href=\"https://matrix.to/#/@jackworks:matrix.org\">Jack Works</a> seems to be pursuing? You make the signal host-supplied and define a compatible not-script-visible contract with it.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"I think Domenic gave a reasonable way forward that Jack Works seems to be pursuing? You make the signal host-supplied and define a compatible not-script-visible contract with it.","mimetype":"text/plain"},{"body":"I think Domenic gave a reasonable way forward that <a href=\"https://matrix.to/#/@jackworks:matrix.org\">Jack Works</a> seems to be pursuing? You make the signal host-supplied and define a compatible not-script-visible contract with it.","mimetype":"text/html"}]},"ts":1649346730154,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$EKETSWJE8v4ZSRosHF1-AeaEP2hWwu6F6dLxZe8IS0w"},
{"content":{"body":"Wasn't part of Jack Works concern that AbortSignal is an async callback? IIRC, AbortSignal also uses EventTarget for abort registration, which holds onto the callback even after the signal is aborted, which can prevent GC","format":"org.matrix.custom.html","formatted_body":"Wasn't part of <a href=\"https://matrix.to/#/@jackworks:matrix.org\">Jack Works</a> concern that AbortSignal is an async callback? IIRC, AbortSignal also uses EventTarget for abort registration, which holds onto the callback even after the signal is aborted, which can prevent GC","msgtype":"m.text"},"ts":1649346913165,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$dRtDYszfXm96axE05RPX8g2U2K706JGj0cAWqV9Bvo8"},
{"content":{"body":"You can add a callback to an AbortSignal but you can also lazily check whether it's aborted. I think Jack Works said that for their thing the latter is sufficient.","format":"org.matrix.custom.html","formatted_body":"You can add a callback to an AbortSignal but you can also lazily check whether it's aborted. I think <a href=\"https://matrix.to/#/@jackworks:matrix.org\">Jack Works</a> said that for their thing the latter is sufficient.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"You can add a callback to an AbortSignal but you can also lazily check whether it's aborted. I think Jack Works said that for their thing the latter is sufficient.","mimetype":"text/plain"},{"body":"You can add a callback to an AbortSignal but you can also lazily check whether it's aborted. I think <a href=\"https://matrix.to/#/@jackworks:matrix.org\">Jack Works</a> said that for their thing the latter is sufficient.","mimetype":"text/html"}]},"ts":1649346988267,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$VGULCQbXtd0k4FukKPQYS_Q2YnWquZCdfzCHr4JRYYQ"},
{"content":{"body":"The callback is a spec-concept btw, it's not exposed. Any event listeners would be user code.","msgtype":"m.text","org.matrix.msc1767.text":"The callback is a spec-concept btw, it's not exposed. Any event listeners would be user code."},"ts":1649347017209,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$Lj34Dt9hKKKi3a872fwdNLZ970eNK2D7jyA9djL2VcI"},
{"content":{"body":"I was able to make a version of `@esfx/async-canceltoken` that works with the DOM but uses my proposed cancellation API, so I may end up going with Domenic's suggestion despite my reservations","format":"org.matrix.custom.html","formatted_body":"I was able to make a version of <code>@esfx/async-canceltoken</code> that works with the DOM but uses my proposed cancellation API, so I may end up going with Domenic's suggestion despite my reservations","msgtype":"m.text"},"ts":1649347049668,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$kyJ-XLu6Ysz7ag56mVSxdgT-OjdyHHhcWt0Mwh1xiaU"},
{"content":{"body":"But I find it very unfortunate we can't have an actual cancellation primitive in the core language because of this","msgtype":"m.text"},"ts":1649347093425,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$CC3zTKxgHclEl_48Q7bdWiwz2Ch3LQj5JubCEMZTvTk"},
{"content":{"body":"(my \"compatible\" CancelToken just creates an AbortSignal and repoints the prototype so that it has the correct internal slots the DOM expects)","msgtype":"m.text"},"ts":1649347192841,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$1ZezKIwlCzZ-WGDsH7IzhOSY865dcJEInawDgTLGc7I"},
{"content":{"body":"It doesn't seem inconceivable for JS to embrace EventTarget one day, but I personally don't get super excited about artificial boundaries imposed by standards bodies ðŸ™‚ ","msgtype":"m.text","org.matrix.msc1767.text":"It doesn't seem inconceivable for JS to embrace EventTarget one day, but I personally don't get super excited about artificial boundaries imposed by standards bodies ðŸ™‚ "},"ts":1649347214374,"senderName":"annevk","senderId":"@annevk:mozilla.org","id":"$zT0U9sYSvnOmxYGyv_yRQ-hJ8YRjyuAgKcKbAp84glk"},
{"content":{"body":"And, honestly, that might be an alternative to a host hook as well... ","format":"org.matrix.custom.html","formatted_body":"And, honestly, that might be an alternative to a host hook as well...","msgtype":"m.text"},"ts":1649347230387,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$tYvvtfa5anXLAkfcsLsYeQQ0K3gQ6jY2TanKfiTcxgg"},
{"content":{"body":"It's not just EventTarget, it's the exceptions that are thrown as well. I had the same issue looking into bringing a portion of the Web crypto api to TC39 ","format":"org.matrix.custom.html","formatted_body":"It's not just EventTarget, it's the exceptions that are thrown as well. I had the same issue looking into bringing a portion of the Web crypto api to TC39","msgtype":"m.text"},"ts":1649347309262,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$hqtwiI8E5ILJEQXN2DbUcb-Xo6RACsYeKV3XUavB6vU"},
{"content":{"body":"I'd like to bring a slew of async coordination primitive proposals to committee as well, but they need a cancellation primitive to be useful. ","format":"org.matrix.custom.html","formatted_body":"I'd like to bring a slew of async coordination primitive proposals to committee as well, but they need a cancellation primitive to be useful.","msgtype":"m.text"},"ts":1649347429084,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$q-eMl2z7nvC5tJiZDOYnilu65uVcW9iN69B5cOfAFBs"},
{"content":{"body":"About 70% of `@esfx/*` are prototypes and proofs-of-concept for existing and future proposals ","format":"org.matrix.custom.html","formatted_body":"About 70% of <code>@esfx/*</code> are prototypes and proofs-of-concept for existing and future proposals","msgtype":"m.text"},"ts":1649347540648,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$XC4AgknAVXTgAG6M9Jpkam5djZJyG6zp9qSw8GK8ax0"}
]