[
{"content":{"body":"I will be happy to revisit it and add the omitted data properties as a proposal once the websites are fixed. I canâ€™t speak to chromes opinion on that tho.","msgtype":"m.text"},"ts":1701218642846,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$vhWVk8MhZyZMSJzovGsng8pffmKshnrt4jKHOxPHtrU"},
{"content":{"body":"assuming it's web-compat to do so, which it may not be","m.mentions":{},"msgtype":"m.text"},"ts":1701218847336,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$klWkAMDs8cGXkCjO_RF9X4srknw7dK16gP5bbV-4jY8"},
{"content":{"body":"whereas it would almost certainly be web-compat to change the accessors to data properties as long as the people in this room agreed not to rely on them being accessors","m.mentions":{},"msgtype":"m.text"},"ts":1701218868283,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$H0tpJuB4kf-fqxAzGgaX5aTk7CDu_WdGIRk2MpHKVjA"},
{"content":{"body":"Do we just need to spec a special data property flag that allows assignment of the property on an instance even if the prototype is non-writable/non-configurable? It seems to me this isn't the last time this will come up. ","format":"org.matrix.custom.html","formatted_body":"Do we just need to spec a special data property flag that allows assignment of the property on an instance even if the prototype is non-writable/non-configurable? It seems to me this isn't the last time this will come up.","msgtype":"m.text"},"ts":1701221712606,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$EQOReIUIXmtKgUjsn_An35ZNTzg2a4RynLQuBqEjU_M"},
{"content":{"body":"I think that would be worse than just having a bunch of accessors.","m.mentions":{},"msgtype":"m.text"},"ts":1701224014964,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$r-yY4A55Th3q23piyWW5fibknrScQv-nSrfl8iWjW8Q"},
{"content":{"body":"FYI I will miss the first 90 minutes today","msgtype":"m.text"},"ts":1701278068936,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$QtPw7NTtjWQ-lIoSXaqJbwghCFHF3l84QSYfDYBfyCI"},
{"content":{"body":"Rezvan: Does Chrome have a position here? If these properties are omitted for now, would you consider attempting to add data properties again in the future, or are accessors the only option?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@rmahdav:matrix.org\">Rezvan</a>: Does Chrome have a position here? If these properties are omitted for now, would you consider attempting to add data properties again in the future, or are accessors the only option?","m.mentions":{"user_ids":["@rmahdav:matrix.org"]},"m.relates_to":{"event_id":"$vhWVk8MhZyZMSJzovGsng8pffmKshnrt4jKHOxPHtrU","is_falling_back":true,"m.in_reply_to":{"event_id":"$vhWVk8MhZyZMSJzovGsng8pffmKshnrt4jKHOxPHtrU"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1701278533088,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$mUjGSEDzUlqjrkFPgEl47IAMwKzBeNOq3ooRU3eGbEA"},
{"content":{"body":"#jsx:matrix.org ","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/#jsx:matrix.org\">#jsx:matrix.org</a>","m.mentions":{},"msgtype":"m.text"},"ts":1701280938467,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$HeV-fKEAUJzxeqFXDUv9iZ-9GAVrp8ZpyLQrakF0WPw"},
{"content":{"body":"I wonder if a generalized `canParse` solution for JS would be viable as an alternative to using `eval` or `Function` for syntactic feature testing ","format":"org.matrix.custom.html","formatted_body":"I wonder if a generalized <code>canParse</code> solution for JS would be viable as an alternative to using <code>eval</code> or <code>Function</code> for syntactic feature testing","m.mentions":{},"msgtype":"m.text"},"ts":1701281080900,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$sKO99dCsEEAYs5Tk-WCctU8cIZsg9YEC0eMT3AnO-QA"},
{"content":{"body":"> <@rbuckton:matrix.org> I wonder if a generalized `canParse` solution for JS would be viable as an alternative to using `eval` or `Function` for syntactic feature testing\n\ndefinitely, and similar to [CSS.supports](https://developer.mozilla.org/en-US/docs/Web/API/CSS/supports_static)","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$sKO99dCsEEAYs5Tk-WCctU8cIZsg9YEC0eMT3AnO-QA?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@rbuckton:matrix.org\">@rbuckton:matrix.org</a><br>I wonder if a generalized <code>canParse</code> solution for JS would be viable as an alternative to using <code>eval</code> or <code>Function</code> for syntactic feature testing</blockquote></mx-reply>definitely, and similar to <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/CSS/supports_static\">CSS.supports</a>","m.mentions":{"user_ids":["@rbuckton:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$sKO99dCsEEAYs5Tk-WCctU8cIZsg9YEC0eMT3AnO-QA"}},"msgtype":"m.text"},"ts":1701281353237,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$UIX0NpikPpCl9B3kMJn8ZI-T-X7HUa_jQ4kMdcIVlkc"},
{"content":{"body":"how do people feel about\n```\nFunction.prototype.try = function(...args) {\n  try {\n    return { success: true, value: this.apply(null, args) };\n  } catch {\n    return { success: false, value: undefined };\n  }\n}\n```\nas in\n```\nlet { success, value } = JSON.parse.try(string);\n```","format":"org.matrix.custom.html","formatted_body":"<p>how do people feel about</p>\n<pre><code>Function.prototype.try = function(...args) {\n  try {\n    return { success: true, value: this.apply(null, args) };\n  } catch {\n    return { success: false, value: undefined };\n  }\n}\n</code></pre>\n<p>as in</p>\n<pre><code>let { success, value } = JSON.parse.try(string);\n</code></pre>\n","m.mentions":{},"msgtype":"m.text"},"ts":1701281623010,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$_xZ4PVB2fRsFf0_NOqg48u9oT1S9RNkfmsC7gsDhdC0"},
{"content":{"body":"only works for functions not methods, I guess","m.mentions":{},"msgtype":"m.text"},"ts":1701281668078,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$dRmT4n1Eo8EstQlsvuq7jDFnzJtbyx80WkUp7QpOaSI"},
{"content":{"body":"guess there could be a `tryWithThis` which would let you do `JSON.parse.try(JSON, string)`","format":"org.matrix.custom.html","formatted_body":"guess there could be a <code>tryWithThis</code> which would let you do <code>JSON.parse.try(JSON, string)</code>","m.mentions":{},"msgtype":"m.text"},"ts":1701281706922,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$7qwiJkSliJQPyKEOwbzIXpDWlOPGf_d-nvxjGehW9eo"},
{"content":{"body":"i like that, it has the side benefit that it encourages use of standalone functions","m.mentions":{},"msgtype":"m.text"},"ts":1701281715663,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$Rg3fAKqk4p7aaR5jpzbMto5_Y7YJuP4Vvzr9pmFbBk8"},
{"content":{"body":" * i like that (the non-method one), it has the side benefit that it encourages use of standalone functions","m.mentions":{},"m.new_content":{"body":"i like that (the non-method one), it has the side benefit that it encourages use of standalone functions","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$Rg3fAKqk4p7aaR5jpzbMto5_Y7YJuP4Vvzr9pmFbBk8","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1701281728935,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$H6jL3NosECzsNJ7dKCtWyTbLR1nztzJpN0PFAc8L7fo"},
{"content":{"body":"`let { success, value } = tryApply(target, thisArgument, argumentsList)` would be language-consistent but less ergonomic","format":"org.matrix.custom.html","formatted_body":"<code>let { success, value } = tryApply(target, thisArgument, argumentsList)</code> would be language-consistent but less ergonomic","m.mentions":{},"msgtype":"m.text"},"ts":1701281829563,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$F9l4b4JMWV776fzkzH0esu6Et32K8NTaqhDJvmpN6Ug"},
{"content":{"body":" * `let { success, value } = tryApply(fn, thisArgument, argumentsList)` would be language-consistent but less ergonomic","format":"org.matrix.custom.html","formatted_body":" * <code>let { success, value } = tryApply(fn, thisArgument, argumentsList)</code> would be language-consistent but less ergonomic","m.mentions":{},"m.new_content":{"body":"`let { success, value } = tryApply(fn, thisArgument, argumentsList)` would be language-consistent but less ergonomic","format":"org.matrix.custom.html","formatted_body":"<code>let { success, value } = tryApply(fn, thisArgument, argumentsList)</code> would be language-consistent but less ergonomic","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$F9l4b4JMWV776fzkzH0esu6Et32K8NTaqhDJvmpN6Ug","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1701281840259,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$ub8f1G82bF_TBBUBNXUmkQ9vj5KzO-MDKHd8rD1AMgg"},
{"content":{"body":"`fn.tryApply` is at least as consistent, surely","format":"org.matrix.custom.html","formatted_body":"<code>fn.tryApply</code> is at least as consistent, surely","m.mentions":{},"msgtype":"m.text"},"ts":1701281856205,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$wcnzFVRMSCOJ3lZQQ0znEKdxSIOGf-kQ-VF8H7FAP-4"},
{"content":{"body":" * `fn.tryApply(thisArgument, argumentsList)` is at least as consistent, surely","format":"org.matrix.custom.html","formatted_body":" * <code>fn.tryApply(thisArgument, argumentsList)</code> is at least as consistent, surely","m.mentions":{},"m.new_content":{"body":"`fn.tryApply(thisArgument, argumentsList)` is at least as consistent, surely","format":"org.matrix.custom.html","formatted_body":"<code>fn.tryApply(thisArgument, argumentsList)</code> is at least as consistent, surely","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$wcnzFVRMSCOJ3lZQQ0znEKdxSIOGf-kQ-VF8H7FAP-4","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1701281866874,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$GJW7d7I9Pr1t-MtolXOCvM1Y1S2LjT8dxBV2i3M-tpI"},
{"content":{"body":"i'd swap those two but sure","m.mentions":{},"msgtype":"m.text"},"ts":1701281889714,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$wGlrtk8z_h2VKR8QAsUEjOtqWxul4A5qy5MePMmwmPA"},
{"content":{"body":" * i'd swap those two but sure (`thisArg` goes last, just like all the array methods)","format":"org.matrix.custom.html","formatted_body":" * i'd swap those two but sure (<code>thisArg</code> goes last, just like all the array methods)","m.mentions":{},"m.new_content":{"body":"i'd swap those two but sure (`thisArg` goes last, just like all the array methods)","format":"org.matrix.custom.html","formatted_body":"i'd swap those two but sure (<code>thisArg</code> goes last, just like all the array methods)","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$wGlrtk8z_h2VKR8QAsUEjOtqWxul4A5qy5MePMmwmPA","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1701281902094,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$DPvFYPhTodlm-nRLmQkyUG5Mse9brFGbSTJkeHGMxpg"},
{"content":{"body":"or I guess `fn.tryCall(thisArgument, ...args)`","format":"org.matrix.custom.html","formatted_body":"or I guess <code>fn.tryCall(thisArgument, ...args)</code>","m.mentions":{},"msgtype":"m.text"},"ts":1701281909437,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$bHfiwKl61fh44nMRdZOu4BODM6AXvUlDgpjQbw2zV7Q"},
{"content":{"body":" * i'd swap those two but sure (`thisArg` goes last, just like all the array methods, since it's more optional than args)","format":"org.matrix.custom.html","formatted_body":" * i'd swap those two but sure (<code>thisArg</code> goes last, just like all the array methods, since it's more optional than args)","m.mentions":{},"m.new_content":{"body":"i'd swap those two but sure (`thisArg` goes last, just like all the array methods, since it's more optional than args)","format":"org.matrix.custom.html","formatted_body":"i'd swap those two but sure (<code>thisArg</code> goes last, just like all the array methods, since it's more optional than args)","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$wGlrtk8z_h2VKR8QAsUEjOtqWxul4A5qy5MePMmwmPA","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1701281910863,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$sjIeI5Q9Egj2V1WMwVrpvAxa4c5bl0cQMRaF4U15D6k"},
{"content":{"body":"> <@ljharb:matrix.org> i'd swap those two but sure (`thisArg` goes last, just like all the array methods, since it's more optional than args)\n\nI disagree, `thisArg` should come first, like `call` and `apply`","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$wGlrtk8z_h2VKR8QAsUEjOtqWxul4A5qy5MePMmwmPA?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>i'd swap those two but sure (<code>thisArg</code> goes last, just like all the array methods, since it's more optional than args)</blockquote></mx-reply>I disagree, <code>thisArg</code> should come first, like <code>call</code> and <code>apply</code>","m.mentions":{"user_ids":["@ljharb:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$wGlrtk8z_h2VKR8QAsUEjOtqWxul4A5qy5MePMmwmPA"}},"msgtype":"m.text"},"ts":1701281929703,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$aq4ObuVFf4Y0tFHQaWBYqFVQwZDEUkOiqiTH67w3L54"},
{"content":{"body":"oh hm, i guess i see that argument too","m.mentions":{},"msgtype":"m.text"},"ts":1701281942501,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$aODpik9hEEk7iqzmLC_UHy2yar02Sy8zM-vjGjg70Uc"},
{"content":{"body":"but also I would want a version that doesn't take `this` at all","format":"org.matrix.custom.html","formatted_body":"but also I would want a version that doesn't take <code>this</code> at all","m.mentions":{},"msgtype":"m.text"},"ts":1701281942593,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$ZrYCwOgO4YX-KZfB1OlUndxVc7hd339Lnd3bsJg5QaQ"},
{"content":{"body":"i get this feeling that like","m.mentions":{},"msgtype":"m.text"},"ts":1701281963310,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$lsnP-n6_wsusk6NULyPF7plDGAWL77iTyNfTMMIIx2s"},
{"content":{"body":"so specifically I think I like best `.try`, which is only useful for non-methods, and `.tryCall`, which adds an initial `this` parameter","format":"org.matrix.custom.html","formatted_body":"so specifically I think I like best <code>.try</code>, which is only useful for non-methods, and <code>.tryCall</code>, which adds an initial <code>this</code> parameter","m.mentions":{},"msgtype":"m.text"},"ts":1701281963831,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$HdMD63f5BrYJlvxn0mzP8UQcMjUiRpOHOQAA3nxbYYM"},
{"content":{"body":"yeah if the thisArg has to come first in a call/apply variant then i'd def want yet another one that omitted the receiver entirely","m.mentions":{},"msgtype":"m.text"},"ts":1701281966264,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$5vLN5d9XipfoLfK09tv_HqSXXoItuf9cTPHZUiVLWNs"},
{"content":{"body":"async modules are some sort of fundamental failure","m.mentions":{},"msgtype":"m.text"},"ts":1701281971304,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$eMo4uXSfe_AWsuUGJbfcSF5PnbqIfmlzQJCMjODHbAY"},
{"content":{"body":"yeah, that's the friction point","m.mentions":{},"msgtype":"m.text"},"ts":1701281972369,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$j4e3-AuU5svPa-Y20dzSQgTPttLyaad_AuYCcFSkZYw"},
{"content":{"body":"because everyone keeps trying to build ways to disable them","m.mentions":{},"msgtype":"m.text"},"ts":1701281976815,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$dEc-gym8NttMEbYPwe18qHdvqlGjQE4-gWXHlw9IwWI"},
{"content":{"body":"but i don't want them to be some sort of fundamental failure","m.mentions":{},"msgtype":"m.text"},"ts":1701281991444,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$42vnADhl0RQvOKWIlr8s8TYAwAKmYJ7n632qECrCayY"},
{"content":{"body":"i really like them","m.mentions":{},"msgtype":"m.text"},"ts":1701281993299,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$3jD8K8BPc6LyT0C2vTRGcw3KSAa1LIN4r64oR1Y8S64"},
{"content":{"body":"agreed on both points","m.mentions":{},"msgtype":"m.text"},"ts":1701282013915,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$ZJ9buAihVHjUbXewNhqvVyvy7iza8AHvn_Hn8c17cd4"},
{"content":{"body":"another place where async modules were no longer used https://github.com/WebAssembly/esm-integration/pull/76","m.mentions":{},"msgtype":"m.text"},"ts":1701282191894,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$pDmG_0GvfgCV7-QEsups9dDzjF0oy1h5Q37SUk2Ydb0"},
{"content":{"body":"lol if we end up doing a directive, there's going to be a deluge of pragma/directive proposals once \"no more modes\" isn't a law anymore","m.mentions":{},"msgtype":"m.text"},"ts":1701282284348,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$yFHTGIFIIFQPMs9owOznJiAUH0yHTbLry2SdmnBCVPM"},
{"content":{"body":"eh, I think directives which either evaluate normally or cause errors aren't really new modes","m.mentions":{},"msgtype":"m.text"},"ts":1701282312042,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$DxqSC0A7g7fxpaXsWOK-RfHvuo7E4h-50wM1Vgfn8h4"},
{"content":{"body":"> <@ljharb:matrix.org> lol if we end up doing a directive, there's going to be a deluge of pragma/directive proposals once \"no more modes\" isn't a law anymore\n\nThis directive wouldn't be a new mode","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$yFHTGIFIIFQPMs9owOznJiAUH0yHTbLry2SdmnBCVPM?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>lol if we end up doing a directive, there&#39;s going to be a deluge of pragma/directive proposals once &quot;no more modes&quot; isn&#39;t a law anymore</blockquote></mx-reply>This directive wouldn't be a new mode","m.mentions":{"user_ids":["@ljharb:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$yFHTGIFIIFQPMs9owOznJiAUH0yHTbLry2SdmnBCVPM"}},"msgtype":"m.text"},"ts":1701282315737,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$0OPFQOLZqtUcMAq0k55lYn3r3j7ILvVicEk6jKfHX2c"},
{"content":{"body":"> <@ljharb:matrix.org> lol if we end up doing a directive, there's going to be a deluge of pragma/directive proposals once \"no more modes\" isn't a law anymore\n\n * This directive wouldn't be a new mode like strict vs sloppy","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$yFHTGIFIIFQPMs9owOznJiAUH0yHTbLry2SdmnBCVPM?via=matrix.org&amp;via=mozilla.org&amp;via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>lol if we end up doing a directive, there's going to be a deluge of pragma/directive proposals once \"no more modes\" isn't a law anymore</blockquote></mx-reply> * This directive wouldn't be a new mode like strict vs sloppy","m.mentions":{},"m.new_content":{"body":"This directive wouldn't be a new mode like strict vs sloppy","format":"org.matrix.custom.html","formatted_body":"This directive wouldn't be a new mode like strict vs sloppy","m.mentions":{"user_ids":["@ljharb:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$0OPFQOLZqtUcMAq0k55lYn3r3j7ILvVicEk6jKfHX2c","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1701282321742,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$vMYMEJleM-X-w44U1qYCLQc_WSHVe0mA_IaNK6fbEP4"},
{"content":{"body":"It doesn't introduce a new \"language version\"","m.mentions":{},"msgtype":"m.text"},"ts":1701282336642,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$dBs_O-hPFCxWiL4julXkatgIv8QHvpJqLS9umPx2a6g"},
{"content":{"body":"No more than doing the same through any other syntax","m.mentions":{},"msgtype":"m.text"},"ts":1701282348341,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$webZ9aIQl7kDQaBHzGPT87d9GF0soDkGYqXMfO28Dxc"},
{"content":{"body":"lol yeah i understand the nuance, but i don't think it will come across","m.mentions":{},"msgtype":"m.text"},"ts":1701282350896,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$-8DGmqolB7DLqxPZfJ56ZZ1o_DfFfKxwSJOPk9TROLA"},
{"content":{"body":"`export with { sync: true }`? Not a huge fan of how it reads though.","format":"org.matrix.custom.html","formatted_body":"<code>export with { sync: true }</code>? Not a huge fan of how it reads though.","m.mentions":{},"msgtype":"m.text"},"ts":1701282563021,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$DovOAfeNDr9keiOF0HacLJzTk0YAO3bmPtVIe9Ec7IY"},
{"content":{"body":"ps here's a relevant snippet from the notes from 2018 related to this exact problem: https://github.com/tc39/notes/blob/df1449925841bc77574e8e127611234670275575/meetings/2019-03/mar-28.md?plain=1#L507-L519","m.mentions":{},"msgtype":"m.text"},"ts":1701282574787,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$a35ydVPQ2fCgn1uS_YhJwVcN6_n_cvfyRHIKkzOIrPc"},
{"content":{"body":"oh man i would hate if nodejs was another reason for people to not use async modules","m.mentions":{},"msgtype":"m.text"},"ts":1701282966499,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$9pjw2xYj6_pBOnHxr2iohjkiMx5sou441-dyz-qBvJs"},
{"content":{"body":"that would kill me","m.mentions":{},"msgtype":"m.text"},"ts":1701282968367,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$um2kk3K_6T8GAmRapNE87RsOj5oEZl_31XdxZ_-2ADw"},
{"content":{"body":"what about a function or bit of syntax that {tells you whether/asserts !} you've hit the event loop? i feel like that's always what you really care about in these worker listener cases","m.mentions":{},"msgtype":"m.text"},"ts":1701283214062,"senderName":"peetk","senderId":"@peetk:matrix.org","id":"$8Abo-rrYjKe7vA01nND6rnTjiElMFWZKl23LT7H6nLg"},
{"content":{"body":"If you have multiple script tags the event loop will start spinning before that the module even starts running, so it would always say \"yes\"","msgtype":"m.text"},"ts":1701283727959,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$jREOaXeqgvXyc3hsWQ2R6Xa0vY8aF-igIBUjCYK0k5U"},
{"content":{"body":"Example: you load an analytics script and your main entry point module, and the analytics script already spins the event loop","msgtype":"m.text"},"ts":1701283804270,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$dJcut8WtboXRXy8F8W7e5yt61la5_Cfr1WZ-xNV6ECs"},
{"content":{"body":"then that would be the correct result right?","m.mentions":{},"msgtype":"m.text"},"ts":1701284171098,"senderName":"peetk","senderId":"@peetk:matrix.org","id":"$Wt6lrfZ39YMxLYlUmLZxAJxVwD7EfRDsYUmtWQVH0xE"},
{"content":{"body":"if you are a worker and you need to register listeners to handle messages then you absolutely must register them before you hit the event loop","m.mentions":{},"msgtype":"m.text"},"ts":1701284214370,"senderName":"peetk","senderId":"@peetk:matrix.org","id":"$E5zjxAVxGDQUPhrdLkn1eEjQn1XaXfurrVyZd1sI-o4"},
{"content":{"body":"I see a barrel library","m.mentions":{},"msgtype":"m.text"},"ts":1701284282312,"senderName":"Rob Palmer","senderId":"@robpalme:matrix.org","id":"$M030d53aG1r98fRRTrwJv9uvvGr3CGrG3gNrZKbv6Pc"},
{"content":{"body":"deferred imports make me very nervous; a keyword on `export` that's a lazily evaluated thing on the first import seems pretty nice.","format":"org.matrix.custom.html","formatted_body":"deferred imports make me very nervous; a keyword on <code>export</code> that's a lazily evaluated thing on the first import seems pretty nice.","m.mentions":{},"msgtype":"m.text"},"ts":1701284421037,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$iplQMfo1OaYsbaLwGGIfzJe0Cy7T-OVOlXo8fXMCusQ"},
{"content":{"body":" * deferred imports make me very nervous; a keyword on `export` that's a lazily evaluated thing on the first import seems pretty nice - it might turn treeshaking from a half-assed hack into a reliable mechanism","format":"org.matrix.custom.html","formatted_body":" * deferred imports make me very nervous; a keyword on <code>export</code> that's a lazily evaluated thing on the first import seems pretty nice - it might turn treeshaking from a half-assed hack into a reliable mechanism","m.mentions":{},"m.new_content":{"body":"deferred imports make me very nervous; a keyword on `export` that's a lazily evaluated thing on the first import seems pretty nice - it might turn treeshaking from a half-assed hack into a reliable mechanism","format":"org.matrix.custom.html","formatted_body":"deferred imports make me very nervous; a keyword on <code>export</code> that's a lazily evaluated thing on the first import seems pretty nice - it might turn treeshaking from a half-assed hack into a reliable mechanism","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$iplQMfo1OaYsbaLwGGIfzJe0Cy7T-OVOlXo8fXMCusQ","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1701284511697,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$SGzwMgaGR_Xc8lp3Yt0MdVUxLVjQl6Cj35mGt25rMmQ"},
{"content":{"body":"It's like runtime treeshaking.  You only get the bits of the barrel you need.","m.mentions":{},"msgtype":"m.text"},"ts":1701284550637,"senderName":"Rob Palmer","senderId":"@robpalme:matrix.org","id":"$5kq2_v92bcq9zvm2wiW3skmrOtDq-w8AbEJTaHSKPHw"},
{"content":{"body":"... treeshaking seems like a pretty reliable mechanism in the current world in fact?","m.mentions":{},"msgtype":"m.text"},"ts":1701284582276,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$riUqONinZxEJLoyMHKh3HG9i7wVrYLFg7a1Et4bYFHA"},
{"content":{"body":"And it can progressively load more of the barrel just-in-time","m.mentions":{},"msgtype":"m.text"},"ts":1701284584286,"senderName":"Rob Palmer","senderId":"@robpalme:matrix.org","id":"$2jVbHTPeAA4e2YhilZrGN-6WhYD7_DmM_kZqq4L74T8"},
{"content":{"body":"> <@bakkot:matrix.org> ... treeshaking seems like a pretty reliable mechanism in the current world in fact?\n\nnot in every codebase i've worked in; changing to deep imports and prohibiting barrel files has consistently produced MASSIVE savings","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$riUqONinZxEJLoyMHKh3HG9i7wVrYLFg7a1Et4bYFHA?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@bakkot:matrix.org\">@bakkot:matrix.org</a><br>... treeshaking seems like a pretty reliable mechanism in the current world in fact?</blockquote></mx-reply>not in every codebase i've worked in; changing to deep imports and prohibiting barrel files has consistently produced MASSIVE savings","m.mentions":{"user_ids":["@bakkot:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$riUqONinZxEJLoyMHKh3HG9i7wVrYLFg7a1Et4bYFHA"}},"msgtype":"m.text"},"ts":1701284627304,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$td0jiNQCWw5d0wP7eEY4lW8eZy092faCiomyhy4uUp0"},
{"content":{"body":"coinbase's react native app size dropped by 71% with that change.","m.mentions":{},"msgtype":"m.text"},"ts":1701284635956,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$YSpGx4cmbQPIkiV2KZQ5c38CAU4xFxv-w1xAR2T_MCw"},
{"content":{"body":"it should really make defer become default back when tc39 design ES module in ES6","m.mentions":{},"msgtype":"m.text"},"ts":1701284656672,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$MMyPjcKQzBsC6aZaaMEtJNIBNaLb5YnfrdDZt9Ziw6s"},
{"content":{"body":" * coinbase's react native app size dropped by 71% (seventy-one, not a typo) with that change","m.mentions":{},"m.new_content":{"body":"coinbase's react native app size dropped by 71% (seventy-one, not a typo) with that change","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$YSpGx4cmbQPIkiV2KZQ5c38CAU4xFxv-w1xAR2T_MCw","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1701284690956,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$bspUiVeW2FPwyEjuAPnytpP1KU-DwTxz4FYFc6evbH4"},
{"content":{"body":"Tree-shaking only works when the compiler can see the full-scope of the program. That's not always possible in dynamically linked systems.","m.mentions":{},"msgtype":"m.text"},"ts":1701284696220,"senderName":"Rob Palmer","senderId":"@robpalme:matrix.org","id":"$z-P5V69AfUEwsvX7mU9e5hw2dV0plH4H91-wgy74jVU"},
{"content":{"body":"The perf issues of barrel files are well-documented\nhttps://marvinh.dev/blog/speeding-up-javascript-ecosystem-part-7/","m.mentions":{},"msgtype":"m.text"},"ts":1701284731342,"senderName":"Rob Palmer","senderId":"@robpalme:matrix.org","id":"$oxEdX3GqiKHPVZ7A6IUovrNSdyWt8TO9sD-FpK-5HkM"},
{"content":{"body":"even then, my statement holds. coinbase's RN app had no dynamic linking.","m.mentions":{},"msgtype":"m.text"},"ts":1701284738490,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$vpxiLXu1fXI_hB9DB0je_ssiyePhpmpCxbU_KWNhiqQ"},
{"content":{"body":"and requires `\"sideEffects: false\"` in your package.json which is not everyone remembers to add","format":"org.matrix.custom.html","formatted_body":"and requires <code>\"sideEffects: false\"</code> in your package.json which is not everyone remembers to add","m.mentions":{},"msgtype":"m.text"},"ts":1701284752930,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$ide_kB1P4orwW3_PbfFsjtOMzboqTBbwq8mnYiXVdDA"},
{"content":{"body":"and which isn't granular enough to support packages with one side-effecting code path and many non-side-effecting code paths","m.mentions":{},"msgtype":"m.text"},"ts":1701284793564,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$6KMMboxzX5awkf_QmGKZWPTrKpE7UsptBpiX13WdqI8"},
{"content":{"body":" * and which isn't granular enough to support packages with one side-effecting code path and many non-side-effecting code paths, eg","m.mentions":{},"m.new_content":{"body":"and which isn't granular enough to support packages with one side-effecting code path and many non-side-effecting code paths, eg","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$6KMMboxzX5awkf_QmGKZWPTrKpE7UsptBpiX13WdqI8","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1701284810247,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$06a3k7ZH3tYQNj4ruaoDc4c2Caa3qMSmiUM8A-hgyQ0"},
{"content":{"body":"i can confirm, importing fewer things is faster","m.mentions":{},"msgtype":"m.text"},"ts":1701284875023,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$rl692NsjEos-xk9zclE7C1bxd12jHdFsW52qu7y9PQY"},
{"content":{"body":"> <@ljharb:matrix.org> and which isn't granular enough to support packages with one side-effecting code path and many non-side-effecting code paths, eg\n\nactually it supports, you can write `\"sideEffects\": [\"./src/init/**\"]`","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$6KMMboxzX5awkf_QmGKZWPTrKpE7UsptBpiX13WdqI8?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>and which isn&#39;t granular enough to support packages with one side-effecting code path and many non-side-effecting code paths, eg</blockquote></mx-reply>actually it supports, you can write <code>\"sideEffects\": [\"./src/init/**\"]</code>","m.mentions":{"user_ids":["@ljharb:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$6KMMboxzX5awkf_QmGKZWPTrKpE7UsptBpiX13WdqI8"}},"msgtype":"m.text"},"ts":1701284973665,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$iL1HaZD4XiVd2LnWOABPqvtaG3OxruEgc_DNNlhv91Q"},
{"content":{"body":"ooh, TIL, thanks","m.mentions":{},"msgtype":"m.text"},"ts":1701285035554,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$Wxf8BawX8tVUi39sywjotUppnsBomkRipIENhGOR4jA"},
{"content":{"body":"> <@ljharb:matrix.org> coinbase's react native app size dropped by 71% (seventy-one, not a typo) with that change\n\nthat is wild to me. they just... had a bunch of side effects? for some reason?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$YSpGx4cmbQPIkiV2KZQ5c38CAU4xFxv-w1xAR2T_MCw?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>coinbase&#39;s react native app size dropped by 71% (seventy-one, not a typo) with that change</blockquote></mx-reply>that is wild to me. they just... had a bunch of side effects? for some reason?","m.mentions":{"user_ids":["@ljharb:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$YSpGx4cmbQPIkiV2KZQ5c38CAU4xFxv-w1xAR2T_MCw"}},"msgtype":"m.text"},"ts":1701285140595,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$-2LrdY1L7y711_lH271UzthFK2IEKiybtxfPhdds_GU"},
{"content":{"body":"no, it's that treeshaking simply isn't capable of safely judging that, and so the necessary heuristics leave behind way more code than is actually used","m.mentions":{},"msgtype":"m.text"},"ts":1701285181698,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$f9bWYlznSF6DM5_QsB3q44mn7pvjHaqKtYj5VAepHug"},
{"content":{"body":"in the past, rollup's heuristics (when rollup was the only treeshaker) were too aggressive, and it broke airbnb.com in IE for months","m.mentions":{},"msgtype":"m.text"},"ts":1701285214393,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$BjM-Wi6qTV2vxVY1MI83P5Rcoi9SQM5SfoX7V1gxQlU"},
{"content":{"body":" * in the past, rollup's heuristics (when rollup was the only treeshaker) were too aggressive, and it broke airbnb.com in IE for months, so it's a really hard line to walk","m.mentions":{},"m.new_content":{"body":"in the past, rollup's heuristics (when rollup was the only treeshaker) were too aggressive, and it broke airbnb.com in IE for months, so it's a really hard line to walk","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$BjM-Wi6qTV2vxVY1MI83P5Rcoi9SQM5SfoX7V1gxQlU","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1701285222964,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$K1fMxV9ym_X3FS-ivd9uXeyhEwNx_l37jMb0nZysJLU"},
{"content":{"body":"that has not been my experience at all; do you have an example where the heuristics fail?","m.mentions":{},"msgtype":"m.text"},"ts":1701285225588,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$xpmOBv2CBxeFs8vc20m6C1osvLjYVX_EX1IDYb2109k"},
{"content":{"body":"tbf i haven't dived into treeshaking tools to know exactly what it is; that's just the sense i have seeing the empirical results","m.mentions":{},"msgtype":"m.text"},"ts":1701285248381,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$zYJehKVSZYY8IbDHnKlnL0CSvz2M2YOGZV85DsL3kqY"},
{"content":{"body":"Statically judging whether JS code has side-effects is hard - probably impossible - so compilers take a safety-first approach and bail out unless they are really sure dead code is safe to remote.  This is why treeshaking is not always effective.","m.mentions":{},"msgtype":"m.text"},"ts":1701285310783,"senderName":"Rob Palmer","senderId":"@robpalme:matrix.org","id":"$1QsvvtdAEmzW-AuRWqpRB0Wx-9DUhe7vkI5HATACS3Y"},
{"content":{"body":"the lesson here should be just don't use side effects","m.mentions":{},"msgtype":"m.text"},"ts":1701285320468,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$hW0_0TR1A-HdgJYR9wXnbADLg0S9IM_Iss88v2GCMWs"},
{"content":{"body":"i wonder if this js code halts","m.mentions":{},"msgtype":"m.text"},"ts":1701285332070,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$kjnr1eYtwhIC7PNlSgqrOSGuXctC_URudqhQVDqUikU"},
{"content":{"body":" * Statically judging whether JS code has side-effects is hard - probably impossible - so compilers take a safety-first approach and bail out unless they are really sure dead code is safe to remove.  This is why treeshaking is not always effective.","m.mentions":{},"m.new_content":{"body":"Statically judging whether JS code has side-effects is hard - probably impossible - so compilers take a safety-first approach and bail out unless they are really sure dead code is safe to remove.  This is why treeshaking is not always effective.","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$1QsvvtdAEmzW-AuRWqpRB0Wx-9DUhe7vkI5HATACS3Y","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1701285333543,"senderName":"Rob Palmer","senderId":"@robpalme:matrix.org","id":"$JQ6oj1Fdwr1zlikhfzOHmAi4aVnF5xQZokj6RrePR-o"},
{"content":{"body":"the lesson most of us have taken is, don't use barrel files :-)","m.mentions":{},"msgtype":"m.text"},"ts":1701285343625,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$snNaCTRh98teLNt_ls2Dydt2EwBJbcjxbRHDR0JHAz4"},
{"content":{"body":"i wish prepack was still a thing","m.mentions":{},"msgtype":"m.text"},"ts":1701285380719,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$nUG5Coo9RmptC6wxFILXX-nDzTs5QOyf59y5wASdG2w"},
{"content":{"body":"> <@ljharb:matrix.org> the lesson most of us have taken is, don't use barrel files :-)\n\nand with this proposal, barrel files suddenly becomes a performance benefit","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$snNaCTRh98teLNt_ls2Dydt2EwBJbcjxbRHDR0JHAz4?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>the lesson most of us have taken is, don&#39;t use barrel files :-)</blockquote></mx-reply>and with this proposal, barrel files suddenly becomes a performance benefit","m.mentions":{"user_ids":["@ljharb:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$snNaCTRh98teLNt_ls2Dydt2EwBJbcjxbRHDR0JHAz4"}},"msgtype":"m.text"},"ts":1701285537909,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$jSftkMp1RGbGwMxYJutmDrLzXVMCmNdkoohuk5IHtmA"},
{"content":{"body":"thankfully 0% of my code has side-effects, it's all overhead","m.mentions":{},"m.relates_to":{"event_id":"$hW0_0TR1A-HdgJYR9wXnbADLg0S9IM_Iss88v2GCMWs","is_falling_back":true,"m.in_reply_to":{"event_id":"$hW0_0TR1A-HdgJYR9wXnbADLg0S9IM_Iss88v2GCMWs"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1701285543026,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$4v82I4wswQ1D5zVX8FjNwGdRXQ7pt_bn-wi16lfj36I"},
{"content":{"body":"> <@robpalme:matrix.org> Statically judging whether JS code has side-effects is hard - probably impossible - so compilers take a safety-first approach and bail out unless they are really sure dead code is safe to remove.  This is why treeshaking is not always effective.\n\nRight but only if you're writing code in such a way that it's hard to analyze; my experience has been, dependencies which I consider of adequate quality to add to my projects are, in general, written in such a way that this is trivial to analyze","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$1QsvvtdAEmzW-AuRWqpRB0Wx-9DUhe7vkI5HATACS3Y?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@robpalme:matrix.org\">@robpalme:matrix.org</a><br>Statically judging whether JS code has side-effects is hard - probably impossible - so compilers take a safety-first approach and bail out unless they are really sure dead code is safe to remove.  This is why treeshaking is not always effective.</blockquote></mx-reply>Right but only if you're writing code in such a way that it's hard to analyze; my experience has been, dependencies which I consider of adequate quality to add to my projects are, in general, written in such a way that this is trivial to analyze","m.mentions":{"user_ids":["@robpalme:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$1QsvvtdAEmzW-AuRWqpRB0Wx-9DUhe7vkI5HATACS3Y"}},"msgtype":"m.text"},"ts":1701285560511,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$Go_4OQ1Ai9dyVtwyYjOvoW4t98EXrtXu-9rQMN55mxY"},
{"content":{"body":"I am surprised to learn this is not everyone's experience","m.mentions":{},"msgtype":"m.text"},"ts":1701285567799,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$dCbCJadv2nDWVZ3rCrSGr-VdT_NyYEthEPzRTw5_i4c"},
{"content":{"body":"tbh i'm surprised it's anyone's. the above article got quite a lot of +1s on twitter and virtually no pushback","m.mentions":{},"msgtype":"m.text"},"ts":1701285618248,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$6CcwY6A4_rgC98WhUs60UyLdqmbyYRzOhj0HOFB7xAM"},
{"content":{"body":" * tbh i'm surprised it's anyone's. the above article got quite a lot of +1s on twitter and virtually no pushback that i saw","m.mentions":{},"m.new_content":{"body":"tbh i'm surprised it's anyone's. the above article got quite a lot of +1s on twitter and virtually no pushback that i saw","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$6CcwY6A4_rgC98WhUs60UyLdqmbyYRzOhj0HOFB7xAM","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1701285623397,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$uQac5M2JjVNHZq8cTYwxGYodcjoSlYQWu9sSnlL-g_w"},
{"content":{"body":"after reading the article on what these are, I feel like this should have been obvious from the beginning","m.mentions":{},"m.relates_to":{"event_id":"$snNaCTRh98teLNt_ls2Dydt2EwBJbcjxbRHDR0JHAz4","is_falling_back":true,"m.in_reply_to":{"event_id":"$snNaCTRh98teLNt_ls2Dydt2EwBJbcjxbRHDR0JHAz4"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1701285624355,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$bhfSs-3oSBeDiKiPaw7wpBvRmxBS_pHxDrcelb_dJTM"},
{"content":{"body":"people be crazy","m.mentions":{},"m.relates_to":{"event_id":"$snNaCTRh98teLNt_ls2Dydt2EwBJbcjxbRHDR0JHAz4","is_falling_back":true,"m.in_reply_to":{"event_id":"$bhfSs-3oSBeDiKiPaw7wpBvRmxBS_pHxDrcelb_dJTM"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1701285627549,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$ZBvsJYv8F-0pP9521WM1CzyFIPqRdPGAoPyabtzAFjc"},
{"content":{"body":"the article above was only talking runtime, not treeshaking","m.mentions":{},"msgtype":"m.text"},"ts":1701285664575,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$c9OCIf5VEhhZx0i6cDDoWgIFTvmtDdkWg7YRsihRLaA"},
{"content":{"body":"in fact it specifically says \"treeshaking solves this\"","m.mentions":{},"msgtype":"m.text"},"ts":1701285671837,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$gJgOLcJkcMeeBdxojgqRIClY4xaKsHux6omAa88JtQU"},
{"content":{"body":"> you then run the bundled file to repeat the experiment and voilÃ¡, it finishes in a blink of an eye. Out of curiosity, you measure the time it takes to run esbuild and run the bundled file together and notice that both of them combined are still quicker than running the original source code. Huh? What is going on?","format":"org.matrix.custom.html","formatted_body":"<blockquote>\n<p>you then run the bundled file to repeat the experiment and voilÃ¡, it finishes in a blink of an eye. Out of curiosity, you measure the time it takes to run esbuild and run the bundled file together and notice that both of them combined are still quicker than running the original source code. Huh? What is going on?</p>\n</blockquote>\n","m.mentions":{},"msgtype":"m.text"},"ts":1701285684299,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$Hv3iNoXxcn9eIwofWyDCyR0phvo51eTpuHkMnfgjc-I"},
{"content":{"body":"\"waah, I want one import line instead of five, I'm going to *blindly merge others' namespaces*, that seems like an okay trade-off\"","format":"org.matrix.custom.html","formatted_body":"\"waah, I want one import line instead of five, I'm going to <em>blindly merge others' namespaces</em>, that seems like an okay trade-off\"","m.mentions":{},"m.relates_to":{"event_id":"$snNaCTRh98teLNt_ls2Dydt2EwBJbcjxbRHDR0JHAz4","is_falling_back":true,"m.in_reply_to":{"event_id":"$ZBvsJYv8F-0pP9521WM1CzyFIPqRdPGAoPyabtzAFjc"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1701285716213,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$6Oil8GIdcAD6r1ITFjTisCl-mWrrsnftPDhFn3QZc0Y"},
{"content":{"body":"ðŸ¤®","m.mentions":{},"m.relates_to":{"event_id":"$snNaCTRh98teLNt_ls2Dydt2EwBJbcjxbRHDR0JHAz4","is_falling_back":true,"m.in_reply_to":{"event_id":"$6Oil8GIdcAD6r1ITFjTisCl-mWrrsnftPDhFn3QZc0Y"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1701285729885,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$Vhsi_sVNW1HXmXgzAMY99gwFFzTfcT40tqz2q1T5khw"},
{"content":{"body":"ah fair, i was remembering some twitter discussion then i guess, not the article","m.mentions":{},"msgtype":"m.text"},"ts":1701285888622,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$MgjwB7TsAhWLrERKfq3kjQTY2TCrjXFFB15jF-vacM4"},
{"content":{"body":"multiple exports was a mistake","m.mentions":{},"m.relates_to":{"event_id":"$snNaCTRh98teLNt_ls2Dydt2EwBJbcjxbRHDR0JHAz4","is_falling_back":true,"m.in_reply_to":{"event_id":"$Vhsi_sVNW1HXmXgzAMY99gwFFzTfcT40tqz2q1T5khw"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1701286005389,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$L8vtaDQZeSW-ZWMu7x0G3fo0cyBl38l3IQFCLDPA8cI"},
{"content":{"body":"ugh we have a bug in PerformEval: it doesn't ever ToString its argument https://tc39.es/ecma262/#sec-performeval","m.mentions":{},"msgtype":"m.text"},"ts":1701286591476,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$Yhcx3Zo5MoE3JEizD7PHj4Salh-7Kph7Bwh9XIXSL9Q"},
{"content":{"body":"oh wait, never mind, it just can't reach that point without being a String","m.mentions":{},"msgtype":"m.text"},"ts":1701286654078,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$X9_20w160RyZ6lcRNuDJUjfA-AOOWhIpZNiFBIM3JmI"},
{"content":{"body":"I got it","m.mentions":{},"msgtype":"m.text"},"ts":1701286654962,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$rp0Zj-cTf-890ZmoOKI5YycnwI2DYLCzWrFgMDem6Xs"},
{"content":{"body":"the thing where `eval` is the identity function on non-string arguments is... very strange","format":"org.matrix.custom.html","formatted_body":"the thing where <code>eval</code> is the identity function on non-string arguments is... very strange","m.mentions":{},"msgtype":"m.text"},"ts":1701286880802,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$e1REw6i1wH3W_YHo-8vMUYccseyIRxdLmeBGExrndiQ"},
{"content":{"body":"I prefer option 2 because it will extend to TT better","msgtype":"m.text"},"ts":1701287126006,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$lhKK7CbUUVp35ZubZrylqF8f6ZD1_uq-XrJleY0ejmg"},
{"content":{"body":"```\nfunction unsafeMaybeNotAString(v) {\n  return Object.is(v, eval(v));\n}\n```","format":"org.matrix.custom.html","formatted_body":"<pre><code>function unsafeMaybeNotAString(v) {\n  return Object.is(v, eval(v));\n}\n</code></pre>\n","m.mentions":{},"m.relates_to":{"event_id":"$e1REw6i1wH3W_YHo-8vMUYccseyIRxdLmeBGExrndiQ","is_falling_back":true,"m.in_reply_to":{"event_id":"$e1REw6i1wH3W_YHo-8vMUYccseyIRxdLmeBGExrndiQ"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1701287314734,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$BYzIr6cNZwDzxdoYTmgW9kong980yWb78cme2rVYyC8"},
{"content":{"body":"ljharb: we need to figure out what we're going to do with iterator helpers ASAP","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@ljharb:matrix.org\">ljharb</a>: we need to figure out what we're going to do with iterator helpers ASAP","m.mentions":{"user_ids":["@ljharb:matrix.org"]},"msgtype":"m.text"},"ts":1701287318918,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$cuyoR73OrJ1nhnqnd0qhuP31vkXpwNLNEvj-WaxZByk"},
{"content":{"body":"the accessors approach seems safest to me, even if it makes us feel a little bit gross","m.mentions":{},"msgtype":"m.text"},"ts":1701287343456,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$Y_BgHYX1hrozK0FesScqhFK9i8QQb5pe1eznOAR3Svs"},
{"content":{"body":"i'd love to hear v8's position on the two options, but i still don't feel that accessors are safer","m.mentions":{},"msgtype":"m.text"},"ts":1701287357746,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$uLtkMwPsA3Pw0h_DrOPq9z8PrvZ8k9QbWrVGMf976S8"},
{"content":{"body":"I won't die on that hill though; either solution works for now","m.mentions":{},"msgtype":"m.text"},"ts":1701287359993,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$sa30qRpmqqutzK6gtlLQH_T1UF93SVcqo3JTtcdqWMY"},
{"content":{"body":"if we go with \"omit\" i will be happy to immediately make a new proposal to reintroduce them, and will coordinate with the person from the issue to track upgrading those sites, fwiw","m.mentions":{},"msgtype":"m.text"},"ts":1701287407365,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$ttoVFRjumbMydVh8RvRos1XNVLbBBUxHuzDA6xYK0zE"},
{"content":{"body":"that doesn't mean you'll have engine support to experiment with shipping them though","m.mentions":{},"msgtype":"m.text"},"ts":1701287430227,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$VUKzmzSjET1EEL5h-kHfyCCyzcauKkZE_dcYOCHiSig"},
{"content":{"body":"right, which is why i want to hear v8's position first","m.mentions":{},"msgtype":"m.text"},"ts":1701287440586,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$KRf5xy7tTRWa-y3PpAismVU--Fi1LI9bpFoDxAN8KF4"},
{"content":{"body":"Rezvan is the V8 rep at this meeting","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@rmahdav:matrix.org\">Rezvan</a> is the V8 rep at this meeting","m.mentions":{"user_ids":["@rmahdav:matrix.org"]},"msgtype":"m.text"},"ts":1701287454232,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$h2oujcgZ-89nftKKujCtGh17zxvshLkYutt915vq9ng"},
{"content":{"body":"`unsafeMaybeNotAString(\"v\")`","format":"org.matrix.custom.html","formatted_body":"<code>unsafeMaybeNotAString(\"v\")</code>","m.mentions":{},"m.relates_to":{"event_id":"$e1REw6i1wH3W_YHo-8vMUYccseyIRxdLmeBGExrndiQ","is_falling_back":true,"m.in_reply_to":{"event_id":"$BYzIr6cNZwDzxdoYTmgW9kong980yWb78cme2rVYyC8"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1701287503709,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$xXbh6wKqyBCSEeCBPfQd0RHbeam1lODzYmAPRGghYaw"},
{"content":{"body":"```\nfunction unsafeMaybeNotAString(v) {\n  return Object.is(v, (0, eval(v)));\n}\n```","format":"org.matrix.custom.html","formatted_body":"<pre><code>function unsafeMaybeNotAString(v) {\n  return Object.is(v, (0, eval(v)));\n}\n</code></pre>\n","m.mentions":{},"m.relates_to":{"event_id":"$e1REw6i1wH3W_YHo-8vMUYccseyIRxdLmeBGExrndiQ","is_falling_back":true,"m.in_reply_to":{"event_id":"$xXbh6wKqyBCSEeCBPfQd0RHbeam1lODzYmAPRGghYaw"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1701287583683,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$FNrtgwi9KSDP5VQG4BJaQg2J6GEaZJpSsBKNrRsNEFA"},
{"content":{"body":"Level 2","m.mentions":{},"m.relates_to":{"event_id":"$e1REw6i1wH3W_YHo-8vMUYccseyIRxdLmeBGExrndiQ","is_falling_back":true,"m.in_reply_to":{"event_id":"$FNrtgwi9KSDP5VQG4BJaQg2J6GEaZJpSsBKNrRsNEFA"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1701287615135,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$UT2pqkn8uajkkMPxYMdeRR6KFLylR_Z3JO6StcwSJHE"},
{"content":{"body":"I'm generally partial to \"omit\" as well. While I understand bakkot's concerns around `x.constructor === whatever`, I think there is a fairly low likelihood of that becoming a problem if there is a short turnaround on a follow-on proposal and the outstanding sites being fixed.","format":"org.matrix.custom.html","formatted_body":"I'm generally partial to \"omit\" as well. While I understand bakkot's concerns around <code>x.constructor === whatever</code>, I think there is a fairly low likelihood of that becoming a problem if there is a short turnaround on a follow-on proposal and the outstanding sites being fixed.","m.mentions":{},"msgtype":"m.text"},"ts":1701287643682,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$0enTxfnhnUk2Quuiqz_IFjbZDTdW9I-McHczClcAwwg"},
{"content":{"body":"can strings be quines","m.mentions":{},"m.relates_to":{"event_id":"$e1REw6i1wH3W_YHo-8vMUYccseyIRxdLmeBGExrndiQ","is_falling_back":true,"m.in_reply_to":{"event_id":"$UT2pqkn8uajkkMPxYMdeRR6KFLylR_Z3JO6StcwSJHE"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1701287644045,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$_QoIqI76ZQIL_jD9kILXJLiyuBjNdU-nI80R7ji3W6M"},
{"content":{"body":"```\nunsafeMaybeNotAString(`(function _(){return'('+_+')()'})()`)\n```","format":"org.matrix.custom.html","formatted_body":"<pre><code>unsafeMaybeNotAString(`(function _(){return'('+_+')()'})()`)\n</code></pre>\n","m.mentions":{},"m.relates_to":{"event_id":"$e1REw6i1wH3W_YHo-8vMUYccseyIRxdLmeBGExrndiQ","is_falling_back":true,"m.in_reply_to":{"event_id":"$_QoIqI76ZQIL_jD9kILXJLiyuBjNdU-nI80R7ji3W6M"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1701287765873,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$xl_Jlq4khfFBCLkEfACh70E4rKF0oZOEOwtFkaFPjzc"},
{"content":{"body":"also the `toString` of an Iterator will change","format":"org.matrix.custom.html","formatted_body":"also the <code>toString</code> of an Iterator will change","m.mentions":{},"msgtype":"m.text"},"ts":1701287780733,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$OZIgWWmvCBjz_5BD1tV8cSp7GUXuXdCRkbhqXDCLyW0"},
{"content":{"body":"Though I still think there's potential for a general solution to the \"override mistake\", such as adding a new PropertyDescriptor flag to opt-in to a behavior that allows setting on an instance even if the property is frozen on the prototype.","m.mentions":{},"msgtype":"m.text"},"ts":1701287784686,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$-Bt1avwi5RkaRA_RtGx_5fpit8ShJuzaCAS9wuIgvbk"},
{"content":{"body":"> <@michaelficarra:matrix.org> also the `toString` of an Iterator will change\n\nFrom what it is in the spec, or do you mean from what it is on `%IteratorPrototype%` currently?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$OZIgWWmvCBjz_5BD1tV8cSp7GUXuXdCRkbhqXDCLyW0?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@michaelficarra:matrix.org\">@michaelficarra:matrix.org</a><br>also the <code>toString</code> of an Iterator will change</blockquote></mx-reply>From what it is in the spec, or do you mean from what it is on <code>%IteratorPrototype%</code> currently?","m.mentions":{"user_ids":["@michaelficarra:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$OZIgWWmvCBjz_5BD1tV8cSp7GUXuXdCRkbhqXDCLyW0"}},"msgtype":"m.text"},"ts":1701287812670,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$KfVCnRTD8AWW04Sghz8sj_BU0sWoeq--j-MJPk2OGe0"},
{"content":{"body":"> <@michaelficarra:matrix.org> also the `toString` of an Iterator will change\n\n * From what it is in the proposal spec, or do you mean from what it is on `%IteratorPrototype%` currently?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$OZIgWWmvCBjz_5BD1tV8cSp7GUXuXdCRkbhqXDCLyW0?via=matrix.org&amp;via=mozilla.org&amp;via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@michaelficarra:matrix.org\">@michaelficarra:matrix.org</a><br>also the <code>toString</code> of an Iterator will change</blockquote></mx-reply> * From what it is in the proposal spec, or do you mean from what it is on <code>%IteratorPrototype%</code> currently?","m.mentions":{},"m.new_content":{"body":"From what it is in the proposal spec, or do you mean from what it is on `%IteratorPrototype%` currently?","format":"org.matrix.custom.html","formatted_body":"From what it is in the proposal spec, or do you mean from what it is on <code>%IteratorPrototype%</code> currently?","m.mentions":{"user_ids":["@michaelficarra:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$KfVCnRTD8AWW04Sghz8sj_BU0sWoeq--j-MJPk2OGe0","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1701287825909,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$pAP2owN-BtR5zBv8oTZzrT-S5ythldqZP4mi4_5EnlM"},
{"content":{"body":"from what's in the draft spec as of now","m.mentions":{},"msgtype":"m.text"},"ts":1701287836290,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$WUfjGfI2JdWiT80gsjdacFmG5nb-n-ef-39u1SBQv7A"},
{"content":{"body":"it is proposed as \"[object Iterator]\" and will be \"[object Object]\" temporarily","m.mentions":{},"msgtype":"m.text"},"ts":1701287869605,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$SOy9zBStF8WQH-Z8eWjOhDMuK0pWC13sEWs44J2W-68"},
{"content":{"body":"like... why do that?","m.mentions":{},"msgtype":"m.text"},"ts":1701287881287,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$v3Hpkxp-77GRsJaVHBa3LYBg8bw3E7ABcBJ51agHJ-c"},
{"content":{"body":"this is just unnecessary risk and I really don't see the upside other than warm fuzzies","m.mentions":{},"msgtype":"m.text"},"ts":1701287902462,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$7ISpx-Oc61v-ofsdT_X2iU-e_rSTAWQ_NqvuFbta8F4"},
{"content":{"body":"I don't have a preference regarding toString/toStringTag, tbh. I generally wouldn't recommend relying it for anything other than a debugging aid, so its presence or absence isn't that concerning to me.","m.mentions":{},"msgtype":"m.text"},"ts":1701288106234,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$4DeIDoMw1EflBrp16HoApbwUwFDi-XFBfwz4k7R9l_0"},
{"content":{"body":" * I don't have a preference regarding toString/toStringTag, tbh. I generally wouldn't recommend relying on it for anything other than a debugging aid, so its presence or absence isn't that concerning to me.","m.mentions":{},"m.new_content":{"body":"I don't have a preference regarding toString/toStringTag, tbh. I generally wouldn't recommend relying on it for anything other than a debugging aid, so its presence or absence isn't that concerning to me.","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$4DeIDoMw1EflBrp16HoApbwUwFDi-XFBfwz4k7R9l_0","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1701288120390,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$xUl81LEwejgMjcziZWs2qv3ZgJOcULooseFsulevayQ"},
{"content":{"body":"> <@ljharb:matrix.org> right, which is why i want to hear v8's position first\n\nV8 is supporting the PR (https://github.com/tc39/proposal-iterator-helpers/pull/287) Michael talked about yesterday. This incompatibility blocked us for shipping iterator helpers. The solution provided in the PR seems to be the best way to resolve the issue.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$KRf5xy7tTRWa-y3PpAismVU--Fi1LI9bpFoDxAN8KF4?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>right, which is why i want to hear v8&#39;s position first</blockquote></mx-reply>V8 is supporting the PR (https://github.com/tc39/proposal-iterator-helpers/pull/287) Michael talked about yesterday. This incompatibility blocked us for shipping iterator helpers. The solution provided in the PR seems to be the best way to resolve the issue.","m.mentions":{"user_ids":["@ljharb:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$KRf5xy7tTRWa-y3PpAismVU--Fi1LI9bpFoDxAN8KF4"}},"msgtype":"m.text"},"ts":1701289945762,"senderName":"Rezvan","senderId":"@rmahdav:matrix.org","id":"$TmQm62RMZCEwlHeRIwvxz4ezCObVDsgJvHzILDqX780"},
{"content":{"body":"> <@rmahdav:matrix.org> V8 is supporting the PR (https://github.com/tc39/proposal-iterator-helpers/pull/287) Michael talked about yesterday. This incompatibility blocked us for shipping iterator helpers. The solution provided in the PR seems to be the best way to resolve the issue.\n\nthanks; and does v8 have an opinion about, instead of the PR, just not implementing the constructor and Symbol.toStringTag properties for the time being?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$TmQm62RMZCEwlHeRIwvxz4ezCObVDsgJvHzILDqX780?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@rmahdav:matrix.org\">@rmahdav:matrix.org</a><br>V8 is supporting the PR (https://github.com/tc39/proposal-iterator-helpers/pull/287) Michael talked about yesterday. This incompatibility blocked us for shipping iterator helpers. The solution provided in the PR seems to be the best way to resolve the issue.</blockquote></mx-reply>thanks; and does v8 have an opinion about, instead of the PR, just not implementing the constructor and Symbol.toStringTag properties for the time being?","m.mentions":{"user_ids":["@rmahdav:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$TmQm62RMZCEwlHeRIwvxz4ezCObVDsgJvHzILDqX780"}},"msgtype":"m.text"},"ts":1701289973779,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$Suos7bCAQiP9j-hFK40kzfgdFZmBk5Y8fp_V6oF5QH4"},
{"content":{"body":"and additionally, with either approach, is Chrome willing to try to ship them as normal data properties in the future once the incompatible websites have finished upgrading?","m.mentions":{},"msgtype":"m.text"},"ts":1701290011713,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$ErbLoB0z3Ropi195_8IkFrzd-dK3oDGDv245n49ieL0"},
{"content":{"body":"> <@ljharb:matrix.org> thanks; and does v8 have an opinion about, instead of the PR, just not implementing the constructor and Symbol.toStringTag properties for the time being?\n\nI am not sure about this. I do not remember anything related to this in our discussions with Shu. ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$Suos7bCAQiP9j-hFK40kzfgdFZmBk5Y8fp_V6oF5QH4?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>thanks; and does v8 have an opinion about, instead of the PR, just not implementing the constructor and Symbol.toStringTag properties for the time being?</blockquote></mx-reply>I am not sure about this. I do not remember anything related to this in our discussions with Shu.","m.mentions":{"user_ids":["@ljharb:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$Suos7bCAQiP9j-hFK40kzfgdFZmBk5Y8fp_V6oF5QH4"}},"msgtype":"m.text"},"ts":1701291098430,"senderName":"Rezvan","senderId":"@rmahdav:matrix.org","id":"$NKzcxrVmPUNKnif0dyVbfqXzEOBuCK458DBExghvIm8"},
{"content":{"body":"> <@ljharb:matrix.org> and additionally, with either approach, is Chrome willing to try to ship them as normal data properties in the future once the incompatible websites have finished upgrading?\n\nAbout this one, I think the answer is yes. Michael Ficarra Since you had discussions with Shu, what do you think about it?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$ErbLoB0z3Ropi195_8IkFrzd-dK3oDGDv245n49ieL0?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br>and additionally, with either approach, is Chrome willing to try to ship them as normal data properties in the future once the incompatible websites have finished upgrading?</blockquote></mx-reply>About this one, I think the answer is yes. <a href=\"https://matrix.to/#/@michaelficarra:matrix.org\">Michael Ficarra</a> Since you had discussions with Shu, what do you think about it?","m.mentions":{"user_ids":["@ljharb:matrix.org","@michaelficarra:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$ErbLoB0z3Ropi195_8IkFrzd-dK3oDGDv245n49ieL0"}},"msgtype":"m.text"},"ts":1701291142117,"senderName":"Rezvan","senderId":"@rmahdav:matrix.org","id":"$mdX4d8-yutQOdDyXkT9FdluQJV6wcp_zz4sgPhhQ8YQ"},
{"content":{"body":"slide link of next topic: https://johnhax.net/2023/slice/slide","m.mentions":{},"msgtype":"m.text"},"ts":1701291575923,"senderName":"hax (HE Shi-Jun)","senderId":"@haxjs:matrix.org","id":"$OkFGnDwupAUi6UDN8BJ4Uk4DR2JanbfwQ5mB1wZSlzc"},
{"content":{"body":"Rezvan ljharb we didn't talk about that","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@rmahdav:matrix.org\">Rezvan</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">ljharb</a> we didn't talk about that","m.mentions":{"user_ids":["@rmahdav:matrix.org","@ljharb:matrix.org"]},"msgtype":"m.text"},"ts":1701291625600,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$f77kvmOHANConRSfm_fYhzwlUs8x4bILHr8z2i_nJbo"},
{"content":{"body":"So, my answer was my opinion. Not sure if Shu thinks the same.","m.mentions":{},"msgtype":"m.text"},"ts":1701291773552,"senderName":"Rezvan","senderId":"@rmahdav:matrix.org","id":"$GXzwoDrHlsC5YX-NxSL42vHa1m3x-1ZhN7-wECYqBuA"},
{"content":{"body":"I've never met anyone who knows the parameter meaning and order for both slice and splice off the top of their head","m.mentions":{},"msgtype":"m.text"},"ts":1701292384580,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$JiWGKMoXkKvCQk-aguh3CpkV7UJM-ptjZiEBZ5ipelY"},
{"content":{"body":"other than `slice(n)`, I look them up every time","format":"org.matrix.custom.html","formatted_body":"other than <code>slice(n)</code>, I look them up every time","m.mentions":{},"msgtype":"m.text"},"ts":1701292411096,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$G1_yPDKtpjKHydiEkyHBSXuBmC9-oJi0wG_4K9whIOE"},
{"content":{"body":"mdn. every time","m.mentions":{},"msgtype":"m.text"},"ts":1701292419877,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$obFQdy3yc9vSAKCtLI02okIH0MgofLubP-CcxW4sTGA"},
{"content":{"body":"> <@softwarechris:matrix.org> mdn. every time\n\nQuick-info in VS Code :)","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$obFQdy3yc9vSAKCtLI02okIH0MgofLubP-CcxW4sTGA?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@softwarechris:matrix.org\">@softwarechris:matrix.org</a><br>mdn. every time</blockquote></mx-reply>Quick-info in VS Code :)","m.mentions":{"user_ids":["@softwarechris:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$obFQdy3yc9vSAKCtLI02okIH0MgofLubP-CcxW4sTGA"}},"msgtype":"m.text"},"ts":1701292444343,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$z1DSRAtpCvqV5eu9R6zz2XYY4ufPAW-ZAEITu5xhWOI"},
{"content":{"body":"my vscode-fu need polishing for sure","m.mentions":{},"msgtype":"m.text"},"ts":1701292475351,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$9bSPszHqzACtPpp5IQ5KAp7Seu4V6uHxMQS1nCt7WdE"},
{"content":{"body":"i know slice but only because i've trained myself to see the \"p\" so hard, at which point i immediately have to look it up every time","m.mentions":{},"msgtype":"m.text"},"ts":1701292494186,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$-uWsl0yBZasvuflMvtT361_l9rEemmtc95Fbnrtprjw"},
{"content":{"body":"> <@softwarechris:matrix.org> my vscode-fu need polishing for sure\n\nUsually just `array.slice(` is enough assuming the language service knows `array` is an array type","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$9bSPszHqzACtPpp5IQ5KAp7Seu4V6uHxMQS1nCt7WdE?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@softwarechris:matrix.org\">@softwarechris:matrix.org</a><br>my vscode-fu need polishing for sure</blockquote></mx-reply>Usually just <code>array.slice(</code> is enough assuming the language service knows <code>array</code> is an array type","m.mentions":{"user_ids":["@softwarechris:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$9bSPszHqzACtPpp5IQ5KAp7Seu4V6uHxMQS1nCt7WdE"}},"msgtype":"m.text"},"ts":1701292516844,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$ke3zTylWnJSH63f-QNhz_qUmNUrpAFZjLBIm-nr1nVg"},
{"content":{"body":"I can never remember which of the string methods support negative indices.","m.mentions":{},"msgtype":"m.text"},"ts":1701292522865,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$1yznQlKXFB4wm5Y-d3fxQWt5mddu4ZhcNrUDZtUV5xg"},
{"content":{"body":"> <@rbuckton:matrix.org> Usually just `array.slice(` is enough assuming the language service knows `array` is an array type\n\noh true.. I guess I start thinking about it before I start writing the code.. like I don't get to slice( and then start wondering","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$ke3zTylWnJSH63f-QNhz_qUmNUrpAFZjLBIm-nr1nVg?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@rbuckton:matrix.org\">@rbuckton:matrix.org</a><br>Usually just <code>array.slice(</code> is enough assuming the language service knows <code>array</code> is an array type</blockquote></mx-reply>oh true.. I guess I start thinking about it before I start writing the code.. like I don't get to slice( and then start wondering","m.mentions":{"user_ids":["@rbuckton:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$ke3zTylWnJSH63f-QNhz_qUmNUrpAFZjLBIm-nr1nVg"}},"msgtype":"m.text"},"ts":1701292588965,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$UmYuzgEIItwp_p35fcw11xqV8f0EdR7S1glzYrEh_QA"},
{"content":{"body":"this vscode example doesn't look like a bug to me","m.mentions":{},"msgtype":"m.text"},"ts":1701292595917,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$uzOSlJjCwMyb4KrG4iQzTDef-wXvxj0QRvmWF9UjtPI"},
{"content":{"body":"Yeah, not a bug. ","m.mentions":{},"msgtype":"m.text"},"ts":1701292603425,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$Hf-DYwHKlv3JnTtNT2hjqHeyBmMj_Mc7ieElu2HzpQM"},
{"content":{"body":"The line assumes `subcommand` exists as an element, because that's the only way you can get to that line to begin with.","format":"org.matrix.custom.html","formatted_body":"The line assumes <code>subcommand</code> exists as an element, because that's the only way you can get to that line to begin with.","m.mentions":{},"msgtype":"m.text"},"ts":1701292646254,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$H_2NCnq8de-w1J4g-N6SrbvPkBkm_pF8Q44EH4cCk0c"},
{"content":{"body":"that's what I figured","m.mentions":{},"msgtype":"m.text"},"ts":1701292712201,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$cYZfD6EKW3CwMvAETQ4Ck7ZuGgz-RVQQCz6yllkvzVI"},
{"content":{"body":":-( my queue reply was skipped","m.mentions":{},"msgtype":"m.text"},"ts":1701293396347,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$aVE9u7mGloBYqYLVnMxMsYKIV_Jlqw7Us2IJ1j148qY"},
{"content":{"body":"apologies Michael Ficarra didn't see your reply in time","format":"org.matrix.custom.html","formatted_body":"apologies <a href=\"https://matrix.to/#/@michaelficarra:matrix.org\">Michael Ficarra</a> didn't see your reply in time","m.mentions":{"user_ids":["@michaelficarra:matrix.org"]},"msgtype":"m.text"},"ts":1701293398894,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$01XrH9kun0TAoZt80DfNDJdRQwoZtZHgq__zQWyLblo"},
{"content":{"body":"this is why we need https://github.com/bterlson/tcq/issues/65","m.mentions":{},"msgtype":"m.text"},"ts":1701293426404,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$b2FXdLHKPxiI1hbcnmxYbfb63HtBVzTXoe-NWjuDtCA"},
{"content":{"body":"by \"reified\" do we mean like, a noun that represents a kind of \"view\" on an array/string?","m.mentions":{},"msgtype":"m.text"},"ts":1701293509015,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$44lSNa86JYxitIMvm98K5QXhAeFvfthjQ4srNy0CifE"},
{"content":{"body":"anyway, I was trying to point Ron to the https://github.com/tc39/proposal-iterator.range proposal where we have discussed having a reified range","m.mentions":{},"msgtype":"m.text"},"ts":1701293509891,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$oQKfe_T1P06GfYUOf4r6fACUk4X-_RDs9f04paG0AJM"},
{"content":{"body":"I personally support it, but most others seemed to reject it","m.mentions":{},"msgtype":"m.text"},"ts":1701293521921,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$Ig1Eghzjcd0x-Zrxn6qc_D5ty8oIx16bbe9MmhH6GEQ"},
{"content":{"body":"ljharb: basically a data structure that holds bounds and can be passed between the `[]` to do the slice","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@ljharb:matrix.org\">ljharb</a>: basically a data structure that holds bounds and can be passed between the <code>[]</code> to do the slice","m.mentions":{"user_ids":["@ljharb:matrix.org"]},"msgtype":"m.text"},"ts":1701293555366,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$qzKhPHRDNk-YD_08nOPlT4CR9621sbJ0vfLk4VM84WY"},
{"content":{"body":"yeah that sounds super unjavascripty to me","m.mentions":{},"msgtype":"m.text"},"ts":1701293594825,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$5EXDID5839Av3bPulSCkBxuUWzViaU3KW3lbAHs0B9E"},
{"content":{"body":"My suggestion for reification is the introduction of \"inverted\" get/set/has/delete via symbols that could be looked up on an Object in lieu of ToPrimitive:\n\n```js\nclass Index { \n   offset;\n   fromEnd;\n   [Symbol.geti](value) { \n     return this.fromEnd ? value[value.length - this.offset] : value[value.length];\n   }\n}\n\nconst x = new Index(1, /*fromEnd*/ true);\nar[x] // -> x[Symbol.geti](ar)\n```\n\nWhich has a general utility for custom indexes, such as turning a `WeakMap` into a scoped pseudo-private name:\n\n```js\nWeakMap.prototype[Symbol.geti] = function (key) { return this.get(key); }\nWeakMap.prototype[Symbol.seti] = function (key, value) { this.set(key, value); }\nconst key = new WeakMap();\nconst obj = {};\nobj[key] = 1; // key[Symbol.geti](obj);\n```","format":"org.matrix.custom.html","formatted_body":"<p>My suggestion for reification is the introduction of \"inverted\" get/set/has/delete via symbols that could be looked up on an Object in lieu of ToPrimitive:</p>\n<pre><code class=\"language-js\">class Index { \n   offset;\n   fromEnd;\n   [Symbol.geti](value) { \n     return this.fromEnd ? value[value.length - this.offset] : value[value.length];\n   }\n}\n\nconst x = new Index(1, /*fromEnd*/ true);\nar[x] // -&gt; x[Symbol.geti](ar)\n</code></pre>\n<p>Which has a general utility for custom indexes, such as turning a <code>WeakMap</code> into a scoped pseudo-private name:</p>\n<pre><code class=\"language-js\">WeakMap.prototype[Symbol.geti] = function (key) { return this.get(key); }\nWeakMap.prototype[Symbol.seti] = function (key, value) { this.set(key, value); }\nconst key = new WeakMap();\nconst obj = {};\nobj[key] = 1; // key[Symbol.geti](obj);\n</code></pre>\n","m.mentions":{},"msgtype":"m.text"},"ts":1701293678571,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$AzgdTvhlzF8h6HH_bFZivgl5tvZ_skatXIQ8RAcBJBk"},
{"content":{"body":"making an actual thing vs just typing `x => x[a, b](y)` doesn't seem worth adding","format":"org.matrix.custom.html","formatted_body":"making an actual thing vs just typing <code>x =&gt; x[a, b](y)</code> doesn't seem worth adding","m.mentions":{},"msgtype":"m.text"},"ts":1701293694466,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$6Y1-dfQLrdUQb-ehmcXFW2R5T18vqAZx8ZJHiL5fu3k"},
{"content":{"body":"I would definitely not want that to work with normal `obj[key]` access, but could see using the `obj[^key]` syntax or something","format":"org.matrix.custom.html","formatted_body":"I would definitely not want that to work with normal <code>obj[key]</code> access, but could see using the <code>obj[^key]</code> syntax or something","m.mentions":{},"msgtype":"m.text"},"ts":1701293762968,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$ifTM64F7jLTuz6m0Ct1bpHJj6w54a6q3EttA7e0XrUQ"},
{"content":{"body":"That can't be unwrapped though","m.mentions":{},"msgtype":"m.text"},"ts":1701293765827,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$DPhpmFkuUV6tcacuJIYAIPAh6WMPiBuDaHnueKhWZ0s"},
{"content":{"body":"and while i see ron's point that making a special kind of value and a special protocol to go with it would be a logical generalization, that's a ton of complexity that it'd be a hard sell to justify","m.mentions":{},"msgtype":"m.text"},"ts":1701293769448,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$TLKaunI2FQEoPA4q1iVEhi1T7OkYWnffkcxLP3xNWEM"},
{"content":{"body":"though I don't see why you want to do it in this inverted way - it seems like usually containers know how to use an index, rather than an index knowing how to use a container?","m.mentions":{},"msgtype":"m.text"},"ts":1701293797366,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$JKX3qBRqCeUf3XdsStnp0s7LYfuvqQ-n2ScPl1IOmjM"},
{"content":{"body":"i.e., `x => x[a, b]` doesn't let you extract `a` and `b` as there's no associated data model.","format":"org.matrix.custom.html","formatted_body":"i.e., <code>x =&gt; x[a, b]</code> doesn't let you extract <code>a</code> and <code>b</code> as there's no associated data model.","m.mentions":{},"msgtype":"m.text"},"ts":1701293806154,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$ucOlC6y2Ho3Yfq2VBKgsXCvn8XuAK4YvgcvgKPdPRP0"},
{"content":{"body":"so would we also have a PropertyKey that represents a property, takes an object, and does an inverted lookup?","m.mentions":{},"msgtype":"m.text"},"ts":1701293828569,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$utO5D8V2Ndv1p0R7zmdNpEK2AHJ0PCgf_-PQj2a_52c"},
{"content":{"body":"> <@rbuckton:matrix.org> i.e., `x => x[a, b]` doesn't let you extract `a` and `b` as there's no associated data model.\n\noh lol yeah sorry `x.slice(a, b)` in this case, i mistyped","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$ucOlC6y2Ho3Yfq2VBKgsXCvn8XuAK4YvgcvgKPdPRP0?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@rbuckton:matrix.org\">@rbuckton:matrix.org</a><br>i.e., <code>x =&gt; x[a, b]</code> doesn't let you extract <code>a</code> and <code>b</code> as there's no associated data model.</blockquote></mx-reply>oh lol yeah sorry <code>x.slice(a, b)</code> in this case, i mistyped","m.mentions":{"user_ids":["@rbuckton:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$ucOlC6y2Ho3Yfq2VBKgsXCvn8XuAK4YvgcvgKPdPRP0"}},"msgtype":"m.text"},"ts":1701293842708,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$0K-ohpmCEFEZ35jC9IqY4gitsPrmK6vm-VDWP-nFa6M"},
{"content":{"body":"> <@rbuckton:matrix.org> i.e., `x => x[a, b]` doesn't let you extract `a` and `b` as there's no associated data model.\n\n * oh lol yeah sorry `x.slice(a, b)` in this case, i mistyped. but yes it doesn't let you get at the a and b, which seems like a benefit? (to make it an opaque lens)","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$ucOlC6y2Ho3Yfq2VBKgsXCvn8XuAK4YvgcvgKPdPRP0?via=matrix.org&amp;via=mozilla.org&amp;via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@rbuckton:matrix.org\">@rbuckton:matrix.org</a><br>i.e., <code>x =&gt; x[a, b]</code> doesn't let you extract <code>a</code> and <code>b</code> as there's no associated data model.</blockquote></mx-reply> * oh lol yeah sorry <code>x.slice(a, b)</code> in this case, i mistyped. but yes it doesn't let you get at the a and b, which seems like a benefit? (to make it an opaque lens)","m.mentions":{},"m.new_content":{"body":"oh lol yeah sorry `x.slice(a, b)` in this case, i mistyped. but yes it doesn't let you get at the a and b, which seems like a benefit? (to make it an opaque lens)","format":"org.matrix.custom.html","formatted_body":"oh lol yeah sorry <code>x.slice(a, b)</code> in this case, i mistyped. but yes it doesn't let you get at the a and b, which seems like a benefit? (to make it an opaque lens)","m.mentions":{"user_ids":["@rbuckton:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$0K-ohpmCEFEZ35jC9IqY4gitsPrmK6vm-VDWP-nFa6M","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1701293864112,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$qECwEprMI0H_nMSp1U94CA5X2pOgZNA3hKK2HQ52mIc"},
{"content":{"body":"I think my preference here would be to leave `obj[x]` alone, and to add a new `obj[^x]` which invokes a symbol-named method on `obj` passing it `x` (uncoerced). there could then be a `slice(a, b)` function which returns a reified Slice, and the symbol-named method on Array could know how to deal with that","format":"org.matrix.custom.html","formatted_body":"I think my preference here would be to leave <code>obj[x]</code> alone, and to add a new <code>obj[^x]</code> which invokes a symbol-named method on <code>obj</code> passing it <code>x</code> (uncoerced). there could then be a <code>slice(a, b)</code> function which returns a reified Slice, and the symbol-named method on Array could know how to deal with that","m.mentions":{},"msgtype":"m.text"},"ts":1701293926854,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$ppCA-XPd8GiS5r5Rw4OyJLlSMUOBvXW19eGxR8C_S8Q"},
{"content":{"body":"also you could have the symbol-named method on Map be an alias for `get`, and that sort of thing","format":"org.matrix.custom.html","formatted_body":"also you could have the symbol-named method on Map be an alias for <code>get</code>, and that sort of thing","m.mentions":{},"msgtype":"m.text"},"ts":1701293940937,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$Rjts7MK3rzrn1tosy0GTSXZcD9ijhswEi-CUeKfwesk"},
{"content":{"body":"> <@bakkot:matrix.org> though I don't see why you want to do it in this inverted way - it seems like usually containers know how to use an index, rather than an index knowing how to use a container?\n\nExcept `[]` is only useful for strings and symbols (i.e., via toPrimitive). You can't put anything else meaningful in there that isn't either. ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$JKX3qBRqCeUf3XdsStnp0s7LYfuvqQ-n2ScPl1IOmjM?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@bakkot:matrix.org\">@bakkot:matrix.org</a><br>though I don&#39;t see why you want to do it in this inverted way - it seems like usually containers know how to use an index, rather than an index knowing how to use a container?</blockquote></mx-reply>Except <code>[]</code> is only useful for strings and symbols (i.e., via toPrimitive). You can't put anything else meaningful in there that isn't either.","m.mentions":{"user_ids":["@bakkot:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$JKX3qBRqCeUf3XdsStnp0s7LYfuvqQ-n2ScPl1IOmjM"}},"msgtype":"m.text"},"ts":1701293949154,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$ai0bmMc2G6eSifL77F8z1rM_K3h83ojnSpRiqm2LRMA"},
{"content":{"body":"and of course have a similarly named method to be invoked when doing `obj[^x] = y`","format":"org.matrix.custom.html","formatted_body":"and of course have a similarly named method to be invoked when doing <code>obj[^x] = y</code>","m.mentions":{},"msgtype":"m.text"},"ts":1701293953110,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$HM9JVPAlqi_A7zU9Iw1K3CvggMVsZqWaJaTq9yjNiSc"},
{"content":{"body":"yeah I would also not want `a[b]` delegating to a protocol","format":"org.matrix.custom.html","formatted_body":"yeah I would also not want <code>a[b]</code> delegating to a protocol","m.mentions":{},"msgtype":"m.text"},"ts":1701293960172,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$1BzV1ikgSBk8knAMmKkbmNDhkBlhAT_nvJLEsMWFXxc"},
{"content":{"body":"I'm surprised the `WeakMap` example isn't a stronger motivator?","format":"org.matrix.custom.html","formatted_body":"I'm surprised the <code>WeakMap</code> example isn't a stronger motivator?","m.mentions":{},"msgtype":"m.text"},"ts":1701294007722,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$Q1OWUYxls-JcKGS7Ste43P1t0JOHFoPPPX6OhtKbTMI"}
]