[
{"content":{"body":"right","msgtype":"m.text"},"ts":1675817116712,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$COCvHv65eDTuR8QC2Lb6IuU0rbpyg88OnC-wd162zn4"},
{"content":{"body":"Can we just fix the override mistake? If we introduce a \"freeze mode\" that doesn't trigger the override mistake for some intrinsics, I'd like this behavior to not be exotic, and be applicable to non intrinsics. One avenue I've been toying with is an options bag to `Object.freeze` that would allow setting such mode on the object and have the `OrdinarySetWithOwnDescriptor` check for that mode. I think changing 2.1 to something like this would be enough: `If ownDesc.[[Writable]] is false and O.[[FrozenWithoutOverrideMistake]] is true, return false.`","format":"org.matrix.custom.html","formatted_body":"Can we just fix the override mistake? If we introduce a &quot;freeze mode&quot; that doesn't trigger the override mistake for some intrinsics, I'd like this behavior to not be exotic, and be applicable to non intrinsics. One avenue I've been toying with is an options bag to <code>Object.freeze</code> that would allow setting such mode on the object and have the <code>OrdinarySetWithOwnDescriptor</code> check for that mode. I think changing 2.1 to something like this would be enough: <code>If ownDesc.[[Writable]] is false and O.[[FrozenWithoutOverrideMistake]] is true, return false.</code>","msgtype":"m.text"},"ts":1675817952608,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$t-DwttygOxSDYgNNV3qDlEYs0NZe-vJvMTp0mztr8co"},
{"content":{"body":"Then instead of ad-hoc patching some intrinsics so that they'd be exotic non-configurable, just ask that code opt-in to freezing all the intrinsics through the new \"secure mode\"","msgtype":"m.text"},"ts":1675818158243,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$CMJlXh6FeX0mbDseleivgK-0Jurdvi02h0QPOwE_zyE"},
{"content":{"body":"Mm, I'm not sure how much appetite there would be for a new attribute on every object. That's a lot to ask of engines.","msgtype":"m.text"},"ts":1675818190808,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$Jp_yWx29OKwKDKhAL2bmzspl9tm3gISKUa88Px0daYI"},
{"content":{"body":"maybe?","msgtype":"m.text"},"ts":1675818198600,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$th0IxI_IxONJeS9m_QUYecvXenzacfIBqrNZpPNjPik"},
{"content":{"body":"Doesn't have to be on every object, just the special frozen ones ;)","msgtype":"m.text"},"ts":1675818216013,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$Ke4A_LHuGfkxY70WZZQjZurXDeRjNjeyLsfx6vyl5Yo"}
]