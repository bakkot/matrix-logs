[
{"content":{"body":"Has there been any discussion around \"nullish coallescing destructuring\", that is, making something like `function a ({ x = 10 }) { }` \"just work\" for the `a()` case and having x just be set to 10 instead of throwing? Perhaps using syntax like `function a({ x ?= 10 }) { }` or something?","format":"org.matrix.custom.html","formatted_body":"Has there been any discussion around &quot;nullish coallescing destructuring&quot;, that is, making something like <code>function a ({ x = 10 }) { }</code> &quot;just work&quot; for the <code>a()</code> case and having x just be set to 10 instead of throwing? Perhaps using syntax like <code>function a({ x ?= 10 }) { }</code> or something?","msgtype":"m.text"},"ts":1680872854734,"senderName":"Francisco Tolmasky","senderId":"@tolmasky:matrix.org","id":"$_uOaapOAmxhnZN4ffXzrLKbhXhHJQHRvD3F1SX7CP5o"},
{"content":{"body":"While not as efficient, you can already do `function a ({ x = 10 } = {}) { }`","format":"org.matrix.custom.html","formatted_body":"While not as efficient, you can already do <code>function a ({ x = 10 } = {}) { }</code>","msgtype":"m.text"},"ts":1680877538285,"senderName":"rbuckton-pto","senderId":"@rbuckton:matrix.org","id":"$YW7_IXnbTVEifk5qz_MpP9MGhcotxvhCBx4j1cSR7DY"},
{"content":{"body":"There were a few discussions in the Optional Chaining proposal: https://github.com/search?q=repo%3Atc39%2Fproposal-optional-chaining+destructuring&type=issues","msgtype":"m.text"},"ts":1680878126429,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$0DfkcHD-TKWdKyLLaYoIHpqUsbdDApbe0rxa2kLpSXY"},
{"content":{"body":"Yeah the `= {}` trick works for top-level, but it's more annoying if you want to destructure deeper into the object; you've got to supply more dummy objects for each path you take.","format":"org.matrix.custom.html","formatted_body":"Yeah the <code>= {}</code> trick works for top-level, but it's more annoying if you want to destructure deeper into the object; you've got to supply more dummy objects for each path you take.","msgtype":"m.text"},"ts":1680887393060,"senderName":"TabAtkins","senderId":"@tabatkins:matrix.org","id":"$tbtgeLoN5laiCxngNGyNFkpAvmSNdL3h0lMOUYwspSc"},
{"content":{"body":"Right, the concern is when it starts to nest pretty deep","msgtype":"m.text"},"ts":1680889513336,"senderName":"Francisco Tolmasky","senderId":"@tolmasky:matrix.org","id":"$KmcLAPW83ORl01wlo8EFtIAAv1xHzu56S5Uf0cAC1Bg"},
{"content":{"body":"Oh, there was also https://github.com/tc39/agendas/pull/1122, but it was never presented","msgtype":"m.text"},"ts":1680893504992,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$NE5TD7guppl68AWRm6TbGo4q5EUsZ364iIxpTBg48u8"},
{"content":{"body":"https://twitter.com/TheJoin95/status/1644387103105482753\n\nspeaking of...","msgtype":"m.text"},"ts":1680893686602,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$oIMoUdFPiEj191p_6MDjRkeoade5PYwEPtq6QLfJqpo"},
{"content":{"body":"I feel like doing very deep destructuring all in one go is generally less clear than splitting it up, so I'm not sure I would want to add syntax which is mostly useful for very deep destructuring ","msgtype":"m.text"},"ts":1680894015413,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$H25b2l1yXNft391q5DEDjMy8TMEK0-jmpjdvJZ93Atc"},
{"content":{"body":"well.. could simplify the example:\n\n```\nconst state = {\n    profileMenu: null\n}\n\nconst {\n    profileMenu: {\n      username: ProfileMenuUsername\n    }\n} = state; ```","format":"org.matrix.custom.html","formatted_body":"<p>well.. could simplify the example:</p>\n<pre><code>const state = {\n    profileMenu: null\n}\n\nconst {\n    profileMenu: {\n      username: ProfileMenuUsername\n    }\n} = state; ```\n</code></pre>\n","msgtype":"m.text"},"ts":1680894070413,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$ZntHQip7pO6JVRzOzqp_8K5xgL7F4rxmj8XrYomwa8s"},
{"content":{"body":" * well.. could simplify the example:\n\n```\nconst state = {\n    profileMenu: null\n}\n\nconst {\n    profileMenu: {\n      username: ProfileMenuUsername\n    }\n} = state;\n```","format":"org.matrix.custom.html","formatted_body":" * <p>well.. could simplify the example:</p>\n<pre><code>const state = {\n    profileMenu: null\n}\n\nconst {\n    profileMenu: {\n      username: ProfileMenuUsername\n    }\n} = state;\n</code></pre>\n","m.new_content":{"body":"well.. could simplify the example:\n\n```\nconst state = {\n    profileMenu: null\n}\n\nconst {\n    profileMenu: {\n      username: ProfileMenuUsername\n    }\n} = state;\n```","format":"org.matrix.custom.html","formatted_body":"<p>well.. could simplify the example:</p>\n<pre><code>const state = {\n    profileMenu: null\n}\n\nconst {\n    profileMenu: {\n      username: ProfileMenuUsername\n    }\n} = state;\n</code></pre>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$ZntHQip7pO6JVRzOzqp_8K5xgL7F4rxmj8XrYomwa8s","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1680894082514,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$JEH71mHCAm9245Pzs4RaLnSBEcDP94_zvfYW9nxJBj4"},
{"content":{"body":"`const { username: ProfileMenuUsername } = {} = state.profileMenu;` ?","format":"org.matrix.custom.html","formatted_body":"<code>const { username: ProfileMenuUsername } = {} = state.profileMenu;</code> ?","msgtype":"m.text"},"ts":1680894215570,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$A6ydbWCNMsY7CNhwdyimlLBvBk77sf2QKFIZsNH3iUo"},
{"content":{"body":" * well.. could simplify the example:\n\n```\nconst state = {\n  profileMenu: null\n}\n\nconst {\n  profileMenu: {\n    username: ProfileMenuUsername\n  }\n} = state;\n```","format":"org.matrix.custom.html","formatted_body":" * <p>well.. could simplify the example:</p>\n<pre><code>const state = {\n  profileMenu: null\n}\n\nconst {\n  profileMenu: {\n    username: ProfileMenuUsername\n  }\n} = state;\n</code></pre>\n","m.new_content":{"body":"well.. could simplify the example:\n\n```\nconst state = {\n  profileMenu: null\n}\n\nconst {\n  profileMenu: {\n    username: ProfileMenuUsername\n  }\n} = state;\n```","format":"org.matrix.custom.html","formatted_body":"<p>well.. could simplify the example:</p>\n<pre><code>const state = {\n  profileMenu: null\n}\n\nconst {\n  profileMenu: {\n    username: ProfileMenuUsername\n  }\n} = state;\n</code></pre>\n","msgtype":"m.text"},"m.relates_to":{"event_id":"$ZntHQip7pO6JVRzOzqp_8K5xgL7F4rxmj8XrYomwa8s","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1680894221543,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$fGHRZ0ATSEnUiGsL6ZkhTpFOunB5iCX7Glij3G4J_s8"},
{"content":{"body":" * `const { username: ProfileMenuUsername } = {} = state?.profileMenu;` ?","format":"org.matrix.custom.html","formatted_body":" * <code>const { username: ProfileMenuUsername } = {} = state?.profileMenu;</code> ?","m.new_content":{"body":"`const { username: ProfileMenuUsername } = {} = state?.profileMenu;` ?","format":"org.matrix.custom.html","formatted_body":"<code>const { username: ProfileMenuUsername } = {} = state?.profileMenu;</code> ?","msgtype":"m.text"},"m.relates_to":{"event_id":"$A6ydbWCNMsY7CNhwdyimlLBvBk77sf2QKFIZsNH3iUo","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1680894224737,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$Q-eedcEMrYAj8yTqOIM5W_0aN9o3MFZHd80J19V5-LI"},
{"content":{"body":"> <@ljharb:matrix.org> `const { username: ProfileMenuUsername } = {} = state?.profileMenu;` ?\n\n`Cannot read properties of null (reading 'username')`","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$A6ydbWCNMsY7CNhwdyimlLBvBk77sf2QKFIZsNH3iUo?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br><code>const { username: ProfileMenuUsername } = {} = state?.profileMenu;</code> ?</blockquote></mx-reply><code>Cannot read properties of null (reading 'username')</code>","m.relates_to":{"m.in_reply_to":{"event_id":"$A6ydbWCNMsY7CNhwdyimlLBvBk77sf2QKFIZsNH3iUo"}},"msgtype":"m.text"},"ts":1680894303582,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$hja7_oWQEy-K3toMPNvvAworFV-DYOzyKeOTG44Pixo"},
{"content":{"body":"`const { username: ProfileMenuUsername } = state?.profileMenu ?? {};` then :-p","format":"org.matrix.custom.html","formatted_body":"<code>const { username: ProfileMenuUsername } = state?.profileMenu ?? {};</code> then :-p","msgtype":"m.text"},"ts":1680894336850,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$9hcwLnfTBSB0JSImQ_BW1KEMqJwQqnwBKykPr4E_noQ"},
{"content":{"body":"well that gives you a diff obj ðŸ¤·","msgtype":"m.text"},"ts":1680894421288,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$RNSArhylLj04CONyZIrZyJH-Khn2Dv9reFegg-z1-WM"},
{"content":{"body":"the only thing you care about is ProfileMenuUsername, and it gives you undefined in this case","msgtype":"m.text"},"ts":1680900386487,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$6UhaN8_BrhWzVkS8fb4Qh3r-_OmVfxgQrGq4Y2d0BcQ"},
{"content":{"body":"fair.  that was just a reduction of the ackchyual example in the repo.  I can't speak to what they care about or not wrt the deep obj destructuring there.  anyway, to my eyes, seems like it's just one tiny requirement away from needing refactoring -- seems like fragile serialization","msgtype":"m.text"},"ts":1680901803070,"senderName":"Chris de Almeida","senderId":"@softwarechris:matrix.org","id":"$ETvZga_DX3S8_DErt-PSyRvGXTeDI6UbmTyYsj-ZTaQ"},
{"content":{"body":"true. what's fragile is having deeply nested data structures that can have nulls in it. outside of graphql tho i don't think that's super common.","msgtype":"m.text"},"ts":1680902496799,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$D0CU-iYwFpurv9CXuATgZYbMVMT2CdeOkCVyOzOC9fY"}
]