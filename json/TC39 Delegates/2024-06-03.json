[
{"content":{"body":"If we seriously have extra time on the agenda, there are a couple wild open discussion topics which might be fun. Emoji-react something if you're interested in them. (Apologies for not raising this before the agenda deadline.)","m.mentions":{},"msgtype":"m.text"},"ts":1717409984481,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$wze4NORaJ4Y3ZZ5iFKm4qOuOTeaV0LjqTPKQi15hlJU"},
{"content":{"body":"Cancellable promises","m.mentions":{},"msgtype":"m.text"},"ts":1717409988061,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$NuWaj5MS7IMvyQhoF19Pyw1BNzpHEXDi0FzaI9oXuSQ"},
{"content":{"body":"Private name declarations outside of classes","m.mentions":{},"msgtype":"m.text"},"ts":1717410002708,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$NQAx4vx3n94f3r9XdnB9OZTcOpjHwrIJffP8Qk9y_lw"},
{"content":{"body":"> <@littledan:matrix.org> Cancellable promises\n\nWould it make sense to discuss this on https://github.com/tc39/proposal-cancellation? ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$NuWaj5MS7IMvyQhoF19Pyw1BNzpHEXDi0FzaI9oXuSQ?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@littledan:matrix.org\">@littledan:matrix.org</a><br />Cancellable promises</blockquote></mx-reply>Would it make sense to discuss this on https://github.com/tc39/proposal-cancellation?","m.relates_to":{"m.in_reply_to":{"event_id":"$NuWaj5MS7IMvyQhoF19Pyw1BNzpHEXDi0FzaI9oXuSQ"}},"msgtype":"m.text"},"ts":1717410895090,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$9C7pEP5G1hXuAuEGI9ryV8Vwurxd8IGYLq85jL0mm10"},
{"content":{"body":"> <@rbuckton:matrix.org> Would it make sense to discuss this on https://github.com/tc39/proposal-cancellation?\n\noh thanks that gives a lot of helpful references to review. I have been thinking about this area again in the context of AsyncContext, which gives us more options for propagating the cancel token.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$9C7pEP5G1hXuAuEGI9ryV8Vwurxd8IGYLq85jL0mm10?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@rbuckton:matrix.org\">@rbuckton:matrix.org</a><br>Would it make sense to discuss this on https://github.com/tc39/proposal-cancellation?</blockquote></mx-reply>oh thanks that gives a lot of helpful references to review. I have been thinking about this area again in the context of AsyncContext, which gives us more options for propagating the cancel token.","m.mentions":{"user_ids":["@rbuckton:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$9C7pEP5G1hXuAuEGI9ryV8Vwurxd8IGYLq85jL0mm10"}},"msgtype":"m.text"},"ts":1717411027446,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$3vaKfNh2JD_TsUF_QEvYVOAjCTMhspxp_u8_Zq8Rj5s"},
{"content":{"body":"also AbortSignal.any is a very helpful, core capability in this area, which I don't think was there last time we discussed this","m.mentions":{},"msgtype":"m.text"},"ts":1717411064109,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$THkWwSHcS2KtM3Su9U-Omg5Bd3cNSao_LuIIuYMopRQ"},
{"content":{"body":"(I guess it basically enables what your previous proposal's `new CancellationTokenSource(linkedTokens?)` does, roughly)","format":"org.matrix.custom.html","formatted_body":"(I guess it basically enables what your previous proposal's <code>new CancellationTokenSource(linkedTokens?)</code> does, roughly)","m.mentions":{},"msgtype":"m.text"},"ts":1717411219801,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$-RX9q4fEJEgRqx7FXCxbckdDiabs8geDwTDfCVoGDFs"},
{"content":{"body":"Unfortunately, since `AbortSignal` is outside the purview of TC39 the best forum for that may be WHATWG. ","format":"org.matrix.custom.html","formatted_body":"Unfortunately, since <code>AbortSignal</code> is outside the purview of TC39 the best forum for that may be WHATWG.","msgtype":"m.text"},"ts":1717411596415,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$Ndftk7yg301jeJFWOdbWpPu_uCmHyvlaGI046S2n78s"},
{"content":{"body":"Though I've long held that cancellation graphs like that are very valuable","msgtype":"m.text"},"ts":1717411647488,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$wRaPbIquUpVW0Ig0wXdODBHO_blgL0bMsLdtkPwfcYY"},
{"content":{"body":"We'll definitely have to collaborate between standards groups to make this happen, but I think you were right to bring this to TC39, and believe we can make some progress together.","m.mentions":{},"msgtype":"m.text"},"ts":1717411670220,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$_LTL__2t1hFb-r0ufeLe5d0eLgvLR5-chD_wLrP3gZI"},
{"content":{"body":"also if we want integration with async/await (e.g., all awaits are implicitly racing with the cancel token), something would need to happen in TC39","m.mentions":{},"msgtype":"m.text"},"ts":1717411796372,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$IwLIcnrVqGbPDNLx-zElYW3ARuhEwJyHbHpfCGA2f0Q"},
{"content":{"body":"I also agree that AsyncContext would have been the way to traffic a cancellation token in the way Yehuda wanted, so long as there was a way to suppress async context flow when needed","msgtype":"m.text"},"ts":1717411801638,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$wM6R1E3aZ7Yd_pyvkdGC5dc5GQM_mZSWreNDN8KQpV0"},
{"content":{"body":"> <@rbuckton:matrix.org> I also agree that AsyncContext would have been the way to traffic a cancellation token in the way Yehuda wanted, so long as there was a way to suppress async context flow when needed\n\ncould you say more about this suppression use case?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$wM6R1E3aZ7Yd_pyvkdGC5dc5GQM_mZSWreNDN8KQpV0?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@rbuckton:matrix.org\">@rbuckton:matrix.org</a><br>I also agree that AsyncContext would have been the way to traffic a cancellation token in the way Yehuda wanted, so long as there was a way to suppress async context flow when needed</blockquote></mx-reply>could you say more about this suppression use case?","m.mentions":{"user_ids":["@rbuckton:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$wM6R1E3aZ7Yd_pyvkdGC5dc5GQM_mZSWreNDN8KQpV0"}},"msgtype":"m.text"},"ts":1717411830594,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$FBsyu-f1-wH19HnjJxkC8XYY6vudgRIujyiFnObk_bo"},
{"content":{"body":"I mean, requirements for it","m.mentions":{},"msgtype":"m.text"},"ts":1717411841467,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$ZwtGtDeFY83TsCglRiJRR5K8IT7M20MTIzb9HwNBH78"},
{"content":{"body":"The only avenue given to us at this point is a host hook. ","format":"org.matrix.custom.html","formatted_body":"The only avenue given to us at this point is a host hook.","msgtype":"m.text"},"ts":1717411847027,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$UL00u1v3yLFQkocwvKpu8wSJDcUQJvXIo0KUPS0lGdY"},
{"content":{"body":"IIRC wanting the cancel token to be implicitly propagated was a goal of Domenic's as well","m.mentions":{},"msgtype":"m.text"},"ts":1717411876521,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$6xEXER19uzI-FuhfvRuuICFcpnba7VlzcBBqmdzz5Ag"},
{"content":{"body":"> <@littledan:matrix.org> could you say more about this suppression use case?\n\nSometimes you *don't* want to propagate the token.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$FBsyu-f1-wH19HnjJxkC8XYY6vudgRIujyiFnObk_bo?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@littledan:matrix.org\">@littledan:matrix.org</a><br>could you say more about this suppression use case?</blockquote></mx-reply>Sometimes you <em>don't</em> want to propagate the token.","m.mentions":{"user_ids":["@littledan:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$FBsyu-f1-wH19HnjJxkC8XYY6vudgRIujyiFnObk_bo"}},"msgtype":"m.text"},"ts":1717411901981,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$_80vN5jVNuSWUhJTsG_FNFEBFESQibdDs3tzgU1iX6Q"},
{"content":{"body":"I have to step away, I'll discuss more shortly.","m.mentions":{},"msgtype":"m.text"},"ts":1717411915355,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$E-4w3T2JhN5V-IpVtE05TG319-9rw_C7CEvrNWvEG60"},
{"content":{"body":"> <@rbuckton:matrix.org> The only avenue given to us at this point is a host hook.\n\nI hope we can first think about the problem space and what's needed for developers (as you were trying to do) and then we can go from there to \"how do we lay this out across the various specs\"","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!WgJwmjBNZEXhJnXHXw:matrix.org/$UL00u1v3yLFQkocwvKpu8wSJDcUQJvXIo0KUPS0lGdY?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@rbuckton:matrix.org\">@rbuckton:matrix.org</a><br>The only avenue given to us at this point is a host hook.</blockquote></mx-reply>I hope we can first think about the problem space and what's needed for developers (as you were trying to do) and then we can go from there to \"how do we lay this out across the various specs\"","m.mentions":{"user_ids":["@rbuckton:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$UL00u1v3yLFQkocwvKpu8wSJDcUQJvXIo0KUPS0lGdY"}},"msgtype":"m.text"},"ts":1717411923559,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$0zpp7Tp_A-vUXZxJTH3r9NHld6FscjKormma71sQsk8"},
{"content":{"body":"With the token as a parameter, it is up to the caller to determine whether to pass the token to a function. If you had a function that invoked a REST API, you might want to allow it to be cancellable in some cases, but not others. If there is no suppression mechanism, then there is no way for the caller to make this determination. The structure of the Cancellation API (so far as that proposal was concerned) ensured an appropriate separation of concerns so that the correct level of control was available with respect to the caller and the call site. ","format":"org.matrix.custom.html","formatted_body":"With the token as a parameter, it is up to the caller to determine whether to pass the token to a function. If you had a function that invoked a REST API, you might want to allow it to be cancellable in some cases, but not others. If there is no suppression mechanism, then there is no way for the caller to make this determination. The structure of the Cancellation API (so far as that proposal was concerned) ensured an appropriate separation of concerns so that the correct level of control was available with respect to the caller and the call site.","msgtype":"m.text"},"ts":1717412535431,"senderName":"rbuckton","senderId":"@rbuckton:matrix.org","id":"$OHKC1G-8fV_OYElRCNKSXd8JhVygAt-Mme5w5mf7cUQ"}
]