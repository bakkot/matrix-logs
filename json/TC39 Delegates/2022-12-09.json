[
{"content":{"body":"bakkot: in https://tc39.es/proposal-iterator-helpers/#sec-iteratorprototype.filter step 3.b.iii, if IteratorValue completes abruptly, is that a case of a misbehaving iterator, and thus why we don't take care to close the iterator?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@bakkot:matrix.org\">bakkot</a>: in https://tc39.es/proposal-iterator-helpers/#sec-iteratorprototype.filter step 3.b.iii, if IteratorValue completes abruptly, is that a case of a misbehaving iterator, and thus why we don't take care to close the iterator?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"bakkot: in https://tc39.es/proposal-iterator-helpers/#sec-iteratorprototype.filter step 3.b.iii, if IteratorValue completes abruptly, is that a case of a misbehaving iterator, and thus why we don't take care to close the iterator?","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@bakkot:matrix.org\">bakkot</a>: in https://tc39.es/proposal-iterator-helpers/#sec-iteratorprototype.filter step 3.b.iii, if IteratorValue completes abruptly, is that a case of a misbehaving iterator, and thus why we don't take care to close the iterator?","mimetype":"text/html"}]},"ts":1670625072807,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$yyiuhv51WFO1hdOAqNfoI58Qh3hu7Q-_PU61ysrw2n4"},
{"content":{"body":"i'm asking in particular because in some methods, IteratorNext and IteratorValue being abrupt *doesn't* close the iterator, but in other methods, it does. it seems like it should consistently be one or the other?","format":"org.matrix.custom.html","formatted_body":"i'm asking in particular because in some methods, IteratorNext and IteratorValue being abrupt <em>doesn't</em> close the iterator, but in other methods, it does. it seems like it should consistently be one or the other?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"i'm asking in particular because in some methods, IteratorNext and IteratorValue being abrupt *doesn't* close the iterator, but in other methods, it does. it seems like it should consistently be one or the other?","mimetype":"text/plain"},{"body":"i'm asking in particular because in some methods, IteratorNext and IteratorValue being abrupt <em>doesn't</em> close the iterator, but in other methods, it does. it seems like it should consistently be one or the other?","mimetype":"text/html"}]},"ts":1670626155149,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$sFyG3PG1l_Nx_fbayPJiDdOEhZGExHQAnsRU9UT__dI"},
{"content":{"body":" * Michael Ficarra snek bakkot: in https://tc39.es/proposal-iterator-helpers/#sec-iteratorprototype.filter step 3.b.iii, if IteratorValue completes abruptly, is that a case of a misbehaving iterator, and thus why we don't take care to close the iterator?","format":"org.matrix.custom.html","formatted_body":" * <a href=\"https://matrix.to/#/@michaelficarra:matrix.org\">Michael Ficarra</a> <a href=\"https://matrix.to/#/@devsnek:matrix.org\">snek</a> <a href=\"https://matrix.to/#/@bakkot:matrix.org\">bakkot</a>: in https://tc39.es/proposal-iterator-helpers/#sec-iteratorprototype.filter step 3.b.iii, if IteratorValue completes abruptly, is that a case of a misbehaving iterator, and thus why we don't take care to close the iterator?","m.new_content":{"body":"Michael Ficarra snek bakkot: in https://tc39.es/proposal-iterator-helpers/#sec-iteratorprototype.filter step 3.b.iii, if IteratorValue completes abruptly, is that a case of a misbehaving iterator, and thus why we don't take care to close the iterator?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@michaelficarra:matrix.org\">Michael Ficarra</a> <a href=\"https://matrix.to/#/@devsnek:matrix.org\">snek</a> <a href=\"https://matrix.to/#/@bakkot:matrix.org\">bakkot</a>: in https://tc39.es/proposal-iterator-helpers/#sec-iteratorprototype.filter step 3.b.iii, if IteratorValue completes abruptly, is that a case of a misbehaving iterator, and thus why we don't take care to close the iterator?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Michael Ficarra snek bakkot: in https://tc39.es/proposal-iterator-helpers/#sec-iteratorprototype.filter step 3.b.iii, if IteratorValue completes abruptly, is that a case of a misbehaving iterator, and thus why we don't take care to close the iterator?","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@michaelficarra:matrix.org\">Michael Ficarra</a> <a href=\"https://matrix.to/#/@devsnek:matrix.org\">snek</a> <a href=\"https://matrix.to/#/@bakkot:matrix.org\">bakkot</a>: in https://tc39.es/proposal-iterator-helpers/#sec-iteratorprototype.filter step 3.b.iii, if IteratorValue completes abruptly, is that a case of a misbehaving iterator, and thus why we don't take care to close the iterator?","mimetype":"text/html"}]},"m.relates_to":{"event_id":"$yyiuhv51WFO1hdOAqNfoI58Qh3hu7Q-_PU61ysrw2n4","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":" * Michael Ficarra snek bakkot: in https://tc39.es/proposal-iterator-helpers/#sec-iteratorprototype.filter step 3.b.iii, if IteratorValue completes abruptly, is that a case of a misbehaving iterator, and thus why we don't take care to close the iterator?","mimetype":"text/plain"},{"body":" * <a href=\"https://matrix.to/#/@michaelficarra:matrix.org\">Michael Ficarra</a> <a href=\"https://matrix.to/#/@devsnek:matrix.org\">snek</a> <a href=\"https://matrix.to/#/@bakkot:matrix.org\">bakkot</a>: in https://tc39.es/proposal-iterator-helpers/#sec-iteratorprototype.filter step 3.b.iii, if IteratorValue completes abruptly, is that a case of a misbehaving iterator, and thus why we don't take care to close the iterator?","mimetype":"text/html"}]},"ts":1670626196695,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$SmdepEYaaEZMaEdiU_S1rdnb3ByAzMqm85z63Osxap8"},
{"content":{"body":"ljharb: correct, iteratorstep and iteratorvalue throwing is considered misbehaving and so does not close the iterator","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@ljharb:matrix.org\">ljharb</a>: correct, iteratorstep and iteratorvalue throwing is considered misbehaving and so does not close the iterator","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"ljharb: correct, iteratorstep and iteratorvalue throwing is considered misbehaving and so does not close the iterator","mimetype":"text/plain"},{"body":"<a href=\"https://matrix.to/#/@ljharb:matrix.org\">ljharb</a>: correct, iteratorstep and iteratorvalue throwing is considered misbehaving and so does not close the iterator","mimetype":"text/html"}]},"ts":1670626491147,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$UnqPHbUybP3yZsnrDJxOZLLX-wLHMY7E6IiBMUfCizY"},
{"content":{"body":"if there are cases where those things throw and the iterator is still closed, that's a bug ","msgtype":"m.text","org.matrix.msc1767.text":"if there are cases where those things throw and the iterator is still closed, that's a bug "},"ts":1670626509535,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$FcejwOLYlYfQKGAVJtPSKlpjIVkRcJBWj6oDLYSKQl8"},
{"content":{"body":"(but you might be looking at flatMap, which is a special case because there are two iterators)","msgtype":"m.text","org.matrix.msc1767.text":"(but you might be looking at flatMap, which is a special case because there are two iterators)"},"ts":1670626519865,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$lFilKg8p7Xi7wOv4a05H9cA_bad1MvRAQpDOPb57cjA"},
{"content":{"body":"yes - in take/drop","msgtype":"m.text","org.matrix.msc1767.text":"yes - in take/drop"},"ts":1670626524006,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$Zi3PFGInHvK_AeZo3_BE6A28977-yMNwydFn_xaycjY"},
{"content":{"body":"the two throwing AOs are done in a oneliner, so the abrupt check isn't separated","msgtype":"m.text","org.matrix.msc1767.text":"the two throwing AOs are done in a oneliner, so the abrupt check isn't separated"},"ts":1670626537948,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$lWYJq1PSzqqVhX1u6mtS0PpCL6ylNx7DAnmxjuFlGds"},
{"content":{"body":"i can make a PR","msgtype":"m.text","org.matrix.msc1767.text":"i can make a PR"},"ts":1670626539726,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$Ljdz2M481zGS8EYk5CC54Lv21PZZYKSMG2y_GWCIatE"},
{"content":{"body":"which step in take/drop?","msgtype":"m.text","org.matrix.msc1767.text":"which step in take/drop?"},"ts":1670626550652,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$ll7j2hGI8XwNDCl_2KvHX059y-jzhXump0aWE-vBdvw"},
{"content":{"body":"eg 6.c.iii in drop","msgtype":"m.text","org.matrix.msc1767.text":"eg 6.c.iii in drop"},"ts":1670626563731,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$C2gNuZF0cKYmjpYsJDVLV-DLCjr0FKe4MySa3i7pby0"},
{"content":{"body":" * eg 6.c.iii in drop","m.new_content":{"body":"eg 6.c.iii in drop","msgtype":"m.text","org.matrix.msc1767.text":"eg 6.c.iii in drop"},"m.relates_to":{"event_id":"$C2gNuZF0cKYmjpYsJDVLV-DLCjr0FKe4MySa3i7pby0","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.text":" * eg 6.c.iii in drop"},"ts":1670626568339,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$VK8zIVTeV9OmjQZITdx2lpi_QhTkrEA73Fz1xu7SARE"},
{"content":{"body":"look closer","msgtype":"m.text","org.matrix.msc1767.text":"look closer"},"ts":1670626578755,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$Kvy4ktnmqm5agMc7IaHCnkX2nFm-FvzQlVJJ6GwPVT0"},
{"content":{"body":"in that case maybe it's just that the check should be removed?","msgtype":"m.text","org.matrix.msc1767.text":"in that case maybe it's just that the check should be removed?"},"ts":1670626581407,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$fuE9nY-yKxMy4ASILqDDLhOjGFBXmhqQXJDwo0lVbeI"},
{"content":{"body":"ohhhh i see","msgtype":"m.text","org.matrix.msc1767.text":"ohhhh i see"},"ts":1670626591538,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$k8nUVMPjStK8dBFWxkAWDtz0R-jjW3mmXi_Dk0_W_pQ"},
{"content":{"body":"it's just the Yield completion","msgtype":"m.text","org.matrix.msc1767.text":"it's just the Yield completion"},"ts":1670626596966,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$z4YJgZ5hWjDnkiC6ftyqF_YtgJU8fWg3Rco6t18mf7k"},
{"content":{"body":"indeed","msgtype":"m.text","org.matrix.msc1767.text":"indeed"},"ts":1670626600272,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$Kh_9bF44_u65G_demGHhX-94Td1B4Gts0y4szqqjlQA"},
{"content":{"body":"i.e., when someone calls `.return()` or `.throw()` on the iterator produced by `.drop()`","format":"org.matrix.custom.html","formatted_body":"i.e., when someone calls <code>.return()</code> or <code>.throw()</code> on the iterator produced by <code>.drop()</code>","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"i.e., when someone calls `.return()` or `.throw()` on the iterator produced by `.drop()`","mimetype":"text/plain"},{"body":"i.e., when someone calls <code>.return()</code> or <code>.throw()</code> on the iterator produced by <code>.drop()</code>","mimetype":"text/html"}]},"ts":1670626622857,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$aMyRaincjH5xThk1odktpiubyPMZpD78VHoLOnkic5k"},
{"content":{"body":"what kind of code would make Yield throw?","msgtype":"m.text","org.matrix.msc1767.text":"what kind of code would make Yield throw?"},"ts":1670626625575,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$w8y0Wjn6VWio_zt7ik6WnHS8bs-acfIU8vnmTak8L8g"},
{"content":{"body":"ahhh","msgtype":"m.text","org.matrix.msc1767.text":"ahhh"},"ts":1670626626636,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$pZOrKwn4GVErDK_lEdRDQ4bhzsHom_zq1x2xldN5ddk"},
{"content":{"body":"(via GeneratorResumeAbrupt IIRC)","msgtype":"m.text","org.matrix.msc1767.text":"(via GeneratorResumeAbrupt IIRC)"},"ts":1670626644750,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$wJ0tA7P1KjZOV-SqMmF-F2GQp1RDFnoP8g-84mpMiUU"},
{"content":{"body":"so if they've *already* called those, then yield would throw then?","format":"org.matrix.custom.html","formatted_body":"so if they've <em>already</em> called those, then yield would throw then?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"so if they've *already* called those, then yield would throw then?","mimetype":"text/plain"},{"body":"so if they've <em>already</em> called those, then yield would throw then?","mimetype":"text/html"}]},"ts":1670626645185,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$NuH2qnBXjQw9J7Sna4vGAboQt-7rfSgPiqyvYFWPJsw"},
{"content":{"body":"what do you mean by \"already called\"?","msgtype":"m.text","org.matrix.msc1767.text":"what do you mean by \"already called\"?"},"ts":1670626666189,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$uq5uStAvps0bnpobVTq3kVFamESegAU3x02V5V-tg_c"},
{"content":{"body":"maybe i'm not understanding. to get to 6.c.iii in drop, you've received an object from the next call. the IteratorValue call means that the Get of `value` has succeeded. when would return/throw factor in?","format":"org.matrix.custom.html","formatted_body":"maybe i'm not understanding. to get to 6.c.iii in drop, you've received an object from the next call. the IteratorValue call means that the Get of <code>value</code> has succeeded. when would return/throw factor in?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"maybe i'm not understanding. to get to 6.c.iii in drop, you've received an object from the next call. the IteratorValue call means that the Get of `value` has succeeded. when would return/throw factor in?","mimetype":"text/plain"},{"body":"maybe i'm not understanding. to get to 6.c.iii in drop, you've received an object from the next call. the IteratorValue call means that the Get of <code>value</code> has succeeded. when would return/throw factor in?","mimetype":"text/html"}]},"ts":1670626728429,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$Co7RTHqlrxR3YX6V1uB5rjLYTo6sq_d_rbsrGGj4ixw"},
{"content":{"body":"is it that `next` or a `value` getter could have called `.return` or `.throw`, setting the GeneratorState to completed, thus causing Yield to throw?","format":"org.matrix.custom.html","formatted_body":"is it that <code>next</code> or a <code>value</code> getter could have called <code>.return</code> or <code>.throw</code>, setting the GeneratorState to completed, thus causing Yield to throw?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"is it that `next` or a `value` getter could have called `.return` or `.throw`, setting the GeneratorState to completed, thus causing Yield to throw?","mimetype":"text/plain"},{"body":"is it that <code>next</code> or a <code>value</code> getter could have called <code>.return</code> or <code>.throw</code>, setting the GeneratorState to completed, thus causing Yield to throw?","mimetype":"text/html"}]},"ts":1670626752452,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$MU978azYF8zmN3okzG56ssO4Ju-AoCZPW9SbyqCcI6s"},
{"content":{"body":"the call to the `Yield` AO pauses the \"generator\"","format":"org.matrix.custom.html","formatted_body":"the call to the <code>Yield</code> AO pauses the &quot;generator&quot;","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"the call to the `Yield` AO pauses the \"generator\"","mimetype":"text/plain"},{"body":"the call to the <code>Yield</code> AO pauses the &quot;generator&quot;","mimetype":"text/html"}]},"ts":1670626755331,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$Oxz2j4ml5VYBiF8faunmrsmZ4LpC6SvLPXaUSyYeH3M"},
{"content":{"body":"and while it is paused, someone calling `.throw()` on the iterator causes return value returned by the `Yield` AO to be a throw completion","format":"org.matrix.custom.html","formatted_body":"and while it is paused, someone calling <code>.throw()</code> on the iterator causes return value returned by the <code>Yield</code> AO to be a throw completion","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"and while it is paused, someone calling `.throw()` on the iterator causes return value returned by the `Yield` AO to be a throw completion","mimetype":"text/plain"},{"body":"and while it is paused, someone calling <code>.throw()</code> on the iterator causes return value returned by the <code>Yield</code> AO to be a throw completion","mimetype":"text/html"}]},"ts":1670626785725,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$hdyb7gzqdr9wVKONIXwCXbOJtfqFb_iDX2Yqc4N8iYk"},
{"content":{"body":"this is the same as for an actual generator","msgtype":"m.text","org.matrix.msc1767.text":"this is the same as for an actual generator"},"ts":1670626793626,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$cLsKatXY4KUZWV-9t-p2pmsXTaxEDc_x0E7oy7enp_c"},
{"content":{"body":"ahhh ok, that's the part i'm missing, thanks","msgtype":"m.text","org.matrix.msc1767.text":"ahhh ok, that's the part i'm missing, thanks"},"ts":1670626796461,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$Z4cLIzGN7g3tuq0-aG9si7SpvpACoLMbU7LsEwuUgds"},
{"content":{"body":"obv in my polyfill i'm doing some nasty stuff to simulate generators, so there's probably some of the basic mechanics that i still need to polish","msgtype":"m.text","org.matrix.msc1767.text":"obv in my polyfill i'm doing some nasty stuff to simulate generators, so there's probably some of the basic mechanics that i still need to polish"},"ts":1670626815733,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$uiPHptaOvRFoCjtLY3JS09BKTbWSIiSJ6QgrdAzCt0o"},
{"content":{"body":"the value returned by the `Yield` AO is the thing passed by the consumer of the generator, as an argument to `.next()` or `.return()` or `.throw()`","format":"org.matrix.custom.html","formatted_body":"the value returned by the <code>Yield</code> AO is the thing passed by the consumer of the generator, as an argument to <code>.next()</code> or <code>.return()</code> or <code>.throw()</code>","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"the value returned by the `Yield` AO is the thing passed by the consumer of the generator, as an argument to `.next()` or `.return()` or `.throw()`","mimetype":"text/plain"},{"body":"the value returned by the <code>Yield</code> AO is the thing passed by the consumer of the generator, as an argument to <code>.next()</code> or <code>.return()</code> or <code>.throw()</code>","mimetype":"text/html"}]},"ts":1670626824226,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$9QPFO0aruW5Gvj928ZN51fNuUHsGKehPkLEmfUyYupo"},
{"content":{"body":" * the value returned by the `Yield` AO is the thing passed by the consumer of the generator, as an argument to `.next()` or `.return()` or `.throw()`","format":"org.matrix.custom.html","formatted_body":" * the value returned by the <code>Yield</code> AO is the thing passed by the consumer of the generator, as an argument to <code>.next()</code> or <code>.return()</code> or <code>.throw()</code>","m.new_content":{"body":"the value returned by the `Yield` AO is the thing passed by the consumer of the generator, as an argument to `.next()` or `.return()` or `.throw()`","format":"org.matrix.custom.html","formatted_body":"the value returned by the <code>Yield</code> AO is the thing passed by the consumer of the generator, as an argument to <code>.next()</code> or <code>.return()</code> or <code>.throw()</code>","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"the value returned by the `Yield` AO is the thing passed by the consumer of the generator, as an argument to `.next()` or `.return()` or `.throw()`","mimetype":"text/plain"},{"body":"the value returned by the <code>Yield</code> AO is the thing passed by the consumer of the generator, as an argument to <code>.next()</code> or <code>.return()</code> or <code>.throw()</code>","mimetype":"text/html"}]},"m.relates_to":{"event_id":"$9QPFO0aruW5Gvj928ZN51fNuUHsGKehPkLEmfUyYupo","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":" * the value returned by the `Yield` AO is the thing passed by the consumer of the generator, as an argument to `.next()` or `.return()` or `.throw()`","mimetype":"text/plain"},{"body":" * the value returned by the <code>Yield</code> AO is the thing passed by the consumer of the generator, as an argument to <code>.next()</code> or <code>.return()</code> or <code>.throw()</code>","mimetype":"text/html"}]},"ts":1670626855595,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$a2uAr1UzskO_sx39CBeb6Q2Eg1OuA54XVnfbKl6dT-I"},
{"content":{"body":"i think i get it. i am looking forward to these test cases being written :-) since i think that will clear it up for me much faster","msgtype":"m.text","org.matrix.msc1767.text":"i think i get it. i am looking forward to these test cases being written :-) since i think that will clear it up for me much faster"},"ts":1670626861516,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$1WoirPxosGJI27WwLoA7g9Lu8Z_9fR-_-CWYHQVmFfA"},
{"content":{"body":"simple test for this example:\n\n```\nlet manualIter = {\n  next(){ console.log('next'); },\n  throw(){ console.log('not hit'); },\n  return() { console.log('closing'); },\n};\n\nlet taken = Iterator.from(manualIter).take(10);\ntaken.next(); // prints 'next'\ntry { taken.throw('err'); } catch (e) { console.log('caught', e); } // prints 'closing' and then 'caught err'\n```","format":"org.matrix.custom.html","formatted_body":"<p>simple test for this example:</p>\n<pre><code>let manualIter = {\n  next(){ console.log('next'); },\n  throw(){ console.log('not hit'); },\n  return() { console.log('closing'); },\n};\n\nlet taken = Iterator.from(manualIter).take(10);\ntaken.next(); // prints 'next'\ntry { taken.throw('err'); } catch (e) { console.log('caught', e); } // prints 'closing' and then 'caught err'\n</code></pre>\n","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"simple test for this example:\n\n```\nlet manualIter = {\n  next(){ console.log('next'); },\n  throw(){ console.log('not hit'); },\n  return() { console.log('closing'); },\n};\n\nlet taken = Iterator.from(manualIter).take(10);\ntaken.next(); // prints 'next'\ntry { taken.throw('err'); } catch (e) { console.log('caught', e); } // prints 'closing' and then 'caught err'\n```","mimetype":"text/plain"},{"body":"<p>simple test for this example:</p>\n<pre><code>let manualIter = {\n  next(){ console.log('next'); },\n  throw(){ console.log('not hit'); },\n  return() { console.log('closing'); },\n};\n\nlet taken = Iterator.from(manualIter).take(10);\ntaken.next(); // prints 'next'\ntry { taken.throw('err'); } catch (e) { console.log('caught', e); } // prints 'closing' and then 'caught err'\n</code></pre>\n","mimetype":"text/html"}]},"ts":1670627140593,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$ZOeZbb3680ZWWnl_rOLlka9oJtaKQxlJmMjOBYRnDSQ"},
{"content":{"body":"hm, neither IteratorPrototype nor WrapForValidIteratorPrototype have a Symbol.toStringTag, which makes debugging with them super annoying (ie, with the wrapper from Iterator.from). can one or both of these get a toStringTag?","msgtype":"m.text","org.matrix.msc1767.text":"hm, neither IteratorPrototype nor WrapForValidIteratorPrototype have a Symbol.toStringTag, which makes debugging with them super annoying (ie, with the wrapper from Iterator.from). can one or both of these get a toStringTag?"},"ts":1670628704938,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$A4aJCu0ausRHWcIryuqbBdttOadnEOkZpzn6pyqy9yA"},
{"content":{"body":"IteratorPrototype has a toStringTag: https://tc39.es/proposal-iterator-helpers/#sec-iteratorprototype-@@tostringtag","msgtype":"m.text","org.matrix.msc1767.text":"IteratorPrototype has a toStringTag: https://tc39.es/proposal-iterator-helpers/#sec-iteratorprototype-@@tostringtag"},"ts":1670628984076,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$pMSQFNiU65dhKE1cvESBD_KlxlggD3KLeRsGixeUoqs"}
]