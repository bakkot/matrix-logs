[
{"content":{"body":"new question: should `Math.sum` do kahan summation","format":"org.matrix.custom.html","formatted_body":"new question: should <code>Math.sum</code> do kahan summation","msgtype":"m.text"},"ts":1685578294425,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$0TPuUHd6wDBpVvRFhbzDPvVu-dCtC3mrQOLbfclRZnE"},
{"content":{"body":"acceptable answers are \"yes\" and \"of course\"","msgtype":"m.text"},"ts":1685578302279,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$w6ZQBqALHbpmkrvw-Qy-ijupoYuBQEseIg17xl8Ik1I"},
{"content":{"body":"https://github.com/terser/terser/blob/master/test/compress/labels.js#L84-L104","msgtype":"m.text"},"ts":1685616637198,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$v0FcuXhdmkHmyYL_l68uXbug0F7BPAVmjzU1myJDaPM"},
{"content":{"body":"Does anyone know why? These two codes have the same observable semantics to me","msgtype":"m.text"},"ts":1685616674409,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$ZnNP4iO2DZup_BH7SU4K9uUJ7eWnGUfUrTwX2s3bzxE"},
{"content":{"body":"That could be changed","m.relates_to":{"event_id":"$ZnNP4iO2DZup_BH7SU4K9uUJ7eWnGUfUrTwX2s3bzxE","is_falling_back":true,"m.in_reply_to":{"event_id":"$ZnNP4iO2DZup_BH7SU4K9uUJ7eWnGUfUrTwX2s3bzxE"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1685630408579,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$d8tvApKG0flLTPqmPM60UfYflGLr24MdZ7VhOJNWJkc"},
{"content":{"body":"yes, but there's basically an unlimited number of variants of Kahan's that track an additional N compensation vars, so what should our N be for a reasonable precision/perf trade-off?","m.relates_to":{"event_id":"$w6ZQBqALHbpmkrvw-Qy-ijupoYuBQEseIg17xl8Ik1I","is_falling_back":true,"m.in_reply_to":{"event_id":"$w6ZQBqALHbpmkrvw-Qy-ijupoYuBQEseIg17xl8Ik1I"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1685634968537,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$md8a3H11B3mHMuFpeonIKmvWBm3nJyaDYHkj9yEXaco"},
{"content":{"body":"something like 3 is probably ideal","m.relates_to":{"event_id":"$w6ZQBqALHbpmkrvw-Qy-ijupoYuBQEseIg17xl8Ik1I","is_falling_back":true,"m.in_reply_to":{"event_id":"$md8a3H11B3mHMuFpeonIKmvWBm3nJyaDYHkj9yEXaco"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1685634981727,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$f4LwnVUel-CEdCsGYw2iBEvXOCOGpoQYcR2H-3nbuFY"},
{"content":{"body":"my vote is to just do whatever Python does","m.relates_to":{"event_id":"$w6ZQBqALHbpmkrvw-Qy-ijupoYuBQEseIg17xl8Ik1I","is_falling_back":true,"m.in_reply_to":{"event_id":"$f4LwnVUel-CEdCsGYw2iBEvXOCOGpoQYcR2H-3nbuFY"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1685635113101,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$YLoWlwzH5R46Ci4n8wI9e-8qA2uJfD4jh9Opi6-D0h0"},
{"content":{"body":"for fsum","m.relates_to":{"event_id":"$w6ZQBqALHbpmkrvw-Qy-ijupoYuBQEseIg17xl8Ik1I","is_falling_back":true,"m.in_reply_to":{"event_id":"$YLoWlwzH5R46Ci4n8wI9e-8qA2uJfD4jh9Opi6-D0h0"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1685635117311,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$OKnbS9Jun8tUzOkFqT2nD1BbcgBOkPSdMcS370t5fhM"},
{"content":{"body":"which appears to be... 32","m.relates_to":{"event_id":"$w6ZQBqALHbpmkrvw-Qy-ijupoYuBQEseIg17xl8Ik1I","is_falling_back":true,"m.in_reply_to":{"event_id":"$OKnbS9Jun8tUzOkFqT2nD1BbcgBOkPSdMcS370t5fhM"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1685635134142,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$3m69u_slBgBxWksHlcOioE9a_CsTN8d2_ChaUjWokRU"},
{"content":{"body":"https://github.com/python/cpython/blob/a241003d048f33c9072d47217aa6e28beb7ac54f/Modules/mathmodule.c#L1284","m.relates_to":{"event_id":"$w6ZQBqALHbpmkrvw-Qy-ijupoYuBQEseIg17xl8Ik1I","is_falling_back":true,"m.in_reply_to":{"event_id":"$3m69u_slBgBxWksHlcOioE9a_CsTN8d2_ChaUjWokRU"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1685635140357,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$MnfMA-lDinEAZewyNloIKtY3wFMTCSACClvy8x3Av3I"},
{"content":{"body":"32 might be overkill...","m.relates_to":{"event_id":"$w6ZQBqALHbpmkrvw-Qy-ijupoYuBQEseIg17xl8Ik1I","is_falling_back":true,"m.in_reply_to":{"event_id":"$MnfMA-lDinEAZewyNloIKtY3wFMTCSACClvy8x3Av3I"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1685635147394,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$qAVjKabedbuiElOXIfC_39aF1vuZWFZwneRiX_LqP6k"},
{"content":{"body":"holy crap, 32?!","m.relates_to":{"event_id":"$w6ZQBqALHbpmkrvw-Qy-ijupoYuBQEseIg17xl8Ik1I","is_falling_back":true,"m.in_reply_to":{"event_id":"$qAVjKabedbuiElOXIfC_39aF1vuZWFZwneRiX_LqP6k"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1685635225457,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$ILtHjMyHwtGXVbzwU1FYUY0pREWlXt40CFnI_TTINdM"},
{"content":{"body":"java uses just the basic (one partial) kahan if I'm reading this right https://github.com/openjdk/jdk/blob/e8271649e00771a8bbee240aa1bbbc27a672b22a/src/java.base/share/classes/java/util/stream/Collectors.java#L717","m.relates_to":{"event_id":"$w6ZQBqALHbpmkrvw-Qy-ijupoYuBQEseIg17xl8Ik1I","is_falling_back":true,"m.in_reply_to":{"event_id":"$ILtHjMyHwtGXVbzwU1FYUY0pREWlXt40CFnI_TTINdM"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1685635443406,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$DoFBSYOysqKOgATRmyEnrN7jry3vHexh6BiuPjA5mb4"},
{"content":{"body":"ok no python uses an unbounded number of partials","m.relates_to":{"event_id":"$w6ZQBqALHbpmkrvw-Qy-ijupoYuBQEseIg17xl8Ik1I","is_falling_back":true,"m.in_reply_to":{"event_id":"$DoFBSYOysqKOgATRmyEnrN7jry3vHexh6BiuPjA5mb4"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1685635686526,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$EwVoMzduO-poOkD2pb26IQTtuHsd8CzCOMkJW6a3xFw"},
{"content":{"body":"that's wild","m.relates_to":{"event_id":"$w6ZQBqALHbpmkrvw-Qy-ijupoYuBQEseIg17xl8Ik1I","is_falling_back":true,"m.in_reply_to":{"event_id":"$EwVoMzduO-poOkD2pb26IQTtuHsd8CzCOMkJW6a3xFw"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1685635689853,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$V-7tnG2319eyG11c3979hezpIVteFG_mPLmPhmk8n8o"},
{"content":{"body":"they do this so that it's actually correct","m.relates_to":{"event_id":"$w6ZQBqALHbpmkrvw-Qy-ijupoYuBQEseIg17xl8Ik1I","is_falling_back":true,"m.in_reply_to":{"event_id":"$V-7tnG2319eyG11c3979hezpIVteFG_mPLmPhmk8n8o"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1685635731352,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$IH5LCLlnRHeueseAI5SaDR0ce8vJZISb8NVe5m9CojI"},
{"content":{"body":"like, _actually_ correct, not just bounded error","format":"org.matrix.custom.html","formatted_body":"like, <em>actually</em> correct, not just bounded error","m.relates_to":{"event_id":"$w6ZQBqALHbpmkrvw-Qy-ijupoYuBQEseIg17xl8Ik1I","is_falling_back":true,"m.in_reply_to":{"event_id":"$IH5LCLlnRHeueseAI5SaDR0ce8vJZISb8NVe5m9CojI"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1685635738191,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$wETQAlsW0MLeJ6Ikt-L25DcTrLj-AYnJxPayDlz7sgA"},
{"content":{"body":"https://code.activestate.com/recipes/393090/","m.relates_to":{"event_id":"$w6ZQBqALHbpmkrvw-Qy-ijupoYuBQEseIg17xl8Ik1I","is_falling_back":true,"m.in_reply_to":{"event_id":"$wETQAlsW0MLeJ6Ikt-L25DcTrLj-AYnJxPayDlz7sgA"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1685635740089,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$oq9eN324R5xjcSp5yUhyP719iNVYCPSloLc1dPa2eoA"},
{"content":{"body":"while attractive I think that probably is in fact overkill","m.relates_to":{"event_id":"$w6ZQBqALHbpmkrvw-Qy-ijupoYuBQEseIg17xl8Ik1I","is_falling_back":true,"m.in_reply_to":{"event_id":"$oq9eN324R5xjcSp5yUhyP719iNVYCPSloLc1dPa2eoA"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1685635767422,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$iX5H_AU0z-wjrIh_14R6mFF9Uzo0EsDPzYoEUgYYTKw"},
{"content":{"body":"I mean, I'm up for it if implementers are","m.relates_to":{"event_id":"$w6ZQBqALHbpmkrvw-Qy-ijupoYuBQEseIg17xl8Ik1I","is_falling_back":true,"m.in_reply_to":{"event_id":"$iX5H_AU0z-wjrIh_14R6mFF9Uzo0EsDPzYoEUgYYTKw"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1685635805350,"senderName":"Michael Ficarra","senderId":"@michaelficarra:matrix.org","id":"$ub5KFprcKCTgKwuSM5fYzTWNCE5s0GZaJQINAk5csqo"}
]