[
{"content":{"body":"does anyone who actually knows how `Set`s are implement know if it is possible to use the internal data structure to efficiently implement something like \"order this list, which is a subset of the elements in some `Set`, according to the order the values in the list would be emitted when iterating the `Set`\"","format":"org.matrix.custom.html","formatted_body":"does anyone who actually knows how <code>Set</code>s are implement know if it is possible to use the internal data structure to efficiently implement something like &quot;order this list, which is a subset of the elements in some <code>Set</code>, according to the order the values in the list would be emitted when iterating the <code>Set</code>&quot;","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"does anyone who actually knows how `Set`s are implement know if it is possible to use the internal data structure to efficiently implement something like \"order this list, which is a subset of the elements in some `Set`, according to the order the values in the list would be emitted when iterating the `Set`\"","mimetype":"text/plain"},{"body":"does anyone who actually knows how <code>Set</code>s are implement know if it is possible to use the internal data structure to efficiently implement something like &quot;order this list, which is a subset of the elements in some <code>Set</code>, according to the order the values in the list would be emitted when iterating the <code>Set</code>&quot;","mimetype":"text/html"}]},"ts":1657561526060,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$p9FUHY2DB1VpO1FXbMsUoEbAPsiPyuk1WYntPo3EqKQ"},
{"content":{"body":"\"efficiently\" meaning something like \"with time proportional to the size of the list, not the size of the `Set`\"","format":"org.matrix.custom.html","formatted_body":"&quot;efficiently&quot; meaning something like &quot;with time proportional to the size of the list, not the size of the <code>Set</code>&quot;","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"\"efficiently\" meaning something like \"with time proportional to the size of the list, not the size of the `Set`\"","mimetype":"text/plain"},{"body":"&quot;efficiently&quot; meaning something like &quot;with time proportional to the size of the list, not the size of the <code>Set</code>&quot;","mimetype":"text/html"}]},"ts":1657561544922,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$VgkBD_9Q0Y8Qbf2PAhmbKBFH4qDpM8g7NgB9_vyFe9U"},
{"content":{"body":"I am guessing no but I have no idea what the actual implementation looks like","msgtype":"m.text","org.matrix.msc1767.text":"I am guessing no but I have no idea what the actual implementation looks like"},"ts":1657561556024,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$1t5qYDY2TtJP3PpHFusHQb0S2KMmucl62_3PLMlY3Pw"},
{"content":{"body":"what is the subset?","msgtype":"m.text","org.matrix.msc1767.text":"what is the subset?"},"ts":1657561808758,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$tKKAKh9YhxQyy6Pzd4b40WOdywA-aq-keAdBlyRpjMo"},
{"content":{"body":"uh","msgtype":"m.text","org.matrix.msc1767.text":"uh"},"ts":1657561922161,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$hv6t4q7fHXaEQ_XUpiJH4_1STAjJcI0gfuaPr8oVagk"},
{"content":{"body":"like it's some elements of a set","msgtype":"m.text","org.matrix.msc1767.text":"like it's some elements of a set"},"ts":1657561925789,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$uqUbfIUFrj5opWl2K4nAj5rzxvdscyCnwoGpYUML1Aw"},
{"content":{"body":"you have 1) a `Set` _x_ and 2) a list of some (but not necessarily all, and often much less than all) elements from _x_, which are not ordered according to the order in _x_","format":"org.matrix.custom.html","formatted_body":"you have 1) a <code>Set</code> <em>x</em> and 2) a list of some (but not necessarily all, and often much less than all) elements from <em>x</em>, which are not ordered according to the order in <em>x</em>","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"you have 1) a `Set` _x_ and 2) a list of some (but not necessarily all, and often much less than all) elements from _x_, which are not ordered according to the order in _x_","mimetype":"text/plain"},{"body":"you have 1) a <code>Set</code> <em>x</em> and 2) a list of some (but not necessarily all, and often much less than all) elements from <em>x</em>, which are not ordered according to the order in <em>x</em>","mimetype":"text/html"}]},"ts":1657561968802,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$Bxou7hQfbSQvTTuzpEUhWXRgYL-qZIIrJI2a3TDky5Y"},
{"content":{"body":" * you have 1) a `Set` _x_ and 2) a list of some elements from _x_, which are not ordered according to the order in _x_","format":"org.matrix.custom.html","formatted_body":" * you have 1) a <code>Set</code> <em>x</em> and 2) a list of some elements from <em>x</em>, which are not ordered according to the order in <em>x</em>","m.new_content":{"body":"you have 1) a `Set` _x_ and 2) a list of some elements from _x_, which are not ordered according to the order in _x_","format":"org.matrix.custom.html","formatted_body":"you have 1) a <code>Set</code> <em>x</em> and 2) a list of some elements from <em>x</em>, which are not ordered according to the order in <em>x</em>","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"you have 1) a `Set` _x_ and 2) a list of some elements from _x_, which are not ordered according to the order in _x_","mimetype":"text/plain"},{"body":"you have 1) a <code>Set</code> <em>x</em> and 2) a list of some elements from <em>x</em>, which are not ordered according to the order in <em>x</em>","mimetype":"text/html"}]},"m.relates_to":{"event_id":"$Bxou7hQfbSQvTTuzpEUhWXRgYL-qZIIrJI2a3TDky5Y","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":" * you have 1) a `Set` _x_ and 2) a list of some elements from _x_, which are not ordered according to the order in _x_","mimetype":"text/plain"},{"body":" * you have 1) a <code>Set</code> <em>x</em> and 2) a list of some elements from <em>x</em>, which are not ordered according to the order in <em>x</em>","mimetype":"text/html"}]},"ts":1657561979687,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$COM7-x2ShyKLC4nm2Afsoga67nORTVVO_RKkh5woaJc"},
{"content":{"body":"and you want to sort the list according to the order of the elements in _x_","format":"org.matrix.custom.html","formatted_body":"and you want to sort the list according to the order of the elements in <em>x</em>","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"and you want to sort the list according to the order of the elements in _x_","mimetype":"text/plain"},{"body":"and you want to sort the list according to the order of the elements in <em>x</em>","mimetype":"text/html"}]},"ts":1657562002530,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$1mZpzXpyYIPyPoXY_GzJeGhsXbeuyj8v2DBeFYeItng"},
{"content":{"body":" * you have 1) a `Set` _x_ and 2) a list of some (but not necessarily all, and often much less than all) elements from _x_, which are not ordered according to the order in _x_","format":"org.matrix.custom.html","formatted_body":" * you have 1) a <code>Set</code> <em>x</em> and 2) a list of some (but not necessarily all, and often much less than all) elements from <em>x</em>, which are not ordered according to the order in <em>x</em>","m.new_content":{"body":"you have 1) a `Set` _x_ and 2) a list of some (but not necessarily all, and often much less than all) elements from _x_, which are not ordered according to the order in _x_","format":"org.matrix.custom.html","formatted_body":"you have 1) a <code>Set</code> <em>x</em> and 2) a list of some (but not necessarily all, and often much less than all) elements from <em>x</em>, which are not ordered according to the order in <em>x</em>","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"you have 1) a `Set` _x_ and 2) a list of some (but not necessarily all, and often much less than all) elements from _x_, which are not ordered according to the order in _x_","mimetype":"text/plain"},{"body":"you have 1) a <code>Set</code> <em>x</em> and 2) a list of some (but not necessarily all, and often much less than all) elements from <em>x</em>, which are not ordered according to the order in <em>x</em>","mimetype":"text/html"}]},"m.relates_to":{"event_id":"$Bxou7hQfbSQvTTuzpEUhWXRgYL-qZIIrJI2a3TDky5Y","rel_type":"m.replace"},"msgtype":"m.text","org.matrix.msc1767.message":[{"body":" * you have 1) a `Set` _x_ and 2) a list of some (but not necessarily all, and often much less than all) elements from _x_, which are not ordered according to the order in _x_","mimetype":"text/plain"},{"body":" * you have 1) a <code>Set</code> <em>x</em> and 2) a list of some (but not necessarily all, and often much less than all) elements from <em>x</em>, which are not ordered according to the order in <em>x</em>","mimetype":"text/html"}]},"ts":1657562035962,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$COHZAf2GNn_VTP1Vz33uMPraDslGDTGKHk7-tygYn6k"},
{"content":{"body":"the list is spec-internal, to be clear, so there's no side effects or anything happening during the process","msgtype":"m.text","org.matrix.msc1767.text":"the list is spec-internal, to be clear, so there's no side effects or anything happening during the process"},"ts":1657562056489,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$iFkBfgK1aUFSQUiKriAvznwxtQy7TFBGq_mksyndKfo"},
{"content":{"body":"i do not understand the use case still, is there something concrete i can read?","msgtype":"m.text","org.matrix.msc1767.text":"i do not understand the use case still, is there something concrete i can read?"},"ts":1657562491788,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$cesipRHOogjhLO9xlLabN38q6cvxkiDe16cXQW8jE0w"},
{"content":{"body":"anyway maybe you can get some insight from https://wiki.mozilla.org/User:Jorend/Deterministic_hash_tables","msgtype":"m.text","org.matrix.msc1767.text":"anyway maybe you can get some insight from https://wiki.mozilla.org/User:Jorend/Deterministic_hash_tables"},"ts":1657562750398,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$XzvDEJuSrl3c2T2oTrMluSpXJcod1nI7htj7STnvM9o"},
{"content":{"body":"you don't understand the use case, or you don't understand the ask?","msgtype":"m.text","org.matrix.msc1767.text":"you don't understand the use case, or you don't understand the ask?"},"ts":1657562761058,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$P_JU8RikGEBS5gbGha6qJcHWQLeEJQpCtnfSIAaA5AM"},
{"content":{"body":"i don't understand the use case","msgtype":"m.text","org.matrix.msc1767.text":"i don't understand the use case"},"ts":1657562766100,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$X7DazI9N-ywRrziPJp09qdPvoCC8Z-oOEEFDiuTUyVk"},
{"content":{"body":"is the sublist static, always same size? is it dynamic?","msgtype":"m.text","org.matrix.msc1767.text":"is the sublist static, always same size? is it dynamic?"},"ts":1657562781695,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$N8bd9oq-7135CQDEzyaFYbfOqDwP_aym42ix8WwRdk0"},
{"content":{"body":"what determines membership in the sublist?","msgtype":"m.text","org.matrix.msc1767.text":"what determines membership in the sublist?"},"ts":1657562786119,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$1Y2ccslmN9VY881QBEZKErnvV8tnxQSOpn2XzImsQJA"},
{"content":{"body":"v8 continues to use roughly the same thing as described in jorendorff's wiki page there","msgtype":"m.text","org.matrix.msc1767.text":"v8 continues to use roughly the same thing as described in jorendorff's wiki page there"},"ts":1657562818195,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$qOLhMdKhFztRmJBFMvA6TuStKQ6_sfFjpo9AUSgt3QA"},
{"content":{"body":"insertion order is simply the ascending order of the Entry array","msgtype":"m.text","org.matrix.msc1767.text":"insertion order is simply the ascending order of the Entry array"},"ts":1657562836163,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$JYyO7BS4sfyNSUXlI0LEou1GWecVRXoQDmQ5Fy6VZqM"},
{"content":{"body":"the use case is to get consistent order for `Set.prototype.intersection` - depending on which of `this` vs `other` is larger, you might be iterating `this` or `other`, and it would be nice if the order of the resulting set did not depend on which set was being iterated.","format":"org.matrix.custom.html","formatted_body":"the use case is to get consistent order for <code>Set.prototype.intersection</code> - depending on which of <code>this</code> vs <code>other</code> is larger, you might be iterating <code>this</code> or <code>other</code>, and it would be nice if the order of the resulting set did not depend on which set was being iterated.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"the use case is to get consistent order for `Set.prototype.intersection` - depending on which of `this` vs `other` is larger, you might be iterating `this` or `other`, and it would be nice if the order of the resulting set did not depend on which set was being iterated.","mimetype":"text/plain"},{"body":"the use case is to get consistent order for <code>Set.prototype.intersection</code> - depending on which of <code>this</code> vs <code>other</code> is larger, you might be iterating <code>this</code> or <code>other</code>, and it would be nice if the order of the resulting set did not depend on which set was being iterated.","mimetype":"text/html"}]},"ts":1657562843997,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$VSOl_rt1zQ2ZWzNA7QhHAskHURmhn9RIvjEJPYqrsqA"},
{"content":{"body":"i see","msgtype":"m.text","org.matrix.msc1767.text":"i see"},"ts":1657562853150,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$ImWodRMN-RaX2vpjDLdd7AMOZqJQ0syx2VtHJ_2SjXQ"},
{"content":{"body":"and the obvious way to do that is to ensure the elements of the resulting set are ordered according to their order in `this`","format":"org.matrix.custom.html","formatted_body":"and the obvious way to do that is to ensure the elements of the resulting set are ordered according to their order in <code>this</code>","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"and the obvious way to do that is to ensure the elements of the resulting set are ordered according to their order in `this`","mimetype":"text/plain"},{"body":"and the obvious way to do that is to ensure the elements of the resulting set are ordered according to their order in <code>this</code>","mimetype":"text/html"}]},"ts":1657562876146,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$aFPOZTKPmt1G7yF1PdxL9ppEC5SJlxO_AoFk3-c1Hwo"},
{"content":{"body":"but if `this` is much larger than `other`, and performing said ordering takes time proportional to the size of `this` even when the intersection is small, that's bad","format":"org.matrix.custom.html","formatted_body":"but if <code>this</code> is much larger than <code>other</code>, and performing said ordering takes time proportional to the size of <code>this</code> even when the intersection is small, that's bad","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"but if `this` is much larger than `other`, and performing said ordering takes time proportional to the size of `this` even when the intersection is small, that's bad","mimetype":"text/plain"},{"body":"but if <code>this</code> is much larger than <code>other</code>, and performing said ordering takes time proportional to the size of <code>this</code> even when the intersection is small, that's bad","mimetype":"text/html"}]},"ts":1657562911638,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$aweUJxtnOjqdezXPUDePmDqQa2McswvnHoqEYUWTd7w"},
{"content":{"body":"you have two total orders, but how do you compose them into another total order?","msgtype":"m.text","org.matrix.msc1767.text":"you have two total orders, but how do you compose them into another total order?"},"ts":1657562932064,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$E9sk5gt6XD0lvE0IDXSAMWf6gMsFj1Zkxe06eNL2tBw"},
{"content":{"body":"for intersection in particular, you don't need to","msgtype":"m.text","org.matrix.msc1767.text":"for intersection in particular, you don't need to"},"ts":1657562942128,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$B5hzITMXtOtklgyKAi3nDVKzxcAYozZBuOtRB8yhACA"},
{"content":{"body":"ah it's intersection, right i see","msgtype":"m.text","org.matrix.msc1767.text":"ah it's intersection, right i see"},"ts":1657562951203,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$5UvAv0uNlrFb928bO8EnE_99d_haC1g7S5a35HmheZ0"},
{"content":{"body":"okay, i understand the use case now","msgtype":"m.text","org.matrix.msc1767.text":"okay, i understand the use case now"},"ts":1657562968528,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$8PNfAp6dso5I1AnZiBplHVbQhLLEERf1_TWzpcNObyA"},
{"content":{"body":"i have no idea how you do this efficiently in the current implementations of Set","msgtype":"m.text","org.matrix.msc1767.text":"i have no idea how you do this efficiently in the current implementations of Set"},"ts":1657562986140,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$05l2zF-8j8cgr3TH1ZBQH1t4Y_v5nAe__NUIynGbhPo"}
]