[
{"content":{"body":"> <@kriskowal:matrix.org> And of course code splitting and tree shaking are both ESM native solutions in the same space. I’m a fan of linear progressive bundles: where the bundle has disjoint sub-bundles from a sequence of entrypoints.\n\ntreeshaking works just fine for CJS as well - identically well as for ESM - but the only implementation I’m aware of is for browserify; the others haven’t bothered.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!RkpmGMjJtqLKXzByOT%3Amatrix.org/%24Vc6P157MCBC6LSknmMPwPZZATeXoUZ2wBbcoiBmJUnc\">In reply to</a> <a href=\"https://matrix.to/#/@kriskowal:matrix.org\">@kriskowal:matrix.org</a><br>And of course code splitting and tree shaking are both ESM native solutions in the same space. I’m a fan of linear progressive bundles: where the bundle has disjoint sub-bundles from a sequence of entrypoints.</blockquote></mx-reply>treeshaking works just fine for CJS as well - identically well as for ESM - but the only implementation I’m aware of is for browserify; the others haven’t bothered.","m.relates_to":{"m.in_reply_to":{"event_id":"$Vc6P157MCBC6LSknmMPwPZZATeXoUZ2wBbcoiBmJUnc"}},"msgtype":"m.text"},"ts":1659259532785,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$Ah89hxOvWAIFeECLnoq8BqrP0f_vgAsoM6QSOdNK5sY"},
{"content":{"body":"> <@ljharb:matrix.org> treeshaking works just fine for CJS as well - identically well as for ESM - but the only implementation I’m aware of is for browserify; the others haven’t bothered.\n\nWe tried to use it at MetaMask and it was not effective. @kumavis started one with a different approach to eliminating unused exports. ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!RkpmGMjJtqLKXzByOT:matrix.org/$Ah89hxOvWAIFeECLnoq8BqrP0f_vgAsoM6QSOdNK5sY?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@ljharb:matrix.org\">@ljharb:matrix.org</a><br />treeshaking works just fine for CJS as well - identically well as for ESM - but the only implementation I’m aware of is for browserify; the others haven’t bothered.</blockquote></mx-reply>We tried to use it at MetaMask and it was not effective. @kumavis started one with a different approach to eliminating unused exports.","m.relates_to":{"m.in_reply_to":{"event_id":"$Ah89hxOvWAIFeECLnoq8BqrP0f_vgAsoM6QSOdNK5sY"}},"msgtype":"m.text"},"ts":1659259711515,"senderName":"naugtur","senderId":"@naugtur:matrix.org","id":"$5cbRTkIBlknINLYJp0aYTBlrUtnkYgiSZSn0qCmgXCE"},
{"content":{"body":"that’s good to know; I’m still not convinced tho since none of the bundlers have seemingly tried.","msgtype":"m.text"},"ts":1659259767639,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$jzq7V6Acejko7z8aRfT2XvGM0Ko-R7ZHc2vFpB9TDXU"},
{"content":{"body":"For now there's no cjs treeshaking we could get to work and provide noticable results ","msgtype":"m.text"},"ts":1659259772272,"senderName":"naugtur","senderId":"@naugtur:matrix.org","id":"$jbPwm2A9TSzZsQZC2OxtljoqtOIXKOMPJY9PBxOQrUk"},
{"content":{"body":"to be fair ESM treeshaking doesn’t work that well either","msgtype":"m.text"},"ts":1659259781042,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$u1n3bftx5udOuyCcXiounqPkb9R_IZ3ATTz4MkzBJFA"},
{"content":{"body":"at Coinbase, we banned re-exporting in favor of deep importing and the RN app’s size dropped like 20% instantly","msgtype":"m.text"},"ts":1659259798933,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$s-zCYADqBI-zazFPX0E-Erkwr-cWZet5VC94V2fCVvQ"}
]