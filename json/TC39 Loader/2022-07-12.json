[
{"content":{"body":"where is the module instance cache stored? ExecutionContext? Realm?\n\n```js\nconst mod = module { console.log('run') }\nconst mod2 = static module { import 'mod' }\n\nawait import(new Module(mod2, async () => mod), {})\nawait import(new ExecutionContext.Module(mod2, async () => mod, {}))\n```","format":"org.matrix.custom.html","formatted_body":"<p>where is the module instance cache stored? ExecutionContext? Realm?</p>\n<pre><code class=\"language-js\">const mod = module { console.log('run') }\nconst mod2 = static module { import 'mod' }\n\nawait import(new Module(mod2, async () =&gt; mod), {})\nawait import(new ExecutionContext.Module(mod2, async () =&gt; mod, {}))\n</code></pre>\n","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"where is the module instance cache stored? ExecutionContext? Realm?\n\n```js\nconst mod = module { console.log('run') }\nconst mod2 = static module { import 'mod' }\n\nawait import(new Module(mod2, async () => mod), {})\nawait import(new ExecutionContext.Module(mod2, async () => mod, {}))\n```","mimetype":"text/plain"},{"body":"<p>where is the module instance cache stored? ExecutionContext? Realm?</p>\n<pre><code class=\"language-js\">const mod = module { console.log('run') }\nconst mod2 = static module { import 'mod' }\n\nawait import(new Module(mod2, async () =&gt; mod), {})\nawait import(new ExecutionContext.Module(mod2, async () =&gt; mod, {}))\n</code></pre>\n","mimetype":"text/html"}]},"ts":1657604825201,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$nCdXfTUUtMiuXVc0j3wdQaR-dIMtyghODKS1gu71upc"},
{"content":{"body":"how many time `mod` is executed?","format":"org.matrix.custom.html","formatted_body":"how many time <code>mod</code> is executed?","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"how many time `mod` is executed?","mimetype":"text/plain"},{"body":"how many time <code>mod</code> is executed?","mimetype":"text/html"}]},"ts":1657604835269,"senderName":"Jack Works","senderId":"@jackworks:matrix.org","id":"$w6ylYEFiBtG2mci3FZeODzRVH_K5KSgD6i0kqqYcdgQ"},
{"content":{"body":"I would expect it to only be executed once in the original execution context (the one where the module block expression was evaluated).","msgtype":"m.text"},"ts":1657608119001,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$MB4zm90xY4zHragZZxC5EFOkCbtpiX_wk8rcwLYy-qE"},
{"content":{"body":"The cache could be a [[ModuleRecord]] internal slot on the Module object ","msgtype":"m.text"},"ts":1657608146208,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$mmVOb6CNdnBhGibjLTdy_u7XLlktjq5mpSdIqtDclDs"}
]