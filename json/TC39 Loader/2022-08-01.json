[
{"content":{"body":"When I need to create a mental model of something, it helps to recreate it in a medium I can look at all at once. So I did:\nhttps://gist.github.com/naugtur/daf2aaf415e03e6c3ae5030e06f7b20e\nThis is an attempt to visualize the change in Layer 0 refactoring. \n","msgtype":"m.text","org.matrix.msc1767.text":"When I need to create a mental model of something, it helps to recreate it in a medium I can look at all at once. So I did:\nhttps://gist.github.com/naugtur/daf2aaf415e03e6c3ae5030e06f7b20e\nThis is an attempt to visualize the change in Layer 0 refactoring. \n"},"ts":1659355345570,"senderName":"naugtur","senderId":"@naugtur:matrix.org","id":"$YLRLzcTTLIXPa9KbZaJoa6gmFLjVVRjFrLNUuqPS7ng"},
{"content":{"body":"Having done that, I compared with something I tried to model earlier.\n\nI compared the Layer0 refactor with the old refactor writeup from Mark Miller (https://github.com/erights/tc39pr-refactor-ModuleRecord) and the most significant difference is:\n```\nWe separate into a distinct ModuleInitialization object the bookkeeping needed to guide module instantiation, linking, initialization, etc. Thus, once the initialization process completes, this bookkeeping state is no longer present. This helps us reason about post-initialization state separately.\n```\nWhich was introduced to make CyclicModuleRecord cleaner. I think it could also remove the need for bidirectional reference between Module and SourceTextModuleRecord if introduced to Layer 0 refactor. ","format":"org.matrix.custom.html","formatted_body":"<p>Having done that, I compared with something I tried to model earlier.</p>\n<p>I compared the Layer0 refactor with the old refactor writeup from Mark Miller (https://github.com/erights/tc39pr-refactor-ModuleRecord) and the most significant difference is:</p>\n<pre><code>We separate into a distinct ModuleInitialization object the bookkeeping needed to guide module instantiation, linking, initialization, etc. Thus, once the initialization process completes, this bookkeeping state is no longer present. This helps us reason about post-initialization state separately.\n</code></pre>\n<p>Which was introduced to make CyclicModuleRecord cleaner. I think it could also remove the need for bidirectional reference between Module and SourceTextModuleRecord if introduced to Layer 0 refactor.</p>\n","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"Having done that, I compared with something I tried to model earlier.\n\nI compared the Layer0 refactor with the old refactor writeup from Mark Miller (https://github.com/erights/tc39pr-refactor-ModuleRecord) and the most significant difference is:\n```\nWe separate into a distinct ModuleInitialization object the bookkeeping needed to guide module instantiation, linking, initialization, etc. Thus, once the initialization process completes, this bookkeeping state is no longer present. This helps us reason about post-initialization state separately.\n```\nWhich was introduced to make CyclicModuleRecord cleaner. I think it could also remove the need for bidirectional reference between Module and SourceTextModuleRecord if introduced to Layer 0 refactor. ","mimetype":"text/plain"},{"body":"<p>Having done that, I compared with something I tried to model earlier.</p>\n<p>I compared the Layer0 refactor with the old refactor writeup from Mark Miller (https://github.com/erights/tc39pr-refactor-ModuleRecord) and the most significant difference is:</p>\n<pre><code>We separate into a distinct ModuleInitialization object the bookkeeping needed to guide module instantiation, linking, initialization, etc. Thus, once the initialization process completes, this bookkeeping state is no longer present. This helps us reason about post-initialization state separately.\n</code></pre>\n<p>Which was introduced to make CyclicModuleRecord cleaner. I think it could also remove the need for bidirectional reference between Module and SourceTextModuleRecord if introduced to Layer 0 refactor.</p>\n","mimetype":"text/html"}]},"ts":1659355435644,"senderName":"naugtur","senderId":"@naugtur:matrix.org","id":"$4mSioK8LDh95Q2BJzhdGq-n8MuN7d2ZWn-LgS3vuh4E"}
]