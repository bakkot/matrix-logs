[
{"content":{"body":"That in turn is important because one of the things you can do with a module source is relocate it, e.g., from the file system to a bundle, or a zip file.","msgtype":"m.text","org.matrix.msc1767.text":"That in turn is important because one of the things you can do with a module source is relocate it, e.g., from the file system to a bundle, or a zip file."},"ts":1658188865941,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$2x3DJvlKan1uwZxpAgnowgLBTlZFuFB1zKpr0Jx5oHo"},
{"content":{"body":"Oh I see","msgtype":"m.text"},"ts":1658188877480,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$N0c5ygeJNYbQQW1bEdHe30C09_VnxKMkT17SEtGQLsw"},
{"content":{"body":"In which case the `import.meta.url` is not applicable.","format":"org.matrix.custom.html","formatted_body":"In which case the <code>import.meta.url</code> is not applicable.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"In which case the `import.meta.url` is not applicable.","mimetype":"text/plain"},{"body":"In which case the <code>import.meta.url</code> is not applicable.","mimetype":"text/html"}]},"ts":1658188882478,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$fnmq18RnikxiDgUijkQG_4cvwqvJjJ7BvQPQ3_iN-CQ"},
{"content":{"body":"And this is supposed to be the resolved specifier?","msgtype":"m.text"},"ts":1658188896306,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$h5oPz6VoHgmD2qbup6heSids2iYmDxi87l-oSXP7OHE"},
{"content":{"body":"Not a relative one","msgtype":"m.text"},"ts":1658188901119,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$x_7b3jK42LU33sKgd77s-StUVWjA8GggwG5ysrWulSY"},
{"content":{"body":"Yeah, referrers need to be fully resolved. What that means can vary as well.","msgtype":"m.text","org.matrix.msc1767.text":"Yeah, referrers need to be fully resolved. What that means can vary as well."},"ts":1658188917070,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$skC60N1ViiDhZ4zoiA7cm0iogwZZz_gLRZ9UxBAvITY"},
{"content":{"body":"e.g., if you have an `importHook` per scope, `./src/main.js` is a very reasonable fully-resolved specifier, where `./` just distinguishes a module in scope from one that’s from another scope.","format":"org.matrix.custom.html","formatted_body":"e.g., if you have an <code>importHook</code> per scope, <code>./src/main.js</code> is a very reasonable fully-resolved specifier, where <code>./</code> just distinguishes a module in scope from one that’s from another scope.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"e.g., if you have an `importHook` per scope, `./src/main.js` is a very reasonable fully-resolved specifier, where `./` just distinguishes a module in scope from one that’s from another scope.","mimetype":"text/plain"},{"body":"e.g., if you have an <code>importHook</code> per scope, <code>./src/main.js</code> is a very reasonable fully-resolved specifier, where <code>./</code> just distinguishes a module in scope from one that’s from another scope.","mimetype":"text/html"}]},"ts":1658188962776,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$UIBgBi-S6o0A2sgRqHc0vj7ze9sKFKnzLKxKlcaQ8YU"},
{"content":{"body":"OK, then I agree that this is orthogonal. Then, WebAssembly.Module needs a referrer as well as host data","msgtype":"m.text"},"ts":1658188983942,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$gaLTSaQiPP20WzjW05I6c6LsXH29lzCFZ49mV2M-ehY"},
{"content":{"body":"Since, when used in import, it needs to resolve relative references ","format":"org.matrix.custom.html","formatted_body":"Since, when used in import, it needs to resolve relative references","msgtype":"m.text"},"ts":1658189020442,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$B5aSogZbd2Nxw_S_2vpQIHMj7NHNPjsIr2AISYxZTl0"},
{"content":{"body":"My position remains that `Module` needs a referrer and import reflection can produce a `Module` that contains a `WebAssembly.Module` as its source.","format":"org.matrix.custom.html","formatted_body":"My position remains that <code>Module</code> needs a referrer and import reflection can produce a <code>Module</code> that contains a <code>WebAssembly.Module</code> as its source.","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"My position remains that `Module` needs a referrer and import reflection can produce a `Module` that contains a `WebAssembly.Module` as its source.","mimetype":"text/plain"},{"body":"My position remains that <code>Module</code> needs a referrer and import reflection can produce a <code>Module</code> that contains a <code>WebAssembly.Module</code> as its source.","mimetype":"text/html"}]},"ts":1658189021867,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$5TZpA7Lx8AIvv6eh75AxffEeyzo9py0mwSH0jnrv9yM"},
{"content":{"body":"That would mean that it can’t be multiply instantiated, going against one of the core goals","msgtype":"m.text"},"ts":1658189049842,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$wL--BUbOlsiDjCnvKnJMRJSnBzlsPwZquROCtR8D_oU"},
{"content":{"body":"It can be multiply instantiated.","msgtype":"m.text","org.matrix.msc1767.text":"It can be multiply instantiated."},"ts":1658189067247,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$eLmsrb4JV4NC8Jmt8YTJ5-WgKnvPuEMzIwO8qAd_2Ms"},
{"content":{"body":"That goal is higher priority than my import() one","msgtype":"m.text"},"ts":1658189067808,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$mlMMM-5Rk_M6-3iKANoj11XqC0RbJHqesOwKbK1EEQk"},
{"content":{"body":"How can a Module be multiply instantiated?","msgtype":"m.text"},"ts":1658189080182,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$rnbXtCNTk_lbIEQpYW5DU5Nklr2_2WTBopztc_xAMJ8"},
{"content":{"body":"`await import(new Module(module.source, module.referrer, etc.))`","format":"org.matrix.custom.html","formatted_body":"<code>await import(new Module(module.source, module.referrer, etc.))</code>","msgtype":"m.text","org.matrix.msc1767.message":[{"body":"`await import(new Module(module.source, module.referrer, etc.))`","mimetype":"text/plain"},{"body":"<code>await import(new Module(module.source, module.referrer, etc.))</code>","mimetype":"text/html"}]},"ts":1658189102764,"senderName":"Kris Kowal","senderId":"@kriskowal:matrix.org","id":"$UXTPl0TsqvP67WYsitXWGPdgb_WHIyZA-xDytSAQNmM"}
]