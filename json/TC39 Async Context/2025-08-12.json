[
{"content":{"body":"The hope would be that it the active span is the one that actually closed the dialog that triggered the after() promise to resolve (and thus the callback to run).  But since it's a `Promise`, we lose that context and (per every version of the spec we've considered) end up in the registration context that called `then()`.","format":"org.matrix.custom.html","formatted_body":"The hope would be that it the active span is the one that actually closed the dialog that triggered the after() promise to resolve (and thus the callback to run).  But since it's a <code>Promise</code>, we lose that context and (per every version of the spec we've considered) end up in the registration context that called <code>then()</code>.","m.mentions":{},"msgtype":"m.text"},"ts":1754960948579,"senderName":"Steve Hicks","senderId":"@stephenhicks:matrix.org","id":"$NepRs5JG1CB74GWeFsTfiycAsjCCihfauQ91R7EMQVQ"}
]