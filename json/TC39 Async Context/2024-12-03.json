[
{"content":{"body":"> <@nicolo-ribaudo:matrix.org> In Node.js I still see significant usage of `.run`, even if there is `.enterWith` (!!! this is not backed up by data, just by me looking at `.enterWith` usage patterns a month ago)\n\nBecause the original design of enterWith was quite broken. It’s better at this point, but still not recommended unless you know what you’re doing because it doesn’t work quite the way people seem to expect in some cases.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!eQuZUAhGqudVFPodUG%3Amatrix.org/%24BjKjhEzCugOXKcSOXM32ComQ74D1JMCQMdzYxBT_lIM\">In reply to</a> <a href=\"https://matrix.to/#/@nicolo-ribaudo:matrix.org\">@nicolo-ribaudo:matrix.org</a><br>In Node.js I still see significant usage of <code>.run</code>, even if there is <code>.enterWith</code> (!!! this is not backed up by data, just by me looking at <code>.enterWith</code> usage patterns a month ago)</blockquote></mx-reply>Because the original design of enterWith was quite broken. It’s better at this point, but still not recommended unless you know what you’re doing because it doesn’t work quite the way people seem to expect in some cases.","m.relates_to":{"m.in_reply_to":{"event_id":"$BjKjhEzCugOXKcSOXM32ComQ74D1JMCQMdzYxBT_lIM"}},"msgtype":"m.text"},"ts":1733230159617,"senderName":"Stephen Belanger","senderId":"@stephenbelanger:matrix.org","id":"$sPBuE-8FJwJ9AdhNCSlneB5pe3ciXmbIkB64SksXxxE"},
{"content":{"body":"> <@stephenbelanger:matrix.org> Because the original design of enterWith was quite broken. It’s better at this point, but still not recommended unless you know what you’re doing because it doesn’t work quite the way people seem to expect in some cases.\n\nIn nearly every case where I've seen `enterWith(...)` used it really wasn't necessary. A `.run(...)` would have worked just as well. It's one of those things that folks will use because it's available not really because it is the best tool for the job","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!eQuZUAhGqudVFPodUG:matrix.org/$sPBuE-8FJwJ9AdhNCSlneB5pe3ciXmbIkB64SksXxxE?via=igalia.com&via=matrix.org&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@stephenbelanger:matrix.org\">@stephenbelanger:matrix.org</a><br>Because the original design of enterWith was quite broken. It’s better at this point, but still not recommended unless you know what you’re doing because it doesn’t work quite the way people seem to expect in some cases.</blockquote></mx-reply>In nearly every case where I've seen <code>enterWith(...)</code> used it really wasn't necessary. A <code>.run(...)</code> would have worked just as well. It's one of those things that folks will use because it's available not really because it is the best tool for the job","m.mentions":{"user_ids":["@stephenbelanger:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$sPBuE-8FJwJ9AdhNCSlneB5pe3ciXmbIkB64SksXxxE"}},"msgtype":"m.text"},"ts":1733239641446,"senderName":"James M Snell","senderId":"@jasnell:matrix.org","id":"$AqhBGQ9e5xbSSeJnxbs_JM7bYCsVO27tnQc4ND58C0g"},
{"content":{"body":"It’s necessary for APMs, unless they have a sufficient diagnostics_channel with runStores to provide a scope. At the time of its creation we needed it to be able to put http requests into a tracing scope without a closure that we could not provide without patching. It mainly existed to avoid costly closures which were a major performance cost to APMs which gave them non-viable overhead for a lot of customers. As async/await became more of a thing though their value resurged—async/await syntax really needs set semantics for context storage to play nice with it.","msgtype":"m.text"},"ts":1733265945089,"senderName":"Stephen Belanger","senderId":"@stephenbelanger:matrix.org","id":"$N36o_9yeB0C-zyat8yfFw6LYllL5RfVpb4NC-m6Zqao"}
]