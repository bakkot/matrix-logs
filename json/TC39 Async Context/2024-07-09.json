[
{"content":{"body":"> <@jridgewell:matrix.org> Component functiosn aren’t executed recusively, they’re pushed into a stack to be processed later on. When you return the `<Ctx.Provider value=…><Foo /></Ctx.Provider>` VDOM, that `Foo` component won’t be executed within the sync execution of `Ctx.Provider`. If `Foo` were to `useContext(Ctx)`, that would be tracked as part of the component’s internal state (which itself is stored in a AC), it woulnd’t store the context on its own AC variable.\n\nI don’t get it; isn’t this what AsyncContext.Snapshot is for?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!eQuZUAhGqudVFPodUG%3Amatrix.org/%24o1WzWmZCArZwFp__2F_5CJZbf1ZPjiVOBMF-4ZUkpbM\">In reply to</a> <a href=\"https://matrix.to/#/@jridgewell:matrix.org\">@jridgewell:matrix.org</a><br>Component functiosn aren’t executed recusively, they’re pushed into a stack to be processed later on. When you return the <code data-md=\"`\">&lt;Ctx.Provider value=…&gt;&lt;Foo /&gt;&lt;/Ctx.Provider&gt;</code> VDOM, that <code data-md=\"`\">Foo</code> component won’t be executed within the sync execution of <code data-md=\"`\">Ctx.Provider</code>. If <code data-md=\"`\">Foo</code> were to <code data-md=\"`\">useContext(Ctx)</code>, that would be tracked as part of the component’s internal state (which itself is stored in a AC), it woulnd’t store the context on its own AC variable.</blockquote></mx-reply>I don’t get it; isn’t this what AsyncContext.Snapshot is for?","m.relates_to":{"m.in_reply_to":{"event_id":"$o1WzWmZCArZwFp__2F_5CJZbf1ZPjiVOBMF-4ZUkpbM"}},"msgtype":"m.text"},"ts":1720509676417,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$bIZZzqlxwDWESpvur9qv8VrUNWjLyMx2rB0yHb-ndQ4"},
{"content":{"body":"I thought, in the server, an AsyncContext variable for the hooks state","msgtype":"m.text"},"ts":1720509734315,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$hND1AJoLiGcgq9IgIiZD8NqafLQUIgVVf8BkCzz-9F0"},
{"content":{"body":"In general, I think conceptually, React Context is doing the same thing as AsyncContext. It just depends on the framework saving and restoring snapshots all over the place ","format":"org.matrix.custom.html","formatted_body":"In general, I think conceptually, React Context is doing the same thing as AsyncContext. It just depends on the framework saving and restoring snapshots all over the place","msgtype":"m.text"},"ts":1720510077138,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$TvlHzqiGiag5bQe9XxNNP4jytOR6M6n4u8w6DXqxsC8"},
{"content":{"body":"This is an important question because if we wanted to use AsyncContext variables for other things, like having an ambient AbortSignal, we would be depending on frameworks doing this snapshotting. Otherwise it wouldn’t work.","msgtype":"m.text"},"ts":1720510234410,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$4lJfVmkISVxC6_u_J7kuakkmi1Scbfj2ZPSKPgp61vw"},
{"content":{"body":"right, this is basically \"the ecosystem adoption problem\".","m.mentions":{},"msgtype":"m.text"},"ts":1720540853115,"senderName":"Steve Hicks","senderId":"@stephenhicks:matrix.org","id":"$v0I8Z4pqqdYFeP5lF4TSDU4SkFqEHzvUamkyWdYkLb4"},
{"content":{"body":"We are on the call now","m.mentions":{},"msgtype":"m.text"},"ts":1720541014894,"senderName":"Chengzhong Wu","senderId":"@legendecas:matrix.org","id":"$MAO95GqnUOthtk_3qqM008zhcuYbw7iz5CT-69ej1rg"},
{"content":{"body":"How did the call go? I am having some trouble understanding the strength of the requirement that Matteo and Stephen were talking about in the notes","msgtype":"m.text"},"ts":1720545791769,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$p4DMzTDOTa5kKww6UP7qq8-3wR0Ukawg7xeRqTbedHE"},
{"content":{"body":"I couldn’t really understand why taking a callback as a parameter wouldn’t work for those cases","msgtype":"m.text"},"ts":1720545824968,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$MtFDWiCD8nCXnsQTjXlDLP0r06H9w_WJaAnqP8mzNLk"},
{"content":{"body":"Sorry I missed it","msgtype":"m.text"},"ts":1720545830541,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$d78ygk7PfeA4tCgQNUqfYwDHYKvL4YT6OhA77TzKOpQ"},
{"content":{"body":"it's not that it wouldn't work, but that it wouldn't be idiomatic, or it'd take a lot more boilerplate than the alternative","m.mentions":{},"msgtype":"m.text"},"ts":1720545912349,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$0-jybcdwgR__O_CvsVz_yC2BJrOcjRbl1kPsFHqiCp4"},
{"content":{"body":"I actually don’t understand what is being asked for. How broad should the .set take effect?","msgtype":"m.text"},"ts":1720545915732,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$t2p_eVLaK4l4r_NKkUu6gZv_lGuo90TGJ-zqFhDCLLk"},
{"content":{"body":"for tests, if you have set/enterWith, you could set the context in `beforeEach`","format":"org.matrix.custom.html","formatted_body":"for tests, if you have set/enterWith, you could set the context in <code>beforeEach</code>","m.mentions":{},"msgtype":"m.text"},"ts":1720545928600,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$ptC8b5LtMJaSISd4lLef-KEGx9EWcEawuhlk6kICRv8"}
]