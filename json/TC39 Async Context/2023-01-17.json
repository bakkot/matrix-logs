[
{"content":{"org.matrix.msc1767.text":"FYI:  https://twitter.com/jarredsumner/status/1614646182269313025","body":"FYI:  https://twitter.com/jarredsumner/status/1614646182269313025","msgtype":"m.text"},"ts":1673942160990,"senderName":"Rob Palmer","senderId":"@robpalme:matrix.org","id":"$ImiCssyabWwXksqcUXbJS-K1vtC7NqDxTV-ZWIax7pU"},
{"content":{"org.matrix.msc1767.text":"native AsyncContext should be more efficient than AsyncLocalStorage because it hooks into the microtask queue in a less flexible way (just storing a pointer, rather than calling a callback","body":"native AsyncContext should be more efficient than AsyncLocalStorage because it hooks into the microtask queue in a less flexible way (just storing a pointer, rather than calling a callback","msgtype":"m.text"},"ts":1673989132969,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$sB5LHqFg7tpfevVX4H1nQ_hdgFr1_9DQIF5OUwT4bCY"},
{"content":{"org.matrix.msc1767.message":[{"body":"> <@legendecas:matrix.org> Is Yoav active on matrix? Seems like Yoav didn't send messages in the room.\n\nIt might work better to send a small group message (since this room has too much traffic), or otherwise we could shift to email. I've talked to him on Matrix before.","mimetype":"text/plain"},{"body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!siOjSOrhCVYVzIoThy:matrix.org/$eTOMw36oQfENbs8RBqDtfk9hNA8n5wW_822CKwv_wjM?via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@legendecas:matrix.org\">@legendecas:matrix.org</a><br>Is Yoav active on matrix? Seems like Yoav didn't send messages in the room.</blockquote></mx-reply>It might work better to send a small group message (since this room has too much traffic), or otherwise we could shift to email. I've talked to him on Matrix before.","mimetype":"text/html"}],"body":"> <@legendecas:matrix.org> Is Yoav active on matrix? Seems like Yoav didn't send messages in the room.\n\nIt might work better to send a small group message (since this room has too much traffic), or otherwise we could shift to email. I've talked to him on Matrix before.","msgtype":"m.text","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!siOjSOrhCVYVzIoThy:matrix.org/$eTOMw36oQfENbs8RBqDtfk9hNA8n5wW_822CKwv_wjM?via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@legendecas:matrix.org\">@legendecas:matrix.org</a><br>Is Yoav active on matrix? Seems like Yoav didn't send messages in the room.</blockquote></mx-reply>It might work better to send a small group message (since this room has too much traffic), or otherwise we could shift to email. I've talked to him on Matrix before.","m.relates_to":{"m.in_reply_to":{"event_id":"$eTOMw36oQfENbs8RBqDtfk9hNA8n5wW_822CKwv_wjM"}}},"ts":1673989171842,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$FU_o0rfkxwzA6pIB5pi9P5WdbyoTHafASoYQuLQsIgs"},
{"content":{"org.matrix.msc1767.text":"The implementation of ALS that we have in workers now is quite a bit more efficient than Node.js' but still has a fairly sizable cost due to the way promise hooks are implement","body":"The implementation of ALS that we have in workers now is quite a bit more efficient than Node.js' but still has a fairly sizable cost due to the way promise hooks are implement","msgtype":"m.text"},"ts":1673995045500,"senderName":"James M Snell","senderId":"@jasnell:matrix.org","id":"$DuA7WOWXH4MeX1IOjTVGpb6T-AFDhWlqbKYBry35osM"},
{"content":{"org.matrix.msc1767.message":[{"body":"Specifically, not only do we have to handle the promise hook for init, pre and post callback, and resolve, for every promise we have to allocate an object to store as a private field since v8 does not give us any mechanism for storing additional context on the `Promise` object (i.e. we can't dedicate an aligned internal fields to use)","mimetype":"text/plain"},{"body":"Specifically, not only do we have to handle the promise hook for init, pre and post callback, and resolve, for every promise we have to allocate an object to store as a private field since v8 does not give us any mechanism for storing additional context on the <code>Promise</code> object (i.e. we can't dedicate an aligned internal fields to use)","mimetype":"text/html"}],"body":"Specifically, not only do we have to handle the promise hook for init, pre and post callback, and resolve, for every promise we have to allocate an object to store as a private field since v8 does not give us any mechanism for storing additional context on the `Promise` object (i.e. we can't dedicate an aligned internal fields to use)","msgtype":"m.text","format":"org.matrix.custom.html","formatted_body":"Specifically, not only do we have to handle the promise hook for init, pre and post callback, and resolve, for every promise we have to allocate an object to store as a private field since v8 does not give us any mechanism for storing additional context on the <code>Promise</code> object (i.e. we can't dedicate an aligned internal fields to use)"},"ts":1673995147312,"senderName":"James M Snell","senderId":"@jasnell:matrix.org","id":"$l-3vYS-7ETrnL73xP2bDaLgtM3gpQznqsgLgxvlibkk"},
{"content":{"org.matrix.msc1767.text":"For each Promise, the object we allocate is a opaque wrapper around a ref to the ref-counted \"async context frame\" that is storing the relevant context","body":"For each Promise, the object we allocate is a opaque wrapper around a ref to the ref-counted \"async context frame\" that is storing the relevant context","msgtype":"m.text"},"ts":1673995432594,"senderName":"James M Snell","senderId":"@jasnell:matrix.org","id":"$t6kQedeVMghYPZtwn4Kp3XGbkoROoSgUbSl691LGOqg"},
{"content":{"org.matrix.msc1767.text":"So we do need more than storing a simple pointer but there is tons of room for improvement still","body":"So we do need more than storing a simple pointer but there is tons of room for improvement still","msgtype":"m.text"},"ts":1673995464492,"senderName":"James M Snell","senderId":"@jasnell:matrix.org","id":"$d7NH9v9scXib9l681ToogeBqTWKHfljfTIjGN4HSkBg"},
{"content":{"org.matrix.msc1767.text":"yeah a naive built-in implementation would address these issues","body":"yeah a naive built-in implementation would address these issues","msgtype":"m.text"},"ts":1673996042711,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$deWPC2jhtCZElaGHzlTF8txGOtz3o8jv_pMyBU3Ipy8"},
{"content":{"org.matrix.msc1767.text":"absolutely doesn't need to be much","body":"absolutely doesn't need to be much","msgtype":"m.text"},"ts":1673996153825,"senderName":"James M Snell","senderId":"@jasnell:matrix.org","id":"$C3D8TnZvFHFpeXTEn1-NwgOW8A0HA8EC3UQHYJTpTZQ"}
]