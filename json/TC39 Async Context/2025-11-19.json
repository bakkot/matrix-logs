[
{"content":{"body":"RGN just mentioned the idea that \"all async iterator cleanup solutions are isomorphic to each other\" e.g. resolving a promise when it's done - but this reminds me of a discussion I brought up earlier about using promises to simulate events - when async context is involved, the isomorphism potentially breaks down if you want the cleanup to happen in the same context as the job itself...","m.mentions":{},"msgtype":"m.text"},"ts":1763515793539,"senderName":"Steve Hicks","senderId":"@stephenhicks:matrix.org","id":"$B4wcp1GaAwgEEt0o2plz9_g4HTR6iIys7YaeuMBAH8I"},
{"content":{"body":"The simulation of events with promise is not an exact simulation though, particularly about the execution time of the handlers. Promises forces deferral of the handler execution time. Another common pitfalls is that `event.preventDefault()` does not work after `await`","format":"org.matrix.custom.html","formatted_body":"The simulation of events with promise is not an exact simulation though, particularly about the execution time of the handlers. Promises forces deferral of the handler execution time. Another common pitfalls is that <code>event.preventDefault()</code> does not work after <code>await</code>","m.mentions":{},"msgtype":"m.text"},"ts":1763516374967,"senderName":"Chengzhong Wu","senderId":"@legendecas:matrix.org","id":"$nA_vycxCmbjTtEb22qGXuWDms-dq3hR99OuJraUElzY"},
{"content":{"body":"* The simulation of events with promise is not an exact simulation though, particularly about the execution time of the handlers. Promises forces deferral of the handler execution time. Another common pitfall is that `event.preventDefault()` does not work after `await`","format":"org.matrix.custom.html","formatted_body":"* The simulation of events with promise is not an exact simulation though, particularly about the execution time of the handlers. Promises forces deferral of the handler execution time. Another common pitfall is that <code>event.preventDefault()</code> does not work after <code>await</code>","m.mentions":{},"m.new_content":{"body":"The simulation of events with promise is not an exact simulation though, particularly about the execution time of the handlers. Promises forces deferral of the handler execution time. Another common pitfall is that `event.preventDefault()` does not work after `await`","format":"org.matrix.custom.html","formatted_body":"The simulation of events with promise is not an exact simulation though, particularly about the execution time of the handlers. Promises forces deferral of the handler execution time. Another common pitfall is that <code>event.preventDefault()</code> does not work after <code>await</code>","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$nA_vycxCmbjTtEb22qGXuWDms-dq3hR99OuJraUElzY","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1763516381041,"senderName":"Chengzhong Wu","senderId":"@legendecas:matrix.org","id":"$5H99lRFu_4DCPPP8sGmfAownxi4b_1yesI_3ufBpduc"}
]