[
{"content":{"body":"Hey, I was looking for some issue in the repo about why we made AsyncContext per-agent rather than per-realm, and I remember some SES concern playing into that, but there doesn't seem to be any issue on the AsyncContext repo about that","msgtype":"m.text"},"ts":1705036234455,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$SA8LkmQTSkls1tC4dzftL8TQbSiP1FeU2jFnCHH1D0U"},
{"content":{"body":"is that discussion logged somewhere?","msgtype":"m.text"},"ts":1705036245101,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$7kG2-CI0uhdiY1mQuc0RTdpHjAQjIyHLqb9wex5g4rY"},
{"content":{"body":"https://github.com/tc39/notes/blob/main/meetings/2023-01/feb-01.md#:~:text=cross%2Drealm%20per%2Dagent","m.mentions":{},"msgtype":"m.text"},"ts":1705040223970,"senderName":"Chengzhong Wu","senderId":"@legendecas:matrix.org","id":"$5exeVJVhCZSHcKBaATdhG9diCzP83zNTwjnFNbffmo0"},
{"content":{"body":" * https://github.com/tc39/notes/blob/main/meetings/2023-01/feb-01.md#:~:text=inherently%20cross%2Drealm%2C%20and%20per%2Dagent.","m.mentions":{},"m.new_content":{"body":"https://github.com/tc39/notes/blob/main/meetings/2023-01/feb-01.md#:~:text=inherently%20cross%2Drealm%2C%20and%20per%2Dagent.","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$5exeVJVhCZSHcKBaATdhG9diCzP83zNTwjnFNbffmo0","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1705040300670,"senderName":"Chengzhong Wu","senderId":"@legendecas:matrix.org","id":"$ZU7XF29XcDPGZf9zzsIzJJ-RnLnEcz_qcEmpfw-IqZg"},
{"content":{"body":" * https://github.com/tc39/notes/blob/main/meetings/2023-01/feb-01.md#conclusion","m.mentions":{},"m.new_content":{"body":"https://github.com/tc39/notes/blob/main/meetings/2023-01/feb-01.md#conclusion","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$5exeVJVhCZSHcKBaATdhG9diCzP83zNTwjnFNbffmo0","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1705040339418,"senderName":"Chengzhong Wu","senderId":"@legendecas:matrix.org","id":"$SpOnzac86D51ifZAFSI3OCCVzrcQ7gZgtNHEzqIAB78"},
{"content":{"body":"The conclusion was captured back in notes of 2023-01","m.mentions":{},"msgtype":"m.text"},"ts":1705040358860,"senderName":"Chengzhong Wu","senderId":"@legendecas:matrix.org","id":"$eIhnUHHBQ-FgAnSJ2Dpln3XLm6CTss2vNU6To67HwSc"},
{"content":{"body":"My understanding is that, thanks to the transform into continuation passing style to explain why async context is not really introducing observable global mutable state, it also shows that the context info is shared any time a call is made. Since calls can happen cross realm, it means that when modeling async context as a global state, that has to be shared for the whole agent.","msgtype":"m.text"},"ts":1705049122722,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$LeEI7hRTzKdUzwM2tiuLEofQmFtGlVbSq1sXBSMaR24"},
{"content":{"body":"Looking at the notes, Mark actually was/is concerned about speccing AsyncContext in terms of global mutable state, but that's a general concern, and making it cross realm is even scarier. I suspect however that speccing it in terms of continuation passing would be too large of a change in the spec.","msgtype":"m.text"},"ts":1705049432031,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$M8q6VC4kz9cOUh46cIgEduvNv5C3sWnFULJtkvBcBdQ"},
{"content":{"body":"Maybe we can specify AsyncContext without global mutable state when anything else about JS execution is specified that wayâ€¦","msgtype":"m.text"},"ts":1705080605410,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$AU2A3s50u6FhKqUolfPCsn_botAwNCymKRt7beHMnEE"},
{"content":{"body":"I'm confused. What is currently specified as global mutable state besides the symbol registry?","msgtype":"m.text"},"ts":1705085076539,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$WaB3TdicngJ4AH3YuQcPTUrEu_Kf7KNt_Sw1C2GXDtU"},
{"content":{"body":"The execution context?","msgtype":"m.text"},"ts":1705085495977,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$Ax3owRbsJJkyT2Ji7VTlBGrrImZ7Q9qV9NN9EMYahcE"},
{"content":{"body":"AsyncContext would attach to that","msgtype":"m.text"},"ts":1705085525665,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$kEqyhnmj1XV1R4BQxUdv9sDidil-lJOw3TK9ZOu0KwU"},
{"content":{"body":"The important thing is that it is used in a structured way; the editorial point is unactionable unless we change a lot more stuff","msgtype":"m.text"},"ts":1705085587249,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$iGeKZZFCLsWzwrjVBgoFmjwacYr4jNZRHppVVNGpRMk"},
{"content":{"body":"we push things onto the execution context stack... that is a mutation","m.mentions":{},"msgtype":"m.text"},"ts":1705085695317,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$_22dhlp4NXO5hAA0IxgpSReOGjxLAy9LSKpUOlDeoZA"}
]