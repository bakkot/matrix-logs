[
{"content":{"body":"Hey, I have a PR for generator support: https://github.com/tc39/proposal-async-context/pull/61","msgtype":"m.text"},"ts":1690823301599,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$qAdMGXwu_qCc9Q296fHHTY9mHWrVdfQfDGxd9pEVAc8"},
{"content":{"body":"it'd be good to get a thorough review from someone who understands execution contexts and generators more than me, to make sure I haven't missed anything","msgtype":"m.text"},"ts":1690823331079,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$O1fYIzF553htcCYeDmv8FicnbjG9wvg8ty0oBGRMFnY"},
{"content":{"body":"but I think this is enough to have the behavior of restoring the context at initialization","msgtype":"m.text"},"ts":1690823359403,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$4NXErIEUtXBml-sz0vf8zlhc883tekSA-BTdmEJMUQs"},
{"content":{"body":"or rather, to restore the initialization context the first time the generator is resumed, and then on every yield store the current context to restore that next time","msgtype":"m.text"},"ts":1690823433365,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$IU2a-Wf9ZJhbr0aRYB9QZmzZJA0GFH5VmdCPH3HbfWI"},
{"content":{"body":"although that isn't really needed now that I think about it, since you can't have nested yields","msgtype":"m.text"},"ts":1690823457850,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$EKd_FbAP7XqVrzPlQ8XQVbo-17h_qi7v-CIOI5_gqMg"},
{"content":{"body":" * although that isn't really needed now that I think about it, since you can't have nested yields, or modify the snapshot within a function stack frame","m.new_content":{"body":"although that isn't really needed now that I think about it, since you can't have nested yields, or modify the snapshot within a function stack frame","msgtype":"m.text"},"m.relates_to":{"event_id":"$EKd_FbAP7XqVrzPlQ8XQVbo-17h_qi7v-CIOI5_gqMg","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1690823496890,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$uRFPMZrTLf9eA-Mx4cbEVesHqoMCy6d_35jZ0r7oA34"},
{"content":{"body":"I guess I can get rid of the snapshotting on yield then","msgtype":"m.text"},"ts":1690823523548,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$C-3n6Jio4Momgw-trLEv6xHlzMxbQSLxFwd3P4VDbFs"},
{"content":{"body":" * although that isn't really needed now that I think about it, since you can't yield the outer generator inside a callback run within it, or modify the snapshot within a function stack frame","m.new_content":{"body":"although that isn't really needed now that I think about it, since you can't yield the outer generator inside a callback run within it, or modify the snapshot within a function stack frame","msgtype":"m.text"},"m.relates_to":{"event_id":"$EKd_FbAP7XqVrzPlQ8XQVbo-17h_qi7v-CIOI5_gqMg","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1690823928715,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$i94Kidy1iq7jXV9ULP9D5ACPk3UFfcj397BrlQ0LTx0"},
{"content":{"body":" * although that isn't really needed now that I think about it, since you can't yield the generator inside a callback run within it, or modify the snapshot within a function stack frame","m.new_content":{"body":"although that isn't really needed now that I think about it, since you can't yield the generator inside a callback run within it, or modify the snapshot within a function stack frame","msgtype":"m.text"},"m.relates_to":{"event_id":"$EKd_FbAP7XqVrzPlQ8XQVbo-17h_qi7v-CIOI5_gqMg","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1690823939074,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$VDCUhQ19_XOUZpiQoS1ksfEP3hKKgpxPIxgdwJulDaE"}
]