[
{"content":{"body":"> <@stephenbelanger:matrix.org> Yes. You follow the causality back to the last point JS was running and capture _there_.\n\nSure, just important to understand that you are describing something which won’t be as simple from an implementation/specification perspective. So it raises the question of how/whether other specification authors will be able to do it. Or, arguably, even how developers will build a mental model around it.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!eQuZUAhGqudVFPodUG%3Amatrix.org/%24vvgONRUu4Dw9t4zl0pZvGm1abI2gHenZyzPnFEr-Jok\">In reply to</a> <a href=\"https://matrix.to/#/@stephenbelanger:matrix.org\">@stephenbelanger:matrix.org</a><br>Yes. You follow the causality back to the last point JS was running and capture <em>there</em>.</blockquote></mx-reply>Sure, just important to understand that you are describing something which won’t be as simple from an implementation/specification perspective. So it raises the question of how/whether other specification authors will be able to do it. Or, arguably, even how developers will build a mental model around it.","m.relates_to":{"m.in_reply_to":{"event_id":"$vvgONRUu4Dw9t4zl0pZvGm1abI2gHenZyzPnFEr-Jok"}},"msgtype":"m.text"},"ts":1718088137918,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$WjDyzFEdsPMniQskcCdArI9tA_CfYVVidkY_LA8JEWQ"},
{"content":{"body":"> <@stephenbelanger:matrix.org> Yes, generally agreeing. Though I don't feel I'm familiar enough with the intricacies of realms to say if each should get its _own_ context or if it should be considered an _additional_ empty node which _descends_ from the root which initiated the realm?\n\nI can’t think of an observable difference between these two options","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!eQuZUAhGqudVFPodUG%3Amatrix.org/%24NRa0GqEkxKPBk_YkDPxgbi1WbwUO4BeaqDDr23oZ9g0\">In reply to</a> <a href=\"https://matrix.to/#/@stephenbelanger:matrix.org\">@stephenbelanger:matrix.org</a><br>Yes, generally agreeing. Though I don't feel I'm familiar enough with the intricacies of realms to say if each should get its <em>own</em> context or if it should be considered an <em>additional</em> empty node which <em>descends</em> from the root which initiated the realm?</blockquote></mx-reply>I can’t think of an observable difference between these two options","m.relates_to":{"m.in_reply_to":{"event_id":"$NRa0GqEkxKPBk_YkDPxgbi1WbwUO4BeaqDDr23oZ9g0"}},"msgtype":"m.text"},"ts":1718088177103,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$Z1anJllz9yQLSc_yhtxHC9K3zal0OkTiwCCt0t9pTcQ"},
{"content":{"body":"> <@stephenbelanger:matrix.org> Which, from what I understand, is roughly what AsyncContext is doing too.\n\nYes, AsyncContext.Snapshot is the context frame and we just need to copy the pointer. This is really important.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!eQuZUAhGqudVFPodUG%3Amatrix.org/%24yuaTVUWf1d9RmL9RovANW7vVRduKxhgHVJDSd2LBFCc\">In reply to</a> <a href=\"https://matrix.to/#/@stephenbelanger:matrix.org\">@stephenbelanger:matrix.org</a><br>Which, from what I understand, is roughly what AsyncContext is doing too.</blockquote></mx-reply>Yes, AsyncContext.Snapshot is the context frame and we just need to copy the pointer. This is really important.","m.relates_to":{"m.in_reply_to":{"event_id":"$yuaTVUWf1d9RmL9RovANW7vVRduKxhgHVJDSd2LBFCc"}},"msgtype":"m.text"},"ts":1718088217577,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$PQ0tbVXSJotjCTLpC-4vxAEWZIhiHoW49hphgqnpKAQ"},
{"content":{"body":"> <@stephenbelanger:matrix.org> Literally _every_ Fortune 500 company is doing context management with Node.js at the _least_ via an installed APM product. Optimizing for the cost of those expected flows will _significantly_ reduce cloud costs across the industry.\n\nEvery single one of these are using flow around though, right?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!eQuZUAhGqudVFPodUG%3Amatrix.org/%24Oy4J6eLc32q59BLtloOUc12FSe28wU56DEzJXRBK8pQ\">In reply to</a> <a href=\"https://matrix.to/#/@stephenbelanger:matrix.org\">@stephenbelanger:matrix.org</a><br>Literally <em>every</em> Fortune 500 company is doing context management with Node.js at the <em>least</em> via an installed APM product. Optimizing for the cost of those expected flows will <em>significantly</em> reduce cloud costs across the industry.</blockquote></mx-reply>Every single one of these are using flow around though, right?","m.relates_to":{"m.in_reply_to":{"event_id":"$Oy4J6eLc32q59BLtloOUc12FSe28wU56DEzJXRBK8pQ"}},"msgtype":"m.text"},"ts":1718088264974,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$fBcxZzh6zcx-_mDjpJCjJYi5pIVUUcrWVf9qn5VfvZw"},
{"content":{"body":"Yes, only because ALS _presently_ does flow-around with promises/awaits. Almost every one of the Fortune 500 companies I've talked to about it has complained about it though.","format":"org.matrix.custom.html","formatted_body":"Yes, only because ALS <em>presently</em> does flow-around with promises/awaits. Almost every one of the Fortune 500 companies I've talked to about it has complained about it though.","m.mentions":{},"msgtype":"m.text"},"ts":1718123253364,"senderName":"Stephen Belanger","senderId":"@stephenbelanger:matrix.org","id":"$wp2VJHJZBuDuwAXphYr9MmKX68uOd1dHKYNey_FDrTI"},
{"content":{"body":"And it's all APM vendors which are the ones using it in most of those companies, which I've talked to folks from all the APM vendors and they're mostly all in agreement that flow-through is the correct semantic for their use case.","m.mentions":{},"msgtype":"m.text"},"ts":1718123335972,"senderName":"Stephen Belanger","senderId":"@stephenbelanger:matrix.org","id":"$3tO077XGp7kGunLjbulWyWsvMguWeBrsBTFUHeo95GI"},
{"content":{"body":"> <@stephenbelanger:matrix.org> Yes, only because ALS _presently_ does flow-around with promises/awaits. Almost every one of the Fortune 500 companies I've talked to about it has complained about it though.\n\nRight so this is the thing you need to get more concrete on—scenarios where this complaint happens. Specific cases, not generic","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!eQuZUAhGqudVFPodUG%3Amatrix.org/%24wp2VJHJZBuDuwAXphYr9MmKX68uOd1dHKYNey_FDrTI\">In reply to</a> <a href=\"https://matrix.to/#/@stephenbelanger:matrix.org\">@stephenbelanger:matrix.org</a><br>Yes, only because ALS <em>presently</em> does flow-around with promises/awaits. Almost every one of the Fortune 500 companies I've talked to about it has complained about it though.</blockquote></mx-reply>Right so this is the thing you need to get more concrete on—scenarios where this complaint happens. Specific cases, not generic","m.relates_to":{"m.in_reply_to":{"event_id":"$wp2VJHJZBuDuwAXphYr9MmKX68uOd1dHKYNey_FDrTI"}},"msgtype":"m.text"},"ts":1718124213371,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$zxI5bLxymsBoE4rsL6TMNEqPLCKAcmUNQiYzd2l5Mvs"},
{"content":{"body":"> <@stephenbelanger:matrix.org> And it's all APM vendors which are the ones using it in most of those companies, which I've talked to folks from all the APM vendors and they're mostly all in agreement that flow-through is the correct semantic for their use case.\n\nAnd/or bring some of those people to this chat room (we haven’t had much engagement with Matteo since he joined unfortunately)","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!eQuZUAhGqudVFPodUG%3Amatrix.org/%243tO077XGp7kGunLjbulWyWsvMguWeBrsBTFUHeo95GI\">In reply to</a> <a href=\"https://matrix.to/#/@stephenbelanger:matrix.org\">@stephenbelanger:matrix.org</a><br>And it's all APM vendors which are the ones using it in most of those companies, which I've talked to folks from all the APM vendors and they're mostly all in agreement that flow-through is the correct semantic for their use case.</blockquote></mx-reply>And/or bring some of those people to this chat room (we haven’t had much engagement with Matteo since he joined unfortunately)","m.relates_to":{"m.in_reply_to":{"event_id":"$3tO077XGp7kGunLjbulWyWsvMguWeBrsBTFUHeo95GI"}},"msgtype":"m.text"},"ts":1718124259401,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$sYnMkWLlGu9HsoeJ8bGkTokCI2LArq6MiXFP4BC2fRM"},
{"content":{"body":"I just had a call with Matteo earlier actually about a user case where both flow-through and set/get semantics are needed. He said he would share the example from our call here later.","m.mentions":{},"msgtype":"m.text"},"ts":1718137684000,"senderName":"Stephen Belanger","senderId":"@stephenbelanger:matrix.org","id":"$s6dqbvrbDzlwidou5iXwtt2wm_CPvr4uC1-_LrBiSbg"},
{"content":{"body":"And I'm trying to get more APM folks into the conversation. Unfortunately the APM space has historically been fairly bad at open source involvement so it's not so easy to get them to engage on stuff like this.","m.mentions":{},"msgtype":"m.text"},"ts":1718137748484,"senderName":"Stephen Belanger","senderId":"@stephenbelanger:matrix.org","id":"$nmr5TKayqX2YIkvzuEg3pGwg25lgbtJVZUnmaQLoZCk"}
]