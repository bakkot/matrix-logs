[
{"content":{"body":"I talked through what AsyncContext was with Jordan and he said he understands it better now than previously. I focused on how it was used; he said he found the pseudo-implementation confusing (sorry for the bad recommendation there!)\n\nWhen presenting, I recommend you spend a bunch of the time reviewing what the proposal is, somehow in terms a little different from last time, and what the use cases are, before going ahead. The open questions to answer during Stage 2 should probably go faster without dwelling too much.","format":"org.matrix.custom.html","formatted_body":"<p>I talked through what AsyncContext was with Jordan and he said he understands it better now than previously. I focused on how it was used; he said he found the pseudo-implementation confusing (sorry for the bad recommendation there!)</p>\n<p>When presenting, I recommend you spend a bunch of the time reviewing what the proposal is, somehow in terms a little different from last time, and what the use cases are, before going ahead. The open questions to answer during Stage 2 should probably go faster without dwelling too much.</p>","msgtype":"m.text"},"ts":1679542208017,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$Y3LVg9v7v9p8IY44Nwi_JQSs7CXzioIOv8rROp3Ef5c"},
{"content":{"body":"Maybe we could have a break in the middle to go through the queue and answer questions about what the proposal is and why we want it, before going on","msgtype":"m.text"},"ts":1679542263386,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$ee_sNuRvrlOJcC7cq3rwLsvUtbLaMiTjbXQ4DNP9m6c"},
{"content":{"body":"I think this lack of understanding all of the basics is a common pattern in proposals and doesn‚Äôt really reflect on the quality of your first presentation, or on Jordan. I heard similar lack of understanding of the motivation for a couple other proposals whose motivation had been extensively discussed.","msgtype":"m.text"},"ts":1679542465179,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$DU7VEMILQysxDbNQ5m6z13vS7_lbGgfMUwdmDV5UHSY"},
{"content":{"body":"Chengzhong Wu: I added you as an editor of the slide deck, if you want to add some slides on OTEL","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@legendecas:matrix.org\">Chengzhong Wu</a>: I added you as an editor of the slide deck, if you want to add some slides on OTEL","msgtype":"m.text"},"ts":1679548919317,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$msquYY3zonDsmjfYz34AfuOkSCTJ9j4HORgU1Q5YGIE"},
{"content":{"body":"You can use https://carbon.now.sh/aXSZjJ58QreRZMzMLEfP to generate code images (use 17 lines of code to get optimal size for slides)","msgtype":"m.text"},"ts":1679549001899,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$iQnvs1ABy1H6OsYYpvTm0hKzieR3BAYO4yoD57gnXkI"},
{"content":{"body":"I can explain a fair bit of usage and usecases between slides 2 and 3","msgtype":"m.text"},"ts":1679549058867,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$oqcAn6ofhiScxP3IepBmG3603vJfJanXlIb-rf8fseY"},
{"content":{"body":"I think having a before and after might be helpful. Eg, normal use code that might be written, and how the code has to change  (or rather doesn‚Äôt have to change) if we add OTEL","msgtype":"m.text"},"ts":1679549485589,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$rZ-0R0zH4uC2qdEom5S-2hhC8iB1AJIdJzkGendfVzw"},
{"content":{"body":"A bit like the logs example I used in the last deck, user code doesn‚Äôt need to be written with telemetry in mind, it just gets added seamlessly","msgtype":"m.text"},"ts":1679549531389,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$LY_tHY1IBfskcxZUhi2nvf46xHZKUCyKIO7kzFR8sCg"},
{"content":{"body":"Thanks, I'll add the slides on OTEL","msgtype":"m.text"},"ts":1679551232098,"senderName":"Chengzhong Wu","senderId":"@legendecas:matrix.org","id":"$smZCUjT6D7Ms7klolArTXUl7qjY2H3mAahXe9AviY0M"},
{"content":{"body":"Note, code images aren‚Äôt accessible by themselves but you can fix this by putting the code in the speakers notes","msgtype":"m.text"},"ts":1679555355004,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$nzHU5nn5Gv4wOIaGp8nvUU_iPmtr2XaqJK3xQgp52mg"},
{"content":{"body":"I wonder if the presentation should mention this layering question (about whether it should be a web API) and our plan to investigate it (by trying out implementing it in Chrome)","msgtype":"m.text"},"ts":1679585513197,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$ljmA58TdMLv6yJ2-7ihx0kTCm5T8LfZeAZ7L8q-Hwf4"},
{"content":{"body":"Chrome has put in a lot of time to articulate that concern, so we should probably speak to it somehow","msgtype":"m.text"},"ts":1679585535277,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$dGiiNFjMIrHxu0Rd5FM36H45oFH0wvgJNdvIESVPGAQ"},
{"content":{"body":"(I am happy to explain this part if people want)","msgtype":"m.text"},"ts":1679585546391,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$fcRpDzePr5Gk2ZF19FH-7xxUmKIPKrQ533OQEebmh4s"},
{"content":{"body":"whether AsyncContext should be a web API ‚â† whether Chrome should implement it as a web API","msgtype":"m.text"},"ts":1679586979526,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$F64zVdHEzkXKOTMzzfUUS7CwVotUQUA37elw6x8YyGk"},
{"content":{"body":"but yeah, it might be good to discuss that as well","msgtype":"m.text"},"ts":1679587004606,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$69pvt6ob3_PfNXNSPV4Tz75EZ_tnAQ7wM6iq99MuwUE"},
{"content":{"body":" * whether AsyncContext should be a web API ‚â† whether Chrome (or browsers in general) should implement it as a web API","m.new_content":{"body":"whether AsyncContext should be a web API ‚â† whether Chrome (or browsers in general) should implement it as a web API","msgtype":"m.text"},"m.relates_to":{"event_id":"$F64zVdHEzkXKOTMzzfUUS7CwVotUQUA37elw6x8YyGk","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1679587110931,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$fEv6UjxWu8UYgh9XoyFb1eyC4Y3UahP3_Z7mBFsRdbY"},
{"content":{"body":"> <@abotella:igalia.com> whether AsyncContext should be a web API ‚â† whether Chrome (or browsers in general) should implement it as a web API\n\nYes, I think this is a good point to make in the presentation as well","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!eQuZUAhGqudVFPodUG%3Amatrix.org/%24F64zVdHEzkXKOTMzzfUUS7CwVotUQUA37elw6x8YyGk\">In reply to</a> <a href=\"https://matrix.to/#/@abotella:igalia.com\">@abotella:igalia.com</a><br>whether AsyncContext should be a web API ‚â† whether Chrome (or browsers in general) should implement it as a web API</blockquote></mx-reply>Yes, I think this is a good point to make in the presentation as well","m.relates_to":{"m.in_reply_to":{"event_id":"$F64zVdHEzkXKOTMzzfUUS7CwVotUQUA37elw6x8YyGk"}},"msgtype":"m.text"},"ts":1679587203090,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$xmcGSZ2GmSevn6WNymaRzpgdApfh_dqEi9cp_yMX7Jg"},
{"content":{"body":"But I believe Yoav if he says it is easier for him to implement and expose it as a web API","msgtype":"m.text"},"ts":1679587225860,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$vmoQBvxY4T3sBc7grDi0oWdj8VT2_-vyle8hVmqL-M0"},
{"content":{"body":"Slides updated, and I added the code as speaker notes","msgtype":"m.text"},"ts":1679587236606,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$H6cILAhj9lDKxxxXLlL3nUmfaWz_afGI1t4T9BNiawo"},
{"content":{"body":"* But I believe Yoav if he says it is easier *for him* to implement and expose it as a web API","format":"org.matrix.custom.html","formatted_body":"* But I believe Yoav if he says it is easier <em>for him</em> to implement and expose it as a web API","m.new_content":{"body":"But I believe Yoav if he says it is easier *for him* to implement and expose it as a web API","format":"org.matrix.custom.html","formatted_body":"But I believe Yoav if he says it is easier <em>for him</em> to implement and expose it as a web API","msgtype":"m.text"},"m.relates_to":{"event_id":"$vmoQBvxY4T3sBc7grDi0oWdj8VT2_-vyle8hVmqL-M0","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1679587259903,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$qW94NyTkmduTiK2GidzdnOinGk4DlVQCe7f2SJ3Avw4"},
{"content":{"body":"> <@littledan:matrix.org> I wonder if the presentation should mention this layering question (about whether it should be a web API) and our plan to investigate it (by trying out implementing it in Chrome)\n\nI'm going to mention this in my foreword","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!eQuZUAhGqudVFPodUG:matrix.org/$ljmA58TdMLv6yJ2-7ihx0kTCm5T8LfZeAZ7L8q-Hwf4?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@littledan:matrix.org\">@littledan:matrix.org</a><br>I wonder if the presentation should mention this layering question (about whether it should be a web API) and our plan to investigate it (by trying out implementing it in Chrome)</blockquote></mx-reply>I'm going to mention this in my foreword","m.relates_to":{"m.in_reply_to":{"event_id":"$ljmA58TdMLv6yJ2-7ihx0kTCm5T8LfZeAZ7L8q-Hwf4"}},"msgtype":"m.text"},"ts":1679587297601,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$3j_A0DcgqKc1gwO7hNIJv23AND85tuRmPTPt-2-2dmw"},
{"content":{"body":"I for one would prefer seeing this in the language itself","msgtype":"m.text"},"ts":1679589787529,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$yTdi9-G7iAkZMkxevxZbI2OdC_YdyO6XUhe_pyOodyM"},
{"content":{"body":"While I think I'd prefer language level also, I'm sympathetic to the web API approach and it's likely easier for us to implement that way anyway. Specifically, even if it were in the language we'd want v8 to treat it largely as an embedder API anyway to make it easier for us to integrate with other embedder use cases ","msgtype":"m.text"},"ts":1679589997970,"senderName":"James M Snell","senderId":"@jasnell:matrix.org","id":"$yALFv0IR6HYx-bOzyD2RrV1H4zQNBPrjPOj_ozTxCwA"},
{"content":{"body":"Could you be more specific about those other embedder use cases?","msgtype":"m.text"},"ts":1679590192537,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$xgtQV7FtdTWbDmqlo-sb9MArtmYLuT2HUz-Ch8ojZNI"},
{"content":{"body":"> <@mhofman:matrix.org> I for one would prefer seeing this in the language itself\n\nMaybe this is something you could articulate (with justification) in a queue item after the presentation?","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!eQuZUAhGqudVFPodUG:matrix.org/$yTdi9-G7iAkZMkxevxZbI2OdC_YdyO6XUhe_pyOodyM?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@mhofman:matrix.org\">@mhofman:matrix.org</a><br>I for one would prefer seeing this in the language itself</blockquote></mx-reply>Maybe this is something you could articulate (with justification) in a queue item after the presentation?","m.relates_to":{"m.in_reply_to":{"event_id":"$yTdi9-G7iAkZMkxevxZbI2OdC_YdyO6XUhe_pyOodyM"}},"msgtype":"m.text"},"ts":1679590836893,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$MmteT7-2Oa7qx2u1bmY9yY9FV7U8gmr8fn8SkaYmZNo"},
{"content":{"body":"> <@jasnell:matrix.org> While I think I'd prefer language level also, I'm sympathetic to the web API approach and it's likely easier for us to implement that way anyway. Specifically, even if it were in the language we'd want v8 to treat it largely as an embedder API anyway to make it easier for us to integrate with other embedder use cases\n\nCould you elaborate on this point? It might feed into the design of the V8 API, to ensure it meets your use cases (if we go that way at all).","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!eQuZUAhGqudVFPodUG:matrix.org/$yALFv0IR6HYx-bOzyD2RrV1H4zQNBPrjPOj_ozTxCwA?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@jasnell:matrix.org\">@jasnell:matrix.org</a><br>While I think I&#39;d prefer language level also, I&#39;m sympathetic to the web API approach and it&#39;s likely easier for us to implement that way anyway. Specifically, even if it were in the language we&#39;d want v8 to treat it largely as an embedder API anyway to make it easier for us to integrate with other embedder use cases </blockquote></mx-reply>Could you elaborate on this point? It might feed into the design of the V8 API, to ensure it meets your use cases (if we go that way at all).","m.relates_to":{"m.in_reply_to":{"event_id":"$yALFv0IR6HYx-bOzyD2RrV1H4zQNBPrjPOj_ozTxCwA"}},"msgtype":"m.text"},"ts":1679590882294,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$69Kv6tB6HJ3nmDf6TG7CI6NoKPU54p2Quh96Uvbv5IE"},
{"content":{"body":"I need to articulate it better, but I think what I'll need is to extend the current API to support capturing both the registering context AND the resolving context, mostly to support join type use case like `Promise.all`.","format":"org.matrix.custom.html","formatted_body":"I need to articulate it better, but I think what I'll need is to extend the current API to support capturing both the registering context AND the resolving context, mostly to support join type use case like <code>Promise.all</code>.","msgtype":"m.text"},"ts":1679591055755,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$30n7eMBUI5fd5lZNBV5Jrb8xzRLb0cxS2U7IG1mGkII"},
{"content":{"body":"> <@mhofman:matrix.org> I need to articulate it better, but I think what I'll need is to extend the current API to support capturing both the registering context AND the resolving context, mostly to support join type use case like `Promise.all`.\n\nhuh, this is a big request; I'm looking forward to you articulating it more.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!eQuZUAhGqudVFPodUG:matrix.org/$30n7eMBUI5fd5lZNBV5Jrb8xzRLb0cxS2U7IG1mGkII?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@mhofman:matrix.org\">@mhofman:matrix.org</a><br>I need to articulate it better, but I think what I'll need is to extend the current API to support capturing both the registering context AND the resolving context, mostly to support join type use case like <code>Promise.all</code>.</blockquote></mx-reply>huh, this is a big request; I'm looking forward to you articulating it more.","m.relates_to":{"m.in_reply_to":{"event_id":"$30n7eMBUI5fd5lZNBV5Jrb8xzRLb0cxS2U7IG1mGkII"}},"msgtype":"m.text"},"ts":1679591419899,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$qSBVR1vdVgyvNPXG1FrElsh4sunY20Xl3MEV-y53z6s"},
{"content":{"body":"I don't believe it's that big, we already need to capture the rejection context for unhandled rejections","msgtype":"m.text"},"ts":1679591495065,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$M4qr7UYWUFeV1oisy_6Q95rPXNJdfds8ic0px-bdPK8"},
{"content":{"body":"when a context is captured, how are we imagining it can be accessed later?","msgtype":"m.text"},"ts":1679591671435,"senderName":"Ben Newman (Apollo, @benjamn on GH)","senderId":"@benjamn:matrix.org","id":"$Az40qwlNUFeu6GaDDoD4rRoMHeMrsLcukpuFMES4JBU"},
{"content":{"body":"maybe it's an `AsyncContext.wrap`-bound function that runs other functions in that bound context?","format":"org.matrix.custom.html","formatted_body":"maybe it's an <code>AsyncContext.wrap</code>-bound function that runs other functions in that bound context?","msgtype":"m.text"},"ts":1679591681611,"senderName":"Ben Newman (Apollo, @benjamn on GH)","senderId":"@benjamn:matrix.org","id":"$UEdgMgJQaN0jlOoDApx0extdfonKDdajkEaCbxHK6eM"},
{"content":{"body":"I have a sketch I'll try to clean up","msgtype":"m.text"},"ts":1679591711951,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$MjzOa88YU6gAswCDlhrGEFReL6I8CqD5ulyDZeD5jOM"},
{"content":{"body":"are you hoping these registering/resolving contexts will be preserved separately, or merged into one context?","msgtype":"m.text"},"ts":1679591793975,"senderName":"Ben Newman (Apollo, @benjamn on GH)","senderId":"@benjamn:matrix.org","id":"$nksfGdveyjnl7V2RuuI3t02jTN6NhzlLx5Tj6Wc6Lg0"},
{"content":{"body":"I just need to be able to get the list of my values associated to the different executions if there are multiple. Aka `asyncContext.getAll(): Array<T>`","format":"org.matrix.custom.html","formatted_body":"I just need to be able to get the list of my values associated to the different executions if there are multiple. Aka <code>asyncContext.getAll(): Array&lt;T&gt;</code>","msgtype":"m.text"},"ts":1679591896822,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$2ojYwdiGJgLQl9P23cLI6cN8XdTdSlvRkIuCxoSJchQ"},
{"content":{"body":"that's nice because it lets consuming/application code decide how to merge the multiple values","msgtype":"m.text"},"ts":1679591968557,"senderName":"Ben Newman (Apollo, @benjamn on GH)","senderId":"@benjamn:matrix.org","id":"$mTIaVHfiesPYwIlLrB-fnh-qDC-2aU2do2WTk6YZe24"},
{"content":{"body":"I don't understand in what situations we'd provide multiple contexts, and how we'd expose them. It seems to complicate what model we should use for embedders. So I'm looking forward to more concreteness and use cases here.","msgtype":"m.text"},"ts":1679592008465,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$M8U7xbl5h0HsBzMV8u5mtRs9TPGMoEce5KWgjVUUJ3A"},
{"content":{"body":"Instead of introducing a new API, why can't the context be used with an array of values?","msgtype":"m.text"},"ts":1679592016416,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$t-uxipkjOVPdRT77PFNL8SsqmyrbGunKBCDfwVFvJ70"},
{"content":{"body":"Let's focus right now on what we need to get to Stage 2, and then open this question up more aftewards","msgtype":"m.text"},"ts":1679592034915,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$_CnSIrWlmbfKfoa2_Jb33pb7MzKzvj_henCx_XOyAPc"},
{"content":{"body":"`AsyncContext<T>` -> `AsyncContext<T[]>`","format":"org.matrix.custom.html","formatted_body":"<code>AsyncContext&lt;T&gt;</code> -&gt; <code>AsyncContext&lt;T[]&gt;</code>","msgtype":"m.text"},"ts":1679592036771,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$DQM53XvvH_i0A6prT7aBiEDux7eRBp70dIOWyGRgLS0"},
{"content":{"body":"```\nconst p = new Promise(resolve => { asyncContext.run(123, resolve); });\nasyncContext.run(456, () => p.then(() => console.log(...asyncContext.getAll())));\n// Prints 456, 123\n```","format":"org.matrix.custom.html","formatted_body":"<pre><code>const p = new Promise(resolve =&gt; { asyncContext.run(123, resolve); });\nasyncContext.run(456, () =&gt; p.then(() =&gt; console.log(...asyncContext.getAll())));\n// Prints 456, 123\n</code></pre>\n","msgtype":"m.text"},"ts":1679592064332,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$0_99Urcw1-7V9pqK5fiQwOqQWmCem1dT6GzinSsmO0o"},
{"content":{"body":"say a function is bound with `AsyncContext.wrap` in one context and then called in another context, where some of the `AsyncContext` values in the two contexts are not the same (a \"merge conflict\" if you will)","format":"org.matrix.custom.html","formatted_body":"say a function is bound with <code>AsyncContext.wrap</code> in one context and then called in another context, where some of the <code>AsyncContext</code> values in the two contexts are not the same (a &quot;merge conflict&quot; if you will)","m.relates_to":{"event_id":"$M8U7xbl5h0HsBzMV8u5mtRs9TPGMoEce5KWgjVUUJ3A","is_falling_back":true,"m.in_reply_to":{"event_id":"$M8U7xbl5h0HsBzMV8u5mtRs9TPGMoEce5KWgjVUUJ3A"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1679592092287,"senderName":"Ben Newman (Apollo, @benjamn on GH)","senderId":"@benjamn:matrix.org","id":"$6FZsX5P6zHnvrkWROTAZtwU6XRrxDIEdPrhV-zMdH_8"},
{"content":{"body":" * say a function is bound with `AsyncContext.wrap` in one context and then called in another context, where some of the `AsyncContext` values in the two contexts are not the same","format":"org.matrix.custom.html","formatted_body":" * say a function is bound with <code>AsyncContext.wrap</code> in one context and then called in another context, where some of the <code>AsyncContext</code> values in the two contexts are not the same","m.new_content":{"body":"say a function is bound with `AsyncContext.wrap` in one context and then called in another context, where some of the `AsyncContext` values in the two contexts are not the same","format":"org.matrix.custom.html","formatted_body":"say a function is bound with <code>AsyncContext.wrap</code> in one context and then called in another context, where some of the <code>AsyncContext</code> values in the two contexts are not the same","msgtype":"m.text"},"m.relates_to":{"event_id":"$6FZsX5P6zHnvrkWROTAZtwU6XRrxDIEdPrhV-zMdH_8","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1679592128528,"senderName":"Ben Newman (Apollo, @benjamn on GH)","senderId":"@benjamn:matrix.org","id":"$frCldwMi1QCAF7vJBF_68Qf5TK2s7WhNhb_hZjJBmPw"},
{"content":{"body":"Yes, I'm not trying to ask to change anything now, but it's something I'd like us to consider at stage 2","msgtype":"m.text"},"ts":1679592158644,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$uZU-oeF6s8SFVLDbbPcY14kW8i2IRhghJSTS5L05Zz4"},
{"content":{"body":"I think we've been referring to those as \"snapshots\" or \"maps\", rather than \"contexts\"","m.relates_to":{"event_id":"$M8U7xbl5h0HsBzMV8u5mtRs9TPGMoEce5KWgjVUUJ3A","is_falling_back":true,"m.in_reply_to":{"event_id":"$6FZsX5P6zHnvrkWROTAZtwU6XRrxDIEdPrhV-zMdH_8"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1679592171520,"senderName":"Andreu Botella","senderId":"@abotella:igalia.com","id":"$Hb4LGkDiEYf_ljA8O07LuMBcEibSqILDvLjWyB4kuvc"},
{"content":{"body":"\nOK, good, I'm looking forward to discussing this during Stage 2 once you're able to articulate the motivation","msgtype":"m.text"},"ts":1679592194581,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$_gQNF7E8sZxyzOMb4N746buI9QegDB1iRIr_3VJSPZY"},
{"content":{"body":"I'm _all for_ avoiding the naked word \"context\" since it has so many overloads üòÖ","format":"org.matrix.custom.html","formatted_body":"I'm <em>all for</em> avoiding the naked word &quot;context&quot; since it has so many overloads üòÖ","m.relates_to":{"event_id":"$M8U7xbl5h0HsBzMV8u5mtRs9TPGMoEce5KWgjVUUJ3A","is_falling_back":true,"m.in_reply_to":{"event_id":"$Hb4LGkDiEYf_ljA8O07LuMBcEibSqILDvLjWyB4kuvc"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1679592200071,"senderName":"Ben Newman (Apollo, @benjamn on GH)","senderId":"@benjamn:matrix.org","id":"$qJdOZL0JMjUM7rCJ2enxB_AFmVet2kUbJkjBgNiiAYA"},
{"content":{"body":"I like \"snapshots\" here","m.relates_to":{"event_id":"$M8U7xbl5h0HsBzMV8u5mtRs9TPGMoEce5KWgjVUUJ3A","is_falling_back":true,"m.in_reply_to":{"event_id":"$qJdOZL0JMjUM7rCJ2enxB_AFmVet2kUbJkjBgNiiAYA"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1679592221415,"senderName":"Ben Newman (Apollo, @benjamn on GH)","senderId":"@benjamn:matrix.org","id":"$tY-uftB2B-9T-LKYCYsarLIKHRNn1JhabmBHbNCEfZc"},
{"content":{"body":"maybe we should make, say, monthly AsyncContext calls which would give an easy slot for this discussion","msgtype":"m.text"},"ts":1679592228449,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$2jhZvmapbmluIxBbeSeglnhfk2eQ9dSfOR__XBEwGcA"},
{"content":{"body":"The motivation is join like execution flows, of which the prominent example is `Promise.all`","format":"org.matrix.custom.html","formatted_body":"The motivation is join like execution flows, of which the prominent example is <code>Promise.all</code>","msgtype":"m.text"},"ts":1679592233392,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$eG8kKsg6p8Yp82q3k-7cSdaoHDln4yz-rQ7hpqGaRbU"},
{"content":{"body":" * I'm all for avoiding the naked word \"context\" since it has so many overloads üòÖ","format":"org.matrix.custom.html","formatted_body":" * I'm all for avoiding the naked word &quot;context&quot; since it has so many overloads üòÖ","m.new_content":{"body":"I'm all for avoiding the naked word \"context\" since it has so many overloads üòÖ","format":"org.matrix.custom.html","formatted_body":"I'm all for avoiding the naked word &quot;context&quot; since it has so many overloads üòÖ","msgtype":"m.text"},"m.relates_to":{"event_id":"$qJdOZL0JMjUM7rCJ2enxB_AFmVet2kUbJkjBgNiiAYA","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1679592280364,"senderName":"Ben Newman (Apollo, @benjamn on GH)","senderId":"@benjamn:matrix.org","id":"$zYHXAIl04jr8Gtz8YZbPsi4W91iFWPBIa0OlfFtihgk"},
{"content":{"body":"It will be good to hear what problem you're trying to solve concretely, just to give an example. But I'm not asking for an answer right now.","m.relates_to":{"event_id":"$eG8kKsg6p8Yp82q3k-7cSdaoHDln4yz-rQ7hpqGaRbU","is_falling_back":true,"m.in_reply_to":{"event_id":"$eG8kKsg6p8Yp82q3k-7cSdaoHDln4yz-rQ7hpqGaRbU"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1679592309554,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$L-TgzTDDcYspg5jD6OUVeTYtB_kHkHn6GoV_iPbZtAE"},
{"content":{"body":"when you do Promise.all(...).then, the execution context is clear (it's inherited from where Promise.all is called, and has nothing to do with the promises passed into Promise.all)","m.relates_to":{"event_id":"$eG8kKsg6p8Yp82q3k-7cSdaoHDln4yz-rQ7hpqGaRbU","is_falling_back":true,"m.in_reply_to":{"event_id":"$L-TgzTDDcYspg5jD6OUVeTYtB_kHkHn6GoV_iPbZtAE"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1679592353758,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$xRZ7QplhHWcMNS1hBh4homwdP5Djo7hGtI0GQ14gnwY"},
{"content":{"body":"> <@littledan:matrix.org> maybe we should make, say, monthly AsyncContext calls which would give an easy slot for this discussion\n\nüëç We can establish the regular call after the plenary","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!eQuZUAhGqudVFPodUG:matrix.org/$2jhZvmapbmluIxBbeSeglnhfk2eQ9dSfOR__XBEwGcA?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@littledan:matrix.org\">@littledan:matrix.org</a><br>maybe we should make, say, monthly AsyncContext calls which would give an easy slot for this discussion</blockquote></mx-reply>üëç We can establish the regular call after the plenary","m.relates_to":{"m.in_reply_to":{"event_id":"$2jhZvmapbmluIxBbeSeglnhfk2eQ9dSfOR__XBEwGcA"}},"msgtype":"m.text"},"ts":1679592357411,"senderName":"Chengzhong Wu","senderId":"@legendecas:matrix.org","id":"$O9Vjc58V7tf1kRXs4jlIA1tQefOFL1_UgQblGEssH9U"},
{"content":{"body":"Also, the context that's active when the all'd promise's `resolve()` is invoked is only the last promise item to resolve.","format":"org.matrix.custom.html","formatted_body":"Also, the context that's active when the all'd promise's <code>resolve()</code> is invoked is only the last promise item to resolve.","m.relates_to":{"event_id":"$eG8kKsg6p8Yp82q3k-7cSdaoHDln4yz-rQ7hpqGaRbU","is_falling_back":true,"m.in_reply_to":{"event_id":"$xRZ7QplhHWcMNS1hBh4homwdP5Djo7hGtI0GQ14gnwY"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1679592420182,"senderName":"Justin Ridgewell","senderId":"@jridgewell:matrix.org","id":"$WeZec172lSfloPWOjaI97SyRJaUgqQ_OvqPEouA-zFE"},
{"content":{"body":"Sure but this is also not used in the `.then`","format":"org.matrix.custom.html","formatted_body":"Sure but this is also not used in the <code>.then</code>","m.relates_to":{"event_id":"$eG8kKsg6p8Yp82q3k-7cSdaoHDln4yz-rQ7hpqGaRbU","is_falling_back":true,"m.in_reply_to":{"event_id":"$WeZec172lSfloPWOjaI97SyRJaUgqQ_OvqPEouA-zFE"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1679592446022,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$QElRAAFyjTVbAouqWPVbkqhVrh3hb6FA_vfpIUJbreU"},
{"content":{"body":"ongoing/open question: what is the best data structure to represent the snapshots?","m.relates_to":{"event_id":"$M8U7xbl5h0HsBzMV8u5mtRs9TPGMoEce5KWgjVUUJ3A","is_falling_back":true,"m.in_reply_to":{"event_id":"$tY-uftB2B-9T-LKYCYsarLIKHRNn1JhabmBHbNCEfZc"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1679592460736,"senderName":"Ben Newman (Apollo, @benjamn on GH)","senderId":"@benjamn:matrix.org","id":"$Lkzb4BI_xVZBe-_0Q6be4k2VCh-pbIqBuC8xN0rs9b8"},
{"content":{"body":"Right, I said it's the most obvious case, but basically it boils down to I need to learn the data associated with the context that resolved the promise","m.relates_to":{"event_id":"$eG8kKsg6p8Yp82q3k-7cSdaoHDln4yz-rQ7hpqGaRbU","is_falling_back":true,"m.in_reply_to":{"event_id":"$QElRAAFyjTVbAouqWPVbkqhVrh3hb6FA_vfpIUJbreU"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1679592486893,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$Etpcz8wEvpD5BuPVdvU-rpDxxfc0GSXu7U5PcJmEiMc"},
{"content":{"body":"Yeah, I just am missing how this applies at all. So I'm looking forward to an example application, maybe just concretely what motivates you to start thinking about this (even if that's not a relevant motivation for everyone)","m.relates_to":{"event_id":"$eG8kKsg6p8Yp82q3k-7cSdaoHDln4yz-rQ7hpqGaRbU","is_falling_back":true,"m.in_reply_to":{"event_id":"$Etpcz8wEvpD5BuPVdvU-rpDxxfc0GSXu7U5PcJmEiMc"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1679592534860,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$YCxsi9sVmCyjfA69XLS5vTpnMSNbB4FkRtjmx252cf8"},
{"content":{"body":"I'm actually surprised no one wants this. It's invaluable for diagnostics to understand the 2 causality paths on how you got where you are. Sure the registration path is often the most important, but the resolving path is also relevant.","m.relates_to":{"event_id":"$eG8kKsg6p8Yp82q3k-7cSdaoHDln4yz-rQ7hpqGaRbU","is_falling_back":true,"m.in_reply_to":{"event_id":"$YCxsi9sVmCyjfA69XLS5vTpnMSNbB4FkRtjmx252cf8"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1679592685856,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$XgYgsIedSv8As_jC78CI5doooo0aAkFF0jd_oPnzag8"},
{"content":{"body":"OK, good, we're getting concrete: diagnostics.","m.relates_to":{"event_id":"$eG8kKsg6p8Yp82q3k-7cSdaoHDln4yz-rQ7hpqGaRbU","is_falling_back":true,"m.in_reply_to":{"event_id":"$XgYgsIedSv8As_jC78CI5doooo0aAkFF0jd_oPnzag8"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1679592725609,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$GbB513wIGwmIN8ODUSBchhNjmhgk-EE1QpqBA5B_SFY"},
{"content":{"body":"That is one of my use cases yes","m.relates_to":{"event_id":"$eG8kKsg6p8Yp82q3k-7cSdaoHDln4yz-rQ7hpqGaRbU","is_falling_back":true,"m.in_reply_to":{"event_id":"$GbB513wIGwmIN8ODUSBchhNjmhgk-EE1QpqBA5B_SFY"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1679592746152,"senderName":"Mathieu Hofman","senderId":"@mhofman:matrix.org","id":"$0k8SvkQu2fsk3hqOZpb5cLG9uq6stcJ-yrIJ5Bmc57U"},
{"content":{"body":"OK, looking forward to the writeup giving the set of your use cases; sorry for the distraction from Shu's presentation.","m.relates_to":{"event_id":"$eG8kKsg6p8Yp82q3k-7cSdaoHDln4yz-rQ7hpqGaRbU","is_falling_back":true,"m.in_reply_to":{"event_id":"$0k8SvkQu2fsk3hqOZpb5cLG9uq6stcJ-yrIJ5Bmc57U"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1679592778473,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$uxWCP4mWgeSZEHwcvGkN24GC6w_prUzlHrErpjg6esM"},
{"content":{"body":"I think I share/want this use case, though I need more details for alignment","m.relates_to":{"event_id":"$eG8kKsg6p8Yp82q3k-7cSdaoHDln4yz-rQ7hpqGaRbU","is_falling_back":true,"m.in_reply_to":{"event_id":"$uxWCP4mWgeSZEHwcvGkN24GC6w_prUzlHrErpjg6esM"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1679592829161,"senderName":"Ben Newman (Apollo, @benjamn on GH)","senderId":"@benjamn:matrix.org","id":"$GiyoPt6Yjes1BiH37AJZwPpONoC7Ft4dnLAx3HLypIQ"},
{"content":{"body":"looking forward to digging into use cases during stage 2","m.relates_to":{"event_id":"$eG8kKsg6p8Yp82q3k-7cSdaoHDln4yz-rQ7hpqGaRbU","is_falling_back":true,"m.in_reply_to":{"event_id":"$GiyoPt6Yjes1BiH37AJZwPpONoC7Ft4dnLAx3HLypIQ"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1679592841392,"senderName":"Ben Newman (Apollo, @benjamn on GH)","senderId":"@benjamn:matrix.org","id":"$p31hQdvww9e1FAYsGaxY_KprJnoEAfs4N7lxQZrmrh4"},
{"content":{"body":"This feels like something which shouldn't be shared to me? I don't expect that resolving a promise exposes anything to consumers of the promise except the value of the promise","m.relates_to":{"event_id":"$eG8kKsg6p8Yp82q3k-7cSdaoHDln4yz-rQ7hpqGaRbU","is_falling_back":true,"m.in_reply_to":{"event_id":"$p31hQdvww9e1FAYsGaxY_KprJnoEAfs4N7lxQZrmrh4"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1679592860812,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$pdNbPh5Duxp0x2aYz5FHeNiP8rfY3OwJk4xUxO_NXEQ"},
{"content":{"body":"the async context which I was in when I did the resolving isn't theirs to see, it's mine","m.relates_to":{"event_id":"$eG8kKsg6p8Yp82q3k-7cSdaoHDln4yz-rQ7hpqGaRbU","is_falling_back":true,"m.in_reply_to":{"event_id":"$pdNbPh5Duxp0x2aYz5FHeNiP8rfY3OwJk4xUxO_NXEQ"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1679592875899,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$ByHV3itwnj4nFB9E7N_7Tj153dEvUtoNSGYmTSJxFdk"},
{"content":{"body":"(My intuition matches bakkot's. I'm really baffled by this whole thread. That's why I'm asking for the motivation.)","m.relates_to":{"event_id":"$eG8kKsg6p8Yp82q3k-7cSdaoHDln4yz-rQ7hpqGaRbU","is_falling_back":true,"m.in_reply_to":{"event_id":"$ByHV3itwnj4nFB9E7N_7Tj153dEvUtoNSGYmTSJxFdk"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1679592893301,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$fLZRokAOL95hWm-u2_2rjgTNR9tOEcdmD4-o1aeGsU4"}
]