[
{"content":{"body":"tbh I think, at least in the short term, a `Math.decimalAdd` etc. would be *more* ergonomic than the current approach, which would require `new`s and then a final `toString`","format":"org.matrix.custom.html","formatted_body":"tbh I think, at least in the short term, a <code>Math.decimalAdd</code> etc. would be <em>more</em> ergonomic than the current approach, which would require <code>new</code>s and then a final <code>toString</code>","m.mentions":{"user_ids":["@sffc:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$wimQ5SBU0fGgPkULfnB1625b_D2fmPklIDh3ChV3Z2Y"}},"msgtype":"m.text"},"ts":1741780552365,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$3tCs0dmq9eoOp0aHaHfLtiAu3r-nuOlCOF0WdznY79M"},
{"content":{"body":"> <@jesse:igalia.com> tbh I think, at least in the short term, a `Math.decimalAdd` etc. would be *more* ergonomic than the current approach, which would require `new`s and then a final `toString`\n\nI think this depends a lot on whether you are just doing one operation, or a series of operations ","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!NnKyFxSjabKpyjbPcL:matrix.org/$3tCs0dmq9eoOp0aHaHfLtiAu3r-nuOlCOF0WdznY79M?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@jesse:igalia.com\">@jesse:igalia.com</a><br />tbh I think, at least in the short term, a <code>Math.decimalAdd</code> etc. would be <em>more</em> ergonomic than the current approach, which would require <code>new</code>s and then a final <code>toString</code></blockquote></mx-reply>I think this depends a lot on whether you are just doing one operation, or a series of operations","m.relates_to":{"m.in_reply_to":{"event_id":"$3tCs0dmq9eoOp0aHaHfLtiAu3r-nuOlCOF0WdznY79M"}},"msgtype":"m.text"},"ts":1741780666106,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$bayzSfWzCkfvtosQuGrGWEzjmKbAiXuq3ZSLhpzIAXs"},
{"content":{"body":"what I find awkward about the `Math.decimalAdd` etc. approach is that it's all about strings; this feels conceptually off to me. I think of decimals as numbers","format":"org.matrix.custom.html","formatted_body":"what I find awkward about the <code>Math.decimalAdd</code> etc. approach is that it's all about strings; this feels conceptually off to me. I think of decimals as numbers","m.mentions":{},"msgtype":"m.text"},"ts":1741780683460,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$GGUXjRnhoLNR5vpMjy1d5Y4Co7sSk3O2wY1c6Mmkazw"},
{"content":{"body":"right -- and we want to keep calculation in the forefront, not merely conversion to/from strings","m.mentions":{"user_ids":["@nicolo-ribaudo:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$bayzSfWzCkfvtosQuGrGWEzjmKbAiXuq3ZSLhpzIAXs"}},"msgtype":"m.text"},"ts":1741780736328,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$CkZTPkf79KQ56uiM67lDOLiBzSnidXeTlhz0RvA98VI"},
{"content":{"body":"I like the idea of triaging the issues","m.mentions":{},"msgtype":"m.text"},"ts":1741780796457,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$qWw_gmJ7exwFJIvLwsjdRZX9jPkNtFjcy4e17KLZJ6Q"},
{"content":{"body":"do you really think so? I think it's meaningful to have decimal as a data type, and this discourages errors","m.mentions":{"user_ids":["@jesse:igalia.com","@sffc:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$3tCs0dmq9eoOp0aHaHfLtiAu3r-nuOlCOF0WdznY79M"}},"msgtype":"m.text"},"ts":1741780853715,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$RWHJOvYYL6MyBIV7Q283LQP-LMhIihkwhx6jzRhfgxE"},
{"content":{"body":"I was trying to suggest that both approaches are bulky; and Nic's point about arithmetic is imo a stronger point","m.mentions":{},"msgtype":"m.text"},"ts":1741780919400,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$Yaoc4PMUDY85xObidK6UuIcz3rkZlk-busBaAquH48M"},
{"content":{"body":"OK, so maybe focus on making the arguments in favor of things, rather than ambiguously making such concessions","m.mentions":{},"msgtype":"m.text"},"ts":1741780942474,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$iMRECFlKsG6UYc0d7l8jL_84uxu8mKeE4pe5bin6NJ8"},
{"content":{"body":"it seems odd to me to enable decimal arithmetic but not have decimal numbers","m.mentions":{},"msgtype":"m.text"},"ts":1741781440099,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$xSX2G013MZjoz9JlFGVSXshceEjl10OgwURi3FNVPtI"},
{"content":{"body":"iow I see it not just as an ergonomic concern","m.mentions":{},"msgtype":"m.text"},"ts":1741781507196,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$0y8B-QLVrvhiDTO153BeNcv_eVaLjmL6fvHscpaOE3Y"},
{"content":{"body":"but just to wrap up this line of thinking, my intention was to say that, in that one example, focusing on ergonomics is misleading","m.mentions":{},"msgtype":"m.text"},"ts":1741781663730,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$9U4MvbGaUf6-FVUvXDJ3Bhgmfq4DmLHK6fZpU3cef6U"},
{"content":{"body":"* tbh I think, at least in the short term, a `Math.decimalAdd` etc. would be _more_ ergonomic than the current approach, which would require `new`s and then a final `toString`, but that's misleading because it's a completely different approach","format":"org.matrix.custom.html","formatted_body":"* tbh I think, at least in the short term, a <code>Math.decimalAdd</code> etc. would be <em>more</em> ergonomic than the current approach, which would require <code>new</code>s and then a final <code>toString</code>, but that's misleading because it's a completely different approach","m.mentions":{},"m.new_content":{"body":"tbh I think, at least in the short term, a `Math.decimalAdd` etc. would be _more_ ergonomic than the current approach, which would require `new`s and then a final `toString`, but that's misleading because it's a completely different approach","format":"org.matrix.custom.html","formatted_body":"tbh I think, at least in the short term, a <code>Math.decimalAdd</code> etc. would be <em>more</em> ergonomic than the current approach, which would require <code>new</code>s and then a final <code>toString</code>, but that's misleading because it's a completely different approach","m.mentions":{"user_ids":["@sffc:mozilla.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$3tCs0dmq9eoOp0aHaHfLtiAu3r-nuOlCOF0WdznY79M","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1741781761486,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$BiFvshS-9buh_sPRHV1dSq-w6K90bkudSZSNx3Jo6eI"},
{"content":{"body":"* I think bulkiness isn't really the main thing to focus on here; we want to reduce errors by making a well-typed interface.","m.mentions":{},"m.new_content":{"body":"I think bulkiness isn't really the main thing to focus on here; we want to reduce errors by making a well-typed interface.","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$iMRECFlKsG6UYc0d7l8jL_84uxu8mKeE4pe5bin6NJ8","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1741781806241,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$avbQ5vx9_PJHVGZ4wV8W5YHpdB9o4lq0FXN-NNgDLeQ"},
{"content":{"body":"indeed, since we expect one main use cae to be doing calculations, I think if we were to pursue the `Math.decimalXYZ` idea developers would quickly see their code size grow. It seems more natural to me to have entities in the language (decimals) that we can directly work with, rather than stuff the semantics of those entities into static methods","format":"org.matrix.custom.html","formatted_body":"indeed, since we expect one main use cae to be doing calculations, I think if we were to pursue the <code>Math.decimalXYZ</code> idea developers would quickly see their code size grow. It seems more natural to me to have entities in the language (decimals) that we can directly work with, rather than stuff the semantics of those entities into static methods","m.mentions":{},"msgtype":"m.text"},"ts":1741782047971,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$D_yovJIYjEmaLsGpQgNvPgcZaRFskgugfSteOoQeXfI"},
{"content":{"body":"`Math.decimalAdd` is an exercise to demonstrate that we don't _need_ IEEE 754 Decimal128 in the data model of the language in order to represent decimals and have decimal-like arithmetic in the language. We _could_ do it with all of our existing utilities. I don't disagree with the points about a new type discouraging errors; I put that in the ergonomics bucket.\n\nThe reason I wanted us to do this exercise is because I think we need to be much more clear on why we are proposing this specific shape of proposal. It isn't because there aren't other ways to solve the same problem; it is because we believe that a new type system surrounding decimal numbers will help developers write better, more accurate code.","format":"org.matrix.custom.html","formatted_body":"<p><code>Math.decimalAdd</code> is an exercise to demonstrate that we don't <em>need</em> IEEE 754 Decimal128 in the data model of the language in order to represent decimals and have decimal-like arithmetic in the language. We <em>could</em> do it with all of our existing utilities. I don't disagree with the points about a new type discouraging errors; I put that in the ergonomics bucket.</p>\n<p>The reason I wanted us to do this exercise is because I think we need to be much more clear on why we are proposing this specific shape of proposal. It isn't because there aren't other ways to solve the same problem; it is because we believe that a new type system surrounding decimal numbers will help developers write better, more accurate code.</p>\n","m.mentions":{},"msgtype":"m.text"},"ts":1741797813721,"senderName":"sffc","senderId":"@sffc:mozilla.org","id":"$Bm8C-csoZJZ4-FNloZFJxXL-WHvHu8FRYysCyG2hwqo"}
]