[
{"content":{"body":"If we’re getting the calculations of significant digits wrong, even after adapting keep-trailing-zeros’s SDO, I wonder if there’s a bug in the SDO or whether I’m using it incorrectly","msgtype":"m.text"},"ts":1758521169928,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$RXngTccVbLL6GQ_VS29iNFeziN8W6_bOzV-yZlIs2gU"},
{"content":{"body":"what do we think of the suggestion to not even compute significant digits?","msgtype":"m.text"},"ts":1758521225892,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$tadtswCPHj5f0W8DlaPwX5d4mzactdSdGc_YCP0RkQo"},
{"content":{"body":"JRL usually comes but I’m not sure if he’s in the V8 team","msgtype":"m.text"},"ts":1758521252141,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$Xh4y7dvaTSSqRVe_nkBSJ2Eymsu4nr1AtEjearmrKJQ"},
{"content":{"body":"Morning. I've not looked at issues yet, but not computing significant digits has been on my mind as a decent solution. As in, I don't think without further information we can know whether `'4200'` has two or four significant digits, or whether `'0.042'` and `'4.2e-2'` have the same or different numbers of significant digits. I'll go find an issue where to comment on this more publicly.","format":"org.matrix.custom.html","formatted_body":"Morning. I've not looked at issues yet, but not computing significant digits has been on my mind as a decent solution. As in, I don't think without further information we can know whether <code>'4200'</code> has two or four significant digits, or whether <code>'0.042'</code> and <code>'4.2e-2'</code> have the same or different numbers of significant digits. I'll go find an issue where to comment on this more publicly.","m.mentions":{},"msgtype":"m.text"},"ts":1758523033431,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$igW1ayvrvY6Th28QPUU96dtEVXjA-07mYoJpRNLS2Kc"},
{"content":{"body":"regarding the issue of arithmetic, I thought we generally wanted to avoid that. At most, arithmetic would happen internally when doing unit conversions, but that's different from Amount offering you an API for doing arithmetic","m.mentions":{},"msgtype":"m.text"},"ts":1758524301934,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$SvDmnXMnf9BJeU9Lji7wh4QAm3qcOHXj-WDzGHBd4EM"},
{"content":{"body":"I'd say https://github.com/tc39/proposal-amount/issues/54 is a good candidate","m.mentions":{"user_ids":["@eemeli:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$igW1ayvrvY6Th28QPUU96dtEVXjA-07mYoJpRNLS2Kc"}},"msgtype":"m.text"},"ts":1758524327794,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$gq16cHEpM25jyWuF0OhM4MgqDLAgvOFttP091THMtNY"},
{"content":{"body":"It seems like you just forgot to subtract from the number of fractional digits the exponent, for numbers written in exponential notation ","msgtype":"m.text"},"ts":1758524541880,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$GaOImV-q31qD5yP4JbT8J5aTN5cBkKsfrf5QeepLbfw"},
{"content":{"body":"And then use the conversion between fractional and significant that WH proposes in the issue?","msgtype":"m.text"},"ts":1758524566631,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$iz2mwSVV7QSm949zRe5l0L5Ye-4g-Kv5gOqZu7TJZbo"},
{"content":{"body":"IIRC the spec already has a notion of \"significant digit\" whereby `4200` has 2 significant digits (a block of trailing zeros is ignored)","format":"org.matrix.custom.html","formatted_body":"IIRC the spec already has a notion of \"significant digit\" whereby <code>4200</code> has 2 significant digits (a block of trailing zeros is ignored)","m.mentions":{},"msgtype":"m.text"},"ts":1758524582955,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$TILKf0B_jEZN1VXG0ufulKirpverQesWmLxOMLpYqro"},
{"content":{"body":"*but*","format":"org.matrix.custom.html","formatted_body":"<em>but</em>","m.mentions":{},"msgtype":"m.text"},"ts":1758524586944,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$IIw31w73hPe_TsHD15ZMZ8gsAeJkxxMbBZ0smZJqh9k"},
{"content":{"body":"you're right that those *could* be significant","format":"org.matrix.custom.html","formatted_body":"you're right that those <em>could</em> be significant","m.mentions":{},"msgtype":"m.text"},"ts":1758524596543,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$rJiff6LoThnMH-0jkfvfjyELHDr0lcBmpPV_9Ec1LXg"},
{"content":{"body":"We should convert between the two using the algorithm we've always told Mark when he asked about the relationship between the two","msgtype":"m.text"},"ts":1758524658611,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$_gcogbTCKIiOO_Cr-1tehIcbXcVtEdusrHx7UAhaZpo"},
{"content":{"body":"the proposal as it stands does allow you to stipulate that `4200` has 4 digits","format":"org.matrix.custom.html","formatted_body":"the proposal as it stands does allow you to stipulate that <code>4200</code> has 4 digits","m.mentions":{},"msgtype":"m.text"},"ts":1758524710600,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$fi8ygzd7Yj3-k3PjdocL_sTm5BwXY30zsvSWOacyoUw"},
{"content":{"body":"That seems what I expect","msgtype":"m.text"},"ts":1758524765397,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$Hk_9pyrnX-_crDBosxTWEuIa7uw0qnImxQ2opZtmZ8M"},
{"content":{"body":"And 4.2e2 has 2","msgtype":"m.text"},"ts":1758524770965,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$AGZ1qMK0By6wZaurN3zC7akBJnCIN_Ns90a8Z288LO0"},
{"content":{"body":"> <@nicolo-ribaudo:matrix.org> We should convert between the two using the algorithm we've always told Mark when he asked about the relationship between the two\n\nsignificant = fractional + ceil(1+ log10(value)), I think","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!NnKyFxSjabKpyjbPcL:matrix.org/$_gcogbTCKIiOO_Cr-1tehIcbXcVtEdusrHx7UAhaZpo?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@nicolo-ribaudo:matrix.org\">@nicolo-ribaudo:matrix.org</a><br />We should convert between the two using the algorithm we've always told Mark when he asked about the relationship between the two</blockquote></mx-reply>significant = fractional + ceil(1+ log10(value)), I think","m.relates_to":{"m.in_reply_to":{"event_id":"$_gcogbTCKIiOO_Cr-1tehIcbXcVtEdusrHx7UAhaZpo"}},"msgtype":"m.text"},"ts":1758524781183,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$n8nbDql8zlTbKQpK5Br3KkoWQzWu3z1uXxwU1itwP8k"},
{"content":{"body":"Added my comment to #54.","m.mentions":{},"msgtype":"m.text"},"ts":1758524790442,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$r8hjCxpnxcN-5KihsRgh-IOlNzpuRGhD78M6haQ4fHM"},
{"content":{"body":"I thnk the keep-trailing-zeros would say `4200` has 4 if I understand http://tc39.es/proposal-intl-keep-trailing-zeros/#sec-runtime-semantics-stringintlmv ","format":"org.matrix.custom.html","formatted_body":"I thnk the keep-trailing-zeros would say <code>4200</code> has 4 if I understand http://tc39.es/proposal-intl-keep-trailing-zeros/#sec-runtime-semantics-stringintlmv","m.mentions":{},"msgtype":"m.text"},"ts":1758524857445,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$BvUjZ9e0T80_q0w0ftnDE_E2hvO0ZJsjVGNQ2exeMIA"},
{"content":{"body":"Idk I studied in school that for significant digits you include all the zeros on the right of the number","msgtype":"m.text"},"ts":1758524876581,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$1vbs7mrAaaT53a0uXnmRpKN7Vd8YKOCrUWTdPPwzMVI"},
{"content":{"body":"right, we can calculate one from the other","m.mentions":{"user_ids":["@nicolo-ribaudo:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$n8nbDql8zlTbKQpK5Br3KkoWQzWu3z1uXxwU1itwP8k"}},"msgtype":"m.text"},"ts":1758524879596,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$SHHGgLjrZbSLv14GjNHuMyxRq103xSUrfknIZV7CI4M"},
{"content":{"body":"That's what it should be doing, yes.","m.mentions":{"user_ids":["@jesse:igalia.com"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$BvUjZ9e0T80_q0w0ftnDE_E2hvO0ZJsjVGNQ2exeMIA"}},"msgtype":"m.text"},"ts":1758524882698,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$7hZUNbtKzR4CrYGBtV6oLOuGU4UR0aI4l1eREqrpA80"},
{"content":{"body":"well, in a certain understanding of \"significant digits\"","m.mentions":{},"msgtype":"m.text"},"ts":1758524888533,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$dJWrboDUdohbn4bxjtBKgEufpa1dZ5f4oJVAUPfmVNE"},
{"content":{"body":"> <@nicolo-ribaudo:matrix.org> Idk I studied in school that for significant digits you include all the zeros on the right of the number\n\nWhich makes the answer for 4200 quite clear","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!NnKyFxSjabKpyjbPcL:matrix.org/$1vbs7mrAaaT53a0uXnmRpKN7Vd8YKOCrUWTdPPwzMVI?via=matrix.org&via=igalia.com&via=mozilla.org\">In reply to</a> <a href=\"https://matrix.to/#/@nicolo-ribaudo:matrix.org\">@nicolo-ribaudo:matrix.org</a><br />Idk I studied in school that for significant digits you include all the zeros on the right of the number</blockquote></mx-reply>Which makes the answer for 4200 quite clear","m.relates_to":{"m.in_reply_to":{"event_id":"$1vbs7mrAaaT53a0uXnmRpKN7Vd8YKOCrUWTdPPwzMVI"}},"msgtype":"m.text"},"ts":1758524899244,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$Ue-St6_j8ImuvqQjlQ7a6rs7wtjstnNLAE0ykZ94_8M"},
{"content":{"body":"I think the calculation approach doesn't work well with the current \"ignore tailing zeroes, including in the integer part\" perspective","m.mentions":{},"msgtype":"m.text"},"ts":1758525012950,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$U3HfSfMwBpvTE8ml7Al6Snz3_HcLmoKNFQhucH0_zho"}
]