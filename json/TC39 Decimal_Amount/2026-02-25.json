[
{"content":{"body":"Richard Gibson: Just to make sure I understand [this comment](https://github.com/tc39/proposal-intl-keep-trailing-zeros/pull/10#issuecomment-3949688212) right, do you mean that you'd prefer the following formatting results?\n```\nlet sf = new Intl.NumberFormat('en', { notation: 'scientific' })\nsf.format('101') // '1.01E2'\nsf.format('100') // '1E2'\nsf.format('1.00') // '1.00E0'\n```\n\nIf so, I don't think I agree, as I think the trailing zeros of `'100'` should also be retained. Note that this only affects formatting with scientific or engineering notation, as those are the only cases where we might end up formatting trailing zeros that are parts of the integer in the input as fractional zeros of the output.","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@gibson042:matrix.org\">Richard Gibson</a>: Just to make sure I understand <a href=\"https://github.com/tc39/proposal-intl-keep-trailing-zeros/pull/10#issuecomment-3949688212\">this comment</a> right, do you mean that you'd prefer the following formatting results?</p>\n<pre><code>let sf = new Intl.NumberFormat('en', { notation: 'scientific' })\nsf.format('101') // '1.01E2'\nsf.format('100') // '1E2'\nsf.format('1.00') // '1.00E0'\n</code></pre>\n<p>If so, I don't think I agree, as I think the trailing zeros of <code>'100'</code> should also be retained. Note that this only affects formatting with scientific or engineering notation, as those are the only cases where we might end up formatting trailing zeros that are parts of the integer in the input as fractional zeros of the output.</p>\n","m.mentions":{"user_ids":["@gibson042:matrix.org"]},"msgtype":"m.text"},"ts":1772022466364,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$AnhWGkj6dc_eJpmsxwqS2ivuACI4yoCn-psKxdCTw3Q"},
{"content":{"body":"* Richard Gibson: Just to make sure I understand [this comment](https://github.com/tc39/proposal-intl-keep-trailing-zeros/pull/10#issuecomment-3949688212) right, do you mean that you'd prefer the following formatting results?\n\n```\nlet sf = new Intl.NumberFormat('en', { notation: 'scientific' })\nsf.format('101')  // '1.01E2'\nsf.format('100')  // '1E2'\nsf.format('1.00') // '1.00E0'\n```\n\nIf so, I don't think I agree, as I think the trailing zeros of `'100'` should also be retained. Note that this only affects formatting with scientific or engineering notation, as those are the only cases where we might end up formatting trailing zeros that are parts of the integer in the input as fractional zeros of the output.","format":"org.matrix.custom.html","formatted_body":"* <p><a href=\"https://matrix.to/#/@gibson042:matrix.org\">Richard Gibson</a>: Just to make sure I understand <a href=\"https://github.com/tc39/proposal-intl-keep-trailing-zeros/pull/10#issuecomment-3949688212\">this comment</a> right, do you mean that you'd prefer the following formatting results?</p>\n<pre><code>let sf = new Intl.NumberFormat('en', { notation: 'scientific' })\nsf.format('101')  // '1.01E2'\nsf.format('100')  // '1E2'\nsf.format('1.00') // '1.00E0'\n</code></pre>\n<p>If so, I don't think I agree, as I think the trailing zeros of <code>'100'</code> should also be retained. Note that this only affects formatting with scientific or engineering notation, as those are the only cases where we might end up formatting trailing zeros that are parts of the integer in the input as fractional zeros of the output.</p>\n","m.mentions":{},"m.new_content":{"body":"Richard Gibson: Just to make sure I understand [this comment](https://github.com/tc39/proposal-intl-keep-trailing-zeros/pull/10#issuecomment-3949688212) right, do you mean that you'd prefer the following formatting results?\n\n```\nlet sf = new Intl.NumberFormat('en', { notation: 'scientific' })\nsf.format('101')  // '1.01E2'\nsf.format('100')  // '1E2'\nsf.format('1.00') // '1.00E0'\n```\n\nIf so, I don't think I agree, as I think the trailing zeros of `'100'` should also be retained. Note that this only affects formatting with scientific or engineering notation, as those are the only cases where we might end up formatting trailing zeros that are parts of the integer in the input as fractional zeros of the output.","format":"org.matrix.custom.html","formatted_body":"<p><a href=\"https://matrix.to/#/@gibson042:matrix.org\">Richard Gibson</a>: Just to make sure I understand <a href=\"https://github.com/tc39/proposal-intl-keep-trailing-zeros/pull/10#issuecomment-3949688212\">this comment</a> right, do you mean that you'd prefer the following formatting results?</p>\n<pre><code>let sf = new Intl.NumberFormat('en', { notation: 'scientific' })\nsf.format('101')  // '1.01E2'\nsf.format('100')  // '1E2'\nsf.format('1.00') // '1.00E0'\n</code></pre>\n<p>If so, I don't think I agree, as I think the trailing zeros of <code>'100'</code> should also be retained. Note that this only affects formatting with scientific or engineering notation, as those are the only cases where we might end up formatting trailing zeros that are parts of the integer in the input as fractional zeros of the output.</p>\n","m.mentions":{"user_ids":["@gibson042:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$AnhWGkj6dc_eJpmsxwqS2ivuACI4yoCn-psKxdCTw3Q","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1772022499399,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$WgyUFn6MN3TVlg48oPc4WqeVoAGGhvOyFvioALFl8F0"},
{"content":{"body":"yes, that is what I mean. There is ambiguity regarding zeros in `\"100\"`, but the conventions with which I'm familiar treat them as insignificant (as described in material from e.g. [Significant Figures Calculator](https://www.sigfigscalculator.com/articles/significant-figures-rules.php#title:~:text=Rule%204%20%2D%20final%20or%20trailing%20zeroes%20are%20significant%20only%20after%20a%20decimal%20point), [Columbia University](https://ccnmtl.columbia.edu/projects/mmt/frontiers/web/chapter_5/6665.html#:~:text=Trailing%20zeros%20in%20a%20whole%20number%20with%20no%20decimal%20shown%20are%20NOT%20significant), [Texas A&M University](https://www.chem.tamu.edu/class/fyp/mathrev/mr-sigfg.html#:~:text=x%20102-,Trailing%20zeros%20are%20significant%20only%20if%20the%20decimal%20point%20is%20specified,-.), and [Khan Academy](https://en.khanacademy.org/science/grade-11-physics-snc-aligned/x1d0fed5276339e80:measurements/x1d0fed5276339e80:analyzing-accuracy-precision-and-derived-quantity-uncertainties/v/more-on-significant-figures))","format":"org.matrix.custom.html","formatted_body":"yes, that is what I mean. There is ambiguity regarding zeros in <code>\"100\"</code>, but the conventions with which I'm familiar treat them as insignificant (as described in material from e.g. <a href=\"https://www.sigfigscalculator.com/articles/significant-figures-rules.php#title:~:text=Rule%204%20%2D%20final%20or%20trailing%20zeroes%20are%20significant%20only%20after%20a%20decimal%20point\">Significant Figures Calculator</a>, <a href=\"https://ccnmtl.columbia.edu/projects/mmt/frontiers/web/chapter_5/6665.html#:~:text=Trailing%20zeros%20in%20a%20whole%20number%20with%20no%20decimal%20shown%20are%20NOT%20significant\">Columbia University</a>, <a href=\"https://www.chem.tamu.edu/class/fyp/mathrev/mr-sigfg.html#:~:text=x%20102-,Trailing%20zeros%20are%20significant%20only%20if%20the%20decimal%20point%20is%20specified,-.\">Texas A&amp;M University</a>, and <a href=\"https://en.khanacademy.org/science/grade-11-physics-snc-aligned/x1d0fed5276339e80:measurements/x1d0fed5276339e80:analyzing-accuracy-precision-and-derived-quantity-uncertainties/v/more-on-significant-figures\">Khan Academy</a>)","m.mentions":{"user_ids":["@eemeli:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$AnhWGkj6dc_eJpmsxwqS2ivuACI4yoCn-psKxdCTw3Q"}},"msgtype":"m.text"},"ts":1772036721807,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$6Vn-QY3XSTQ5Ah_szxA9uAteVejKJ5hSKGuOVS2G4J0"},
{"content":{"body":"but further note that specific rules regarding disambiguation of trailing zeros are independent of the main point about how the spec should represent string-based decimals","m.mentions":{},"msgtype":"m.text"},"ts":1772036984871,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$8DqOFB7BAFR1sqlYMDLC2QpceMzogDHhRObPy6Kh3QE"},
{"content":{"body":"* but further note that specific rules regarding disambiguation of trailing zeros are independent of the main point about how the spec should internally represent string-based decimals","m.mentions":{},"m.new_content":{"body":"but further note that specific rules regarding disambiguation of trailing zeros are independent of the main point about how the spec should internally represent string-based decimals","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$8DqOFB7BAFR1sqlYMDLC2QpceMzogDHhRObPy6Kh3QE","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1772037112556,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$-aflVA39fNjXIs_-lZsdvT1Ssrf7QjQAg2XIac-25c4"},
{"content":{"body":"* but further note that specific rules regarding disambiguation of trailing zeros are independent of the main point about how the spec should internally represent string-based decimals. Treating integer zeros as significant would change only the second data row of that table, from [\"d₁…dₖ\", x + s] (*d × 10^(x + s)*) to [\"d₁…dₖ0₁…0ₛ\", x] (*(d × 10^s) × 10^x*)","format":"org.matrix.custom.html","formatted_body":"* but further note that specific rules regarding disambiguation of trailing zeros are independent of the main point about how the spec should internally represent string-based decimals. Treating integer zeros as significant would change only the second data row of that table, from [\"d₁…dₖ\", x + s] (<em>d × 10^(x + s)</em>) to [\"d₁…dₖ0₁…0ₛ\", x] (<em>(d × 10^s) × 10^x</em>)","m.mentions":{},"m.new_content":{"body":"but further note that specific rules regarding disambiguation of trailing zeros are independent of the main point about how the spec should internally represent string-based decimals. Treating integer zeros as significant would change only the second data row of that table, from [\"d₁…dₖ\", x + s] (*d × 10^(x + s)*) to [\"d₁…dₖ0₁…0ₛ\", x] (*(d × 10^s) × 10^x*)","format":"org.matrix.custom.html","formatted_body":"but further note that specific rules regarding disambiguation of trailing zeros are independent of the main point about how the spec should internally represent string-based decimals. Treating integer zeros as significant would change only the second data row of that table, from [\"d₁…dₖ\", x + s] (<em>d × 10^(x + s)</em>) to [\"d₁…dₖ0₁…0ₛ\", x] (<em>(d × 10^s) × 10^x</em>)","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$8DqOFB7BAFR1sqlYMDLC2QpceMzogDHhRObPy6Kh3QE","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1772037589695,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$ze9apyU61nisXhsWEJXlg0TRoDXoki0XlzTci9p5AqQ"},
{"content":{"body":"* but further note that specific rules regarding disambiguation of trailing zeros are independent of the main point about how the spec should internally represent string-based decimals. Treating integer zeros as significant would change only the second data row of that table, from \\[\"d₁…dₖ\", x + s\\] (_d × 10^(x + s)_) to \\[\"d₁…dₖ0₁…0ₛ\", x\\] (_(d × 10^s) × 10^x_).","format":"org.matrix.custom.html","formatted_body":"* but further note that specific rules regarding disambiguation of trailing zeros are independent of the main point about how the spec should internally represent string-based decimals. Treating integer zeros as significant would change only the second data row of that table, from [\"d₁…dₖ\", x + s] (<em>d × 10^(x + s)</em>) to [\"d₁…dₖ0₁…0ₛ\", x] (<em>(d × 10^s) × 10^x</em>).","m.mentions":{},"m.new_content":{"body":"but further note that specific rules regarding disambiguation of trailing zeros are independent of the main point about how the spec should internally represent string-based decimals. Treating integer zeros as significant would change only the second data row of that table, from \\[\"d₁…dₖ\", x + s\\] (_d × 10^(x + s)_) to \\[\"d₁…dₖ0₁…0ₛ\", x\\] (_(d × 10^s) × 10^x_).","format":"org.matrix.custom.html","formatted_body":"but further note that specific rules regarding disambiguation of trailing zeros are independent of the main point about how the spec should internally represent string-based decimals. Treating integer zeros as significant would change only the second data row of that table, from [\"d₁…dₖ\", x + s] (<em>d × 10^(x + s)</em>) to [\"d₁…dₖ0₁…0ₛ\", x] (<em>(d × 10^s) × 10^x</em>).","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$8DqOFB7BAFR1sqlYMDLC2QpceMzogDHhRObPy6Kh3QE","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1772037621171,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$a-VpO-fMrm4zS31W8ws_coi-CGNzEIgqE59ESyaLNzw"},
{"content":{"body":"While I agree that there is some ambiguity here, we do also have a convention on this directly within ECMA-262:\n```\n(100).toPrecision(1) // '1e+2'\n(100).toPrecision(3) // '100'\n```\n\nAs I see it, we should follow the existing spec precedent, especially as this only impacts the results when formatting with scientific or engineering notation.","format":"org.matrix.custom.html","formatted_body":"<p>While I agree that there is some ambiguity here, we do also have a convention on this directly within ECMA-262:</p>\n<pre><code>(100).toPrecision(1) // '1e+2'\n(100).toPrecision(3) // '100'\n</code></pre>\n<p>As I see it, we should follow the existing spec precedent, especially as this only impacts the results when formatting with scientific or engineering notation.</p>\n","m.mentions":{"user_ids":["@gibson042:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$6Vn-QY3XSTQ5Ah_szxA9uAteVejKJ5hSKGuOVS2G4J0"}},"msgtype":"m.text"},"ts":1772046094969,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$RG6o16nNCB-TfNTKEdnjTgUk3lss1cc51_S6jfrQTIk"},
{"content":{"body":"I don't think that is a relevant precedent","m.mentions":{},"msgtype":"m.text"},"ts":1772046170966,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$AiCDZRbmvDh5r7leOWNnhPeAVwEcXo8GbZHfdiw6anA"},
{"content":{"body":"Context here is that I'm currently working on an update to the proposal's PR #10 that'll disregard the exponent in the string digits calculation, along with any and all leading zeros. This will match your latest proposal pretty closely, only diverging by considering \"100\" and \"1.00\" as belonging to the same sequence, as you put it.","m.mentions":{},"msgtype":"m.text"},"ts":1772046533349,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$PLzUsO6b9o5GSZjtLSusdDvNi1f9CnijMZ-QVlFoy9M"},
{"content":{"body":"My own sense here is that this understanding is more useful, as it's easier to get the ignore-integral-trailing-zeros behaviour by wrapping the formattable numeric string in `Number()`.","format":"org.matrix.custom.html","formatted_body":"My own sense here is that this understanding is more useful, as it's easier to get the ignore-integral-trailing-zeros behaviour by wrapping the formattable numeric string in <code>Number()</code>.","m.mentions":{},"msgtype":"m.text"},"ts":1772046693322,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$2a6ABQEV9hXWE6wC75oDC-T0lIm5VgYOjsDQt2Ylc-E"},
{"content":{"body":"If we understood `\"100\"` to have only one significant digit, you'd need to transform it as `(100).toExponential(2)` to ensure that it's parsed as having three significant digits.","format":"org.matrix.custom.html","formatted_body":"If we understood <code>\"100\"</code> to have only one significant digit, you'd need to transform it as <code>(100).toExponential(2)</code> to ensure that it's parsed as having three significant digits.","m.mentions":{},"msgtype":"m.text"},"ts":1772046955839,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$b4xzFb9IKYXY0mVleg60KLJ7ebKZVdMz0CuUyaDf-Bk"},
{"content":{"body":"* If we understood `\"100\"` to have only one significant digit, you'd need to transform it as `Number(\"100\").toExponential(2)` to ensure that it's parsed as having three significant digits.","format":"org.matrix.custom.html","formatted_body":"* If we understood <code>\"100\"</code> to have only one significant digit, you'd need to transform it as <code>Number(\"100\").toExponential(2)</code> to ensure that it's parsed as having three significant digits.","m.mentions":{},"m.new_content":{"body":"If we understood `\"100\"` to have only one significant digit, you'd need to transform it as `Number(\"100\").toExponential(2)` to ensure that it's parsed as having three significant digits.","format":"org.matrix.custom.html","formatted_body":"If we understood <code>\"100\"</code> to have only one significant digit, you'd need to transform it as <code>Number(\"100\").toExponential(2)</code> to ensure that it's parsed as having three significant digits.","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$b4xzFb9IKYXY0mVleg60KLJ7ebKZVdMz0CuUyaDf-Bk","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1772046972812,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$0JGR9ErqjsNdoehZ2aMCt8YBPc52fADuwZrQUaCxGF0"},
{"content":{"body":"I think it would also mean that we'd want to do this to ensure that round-tripping was not lossy, while keeping the value as simple as possible:\n```\nlet a = new Amount(100, { significantDigits: 3 })\na.value // '1.00e+2'\n\nlet b = new Amount(101, { significantDigits: 3 })\nb.value // '101'\n```\nThat seems unnecessarily clumsy?","format":"org.matrix.custom.html","formatted_body":"<p>I think it would also mean that we'd want to do this to ensure that round-tripping was not lossy, while keeping the value as simple as possible:</p>\n<pre><code>let a = new Amount(100, { significantDigits: 3 })\na.value // '1.00e+2'\n\nlet b = new Amount(101, { significantDigits: 3 })\nb.value // '101'\n</code></pre>\n<p>That seems unnecessarily clumsy?</p>\n","m.mentions":{},"msgtype":"m.text"},"ts":1772047185145,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$hYZ_R65nETJwF2dCFVJ_Q-pqlNpqesv8UuIRvAZzprM"}
]