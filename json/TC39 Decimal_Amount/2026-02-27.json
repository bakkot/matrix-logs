[
{"content":{"body":"Where did we land on currency amounts? Are they exported via the `unit` getter?","format":"org.matrix.custom.html","formatted_body":"Where did we land on currency amounts? Are they exported via the <code>unit</code> getter?","m.mentions":{},"msgtype":"m.text"},"ts":1772156434044,"senderName":"sffc","senderId":"@sffc:mozilla.org","id":"$vhaUeo9zM4n2qrppbRuPJtdVxTtcco6gqNKcEMDxfTM"},
{"content":{"body":"(we can change in Stage 2 but I want to make sure Intl Unit Protocol is up to date)","m.mentions":{},"msgtype":"m.text"},"ts":1772156455888,"senderName":"sffc","senderId":"@sffc:mozilla.org","id":"$-IctzgUoWqEKW00tWcbI9Q19ENVVuK-3yImZ45aeF3I"},
{"content":{"body":"Draft slides: https://docs.google.com/presentation/d/1ECuRD0MU6-Z5DzBJaOi5W3u7f2kf_PZYZU9cXjg5Ock/edit?slide=id.p#slide=id.p","m.mentions":{},"msgtype":"m.text"},"ts":1772156723097,"senderName":"sffc","senderId":"@sffc:mozilla.org","id":"$tc8IF45TVcrHmAxRgD4Y6tl8kh0ImgS3yrz-pG2Vjd8"},
{"content":{"body":"I intend to copy the Intl spec from Amount into Intl Unit Protocol as late as possible before the deadline","m.mentions":{},"msgtype":"m.text"},"ts":1772156760228,"senderName":"sffc","senderId":"@sffc:mozilla.org","id":"$v2Rvv-53xrt6mj3I7vOywGEBTVamVzRfYQdWkOwl1Ik"},
{"content":{"body":"yes, with no special treatment other than \"_Unit identifiers consisting of three upper-case ASCII letters will be formatted with `style: 'currency'`_\": https://github.com/tc39/proposal-amount?tab=readme-ov-file#units-including-currency","format":"org.matrix.custom.html","formatted_body":"yes, with no special treatment other than \"<em>Unit identifiers consisting of three upper-case ASCII letters will be formatted with <code>style: 'currency'</code></em>\": https://github.com/tc39/proposal-amount?tab=readme-ov-file#units-including-currency","m.mentions":{"user_ids":["@sffc:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$vhaUeo9zM4n2qrppbRuPJtdVxTtcco6gqNKcEMDxfTM"}},"msgtype":"m.text"},"ts":1772157089293,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$3TfDE62Fz4B6FJfDKCn50bby5uEzi3Fz2pABqnvY59c"},
{"content":{"body":"I added my two proposals to the agenda, pending the spec availability for Intl Unit Protocol: https://github.com/tc39/agendas/commit/f6f0435b4ceda82c31f997b02473ffb15027dbd7","m.mentions":{},"msgtype":"m.text"},"ts":1772158314334,"senderName":"sffc","senderId":"@sffc:mozilla.org","id":"$r2Jsvcn-D7Hzw3KmSpxEjU2bMn5lhaMCoEgfVDqxKW0"},
{"content":{"body":"Draft slides for Amount: https://docs.google.com/presentation/d/1SAD0bgB_SOWrtz1YZuySC4YHdMxBs0vTnS7buQa311c/edit?usp=sharing\n\nPlease request permissions as necessary; for now I added ecma402-delegates@chromium.org as editor.","m.mentions":{},"msgtype":"m.text"},"ts":1772202767863,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$sSYi6xHJ3sbTYwcur6NnNPL1UlHfXfUVHIPV8IVkFCQ"},
{"content":{"body":"I've opened a (somewhat) simplified PR to align with the README changes: https://github.com/tc39/proposal-amount/pull/85","m.mentions":{},"msgtype":"m.text"},"ts":1772206206731,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$eI-VKfrN0HCG0gouiATajo4eywnH4cl7ns7lXSmMbw0"},
{"content":{"body":"would someone like to file an issue about using exponential notation?","m.mentions":{},"msgtype":"m.text"},"ts":1772207323677,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$ayahm__Qck80z9NzTUSfediIbc8Tv1W224r9J4zzT2M"},
{"content":{"body":"(that idea isn't in the spec text PR)","m.mentions":{},"msgtype":"m.text"},"ts":1772207362149,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$kGBsZ0YEWqF4B1QB4kCnW_eC4dB5RWDfVlmmEBBQ_HQ"},
{"content":{"body":"it wasn't quite clear to me, upon reflection, what the scope of the idea was:","m.mentions":{},"msgtype":"m.text"},"ts":1772207568396,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$E4wnppZrJTJQC4LMK0eerJV9Sk0n9rVYdE0FzW5DZmY"},
{"content":{"body":"when we say we want to use exponential notation for string-y Amounts, do we also convert things like `\"123.456\"` into `\"1.23456e2\"`?","format":"org.matrix.custom.html","formatted_body":"when we say we want to use exponential notation for string-y Amounts, do we also convert things like <code>\"123.456\"</code> into <code>\"1.23456e2\"</code>?","m.mentions":{},"msgtype":"m.text"},"ts":1772207674548,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$ZxYyq03kWDch6t080jh-mOQIsQDOzuiCdbXtRxwKo3o"},
{"content":{"body":"like, `new Amount(\"123.456\").value === \"1.23456e2\"`?","format":"org.matrix.custom.html","formatted_body":"like, <code>new Amount(\"123.456\").value === \"1.23456e2\"</code>?","m.mentions":{},"msgtype":"m.text"},"ts":1772207691359,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$TzAz7Rl937SFTQAPtLOdnA-KEhhVHmye17MHpPCrblE"},
{"content":{"body":"or do we convert to exponential notation only when some kind of calculation (rounding, reducing, or expanding fraction or significant digits)?","m.mentions":{},"msgtype":"m.text"},"ts":1772207796024,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$ObzCGdkfQIHHda3x19MY5j0wC4IaFQQjSr5PjD8MFmk"},
{"content":{"body":"This would change the precision, right?","m.mentions":{"user_ids":["@jesse:igalia.com"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$ZxYyq03kWDch6t080jh-mOQIsQDOzuiCdbXtRxwKo3o"}},"msgtype":"m.text"},"ts":1772207939492,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$74-0dMHEQCisZ3fMC42XaRKhqjJPY6ECwMtBgnqKOiM"},
{"content":{"body":"I think I'm fine with this","m.mentions":{"user_ids":["@jesse:igalia.com"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$ObzCGdkfQIHHda3x19MY5j0wC4IaFQQjSr5PjD8MFmk"}},"msgtype":"m.text"},"ts":1772208025881,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$gTqyfSP9TisJ_H3RrLJt0U2PfTZFAKcPE-VFZZYVZIU"},
{"content":{"body":"Nevermind, ignore this ðŸ˜…","m.mentions":{},"m.relates_to":{"m.in_reply_to":{"event_id":"$74-0dMHEQCisZ3fMC42XaRKhqjJPY6ECwMtBgnqKOiM"}},"msgtype":"m.text"},"ts":1772208107924,"senderName":"nicolo-ribaudo","senderId":"@nicolo-ribaudo:matrix.org","id":"$df1pVzp-5M8rUJlnWoVoIswAr4OXftEabPze_gKasS8"},
{"content":{"body":"<del>I think</del> oh ok","format":"org.matrix.custom.html","formatted_body":"<del>I think</del> oh ok","m.mentions":{"user_ids":["@nicolo-ribaudo:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$74-0dMHEQCisZ3fMC42XaRKhqjJPY6ECwMtBgnqKOiM"}},"msgtype":"m.text"},"ts":1772208123604,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$R-wWN6sorAeVgpoTdaB0ZMbfvBKfHoLu-n3YGoV2W2A"},
{"content":{"body":"...but I guess that's to be sorted out in the issue. Preserving an input string as-is entails lots of potential variationâ€”leading zeros, casing of \"e\" in the exponential part, optionality of \"+\" for a positive exponent, and arguably even non-decimal representations like \"0x0\" or \"0o7\". Although that last one seems best handled by converting to Number, such that `new Amount(\"0xFF\").value === 255`.","format":"org.matrix.custom.html","formatted_body":"...but I guess that's to be sorted out in the issue. Preserving an input string as-is entails lots of potential variationâ€”leading zeros, casing of \"e\" in the exponential part, optionality of \"+\" for a positive exponent, and arguably even non-decimal representations like \"0x0\" or \"0o7\". Although that last one seems best handled by converting to Number, such that <code>new Amount(\"0xFF\").value === 255</code>.","m.mentions":{},"m.relates_to":{"m.in_reply_to":{"event_id":"$gTqyfSP9TisJ_H3RrLJt0U2PfTZFAKcPE-VFZZYVZIU"}},"msgtype":"m.text"},"ts":1772208536258,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$LNSGREauCmpPV26Ig3YtPjt14cIL2l0IupfFa9ZKzAY"},
{"content":{"body":"eemeli: would you like to discuss https://github.com/tc39/proposal-intl-keep-trailing-zeros/pull/10#discussion_r2863142664 here, or in that PR, or in the test262 PR? The assertion that seems wrong to me is `assert.sameValue(nf.format('1.2345e-1000'), '0.0000')`â€”the significant digits of 1.2345e-1000 are all below the representable threshold, and preserving their _count_ while moving their _position_ is unjustified. That output should be \"0.00000000000000000000\", just like how `nf.format('1.2345e-20')` would be \"0.00000000000000000001\".","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@eemeli:mozilla.org\">eemeli</a>: would you like to discuss https://github.com/tc39/proposal-intl-keep-trailing-zeros/pull/10#discussion_r2863142664 here, or in that PR, or in the test262 PR? The assertion that seems wrong to me is <code>assert.sameValue(nf.format('1.2345e-1000'), '0.0000')</code>â€”the significant digits of 1.2345e-1000 are all below the representable threshold, and preserving their <em>count</em> while moving their <em>position</em> is unjustified. That output should be \"0.00000000000000000000\", just like how <code>nf.format('1.2345e-20')</code> would be \"0.00000000000000000001\".","m.mentions":{"user_ids":["@eemeli:mozilla.org"]},"msgtype":"m.text"},"ts":1772209563105,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$hXfGo7xHfWUdjzpAGbfs95FOPcx_lkIk6FvoJtRYVTQ"},
{"content":{"body":"I gave it a review; it's still got a whole bunch of text that's not needed if we instead refer to Number.p.toExponential and FormatNumericToString.","m.mentions":{"user_ids":["@jesse:igalia.com"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$eI-VKfrN0HCG0gouiATajo4eywnH4cl7ns7lXSmMbw0"}},"msgtype":"m.text"},"ts":1772210157163,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$Vtp2IrxHApWI2pbqVNMSqHE_u7K0uAUOELhpgRF7ecU"},
{"content":{"body":"I'd prefer for the string .value to always be normalised as using exponential notation. I'll submit an issue, also covering the treatment of non-finite values.","m.mentions":{"user_ids":["@gibson042:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$LNSGREauCmpPV26Ig3YtPjt14cIL2l0IupfFa9ZKzAY"}},"msgtype":"m.text"},"ts":1772210259705,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$cBuEDD8E30jIyn2z9dkBJ8U6MsfYMImex3S_tbKldNU"},
{"content":{"body":"Here might be easiest. To me, the situation is analogous with\n```\nassert.sameValue(nf3.format('1.99999'), '2.000');\n```\nwhich does the same sort of rounding, just to a different integer.\n\nOverall, I don't think the line you're pointing at would be the place where I'd apply the change, as while it would change the treatment of `'1.2345e-1000'`, it would keep the formatting of `'1.2345e-200'` as `'0.0000'`, and I don't see why those ought to be different.","format":"org.matrix.custom.html","formatted_body":"<p>Here might be easiest. To me, the situation is analogous with</p>\n<pre><code>assert.sameValue(nf3.format('1.99999'), '2.000');\n</code></pre>\n<p>which does the same sort of rounding, just to a different integer.</p>\n<p>Overall, I don't think the line you're pointing at would be the place where I'd apply the change, as while it would change the treatment of <code>'1.2345e-1000'</code>, it would keep the formatting of <code>'1.2345e-200'</code> as <code>'0.0000'</code>, and I don't see why those ought to be different.</p>\n","m.mentions":{"user_ids":["@gibson042:matrix.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$hXfGo7xHfWUdjzpAGbfs95FOPcx_lkIk6FvoJtRYVTQ"}},"msgtype":"m.text"},"ts":1772210534921,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$4P42jvu2bQ4I5VoPUJ6XygEx3u81MBfosz6X5RC4RX0"},
{"content":{"body":"the normalization I have in mind might be: string argument `s` comes in, but we store `Number(s).toExponential()`","format":"org.matrix.custom.html","formatted_body":"the normalization I have in mind might be: string argument <code>s</code> comes in, but we store <code>Number(s).toExponential()</code>","m.mentions":{},"msgtype":"m.text"},"ts":1772210553006,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$wgkgQAceomXLJ6OpXlkopmsaf2aJ79EXMaWKTUYt8OM"},
{"content":{"body":"Yeah, except we don't actually force the string value to fit in Number limits.","m.mentions":{"user_ids":["@jesse:igalia.com"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$wgkgQAceomXLJ6OpXlkopmsaf2aJ79EXMaWKTUYt8OM"}},"msgtype":"m.text"},"ts":1772210583470,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$xr5RdP9KGDYS5J4EqzGxaoPhHDM7t8Mg9OBQ4kuTO-E"},
{"content":{"body":"And we don't cap the precision at 100.","m.mentions":{},"msgtype":"m.text"},"ts":1772210597168,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$X_tQiPv18VmbHQWP1M_TsOoSfBIrCHyVTljuhbUW4G4"},
{"content":{"body":"... and we'll need to retain the trailing zeros.","m.mentions":{},"msgtype":"m.text"},"ts":1772210648366,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$jsfSKSzxD2qSsLsf7orkm9jqFZ4pMlc56pzbUQEflJw"},
{"content":{"body":"do you mean in the `.convertTo` text?","format":"org.matrix.custom.html","formatted_body":"do you mean in the <code>.convertTo</code> text?","m.mentions":{"user_ids":["@eemeli:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$Vtp2IrxHApWI2pbqVNMSqHE_u7K0uAUOELhpgRF7ecU"}},"msgtype":"m.text"},"ts":1772210753285,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$K6VzlSz2Z6YqG9J878Yyza22c4Ip2rhKsH9gyvHLYkQ"},
{"content":{"body":"See my line comments, also in the constructor.","m.mentions":{"user_ids":["@jesse:igalia.com"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$K6VzlSz2Z6YqG9J878Yyza22c4Ip2rhKsH9gyvHLYkQ"}},"msgtype":"m.text"},"ts":1772210836724,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$a9r2DdzRrBCARZHra4rXCfUM7u7knvrIN2gy0Ph3eAc"},
{"content":{"body":"oh ok, thanks -- will do","m.mentions":{},"msgtype":"m.text"},"ts":1772210846171,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$I4WdfYVQi0G4UFEu__S_67mSHoGt55k0dAh2Fqt6sMY"},
{"content":{"body":"Richard Gibson: I think the issue you're raising is really rather close to https://github.com/tc39/proposal-intl-keep-trailing-zeros/issues/11, which we resolved at the November pleanry.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@gibson042:matrix.org\">Richard Gibson</a>: I think the issue you're raising is really rather close to https://github.com/tc39/proposal-intl-keep-trailing-zeros/issues/11, which we resolved at the November pleanry.","m.mentions":{"user_ids":["@gibson042:matrix.org"]},"msgtype":"m.text"},"ts":1772211011640,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$8ZV3_0SiVqaKvjLUkVFghi1vTTgFpmVkX_NrMPR3Ajg"},
{"content":{"body":">  To me, the situation is analogous with `assert.sameValue(nf3.format('1.99999'), '2.000')` which does the same sort of rounding, just to a different integer.\n\nI see that `nf3` has { minimumSignificantDigits: 2, maximumSignificantDigits: 4 }, so I agree. Rounding up to 2.000 as part of clamping significant digits is analogous to rounding down to 0.00000000000000000000 as part of clamping fractional digits.\n\n> Overall, I don't think the line you're pointing at would be the place where I'd apply the change, as while it would change the treatment of '1.2345e-1000', it would keep the formatting of '1.2345e-200' as '0.0000', and I don't see why those ought to be different.\n\nthat seems plausible to me; I was unclear on the overall changes when I posted that comment and the proposed spec text since then anyway. I agree that \"1.2345e-1000\" and \"1.2345e-200\" should be subject to the same treatment, and should produce the same output when 1e-200 is below a digits threshold.","format":"org.matrix.custom.html","formatted_body":"<blockquote>\n<p>To me, the situation is analogous with <code>assert.sameValue(nf3.format('1.99999'), '2.000')</code> which does the same sort of rounding, just to a different integer.</p>\n</blockquote>\n<p>I see that <code>nf3</code> has { minimumSignificantDigits: 2, maximumSignificantDigits: 4 }, so I agree. Rounding up to 2.000 as part of clamping significant digits is analogous to rounding down to 0.00000000000000000000 as part of clamping fractional digits.</p>\n<blockquote>\n<p>Overall, I don't think the line you're pointing at would be the place where I'd apply the change, as while it would change the treatment of '1.2345e-1000', it would keep the formatting of '1.2345e-200' as '0.0000', and I don't see why those ought to be different.</p>\n</blockquote>\n<p>that seems plausible to me; I was unclear on the overall changes when I posted that comment and the proposed spec text since then anyway. I agree that \"1.2345e-1000\" and \"1.2345e-200\" should be subject to the same treatment, and should produce the same output when 1e-200 is below a digits threshold.</p>\n","m.mentions":{"user_ids":["@eemeli:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$4P42jvu2bQ4I5VoPUJ6XygEx3u81MBfosz6X5RC4RX0"}},"msgtype":"m.text"},"ts":1772211085877,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$ErKFjBP8v-sJ0LE67IXtY_70zBeFUwsGZc76SY1BC48"},
{"content":{"body":"that looks like a separate issue to me","m.mentions":{"user_ids":["@eemeli:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$8ZV3_0SiVqaKvjLUkVFghi1vTTgFpmVkX_NrMPR3Ajg"}},"msgtype":"m.text"},"ts":1772211218163,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$tVguO3TwtA_wuK9gg4IRNqQntB4XAKg8H2df5hx7FoA"},
{"content":{"body":"Richard Gibson: My takeaway from that discussion (at least what I see as relevant here) is that we should retain the significant-digits precision when the input does not contain trailing zeros, but the formatted output does, because of rounding. And so to me, `1.23e-1000` is an input value from which we count a _stringDigitCount_ of 3, which we ought to retain when formatting it as `0.00`.","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@gibson042:matrix.org\">Richard Gibson</a>: My takeaway from that discussion (at least what I see as relevant here) is that we should retain the significant-digits precision when the input does not contain trailing zeros, but the formatted output does, because of rounding. And so to me, <code>1.23e-1000</code> is an input value from which we count a <em>stringDigitCount</em> of 3, which we ought to retain when formatting it as <code>0.00</code>.","m.mentions":{"user_ids":["@gibson042:matrix.org"]},"msgtype":"m.text"},"ts":1772211400810,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$Dp_uJ_morXBeszW8HSxbjgxArv5BNILC5hGfVSsbZt4"},
{"content":{"body":"that is not my takeaway at all, and I'm strongly opposed to retaining the count while moving the position. 1.23e-1000 wants to format like \"0.0â€¦0â€¦0123\", which maximumFractionDigits rounds to \"0.0â€¦0\". In the absence of trailing zero preservation that would be further transformed to \"0\", but with such preservation we want it right at the maximum.","m.mentions":{},"msgtype":"m.text"},"ts":1772211623300,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$Hcn1bog1-Lh_sA83wqEV4uI-U8OcSXZg1qnidWMaVkc"},
{"content":{"body":"Would you want `1.23e-100` to format the same way?","format":"org.matrix.custom.html","formatted_body":"Would you want <code>1.23e-100</code> to format the same way?","m.mentions":{},"msgtype":"m.text"},"ts":1772211749688,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$02mWX-uwr4nV23KUUosSJkQVfxLnNkgEqhWxVxbI-vQ"},
{"content":{"body":"yes","m.mentions":{},"msgtype":"m.text"},"ts":1772211806677,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$6AYE7Re52Hw0vJEtyQWci1JelfbEXOwSv353jYbcRvw"},
{"content":{"body":"Richard Gibson: Regarding \"retaining the count while moving the position\", does that mean that you think we should drop trailing zeros when formatting with `style: 'percent'`?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@gibson042:matrix.org\">Richard Gibson</a>: Regarding \"retaining the count while moving the position\", does that mean that you think we should drop trailing zeros when formatting with <code>style: 'percent'</code>?","m.mentions":{"user_ids":["@gibson042:matrix.org"]},"msgtype":"m.text"},"ts":1772211840590,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$c9QLIXZ_DfVQ9eJs2kT9D8uMuEEssZC_r7phKZwQH90"},
{"content":{"body":"* yes, for exactly the same reason","m.mentions":{},"m.new_content":{"body":"yes, for exactly the same reason","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$6AYE7Re52Hw0vJEtyQWci1JelfbEXOwSv353jYbcRvw","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1772211840882,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$eJmThHgGgirgA8AV8m3fSdQ7F79GEHo6Tff4EccYUyo"},
{"content":{"body":"* Richard Gibson: Regarding \"strongly opposed to retaining the count while moving the position\", does that mean that you think we should drop trailing zeros when formatting with `style: 'percent'`?","format":"org.matrix.custom.html","formatted_body":"* <a href=\"https://matrix.to/#/@gibson042:matrix.org\">Richard Gibson</a>: Regarding \"strongly opposed to retaining the count while moving the position\", does that mean that you think we should drop trailing zeros when formatting with <code>style: 'percent'</code>?","m.mentions":{},"m.new_content":{"body":"Richard Gibson: Regarding \"strongly opposed to retaining the count while moving the position\", does that mean that you think we should drop trailing zeros when formatting with `style: 'percent'`?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@gibson042:matrix.org\">Richard Gibson</a>: Regarding \"strongly opposed to retaining the count while moving the position\", does that mean that you think we should drop trailing zeros when formatting with <code>style: 'percent'</code>?","m.mentions":{"user_ids":["@gibson042:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$c9QLIXZ_DfVQ9eJs2kT9D8uMuEEssZC_r7phKZwQH90","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1772211870474,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$3NevgLRQW53x_2ST4wmlS3iosSjnDytzgyHqT8l-aJo"},
{"content":{"body":"And similarly, when using a different notattion than what's used in an input string?","m.mentions":{},"msgtype":"m.text"},"ts":1772211938177,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$1tRovImtTlZ2293YJ9eTiZPbt58eWFPDrx46kOsji9s"},
{"content":{"body":"do you have a concrete example?","m.mentions":{"user_ids":["@eemeli:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$c9QLIXZ_DfVQ9eJs2kT9D8uMuEEssZC_r7phKZwQH90"}},"msgtype":"m.text"},"ts":1772211944561,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$12ydCnFsXzuFnwFp8cT9A5hAgTlanirCKTEeaeIlNiw"},
{"content":{"body":"From the test suite:\n```\nconst pf = new Intl.NumberFormat('en-US', {\n  style: 'percent',\n  maximumFractionDigits: 10,\n});\n\nassert.sameValue(pf.format('0.5000'), '50.00%');\n```","format":"org.matrix.custom.html","formatted_body":"<p>From the test suite:</p>\n<pre><code>const pf = new Intl.NumberFormat('en-US', {\n  style: 'percent',\n  maximumFractionDigits: 10,\n});\n\nassert.sameValue(pf.format('0.5000'), '50.00%');\n</code></pre>\n","m.mentions":{},"msgtype":"m.text"},"ts":1772211984052,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$Bi34JsAR_RQEUPu6TmCoy0WJCbHPcSbGBSAw3QWuGYI"},
{"content":{"body":"Yay, thank you! I'll go over them and flesh them out (update the \"recent changes\" slide, etc). it'll be a good chance to catch up on everything that's happened while I've been focused on era monthcode","m.mentions":{"user_ids":["@eemeli:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$sSYi6xHJ3sbTYwcur6NnNPL1UlHfXfUVHIPV8IVkFCQ"}},"msgtype":"m.text"},"ts":1772211996150,"senderName":"Ben Allen","senderId":"@benallen:igalia.com","id":"$pu7JzQaTnwMMAYsm3NlQiKQ2OdRT6w0vksfDFL3CyJo"},
{"content":{"body":"Also:\n```\nconst sf = new Intl.NumberFormat('en-US', { notation: 'scientific' });\nassert.sameValue(sf.format('0.01200'), '1.200E-2');\n```","format":"org.matrix.custom.html","formatted_body":"<p>Also:</p>\n<pre><code>const sf = new Intl.NumberFormat('en-US', { notation: 'scientific' });\nassert.sameValue(sf.format('0.01200'), '1.200E-2');\n</code></pre>\n","m.mentions":{},"msgtype":"m.text"},"ts":1772212044641,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$_oq58MtD7Ipu2rj0ioo_vjJEXLei9A12Isqne-_g668"},
{"content":{"body":"that looks reasonable to me; `style: 'percent'` explicitly scales the input while `maximumFractionDigits` affects the _output_","format":"org.matrix.custom.html","formatted_body":"that looks reasonable to me; <code>style: 'percent'</code> explicitly scales the input while <code>maximumFractionDigits</code> affects the <em>output</em>","m.mentions":{"user_ids":["@eemeli:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$Bi34JsAR_RQEUPu6TmCoy0WJCbHPcSbGBSAw3QWuGYI"}},"msgtype":"m.text"},"ts":1772212049909,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$KZs-a82ovSs-aJBcJ068f-i6vvOpFM3mf3hu5vsuf1k"},
{"content":{"body":"also exactly right because it's preserving significant digits and not affecting fractional digits at all","m.mentions":{"user_ids":["@eemeli:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$_oq58MtD7Ipu2rj0ioo_vjJEXLei9A12Isqne-_g668"}},"msgtype":"m.text"},"ts":1772212102532,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$eZt7rxRfp6jETOXHT2-POmvPKT67zVNoW1HeLSgb36I"},
{"content":{"body":"Richard Gibson: Ok, so the only problematic case is when we have a very small number like `1.23e-200` that we're formatting as some representation of zero, then?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@gibson042:matrix.org\">Richard Gibson</a>: Ok, so the only problematic case is when we have a very small number like <code>1.23e-200</code> that we're formatting as some representation of zero, then?","m.mentions":{"user_ids":["@gibson042:matrix.org"]},"msgtype":"m.text"},"ts":1772212156770,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$IpdnV59O9XvsmoBxDcRrH9gQvlrda03Hb4c1_vnNUhM"},
{"content":{"body":"that what it seems like to me","m.mentions":{},"msgtype":"m.text"},"ts":1772212180833,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$GcOqnuw3KQzpkFgLPVR64ubQwNIYAKKHloy48DmJCxk"},
{"content":{"body":"* that's what it seems like to me","m.mentions":{},"m.new_content":{"body":"that's what it seems like to me","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$GcOqnuw3KQzpkFgLPVR64ubQwNIYAKKHloy48DmJCxk","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1772212186335,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$rQZ-05a9OUv7XqUelPNHyEsfgufHsPhGj5RPGGqVhSM"},
{"content":{"body":"And you would prefer that we format that using whatever's the max precision.","m.mentions":{},"msgtype":"m.text"},"ts":1772212225120,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$Esb9ZMZI0z0JxHvyASiQ4vEAI31bC0APFfXrGKvLq5E"},
{"content":{"body":"Richard Gibson: If the PR is otherwise acceptable, could I file an issue and work on a separate PR specifically about addressing that?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@gibson042:matrix.org\">Richard Gibson</a>: If the PR is otherwise acceptable, could I file an issue and work on a separate PR specifically about addressing that?","m.mentions":{"user_ids":["@gibson042:matrix.org"]},"msgtype":"m.text"},"ts":1772212544761,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$rlxpdSebqf1-EVYuHDxBdt7QVJiCvJfzErXpTzewHJ4"},
{"content":{"body":"yes, I think that works. I'll re-review the current PR with an appropriate scope of changes.","m.mentions":{},"msgtype":"m.text"},"ts":1772212612748,"senderName":"Richard Gibson","senderId":"@gibson042:matrix.org","id":"$w4QukVnh_I8LfRsHZV4JhIJVNWlnPC6GpMWwSZuScLo"},
{"content":{"body":"Thanks, that would be helpful. PR #10 is changing so much of the implementation that it might be easier for @sffc to review the whole of the proosal with it included, once the rendered spec text is available.","m.mentions":{},"msgtype":"m.text"},"ts":1772212712149,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$8Vtxsfpv9zBT0LJwz_U3LlaVsZRjMw8jEanihwsu8Jo"},
{"content":{"body":"* Thanks, that would be helpful. PR #10 is changing so much of the implementation that it might be easier for @sffc to review the whole of the proposal with it included, once the rendered spec text is available.","m.mentions":{},"m.new_content":{"body":"Thanks, that would be helpful. PR #10 is changing so much of the implementation that it might be easier for @sffc to review the whole of the proposal with it included, once the rendered spec text is available.","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$8Vtxsfpv9zBT0LJwz_U3LlaVsZRjMw8jEanihwsu8Jo","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1772212735135,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$e3qUXCHHh0Qrmif6lYM7pslaapt8goYQW2qSaEciUeo"},
{"content":{"body":"Richard Gibson: https://github.com/tc39/proposal-intl-keep-trailing-zeros/issues/15","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@gibson042:matrix.org\">Richard Gibson</a>: https://github.com/tc39/proposal-intl-keep-trailing-zeros/issues/15","m.mentions":{"user_ids":["@gibson042:matrix.org"]},"msgtype":"m.text"},"ts":1772213383926,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$G4veYfIk4SBZ7ju8iKr5YK18QQhyWaS-BZcKG6BfqZY"},
{"content":{"body":"* Thanks, that would be helpful. PR #10 is changing so much of the implementation that it might be easier for sffc to review the whole of the proposal with it included, once the rendered spec text is available.","format":"org.matrix.custom.html","formatted_body":"* Thanks, that would be helpful. PR #10 is changing so much of the implementation that it might be easier for <a href=\"https://matrix.to/#/@sffc:mozilla.org\">sffc</a> to review the whole of the proposal with it included, once the rendered spec text is available.","m.mentions":{"user_ids":["@sffc:mozilla.org"]},"m.new_content":{"body":"Thanks, that would be helpful. PR #10 is changing so much of the implementation that it might be easier for sffc to review the whole of the proposal with it included, once the rendered spec text is available.","format":"org.matrix.custom.html","formatted_body":"Thanks, that would be helpful. PR #10 is changing so much of the implementation that it might be easier for <a href=\"https://matrix.to/#/@sffc:mozilla.org\">sffc</a> to review the whole of the proposal with it included, once the rendered spec text is available.","m.mentions":{"user_ids":["@sffc:mozilla.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$8Vtxsfpv9zBT0LJwz_U3LlaVsZRjMw8jEanihwsu8Jo","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1772213418960,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$JFH1bHB8bo0Cf8sm-PeDxMzaEJKHru3el-uzlsbon60"},
{"content":{"body":"I went with a readme PR instead: https://github.com/tc39/proposal-amount/pull/86","m.mentions":{},"m.relates_to":{"m.in_reply_to":{"event_id":"$cBuEDD8E30jIyn2z9dkBJ8U6MsfYMImex3S_tbKldNU"}},"msgtype":"m.text"},"ts":1772215667746,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$zzILn4Lr-l_s48wadoPSnBU3FmFmpKBK-NWfxBSjtUE"},
{"content":{"body":"I've taken care of the review comments -- thanks eemeli !","format":"org.matrix.custom.html","formatted_body":"I've taken care of the review comments -- thanks <a href=\"https://matrix.to/#/@eemeli:mozilla.org\">eemeli</a> !","m.mentions":{"user_ids":["@eemeli:mozilla.org"]},"msgtype":"m.text"},"ts":1772215851671,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$z_iYY_VQdOp8-ud1c4faMfM1IZbKTG98aaRSI6XHwUM"},
{"content":{"body":"I was able to trim quite a lot","m.mentions":{},"msgtype":"m.text"},"ts":1772215857792,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$gOdDzuRJPQZesIOaYqqmhgO4pSiZ7599krSWURWTZRA"},
{"content":{"body":"> <@eemeli:mozilla.org> Draft slides for Amount: https://docs.google.com/presentation/d/1SAD0bgB_SOWrtz1YZuySC4YHdMxBs0vTnS7buQa311c/edit?usp=sharing\n> \n> Please request permissions as necessary; for now I added ecma402-delegates@chromium.org as editor.\n\nCool. Worthwhile reiterating the motivation, with an emphasis now on this meeting a requirement for smart units","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!NnKyFxSjabKpyjbPcL:matrix.org/$sSYi6xHJ3sbTYwcur6NnNPL1UlHfXfUVHIPV8IVkFCQ?via=mozilla.org&via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@eemeli:mozilla.org\">@eemeli:mozilla.org</a><br /><p>Draft slides for Amount: https://docs.google.com/presentation/d/1SAD0bgB_SOWrtz1YZuySC4YHdMxBs0vTnS7buQa311c/edit?usp=sharing</p>\n<p>Please request permissions as necessary; for now I added ecma402-delegates@chromium.org as editor.</p></blockquote></mx-reply>Cool. Worthwhile reiterating the motivation, with an emphasis now on this meeting a requirement for smart units","m.relates_to":{"m.in_reply_to":{"event_id":"$sSYi6xHJ3sbTYwcur6NnNPL1UlHfXfUVHIPV8IVkFCQ"}},"msgtype":"m.text"},"ts":1772216829285,"senderName":"sffc","senderId":"@sffc:mozilla.org","id":"$1TQgTmR4uHRRfYAWPJssU31CwcLyCk3NHZGY4gV3NXM"},
{"content":{"body":"Jesse: Gave you another review, https://github.com/tc39/proposal-amount/pull/85#pullrequestreview-3868361030","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jesse:igalia.com\">Jesse</a>: Gave you another review, https://github.com/tc39/proposal-amount/pull/85#pullrequestreview-3868361030","m.mentions":{"user_ids":["@jesse:igalia.com"]},"msgtype":"m.text"},"ts":1772216850025,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$qIy1TsZSwHhikahYHW6IWozYDtBHghASj4Dxv_npOQw"},
{"content":{"body":"> <@jesse:igalia.com> when we say we want to use exponential notation for string-y Amounts, do we also convert things like `\"123.456\"` into `\"1.23456e2\"`?\n\nI think I prefer string decimals to be always normalized to this form; \"10.00E2\" and \"1.000E3\" and \"1000\" should be equal.","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!NnKyFxSjabKpyjbPcL:matrix.org/$ZxYyq03kWDch6t080jh-mOQIsQDOzuiCdbXtRxwKo3o?via=mozilla.org&via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@jesse:igalia.com\">@jesse:igalia.com</a><br />when we say we want to use exponential notation for string-y Amounts, do we also convert things like <code>\"123.456\"</code> into <code>\"1.23456e2\"</code>?</blockquote></mx-reply>I think I prefer string decimals to be always normalized to this form; &quot;10.00E2&quot; and &quot;1.000E3&quot; and &quot;1000&quot; should be equal.","m.relates_to":{"m.in_reply_to":{"event_id":"$ZxYyq03kWDch6t080jh-mOQIsQDOzuiCdbXtRxwKo3o"}},"msgtype":"m.text"},"ts":1772216964888,"senderName":"sffc","senderId":"@sffc:mozilla.org","id":"$MA3jHgEOb51wdJVgrOQn9A_sX2LUA6VRA483S3Rzd-8"},
{"content":{"body":"> <@eemeli:mozilla.org> Thanks, that would be helpful. PR #10 is changing so much of the implementation that it might be easier for sffc to review the whole of the proposal with it included, once the rendered spec text is available.\n\nYes it seemed that way when I last looked. I would prefer to read the whole proposal in rendered form once you merge with Richard's approval","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!NnKyFxSjabKpyjbPcL:matrix.org/$8Vtxsfpv9zBT0LJwz_U3LlaVsZRjMw8jEanihwsu8Jo?via=mozilla.org&via=matrix.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@eemeli:mozilla.org\">@eemeli:mozilla.org</a><br />Thanks, that would be helpful. PR #10 is changing so much of the implementation that it might be easier for <a href=\"https://matrix.to/#/@sffc:mozilla.org\">sffc</a> to review the whole of the proposal with it included, once the rendered spec text is available.</blockquote></mx-reply>Yes it seemed that way when I last looked. I would prefer to read the whole proposal in rendered form once you merge with Richard's approval","m.relates_to":{"m.in_reply_to":{"event_id":"$8Vtxsfpv9zBT0LJwz_U3LlaVsZRjMw8jEanihwsu8Jo"}},"msgtype":"m.text"},"ts":1772217131968,"senderName":"sffc","senderId":"@sffc:mozilla.org","id":"$E9S5StjmiaMS20jw8RQ_w08urNw7fLzeMUtv5xPbjLU"},
{"content":{"body":"A rendered view of the keep-trailing-zeros spec including PR #10's changes is currently available at https://eemeli.org/tc39-proposal-intl-keep-trailing-zeros/","m.mentions":{"user_ids":["@sffc:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$E9S5StjmiaMS20jw8RQ_w08urNw7fLzeMUtv5xPbjLU"}},"msgtype":"m.text"},"ts":1772219326542,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$tKPC6TsBzXsJis_vFvxMBsqiVtuTU2GyPxOm7c5AeIM"},
{"content":{"body":"done!","m.mentions":{"user_ids":["@eemeli:mozilla.org"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$qIy1TsZSwHhikahYHW6IWozYDtBHghASj4Dxv_npOQw"}},"msgtype":"m.text"},"ts":1772221112006,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$gA2oEBspm4yywPkRNb72bh64t0WvOxYz1PV8jdr71Ww"},
{"content":{"body":"One more thing, then I think it's good. Note that I've not really looked at the Intl changes almost at all, as I trust that Shane will go through those when moving them to his proposal.\n\nI think I'm done for the day; will check in sometime tomorrow. I've submitted agenda items for keep-trailing-zeros and import-text; I trust that someone else will put one in for amount.","m.mentions":{"user_ids":["@jesse:igalia.com"]},"m.relates_to":{"m.in_reply_to":{"event_id":"$gA2oEBspm4yywPkRNb72bh64t0WvOxYz1PV8jdr71Ww"}},"msgtype":"m.text"},"ts":1772222271556,"senderName":"eemeli","senderId":"@eemeli:mozilla.org","id":"$SsskCATgGJuOR4-TiPmi1hN20f9e77Zfdm5oMmYy9xc"},
{"content":{"body":"took care of it!","m.mentions":{},"msgtype":"m.text"},"ts":1772228562956,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$f4Epx2GvYxA1mEPpoAYz6kW1u5oDGbZs4gf3rbg_gNo"},
{"content":{"body":"I'm also stepping away for today","m.mentions":{},"msgtype":"m.text"},"ts":1772228571792,"senderName":"Jesse","senderId":"@jesse:igalia.com","id":"$N65FfbS6RICA579-EQ1AauDQmfP4JdY4iuXZ3M2w0Uc"}
]