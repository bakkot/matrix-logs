[
{"content":{"body":"I strongly oppose a toString function not being round-trippable to the type it was created from","m.mentions":{},"msgtype":"m.text"},"ts":1751743068748,"senderName":"sffc","senderId":"@sffc:mozilla.org","id":"$T8wOOzkPcbBk4bOxeOZqBMFm5s9AanB1ZMoTSt7lw6s"},
{"content":{"body":"* I strongly oppose a toString function having default behavior that is not round-trippable to the type it was created from","m.mentions":{},"m.new_content":{"body":"I strongly oppose a toString function having default behavior that is not round-trippable to the type it was created from","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$T8wOOzkPcbBk4bOxeOZqBMFm5s9AanB1ZMoTSt7lw6s","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1751743109872,"senderName":"sffc","senderId":"@sffc:mozilla.org","id":"$qFPwk2cdR12qer21hyTk5Jks4DYvJnESgc9tTx9SDFA"},
{"content":{"body":"* I strongly oppose a toString function having default behavior that is not round-trippable to the type it was created from, for a number of reasons. I didn't think this was a controversial position, but if it would help, I'll make another writeup like I did with #175 (why precision is important) and #181 (why Decimal isn't the only solution for representing exact numbers)","m.mentions":{},"m.new_content":{"body":"I strongly oppose a toString function having default behavior that is not round-trippable to the type it was created from, for a number of reasons. I didn't think this was a controversial position, but if it would help, I'll make another writeup like I did with #175 (why precision is important) and #181 (why Decimal isn't the only solution for representing exact numbers)","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$T8wOOzkPcbBk4bOxeOZqBMFm5s9AanB1ZMoTSt7lw6s","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1751743257749,"senderName":"sffc","senderId":"@sffc:mozilla.org","id":"$j39iPuGwJZn6geMi6_Fp63fZs0amtfmcv_HSdcudU4U"},
{"content":{"body":"> so that e.g. new Decimal(amount) would work without any special Amount-detection code.\nThis is based on the potentially flawed premise that `new Decimal(amount)` would call ToString on the `amount`, but TC39 has ruled that we don't want this type of implicit conversion.","format":"org.matrix.custom.html","formatted_body":"<blockquote>\n<p>so that e.g. new Decimal(amount) would work without any special Amount-detection code.<br>This is based on the potentially flawed premise that <code>new Decimal(amount)</code> would call ToString on the <code>amount</code>, but TC39 has ruled that we don't want this type of implicit conversion.</p>\n</blockquote>\n","m.mentions":{},"msgtype":"m.text"},"ts":1751743364258,"senderName":"sffc","senderId":"@sffc:mozilla.org","id":"$QXMZyNVP02ZNZo2aFH4PUUncAaVaU1z5iLzwknsW2H0"},
{"content":{"body":"* > so that e.g. new Decimal(amount) would work without any special Amount-detection code.\n\nThis is based on the potentially flawed premise that `new Decimal(amount)` would call ToString on the `amount`, but TC39 has ruled that we don't want this type of implicit conversion.","format":"org.matrix.custom.html","formatted_body":"* <blockquote>\n<p>so that e.g. new Decimal(amount) would work without any special Amount-detection code.</p>\n</blockquote>\n<p>This is based on the potentially flawed premise that <code>new Decimal(amount)</code> would call ToString on the <code>amount</code>, but TC39 has ruled that we don't want this type of implicit conversion.</p>\n","m.mentions":{},"m.new_content":{"body":"> so that e.g. new Decimal(amount) would work without any special Amount-detection code.\n\nThis is based on the potentially flawed premise that `new Decimal(amount)` would call ToString on the `amount`, but TC39 has ruled that we don't want this type of implicit conversion.","format":"org.matrix.custom.html","formatted_body":"<blockquote>\n<p>so that e.g. new Decimal(amount) would work without any special Amount-detection code.</p>\n</blockquote>\n<p>This is based on the potentially flawed premise that <code>new Decimal(amount)</code> would call ToString on the <code>amount</code>, but TC39 has ruled that we don't want this type of implicit conversion.</p>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$QXMZyNVP02ZNZo2aFH4PUUncAaVaU1z5iLzwknsW2H0","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1751743369649,"senderName":"sffc","senderId":"@sffc:mozilla.org","id":"$CKxzuSHcZtgGkQMeYY4XtpxnT4QMGdtBVy2duhPFil4"},
{"content":{"body":"Besides that point, I don't find the `new Decimal(amount)` argument to be convincing because:\n\n1. Brand checking is easy and ECMA does it all the time now, and even without brand checking, it could check for e.g. a `.decimal` field or a `Symbol.toDecimal` function\n2. Amount can have a `toDecimal` function, which looks nicer in chaining (people like method chaining)","format":"org.matrix.custom.html","formatted_body":"<p>Besides that point, I don't find the <code>new Decimal(amount)</code> argument to be convincing because:</p>\n<ol>\n<li>Brand checking is easy and ECMA does it all the time now, and even without brand checking, it could check for e.g. a <code>.decimal</code> field or a <code>Symbol.toDecimal</code> function</li>\n<li>Amount can have a <code>toDecimal</code> function, which looks nicer in chaining (people like method chaining)</li>\n</ol>\n","m.mentions":{},"msgtype":"m.text"},"ts":1751743662060,"senderName":"sffc","senderId":"@sffc:mozilla.org","id":"$DSUGS8GAh7j-uY7Qt4LQGoUT7Qa_9s3eZ1dke4kCATc"}
]