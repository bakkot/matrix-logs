[
{"content":{"body":"Thanks for resource. really appreciate it. \nI can see [here](https://source.chromium.org/chromium/chromium/src/+/main:v8/src/heap/heap.cc;l=3627;drc=90f276be1122336c6ff7b808054fb183af7a2a9e) that they are calculating the new start and then returning the new object with that start. It is O(1).\n\nMay I know why you said `the GC complexity is gross`?\n","format":"org.matrix.custom.html","formatted_body":"<p>Thanks for resource. really appreciate it.<br>I can see <a href=\"https://source.chromium.org/chromium/chromium/src/+/main:v8/src/heap/heap.cc;l=3627;drc=90f276be1122336c6ff7b808054fb183af7a2a9e\">here</a> that they are calculating the new start and then returning the new object with that start. It is O(1).</p>\n<p>May I know why you said <code>the GC complexity is gross</code>?</p>\n","m.mentions":{},"m.relates_to":{"event_id":"$YthNxm7ZBnuywg57Lds90zryViw29IAFiOKJYhJHoKw","is_falling_back":true,"m.in_reply_to":{"event_id":"$YthNxm7ZBnuywg57Lds90zryViw29IAFiOKJYhJHoKw"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1714745552916,"senderName":"Himanshu Shubham","senderId":"@himanshushu:matrix.org","id":"$CTYuYTFinQm4jlza5yEK8PdMwrOdPmi9RkQ08H1SSyY"},
{"content":{"body":" * Thanks for resource. really appreciate it.\nI can see [here](https://source.chromium.org/chromium/chromium/src/+/main:v8/src/heap/heap.cc;l=3627;drc=90f276be1122336c6ff7b808054fb183af7a2a9e) that they are calculating the new start and then returning the new object with that start. It is O(1) if I am not wrong.\n\nMay I know why you said `the GC complexity is gross`?","format":"org.matrix.custom.html","formatted_body":" * <p>Thanks for resource. really appreciate it.<br>I can see <a href=\"https://source.chromium.org/chromium/chromium/src/+/main:v8/src/heap/heap.cc;l=3627;drc=90f276be1122336c6ff7b808054fb183af7a2a9e\">here</a> that they are calculating the new start and then returning the new object with that start. It is O(1) if I am not wrong.</p>\n<p>May I know why you said <code>the GC complexity is gross</code>?</p>\n","m.mentions":{"user_ids":["@shuyuguo:matrix.org"]},"m.new_content":{"body":"Thanks for resource. really appreciate it.\nI can see [here](https://source.chromium.org/chromium/chromium/src/+/main:v8/src/heap/heap.cc;l=3627;drc=90f276be1122336c6ff7b808054fb183af7a2a9e) that they are calculating the new start and then returning the new object with that start. It is O(1) if I am not wrong.\n\nMay I know why you said `the GC complexity is gross`?","format":"org.matrix.custom.html","formatted_body":"<p>Thanks for resource. really appreciate it.<br>I can see <a href=\"https://source.chromium.org/chromium/chromium/src/+/main:v8/src/heap/heap.cc;l=3627;drc=90f276be1122336c6ff7b808054fb183af7a2a9e\">here</a> that they are calculating the new start and then returning the new object with that start. It is O(1) if I am not wrong.</p>\n<p>May I know why you said <code>the GC complexity is gross</code>?</p>\n","m.mentions":{"user_ids":["@shuyuguo:matrix.org"]},"msgtype":"m.text"},"m.relates_to":{"event_id":"$CTYuYTFinQm4jlza5yEK8PdMwrOdPmi9RkQ08H1SSyY","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1714745576579,"senderName":"Himanshu Shubham","senderId":"@himanshushu:matrix.org","id":"$10eXPdJIe8yNFqG4RJcbK8eNIQXRqDYnKyjI2ZFV4dY"},
{"content":{"body":"by that i meant that we'd prefer that this optimization didn't exist","m.mentions":{},"m.relates_to":{"event_id":"$YthNxm7ZBnuywg57Lds90zryViw29IAFiOKJYhJHoKw","is_falling_back":true,"m.in_reply_to":{"event_id":"$CTYuYTFinQm4jlza5yEK8PdMwrOdPmi9RkQ08H1SSyY"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1714755826615,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$67U4phWEjFuZXBQw0LYkaimdGiP6zvZLMYOKzkZp_fU"},
{"content":{"body":"because it is fundamentally kind of dangerous: you used to have a GC object in the heap at location _p_, and now you've split it into two","format":"org.matrix.custom.html","formatted_body":"because it is fundamentally kind of dangerous: you used to have a GC object in the heap at location <em>p</em>, and now you've split it into two","m.mentions":{},"m.relates_to":{"event_id":"$YthNxm7ZBnuywg57Lds90zryViw29IAFiOKJYhJHoKw","is_falling_back":true,"m.in_reply_to":{"event_id":"$67U4phWEjFuZXBQw0LYkaimdGiP6zvZLMYOKzkZp_fU"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1714755909410,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$sr-Qbeebg2FCdarxUKboFDS1wHcF5Eb4yCx2VRyCFOU"},
{"content":{"body":"this kind of object surgery is easy to get wrong and easy to forget in other parts of the system, adding complexity","m.mentions":{},"m.relates_to":{"event_id":"$YthNxm7ZBnuywg57Lds90zryViw29IAFiOKJYhJHoKw","is_falling_back":true,"m.in_reply_to":{"event_id":"$sr-Qbeebg2FCdarxUKboFDS1wHcF5Eb4yCx2VRyCFOU"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1714755936949,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$Wu9D4nMN_D7Lo6040irQ82bijfvgePUSHSc0ADrFyRM"},
{"content":{"body":"for example, if you're marking the heap concurrently with the mutator in another thread, what if left trimming happens at the same time for an object you're scanning?","m.mentions":{},"m.relates_to":{"event_id":"$YthNxm7ZBnuywg57Lds90zryViw29IAFiOKJYhJHoKw","is_falling_back":true,"m.in_reply_to":{"event_id":"$Wu9D4nMN_D7Lo6040irQ82bijfvgePUSHSc0ADrFyRM"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1714755961745,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$_HsiXx1arCz7BabF1IOfsT57uWF8MxD6aOwreKi23d0"},
{"content":{"body":"While I might not grasp all the technical details, I do get the main idea. So, does SpiderMonkey's optimization in this area also introduce potential bugs, or did they manage it differently?\n\nThe article I was referring to https://jandemooij.nl/blog/some-spidermonkey-optimizations-in-firefox-quantum/","m.mentions":{},"m.relates_to":{"event_id":"$YthNxm7ZBnuywg57Lds90zryViw29IAFiOKJYhJHoKw","is_falling_back":true,"m.in_reply_to":{"event_id":"$_HsiXx1arCz7BabF1IOfsT57uWF8MxD6aOwreKi23d0"},"rel_type":"m.thread"},"msgtype":"m.text"},"ts":1714771208312,"senderName":"Himanshu Shubham","senderId":"@himanshushu:matrix.org","id":"$16paZd0uqt2HoU3iIgbMvWauAunsRHpGtT094hVP2VM"}
]