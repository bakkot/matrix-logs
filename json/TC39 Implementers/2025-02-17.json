[
{"content":{"body":"hey implementer folks. i've got someone in another venue raving about how sparse arrays *aren't* bad and slow etc. it'd be awesome if someone from each of the browsers could describe the perf characteristics of creating/accessing/mutating a sparse array in their engine, or ideally, point me to a blog post or something that explains them?","format":"org.matrix.custom.html","formatted_body":"hey implementer folks. i've got someone in another venue raving about how sparse arrays <em>aren't</em> bad and slow etc. it'd be awesome if someone from each of the browsers could describe the perf characteristics of creating/accessing/mutating a sparse array in their engine, or ideally, point me to a blog post or something that explains them?","m.mentions":{},"msgtype":"m.text"},"ts":1739814052980,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$iAEeVwU1fGIzCsnwD-tscDi62h-8dRo_zsz5m-OPdw4"},
{"content":{"body":"* hey implementer folks. i've got someone in another venue raving about how sparse arrays _aren't_ bad and slow etc (which defies what i understand to be decades of best practice around avoiding them). \n\ni want to know whatever the modern truth is, and it'd be awesome if someone from each of the browsers could describe the perf characteristics of creating/accessing/mutating a sparse array in their engine, or ideally, point me to a blog post or something that explains them?","format":"org.matrix.custom.html","formatted_body":"* <p>hey implementer folks. i've got someone in another venue raving about how sparse arrays <em>aren't</em> bad and slow etc (which defies what i understand to be decades of best practice around avoiding them).</p>\n<p>i want to know whatever the modern truth is, and it'd be awesome if someone from each of the browsers could describe the perf characteristics of creating/accessing/mutating a sparse array in their engine, or ideally, point me to a blog post or something that explains them?</p>\n","m.mentions":{},"m.new_content":{"body":"hey implementer folks. i've got someone in another venue raving about how sparse arrays _aren't_ bad and slow etc (which defies what i understand to be decades of best practice around avoiding them). \n\ni want to know whatever the modern truth is, and it'd be awesome if someone from each of the browsers could describe the perf characteristics of creating/accessing/mutating a sparse array in their engine, or ideally, point me to a blog post or something that explains them?","format":"org.matrix.custom.html","formatted_body":"<p>hey implementer folks. i've got someone in another venue raving about how sparse arrays <em>aren't</em> bad and slow etc (which defies what i understand to be decades of best practice around avoiding them).</p>\n<p>i want to know whatever the modern truth is, and it'd be awesome if someone from each of the browsers could describe the perf characteristics of creating/accessing/mutating a sparse array in their engine, or ideally, point me to a blog post or something that explains them?</p>\n","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$iAEeVwU1fGIzCsnwD-tscDi62h-8dRo_zsz5m-OPdw4","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1739814088618,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$vK3mOG66nV_fkCTEp0jiobCrJQIh3MuXZIWTnM2RwUo"},
{"content":{"body":"they aren't as evil as they used to be like 10 years ago, but they're still very much off the happy path, and you'll take a hit in performance for using them.","msgtype":"m.text"},"ts":1739824573287,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$-EJa95kh1sG3kGxkrHDVZfB1jkQ3hMNWytq0MDZiL5M"},
{"content":{"body":"* they aren't as evil as they used to be like 10 years ago, in V8 at least, but they're still very much off the happy path, and you'll take a hit in performance for using them.","m.new_content":{"body":"they aren't as evil as they used to be like 10 years ago, in V8 at least, but they're still very much off the happy path, and you'll take a hit in performance for using them.","msgtype":"m.text"},"m.relates_to":{"event_id":"$-EJa95kh1sG3kGxkrHDVZfB1jkQ3hMNWytq0MDZiL5M","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1739824590151,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$wd1ctDtxdR1m11d-OFFtTBv3oeikBJ0W-3NF9N0R0W0"},
{"content":{"body":"one of the arguments was that accessing elements was fast even if creation was slower","msgtype":"m.text"},"ts":1739825579951,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$jVXOPGhbxbsFxvd5mgt1pJANeSRZTzqyeKaKwtXGhVI"},
{"content":{"body":"hmm, you could say its fast in that the optimizer doesn't completely bail out for holey arrays, like they may have tended to do back in the day. but if an array is represented as holey that brings in some unavoidable overhead. around 15-20% compared to the same non-holey representation when i last benchmarked it.","m.mentions":{},"msgtype":"m.text"},"ts":1739827248158,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$SJ7G5MSICEm5oPBBtQ41Spb6SamMbctjNHsdbB8jQJA"},
{"content":{"body":"* hmm, you could say its fast in that the optimizer doesn't completely bail out for holey arrays, like they may have tended to do back in the day. but if an array is represented as holey that brings in some unavoidable overhead. around 15-20% compared to the same non-holey representation when i last benchmarked it. these things are much more granular these days though. it really comes down to like each \"operation\" (e.g. field accesss, methods, etc) and what things someone wrote out as optimizations for it.","m.mentions":{},"m.new_content":{"body":"hmm, you could say its fast in that the optimizer doesn't completely bail out for holey arrays, like they may have tended to do back in the day. but if an array is represented as holey that brings in some unavoidable overhead. around 15-20% compared to the same non-holey representation when i last benchmarked it. these things are much more granular these days though. it really comes down to like each \"operation\" (e.g. field accesss, methods, etc) and what things someone wrote out as optimizations for it.","m.mentions":{},"msgtype":"m.text"},"m.relates_to":{"event_id":"$SJ7G5MSICEm5oPBBtQ41Spb6SamMbctjNHsdbB8jQJA","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1739827319193,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$9-juxhhwirccEpki7dJYZ8zz8TqjbTb9t3ryGW6cBTk"},
{"content":{"body":"this still looks pretty accurate to me https://v8.dev/blog/elements-kinds, though i'm a bit behind on some of the more recent changes in v8 regarding the turboshaft rewrite.","m.mentions":{},"msgtype":"m.text"},"ts":1739827431013,"senderName":"snek","senderId":"@devsnek:matrix.org","id":"$rC2A9ForZzP949wrjaAd6veKSd7qjSQDqMSqg9qfuIs"}
]