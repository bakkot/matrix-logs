[
{"content":{"body":"does anyone have a clever trick for hashing ropes? I was looking for an easy-to-compute associative non-commutative operation on int32 for combining hash values (so you can efficiently derive the hash of the rope from the hash of its parts) but didn't have that much luck.\n\nthings I found:\n- c(x, y) = x + y when x even, x - y when x odd [which suffers from being commutative 1/4 of the time, when both are even, and also has a lot of collisions between things of the form \"x\" and \"xyy\"]\n- the examples in this page, all of which are pretty complex: https://alexknvl.com/posts/monoidal-hashing.html","format":"org.matrix.custom.html","formatted_body":"<p>does anyone have a clever trick for hashing ropes? I was looking for an easy-to-compute associative non-commutative operation on int32 for combining hash values (so you can efficiently derive the hash of the rope from the hash of its parts) but didn't have that much luck.</p>\n<p>things I found:</p>\n<ul>\n<li>c(x, y) = x + y when x even, x - y when x odd [which suffers from being commutative 1/4 of the time, when both are even, and also has a lot of collisions between things of the form &quot;x&quot; and &quot;xyy&quot;]</li>\n<li>the examples in this page, all of which are pretty complex: https://alexknvl.com/posts/monoidal-hashing.html</li>\n</ul>\n","msgtype":"m.text"},"ts":1632790856216,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$_ApUGWeJ__h2f4blvJs4AFBTzA5bmW7JvxLv4VpMmjI"},
{"content":{"body":"I was expecting there to be a known answer to this but I couldn't find one; I'm hoping there's something clever engines are doing here","msgtype":"m.text"},"ts":1632790880363,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$zt8FGHdJq4g3ojiKM3mV-L4bsNM_ne4Gp5EwBqViv1w"},
{"content":{"body":"i'm not sure we even hash ropes","msgtype":"m.text"},"ts":1632844098998,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$-tqi3vy4m-yjtwhcCqRwrzios0E3EWBl9l5LEKo6oU4"},
{"content":{"body":"what is the use case where you need to hash a rope but not flatten it?","msgtype":"m.text"},"ts":1632844129955,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$bYDiSDgdlB0UNNyWIH3ltvuCMmls-8mwahfCoveRSG0"},
{"content":{"body":"\"hash a rope\" has got to be slang for something with drugs","msgtype":"m.text"},"ts":1632844145284,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$Yuwx9MJOvxd6eOQ-BtjXPCDkzx-4kxodWK8r6BxaV20"},
{"content":{"body":"in my case, I'm using it as a key in a hash table","msgtype":"m.text"},"ts":1632844756581,"senderName":"bakkot","senderId":"@bakkot:matrix.org","id":"$RoR1QafN701oDGwF5SXVL7K8vEubLGNz-LJM6_rWYks"},
{"content":{"body":"i'd recommend just flattening in that case too","msgtype":"m.text"},"ts":1632845762380,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$cQ-Ler7ZpfFxAXvOPTok-IvUjCFagMFgRFgfpQaIOXQ"}
]