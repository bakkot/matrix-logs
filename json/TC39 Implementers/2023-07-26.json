[
{"content":{"body":"it is *very* confusing that in the chrome console, `class T{ #b = 1; }; const t = new T(); console.log(t.#b);` works instead of throws. is that a bug worth filing?","format":"org.matrix.custom.html","formatted_body":"it is <em>very</em> confusing that in the chrome console, <code>class T{ #b = 1; }; const t = new T(); console.log(t.#b);</code> works instead of throws. is that a bug worth filing?","msgtype":"m.text"},"ts":1690398657875,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$Uva54S5fdIiADkjYmoEimnXteSgD_ETMOqVStegUYWA"},
{"content":{"body":" * it is _very_ confusing that in the chrome console, `class T{ #b = 1; }; const t = new T(); console.log(t.#b);` works instead of throws (it throws in safari, altho it doesn't parse so i have to do it in two lines). is that a bug worth filing?","format":"org.matrix.custom.html","formatted_body":" * it is <em>very</em> confusing that in the chrome console, <code>class T{ #b = 1; }; const t = new T(); console.log(t.#b);</code> works instead of throws (it throws in safari, altho it doesn't parse so i have to do it in two lines). is that a bug worth filing?","m.new_content":{"body":"it is _very_ confusing that in the chrome console, `class T{ #b = 1; }; const t = new T(); console.log(t.#b);` works instead of throws (it throws in safari, altho it doesn't parse so i have to do it in two lines). is that a bug worth filing?","format":"org.matrix.custom.html","formatted_body":"it is <em>very</em> confusing that in the chrome console, <code>class T{ #b = 1; }; const t = new T(); console.log(t.#b);</code> works instead of throws (it throws in safari, altho it doesn't parse so i have to do it in two lines). is that a bug worth filing?","msgtype":"m.text"},"m.relates_to":{"event_id":"$Uva54S5fdIiADkjYmoEimnXteSgD_ETMOqVStegUYWA","rel_type":"m.replace"},"msgtype":"m.text"},"ts":1690398727179,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$FPyAUZRm7s4r9Dtf8HsEAOMOLiP9XIxiMFBwFx-AE-Y"},
{"content":{"body":"that is intentional afaik","msgtype":"m.text"},"ts":1690402312535,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$I7CW6wNYvzM7q-YhGNvh2RdASMtvPjMzOws7VHykPYY"},
{"content":{"body":"why is it very confusing?","msgtype":"m.text"},"ts":1690402316448,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$iwwphuoFl24G0QQlltEaYMJ6B9EMIC1DJ0vtvDJpEA8"},
{"content":{"body":"this was done with the hypothesis that when in a REPL debugging, developers expect to be able to access their private state","msgtype":"m.text"},"ts":1690402349684,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$eWAMKWwLg70uE3QvWyNFJMvSPje6MVCkO5te2MdNl7U"},
{"content":{"body":"yeah it used to throw, and there was a particular effort to make it work. It's only in the console, so it doesn't violate privacy.","msgtype":"m.text"},"ts":1690402368044,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$zZ5yyssIX1ln3jQHq6MSL1c_uM2AukAIjew6YcitD2Y"},
{"content":{"body":"otherwise you can't debug private state easily at all","msgtype":"m.text"},"ts":1690402368052,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$tOGsqZob-S3FuzDUy7mq9zmUMmy7M9Rj_rxTIDRTkcg"},
{"content":{"body":"there are other non-conformant behavior in the console like allowing let/const redecls at the same scope","msgtype":"m.text"},"ts":1690402459213,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$wzKnIjmHVc9aGVQ4FUUgo5hr9T5PPk6kLaILCGdL2U0"},
{"content":{"body":"for the same reasons, that is, of better DX during REPL debugging","msgtype":"m.text"},"ts":1690402476767,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$i9lQ-zZUrxZPpE24nIIpSrOt-V7lCUwdWfA3q9_7SOQ"},
{"content":{"body":"What would be really great is if we could revive the effort to standardize JS console behavior, which has long differed from scripts and modules. Bradley was previously working on this.","msgtype":"m.text"},"ts":1690402492110,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$jWFvfOsh-OZq5bIjeathtJ899G0Oz7OozGV2JR1h5V4"},
{"content":{"body":"that was shut down by Allen last time IIRC","msgtype":"m.text"},"ts":1690402505648,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$3gn4vlojhoPqQ73z7D5iNFB1-vpREf6uiEQEh09QrD0"},
{"content":{"body":"but Allen is no longer actively participating","msgtype":"m.text"},"ts":1690402512151,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$CXn9NYvs1VfvSeKPx_TqQ0ORLAaXQLLwuI3mNVXLZKQ"},
{"content":{"body":"well, we can review the counterarguments he made previously and see what the committee thinks","msgtype":"m.text"},"ts":1690402549555,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$ZDifAh9NO5b27Md4w7k7cEDo-grZlbRgm_8EOXl6LhU"},
{"content":{"body":"yeah","msgtype":"m.text"},"ts":1690402560108,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$TjvTLqKVncfrWKFSo0SnS5dzy7Kk5CmRb4x6MwsOIfQ"},
{"content":{"body":"ultimately I think Allen's model of embedders/extensions and such differs from the way we've been moving, and I think that sort of thing was the sticking point","msgtype":"m.text"},"ts":1690402585345,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$8mEtV51miSF8RzpiXmTEb4jmYfOT3Y475rY3mQS-m1k"},
{"content":{"body":"This is the previous repo: https://github.com/bmeck/js-repl-goal","msgtype":"m.text"},"ts":1690402648163,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$XbXFf106jFe6N88d1VdVJNvlcYpW_hKF4PaO0ZMbk3g"},
{"content":{"body":"I want cake and to eat it too.\nStrict mode repl, don't let me assign to non-writable prop, but also yay for letting me access private fields when debugging!","format":"org.matrix.custom.html","formatted_body":"I want cake and to eat it too.<br />\nStrict mode repl, don't let me assign to non-writable prop, but also yay for letting me access private fields when debugging!","msgtype":"m.text"},"ts":1690403867302,"senderName":"Ashley Claymore","senderId":"@aclaymore:matrix.org","id":"$ltMNuxiss-sxclOHFUdMHQ1EzVt0S_P2oMMfkdfqd08"},
{"content":{"body":"yeah that could be a feature request, a 100% compliant repl mode","msgtype":"m.text"},"ts":1690403958613,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$soMsV547lRqmxUqMVnsmQ5HQyMVJqjhfgQ4GwEmBMm8"},
{"content":{"body":"dunno if devtools would be interested","msgtype":"m.text"},"ts":1690403966693,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$2iV4ofq50ls4np6ZZsXKc6eeBH7DnQ4EPqZ2Yjniyrs"},
{"content":{"body":"IIRC last time we asked (years ago with a different team) Chrome DevTools people liked the goal if it could be done well. Ultimately it's hard to say yes or no until more work has been done on the proposal.","msgtype":"m.text"},"ts":1690404045410,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$Y1IwBK0RkYxHpab8mR00Qea671GVxC_ot5vFVcLWbTA"},
{"content":{"body":"but yes we definitely shouldn't move forward with anything like this without engaging various devtools people","msgtype":"m.text"},"ts":1690404093953,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$UKT5Wn20ZszLq4Ym_yuWJ4HIyq-Flt69zvZIQHiZ0ns"},
{"content":{"body":"> <@shuyuguo:matrix.org> why is it very confusing?\n\na user on irc spent 6 hours trying to figure out why their code worked in the console and not anywhere else","format":"org.matrix.custom.html","formatted_body":"<mx-reply><blockquote><a href=\"https://matrix.to/#/!eHkwtWesRXuxHVBgDG:matrix.org/$iwwphuoFl24G0QQlltEaYMJ6B9EMIC1DJ0vtvDJpEA8?via=matrix.org&via=mozilla.org&via=igalia.com\">In reply to</a> <a href=\"https://matrix.to/#/@shuyuguo:matrix.org\">@shuyuguo:matrix.org</a><br>why is it very confusing?</blockquote></mx-reply>a user on irc spent 6 hours trying to figure out why their code worked in the console and not anywhere else","m.relates_to":{"m.in_reply_to":{"event_id":"$iwwphuoFl24G0QQlltEaYMJ6B9EMIC1DJ0vtvDJpEA8"}},"msgtype":"m.text"},"ts":1690404900401,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$UOrqGM6Kk5v35I-0jOanOzSDwtkAQL-LfHE1XV_kEuI"},
{"content":{"body":"perhaps emitting a warning the first time someone access private data they're not \"supposed\" to be able to get in the repl, would be helpful?","msgtype":"m.text"},"ts":1690404939692,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$coLy8BsyfymcB7eIMWTGGb9lKYAblGflVntkESNNW0U"},
{"content":{"body":"(iow, developers seem to _not_ expect the repl *input* to behave differently from real code, only the output)","format":"org.matrix.custom.html","formatted_body":"(iow, developers seem to <em>not</em> expect the repl <em>input</em> to behave differently from real code, only the output)","msgtype":"m.text"},"ts":1690404979738,"senderName":"ljharb","senderId":"@ljharb:matrix.org","id":"$b9p1cogPluF04HJ4x4u7o3nYDD9KS4mEFxvD1vvO4n0"},
{"content":{"body":"having a warning for non-compliant behavior like this is a great thing to file an issue about","msgtype":"m.text"},"ts":1690405199724,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$Q1ra8qwCAdzE3Kc3Ve25XUNJ5KAoOFJ6mNJuxyr-VD0"},
{"content":{"body":"the not-input-but-output point is kind of tricky","msgtype":"m.text"},"ts":1690405213018,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$IrtmjAbT-zoQLqW2V8m_i3vo2QULZYTOf-HcQAfOb_A"},
{"content":{"body":"i think there's a pretty legitimate mental model where if you take a multiline file, you can evaluate it line-by-line by copy/pasting into a repl","msgtype":"m.text"},"ts":1690405242177,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$_4QWatDEA_n4uEcnqSRDBgw1a8sN8Io0B9I212BcPe8"},
{"content":{"body":"there's a bunch of things that are different between consoles besides this. e.g., consoles beat modules by years in supporting top-level await.","msgtype":"m.text"},"ts":1690405270151,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$tyweHWGX7iFR0kiHkwkuf3V_O3tiOz4GpVxnOP8EJRA"},
{"content":{"body":"and obviously the const/let redefinition which I don't think anyone is asking anyone to get rid of","msgtype":"m.text"},"ts":1690405297645,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$xasJP07CWvAk0bo4E0Jrn4SpKY2lkqW1scCXNgry4WY"},
{"content":{"body":"OTOH there's also data that devs _don't_ want the line-by-line mental model for let/const","format":"org.matrix.custom.html","formatted_body":"OTOH there's also data that devs <em>don't</em> want the line-by-line mental model for let/const","msgtype":"m.text"},"ts":1690405305093,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$7QXMl5K9ctZ-mE0H1RNgsLsyDPInaR6yTEGFeVt7XrE"},
{"content":{"body":"because convenience trumps there","msgtype":"m.text"},"ts":1690405310616,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$TxP591LFw8iSjupTp7qTG_DmQBhUBSa_phllwMgTdDU"},
{"content":{"body":"exactly","msgtype":"m.text"},"ts":1690405316084,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$piPgdBT-NsDXkgjNCFKpmoUqvahOYYuUcLv9UOIQ-wg"},
{"content":{"body":"so this seems more like a documentation issue","msgtype":"m.text"},"ts":1690405324220,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$Cgd5_MOI8w6QD8lMPP1LJTOZR1rJwHyFO2Skk7IcEhA"},
{"content":{"body":"but it'd also be kinda nice if the difference in behavior could ultimately be traced to, \"the console is simply defined differently\" rather than \"Chrome does some silly thing\"","msgtype":"m.text"},"ts":1690405352828,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$LBuQUvXpYlOFNVCvmPJyNBtqMl0tpv6eFFR-eh6fJCo"},
{"content":{"body":"also if devtools want to keep innovating, we can specifically endorse the \"also random extensions are cool, this is just the base\" theory *just for consoles*","format":"org.matrix.custom.html","formatted_body":"also if devtools want to keep innovating, we can specifically endorse the \"also random extensions are cool, this is just the base\" theory <em>just for consoles</em>","msgtype":"m.text"},"ts":1690405416680,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$MAeUhhDDU789Mc5r-3jp7U6PNOttIKUNhaLJoHD30ck"},
{"content":{"body":"while simultaneously defining cases that everyone wants to support","msgtype":"m.text"},"ts":1690405434735,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$cTumnQxTGCtZM4aB6zdjTc_CI7x6anTZMcmxVSxMs_A"},
{"content":{"body":"yes, agreed on all points there","msgtype":"m.text"},"ts":1690405457436,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$xjbHUyhnbRvs_nB6WkoGv1oU0s4Wh5Unr0LFdQKGCT4"},
{"content":{"body":"ultimately I don't know if the \"someone was confused for 6 hours\" problem is solvable in general... that's sort of a thing that happens sometimes","msgtype":"m.text"},"ts":1690405481902,"senderName":"littledan","senderId":"@littledan:matrix.org","id":"$gn7n_R5l_i158yMw9JzkUoaqvEfKwrZ1s_VlPNPWT6I"}
]