[
{"content":{"body":"When the spec uses a cover grammar, do any real-world parsers do an initial parse followed by the appropriate 'refinement' parse?  ","msgtype":"m.text"},"ts":1622515765564,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$8ks1QQQbYQ-i68kDyAAPXSVFwsHl_8qArE_gKBv9QV0"},
{"content":{"body":"jmdyck: what do you mean by 'refinement' parse? reparse the same token sequence, or 'reparse' the more generic AST?","format":"org.matrix.custom.html","formatted_body":"<a href=\"https://matrix.to/#/@jmdyck:matrix.org\">jmdyck</a>: what do you mean by 'refinement' parse? reparse the same token sequence, or 'reparse' the more generic AST?","msgtype":"m.text"},"ts":1622565623100,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$F0CtJnLq7qgtwo7z-ZqbQlVfIgdbnnOSdqi2XIiQC1U"},
{"content":{"body":"Well, the spec models it as the former, but I'd be interested in hearing about the latter too.","msgtype":"m.text"},"ts":1622569699944,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$LHolYqu-Twg_DOYUu-AzmIrknn8QySr0B2EZMSIp5kA"},
{"content":{"body":"so the way spec does it would be implemented basically as rewinding, which i think SM used to do but not sure if it still does","msgtype":"m.text"},"ts":1622569877859,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$x6dtQQjdQkRONGvb91Jwg-Mv2onxJxc9bNw_QtEBLs8"},
{"content":{"body":"This is in connection with https://github.com/tc39/ecma262/issues/2421 : if a parser doesn't 'do' (in some sense) a parse according to the cover grammar, that might make it difficult to do early error detection on the result of such a parse.","msgtype":"m.text"},"ts":1622570025916,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$dbRhmQXcDOoYKX3tofgjGM9JBjrVo49EyQH8d0wFzh8"},
{"content":{"body":"V8 keeps the original AST and does \"classification\", which is basically EE detection (e.g., for arrow params, checking they're valid parameters), then makes a new AST by walking the old one","msgtype":"m.text"},"ts":1622570285510,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$4z9yqP6z6BMA_eN2upsRU6iQHLdLJTffb2pKyVM631A"},
{"content":{"body":"there are also various scopes that keep possible errors once disambiguation happens","msgtype":"m.text"},"ts":1622570306600,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$0jmZUdLCuHBOheHk5bRQ6OQ4g6PPrSIagMuqMhKvzTs"},
{"content":{"body":"interesting","msgtype":"m.text"},"ts":1622570333221,"senderName":"jmdyck","senderId":"@jmdyck:matrix.org","id":"$KtqWzn-D2f97MJupcd1S0Aiwlc9pzTshxMbZSF0rtps"},
{"content":{"body":"https://source.chromium.org/chromium/chromium/src/+/main:v8/src/parsing/parser.cc;l=2392;drc=f28f8bf74a55624bef40febdfc89673a57e0eb6f?q=DeclareArrowFunctionFormalParameters&ss=chromium","msgtype":"m.text"},"ts":1622570460367,"senderName":"shu","senderId":"@shuyuguo:matrix.org","id":"$zaE5ZD_nvOLSZKrG6AhtjghZzxqx7GmNtxNi7hHJFcg"}
]